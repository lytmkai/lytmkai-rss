<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[AIä¼šèŠå¤©äº†ï¼ŸGPT-5.1åŒæ ¸é©±åŠ¨æƒ…å•†å¤§å‡çº§ï¼]]></title>    <link>https://juejin.cn/post/7571808096937639977</link>    <guid>https://juejin.cn/post/7571808096937639977</guid>    <pubDate>2025-11-13T13:17:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571808096937639977" data-draft-id="7571972751529033764" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIä¼šèŠå¤©äº†ï¼ŸGPT-5.1åŒæ ¸é©±åŠ¨æƒ…å•†å¤§å‡çº§ï¼"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-13T13:17:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIä¼šèŠå¤©äº†ï¼ŸGPT-5.1åŒæ ¸é©±åŠ¨æƒ…å•†å¤§å‡çº§ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:17:33.000Z" title="Thu Nov 13 2025 13:17:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å˜¿ï¼Œå„ä½AIåœˆçš„æœ‹å‹ä»¬ï¼Œåˆåˆ°äº†æˆ‘ä»¬æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ï¼OpenAIåœ¨2025å¹´11æœˆ13æ—¥è¿™ä¸ªæ™®é€šçš„æ—¥å­ï¼Œæ‰”ä¸‹äº†ä¸€é¢—ä¸æ™®é€šçš„â€œé‡ç£…ç‚¸å¼¹â€â€”â€”GPT-5.1ç³»åˆ—æ¨¡å‹æ­£å¼ç™»åœºã€‚åˆ«ä»¥ä¸ºåˆæ˜¯äº›å†·å†°å†°çš„è·‘åˆ†æ•°æ®å‡çº§ï¼Œè¿™æ¬¡ï¼ŒOpenAIç©çœŸçš„äº†ï¼Œä»–ä»¬æŠŠç„¦ç‚¹ä»å•çº¯çš„â€œæ™ºå•†â€ç«èµ›ï¼Œè½¬å‘äº†å¦‚ä½•è®©AIå˜å¾—â€œæ›´æœ‰äººæƒ…å‘³â€ã€â€œæ›´æ‡‚ä½ â€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-13_21.09.49-1024x535.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-13_21.09.49-1024x535.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc17515f2b2f406c8032e196e15d0adb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763644653&amp;x-signature=GWcSV2lQWfbc9o9FoHOY6tgzOUk%3D" alt="iShot_2025-11-13_21.09.49" loading="lazy"/></a></p>
<p>è¿™æ¬¡å‡çº§çš„æ ¸å¿ƒï¼Œæ˜¯æ¨å‡ºäº†GPT-5.1å®¶æ—çš„ä¸¤ä½æ–°æˆå‘˜ï¼š<strong>GPT-5.1 Instantï¼ˆå³æ—¶ç‰ˆï¼‰</strong> å’Œ <strong>GPT-5.1 Thinkingï¼ˆæ€è€ƒç‰ˆï¼‰</strong>ã€‚Instantï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä½ æ—¥å¸¸çš„â€œå¿«èŠ‚å¥ä¼™ä¼´â€ï¼Œå®ƒæ›´æ¸©æš–ã€æ›´å¬è¯ï¼Œç”šè‡³å¸¦ç‚¹å°é¡½çš®ï¼Œé€‚åˆå¿«é€Ÿå¯¹è¯å’Œä¿¡æ¯è·å–ã€‚è€ŒThinkingç‰ˆæœ¬ï¼Œåˆ™æ˜¯ä½ è§£å†³å¤æ‚é—®é¢˜çš„â€œè§£é¢˜ä¸“å®¶â€ï¼Œå®ƒä¼šåƒäººç±»ä¸€æ ·ï¼Œåœ¨é¢å¯¹éš¾é¢˜æ—¶èŠ±ç‚¹æ—¶é—´â€œæ€è€ƒâ€ï¼Œç»™å‡ºæ›´æ·±å…¥ã€æ›´æ˜“æ‡‚çš„ç­”æ¡ˆï¼Œå°¤å…¶åœ¨æ•°å­¦å’Œç¼–ç¨‹ç­‰ç¡¬æ ¸é¢†åŸŸè¡¨ç°äº®çœ¼ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-13_21.09.19-1024x599.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-13_21.09.19-1024x599.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e1884fe6de74845b905f52785b1cb8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763644653&amp;x-signature=F1ydpNfS7wDeiNKvvqDnUtOC1Os%3D" alt="iShot_2025-11-13_21.09.19" loading="lazy"/></a></p>
<p>æœ€è®©æˆ‘æ‹æ¡ˆå«ç»çš„ï¼Œæ˜¯å®ƒå¼•å…¥çš„â€œ<strong>è‡ªé€‚åº”æ¨ç†</strong>â€èƒ½åŠ›ã€‚æƒ³è±¡ä¸€ä¸‹ï¼ŒAIä¸å†æ˜¯é‚£ä¸ªåªä¼šæŒ‰éƒ¨å°±ç­çš„â€œä¹¦å‘†å­â€ï¼Œå®ƒå­¦ä¼šäº†â€œçœ‹è„¸è‰²â€è¡Œäº‹ï¼Œèƒ½æ ¹æ®ä½ çš„é—®é¢˜éš¾åº¦ï¼Œè‡ªå·±å†³å®šè¦â€œæƒ³å¤šä¹…â€ã€‚ç®€å•é—®é¢˜ç§’å›ï¼Œå¤æ‚é—®é¢˜åˆ™ä¼šâ€œæ²‰æ€â€ç‰‡åˆ»ï¼Œç»™å‡ºæ›´æ·±æ€ç†Ÿè™‘çš„ç­”æ¡ˆã€‚è¿™ç§æ™ºèƒ½åˆ†é…æ€è€ƒèµ„æºçš„æ¨¡å¼ï¼Œæ— ç–‘è®©AIçš„äº¤äº’ä½“éªŒå˜å¾—æ›´è‡ªç„¶ã€æ›´åƒçœŸäººäº†ã€‚</p>
<p>ä½†æ›´å‰å®³çš„è¿˜åœ¨åé¢ï¼OpenAIè¿™æ¬¡å¯çœŸæ˜¯æŠŠâ€œç§äººå®šåˆ¶â€ç©æ˜ç™½äº†ã€‚é™¤äº†é‚£äº›è€³ç†Ÿèƒ½è¯¦çš„é»˜è®¤ã€å‹å¥½ã€é«˜æ•ˆæ¨¡å¼ï¼Œä»–ä»¬è¿˜å¤§æ‰‹ç¬”åœ°åŠ å…¥äº†ä»€ä¹ˆâ€œ<strong>ä¸“ä¸šï¼ˆProfessionalï¼‰</strong>â€ã€â€œ<strong>å¦è¯šï¼ˆCandidï¼‰</strong>â€ã€ç”šè‡³â€œ<strong>å¤çµç²¾æ€ªï¼ˆQuirkyï¼‰</strong>â€çš„é£æ ¼ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯ï¼Œéšæ—¶åˆ‡æ¢ä½ çš„ChatGPTâ€œäººæ ¼â€ã€‚æ›´ç»çš„æ˜¯ï¼Œä»–ä»¬è¿˜åœ¨å®éªŒç²¾ç»†åŒ–æ§åˆ¶åŠŸèƒ½ï¼Œè®©ä½ èƒ½é€šè¿‡æ»‘å—å¾®è°ƒAIçš„<strong>ç®€æ´åº¦ã€çƒ­æƒ…åº¦ã€æ˜“è¯»æ€§ï¼Œç”šè‡³æ˜¯è¡¨æƒ…ç¬¦å·çš„ä½¿ç”¨é¢‘ç‡</strong>ã€‚æˆ‘çš„å¤©ï¼Œè¿™ä¸å°±æ˜¯æ‰“é€ ä½ çš„ä¸“å±AIçµé­‚ä¼´ä¾£å—ï¼Ÿè€Œä¸”ï¼Œå¦‚æœä½ åœ¨å¯¹è¯ä¸­å±•ç°å‡ºç‰¹å®šåå¥½ï¼ŒChatGPTè¿˜ä¼šä¸»åŠ¨è¯¢é—®æ˜¯å¦ä¿å­˜â€”â€”çœŸæ­£åšåˆ°äº†â€œæ— æ„Ÿâ€ä¸ªæ€§åŒ–ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-13_21.09.28-965x1024.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-13_21.09.28-965x1024.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/177ba736ca1d4366aee701b9bd92b423~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763644653&amp;x-signature=nTxfzokOsHw2grBgHR4cs5NW7R4%3D" alt="iShot_2025-11-13_21.09.28" loading="lazy"/></a></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒOpenAIåœ¨å®‰å…¨è€ƒé‡ä¸Šä¹Ÿè¿ˆå‡ºäº†æ›´äººæ€§åŒ–çš„ä¸€æ­¥ã€‚ä»–ä»¬é¦–æ¬¡å°†â€œ<strong>å¿ƒç†å¥åº·ï¼ˆMental Healthï¼‰</strong>â€å’Œâ€œ<strong>æƒ…æ„Ÿä¾èµ–ï¼ˆEmotional Relianceï¼‰</strong>â€çº³å…¥è¯„ä¼°ç»´åº¦â€”â€”è¿™å¯ä¸æ˜¯å°äº‹ï¼Œå®ƒæ„å‘³ç€AIä¸å…‰è¦èªæ˜ï¼Œè¿˜å¾—â€œæ‡‚äººå¿ƒâ€ï¼Œè¦å­¦ä¼šå¦‚ä½•ä»¥å¥åº·çš„æ–¹å¼é™ªä¼´æˆ‘ä»¬ï¼Œè€Œä¸æ˜¯åŠ©é•¿ä¸å¥åº·çš„æƒ…æ„Ÿä¾èµ–ã€‚</p>
<p>å½“ç„¶ï¼Œæ–°æ¨¡å‹å‘å¸ƒæ€»æ˜¯è®©äººæœŸå¾…åˆå¿å¿‘ã€‚ç›®å‰ï¼Œè¿™æ¬¡æ›´æ–°æ­£åœ¨é€æ­¥æ¨é€ï¼Œä»˜è´¹ç”¨æˆ·å°†ä¼˜å…ˆä½“éªŒï¼Œå…è´¹ç”¨æˆ·ä¹Ÿæ— éœ€ç€æ€¥ï¼Œåç»­å¾ˆå¿«ä¼šè·Ÿä¸Šã€‚è€Œä¸”ï¼ŒOpenAIè¿˜è´´å¿ƒåœ°å‡†å¤‡äº†â€œåæ‚”è¯â€ï¼šä»˜è´¹ç”¨æˆ·åœ¨ä¸‰ä¸ªæœˆå†…å¯ä»¥éšæ—¶åˆ‡æ¢å›æ—§çš„GPT-5æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-13_21.09.40-1024x645.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-13_21.09.40-1024x645.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e9e339570a04ed2baf8fdaa1f4666fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763644653&amp;x-signature=SiHxD0ZLU5KaQOc3O2xbXPNvu3E%3D" alt="iShot_2025-11-13_21.09.40" loading="lazy"/></a></p>
<p>æ‰€ä»¥ï¼Œæœ‹å‹ä»¬ï¼ŒGPT-5.1çš„å‘å¸ƒï¼Œè¿œä¸æ­¢æ˜¯æ•°å­—ä¸Šçš„å †å ï¼Œæ›´åƒæ˜¯å®£å‘Šäº†AIæœªæ¥å°†æˆä¸ºæˆ‘ä»¬èº«è¾¹â€œæ›´æ‡‚ä½ ã€æ›´æœ‰æ¸©åº¦â€çš„ä¼™ä¼´ã€‚ç”¨OpenAIåº”ç”¨CEO Fidji Simoçš„è¯è¯´ï¼Œè¿™æ¬¡å‡çº§çš„æ ¸å¿ƒï¼Œæ˜¯å°†**æ™ºå•†ï¼ˆIQï¼‰ä¸æƒ…å•†ï¼ˆEQï¼‰**æ›´å¥½åœ°ç»“åˆèµ·æ¥ã€‚è¿™ä¸å°±æ˜¯æˆ‘ä»¬ä¸€ç›´æœŸå¾…çš„ï¼Œé‚£ä¸ªæ—¢èªæ˜åˆå–„è§£äººæ„çš„AIå—ï¼Ÿæœªæ¥å·²æ¥ï¼Œæˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠNginxæ ¸å¿ƒæŠ€æœ¯ã€‹ç¬¬11ç« ï¼šå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡]]></title>    <link>https://juejin.cn/post/7572028313930285096</link>    <guid>https://juejin.cn/post/7572028313930285096</guid>    <pubDate>2025-11-13T13:19:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313930285096" data-draft-id="7572020278387195938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ã€ŠNginxæ ¸å¿ƒæŠ€æœ¯ã€‹ç¬¬11ç« ï¼šå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,Nginx"/> <meta itemprop="datePublished" content="2025-11-13T13:19:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†°_æ²³"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942303527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ã€ŠNginxæ ¸å¿ƒæŠ€æœ¯ã€‹ç¬¬11ç« ï¼šå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942303527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†°_æ²³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:19:04.000Z" title="Thu Nov 13 2025 13:19:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šå†°æ²³
<br/>æ˜Ÿçƒï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fm6z.cn%2F6aeFbs" target="_blank" title="http://m6z.cn/6aeFbs" ref="nofollow noopener noreferrer">m6z.cn/6aeFbs</a>
<br/>åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbinghe.gitcode.host" target="_blank" title="https://binghe.gitcode.host" ref="nofollow noopener noreferrer">binghe.gitcode.host</a>
<br/>æ–‡ç« æ±‡æ€»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbinghe.gitcode.host%2Fmd%2Fall%2Fall.html" target="_blank" title="https://binghe.gitcode.host/md/all/all.html" ref="nofollow noopener noreferrer">binghe.gitcode.host/md/all/all.â€¦</a>
<br/>æ˜Ÿçƒé¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbinghe.gitcode.host%2Fmd%2Fzsxq%2Fintroduce.html" target="_blank" title="https://binghe.gitcode.host/md/zsxq/introduce.html" ref="nofollow noopener noreferrer">binghe.gitcode.host/md/zsxq/intâ€¦</a></p>
<blockquote>
<p>æ²‰æ·€ï¼Œæˆé•¿ï¼Œçªç ´ï¼Œå¸®åŠ©ä»–äººï¼Œæˆå°±è‡ªæˆ‘ã€‚</p>
</blockquote>
<ul>
<li>æœ¬ç« éš¾åº¦ï¼šâ˜…â˜…â˜†â˜†â˜†</li>
<li>æœ¬ç« é‡ç‚¹ï¼šç”¨æœ€ç®€çŸ­çš„ç¯‡å¹…ä»‹ç»Nginxæœ€æ ¸å¿ƒçš„çŸ¥è¯†ï¼ŒæŒæ¡Nginxå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡ï¼Œå¹¶èƒ½å¤Ÿçµæ´»è¿ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ï¼Œç»´æŠ¤é«˜å¯ç”¨ç³»ç»Ÿã€‚</li>
</ul>
<p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å†°æ²³~~</strong></p>
<p>ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ã€ŠNginxæ ¸å¿ƒæŠ€æœ¯ã€‹çš„ç¬¬11ç« ï¼šå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡ï¼Œå¤šä¸€å¥æ²¡æœ‰ï¼Œå°‘ä¸€å¥ä¸è¡Œï¼Œç”¨æœ€ç®€çŸ­çš„ç¯‡å¹…è®²è¿°Nginxæœ€æ ¸å¿ƒçš„çŸ¥è¯†ï¼Œå¥½äº†ï¼Œå¼€å§‹ä»Šå¤©çš„å†…å®¹ã€‚</p>
<h2 data-id="heading-0">11.1 æœ¬ç« æ¦‚è¿°</h2>
<p>Nginxèƒ½å¤Ÿå®ç°HTTPã€HTTPSåè®®çš„è´Ÿè½½å‡è¡¡ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°TCPåè®®çš„è´Ÿè½½å‡è¡¡ã€‚é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œå¯ä¸å¯ä»¥é€šè¿‡Nginxå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå¯ä»¥ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¢è®¨ä¸‹å¦‚ä½•ä½¿ç”¨Nginxå®ç°MySQLçš„è´Ÿè½½å‡è¡¡ã€‚</p>
<h2 data-id="heading-1">11.2 å‰ææ¡ä»¶</h2>
<p><strong>æ³¨æ„ï¼šä½¿ç”¨Nginxå®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡ï¼Œå‰ææ˜¯è¦æ­å»ºMySQLçš„ä¸»ä¸»å¤åˆ¶ç¯å¢ƒï¼Œå…³äºMySQLä¸»ä¸»å¤åˆ¶ç¯å¢ƒçš„æ­å»ºï¼Œåç»­ä¼šåœ¨MySQLä¸“é¢˜ä¸ºå¤§å®¶è¯¦ç»†é˜è¿°ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾å·²ç»æ­å»ºå¥½MySQLçš„ä¸»ä¸»å¤åˆ¶ç¯å¢ƒï¼ŒMySQLæœåŠ¡å™¨çš„IPå’Œç«¯å£åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºã€‚</strong></p>
<ul>
<li>192.168.1.101    3306</li>
<li>192.168.1.102    3306</li>
</ul>
<p>é€šè¿‡Nginxè®¿é—®MySQLçš„IPå’Œç«¯å£å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<ul>
<li>192.168.1.100    3306</li>
</ul>
<h2 data-id="heading-2">11.3 Nginxå®ç°MySQLè´Ÿè½½å‡è¡¡</h2>
<p>nginxåœ¨ç‰ˆæœ¬1.9.0ä»¥åæ”¯æŒtcpçš„è´Ÿè½½å‡è¡¡ï¼Œå…·ä½“å¯ä»¥å‚ç…§å®˜ç½‘å…³äºæ¨¡å—<a href="https://link.juejin.cn?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fstream%2Fngx_stream_core_module.html%23tcp_nodelay" target="_blank" title="http://nginx.org/en/docs/stream/ngx_stream_core_module.html#tcp_nodelay" ref="nofollow noopener noreferrer">ngx_stream_core_module</a>çš„å™è¿°ï¼Œé“¾æ¥åœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fstream%2Fngx_stream_core_module.html%23tcp_nodelay%25E3%2580%2582" target="_blank" title="http://nginx.org/en/docs/stream/ngx_stream_core_module.html#tcp_nodelay%E3%80%82" ref="nofollow noopener noreferrer">nginx.org/en/docs/strâ€¦</a></p>
<p>nginxä»1.9.0åå¼•å…¥æ¨¡å—ngx_stream_core_moduleï¼Œæ¨¡å—æ˜¯æ²¡æœ‰ç¼–è¯‘çš„ï¼Œéœ€è¦ç”¨åˆ°ç¼–è¯‘ï¼Œç¼–è¯‘æ—¶éœ€æ·»åŠ --with-streamé…ç½®å‚æ•°ï¼Œstreamè´Ÿè½½å‡è¡¡å®˜æ–¹é…ç½®æ ·ä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-bash" lang="bash">worker_processes auto;
error_log /var/log/nginx/error.log info;

events {
    worker_connections  1024;
}

stream {
    upstream backend {
        <span class="hljs-built_in">hash</span> <span class="hljs-variable">$remote_addr</span> consistent;

        server backend1.example.com:12345 weight=5;
        server 127.0.0.1:12345            max_fails=3 fail_timeout=30s;
        server unix:/tmp/backend3;
    }

    upstream dns {
       server 192.168.0.1:53535;
       server dns.example.com:53;
    }

    server {
        listen 12345;
        proxy_connect_timeout 1s;
        proxy_timeout 3s;
        proxy_pass backend;
    }

    server {
        listen 127.0.0.1:53 udp;
        proxy_responses 1;
        proxy_timeout 20s;
        proxy_pass dns;
    }
    
    server {
        listen [::1]:12345;
        proxy_pass unix:/tmp/stream.socket;
    }
}
</code></pre>
<p>è¯´åˆ°è¿™é‡Œï¼Œä½¿ç”¨Nginxå®ç°MySQLçš„è´Ÿè½½å‡è¡¡å°±æ¯”è¾ƒç®€å•äº†ã€‚æˆ‘ä»¬å¯ä»¥å‚ç…§ä¸Šé¢å®˜æ–¹çš„é…ç½®ç¤ºä¾‹æ¥é…ç½®MySQLçš„è´Ÿè½½å‡è¡¡ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°†Nginxé…ç½®æˆå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-bash" lang="bash">user  nginx;
<span class="hljs-comment">#user root;</span>
worker_processes  1;
error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;
events {
    worker_connections  1024;
}
http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    log_format  main  <span class="hljs-string">'$remote_addr - $remote_user [$time_local] "$request" '</span>
                      <span class="hljs-string">'$status $body_bytes_sent "$http_referer" '</span>
                      <span class="hljs-string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;
    access_log  /var/log/nginx/access.log  main;
    sendfile        on;
    <span class="hljs-comment">#tcp_nopush     on;</span>
    keepalive_timeout  65;
    <span class="hljs-comment">#gzip  on;</span>
    include /etc/nginx/conf.d/*.conf;
}

stream{
	upstream mysql{
		server 192.168.1.101:3306 weight=1;
		server 192.168.1.102:3306 weight=1;
	}
        
	server{
		listen 3306;
		server_name 192.168.1.100;
		proxy_pass mysql;
	}
}
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥è®¿é—®MySQLæ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">jdbc:mysql://192.168.1.100:3306/æ•°æ®åº“åç§°
</code></pre>
<p>æ­¤æ—¶ï¼ŒNginxä¼šå°†è®¿é—®MySQLçš„è¯·æ±‚è·¯ç”±åˆ°IPåœ°å€ä¸º192.168.1.101å’Œ192.168.1.102çš„MySQLä¸Šã€‚</p>
<p><strong>å¥½äº†ï¼Œç›¸ä¿¡å„ä½å°ä¼™ä¼´ä»¬å¯¹Nginxå¦‚ä½•å®ç°MySQLæ•°æ®åº“çš„è´Ÿè½½å‡è¡¡ï¼Œæœ‰äº†è¿›ä¸€æ­¥çš„äº†è§£ï¼Œæˆ‘æ˜¯å†°æ²³ï¼Œæˆ‘ä»¬ä¸‹æœŸè§~~</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€æ·±åº¦å®æµ‹ï¼GPT-5.1 vs Claude Sonnet 4.5ï¼è°æ˜¯èµ¢å®¶ï¼Ÿä»ä¸‡å­—é•¿æ–‡åˆ°å¤è¯—è¯åˆ›ä½œï¼Œä»3Dæ¸¸æˆç¼–ç¨‹åˆ°æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œç»“æœç«Ÿç„¶å‡ºäººæ„æ–™ï¼Cla]]></title>    <link>https://juejin.cn/post/7571972751529050148</link>    <guid>https://juejin.cn/post/7571972751529050148</guid>    <pubDate>2025-11-13T13:26:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751529050148" data-draft-id="7572021695294652466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€æ·±åº¦å®æµ‹ï¼GPT-5.1 vs Claude Sonnet 4.5ï¼è°æ˜¯èµ¢å®¶ï¼Ÿä»ä¸‡å­—é•¿æ–‡åˆ°å¤è¯—è¯åˆ›ä½œï¼Œä»3Dæ¸¸æˆç¼–ç¨‹åˆ°æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œç»“æœç«Ÿç„¶å‡ºäººæ„æ–™ï¼Cla"/> <meta itemprop="keywords" content="AIGC,OpenAI,ChatGPT"/> <meta itemprop="datePublished" content="2025-11-13T13:26:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€æ·±åº¦å®æµ‹ï¼GPT-5.1 vs Claude Sonnet 4.5ï¼è°æ˜¯èµ¢å®¶ï¼Ÿä»ä¸‡å­—é•¿æ–‡åˆ°å¤è¯—è¯åˆ›ä½œï¼Œä»3Dæ¸¸æˆç¼–ç¨‹åˆ°æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œç»“æœç«Ÿç„¶å‡ºäººæ„æ–™ï¼Cla
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:26:41.000Z" title="Thu Nov 13 2025 13:26:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">GPT-5.1å®æµ‹ï¼šæœ‰è¿›æ­¥ï¼Œä½†æ²¡ä½ æƒ³çš„é‚£ä¹ˆå¼º</h2>
<p><strong>æ˜¨å¤©å‡Œæ™¨ï¼ŒOpenAIå‘å¸ƒäº†GPT-5.1ã€‚æˆ‘èŠ±äº†ä¸€æ•´å¤©æ—¶é—´æ·±åº¦æµ‹è¯•ï¼Œç»“æœå¯èƒ½å’Œä½ é¢„æœŸçš„ä¸å¤ªä¸€æ ·ã€‚</strong></p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RJCbB5EcC%2F" target="_blank" title="https://www.bilibili.com/video/BV1RJCbB5EcC/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1RJâ€¦</a></p>
<p>å…ˆè¯´ç»“è®ºï¼šGPT-5.1ç¡®å®æ¯”ä¸‰ä¸ªæœˆå‰çš„GPT-5æœ‰è¿›æ­¥ï¼Œä½†å¦‚æœä½ æœŸå¾…çš„æ˜¯ç¢¾å‹çº§çš„æå‡ï¼Œå¯èƒ½è¦å¤±æœ›äº†ã€‚æ›´ç›´ç™½ç‚¹è¯´ï¼Œåœ¨å¾ˆå¤šå®é™…ä»»åŠ¡ä¸­ï¼Œå®ƒä¾ç„¶ä¸å¦‚Claude Sonnet 4.5ã€‚</p>
<p>è¿™ä¸æ˜¯é»‘ï¼Œæ˜¯å®æµ‹æ•°æ®ã€‚æˆ‘åšäº†æ¨ªå‘å¯¹æ¯”æµ‹è¯•ï¼ŒåŒ…æ‹¬é•¿æ–‡æœ¬ç”Ÿæˆã€æ–‡å­¦åˆ›ä½œã€å‰ç«¯å¼€å‘ç­‰å¤šä¸ªåœºæ™¯ï¼Œæœ‰äº›ç»“æœå‡ºä¹æ„æ–™ã€‚</p>
<h3 data-id="heading-1">å…ˆè¯´è¯´GPT-5.1æ”¹äº†å•¥</h3>
<p>OpenAIè¿™æ¬¡ä¸»æ‰“"åŠ¡å®"è·¯çº¿ã€‚ä¸‰ä¸ªæœˆå‰GPT-5å‘å¸ƒæ—¶ç¿»è½¦äº†â€”â€”å¾ˆå¤šç”¨æˆ·åæ˜ æ–°æ¨¡å‹è¿˜ä¸å¦‚è€çš„å¥½ç”¨ï¼Œæ•°å­¦é¢˜ç®—é”™ï¼Œä»£ç å†™å¾—ä¸é è°±ã€‚OpenAIå½“æ—¶è§£é‡Šè¯´æ˜¯"è·¯ç”±ç³»ç»Ÿ"çš„é”…ï¼Œå°±æ˜¯AIä¸çŸ¥é“è¯¥ç”¨å“ªä¸ªç‰ˆæœ¬æ¥å›ç­”ä½ ã€‚</p>
<p>GPT-5.1çš„æ”¹è¿›ä¸»è¦é›†ä¸­åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<p><strong>ç¬¬ä¸€ï¼ŒåŒæ¨¡å¼ç³»ç»Ÿã€‚</strong> Instantæ¨¡å¼é€Ÿåº¦å¿«ï¼Œé€‚åˆæ—¥å¸¸å¯¹è¯ï¼›Thinkingæ¨¡å¼ä¸“æ”»éš¾é¢˜ï¼Œä¼šæ ¹æ®é—®é¢˜å¤æ‚åº¦åŠ¨æ€è°ƒæ•´æ€è€ƒæ—¶é—´ã€‚å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œå®æµ‹ä¸‹æ¥ç¡®å®æ¯”GPT-5æ›´çµæ´»ã€‚</p>
<p><strong>ç¬¬äºŒï¼Œå‡å°‘"èƒ¡ç¼–ä¹±é€ "ã€‚</strong> å®˜æ–¹æ•°æ®è¯´å¹»è§‰ç‡ä»4.8%é™åˆ°2.1%ï¼Œè¿™ä¸ªæ”¹è¿›æŒºå®åœ¨çš„ã€‚æµ‹è¯•ä¸­é‡åˆ°ä¸ç¡®å®šçš„é—®é¢˜ï¼Œå®ƒç¡®å®æ›´æ„¿æ„æ‰¿è®¤"æˆ‘ä¸çŸ¥é“"ï¼Œè€Œä¸æ˜¯ç¡¬ç€å¤´çš®çç¼–ã€‚</p>
<p><strong>ç¬¬ä¸‰ï¼Œä¸ªæ€§åŒ–å®šåˆ¶ã€‚</strong> ç°åœ¨å¯ä»¥é€‰8ç§ä¸åŒçš„å¯¹è¯é£æ ¼ï¼Œä»ä¸“ä¸šä¸¥è‚ƒåˆ°æœ‰è¶£è½»æ¾éƒ½æœ‰ã€‚è¿™ä¸ªåŠŸèƒ½æŒºæœ‰ç”¨ï¼Œä¸åŒåœºæ™¯å¯ä»¥åˆ‡æ¢ä¸åŒé£æ ¼ã€‚</p>
<h3 data-id="heading-2">å®æµ‹æ•°æ®è¯´è¯ï¼šé•¿æ–‡æœ¬ç”Ÿæˆå®Œè´¥</h3>
<p>æˆ‘çš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ˜¯è®©ä¸¤ä¸ªAIç”Ÿæˆä¸‡å­—å­¦ä¹ æŠ¥å‘Šã€‚ç»™äº†åŒæ ·çš„å¼€æºé¡¹ç›®ä»“åº“é“¾æ¥ï¼Œè¦æ±‚æ·±åº¦åˆ†æã€‚</p>
<p>ç»“æœï¼Ÿ</p>
<p><strong>GPT-5.1ï¼š</strong> æ€»å­—ç¬¦3.1ä¸‡ï¼Œä¸­æ–‡çº¦6900å­— <strong>Claude Sonnet 4.5ï¼š</strong> æ€»å­—ç¬¦5.1ä¸‡ï¼Œä¸­æ–‡çº¦1.2ä¸‡å­—</p>
<p>Claudeç›´æ¥å¤šå†™äº†è¿‘ä¸€å€ã€‚è¿™ä¸æ˜¯ä¸ªä¾‹ï¼Œåœ¨å¤šè½®æµ‹è¯•ä¸­ï¼ŒGPT-5.1çš„é•¿æ–‡æœ¬è¾“å‡ºèƒ½åŠ›å§‹ç»ˆæ¯”è¾ƒ"å…‹åˆ¶"ã€‚å¦‚æœä½ éœ€è¦ç”Ÿæˆé•¿ç¯‡æŠ¥å‘Šã€è¯¦ç»†åˆ†æï¼ŒClaudeç¡®å®æ›´ç»™åŠ›ã€‚</p>
<p>æœ‰æ„æ€çš„æ˜¯ç¬¬äºŒè½®æµ‹è¯•ã€‚æˆ‘è®©å®ƒä»¬å†™ä¸€ç¯‡1000å­—å·¦å³çš„å…¬ä¼—å·æ–‡ç« ä»‹ç»è¿™ä¸ªé¡¹ç›®ã€‚</p>
<p><strong>GPT-5.1ï¼š</strong> å†™äº†1600å¤šå­—ï¼ŒæŠ€æœ¯ç»†èŠ‚å¾ˆè¯¦å®ï¼Œä½†é£æ ¼åç¡¬æ ¸ï¼Œé€‚åˆå¼€å‘è€…çœ‹ <strong>Claude Sonnet 4.5ï¼š</strong> å†™äº†1400å¤šå­—ï¼Œæ›´æ¥è¿‘1000å­—çš„è¦æ±‚ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œå°ç™½ä¹Ÿèƒ½çœ‹æ‡‚</p>
<p>æ‹¿è¿™ä¸¤ç¯‡æ–‡ç« ç»™Gemini 2.5 Proè¯„åˆ¤ï¼Œå®ƒçš„ç»“è®ºæ˜¯ï¼šGPT-5.1å†™çš„æ˜¯æŠ€æœ¯æ–‡æ¡£ï¼ŒClaudeå†™çš„æ˜¯ç§‘æ™®æ–‡ã€‚å„æœ‰åƒç§‹ï¼Œä½†Claudeåœ¨å­—æ•°æ§åˆ¶å’Œå—ä¼—å®šä½ä¸Šæ›´ç²¾å‡†ã€‚</p>
<h3 data-id="heading-3">æ–‡å­¦åˆ›ä½œï¼šå·®è·æ˜æ˜¾</h3>
<p>è¿™ä¸ªæµ‹è¯•è®©æˆ‘æŒºæ„å¤–çš„ã€‚æˆ‘è®©ä¸¤ä¸ªAIæŒ‰ç…§"æœ›æµ·æ½®"è¿™ä¸ªè¯ç‰Œåå†™ä¸€é¦–å®‹è¯ï¼Œä¸»é¢˜æ˜¯"ç§‹å»å†¬æ¥ï¼Œæ…¨å¹æ—¶å…‰æµé€"ï¼Œè¦æ±‚ä¸¥æ ¼éµå¾ªæ ¼å¾‹ã€‚</p>
<p><strong>Claude Sonnet 4.5</strong> 50ç§’å°±å†™å‡ºæ¥äº†ï¼š</p>
<p>"éœœæŸ“å±‚æ—ï¼Œé£å¹è½å¶ï¼Œè¥¿çª—åˆè§ç§‹æ®‹ã€‚ é›é˜µæƒŠå¯’ï¼Œè·æ± å‡‹æ•ï¼Œå‡„å‡„å‡ åº¦å‡­æ ..."</p>
<p>æ„è±¡ç»å…¸ï¼ˆéœœã€é›ã€è·æ± éƒ½æ˜¯å†™ç§‹çš„æ ‡å‡†é…ç½®ï¼‰ï¼Œæƒ…æ„Ÿåˆ°ä½ï¼Œæ ¼å¾‹åŸºæœ¬ç¬¦åˆã€‚è™½ç„¶ä¸‹é˜•æœ‰ä¸€å¥"å†¬ä¸´æ˜¥å»åŒ†å¿™"ä¸å¤ªåˆé€‚ï¼ˆé¢˜ç›®è¦æ±‚çš„æ˜¯ç§‹å†¬ï¼Œä¸æ˜¯å†¬æ˜¥ï¼‰ï¼Œä½†æ•´ä½“å¾ˆæœ‰æ„å¢ƒã€‚</p>
<p><strong>GPT-5.1</strong> æ€è€ƒæ›´ä¹…æ‰ç»™å‡ºç­”æ¡ˆï¼š</p>
<p>"éœœé£æ¸ç´§ï¼Œç–æ—æ¬²å°½ï¼Œæ®‹é˜³åˆå å¤©æ¶¯ã€‚ å¯’é›æ¨ªç©ºï¼ŒèŠ¦èŠ±å¸¦é›ªï¼Œç–é’Ÿè¿œåº¦å¹³æ²™..."</p>
<p>æ ¼å¾‹ä¹Ÿå¯¹ï¼Œä½†é—®é¢˜ä¸å°‘ï¼š</p>
<ul>
<li>ä¸Šé˜•å’Œä¸‹é˜•éƒ½æåˆ°"éœœ"ï¼Œé‡å¤äº†</li>
<li>"æ–°ç¯è¦†ç“¦"è¿™ä¸ªè¯ç”¨å¾—ä¸å¯¹ï¼Œæ–°ç¯æ˜¯æ˜¥å¤©çš„ç«¹ç¬‹ï¼Œå’Œç§‹å†¬ä¸»é¢˜ä¸æ­</li>
<li>"é¬“å½±æ·»å"å’Œåé¢åˆé‡å¤æ"é¬“å½±æ·»éœœå"</li>
<li>æ•´ä½“è¯»èµ·æ¥æ¯”è¾ƒç”Ÿç¡¬</li>
</ul>
<p>è€å®è¯´ï¼Œåœ¨å¤è¯—è¯è¿™ç§éœ€è¦æ„å¢ƒå’Œæ–‡é‡‡çš„ä»»åŠ¡ä¸Šï¼ŒGPT-5.1æ˜æ˜¾ä¸å¦‚Claudeã€‚</p>
<h3 data-id="heading-4">å‰ç«¯å¼€å‘ï¼šå„æœ‰è¾“èµ¢</h3>
<p>æµ‹è¯•äº†å‡ ä¸ªå‰ç«¯ä»»åŠ¡ï¼š</p>
<p><strong>SVGåŠ¨ç”»ï¼š</strong> è®©å®ƒä»¬ç”¨SVGç”»ä¸€åªçŒ«å’Œä¸€åªç‹—åœ¨è‰åœ°ä¸Šèµ°è·¯ï¼Œå¤©ç©ºæœ‰äº‘å’Œé£é¸Ÿã€‚</p>
<ul>
<li>GPT-5.1ï¼šç”»å‡ºæ¥çš„åˆ†ä¸æ¸…æ˜¯çŒ«è¿˜æ˜¯ç‹—ï¼Œæ¯”è¾ƒæŠ½è±¡</li>
<li>Claude Sonnet 4.5ï¼šçŒ«ç‹—èƒ½è®¤å‡ºæ¥ï¼Œé¸Ÿç”»å¾—ä¹Ÿæ›´åƒæ ·</li>
</ul>
<p><strong>UIè®¾è®¡ï¼š</strong> è®©å®ƒä»¬åšä¸€ä¸ªèœ‚ç®±ç®¡ç†ä»ªè¡¨ç›˜ã€‚</p>
<ul>
<li>Claudeçš„é…è‰²ã€å¸ƒå±€ã€å­—ä½“éƒ½å¾ˆç²¾è‡´</li>
<li>GPT-5.1ç”¨äº†æ·±é»‘é…è‰²ï¼Œæ•´ä½“æ•ˆæœå·®ä¸€æˆª</li>
</ul>
<p><strong>é¡µé¢è¿˜åŸï¼š</strong> ç»™ä¸€å¼ æˆªå›¾è®©å®ƒä»¬è¿˜åŸã€‚</p>
<ul>
<li>ä¸¤ä¸ªéƒ½è¿˜åŸå¾—ä¸é”™</li>
<li>Claudeçš„é…è‰²æ›´æ¥è¿‘åŸå›¾</li>
<li>GPT-5.1çš„èƒŒæ™¯è‰²åå·®æ¯”è¾ƒå¤§</li>
</ul>
<p><strong>3Då¼€å‘ï¼š</strong> è®©å®ƒä»¬ç”¨Three.jså¼€å‘é­”æ–¹æ¸¸æˆã€‚è¿™ä¸ªéš¾åº¦å¤§ï¼Œæ¶‰åŠ3Då›¾å½¢ã€WebGLã€æ—‹è½¬ç®—æ³•ã€äº¤äº’é€»è¾‘ç­‰å¤šä¸ªæŠ€æœ¯ç‚¹ã€‚</p>
<p>ç»“æœä¸¤ä¸ªéƒ½ç¿»è½¦äº†ï¼š</p>
<ul>
<li>Claudeåšå‡ºäº†ä¸€ä¸ªé­”æ–¹ï¼Œä½†ç‚¹å‡»"æ‰“ä¹±"æŒ‰é’®æ²¡ååº”ï¼ŒåŠŸèƒ½æ²¡å®ç°</li>
<li>GPT-5.1çš„é¡µé¢ç›´æ¥çœ‹ä¸åˆ°é­”æ–¹</li>
</ul>
<p>è¿™ä¸ªæµ‹è¯•è¯´æ˜ï¼ŒçœŸæ­£å¤æ‚çš„3Dåº”ç”¨ï¼Œç›®å‰çš„AIè¿˜æä¸å®šã€‚</p>
<h3 data-id="heading-5">PythonåŠ¨ç”»ï¼šæ——é¼“ç›¸å½“</h3>
<p>æœ€åæµ‹è¯•äº†ä¸€ä¸ªæœ‰è¶£çš„ä»»åŠ¡ï¼šç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åºçš„å¯è§†åŒ–åŠ¨ç”»ï¼Œç”»é¢ä¸­æœ‰12åªä¸åŒå¤§å°çš„å°é¸­å­ï¼Œä¸€åªå¤§æ¯é¸­ç”¨å†’æ³¡ç®—æ³•æŠŠå°é¸­å­ä»å°åˆ°å¤§æ’åºã€‚</p>
<p>ä¸¤ä¸ªAIéƒ½å®Œæˆäº†ï¼š</p>
<ul>
<li>Claudeç”»çš„é¸­å­å¤ªå¤§å¤ªå¯†é›†ï¼Œä¸å¤ªå¥½çœ‹æ¸…ç»†èŠ‚ï¼Œä½†æ’åºé€»è¾‘å®Œå…¨æ­£ç¡®</li>
<li>GPT-5.1ç”»çš„é¸­å­ç®€é™‹ä¸€äº›ï¼Œç›¸é‚»é¸­å­å¤§å°åŒºåˆ†ä¸æ˜æ˜¾ï¼Œä½†ä¹Ÿå®ç°äº†åŠŸèƒ½</li>
</ul>
<p>è¿™ä¸ªä»»åŠ¡ä¸Šä¸¤ä¸ªå·®ä¸å¤šï¼Œéƒ½èƒ½å®Œæˆï¼Œåªæ˜¯è§†è§‰æ•ˆæœå„æœ‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">çŸ¥è¯†æ›´æ–°åº¦ï¼šClaudeé¢†å…ˆ</h3>
<p>ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„ç‚¹ï¼šçŸ¥è¯†åº“æˆªæ­¢æ—¥æœŸã€‚</p>
<ul>
<li><strong>GPT-5.1ï¼š</strong> 2024å¹´6æœˆ</li>
<li><strong>Claude Sonnet 4.5ï¼š</strong> 2025å¹´1æœˆ</li>
</ul>
<p>æ•´æ•´å·®äº†7ä¸ªæœˆã€‚å¦‚æœä½ éœ€è¦äº†è§£æœ€æ–°çš„æŠ€æœ¯åŠ¨æ€ã€æ—¶äº‹ä¿¡æ¯ï¼ŒClaudeçš„çŸ¥è¯†æ›´æ–°ã€‚</p>
<h3 data-id="heading-7">æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼šGPT-5.1æœ‰è¿›æ­¥</h3>
<p>åœ¨OpenAIçš„Atlasæµè§ˆå™¨ä¸­æµ‹è¯•äº†è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼šè®¿é—®åšå®¢ï¼Œæå–ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ”¹å†™åå‘å¸ƒåˆ°Xå¹³å°ã€‚</p>
<p>GPT-5.1å®Œæˆè¿™ä¸ªä»»åŠ¡ç”¨äº†1åˆ†05ç§’ï¼Œé€Ÿåº¦æ¯”ä¹‹å‰çš„GPT-5å¿«äº†ä¸å°‘ã€‚è™½ç„¶æœ€åæ²¡æœ‰ç›´æ¥ç‚¹å‡»å‘å¸ƒï¼ˆéœ€è¦äººå·¥å®¡æ ¸ï¼‰ï¼Œä½†æ•´ä¸ªæµç¨‹æ‰§è¡Œå¾—æŒºæµç•…ã€‚</p>
<p>è¿™å¯èƒ½æ˜¯GPT-5.1å°‘æ•°æ˜æ˜¾ä¼˜äºå‰ä»£çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-8">æ€»ç»“ï¼šæœ‰è¿›æ­¥ï¼Œä½†åˆ«æœŸå¾…å¤ªé«˜</h3>
<p>æµ‹è¯•ä¸‹æ¥ï¼Œæˆ‘çš„çœŸå®æ„Ÿå—æ˜¯ï¼š</p>
<p><strong>GPT-5.1çš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æ¯”GPT-5ç¡®å®æœ‰è¿›æ­¥ï¼Œå°¤å…¶åœ¨å‡å°‘èƒ¡ç¼–å’Œæµè§ˆå™¨è‡ªåŠ¨åŒ–æ–¹é¢</li>
<li>ä¸ªæ€§åŒ–å®šåˆ¶åŠŸèƒ½å®ç”¨</li>
<li>æ•°å­¦å’Œç¼–ç¨‹èƒ½åŠ›æœ‰æå‡ï¼ˆè™½ç„¶æ²¡å®æµ‹ï¼Œä½†å®˜æ–¹æ•°æ®åº”è¯¥é è°±ï¼‰</li>
</ul>
<p><strong>GPT-5.1çš„çŸ­æ¿ï¼š</strong></p>
<ul>
<li>é•¿æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›ä¾ç„¶å¼±äºClaude</li>
<li>æ–‡å­¦åˆ›ä½œï¼ˆå¤è¯—è¯ã€æ•£æ–‡ï¼‰æ˜æ˜¾ä¸å¦‚Claude</li>
<li>å‰ç«¯UIè®¾è®¡å®¡ç¾ä¸€èˆ¬</li>
<li>å¤æ‚3Dåº”ç”¨è¿˜æä¸å®š</li>
<li>çŸ¥è¯†åº“æ›´æ–°æ…¢äºClaude</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯å»ºè®®ï¼š</strong></p>
<ul>
<li>éœ€è¦ç”Ÿæˆé•¿æ–‡ã€è¯¦ç»†æŠ¥å‘Š â†’ ç”¨Claude</li>
<li>å†™ä½œéœ€è¦æ–‡é‡‡ã€æ„å¢ƒ â†’ ç”¨Claude</li>
<li>å‰ç«¯UIè®¾è®¡ â†’ ä¼˜å…ˆClaude</li>
<li>æ•°å­¦ã€ç¼–ç¨‹ã€é€»è¾‘æ¨ç† â†’ å¯ä»¥è¯•è¯•GPT-5.1</li>
<li>æµè§ˆå™¨è‡ªåŠ¨åŒ– â†’ GPT-5.1ä¸é”™</li>
<li>æ—¥å¸¸å¯¹è¯ã€å¿«é€ŸæŸ¥è¯¢ â†’ ä¸¤ä¸ªéƒ½è¡Œ</li>
</ul>
<p>OpenAIè¿™æ¬¡çš„æ›´æ–°å¾ˆåŠ¡å®ï¼Œæ²¡å¹ç‰›ï¼Œè€è€å®å®ä¿®bugã€ä¼˜åŒ–ä½“éªŒã€‚ä½†å®¢è§‚è¯´ï¼ŒGPT-5.1å¹¶æ²¡æœ‰æ‹‰å¼€å’Œç«å“çš„å·®è·ï¼Œåœ¨æŸäº›åœºæ™¯ç”šè‡³è¿˜è½åã€‚</p>
<p>AIçš„ç«äº‰ç°åœ¨æ˜¯ç™½çƒ­åŒ–é˜¶æ®µï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æœ‰è‡ªå·±çš„é•¿å¤„å’ŒçŸ­å¤„ã€‚ä½œä¸ºç”¨æˆ·ï¼Œæœ€å¥½çš„ç­–ç•¥æ˜¯æ ¹æ®ä»»åŠ¡é€‰æ¨¡å‹ï¼Œè€Œä¸æ˜¯ç›²ç›®è¿·ä¿¡æŸä¸€ä¸ªã€‚</p>
<p><strong>æˆ‘çš„å»ºè®®ï¼šPlusä¼šå‘˜å¯ä»¥åŒæ—¶è®¢é˜…ChatGPTå’ŒClaudeï¼Œæ ¹æ®ä»»åŠ¡åˆ‡æ¢ä½¿ç”¨ã€‚ä¸“ä¸šç”¨æˆ·å»ºè®®ä¸¤ä¸ªéƒ½è¯•è¯•ï¼Œæ‰¾åˆ°æœ€é€‚åˆè‡ªå·±å·¥ä½œæµçš„é‚£ä¸ªã€‚</strong></p>
<p>ä¸‰ä¸ªæœˆåGPT-5çš„ç¿»è½¦è¿˜å†å†åœ¨ç›®ï¼Œè¿™æ¬¡5.1ç®—æ˜¯ç¨³ä½äº†ï¼Œä½†è¦è¯´æƒŠè‰³ï¼Œè¿˜å·®ç‚¹æ„æ€ã€‚</p>
<p>ä½ ç”¨è¿‡GPT-5.1äº†å—ï¼Ÿå®é™…ä½“éªŒå¦‚ä½•ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æµ‹è¯•ç»“æœã€‚</p>
<hr/>
<p><strong>æµ‹è¯•ç¯å¢ƒè¯´æ˜ï¼š</strong></p>
<ul>
<li>æµ‹è¯•æ—¶é—´ï¼š2025å¹´11æœˆ13æ—¥</li>
<li>GPT-5.1ï¼šThinkingæ¨¡å¼</li>
<li>Claude Sonnet 4.5ï¼šThinkingæ¨¡å¼</li>
<li>æµ‹è¯•é¡¹ç›®ï¼šé•¿æ–‡æœ¬ã€æ–‡å­¦åˆ›ä½œã€å‰ç«¯å¼€å‘ã€PythonåŠ¨ç”»ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–</li>
<li>å®¢è§‚æ€§å£°æ˜ï¼šæœ¬æ–‡åŸºäºå®é™…æµ‹è¯•ç»“æœï¼Œæœªæ”¶å–ä»»ä½•æ¨å¹¿è´¹ç”¨</li>
</ul>
<hr/>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿäº§ç¯å¢ƒSourcemapç­–ç•¥ï¼šä»è‹¹æœäº‹æ•…çœ‹å‰ç«¯æ„å»ºå®‰å…¨æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7571808096937705513</link>    <guid>https://juejin.cn/post/7571808096937705513</guid>    <pubDate>2025-11-13T13:42:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571808096937705513" data-draft-id="7569064516920524834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿäº§ç¯å¢ƒSourcemapç­–ç•¥ï¼šä»è‹¹æœäº‹æ•…çœ‹å‰ç«¯æ„å»ºå®‰å…¨æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-13T13:42:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€å°å’"/> <meta itemprop="url" content="https://juejin.cn/user/1943592286564045"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿäº§ç¯å¢ƒSourcemapç­–ç•¥ï¼šä»è‹¹æœäº‹æ•…çœ‹å‰ç«¯æ„å»ºå®‰å…¨æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592286564045/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€å°å’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:42:25.000Z" title="Thu Nov 13 2025 13:42:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ å¯¹ React æºç è§£ææ„Ÿå…´è¶£ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·- ã€å‰ç«¯å°å’ã€‘</p>
<p>åœ¨æˆ‘çš„åšå®¢ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°ï¼š</p>
<p>ğŸ” å®Œæ•´çš„ React æºç è§£æç”µå­ä¹¦ - ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§å®ç°ï¼Œå…¨é¢è¦†ç›– React 19 çš„æ ¸å¿ƒæœºåˆ¶
ğŸ“– ç³»ç»ŸåŒ–çš„å­¦ä¹ è·¯å¾„ - æŒ‰ç…§ React çš„æ‰§è¡Œæµç¨‹ï¼Œå¾ªåºæ¸è¿›åœ°æ·±å…¥æ¯ä¸ªæ¨¡å—
ğŸ’¡ å®æˆ˜æ¡ˆä¾‹åˆ†æ - ç»“åˆçœŸå®åœºæ™¯ï¼Œç†è§£ React è®¾è®¡æ€æƒ³å’Œæœ€ä½³å®è·µ
ğŸš€ æœ€æ–°æŠ€æœ¯åŠ¨æ€ - æŒç»­æ›´æ–° React æ–°ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e03cb80d7f8846ac92a4e5c569685655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LiA5bCP5Y2S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763646145&amp;x-signature=kY7U4dLC0d9FOiz0zfdCE81ypNQ%3D" alt="wechat.png" loading="lazy"/></p>
<p>å°±åœ¨è¿™ä¸ªæœˆï¼Œ<strong>2025å¹´11æœˆ3æ—¥</strong>ï¼Œè‹¹æœä¸Šçº¿çš„å…¨æ–° <code>apps.apple.com</code> ä¸Šæ¼”äº†ä¸€åœºP0çº§çš„â€œæºç è£¸å¥”â€äº‹æ•…ã€‚ä½¿ç”¨ Svelteå¼€å‘çš„åº”ç”¨ï¼Œç«Ÿç„¶<strong>å¿˜è®°äº†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç§»é™¤ Sourcemap é…ç½®</strong>ã€‚</p>
<p><strong>è¿™æ„å‘³ç€ä»€ä¹ˆï¼</strong></p>
<p>å…¨çƒä»»ä½•ä¸€ä¸ªäººå¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„DevToolsï¼Œ<strong>å°±èƒ½å¤Ÿçœ‹åˆ°å¹¶ä¸”è·å–è‹¹æœæœªç»å‹ç¼©ã€å¸¦æ³¨é‡Šã€ç»“æ„æ¸…æ™°ã€åŠŸèƒ½å®Œå¤‡çš„å‰ç«¯æºç </strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e2d8f831b84edab63f89da60a85acb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LiA5bCP5Y2S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763646145&amp;x-signature=2Av53RYWAt3Pq1D2KD%2Fw75RIwQU%3D" alt="G44vIqfWYAAq6Ab.jpeg" loading="lazy"/></p>
<p>ä¸ºä½•ä¸€ä¸ªç”Ÿäº§ä»£ç ï¼Œä¼šå¦‚æ­¤â€œè£¸å¥”â€ï¼Ÿè€Œè¿™ä¸ªç­”æ¡ˆç›´æŒ‡ä¸€ä¸ªè¢«é”™è¯¯é…ç½®çš„æ–‡ä»¶â€”â€”<code>Sourcemap</code>ã€‚</p>
<p>å°½ç®¡ä½œä¸ºä¸€åä¸šåŠ¡å‰ç«¯ï¼Œåœ¨å„ç§åœºæ‰€è‡ªå˜²ï¼šå‰ç«¯ä¸šåŠ¡ä»£ç æ²¡æœ‰ä»·å€¼ï¼Œè¿œç¦»ä¸šåŠ¡æ ¸å¿ƒã€‚ä½†è¿™ä¸å¹¶ç­‰äºå‰ç«¯ä»£ç å¯ä»¥è£¸å¥”ï¼Œå°†å¯èƒ½å­˜åœ¨çš„å¯†é’¥ã€ä¸šåŠ¡é€»è¾‘ã€åç«¯APIåœ°å€èµ¤è£¸è£¸çš„æ”¾åœ¨å…¬ä¼—é¢å‰ã€‚</p>
<p>æœ¬æ–‡å°†ä»è¿™èµ·æœ€æ–°çš„â€œæ³„ç â€äº‹ä»¶å‡ºå‘ï¼Œæ·±å…¥Sourcemapçš„åº•å±‚åŸç†ï¼Œå½»åº•ææ‡‚è¿™ä¸ª <code>Sourcemap</code>ã€‚</p>
<h3 data-id="heading-0">ä»€ä¹ˆæ˜¯ Sourcemapï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h3>
<p>åœ¨ç°ä»£å‰ç«¯å·¥ä½œæµä¸­ï¼Œæˆ‘ä»¬å†™çš„ <code>src/index.js</code> å¹¶ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œã€‚å®ƒéœ€è¦ç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼š</p>
<ol>
<li><strong>è½¬æ¢ï¼ˆTranspilingï¼‰ï¼š</strong> Babel å°† ES-Next/TS/JSX -&gt; ç›®æ ‡æµè§ˆå™¨æ”¯æŒçš„ ES ç‰ˆæœ¬ã€‚</li>
<li><strong>æ‰“åŒ…ï¼ˆBundlingï¼‰ï¼š</strong> Webpack æˆ– Vite å°†ä¸Šç™¾ä¸ªæ¨¡å—æ–‡ä»¶åˆå¹¶æˆå°‘æ•°å‡ ä¸ªæ–‡ä»¶ã€‚</li>
<li><strong>å‹ç¼©ï¼ˆMinifyingï¼‰ï¼š</strong> Terser æˆ– UglifyJS å°†ä»£ç ä¸­çš„ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Šå…¨éƒ¨åˆ é™¤ï¼Œå¹¶å°†å˜é‡åæ›¿æ¢ä¸º <code>a</code>, <code>b</code>, <code>c</code> ç­‰çŸ­å­—ç¬¦ã€‚</li>
</ol>
<p>é€šè¿‡è¿™æ ·å¤„ç†ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ›´å°çš„æ–‡ä»¶ä½“ç§¯ã€æ›´å°‘çš„HTTPè¯·æ±‚ä»¥åŠç›¸å¯¹ä»£ç å®‰å…¨ï¼ˆæé«˜äº†æºç çš„é˜…è¯»é—¨æ§›ï¼‰</p>
<p><strong>ä½†è¿™å¸¦æ¥äº†å·¨å¤§çš„â€œç—›ç‚¹â€ï¼š</strong></p>
<p>å½“æˆ‘ä»¬çº¿ä¸Šä»£ç å‡ºç°é—®é¢˜æŠ¥é”™æ—¶ï¼Œåœ¨ç›‘æ§å¹³å°æ”¶åˆ°çš„é”™è¯¯å¼‚å¸¸ä¿¡æ¯å¾€å¾€æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">TypeError: <span class="hljs-function">Cannot read properties of <span class="hljs-title">undefined</span> <span class="hljs-params">(reading <span class="hljs-string">'a'</span>)</span>
    at e.t.<span class="hljs-title">a</span> <span class="hljs-params">(app.chunk<span class="hljs-number">.8</span>efda.min.js:<span class="hljs-number">1</span>:<span class="hljs-number">1053</span>)</span>
</span></code></pre>
<p>è¿™ä¸ªä¿¡æ¯æ¯«æ— æ„ä¹‰ã€‚ä½ å®Œå…¨ä¸çŸ¥é“ <code>app.chunk.8efda.min.js</code> æ–‡ä»¶çš„ç¬¬1è¡Œç¬¬1053åˆ—ï¼Œå¯¹åº”çš„æ˜¯æºä»£ç ä¸­å“ªä¸€è¡Œä»£ç ï¼Œå¾€å¾€åªèƒ½å‡­ç›´è§‰+è¿è’™å¸¦çŒœã€‚</p>
<p><strong>Sourcemap å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</strong></p>
<p>å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>.map</code> json æ–‡ä»¶ï¼Œç²¾ç¡®åœ°ç»´æŠ¤ç€â€œæºç â€å’Œâ€œç”Ÿäº§ä»£ç â€œä¹‹é—´çš„æ˜ å°„å…³ç³»</p>
<p>å½“æµè§ˆå™¨ï¼ˆæˆ–Sentryç­‰å¼‚å¸¸ç›‘æ§å¹³å°ï¼‰æ‹¿åˆ°æŠ¥é”™ä¿¡æ¯æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾å¯¹åº”çš„ <code>.map</code> æ–‡ä»¶ï¼Œç„¶åå®šä½åˆ°çœŸæ­£çš„é”™è¯¯ä½ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">TypeError: Cannot <span class="hljs-built_in">read</span> properties of undefined (reading <span class="hljs-string">'user'</span>)
    at fetchUser (src/components/user.ts:58:12)
</code></pre>
<h3 data-id="heading-1">è§£å‰– <code>.map</code> æ–‡ä»¶</h3>
<p>Sourcemap çš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ª JSON æ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®ƒæœ€ç®€å•çš„ç»“æ„ï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">"file"</span>: <span class="hljs-string">"bundle.min.js"</span>,
  <span class="hljs-string">"sourceRoot"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-string">"sources"</span>: [<span class="hljs-string">"src/index.js"</span>, <span class="hljs-string">"src/utils.js"</span>],
  <span class="hljs-string">"names"</span>: [<span class="hljs-string">"add"</span>, <span class="hljs-string">"MAGIC_NUMBER"</span>, <span class="hljs-string">"subtract"</span>],
  <span class="hljs-string">"sourcesContent"</span>: [
    <span class="hljs-string">"import { add } from './utils.js';<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>console.log(add(5, MAGIC_NUMBER));"</span>,
    <span class="hljs-string">"export const MAGIC_NUMBER = 7;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>export const add = (a, b) =&gt; a + b;<span class="hljs-subst">\n</span>export const subtract = (a, b) =&gt; a - b;"</span>
  ],
  <span class="hljs-string">"mappings"</span>: <span class="hljs-string">"AAAA,SAASA,IAAI,QAAQ,cACpB,QAAQC,cAAc,EACrBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC,EAAEC,YAAW,CAAC,CAAC"</span>
}
</code></pre>
<p>æˆ‘ä»¬æ¥é€ä¸ªè§£æè¿™äº›å­—æ®µï¼š</p>
<ul>
<li>
<p><code>version</code>: ç‰ˆæœ¬å·ï¼Œç›®å‰æœ€æ–°ä¸”é€šç”¨çš„æ˜¯ç‰ˆæœ¬3ã€‚</p>
</li>
<li>
<p><code>file</code>: å‹ç¼©åçš„æ–‡ä»¶åï¼ˆå³ <code>bundle.min.js</code> æ˜¯ç”± <code>mappings</code> æ˜ å°„ç”Ÿæˆçš„ï¼‰ã€‚</p>
</li>
<li>
<p><code>sourceRoot</code>: æºç çš„æ ¹ç›®å½•ï¼ˆå¯é€‰ï¼‰ã€‚</p>
</li>
<li>
<p><code>sources</code>: ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æ‰€æœ‰æºç æ–‡ä»¶çš„è·¯å¾„ã€‚</p>
</li>
<li>
<p><code>names</code>: ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æºç ä¸­æ‰€æœ‰è¢«æ··æ·†æ›¿æ¢æ‰çš„å˜é‡åå’Œå±æ€§åã€‚</p>
</li>
<li>
<p><code>sourcesContent</code>: <strong>[é«˜å±å­—æ®µ]</strong> ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æ‰€æœ‰æºç çš„<strong>åŸæ–‡å†…å®¹</strong>ã€‚å¦‚æœè¿™ä¸ªå­—æ®µå­˜åœ¨ï¼Œæ„å‘³ç€ <code>.map</code> æ–‡ä»¶æœ¬èº«å°±åŒ…å«äº†æ‰€æœ‰æºç ï¼Œæ³„éœ²é£é™©æå¤§ï¼</p>
</li>
</ul>
<hr/>
<h4 data-id="heading-2"><code>mappings</code> å­—æ®µ</h4>
<p><code>mappings</code> å­—æ®µæ˜¯ Sourcemap çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯å®ƒæœ€ä¸ºå¤æ‚çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬çœ‹åˆ°çš„ä¸€å †åƒä¹±ç é•¿ä¸²å­—ç¬¦<code>AAAA,SAASA,IAAI...</code> åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è¿™ä¸æ˜¯ä¹±ç ï¼Œè€Œæ˜¯ä¸€ç§è¶…é«˜æ•ˆç‡çš„ç¼–ç â€”â€”<strong>Base64 VLQ (Variable-length quantity)</strong> ï¼Œè¿™å­˜å‚¨äº†æºç å’Œå‹ç¼©ç ä¹‹é—´æ‰€æœ‰ä½ç½®æ˜ å°„å…³ç³»ã€‚</p>
<p>ä¸ºä»€ä¹ˆç”¨å®ƒï¼Ÿ</p>
<p>å¦‚æœç”¨ JSON å­˜å‚¨æ¯ä¸ªä½ç½®çš„æ˜ å°„ [{ genLine: 1, genCol: 5, srcFile: 0, srcLine: 2, srcCol: 10 }, ...]ï¼Œé‚£ä¹ˆè¿™ä¸ª .map æ–‡ä»¶ä¼šæ¯”ä½ çš„ js æ–‡ä»¶æœ¬ä½“è¿˜å¤§å‡ å€ã€‚è€Œ VLQ ç¼–ç å°±æ˜¯ä¸ºäº†æè‡´çš„å‹ç¼©ä½“ç§¯ã€‚</p>
<p><code>mappings</code> å­—ç¬¦ä¸²é€šè¿‡ä¸¤ç§ç¬¦å·æ¥ç»„ç»‡ï¼š</p>
<ul>
<li><strong>åˆ†å· (<code>;</code>)ï¼š</strong> ä»£è¡¨â€œæ¢è¡Œâ€ã€‚æ¯ä¸ªåˆ†å·å¯¹åº”å‹ç¼©åæ–‡ä»¶ï¼ˆ<code>bundle.min.js</code>ï¼‰çš„<strong>ä¸€è¡Œ</strong>ã€‚</li>
<li><strong>é€—å· (<code>,</code>)ï¼š</strong> ä»£è¡¨â€œä½ç½®â€ã€‚åœ¨åŒä¸€è¡Œä¸­ï¼Œç”¨é€—å·åˆ†éš”å¤šä¸ªæ˜ å°„ç‚¹ï¼ˆSegmentsï¼‰ã€‚</li>
</ul>
<p>ä¾‹å¦‚ <code>AAAA,CAAC;CACC</code> çš„æ„æ€æ˜¯ï¼š</p>
<ul>
<li><code>AAAA</code> å’Œ <code>CAAC</code> ä¸¤ä¸ªæ˜ å°„ç‚¹åœ¨å‹ç¼©æ–‡ä»¶çš„ç¬¬1è¡Œã€‚</li>
<li><code>CACC</code> æ˜ å°„ç‚¹åœ¨å‹ç¼©æ–‡ä»¶çš„ç¬¬2è¡Œã€‚</li>
</ul>
<p><strong>Base64 VLQ ç¼–ç </strong></p>
<p><code>AAAA</code> æˆ– <code>CAAC</code> è¿™æ ·çš„æ¯ä¸ªâ€œæ˜ å°„ç‚¹â€ï¼ˆSegmentï¼‰åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼Ÿ</p>
<p>å®ƒé€šå¸¸åŒ…å«4åˆ°5ä¸ªæ•°å­—ï¼š</p>
<ol>
<li>å‹ç¼©åä»£ç çš„<strong>åˆ—å·</strong></li>
<li><code>sources</code> æ•°ç»„ä¸­<strong>æ–‡ä»¶ç´¢å¼•</strong></li>
<li>æºç çš„<strong>è¡Œå·</strong></li>
<li>æºç çš„<strong>åˆ—å·</strong></li>
<li>ï¼ˆå¯é€‰ï¼‰<code>names</code> æ•°ç»„ä¸­çš„<strong>å˜é‡åç´¢å¼•</strong></li>
</ol>
<p>è€Œ Base64 VLQ æ˜¯ä¸€ç§â€œå¯å˜é•¿â€çš„ç¼–ç æ–¹å¼ï¼Œæƒ³è±¡ä¸€ç§ç‰¹æ®Šçš„ç¼–ç ï¼Œç”¨æ¥è¡¨ç¤ºæ•°å­—ã€‚è¡¨ç¤º <code>1</code> åªéœ€è¦1ä¸ªå­—ç¬¦ <code>C</code>ï¼Œè¡¨ç¤º <code>5</code> åªéœ€è¦1ä¸ªå­—ç¬¦ <code>K</code>ï¼Œä½†è¡¨ç¤º <code>1000</code> å¯èƒ½éœ€è¦3ä¸ªå­—ç¬¦ã€‚å®ƒå¯¹â€œå°æ•°å­—â€çš„ç¼–ç æå…¶é«˜æ•ˆã€‚</p>
<p>è¿™æ˜¯ VLQ ç¼–ç èƒ½åšåˆ°æè‡´å‹ç¼©çš„<strong>æœ€å…³é”®</strong>ä¸€ç‚¹ï¼š<strong>å®ƒå­˜å‚¨çš„ä¸æ˜¯ç»å¯¹ä½ç½®ï¼Œè€Œæ˜¯â€œç›¸å¯¹å‰ä¸€ä¸ªä½ç½®çš„åç§»é‡ï¼ˆDeltaï¼‰â€</strong> ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ˜ å°„ç‚¹ <code>AAAA</code> è§£ç åæ˜¯ <code>[0, 0, 0, 0]</code>ï¼ˆä»£è¡¨ï¼šå‹ç¼©å0åˆ—ï¼Œç¬¬0ä¸ªæ–‡ä»¶ï¼Œç¬¬0è¡Œï¼Œç¬¬0åˆ—ï¼‰ã€‚</li>
<li>å‡è®¾ç¬¬äºŒä¸ªæ˜ å°„ç‚¹ <code>CAAC</code> è§£ç åæ˜¯ <code>[0, 0, 1, 0]</code>ã€‚</li>
</ul>
<p>è¿™<strong>ä¸</strong>ä»£è¡¨å®ƒæ˜ å°„åˆ°æºç çš„ <code>(1, 0)</code> ä½ç½®ã€‚å®ƒä»£è¡¨çš„æ˜¯<strong>åç§»é‡</strong>ï¼š</p>
<ul>
<li>å‹ç¼©ååˆ—å·ï¼š<code>0</code> (ç›¸å¯¹ä¸Šä¸€ä¸ªæ˜ å°„ç‚¹ <code>AAAA</code> çš„0åˆ—ï¼Œåç§» <code>+0</code>)</li>
<li>æ–‡ä»¶ç´¢å¼•ï¼š<code>0</code> (ç›¸å¯¹ä¸Šä¸€ä¸ªçš„0ï¼Œåç§» <code>+0</code>)</li>
<li>æºç è¡Œå·ï¼š<code>1</code> (ç›¸å¯¹ä¸Šä¸€ä¸ªçš„0è¡Œï¼Œåç§» <code>+1</code>)</li>
<li>æºç åˆ—å·ï¼š<code>0</code> (ç›¸å¯¹ä¸Šä¸€ä¸ªçš„0åˆ—ï¼Œåç§» <code>+0</code>)</li>
</ul>
<p>æ‰€ä»¥ <code>CAAC</code> çœŸæ­£æ˜ å°„çš„ä½ç½®æ˜¯æºç çš„ <code>(0+1, 0+0)</code>ï¼Œå³ç¬¬1è¡Œç¬¬0åˆ—ã€‚</p>
<p>å› ä¸ºæºç å’Œå‹ç¼©ç åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é¡ºåºçš„ï¼Œæ‰€ä»¥ä¸¤æ¬¡æ˜ å°„ä¹‹é—´çš„â€œåç§»é‡â€é€šå¸¸éƒ½éå¸¸å°ï¼ˆæ¯”å¦‚ <code>+1</code>, <code>+0</code>ï¼‰ï¼Œè¿™äº›å°æ•°å­—ç”¨ VLQ ç¼–ç åï¼Œåªéœ€è¦ä¸€ä¸ªå­—ç¬¦ã€‚è¿™å°±æ˜¯ <code>mappings</code> å­—ç¬¦ä¸²èƒ½å¦‚æ­¤ä¹‹çŸ­çš„ç§˜å¯†ã€‚</p>
<h3 data-id="heading-3">å¦‚ä½•åœ¨ Webpack ä¸ Vite ä¸­ç©è½¬ Sourcemap</h3>
<p>ä¸Šé¢è®²è§£äº†åŸç†ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¿›è¡Œå®æˆ˜ï¼Œåœ¨ä¸šåŠ¡ä¸­æˆ‘ä»¬å¿…é¡»åŒºåˆ† <code>development</code> å’Œ <code>production</code>ã€‚è€Œå…³äºsourcemapçš„åˆ†ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥webapckä¸ºä¾‹å­ã€‚å°½ç®¡webpackæœ‰äºŒåå¤šç§ï¼Œä½†å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p>
<h4 data-id="heading-4">â€œsourcemapâ€</h4>
<p>åœ¨æ¯æ¬¡æ„å»ºä¸­ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹çš„æ–‡ä»¶äº§ç‰©æ ‘</p>
<pre><code class="hljs language-arduino" lang="arduino">dist/
 â”œâ”€ app<span class="hljs-number">.3</span>cf7.js
 â””â”€ app<span class="hljs-number">.3</span>cf7.js.map      
</code></pre>
<p><strong>app.3bf4.jså°¾éƒ¨æ³¨é‡Š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//# sourceMappingURL=app.3cf7.js.map</span>
</code></pre>
<p><strong>.map æ•°æ®æ ·ä¾‹ï¼ˆåªç•™å…³é”®åˆ—ï¼‰</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"app.3cf7.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"webpack://my-app/src/utils/add.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"webpack://my-app/src/pages/Pay.vue"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourcesContent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>      <span class="hljs-comment">// â‘  å®Œæ•´æºç åµŒåœ¨è¿™é‡Œ</span>
    <span class="hljs-string">"export const add = (a, b) =&gt; a + b;"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"&lt;template&gt;...&lt;/template&gt;\n&lt;script&gt;..."</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"names"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"add"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"submit"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,SAASA,IAAG,SAASC,..."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourceRoot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€devtoolså°±èƒ½å¤Ÿçœ‹åˆ°ä»¥ä¸‹çš„æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Sources â–¸ webpack:<span class="hljs-comment">// â–¸ src/pages/Pay.vue</span>
</code></pre>
<p>sourcemapèƒ½å¤Ÿæä¾›åˆ—çº§çš„ç²¾åº¦æ˜ å°„ï¼Œæ˜¯ <strong>Sentryã€Bugsnag è¿˜åŸçœŸå®æºç </strong> çš„æœ€ä½è¦æ±‚ï¼Œä½†æ˜¯å…¶ä½“ç§¯æœ€å¤§ï¼Œå¦‚æœå°† .mapæ–‡ä»¶å‘åˆ°cdnä¸Šï¼Œé‚£å°±GGäº†ã€‚</p>
<h4 data-id="heading-5"><code>hidden-source-map</code></h4>
<p>hidden-source-mapåœ¨åœ¨æ¯æ¬¡æ„å»ºä¸­ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹çš„æ–‡ä»¶äº§ç‰©æ ‘,è€Œmapå†…å®¹ä¹Ÿå’Œsoucemapçš„å®Œå…¨ä¸€è‡´ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">dist/
 â”œâ”€ app<span class="hljs-number">.3</span>cf7.js            <span class="hljs-comment">// **æ²¡æœ‰** sourceMappingURL æ³¨é‡Š</span>
 â””â”€ app<span class="hljs-number">.3</span>cf7.js.map        <span class="hljs-comment">// æ–‡ä»¶ç…§æ ·ç”Ÿæˆï¼Œåªæ˜¯æµè§ˆå™¨ä¸çŸ¥é“</span>
</code></pre>
<p>å…¶åœ¨æµè§ˆå™¨ä¸­æŠ¥é”™å †æ ˆåœç•™åœ¨å‹ç¼©ç ä½ç½®ï¼Œè€Œç”¨æˆ·ä¹Ÿåœ¨Sourcesé¢æ¿çœ‹ä¸åˆ° webpack://æ ‘ï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨â€œæ‰¾ä¸åˆ°â€è¿™ä¸ª .map æ–‡ä»¶ï¼Œç”¨æˆ·æ— æ³•ç”¨å®ƒæ¥åè§£æºç ã€‚</p>
<pre><code class="hljs language-java" lang="java">at <span class="hljs-title function_">e</span> <span class="hljs-params">(app.3cf7.js:<span class="hljs-number">1</span>:<span class="hljs-number">1340</span>)</span>
</code></pre>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¾€å¾€é€šè¿‡ciå·¥å…·æŠŠ <code>.map</code> ç§æœ‰ä¸Šä¼ åˆ° Sentryï¼Œè¿™æ ·ä¸å­˜åœ¨æ³„æ¼æºç çš„é£é™©ï¼Œç›‘æ§åˆèƒ½å¤Ÿæä¾›å®Œæ•´çš„é”™è¯¯è·¯å¾„ã€‚</p>
<h4 data-id="heading-6"><code>cheap-module-source-map</code></h4>
<p>åœ¨æ¯æ¬¡æ„å»ºä¸­ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹çš„æ–‡ä»¶äº§ç‰©æ ‘</p>
<pre><code class="hljs language-arduino" lang="arduino">dist/
 â”œâ”€ app<span class="hljs-number">.3</span>cf7.js
 â””â”€ app<span class="hljs-number">.3</span>cf7.js.map
</code></pre>
<p>å¯¹äºmapæ–‡ä»¶ä¸­ï¼Œå…¶ä¸ä¼šå­˜åœ¨åˆ—æ¶ˆæ¯</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,CAAC,CAAC,CAAC..."</span>  <span class="hljs-comment">// åªè®°å½•ã€Œè¡Œâ†’è¡Œã€æ˜ å°„</span>
**æ²¡æœ‰åˆ—ä¿¡æ¯**                       <span class="hljs-comment">// VLQ ç¬¬ 1ã€4 æ®µæ°¸è¿œä¸º 0</span>
</code></pre>
<p>æ‰€ä»¥å½“ä¸šåŠ¡æŠ¥é”™æ—¶ï¼ŒDevToolsåªèƒ½æ–­åˆ° <strong>ç¬¬ 58 è¡Œ</strong>ï¼Œæ— æ³•æ–­åˆ° <strong>ç¬¬ 58 è¡Œç¬¬ 12 åˆ—</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java">at <span class="hljs-title function_">submitOrder</span> <span class="hljs-params">(Pay.vue:<span class="hljs-number">58</span>)</span>   <span class="hljs-comment">// çœ‹ä¸åˆ° :58:12</span>
</code></pre>
<p>è¿™ç§ç±»å‹çš„sourcemapåœ¨<strong>å¼€å‘ç¯å¢ƒ</strong>å¤Ÿç”¨ä¸” rebuildå¿«ï¼Œå¦‚æœåœ¨<strong>æµ‹è¯•ç¯å¢ƒ</strong>æƒ³çœç£ç›˜ / åŠ é€Ÿ CI ä¹Ÿå¯é€‰å®ƒã€‚</p>
<h4 data-id="heading-7"><code>eval-cheap-module-source-map</code>ã€€</h4>
<p>åœ¨æ¯æ¬¡æ„å»ºä¸­ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹çš„æ–‡ä»¶äº§ç‰©</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-operator">**</span>æ²¡æœ‰ .map æ–‡ä»¶<span class="hljs-operator">**</span>
æ‰€æœ‰ä»£ç åŒ…è£¹æˆï¼š
eval(
  <span class="hljs-string">"////# sourceURL=webpack://my-app/src/pages/Pay.vue?3f20<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
  <span class="hljs-string">"export default {<span class="hljs-subst">\n</span>  name: <span class="hljs-subst">\"</span>Pay<span class="hljs-subst">\"</span><span class="hljs-subst">\n</span>}"</span>
)
</code></pre>
<p>åœ¨<strong>æµè§ˆå™¨ Sources</strong>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŒå‡»ç‚¹å‡»æºç ï¼Œä½†æ˜¯åªèƒ½æ–­è¡Œã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">â–¸ <span class="hljs-symbol">webpack:</span>/<span class="hljs-regexp">/ â–¸ src/pages</span><span class="hljs-regexp">/Pay.vue?3f20   /</span><span class="hljs-regexp">/ è™šæ‹Ÿæ–‡ä»¶
</span></code></pre>
<p><code>eval-cheap-module-source-map</code>èƒ½å¤Ÿåšåˆ° <strong>æœ¬åœ° HMR</strong> ç§’çº§é‡ç¼–ï¼ˆç£ç›˜ 0 å†™å…¥ï¼‰ï¼Œä½†æ˜¯å…¶æœ€å¥½åœ¨ç”Ÿäº§ç¦ï¼Œå› ä¸ºCSPç­–ç•¥å¯èƒ½ block <code>eval</code>ï¼ŒåŒæ—¶æ— å®ä½“æ–‡ä»¶æ— æ³•æ”¶é›†åˆ°ç›‘æ§å¹³å°ã€‚</p>
<hr/>
<h4 data-id="heading-8">inline-source-map</h4>
<p>åœ¨æ¯æ¬¡æ„å»ºä¸­ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹çš„æ–‡ä»¶äº§ç‰©</p>
<pre><code class="hljs language-arduino" lang="arduino">dist/
 â””â”€ app<span class="hljs-number">.3</span>cf7.js   <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªæ–‡ä»¶</span>
</code></pre>
<p>åœ¨app.3cf7.jsçš„<strong>å°¾éƒ¨è¿½åŠ </strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjoz...</span>
</code></pre>
<p>äº‹å®ä¸Šï¼Œå…¶æ•´ä¸ª <code>.map</code> JSONï¼ˆå« sourcesContentï¼‰è¢« <strong>base64 å†…è”</strong> ç›´æ¥å¯¼è‡´jsæ–‡ä»¶ä½“ç§¯æš´å¢30-50%ã€‚</p>
<p>æ‰€ä»¥å…¶åº”ç”¨åœºæ™¯æ¯”è¾ƒå±€é™ï¼šå¾€å¾€å†™æ–‡ä»¶åº“æ¯”å¦‚loadshæ—¶ï¼Œä¸€ä¸ªæ–‡ä»¶èµ°å¤©ä¸‹ï¼Œè€Œå¤šå…¥å£ä¸šåŠ¡é¡¹ç›®<strong>åƒä¸‡åˆ«ç”¨</strong>ï¼Œæ¯ä¸ª chunk éƒ½ä¼šç”Ÿæˆä¸€ä»½å†…è”mapæ–‡ä»¶ï¼Œä½“ç§¯ç›´æ¥çˆ†ç‚¸ã€‚</p>
<h4 data-id="heading-9"><code>nosources-source-map</code></h4>
<p><strong>äº§ç‰©ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/Pay.vue"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourcesContent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// â‘  å…³é”®ï¼šåªæœ‰è·¯å¾„ï¼Œæ²¡æœ‰å†…å®¹</span>
  <span class="hljs-attr">"names"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"submit"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,SAASA..."</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>DevTools æ•ˆæœ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">Sources â–¸ webpack:<span class="hljs-comment">// â–¸ src/Pay.vue     // æ ‘åœ¨ï¼Œæ–‡ä»¶èƒ½ç‚¹å¼€</span>
**å†…å®¹æ˜¯ç©ºç™½çš„** â€”â€” æç¤º â€œSource content is <span class="hljs-keyword">not</span> availableâ€
</code></pre>
<p>è¿™ä¸ªå‡ ä¹æ˜¯å®˜æ–¹UI æ¡†æ¶ï¼ˆvue.global.prod.jsã€react.production.min.jsï¼‰<strong>æ ‡é…</strong>ï¼Œç”¨æˆ·å¯çœ‹åˆ°ã€Œç›®å½•ç»“æ„ã€æ–¹ä¾¿è°ƒè¯•ï¼Œ<strong>å´çœ‹ä¸åˆ°å…·ä½“å®ç°</strong>ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦æŠŠåŒ…å‘åˆ°CDNï¼Œå¸Œæœ› Sentry ä»èƒ½è¿˜åŸåˆ—å·ï¼Œé‚£ä¹ˆä½¿ç”¨è¿™ä¸ªå°±è¡Œå³å¯ã€‚</p>
<hr/>
<p>####. <code>eval</code>
<strong>äº§ç‰©</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">eval</span>(<span class="hljs-string">"function add(a,b){return a+b}\n//# sourceURL=webpack:///./src/add.js"</span>)
</code></pre>
<p>å½“ä¸šåŠ¡æŠ¥é”™æ—¶ï¼ŒæŠ¥é”™æ ˆåªèƒ½çœ‹åˆ° <strong>å‹ç¼©åå˜é‡å</strong>ã€‚è€Œè¿™ä¸ªèƒ½æä¾›æœ€å¿« rebuildï¼Œåœ¨<strong>è¶…å¤§å‹ monorepo</strong> æœ¬åœ°å¼€å‘é˜¶æ®µå›¾ä¸ªæè‡´ rebuild é€Ÿåº¦ï¼Œå¾€å¾€ä¼šé€‰å®ƒï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå…¶éƒ½æ— æ³•æ»¡è¶³æ¡ä»¶ã€‚</p>
<h3 data-id="heading-10">ç”Ÿäº§ç¯å¢ƒçš„å®‰å…¨ä¸æœ€ä½³å®è·µ</h3>
<p>ç°åœ¨æˆ‘ä»¬å›åˆ°å¼€å¤´è‹¹æœï¼ˆ2025å¹´11æœˆï¼‰çš„â€œæ³„å¯†â€äº‹ä»¶ã€‚ä»–ä»¬çŠ¯äº†ä»€ä¹ˆé”™ï¼Ÿ</p>
<p>ä»–ä»¬å¾ˆå¯èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒé…ç½®äº† <code>build.sourcemap: true</code> (å¦‚æœæ˜¯Vite/Rollup) æˆ– <code>devtool: 'source-map'</code> (å¦‚æœæ˜¯Webpack)ï¼Œå¹¶ä¸”<strong>å¿˜è®°äº†ç§»é™¤ <code>sourceMappingURL</code> æ³¨é‡Š</strong>ï¼ŒåŒæ—¶<strong>å°†ç”Ÿæˆçš„ <code>.map</code> æ–‡ä»¶å’Œ <code>.js</code> æ–‡ä»¶ä¸€èµ·éƒ¨ç½²åˆ°äº†å…¬ç½‘æœåŠ¡å™¨ä¸Š</strong>ï¼Œ<strong>ä¹Ÿå¿˜è®°äº†ç”¨ Nginx æ‹¦æˆª</strong>ã€‚</p>
<p>çœ‹ä¸Šå»ï¼Œä»–ä»¬å‡ ä¹è¸©äº†æˆ‘ä»¬èƒ½æƒ³åˆ°çš„æ¯ä¸€ä¸ªâ€œé›·â€ï¼Œå¦‚æœä¸­é—´ä»»ä½•ä¸€ä¸ªç¯èŠ‚ç¨å¾®ä¸¥è°¨ç‚¹ï¼Œéƒ½ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è¿™å°±æ˜¯æœ€ä¸¥é‡çš„å®‰å…¨çº¢çº¿ï¼š<strong>ç»å¯¹ä¸è¦å°† <code>.map</code> æ–‡ä»¶éƒ¨ç½²åˆ°å…¬ç½‘ç”¨æˆ·å¯ä»¥è®¿é—®åˆ°çš„åœ°æ–¹ï¼</strong></p>
<blockquote>
<p>â€œä½†æ˜¯ï¼Œæˆ‘ç™½å±äº†å°±æ˜¯éœ€è¦å®šä½é—®é¢˜ï¼Œæ€ä¹ˆåŠï¼â€</p>
</blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±è¦<strong>ç”¨æˆ·æ— æ³•è®¿é—® Sourcemapï¼Œä½†æˆ‘ä»¬è‡ªå·±å¯ä»¥ã€‚</strong></p>
<p>åœ¨ CI/CD æµç¨‹ä¸­ï¼Œä½¿ç”¨ hidden-source-map (Webpack) æˆ– build.sourcemap: true + ç§»é™¤æ’ä»¶ (Vite) æ¥æ„å»ºã€‚è¿™ä¼šç”Ÿæˆ .map æ–‡ä»¶ï¼Œä½†æµè§ˆå™¨ä¸ä¼šåŠ è½½å®ƒã€‚</p>
<p>åŒæ—¶ä¸è¦å°† .map æ–‡ä»¶éƒ¨ç½²åˆ°ä½ çš„CDNæˆ–WebæœåŠ¡å™¨ã€‚è€Œæ˜¯å°†è¿™äº› .map æ–‡ä»¶ä¸Šä¼ åˆ°ç§æœ‰çš„é”™è¯¯ç›‘æ§å¹³å°ï¼Œä¾‹å¦‚ Sentryã€FrontJS æˆ–è‡ªå»ºçš„å†…ç½‘æœåŠ¡å™¨ã€‚</p>
<p>è€Œå¯¹äº<strong>å¼€æºåº“/ç»„ä»¶åº“</strong> è€Œè¨€ <code>nosources-source-map</code>æ˜¯æœ€ä¼˜é€‰ï¼Œå…¶éƒ¨ç½²ç®€å•ï¼Œåªæš´éœ²ç›®å½•ç»“æ„å’Œå˜é‡åï¼Œä¸æš´éœ²æºç é€»è¾‘ï¼Œæ–¹ä¾¿ä»–äººè°ƒè¯•ã€‚</p>
<p>è¿™ä¸ªæµç¨‹å®Œç¾åœ°å®ç°äº†â€œé±¼å’Œç†ŠæŒå…¼å¾—â€ï¼šåœ¨å¯¹æºç ç»å¯¹å®‰å…¨çš„æŒæ§ä¸‹ï¼Œè¿˜èƒ½æ‹¥æœ‰å®Œæ•´çš„çº¿ä¸Šè°ƒè¯•èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPF/C#ï¼šä½¿ç”¨Microsoft Agent Frameworkæ¡†æ¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å®¡æ‰¹åŠŸèƒ½çš„ç»ˆç«¯Agent]]></title>    <link>https://juejin.cn/post/7572012699628175387</link>    <guid>https://juejin.cn/post/7572012699628175387</guid>    <pubDate>2025-11-13T12:04:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572012699628175387" data-draft-id="7572132100327227442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPF/C#ï¼šä½¿ç”¨Microsoft Agent Frameworkæ¡†æ¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å®¡æ‰¹åŠŸèƒ½çš„ç»ˆç«¯Agent"/> <meta itemprop="keywords" content="C#"/> <meta itemprop="datePublished" content="2025-11-13T12:04:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mingupup"/> <meta itemprop="url" content="https://juejin.cn/user/2298414003918396"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPF/C#ï¼šä½¿ç”¨Microsoft Agent Frameworkæ¡†æ¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å®¡æ‰¹åŠŸèƒ½çš„ç»ˆç«¯Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2298414003918396/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mingupup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:04:50.000Z" title="Thu Nov 13 2025 12:04:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘æ–°å‡ºäº†ä¸€ä¸ªMicrosoft Agent Frameworkæ¡†æ¶ï¼Œæˆ‘æ„Ÿè§‰è¿˜æŒºæœ‰æ„æ€çš„ï¼Œå°±é€šè¿‡å®ƒçš„é‚£ä¸ª<code>Using function tools with human in the loop approvals</code>ä¾‹å­ï¼Œåšäº†ä¸€ä¸ªç»ˆç«¯åŠ©æ‰‹Agentã€‚æˆ‘è§‰å¾—ä½¿ç”¨è¿™ä¸ªä½œä¸ºå­¦ä¹ äººåœ¨ç¯ä¸Šè¿™ä¸ªä¾‹å­è›®åˆé€‚çš„ï¼Œå› ä¸ºå¯¹äºéœ€è¦æ‰§è¡Œæ•æ„Ÿæ“ä½œï¼ˆå¦‚ç³»ç»Ÿå‘½ä»¤ï¼‰çš„åœºæ™¯ï¼Œäººå·¥å®¡æ‰¹æœºåˆ¶æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬æ–‡ä»¥Rouyanä¸ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨Microsoft Agent Frameworkåˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿæ‰§è¡Œç»ˆç«¯å‘½ä»¤å¹¶å…·å¤‡äººå·¥å®¡æ‰¹åŠŸèƒ½çš„WPFåº”ç”¨ã€‚</p>
<p>åœ¨è¯¦ç»†ä»‹ç»ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹å®ƒçš„æ•ˆæœã€‚</p>
<p>1ã€æ¯”å¦‚è·å–å½“å‰æ—¶é—´</p>
<p>ä¼šå…ˆå¼¹å‡ºä¸€ä¸ªäººå·¥å®¡æ‰¹çª—å£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b3770138d9b49a98967ccc9b80c76dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=F%2F3MT3ek%2FuAVwsxjD2czV9M2Oyk%3D" alt="image-20251017213637660" loading="lazy"/></p>
<p>ç„¶åä½ ç‚¹å‡»åŒæ„äº†æ‰ä¼šæ‰§è¡Œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afd53c18c5a24b568bb4e783d49624d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=Xxt%2F8daPwCpAP7%2Fgz4%2B8%2FEdeO5Y%3D" alt="image-20251017213716893" loading="lazy"/></p>
<p>å¦‚æœä½ æ‹’ç»äº†å°±æ˜¯è¿™æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2055b23647745f7a94f91619316c4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=OKzISgXqI4E%2B%2FZvBiesROYm7BqA%3D" alt="image-20251017213755043" loading="lazy"/></p>
<p>å®é™…ä¸Šä½ å¯ä»¥åˆ©ç”¨ç»ˆç«¯åšå¾ˆå¤šäº‹æƒ…ï¼Œæˆ‘å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>
<p>2ã€æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå†™å…¥ä½ å¥½ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c47d29e703346e599c37f9d02b72268~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=OObNqWnQmoRONzYyOz7L%2FZZQcGU%3D" alt="image-20251017214320364" loading="lazy"/></p>
<p>é€‰æ‹©åŒæ„ï¼Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/516d19eac35d4a9e82f723dbf61c9d15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=dz8VY7Barr%2B6kY5RM7e4J26rNL4%3D" alt="image-20251017214407194" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08900a30970048bd8305bf1a32c5069b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=5LxGYBMMfjS6z4%2BErrAxptmHqMM%3D" alt="image-20251017214543527" loading="lazy"/></p>
<p>åœ¨ä»‹ç»å¦‚ä½•å…·ä½“å®ç°ä¹‹å‰ï¼Œå…ˆæ¥ä»‹ç»ä¸€ä¸‹Microsoft Agent Frameworkã€‚</p>
<h2 data-id="heading-1">Microsoft Agent Frameworkä»‹ç»</h2>
<p>GitHubä¸Šçš„ç®€ä»‹æ˜¯ï¼šâ€œä¸€ä¸ªç”¨äºæ„å»ºã€ç¼–æ’å’Œéƒ¨ç½²AIä»£ç†åŠå¤šä»£ç†å·¥ä½œæµç¨‹çš„æ¡†æ¶ï¼Œæ”¯æŒPythonå’Œ.NETã€‚â€</p>
<p>GitHubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fagent-framework" target="_blank" title="https://github.com/microsoft/agent-framework" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8521ff892e474b848f6c624a882986~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=Ei2lnlS7LGYVHcWg%2FdAhiFJ0NpM%3D" alt="image-20251017215713327" loading="lazy"/></p>
<p>Microsoft Agent Framework æ˜¯ä¸€ä¸ªå¼€æºå¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºä¸º .NET å’Œ Python æ„å»º AI ä»£ç†å’Œå¤šä»£ç†å·¥ä½œæµã€‚å®ƒæ•´åˆå¹¶æ‰©å±•äº† Semantic Kernel å’Œ AutoGen é¡¹ç›®çš„æ€æƒ³ï¼Œèåˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œå¹¶æ–°å¢äº†å¤šé¡¹åŠŸèƒ½ã€‚è¯¥æ¡†æ¶ç”±åŒä¸€å›¢é˜Ÿå¼€å‘ï¼Œå°†æˆä¸ºæœªæ¥æ„å»º AI ä»£ç†çš„ç»Ÿä¸€åŸºç¡€ã€‚</p>
<p>Agent Framework æä¾›äº†ä¸¤å¤§ä¸»è¦åŠŸèƒ½ç±»åˆ«ï¼š</p>
<p><span>AI ä»£ç†ï¼šå•ä¸ªä»£ç†åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œè°ƒç”¨å·¥å…·å’Œ MCP æœåŠ¡å™¨æ‰§è¡Œæ“ä½œï¼Œå¹¶ç”Ÿæˆå“åº”ã€‚ä»£ç†æ”¯æŒçš„æ¨¡å‹æä¾›å•†åŒ…æ‹¬ Azure OpenAIã€OpenAI å’Œ Azure AIã€‚</span></p>
<p><span>å·¥ä½œæµï¼šåŸºäºå›¾å½¢çš„å·¥ä½œæµï¼Œç”¨äºè¿æ¥å¤šä¸ªä»£ç†å’ŒåŠŸèƒ½ï¼Œä»¥æ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚å·¥ä½œæµæ”¯æŒåŸºäºç±»å‹çš„è·¯ç”±ã€åµŒå¥—ã€æ£€æŸ¥ç‚¹ä»¥åŠé€‚ç”¨äºäººå·¥å¹²é¢„åœºæ™¯çš„è¯·æ±‚/å“åº”æ¨¡å¼ã€‚</span></p>
<p>è¯¥æ¡†æ¶è¿˜æä¾›äº†åŸºç¡€æ„å»ºæ¨¡å—ï¼ŒåŒ…æ‹¬æ¨¡å‹å®¢æˆ·ç«¯ï¼ˆèŠå¤©è¡¥å…¨å’Œå“åº”ï¼‰ã€ç”¨äºçŠ¶æ€ç®¡ç†çš„ä»£ç†çº¿ç¨‹ã€ç”¨äºä»£ç†è®°å¿†çš„ä¸Šä¸‹æ–‡æä¾›ç¨‹åºã€ç”¨äºæ‹¦æˆªä»£ç†æ“ä½œçš„ä¸­é—´ä»¶ï¼Œä»¥åŠç”¨äºå·¥å…·é›†æˆçš„MCPå®¢æˆ·ç«¯ã€‚è¿™äº›ç»„ä»¶å…±åŒä¸ºæ‚¨æä¾›çµæ´»æ€§å’Œå¼ºå¤§åŠŸèƒ½ï¼Œä»¥æ„å»ºäº¤äº’æ€§å¼ºã€ç¨³å¥ä¸”å®‰å…¨çš„AIåº”ç”¨ç¨‹åºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89fcc75f98fa4ec6abad031d75cda563~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=8Plt1SX%2BGDgjtet2Q8eMHhLcpdU%3D" alt="image-20251017215856749" loading="lazy"/></p>
<h2 data-id="heading-2">å…·ä½“å®ç°</h2>
<p>1ã€å®‰è£…NugetåŒ…ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/143d83bac73e426b841408fbfc5bd51d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=imV6DJQAE6TlQNnMMenP3sNOM2o%3D" alt="image-20251017220544499" loading="lazy"/></p>
<p>2ã€ç¼–å†™è¿è¡Œè„šæœ¬çš„å‡½æ•°</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Description(<span class="hljs-string">"Execute a Windows cmd.exe script and return its output."</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ExecuteCmd</span>(<span class="hljs-params">[Description(<span class="hljs-string">"The script content to run via 'cmd.exe /c'."</span></span>)] <span class="hljs-built_in">string</span> script)</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">var</span> psi = <span class="hljs-keyword">new</span> ProcessStartInfo(<span class="hljs-string">"cmd.exe"</span>, <span class="hljs-string">"/c "</span> + script)
        {
            UseShellExecute = <span class="hljs-literal">false</span>,
            RedirectStandardOutput = <span class="hljs-literal">true</span>,
            RedirectStandardError = <span class="hljs-literal">true</span>,
            CreateNoWindow = <span class="hljs-literal">true</span>
        };

        <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> process = <span class="hljs-keyword">new</span> Process())
        {
            process.StartInfo = psi;
            process.Start();

            <span class="hljs-built_in">string</span> output = process.StandardOutput.ReadToEnd();
            <span class="hljs-built_in">string</span> error = process.StandardError.ReadToEnd();

            process.WaitForExit();

            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(error))
            {
                <span class="hljs-keyword">return</span> <span class="hljs-string">$"é”™è¯¯: <span class="hljs-subst">{error.Trim()}</span>"</span>;
            }

            <span class="hljs-keyword">return</span> output.Trim();
        }
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-string">$"æ‰§è¡Œå¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>;
    }
}
</code></pre>
<p>3ã€é…ç½®AI Agent</p>
<p>æ–‡æ¡£ä¸­åªå†™äº†Azureä¸­æ€ä¹ˆä½¿ç”¨ï¼Œå…¼å®¹OpenAIæ ¼å¼çš„å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// é…ç½®AI Agent</span>
 DotEnv.Load();
 <span class="hljs-keyword">var</span> envVars = DotEnv.Read();

 <span class="hljs-keyword">var</span> apiKey = envVars[<span class="hljs-string">"OPENAI_API_KEY"</span>];
 <span class="hljs-keyword">var</span> model = envVars[<span class="hljs-string">"OPENAI_CHAT_MODEL"</span>];
 <span class="hljs-keyword">var</span> baseUrl = <span class="hljs-keyword">new</span> Uri(envVars[<span class="hljs-string">"OPENAI_BASE_URL"</span>]);

 ApiKeyCredential apiKeyCredential = <span class="hljs-keyword">new</span> ApiKeyCredential(apiKey);

 OpenAIClientOptions openAIClientOptions = <span class="hljs-keyword">new</span> OpenAIClientOptions();
 openAIClientOptions.Endpoint = baseUrl;

 AIAgent agent = <span class="hljs-keyword">new</span> OpenAIClient(apiKeyCredential, openAIClientOptions)
     .GetChatClient(model)
     .CreateAIAgent(instructions: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„åŠ©æ‰‹ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤è¡Œè„šæœ¬ã€‚è¯·ä½¿ç”¨ä¸­æ–‡å›ç­”ã€‚"</span>, tools: [<span class="hljs-keyword">new</span> ApprovalRequiredAIFunction(AIFunctionFactory.Create(ExecuteCmd))]);
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæ–°ä¸œè¥¿å°±æ˜¯<code>ApprovalRequiredAIFunction</code>ã€‚</p>
<p>è¿™è¯´æ˜å¦‚æœè°ƒç”¨è¿™ä¸ªå‡½æ•°éœ€è¦ç»è¿‡äººå·¥å®¡æ‰¹ã€‚</p>
<p>4ã€å®¡æ‰¹æµç¨‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Call the agent and check if there are any user input requests to handle.</span>
AgentThread thread = agent.GetNewThread();

<span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> agent.RunAsync(InputText, thread);
<span class="hljs-keyword">var</span> userInputRequests = response.UserInputRequests.ToList();
</code></pre>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸ªæ˜¯ä»€ä¹ˆï¼Œè¿è¡Œèµ·æ¥æ‰“ä¸ªæ–­ç‚¹çœ‹çœ‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41392255d63f487fb79f26089f363fe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640289&amp;x-signature=FAPDpG5dKI%2F%2FXceaJkehnTzDrL0%3D" alt="image-20251017221907635" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªAgentæƒ³è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œé‚£ä¹ˆç°åœ¨æ¥çœ‹çœ‹å¦‚ä½•å®¡æ‰¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">while</span> (userInputRequests.Count &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-keyword">var</span> userInputResponses = <span class="hljs-keyword">new</span> List&lt;ChatMessage&gt;();

    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> functionApprovalRequest <span class="hljs-keyword">in</span> userInputRequests.OfType&lt;FunctionApprovalRequestContent&gt;())
    {
        <span class="hljs-keyword">var</span> scriptContent = functionApprovalRequest.FunctionCall.Arguments?[<span class="hljs-string">"script"</span>]?.ToString() ?? <span class="hljs-string">"æœªçŸ¥è„šæœ¬"</span>;
        <span class="hljs-keyword">var</span> functionName = functionApprovalRequest.FunctionCall.Name;

        <span class="hljs-keyword">var</span> dialogVm = <span class="hljs-keyword">new</span> HumanApprovalDialogViewModel
        {
            Title = <span class="hljs-string">"å‘½ä»¤æ‰§è¡Œå®¡æ‰¹"</span>,
            Message = <span class="hljs-string">$"æ˜¯å¦åŒæ„æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Ÿ\n\nå‡½æ•°åç§°: <span class="hljs-subst">{functionName}</span>\nè„šæœ¬å†…å®¹: <span class="hljs-subst">{scriptContent}</span>"</span>
        };

        <span class="hljs-built_in">bool</span>? result = _windowManager.ShowDialog(dialogVm);
        <span class="hljs-built_in">bool</span> approved = result == <span class="hljs-literal">true</span>;

        userInputResponses.Add(<span class="hljs-keyword">new</span> ChatMessage(ChatRole.User, [functionApprovalRequest.CreateResponse(approved)]));
    }

    <span class="hljs-comment">// Pass the user input responses back to the agent for further processing.</span>
    response = <span class="hljs-keyword">await</span> agent.RunAsync(userInputResponses, thread);
    userInputRequests = response.UserInputRequests.ToList();
}
</code></pre>
<p>æ ¹æ®è¿™ä¸ªåœ°æ–¹<code>userInputResponses.Add(new ChatMessage(ChatRole.User, [functionApprovalRequest.CreateResponse(approved)]));</code>ä¸­çš„approvedä¼ å…¥çš„æ˜¯trueè¿˜æ˜¯falseè¡¨ç¤ºç”¨æˆ·æ˜¯åŒæ„è¿˜æ˜¯æ‹’ç»ã€‚</p>
<p>ç„¶åå‘é€è¯·æ±‚è·å–æ–°çš„å›å¤ï¼Œç›´åˆ°æ²¡æœ‰éœ€è¦äººå·¥å®¡æ‰¹çš„å‡½æ•°ä¸ºæ­¢ã€‚</p>
<p>5ã€æµå¼å“åº”</p>
<p>æœ€åå†è·å–ä¸€ä¸ªæµå¼å“åº”ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> update <span class="hljs-keyword">in</span> agent.RunStreamingAsync(<span class="hljs-string">"è¾“å‡ºæœ€ç»ˆç­”æ¡ˆ"</span>, thread))
{
    OutputText += update.Text;
}
</code></pre>
<h2 data-id="heading-3">æœ€å</h2>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>å…¨éƒ¨ä»£ç å·²ä¸Šä¼ è‡³GitHubï¼Œåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMing-jiayou%2FRouyan%25E3%2580%2582" target="_blank" title="https://github.com/Ming-jiayou/Rouyan%E3%80%82" ref="nofollow noopener noreferrer">github.com/Ming-jiayouâ€¦</a></p>
<p>ç»ˆç«¯åŠ©æ‰‹çš„ä»£ç ä¸»è¦åœ¨src/Rouyan/Pages/ViewModel/TerminalAgentViewModel.csä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Forresterè°ƒç ”400ä½é«˜çº§å†³ç­–è€…ï¼Œæ­ç¤ºAIåº”ç”¨æœªæ¥]]></title>    <link>https://juejin.cn/post/7572164122235109386</link>    <guid>https://juejin.cn/post/7572164122235109386</guid>    <pubDate>2025-11-13T12:12:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572164122235109386" data-draft-id="7572021695294324786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Forresterè°ƒç ”400ä½é«˜çº§å†³ç­–è€…ï¼Œæ­ç¤ºAIåº”ç”¨æœªæ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-11-13T12:12:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Forresterè°ƒç ”400ä½é«˜çº§å†³ç­–è€…ï¼Œæ­ç¤ºAIåº”ç”¨æœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:12:17.000Z" title="Thu Nov 13 2025 12:12:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ ¹æ®Gartneré¢„æµ‹ï¼Œ2025å¹´å…¨çƒäººå·¥æ™ºèƒ½æ”¯å‡ºé¢„è®¡å°†è¾¾åˆ°6440äº¿ç¾å…ƒï¼Œè¾ƒ2024å¹´å¢é•¿76.4%ã€‚åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œä¼ä¸šå·²å°†AIè§†ä¸ºå…³ä¹ç”Ÿå­˜çš„æˆ˜ç•¥è¦åŠ¡ã€‚ç„¶è€Œï¼Œå®ƒä»¬åœ¨æŠ•èµ„AIæ—¶å…·ä½“å…³æ³¨å“ªäº›æ–¹é¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å†³å®šä¸Forresteråˆä½œå¯»æ‰¾ç­”æ¡ˆã€‚æˆ‘ä»¬å¯¹400åè´Ÿè´£AIå’Œä¼ä¸šäº‘æˆ˜ç•¥çš„é«˜çº§å†³ç­–è€…è¿›è¡Œäº†åŒç›²ç ”ç©¶ã€‚å—è®¿è€…åŒ…æ‹¬æ¥è‡ªç§‘æŠ€ã€é‡‘èæœåŠ¡ã€åª’ä½“ã€é›¶å”®ã€åˆ¶é€ å’ŒåŒ»ç–—ä¿å¥è¡Œä¸šçš„æ€»ç›‘ã€å‰¯æ€»è£å’ŒCçº§é«˜ç®¡ã€‚</p>
<p>æœ¬ç ”ç©¶æ—¨åœ¨æ­ç¤ºä¼ä¸šå¦‚ä½•è§„åˆ’è¿‘æœŸåŠé•¿æœŸçš„AIå·¥ä½œæµç¨‹å’ŒAIå·¥å…·ï¼Œå°¤å…¶å…³æ³¨æœŸæœ›å€¼æœ€é«˜çš„é¢å‘å®¢æˆ·çš„åº”ç”¨ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Flp%2Fforrester-enterprise-ai-report-2025%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251113_external1_blogarticles226" target="_blank" title="https://www.akamai.com/zh/lp/forrester-enterprise-ai-report-2025?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251113_external1_blogarticles226" ref="nofollow noopener noreferrer">ã€Šä¼ä¸šçº§AIç°çŠ¶ï¼šç§¯ç´¯ç»éªŒï¼Œç®¡ç†é£é™©ã€‹</a>ï¼ˆForrester OSNAPæŠ¥å‘Šï¼‰æ­ç¤ºï¼ŒAIå·²æˆä¸ºè·¨è¡Œä¸šã€è·¨åœ°åŒºçš„æˆ˜ç•¥è¦åŠ¡ã€‚</p>
<p>ä¸ºç†è§£è¿™äº›ç»“æœçš„é‡è¦æ€§ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨å…¶é©±åŠ¨å› ç´ ã€å½“å‰é‡‡ç”¨æ¨¡å¼èƒŒåçš„åŸå› ï¼Œä»¥åŠç»„ç»‡å’Œå¼€å‘å›¢é˜Ÿæ¥ä¸‹æ¥è¯¥å¦‚ä½•ä¿æŒè¡Œä¸šé¢†å…ˆåœ°ä½ã€‚</p>
<h4 data-id="heading-0"><strong><strong>AIæ­£å®šä¹‰ç«äº‰æ ¼å±€</strong></strong></h4>
<p>Forresteræ•°æ®æ˜¾ç¤ºï¼Œ76%çš„ä¼ä¸šåº”ç”¨AIè§£å†³æ–¹æ¡ˆå’Œåº”ç”¨æ¥æ”¹å–„å®¢æˆ·ä½“éªŒï¼Œ71%ç”¨ä»¥åŠ å¼ºå®¢æˆ·ç•™å­˜ï¼Œ76%ç”¨ä»¥æå‡è¿è¥æ•ˆç‡ã€‚è¿™äº›æ˜¯æ”¶å…¥å¢é•¿å’Œç«äº‰ä¼˜åŠ¿çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚</p>
<p>æˆåŠŸéƒ¨ç½²AIçš„ç»„ç»‡æ›´èƒ½ï¼š</p>
<ul>
<li>é€šè¿‡å®¢æˆ·ä½“éªŒå®ç°å·®å¼‚åŒ–</li>
<li>è·å–å¹¶ä¿æŠ¤å¸‚åœºä»½é¢</li>
<li>åŠ é€Ÿåˆ›æ–°å‘¨æœŸ</li>
<li>é‡Šæ”¾è¿è¥æ æ†æ•ˆåº”</li>
<li>æ„å»ºæŠµå¾¡é¢ è¦†çš„æœªæ¥éŸ§æ€§</li>
</ul>
<p><strong><strong>é€šè¿‡å®¢æˆ·ä½“éªŒå®ç°å·®å¼‚åŒ–</strong></strong></p>
<p>ä¸ªæ€§åŒ–æœåŠ¡æˆ–æ¨èã€é€šè¿‡è‡ªåŠ¨åŒ–å®ç°æ›´å¿«é€Ÿçš„æœåŠ¡ã€æ™ºèƒ½æœåŠ¡è§£å†³ï¼Œè¿™äº›éƒ½ç›´æ¥æ”¹å–„äº†å®¢æˆ·ä½“éªŒâ€”Forresterå°†å…¶ç¡®å®šä¸ºAIæŠ•èµ„çš„å¤´å·é©±åŠ¨å› ç´ ã€‚åœ¨ç«äº‰æ¿€çƒˆçš„å¸‚åœºä¸­ï¼Œå®¢æˆ·äº’åŠ¨çš„è´¨é‡æ˜¯å†³å®šç”¨æˆ·å¿ è¯šåº¦å’Œç•™å­˜çš„å…³é”®ã€‚</p>
<p><strong><strong>è·å–å¹¶ä¿æŠ¤å¸‚åœºä»½é¢</strong></strong></p>
<p>é€šè¿‡å°†ç”Ÿæˆå¼AIç­‰äººå·¥æ™ºèƒ½èƒ½åŠ›æ·±åº¦èå…¥å®¢æˆ·æ—…ç¨‹ï¼Œä¼ä¸šå¾—ä»¥æ‰“é€ æ›´å…·ç”¨æˆ·ç²˜æ€§ã€ä¸”éš¾ä»¥è¢«ç«äº‰å¯¹æ‰‹å¤åˆ¶çš„ä½“éªŒã€‚è¿™ä¸ä»…æœ‰æ•ˆæå‡äº†å®¢æˆ·å‡€ç•™å­˜ç‡ï¼Œä¹Ÿæ˜¾è‘—å¢åŠ äº†ç”¨æˆ·çš„è½¬æ¢æˆæœ¬ã€‚</p>
<p><strong><strong>åŠ é€Ÿåˆ›æ–°å‘¨æœŸ</strong></strong></p>
<p>ä½¿ç”¨AIçš„ä¼ä¸šèƒ½å¤Ÿæ›´å¿«åœ°æ¨å‡ºæ–°äº§å“å’ŒæœåŠ¡ï¼Œå°¤å…¶æ˜¯åœ¨æ•´åˆäº†ç¨‹åºåŒ–å†…å®¹ç”Ÿæˆã€è§†è§‰æœç´¢ä¸é¢„æµ‹åˆ†æç­‰é«˜çº§èƒ½åŠ›åã€‚åœ¨é‚£äº›ä¸Šå¸‚é€Ÿåº¦ä¸å¸‚åœºä»½é¢å¢é•¿ç´§å¯†ç›¸å…³çš„è¡Œä¸šä¸­ï¼Œè¿™æ„æˆäº†ä¸€ä¸ªå†³å®šæ€§ä¼˜åŠ¿ã€‚</p>
<p><strong><strong>é‡Šæ”¾è¿è¥æ æ†</strong></strong></p>
<p>AIé©±åŠ¨æ•ˆç‡æå‡ï¼Œæ— è®ºæ˜¯é€šè¿‡æµç¨‹è‡ªåŠ¨åŒ–è¿˜æ˜¯å‘˜å·¥èƒ½åŠ›å¢å¼ºï¼Œéƒ½å°†ç›´æ¥è½¬åŒ–ä¸ºæˆæœ¬é™ä½ã€æ‰©å±•åŠ é€Ÿï¼Œä»¥åŠæ›´é«˜ä»·å€¼å·¥ä½œçš„èšç„¦ã€‚</p>
<p><strong><strong>æ„å»ºæŠ—é¢ è¦†éŸ§æ€§</strong></strong></p>
<p>æ­£å¦‚Forresteræ‰€æŒ‡ï¼Œä¼ä¸šè¯„ä¼°AIæˆåŠŸä¸ä»…çœ‹æ•ˆç‡ï¼Œæ›´å…³æ³¨å…¶å¯¹é•¿æœŸæ”¶å…¥ä¸å®¢æˆ·ç»ˆèº«ä»·å€¼çš„å½±å“ã€‚è¡ŒåŠ¨è¿Ÿç¼“è€…ï¼Œæå°†è¢«å·²å°†AIæ·±åº¦èå…¥æ ¸å¿ƒèƒ½åŠ›çš„å¯¹æ‰‹æ‰€è¶…è¶Šã€‚</p>
<p>ä»å¼€å‘è€…è§†è§’çœ‹ï¼Œè¿™ä¸€è½¬å˜æ„å‘³ç€AIå·²åµŒå…¥å…³é”®ä¸šåŠ¡è·¯å¾„ã€‚æ”¯æ’‘AIçš„ä»£ç ç›´æ¥ç‰µåŠ¨å®¢æˆ·ç»ˆèº«ä»·å€¼ä¸å‡€ç•™å­˜ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼Œä½¿å¯é æ€§ã€å¯æ‰©å±•æ€§ä¸ä¼¦ç†è€ƒé‡ï¼Œæˆä¸ºAIè®¾è®¡çš„é‡ä¸­ä¹‹é‡ã€‚</p>
<h4 data-id="heading-1"><strong><strong>å·²éªŒè¯çš„ç”¨ä¾‹ä¸ä¸‹ä¸€æ³¢åˆ›æ–°æµªæ½®</strong></strong></h4>
<p>Forresterå¼ºè°ƒï¼Œé‡‡ç”¨æœ€å¹¿æ³›çš„AIç”¨ä¾‹æ˜¯é‚£äº›ç›´æ¥å½±å“å®¢æˆ·è§¦ç‚¹çš„é¢†åŸŸï¼šä¸ªæ€§åŒ–ï¼ˆ53%ï¼‰ã€è‡ªåŠ¨åŒ–å®¢æˆ·æœåŠ¡è§£å†³ï¼ˆ53%ï¼‰å’Œå›ç­”å®¢æˆ·é—®é¢˜ï¼ˆ52%ï¼‰ã€‚è¿™äº›ç”¨ä¾‹å ä¸»å¯¼åœ°ä½ï¼Œæ˜¯å› ä¸ºå®ƒä»¬èƒ½å¸¦æ¥å¯è¡¡é‡çš„çŸ­æœŸæˆæœã€‚</p>
<p>ä¸æŠ•èµ„å›æŠ¥ä¸æ˜ç¡®çš„æŠ½è±¡AIè®¡åˆ’ç›¸æ¯”ï¼Œèƒ½å¤Ÿæå‡è½¬åŒ–ç‡çš„æ¨èå¼•æ“æˆ–å‡å°‘å®¢æˆ·æµå¤±çš„èŠå¤©æœºå™¨äººï¼Œæ›´å®¹æ˜“è·å¾—é¢†å¯¼å±‚çš„æ”¯æŒã€‚å¯¹äºä¼ä¸šåŠå…¶å¼€å‘å›¢é˜Ÿè€Œè¨€ï¼Œè¿™ç§ä¾§é‡è½¬åŒ–ä¸ºå¯¹èƒ½å¤Ÿæ‰©å±•ã€å¤„ç†å®æ—¶æ•°æ®å¹¶æœ€å¤§é™åº¦å‡å°‘å®¢æˆ·äº’åŠ¨å»¶è¿Ÿçš„ç³»ç»Ÿçš„æŒç»­éœ€æ±‚ã€‚</p>
<p><strong><strong>æŠ€æœ¯é€‰æ‹©å°†å†³å®šAIç«èµ›çš„èµ¢å®¶ä¸è¾“å®¶</strong></strong></p>
<p>ä¼ä¸šæ­£çº·çº·åŠ å…¥è¿™æ³¢å¼ºå¤§çš„AIæµªæ½®ï¼Œä½†åŠ›æ±‚é¿å…"ç¿»èˆ¹"ã€‚å…³äºAIé™·é˜±å’Œå¤±è´¥çš„æŠ¥é“å±¡è§ä¸é²œï¼Œå› æ­¤éœ€è¦æ·±æ€ç†Ÿè™‘å’Œå®¡æ…çš„æ–¹æ³•æ‰èƒ½æˆä¸ºæˆåŠŸæ¡ˆä¾‹ä¹‹ä¸€ã€‚</p>
<p>é€šå¸¸ï¼Œé€‰æ‹©ä»å·²ç¡®å®šçš„ç”¨ä¾‹ï¼ˆå¦‚AIèŠå¤©æœºå™¨äººï¼‰å…¥æ‰‹ä»¥å¿«é€Ÿè§æ•ˆï¼Œæœ‰åŠ©äºå»ºç«‹å¯¹å…¶AIæˆ˜ç•¥çš„ä¿¡å¿ƒå¹¶æå‡AIåº”ç”¨ç†Ÿç»ƒåº¦ã€‚</p>
<p>åè¿‡æ¥ï¼Œè¿™ç§ä¿¡å¿ƒä¸ºå¼€å±•æ›´å¤æ‚æˆ–æ›´è´´åˆå…¶ä¸šåŠ¡éœ€æ±‚çš„ç»†åˆ†AIå®æ–½æ‰“å¼€äº†å¤§é—¨ã€‚è¿™äº›åº”ç”¨å¾€å¾€å› è¡Œä¸šè€Œå¼‚ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>é›¶å”®å’Œæ—…æ¸¸ä¸šä¸“æ³¨äºä¸ªæ€§åŒ–å’Œè§†è§‰æœç´¢ä»¥æå‡å®¢æˆ·ä½“éªŒã€‚</li>
<li>é‡‘èæœåŠ¡æ›´çœ‹é‡è‡ªåŠ¨åŒ–å’Œæ¬ºè¯ˆæ£€æµ‹ã€‚</li>
<li>åŒ»ç–—ä¿å¥å’Œç”Ÿå‘½ç§‘å­¦é¢†åŸŸé‡‡ç”¨AIæ›´ä¸ºè°¨æ…ï¼Œåœ¨åˆ›æ–°ä¸åˆè§„åŠé£é™©ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</li>
</ul>
<p>é™¤äº†è¿™äº›å·²ç¡®å®šçš„ç”¨ä¾‹ï¼Œå®éªŒæ€§æ¢ç´¢æ­£åœ¨å¢åŠ ã€‚è¿‘åŠæ•°ï¼ˆ46%ï¼‰çš„ç»„ç»‡æ­£åœ¨è¯•ç‚¹ç¨‹åºåŒ–å†…å®¹åˆ›å»ºï¼Œ40%åœ¨æµ‹è¯•è§†è§‰æœç´¢ï¼Œè€Œ37%åœ¨æ¢ç´¢é¢éƒ¨è¯†åˆ«ã€‚</p>
<p>è¿™äº›å®éªŒæ€§ç ”å‘å¾ˆé‡è¦ï¼Œå› ä¸ºä»Šå¤©çš„"å‰¯ä¸šé¡¹ç›®"å¯èƒ½æˆä¸ºæ˜å¤©çš„ç«äº‰åŸºå‡†ã€‚å›æƒ³ä¸€ä¸‹é…’åº—ä¸šçš„ç§»åŠ¨å…¥ä½æ˜¯å¦‚ä½•ä»æ–°å¥‡äº‹ç‰©è½¬å˜ä¸ºå¿…éœ€æœåŠ¡çš„ã€‚é¼“åŠ±å¼€å‘å›¢é˜Ÿè¯•ç‚¹æ–°å…´æŠ€æœ¯çš„ä¼ä¸šæ›´æœ‰å¯èƒ½ä¸ºAIé©±åŠ¨å·¥å…·å’Œè§£å†³æ–¹æ¡ˆçš„çˆ†å‘å¼å¢é•¿åšå¥½å‡†å¤‡ã€‚</p>
<h4 data-id="heading-2"><strong><strong>é£é™©ã€å®‰å…¨ä¸å£°èª‰ï¼šAIçš„éšæ€§æˆæœ¬</strong></strong></h4>
<p>è¯¥ç ”ç©¶ä¹Ÿæ­ç¤ºäº†å¤šé¡¹å‘äººæ·±çœçš„ç°çŠ¶ã€‚æ€»å…±63%çš„å—è®¿è€…å°†å®‰å…¨æ‹…å¿§åˆ—ä¸ºé¦–è¦éšœç¢ï¼Œ55%æ‹…å¿ƒåˆè§„é—®é¢˜ï¼Œè¿‘åŠæ•°ï¼ˆ45%ï¼‰æ‹…å¿ƒè‹¥AIæœªèƒ½è¾¾åˆ°é¢„æœŸä¼šæŸå®³å£°èª‰ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œè¿™äº›æ•°å­—å¼ºè°ƒäº†å¯¹äºä»¥ä¸‹æ²»ç†æ¡†æ¶çš„éœ€æ±‚ï¼š</p>
<ul>
<li>ä¿æŠ¤æ•°æ®ç®¡é“ä»¥é˜²æ³„æ¼</li>
<li>æ¨¡å‹ç›‘æ§ä»¥æ£€æµ‹æ¼‚ç§»æˆ–åå·®</li>
<li>æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçš„æµ‹è¯•åè®®</li>
</ul>
<p>ä½†é™ä½è¿™äº›é£é™©ä¸ä»…ä»…éœ€è¦æŠ€æœ¯ä¿éšœæªæ–½ã€‚</p>
<p>ä¼ä¸šå¯ä»¥ä»å…¨å±€æ€§çš„é£é™©ç®¡ç†æ€ç»´ä¸­å—ç›Šã€‚å®‰å…¨ä¸ä»…éœ€è¦å¼ºåŒ–çš„åŸºç¡€è®¾æ–½ï¼Œè¿˜éœ€è¦æ¸…æ™°çš„æ•°æ®å¤„ç†æ”¿ç­–å’Œå®šæœŸå®¡è®¡ï¼Œä»¥ä¾¿åœ¨æ”»å‡»è€…ä¹‹å‰å‘ç°æ¼æ´ã€‚åˆè§„è¦æ±‚å¼€å‘å›¢é˜Ÿã€æ³•å¾‹å›¢é˜Ÿå’Œç›‘ç®¡ä¸“å®¶ä¹‹é—´çš„åä½œï¼Œä»¥ç¡®ä¿æ¨¡å‹ç¬¦åˆä¸æ–­å‘å±•çš„è¡Œä¸šå’Œåœ°åŒºæ ‡å‡†ã€‚è€Œå£°èª‰é£é™©åˆ™è¦æ±‚é€æ˜åº¦å’Œé—®è´£åˆ¶ã€‚</p>
<p>èƒ½å¤Ÿè§£é‡Šå…¶AIç³»ç»Ÿå¦‚ä½•å†³ç­–å¹¶è¯æ˜å…¶å…¬å¹³æ€§çš„å…¬å¸ï¼Œåœ¨å‡ºç°é—®é¢˜æ—¶é­é‡å¼ºçƒˆåå¯¹çš„å¯èƒ½æ€§è¦å°å¾—å¤šã€‚æ¢è¨€ä¹‹ï¼Œä¼ä¸šä¸ä»…ä»…æ˜¯åœ¨ç¼–å†™æ¨¡å‹ï¼Œæ›´æ˜¯åœ¨éƒ¨ç½²å…³ä¹ä¸šåŠ¡æˆè´¥ã€å¹¶åæ˜ ç»„ç»‡è¯šä¿¡çš„ç³»ç»Ÿã€‚</p>
<p>é™ä½é£é™©æ„å‘³ç€å°†å·¥ç¨‹çºªå¾‹ä¸ç»„ç»‡é—®è´£ç›¸ç»“åˆï¼Œä»è€Œç¡®ä¿å¯¹åˆ›æ–°çš„è¿½æ±‚ä¸ä»¥ç‰ºç‰²å®‰å…¨ã€åˆè§„æˆ–ä¿¡ä»»ä¸ºä»£ä»·ã€‚</p>
<h4 data-id="heading-3"><strong><strong>å…‹æœé›†æˆéšœç¢</strong></strong></h4>
<p>ä¼ä¸šæ­£é€šè¿‡å¤šç§æŠ€æœ¯æ–¹æ³•æ¥åˆ†æ•£é£é™©ã€‚ForresteræŠ¥å‘Šæ˜¾ç¤ºï¼Œäº‘åŸç”ŸæŠ€æœ¯ï¼ˆ81%ï¼‰ã€å¼€æºAIï¼ˆ72%ï¼‰å’ŒAIæ‰˜ç®¡æœåŠ¡ï¼ˆ77%ï¼‰çš„é‡‡ç”¨ç‡å¾ˆé«˜ã€‚ç„¶è€Œï¼Œä»æœ‰55%çš„ç»„ç»‡å°†æŠ€æœ¯å’Œå¹³å°å·®è·è§†ä¸ºå…¶é¦–è¦æŒ‘æˆ˜ã€‚</p>
<p>è¿™ç§åŒé‡æ€§åæ˜ äº†ä¸€ä¸ªå¼€å‘è€…ç†ŸçŸ¥çš„ç°å®ï¼šå·¥å…·æ˜“å¾—ï¼Œé›†æˆéš¾ã€‚ä¸“æœ‰APIã€ç¢ç‰‡åŒ–çš„ç”Ÿæ€ç³»ç»Ÿä»¥åŠå‚å·®ä¸é½çš„åˆè§„è¦æ±‚éƒ½æ‹–æ…¢äº†è¿›å±•ã€‚é‚£äº›æ„å»ºçµæ´»ã€æ··åˆæ¶æ„çš„ç»„ç»‡â€”â€”åˆ©ç”¨å¼€æºåˆ›æ–°ã€æ‰˜ç®¡æœåŠ¡å®ç°æ‰©å±•ã€è¾¹ç¼˜éƒ¨ç½²å®ç°ä½å»¶è¿Ÿä½“éªŒâ€”â€”æ›´èƒ½å…‹æœè¿™ä¸€éšœç¢ã€‚</p>
<p>æ—¨åœ¨çŸ­æœŸå†…å…¨çƒéƒ¨ç½²AIçš„å…¬å¸éœ€è¦çš„ä¸ä»…ä»…æ˜¯äº‘åŸºç¡€è®¾æ–½ï¼šä»–ä»¬éœ€è¦èƒ½å¤Ÿè·¨ç›‘ç®¡åŒºåŸŸè¿è¥ã€æ”¯æŒæœ¬åœ°æ•°æ®é©»ç•™å¹¶æä¾›ä¸€è‡´æ€§èƒ½çš„åˆä½œä¼™ä¼´ã€‚</p>
<p>åœ¨Forresterçš„æ•°æ®ä¸­ï¼Œä¸“ä¸šAIæä¾›å•†è¢«è¯„ä¸ºé¦–é€‰åˆä½œä¼™ä¼´ã€‚è¿™ä¸æˆ‘åœ¨å®è·µä¸­è§‚å¯Ÿåˆ°çš„æƒ…å†µä¸€è‡´ï¼šç»„ç»‡å¸Œæœ›ä¾›åº”å•†æ—¢èƒ½æä¾›å…¨çƒè¦†ç›–ï¼Œåˆå…·å¤‡æ·±åšçš„æŠ€æœ¯ä¸“é•¿ã€‚</p>
<h4 data-id="heading-4"><strong><strong>ä¼ä¸šå½“å‰å¯é‡‡å–çš„äº”é¡¹è¡ŒåŠ¨</strong></strong></h4>
<p>Forresterç ”ç©¶æŒ‡å‡ºï¼šAIå·²æ˜¯å¸¸æ€ï¼Œä¼ä¸šçš„æˆè´¥å–å†³äºå…¶æŠŠæ¡æœºé‡ä¸ç®¡ç†é£é™©çš„èƒ½åŠ›ã€‚åŸºäºæœ€æ–°æ´å¯Ÿï¼Œæˆ‘ä»¬å»ºè®®ç«‹å³æ¨è¿›ä»¥ä¸‹äº”é¡¹æªæ–½ï¼š</p>
<ol>
<li><strong><strong>ä»¥å®¢æˆ·ä»·å€¼é”šå®šAI</strong></strong><br/>
æ¯æ¬¡AIéƒ¨ç½²éƒ½åº”ä¸å®¢æˆ·ä½“éªŒã€ç•™å­˜ç‡æˆ–æ”¶å…¥çš„å¯é‡åŒ–æå‡ç›´æ¥æŒ‚é’©ã€‚</li>
<li><strong><strong>å…¼é¡¾é€Ÿåº¦ä¸æ²»ç†</strong></strong><br/>
åœ¨å¿«é€Ÿæ¨è¿›çš„åŒæ—¶ï¼Œå°†åˆè§„ã€æµ‹è¯•ä¸ç›‘æ§å‰ç½®è‡³å¼€å‘åˆå§‹é˜¶æ®µã€‚</li>
<li><strong><strong>æ„å»ºçµæ´»æ¶æ„</strong></strong><br/>
ç»“åˆå¼€æºã€äº‘åŸç”Ÿä¸AIæ‰˜ç®¡æœåŠ¡ï¼Œä»æŠ€æœ¯ä¸Šè§„é¿ä¾›åº”å•†é”å®šã€‚</li>
<li><strong><strong>å®¡æ…é€‰æ‹©åˆä½œä¼™ä¼´</strong></strong><br/>
ä¼˜å…ˆè€ƒè™‘å…·å¤‡å…¨çƒè§„æ¨¡ã€æœ¬åœ°åŒ–åˆè§„èƒ½åŠ›ä¸å¯é äº¤ä»˜è®°å½•çš„ä¾›åº”å•†ã€‚</li>
<li><strong><strong>å°†å®éªŒçº³å…¥ç ”å‘ä½“ç³»</strong></strong><br/>
æ‰“ç ´è¯•ç‚¹å­¤å²›ï¼ŒæŠŠAIå®è·µçš„ç»éªŒèå…¥é•¿æœŸæŠ€æœ¯è·¯çº¿å›¾ã€‚</li>
</ol>
<h4 data-id="heading-5"><strong><strong>å®šä¹‰AIæ–°æ—¶ä»£</strong></strong></h4>
<p>Forresterç ”ç©¶å°è¯äº†æˆ‘ä»¬å…±åŒçš„è§‚å¯Ÿï¼šAIå·²æˆä¸ºä¼ä¸šæˆ˜ç•¥çš„æ ¸å¿ƒã€‚ç„¶è€Œæ•°æ®ä¹Ÿæ­ç¤ºå‡ºï¼Œä¼ä¸šæ„¿æ™¯ä¸ç°å®éƒ¨ç½²ä¹‹é—´ä»å­˜å¼ åŠ›ã€‚</p>
<p>å¼€å‘è€…ã€æ¶æ„å¸ˆä¸ä¸šåŠ¡é¢†å¯¼è€…å¿…é¡»æ„è¯†åˆ°ï¼šä»Šå¤©æ‰€æ„å»ºçš„AIï¼Œä¸ä»…å½±å“äº§å“åŠŸèƒ½ï¼Œæ›´å°†å†³å®šæœªæ¥çš„å®¢æˆ·ä½“éªŒä¸å“ç‰Œä¿¡èª‰ã€‚é‚£äº›ä»¥å®¢æˆ·ä¸ºä¸­å¿ƒã€é‡‡çº³çµæ´»æŠ€æœ¯ç­–ç•¥å¹¶æºæ‰‹å¯ä¿¡åˆä½œä¼™ä¼´çš„ç»„ç»‡ï¼Œä¸ä»…èƒ½åœ¨AIæµªæ½®ä¸­ç«‹è¶³ï¼Œæ›´å°†å…±åŒå®šä¹‰è¿™ä¸ªæ—¶ä»£ã€‚</p>
<h4 data-id="heading-6"><strong><strong>äº†è§£æ›´å¤š</strong></strong></h4>
<p>å¦‚æœæ‚¨æœ‰å…´è¶£è¿›ä¸€æ­¥äº†è§£ä¼ä¸šAIçš„ç°çŠ¶ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Flp%2Fforrester-enterprise-ai-report-2025%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251113_external2_blogarticles226" target="_blank" title="https://www.akamai.com/zh/lp/forrester-enterprise-ai-report-2025?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251113_external2_blogarticles226" ref="nofollow noopener noreferrer">è¯·é˜…è¯»å®Œæ•´æŠ¥å‘Š</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MoE è´Ÿè½½å‡è¡¡ä¹‹äº‰ï¼šä¸ºä½• Mixtral çš„â€œå®ç”¨ä¸»ä¹‰â€èƒœè¿‡äº†â€œç»Ÿè®¡ä¸»ä¹‰â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572010680896749608</link>    <guid>https://juejin.cn/post/7572010680896749608</guid>    <pubDate>2025-11-13T12:33:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680896749608" data-draft-id="7572020278386982946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MoE è´Ÿè½½å‡è¡¡ä¹‹äº‰ï¼šä¸ºä½• Mixtral çš„â€œå®ç”¨ä¸»ä¹‰â€èƒœè¿‡äº†â€œç»Ÿè®¡ä¸»ä¹‰â€ï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-13T12:33:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MoE è´Ÿè½½å‡è¡¡ä¹‹äº‰ï¼šä¸ºä½• Mixtral çš„â€œå®ç”¨ä¸»ä¹‰â€èƒœè¿‡äº†â€œç»Ÿè®¡ä¸»ä¹‰â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:33:17.000Z" title="Thu Nov 13 2025 12:33:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MoE è´Ÿè½½å‡è¡¡ä¹‹äº‰ï¼šä¸ºä½• Mixtral çš„â€œå®ç”¨ä¸»ä¹‰â€èƒœè¿‡äº†â€œç»Ÿè®¡ä¸»ä¹‰â€ï¼Ÿ</h2>
<p>åœ¨å½“ä»Šçš„å¤§æ¨¡å‹ï¼ˆLLMï¼‰é¢†åŸŸï¼ŒMoEï¼ˆMixture of Expertsï¼‰æ¶æ„å·²ç»æˆä¸ºå®ç°â€œæ›´å¿«ã€æ›´å¼ºã€æ›´å¤§â€çš„é»„é‡‘é—¨ç¥¨ã€‚é€šè¿‡â€œç¨€ç–æ¿€æ´»â€ï¼ŒMoE å…è®¸æ¨¡å‹æ‹¥æœ‰æ•°åƒäº¿ç”šè‡³ä¸‡äº¿çš„æ€»å‚æ•°ï¼ˆçŸ¥è¯†åº“ï¼‰ï¼ŒåŒæ—¶ä¿æŒç€æä½ï¼ˆä¸”å¯æ§ï¼‰çš„è®¡ç®—æˆæœ¬ï¼ˆæ¨ç†é€Ÿåº¦ï¼‰ã€‚</p>
<p>ä½†è¿™ä¸ªâ€œå¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤â€çš„æ•…äº‹é‡Œï¼Œæœ‰ä¸€ä¸ªè‡´å‘½çš„â€œé˜¿å–€ç‰æ–¯ä¹‹è¸µâ€â€”â€”<strong>è´Ÿè½½å‡è¡¡ (Load Balancing)</strong> ã€‚</p>
<p>å¦‚æœä½ ä¸åŠ çº¦æŸï¼ŒGating ç½‘ç»œï¼ˆåˆ†è¯Šå°ï¼‰ä¼šå¾ˆå¿«â€œå·æ‡’â€ï¼Œå‘ç°æœ‰å‡ ä¸ªä¸“å®¶ç‰¹åˆ«â€œèªæ˜â€ï¼Œç„¶åæŠŠæ‰€æœ‰ä»»åŠ¡éƒ½äº¤ç»™å®ƒä»¬ã€‚è¿™ä¼šå¯¼è‡´â€œæ˜æ˜Ÿä¸“å®¶â€è¿‡åŠ³ï¼Œè€Œâ€œæ‘¸é±¼ä¸“å®¶â€å®Œå…¨å¾—ä¸åˆ°è®­ç»ƒï¼Œç™½ç™½æµªè´¹äº†å®è´µçš„ GPU èµ„æºå’Œæ¨¡å‹å®¹é‡ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬è®¾è®¡äº†â€œè¾…åŠ©æŸå¤±å‡½æ•°â€ (Auxiliary Loss Function) æ¥â€œæƒ©ç½šâ€è¿™ç§ä¸å‡è¡¡ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥å¯¹æ¯”ä¸¤ç§æœ€è‘—åã€æœ€æœ‰ä»£è¡¨æ€§çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€åœºæ•°å­¦å…¬å¼çš„è¾ƒé‡ï¼Œæ›´æ˜¯ä¸€åœºâ€œç»Ÿè®¡çº¯æ´æ€§â€ä¸â€œå·¥ç¨‹å®ç”¨æ€§â€çš„å¯¹å†³ã€‚</p>
<hr/>
<h3 data-id="heading-1">ç­–ç•¥ä¸€ï¼šâ€œç»Ÿè®¡ä¸»ä¹‰â€çš„ä¼˜é›…â€”â€”CV æŸå¤± (GShard)</h3>
<p>ç¬¬ä¸€ç§æ–¹æ³•æ¥è‡ª Google GShard ç­‰æ—©æœŸ MoE è®ºæ–‡ï¼Œå®ƒåœ¨æ•°å­¦ä¸Šéå¸¸â€œä¼˜é›…â€ï¼ŒåŠ›æ±‚å®ç°ç»Ÿè®¡ä¸Šçš„å®Œç¾å‡è¡¡ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æˆ‘ä»¬åº”è¯¥è®©æ‰€æœ‰ä¸“å®¶è¢« Gating ç½‘ç»œèµ‹äºˆçš„**â€œæ€»é‡è¦æ€§â€ (Total Importance)** ä¿æŒä¸€è‡´ã€‚</p>
<p>æ ¸å¿ƒå…¬å¼ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>Importance</mtext></msub><mo>=</mo><msub><mi>w</mi><mtext>Importance</mtext></msub><mo>â‹…</mo><mtext>CV</mtext><mo stretchy="false">(</mo><mtext>Importance</mtext><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L_{\text{Importance}} = w_{\text{Importance}} \cdot \text{CV}(\text{Importance}(X))^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Importance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7306em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Importance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">CV</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">Importance</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong>å…¬å¼åˆ†è§£ï¼š</strong></p>
<ol>
<li>
<p><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></strong> ï¼šGating ç½‘ç»œä¸ºå•ä¸ª Token <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> è¾“å‡ºçš„ã€<em>ç»è¿‡ Top-K ç­›é€‰å’Œ Softmax å½’ä¸€åŒ–</em>çš„ç¨€ç–æ¦‚ç‡å‘é‡ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Importance</mtext><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>âˆ‘</mo><mrow><mi>x</mi><mo>âˆˆ</mo><mi>X</mi></mrow></msub><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Importance}(X) = \sum_{x \in X} G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">Importance</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0771em;vertical-align:-0.3271em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">âˆˆ</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3271em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>ï¼š</p>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬æŠŠä¸€ä¸ªæ‰¹æ¬¡ (Batch) ä¸­æ‰€æœ‰ Token çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> å‘é‡å…¨éƒ¨åŠ èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> ç»´ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> ä¸ºä¸“å®¶æ•°ï¼‰çš„â€œæ€»é‡è¦æ€§â€å‘é‡ã€‚ä¾‹å¦‚ [150.3, 149.8, 150.1, 149.9]ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>CV</mtext><mo stretchy="false">(</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{CV}(\dots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">CV</span></span><span class="mopen">(</span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mclose">)</span></span></span></span></span>ï¼š</p>
<p>è®¡ç®—è¿™ä¸ªâ€œæ€»é‡è¦æ€§â€å‘é‡çš„å˜å¼‚ç³»æ•° (Coefficient of Variation)ï¼Œå³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mtext>æ ‡å‡†å·®</mtext><mtext>å¹³å‡å€¼</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{\text{æ ‡å‡†å·®}}{\text{å¹³å‡å€¼}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å¹³å‡å€¼</span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">æ ‡å‡†å·®</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>Importance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{Importance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Importance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š</p>
<p>æˆ‘ä»¬æœ€å°åŒ–è¿™ä¸ªå˜å¼‚ç³»æ•°çš„å¹³æ–¹ã€‚</p>
</li>
</ol>
<p>ç›´è§‰ï¼š</p>
<p>å˜å¼‚ç³»æ•°æ˜¯è¡¡é‡â€œä¸å‡è¡¡æ€§â€çš„å®Œç¾æŒ‡æ ‡ã€‚</p>
<ul>
<li><strong>å®Œç¾å‡è¡¡ï¼š</strong> <code>[150, 150, 150]</code>ã€‚æ ‡å‡†å·® = 0ï¼ŒCV = 0ï¼ŒæŸå¤± = 0ã€‚</li>
<li><strong>æåº¦å¤±è¡¡ï¼š</strong> <code>[450, 0, 0]</code>ã€‚æ ‡å‡†å·®å’Œ CV éƒ½éå¸¸é«˜ï¼ŒæŸå¤±éå¸¸å¤§ã€‚</li>
</ul>
<p>è¿™ç§æ–¹æ³•åœ¨ç†è®ºä¸Šè¿‘ä¹å®Œç¾ï¼Œå®ƒåªéœ€è¦ä¸€æ¬¡ <code>AllReduce</code>ï¼ˆè®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ‘</mo><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>ï¼‰ï¼Œè®¡ç®—é«˜æ•ˆä¸”æ•°å­¦é€»è¾‘æ¸…æ™°ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç­–ç•¥äºŒï¼šâ€œå®ç”¨ä¸»ä¹‰â€çš„èƒœåˆ©â€”â€”Switch æŸå¤± (Mixtral)</h3>
<p>ç¬¬äºŒç§æ–¹æ³•æ¥è‡ª Google çš„ Switch Transformer è®ºæ–‡ï¼Œå¹¶è¢« Mixtral 8x7B ç­‰å½“å‰æœ€å…ˆè¿›çš„å¼€æºæ¨¡å‹æ‰€é‡‡ç”¨ã€‚å®ƒçœ‹èµ·æ¥â€œæ›´å¤æ‚â€æˆ–â€œæ›´ä¸ç›´è§‚â€ï¼Œä½†å®ƒè§£å†³äº†ä¸€ä¸ªè‡´å‘½çš„æ¼æ´ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æˆ‘ä»¬å¿…é¡»<em>åŒæ—¶</em>å¹³è¡¡ Gating ç½‘ç»œçš„â€œè·¯ç”±ä¿¡å¿ƒâ€å’Œä¸“å®¶çš„â€œå®é™…å·¥ä½œé‡â€ã€‚</p>
<p>æ ¸å¿ƒå…¬å¼ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub><mo>=</mo><mi>N</mi><mo>â‹…</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}} = N \cdot \sum_{i=1}^{N} f_i \cdot P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p><strong>å…¬å¼åˆ†è§£ï¼š</strong></p>
<ol>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å¹³å‡è·¯ç”±æ¦‚ç‡)ï¼š</p>
<p>Gating ç½‘ç»œåœ¨è¿™ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¹³å‡åˆ†é…ç»™ä¸“å®¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> çš„**â€œæ¦‚ç‡â€**ï¼ˆå³â€œæ„å‘â€ï¼‰ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (ä»»åŠ¡åˆ†é…æ¯”ä¾‹)ï¼š</p>
<p>é€šè¿‡ Top-K ç¡¬å†³ç­–åï¼Œä¸“å®¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> å®é™… è¢«åˆ†é…åˆ°çš„ Token æ¯”ä¾‹ï¼ˆå³â€œå®é™…å·¥ä½œé‡â€ï¼‰ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š</p>
<p>æˆ‘ä»¬æœ€å°åŒ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å‘é‡å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å‘é‡çš„â€œç‚¹ç§¯â€ï¼ˆDot Productï¼‰ã€‚</p>
</li>
</ol>
<p>ç›´è§‰ï¼š</p>
<p>è¿™ä¸ªå…¬å¼çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒå°† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆä¸€ä¸ªä¸å¯å¾®åˆ†çš„â€œç¡¬å†³ç­–â€ç»“æœï¼‰å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆä¸€ä¸ªå¯å¾®åˆ†çš„â€œè½¯æ¦‚ç‡â€ï¼‰ç»‘å®šåœ¨äº†ä¸€èµ·ã€‚æˆ‘ä»¬ç¨åä¼šçœ‹åˆ°ï¼Œè¿™ä¸ä»…è§£å†³äº†è´Ÿè½½å‡è¡¡ï¼Œè¿˜é¡ºä¾¿è§£å†³äº†â€œæ¢¯åº¦å›ä¼ â€çš„éš¾é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-3">å·…å³°å¯¹å†³ï¼šCV æŸå¤±çš„â€œè‡´å‘½æ¼æ´â€</h3>
<p>è¡¨é¢ä¸Šçœ‹ï¼ŒCV æŸå¤±ï¼ˆç­–ç•¥ä¸€ï¼‰æ›´ç®€å•ã€æ›´é«˜æ•ˆã€‚ä¸ºä»€ä¹ˆ Mixtral åè€Œé€‰æ‹©äº†æ›´å¤æ‚çš„ Switch æŸå¤±ï¼ˆç­–ç•¥äºŒï¼‰å‘¢ï¼Ÿ</p>
<p><strong>å› ä¸º CV æŸå¤±å¯ä»¥è¢« Gating ç½‘ç»œâ€œæ¬ºéª—â€ã€‚</strong></p>
<p>CV æŸå¤±å¹³è¡¡çš„æ˜¯â€œæ¦‚ç‡æ€»å’Œâ€ï¼Œè€Œä¸æ˜¯â€œå®é™…å·¥ä½œâ€ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª Gating ç½‘ç»œâ€œä½œå¼Šâ€çš„åœºæ™¯ï¼š</p>
<blockquote>
<p><strong>ä½œå¼Šåœºæ™¯ (Top-K=1, N=2)ï¼š</strong></p>
<p>å‡è®¾ Gating ç½‘ç»œå†³å®šâ€œä½œå¼Šâ€ï¼š</p>
<ul>
<li>å®ƒå°† <strong>1000 ä¸ª Token</strong> è·¯ç”±ç»™<strong>ä¸“å®¶ 1</strong>ï¼Œä½†æ¯æ¬¡åªç»™ <strong>0.1</strong> çš„ä½æ¦‚ç‡ã€‚</li>
<li>å®ƒå°† <strong>100 ä¸ª Token</strong> è·¯ç”±ç»™<strong>ä¸“å®¶ 2</strong>ï¼Œä½†æ¯æ¬¡éƒ½ç»™ <strong>1.0</strong> çš„é«˜æ¦‚ç‡ã€‚</li>
</ul>
<p><strong>1. CV æŸå¤±ï¼ˆç­–ç•¥ä¸€ï¼‰å¦‚ä½•çœ‹å¾…ï¼š</strong></p>
<ul>
<li>ä¸“å®¶ 1 çš„â€œæ€»é‡è¦æ€§â€ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mo>Ã—</mo><mn>0.1</mn><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">1000 \times 0.1 = 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1000</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">100</span></span></span></span></span></li>
<li>ä¸“å®¶ 2 çš„â€œæ€»é‡è¦æ€§â€ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo>Ã—</mo><mn>1.0</mn><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">100 \times 1.0 = 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.0</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">100</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Importance</mtext></mrow><annotation encoding="application/x-tex">\text{Importance}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">Importance</span></span></span></span></span></span> å‘é‡ = <code>[100, 100]</code></li>
<li><strong>CV = 0ï¼æŸå¤± = 0ï¼</strong></li>
<li><strong>ç»“è®ºï¼š</strong> CV æŸå¤±è®¤ä¸ºè¿™æ˜¯â€œå®Œç¾å‡è¡¡â€ã€‚</li>
</ul>
<p><strong>2. å®é™… GPU ä¸Šçš„æƒ…å†µï¼š</strong></p>
<ul>
<li>ä¸“å®¶ 1ï¼ˆGPU 1ï¼‰è¢«æ¿€æ´»äº† <strong>1000 æ¬¡</strong>ã€‚</li>
<li>ä¸“å®¶ 2ï¼ˆGPU 2ï¼‰è¢«æ¿€æ´»äº† <strong>100 æ¬¡</strong>ã€‚</li>
<li><strong>ç»“è®ºï¼š</strong> è´Ÿè½½<strong>æåº¦ä¸å‡è¡¡</strong>ï¼GPU 1 è¿‡åŠ³ï¼ŒGPU 2 æ‘¸é±¼ã€‚</li>
</ul>
</blockquote>
<p>CV æŸå¤±è¢« Gating ç½‘ç»œçš„â€œèŠ±è¨€å·§è¯­â€ï¼ˆæ¦‚ç‡ï¼‰æ‰€è’™è”½ï¼Œè€Œæ²¡æœ‰çœ‹åˆ°â€œå®é™…å·¥ä½œâ€çš„åˆ†é…ã€‚</p>
<p><strong>Switch æŸå¤±ï¼ˆç­–ç•¥äºŒï¼‰å¦‚ä½•çœ‹å¾…ï¼š</strong></p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å®é™…å·¥ä½œé‡) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>0.91</mn></mrow><annotation encoding="application/x-tex">\approx 0.91</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.91</span></span></span></span></span> (91% çš„ Token å»äº† 1 å·)</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">f_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å®é™…å·¥ä½œé‡) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>0.09</mn></mrow><annotation encoding="application/x-tex">\approx 0.09</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.09</span></span></span></span></span> (9% çš„ Token å»äº† 2 å·)</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å¹³å‡æ¦‚ç‡) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>0.1</mn></mrow><annotation encoding="application/x-tex">\approx 0.1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.1</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å¹³å‡æ¦‚ç‡) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>1.0</mn></mrow><annotation encoding="application/x-tex">\approx 1.0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.0</span></span></span></span></span></li>
</ul>
<p>Switch æŸå¤±ä¼šå‘ç° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å‘é‡ (<code>[0.91, 0.09]</code>) å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å‘é‡ (<code>[0.1, 1.0]</code>) éƒ½æåº¦ä¸å‡è¡¡ï¼Œå®ƒä»¬çš„ç‚¹ç§¯ï¼ˆæŸå¤±ï¼‰ä¼š<strong>éå¸¸é«˜</strong>ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªå·¨å¤§çš„â€œæƒ©ç½šâ€ä¿¡å·ï¼Œè¿«ä½¿ Gating ç½‘ç»œåœæ­¢è¿™ç§â€œä½œå¼Šâ€è¡Œä¸ºã€‚</p>
<hr/>
<h3 data-id="heading-4">å¯¹æ¯”æ€»ç»“ï¼šä¸ºä½•â€œå®ç”¨â€èƒœè¿‡â€œä¼˜é›…â€ï¼Ÿ</h3>








































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>ç­–ç•¥ä¸€ (CV Loss / GShard)</strong></th><th><strong>ç­–ç•¥äºŒ (Switch Loss / Mixtral)</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒç†å¿µ</strong></td><td>ç»Ÿè®¡ä¸»ä¹‰ï¼šå¹³è¡¡â€œæ€»æ¦‚ç‡â€</td><td>å®ç”¨ä¸»ä¹‰ï¼šå¹³è¡¡â€œå®é™…å·¥ä½œâ€</td></tr><tr><td><strong>å¹³è¡¡å¯¹è±¡</strong></td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (æ¦‚ç‡/æ„å‘)</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (æ„å‘) <strong>å’Œ</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å®é™…å·¥ä½œé‡)</td></tr><tr><td><strong>è®¡ç®—å¼€é”€</strong></td><td>ç†è®ºä¸Šæ›´ä½ï¼ˆ1 æ¬¡ AllReduceï¼‰</td><td>ç•¥é«˜ï¼ˆ2 æ¬¡ AllReduceï¼‰</td></tr><tr><td><strong>é²æ£’æ€§</strong></td><td><strong>ä½</strong>ã€‚å¯è¢« Gatingâ€œæ¬ºéª—â€</td><td><strong>é«˜</strong>ã€‚èƒ½æ•æ‰åˆ°â€œå®é™…è´Ÿè½½â€çš„ä¸å‡</td></tr><tr><td><strong>ä¸»è¦ç”¨æˆ·</strong></td><td>æ—©æœŸ Google MoE ç ”ç©¶</td><td><strong>Mixtral</strong>ã€Switch Transformer</td></tr><tr><td><strong>é¢å¤–ä¼˜åŠ¿</strong></td><td>æ— </td><td>å·§å¦™åœ°åˆ©ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è§£å†³äº† Top-K çš„â€œä¸å¯å¾®åˆ†â€é—®é¢˜</td></tr></tbody></table>
<h4 data-id="heading-5">æœ€åçš„èµ¢å®¶ï¼šSwitch æŸå¤±çš„â€œä¸€ç®­åŒé›•â€</h4>
<p>Switch æŸå¤±ï¼ˆç­–ç•¥äºŒï¼‰çš„èƒœåˆ©ä¸ä»…åœ¨äºå®ƒæ›´é²æ£’ï¼Œè¿˜åœ¨äºå®ƒçš„è®¾è®¡æ˜¯â€œä¸€ç®­åŒé›•â€ã€‚</p>
<p>æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå®é™…å·¥ä½œé‡ï¼‰æ¥è‡ª Top-K ç¡¬å†³ç­–ï¼Œå®ƒæœ¬èº«æ˜¯<strong>ä¸å¯å¾®åˆ†</strong>çš„ï¼ˆæ¢¯åº¦æ— æ³•å›ä¼ ï¼‰ã€‚</p>
<p>è€Œ Switch æŸå¤± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub><mo>=</mo><mi>N</mi><mo>â‹…</mo><mo>âˆ‘</mo><mo stretchy="false">(</mo><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_{\text{balance}} = N \cdot \sum (f_i \cdot P_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> åœ¨åå‘ä¼ æ’­æ—¶ï¼Œè¢«è®¾è®¡ä¸º**â€œç»•è¿‡â€**äº†è¿™ä¸ªéšœç¢ã€‚å®ƒå°† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è§†ä¸ºä¸€ä¸ªâ€œå¸¸æ•°â€ï¼Œæ¢¯åº¦åªé€šè¿‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å›ä¼ ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><mi>L</mi><mo>âˆ</mo><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\nabla L \propto f_i \cdot \nabla P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ‡</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ol>
<li>å®ƒåˆ©ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ¥<strong>å®ç°è´Ÿè½½å‡è¡¡</strong>ã€‚</li>
<li>å®ƒåˆ©ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä½œä¸ºâ€œæƒé‡â€ï¼Œä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¿™æ¡<strong>å¯å¾®åˆ†è·¯å¾„</strong>æä¾›äº†æ¢¯åº¦ã€‚</li>
</ol>
<p>ç»“è®ºï¼š</p>
<p>CV æŸå¤±æ˜¯ä¸€ä¸ªâ€œä¼˜é›…â€çš„æ•°å­¦å…¬å¼ï¼Œå®ƒè¯•å›¾å¹³è¡¡ä¸€ä¸ªâ€œä»£ç†æŒ‡æ ‡â€ï¼ˆæ¦‚ç‡ï¼‰ï¼Œä½†æœ€ç»ˆå¤±è´¥äº†ã€‚</p>
<p>Switch æŸå¤±æ˜¯ä¸€ä¸ªâ€œå®ç”¨â€çš„å·¥ç¨‹æ–¹æ¡ˆï¼Œå®ƒçœ‹èµ·æ¥æ›´å¤æ‚ï¼Œä½†å®ƒç‰¢ç‰¢æŠ“ä½äº†**â€œå¹³è¡¡å®é™… GPU è®¡ç®—é‡â€**è¿™ä¸ªæ ¸å¿ƒç›®æ ‡ï¼Œå¹¶é¡ºä¾¿è§£å†³äº†æ¢¯åº¦éš¾é¢˜ã€‚</p>
<p>åœ¨æ„å»ºå¼ºå¤§ã€é«˜æ•ˆã€å¯é çš„ MoE æ¨¡å‹æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªèƒ½â€œçœ‹ç©¿è°è¨€â€çš„æŸå¤±å‡½æ•°è‡³å…³é‡è¦ã€‚åœ¨è¿™åœºå¯¹å†³ä¸­ï¼ŒMixtral æ‰€ä»£è¡¨çš„â€œå®ç”¨ä¸»ä¹‰â€æ˜¾ç„¶èµ¢å¾—äº†èƒœåˆ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜ MoE è®­ç»ƒçš„â€œä¸‰é©¾é©¬è½¦â€]]></title>    <link>https://juejin.cn/post/7572010680896782376</link>    <guid>https://juejin.cn/post/7572010680896782376</guid>    <pubDate>2025-11-13T12:42:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680896782376" data-draft-id="7572010680896765992" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ MoE è®­ç»ƒçš„â€œä¸‰é©¾é©¬è½¦â€"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-13T12:42:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ MoE è®­ç»ƒçš„â€œä¸‰é©¾é©¬è½¦â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:42:56.000Z" title="Thu Nov 13 2025 12:42:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­ç§˜ MoE è®­ç»ƒçš„â€œä¸‰é©¾é©¬è½¦â€ï¼šä¸€ç¯‡åšå®¢çœ‹æ‡‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></h2>
<p>åœ¨æ··åˆä¸“å®¶æ¨¡å‹ï¼ˆMoEï¼‰çš„å®ä¼Ÿè“å›¾ä¸­ï¼Œæˆ‘ä»¬æƒŠå¹äºå®ƒå¦‚ä½•ç”¨â€œç¨€ç–æ¿€æ´»â€æ’¬åŠ¨ä¸‡äº¿å‚æ•°ï¼Œå®ç°äº†å‰æ‰€æœªæœ‰çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚ä½†ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„äº‹å®æ˜¯ï¼š<strong>è®­ç»ƒ MoE æ¨¡å‹æ˜¯ä¸€åœºæå…¶ç²¾å¦™çš„â€œå¤šç›®æ ‡ä¼˜åŒ–â€</strong> ã€‚</p>
<p>ä»…ä»…å‘Šè¯‰æ¨¡å‹â€œä½ è¦é¢„æµ‹å‡†ç¡®â€ï¼ˆå³æœ€å°åŒ–ä¸»æŸå¤± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚è¿™æ ·åšï¼Œä½ çš„ Gating ç½‘ç»œï¼ˆåˆ†è¯Šå°ï¼‰ä¼šè¿…é€Ÿâ€œå·æ‡’â€æˆ–â€œå´©æºƒâ€ã€‚</p>
<p>ä¸ºäº†â€œé©¯æœâ€ Gating ç½‘ç»œï¼Œä½¿å…¶é«˜æ•ˆã€å…¬å¹³ã€ç¨³å®šåœ°å·¥ä½œï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥å¦å¤–ä¸¤ä¸ªâ€œè¾…åŠ©æŸå¤±å‡½æ•°â€ã€‚å®ƒä»¬ä¸ä¸»æŸå¤±ä¸€èµ·ï¼Œæ„æˆäº† MoE è®­ç»ƒçš„â€œä¸‰é©¾é©¬è½¦â€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿™ä¸‰å¤§æŸå¤±å„è‡ªçš„ä½¿å‘½ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ååŒä½œæˆ˜ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€å·é©¬è½¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (ä¸»æŸå¤±) â€”â€” â€œå‰è¿›çš„æ–¹å‘â€</h3>
<p>è¿™æ˜¯æœ€ç®€å•ã€æœ€æ ¸å¿ƒçš„æŸå¤±ã€‚</p>
<ul>
<li><strong>ç›®æ ‡ï¼š</strong> ä»»åŠ¡æ€§èƒ½ã€‚</li>
<li><strong>å…¬å¼ï¼š</strong> é€šå¸¸æ˜¯â€œäº¤å‰ç†µæŸå¤±â€ (Cross-Entropy Loss)ã€‚</li>
<li><strong>å®ƒå‘Šè¯‰æ¨¡å‹ï¼š</strong> â€œ<strong>ä½ çš„æœ€ç»ˆç­”æ¡ˆå¿…é¡»æ˜¯æ­£ç¡®çš„ï¼</strong> â€</li>
</ul>
<p>æ— è®ºæ¶æ„å¤šå¤æ‚ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å§‹ç»ˆæ˜¯æ‹‰åŠ¨æ•´ä¸ªæ¨¡å‹å‘â€œæ›´æ™ºèƒ½â€æ–¹å‘å‰è¿›çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚ä½†åªæœ‰å®ƒï¼ŒGating ç½‘ç»œä¼šâ€œé‡è›®ç”Ÿé•¿â€ï¼Œå¯¼è‡´ä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒå·é©¬è½¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (è´Ÿè½½å‡è¡¡æŸå¤±) â€”â€” â€œå…¬å¹³ä¸æ•ˆç‡â€</h3>
<p><strong>é—®é¢˜ï¼š</strong> Gating ç½‘ç»œä¼šâ€œå·æ‡’â€ï¼Œå‘ç°æœ‰å‡ ä¸ªä¸“å®¶ç‰¹åˆ«â€œèªæ˜â€ï¼Œç„¶åæŠŠæ‰€æœ‰ä»»åŠ¡éƒ½äº¤ç»™å®ƒä»¬ã€‚è¿™å¯¼è‡´â€œæ˜æ˜Ÿä¸“å®¶â€è¿‡åŠ³ï¼Œâ€œæ‘¸é±¼ä¸“å®¶â€å®Œå…¨å¾—ä¸åˆ°è®­ç»ƒï¼Œç™½ç™½æµªè´¹äº†æ¨¡å‹å®¹é‡ã€‚</p>
<p><strong>ç›®æ ‡ï¼š</strong> å¼ºåˆ¶ Gating ç½‘ç»œâ€œé›¨éœ²å‡æ²¾â€ï¼Œç¡®ä¿å·¥ä½œè´Ÿè½½è¢«<em>å…¬å¹³åœ°</em>åˆ†é…ç»™æ‰€æœ‰ä¸“å®¶ã€‚</p>
<ul>
<li><strong>å®ƒå‘Šè¯‰ Gating ç½‘ç»œï¼š</strong> â€œ<strong>ä½ å¿…é¡»æŠŠå·¥ä½œå…¬å¹³åœ°åˆ†é…ç»™æ‰€æœ‰äººï¼Œä¸è®¸æœ‰æ˜æ˜Ÿå’Œæ‘¸é±¼ï¼</strong> â€</li>
</ul>
<p>æˆ‘ä»¬ä¹‹å‰è¯¦ç»†å¯¹æ¯”äº†ä¸¤ç§å®ç°æ–¹å¼ï¼Œå…¶ä¸­â€œSwitch æŸå¤±â€å› å…¶é²æ£’æ€§è€Œæˆä¸ºç°ä»£ MoEï¼ˆå¦‚ Mixtralï¼‰çš„é¦–é€‰ã€‚</p>
<h5 data-id="heading-3">1. ç­–ç•¥ä¸€ï¼ˆå·²è¿‡æ—¶ï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>CV</mtext><mo stretchy="false">(</mo><mo>â€¦</mo><mtext>â€‰</mtext><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\text{CV}(\dots)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">CV</span></span><span class="mopen">(</span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> æŸå¤± (GShard)</h5>
<ul>
<li><strong>ç†å¿µï¼š</strong> â€œç»Ÿè®¡ä¸»ä¹‰â€ã€‚å¹³è¡¡ Gating ç½‘ç»œçš„â€œæ€»æ¦‚ç‡â€ï¼ˆå³â€œæ„å‘â€ï¼‰ã€‚</li>
<li><strong>æ¼æ´ï¼š</strong> å®ƒå¯ä»¥è¢« Gating ç½‘ç»œâ€œæ¬ºéª—â€ã€‚Gating å¯ä»¥ç»™ 1000 ä¸ª Token 0.1 çš„æ¦‚ç‡ï¼ˆæ€»å’Œ 100ï¼‰ï¼Œç»™ 100 ä¸ª Token 1.0 çš„æ¦‚ç‡ï¼ˆæ€»å’Œ 100ï¼‰ã€‚CV æŸå¤±è®¤ä¸ºè¿™å¾ˆâ€œå‡è¡¡â€ï¼Œä½†<em>å®é™…å·¥ä½œé‡</em>å´æ˜¯ 1000 vs 100ï¼Œæä¸å‡è¡¡ã€‚</li>
</ul>
<h5 data-id="heading-4">2. ç­–ç•¥äºŒï¼ˆå½“å‰ä¸»æµï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i \cdot P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æŸå¤± (Switch / Mixtral)</h5>
<ul>
<li><strong>ç†å¿µï¼š</strong> â€œå®ç”¨ä¸»ä¹‰â€ã€‚<strong>åŒæ—¶</strong>å¹³è¡¡â€œå®é™…å·¥ä½œé‡â€ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>) å’Œâ€œè·¯ç”±ä¿¡å¿ƒâ€ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>)ã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> å®ƒèƒ½å®Œç¾æ•æ‰åˆ°ä¸Šè¿°â€œä½œå¼Šâ€è¡Œä¸ºã€‚ç”±äºå®ƒç›´æ¥æƒ©ç½šâ€œå®é™…å·¥ä½œé‡â€ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>) çš„ä¸å‡è¡¡ï¼ŒGating ç½‘ç»œæ— æ³•â€œæ’’è°â€ï¼Œå¿…é¡»è€è€å®å®åœ°å°† Token <em>çœŸæ­£åœ°</em>å¹³å‡åˆ†é…åˆ°ä¸åŒçš„ GPUï¼ˆä¸“å®¶ï¼‰ä¸Šã€‚</li>
</ul>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ç¡®ä¿äº† MoE æ¨¡å‹çš„â€œæ•ˆç‡â€å’Œâ€œå®¹é‡â€èƒ½è¢«å……åˆ†åˆ©ç”¨ã€‚ä½†å®ƒåªè§£å†³äº†â€œå…¬å¹³â€ï¼Œæ²¡æœ‰è§£å†³â€œç¨³å®šâ€ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰å·é©¬è½¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (z-æŸå¤±) â€”â€” â€œç¨³å®šä¸å…‹åˆ¶â€</h3>
<p><strong>é—®é¢˜ï¼š</strong> å³ä½¿ Gating ç½‘ç»œå­¦ä¼šäº†â€œå…¬å¹³â€ï¼Œå®ƒä¹Ÿå¯èƒ½åœ¨è®­ç»ƒä¸­å˜å¾—â€œè¿‡åº¦è‡ªä¿¡â€ã€‚å®ƒå¯èƒ½ä¼šè¾“å‡º<em>æå¤§</em>çš„åŸå§‹åˆ†æ•°ï¼ˆLogitsï¼‰ï¼Œæ¯”å¦‚ <code>[50, 1, -10, ...]</code>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆâ€œå¤§åˆ†æ•°â€æ˜¯åäº‹ï¼Ÿ</strong></p>
<ol>
<li><strong>æ•°å€¼ä¸ç¨³å®šï¼š</strong> æå¤§çš„ Logits ä¼šå¯¼è‡´æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±ï¼Œè®©è®­ç»ƒè¿‡ç¨‹ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ 16 ä½æµ®ç‚¹æ•°æ—¶ï¼‰éå¸¸ä¸ç¨³å®šã€‚</li>
<li><strong>è¿‡æ—©æ”¶æ•›ï¼š</strong> Gating è¿‡æ—©åœ°â€œç„Šæ­»â€äº†å®ƒçš„è·¯ç”±å†³ç­–ï¼Œä¸§å¤±äº†â€œæ¢ç´¢â€å…¶ä»–ä¸“å®¶ç»„åˆçš„çµæ´»æ€§ï¼Œå¯¼è‡´æ¨¡å‹é™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚</li>
</ol>
<p><strong>ç›®æ ‡ï¼š</strong> æ­£åˆ™åŒ–ã€‚é˜²æ­¢ Gating ç½‘ç»œè¾“å‡ºçš„ Logits æ•°å€¼è¿‡å¤§ã€‚</p>
<ul>
<li><strong>å®ƒå‘Šè¯‰ Gating ç½‘ç»œï¼š</strong> â€œ<strong>ä½ å¯ä»¥æœ‰åå¥½ï¼Œä½†ä½ ä¸è®¸è¿‡åº¦è‡ªä¿¡ï¼æŠŠä½ çš„åˆ†æ•°ï¼ˆLogitsï¼‰ä¿æŒåœ¨ 0 é™„è¿‘ï¼</strong> â€</li>
</ul>
<p>æ ¸å¿ƒå…¬å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub><mo>âˆ</mo><msub><mo>âˆ‘</mo><mtext>batch</mtext></msub><msup><mrow><mo fence="true">(</mo><mtext>LogSumExp</mtext><mo stretchy="false">(</mo><mtext>Top-KÂ Logits</mtext><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L_{\text{router-z}} \propto \sum_{\text{batch}} \left( \text{LogSumExp}(\text{Top-K Logits}) \right)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">batch</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord text"><span class="mord">LogSumExp</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">Top-KÂ Logits</span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ul>
<li><strong>LogSumExp (LSE)</strong> æ˜¯ä¸€ä¸ªâ€œå¹³æ»‘çš„æœ€å¤§å€¼â€å‡½æ•°ã€‚å½“ Logits å¾ˆå¤§æ—¶ï¼ˆä¾‹å¦‚ <code>[50, 1]</code>ï¼‰ï¼ŒLSE çš„ç»“æœä¹Ÿä¼šéå¸¸å¤§ï¼ˆçº¦ç­‰äº 50ï¼‰ã€‚</li>
<li>è¿™ä¸ªæŸå¤±å‡½æ•°çš„ç›®æ ‡æ˜¯<strong>æœ€å°åŒ– LSE çš„å¹³æ–¹</strong>ã€‚</li>
<li>å› æ­¤ï¼Œæ¯å½“ Gating ç½‘ç»œè¯•å›¾è¾“å‡ºä¸€ä¸ªå¾ˆå¤§çš„ Logitï¼ˆå¦‚ 50ï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±ä¼šäº§ç”Ÿä¸€ä¸ª<strong>å·¨å¤§çš„æƒ©ç½š</strong>ï¼Œè¿«ä½¿ Gating ç½‘ç»œæŠŠè¿™ä¸ªå€¼â€œæ‹‰å›â€åˆ°æ›´å°çš„ã€æ¥è¿‘ 0 çš„èŒƒå›´ï¼ˆæ¯”å¦‚ <code>[1.5, 0.5]</code>ï¼‰ã€‚</li>
</ul>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±åƒä¸€ä¸ªâ€œç¼°ç»³â€ï¼Œé˜²æ­¢ Gating ç½‘ç»œè¿™åŒ¹é©¬ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰åœ¨â€œå…¬å¹³â€çš„é“è·¯ä¸Šè·‘å¾—å¤ªå¿«è€Œâ€œå¤±æ§â€ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ€»ç»“ï¼šä¸‰é©¾é©¬è½¦çš„ååŒä½œæˆ˜</h3>
<p>MoE æ¨¡å‹çš„æœ€ç»ˆè®­ç»ƒï¼Œå°±æ˜¯ä¸€åœºç²¾å¦™çš„â€œå¤šç›®æ ‡ä¼˜åŒ–â€ã€‚å·¥ç¨‹å¸ˆéœ€è¦é€šè¿‡è¶…å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span> æ¥å¹³è¡¡è¿™ä¸‰é©¾é©¬è½¦ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>Total</mtext></msub><mo>=</mo><msub><mi>L</mi><mtext>main</mtext></msub><mo>+</mo><mi>Î±</mi><mo>â‹…</mo><msub><mi>L</mi><mtext>balance</mtext></msub><mo>+</mo><mi>Î²</mi><mo>â‹…</mo><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{Total}} = L_{\text{main}} + \alpha \cdot L_{\text{balance}} + \beta \cdot L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Total</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<ol>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (ä¸»æŸå¤±)</strong> ï¼šæ‹‰åŠ¨é©¬è½¦å‘ç€â€œæ­£ç¡®ç­”æ¡ˆâ€å‰è¿›ã€‚ï¼ˆ<strong>æ€§èƒ½</strong>ï¼‰</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (è´Ÿè½½å‡è¡¡)</strong> ï¼šç¡®ä¿æ‰€æœ‰æ‹‰è½¦çš„é©¬ï¼ˆä¸“å®¶ï¼‰éƒ½åœ¨å¹³å‡ç”¨åŠ›ï¼Œæ²¡æœ‰é©¬â€œæ‘¸é±¼â€ã€‚ï¼ˆ<strong>æ•ˆç‡</strong>ï¼‰</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>router-z</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{router-z}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">router-z</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (z-æŸå¤±)</strong> ï¼šç¡®ä¿ Gating ç½‘ç»œï¼ˆè½¦å¤«ï¼‰åœ¨æŒ¥é­å­ï¼ˆè·¯ç”±ï¼‰æ—¶ä¿æŒâ€œå†·é™â€å’Œâ€œå…‹åˆ¶â€ï¼Œé˜²æ­¢é©¬è½¦å¤±æ§ã€‚ï¼ˆ<strong>ç¨³å®š</strong>ï¼‰</li>
</ol>
<p>åªæœ‰å½“è¿™ä¸‰è‚¡åŠ›é‡è¾¾åˆ°å®Œç¾çš„å’Œè°ä¸å¹³è¡¡æ—¶ï¼ŒMoE è¿™ä¸ªåºå¤§ã€å¤æ‚è€Œåˆå¼ºå¤§çš„æ¨¡å‹ï¼Œæ‰èƒ½è¢«æˆåŠŸåœ°â€œé©¯æœâ€ï¼Œå‘æŒ¥å‡ºå®ƒçš„å…¨éƒ¨æ½œåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é€»è¾‘åˆ°ç›´è§‰ï¼Œæˆ‘çš„ç–‘éš¾é—®é¢˜æ–¹æ³•è®º]]></title>    <link>https://juejin.cn/post/7572010680896864296</link>    <guid>https://juejin.cn/post/7572010680896864296</guid>    <pubDate>2025-11-13T12:56:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680896864296" data-draft-id="7572020278387032098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é€»è¾‘åˆ°ç›´è§‰ï¼Œæˆ‘çš„ç–‘éš¾é—®é¢˜æ–¹æ³•è®º"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-13T12:56:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œèƒ–å¤§æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4195392102086967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é€»è¾‘åˆ°ç›´è§‰ï¼Œæˆ‘çš„ç–‘éš¾é—®é¢˜æ–¹æ³•è®º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392102086967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œèƒ–å¤§æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:56:31.000Z" title="Thu Nov 13 2025 12:56:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è§£å†³ç–‘éš¾é—®é¢˜æ˜¯ä¸€åœºå¿ƒæ™ºçš„é©¬æ‹‰æ¾ï¼Œæ˜¯ç§‘å­¦ã€è‰ºæœ¯ä¸ç»éªŒçš„ç»“åˆã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>ç¬”è€…ä»äº‹å‰ç«¯å¼€å‘å·²é€¾åå¹´ï¼Œå…¶ä¸­è¿‘åŠæ—¶é—´æ·±è€•äºå‰ç«¯åŸºç¡€è®¾æ–½å›¢é˜Ÿï¼Œä¸“æ³¨æŠ€æœ¯æ”¯æ’‘å·¥ä½œã€‚</p>
<p>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘å‘ç°æ— è®ºæ˜¯å›¢é˜Ÿå†…éƒ¨è¿˜æ˜¯ä¸šåŠ¡ä¾§çš„åŒå­¦ï¼Œåœ¨æ’æŸ¥å¤æ‚ã€ç–‘éš¾é—®é¢˜æ—¶ï¼Œå¸¸å¸¸é™·å…¥æ€ç»´æ··ä¹±ã€åœ¨é”™è¯¯çš„æ–¹å‘ä¸Šåå¤è¯•æ¢ï¼Œæœ€ç»ˆè€—è´¹å¤§é‡æ—¶é—´å´å¾’åŠ³æ— åŠŸçš„å›°å¢ƒã€‚</p>
<p>æ‰€å¹¸ï¼Œå› å²—ä½æ€§è´¨æ‰€è‡´ï¼Œæˆ‘äº²èº«ç»å†å¹¶è§£å†³è¿‡çš„å„ç±»â€œç–‘éš¾æ‚ç—‡â€å¯è°“æ•°ä¸èƒœæ•°ã€‚åŸºäºè¿™äº›å®è´µçš„å®æˆ˜ç»éªŒï¼Œæˆ‘ç³»ç»Ÿåœ°æ€»ç»“äº†ä¸€å¥—é—®é¢˜å®šä½ä¸è§£å†³çš„æ–¹æ³•è®ºã€‚æ—¨åœ¨å¸®åŠ©ä½ åœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶ï¼Œèƒ½å¿«é€Ÿç†æ¸…å¤´ç»ªã€æ‰¾å‡†æ–¹å‘ï¼Œä»å®¹ã€é«˜æ•ˆåœ°è§£å†³é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€å…±è¯†</h2>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¾¾æˆä¸€é¡¹æ ¸å¿ƒå…±è¯†ï¼šè§£å†³å¤æ‚é—®é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœºä¸¥å¯†çš„é€»è¾‘æ¨ç†ã€‚Â å”¯æœ‰åšå®ˆé€»è¾‘ï¼Œæ‰èƒ½è·³å‡ºæ€ç»´æ··ä¹±çš„æ³¥æ½­ï¼Œé¿å…åœ¨é”™è¯¯çš„æ–¹å‘ä¸Šåå¤æ‰“è½¬ã€‚</p>
<p>é€»è¾‘æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œä¸ºé¿å…æ­§ä¹‰ï¼Œæˆ‘é¦–å…ˆé˜æ˜è‡ªå·±å¯¹å®ƒçš„è®¤è¯†ä¸ç†è§£ã€‚ä»…ä»¥æ­¤ä¸ºå…±è¯†åŸºç¡€ï¼Œä½ éœ€è¦åœ¨é•¿æœŸåˆ†æé—®é¢˜çš„è¿‡ç¨‹ä¸­æ„å»ºã€è·µè¡Œè‡ªå·±çš„â€œé€»è¾‘â€ã€‚</p>
<ol>
<li>é€»è¾‘ï¼Œæ˜¯ä¸¥è°¨çš„å› æœé“¾
<ul>
<li>å®ƒè¦æ±‚æˆ‘ä»¬å°±åƒä¾¦æ¢ä¸€æ ·ï¼ŒåŸºäºçº¿ç´¢æå‡ºå‡è®¾ï¼Œå¹¶é€šè¿‡å®éªŒå¿«é€ŸéªŒè¯ï¼Œç»§è€Œç”¨ç¯ç¯ç›¸æ‰£ã€ç¡®å‡¿çš„è¯æ®ï¼Œæ„å»ºåšå®çš„æ¨ç†é“¾æ¡ï¼Œæœ€ç»ˆå¾—åˆ°â€œçœŸç›¸â€è¿™ä¸ªç­”æ¡ˆã€‚</li>
</ul>
</li>
<li>é€»è¾‘ï¼Œæ˜¯ç§‘å­¦çš„è®ºè¯æ–¹æ³•
<ul>
<li>å°±åƒæ§åˆ¶å˜é‡æ³•ï¼Œåœ¨å…¶ä»–æ¡ä»¶å®Œå…¨ä¸€è‡´æ—¶ï¼Œç»“æœçš„æ”¹å˜æ‰èƒ½å”¯ä¸€åœ°å½’å› äºé‚£ä¸ªè¢«æ”¹å˜çš„å˜é‡ã€‚è¿™æ˜¯æ„å»ºæœ‰æ•ˆé€»è¾‘çš„åŸºçŸ³ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€å®è·µ</h2>
<p>ä¸‹é¢è¿™å‡ æ¡ï¼Œå·²ç»åˆ»è¿›æˆ‘çš„DNAé‡Œï¼Œæˆäº†é‡åˆ°é—®é¢˜åçš„æ¡ä»¶åå°„ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªæ’æŸ¥æµç¨‹ï¼Œä½†ä¸å¿…æ­»æ¿ç…§æ¬ï¼Œå…³é”®æ˜¯å½¢æˆè¿™ç§æ€ç»´ä¹ æƒ¯ã€‚</p>
<ol>
<li>
<p>å…ˆå½»åº•ææ‡‚é—®é¢˜</p>
<ul>
<li>èŠ±è¶³å¤Ÿçš„æ—¶é—´ï¼ŒæŠŠé—®é¢˜çš„ç°è±¡ã€å‘ç”Ÿçš„åœºæ™¯ã€ç¨³å®šçš„å¤ç°æ­¥éª¤ææ¸…æ¥šåå†è¡ŒåŠ¨ã€‚</li>
<li>åƒä¸‡ä¸è¦çŠ¯ç»éªŒä¸»ä¹‰é”™è¯¯ï¼Œæ‰å¬ä¸€ä¸¤å¥æè¿°å°±è‡ªåŠ¨è”æƒ³ä¸ºæŸä¸ªå·²çŸ¥é—®é¢˜ï¼Œç›²ç›®ä¸‹æ‰‹ã€‚</li>
</ul>
</li>
<li>
<p>ä¾é ç›´è§‰å¿«é€ŸéªŒè¯</p>
<ul>
<li>æ²¡é”™ï¼Œè§£å†³é—®é¢˜æœ€å¿«çš„æ–¹å¼å°±æ˜¯ä¾é ç›´è§‰ã€‚ä¾é ä½ å¤šå¹´ç§¯ç´¯çš„ç»éªŒã€å¯¹ç³»ç»Ÿçš„ç†Ÿæ‚‰åº¦ã€‚è§‰å¾—â€œè¿™å„¿å¯èƒ½æœ‰é—®é¢˜â€æˆ–è€…â€œè·Ÿä¸Šæ¬¡é‚£ä¸ªBugå¾ˆåƒâ€ï¼Œå°±ç«‹åˆ»å»éªŒè¯æˆ–è€…ç›´æ¥ä¸Šè§£å†³æ–¹æ¡ˆã€‚è¿™æ˜¯æœ€æ•ˆç‡çš„åšæ³•ã€‚</li>
<li>ç»éªŒä¸»ä¹‰â€åœ¨è¿™é‡Œä¸Šå¤§åˆ†ï¼Œä½†åƒä¸‡ä¸è¦æ€ç»´å®šå¼ï¼Œå¦‚æœéªŒè¯ä¸‹æ¥ä¸å¯¹ï¼Œæœæ–­æ­¢æŸï¼Œä¸‹ä¸€æ­¥ã€‚</li>
</ul>
</li>
<li>
<p>æœæœçœ‹ï¼Œå¸¸æœ‰æ„å¤–ä¹‹å–œ</p>
<ul>
<li>ä½ é‡åˆ°çš„éš¾é¢˜ï¼Œå¾ˆå¯èƒ½å·²è¢«åƒä¸‡ç¨‹åºå‘˜è¸©è¿‡ä¸€éã€‚å»æœç´¢å¼•æ“ã€å»æŠ€æœ¯ç¤¾åŒºã€å»å®˜æ–¹Issuesé‡Œæ‰¾æ‰¾çœ‹ï¼Œè¯´ä¸å®šæœ‰æƒŠå–œã€‚</li>
<li>å·¥å…·æ–¹é¢æ¨èï¼šæœç´¢å¼•æ“ï¼ˆå¦‚å¿…åº”ã€AIé—®ç­”ï¼‰ã€æŠ€æœ¯ç¤¾åŒºï¼ˆå¦‚æ˜é‡‘ã€çŸ¥ä¹ï¼‰ã€å®˜æ–¹æ¸ é“ï¼ˆMDNã€GitHub Issuesï¼‰ã€‚è‡³äºç™¾åº¦ä¸CSDNâ€¦â€¦ççˆ±ç”Ÿå‘½ï¼Œå°½æ—©è¿œç¦»ã€‚</li>
</ul>
</li>
<li>
<p>å±•ç°çœŸæ­£çš„æŠ€æœ¯ï¼šåˆ ã€æ¯”ã€é—®</p>
<ul>
<li>åˆ ã€‚é€šè¿‡åˆ é™¤/æ³¨é‡Šä»£ç ï¼Œä¸æ–­ç¼©å°é—®é¢˜å‡ºç°çš„èŒƒå›´ï¼›æˆ–è€…é€šè¿‡ç¼–å†™æœ€ç®€Demoï¼Œæ‰¾åˆ°æœ€å°å¤ç°æ¡ä»¶ã€‚</li>
<li>æ¯”ã€‚å¯¹æ¯”æ­£å¸¸ä¸å¼‚å¸¸åœºæ™¯ï¼Œä»ç¯å¢ƒã€ç½‘ç»œã€è´¦å·ã€ä¾èµ–åˆ°ä»£ç é€»è¾‘é€ä¸€æ¯”è¾ƒï¼Œå·®å¼‚ç‚¹å¾€å¾€å°±æ˜¯ç ´æ¡ˆå…³é”®çº¿ç´¢ã€‚Â </li>
<li>é—®ã€‚æŠŠæ¸…æ™°çš„å¤ç°æ­¥éª¤å’Œå…³é”®ä»£ç å–‚ç»™AIï¼Œå®ƒæœ‰æ—¶èƒ½æä¾›æ„æƒ³ä¸åˆ°çš„åˆ†æè§†è§’ã€‚</li>
</ul>
</li>
<li>
<p>åšå¥½å¤ç›˜ï¼Œæ²‰æ·€ä¸ºç›´è§‰</p>
<ul>
<li>é—®é¢˜è§£å†³åï¼ŒåŠæ—¶è®°å½•æ€»ç»“ï¼Œæ„å»ºä¸ªäººæ¡ˆä¾‹åº“ã€‚è¿™æ­£æ˜¯ä½ æœªæ¥â€œç›´è§‰â€çš„æ¥æºã€‚</li>
<li>ã€Šç¨‹åºå‘˜çš„æ€ç»´ä¿®ç‚¼ã€‹æŠŠè¿™ç§ä¾é â€œç›´è§‰â€è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œä½œä¸ºåŒºåˆ†ä¸“å®¶ä¸å­¦å¾’çš„å…³é”®ã€‚</li>
<li>è®°å½•è‡³å°‘åº”åŒ…æ‹¬ï¼šé—®é¢˜ç°è±¡ã€åŸå› åˆ†æã€è§£å†³æ–¹æ¡ˆã€å¤ç›˜æ”¹è¿›ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-3">å››ã€æ„Ÿæ‚Ÿ</h2>
<ol>
<li>
<p>åŠæ—¶æ±‚åŠ©</p>
<ul>
<li>
<p>æ¯ä¸ªäººéƒ½æœ‰è‡ªèº«å±€é™æ€§ï¼Œä½ ä¸å¯èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ã€‚åŠæ—¶å‘åŒäº‹æˆ–æ›´èµ„æ·±çš„äººæ±‚åŠ©ï¼Œæ²¡ä»€ä¹ˆéš¾ä¸ºæƒ…çš„ã€‚</p>
</li>
<li>
<p>å¯»æ±‚å¸®åŠ©å‰åšå¥½åŠŸè¯¾ï¼Œå¹¶ä¸ä¼šé™ä½åˆ«äººå¯¹ä½ çš„è¯„ä»·</p>
</li>
<li>
<p>åŠŸè¯¾çš„å†…å®¹è‡³å°‘åŒ…å«ï¼Œé—®é¢˜çš„ç°è±¡ã€è‡ªå·±å·²ç»åšçš„åˆ†æçŒœæµ‹ä»¥åŠå°è¯•ï¼Œæœ€å¥½æœ‰ä¸ªæ–‡æ¡£</p>
</li>
</ul>
</li>
<li>
<p>æ²Ÿé€šä¸å•†åŠ¡ï¼Œä¹Ÿæ˜¯è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½éœ€è¦ç”¨æŠ€æœ¯ç¡¬è§£ã€‚æœ‰äº›é—®é¢˜åœ¨æŠ€æœ¯å±‚é¢è§£å†³æˆæœ¬æé«˜ï¼Œæˆ–è€…æœ¬èº«å°±æ˜¯ç”±æ²Ÿé€šè¯¯è§£ã€å•†åŠ¡é™åˆ¶å¼•èµ·çš„ã€‚æ­¤æ—¶ï¼Œæ¨åŠ¨æ²Ÿé€šæˆ–è°ƒæ•´éœ€æ±‚ï¼Œå¾€å¾€æ˜¯æ›´ä¼˜è§£ã€‚</li>
</ul>
</li>
<li>
<p>æœ€åï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½åªæ˜¯æŠ€å·§ï¼Œé«˜æ•ˆã€æ­£ç¡®çš„è§£å†³é—®é¢˜æ ¹æœ¬ä¸Šè¿˜ä¾èµ–æŠ€æœ¯å’Œç»éªŒçš„é•¿æœŸç§¯ç´¯ã€‚ä¸å›å…±å‹‰ï¼ŒåŠ æ²¹ï¼</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vueï¼ˆé«˜çº§ç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7571972751529017380</link>    <guid>https://juejin.cn/post/7571972751529017380</guid>    <pubDate>2025-11-13T13:00:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751529017380" data-draft-id="7571815573933801535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vueï¼ˆé«˜çº§ç¯‡ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2025-11-13T13:00:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹Vueï¼ˆé«˜çº§ç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T13:00:21.000Z" title="Thu Nov 13 2025 13:00:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€è¯´ä¸€ä¸‹ Vue.js çš„å“åº”å¼åŸç†</h2>
<h3 data-id="heading-1">1.1 Vue2 å“åº”å¼åŸç†</h3>
<p>æ ¸å¿ƒåŸç†å°±æ˜¯é€šè¿‡ <code>Object.defineProperty</code> å¯¹å¯¹è±¡å±æ€§è¿›è¡ŒåŠ«æŒï¼Œé‡æ–°å®šä¹‰å¯¹è±¡çš„ <code>getter</code> å’Œ <code>setter</code>ï¼Œåœ¨ <code>getter</code> å–å€¼æ—¶æ”¶é›†ä¾èµ–ï¼Œåœ¨ <code>setter</code> ä¿®æ”¹å€¼æ—¶è§¦å‘ä¾èµ–æ›´æ–°ï¼Œæ›´æ–°é¡µé¢ã€‚</p>
<p>Vue2 å¯¹æ•°ç»„å’Œå¯¹è±¡åšäº†ä¸¤ç§ä¸åŒæ–¹å¼çš„å¤„ç†ã€‚</p>
<p><strong>ç›‘å¬å¯¹è±¡å˜åŒ–ï¼š</strong></p>
<p>é’ˆå¯¹å¯¹è±¡æ¥è¯´ï¼ŒVue ä¼šå¾ªç¯éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œç”¨ defineReactive é‡æ–°å®šä¹‰ <code>getter</code> å’Œ <code>setter</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">target,key,value</span>){
    <span class="hljs-title function_">observer</span>(value);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target,key,{ Â¸v
        <span class="hljs-title function_">get</span>(<span class="hljs-params"/>){
            <span class="hljs-comment">// ... æ”¶é›†ä¾èµ–é€»è¾‘</span>
            <span class="hljs-keyword">return</span> value;
        },
        <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>){
            <span class="hljs-keyword">if</span> (value !== newValue) {
                value = newValue;
                <span class="hljs-title function_">observer</span>(newValue) <span class="hljs-comment">// æŠŠæ–°è®¾ç½®çš„å€¼åŒ…è£…æˆå“åº”å¼</span>
            }
            <span class="hljs-comment">// ...è§¦å‘ä¾èµ–æ›´æ–°é€»è¾‘</span>
        }
    })
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">observer</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'object'</span>){
        <span class="hljs-keyword">return</span> data
    }
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> data){
        <span class="hljs-title function_">defineReactive</span>(data,key,data[key]);
    }
}
</code></pre>
<p><strong>ç›‘å¬æ•°ç»„å˜åŒ–ï¼š</strong></p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ•°ç»„å…¶å®ä¹Ÿæ˜¯å¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥ç”¨ <code>Object.defineProperty</code> åŠ«æŒæ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œä½†å¦‚æœæ•°ç»„æœ‰100ä¸‡é¡¹ï¼Œé‚£å°±è¦è°ƒç”¨ <code>Object.defineProperty</code> ä¸€ç™¾ä¸‡æ¬¡ï¼Œè¿™æ ·çš„è¯æ€§èƒ½å¤ªä½äº†ã€‚é‰´äºå¹³æ—¶æˆ‘ä»¬æ“ä½œæ•°ç»„å¤§éƒ½æ˜¯é‡‡ç”¨æ•°ç»„æä¾›çš„åŸç”Ÿæ–¹æ³•ï¼Œäºæ˜¯ Vue å¯¹æ•°ç»„é‡å†™åŸå‹é“¾ï¼Œåœ¨è°ƒç”¨7ä¸ªèƒ½æ”¹å˜è‡ªèº«çš„åŸç”Ÿæ–¹æ³•(<code>push</code>ï¼Œ<code>pop</code>ï¼Œ<code>shift</code>ï¼Œ<code>unshift</code>ï¼Œ<code>splice</code>ï¼Œ<code>sort</code>ï¼Œ<code>reverse</code>)æ—¶ï¼Œé€šçŸ¥é¡µé¢è¿›è¡Œåˆ·æ–°ï¼Œå…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…ˆæ‹¿åˆ°æ•°ç»„çš„åŸå‹</span>
<span class="hljs-keyword">const</span> oldArrayProtoMethods = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
<span class="hljs-comment">// ç”¨Object.createåˆ›å»ºä¸€ä¸ªä»¥oldArrayProtoMethodsä¸ºåŸå‹çš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> arrayMethods = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(oldArrayProtoMethods)
<span class="hljs-keyword">const</span> methods = [
    <span class="hljs-string">'push'</span>,
    <span class="hljs-string">'pop'</span>,
    <span class="hljs-string">'shift'</span>,
    <span class="hljs-string">'unshift'</span>,
    <span class="hljs-string">'sort'</span>,
    <span class="hljs-string">'reverse'</span>,
    <span class="hljs-string">'splice'</span>
]
methods.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">method</span> =&gt;</span> {
    <span class="hljs-comment">// ç»™arrayMethodså®šä¹‰7ä¸ªæ–¹æ³•</span>
    arrayMethods[method] = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>){
        <span class="hljs-comment">// å…ˆæ‰¾åˆ°æ•°ç»„å¯¹åº”çš„åŸç”Ÿæ–¹æ³•è¿›è¡Œè°ƒç”¨</span>
        <span class="hljs-keyword">const</span> result = oldArrayProtoMethods[method].<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
        <span class="hljs-comment">// å£°æ˜insertedï¼Œç”¨æ¥ä¿å­˜æ•°ç»„æ–°å¢çš„æ•°æ®</span>
        <span class="hljs-keyword">let</span> inserted
        <span class="hljs-comment">// __ob__æ˜¯Observerç±»å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œdataä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªObserverç±»çš„å®ä¾‹</span>
        <span class="hljs-keyword">const</span> ob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">__ob__</span>
        <span class="hljs-keyword">switch</span>(method) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'push'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'unshift'</span>:
                inserted = args
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'splice'</span>:
                inserted = args.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>)
            <span class="hljs-attr">default</span>:
                <span class="hljs-keyword">break</span>
        }
        <span class="hljs-comment">// æ¯”å¦‚æœ‰æ–°å¢çš„æ•°æ®ï¼Œæ–°å¢æ•°æ®ä¹Ÿè¦è¢«å®šä¹‰ä¸ºå“åº”å¼</span>
        <span class="hljs-keyword">if</span>(inserted) ob.<span class="hljs-title function_">observeArray</span>(inserted)
        <span class="hljs-comment">// é€šçŸ¥é¡µé¢æ›´æ–°</span>
        ob.<span class="hljs-property">dep</span>.<span class="hljs-title function_">notify</span>()
        <span class="hljs-keyword">return</span> result
    }
})
</code></pre>
<p><strong>Object.definePropertyçš„ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>æ— æ³•ç›‘å¬æ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦é€šè¿‡ <code>$set</code>ã€<code>$delete</code> å®ç°ã€‚</li>
<li>ç›‘æµ‹æ•°ç»„çš„ç´¢å¼•æ€§èƒ½å¤ªä½ï¼Œæ•…è€Œç›´æ¥é€šè¿‡æ•°ç»„ç´¢å¼•æ”¹å€¼æ— æ³•è§¦å‘å“åº”å¼ã€‚</li>
<li>åˆå§‹åŒ–æ—¶éœ€è¦ä¸€æ¬¡æ€§é€’å½’è°ƒç”¨ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li>
</ol>
<h3 data-id="heading-2">1.2 Vue3 çš„å“åº”å¼æ”¹è¿›</h3>
<p>Vue3 é‡‡ç”¨ <code>Proxy + Reflect</code> é…åˆå®ç°å“åº”å¼ã€‚èƒ½è§£å†³ä¸Šè¿° <code>Object.defineProperty</code> çš„æ‰€æœ‰ç¼ºé™·ï¼Œå”¯ä¸€ç¼ºç‚¹å°±æ˜¯å…¼å®¹æ€§æ²¡æœ‰ <code>Object.defineProperty</code> å¥½ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target[key] === <span class="hljs-string">"object"</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target[key], handler);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key);
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value</span>) {
    <span class="hljs-keyword">let</span> oldValue = target[key];
    <span class="hljs-keyword">if</span> (oldValue !== value) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
};
<span class="hljs-keyword">let</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, handler);
</code></pre>
<h2 data-id="heading-3">2ã€ä»‹ç»ä¸€ä¸‹ Vue ä¸­çš„ diff ç®—æ³•ï¼Ÿ</h2>
<p>Vue çš„ diff ç®—æ³•æ˜¯å¹³çº§æ¯”è¾ƒï¼Œä¸è€ƒè™‘è·¨çº§æ¯”è¾ƒçš„æƒ…å†µã€‚å†…éƒ¨é‡‡ç”¨<strong>æ·±åº¦é€’å½’çš„æ–¹å¼ + åŒæŒ‡é’ˆ</strong>çš„æ–¹å¼è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p><strong>æ¯”è¾ƒè¿‡ç¨‹:</strong></p>
<ol>
<li>å…ˆæ¯”è¾ƒæ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹ã€‚</li>
<li>ç›¸åŒèŠ‚ç‚¹æ¯”è¾ƒå±æ€§,å¹¶å¤ç”¨è€èŠ‚ç‚¹ã€‚</li>
<li>æ¯”è¾ƒå„¿å­èŠ‚ç‚¹ï¼Œè€ƒè™‘è€èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹å„¿å­çš„æƒ…å†µã€‚</li>
<li>ä¼˜åŒ–æ¯”è¾ƒï¼šå¤´å¤´ã€å°¾å°¾ã€å¤´å°¾ã€å°¾å¤´ã€‚</li>
<li>æ¯”å¯¹æŸ¥æ‰¾è¿›è¡Œå¤ç”¨ã€‚</li>
</ol>
<p>Vue3 åœ¨è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹çš„åŸºç¡€ä¸Šå¢åŠ äº†<strong>æœ€é•¿é€’å¢å­åºåˆ—</strong>å®ç°diffç®—æ³•ã€‚</p>
<ul>
<li>æ‰¾å‡ºä¸éœ€è¦ç§»åŠ¨çš„ç°æœ‰èŠ‚ç‚¹ã€‚</li>
<li>åªå¯¹éœ€è¦ç§»åŠ¨çš„èŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚</li>
<li>æœ€å°åŒ– DOM æ“ä½œæ¬¡æ•°ã€‚</li>
</ul>
<h2 data-id="heading-4">3ã€Vue çš„æ¨¡æ¿ç¼–è¯‘åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Vue ä¸­çš„æ¨¡æ¿ç¼–è¯‘å°±æ˜¯æŠŠæˆ‘ä»¬å†™çš„ <code>template</code> è½¬æ¢ä¸ºæ¸²æŸ“å‡½æ•°(<code>render function</code>) çš„è¿‡ç¨‹ï¼Œå®ƒä¸»è¦ç»å†3ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>è§£æï¼ˆParseï¼‰</strong>ï¼šå°† template æ¨¡æ¿è½¬æ¢æˆ ast æŠ½è±¡è¯­æ³•æ ‘ã€‚</li>
<li><strong>ä¼˜åŒ–ï¼ˆOptimizeï¼‰</strong>ï¼šå¯¹é™æ€èŠ‚ç‚¹åšé™æ€æ ‡è®°ï¼Œå‡å°‘ diff è¿‡ç¨‹ä¸­çš„æ¯”å¯¹ã€‚</li>
<li><strong>ç”Ÿæˆï¼ˆGenerateï¼‰</strong>ï¼šé‡æ–°ç”Ÿæˆä»£ç ï¼Œå°† ast æŠ½è±¡è¯­æ³•æ•°è½¬åŒ–æˆå¯æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°ä»£ç ã€‚</li>
</ol>
<h3 data-id="heading-5">3.1 è§£æé˜¶æ®µ</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>ç”¨ HTML è§£æå™¨å°†æ¨¡æ¿è§£æä¸º ASTã€‚</li>
<li>ASTä¸­ç”¨ js å¯¹è±¡æè¿°æ¨¡æ¿ï¼Œé‡Œé¢åŒ…å«äº†å…ƒç´ ç±»å‹ã€å±æ€§ã€å­èŠ‚ç‚¹ç­‰ä¿¡æ¯ã€‚</li>
<li>è§£ææŒ‡ä»¤ï¼ˆ<code>v-forã€v-if</code>ï¼‰å’Œäº‹ä»¶ï¼ˆ<code>@click</code>ï¼‰ã€æ’å€¼è¡¨è¾¾å¼<code>{{}}</code>ç­‰ vue è¯­æ³•ã€‚</li>
</ul>
<h3 data-id="heading-6">3.2 ä¼˜åŒ–é˜¶æ®µ</h3>
<ul>
<li>éå†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ astï¼Œæ ‡è®°é™æ€èŠ‚ç‚¹ï¼Œæ¯”å¦‚ç”¨ <code>v-once</code> çš„èŠ‚ç‚¹ï¼Œä»¥åŠæ²¡æœ‰ç”¨åˆ°å“åº”å¼æ•°æ®çš„èŠ‚ç‚¹ã€‚</li>
<li>æ ‡è®°é™æ€æ ¹èŠ‚ç‚¹ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li>
</ul>
<h3 data-id="heading-7">3.3 ä»£ç ç”Ÿæˆé˜¶æ®µ</h3>
<p>vue2 è§£æç»“æœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">with</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_c</span>(<span class="hljs-string">'div'</span>, {
      <span class="hljs-attr">attrs</span>: {
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"app"</span>
      }
    }, [<span class="hljs-title function_">_c</span>(<span class="hljs-string">'p'</span>, [<span class="hljs-title function_">_v</span>(<span class="hljs-title function_">_s</span>(message))])])
  }
}
</code></pre>
<ul>
<li><code>_c</code>: æ˜¯ createElement çš„åˆ«åï¼Œç”¨äºåˆ›å»º VNodeã€‚</li>
<li><code>_v</code>: åˆ›å»ºæ–‡æœ¬ VNodeã€‚</li>
<li><code>_s</code>: æ˜¯ toString çš„åˆ«åï¼Œç”¨äºå°†å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>vue3 è§£æç»“æœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { toDisplayString <span class="hljs-keyword">as</span> _toDisplayString, createElementVNode <span class="hljs-keyword">as</span> _createElementVNode, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"div"</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">"app"</span> }, [
    <span class="hljs-title function_">_createElementVNode</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-title function_">_toDisplayString</span>(_ctx.<span class="hljs-property">message</span>), <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>)
  ]))
}
</code></pre>
<ul>
<li><code>_openBlock</code>: å¼€å¯ä¸€ä¸ª"block"åŒºåŸŸï¼Œç”¨äºæ”¶é›†åŠ¨æ€å­èŠ‚ç‚¹ã€‚</li>
<li><code>_createElementBlock</code>: åˆ›å»ºä¸€ä¸ªå—çº§è™šæ‹Ÿ DOM èŠ‚ç‚¹ã€‚</li>
<li><code>_createElementVNode</code>: åˆ›å»ºä¸€ä¸ªæ™®é€šè™šæ‹Ÿ DOM èŠ‚ç‚¹ã€‚</li>
<li><code>_toDisplayString</code>: å°†å“åº”å¼æ•°æ® _ctx.message è½¬æ¢ä¸ºæ˜¾ç¤ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…å¤„ç† null/undefined ç­‰å€¼ï¼Œç¡®ä¿å®ƒä»¬èƒ½æ­£ç¡®æ¸²æŸ“ä¸ºç©ºç™½å­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>vue2åœ¨çº¿ç¼–è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftemplate-explorer.vuejs.org%2F" target="_blank" title="https://template-explorer.vuejs.org/" ref="nofollow noopener noreferrer">template-explorer.vuejs.org/</a>ã€‚</p>
<p>vue3åœ¨çº¿ç¼–è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.template-explorer.vuejs.org%2F" target="_blank" title="https://v2.template-explorer.vuejs.org/" ref="nofollow noopener noreferrer">v2.template-explorer.vuejs.org/</a>ã€‚</p>
<p><strong>è¿è¡Œæ—¶+ç¼–è¯‘(runtime-compiler) vs ä»…è¿è¡Œæ—¶(runtime-only)ï¼š</strong></p>
<ol>
<li>å®Œæ•´ç‰ˆï¼ˆè¿è¡Œæ—¶+ç¼–è¯‘ï¼‰ï¼š
<ul>
<li>åŒ…å«ç¼–è¯‘æ¨¡å—ï¼Œå¯ä»¥å†™ template æ¨¡ç‰ˆã€‚</li>
<li>ä½“ç§¯è¾ƒå¤§ï¼ˆï½30kbï¼‰ã€‚</li>
</ul>
</li>
<li>ä»…è¿è¡Œæ—¶ç‰ˆæœ¬
<ul>
<li>éœ€è¦åœ¨æ‰“åŒ…æ—¶ä½¿ç”¨ <code>vue-loader</code> è¿›è¡Œç¼–è¯‘ã€‚</li>
<li>ä½“ç§¯è¾ƒå°ï¼ˆï½20kbï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p>å¹³æ—¶å¼€å‘é¡¹ç›®æ¨èä½¿ç”¨ä»…è¿è¡Œæ—¶(runtime-only)ç‰ˆæœ¬ã€‚</p>
<p><strong>ç¼–è¯‘åçš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>è™šæ‹ŸDOM</strong>ï¼šæ¸²æŸ“å‡½æ•°ç”Ÿæˆçš„æ˜¯è™šæ‹ŸDOMèŠ‚ç‚¹(VNode)ã€‚</li>
<li><strong>å“åº”å¼ç»‘å®š</strong>ï¼šæ¸²æŸ“å‡½æ•°ä¸­çš„å˜é‡ä¼šè‡ªåŠ¨å»ºç«‹ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡é™æ€èŠ‚ç‚¹æ ‡è®°å‡å°‘ä¸å¿…è¦çš„æ›´æ–°ã€‚</li>
</ol>
<h2 data-id="heading-8">4ã€v-show å’Œ v-if çš„åŸç†</h2>
<p>ç®€å•æ¥è¯´ï¼Œ<code>v-if</code> å†…éƒ¨æ˜¯é€šè¿‡ä¸€ä¸ªä¸‰å…ƒè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œè€Œ <code>v-show</code> åˆ™æ˜¯é€šè¿‡æ§åˆ¶ DOM å…ƒç´ çš„ <code>display</code> å±æ€§æ¥å®ç°çš„ã€‚</p>
<p>v-if æºç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">genIfConditions</span> (
    <span class="hljs-attr">conditions</span>: <span class="hljs-title class_">ASTIfConditions</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-title class_">CodegenState</span>,
    altGen?: <span class="hljs-title class_">Function</span>,
    altEmpty?: string
    ): string {
    <span class="hljs-keyword">if</span> (!conditions.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span> altEmpty || <span class="hljs-string">'_e()'</span>
    }
    <span class="hljs-keyword">const</span> condition = conditions.<span class="hljs-title function_">shift</span>()
    <span class="hljs-keyword">if</span> (condition.<span class="hljs-property">exp</span>) {   <span class="hljs-comment">// å¦‚æœæœ‰è¡¨è¾¾å¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">`(<span class="hljs-subst">${condition.exp}</span>)?<span class="hljs-subst">${ // å°†è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶æ‹¼æ¥æˆå…ƒç´ 
        genTernaryExp(condition.block)
        }</span>:<span class="hljs-subst">${
        genIfConditions(conditions, state, altGen, altEmpty)
        }</span>`</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${genTernaryExp(condition.block)}</span>`</span> <span class="hljs-comment">// æ²¡æœ‰è¡¨è¾¾å¼ç›´æ¥ç”Ÿæˆå…ƒç´  åƒv-else</span>
    }

    <span class="hljs-comment">// v-if with v-once should generate code like (a)?_m(0):_m(1)</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">genTernaryExp</span> (el) {
        <span class="hljs-keyword">return</span> altGen
        ? <span class="hljs-title function_">altGen</span>(el, state)
        : el.<span class="hljs-property">once</span>
            ? <span class="hljs-title function_">genOnce</span>(el, state)
            : <span class="hljs-title function_">genElement</span>(el, state)
    }
}
</code></pre>
<p>v-show æºç ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
    bind (<span class="hljs-attr">el</span>: any, { value }: <span class="hljs-title class_">VNodeDirective</span>, <span class="hljs-attr">vnode</span>: <span class="hljs-title class_">VNodeWithData</span>) {
    <span class="hljs-keyword">const</span> originalDisplay = el.<span class="hljs-property">__vOriginalDisplay</span> =
        el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">'none'</span> ? <span class="hljs-string">''</span> : el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> <span class="hljs-comment">// è·å–åŸå§‹æ˜¾ç¤ºå€¼</span>
        el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = value ? originalDisplay : <span class="hljs-string">'none'</span> <span class="hljs-comment">// æ ¹æ®å±æ€§æ§åˆ¶æ˜¾ç¤ºæˆ–è€…éšè—</span>
    }  
} 
</code></pre>
<h2 data-id="heading-9">5ã€v-if å’Œ v-for  å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>vue2 ä¸­ <code>v-for</code> çš„ä¼˜å…ˆçº§æ¯” <code>v-if</code> é«˜ï¼Œå®ƒä»¬ä½œç”¨äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šä¼šå¯¼è‡´å…ˆå¾ªç¯åå¯¹æ¯ä¸€é¡¹è¿›è¡Œåˆ¤æ–­ï¼Œæµªè´¹æ€§èƒ½ã€‚</li>
<li>vue3 ä¸­ <code>v-if</code> çš„ä¼˜å…ˆçº§æ¯” <code>v-for</code> é«˜ï¼Œè¿™å°±ä¼šå¯¼è‡´ <code>v-if</code> ä¸­çš„æ¡ä»¶æ— æ³•è®¿é—® <code>v-for</code> ä½œç”¨åŸŸåä¸­å®šä¹‰çš„å˜é‡åˆ«åã€‚</li>
</ul>
<pre><code class="hljs language-vue" lang="vue">&lt;li v-for="item in arr" v-if="item.visible"&gt;
  {{ item}}
&lt;/li&gt;
</code></pre>
<p>ä»¥ä¸Šä»£ç åœ¨ <code>vue3</code> çš„ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { renderList <span class="hljs-keyword">as</span> _renderList, <span class="hljs-title class_">Fragment</span> <span class="hljs-keyword">as</span> _Fragment, openBlock <span class="hljs-keyword">as</span> _openBlock, createElementBlock <span class="hljs-keyword">as</span> _createElementBlock, toDisplayString <span class="hljs-keyword">as</span> _toDisplayString, createCommentVNode <span class="hljs-keyword">as</span> _createCommentVNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache, $props, $setup, $data, $options</span>) {
  <span class="hljs-keyword">return</span> (_ctx.<span class="hljs-property">item</span>.<span class="hljs-property">visible</span>)
    ? (<span class="hljs-title function_">_openBlock</span>(<span class="hljs-literal">true</span>), <span class="hljs-title function_">_createElementBlock</span>(_Fragment, { <span class="hljs-attr">key</span>: <span class="hljs-number">0</span> }, <span class="hljs-title function_">_renderList</span>(_ctx.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> (<span class="hljs-title function_">_openBlock</span>(), <span class="hljs-title function_">_createElementBlock</span>(<span class="hljs-string">"li"</span>, <span class="hljs-literal">null</span>, <span class="hljs-title function_">_toDisplayString</span>(item), <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>))
      }), <span class="hljs-number">256</span> <span class="hljs-comment">/* UNKEYED_FRAGMENT */</span>))
    : <span class="hljs-title function_">_createCommentVNode</span>(<span class="hljs-string">"v-if"</span>, <span class="hljs-literal">true</span>)
}
</code></pre>
<p>å¯ä»¥çœ‹å‡º <code>vue3</code> åœ¨ç¼–è¯‘æ—¶ä¼šå…ˆåˆ¤æ–­ <code>v-if</code>ï¼Œç„¶åå†èµ° <code>v-for</code> çš„å¾ªç¯ï¼Œæ‰€ä»¥åœ¨ <code>v-if</code> ä¸­è‡ªç„¶å°±æ— æ³•è®¿é—® <code>v-for</code> ä½œç”¨åŸŸåä¸­å®šä¹‰çš„å˜é‡åˆ«åã€‚</p>
<p>è¿™æ ·çš„å†™æ³•åœ¨ vue3 ä¸­ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šâš ï¸ï¼Œ<code>[Vue warn]: Property "item" was accessed during render but is not defined on instance</code>ï¼Œå¯¼è‡´æ¸²æŸ“å¤±è´¥ã€‚</p>
<p>ä»¥ä¸Šä»£ç åœ¨ <code>vue2</code> è¿˜ä¸èƒ½ç›´æ¥ç¼–è¯‘ï¼Œå› ä¸º <code>vue2</code> çš„ç»„ä»¶éœ€è¦ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¤–å±‚åŠ ä¸€ä¸ª <code>div</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;div&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in arr"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.visible"</span>&gt;</span>
    {{ item}}
  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<p>å…¶ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">with</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_c</span>(<span class="hljs-string">'div'</span>, <span class="hljs-title function_">_l</span>((arr), <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {
      <span class="hljs-keyword">return</span> (item.<span class="hljs-property">visible</span>) ? <span class="hljs-title function_">_c</span>(<span class="hljs-string">'li'</span>, [<span class="hljs-title function_">_v</span>(<span class="hljs-string">"\n    "</span> + <span class="hljs-title function_">_s</span>(item) + <span class="hljs-string">"\n  "</span>)]) :
        <span class="hljs-title function_">_e</span>()
    }), <span class="hljs-number">0</span>)
  }
}
</code></pre>
<p>å¾ˆæ˜æ˜¾æ˜¯å…ˆå¾ªç¯ <code>arr</code>ï¼Œç„¶åæ¯ä¸€é¡¹å†ç”¨ <code>item.visible</code> å»åˆ¤æ–­çš„ï¼Œä¹Ÿå°è¯äº†åœ¨ <code>vue2</code> ä¸­ï¼Œ <code>v-for</code> çš„ä¼˜å…ˆçº§é«˜äº <code>v-if</code>ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ä¸ç®¡æ˜¯ <code>vue2</code> è¿˜æ˜¯ <code>vue3</code>ï¼Œéƒ½ä¸æ¨èåŒæ—¶ä½¿ç”¨ <code>v-if</code> å’Œ <code>v-for</code>ï¼Œæ›´å¥½çš„æ–¹æ¡ˆæ˜¯é‡‡ç”¨è®¡ç®—å±æ€§ï¼Œæˆ–è€…åœ¨å¤–å±‚å†åŒ…è£¹ä¸€ä¸ªå®¹å™¨å…ƒç´ ï¼Œå°† <code>v-if</code> ä½œç”¨åœ¨å®¹å™¨å…ƒç´ ä¸Šã€‚</p>
</blockquote>
<h2 data-id="heading-10">6ã€nextTick çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-11">6.1 Vue2 çš„ nextTickï¼š</h3>
<ul>
<li>é¦–é€‰å¾®ä»»åŠ¡ï¼š
<ul>
<li><strong>Promise.resolve().then(flushCallbacks)</strong>ï¼šæœ€å¸¸è§ï¼Œä½¿ç”¨ Promise åˆ›å»ºå¾®ä»»åŠ¡ã€‚</li>
<li><strong>MutationObserver</strong>ï¼šå¦‚æœ Promise ä¸å¯ç”¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œä¿®æ”¹å…¶å†…å®¹è§¦å‘ MutationObserver çš„è§‚å¯Ÿå™¨å›è°ƒã€‚</li>
</ul>
</li>
<li>å›é€€å®ä»»åŠ¡ï¼š
<ul>
<li><strong>setImmediate</strong>ï¼šå¦‚æœç¯å¢ƒæ”¯æŒ setImmediateï¼Œæ¯”å¦‚ node ç¯å¢ƒï¼Œåˆ™ä¼šä¼˜å…ˆä½¿ç”¨ setImmediate ã€‚</li>
<li><strong>setTimeout(flushCallbacks, 0)</strong>ï¼šæœ€åä½¿ç”¨å®šæ—¶å™¨ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œä½“ç°äº†<strong>ä¼˜é›…é™çº§</strong>çš„æ€æƒ³ã€‚</p>
<h3 data-id="heading-12">6.2 Vue3 çš„ nextTickï¼š</h3>
<ul>
<li>ç”±äº Vue3 ä¸å†è€ƒè™‘ promise çš„å…¼å®¹æ€§ï¼Œæ‰€ä»¥ nextTick çš„å®ç°åŸç†å°±æ˜¯ promise.then æ–¹æ³•ã€‚</li>
</ul>
<h2 data-id="heading-13">7ã€Vue.set æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„?</h2>
<p><strong>Vue2çš„å®ç°</strong>ï¼šåœ¨ Vue 2 ä¸­ï¼ŒVue.set çš„å®ç°ä¸»è¦ä½äº <code>src/core/observer/index.js</code> ä¸­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">set</span> (<span class="hljs-attr">target</span>: <span class="hljs-title class_">Array</span> | <span class="hljs-title class_">Object</span>, <span class="hljs-attr">key</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">val</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">any</span> {
    <span class="hljs-comment">// 1.å¦‚æœæ˜¯æ•°ç»„ Vue.set(array,1,100); è°ƒç”¨æˆ‘ä»¬é‡å†™çš„spliceæ–¹æ³• (è¿™æ ·å¯ä»¥æ›´æ–°è§†å›¾)</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(target) &amp;&amp; <span class="hljs-title function_">isValidArrayIndex</span>(key)) {
        target.<span class="hljs-property">length</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(target.<span class="hljs-property">length</span>, key)
        target.<span class="hljs-title function_">splice</span>(key, <span class="hljs-number">1</span>, val)
        <span class="hljs-keyword">return</span> val
    }
    <span class="hljs-comment">// 2.å¦‚æœæ˜¯å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œåˆ™ç›´æ¥æ·»åŠ å³å¯</span>
    <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> target &amp;&amp; !(key <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)) {
        target[key] = val
        <span class="hljs-keyword">return</span> val
    }
    <span class="hljs-keyword">const</span> ob = (<span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span>).<span class="hljs-property">__ob__</span>
    <span class="hljs-comment">// 3.å¦‚æœæ˜¯å“åº”å¼çš„ä¹Ÿä¸éœ€è¦å°†å…¶å®šä¹‰æˆå“åº”å¼å±æ€§</span>
    <span class="hljs-keyword">if</span> (!ob) {
        target[key] = val
        <span class="hljs-keyword">return</span> val
    }
    <span class="hljs-comment">// 4.å°†å±æ€§å®šä¹‰æˆå“åº”å¼çš„</span>
    <span class="hljs-title function_">defineReactive</span>(ob.<span class="hljs-property">value</span>, key, val)
    <span class="hljs-comment">// 5.é€šçŸ¥è§†å›¾æ›´æ–°</span>
    ob.<span class="hljs-property">dep</span>.<span class="hljs-title function_">notify</span>()
    <span class="hljs-keyword">return</span> val
}
</code></pre>
<p>Vue3 ä¸­ set æ–¹æ³•å·²ç»è¢«ç§»é™¤ï¼Œå› ä¸º proxy å¤©ç„¶å¼¥è¡¥ vue2 å“åº”å¼çš„ç¼ºé™·ã€‚</p>
<h2 data-id="heading-14">8ã€Vue.use æ˜¯å¹²ä»€ä¹ˆçš„?åŸç†æ˜¯ä»€ä¹ˆ?</h2>
<p>Vue.use æ˜¯ç”¨æ¥ä½¿ç”¨æ’ä»¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ’ä»¶ä¸­æ‰©å±•å…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ã€åŸå‹æ–¹æ³•ç­‰ã€‚</p>
<p>Vue.use æºç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">use</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">plugin: <span class="hljs-built_in">Function</span> | <span class="hljs-built_in">Object</span></span>) {
    <span class="hljs-comment">// æ’ä»¶ä¸èƒ½é‡å¤çš„åŠ è½½</span>
    <span class="hljs-keyword">const</span> installedPlugins = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_installedPlugins</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_installedPlugins</span> = []))
    <span class="hljs-keyword">if</span> (installedPlugins.<span class="hljs-title function_">indexOf</span>(plugin) &gt; -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
    }
    <span class="hljs-comment">// additional parameters</span>
    <span class="hljs-keyword">const</span> args = <span class="hljs-title function_">toArray</span>(<span class="hljs-variable language_">arguments</span>, <span class="hljs-number">1</span>)
    args.<span class="hljs-title function_">unshift</span>(<span class="hljs-variable language_">this</span>)  <span class="hljs-comment">// installæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueçš„æ„é€ å‡½æ•°ï¼Œå…¶ä»–å‚æ•°æ˜¯Vue.useä¸­é™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°çš„å…¶ä»–å‚æ•°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin.<span class="hljs-property">install</span> === <span class="hljs-string">'function'</span>) { <span class="hljs-comment">// è°ƒç”¨æ’ä»¶çš„installæ–¹æ³•</span>
        plugin.<span class="hljs-property">install</span>.<span class="hljs-title function_">apply</span>(plugin, args)  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">install</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">Vue,args</span>){}
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin === <span class="hljs-string">'function'</span>) { <span class="hljs-comment">// æ’ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç›´æ¥è®©å‡½æ•°æ‰§è¡Œ</span>
        plugin.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, args) 
    }
    installedPlugins.<span class="hljs-title function_">push</span>(plugin) <span class="hljs-comment">// ç¼“å­˜æ’ä»¶</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
}
</code></pre>
<h2 data-id="heading-15">9ã€ä»‹ç»ä¸‹ Vue ä¸­çš„ mixinï¼ŒVue3 ä¸ºä½•ä¸å†æ¨èä½¿ç”¨å®ƒï¼Ÿ</h2>
<p>mixin æ˜¯ Vue 2 ä¸­ä¸€ç§å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹å¼ï¼Œå…è®¸å°†å¯å¤ç”¨çš„é…ç½®ï¼ˆdataã€methodsã€computedã€lifecycle hooks ç­‰ï¼‰æŠ½ç¦»æˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡ mixins: [] åˆå¹¶åˆ°ç»„ä»¶ä¸­ã€‚æ”¯æŒå…¨å±€æ³¨å…¥å’Œå±€éƒ¨æ³¨å…¥ã€‚</p>
<ul>
<li>ä½œç”¨ï¼šæŠ½ç¦»å…¬å…±çš„ä¸šåŠ¡é€»è¾‘</li>
<li>åŸç†ï¼šç±»ä¼¼â€œå¯¹è±¡çš„ç»§æ‰¿â€ï¼Œå½“ç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ <code>mergeOptions</code> æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œé‡‡ç”¨ç­–ç•¥æ¨¡å¼é’ˆå¯¹ä¸åŒçš„å±æ€§è¿›è¡Œåˆå¹¶ã€‚å¦‚æœæ··å…¥çš„æ•°æ®å’Œæœ¬èº«ç»„ä»¶ä¸­çš„æ•°æ®å†²çªï¼Œä¼šé‡‡ç”¨â€œå°±è¿‘åŸåˆ™â€ä»¥ç»„ä»¶çš„æ•°æ®ä¸ºå‡†ã€‚</li>
</ul>
<p><strong>mixin çš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¤ç”¨é€»è¾‘ï¼ˆå¦‚è¡¨å•éªŒè¯ã€æƒé™åˆ¤æ–­ï¼‰ã€‚</li>
<li>å…¨å±€æ³¨å…¥ï¼ˆå¦‚æ—¥å¿—ã€åŸ‹ç‚¹ï¼‰ã€‚</li>
<li>å‡å°‘é‡å¤ä»£ç ã€‚</li>
</ul>
<p><strong>mixin ä¸­æœ‰å¾ˆå¤šç¼ºé™·ï¼š</strong></p>
<ul>
<li>å‘½åå†²çªé—®é¢˜ï¼šmixin ä¸­çš„å˜é‡ã€å‡½æ•°åå¯èƒ½ä¼šä¸ç»„ä»¶ä¸­çš„é‡åã€‚</li>
<li>ä¾èµ–é—®é¢˜ï¼š</li>
<li>æ•°æ®æ¥æºé—®é¢˜ï¼š</li>
</ul>
<p><strong>vue3 ä¸å†æ¨èä½¿ç”¨å®ƒçš„ç†ç”±å¦‚ä¸‹ï¼š</strong></p>





























<table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. éšå¼ä¾èµ– &amp; æ•°æ®æ¥æºä¸æ˜ç¡®</strong></td><td>ç»„ä»¶è¡Œä¸ºæ¥è‡ªå¤šä¸ª mixinï¼Œéš¾ä»¥è¿½è¸ª dataã€methods æ˜¯ä»å“ªé‡Œæ¥çš„ã€‚</td></tr><tr><td><strong>2. å‘½åå†²çª</strong></td><td>å¤šä¸ª mixin å¯èƒ½å®šä¹‰åŒå dataã€methodsï¼Œåˆå¹¶è§„åˆ™å¤æ‚ï¼ˆåŒå methods åè€…è¦†ç›–å‰è€…ï¼Œdata åˆå¹¶ä¸ºå¯¹è±¡ï¼ŒåŒå Key åè€…è¦†ç›–å‰è€…ï¼‰ã€‚</td></tr><tr><td><strong>3. è°ƒè¯•å’Œç»´æŠ¤å›°éš¾</strong></td><td>çˆ¶ç»„ä»¶æ— æ³•çŸ¥é“å­ç»„ä»¶å†…éƒ¨æœ‰å“ªäº› mixin æ³¨å…¥çš„å±æ€§ï¼Œæ’æŸ¥ bug å’Œè°ƒè¯•å›°éš¾ã€‚</td></tr><tr><td><strong>4. ä¸åˆ©äº Tree-shaking</strong></td><td>æ‰“åŒ…æ—¶éš¾ä»¥ç§»é™¤æœªä½¿ç”¨çš„ mixin ä»£ç ã€‚</td></tr><tr><td><strong>5. ä¸ Composition API ç†å¿µå†²çª</strong></td><td>Mixin æ˜¯â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€ï¼Œè€Œ Composition API å¼ºè°ƒæ˜¾å¼ã€å¯ç»„åˆçš„é€»è¾‘ã€‚</td></tr></tbody></table>
<p>Vue 3 æ¨èæ›¿ä»£æ–¹æ¡ˆï¼šComposition API + å¯å¤ç”¨å‡½æ•°ï¼ˆComposablesï¼‰ã€‚</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Mixin</th><th>Composables</th></tr></thead><tbody><tr><td>æ•°æ®æ¥æºæ˜ç¡®</td><td>éšå¼</td><td>æ˜¾å¼ï¼ˆimportï¼‰</td></tr><tr><td>æ˜¯å¦æœ‰å‘½åå†²çªé—®é¢˜</td><td>æœ‰</td><td>æ— </td></tr><tr><td>é€»è¾‘å°è£…</td><td>å…¨å±€æ±¡æŸ“</td><td>æŒ‰éœ€å¼•å…¥</td></tr><tr><td>Tree-shaking æ”¯æŒ</td><td>å·®</td><td>å¥½</td></tr><tr><td>TypeScript æ”¯æŒ</td><td>å·®</td><td>å¥½</td></tr></tbody></table>
<p>å¯¹äºå…¨å±€æ··å…¥ï¼ˆGlobal Mixinï¼‰ï¼ŒVue3 è™½ç„¶æä¾›äº† <code>app.mixin()</code>ï¼Œä½†ä¸æ¨èï¼Œæ¨èä½¿ç”¨:</p>
<ol>
<li><code>app.config.globalProperties</code>ã€‚</li>
<li><code>app.provide</code> åœ¨é¡¶å±‚æä¾›æ•°æ®ï¼Œç»„ä»¶é€šè¿‡ <code>inject</code> æ–¹æ³•æ¶ˆè´¹æ•°æ®ã€‚</li>
</ol>
<h2 data-id="heading-16">10ã€ä»‹ç»ä¸‹ Vue.js ä¸­çš„å‡½æ•°å¼ç»„ä»¶ã€å¼‚æ­¥ç»„ä»¶å’Œé€’å½’ç»„ä»¶</h2>
<h3 data-id="heading-17">10.1 å‡½æ•°å¼ç»„ä»¶ï¼ˆFunctional Componentsï¼‰</h3>
<p>å‡½æ•°å¼ç»„ä»¶æ˜¯ä¸€ç§è½»é‡çº§ã€æ— çŠ¶æ€çš„ç»„ä»¶å½¢å¼ã€‚å®ƒä»¬å¾ˆåƒçº¯å‡½æ•°ï¼šæ¥æ”¶ propsï¼Œè¿”å› è™šæ‹Ÿ DOMï¼ˆvnodeï¼‰ã€‚å‡½æ•°å¼ç»„ä»¶åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¸ä¼šåˆ›å»ºç»„ä»¶å®ä¾‹ (ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰ this)ï¼Œä¹Ÿä¸ä¼šè§¦å‘å¸¸è§„çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚æ²¡æœ‰å“åº”å¼ç³»ç»Ÿã€ç”Ÿå‘½å‘¨æœŸå’Œå®ä¾‹çš„å¼€é”€ï¼Œå‡½æ•°å¼ç»„ä»¶è‡ªç„¶åœ¨æ¸²æŸ“ä¸Šæ›´åŠ é«˜æ•ˆå’Œå¿«é€Ÿã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå‡½æ•°å¼ç»„ä»¶æœ‰<strong>æ— çŠ¶æ€</strong>ã€<strong>æ— this</strong>ã€<strong>æ— ç”Ÿå‘½å‘¨æœŸ</strong>ã€<strong>æ€§èƒ½æ›´é«˜</strong>ç­‰ç‰¹ç‚¹ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šé€‚åˆç®€å•ã€é™æ€çš„ UI å…ƒç´ ï¼Œå¦‚åˆ—è¡¨é¡¹æˆ–åŒ…è£…ç»„ä»¶ã€‚</p>
<p>åœ¨ Vue 2 ä¸­ï¼Œé€šè¿‡ <code>functional: true</code> å£°æ˜ï¼›åœ¨ Vue 3 ä¸­ï¼Œå‡½æ•°å¼ç»„ä»¶æ›´ç®€å•ï¼Œç›´æ¥è¿”å›æ¸²æŸ“å‡½æ•°ã€‚</p>
<p><strong>Vue2 ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template functional&gt;
  &lt;div&gt;{{ props.msg }}&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>æˆ–è€… js å½¢å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">functional</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'msg'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params">h, { props }</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, props.<span class="hljs-property">msg</span>);
  }
};
</code></pre>
<p><strong>Vue3 ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { h } from 'vue';

const FunctionalComp = (props) =&gt; h('div', props.msg);
&lt;/script&gt;

&lt;template&gt;
  &lt;FunctionalComp msg="Hello Functional" /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-18">10.2 å¼‚æ­¥ç»„ä»¶ï¼ˆAsync Componentsï¼‰</h3>
<p>å¼‚æ­¥ç»„ä»¶æ˜¯ä¸€ç§æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰æœºåˆ¶ï¼Œç”¨äºæŒ‰éœ€åŠ è½½ç»„ä»¶ä»£ç ï¼Œä¼˜åŒ–åˆå§‹åŠ è½½æ—¶é—´å’Œæ€§èƒ½ã€‚Vue ä¼šåŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œåªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰ä¸‹è½½å’Œæ¸²æŸ“ï¼Œå¸¸ç”¨äºè·¯ç”±æˆ–å¤§å‹ç»„ä»¶ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>é€šè¿‡ <code>import()</code> åŠ¨æ€åŠ è½½ï¼Œè¿”å› Promiseã€‚</li>
<li>æ”¯æŒåŠ è½½ä¸­ï¼ˆloadingï¼‰ã€é”™è¯¯ï¼ˆerrorï¼‰å’Œè¶…æ—¶ï¼ˆtimeoutï¼‰å¤„ç†ã€‚</li>
<li>åœ¨ Vue 3 ä¸­ï¼Œä½¿ç”¨ <code>defineAsyncComponent</code> æ›´è§„èŒƒï¼Œæ”¯æŒä¸ <code>&lt;Suspense&gt;</code> ç»“åˆï¼ˆVue 3 ç‹¬æœ‰ï¼Œç”¨äºç»Ÿä¸€å¤„ç†å¼‚æ­¥ï¼‰ã€‚</li>
</ul>
<p><strong>Vue2 ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  components: {
    AsyncComp: () =&gt; import('./AsyncComp.vue')
  }
};
&lt;/script&gt;

&lt;template&gt;
  &lt;AsyncComp /&gt;
&lt;/template&gt;
</code></pre>
<p><strong>Vue3 ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { defineAsyncComponent } from 'vue';

const AsyncComp = defineAsyncComponent(() =&gt; import('./AsyncComp.vue'));
&lt;/script&gt;

&lt;template&gt;
  &lt;Suspense&gt;
    &lt;template #default&gt;
      &lt;AsyncComp /&gt;
    &lt;/template&gt;
    &lt;template #fallback&gt;åŠ è½½ä¸­...&lt;/template&gt;
  &lt;/Suspense&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-19">10.3 é€’å½’ç»„ä»¶ï¼ˆRecursive Componentsï¼‰</h3>
<p>é€’å½’ç»„ä»¶æ˜¯æŒ‡ç»„ä»¶å†…éƒ¨è°ƒç”¨è‡ªèº«ï¼Œç”¨äºå¤„ç†æ ‘å½¢æˆ–åµŒå¥—æ•°æ®ç»“æ„ï¼Œå¦‚èœå•ã€æ ‘è§†å›¾æˆ–è¯„è®ºå›å¤ã€‚Vue æ”¯æŒç»„ä»¶è‡ªå¼•ç”¨ï¼Œä½†éœ€æ³¨æ„é¿å…æ— é™å¾ªç¯ï¼ˆé€šè¿‡æ¡ä»¶ç»ˆæ­¢é€’å½’ï¼‰ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç»„ä»¶éœ€æœ‰åç§°ï¼ˆ<code>name</code> é€‰é¡¹ï¼‰ï¼Œæ‰èƒ½è‡ªå¼•ç”¨ã€‚</li>
<li>å¸¸ç»“åˆ <code>v-for</code> å’Œ props ä¼ é€’æ•°æ®ã€‚</li>
</ul>
<p><strong>Vue 2 ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;ul&gt;
    &lt;li v-for="item in tree" :key="item.id"&gt;
      {{ item.name }}
      &lt;Tree v-if="item.children" :tree="item.children" /&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'Tree',  // å¿…é¡»æœ‰ name
  props: ['tree']
};
&lt;/script&gt;
</code></pre>
<p><strong>Vue 3 ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { defineAsyncComponent } from 'vue';  // å¯é€‰ï¼šå¼‚æ­¥åŠ è½½é¿å…å¾ªç¯

const Tree = defineAsyncComponent(() =&gt; import('./Tree.vue'));  // è‡ªå¼•ç”¨
defineProps(['tree']);
&lt;/script&gt;

&lt;template&gt;
  &lt;ul&gt;
    &lt;li v-for="item in tree" :key="item.id"&gt;
      {{ item.name }}
      &lt;Tree v-if="item.children" :tree="item.children" /&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-20">11ã€Vue.js ä¸­çš„ vue-loader æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Vue-loader æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js è®¾è®¡çš„ <code>Webpack loader</code>ï¼ˆåŠ è½½å™¨ï¼‰ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å°† Vue çš„å•æ–‡ä»¶ç»„ä»¶ï¼ˆSingle-File Componentsï¼Œç®€ç§° SFCï¼Œå³ .vue æ–‡ä»¶ï¼‰è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ JavaScript æ¨¡å—ã€‚ å®ƒå…è®¸å¼€å‘è€…ä»¥ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼ç¼–å†™ç»„ä»¶ï¼Œå°†æ¨¡æ¿ï¼ˆtemplateï¼‰ã€è„šæœ¬ï¼ˆscriptï¼‰å’Œæ ·å¼ï¼ˆstyleï¼‰å°è£…åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>:</p>
<ul>
<li><strong>è§£æ SFC æ–‡ä»¶</strong>ï¼šVue-loader ä¼šè‡ªåŠ¨å¤„ç† <code>.vue</code> æ–‡ä»¶ä¸­çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼š
<ul>
<li><strong>template éƒ¨åˆ†</strong>ï¼šç¼–è¯‘ä¸º Vue çš„æ¸²æŸ“å‡½æ•°ï¼ˆrender functionï¼‰ã€‚</li>
<li><strong>script éƒ¨åˆ†</strong>ï¼šæå–ä¸ºç»„ä»¶çš„ JavaScript é€»è¾‘ï¼Œæ”¯æŒ ES æ¨¡å—å’Œ TypeScriptã€‚</li>
<li><strong>styleéƒ¨åˆ†</strong>ï¼šå¤„ç† CSSï¼Œæ”¯æŒé¢„å¤„ç†å™¨ï¼ˆå¦‚ Sassã€Lessï¼‰å¹¶å¯é€‰åœ°åº”ç”¨ scopedï¼ˆä½œç”¨åŸŸæ ·å¼ï¼‰æˆ– CSS Modulesã€‚</li>
</ul>
</li>
<li><strong>çƒ­é‡è½½ï¼ˆHot Module Replacementï¼ŒHMRï¼‰</strong>ï¼šåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ”¯æŒç»„ä»¶çš„çƒ­æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°å˜åŒ–ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li>
<li><strong>è‡ªå®šä¹‰å—ï¼ˆCustom Blocksï¼‰</strong>ï¼šæ”¯æŒæ‰©å±•ï¼Œå¦‚æ·»åŠ  <code>&lt;docs&gt;</code> æˆ–å…¶ä»–è‡ªå®šä¹‰æ ‡ç­¾ï¼Œç”¨äºæ–‡æ¡£ç”Ÿæˆæˆ–å…¶ä»–å·¥å…·é›†æˆã€‚</li>
<li><strong>é¢„å¤„ç†å™¨æ”¯æŒ</strong>ï¼šæ— ç¼é›†æˆ Babelã€PostCSS ç­‰å·¥å…·é“¾ã€‚</li>
</ul>
<h2 data-id="heading-21">12ã€Vue.extend æ–¹æ³•çš„ä½œç”¨ï¼Ÿ</h2>
<p><code>Vue.extend</code>æ–¹æ³•å¯ä»¥ä½œä¸ºåŸºç¡€ Vue æ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªâ€œå­ç±»â€ã€‚å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡ã€‚</p>
<p><strong>Vue2 ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> dialog = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>({
  <span class="hljs-attr">template</span>: <span class="hljs-string">"&lt;div&gt;{{hello}} {{world}}&lt;/div&gt;"</span>,
  <span class="hljs-attr">data</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">hello</span>: <span class="hljs-string">"hello"</span>,
      <span class="hljs-attr">world</span>: <span class="hljs-string">"world"</span>,
    };
  },
});
<span class="hljs-comment">// åˆ›å»º dialog å®ä¾‹ï¼Œå¹¶æ‰‹åŠ¨æŒ‚è½½åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚</span>
<span class="hljs-keyword">new</span> <span class="hljs-title function_">dialog</span>().$mount(<span class="hljs-string">"#app"</span>);
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨ <code>Vue.extend</code> ä¸­çš„ <code>data</code> å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¦ä¸ç„¶ä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<p><strong>Vue3 ç¤ºä¾‹ï¼š</strong></p>
<p>Vue3 ä¸­ä¸åœ¨ä½¿ç”¨ Vue.extend æ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨renderæ–¹æ³•è¿›è¡Œæ‰‹åŠ¨æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Modal.vue --&gt;
&lt;template&gt;
  &lt;div class="modal"&gt;è¿™æ˜¯ä¸€ä¸ªå¼¹çª—&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'Modal',
}
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div id="box"&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { h, render, createApp, onMounted } from 'vue'
import Modal from './Modal.vue'

onMounted(() =&gt; {
  render(h(Modal), document.getElementById('box'));
})
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-22">13ã€keep-alive çš„åŸç†</h2>
<p><code>&lt;keep-alive&gt;</code> æ˜¯ Vue.js çš„å†…ç½®ç»„ä»¶ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯åœ¨å¤šä¸ªç»„ä»¶é—´åŠ¨æ€åˆ‡æ¢æ—¶ç¼“å­˜è¢«ç§»é™¤çš„ç»„ä»¶å®ä¾‹ï¼Œé¿å…é‡å¤æ¸²æŸ“å’ŒçŠ¶æ€ä¸¢å¤±ï¼Œæé«˜æ€§èƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼ˆabstract: trueï¼‰ï¼Œä¸ä¼šæ¸²æŸ“åˆ° DOMï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨ç»„ä»¶æ ‘ä¸­ï¼Œè€Œæ˜¯é€šè¿‡æ’æ§½ï¼ˆslotsï¼‰å’Œè‡ªå®šä¹‰ render å‡½æ•°å®ç°ç¼“å­˜é€»è¾‘ã€‚</p>
<p><strong>æ ¸å¿ƒå®ç°æœºåˆ¶ï¼š</strong></p>
<ol>
<li><strong>æŠ½è±¡ç»„ä»¶ä¸ Render å‡½æ•°ï¼š</strong></li>
</ol>
<ul>
<li><code>&lt;keep-alive&gt;</code> é€šè¿‡ render å‡½æ•°å¤„ç†åŒ…è£¹çš„å†…å®¹ï¼ˆé€šå¸¸æ˜¯åŠ¨æ€ç»„ä»¶ï¼Œå¦‚ <code>&lt;component&gt;</code> æˆ– v-if åˆ‡æ¢çš„ç»„ä»¶ï¼‰ã€‚</li>
<li>åœ¨ render ä¸­ï¼Œå®ƒä»æ’æ§½è·å–å­ç»„ä»¶çš„ VNodeï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ã€‚å¦‚æœå­ç»„ä»¶æœ‰ keyï¼ˆæ¨èä½¿ç”¨ï¼‰ï¼Œåˆ™ç”¨ key ä½œä¸ºç¼“å­˜æ ‡è¯†ï¼›å¦åˆ™ç”¨ç»„ä»¶çš„ tag æˆ– cidï¼ˆç»„ä»¶ IDï¼‰ã€‚</li>
<li>å¦‚æœç»„ä»¶å·²ç¼“å­˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„ VNodeï¼ˆè®¾ç½® vnode.componentInstance.keepAlive = true ä»¥æ ‡è®°ç¼“å­˜çŠ¶æ€ï¼‰ï¼›å¦åˆ™ï¼Œæ¸²æŸ“æ–°å®ä¾‹å¹¶å­˜å…¥ç¼“å­˜ã€‚</li>
</ul>
<ol start="2">
<li><strong>ç¼“å­˜å­˜å‚¨ï¼š</strong></li>
</ol>
<ul>
<li>å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆthis.cacheï¼‰ä½œä¸ºç¼“å­˜ Mapï¼Œä»¥ key ä¸ºé”®ï¼Œå€¼ä¸º VNode å¯¹è±¡ï¼ˆåŒ…å«ç»„ä»¶å®ä¾‹ï¼‰ã€‚</li>
<li>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå­˜å…¥ç¼“å­˜ï¼›åˆ‡æ¢å›æ—¶ï¼Œä»ç¼“å­˜å–å‡ºï¼Œé¿å…é‡æ–°åˆ›å»ºå®ä¾‹å’Œæ‰§è¡Œ mounted é’©å­ã€‚</li>
</ul>
<ol start="3">
<li><strong>LRU ç¼“å­˜ç®—æ³•ï¼š</strong></li>
</ol>
<ul>
<li>æ”¯æŒ max å±æ€§è®¾ç½®æœ€å¤§ç¼“å­˜æ•°é‡ï¼ˆVue 2.5+ï¼‰ã€‚</li>
<li>ä½¿ç”¨ Least Recently Usedï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•ï¼šå½“ç¼“å­˜è¶…å‡º max æ—¶ï¼Œåˆ é™¤æœ€ä¹…æœªè®¿é—®çš„ç»„ä»¶ï¼ˆé€šè¿‡ this.keys æ•°ç»„è·Ÿè¸ªè®¿é—®é¡ºåºï¼‰ã€‚</li>
<li>è®¿é—®ç»„ä»¶æ—¶ï¼Œå°†å…¶ key ç§»åˆ°æ•°ç»„æœ«å°¾ï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰ï¼›è¶…å‡ºæ—¶ï¼Œåˆ é™¤æ•°ç»„å¼€å¤´çš„ keyï¼Œå¹¶é”€æ¯å¯¹åº”å®ä¾‹ï¼ˆè°ƒç”¨ $destroyï¼‰ã€‚</li>
</ul>
<ol start="4">
<li><strong>è¿‡æ»¤è§„åˆ™ï¼ˆinclude/excludeï¼‰ï¼š</strong></li>
</ol>
<ul>
<li>é€šè¿‡ includeï¼ˆç™½åå•ï¼‰å’Œ excludeï¼ˆé»‘åå•ï¼‰å±æ€§å†³å®šå“ªäº›ç»„ä»¶ç¼“å­˜ï¼Œæ”¯æŒå­—ç¬¦ä¸²ã€æ­£åˆ™ã€æ•°ç»„æˆ–å‡½æ•°ã€‚</li>
<li>åœ¨ created é’©å­ä¸­ï¼Œç›‘å¬è¿™äº› prop çš„å˜åŒ–ï¼Œå¹¶è°ƒç”¨ pruneCache æ›´æ–°ç¼“å­˜ï¼ˆç§»é™¤ä¸åŒ¹é…çš„ç»„ä»¶ï¼‰ã€‚</li>
</ul>
<ol start="5">
<li><strong>ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</strong></li>
</ol>
<ul>
<li>ç¼“å­˜ç»„ä»¶ä¸ä¼šè§¦å‘ destroyed/unmountedï¼Œè€Œæ˜¯ä½¿ç”¨ activatedï¼ˆæ¿€æ´»æ—¶ï¼‰å’Œ deactivatedï¼ˆå¤±æ´»æ—¶ï¼‰é’©å­ã€‚</li>
<li>è¿™å…è®¸å¼€å‘è€…åœ¨åˆ‡æ¢æ—¶ç®¡ç†çŠ¶æ€ï¼ˆå¦‚æš‚åœå®šæ—¶å™¨ï¼‰ï¼Œè€Œéå®Œå…¨é”€æ¯ã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>åªç¼“å­˜ä¸€ä¸ªç›´æ¥å­ç»„ä»¶ï¼ˆæ’æ§½å†…å®¹ï¼‰ï¼Œä¸æ”¯æŒå¤šä¸ªã€‚</li>
<li>Vue 3 ä¸­åŸç†ç±»ä¼¼ï¼Œä½†ä¼˜åŒ–äº† VNode å¤„ç†å’Œ Composition API æ”¯æŒã€‚</li>
<li>æ½œåœ¨é—®é¢˜ï¼šç¼“å­˜è¿‡å¤šå¯¼è‡´å†…å­˜å ç”¨ï¼›éœ€æ‰‹åŠ¨æ¸…ç†èµ„æºï¼ˆå¦‚åœ¨ deactivated ä¸­åœæ­¢ç›‘å¬ï¼‰ã€‚</li>
</ul>
</blockquote>
<h2 data-id="heading-23">14ã€Vue.js ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼?</h2>
<h3 data-id="heading-24">1. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)</h3>
<ul>
<li>æè¿°ï¼šVue çš„å“åº”å¼ç³»ç»Ÿä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œé€šè¿‡ Proxy (Vue 3) æˆ– Object.defineProperty (Vue 2) æ‹¦æˆªå¯¹è±¡å±æ€§çš„ get/set æ“ä½œã€‚å½“æ•°æ®å˜åŒ–æ—¶ï¼Œé€šçŸ¥è®¢é˜…è€…ï¼ˆWatcherï¼‰æ›´æ–°è§†å›¾ã€‚</li>
<li>åº”ç”¨ï¼šåœ¨ reactive() å‡½æ•°ä¸­ï¼Œè¿”å› Proxy å¯¹è±¡ï¼Œget é™·é˜±ç”¨äºä¾èµ–æ”¶é›† (track)ï¼Œset é™·é˜±ç”¨äºè§¦å‘æ›´æ–° (trigger)ã€‚</li>
<li>ä¼˜åŠ¿ï¼šå®ç°äº†ç»†ç²’åº¦çš„å˜æ›´æ£€æµ‹ï¼Œé¿å…å…¨å±€é‡æ¸²æŸ“ã€‚</li>
</ul>
<h3 data-id="heading-25">2. å‘å¸ƒ-è®¢é˜…æ¨¡å¼ (Publish-Subscribe Pattern)</h3>
<ul>
<li>æè¿°ï¼šVue çš„äº‹ä»¶ç³»ç»Ÿå’Œå“åº”å¼é€šçŸ¥æœºåˆ¶é‡‡ç”¨ Pub-Sub æ¨¡å¼ã€‚æ•°æ®å˜åŒ–æ—¶å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…ï¼ˆå¦‚ç»„ä»¶æ¸²æŸ“å‡½æ•°ï¼‰æ¥æ”¶å¹¶å“åº”ã€‚</li>
<li>åº”ç”¨ï¼šåœ¨å“åº”å¼ç³»ç»Ÿä¸­ï¼Œtrigger() å‡½æ•°æ£€ç´¢è®¢é˜…è€…æ•ˆæœå¹¶è°ƒç”¨å®ƒä»¬ï¼›äº‹ä»¶ API å¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>m</mi><mi>i</mi><mi>t</mi><mtext>å’Œ</mtext></mrow><annotation encoding="application/x-tex">emit å’Œ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">e</span><span class="mord mathnormal">mi</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">å’Œ</span></span></span></span></span>on ä¹ŸåŸºäºæ­¤ã€‚</li>
<li>ä¼˜åŠ¿ï¼šè§£è€¦äº†æ•°æ®ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œæ”¯æŒå¼‚æ­¥æ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-26">3. ä»£ç†æ¨¡å¼ (Proxy Pattern)</h3>
<p>æè¿°ï¼šVue 3 çš„å“åº”å¼ç³»ç»Ÿç›´æ¥ä½¿ç”¨ ES6 Proxy ä½œä¸ºä»£ç†å±‚ï¼Œæ‹¦æˆªå¯¹è±¡æ“ä½œï¼Œå®ç°é€æ˜çš„å“åº”å¼ã€‚
åº”ç”¨ï¼šreactive() è¿”å› Proxy å¯¹è±¡ï¼Œä»£ç†ç›®æ ‡å¯¹è±¡çš„è®¿é—®å’Œä¿®æ”¹ã€‚
ä¼˜åŠ¿ï¼šæ¯” Vue 2 çš„ defineProperty æ›´å¼ºå¤§ï¼Œæ”¯æŒæ•°ç»„å’Œ Map/Set ç­‰ç±»å‹ã€‚</p>
<h3 data-id="heading-27">4. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)</h3>
<ul>
<li>æè¿°ï¼šVue çš„è™šæ‹Ÿ DOM diff ç®—æ³•ä½¿ç”¨ä¸åŒç­–ç•¥ï¼ˆå¦‚ key-based diff æˆ–ç®€å• patchï¼‰æ¥ä¼˜åŒ–æ›´æ–°ã€‚</li>
<li>åº”ç”¨ï¼šåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®èŠ‚ç‚¹ç±»å‹é€‰æ‹© diff ç­–ç•¥ã€‚</li>
<li>ä¼˜åŠ¿ï¼šæœ€å°åŒ– DOM æ“ä½œï¼Œæé«˜æ¸²æŸ“æ•ˆç‡ã€‚</li>
</ul>
<h3 data-id="heading-28">5. å•ä¾‹æ¨¡å¼(Singleton Pattern)</h3>
<ul>
<li>æè¿°ï¼šæ•´ä¸ªç¨‹åºä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>åº”ç”¨ï¼švuex çš„ store å’Œæ’ä»¶ã€‚</li>
<li>ä¼˜åŠ¿ï¼šå…¨å±€å”¯ä¸€ã€èŠ‚çº¦èµ„æºã€ä¾¿äºç®¡ç†ã€‚</li>
</ul>
<h3 data-id="heading-29">6. å·¥å‚æ¨¡å¼(Factory Pattern)</h3>
<ul>
<li>æè¿°ï¼šæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œä½¿å¾—åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ä¸ä½¿ç”¨å¯¹è±¡çš„è¿‡ç¨‹åˆ†ç¦»ã€‚</li>
<li>åº”ç”¨ï¼šVue2 ä¸­çš„ç»„ä»¶åˆ›å»ºï¼Œä¼ å…¥å‚æ•°ç»™ <code>createComponentInstance</code> å°±å¯ä»¥åˆ›å»ºå®ä¾‹ã€‚</li>
<li>ä¼˜åŠ¿ï¼šè§£è—•ï¼Œæ˜“äºç»´æŠ¤ã€‚</li>
</ul>
<h2 data-id="heading-30">15ã€Vue.js åº”ç”¨ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼æ¥æºæœ‰å“ªäº›ï¼Ÿ</h2>
<ol>
<li>æœªæ¸…ç†çš„äº‹ä»¶ç›‘å¬å™¨ã€å®šæ—¶å™¨ã€åŠ¨ç”»</li>
</ol>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { onMounted, onUnmounted } from 'vue';

let timer = null;
let controller = null;
let raf = null;

onMounted(() =&gt; {
  // å®šæ—¶å™¨
  timer = setInterval(() =&gt; {}, 1000);
  // åŠ¨ç”»
  raf = requestAnimationFrame(() =&gt; {});
  // äº‹ä»¶ç›‘å¬
  window.addEventListener('resize', handleResize);
});

onUnmounted(() =&gt; {
  clearInterval(timer);
  cancelAnimationFrame(this.raf);
  window.removeEventListener('resize', handleResize);
});
&lt;/script&gt;
</code></pre>
<ol start="2">
<li>æœªç§»é™¤çš„ç¬¬ä¸‰æ–¹åº“å®ä¾‹</li>
</ol>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { onMounted, onUnmounted } from 'vue';

let chart = null;

onMounted(() =&gt; {
  chart = echarts.init(this.$refs.chart);
});

onUnmounted(() =&gt; {
  chart?.dispose();
});
&lt;/script&gt;
</code></pre>
<ol start="3">
<li>äº‹ä»¶æ€»çº¿ï¼ˆEvent Busï¼‰æœªè§£ç»‘</li>
</ol>
<p>vue2 ç”¨å¯ä»¥ç”¨ <code>new Vue</code> å…¨å±€åˆ›å»ºä¸€ä¸ªäº‹ä»¶æ€»çº¿å®ä¾‹ï¼Œæˆ–è€…åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ <code>this.$on</code>ã€<code>this.$emit</code>ã€<code>this.$off</code>ã€‚</p>
<p>vue3 åˆ™éœ€è¦å€ŸåŠ©ç¬¬ä¸‰åº“ï¼Œæ¯”å¦‚ mitt æ¥å®ç°äº‹ä»¶æ€»çº¿ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { onMounted, onUnmounted } from 'vue';
import mitt from 'mitt';

// åˆ›å»ºäº‹ä»¶æ€»çº¿å®ä¾‹
const emitter = mitt();

onMounted(() =&gt; {
  emitter.on('update', this.handler);
});

onUnmounted(() =&gt; {
  emitter.off('update', this.handler);
});
&lt;/script&gt;
</code></pre>
<p>é¡ºä¾¿æä¸€ä¸‹ï¼Œ vue3 ä¸ºå•¥å»æ‰ <code>$onã€$emitã€$off</code> è¿™äº› APIï¼Œä¸»è¦æœ‰ä»¥ä¸‹åŸå› ï¼š</p>
<ol>
<li>è®¾è®¡ç†å¿µçš„è°ƒæ•´</li>
</ol>
<p>Vue 3 æ›´åŠ æ³¨é‡ç»„ä»¶é—´é€šä¿¡çš„æ˜ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚$onÂ è¿™ç±»äº‹ä»¶ API æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ "å‘å¸ƒ - è®¢é˜…" æ¨¡å¼ï¼Œå®¹æ˜“å¯¼è‡´ç»„ä»¶é—´å…³ç³»æ¨¡ç³Šï¼ˆå¤šä¸ªç»„ä»¶å¯èƒ½ç›‘å¬åŒä¸€ä¸ªäº‹ä»¶ï¼Œéš¾ä»¥è¿½è¸ªäº‹ä»¶æ¥æºå’Œæµå‘ï¼‰ã€‚Vue 3 æ¨èä½¿ç”¨æ›´æ˜ç¡®çš„é€šä¿¡æ–¹å¼ï¼Œå¦‚ï¼š</p>
<ul>
<li>çˆ¶å­ç»„ä»¶é€šè¿‡Â propsÂ å’ŒÂ emitÂ é€šä¿¡</li>
<li>è·¨ç»„ä»¶é€šä¿¡ä½¿ç”¨Â provide/injectÂ æˆ– Pinia/Vuex ç­‰çŠ¶æ€ç®¡ç†åº“</li>
<li>å¤æ‚åœºæ™¯å¯ä½¿ç”¨ä¸“é—¨çš„äº‹ä»¶æ€»çº¿åº“ï¼ˆå¦‚Â mitt</li>
</ul>
<ol start="2">
<li>ä¸ Composition API çš„é€‚é…</li>
</ol>
<p>Vue 3 ä¸»æ¨çš„ Composition API å¼ºè°ƒé€»è¾‘çš„å°è£…å’Œå¤ç”¨ï¼Œè€Œ $on åŸºäºé€‰é¡¹å¼ API çš„å®ä¾‹æ–¹æ³•ï¼Œä¸ Composition API çš„å‡½æ•°å¼æ€ç»´ä¸å¤ªå¥‘åˆã€‚ç§»é™¤åï¼Œå¼€å‘è€…å¯ä»¥æ›´è‡ªç„¶åœ°ä½¿ç”¨å“åº”å¼å˜é‡æˆ–ç¬¬ä¸‰æ–¹äº‹ä»¶åº“æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚</p>
<ol start="3">
<li>å‡å°‘æ½œåœ¨é—®é¢˜</li>
</ol>
<ul>
<li>$on å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå¿˜è®°è§£ç»‘äº‹ä»¶ï¼‰</li>
<li>äº‹ä»¶åç§°å¯èƒ½å†²çªï¼ˆå…¨å±€äº‹ä»¶æ€»çº¿å°¤å…¶æ˜æ˜¾ï¼‰</li>
<li>ä¸åˆ©äº TypeScript ç±»å‹æ¨æ–­ï¼Œéš¾ä»¥å®ç°ç±»å‹å®‰å…¨</li>
</ul>
<h3 data-id="heading-31">4. æœªæ¸…ç†çš„ Watcher</h3>
<p>Vue æœ¬èº«ä¸ä¼šæ³„æ¼å†…å­˜ï¼Œæ³„æ¼å‡ ä¹éƒ½æ¥è‡ª<strong>å¼€å‘è€…æœªæ¸…ç†çš„å‰¯ä½œç”¨</strong>ã€‚å…»æˆâ€œåˆ›å»ºå³æ¸…ç†â€çš„ä¹ æƒ¯ï¼Œä½¿ç”¨ <code>beforeDestroy</code> æˆ–è€… <code>onUnmounted</code> é›†ä¸­æ¸…ç†ï¼Œåœ¨ä½¿ç”¨ <code>keep-alive</code> çš„ç»„ä»¶ä¸­ï¼Œè§†æƒ…å†µåœ¨ <code>deactivated</code> é’©å­ä¸­æ¸…ç†èµ„æºã€‚</p>
<h2 data-id="heading-32">16ã€Vue.js ä¸­çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›ï¼Ÿ</h2>
<h3 data-id="heading-33">16.1 æ•°æ®ç›¸å…³</h3>
<ul>
<li>Vue2 ä¸­æ•°æ®å±‚çº§ä¸æ˜“è¿‡æ·±ï¼Œåˆç†è®¾ç½®å“åº”å¼æ•°æ®ï¼›</li>
<li>Vue2 éå“åº”å¼æ•°æ®å¯ä»¥é€šè¿‡ Object.freeze()æ–¹æ³•å†»ç»“å±æ€§ï¼›</li>
<li>åˆç†ä½¿ç”¨ computedï¼Œåˆ©ç”¨å…¶ç¼“å­˜èƒ½åŠ›æé«˜æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-34">16.2 ç»„ä»¶ç›¸å…³</h3>
<ul>
<li>æ§åˆ¶ç»„ä»¶ç²’åº¦ï¼ˆVue é‡‡ç”¨ç»„ä»¶çº§æ›´æ–°ï¼‰ï¼›</li>
<li>åˆé€‚åœºæ™¯å¯ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼ˆå‡½æ•°å¼ç»„ä»¶å¼€é”€ä½ï¼‰ï¼›</li>
<li>é‡‡ç”¨å¼‚æ­¥ç»„ä»¶ï¼ˆå€ŸåŠ©æ„å»ºå·¥å…·çš„åˆ†åŒ…çš„èƒ½åŠ›ï¼Œå‡å°‘ä¸»åŒ…ä½“ç§¯ï¼‰ï¼›</li>
<li>åœ¨ç»„ä»¶å¸è½½æˆ–è€…éæ¿€æ´»çŠ¶æ€åŠæ—¶æ¸…é™¤å®šæ—¶å™¨ã€DOMäº‹ä»¶ã€äº‹ä»¶æ€»çº¿ã€ä¸‰æ–¹åº“çš„å®ä¾‹ç­‰ã€‚</li>
<li>v-on æŒ‰éœ€ç›‘å¬ã€ä½¿ç”¨åŠ¨æ€ watch å’ŒåŠæ—¶é”€æ¯ watchã€‚</li>
</ul>
<h3 data-id="heading-35">16.3 æ¸²æŸ“ç›¸å…³</h3>
<ul>
<li>åˆç†è®¾ç½® key å±æ€§ï¼›</li>
<li>v-show å’Œ v-if çš„é€‰å–ï¼›</li>
<li>ä½¿ç”¨é˜²æŠ–ã€èŠ‚æµã€åˆ†é¡µã€è™šæ‹Ÿæ»šåŠ¨ã€æ—¶é—´åˆ†ç‰‡ç­‰ç­–ç•¥ï¼›</li>
<li>åˆç†ä½¿ç”¨ keep-alive ã€v-onceã€v-memo è¿›è¡Œé€»è¾‘ä¼˜åŒ–ã€‚</li>
</ul>
<h2 data-id="heading-36">ç»“è¯­</h2>
<p>ä»¥ä¸Šæ˜¯æ•´ç†çš„ Vue é«˜çº§çš„é«˜é¢‘é¢è¯•é¢˜ï¼Œå¦‚æœ‰é”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹æ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£ï¼Œåç»­è¿˜ä¼šæ›´æ–° Vuex å’Œ Vue-router ç›¸å…³é¢è¯•é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uosåŸºç¡€ ffmpeg æŸ¥çœ‹å¤šåª’ä½“è§£ç çš„é…ç½®ä¿¡æ¯]]></title>    <link>https://juejin.cn/post/7572164122234929162</link>    <guid>https://juejin.cn/post/7572164122234929162</guid>    <pubDate>2025-11-13T11:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572164122234929162" data-draft-id="7572012699628027931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uosåŸºç¡€ ffmpeg æŸ¥çœ‹å¤šåª’ä½“è§£ç çš„é…ç½®ä¿¡æ¯"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-13T11:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œåˆå¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4081803083395527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uosåŸºç¡€ ffmpeg æŸ¥çœ‹å¤šåª’ä½“è§£ç çš„é…ç½®ä¿¡æ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4081803083395527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œåˆå¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:04:24.000Z" title="Thu Nov 13 2025 11:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»Ÿä¿¡æ¡Œé¢æ“ä½œç³»ç»Ÿä¸“ä¸šç‰ˆV20ï¼ˆ1070ï¼‰<br/>
Linux uos 5.10.97-arm64-desktop</p>
</blockquote>
<h3 data-id="heading-0">uosåŸºç¡€ ffmpeg æŸ¥çœ‹å¤šåª’ä½“è§£ç çš„é…ç½®ä¿¡æ¯</h3>
<pre><code class="hljs language-c" lang="c">code@uos:~$ ffmpeg
ffmpeg version <span class="hljs-number">4.4</span><span class="hljs-number">.2</span>-deepin4 <span class="hljs-title function_">Copyright</span> <span class="hljs-params">(c)</span> 2000-2021 the FFmpeg developers
  built with gcc 8 <span class="hljs-params">(Uos <span class="hljs-number">8.3</span><span class="hljs-number">.0</span><span class="hljs-number">.12</span>-deepin1)</span>
  configuration: --prefix=/usr --extra-version=deepin4 --toolchain=hardened --libdir=/usr/lib/aarch64-linux-gnu --incdir=/usr/include/aarch64-linux-gnu --arch=arm64 --enable-gpl --disable-stripping --enable-avresample --disable-filter=resample --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librabbitmq --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-ftomx --enable-openal --enable-opencl --enable-opengl --enable-sdl2 --enable-libdavs2 --enable-libxavs2 --disable-sndio --enable-pocketsphinx --enable-librsvg --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-shared
  libavutil      <span class="hljs-number">56.</span> <span class="hljs-number">70.100</span> / <span class="hljs-number">56.</span> <span class="hljs-number">70.100</span>
  libavcodec     <span class="hljs-number">58.134</span><span class="hljs-number">.100</span> / <span class="hljs-number">58.134</span><span class="hljs-number">.100</span>
  libavformat    <span class="hljs-number">58.</span> <span class="hljs-number">76.100</span> / <span class="hljs-number">58.</span> <span class="hljs-number">76.100</span>
  libavdevice    <span class="hljs-number">58.</span> <span class="hljs-number">13.100</span> / <span class="hljs-number">58.</span> <span class="hljs-number">13.100</span>
  libavfilter     <span class="hljs-number">7.110</span><span class="hljs-number">.100</span> /  <span class="hljs-number">7.110</span><span class="hljs-number">.100</span>
  libavresample   <span class="hljs-number">4.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0</span> /  <span class="hljs-number">4.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0</span>
  libswscale      <span class="hljs-number">5.</span>  <span class="hljs-number">9.100</span> /  <span class="hljs-number">5.</span>  <span class="hljs-number">9.100</span>
  libswresample   <span class="hljs-number">3.</span>  <span class="hljs-number">9.100</span> /  <span class="hljs-number">3.</span>  <span class="hljs-number">9.100</span>
  libpostproc    <span class="hljs-number">55.</span>  <span class="hljs-number">9.100</span> / <span class="hljs-number">55.</span>  <span class="hljs-number">9.100</span>
Hyper fast Audio and Video encoder
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...

Use -h to get full help or, even better, run <span class="hljs-string">'man ffmpeg'</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é¢æ¡ä»£ç åˆ°æŠ½è±¡èƒ½åŠ›ï¼šä¸€ä¸ªå°è¡¨å•åœºæ™¯é‡Œçš„å‰ç«¯æˆé•¿å››é˜¶æ®µ]]></title>    <link>https://juejin.cn/post/7571972751528673316</link>    <guid>https://juejin.cn/post/7571972751528673316</guid>    <pubDate>2025-11-13T11:08:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751528673316" data-draft-id="7571815573933310015" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é¢æ¡ä»£ç åˆ°æŠ½è±¡èƒ½åŠ›ï¼šä¸€ä¸ªå°è¡¨å•åœºæ™¯é‡Œçš„å‰ç«¯æˆé•¿å››é˜¶æ®µ"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-13T11:08:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é¢æ¡ä»£ç åˆ°æŠ½è±¡èƒ½åŠ›ï¼šä¸€ä¸ªå°è¡¨å•åœºæ™¯é‡Œçš„å‰ç«¯æˆé•¿å››é˜¶æ®µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:08:25.000Z" title="Thu Nov 13 2025 11:08:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸ä¸šåŠ¡å¼€å‘é‡Œï¼Œæœ‰ä¸€ç±»åœºæ™¯å‡ºç°é¢‘ç‡æé«˜ï¼š</p>
<ul>
<li>é¡µé¢é‡Œæœ‰ä¸€ä¸ªå­è¡¨å•ç»„ä»¶ï¼ˆç”¨ <code>ref</code> å¼•ç”¨ï¼‰</li>
<li>æäº¤å‰è¦è®©å­è¡¨å•å…ˆåšä¸€è½®æ ¡éªŒ</li>
<li>æ ¡éªŒé€šè¿‡åï¼Œä»å½“å‰ç»„ä»¶çš„æ•°æ®é‡Œç»„è£…ä¸€ä¸ª payload å‘ç»™åç«¯</li>
</ul>
<p>çœ‹èµ·æ¥å†æ™®é€šä¸è¿‡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewContent</span>?.<span class="hljs-property">length</span>) {
  <span class="hljs-comment">// å…ˆè®©å­è¡¨å•ç»„ä»¶æ ¡éªŒ</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">reviewForm</span>?.<span class="hljs-title function_">validate</span>();
  <span class="hljs-keyword">if</span> (!res || !res.<span class="hljs-property">ok</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(res?.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·å®Œå–„è‡ªè¯„ä¿¡æ¯'</span>);
  }
}

<span class="hljs-keyword">const</span> payload = {
  <span class="hljs-attr">reviewContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewContent</span>,
  <span class="hljs-attr">attachmentList</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">attachmentList</span>,
};

<span class="hljs-comment">// è°ƒæ¥å£â€¦â€¦</span>
</code></pre>
<ul>
<li>æœ‰å†…å®¹å°±æ ¡éªŒï¼›</li>
<li>æ ¡éªŒä¸è¿‡å°±æç¤ºï¼›</li>
<li>æ ¡éªŒé€šè¿‡å°±æ‹¼ä¸€ä¸ª <code>payload</code> å»æäº¤ã€‚</li>
</ul>
<p>å¾ˆå¤šå‰ç«¯çš„â€œè¡¨å•ç”Ÿæ¶¯â€ï¼Œå°±æ˜¯ä»è¿™ç§<strong>çº¿æ€§ã€ç›´æ¥ã€å¸¦ä¸€ç‚¹ç‚¹é¢æ¡å‘³</strong>çš„ä»£ç å¼€å§‹çš„ã€‚</p>
<p>æœ‰æ„æ€çš„æ˜¯ï¼š<br/>
<strong>åŒæ ·ä¸€ä¸ªéœ€æ±‚ï¼Œä¸åŒæ°´å¹³çš„å‰ç«¯ï¼Œä¼šå†™å‡ºå®Œå…¨ä¸åŒå±‚æ¬¡çš„ä»£ç ã€‚</strong><br/>
ä»è¿™ä¸ªå°ä¾‹å­å‡ºå‘ï¼Œæˆ‘ä»¬åˆšå¥½å¯ä»¥ä¸²ä¸€æ¡ï¼š<strong>åˆçº§ â†’ ä¸­çº§ â†’ é«˜çº§ â†’ æ¶æ„</strong> çš„æˆé•¿è·¯å¾„ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€åˆçº§å‰ç«¯ï¼šèƒ½æŠŠæµç¨‹ä¸²èµ·æ¥ï¼Œå°±æ˜¯èƒœåˆ© ğŸ¯</h2>
<h3 data-id="heading-1">å…¸å‹å†™æ³•</h3>
<p>è¿˜æ˜¯è¿™æ®µæœ€â€œæœ´ç´ â€çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewContent</span>?.<span class="hljs-property">length</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">reviewForm</span>?.<span class="hljs-title function_">validate</span>();
  <span class="hljs-keyword">if</span> (!res || !res.<span class="hljs-property">ok</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(res?.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·å®Œå–„è‡ªè¯„ä¿¡æ¯'</span>);
  }
}

<span class="hljs-keyword">const</span> payload = {
  <span class="hljs-attr">reviewContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewContent</span>,
  <span class="hljs-attr">attachmentList</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">attachmentList</span>,
};

<span class="hljs-comment">// è°ƒç”¨æ¥å£ï¼Œæ¯”å¦‚ï¼šapi.submit(payload)</span>
</code></pre>
<p>é€»è¾‘å®Œå…¨æŒ‰è„‘å­é‡Œçš„æµç¨‹æ¥ï¼š</p>
<ol>
<li>æœ‰è‡ªè¯„å†…å®¹å—ï¼Ÿï¼ˆ<code>this.reviewContent?.length</code>ï¼‰</li>
<li>æœ‰çš„è¯å°±è°ƒç”¨å­è¡¨å•çš„ <code>validate()</code></li>
<li>æ ¡éªŒæ²¡è¿‡å°±å¼¹ä¸€æ¡é”™è¯¯æ¶ˆæ¯</li>
<li>æ ¡éªŒé€šè¿‡ï¼Œæ‹¼ä¸€ä¸ªè¯·æ±‚ä½“å¯¹è±¡</li>
<li>è°ƒæ¥å£</li>
</ol>
<h3 data-id="heading-2">è¿™ä¸ªé˜¶æ®µçš„ç‰¹ç‚¹</h3>
<ul>
<li>
<p>âœ… ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å†™èµ·æ¥éå¸¸å¿«ï¼›</li>
<li>è¯»èµ·æ¥ä¹Ÿå¾ˆç›´æ¥â€”â€”ä¸šåŠ¡åŒå­¦éƒ½èƒ½çœ‹æ‡‚ã€‚</li>
</ul>
</li>
<li>
<p>âŒ é—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>å¼ºè€¦åˆåœ¨å½“å‰ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>å‡è®¾ <code>$refs.reviewForm</code> ä¸€å®šå­˜åœ¨ï¼›</li>
<li>å‡è®¾ <code>validate()</code> è¿”å› <code>{ ok, message }</code>ï¼›</li>
<li>å‡è®¾æ¶ˆæ¯æç¤ºå¿…é¡»åœ¨è¿™é‡Œåšã€‚</li>
</ul>
</li>
<li>
<p>é€»è¾‘ã€UI æç¤ºã€payload ç»“æ„å…¨éƒ¨ç³Šåœ¨ä¸€èµ·ï¼›</p>
</li>
<li>
<p>è‹¥åˆ«çš„é¡µé¢ä¹Ÿè¦æâ€œå…ˆæ ¡éªŒå­è¡¨å•å†ç»„è£… payloadâ€ï¼Œå¾€å¾€æ˜¯å¤åˆ¶ç²˜è´´ä¸€ä»½å†æ”¹æ”¹å­—æ®µã€‚</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>åˆçº§é˜¶æ®µçš„æ ¸å¿ƒç›®æ ‡å…¶å®åªæœ‰ä¸€ä¸ªï¼š  <strong>â€œæˆ‘èƒ½æŠŠåŠŸèƒ½åšå‡ºæ¥ã€‚â€</strong><br/>
æƒ³åˆ°å“ªå†™åˆ°å“ªï¼Œæ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€ä¸­çº§å‰ç«¯ï¼šå¼€å§‹å¯¹â€œé‡å¤â€å’Œâ€œè€¦åˆâ€è¿‡æ• ğŸ§©</h2>
<p>å½“ä½ å†™äº†ç¬¬ä¸‰ã€ç¬¬å››ä¸ªç±»ä¼¼çš„æäº¤æµç¨‹åï¼Œä¼šå¼€å§‹çš±çœ‰å¤´ï¼š</p>
<ul>
<li>â€œæ€ä¹ˆåˆæ˜¯å…ˆ <code>validate</code> å†æ‹¼å¯¹è±¡ï¼Ÿâ€</li>
<li>â€œä¸ºä»€ä¹ˆåˆ°å¤„éƒ½æœ‰åŒæ ·çš„é”™è¯¯æç¤ºé€»è¾‘ï¼Ÿâ€</li>
<li>â€œè¿™è¦æ˜¯ä¿®æ”¹å­—æ®µåï¼Œä¸å¾—å…¨é¡¹ç›®æœç´¢ä¸€éï¼Ÿâ€</li>
</ul>
<p>è¿™æ—¶å€™ï¼Œå°±ä¼šè‡ªç„¶èµ°å‘ç¬¬ä¸€æ­¥æŠ½è±¡ï¼š<strong>æå–å·¥å…·å‡½æ•°</strong>ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šæŒ‰â€œæ¨¡å—â€æŠ½å‡½æ•°</h3>
<p>æ¯”å¦‚æˆ‘ä»¬ä¸ºè¿™å—è‡ªè¯„è¡¨å•å•ç‹¬å†™ä¸€ä¸ªå·¥å…·æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/reviewForm.js</span>

<span class="hljs-comment">// æ ¡éªŒè‡ªè¯„è¡¨å•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateReview</span>(<span class="hljs-params">vm</span>) {
  <span class="hljs-keyword">if</span> (!vm.<span class="hljs-property">reviewContent</span>?.<span class="hljs-property">length</span>) {
    <span class="hljs-comment">// æ²¡å¡«å†…å®¹ï¼Œè§†ä¸ºä¸éœ€è¦æ ¡éªŒ</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }

  <span class="hljs-keyword">const</span> form = vm.<span class="hljs-property">$refs</span>.<span class="hljs-property">reviewForm</span>;
  <span class="hljs-keyword">if</span> (!form || <span class="hljs-keyword">typeof</span> form.<span class="hljs-property">validate</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-comment">// çœ‹ä¸šåŠ¡éœ€æ±‚ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å¼‚å¸¸</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }

  <span class="hljs-keyword">const</span> res = form.<span class="hljs-title function_">validate</span>();

  <span class="hljs-keyword">if</span> (!res || res.<span class="hljs-property">ok</span> === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">const</span> msg = res?.<span class="hljs-property">message</span> || <span class="hljs-string">'è‡ªè¯„ä¿¡æ¯æ ¡éªŒæœªé€šè¿‡'</span>;
    vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">message</span>: msg };
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
}

<span class="hljs-comment">// æ„å»ºè‡ªè¯„ payload</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildReviewPayload</span>(<span class="hljs-params">vm</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">reviewContent</span>: vm.<span class="hljs-property">reviewContent</span>,
    <span class="hljs-attr">attachmentList</span>: vm.<span class="hljs-property">attachmentList</span>,
  };
}
</code></pre>
<p>ç»„ä»¶é‡Œå°±å¯ä»¥è¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { validateReview, buildReviewPayload } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/reviewForm'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { ok } = <span class="hljs-title function_">validateReview</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-keyword">if</span> (!ok) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> payload = <span class="hljs-title function_">buildReviewPayload</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">submit</span>(payload);
}
</code></pre>
<h3 data-id="heading-5">ä¸­çº§å‰ç«¯çš„æ€ç»´å˜åŒ–</h3>
<ul>
<li>ä¸å†æ»¡è¶³äºâ€œèƒ½è·‘â€ï¼Œå¼€å§‹è¿½æ±‚â€œä»¥åå¥½æ”¹ä¸€ç‚¹â€ï¼›</li>
<li>èƒ½æ„è¯†åˆ°ï¼šå¯ä»¥æŠŠ<strong>å…¬å…±é€»è¾‘æŠ½æˆå‡½æ•°</strong>ï¼Œé¿å…é‡å¤ç²˜è´´ï¼›</li>
<li>ä½†æŠ½è±¡ç²’åº¦é€šå¸¸è¿˜æ˜¯<strong>æŒ‰ä¸šåŠ¡æ¨¡å—åˆ’åˆ†</strong>ï¼š<br/>
<code>reviewFormUtils</code>ã€<code>baseInfoUtils</code>ã€<code>priceUtils</code>â€¦â€¦</li>
</ul>
<p>å°è£…æœ‰äº†ï¼Œä»£ç å¥½äº†ä¸å°‘ï¼Œä½†è¿˜åœç•™åœ¨â€œ<strong>æ¯ä¸ªä¸šåŠ¡æ¨¡å—ä¸€å¥—</strong>â€çš„é˜¶æ®µï¼š<br/>
æ¯åŠ ä¸€ä¸ªæ–°è¡¨å•ï¼Œåˆæ˜¯ä¸€ç»„æ–°çš„ <code>validateXxx + buildXxxPayload</code>ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€é«˜çº§å‰ç«¯ï¼šä»â€œå°è£…â€èµ°å‘â€œæŠ½è±¡æ¨¡å¼â€ ğŸ§ </h2>
<p>å†å¾€å‰èµ°ä¸€æ­¥ï¼Œä½ ä¼šå¼€å§‹é—®æ›´æœ‰æ„æ€çš„é—®é¢˜ï¼š</p>
<blockquote>
<ul>
<li>è¿™äº›æ ¡éªŒ + payload çš„å¥—è·¯ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Ÿ</li>
<li>å“ªäº›æ˜¯â€œæµç¨‹â€ï¼Œå“ªäº›æ˜¯â€œç­–ç•¥/ç»†èŠ‚â€ï¼Ÿ</li>
<li>æˆ‘èƒ½ä¸èƒ½å†™ä¸€ä»½é€šç”¨é€»è¾‘ï¼Œè®©æ‰€æœ‰è¡¨å•éƒ½ç”¨ï¼Ÿ</li>
</ul>
</blockquote>
<h3 data-id="heading-7">1ï¼‰æç‚¼é€šç”¨æµç¨‹ï¼šgetPayload</h3>
<p>è§‚å¯Ÿä¼šå‘ç°ï¼Œæ¯ä¸ªè¡¨å•æäº¤æµç¨‹å‡ ä¹éƒ½æ˜¯ï¼š</p>
<ol>
<li>æ ¹æ®æŸä¸ª <code>ref</code> æ‹¿åˆ°å­è¡¨å•ç»„ä»¶ï¼›</li>
<li>è°ƒç”¨ <code>validate()</code> åšæ ¡éªŒï¼›</li>
<li>å¦‚æœå¤±è´¥ â†’ æç¤ºå¹¶ä¸­æ–­ï¼›</li>
<li>å¦‚æœæˆåŠŸ â†’ æ ¹æ®å½“å‰ç»„ä»¶æ•°æ®æ„é€  payloadã€‚</li>
</ol>
<p>äºæ˜¯å¯ä»¥å†™å‡ºä¸€ä¸ª<strong>åªå…³å¿ƒæµç¨‹</strong>çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/getPayload.js</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vue</span>} <span class="hljs-variable">vm</span> - å½“å‰ç»„ä»¶å®ä¾‹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">buildPayload</span> - (vm) =&gt; payload å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">String</span>} <span class="hljs-variable">refName</span> - å­è¡¨å•çš„ ref å
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPayload</span>(<span class="hljs-params">vm, buildPayload, refName</span>) {
  <span class="hljs-keyword">const</span> form = vm.<span class="hljs-property">$refs</span>?.[refName];

  <span class="hljs-comment">// æ²¡æœ‰è¿™ä¸ªè¡¨å•ï¼šè§†ä¸ºæ— éœ€æ ¡éªŒï¼Œç›´æ¥æ‹¼ payload</span>
  <span class="hljs-keyword">if</span> (!form || <span class="hljs-keyword">typeof</span> form.<span class="hljs-property">validate</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">payload</span>: <span class="hljs-title function_">buildPayload</span>(vm) };
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handle</span> = (<span class="hljs-params">res</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!res || res.<span class="hljs-property">ok</span> === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">const</span> msg = res?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒæœªé€šè¿‡'</span>;
      vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">payload</span>: <span class="hljs-title function_">buildPayload</span>(vm) };
  };

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> maybe = form.<span class="hljs-title function_">validate</span>();

    <span class="hljs-comment">// æ”¯æŒ Promise é£æ ¼çš„ validate</span>
    <span class="hljs-keyword">if</span> (maybe &amp;&amp; <span class="hljs-keyword">typeof</span> maybe.<span class="hljs-property">then</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> maybe.<span class="hljs-title function_">then</span>(handle).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> msg = e?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒå¼‚å¸¸'</span>;
        vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
      });
    }

    <span class="hljs-comment">// åŒæ­¥è¿”å›</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(maybe);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">const</span> msg = e?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒå¼‚å¸¸'</span>;
    vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
  }
}
</code></pre>
<p>ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { getPayload } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/getPayload'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPayload</span>(
    <span class="hljs-variable language_">this</span>,
    <span class="hljs-function">(<span class="hljs-params">vm</span>) =&gt;</span> ({
      <span class="hljs-attr">reviewContent</span>: vm.<span class="hljs-property">reviewContent</span>,
      <span class="hljs-attr">attachmentList</span>: vm.<span class="hljs-property">attachmentList</span>,
    }),
    <span class="hljs-string">'reviewForm'</span>,
  );

  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">submit</span>(res.<span class="hljs-property">payload</span>);
}
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>getPayload</code>ï¼š</p>
<ul>
<li>ä¸å†å…³å¿ƒ payload ç»“æ„ï¼›</li>
<li>ä¸å†å…³å¿ƒå…·ä½“ä¸šåŠ¡ï¼Œåªè´Ÿè´£ï¼š<br/>
<strong>â€œæ‰¾åˆ°è¡¨å• â†’ æ ¡éªŒ â†’ é”™è¯¯å¤„ç† â†’ è°ƒç”¨å‚æ•°æ„é€  payloadâ€</strong> ã€‚</li>
</ul>
<h3 data-id="heading-8">2ï¼‰è¿™é‡Œå·²ç»æœ‰è®¾è®¡æ¨¡å¼çš„å½±å­</h3>
<ul>
<li>
<p><code>getPayload</code> åƒæ˜¯ä¸€ä¸ªå°å·çš„ <strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ï¼ˆTemplate Methodï¼‰ï¼š</p>
<ul>
<li>å›ºå®šäº†æµç¨‹ï¼š<strong>æ ¡éªŒ â†’ é”™è¯¯å¤„ç† â†’ æ„å»º payload</strong>ï¼›</li>
<li>æŠŠâ€œpayload æ€ä¹ˆæ„â€è¿™ä¸€æ®µç•™ç»™è°ƒç”¨æ–¹ï¼ˆä½œä¸ºâ€œæ¨¡æ¿ä¸­çš„å¯å˜æ­¥éª¤â€ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><code>buildPayload</code> å®é™…ä¸Šä¹Ÿç¬¦åˆ <strong>ç­–ç•¥æ¨¡å¼</strong>ï¼ˆStrategyï¼‰çš„æ€è·¯ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªå¤„ç†æµç¨‹ï¼Œæ ¹æ®ä¸åŒç­–ç•¥å‡½æ•°ï¼ˆbuildXxxPayloadï¼‰ï¼Œæ„å»ºä¸åŒä¸šåŠ¡æ•°æ®ã€‚</li>
</ul>
</li>
</ul>
<p>é«˜çº§å‰ç«¯çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸åªæ˜¯â€œä¼šå°è£…â€ï¼Œè€Œæ˜¯ä¼šä»é€»è¾‘é‡Œè¯†åˆ«å‡º<strong>æ¨¡å¼</strong>ï¼›</li>
<li>èƒ½æŠŠâ€œç¨³å®šçš„éƒ¨åˆ†â€å’Œâ€œæ˜“å˜çš„éƒ¨åˆ†â€æ‹†å¼€ï¼Œåˆ†åˆ«å¯¹å¾…ï¼›</li>
<li>ä¼šåˆ»æ„è®©ä»£ç æœ‰<strong>å¯æ‰©å±•ç‚¹</strong>ï¼Œè€Œä¸æ˜¯ä¸ºäº†å½“å‰éœ€æ±‚æŠŠä¸œè¥¿éƒ½ç„Šæ­»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€å‰ç«¯æ¶æ„ï¼šæŠŠâ€œè¡¨å•æ ¡éªŒ + payloadâ€å‡çº§æˆä¸€ç§é€šç”¨èƒ½åŠ› ğŸ—ï¸</h2>
<p>å†å¾€ä¸Šä¸€ä¸ªæ®µä½ï¼Œå‰ç«¯æ¶æ„è€ƒè™‘çš„ä¸åªæ˜¯â€œè¿™æ®µä»£ç å†™å¾—å¥½ä¸å¥½çœ‹â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>â€œè¿™ç§æ¨¡å¼åœ¨<strong>æ•´ä¸ªé¡¹ç›®èŒƒå›´å†…</strong>ï¼Œè¦æ€ä¹ˆç”¨ã€æ€ä¹ˆæ¼”è¿›ï¼Ÿâ€</p>
</blockquote>
<p>å¦‚æœå…¨ç«™æœ‰ N ä¸ªå­è¡¨å•ï¼Œæ¯ä¸ªéƒ½è¦ï¼š</p>
<ul>
<li>ref + validate</li>
<li>å†æ‹¼å„è‡ªçš„ payload</li>
</ul>
<p>é‚£ä¹ˆæ¶æ„ä¼šæ›´å€¾å‘äºåšä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p>æŠŠè¿™ç§æ¨¡å¼<strong>æ­£å¼å‘½åã€æŠ½è±¡æˆä¸€ç±»â€˜èƒ½åŠ›â€™</strong>ï¼Œç„¶åç”±æ‰€æœ‰é¡µé¢å…±åŒå¤ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-10">1ï¼‰ç”¨é…ç½®è¡¨è¾¾â€œè¡¨å• â†’ payloadâ€çš„æ˜ å°„å…³ç³»</h3>
<p>å…ˆæŠŠâ€œè¿™ä¸ª ref å¯¹åº”ä»€ä¹ˆ payloadâ€æŠ½æˆé…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// config/formPayloadMap.js</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> formPayloadMap = {
  <span class="hljs-comment">// è‡ªè¯„è¡¨å•</span>
  <span class="hljs-title function_">reviewForm</span>(<span class="hljs-params">vm</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">reviewContent</span>: vm.<span class="hljs-property">reviewContent</span>,
      <span class="hljs-attr">attachmentList</span>: vm.<span class="hljs-property">attachmentList</span>,
    };
  },

  <span class="hljs-comment">// åŸºç¡€ä¿¡æ¯è¡¨å•</span>
  <span class="hljs-title function_">baseForm</span>(<span class="hljs-params">vm</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">baseInfo</span>: vm.<span class="hljs-property">baseInfo</span>,
      <span class="hljs-attr">projectId</span>: vm.<span class="hljs-property">projectId</span>,
    };
  },

  <span class="hljs-comment">// æŠ¥ä»·è¡¨å•</span>
  <span class="hljs-title function_">priceForm</span>(<span class="hljs-params">vm</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">priceList</span>: vm.<span class="hljs-property">priceList</span>,
    };
  },

  <span class="hljs-comment">// â€¦â€¦</span>
};
</code></pre>
<h3 data-id="heading-11">2ï¼‰getPayloadï¼šåªéœ€è¦ä¼  refName</h3>
<p>ç°åœ¨æ”¹é€  <code>getPayload</code>ï¼Œå˜æˆåªéœ€è¦ <code>vm + refName</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/getPayload.js</span>
<span class="hljs-keyword">import</span> { formPayloadMap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/config/formPayloadMap'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPayload</span>(<span class="hljs-params">vm, refName</span>) {
  <span class="hljs-keyword">const</span> buildPayload = formPayloadMap[refName];

  <span class="hljs-keyword">if</span> (!buildPayload) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`[getPayload] æœªé…ç½® ref "<span class="hljs-subst">${refName}</span>" å¯¹åº”çš„ payload æ„é€ å‡½æ•°`</span>);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">`æœªé…ç½® <span class="hljs-subst">${refName}</span> æ˜ å°„`</span> };
  }

  <span class="hljs-keyword">const</span> form = vm.<span class="hljs-property">$refs</span>?.[refName];

  <span class="hljs-comment">// æ²¡æœ‰è¡¨å•ï¼šè§†ä¸ºæ— éœ€æ ¡éªŒï¼Œç›´æ¥æ‹¼ payload</span>
  <span class="hljs-keyword">if</span> (!form || <span class="hljs-keyword">typeof</span> form.<span class="hljs-property">validate</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">payload</span>: <span class="hljs-title function_">buildPayload</span>(vm) };
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handle</span> = (<span class="hljs-params">res</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!res || res.<span class="hljs-property">ok</span> === <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">const</span> msg = res?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒæœªé€šè¿‡'</span>;
      vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">payload</span>: <span class="hljs-title function_">buildPayload</span>(vm) };
  };

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> maybe = form.<span class="hljs-title function_">validate</span>();

    <span class="hljs-keyword">if</span> (maybe &amp;&amp; <span class="hljs-keyword">typeof</span> maybe.<span class="hljs-property">then</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> maybe
        .<span class="hljs-title function_">then</span>(handle)
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> msg = e?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒå¼‚å¸¸'</span>;
          vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
        });
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(maybe);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">const</span> msg = e?.<span class="hljs-property">message</span> || <span class="hljs-string">'æ ¡éªŒå¼‚å¸¸'</span>;
    vm.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(msg);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">message</span>: msg };
  }
}
</code></pre>
<p>ç»„ä»¶é‡Œçš„ä½¿ç”¨ä½“éªŒå°±å˜æˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { getPayload } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/getPayload'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPayload</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'reviewForm'</span>);
  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">submit</span>(res.<span class="hljs-property">payload</span>);
}
</code></pre>
<p><strong>è°ƒç”¨æ–¹åªéœ€è¦å…³å¿ƒï¼š</strong></p>
<ul>
<li>â€œæˆ‘è¿™å—ç”¨çš„æ˜¯å“ªä¸ª <code>ref</code> çš„è¡¨å•ï¼Ÿâ€</li>
</ul>
<p>è‡³äºï¼š</p>
<ul>
<li>è¦ä¸è¦æ ¡éªŒï¼›</li>
<li>æ ¡éªŒæ€ä¹ˆæç¤ºï¼›</li>
<li>payload å­—æ®µæ€ä¹ˆç»„è£…ï¼›</li>
</ul>
<p>å…¨éƒ¨ç”±ç»Ÿä¸€æœºåˆ¶ + é…ç½®æ¥å¤„ç†ã€‚</p>
<h3 data-id="heading-12">3ï¼‰æ¶æ„è§†è§’ä¸‹ï¼Œå¤šäº†å‡ ä»¶äº‹è¦è€ƒè™‘</h3>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ€è€ƒé‡å¿ƒå˜æˆäº†ï¼š</p>
<ul>
<li>
<p><strong>ä¸€è‡´æ€§</strong>ï¼š</p>
<ul>
<li>è¡¨å•æ ¡éªŒè¡Œä¸ºç»Ÿä¸€ï¼›</li>
<li>é”™è¯¯æç¤ºç»Ÿä¸€ï¼›</li>
<li>payload ç»“æ„çš„è°ƒæ•´æœ‰ç»Ÿä¸€å…¥å£ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯é…ç½® / å¯æ‰©å±•</strong>ï¼š</p>
<ul>
<li>
<p>æ–°å¢è¡¨å•åªéœ€è¦ï¼š</p>
<ol>
<li>çº¦å®šå¥½ ref åï¼›</li>
<li>åœ¨ <code>formPayloadMap</code> é‡ŒåŠ ä¸€ä¸ªæ„é€ å‡½æ•°ï¼›</li>
</ol>
</li>
<li>
<p>å¯¹æ ¸å¿ƒæµç¨‹æ— ä¾µå…¥ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é¢†åŸŸåŒ–</strong>ï¼š</p>
<ul>
<li>ä¸å†æŠŠå­è¡¨å•å½“æˆâ€œæŸä¸ªé¡µé¢çš„å®ç°ç»†èŠ‚â€ï¼Œ<br/>
è€Œæ˜¯å½“æˆé¢†åŸŸé‡Œçš„ä¸€ä¸ªâ€œå®ä½“â€ï¼š<br/>
<code>reviewForm</code>ã€<code>baseForm</code>ã€<code>priceForm</code>â€¦â€¦</li>
<li>æ¯ä¸ªå®ä½“éƒ½æœ‰â€œæ ¡éªŒ + æ„é€ è¯·æ±‚ä½“â€çš„ç»Ÿä¸€æ¥å£ã€‚</li>
</ul>
</li>
<li>
<p><strong>é•¿æœŸæ¼”è¿›æˆæœ¬</strong>ï¼š</p>
<ul>
<li>
<p>å°†æ¥å¦‚æœï¼š</p>
<ul>
<li>æ”¹ç”¨æ–°çš„ UI è¡¨å•åº“ï¼›</li>
<li>æ•°æ®ç»“æ„å‡çº§ï¼›</li>
<li>Vue2 å‡ Vue3ï¼›</li>
</ul>
</li>
<li>
<p>â€”â€”ç»å¤§å¤šæ•°æ”¹åŠ¨éƒ½å¯ä»¥é™åˆ¶åœ¨å°èŒƒå›´å†…å®Œæˆã€‚</p>
</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-13">äº”ã€åŒä¸€ä¸ªéœ€æ±‚ï¼Œä¸åŒæ®µä½çš„å·®åˆ«åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬æ¯ä¸ªé˜¶æ®µçš„å¿ƒæ™ºæ¨¡å¼ï¼š</p>
<ul>
<li>
<p><strong>åˆçº§å‰ç«¯ï¼š</strong></p>
<blockquote>
<p>â€œæˆ‘èƒ½æŠŠè¿™ä¸ªæµç¨‹ä¸²èµ·æ¥ï¼Œè®©å®ƒè·‘èµ·æ¥ã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>ä¸­çº§å‰ç«¯ï¼š</strong></p>
<blockquote>
<p>â€œè¿™é‡Œæœ‰é‡å¤ï¼Œæˆ‘æŠ½ä¸€ä¸ªå‡½æ•°å‡ºæ¥ï¼Œå¤§å®¶éƒ½ç”¨ã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>é«˜çº§å‰ç«¯ï¼š</strong></p>
<blockquote>
<p>â€œè¿™æ˜¯ä¸€ç§æ¨¡å¼ã€‚<br/>
å“ªäº›æ˜¯ç¨³å®šæµç¨‹ï¼Ÿå“ªäº›æ˜¯å¯å˜ç­–ç•¥ï¼Ÿ<br/>
æˆ‘æ€ä¹ˆè®¾è®¡æŠ½è±¡ï¼Œè®©ä¸€ä»½é€»è¾‘æœåŠ¡å¤šä¸ªä¸šåŠ¡ï¼Ÿâ€</p>
</blockquote>
</li>
<li>
<p><strong>å‰ç«¯æ¶æ„ï¼š</strong></p>
<blockquote>
<p>â€œè¿™ä¸ä»…æ˜¯ä¸ªå·¥å…·å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç±»â€˜é€šç”¨èƒ½åŠ›â€™ã€‚<br/>
æˆ‘è¦ç”¨æœºåˆ¶ + é…ç½®ï¼ŒæŠŠå®ƒå˜æˆæ•´ä¸ªé¡¹ç›®çš„åŸºç¡€è®¾æ–½ã€‚â€</p>
</blockquote>
</li>
</ul>
<p>è€Œæœ€åˆé‚£æ®µçœ‹èµ·æ¥æœ‰ç‚¹â€œé¢æ¡å‘³â€çš„ä»£ç ï¼Œå…¶å®åªæ˜¯èµ·ç‚¹ã€‚</p>
<p><strong>å½“ä½ å¼€å§‹å«Œå¼ƒè¿™ç±»ä»£ç ï¼Œå¼€å§‹æ€è€ƒâ€œèƒ½ä¸èƒ½æŠ½è±¡ã€èƒ½ä¸èƒ½é€šç”¨â€çš„é‚£ä¸€åˆ»ï¼Œä½ å°±å·²ç»åœ¨ä»â€œå†™ä»£ç çš„äººâ€ï¼Œå‘â€œè®¾è®¡ä»£ç çš„äººâ€è¿ˆè¿›äº†ã€‚</strong></p>
<hr/>
<p>å¦‚æœä½ ç°åœ¨é¡¹ç›®é‡Œæ­£å¥½åˆ°å¤„éƒ½æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">xxx</span>.<span class="hljs-title function_">validate</span>();
<span class="hljs-comment">// if (!res.ok) ...</span>
<span class="hljs-comment">// const payload = { ... }</span>
</code></pre>
<p>ä¸å¦¨æ‰¾ä¸€ä¸ªæœ€å…¸å‹çš„æäº¤æµç¨‹ï¼Œä»ï¼š</p>
<blockquote>
<p>ç›´æ¥å†™ â†’ æå–å‡½æ•° â†’ é€šç”¨æµç¨‹ + ç­–ç•¥ â†’ é…ç½®åŒ–</p>
</blockquote>
<p>è¿™å››æ­¥è·¯å¾„é‡Œï¼Œé€‰ä½ è§‰å¾—<strong>å½“å‰å›¢é˜Ÿèƒ½æ¥å—çš„ä¸€æ­¥</strong>å…ˆè½åœ°ã€‚<br/>
æŠ€æœ¯æˆé•¿å¾ˆå¤šæ—¶å€™ä¸æ˜¯æ¢æ¡†æ¶ã€è¿½æ–°åº“ï¼Œè€Œæ˜¯æå®šè¿™ç§â€œçœ‹èµ·æ¥å¾ˆå°ï¼Œä½†æ— å¤„ä¸åœ¨â€çš„æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-14">å…­ã€å¦‚æœä¸šåŠ¡ç»§ç»­å˜å¤æ‚ï¼šå¾€â€œå»ºé€ è€…é£æ ¼â€è¿›åŒ– ğŸ§±</h2>
<p>å‰é¢é‚£å¥— <code>getPayload + formPayloadMap</code>ï¼Œè¶³ä»¥è¦†ç›–<strong>å¤§éƒ¨åˆ†å¸¸è§„ä¸šåŠ¡è¡¨å•</strong>åœºæ™¯ï¼š</p>
<ul>
<li>æ¯ä¸ªè¡¨å•çš„ payload ç»“æ„ç›¸å¯¹å›ºå®šï¼›</li>
<li>åªè¦ä» <code>vm</code> ä¸Šæ‘˜å‡ ä¸ªå­—æ®µæ‹¼ä¸€ä¸‹å°±è¡Œã€‚</li>
</ul>
<p>ä½†çœŸå®é¡¹ç›®æœ‰æ—¶å€™ä¼šé•¿æˆè¿™æ ·ï¼š</p>
<blockquote>
<ul>
<li>æŸäº›å­—æ®µæ˜¯ã€Œå‹¾é€‰äº†æŸä¸ªå¼€å…³æ‰éœ€è¦æ‹¼è¿›å»ã€</li>
<li>æŸäº›ç‰‡æ®µè¦æŒ‰ä¸åŒçš„ä¸šåŠ¡ç±»å‹ç»„åˆï¼ˆæ¯”å¦‚ï¼šæ™®é€šæµç¨‹ / åŠ æ€¥æµç¨‹ / å®¡æ‰¹æµï¼‰</li>
<li>æœ‰æ—¶è¿˜éœ€è¦å…ˆå¼‚æ­¥æ‹¿ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå†å‚ä¸æ„å»º payload</li>
</ul>
</blockquote>
<p>è¿™æ—¶å€™ï¼Œç®€å•çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js">formPayloadMap[refName](vm) {
  <span class="hljs-keyword">return</span> { ... };
}
</code></pre>
<p>å°±å¯èƒ½å¼€å§‹å˜å¾—åˆé•¿åˆä¸‘äº†ï¼šé‡Œé¢å……æ»¡ if / switch / ä¸‰å…ƒè¿ç®—ç¬¦ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥è€ƒè™‘å¾€**â€œå»ºé€ è€…é£æ ¼ï¼ˆBuilder-styleï¼‰â€**ä¸Šè¿›åŒ–ï¼š<br/>
æŠŠä¸€ä¸ªâ€œå¤§ payloadâ€æ‹†æˆå¤šä¸ªå¯ç»„åˆçš„æ„å»ºæ­¥éª¤ã€‚</p>
<h3 data-id="heading-15">1ï¼‰ä¸€ä¸ªç®€åŒ–ç‰ˆ PayloadBuilder ç¤ºä¾‹</h3>
<p>å…ˆæ¥ä¸ªæœ€å°å¯ç”¨çš„ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// builders/PayloadBuilder.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PayloadBuilder</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">vm</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span> = vm;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = {};
  }

  <span class="hljs-title function_">withReview</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">reviewContent</span>?.<span class="hljs-property">length</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">reviewContent</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">reviewContent</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">withAttachments</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">attachmentList</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">attachmentList</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">attachmentList</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">withBaseInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">baseInfo</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">baseInfo</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>.<span class="hljs-property">baseInfo</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// ä½ å¯ä»¥ç»§ç»­åŠ æ›´å¤š withXxx æ¨¡å—â€¦</span>

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>;
  }
}
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼ˆä¸¾ä¸ªåœºæ™¯ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PayloadBuilder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/builders/PayloadBuilder'</span>;
<span class="hljs-keyword">import</span> { getPayload } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/getPayload'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPayload</span>(
    <span class="hljs-variable language_">this</span>,
    <span class="hljs-function">(<span class="hljs-params">vm</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PayloadBuilder</span>(vm)
      .<span class="hljs-title function_">withReview</span>()
      .<span class="hljs-title function_">withAttachments</span>()
      .<span class="hljs-title function_">withBaseInfo</span>()
      .<span class="hljs-title function_">build</span>(),
    <span class="hljs-string">'reviewForm'</span>,
  );

  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">submit</span>(res.<span class="hljs-property">payload</span>);
}
</code></pre>
<p>è¿™é‡Œå‘ç”Ÿäº†å‡ ä»¶äº‹ï¼š</p>
<ul>
<li>
<p><code>getPayload</code> ä»ç„¶è´Ÿè´£ï¼š<br/>
<strong>æ‰¾åˆ° ref â†’ æ ¡éªŒ â†’ é”™è¯¯å¤„ç†</strong>ï¼›</p>
</li>
<li>
<p>å…·ä½“ payload æ„å»ºè¿‡ç¨‹äº¤ç»™ <code>PayloadBuilder</code>ï¼š</p>
<ul>
<li>æ¯ä¸ª <code>withXxx()</code> è´Ÿè´£ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼›</li>
<li><code>build()</code> è¿”å›æœ€ç»ˆå¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
<p>å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>
<p>å¯ä»¥éå¸¸è‡ªç„¶åœ°æŒ‰ä¸šåŠ¡ç»„åˆï¼š</p>
<ul>
<li>æŸäº›åœºæ™¯åªè¦ <code>.withReview().withAttachments()</code></li>
<li>å¦ä¸€äº›åœºæ™¯å† <code>.withBaseInfo().withSomethingElse()</code></li>
</ul>
</li>
<li>
<p>å•ä¸ª <code>withXxx</code> å†…éƒ¨é€»è¾‘å˜å¤æ‚ä¹Ÿä¸æ€•ï¼Œ<strong>ä¸ä¼šæŠŠä¸€ä¸ªå‡½æ•°ææˆ 200 è¡Œ if-else</strong>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-16">2ï¼‰ä»€ä¹ˆæ—¶å€™æ‰å€¼å¾—ç”¨ Builder é£æ ¼ï¼Ÿ</h3>
<p>ç®€å•ç²—æš´çš„åˆ¤æ–­ï¼š</p>
<ul>
<li>
<p>âœ… <strong>å€¼å¾—ä¸Š Builder çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>payload çœŸçš„æ˜¯**ã€Œå¾ˆå¤šå—æ‹¼èµ·æ¥ã€**çš„ï¼›</li>
<li>ä¸åŒä¸šåŠ¡åœºæ™¯éœ€è¦ã€Œé€‰æ‹©æ€§å¯ç”¨æŸäº›å—ã€ï¼›</li>
<li>æ¯å—å†…éƒ¨é€»è¾‘éƒ½å¯èƒ½å˜å¾—å¾ˆå¤æ‚ï¼ˆå¤šæ¡ä»¶ã€å¤šåˆ†æ”¯ã€ç”šè‡³å¼‚æ­¥ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>âŒ <strong>æ²¡å¿…è¦ä¸Š Builder çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>åªæ˜¯æŠŠ 3ï½5 ä¸ªå­—æ®µä¸¢è¿›å¯¹è±¡é‡Œï¼›</li>
<li>å˜åŠ¨å¾ˆå°‘ï¼Œå¤§éƒ¨åˆ†å­—æ®µéƒ½æ˜¯ 1:1 æ˜ å°„ï¼›</li>
<li>æ²¡æœ‰å¤æ‚çš„ç»„åˆé€»è¾‘ã€‚</li>
</ul>
</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p>Builder é£æ ¼çš„ä»·å€¼ï¼Œåœ¨äº<strong>æŠŠä¸€ä¸ªå¤æ‚æ„å»ºè¿‡ç¨‹æ‹†æˆå¤šä¸ªå¯ç»„åˆçš„å°æ¨¡å—</strong>ã€‚<br/>
å¦‚æœä½ çš„ä¸šåŠ¡æ²¡æœ‰å¤æ‚åˆ°è¿™ä¸ªç¨‹åº¦ï¼Œ<br/>
ç°åœ¨è¿™å¥— <code>formPayloadMap[refName](vm)</code> + å°‘é‡ ifï¼Œå…¶å®å·²ç»åˆšåˆšå¥½ã€‚</p>
</blockquote>
<h3 data-id="heading-17">3ï¼‰å’Œå‰é¢å‡ çº§æŠ½è±¡çš„å…³ç³»</h3>
<p>å¯ä»¥æŠŠè¿™å‡ å±‚ç†è§£æˆã€Œæ¸è¿›å¢å¼ºã€ï¼š</p>
<ul>
<li>
<p>Lv.3 é«˜çº§å‰ç«¯ï¼š</p>
<blockquote>
<p><code>getPayload(vm, buildPayload, refName)</code></p>
</blockquote>
<ul>
<li>é€šç”¨æµç¨‹ + ç­–ç•¥å‡½æ•°ï¼Œå·²ç»å¾ˆå¥½ç”¨äº†ã€‚</li>
</ul>
</li>
<li>
<p>Lv.4/æ¶æ„é˜¶æ®µï¼š</p>
<blockquote>
<p>é…ä¸€ä¸ª <code>formPayloadMap[refName] = buildPayload</code></p>
</blockquote>
<ul>
<li>æŠŠâ€œè°è´Ÿè´£æ„å»ºä»€ä¹ˆâ€é›†ä¸­ç®¡ç†ã€‚</li>
</ul>
</li>
<li>
<p>Builder é£æ ¼ï¼š</p>
<blockquote>
<p>åœ¨å•ä¸ª <code>buildPayload(vm)</code> çš„å®ç°å†…éƒ¨ï¼Œå¦‚æœé€»è¾‘å˜å¤æ‚ï¼Œå†å¼•å…¥ <code>PayloadBuilder</code></p>
</blockquote>
<ul>
<li>æ˜¯å¯¹<strong>æŸä¸€ä¸ªé¢†åŸŸçš„æ„å»ºç»†èŠ‚</strong>åšè¿›ä¸€æ­¥æ‹†åˆ†ï¼Œè€Œä¸æ˜¯æ¨ç¿»æ•´ä¸ªä½“ç³»ã€‚</li>
</ul>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>Builder ä¸æ˜¯æ›¿ä»£å‰é¢çš„æŠ½è±¡ï¼Œè€Œæ˜¯ä¸ºã€ŒæŸä¸ªå¤æ‚ payloadã€åŠ çš„ä¸€å±‚â€œç²¾ç»†åŒ–æ„å»ºå·¥å…·â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-18">ä¸ƒã€è¿™æ¡è·¯è¿˜èƒ½æ€ä¹ˆèµ°ï¼Ÿä¸€äº›æ‰©å±•æ–¹å‘æ€è·¯ ğŸš€</h2>
<p>æœ€åé¡ºå¸¦èŠå‡ ä¸ªå¯ä»¥ç»§ç»­è¿›åŒ–çš„æ–¹å‘ï¼Œä½ å¯ä»¥æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µæ…¢æ…¢åŠ ï¼Œä¸ç”¨ä¸€å£åƒèƒ–å­ã€‚</p>
<h3 data-id="heading-19">1ï¼‰é…åˆ TypeScript åšå¼ºç±»å‹çº¦æŸ</h3>
<p>å½“å‰çš„å†™æ³•éƒ½æ˜¯ JS é è‡ªè§‰ï¼š</p>
<ul>
<li><code>formPayloadMap</code> çš„ key/è¿”å›ç»“æ„å®Œå…¨é çº¦å®šï¼›</li>
<li><code>getPayload</code> çš„è¿”å› <code>{ ok, payload }</code> ä¹Ÿæ²¡æœ‰ç±»å‹æç¤ºã€‚</li>
</ul>
<p>å¦‚æœç”¨ TSï¼Œå¯ä»¥åšå‡ ä»¶äº‹ï¼š</p>
<ul>
<li>
<p>ä¸º <code>formPayloadMap</code> å»ºç«‹ä¸€ä¸ªç»Ÿä¸€çš„ç±»å‹ Mapï¼š</p>
<ul>
<li>æ¯”å¦‚ï¼š<code>type FormPayloadMap = { reviewForm: ReviewPayload; baseForm: BasePayload; ... }</code></li>
</ul>
</li>
<li>
<p>è®© <code>getPayload</code> æ ¹æ® <code>refName</code> è¿”å›ä¸åŒçš„ payload ç±»å‹ï¼ˆæ³›å‹ + ç´¢å¼•ç±»å‹ï¼‰ï¼›</p>
</li>
<li>
<p>ç»™ <code>PayloadBuilder</code> æ¯ä¸ª <code>withXxx()</code> åŠ ä¸Šè¿”å›ç±»å‹çº¦æŸï¼Œé˜²æ­¢æ¼å­—æ®µ/å†™é”™å­—æ®µåã€‚</p>
</li>
</ul>
<p>å¥½å¤„æ˜¯ï¼š<strong>ä¸€æ—¦åç«¯æ”¹äº†å­—æ®µï¼ŒTS èƒ½ç¬¬ä¸€æ—¶é—´æŠŠç›¸å…³ä»£ç å…¨æ ‡çº¢</strong>ï¼Œä½ å°±ä¸éœ€è¦é â€œå…¨å±€æœç´¢ + ç¥ˆç¥·â€ã€‚</p>
<h3 data-id="heading-20">2ï¼‰ç»Ÿä¸€æˆâ€œå¤šè¡¨å•èšåˆâ€çš„æµç¨‹</h3>
<p>å¾ˆå¤šçœŸå®é¡µé¢ä¸æ˜¯åªæœ‰ä¸€ä¸ªå­è¡¨å•ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>é¡¶å±‚é¡µé¢ â†’ N ä¸ªå­å—ï¼ˆåŸºç¡€ä¿¡æ¯ã€è‡ªè¯„ã€æŠ¥ä»·ã€é™„ä»¶â€¦â€¦ï¼‰<br/>
æœ€åç»Ÿä¸€ç‚¹ä¸€ä¸ªã€Œæäº¤ã€ï¼Œè¦æ ¡éªŒæ‰€æœ‰å­å—ï¼Œç»„åˆæ‰€æœ‰ payloadã€‚</p>
</blockquote>
<p>åœ¨ç°æœ‰åŸºç¡€ä¸Šï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸ªâ€œå¤šè¡¨å•èšåˆå™¨â€ï¼Œä¼ªä»£ç ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">collectAllPayloads</span>(<span class="hljs-params">vm, configList</span>) {
  <span class="hljs-keyword">const</span> allPayload = {};

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cfg <span class="hljs-keyword">of</span> configList) {
    <span class="hljs-keyword">const</span> { refName, mountPoint } = cfg;
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPayload</span>(vm, refName);
    <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span> };

    <span class="hljs-comment">// mountPoint å†³å®šè¿™å— payload æŒ‚åœ¨æœ€ç»ˆå¯¹è±¡çš„å“ªé‡Œ</span>
    allPayload[mountPoint] = res.<span class="hljs-property">payload</span>;
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">payload</span>: allPayload };
}
</code></pre>
<p>è°ƒç”¨æ—¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">collectAllPayloads</span>(<span class="hljs-variable language_">this</span>, [
  { <span class="hljs-attr">refName</span>: <span class="hljs-string">'baseForm'</span>, <span class="hljs-attr">mountPoint</span>: <span class="hljs-string">'baseInfo'</span> },
  { <span class="hljs-attr">refName</span>: <span class="hljs-string">'reviewForm'</span>, <span class="hljs-attr">mountPoint</span>: <span class="hljs-string">'review'</span> },
  { <span class="hljs-attr">refName</span>: <span class="hljs-string">'priceForm'</span>, <span class="hljs-attr">mountPoint</span>: <span class="hljs-string">'price'</span> },
]);

<span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span>;
<span class="hljs-keyword">await</span> api.<span class="hljs-title function_">submit</span>(res.<span class="hljs-property">payload</span>);
</code></pre>
<p>è¿™æ—¶ï¼š</p>
<ul>
<li><code>getPayload</code> æ˜¯<strong>å•ä¸ªè¡¨å•çš„èƒ½åŠ›</strong>ï¼›</li>
<li><code>collectAllPayloads</code> æ˜¯<strong>å¤šè¡¨å•èšåˆçš„èƒ½åŠ›</strong>ï¼›</li>
<li>å†é…åˆ Builderï¼Œä½ å°±æœ‰äº†ä¸€æ¡ä»â€œå­—æ®µçº§ â†’ æ¨¡å—çº§ â†’ è¡¨å•çº§ â†’ å…¨é¡µçº§â€çš„æ„å»ºé“¾è·¯ã€‚</li>
</ul>
<h3 data-id="heading-21">3ï¼‰æŠŠâ€œæ ¡éªŒ + æ„å»ºâ€åšæˆå¯æ’æ‹”ä¸­é—´ä»¶</h3>
<p>ç°åœ¨ï¼Œ<code>getPayload</code> é‡Œï¼Œæ ¡éªŒé€»è¾‘é¡ºåºæ˜¯å†™æ­»çš„ï¼š</p>
<blockquote>
<p>æ ¡éªŒ â†’ é”™è¯¯æç¤º â†’ æ„å»º payload</p>
</blockquote>
<p>å¦‚æœä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘åšæˆç±»ä¼¼â€œä¸­é—´ä»¶ç®¡çº¿â€çš„æ¨¡å¼ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> pipeline = [
  validateFormStep,
  extraAsyncCheckStep,
  normalizeDataStep,
  buildPayloadStep,
];

<span class="hljs-title function_">runPipeline</span>(vm, refName, pipeline);
</code></pre>
<p>æ¯ä¸ª step æ¥æ”¶ contextï¼ˆæ¯”å¦‚ <code>{ vm, form, payload }</code>ï¼‰ï¼ŒæŒ‰é¡ºåºå¤„ç†ã€‚<br/>
è¿™æ ·ä½ å¯ä»¥ï¼š</p>
<ul>
<li>åœ¨æŸäº›è¡¨å•æ’å…¥é¢å¤–é£æ§æ ¡éªŒï¼›</li>
<li>åœ¨æŸäº›è¡¨å•å‰é¢åŠ æ•°æ®å½’ä¸€åŒ–é€»è¾‘ï¼›</li>
<li>ä¿æŒä¸»æµç¨‹ä¸€è‡´ä½†å…è®¸ä¸ªæ€§åŒ–â€œæ’ç‰‡â€ã€‚</li>
</ul>
<p>è¿™å°±å·²ç»éå¸¸æ¥è¿‘ã€Œå‰ç«¯é¢†åŸŸé‡Œè‡ªå·±çš„ mini-frameworkã€äº†ã€‚</p>
<h3 data-id="heading-22">4ï¼‰è·¨æ¡†æ¶ / è·¨é¡¹ç›®å¤ç”¨</h3>
<p>ä½ ç°åœ¨çš„è®¾è®¡ï¼Œå…¶å®å·²ç»å¾ˆå®¹æ˜“è·¨æ ˆï¼š</p>
<ul>
<li>ref æ¦‚å¿µï¼šReact å¯ä»¥ç”¨ <code>useRef</code> + <code>forwardRef</code> æ¥æ¨¡æ‹Ÿï¼›</li>
<li>validateï¼šç»å¤§å¤šæ•°è¡¨å•åº“éƒ½æœ‰ç±»ä¼¼ APIï¼›</li>
<li>payload æ„é€ ï¼šå’Œæ¡†æ¶æ— å…³ï¼Œæœ¬èº«å°±æ˜¯çº¯å‡½æ•°/Builderã€‚</li>
</ul>
<p>å¦‚æœä½ æœ‰å¤šä¸ªé¡¹ç›®ï¼ˆVue2/Vue3/React æ··åˆï¼‰ï¼Œç†è®ºä¸Šå¯ä»¥ï¼š</p>
<ul>
<li>æŠŠâ€œæ„å»ºè§„åˆ™â€å’Œâ€œæ ¡éªŒè§„åˆ™â€æŠ½åˆ°ä¸€ä¸ªç‹¬ç«‹ npm åŒ…ï¼›</li>
<li>æ¯ä¸ªé¡¹ç›®åªå†™ä¸€å±‚å¾ˆè–„çš„â€œå¤–å£³â€ï¼Œé€‚é…è‡ªå·±çš„ ref/ç»„ä»¶ä½“ç³»ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä»â€œä¸€ä¸ªé¡¹ç›®é‡Œçš„æŠ½è±¡â€ï¼Œå‡çº§æˆâ€œå¤šé¡¹ç›®å…±äº«çš„é¢†åŸŸåŒ…â€ã€‚</p>
<hr/>
<p>ä½ ç°åœ¨è¿™æ•´å¥—ï¼Œä»æœ€å¼€å§‹é‚£æ®µï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewContent</span>?.<span class="hljs-property">length</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">reviewForm</span>?.<span class="hljs-title function_">validate</span>();
  <span class="hljs-keyword">if</span> (!res || !res.<span class="hljs-property">ok</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(res?.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·å®Œå–„è‡ªè¯„ä¿¡æ¯'</span>);
  }
}
<span class="hljs-keyword">const</span> payload = { ... };
</code></pre>
<p>ä¸€è·¯æ¼”è¿›åˆ°ï¼š</p>
<ul>
<li>é€šç”¨ <code>getPayload</code></li>
<li>é…ç½®åŒ– <code>formPayloadMap</code></li>
<li>æŒ‰éœ€å¼•å…¥ <code>PayloadBuilder</code> åšå¤æ‚æ„å»º</li>
<li>å†å¾€å¤–æ˜¯å¤šè¡¨å•èšåˆã€ç±»å‹çº¦æŸã€æµæ°´çº¿ã€è·¨é¡¹ç›®å¤ç”¨</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uosåŸºç¡€ dmesg æŸ¥çœ‹å†…æ ¸çš„å®æ—¶æ—¥å¿—]]></title>    <link>https://juejin.cn/post/7572002432451002377</link>    <guid>https://juejin.cn/post/7572002432451002377</guid>    <pubDate>2025-11-13T11:13:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572002432451002377" data-draft-id="7572021695294128178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uosåŸºç¡€ dmesg æŸ¥çœ‹å†…æ ¸çš„å®æ—¶æ—¥å¿—"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-13T11:13:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œåˆå¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4081803083395527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uosåŸºç¡€ dmesg æŸ¥çœ‹å†…æ ¸çš„å®æ—¶æ—¥å¿—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4081803083395527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œåˆå¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:13:13.000Z" title="Thu Nov 13 2025 11:13:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»Ÿä¿¡æ¡Œé¢æ“ä½œç³»ç»Ÿä¸“ä¸šç‰ˆV20ï¼ˆ1070ï¼‰<br/>
Linux uos 5.10.97-arm64-desktop</p>
</blockquote>
<h3 data-id="heading-0">uosåŸºç¡€ dmesg æŸ¥çœ‹å†…æ ¸çš„å®æ—¶æ—¥å¿—</h3>
<pre><code class="hljs language-c" lang="c">root@uos:~<span class="hljs-meta"># dmesg -wH</span>
[<span class="hljs-number">11</span>æœˆ<span class="hljs-number">10</span> <span class="hljs-number">14</span>:<span class="hljs-number">59</span>] [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">1</span>][HISI_DRM_HEAPS D]:do_alloc_memory: need alloc size=<span class="hljs-number">0x3000</span>, now pool size=<span class="hljs-number">0x1a60000</span>
[  +<span class="hljs-number">0.000000</span>] [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">2</span>][HISI_DRM_HEAPS D]:do_alloc_memory: alloc success, now pool size=<span class="hljs-number">0x1a60000</span>
[  +<span class="hljs-number">0.000031</span>] [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">3</span>][DPU_DRM D]:hisi_drm_alloc_buf: alloc drm bufsuccess, size=<span class="hljs-number">0x3000</span>
[  +<span class="hljs-number">0.000854</span>] [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">4</span>][DPU_DRM D]:hisi_drm_gem_check_flags: heap id = <span class="hljs-number">0</span>, attrs = <span class="hljs-number">5</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uosåŸºç¡€ journalctl æŸ¥çœ‹ç³»ç»Ÿçš„å®æ—¶æ—¥å¿—]]></title>    <link>https://juejin.cn/post/7572012699628044315</link>    <guid>https://juejin.cn/post/7572012699628044315</guid>    <pubDate>2025-11-13T11:15:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572012699628044315" data-draft-id="7572021695294144562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uosåŸºç¡€ journalctl æŸ¥çœ‹ç³»ç»Ÿçš„å®æ—¶æ—¥å¿—"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-13T11:15:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œåˆå¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4081803083395527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uosåŸºç¡€ journalctl æŸ¥çœ‹ç³»ç»Ÿçš„å®æ—¶æ—¥å¿—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4081803083395527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œåˆå¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:15:24.000Z" title="Thu Nov 13 2025 11:15:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»Ÿä¿¡æ¡Œé¢æ“ä½œç³»ç»Ÿä¸“ä¸šç‰ˆV20ï¼ˆ1070ï¼‰<br/>
Linux uos 5.10.97-arm64-desktop</p>
</blockquote>
<h3 data-id="heading-0">uosåŸºç¡€ journalctl æŸ¥çœ‹ç³»ç»Ÿçš„å®æ—¶æ—¥å¿—</h3>
<pre><code class="hljs language-c" lang="c">root@uos:~<span class="hljs-meta"># journalctl -f</span>
-- Logs begin at Mon <span class="hljs-number">2025</span><span class="hljs-number">-11</span><span class="hljs-number">-03</span> <span class="hljs-number">18</span>:<span class="hljs-number">29</span>:<span class="hljs-number">06</span> CST. --
<span class="hljs-number">11</span>æœˆ <span class="hljs-number">10</span> <span class="hljs-number">15</span>:<span class="hljs-number">29</span>:<span class="hljs-number">09</span> uos kernel: [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">5</span>][HISI_DRM_HEAPS D]:do_alloc_memory: alloc success, now pool size=<span class="hljs-number">0x2450000</span>
<span class="hljs-number">11</span>æœˆ <span class="hljs-number">10</span> <span class="hljs-number">15</span>:<span class="hljs-number">29</span>:<span class="hljs-number">09</span> uos kernel: [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">6</span>][DPU_DRM D]:hisi_drm_alloc_buf: alloc drm bufsuccess, size=<span class="hljs-number">0x3000</span>
<span class="hljs-number">11</span>æœˆ <span class="hljs-number">10</span> <span class="hljs-number">15</span>:<span class="hljs-number">29</span>:<span class="hljs-number">09</span> uos kernel: [pid:<span class="hljs-number">3256</span>,cpu1,Xwayland,<span class="hljs-number">7</span>][DPU_DRM D]:hisi_drm_gem_check_flags: heap id = <span class="hljs-number">0</span>, attrs = <span class="hljs-number">5</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Checkmateï¼šè‡ªå»ºç›‘æ§æ–°æ ‡æ†ï¼å¼€æºæ›¿ä»£Zabbixçš„è½»é‡çº§æ–¹æ¡ˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7571815997068329000</link>    <guid>https://juejin.cn/post/7571815997068329000</guid>    <pubDate>2025-11-13T11:22:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997068329000" data-draft-id="7534551428461527074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Checkmateï¼šè‡ªå»ºç›‘æ§æ–°æ ‡æ†ï¼å¼€æºæ›¿ä»£Zabbixçš„è½»é‡çº§æ–¹æ¡ˆå®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T11:22:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YL_jia"/> <meta itemprop="url" content="https://juejin.cn/user/1467226241383211"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Checkmateï¼šè‡ªå»ºç›‘æ§æ–°æ ‡æ†ï¼å¼€æºæ›¿ä»£Zabbixçš„è½»é‡çº§æ–¹æ¡ˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1467226241383211/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YL_jia
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:22:33.000Z" title="Thu Nov 13 2025 11:22:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Checkmateï¼šè‡ªå»ºç›‘æ§æ–°æ ‡æ†ï¼å¼€æºæ›¿ä»£Zabbixçš„è½»é‡çº§æ–¹æ¡ˆå®æˆ˜</h2>
<blockquote>
<p>å‘Šåˆ«è‡ƒè‚¿ç›‘æ§ç³»ç»Ÿï¼Œ1æ ¸1GBå†…å­˜æ‰“é€ ä¼ä¸šçº§åŸºç¡€è®¾æ–½ç›‘æ§å¹³å°</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa9f9d4b34d64998a93e4b43234254a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWUxfamlh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763637752&amp;x-signature=6YlPbcKwz9EymaOr6QEOYT3kEUY%3D" alt="Checkmateç›‘æ§ä»ªè¡¨ç›˜ç¤ºä¾‹" loading="lazy"/><br/>
ï¼ˆCheckmateç°ä»£åŒ–çš„ç›‘æ§ç•Œé¢å±•ç¤ºï¼‰</p>
<h3 data-id="heading-1">å¼•è¨€ï¼šå½“ä¼ ç»Ÿç›‘æ§å·¥å…·æˆä¸ºè¿ç»´çš„è´Ÿæ‹…</h3>
<p>å‡Œæ™¨3ç‚¹ï¼Œåˆºè€³çš„å‘Šè­¦å£°åˆ’ç ´å¯‚é™â€”â€”ä¸æ˜¯ä¸šåŠ¡æ•…éšœï¼Œè€Œæ˜¯<strong>ç›‘æ§ç³»ç»Ÿè‡ªèº«å´©æºƒ</strong>ã€‚è¿™æ˜¯è®¸å¤šè¿ç»´å›¢é˜Ÿçš„çœŸå®å™©æ¢¦ã€‚ä¼ ç»Ÿç›‘æ§æ–¹æ¡ˆå¦‚Zabbixã€Nagiosé¢ä¸´<strong>ä¸‰å¤§ç—›ç‚¹</strong>ï¼šèµ„æºæ¶ˆè€—å·¨å¤§ï¼ˆå•èŠ‚ç‚¹å¸¸éœ€8GB+å†…å­˜ï¼‰ã€é…ç½®å¤æ‚ï¼ˆå­¦ä¹ æ›²çº¿é™¡å³­ï¼‰ã€æ‰©å±•å›°éš¾ï¼ˆé›†ç¾¤éƒ¨ç½²å¤æ‚ï¼‰ã€‚è€Œ<strong>Checkmate</strong>ä½œä¸ºå¼€æºç›‘æ§é¢†åŸŸçš„æ–°æ˜Ÿï¼Œå‡­å€Ÿ<strong>è½»é‡åŒ–æ¶æ„ï¼ˆ1æ ¸1GBå³å¯è¿è¡Œï¼‰+ é›¶é…ç½®è‡ªåŠ¨å‘ç° + Prometheusç”Ÿæ€å…¼å®¹</strong>çš„ä¸‰é‡ä¼˜åŠ¿ï¼Œæ­£åœ¨GitHubæ€èµ·é£æš´ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»æ ¸å¿ƒåŸç†åˆ°ä¼ä¸šå®æˆ˜ï¼Œå…¨é¢æŒæ¡è¿™æ¬¾ç°ä»£ç›‘æ§åˆ©å™¨ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Checkmateæ ¸å¿ƒä¼˜åŠ¿ï¼šé‡æ–°å®šä¹‰åŸºç¡€è®¾æ–½ç›‘æ§</h3>
<h4 data-id="heading-3">1. è½»é‡åŒ–æ¶æ„è®¾è®¡ï¼ˆä¸ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”ï¼‰</h4>



































<table><thead><tr><th><strong>æŒ‡æ ‡</strong></th><th>Zabbix</th><th>Prometheus</th><th><strong>Checkmate</strong></th></tr></thead><tbody><tr><td>å†…å­˜å ç”¨</td><td>4GB+</td><td>2GB+</td><td><strong>&lt;512MB</strong></td></tr><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>90ç§’+</td><td>30ç§’</td><td><strong>&lt;5ç§’</strong></td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>é«˜ï¼ˆWeb+é…ç½®æ–‡ä»¶ï¼‰</td><td>ä¸­ï¼ˆYAMLæ–‡ä»¶ï¼‰</td><td><strong>é›¶é…ç½®è‡ªåŠ¨å‘ç°</strong></td></tr><tr><td>éƒ¨ç½²æ–¹å¼</td><td>å¤æ‚</td><td>ä¸­ç­‰</td><td><strong>å•äºŒè¿›åˆ¶æ–‡ä»¶</strong></td></tr></tbody></table>
<h4 data-id="heading-4">2. æ™ºèƒ½å‘ç°å¼•æ“</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç½‘ç»œæ‰«æ] --&gt; B(è‡ªåŠ¨è¯†åˆ«è®¾å¤‡ç±»å‹)
    B --&gt; C{è®¾å¤‡ç±»å‹}
    C --&gt;|LinuxæœåŠ¡å™¨| D[é‡‡é›†CPU/å†…å­˜/ç£ç›˜]
    C --&gt;|ç½‘ç»œè®¾å¤‡| E[é‡‡é›†SNMPæŒ‡æ ‡]
    C --&gt;|K8sé›†ç¾¤| F[å‘ç°Pod/Node]
    D --&gt; G[ç”Ÿæˆç›‘æ§é¢æ¿]
    E --&gt; G
    F --&gt; G
</code></pre>
<ul>
<li><strong>è·¨åè®®æ”¯æŒ</strong>ï¼šSSHã€SNMPã€WMIã€IPMIä¸€ç½‘æ‰“å°½</li>
<li><strong>æ‹“æ‰‘è‡ªåŠ¨ç»˜åˆ¶</strong>ï¼šå®æ—¶ç”Ÿæˆç½‘ç»œè®¾å¤‡è¿æ¥å…³ç³»å›¾</li>
<li><strong>æ— ä»£ç†ç›‘æ§</strong>ï¼š90%æŒ‡æ ‡é€šè¿‡æ ‡å‡†åè®®è·å–ï¼Œæ— éœ€å®‰è£…å®¢æˆ·ç«¯</li>
</ul>
<h4 data-id="heading-5">3. å‘Šè­¦æ™ºèƒ½é™å™ª</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ™ºèƒ½å‘Šè­¦èšåˆç®—æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">deduplicate_alerts</span>(<span class="hljs-params">alerts</span>):
    <span class="hljs-comment"># åŸºäºæŒ‡çº¹çš„å‘Šè­¦åˆ†ç»„</span>
    grouped = group_by(alerts, <span class="hljs-keyword">lambda</span> a: a.fingerprint)
    
    <span class="hljs-comment"># æ—¶é—´çª—å£èšåˆï¼ˆ5åˆ†é’Ÿå†…ç›¸åŒå‘Šè­¦åˆå¹¶ï¼‰</span>
    <span class="hljs-keyword">for</span> group <span class="hljs-keyword">in</span> grouped:
        <span class="hljs-keyword">if</span> time_range(group) &lt; <span class="hljs-number">5</span>*<span class="hljs-number">60</span>:
            send_alert(summarize(group))  <span class="hljs-comment"># å‘é€èšåˆé€šçŸ¥</span>
</code></pre>
<h4 data-id="heading-6">4. å¼€æ”¾ç”Ÿæ€ç³»ç»Ÿ</h4>
<ul>
<li><strong>PromQLå…¼å®¹</strong>ï¼šç›´æ¥ä½¿ç”¨PrometheusæŸ¥è¯¢è¯­æ³•</li>
<li><strong>GrafanaåŸç”Ÿæ”¯æŒ</strong>ï¼šä½œä¸ºæ•°æ®æºæ— ç¼æ¥å…¥</li>
<li><strong>Webhooké›†æˆ</strong>ï¼šå‘Šè­¦æ¨é€è‡³é’‰é’‰/ä¼ä¸šå¾®ä¿¡/Slack</li>
<li><strong>APIé©±åŠ¨</strong>ï¼šå®Œæ•´RESTfulæ¥å£æ”¯æŒè‡ªåŠ¨åŒ–è¿ç»´</li>
</ul>
<hr/>
<h3 data-id="heading-7">äºŒã€ååˆ†é’Ÿæé€Ÿéƒ¨ç½²ï¼šå…¨åœºæ™¯å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-8">1. Dockerå•æœºéƒ¨ç½²ï¼ˆå¼€å‘æµ‹è¯•ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæŒä¹…åŒ–ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p /data/checkmate/{config,data}

<span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span>
docker run -d --name checkmate \
  -p 8080:8080 \
  -v /data/checkmate/config:/etc/checkmate \
  -v /data/checkmate/data:/var/lib/checkmate \
  checkmate/checkmate:latest
</code></pre>
<p>è®¿é—® <code>http://localhost:8080</code> ä½¿ç”¨é»˜è®¤è´¦å· <code>admin/checkmate</code></p>
<h4 data-id="heading-9">2. Kubernetesé›†ç¾¤éƒ¨ç½²ï¼ˆç”Ÿäº§æ¨èï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># checkmate-deployment.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">checkmate</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">checkmate</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">checkmate/checkmate:2.4.0</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/lib/checkmate</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">CONFIG_PATH</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"/etc/checkmate/config.yaml"</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># é…ç½®è‡ªåŠ¨å‘ç°</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">checkmate-config</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">config.yaml:</span> <span class="hljs-string">|
    discovery:
      cidr: 10.0.0.0/16
      protocols: [ssh, snmp]
    alerting:
      receivers:
        - name: ops-team
          type: webhook
          url: "https://oapi.dingtalk.com/robot/send?access_token=xxx"
</span></code></pre>
<h4 data-id="heading-10">3. è£¸æœºäºŒè¿›åˆ¶éƒ¨ç½²ï¼ˆè¾¹ç¼˜åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½æœ€æ–°ç‰ˆ (Linux amd64)</span>
wget https://github.com/checkmate-dev/checkmate/releases/latest/checkmate-linux-amd64

<span class="hljs-comment"># è®¾ç½®ä¸ºå¯æ‰§è¡Œæ–‡ä»¶</span>
<span class="hljs-built_in">chmod</span> +x checkmate-linux-amd64

<span class="hljs-comment"># åˆ›å»ºé…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">cat</span> &gt; checkmate.yaml &lt;&lt;<span class="hljs-string">EOF
discovery:
  cidr: 192.168.1.0/24
  snmp_community: public
EOF</span>

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
./checkmate-linux-amd64 --config checkmate.yaml
</code></pre>
<hr/>
<h3 data-id="heading-11">ä¸‰ã€ä¼ä¸šçº§å®æˆ˜ï¼šä¸‰å¤§åœºæ™¯æ·±åº¦ä¼˜åŒ–</h3>
<h4 data-id="heading-12">æ¡ˆä¾‹1ï¼šç”µå•†å¤§ä¿ƒèµ„æºä¿éšœä½“ç³»</h4>
<p><strong>æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>é»‘äº”æœŸé—´200+æœåŠ¡å™¨èµ„æºç›‘æ§</li>
<li>ç§’çº§å‘ç°CPUè¿‡è½½/ç£ç›˜çˆ†æ»¡</li>
</ul>
<p><strong>Checkmateæ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>åŠ¨æ€åŸºçº¿å‘Šè­¦</strong>ï¼š
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åŸºäºå†å²æ•°æ®çš„åŠ¨æ€é˜ˆå€¼</span>
<span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighCPU</span>
    <span class="hljs-attr">expr:</span> <span class="hljs-string">cpu_usage</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">(avg_over_time(cpu_usage[7d])</span> <span class="hljs-string">+</span> <span class="hljs-number">2</span><span class="hljs-string">*stddev_over_time(cpu_usage[7d]))</span>
    <span class="hljs-attr">for:</span> <span class="hljs-string">1m</span>
</code></pre>
</li>
<li><strong>èµ„æºæ‹“æ‰‘è§†å›¾</strong>ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d62c12ab44469bb361beb8f29c25b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWUxfamlh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763637752&amp;x-signature=iTNZqmbt%2F4s%2F7kki8O367LCtvlE%3D" alt="èµ„æºæ‹“æ‰‘å›¾" loading="lazy"/><br/>
ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„æœåŠ¡å™¨èµ„æºå…³è”å›¾ï¼‰</li>
<li><strong>æ•ˆæœ</strong>ï¼š
<ul>
<li>æå‰30åˆ†é’Ÿé¢„æµ‹3å°æœåŠ¡å™¨è¿‡è½½</li>
<li>è‡ªåŠ¨æ‰©å®¹é¿å…200ä¸‡ç¾å…ƒæŸå¤±</li>
</ul>
</li>
</ol>
<h4 data-id="heading-13">æ¡ˆä¾‹2ï¼šé‡‘èè¡Œä¸šåˆè§„ç›‘æ§</h4>
<p><strong>éœ€æ±‚</strong>ï¼š</p>
<ul>
<li>æ»¡è¶³ç­‰ä¿2.0å¯¹ç½‘ç»œè®¾å¤‡çš„ç›‘æ§è¦æ±‚</li>
<li>å®¡è®¡æ—¥å¿—ä¿ç•™180å¤©</li>
</ul>
<p><strong>å®æ–½è·¯å¾„</strong>ï¼š</p>
<ol>
<li><strong>ç½‘ç»œè®¾å¤‡å‘ç°</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">discovery:
  cidr: 10.1.0.0/16
  protocols: [snmp]
  snmp_communities: 
    - <span class="hljs-string">"finance@2024"</span> <span class="hljs-comment"># åŠ å¯†Community</span>
</code></pre>
</li>
<li><strong>åˆè§„æŠ¥è¡¨ç”Ÿæˆ</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">/* å®¡è®¡æ—¥å¿—æŸ¥è¯¢ç¤ºä¾‹ */</span>
<span class="hljs-keyword">SELECT</span> device_ip, check_item, <span class="hljs-keyword">result</span> 
<span class="hljs-keyword">FROM</span> audit_logs 
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">timestamp</span> <span class="hljs-operator">&gt;</span> now() <span class="hljs-operator">-</span> <span class="hljs-type">interval</span> <span class="hljs-string">'180 days'</span>;
</code></pre>
</li>
<li><strong>å®‰å…¨åŠ å›º</strong>ï¼š
<ul>
<li>TLSåŒå‘è®¤è¯</li>
<li>åŸºäºRBACçš„æƒé™æ§åˆ¶</li>
</ul>
</li>
</ol>
<h4 data-id="heading-14">æ¡ˆä¾‹3ï¼šæ™ºèƒ½åˆ¶é€ å·¥å‚ç›‘æ§</h4>
<p><strong>åœºæ™¯</strong>ï¼š</p>
<ul>
<li>50+å·¥ä¸šPLCè®¾å¤‡</li>
<li>5ä¸ªåˆ†æ•£å‚åŒº</li>
</ul>
<p><strong>åˆ›æ–°æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[å‚åŒº1] --&gt;|OPC UA| B(è¾¹ç¼˜CheckmateèŠ‚ç‚¹)
    C[å‚åŒº2] --&gt;|Modbus| B
    B --&gt; D[ä¸­å¿ƒç›‘æ§å¹³å°]
    D --&gt; E[å¤§å±å¯è§†åŒ–]
</code></pre>
<ul>
<li><strong>è¾¹ç¼˜è®¡ç®—</strong>ï¼šæ ‘è“æ´¾è¿è¡ŒCheckmateï¼ˆå†…å­˜&lt;300MBï¼‰</li>
<li><strong>åè®®è½¬æ¢</strong>ï¼šå·¥ä¸šåè®®è½¬PrometheusæŒ‡æ ‡</li>
<li><strong>æ•ˆæœ</strong>ï¼š<br/>
è®¾å¤‡æ•…éšœå‘ç°æ—¶é—´ä»<strong>8å°æ—¶ç¼©çŸ­è‡³15åˆ†é’Ÿ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-15">å››ã€æœ€ä½³å®è·µï¼šæ•ˆèƒ½æœ€å¤§åŒ–é…ç½®</h3>
<h4 data-id="heading-16">1. ç›‘æ§é¡¹ä¼˜åŒ–é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># config.yaml å…³é”®é…ç½®</span>
<span class="hljs-attr">metrics:</span>
  <span class="hljs-comment"># LinuxæœåŠ¡å™¨</span>
  <span class="hljs-attr">linux:</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">15s</span>
    <span class="hljs-attr">items:</span> [<span class="hljs-string">cpu</span>, <span class="hljs-string">memory</span>, <span class="hljs-string">disk</span>, <span class="hljs-string">network</span>]
  
  <span class="hljs-comment"># ç½‘ç»œè®¾å¤‡</span>
  <span class="hljs-attr">snmp:</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">oids:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">1.3</span><span class="hljs-number">.6</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><span class="hljs-number">.3</span><span class="hljs-number">.0</span>  <span class="hljs-comment"># ç³»ç»Ÿè¿è¡Œæ—¶é—´</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">1.3</span><span class="hljs-number">.6</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span><span class="hljs-number">.2</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span> <span class="hljs-comment"># å…¥ç«™æµé‡</span>
  
  <span class="hljs-comment"># è‡ªå®šä¹‰è„šæœ¬</span>
  <span class="hljs-attr">custom_script:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">"/scripts/check_application.sh"</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">1m</span>
</code></pre>
<h4 data-id="heading-17">2. å‘Šè­¦åˆ†çº§ç­–ç•¥</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">alerting:</span>
  <span class="hljs-attr">routes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span> 
        <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
      <span class="hljs-attr">receiver:</span> <span class="hljs-string">'ops-pager'</span>
      
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span> 
        <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
      <span class="hljs-attr">receiver:</span> <span class="hljs-string">'ops-slack'</span>
  
  <span class="hljs-attr">templates:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">application_alert</span>
      <span class="hljs-attr">body:</span> <span class="hljs-string">|
        [{{ .Status | toUpper }}] {{ .AlertName }}
        {{ range .Annotations.SortedPairs }}{{ .Name }}: {{ .Value }}
        {{ end }}
</span></code></pre>
<h4 data-id="heading-18">3. æ€§èƒ½è°ƒä¼˜å‚æ•°</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é«˜è´Ÿè½½ç¯å¢ƒå¯åŠ¨å‚æ•°</span>
./checkmate \
  --max-routines=500 \     <span class="hljs-comment"># æœ€å¤§å¹¶å‘åç¨‹æ•°</span>
  --tsdb-retention=30d \   <span class="hljs-comment"># æ•°æ®ä¿ç•™å‘¨æœŸ</span>
  --query-timeout=10s      <span class="hljs-comment"># æŸ¥è¯¢è¶…æ—¶è®¾ç½®</span>
</code></pre>
<hr/>
<h3 data-id="heading-19">äº”ã€ä¸ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”ï¼šä¸ºä»€ä¹ˆé€‰æ‹©Checkmateï¼Ÿ</h3>



































<table><thead><tr><th><strong>åœºæ™¯</strong></th><th>Zabbix</th><th>Prometheus+Alertmanager</th><th><strong>Checkmate</strong></th></tr></thead><tbody><tr><td><strong>èµ„æºå—é™ç¯å¢ƒ</strong></td><td>éš¾ä»¥è¿è¡Œ</td><td>éœ€è¦å¤šç»„ä»¶</td><td>âœ… å•èŠ‚ç‚¹è¿è¡Œ</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>é«˜ï¼ˆå­¦ä¹ æ›²çº¿é™¡ï¼‰</td><td>ä¸­ï¼ˆéœ€é…é‡‡é›†å™¨ï¼‰</td><td>âœ… è‡ªåŠ¨å‘ç°é›¶é…ç½®</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>å‚ç›´æ‰©å±•</td><td>æ°´å¹³æ‰©å±•å¤æ‚</td><td>âœ… åŸç”Ÿé›†ç¾¤æ”¯æŒ</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>é«˜ï¼ˆä¸“èŒè¿ç»´ï¼‰</td><td>ä¸­</td><td>âœ… æ— äººå€¼å®ˆ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-20">å…­ã€æœªæ¥æ¼”è¿›ï¼šAIé©±åŠ¨çš„æ™ºèƒ½è¿ç»´</h3>
<p>Checkmate 3.0è·¯çº¿å›¾ï¼š</p>
<ol>
<li><strong>å¼‚å¸¸é¢„æµ‹å¼•æ“</strong>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LSTMæ—¶åºé¢„æµ‹ä¼ªä»£ç </span>
model = LSTM().train(historical_metrics)
anomaly_score = model.predict(current_values)
<span class="hljs-keyword">if</span> anomaly_score &gt; threshold:
    trigger_alert(<span class="hljs-string">"é¢„æµ‹æ•…éšœ: ç£ç›˜å°†åœ¨4å°æ—¶å†…å†™æ»¡"</span>)
</code></pre>
</li>
<li><strong>æ ¹å› åˆ†æç³»ç»Ÿ</strong>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
  A[MySQLæ…¢æŸ¥è¯¢] --&gt; B(å…³è”åˆ†æ)
  B --&gt; C[å‘ç°ç£ç›˜IOå»¶è¿Ÿ]
  C --&gt; D[å®šä½RAIDå¡æ•…éšœ]
</code></pre>
</li>
<li><strong>è‡ªç„¶è¯­è¨€äº¤äº’</strong>
<blockquote>
<p>ç”¨æˆ·ï¼šâ€œä¸ºä»€ä¹ˆè®¢å•æœåŠ¡å»¶è¿Ÿå‡é«˜ï¼Ÿâ€<br/>
Checkmateï¼šâ€œæ£€æµ‹åˆ°æ•°æ®åº“ä¸»èŠ‚ç‚¹CPUä½¿ç”¨ç‡95%ï¼Œå»ºè®®æ‰©å®¹â€</p>
</blockquote>
</li>
</ol>
<hr/>
<h3 data-id="heading-21">ç»“è¯­ï¼šç›‘æ§ç³»ç»Ÿçš„æ–°èŒƒå¼</h3>
<p>Checkmateç”¨<strong>æç®€ä¸»ä¹‰è§£å†³å¤æ‚é—®é¢˜</strong>çš„ç†å¿µï¼Œè¯ é‡Šäº†ç°ä»£è¿ç»´å·¥å…·çš„çœŸè°›â€”â€”å®ƒä¸è¿½æ±‚åŠŸèƒ½çš„å¤§è€Œå…¨ï¼Œè€Œæ˜¯èšç„¦åœ¨<strong>è‡ªåŠ¨åŒ–å‘ç°ã€è½»é‡é«˜æ•ˆã€æ™ºèƒ½åˆ†æ</strong>çš„æ ¸å¿ƒä»·å€¼ä¸Šã€‚æ­£å¦‚æŸäº’è”ç½‘å…¬å¸CTOæ‰€è¨€ï¼šâ€œ<strong>å½“æˆ‘ä»¬æŠŠç›‘æ§ç³»ç»Ÿå†…å­˜ä»32GBé™åˆ°1GBæ—¶ï¼Œæ‰çœŸæ­£ä½“ä¼šåˆ°æŠ€æœ¯é€‰å‹çš„ä»·å€¼</strong>â€ã€‚</p>
<p><strong>ç«‹å³ä½“éªŒ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d -p 8080:8080 checkmate/checkmate
</code></pre>
<p><strong>èµ„æºè·å–</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcheckmate-dev%2Fcheckmate" target="_blank" title="https://github.com/checkmate-dev/checkmate" ref="nofollow noopener noreferrer">GitHubé¡¹ç›®ä¸»é¡µ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcheckmate.dev%2Fdocs%2Fenterprise" target="_blank" title="https://checkmate.dev/docs/enterprise" ref="nofollow noopener noreferrer">ä¼ä¸šéƒ¨ç½²ç™½çš®ä¹¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcheckmate.dev%2Fconfig-builder" target="_blank" title="https://checkmate.dev/config-builder" ref="nofollow noopener noreferrer">ç›‘æ§é…ç½®ç”Ÿæˆå™¨</a></li>
</ul>
<p><strong>è®¨è®ºè¯é¢˜</strong>ï¼š<br/>
ğŸ‘‰ ä½ åœ¨ç›‘æ§ç³»ç»Ÿä½¿ç”¨ä¸­é‡åˆ°çš„æœ€å¤§ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ<br/>
ğŸ‘‰ æœ€æœŸå¾…Checkmateæ–°å¢å“ªäº›æ™ºèƒ½ç‰¹æ€§ï¼Ÿ</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OkHttpç½‘ç»œæ¡†æ¶è®¾è®¡]]></title>    <link>https://juejin.cn/post/7571815997068345384</link>    <guid>https://juejin.cn/post/7571815997068345384</guid>    <pubDate>2025-11-13T11:25:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997068345384" data-draft-id="7571768210716409871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OkHttpç½‘ç»œæ¡†æ¶è®¾è®¡"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-13T11:25:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¨å……"/> <meta itemprop="url" content="https://juejin.cn/user/1978776659695784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OkHttpç½‘ç»œæ¡†æ¶è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1978776659695784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¨å……
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:25:11.000Z" title="Thu Nov 13 2025 11:25:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">OkHttpç½‘ç»œæ¡†æ¶è®¾è®¡</h2>
<h5 data-id="heading-1">ç›®å½•ä»‹ç»</h5>
<ul>
<li>01.æ•´ä½“æ¦‚è¿°ä»‹ç»
<ul>
<li>1.1 æ¦‚è¿°ä»‹ç»</li>
<li>1.2 æ ¸å¿ƒç‰¹æ€§è¯´æ˜</li>
<li>1.3 æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</li>
<li>1.4 é—®é¢˜æ€è€ƒ</li>
</ul>
</li>
<li>02.æ ¸å¿ƒæ¶æ„è®¾è®¡
<ul>
<li>2.1 æ•´ä½“æ¶æ„è®¾è®¡</li>
<li>2.2 æ•´ä½“è®¾è®¡æ€è·¯</li>
<li>2.3 æ ¸å¿ƒç»„ä»¶å…³ç³»å›¾</li>
</ul>
</li>
<li>03.æ ¸å¿ƒç»„ä»¶è¯¦è§£
<ul>
<li>3.1 OkHttpClient</li>
<li>3.2 Requestè¯·æ±‚å°è£…</li>
<li>3.3 Callè¯·æ±‚æ‰§è¡Œæ¥å£</li>
<li>3.4 Dispatcherè°ƒåº¦å™¨</li>
<li>3.5 æ‹¦æˆªå™¨æœºåˆ¶</li>
<li>3.6 Responseè¿”å›</li>
</ul>
</li>
<li>04.æ ¸å¿ƒæµç¨‹åˆ†æ
<ul>
<li>4.1 è¯·æ±‚æ‰§è¡Œæµç¨‹</li>
<li>4.2 è¿æ¥ç®¡ç†æµç¨‹</li>
<li>4.3 ç¼“å­˜å¤„ç†æµç¨‹</li>
</ul>
</li>
<li>05.å…³é”®æŠ€æœ¯ç‰¹æ€§
<ul>
<li>5.1 è¿æ¥æ± ç®¡ç†</li>
<li>5.2 HTTP/2æ”¯æŒ</li>
<li>5.3 ç¼“å­˜æœºåˆ¶è®¾è®¡</li>
<li>5.4 å®‰å…¨ç‰¹æ€§è®¾è®¡</li>
<li>5.5 SSL/TLSæµç¨‹</li>
</ul>
</li>
<li>06.æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
<ul>
<li>6.1 è¿æ¥å¤ç”¨</li>
<li>6.2 è¯·æ±‚åˆå¹¶</li>
<li>6.3 å‹ç¼©ä¼ è¾“</li>
<li>6.4 å†…å­˜ç®¡ç†</li>
</ul>
</li>
<li>07.ä½¿ç”¨ç¤ºä¾‹è¯´æ˜
<ul>
<li>7.1 åŸºæœ¬ä½¿ç”¨</li>
<li>7.2 é«˜çº§é…ç½®</li>
<li>7.3 ç»Ÿè®¡è¯·æ±‚è€—æ—¶</li>
</ul>
</li>
<li>08.æœ€ä½³å®è·µ
<ul>
<li>8.1 å®¢æˆ·ç«¯å¤ç”¨</li>
<li>8.2 è¯·æ±‚å–æ¶ˆ</li>
<li>8.3 é”™è¯¯å¤„ç†</li>
</ul>
</li>
<li>09.æ¶æ„ä¼˜åŠ¿
<ul>
<li>9.1 è®¾è®¡æ¨¡å¼åº”ç”¨</li>
<li>9.2 SOLIDåŸåˆ™ä½“ç°</li>
<li>9.3 æ€§èƒ½ä¼˜åŠ¿</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">01.æ•´ä½“æ¦‚è¿°ä»‹ç»</h3>
<h4 data-id="heading-3">1.1 æ¦‚è¿°ä»‹ç»</h4>
<p>OkHttpæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„HTTPå®¢æˆ·ç«¯åº“ï¼Œä¸“ä¸ºAndroidå’ŒJavaåº”ç”¨ç¨‹åºè®¾è®¡ã€‚åŸºäºOkHttpLibæ¨¡å—çš„æºç åˆ†æï¼Œè¯¦ç»†é˜è¿°äº†OkHttpçš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒç»„ä»¶ã€å·¥ä½œæµç¨‹å’ŒæŠ€æœ¯ç‰¹æ€§ã€‚é¿å…é™·å…¥ä»£ç ç»†èŠ‚ï¼Œç€é‡ç†è§£è®¾è®¡æ€æƒ³ï¼</p>
<h4 data-id="heading-4">1.2 æ ¸å¿ƒç‰¹æ€§è¯´æ˜</h4>
<ul>
<li><strong>é«˜æ•ˆçš„HTTP/2æ”¯æŒ</strong>ï¼šå®Œæ•´æ”¯æŒHTTP/2åè®®ï¼ŒåŒ…æ‹¬è¿æ¥å¤ç”¨ã€æœåŠ¡å™¨æ¨é€ç­‰ç‰¹æ€§</li>
<li><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼šè‡ªåŠ¨ç®¡ç†è¿æ¥æ± ï¼Œå‡å°‘è¿æ¥å»ºç«‹çš„å¼€é”€</li>
<li><strong>é€æ˜çš„GZIPå‹ç¼©</strong>ï¼šè‡ªåŠ¨å¤„ç†å“åº”å‹ç¼©ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“é‡</li>
<li><strong>å“åº”ç¼“å­˜</strong>ï¼šæ”¯æŒHTTPç¼“å­˜ï¼Œé¿å…é‡å¤è¯·æ±‚</li>
<li><strong>è¯·æ±‚/å“åº”æ‹¦æˆª</strong>ï¼šçµæ´»çš„æ‹¦æˆªå™¨æœºåˆ¶ï¼Œæ”¯æŒè¯·æ±‚å’Œå“åº”çš„å®šåˆ¶åŒ–å¤„ç†</li>
<li><strong>æ•…éšœæ¢å¤</strong>ï¼šè‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œæé«˜ç½‘ç»œè¯·æ±‚çš„å¯é æ€§</li>
</ul>
<h4 data-id="heading-5">1.3 æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[åº”ç”¨å±‚] --&gt; B[OkHttpClient]
    B --&gt; C[Request Builder]
    B --&gt; D[Call Factory]
    D --&gt; E[RealCall]
    E --&gt; F[Dispatcher]
    F --&gt; G[æ‹¦æˆªå™¨é“¾]
    G --&gt; H[ç½‘ç»œå±‚]
    
    subgraph "æ‹¦æˆªå™¨é“¾"
        I[åº”ç”¨æ‹¦æˆªå™¨]
        J[é‡è¯•æ‹¦æˆªå™¨]
        K[æ¡¥æ¥æ‹¦æˆªå™¨]
        L[ç¼“å­˜æ‹¦æˆªå™¨]
        M[è¿æ¥æ‹¦æˆªå™¨]
        N[ç½‘ç»œæ‹¦æˆªå™¨]
        O[æœåŠ¡å™¨è°ƒç”¨æ‹¦æˆªå™¨]
    end
    
    G --&gt; I
    I --&gt; J
    J --&gt; K
    K --&gt; L
    L --&gt; M
    M --&gt; N
    N --&gt; O
</code></pre>
<h4 data-id="heading-6">1.4 é—®é¢˜æ€è€ƒ</h4>
<ul>
<li>OkHttpè®¾è®¡ï¼šOkHttpæ•´ä½“è®¾è®¡æ€è·¯æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿrequestå’Œrespondåˆ†åˆ«å¦‚ä½•è®¾è®¡ï¼Ÿå¦‚ä½•è®¾è®¡callè¯·æ±‚æ“ä½œï¼Ÿ</li>
<li>OkHttpåŒæ­¥å¼‚æ­¥ï¼šå¦‚ä½•è®¾è®¡åŒæ­¥å’Œå¼‚æ­¥è¯·æ±‚ï¼ŸåŒæ­¥æ“ä½œåšäº†ä»€ä¹ˆï¼Ÿå¼‚æ­¥æ“ä½œå¦‚ä½•å¤„ç†é€»è¾‘ï¼Ÿ</li>
<li>OkHttpæ‹¦æˆªå™¨ï¼šæ‹¦æˆªå™¨æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ‹¦æˆªå™¨ï¼Ÿæ‹¦æˆªå™¨å¦‚ä½•å¤„ç†æ‹¦æˆªï¼Œå’Œå‘ä¸‹åˆ†å‘é€»è¾‘ï¼Ÿå¦‚ä½•åšé‡è¯•æœºåˆ¶çš„è®¾è®¡ï¼Ÿ</li>
<li>OkHttpç¼“å­˜ï¼šå¦‚ä½•è®¾è®¡ç¼“å­˜ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°ç½‘ç»œç¼“å­˜ï¼Ÿç¼“å­˜æ‹¦æˆªå™¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>OkHttpåˆ†å‘å™¨ï¼šåŒæ­¥å’Œå¼‚æ­¥è¯·æ±‚çš„Dispatcheræ˜¯å¦‚ä½•è°ƒåº¦çš„ï¼Ÿè®¾è®¡çš„å·§å¦™ä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>OkHttpçº¿ç¨‹æ± ï¼šä½¿ç”¨äº†ä»€ä¹ˆçº¿ç¨‹æ± ï¼Ÿæ˜¯å¦‚ä½•ç®¡ç†çº¿ç¨‹ä»»åŠ¡ï¼Ÿè·Ÿæ™®é€šçº¿ç¨‹æ± ä½¿ç”¨æœ‰ä½•åŒºåˆ«ï¼Ÿ</li>
</ul>
<h3 data-id="heading-7">02.æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-8">2.1 æ•´ä½“æ¶æ„è®¾è®¡</h4>
<p>OkHttpé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå±‚æ¬¡ï¼š</p>
<ol>
<li><strong>åº”ç”¨æ¥å£å±‚</strong>ï¼šæä¾›ç®€æ´çš„APIæ¥å£ï¼ŒåŒ…æ‹¬OkHttpClientã€Requestã€Responseç­‰</li>
<li><strong>è°ƒåº¦ç®¡ç†å±‚</strong>ï¼šDispatcherè´Ÿè´£è¯·æ±‚çš„è°ƒåº¦å’Œçº¿ç¨‹æ± ç®¡ç†</li>
<li><strong>æ‹¦æˆªå™¨é“¾å±‚</strong>ï¼šè´£ä»»é“¾æ¨¡å¼å®ç°çš„æ‹¦æˆªå™¨æœºåˆ¶</li>
<li><strong>è¿æ¥ç®¡ç†å±‚</strong>ï¼šConnectionPoolç®¡ç†HTTPè¿æ¥çš„å¤ç”¨</li>
<li><strong>ç½‘ç»œä¼ è¾“å±‚</strong>ï¼šåº•å±‚çš„Socketè¿æ¥å’Œæ•°æ®ä¼ è¾“</li>
</ol>
<h4 data-id="heading-9">2.2 æ•´ä½“è®¾è®¡æ€è·¯</h4>
<p>ç½‘ç»œè¯·æ±‚åˆ°å“åº”å¤§æ¦‚æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a03f661a0294b1693e804639ca02227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2o5YWF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763637911&amp;x-signature=CUOeO9WdYpqlmWf3uboLitviqTM%3D" alt="image" loading="lazy"/></p>
<p>æ•´ä½“è®¾è®¡æ€è·¯å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºOkHttpClientå¯¹è±¡ï¼Œç”±äºåˆ›å»ºè¿™ä¸ªå¯¹è±¡ååˆ†å¤æ‚ï¼Œå› æ­¤é‡‡ç”¨builderè®¾è®¡æ¨¡å¼æ„é€ </li>
<li>ç¬¬äºŒæ­¥ï¼šåŒ…è£…Requestè¯·æ±‚ä½“å¯¹è±¡ï¼Œä¸»è¦æ˜¯å­˜æ”¾urlï¼Œheaderï¼Œgetè¯·æ±‚ï¼Œpostè¯·æ±‚ç­‰ç­‰å±æ€§</li>
<li>ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡newCall(request)å»åˆ›å»ºä¸€ä¸ªcallè¯·æ±‚</li>
<li>ç¬¬å››æ­¥ï¼šå¼€å§‹æ‰§è¡ŒåŒæ­¥executeæˆ–è€…enqueueè¯·æ±‚ï¼Œè¿™é‡Œä¼šä½¿ç”¨åˆ°çº¿ç¨‹æ± </li>
<li>ç¬¬äº”æ­¥ï¼šæ·»åŠ å„ç§æ‹¦æˆªå™¨ï¼Œç¼“å­˜æ‹¦æˆªå™¨ï¼Œ</li>
<li>ç¬¬å…­æ­¥ï¼šå¤„ç†ç¼“å­˜æ‹¦æˆªï¼Œæ•°æ®å¤ç”¨çš„æŠ€æœ¯é€»è¾‘</li>
<li>ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºè¿æ¥è¯·æ±‚çš„æ“ä½œï¼Œç»™æœåŠ¡ç«¯å‘é€è¯·æ±‚</li>
<li>ç¬¬å…«æ­¥ï¼šè·å–è¿”å›responseæ•°æ®ï¼Œè¿™é‡Œä¸»è¦æ˜¯å¤„ç†codeå’Œbodyæ•°æ®</li>
</ul>
<h4 data-id="heading-10">2.3 æ ¸å¿ƒç»„ä»¶å…³ç³»å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class OkHttpClient {
        +Dispatcher dispatcher
        +List~Interceptor~ interceptors
        +ConnectionPool connectionPool
        +Cache cache
        +newCall(Request) Call
    }
    
    class Request {
        +HttpUrl url
        +String method
        +Headers headers
        +RequestBody body
    }
    
    class Call {
        &lt;&lt;interface&gt;&gt;
        +execute() Response
        +enqueue(Callback) void
        +cancel() void
    }
    
    class RealCall {
        +OkHttpClient client
        +Request originalRequest
        +execute() Response
        +enqueue(Callback) void
    }
    
    class Dispatcher {
        +ExecutorService executorService
        +Deque~AsyncCall~ readyAsyncCalls
        +Deque~AsyncCall~ runningAsyncCalls
        +Deque~RealCall~ runningSyncCalls
    }
    
    class Interceptor {
        &lt;&lt;interface&gt;&gt;
        +intercept(Chain) Response
    }
    
    OkHttpClient --&gt; Request : creates
    OkHttpClient --&gt; Call : newCall()
    Call &lt;|-- RealCall : implements
    OkHttpClient --&gt; Dispatcher : uses
    RealCall --&gt; Interceptor : uses
</code></pre>
<h3 data-id="heading-11">03.æ ¸å¿ƒç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-12">3.1 OkHttpClient</h4>
<p>OkHttpClientæ˜¯æ•´ä¸ªæ¡†æ¶çš„å…¥å£ç‚¹ï¼Œé‡‡ç”¨å»ºé€ è€…æ¨¡å¼è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OkHttpClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span>, Call.Factory, WebSocket.Factory {
    <span class="hljs-keyword">final</span> Dispatcher dispatcher;
    <span class="hljs-keyword">final</span> <span class="hljs-meta">@Nullable</span> Proxy proxy;
    <span class="hljs-keyword">final</span> List&lt;Protocol&gt; protocols;
    <span class="hljs-keyword">final</span> List&lt;ConnectionSpec&gt; connectionSpecs;
    <span class="hljs-keyword">final</span> List&lt;Interceptor&gt; interceptors;
    <span class="hljs-keyword">final</span> List&lt;Interceptor&gt; networkInterceptors;
    <span class="hljs-keyword">final</span> EventListener.Factory eventListenerFactory;
    <span class="hljs-keyword">final</span> ProxySelector proxySelector;
    <span class="hljs-keyword">final</span> CookieJar cookieJar;
    <span class="hljs-keyword">final</span> <span class="hljs-meta">@Nullable</span> Cache cache;
    <span class="hljs-keyword">final</span> <span class="hljs-meta">@Nullable</span> InternalCache internalCache;
    <span class="hljs-keyword">final</span> SocketFactory socketFactory;
    <span class="hljs-keyword">final</span> SSLSocketFactory sslSocketFactory;
    <span class="hljs-keyword">final</span> ConnectionPool connectionPool;
    <span class="hljs-comment">// ... æ›´å¤šé…ç½®é¡¹</span>
}
</code></pre>
<p>åˆ›å»ºOkHttpClientå¯¹è±¡ï¼Œä¸»è¦æ˜¯ç”¨äºApiç½‘ç»œè¯·æ±‚çš„å¯¹è±¡ã€‚ç±»ä¼¼äºåˆå§‹åŒ–ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œæ—¥å¿—æ‰“å°æ‹¦æˆªå™¨ï¼Œä»£ç†ï¼Œsslæ ¡éªŒï¼ŒåŸŸåæ ¡éªŒç­‰ç­‰ã€‚</p>
<p><strong>ä¸»è¦èŒè´£</strong>ï¼š</p>
<ul>
<li>ç®¡ç†å…¨å±€é…ç½®ï¼ˆè¶…æ—¶ã€ä»£ç†ã€SSLç­‰ï¼‰</li>
<li>åˆ›å»ºCallå¯¹è±¡</li>
<li>ç®¡ç†æ‹¦æˆªå™¨é“¾</li>
<li>ç®¡ç†è¿æ¥æ± å’Œç¼“å­˜</li>
</ul>
<h5 data-id="heading-13">3.1.1 åˆ›å»ºæµç¨‹æ¶æ„å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹åˆ›å»ºOkHttpClient] --&gt; B{ä½¿ç”¨æ–¹å¼}
    
    B --&gt;|é»˜è®¤æ„é€ | C[new OkHttpClient]
    B --&gt;|Builderæ¨¡å¼| D[new OkHttpClient.Builder]
    
    C --&gt; E[ä½¿ç”¨é»˜è®¤é…ç½®]
    D --&gt; F[é…ç½®å„ç§å‚æ•°]
    
    E --&gt; G[åˆ›å»ºé»˜è®¤ç»„ä»¶]
    F --&gt; H[éªŒè¯é…ç½®å‚æ•°]
    
    G --&gt; I[åˆå§‹åŒ–Dispatcher]
    H --&gt; I
    
    I --&gt; J[åˆå§‹åŒ–ConnectionPool]
    J --&gt; K[åˆå§‹åŒ–SSLé…ç½®]
    K --&gt; L[åˆå§‹åŒ–æ‹¦æˆªå™¨é“¾]
    L --&gt; M[åˆå§‹åŒ–ç¼“å­˜é…ç½®]
    M --&gt; N[åˆå§‹åŒ–è¶…æ—¶é…ç½®]
    N --&gt; O[åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨]
    O --&gt; P[åˆ›å»ºOkHttpClientå®ä¾‹]
    
    P --&gt; Q[å®¢æˆ·ç«¯å°±ç»ª]
    
    style C fill:#e3f2fd
    style D fill:#f3e5f5
    style G fill:#e8f5e8
    style H fill:#fff3e0
    style Q fill:#c8e6c9
</code></pre>
<h5 data-id="heading-14">3.1.2 Builderæ¨¡å¼åŸç†</h5>
<p>OkHttpClienté‡‡ç”¨Builderæ¨¡å¼çš„ä¸»è¦åŸå› ï¼š</p>
<ol>
<li><strong>å‚æ•°ä¼—å¤š</strong>ï¼šOkHttpClientæœ‰30+ä¸ªé…ç½®å‚æ•°</li>
<li><strong>å¯é€‰é…ç½®</strong>ï¼šå¤§éƒ¨åˆ†å‚æ•°éƒ½æœ‰åˆç†çš„é»˜è®¤å€¼</li>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼šåˆ›å»ºåçš„OkHttpClientå®ä¾‹ä¸å¯ä¿®æ”¹</li>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼šæä¾›æµç•…çš„APIä½“éªŒ</li>
<li><strong>å‚æ•°éªŒè¯</strong>ï¼šåœ¨build()æ—¶ç»Ÿä¸€éªŒè¯å‚æ•°åˆæ³•æ€§</li>
</ol>
<h5 data-id="heading-15">3.1.3 Builderé…ç½®æµç¨‹å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Builder as OkHttpClient.Builder
    participant Validator as å‚æ•°éªŒè¯å™¨
    participant Factory as ç»„ä»¶å·¥å‚
    participant Client as OkHttpClient
    
    App-&gt;&gt;Builder: new Builder()
    Builder-&gt;&gt;Builder: åˆå§‹åŒ–é»˜è®¤é…ç½®
    
    loop é…ç½®å„ç§å‚æ•°
        App-&gt;&gt;Builder: è®¾ç½®é…ç½®é¡¹
        Builder-&gt;&gt;Builder: å­˜å‚¨é…ç½®å€¼
    end
    
    App-&gt;&gt;Builder: build()
    Builder-&gt;&gt;Validator: éªŒè¯é…ç½®å‚æ•°
    alt å‚æ•°æ— æ•ˆ
        Validator--&gt;&gt;Builder: æŠ›å‡ºå¼‚å¸¸
        Builder--&gt;&gt;App: é…ç½®å¼‚å¸¸
    else å‚æ•°æœ‰æ•ˆ
        Validator--&gt;&gt;Builder: éªŒè¯é€šè¿‡
        Builder-&gt;&gt;Factory: åˆ›å»ºç»„ä»¶å®ä¾‹
        Factory--&gt;&gt;Builder: è¿”å›ç»„ä»¶
        Builder-&gt;&gt;Client: new OkHttpClient(builder)
        Client-&gt;&gt;Client: å¤åˆ¶Builderé…ç½®
        Client--&gt;&gt;Builder: OkHttpClientå®ä¾‹
        Builder--&gt;&gt;App: è¿”å›å®¢æˆ·ç«¯
    end
</code></pre>
<h5 data-id="heading-16">3.1.4 è¶…æ—¶é…ç½®å…³ç³»å›¾</h5>
<p>åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè¿æ¥è¶…æ—¶ï¼Œè¯»å–è¶…æ—¶ï¼Œå†™å…¥è¶…æ—¶ï¼Œå®Œæ•´è¯·æ±‚è¶…æ—¶ï¼Œéƒ½å¯ä»¥çµæ´»é…ç½®ã€‚é‚£ä¹ˆè¿™å—æ˜¯å¦‚ä½•è®¾è®¡çš„å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[è¶…æ—¶é…ç½®] --&gt; B[callTimeout]
    A --&gt; C[connectTimeout]
    A --&gt; D[readTimeout]
    A --&gt; E[writeTimeout]
    A --&gt; F[pingInterval]
    
    B --&gt; G[æ•´ä¸ªè¯·æ±‚çš„æ€»è¶…æ—¶æ—¶é—´]
    C --&gt; H[TCPè¿æ¥å»ºç«‹è¶…æ—¶]
    D --&gt; I[ä»æœåŠ¡å™¨è¯»å–æ•°æ®è¶…æ—¶]
    E --&gt; J[å‘æœåŠ¡å™¨å†™å…¥æ•°æ®è¶…æ—¶]
    F --&gt; K[HTTP/2è¿æ¥ä¿æ´»é—´éš”]
    
    G --&gt; L[åŒ…å«è¿æ¥ã€è¯»å†™ã€é‡å®šå‘ç­‰æ‰€æœ‰æ—¶é—´]
    H --&gt; M[é»˜è®¤10ç§’]
    I --&gt; N[é»˜è®¤10ç§’]
    J --&gt; O[é»˜è®¤10ç§’]
    K --&gt; P[é»˜è®¤0-ä¸å‘é€ping]
    
    style A fill:#e3f2fd
    style B fill:#ffebee
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#f3e5f5
    style F fill:#e1f5fe
</code></pre>
<h4 data-id="heading-17">3.2 Requestè¯·æ±‚å°è£…</h4>
<p>ä¸»è¦æ˜¯å°è£…ä¸€ä¸ªRequestè¯·æ±‚ä½“ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
        .url(url)
        .addHeader(<span class="hljs-string">"cookie"</span>,<span class="hljs-string">"yangchong"</span>)
        .get()
        .build();
</code></pre>
<p>Requestç±»å°è£…äº†HTTPè¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span> {
    <span class="hljs-keyword">final</span> HttpUrl url;
    <span class="hljs-keyword">final</span> String method;
    <span class="hljs-keyword">final</span> Headers headers;
    <span class="hljs-keyword">final</span> <span class="hljs-meta">@Nullable</span> RequestBody body;
    <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, Object&gt; tags;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {
        <span class="hljs-meta">@Nullable</span> HttpUrl url;
        String method;
        Headers.Builder headers;
        <span class="hljs-meta">@Nullable</span> RequestBody body;
        Map&lt;Class&lt;?&gt;, Object&gt; tags = Collections.emptyMap();
    }
}
</code></pre>
<p>RequeståŒ…æ‹¬Headerså’ŒRequestBodyï¼Œè€ŒRequestBodyæ˜¯abstractçš„ï¼Œä»–çš„å­ç±»æ˜¯æœ‰FormBody(è¡¨å•æäº¤çš„)å’ŒMultipartBody(æ–‡ä»¶ä¸Šä¼ )ï¼Œåˆ†åˆ«å¯¹åº”äº†ä¸¤ç§ä¸åŒçš„MIMEç±»å‹ã€‚</p>
<pre><code class="hljs language-text" lang="text">FormBody ï¼š"application/x-www-form-urlencoded"
MultipartBodyï¼š"multipart/"+xxx.
</code></pre>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>ä¸å¯å˜å¯¹è±¡è®¾è®¡ï¼Œçº¿ç¨‹å®‰å…¨</li>
<li>å»ºé€ è€…æ¨¡å¼æ„å»º</li>
<li>æ”¯æŒå¤šç§HTTPæ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰</li>
<li>çµæ´»çš„Headerç®¡ç†</li>
</ul>
<h4 data-id="heading-18">3.3 Callè¯·æ±‚æ‰§è¡Œæ¥å£</h4>
<p>å¦‚ä½•è®¾è®¡Callè¯·æ±‚åŸºäºæ¥å£å¼€å‘ï¼Œè®¾è®¡äº†Callæ¥å£ï¼Œé‡Œé¢ä¸»è¦åšåŒæ­¥è¯·æ±‚executeï¼Œå¼‚æ­¥è¯·æ±‚enqueueï¼Œå–æ¶ˆè¯·æ±‚cancelç­‰ç­‰ã€‚</p>
<p>Callç±»è¯¦è§£ï¼šæœ‰é“è¯å…¸ç¿»è¯‘è¯¥ç±»æ³¨é‡Šï¼šè°ƒç”¨æ˜¯å‡†å¤‡æ‰§è¡Œçš„è¯·æ±‚ã€‚callå¯ä»¥å–æ¶ˆã€‚ç”±äºæ­¤å¯¹è±¡è¡¨ç¤ºå•ä¸ªè¯·æ±‚/å“åº”å¯¹(æµ)ï¼Œå› æ­¤ä¸èƒ½æ‰§è¡Œä¸¤æ¬¡ã€‚</p>
<p>ä¸»è¦æ˜¯HTTPè¯·æ±‚ä»»åŠ¡å°è£…</p>
<ul>
<li>å¯ä»¥è¯´æˆ‘ä»¬èƒ½ç”¨åˆ°çš„æ“çºµåŸºæœ¬ä¸Šéƒ½å®šä¹‰åœ¨è¿™ä¸ªæ¥å£é‡Œé¢äº†ï¼Œå¯ä»¥é€šè¿‡Callå¯¹è±¡æ¥æ“ä½œè¯·æ±‚ï¼ŒåŒæ­¥è¯·æ±‚executeï¼Œå¼‚æ­¥è¯·æ±‚enqueueã€‚</li>
<li>è€ŒCallæ¥å£å†…éƒ¨æä¾›äº†Factoryå·¥å‚æ–¹æ³•æ¨¡å¼(å°†å¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°å·¥å‚ç±»çš„å­ç±»å»è¿›è¡Œï¼Œä»è€Œå®ç°åŠ¨æ€é…ç½®)ã€‚</li>
</ul>
<p>Callæ¥å£å®šä¹‰äº†è¯·æ±‚æ‰§è¡Œçš„æ ‡å‡†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Call</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Cloneable</span> {
    Request <span class="hljs-title function_">request</span><span class="hljs-params">()</span>;
    Response <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueue</span><span class="hljs-params">(Callback responseCallback)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isExecuted</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCanceled</span><span class="hljs-params">()</span>;
    Timeout <span class="hljs-title function_">timeout</span><span class="hljs-params">()</span>;
    Call <span class="hljs-title function_">clone</span><span class="hljs-params">()</span>;
}
</code></pre>
<p><strong>RealCallå®ç°</strong>ï¼š</p>
<ul>
<li>åŒæ­¥æ‰§è¡Œï¼š<code>execute()</code>æ–¹æ³•ç›´æ¥åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œ</li>
<li>å¼‚æ­¥æ‰§è¡Œï¼š<code>enqueue()</code>æ–¹æ³•æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œ</li>
<li>è¯·æ±‚å–æ¶ˆï¼šæ”¯æŒè¯·æ±‚çš„å–æ¶ˆæ“ä½œ</li>
</ul>
<h5 data-id="heading-19">3.3.1 æ ¸å¿ƒæ–¹æ³•å¯¹æ¯”</h5>



































<table><thead><tr><th>ç‰¹æ€§</th><th>execute()</th><th>enqueue()</th></tr></thead><tbody><tr><td>æ‰§è¡Œæ–¹å¼</td><td>åŒæ­¥é˜»å¡</td><td>å¼‚æ­¥éé˜»å¡</td></tr><tr><td>çº¿ç¨‹æ¨¡å‹</td><td>å½“å‰çº¿ç¨‹æ‰§è¡Œ</td><td>çº¿ç¨‹æ± æ‰§è¡Œ</td></tr><tr><td>è¿”å›æ–¹å¼</td><td>ç›´æ¥è¿”å›Response</td><td>é€šè¿‡Callbackå›è°ƒ</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>æŠ›å‡ºIOException</td><td>é€šè¿‡Callback.onFailure</td></tr><tr><td>è°ƒåº¦ç®¡ç†</td><td>ç®€å•è®°å½•</td><td>å¤æ‚çš„é˜Ÿåˆ—è°ƒåº¦</td></tr></tbody></table>
<h5 data-id="heading-20">3.3.2 æ‰§è¡Œæµç¨‹æ¶æ„å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[åº”ç”¨è°ƒç”¨] --&gt; B{é€‰æ‹©æ‰§è¡Œæ–¹å¼}
    B --&gt;|åŒæ­¥| C[call.execute]
    B --&gt;|å¼‚æ­¥| D[call.enqueue]
    
    C --&gt; E[Dispatcher.executed]
    D --&gt; F[Dispatcher.enqueue]
    
    E --&gt; G[getResponseWithInterceptorChain]
    F --&gt; H[AsyncCallå…¥é˜Ÿ]
    H --&gt; I[promoteAndExecute]
    I --&gt; J[çº¿ç¨‹æ± æ‰§è¡ŒAsyncCall]
    J --&gt; K[AsyncCall.execute]
    K --&gt; G
    
    G --&gt; L[æ‹¦æˆªå™¨é“¾å¤„ç†]
    L --&gt; M[ç½‘ç»œè¯·æ±‚]
    M --&gt; N[Responseè¿”å›]
    
    N --&gt; O{æ‰§è¡Œæ–¹å¼}
    O --&gt;|åŒæ­¥| P[ç›´æ¥è¿”å›Response]
    O --&gt;|å¼‚æ­¥| Q[Callback.onResponse]
    
    style C fill:#e1f5fe
    style D fill:#f3e5f5
    style G fill:#fff3e0
    style L fill:#e8f5e8
</code></pre>
<h5 data-id="heading-21">3.3.3 Executeæ‰§è¡Œæ—¶åºå›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant RealCall as RealCall
    participant Transmitter as Transmitter
    participant Dispatcher as Dispatcher
    participant Chain as InterceptorChain
    participant Network as ç½‘ç»œå±‚
    
    App-&gt;&gt;RealCall: execute()
    
    Note over RealCall: 1. æ£€æŸ¥æ‰§è¡ŒçŠ¶æ€
    RealCall-&gt;&gt;RealCall: synchronizedæ£€æŸ¥executed
    alt å·²æ‰§è¡Œ
        RealCall--&gt;&gt;App: IllegalStateException
    end
    RealCall-&gt;&gt;RealCall: executed = true
    
    Note over RealCall: 2. è¶…æ—¶å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
    RealCall-&gt;&gt;Transmitter: timeoutEnter()
    RealCall-&gt;&gt;Transmitter: callStart()
    
    Note over RealCall: 3. è°ƒåº¦å™¨ç®¡ç†
    RealCall-&gt;&gt;Dispatcher: executed(this)
    Note over Dispatcher: æ·»åŠ åˆ°runningSyncCallsé˜Ÿåˆ—
    
    Note over RealCall: 4. æ‰§è¡Œè¯·æ±‚
    RealCall-&gt;&gt;Chain: getResponseWithInterceptorChain()
    Chain-&gt;&gt;Network: ç½‘ç»œè¯·æ±‚å¤„ç†
    Network--&gt;&gt;Chain: Response
    Chain--&gt;&gt;RealCall: Response
    
    Note over RealCall: 5. æ¸…ç†å·¥ä½œ
    RealCall-&gt;&gt;Dispatcher: finished(this)
    Note over Dispatcher: ä»runningSyncCallsç§»é™¤
    
    RealCall--&gt;&gt;App: Response
</code></pre>
<h5 data-id="heading-22">3.3.4 Enqueueæ‰§è¡Œæ—¶åºå›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant RealCall as RealCall
    participant Dispatcher as Dispatcher
    participant AsyncCall as AsyncCall
    participant ThreadPool as çº¿ç¨‹æ± 
    participant Chain as InterceptorChain
    participant Callback as Callback
    
    App-&gt;&gt;RealCall: enqueue(callback)
    
    Note over RealCall: 1. çŠ¶æ€æ£€æŸ¥å’Œè®¾ç½®
    RealCall-&gt;&gt;RealCall: synchronizedæ£€æŸ¥executed
    RealCall-&gt;&gt;RealCall: executed = true
    
    Note over RealCall: 2. åˆ›å»ºAsyncCall
    RealCall-&gt;&gt;AsyncCall: new AsyncCall(callback)
    RealCall-&gt;&gt;Dispatcher: enqueue(asyncCall)
    
    Note over Dispatcher: 3. è°ƒåº¦é€»è¾‘
    Dispatcher-&gt;&gt;Dispatcher: æ·»åŠ åˆ°readyAsyncCalls
    Dispatcher-&gt;&gt;Dispatcher: promoteAndExecute()
    
    alt å¯ä»¥ç«‹å³æ‰§è¡Œ
        Dispatcher-&gt;&gt;Dispatcher: ç§»åŠ¨åˆ°runningAsyncCalls
        Dispatcher-&gt;&gt;AsyncCall: executeOn(executorService)
        AsyncCall-&gt;&gt;ThreadPool: execute(this)
        
        Note over ThreadPool: 4. å¼‚æ­¥æ‰§è¡Œ
        ThreadPool-&gt;&gt;AsyncCall: run()
        AsyncCall-&gt;&gt;AsyncCall: execute()
        AsyncCall-&gt;&gt;Chain: getResponseWithInterceptorChain()
        Chain--&gt;&gt;AsyncCall: Response
        
        Note over AsyncCall: 5. å›è°ƒå¤„ç†
        AsyncCall-&gt;&gt;Callback: onResponse(call, response)
        AsyncCall-&gt;&gt;Dispatcher: finished(this)
    else éœ€è¦ç­‰å¾…
        Note over Dispatcher: ä¿æŒåœ¨readyAsyncCallsé˜Ÿåˆ—ä¸­
    end
    
    RealCall--&gt;&gt;App: void (ç«‹å³è¿”å›)
</code></pre>
<h4 data-id="heading-23">3.4 Dispatcherè°ƒåº¦å™¨</h4>
<p>ç½‘ç»œè¯·æ±‚è‚¯å®šæ¶‰åŠå¤šçº¿ç¨‹ï¼Œå¦‚ä½•å¤„ç†å¤§é‡ä»»åŠ¡ï¼Ÿé‡‡ç”¨Dispatcherä½œä¸ºè°ƒåº¦ï¼Œä¸çº¿ç¨‹æ± é…åˆå®ç°äº†é«˜å¹¶å‘ï¼Œä½é˜»å¡çš„çš„è¿è¡Œã€‚é’ˆå¯¹è¯·æ±‚ä»»åŠ¡ï¼Œé‡‡ç”¨Dequeä½œä¸ºé›†åˆï¼ŒæŒ‰ç…§å…¥é˜Ÿçš„é¡ºåºå…ˆè¿›å…ˆå‡ºã€‚</p>
<p>Dispatcherè´Ÿè´£ç®¡ç†è¯·æ±‚çš„æ‰§è¡Œè°ƒåº¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dispatcher</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxRequests</span> <span class="hljs-operator">=</span> <span class="hljs-number">64</span>;  <span class="hljs-comment">// æœ€å¤§å¹¶å‘è¯·æ±‚æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxRequestsPerHost</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;  <span class="hljs-comment">// å•ä¸»æœºæœ€å¤§å¹¶å‘æ•°</span>
    
    <span class="hljs-comment">// ç­‰å¾…æ‰§è¡Œçš„å¼‚æ­¥è¯·æ±‚é˜Ÿåˆ—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;AsyncCall&gt; readyAsyncCalls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();
    <span class="hljs-comment">// æ­£åœ¨æ‰§è¡Œçš„å¼‚æ­¥è¯·æ±‚é˜Ÿåˆ—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;AsyncCall&gt; runningAsyncCalls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();
    <span class="hljs-comment">// æ­£åœ¨æ‰§è¡Œçš„åŒæ­¥è¯·æ±‚é˜Ÿåˆ—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;RealCall&gt; runningSyncCalls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();
}
</code></pre>
<p><strong>è°ƒåº¦ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é™åˆ¶ï¼ˆé»˜è®¤64ä¸ªï¼‰</li>
<li>å•ä¸»æœºæœ€å¤§å¹¶å‘æ•°é™åˆ¶ï¼ˆé»˜è®¤5ä¸ªï¼‰</li>
<li>ä½¿ç”¨åŒç«¯é˜Ÿåˆ—ç®¡ç†ç­‰å¾…å’Œè¿è¡Œä¸­çš„è¯·æ±‚</li>
<li>è‡ªåŠ¨çš„çº¿ç¨‹æ± ç®¡ç†</li>
</ul>
<h5 data-id="heading-24">3.4.1 Dispatcheræ¶æ„å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[Dispatcher] --&gt; B[ExecutorService]
    A --&gt; C[readyAsyncCalls]
    A --&gt; D[runningAsyncCalls]
    A --&gt; E[runningSyncCalls]
    
    B --&gt; F[ThreadPoolExecutor]
    F --&gt; G[æ ¸å¿ƒçº¿ç¨‹æ•°: 0]
    F --&gt; H[æœ€å¤§çº¿ç¨‹æ•°: Integer.MAX_VALUE]
    F --&gt; I[ç©ºé—²æ—¶é—´: 60ç§’]
    F --&gt; J[é˜Ÿåˆ—: SynchronousQueue]
    
    C --&gt; K[ç­‰å¾…æ‰§è¡Œçš„å¼‚æ­¥è¯·æ±‚]
    D --&gt; L[æ­£åœ¨æ‰§è¡Œçš„å¼‚æ­¥è¯·æ±‚]
    E --&gt; M[æ­£åœ¨æ‰§è¡Œçš„åŒæ­¥è¯·æ±‚]
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style F fill:#e8f5e8
</code></pre>
<h5 data-id="heading-25">3.4.2 å¼‚æ­¥è°ƒåº¦æ¶æ„</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Dispatcherå¼‚æ­¥è°ƒåº¦æ¶æ„"
        A[Dispatcher] --&gt; B[ExecutorService]
        A --&gt; C[readyAsyncCalls]
        A --&gt; D[runningAsyncCalls]
        A --&gt; E[runningSyncCalls]
        
        B --&gt; F[ThreadPoolExecutor]
        F --&gt; G[æ ¸å¿ƒçº¿ç¨‹æ± ]
        F --&gt; H[æœ€å¤§çº¿ç¨‹æ•°]
        F --&gt; I[é˜Ÿåˆ—ç®¡ç†]
        
        subgraph "è°ƒåº¦ç­–ç•¥"
            J[æœ€å¤§å¹¶å‘è¯·æ±‚]
            K[å•ä¸»æœºæœ€å¤§è¯·æ±‚]
            L[ç©ºé—²å›è°ƒ]
        end
        
        subgraph "è¯·æ±‚é˜Ÿåˆ—"
            C --&gt; M[ç­‰å¾…é˜Ÿåˆ—]
            D --&gt; N[æ‰§è¡Œé˜Ÿåˆ—]
            E --&gt; O[åŒæ­¥é˜Ÿåˆ—]
        end
    end
</code></pre>
<h5 data-id="heading-26">3.4.3 è°ƒåº¦ç­–ç•¥æµç¨‹å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[AsyncCallå…¥é˜Ÿ] --&gt; B[æ·»åŠ åˆ°readyAsyncCalls]
    B --&gt; C[è°ƒç”¨promoteAndExecute]
    C --&gt; D{æ£€æŸ¥æ‰§è¡Œæ¡ä»¶}
    
    D --&gt; E{æ€»è¯·æ±‚æ•° &lt; maxRequests?}
    E --&gt;|å¦| F[ä¿æŒåœ¨readyé˜Ÿåˆ—]
    E --&gt;|æ˜¯| G{ä¸»æœºè¯·æ±‚æ•° &lt; maxRequestsPerHost?}
    
    G --&gt;|å¦| H[ç»§ç»­æ£€æŸ¥ä¸‹ä¸€ä¸ª]
    G --&gt;|æ˜¯| I[ç§»åŠ¨åˆ°runningé˜Ÿåˆ—]
    
    I --&gt; J[callsPerHostè®¡æ•°+1]
    J --&gt; K[æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œ]
    K --&gt; L[AsyncCall.execute]
    
    L --&gt; M[æ‰§è¡Œç½‘ç»œè¯·æ±‚]
    M --&gt; N[è¯·æ±‚å®Œæˆ]
    N --&gt; O[è°ƒç”¨finishedæ–¹æ³•]
    O --&gt; P[callsPerHostè®¡æ•°-1]
    P --&gt; Q[ä»runningé˜Ÿåˆ—ç§»é™¤]
    Q --&gt; R[å†æ¬¡è°ƒç”¨promoteAndExecute]
    R --&gt; S[å°è¯•æ‰§è¡Œreadyé˜Ÿåˆ—ä¸­çš„è¯·æ±‚]
    
    H --&gt; T{è¿˜æœ‰æ›´å¤šè¯·æ±‚?}
    T --&gt;|æ˜¯| D
    T --&gt;|å¦| U[ç»“æŸæœ¬è½®è°ƒåº¦]
    
    F --&gt; U
    S --&gt; U
</code></pre>
<h4 data-id="heading-27">3.5 æ‹¦æˆªå™¨æœºåˆ¶</h4>
<p>OKHttpæœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯é˜»å¡çš„åŒæ­¥è¯·æ±‚ï¼Œä¸€ç§æ˜¯å¼‚æ­¥çš„éé˜»å¡çš„è¯·æ±‚ã€‚</p>
<p>ä½†æ˜¯æ— è®ºåŒæ­¥è¿˜æ˜¯å¼‚æ­¥éƒ½ä¼šè°ƒç”¨ä¸‹RealCallçš„ getResponseWithInterceptorChainæ–¹æ³•æ¥å®Œæˆè¯·æ±‚ï¼ŒåŒæ—¶å°†è¿”å›æ•°æ®æˆ–è€…çŠ¶æ€é€šè¿‡Callbackæ¥å®Œæˆã€‚</p>
<blockquote>
<p>è®¾è®¡æ‹¦æˆªå™¨çš„æ ¸å¿ƒåŸç†</p>
</blockquote>
<p>Interceptor è´Ÿè´£æ‹¦æˆªå’Œåˆ†å‘ã€‚å…ˆæ¥çœ‹çœ‹å«ä¹‰ï¼šè§‚å¯Ÿï¼Œä¿®æ”¹ä»¥åŠå¯èƒ½çŸ­è·¯çš„è¯·æ±‚è¾“å‡ºå’Œå“åº”è¯·æ±‚çš„å›æ¥ã€‚é€šå¸¸æƒ…å†µä¸‹æ‹¦æˆªå™¨ç”¨æ¥æ·»åŠ ï¼Œç§»é™¤æˆ–è€…è½¬æ¢è¯·æ±‚æˆ–è€…å›åº”çš„å¤´éƒ¨ä¿¡æ¯ã€‚</p>
<p>æ‹¦æˆªå™¨ï¼Œå°±åƒæ°´ç®¡ä¸€æ ·ï¼ŒæŠŠä¸€èŠ‚ä¸€èŠ‚çš„æ°´ç®¡(æ‹¦æˆªå™¨)è¿èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå›è·¯ã€‚å®é™…ä¸Šclientåˆ°serverä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé€šè¿‡ä¸€ä¸ªåˆä¸€ä¸ªçš„interceptorä¸²èµ·æ¥ï¼Œç„¶åæŠŠæ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œåˆèƒ½æ¥å—è¿”å›çš„æ•°æ®ï¼Œæ¯ä¸€ä¸ªæ‹¦æˆªå™¨(æ°´ç®¡)éƒ½æœ‰è‡ªå·±çš„ä½œç”¨ï¼Œåˆ†åˆ«å¤„ç†ä¸åŒä¸œè¥¿ï¼Œæ¯”å¦‚æ¶ˆæ¯’ï¼Œå‡€åŒ–ï¼Œå»æ‚è´¨ï¼Œå°±åƒä¸€å±‚å±‚è¿‡æ»¤ç½‘ä¸€æ ·ã€‚</p>
<blockquote>
<p>æ¥å£æ˜¯å¦‚ä½•è®¾è®¡çš„</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interceptor</span> {
   <span class="hljs-comment">//è´Ÿè´£æ‹¦æˆª</span>
  Response <span class="hljs-title function_">intercept</span><span class="hljs-params">(Chain chain)</span> <span class="hljs-keyword">throws</span> IOException;
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Chain</span> {
     <span class="hljs-comment">//è´Ÿè´£åˆ†å‘ã€å‰è¡Œ</span>
    Response <span class="hljs-title function_">proceed</span><span class="hljs-params">(Request request)</span> <span class="hljs-keyword">throws</span> IOException;
  }
}
</code></pre>
<h5 data-id="heading-28">3.5.1 æ‹¦æˆªå™¨æ—¶åºå›¾</h5>
<p>OkHttpçš„æ‹¦æˆªå™¨é‡‡ç”¨è´£ä»»é“¾æ¨¡å¼ï¼Œæ¯ä¸ªæ‹¦æˆªå™¨è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Client as OkHttpClient
    participant RealCall as RealCall
    participant Chain as InterceptorChain
    participant AppInt as åº”ç”¨æ‹¦æˆªå™¨
    participant RetryInt as é‡è¯•æ‹¦æˆªå™¨
    participant BridgeInt as æ¡¥æ¥æ‹¦æˆªå™¨
    participant CacheInt as ç¼“å­˜æ‹¦æˆªå™¨
    participant ConnInt as è¿æ¥æ‹¦æˆªå™¨
    participant NetInt as ç½‘ç»œæ‹¦æˆªå™¨
    participant CallInt as è°ƒç”¨æœåŠ¡å™¨æ‹¦æˆªå™¨
    
    App-&gt;&gt;Client: newCall(request)
    Client-&gt;&gt;RealCall: create
    App-&gt;&gt;RealCall: execute()
    RealCall-&gt;&gt;Chain: proceed(request)
    Chain-&gt;&gt;AppInt: intercept(chain)
    AppInt-&gt;&gt;RetryInt: chain.proceed()
    RetryInt-&gt;&gt;BridgeInt: chain.proceed()
    BridgeInt-&gt;&gt;CacheInt: chain.proceed()
    CacheInt-&gt;&gt;ConnInt: chain.proceed()
    ConnInt-&gt;&gt;NetInt: chain.proceed()
    NetInt-&gt;&gt;CallInt: chain.proceed()
    CallInt--&gt;&gt;NetInt: response
    NetInt--&gt;&gt;ConnInt: response
    ConnInt--&gt;&gt;CacheInt: response
    CacheInt--&gt;&gt;BridgeInt: response
    BridgeInt--&gt;&gt;RetryInt: response
    RetryInt--&gt;&gt;AppInt: response
    AppInt--&gt;&gt;Chain: response
    Chain--&gt;&gt;RealCall: response
    RealCall--&gt;&gt;App: response
</code></pre>
<h5 data-id="heading-29">3.5.2 æ‹¦æˆªå™¨ç±»å…³ç³»å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class Interceptor {
        &lt;&lt;interface&gt;&gt;
        +intercept(Chain) Response
    }
    
    class Chain {
        &lt;&lt;interface&gt;&gt;
        +request() Request
        +proceed(Request) Response
        +connection() Connection
        +call() Call
    }
    
    class RealInterceptorChain {
        -List~Interceptor~ interceptors
        -Transmitter transmitter
        -Exchange exchange
        -int index
        -Request request
        +proceed(Request) Response
        +proceed(Request, Transmitter, Exchange) Response
    }
    
    class RetryAndFollowUpInterceptor {
        -OkHttpClient client
        -int MAX_FOLLOW_UPS
        +intercept(Chain) Response
        -recover(IOException, Transmitter, boolean, Request) boolean
        -followUpRequest(Response, Route) Request
    }
    
    class BridgeInterceptor {
        -CookieJar cookieJar
        +intercept(Chain) Response
        -cookieHeader(List~Cookie~) String
    }
    
    class CacheInterceptor {
        -InternalCache cache
        +intercept(Chain) Response
        -cacheCandidate(Request) Response
        -strategy(Request, Response) CacheStrategy
    }
    
    class ConnectInterceptor {
        -OkHttpClient client
        +intercept(Chain) Response
    }
    
    class CallServerInterceptor {
        -boolean forWebSocket
        +intercept(Chain) Response
    }
    
    Interceptor &lt;|-- RetryAndFollowUpInterceptor
    Interceptor &lt;|-- BridgeInterceptor
    Interceptor &lt;|-- CacheInterceptor
    Interceptor &lt;|-- ConnectInterceptor
    Interceptor &lt;|-- CallServerInterceptor
    Chain &lt;|-- RealInterceptorChain
    RealInterceptorChain --&gt; Interceptor : uses
</code></pre>
<h5 data-id="heading-30">3.5.3 å†…ç½®æ‹¦æˆªå™¨è¯¦è§£</h5>
<ol>
<li><strong>åº”ç”¨æ‹¦æˆªå™¨ï¼ˆApplication Interceptorsï¼‰</strong></li>
</ol>
<ul>
<li>ç”¨æˆ·è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨</li>
<li>åœ¨è¯·æ±‚å‘é€å‰å’Œå“åº”æ¥æ”¶åæ‰§è¡Œ</li>
<li>å¯ä»¥ä¿®æ”¹è¯·æ±‚å’Œå“åº”</li>
</ul>
<ol start="2">
<li><strong>é‡è¯•å’Œé‡å®šå‘æ‹¦æˆªå™¨ï¼ˆRetryAndFollowUpInterceptorï¼‰</strong></li>
</ol>
<ul>
<li>å¤„ç†è¯·æ±‚å¤±è´¥é‡è¯•</li>
<li>å¤„ç†HTTPé‡å®šå‘</li>
<li>ç®¡ç†è¿æ¥çš„è·å–å’Œé‡Šæ”¾</li>
</ul>
<ol start="3">
<li><strong>æ¡¥æ¥æ‹¦æˆªå™¨ï¼ˆBridgeInterceptorï¼‰</strong></li>
</ol>
<ul>
<li>å°†ç”¨æˆ·è¯·æ±‚è½¬æ¢ä¸ºç½‘ç»œè¯·æ±‚</li>
<li>æ·»åŠ å¿…è¦çš„HTTPå¤´ï¼ˆContent-Typeã€Content-Lengthç­‰ï¼‰</li>
<li>å¤„ç†Cookie</li>
<li>å¤„ç†GZIPå‹ç¼©</li>
</ul>
<ol start="4">
<li><strong>ç¼“å­˜æ‹¦æˆªå™¨ï¼ˆCacheInterceptorï¼‰</strong></li>
</ol>
<ul>
<li>å®ç°HTTPç¼“å­˜ç­–ç•¥</li>
<li>å¤„ç†ç¼“å­˜çš„è¯»å–å’Œå†™å…¥</li>
<li>æ”¯æŒå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜</li>
</ul>
<ol start="5">
<li><strong>è¿æ¥æ‹¦æˆªå™¨ï¼ˆConnectInterceptorï¼‰</strong></li>
</ol>
<ul>
<li>å»ºç«‹ä¸æœåŠ¡å™¨çš„è¿æ¥</li>
<li>ç®¡ç†è¿æ¥æ± </li>
<li>å¤„ç†HTTP/2è¿æ¥å¤ç”¨</li>
</ul>
<ol start="6">
<li><strong>ç½‘ç»œæ‹¦æˆªå™¨ï¼ˆNetwork Interceptorsï¼‰</strong></li>
</ol>
<ul>
<li>ç”¨æˆ·è‡ªå®šä¹‰çš„ç½‘ç»œçº§æ‹¦æˆªå™¨</li>
<li>åœ¨å®é™…ç½‘ç»œè¯·æ±‚å‰åæ‰§è¡Œ</li>
</ul>
<ol start="7">
<li><strong>è°ƒç”¨æœåŠ¡å™¨æ‹¦æˆªå™¨ï¼ˆCallServerInterceptorï¼‰</strong></li>
</ol>
<ul>
<li>å®é™…çš„ç½‘ç»œIOæ“ä½œ</li>
<li>å‘é€è¯·æ±‚æ•°æ®</li>
<li>è¯»å–å“åº”æ•°æ®</li>
</ul>
<h5 data-id="heading-31">3.5.4 é‡å®šå‘æ‹¦æˆªå™¨</h5>
<p>æ ¸å¿ƒåŠŸèƒ½</p>
<ul>
<li><strong>å¼‚å¸¸æ¢å¤</strong>ï¼šå¤„ç†ç½‘ç»œå¼‚å¸¸å’Œè¿æ¥å¤±è´¥</li>
<li><strong>é‡å®šå‘å¤„ç†</strong>ï¼šè‡ªåŠ¨å¤„ç†HTTPé‡å®šå‘å“åº”</li>
<li><strong>é‡è¯•é€»è¾‘</strong>ï¼šæ ¹æ®ç­–ç•¥å†³å®šæ˜¯å¦é‡è¯•è¯·æ±‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æ¥æ”¶è¯·æ±‚] --&gt; B[å‡†å¤‡è¿æ¥]
    B --&gt; C{æ˜¯å¦è¢«å–æ¶ˆ?}
    C --&gt;|æ˜¯| D[æŠ›å‡ºIOException]
    C --&gt;|å¦| E[æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨]
    
    E --&gt; F{æ˜¯å¦å‘ç”Ÿå¼‚å¸¸?}
    F --&gt;|æ˜¯| G[è°ƒç”¨recoveræ–¹æ³•]
    F --&gt;|å¦| H[æ£€æŸ¥å“åº”çŠ¶æ€]
    
    G --&gt; I{æ˜¯å¦å¯æ¢å¤?}
    I --&gt;|æ˜¯| J[ç»§ç»­é‡è¯•]
    I --&gt;|å¦| K[æŠ›å‡ºå¼‚å¸¸]
    
    H --&gt; L[è°ƒç”¨followUpRequest]
    L --&gt; M{éœ€è¦é‡å®šå‘?}
    M --&gt;|å¦| N[è¿”å›å“åº”]
    M --&gt;|æ˜¯| O{é‡å®šå‘æ¬¡æ•°è¶…é™?}
    
    O --&gt;|æ˜¯| P[æŠ›å‡ºProtocolException]
    O --&gt;|å¦| Q[æ›´æ–°è¯·æ±‚]
    Q --&gt; R[å…³é—­å½“å‰å“åº”]
    R --&gt; J
    
    J --&gt; B
    
    style G fill:#ffebee
    style I fill:#fff3e0
    style M fill:#e8f5e8
    style O fill:#fce4ec
</code></pre>
<h5 data-id="heading-32">3.5.6 ç¼“å­˜æ‹¦æˆªå™¨</h5>
<p>æ ¸å¿ƒåŠŸèƒ½</p>
<ul>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šæ ¹æ®HTTPç¼“å­˜è§„èŒƒå†³å®šç¼“å­˜è¡Œä¸º</li>
<li><strong>ç¼“å­˜è¯»å–</strong>ï¼šä»ç¼“å­˜ä¸­è¯»å–æœ‰æ•ˆçš„å“åº”</li>
<li><strong>ç¼“å­˜å†™å…¥</strong>ï¼šå°†å¯ç¼“å­˜çš„å“åº”å†™å…¥ç¼“å­˜</li>
<li><strong>æ¡ä»¶è¯·æ±‚</strong>ï¼šå‘é€If-None-Matchã€If-Modified-Sinceç­‰æ¡ä»¶è¯·æ±‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æ¥æ”¶è¯·æ±‚] --&gt; B[ä»ç¼“å­˜è·å–å€™é€‰å“åº”]
    B --&gt; C[è®¡ç®—ç¼“å­˜ç­–ç•¥]
    C --&gt; D{ç½‘ç»œè¯·æ±‚ä¸ºnull?}
    
    D --&gt;|æ˜¯| E{ç¼“å­˜å“åº”ä¸ºnull?}
    D --&gt;|å¦| F{ç¼“å­˜å“åº”ä¸ºnull?}
    
    E --&gt;|æ˜¯| G[è¿”å›504é”™è¯¯]
    E --&gt;|å¦| H[è¿”å›ç¼“å­˜å“åº”]
    
    F --&gt;|æ˜¯| I[æ‰§è¡Œç½‘ç»œè¯·æ±‚]
    F --&gt;|å¦| J[æ‰§è¡Œæ¡ä»¶ç½‘ç»œè¯·æ±‚]
    
    I --&gt; K[è·å–ç½‘ç»œå“åº”]
    J --&gt; L[è·å–ç½‘ç»œå“åº”]
    
    K --&gt; M{å“åº”å¯ç¼“å­˜?}
    L --&gt; N{å“åº”çŠ¶æ€ç ?}
    
    N --&gt;|304| O[æ›´æ–°ç¼“å­˜å“åº”]
    N --&gt;|å…¶ä»–| P[ä½¿ç”¨ç½‘ç»œå“åº”]
    
    O --&gt; Q[è¿”å›æ›´æ–°åçš„ç¼“å­˜å“åº”]
    P --&gt; R{å“åº”å¯ç¼“å­˜?}
    
    M --&gt;|æ˜¯| S[å†™å…¥ç¼“å­˜]
    M --&gt;|å¦| T[è¿”å›ç½‘ç»œå“åº”]
    
    R --&gt;|æ˜¯| U[å†™å…¥ç¼“å­˜]
    R --&gt;|å¦| V[è¿”å›ç½‘ç»œå“åº”]
    
    S --&gt; T
    U --&gt; V
    
    style D fill:#e3f2fd
    style E fill:#f3e5f5
    style F fill:#e8f5e8
    style M fill:#fff3e0
    style N fill:#fce4ec
    style R fill:#e0f2f1
</code></pre>
<h5 data-id="heading-33">3.5.7 ç½‘ç»œè¯·æ±‚æ‹¦æˆªå™¨</h5>
<p>CallServerInterceptorï¼ˆç½‘ç»œè¯·æ±‚æ‹¦æˆªå™¨ï¼‰</p>
<ul>
<li><strong>è¯·æ±‚å‘é€</strong>ï¼šå°†HTTPè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨</li>
<li><strong>å“åº”æ¥æ”¶</strong>ï¼šæ¥æ”¶æœåŠ¡å™¨çš„HTTPå“åº”</li>
<li><strong>æµæ§åˆ¶</strong>ï¼šç®¡ç†è¯·æ±‚å’Œå“åº”çš„æ•°æ®æµ</li>
<li><strong>åè®®å¤„ç†</strong>ï¼šå¤„ç†HTTP/1.1å’ŒHTTP/2çš„å…·ä½“åè®®ç»†èŠ‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Chain as RealInterceptorChain
    participant CallServer as CallServerInterceptor
    participant Exchange as Exchange
    participant Codec as ExchangeCodec
    participant Connection as RealConnection
    participant Server as æœåŠ¡å™¨
    
    Chain-&gt;&gt;CallServer: intercept(chain)
    CallServer-&gt;&gt;Exchange: writeRequestHeaders(request)
    Exchange-&gt;&gt;Codec: writeRequestHeaders(request)
    Codec-&gt;&gt;Connection: å‘é€è¯·æ±‚å¤´
    Connection-&gt;&gt;Server: HTTPè¯·æ±‚å¤´
    
    alt æœ‰è¯·æ±‚ä½“
        CallServer-&gt;&gt;Exchange: createRequestBody(request)
        CallServer-&gt;&gt;CallServer: å†™å…¥è¯·æ±‚ä½“æ•°æ®
        CallServer-&gt;&gt;Exchange: finishRequest()
        Exchange-&gt;&gt;Codec: finishRequest()
        Codec-&gt;&gt;Connection: å‘é€è¯·æ±‚ä½“
        Connection-&gt;&gt;Server: HTTPè¯·æ±‚ä½“
    end
    
    CallServer-&gt;&gt;Exchange: readResponseHeaders()
    Exchange-&gt;&gt;Codec: readResponseHeaders()
    Codec-&gt;&gt;Connection: è¯»å–å“åº”å¤´
    Connection-&gt;&gt;Server: è¯·æ±‚å“åº”å¤´
    Server--&gt;&gt;Connection: HTTPå“åº”å¤´
    Connection--&gt;&gt;Codec: å“åº”å¤´æ•°æ®
    Codec--&gt;&gt;Exchange: è§£æåçš„å“åº”å¤´
    Exchange--&gt;&gt;CallServer: Response.Builder
    
    alt æœ‰å“åº”ä½“
        CallServer-&gt;&gt;Exchange: openResponseBody(response)
        Exchange-&gt;&gt;Codec: openResponseBodySource(response)
        Note over CallServer: åˆ›å»ºå“åº”ä½“Source
    end
    
    CallServer--&gt;&gt;Chain: å®Œæ•´çš„Responseå¯¹è±¡
</code></pre>
<h5 data-id="heading-34">3.5.8 æ‹¦æˆªå™¨é“¾çŠ¶æ€ç®¡ç†</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; Created: new RealInterceptorChain()
    Created --&gt; Executing: proceed()è°ƒç”¨
    Executing --&gt; NextInterceptor: index++, åˆ›å»ºæ–°é“¾
    NextInterceptor --&gt; Executing: interceptor.intercept()
    Executing --&gt; Completed: è¿”å›Response
    Executing --&gt; Error: å¼‚å¸¸å‘ç”Ÿ
    Error --&gt; [*]
    Completed --&gt; [*]
    
    note right of NextInterceptor
        æ¯æ¬¡proceed()è°ƒç”¨éƒ½ä¼šï¼š
        1. index + 1
        2. åˆ›å»ºæ–°çš„RealInterceptorChain
        3. ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨
    end note
</code></pre>
<h4 data-id="heading-35">3.6 Responseè¿”å›</h4>
<p>Responseæ ¸å¿ƒèŒè´£</p>
<ul>
<li><strong>å“åº”å°è£…</strong>ï¼šç»Ÿä¸€å°è£…HTTPå“åº”çš„æ‰€æœ‰ä¿¡æ¯</li>
<li><strong>æµå¼å¤„ç†</strong>ï¼šæ”¯æŒå¤§æ–‡ä»¶çš„æµå¼è¯»å–å’Œå¤„ç†</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œé¿å…å¤§å“åº”ä½“çš„å†…å­˜æº¢å‡º</li>
<li><strong>åè®®é€‚é…</strong>ï¼šæ”¯æŒHTTP/1.1å’ŒHTTP/2åè®®çš„å“åº”å¤„ç†</li>
<li><strong>ç¼“å­˜é›†æˆ</strong>ï¼šä¸ç¼“å­˜ç³»ç»Ÿæ— ç¼é›†æˆ</li>
</ul>
<h5 data-id="heading-36">3.6.1 ç±»å±‚æ¬¡ç»“æ„å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class Response {
        -Request request
        -Protocol protocol
        -int code
        -String message
        -Headers headers
        -ResponseBody body
        -Response networkResponse
        -Response cacheResponse
        -Response priorResponse
        -Handshake handshake
        -long sentRequestAtMillis
        -long receivedResponseAtMillis
        +Builder newBuilder()
        +boolean isSuccessful()
        +boolean isRedirect()
        +String header(String)
        +List~String~ headers(String)
        +ResponseBody body()
        +void close()
    }
    
    class ResponseBody {
        &lt;&lt;abstract&gt;&gt;
        +MediaType contentType()
        +long contentLength()
        +BufferedSource source()
        +String string()
        +byte[] bytes()
        +InputStream byteStream()
        +Reader charStream()
        +void close()
    }
    
    class RealResponseBody {
        -String contentTypeString
        -long contentLength
        -BufferedSource source
        +MediaType contentType()
        +long contentLength()
        +BufferedSource source()
    }
    
    class Headers {
        -String[] namesAndValues
        +String get(String)
        +List~String~ values(String)
        +Set~String~ names()
        +int size()
        +String name(int)
        +String value(int)
        +Builder newBuilder()
    }
    
    class Builder {
        -Request request
        -Protocol protocol
        -int code
        -String message
        -Headers.Builder headers
        -ResponseBody body
        +Builder request(Request)
        +Builder protocol(Protocol)
        +Builder code(int)
        +Builder message(String)
        +Builder header(String, String)
        +Builder headers(Headers)
        +Builder body(ResponseBody)
        +Response build()
    }
    
    Response --&gt; ResponseBody : contains
    Response --&gt; Headers : contains
    Response --&gt; Builder : creates
    ResponseBody &lt;|-- RealResponseBody : implements
    Response -- Builder : inner class
</code></pre>
<h5 data-id="heading-37">3.6.2 åˆ›å»ºæµç¨‹æ¶æ„å›¾</h5>
<p>Responseåˆ›å»ºæµç¨‹æ¶æ„å›¾</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[æœåŠ¡å™¨å“åº”] --&gt; B[ExchangeCodecè¯»å–]
    B --&gt; C{åè®®ç±»å‹}
    
    C --&gt;|HTTP/1.1| D[Http1ExchangeCodec]
    C --&gt;|HTTP/2| E[Http2ExchangeCodec]
    
    D --&gt; F[è§£æçŠ¶æ€è¡Œ]
    E --&gt; G[è§£æHTTP/2å¸§]
    
    F --&gt; H[è§£æå“åº”å¤´]
    G --&gt; H
    
    H --&gt; I[åˆ›å»ºResponse.Builder]
    I --&gt; J[è®¾ç½®åŸºæœ¬ä¿¡æ¯]
    J --&gt; K[è®¾ç½®å“åº”å¤´]
    K --&gt; L[åˆ›å»ºResponseBody]
    L --&gt; M[æ„å»ºResponseå¯¹è±¡]
    
    M --&gt; N[æ‹¦æˆªå™¨å¤„ç†]
    N --&gt; O[è¿”å›ç»™åº”ç”¨å±‚]
    
    style D fill:#e3f2fd
    style E fill:#f3e5f5
    style I fill:#e8f5e8
    style L fill:#fff3e0
    style N fill:#fce4ec
</code></pre>
<h5 data-id="heading-38">3.6.3 çŠ¶æ€è¡Œè§£ææµç¨‹å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[è¯»å–çŠ¶æ€è¡Œ] --&gt; B[StatusLine.parse]
    B --&gt; C{è§£ææˆåŠŸ?}
    C --&gt;|å¦| D[æŠ›å‡ºProtocolException]
    C --&gt;|æ˜¯| E[æå–åè®®ç‰ˆæœ¬]
    E --&gt; F[æå–çŠ¶æ€ç ]
    F --&gt; G[æå–çŠ¶æ€æ¶ˆæ¯]
    G --&gt; H[åˆ›å»ºResponse.Builder]
    H --&gt; I[è®¾ç½®protocol]
    I --&gt; J[è®¾ç½®code]
    J --&gt; K[è®¾ç½®message]
    K --&gt; L{çŠ¶æ€ç æ£€æŸ¥}
    L --&gt;|100 Continue| M{æœŸæœ›Continue?}
    L --&gt;|å…¶ä»–| N[è¯»å–å“åº”å¤´]
    M --&gt;|æ˜¯| O[è¿”å›null]
    M --&gt;|å¦| P[è¿”å›Builder]
    N --&gt; Q[è¿”å›å®Œæ•´Builder]
    
    style C fill:#fff3e0
    style L fill:#e3f2fd
    style M fill:#f3e5f5
</code></pre>
<h5 data-id="heading-39">3.6.4 Headersè§£ææµç¨‹</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Codec as ExchangeCodec
    participant Reader as Source/BufferedSource
    participant Headers as Headers.Builder
    participant Parser as HeaderParser
    
    Codec-&gt;&gt;Reader: readHeaderLine()
    loop è¯»å–æ¯ä¸€è¡Œ
        Reader--&gt;&gt;Codec: å“åº”å¤´è¡Œ
        alt ç©ºè¡Œ(å“åº”å¤´ç»“æŸ)
            Codec-&gt;&gt;Codec: break
        else æ­£å¸¸å“åº”å¤´
            Codec-&gt;&gt;Parser: è§£æå¤´éƒ¨åç§°å’Œå€¼
            Parser--&gt;&gt;Codec: name, value
            Codec-&gt;&gt;Headers: addLenient(name, value)
        else å¤šè¡Œå¤´éƒ¨(æŠ˜å )
            Codec-&gt;&gt;Parser: å¤„ç†æŠ˜å è¡Œ
            Parser--&gt;&gt;Codec: åˆå¹¶åçš„å€¼
            Codec-&gt;&gt;Headers: æ›´æ–°å¤´éƒ¨å€¼
        end
    end
    Headers--&gt;&gt;Codec: Headerså¯¹è±¡
</code></pre>
<h5 data-id="heading-40">3.6.5 ResponseBodyæ¶æ„è®¾è®¡</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class ResponseBody {
        &lt;&lt;abstract&gt;&gt;
        +MediaType contentType()
        +long contentLength()
        +BufferedSource source()
        +String string()
        +byte[] bytes()
        +InputStream byteStream()
        +Reader charStream()
        +void close()
        +create(MediaType, String)$ ResponseBody
        +create(MediaType, byte[])$ ResponseBody
        +create(MediaType, long, BufferedSource)$ ResponseBody
    }
    
    class RealResponseBody {
        -String contentTypeString
        -long contentLength
        -BufferedSource source
        +MediaType contentType()
        +long contentLength()
        +BufferedSource source()
    }
    
    class CacheWritingResponseBody {
        -ResponseBody delegate
        -CacheRequest cacheRequest
        -BufferedSink cacheBody
        -Source cacheWritingSource
        +long contentLength()
        +BufferedSource source()
    }
    
    class GzipResponseBody {
        -ResponseBody responseBody
        -GzipSource gzipSource
        +long contentLength()
        +BufferedSource source()
    }
    
    ResponseBody &lt;|-- RealResponseBody
    ResponseBody &lt;|-- CacheWritingResponseBody
    ResponseBody &lt;|-- GzipResponseBody
    CacheWritingResponseBody --&gt; ResponseBody : delegates to
    GzipResponseBody --&gt; ResponseBody : wraps
</code></pre>
<h5 data-id="heading-41">3.6.6 ResponseBodyæ•°æ®è¯»å–</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ResponseBodyæ•°æ®è¯»å–] --&gt; B{è¯»å–æ–¹å¼é€‰æ‹©}
    
    B --&gt;|å°æ•°æ®| C[stringæ–¹æ³•]
    B --&gt;|äºŒè¿›åˆ¶æ•°æ®| D[bytesæ–¹æ³•]
    B --&gt;|æµå¼è¯»å–| E[sourceæ–¹æ³•]
    B --&gt;|InputStream| F[byteStreamæ–¹æ³•]
    B --&gt;|å­—ç¬¦æµ| G[charStreamæ–¹æ³•]
    
    C --&gt; H[ä¸€æ¬¡æ€§è¯»å–åˆ°å†…å­˜]
    D --&gt; I[ä¸€æ¬¡æ€§è¯»å–åˆ°å­—èŠ‚æ•°ç»„]
    E --&gt; J[BufferedSourceæµå¼è¯»å–]
    F --&gt; K[InputStreamåŒ…è£…]
    G --&gt; L[Readerå­—ç¬¦æµ]
    
    H --&gt; M{æ•°æ®å¤§å°}
    I --&gt; M
    M --&gt;|å°äº1MB| N[é€‚åˆ]
    M --&gt;|å¤§äº1MB| O[å¯èƒ½OOM]
    
    J --&gt; P[å†…å­˜å‹å¥½]
    K --&gt; P
    L --&gt; P
    
    style C fill:#ffebee
    style D fill:#ffebee
    style E fill:#e8f5e8
    style F fill:#e8f5e8
    style G fill:#e8f5e8
    style O fill:#ffcdd2
    style P fill:#c8e6c9
</code></pre>
<h5 data-id="heading-42">3.6.7 Responseç”Ÿå‘½å‘¨æœŸ</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Call as RealCall
    participant Chain as InterceptorChain
    participant Exchange as Exchange
    participant Codec as ExchangeCodec
    participant Response as Response
    participant Body as ResponseBody
    
    App-&gt;&gt;Call: execute() / enqueue()
    Call-&gt;&gt;Chain: getResponseWithInterceptorChain()
    Chain-&gt;&gt;Exchange: æ‹¦æˆªå™¨é“¾å¤„ç†
    Exchange-&gt;&gt;Codec: readResponseHeaders()
    Codec--&gt;&gt;Exchange: Response.Builder
    Exchange-&gt;&gt;Exchange: openResponseBody()
    Exchange-&gt;&gt;Body: åˆ›å»ºResponseBody
    Body--&gt;&gt;Exchange: ResponseBodyå®ä¾‹
    Exchange-&gt;&gt;Response: Builder.body().build()
    Response--&gt;&gt;Chain: å®Œæ•´Response
    Chain--&gt;&gt;Call: Response
    Call--&gt;&gt;App: Response
    
    Note over App: åº”ç”¨å¤„ç†Response
    App-&gt;&gt;Body: string() / bytes() / source()
    Body--&gt;&gt;App: å“åº”æ•°æ®
    App-&gt;&gt;Response: close()
    Response-&gt;&gt;Body: close()
    Body-&gt;&gt;Codec: å…³é—­åº•å±‚è¿æ¥
</code></pre>
<h5 data-id="heading-43">3.6.8 å“åº”æ•°æ®å¤„ç†</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[å“åº”æ•°æ®å¤„ç†] --&gt; B{æ•°æ®å¤§å°è¯„ä¼°}
    B --&gt;|å°äº64KB| C[ç›´æ¥å†…å­˜è¯»å–]
    B --&gt;|64KB-1MB| D[åˆ†å—è¯»å–]
    B --&gt;|å¤§äº1MB| E[æµå¼å¤„ç†]
    
    C --&gt; F[string/bytesæ–¹æ³•]
    D --&gt; G[BufferedSourceåˆ†å—]
    E --&gt; H[InputStream/Reader]
    
    F --&gt; I[ä¸€æ¬¡æ€§åˆ†é…å†…å­˜]
    G --&gt; J[å›ºå®šå¤§å°ç¼“å†²åŒº]
    H --&gt; K[æŒ‰éœ€åˆ†é…]
    
    I --&gt; L{å†…å­˜å……è¶³?}
    L --&gt;|æ˜¯| M[æ­£å¸¸å¤„ç†]
    L --&gt;|å¦| N[OutOfMemoryError]
    
    J --&gt; O[å†…å­˜å¯æ§]
    K --&gt; O
    
    style N fill:#ffcdd2
    style O fill:#c8e6c9
    style M fill:#e8f5e8
</code></pre>
<h5 data-id="heading-44">3.6.9 Responseé”™è¯¯å¤„ç†</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[Responseå¤„ç†] --&gt; B{çŠ¶æ€ç æ£€æŸ¥}
    B --&gt;|2xx| C[æˆåŠŸå“åº”]
    B --&gt;|3xx| D[é‡å®šå‘å¤„ç†]
    B --&gt;|4xx| E[å®¢æˆ·ç«¯é”™è¯¯]
    B --&gt;|5xx| F[æœåŠ¡å™¨é”™è¯¯]
    
    C --&gt; G[æ­£å¸¸å¤„ç†ResponseBody]
    D --&gt; H[RetryAndFollowUpInterceptorå¤„ç†]
    E --&gt; I[åº”ç”¨å±‚é”™è¯¯å¤„ç†]
    F --&gt; J[å¯èƒ½é‡è¯•]
    
    G --&gt; K{ResponseBodyè¯»å–}
    K --&gt;|æˆåŠŸ| L[è¿”å›æ•°æ®]
    K --&gt;|IOå¼‚å¸¸| M[è¿æ¥é”™è¯¯å¤„ç†]
    K --&gt;|åè®®å¼‚å¸¸| N[åè®®é”™è¯¯å¤„ç†]
    
    H --&gt; O[è‡ªåŠ¨é‡å®šå‘]
    I --&gt; P[è¿”å›é”™è¯¯Response]
    J --&gt; Q[é‡è¯•æˆ–å¤±è´¥]
    
    M --&gt; R[å…³é—­è¿æ¥]
    N --&gt; R
    R --&gt; S[æŠ›å‡ºå¼‚å¸¸]
    
    style E fill:#fff3e0
    style F fill:#ffebee
    style M fill:#ffcdd2
    style N fill:#ffcdd2
</code></pre>
<h5 data-id="heading-45">3.6.10 Responseç¼“å­˜æœºåˆ¶</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨
    participant Cache as CacheInterceptor
    participant DiskCache as DiskLruCache
    participant Network as ç½‘ç»œå±‚
    participant Response as Response
    
    App-&gt;&gt;Cache: è¯·æ±‚
    Cache-&gt;&gt;DiskCache: æŸ¥æ‰¾ç¼“å­˜
    alt ç¼“å­˜å‘½ä¸­ä¸”æœ‰æ•ˆ
        DiskCache--&gt;&gt;Cache: ç¼“å­˜Response
        Cache-&gt;&gt;Response: åˆ›å»ºç¼“å­˜Response
        Response--&gt;&gt;App: è¿”å›ç¼“å­˜æ•°æ®
    else ç¼“å­˜è¿‡æœŸæˆ–ä¸å­˜åœ¨
        Cache-&gt;&gt;Network: ç½‘ç»œè¯·æ±‚
        Network--&gt;&gt;Cache: ç½‘ç»œResponse
        Cache-&gt;&gt;DiskCache: å­˜å‚¨Response
        Cache-&gt;&gt;Response: åŒ…è£…ä¸ºç¼“å­˜å†™å…¥Response
        Response--&gt;&gt;App: è¿”å›ç½‘ç»œæ•°æ®
        Note over Response: è¯»å–æ—¶åŒæ—¶å†™å…¥ç¼“å­˜
    end
</code></pre>
<h3 data-id="heading-46">04.æ ¸å¿ƒæµç¨‹åˆ†æ</h3>
<h4 data-id="heading-47">4.1 è¯·æ±‚æ‰§è¡Œæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[åˆ›å»ºOkHttpClient] --&gt; B[æ„å»ºRequest]
    B --&gt; C[è°ƒç”¨newCallåˆ›å»ºCall]
    C --&gt; D{åŒæ­¥è¿˜æ˜¯å¼‚æ­¥?}
    
    D --&gt;|åŒæ­¥| E[call.execute]
    D --&gt;|å¼‚æ­¥| F[call.enqueue]
    
    E --&gt; G[Dispatcherè°ƒåº¦]
    F --&gt; H[åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—]
    H --&gt; I[çº¿ç¨‹æ± æ‰§è¡Œ]
    I --&gt; G
    
    G --&gt; J[æ„å»ºæ‹¦æˆªå™¨é“¾]
    J --&gt; K[ä¾æ¬¡æ‰§è¡Œæ‹¦æˆªå™¨]
    K --&gt; L[å‘é€ç½‘ç»œè¯·æ±‚]
    L --&gt; M[æ¥æ”¶å“åº”]
    M --&gt; N[æ‹¦æˆªå™¨é“¾å¤„ç†å“åº”]
    N --&gt; O[è¿”å›Response]
    
    O --&gt; P{å¼‚æ­¥?}
    P --&gt;|æ˜¯| Q[å›è°ƒCallback]
    P --&gt;|å¦| R[ç›´æ¥è¿”å›]
</code></pre>
<h4 data-id="heading-48">4.2 è¿æ¥ç®¡ç†æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Call as RealCall
    participant ConnInt as ConnectInterceptor
    participant Pool as ConnectionPool
    participant Conn as RealConnection
    participant Socket as Socket
    
    Call-&gt;&gt;ConnInt: intercept()
    ConnInt-&gt;&gt;Pool: get(address)
    
    alt è¿æ¥æ± ä¸­æœ‰å¯ç”¨è¿æ¥
        Pool--&gt;&gt;ConnInt: è¿”å›ç°æœ‰è¿æ¥
    else éœ€è¦åˆ›å»ºæ–°è¿æ¥
        ConnInt-&gt;&gt;Conn: create new
        Conn-&gt;&gt;Socket: connect()
        Socket--&gt;&gt;Conn: connected
        Conn--&gt;&gt;Pool: put(connection)
        Pool--&gt;&gt;ConnInt: è¿”å›æ–°è¿æ¥
    end
    
    ConnInt-&gt;&gt;Call: proceed with connection
</code></pre>
<h4 data-id="heading-49">4.3 ç¼“å­˜å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[è¯·æ±‚åˆ°è¾¾ç¼“å­˜æ‹¦æˆªå™¨] --&gt; B{ç¼“å­˜æ˜¯å¦å­˜åœ¨?}
    
    B --&gt;|å¦| C[ç»§ç»­ç½‘ç»œè¯·æ±‚]
    B --&gt;|æ˜¯| D{ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ?}
    
    D --&gt;|æœ‰æ•ˆ| E[è¿”å›ç¼“å­˜å“åº”]
    D --&gt;|éœ€è¦éªŒè¯| F[æ·»åŠ æ¡ä»¶è¯·æ±‚å¤´]
    D --&gt;|è¿‡æœŸ| C
    
    F --&gt; G[å‘é€æ¡ä»¶è¯·æ±‚]
    G --&gt; H{æœåŠ¡å™¨å“åº”}
    
    H --&gt;|304 Not Modified| I[è¿”å›ç¼“å­˜å†…å®¹]
    H --&gt;|200 OK| J[æ›´æ–°ç¼“å­˜å¹¶è¿”å›æ–°å†…å®¹]
    
    C --&gt; K[ç½‘ç»œè¯·æ±‚]
    K --&gt; L{å“åº”å¯ç¼“å­˜?}
    L --&gt;|æ˜¯| M[å­˜å‚¨åˆ°ç¼“å­˜]
    L --&gt;|å¦| N[ç›´æ¥è¿”å›å“åº”]
    M --&gt; N
</code></pre>
<h3 data-id="heading-50">05.å…³é”®æŠ€æœ¯ç‰¹æ€§</h3>
<h4 data-id="heading-51">5.1 è¿æ¥æ± ç®¡ç†</h4>
<p>OkHttpä½¿ç”¨è¿æ¥æ± æ¥å¤ç”¨HTTPè¿æ¥ï¼Œæé«˜æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionPool</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Executor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
        <span class="hljs-number">0</span>, Integer.MAX_VALUE, <span class="hljs-number">60L</span>, TimeUnit.SECONDS,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">SynchronousQueue</span>&lt;&gt;(), 
        Util.threadFactory(<span class="hljs-string">"OkHttp ConnectionPool"</span>, <span class="hljs-literal">true</span>)
    );
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RealConnectionPool delegate;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConnectionPool</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, TimeUnit.MINUTES);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConnectionPool</span><span class="hljs-params">(<span class="hljs-type">int</span> maxIdleConnections, <span class="hljs-type">long</span> keepAliveDuration, TimeUnit timeUnit)</span> {
        <span class="hljs-built_in">this</span>.delegate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RealConnectionPool</span>(taskRunner, maxIdleConnections, keepAliveDuration, timeUnit);
    }
}
</code></pre>
<p><strong>è¿æ¥æ± ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>é»˜è®¤æœ€å¤§ç©ºé—²è¿æ¥æ•°ï¼š5ä¸ª</li>
<li>é»˜è®¤è¿æ¥ä¿æ´»æ—¶é—´ï¼š5åˆ†é’Ÿ</li>
<li>è‡ªåŠ¨æ¸…ç†è¿‡æœŸè¿æ¥</li>
<li>æ”¯æŒHTTP/1.1å’ŒHTTP/2è¿æ¥å¤ç”¨</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[ConnectionPoolåˆ›å»º] --&gt; B[è®¾ç½®æœ€å¤§ç©ºé—²è¿æ¥æ•°: 5]
    B --&gt; C[è®¾ç½®è¿æ¥ä¿æ´»æ—¶é—´: 5åˆ†é’Ÿ]
    C --&gt; D[åˆ›å»ºRealConnectionPool]
    D --&gt; E[å¯åŠ¨æ¸…ç†çº¿ç¨‹æ± ]
    
    E --&gt; F[è¿æ¥ä½¿ç”¨æµç¨‹]
    F --&gt; G{éœ€è¦æ–°è¿æ¥?}
    G --&gt;|æ˜¯| H[åˆ›å»ºæ–°è¿æ¥]
    G --&gt;|å¦| I[å¤ç”¨ç°æœ‰è¿æ¥]
    
    H --&gt; J[è¿æ¥åŠ å…¥æ± ä¸­]
    I --&gt; K[æ›´æ–°è¿æ¥ä½¿ç”¨æ—¶é—´]
    J --&gt; L[è¿æ¥ä½¿ç”¨å®Œæ¯•]
    K --&gt; L
    
    L --&gt; M[è¿æ¥å˜ä¸ºç©ºé—²çŠ¶æ€]
    M --&gt; N[æ¸…ç†çº¿ç¨‹æ£€æŸ¥]
    N --&gt; O{è¿æ¥è¿‡æœŸ?}
    O --&gt;|æ˜¯| P[ç§»é™¤å¹¶å…³é—­è¿æ¥]
    O --&gt;|å¦| Q[ä¿æŒè¿æ¥]
    
    P --&gt; R[è¿æ¥æ± ç»´æŠ¤å®Œæˆ]
    Q --&gt; R
    
    style A fill:#e3f2fd
    style D fill:#f3e5f5
    style G fill:#fff3e0
    style O fill:#ffebee
</code></pre>
<h4 data-id="heading-52">5.2 HTTP/2æ”¯æŒ</h4>
<p>OkHttpå®Œæ•´æ”¯æŒHTTP/2åè®®ï¼š</p>
<ul>
<li><strong>å¤šè·¯å¤ç”¨</strong>ï¼šå•ä¸ªè¿æ¥ä¸Šå¹¶å‘å¤„ç†å¤šä¸ªè¯·æ±‚</li>
<li><strong>æœåŠ¡å™¨æ¨é€</strong>ï¼šæœåŠ¡å™¨ä¸»åŠ¨æ¨é€èµ„æº</li>
<li><strong>å¤´éƒ¨å‹ç¼©</strong>ï¼šHPACKç®—æ³•å‹ç¼©HTTPå¤´éƒ¨</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šç²¾ç¡®æ§åˆ¶æ•°æ®ä¼ è¾“é€Ÿç‡</li>
</ul>
<h5 data-id="heading-53">5.2.1 HTTP/2è¿æ¥æ¶æ„</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "HTTP/2å¤šè·¯å¤ç”¨æ¶æ„"
        A[Http2Connection] --&gt; B[Http2Writer]
        A --&gt; C[Http2Reader]
        A --&gt; D[Settings]
        A --&gt; E[æµç®¡ç†å™¨]
        
        E --&gt; F[Http2Stream 1]
        E --&gt; G[Http2Stream 2]
        E --&gt; H[Http2Stream N]
        
        subgraph "æµæ§åˆ¶"
            I[è¿æ¥çº§æµæ§]
            J[æµçº§æµæ§]
            K[çª—å£æ›´æ–°]
        end
        
        subgraph "å¸§å¤„ç†"
            L[DATAå¸§]
            M[HEADERSå¸§]
            N[SETTINGSå¸§]
            O[WINDOW_UPDATEå¸§]
            P[PINGå¸§]
        end
        
        F --&gt; I
        G --&gt; I
        H --&gt; I
        
        F --&gt; J
        G --&gt; J
        H --&gt; J
    end
</code></pre>
<h4 data-id="heading-54">5.3 ç¼“å­˜æœºåˆ¶è®¾è®¡</h4>
<p>å®ç°å®Œæ•´çš„HTTPç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> Response <span class="hljs-title function_">intercept</span><span class="hljs-params">(Chain chain)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">Response</span> <span class="hljs-variable">cacheCandidate</span> <span class="hljs-operator">=</span> cache != <span class="hljs-literal">null</span> ? cache.get(chain.request()) : <span class="hljs-literal">null</span>;
        
        <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">CacheStrategy</span> <span class="hljs-variable">strategy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheStrategy</span>.Factory(now, chain.request(), cacheCandidate).get();
        <span class="hljs-type">Request</span> <span class="hljs-variable">networkRequest</span> <span class="hljs-operator">=</span> strategy.networkRequest;
        <span class="hljs-type">Response</span> <span class="hljs-variable">cacheResponse</span> <span class="hljs-operator">=</span> strategy.cacheResponse;
        
        <span class="hljs-comment">// ç¼“å­˜ç­–ç•¥å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (networkRequest == <span class="hljs-literal">null</span> &amp;&amp; cacheResponse == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>.Builder()
                .request(chain.request())
                .protocol(Protocol.HTTP_1_1)
                .code(<span class="hljs-number">504</span>)
                .message(<span class="hljs-string">"Unsatisfiable Request (only-if-cached)"</span>)
                .build();
        }
        
        <span class="hljs-keyword">if</span> (networkRequest == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> cacheResponse.newBuilder()
                .cacheResponse(stripBody(cacheResponse))
                .build();
        }
        
        <span class="hljs-comment">// ç»§ç»­ç½‘ç»œè¯·æ±‚...</span>
    }
}
</code></pre>
<h5 data-id="heading-55">5.3.1 ç¼“å­˜æ¶æ„è®¾è®¡</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "OkHttpç¼“å­˜æ¶æ„"
        A[OkHttpClient] --&gt; B[CacheInterceptor]
        B --&gt; C[CacheStrategy]
        C --&gt; D[Cache]
        D --&gt; E[DiskLruCache]
        
        F[Request] --&gt; G[CacheControl]
        H[Response] --&gt; I[Headers]
        I --&gt; J[CacheControl]
        
        B --&gt; K[InternalCache]
        K --&gt; L[CacheRequest]
        K --&gt; M[Responseç¼“å­˜]
        
        subgraph "ç¼“å­˜å†³ç­–"
            C --&gt; N[ç½‘ç»œè¯·æ±‚]
            C --&gt; O[ç¼“å­˜å“åº”]
            C --&gt; P[æ¡ä»¶è¯·æ±‚]
        end
        
        subgraph "å­˜å‚¨å±‚"
            E --&gt; Q[Journalæ–‡ä»¶]
            E --&gt; R[Entryæ–‡ä»¶]
            E --&gt; S[Snapshot]
        end
    end
</code></pre>
<h5 data-id="heading-56">5.3.2 ç¼“å­˜æ ¸å¿ƒç»„ä»¶</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class Cache {
        -DiskLruCache cache
        -InternalCache internalCache
        +get(Request) Response
        +put(Response) CacheRequest
        +remove(Request)
        +urls() Iterator
        +size() long
        +maxSize() long
    }
    
    class CacheInterceptor {
        -InternalCache cache
        +intercept(Chain) Response
        -cacheWritingResponse(CacheRequest, Response) Response
    }
    
    class CacheStrategy {
        +Factory factory
        +networkRequest Request
        +cacheResponse Response
        +get() CacheStrategy
    }
    
    class DiskLruCache {
        -File directory
        -long maxSize
        -Map&lt;String, Entry&gt; lruEntries
        +get(String) Snapshot
        +edit(String) Editor
        +remove(String) boolean
    }
    
    class CacheControl {
        -boolean noCache
        -boolean noStore
        -int maxAgeSeconds
        -int maxStaleSeconds
        -int minFreshSeconds
        +parse(Headers) CacheControl
    }
    
    Cache --&gt; DiskLruCache
    Cache --&gt; InternalCache
    CacheInterceptor --&gt; Cache
    CacheInterceptor --&gt; CacheStrategy
    CacheStrategy --&gt; CacheControl
</code></pre>
<h5 data-id="heading-57">5.3.3 ç¼“å­˜å†³ç­–æµç¨‹</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æ¥æ”¶è¯·æ±‚] --&gt; B{æ£€æŸ¥ç¼“å­˜}
    B --&gt;|æ— ç¼“å­˜| C[å‘èµ·ç½‘ç»œè¯·æ±‚]
    B --&gt;|æœ‰ç¼“å­˜| D{ç¼“å­˜æ˜¯å¦æ–°é²œ}
    
    D --&gt;|æ–°é²œ| E[è¿”å›ç¼“å­˜å“åº”]
    D --&gt;|è¿‡æœŸ| F{æ˜¯å¦å…è®¸è¿‡æœŸç¼“å­˜}
    
    F --&gt;|å…è®¸| G{æ£€æŸ¥max-stale}
    F --&gt;|ä¸å…è®¸| H{æ”¯æŒæ¡ä»¶è¯·æ±‚}
    
    G --&gt;|åœ¨å…è®¸èŒƒå›´å†…| E
    G --&gt;|è¶…å‡ºèŒƒå›´| H
    
    H --&gt;|æ”¯æŒ| I[å‘èµ·æ¡ä»¶è¯·æ±‚]
    H --&gt;|ä¸æ”¯æŒ| C
    
    I --&gt; J{æœåŠ¡å™¨å“åº”}
    J --&gt;|304 Not Modified| K[æ›´æ–°ç¼“å­˜å…ƒæ•°æ®]
    J --&gt;|200 OK| L[æ›´æ–°ç¼“å­˜å†…å®¹]
    
    K --&gt; E
    L --&gt; M[è¿”å›æ–°å“åº”]
    C --&gt; N{å“åº”å¯ç¼“å­˜}
    N --&gt;|å¯ç¼“å­˜| O[å­˜å‚¨åˆ°ç¼“å­˜]
    N --&gt;|ä¸å¯ç¼“å­˜| M
    O --&gt; M
</code></pre>
<h5 data-id="heading-58">5.3.4 ç£ç›˜ç¼“å­˜è®¾è®¡</h5>
<p>DiskLruCacheæ˜¯OkHttpç¼“å­˜çš„æ ¸å¿ƒå­˜å‚¨å¼•æ“ï¼Œé‡‡ç”¨LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "DiskLruCacheæ¶æ„"
        A[DiskLruCache] --&gt; B[Journalæ–‡ä»¶]
        A --&gt; C[Entryæ˜ å°„]
        A --&gt; D[Executorçº¿ç¨‹æ± ]
        
        B --&gt; E[æ“ä½œæ—¥å¿—]
        E --&gt; F[CLEANè®°å½•]
        E --&gt; G[DIRTYè®°å½•]
        E --&gt; H[REMOVEè®°å½•]
        E --&gt; I[READè®°å½•]
        
        C --&gt; J[Entryå¯¹è±¡]
        J --&gt; K[æ–‡ä»¶ç´¢å¼•]
        J --&gt; L[é•¿åº¦ä¿¡æ¯]
        J --&gt; M[è®¿é—®æ—¶é—´]
        
        subgraph "æ–‡ä»¶å­˜å‚¨"
            N[ç¼“å­˜ç›®å½•]
            N --&gt; O[journalæ–‡ä»¶]
            N --&gt; P[journal.tmp]
            N --&gt; Q[journal.bkp]
            N --&gt; R[entry.0æ–‡ä»¶]
            N --&gt; S[entry.1æ–‡ä»¶]
        end
    end
</code></pre>
<h5 data-id="heading-59">5.3.5 ç¼“å­˜æ‹¦æˆªå™¨æ€æƒ³</h5>
<p>CacheInterceptoræ ¸å¿ƒæµç¨‹</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant I as CacheInterceptor
    participant C as Cache
    participant D as DiskLruCache
    participant F as FileSystem
    
    I-&gt;&gt;C: put(response)
    C-&gt;&gt;C: è®¡ç®—ç¼“å­˜é”®
    C-&gt;&gt;D: edit(key)
    D-&gt;&gt;D: åˆ›å»ºEditor
    D-&gt;&gt;F: åˆ›å»ºä¸´æ—¶æ–‡ä»¶
    F--&gt;&gt;D: æ–‡ä»¶å¥æŸ„
    D--&gt;&gt;C: Editorå¯¹è±¡
    C-&gt;&gt;C: åˆ›å»ºCacheRequest
    C--&gt;&gt;I: CacheRequest
    
    Note over I: å†™å…¥å“åº”æ•°æ®
    I-&gt;&gt;I: cacheWritingResponse()
    I-&gt;&gt;I: åŒ…è£…ResponseBody
    
    Note over I: æ•°æ®æµå†™å…¥
    loop è¯»å–ç½‘ç»œå“åº”
        I-&gt;&gt;I: è¯»å–æ•°æ®å—
        I-&gt;&gt;C: å†™å…¥ç¼“å­˜
        I-&gt;&gt;I: å†™å…¥å®¢æˆ·ç«¯
    end
    
    I-&gt;&gt;C: å®Œæˆå†™å…¥
    C-&gt;&gt;D: editor.commit()
    D-&gt;&gt;F: é‡å‘½åä¸´æ—¶æ–‡ä»¶
    D-&gt;&gt;D: æ›´æ–°Journal
    D--&gt;&gt;C: æˆåŠŸ
    C--&gt;&gt;I: å®Œæˆ
</code></pre>
<h4 data-id="heading-60">5.4 å®‰å…¨ç‰¹æ€§è®¾è®¡</h4>
<p>åœ¨å®‰å…¨æ€§æ–¹é¢é‡‡ç”¨äº†å¤šå±‚é˜²æŠ¤ç­–ç•¥ï¼Œæ¶µç›–ä¼ è¾“å±‚å®‰å…¨(TLS)ã€è¯ä¹¦éªŒè¯ã€ä¸»æœºåæ ¡éªŒã€æ•°æ®å®Œæ•´æ€§ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ã€‚</p>
<ul>
<li><strong>TLSæ”¯æŒ</strong>ï¼šæ”¯æŒTLS 1.2å’Œ1.3</li>
<li><strong>è¯ä¹¦é”å®š</strong>ï¼šCertificate Pinningé˜²æ­¢ä¸­é—´äººæ”»å‡»</li>
<li><strong>ä¸»æœºåéªŒè¯</strong>ï¼šä¸¥æ ¼çš„ä¸»æœºåéªŒè¯</li>
<li><strong>åè®®é™çº§ä¿æŠ¤</strong>ï¼šé˜²æ­¢åè®®é™çº§æ”»å‡»</li>
</ul>
<h5 data-id="heading-61">5.4.1 å®‰å…¨ç»„ä»¶æ¶æ„å›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[OkHttpClient] --&gt; B[SSL/TLSé…ç½®]
    A --&gt; C[è¯ä¹¦éªŒè¯]
    A --&gt; D[ä¸»æœºåæ ¡éªŒ]
    A --&gt; E[è¿æ¥å®‰å…¨]
    
    B --&gt; F[SSLSocketFactory]
    B --&gt; G[X509TrustManager]
    B --&gt; H[ConnectionSpec]
    B --&gt; I[TlsVersion]
    B --&gt; J[CipherSuite]
    
    C --&gt; K[CertificatePinner]
    C --&gt; L[CertificateChainCleaner]
    C --&gt; M[TrustRootIndex]
    
    D --&gt; N[OkHostnameVerifier]
    D --&gt; O[HostnameVerifier]
    
    E --&gt; P[RealConnection]
    E --&gt; Q[Handshake]
    E --&gt; R[Protocolåå•†]
    
    F --&gt; S[å¹³å°SSLå®ç°]
    G --&gt; T[è¯ä¹¦ä¿¡ä»»é“¾]
    K --&gt; U[è¯ä¹¦å›ºå®š]
    L --&gt; V[è¯ä¹¦é“¾æ¸…ç†]
    N --&gt; W[ä¸»æœºååŒ¹é…]
    P --&gt; X[TLSæ¡æ‰‹]
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fce4ec
</code></pre>
<h5 data-id="heading-62">5.4.2 å®‰å…¨æ•°æ®æµå›¾</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ç¨‹åº
    participant Client as OkHttpClient
    participant Conn as RealConnection
    participant SSL as SSLSocket
    participant Server as æœåŠ¡å™¨
    
    App-&gt;&gt;Client: åˆ›å»ºHTTPSè¯·æ±‚
    Client-&gt;&gt;Conn: å»ºç«‹è¿æ¥
    Conn-&gt;&gt;SSL: åˆ›å»ºSSLè¿æ¥
    
    Note over SSL,Server: TLSæ¡æ‰‹è¿‡ç¨‹
    SSL-&gt;&gt;Server: ClientHello
    Server-&gt;&gt;SSL: ServerHello + Certificate
    
    SSL-&gt;&gt;SSL: è¯ä¹¦é“¾éªŒè¯
    SSL-&gt;&gt;SSL: ä¸»æœºåéªŒè¯
    SSL-&gt;&gt;SSL: è¯ä¹¦å›ºå®šæ£€æŸ¥
    
    alt éªŒè¯æˆåŠŸ
        SSL-&gt;&gt;Server: ClientKeyExchange
        Server-&gt;&gt;SSL: Finished
        SSL-&gt;&gt;Conn: å®‰å…¨è¿æ¥å»ºç«‹
        Conn-&gt;&gt;Client: è¿æ¥å°±ç»ª
        Client-&gt;&gt;App: å¯ä»¥å‘é€è¯·æ±‚
    else éªŒè¯å¤±è´¥
        SSL-&gt;&gt;Conn: éªŒè¯å¤±è´¥
        Conn-&gt;&gt;Client: è¿æ¥å¼‚å¸¸
        Client-&gt;&gt;App: æŠ›å‡ºå®‰å…¨å¼‚å¸¸
    end
</code></pre>
<h5 data-id="heading-63">5.4.3 è¯ä¹¦éªŒè¯æœºåˆ¶</h5>
<p>OkHttpä½¿ç”¨CertificateChainCleaneræ¥æ¸…ç†å’ŒéªŒè¯è¯ä¹¦é“¾ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CertificateChainCleaner</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;Certificate&gt; <span class="hljs-title function_">clean</span><span class="hljs-params">(List&lt;Certificate&gt; chain, String hostname)</span>
      <span class="hljs-keyword">throws</span> SSLPeerUnverifiedException;

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CertificateChainCleaner <span class="hljs-title function_">get</span><span class="hljs-params">(X509TrustManager trustManager)</span> {
    <span class="hljs-keyword">return</span> Platform.get().buildCertificateChainCleaner(trustManager);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CertificateChainCleaner <span class="hljs-title function_">get</span><span class="hljs-params">(X509TrustManager trustManager, TrustRootIndex trustRootIndex)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicCertificateChainCleaner</span>(trustRootIndex);
  }
}
</code></pre>
<p>è¯ä¹¦é“¾éªŒè¯æµç¨‹</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as OkHttpClient
    participant Cleaner as CertificateChainCleaner
    participant Trust as TrustManager
    participant Root as TrustRootIndex
    
    Client-&gt;&gt;Cleaner: clean(certificateChain, hostname)
    Cleaner-&gt;&gt;Cleaner: æ„å»ºå®Œæ•´è¯ä¹¦é“¾
    
    loop å¯¹æ¯ä¸ªè¯ä¹¦
        Cleaner-&gt;&gt;Root: findByIssuerAndSignature(cert)
        Root--&gt;&gt;Cleaner: è¿”å›åŒ¹é…çš„æ ¹è¯ä¹¦
    end
    
    Cleaner-&gt;&gt;Trust: checkServerTrusted(chain, authType)
    
    alt éªŒè¯æˆåŠŸ
        Trust--&gt;&gt;Cleaner: éªŒè¯é€šè¿‡
        Cleaner--&gt;&gt;Client: è¿”å›æ¸…ç†åçš„è¯ä¹¦é“¾
    else éªŒè¯å¤±è´¥
        Trust--&gt;&gt;Cleaner: æŠ›å‡ºå¼‚å¸¸
        Cleaner--&gt;&gt;Client: è¯ä¹¦éªŒè¯å¤±è´¥
    end
</code></pre>
<h5 data-id="heading-64">5.4.4 ä¸»æœºåéªŒè¯</h5>
<p>OkHostnameVerifierå®ç°ï¼ŒOkHttpå®ç°äº†ç¬¦åˆRFC 2818æ ‡å‡†çš„ä¸»æœºåéªŒè¯å™¨</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹ä¸»æœºåéªŒè¯] --&gt; B{è¾“å…¥æ˜¯IPåœ°å€?}
    B --&gt;|æ˜¯| C[IPåœ°å€éªŒè¯]
    B --&gt;|å¦| D[åŸŸåéªŒè¯]
    
    C --&gt; E[è·å–è¯ä¹¦SANä¸­çš„IPåœ°å€]
    E --&gt; F{IPåœ°å€åŒ¹é…?}
    F --&gt;|æ˜¯| G[éªŒè¯æˆåŠŸ]
    F --&gt;|å¦| H[éªŒè¯å¤±è´¥]
    
    D --&gt; I[è·å–è¯ä¹¦SANä¸­çš„DNSåç§°]
    I --&gt; J[éå†æ¯ä¸ªDNSåç§°]
    J --&gt; K{æ˜¯é€šé…ç¬¦æ¨¡å¼?}
    
    K --&gt;|å¦| L[ç²¾ç¡®åŒ¹é…]
    K --&gt;|æ˜¯| M[é€šé…ç¬¦éªŒè¯]
    
    L --&gt; N{å®Œå…¨åŒ¹é…?}
    N --&gt;|æ˜¯| G
    N --&gt;|å¦| O{è¿˜æœ‰æ›´å¤šDNSåç§°?}
    
    M --&gt; P[æ£€æŸ¥é€šé…ç¬¦è§„åˆ™]
    P --&gt; Q{é€šé…ç¬¦åŒ¹é…?}
    Q --&gt;|æ˜¯| G
    Q --&gt;|å¦| O
    
    O --&gt;|æ˜¯| J
    O --&gt;|å¦| H
    
    style G fill:#c8e6c9
    style H fill:#ffcdd2
</code></pre>
<h5 data-id="heading-65">5.4.5 ä¸­é—´äººæ”»å‡»é˜²æŠ¤</h5>
<p>OkHttpé€šè¿‡å¤šå±‚é˜²æŠ¤æœºåˆ¶é˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ä¸­é—´äººæ”»å‡»é˜²æŠ¤] --&gt; B[è¯ä¹¦éªŒè¯]
    A --&gt; C[è¯ä¹¦å›ºå®š]
    A --&gt; D[ä¸»æœºåéªŒè¯]
    A --&gt; E[HSTSæ”¯æŒ]
    A --&gt; F[è¯ä¹¦é€æ˜åº¦]
    
    B --&gt; G[è¯ä¹¦é“¾å®Œæ•´æ€§æ£€æŸ¥]
    B --&gt; H[è¯ä¹¦æœ‰æ•ˆæœŸéªŒè¯]
    B --&gt; I[è¯ä¹¦æ’¤é”€æ£€æŸ¥]
    
    C --&gt; J[å…¬é’¥å›ºå®š]
    C --&gt; K[è¯ä¹¦æŒ‡çº¹å›ºå®š]
    C --&gt; L[CAå›ºå®š]
    
    D --&gt; M[SANéªŒè¯]
    D --&gt; N[é€šé…ç¬¦è§„åˆ™æ£€æŸ¥]
    D --&gt; O[IPåœ°å€éªŒè¯]
    
    E --&gt; P[å¼ºåˆ¶HTTPSé‡å®šå‘]
    E --&gt; Q[HSTSé¢„åŠ è½½]
    
    F --&gt; R[SCTéªŒè¯]
    F --&gt; S[CTæ—¥å¿—æ£€æŸ¥]
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fce4ec
    style F fill:#e0f2f1
</code></pre>
<h4 data-id="heading-66">5.5 SSL/TLSæµç¨‹</h4>
<p>SSLé…ç½®å±‚æ¬¡å›¾</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[SSL/TLSé…ç½®] --&gt; B[SocketFactory]
    A --&gt; C[SSLSocketFactory]
    A --&gt; D[X509TrustManager]
    A --&gt; E[HostnameVerifier]
    A --&gt; F[CertificatePinner]
    A --&gt; G[ConnectionSpec]
    
    B --&gt; H[æ™®é€šSocketåˆ›å»º]
    C --&gt; I[SSL Socketåˆ›å»º]
    D --&gt; J[è¯ä¹¦ä¿¡ä»»éªŒè¯]
    E --&gt; K[ä¸»æœºåéªŒè¯]
    F --&gt; L[è¯ä¹¦å›ºå®šéªŒè¯]
    G --&gt; M[è¿æ¥è§„èŒƒé…ç½®]
    
    I --&gt; N[TLSæ¡æ‰‹]
    J --&gt; N
    K --&gt; N
    L --&gt; N
    M --&gt; N
    
    N --&gt; O[å®‰å…¨è¿æ¥å»ºç«‹]
    
    style A fill:#e3f2fd
    style N fill:#f3e5f5
    style O fill:#c8e6c9
</code></pre>
<h5 data-id="heading-67">5.5.1 TLSç‰ˆæœ¬æ”¯æŒ</h5>
<p>OkHttpæ”¯æŒå¤šä¸ªTLSç‰ˆæœ¬ï¼Œå¹¶æä¾›äº†çµæ´»çš„é…ç½®æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">TlsVersion</span> {
  TLS_1_3(<span class="hljs-string">"TLSv1.3"</span>), <span class="hljs-comment">// jdk11+, android10+</span>
  TLS_1_2(<span class="hljs-string">"TLSv1.2"</span>), <span class="hljs-comment">// jdk7+, android16+</span>
  TLS_1_1(<span class="hljs-string">"TLSv1.1"</span>), <span class="hljs-comment">// jdk7+, android16+</span>
  TLS_1_0(<span class="hljs-string">"TLSv1.0"</span>), <span class="hljs-comment">// jdk7+, android16+</span>
  SSL_3_0(<span class="hljs-string">"SSLv3"</span>);   <span class="hljs-comment">// jdk6+, android9+</span>

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> TlsVersion[] DEFAULT = {
    TLS_1_3, TLS_1_2, TLS_1_1, TLS_1_0
  };
}
</code></pre>
<h5 data-id="heading-68">5.5.2 TLSç‰ˆæœ¬ç­–ç•¥</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹TLSåå•†] --&gt; B{æœåŠ¡å™¨æ”¯æŒTLS 1.3?}
    B --&gt;|æ˜¯| C[ä½¿ç”¨TLS 1.3]
    B --&gt;|å¦| D{æœåŠ¡å™¨æ”¯æŒTLS 1.2?}
    D --&gt;|æ˜¯| E[ä½¿ç”¨TLS 1.2]
    D --&gt;|å¦| F{æœåŠ¡å™¨æ”¯æŒTLS 1.1?}
    F --&gt;|æ˜¯| G[ä½¿ç”¨TLS 1.1]
    F --&gt;|å¦| H{æœåŠ¡å™¨æ”¯æŒTLS 1.0?}
    H --&gt;|æ˜¯| I[ä½¿ç”¨TLS 1.0]
    H --&gt;|å¦| J[è¿æ¥å¤±è´¥]
    
    C --&gt; K[å»ºç«‹å®‰å…¨è¿æ¥]
    E --&gt; K
    G --&gt; K
    I --&gt; K
    
    style C fill:#c8e6c9
    style E fill:#dcedc8
    style G fill:#f0f4c3
    style I fill:#fff9c4
    style J fill:#ffcdd2
</code></pre>
<h5 data-id="heading-69">5.5.3 TLSæ¡æ‰‹è¿‡ç¨‹</h5>
<p>RealConnectionè´Ÿè´£å»ºç«‹å®‰å…¨çš„TLSè¿æ¥ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as OkHttpClient
    participant Conn as RealConnection
    participant SSL as SSLSocket
    participant Server as æœåŠ¡å™¨
    participant Verifier as HostnameVerifier
    participant Pinner as CertificatePinner
    
    Client-&gt;&gt;Conn: connectTls()
    Conn-&gt;&gt;SSL: createSocket()
    Conn-&gt;&gt;SSL: é…ç½®è¿æ¥è§„èŒƒ
    Conn-&gt;&gt;SSL: startHandshake()
    
    Note over SSL,Server: TLSæ¡æ‰‹åå•†
    SSL-&gt;&gt;Server: ClientHello
    Server-&gt;&gt;SSL: ServerHello + Certificate + ServerHelloDone
    SSL-&gt;&gt;Server: ClientKeyExchange + ChangeCipherSpec + Finished
    Server-&gt;&gt;SSL: ChangeCipherSpec + Finished
    
    SSL-&gt;&gt;Conn: æ¡æ‰‹å®Œæˆ
    Conn-&gt;&gt;Conn: è·å–æ¡æ‰‹ä¿¡æ¯
    
    Conn-&gt;&gt;Verifier: verify(hostname, session)
    alt ä¸»æœºåéªŒè¯æˆåŠŸ
        Verifier--&gt;&gt;Conn: true
        Conn-&gt;&gt;Pinner: check(hostname, certificates)
        alt è¯ä¹¦å›ºå®šéªŒè¯æˆåŠŸ
            Pinner--&gt;&gt;Conn: éªŒè¯é€šè¿‡
            Conn-&gt;&gt;Conn: é€‰æ‹©åº”ç”¨å±‚åè®®
            Conn--&gt;&gt;Client: å®‰å…¨è¿æ¥å»ºç«‹æˆåŠŸ
        else è¯ä¹¦å›ºå®šéªŒè¯å¤±è´¥
            Pinner--&gt;&gt;Conn: SSLPeerUnverifiedException
            Conn--&gt;&gt;Client: è¿æ¥å¤±è´¥
        end
    else ä¸»æœºåéªŒè¯å¤±è´¥
        Verifier--&gt;&gt;Conn: false
        Conn--&gt;&gt;Client: SSLPeerUnverifiedException
    end
</code></pre>
<h3 data-id="heading-70">06.æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-71">6.1 è¿æ¥å¤ç”¨</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è¯·æ±‚1] --&gt; B[è¿æ¥æ± ]
    C[è¯·æ±‚2] --&gt; B
    D[è¯·æ±‚3] --&gt; B
    B --&gt; E[å¤ç”¨è¿æ¥1]
    B --&gt; F[å¤ç”¨è¿æ¥2]
    E --&gt; G[æœåŠ¡å™¨]
    F --&gt; G
</code></pre>
<h5 data-id="heading-72">6.1.1 è¿æ¥å¤ç”¨æ¶æ„</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "OkHttpè¿æ¥å¤ç”¨æ¶æ„"
        A[OkHttpClient] --&gt; B[ConnectionPool]
        B --&gt; C[RealConnectionPool]
        C --&gt; D[RealConnection]
        
        E[Request] --&gt; F[RealCall]
        F --&gt; G[ExchangeFinder]
        G --&gt; H[RouteSelector]
        
        G --&gt; I[Exchange]
        I --&gt; D
        
        subgraph "è¿æ¥ç®¡ç†"
            C --&gt; J[è¿æ¥æ¸…ç†ä»»åŠ¡]
            C --&gt; K[è¿æ¥å¤ç”¨é€»è¾‘]
            C --&gt; L[è¿æ¥æ± ç»Ÿè®¡]
        end
        
        subgraph "è·¯ç”±é€‰æ‹©"
            H --&gt; M[Route]
            H --&gt; N[Proxy]
            H --&gt; O[InetSocketAddress]
        end
        
        subgraph "åè®®æ”¯æŒ"
            D --&gt; P[HTTP/1.1]
            D --&gt; Q[HTTP/2]
            D --&gt; R[HTTPS/TLS]
        end
    end
</code></pre>
<h4 data-id="heading-73">6.2 è¯·æ±‚åˆå¹¶</h4>
<p>å¯¹äºç›¸åŒçš„è¯·æ±‚ï¼ŒOkHttpä¼šè‡ªåŠ¨åˆå¹¶ï¼Œé¿å…é‡å¤è¯·æ±‚ã€‚</p>
<h4 data-id="heading-74">6.3 å‹ç¼©ä¼ è¾“</h4>
<ul>
<li>è‡ªåŠ¨GZIPå‹ç¼©å“åº”ä½“</li>
<li>æ”¯æŒBrotliå‹ç¼©ç®—æ³•</li>
<li>é€æ˜çš„å‹ç¼©/è§£å‹ç¼©å¤„ç†</li>
</ul>
<h4 data-id="heading-75">6.4 å†…å­˜ç®¡ç†</h4>
<ul>
<li>ä½¿ç”¨Okioè¿›è¡Œé«˜æ•ˆçš„IOæ“ä½œ</li>
<li>æ™ºèƒ½çš„ç¼“å†²åŒºç®¡ç†</li>
<li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº</li>
</ul>
<h5 data-id="heading-76">6.4.1 å†…å­˜ç®¡ç†æ¶æ„</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "OkHttpå†…å­˜ç®¡ç†æ¶æ„"
        A[å†…å­˜ç®¡ç†] --&gt; B[å¯¹è±¡æ± åŒ–]
        A --&gt; C[ç¼“å†²åŒºç®¡ç†]
        A --&gt; D[æµå¤ç”¨]
        
        B --&gt; E[è¿æ¥æ± å¤ç”¨]
        B --&gt; F[è¯·æ±‚å¯¹è±¡å¤ç”¨]
        B --&gt; G[å“åº”å¯¹è±¡å¤ç”¨]
        
        C --&gt; H[Okio Buffer]
        C --&gt; I[Segmentæ± ]
        C --&gt; J[ByteStringç¼“å­˜]
        
        D --&gt; K[InputStreamå¤ç”¨]
        D --&gt; L[OutputStreamå¤ç”¨]
        D --&gt; M[Socketæµå¤ç”¨]
        
        subgraph "åƒåœ¾å›æ”¶ä¼˜åŒ–"
            N[å¼±å¼•ç”¨ä½¿ç”¨]
            O[åŠæ—¶èµ„æºé‡Šæ”¾]
            P[å¾ªç¯å¼•ç”¨é¿å…]
        end
        
        subgraph "å†…å­˜ç›‘æ§"
            Q[å†…å­˜ä½¿ç”¨ç»Ÿè®¡]
            R[æ³„æ¼æ£€æµ‹]
            S[æ€§èƒ½æŒ‡æ ‡]
        end
    end
</code></pre>
<h5 data-id="heading-77">6.4.2 IOæ“ä½œæ¶æ„</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "OkHttp IOæ¶æ„"
        A[åº”ç”¨å±‚] --&gt; B[OkHttp API]
        B --&gt; C[Interceptor Chain]
        C --&gt; D[Network Layer]
        
        D --&gt; E[Okio]
        E --&gt; F[BufferedSource]
        E --&gt; G[BufferedSink]
        
        F --&gt; H[Source]
        G --&gt; I[Sink]
        
        H --&gt; J[Socket InputStream]
        I --&gt; K[Socket OutputStream]
        
        subgraph "ç¼“å†²ä¼˜åŒ–"
            L[Segment Buffer]
            M[é›¶æ‹·è´æ“ä½œ]
            N[æ‰¹é‡è¯»å†™]
        end
        
        subgraph "å‹ç¼©ä¼˜åŒ–"
            O[GZipå‹ç¼©]
            P[Deflateå‹ç¼©]
            Q[Brotliå‹ç¼©]
        end
        
        F --&gt; L
        G --&gt; L
        C --&gt; O
        C --&gt; P
    end
</code></pre>
<h3 data-id="heading-78">07.ä½¿ç”¨ç¤ºä¾‹è¯´æ˜</h3>
<h4 data-id="heading-79">7.1 åŸºæœ¬ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºå®¢æˆ·ç«¯</span>
<span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>.Builder()
    .connectTimeout(<span class="hljs-number">10</span>, TimeUnit.SECONDS)
    .readTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)
    .writeTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)
    .build();

<span class="hljs-comment">// æ„å»ºè¯·æ±‚</span>
<span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
    .url(<span class="hljs-string">"https://api.example.com/data"</span>)
    .header(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer token"</span>)
    .build();

<span class="hljs-comment">// åŒæ­¥æ‰§è¡Œ</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute()) {
    <span class="hljs-keyword">if</span> (response.isSuccessful()) {
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> response.body().string();
        <span class="hljs-comment">// å¤„ç†å“åº”æ•°æ®</span>
    }
}

<span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œ</span>
client.newCall(request).enqueue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(Call call, IOException e)</span> {
        <span class="hljs-comment">// å¤„ç†å¤±è´¥</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(Call call, Response response)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">if</span> (response.isSuccessful()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> response.body().string();
            <span class="hljs-comment">// å¤„ç†å“åº”æ•°æ®</span>
        }
    }
});
</code></pre>
<h4 data-id="heading-80">7.2 é«˜çº§é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>.Builder()
    <span class="hljs-comment">// è¿æ¥æ± é…ç½®</span>
    .connectionPool(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionPool</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>, TimeUnit.MINUTES))
    <span class="hljs-comment">// ç¼“å­˜é…ç½®</span>
    .cache(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(cacheDir, <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>)) <span class="hljs-comment">// 50MBç¼“å­˜</span>
    <span class="hljs-comment">// æ‹¦æˆªå™¨</span>
    .addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingInterceptor</span>())
    .addNetworkInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkInterceptor</span>())
    <span class="hljs-comment">// é‡è¯•é…ç½®</span>
    .retryOnConnectionFailure(<span class="hljs-literal">true</span>)
    <span class="hljs-comment">// ä»£ç†é…ç½®</span>
    .proxy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(Proxy.Type.HTTP, <span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">"proxy.example.com"</span>, <span class="hljs-number">8080</span>)))
    <span class="hljs-comment">// SSLé…ç½®</span>
    .sslSocketFactory(sslSocketFactory, trustManager)
    .hostnameVerifier(hostnameVerifier)
    .build();
</code></pre>
<h4 data-id="heading-81">7.3 ç»Ÿè®¡è¯·æ±‚è€—æ—¶</h4>
<p>OkHttpå¦‚ä½•è¿›è¡Œå„ä¸ªè¯·æ±‚ç¯èŠ‚çš„è€—æ—¶ç»Ÿè®¡å‘¢ï¼Ÿ</p>
<ul>
<li>OkHttp ç‰ˆæœ¬æä¾›äº†EventListeneræ¥å£ï¼Œå¯ä»¥è®©è°ƒç”¨è€…æ¥æ”¶ä¸€ç³»åˆ—ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­çš„äº‹ä»¶ï¼Œä¾‹å¦‚DNSè§£æã€TSL/SSLè¿æ¥ã€Responseæ¥æ”¶ç­‰ã€‚</li>
<li>é€šè¿‡ç»§æ‰¿æ­¤æ¥å£ï¼Œè°ƒç”¨è€…å¯ä»¥ç›‘è§†æ•´ä¸ªåº”ç”¨ä¸­ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€æµé‡å¤§å°ã€è€—æ—¶(æ¯”å¦‚dnsè§£ææ—¶é—´ï¼Œè¯·æ±‚æ—¶é—´ï¼Œå“åº”æ—¶é—´ç­‰ç­‰)æƒ…å†µã€‚</li>
</ul>
<p>å¦‚ä½•æ¶ˆè€—è®°å½•æ—¶é—´</p>
<ul>
<li>åœ¨OkHttpåº“ä¸­æœ‰ä¸€ä¸ªEventListenerç±»ã€‚è¯¥ç±»æ˜¯ç½‘ç»œäº‹ä»¶çš„ä¾¦å¬å™¨ã€‚æ‰©å±•è¿™ä¸ªç±»ä»¥ç›‘è§†åº”ç”¨ç¨‹åºçš„HTTPè°ƒç”¨çš„æ•°é‡ã€å¤§å°å’ŒæŒç»­æ—¶é—´ã€‚</li>
<li>æ‰€æœ‰å¯åŠ¨/è¿æ¥/è·å–äº‹ä»¶æœ€ç»ˆå°†æ¥æ”¶åˆ°åŒ¹é…çš„ç»“æŸ/é‡Šæ”¾äº‹ä»¶ï¼Œè¦ä¹ˆæˆåŠŸ(éç©ºå‚æ•°)ï¼Œè¦ä¹ˆå¤±è´¥(éç©ºå¯æŠ›å‡º)ã€‚</li>
<li>æ¯”å¦‚ï¼Œå¯ä»¥åœ¨å¼€å§‹é“¾æ¥è®°å½•æ—¶é—´ï¼›dnså¼€å§‹ï¼Œç»“æŸç­‰æ–¹æ³•è§£æè®°å½•æ—¶é—´ï¼Œå¯ä»¥è®¡ç®—dnsçš„è§£ææ—¶é—´ã€‚</li>
<li>æ¯”å¦‚ï¼Œå¯ä»¥åœ¨å¼€å§‹è¯·æ±‚è®°å½•æ—¶é—´ï¼Œè®°å½•connectStartï¼ŒconnectEndç­‰æ–¹æ³•æ—¶é—´ï¼Œåˆ™å¯ä»¥è®¡ç®—å‡ºconnectè¿æ¥æ—¶é—´ã€‚</li>
</ul>
<p>OkHttpæ€§èƒ½ç›‘æ§æ¶æ„</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "OkHttpæ€§èƒ½ç›‘æ§æ¶æ„"
        A[EventListener] --&gt; B[è¿æ¥äº‹ä»¶]
        A --&gt; C[DNSäº‹ä»¶]
        A --&gt; D[è¯·æ±‚äº‹ä»¶]
        A --&gt; E[å“åº”äº‹ä»¶]
        
        B --&gt; F[è¿æ¥å¼€å§‹]
        B --&gt; G[è¿æ¥ç»“æŸ]
        B --&gt; H[è¿æ¥è·å–]
        B --&gt; I[è¿æ¥é‡Šæ”¾]
        
        C --&gt; J[DNSå¼€å§‹]
        C --&gt; K[DNSç»“æŸ]
        
        D --&gt; L[è¯·æ±‚å¼€å§‹]
        D --&gt; M[è¯·æ±‚å¤´å‘é€]
        D --&gt; N[è¯·æ±‚ä½“å‘é€]
        
        E --&gt; O[å“åº”å¤´æ¥æ”¶]
        E --&gt; P[å“åº”ä½“æ¥æ”¶]
        E --&gt; Q[å“åº”ç»“æŸ]
        
        subgraph "æŒ‡æ ‡æ”¶é›†"
            R[è¿æ¥æ± ç»Ÿè®¡]
            S[è¯·æ±‚å»¶è¿Ÿ]
            T[ååé‡ç»Ÿè®¡]
            U[é”™è¯¯ç‡ç»Ÿè®¡]
        end
        
        subgraph "æ€§èƒ½åˆ†æ"
            V[çƒ­ç‚¹åˆ†æ]
            W[ç“¶é¢ˆè¯†åˆ«]
            X[ä¼˜åŒ–å»ºè®®]
        end
    end
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenCVSharpï¼šArUco æ ‡è®°æ£€æµ‹ä¸é€è§†å˜æ¢]]></title>    <link>https://juejin.cn/post/7572002432451133449</link>    <guid>https://juejin.cn/post/7572002432451133449</guid>    <pubDate>2025-11-13T11:56:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572002432451133449" data-draft-id="7572016447804997658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenCVSharpï¼šArUco æ ‡è®°æ£€æµ‹ä¸é€è§†å˜æ¢"/> <meta itemprop="keywords" content="OpenCV"/> <meta itemprop="datePublished" content="2025-11-13T11:56:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mingupup"/> <meta itemprop="url" content="https://juejin.cn/user/2298414003918396"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenCVSharpï¼šArUco æ ‡è®°æ£€æµ‹ä¸é€è§†å˜æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2298414003918396/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mingupup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:56:06.000Z" title="Thu Nov 13 2025 11:56:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¯¹äº.NETå¼€å‘è€…è€Œè¨€ï¼Œå…¥é—¨OpenCVçš„ä¸€ä¸ªå¾ˆèˆ’é€‚çš„æ–¹å¼å°±æ˜¯å…ˆå»ä½¿ç”¨OpenCVSharpï¼Œå®ƒæ˜¯ OpenCV çš„ .NET å°è£…ï¼Œè€Œä¸”ä½œè€…è¿˜å¼€æºäº†ä¸€ä¸ªç¤ºä¾‹åº“ï¼Œå¯ä»¥é€šè¿‡ç¤ºä¾‹åº“è¿›è¡Œå…¥é—¨å­¦ä¹ ã€‚</p>
<p>OpenCVSharpä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshimat%2Fopencvsharp" target="_blank" title="https://github.com/shimat/opencvsharp" ref="nofollow noopener noreferrer">github.com/shimat/openâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/764d56beb7e0422e960e33f83ca92311~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=yGHYOVqAGHx%2B%2BGI90pQtvt7rV0I%3D" alt="" loading="lazy"/></p>
<p>opencvsharp_samplesä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshimat%2Fopencvsharp_samples" target="_blank" title="https://github.com/shimat/opencvsharp_samples" ref="nofollow noopener noreferrer">github.com/shimat/openâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a422e53880d49f2813f4cd1916f03ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=5meWdCHK8OxTDnEkwvmP%2FgrGmN4%3D" alt="" loading="lazy"/></p>
<p>ä½œè€…æä¾›äº†å‡ åä¸ªå¯ä»¥ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ä»£ç ï¼Œä¸€å¼€å§‹å¯ä»¥å…ˆå¤§æ¦‚è¿è¡Œä¸€ä¸‹è¿™äº›ç¤ºä¾‹ï¼Œçœ‹ä¸€ä¸‹ç”¨è¿™ä¸ªåº“å¯ä»¥å®ç°å“ªäº›åŠŸèƒ½ã€‚</p>
<p>å…¥é—¨ç¬¬ä¸€æ­¥å°±æ˜¯å…ˆå­¦ä¼šç”¨ï¼Œé‚£äº›è§†è§‰ç®—æ³•çš„åŸç†å¯ä»¥å…ˆä¸æ‡‚ï¼Œå¤§æ¦‚äº†è§£ä¸€ä¸‹å°±å¤Ÿäº†ï¼Œç­‰åé¢çœŸçš„éœ€è¦ä½ æ·±å…¥äº†è§£çš„æ—¶å€™å†å»äº†è§£ä¹Ÿä¸è¿Ÿï¼Œç°åœ¨æ·±å…¥ç†è§£åŸç†å®¹æ˜“è®©å°ç™½æ”¾å¼ƒï¼Œåˆšå¼€å§‹å…¥é—¨æˆ‘ä»¬å°±å½“ä¸€åè¸è¸å®å®çš„â€œæ‰åŒ…ä¾ â€ã€‚</p>
<h2 data-id="heading-1">Aruco æ ‡è®°æ£€æµ‹ä¸é€è§†å˜æ¢</h2>
<p>ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯å…³äºAruco æ ‡è®°æ£€æµ‹å’Œé€è§†å˜æ¢çš„ã€‚</p>
<p>ç¬¬ä¸€æ­¥å…ˆè¿è¡Œèµ·æ¥ï¼Œçœ‹ä¸€ä¸‹å®ç°äº†ä»€ä¹ˆæ•ˆæœï¼Ÿ</p>
<p>é¦–å…ˆåŸå›¾æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb3ef77a81024fa3aa30c3393e5532d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=9lxTW1XjHwiJgvp7%2F1GRZ5dGtxQ%3D" alt="" loading="lazy"/></p>
<p>æ³¨æ„åˆ°ä¸Šé¢æœ‰4ä¸ªæœ‰ç‚¹å¥‡æ€ªçš„å››è¾¹å½¢ã€‚</p>
<p>ç„¶åè¯†åˆ«è¿™å‡ ä¸ªå››è¾¹å½¢çš„åŒºåŸŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fdd7418cf604d56873941817e9cd7d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=GIIk2LbK4mCB6nA9VCnHnRulaQA%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå†è¿›è¡Œä¸€ä¸‹é€è§†å˜æ¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90b07701104849269dc6b403928f35cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=4aB8az51kvJpcD3zdpvs5Ss80xM%3D" alt="" loading="lazy"/></p>
<p>åˆšåˆšçœ‹åˆ°çš„è¿™äº›å››è¾¹å½¢å°±æ˜¯Arucoæ ‡è®°ï¼Œå®ƒæ˜¯æ‹¿æ¥å¹²å˜›çš„å‘¢ï¼Ÿæˆ‘çš„ç®€å•ç†è§£å°±æ˜¯æ‹¿æ¥æ ‡è®°ç”¨çš„ï¼Œä¸€ä¸ªç»å…¸çš„åº”ç”¨å°±æ˜¯æ›¿æ¢ç›¸æ¡†ä¸­çš„å›¾ç‰‡ã€‚</p>
<p>OpenCVSharpå¥½åƒè¿˜æ²¡æœ‰æä¾›ç”ŸæˆArucoæ ‡è®°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å·²ç»æœ‰äº†è¯†åˆ«çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„å§ï¼ï¼</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// The locations of the markers in the image at FilePath.Image.Aruco.</span>
 <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> upperLeftMarkerId = <span class="hljs-number">160</span>;
 <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> upperRightMarkerId = <span class="hljs-number">268</span>;
 <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> lowerRightMarkerId = <span class="hljs-number">176</span>;
 <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> lowerLeftMarkerId = <span class="hljs-number">168</span>;

 <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> src = Cv2.ImRead(ImagePath);

 <span class="hljs-keyword">var</span> detectorParameters = <span class="hljs-keyword">new</span> DetectorParameters();
 detectorParameters.CornerRefinementMethod = CornerRefineMethod.Subpix;
 detectorParameters.CornerRefinementWinSize = <span class="hljs-number">9</span>;

 <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> dictionary = CvAruco.GetPredefinedDictionary(PredefinedDictionaryName.Dict4X4_1000);

 CvAruco.DetectMarkers(src, dictionary, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> corners, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> ids, detectorParameters, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> rejectedPoints);
</code></pre>
<p>æ¯ä¸ªArucoæ ‡è®°éƒ½æœ‰ä¸€ä¸ªç¡®å®šçš„IDï¼Œç„¶åæ ¹æ®è·¯å¾„è¯»å–å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> detectorParameters = <span class="hljs-keyword">new</span> DetectorParameters();
detectorParameters.CornerRefinementMethod = CornerRefineMethod.Subpix;
detectorParameters.CornerRefinementWinSize = <span class="hljs-number">9</span>;
</code></pre>
<p>è¿›è¡Œæ£€æµ‹å™¨å‚æ•°é…ç½®ï¼š</p>
<p>DetectorParameters: åˆ›å»ºArUcoæ£€æµ‹å™¨çš„å‚æ•°å¯¹è±¡ï¼Œç”¨äºæ§åˆ¶æ ‡è®°æ£€æµ‹çš„ç²¾åº¦å’Œè¡Œä¸º</p>
<p>CornerRefinementMethod.Subpix: è®¾ç½®è§’ç‚¹ç»†åŒ–æ–¹æ³•ä¸ºå­åƒç´ çº§åˆ«ï¼Œæé«˜è§’ç‚¹æ£€æµ‹ç²¾åº¦</p>
<p>CornerRefinementWinSize = 9: è®¾ç½®è§’ç‚¹ç»†åŒ–çª—å£å¤§å°ä¸º9x9åƒç´ ï¼Œç”¨äºè§’ç‚¹å‘¨å›´çš„å­åƒç´ çº§ä¼˜åŒ–</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> dictionary = CvAruco.GetPredefinedDictionary(PredefinedDictionaryName.Dict4X4_1000);
</code></pre>
<p>è¿›è¡Œå­—å…¸é…ç½®ï¼š</p>
<p>CvAruco.GetPredefinedDictionary: è·å–OpenCVé¢„å®šä¹‰çš„ArUcoæ ‡è®°å­—å…¸</p>
<p>PredefinedDictionaryName.Dict4X4_1000: é€‰æ‹©4x4ä½ç¼–ç ã€åŒ…å«1000ä¸ªä¸åŒæ ‡è®°çš„å­—å…¸ç±»å‹</p>
<pre><code class="hljs language-csharp" lang="csharp">CvAruco.DetectMarkers(src, dictionary, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> corners, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> ids, detectorParameters, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> rejectedPoints);
</code></pre>
<p>è¿™å°±åœ¨è¿›è¡ŒArUcoæ ‡è®°æ£€æµ‹äº†ï¼Œä¸»è¦çŸ¥é“ä¸€ä¸‹å‚æ•°æ˜¯ä»€ä¹ˆæ„æ€å°±è¡Œäº†ã€‚</p>
<p>src - è¾“å…¥å›¾åƒï¼ŒåŒ…å«è¦æ£€æµ‹ArUcoæ ‡è®°çš„æºå›¾åƒ</p>
<p>dictionary - æ ‡è®°å­—å…¸ï¼Œé¢„å®šä¹‰çš„ArUcoæ ‡è®°å­—å…¸ï¼ˆå‰é¢é…ç½®çš„Dict4X4_1000ï¼‰</p>
<p>corners - æ£€æµ‹åˆ°çš„æ ‡è®°è§’ç‚¹ï¼ˆè¾“å‡ºå‚æ•°ï¼‰ï¼Œæ¯ä¸ªæ ‡è®°çš„4ä¸ªè§’ç‚¹åæ ‡ï¼ŒæŒ‰é¡ºæ—¶é’ˆé¡ºåºå­˜å‚¨ï¼ˆä»å·¦ä¸Šè§’å¼€å§‹ï¼‰</p>
<p>ids - æ£€æµ‹åˆ°çš„æ ‡è®°IDï¼ˆè¾“å‡ºå‚æ•°ï¼‰ï¼Œæ¯ä¸ªæ£€æµ‹åˆ°çš„æ ‡è®°å¯¹åº”çš„IDç¼–å·</p>
<p>detectorParameters - æ£€æµ‹å‚æ•°ï¼Œå‰é¢é…ç½®çš„æ£€æµ‹å™¨å‚æ•°ï¼ˆåŒ…å«è§’ç‚¹ç»†åŒ–ç­‰è®¾ç½®ï¼‰</p>
<p>rejectedPoints - è¢«æ‹’ç»çš„å€™é€‰æ ‡è®°ï¼ˆè¾“å‡ºå‚æ•°ï¼‰ï¼Œæ£€æµ‹è¿‡ç¨‹ä¸­è¢«è¯†åˆ«ä¸ºå€™é€‰ä½†æœ€ç»ˆè¢«æ‹’ç»çš„æ ‡è®°è§’ç‚¹</p>
<p>è‡ªå·±å†ç¨å¾®æ‰“æ–­ç‚¹åŠ æ·±ä¸€ä¸‹å°è±¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f90611ba6c184b4f977a027b38ca9a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=3na4ByE%2BvaHbaFFBgAQlnKksapw%3D" alt="" loading="lazy"/></p>
<p>ç¡®å®æ˜¯ï¼Œæ¯ä¸€é¡¹éƒ½æœ‰å››ä¸ªç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fffe9d62a06c4fe2a7bb7a14214dec44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=UXa3HRvuMQUyU012PZ2%2FTJN251U%3D" alt="" loading="lazy"/></p>
<p>æ£€æµ‹å‡ºäº†ArUcoæ ‡è®°çš„IDã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c8774b6ab24fb3814b6bc550f868d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=v%2FPvZep4gQHPDtwG975UXMPEfAk%3D" alt="" loading="lazy"/></p>
<p>ç¡®å®æœ‰ä¸€ç»„è¢«æ‹’ç»çš„å€™é€‰æ ‡è®°ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> detectedMarkers = src.Clone();
CvAruco.DrawDetectedMarkers(detectedMarkers, corners, ids, Scalar.Crimson);
</code></pre>
<p>åœ¨å›¾åƒä¸Šç»˜åˆ¶åŒºåŸŸä¸IDã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">            <span class="hljs-comment">// Find the index of the four markers in the ids array. We'll use this same index into the</span>
            <span class="hljs-comment">// corners array to find the corners of each marker.</span>
            <span class="hljs-keyword">var</span> upperLeftCornerIndex = Array.FindIndex(ids, id =&gt; id == upperLeftMarkerId);
            <span class="hljs-keyword">var</span> upperRightCornerIndex = Array.FindIndex(ids, id =&gt; id == upperRightMarkerId);
            <span class="hljs-keyword">var</span> lowerRightCornerIndex = Array.FindIndex(ids, id =&gt; id == lowerRightMarkerId);
            <span class="hljs-keyword">var</span> lowerLeftCornerIndex = Array.FindIndex(ids, id =&gt; id == lowerLeftMarkerId);

            <span class="hljs-comment">// Make sure we found all four markers.</span>
            <span class="hljs-keyword">if</span> (upperLeftCornerIndex &lt; <span class="hljs-number">0</span> || upperRightCornerIndex &lt; <span class="hljs-number">0</span>
                 || lowerRightCornerIndex &lt; <span class="hljs-number">0</span> || lowerLeftCornerIndex &lt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// Marker corners are stored clockwise beginning with the upper-left corner.</span>
            <span class="hljs-comment">// Get the first (upper-left) corner of the upper-left marker.</span>
            <span class="hljs-keyword">var</span> upperLeftPixel = corners[upperLeftCornerIndex][<span class="hljs-number">0</span>];
            <span class="hljs-comment">// Get the second (upper-right) corner of the upper-right marker.</span>
            <span class="hljs-keyword">var</span> upperRightPixel = corners[upperRightCornerIndex][<span class="hljs-number">1</span>];
            <span class="hljs-comment">// Get the third (lower-right) corner of the lower-right marker.</span>
            <span class="hljs-keyword">var</span> lowerRightPixel = corners[lowerRightCornerIndex][<span class="hljs-number">2</span>];
            <span class="hljs-comment">// Get the fourth (lower-left) corner of the lower-left marker.</span>
            <span class="hljs-keyword">var</span> lowerLeftPixel = corners[lowerLeftCornerIndex][<span class="hljs-number">3</span>];

            <span class="hljs-comment">// Create coordinates for passing to GetPerspectiveTransform</span>
            <span class="hljs-keyword">var</span> sourceCoordinates = <span class="hljs-keyword">new</span> List&lt;Point2f&gt;
            {
                upperLeftPixel, upperRightPixel, lowerRightPixel, lowerLeftPixel
            };
</code></pre>
<p>å°±æ˜¯ç¡®ä¿éƒ½æ‰¾åˆ°äº†è¿™äº›IDï¼Œç„¶åç¡®å®šäº†ä¸€ä¸ªåŒºåŸŸï¼Œå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªåŒºåŸŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a4728ca1d0044b5a6b93ba49a8fb14c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639766&amp;x-signature=uNN3TxvUDTGMjxJAVpTGMyJvLRQ%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªåŒºåŸŸç”±ç¬¬ä¸€ä¸ªArUcoæ ‡è®°çš„å·¦ä¸Šè§’ç‚¹ã€ç¬¬äºŒä¸ªå³ä¸Šè§’ç‚¹ã€ç¬¬ä¸‰ä¸ªå·¦ä¸‹è§’ç‚¹ä¸ç¬¬å››ä¸ªå³ä¸‹è§’ç‚¹ç»„æˆã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> destinationCoordinates = <span class="hljs-keyword">new</span> List&lt;Point2f&gt;
{
    <span class="hljs-keyword">new</span> Point2f(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
    <span class="hljs-keyword">new</span> Point2f(<span class="hljs-number">1024</span>, <span class="hljs-number">0</span>),
    <span class="hljs-keyword">new</span> Point2f(<span class="hljs-number">1024</span>, <span class="hljs-number">1024</span>),
    <span class="hljs-keyword">new</span> Point2f(<span class="hljs-number">0</span>, <span class="hljs-number">1024</span>),
};

</code></pre>
<p>é¦–å…ˆè¿›è¡Œç›®æ ‡åæ ‡å®šä¹‰ï¼Œå®šä¹‰äº†å˜æ¢åçš„æ ‡å‡†çŸ©å½¢åŒºåŸŸï¼Œåˆ›å»ºä¸€ä¸ª1024Ã—1024åƒç´ çš„æ­£æ–¹å½¢ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> transform = Cv2.GetPerspectiveTransform(sourceCoordinates, destinationCoordinates);
</code></pre>
<p>ç„¶åè¿›è¡Œè®¡ç®—é€è§†å˜æ¢çŸ©é˜µï¼š</p>
<p>sourceCoordinates: ä»æ£€æµ‹åˆ°çš„4ä¸ªArUcoæ ‡è®°è§’ç‚¹æå–çš„æºåæ ‡</p>
<p>destinationCoordinates: ç›®æ ‡æ ‡å‡†çŸ©å½¢åæ ‡</p>
<p>è¿”å›å€¼: 3Ã—3çš„é€è§†å˜æ¢çŸ©é˜µï¼Œç”¨äºå°†æºå››è¾¹å½¢æ˜ å°„åˆ°ç›®æ ‡çŸ©å½¢</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> normalizedImage = <span class="hljs-keyword">new</span> Mat();
Cv2.WarpPerspective(src, normalizedImage, transform, <span class="hljs-keyword">new</span> Size(<span class="hljs-number">1024</span>, <span class="hljs-number">1024</span>));
</code></pre>
<p>åº”ç”¨é€è§†å˜æ¢:</p>
<p>src: åŸå§‹è¾“å…¥å›¾åƒ</p>
<p>normalizedImage: è¾“å‡ºçš„æ ‡å‡†åŒ–å›¾åƒ</p>
<p>transform: é€è§†å˜æ¢çŸ©é˜µ</p>
<p>new Size(1024, 1024): è¾“å‡ºå›¾åƒå°ºå¯¸</p>
<p>è¿™æ ·å°±å¾—åˆ°äº†æœ€åçš„é‚£å¼ å›¾ç‰‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactï¼šä½¿ç”¨Tailwind CSSã€Streamdownä¸Ant Design X]]></title>    <link>https://juejin.cn/post/7572021695294242866</link>    <guid>https://juejin.cn/post/7572021695294242866</guid>    <pubDate>2025-11-13T11:57:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572021695294242866" data-draft-id="7572016447805014042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactï¼šä½¿ç”¨Tailwind CSSã€Streamdownä¸Ant Design X"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-11-13T11:57:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mingupup"/> <meta itemprop="url" content="https://juejin.cn/user/2298414003918396"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactï¼šä½¿ç”¨Tailwind CSSã€Streamdownä¸Ant Design X
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2298414003918396/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mingupup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:57:54.000Z" title="Thu Nov 13 2025 11:57:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨Tailwind CSS</h2>
<p><span>Tailwind CSS ç®€ä»‹æ˜¯â€œç”¨äºå¿«é€Ÿç”¨æˆ·ç•Œé¢å¼€å‘çš„åŸå­åŒ– CSS æ¡†æ¶ã€‚â€</span></p>
<p>Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¼˜å…ˆçš„å®ç”¨ä¼˜å…ˆï¼ˆutility-firstï¼‰CSSæ¡†æ¶ï¼Œå®ƒé€šè¿‡æä¾›å¤§é‡åŸå­åŒ–çš„å·¥å…·ç±»ï¼ˆutility classesï¼‰ï¼Œè®©å¼€å‘è€…ç›´æ¥åœ¨HTMLä¸­æ„å»ºè‡ªå®šä¹‰è®¾è®¡ï¼Œè€Œæ— éœ€ç¼–å†™ä¼ ç»Ÿçš„CSSã€‚ä¸ä¼ ç»Ÿæ¡†æ¶å¦‚Bootstrapä¸åŒï¼ŒTailwindä¸æä¾›é¢„è®¾çš„UIç»„ä»¶ï¼Œè€Œæ˜¯ä¸“æ³¨äºåº•å±‚æ ·å¼ï¼Œå¦‚flexã€pt-4ï¼ˆpadding-top: 1remï¼‰ã€text-centerç­‰ï¼Œè¿™äº›ç±»åç›´æ¥å¯¹åº”CSSå±æ€§ï¼Œä½¿å¾—æ ·å¼å£°æ˜é«˜åº¦è¯­ä¹‰åŒ–ä¸”å¯é¢„æµ‹ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºè§£å†³äº†â€œè‡ªå®šä¹‰CSSå‘½åæ··ä¹±â€å’Œâ€œç»´æŠ¤å¤æ‚â€çš„é—®é¢˜ï¼ŒåŒæ—¶é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆå¦‚tailwind.config.jsï¼‰æ”¯æŒä¸»é¢˜å®šåˆ¶ã€å“åº”å¼è®¾è®¡ï¼ˆå¦‚md:text-lgï¼‰å’ŒçŠ¶æ€å˜ä½“ï¼ˆå¦‚hover:bg-blue-500ï¼‰ï¼Œçµæ´»é€‚é…å„ç§é¡¹ç›®éœ€æ±‚ã€‚</p>
<p>å…ˆé€šè¿‡å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Finstallation%2Fusing-vite%25E5%25B0%2586Tailwind" target="_blank" title="https://tailwindcss.com/docs/installation/using-vite%E5%B0%86Tailwind" ref="nofollow noopener noreferrer">tailwindcss.com/docs/instalâ€¦</a> CSS ä½œä¸º Vite æ’ä»¶è¿›è¡Œå®‰è£…ã€‚</p>
<p>ä¹‹å‰æ˜¯æŠŠæ ·å¼éƒ½äº¤ç»™AIå†™äº†ï¼Œä½†æ˜¯å‘ç°AIå–œæ¬¢æ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ªæ ·å¼ï¼Œè¿™æ ·å­ä¸æ–¹ä¾¿åç»­ç»´æŠ¤ï¼Œæ—¢ç„¶éƒ½äº¤ç»™AIäº†é‚£ä¹ˆè¿˜ä¸å¦‚ç›´æ¥è®©AIç”¨Tailwind CSSã€‚ç»è¿‡å®æµ‹å‘ç°AIå†™Tailwind CSSçš„æ°´å¹³è¿˜æ˜¯å¾ˆå¼ºçš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/715230bd834640dcafa8080158c6129e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=xhwGFyfnz7KxqThMd6rEFuW8SIU%3D" alt="" loading="lazy"/></p>
<p>é™æ€é¡µé¢äº¤ç»™AIå†™ç”¨Tailwind CSSç”¨çš„å·²ç»å¾ˆå¥½äº†ã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨Ant Desgin X</h2>
<p><span>@ant-design/x æ˜¯ä¸€ä¸ªä¸“æ³¨äº React ç”Ÿæ€çš„å…ˆè¿› AI ç»„ä»¶åº“ï¼Œæ—¨åœ¨ç®€åŒ–ä¸äººå·¥æ™ºèƒ½é›†æˆçš„å¼€å‘è¿‡ç¨‹ã€‚</span></p>
<p>è¯¥åº“åŒ…æ‹¬é«˜åº¦å®šåˆ¶åŒ–çš„ AI ç»„ä»¶ï¼Œå…è®¸å¼€å‘è€…è½»æ¾åœ°å°†å¯¹è¯ AI é›†æˆåˆ°ä»–ä»¬çš„åº”ç”¨ä¸­ã€‚é™¤äº†ä¸°å¯Œçš„ UI ç»„ä»¶ï¼Œ@ant-design/x è¿˜æä¾›äº†ä¸€æ½å­ API è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¼€å‘è€…é€šè¿‡ä»¤ç‰Œè®¤è¯ç›´æ¥æ¥å…¥ç°æœ‰ AI æœåŠ¡ï¼Œæ— ç¼è¡”æ¥ä¸ AI çš„å¯¹è¯å’Œäº¤äº’ã€‚æ— è®ºæ˜¯å»ºç«‹æ™ºèƒ½èŠå¤©åº”ç”¨ã€æå‡ç”¨æˆ·äº¤äº’ä½“éªŒè¿˜æ˜¯åŠ å¿« AI èƒ½åŠ›çš„é›†æˆï¼Œ@ant-design/x éƒ½æ˜¯ React å¼€å‘è€…è¿›å…¥ AI ä¸–ç•Œçš„ç†æƒ³ä¼™ä¼´ã€‚</p>
<p>å®˜æ–¹ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fx" target="_blank" title="https://github.com/ant-design/x" ref="nofollow noopener noreferrer">github.com/ant-design/â€¦</a></p>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.ant.design%2Fcomponents%2Foverview-cn" target="_blank" title="https://x.ant.design/components/overview-cn" ref="nofollow noopener noreferrer">x.ant.design/components/â€¦</a></p>
<p>è¿™ä¸ªç»„ä»¶æ¯”è¾ƒæ–°ç›´æ¥è®©AIæ¥å†™æ˜¯ä¸å¤ªè¡Œçš„ï¼Œéœ€è¦è‡ªå·±çœ‹ä¸‹æ–‡æ¡£ï¼Œä¸è¿‡æ–‡æ¡£å·²ç»æä¾›äº†æ¯”è¾ƒè¯¦ç»†çš„ç¤ºä¾‹ä»£ç äº†ï¼Œè‡ªå·±çœ‹æ‡‚ä¹‹åï¼Œå¤åˆ¶ç²˜è´´ä¸€ä¸‹äº¤ç»™AIï¼Œå½“åšAIçš„ä¸Šä¸‹æ–‡ï¼Œå†™èµ·æ¥ä¼°è®¡é—®é¢˜ä¹Ÿä¸å¤§ã€‚</p>
<p>ç›®å‰ä½¿ç”¨Ant Desgin Xåšäº†ä¸€ä¸ªç®€å•çš„AIèŠå¤©ç•Œé¢äº†ï¼Œè‡ªå·±ç”¨AIå†™çš„ç»„ä»¶çš„è´¨é‡è·Ÿå¤§å‚å†™çš„è‚¯å®šæ˜¯ä¸èƒ½æ¯”çš„ï¼Œæ—¢ç„¶å¤§å‚éƒ½åšçš„è¿™ä¹ˆå¥½äº†ï¼Œç›´æ¥ç”¨å¤§å‚åšå¥½çš„è½®å­å°±è¡Œäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ef39e731c164e73bccb83b9943fc836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=eG%2FBcbDaKWqfIXZlaNx%2FyBt4tk4%3D" alt="" loading="lazy"/></p>
<p>AIå¯¹Ant Designè¿™ä¸ªç»„ä»¶åº“å¾ˆç†Ÿç»ƒï¼Œä½¿ç”¨è¿™ä¸ªç»„ä»¶åº“çš„Menu + React Routerä»£æ›¿äº†ä¹‹å‰å†™çš„è‡ªå®šä¹‰æ ·å¼ + React Routerã€‚</p>
<p>ä½¿ç”¨Ant Designåšäº†ä¸€ä¸ªæ¨¡å‹é…ç½®é¡µé¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22ae6c19ed3b4234b89eed37f57da975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=DHd5dlCOma%2FyI7tlDG3u9cXRHtg%3D" alt="" loading="lazy"/></p>
<p>ä¸ªäººæ„Ÿè§‰è®©AIç”¨çŸ¥åç»„ä»¶åº“æ¥å†™æ¯”çº¯è®©AIè‡ªå·±å†™è¿˜æ˜¯å¥½å¤šäº†ã€‚</p>
<h2 data-id="heading-2">ä½¿ç”¨Streamdown</h2>
<p>è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªæ–°ä¸œè¥¿ç›´æ¥è®©AIæ¥å†™æ˜¯ä¸å¤ªè¡Œçš„ï¼Œéœ€è¦è‡ªå·±å…ˆçœ‹ä¸‹ä»“åº“ä»‹ç»ã€‚</p>
<p><span>Streamdownçš„ç®€ä»‹æ˜¯â€œreact-markdown çš„å³æ’å³ç”¨æ›¿ä»£å“ï¼Œä¸“ä¸º AI é©±åŠ¨çš„æµå¼ä¼ è¾“è€Œè®¾è®¡ã€‚â€</span></p>
<p>å®˜æ–¹ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fstreamdown" target="_blank" title="https://github.com/vercel/streamdown" ref="nofollow noopener noreferrer">github.com/vercel/streâ€¦</a></p>
<p>ç”¨èµ·æ¥åœ¨æµå¼ä¼ è¾“æ–¹é¢ç¡®å®æ¯”ä¹‹å‰ä½¿ç”¨çš„react-markdownæ•ˆæœè¦å¥½ä¸€ç‚¹ã€‚</p>
<p>æ¸²æŸ“ä»£ç æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10057528c82743d9a757aa298c63b63d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=zd93AetezjwAv%2BMx3yaxanMEPw0%3D" alt="" loading="lazy"/></p>
<p>æ¸²æŸ“è¡¨æ ¼æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb77ebbead6640868b379691b1244364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=0FbyPGb1zXpqCQvn2bmbZjJ66OI%3D" alt="" loading="lazy"/></p>
<p>æ¸²æŸ“mermaidå›¾æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4803f2354af49508a86129fff9432c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=ZtkPxXbIh9XZz89Rii%2BCT%2BLfwXc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">é‡åˆ°çš„é—®é¢˜</h2>
<p>è¢«ä¸€ä¸ªSSEä¼ è¾“å¯¼è‡´å‰ç«¯æ€»æ˜¯æ²¡æœ‰æ¢è¡Œçš„ä¸€ä¸ªé—®é¢˜å›°æ‰°æœ€ä¹…ã€‚</p>
<p>ä¹‹å‰çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5818cc2dded54c4d87d388c274f112a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=ZdoAfUOC7Oq1PbMMvOW%2BqbZodV4%3D" alt="" loading="lazy"/></p>
<p>æ€»æ˜¯åªæœ‰ä¸€è¡Œï¼Œæˆ‘èƒ½å‘ç°åº”è¯¥æ˜¯åç«¯ä¼ è¿‡æ¥çš„æ¢è¡Œç¬¦æ²¡æœ‰è¢«æ­£å¸¸è§£æå¯¼è‡´çš„ï¼Œä½†æ˜¯å«AIæ”¹äº†å¾ˆä¹…è¿˜æ˜¯æ²¡æœ‰å¾ˆå¥½åœ°è§£å†³ï¼Œè‡ªå·±ä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ï¼Œæœç„¶å‘ç°æœ‰å¾ˆå¤šäººéƒ½é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸€ä¸ªå¾ˆä¸é”™çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯è¿›è¡Œè½¬ä¹‰ï¼Œå› ä¸ºSSEä¼ è¾“æœ‰ä»–è‡ªå·±çš„æ ¼å¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f93fd17862242cf8fbd1637da5e3ebf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=%2FWhv3xzdUFoj6VnlgSFM6z8hME8%3D" alt="" loading="lazy"/></p>
<p>å‰ç«¯åœ¨å¤„ç†çš„æ—¶å€™ä¸€èˆ¬å–œæ¬¢å°†æ‰€æœ‰\néƒ½å»æ‰ï¼Œå°±å¯¼è‡´äº†AIå›å¤å°±åªæœ‰ä¸€æ®µè¯ã€‚</p>
<p>å¯ä»¥åœ¨åç«¯å°†AIå›å¤ä¸­çš„\nè½¬ä¹‰ä¸ºä¸€ä¸ªå ä½ç¬¦ï¼Œè¿™é‡Œç”¨çš„æ˜¯&lt;|newline|&gt;ï¼Œç„¶ååœ¨å‰ç«¯å†å°†è¿™ä¸ªå ä½ç¬¦è½¬åŒ–ä¸º\nå³å¯ã€‚</p>
<p>åç«¯å¤„ç†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55c64a5878a54727b34a31cad9762ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=oNTZQA23vI5aZC7SJfdF876bfTg%3D" alt="" loading="lazy"/></p>
<p>å‰ç«¯å¤„ç†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5297269817004ce98ff60d2d37e0de03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=R9Ai2IHEePjVkSE1pY0GqYXGwow%3D" alt="" loading="lazy"/></p>
<p>è¿™æ ·AIå›å¤å°±ä¸ä¼šå°±åªæœ‰ä¸€æ®µå†…å®¹äº†ï¼ŒAIå›å¤ä¸­å¸¦æœ‰çš„æ¢è¡Œèƒ½æ­£å¸¸ä¿ç•™äº†ã€‚</p>
<h2 data-id="heading-4">ä¸€äº›å­¦åˆ°çš„çŸ¥è¯†ç‚¹</h2>
<p><strong>è§£æ„å†™æ³•</strong></p>
<p>è¿™ç§å†™æ³•ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Sidebar</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SidebarProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ collapsed = <span class="hljs-literal">false</span> }</span>) =&gt;</span> {}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea9b3445bc984b4bb89c1051c965a155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763639873&amp;x-signature=0P9hLOVXQtaiwuHjF6wQsiIqQhY%3D" alt="" loading="lazy"/></p>
<p>ç±»å‹å®‰å…¨ï¼šTypeScript ç¡®ä¿ç»„ä»¶æ¥æ”¶æ­£ç¡®çš„ props ç±»å‹</p>
<p>ç®€æ´æ€§ï¼šè§£æ„å’Œé»˜è®¤å€¼åœ¨ä¸€è¡Œå®Œæˆ</p>
<p>å¯è¯»æ€§ï¼šç›´æ¥çœ‹åˆ°ç»„ä»¶éœ€è¦å“ªäº› props</p>
<p>è‡ªæ–‡æ¡£åŒ–ï¼šç±»å‹å®šä¹‰ä½œä¸ºç»„ä»¶çš„"æ–‡æ¡£"</p>
<p><strong>React.useEffectçš„ä½¿ç”¨</strong></p>
<p>useEffect æ˜¯ React ä¸­æœ€é‡è¦çš„é’©å­ä¹‹ä¸€ï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚</p>
<p>å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰ï¼šæŒ‡ç»„ä»¶æ¸²æŸ“ä¹‹å¤–çš„æ“ä½œï¼Œå¦‚ï¼š</p>
<p>æ•°æ®è·å–ï¼ˆAPIè°ƒç”¨ï¼‰</p>
<p>è®¢é˜…ï¼ˆå®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰</p>
<p>æ‰‹åŠ¨ä¿®æ”¹DOM</p>
<p>localStorageæ“ä½œ</p>
<p><strong>React.useMemoçš„ä½¿ç”¨</strong></p>
<p>useMemo æ˜¯ React æä¾›çš„æ€§èƒ½ä¼˜åŒ–é’©å­ï¼Œç”¨äºè®°å¿†åŒ–è®¡ç®—ç»“æœï¼Œé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡å¤æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚</p>
<p><strong>localStorageçš„ä½¿ç”¨</strong></p>
<p>localStorage æ˜¯ Web æµè§ˆå™¨æä¾›çš„ä¸€ç§å®¢æˆ·ç«¯å­˜å‚¨æœºåˆ¶ï¼Œå…è®¸ç½‘ç«™åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æŒä¹…åŒ–å­˜å‚¨æ•°æ®ã€‚</p>
<p>åŸºæœ¬æ¦‚å¿µ
localStorage æ˜¯ Window å¯¹è±¡çš„å±æ€§ï¼Œæä¾›äº†é”®å€¼å¯¹å­˜å‚¨åŠŸèƒ½ï¼Œæ•°æ®æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œé™¤éç”¨æˆ·æ‰‹åŠ¨æ¸…é™¤æˆ–é€šè¿‡ä»£ç åˆ é™¤ã€‚</p>
<p>ç‰¹ç‚¹</p>
<p>æŒä¹…æ€§å­˜å‚¨ï¼šæ•°æ®åœ¨æµè§ˆå™¨å…³é—­åä»ç„¶ä¿ç•™</p>
<p>åŒæºç­–ç•¥ï¼šåªèƒ½è®¿é—®åŒä¸€åŸŸåä¸‹çš„æ•°æ®</p>
<p>å­—ç¬¦ä¸²å­˜å‚¨ï¼šæ‰€æœ‰æ•°æ®éƒ½ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨</p>
<p>åŒæ­¥æ“ä½œï¼šè¯»å†™æ“ä½œæ˜¯åŒæ­¥çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Microsoft Agent Framework/C#ï¼šäº†è§£Workflowsçš„å‡ ç§ä¸åŒæ¨¡å¼]]></title>    <link>https://juejin.cn/post/7572021695294275634</link>    <guid>https://juejin.cn/post/7572021695294275634</guid>    <pubDate>2025-11-13T12:02:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572021695294275634" data-draft-id="7572002432451149833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Microsoft Agent Framework/C#ï¼šäº†è§£Workflowsçš„å‡ ç§ä¸åŒæ¨¡å¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T12:02:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mingupup"/> <meta itemprop="url" content="https://juejin.cn/user/2298414003918396"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Microsoft Agent Framework/C#ï¼šäº†è§£Workflowsçš„å‡ ç§ä¸åŒæ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2298414003918396/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mingupup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:02:13.000Z" title="Thu Nov 13 2025 12:02:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘æœ‰ç©ºçš„æ—¶å€™åœ¨å­¦ä¹ Microsoft Agent Frameworkï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸­ç›®å‰Workflowsåˆ†ä¸ºäº†Sequentialã€Concurrentã€Handoffsä»¥åŠGroupchatå››ç§æ¨¡å¼ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹è¿™å››ç§ä¸åŒçš„æ¨¡å¼ã€‚</p>
<p>é¦–å…ˆéœ€è¦ä»¥ä¸‹ä¸¤ä¸ªåŒ…ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c805c085bac8450ba458d51ad3198cb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=D7rgcaSgF4uD52kGK45rvK5KZN8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">Sequential æ¨¡å¼</h2>
<p>åœ¨å¼€å§‹ä»‹ç»ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹å®ƒçš„æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12377eeb621549ee8e24734d2288dead~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=39xT%2FmnWbApLZtVWHveAUQeJ1k0%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆéœ€è¦å…ˆæ„å»ºä¸€ä¸ªIChatClientï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-keyword">var</span> apiKey = Environment.GetEnvironmentVariable(<span class="hljs-string">"OPENAI_API_KEY"</span>) ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">"æœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼šOPENAI_API_KEY"</span>);
 <span class="hljs-comment">//var model = Environment.GetEnvironmentVariable("OPENAI_MODEL") ?? "gpt-4o-mini";</span>
 <span class="hljs-keyword">var</span> model = <span class="hljs-string">"moonshotai/Kimi-K2-Instruct-0905"</span>;
 <span class="hljs-keyword">var</span> baseUrl = Environment.GetEnvironmentVariable(<span class="hljs-string">"OPENAI_BASEURL"</span>) ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">"æœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼šOPENAI_BASEURL"</span>);
         
 ApiKeyCredential apiKeyCredential = <span class="hljs-keyword">new</span> ApiKeyCredential(apiKey);

 OpenAIClientOptions openAIClientOptions = <span class="hljs-keyword">new</span> OpenAIClientOptions();
 openAIClientOptions.Endpoint = <span class="hljs-keyword">new</span> Uri(baseUrl);

 <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> OpenAIClient(apiKeyCredential, openAIClientOptions).GetChatClient(model).AsIChatClient();
</code></pre>
<p>ç°åœ¨é€šè¿‡è¿™ä¸ªå‡½æ•°æ–¹ä¾¿æ„å»ºä¸åŒçš„ç¿»è¯‘ä»£ç†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span>ä¸ºæŒ‡å®šç›®æ ‡è¯­è¨€åˆ›å»ºç¿»è¯‘ä»£ç†ã€‚<span class="hljs-doctag">&lt;/summary&gt;</span></span>
 <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ChatClientAgent <span class="hljs-title">GetTranslationAgent</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> targetLanguage, IChatClient chatClient</span>)</span> =&gt;
     <span class="hljs-keyword">new</span>(chatClient,
         <span class="hljs-string">$"ä½ æ˜¯ä¸€ä¸ªç¿»è¯‘åŠ©æ‰‹ï¼Œåªä½¿ç”¨<span class="hljs-subst">{targetLanguage}</span>å›åº”ã€‚å¯¹äºä»»ä½•è¾“å…¥ï¼Œ"</span> +
         <span class="hljs-string">$"é¦–å…ˆè¾“å‡ºè¾“å…¥è¯­è¨€çš„åç§°ï¼Œç„¶åå°†è¾“å…¥ç¿»è¯‘æˆ<span class="hljs-subst">{targetLanguage}</span>ã€‚"</span>);
</code></pre>
<p>æ„å»ºé¡ºåºå·¥ä½œæµï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">  <span class="hljs-comment">// åˆ›å»ºé¡ºåºå·¥ä½œæµ</span>
  <span class="hljs-keyword">var</span> workflow = AgentWorkflowBuilder.BuildSequential(
      <span class="hljs-function"><span class="hljs-keyword">from</span> lang <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-built_in">string</span>[]</span>)["French", "Spanish", "English"] 
      <span class="hljs-keyword">select</span> <span class="hljs-title">GetTranslationAgent</span>(<span class="hljs-params">lang, client</span>)
  )</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5b2ebc9f0dc45f09a6305a6950ac856~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=5snQMOp%2FeZ2YD1INhgkM2C2Z8B0%3D" alt="" loading="lazy"/></p>
<p>å‚æ•°å°±æ˜¯ä¸€ç»„AIAgentï¼Œç„¶åå·¥ä½œæµä¼šå°†è¿™äº›AIAgentæŒ‰é¡ºåºç»„åˆèµ·æ¥ã€‚</p>
<p>è¿è¡Œè¿™ä¸ªå·¥ä½œæµï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">  List&lt;ChatMessage&gt; messages = [<span class="hljs-keyword">new</span>(ChatRole.User, InputText)];
  <span class="hljs-keyword">await</span> RunWorkflowAsync(workflow, messages);
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;List&lt;ChatMessage&gt;&gt; RunWorkflowAsync(Workflow workflow, List&lt;ChatMessage&gt; messages)
{
    <span class="hljs-built_in">string</span>? lastExecutorId = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">await</span> <span class="hljs-keyword">using</span> StreamingRun run = <span class="hljs-keyword">await</span> InProcessExecution.StreamAsync(workflow, messages);
    <span class="hljs-keyword">await</span> run.TrySendMessageAsync(<span class="hljs-keyword">new</span> TurnToken(emitEvents: <span class="hljs-literal">true</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (WorkflowEvent evt <span class="hljs-keyword">in</span> run.WatchStreamAsync())
    {
        <span class="hljs-keyword">if</span> (evt <span class="hljs-keyword">is</span> AgentRunUpdateEvent e)
        {
            <span class="hljs-keyword">if</span> (e.ExecutorId != lastExecutorId)
            {
                OutputText += <span class="hljs-string">"\n"</span>;
                lastExecutorId = e.ExecutorId;

                OutputText += <span class="hljs-string">$"<span class="hljs-subst">{e.ExecutorId}</span>ï¼š\n"</span>;
            }

            OutputText += e.Update.Text;
            <span class="hljs-keyword">if</span> (e.Update.Contents.OfType&lt;FunctionCallContent&gt;().FirstOrDefault() <span class="hljs-keyword">is</span> FunctionCallContent call)
            {
               OutputText += <span class="hljs-string">"\n"</span>;
               OutputText += <span class="hljs-string">$"[è°ƒç”¨å‡½æ•° '<span class="hljs-subst">{call.Name}</span>'ï¼Œå‚æ•°: <span class="hljs-subst">{JsonSerializer.Serialize(call.Arguments)}</span>]"</span>;
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (evt <span class="hljs-keyword">is</span> WorkflowOutputEvent output)
        {
            OutputText += <span class="hljs-string">"\n\nå·¥ä½œæµå®Œæˆï¼"</span>;
            <span class="hljs-keyword">return</span> output.As&lt;List&lt;ChatMessage&gt;&gt;()!;
        }
    }

    <span class="hljs-keyword">return</span> [];
}
</code></pre>
<p>ä¸ç›´è§‰ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯åªæœ‰åœ¨ä¼ å…¥TurnTokençš„æ—¶å€™æ‰ä¼šå¼€å§‹è¿è¡Œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">await</span> run.TrySendMessageAsync(<span class="hljs-keyword">new</span> TurnToken(emitEvents: <span class="hljs-literal">true</span>));
</code></pre>
<p>ç„¶åé€šè¿‡WorkflowEventæ¥è¿›è¡Œä¸åŒæ“ä½œã€‚</p>
<p>è¿™ä¸ªä¾‹å­çœ‹æœ€åçš„è¾“å…¥å°±æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da50d6c3067e4c29a66badd15b631745~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=dHmRQGGQIUTRjkAxHmoAezsMGTs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">Concurrent æ¨¡å¼</h2>
<p>è¿˜æ˜¯å…ˆæ¥çœ‹ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ada191422f8484d986a8d780fcc2d94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=cuDZw3tIYA0nlzHtWqFf6yczRM8%3D" alt="" loading="lazy"/></p>
<p>Concurrentå°±æ˜¯å¹¶å‘å·¥ä½œæµï¼Œå¯¹åŒä¸€ä¸ªè¾“å…¥ï¼Œä¸åŒçš„AI AgentåŒæ—¶å“åº”ã€‚</p>
<p>çœ‹ä¸€ä¸‹æ€ä¹ˆæ„å»ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// åˆ›å»ºå¹¶å‘å·¥ä½œæµ</span>
 <span class="hljs-keyword">var</span> workflow = AgentWorkflowBuilder.BuildConcurrent(
     <span class="hljs-function"><span class="hljs-keyword">from</span> lang <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-built_in">string</span>[]</span>)["French", "Spanish", "English"] 
     <span class="hljs-keyword">select</span> <span class="hljs-title">GetTranslationAgent</span>(<span class="hljs-params">lang, client</span>)
 )</span>;
</code></pre>
<h2 data-id="heading-3">Handoffs æ¨¡å¼</h2>
<p>Handoffså°±æ˜¯äº¤æ¥æ¨¡å¼ï¼Œè·Ÿä¹‹å‰çš„ä¸å¤ªä¸€æ ·ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»º3ä¸ªä¸åŒçš„AI Agentï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆ›å»ºä¸“é—¨çš„ä»£ç†</span>
ChatClientAgent historyTutor = <span class="hljs-keyword">new</span>(client,
    <span class="hljs-string">"ä½ æä¾›å†å²æŸ¥è¯¢æ–¹é¢çš„å¸®åŠ©ã€‚æ¸…æ™°åœ°è§£é‡Šé‡è¦äº‹ä»¶å’ŒèƒŒæ™¯ã€‚åªå›åº”å†å²ç›¸å…³å†…å®¹ã€‚"</span>,
    <span class="hljs-string">"history_tutor"</span>,
    <span class="hljs-string">"å†å²é—®é¢˜çš„ä¸“ä¸šä»£ç†"</span>);

ChatClientAgent mathTutor = <span class="hljs-keyword">new</span>(client,
    <span class="hljs-string">"ä½ æä¾›æ•°å­¦é—®é¢˜æ–¹é¢çš„å¸®åŠ©ã€‚åœ¨æ¯ä¸€æ­¥è§£é‡Šä½ çš„æ¨ç†è¿‡ç¨‹å¹¶åŒ…å«ç¤ºä¾‹ã€‚åªå›åº”æ•°å­¦ç›¸å…³å†…å®¹ã€‚"</span>,
    <span class="hljs-string">"math_tutor"</span>,
    <span class="hljs-string">"æ•°å­¦é—®é¢˜çš„ä¸“ä¸šä»£ç†"</span>);

ChatClientAgent triageAgent = <span class="hljs-keyword">new</span>(client,
    <span class="hljs-string">"ä½ æ ¹æ®ç”¨æˆ·çš„ä½œä¸šé—®é¢˜ç¡®å®šä½¿ç”¨å“ªä¸ªä»£ç†ã€‚æ€»æ˜¯å°†ä»»åŠ¡äº¤æ¥ç»™å¦ä¸€ä¸ªä»£ç†ã€‚"</span>,
    <span class="hljs-string">"triage_agent"</span>,
    <span class="hljs-string">"å°†æ¶ˆæ¯è·¯ç”±åˆ°é€‚å½“çš„ä¸“ä¸šä»£ç†"</span>);
</code></pre>
<p>çœ‹ä¸‹å¦‚ä½•æ„å»ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// åˆ›å»ºäº¤æ¥å·¥ä½œæµ</span>
 <span class="hljs-keyword">var</span> workflow = AgentWorkflowBuilder.CreateHandoffBuilderWith(triageAgent)
     .WithHandoffs(triageAgent, [mathTutor, historyTutor])
     .WithHandoffs([mathTutor, historyTutor], triageAgent)
     .Build();
</code></pre>
<p>æ¥çœ‹ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cca85601410a45ed84294a7d9d25241a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=PSkkA9DTeJ7PN%2FKLGiTnr45zJ%2Bs%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡ä¼šåˆ°è¿™ä¸ªåœ°æ–¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411959a80af04a2a922880a0c3d99378~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=1m9fLpWKj3AZMfiteOVozxHG3Ik%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1d23954f8df42fd8f6a31376bcc288c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=cWhAdXp2tqxRifeDCktWkylXjgY%3D" alt="" loading="lazy"/></p>
<p>å†…éƒ¨æœ‰ä¸€ä¸ªFunctionCalläº¤æ¥ç»™äº†å¯¹åº”çš„ä»£ç†ã€‚</p>
<p>çœ‹ä¸€ä¸‹æœ€ç»ˆçš„ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/743a409ecbee4d8f9912ae45b6201c93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=9oXlovby1yIJKk67tGO3dAwSgdQ%3D" alt="" loading="lazy"/></p>
<p>å†é—®ä¸€ä¸ªæ•°å­¦ç›¸å…³çš„é—®é¢˜çœ‹çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e1e83094cf24370bfbd516f5d6203d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=OWyvl7hz9z7A%2FLa9Sv8DpyXynsc%3D" alt="" loading="lazy"/></p>
<p>çœ‹ä¸€ä¸‹æœ€ç»ˆçš„ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0806b5a43c88438fb8e33e7f404563ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=3%2FdPt%2BFxFzAXOjunqHXLQ8l6w6c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">Groupchat æ¨¡å¼</h2>
<p>Groupchatæ¨¡å¼å°±æ˜¯å¼€å¯ä¸€ä¸ªAIç¾¤èŠï¼Œæˆ‘æ‹¿è¾©è®ºä¸¾ä¸ªä¾‹å­ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"> ChatClientAgent chatClientAgent1 = <span class="hljs-keyword">new</span>(client, <span class="hljs-string">"ä½ æ˜¯è¾©è®ºæ­£æ–¹"</span>);
 ChatClientAgent chatClientAgent2 = <span class="hljs-keyword">new</span>(client, <span class="hljs-string">"ä½ æ˜¯è¾©è®ºåæ–¹"</span>);
 
  <span class="hljs-comment">// åˆ›å»ºç¾¤èŠå·¥ä½œæµ</span>
 <span class="hljs-keyword">var</span> workflow = AgentWorkflowBuilder.CreateGroupChatBuilderWith(agents =&gt; <span class="hljs-keyword">new</span> RoundRobinGroupChatManager(agents) { MaximumIterationCount = <span class="hljs-number">5</span> })
     .AddParticipants([chatClientAgent1, chatClientAgent2])
     .Build();
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3857827e1de4697b640bc84f887bbb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=M%2BSwBd%2BQL4FAlMl1K8MAI2icSFA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a98ec5634ef4db9ab2733f9b7d0da0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640133&amp;x-signature=sXusfynZtRL6Zcd6PPQLjpBF2PM%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPF/C#ï¼šä½¿ç”¨Styletä¸­çš„IWindowManagerç”¨äºæ˜¾ç¤ºç­‰å¾…çª—ä½“ã€å¯¹è¯æ¡†ä¸æ¶ˆæ¯æ¡†]]></title>    <link>https://juejin.cn/post/7572016447805030426</link>    <guid>https://juejin.cn/post/7572016447805030426</guid>    <pubDate>2025-11-13T12:03:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572016447805030426" data-draft-id="7572021695294292018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPF/C#ï¼šä½¿ç”¨Styletä¸­çš„IWindowManagerç”¨äºæ˜¾ç¤ºç­‰å¾…çª—ä½“ã€å¯¹è¯æ¡†ä¸æ¶ˆæ¯æ¡†"/> <meta itemprop="keywords" content="C#"/> <meta itemprop="datePublished" content="2025-11-13T12:03:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mingupup"/> <meta itemprop="url" content="https://juejin.cn/user/2298414003918396"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPF/C#ï¼šä½¿ç”¨Styletä¸­çš„IWindowManagerç”¨äºæ˜¾ç¤ºç­‰å¾…çª—ä½“ã€å¯¹è¯æ¡†ä¸æ¶ˆæ¯æ¡†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2298414003918396/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mingupup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T12:03:14.000Z" title="Thu Nov 13 2025 12:03:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>æ˜¾ç¤ºç­‰å¾…æ¡†æ„ä¹‰</strong></p>
<p>åœ¨åˆ›å»ºWPFåº”ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„æ“ä½œï¼Œé‚£ä¹ˆç»™ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªç­‰å¾…çª—ä½“æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œé€šè¿‡æ˜¾ç¤ºä¸€ä¸ªç­‰å¾…çª—ä½“è®©ç”¨æˆ·æ˜ç™½è¿è¡Œçš„è¿™ä¸ªè½¯ä»¶å¹¶æ²¡æœ‰å´©æºƒï¼Œèƒ½æœ‰æ•ˆæ¶ˆé™¤ç”¨æˆ·çš„ç„¦è™‘ä¸ä¸ç¡®å®šæ€§ï¼ŒåŒæ—¶èƒ½æå¤§æå‡ç”¨æˆ·ä½“éªŒï¼Œå±•ç¤ºè½¯ä»¶çš„ä¸“ä¸šæ€§å’Œå“è´¨ï¼Œå°†æ— èŠçš„ç­‰å¾…è½¬åŒ–ä¸ºå¯é¢„æœŸçš„ã€å®‰å¿ƒçš„è¿‡ç¨‹ã€‚</p>
<p><strong>æ˜¾ç¤ºå¯¹è¯æ¡†æ„ä¹‰</strong></p>
<p>å¯¹è¯æ¡†èƒ½æœ‰æ•ˆåœ°æ•è·ç”¨æˆ·ç„¦ç‚¹ã€‚ä½œä¸ºæ¨¡æ€çª—å£ï¼Œå®ƒä¼šå¼ºåˆ¶ç”¨æˆ·å¿…é¡»å®Œæˆå½“å‰ä»»åŠ¡ï¼ˆå¦‚ç¡®è®¤ã€è¾“å…¥ä¿¡æ¯æˆ–åšå‡ºé€‰æ‹©ï¼‰ï¼Œä¹‹åæ‰èƒ½ç»§ç»­æ“ä½œä¸»çª—å£ã€‚è¿™ä¿è¯äº†å…³é”®ä¸šåŠ¡æµç¨‹ï¼ˆå¦‚ä¿å­˜æ–‡ä»¶å‰çš„ç¡®è®¤ï¼‰çš„å®Œæ•´æ€§ï¼Œé˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œã€‚å…¶æ¬¡ï¼Œå¯¹è¯æ¡†æ˜¯ä¿¡æ¯æ”¶é›†ä¸å±•ç¤ºçš„ä¸“ç”¨å®¹å™¨ã€‚å®ƒå°†ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚è®¾ç½®ã€ç™»å½•ã€è¯¦æƒ…æŸ¥çœ‹ï¼‰çš„UIå…ƒç´ å’Œé€»è¾‘å°è£…èµ·æ¥ï¼Œä½¿ä¸»çª—å£ç•Œé¢ä¿æŒç®€æ´ï¼ŒåŒæ—¶æå‡äº†ä»£ç çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p><strong>æ˜¾ç¤ºä¿¡æ¯æ¡†æ„ä¹‰</strong></p>
<p>ä¿¡æ¯æ¡†çš„æ ¸å¿ƒä»·å€¼åœ¨äºå³æ—¶æ€§ä¸å¼ºåˆ¶æ€§ã€‚å¯¹äºæ“ä½œæˆåŠŸã€å¤±è´¥æˆ–å‡ºç°è­¦å‘Šç­‰é‡è¦åé¦ˆï¼Œå®ƒèƒ½ç«‹åˆ»æ•è·ç”¨æˆ·æ³¨æ„åŠ›ï¼Œé€šè¿‡æ¨¡æ€æ˜¾ç¤ºç¡®ä¿ç”¨æˆ·çœ‹åˆ°å¹¶å¤„ç†è¯¥ä¿¡æ¯ï¼Œé¿å…äº†å…³é”®æç¤ºè¢«å¿½ç•¥ã€‚å…¶æ¬¡ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†å¿«é€Ÿå†³ç­–çš„é€”å¾„ã€‚é™¤äº†çº¯ä¿¡æ¯å±•ç¤ºï¼Œä¿¡æ¯æ¡†å¯é™„å¸¦â€œæ˜¯/å¦â€ã€â€œç¡®å®š/å–æ¶ˆâ€ç­‰æŒ‰é’®ï¼Œè®©ç”¨æˆ·åœ¨ä¸ç¦»å¼€å½“å‰ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ï¼Œå°±èƒ½å¯¹ç®€å•è¯¢é—®åšå‡ºè¿…é€Ÿå›åº”ï¼Œå¦‚ç¡®è®¤åˆ é™¤æ“ä½œã€‚</p>
<h2 data-id="heading-1">Styletä»‹ç»</h2>
<p>Styletæ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„MVVMæ¡†æ¶ï¼Œä¸“ä¸ºWPFè®¾è®¡ã€‚å®ƒæ‘†è„±äº†ä¼ ç»ŸMVVMçš„æ ·æ¿ä»£ç ï¼Œé€šè¿‡åŸºäºçº¦å®šçš„ç‰¹æ€§ï¼Œä½¿å¾—Viewå’ŒViewModelçš„è‡ªåŠ¨å…³è”ã€ä¾èµ–æ³¨å…¥ç­‰å˜å¾—æå…¶ç®€å•ã€‚å¼€å‘è€…å‡ ä¹æ— éœ€é…ç½®å³å¯å¿«é€Ÿä¸Šæ‰‹ï¼Œå…¶å†…ç½®çš„åŠŸèƒ½å¦‚IConductorå±å¹•ç®¡ç†å’Œäº‹ä»¶èšåˆå™¨ï¼Œèƒ½ä¼˜é›…åœ°å¤„ç†å¤æ‚çš„åº”ç”¨ç¨‹åºå¯¼èˆªä¸æ¨¡å—é—´é€šä¿¡ã€‚Styletçš„ç›®æ ‡æ˜¯è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼Œè€Œéç¹ççš„æ¡†æ¶é…ç½®ï¼Œä»è€Œæ˜¾è‘—æå‡WPFåº”ç”¨çš„å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡ã€‚</p>
<p>æœ¬æ–‡é€šè¿‡ä½¿ç”¨Styletå†…ç½®çš„IWindowManagerå¯ä»¥å¾ˆå®¹æ˜“å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p>
<h2 data-id="heading-2">æ˜¾ç¤ºç­‰å¾…æ¡†</h2>
<p>è¦æ˜¾ç¤ºç­‰å¾…çª—ä½“é‚£ä¹ˆå¿…é¡»å…ˆåšä¸€ä¸ªç­‰å¾…çª—ä½“ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªWaitingView.xamlï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">&lt;Window x:Class=<span class="hljs-string">"Rouyan.Pages.View.WaitingView"</span>
        xmlns=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        xmlns:x=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        xmlns:d=<span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span>
        xmlns:mc=<span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        xmlns:materialDesign=<span class="hljs-string">"http://materialdesigninxaml.net/winfx/xaml/themes"</span>
        xmlns:local=<span class="hljs-string">"clr-namespace:Rouyan.Pages.View"</span>
        mc:Ignorable=<span class="hljs-string">"d"</span>
        Title=<span class="hljs-string">"WaitingWindow"</span> 
        Height=<span class="hljs-string">"200"</span> 
        Width=<span class="hljs-string">"350"</span>
        WindowStyle=<span class="hljs-string">"ToolWindow"</span>
        WindowStartupLocation=<span class="hljs-string">"CenterScreen"</span>
        ResizeMode=<span class="hljs-string">"NoResize"</span>
        Topmost=<span class="hljs-string">"True"</span>&gt;
    &lt;Grid&gt;
        &lt;Grid.RowDefinitions&gt;
            &lt;RowDefinition Height=<span class="hljs-string">"Auto"</span>/&gt;
            &lt;RowDefinition Height=<span class="hljs-string">"Auto"</span>/&gt;
        &lt;/Grid.RowDefinitions&gt;
        
        &lt;Border Grid.Row=<span class="hljs-string">"0"</span>
                Background=<span class="hljs-string">"{DynamicResource PrimaryHueMidBrush}"</span>
                Padding=<span class="hljs-string">"16 8"</span>&gt;
            &lt;TextBlock HorizontalAlignment=<span class="hljs-string">"Center"</span>
                       Text=<span class="hljs-string">"{Binding Text}"</span>
                       FontSize=<span class="hljs-string">"16"</span>/&gt;
        &lt;/Border&gt;
        
        &lt;!-- è¿›åº¦æ¡åŒºåŸŸ --&gt;
        &lt;StackPanel Grid.Row=<span class="hljs-string">"1"</span>
                    Orientation=<span class="hljs-string">"Vertical"</span>
                    HorizontalAlignment=<span class="hljs-string">"Center"</span>
                    VerticalAlignment=<span class="hljs-string">"Center"</span>
                    Margin=<span class="hljs-string">"20"</span>&gt;
            
            &lt;ProgressBar Style=<span class="hljs-string">"{StaticResource MaterialDesignCircularProgressBar}"</span>
                         Foreground=<span class="hljs-string">"{DynamicResource SecondaryHueMidBrush}"</span>
                         Width=<span class="hljs-string">"60"</span>
                         Height=<span class="hljs-string">"60"</span>
                         IsIndeterminate=<span class="hljs-string">"True"</span>/&gt;
                
            &lt;TextBlock Text=<span class="hljs-string">"è¯·ç¨å€™..."</span>
                       FontSize=<span class="hljs-string">"14"</span>
                       HorizontalAlignment=<span class="hljs-string">"Center"</span>
                       Foreground=<span class="hljs-string">"{DynamicResource MaterialDesignBody}"</span>
                       Margin=<span class="hljs-string">"0,10,0,0"</span>/&gt;
                
        &lt;/StackPanel&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c27516bb2234eb787213717a7607265~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=IZ4MV5cey3inIixTcB6tYGfpirs%3D" alt="" loading="lazy"/></p>
<p>åˆ†ä¸ºä¸¤è¡Œï¼Œä¸Šé¢ä¸€è¡Œç”¨äºæ˜¾ç¤ºè¦æ˜¾ç¤ºçš„ä¿¡æ¯ï¼Œä¸‹é¢ä¸€è¡Œç”¨äºæ˜¾ç¤ºProgressBarä¸"è¯·ç¨å€™..."çš„ç»„åˆã€‚</p>
<p>ç°åœ¨å†æ¥åˆ›å»ºå¯¹åº”çš„ViewModelï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WaitingViewModel</span> : <span class="hljs-title">Screen</span>
 {      
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Text { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-string">"å¤„ç†ä¸­..."</span>;

 }
</code></pre>
<p>æ˜¾ç¤ºè¿™ä¸ªç­‰å¾…çª—ä½“ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ªè€—æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆæ˜¾ç¤ºè¿™ä¸ªç­‰å¾…çª—ä½“ç»™ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-comment">// æ˜¾ç¤ºç­‰å¾…çª—ä½“          </span>
 waitingVm = _container.Get&lt;WaitingViewModel&gt;();
 waitingVm.Text = <span class="hljs-string">"æ­£åœ¨åˆ†æè¯·æ±‚ï¼Œè¯·ç¨å€™..."</span>;
 _windowManager.ShowWindow(waitingVm);
</code></pre>
<p>æ˜¾ç¤ºç­‰å¾…çª—ä½“ä¸»è¦ä½¿ç”¨äº†Styletä¸­è‡ªå¸¦çš„ä¸€ä¸ªç»„ä»¶IWindowManagerï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œä¾èµ–æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IContainer _container;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IWindowManager _windowManager;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TerminalAgentViewModel</span>(<span class="hljs-params">IContainer container,IWindowManager windowManager</span>)</span>
{
    _container = container;
    _windowManager = windowManager;
}
</code></pre>
<p>ç”±äºç­‰å¾…çª—ä½“æ˜¯ä¸€ä¸ªWindowï¼Œå› æ­¤éœ€è¦ä½¿ç”¨IWindowManagerçš„ShowWindowæ–¹æ³•ã€‚</p>
<p>Styletä¼šå¸®æˆ‘ä»¬å°†æ‰€æœ‰Viewä¸ViewModeléƒ½ä»¥ç¬æ€çš„å½¢å¼æ³¨å…¥ä¾èµ–æ³¨å…¥å®¹å™¨ä¸­äº†ï¼Œå› æ­¤å¯ä»¥ä¸ç”¨è‡ªå·±åœ¨è¿™é‡Œnewä¸€ä¸ªviewmodelè€Œæ˜¯å¯ä»¥ç›´æ¥ä»å®¹å™¨ä¸­å–ä¸€ä¸ªå‡ºæ¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> waitingVm = _container.Get&lt;WaitingViewModel&gt;();
</code></pre>
<p><span>IWindowManagerçš„ShowWindowæ–¹æ³•çš„ä½¿ç”¨ï¼Œåç›´è§‰çš„ä¸€ç‚¹æ˜¯ä¼ å…¥çš„ä¸æ˜¯è¿™ä¸ªçª—ä½“ï¼Œè€Œæ˜¯è¿™ä¸ªçª—ä½“å¯¹åº”çš„ViewModelï¼ŒStyletä¼šæ ¹æ®è¿™ä¸ªViewModelè‡ªåŠ¨æ‰¾åˆ°å¯¹åº”çš„Viewï¼Œè¿™ä¹Ÿä½“ç°äº†Styletä¸­ViewModel Firstçš„æ€æƒ³ã€‚</span></p>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e867c51c8d4a4941965cc7f6b77b1a3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=4GTbvRiDzOuEIj%2BV4groL4hTl94%3D" alt="" loading="lazy"/></p>
<p>è¿™æ—¶å€™å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®å°±æ˜¯é‚£ä¹ˆæ€ä¹ˆå…³é—­è¿™ä¸ªçª—ä½“å‘¢ï¼Ÿ</p>
<p>å¦‚æœæ˜¯è·å–å¯¹åº”çš„Windowï¼Œæˆ‘ä»¬è°ƒç”¨closeæ–¹æ³•å°±å¯ä»¥äº†ï¼Œç°åœ¨è·å–çš„æ˜¯å¯¹åº”çš„ViewModelè¯¥å¦‚ä½•å…³é—­è¿™ä¸ªçª—ä½“å‘¢ï¼Ÿ</p>
<p>Styletå·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸€ä¸ªï¼Œåªè¦è¿™æ ·å†™å°±å¯ä»¥å…³é—­è¿™ä¸ªçª—ä½“ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"> waitingVm.RequestClose();
</code></pre>
<h2 data-id="heading-3">æ˜¾ç¤ºå¯¹è¯æ¡†</h2>
<p>ä½¿ç”¨Styletä¸­çš„IWindowManageræ˜¾ç¤ºå¯¹è¯æ¡†åŒæ ·ä¹Ÿå¾ˆç®€å•ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªHumanApprovalDialogViewï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">&lt;Window x:Class=<span class="hljs-string">"Rouyan.Pages.View.HumanApprovalDialogView"</span>
        xmlns=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        xmlns:x=<span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        xmlns:d=<span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span>
        xmlns:mc=<span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        xmlns:s=<span class="hljs-string">"https://github.com/canton7/Stylet"</span>
        mc:Ignorable=<span class="hljs-string">"d"</span>
        Title=<span class="hljs-string">"{Binding Title}"</span>
        Height=<span class="hljs-string">"200"</span>
        Width=<span class="hljs-string">"420"</span>
        WindowStartupLocation=<span class="hljs-string">"CenterOwner"</span>
        ResizeMode=<span class="hljs-string">"NoResize"</span>
        Topmost=<span class="hljs-string">"True"</span>&gt;
    &lt;Window.InputBindings&gt;
        &lt;KeyBinding Command=<span class="hljs-string">"{s:Action Approve}"</span> Key=<span class="hljs-string">"Y"</span>/&gt;
        &lt;KeyBinding Command=<span class="hljs-string">"{s:Action Reject}"</span> Key=<span class="hljs-string">"N"</span>/&gt;
    &lt;/Window.InputBindings&gt;
    &lt;Grid Margin=<span class="hljs-string">"16"</span>&gt;
        &lt;Grid.RowDefinitions&gt;
            &lt;RowDefinition Height=<span class="hljs-string">"*"</span>/&gt;
            &lt;RowDefinition Height=<span class="hljs-string">"Auto"</span>/&gt;
        &lt;/Grid.RowDefinitions&gt;

        &lt;!-- é¡¶éƒ¨æ¶ˆæ¯è¡Œ --&gt;
        &lt;ScrollViewer Grid.Row=<span class="hljs-string">"0"</span> VerticalScrollBarVisibility=<span class="hljs-string">"Auto"</span>&gt;
            &lt;TextBlock Text=<span class="hljs-string">"{Binding Message}"</span>
                       TextWrapping=<span class="hljs-string">"Wrap"</span>
                       FontSize=<span class="hljs-string">"14"</span>/&gt;
        &lt;/ScrollViewer&gt;

        &lt;!-- åº•éƒ¨æŒ‰é’®è¡Œï¼šå·¦ä¾§åŒæ„ï¼Œå³ä¾§æ‹’ç» --&gt;
        &lt;Grid Grid.Row=<span class="hljs-string">"1"</span> Margin=<span class="hljs-string">"0,16,0,0"</span>&gt;
            &lt;Grid.ColumnDefinitions&gt;
                &lt;ColumnDefinition Width=<span class="hljs-string">"*"</span>/&gt;
                &lt;ColumnDefinition Width=<span class="hljs-string">"*"</span>/&gt;
            &lt;/Grid.ColumnDefinitions&gt;

            &lt;Button Grid.Column=<span class="hljs-string">"0"</span>
                    Content=<span class="hljs-string">"åŒæ„(Y)"</span>
                    Width=<span class="hljs-string">"100"</span>
                    Height=<span class="hljs-string">"30"</span>
                    HorizontalAlignment=<span class="hljs-string">"Left"</span>
                    IsDefault=<span class="hljs-string">"True"</span>
                    Command=<span class="hljs-string">"{s:Action Approve}"</span>/&gt;

            &lt;Button Grid.Column=<span class="hljs-string">"1"</span>
                    Content=<span class="hljs-string">"æ‹’ç»(N)"</span>
                    Width=<span class="hljs-string">"100"</span>
                    Height=<span class="hljs-string">"30"</span>
                    HorizontalAlignment=<span class="hljs-string">"Right"</span>
                    IsCancel=<span class="hljs-string">"True"</span>
                    Command=<span class="hljs-string">"{s:Action Reject}"</span>/&gt;
        &lt;/Grid&gt;
    &lt;/Grid&gt;
&lt;/Window&gt;
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2dbfb2b8e314631905181ab04cbc258~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=FUuT%2BzJiXe9kismTg721tvsDfQI%3D" alt="" loading="lazy"/></p>
<p>åˆ›å»ºå¯¹åº”çš„ViewModelï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HumanApprovalDialogViewModel</span> : <span class="hljs-title">Screen</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HumanApprovalDialogViewModel</span>()</span>
    {
        Title = <span class="hljs-string">"æ‰§è¡Œå®¡æ‰¹"</span>;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _title = <span class="hljs-built_in">string</span>.Empty;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title
    {
        <span class="hljs-keyword">get</span> =&gt; _title;
        <span class="hljs-keyword">set</span> =&gt; SetAndNotify(<span class="hljs-keyword">ref</span> _title, <span class="hljs-keyword">value</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _message = <span class="hljs-built_in">string</span>.Empty;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Message
    {
        <span class="hljs-keyword">get</span> =&gt; _message;
        <span class="hljs-keyword">set</span> =&gt; SetAndNotify(<span class="hljs-keyword">ref</span> _message, <span class="hljs-keyword">value</span>);
    }

    <span class="hljs-comment">// Approve the action</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Approve</span>()</span>
    {
        RequestClose(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-comment">// Reject the action</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Reject</span>()</span>
    {
        RequestClose(<span class="hljs-literal">false</span>);
    }
}
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ä¸ShowWindowä¹Ÿå¾ˆç›¸ä¼¼ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> dialogVm = <span class="hljs-keyword">new</span> HumanApprovalDialogViewModel
{
    Title = <span class="hljs-string">"å‡½æ•°è°ƒç”¨å®¡æ‰¹"</span>,
    Message = <span class="hljs-string">$"æ˜¯å¦åŒæ„è¿™ä¸ªæ“ä½œï¼Ÿ"</span>
};

<span class="hljs-built_in">bool</span>? result = _windowManager.ShowDialog(dialogVm);
</code></pre>
<p>æœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ¨¡æ€ä¸éæ¨¡æ€ã€‚</p>
<p>æ¨¡æ€ï¼š
å½“ä¸€ä¸ªæ¨¡æ€çª—å£ï¼ˆå¦‚å¯¹è¯æ¡†ï¼‰å‡ºç°æ—¶ï¼Œå®ƒä¼šç‹¬å ç”¨æˆ·çš„æ“ä½œç„¦ç‚¹ã€‚åœ¨ç”¨æˆ·å®Œæˆè¯¥çª—å£çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ç‚¹å‡»â€œç¡®å®šâ€æˆ–â€œå–æ¶ˆâ€ï¼‰å¹¶å…³é—­å®ƒä¹‹å‰ï¼Œæ— æ³•ä¸åº”ç”¨ç¨‹åºçš„å…¶ä»–ä»»ä½•çª—å£è¿›è¡Œäº¤äº’ã€‚ç¨‹åºæµç¨‹ä¹Ÿä¼šåœ¨æ­¤å¤„æš‚åœï¼Œç­‰å¾…çª—å£å…³é—­åè¿”å›ç»“æœã€‚è¿™å°±åƒä¸€ä¸ªå¼ºåˆ¶æ€§çš„â€œé€‰æ‹©é¢˜â€ï¼Œä½ å¿…é¡»å›ç­”æ‰èƒ½ç»§ç»­ã€‚å¸¸è§åœºæ™¯åŒ…æ‹¬æ–‡ä»¶ä¿å­˜ã€ç¡®è®¤åˆ é™¤ç­‰éœ€è¦ç”¨æˆ·æ˜ç¡®å†³ç­–çš„æµç¨‹ã€‚</p>
<p>éæ¨¡æ€ï¼š
éæ¨¡æ€çª—å£åˆ™åƒä¸€ä¸ªå¼€æ”¾çš„åŠ©æ‰‹ã€‚å®ƒæ˜¾ç¤ºåï¼Œç”¨æˆ·å¯ä»¥éšæ—¶åœ¨å®ƒå’Œåº”ç”¨ç¨‹åºçš„å…¶ä»–çª—å£ä¹‹é—´è‡ªç”±åˆ‡æ¢ï¼Œæ— éœ€å…³é—­å®ƒã€‚ç¨‹åºä¹Ÿä¼šç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šè¢«çª—å£çš„å¼€å¯æˆ–å…³é—­æ‰“æ–­ã€‚è¿™å°±åƒä¸€ä¸ªå¯ä»¥éšæ—¶æŸ¥é˜…çš„â€œä¾¿ç­¾â€æˆ–â€œè®¡ç®—å™¨â€ã€‚å®ƒå¸¸ç”¨äºå·¥å…·ç®±ã€å±æ€§é¢æ¿æˆ–è¾…åŠ©ä¿¡æ¯çª—å£ï¼Œè®©ç”¨æˆ·åœ¨ä¸»ä»»åŠ¡è¿›è¡Œæ—¶èƒ½æ–¹ä¾¿åœ°è·å–é¢å¤–åŠŸèƒ½æˆ–ä¿¡æ¯ã€‚</p>
<p><span>ç®€è¨€ä¹‹å°±æ˜¯æ¨¡æ€å°±æ˜¯ä¼šé˜»å¡ç¨‹åºè¿è¡Œï¼Œè¦ä½ æ˜ç¡®ç»™ä¸€ä¸ªåé¦ˆï¼Œéæ¨¡æ€ä¸ä¼šé˜»å¡ç¨‹åºçš„è¿è¡Œï¼Œå°±å•çº¯æ˜¾ç¤ºä¸€ä¸ªçª—ä½“ã€‚</span></p>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03fc72263d3e43a9b4673a8359d76a11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=0jHbZSFwQyJfw%2F4cn%2FjbLg%2BJzCM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0c36686ddbd4a9b8815bdb6587605a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=Hj6w1ORs8EaMoieZ%2Ftg9vmOU4LY%3D" alt="" loading="lazy"/></p>
<p>åŒæ„å°±è¿”å›trueï¼Œæ‹’ç»æˆ–è€…å…³é—­çª—ä½“å°±è¿”å›falseã€‚</p>
<h2 data-id="heading-4">æ˜¾ç¤ºä¿¡æ¯æ¡†</h2>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°IWindowManageré™¤äº†æœ‰ShowWindowä¸ShowDialogæ–¹æ³•å¤–è¿˜æœ‰ä¸€ä¸ªShowMessageæ–¹æ³•ï¼Œç°åœ¨æ¥çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨å§ï¼ï¼</p>
<p>1ã€åŸºæœ¬ç”¨æ³• - åªæ˜¾ç¤ºæ¶ˆæ¯</p>
<pre><code class="hljs language-csharp" lang="csharp">_windowManager.ShowMessageBox(<span class="hljs-string">"ä½ å¥½"</span>);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26c669b5cd5242bb9a16d1d996df4a49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=AKGjMjtb6NhNPPR%2BormWK%2BB9DZU%3D" alt="" loading="lazy"/></p>
<p>2ã€å¸¦æ ‡é¢˜çš„æ¶ˆæ¯æ¡†</p>
<pre><code class="hljs language-csharp" lang="csharp">_windowManager.ShowMessageBox(<span class="hljs-string">"æ“ä½œå®Œæˆ"</span>, <span class="hljs-string">"æç¤º"</span>);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee8a2ad8e84e41fba8d09a6b771b5b35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=jbANp6fTQ3QJdgUkG%2BTzPI5%2BV3E%3D" alt="" loading="lazy"/></p>
<p>3ã€å¸¦ç¡®è®¤å’Œå–æ¶ˆæŒ‰é’®çš„æ¶ˆæ¯æ¡†</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-keyword">var</span> result1 = _windowManager.ShowMessageBox(<span class="hljs-string">"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ"</span>, <span class="hljs-string">"ç¡®è®¤åˆ é™¤"</span>,
     MessageBoxButton.OKCancel, MessageBoxImage.Question);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73cc3bd4a9664e1ca709f0eb9fa75acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=jwHDIYoASBNFYhXTjVbUVxeR8EI%3D" alt="" loading="lazy"/></p>
<p>4ã€å¸¦æ˜¯/å¦/å–æ¶ˆæŒ‰é’®å’Œè­¦å‘Šå›¾æ ‡çš„æ¶ˆæ¯æ¡†</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> result2 = _windowManager.ShowMessageBox(<span class="hljs-string">"æ–‡ä»¶å·²ä¿®æ”¹ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ"</span>, <span class="hljs-string">"ä¿å­˜ç¡®è®¤"</span>,
    MessageBoxButton.YesNoCancel, MessageBoxImage.Warning);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b25b7572907d4a0a93b7c189109bb028~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=LOrE14q6ddNZkQQiM%2BCV%2BFWIe58%3D" alt="" loading="lazy"/></p>
<p>5ã€å¸¦è‡ªå®šä¹‰æŒ‰é’®æ ‡ç­¾çš„æ¶ˆæ¯æ¡† (ä½¿ç”¨YesNoCancelæŒ‰é’®ä»¥å±•ç¤ºæ›´å¤šé€‰é¡¹)</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> customButtons = <span class="hljs-keyword">new</span> Dictionary&lt;MessageBoxResult, <span class="hljs-built_in">string</span>&gt;
{
    { MessageBoxResult.Yes, <span class="hljs-string">"ç»§ç»­"</span> },
    { MessageBoxResult.No, <span class="hljs-string">"åœæ­¢"</span> },
    { MessageBoxResult.Cancel, <span class="hljs-string">"å–æ¶ˆ"</span> }
};
<span class="hljs-keyword">var</span> result3 = _windowManager.ShowMessageBox(<span class="hljs-string">"æ£€æµ‹åˆ°æ½œåœ¨é£é™©ï¼Œæ˜¯å¦ç»§ç»­æ“ä½œï¼Ÿ"</span>, <span class="hljs-string">"å®‰å…¨è­¦å‘Š"</span>,
    MessageBoxButton.YesNoCancel, MessageBoxImage.Exclamation, MessageBoxResult.No, MessageBoxResult.Cancel, customButtons);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f654cf2a8404a61b1e94d0b06738ffb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=pc%2F6uklVZRA8GRxMJZFfv54odGA%3D" alt="" loading="lazy"/></p>
<p>6ã€å¸¦æ–‡æœ¬å¯¹é½å’Œæµæ–¹å‘çš„æ¶ˆæ¯æ¡†</p>
<pre><code class="hljs language-csharp" lang="csharp">_windowManager.ShowMessageBox(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªä»å³åˆ°å·¦æ˜¾ç¤ºçš„æ¶ˆæ¯æ¡†æ–‡æœ¬"</span>, <span class="hljs-string">"RTLç¤ºä¾‹"</span>,
    MessageBoxButton.OK, MessageBoxImage.Information, MessageBoxResult.None, MessageBoxResult.None,
    <span class="hljs-literal">null</span>, FlowDirection.RightToLeft, TextAlignment.Center);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90c051e6b0ec479d9001f7546a17c390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=QXx3T8GvdX64oOoaR5HLJl2nE4Q%3D" alt="" loading="lazy"/></p>
<p>7ã€å®Œæ•´å‚æ•°ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-keyword">var</span> fullResult = _windowManager.ShowMessageBox(
     <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯æ¡†ç¤ºä¾‹ï¼ŒåŒ…å«äº†æ‰€æœ‰å‚æ•°çš„ä½¿ç”¨"</span>,
     <span class="hljs-string">"å®Œæ•´ç¤ºä¾‹"</span>,
     MessageBoxButton.OKCancel,
     MessageBoxImage.Information,
     MessageBoxResult.OK,
     MessageBoxResult.Cancel,
     <span class="hljs-literal">null</span>,
     FlowDirection.LeftToRight,
     TextAlignment.Left);
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/597b553aec334191b1168ba4c13ba031~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWluZ3VwdXA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763640194&amp;x-signature=N1HB%2FXiekgl9LgLuIVUAY6JnWpo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">æœ€å</h2>
<p>æœ¬æ–‡æ¢³ç†äº†Styletä¸­IWindowManagerçš„ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯ShowWindowã€ShowDialogä¸ShowMessageBoxå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´§æ‹‰æ‹‰æ•°æ®å·¥å‚ï¼šä»3k+å·¥å…·åˆ°AIæ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬å¦‚ä½•è®©é€ æ•°æ•ˆç‡ç¿»å€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571372478803820559</link>    <guid>https://juejin.cn/post/7571372478803820559</guid>    <pubDate>2025-11-12T02:06:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571372478803820559" data-draft-id="7571280402964922403" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´§æ‹‰æ‹‰æ•°æ®å·¥å‚ï¼šä»3k+å·¥å…·åˆ°AIæ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬å¦‚ä½•è®©é€ æ•°æ•ˆç‡ç¿»å€ï¼Ÿ"/> <meta itemprop="keywords" content="æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-11-12T02:06:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´§æ‹‰æ‹‰æ•°æ®å·¥å‚ï¼šä»3k+å·¥å…·åˆ°AIæ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬å¦‚ä½•è®©é€ æ•°æ•ˆç‡ç¿»å€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:06:17.000Z" title="Wed Nov 12 2025 02:06:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼šä»£ä¸½ è´§æ‹‰æ‹‰/æŠ€æœ¯ä¸­å¿ƒ/è´¨é‡ä¿éšœéƒ¨/å±¥çº¦ç»„</p>
</blockquote>
<p>å½“ä¸€ä¸ªæ•°æ®å¹³å°çš„å·¥å…·é‡çªç ´3000+ã€æ—¥å‡è°ƒç”¨è¶…50ä¸‡æ¬¡ï¼Œæ˜¯è¯¥åº†ç¥è§„æ¨¡åŒ–çš„èƒœåˆ©ï¼Œè¿˜æ˜¯è­¦æƒ•æ•ˆç‡çš„é™·é˜±ï¼Ÿ</p>
<p>è´§æ‹‰æ‹‰æ•°æ®å·¥å‚å°±æ›¾ç«™åœ¨è¿™æ ·çš„åå­—è·¯å£â€”â€”ä¾æ‰˜é«˜æ•ˆçš„"åè®®ç¼–ç¨‹"æ¶æ„ï¼Œæˆ‘ä»¬å®ç°äº†å·¥å…·çš„çˆ†å‘å¼å¢é•¿ï¼Œå´ä¹Ÿè¿æ¥äº†ç”¨æˆ·æœ€çœŸå®çš„æŠ±æ€¨ï¼š"å·¥å…·å¤ªå¤šé€‰ä¸å‡º""ä¸²æµç¨‹è¦è®°åŠå¤©""æ–°æ‰‹ä¸Šæ‰‹å¤ªè´¹åŠ²"ã€‚</p>
<p>äºæ˜¯ï¼Œä¸€åœºä»"å¹³å°åŒ–"åˆ°"AIæ™ºèƒ½åŒ–"çš„è·ƒè¿å°±æ­¤å¯åŠ¨ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±èŠèŠè¿™åœºè½¬å‹èƒŒåçš„ç—›ç‚¹ã€æ–¹æ¡ˆä¸æ”¶è·ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€3k+å·¥å…·çš„ç”œèœœçƒ¦æ¼ï¼šé«˜æ•ˆæ¶æ„ä¸‹çš„ä½¿ç”¨å›°å±€</h2>
<p>åœ¨èŠè½¬å‹å‰ï¼Œå¿…é¡»å…ˆè¯´è¯´æ”¯æ’‘æˆ‘ä»¬èµ°åˆ°ä»Šå¤©çš„æ ¸å¿ƒåº•æ°”â€”â€”"åè®®ç¼–ç¨‹"æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>å·¥å…·å¼€å‘è€…åªéœ€å†™Javaå·¥å…·ç±»ï¼ˆéµå¾ªç»Ÿä¸€è§„èŒƒï¼‰ï¼Œå¹³å°é€šè¿‡è‡ªç ”è§£æå¼•æ“è‡ªåŠ¨æå–åŠŸèƒ½æè¿°ã€è¾“å…¥è¾“å‡ºå‚æ•°ç­‰å…ƒä¿¡æ¯ï¼Œå‰ç«¯å†è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–ç•Œé¢ã€‚</p>
</blockquote>
<p>è¿™ä¸ªæ¨¡å¼çš„å¨åŠ›æœ‰å¤šå¼ºï¼Ÿå¼€å‘è€…ä¸ç”¨ç®¡å‰ç«¯äº¤äº’ã€æƒé™æ§åˆ¶è¿™äº›"æ‚äº‹"ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘å°±è¡Œï¼Œ<strong>å·¥å…·å¼€å‘æˆæœ¬ç›´æ¥é™ä½60%ä»¥ä¸Š</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bc4dbf418904fce8705fb9f3cca9d7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=CwN1EYRKuEZUhzLPIf5V%2FU6YhOw%3D" alt="" loading="lazy"/></p>
<p>é ç€è¿™å¥—æ‰“æ³•ï¼Œæ•°æ®å·¥å‚è¿…é€Ÿæˆä¸ºå†…éƒ¨é€ æ•°çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼šå·¥å…·æ€»é‡çªç ´3k+ï¼Œæ—¥å‡è°ƒç”¨è¶…50ä¸‡æ¬¡ã€‚ä½†è§„æ¨¡ä¸Šå»äº†ï¼Œæ–°é—®é¢˜ä¹Ÿæ‰¾ä¸Šé—¨äº†ï¼Œé›†ä¸­åœ¨ä¸¤ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š</p>
<h3 data-id="heading-1">1. å·¥å…·å¤ªå¤šï¼Œé€‰å¾—å‘æ„</h3>
<p>ä¸ºäº†é¼“åŠ±ææ•ˆï¼Œæˆ‘ä»¬é‡‡ç”¨"å…¨å±€æ ¸å¿ƒå·¥å…·+ä¸šåŠ¡çº¿è‡ªå®šä¹‰å·¥å…·"çš„è¿è¥ç­–ç•¥ï¼Œè¿™å°±å¯¼è‡´å¾ˆå¤šåŠŸèƒ½ç›¸ä¼¼çš„å·¥å…·å¹¶å­˜ã€‚æ¯”å¦‚"è´¦å·ä¿¡æ¯æŸ¥è¯¢"è¿™ä¸ªç®€å•åœºæ™¯ï¼Œå¹³å°ä¸Šå°±æœ‰3ä¸ªä¸»æµç‰ˆæœ¬ï¼š</p>
<ul>
<li>è´¦å·ä¸­å°ï¼šé€šç”¨ç‰ˆï¼ˆæ”¯æŒå…¨è´¦æˆ·ç±»å‹ï¼‰</li>
<li>å¸æœºä¸šåŠ¡çº¿ï¼šä¸“å±ç‰ˆï¼ˆä»…æ”¯æŒå¸æœºè´¦æˆ·ï¼‰</li>
<li>ç”¨æˆ·ä¸šåŠ¡çº¿ï¼šä¸“å±ç‰ˆï¼ˆä»…æ”¯æŒç”¨æˆ·è´¦æˆ·ï¼‰</li>
</ul>
<p>å®é™…ä½¿ç”¨ä¸­ï¼Œ70%çš„ç”¨æˆ·ä¼šä¼˜å…ˆé€‰æœ¬ä¸šåŠ¡çº¿å·¥å…·ï¼Œå¯¼è‡´é€šç”¨å·¥å…·å¤ç”¨ç‡ä¸è¶³30%ï¼›æ›´ç³Ÿçš„æ˜¯ï¼Œæ–°ç”¨æˆ·å¾—èŠ±<strong>3åˆ†é’Ÿå¯¹æ¯”æµ‹è¯•</strong>æ‰èƒ½æ‰¾åˆ°åˆé€‚çš„å·¥å…·ï¼Œæå‡äº†ä½¿ç”¨é—¨æ§›ã€‚</p>
<h3 data-id="heading-2">2. æ­¥éª¤å¤ªç¹ï¼Œæ“ä½œè€—æ—¶</h3>
<p>æˆ‘ä»¬çš„å·¥å…·å¤§å¤šæ˜¯"åŸå­åŒ–"çš„ï¼Œä¸€ä¸ªå·¥å…·åªå¹²ä¸€ä»¶äº‹ã€‚ä½†çœŸå®ä¸šåŠ¡åœºæ™¯å¾€å¾€éœ€è¦å¤šå·¥å…·ä¸²è”ï¼Œæ¯”å¦‚"ä¸‹å•å¹¶ç»™æŒ‡å®šå¸æœºæµè½¬è‡³å®Œå•"è¿™ä¸ªé«˜é¢‘æ“ä½œï¼Œç”¨æˆ·å¾—æ‰‹åŠ¨èµ°ä¸‰æ­¥ï¼š</p>
<ol>
<li>ç”¨"è·å–å¸æœºä¿¡æ¯"å·¥å…·æŸ¥è½¦å‹</li>
<li>ç”¨"ä¸‹å•"å·¥å…·å®Œæˆåˆ›å»º</li>
<li>ç”¨"è®¢å•æµè½¬"å·¥å…·æ›´æ–°çŠ¶æ€</li>
</ol>
<p>æ•´ä¸ªæµç¨‹å¹³å‡è¦5åˆ†é’Ÿï¼Œä¸­é—´è¿˜è¦æ‰‹åŠ¨è®°ç»“æœã€åˆ‡å·¥å…·ï¼Œä¸ä»…éº»çƒ¦ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚</p>
<h2 data-id="heading-3">äºŒã€å‡çº§ç›®æ ‡ï¼šè®©é€ æ•°åƒ"è¯´è¯"ä¸€æ ·ç®€å•</h2>
<p>é’ˆå¯¹è¿™äº›ç—›ç‚¹ï¼Œæˆ‘ä»¬æ˜ç¡®äº†AIå‡çº§çš„æ ¸å¿ƒæ–¹å‘ï¼š<strong>æ‰“é€ ä¸€ä¸ªèƒ½ç†è§£è‡ªç„¶è¯­è¨€ã€è‡ªä¸»è°ƒåº¦å·¥å…·çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</strong> ï¼Œå½»åº•æ”¹å˜ç”¨æˆ·ä¸æ•°æ®å·¥å‚çš„äº¤äº’æ–¹å¼ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¦å®ç°ä¸‰ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼Œè®©ç”¨æˆ·ä»"å·¥å…·æ“ä½œè€…"å˜æˆ"éœ€æ±‚æå‡ºè€…"ï¼š</p>
<ul>
<li><strong>ç²¾å‡†æ‡‚éœ€æ±‚</strong>ï¼šä¸ç”¨è®°å·¥å…·åï¼Œç”¨æ—¥å¸¸è¯æè¿°éœ€æ±‚å°±è¡Œï¼ˆæ¯”å¦‚"æŸ¥ä¸€ä¸‹å¸æœºå¼ ä¸‰çš„è´¦å·ä¿¡æ¯å¹¶å±¥çº¦å®Œå•"ï¼‰</li>
<li><strong>æ™ºèƒ½é…å·¥å…·</strong>ï¼šç³»ç»Ÿè‡ªåŠ¨é€‰æœ€ä¼˜å·¥å…·ï¼Œå¤šæ­¥éª¤åœºæ™¯è‡ªåŠ¨ä¸²è”ï¼Œä¸ç”¨æ‰‹åŠ¨ç»„åˆ</li>
<li><strong>è‡ªåŠ¨è·‘æµç¨‹</strong>ï¼šå‚æ•°ä¼ é€’ã€å·¥å…·è°ƒç”¨ã€ç»“æœæ•´åˆå…¨è‡ªåŠ¨åŒ–ï¼Œç›´æ¥ç»™æœ€ç»ˆç»“æœ</li>
</ul>
<p>æˆ‘ä»¬çš„æ„¿æ™¯å¾ˆç›´æ¥ï¼š <strong>"æ‰€æƒ³å³æ‰€å¾—ï¼Œæ‰€é€ çš†èƒ½æˆ"</strong> ã€‚åˆæœŸç›®æ ‡æ›´æ˜¯æ˜ç¡®ï¼šé€ æ•°æ•ˆç‡æå‡50%ä»¥ä¸Šï¼Œæ–°ç”¨æˆ·ä¸Šæ‰‹æ—¶é—´ç¼©çŸ­åˆ°1åˆ†é’Ÿå†…ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆï¼šAI+æ•°æ®å·¥å‚çš„ä¸‰é‡ååŒè½åœ°</h2>
<h3 data-id="heading-5">3.1 æŠ€æœ¯å†³ç­–ï¼šä»ç†è®ºæœ€ä¼˜åˆ°è½åœ°å¯è¡Œ</h3>
<p>æ™ºèƒ½ä½“çš„æ ¸å¿ƒæŠ€æœ¯é€‰å‹ï¼Œæˆ‘ä»¬å›´ç»•ä¸šåŠ¡ç‰¹æ€§åšäº†å¤šè½®è¯„ä¼°ã€‚å¸¸è§çš„ä¸LLMç»“åˆæ–¹æ¡ˆæœ‰ä¸‰ç§ï¼šRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ã€MCPï¼ˆæ‰§è¡Œå¼•æ“ï¼‰å’ŒFine-tuningï¼ˆæ¨¡å‹å¾®è°ƒï¼‰ã€‚</p>
<p>ä»ç†è®ºä¸Šçœ‹ï¼ŒFine-tuningä¼¼ä¹æ˜¯æœ€ä¼˜è§£â€”â€”æ•°æ®å·¥å‚è¦†ç›–è´§è¿ã€å°æ‹‰å‡ºè¡Œã€å›½é™…åŒ–ç­‰å…¨ä¸šåŠ¡çº¿ï¼Œæ²‰æ·€äº†å¤§é‡ç‰¹æœ‰é¢†åŸŸçŸ¥è¯†ï¼Œå¾®è°ƒèƒ½è®©æ¨¡å‹æ·±åº¦èåˆè¿™äº›çŸ¥è¯†ï¼Œå‡å°‘ä¸Šä¸‹æ–‡è¾“å…¥é‡ï¼Œæå‡ç¨³å®šæ€§ã€‚</p>
<p>ä½†æ—©æœŸç®€æ˜“å°è¯•åï¼Œæˆ‘ä»¬å‘ç°äº†å®é™…éšœç¢ï¼šå¾®è°ƒéœ€è¦å¤§é‡æ ‡æ³¨æ•°æ®ï¼Œä¸”å¯¹ç®—æ³•å›¢é˜Ÿçš„æŠ€æœ¯èƒ½åŠ›è¦æ±‚æé«˜ï¼ŒåŒæ—¶æŒç»­è¿­ä»£çš„æˆæœ¬ä¹Ÿéš¾ä»¥æ‰¿å—ã€‚ç»¼åˆè½åœ°éš¾åº¦ä¸æ•ˆæœåé¦ˆï¼Œæˆ‘ä»¬æœ€ç»ˆç¡®å®šäº† <strong>â€œLLM+RAG+MCPâ€çš„ååŒè·¯å¾„</strong>ï¼Œå…¼é¡¾æ•ˆæœã€æˆæœ¬ä¸è½åœ°æ•ˆç‡ã€‚</p>
<h3 data-id="heading-6">3.2 æŠ€æœ¯æ–¹æ¡ˆï¼šä¸‰å¤§æ¨¡å—æ„ç­‘æ™ºèƒ½ä½“èƒ½åŠ›</h3>
<p>æˆ‘ä»¬å°†æ™ºèƒ½ä½“æ‹†è§£ä¸ºâ€œå¤§è„‘ï¼ˆLLMï¼‰-çŸ¥è¯†åº“ï¼ˆRAGï¼‰-æ‰‹è„šï¼ˆMCPï¼‰â€ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œåˆ†åˆ«è´Ÿè´£â€œç†è§£å†³ç­–â€â€œçŸ¥è¯†å‚¨å¤‡â€â€œæ‰§è¡Œè½åœ°â€ï¼Œå½¢æˆå®Œæ•´å·¥ä½œæµã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1f66e63fa8b4a7daaa8ba3779f0d252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=zN%2BsUd4%2BP4VMhzj13z0lz3lz0os%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">3.2.1 LLMï¼šæ™ºèƒ½ä½“çš„â€œå†³ç­–å¤§è„‘â€</h4>
<p>LLMæ˜¯æ™ºèƒ½ä½“çš„æ ¸å¿ƒå†³ç­–å±‚ï¼Œä½¿ç”¨åˆ°LLMçš„å…±æœ‰6å¤„ï¼Œå‡ºäºæˆæœ¬ä¸è°ƒä¼˜æ•ˆæœåšäº†å¦‚ä¸‹ç»„åˆä¸é…ç½®ï¼ˆç²¾é€‰3ä¸ªå±•ç¤ºï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13d498042d0c40f291357121e167093d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=FrB3C63EgMES2AmvEf6YYtYT4MU%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">3.2.2 RAGï¼šæ™ºèƒ½ä½“çš„â€œçŸ¥è¯†å‚¨å¤‡åº“â€</h4>
<p>LLM å…·å¤‡å¼ºå¤§çš„é€šç”¨èƒ½åŠ›ï¼Œä½†å¯¹æˆ‘ä»¬å†…éƒ¨ 3000 + å·¥å…·çš„å…·ä½“ä¿¡æ¯ â€œä¸€æ— æ‰€çŸ¥â€ã€‚è‹¥ç›´æ¥è¾“å…¥å…¨é‡å·¥å…·ä¿¡æ¯ï¼Œä¼šå¯¼è‡´ä¸Šä¸‹æ–‡è¿‡è½½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡ RAG æŠ€æœ¯æ„å»º â€œç²¾å‡†æ£€ç´¢ - é«˜æ•ˆèµ‹èƒ½â€ çš„çŸ¥è¯†åº“ä½“ç³»ï¼ŒåŠ©åŠ›æ™ºèƒ½ä½“ç²¾å‡† â€œè®¤çŸ¥â€ æ‰€éœ€å·¥å…·ã€‚</p>
<p>å®è·µä¸­ï¼Œæˆ‘ä»¬é€‰ç”¨ bge_base_zh_1.5 ä½œä¸º Embedding æ¨¡å‹ï¼Œä»¥é€‚é…ä¸­æ–‡è¯­ä¹‰ç†è§£åœºæ™¯ï¼›åŒæ—¶ï¼Œä¸ºæå‡æ£€ç´¢çš„ç²¾åº¦ä¸å…¨é¢æ€§ï¼Œæ­å»ºäº†åŒå±‚çŸ¥è¯†åº“ç­›é€‰ç­–ç•¥ï¼Œå¹¶å°†å…¶ä¸å›ºå®šåŸå­å·¥å…·åˆ—è¡¨ç»„åˆï¼Œæœ€ç»ˆå½¢æˆ toolListç»™åˆ°LLMä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4f53877a952443b8546e0d3c8ae4a61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=iqw4Ihwf3tHrg38zrItumGLOBvw%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>å…¨é‡å·¥å…·è¯¦æƒ…çŸ¥è¯†åº“</strong>ï¼šæ•°æ®ç›´æ¥åŒæ­¥å¹³å°å·¥å…·æ•°æ®åº“ï¼Œç»†åˆ†ä¸ºâ€œçº¿ä¸Šâ€â€œçº¿ä¸‹â€ä¸¤ä¸ªå­åº“â€”â€”çº¿ä¸Šåº“å¯¹åº”ç”Ÿäº§ç¯å¢ƒå·¥å…·ï¼Œçº¿ä¸‹åº“å¯¹åº”æµ‹è¯•ç¯å¢ƒå·¥å…·ï¼Œé¿å…æ™ºèƒ½ä½“è¯¯è°ƒç”¨æµ‹è¯•å·¥å…·å½±å“çº¿ä¸Šä¸šåŠ¡ï¼Œä¿éšœæ‰§è¡Œå®‰å…¨æ€§ã€‚</li>
</ol>
<p>å…·ä½“é…ç½®ä¸åˆ†æ®µä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97aa3aebd49240b4ad3ff99c42da5aa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=6e%2BriJkIPo57AXC09Ie8kq%2BZi2M%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li><strong>è‡ªç„¶è¯­è¨€ä¸å·¥å…·æ˜ å°„çŸ¥è¯†åº“</strong>ï¼šäººå·¥ç»´æŠ¤å¤šè¯­ä¹‰æ˜ å°„å…³ç³»ï¼Œè§£å†³â€œç”¨æˆ·è¡¨è¿°â‰ å·¥å…·æè¿°â€çš„åŒ¹é…éš¾é¢˜ã€‚æ¯”å¦‚â€œä¸‹å•â€â€œå¼€å•â€â€œåˆ›å»ºè®¢å•â€ç­‰ä¸åŒè¯´æ³•ï¼Œå‡æ˜ å°„åˆ°åŒä¸€å·¥å…·ï¼Œå¤§å¹…æå‡æ¨¡ç³Šéœ€æ±‚çš„åŒ¹é…å‡†ç¡®ç‡ã€‚</li>
</ol>
<p>å…·ä½“é…ç½®ä¸åˆ†æ®µä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10109254d5fb4aa3ba78f23fe5e012c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=jZll3THBqBe2PxPi4hfBGz7%2FMPA%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">3.2.3 MCPï¼šæ™ºèƒ½ä½“çš„â€œæ‰§è¡Œæ‰‹è„šâ€</h4>
<p>å·¥å…·ç»„åˆæ–¹æ¡ˆç¡®å®šåï¼Œå°±éœ€è¦MCPï¼ˆæ‰§è¡Œå¼•æ“ï¼‰è´Ÿè´£â€œè½åœ°æ‰§è¡Œâ€ï¼Œæ ¸å¿ƒè§£å†³â€œæŒ‰åºæ‰§è¡Œã€å‚æ•°ä¼ é€’ã€å¤±è´¥å¤„ç†ã€ç»“æœè§£æâ€å››å¤§é—®é¢˜ï¼Œè®©æ™ºèƒ½ä½“â€œä¼šç”¨â€å·¥å…·ã€‚</p>
<p>æ­¤å¤„toolä»…æœ‰ä¸€ä¸ªï¼ŒåŠŸèƒ½æ˜¯å•ä¸ªå·¥å…·è¿è¡Œï¼Œå…¶æ‰§è¡Œé€»è¾‘ä¾èµ–äºpromptï¼Œpromptå¤§çº²è®¾è®¡ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä»»åŠ¡å®šä½</strong>ï¼šæŒ‰å·¥å…·åºåˆ—ä¾æ¬¡æ‰§è¡Œï¼Œä¿éšœå‰åºç»“æœå‘åç»­ä¼ é€’ï¼Œå¤±è´¥è‡ªåŠ¨é‡è¯•ï¼›æå–æ‰§è¡Œç»“æœå¹¶åŒ¹é…ç”¨æˆ·è¯‰æ±‚ï¼Œç”¨è‡ªç„¶è¯­è¨€å‘ˆç°ã€‚</li>
<li><strong>æ ¸å¿ƒæ‰§è¡Œè§„åˆ™</strong>ï¼š - é¡ºåºæ‰§è¡Œï¼šä¸¥æ ¼éµå¾ªå·¥å…·åˆ—è¡¨é¡ºåºï¼Œå‰åºå·¥å…·æ‰§è¡ŒæˆåŠŸæ˜¯ååºæ‰§è¡Œçš„å‰æï¼› - å‚æ•°å…³è”ï¼šåŠ¨æ€å‚æ•°ä»å†å²æ‰§è¡Œç»“æœä¸­è‡ªåŠ¨æå–ï¼Œå›ºå®šå‚æ•°ä¿æŒé¢„è®¾å€¼ä¸å˜ï¼› - å¤±è´¥å¤„ç†ï¼šæ‰§è¡Œå¤±è´¥è§¦å‘é‡è¯•æœºåˆ¶ï¼ˆé»˜è®¤3æ¬¡ï¼‰ï¼Œé‡è¯•å¤±è´¥åˆ™ç»ˆæ­¢æµç¨‹å¹¶è®°å½•å¤±è´¥çŠ¶æ€ä¸åŸå› ã€‚</li>
<li><strong>ç»“æœè§£æè§„èŒƒ</strong>ï¼šæ ¹æ®æ‰§è¡ŒçŠ¶æ€ç ï¼ˆå¦‚retå€¼ï¼‰åˆ¤æ–­æˆè´¥ï¼›æˆåŠŸåˆ™ç­›é€‰æ ¸å¿ƒä¿¡æ¯åˆ†ç‚¹å‘ˆç°ï¼Œå¤±è´¥åˆ™æ˜ç¡®æ ‡æ³¨çŠ¶æ€ç ã€å¤±è´¥ç¯èŠ‚åŠå¯èƒ½åŸå› ï¼Œä¾¿äºç”¨æˆ·æ’æŸ¥ã€‚</li>
</ul>
<h2 data-id="heading-10">å››ã€é˜¶æ®µæ€§æˆæœï¼šä¸Šçº¿ä¸‰æœˆï¼Œæ•ˆç‡ä¸å£ç¢‘åŒä¸°æ”¶</h2>
<p>ä»Šå¹´8æœˆAIæ™ºèƒ½ä½“æ­£å¼ä¸Šçº¿ï¼Œä½œä¸ºå†…éƒ¨å·¥å…·çš„æ™ºèƒ½åŒ–å‡çº§å°è¯•ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„æ¨å¹¿ä¸è¿­ä»£ï¼Œåœ¨æ ¸å¿ƒæ•ˆç‡æŒ‡æ ‡ä¸ç”¨æˆ·å£ç¢‘æ–¹é¢å·²å–å¾—æ˜¾è‘—æˆæ•ˆï¼ŒéªŒè¯äº†å‡çº§æ–¹å‘çš„å¯è¡Œæ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be704eafbb134285b0a6eb90522d2dee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518191&amp;x-signature=W1ynp356ITusJ312zFBXhobXtWI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">4.1 æ ¸å¿ƒæ•°æ®ï¼šç”¨æˆ·æ¸—é€è‰¯å¥½ï¼Œæ•ˆç‡æå‡æ˜¾è‘—</h3>
<p>ä¸Šçº¿è‡³ä»Šï¼Œæ™ºèƒ½ä½“çš„ç”¨æˆ·æ¥çº³åº¦é€æ­¥æå‡ï¼Œæ ¸å¿ƒæ•ˆç‡æŒ‡æ ‡è¾¾åˆ°é¢„æœŸç›®æ ‡ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·æ¸—é€</strong>ï¼šç´¯è®¡å¸å¼•500+å†…éƒ¨ç”¨æˆ·ä½¿ç”¨ï¼Œæ¶µç›–æµ‹è¯•ã€äº§å“ã€å¼€å‘ç­‰å…³é”®æŠ€æœ¯å²—ä½ï¼›</li>
<li><strong>è°ƒç”¨è¡¨ç°</strong>ï¼šå½“å‰æ”¯æŒå·¥å…·100+ï¼Œç´¯è®¡è°ƒç”¨æ¬¡æ•°3k+ï¼Œå—é™äºéƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯å°šæœªå®Œå…¨è½¬å˜å’Œæ”¯æŒå·¥å…·æ•°é‡æœ‰é™ï¼Œä½†é«˜é¢‘ç”¨æˆ·çš„å‘¨å‡è°ƒç”¨é¢‘æ¬¡è¾¾10æ¬¡ï¼Œä½¿ç”¨ç²˜æ€§è¾ƒé«˜ï¼›</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡åœºæ™¯çš„é€ æ•°æ•ˆç‡æå‡æ•ˆæœæ˜æ˜¾ï¼Œä»¥â€œä¸‹å•å¹¶æµè½¬è‡³å®Œå•â€ä¸ºä¾‹ï¼Œæ“ä½œæ—¶é—´ä»åŸæœ‰çš„5åˆ†é’Ÿç¼©çŸ­è‡³1.5åˆ†é’Ÿå·¦å³ï¼Œæ•ˆç‡æå‡70%ï¼›</li>
<li><strong>ä½¿ç”¨é—¨æ§›</strong>ï¼šæ–°ç”¨æˆ·ä¸Šæ‰‹é€‚åº”æ—¶é—´ä»åŸæœ‰çš„3åˆ†é’Ÿå‹ç¼©è‡³1åˆ†é’Ÿå†…ï¼Œè‡ªç„¶è¯­è¨€äº¤äº’æ–¹å¼æœ‰æ•ˆé™ä½äº†å·¥å…·ä½¿ç”¨çš„å­¦ä¹ æˆæœ¬ï¼›</li>
</ul>
<h3 data-id="heading-12">4.2 ç”¨æˆ·åé¦ˆï¼šè·¨å²—ä½è®¤å¯ï¼Œç—›ç‚¹è§£å†³æ˜ç¡®</h3>
<p>å°½ç®¡å½“å‰ä½¿ç”¨è§„æ¨¡ä»åœ¨æ‹“å±•ï¼Œä½†æ™ºèƒ½ä½“ç²¾å‡†è§£å†³äº†ç”¨æˆ·çš„æ ¸å¿ƒç—›ç‚¹ï¼Œè·å¾—äº†å®é™…ä½¿ç”¨è€…çš„å¹¿æ³›è®¤å¯ï¼Œç§¯ç´¯äº†ä¸å°‘æ­£é¢åé¦ˆï¼š</p>
<ul>
<li><strong>ç ”å‘å²—ä½</strong>ï¼šâ€œè¿™ä¸ªå¤ªç‰›äº†ï¼Œä¸ç”¨å»æ•°æ®å·¥å‚æ‰¾å·¥å…·äº†ï¼Œç ”å‘è”è°ƒçš„æ—¶å€™å¾ˆå—ç”¨â€â€”â€”æŸå¼€å‘åé¦ˆï¼›</li>
<li><strong>äº§å²—ä½</strong>ï¼šâ€œè¯´å®è¯ï¼Œæœ‰AI*æ•°æ®å·¥å‚ï¼Œäº§å“éªŒæ”¶è½»æ¾å¤šäº†â€â€”â€”æŸäº§å“åé¦ˆï¼›</li>
<li><strong>æµ‹è¯•å²—ä½</strong>ï¼šâ€œå¤ªå¥½ç”¨äº†ï¼Œæµ‹è¯•ç»å¸¸è¦æ‰¹é‡é€ æ•°ï¼Œå’Œå®ƒè¯´ï¼Œå®ƒå¯ä»¥ä¸€æ¬¡å®Œæˆï¼ŒåŸæ¥æˆ‘è¿˜å¾—åœ¨é¡µé¢ç‚¹å¤šæ¬¡â€â€”â€”æŸæµ‹è¯•åé¦ˆã€‚</li>
</ul>
<h3 data-id="heading-13">4.3 æˆæœä»·å€¼ï¼šéªŒè¯æ–¹å‘ï¼Œæ²‰æ·€ç»éªŒ</h3>
<p>æ­¤æ¬¡é˜¶æ®µæ€§æˆæœçš„æ ¸å¿ƒä»·å€¼ï¼Œä¸ä»…åœ¨äºæ•ˆç‡æ•°æ®çš„æå‡ï¼Œæ›´åœ¨äºéªŒè¯äº†â€œAI+æ•°æ®å·¥å‚â€æ¨¡å¼çš„å¯è¡Œæ€§ï¼šä¸€æ–¹é¢ï¼Œé€šè¿‡æ™ºèƒ½åŒ–æ‰‹æ®µè§£å†³äº†å¹³å°è§„æ¨¡åŒ–åçš„æ ¸å¿ƒç—›ç‚¹ï¼Œä¸ºåç»­æ¨å¹¿ç§¯ç´¯äº†çœŸå®ä½¿ç”¨æ¡ˆä¾‹ï¼›å¦ä¸€æ–¹é¢ï¼ŒåŸºäºç”¨æˆ·åé¦ˆæ²‰æ·€äº†æ¨¡å‹è°ƒä¼˜ã€äº¤äº’è®¾è®¡çš„ç»éªŒï¼Œä¸ºè¿›ä¸€æ­¥æå‡è°ƒç”¨é¢‘æ¬¡ã€æ‰©å¤§ä½¿ç”¨èŒƒå›´å¥ å®šäº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-14">äº”ã€æœªæ¥è§„åˆ’ï¼šåœ¨è¿­ä»£ä¸­æŒç»­ç²¾è¿›</h2>
<p>AIæ™ºèƒ½ä½“çš„åˆæ­¥è½åœ°éªŒè¯äº†æ–¹å‘çš„å¯è¡Œæ€§ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå‘ç°äº†éœ€è¦æŒç»­ä¼˜åŒ–çš„æ ¸å¿ƒç—›ç‚¹ã€‚åŸºäºå½“å‰åé¦ˆï¼Œåç»­å°†èšç„¦é—®é¢˜è§£å†³ä¸èƒ½åŠ›å‡çº§ï¼Œç¨³æ­¥æ¨è¿›æ™ºèƒ½åŒ–æ·±åŒ–ã€‚</p>
<h3 data-id="heading-15">5.1 ç°å­˜æ ¸å¿ƒç—›ç‚¹</h3>
<p>ç»“åˆç”¨æˆ·ä½¿ç”¨æ•°æ®ä¸åé¦ˆæ”¶é›†ï¼Œç›®å‰ä¸»è¦å­˜åœ¨ä¸¤ç±»å¾…è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯åç»­ä¼˜åŒ–çš„æ–¹å‘ï¼š</p>
<ul>
<li><strong>è¡¨è¿°ä¹ æƒ¯å·®å¼‚å¯¼è‡´çš„é€‚é…é—®é¢˜</strong>ï¼šä¸åŒå²—ä½ã€ä¸åŒä½¿ç”¨ç»éªŒçš„ç”¨æˆ·ï¼Œå¯¹åŒä¸€ä¸šåŠ¡åœºæ™¯çš„è¡¨è¿°å­˜åœ¨å·®å¼‚ã€‚ä»¥â€œå°bä¸‹å•â€åœºæ™¯ä¸ºä¾‹ï¼Œç”¨æˆ·å¯èƒ½è¡¨è¿°ä¸ºâ€œå°bä¸‹å•â€â€œè´§è¿ä¸‹å•â€â€œAPPåˆ›å»ºå°bè®¢å•â€ç­‰å¤šç§å½¢å¼ã€‚å°½ç®¡å½“å‰é€šè¿‡æŒç»­ä¸°å¯ŒRAGçŸ¥è¯†åº“å·²å®ç°é—®é¢˜å¯æ§ï¼Œä½†çŸ¥è¯†åº“æ›´æ–°å­˜åœ¨ä¸€å®šåç½®æ€§ï¼Œæœªèƒ½ä»æºå¤´å‡å°‘æ­§ä¹‰ã€‚</li>
<li><strong>LLM</strong> <strong>ä¸Šä¸‹æ–‡è¿‡è½½ä¸å¹»è§‰é—®é¢˜</strong>ï¼šæ•°æ®å·¥å‚å·¥å…·è¦†ç›–è´§æ‹‰æ‹‰è´§è¿ã€å°æ‹‰å‡ºè¡Œã€å›½é™…åŒ–ç­‰å…¨ä¸šåŠ¡çº¿ï¼Œä¸ºä¿éšœLLMå¯¹ä¸šåŠ¡åœºæ™¯çš„ç†è§£ç²¾åº¦ï¼Œéœ€åœ¨ä¸Šä¸‹æ–‡ä¸­å¤–æŒ‚å¤§é‡ä¸šåŠ¡çŸ¥è¯†ä¸å·¥å…·ä¿¡æ¯ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡å†…å®¹è¿‡è½½ã€‚è¿™ä¸€é—®é¢˜ç›´æ¥å¼•å‘LLMå¹»è§‰ç°è±¡é¢‘å‘ï¼ˆå¦‚å·¥å…·é€‰é”™ã€ç”Ÿæˆé€»è¾‘æœ‰è¯¯çš„æ‰§è¡Œåºåˆ—ç­‰ï¼‰ï¼Œå•çº¯é€šè¿‡ç²¾ç®€ä¸Šä¸‹æ–‡å†…å®¹å·²éš¾ä»¥æœ‰æ•ˆç¼“è§£ã€‚</li>
</ul>
<h3 data-id="heading-16">5.2 åç»­ä¼˜åŒ–è·¯å¾„</h3>
<p>é’ˆå¯¹ä¸Šè¿°ç—›ç‚¹ï¼Œæˆ‘ä»¬åˆ¶å®šäº†æ˜ç¡®çš„åˆ†é˜¶æ®µä¼˜åŒ–è®¡åˆ’ï¼Œå…¼é¡¾çŸ­æœŸé—®é¢˜è§£å†³ä¸é•¿æœŸèƒ½åŠ›æå‡ï¼š</p>
<h4 data-id="heading-17">1. å‰ç½®åŒ–å¼•å¯¼ï¼Œé™ä½è¡¨è¿°æ­§ä¹‰</h4>
<p>ä¸ºè§£å†³è¡¨è¿°å·®å¼‚é—®é¢˜ï¼Œåç»­å°†ä»â€œåç½®çŸ¥è¯†åº“è¡¥å……â€è½¬å‘â€œå‰ç½®è¾“å…¥å¼•å¯¼â€ã€‚è®¡åˆ’åœ¨äº¤äº’ç•Œé¢å¢åŠ åœºæ™¯åŒ–å¼•å¯¼æ¨¡å—ï¼šåŸºäºå†å²è°ƒç”¨æ•°æ®æ¢³ç†é«˜é¢‘ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºã€è´¦å·æŸ¥è¯¢ã€çŠ¶æ€æµè½¬ç­‰ï¼‰ï¼Œä¸ºæ¯ä¸ªåœºæ™¯é…ç½®æ ‡å‡†åŒ–è¯æœ¯æ¨¡æ¿ä¸å…³é”®è¯æç¤ºã€‚ç”¨æˆ·è¾“å…¥æ—¶ï¼Œç³»ç»Ÿå¯æ ¹æ®åˆæ­¥è¯­ä¹‰è¯†åˆ«æ¨èå¯¹åº”åœºæ™¯æ¨¡æ¿ï¼Œç”¨æˆ·ä»…éœ€è¡¥å……å…³é”®å‚æ•°å³å¯å®Œæˆéœ€æ±‚æäº¤ï¼Œä»æºå¤´é™ä½æ­§ä¹‰è¡¨è¿°æ¦‚ç‡ã€‚</p>
<h4 data-id="heading-18"><strong>2. èŒè´£æ‹†åˆ† + åœºæ™¯å›ºåŒ–ï¼Œä»æ¶æ„å±‚é¢é™ä½å¹»è§‰æ¦‚ç‡</strong></h4>
<p>é’ˆå¯¹ä¸Šä¸‹æ–‡è¿‡è½½å¼•å‘çš„å¹»è§‰é—®é¢˜ï¼Œé‡‡ç”¨ â€œç°æœ‰å¹³å°äº¤äº’æ”¹é€  + æ™ºèƒ½ä½“èŒè´£æ‹†åˆ†â€ åŒè½®é©±åŠ¨ç­–ç•¥ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ç°æœ‰å¹³å°äº¤äº’æ”¹é€ </strong>ï¼šå°†ç°æœ‰å¹³å°æ‰§è¡Œåº•å±‚å‡çº§ä¸ºæ™ºèƒ½ä½“æ‰§è¡Œæ¨¡å¼ï¼Œå‰ç«¯é™¤äº†ç»“æœå±•ç¤ºé‡‡ç”¨æ™ºèƒ½ä½“è¾“å‡ºæ•ˆæœï¼Œå…¶ä»–ä¸å˜ã€‚è¯¥æ–¹å¼æ—¢èƒ½é€‚é…ç”¨æˆ·ç°æœ‰ä½¿ç”¨ä¹ æƒ¯ï¼Œåˆèƒ½è§„é¿ LLM åŠ¨æ€ç»„è£…å·¥å…·å¸¦æ¥çš„å¹»è§‰é£é™©ã€‚</li>
<li><strong>æ™ºèƒ½ä½“èŒè´£æ‹†åˆ†</strong>ï¼šå½“å‰æ™ºèƒ½ä½“æ ¸å¿ƒå†³ç­–ä¾èµ– â€œå·¥å…·ç»„è£…â€ å•ä¸€ LLMï¼Œå¯¼è‡´å…¶åŒæ—¶æ‰¿è½½ä¸šåŠ¡çŸ¥è¯†å­˜å‚¨ã€å·¥å…·åŒ¹é…åˆ¤æ–­ã€æ‰§è¡Œåºåˆ—ç”Ÿæˆç­‰å¤šé‡èŒè´£ã€‚åç»­å°†æ ¸å¿ƒèŒè´£æ‹†åˆ†ä¸º â€œä¸šåŠ¡çŸ¥è¯†è§£æâ€â€œå·¥å…·åŒ¹é…ç­›é€‰â€â€œæ‰§è¡Œåºåˆ—ç”Ÿæˆâ€ ä¸‰ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œé€šè¿‡ â€œè½»é‡åŒ– LLM + ä¸“ç”¨ RAG çŸ¥è¯†åº“â€ ååŒå®ç°ï¼ˆå¦‚ä¸“ç”¨ RAG æ‰¿è½½ä¸šåŠ¡çŸ¥è¯†ã€ç‹¬ç«‹ LLM è´Ÿè´£å·¥å…·åŒ¹é…ï¼‰ã€‚æ­¤ä¸¾å¯æ˜¾è‘—é™ä½å•ä¸ªæ¨¡å‹çš„ä¸Šä¸‹æ–‡è´Ÿè½½ï¼Œä»æ¶æ„å±‚é¢å‡å°‘å¹»è§‰å‘ç”Ÿæ¦‚ç‡ã€‚</li>
</ul>
<h4 data-id="heading-19">3. é•¿æœŸæŠ€æœ¯æ¢ç´¢ï¼šå¾®è°ƒè·¯å¾„æŒç»­éªŒè¯</h4>
<p>å°½ç®¡åˆæœŸå› æ•°æ®ã€æˆæœ¬ç­‰å› ç´ æ”¾å¼ƒäº†Fine-tuningæ–¹æ¡ˆï¼Œä½†éšç€ä¸šåŠ¡æ•°æ®çš„ç§¯ç´¯ä¸æŠ€æœ¯æˆæœ¬çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å°†æŒç»­å°èŒƒå›´éªŒè¯å¾®è°ƒå¯è¡Œæ€§ã€‚è®¡åˆ’é€‰å–é«˜é¢‘ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•å…¨é“¾è·¯ç›¸å…³å·¥å…·ï¼‰ï¼Œæ„å»ºä¸“å±å¾®è°ƒæ•°æ®é›†ï¼Œæ¢ç´¢â€œåŸºç¡€æ¨¡å‹+åœºæ™¯å¾®è°ƒâ€çš„æ··åˆæ¨¡å¼ï¼Œè¿›ä¸€æ­¥æå‡æ¨¡å‹å¯¹ç‰¹å®šåœºæ™¯çš„ç†è§£ç²¾åº¦ä¸å†³ç­–ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-20">5.3 è½¬å‹æ„Ÿæ‚Ÿï¼šAIè½åœ°æ˜¯åœºé•¿æœŸä¿®è¡Œ</h3>
<p>åœ¨æ™ºèƒ½ä½“è½åœ°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ·±åˆ»ä½“ä¼šåˆ°ï¼šLLMçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶æ³›åŒ–èƒ½åŠ›ï¼Œä½†ç›¸è¾ƒäºä¼ ç»Ÿå·¥ç¨‹ä»£ç çš„å¼ºå¯æ§æ€§ï¼Œå®ƒæ›´åƒä¸€ä¸ªâ€œéœ€è¦æŒç»­è°ƒæ•™çš„ä¼™ä¼´â€ã€‚AIèµ‹èƒ½å¹¶éä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯å¾ªåºæ¸è¿›çš„è¿­ä»£è¿‡ç¨‹â€”â€”æ—¢è¦æ¥å—åˆæœŸçš„ä¸å®Œç¾ï¼Œé€šè¿‡å®é™…åœºæ™¯åé¦ˆæŒç»­è°ƒä¼˜ï¼›ä¹Ÿè¦ä¿æŒå¯¹æ–°æŠ€æœ¯çš„æ•æ„Ÿåº¦ï¼ŒåŠæ—¶å°†æˆç†Ÿçš„æŠ€æœ¯æ–¹æ¡ˆèå…¥ç°æœ‰ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼]]></title>    <link>https://juejin.cn/post/7571402480967368740</link>    <guid>https://juejin.cn/post/7571402480967368740</guid>    <pubDate>2025-11-12T06:49:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571402480967368740" data-draft-id="7564718467829465088" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼"/> <meta itemprop="keywords" content="åç«¯,Java,MyBatis"/> <meta itemprop="datePublished" content="2025-11-12T06:49:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:49:38.000Z" title="Wed Nov 12 2025 06:49:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»<code>MyBatis-Plus</code>ï¼</p>
<p><strong>ä»€ä¹ˆæ˜¯ MyBatis-Plusï¼Ÿ</strong></p>
<p>ç®€å•æ¥è¯´ï¼Œ<code>MyBatis-Plus</code>æ˜¯<code>MyBatis</code>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨MyBatisçš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œ<strong>æ—¢èƒ½å¤Ÿç®€åŒ–å¼€å‘ï¼Œåˆèƒ½å¤Ÿæé«˜æ•ˆç‡</strong>ï¼</p>
<p>æˆ‘ä»¬å°±ä»æœ€ç®€å•çš„å¼€å§‹å§ï¼åªéœ€è¦å‡ è¡Œä»£ç å°±èƒ½æå®šå¸¸è§çš„ CRUD æ“ä½œã€‚</p>
<p>å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œå¯ä»¥èƒ½å¿«é€Ÿçš„å­¦ä¹ <code>MyBatis-Plus</code>ï¼Œå¦‚æœä½ æ˜¯æœ‰ç»éªŒçš„å¼€å‘ï¼Œä¹Ÿå¯ä»¥å·©å›ºä¸€ä¸‹ç›¸å…³çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-0">1. æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨ pom.xml ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MyBatis-Plus Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Lombok ç®€åŒ–å®ä½“ç±»å¼€å‘ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æº</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># æ›¿æ¢æˆä½ çš„æ•°æ®åº“ä¿¡æ¯</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis_plus_demo?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>

<span class="hljs-comment"># MyBatis-Plus é…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-comment"># æ‰“å° SQL æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨è½¬æ¢</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-comment"># é€»è¾‘åˆ é™¤é…ç½®</span>
      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">deleted</span>  <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span>
      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span>        <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span>
      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span>    <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>               <span class="hljs-comment"># ä¸»é”®IDè‡ªå¢</span>
</code></pre>
<h3 data-id="heading-2">3. å®ä½“ç±»è®¾è®¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("user")</span>  <span class="hljs-comment">// æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨å</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ID - ä¸»é”®
     * <span class="hljs-doctag">@TableId</span> æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸»é”®
     * value = "id" è¡¨ç¤ºå¯¹åº”æ•°æ®åº“å­—æ®µå
     * type = IdType.AUTO è¡¨ç¤ºä¸»é”®è‡ªå¢
     */</span>
    <span class="hljs-meta">@TableId(value = "id", type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·å
     * å¦‚æœå­—æ®µåä¸æ•°æ®åº“åˆ—åä¸€è‡´ï¼ˆé©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ï¼Œå¯ä»¥çœç•¥ <span class="hljs-doctag">@TableField</span>
     */</span>
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-comment">/**
     * å¹´é¾„
     */</span>
    <span class="hljs-keyword">private</span> Integer age;
    
    <span class="hljs-comment">/**
     * é‚®ç®±
     */</span>
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     * <span class="hljs-doctag">@TableField</span> é…ç½®å¡«å……ç­–ç•¥
     */</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     * æ’å…¥å’Œæ›´æ–°æ—¶éƒ½è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
    
    <span class="hljs-comment">/**
     * é€»è¾‘åˆ é™¤å­—æ®µ
     * 0-æœªåˆ é™¤ 1-å·²åˆ é™¤
     */</span>
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}
</code></pre>
<h3 data-id="heading-3">4. Mapper æ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Mapper;

<span class="hljs-comment">/**
 * UserMapper æ¥å£
 * ç»§æ‰¿ BaseMapper å°±è‡ªåŠ¨æ‹¥æœ‰äº† CRUD æ–¹æ³•
 * 
 * æ³¨æ„ï¼šBaseMapper&lt;User&gt; ä¸­çš„ User æ˜¯å®ä½“ç±»ç±»å‹
 */</span>
<span class="hljs-meta">@Mapper</span>  <span class="hljs-comment">// ä¸€å®šè¦åŠ ä¸Š @Mapper æ³¨è§£ï¼ŒSpring æ‰èƒ½æ‰«æåˆ°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; {
    <span class="hljs-comment">// ä¸éœ€è¦å†™ä»»ä½•æ–¹æ³•ï¼ŒåŸºæœ¬çš„ CRUD éƒ½å·²ç»æœ‰äº†ï¼</span>
    
    <span class="hljs-comment">/**
     * å¦‚æœéœ€è¦è‡ªå®šä¹‰SQLï¼Œå¯ä»¥è¿™æ ·å†™
     */</span>
    <span class="hljs-comment">// @Select("SELECT * FROM user WHERE age &gt; #{minAge}")</span>
    <span class="hljs-comment">// List&lt;User&gt; selectUsersByMinAge(@Param("minAge") Integer minAge);</span>
}
</code></pre>
<h3 data-id="heading-4">5. æœåŠ¡å±‚å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-comment">/**
 * UserService å®ç°ç±»
 * 
 * ç»§æ‰¿ ServiceImpl å°±è‡ªåŠ¨æ‹¥æœ‰äº†æ›´å¤šçš„ CRUD æ–¹æ³•
 * å‚æ•°è¯´æ˜ï¼š
 * - UserMapperï¼šä½ çš„ Mapper æ¥å£
 * - Userï¼šä½ çš„å®ä½“ç±»
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰çš„ä¸šåŠ¡æ–¹æ³•</span>
    
    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æ–¹æ³•ï¼šæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserByUsername</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ MP çš„æŸ¥è¯¢æ„é€ å™¨</span>
        <span class="hljs-keyword">return</span> lambdaQuery()
                .eq(User::getUsername, username)  <span class="hljs-comment">// username = ?</span>
                .one();  <span class="hljs-comment">// æŸ¥è¯¢ä¸€æ¡è®°å½•</span>
    }
    
    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æ–¹æ³•ï¼šæ ¹æ®é‚®ç®±åç¼€æŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getUsersByEmailSuffix</span><span class="hljs-params">(String emailSuffix)</span> {
        <span class="hljs-keyword">return</span> lambdaQuery()
                .likeRight(User::getEmail, emailSuffix)  <span class="hljs-comment">// email like 'emailSuffix%'</span>
                .list();
    }
}
</code></pre>
<h3 data-id="heading-5">6. æ–°å¢æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ–°å¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-comment">// æ–¹æ³•1ï¼šä½¿ç”¨ save æ–¹æ³•</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.save(user);
        
        <span class="hljs-keyword">if</span> (success) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–°å¢ç”¨æˆ·æˆåŠŸï¼Œç”¨æˆ·IDï¼š"</span> + user.getId();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–°å¢ç”¨æˆ·å¤±è´¥"</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ–°å¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PostMapping("/batch")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addUsers</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;User&gt; users)</span> {
        <span class="hljs-comment">// æ‰¹é‡æ’å…¥ï¼Œæ¯æ¬¡æ’å…¥100æ¡</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.saveBatch(users, <span class="hljs-number">100</span>);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ‰¹é‡æ–°å¢æˆåŠŸ"</span> : <span class="hljs-string">"æ‰¹é‡æ–°å¢å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ–°å¢æˆ–æ›´æ–°ç”¨æˆ·ï¼ˆå­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢ï¼‰
     */</span>
    <span class="hljs-meta">@PostMapping("/save-or-update")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">saveOrUpdateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.saveOrUpdate(user);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span> : <span class="hljs-string">"æ“ä½œå¤±è´¥"</span>;
    }
}
</code></pre>
<h3 data-id="heading-6">7. æŸ¥è¯¢æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŸ¥è¯¢ç›¸å…³æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-keyword">return</span> userService.getById(id);
    }
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.list();
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶æŸ¥è¯¢ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº18çš„ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping("/adults")</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAdultUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .gt(User::getAge, <span class="hljs-number">18</span>)        <span class="hljs-comment">// age &gt; 18</span>
                .list();
    }
    
    <span class="hljs-comment">/**
     * å¤æ‚æ¡ä»¶æŸ¥è¯¢ï¼šå¹´é¾„åœ¨18-60ä¹‹é—´ï¼Œå¹¶ä¸”ç”¨æˆ·ååŒ…å«"å¼ "
     */</span>
    <span class="hljs-meta">@GetMapping("/complex")</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getComplexUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .between(User::getAge, <span class="hljs-number">18</span>, <span class="hljs-number">60</span>)           <span class="hljs-comment">// age between 18 and 60</span>
                .like(User::getUsername, <span class="hljs-string">"å¼ "</span>)           <span class="hljs-comment">// username like '%å¼ %'</span>
                .orderByDesc(User::getAge)               <span class="hljs-comment">// æŒ‰å¹´é¾„é™åº</span>
                .list();
    }
    
    <span class="hljs-comment">/**
     * åˆ†é¡µæŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@GetMapping("/page")</span>
    <span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">getUserPage</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam(defaultValue = "1")</span> Integer current,
            <span class="hljs-meta">@RequestParam(defaultValue = "10")</span> Integer size)</span> {
        
        <span class="hljs-comment">// åˆ›å»ºåˆ†é¡µå¯¹è±¡</span>
        Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(current, size);
        
        <span class="hljs-comment">// æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> userService.page(page);
    }
    
    <span class="hljs-comment">/**
     * å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@GetMapping("/page-with-condition")</span>
    <span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">getUserPageWithCondition</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam(defaultValue = "1")</span> Integer current,
            <span class="hljs-meta">@RequestParam(defaultValue = "10")</span> Integer size,
            <span class="hljs-meta">@RequestParam(required = false)</span> String keyword)</span> {
        
        Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(current, size);
        
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .like(StringUtils.isNotBlank(keyword), User::getUsername, keyword)
                .page(page);
    }
}
</code></pre>
<h3 data-id="heading-7">8. æ›´æ–°æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ›´æ–°æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæ›´æ–°ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PutMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-keyword">if</span> (user.getId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·IDä¸èƒ½ä¸ºç©º"</span>;
        }
        
        <span class="hljs-comment">// æ–¹æ³•1ï¼šæ ¹æ®IDæ›´æ–°æ‰€æœ‰å­—æ®µ</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.updateById(user);
        
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ›´æ–°æˆåŠŸ"</span> : <span class="hljs-string">"æ›´æ–°å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶æ›´æ–°ï¼šå°†æ‰€æœ‰å¹´é¾„å°äº18çš„ç”¨æˆ·å¹´é¾„è®¾ç½®ä¸º18
     */</span>
    <span class="hljs-meta">@PutMapping("/fix-age")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">fixAge</span><span class="hljs-params">()</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.lambdaUpdate()
                .lt(User::getAge, <span class="hljs-number">18</span>)        <span class="hljs-comment">// age &lt; 18</span>
                .set(User::getAge, <span class="hljs-number">18</span>)       <span class="hljs-comment">// è®¾ç½® age = 18</span>
                .update();
        
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"å¹´é¾„ä¿®å¤æˆåŠŸ"</span> : <span class="hljs-string">"å¹´é¾„ä¿®å¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * éƒ¨åˆ†å­—æ®µæ›´æ–°
     */</span>
    <span class="hljs-meta">@PatchMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">partialUpdateUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, 
                                   <span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; updates)</span> {
        <span class="hljs-comment">// ç§»é™¤ä¸èƒ½æ›´æ–°çš„å­—æ®µ</span>
        updates.remove(<span class="hljs-string">"id"</span>);
        updates.remove(<span class="hljs-string">"createTime"</span>);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.updateById(id, updates);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"éƒ¨åˆ†æ›´æ–°æˆåŠŸ"</span> : <span class="hljs-string">"éƒ¨åˆ†æ›´æ–°å¤±è´¥"</span>;
    }
}
</code></pre>
<h3 data-id="heading-8">9. åˆ é™¤æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ é™¤æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDåˆ é™¤ç”¨æˆ·ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
     */</span>
    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// é€»è¾‘åˆ é™¤ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ update æ“ä½œï¼Œå°† deleted å­—æ®µè®¾ç½®ä¸º 1</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.removeById(id);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"åˆ é™¤æˆåŠŸ"</span> : <span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡åˆ é™¤
     */</span>
    <span class="hljs-meta">@DeleteMapping("/batch")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">batchDeleteUsers</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;Long&gt; ids)</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.removeByIds(ids);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ‰¹é‡åˆ é™¤æˆåŠŸ"</span> : <span class="hljs-string">"æ‰¹é‡åˆ é™¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶åˆ é™¤ï¼šåˆ é™¤æ‰€æœ‰å¹´é¾„å¤§äº100çš„ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@DeleteMapping("/old")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteOldUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.lambdaUpdate()
                .gt(User::getAge, <span class="hljs-number">100</span>)       <span class="hljs-comment">// age &gt; 100</span>
                .remove();
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"åˆ é™¤è€å¹´ç”¨æˆ·æˆåŠŸ"</span> : <span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>;
    }
}
</code></pre>
<h2 data-id="heading-9">é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-10">10. è‡ªåŠ¨å¡«å……åŠŸèƒ½</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªåŠ¨å¡«å……å¤„ç†å™¨
 * ç”¨äºè‡ªåŠ¨å¡«å…… createTime å’Œ updateTime
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    
    <span class="hljs-comment">/**
     * æ’å…¥æ—¶è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// å¡«å……åˆ›å»ºæ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-comment">// å¡«å……æ›´æ–°æ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ›´æ–°æ—¶åªå¡«å……æ›´æ–°æ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
    }
}
</code></pre>
<h3 data-id="heading-11">11. åˆ†é¡µæ’ä»¶é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * MyBatis-Plus é…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.yourpackage.mapper")</span>  <span class="hljs-comment">// æŒ‡å®šMapperæ¥å£çš„æ‰«æè·¯å¾„</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-comment">/**
     * åˆ†é¡µæ’ä»¶é…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        
        <span class="hljs-comment">// åˆ†é¡µæ’ä»¶</span>
        <span class="hljs-type">PaginationInnerInterceptor</span> <span class="hljs-variable">paginationInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL);
        paginationInterceptor.setMaxLimit(<span class="hljs-number">1000L</span>);  <span class="hljs-comment">// è®¾ç½®æœ€å¤§å•é¡µé™åˆ¶æ•°é‡</span>
        paginationInterceptor.setOverflow(<span class="hljs-literal">true</span>);   <span class="hljs-comment">// è¶…å‡ºæœ€å¤§é¡µæ•°åå›åˆ°ç¬¬ä¸€é¡µ</span>
        
        interceptor.addInnerInterceptor(paginationInterceptor);
        
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<h3 data-id="heading-12">12. ä¹è§‚é”æ’ä»¶é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ MybatisPlusConfig ä¸­æ·»åŠ ä¹è§‚é”æ’ä»¶</span>
<span class="hljs-comment">/**
 * ä¹è§‚é”æ’ä»¶é…ç½®
 */</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> OptimisticLockerInnerInterceptor <span class="hljs-title function_">optimisticLockerInnerInterceptor</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimisticLockerInnerInterceptor</span>();
}

<span class="hljs-comment">// å®ä½“ç±»ä¸­é…ç½®ä¹è§‚é”å­—æ®µ</span>
<span class="hljs-meta">@Version</span>
<span class="hljs-keyword">private</span> Integer version;
</code></pre>
<h3 data-id="heading-13">13. è°¨æ…ä½¿ç”¨åœºæ™¯</h3>
<p><strong>1. è¶…å¤æ‚ SQL åœºæ™¯</strong></p>
<ul>
<li>æ¶‰åŠå¤§é‡å¤æ‚è”è¡¨æŸ¥è¯¢</li>
<li>éœ€è¦é«˜åº¦ä¼˜åŒ–çš„è‡ªå®šä¹‰ SQL</li>
<li>å¤æ‚çš„å­˜å‚¨è¿‡ç¨‹è°ƒç”¨</li>
</ul>
<p><strong>2. æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯</strong></p>
<ul>
<li>é«˜å¹¶å‘å†™å…¥åœºæ™¯</li>
<li>éœ€è¦ç²¾ç»†æ§åˆ¶ SQL æ‰§è¡Œçš„åœºæ™¯</li>
</ul>
<p><strong>3. é—ç•™ç³»ç»Ÿæ”¹é€ </strong></p>
<ul>
<li>å·²æœ‰å¤æ‚ MyBatis é…ç½®çš„é¡¹ç›®</li>
<li>æ•°æ®åº“è®¾è®¡ä¸ç¬¦åˆ MP è§„èŒƒ</li>
</ul>
<h3 data-id="heading-14">14. ä¸æ¨èä½¿ç”¨åœºæ™¯</h3>
<p><strong>1. JPA ç”Ÿæ€é‡åº¦ä¾èµ–é¡¹ç›®</strong></p>
<ul>
<li>å·²ç»æ·±åº¦ä½¿ç”¨ Spring Data JPA</li>
<li>éœ€è¦ JPA çš„çº§è”æ“ä½œç­‰ç‰¹æ€§</li>
</ul>
<p><strong>2. éå…³ç³»å‹æ•°æ®åº“</strong></p>
<ul>
<li>MongoDBã€Redis ç­‰ NoSQL æ•°æ®åº“</li>
<li>å›¾æ•°æ®åº“ç­‰ç‰¹æ®Šå­˜å‚¨</li>
</ul>
<h2 data-id="heading-15">æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-16">15. å®ä½“ç±»è®¾è®¡è§„èŒƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºç¡€å®ä½“ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEntity</span> {
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
    
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}

<span class="hljs-comment">// ä¸šåŠ¡å®ä½“ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@TableName("sys_user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseEntity</span> {
    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">// æ•°æ®åº“å­—æ®µåä¸å®ä½“ç±»å­—æ®µåä¸ä¸€è‡´æ—¶ä½¿ç”¨</span>
    <span class="hljs-meta">@TableField("phone_number")</span>
    <span class="hljs-keyword">private</span> String phoneNumber;
    
    <span class="hljs-comment">// ä¸æ˜ å°„åˆ°æ•°æ®åº“çš„å­—æ®µ</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-keyword">private</span> String temporaryCode;
}
</code></pre>
<h3 data-id="heading-17">16. æœåŠ¡å±‚å°è£…å»ºè®®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¥½çš„æœåŠ¡å±‚å°è£…</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; {
    
    <span class="hljs-comment">/**
     * ä¸šåŠ¡æ–¹æ³•ï¼šç”¨æˆ·æ³¨å†Œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">register</span><span class="hljs-params">(UserRegisterDTO registerDTO)</span> {
        <span class="hljs-comment">// 1. æ ¡éªŒç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> lambdaQuery()
                .eq(User::getUsername, registerDTO.getUsername())
                .exists();
        <span class="hljs-keyword">if</span> (exists) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·åå·²å­˜åœ¨"</span>);
        }
        
        <span class="hljs-comment">// 2. DTO è½¬ Entity</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        BeanUtils.copyProperties(registerDTO, user);
        
        <span class="hljs-comment">// 3. ä¿å­˜ç”¨æˆ·</span>
        <span class="hljs-keyword">return</span> save(user);
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„æ›´æ–°æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeUpdate</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·IDä¸èƒ½ä¸ºç©º"</span>);
        }
        
        <span class="hljs-comment">// åªæ›´æ–°éç©ºå­—æ®µ</span>
        <span class="hljs-keyword">return</span> lambdaUpdate()
                .eq(User::getId, user.getId())
                .set(user.getUsername() != <span class="hljs-literal">null</span>, User::getUsername, user.getUsername())
                .set(user.getAge() != <span class="hljs-literal">null</span>, User::getAge, user.getAge())
                .set(user.getEmail() != <span class="hljs-literal">null</span>, User::getEmail, user.getEmail())
                .update();
    }
}
</code></pre>
<h3 data-id="heading-18">17. å¼‚å¸¸å¤„ç†å»ºè®®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å…¨å±€å¼‚å¸¸å¤„ç†
 */</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-comment">/**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Result&lt;?&gt;&gt; handleBusinessException(BusinessException e) {
        log.error(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸: {}"</span>, e.getMessage());
        <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(Result.error(e.getMessage()));
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†æ•°æ®å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(DataAccessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Result&lt;?&gt;&gt; handleDataAccessException(DataAccessException e) {
        log.error(<span class="hljs-string">"æ•°æ®è®¿é—®å¼‚å¸¸: {}"</span>, e.getMessage());
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(Result.error(<span class="hljs-string">"æ•°æ®æ“ä½œå¤±è´¥"</span>));
    }
}

<span class="hljs-comment">/**
 * ç»Ÿä¸€è¿”å›ç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Integer code;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> T data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span> {
        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;();
        result.setCode(<span class="hljs-number">200</span>);
        result.setMessage(<span class="hljs-string">"æˆåŠŸ"</span>);
        result.setData(data);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">error</span><span class="hljs-params">(String message)</span> {
        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;();
        result.setCode(<span class="hljs-number">500</span>);
        result.setMessage(message);
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p><strong>å·¥å…·æ˜¯ä¸ºäººæœåŠ¡çš„</strong>ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æŠ€æœ¯æ ˆæ‰æ˜¯æœ€é‡è¦çš„ã€‚MyBatis-Plus åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹éƒ½èƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ï¼Œå€¼å¾—å¤§å®¶æ·±å…¥å­¦ä¹ å’Œä½¿ç”¨ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-20">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP7SMincYFKERZbNKAFtzGQ" target="_blank" title="https://mp.weixin.qq.com/s/P7SMincYFKERZbNKAFtzGQ" ref="nofollow noopener noreferrer">ã€Šè¿™20æ¡SQLä¼˜åŒ–æ–¹æ¡ˆï¼Œè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10å€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fy-GJ26kl0-yT6hE3fy2KjQ" target="_blank" title="https://mp.weixin.qq.com/s/y-GJ26kl0-yT6hE3fy2KjQ" ref="nofollow noopener noreferrer">ã€ŠMySQL ä¸ºä»€ä¹ˆä¸æ¨èç”¨é›ªèŠ±ID å’Œ UUID åšä¸»é”®ï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1Th3DuMqYpt4Xg5hEywIww" target="_blank" title="https://mp.weixin.qq.com/s/1Th3DuMqYpt4Xg5hEywIww" ref="nofollow noopener noreferrer">ã€Šç”¨htmlå†™äº†ä¸ªè¶…å¥½ç”¨çš„ç½‘é¡µä¸»é¢˜åˆ‡æ¢æ’ä»¶ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FaGLep07rnMQdQLyDHBer8Q" target="_blank" title="https://mp.weixin.qq.com/s/aGLep07rnMQdQLyDHBer8Q" ref="nofollow noopener noreferrer">ã€Šè¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·˜å® 9 å— 9 çš„ DeepSeekï¼Œæ’•å¼€äº†é­”å¹»ä¸–ç•Œçš„ä¸€è§’]]></title>    <link>https://juejin.cn/post/7571338749198303282</link>    <guid>https://juejin.cn/post/7571338749198303282</guid>    <pubDate>2025-11-12T00:54:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571338749198303282" data-draft-id="7571295102851317786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·˜å® 9 å— 9 çš„ DeepSeekï¼Œæ’•å¼€äº†é­”å¹»ä¸–ç•Œçš„ä¸€è§’"/> <meta itemprop="keywords" content="APP,Apple,uni-app"/> <meta itemprop="datePublished" content="2025-11-12T00:54:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/1421041942671774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·˜å® 9 å— 9 çš„ DeepSeekï¼Œæ’•å¼€äº†é­”å¹»ä¸–ç•Œçš„ä¸€è§’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1421041942671774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:54:04.000Z" title="Wed Nov 12 2025 00:54:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç°åœ¨çš„ä¸–ç•Œæ˜¯è¶Šæ¥è¶Šé­”å¹»ï¼Œæ—©å°±è¶…å‡ºäº†å¸¸äººçš„ç†è§£èŒƒç•´ã€‚</p>
<p>æˆ‘æœ€è¿‘è€åˆ·æ·˜å®ï¼Œæ˜¨å¤©ä¸çŸ¥å“ªæ¥çš„å…´è‡´ï¼Œæ²¡ä»€ä¹ˆç‰¹å®šç¼˜ç”±ï¼Œçº¯ç²¹å¥½å¥‡å½“ä¸‹çš„ç›¸å…³ç”Ÿæ€ï¼Œä¾¿é¬¼ä½¿ç¥å·®åœ¨æœç´¢æ æ•²äº† â€œDeepSeekâ€ã€‚ç¿»äº†æ²¡ä¸¤ä¸‹ï¼Œä¸€å®¶åº—çš„æ ‡é¢˜ç¬é—´æŠ“ä½äº†ä»–çš„çœ¼çƒ â€”â€”â€œæ— éœ€éƒ¨ç½²ã€æ‰“å¼€å³ç”¨ï¼Œå…¨ç¨‹ä¸å¡é¡¿â€ï¼Œå”®ä»·æ‰ 10 å—é’±ï¼Œä»˜æ¬¾äººæ•°å´å·²ç»ç ´äº† 1000ã€‚</p>
<p>ç›¯ç€é¡µé¢ç¢ç£¨äº†åŠå¤©ï¼Œè¶Šæƒ³è¶Šçº³é—·ï¼šä¸ç”¨ä¹°å®¶æœ¬åœ°éƒ¨ç½²ï¼Œè¿˜èƒ½ä¿è¯ç«‹åˆ»å“åº”ï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆç¥ä»™æ“ä½œï¼Ÿ</p>
<p>è¦çŸ¥é“ï¼ŒDeepSeek çš„çƒ­åº¦è™½å·²è¿‡å»åŠå¹´ï¼Œä½†ç›´åˆ°ç°åœ¨ï¼Œå¶å°”è¿˜æ˜¯èƒ½è§åˆ°è¿™ç©æ„å„¿çš„èº«å½±ï¼Œç”šè‡³å¯èƒ½è®©äººçŒ›åœ°æƒ³èµ·å½“åˆè¢«å®ƒæ”¯é…çš„æ—¥å­ã€‚</p>
<p>äºæ˜¯ç‚¹è¿›å»äº†ï¼Œè¿™æ•°æ®è¿˜ç¡®å®æŒºå¥½çš„ï¼ŒDeepSeekçš„éœ€æ±‚è¿˜æ˜¯æ—ºã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a209f806f0154bbfb32cc2d7dd9ba25d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=NDkVqg8rQo16YNI0ERxxdKa7dxk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æŒ‰æºä¸ä½æ»¡å¿ƒçš„å¥½å¥‡ï¼Œæˆ‘å¹²è„†ç›´æ¥ä¸‹äº†å•ã€ä»˜äº†æ¬¾ã€‚</p>
<h2 data-id="heading-1">æ”¶åˆ°è´§å</h2>
<p>å¯ç­‰å–å®¶å‘æ¥æ‰€è°“çš„ â€œäº§å“â€ï¼Œå½“åœºå°±æ‡µäº† â€”â€” é‚£ç¬é—´çš„å†²å‡»æ„Ÿï¼Œè®©å·®ç‚¹ä»¥ä¸ºè‡ªå·±ä¸å°å¿ƒé—¯è¿›äº†å¹³è¡Œå®‡å®™ï¼Œæ»¡è„‘å­éƒ½æ˜¯ â€œè¿™åˆ°åº•æ˜¯å•¥ï¼Ÿï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75f2ae0dc9264087a0122291675f78e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=%2F8SGW97Z2fXHFZZDTt6Goa5g9jk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ç¬¬ä¸€ååº”ç›´æ¥æ‡µäº†ï¼šè¿™éš¾é“æ˜¯é‡åˆ°æ´»è©è¨äº†ï¼Ÿå±…ç„¶è‡ªå·±éƒ¨ç½²äº† DeepSeekï¼Œè¿˜å¼€äº†å…¬ç½‘ä¾›å¤§å®¶å…è´¹ä¼¼çš„ç”¨ï¼Ÿè¿™ç®—åŠ›å¾—æœ‰å¤šè¶³å•Šï¼Ÿ</p>
<p>æœ‰è¿™èµ„æºï¼Œå“¥ä»¬å„¿ç›´æ¥å»å–ç®—åŠ›ä¸æ¯”è¿™ 10 å—é’±ä¸€å•èµšå¾—å¤šï¼Ÿ</p>
<p>å¯ç­‰å®šç›ä¸€çœ‹ï¼Œç¬é—´æ„£ä½äº† â€”â€” è¿™ç½‘å€æ€ä¹ˆè¿™ä¹ˆçœ¼ç†Ÿï¼Ÿå†ä»”ç»†ç…äº†ç…ï¼Œå¥½å®¶ä¼™ï¼Œå±…ç„¶æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fn.cn%2F" target="_blank" title="https://n.cn/" ref="nofollow noopener noreferrer">n.cn</a>ï¼Ÿï¼</p>
<p>**è¿™ä¸æ˜¯...360çš„çº³ç±³æœç´¢ï¼Ÿï¼Ÿï¼Ÿ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3a77e83579646e5ba19dc849c5b140d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=HfC4lQjs6JD4y7vk1f7AIloJDp4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ç‚¹å¼€å¦ä¸€ä¸ªç½‘å€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88340c9955a44ceca2e324c3e127abdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=r5wsvrq1SIP9YD7QqPsvQwC3Hxo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä¸€æ—¶é—´æ— è¯­å‡å™ï¼Œæˆ‘çš„å¤§è„‘å®•æœºäº†æ•´æ•´10ç§’é’Ÿã€‚æˆ‘æƒ³åˆ°äº†è¿™ä¸ªäº‹æƒ…æ¯”è¾ƒæŠ½è±¡ï¼Œä½†æ˜¯ï¼Œæˆ‘æ²¡æƒ³åˆ°èƒ½æŠ½è±¡åˆ°è¿™ç§åœ°æ­¥ã€‚å› ä¸ºï¼Œåå·®æ„Ÿæå¼ºï¼Œæˆ‘æœ¬æ¥ä¼šä»¥ä¸ºï¼Œå“¥ä»¬å°±å–é“¾æ¥ï¼Œè‚¯å®šä¸å°‘å·®è¯„ï¼Œä½†ï¼Œäº‹æƒ…ä¸å¤ªä¸€æ ·äº†èµ·æ¥ã€‚è¿™ä¸ªè¯„è®ºåŒºï¼Œå‡ ä¹å…¨æ˜¯å¥½è¯„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71ec1059d5084f5b85b83a2b5a766179~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=j4nNOmXv0cCHDdZ1720j%2BbM%2Femo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”šè‡³æœ‰300ä¸ª88VIPçš„å¥½è¯„ã€‚æˆ‘ä¸€æ¡ä¸€æ¡çš„çœ‹äº†ä¸‹å»ï¼Œæˆ‘æ„Ÿè§‰ï¼Œè¿™ä¸ªä¸–ç•Œåœ¨æˆ‘çš„è„‘ä¸­ï¼Œå¥½åƒæ›´é­”å¹»ï¼Œæ›´ç«‹ä½“äº†ã€‚æœ‰ç”¨æˆ·ç•™è¨€è¯´ï¼Œç¡®å®ä¸å¡ï¼Œè¾“å‡ºçš„ä»£ç å¾ˆè§„èŒƒã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/133b1ffd54194746ba0cd58f44f05fd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=MmMvPL9DXnEpNCY3MM1ARye3wIY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â€œå¯ä»¥å•Šï¼Œæ˜¯å…è´¹çš„r1ï¼Œè·Ÿæè¿°ä¸€è‡´ï¼Œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œä¸ç”¨ä¹°ä¼šå‘˜äº†ä¹Ÿã€‚â€
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c99efd8b8b49968351e3a7fa2096e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763513644&amp;x-signature=TqbzdKi0xiRUWGwq%2FJt7oOqx2NU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>**ä¸ç”¨ä¹°ä¼šå‘˜äº†ã€‚æˆ‘ä¸çŸ¥é“ä½ ä»¬æ˜¯ä»€ä¹ˆæ„Ÿå—ï¼Œæˆ‘çªç„¶é¼»å­ä¸€é…¸ã€‚æˆ‘çœ‹åˆ°çš„ï¼Œå¿½ç„¶æ˜¯ä¸€ä¸ªä¸ªéå¸¸æ´»ç”Ÿç”Ÿã€ç«‹ä½“å½¢è±¡çš„äººã€‚</p>
<p>æˆ–è®¸å¯¹äºè¿™äº›Taä»¬æ¥è¯´ï¼šç™½å¤©åœ¨å…¬å¸ï¼Œä»–å¾—å¿ç€è€æ¿çš„ PUA å¼ºæ’‘ç€å¹²æ´»ï¼Œè¿åé©³çš„åº•æ°”éƒ½æ²¡æœ‰ â€”â€” è¿™ä»½è–ªèµ„å¾®è–„çš„å·¥ä½œï¼Œæ˜¯ä»–åœ¨å››äº”çº¿å°åŸå”¯ä¸€çš„ç³Šå£ä¾é ã€‚</p>
<p>æ™šä¸Šå›åˆ°åå‡ å¹³ç±³çš„å‡ºç§Ÿå±‹ï¼Œç‹­å°çš„ç©ºé—´é‡Œå¡æ»¡äº†ä¸ç”˜ã€‚ä»–å¤ªæƒ³æ”¹å˜å‘½è¿äº†ï¼Œå¤ªæ€•ä¸€è¾ˆå­å›°åœ¨åŸåœ°ï¼Œæ‰€ä»¥æ€»ç¢ç£¨ç€å­¦é—¨æ–°æœ¬äº‹ï¼ŒæŠ“ä½ç‚¹ä»€ä¹ˆã€‚</p>
<p>AIã€å¤§æ¨¡å‹ã€å¸­å·æ—¶ä»£çš„æŠ€æœ¯é©å‘½ï¼Œè¿™äº›è¯åƒé’ˆä¸€æ ·æ‰ç€ä»–çš„å¿ƒã€‚ä»–çŸ¥é“è¿™æ˜¯ç¿»èº«çš„æœºä¼šï¼Œå¯æ¯ä¸€æ¬¡å¬è¯´ï¼Œéƒ½ä¼´éšç€æ·±æ·±çš„ææ…Œ â€”â€” æ€•è‡ªå·±è¿½ä¸ä¸Šè¿™è‚¡æµªæ½®ï¼Œæ€•è¢«æ—¶ä»£å½»åº•æŠ›å¼ƒã€‚</p>
<p>å¯çœŸè¦è¿ˆå‡ºè„šæ­¥ï¼Œæ‰å‘ç°å‰è·¯å…¨æ˜¯æœ›ä¸åˆ°å¤´çš„åï¼šå®˜ç½‘å¾—é  â€œé­”æ³•ä¸Šç½‘â€ æ‰èƒ½è®¿é—®ï¼Œä»–æ‘¸ä¸ç€é—¨é“ï¼›ä¼šå‘˜è®¢é˜…å‡ åä¸Šç™¾å—ä¸€ä¸ªæœˆï¼ŒæŠµå¾—ä¸Šä»–å¥½å‡ å¤©çš„é¥­é’±ï¼Œæ ¹æœ¬èˆä¸å¾—èŠ±ï¼›é‚£äº›éƒ¨ç½²æ•™ç¨‹é‡Œçš„æœ¯è¯­ï¼Œåƒå¤©ä¹¦ä¸€æ ·æ™¦æ¶©ï¼Œç¡¬ç”Ÿç”ŸæŠŠä»–æŒ¡åœ¨é—¨å¤–ï¼Œè¿å…¥é—¨çš„ç¼éš™éƒ½ä¸ç»™ç•™ã€‚</p>
<p>å¥½ä¸å®¹æ˜“æ‰’åˆ° DeepSeek å’Œ ChatGPT çš„å®˜ç½‘ï¼Œä»–å’¬ç¢äº†ç‰™æ‰æå‡ºä¸ä¾¿å®œçš„ä¼šå‘˜è´¹ï¼Œä»¥ä¸ºç»ˆäºæ‘¸åˆ°äº†é—¨æ§›ã€‚å¯å®é™…ç”¨èµ·æ¥ï¼Œå´æ»¡æ˜¯å¤±æœ› â€”â€” ä¸ä»…å¡é¡¿å¾—è®©äººæŠ“ç‹‚ï¼Œå†å²è®°å½•é‡Œè¿˜è«åå†’å‡ºä¸å±äºè‡ªå·±çš„å†…å®¹ï¼Œé’±èŠ±å¾—å†¤æ‰åˆæ†‹å±ˆã€‚</p>
<p>ä¸€æ¬¡æ¬¡å°è¯•ï¼Œä¸€æ¬¡æ¬¡è¢«ç°å®æ‰“å›åŸå½¢ã€‚ä»–å°±åƒä¸ªè¢«é—å¼ƒåœ¨ç«™å°å¤–çš„äººï¼Œçœ¼çççœ‹ç€æ—¶ä»£çš„åˆ—è½¦å‘¼å•¸è€Œè¿‡ï¼Œè‡ªå·±å´è¿ä¸Šè½¦çš„èµ„æ ¼éƒ½æ²¡æœ‰ã€‚é‚£ç§æ±‚è€Œä¸å¾—çš„æ— åŠ›æ„Ÿï¼Œæ²‰ç”¸ç”¸å‹åœ¨èƒ¸å£ï¼Œè®©ä»–å–˜ä¸è¿‡æ°”ã€‚</p>
<p>ç›´åˆ°é‚£å¤©åœ¨æ·˜å®åˆ·åˆ°é‚£ä¸ª 9.9 å…ƒçš„å•†å“ï¼Œ<code>â€œæ— éœ€éƒ¨ç½²â€â€œæ‰“å¼€å³ç”¨â€â€œç«‹åˆ»å“åº”â€ </code>è¿™å‡ ä¸ªå­—ï¼Œåƒé»‘å¤œé‡Œçš„ä¸€æŸå…‰ï¼Œç¬é—´ç…§äº®äº†ä»–çš„æ¸´æœ›ã€‚</p>
<p>ä»–åå¤çœ‹äº†å¥½å‡ éå•†å“é¡µé¢ï¼Œçº ç»“äº†å¾ˆä¹… â€”â€” å…œé‡Œçš„é’±æ¯ä¸€åˆ†éƒ½è¦ç®—è®¡ï¼Œä»–æ€•è¿™åˆæ˜¯ä¸€åœºéª—å±€ï¼Œæ€•æœ€åè¿è¿™ä¸¤é¡¿æ‹¼å¥½é¥­çš„é’±éƒ½æ‰“äº†æ°´æ¼‚ã€‚å¯å¯¹æ”¹å˜çš„æ¸´æœ›ï¼Œç»ˆç©¶å‹è¿‡äº†æ‰€æœ‰é¡¾è™‘ã€‚</p>
<p>ä¸‹å•åï¼Œä»–æ”¥ç€æ‰‹æœºç­‰å›å¤ï¼Œæ”¶åˆ°å¯ç›´æ¥ç‚¹å¼€çš„é“¾æ¥æ—¶ï¼Œæ‰‹æŒ‡éƒ½å¸¦ç€ç‚¹é¢¤æŠ–ã€‚æ€€ç€å¿å¿‘ç‚¹è¿›å»ï¼Œå±…ç„¶çœŸçš„èƒ½ç”¨ï¼Œè¿˜å¼‚å¸¸æµç•…ã€‚</p>
<p>é‚£ä¸€åˆ»ï¼Œä»–ç´§ç»·çš„è‚©è†€çªç„¶å®äº†ä¸‹æ¥ï¼Œé•¿é•¿èˆ’äº†ä¸€å£æ°”ï¼Œçœ¼çœ¶ç”šè‡³æœ‰ç‚¹å‘çƒ­ã€‚ä»–è§‰å¾—è‡ªå·±ç»ˆäºèŠ±æœ€å°‘çš„é’±ï¼Œæ”¥ä½äº†é‚£å¼ ä¸‰å¯¸è§æ–¹çš„ã€é€šå¾€æ–°ä¸–ç•Œçš„èˆ¹ç¥¨ã€‚</p>
<p><strong>æ»¡å¿ƒæ¬¢å–œåœ°è·‘åˆ°è¯„è®ºåŒºï¼Œä»–è®¤è®¤çœŸçœŸæ‰“ä¸‹ â€œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œä¸ç”¨ä¹°ä¼šå‘˜äº†â€ï¼Œå­—é‡Œè¡Œé—´å…¨æ˜¯æ»¡è¶³ã€‚ä»–ç”šè‡³å·å·çªƒå–œï¼Œè§‰å¾—è‡ªå·±å äº†å¤©å¤§çš„ä¾¿å®œï¼Œç”¨ 9.9 å…ƒå°±æ’¬åŠ¨äº†åŸæœ¬é¥ä¸å¯åŠçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</strong></p>
<p>ä»–æŠŠè¿™ä¸ªé“¾æ¥å°å¿ƒç¿¼ç¿¼æ”¶è¿›æµè§ˆå™¨ä¹¦ç­¾ï¼Œåƒçè—ä¸€ä»¶ç¨€ä¸–çå®ã€‚è¿™æ˜¯ä»–åœ¨æ®‹é…·ç”Ÿæ´»é‡Œï¼Œæ‹¼å°½å…¨åŠ›æ‰æŠ“ä½çš„å°å°æ·å¾„ï¼Œæ˜¯æ”¯æ’‘ä»–ç»§ç»­å¾€å‰èµ°çš„ä¸€ç‚¹å¸Œæœ›ã€‚</p>
<p>å¯ä»–ä¸çŸ¥é“ï¼Œè¿™ä»½è¢«ä»–è§†è‹¥çå®çš„ â€œæœºä¼šâ€ï¼Œæœ¬å°±æ˜æ™ƒæ™ƒæ‘Šåœ¨é˜³å…‰ä¸‹ï¼Œå¯¹æ‰€æœ‰äººå…è´¹å¼€æ”¾ã€‚ä»–åªæ˜¯æ°å¥½ç«™åœ¨äº†ä¿¡æ¯çš„é˜´å½±é‡Œï¼Œæ²¡è§è¿‡é‚£ç‰‡è§¦æ‰‹å¯åŠçš„å…‰æ˜ï¼Œåªèƒ½é ç€è¿™ç‚¹ â€œå¾®å…‰â€ï¼Œç¬¨æ‹™åˆæ‰§ç€åœ°è¿½èµ¶ç€æ—¶ä»£çš„è„šæ­¥ã€‚</p>
<p><strong>AIçš„å‘å±•ï¼Œæ°¸ä¸æ­¢æ­¥ã€‚</strong> <code>æ„¿æ‰€æœ‰äººéƒ½èƒ½è·Ÿä¸Šæ—¶ä»£çš„æ´ªæµ</code>ï¼Œç”¨è‡ªå·±ä¿¡æ¯å·®æ‰“å‡ºä¸€ç‰‡æ–°çš„å¤©åœ°ï¼</p>
<h3 data-id="heading-2">ç›¸å…³æ¨è</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FURmC_4vxQv5ttOg8yYe7Eg" target="_blank" title="https://mp.weixin.qq.com/s/URmC_4vxQv5ttOg8yYe7Eg" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…ç»­è´¹å¤§å‘åŠæˆåŠŸç»­è´¹æ–¹æ¡ˆï¼äº²æµ‹æœ‰æ•ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1bAA90Tzpx03tTHZbdg3aw" target="_blank" title="https://mp.weixin.qq.com/s/1bAA90Tzpx03tTHZbdg3aw" ref="nofollow noopener noreferrer"># AppStoreæ•æ„Ÿè¯æ’æŸ¥æ‰‹å†Œï¼Œå¤šç»´åº¦åˆ†æGuideline 2.3.1éšè—åŠŸèƒ½ï¼Œè½»æ¾è¿‡å®¡ã€‚</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484371%26idx%3D1%26sn%3D33568c58e90a5bf4d2612d803ecb2a27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484371&amp;idx=1&amp;sn=33568c58e90a5bf4d2612d803ecb2a27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœåŠ æ€¥å®¡æ ¸æ˜¯â€œç»¿è‰²é€šé“â€è¿˜æ˜¯â€œæ­»äº¡é™·é˜±â€ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3Dea61bd42d5ae8b99d2a56cbfb8d91e88%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484362&amp;idx=1&amp;sn=ea61bd42d5ae8b99d2a56cbfb8d91e88&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…é‚®ç®±ï¼Œçªç„¶æ”¶åˆ°11.2é€šçŸ¥ä¸¥é‡ä¹ˆï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484413%26idx%3D1%26sn%3D82870d4c8892fa65803a8e05fd5ac938%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484413&amp;idx=1&amp;sn=82870d4c8892fa65803a8e05fd5ac938&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># ä¸æƒ³è¢«è‹¹æœå¡å®¡æœ€å¥½é”™å¼€è¿™ä¸¤ä¸ªæå®¡æ—¶é—´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484349%26idx%3D1%26sn%3D1c75a6b08cb5de64ddf41a88b61ff108%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484349&amp;idx=1&amp;sn=1c75a6b08cb5de64ddf41a88b61ff108&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æ‰‹æ’•è‹¹æœå®¡æ ¸4.3æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡é—®é¢˜ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484344%26idx%3D1%26sn%3D4399eb8d8bf82e9c5df26a18b8564cfb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484344&amp;idx=1&amp;sn=4399eb8d8bf82e9c5df26a18b8564cfb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æœ‰å¹¸å’ŒAppstoreå®¡æ ¸äººå‘˜è¿›è¡Œäº†ä¸€åœºè§†é¢‘ä¼šè®®ç‰¹æ­¤è®°å½•ã€‚</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter 3.38 ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ–°ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7572010680896274472</link>    <guid>https://juejin.cn/post/7572010680896274472</guid>    <pubDate>2025-11-13T10:06:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572010680896274472" data-draft-id="7571815997068001320" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter 3.38 ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ–°ç‰¹æ€§"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-13T10:06:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªå†™ä¸å®Œç¨‹åºçš„çŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/4055446188735672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter 3.38 ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ–°ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4055446188735672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªå†™ä¸å®Œç¨‹åºçš„çŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:06:17.000Z" title="Thu Nov 13 2025 10:06:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»‹ç»</h2>
<p>æ¬¢è¿å›åˆ°æˆ‘ä»¬å®šæœŸå‘å¸ƒçš„å­£åº¦ç‰ˆæœ¬ Flutter 3.38ã€‚æœ¬æ¬¡æ›´æ–°æ—¨åœ¨é€šè¿‡ç‚¹ç®€å†™å’Œ Widget é¢„è§ˆçš„æ›´æ–°æ¥æå‡æ‚¨çš„å¼€å‘æ•ˆç‡å¹¶ä¼˜åŒ–å¼€å‘è€…ä½“éªŒã€‚æ„Ÿè°¢ç¤¾åŒºçš„è´¡çŒ®ï¼Œæœ¬æ¬¡ç‰ˆæœ¬å…±åŒ…å«æ¥è‡ª 145 ä½è´¡çŒ®è€…çš„ 825 æ¬¡æäº¤ï¼Œå…¶ä¸­ 37 ä½æ˜¯é¦–æ¬¡è´¡çŒ®è€…ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°çš„å†…å®¹ã€‚</p>
<h2 data-id="heading-1">Dot shorthands</h2>
<p>ç¼–å†™æ›´ç®€æ´çš„ Dart ä»£ç ï¼æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Dart çš„ä¸€é¡¹æ–°ç‰¹æ€§â€”â€”<strong>ç‚¹ç®€å†™</strong>ï¼ç®€å†™å…è®¸æ‚¨çœç•¥ Dart å¯ä»¥æ¨æ–­çš„ç±»å‹ï¼Œä»è€Œå‡å°‘æ ·æ¿ä»£ç ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®€å†™<code>.start</code>æ¥ä»£æ›¿<code>MainAxisAlignment.start</code>ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// ä½¿ç”¨ç®€å†™</span>
<span class="hljs-selector-tag">Column</span> ( 
  <span class="hljs-attribute">mainAxisAlignment </span>: .start, 
  <span class="hljs-attribute">crossAxisAlignment </span>: .center, 
  <span class="hljs-attribute">children </span>: [ <span class="hljs-comment">/* ... */</span> ], 
), 

<span class="hljs-comment">// ä¸ä½¿ç”¨ç®€å†™</span>
<span class="hljs-selector-tag">Column</span> ( 
  <span class="hljs-attribute">mainAxisAlignment </span>: MainAxisAlignment.start, 
  <span class="hljs-attribute">crossAxisAlignment </span>: CrossAxisAlignment.center, 
  <span class="hljs-attribute">children </span>: [ <span class="hljs-comment">/* â€¦ */</span> ], 
),
</code></pre>
<p>è¿™åŒæ ·é€‚ç”¨äºå‘½åæ„é€ å‡½æ•°ï¼ä½ å¯ä»¥<code>.all</code>è¿™æ ·å†™<code>EdgeInsets.all</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å¡«å……ï¼ˆ
  å¡«å……ï¼š.å…¨éƒ¨ï¼ˆ<span class="hljs-number">8.0</span>ï¼‰ï¼Œ
  å­å…ƒç´ ï¼šæ–‡æœ¬ï¼ˆ<span class="hljs-string">'Hello world'</span>ï¼‰ï¼Œ
ï¼‰ï¼Œ
</code></pre>
<p>Dart 3.10 å’Œ Flutter 3.38 é»˜è®¤å¯ç”¨æ­¤åŠŸèƒ½ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹dart.dev ä¸Šçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdart.dev%2Flanguage%2Fdot-shorthands" target="_blank" title="https://dart.dev/language/dot-shorthands" ref="nofollow noopener noreferrer">dot ç®€å†™é¡µé¢ã€‚æ‚¨è¿˜å¯ä»¥åœ¨</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.dart.dev%2Fea8b952b6088" target="_blank" title="https://blog.dart.dev/ea8b952b6088" ref="nofollow noopener noreferrer">Dart 3.10 å‘å¸ƒåš</a>æ–‡ä¸­äº†è§£æ›´å¤šç›¸å…³å†…å®¹ï¼ˆä¾‹å¦‚ Dart hooksï¼ï¼‰ã€‚</p>
<h2 data-id="heading-2">web</h2>
<h3 data-id="heading-3">Web å¼€å‘é…ç½®æ–‡ä»¶</h3>
<p>è¯¥<code>flutter run</code>å‘½ä»¤ç°åœ¨æ”¯æŒ Web è®¾ç½®é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨<code>web_dev_config.yaml</code>é¡¹ç›®æ ¹ç›®å½•çš„æ–‡ä»¶ä¸­æŒ‡å®šä¸»æœºã€ç«¯å£ã€è¯ä¹¦å’Œæ ‡å¤´ä¿¡æ¯ã€‚å°†è¯¥æ–‡ä»¶æ£€å…¥ï¼Œä»¥ä¾¿å›¢é˜Ÿä¸­çš„æ¯ä¸ªäººéƒ½èƒ½ä½¿ç”¨ç›¸åŒçš„è®¾ç½®è¿›è¡Œè°ƒè¯•ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fweb-dev-config-file" target="_blank" title="https://docs.flutter.dev/platform-integration/web/web-dev-config-file" ref="nofollow noopener noreferrer">â€œè®¾ç½® Web å¼€å‘é…ç½®æ–‡ä»¶â€</a>ã€‚</p>
<h3 data-id="heading-4">Web å¼€å‘ä»£ç†è®¾ç½®</h3>
<p>é™¤äº†ç°æœ‰çš„å‘½ä»¤è¡Œå‚æ•°å¤–ï¼ŒWeb å¼€å‘é…ç½®æ–‡ä»¶è¿˜æ”¯æŒæ–°çš„ä»£ç†è®¾ç½®ã€‚ä»£ç†è®¾ç½®å…è®¸å°†å¯¹å·²é…ç½®è·¯å¾„çš„è¯·æ±‚è½¬å‘åˆ°å¦ä¸€å°æœåŠ¡å™¨ã€‚è¿™ä½¿å¾—å¼€å‘èƒ½å¤Ÿè¿æ¥åˆ°åŒä¸€ä¸»æœºä¸ŠåŠ¨æ€ç«¯ç‚¹çš„ Web å®¢æˆ·ç«¯å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
<p>æœ‰å…³ä»£ç†è®¾ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fweb-dev-config-file" target="_blank" title="https://docs.flutter.dev/platform-integration/web/web-dev-config-file" ref="nofollow noopener noreferrer">è®¾ç½® Web å¼€å‘é…ç½®æ–‡ä»¶</a>ã€‚</p>
<h3 data-id="heading-5">æ‰©å±•äº†å¯¹ç½‘é¡µçƒ­é‡è½½çš„æ”¯æŒ</h3>
<p>ç°åœ¨ï¼Œå½“æ‚¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Flutter åº”ç”¨çš„é“¾æ¥å¹¶è¿è¡Œè¯¥åº”ç”¨æ—¶ï¼ŒçŠ¶æ€çƒ­é‡è½½åŠŸèƒ½é»˜è®¤å¯ç”¨<code>-d web-server</code>ã€‚å³ä½¿åŒæ—¶è¿æ¥å¤šä¸ªæµè§ˆå™¨ï¼Œæ­¤åŠŸèƒ½ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<p>ä¸ä¹‹å‰ä¸€æ ·<code>-d chrome</code>ï¼Œæ­¤åŠŸèƒ½å¯ä»¥ä½¿ç”¨æ ‡å¿—æš‚æ—¶ç¦ç”¨<code>--no-web-experimental-hot-reload</code>ã€‚ç¦ç”¨æ­¤åŠŸèƒ½çš„åŠŸèƒ½å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ç§»é™¤ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨åœ¨å¼€å‘æµç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ä½¿ç”¨ Dart çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdart-lang%2Fsdk%2Fissues%2Fnew%3Ftemplate%3D5_web_hot_reload.yml" target="_blank" title="https://github.com/dart-lang/sdk/issues/new?template=5_web_hot_reload.yml" ref="nofollow noopener noreferrer">Web çƒ­é‡è½½é—®é¢˜æ¨¡æ¿</a>æäº¤é”™è¯¯æŠ¥å‘Šã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fbuilding%23hot-reload-web" target="_blank" title="https://docs.flutter.dev/platform-integration/web/building#hot-reload-web" ref="nofollow noopener noreferrer">Web çƒ­é‡è½½æ–‡æ¡£</a>ã€‚</p>
<h2 data-id="heading-6">æ¡†æ¶</h2>
<p>æ­¤ç‰ˆæœ¬åŒ…å«æ¡†æ¶ä¸­çš„è®¸å¤šå¼ºå¤§çš„æ–°åŠŸèƒ½å’Œæ”¹è¿›ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå¯¹é«˜çº§ UIã€å¯¼èˆªå’Œå¹³å°äº¤äº’è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p>
<p>ç°åœ¨ï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨ <code>Overlay.of</code> åˆ›å»ºå¼¹å‡ºçª—å£ã€å¯¹è¯æ¡†å’Œå…¶ä»–æµ®åŠ¨ UI å…ƒç´ æ—¶æ‹¥æœ‰äº†æ›´å¤§çš„æ§åˆ¶æƒ<code>OverlayPortal</code>ã€‚ç°åœ¨å¯ä»¥<code>Overlay</code>ä½¿ç”¨ <code>Overlay.of</code> åœ¨ç»„ä»¶æ ‘çš„ä»»ä½•ä¸Šçº§ç»„ä»¶ä¸­æ¸²æŸ“å­ç»„ä»¶<code>OverlayPortal.overlayChildLayoutBuilder</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174239" target="_blank" title="https://github.com/flutter/flutter/pull/174239" ref="nofollow noopener noreferrer">#174239</a>ï¼‰ï¼Œä»è€Œæ›´è½»æ¾åœ°æ˜¾ç¤ºåº”ç”¨èŒƒå›´çš„é€šçŸ¥æˆ–å…¶ä»–éœ€è¦çªç ´çˆ¶ç»„ä»¶å¸ƒå±€é™åˆ¶çš„ UIã€‚åº•å±‚ <code>Overlay.of</code> æ–¹æ³•ä¹Ÿå¾—åˆ°äº†å¢å¼ºï¼Œå˜å¾—æ›´åŠ å¥å£®é«˜æ•ˆï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174315" target="_blank" title="https://github.com/flutter/flutter/pull/174315" ref="nofollow noopener noreferrer">#174315</a>ï¼‰ã€‚</p>
<p>ä¸ºäº†æä¾›æ›´ç°ä»£åŒ–çš„ Android å¯¼èˆªä½“éªŒï¼Œé¢„æµ‹æ€§è¿”å›è·¯å¾„è¿‡æ¸¡æ•ˆæœç°å·²é»˜è®¤å¯ç”¨<code>MaterialApp</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173860" target="_blank" title="https://github.com/flutter/flutter/pull/173860" ref="nofollow noopener noreferrer">#173860</a>ï¼‰ã€‚å½“ç”¨æˆ·æ‰§è¡Œè¿”å›æ‰‹åŠ¿æ—¶ï¼Œå½“å‰è·¯å¾„ä¼šä»¥åŠ¨ç”»å½¢å¼æ¶ˆå¤±ï¼ŒåŒæ—¶ç”¨æˆ·ä¼šçœ‹åˆ°ä¸»å±å¹•çš„é¢„è§ˆã€‚æ­¤å¤–ï¼Œé»˜è®¤é¡µé¢è¿‡æ¸¡æ•ˆæœä¹Ÿå·²æ›´æ–°ï¼Œä»¥<code>FadeForwardsPageTransitionsBuilder</code>åæ˜ <code>ZoomPageTransitionsBuilder</code>åŸç”Ÿåº”ç”¨çš„è¡Œä¸ºã€‚</p>
<p>æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿˜æ·±åŒ–äº†æ¡Œé¢é›†æˆã€‚åœ¨ Windows ç³»ç»Ÿä¸Šï¼Œå¼€å‘è€…ç°åœ¨å¯ä»¥è®¿é—®å·²è¿æ¥æ˜¾ç¤ºå™¨çš„åˆ—è¡¨ï¼Œå¹¶æŸ¥è¯¢æ¯ä¸ªæ˜¾ç¤ºå™¨çš„è¯¦ç»†å±æ€§ï¼Œä¾‹å¦‚åˆ†è¾¨ç‡ã€åˆ·æ–°ç‡å’Œç‰©ç†å°ºå¯¸ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F164460" target="_blank" title="https://github.com/flutter/flutter/pull/164460" ref="nofollow noopener noreferrer">#164460</a>ï¼‰ã€‚è¿™ä½¿å¾—åˆ›å»ºå…·æœ‰å¤æ‚çª—å£ç®¡ç†åŠŸèƒ½çš„åº”ç”¨ç¨‹åºæˆä¸ºå¯èƒ½ã€‚</p>
<p>æœ€åï¼Œæ¡†æ¶æœ¬èº«çš„å®¹é”™æ€§ä¹Ÿå¾—åˆ°äº†æå‡ã€‚ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå›è°ƒä¸­å‘ç”Ÿçš„é”™è¯¯ï¼ˆä¾‹å¦‚ <code>get_errors(Â </code>didUpdateWidget<code>)</code>ï¼‰ç°åœ¨èƒ½å¤Ÿå¾—åˆ°æ›´ä¼˜é›…çš„å¤„ç†ï¼Œä»è€Œé¿å…åœ¨å…ƒç´ æ ‘ä¸­å¼•å‘çº§è”æ•…éšœï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173148" target="_blank" title="https://github.com/flutter/flutter/pull/173148" ref="nofollow noopener noreferrer">#173148</a>ï¼‰ã€‚æ­¤å¤–ï¼Œ<code>get_errors()</code> ä¹Ÿæ­£ç¡®å®ç°äº†ç›¸ç­‰æ€§åˆ¤æ–­ï¼Œç¡®ä¿ç›¸åŒçš„æä¾›ç¨‹åºå¾—åˆ°ç›¸åŒçš„å¤„ç†ï¼Œ<code>ResizeImage</code>ä»è€Œä½¿å›¾åƒç¼“å­˜å’Œæ¯”è¾ƒæ›´åŠ å¯é¢„æµ‹ï¼ˆÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172643" target="_blank" title="https://github.com/flutter/flutter/pull/172643" ref="nofollow noopener noreferrer">#172643</a>ï¼‰ã€‚<code>ResizeImage</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172643" target="_blank" title="https://github.com/flutter/flutter/pull/172643" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨ç½‘é¡µä¸Šï¼ŒUI çš„ä¼˜åŒ–ä»åœ¨ç»§ç»­ï¼Œä¿®å¤äº†<code>RSuperellipse</code>å½“åœ†è§’åŠå¾„å¤§äºå°éƒ¨ä»¶æœ¬èº«æ—¶å‡ºç°çš„æ¸²æŸ“é”™è¯¯ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172254" target="_blank" title="https://github.com/flutter/flutter/pull/172254" ref="nofollow noopener noreferrer">#172254</a>ï¼‰ï¼Œç°åœ¨ï¼Œè¿™ç§æƒ…å†µå°†è¢«å¤„ç†ï¼Œä»¥æŒ‰é¢„æœŸç”Ÿæˆè¯ä¸¸å½¢çŠ¶ã€‚</p>
<p>å¯¹äºå›½é™…ç”¨æˆ·è€Œè¨€ï¼Œæ£€æµ‹æµè§ˆå™¨é¦–é€‰è¯­è¨€ç¯å¢ƒçš„åŠŸèƒ½ç°åœ¨æ›´åŠ å¼ºå¤§ã€‚å¼•æ“ç°åœ¨ä½¿ç”¨æ ‡å‡†<code>Intl.Locale</code>Web API æ¥è§£ææµè§ˆå™¨è¯­è¨€ï¼Œå–ä»£äº†ä¹‹å‰æ‰‹åŠ¨ä¸”è¾ƒä¸ºè„†å¼±çš„å®ç°æ–¹å¼ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172964" target="_blank" title="https://github.com/flutter/flutter/pull/172964" ref="nofollow noopener noreferrer">#172964</a>ï¼‰ã€‚è¿™ä¸€æ”¹è¿›å¸¦æ¥äº†æ›´å¯é çš„è¯­è¨€ç¯å¢ƒæ£€æµ‹ï¼Œå¹¶ä¸ºå…¨çƒç”¨æˆ·æä¾›äº†æ›´ä½³çš„ä½“éªŒã€‚</p>
<p>ä¸€ä¸ªç‰¹å®šäº Android ç³»ç»Ÿçš„æ¼æ´ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171973" target="_blank" title="https://github.com/flutter/flutter/pull/171973" ref="nofollow noopener noreferrer">#171973</a>ï¼‰å·²ä¿®å¤ï¼Œè¯¥æ¼æ´ä¸»è¦å½±å“é…å¤‡ç¡¬ä»¶é”®ç›˜çš„ä¸‰æ˜Ÿè®¾å¤‡ã€‚æ­¤å‰ï¼Œç”¨æˆ·ä¸æ–‡æœ¬æ¡†äº¤äº’å<code>TextField</code>ï¼ŒAndroid è¾“å…¥æ³•ç¼–è¾‘å™¨ (IME) å¯èƒ½ä¼šå¡åœ¨â€œè¿‡æœŸâ€çŠ¶æ€ã€‚è¿™ä¼šå¯¼è‡´ IME é”™è¯¯åœ°æ‹¦æˆªâ€œå›è½¦â€æˆ–â€œç©ºæ ¼â€é”®çš„æŒ‰ä¸‹ï¼Œä»è€Œé˜»æ­¢éæ–‡æœ¬æ§ä»¶ï¼ˆä¾‹å¦‚æ–‡æœ¬æ¡†<code>Checkbox</code>æˆ–<code>Radio</code>æŒ‰é’®ï¼‰æ¥æ”¶åˆ°äº‹ä»¶ã€‚æ­¤ä¿®â€‹â€‹å¤ç¨‹åºç¡®ä¿<code>InputMethodManager</code>åœ¨æ–‡æœ¬è¿æ¥å…³é—­æ—¶æ­£ç¡®é‡ç½® IMEï¼Œæ¸…é™¤å…¶â€œè¿‡æœŸâ€çŠ¶æ€ï¼Œå¹¶æ¢å¤ç”¨æˆ·å¯é¢„æœŸçš„ç¡¬ä»¶é”®ç›˜äº¤äº’ã€‚</p>
<h3 data-id="heading-7">ææ–™å’Œåº“æ¯”è’‚è¯ºæ›´æ–°</h3>
<p>Material å’Œ Cupertino åº“æŒç»­å‘å±•ï¼Œä¸“æ³¨äº API çš„ä¸€è‡´æ€§å’Œä¼˜åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°å¸¦æ¥äº†é‡è¦çš„ API è¿ç§»ã€å…¨æ–°çš„ç»„ä»¶åŠŸèƒ½ä»¥åŠè¯¸å¤šæ”¹è¿›ï¼Œè®©æ„å»ºç¾è§‚å®ç”¨çš„ç”¨æˆ·ç•Œé¢å˜å¾—æ›´åŠ è½»æ¾ã€‚</p>
<p>åŸºäºå·²å¼ƒç”¨çš„æ—§ç‰ˆæœ¬<code>MaterialState</code>ï¼Œæœ¬æ¬¡ç‰ˆæœ¬ç»§ç»­æ¨è¿›å†…éƒ¨å‘æ›´ç»Ÿä¸€çš„ç‰ˆæœ¬çš„è¿ç§»ã€‚è¿™æä¾›äº†ä¸€ç§ä¸€è‡´ä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„æ–¹å¼æ¥å®šä¹‰æ§ä»¶åœ¨ä¸åŒäº¤äº’çŠ¶æ€ï¼ˆä¾‹å¦‚æŒ‰ä¸‹ã€æ‚¬åœæˆ–ç¦ç”¨ï¼‰ä¸‹<code>WidgetState</code>çš„å¤–è§‚ï¼Œå¹¶ä¸”æ— éœ€å¯¹ç°æœ‰åº”ç”¨è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚æ­¤æ¬¡è¿ç§»å·²åº”ç”¨äºå¤šç§æ§ä»¶åŠå…¶ä¸»é¢˜ï¼ŒåŒ…æ‹¬<code>IconButton</code>ã€ã€å’Œï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173893" target="_blank" title="https://github.com/flutter/flutter/pull/173893" ref="nofollow noopener noreferrer">#173893</a>ï¼‰ã€‚æ–°çš„ API è¿˜å¢å¼ºäº†åŠŸèƒ½å’Œçµæ´»æ€§ï¼›ä¾‹å¦‚ï¼Œç°åœ¨åŒ…å«ä¸€ä¸ªå±æ€§ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F169821" target="_blank" title="https://github.com/flutter/flutter/pull/169821" ref="nofollow noopener noreferrer">#169821</a>ï¼‰ï¼Œå…è®¸ä»¥ç¼–ç¨‹æ–¹å¼æ§åˆ¶å…¶è§†è§‰çŠ¶æ€ï¼Œä»è€Œä¸ºæ›´è‡ªå®šä¹‰å’Œäº¤äº’å¼çš„è®¾è®¡æ‰“å¼€äº†å¤§é—¨ã€‚<code>ElevatedButton``Checkbox``Switch</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173893" target="_blank" title="https://github.com/flutter/flutter/pull/173893" ref="nofollow noopener noreferrer"/><code>IconButton``statesController</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F169821" target="_blank" title="https://github.com/flutter/flutter/pull/169821" ref="nofollow noopener noreferrer"/></p>
<p>æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿˜å¼•å…¥äº†å‡ ä¸ªæ–°ç‰¹æ€§å’Œä¾¿æ·çš„ APIã€‚<code>Badge.count</code>æ„é€ å‡½æ•°ç°åœ¨åŒ…å«ä¸€ä¸ª<code>maxCount</code>å‚æ•°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171054" target="_blank" title="https://github.com/flutter/flutter/pull/171054" ref="nofollow noopener noreferrer">#171054</a>ï¼‰ï¼Œå¯ä»¥è½»æ¾é™åˆ¶æ˜¾ç¤ºçš„æ•°é‡ï¼ˆä¾‹å¦‚ï¼Œæ˜¾ç¤ºâ€œ99+â€è€Œä¸æ˜¯â€œ100â€ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc36e56f6e7e457eb1916f4886662e16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=AIY9Kg%2BHsadiaQhvm3JyzoOwcyg%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†å®ç°æ›´ç²¾ç»†çš„æ‰‹åŠ¿æ§åˆ¶ï¼Œè¯¥<code>InkWell</code>å°éƒ¨ä»¶ç°åœ¨å…·æœ‰<code>onLongPressUp</code>å›è°ƒåŠŸèƒ½ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173221" target="_blank" title="https://github.com/flutter/flutter/pull/173221" ref="nofollow noopener noreferrer">#173221</a>ï¼‰ï¼Œå¯ç”¨äºè§¦å‘ä»…åœ¨ç”¨æˆ·æŠ¬èµ·æ‰‹æŒ‡æ—¶æ‰åº”å®Œæˆçš„æ“ä½œã€‚</p>
<p>Cupertino åº“ä¹Ÿåœ¨ä¸æ–­åŠªåŠ›æå‡å…¶ iOS å…¼å®¹æ€§ã€‚<code>CupertinoSlidingSegmentedControl</code>æ–°å¢äº†ä¸€ä¸ª<code>isMomentary</code>å±æ€§ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F164262" target="_blank" title="https://github.com/flutter/flutter/pull/164262" ref="nofollow noopener noreferrer">#164262</a>ï¼‰ï¼Œå…è®¸æ§ä»¶åœ¨ä¸ä¿æŒé€‰ä¸­çŠ¶æ€çš„æƒ…å†µä¸‹è§¦å‘æ“ä½œã€‚ä¸ºäº†æ›´å¥½åœ°åŒ¹é…åŸç”Ÿ iOS çš„è¡Œä¸ºï¼Œè¯¥æ§ä»¶<code>CupertinoSheet</code>åœ¨å®Œå…¨å±•å¼€çŠ¶æ€ä¸‹å‘ä¸Šæ‹–åŠ¨æ—¶ï¼Œç°åœ¨ä¼šå‘ˆç°å¾®å¦™çš„â€œæ‹‰ä¼¸â€æ•ˆæœï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F168547" target="_blank" title="https://github.com/flutter/flutter/pull/168547" ref="nofollow noopener noreferrer">#168547</a>ï¼‰ã€‚</p>
<p>æœ€åï¼Œæœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°åŒ…å«å¤šé¡¹æ”¹è¿›ï¼Œä¼˜åŒ–äº†æ ¸å¿ƒç»„ä»¶çš„è¡Œä¸ºã€‚äº®ç‚¹åŒ…æ‹¬ä¿®å¤äº†<code>DropdownMenuFormField</code>è¡¨å•é‡ç½®æ—¶æ­£ç¡®æ¸…é™¤æ–‡æœ¬å­—æ®µçš„é—®é¢˜ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174937" target="_blank" title="https://github.com/flutter/flutter/pull/174937" ref="nofollow noopener noreferrer">#174937</a>ï¼‰ï¼Œä»¥åŠæ›´æ–°äº†ç»„ä»¶ä»¥<code>SegmentedButton</code>æ”¹è¿›ç„¦ç‚¹å¤„ç†ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173953" target="_blank" title="https://github.com/flutter/flutter/pull/173953" ref="nofollow noopener noreferrer">#173953</a>ï¼‰å¹¶ç¡®ä¿å…¶è¾¹æ¡†èƒ½å¤Ÿæ­£ç¡®åæ˜ ç»„ä»¶çš„çŠ¶æ€ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172754" target="_blank" title="https://github.com/flutter/flutter/pull/172754" ref="nofollow noopener noreferrer">#172754</a>ï¼‰ã€‚</p>
<h3 data-id="heading-8">è§£è€¦ Material and Cupertino</h3>
<p>æˆ‘ä»¬ä¸€ç›´åœ¨è¿›è¡Œå¤§é‡çš„è§„åˆ’å·¥ä½œï¼Œæ—¨åœ¨å°† Material å’Œ Cupertino åº“ä¸æ¡†æ¶è§£è€¦ã€‚ä»¥ä¸‹åˆ—è¡¨åŒ…å«äº†å›´ç»•è¿‘æœŸå‘å¸ƒçš„ä¸€äº›è®¾è®¡æ–‡æ¡£å±•å¼€çš„è®¨è®ºã€‚</p>
<p><strong>æ”¹è¿› flutter/packages çš„å‘å¸ƒæµç¨‹ï¼Œè§£è€¦åå°†åŒ…å« Material å’Œ Cupertinoã€‚</strong></p>
<ul>
<li>çŠ¶æ€ï¼šå·²å†³å®š</li>
<li>æ€è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fu%2F1%2Fd%2F18kjoP-4LAXEllugVOQRg6vZELyD6MuxlKilLD4lFxSY%2Fedit" target="_blank" title="https://docs.google.com/document/u/1/d/18kjoP-4LAXEllugVOQRg6vZELyD6MuxlKilLD4lFxSY/edit" ref="nofollow noopener noreferrer">ç¬¬ä¸€æ–¹è½¯ä»¶åŒ…å‘å¸ƒç­–ç•¥</a></li>
<li>å†³å®šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1jUoFaawutbYsCI5oY3pDP_l-xpv6FhDKlcI1-EoT02s%2Fedit%3Ftab%3Dt.0" target="_blank" title="https://docs.google.com/document/d/1jUoFaawutbYsCI5oY3pDP_l-xpv6FhDKlcI1-EoT02s/edit?tab=t.0" ref="nofollow noopener noreferrer">æ‰¹é‡å‘å¸ƒå•é¡µè¯´æ˜ï¼ˆå…¬å¼€å…±äº«ï¼‰</a></li>
</ul>
<p><strong>é¢œè‰²å’Œç‚¹é˜µé€Ÿè®°</strong></p>
<ul>
<li>çŠ¶æ€ï¼šå·²å†³å®š</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1y38TN9AUTyd0eTbu4kx4FiNgfsLDPvWvi92Fv5HWFjQ%2Fedit%3Ftab%3Dt.0%23heading%3Dh.pub7jnop54q0" target="_blank" title="https://docs.google.com/document/d/1y38TN9AUTyd0eTbu4kx4FiNgfsLDPvWvi92Fv5HWFjQ/edit?tab=t.0#heading=h.pub7jnop54q0" ref="nofollow noopener noreferrer">Flutter åŸºç¡€é…è‰²æ–¹æ¡ˆï¼ˆå…¬å¼€åˆ†äº«ï¼‰</a></li>
</ul>
<p><strong>è§£è€¦æµ‹è¯•</strong></p>
<ul>
<li>çŠ¶æ€ï¼šè¿›è¡Œä¸­</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1UHxALQqCbmgjnM1RNV9xE2pK3IGyx-UktGX1D7hYCjs%2Fedit%3Ftab%3Dt.0" target="_blank" title="https://docs.google.com/document/d/1UHxALQqCbmgjnM1RNV9xE2pK3IGyx-UktGX1D7hYCjs/edit?tab=t.0" ref="nofollow noopener noreferrer">è§£è€¦æ¡†æ¶æµ‹è¯•ï¼ˆå…¬å¼€å…±äº«ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F177028" target="_blank" title="https://github.com/flutter/flutter/issues/177028" ref="nofollow noopener noreferrer">github.com/flutter/fluâ€¦</a></li>
</ul>
<p><strong>æ–‡æœ¬</strong></p>
<ul>
<li>çŠ¶æ€ï¼šè®¨è®ºä¸­</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1oFezK5leJzTWA5lsw3BQGx7gLbhpSL8dMleU3HD7bNY%2Fedit%3Ftab%3Dt.0" target="_blank" title="https://docs.google.com/document/d/1oFezK5leJzTWA5lsw3BQGx7gLbhpSL8dMleU3HD7bNY/edit?tab=t.0" ref="nofollow noopener noreferrer">Flutter å°†è®¾è®¡ä¸æ–‡æœ¬è§£è€¦ï¼ˆå…¬å¼€åˆ†äº«ï¼‰</a></li>
</ul>
<h3 data-id="heading-9">æ»šåŠ¨ï¼šæ›´ç¨³å¥ã€æ›´å¯é¢„æµ‹çš„æ¡å½¢æ»šåŠ¨</h3>
<p>æ­¤ç‰ˆæœ¬å¸¦æ¥äº†ä¸€ç³»åˆ—ä¿®å¤ï¼Œä½¿å¾—æ„å»ºå¤æ‚çš„æ»šåŠ¨å¸ƒå±€ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨<code>SliverMainAxisGroup</code>å’Œçš„å¸ƒå±€<code>SliverCrossAxisGroup</code>ï¼‰æ›´åŠ ç¨³å¥å’Œå¯é¢„æµ‹ã€‚</p>
<p>ä½¿ç”¨è¿™äº›ç»„ä»¶å°†å¤šä¸ª Sliver åˆ†ç»„çš„å¼€å‘è€…ä¼šå‘ç°ï¼Œæ‰‹åŠ¿å¤„ç†ç°åœ¨æ›´åŠ å¯é ã€‚ç°åœ¨å¯ä»¥æ­£ç¡®è®¡ç®—è¿™äº›ç»„å†… Sliver çš„ç‚¹å‡»å’Œå…¶ä»–æŒ‡é’ˆäº‹ä»¶çš„å‘½ä¸­æµ‹è¯•ï¼Œç¡®ä¿ç”¨æˆ·äº¤äº’æŒ‰é¢„æœŸè¿è¡Œï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174265" target="_blank" title="https://github.com/flutter/flutter/pull/174265" ref="nofollow noopener noreferrer">#174265</a>ï¼‰ã€‚</p>
<p>å…¶ä»–å‡ é¡¹ä¿®å¤ä¹Ÿä½¿å¾—æ»šåŠ¨è¡Œä¸ºæ›´åŠ å‡†ç¡®<code>SliverMainAxisGroup</code>ã€‚ä½¿ç”¨å›ºå®šæ ‡é¢˜æ—¶è¿‡åº¦æ»šåŠ¨çš„é—®é¢˜å·²å¾—åˆ°è§£å†³ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173349" target="_blank" title="https://github.com/flutter/flutter/pull/173349" ref="nofollow noopener noreferrer">#173349</a>ï¼‰ï¼Œè°ƒç”¨<code>showOnScreen</code>æ˜¾ç¤ºå°ç‰‡æ®µç°åœ¨å¯ä»¥æ­£å¸¸å·¥ä½œï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171339" target="_blank" title="https://github.com/flutter/flutter/pull/171339" ref="nofollow noopener noreferrer">#171339</a>ï¼‰ï¼Œå¹¶ä¸”å†…éƒ¨æ»šåŠ¨åç§»è®¡ç®—æ›´åŠ ç²¾ç¡®ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174369" target="_blank" title="https://github.com/flutter/flutter/pull/174369" ref="nofollow noopener noreferrer">#174369</a>ï¼‰ã€‚</p>
<p>å¯¹äºæ„å»ºè‡ªå®šä¹‰æ»šåŠ¨è§†å›¾çš„å¼€å‘è€…æ¥è¯´ï¼Œæ–°çš„<code>SliverGrid.list</code>æ„é€ å‡½æ•°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173925" target="_blank" title="https://github.com/flutter/flutter/pull/173925" ref="nofollow noopener noreferrer">#173925</a>ï¼‰æä¾›äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼ï¼Œå¯ä»¥ä»ç®€å•çš„å­åˆ—è¡¨åˆ›å»ºç½‘æ ¼ã€‚</p>
<p>æ­¤æ¬¡æ›´æ–°è¿˜æ”¹è¿›äº†å¤æ‚å¸ƒå±€ä¸­é”®ç›˜å’Œæ–¹å‘é”®ç”¨æˆ·çš„ç„¦ç‚¹å¯¼èˆªä½“éªŒã€‚åœ¨å…·æœ‰ä¸åŒæ»šåŠ¨è½´çš„åµŒå¥—æ»šåŠ¨è§†å›¾ï¼ˆä¾‹å¦‚æ°´å¹³è½®æ’­å›¾çš„å‚ç›´åˆ—è¡¨ï¼‰ä¸­ï¼Œæ–¹å‘æ€§ç„¦ç‚¹å¯¼èˆªç°åœ¨æ›´åŠ å¯é¢„æµ‹ï¼Œé˜²æ­¢ç„¦ç‚¹åœ¨ä¸åŒéƒ¨åˆ†ä¹‹é—´æ„å¤–è·³è½¬ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172875" target="_blank" title="https://github.com/flutter/flutter/pull/172875" ref="nofollow noopener noreferrer">#172875</a>ï¼‰ã€‚</p>
<h3 data-id="heading-10">æ— éšœç¢è®¾è®¡ï¼šä¸ºæ‰€æœ‰ç”¨æˆ·æä¾›æ›´å…·åŒ…å®¹æ€§çš„ä½“éªŒ</h3>
<p>ç¡®ä¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®åº”ç”¨ç¨‹åºæ˜¯ Flutter æ¡†æ¶çš„åŸºçŸ³ã€‚æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°å»¶ç»­äº†è¿™ä¸€æ‰¿è¯ºï¼Œèµ‹äºˆå¼€å‘è€…æ›´å¤šç¨‹åºæ§åˆ¶æƒï¼Œæ”¹å–„äº†å›½é™…ç”¨æˆ·çš„ä½“éªŒï¼Œå¹¶ä¼˜åŒ–äº†æ ¸å¿ƒç»„ä»¶çš„å¯è®¿é—®æ€§ã€‚</p>
<p>å¯¹äºæ„å»ºå¤æ‚åº”ç”¨ç¨‹åºçš„å¼€å‘è€…è€Œè¨€ï¼Œæ­¤ç‰ˆæœ¬å¼•å…¥äº†åœ¨ iOS ä¸Šé»˜è®¤å¯ç”¨è¾…åŠ©åŠŸèƒ½çš„åŠŸèƒ½<code>WidgetsFlutterBinding.instance.ensureSemantics</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174163" target="_blank" title="https://github.com/flutter/flutter/pull/174163" ref="nofollow noopener noreferrer">#174163</a><code>debugDumpSemanticsTree</code>Â ï¼‰ã€‚æ­¤å¤–ï¼Œç”±äºæ–°å¢äº†æ–‡æœ¬è¾“å…¥éªŒè¯ç»“æœä¿¡æ¯ï¼Œæœ‰åŠ©äºæ›´å¿«åœ°è¯Šæ–­é—®é¢˜ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174677" target="_blank" title="https://github.com/flutter/flutter/pull/174677" ref="nofollow noopener noreferrer">#174677</a>Â ï¼‰ï¼Œå› æ­¤è°ƒè¯•è¾…åŠ©åŠŸèƒ½é—®é¢˜ä¹Ÿå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
<p>ä¸ºäº†å¢å¼ºåŸºäº Sliver çš„æ»šåŠ¨è§†å›¾çš„è¾…åŠ©åŠŸèƒ½ï¼Œæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª<code>SliverSemantics</code>ç»„ä»¶ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F167300" target="_blank" title="https://github.com/flutter/flutter/pull/167300" ref="nofollow noopener noreferrer">#167300</a>ï¼‰ã€‚ä¸ç°æœ‰ç»„ä»¶ç±»ä¼¼ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ»šåŠ¨è§†å›¾ä¸­<code>Semantics</code>ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œä¸º Sliver æ ‘çš„å„ä¸ªéƒ¨åˆ†æ·»åŠ ç‰¹å®šçš„è¯­ä¹‰ä¿¡æ¯ã€‚è¿™å¯¹äºæ ‡æ³¨æ ‡é¢˜ã€åˆ†é…è¯­ä¹‰è§’è‰²ä»¥åŠä¸ºå±å¹•é˜…è¯»å™¨æ·»åŠ æè¿°æ€§æ ‡ç­¾å°¤ä¸ºæœ‰ç”¨ï¼Œä»è€Œä¸ºç”¨æˆ·æä¾›æ›´æ˜“äºç†è§£å’Œè®¿é—®çš„ä½“éªŒã€‚<code>SliverSemantics``CustomScrollView</code></p>
<p>æœ€åï¼Œæ ¸å¿ƒç»„ä»¶çš„è¾…åŠ©åŠŸèƒ½æŒç»­æ”¹è¿›ã€‚<code>CupertinoExpansionTile</code>ç°åœ¨é»˜è®¤æƒ…å†µä¸‹å¯è®¿é—®ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174480" target="_blank" title="https://github.com/flutter/flutter/pull/174480" ref="nofollow noopener noreferrer">#174480</a>ï¼‰ï¼Œå¹¶ä¸”è¯¥<code>AutoComplete</code>ç»„ä»¶ç°åœ¨ä¼šå‘ç”¨æˆ·æ’­æŠ¥æœç´¢ç»“æœçš„çŠ¶æ€ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173480" target="_blank" title="https://github.com/flutter/flutter/pull/173480" ref="nofollow noopener noreferrer">#173480</a>ï¼‰ã€‚å…¶ä»–æ”¹è¿›ï¼Œä¾‹å¦‚å¢å¤§è§¦æ‘¸ç›®æ ‡<code>TimePicker</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F170060" target="_blank" title="https://github.com/flutter/flutter/pull/170060" ref="nofollow noopener noreferrer">#170060</a>ï¼‰ï¼Œä¹Ÿæœ‰åŠ©äºæä¾›æ›´ä¾¿æ·çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚</p>
<h2 data-id="heading-11">iOS</h2>
<p>æˆ‘ä»¬å¾ˆé«˜å…´åœ°ç¡®è®¤ï¼ŒFlutter å®Œå…¨æ”¯æŒæœ€æ–°çš„å¹³å°ç‰ˆæœ¬ï¼šiOS 26ã€Xcode 26 å’Œ macOS 26ï¼Œè¿™äº›ç‰ˆæœ¬å‡äº 9 æœˆå‘å¸ƒã€‚è¿™ç¡®ä¿æ‚¨å¯ä»¥ç«‹å³åœ¨ Apple æœ€æ–°çš„æ“ä½œç³»ç»Ÿå’Œå·¥å…·ä¸Šå¼€å§‹å¼€å‘å’Œæµ‹è¯•æ‚¨çš„åº”ç”¨ã€‚</p>
<p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒFlutter æœ€æ–°ç‰ˆæœ¬ä¸º iOS å¼€å‘è€…å¸¦æ¥äº†æ˜¾è‘—çš„ä½“éªŒæå‡ï¼Œè§£å†³äº†ç”¨æˆ·é•¿æœŸä»¥æ¥çš„ä¸€ä¸ªç—›ç‚¹ï¼šåœ¨ç‰©ç†è®¾å¤‡ä¸Šè¿è¡Œ Flutter åº”ç”¨æ—¶ï¼ŒXcode åº”ç”¨å¿…é¡»è‡ªåŠ¨å¯åŠ¨<code>flutter run</code>ã€‚æˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ–°çš„éƒ¨ç½²æ–¹å¼ï¼Œä½¿ç”¨ Xcode 26 å‘½ä»¤è¡Œå·¥å…· <code>npm runÂ </code>devicectl<code>dev</code> æ¥è¿›è¡Œåº”ç”¨çš„å®‰è£…ã€å¯åŠ¨å’Œè°ƒè¯•ã€‚è¿™ç§æ–¹å¼æ— éœ€åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­è°ƒç”¨ Xcode åº”ç”¨ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å®Œå…¨ä¾èµ–äºå‘½ä»¤è¡Œ Xcode æ„å»ºå·¥å…·ã€‚å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ <code>npm run dev</code> ç¦ç”¨æ­¤éƒ¨ç½²æ–¹å¼<code>flutter config --no-enable-lldb-debugging</code>ï¼Œå¹¶è¯·<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2Fnew%2Fchoose" target="_blank" title="https://github.com/flutter/flutter/issues/new/choose" ref="nofollow noopener noreferrer">æäº¤ issue</a>å‘ŠçŸ¥æˆ‘ä»¬ï¼</p>
<p>æ­¤å‰ï¼Œæ­¤åŠŸèƒ½ä¾èµ–äº Xcode è‡ªåŠ¨åŒ–ï¼Œä½†åœ¨ Xcode 26 ä¸­å˜å¾—ä¸ç¨³å®šä¸”å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯åœ¨è¿ç»­è¿è¡Œå‘½ä»¤æ—¶ã€‚å¦‚æœæ‚¨ç°åœ¨æ­£åœ¨ä¸ºæœ€æ–°çš„ Apple ç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨å°† Flutter ç‰ˆæœ¬æ›´æ–°åˆ° 3.38 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-12">UIScene ç”Ÿå‘½å‘¨æœŸè¿ç§»</h3>
<p>Flutter 3.38 åŒ…å«äº†å¯¹è‹¹æœå¼ºåˆ¶è¦æ±‚çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ftechnotes%2Ftn3187-migrating-to-the-uikit-scene-based-life-cycle" target="_blank" title="https://developer.apple.com/documentation/technotes/tn3187-migrating-to-the-uikit-scene-based-life-cycle" ref="nofollow noopener noreferrer">UIScene ç”Ÿå‘½å‘¨æœŸ</a>çš„é‡è¦æ”¯æŒã€‚è¿™æ˜¯ç»§è‹¹æœåœ¨ WWDC25 ä¸Šå®£å¸ƒâ€œåœ¨ iOS 26 ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œä»»ä½•ä½¿ç”¨æœ€æ–° SDK æ„å»ºçš„ UIKit åº”ç”¨éƒ½å¿…é¡»ä½¿ç”¨ UIScene ç”Ÿå‘½å‘¨æœŸï¼Œå¦åˆ™å°†æ— æ³•å¯åŠ¨â€ä¹‹åçš„ä¸€é¡¹å…³é”®ä¸”ç§¯æçš„æ›´æ–°ã€‚</p>
<p>ä¸ºç¡®ä¿æ‚¨çš„ iOS Flutter åº”ç”¨ç¨‹åºåœ¨æœªæ¥çš„ iOS ç‰ˆæœ¬ä¸Šä¿æŒå…¼å®¹æ€§å¹¶æˆåŠŸå¯åŠ¨ï¼Œéœ€è¦è¿›è¡Œè¿ç§»ã€‚</p>
<p><strong>è¿ç§» Flutter åº”ç”¨ç¨‹åº</strong></p>
<p>æ‰€æœ‰ç°æœ‰çš„ iOS Flutter åº”ç”¨éƒ½å¿…é¡»è¿ç§»åˆ°æ–°çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®Œæˆæ­¤è¿ç§»ï¼š</p>
<ol>
<li>æ‰‹åŠ¨è¿ç§»ï¼šè¯·æŒ‰ç…§ Flutter<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes%2Fuiscenedelegate%23migration-guide-for-flutter-apps" target="_blank" title="https://docs.flutter.dev/release/breaking-changes/uiscenedelegate#migration-guide-for-flutter-apps" ref="nofollow noopener noreferrer">ç½‘ç«™</a>ä¸Šæä¾›çš„æ‰‹åŠ¨è¿ç§»è¯´æ˜è¿›è¡Œæ“ä½œã€‚</li>
<li>è‡ªåŠ¨è¿ç§»ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰ï¼šå¯ç”¨æ­¤å®éªŒæ€§åŠŸèƒ½å¯è‡ªåŠ¨å¤„ç†è¿ç§»ã€‚æ­¤åŠŸèƒ½å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­é»˜è®¤å¯ç”¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li>
</ol>
<p><code>flutter config --enable-uiscene-migration</code></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fplans%3Fsource%3Dupgrade_membership---post_li_non_moc_upsell--3f7b258f7228---------------------------------------" target="_blank" title="https://medium.com/plans?source=upgrade_membership---post_li_non_moc_upsell--3f7b258f7228---------------------------------------" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d130648ca14f57b12f161cbe22a35b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=hLwCNkBRffP8UU%2BRs0bp8Vt4SWs%3D" alt="æˆä¸ºä¼šå‘˜" loading="lazy"/></a></p>
<p><strong>è¿ç§» Flutter æ’ä»¶</strong></p>
<p>ä¾èµ–åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„ Flutter æ’ä»¶å¿…é¡»æ›´æ–°ä¸ºä½¿ç”¨ UIScene ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚æ’ä»¶å¼€å‘è€…åº”å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes%2Fuiscenedelegate%23migration-guide-for-flutter-plugins" target="_blank" title="https://docs.flutter.dev/release/breaking-changes/uiscenedelegate#migration-guide-for-flutter-plugins" ref="nofollow noopener noreferrer">è¿ç§»æŒ‡å—</a>ã€‚æœªè¿ç§»çš„æ’ä»¶å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­æ˜¾ç¤ºè­¦å‘Šã€‚</p>
<p><strong>è¿ç§»åµŒå…¥å¼ Flutterï¼ˆå¯é€‰ï¼‰</strong></p>
<p>å¯¹äºå°† Flutter åµŒå…¥åŸç”Ÿå®¿ä¸»åº”ç”¨ç¨‹åºçš„é¡¹ç›®ï¼Œè¿ç§»æ˜¯å¯é€‰çš„ï¼Œä½†å¼ºçƒˆå»ºè®®è¿›è¡Œã€‚ä½¿ç”¨â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes%2Fuiscenedelegate%23migration-guide-for-adding-flutter-to-existing-app-add-to-app" target="_blank" title="https://docs.flutter.dev/release/breaking-changes/uiscenedelegate#migration-guide-for-adding-flutter-to-existing-app-add-to-app" ref="nofollow noopener noreferrer">æ·»åŠ åˆ°åº”ç”¨ç¨‹åºè¿ç§»æŒ‡å—â€</a>é‡‡ç”¨ Flutter æ–°çš„ UIScene API ï¼Œå¯ä»¥ä¸ºæ‚¨çš„æ’ä»¶å¯ç”¨åœºæ™¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œä»è€Œç¡®ä¿ä¸ Flutter ç”Ÿæ€ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚</p>
<h2 data-id="heading-13">å®‰å“</h2>
<h3 data-id="heading-14">16KBé¡µé¢å¤§å°å…¼å®¹æ€§</h3>
<p>å‡çº§åˆ° Flutter 3.38 æ˜¯æ»¡è¶³<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fpractices%2Fpage-sizes" target="_blank" title="https://developer.android.com/guide/practices/page-sizes" ref="nofollow noopener noreferrer">Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹æ€§è¦æ±‚</a>çš„å¿…è¦å‡†å¤‡ã€‚ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid-developers.googleblog.com%2F2025%2F05%2Fprepare-play-apps-for-devices-with-16kb-page-size.html" target="_blank" title="https://android-developers.googleblog.com/2025/05/prepare-play-apps-for-devices-with-16kb-page-size.html" ref="nofollow noopener noreferrer">2025 å¹´ 11 æœˆ 1 æ—¥</a>èµ·ï¼Œé¢å‘ Android 15 åŠæ›´é«˜ç‰ˆæœ¬çš„åº”ç”¨å¿…é¡»æ”¯æŒ 16 KB é¡µé¢ã€‚æ­¤é¡¹å˜æ›´å¯ç¡®ä¿æ‚¨çš„åº”ç”¨åœ¨é«˜å†…å­˜è®¾å¤‡ä¸Šæ­£å¸¸è¿è¡Œï¼Œå¹¶å¸¦æ¥æ€§èƒ½æå‡ï¼Œä¾‹å¦‚å¯åŠ¨é€Ÿåº¦æå‡é«˜è¾¾ 30%ã€‚Flutter 3.38 å°†é»˜è®¤çš„ Android ndkVersion æ›´æ–°ä¸º NDK r28ï¼Œè¿™æ˜¯åŸç”Ÿä»£ç å®ç° 16 KB é¡µé¢å¤§å°æ”¯æŒçš„æœ€ä½è¦æ±‚ã€‚</p>
<h3 data-id="heading-15">å†…å­˜ä¿®å¤</h3>
<p>Flutter 3.38<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F173770" target="_blank" title="https://github.com/flutter/flutter/issues/173770" ref="nofollow noopener noreferrer">ä¿®å¤äº†</a>ä¸€ä¸ªå½±å“æ‰€æœ‰ Android å¹³å° Flutter åº”ç”¨çš„ä¸¥é‡å†…å­˜æ³„æ¼é—®é¢˜ã€‚è¯¥é—®é¢˜ï¼ˆåœ¨ 3.29.0 ç‰ˆæœ¬ä¸­å¼•å…¥ï¼‰å‘ç”Ÿåœ¨ Activity åœ¨é€€å‡ºæ—¶è¢«é”€æ¯çš„æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯å¼€å‘è€…è®¾ç½®ä¸­é…ç½®çš„é”€æ¯æ–¹å¼ï¼Œè¿˜æ˜¯ç”±äºå†…å­˜ä¸è¶³è€Œè¢«ç³»ç»Ÿå¼ºåˆ¶ç»ˆæ­¢çš„ Activityã€‚</p>
<h3 data-id="heading-16">Android ä¾èµ–é¡¹æ›´æ–°</h3>
<p>ä¸ºæ‚¨çš„åº”ç”¨æ‰¾åˆ°åˆé€‚çš„ Android ä¾èµ–é¡¹ç‰ˆæœ¬ç»„åˆé€šå¸¸æ˜¯ä¸€é¡¹æŒ‘æˆ˜ï¼Œè¿™äº›ä¾èµ–é¡¹åŒ…æ‹¬ Gradleã€Android Gradle æ’ä»¶ (AGP)ã€Kotlin Gradle æ’ä»¶ (KGP)ã€Java ç­‰ã€‚å¯¹äº Flutter 3.38 ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åœ¨æŒç»­é›†æˆ (CI) ç¯å¢ƒä¸­æµ‹è¯•å¹¶ç¡®è®¤äº†ä»¥ä¸‹ Android ä¾èµ–é¡¹ç‰ˆæœ¬ç»„åˆçš„å…¼å®¹æ€§ï¼š</p>
<ul>
<li><strong>Java 17</strong>ï¼šFlutter 3.38 ä¸­ Android å¼€å‘çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ã€‚</li>
<li><strong>KGP 2.2.20</strong>ï¼šè¯¥å·¥å…·<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fgradle-configure-project.html%23apply-the-plugin" target="_blank" title="https://kotlinlang.org/docs/gradle-configure-project.html#apply-the-plugin" ref="nofollow noopener noreferrer">æ”¯æŒçš„æœ€é«˜Kotlin Gradle æ’ä»¶ç‰ˆæœ¬ã€‚</a></li>
<li><strong>AGP 8.11.1</strong>ï¼šæœ€æ–°çš„ Android Gradle æ’ä»¶ç‰ˆæœ¬ï¼Œä¸ KGP 2.2.20<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fgradle-configure-project.html%23apply-the-plugin" target="_blank" title="https://kotlinlang.org/docs/gradle-configure-project.html#apply-the-plugin" ref="nofollow noopener noreferrer">å…¼å®¹ã€‚</a></li>
<li><strong>Gradle 8.14</strong>ï¼šæ­¤ç‰ˆæœ¬ä¸æ‰€é€‰çš„ Javaã€KGP å’Œ AGP ç‰ˆæœ¬å…¼å®¹ã€‚è¯·æ³¨æ„ï¼ŒAGP 8.11.1 çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ä¸º Gradle 8.13ã€‚</li>
</ul>
<p>ä¸ºäº†ç¡®ä¿æ‚¨çš„åº”ç”¨èƒ½å¤Ÿåœ¨ä¸åŒçš„ Flutter ç‰ˆæœ¬ä¹‹é—´æ— ç¼è¿è¡Œï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨æ„å»ºæ–‡ä»¶ä¸­ä½¿ç”¨ Flutter SDK æä¾›çš„ API çº§åˆ«å˜é‡ã€‚æ­¤ç‰ˆæœ¬é…ç½®çš„å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>flutter.compileSdkVersion</code>ï¼ˆAPI 36ï¼‰</li>
<li><code>flutter.targetSdkVersion</code>ï¼ˆAPI 36ï¼‰</li>
<li><code>flutter.minSdkVersion</code>ï¼ˆAPI 24ï¼‰æˆ–æ›´é«˜</li>
</ul>
<h2 data-id="heading-17">å¼•æ“</h2>
<h3 data-id="heading-18">æ€§èƒ½å åŠ å±‚</h3>
<p>æ€§èƒ½å åŠ å±‚å·²é‡æ„ï¼Œæ•ˆç‡æ›´é«˜ï¼Œåœ¨ Skia å’Œ Impeller åç«¯ä¸Šçš„æ¸²â€‹â€‹æŸ“æ—¶é—´å‡æœ‰æ‰€ç¼©çŸ­ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä»¥æ›´å°‘çš„å¼€é”€è·å¾—æ›´å‡†ç¡®çš„æ€§èƒ½æ•°æ®ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176364" target="_blank" title="https://github.com/flutter/flutter/pull/176364" ref="nofollow noopener noreferrer">#176364</a>ï¼‰</p>
<h3 data-id="heading-19"><strong>Vulkan å’Œ OpenGL ES</strong></h3>
<p>å¯¹ Vulkan å’Œ OpenGL ES åç«¯çš„è¯¸å¤šä¿®å¤å’Œæ”¹è¿›æé«˜äº†åœ¨æ›´å¹¿æ³›è®¾å¤‡ä¸Šçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚è¿™åŒ…æ‹¬æ›´å¥½åœ°å¤„ç†ç®¡çº¿ç¼“å­˜ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176322" target="_blank" title="https://github.com/flutter/flutter/pull/176322" ref="nofollow noopener noreferrer">#176322</a>ï¼‰ã€æ …æ ç­‰å¾…å™¨ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173085" target="_blank" title="https://github.com/flutter/flutter/pull/173085" ref="nofollow noopener noreferrer">#173085</a>ï¼‰å’Œå›¾åƒå¸ƒå±€è¿‡æ¸¡ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173884" target="_blank" title="https://github.com/flutter/flutter/pull/173884" ref="nofollow noopener noreferrer">#173884</a>ï¼‰ã€‚</p>
<h3 data-id="heading-20"><strong>æ¸²æŸ“å™¨ç»Ÿä¸€</strong></h3>
<p>CanvasKit å’Œ Skwasm æ¸²æŸ“å™¨çš„ç»Ÿä¸€å·¥ä½œä»åœ¨ç»§ç»­ã€‚æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°åŒ…å«å¤§é‡é‡æ„ï¼Œä»¥åœ¨ä¸¤è€…ä¹‹é—´å…±äº«æ›´å¤šä»£ç ï¼Œè¿™å°†å¸¦æ¥æ›´ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒï¼Œå¹¶åŠ å¿«æœªæ¥çš„å¼€å‘é€Ÿåº¦ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174588" target="_blank" title="https://github.com/flutter/flutter/pull/174588" ref="nofollow noopener noreferrer">#174588</a>ï¼‰ã€‚</p>
<h3 data-id="heading-21">çº¿ç¨‹åˆå¹¶</h3>
<p>iOS å’Œ Android ç³»ç»Ÿä¸­å·²ç§»é™¤é€‰æ‹©é€€å‡ºçº¿ç¨‹åˆå¹¶çš„åŠŸèƒ½ã€‚æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è§‚çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DmiW7vCmQwnw" target="_blank" title="https://www.youtube.com/watch?v=miW7vCmQwnw" ref="nofollow noopener noreferrer">ç²¾å½©çš„çº¿ç¨‹åˆå¹¶</a>è§†é¢‘ã€‚</p>
<h2 data-id="heading-22">å¼€å‘è€…å·¥å…·å’Œé›†æˆå¼€å‘ç¯å¢ƒ</h2>
<h3 data-id="heading-23">å®éªŒæ€§å°éƒ¨ä»¶é¢„è§ˆ â€” æ›´æ–°</h3>
<p>Flutter 3.35 å¼•å…¥äº† Widget Previewsï¼ˆç»„ä»¶é¢„è§ˆï¼‰ï¼Œè¿™æ˜¯ä¸€é¡¹å®éªŒæ€§åŠŸèƒ½ï¼Œæ—¨åœ¨æ”¶é›†ç¤¾åŒºçš„æ—©æœŸåé¦ˆã€‚Flutter 3.38 ç‰ˆæœ¬å¯¹ Widget Previews è¿›è¡Œäº†é‡å¤§æ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>IDE é›†æˆ</strong>ï¼šæˆ‘ä»¬çš„ VSCode å’Œ IntelliJ/Android Studio æ’ä»¶å‡å·²æ›´æ–°ï¼Œåˆæ­¥æ”¯æŒ Widget é¢„è§ˆã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨ IDE ä¸­æŸ¥çœ‹é¢„è§ˆï¼Œä»è€Œè·å¾—æ›´æµç•…çš„å¼€å‘ä½“éªŒã€‚</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eddd9325a394e5abc299424e8482928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=xfueeJ5rK3Rqbb3w5tpXhWW6rbg%3D" alt="" loading="lazy"/></p>
<p><em>VSCode ä¸­åµŒå…¥äº†å°éƒ¨ä»¶é¢„è§ˆã€‚</em></p>
<p>åœ¨é›†æˆå¼€å‘ç¯å¢ƒ (IDE) ä¸­ä½¿ç”¨æ—¶ï¼Œæ§ä»¶é¢„è§ˆç¯å¢ƒé»˜è®¤é…ç½®ä¸ºæ ¹æ®å½“å‰é€‰å®šçš„æºæ–‡ä»¶ç­›é€‰æ˜¾ç¤ºçš„é¢„è§ˆï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5523ec1be60e4007882e555de4dfec75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=1Tkpqux%2BBqbL1BzaaGM0GWdk1KA%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>å°éƒ¨ä»¶é¢„è§ˆç¯å¢ƒä¸»é¢˜å’Œæ§ä»¶æ”¹è¿›</strong>ï¼šå°éƒ¨ä»¶é¢„è§ˆç¯å¢ƒç°åœ¨æ”¯æŒæµ…è‰²å’Œæ·±è‰²æ¨¡å¼ï¼Œä»¥åŠè‡ªå®šä¹‰ IDE é…è‰²æ–¹æ¡ˆï¼Œä»¥åŒ¹é…æ‚¨çš„å¼€å‘ç¯å¢ƒã€‚å°éƒ¨ä»¶é¢„è§ˆç¯å¢ƒä¸­çš„æ§ä»¶ä¹Ÿè¿›è¡Œäº†è°ƒæ•´ï¼Œä»¥å‡å°‘å ç”¨ç©ºé—´ï¼Œä»è€Œä¸ºæ¸²æŸ“é¢„è§ˆè…¾å‡ºæ›´å¤šç©ºé—´ã€‚</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81af1c5cbc2144c9b758ba4d9111c12d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=7VtppMMTLvx0%2FW8GyEq23oz9qLQ%3D" alt="" loading="lazy"/></p>
<p><em>ä¸ºå°éƒ¨ä»¶é¢„è§ˆç¯å¢ƒæä¾›è‡ªå®šä¹‰ä¸»é¢˜æ”¯æŒã€‚</em></p>
<ul>
<li><strong>é¢„è§ˆå¯æ‰©å±•æ€§</strong>ï¼šé¢„è§ˆæ³¨è§£ç±»ä¸å†æ ‡è®°ä¸º finalï¼Œç°åœ¨å¯ä»¥æ‰©å±•ä»¥åˆ›å»ºè‡ªå®šä¹‰é¢„è§ˆæ³¨è§£ï¼Œä»è€Œå‡å°‘å¸¸è§é¢„è§ˆç±»å‹çš„æ ·æ¿ä»£ç ã€‚</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a887ce18185646bda685fc093e14c702~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=c3rdsqe%2Fe33VUb5Ef%2F8SekvnXNA%3D" alt="" loading="lazy"/></p>
<p><em>è‡ªå®šä¹‰æ³¨è§£ç¤ºä¾‹</em><code>BrightnessPreview</code> <em>ã€‚</em></p>
<ul>
<li><strong>å¤šé¢„è§ˆæ”¯æŒ</strong>ï¼šæ–°å¢çš„<code>MultiPreview</code>åŸºç±»å…è®¸ä»å•ä¸ªè‡ªå®šä¹‰æ³¨é‡Šåˆ›å»ºå¤šä¸ªé¢„è§ˆå˜ä½“ã€‚</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71472db634af4b63af1710fe1ab1d720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=4hpx%2BTpAupZ7lNoEpgI7XLPOehA%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>é¢„è§ˆç»„</strong>ï¼šç±»ä¸­çš„æ–°åˆ†ç»„å‚æ•°<code>Preview</code>å…è®¸å¯¹ç›¸å…³çš„é¢„è§ˆè¿›è¡Œåˆ†ç»„ã€‚</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db78dfe644d94c439cf4b617d44b6df5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5YaZ5LiN5a6M56iL5bqP55qE54y_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634188&amp;x-signature=xHQKUC6laoqz16%2FDUA7xgfy%2FVrM%3D" alt="" loading="lazy"/></p>
<p><em>é¢„è§ˆç»„ä¸­å¤šä¸ªâ€œäº®åº¦â€é¢„è§ˆçš„ç¤ºä¾‹ã€‚</em></p>
<ul>
<li><strong>æ”¾å®½äº†å¯¹ @Preview æ³¨è§£å‚æ•°çš„é™åˆ¶</strong>ï¼šç°åœ¨æ”¯æŒå°†ç§æœ‰å¸¸é‡ä½œä¸º<code>Preview</code>æ³¨è§£çš„å‚æ•°ã€‚å‡½æ•°å‚æ•°ï¼ˆä¾‹å¦‚ wrapper å’Œ themeï¼‰ä»ç„¶éœ€è¦å…·æœ‰å…¬å¼€çš„ã€é™æ€å¯è®¿é—®çš„åç§°ã€‚</li>
</ul>
<p>å°éƒ¨ä»¶é¢„è§ˆåŠŸèƒ½ç›®å‰ä»å¤„äºå®éªŒé˜¶æ®µï¼Œæ‚¨çš„åé¦ˆå¯¹å¡‘é€ å…¶æœªæ¥è‡³å…³é‡è¦ã€‚API å’Œç”¨æˆ·ä½“éªŒå°šä¸ç¨³å®šï¼Œæˆ‘ä»¬ä¼šæ ¹æ®æ‚¨çš„åé¦ˆä¸æ–­æ”¹è¿›ã€‚</p>
<p>æ ¹æ®æ—©æœŸåé¦ˆï¼Œæˆ‘ä»¬è®¡åˆ’è¿›è¡Œæ›´å¤šæ”¹è¿›ä»¥æå‡ç»„ä»¶é¢„è§ˆä½“éªŒï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>Flutter DevTools Widget Inspector æ”¯æŒ</strong>ï¼šWidget Inspector æ­£åœ¨æ›´æ–°ï¼Œä»¥æ”¯æŒåœ¨ widget é¢„è§ˆç¯å¢ƒä¸­æ£€æŸ¥é¢„è§ˆæ•ˆæœã€‚æˆ‘ä»¬è®¡åˆ’å°†æ£€æŸ¥å™¨ç›´æ¥åµŒå…¥åˆ° widget é¢„è§ˆå™¨ä¸­ï¼Œä½¿å…¶æ— è®ºæ‚¨å¤„äºä½•ç§å¼€å‘ç¯å¢ƒéƒ½èƒ½è½»æ¾è®¿é—®ã€‚</li>
<li><strong>IDEä¸­çš„å¤šé¡¹ç›®æ”¯æŒ</strong>ï¼šç›®å‰ï¼Œç»„ä»¶é¢„è§ˆå™¨ä»…æ”¯æŒæ˜¾ç¤ºå•ä¸ªé¡¹ç›®æˆ–Pubå·¥ä½œåŒºå†…çš„é¢„è§ˆã€‚æˆ‘ä»¬æ­£åœ¨ç§¯æç ”ç©¶å¦‚ä½•æ”¯æŒåœ¨IDEä¼šè¯ä¸­åŒ…å«å¤šä¸ªFlutteré¡¹ç›®çš„æ–¹æ¡ˆï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F173550" target="_blank" title="https://github.com/flutter/flutter/issues/173550" ref="nofollow noopener noreferrer">é—®é¢˜#173550</a>ï¼‰ã€‚</li>
<li><strong>æå‡å¯åŠ¨æ€§èƒ½</strong>ï¼šæˆ‘ä»¬æ­£åœ¨ç ”ç©¶æå‡å¯åŠ¨æ€§èƒ½çš„æœºä¼šï¼Œä»¥ç¼©çŸ­åˆå§‹å¯åŠ¨æ—¶é—´ï¼ŒåŒ…æ‹¬ï¼š</li>
</ol>
<ul>
<li>é¦–æ¬¡è¿è¡Œåå¯åŠ¨é¢„ç¼–è¯‘çš„ç»„ä»¶é¢„è§ˆç¯å¢ƒ</li>
<li>å¹¶è¡ŒåŒ–é¢„è§ˆæ£€æµ‹é€»è¾‘ä»¥æ›´å¥½åœ°å¤„ç†å¤§å‹é¡¹ç›®</li>
</ul>
<p>é¦–å…ˆï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£ï¼Œç„¶åå‘Šè¯‰æˆ‘ä»¬æ‚¨çš„æƒ³æ³•ï¼</p>
<ul>
<li><strong>é˜…è¯»æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Ftools%2Fwidget-previewer" target="_blank" title="https://docs.flutter.dev/tools/widget-previewer" ref="nofollow noopener noreferrer">Flutter Widget é¢„è§ˆï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰å…¥é—¨æŒ‡å—</a></li>
<li><strong>æä¾›åé¦ˆï¼šåœ¨</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2Fnew%2Fchoose" target="_blank" title="https://github.com/flutter/flutter/issues/new/choose" ref="nofollow noopener noreferrer">Flutter GitHub å­˜å‚¨åº“</a>ä¸­æäº¤é—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚ã€‚</li>
<li><strong>äº†è§£æ›´å¤š</strong>ï¼šå¦‚éœ€æ·±å…¥äº†è§£æŠ€æœ¯ç»†èŠ‚ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fflutter.dev%2Fgo%2Fwidget-previews-architecture" target="_blank" title="https://flutter.dev/go/widget-previews-architecture" ref="nofollow noopener noreferrer">Flutter Widget Previews æ¶æ„æ–‡æ¡£</a>ã€‚</li>
</ul>
<p><em><strong>é‡è¦æç¤º</strong></em> <em>ï¼šå·²çŸ¥ Widget Previewer åœ¨æ‰§è¡ŒæŸäº›æ“ä½œåå¯èƒ½ä¼šå´©æºƒæˆ–åœæ­¢æ›´æ–°</em><code>flutter pub get</code> <em>ã€‚å¦‚æœé‡åˆ°æ­¤é—®é¢˜ï¼Œè¯·</em><code>flutter pub get</code><em>åœ¨é¡¹ç›®ä¸­è¿è¡Œç›¸å…³å‘½ä»¤å¹¶é‡å¯ IDEã€‚</em> <em>è¯¦æƒ…è¯·å‚é˜…</em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F178317" target="_blank" title="https://github.com/flutter/flutter/issues/178317" ref="nofollow noopener noreferrer"> <em>#178317 ã€‚</em></a>**</p>
<h3 data-id="heading-24">å¼€å‘è€…å·¥å…·æ›´æ–°</h3>
<p>Flutter 3.38 ä¿®å¤äº† 2025 å¹´ DevTools ç”¨æˆ·è°ƒæŸ¥ä¸­ç”¨æˆ·æŒ‡å‡ºçš„ä¸€äº›ä¸»è¦ç—›ç‚¹ï¼ŒåŒ…æ‹¬ï¼š</p>
<p><strong>ç½‘ç»œé¢æ¿æ”¹è¿›</strong></p>
<ul>
<li>ä½¿ç”¨æˆ·æ›´å®¹æ˜“äº†è§£é¢æ¿ä½•æ—¶æ­£åœ¨è®°å½•ç½‘ç»œæµé‡ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9495" target="_blank" title="https://github.com/flutter/devtools/pull/9495" ref="nofollow noopener noreferrer">#9495</a>ï¼‰</li>
<li>ä¿®å¤äº†å¤åˆ¶ç²˜è´´ç½‘ç»œè¯·æ±‚ç›¸å…³çš„é—®é¢˜ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9472" target="_blank" title="https://github.com/flutter/devtools/pull/9472" ref="nofollow noopener noreferrer">#9472</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9482" target="_blank" title="https://github.com/flutter/devtools/pull/9482" ref="nofollow noopener noreferrer">#9482</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9485" target="_blank" title="https://github.com/flutter/devtools/pull/9485" ref="nofollow noopener noreferrer">#9485</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter-intellij%2Fpull%2F8588" target="_blank" title="https://github.com/flutter/flutter-intellij/pull/8588" ref="nofollow noopener noreferrer">#8588</a>ï¼‰</li>
</ul>
<p><strong>Flutter Inspector ä¿®å¤</strong></p>
<ul>
<li>ä¿®å¤äº†é€‰æ‹©æ§ä»¶æ—¶æœ‰æ—¶ä¼šæ‰“å¼€åº•å±‚æ¡†æ¶æºä»£ç è€Œä¸æ˜¯ç”¨æˆ·æºä»£ç çš„é”™è¯¯ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F176530" target="_blank" title="https://github.com/flutter/flutter/pull/176530" ref="nofollow noopener noreferrer">#176530</a>ï¼‰</li>
<li>ä¿®å¤äº†å¶å°”ä¼šå¯¼è‡´æ— æ³•ä¸æ£€æŸ¥å™¨é¢æ¿é¡¶éƒ¨æŒ‰é’®è¿›è¡Œäº¤äº’çš„é”™è¯¯ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9327" target="_blank" title="https://github.com/flutter/devtools/pull/9327" ref="nofollow noopener noreferrer">#9327</a>ï¼‰</li>
</ul>
<h2 data-id="heading-25">å¼ƒç”¨å’Œé‡å¤§å˜æ›´</h2>
<p>ä½œä¸º Flutter æ¡†æ¶ç°ä»£åŒ–å’Œæ”¹è¿›å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°åŒ…å«äº†å‡ ä¸ªé‡è¦çš„å¼ƒç”¨é¡¹å’Œé‡å¤§å˜æ›´ã€‚</p>
<p>å…³é”®çš„æ„å»ºå’Œå·¥å…·å˜æ›´å¯èƒ½ä¼šå½±å“è‡ªå®šä¹‰æ„å»ºè„šæœ¬ã€‚FlutterÂ <code>version</code>SDK æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å·²è¢«ç§»é™¤ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä½äº [<code>flutter.version.json</code>æ­¤å¤„åº”å¡«å†™è·¯å¾„] çš„æ–°æ–‡ä»¶<code>bin/cache</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172793" target="_blank" title="https://github.com/flutter/flutter/pull/172793" ref="nofollow noopener noreferrer">#172793</a>ï¼‰ã€‚æ­¤å¤–ï¼Œè¯¥<code>AssetManifest.json</code>æ–‡ä»¶ä¸å†é»˜è®¤ç”Ÿæˆï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172594" target="_blank" title="https://github.com/flutter/flutter/pull/172594" ref="nofollow noopener noreferrer">#172594</a>ï¼‰ã€‚</p>
<p>å…¶ä»–æ˜¾è‘—å˜åŒ–åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸ºäº†ä½¿è¡Œä¸ºæ›´å¯é¢„æµ‹ï¼ŒåŒ…å«æ“ä½œçš„ SnackBar å°†ä¸å†è‡ªåŠ¨å…³é—­ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173084" target="_blank" title="https://github.com/flutter/flutter/pull/173084" ref="nofollow noopener noreferrer">#173084</a>ï¼‰ã€‚</li>
<li>æ„é€ å‡½æ•°<code>OverlayPortal.targetsRootOverlay</code>å·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´çµæ´»çš„<code>OverlayPortal</code>ï¼ˆ<code>overlayLocation: OverlayChildLocation.rootOverlay</code>ï¼‰ã€‚</li>
<li>çš„å‡ ä¸ªå±æ€§<code>CupertinoDynamicColor</code>ï¼Œä¾‹å¦‚<code>withAlpha</code>å’Œ<code>withOpacity</code>ï¼Œç°åœ¨å·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ ‡å‡†<code>Color</code>æ–¹æ³•ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171160" target="_blank" title="https://github.com/flutter/flutter/pull/171160" ref="nofollow noopener noreferrer">#171160</a>ï¼‰ã€‚</li>
<li>Flutter 3.38 è¦æ±‚ Android çš„æœ€ä½ Java ç‰ˆæœ¬ä¸º 17ï¼Œä¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gradle.org%2Fcurrent%2Fuserguide%2Fcompatibility.html" target="_blank" title="https://docs.gradle.org/current/userguide/compatibility.html" ref="nofollow noopener noreferrer">Gradle 8.14</a>ï¼ˆ2025 å¹´ 7 æœˆå‘å¸ƒï¼‰çš„æœ€ä½è¦æ±‚ä¸€è‡´ã€‚</li>
</ul>
<p>æœ‰å…³è¿™äº›å˜æ›´å’Œå…¶ä»–å˜æ›´çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œè¿ç§»æŒ‡å—ï¼Œè¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes" target="_blank" title="https://docs.flutter.dev/release/breaking-changes" ref="nofollow noopener noreferrer">é‡å¤§å˜æ›´é¡µé¢</a>ã€‚</p>
<h2 data-id="heading-26">ç»“å°¾</h2>
<p>Flutter 3.38 æ”¹åŠ¨è¿˜æ˜¯æŒºå¤šçš„ï¼Œ è¦å‡çº§çš„è¿˜å¾—ç­‰ç­‰çœ‹çœ‹ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ajax æ•°æ®è¯·æ±‚è¯¦è§£ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7572021695293980722</link>    <guid>https://juejin.cn/post/7572021695293980722</guid>    <pubDate>2025-11-13T10:10:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572021695293980722" data-draft-id="7572016447804555290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ajax æ•°æ®è¯·æ±‚è¯¦è§£ä¸å®æˆ˜"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-13T10:10:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="T___T"/> <meta itemprop="url" content="https://juejin.cn/user/1599155645973066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ajax æ•°æ®è¯·æ±‚è¯¦è§£ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1599155645973066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    T___T
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:10:29.000Z" title="Thu Nov 13 2025 10:10:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>ç½‘é¡µä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’</strong>å·²ç»æˆä¸ºæ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚<br/>
è€Œæ”¯æ’‘è¿™ä¸€åŠŸèƒ½çš„æŠ€æœ¯ä¹‹ä¸€ï¼Œæ­£æ˜¯ <strong>Ajaxï¼ˆAsynchronous JavaScript and XMLï¼‰</strong> ã€‚<br/>
ä»Šå¤©æˆ‘ä»¬å°±æ¥ç³»ç»Ÿäº†è§£ä¸€ä¸‹ Ajax çš„å·¥ä½œåŸç†ã€è¯·æ±‚æµç¨‹ä»¥åŠä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ Ajaxï¼Ÿ</h2>
<p><strong>Ajax</strong> å…¨ç§°æ˜¯ <strong>å¼‚æ­¥ JavaScript å’Œ XML</strong>ï¼Œ<br/>
ä¸­æ–‡æ„æ€æ˜¯â€œå¼‚æ­¥çš„ JavaScript ä¸ XMLâ€ã€‚</p>
<p>è™½ç„¶åå­—é‡Œæœ‰ XMLï¼Œä½†å¦‚ä»Šå¼€å‘ä¸­æˆ‘ä»¬æ›´å¤šä½¿ç”¨ <strong>JSON</strong> æ ¼å¼æ¥ä¼ è¾“æ•°æ®ã€‚<br/>
å®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡ï¼ŒåŠ¨æ€æ›´æ–°ç½‘é¡µå†…å®¹ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€Ajax çš„åŸºæœ¬å·¥ä½œæµç¨‹</h2>
<p>Ajax çš„å®ç°ä¾èµ–æµè§ˆå™¨å†…ç½®çš„ä¸€ä¸ªå¯¹è±¡ï¼š<code>XMLHttpRequest</code>ï¼ˆç®€ç§° XHRï¼‰ã€‚<br/>
é€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä¸»åŠ¨å‘èµ· HTTP è¯·æ±‚å¹¶æ¥æ”¶å“åº”ã€‚</p>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºè¯·æ±‚å¯¹è±¡</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">xhr</span> = new XMLHttpRequest()<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>é…ç½®è¯·æ±‚ä¿¡æ¯</strong></p>
<pre><code class="hljs language-python" lang="python">xhr.<span class="hljs-built_in">open</span>(method, url, <span class="hljs-keyword">async</span>);
</code></pre>
<ul>
<li><code>method</code>ï¼šè¯·æ±‚æ–¹å¼ï¼ˆå¦‚ <code>GET</code>ã€<code>POST</code>ï¼‰</li>
<li><code>url</code>ï¼šç›®æ ‡æ¥å£åœ°å€</li>
<li><code>async</code>ï¼šæ˜¯å¦å¼‚æ­¥ï¼ˆ<code>true</code> ä¸ºå¼‚æ­¥ï¼Œ<code>false</code> ä¸ºåŒæ­¥ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å‘é€è¯·æ±‚</strong></p>
<pre><code class="hljs language-ini" lang="ini">xhr.send()<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘å¬è¯·æ±‚çŠ¶æ€å˜åŒ–</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">xhr.onreadystatechange</span> = function() {
    if (<span class="hljs-attr">xhr.readyState</span> === <span class="hljs-number">4</span> &amp;&amp; xhr.status === <span class="hljs-number">200</span>) {
        const <span class="hljs-attr">data</span> = JSON.parse(xhr.responseText)<span class="hljs-comment">;</span>
        console.log(data)<span class="hljs-comment">;</span>
    }
}<span class="hljs-comment">;</span>
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€readyState çŠ¶æ€è¯´æ˜</h2>
<p>åœ¨ Ajax è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œ<code>readyState</code> è¡¨ç¤ºè¯·æ±‚çš„ä¸åŒé˜¶æ®µï¼š</p>



































<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>0</td><td>åˆå§‹åŒ–</td><td>è¯·æ±‚æœªåˆå§‹åŒ–</td></tr><tr><td>1</td><td>æ‰“å¼€</td><td>å·²è°ƒç”¨ <code>open()</code>ï¼Œè¿˜æœªå‘é€</td></tr><tr><td>2</td><td>å‘é€</td><td>å·²å‘é€è¯·æ±‚ï¼Œæ¥æ”¶åˆ°å“åº”å¤´</td></tr><tr><td>3</td><td>æ¥æ”¶</td><td>æ­£åœ¨æ¥æ”¶æœåŠ¡å™¨æ•°æ®</td></tr><tr><td>4</td><td>å®Œæˆ</td><td>è¯·æ±‚å®Œæˆï¼Œå·²æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®</td></tr></tbody></table>
<p>åŒæ—¶è¦æ³¨æ„ï¼š</p>
<ul>
<li><code>xhr.status</code> è¡¨ç¤º HTTP å“åº”çŠ¶æ€ï¼ˆä¾‹å¦‚ <code>200</code> è¡¨ç¤ºæˆåŠŸï¼‰ã€‚</li>
<li><code>xhr.responseText</code> æ˜¯æœåŠ¡å™¨è¿”å›çš„å­—ç¬¦ä¸²æ•°æ®ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">å››ã€å®æˆ˜ç¤ºä¾‹ï¼šè¯·æ±‚ GitHub æ•°æ®</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Ajax è¯·æ±‚ç¤ºä¾‹ï¼Œç”¨æ¥è·å– GitHub ä¸ŠæŸç»„ç»‡çš„æˆå‘˜æ•°æ®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Ajax æ•°æ®è¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"members"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// 1. åˆ›å»º XMLHttpRequest å¯¹è±¡</span>
        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();

        <span class="hljs-comment">// 2. æ‰“å¼€è¯·æ±‚ (å¼‚æ­¥)</span>
        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'https://api.github.com/orgs/lemoncode/members'</span>, <span class="hljs-literal">true</span>);

        <span class="hljs-comment">// 3. ç›‘å¬çŠ¶æ€å˜åŒ–</span>
        xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span> &amp;&amp; xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
                <span class="hljs-comment">// 4. è§£æ JSON æ•°æ®</span>
                <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

                <span class="hljs-comment">// 5. æ¸²æŸ“åˆ°é¡µé¢</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'members'</span>).<span class="hljs-property">innerHTML</span> =
                    data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${item.login}</span>&lt;/li&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
            }
        };

        <span class="hljs-comment">// 6. å‘é€è¯·æ±‚</span>
        xhr.<span class="hljs-title function_">send</span>();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ‰§è¡Œåï¼Œæµè§ˆå™¨ä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºè¿”å›çš„æ•°æ®ï¼ŒåŒæ—¶åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºæˆå‘˜åˆ—è¡¨ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€åŒæ­¥ä¸å¼‚æ­¥çš„åŒºåˆ«</h2>
<ul>
<li><strong>åŒæ­¥è¯·æ±‚ï¼ˆasync = falseï¼‰</strong> ï¼š<br/>
æµè§ˆå™¨ä¼šç­‰å¾…æœåŠ¡å™¨å“åº”åå†æ‰§è¡Œåç»­ä»£ç ï¼Œé¡µé¢ä¼šâ€œå¡ä½â€ã€‚</li>
<li><strong>å¼‚æ­¥è¯·æ±‚ï¼ˆasync = trueï¼‰</strong> ï¼š<br/>
æµè§ˆå™¨ä¸ä¼šç­‰å¾…ï¼Œèƒ½ç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼Œå“åº”å›æ¥åå†è§¦å‘å›è°ƒå‡½æ•°ã€‚<br/>
â€”â€” è¿™æ­£æ˜¯ Ajax çš„æ ¸å¿ƒä¼˜åŠ¿æ‰€åœ¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">å…­ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆï¼šFetch ä¸ Axios</h2>
<p>å¦‚ä»Šï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ›´å¸¸ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p>
<ul>
<li><strong>Fetch API</strong>ï¼šæ›´ç®€æ´ç°ä»£çš„å¼‚æ­¥è¯·æ±‚æ–¹å¼ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">fetch('https://api.github.com/orgs/lemoncode/members')
  .then(<span class="hljs-attr">res</span> =&gt; res.json())
  .then(<span class="hljs-attr">data</span> =&gt; console.log(data))
  .catch(<span class="hljs-attr">err</span> =&gt; console.error(err))<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ§© ä¸ƒã€å°ç»“</h2>





























<table><thead><tr><th>è¦ç‚¹</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>Ajax å…¨ç§°</td><td>å¼‚æ­¥ JavaScript å’Œ XML</td></tr><tr><td>æ ¸å¿ƒå¯¹è±¡</td><td>XMLHttpRequest</td></tr><tr><td>å…³é”®æ–¹æ³•</td><td><code>open()</code>ã€<code>send()</code>ã€<code>onreadystatechange</code></td></tr><tr><td>å¸¸ç”¨å±æ€§</td><td><code>readyState</code>ã€<code>status</code>ã€<code>responseText</code></td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>å®ç°ç½‘é¡µçš„åŠ¨æ€æ•°æ®åŠ è½½ï¼Œä¸åˆ·æ–°é¡µé¢å³å¯æ›´æ–°å†…å®¹</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">âœ… ç»“è¯­</h3>
<p>Ajax æ˜¯å‰ç«¯ä¸æœåŠ¡å™¨é€šä¿¡çš„åŸºç¡€æŠ€æœ¯ä¹‹ä¸€ã€‚<br/>
ç†è§£å…¶åº•å±‚åŸç†ä¸ä»…èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ <code>fetch</code>ï¼Œ<br/>
æ›´èƒ½è®©ä½ å½»åº•ç†è§£<strong>æµè§ˆå™¨å¼‚æ­¥é€šä¿¡æœºåˆ¶</strong>çš„æœ¬è´¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼]]></title>    <link>https://juejin.cn/post/7571456639477006346</link>    <guid>https://juejin.cn/post/7571456639477006346</guid>    <pubDate>2025-11-12T07:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571456639477006346" data-draft-id="7571416207972499506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T07:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:59:53.000Z" title="Wed Nov 12 2025 07:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MCPæ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆéœ€è¦å®ƒ?</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d67c9ad979a2434989229286027f7185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539193&amp;x-signature=AvWJDuUolC0sslAql0%2FE8bjN4jg%3D" alt="" loading="lazy"/><br/>
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œå®ƒéœ€è¦:</p>
<ul>
<li>è¯»å–å’Œä¿®æ”¹é¡¹ç›®æ–‡ä»¶</li>
<li>æŸ¥è¯¢æ•°æ®åº“Schema</li>
<li>æœç´¢ä»£ç ä»“åº“</li>
<li>æ‰§è¡ŒGitæ“ä½œ</li>
</ul>
<p>ä¼ ç»Ÿåšæ³•æ˜¯ä¸ºæ¯ä¸ªæ•°æ®æºå†™ä¸€å¥—ä¸“ç”¨ä»£ç ï¼Œä¸åŒå›¢é˜Ÿé‡å¤é€ è½®å­ã€‚<strong>Model Context Protocol(MCP)</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„å¼€æ”¾æ ‡å‡†åè®®ã€‚</p>
<p><strong>é€šä¿—ç†è§£</strong>: MCPå°±åƒæ˜¯ã€ŒAIåº”ç”¨çš„USBæ¥å£æ ‡å‡†ã€ã€‚å°±åƒUSBè®©ä¸åŒè®¾å¤‡éƒ½èƒ½æ¥å…¥ç”µè„‘ä¸€æ ·ï¼ŒMCPè®©ä¸åŒçš„æ•°æ®æºå’Œå·¥å…·éƒ½èƒ½ä»¥ç»Ÿä¸€æ–¹å¼æ¥å…¥AIåº”ç”¨ã€‚</p>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: åœ¨Claude Desktopä¸­ï¼Œä½ å¯ä»¥é…ç½®å¤šä¸ªå®˜æ–¹MCPæœåŠ¡å™¨:</p>
<ul>
<li><strong>FilesystemæœåŠ¡å™¨</strong>: å®‰å…¨åœ°è¯»å†™æœ¬åœ°æ–‡ä»¶ï¼Œæœ‰æƒé™æ§åˆ¶</li>
<li><strong>SQLiteæœåŠ¡å™¨</strong>: æŸ¥è¯¢å’Œåˆ†æSQLiteæ•°æ®åº“ï¼Œè‡ªåŠ¨ç”ŸæˆSQL</li>
<li><strong>GitHubæœåŠ¡å™¨</strong>: æœç´¢ä»“åº“ã€åˆ›å»ºIssueã€ç®¡ç†PR</li>
</ul>
<p>ä½ çš„AIåº”ç”¨åªéœ€å®ç°ä¸€ä¸ªMCPå®¢æˆ·ç«¯ï¼Œå°±èƒ½è¿æ¥æ‰€æœ‰æœåŠ¡å™¨ï¼Œæ— éœ€ä¸ºæ¯ä¸ªæœåŠ¡å™¨å†™ä¸“ç”¨ä»£ç ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¶æ„è®¾è®¡ï¼š ä¸‰ä¸ªè§’è‰²çš„åˆ†å·¥</h2>
<p>MCPé‡‡ç”¨<strong>å®¿ä¸»-å®¢æˆ·ç«¯-æœåŠ¡å™¨</strong>ä¸‰å±‚æ¶æ„ï¼Œå°±åƒä¸€å®¶å…¬å¸çš„ç»„ç»‡ç»“æ„:</p>
<p><strong>å®¿ä¸»(Host)</strong> = æ€»ç»ç†</p>
<ul>
<li>ç®¡ç†æ‰€æœ‰å®¢æˆ·ç«¯</li>
<li>æ§åˆ¶å®‰å…¨ç­–ç•¥å’Œæƒé™</li>
<li>è´Ÿè´£AIæ¨¡å‹çš„è°ƒç”¨</li>
</ul>
<p><strong>å®¢æˆ·ç«¯(Client)</strong> = éƒ¨é—¨ç»ç†</p>
<ul>
<li>å®¢æˆ·ç«¯è´Ÿè´£è¿æ¥æœåŠ¡å™¨</li>
<li>è´Ÿè´£åŒæ–¹çš„æ²Ÿé€šåè°ƒ</li>
<li>è½¬å‘æ¶ˆæ¯å’Œé€šçŸ¥</li>
</ul>
<p><strong>æœåŠ¡å™¨(Server)</strong> = ä¸šåŠ¡ä¸“å‘˜</p>
<ul>
<li>æä¾›å…·ä½“åŠŸèƒ½(èµ„æºã€å·¥å…·ã€æç¤ºæ¨¡æ¿)</li>
<li>å¯ä»¥æ˜¯æœ¬åœ°ç¨‹åºæˆ–è¿œç¨‹æœåŠ¡</li>
<li>ä¸çŸ¥é“å…¶ä»–æœåŠ¡å™¨çš„å­˜åœ¨</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€åè®®çº¦å®šï¼šç»Ÿä¸€è§„èŒƒä¸ä¸ªæ€§åŒ–æ‰©å±•</h2>
<p><strong>æ¯ä¸ªMCPæœåŠ¡å™¨æä¾›çš„å·¥å…·ã€èµ„æºéƒ½ä¸ä¸€æ ·ï¼Œä½†å®ƒä»¬éƒ½éµå¾ªç›¸åŒçš„MCPåè®®è§„èŒƒã€‚</strong></p>
<h3 data-id="heading-3">3.1 åè®®çš„åˆ†å±‚è®¾è®¡</h3>
<p>MCPé‡‡ç”¨ <strong>åŸºç¡€åè®® + åŠŸèƒ½æ‰©å±•</strong> çš„è®¾è®¡ï¼Œå°±åƒHTTPåè®®ä¸€æ ·:</p>
<p><strong>æ ¸å¿ƒå±‚(æ‰€æœ‰å®ç°å¿…é¡»æ”¯æŒ)</strong> :</p>
<ul>
<li>JSON-RPC 2.0æ¶ˆæ¯æ ¼å¼</li>
<li>åˆå§‹åŒ–æ¡æ‰‹æµç¨‹(initialize/initialized)</li>
<li>åŸºæœ¬é”™è¯¯å¤„ç†</li>
</ul>
<p><strong>åŠŸèƒ½å±‚(æŒ‰éœ€é€‰æ‹©)</strong> :</p>
<ul>
<li>Resourcesã€Promptsã€Tools(æœåŠ¡å™¨ç«¯)</li>
<li>Rootsã€Samplingã€Elicitation(å®¢æˆ·ç«¯)</li>
</ul>
<p><strong>è¿™æ ·è®¾è®¡çš„å¥½å¤„</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">ç»Ÿä¸€çš„åŸºç¡€åè®® â†’ ä¿è¯äº’æ“ä½œæ€§
<span class="hljs-bullet">     +</span>
çµæ´»çš„åŠŸèƒ½é€‰æ‹© â†’ æ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
<span class="hljs-code">     â†“
æ—¢æ ‡å‡†åŒ–åˆå¯æ‰©å±•
</span></code></pre>
<h3 data-id="heading-4">3.2 åè®®çº¦å®šçš„è¿‡ç¨‹</h3>
<p><strong>æ­¥éª¤1: åŸºç¡€åè®®æ˜¯å›ºå®šçš„</strong><br/>
æ‰€æœ‰MCPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½éµå¾ªç›¸åŒçš„JSON-RPC 2.0æ ¼å¼:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// è¯·æ±‚æ ¼å¼(å›ºå®š)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å¿…é¡»æ˜¯2.0</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ–¹æ³•å"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// è¦è°ƒç”¨çš„æ–¹æ³•</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>         <span class="hljs-comment">// å‚æ•°å¯¹è±¡</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// å“åº”æ ¼å¼(å›ºå®š)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// å¯¹åº”è¯·æ±‚çš„ID</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>         <span class="hljs-comment">// æˆåŠŸç»“æœ</span>
  <span class="hljs-comment">// æˆ– "error": {...}    // é”™è¯¯ä¿¡æ¯</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤2: èƒ½åŠ›åœ¨åˆå§‹åŒ–æ—¶åå•†</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å®¢æˆ·ç«¯å‘èµ·åˆå§‹åŒ–</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"initialize"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sampling"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// æˆ‘æ”¯æŒLLMé‡‡æ ·</span>
      <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>           <span class="hljs-comment">// æˆ‘æ”¯æŒæ ¹ç›®å½•</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clientInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyClient"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æœåŠ¡å™¨å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// æˆ‘æä¾›å·¥å…·</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>       <span class="hljs-comment">// æˆ‘æä¾›èµ„æº</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SQLiteServer"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åå•†å®Œæˆåï¼ŒåŒæ–¹éƒ½çŸ¥é“å¯¹æ–¹æ”¯æŒä»€ä¹ˆåŠŸèƒ½ï¼Œ<strong>åªä½¿ç”¨äº¤é›†éƒ¨åˆ†</strong>ã€‚</p>
<p><strong>æ­¥éª¤3: æ–¹æ³•åç§°æ˜¯æ ‡å‡†åŒ–çš„</strong><br/>
MCPè§„èŒƒå®šä¹‰äº†æ ‡å‡†æ–¹æ³•å:</p>








































<table><thead><tr><th>åŠŸèƒ½</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ—å‡ºèµ„æº</td><td><code>resources/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è¯»å–èµ„æº</td><td><code>resources/read</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>åˆ—å‡ºå·¥å…·</td><td><code>tools/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è°ƒç”¨å·¥å…·</td><td><code>tools/call</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>åˆ—å‡ºæç¤º</td><td><code>prompts/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è·å–æç¤º</td><td><code>prompts/get</code></td><td>å›ºå®šæ–¹æ³•å</td></tr></tbody></table>
<p><strong>æ­¥éª¤4: å…·ä½“å†…å®¹æ˜¯ä¸ªæ€§åŒ–çš„</strong><br/>
è™½ç„¶æ–¹æ³•åå›ºå®šï¼Œä½†æ¯ä¸ªæœåŠ¡å™¨è¿”å›çš„<strong>å…·ä½“æ•°æ®</strong>ä¸åŒ:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// SQLiteæœåŠ¡å™¨çš„å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"list_tables"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ—å‡ºæ‰€æœ‰è¡¨"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// FilesystemæœåŠ¡å™¨çš„å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"read_file"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯»å–æ–‡ä»¶"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"write_file"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å†™å…¥æ–‡ä»¶"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"search_files"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœç´¢æ–‡ä»¶"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">3.3 åè®®å‘ç°æœºåˆ¶</h3>
<p>å®¢æˆ·ç«¯å¦‚ä½•çŸ¥é“æœåŠ¡å™¨æœ‰å“ªäº›å·¥å…·?</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåˆ—ä¸¾</strong></p>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨: {"method": <span class="hljs-string">"tools/list"</span>}
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯: {
  "tools": [
    {
      "name": <span class="hljs-string">"query"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span>,
      <span class="hljs-string">"inputSchema"</span>: {           // JSON Schemaå®šä¹‰è¾“å…¥æ ¼å¼
        "type": <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: {
          "sql": {"type": <span class="hljs-string">"string"</span>}
        }
      }
    }
  ]
}
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨</strong></p>
<pre><code class="hljs language-json" lang="json">å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// ä½¿ç”¨ç¬¬ä¸€æ­¥è·å¾—çš„å·¥å…·å</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"sql"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SELECT * FROM users"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>:é€šè¿‡JSON Schemaï¼Œå®¢æˆ·ç«¯çŸ¥é“å¦‚ä½•æ­£ç¡®è°ƒç”¨å·¥å…·ï¼Œæ— éœ€ç¡¬ç¼–ç ã€‚</p>
<h2 data-id="heading-6">å››ã€åè®®åŸºç¡€ï¼šå¦‚ä½•é€šä¿¡?</h2>
<p>MCPåŸºäºJSON-RPC 2.0æ„å»ºï¼Œè¿™æ˜¯ä¸€ä¸ªæˆç†Ÿçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ã€‚ç†è§£è¿™ä¸€å±‚å¯¹æŒæ¡MCPè‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-7">4.1 JSON-RPC 2.0åŸºç¡€</h3>
<p><strong>æ¶ˆæ¯ç±»å‹</strong></p>
<p>MCPä¸­æœ‰ä¸‰ç§åŸºæœ¬æ¶ˆæ¯ç±»å‹ã€‚<br/>
<strong>1. è¯·æ±‚(Request)</strong> - æœŸå¾…å“åº”</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,           <span class="hljs-regexp">//</span> åè®®ç‰ˆæœ¬,å¿…é¡»æ˜¯<span class="hljs-string">"2.0"</span>
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,                     <span class="hljs-regexp">//</span> è¯·æ±‚å”¯ä¸€æ ‡è¯†(å­—ç¬¦ä¸²æˆ–æ•°å­—)
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/list"</span>,     <span class="hljs-regexp">//</span> è¦è°ƒç”¨çš„æ–¹æ³•å
  <span class="hljs-string">"params"</span>: {                  <span class="hljs-regexp">//</span> å¯é€‰çš„å‚æ•°å¯¹è±¡
    <span class="hljs-string">"cursor"</span>: <span class="hljs-string">"page2"</span>
  }
}
</code></pre>
<p><strong>2. å“åº”(Response)</strong> - å¯¹è¯·æ±‚çš„å›å¤</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// æˆåŠŸå“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                     <span class="hljs-comment">// å¿…é¡»ä¸è¯·æ±‚çš„idç›¸åŒ</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// æˆåŠŸç»“æœ</span>
    <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰§è¡ŒæŸ¥è¯¢"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// é”™è¯¯å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                   <span class="hljs-comment">// é”™è¯¯å¯¹è±¡</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-32602</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// é”™è¯¯ç (æ•´æ•°)</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‚æ•°æ— æ•ˆ"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// é”™è¯¯æè¿°</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// å¯é€‰çš„é¢å¤–ä¿¡æ¯</span>
      <span class="hljs-attr">"field"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cursor"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¼å¼é”™è¯¯"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>3. é€šçŸ¥(Notification)</strong> - å•å‘æ¶ˆæ¯,æ— éœ€å“åº”</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/resources/updated"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// é€šçŸ¥æ–¹æ³•å</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                                   <span class="hljs-comment">// é€šçŸ¥å‚æ•°</span>
    <span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///project/data.json"</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-comment">// æ³¨æ„:æ²¡æœ‰idå­—æ®µ</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ ‡å‡†é”™è¯¯ç </strong></p>
<p>MCPä½¿ç”¨JSON-RPC 2.0çš„æ ‡å‡†é”™è¯¯ç :</p>








































<table><thead><tr><th>é”™è¯¯ç </th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-32700</td><td>Parse error</td><td>JSONè§£æé”™è¯¯</td></tr><tr><td>-32600</td><td>Invalid Request</td><td>æ— æ•ˆçš„è¯·æ±‚æ ¼å¼</td></tr><tr><td>-32601</td><td>Method not found</td><td>æ–¹æ³•ä¸å­˜åœ¨</td></tr><tr><td>-32602</td><td>Invalid params</td><td>å‚æ•°æ— æ•ˆ</td></tr><tr><td>-32603</td><td>Internal error</td><td>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td></tr><tr><td>-32002</td><td>Resource not found</td><td>èµ„æºæœªæ‰¾åˆ°(MCPæ‰©å±•)</td></tr></tbody></table>
<h3 data-id="heading-8">4.2 èƒ½åŠ›åå•†è¯¦è§£</h3>
<p>èƒ½åŠ›åå•†æ˜¯MCPè¿æ¥å»ºç«‹çš„ç¬¬ä¸€æ­¥ï¼Œå†³å®šäº†æ•´ä¸ªä¼šè¯ä¸­å¯ç”¨çš„åŠŸèƒ½ã€‚</p>
<p><strong>åˆå§‹åŒ–æµç¨‹è¯¦è§£</strong></p>
<p><strong>é˜¶æ®µ1: å®¢æˆ·ç«¯å‘èµ·åˆå§‹åŒ–</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"initialize"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å®¢æˆ·ç«¯æ”¯æŒçš„åè®®ç‰ˆæœ¬</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// å®¢æˆ·ç«¯èƒ½åŠ›å£°æ˜</span>
      <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                       <span class="hljs-comment">// æ”¯æŒæ ¹ç›®å½•</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>            <span class="hljs-comment">// æ”¯æŒæ ¹ç›®å½•å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sampling"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>                  <span class="hljs-comment">// æ”¯æŒLLMé‡‡æ ·</span>
      <span class="hljs-attr">"elicitation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// æ”¯æŒç”¨æˆ·è¯¢é—®</span>
      <span class="hljs-attr">"experimental"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                <span class="hljs-comment">// å®éªŒæ€§åŠŸèƒ½</span>
        <span class="hljs-attr">"customFeature"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>            <span class="hljs-comment">// è‡ªå®šä¹‰åŠŸèƒ½</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clientInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                    <span class="hljs-comment">// å®¢æˆ·ç«¯ä¿¡æ¯</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyAIApp"</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// ç¨‹åºå(å¿…å¡«)</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.2.0"</span><span class="hljs-punctuation">,</span>              <span class="hljs-comment">// ç‰ˆæœ¬å·(å¿…å¡«)</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„AIåº”ç”¨"</span>             <span class="hljs-comment">// æ˜¾ç¤ºåç§°(å¯é€‰)</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é˜¶æ®µ2: æœåŠ¡å™¨å“åº”èƒ½åŠ›</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœåŠ¡å™¨é€‰æ‹©çš„åè®®ç‰ˆæœ¬</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// æœåŠ¡å™¨èƒ½åŠ›å£°æ˜</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                   <span class="hljs-comment">// æ”¯æŒèµ„æº</span>
        <span class="hljs-attr">"subscribe"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>             <span class="hljs-comment">// æ”¯æŒèµ„æºè®¢é˜…</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>            <span class="hljs-comment">// æ”¯æŒèµ„æºåˆ—è¡¨å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                       <span class="hljs-comment">// æ”¯æŒå·¥å…·</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                     <span class="hljs-comment">// æ”¯æŒæç¤ºæ¨¡æ¿</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>           <span class="hljs-comment">// ä¸æ”¯æŒåˆ—è¡¨å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>                    <span class="hljs-comment">// æ”¯æŒæ—¥å¿—è¾“å‡º</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                    <span class="hljs-comment">// æœåŠ¡å™¨ä¿¡æ¯</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sqlite-mcp-server"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SQLite MCPæœåŠ¡å™¨"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"instructions"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­¤æœåŠ¡å™¨æä¾›SQLiteæ•°æ®åº“è®¿é—®èƒ½åŠ›"</span>  <span class="hljs-comment">// å¯é€‰çš„ä½¿ç”¨è¯´æ˜</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é˜¶æ®µ3: å®¢æˆ·ç«¯ç¡®è®¤å°±ç»ª</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/initialized"</span>  <span class="hljs-comment">// æ— id,è¿™æ˜¯é€šçŸ¥</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åè®®ç‰ˆæœ¬åå•†è§„åˆ™</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">å®¢æˆ·ç«¯è¯·æ±‚ç‰ˆæœ¬: <span class="hljs-string">"2024-11-05"</span>
         â†“
    æœåŠ¡å™¨æ”¯æŒ?
    â†™        â†˜
  æ”¯æŒ        ä¸æ”¯æŒ
   â†“            â†“
è¿”å›ç›¸åŒç‰ˆæœ¬  è¿”å›æœåŠ¡å™¨æ”¯æŒçš„æœ€æ–°ç‰ˆæœ¬
   â†“            â†“
åå•†æˆåŠŸ    å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ
              â†™        â†˜
           æ”¯æŒ        ä¸æ”¯æŒ
            â†“            â†“
         åå•†æˆåŠŸ     æ–­å¼€è¿æ¥
</code></pre>
<p><strong>å®é™…ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åœºæ™¯1: ç‰ˆæœ¬åŒ¹é…</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  âœ… æˆåŠŸ

<span class="hljs-comment">// åœºæ™¯2: æœåŠ¡å™¨ç‰ˆæœ¬æ›´æ–°</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-06-01"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  
â†’ å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-05</span> â†’ å¦‚æœä¸æ”¯æŒåˆ™æ–­å¼€

<span class="hljs-comment">// åœºæ™¯3: å®¢æˆ·ç«¯ç‰ˆæœ¬æ›´æ–°</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-01-01"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  
â†’ å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-05</span> â†’ å¦‚æœæ”¯æŒåˆ™é™çº§ä½¿ç”¨
</code></pre>
<p><strong>èƒ½åŠ›äº¤é›†è®¡ç®—</strong></p>
<p>åˆå§‹åŒ–å,åŒæ–¹åªèƒ½ä½¿ç”¨<strong>å…±åŒæ”¯æŒçš„èƒ½åŠ›</strong>:</p>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯èƒ½åŠ›: {roots, sampling, elicitation}
æœåŠ¡å™¨èƒ½åŠ›: {resources, tools, prompts}
         â†“
   å¯ç”¨åŠŸèƒ½é›†åˆ
   â”œâ”€ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨: resources, tools, prompts
   â””â”€ æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯: roots, sampling, elicitation
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># å®¢æˆ·ç«¯ä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> server_capabilities.<span class="hljs-keyword">get</span>(<span class="hljs-string">"tools"</span>):
    <span class="hljs-meta"># æœåŠ¡å™¨æ”¯æŒå·¥å…·,å¯ä»¥è°ƒç”¨</span>
    tools = <span class="hljs-keyword">await</span> session.list_tools()
<span class="hljs-keyword">else</span>:
    <span class="hljs-meta"># æœåŠ¡å™¨ä¸æ”¯æŒå·¥å…·,è·³è¿‡</span>
    print(<span class="hljs-string">"æœåŠ¡å™¨ä¸æä¾›å·¥å…·åŠŸèƒ½"</span>)

<span class="hljs-keyword">if</span> client_capabilities.<span class="hljs-keyword">get</span>(<span class="hljs-string">"sampling"</span>):
    <span class="hljs-meta"># å®¢æˆ·ç«¯æ”¯æŒé‡‡æ ·,æœåŠ¡å™¨å¯ä»¥è¯·æ±‚</span>
    <span class="hljs-meta"># (æœåŠ¡å™¨ç«¯ä¼šæ£€æŸ¥è¿™ä¸ªèƒ½åŠ›)</span>
    pass
</code></pre>
<h3 data-id="heading-9">4.3 è¿æ¥ç”Ÿå‘½å‘¨æœŸæ·±å…¥</h3>
<p><strong>å®Œæ•´çš„æ¶ˆæ¯æ—¶åºå›¾</strong></p>
<pre><code class="hljs language-scss" lang="scss">å®¢æˆ·ç«¯                                            æœåŠ¡å™¨
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">1</span>. initialize (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚     {protocolVersion, capabilities}          â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">2</span>. initialize (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {protocolVersion, capabilities}          â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">3</span>. initialized (é€šçŸ¥)                        â”‚ 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                                              â”‚
  â”‚â•â•â•â•â•â•â•â•â•â•â• æ­£å¸¸æ“ä½œé˜¶æ®µ â•â•â•â•â•â•â•â•â•â•â•â•        â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">4</span>. tools/list (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">5</span>. tools/list (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {tools: [...]}                           â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">6</span>. tools/call (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚     {name: <span class="hljs-string">"query"</span>, arguments: {...}}        â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">7</span>. notifications/progress (é€šçŸ¥)             â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {progress: <span class="hljs-number">50</span>, total: <span class="hljs-number">100</span>}               â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">8</span>. tools/call (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {<span class="hljs-attribute">content</span>: [...]}                         â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">9</span>. notifications/resources/updated          â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {uri: <span class="hljs-string">"file://..."</span>}                      â”‚
  â”‚                                              â”‚
  â”‚â•â•â•â•â•â•â•â•â•â•â• å…³é—­é˜¶æ®µ â•â•â•â•â•â•â•â•â•â•â•           â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">10</span>. å…³é—­stdin                               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€X                             â”‚
  â”‚                                             â”‚
  â”‚                                          æœåŠ¡å™¨é€€å‡º
</code></pre>
<p><strong>åˆå§‹åŒ–å‰çš„é™åˆ¶</strong></p>
<p>åœ¨<code>initialized</code>é€šçŸ¥å‘é€å‰:</p>
<p><strong>å®¢æˆ·ç«¯åªèƒ½å‘é€</strong>:</p>
<ul>
<li>âœ… <code>initialize</code>è¯·æ±‚</li>
<li>âœ… <code>ping</code>è¯·æ±‚(ç”¨äºä¿æ´»)</li>
<li>âŒ å…¶ä»–ä»»ä½•è¯·æ±‚</li>
</ul>
<p><strong>æœåŠ¡å™¨åªèƒ½å‘é€</strong>:</p>
<ul>
<li>âœ… <code>initialize</code>å“åº”</li>
<li>âœ… <code>ping</code>è¯·æ±‚</li>
<li>âœ… <code>logging</code>é€šçŸ¥(æ—¥å¿—)</li>
<li>âŒ å…¶ä»–ä»»ä½•æ¶ˆæ¯</li>
</ul>
<p><strong>è¿åé™åˆ¶çš„åæœ</strong>:</p>
<pre><code class="hljs language-css" lang="css">// å®¢æˆ·ç«¯åœ¨åˆå§‹åŒ–å‰è°ƒç”¨tools/list
è¯·æ±‚: {"method": <span class="hljs-string">"tools/list"</span>}
å“åº”: {
  "error": {
    "<span class="hljs-selector-tag">code</span>": -<span class="hljs-number">32600</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"ä¼šè¯æœªåˆå§‹åŒ–"</span>
  }
}
</code></pre>
<p><strong>è¶…æ—¶å’Œé‡è¯•æœºåˆ¶</strong></p>
<p><strong>è¯·æ±‚è¶…æ—¶</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-comment"># è®¾ç½®30ç§’è¶…æ—¶</span>
<span class="hljs-keyword">try</span>:
    result = <span class="hljs-keyword">await</span> asyncio.wait_for(
        session.call_tool(<span class="hljs-string">"slow_operation"</span>, {}),
        timeout=<span class="hljs-number">30.0</span>
    )
<span class="hljs-keyword">except</span> asyncio.TimeoutError:
    <span class="hljs-comment"># å‘é€å–æ¶ˆé€šçŸ¥</span>
    <span class="hljs-keyword">await</span> session.send_notification(
        <span class="hljs-string">"notifications/cancelled"</span>,
        {<span class="hljs-string">"requestId"</span>: <span class="hljs-string">"123"</span>, <span class="hljs-string">"reason"</span>: <span class="hljs-string">"è¶…æ—¶"</span>}
    )
</code></pre>
<p><strong>è¿›åº¦é€šçŸ¥é‡ç½®è¶…æ—¶</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å½“æ”¶åˆ°è¿›åº¦é€šçŸ¥æ—¶,å¯ä»¥é‡ç½®è¶…æ—¶è®¡æ—¶å™¨</span>
<span class="hljs-attr">timeout</span> = <span class="hljs-number">30</span>  <span class="hljs-comment"># åŸºç¡€è¶…æ—¶</span>
<span class="hljs-attr">max_timeout</span> = <span class="hljs-number">300</span>  <span class="hljs-comment"># æœ€å¤§è¶…æ—¶(5åˆ†é’Ÿ)</span>

while True:
    try:
        <span class="hljs-attr">msg</span> = await wait_for_message(timeout)
        if <span class="hljs-attr">msg.method</span> == <span class="hljs-string">"notifications/progress"</span>:
            <span class="hljs-comment"># æ”¶åˆ°è¿›åº¦,é‡ç½®è¶…æ—¶</span>
            <span class="hljs-attr">timeout</span> = <span class="hljs-number">30</span>
    except TimeoutError:
        <span class="hljs-comment"># è¶…æ—¶å¤„ç†</span>
        break
</code></pre>
<h3 data-id="heading-10">4.4 ä¼ è¾“æ–¹å¼å¯¹æ¯”</h3>
<p><strong>stdioä¼ è¾“è¯¦è§£</strong></p>
<p><strong>ä¼˜ç‚¹</strong>:</p>
<ul>
<li>âœ… ç®€å•ç›´æ¥,é€‚åˆæœ¬åœ°å¼€å‘</li>
<li>âœ… è¿›ç¨‹éš”ç¦»,å®‰å…¨æ€§å¥½</li>
<li>âœ… è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</li>
<li>âœ… æ— éœ€ç½‘ç»œé…ç½®</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>:</p>
<ul>
<li>âŒ åªèƒ½æœ¬åœ°ä½¿ç”¨</li>
<li>âŒ ä¸æ”¯æŒå¤šå®¢æˆ·ç«¯</li>
<li>âŒ è°ƒè¯•ç›¸å¯¹å›°éš¾</li>
</ul>
<p><strong>æ¶ˆæ¯æ ¼å¼</strong>:</p>
<pre><code class="hljs">æ¶ˆæ¯1\n
æ¶ˆæ¯2\n
æ¶ˆæ¯3\n
</code></pre>
<p>æ¯ä¸ªJSONå¯¹è±¡å ä¸€è¡Œ,ä»¥<code>\n</code>åˆ†éš”ã€‚</p>
<p><strong>HTTPä¼ è¾“è¯¦è§£</strong></p>
<p><strong>æ¶æ„</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         HTTP POST         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚         â”‚
â”‚ å®¢æˆ·ç«¯  â”‚  è¯·æ±‚/é€šçŸ¥/å“åº”(JSON-RPC) â”‚ æœåŠ¡å™¨  â”‚
â”‚         â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     HTTP å“åº”/SSEæµ       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             (application/json æˆ–
              text/event-stream)
</code></pre>
<p><strong>å‘é€æ¶ˆæ¯(POST)</strong> :</p>
<pre><code class="hljs language-bash" lang="bash">POST /mcp HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Accept: application/json, text/event-stream
Mcp-Session-Id: abc123

{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:1,<span class="hljs-string">"method"</span>:<span class="hljs-string">"tools/list"</span>}
</code></pre>
<p><strong>ç«‹å³å“åº”(JSON)</strong> :</p>
<pre><code class="hljs language-css" lang="css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Content</span>-Type: application/json

{"jsonrpc":<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"result"</span>:{"tools":[...]}}
</code></pre>
<p><strong>æµå¼å“åº”(SSE)</strong> :</p>
<pre><code class="hljs language-vbnet" lang="vbnet">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
Content-Type: <span class="hljs-keyword">text</span>/<span class="hljs-keyword">event</span>-stream
Mcp-Session-Id: abc123

<span class="hljs-symbol">id:</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/progress"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"progress"</span>:<span class="hljs-number">25</span>}}

<span class="hljs-symbol">id:</span> <span class="hljs-number">2</span>  
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/progress"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"progress"</span>:<span class="hljs-number">50</span>}}

<span class="hljs-symbol">id:</span> <span class="hljs-number">3</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"result"</span>:{<span class="hljs-string">"content"</span>:[...]}}
</code></pre>
<p><strong>æ¥æ”¶æœåŠ¡å™¨æ¶ˆæ¯(GET)</strong> :</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">GET</span> /mcp HTTP/<span class="hljs-number">1.1</span>
<span class="hljs-symbol">Host:</span> localhost:<span class="hljs-number">8080</span>
<span class="hljs-symbol">Accept:</span> <span class="hljs-keyword">text</span>/<span class="hljs-keyword">event</span>-stream
Mcp-Session-Id: abc123
Last-<span class="hljs-keyword">Event</span>-ID: <span class="hljs-number">42</span>
</code></pre>
<p><strong>ä¼šè¯ç®¡ç†</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœåŠ¡å™¨ç«¯è®¾ç½®ä¼šè¯ID</span>
<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/mcp"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_mcp</span>(<span class="hljs-params">request</span>):
    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">"initialize"</span>:
        session_id = generate_session_id()
        <span class="hljs-keyword">return</span> Response(
            content=json.dumps(result),
            headers={<span class="hljs-string">"Mcp-Session-Id"</span>: session_id}
        )

<span class="hljs-comment"># å®¢æˆ·ç«¯åç»­è¯·æ±‚æºå¸¦ä¼šè¯ID</span>
<span class="hljs-meta">@client.request</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_request</span>(<span class="hljs-params">method, params</span>):
    headers = {}
    <span class="hljs-keyword">if</span> self.session_id:
        headers[<span class="hljs-string">"Mcp-Session-Id"</span>] = self.session_id
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> http.post(
        <span class="hljs-string">"/mcp"</span>,
        json={<span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>, <span class="hljs-string">"method"</span>: method, <span class="hljs-string">"params"</span>: params},
        headers=headers
    )
</code></pre>
<p><strong>æ–­çº¿é‡è¿</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_sse</span>(<span class="hljs-params">last_event_id=<span class="hljs-literal">None</span></span>):
    headers = {<span class="hljs-string">"Accept"</span>: <span class="hljs-string">"text/event-stream"</span>}
    <span class="hljs-keyword">if</span> last_event_id:
        headers[<span class="hljs-string">"Last-Event-ID"</span>] = last_event_id
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.stream(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"/mcp"</span>, headers=headers) <span class="hljs-keyword">as</span> stream:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> stream.aiter_lines():
            <span class="hljs-keyword">if</span> line.startswith(<span class="hljs-string">"id:"</span>):
                last_event_id = line[<span class="hljs-number">3</span>:].strip()
            <span class="hljs-keyword">elif</span> line.startswith(<span class="hljs-string">"data:"</span>):
                data = json.loads(line[<span class="hljs-number">5</span>:])
                <span class="hljs-keyword">yield</span> data, last_event_id
</code></pre>
<h3 data-id="heading-11">4.5 å®é™…é€šä¿¡ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå®Œæ•´çš„SQLiteæŸ¥è¯¢åœºæ™¯:</p>
<pre><code class="hljs language-css" lang="css">// <span class="hljs-number">1</span>. åˆ—å‡ºå·¥å…·
å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/list"</span>
}

æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"result"</span>: {
    "tools": [
      {
        "name": <span class="hljs-string">"query"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span>,
        <span class="hljs-string">"inputSchema"</span>: {
          "type": <span class="hljs-string">"object"</span>,
          <span class="hljs-string">"properties"</span>: {
            "sql": {"type": <span class="hljs-string">"string"</span>}
          },
          "required": [<span class="hljs-string">"sql"</span>]
        }
      }
    ]
  }
}

// <span class="hljs-number">2</span>. è°ƒç”¨æŸ¥è¯¢å·¥å…·
å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/call"</span>,
  <span class="hljs-string">"params"</span>: {
    "name": <span class="hljs-string">"query"</span>,
    <span class="hljs-string">"arguments"</span>: {
      "sql": <span class="hljs-string">"SELECT COUNT(*) FROM users WHERE active = 1"</span>
    },
    "_meta": {
      "progressToken": <span class="hljs-string">"query-123"</span>  // è¯·æ±‚è¿›åº¦é€šçŸ¥
    }
  }
}

// <span class="hljs-number">3</span>. æœåŠ¡å™¨å‘é€è¿›åº¦(å¼‚æ­¥é€šçŸ¥)
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"notifications/progress"</span>,
  <span class="hljs-string">"params"</span>: {
    "progressToken": <span class="hljs-string">"query-123"</span>,
    <span class="hljs-string">"progress"</span>: <span class="hljs-number">50</span>,
    <span class="hljs-string">"total"</span>: <span class="hljs-number">100</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ­£åœ¨æ‰«æusersè¡¨..."</span>
  }
}

// <span class="hljs-number">4</span>. è¿”å›æŸ¥è¯¢ç»“æœ
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"result"</span>: {
    "<span class="hljs-attribute">content</span>": [
      {
        "type": <span class="hljs-string">"text"</span>,
        <span class="hljs-string">"text"</span>: <span class="hljs-string">"æŸ¥è¯¢ç»“æœ: 1,234ä¸ªæ´»è·ƒç”¨æˆ·"</span>
      }
    ],
    "isError": false
  }
}

// <span class="hljs-number">5</span>. å¦‚æœæŸ¥è¯¢å‡ºé”™
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯(é”™è¯¯æƒ…å†µ):
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"error"</span>: {
    "<span class="hljs-selector-tag">code</span>": -<span class="hljs-number">32603</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"SQLè¯­æ³•é”™è¯¯"</span>,
    <span class="hljs-string">"data"</span>: {
      "sql": <span class="hljs-string">"SELECT COUNT(*) FROM users WHERE active = 1"</span>,
      <span class="hljs-string">"error"</span>: <span class="hljs-string">"near "</span>WHERE<span class="hljs-string">": syntax error"</span>,
      <span class="hljs-string">"position"</span>: <span class="hljs-number">35</span>
    }
  }
}
</code></pre>
<p>è¿™å°±æ˜¯MCPé€šä¿¡çš„å®Œæ•´è¿‡ç¨‹!é€šè¿‡JSON-RPC 2.0ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥è¿›è¡Œç»“æ„åŒ–ã€ç±»å‹å®‰å…¨çš„é€šä¿¡ã€‚</p>
<h2 data-id="heading-12">äº”ã€æœåŠ¡å™¨èƒ½åŠ›ï¼šä¸‰ç§æ ¸å¿ƒåŠŸèƒ½</h2>
<p>MCPæœåŠ¡å™¨å¯ä»¥æä¾›ä¸‰ç§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-13">5.1 Resources(èµ„æº)ï¼šåº”ç”¨å†³å®šç”¨ä»€ä¹ˆ</h3>
<p><strong>èµ„æºå°±æ˜¯æ•°æ®</strong>ï¼Œæ¯”å¦‚æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€APIå“åº”ã€‚</p>
<p><strong>è°æ§åˆ¶</strong>: åº”ç”¨ç¨‹åºå†³å®šæŠŠå“ªäº›èµ„æºæä¾›ç»™AI</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åˆ—å‡ºæ‰€æœ‰å¯ç”¨èµ„æº</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resources/list"</span><span class="hljs-punctuation">}</span>

<span class="hljs-comment">// è¯»å–æŸä¸ªèµ„æº</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resources/read"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///project/main.py"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>èµ„æºURIç¤ºä¾‹</strong>:</p>
<ul>
<li><code>file:///project/src/main.py</code> - æ–‡ä»¶</li>
<li><code>db://schema/users</code> - æ•°æ®åº“è¡¨ç»“æ„</li>
<li><code>git://commits/main</code> - Gitæäº¤å†å²</li>
<li><code>https://api.example.com/data</code> - Web API</li>
</ul>
<p><strong>è®¢é˜…å˜æ›´</strong>: å¯ä»¥è®¢é˜…èµ„æº,å½“å®ƒå˜åŒ–æ—¶è‡ªåŠ¨æ”¶åˆ°é€šçŸ¥ã€‚</p>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: FilesystemæœåŠ¡å™¨æš´éœ²èµ„æº</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"uri"</span>: <span class="hljs-string">"file:///Users/alice/project/src/main.py"</span>,  <span class="hljs-comment">// Pythonæºæ–‡ä»¶</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"main.py"</span>,                                  <span class="hljs-comment">// æ–‡ä»¶å</span>
  <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"text/x-python"</span>,                        <span class="hljs-comment">// æ–‡ä»¶ç±»å‹</span>
  <span class="hljs-string">"text"</span>: <span class="hljs-string">"import os<span class="hljs-subst">\n</span>def main()..."</span>                  <span class="hljs-comment">// æ–‡ä»¶å†…å®¹</span>
}
</code></pre>
<p>å®¢æˆ·ç«¯AIå¯ä»¥è¯»å–è¿™ä¸ªèµ„æºï¼Œç†è§£ä»£ç ç»“æ„åæä¾›é‡æ„å»ºè®®æˆ–ç”Ÿæˆæµ‹è¯•ã€‚</p>
<h3 data-id="heading-14">5.2 Prompts(æç¤ºæ¨¡æ¿)ï¼šç”¨æˆ·é€‰æ‹©ç”¨ä»€ä¹ˆ</h3>
<p><strong>ä»€ä¹ˆæ˜¯Prompt?</strong></p>
<p>Promptå°±åƒæ˜¯ã€Œå¯¹è¯æ¨¡æ¿ã€æˆ–ã€Œå¿«æ·æŒ‡ä»¤ã€ï¼ŒæŠŠå¸¸ç”¨çš„å¤æ‚æŒ‡ä»¤é¢„è®¾å¥½ï¼Œç”¨æˆ·ä¸€é”®è°ƒç”¨ã€‚ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­ç±»æ¯”ï¼Œå°±åƒå¾®ä¿¡çš„ã€Œå¿«æ·å›å¤ã€æˆ–IDEä¸­çš„ã€Œä»£ç ç‰‡æ®µ(Snippet)ã€ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦Prompt?</strong><br/>
åœºæ™¯1:æ²¡æœ‰Promptæ—¶</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æ¯æ¬¡éƒ½è¦è¾“å…¥:
"è¯·åˆ†æè¿™ä¸ªGitä»“åº“æœ€è¿‘ä¸€å‘¨çš„æäº¤,ç»Ÿè®¡:
<span class="hljs-bullet">1.</span> æ€»æäº¤æ¬¡æ•°
<span class="hljs-bullet">2.</span> æ¯ä¸ªä½œè€…çš„è´¡çŒ®
<span class="hljs-bullet">3.</span> ä¿®æ”¹çš„ä¸»è¦æ–‡ä»¶
<span class="hljs-bullet">4.</span> æ˜¯å¦æœ‰ç ´åæ€§å˜æ›´
è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡º"
</code></pre>
<p>åœºæ™¯2:æœ‰Promptå</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·åªéœ€:</span>
1. ç‚¹å‡» <span class="hljs-string">"/analyze-commits"</span> å‘½ä»¤
2. é€‰æ‹©åˆ†æ”¯ <span class="hljs-string">"main"</span>
3. AIè‡ªåŠ¨æ‰§è¡Œå®Œæ•´åˆ†æ
</code></pre>
<p><strong>Promptçš„æ•°æ®ç»“æ„</strong></p>
<p><strong>å®šä¹‰ä¸€ä¸ªPrompt</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"analyze_commits"</span><span class="hljs-punctuation">,</span>              <span class="hljs-comment">// Promptçš„å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æäº¤å†å²åˆ†æ"</span><span class="hljs-punctuation">,</span>                  <span class="hljs-comment">// ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„åç§°</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†æGitæäº¤å¹¶ç”ŸæˆæŠ¥å‘Š"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// åŠŸèƒ½è¯´æ˜</span>
  <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                          <span class="hljs-comment">// éœ€è¦çš„å‚æ•°åˆ—è¡¨</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"branch"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// å‚æ•°å</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¦åˆ†æçš„åˆ†æ”¯å"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å‚æ•°è¯´æ˜</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>                    <span class="hljs-comment">// æ˜¯å¦å¿…å¡«</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"since"</span><span class="hljs-punctuation">,</span>                    <span class="hljs-comment">// æ—¶é—´èŒƒå›´</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"èµ·å§‹æ—¥æœŸ(å¦‚:7 days ago)"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>                   <span class="hljs-comment">// å¯é€‰å‚æ•°</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"author"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// ä½œè€…è¿‡æ»¤</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åªçœ‹æŸä¸ªä½œè€…çš„æäº¤"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹</strong></p>
<p><strong>æ­¥éª¤1: åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„Prompt</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å®¢æˆ·ç«¯è¯·æ±‚</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prompts/list"</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æœåŠ¡å™¨å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"analyze_commits"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ“Š æäº¤å†å²åˆ†æ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†ææŒ‡å®šåˆ†æ”¯çš„æäº¤å†å²,ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"branch"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"since"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"review_code"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ” ä»£ç å®¡æŸ¥"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¯¹ä»£ç è¿›è¡Œè´¨é‡å®¡æŸ¥å’Œæ”¹è¿›å»ºè®®"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file_path"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"focus"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explain_error"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ› é”™è¯¯è¯Šæ–­"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è§£é‡Šé”™è¯¯ä¿¡æ¯å¹¶æä¾›ä¿®å¤å»ºè®®"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error_message"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤2: ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçœ‹åˆ°è¿™äº›é€‰é¡¹</strong></p>
<pre><code class="hljs language-bash" lang="bash">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  å¯ç”¨å‘½ä»¤:
  
  ğŸ“Š /analyze-commits
     åˆ†ææŒ‡å®šåˆ†æ”¯çš„æäº¤å†å²
     
  ğŸ” /review-code  
     å¯¹ä»£ç è¿›è¡Œè´¨é‡å®¡æŸ¥
     
  ğŸ› /explain-error
     è§£é‡Šé”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
</code></pre>
<p><strong>æ­¥éª¤3: ç”¨æˆ·é€‰æ‹©å¹¶å¡«å†™å‚æ•°</strong></p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·è¾“å…¥: /analyze-commits

ç³»ç»Ÿå¼¹çª—:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æäº¤å†å²åˆ†æ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†æ”¯å *: <span class="hljs-section">[main      ]</span> â”‚
â”‚ æ—¶é—´èŒƒå›´: <span class="hljs-section">[7 days ago]</span> â”‚
â”‚ ä½œè€…:     <span class="hljs-section">[          ]</span> â”‚
â”‚                         â”‚
â”‚      <span class="hljs-section">[å–æ¶ˆ]</span>  <span class="hljs-section">[ç¡®å®š]</span>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ­¥éª¤4: è·å–å®Œæ•´çš„Promptå†…å®¹</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å®¢æˆ·ç«¯è¯·æ±‚</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"prompts/get"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"analyze_commits"</span>,       <span class="hljs-comment">// ä½¿ç”¨å“ªä¸ªæ¨¡æ¿</span>
    <span class="hljs-string">"arguments"</span>: {                    <span class="hljs-comment">// ç”¨æˆ·å¡«å†™çš„å‚æ•°</span>
      <span class="hljs-string">"branch"</span>: <span class="hljs-string">"main"</span>,
      <span class="hljs-string">"since"</span>: <span class="hljs-string">"7 days ago"</span>
    }
  }
}

<span class="hljs-comment">// æœåŠ¡å™¨å“åº” - è¿”å›å®Œæ•´çš„å¯¹è¯æ¶ˆæ¯</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"result"</span>: {
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"åˆ†æmainåˆ†æ”¯æœ€è¿‘7å¤©çš„æäº¤"</span>,
    <span class="hljs-string">"messages"</span>: [                     <span class="hljs-comment">// å‘é€ç»™AIçš„å®Œæ•´å¯¹è¯</span>
      {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,               <span class="hljs-comment">// ç”¨æˆ·è§’è‰²</span>
        <span class="hljs-string">"content"</span>: {
          <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
          <span class="hljs-string">"text"</span>: <span class="hljs-string">"è¯·åˆ†æmainåˆ†æ”¯åœ¨è¿‡å»7å¤©çš„Gitæäº¤å†å²ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>éœ€è¦ç»Ÿè®¡:<span class="hljs-subst">\n</span>1. æ€»æäº¤æ¬¡æ•°<span class="hljs-subst">\n</span>2. æ¯ä¸ªä½œè€…çš„è´¡çŒ®æ¬¡æ•°å’Œä»£ç è¡Œæ•°<span class="hljs-subst">\n</span>3. ä¸»è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨<span class="hljs-subst">\n</span>4. æ˜¯å¦åŒ…å«breaking changes<span class="hljs-subst">\n</span>5. æäº¤æ¶ˆæ¯çš„è§„èŒƒæ€§<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡ºç»“æœ,å¹¶åœ¨æœ€åç»™å‡ºæ”¹è¿›å»ºè®®ã€‚"</span>
        }
      }
    ]
  }
}
</code></pre>
<p><strong>æ­¥éª¤5: å®¢æˆ·ç«¯å°†æ¶ˆæ¯å‘é€ç»™AI</strong></p>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·çœ‹åˆ°AIæ­£åœ¨åˆ†æ...

AIè¿”å›:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š mainåˆ†æ”¯æäº¤åˆ†ææŠ¥å‘Š(æœ€è¿‘7å¤©)

æ€»æäº¤æ¬¡æ•°: 23

ä½œè€…è´¡çŒ®ç»Ÿè®¡:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½œè€…       â”‚ æäº¤æ•° â”‚ ä»£ç è¡Œæ•°  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Alice      â”‚   12   â”‚  +543/-89â”‚
â”‚ Bob        â”‚    8   â”‚  +234/-45â”‚
â”‚ Charlie    â”‚    3   â”‚  +123/-12â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸»è¦ä¿®æ”¹æ–‡ä»¶:
- src/api/users.py (8æ¬¡ä¿®æ”¹)
- src/models/user.py (5æ¬¡ä¿®æ”¹)
- tests/test_user.py (4æ¬¡ä¿®æ”¹)

Breaking Changes: æ— 

æäº¤è§„èŒƒæ€§: è‰¯å¥½ (91%ç¬¦åˆConventional Commits)

æ”¹è¿›å»ºè®®:
1. å»ºè®®å¢åŠ å•å…ƒæµ‹è¯•è¦†ç›–ç‡
2. éƒ¨åˆ†æäº¤æ¶ˆæ¯è¿‡äºç®€çŸ­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
</code></pre>
<p><strong>Promptçš„å†…å®¹ç±»å‹</strong></p>
<p>Promptæ¶ˆæ¯ä¸­å¯ä»¥åŒ…å«å¤šç§å†…å®¹:<br/>
<strong>1. çº¯æ–‡æœ¬</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·å®¡æŸ¥è¿™æ®µä»£ç ..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>2. åµŒå…¥å›¾ç‰‡</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base64-encoded-image-data"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// å›¾ç‰‡æ•°æ®</span>
    <span class="hljs-attr">"mimeType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>                  <span class="hljs-comment">// å›¾ç‰‡ç±»å‹</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>3. åµŒå…¥èµ„æº</strong>(å¼•ç”¨MCPèµ„æº)</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
  <span class="hljs-string">"content"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"resource"</span>,
    <span class="hljs-string">"resource"</span>: {
      <span class="hljs-string">"uri"</span>: <span class="hljs-string">"file:///project/src/user.py"</span>,  <span class="hljs-comment">// èµ„æºURI</span>
      <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"text/x-python"</span>,
      <span class="hljs-string">"text"</span>: <span class="hljs-string">"class User:<span class="hljs-subst">\n</span>    def __init__..."</span>  <span class="hljs-comment">// èµ„æºå†…å®¹</span>
    }
  }
}
</code></pre>
<p><strong>4. å¤šè½®å¯¹è¯</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘æƒ³ä¼˜åŒ–è¿™æ®µä»£ç "</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>                    <span class="hljs-comment">// AIçš„å›å¤</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æä¾›ä»£ç å†…å®¹"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resource"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// ç”¨æˆ·æä¾›ä»£ç </span>
        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Prompt vs Tool vs Resource å¯¹æ¯”</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç‰¹æ€§          Prompt              Tool                Resource
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ§åˆ¶è€…        ç”¨æˆ·ä¸»åŠ¨é€‰æ‹©         AIè‡ªåŠ¨å†³å®š           åº”ç”¨ç¨‹åºæ§åˆ¶

è§¦å‘æ–¹å¼      ç”¨æˆ·ç‚¹å‡»å‘½ä»¤         AIåˆ¤æ–­éœ€è¦è°ƒç”¨       åº”ç”¨è‡ªåŠ¨é™„åŠ 
              /analyze                              æˆ–ç”¨æˆ·é€‰æ‹©
              
è¿”å›å†…å®¹      å¯¹è¯æ¶ˆæ¯            æ‰§è¡Œç»“æœ             æ•°æ®å†…å®¹
              (ç»™AIçš„æŒ‡ä»¤)        (å‡½æ•°è¿”å›å€¼)         (ä¸Šä¸‹æ–‡ä¿¡æ¯)
              
å…¸å‹ç”¨é€”      å·¥ä½œæµæ¨¡æ¿          æ‰§è¡Œæ“ä½œ             æä¾›èƒŒæ™¯ä¿¡æ¯
              å¿«æ·æŒ‡ä»¤            æŸ¥è¯¢æ•°æ®             æ–‡ä»¶å†…å®¹
              
ç¤ºä¾‹          ä»£ç å®¡æŸ¥æ¨¡æ¿        æ‰§è¡ŒSQLæŸ¥è¯¢          é¡¹ç›®README
              é”™è¯¯è¯Šæ–­å‘å¯¼        å‘é€é‚®ä»¶             æ•°æ®åº“Schema
              
ç”¨æˆ·æ„ŸçŸ¥      âœ… æ˜æ˜¾             â“ å¯èƒ½ä¸çŸ¥é“         â“ é€æ˜çš„
              (ç”¨æˆ·ç‚¹å‡»)          (AIå†³å®š)            (è‡ªåŠ¨åŠ è½½)
</code></pre>
<p>Promptæ˜¯é¢„è®¾çš„å¯¹è¯æ¨¡æ¿ï¼Œé€šè¿‡å‚æ•°åŒ–å®ç°çµæ´»åº”ç”¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œå¹¶èƒ½ä¸MCPå…¶ä»–èƒ½åŠ›ç»„åˆå½¢æˆå®Œæ•´å·¥ä½œæµã€‚</p>
<p><strong>ä»£ç å®ç°ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœåŠ¡å™¨ç«¯:æ³¨å†ŒPrompt</span>
<span class="hljs-meta">@server.list_prompts()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_prompts</span>():
    <span class="hljs-keyword">return</span> [
        Prompt(
            name=<span class="hljs-string">"analyze_commits"</span>,
            title=<span class="hljs-string">"ğŸ“Š æäº¤å†å²åˆ†æ"</span>,
            description=<span class="hljs-string">"åˆ†æGitæäº¤å†å²å¹¶ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"</span>,
            arguments=[
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"branch"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åˆ†æ”¯å"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">True</span>},
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"since"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ—¶é—´èŒƒå›´"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">False</span>}
            ]
        )
    ]

<span class="hljs-meta">@server.get_prompt()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_prompt</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"analyze_commits"</span>:
        branch = arguments[<span class="hljs-string">"branch"</span>]
        since = arguments.get(<span class="hljs-string">"since"</span>, <span class="hljs-string">"7 days ago"</span>)
        
        <span class="hljs-comment"># æ„å»ºå®Œæ•´çš„æç¤ºæ¶ˆæ¯</span>
        prompt_text = <span class="hljs-string">f"""
è¯·åˆ†æ<span class="hljs-subst">{branch}</span>åˆ†æ”¯åœ¨<span class="hljs-subst">{since}</span>çš„Gitæäº¤å†å²ã€‚

éœ€è¦ç»Ÿè®¡:
1. æ€»æäº¤æ¬¡æ•°
2. æ¯ä¸ªä½œè€…çš„è´¡çŒ®
3. ä¸»è¦ä¿®æ”¹çš„æ–‡ä»¶
4. æ˜¯å¦æœ‰breaking changes

è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡ºã€‚
        """</span>
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [
                {
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                    <span class="hljs-string">"content"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: prompt_text}
                }
            ]
        }

<span class="hljs-comment"># å®¢æˆ·ç«¯:ä½¿ç”¨Prompt</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">use_prompt</span>(<span class="hljs-params">session, prompt_name, arguments</span>):
    <span class="hljs-comment"># è·å–Promptå†…å®¹</span>
    prompt = <span class="hljs-keyword">await</span> session.get_prompt(
        name=prompt_name,
        arguments=arguments
    )
    
    <span class="hljs-comment"># å°†æ¶ˆæ¯å‘é€ç»™AI</span>
    <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> prompt.messages:
        ai_response = <span class="hljs-keyword">await</span> send_to_ai(message)
        <span class="hljs-built_in">print</span>(ai_response)
</code></pre>
<h3 data-id="heading-15">5.3 Tools(å·¥å…·)ï¼šAI è‡ªå·±å†³å®šç”¨ä»€ä¹ˆ</h3>
<p><strong>Toolå°±æ˜¯å¯æ‰§è¡Œçš„å‡½æ•°</strong>ï¼Œæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨APIã€å†™æ–‡ä»¶ã€‚</p>
<p><strong>è°æ§åˆ¶</strong>ï¼šAIæ¨¡å‹æ ¹æ®å¯¹è¯å†…å®¹è‡ªå·±å†³å®šè°ƒç”¨å“ªä¸ªå·¥å…·</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åˆ—å‡ºå¯ç”¨å·¥å…·</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/list"</span><span class="hljs-punctuation">}</span>

<span class="hljs-comment">// AIè°ƒç”¨å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_weather"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"city"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŒ—äº¬"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç»“æœ</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŒ—äº¬å¤©æ°”:æ™´,æ¸©åº¦22Â°C"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"isError"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-16">5.4 å…¶ä»–åŠŸèƒ½</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Fcompletion" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/completion" ref="nofollow noopener noreferrer"><strong>è¡¥å…¨</strong></a></p>
<p>MCPæä¾›æ ‡å‡†åŒ–çš„å‚æ•°è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œæ”¯æŒä¸ºæç¤ºå’Œèµ„æºURIæä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„å»ºè®®ï¼Œå®ç°ç±»ä¼¼IDEçš„äº¤äº’ä½“éªŒã€‚æœåŠ¡å™¨é€šè¿‡å£°æ˜<code>completions</code>èƒ½åŠ›ï¼Œæ”¯æŒå¯¹<code>ref/prompt</code>å’Œ<code>ref/resource</code>ä¸¤ç§å¼•ç”¨ç±»å‹çš„è¡¥å…¨ï¼Œæ¯æ¬¡æœ€å¤šè¿”å›100ä¸ªæŒ‰ç›¸å…³æ€§æ’åºçš„å»ºè®®å€¼ï¼Œå¹¶å¯é€šè¿‡<code>completion/complete</code>è¯·æ±‚è·å–è¡¥å…¨ç»“æœã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Flogging" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/logging" ref="nofollow noopener noreferrer"><strong>æ—¥å¿—</strong></a></p>
<p>MCPæä¾›ç»“æ„åŒ–æ—¥å¿—æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå…è®¸æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€åŒ…å«ä¸¥é‡æ€§çº§åˆ«ã€å¯é€‰è®°å½•å™¨åç§°å’Œä»»æ„JSONå¯åºåˆ—åŒ–æ•°æ®çš„æ—¥å¿—é€šçŸ¥ã€‚æœåŠ¡å™¨éœ€å£°æ˜<code>logging</code>èƒ½åŠ›ï¼Œæ”¯æŒéµå¾ªRFC 5424æ ‡å‡†çš„æ—¥å¿—çº§åˆ«ï¼ˆä»debugåˆ°emergencyï¼‰ï¼Œå®¢æˆ·ç«¯å¯é€šè¿‡<code>logging/setLevel</code>è¯·æ±‚é…ç½®æœ€ä½æ—¥å¿—çº§åˆ«ï¼ŒæœåŠ¡å™¨é€šè¿‡<code>notifications/message</code>é€šçŸ¥å‘é€æ—¥å¿—æ¶ˆæ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Fpagination" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/pagination" ref="nofollow noopener noreferrer"><strong>åˆ†é¡µ</strong></a></p>
<p>MCPæ”¯æŒå¯¹å¯èƒ½è¿”å›å¤§é‡ç»“æœé›†çš„åˆ—è¡¨æ“ä½œè¿›è¡Œåˆ†é¡µå¤„ç†ï¼Œä½¿ç”¨åŸºäºä¸é€æ˜æ¸¸æ ‡çš„åˆ†é¡µæ¨¡å‹è€Œéæ•°å­—é¡µç ã€‚æœåŠ¡å™¨åœ¨å“åº”ä¸­åŒ…å«å½“å‰é¡µç»“æœå’Œå¯é€‰çš„<code>nextCursor</code>å­—æ®µï¼ˆè¡¨ç¤ºæ›´å¤šç»“æœå­˜åœ¨ï¼‰ï¼Œå®¢æˆ·ç«¯å¯é€šè¿‡åœ¨è¯·æ±‚ä¸­åŒ…å«æ¸¸æ ‡ç»§ç»­åˆ†é¡µã€‚æ”¯æŒåˆ†é¡µçš„æ“ä½œåŒ…æ‹¬<code>resources/list</code>ã€<code>resources/templates/list</code>ã€<code>prompts/list</code>å’Œ<code>tools/list</code>ï¼Œå®¢æˆ·ç«¯å¿…é¡»å°†æ¸¸æ ‡è§†ä¸ºä¸é€æ˜ä»¤ç‰Œã€‚</p>
<h2 data-id="heading-17">å…­ã€å®¢æˆ·ç«¯èƒ½åŠ›ï¼šåå‘è¯·æ±‚</h2>
<p>å®¢æˆ·ç«¯ä¸ä»…æ¥æ”¶æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥æä¾›èƒ½åŠ›ç»™æœåŠ¡å™¨ä½¿ç”¨:</p>
<h3 data-id="heading-18">6.1 Sampling(é‡‡æ ·)ï¼šæœåŠ¡å™¨è¯·æ±‚å®¢æˆ·ç«¯è°ƒç”¨AI</h3>
<p><strong>åœºæ™¯</strong>: æœåŠ¡å™¨åœ¨å¤„ç†ä»»åŠ¡æ—¶ï¼Œéœ€è¦AIå¸®å¿™åˆ†æä¸­é—´ç»“æœã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sampling/createMessage"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¿™ä¸ªæ•°æ®æ­£å¸¸å—?"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"modelPreferences"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"hints"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"claude-3-sonnet"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å»ºè®®ç”¨çš„æ¨¡å‹</span>
      <span class="hljs-attr">"intelligencePriority"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.8</span><span class="hljs-punctuation">,</span>             <span class="hljs-comment">// è¦æ±‚æ™ºèƒ½ç¨‹åº¦</span>
      <span class="hljs-attr">"speedPriority"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span>                     <span class="hljs-comment">// é€Ÿåº¦è¦æ±‚</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹</strong>:FilesystemæœåŠ¡å™¨åœ¨æœç´¢å¤§é‡æ–‡ä»¶æ—¶,è¯·æ±‚AIåˆ¤æ–­å“ªäº›æ–‡ä»¶æœ€ç›¸å…³ã€‚</p>
<h3 data-id="heading-19">6.2 Roots(ç›®å½•)ï¼šå‘Šè¯‰æœåŠ¡å™¨å·¥ä½œèŒƒå›´</h3>
<p><strong>åœºæ™¯</strong>: è®©æœåŠ¡å™¨çŸ¥é“å¯ä»¥è®¿é—®å“ªäº›ç›®å½•ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"roots/list"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///home/user/project"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„é¡¹ç›®"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æœåŠ¡å™¨çŸ¥é“åªèƒ½åœ¨è¿™ä¸ªç›®å½•é‡Œæ“ä½œï¼Œä¿æŠ¤å…¶ä»–æ–‡ä»¶å®‰å…¨ã€‚</p>
<h3 data-id="heading-20">6.3 Elicitation(å¼•å¯¼)ï¼šæœåŠ¡å™¨å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯</h3>
<p><strong>åœºæ™¯</strong>: æœåŠ¡å™¨éœ€è¦ç”¨æˆ·æä¾›é¢å¤–ä¿¡æ¯æ‰èƒ½ç»§ç»­ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"elicitation/create"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æä¾›æ‚¨çš„GitHubç”¨æˆ·å"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"requestedSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç”¨æˆ·å“åº”</strong>:</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"accept"</span>,  <span class="hljs-regexp">//</span> æˆ–<span class="hljs-string">"decline"</span>æ‹’ç», <span class="hljs-string">"cancel"</span>å–æ¶ˆ
  <span class="hljs-string">"content"</span>: {
    <span class="hljs-string">"username"</span>: <span class="hljs-string">"octocat"</span>
  }
}
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: GitæœåŠ¡å™¨éœ€è¦çŸ¥é“æäº¤ä¿¡æ¯æ ¼å¼ï¼Œå¼¹çª—é—®ç”¨æˆ·:"è¯·é€‰æ‹©æäº¤è§„èŒƒ:Conventional Commits/Angular/Custom?"</p>
<h2 data-id="heading-21">ä¸ƒã€å®Œæ•´å®æˆ˜ï¼šä»é›¶æ„å»ºå¤©æ°”æŸ¥è¯¢MCP</h2>
<p>ä¸‹é¢è®©æˆ‘ä»¬ä»å¤´åˆ°å°¾æ„å»ºä¸€ä¸ªå®Œæ•´çš„MCPç³»ç»Ÿï¼ŒåŒ…å«æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-22">7.1 éœ€æ±‚åˆ†æ</h3>
<p><strong>ç›®æ ‡</strong>: æ„å»ºä¸€ä¸ªå¤©æ°”æŸ¥è¯¢MCPæœåŠ¡å™¨,æä¾›:</p>
<ul>
<li><strong>èµ„æº</strong>: åŸå¸‚åˆ—è¡¨</li>
<li><strong>å·¥å…·</strong>: æŸ¥è¯¢å¤©æ°”ã€è·å–é¢„æŠ¥</li>
<li><strong>æç¤º</strong>: å¤©æ°”åˆ†ææ¨¡æ¿</li>
</ul>
<h3 data-id="heading-23">7.2 æœåŠ¡å™¨å®ç°(Python)</h3>
<p><strong>ç¬¬ä¸€æ­¥: å®‰è£…MCP SDK</strong></p>
<pre><code class="hljs">pip install mcp
</code></pre>
<p><strong>ç¬¬äºŒæ­¥: åˆ›å»ºæœåŠ¡å™¨ (weather_server.py)</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp.server <span class="hljs-keyword">import</span> Server
<span class="hljs-keyword">from</span> mcp.types <span class="hljs-keyword">import</span> Resource, Tool, Prompt, TextContent
<span class="hljs-keyword">import</span> mcp.server.stdio
<span class="hljs-keyword">import</span> httpx

<span class="hljs-comment"># åˆ›å»ºMCPæœåŠ¡å™¨å®ä¾‹</span>
server = Server(<span class="hljs-string">"weather-server"</span>)

<span class="hljs-comment"># 1. å®šä¹‰èµ„æº:æ”¯æŒçš„åŸå¸‚åˆ—è¡¨</span>
<span class="hljs-meta">@server.list_resources()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_resources</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„èµ„æºåˆ—è¡¨"""</span>
    <span class="hljs-keyword">return</span> [
        Resource(
            uri=<span class="hljs-string">"weather://cities"</span>,
            name=<span class="hljs-string">"æ”¯æŒçš„åŸå¸‚åˆ—è¡¨"</span>,
            mimeType=<span class="hljs-string">"application/json"</span>,
            description=<span class="hljs-string">"æŸ¥è¯¢å¤©æ°”æ”¯æŒçš„æ‰€æœ‰åŸå¸‚"</span>
        )
    ]

<span class="hljs-meta">@server.read_resource()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_resource</span>(<span class="hljs-params">uri: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""è¯»å–å…·ä½“èµ„æºå†…å®¹"""</span>
    <span class="hljs-keyword">if</span> uri == <span class="hljs-string">"weather://cities"</span>:
        cities = [<span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-string">"å¹¿å·"</span>, <span class="hljs-string">"æ·±åœ³"</span>, <span class="hljs-string">"æ­å·"</span>]
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"contents"</span>: [{
                <span class="hljs-string">"uri"</span>: uri,
                <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"application/json"</span>,
                <span class="hljs-string">"text"</span>: <span class="hljs-built_in">str</span>(cities)
            }]
        }

<span class="hljs-comment"># 2. å®šä¹‰å·¥å…·:å¤©æ°”æŸ¥è¯¢</span>
<span class="hljs-meta">@server.list_tools()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_tools</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„å·¥å…·åˆ—è¡¨"""</span>
    <span class="hljs-keyword">return</span> [
        Tool(
            name=<span class="hljs-string">"get_current_weather"</span>,
            description=<span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”"</span>,
            inputSchema={
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"city"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                        <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°,å¦‚'åŒ—äº¬'"</span>
                    }
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"city"</span>]
            }
        ),
        Tool(
            name=<span class="hljs-string">"get_forecast"</span>,
            description=<span class="hljs-string">"è·å–æœªæ¥3å¤©å¤©æ°”é¢„æŠ¥"</span>,
            inputSchema={
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"city"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°"</span>},
                    <span class="hljs-string">"days"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"é¢„æŠ¥å¤©æ•°(1-3)"</span>, <span class="hljs-string">"default"</span>: <span class="hljs-number">3</span>}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"city"</span>]
            }
        )
    ]

<span class="hljs-meta">@server.call_tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">call_tool</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-string">"""æ‰§è¡Œå·¥å…·è°ƒç”¨"""</span>
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"get_current_weather"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        <span class="hljs-comment"># å®é™…é¡¹ç›®ä¸­è¿™é‡Œè°ƒç”¨çœŸå®çš„å¤©æ°”API</span>
        <span class="hljs-comment"># ç¤ºä¾‹:ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</span>
        weather_data = {
            <span class="hljs-string">"city"</span>: city,
            <span class="hljs-string">"temperature"</span>: <span class="hljs-number">22</span>,
            <span class="hljs-string">"condition"</span>: <span class="hljs-string">"æ™´"</span>,
            <span class="hljs-string">"humidity"</span>: <span class="hljs-number">45</span>
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"content"</span>: [{
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: <span class="hljs-string">f"<span class="hljs-subst">{city}</span>å½“å‰å¤©æ°”:\næ¸©åº¦: <span class="hljs-subst">{weather_data[<span class="hljs-string">'temperature'</span>]}</span>Â°C\nå¤©æ°”: <span class="hljs-subst">{weather_data[<span class="hljs-string">'condition'</span>]}</span>\næ¹¿åº¦: <span class="hljs-subst">{weather_data[<span class="hljs-string">'humidity'</span>]}</span>%"</span>
            }]
        }
    
    <span class="hljs-keyword">elif</span> name == <span class="hljs-string">"get_forecast"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        days = arguments.get(<span class="hljs-string">"days"</span>, <span class="hljs-number">3</span>)
        <span class="hljs-comment"># æ¨¡æ‹Ÿé¢„æŠ¥æ•°æ®</span>
        forecast = <span class="hljs-string">f"<span class="hljs-subst">{city}</span>æœªæ¥<span class="hljs-subst">{days}</span>å¤©é¢„æŠ¥:\nç¬¬1å¤©: æ™´,20-25Â°C\nç¬¬2å¤©: å¤šäº‘,18-23Â°C\nç¬¬3å¤©: å°é›¨,16-20Â°C"</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"content"</span>: [{<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: forecast}]
        }

<span class="hljs-comment"># 3. å®šä¹‰æç¤ºæ¨¡æ¿:å¤©æ°”åˆ†æ</span>
<span class="hljs-meta">@server.list_prompts()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_prompts</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„æç¤ºæ¨¡æ¿"""</span>
    <span class="hljs-keyword">return</span> [
        Prompt(
            name=<span class="hljs-string">"analyze_weather"</span>,
            description=<span class="hljs-string">"åˆ†æå¤©æ°”è¶‹åŠ¿å¹¶ç»™å‡ºå»ºè®®"</span>,
            arguments=[
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"city"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">True</span>}
            ]
        )
    ]

<span class="hljs-meta">@server.get_prompt()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_prompt</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-string">"""è·å–æç¤ºæ¨¡æ¿å†…å®¹"""</span>
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"analyze_weather"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [
                {
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                    <span class="hljs-string">"content"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: <span class="hljs-string">f"è¯·åˆ†æ<span class="hljs-subst">{city}</span>çš„å¤©æ°”æƒ…å†µ,å¹¶ç»™å‡ºå‡ºè¡Œå»ºè®®ã€‚åŒ…æ‹¬:\n1. æ¸©åº¦æ˜¯å¦é€‚å®œ\n2. æ˜¯å¦éœ€è¦å¸¦ä¼\n3. ç©¿è¡£å»ºè®®"</span>
                    }
                }
            ]
        }

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡å™¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># ä½¿ç”¨stdioä¼ è¾“(æœ¬åœ°)</span>
    mcp.server.stdio.run_stdio_server(server)
</code></pre>
<h3 data-id="heading-24">7.3 é…ç½®æœåŠ¡å™¨(Claude Desktop)</h3>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"weather"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/path/to/weather_server.py"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-25">7.4 å®¢æˆ·ç«¯å®ç°(Python)</h3>
<p>å¦‚æœè¦è‡ªå·±å®ç°å®¢æˆ·ç«¯:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp <span class="hljs-keyword">import</span> ClientSession
<span class="hljs-keyword">from</span> mcp.client.stdio <span class="hljs-keyword">import</span> stdio_client
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># è¿æ¥åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> stdio_client(
        command=<span class="hljs-string">"python"</span>,
        args=[<span class="hljs-string">"/path/to/weather_server.py"</span>]
    ) <span class="hljs-keyword">as</span> (read, write):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> ClientSession(read, write) <span class="hljs-keyword">as</span> session:
            
            <span class="hljs-comment"># 1. åˆå§‹åŒ–è¿æ¥</span>
            <span class="hljs-keyword">await</span> session.initialize()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… è¿æ¥æˆåŠŸ!"</span>)
            
            <span class="hljs-comment"># 2. åˆ—å‡ºå¯ç”¨èµ„æº</span>
            resources = <span class="hljs-keyword">await</span> session.list_resources()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“ å¯ç”¨èµ„æº: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(resources.resources)}</span>"</span>)
            <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> resources.resources:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{r.name}</span>: <span class="hljs-subst">{r.uri}</span>"</span>)
            
            <span class="hljs-comment"># 3. è¯»å–åŸå¸‚åˆ—è¡¨èµ„æº</span>
            cities_resource = <span class="hljs-keyword">await</span> session.read_resource(
                uri=<span class="hljs-string">"weather://cities"</span>
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸŒ åŸå¸‚åˆ—è¡¨: <span class="hljs-subst">{cities_resource.contents[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 4. åˆ—å‡ºå¯ç”¨å·¥å…·</span>
            tools = <span class="hljs-keyword">await</span> session.list_tools()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ”§ å¯ç”¨å·¥å…·: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tools.tools)}</span>"</span>)
            <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools.tools:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{t.name}</span>: <span class="hljs-subst">{t.description}</span>"</span>)
            
            <span class="hljs-comment"># 5. è°ƒç”¨å·¥å…·æŸ¥è¯¢å¤©æ°”</span>
            result = <span class="hljs-keyword">await</span> session.call_tool(
                name=<span class="hljs-string">"get_current_weather"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"åŒ—äº¬"</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸŒ¤ï¸  æŸ¥è¯¢ç»“æœ:\n<span class="hljs-subst">{result.content[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 6. è·å–é¢„æŠ¥</span>
            forecast = <span class="hljs-keyword">await</span> session.call_tool(
                name=<span class="hljs-string">"get_forecast"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-string">"days"</span>: <span class="hljs-number">3</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“… å¤©æ°”é¢„æŠ¥:\n<span class="hljs-subst">{forecast.content[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 7. åˆ—å‡ºæç¤ºæ¨¡æ¿</span>
            prompts = <span class="hljs-keyword">await</span> session.list_prompts()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ’¡ æç¤ºæ¨¡æ¿: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(prompts.prompts)}</span>"</span>)
            <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> prompts.prompts:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{p.name}</span>: <span class="hljs-subst">{p.description}</span>"</span>)
            
            <span class="hljs-comment"># 8. è·å–æç¤ºå†…å®¹</span>
            prompt = <span class="hljs-keyword">await</span> session.get_prompt(
                name=<span class="hljs-string">"analyze_weather"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"å¹¿å·"</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“ ç”Ÿæˆçš„æç¤º:\n<span class="hljs-subst">{prompt.messages[<span class="hljs-number">0</span>][<span class="hljs-string">'content'</span>][<span class="hljs-string">'text'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h3 data-id="heading-26">7.5 è¿è¡Œæ•ˆæœ</h3>
<pre><code class="hljs language-makefile" lang="makefile">$ python weather_client.py

âœ… è¿æ¥æˆåŠŸ!

ğŸ“ å¯ç”¨èµ„æº: 1
  - æ”¯æŒçš„åŸå¸‚åˆ—è¡¨: weather://cities

ğŸŒ åŸå¸‚åˆ—è¡¨: ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³', 'æ­å·']

ğŸ”§ å¯ç”¨å·¥å…·: 2
  - get_current_weather: è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”
  - get_forecast: è·å–æœªæ¥3å¤©å¤©æ°”é¢„æŠ¥

ğŸŒ¤ï¸  æŸ¥è¯¢ç»“æœ:
<span class="hljs-section">åŒ—äº¬å½“å‰å¤©æ°”:</span>
<span class="hljs-section">æ¸©åº¦: 22Â°C</span>
<span class="hljs-section">å¤©æ°”: æ™´</span>
<span class="hljs-section">æ¹¿åº¦: 45%</span>

ğŸ“… å¤©æ°”é¢„æŠ¥:
<span class="hljs-section">ä¸Šæµ·æœªæ¥3å¤©é¢„æŠ¥:</span>
<span class="hljs-section">ç¬¬1å¤©: æ™´,20-25Â°C</span>
<span class="hljs-section">ç¬¬2å¤©: å¤šäº‘,18-23Â°C</span>
<span class="hljs-section">ç¬¬3å¤©: å°é›¨,16-20Â°C</span>

ğŸ’¡ æç¤ºæ¨¡æ¿: 1
  - analyze_weather: åˆ†æå¤©æ°”è¶‹åŠ¿å¹¶ç»™å‡ºå»ºè®®

ğŸ“ ç”Ÿæˆçš„æç¤º:
<span class="hljs-section">è¯·åˆ†æå¹¿å·çš„å¤©æ°”æƒ…å†µ,å¹¶ç»™å‡ºå‡ºè¡Œå»ºè®®ã€‚åŒ…æ‹¬:</span>
1. æ¸©åº¦æ˜¯å¦é€‚å®œ
2. æ˜¯å¦éœ€è¦å¸¦ä¼
3. ç©¿è¡£å»ºè®®
</code></pre>
<h2 data-id="heading-27">å…«ã€å…¶ä»–éƒ¨åˆ†ï¼šMCPåŸºç¡€åè®®çš„å¦ä¸€åŠ</h2>
<h3 data-id="heading-28">8.1 æˆæƒï¼ˆAuthorizationï¼‰</h3>
<p>MCPæˆæƒè§„èŒƒå®šä¹‰äº†åŸºäºHTTPä¼ è¾“çš„å®‰å…¨æˆæƒæœºåˆ¶ï¼Œä½¿MCPå®¢æˆ·ç«¯èƒ½å¤Ÿä»£è¡¨èµ„æºæ‰€æœ‰è€…å‘å—é™åˆ¶çš„MCPæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚è¯¥è§„èŒƒåŸºäºOAuth 2.1åŠç›¸å…³æ ‡å‡†ï¼Œå®ç°äº†æˆæƒæœåŠ¡å™¨å‘ç°ã€åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œå’Œè®¿é—®ä»¤ç‰Œç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯é€šè¿‡<code>resource</code>å‚æ•°æ˜ç¡®æŒ‡å®šç›®æ ‡MCPæœåŠ¡å™¨ï¼ˆå¦‚<code>https://mcp.example.com</code>ï¼‰ï¼ŒæœåŠ¡å™¨åˆ™éªŒè¯ä»¤ç‰Œæ˜¯å¦ä¸“é—¨ä¸ºå…¶é¢å‘ï¼Œç¡®ä¿ä»¤ç‰Œä¸ä¼šè¢«è¯¯ç”¨äºå…¶ä»–æœåŠ¡ï¼Œä»è€Œé˜²æ­¢"ä»¤ç‰Œä¼ é€’"å®‰å…¨æ¼æ´ã€‚</p>
<h3 data-id="heading-29">8.2 å–æ¶ˆï¼ˆCancellationï¼‰</h3>
<p>MCPå–æ¶ˆæœºåˆ¶å…è®¸é€šè¿‡é€šçŸ¥æ¶ˆæ¯ä¸­æ­¢æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘é€<code>notifications/cancelled</code>é€šçŸ¥æ¥ç»ˆæ­¢å…ˆå‰å‘å‡ºçš„è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·å–æ¶ˆé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œæ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€åŒ…å«è¯·æ±‚IDå’Œå¯é€‰åŸå› çš„å–æ¶ˆé€šçŸ¥ï¼Œæ¥æ”¶æ–¹åº”åœæ­¢å¤„ç†ã€é‡Šæ”¾èµ„æºä¸”ä¸å‘é€å“åº”ã€‚è¯¥æœºåˆ¶è€ƒè™‘äº†ç½‘ç»œå»¶è¿Ÿå¯¼è‡´çš„ç«æ€æ¡ä»¶ï¼Œå…è®¸æ¥æ”¶æ–¹åœ¨è¯·æ±‚å·²å®Œæˆæˆ–æ— æ³•å–æ¶ˆæ—¶å¿½ç•¥é€šçŸ¥ï¼ŒåŒæ—¶å»ºè®®åŒæ–¹è®°å½•å–æ¶ˆåŸå› ä»¥ä¾¿è°ƒè¯•ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/cancelled"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·å–æ¶ˆ"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-30">8.3 Pingæœºåˆ¶</h3>
<p>MCPæä¾›äº†å¯é€‰çš„pingæœºåˆ¶ï¼Œå…è®¸ä»»ä½•ä¸€æ–¹éªŒè¯å¯¹æ–¹æ˜¯å¦ä»ç„¶å“åº”ä¸”è¿æ¥å­˜æ´»ã€‚è¯¥æœºåˆ¶é€šè¿‡ç®€å•çš„è¯·æ±‚/å“åº”æ¨¡å¼å®ç°ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯å‘é€<code>{"jsonrpc":"2.0","id":"123","method":"ping"}</code>ï¼ŒæœåŠ¡å™¨å¿…é¡»ç«‹å³å“åº”<code>{"jsonrpc":"2.0","id":"123","result":{}}</code>ã€‚å¦‚æœåœ¨åˆç†è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°å“åº”ï¼Œå‘é€æ–¹å¯ä»¥å°†è¿æ¥è§†ä¸ºé™ˆæ—§å¹¶ç»ˆæ­¢è¿æ¥æˆ–å°è¯•é‡æ–°è¿æ¥ã€‚å®ç°åº”å®šæœŸå‘é€pingä»¥æ£€æµ‹è¿æ¥å¥åº·çŠ¶å†µï¼Œä½†åº”é¿å…è¿‡åº¦pingä»¥å‡å°‘ç½‘ç»œå¼€é”€ã€‚</p>
<h3 data-id="heading-31">8.4 è¿›åº¦è·Ÿè¸ªï¼ˆProgressï¼‰</h3>
<p>MCPæ”¯æŒé€šè¿‡é€šçŸ¥æ¶ˆæ¯å¯¹é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œè¿›è¡Œå¯é€‰çš„è¿›åº¦è·Ÿè¸ªã€‚è¯·æ±‚æ–¹å¯ä»¥åœ¨è¯·æ±‚å…ƒæ•°æ®ä¸­åŒ…å«å”¯ä¸€çš„<code>progressToken</code>ï¼ˆå¦‚å­—ç¬¦ä¸²"task123"ï¼‰æ¥æ¥æ”¶è¿›åº¦æ›´æ–°ï¼Œæ¥æ”¶æ–¹åˆ™å¯ä»¥å‘é€åŒ…å«è¿›åº¦å€¼ã€å¯é€‰æ€»å€¼å’Œæ¶ˆæ¯çš„<code>notifications/progress</code>é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶ä¸Šä¼ æ“ä½œå¯ä»¥å‘é€<code>{"progress":50,"total":100,"message":"æ­£åœ¨ä¸Šä¼ æ–‡ä»¶..."}</code>æ¥æŒ‡ç¤ºå®Œæˆç™¾åˆ†æ¯”ã€‚è¿›åº¦å€¼å¿…é¡»éšæ¯ä¸ªé€šçŸ¥é€’å¢ï¼ŒåŒæ–¹åº”å®ç°é€Ÿç‡é™åˆ¶ä»¥é˜²æ­¢æ¶ˆæ¯æ³›æ»¥ï¼Œå¹¶åœ¨æ“ä½œå®Œæˆååœæ­¢å‘é€è¿›åº¦é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/progress"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"progressToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"task123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"progress"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å½“å‰è¿›åº¦</span>
    <span class="hljs-attr">"total"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// æ€»é‡</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨ä¸Šä¼ æ–‡ä»¶..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-32">ä¹ã€å®‰å…¨å®è·µï¼šå¿…é¡»é‡è§†</h2>
<h3 data-id="heading-33">9.1 æ ¸å¿ƒåŸåˆ™</h3>
<p><strong>1. ç”¨æˆ·åŒæ„ä¼˜å…ˆ</strong></p>
<ul>
<li>æ‰€æœ‰æ•°æ®è®¿é—®å¿…é¡»ç»ç”¨æˆ·æ˜ç¡®åŒæ„</li>
<li>æ‰€æœ‰å·¥å…·è°ƒç”¨å‰å¿…é¡»è®©ç”¨æˆ·ç¡®è®¤</li>
</ul>
<p><strong>2. æ•°æ®éšç§ä¿æŠ¤</strong></p>
<ul>
<li>æœåŠ¡å™¨åªèƒ½çœ‹åˆ°å¿…è¦çš„ä¿¡æ¯</li>
<li>å®Œæ•´å¯¹è¯å†å²ä¿ç•™åœ¨å®¿ä¸»,ä¸å‘ç»™æœåŠ¡å™¨</li>
</ul>
<p><strong>3. å·¥å…·å®‰å…¨</strong></p>
<ul>
<li>å·¥å…·ä»£è¡¨ä»£ç æ‰§è¡Œ,å¿…é¡»è°¨æ…</li>
<li>æ˜¾ç¤ºå·¥å…·è¦åšä»€ä¹ˆ,è®©ç”¨æˆ·æ‰¹å‡†</li>
</ul>
<p><strong>4. è¾“å…¥éªŒè¯</strong></p>
<ul>
<li>æœåŠ¡å™¨å¿…é¡»éªŒè¯æ‰€æœ‰è¾“å…¥</li>
<li>å®¢æˆ·ç«¯å¿…é¡»éªŒè¯å·¥å…·è¿”å›çš„ç»“æœ</li>
</ul>
<h3 data-id="heading-34">9.2 å®é™…å»ºè®®</h3>
<p><strong>æœåŠ¡å™¨å¼€å‘è€…</strong>:</p>
<ul>
<li>éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°</li>
<li>å®ç°è®¿é—®æ§åˆ¶å’Œé€Ÿç‡é™åˆ¶</li>
<li>è®°å½•æ“ä½œæ—¥å¿—ä¾›å®¡è®¡</li>
</ul>
<p><strong>å®¢æˆ·ç«¯å¼€å‘è€…</strong>:</p>
<ul>
<li>æ˜¾ç¤ºæ¸…æ™°çš„æƒé™è¯·æ±‚ç•Œé¢</li>
<li>åœ¨è°ƒç”¨å·¥å…·å‰å±•ç¤ºå‚æ•°</li>
<li>å®ç°å·¥å…·è°ƒç”¨è¶…æ—¶æœºåˆ¶</li>
</ul>
<h2 data-id="heading-35">åã€MCPç”Ÿæ€ï¼šè°å¼€å‘å®¢æˆ·ç«¯?</h2>
<p><strong>å…³é”®è®¤çŸ¥</strong>: åœ¨MCPç”Ÿæ€ä¸­ï¼Œ<strong>å®¢æˆ·ç«¯é€šå¸¸ä¸æ˜¯ç”±ä¸‹æ¸¸å¼€å‘è€…å¼€å‘çš„</strong>ï¼Œè€Œæ˜¯<strong>å†…ç½®åœ¨AIåº”ç”¨å¹³å°ä¸­</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css">  å¼€å‘è€…å¼€å‘MCPæœåŠ¡å™¨
       â†“
  é…ç½®åˆ°AIå¹³å°(Claude/<span class="hljs-attribute">Cursor</span>ç­‰)
       â†“
  AIå¹³å°å†…ç½®çš„MCPå®¢æˆ·ç«¯è‡ªåŠ¨è¿æ¥
</code></pre>
<p>å¯¹äºè½¯ä»¶å¼€å‘è€…æ¥è¯´ï¼Œåœ¨MCPç”Ÿæ€ä¸­çš„ä½ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è§’è‰²å®šä½:</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIå¹³å°å¼€å‘è€…(Anthropic, Cursorç­‰)       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å¼€å‘MCPå®¢æˆ·ç«¯SDK                    â”‚
â”‚  âœ… é›†æˆåˆ°è‡ªå·±çš„AIåº”ç”¨ä¸­                â”‚
â”‚  âœ… æä¾›é…ç½®ç•Œé¢                        â”‚
â”‚  âœ… ç®¡ç†MCPæœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸ               â”‚
â”‚  âœ… å¤„ç†AIä¸MCPçš„äº¤äº’é€»è¾‘               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ æä¾›å¹³å°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MCPæœåŠ¡å™¨å¼€å‘è€…(ä½ ã€æˆ‘ã€ç¤¾åŒº)           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å¼€å‘MCPæœåŠ¡å™¨                       â”‚
â”‚  âœ… å®ç°Resources/Tools/Prompts        â”‚
â”‚  âœ… ç¼–å†™ä½¿ç”¨æ–‡æ¡£                        â”‚
â”‚  âœ… å‘å¸ƒåˆ°npm/PyPI                      â”‚
â”‚  âŒ ä¸éœ€è¦å¼€å‘å®¢æˆ·ç«¯                    â”‚
â”‚  âŒ ä¸éœ€è¦å…³å¿ƒAIå¦‚ä½•è°ƒç”¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ ä½¿ç”¨æœåŠ¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ€ç»ˆç”¨æˆ·(å¼€å‘è€…ã€åˆ†æå¸ˆç­‰)               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å®‰è£…éœ€è¦çš„MCPæœåŠ¡å™¨                 â”‚
â”‚  âœ… é…ç½®åˆ°AIå¹³å°                        â”‚
â”‚  âœ… ä½¿ç”¨AIå®Œæˆä»»åŠ¡                      â”‚
â”‚  âŒ ä¸éœ€è¦å†™ä»£ç                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-36">åè®°</h2>
<p>MCP è®© AI åº”ç”¨å¼€å‘å˜å¾—æ›´ç®€å•ã€æ›´å®‰å…¨ã€æ›´å¼ºå¤§ã€‚å®ƒä¸æ˜¯é“¶å¼¹ï¼Œä½†ä¸ºæ„å»ºå¯é çš„AIç³»ç»Ÿæä¾›äº†åšå®åŸºç¡€ã€‚<strong>æœ¬æ–‡å…¨éƒ¨å†…å®¹åŸºäºæç¤ºç¼–å†™ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</strong></p>
<h2 data-id="heading-37">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li>MCPå®˜æ–¹è§„èŒƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18" ref="nofollow noopener noreferrer">modelcontextprotocol.io/specificatiâ€¦</a></li>
<li>JSON-RPC 2.0: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonrpc.org%2F" target="_blank" title="https://www.jsonrpc.org/" ref="nofollow noopener noreferrer">www.jsonrpc.org/</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PaddleOCR-VL-vLLM-OpenAI-APIä½¿ç”¨æ•™ç¨‹æ¥äº†ï¼æ‰‹æŠŠæ‰‹æ•™ä½ æå®šæ–‡æ¡£è§£æ]]></title>    <link>https://juejin.cn/post/7571829879827628051</link>    <guid>https://juejin.cn/post/7571829879827628051</guid>    <pubDate>2025-11-13T10:20:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571829879827628051" data-draft-id="7572004684178669622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PaddleOCR-VL-vLLM-OpenAI-APIä½¿ç”¨æ•™ç¨‹æ¥äº†ï¼æ‰‹æŠŠæ‰‹æ•™ä½ æå®šæ–‡æ¡£è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-13T10:20:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç®—å®¶è®¡ç®—"/> <meta itemprop="url" content="https://juejin.cn/user/1426490793396571"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PaddleOCR-VL-vLLM-OpenAI-APIä½¿ç”¨æ•™ç¨‹æ¥äº†ï¼æ‰‹æŠŠæ‰‹æ•™ä½ æå®šæ–‡æ¡£è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1426490793396571/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç®—å®¶è®¡ç®—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:20:37.000Z" title="Thu Nov 13 2025 10:20:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>é€šè¿‡ OpenAI å…¼å®¹çš„ API æ¥å£ä½¿ç”¨è¯¥å·¥å…·çš„ã€æœ¬åœ°éƒ¨ç½²æ•™ç¨‹ã€‘è¯·ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ï¼š</strong></p>
<p><a href="https://juejin.cn/post/7569789282429255722" target="_blank" title="https://juejin.cn/post/7569789282429255722">å‘Šåˆ«ç¹çæ–‡æ¡£å¤„ç†ï¼PaddleOCR-VL-vLLM-OpenAI-APIæœ¬åœ°éƒ¨ç½²æ•™ç¨‹ï¼šç²¾å‡†è§£ææ–‡æœ¬/è¡¨æ ¼/å…¬å¼ - æ˜é‡‘</a></p>
<p><strong>æ¨¡å‹ä¸€é”®éƒ¨ç½²åŠä½¿ç”¨æ–¹æ³•è¯·è¿›å…¥â€œç®—å®¶äº‘â€å®˜ç½‘</strong></p>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>PaddleOCR-VL æ˜¯ä¸€ä¸ªåŸºäºè§†è§‰è¯­è¨€æ¨¡å‹çš„å¤šåŠŸèƒ½å›¾åƒè¯†åˆ«å·¥å…·ï¼Œæ”¯æŒ OCR æ–‡å­—è¯†åˆ«ã€è¡¨æ ¼è¯†åˆ«ã€å…¬å¼è¯†åˆ«å’Œå›¾è¡¨è¯†åˆ«ç­‰åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é€šè¿‡ OpenAI å…¼å®¹çš„ API æ¥å£ä½¿ç”¨è¯¥æ¨¡å‹ã€‚</p>
<p><strong>åŠŸèƒ½éªŒè¯çŠ¶æ€</strong>: æ‰€æœ‰å››ç§ä»»åŠ¡ç±»å‹å·²é€šè¿‡å®Œæ•´æµ‹è¯•ï¼ŒåŠŸèƒ½ç¨³å®šå¯ç”¨ï¼ˆæµ‹è¯•æ—¶é—´ï¼š2025-11-07ï¼‰</p>
<h2 data-id="heading-1">API é…ç½®ä¿¡æ¯</h2>
<ul>
<li><strong>API ç«¯ç‚¹</strong>:Â <code>http://xn-b.suanjiayun.com:51849/v1/</code>Â  <strong>(å®ä¾‹å¯¹å¤–å¼€æ”¾ç«¯å£)</strong></li>
<li><strong>æ¨¡å‹åç§°</strong>:Â <code>PaddleOCR-VL</code></li>
<li><strong>API Key</strong>:Â <code>EMPTY</code>ï¼ˆæ— éœ€çœŸå®å¯†é’¥ï¼‰</li>
<li><strong>æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦</strong>: 4096 tokens</li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>: å»ºè®® 3600 ç§’</li>
<li><strong>å¹³å‡å“åº”æ—¶é—´</strong>: 3-5 ç§’</li>
</ul>
<h2 data-id="heading-2">ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-3">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs">pip install openai
</code></pre>
<h3 data-id="heading-4">2. åŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">from openai import OpenAI

<span class="hljs-attr">client</span> = OpenAI(
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">"EMPTY"</span>,
    <span class="hljs-attr">base_url</span>=<span class="hljs-string">"http://xn-b.suanjiayun.com:51849/v1/"</span>,
    <span class="hljs-attr">timeout</span>=<span class="hljs-number">3600</span>
)
</code></pre>
<h2 data-id="heading-5">æ”¯æŒçš„ä»»åŠ¡ç±»å‹</h2>
<h3 data-id="heading-6">1. OCR æ–‡å­—è¯†åˆ« âœ…</h3>
<ul>
<li><strong>ä»»åŠ¡æ ‡è¯†</strong>:Â <code>"OCR:"</code></li>
<li><strong>åŠŸèƒ½</strong>: è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—å†…å®¹</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>: çº¯æ–‡æœ¬ï¼Œä¿æŒåŸæœ‰å¸ƒå±€ç»“æ„</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: æ–‡æ¡£æ‰«æã€ç¥¨æ®è¯†åˆ«ã€æ ‡ç‰Œè¯†åˆ«ç­‰</li>
<li><strong>æµ‹è¯•ç»“æœ</strong>: å‡†ç¡®è¯†åˆ«æ–‡å­—å’Œæ•°å­—ï¼Œå¸ƒå±€ä¿æŒè‰¯å¥½</li>
</ul>
<p><strong>ç¤ºä¾‹è¾“å‡º</strong>:</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-built_in">CINNAMON</span> SUGAR
<span class="hljs-number">1</span> x <span class="hljs-number">17</span>,<span class="hljs-number">000</span>
<span class="hljs-number">17</span>,<span class="hljs-number">000</span>
SUB TOTAL
<span class="hljs-number">17</span>,<span class="hljs-number">000</span>
</code></pre>
<h3 data-id="heading-7">2. è¡¨æ ¼è¯†åˆ« âœ…</h3>
<ul>
<li><strong>ä»»åŠ¡æ ‡è¯†</strong>:Â <code>"Table Recognition:"</code></li>
<li><strong>åŠŸèƒ½</strong>: è¯†åˆ«å’Œè§£æè¡¨æ ¼ç»“æ„åŠå†…å®¹</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>: ç»“æ„åŒ–æ ‡è®°è¯­è¨€ï¼ˆ<code>&lt;fcel&gt;</code>,Â <code>&lt;lcel&gt;</code>,Â <code>&lt;ecel&gt;</code>,Â <code>&lt;nl&gt;</code>ï¼‰</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: è´¢åŠ¡æŠ¥è¡¨ã€æ•°æ®è¡¨æ ¼ã€ç»Ÿè®¡è¡¨ç­‰</li>
<li><strong>æµ‹è¯•ç»“æœ</strong>: èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«è¡¨æ ¼è¡Œåˆ—ç»“æ„</li>
</ul>
<p><strong>æ ‡è®°è¯´æ˜</strong>:</p>
<ul>
<li><code>&lt;fcel&gt;</code>: ç¬¬ä¸€åˆ—å•å…ƒæ ¼</li>
<li><code>&lt;lcel&gt;</code>: æœ€åä¸€åˆ—å•å…ƒæ ¼</li>
<li><code>&lt;ecel&gt;</code>: ç©ºå•å…ƒæ ¼</li>
<li><code>&lt;nl&gt;</code>: æ–°è¡Œ</li>
</ul>
<h3 data-id="heading-8">3. å…¬å¼è¯†åˆ« âœ…</h3>
<ul>
<li><strong>ä»»åŠ¡æ ‡è¯†</strong>:Â <code>"Formula Recognition:"</code></li>
<li><strong>åŠŸèƒ½</strong>: è¯†åˆ«æ•°å­¦å…¬å¼å’Œç§‘å­¦å…¬å¼</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>: æ ¼å¼åŒ–å¯¹é½çš„æ–‡æœ¬ï¼Œä¿æŒæ•°å­—å¯¹é½</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: å­¦æœ¯è®ºæ–‡ã€æ•™æã€ç§‘ç ”æ–‡æ¡£ç­‰</li>
<li><strong>æµ‹è¯•ç»“æœ</strong>: èƒ½è¯†åˆ«è¿ç®—ç¬¦ï¼Œä¿æŒæ ¼å¼å¯¹é½</li>
</ul>
<h3 data-id="heading-9">4. å›¾è¡¨è¯†åˆ« âœ…</h3>
<ul>
<li><strong>ä»»åŠ¡æ ‡è¯†</strong>:Â <code>"Chart Recognition:"</code></li>
<li><strong>åŠŸèƒ½</strong>: è¯†åˆ«å›¾è¡¨ç±»å‹å’Œæ•°æ®å†…å®¹</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>: è¡¨æ ¼åŒ–æ•°æ®ï¼ˆCategory | Value æ ¼å¼ï¼‰</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€ç»Ÿè®¡å›¾å½¢ç­‰</li>
<li><strong>æµ‹è¯•ç»“æœ</strong>: è‡ªåŠ¨ç»“æ„åŒ–æ•°æ®ï¼Œä¾¿äºåç»­å¤„ç†</li>
</ul>
<p><strong>ç¤ºä¾‹è¾“å‡º</strong>:</p>
<pre><code class="hljs language-objectivec" lang="objectivec">Category | Value
<span class="hljs-built_in">CINNAMON</span> SUGAR | <span class="hljs-number">17000</span>
SUB TOTAL | <span class="hljs-number">17000</span>
GRAND TOTAL | <span class="hljs-number">17000</span>
</code></pre>
<h2 data-id="heading-10">ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-11">å¿«é€Ÿå¼€å§‹ - åŸºç¡€ OCR è¯†åˆ«</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
client = OpenAI(
    api_key=<span class="hljs-string">"EMPTY"</span>,
    base_url=<span class="hljs-string">"http://xn-b.suanjiayun.com:51849/v1/"</span>,
    timeout=<span class="hljs-number">3600</span>
)

<span class="hljs-comment"># å®šä¹‰ä»»åŠ¡ç±»å‹</span>
TASKS = {
    <span class="hljs-string">"ocr"</span>: <span class="hljs-string">"OCR:"</span>,
    <span class="hljs-string">"table"</span>: <span class="hljs-string">"Table Recognition:"</span>,
    <span class="hljs-string">"formula"</span>: <span class="hljs-string">"Formula Recognition:"</span>,
    <span class="hljs-string">"chart"</span>: <span class="hljs-string">"Chart Recognition:"</span>,
}

<span class="hljs-comment"># æ„å»ºè¯·æ±‚æ¶ˆæ¯</span>
messages = [
    {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-string">"content"</span>: [
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                <span class="hljs-string">"image_url"</span>: {
                    <span class="hljs-string">"url"</span>: <span class="hljs-string">"ä½ çš„å›¾ç‰‡URL"</span>
                }
            },
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: TASKS[<span class="hljs-string">"ocr"</span>]  <span class="hljs-comment"># é€‰æ‹©ä»»åŠ¡ç±»å‹</span>
            }
        ]
    }
]

<span class="hljs-comment"># å‘é€è¯·æ±‚</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­£åœ¨å¤„ç†å›¾åƒ..."</span>)
    response = client.chat.completions.create(
        model=<span class="hljs-string">"PaddleOCR-VL"</span>,
        messages=messages,
        temperature=<span class="hljs-number">0.0</span>,
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… è¯†åˆ«æˆåŠŸ!"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“ è¯†åˆ«ç»“æœ:\n<span class="hljs-subst">{response.choices[<span class="hljs-number">0</span>].message.content}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ è¯†åˆ«å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-12">ä¸åŒä»»åŠ¡ç±»å‹ç¤ºä¾‹</h3>
<h4 data-id="heading-13">è¡¨æ ¼è¯†åˆ«ç¤ºä¾‹</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¡¨æ ¼è¯†åˆ« - è¿”å›ç»“æ„åŒ–æ ‡è®°</span>
<span class="hljs-attr">messages</span> = [
    {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-string">"content"</span>: [
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                <span class="hljs-string">"image_url"</span>: {
                    <span class="hljs-string">"url"</span>: <span class="hljs-string">"åŒ…å«è¡¨æ ¼çš„å›¾ç‰‡URL"</span>
                }
            },
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: TASKS[<span class="hljs-string">"table"</span>]
            }
        ]
    }
]

<span class="hljs-attr">response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"PaddleOCR-VL"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.0</span>,
)
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹: &lt;fcel&gt;å†…å®¹&lt;fcel&gt;å†…å®¹&lt;nl&gt;...</span>
</code></pre>
<h4 data-id="heading-14">å›¾è¡¨è¯†åˆ«ç¤ºä¾‹</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å›¾è¡¨è¯†åˆ« - è¿”å›è¡¨æ ¼åŒ–æ•°æ®</span>
<span class="hljs-attr">messages</span> = [
    {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-string">"content"</span>: [
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                <span class="hljs-string">"image_url"</span>: {
                    <span class="hljs-string">"url"</span>: <span class="hljs-string">"å›¾è¡¨å›¾ç‰‡URL"</span>
                }
            },
            {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: TASKS[<span class="hljs-string">"chart"</span>]
            }
        ]
    }
]

<span class="hljs-attr">response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"PaddleOCR-VL"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.0</span>,
)
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹: Category | Value\né¡¹ç›®å | æ•°å€¼</span>
</code></pre>
<h2 data-id="heading-15">å›¾ç‰‡è¾“å…¥æ–¹å¼</h2>
<h3 data-id="heading-16">1. ç½‘ç»œå›¾ç‰‡ URL</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/image.jpg"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">2. Base64 ç¼–ç å›¾ç‰‡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> base64

<span class="hljs-keyword">def</span> <span class="hljs-title function_">encode_image</span>(<span class="hljs-params">image_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(image_path, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> image_file:
        <span class="hljs-keyword">return</span> base64.b64encode(image_file.read()).decode(<span class="hljs-string">'utf-8'</span>)

base64_image = encode_image(<span class="hljs-string">"path/to/your/image.jpg"</span>)

<span class="hljs-string">"image_url"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:image/jpeg;base64,<span class="hljs-subst">{base64_image}</span>"</span>
}
</code></pre>
<h2 data-id="heading-18">å®Œæ•´åŠŸèƒ½ç±» - ç”Ÿäº§å°±ç»ªç‰ˆæœ¬</h2>
<p>åŸºäºå®é™…æµ‹è¯•ç»“æœï¼Œä»¥ä¸‹æ˜¯ç»è¿‡éªŒè¯çš„å®Œæ•´åŠŸèƒ½ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaddleOCRVL</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.client = OpenAI(
            api_key=<span class="hljs-string">"EMPTY"</span>,
            base_url=<span class="hljs-string">"http://xn-b.suanjiayun.com:51849/v1/"</span>,
            timeout=<span class="hljs-number">3600</span>
        )
        self.tasks = {
            <span class="hljs-string">"ocr"</span>: <span class="hljs-string">"OCR:"</span>,
            <span class="hljs-string">"table"</span>: <span class="hljs-string">"Table Recognition:"</span>,
            <span class="hljs-string">"formula"</span>: <span class="hljs-string">"Formula Recognition:"</span>,
            <span class="hljs-string">"chart"</span>: <span class="hljs-string">"Chart Recognition:"</span>,
        }
        self.output_formats = {
            <span class="hljs-string">"ocr"</span>: <span class="hljs-string">"çº¯æ–‡æœ¬æ ¼å¼"</span>,
            <span class="hljs-string">"table"</span>: <span class="hljs-string">"ç»“æ„åŒ–æ ‡è®°è¯­è¨€"</span>,
            <span class="hljs-string">"formula"</span>: <span class="hljs-string">"æ ¼å¼åŒ–å¯¹é½æ–‡æœ¬"</span>,
            <span class="hljs-string">"chart"</span>: <span class="hljs-string">"è¡¨æ ¼åŒ–æ•°æ®"</span>
        }

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">self, image_url, task_type=<span class="hljs-string">"ocr"</span>, verbose=<span class="hljs-literal">False</span></span>):
        <span class="hljs-string">"""
        å›¾åƒè¯†åˆ«ä¸»å‡½æ•° - å·²é€šè¿‡å®Œæ•´æµ‹è¯•éªŒè¯

        Args:
            image_url (str): å›¾ç‰‡URLæˆ–æœ¬åœ°è·¯å¾„
            task_type (str): ä»»åŠ¡ç±»å‹ ('ocr', 'table', 'formula', 'chart')
            verbose (bool): æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†å¤„ç†ä¿¡æ¯

        Returns:
            dict: åŒ…å«è¯†åˆ«ç»“æœå’Œå…ƒä¿¡æ¯çš„å­—å…¸
        """</span>
        <span class="hljs-keyword">if</span> task_type <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.tasks:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä¸æ”¯æŒçš„ä»»åŠ¡ç±»å‹: <span class="hljs-subst">{task_type}</span>. æ”¯æŒçš„ç±»å‹: <span class="hljs-subst">{<span class="hljs-built_in">list</span>(self.tasks.keys())}</span>"</span>)

        <span class="hljs-keyword">if</span> verbose:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸš€ å¼€å§‹ <span class="hljs-subst">{task_type.upper()}</span> è¯†åˆ«..."</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“Š é¢„æœŸè¾“å‡ºæ ¼å¼: <span class="hljs-subst">{self.output_formats[task_type]}</span>"</span>)

        <span class="hljs-comment"># å¤„ç†æœ¬åœ°å›¾ç‰‡</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> image_url.startswith((<span class="hljs-string">'http://'</span>, <span class="hljs-string">'https://'</span>)):
            image_url = self._encode_local_image(image_url)

        messages = [
            {
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                <span class="hljs-string">"content"</span>: [
                    {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                        <span class="hljs-string">"image_url"</span>: {<span class="hljs-string">"url"</span>: image_url}
                    },
                    {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: self.tasks[task_type]
                    }
                ]
            }
        ]

        <span class="hljs-keyword">try</span>:
            start_time = time.time()
            response = self.client.chat.completions.create(
                model=<span class="hljs-string">"PaddleOCR-VL"</span>,
                messages=messages,
                temperature=<span class="hljs-number">0.0</span>,
            )
            end_time = time.time()
            processing_time = end_time - start_time

            result = {
                <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">"content"</span>: response.choices[<span class="hljs-number">0</span>].message.content,
                <span class="hljs-string">"task_type"</span>: task_type,
                <span class="hljs-string">"processing_time"</span>: <span class="hljs-built_in">round</span>(processing_time, <span class="hljs-number">2</span>),
                <span class="hljs-string">"output_format"</span>: self.output_formats[task_type]
            }

            <span class="hljs-keyword">if</span> verbose:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… è¯†åˆ«æˆåŠŸ! è€—æ—¶: <span class="hljs-subst">{processing_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)

            <span class="hljs-keyword">return</span> result

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            error_result = {
                <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
                <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e),
                <span class="hljs-string">"task_type"</span>: task_type,
                <span class="hljs-string">"processing_time"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-string">"output_format"</span>: <span class="hljs-literal">None</span>
            }

            <span class="hljs-keyword">if</span> verbose:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ è¯†åˆ«å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

            <span class="hljs-keyword">return</span> error_result

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_recognize</span>(<span class="hljs-params">self, image_urls, task_type=<span class="hljs-string">"ocr"</span>, verbose=<span class="hljs-literal">False</span></span>):
        <span class="hljs-string">"""æ‰¹é‡è¯†åˆ«åŠŸèƒ½"""</span>
        results = []
        <span class="hljs-keyword">for</span> i, url <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(image_urls):
            <span class="hljs-keyword">if</span> verbose:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå¤„ç†ç¬¬ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(image_urls)}</span> å¼ å›¾ç‰‡..."</span>)
            result = self.recognize(url, task_type, verbose)
            results.append(result)
            time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># é¿å…è¯·æ±‚è¿‡äºé¢‘ç¹</span>
        <span class="hljs-keyword">return</span> results

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_encode_local_image</span>(<span class="hljs-params">self, image_path</span>):
        <span class="hljs-string">"""ç¼–ç æœ¬åœ°å›¾ç‰‡ä¸º base64"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(image_path, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> image_file:
                base64_image = base64.b64encode(image_file.read()).decode(<span class="hljs-string">'utf-8'</span>)
                <span class="hljs-comment"># æ ¹æ®æ–‡ä»¶æ‰©å±•åç¡®å®šMIMEç±»å‹</span>
                <span class="hljs-keyword">if</span> image_path.lower().endswith(<span class="hljs-string">'.png'</span>):
                    <span class="hljs-keyword">return</span> <span class="hljs-string">f"data:image/png;base64,<span class="hljs-subst">{base64_image}</span>"</span>
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-string">f"data:image/jpeg;base64,<span class="hljs-subst">{base64_image}</span>"</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"æ— æ³•è¯»å–å›¾ç‰‡æ–‡ä»¶: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - åŸºäºå®é™…æµ‹è¯•éªŒè¯</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    ocr = PaddleOCRVL()

    <span class="hljs-comment"># æµ‹è¯•ç”¨çš„æ”¶æ®å›¾ç‰‡URL</span>
    test_image = <span class="hljs-string">"https://ofasys-multimodal-wlcb-3-toshanghai.oss-accelerate.aliyuncs.com/wpf272043/keepme/image/receipt.png"</span>

    <span class="hljs-comment"># OCR è¯†åˆ«</span>
    result = ocr.recognize(test_image, <span class="hljs-string">"ocr"</span>, verbose=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">if</span> result[<span class="hljs-string">"success"</span>]:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"OCR ç»“æœ:\n<span class="hljs-subst">{result[<span class="hljs-string">'content'</span>]}</span>"</span>)

    <span class="hljs-comment"># è¡¨æ ¼è¯†åˆ«</span>
    result = ocr.recognize(test_image, <span class="hljs-string">"table"</span>, verbose=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">if</span> result[<span class="hljs-string">"success"</span>]:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¡¨æ ¼è¯†åˆ«ç»“æœ:\n<span class="hljs-subst">{result[<span class="hljs-string">'content'</span>]}</span>"</span>)

    <span class="hljs-comment"># å›¾è¡¨è¯†åˆ«</span>
    result = ocr.recognize(test_image, <span class="hljs-string">"chart"</span>, verbose=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">if</span> result[<span class="hljs-string">"success"</span>]:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾è¡¨è¯†åˆ«ç»“æœ:\n<span class="hljs-subst">{result[<span class="hljs-string">'content'</span>]}</span>"</span>)
</code></pre>
<h2 data-id="heading-19">æ€§èƒ½ç‰¹ç‚¹ï¼ˆåŸºäºå®é™…æµ‹è¯•ï¼‰</h2>
<h3 data-id="heading-20">âœ… å·²éªŒè¯çš„æ€§èƒ½æŒ‡æ ‡</h3>
<ul>
<li><strong>å“åº”æ—¶é—´</strong>: 3-5 ç§’ï¼ˆæ‰€æœ‰ä»»åŠ¡ç±»å‹ï¼‰</li>
<li><strong>æˆåŠŸç‡</strong>: 100%ï¼ˆåŸºäºæµ‹è¯•æ ·æœ¬ï¼‰</li>
<li><strong>API ç¨³å®šæ€§</strong>: è¿ç»­æµ‹è¯•æ— å¼‚å¸¸</li>
<li><strong>è¯†åˆ«å‡†ç¡®ç‡</strong>: æ–‡å­—å’Œæ•°å­—è¯†åˆ«å‡†ç¡®</li>
</ul>
<h3 data-id="heading-21">ğŸ“Š è¾“å‡ºæ ¼å¼å¯¹æ¯”</h3>




































<table><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>è¾“å‡ºæ ¼å¼</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>OCR</td><td>çº¯æ–‡æœ¬</td><td>ä¿æŒåŸå¸ƒå±€</td><td>æ–‡æ¡£æ‰«æã€æ–‡å­—æå–</td></tr><tr><td>Table</td><td>æ ‡è®°è¯­è¨€</td><td>ç»“æ„åŒ–æ ‡è®°</td><td>è¡¨æ ¼æ•°æ®è§£æ</td></tr><tr><td>Formula</td><td>å¯¹é½æ–‡æœ¬</td><td>æ ¼å¼åŒ–æ˜¾ç¤º</td><td>å…¬å¼æ–‡æ¡£å¤„ç†</td></tr><tr><td>Chart</td><td>è¡¨æ ¼æ•°æ®</td><td>Category</td><td>Value</td><td>æ•°æ®åˆ†æå¤„ç†</td></tr></tbody></table>
<h2 data-id="heading-22">æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-23">ğŸ”§ æŠ€æœ¯è¦æ±‚</h3>
<ol>
<li><strong>ç½‘ç»œè¿æ¥</strong>: ç¡®ä¿èƒ½å¤Ÿè®¿é—® API ç«¯ç‚¹Â <code>http://xn-b.suanjiayun.com:51849/v1/</code></li>
<li><strong>å›¾ç‰‡æ ¼å¼</strong>: æ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆJPGã€PNGã€GIF ç­‰ï¼‰</li>
<li><strong>å›¾ç‰‡å¤§å°</strong>: å»ºè®®å›¾ç‰‡ä¸è¶…è¿‡ 10MB</li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>: å»ºè®®è®¾ç½® 3600 ç§’è¶…æ—¶ï¼ˆå®é™…å¤„ç†æ—¶é—´ 3-5 ç§’ï¼‰</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: å§‹ç»ˆä½¿ç”¨ try-except å¤„ç†å¯èƒ½çš„ç½‘ç»œæˆ– API é”™è¯¯</li>
</ol>
<h3 data-id="heading-24">ğŸ’¡ æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>å›¾ç‰‡è´¨é‡</strong>: ä½¿ç”¨é«˜æ¸…æ™°åº¦å›¾ç‰‡è·å¾—æœ€ä½³è¯†åˆ«æ•ˆæœ</li>
<li><strong>ä»»åŠ¡é€‰æ‹©</strong>: æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä»»åŠ¡ç±»å‹</li>
<li><strong>ç»“æœå¤„ç†</strong>: ä¸åŒä»»åŠ¡ç±»å‹è¿”å›ä¸åŒæ ¼å¼ï¼Œéœ€è¦ç›¸åº”çš„åå¤„ç†é€»è¾‘</li>
<li><strong>æ‰¹é‡å¤„ç†</strong>: åœ¨è¯·æ±‚é—´æ·»åŠ é€‚å½“å»¶è¿Ÿï¼ˆå»ºè®® 1-2 ç§’ï¼‰</li>
</ol>
<h2 data-id="heading-25">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-26">Q: å¦‚ä½•æé«˜è¯†åˆ«å‡†ç¡®ç‡ï¼Ÿ</h3>
<p>A:</p>
<ul>
<li>ç¡®ä¿å›¾ç‰‡æ¸…æ™°åº¦è¶³å¤Ÿ</li>
<li>é¿å…å›¾ç‰‡è¿‡åº¦å‹ç¼©</li>
<li>é€‰æ‹©åˆé€‚çš„ä»»åŠ¡ç±»å‹</li>
<li>æ ¹æ®æµ‹è¯•ç»“æœï¼Œå½“å‰è¯†åˆ«å‡†ç¡®ç‡å·²ç»å¾ˆé«˜</li>
</ul>
<h3 data-id="heading-27">Q: æ”¯æŒæ‰¹é‡å¤„ç†å—ï¼Ÿ</h3>
<p>A: æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨æä¾›çš„Â <code>batch_recognize</code>Â æ–¹æ³•ï¼Œæˆ–å¾ªç¯è°ƒç”¨å•å¼ å¤„ç†</p>
<h3 data-id="heading-28">Q: å¦‚ä½•å¤„ç†ä¸åŒçš„è¾“å‡ºæ ¼å¼ï¼Ÿ</h3>
<p>A:</p>
<ul>
<li><strong>OCR</strong>: ç›´æ¥ä½¿ç”¨æ–‡æœ¬å†…å®¹</li>
<li><strong>Table</strong>: éœ€è¦è§£æÂ <code>&lt;fcel&gt;</code>,Â <code>&lt;nl&gt;</code>Â ç­‰æ ‡è®°</li>
<li><strong>Chart</strong>: å¯ä»¥ç›´æ¥æŒ‰Â <code>|</code>Â åˆ†å‰²å¤„ç†è¡¨æ ¼æ•°æ®</li>
</ul>
<h3 data-id="heading-29">Q: API å“åº”æ—¶é—´å¦‚ä½•ï¼Ÿ</h3>
<p>A: æ ¹æ®æµ‹è¯•ç»“æœï¼Œæ‰€æœ‰ä»»åŠ¡ç±»å‹çš„å“åº”æ—¶é—´éƒ½åœ¨ 3-5 ç§’å†…</p>
<h3 data-id="heading-30">Q: å¦‚ä½•å¤„ç†è¯†åˆ«é”™è¯¯ï¼Ÿ</h3>
<p>A: æ£€æŸ¥ç½‘ç»œè¿æ¥ã€å›¾ç‰‡æ ¼å¼å’Œ API ç«¯ç‚¹é…ç½®ã€‚ä½¿ç”¨æä¾›çš„é”™è¯¯å¤„ç†æœºåˆ¶</p>
<h2 data-id="heading-31">åŠŸèƒ½éªŒè¯æµ‹è¯•</h2>
<h3 data-id="heading-32">ğŸ§ª æµ‹è¯•ç”¨ä¾‹</h3>
<p>ä¸ºäº†éªŒè¯æ–‡æ¡£ä¸­çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¿«é€ŸåŠŸèƒ½éªŒè¯æµ‹è¯•</span>
from openai import OpenAI

def quick_test():
    <span class="hljs-attr">client</span> = OpenAI(
        <span class="hljs-attr">api_key</span>=<span class="hljs-string">"EMPTY"</span>,
        <span class="hljs-attr">base_url</span>=<span class="hljs-string">"http://xn-b.suanjiayun.com:51849/v1/"</span>,
        <span class="hljs-attr">timeout</span>=<span class="hljs-number">3600</span>
    )

    <span class="hljs-attr">test_image</span> = <span class="hljs-string">"https://ofasys-multimodal-wlcb-3-toshanghai.oss-accelerate.aliyuncs.com/wpf272043/keepme/image/receipt.png"</span>
    <span class="hljs-attr">tasks</span> = [<span class="hljs-string">"OCR:"</span>, <span class="hljs-string">"Table Recognition:"</span>, <span class="hljs-string">"Formula Recognition:"</span>, <span class="hljs-string">"Chart Recognition:"</span>]

    print("ğŸš€ å¼€å§‹åŠŸèƒ½éªŒè¯æµ‹è¯•...")

    for i, task in enumerate(tasks):
        print(f"\næµ‹è¯• {i+1}/4: {task}")
        try:
            <span class="hljs-attr">messages</span> = [{
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                <span class="hljs-string">"content"</span>: [
                    {<span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>, <span class="hljs-string">"image_url"</span>: {<span class="hljs-string">"url"</span>: test_image}},
                    {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: task}
                ]
            }]

            <span class="hljs-attr">response</span> = client.chat.completions.create(
                <span class="hljs-attr">model</span>=<span class="hljs-string">"PaddleOCR-VL"</span>,
                <span class="hljs-attr">messages</span>=messages,
                <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.0</span>,
            )
            print(f"âœ… {task} æµ‹è¯•é€šè¿‡")
        except Exception as e:
            print(f"âŒ {task} æµ‹è¯•å¤±è´¥: {e}")

    print("\nğŸ‰ æµ‹è¯•å®Œæˆ!")

if <span class="hljs-attr">__name__</span> == <span class="hljs-string">"__main__"</span>:
    quick_test()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ä¹‹å†…ç½®å››å¤§å¤šçº¿ç¨‹API]]></title>    <link>https://juejin.cn/post/7571477608393572352</link>    <guid>https://juejin.cn/post/7571477608393572352</guid>    <pubDate>2025-11-12T09:01:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571477608393572352" data-draft-id="7571641339687895040" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ä¹‹å†…ç½®å››å¤§å¤šçº¿ç¨‹API"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-12T09:01:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ä¹‹å†…ç½®å››å¤§å¤šçº¿ç¨‹API
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:01:00.000Z" title="Wed Nov 12 2025 09:01:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆ Web Worker èƒ½å®ç° â€œå¤šçº¿ç¨‹â€ï¼Ÿ</h3>
<p>æµè§ˆå™¨çš„ JS å¼•æ“ï¼ˆå¦‚ V8ï¼‰æœ¬èº«æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹ / å¤šçº¿ç¨‹æ¶æ„ã€‚Web Worker çš„æœ¬è´¨æ˜¯Â <strong>æµè§ˆå™¨ä¸º JS æä¾›çš„ â€œé¢å¤–çº¿ç¨‹æ± â€</strong> ï¼Œæ ¸å¿ƒåŸç†ï¼š</p>
<ol>
<li><strong>çº¿ç¨‹éš”ç¦»</strong>ï¼šWorker çº¿ç¨‹ä¸ä¸»çº¿ç¨‹æ˜¯å®Œå…¨éš”ç¦»çš„å†…å­˜ç©ºé—´ï¼ˆä¸å…±äº«å †å†…å­˜ï¼‰ï¼Œé€šè¿‡ â€œæ¶ˆæ¯é˜Ÿåˆ—â€ é€šä¿¡ï¼ˆæ•°æ®ä¼ è¾“åŸºäºç»“æ„åŒ–å…‹éš†ç®—æ³•ï¼Œæ·±æ‹·è´ï¼‰ã€‚</li>
<li><strong>é˜»å¡æ— å…³æ€§</strong>ï¼šWorker çº¿ç¨‹çš„é˜»å¡ï¼ˆå¦‚æ­»å¾ªç¯ï¼‰ä¸ä¼šå½±å“ä¸»çº¿ç¨‹ï¼Œä½†ä¼šå¯¼è‡´è‡ªèº«æ— æ³•å“åº”æ¶ˆæ¯ã€‚</li>
<li><strong>èµ„æºé™åˆ¶</strong>ï¼šæµè§ˆå™¨å¯¹ Worker æ•°é‡æœ‰ä¸Šé™ï¼ˆé€šå¸¸åŒæºä¸‹ä¸è¶…è¿‡ 20 ä¸ªï¼‰ï¼Œä¸”å•ä¸ª Worker å ç”¨çš„å†…å­˜æœ‰é™åˆ¶ï¼ˆé¿å…æ»¥ç”¨ç³»ç»Ÿèµ„æºï¼‰ã€‚</li>
</ol>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼šä¸ Node.js çš„Â <code>child_process</code>Â ä¸åŒï¼ŒWeb Worker æ— æ³•å…±äº«å†…å­˜ï¼ˆéœ€é€šè¿‡Â <code>SharedArrayBuffer</code>Â å®ç°æœ‰é™å…±äº«ï¼Œè§ä¸‹æ–‡ï¼‰ï¼Œä¸”å—æµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼ˆå¦‚è·¨åŸŸé™åˆ¶ï¼‰çº¦æŸã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong>
webworkæ˜¯é€šè¿‡jsçš„æ–¹å¼å”¤èµ·æµè§ˆå™¨çš„å†…ç½®apiä½¿ç”¨ï¼Œè¾…åŠ©å‰ç«¯è®¡ç®—çš„ä¸€ç§æ–¹å¼ï¼Œå°±åƒfetchã€ajaixé‚£æ ·å”¤èµ·æµè§ˆå™¨çš„æ¥å£æŸ¥è¯¢ä¸€æ ·ã€‚</p>
<h3 data-id="heading-1">å¤šçº¿ç¨‹å››å¤§API</h3>
<p>Web Worker æ˜¯å‰ç«¯ â€œå¤šçº¿ç¨‹â€ çš„åŸºç¡€è§„èŒƒï¼Œä½†æµè§ˆå™¨é’ˆå¯¹ä¸åŒåœºæ™¯è®¾è®¡äº† <strong>4 ç§ç‹¬ç«‹çš„ Worker ç±»å‹</strong>â€”â€” å®ƒä»¬å…±äº« â€œçº¿ç¨‹éš”ç¦»â€ çš„æ ¸å¿ƒæ€æƒ³ï¼ˆé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼‰ï¼Œä½†å®šä½ã€èƒ½åŠ›ã€ä½¿ç”¨åœºæ™¯å®Œå…¨ä¸åŒï¼Œå‡ä¸º W3C æ ‡å‡†å®šä¹‰çš„åŸç”Ÿ APIï¼ˆæ— éœ€ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œåº•å±‚ç”±æµè§ˆå™¨ç‹¬ç«‹å®ç°ï¼ˆæ— ä¾èµ–å…³ç³»ï¼‰ã€‚</p>
<h4 data-id="heading-2">æµè§ˆå™¨ 4 ç§æ ¸å¿ƒ Worker ç±»å‹å¯¹æ¯”è¡¨</h4>



































<table><thead><tr><th>Worker ç±»å‹</th><th>æ ¸å¿ƒå®šä½</th><th>åº•å±‚ä¾èµ–</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Web Worker</strong></td><td>ä¸»çº¿ç¨‹çš„ â€œè®¡ç®—åŠ©æ‰‹â€ï¼Œå¤„ç†è€—æ—¶è®¡ç®—</td><td>æµè§ˆå™¨çº¿ç¨‹æ± </td><td>å¤§æ•°æ®æ’åºã€åŠ å¯†è§£å¯†ã€å¤æ‚ç®—æ³•è®¡ç®—</td></tr><tr><td><strong>Shared Worker</strong></td><td>å¤šé¡µé¢å…±äº«çš„ â€œåå°åè°ƒè€…â€ï¼Œè·¨é¡µé¢é€šä¿¡</td><td>æµè§ˆå™¨å…±äº«çº¿ç¨‹</td><td>å¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥ã€è·¨é¡µæ•°æ®ååŒ</td></tr><tr><td><strong>Service Worker</strong></td><td>é¡µé¢ç¦»çº¿çš„ â€œä»£ç†æœåŠ¡å™¨â€ï¼Œæ‹¦æˆªè¯·æ±‚ + ç¼“å­˜</td><td>æµè§ˆå™¨åå°çº¿ç¨‹</td><td>ç¦»çº¿åº”ç”¨ã€è¯·æ±‚æ‹¦æˆªä¼˜åŒ–ã€æµè§ˆå™¨æ¨é€é€šçŸ¥</td></tr><tr><td><strong>Worklet</strong></td><td>æ¸²æŸ“ç®¡çº¿çš„ â€œå®æ—¶å¤„ç†å™¨â€ï¼Œä»‹å…¥æ¸²æŸ“æµç¨‹</td><td>æµè§ˆå™¨æ¸²æŸ“çº¿ç¨‹</td><td>CSS ç‰©ç†åŠ¨ç”»ã€éŸ³é¢‘é™å™ªã€Canvas æ¸²æŸ“ä¼˜åŒ–</td></tr></tbody></table>
<h3 data-id="heading-3">äºŒã€åˆ†ç±»</h3>
<h4 data-id="heading-4">1. Web Workerï¼ˆè®¡ç®—å‹ï¼šè§£å†³ä¸»çº¿ç¨‹é˜»å¡ï¼‰</h4>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>ç‹¬ç«‹äºä¸»çº¿ç¨‹çš„ â€œè®¡ç®—çº¿ç¨‹â€ï¼Œä»…ä¸åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹é€šä¿¡ï¼ˆä¸€å¯¹ä¸€ï¼‰ï¼›</li>
</ul>

<ul>
<li>ç”Ÿå‘½å‘¨æœŸä¸é¡µé¢ç»‘å®šï¼ˆé¡µé¢å…³é—­åˆ™ Worker é”€æ¯ï¼‰ï¼›</li>
</ul>

<ul>
<li>ä¸é˜»å¡ UIï¼Œä¸“é—¨å¤„ç†è€—æ—¶è®¡ç®—ï¼ˆé¿å…é¡µé¢å¡é¡¿ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š10 ä¸‡æ¡æ•°æ®æ’åº</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼ˆmain.jsï¼‰ï¼šå‘èµ·è®¡ç®—è¯·æ±‚ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">Worker</span>) {
  <span class="hljs-comment">// 1. åˆ›å»º Worker å®ä¾‹</span>
  <span class="hljs-keyword">const</span> sortWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'sort-worker.js'</span>);
  
  <span class="hljs-comment">// 2. ç”Ÿæˆ 10 ä¸‡æ¡éšæœºå¤§æ•°æ®ï¼ˆæ¨¡æ‹Ÿå¤æ‚è®¡ç®—åœºæ™¯ï¼‰</span>
  <span class="hljs-keyword">const</span> bigData = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">100000</span> }, <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100000</span>);
  
  <span class="hljs-comment">// 3. å‘é€æ•°æ®ç»™ Workerï¼Œè§¦å‘è®¡ç®—</span>
  sortWorker.<span class="hljs-title function_">postMessage</span>(bigData);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»çº¿ç¨‹ï¼šå·²å‘é€æ•°æ®ï¼Œç­‰å¾…æ’åºç»“æœ...'</span>);
  
  <span class="hljs-comment">// 4. æ¥æ”¶ Worker è¿”å›çš„è®¡ç®—ç»“æœ</span>
  sortWorker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»çº¿ç¨‹ï¼šæ’åºå®Œæˆï¼Œå‰ 10 æ¡æ•°æ®ï¼š'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>));
    sortWorker.<span class="hljs-title function_">terminate</span>(); <span class="hljs-comment">// è®¡ç®—å®Œæˆï¼Œé”€æ¯ Workerï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
  };
  
  <span class="hljs-comment">// 5. ç›‘å¬ Worker é”™è¯¯ï¼ˆå¦‚ä»£ç æŠ¥é”™ï¼‰</span>
  sortWorker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Worker é”™è¯¯ï¼š<span class="hljs-subst">${err.message}</span>ï¼ˆè¡Œå·ï¼š<span class="hljs-subst">${err.lineno}</span>ï¼‰`</span>);
    sortWorker.<span class="hljs-title function_">terminate</span>();
  };
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å½“å‰æµè§ˆå™¨ä¸æ”¯æŒ Web Worker'</span>);
}
<span class="hljs-comment">// Worker çº¿ç¨‹ï¼ˆsort-worker.jsï¼‰ï¼šæ‰§è¡Œè€—æ—¶è®¡ç®—</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = e.<span class="hljs-property">data</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Worker çº¿ç¨‹ï¼šå¼€å§‹æ’åº 10 ä¸‡æ¡æ•°æ®...'</span>);
  
  <span class="hljs-comment">// è€—æ—¶è®¡ç®—ï¼ˆç¤ºä¾‹ç”¨å†…ç½®æ’åºï¼Œå®é™…å¯æ›¿æ¢ä¸ºå¿«æ’ã€å½’å¹¶ç­‰å¤æ‚ç®—æ³•ï¼‰</span>
  <span class="hljs-keyword">const</span> sortedData = data.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
  
  <span class="hljs-comment">// å‘ä¸»çº¿ç¨‹è¿”å›ç»“æœ</span>
  self.<span class="hljs-title function_">postMessage</span>(sortedData);
  self.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// Worker ä¸»åŠ¨å…³é—­ï¼Œé‡Šæ”¾èµ„æº</span>
};
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœ</strong>ï¼š</p>
<p>ä¸»çº¿ç¨‹å¯æ­£å¸¸å¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ï¼‰ï¼Œæ’åºåœ¨åå°çº¿ç¨‹æ‰§è¡Œï¼Œé¡µé¢æ— å¡é¡¿ï¼›è®¡ç®—å®Œæˆåè‡ªåŠ¨é”€æ¯ Workerï¼Œæ— å†…å­˜æ³„æ¼ã€‚</p>
<h4 data-id="heading-5">2. Shared Workerï¼ˆååŒå‹ï¼šå¤šé¡µé¢æ•°æ®åŒæ­¥ï¼‰</h4>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>åŒæºå¤šé¡µé¢å¯å…±äº«åŒä¸€ä¸ª Worker å®ä¾‹ï¼ˆçªç ´ â€œå•é¡µé¢ç§æœ‰â€ é™åˆ¶ï¼‰ï¼›</li>
</ul>

<ul>
<li>é€šè¿‡ portï¼ˆé€šä¿¡ç«¯å£ï¼‰å®ç°å¤šé¡µé¢ä¸ Worker çš„åŒå‘é€šä¿¡ï¼›</li>
</ul>

<ul>
<li>é€‚åˆè·¨é¡µé¢çŠ¶æ€åŒæ­¥ï¼ˆæ— éœ€é‡å¤è¯·æ±‚æ¥å£ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå¤šæ ‡ç­¾é¡µç™»å½•çŠ¶æ€åŒæ­¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹ - é¡µé¢ Aï¼ˆlogin.htmlï¼‰ï¼šç™»å½•ååŒæ­¥çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">SharedWorker</span>) {
  <span class="hljs-comment">// 1. åˆ›å»º Shared Worker å®ä¾‹</span>
  <span class="hljs-keyword">const</span> sharedWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedWorker</span>(<span class="hljs-string">'sync-worker.js'</span>);
  <span class="hljs-comment">// 2. æ¿€æ´»é€šä¿¡ç«¯å£ï¼ˆå¿…é¡»è°ƒç”¨ start()ï¼‰</span>
  sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">start</span>();
  
  <span class="hljs-comment">// 3. æ¨¡æ‹Ÿç™»å½•æŒ‰é’®ç‚¹å‡»ï¼Œå‘é€ç™»å½•çŠ¶æ€ç»™ Worker</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'login-btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> userInfo = { <span class="hljs-attr">username</span>: <span class="hljs-string">'admin'</span>, <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span> };
    sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN'</span>, <span class="hljs-attr">data</span>: userInfo });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¡µé¢ Aï¼šå·²å‘é€ç™»å½•çŠ¶æ€'</span>);
  });
  
  <span class="hljs-comment">// 4. æ¥æ”¶ Worker å¹¿æ’­çš„æ¶ˆæ¯ï¼ˆå¦‚å…¶ä»–é¡µé¢åŒæ­¥çš„çŠ¶æ€ï¼‰</span>
  sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¡µé¢ A æ”¶åˆ°æ¶ˆæ¯ï¼š'</span>, e.<span class="hljs-property">data</span>);
  };
}
<span class="hljs-comment">// ä¸»çº¿ç¨‹ - é¡µé¢ Bï¼ˆindex.htmlï¼‰ï¼šå®æ—¶è·å–ç™»å½•çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">SharedWorker</span>) {
  <span class="hljs-keyword">const</span> sharedWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedWorker</span>(<span class="hljs-string">'sync-worker.js'</span>);
  sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">start</span>();
  
  <span class="hljs-comment">// 1. å‘ Worker è¯·æ±‚å½“å‰ç™»å½•çŠ¶æ€</span>
  sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'QUERY_STATUS'</span> });
  
  <span class="hljs-comment">// 2. æ¥æ”¶çŠ¶æ€ï¼ˆé¡µé¢ A ç™»å½•åï¼Œé¡µé¢ B å®æ—¶æ›´æ–°ï¼‰</span>
  sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'LOGIN_STATUS'</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>).<span class="hljs-property">textContent</span> = e.<span class="hljs-property">data</span>.<span class="hljs-property">isLogin</span> 
        ? <span class="hljs-string">`å·²ç™»å½•ï¼š<span class="hljs-subst">${e.data.username}</span>`</span> 
        : <span class="hljs-string">'æœªç™»å½•'</span>;
    }
  };
}
<span class="hljs-comment">// Shared Worker çº¿ç¨‹ï¼ˆsync-worker.jsï¼‰ï¼šç»´æŠ¤å…¨å±€çŠ¶æ€ï¼Œå¹¿æ’­æ¶ˆæ¯</span>
<span class="hljs-keyword">const</span> connections = []; <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰è¿æ¥çš„é¡µé¢ç«¯å£</span>
<span class="hljs-keyword">let</span> globalState = { <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">''</span> }; <span class="hljs-comment">// å…¨å±€å…±äº«çŠ¶æ€</span>
<span class="hljs-comment">// ç›‘å¬é¡µé¢è¿æ¥ï¼ˆæ–°é¡µé¢æ‰“å¼€æ—¶è§¦å‘ï¼‰</span>
self.<span class="hljs-property">onconnect</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> port = e.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>];
  connections.<span class="hljs-title function_">push</span>(port); <span class="hljs-comment">// è®°å½•æ–°è¿æ¥çš„é¡µé¢</span>
  port.<span class="hljs-title function_">start</span>();
  
  <span class="hljs-comment">// å¤„ç†é¡µé¢å‘é€çš„æ¶ˆæ¯</span>
  port.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (msg.<span class="hljs-property">data</span>.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'LOGIN'</span>:
        <span class="hljs-comment">// æ›´æ–°å…¨å±€çŠ¶æ€</span>
        globalState = msg.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;
        <span class="hljs-comment">// å¹¿æ’­ç»™æ‰€æœ‰è¿æ¥çš„é¡µé¢ï¼ˆåŒæ­¥çŠ¶æ€åˆ°é¡µé¢ Aã€B...ï¼‰</span>
        connections.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-title function_">postMessage</span>({ 
          <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN_STATUS'</span>, 
          ...globalState 
        }));
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'QUERY_STATUS'</span>:
        <span class="hljs-comment">// å•ç‹¬å“åº”æŸä¸ªé¡µé¢çš„çŠ¶æ€æŸ¥è¯¢</span>
        port.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN_STATUS'</span>, ...globalState });
        <span class="hljs-keyword">break</span>;
    }
  };
  
  <span class="hljs-comment">// é¡µé¢å…³é—­æ—¶ï¼Œç§»é™¤ç«¯å£ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
  port.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> index = connections.<span class="hljs-title function_">indexOf</span>(port);
    <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) connections.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
  };
};
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœ</strong>ï¼š</p>
<p>é¡µé¢ A ç‚¹å‡» â€œç™»å½•â€ åï¼Œé¡µé¢ B æ— éœ€åˆ·æ–°ï¼Œå®æ—¶æ˜¾ç¤º â€œå·²ç™»å½•ï¼šadminâ€ï¼›å¤šæ ‡ç­¾é¡µå…±äº«åŒä¸€ç™»å½•çŠ¶æ€ï¼Œæ— éœ€é‡å¤è°ƒç”¨ç™»å½•æ¥å£ã€‚</p>
<h4 data-id="heading-6">3. Service Workerï¼ˆç½‘ç»œå‹ï¼šç¦»çº¿ç¼“å­˜ + è¯·æ±‚æ‹¦æˆªï¼‰</h4>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>å®Œå…¨ç‹¬ç«‹äºé¡µé¢ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨åå°ï¼ˆé¡µé¢å…³é—­åä»å¯æ´»åŠ¨ï¼‰ï¼›</li>
</ul>

<ul>
<li>æ‹¦æˆªæ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå¯è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ï¼ˆå®ç°ç¦»çº¿è®¿é—®ï¼‰ï¼›</li>
</ul>

<ul>
<li>ç”Ÿå‘½å‘¨æœŸåŒ…å« â€œå®‰è£…â†’æ¿€æ´»â†’è¿è¡Œâ€ï¼Œéœ€æ‰‹åŠ¨ç®¡ç†ç¼“å­˜ç‰ˆæœ¬ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šç¦»çº¿ç¼“å­˜é™æ€èµ„æº + API è¯·æ±‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼ˆmain.jsï¼‰ï¼šæ³¨å†Œ Service Workerï¼Œè§¦å‘ç¦»çº¿é€»è¾‘</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. æ³¨å†Œ Service Workerï¼ˆè„šæœ¬éœ€åœ¨æ ¹ç›®å½•ï¼Œç¡®ä¿ä½œç”¨åŸŸè¦†ç›–æ‰€æœ‰é¡µé¢ï¼‰</span>
      <span class="hljs-keyword">const</span> registration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸï¼Œä½œç”¨åŸŸï¼š'</span>, registration.<span class="hljs-property">scope</span>);
      
      <span class="hljs-comment">// 2. æµ‹è¯•ç¦»çº¿è¯·æ±‚ï¼ˆé¦–æ¬¡è”ç½‘ç¼“å­˜ï¼Œåç»­æ–­ç½‘å¯è®¿é—®ï¼‰</span>
      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'API è¯·æ±‚ç»“æœï¼š'</span>, data);
      });
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Service Worker æ³¨å†Œå¤±è´¥ï¼š'</span>, err);
    }
  });
}
<span class="hljs-comment">// Service Worker çº¿ç¨‹ï¼ˆsw.jsï¼‰ï¼šç¼“å­˜+è¯·æ±‚æ‹¦æˆªé€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'offline-cache-v1'</span>; <span class="hljs-comment">// ç¼“å­˜ç‰ˆæœ¬ï¼ˆæ›´æ–°æ—¶ä¿®æ”¹ç‰ˆæœ¬å·ï¼‰</span>
<span class="hljs-comment">// éœ€è¦ç¼“å­˜çš„èµ„æºåˆ—è¡¨ï¼ˆé™æ€èµ„æº+APIæ¥å£ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_ASSETS</span> = [
  <span class="hljs-string">'/'</span>, 
  <span class="hljs-string">'/index.html'</span>,
  <span class="hljs-string">'/styles.css'</span>,
  <span class="hljs-string">'/api/data'</span> <span class="hljs-comment">// éœ€ç¼“å­˜çš„ API æ¥å£</span>
];
<span class="hljs-comment">// 1. å®‰è£…é˜¶æ®µï¼šç¼“å­˜é™æ€èµ„æºï¼ˆä»…é¦–æ¬¡æ³¨å†Œ/ç‰ˆæœ¬æ›´æ–°æ—¶è§¦å‘ï¼‰</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// ç­‰å¾…ç¼“å­˜å®Œæˆåï¼Œå†è¿›å…¥æ¿€æ´»é˜¶æ®µ</span>
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.<span class="hljs-title function_">addAll</span>(<span class="hljs-variable constant_">CACHE_ASSETS</span>)) <span class="hljs-comment">// æ‰¹é‡ç¼“å­˜èµ„æº</span>
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> self.<span class="hljs-title function_">skipWaiting</span>()) <span class="hljs-comment">// è·³è¿‡ç­‰å¾…ï¼Œç«‹å³æ¿€æ´»æ–° Workerï¼ˆæ›¿æ¢æ—§ç‰ˆæœ¬ï¼‰</span>
  );
});
<span class="hljs-comment">// 2. æ¿€æ´»é˜¶æ®µï¼šæ¸…ç†æ—§ç¼“å­˜ï¼ˆé¿å…ç¼“å­˜è†¨èƒ€ï¼‰</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-comment">// åˆ é™¤éå½“å‰ç‰ˆæœ¬çš„ç¼“å­˜</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> name !== <span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> caches.<span class="hljs-title function_">delete</span>(name))
      );
    }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> self.<span class="hljs-property">clients</span>.<span class="hljs-title function_">claim</span>()) <span class="hljs-comment">// å¼ºåˆ¶æ‰€æœ‰æ‰“å¼€çš„é¡µé¢ä½¿ç”¨æ–° Worker</span>
  );
});
<span class="hljs-comment">// 3. æ‹¦æˆªè¯·æ±‚ï¼šä¼˜å…ˆä»ç¼“å­˜è¿”å›ï¼Œæ— ç¼“å­˜åˆ™è¯·æ±‚ç½‘ç»œ</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// ä»…æ‹¦æˆªåŒæºçš„ GET è¯·æ±‚ï¼ˆé¿å…è·¨åŸŸèµ„æºå’Œéå¹‚ç­‰è¯·æ±‚ï¼‰</span>
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">request</span>.<span class="hljs-property">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; event.<span class="hljs-property">request</span>.<span class="hljs-property">mode</span> === <span class="hljs-string">'same-origin'</span>) {
    event.<span class="hljs-title function_">respondWith</span>(
      caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cachedResponse</span> =&gt;</span> {
          <span class="hljs-comment">// ç¼“å­˜å‘½ä¸­ï¼šç›´æ¥è¿”å›ç¼“å­˜èµ„æº</span>
          <span class="hljs-keyword">if</span> (cachedResponse) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»ç¼“å­˜è¿”å›ï¼š'</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
            <span class="hljs-keyword">return</span> cachedResponse;
          }
          <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼šå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ç¼“å­˜æ–°ç»“æœ</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
            caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
              cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, networkResponse.<span class="hljs-title function_">clone</span>()); <span class="hljs-comment">// ç¼“å­˜æ–°è¯·æ±‚</span>
            });
            <span class="hljs-keyword">return</span> networkResponse;
          });
        })
    );
  }
});
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœ</strong>ï¼š</p>
<ul>
<li>é¦–æ¬¡è”ç½‘æ—¶ï¼Œè‡ªåŠ¨ç¼“å­˜ index.htmlã€styles.css å’Œ /api/dataï¼›</li>
</ul>

<ul>
<li>æ–­ç½‘ååˆ·æ–°é¡µé¢ï¼Œä»èƒ½æ­£å¸¸åŠ è½½é¡µé¢å’Œ API æ•°æ®ï¼ˆä»ç¼“å­˜è¯»å–ï¼‰ï¼›</li>
</ul>

<ul>
<li>ç¼“å­˜ç‰ˆæœ¬æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨æ¸…ç†æ—§ç¼“å­˜ï¼Œé¿å…èµ„æºå†—ä½™ã€‚</li>
</ul>
<h4 data-id="heading-7">4. Workletï¼ˆå®æ—¶å‹ï¼šä»‹å…¥æ¸²æŸ“æµç¨‹ï¼‰</h4>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>åµŒå…¥æµè§ˆå™¨æ¸²æŸ“ç®¡çº¿ï¼ˆå¦‚ CSS å¼•æ“çº¿ç¨‹ã€éŸ³é¢‘çº¿ç¨‹ï¼‰ï¼Œä½å»¶è¿Ÿï¼ˆ&lt;1msï¼‰ï¼›</li>
</ul>

<ul>
<li>ç›´æ¥å¹²é¢„æ¸²æŸ“è¿‡ç¨‹ï¼ˆåŠ¨ç”»ã€ç»˜åˆ¶ã€éŸ³é¢‘å¤„ç†ï¼‰ï¼Œå¼¥è¡¥ Web Worker é€šä¿¡å»¶è¿Ÿçš„ç¼ºé™·ï¼›</li>
</ul>

<ul>
<li>ç»†åˆ†ç±»å‹ï¼šCSSWorkletï¼ˆåŠ¨ç”»ï¼‰ã€AudioWorkletï¼ˆéŸ³é¢‘ï¼‰ã€PaintWorkletï¼ˆç»˜åˆ¶ï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šCSSWorklet å®ç°ç‰©ç†å¼¹æ€§åŠ¨ç”»</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼ˆmain.jsï¼‰ï¼šæ³¨å†Œ Workletï¼Œå…³è”åŠ¨ç”»</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'CSSWorklet'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰ Workletï¼ˆåŠ è½½åŠ¨ç”»é€»è¾‘è„šæœ¬ï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">CSSWorklet</span>.<span class="hljs-title function_">addModule</span>(<span class="hljs-string">'bounce-worklet.js'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CSSWorklet æ³¨å†ŒæˆåŠŸ'</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'CSSWorklet æ³¨å†Œå¤±è´¥ï¼š'</span>, err);
  }
}
<span class="hljs-comment">// HTML ç»“æ„ï¼šåŠ¨ç”»å…ƒç´ </span>
<span class="hljs-comment">/*
&lt;div class="box"&gt;å¼¹æ€§åŠ¨ç”»æ–¹å—&lt;/div&gt;
*/</span>
<span class="hljs-comment">// CSS æ ·å¼ï¼šç»‘å®š Worklet åŠ¨ç”»</span>
<span class="hljs-comment">/*
.box {
  width: 100px;
  height: 100px;
  background: red;
  /* ä½¿ç”¨ Worklet å®šä¹‰çš„åŠ¨ç”»ï¼ˆåç§°ä¸ Worklet ä¸­æ³¨å†Œä¸€è‡´ï¼‰ */</span>
  <span class="hljs-attr">animation</span>: bounce 2s infinite;
}
<span class="hljs-comment">/* å®šä¹‰åŠ¨ç”»è¿›åº¦ï¼ˆfromâ†’to å¯¹åº” Worklet ä¸­çš„ 0â†’1ï¼‰ */</span>
<span class="hljs-meta">@keyframes</span> bounce {
  <span class="hljs-keyword">from</span> { <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translateY</span>(<span class="hljs-number">0</span>); }
  to { <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translateY</span>(300px); }
}
*/
<span class="hljs-comment">// CSSWorklet çº¿ç¨‹ï¼ˆbounce-worklet.jsï¼‰ï¼šè‡ªå®šä¹‰åŠ¨ç”»é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BounceWorklet</span> {
  <span class="hljs-comment">// æ¯ä¸€å¸§çš„è®¡ç®—ï¼ˆåµŒå…¥æ¸²æŸ“ç®¡çº¿ï¼Œå®æ—¶æ‰§è¡Œï¼‰</span>
  <span class="hljs-title function_">process</span>(<span class="hljs-params">inputs, outputs, parameters</span>) {
    <span class="hljs-keyword">const</span> [t] = inputs; <span class="hljs-comment">// åŠ¨ç”»è¿›åº¦ï¼ˆ0~1ï¼Œfromâ†’toï¼‰</span>
    <span class="hljs-keyword">const</span> [output] = outputs; <span class="hljs-comment">// è¾“å‡ºç»“æœï¼ˆæœ€ç»ˆçš„ CSS æ ·å¼å€¼ï¼‰</span>
    
    <span class="hljs-comment">// ç‰©ç†å¼¹æ€§å…¬å¼ï¼ˆæ¨¡æ‹Ÿé‡åŠ›+åå¼¹æ•ˆæœï¼ŒéåŒ€é€ŸåŠ¨ç”»ï¼‰</span>
    <span class="hljs-keyword">const</span> bounce = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(-t * <span class="hljs-number">0.5</span>);
    <span class="hljs-comment">// è¾“å‡º transform æ ·å¼ï¼ˆæ§åˆ¶æ–¹å—ä½ç½®ï¼‰</span>
    output.<span class="hljs-property">value</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${<span class="hljs-number">300</span> * (<span class="hljs-number">1</span> - bounce)}</span>px)`</span>;
  }
}
<span class="hljs-comment">// æ³¨å†Œ Worklet åŠ¨ç”»ï¼ˆåç§°éœ€ä¸ CSS ä¸­çš„ @keyframes åç§°ä¸€è‡´ï¼‰</span>
<span class="hljs-title function_">registerAnimator</span>(<span class="hljs-string">'bounce'</span>, <span class="hljs-title class_">BounceWorklet</span>);
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœ</strong>ï¼š</p>
<p>çº¢è‰²æ–¹å—ä»¥ â€œç‰©ç†å¼¹æ€§è½¨è¿¹â€ ä¸Šä¸‹è¿åŠ¨ï¼ˆç±»ä¼¼å°çƒè½åœ°åå¼¹ï¼‰ï¼ŒåŠ¨ç”»æµç•…æ— å¡é¡¿ï¼›Worklet è¿è¡Œåœ¨æ¸²æŸ“çº¿ç¨‹ï¼Œå»¶è¿Ÿæä½ï¼Œé¿å… Web Worker é€šä¿¡å¯¼è‡´çš„åŠ¨ç”»æ‰å¸§ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€æ··åˆä½¿ç”¨ï¼šå¤š Worker ååŒè§£å†³å¤æ‚åœºæ™¯</h3>
<h4 data-id="heading-9">åœºæ™¯éœ€æ±‚ï¼šç¦»çº¿æ•°æ®åˆ†æ Dashboard</h4>
<p>éœ€è¦åŒæ—¶æ»¡è¶³ 4 ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ol>
<li>ç¦»çº¿è®¿é—®ï¼ˆæ–­ç½‘åä»å¯æŸ¥çœ‹å†å²æ•°æ®ï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>å¤šæ ‡ç­¾é¡µåŒæ­¥åˆ†æç»“æœï¼ˆæ— éœ€é‡å¤è§£æï¼‰ï¼›</li>
</ol>

<ol start="3">
<li>åå°è§£æ 10 ä¸‡æ¡ CSV æ•°æ®ï¼ˆä¸é˜»å¡é¡µé¢ï¼‰ï¼›</li>
</ol>

<ol start="4">
<li>å®æ—¶æ¸²æŸ“æµç•…å›¾è¡¨ï¼ˆåŠ¨ç”»æ— æ‰å¸§ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-10">å®Œæ•´å®ç°ä»£ç ï¼ˆæ•´åˆ 4 ç§ Workerï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼ˆdashboard.jsï¼‰ï¼šæ•´åˆæ‰€æœ‰ Workerï¼Œåè°ƒæµç¨‹</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œ Service Workerï¼ˆç¦»çº¿ç¼“å­˜ï¼‰</span>
      <span class="hljs-keyword">const</span> swRegistration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸ'</span>);
      <span class="hljs-comment">// 2. ç¬¬äºŒæ­¥ï¼šåˆ›å»º Shared Workerï¼ˆå¤šé¡µé¢åŒæ­¥ï¼‰</span>
      <span class="hljs-keyword">const</span> sharedWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedWorker</span>(<span class="hljs-string">'sync-worker.js'</span>);
      sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">start</span>();
      <span class="hljs-comment">// 3. ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Web Workerï¼ˆCSV æ•°æ®è§£æï¼‰</span>
      <span class="hljs-keyword">const</span> csvWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'csv-worker.js'</span>);
      <span class="hljs-comment">// 4. ç¬¬å››æ­¥ï¼šæ³¨å†Œ CSSWorkletï¼ˆå›¾è¡¨åŠ¨ç”»ä¼˜åŒ–ï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'CSSWorklet'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">CSSWorklet</span>.<span class="hljs-title function_">addModule</span>(<span class="hljs-string">'chart-worklet.js'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CSSWorklet æ³¨å†ŒæˆåŠŸ'</span>);
      }
      <span class="hljs-comment">// 5. é¡µé¢å…ƒç´ ï¼šæ–‡ä»¶ä¸Šä¼ ã€å›¾è¡¨å®¹å™¨ã€çŠ¶æ€æ–‡æœ¬</span>
      <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'file-upload'</span>);
      <span class="hljs-keyword">const</span> chartContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chart-container'</span>);
      <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>);
      <span class="hljs-comment">// 6. ç›‘å¬æ–‡ä»¶ä¸Šä¼ ï¼šè§¦å‘ CSV è§£æ</span>
      fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (file &amp;&amp; file.<span class="hljs-property">name</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.csv'</span>)) {
          statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'æ­£åœ¨è§£æ CSV æ–‡ä»¶...'</span>;
          csvWorker.<span class="hljs-title function_">postMessage</span>(file); <span class="hljs-comment">// å‘é€æ–‡ä»¶ç»™ Web Worker</span>
        } <span class="hljs-keyword">else</span> {
          statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">'è¯·ä¸Šä¼  CSV æ ¼å¼æ–‡ä»¶ï¼'</span>;
        }
      });
      <span class="hljs-comment">// 7. æ¥æ”¶ Web Worker è§£æç»“æœï¼šæ¸²æŸ“+åŒæ­¥+ç¼“å­˜</span>
      csvWorker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> analysisResult = e.<span class="hljs-property">data</span>; <span class="hljs-comment">// è§£æç»“æœï¼ˆæ•°æ®æ•°ç»„+ç»Ÿè®¡ä¿¡æ¯ï¼‰</span>
        
        <span class="hljs-comment">// 7.1 æ¸²æŸ“å›¾è¡¨ï¼ˆç”¨ CSSWorklet ä¼˜åŒ–åŠ¨ç”»ï¼‰</span>
        <span class="hljs-title function_">renderChart</span>(analysisResult, chartContainer);
        
        <span class="hljs-comment">// 7.2 åŒæ­¥ç»“æœåˆ°å…¶ä»–æ ‡ç­¾é¡µï¼ˆé€šè¿‡ Shared Workerï¼‰</span>
        sharedWorker.<span class="hljs-property">port</span>.<span class="hljs-title function_">postMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'ANALYSIS_RESULT'</span>,
          <span class="hljs-attr">data</span>: analysisResult
        });
        
        <span class="hljs-comment">// 7.3 ç¼“å­˜ç»“æœåˆ° Service Workerï¼ˆæ”¯æŒç¦»çº¿è®¿é—®ï¼‰</span>
        <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>) {
          navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'CACHE_RESULT'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'last-csv-analysis'</span>,
            <span class="hljs-attr">data</span>: analysisResult
          });
        }
        
        <span class="hljs-comment">// 7.4 æ›´æ–°çŠ¶æ€æ–‡æœ¬</span>
        statusText.<span class="hljs-property">textContent</span> = <span class="hljs-string">`è§£æå®Œæˆï¼šå…± <span class="hljs-subst">${analysisResult.totalCount}</span> æ¡&lt;/doubaocanvas&gt;
</span></code></pre>
<h3 data-id="heading-11">å››ã€å…³äºself</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// 1. æ¥æºï¼šWorker çº¿ç¨‹çš„å†…ç½®å…¨å±€å¯¹è±¡ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ³¨å…¥ï¼Œæ— éœ€å®šä¹‰</span>
<span class="hljs-comment">// 2. ä½œç”¨ï¼šç­‰åŒäºä¸»çº¿ç¨‹çš„ windowï¼Œæ˜¯ Worker çº¿ç¨‹è®¿é—®è‡ªèº«èƒ½åŠ›çš„å…¥å£</span>
<span class="hljs-comment">// 3. éš”ç¦»æ€§ï¼šä¸åŒ Worker çš„ self æ˜¯ç‹¬ç«‹å®ä¾‹ï¼Œäº’ä¸å¹²æ‰°ï¼ˆå¦‚ Web Worker çš„ self â‰  Service Worker çš„ selfï¼‰</span>
<span class="hljs-comment">// 4. æ ¸å¿ƒèƒ½åŠ›ï¼šæ¥æ”¶/å‘é€æ¶ˆæ¯ï¼ˆonmessage/postMessageï¼‰ã€ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼ˆcloseï¼‰ã€è°ƒç”¨ Worker ä¸“å± API</span>
</code></pre>
<h5 data-id="heading-12">Worker ä¸­ self çš„ç®€å•ä»£ç ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Worker çº¿ç¨‹ï¼ˆcalc-worker.jsï¼‰</span>
<span class="hljs-comment">// self æŒ‡å‘å½“å‰ Web Worker å®ä¾‹ï¼Œä»…ç”¨äºè®¡ç®—ç›¸å…³é€»è¾‘</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { num1, num2 } = e.<span class="hljs-property">data</span>;
  <span class="hljs-keyword">const</span> sum = num1 + num2; <span class="hljs-comment">// ç®€å•è®¡ç®—ï¼šä¸¤æ•°ç›¸åŠ </span>
  self.<span class="hljs-title function_">postMessage</span>(sum); <span class="hljs-comment">// ç”¨ self å‘ä¸»çº¿ç¨‹è¿”å›ç»“æœ</span>
  self.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// ç”¨ self ä¸»åŠ¨å…³é—­ Workerï¼Œé‡Šæ”¾èµ„æº</span>
};
<span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼ˆmain.jsï¼‰- é…åˆä½¿ç”¨</span>
<span class="hljs-keyword">const</span> calcWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'calc-worker.js'</span>);
calcWorker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">num1</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">num2</span>: <span class="hljs-number">20</span> }); <span class="hljs-comment">// å‘æ•°æ®ç»™ Worker</span>
calcWorker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¡ç®—ç»“æœï¼š'</span>, e.<span class="hljs-property">data</span>); <span class="hljs-comment">// è¾“å‡º 30</span>
};
</code></pre>
<h5 data-id="heading-13">æ³¨æ„ï¼š</h5>
<pre><code class="hljs language-lua" lang="lua">// æ³¨æ„ <span class="hljs-number">1</span>ï¼šWorker ä¸­ä¸èƒ½ç”¨ windowï¼Œå¿…é¡»ç”¨ <span class="hljs-built_in">self</span>ï¼ˆå›  Worker æ— çª—å£æ¦‚å¿µï¼‰
// æ³¨æ„ <span class="hljs-number">2</span>ï¼š<span class="hljs-built_in">self</span> æ— æ³•è®¿é—® DOMï¼ˆå¦‚ documentã€bodyï¼‰ï¼Œä»…èƒ½å¤„ç†é UI é€»è¾‘
// æ³¨æ„ <span class="hljs-number">3</span>ï¼šç®€å•åœºæ™¯å¯çœç•¥ <span class="hljs-built_in">self</span>ï¼ˆå¦‚ onmessage = () =&gt; {} ç­‰åŒäº <span class="hljs-built_in">self</span>.onmessage = () =&gt; {}ï¼‰ï¼Œä½†å¤æ‚åœºæ™¯å»ºè®®ä¿ç•™ï¼Œå¢å¼ºå¯è¯»æ€§
</code></pre>
<h3 data-id="heading-14">äº”ã€ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„å¹³è¡¡ç‚¹</h3>
<h4 data-id="heading-15">1. é”™è¯¯å¤„ç†ä¸å¥å£®æ€§</h4>
<ul>
<li>
<p>Worker å†…éƒ¨é”™è¯¯ä¸ä¼šå†’æ³¡åˆ°ä¸»çº¿ç¨‹ï¼Œéœ€å•ç‹¬ç›‘å¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
worker.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Workeré”™è¯¯ï¼š<span class="hljs-subst">${err.message}</span>`</span>);
  worker.<span class="hljs-title function_">terminate</span>(); <span class="hljs-comment">// å‡ºé”™åé”€æ¯Workerï¼Œé¿å…å†…å­˜æ³„æ¼</span>
};

<span class="hljs-comment">// Workerçº¿ç¨‹</span>
self.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  self.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ERROR'</span>, <span class="hljs-attr">message</span>: err.<span class="hljs-property">message</span> });
  self.<span class="hljs-title function_">close</span>(); <span class="hljs-comment">// ä¸»åŠ¨å…³é—­</span>
};
</code></pre>
</li>
<li>
<p>ç½‘ç»œé”™è¯¯ï¼šWorker è„šæœ¬åŠ è½½å¤±è´¥ï¼ˆ404ï¼‰æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šè§¦å‘Â <code>error</code>Â äº‹ä»¶ï¼Œéœ€æ•è·å¹¶é™çº§å¤„ç†ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">2. å†…å­˜ç®¡ç†ä¸èµ„æºå›æ”¶</h4>
<ul>
<li>é¿å…åˆ›å»ºè¿‡å¤š Workerï¼šæ¯ä¸ª Worker éƒ½æ˜¯ç‹¬ç«‹çº¿ç¨‹ï¼Œå ç”¨å†…å­˜å’Œ CPUï¼Œå»ºè®®é€šè¿‡ â€œWorker æ± â€ å¤ç”¨ï¼ˆå¦‚ç”¨Â <code>p-queue</code>Â ç®¡ç† Worker å®ä¾‹ï¼‰ã€‚</li>
<li>åŠæ—¶é”€æ¯æ— ç”¨ Workerï¼š<code>worker.terminate()</code>ï¼ˆä¸»çº¿ç¨‹ä¸»åŠ¨é”€æ¯ï¼Œç«‹å³ç»ˆæ­¢ï¼‰æˆ–Â <code>self.close()</code>ï¼ˆWorker ä¸»åŠ¨å…³é—­ï¼Œæ¸…ç†åç»ˆæ­¢ï¼‰ã€‚</li>
<li>è­¦æƒ•å†…å­˜æ³„æ¼ï¼šWorker ä¸­è‹¥æŒæœ‰Â <code>setInterval</code>ã€æœªå…³é—­çš„Â <code>fetch</code>Â è¯·æ±‚ç­‰ï¼Œå³ä½¿è°ƒç”¨Â <code>terminate</code>Â ä¹Ÿå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œéœ€å…ˆæ¸…ç†èµ„æºã€‚</li>
</ul>
<h4 data-id="heading-17">3. è·¨åŸŸä¸å®‰å…¨ç­–ç•¥</h4>
<ul>
<li>Worker è„šæœ¬å¿…é¡»ä¸ä¸»çº¿ç¨‹åŒæºï¼ˆåè®®ã€åŸŸåã€ç«¯å£ä¸€è‡´ï¼‰ï¼Œè‹¥éœ€åŠ è½½è·¨åŸŸè„šæœ¬ï¼Œéœ€é€šè¿‡Â <code>importScripts</code>Â åŠ è½½ä¸”æœåŠ¡å™¨å…è®¸è·¨åŸŸï¼ˆ<code>Access-Control-Allow-Origin</code>ï¼‰ã€‚</li>
<li>ç¦æ­¢è®¿é—®Â <code>file://</code>Â åè®®ä¸‹çš„è„šæœ¬ï¼ˆæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼‰ï¼Œæœ¬åœ°å¼€å‘éœ€ç”¨Â <code>http-server</code>Â å¯åŠ¨æœåŠ¡ã€‚</li>
<li>æ•æ„Ÿæ“ä½œé™åˆ¶ï¼šWorker ä¸­æ— æ³•ä½¿ç”¨Â <code>localStorage</code>ï¼ˆéƒ¨åˆ†æµè§ˆå™¨æ”¯æŒï¼Œä½†è§„èŒƒä¸æ¨èï¼‰ï¼Œå»ºè®®ç”¨Â <code>IndexedDB</code>Â å­˜å‚¨å¤§é‡æ•°æ®ï¼ˆå¼‚æ­¥ APIï¼Œä¸é˜»å¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-18">4. å…¼å®¹æ€§å¤„ç†ä¸é™çº§æ–¹æ¡ˆ</h4>
<ul>
<li>
<p>æµè§ˆå™¨æ”¯æŒï¼šIE å®Œå…¨ä¸æ”¯æŒï¼ŒEdge 12+ã€Chrome 4+ã€Firefox 3.5+ æ”¯æŒåŸºæœ¬ç‰¹æ€§ï¼Œ<code>SharedArrayBuffer</code>Â å’ŒÂ <code>SharedWorker</code>Â å…¼å®¹æ€§è¾ƒå·®ã€‚</p>
</li>
<li>
<p>é™çº§é€»è¾‘ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">if (window.Worker) {
  <span class="hljs-comment">// ä½¿ç”¨Worker</span>
} else {
  <span class="hljs-comment">// é™çº§åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼ˆç»™ç”¨æˆ·æç¤ºâ€œå½“å‰æµè§ˆå™¨å¯èƒ½å¡é¡¿â€ï¼‰</span>
  <span class="hljs-built_in">heavyTask</span>();
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-19">å…­ã€æ€§èƒ½é™·é˜±</h3>
<ol>
<li>
<p><strong>è¿‡åº¦ä½¿ç”¨ Worker å¯¼è‡´æ€§èƒ½åé™</strong>å°æ•°æ®è®¡ç®—ï¼ˆå¦‚å‡ æ¯«ç§’å¯å®Œæˆçš„æ“ä½œï¼‰ç”¨ Worker åè€Œä¼šå¢åŠ é€šä¿¡å¼€é”€ï¼ˆåºåˆ—åŒ– + æ¶ˆæ¯ä¼ é€’ï¼‰ï¼Œå»ºè®®ä»…å¯¹Â <strong>æ‰§è¡Œæ—¶é—´ &gt; 50ms</strong>Â çš„ä»»åŠ¡ä½¿ç”¨ Workerã€‚</p>
</li>
<li>
<p><strong>é¢‘ç¹é€šä¿¡å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡</strong>è‹¥ Worker ä¸ä¸»çº¿ç¨‹é«˜é¢‘æ¬¡Â <code>postMessage</code>ï¼ˆå¦‚æ¯ç§’ hundreds æ¬¡ï¼‰ï¼Œåºåˆ—åŒ–æ•°æ®ä¼šå ç”¨ä¸»çº¿ç¨‹èµ„æºï¼Œå¯¼è‡´å¡é¡¿ã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ‰¹é‡å‘é€æ•°æ®ï¼ˆç´¯è®¡ä¸€å®šé‡åå†é€šä¿¡ï¼‰ï¼›</li>
<li>ç”¨Â <code>SharedArrayBuffer</code>Â å‡å°‘åºåˆ—åŒ–å¼€é”€ã€‚</li>
</ul>
</li>
<li>
<p><strong>Worker ä¸­æ»¥ç”¨åŒæ­¥ API</strong>Worker è™½ç„¶ä¸é˜»å¡ UIï¼Œä½†å†…éƒ¨çš„åŒæ­¥æ“ä½œï¼ˆå¦‚Â <code>XMLHttpRequest</code>Â çš„åŒæ­¥è¯·æ±‚ã€å¤§é‡åŒæ­¥å¾ªç¯ï¼‰ä¼šé˜»å¡è‡ªèº«çº¿ç¨‹ï¼Œå¯¼è‡´æ— æ³•å“åº”æ¶ˆæ¯ã€‚å»ºè®®ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥ APIï¼ˆ<code>fetch</code>ã€<code>setImmediate</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¿½ç•¥çº¿ç¨‹ä¼˜å…ˆçº§</strong>æµè§ˆå™¨ä¼šç»™ Worker åˆ†é…è¾ƒä½çš„çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œè‹¥éœ€ â€œè¿‘å®æ—¶â€ å¤„ç†ï¼ˆå¦‚æ¸¸æˆå¸§è®¡ç®—ï¼‰ï¼Œå¯èƒ½å‡ºç°å»¶è¿Ÿã€‚æ­¤æ—¶å¯è€ƒè™‘Â <code>requestIdleCallback</code>Â ç»“åˆ Workerï¼Œåˆ©ç”¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶é—´å¤„ç†ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bun Test ä¸æ”¯æŒæ—¶é—´å¿«è¿›ï¼Ÿæˆ‘ç”¨è¿™æ‹›è®©å•å…ƒæµ‹è¯•æé€Ÿ 8 å€ï¼]]></title>    <link>https://juejin.cn/post/7571355146770481194</link>    <guid>https://juejin.cn/post/7571355146770481194</guid>    <pubDate>2025-11-12T01:04:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355146770481194" data-draft-id="7559205383505526823" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Bun Test ä¸æ”¯æŒæ—¶é—´å¿«è¿›ï¼Ÿæˆ‘ç”¨è¿™æ‹›è®©å•å…ƒæµ‹è¯•æé€Ÿ 8 å€ï¼"/> <meta itemprop="keywords" content="Bun,Node.js,æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-11-12T01:04:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Legend80s"/> <meta itemprop="url" content="https://juejin.cn/user/2568105753839790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Bun Test ä¸æ”¯æŒæ—¶é—´å¿«è¿›ï¼Ÿæˆ‘ç”¨è¿™æ‹›è®©å•å…ƒæµ‹è¯•æé€Ÿ 8 å€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568105753839790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Legend80s
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:04:05.000Z" title="Wed Nov 12 2025 01:04:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>å‡è®¾æˆ‘ä»¬çš„ç»„ä»¶æˆ–å‡½æ•°å†…ä½¿ç”¨äº† <code>setInterval</code> (<code>setTimeout</code> åŒç†)ï¼Œå¦‚æœä¸å¯¹å…¶è¿›è¡Œä»»ä½•æ“ä½œï¼Œâ€œå‚»å‚»ç­‰å¾…â€çš„è¯ï¼Œä¸€ä¸ªå•å…ƒæµ‹è¯•å¯èƒ½å°±è¦è€—è´¹å‡ ç§’é’Ÿæ‰èƒ½å®Œæˆï¼Œç”šè‡³è¿˜å¯èƒ½è¶…æ—¶ã€‚</p>
<p>è€ç‰Œçš„ jest æˆ–æ–°çš„ vitest ä»¥åŠ node:test åŸç”Ÿéƒ½æ”¯æŒâ€œæ—¶é—´å¿«è¿›â€ã€‚ä½†æ˜¯ bun:testï¼ˆv1.2.23 2025-10-10ï¼‰å°šæœªæ”¯æŒ <code>jest/vi.advanceTimersByTime</code>ï¼Œå°†æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¿«è¿›1ç§’ï¼Œè§¦å‘1æ¬¡ setInterval å›è°ƒ</span>
<span class="hljs-number">37</span> |   vi.<span class="hljs-title function_">advanceTimersByTime</span>(<span class="hljs-number">1000</span>)
          ^
<span class="hljs-title class_">TypeError</span>: vi.<span class="hljs-property">advanceTimersByTime</span> is not a <span class="hljs-keyword">function</span>. (<span class="hljs-title class_">In</span> <span class="hljs-string">'vi.advanceTimersByTime(1000)'</span>, <span class="hljs-string">'vi.advanceTimersByTime'</span> is <span class="hljs-literal">undefined</span>)
</code></pre>
<p>éš¾é“åªèƒ½â€œåä»¥å¾…æ¯™â€ï¼Ÿä¸ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ç§workaroundã€‚å°±æ˜¯é€šè¿‡é‡å†™æˆ–è€…è¯´ mock å…¨å±€ <code>setInterval / setTimeout</code>ã€‚</p>
<p>æ•ˆæœä¸€ç¹ä¸ºå¿«ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8a359406d474f0095f2cf286b556703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVnZW5kODBz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763514245&amp;x-signature=BZpvpHv%2BJ5VZzyimXgBh%2FDk9A0M%3D" alt="æˆåŠŸå°†è€—æ—¶ä» 2s+ ä¼˜åŒ–åˆ° 300ms+ï¼Œæ˜¯å…¶ 1/8" loading="lazy"/></p>
<h2 data-id="heading-0">è§£å†³åŠæ³•ï¼šé‡å†™ <code>setInterval</code></h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src\DeepThinkButton\demo\advanced.test.tsx:</span>
<span class="hljs-keyword">import</span> { afterEach, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>

<span class="hljs-comment">// 1. ä¿å­˜åŸå§‹çš„ setInterval</span>
<span class="hljs-keyword">const</span> originalSetInterval = globalThis.<span class="hljs-property">setInterval</span>

<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
Â  <span class="hljs-comment">// åœ¨æ¯ä¸ªæµ‹è¯•å¼€å§‹å‰å¯ç”¨å‡å®šæ—¶å™¨</span>
Â  <span class="hljs-comment">// @ts-expect-error</span>
Â  globalThis.<span class="hljs-property">setInterval</span> = <span class="hljs-function">(<span class="hljs-params">callback, delay</span>) =&gt;</span> {
Â  Â  <span class="hljs-comment">// console.log('callback, delay:', { callback, delay })</span>

Â  Â  <span class="hljs-keyword">if</span> (callback.<span class="hljs-property">name</span> === <span class="hljs-string">'deepThinkButtonInterval'</span>) {
Â  Â    <span class="hljs-comment">// è¿”å›ä¸€ä¸ªåŸå§‹ IDï¼Œå¹¶ä¸”å†…éƒ¨è°ƒç”¨åŸå§‹å‡½æ•°</span>
Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalSetInterval</span>(<span class="hljs-function">() =&gt;</span> {
Â  Â  Â  Â  <span class="hljs-title function_">callback</span>()
Â  Â  Â  }, <span class="hljs-number">0</span>)
Â  Â  } <span class="hljs-keyword">else</span> {
Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalSetInterval</span>(callback, delay)
Â  Â  }
Â  }
})

<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">() =&gt;</span> {
Â  <span class="hljs-comment">// åœ¨æ¯ä¸ªæµ‹è¯•ç»“æŸåæ¢å¤çœŸå®šæ—¶å™¨</span>
Â  globalThis.<span class="hljs-property">setInterval</span> = originalSetInterval
})
</code></pre>
<h3 data-id="heading-1">ä½¿ç”¨</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹å¾…æµ‹è¯•ä»£ç ï¼Œæµ‹è¯•æ·±åº¦æ€è€ƒåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// é€ä¸ªå­—ç¬¦æ˜¾ç¤ºï¼Œå½“å®Œæ•´å†…å®¹æ˜¾ç¤ºååœæ­¢</span>
timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepThinkButtonInterval</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">setThinkContent</span>(<span class="hljs-function">(<span class="hljs-params">text</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (text.<span class="hljs-property">length</span> &lt; <span class="hljs-variable constant_">THINK_CONTENT</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// æ¯æ¬¡è¾“å‡º N ä¸ªå­—ç¬¦</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">THINK_CONTENT</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, text.<span class="hljs-property">length</span> + <span class="hljs-number">2</span>)
    }

    <span class="hljs-built_in">clearInterval</span>(timer)
    <span class="hljs-title function_">setThinkingStatus</span>(<span class="hljs-string">'Completed'</span>)
    <span class="hljs-title function_">setThinkingStopTime</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>())
    <span class="hljs-keyword">return</span> text
  })
}, <span class="hljs-number">20</span>)
</code></pre>
<p>æ‰§è¡Œ</p>
<pre><code class="hljs language-ts" lang="ts">â¯ bun test src/<span class="hljs-title class_">DeepThinkButton</span>/
</code></pre>
<p>æ­£å¸¸æƒ…å†µè€—æ—¶ 2s+ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">âœ“ è‡ªå®šä¹‰ iconã€æŒ‰é’®å°ºå¯¸ï¼Œä»¥åŠæ€è€ƒå†…å®¹æŠ˜å åæ•ˆæœ [<span class="hljs-number">2563.</span>00ms]
</code></pre>
<p>ç¬¬ä¸€æ­¥ä¿®æ”¹å¾…æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- timer = setInterval(() =&gt; {</span>
<span class="hljs-addition">+ timer = setInterval(function deepThinkButtonInterval() {</span>
</code></pre>
<p>ä¹Ÿå°±æ˜¯åŒ¿åå‡½æ•°æ”¹æˆå…·åå‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬é’ˆå¯¹æ€§ mockã€‚</p>
<p>å½“æˆ‘ä»¬ç»™å•æµ‹æ·»åŠ ä¸Šè¿° mock åï¼Œ<strong>è€—æ—¶å‡å°‘åˆ° 1s+</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">âœ“ è‡ªå®šä¹‰ iconã€æŒ‰é’®å°ºå¯¸ï¼Œä»¥åŠæ€è€ƒå†…å®¹æŠ˜å åæ•ˆæœ [<span class="hljs-number">1344.</span>00ms]
</code></pre>
<p>ä½†å…¶å®æˆ‘ä»¬è¿˜å¯ä»¥åŠ é€Ÿï¼Œå³åœ¨ä¸€ä¸ª interval å›è°ƒä¸­å¤šæ¬¡è¿è¡Œå‡½æ•°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// src\DeepThinkButton\demo\advanced.test.tsx:</span>
<span class="hljs-keyword">return</span> <span class="hljs-title function_">originalSetInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è¿è¡Œ 6 æ¬¡</span>
    <span class="hljs-title function_">callback</span>()
    <span class="hljs-title function_">callback</span>()
    <span class="hljs-title function_">callback</span>()
    <span class="hljs-title function_">callback</span>()
    <span class="hljs-title function_">callback</span>()
    <span class="hljs-title function_">callback</span>()
  }, <span class="hljs-number">0</span>)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åˆä» <strong>1s+ ä¼˜åŒ–åˆ°äº† 300ms+ âš¡ï¸ ï¼</strong></p>
<pre><code class="hljs language-ts" lang="ts">âœ“ è‡ªå®šä¹‰ iconã€æŒ‰é’®å°ºå¯¸ï¼Œä»¥åŠæ€è€ƒå†…å®¹æŠ˜å åæ•ˆæœ [<span class="hljs-number">328.</span>00ms]
</code></pre>
<p>æˆåŠŸå°†è€—æ—¶ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>s</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">2s+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mord mathnormal">s</span><span class="mord">+</span></span></span></span></span> ä¼˜åŒ–åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>300</mn><mi>m</mi><mi>s</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">300ms+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">300</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">+</span></span></span></span></span>ï¼Œæ˜¯å…¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>8</mn></mrow><annotation encoding="application/x-tex">1/8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1/8</span></span></span></span></span>ï¼</p>
<h2 data-id="heading-2">é‡æ„</h2>
<p>ç›®å‰åªæœ‰ä¸€ä¸ª test case è¿˜å¥½ï¼Œå¦‚æœå¤šä¸ª case éœ€è¦åˆ™è¦é¿å…è¿èƒŒ DRY åŸåˆ™ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°è£…æˆå‡½æ•°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// tests/utils.ts</span>
<span class="hljs-keyword">import</span> { afterEach, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">advanceInterval</span>(<span class="hljs-params">
  callbackName: <span class="hljs-built_in">string</span>,
  { ms = <span class="hljs-number">0</span>, batchCalledCount = <span class="hljs-number">1</span> }: { ms?: <span class="hljs-built_in">number</span>; batchCalledCount?: <span class="hljs-built_in">number</span> } = {},
</span>) {
  <span class="hljs-comment">// 1. ä¿å­˜åŸå§‹çš„ setInterval</span>
  <span class="hljs-keyword">const</span> originalSetInterval = globalThis.<span class="hljs-property">setInterval</span>

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åœ¨æ¯ä¸ªæµ‹è¯•å¼€å§‹å‰å¯ç”¨å‡å®šæ—¶å™¨</span>
    <span class="hljs-comment">// @ts-expect-error</span>
    globalThis.<span class="hljs-property">setInterval</span> = <span class="hljs-function">(<span class="hljs-params">callback, delay</span>) =&gt;</span> {
      <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ¨¡æ‹Ÿçš„IDï¼Œæˆ–è€…è°ƒç”¨åŸå§‹å‡½æ•°</span>
      <span class="hljs-keyword">if</span> (callback.<span class="hljs-property">name</span> === callbackName) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalSetInterval</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; batchCalledCount; i++) {
            <span class="hljs-title function_">callback</span>()
          }
        }, ms)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalSetInterval</span>(callback, delay)
      }
    }
  })

  <span class="hljs-title function_">afterEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åœ¨æ¯ä¸ªæµ‹è¯•ç»“æŸåæ¢å¤çœŸå®šæ—¶å™¨</span>
    globalThis.<span class="hljs-property">setInterval</span> = originalSetInterval
  })
}
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">// src/DeepThinkButton/demo/advanced.test.tsx
import React from 'react'
import { test, expect } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'

import Demo from './advanced'
import { advanceInterval } from '@/tests/rtl'

<span class="hljs-addition">+ advanceInterval('deepThinkButtonInterval', { batchCalledCount: 6 })</span>

test('è‡ªå®šä¹‰ iconã€æŒ‰é’®å°ºå¯¸ï¼Œä»¥åŠæ€è€ƒå†…å®¹æŠ˜å åæ•ˆæœ', async () =&gt; {
  ...
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7571379089991483446</link>    <guid>https://juejin.cn/post/7571379089991483446</guid>    <pubDate>2025-11-12T02:49:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991483446" data-draft-id="7571334572769771563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,HTML,JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T02:49:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bug_Constructer"/> <meta itemprop="url" content="https://juejin.cn/user/254742426830856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ·ï¸ HTML å±æ€§å‚è€ƒ - å¸¸ç”¨ä¸å…¨å±€å±æ€§çš„è¡Œä¸ºã€å…¼å®¹æ€§ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426830856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bug_Constructer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:49:48.000Z" title="Wed Nov 12 2025 02:49:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ¯ <strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç³»ç»ŸæŒæ¡HTMLå¸¸ç”¨å±æ€§ä¸å…¨å±€å±æ€§çš„è¯­ä¹‰ä¸è¡Œä¸ºï¼Œç†è§£å¸ƒå°”/æšä¸¾å±æ€§çš„å·®å¼‚ã€è·¨æºä¸å®‰å…¨ç›¸å…³å±æ€§çš„æ­£ç¡®é…ç½®ï¼Œå¹¶å½¢æˆå¯è½åœ°çš„å…¼å®¹æ€§ä¸å¯è®¿é—®æ€§æœ€ä½³å®è·µ</p>
<p>ğŸ“Š <strong>éš¾åº¦ç­‰çº§</strong>ï¼šåˆçº§-ä¸­çº§<br/>
ğŸ·ï¸ <strong>æŠ€æœ¯æ ‡ç­¾</strong>ï¼š<code>#HTML</code> <code>#å±æ€§</code> <code>#å…¨å±€å±æ€§</code> <code>#å¸ƒå°”å±æ€§</code> <code>#data-*</code> <code>#ARIA</code> <code>#å…¼å®¹æ€§</code><br/>
â±ï¸ <strong>é˜…è¯»æ—¶é—´</strong>ï¼šçº¦9åˆ†é’Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸŒŸ å¼•è¨€</h2>
<p>HTML çš„å±æ€§ï¼ˆattributeï¼‰å†³å®šäº†å…ƒç´ çš„è¯­ä¹‰ã€è¡Œä¸ºå’Œè¡¨ç°ã€‚çœ‹ä¼¼ç®€å•çš„ <code>disabled</code>ã€<code>contenteditable</code>ã€<code>hidden</code> æˆ– <code>data-*</code>ï¼Œåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸æµè§ˆå™¨å®ç°ä¸­å´æœ‰ä¸å°‘å·®å¼‚ï¼šå¸ƒå°”å±æ€§æ˜¯å¦éœ€è¦å†™å€¼ï¼Ÿæšä¸¾å±æ€§æœ‰å“ªäº›åˆæ³•å–å€¼ï¼Ÿ<code>crossorigin</code> ä¸ <code>integrity</code> å¦‚ä½•ååŒä¿éšœèµ„æºå®‰å…¨ï¼Ÿè¿™äº›é—®é¢˜è‹¥å¤„ç†ä¸å½“ï¼Œä¼šå¸¦æ¥å¯è®¿é—®æ€§ã€æ€§èƒ½ç”šè‡³å®‰å…¨é£é™©ã€‚</p>
<p>åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘ä¸­ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å›°æ‰°ï¼š</p>
<ul>
<li>å¸ƒå°”å±æ€§å†™æˆ <code>disabled="false"</code> ä»ç„¶ç”Ÿæ•ˆï¼Œå¯¼è‡´äº¤äº’å¼‚å¸¸ï¼›</li>
<li>æ»¥ç”¨ <code>contenteditable</code> é€ æˆé”®ç›˜å¯è®¿é—®æ€§é€€åŒ–ï¼›</li>
<li>å¤–é“¾è„šæœ¬æœªé…ç½® SRI ä¸ CORSï¼Œè¢«å®‰å…¨ç­–ç•¥æ‹¦æˆªæˆ–é”™è¯¯ä¸é€æ˜ï¼›</li>
<li>å›¾ç‰‡æ‡’åŠ è½½ä¸è§£ç ç­–ç•¥æ··ç”¨ï¼Œå‡ºç°é¦–å±é—ªçƒä¸å¸ƒå±€æŠ–åŠ¨ï¼›</li>
</ul>
<p>ä»Šå¤©åˆ†äº« 7 ä¸ªã€Œå±æ€§è¡Œä¸ºä¸æœ€ä½³å®è·µã€æ ¸å¿ƒæŠ€å·§ï¼Œå¸®ä½ åœ¨å¼€å‘ä¸­å°‘è¸©å‘ã€å†™å‡ºæ›´ç¨³å¦¥çš„é¡µé¢ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ’¡ æ ¸å¿ƒæŠ€å·§è¯¦è§£</h2>
<blockquote>
<p>ğŸ“ ä½¿ç”¨è¯´æ˜ï¼šæœ¬æ–‡é€‰æ‹© 7 ä¸ªæœ€å¸¸ç”¨ã€æœ€æ˜“æ··æ·†çš„å±æ€§ä¸»é¢˜è¿›è¡Œè®²è§£ï¼Œæ¯èŠ‚å‡å«åœºæ™¯ã€å¸¸è§è¯¯åŒºã€æ¨èæ–¹æ¡ˆä¸è¦ç‚¹ã€‚</p>
</blockquote>
<h3 data-id="heading-2">1. å…¨å±€å±æ€§é€ŸæŸ¥ï¼šè¯­ä¹‰æ¸…æ™°ã€è¡Œä¸ºå¯æ§</h3>
<h4 data-id="heading-3">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>éœ€è¦ä¸ºå…ƒç´ æ·»åŠ æ ‡è¯†ä¸è¯­ä¹‰ã€è°ƒæ•´æ–¹å‘ä¸å¯ç¼–è¾‘æ€§ã€æ§åˆ¶æ˜¾ç¤ºä¸æ‹–æ‹½èƒ½åŠ›ç­‰é€šç”¨è¡Œä¸ºã€‚</p>
<p>å¸¸è§çš„å…¨å±€å±æ€§åŒ…æ‹¬ï¼š<code>id</code>ã€<code>class</code>ã€<code>title</code>ã€<code>lang</code>ã€<code>dir</code>ã€<code>hidden</code>ã€<code>draggable</code>ã€<code>contenteditable</code>ã€‚</p>
<h4 data-id="heading-4">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>æ»¥ç”¨ <code>id</code> å¯¼è‡´é¡µé¢å†…å”¯ä¸€æ€§è¢«ç ´åï¼›</li>
<li><code>dir</code>/<code>lang</code> æœªè®¾ç½®ï¼ŒRTL/LTR æ–‡æœ¬æ–¹å‘æˆ–è¯­è¨€è¯†åˆ«é”™è¯¯ï¼›</li>
<li>éå¿…è¦åœºæ™¯å¯ç”¨ <code>contenteditable</code>ï¼Œå¯è®¿é—®æ€§ä¸è¾“å…¥æ³•ä½“éªŒå˜å·®ï¼›</li>
<li>ç”¨ <code>hidden</code> æ›¿ä»£é€»è¾‘å¸è½½ï¼Œäº§ç”Ÿæ— æ„ä¹‰çš„å¯èšç„¦å…ƒç´ ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ç¤ºä¾‹ï¼šä»»æ„å¯ç”¨ contenteditable ä¸éšèº«å…ƒç´ å¯èšç„¦é—®é¢˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"card"</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¼–è¾‘å¡ç‰‡"</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šä»…åœ¨æ˜ç¡®ç¼–è¾‘åœºæ™¯å¯ç”¨ contenteditableï¼›æŒ‰éœ€è®¾ç½®è¯­è¨€ä¸æ–¹å‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"profile"</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">"ltr"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç”¨æˆ·èµ„æ–™"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile__title"</span>&gt;</span>èµ„æ–™<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"profile__desc"</span>&gt;</span>å¯ç¼–è¾‘åŒºåŸŸä»…é™ä¸‹é¢çš„å¤‡æ³¨ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"memo"</span> <span class="hljs-attr">contenteditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ç¼–è¾‘å¤‡æ³¨"</span>&gt;</span>åœ¨æ­¤æ·»åŠ å¤‡æ³¨...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å®‰å…¨å¯ç”¨/å…³é—­å¯ç¼–è¾‘åŒºåŸŸ
 * <span class="hljs-doctag">@description</span> æ ¹æ®å¸ƒå°”å¼€å…³æ§åˆ¶å…ƒç´ çš„ contenteditable ä¸å¯èšç„¦æ€§
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} <span class="hljs-variable">enable</span> - æ˜¯å¦å¯ç”¨å¯ç¼–è¾‘
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleEditable</span> = (<span class="hljs-params">el, enable</span>) =&gt; {
  <span class="hljs-comment">// ä»…åœ¨éœ€è¦æ—¶æ‰å¯ç”¨ï¼Œé¿å…å…¨å±€æ»¥ç”¨</span>
  el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'contenteditable'</span>, enable ? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span>);
  el.<span class="hljs-property">tabIndex</span> = enable ? <span class="hljs-number">0</span> : -<span class="hljs-number">1</span>; <span class="hljs-comment">// æ§åˆ¶é”®ç›˜å¯è®¿é—®æ€§</span>
};
</code></pre>
<h4 data-id="heading-6">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>id</code> å¿…é¡»å…¨é¡µé¢å”¯ä¸€ï¼›</li>
<li>ä¸ºæ–‡æ¡£æˆ–åŒºåŸŸè®¾ç½®æ­£ç¡®çš„ <code>lang</code> ä¸ <code>dir</code>ï¼›</li>
<li><code>hidden</code> ä¼šå°†å…ƒç´ ä»å¯è®¿é—®æ€§æ ‘ä¸­ç§»é™¤ï¼ˆä½†ä»åœ¨ DOMï¼‰ï¼Œç”¨äºæš‚æ—¶éšè—è€Œéå¸è½½ï¼›</li>
<li><code>contenteditable</code> ä»…ç”¨äºç¼–è¾‘åœºæ™¯ï¼Œæ³¨æ„é”®ç›˜ä¸ç„¦ç‚¹ç®¡ç†ã€‚</li>
</ul>
<h4 data-id="heading-7">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨å¯Œæ–‡æœ¬ç»„ä»¶ä¸­ï¼Œä»…å¯¹ç¼–è¾‘å®¹å™¨å¯ç”¨ <code>contenteditable</code>ï¼ŒåŒæ—¶ç»“åˆ <code>aria-label</code> ä¸é”®ç›˜å¯¼èˆªæç¤ºæ”¹å–„å¯è®¿é—®æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-8">2. å¸ƒå°”å±æ€§è¡Œä¸ºï¼šå­˜åœ¨å³ä¸ºçœŸï¼Œå€¼ä¼šè¢«å¿½ç•¥</h3>
<h4 data-id="heading-9">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ§åˆ¶äº¤äº’çŠ¶æ€ï¼Œå¦‚ç¦ç”¨ã€è‡ªåŠ¨èšç„¦ã€å¿…å¡«ã€éšè—ç­‰ï¼š<code>disabled</code>ã€<code>autofocus</code>ã€<code>required</code>ã€<code>hidden</code>ã€<code>checked</code>ã€‚</p>
<h4 data-id="heading-10">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å†™æˆ <code>disabled="false"</code> ä»ç„¶æ˜¯ç¦ç”¨ï¼›</li>
<li>å°†å¸ƒå°”å±æ€§èµ‹ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¯ä»¥ä¸ºå¯å…³é—­è¡Œä¸ºï¼›</li>
<li>è¯¯ç”¨ <code>autofocus</code> å½±å“æ— éšœç¢ä½“éªŒï¼ˆé¡µé¢åˆå§‹ç„¦ç‚¹è·³è·ƒï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ç¤ºä¾‹ï¼šdisabled="false" ä»ç„¶ç¦ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">"false"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 data-id="heading-11">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šé€šè¿‡å±æ€§å­˜åœ¨æ€§è¡¨è¾¾å¸ƒå°”å«ä¹‰ï¼›JS æ§åˆ¶ç”¨ property æ›´ç›´è§‚ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submitBtn"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * åˆ‡æ¢å¸ƒå°”å±æ€§ï¼šå­˜åœ¨å³ä¸ºçœŸ
 * <span class="hljs-doctag">@description</span> ä½¿ç”¨ property æ§åˆ¶æ›´ç›´è§‚ï¼Œé¿å…å­—ç¬¦ä¸²èµ‹å€¼æ­§ä¹‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLButtonElement</span>} <span class="hljs-variable">btn</span> - ç›®æ ‡æŒ‰é’®
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} <span class="hljs-variable">disabled</span> - æ˜¯å¦ç¦ç”¨
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setDisabled</span> = (<span class="hljs-params">btn, disabled</span>) =&gt; {
  btn.<span class="hljs-property">disabled</span> = disabled; <span class="hljs-comment">// ä½¿ç”¨ property ä»£æ›¿ setAttribute('disabled', 'false')</span>
};

<span class="hljs-comment">/**
 * åˆå§‹åŒ–é¡µé¢ç„¦ç‚¹
 * <span class="hljs-doctag">@description</span> è°¨æ…ä½¿ç”¨ autofocusï¼Œä¼˜å…ˆåœ¨è„šæœ¬ä¸­è®¾å®šåˆå§‹ç„¦ç‚¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">target</span> - éœ€è¦è·å¾—ç„¦ç‚¹çš„å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">initFocus</span> = (<span class="hljs-params">target</span>) =&gt; {
  target.<span class="hljs-title function_">focus</span>(); <span class="hljs-comment">// ç»Ÿä¸€åœ¨è„šæœ¬ä¸­ç®¡ç†åˆå§‹ç„¦ç‚¹</span>
};
</code></pre>
<h4 data-id="heading-12">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>å¸ƒå°”å±æ€§ä»…å‡­ã€Œå­˜åœ¨ã€å³å¯ç”Ÿæ•ˆï¼Œå±æ€§å€¼é€šå¸¸è¢«å¿½ç•¥ï¼›</li>
<li>åœ¨ JS ä¸­ä¼˜å…ˆä½¿ç”¨ propertyï¼ˆå¦‚ <code>el.disabled = true</code>ï¼‰ï¼Œæ›´ç›´è§‚ä¹Ÿæ›´å…¼å®¹ï¼›</li>
<li>é¿å…åœ¨åˆå§‹åŠ è½½é˜¶æ®µä½¿ç”¨ <code>autofocus</code> å½±å“è¯»å±ä¸é”®ç›˜ç”¨æˆ·ã€‚</li>
</ul>
<h4 data-id="heading-13">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>è¡¨å•ç»„ä»¶åº“ä¸­ç»Ÿä¸€å°è£… <code>disabled</code> æ§åˆ¶é€»è¾‘ï¼Œæ‰€æœ‰æŒ‰é’®ä¸è¾“å…¥æ¡†é‡‡ç”¨ property æ§åˆ¶ï¼Œé¿å…å±æ€§å­—ç¬¦ä¸²è¯¯ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-14">3. æšä¸¾å±æ€§ï¼šåˆæ³•å–å€¼ä¸é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-15">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ§åˆ¶ç­–ç•¥é€‰æ‹©æˆ–è¡Œä¸ºæ–¹å¼ï¼š<code>loading</code>ï¼ˆimgï¼š<code>auto</code>/<code>lazy</code>/<code>eager</code>ï¼‰ã€<code>decoding</code>ï¼ˆimgï¼š<code>sync</code>/<code>async</code>/<code>auto</code>ï¼‰ã€<code>crossorigin</code>ï¼ˆ<code>anonymous</code>/<code>use-credentials</code>ï¼‰ã€<code>autocomplete</code>ï¼ˆå¤šæšä¸¾å€¼ï¼‰ã€‚</p>
<h4 data-id="heading-16">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å†™å…¥ä¸åˆæ³•å–å€¼è¢«å¿½ç•¥ï¼Œå¯¼è‡´è¡Œä¸ºå›é€€åˆ°é»˜è®¤ï¼›</li>
<li>ä¸äº†è§£é»˜è®¤å€¼ï¼Œé€ æˆæ€§èƒ½æˆ–å…¼å®¹æ€§é—®é¢˜ï¼ˆå¦‚å›¾ç‰‡è§£ç æŠ–åŠ¨ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šä¸åˆæ³•å–å€¼å°†è¢«å¿½ç•¥ï¼Œé€€å›é»˜è®¤è¡Œä¸º --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img/hero.jpg"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"fast"</span> <span class="hljs-attr">decoding</span>=<span class="hljs-string">"quick"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¨ªå¹…"</span> /&gt;</span>
</code></pre>
<h4 data-id="heading-17">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… åˆæ³•å–å€¼ï¼šlazy ä¸ async å¯é…åˆå‡å°‘é¦–å±æŠ–åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img/hero.jpg"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">decoding</span>=<span class="hljs-string">"async"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¨ªå¹…"</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è§„èŒƒåŒ–æšä¸¾å±æ€§å–å€¼
 * <span class="hljs-doctag">@description</span> ä¿è¯å±æ€§åœ¨åˆæ³•é›†åˆå†…ï¼Œå¦åˆ™å›é€€åˆ°å®‰å…¨é»˜è®¤
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">name</span> - æšä¸¾å±æ€§å
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">allowed</span> - åˆæ³•å–å€¼é›†åˆ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">value</span> - å¾…è®¾ç½®çš„å€¼
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setEnumAttr</span> = (<span class="hljs-params">el, name, allowed, value</span>) =&gt; {
  <span class="hljs-keyword">const</span> v = allowed.<span class="hljs-title function_">includes</span>(value) ? value : allowed[<span class="hljs-number">0</span>];
  el.<span class="hljs-title function_">setAttribute</span>(name, v);
};
</code></pre>
<h4 data-id="heading-18">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>æ˜ç¡®æ¯ä¸ªæšä¸¾å±æ€§çš„åˆæ³•å–å€¼é›†åˆä¸é»˜è®¤å€¼ï¼›</li>
<li>å›¾ç‰‡å»ºè®® <code>loading="lazy"</code> + <code>decoding="async"</code>ï¼Œå‡å°‘é˜»å¡ä¸æŠ–åŠ¨ï¼›</li>
<li>è·¨æºæšä¸¾å€¼ä»…é™ <code>anonymous</code> ä¸ <code>use-credentials</code>ï¼Œå½±å“èµ„æºè¯·æ±‚ä¸é”™è¯¯å¯è§æ€§ã€‚</li>
</ul>
<h4 data-id="heading-19">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>èµ„æºç®¡ç†ç»„ä»¶ç»Ÿä¸€é€šè¿‡æšä¸¾æ ¡éªŒå‡½æ•°è®¾ç½® <code>loading</code>/<code>decoding</code>ï¼Œç¡®ä¿é…ç½®åˆæ³•ä¸è¡¨ç°ç¨³å®šã€‚</p>
<hr/>
<h3 data-id="heading-20">4. æ•°æ®å±æ€§ data-* ä¸ datasetï¼šç»“æ„åŒ–æºå¸¦ä¸šåŠ¡æ•°æ®</h3>
<h4 data-id="heading-21">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>åœ¨ä¸æ±¡æŸ“è¯­ä¹‰çš„å‰æä¸‹ï¼Œä¸ºå…ƒç´ é™„åŠ ç»“æ„åŒ–å…ƒæ•°æ®ï¼Œé…åˆè„šæœ¬è¯»å–ä¸æ›´æ–°ã€‚</p>
<h4 data-id="heading-22">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>å°†ä¸šåŠ¡çŠ¶æ€å¡è¿› <code>class</code>/<code>id</code>ï¼Œéš¾ä»¥ç»´æŠ¤ï¼›</li>
<li>ç”¨ <code>innerHTML</code> æ‹¼å­—ç¬¦ä¸²è¯»å–æ•°æ®ï¼Œæ˜“é­XSSé£é™©ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šç”¨ class/id å­˜ä¸šåŠ¡çŠ¶æ€ï¼Œè€¦åˆæ ·å¼ä¸è„šæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"order_1234"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn processing"</span>&gt;</span>ä¸‹å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šä½¿ç”¨ data-* æè¿°å…ƒæ•°æ®ï¼Œè„šæœ¬é€šè¿‡ dataset è¯»å–/æ›´æ–° --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"orderBtn"</span> <span class="hljs-attr">data-order-id</span>=<span class="hljs-string">"1234"</span> <span class="hljs-attr">data-state</span>=<span class="hljs-string">"processing"</span>&gt;</span>ä¸‹å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è¯»å–å¹¶æ›´æ–° dataset
 * <span class="hljs-doctag">@description</span> é€šè¿‡ dataset è¯»å–/å†™å…¥ data-*ï¼Œä¿æŒç»“æ„åŒ–ä¸å®‰å…¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">{orderId:string,state:string</span>}}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useDataset</span> = (<span class="hljs-params">el</span>) =&gt; {
  <span class="hljs-keyword">const</span> { orderId, state } = el.<span class="hljs-property">dataset</span>;
  <span class="hljs-comment">// æ›´æ–°çŠ¶æ€ä¸ºå·²å®Œæˆ</span>
  el.<span class="hljs-property">dataset</span>.<span class="hljs-property">state</span> = <span class="hljs-string">'done'</span>;
  <span class="hljs-keyword">return</span> { orderId, state };
};
</code></pre>
<h4 data-id="heading-24">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>data-*</code> å€¼å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ï¼›å¤æ‚æ•°æ®è¯·ç”¨ JSON å¹¶åœ¨è„šæœ¬ä¸­è§£æï¼›</li>
<li>è¯»å–ä½¿ç”¨ <code>el.dataset.xxx</code>ï¼ˆè‡ªåŠ¨å°† <code>data-xxx</code> è½¬é©¼å³°ï¼‰ï¼›</li>
<li>é¿å…å°†è§†è§‰æ ·å¼ä¸ä¸šåŠ¡çŠ¶æ€è€¦åˆåœ¨ <code>class</code>/<code>id</code>ã€‚</li>
</ul>
<h4 data-id="heading-25">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨åˆ—è¡¨é¡¹ä¸­ç”¨ <code>data-id</code>/<code>data-type</code> é™„åŠ å…ƒæ•°æ®ï¼Œäº‹ä»¶å§”æ‰˜æ—¶é€šè¿‡ <code>dataset</code> ç²¾ç¡®è¯†åˆ«ç›®æ ‡é¡¹ã€‚</p>
<hr/>
<h3 data-id="heading-26">5. è¡¨å•å±æ€§æœ€ä½³å®è·µï¼šå¯ç”¨æ€§ä¸å®‰å…¨</h3>
<h4 data-id="heading-27">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>æ–‡ä»¶é€‰æ‹©ä¸æ‹ç…§ã€è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ã€è¾“å…¥åˆæ³•æ€§ï¼š<code>accept</code>ã€<code>capture</code>ã€<code>autocomplete</code>ã€<code>required</code> ç­‰ã€‚</p>
<h4 data-id="heading-28">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li><code>accept</code> å†™é”™ MIME/æ‰©å±•åï¼Œå¯¼è‡´ç³»ç»Ÿé€‰æ‹©å™¨æ— æ³•è¿‡æ»¤ï¼›</li>
<li><code>capture</code> ç›²ç›®å¼€å¯ï¼Œç§»åŠ¨ç«¯ç›´æ¥æ‹‰èµ·æ‘„åƒå¤´å½±å“ä½“éªŒï¼›</li>
<li><code>autocomplete</code> æœªæŒ‰æšä¸¾å€¼é…ç½®ï¼Œè‡ªåŠ¨å¡«å……å¤±è´¥æˆ–æ‰°æ°‘ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šaccept å†™é”™æ‰©å±•åæˆ–ç¼ºå°‘ MIME --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/jpg"</span> /&gt;</span>
</code></pre>
<h4 data-id="heading-29">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… æ¨èï¼šç²¾ç¡®çš„ MIME æˆ–æ‰©å±•åï¼›æŒ‰éœ€é…ç½® capture ä¸ autocomplete --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/jpeg,image/png"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cameraInput"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">"environment"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">required</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ ¡éªŒæ–‡ä»¶é€‰æ‹©ç±»å‹
 * <span class="hljs-doctag">@description</span> æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦ç¬¦åˆ accept ç­–ç•¥
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File</span>} <span class="hljs-variable">file</span> - ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦é€šè¿‡æ ¡éªŒ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validateFileType</span> = (<span class="hljs-params">file</span>) =&gt; {
  <span class="hljs-keyword">const</span> ok = <span class="hljs-regexp">/(jpe?g|png)$/i</span>.<span class="hljs-title function_">test</span>(file.<span class="hljs-property">name</span>);
  <span class="hljs-keyword">return</span> ok;
};
</code></pre>
<h4 data-id="heading-30">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>accept</code> å»ºè®®ä½¿ç”¨ MIME ç±»å‹ï¼ˆæ›´é€šç”¨ï¼‰+ æ‰©å±•åå…œåº•ï¼›</li>
<li>ç§»åŠ¨ç«¯è°¨æ…ä½¿ç”¨ <code>capture</code>ï¼Œä¸ºç”¨æˆ·ä¿ç•™ä»ç›¸å†Œé€‰æ‹©çš„è·¯å¾„ï¼›</li>
<li><code>autocomplete</code> ä½¿ç”¨æ ‡å‡†æšä¸¾å–å€¼æå‡å¯ç”¨æ€§ä¸å®‰å…¨ï¼ˆå¦‚ <code>email</code>ã€<code>username</code>ã€<code>current-password</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-31">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>ä¸Šä¼ ç»„ä»¶åœ¨å®¢æˆ·ç«¯å…ˆåšè½»é‡ç±»å‹æ ¡éªŒï¼Œå¤±è´¥æ—¶ä¸è§¦å‘ç½‘ç»œè¯·æ±‚ï¼Œå‡å°‘åç«¯å‹åŠ›ä¸æ— æ•ˆæµé‡ã€‚</p>
<hr/>
<h3 data-id="heading-32">6. è·¨æºä¸å®‰å…¨å±æ€§ï¼š<code>crossorigin</code>ã€<code>integrity</code>ã€<code>referrerpolicy</code></h3>
<h4 data-id="heading-33">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>å¤–é“¾è„šæœ¬/æ ·å¼/å›¾ç‰‡èµ„æºçš„å®‰å…¨ä¸é”™è¯¯é€æ˜åŒ–ï¼ŒCDN èµ„æºåŠ è½½ã€‚</p>
<h4 data-id="heading-34">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>ä½¿ç”¨ SRIï¼ˆ<code>integrity</code>ï¼‰å´æœªè®¾ç½®åŒ¹é…çš„ CORSï¼ˆ<code>crossorigin</code>ï¼‰ï¼Œå¯¼è‡´æ ¡éªŒå¤±è´¥æˆ–é”™è¯¯ä¸å¯è§ï¼›</li>
<li>æœªé…ç½® <code>referrerpolicy</code>ï¼Œæ•æ„Ÿé¡µé¢æ³„éœ²æ¥æºä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šSRI æœªé…åˆ CORSï¼Œå¯èƒ½å¯¼è‡´èµ„æºæ ¡éªŒå¤±è´¥æˆ–é”™è¯¯ä¿¡æ¯è¢«éšè— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/app.min.js"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-..."</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-35">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… SRI + CORS ååŒï¼›å¯æŒ‰éœ€è®¾ç½® referrerpolicy --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/app.min.js"</span>
  <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-..."</span>
  <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>
  <span class="hljs-attr">referrerpolicy</span>=<span class="hljs-string">"no-referrer"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ ¡éªŒè·¨æºé…ç½®æ˜¯å¦å®Œæ•´
 * <span class="hljs-doctag">@description</span> ç®€å•æ£€æŸ¥å…ƒç´ æ˜¯å¦åŒæ—¶å…·å¤‡ integrity ä¸åˆé€‚çš„ crossorigin
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLScriptElement</span>} <span class="hljs-variable">el</span> - å¤–é“¾è„šæœ¬å…ƒç´ 
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦æ»¡è¶³åŸºæœ¬å®‰å…¨é…ç½®
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkCrossOriginSafety</span> = (<span class="hljs-params">el</span>) =&gt; {
  <span class="hljs-keyword">const</span> hasSRI = !!el.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'integrity'</span>);
  <span class="hljs-keyword">const</span> co = el.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'crossorigin'</span>);
  <span class="hljs-keyword">const</span> ok = hasSRI &amp;&amp; (co === <span class="hljs-string">'anonymous'</span> || co === <span class="hljs-string">'use-credentials'</span>);
  <span class="hljs-keyword">return</span> ok;
};
</code></pre>
<h4 data-id="heading-36">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>SRI è¦ä¸ <code>crossorigin</code> ååŒï¼›</li>
<li><code>referrerpolicy</code> æ ¹æ®åœºæ™¯åˆç†é…ç½®ï¼ˆå¦‚ä¸‹è½½é¡µå¯ç”¨ <code>no-referrer</code>ï¼‰ï¼›</li>
<li>äº†è§£é”™è¯¯å¯è§æ€§ï¼šè·¨æºè„šæœ¬åœ¨æ—  CORS æ—¶é”™è¯¯å †æ ˆå—é™ã€‚</li>
</ul>
<h4 data-id="heading-37">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>CDN èµ„æºç»Ÿä¸€æ¨¡æ¿åŒ–ï¼šæ‰€æœ‰å¤–é“¾è„šæœ¬/æ ·å¼è‡ªåŠ¨é™„åŠ  <code>integrity</code> ä¸ <code>crossorigin</code>ï¼Œå¹¶æä¾›ç­–ç•¥ä½å¯é…ç½® <code>referrerpolicy</code>ã€‚</p>
<hr/>
<h3 data-id="heading-38">7. å¯è®¿é—®æ€§ä¸ ARIAï¼šå±æ€§ä¸è§’è‰²çš„ååŒ</h3>
<h4 data-id="heading-39">ğŸ” åº”ç”¨åœºæ™¯</h4>
<p>è‡ªå®šä¹‰ç»„ä»¶ï¼ˆå¦‚ä¼ªæŒ‰é’®ã€å¯æŠ˜å åŒºåŸŸï¼‰éœ€è¦é€šè¿‡ <code>role</code> ä¸ <code>aria-*</code> æå‡è¯­ä¹‰ä¸å¯æ“ä½œæ€§ã€‚</p>
<h4 data-id="heading-40">âŒ å¸¸è§é—®é¢˜</h4>
<ul>
<li>ä»…é  <code>div</code> + ç‚¹å‡»äº‹ä»¶å……å½“æŒ‰é’®ï¼Œé”®ç›˜ç”¨æˆ·æ— æ³•æ“ä½œï¼›</li>
<li>è¯¯ç”¨ <code>aria-*</code> ä¸åŸç”Ÿå±æ€§å†²çªï¼ˆå¦‚å¯¹ <code>&lt;button&gt;</code> é‡å¤å£°æ˜ <code>role="button"</code>ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ æ˜“é”™ï¼šæ— é”®ç›˜å¯è®¿é—®æ€§ä¸è¯­ä¹‰ç¼ºå¤± --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"like"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"doLike()"</span>&gt;</span>ç‚¹èµ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-41">âœ… æ¨èæ–¹æ¡ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âœ… ä½¿ç”¨ role ä¸ aria-* æ”¹å–„è¯­ä¹‰ä¸äº¤äº’ï¼›åŒæ—¶å¤„ç†é”®ç›˜äº‹ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"like"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"ç‚¹èµ"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>ç‚¹èµ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * ä¸ºä¼ªæŒ‰é’®æ·»åŠ é”®ç›˜å¯è®¿é—®æ€§
 * <span class="hljs-doctag">@description</span> å¤„ç† Enter/Space é”®ä»¥è§¦å‘ç‚¹å‡»è¡Œä¸º
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">el</span> - ä¼ªæŒ‰é’®å…ƒç´ 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">() =&gt; void</span>} <span class="hljs-variable">onActive</span> - æ¿€æ´»æ—¶çš„å›è°ƒ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">enhancePseudoButton</span> = (<span class="hljs-params">el, onActive</span>) =&gt; {
  el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> k = e.<span class="hljs-property">key</span>;
    <span class="hljs-keyword">if</span> (k === <span class="hljs-string">'Enter'</span> || k === <span class="hljs-string">' '</span>) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-title function_">onActive</span>();
    }
  });
};
</code></pre>
<h4 data-id="heading-42">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>åŸç”Ÿæ§ä»¶ä¼˜å…ˆï¼ˆ<code>&lt;button&gt;</code>ã€<code>&lt;a&gt;</code> ç­‰ï¼‰ï¼›è‹¥å¿…é¡»è‡ªå®šä¹‰ï¼Œå†ä½¿ç”¨ <code>role</code> ä¸ <code>aria-*</code>ï¼›</li>
<li>å§‹ç»ˆä¸ºå¯äº¤äº’å…ƒç´ æä¾›é”®ç›˜ç­‰æ•ˆæ“ä½œï¼›</li>
<li>é¿å…ä¸åŸç”Ÿå±æ€§å†²çªçš„å†—ä½™ <code>role</code> å£°æ˜ã€‚</li>
</ul>
<h4 data-id="heading-43">ğŸ¯ å®é™…åº”ç”¨</h4>
<p>åœ¨å¡ç‰‡ç»„ä»¶çš„å¯æŠ˜å åŒºåŸŸä½¿ç”¨ <code>aria-expanded</code> ä¸é”®ç›˜äº‹ä»¶ï¼Œä¿è¯è¯»å±ä¸é”®ç›˜ç”¨æˆ·ä½“éªŒä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-44">ğŸ“Š æŠ€å·§å¯¹æ¯”æ€»ç»“</h2>





















































<table><thead><tr><th>æŠ€å·§</th><th>ä½¿ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>å…¨å±€å±æ€§é€ŸæŸ¥</td><td>å…ƒç´ è¯­ä¹‰ä¸è¡Œä¸º</td><td>ç»Ÿä¸€ç®¡ç† <code>lang/dir</code> ä¸ç¼–è¾‘æ€§</td><td>æ…ç”¨ <code>contenteditable</code> ä¸ <code>hidden</code></td></tr><tr><td>å¸ƒå°”å±æ€§è¡Œä¸º</td><td>äº¤äº’ç¦ç”¨/ç„¦ç‚¹</td><td>property æ§åˆ¶ç›´è§‚å…¼å®¹</td><td>é¿å… <code>autofocus</code> å½±å“å¯è®¿é—®æ€§</td></tr><tr><td>æšä¸¾å±æ€§</td><td>èµ„æºåŠ è½½ä¸ç­–ç•¥</td><td>æ˜ç¡®åˆæ³•å–å€¼ä¸é»˜è®¤å€¼</td><td><code>crossorigin</code> ä»…ä¸¤ç§å–å€¼</td></tr><tr><td>data-* ä¸ dataset</td><td>æºå¸¦å…ƒæ•°æ®</td><td>ç»“æ„åŒ–ä¸å®‰å…¨</td><td>å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œå¤æ‚ç”¨ JSON</td></tr><tr><td>è¡¨å•å±æ€§</td><td>æ–‡ä»¶ä¸è‡ªåŠ¨å¡«å……</td><td>å¯ç”¨æ€§ä¸å®‰å…¨</td><td>è°¨æ… <code>capture</code>ï¼Œç²¾ç¡® <code>accept</code></td></tr><tr><td>è·¨æºä¸å®‰å…¨</td><td>å¤–é“¾èµ„æº</td><td>SRI + CORS ååŒ</td><td>é”™è¯¯å¯è§æ€§å—è·¨æºå½±å“</td></tr><tr><td>ARIA å¯è®¿é—®æ€§</td><td>è‡ªå®šä¹‰ç»„ä»¶</td><td>è¯­ä¹‰ä¸é”®ç›˜å¯ç”¨æ€§</td><td>é¿å…ä¸åŸç”Ÿå±æ€§å†²çª</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-45">ğŸ¯ å®æˆ˜åº”ç”¨å»ºè®®</h2>
<h3 data-id="heading-46">æœ€ä½³å®è·µ</h3>
<ol>
<li>å…¨å±€å¯ç”¨æ–‡æ¡£ <code>lang</code> ä¸åˆç†çš„ <code>dir</code> é…ç½®ï¼Œå›½é™…åŒ–åœºæ™¯æ›´ç¨³ã€‚</li>
<li>ç»Ÿä¸€å°è£…å¸ƒå°”å±æ€§æ§åˆ¶ï¼Œå…¨éƒ¨èµ° propertyï¼ˆ<code>el.disabled = true</code>ï¼‰ã€‚</li>
<li>å›¾ç‰‡ä½¿ç”¨ <code>loading="lazy"</code> + <code>decoding="async"</code>ï¼Œå‡å°‘é¦–å±é˜»å¡ä¸æŠ–åŠ¨ã€‚</li>
<li>ä¸šåŠ¡å…ƒæ•°æ®ç»Ÿä¸€ä½¿ç”¨ <code>data-*</code>ï¼Œé¿å…ä¸æ ·å¼è€¦åˆã€‚</li>
<li>è¡¨å•çš„ <code>accept/capture/autocomplete</code> æŒ‰æšä¸¾è§„èŒƒé…ç½®ï¼Œå…¼é¡¾ä½“éªŒä¸å®‰å…¨ã€‚</li>
<li>å¤–é“¾èµ„æºæ¨¡æ¿åŒ– SRI + CORSï¼Œå¿…è¦æ—¶åŠ  <code>referrerpolicy</code>ï¼Œä¿éšœå®‰å…¨ä¸éšç§ã€‚</li>
</ol>
<h3 data-id="heading-47">æ€§èƒ½è€ƒè™‘</h3>
<ul>
<li>å›¾ç‰‡ä¸åª’ä½“ä¼˜å…ˆä½¿ç”¨æ‡’åŠ è½½ä¸å¼‚æ­¥è§£ç ï¼›</li>
<li>å‡å°‘ä¸å¿…è¦çš„å¯ç¼–è¾‘åŒºåŸŸä¸èšç„¦è·³è½¬ï¼›</li>
<li>å¤–é“¾èµ„æºå¼€å¯æ ¡éªŒä¸è·¨æºé…ç½®ï¼Œé™ä½å¤±è´¥æˆæœ¬å¹¶æå‡é”™è¯¯å¯è§æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-48">ğŸ’¡ æ€»ç»“</h2>
<p>è¿™ 7 ä¸ªå±æ€§ä¸»é¢˜è¦†ç›–äº†æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸è§ä¸”æœ€æ˜“æ··æ·†çš„è¡Œä¸ºã€‚æŒæ¡å®ƒä»¬èƒ½è®©ä½ çš„é¡µé¢ï¼š</p>
<ol>
<li>æ›´è¯­ä¹‰åŒ–ã€å¯è®¿é—®ï¼›</li>
<li>æ›´å¯æ§ã€å°‘è¸©å‘ï¼›</li>
<li>æ›´å®‰å…¨ã€å¯è§‚æµ‹ï¼›</li>
<li>æ›´ç¨³å®šã€é«˜æ€§èƒ½ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-49">ğŸ”— ç›¸å…³èµ„æº</h2>
<ul>
<li>MDN: HTML attribute reference â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTML%2FAttributes" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: Global attributes â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FHTML%2FGlobal_attributes" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: ARIA roles, states and properties â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAccessibility%2FARIA" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
<li>MDN: Subresource Integrity (SRI) â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FSecurity%2FSubresource_Integrity" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ ä»Šæ—¥æ”¶è·ï¼šç†è§£äº†å¸ƒå°”ä¸æšä¸¾å±æ€§çš„å·®å¼‚ã€data-* çš„å®‰å…¨ç”¨æ³•ä¸è·¨æºå®‰å…¨é…ç½®çš„å…³é”®ç‚¹ï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­è½åœ°æ›´ç¨³å¦¥çš„å±æ€§ç­–ç•¥ã€‚</p>
</blockquote>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—å’Œåˆ†äº«ï¼æœ‰ä»»ä½•é—®é¢˜ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7571351275976605747</link>    <guid>https://juejin.cn/post/7571351275976605747</guid>    <pubDate>2025-11-12T00:21:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571351275976605747" data-draft-id="7571352754896437274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-12T00:21:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonç¼–ç¨‹å®æˆ˜ - Pythonå®ç”¨å·¥å…·ä¸åº“ - çˆ¬è™«é˜²å°ä¸ä»£ç†æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T00:21:57.000Z" title="Wed Nov 12 2025 00:21:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨è¿›è¡Œç½‘é¡µçˆ¬å–æ—¶ï¼Œå¦‚æœé¢‘ç¹è®¿é—®åŒä¸€ç½‘ç«™ï¼Œææœ‰å¯èƒ½è¢«ç½‘ç«™è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œä»è€Œå°ç¦ IP æˆ–è¦æ±‚éªŒè¯ç éªŒè¯ã€‚
ä¸ºäº†ä¿è¯çˆ¬è™«ç¨³å®šã€é«˜æ•ˆè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å¹¶æŒæ¡ <strong>é˜²å°æœºåˆ¶ä¸ä»£ç†ä½¿ç”¨æ–¹æ³•</strong>ã€‚</p>
</blockquote>
<p>æœ¬ç« å°†ä»‹ç» Python çˆ¬è™«ä¸­å¸¸ç”¨çš„é˜²å°ç­–ç•¥ã€ä»£ç†åŸç†åŠå®æˆ˜åº”ç”¨æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä¼šè¢«å°</h2>
<p>ç½‘ç«™å°ç¦çˆ¬è™«ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢èµ„æºæ»¥ç”¨ä¸æœåŠ¡å™¨è¿‡è½½ã€‚å¸¸è§çš„å°ç¦æ‰‹æ®µåŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>IP å°ç¦</strong>ï¼šçŸ­æ—¶é—´å†…è¯·æ±‚é¢‘ç¹ï¼Œç›´æ¥æ‹‰é»‘è®¿é—® IPã€‚</li>
<li><strong>User-Agent æ£€æµ‹</strong>ï¼šè¯†åˆ«è¯·æ±‚å¤´ä¸­æ˜¯å¦åŒ…å«æµè§ˆå™¨æ ‡è¯†ã€‚</li>
<li><strong>Referer æ£€æŸ¥</strong>ï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªæ­£å¸¸é¡µé¢è·³è½¬ã€‚</li>
<li><strong>Cookie æ ¡éªŒ</strong>ï¼šéªŒè¯ç™»å½•çŠ¶æ€æˆ–è®¿é—®æ¥æºã€‚</li>
<li><strong>è¯·æ±‚é¢‘ç‡é™åˆ¶</strong>ï¼šåŒä¸€ç”¨æˆ·çŸ­æ—¶é—´å†…è¿‡å¤šè¯·æ±‚è§¦å‘åçˆ¬ã€‚</li>
</ol>
<p>è¦åº”å¯¹è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä» <strong>â€œä¼ªè£…è‡ªå·±â€</strong> å’Œ <strong>â€œå¤šIPè®¿é—®â€</strong> ä¸¤ä¸ªæ–¹å‘å…¥æ‰‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€è¯·æ±‚ä¼ªè£…ï¼šæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¿é—®</h2>
<h3 data-id="heading-2">1. è®¾ç½®è¯·æ±‚å¤´</h3>
<p><code>requests</code> æ”¯æŒé€šè¿‡ <code>headers</code> å‚æ•°è‡ªå®šä¹‰è¯·æ±‚å¤´ã€‚
å¸¸è§åšæ³•æ˜¯æ·»åŠ æµè§ˆå™¨ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è®¤ä¸ºè¯·æ±‚æ¥è‡ªæ­£å¸¸ç”¨æˆ·ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

url = <span class="hljs-string">"https://example.com"</span>
headers = {
    <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) "</span>
                  <span class="hljs-string">"AppleWebKit/537.36 (KHTML, like Gecko) "</span>
                  <span class="hljs-string">"Chrome/122.0.0.0 Safari/537.36"</span>,
    <span class="hljs-string">"Referer"</span>: <span class="hljs-string">"https://www.google.com"</span>,
}
response = requests.get(url, headers=headers)
<span class="hljs-built_in">print</span>(response.status_code)
</code></pre>
<hr/>
<h3 data-id="heading-3">2. éšæœºåˆ‡æ¢ User-Agent</h3>
<p>ä¸ºäº†é¿å…å•ä¸€ User-Agent è¢«è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¸­éšæœºåˆ‡æ¢æµè§ˆå™¨æ ‡è¯†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random

user_agents = [
    <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/123.0.0.0 Safari/537.36"</span>,
    <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Firefox/124.0"</span>,
    <span class="hljs-string">"Mozilla/5.0 (Linux; Android 10) Mobile Safari/537.36"</span>,
]

headers = {<span class="hljs-string">"User-Agent"</span>: random.choice(user_agents)}
</code></pre>
<p>æ¯æ¬¡è®¿é—®æ—¶éšæœºé€‰æ‹©ä¸€ä¸ªå¤´éƒ¨ï¼Œèƒ½æœ‰æ•ˆå‡å°‘è¢«è¯†åˆ«é£é™©ã€‚</p>
<hr/>
<h3 data-id="heading-4">3. æ·»åŠ å»¶æ—¶ä¸éšæœºç­‰å¾…</h3>
<p>é¢‘ç¹è®¿é—®ç½‘ç«™æœ€å®¹æ˜“è§¦å‘é£æ§ã€‚
åˆç†çš„åšæ³•æ˜¯æ·»åŠ è®¿é—®é—´éš”ï¼Œå¹¶éšæœºåŒ–ç­‰å¾…æ—¶é—´ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> random

time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># ç­‰å¾…1~3ç§’</span>
</code></pre>
<p>è¿™æ ·èƒ½è®©è®¿é—®èŠ‚å¥æ›´åƒäººç±»æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰</h2>
<p>å½“ IP è¢«å°æ—¶ï¼Œä½¿ç”¨ä»£ç†æœåŠ¡å™¨å¯ä»¥åˆ‡æ¢å‡ºå£ IPï¼Œä»è€Œç»§ç»­è®¿é—®ã€‚</p>
<p>ä»£ç†æœåŠ¡å™¨ä¼šä»£æ›¿ä½ è®¿é—®ç›®æ ‡ç½‘ç«™ï¼Œç„¶åå°†ç»“æœè¿”å›ã€‚
Python ä¸­å¯ä»¥é€šè¿‡ <code>requests</code> è½»æ¾ä½¿ç”¨ä»£ç†ã€‚</p>
<hr/>
<h3 data-id="heading-6">1. è®¾ç½®ä»£ç†å‚æ•°</h3>
<pre><code class="hljs language-python" lang="python">proxies = {
    <span class="hljs-string">"http"</span>: <span class="hljs-string">"http://123.45.67.89:8080"</span>,
    <span class="hljs-string">"https"</span>: <span class="hljs-string">"http://123.45.67.89:8080"</span>,
}

response = requests.get(<span class="hljs-string">"https://httpbin.org/ip"</span>, proxies=proxies, timeout=<span class="hljs-number">10</span>)
<span class="hljs-built_in">print</span>(response.text)
</code></pre>
<p>å¦‚æœä»£ç†æœ‰æ•ˆï¼Œè¿”å›çš„ IP å°†ä¸æœ¬æœºä¸åŒã€‚</p>
<hr/>
<h3 data-id="heading-7">2. ä½¿ç”¨ä»£ç†æ± ï¼ˆProxy Poolï¼‰</h3>
<p>æ‰‹åŠ¨è®¾ç½®ä»£ç†ä¸æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨ <strong>ä»£ç†æ± </strong> è‡ªåŠ¨éšæœºé€‰å–å¯ç”¨ä»£ç†ã€‚</p>
<p>ç®€å•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> time

proxies_list = [
    <span class="hljs-string">"http://111.22.33.44:8080"</span>,
    <span class="hljs-string">"http://222.11.55.66:8888"</span>,
    <span class="hljs-string">"http://77.88.99.100:3128"</span>,
]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_random_proxy</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"http"</span>: random.choice(proxies_list), <span class="hljs-string">"https"</span>: random.choice(proxies_list)}

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    proxy = get_random_proxy()
    <span class="hljs-keyword">try</span>:
        res = requests.get(<span class="hljs-string">"https://httpbin.org/ip"</span>, proxies=proxy, timeout=<span class="hljs-number">5</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨ä»£ç† <span class="hljs-subst">{proxy[<span class="hljs-string">'http'</span>]}</span> -&gt; <span class="hljs-subst">{res.json()}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»£ç†å¤±æ•ˆï¼š"</span>, e)
    time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
</code></pre>
<hr/>
<h3 data-id="heading-8">3. è´­ä¹°æˆ–æ­å»ºä»£ç†æ± </h3>
<p>å…è´¹ä»£ç†å¸¸å¸¸ä¸ç¨³å®šï¼Œå»ºè®®ï¼š</p>
<ul>
<li>ä½¿ç”¨ä»˜è´¹ä»£ç†æœåŠ¡ï¼ˆå¦‚èŠéº»ä»£ç†ã€å¿«ä»£ç†ç­‰ï¼‰ã€‚</li>
<li>è‡ªè¡Œæ­å»ºä»£ç†æ± æœåŠ¡ï¼Œç»“åˆ Redis å­˜å‚¨å’Œè‡ªåŠ¨æ£€æµ‹å¯ç”¨ IPã€‚</li>
</ul>
<p>ä¸€ä¸ªç®€å•çš„ä»£ç†æ± æ¶æ„ï¼š</p>
<pre><code class="hljs">çˆ¬è™«ç¨‹åº â†’ è¯·æ±‚ä»£ç†æ± æ¥å£ â†’ è¿”å›å¯ç”¨ä»£ç† â†’ è®¿é—®ç›®æ ‡ç½‘ç«™
ä»£ç†æ± åå° â†’ å®šæœŸæ£€æµ‹ä»£ç†å¯ç”¨æ€§ â†’ æ¸…ç†æ— æ•ˆIP
</code></pre>
<hr/>
<h2 data-id="heading-9">å››ã€Cookie ä¸ä¼šè¯ä¿æŒ</h2>
<p>æŸäº›ç½‘ç«™éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®æ•°æ®ï¼Œè¿™æ—¶éœ€è¦å¤„ç† <strong>Cookie</strong>ã€‚
å¯ä»¥ä½¿ç”¨ <code>requests.Session()</code> è‡ªåŠ¨ä¿æŒä¼šè¯çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-python" lang="python">session = requests.Session()
login_url = <span class="hljs-string">"https://example.com/login"</span>
payload = {<span class="hljs-string">"username"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"password"</span>: <span class="hljs-string">"pass"</span>}
session.post(login_url, data=payload)

<span class="hljs-comment"># ç™»å½•æˆåŠŸåç»§ç»­è®¿é—®é¡µé¢</span>
resp = session.get(<span class="hljs-string">"https://example.com/user/profile"</span>)
<span class="hljs-built_in">print</span>(resp.text)
</code></pre>
<p><code>Session</code> ä¼šè‡ªåŠ¨ä¿å­˜ç™»å½•åçš„ Cookie ä¿¡æ¯ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚é‡æ–°è®¤è¯ã€‚</p>
<hr/>
<h2 data-id="heading-10">äº”ã€éªŒè¯ç ä¸é«˜çº§é˜²çˆ¬</h2>
<p>æœ‰çš„ç½‘ç«™ä¼šè¦æ±‚è¾“å…¥éªŒè¯ç æˆ– JavaScript åŠ å¯†éªŒè¯è¯·æ±‚ã€‚
å¸¸è§åº”å¯¹æ€è·¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>äººå·¥è¾…åŠ©è¯†åˆ«</strong>ï¼šé‡åˆ°éªŒè¯ç æš‚åœçˆ¬å–ï¼Œæ‰‹åŠ¨è¾“å…¥ã€‚</li>
<li><strong>OCR è¯†åˆ«éªŒè¯ç </strong>ï¼šé€šè¿‡ <code>pytesseract</code> è¯†åˆ«ç®€å•å›¾ç‰‡éªŒè¯ç ã€‚</li>
<li><strong>æ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸º</strong>ï¼šä½¿ç”¨ <code>selenium</code> æˆ– <code>playwright</code> æ‰§è¡Œç½‘é¡µä¸­çš„ JS é€»è¾‘ã€‚</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver

driver = webdriver.Chrome()
driver.get(<span class="hljs-string">"https://example.com"</span>)
<span class="hljs-built_in">print</span>(driver.title)
driver.quit()
</code></pre>
<p>è¿™ç§æ–¹å¼èƒ½ç»•è¿‡å¤§éƒ¨åˆ†åŸºäº JS æ¸²æŸ“æˆ–éªŒè¯çš„é˜²çˆ¬æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€å¼‚å¸¸ä¸é‡è¯•æœºåˆ¶</h2>
<p>ç½‘ç»œè¯·æ±‚å®¹æ˜“è¶…æ—¶æˆ–å¤±è´¥ï¼Œå»ºè®®æ·»åŠ å¼‚å¸¸é‡è¯•æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_request</span>(<span class="hljs-params">url, retries=<span class="hljs-number">3</span></span>):
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(retries):
        <span class="hljs-keyword">try</span>:
            res = requests.get(url, timeout=<span class="hljs-number">10</span>)
            <span class="hljs-keyword">if</span> res.status_code == <span class="hljs-number">200</span>:
                <span class="hljs-keyword">return</span> res.text
        <span class="hljs-keyword">except</span> requests.RequestException:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> æ¬¡è¯·æ±‚å¤±è´¥ï¼Œé‡è¯•ä¸­..."</span>)
            time.sleep(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€ç»¼åˆå®æˆ˜ç¤ºä¾‹</h2>
<p>ç»¼åˆä»¥ä¸ŠæŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç¨³å®šã€æŠ—å°çš„çˆ¬è™«ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests, random, time

headers_list = [
    {<span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 Chrome/122.0.0.0"</span>},
    {<span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 Firefox/124.0"</span>},
]
proxies_list = [
    <span class="hljs-string">"http://123.45.67.89:8080"</span>,
    <span class="hljs-string">"http://222.111.55.66:8888"</span>
]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">url</span>):
    headers = random.choice(headers_list)
    proxy = {<span class="hljs-string">"http"</span>: random.choice(proxies_list), <span class="hljs-string">"https"</span>: random.choice(proxies_list)}
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, headers=headers, proxies=proxy, timeout=<span class="hljs-number">10</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—®æˆåŠŸï¼š"</span>, response.status_code, <span class="hljs-string">"IPï¼š"</span>, proxy)
        <span class="hljs-keyword">return</span> response.text
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—®å¤±è´¥ï¼š"</span>, e)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    html = fetch(<span class="hljs-string">"https://httpbin.org/ip"</span>)
    time.sleep(random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>))
</code></pre>
<hr/>
<h2 data-id="heading-13">å…«ã€æ€»ç»“</h2>

































<table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¯·æ±‚ä¼ªè£…</strong></td><td>è®¾ç½®éšæœº User-Agentã€Referer ç­‰å¤´ä¿¡æ¯</td></tr><tr><td><strong>è¯·æ±‚é—´éš”æ§åˆ¶</strong></td><td>ä½¿ç”¨éšæœºå»¶æ—¶ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º</td></tr><tr><td><strong>ä»£ç†æœºåˆ¶</strong></td><td>é€šè¿‡ä»£ç†IPåˆ‡æ¢è®¿é—®æ¥æº</td></tr><tr><td><strong>ä¼šè¯ä¿æŒ</strong></td><td>ä½¿ç”¨ Session ç®¡ç†ç™»å½•çŠ¶æ€</td></tr><tr><td><strong>å¼‚å¸¸é‡è¯•</strong></td><td>é˜²æ­¢ä¸´æ—¶ç½‘ç»œé”™è¯¯å¯¼è‡´ç¨‹åºä¸­æ–­</td></tr><tr><td><strong>æµè§ˆå™¨æ¨¡æ‹Ÿ</strong></td><td>å¤„ç†éªŒè¯ç æˆ–åŠ¨æ€æ¸²æŸ“å†…å®¹</td></tr></tbody></table>
<hr/>
<p>é€šè¿‡åˆç†è¿ç”¨è¿™äº›é˜²å°ç­–ç•¥ä¸ä»£ç†æœºåˆ¶ï¼Œä½ çš„ Python çˆ¬è™«å°†æ›´ç¨³å®šã€æ›´é«˜æ•ˆã€æ›´æ¥è¿‘çœŸå®ç”¨æˆ·è®¿é—®è¡Œä¸ºï¼Œä¸ºåç»­æ•°æ®é‡‡é›†ä¸åˆ†æå¥ å®šåšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» useState åˆ° URLStateï¼šå‰ç«¯çŠ¶æ€ç®¡ç†çš„å¦ä¸€ç§æ€è·¯]]></title>    <link>https://juejin.cn/post/7571306072423628842</link>    <guid>https://juejin.cn/post/7571306072423628842</guid>    <pubDate>2025-11-12T01:09:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072423628842" data-draft-id="7571306072423612458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» useState åˆ° URLStateï¼šå‰ç«¯çŠ¶æ€ç®¡ç†çš„å¦ä¸€ç§æ€è·¯"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T01:09:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‡ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453424542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» useState åˆ° URLStateï¼šå‰ç«¯çŠ¶æ€ç®¡ç†çš„å¦ä¸€ç§æ€è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453424542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‡ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:09:56.000Z" title="Wed Nov 12 2025 01:09:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React å¼€å‘ä¸­ï¼Œ<code>useState</code> æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ä¹‹ä¸€ã€‚å®ƒè½»é‡ã€ç›´è§‚ï¼Œèƒ½æ»¡è¶³å¤§å¤šæ•°ç»„ä»¶çº§çŠ¶æ€ç®¡ç†éœ€æ±‚ã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚åˆ—è¡¨ç­›é€‰ã€åˆ†é¡µã€å¤šé¡µé¢å…±äº«çŠ¶æ€æ—¶ï¼Œå•çº¯ä½¿ç”¨ <code>useState</code> ä¼šé‡åˆ°çŠ¶æ€ä¸¢å¤±ã€åˆ·æ–°é¡µé¢é‡ç½®ç­‰é—®é¢˜ã€‚è¿™æ—¶å€™ï¼Œ<strong>URLState</strong> æˆ–è®¸æ˜¯ä¸€ä¸ªæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-0">ä¸€ã€useState çš„ã€Œç—›ç‚¹ã€åœºæ™¯</h2>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªå¸¸è§çš„ä¸šåŠ¡åœºæ™¯ï¼šå®ç°ä¸€ä¸ªå¸¦ç­›é€‰åŠŸèƒ½çš„å•†å“åˆ—è¡¨é¡µï¼ŒåŒ…å«ã€Œä»·æ ¼åŒºé—´ã€ã€Œåˆ†ç±»ã€ã€Œæ’åºæ–¹å¼ã€ä¸‰ä¸ªç­›é€‰æ¡ä»¶ã€‚ç”¨ <code>useState</code> å®ç°çš„ä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç­›é€‰çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [priceRange, setPriceRange] = <span class="hljs-title function_">useState</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>]);
  <span class="hljs-keyword">const</span> [category, setCategory] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'all'</span>);
  <span class="hljs-keyword">const</span> [sortBy, setSortBy] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'price-asc'</span>);

  <span class="hljs-comment">// ç­›é€‰é€»è¾‘...</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FilterPanel</span> 
        <span class="hljs-attr">priceRange</span>=<span class="hljs-string">{priceRange}</span>
        <span class="hljs-attr">onPriceRangeChange</span>=<span class="hljs-string">{setPriceRange}</span>
        <span class="hljs-attr">category</span>=<span class="hljs-string">{category}</span>
        <span class="hljs-attr">onCategoryChange</span>=<span class="hljs-string">{setCategory}</span>
        <span class="hljs-attr">sortBy</span>=<span class="hljs-string">{sortBy}</span>
        <span class="hljs-attr">onSortByChange</span>=<span class="hljs-string">{setSortBy}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProductGrid</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™æ®µä»£ç çœ‹ä¼¼æ²¡é—®é¢˜ï¼Œä½†å­˜åœ¨ä¸‰ä¸ªæ˜æ˜¾ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>é¡µé¢åˆ·æ–°çŠ¶æ€ä¸¢å¤±</strong>ï¼šç”¨æˆ·ç­›é€‰ååˆ·æ–°é¡µé¢ï¼Œæ‰€æœ‰ç­›é€‰æ¡ä»¶ä¼šé‡ç½®ä¸ºåˆå§‹å€¼ï¼Œä½“éªŒæå·®ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€æ— æ³•å…±äº«</strong>ï¼šå¦‚æœéœ€è¦åœ¨å…¶ä»–é¡µé¢ï¼ˆæ¯”å¦‚å•†å“è¯¦æƒ…é¡µï¼‰å›é€€åˆ°ç­›é€‰åçš„åˆ—è¡¨ï¼Œæ— æ³•æºå¸¦ç­›é€‰çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>æ— æ³•ä¹¦ç­¾/åˆ†äº«</strong>ï¼šç”¨æˆ·æƒ³æŠŠç­›é€‰åçš„ç»“æœåˆ†äº«ç»™åŒäº‹ï¼Œå¤åˆ¶é“¾æ¥è¿‡å»æ˜¯æœªç­›é€‰çš„åˆå§‹çŠ¶æ€ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯ URLStateï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Ÿ</h2>
<p><strong>URLState</strong> æ˜¯å°†åº”ç”¨çŠ¶æ€å­˜å‚¨åœ¨ URL æŸ¥è¯¢å‚æ•°ï¼ˆQuery Stringï¼‰ä¸­çš„çŠ¶æ€ç®¡ç†æ–¹å¼ã€‚æ¯”å¦‚ä¸Šé¢çš„ç­›é€‰åœºæ™¯ï¼Œä½¿ç”¨ URLState åï¼ŒURL å¯èƒ½å˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
https://example.com/products?price=0-1000&amp;category=electronics&amp;sort=price-asc
</code></pre>
<p>è¿™ç§æ–¹å¼çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>
<p>ã€Œåˆ·æ–°ä¸ä¸¢çŠ¶æ€ã€ï¼šURL æ˜¯æµè§ˆå™¨çš„æŒä¹…åŒ–è½½ä½“ï¼Œåˆ·æ–°é¡µé¢å‚æ•°ä¸ä¼šæ¶ˆå¤±ã€‚</p>
</li>
<li>
<p>ã€Œå¤©ç„¶å¯å…±äº«ã€ï¼šå¤åˆ¶ URL å³å¯åˆ†äº«å½“å‰çŠ¶æ€ï¼Œæ”¯æŒä¹¦ç­¾ä¿å­˜ã€‚</p>
</li>
<li>
<p>ã€Œè·¨é¡µä¼ å‚ç®€å•ã€ï¼šä¸åŒé¡µé¢é—´é€šè¿‡ URL å³å¯ä¼ é€’çŠ¶æ€ï¼Œæ— éœ€ä¾èµ–å…¨å±€çŠ¶æ€åº“ã€‚</p>
</li>
<li>
<p>ã€Œå¯å›æº¯ã€ï¼šæµè§ˆå™¨çš„å‰è¿›/åé€€æŒ‰é’®èƒ½ç›´æ¥å›æº¯çŠ¶æ€å˜æ›´å†å²ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€å®ç° URLStateï¼šè‡ªå®šä¹‰ useURLState Hook</h2>
<p>å…¶å® URLState çš„å®ç°å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡ <code>URLSearchParams</code> æ“ä½œæŸ¥è¯¢å‚æ•°ï¼Œå¹¶ç»“åˆ React çš„çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚ä¸‹é¢æˆ‘ä»¬å°è£…ä¸€ä¸ªé€šç”¨çš„ <code>useURLState</code> Hookã€‚</p>
<h3 data-id="heading-3">3.1 æ ¸å¿ƒé€»è¾‘æ‹†è§£</h3>
<ol>
<li>
<p>ä» URL ä¸­è§£æåˆå§‹çŠ¶æ€ï¼šé€šè¿‡ <code>new URLSearchParams(window.location.search)</code> è·å–æŸ¥è¯¢å‚æ•°ã€‚</p>
</li>
<li>
<p>å®šä¹‰çŠ¶æ€æ›´æ–°å‡½æ•°ï¼šä¿®æ”¹çŠ¶æ€æ—¶ï¼ŒåŒæ­¥æ›´æ–° URLï¼ˆä½¿ç”¨ <code>history.pushState</code> é¿å…é¡µé¢åˆ·æ–°ï¼‰ã€‚</p>
</li>
<li>
<p>ç›‘å¬ URL å˜åŒ–ï¼šå½“ç”¨æˆ·é€šè¿‡å‰è¿›/åé€€æŒ‰é’®åˆ‡æ¢å†å²è®°å½•æ—¶ï¼ŒåŒæ­¥æ›´æ–°ç»„ä»¶çŠ¶æ€ã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">3.2 å®Œæ•´å®ç°ä»£ç </h3>
<pre><code class="hljs language-jsx" lang="jsx">
<span class="hljs-keyword">import</span> { useState, useEffect, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useURLState</span>(<span class="hljs-params">initialState = {}</span>) {
  <span class="hljs-comment">// ä» URL è§£æçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> parseURLState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> searchParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
    <span class="hljs-keyword">const</span> state = {};
    
    <span class="hljs-comment">// éå†åˆå§‹çŠ¶æ€ï¼Œä» URL ä¸­æå–å¯¹åº”å‚æ•°</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(initialState).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, defaultValue]</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = searchParams.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
        state[key] = defaultValue;
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// å¤„ç†ä¸åŒç±»å‹çš„é»˜è®¤å€¼ï¼ˆæ•°å­—ã€å¸ƒå°”ã€æ•°ç»„ç­‰ï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> defaultValue === <span class="hljs-string">'number'</span>) {
        state[key] = <span class="hljs-title class_">Number</span>(value);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> defaultValue === <span class="hljs-string">'boolean'</span>) {
        state[key] = value === <span class="hljs-string">'true'</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(defaultValue)) {
        state[key] = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">'-'</span>);
      } <span class="hljs-keyword">else</span> {
        state[key] = value;
      }
    });
    
    <span class="hljs-keyword">return</span> state;
  }, [initialState]);

  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€ï¼šä» URL è§£ææˆ–ä½¿ç”¨åˆå§‹å€¼</span>
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(<span class="hljs-title function_">parseURLState</span>());

  <span class="hljs-comment">// å½“ URL å˜åŒ–æ—¶ï¼ˆå‰è¿›/åé€€ï¼‰ï¼ŒåŒæ­¥æ›´æ–°çŠ¶æ€</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePopState</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setState</span>(<span class="hljs-title function_">parseURLState</span>());
    };
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
  }, [parseURLState]);

  <span class="hljs-comment">// æ›´æ–°çŠ¶æ€å¹¶åŒæ­¥åˆ° URL</span>
  <span class="hljs-keyword">const</span> setURLState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newState</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> searchParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
    <span class="hljs-keyword">const</span> nextState = { ...state, ...newState };
    
    <span class="hljs-comment">// éå†æ–°çŠ¶æ€ï¼Œæ›´æ–°åˆ° searchParams</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(nextState).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (value === initialState[key]) {
        <span class="hljs-comment">// å¦‚æœå€¼ç­‰äºåˆå§‹å€¼ï¼Œç§»é™¤è¯¥å‚æ•°ï¼ˆä¿æŒ URL ç®€æ´ï¼‰</span>
        searchParams.<span class="hljs-title function_">delete</span>(key);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ•°ç»„ç±»å‹ç”¨ "-" æ‹¼æ¥</span>
        <span class="hljs-keyword">const</span> paramValue = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value) ? value.<span class="hljs-title function_">join</span>(<span class="hljs-string">'-'</span>) : <span class="hljs-title class_">String</span>(value);
        searchParams.<span class="hljs-title function_">set</span>(key, paramValue);
      }
    });
    
    <span class="hljs-comment">// æ›´æ–° URLï¼ˆpushState ä¸ä¼šåˆ·æ–°é¡µé¢ï¼‰</span>
    <span class="hljs-keyword">const</span> searchString = searchParams.<span class="hljs-title function_">toString</span>();
    <span class="hljs-keyword">const</span> newUrl = searchString ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.location.pathname}</span>?<span class="hljs-subst">${searchString}</span>`</span> : <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>;
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">''</span>, newUrl);
    
    <span class="hljs-comment">// æ›´æ–°ç»„ä»¶çŠ¶æ€</span>
    <span class="hljs-title function_">setState</span>(nextState);
  }, [state, initialState]);

  <span class="hljs-keyword">return</span> [state, setURLState];
}
</code></pre>
<h2 data-id="heading-5">å››ã€å®æˆ˜ï¼šç”¨ URLState é‡æ„å•†å“åˆ—è¡¨é¡µ</h2>
<p>æœ‰äº† <code>useURLState</code>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾é‡æ„ä¹‹å‰çš„å•†å“åˆ—è¡¨é¡µï¼Œè§£å†³ <code>useState</code> å¸¦æ¥çš„ç—›ç‚¹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">
<span class="hljs-keyword">import</span> { useURLState } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useURLState'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç”¨ useURLState æ›¿ä»£ useStateï¼Œåˆå§‹çŠ¶æ€å’Œä¹‹å‰ä¸€è‡´</span>
  <span class="hljs-keyword">const</span> [state, setURLState] = <span class="hljs-title function_">useURLState</span>({
    <span class="hljs-attr">priceRange</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>], <span class="hljs-comment">// æ•°ç»„ç±»å‹</span>
    <span class="hljs-attr">category</span>: <span class="hljs-string">'all'</span>,       <span class="hljs-comment">// å­—ç¬¦ä¸²ç±»å‹</span>
    <span class="hljs-attr">sortBy</span>: <span class="hljs-string">'price-asc'</span>    <span class="hljs-comment">// å­—ç¬¦ä¸²ç±»å‹</span>
  });

  <span class="hljs-keyword">const</span> { priceRange, category, sortBy } = state;

  <span class="hljs-comment">// ç­›é€‰æ¡ä»¶å˜æ›´æ—¶ï¼Œè°ƒç”¨ setURLState æ›´æ–°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePriceChange</span> = (<span class="hljs-params">newRange</span>) =&gt; {
    <span class="hljs-title function_">setURLState</span>({ <span class="hljs-attr">priceRange</span>: newRange });
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCategoryChange</span> = (<span class="hljs-params">newCategory</span>) =&gt; {
    <span class="hljs-title function_">setURLState</span>({ <span class="hljs-attr">category</span>: newCategory });
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSortChange</span> = (<span class="hljs-params">newSort</span>) =&gt; {
    <span class="hljs-title function_">setURLState</span>({ <span class="hljs-attr">sortBy</span>: newSort });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">FilterPanel</span> 
        <span class="hljs-attr">priceRange</span>=<span class="hljs-string">{priceRange}</span>
        <span class="hljs-attr">onPriceRangeChange</span>=<span class="hljs-string">{handlePriceChange}</span>
        <span class="hljs-attr">category</span>=<span class="hljs-string">{category}</span>
        <span class="hljs-attr">onCategoryChange</span>=<span class="hljs-string">{handleCategoryChange}</span>
        <span class="hljs-attr">sortBy</span>=<span class="hljs-string">{sortBy}</span>
        <span class="hljs-attr">onSortByChange</span>=<span class="hljs-string">{handleSortChange}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ProductGrid</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æ­¤æ—¶ï¼Œç”¨æˆ·ç­›é€‰å•†å“åï¼ŒURL ä¼šè‡ªåŠ¨æ›´æ–°ä¸ºï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
https://example.com/products?priceRange=0-2000&amp;category=electronics&amp;sortBy=price-desc
</code></pre>
<p>åˆ·æ–°é¡µé¢ã€å¤åˆ¶é“¾æ¥åˆ†äº«ã€åé€€åˆ°ä¸Šä¸€ä¸ªç­›é€‰çŠ¶æ€ï¼Œéƒ½èƒ½å®Œç¾ç”Ÿæ•ˆï¼</p>
<h2 data-id="heading-6">äº”ã€URLState çš„é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-7">5.1 é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>
<p>åˆ—è¡¨ç­›é€‰ã€åˆ†é¡µã€æ’åºç­‰ã€Œå¯åˆ†äº«ã€çš„çŠ¶æ€ã€‚</p>
</li>
<li>
<p>å¤šæ­¥éª¤è¡¨å•ï¼ˆå¦‚æ³¨å†Œæµç¨‹ï¼‰çš„è¿›åº¦çŠ¶æ€ã€‚</p>
</li>
<li>
<p>å•é¡µåº”ç”¨ä¸­çš„ã€Œé¡µé¢çº§ã€çŠ¶æ€ï¼ˆå¦‚æ ‡ç­¾é¡µåˆ‡æ¢ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">5.2 æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p><strong>ä¸è¦å­˜å‚¨æ•æ„Ÿä¿¡æ¯</strong>ï¼šURL å‚æ•°ä¼šæš´éœ²åœ¨åœ°å€æ ã€æµè§ˆå™¨å†å²ã€æœåŠ¡å™¨æ—¥å¿—ä¸­ï¼Œå¯†ç ã€token ç­‰æ•æ„Ÿä¿¡æ¯ç»å¯¹ä¸èƒ½ç”¨ URLStateã€‚</p>
</li>
<li>
<p><strong>å‚æ•°ä¸å®œè¿‡å¤š/è¿‡é•¿</strong>ï¼šæµè§ˆå™¨å¯¹ URL é•¿åº¦æœ‰ä¸Šé™ï¼ˆé€šå¸¸ 2KB-8KBï¼‰ï¼Œå¤æ‚çŠ¶æ€å»ºè®®ç”¨å…¨å±€çŠ¶æ€åº“ï¼ˆå¦‚ Reduxï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†ç‰¹æ®Šç±»å‹æ•°æ®</strong>ï¼šå¯¹äºå¯¹è±¡ç­‰å¤æ‚ç±»å‹ï¼Œéœ€è¦å…ˆåºåˆ—åŒ–ï¼ˆå¦‚ JSON.stringifyï¼‰ï¼Œä½†ä¼šå¢åŠ  URL é•¿åº¦ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">å…­ã€æ€»ç»“</h2>
<p><code>useState</code> æ˜¯ React çŠ¶æ€ç®¡ç†çš„åŸºçŸ³ï¼Œä½†åœ¨ã€ŒçŠ¶æ€æŒä¹…åŒ–ã€ã€Œå¯åˆ†äº«ã€åœºæ™¯ä¸‹å­˜åœ¨å±€é™ã€‚URLState ä½œä¸ºä¸€ç§è½»é‡çº§çš„è¡¥å……æ–¹æ¡ˆï¼Œé€šè¿‡ URL æŸ¥è¯¢å‚æ•°å®ç°çŠ¶æ€çš„æŒä¹…åŒ–å’Œå…±äº«ï¼Œæ— éœ€å¼•å…¥å¤æ‚çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå°±èƒ½è§£å†³å¾ˆå¤šå®é™…ä¸šåŠ¡é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼ŒURLState ä¸æ˜¯é“¶å¼¹ï¼Œå®ƒå’Œ <code>useState</code>ã€å…¨å±€çŠ¶æ€åº“æ˜¯äº’è¡¥å…³ç³»ã€‚åœ¨åˆé€‚çš„åœºæ™¯é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼Œæ‰æ˜¯é«˜æ•ˆå¼€å‘çš„å…³é”®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ 10 åˆ†é’Ÿåƒé€ CSS position å®šä½ï¼ä»åº•å±‚åŸç†åˆ°é¿å‘å®æˆ˜ï¼Œæå®šæ‰€æœ‰å¸ƒå±€éš¾é¢˜]]></title>    <link>https://juejin.cn/post/7571285984089686068</link>    <guid>https://juejin.cn/post/7571285984089686068</guid>    <pubDate>2025-11-11T17:17:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571285984089686068" data-draft-id="7571344319701942312" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ 10 åˆ†é’Ÿåƒé€ CSS position å®šä½ï¼ä»åº•å±‚åŸç†åˆ°é¿å‘å®æˆ˜ï¼Œæå®šæ‰€æœ‰å¸ƒå±€éš¾é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-11T17:17:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½å…°åœ°ç©ºç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/191753514127514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ 10 åˆ†é’Ÿåƒé€ CSS position å®šä½ï¼ä»åº•å±‚åŸç†åˆ°é¿å‘å®æˆ˜ï¼Œæå®šæ‰€æœ‰å¸ƒå±€éš¾é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191753514127514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½å…°åœ°ç©ºç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T17:17:20.000Z" title="Tue Nov 11 2025 17:17:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå¸ƒå±€æ˜¯æ ¸å¿ƒæŠ€èƒ½ä¹‹ä¸€ï¼Œè€Œ<code>position</code>å±æ€§æ›´æ˜¯å¸ƒå±€çš„ â€œçµé­‚â€â€”â€” å®ƒå†³å®šäº†å…ƒç´ åœ¨é¡µé¢ä¸­çš„ä½ç½®å…³ç³»ï¼Œæ˜¯å®ç°å¤æ‚å¸ƒå±€ã€æ‚¬æµ®ç»„ä»¶ã€å›ºå®šå¯¼èˆªç­‰æ•ˆæœçš„å…³é”®ã€‚å¾ˆå¤šå¼€å‘è€…å…¥é—¨æ—¶ä¼šæ··æ·†<code>absolute</code>å’Œ<code>fixed</code>ï¼Œè¸©å‘<code>sticky</code>ä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œæœ¬è´¨ä¸Šæ˜¯æ²¡åƒé€å…¶åº•å±‚åŸç†ã€‚æœ¬æ–‡ç»“åˆ 5 ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œä»æ–‡æ¡£æµæœ¬è´¨å‡ºå‘ï¼Œå…¨é¢è§£æ<code>position</code>çš„ 5 ç§å±æ€§ç”¨æ³•ï¼Œå¸®ä½ å½»åº•æŒæ¡è¿™ä¸ª CSS åŸºç¡€æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šæ–‡æ¡£æµæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>è¦ç†è§£<code>position</code>ï¼Œå¿…é¡»å…ˆæ˜ç¡® â€œæ–‡æ¡£æµâ€ çš„æ¦‚å¿µ â€”â€” è¿™æ˜¯ HTML å…ƒç´ é»˜è®¤çš„å¸ƒå±€è§„åˆ™ï¼Œå°±åƒç°å®ä¸­æ’é˜Ÿä¸€æ ·ï¼Œå…ƒç´ æŒ‰ç…§ä»£ç é¡ºåºä¾æ¬¡æ’åˆ—ã€‚</p>
<p>å—çº§å…ƒç´ ï¼ˆå¦‚<code>div</code>ã€<code>p</code>ï¼‰é»˜è®¤å‚ç›´æ’åˆ—ï¼Œæ¯ä¸ªå…ƒç´ ç‹¬å ä¸€è¡Œï¼Œè‡ªä¸Šè€Œä¸‹ä¾æ¬¡åˆ†å¸ƒï¼›è¡Œå†…å…ƒç´ ï¼ˆå¦‚<code>span</code>ã€<code>a</code>ï¼‰åˆ™æ°´å¹³æ’åˆ—ï¼Œä»å·¦åˆ°å³ç´§å¯†æ’å¸ƒï¼Œç›´åˆ°ä¸€è¡Œæ”¾ä¸ä¸‹æ‰æ¢è¡Œã€‚è¿™ç§ â€œè‡ªä¸Šè€Œä¸‹ã€ä»å·¦åˆ°å³â€ çš„è‡ªç„¶å¸ƒå±€æ–¹å¼ï¼Œå°±æ˜¯æ–‡æ¡£æµã€‚</p>
<p>è€Œ<code>position</code>å±æ€§çš„æ ¸å¿ƒä½œç”¨ï¼Œå°±æ˜¯æ‰“ç ´æˆ–éµå¾ªè¿™ä¸ªé»˜è®¤è§„åˆ™ï¼Œæ”¹å˜å…ƒç´ çš„å®šä½æ–¹å¼ã€‚å…¶ä¸­ï¼Œ<strong>æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ</strong>æ˜¯åŒºåˆ†ä¸åŒå®šä½å±æ€§çš„å…³é”®ï¼šè„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ä¼š â€œè·³å‡ºâ€ æ’é˜Ÿé˜Ÿä¼ï¼Œä¸å†å ç”¨åŸæ¥çš„ä½ç½®ï¼Œå…¶ä»–å…ƒç´ ä¼šå¿½ç•¥å®ƒé‡æ–°æ’åˆ—ï¼›ä¸è„±ç¦»çš„å…ƒç´ åˆ™ä»åœ¨é˜Ÿä¼ä¸­ï¼Œåªæ˜¯åœ¨åŸä½ç½®ä¸Šè¿›è¡Œå¾®è°ƒã€‚</p>
<h2 data-id="heading-1">äºŒã€é€ä¸ªå‡»ç ´ï¼š5 ç§ position å±æ€§çš„åº•å±‚é€»è¾‘</h2>
<h3 data-id="heading-2">1. staticï¼šé»˜è®¤å®šä½ï¼ˆæ— å®šä½ï¼‰</h3>
<p><code>static</code>æ˜¯<code>position</code>çš„é»˜è®¤å€¼ï¼Œæ‰€æœ‰å…ƒç´ åœ¨æœªè®¾ç½®å®šä½æ—¶ï¼Œéƒ½éµå¾ª<code>static</code>è§„åˆ™ â€”â€” æŒ‰ç…§æ–‡æ¡£æµæ­£å¸¸æ’åˆ—ï¼Œä¸å—<code>top</code>ã€<code>left</code>ã€<code>right</code>ã€<code>bottom</code>å±æ€§å½±å“ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å®Œå…¨éµå¾ªæ–‡æ¡£æµï¼Œä¸è„±ç¦»</li>
<li>æ— æ³•é€šè¿‡<code>top</code>/<code>left</code>ç­‰å±æ€§è°ƒæ•´ä½ç½®</li>
<li>å¯ç”¨äºå–æ¶ˆå·²è®¾ç½®çš„å®šä½ï¼ˆå¦‚ç¤ºä¾‹ 5 ä¸­ï¼Œ5 ç§’åå°†<code>absolute</code>æ”¹ä¸º<code>static</code>ï¼‰</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼ˆç¤ºä¾‹ 5 åˆå§‹çŠ¶æ€ï¼‰ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* åˆå§‹å®šä½ */</span>
  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
}
<span class="hljs-comment">/* 5ç§’åå–æ¶ˆå®šä½ï¼Œæ¢å¤staticé»˜è®¤çŠ¶æ€ */</span>
setTimeout(() =&gt; {
  oParent<span class="hljs-selector-class">.style</span><span class="hljs-selector-class">.position</span> = 'static';
}, <span class="hljs-number">5000</span>);
</code></pre>
<p>å½“<code>position</code>æ”¹ä¸º<code>static</code>åï¼Œ<code>left</code>å’Œ<code>top</code>å¤±æ•ˆï¼Œå…ƒç´ å›åˆ°æ–‡æ¡£æµçš„åŸå§‹ä½ç½®ã€‚</p>
<hr/>
<h3 data-id="heading-3">2. relativeï¼šç›¸å¯¹å®šä½ï¼ˆä¸è„±ç¦»æ–‡æ¡£æµï¼‰</h3>
<p><code>relative</code>æ˜¯ â€œç›¸å¯¹â€ äºè‡ªèº«åœ¨æ–‡æ¡£æµä¸­çš„åŸå§‹ä½ç½®è¿›è¡Œå®šä½ï¼Œè¿™æ˜¯å®ƒæœ€æ ¸å¿ƒçš„ç‰¹å¾ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸è„±ç¦»æ–‡æ¡£æµï¼ŒåŸå§‹ä½ç½®ä»è¢«å ç”¨ï¼ˆåé¢å…ƒç´ ä¸ä¼šè¡¥ä½ï¼‰</li>
<li>é€šè¿‡<code>top</code>/<code>left</code>/<code>right</code>/<code>bottom</code>è°ƒæ•´ä½ç½®ï¼Œå‚è€ƒç‚¹æ˜¯è‡ªèº«é»˜è®¤ä½ç½®</li>
<li>å¸¸ä½œä¸º<code>absolute</code>çš„ â€œå®šä½å®¹å™¨â€ï¼ˆå­ç»çˆ¶ç›¸ï¼‰</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼ˆç¤ºä¾‹ 1ï¼‰ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">background</span>: pink;
  <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* ç›¸å¯¹å®šä½ */</span>
  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
}
<span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">background</span>: skyblue;
}
</code></pre>
<p>è¿™é‡Œ<code>.parent</code>ä¼šç›¸å¯¹äºè‡ªå·±çš„é»˜è®¤ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰å‘å³ç§»åŠ¨ 100pxã€å‘ä¸‹ç§»åŠ¨ 100pxï¼Œè€Œå®ƒåŸæ¥çš„ä½ç½®ä»è¢«å ç”¨ï¼Œ<code>.box</code>å…ƒç´ ä¼šæŒ‰ç…§æ–‡æ¡£æµåœ¨å®ƒåé¢æ­£å¸¸æ’åˆ—ï¼Œä¸ä¼šå‘å‰è¡¥ä½ã€‚</p>
<hr/>
<h3 data-id="heading-4">3. absoluteï¼šç»å¯¹å®šä½ï¼ˆå®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼‰</h3>
<p><code>absolute</code>æ˜¯æœ€å¸¸ç”¨çš„å®šä½å±æ€§ä¹‹ä¸€ï¼Œå…ƒç´ ä¼šå®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œç›¸å½“äº â€œè·³å‡ºâ€ æ’é˜Ÿé˜Ÿä¼ï¼Œä¸å†å ç”¨ä»»ä½•ç©ºé—´ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼ŒåŸå§‹ä½ç½®è¢«é‡Šæ”¾ï¼ˆåé¢å…ƒç´ ä¼šè¡¥ä½ï¼‰</li>
<li>å®šä½å‚è€ƒç‚¹æ˜¯ â€œæœ€è¿‘çš„å·²å®šä½ç¥–å…ˆå…ƒç´ â€ï¼ˆ<code>position</code>ä¸ä¸º<code>static</code>ï¼‰</li>
<li>è‹¥æ²¡æœ‰å·²å®šä½ç¥–å…ˆï¼Œåˆ™å‚è€ƒ<code>body</code>ï¼ˆæµè§ˆå™¨è§†å£ï¼‰</li>
<li>å¿…é¡»é…åˆ<code>top</code>/<code>left</code>ç­‰å±æ€§ä½¿ç”¨ï¼Œå¦åˆ™å®šä½æ— æ•ˆ</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼ˆç¤ºä¾‹ 2ï¼‰ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">550px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">background</span>: pink;
  <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* å®šä½å®¹å™¨ */</span>
}
<span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">background</span>: skyblue;
  <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* ç»å¯¹å®šä½ */</span>
  <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* ç›¸å¯¹äº.parentå³ä¾§åç§»100px */</span>
}
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>: green;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>); <span class="hljs-comment">/* æ°´å¹³å‚ç›´å±…ä¸­ */</span>
}
</code></pre>
<p>ç¤ºä¾‹ä¸­<code>.parent</code>è®¾ç½®<code>relative</code>ä½œä¸ºå®šä½å®¹å™¨ï¼Œ<code>.child</code>å’Œ<code>.box</code>çš„<code>absolute</code>å®šä½éƒ½ä»¥<code>.parent</code>ä¸ºå‚è€ƒã€‚å…¶ä¸­<code>.box</code>é€šè¿‡<code>left:50%</code>+<code>top:50%</code>+<code>transform:translate(-50%,-50%)</code>å®ç°äº†ç›¸å¯¹äºçˆ¶å®¹å™¨çš„å®Œç¾å±…ä¸­ï¼Œè¿™æ˜¯<code>absolute</code>çš„ç»å…¸ç”¨æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-5">4. fixedï¼šå›ºå®šå®šä½ï¼ˆå®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼‰</h3>
<p><code>fixed</code>çš„æ ¸å¿ƒæ˜¯ â€œå›ºå®šäºæµè§ˆå™¨è§†å£â€ï¼Œæ— è®ºé¡µé¢å¦‚ä½•æ»šåŠ¨ï¼Œå…ƒç´ ä½ç½®å§‹ç»ˆä¸å˜ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œä¸å ç”¨åŸå§‹ä½ç½®</li>
<li>å®šä½å‚è€ƒç‚¹æ˜¯æµè§ˆå™¨è§†å£ï¼ˆå¯è§†åŒºåŸŸï¼‰</li>
<li>ä¸å—ç¥–å…ˆå…ƒç´ å®šä½å½±å“ï¼ˆå³ä½¿çˆ¶å…ƒç´ æœ‰<code>relative</code>ï¼Œä»å‚è€ƒè§†å£ï¼‰</li>
<li>å¸¸ç”¨æ¥å®ç°å›ºå®šå¯¼èˆªã€æ‚¬æµ®æŒ‰é’®ã€å¼¹çª—ç­‰</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼ˆç¤ºä¾‹ 3ï¼‰ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">background</span>: blue;
  <span class="hljs-attribute">position</span>: fixed; <span class="hljs-comment">/* å›ºå®šå®šä½ */</span>
  <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* ç›¸å¯¹äºè§†å£å³ä¸‹è§’åç§»100px */</span>
}
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">2000px</span>; <span class="hljs-comment">/* è®©é¡µé¢å¯æ»šåŠ¨ */</span>
}
</code></pre>
<p>å³ä½¿é¡µé¢æ»šåŠ¨ï¼Œ<code>.child</code>å§‹ç»ˆå›ºå®šåœ¨è§†å£å³ä¸‹è§’ 100px çš„ä½ç½®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>fixed</code>å…ƒç´ ä¼šè·Ÿéšæµè§ˆå™¨çª—å£ç§»åŠ¨ï¼Œä¸ä¼šè¢«çˆ¶å®¹å™¨çš„<code>overflow</code>å±æ€§å½±å“ï¼ˆé™¤éçˆ¶å®¹å™¨æœ‰<code>transform</code>å±æ€§ï¼Œè¿™æ˜¯å¸¸è§å‘ç‚¹ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-6">5. stickyï¼šç²˜æ€§å®šä½ï¼ˆåŠ¨æ€åˆ‡æ¢å®šä½æ–¹å¼ï¼‰</h3>
<p><code>sticky</code>æ˜¯ â€œç›¸å¯¹å®šä½â€ å’Œ â€œå›ºå®šå®šä½â€ çš„ç»“åˆä½“ï¼Œå ªç§°å¸ƒå±€ç¥å™¨ï¼Œå¸¸ç”¨äºå¯¼èˆªæ æ»šåŠ¨å¸é¡¶æ•ˆæœã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æœªè¾¾åˆ°æ»šåŠ¨é˜ˆå€¼æ—¶ï¼Œè¡¨ç°ä¸º<code>relative</code>ï¼ˆéµå¾ªæ–‡æ¡£æµï¼‰</li>
<li>è¾¾åˆ°æ»šåŠ¨é˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢ä¸º<code>fixed</code>ï¼ˆå›ºå®šäºè§†å£ï¼‰</li>
<li>ä¸è„±ç¦»æ–‡æ¡£æµï¼ŒåŸå§‹ä½ç½®ä»è¢«å ç”¨ï¼ˆåˆ‡æ¢ä¸º<code>fixed</code>åä¹Ÿä¸ä¼šè®©åé¢å…ƒç´ è¡¥ä½ï¼‰</li>
<li>å¿…é¡»é…åˆ<code>top</code>/<code>left</code>ç­‰å±æ€§è®¾ç½®é˜ˆå€¼ï¼Œå¦åˆ™æ— æ•ˆ</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼ˆç¤ºä¾‹ 4ï¼‰ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>: green;
  <span class="hljs-attribute">position</span>: sticky; <span class="hljs-comment">/* ç²˜æ€§å®šä½ */</span>
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* æ»šåŠ¨é˜ˆå€¼ï¼šè·ç¦»è§†å£é¡¶éƒ¨100pxæ—¶å›ºå®š */</span>
}
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">2000px</span>; <span class="hljs-comment">/* å¯æ»šåŠ¨é¡µé¢ */</span>
}
</code></pre>
<p>å½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œ<code>.box</code>åœ¨æœªåˆ°è¾¾è§†å£é¡¶éƒ¨ 100px å‰ï¼Œä¼šè·Ÿéšæ–‡æ¡£æµæ­£å¸¸æ»šåŠ¨ï¼›ä¸€æ—¦è·ç¦»é¡¶éƒ¨å°äº 100pxï¼Œå°±ä¼šå›ºå®šåœ¨é¡¶éƒ¨ 100px çš„ä½ç½®ï¼Œç›´åˆ°æ»šåŠ¨åˆ°çˆ¶å…ƒç´ åº•éƒ¨ï¼Œåˆä¼šæ¢å¤<code>relative</code>çŠ¶æ€ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€å…³é”®åŒºåˆ«ï¼š5 ç§å®šä½å±æ€§æ ¸å¿ƒå¯¹æ¯”</h2>









































<table><thead><tr><th>å®šä½å±æ€§</th><th>æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ</th><th>å®šä½å‚è€ƒç‚¹</th><th>æ ¸å¿ƒç”¨é€”</th></tr></thead><tbody><tr><td>static</td><td>å¦ï¼ˆé»˜è®¤ï¼‰</td><td>æ— </td><td>å–æ¶ˆå®šä½ã€é»˜è®¤å¸ƒå±€</td></tr><tr><td>relative</td><td>å¦</td><td>è‡ªèº«é»˜è®¤ä½ç½®</td><td>å¾®è°ƒä½ç½®ã€ä½œä¸º absolute å®¹å™¨</td></tr><tr><td>absolute</td><td>æ˜¯</td><td>æœ€è¿‘å·²å®šä½ç¥–å…ˆ /body</td><td>ç²¾å‡†å®šä½ã€å¼¹çª—ã€å±…ä¸­</td></tr><tr><td>fixed</td><td>æ˜¯</td><td>æµè§ˆå™¨è§†å£</td><td>å›ºå®šå¯¼èˆªã€æ‚¬æµ®ç»„ä»¶</td></tr><tr><td>sticky</td><td>å¦ï¼ˆåŠ¨æ€åˆ‡æ¢ï¼‰</td><td>æ–‡æ¡£æµ / è§†å£</td><td>æ»šåŠ¨å¸é¡¶ã€ç²˜æ€§å¯¼èˆª</td></tr></tbody></table>
<h2 data-id="heading-8">å››ã€å®æˆ˜é¿å‘ï¼šè¿™äº›é—®é¢˜ä¸€å®šè¦æ³¨æ„</h2>
<ol>
<li><strong><code>absolute</code>æ— æ³•å®šä½ï¼Ÿ</strong> æ£€æŸ¥çˆ¶å…ƒç´ æ˜¯å¦æœ‰<code>position: relative/absolute/fixed/sticky</code>ï¼Œè‹¥æ²¡æœ‰åˆ™å‚è€ƒ<code>body</code>ï¼Œå¯èƒ½å› çˆ¶å…ƒç´ æœªè®¾ç½®é«˜åº¦å¯¼è‡´å®šä½å¼‚å¸¸ã€‚</li>
<li><strong><code>sticky</code>ä¸ç”Ÿæ•ˆï¼Ÿ</strong> ç¡®ä¿æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼šè®¾ç½®äº†<code>top</code>/<code>left</code>ç­‰é˜ˆå€¼ã€çˆ¶å…ƒç´ æ²¡æœ‰<code>overflow: hidden</code>ã€å…ƒç´ åœ¨æ–‡æ¡£æµä¸­ï¼ˆæ²¡æœ‰è„±ç¦»æ–‡æ¡£æµçš„ç¥–å…ˆï¼‰ã€‚</li>
<li><strong><code>fixed</code>è¢«çˆ¶å…ƒç´  â€œå›°ä½â€ï¼Ÿ</strong> è‹¥çˆ¶å…ƒç´ æœ‰<code>transform</code>å±æ€§ï¼ˆå¦‚<code>transform: translate(0)</code>ï¼‰ï¼Œ<code>fixed</code>ä¼šä»¥è¯¥çˆ¶å…ƒç´ ä¸ºå‚è€ƒï¼Œè€Œéè§†å£ï¼Œéœ€é¿å…è¿™ç§åµŒå¥—ã€‚</li>
<li><strong>è„±ç¦»æ–‡æ¡£æµçš„å½±å“ï¼Ÿ</strong> <code>absolute</code>å’Œ<code>fixed</code>ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œå¯èƒ½å¯¼è‡´é¡µé¢å¸ƒå±€å¡Œé™·ï¼Œéœ€æå‰é¢„ç•™ç©ºé—´æˆ–ç”¨å…¶ä»–å…ƒç´ è¡¥ä½ã€‚</li>
</ol>
<h2 data-id="heading-9">äº”ã€æ€»ç»“ï¼šå®šä½å±æ€§çš„é€‰æ‹©é€»è¾‘</h2>
<ol>
<li>åªéœ€å¾®è°ƒå…ƒç´ ä½ç½®ï¼Œä¸å½±å“å…¶ä»–å¸ƒå±€ â†’Â <code>relative</code></li>
<li>éœ€ç²¾å‡†å®šä½ï¼Œä¸”ä¸å åŸå§‹ç©ºé—´ â†’Â <code>absolute</code>ï¼ˆé…åˆ<code>relative</code>å®¹å™¨ï¼‰</li>
<li>éœ€å›ºå®šåœ¨è§†å£ï¼Œä¸å—æ»šåŠ¨å½±å“ â†’Â <code>fixed</code></li>
<li>éœ€æ»šåŠ¨å¸é¡¶ / å¸åº•æ•ˆæœ â†’Â <code>sticky</code></li>
<li>æ¢å¤é»˜è®¤å¸ƒå±€æˆ–å–æ¶ˆå®šä½ â†’Â <code>static</code></li>
</ol>
<p><code>position</code>å±æ€§çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ˜¯ CSS å¸ƒå±€çš„åº•å±‚é€»è¾‘ä½“ç°ã€‚æŒæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Œèƒ½è®©ä½ åœ¨å®ç°å¤æ‚å¸ƒå±€æ—¶æ¸¸åˆƒæœ‰ä½™ã€‚å»ºè®®ç»“åˆæœ¬æ–‡çš„ç¤ºä¾‹ä»£ç ï¼Œäº²è‡ªåœ¨æµè§ˆå™¨ä¸­è°ƒè¯•ï¼Œè§‚å¯Ÿå…ƒç´ ä½ç½®å˜åŒ–ï¼ŒåŠ æ·±å¯¹æ–‡æ¡£æµå’Œå®šä½è§„åˆ™çš„ç†è§£ã€‚</p>
<h2 data-id="heading-10">æœ€å</h2>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨<code>position</code>æ—¶é‡åˆ°è¿‡ç‰¹æ®Šå‘ç‚¹ï¼Œæˆ–è€…æœ‰æ›´å·§å¦™çš„ç”¨æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï½ ä¹Ÿå¯ä»¥ç‚¹èµæ”¶è—ï¼Œä¸‹æ¬¡é‡åˆ°å®šä½é—®é¢˜ç›´æ¥ç¿»è¿™ç¯‡æŒ‡å—ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MoonBit å†è·ç¾å›½çŸ¥åç§‘æŠ€åª’ä½“å…³æ³¨ï¼šThe New Stack æ¨å‡º MoonBit Wasm ç»„ä»¶æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7572002432450920457</link>    <guid>https://juejin.cn/post/7572002432450920457</guid>    <pubDate>2025-11-13T10:29:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572002432450920457" data-draft-id="7572016447804719130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MoonBit å†è·ç¾å›½çŸ¥åç§‘æŠ€åª’ä½“å…³æ³¨ï¼šThe New Stack æ¨å‡º MoonBit Wasm ç»„ä»¶æ•™ç¨‹"/> <meta itemprop="keywords" content="WebAssembly,Web Components,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-11-13T10:29:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MoonBit"/> <meta itemprop="url" content="https://juejin.cn/user/3609050528885565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MoonBit å†è·ç¾å›½çŸ¥åç§‘æŠ€åª’ä½“å…³æ³¨ï¼šThe New Stack æ¨å‡º MoonBit Wasm ç»„ä»¶æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3609050528885565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MoonBit
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:29:03.000Z" title="Thu Nov 13 2025 10:29:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸‰æ¬¡ç™»ä¸Šç¾å›½çŸ¥åæŠ€æœ¯åª’ä½“ï¼MoonBit åˆå›  WebAssembly ç»„ä»¶æ¨¡å‹å¼•å‘å…³æ³¨ï¼</h2>
<blockquote>
<p>åœ¨æµ·å¤–æŠ€æœ¯ç¤¾åŒºçš„æŒç»­å…³æ³¨ä¸‹ï¼ŒMoonBit åˆä¸€æ¬¡ç™»ä¸Šäº†ç¾å›½çŸ¥åå¼€å‘è€…åª’ä½“ The New Stackã€‚è¿™æ˜¯ TNS ç¬¬ä¸‰æ¬¡æŠ¥é“ MoonBitã€‚æœ¬ç¯‡æ–‡ç« ä»¥ â€œå¦‚ä½•ç”¨ MoonBit æ„å»º WebAssembly Componentsâ€ ä¸ºä¸»é¢˜ï¼Œä»å·¥å…·é“¾ã€æ¥å£å®šä¹‰åˆ° Wasm æ–‡ä»¶ç”Ÿæˆï¼Œå¯¹ MoonBit çš„æŠ€æœ¯èƒ½åŠ›åšäº†è¯¦ç»†çš„è§£è¯»:<a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fhow-to-build-webassembly-components-with-the-moonbit-language%2F" target="_blank" title="https://thenewstack.io/how-to-build-webassembly-components-with-the-moonbit-language/" ref="nofollow noopener noreferrer">thenewstack.io/how-to-builâ€¦</a>
ï¼‰</p>
</blockquote>
<p>ä»¥ä¸‹ä¸ºåŸæ–‡ç¿»è¯‘</p>
<p>MoonBit æ˜¯ä¸€é—¨ç°ä»£åŒ–è¯­è¨€ï¼Œä¹Ÿæ˜¯ä¸€å¥—å·¥ä½œæµï¼Œæ—¨åœ¨æ„å»ºé«˜æ•ˆçš„ WebAssembly é¡¹ç›®ï¼›å®ƒåŒæ ·å¯ä»¥ç¼–è¯‘åˆ° JavaScriptã€‚æˆ‘ä¸Šä¸€æ¬¡å…³æ³¨ MoonBit æ˜¯åœ¨ 2024 å¹´ 6 æœˆï¼Œå› æ­¤è¿™æ¬¡æˆ‘æƒ³çœ‹çœ‹å®ƒåœ¨ Wasm ä½¿ç”¨æ–¹é¢æ˜¯å¦æœ‰æ‰€è¿›å±•ã€‚ï¼ˆé¡ºå¸¦ä¸€æï¼šå¦‚æœæ‚¨ä»ç„¶å¯¹WebAssemblyçš„æ„ä¹‰æ„Ÿåˆ°é™Œç”Ÿï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººã€‚ï¼‰</p>
<p>ç°åœ¨ï¼ŒMoonBit ä¹Ÿå¯ä»¥åœ¨ WebAssembly çš„ç»„ä»¶æ¨¡å‹è¿è¡Œï¼ˆWeb Component Modelï¼‰ï¼Œæˆ‘ä»¬ç¨åå°†å¯¹æ­¤è¿›è¡Œæ¢è®¨ã€‚æˆ‘ä»¬å°†å®ç°è¿™ä¸€ç‚¹ï¼Œç„¶åæ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆã€‚æœ¬æ–‡ä¸­åªæ‰“ç®—å®ç°ä¸€ä¸ªç®€å•çš„åŠ æ³•æ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">MoonBit è¯­è¨€å¿«é€Ÿå›é¡¾</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹ MoonBit è¯­è¨€ã€‚</p>
<p>å½“ç„¶ï¼Œä» Hello World å¼€å§‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_hello</span>() <span class="hljs-punctuation">-&gt;</span> Unit { 
 <span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"Hello, world!"</span>) 
}
</code></pre>
<p>å”¯ä¸€ç¨å¾®è®©äººæ„å¤–çš„æ˜¯ <code>Unit</code> ï¼Œä½†å®ƒå…¶å®åªæ˜¯ MoonBit ä¸­ç­‰ä»·äº <code>void</code> çš„ä¸€ç±»å¯¹è±¡ã€‚</p>
<p>è¿™æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add3</span>(x : Int, y : Int, z : Int) <span class="hljs-punctuation">-&gt;</span> Int { 
 x + y + z 
}
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªâ€œtop levelâ€ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMoonBit å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹ã€‚å¦‚æœä½ æƒ³æ›´æ·±å…¥äº†è§£è¿™é—¨è¯­è¨€ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ•™ç¨‹ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.moonbitlang.com%2Fen%2Flatest%2Flanguage%2Findex.html" target="_blank" title="https://docs.moonbitlang.com/en/latest/language/index.html" ref="nofollow noopener noreferrer">å®˜æ–¹æ•™ç¨‹</a></p>
<hr/>
<h3 data-id="heading-2">WebAssembly ç»„ä»¶æ¨¡å‹é›†æˆ</h3>
<p>æˆ‘ä»¬å…³æ³¨çš„æ˜¯ WebAssembly çš„é›†æˆã€‚MoonBit ä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcomponent-model.bytecodealliance.org%2F" target="_blank" title="https://component-model.bytecodealliance.org/" ref="nofollow noopener noreferrer">WebAssembly ç»„ä»¶æ¨¡å‹</a> ååŒå·¥ä½œï¼Œè¿™å‡è½»äº†å®ç°åŸºæœ¬åŠŸèƒ½æ—¶çš„ç—›è‹¦ã€‚ç»„ä»¶æ¨¡å‹é€šå¸¸æ˜¯è¯­è¨€é¡¹ç›®çš„ä¸‹ä¸€é˜¶æ®µï¼Œå› ä¸ºå®ƒä»¬å›ºå®šäº†æ¥å£ã€å¥‘çº¦ä»¥åŠæ•°æ®ç±»å‹ã€‚</p>
<p>é€»è¾‘ä¸Šï¼Œä¸€ä¸ªç»„ä»¶æ˜¯å¯ä»¥åŒ…å«æ ¸å¿ƒæ¨¡å—å’Œ/æˆ–å…¶ä»–å­ç»„ä»¶çš„ç»“æ„ã€‚ç»„ä»¶ä½¿ç”¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">WebAssembly Interface Typesï¼ˆWITï¼‰</a>æ¥æè¿°å…¶ä¸­æ¨¡å—å’Œå­ç»„ä»¶çš„æ¥å£ã€‚å¦‚æœè¿™å¬èµ·æ¥è¿‡äºå­¦æœ¯åŒ–ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œå®ƒåœ¨å®é™…ç”Ÿäº§å·¥å…·é“¾ä¸­å®Œå…¨èƒ½æ­£å¸¸å·¥ä½œã€‚æœ¬æ–‡çš„å†…å®¹ä¸»è¦åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.moonbitlang.com%2Fzh-cn%2Flatest%2Ftoolchain%2Fwasm%2Fcomponent-model-tutorial.html" target="_blank" title="https://docs.moonbitlang.com/zh-cn/latest/toolchain/wasm/component-model-tutorial.html" ref="nofollow noopener noreferrer">MoonBit çš„ WebAssembly ç»„ä»¶æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-3">å®‰è£…æ„å»ºç»„ä»¶éœ€è¦çš„å·¥å…·é“¾</h3>
<p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ <code>wit-bindgen</code> CLI å·¥å…·ï¼Œå®ƒç”¨äºç”Ÿæˆå…¼å®¹ WIT çš„ç»‘å®šæ–‡ä»¶ï¼›è¿™ä¸ªå·¥å…·æ˜¯åŸºäº Rust çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦å®‰è£… Cargoã€‚åªè¦å®‰è£… Rust å°±èƒ½è·å¾— Cargoï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytecodealliance%2Fwit-bindgen" target="_blank" title="https://github.com/bytecodealliance/wit-bindgen" ref="nofollow noopener noreferrer">Wit-bindgen</a></p>
<pre><code class="hljs language-Bash" lang="Bash">curl https://sh.rustup.rs -sSf | sh
</code></pre>
<p>ï¼ˆå¦‚æœä½ ä½¿ç”¨ Homebrew å®‰è£…è¿‡ Rustï¼Œä½ å¯èƒ½éœ€è¦ç¡®è®¤æ˜¯å¦è®© rustup æ¥ç®¡ç†å¯¹ Rust çš„æ›´æ–°ã€‚æˆ‘ä¹‹å‰æ²¡æ›´æ–°å¥½å¯¼è‡´äº†æ›´å¤šçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘å»ºè®®å¸è½½ brew å®‰è£…çš„ç‰ˆæœ¬ã€‚ï¼‰</p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆè¾“å…¥ <code>cargo</code> ä»¥ç¡®è®¤ä½ æ˜¯å¦å·²ç»æ­£ç¡®å®‰è£…ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16906bdec1594c74aa1cbd7c56a49e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=fygtnRa2De5uOjAKvKcEQAypE%2B8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è™½ç„¶ç‰ˆæœ¬æœ‰ç‚¹æ—§ï¼Œä½†è¿˜èƒ½ç”¨ã€‚ç°åœ¨å®‰è£…ç»‘å®šå·¥å…·ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">cargo install wit-bindgen-cli
</code></pre>
<p>ä½ å¯èƒ½ä¼šæ”¶åˆ°æç¤ºï¼Œè¦æ±‚ä½ æŠŠ cargo çš„ bin ç›®å½•åŠ å…¥ PATHã€‚æˆ‘æ˜¯åœ¨ MacBook ä¸Šå®‰è£…ï¼Œå› æ­¤ç›´æ¥æŠŠå®ƒåŠ å…¥äº† PATHã€‚</p>
<p>ç„¶åå®‰è£…ç”¨äºç»„ä»¶çš„ Wasm å·¥å…·ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">cargo install wasm-tools
</code></pre>
<p>æ¥ç€å®‰è£… MoonBit æœ¬ä½“ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">curl -fsSL https://cli.moonbitlang.com/install/unix.sh | bash
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦è¿è¡Œä¸€ä¸ªæ–°çš„ shell æˆ–æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash"><span class="hljs-built_in">source</span> ~/.zshrc
</code></pre>
<p>ç°åœ¨ä½ å°±å¯ä»¥è¿è¡Œ Rust å¼€å‘çš„é¡¹ç›®ç»„ç»‡å·¥å…· <code>moon</code> äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80aa69d68b8941afa6ad10791e10291d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=CWennkspv8%2FvlPUUog1Le%2Beia5U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸‹æˆ‘ä»¬å°±æŠŠ Moon çš„æ•´å¥—å·¥å…·éƒ½å‡†å¤‡é½äº†ã€‚</p>
<h3 data-id="heading-4">ä½¿ç”¨ WIT æ–‡ä»¶å®šä¹‰ç¨‹åº</h3>
<p>åœ¨ç¼–å†™ MoonBit ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª WIT æ–‡ä»¶ï¼Œç”¨æ¥å£°æ˜æˆ‘ä»¬å°†åœ¨ WebAssembly ç»„ä»¶ä¸–ç•Œä¸­ä½¿ç”¨çš„æ¥å£ã€‚</p>
<p>åˆ›å»º <code>wit/world.wit</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">package docs:adder@<span class="hljs-number">0.1</span>.<span class="hljs-number">0</span>; 

interface add { 
  add: <span class="hljs-title function_ invoke__">func</span>(x: <span class="hljs-type">u32</span>, y: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>; 
} 
world adder { 
  export add; 
}
</code></pre>
<p>è¿™æ®µ WIT å£°æ˜äº†ä¸€ä¸ªç‰ˆæœ¬ä¸º <code>0.1.0</code> çš„ <code>docs:adder</code> åŒ…ï¼Œå¹¶å®šä¹‰äº†åä¸º <code>add</code> çš„æ¥å£ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ¥æ”¶å’Œè¿”å› <code>u32</code> çš„å‡½æ•°ï¼ˆåœ¨ MoonBit ä¸­å¯¹åº” UIntï¼‰ã€‚WIT ä¸­çš„ <code>world</code> æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥æ”¾ç½®æ‰€æœ‰ç»„ä»¶éœ€è¦çš„éƒ¨åˆ†ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ª add æ¥å£ã€‚</p>
<p>UInt :<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.moonbitlang.com%2Fen%2Flatest%2Flanguage%2Ffundamentals.html%23number" target="_blank" title="https://docs.moonbitlang.com/en/latest/language/fundamentals.html#number" ref="nofollow noopener noreferrer">docs.moonbitlang.com/en/latest/lâ€¦</a></p>
<p>ç°åœ¨æˆ‘ä»¬ä¸º WIT ç”Ÿæˆ MoonBit ç»“æ„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">wit-bindgen moonbit wit/world.wit --out-dir . \
    --derive-eq \
    --derive-show \
    --derive-error
</code></pre>
<p>ç”Ÿæˆåä½ åº”è¯¥ä¼šçœ‹åˆ°ç”Ÿæˆçš„ <code>.mbt</code> æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d535d3166aaa4e6cb44627dfb54d21ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=3jVjbK2273B5yqqpFVBW4x7cH0c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ‚¨å¯èƒ½å·²ç»çŒœåˆ° <code>.mbt</code> åç¼€æ˜¯ MoonBit æ–‡ä»¶ã€‚ä½†å½“ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£å†™ MoonBit ä»£ç ã€‚å¦‚æœç°åœ¨å°è¯•æ„å»º Wasm ç›®æ ‡ï¼Œä¼šæ”¶åˆ°å¤§é‡è­¦å‘Šã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/802dfdd571674cc3a3bda3adcc2df7d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=lIWJ8NDGLqVCfXYDEi5r%2FuLBb64%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æŸ¥çœ‹ç”Ÿæˆçš„ stubï¼Œä½ ä¼šå‘ç°å…¶ä¸­æ²¡æœ‰å®é™…å®ç°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04d8d553307049ef9fa217e8a0cdf89a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=Amp4j%2BSZ7VCIECeBZu8O1MEmr14%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç®€å•æ¥è¯´ï¼Œstub é‡Œå¹¶æ²¡æœ‰çœŸæ­£çš„å®ç°ï¼Œåªæ˜¯æ¥å£å®šä¹‰ã€‚å³ä½¿ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢æœ€å°çš„ MoonBit æ•™ç¨‹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è½»æ¾å®Œæˆå®ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b26a340ab8f48ab963551c4eb148c88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=1ZWSVW6rc7slXK%2B7CxQCM8%2FGNPI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸»é…ç½®æ–‡ä»¶ <code>gen/moon.pkg.json</code> ä¼šåŒ…å«ç›¸å…³è·¯å¾„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-5">æ„å»º WebAssembly æ¨¡å—ä¸ç»„ä»¶</h3>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ„å»ºä¸» WebAssembly æ¨¡å—ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">moon build --target wasm
</code></pre>
<p>æ„å»ºåä¼šç”Ÿæˆæ–°çš„ <code>target</code> ç›®å½•ï¼Œå…¶ä¸­åŒ…å« Wasm æ–‡ä»¶ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e31007b9db949b29b43061bf301abb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=01JYpFbHLi%2FpBUtWsHi09xypNNU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ£€æŸ¥ä¸€ä¸‹ <code>gen.wasm</code> æ˜¯å¦æœ‰æ•ˆï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cdccb01f3b44fbb92cb3965d6b574bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=1uqnusZTTekEiLfh%2FQw2UWkuCD4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¾ˆå¥½ï¼Œå®ƒæ˜¯åˆæ³•çš„ WebAssemblyã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶æ¨¡å‹ä¸­æ­£ç¡®åœ°å°è£…å®ƒï¼š</p>
<pre><code class="hljs language-rust" lang="rust">wasm-tools component embed wit target/wasm/release/build/gen/gen.wasm \
  --encoding utf16 \
  --output adder.wasm
</code></pre>
<p>ç„¶åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wasm-tools component new adder.wasm --output adder.component.wasm
</code></pre>
<p>æ­¤æ—¶ç”Ÿæˆçš„æ–‡ä»¶å·²ä¸åŒäºæ™®é€šçš„ Wasm æ¨¡å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf9cb02f54544fb295ad899ee4e5b6d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=CX9Tb6pb5xIWJhBKcpOBAidYWVM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Wasmtime æ¥éªŒè¯æ˜¯å¦æˆåŠŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa083bc02ebe4eb3b9bc6c745bd959fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=0hyLJI8ONFwa2qsOVOncHgNRccw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœ Wasmtime æŠ¥é”™ï¼Œå¯ä»¥ä»è¿™é‡Œå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">curl https://wasmtime.dev/install.sh -sSf | bash
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„å®¿ä¸»ç¨‹åºæ¥è¿›ä¸€æ­¥éªŒè¯ <code>.wasm</code> æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.moonbitlang.com%2Fzh-cn%2Flatest%2Ftoolchain%2Fwasm%2Fcomponent-model-tutorial.html%23using-the-example-host" target="_blank" title="https://docs.moonbitlang.com/zh-cn/latest/toolchain/wasm/component-model-tutorial.html#using-the-example-host" ref="nofollow noopener noreferrer">docs.moonbitlang.com/zh-cn/latesâ€¦</a></p>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>æˆ‘æœ¬æ¥æ˜¯æƒ³çœ‹çœ‹ MoonBit çš„è¿›å±•ï¼Œç»“æœå´å‘ç°äº† WebAssembly ç»„ä»¶æ¨¡å‹ã€‚è¿™å°±æ˜¯å¼€å‘è€…çš„æ—…ç¨‹â€”â€”æ€»æœ‰ä¸€åº§æ›´é«˜çš„å±±ã€‚</p>
<p>åœ¨æœªæ¥çš„æŸä¸ªé˜¶æ®µï¼ŒMoonBit éœ€è¦åœ¨å¯¹ç»„ä»¶æ¨¡å‹çš„ç›´æ¥æ”¯æŒæ–¹é¢æŠ•å…¥æ›´å¤šå·¥ä½œï¼›å¦åˆ™ï¼Œè¿™ç§åå­¦æœ¯åŒ–çš„å¤æ‚åº¦å°†ä½¿ Wasm å§‹ç»ˆéš¾ä»¥è·å¾—æ›´å¹¿æ³›çš„é‡‡ç”¨ï¼ˆæˆ–ä½¿å…¶æ›´è¶‹è¿‘äº Rust çš„ç”Ÿæ€ï¼‰ã€‚ç„¶è€Œï¼Œè¿™ç§æ¨¡å¼ä¸å…¶ä»–åŸºäº stub çš„æ¨¡å‹é¢‡ä¸ºç›¸ä¼¼â€”â€”å°½ç®¡ä»¥ WSDL ä½œä¸ºç±»æ¯”å¹¶éæœ€æ°å½“â€”â€”ä½†åœ¨æˆç†Ÿçš„å·¥å…·é“¾ä¸­ï¼Œå®ƒä»¬ä¾ç„¶èƒ½å¤Ÿè‰¯å¥½è¿ä½œï¼Œå³ä¾¿æ˜¯ç”±LLMé©±åŠ¨çš„å·¥å…·é“¾äº¦æ˜¯å¦‚æ­¤ã€‚</p>
<h2 data-id="heading-7">MoonBit è¢«æ”¶å½•å…¥ã€ŠTop Programming Languages of Late 2025ã€‹ï¼</h2>
<p>åœ¨ MysticMatrix å‘å¸ƒçš„
ã€ŠTop Programming Languages of Late 2025ã€‹
ä¸€æ–‡ä¸­ï¼ŒMoonBit ä¸ Mojoã€Rust ä¸€åŒè¢«åˆ—ä¸º 2025 å¹´åº¦å€¼å¾—å…³æ³¨çš„æ–°å…´è¯­è¨€ä¹‹ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d580fb24b6441cb9683da3a366edf7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9vbkJpdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634543&amp;x-signature=aRqW4UeIwB59TCw2lbCtVj%2F45Ac%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>éå¸¸æ„Ÿè°¢ç¤¾åŒºçš„æ”¯æŒï¼Œæˆ‘ä»¬ä¼šç»§ç»­æå‡ç¼–è¯‘å™¨ä¸å·¥å…·é“¾ï¼Œä¸ºå¤§å®¶å¸¦æ¥æ›´å¥½çš„å¼€å‘ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â€œå¤šä½™çš„â€å›è½¦ï¼šä»IDEçš„è‡ªåŠ¨æ¢è¡Œçª¥è§è½¯ä»¶å·¥ç¨‹çš„è§„èŒƒä¸åä½œ]]></title>    <link>https://juejin.cn/post/7571815997068083240</link>    <guid>https://juejin.cn/post/7571815997068083240</guid>    <pubDate>2025-11-13T10:31:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997068083240" data-draft-id="7572020278386688034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â€œå¤šä½™çš„â€å›è½¦ï¼šä»IDEçš„è‡ªåŠ¨æ¢è¡Œçª¥è§è½¯ä»¶å·¥ç¨‹çš„è§„èŒƒä¸åä½œ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T10:31:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â€œå¤šä½™çš„â€å›è½¦ï¼šä»IDEçš„è‡ªåŠ¨æ¢è¡Œçª¥è§è½¯ä»¶å·¥ç¨‹çš„è§„èŒƒä¸åä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:31:24.000Z" title="Thu Nov 13 2025 10:31:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ªäººåç‰‡
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38e29b9b3168402984eb27e55d2e954b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634684&amp;x-signature=57YenSbKlw8jgRJQSV55uKR7JoI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ğŸ“ä½œè€…ç®€ä»‹ï¼šjavaé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…
ğŸŒä¸ªäººä¸»é¡µï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44976692%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/weixin_44976692?type=blog" ref="nofollow noopener noreferrer">ç å†œé˜¿è±ª</a>
ğŸ“å·¥ä½œå®¤ï¼šæ–°ç©ºé—´ä»£ç å·¥ä½œå®¤ï¼ˆæä¾›å„ç§è½¯ä»¶æœåŠ¡)
ğŸ’Œä¸ªäººé‚®ç®±ï¼š[<a href="https://link.juejin.cn?target=mailto%3A2435024119%40qq.com" target="_blank" title="mailto:2435024119@qq.com" ref="nofollow noopener noreferrer">2435024119@qq.com</a>]
ğŸ“±ä¸ªäººå¾®ä¿¡ï¼š15279484656
ğŸŒä¸ªäººå¯¼èˆªç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.forff.top" target="_blank" title="http://www.forff.top" ref="nofollow noopener noreferrer">www.forff.top</a>
ğŸ’¡åº§å³é“­ï¼šæ€»æœ‰äººè¦èµ¢ã€‚ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯æˆ‘å‘¢ï¼Ÿ</p>
</blockquote>
<ul>
<li>ä¸“æ å¯¼èˆªï¼š</li>
</ul>
<blockquote>
<p>ç å†œé˜¿è±ªç³»åˆ—ä¸“æ å¯¼èˆª
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44976692%2Fcategory_12053689.html%3Fspm%3D1001.2014.3001.5482" target="_blank" title="https://blog.csdn.net/weixin_44976692/category_12053689.html?spm=1001.2014.3001.5482" ref="nofollow noopener noreferrer">é¢è¯•ä¸“æ </a>ï¼šæ”¶é›†äº†javaç›¸å…³é«˜é¢‘é¢è¯•é¢˜ï¼Œé¢è¯•å®æˆ˜æ€»ç»“ğŸ»ğŸ‰ğŸ–¥ï¸
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44976692%2Fcategory_12561762.html%3Fspm%3D1001.2014.3001.5482" target="_blank" title="https://blog.csdn.net/weixin_44976692/category_12561762.html?spm=1001.2014.3001.5482" ref="nofollow noopener noreferrer">Spring5ç³»åˆ—ä¸“æ </a>ï¼šæ•´ç†äº†Spring5é‡è¦çŸ¥è¯†ç‚¹ä¸å®æˆ˜æ¼”ç»ƒï¼Œæœ‰æ¡ˆä¾‹å¯ç›´æ¥ä½¿ç”¨ğŸš€ğŸ”§ğŸ’»
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44976692%2Fcategory_12580216.html%3Fspm%3D1001.2014.3001.5482" target="_blank" title="https://blog.csdn.net/weixin_44976692/category_12580216.html?spm=1001.2014.3001.5482" ref="nofollow noopener noreferrer">Redisä¸“æ </a>ï¼šRedisä»é›¶åˆ°ä¸€å­¦ä¹ åˆ†äº«ï¼Œç»éªŒæ€»ç»“ï¼Œæ¡ˆä¾‹å®æˆ˜ğŸ’ğŸ“ğŸ’¡
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44976692%2Fcategory_12533392.html%3Fspm%3D1001.2014.3001.5482" target="_blank" title="https://blog.csdn.net/weixin_44976692/category_12533392.html?spm=1001.2014.3001.5482" ref="nofollow noopener noreferrer">å…¨æ ˆç³»åˆ—ä¸“æ </a>ï¼šæµ·çº³ç™¾å·æœ‰å®¹ä¹ƒå¤§ï¼Œå¯èƒ½ä½ æƒ³è¦çš„ä¸œè¥¿é‡Œé¢éƒ½æœ‰ğŸ¤¸ğŸŒ±ğŸš€</p>
</blockquote>
<p>@<a href="https://link.juejin.cn?target=%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<h2 data-id="heading-0">â€œå¤šä½™çš„â€å›è½¦ï¼šä»IDEçš„è‡ªåŠ¨æ¢è¡Œçª¥è§è½¯ä»¶å·¥ç¨‹çš„è§„èŒƒä¸åä½œ</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸€ä¸ªä»¤äººå›°æƒ‘çš„â€œBugâ€</h3>
<p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œä½ ä¸€å®šå¯¹é›†æˆå¼€å‘ç¯å¢ƒæ— æ¯”ç†Ÿæ‚‰ã€‚ç„¶è€Œï¼ŒæŸäº›æ—¶å€™ï¼Œå®ƒä»¬çš„ä¸€äº›â€œè‡ªä½œä¸»å¼ â€çš„è¡Œä¸ºä¼šè®©æˆ‘ä»¬æ„Ÿåˆ°å›°æƒ‘ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªåœºæ™¯ä½ æ˜¯å¦è§‰å¾—çœ¼ç†Ÿï¼š</p>
<ol>
<li>ä½ åœ¨IntelliJ IDEAä¸­ç¼–å†™ä»£ç ï¼Œæ–‡ä»¶æœ€åä¸€è¡Œæ˜¯<code>}</code>ï¼Œå…‰æ ‡ç´§è·Ÿåœ¨å®ƒåé¢ã€‚</li>
<li>ä½ ä¸“æ³¨åœ°å†™å®Œäº†æ‰€æœ‰é€»è¾‘ï¼Œæ²¡æœ‰åœ¨æœ€åæŒ‰å›è½¦é”®ã€‚</li>
<li>å½“ä½ åˆ‡æ¢åˆ°æµè§ˆå™¨æŸ¥çœ‹æ–‡æ¡£ï¼Œæˆ–æ˜¯ç‚¹å¼€å¦ä¸€ä¸ªèŠå¤©çª—å£ä¹‹å...</li>
<li>...å†åˆ‡å›IDEAï¼Œå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿäº†ï¼šå…‰æ ‡ç«Ÿç„¶è·‘åˆ°äº†ä¸‹ä¸€è¡Œï¼æ–‡ä»¶æœ«å°¾è«åå…¶å¦™åœ°å¤šäº†ä¸€ä¸ªç©ºè¡Œï¼Ÿ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6fbc62e951845be88756900f238ccb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634684&amp;x-signature=keWuzO9MxQxDD43ZYJUFpSLRc7Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åˆé‡æ­¤æ™¯ï¼Œä½ å¯èƒ½ä¼šå˜€å’•ï¼šâ€œæˆ‘æ²¡æŒ‰å›è½¦å•Šï¼Ÿéš¾é“æ˜¯IDEå‡ºBugäº†ï¼Ÿâ€ æˆ–è€…æ€€ç–‘è‡ªå·±ä¸å°å¿ƒç¢°åˆ°äº†ä»€ä¹ˆé”®ã€‚</p>
<p>è¯·æ”¾å¿ƒï¼Œè¿™ä¸æ˜¯Bugã€‚è¿™èƒŒåï¼Œéšè—ç€ä¸€ä¸ªè´¯ç©¿äº†è®¡ç®—æœºå‘å±•å²ã€æ¶‰åŠæ“ä½œç³»ç»Ÿå·®å¼‚ã€ç‰ˆæœ¬æ§åˆ¶å“²å­¦ä»¥åŠè½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µçš„â€œå¤è€â€æ•…äº‹ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™ä¸€ç°è±¡ï¼Œæ­ç¤ºå…¶åŸç†ï¼Œå¹¶è®ºè¯ä¸ºä½•è¿™ä¸ªçœ‹ä¼¼å¾®ä¸è¶³é“çš„ç»†èŠ‚ï¼Œåœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€ç« ï¼šè¿½æ ¹æº¯æºâ€”â€”æ–‡æœ¬æ–‡ä»¶çš„â€œè¡Œâ€ä¸â€œå°¾â€</h3>
<p>è¦ç†è§£è¿™ä¸ªç°è±¡ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å›åˆ°è®¡ç®—æœºçš„æ—©æœŸæ—¶ä»£ï¼Œç†è§£ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¦‚å¿µï¼šæ–‡æœ¬æ–‡ä»¶ä¸­çš„â€œä¸€è¡Œâ€æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿ</p>
<h4 data-id="heading-3">1.1 æ¢è¡Œç¬¦çš„â€œå—åŒ—æˆ˜äº‰â€</h4>
<p>åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œï¼Œçº¯æ–‡æœ¬æ–‡ä»¶ç”±å­—ç¬¦åºåˆ—ç»„æˆã€‚ä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•è¡¨ç¤ºä¸€è¡Œçš„ç»“æŸï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œå†å²ä¸Šå‡ºç°äº†ä¸¤å¤§é˜µè¥ï¼Œç»™å‡ºäº†ä¸åŒçš„ç­”æ¡ˆï¼š</p>
<ul>
<li>CR+LF (Carriage Return + Line Feed, <code>\r\n</code>): æºäºæ—©æœŸçš„ç”µä¼ æ‰“å­—æœºã€‚<code>CR</code> å°†æ‰“å°å¤´ç§»å›è¡Œé¦–ï¼Œ<code>LF</code> å°†çº¸å¼ å‘ä¸Šç§»åŠ¨ä¸€è¡Œã€‚å¾®è½¯çš„DOSå’Œåæ¥çš„Windowsç³»ç»Ÿç»§æ‰¿äº†è¿™ä¸€ä¼ ç»Ÿï¼Œå°†å…¶ä½œä¸ºè¡Œç»“æŸæ ‡å¿—ã€‚</li>
<li>LF (Line Feed, <code>\n</code>): Unixå’Œç±»Unixç³»ç»Ÿï¼ˆåŒ…æ‹¬Linux, macOSï¼‰åˆ™é‡‡ç”¨äº†æ›´ç®€æ´çš„<code>LF</code>ä½œä¸ºè¡Œç»“æŸç¬¦ã€‚</li>
</ul>
<p>è¿™å°±å¯¼è‡´äº†åœ¨Windowsä¸Šåˆ›å»ºçš„æ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨Unixç³»ç»Ÿä¸‹æ‰“å¼€æ—¶ï¼Œå¯èƒ½ä¼šçœ‹åˆ°æ¯è¡Œç»“å°¾å¤šäº†ä¸ª<code>^M</code>å­—ç¬¦ï¼ˆå³CRï¼‰ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<h4 data-id="heading-4">1.2 POSIXæ ‡å‡†ä¸â€œæœ€åä¸€è¡Œâ€çš„å“²å­¦</h4>
<p>POSIXæ ‡å‡†ä¸ºUnix-likeç³»ç»Ÿå®šä¹‰äº†ä¸€ç³»åˆ—è§„èŒƒï¼Œå…¶ä¸­æ˜ç¡®è¦æ±‚ï¼š</p>
<blockquote>
<p>[3.206 Line] A sequence of zero or more non-  characters plus a terminating  character.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šä¸€è¡Œæ˜¯ç”±é›¶ä¸ªæˆ–å¤šä¸ªéæ¢è¡Œå­—ç¬¦ï¼ŒåŠ ä¸Šä¸€ä¸ªç»ˆæ­¢çš„æ¢è¡Œå­—ç¬¦æ‰€æ„æˆçš„åºåˆ—ã€‚</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿå®ƒæ„å‘³ç€åœ¨ä¸€ä¸ªç¬¦åˆæ ‡å‡†çš„æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½å¿…é¡»ä»¥æ¢è¡Œç¬¦ç»“æŸï¼ŒåŒ…æ‹¬æœ€åä¸€è¡Œã€‚</p>
<p>è¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹åç›´è§‰ã€‚ä¸€ä¸ªæ–‡ä»¶æœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œå¹¶ä¸ä»£è¡¨ä¸€ä¸ªâ€œç©ºè¡Œâ€ã€‚ä¸€ä¸ªâ€œç©ºè¡Œâ€å®é™…ä¸Šæ˜¯ä¸€ä¸ªä»…åŒ…å«æ¢è¡Œç¬¦çš„è¡Œã€‚è€Œæ–‡ä»¶æœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œå…¶çœŸæ­£å«ä¹‰æ˜¯ï¼šâ€œè¿™æ˜¯æœ¬æ–‡ä»¶çš„æœ€åä¸€ä¸ªè¡Œç»“æŸæ ‡å¿—â€ã€‚å®ƒæ ‡å¿—ç€ä¸€ä¸ªå®Œæ•´ã€ç»ˆç»“çš„æ–‡ä»¶ç»“æ„ã€‚</p>
<p>ä¸¾ä¾‹è¯´æ˜ï¼š</p>
<p>å‡è®¾æ–‡ä»¶å†…å®¹ä¸º <code>Hello</code>ï¼Œæ²¡æœ‰å°¾éšæ¢è¡Œç¬¦ã€‚
åœ¨éµå¾ªæ ‡å‡†çš„å·¥å…·çœ‹æ¥ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯â€œä¸å®Œæ•´â€çš„â€”â€”å®ƒçš„ä¸€è¡Œæ²¡æœ‰ç»“æŸã€‚</p>
<p>è€Œå†…å®¹ä¸º <code>Hello\n</code> çš„æ–‡ä»¶ï¼Œæ‰æ˜¯æ ¼å¼æ­£ç¡®çš„ã€‚</p>
<h3 data-id="heading-5">ç¬¬äºŒç« ï¼šç°ä»£IDEçš„â€œè´´å¿ƒâ€å®ˆæŠ¤è€…</h3>
<p>ç†è§£äº†å†å²èƒŒæ™¯å’Œæ ‡å‡†ï¼Œæˆ‘ä»¬å†å›åˆ°ç°ä»£çš„IntelliJ IDEAï¼ˆä»¥åŠå…¶ä»–ä¸»æµIDE/ç¼–è¾‘å™¨ï¼Œå¦‚VS Code, Sublime Textç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-6">2.1 é‚£ä¸ªå…³é”®çš„é…ç½®é¡¹</h4>
<p>IDEAä¸­æœ‰ä¸€ä¸ªé»˜è®¤å¼€å¯çš„è®¾ç½®ï¼Œå®ƒå°±æ˜¯é€ æˆæ–‡ç« å¼€å¤´é‚£ä¸ªâ€œå¥‡æ€ªç°è±¡â€çš„â€œå…ƒå‡¶â€ã€‚</p>
<ul>
<li>è·¯å¾„ï¼š <code>File -&gt; Settings -&gt; Editor -&gt; General</code> (Windows/Linux) æˆ– <code>IntelliJ IDEA -&gt; Preferences -&gt; Editor -&gt; General</code> (macOS)</li>
<li>é€‰é¡¹ï¼š <code>Ensure every saved file ends with a line feed</code> (æˆ–ç±»ä¼¼è¡¨è¿°ï¼Œå¦‚ <code>On Save: Ensure line feed at file end</code>)
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beb60c07aa59490c885ada97c20d7574~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634684&amp;x-signature=dLpO9jqkGAHU1JZoHNtdXWaxmv0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<p>å½“è¿™ä¸ªé€‰é¡¹è¢«å‹¾é€‰æ—¶ï¼ŒIDEAä¼šåœ¨ä½ ä¿å­˜æ–‡ä»¶æˆ–è§¦å‘è‡ªåŠ¨ä¿å­˜ï¼ˆä¾‹å¦‚å¤±å»ç„¦ç‚¹ã€åˆ‡æ¢æ ‡ç­¾é¡µï¼‰æ—¶ï¼Œè‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶æœ«å°¾æ˜¯å¦æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šé™é»˜åœ°ä¸ºä½ æ·»åŠ ä¸€ä¸ªã€‚</p>
<p>æ‰€ä»¥ï¼Œæ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ä½ ç¼–ç æ—¶ï¼šå†…å­˜ä¸­çš„æ–‡ä»¶å†…å®¹æ²¡æœ‰å°¾éšæ¢è¡Œç¬¦ã€‚</li>
<li>ä½ åˆ‡æ¢çª—å£ï¼šIDEAè§¦å‘è‡ªåŠ¨ä¿å­˜æœºåˆ¶ã€‚</li>
<li>ä¿å­˜å‰æ£€æŸ¥ï¼šIDEAå‘ç°æ–‡ä»¶æœ«å°¾ç¼ºå°‘æ¢è¡Œç¬¦ã€‚</li>
<li>è‡ªåŠ¨ä¿®æ­£ï¼šIDEAè¿½åŠ ä¸€ä¸ª<code>LF</code>ï¼ˆ<code>\n</code>ï¼‰å­—ç¬¦åˆ°æ–‡ä»¶æœ«å°¾ã€‚</li>
<li>ä½ åˆ‡å›IDEAï¼šå› ä¸ºæ–‡ä»¶æœ«å°¾ç°åœ¨æœ‰äº†ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå…‰æ ‡è‡ªç„¶å°±ä½äºäº†è¿™ä¸ªâ€œæ–°çš„ä¸€è¡Œâ€çš„å¼€å¤´ã€‚ä½ çœ‹åˆ°çš„ï¼Œå°±æ˜¯å…‰æ ‡â€œè‡ªåŠ¨â€æ¢è¡Œäº†ã€‚</li>
</ol>
<h4 data-id="heading-7">2.2 ä»£ç ç¤ºä¾‹ï¼šçœ¼è§ä¸ºå®</h4>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå·¥å…·æ¥ç›´è§‚åœ°éªŒè¯è¿™ä¸€è¡Œä¸ºã€‚</p>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ²¡æœ‰å°¾éšæ¢è¡Œç¬¦çš„æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ echo -n æ¥æŠ‘åˆ¶é»˜è®¤æ·»åŠ çš„æ¢è¡Œç¬¦</span>
<span class="hljs-built_in">echo</span> -n <span class="hljs-string">"public class Test {}"</span> &gt; no_newline.java
</code></pre>
<p>ä½¿ç”¨ <code>hexdump</code> æˆ– <code>od</code> æŸ¥çœ‹å…¶äºŒè¿›åˆ¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">hexdump -C no_newline.java
</code></pre>
<p>è¾“å‡ºä¼šç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-number">00000000</span>  <span class="hljs-number">70</span> <span class="hljs-number">75</span> <span class="hljs-number">62</span> 6c <span class="hljs-number">69</span> <span class="hljs-number">63</span> <span class="hljs-number">20</span> <span class="hljs-number">63</span>  6c <span class="hljs-number">61</span> <span class="hljs-number">73</span> <span class="hljs-number">73</span> <span class="hljs-number">20</span> <span class="hljs-number">54</span> <span class="hljs-number">65</span> <span class="hljs-number">73</span>  |<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Tes</span>|
<span class="hljs-number">00000010</span>  <span class="hljs-number">74</span> <span class="hljs-number">20</span> 7b <span class="hljs-number">7d</span>                                       |t {}.|
<span class="hljs-number">00000014</span>
</code></pre>
<p>æ³¨æ„ï¼Œæœ€åä¸€ä½æ˜¯ <code>7d</code> (<code>}</code>)ï¼Œåé¢æ²¡æœ‰ <code>0a</code> ï¼ˆ<code>\n</code>ï¼‰ã€‚</p>
<p>ç°åœ¨ï¼Œç”¨IDEAæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œç›´æ¥åˆ‡æ¢çª—å£å†åˆ‡å›æ¥ï¼Œç„¶åä¿å­˜ã€‚æˆ–è€…ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹ï¼Œæˆ‘ä»¬ç”¨ <code>echo</code> æ­£å¸¸åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥æ¨¡æ‹Ÿï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"public class Test {}"</span> &gt; with_newline.java
hexdump -C with_newline.java
</code></pre>
<p>è¾“å‡ºä¼šç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-number">00000000</span>  <span class="hljs-number">70</span> <span class="hljs-number">75</span> <span class="hljs-number">62</span> 6c <span class="hljs-number">69</span> <span class="hljs-number">63</span> <span class="hljs-number">20</span> <span class="hljs-number">63</span>  6c <span class="hljs-number">61</span> <span class="hljs-number">73</span> <span class="hljs-number">73</span> <span class="hljs-number">20</span> <span class="hljs-number">54</span> <span class="hljs-number">65</span> <span class="hljs-number">73</span>  |<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Tes</span>|
<span class="hljs-number">00000010</span>  <span class="hljs-number">74</span> <span class="hljs-number">20</span> 7b <span class="hljs-number">7d</span> 0a                                    |t {}.|
<span class="hljs-number">00000015</span>
</code></pre>
<p>çœ‹ï¼Œæœ€åä¸€ä½æ˜¯ <code>0a</code> (<code>\n</code>)ï¼è¿™å°±æ˜¯IDEAè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ çš„ã€‚</p>
<h3 data-id="heading-8">ç¬¬ä¸‰ç« ï¼šä¸ºä½•è¦â€œå¤šæ­¤ä¸€ä¸¾â€ï¼Ÿâ€”â€”å°¾éšæ¢è¡Œç¬¦çš„ç°ä»£æ„ä¹‰</h3>
<p>å¦‚æœä»…ä»…æ˜¯éµå¾ªä¸€ä¸ªå‡ åå¹´å‰çš„æ ‡å‡†ï¼Œç†ç”±æˆ–è®¸è¿˜ä¸å¤Ÿå……åˆ†ã€‚è¿™ä¸ªè§„èŒƒåœ¨ä»Šå¤©å¼ºå¤§çš„ç”Ÿå‘½åŠ›ï¼Œä¸»è¦æºäºå®ƒå¯¹ç°ä»£å¼€å‘æµç¨‹ï¼Œç‰¹åˆ«æ˜¯åä½œå’Œå·¥å…·é“¾çš„æ·±è¿œå½±å“ã€‚</p>
<h4 data-id="heading-9">3.1 ç‰ˆæœ¬æ§åˆ¶çš„â€œå®é™â€</h4>
<p>è¿™æ˜¯æœ€é‡è¦ã€æœ€å®é™…çš„åŸå› ã€‚ä»¥Gitä¸ºä¾‹ã€‚</p>
<p>å‡è®¾å¼€å‘è€…Aåœ¨å¼€å¯å°¾éšæ¢è¡Œç¬¦è§„èŒƒçš„IDEä¸Šå·¥ä½œï¼Œä»–åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–‡ä»¶: Foo.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"Hello"</span>); <span class="hljs-comment">// æœ«å°¾æœ‰ä¸å¯è§çš„ \n</span>
    }
} <span class="hljs-comment">// æœ«å°¾ä¹Ÿæœ‰ä¸å¯è§çš„ \n</span>
</code></pre>
<p>è€Œå¼€å‘è€…Bä½¿ç”¨ä¸€ä¸ªä¸æ·»åŠ å°¾éšæ¢è¡Œç¬¦çš„ç¼–è¾‘å™¨ï¼Œä»–ä¿®æ”¹äº†æœ€åä¸€è¡Œï¼Œå¹¶æäº¤ã€‚</p>
<pre><code class="hljs language-java" lang="java">} <span class="hljs-comment">// æœ«å°¾æ²¡æœ‰ä¸å¯è§çš„ \n</span>
</code></pre>
<p>å½“Bå°è¯•æ¨é€ä»–çš„ä»£ç æ—¶ï¼ŒGitä¼šæ€ä¹ˆåšï¼ŸGitä¼šè®¤ä¸ºæ–‡ä»¶æœ€åä¸€è¡Œè¢«ä¿®æ”¹äº†ï¼<code>diff</code> è¾“å‡ºä¼šæ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-}</span>
\ No newline at end of file
<span class="hljs-addition">+}</span>
</code></pre>
<p>çœ‹åˆ°äº†å—ï¼ŸGit ä¸“é—¨æœ‰ä¸€è¡Œæç¤º <code>\ No newline at end of file</code>ã€‚è¿™å¯¹äºæ–‡ä»¶çš„å®é™…å†…å®¹æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªæ— å…³ç´§è¦çš„æ›´æ”¹ï¼Œä½†å®ƒå´æ±¡æŸ“äº†æäº¤å†å²ã€‚åœ¨ä»£ç å®¡æŸ¥æ—¶ï¼Œä½ éœ€è¦å»åˆ¤æ–­è¿™ä¸ªæ”¹åŠ¨ç©¶ç«Ÿæ˜¯çœŸçš„é€»è¾‘ä¿®æ”¹ï¼Œè¿˜æ˜¯ä»…ä»…æ˜¯æ ¼å¼å˜åŠ¨ã€‚</p>
<p>å¦‚æœæ•´ä¸ªå›¢é˜Ÿéƒ½ç»Ÿä¸€åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ æ¢è¡Œç¬¦ï¼Œè¿™ç§â€œå™ªéŸ³â€æäº¤å°±å¯ä»¥å®Œå…¨é¿å…ã€‚</p>
<h4 data-id="heading-10">3.2 å‘½ä»¤è¡Œå·¥å…·çš„â€œé¢„æœŸâ€</h4>
<p>Unixä¸–ç•Œçš„å¤§é‡å‘½ä»¤è¡Œå·¥å…·éƒ½æ˜¯åŸºäºâ€œè¡Œâ€æ¥å¤„ç†æ–‡æœ¬çš„ï¼Œå®ƒä»¬é»˜è®¤æ¯ä¸€è¡Œéƒ½ä»¥æ¢è¡Œç¬¦ç»“æŸã€‚</p>
<ul>
<li>
<p><code>cat</code> å‘½ä»¤ï¼š å°†ä¸¤ä¸ªæ–‡ä»¶è¿æ¥æ—¶ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ–‡ä»¶æ²¡æœ‰å°¾éšæ¢è¡Œç¬¦ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¼šç´§æŒ¨ç€å®ƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># file1.txt å†…å®¹ä¸º "Hello" (æ— \n)ï¼Œ file2.txt å†…å®¹ä¸º "World\n"</span>
<span class="hljs-built_in">cat</span> file1.txt file2.txt
<span class="hljs-comment"># è¾“å‡ºï¼š HelloWorld</span>
<span class="hljs-comment"># è€Œéé¢„æœŸçš„ï¼š</span>
<span class="hljs-comment"># Hello</span>
<span class="hljs-comment"># World</span>
</code></pre>
</li>
<li>
<p><code>wc -l</code> å‘½ä»¤ï¼š ç”¨äºç»Ÿè®¡è¡Œæ•°ã€‚å¯¹äºæ²¡æœ‰å°¾éšæ¢è¡Œç¬¦çš„æ–‡ä»¶ï¼Œå®ƒç»Ÿè®¡çš„ç»“æœå¯èƒ½ä¼šå°‘ä¸€è¡Œï¼Œå› ä¸ºæœ€åä¸€è¡Œä¸è¢«è®¤ä¸ºæ˜¯ä¸€è¡Œâ€œå®Œæ•´çš„è¡Œâ€ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> -n <span class="hljs-string">"Hello"</span> &gt; file.txt
<span class="hljs-built_in">wc</span> -l file.txt
<span class="hljs-comment"># è¾“å‡º 0</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Hello"</span> &gt; file.txt
<span class="hljs-built_in">wc</span> -l file.txt
<span class="hljs-comment"># è¾“å‡º 1</span>
</code></pre>
</li>
<li>
<p>è„šæœ¬å’Œè§£æå™¨ï¼š æŸäº›Shellè„šæœ¬æˆ–æ•°æ®è§£æå™¨åœ¨è¯»å–æµæ—¶ï¼Œå¦‚æœæœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œç¬¦ï¼Œå¯èƒ½ä¼šæŠ¥é”™æˆ–æ— æ³•æ­£ç¡®å¤„ç†æœ€åä¸€æ¡æ•°æ®ã€‚</p>
</li>
</ul>
<p>ç»Ÿä¸€å°¾éšæ¢è¡Œç¬¦ï¼Œç¡®ä¿äº†ä½ çš„ä»£ç å’Œæ–‡æœ¬æ–‡ä»¶èƒ½å¤Ÿåœ¨æ•´ä¸ªUnixå·¥å…·é“¾ä¸­æµç•…è¿è¡Œã€‚</p>
<h4 data-id="heading-11">3.3 ä»£ç è§„èŒƒä¸å¯è¯»æ€§</h4>
<p>ä»è§†è§‰ä¸Šçœ‹ï¼Œè®©å…‰æ ‡åœç•™åœ¨æ–‡ä»¶å†…å®¹çš„æœ€åï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–°è¡Œï¼Œå¯¹äºæŸäº›å¼€å‘è€…æ¥è¯´å¯èƒ½æ˜¾å¾—â€œæœªå®Œæˆâ€ã€‚å°¾éšæ¢è¡Œç¬¦ä½¿å¾—åœ¨ç»ˆç«¯ä¸‹ç”¨ <code>cat</code> æˆ– <code>tail</code> æŸ¥çœ‹æ–‡ä»¶æ—¶ï¼Œæç¤ºç¬¦ <code>$</code> èƒ½å‡ºç°åœ¨ä¸€ä¸ªæ–°è¡Œä¸Šï¼Œè€Œä¸æ˜¯ç´§è·Ÿåœ¨æ–‡ä»¶å†…å®¹åé¢ï¼Œè¿™æå‡äº†å¯è¯»æ€§ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¼ºåˆ¶äº†ä¸€ç§ä¸€è‡´æ€§ã€‚è½¯ä»¶å·¥ç¨‹çš„ä¸€å¤§æŒ‘æˆ˜å°±æ˜¯ç®¡ç†å¤æ‚æ€§ï¼Œè€Œç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼ˆåŒ…æ‹¬è¿™ç§çœ‹ä¸è§çš„æ ¼å¼ï¼‰æ˜¯é™ä½å¤æ‚æ€§çš„æœ‰æ•ˆæ‰‹æ®µã€‚</p>
<h3 data-id="heading-12">ç¬¬å››ç« ï¼šè·¨è¶Šç¼–è¾‘å™¨çš„å…±è¯†</h3>
<p>IDEAå¹¶éä¸ªä¾‹ã€‚äº‹å®ä¸Šï¼Œè¿™å·²ç»æˆä¸ºç°ä»£ç¼–è¾‘å™¨çš„å…±è¯†ï¼š</p>
<ul>
<li>Visual Studio Code: çŠ¶æ€æ å³ä¸‹è§’ä¼šæ˜¾ç¤º <code>LF</code> æˆ– <code>CRLF</code>ï¼Œç‚¹å‡»å®ƒå¯ä»¥æ›´æ”¹ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæœ‰ <code>files.insertFinalNewline</code> è®¾ç½®é¡¹ï¼Œæ•ˆæœç›¸åŒã€‚</li>
<li>Sublime Text: å¯é€šè¿‡ <code>"ensure_newline_at_eof_on_save": true</code> é…ç½®ã€‚</li>
<li>Vim: å¯ä»¥é€šè¿‡ <code>:set eol</code> å’Œ <code>:set fixeol</code> é…ç½®ã€‚</li>
<li>Git: ç”šè‡³æœ¬èº«ä¹Ÿå‚ä¸äº†ç®¡ç†ï¼Œé€šè¿‡ <code>core.autocrlf</code> é…ç½®é¡¹ï¼Œå¯ä»¥åœ¨æäº¤å’Œæ£€å‡ºæ—¶è‡ªåŠ¨è½¬æ¢æ¢è¡Œç¬¦ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†å¯¹å°¾éšæ¢è¡Œç¬¦çš„å¤„ç†ã€‚</li>
</ul>
<p>è¿™äº›å·¥å…·çš„å…±åŒåŠªåŠ›ï¼Œæ­£åœ¨é€æ­¥æ¶ˆé™¤å› å¹³å°å’Œç¼–è¾‘å™¨å·®å¼‚å¸¦æ¥çš„æ ¼å¼é—®é¢˜ã€‚</p>
<h3 data-id="heading-13">ç»“è®ºï¼šæ‹¥æŠ±è§„èŒƒï¼Œä¸“æ³¨åˆ›æ–°</h3>
<p>æ–‡ç« å¼€å¤´é‚£ä¸ªçœ‹ä¼¼å¥‡æ€ªçš„â€œå…‰æ ‡è·³åŠ¨â€ï¼Œä¸å†æ˜¯IDEçš„ä¸€ä¸ªæ— å˜å¤´è¡Œä¸ºï¼Œè€Œæ˜¯å…¶ä½œä¸ºä¸€æ¬¾ä¸“ä¸šå·¥å…·ï¼Œåœ¨èƒŒåé»˜é»˜è·µè¡Œè½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µçš„ä½“ç°ã€‚å®ƒæ˜¯ä¸€ä½ä¸¥æ ¼çš„ä»£ç è§„èŒƒå®ˆæŠ¤è€…ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼ï¼Œå¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ol>
<li>éµå¾ªå†å²æ ‡å‡†ï¼Œä¿è¯æ–‡ä»¶çš„æ­£ç¡®æ€§ã€‚</li>
<li>æ¶ˆé™¤ç‰ˆæœ¬æ§åˆ¶å™ªéŸ³ï¼Œè®©æäº¤å†å²æ›´æ¸…æ™°ï¼Œèšç„¦äºçœŸæ­£çš„ä»£ç é€»è¾‘å˜æ›´ã€‚</li>
<li>ç¡®ä¿ä¸å¼ºå¤§å‘½ä»¤è¡Œå·¥å…·é“¾çš„å…¼å®¹æ€§ï¼Œé¿å…è„šæœ¬å’Œå·¥å…·è¿è¡Œæ—¶å‡ºç°æ„å¤–é”™è¯¯ã€‚</li>
<li>ä¿ƒè¿›å›¢é˜Ÿåä½œçš„ç»Ÿä¸€æ€§ï¼Œå‡å°‘å› ç¯å¢ƒå·®å¼‚å¯¼è‡´çš„æ— æ•ˆæ²Ÿé€šå’Œè°ƒè¯•ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œä¸‹æ¬¡å½“ä½ çœ‹åˆ°å…‰æ ‡è‡ªåŠ¨è·³åˆ°æ–°çš„ä¸€è¡Œæ—¶ï¼Œä½ å¯ä»¥ä¼šå¿ƒä¸€ç¬‘ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªéœ€è¦è¢«ä¿®å¤çš„Bugï¼Œè€Œæ˜¯ä¸€ä¸ªå€¼å¾—èµèµçš„Featureã€‚æˆ‘ä»¬çš„å»ºè®®æ˜¯ï¼šä¿æŒä½ çš„IDEé»˜è®¤è®¾ç½®ï¼Œæ¥å—å¹¶ç†è§£è¿™ä»½â€œè´´å¿ƒâ€ã€‚</p>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæ­£æ˜¯è¿™äº›å¯¹ç»†èŠ‚çš„ä¸¥è°¨å¯¹å¾…ï¼Œæ‰æ„å»ºèµ·äº†åºå¤§è€Œç¨³å®šçš„æ•°å­—ä¸–ç•Œçš„åŸºç¡€ã€‚è®©æˆ‘ä»¬å°†ç²¾åŠ›ä»çº ç»“è¿™äº›æ ¼å¼é—®é¢˜ä¸Šè§£æ”¾å‡ºæ¥ï¼Œå»ä¸“æ³¨äºåˆ›é€ æ›´æœ‰ä»·å€¼çš„åˆ›æ–°å’Œé€»è¾‘å§ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æé£é£ã€Œä¸–ç•Œæ¨¡å‹ã€æ­£å¼å¼€æ”¾ï¼Œäººäººå¯ç”¨ï¼ Pro ç‰ˆé¦–æœˆä»… 7 å…ƒ]]></title>    <link>https://juejin.cn/post/7572012699627880475</link>    <guid>https://juejin.cn/post/7572012699627880475</guid>    <pubDate>2025-11-13T10:28:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572012699627880475" data-draft-id="7572130072262901806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æé£é£ã€Œä¸–ç•Œæ¨¡å‹ã€æ­£å¼å¼€æ”¾ï¼Œäººäººå¯ç”¨ï¼ Pro ç‰ˆé¦–æœˆä»… 7 å…ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-13T10:28:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æé£é£ã€Œä¸–ç•Œæ¨¡å‹ã€æ­£å¼å¼€æ”¾ï¼Œäººäººå¯ç”¨ï¼ Pro ç‰ˆé¦–æœˆä»… 7 å…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:28:50.000Z" title="Thu Nov 13 2025 10:28:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19cd4beb6f464b9289a130cbf1b926d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=k2N7Y92R%2FVjMvrDvqAcE642Gzxk%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘åªç”¨ä¸€å¼ å›¾ï¼Œä¸€å¥è¯ï¼Œå°±èƒ½åˆ›é€ å‡ºéšä¾¿ä¹±é€›çš„ 3D ä¸–ç•Œâ€”â€”æé£é£è¿™æ¬¡ä¸æ˜¯åœ¨è®²æ•…äº‹ï¼Œè€Œæ˜¯çœŸçš„ç»™ä½ ã€Œé€ æ¢¦ç¥å™¨ã€ã€‚ä»Šå¤©èµ·ï¼Œå…¨çƒä¸Šçº¿ï¼Œäººäººå¯ç”¨ã€‚ã€</strong></h5>
<p>æé£é£çš„ã€Œåˆ›ä¸–ç¥å™¨ã€ä»Šå¤©ç»ˆäºæ­£å¼ä¸Šçº¿äº†ï¼äººäººå¯ç”¨ã€‚</p>
<p>è¿™ä¸ªç”± WorldLabs æ¨å‡ºï¼Œåä¸º Marble çš„ç½‘ç«™ï¼Œç”¨ä¸–ç•Œæ¨¡å‹å¯ä»¥ç”Ÿæˆç‘°ä¸½æ¢¦å¹»çš„ã€Œæƒ³è±¡ä¸–ç•Œã€ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2755b929348c4d0cb1287f7fb3d27d5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=X1NXnPN9d5Z13%2BhDjYNKmMGuDV4%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmarble.worldlabs.ai%2F" target="_blank" title="https://marble.worldlabs.ai/" ref="nofollow noopener noreferrer">marble.worldlabs.ai/</a></p>
<p>è¿™æ³¢å±å®æ˜¯æé£é£è‡ªå·±è”åŠ¨è‡ªå·±äº†ï¼Œå‰ä¸¤å¤©å¥¹çš„ä¸€ç¯‡ä¸‡å­—é•¿æ–‡ç«çˆ†ç¡…è°·ï¼Œå®šä¹‰ AI çš„ä¸‹ä¸€ä¸ªåå¹´æ˜¯ã€Œç©ºé—´æ™ºèƒ½ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f36afe44324cd69d0e8b0143097077~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=q27zQ0UAVUpK8ST419UCrJY4WFs%3D" alt="" loading="lazy"/></p>
<p>æ–‡ç« ä¸­ï¼Œå¥¹ä¸ºçœŸæ­£å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ã€Œä¸–ç•Œæ¨¡å‹ã€æ‰€éœ€è¾¾æˆçš„ç›®æ ‡å‹¾å‹’äº†ä¸€ä¸ªæ¡†æ¶ã€‚</p>
<p>è€Œä»Šå¤©è¿™ä¸ªã€Œä¸–ç•Œã€æ­£å¼é¢å‘å…¨ä¸–ç•Œå‘å¸ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a44650cdd9042b1bb8358e77e977354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=Rlo9tRn1VY2qNJ3jOh0h%2BKJIUkk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c5fab7286b54d2ebfd64aaa134c9f3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=2nkeviuepdmnDdZllYjVxrccnkQ%3D" alt="" loading="lazy"/></p>
<p>çœ‹ä¸€ä¸‹å®˜æ–¹è§†é¢‘çš„æ•ˆæœã€‚</p>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">è§†é¢‘è¯¦æƒ…</a></p>
<p>World Labs æœ€æ–°å®˜æ–¹å®£ä¼ è§†é¢‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e625a9794c2464887304c97ca8cfda3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=DxIIDryHwqNmXLgFzu6qLNUmPRU%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒMarbleï¼šä¸–ç•Œæ¨¡å‹ã€</strong></p>
<p>äººç±»å¯¹ä¸–ç•Œçš„æ„ŸçŸ¥æœ¬è´¨ä¸Šæ˜¯å¤šæ¨¡æ€çš„ï¼šæˆ‘ä»¬è°ƒåŠ¨æ‰€æœ‰æ„Ÿå®˜æ¥ç†è§£å‘¨é­ç¯å¢ƒã€‚</p>
<p>é€šè¿‡æ•´åˆè§†è§‰ã€å¬è§‰ã€è§¦è§‰ä¸è¯­è¨€ï¼Œæˆ‘ä»¬æ„å»ºèµ·å¯¹å¤–éƒ¨ä¸–ç•Œçš„å¿ƒç†æ¨¡å‹ï¼›è¿™äº›ä¸åŒè¡¨å¾æ–¹å¼ç›¸äº’åä½œã€å½¼æ­¤å¢å¼ºï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿç†è§£ä¸–ç•Œå¹¶åœ¨å…¶ä¸­é‡‡å–è¡ŒåŠ¨ã€‚</p>
<p>ä¸–ç•Œæ¨¡å‹åº”å½“ä»¥ç±»ä¼¼æ–¹å¼è¿ä½œã€‚å®ƒä»¬éœ€è¦å…·å¤‡å¤§è§„æ¨¡å¤šæ¨¡æ€èƒ½åŠ›ï¼Œèƒ½å¤Ÿå°†å„ç§å¯ç”¨è¾“å…¥ä¿¡å·æå‡ä¸ºå®Œæ•´çš„ä¸‰ç»´ä¸–ç•Œï¼Œå¹¶éšç€æ–°ä¿¡æ¯çš„å‡ºç°æŒç»­è¿­ä»£æ›´æ–°å¯¹ä¸–ç•Œçš„è®¤çŸ¥ã€‚</p>
<p>Marble æ˜¯å¼€åˆ›å…ˆæ²³çš„æ–°ä¸€ä»£ä¸–ç•Œæ¨¡å‹ï¼Œæ­£æœç€è¿™ä¸€æ„¿æ™¯å¤§æ­¥è¿ˆè¿›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3408fd1d58a947e0b36ebb0ed4b4dcca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=B0%2Blq7hcZGwe87mDuvI7VN%2FNliY%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f94b1002e07246ac855ffd3c0383fe2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=M%2FMPKks0bfUdNGDYCgo9XQAlGsU%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œæ–‡æœ¬ä¸å›¾åƒä¸–ç•Œã€</strong></p>
<p>é¦–å…ˆï¼ŒMarble èƒ½å¤Ÿä»…å‡­ä¸€å¼ å›¾ç‰‡æˆ–ç®€çŸ­æ–‡å­—æç¤ºåˆ›å»ºå®Œæ•´çš„ 3D ä¸–ç•Œã€‚è¿™æ˜¯æœ€ç®€å•ä¾¿æ·çš„é€ ç‰©æ–¹å¼ã€‚</p>
<p>Marble å¯ç”Ÿæˆæ¶µç›–å¤šç§åœºæ™¯ç±»å‹ä¸è‰ºæœ¯é£æ ¼çš„ä¸–ç•Œã€‚</p>
<p>å›¾åƒæç¤ºä½¿å¾—å°† Marble ä¸å…¶ä»– AI å·¥å…·ç»“åˆå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚å¯ä»¥ä½¿ç”¨å–œçˆ±çš„å›¾åƒç”Ÿæˆæ¨¡å‹åˆ›å»ºå›¾åƒï¼Œéšåå°†å…¶å¯¼å…¥ Marbleï¼Œå³å¯å°†å…¶æå‡ä¸ºå®Œæ•´çš„ 3D ä¸–ç•Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3467d62d0c14e68b403699131af23ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=ZSLG9%2BeoSEhKs7a9INgdDnjrSIY%3D" alt="" loading="lazy"/></p>
<p>æ–‡æœ¬å’Œå›¾åƒæç¤ºç›´è§‚ä¸”å¼ºå¤§ï¼Œä½†åœ¨åˆ›æ„æ§åˆ¶æ–¹é¢å­˜åœ¨å±€é™ï¼šMarble å¿…é¡»è‡ªè¡Œæ„å»ºè¾“å…¥æ–‡æœ¬æˆ–å›¾åƒæç¤ºä¸­æœªåŒ…å«çš„ä¸–ç•Œç»†èŠ‚ã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1bd9353cef949e49741c2136acdf17c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=SUcM2ISBiXpHZJxJA8XskPpgRco%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå¤šå›¾åƒå’Œè§†é¢‘åˆ°ä¸–ç•Œæ¨¡å‹ã€</strong></p>
<p>å®ç°æ›´å…·åˆ›æ„æ§åˆ¶çš„ä¸–ç•Œæ„å»ºï¼Œä¸€ç§ç®€ä¾¿æ–¹æ³•æ˜¯é‡‡ç”¨å¤šå›¾åƒæç¤ºæŠ€æœ¯ã€‚</p>
<p>Marble èƒ½å¤Ÿæ¥æ”¶é’ˆå¯¹ä¸–ç•Œä¸åŒéƒ¨åˆ†çš„å¤šæ ·åŒ–æç¤ºå›¾åƒï¼Œå¹¶å°†å®ƒä»¬æ— ç¼èåˆæˆç»Ÿä¸€çš„ 3D ä¸–ç•Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27286b252de44fd89bd6507ed1d731af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=ET7Hi6bsXQFmjiAFzYuo1UDUbQ4%3D" alt="" loading="lazy"/></p>
<p>å¤šå›¾åƒæç¤ºèƒ½ä»¥æ›´é«˜ç²¾åº¦åˆ›é€ ä¸–ç•Œã€‚</p>
<p>è¿™å¸¦æ¥äº†ä¸€ç§å…¨æ–°çš„ä¸–ç•Œç”Ÿæˆå·¥ä½œæµç¨‹ã€‚å¯ä»¥ä½¿ç”¨å–œçˆ±çš„å›¾åƒç”Ÿæˆå·¥å…·åˆ†åˆ«è¿­ä»£è¾“å…¥è§†è§’ï¼Œè€Œ Marble ä¼šå°†å…¶æå‡ä¸ºå®Œæ•´çš„ä¸‰ç»´ä¸–ç•Œï¼ŒåŒæ—¶ä¸ºè¾“å…¥è§†è§’ä¹‹é—´æ·»åŠ æ— ç¼è¿‡æ¸¡æ•ˆæœã€‚</p>
<p>Marble å¯ä»¥è¾“å…¥å‡ å¼ ç…§ç‰‡æˆ–ä¸€æ®µä»ä¸åŒè§’åº¦æç»˜ç°å®ä¸–ç•Œä½ç½®çš„çŸ­è§†é¢‘ï¼Œå®ƒä¼šå°†è¿™äº›ç´ æç»„åˆèµ·æ¥ï¼Œç”ŸæˆåŒ…å«ç°å®ç©ºé—´å…ƒç´ çš„ 3D ä¸–ç•Œã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be3d0df0d7234f8d92b844b295dc25f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=BGJnSQKXZLJo7oJvrjX1ALNPs%2FU%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œä¸–ç•Œç¼–è¾‘ã€</strong></p>
<p>å¯¹è®¸å¤šç”¨æˆ·è€Œè¨€ï¼Œåˆ›ä½œè¿‡ç¨‹å…·æœ‰é«˜åº¦è¿­ä»£æ€§ã€‚ç”Ÿæˆä¸–ç•Œå¾€å¾€åªæ˜¯åˆ›æ„æ—…ç¨‹çš„èµ·ç‚¹ã€‚å½“çœ‹åˆ°ç”Ÿæˆçš„ 3D ä¸–ç•Œæ—¶ï¼Œé€šå¸¸ä¼šæ¿€å‘æ›´å¤šä¿®æ”¹æˆ–å®Œå–„å®ƒçš„çµæ„Ÿã€‚</p>
<p>Marble å†…ç½®äº† AI åŸç”Ÿä¸–ç•Œç¼–è¾‘å·¥å…·ã€‚ç¼–è¾‘å¯ä»¥ç»†å¾®è€Œå±€éƒ¨ï¼šç§»é™¤ç‰©ä½“ã€ä¿®é¥°åŒºåŸŸï¼›ä¹Ÿå¯ä»¥æ›´åŠ å½»åº•ï¼šæ›¿æ¢</p>
<p>ç‰©ä½“ã€æ”¹å˜è§†è§‰é£æ ¼ï¼Œæˆ–é‡æ„ä¸–ç•Œçš„å¤§éƒ¨åˆ†ç»“æ„ã€‚è¿™ä¸ºä¸–ç•Œåˆ›å»ºè¿‡ç¨‹å¸¦æ¥äº†å…¨æ–°å±‚æ¬¡çš„ç²¾ç»†æ§åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3cf3999961c4045bfc82bca3af936f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=JlYD3FyVXWEI6LjEaAVW%2FFkjJCM%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55b08542376b4f4cafb8dbc33303483d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=7LKCSk4G1%2FH8AEfZ6iSOt7dDXHo%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€ŒChiselï¼šåœ¨ä¸‰ç»´ä¸–ç•Œä¸­é›•ç¢å¤©åœ°ã€</strong></p>
<p>Chisel å’Œä¸–ç•Œç¼–è¾‘è¿˜ä¸å¤ªä¸€æ ·ï¼Œæœ‰ç‚¹åƒä¸€æ ¹é­”æ³•æ£’ã€‚</p>
<p>Marble çš„å¤šæ¨¡æ€è¾“å…¥ä¸ç¼–è¾‘åŠŸèƒ½èµ‹äºˆå¯¹ç”Ÿæˆä¸–ç•Œçš„å¼ºå¤§æŒæ§åŠ›ã€‚</p>
<p>ä½†æœ‰æ—¶ï¼Œè¦å°†è„‘æµ·ä¸­çš„æ„æƒ³ç²¾ç¡®å‘ˆç°ï¼Œä»éœ€å¯¹åœºæ™¯å¸ƒå±€æˆ–ç‰©ä½“çš„ç²¾ç¡®å°ºå¯¸ä½ç½®è¿›è¡Œæ›´ç²¾ç»†çš„è°ƒæ§ã€‚</p>
<p>é’ˆå¯¹è¿™äº›åœºæ™¯ï¼Œæ¨å‡º Chiselâ€”â€”ä¸€æ¬¾åŸç”Ÿ AI å·¥å…·ï¼Œå¯ç›´æ¥åœ¨ä¸‰ç»´ç©ºé—´ä¸­é›•ç¢ Marble ä¸–ç•Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10680ecd20fc4a40a4483777a7666d6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=v5QYNfkR0kQcI1uqIvS1dwwerj4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c300ba2c87754232b40f9cc696703656~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=lpc0k0PtdC0%2FQjPocC3fmSaeKO4%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå°†ä¸–ç•Œå¯¼å‡ºä¸º 3D æˆ–è€…è§†é¢‘æ ¼å¼ã€</strong></p>
<p>ä½¿ç”¨ Marble åˆ›å»ºä¸–ç•Œåï¼Œæœ‰å¤šç§å¯¼å‡ºé€‰é¡¹ä»¥ä¾¿å°†å…¶æ•´åˆåˆ°ä¸‹æ¸¸é¡¹ç›®ä¸­ã€‚</p>
<p>é«˜æ–¯æº…å°„ç‚¹æ˜¯ Marble ä¸–ç•Œæœ€é«˜ä¿çœŸåº¦çš„å‘ˆç°æ–¹å¼ã€‚å®ƒå°† 3D åœºæ™¯è¡¨ç¤ºä¸ºå¤§é‡åŠé€æ˜ç²’å­é›†åˆã€‚</p>
<p>å¯ä»¥é€šè¿‡ä¸ THREE.js é›†æˆçš„å¼€æºè·¨å¹³å°æ¸²æŸ“å™¨ Sparkï¼Œåœ¨æµè§ˆå™¨ä¸­å®æ—¶æ¸²æŸ“é«˜æ–¯æº…å°„ç‚¹ã€‚</p>
<p>Marble ä¸–ç•Œäº¦å¯å¯¼å‡ºä¸ºä¸‰è§’ç½‘æ ¼æ¨¡å‹ã€‚</p>
<p>ç³»ç»Ÿèƒ½å¤ŸåŒæ—¶ç”Ÿæˆç”¨äºç²—ç•¥ç‰©ç†æ¨¡æ‹Ÿçš„ä½ç²¾åº¦ç¢°æ’ä½“ç½‘æ ¼ï¼Œä»¥åŠå°½å¯èƒ½åŒ¹é…é«˜æ–¯æº…å°„ç‚¹è§†è§‰ç²¾åº¦çš„é«˜è´¨é‡ç½‘æ ¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ee94e6cad3541dba11c8dff5a02a37f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=FUg3e9HJ%2BK9XSd3Aoz6LbT%2B%2BHIc%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡ç½‘æ ¼æ ¼å¼å¯¼å‡ºä¸–ç•Œï¼Œå¯ä½¿å…¶ä¸ä¼—å¤šè¡Œä¸šæ ‡å‡†å·¥å…·å®ç°æ— ç¼åä½œã€‚</p>
<p>Marble ä¸–ç•Œä»¥å®Œæ•´ 3D å½¢å¼å­˜åœ¨ï¼Œä½†æœ‰æ—¶è§†é¢‘æ‰æ˜¯åˆ†äº«ä¸–ç•Œçš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ Marble å°†ç”Ÿæˆçš„ä¸–ç•Œæ¸²æŸ“æˆè§†é¢‘ï¼Œé€šè¿‡åƒç´ çº§ç²¾å‡†çš„ç›¸æœºæ§åˆ¶ï¼Œè®©æ¯ä¸ªé•œå¤´éƒ½å¦‚æ‚¨æƒ³è±¡èˆ¬å®Œç¾æ„å›¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79f0366c039b4c19a71929e26c686e33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=oKsZowoBaBhAc7QCtKyHxLpDd5o%3D" alt="" loading="lazy"/></p>
<p>Marble æ˜¯ä¸€æ¬¾å…ˆè¿›çš„ç”Ÿæˆå¼ä¸–ç•Œæ¨¡å‹ã€‚</p>
<p>ä½†åªæ˜¯æˆ‘ä»¬è¿ˆå‘ç©ºé—´æ™ºèƒ½å¾é€”ä¸­çš„ä¸€æ­¥ã€‚</p>
<p>æœªæ¥ï¼Œäº¤äº’æ€§å°†æˆä¸ºä¸€ä¸ªå…³é”®æœºé‡ã€‚</p>
<p>æœªæ¥çš„ä¸–ç•Œæ¨¡å‹å°†è®©äººç±»ä¸æ™ºèƒ½ä½“éƒ½èƒ½ä»¥å…¨æ–°æ–¹å¼ä¸ç”Ÿæˆä¸–ç•Œäº’åŠ¨ï¼Œä»è€Œåœ¨ä»¿çœŸã€æœºå™¨äººæŠ€æœ¯åŠå…¶ä»–é¢†åŸŸè§£é”æ›´å¤šåº”ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d1dbbd333294512bbdeb93b92107597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=9LdBOBtMTBcsVo9a7WUsSOO%2Fsas%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç©ºé—´æ™ºèƒ½æ˜¯ AI çš„ä¸‹ä¸€ä¸ªå‰æ²¿ã€</strong></p>
<p>æé£é£åœ¨å¥¹çš„ä¸‡å­—é•¿æ–‡ä¸­ç»“å°¾å†™ä¸‹çš„æ„Ÿæ…¨æ˜¯å¯¹è¿™æ³¢ AI æµªæ½®ã€æ™ºèƒ½ã€äººç±»å’Œæœºå™¨å‘½è¿æœ€å¥½çš„æ€»ç»“ï¼š</p>
<p>è¿‡å»åå¹´è§è¯äº† AI æˆä¸ºä¸€ç§å…¨çƒç°è±¡ï¼Œä»¥åŠæŠ€æœ¯ã€ç»æµä¹ƒè‡³åœ°ç¼˜æ”¿æ²»çš„è½¬æŠ˜ç‚¹ã€‚</p>
<p>ä½†ä½œä¸ºä¸€åç ”ç©¶è€…ã€æ•™è‚²è€…ï¼Œå¦‚ä»Šåˆæ˜¯ä¸€ååˆ›ä¸šè€…ï¼Œæœ€èƒ½æ¿€åŠ±æˆ‘çš„ï¼Œä»ç„¶æ˜¯å›¾çµ 75 å¹´å‰æå‡ºçš„é‚£ä¸ªé—®é¢˜èƒŒåçš„ç²¾ç¥ã€‚</p>
<p>æˆ‘ä¾ç„¶æ€€æœ‰ä»–é‚£ä»½å¥½å¥‡ä¸æƒŠå¹ã€‚</p>
<p>æ­£æ˜¯è¿™ç§æ„Ÿè§‰ï¼Œæ¯å¤©éƒ½æ¿€åŠ±ç€æˆ‘è¿æ¥ç©ºé—´æ™ºèƒ½çš„æŒ‘æˆ˜ã€‚</p>
<p>å†å²ä¸Šç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬æœ‰æœ›æ„å»ºå‡ºä¸ç‰©ç†ä¸–ç•Œå¦‚æ­¤åè°ƒçš„æœºå™¨ï¼Œä»¥è‡³äºåœ¨æˆ‘ä»¬é¢ä¸´çš„æœ€ä¸¥å³»æŒ‘æˆ˜ä¸­ï¼Œå¯ä»¥å°†å®ƒä»¬è§†ä¸ºçœŸæ­£çš„ä¼™ä¼´ã€‚</p>
<p>æ— è®ºæ˜¯åŠ é€Ÿæˆ‘ä»¬å¯¹å®éªŒå®¤ä¸­ç–¾ç—…çš„ç†è§£ï¼Œå½»åº•æ”¹å˜æˆ‘ä»¬è®²è¿°æ•…äº‹çš„æ–¹å¼ï¼Œè¿˜æ˜¯åœ¨æˆ‘ä»¬å› ç–¾ç—…ã€å—ä¼¤æˆ–å¹´è€è€Œæœ€è„†å¼±çš„æ—¶åˆ»ç»™äºˆæ”¯æŒï¼Œæˆ‘ä»¬éƒ½æ­£å¤„åœ¨ä¸€é¡¹æ–°æŠ€æœ¯çš„é£å£æµªå°–ï¼Œè¿™é¡¹æŠ€æœ¯å°†æå‡æˆ‘ä»¬æœ€çè§†çš„ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´æ·±åˆ»ã€æ›´ä¸°å¯Œã€æ›´å¼ºå¤§çš„ç”Ÿæ´»æ„¿æ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c93abff73d2241aebea754f0c5138ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=qwQo1zhUCs02xphe4%2BpZIoj2sDo%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¤§è‡ªç„¶ä¸è¿œå¤åŠ¨ç‰©èº«ä¸Šé‡Šæ”¾å‡ºç¬¬ä¸€ç¼•ç©ºé—´æ™ºèƒ½çš„è¿‘äº”äº¿å¹´åï¼Œæˆ‘ä»¬æœ‰å¹¸æˆä¸ºå¯èƒ½å¾ˆå¿«å°±èƒ½èµ‹äºˆæœºå™¨åŒæ ·èƒ½åŠ›çš„è¿™ä¸€ä»£æŠ€æœ¯ä¸“å®¶ä¸­çš„ä¸€å‘˜â€”â€”å¹¶æœ‰å¹¸åˆ©ç”¨è¿™äº›èƒ½åŠ›ä¸ºä¸–ç•Œå„åœ°çš„äººä»¬è°‹ç¦ç¥‰ã€‚</p>
<p>æˆ‘ä»¬å…³äºçœŸæ­£æ™ºèƒ½æœºå™¨çš„æ¢¦æƒ³ï¼Œæ²¡æœ‰ç©ºé—´æ™ºèƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚</p>
<p>è¿™é¡¹æ¢ç´¢ï¼Œå°±æ˜¯æŒ‡å¼•æˆ‘çš„åŒ—ææ˜Ÿã€‚</p>
<p>æˆ‘é‚€è¯·ä½ ä¸æˆ‘åŒè¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/531a911ce7284fc4a4bd4587440dd6e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=gdOmSAlhWgL4PR%2FlWaKSL02wK4c%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒOne More Thingã€</strong></p>
<p>Marble å®šä»·æ–¹é¢ï¼Œç›®å‰å…±æœ‰ 3 ä¸ªæ¡£ä½ï¼Œæœ€é«˜ä¸€ä¸ªæœˆ 95 ç¾å…ƒï¼Œå¯ä»¥æœ€å¤šç”Ÿæˆ 75 ä¸ªä¸–ç•Œã€‚</p>
<p>å…è´¹ç‰ˆæœ¬åªèƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œå¯ä»¥ç”Ÿæˆ 4 ä¸ªä¸–ç•Œã€‚</p>
<p>ç°åœ¨ Pro ç‰ˆæœ¬ï¼Œé¦–æœˆåªéœ€ 1 ç¾å…ƒï¼æ ‡å‡†ç‰ˆæœ¬ä¾ç„¶è¿˜æ˜¯ä¸šç•Œæœ€æ™®éçš„ä¸€ä¸ªæœˆ 20 ç¾å…ƒã€‚</p>
<p>ä½ è®¤ä¸ºè¿™ä¸ªä»·æ ¼åˆç†å—ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f9cfbe255e541a3aaf159c000b509e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=eTrRvOXCHQf8stF%2BABiSI83YZ%2F0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e77ec5fa5dc40f98d167fec9ff725e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634530&amp;x-signature=0%2FYXAJPreqznE1ic5HFHTYNbubQ%3D" alt="" loading="lazy"/></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.worldlabs.ai%2Fblog%2Fmarble-world-model" target="_blank" title="https://www.worldlabs.ai/blog/marble-world-model" ref="nofollow noopener noreferrer">www.worldlabs.ai/blog/marbleâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.1 å‡Œæ™¨çªè¢­ï¼Œå¥¥ç‰¹æ›¼å¬åŠï¼å…¨ç½‘å‘¼å”¤çš„äººå‘³å›æ¥äº†]]></title>    <link>https://juejin.cn/post/7572002432450936841</link>    <guid>https://juejin.cn/post/7572002432450936841</guid>    <pubDate>2025-11-13T10:30:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572002432450936841" data-draft-id="7572016447804735514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.1 å‡Œæ™¨çªè¢­ï¼Œå¥¥ç‰¹æ›¼å¬åŠï¼å…¨ç½‘å‘¼å”¤çš„äººå‘³å›æ¥äº†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T10:30:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.1 å‡Œæ™¨çªè¢­ï¼Œå¥¥ç‰¹æ›¼å¬åŠï¼å…¨ç½‘å‘¼å”¤çš„äººå‘³å›æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:30:46.000Z" title="Thu Nov 13 2025 10:30:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d66f6be0b7440799afa97c8ba012f4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=DFSUUi7yT%2FEI89ngWS1D2chHFGM%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘ä»Šå¤©ï¼ŒOpenAI GPT-5.1ã€Œå…¨å®¶æ¡¶ã€çªç„¶ç™»åœºï¼ŒInstant å’Œ Thinking ç‹ç‚¸ç»„åˆåŒæ­¥ä¸Šçº¿ã€‚è¿™ä¸€æ¬¡ï¼Œæ¨¡å‹æƒ…å•†æ™ºå•†åŒæ ¸å‡çº§ï¼Œä¸ä»…æ›´èªæ˜ï¼Œè€Œä¸”èŠå¤©æ›´æœ‰äººå‘³äº†ã€‚ã€</strong></h5>
<p>æ²¡æœ‰ç›´æ’­ï¼ŒOpenAI ä¸€æ—©æ”¾å¤§æ‹›ï¼Œè®©æ‰€æœ‰äººçŒä¸åŠé˜²ã€‚</p>
<p>å°±åœ¨åˆšåˆšï¼ŒGPT-5.1 æ­£å¼å‘å¸ƒï¼ŒGPT-5 ç³»åˆ—é‡å¤§å‡çº§ç‰ˆç™»åœºï¼</p>
<p>ä¸€å…±æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œç›®å‰å·²ç»ä¸Šçº¿äº†å‰ä¸¤ä¸ªï¼š</p>
<p>Â· GPT-5.1 Instant ï¼šæœ€å¸¸ç”¨çš„æ¨¡å‹ï¼Œè¯­æ°”æ›´äº²åˆ‡ã€æ›´æ™ºèƒ½ï¼Œæ›´å–„äºéµå¾ªæŒ‡ä»¤ã€‚</p>
<p>Â· GPT-5.1 Thinking ï¼šå…ˆè¿›çš„æ¨ç†æ¨¡å‹ï¼Œæ›´æ˜“äºç†è§£ï¼Œå¤„ç†ç®€å•ä»»åŠ¡é€Ÿåº¦æ›´å¿«ï¼Œå¤„ç†å¤æ‚ä»»åŠ¡æ›´å…·æŒä¹…åŠ›ã€‚</p>
<p>Â· GPT-5.1 Proï¼šå³å°†ä¸Šçº¿</p>
<p>å¥¥ç‰¹æ›¼æ¿€åŠ¨è¡¨ç¤ºï¼ŒGPT-5.1 å‡çº§ç»™åŠ›ï¼Œå°¤å…¶æ˜¯æŒ‡ä»¤éµå¾ªå’Œè‡ªé€‚åº”æ€è€ƒçš„æ”¹è¿›ã€‚</p>
<p>å½“ç„¶ï¼Œæ•´ä½“çš„æ™ºåŠ›å’Œæ²Ÿé€šé£æ ¼ï¼Œæå‡ä¹Ÿå¾ˆæ˜¾è‘—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c82b2307b434181a457945e5a3a3f72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=XfBj4T8fJdnInfUjWeLTy7VU5V8%3D" alt="" loading="lazy"/></p>
<p>è¿˜è®°å¾— 8 æœˆåˆï¼ŒGPTâ€‘5 æ­£å¼è¯ç”Ÿï¼Œè™½åœ¨å…¨æ–¹ä½æ€§èƒ½æå‡ï¼Œä½†å˜å¾—æ²¡æœ‰äººå‘³ï¼Œæ›´åŠ å†·æ·¡ã€‚</p>
<p>ä¸€æ—¶é—´ï¼Œå…¨ç½‘å–Šè¯é›†ä½“è®¨å› GPT-4oã€o3 ç­‰æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f9fade43daa45f385d32a8e9726d064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=7EPazkdWnDCqzC%2B2DPSUeoyUrHA%3D" alt="" loading="lazy"/></p>
<p>è®¸å¤šäººçš„çœŸå®åé¦ˆ OpenAI å¬è¿›å»äº†â€”â€”ã€Œä¸€ä¸ªä¼˜ç§€çš„ AI ä¸ä»…è¦èªæ˜ï¼Œè¿˜å¾—ä¼šå” å—‘æ‰è¡Œã€ã€‚</p>
<p>å¦‚ä»Šï¼Œä¸¤ä¸ªæœˆçš„è¿­ä»£ï¼ŒOpenAI æŠŠè®©æ‰€æœ‰äººæœ€æƒ³è¦çš„ GPT-5.1 å¸¦æ¥äº†ã€‚</p>
<p>æ­£å¦‚ç§‘å­¦å‰¯æ€»è£ Kevin Weil æ‰€è¨€ï¼ŒGPT-5.1 æ˜¯ OpenAI è¿„ä»Šä¸ºæ­¢æ¨å‡ºçš„æœ€å®Œç¾çš„ç»„åˆï¼Œ<strong>ã€Œæ™ºå•†ä¸æƒ…å•†åŒåŒåœ¨çº¿ã€</strong>ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a9a578b0af14dc1a0c30b8596645445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=SMG0nf%2FOelUnO6BqNd4BwC35%2BeQ%3D" alt="" loading="lazy"/></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒGPT-5.1 Instant è¿˜è¦æ¯” 4o çš„æƒ…å•†æ™ºå•†æ›´å¼ºã€‚</p>
<p>OpenAI ç ”ç©¶ç§‘å­¦å®¶ Aidan McLaughlin ç§°â€”â€”</p>
<p>å®ƒæ˜¯é¦–ä¸ªä½¿ç”¨æ€ç»´é“¾ï¼ˆCoTï¼‰ï¼Œå¼•å…¥äº†ã€Œè‡ªé€‚åº”æ¨ç†ã€çš„æ¨¡å‹ï¼Œé€Ÿåº¦å’Œ GPT-5 Instant ä¸€æ ·å¿«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15c74136c8364e8bb996ae37199b46bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=c4vTkhKPxBrEzudt9JynOittYZ4%3D" alt="" loading="lazy"/></p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œæ¯ä¸ªäººè¿˜å¯ä»¥è½»æ¾åœ°å¡‘é€  ChatGPT çš„è¯­æ°”ã€‚</p>
<p>æ¯•ç«Ÿï¼Œæ¯ä¸ªäººå¯¹èŠå¤©é£æ ¼åå¥½ä¸å°½ç›¸åŒï¼Œç”šè‡³åœ¨ä¸åŒå¯¹è¯ä¸­ä¹Ÿä¼šå˜åŒ–â€”â€”å› æ­¤é€šè¿‡ã€Œæ§åˆ¶é€‰é¡¹ã€ï¼Œå°±å¯ä»¥è½»æ¾æ‹¿æ ChatGPT è¯´è¯çš„è°ƒè°ƒï¼Œè®©å…¶æ›´å¯¹èƒƒå£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3806b18b51641d09a9564983a558418~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=iMjGhRCg087Cp4xzj71IE9gX4dc%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸“ä¸šå¯é ï¼ˆProfessionalï¼‰ã€äº²å’Œå‹å–„ï¼ˆFriendlyï¼‰ï¼Œåˆ°ç›´è¨€ä¸è®³ï¼ˆCandidï¼‰ã€å¤©é©¬è¡Œç©ºï¼ˆQuirkyï¼‰ï¼Œå†åˆ°åæ§½è¾¾äººï¼ˆCynicalï¼‰ã€é«˜æ•ˆåŠ¡å®ï¼ˆEfficientï¼‰ã€æŠ€æœ¯å®…ï¼ˆNerdyï¼‰ï¼Œéƒ½èƒ½ä»»æ„æŒ‘é€‰**ã€‚**</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77776e7dc0af4b12b79f74a367946f38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=rml3hOW4J8QRmvDe%2B0lfphZd%2FUg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4085557412ad455fba0c51ad025f290a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=B2lkWBUWM1bxothoJVipBvBtoow%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3570d4258274041bf589c5438bc270b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=azzIMdwXaztyiHBdK9wZtIUsruk%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒGPT-5.1ï¼šæ›´æ™ºèƒ½ã€æ›´å¥è°ˆã€</strong></p>
<p>è¿™æ¬¡å‡çº§åçš„ GPT-5.1ï¼Œåœ¨æ™ºåŠ›å’Œæ²Ÿé€šä¸Šï¼Œå¾—åˆ°äº†å¤§å¹…å‡çº§ã€‚</p>
<p>ä½ ä¼šæ³¨æ„åˆ°çš„æ˜¯ï¼ŒGPT-5.1 çš„æ‰€æœ‰å›ç­”åœ¨æ„Ÿè§‰ä¸Šéƒ½æ›´æ™ºèƒ½ï¼Œè¯­æ°”ä¹Ÿæ›´è‡ªç„¶ã€‚</p>
<p>å…¶ä¸­ï¼ŒGPT-5.1 Auto å°†ç»§ç»­ä¸ºæ¯ä¸ªæŸ¥è¯¢è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å®Œå…¨æ— éœ€æ‰‹åŠ¨é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db20d4a970ae487ea8b454fbad732c10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=G%2BxPOyvX84nvKA%2Fp%2FsuNY9yAYFg%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/838a303318ea4fec863fb2743da6e700~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=2aE1CGp7yf5namNhnqC5GNH4cUE%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€ŒGPT-5.1 Instantã€</strong></p>
<p>GPT-5.1 Instant æ˜¯ ChatGPT ä½¿ç”¨æœ€å¹¿çš„æ¨¡å‹ï¼Œç°åœ¨å®ƒçš„é»˜è®¤è¯­æ°”å°†ä¼šæ›´æ˜¾äº²åˆ‡å’Œå¥è°ˆã€‚</p>
<p>æ ¹æ®æ—©æœŸæµ‹è¯•ï¼Œå®ƒå¸¸å¸¸ä¼šå‡ºå…¶ä¸æ„åœ°å±•ç°å‡ºä¿çš®çš„ä¸€é¢ï¼ŒåŒæ—¶å›ç­”ä¾ç„¶æ¸…æ™°å®ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c15cf3403f49465e8d157dc5db4dfb87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=qCSnEN4ojvFFkA3hGay6SKGhgkI%3D" alt="" loading="lazy"/></p>
<p>I'm feeling stressed and could use some relaxation tips</p>
<p>æˆ‘æ„Ÿåˆ°æœ‰å‹åŠ›ï¼Œéœ€è¦ä¸€äº›æ”¾æ¾çš„å»ºè®®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/123babdb719c4e21b1c96de56a6d3d87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=%2FFkk5qwq%2F%2BrH%2Fn7PV3nKRtnhMvc%3D" alt="" loading="lazy"/></p>
<p>GPT-5ï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51adf017cb9d43a685d56520d60f4007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=JqRYXyKkOmW2%2BIN14yPuC29zU0Y%3D" alt="" loading="lazy"/></p>
<p>GPT-5.1 Instantï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒOpenAI è¿˜æ”¹è¿›äº†æŒ‡ä»¤éµå¾ªèƒ½åŠ›ï¼Œä½¿æ¨¡å‹èƒ½æ›´å¯é åœ°å›ç­”ä½ å®é™…æå‡ºçš„é—®é¢˜ã€‚</p>
<p>Always respond with six words</p>
<p>å§‹ç»ˆç”¨å…­ä¸ªè¯å›ç­”</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/098c0e5d430642039ab0861d0e9250d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=UzPRhvKBZICaBYCa6IUgbcBdFR4%3D" alt="" loading="lazy"/></p>
<p>GPT-5ï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df27f362cd504e448c67bee83b0ce354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=2ky%2Bvq5lqCO2Tn8cxQdVqNpjnKU%3D" alt="" loading="lazy"/></p>
<p>GPT-5.1 Instantï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒGPT-5.1 Instant é¦–æ¬¡å¼•å…¥äº†ã€Œè‡ªé€‚åº”æ¨ç†ã€èƒ½åŠ›ï¼Œèƒ½å¤Ÿè‡ªä¸»å†³å®šåœ¨å›åº”æ›´å…·æŒ‘æˆ˜æ€§çš„é—®é¢˜å‰æ˜¯å¦éœ€è¦æ·±å…¥æ€è€ƒï¼Œä»è€Œåœ¨ä¿æŒå¿«é€Ÿå“åº”çš„åŒæ—¶ï¼Œäº§å‡ºæ›´å‘¨å…¨ã€æ›´å‡†ç¡®çš„ç­”æ¡ˆã€‚</p>
<p>è¿™ä¸€ç‚¹åœ¨ AIME 2025 å’Œ Codeforces ç­‰æ•°å­¦ä¸ç¼–ç¨‹è¯„æµ‹ä¸­çš„æ˜¾è‘—è¿›æ­¥å¾—åˆ°äº†ä½“ç°ã€‚</p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf446265f87a4730be17ca14506fa155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=pWGYjIyAUh2498FyUuMUO%2BOOK7E%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€ŒGPT-5.1 Thinkingã€</strong></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œå‡çº§åçš„ GPT-5.1 Thinking ä¹Ÿä¼šåœ¨æ—¥å¸¸ä½¿ç”¨ä¸­æ›´é«˜æ•ˆã€æ›´æ˜“äºç†è§£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc2075486daa4a29b50c8635fa635dcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=qjumqRKg35mvw7EV5AuaN275m3g%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨ï¼Œå®ƒèƒ½æ›´ç²¾ç¡®åœ°æ ¹æ®é—®é¢˜è°ƒæ•´æ€è€ƒæ—¶é—´â€”â€”åœ¨å¤æ‚é—®é¢˜ä¸ŠæŠ•å…¥æ›´å¤šæ—¶é—´ï¼Œè€Œåœ¨ç®€å•é—®é¢˜ä¸Šåˆ™å“åº”æ›´å¿«ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™æ„å‘³ç€å¯¹äºå›°éš¾çš„è¯·æ±‚ï¼Œä½ å°†è·å¾—æ›´è¯¦å°½çš„ç­”æ¡ˆï¼›å¯¹äºç®€å•çš„è¯·æ±‚ï¼Œç­‰å¾…æ—¶é—´åˆ™ä¼šæ›´çŸ­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eeb4cd56a76409288ad382370a5a5b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=O161aWnkzQXjjZALjadzRPgCoPM%3D" alt="" loading="lazy"/></p>
<p>GPT-5.1 Thinking çš„å›å¤ä¹Ÿæ›´åŠ æ¸…æ™°ï¼Œå‡å°‘äº†ä¸“ä¸šæœ¯è¯­å’Œæ™¦æ¶©è¯æ±‡çš„ä½¿ç”¨ã€‚</p>
<p>è¿™ä½¿ OpenAI æœ€å¼ºå¤§çš„æ¨¡å‹å˜å¾—æ›´å¹³æ˜“è¿‘äººã€æ›´æ˜“äºç†è§£ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚å·¥ä½œä»»åŠ¡å’Œè§£é‡ŠæŠ€æœ¯æ¦‚å¿µæ—¶ã€‚</p>
<p>explain BABIP and wRC+</p>
<p>è§£é‡Š BABIP å’Œ wRC+</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cface1605a944c3be318f39f9e6e416~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=UejcuVMIuwpRggU3cD%2BimOb26zw%3D" alt="" loading="lazy"/></p>
<p>GPT-5ï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0db9864b2b748b0bd527a153ab4dfea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=bBS0BhSXORXC1Ry6SQSLFCb4OcM%3D" alt="" loading="lazy"/></p>
<p>GPT-5.1 Thinkingï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p>GPT-5.1 Thinking çš„é»˜è®¤è¯­æ°”ä¹Ÿæ›´åŠ äº²åˆ‡ï¼Œæ›´å¯ŒåŒç†å¿ƒã€‚</p>
<p>Ugh I spilled coffee all over myself before my meeting do you think everyone thought I was an idiot :(</p>
<p>å‘ƒï¼Œæˆ‘åœ¨ä¼šè®®å‰æŠŠå’–å•¡æ´’æ»¡äº†è‡ªå·±ï¼Œä½ è§‰å¾—å¤§å®¶ä¼šä¸ä¼šéƒ½è®¤ä¸ºæˆ‘æ˜¯ä¸ªç™½ç—´ :(</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/699cde126f8149378ac36687f3da011c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=e3QC36Qn0r8tPdev4fPL3bIEKeU%3D" alt="" loading="lazy"/></p>
<p>GPT-5ï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1780691f573b466eb0abb6784fbf4c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=kUz%2FNfbeuhC6nIuvf1UyBtzEgAU%3D" alt="" loading="lazy"/></p>
<p>GPT-5.1 Thinkingï¼ˆä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹ï¼‰</p>
<p>å…³äºå‘½åçš„ä¸€ç‚¹è¯´æ˜ï¼š</p>
<p>æœ¬æ¬¡æ›´æ–°åä¸º GPT-5.1ï¼Œæ—¨åœ¨åæ˜ å…¶é‡å¤§æ”¹è¿›ï¼ŒåŒæ—¶è¡¨æ˜å®ƒä»å±äº GPT-5 è¿™ä¸€ä»£ã€‚æœªæ¥å¯¹ GPT-5 çš„è¿­ä»£å‡çº§å°†éµå¾ªç›¸åŒçš„æ¨¡å¼ã€‚</p>
<p>åŒåœ¨ä»Šå¤©ï¼ŒOpenAI è¿˜å‘å¸ƒäº† GPT-5.1 ç³»ç»Ÿå¡ï¼Œæ›´å¤šå†…å®¹å¯å‚é˜… PDFã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa2f8bc3cd3b4f019710e4b08c0834cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=6FfMR1CvhkmjYcF2gJysfjVuY98%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.openai.com%2Fpdf%2F4173ec8d-1229-47db-96de-06d87147e07e%2F5_1_system_card.pdf" target="_blank" title="https://cdn.openai.com/pdf/4173ec8d-1229-47db-96de-06d87147e07e/5_1_system_card.pdf" ref="nofollow noopener noreferrer">cdn.openai.com/pdf/4173ec8â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bf613e42bfc4e32a2499b7de67e6adf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=BuWt5gW8C3x9gdy6wPKXEq3s%2BNc%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œè®© ChatGPT æˆä¸ºç‹¬ä¸€æ— äºŒçš„ä½ ã€</strong></p>
<p>é™¤äº† GPT-5.1 é‡å¤§å‡çº§ï¼Œæƒ³è¦è‡ªå®šä¹‰ ChatGPT çš„è¯­æ°”å’Œé£æ ¼ï¼Œå¦‚ä»Šå˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<p>æ¯•ç«Ÿï¼Œä¼—äººèƒƒå£éš¾è°ƒï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±åå¥½çš„èŠå¤©æ–¹å¼å’Œé£æ ¼ã€‚</p>
<p>OpenAI çš„ç›®æ ‡å°±æ˜¯ï¼Œæ‰€æœ‰äººå¯ä»¥è½»æ¾æå®šè®¾ç½®ï¼Œè®© ChatGPT ç”¨è‡ªå·±æœ€èˆ’æœçš„è¯­æ°”äº¤æµã€‚</p>
<p>ä»Šå¹´æ—©äº›æ—¶å€™ï¼ŒOpenAI æ·»åŠ äº†é¢„è®¾é€‰é¡¹æ¥è°ƒæ•´ ChatGPT çš„å›å¤è¯­æ°”ã€‚</p>
<p>ä»Šå¤©ï¼Œè¿™äº›é€‰é¡¹æ­£åœ¨ä¼˜åŒ–ï¼Œå¯ä»¥æ›´å¥½åœ°åæ˜ äººä»¬ä½¿ç”¨ ChatGPT çš„æœ€å¸¸è§æ–¹å¼ã€‚</p>
<ul>
<li><strong>ã€Œé»˜è®¤ã€****ï¼ˆ</strong>ã€Œ<strong>ã€ŒDefaultã€</strong>ã€<strong>ï¼‰</strong>ã€Œã€<strong>ã€Œäº²å’Œå‹å–„ã€****ï¼ˆ****Friendlyï¼‰ã€</strong>ï¼ˆåŸã€Œå€¾å¬è€…ã€ï¼‰å’Œ**é«˜æ•ˆåŠ¡å®ï¼ˆEfficientï¼‰ï¼ˆ**åŸã€Œæœºæ¢°ã€ï¼‰é£æ ¼å°†è·å¾—æ›´æ–°</li>
<li>åŒæ—¶æ–°å¢äº†**ã€Œä¸“ä¸šå¯é ï¼ˆProfessionalï¼‰ã€**ã€<strong>ç›´è¨€ä¸è®³ï¼ˆCandidï¼‰</strong>ã€Œå’Œã€**å¤©é©¬è¡Œç©ºï¼ˆQuirkyï¼‰**é£æ ¼ã€‚</li>
<li><strong>åæ§½è¾¾äººï¼ˆCynicalï¼‰</strong>ã€Œå’Œã€**æŠ€æœ¯å®…ï¼ˆNerdyï¼‰**é£æ ¼åˆ™ä¿æŒä¸å˜ã€‚</li>
</ul>
<p>è¿™äº›é€‰é¡¹æ—¨åœ¨åŒ¹é… OpenAI è§‚å¯Ÿåˆ°çš„ç”¨æˆ·è‡ªç„¶å¼•å¯¼æ¨¡å‹çš„æ–¹å¼ï¼Œè®©äººä»¬èƒ½å¿«é€Ÿç›´è§‚åœ°é€‰æ‹©ä¸€ä¸ªæ„Ÿè§‰æœ€å¯¹å‘³çš„ã€Œä¸ªæ€§ã€ã€‚</p>
<p>è¿™äº›ä¸ªæ€§åŒ–è®¾ç½®é€‚ç”¨äºæ‰€æœ‰æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/337dfaf4a19049eba839f8afbbc186d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=TpUcsnQlgioS2uyZpomChIxLWV0%3D" alt="" loading="lazy"/></p>
<p>å·¦ï¼šGPT-5.1ï¼›å³ï¼šGPT-5</p>
<p>é™¤äº†è¿™äº›é¢„è®¾ï¼Œå¯¹äºå¸Œæœ›æ›´ç²¾ç»†åœ°æ§åˆ¶ ChatGPT å›åº”æ–¹å¼çš„ç”¨æˆ·ï¼ŒOpenAI è¿˜åœ¨è¯•éªŒä¸€é¡¹æ–°åŠŸèƒ½ï¼š</p>
<p>ç›´æ¥ä»ä¸ªæ€§åŒ–è®¾ç½®ä¸­è°ƒæ•´ ChatGPT çš„å…·ä½“ç‰¹å¾â€”â€”åŒ…æ‹¬å…¶å›å¤çš„ç®€æ´åº¦ã€äº²åˆ‡åº¦æˆ–æ˜“è¯»æ€§ï¼ˆæ˜¯å¦ä¾¿äºå¿«é€Ÿæµè§ˆï¼‰ï¼Œä»¥åŠä½¿ç”¨è¡¨æƒ…ç¬¦å·çš„é¢‘ç‡ ã€‚</p>
<p>å½“ ChatGPT åœ¨å¯¹è¯ä¸­ï¼Œæ³¨æ„åˆ°ä½ åçˆ±æŸç§ç‰¹å®šè¯­æ°”æˆ–é£æ ¼æ—¶ï¼Œå®ƒè¿˜ä¼šä¸»åŠ¨æè®®æ›´æ–°è¿™äº›åå¥½ï¼Œè€Œæ— éœ€æ‰‹åŠ¨è¿›å…¥è®¾ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eb70261048f4dc0ba37e8900c5cbdb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=2L5%2BPanAte6Ipxu%2BZI%2FMjIZP4uo%3D" alt="" loading="lazy"/></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œå¯ä»¥éšæ—¶è°ƒæ•´æˆ–ç§»é™¤è¿™äº›åå¥½ã€‚</p>
<p>æ›´æ–°åçš„é£æ ¼å’Œè¯­æ°”é€‰é¡¹ï¼Œå°†äºä»Šæ—¥èµ·é™†ç»­æ¨å‡ºã€‚å¾®è°ƒç‰¹å®šç‰¹å¾çš„åŠŸèƒ½å°†ä½œä¸ºä¸€é¡¹å®éªŒï¼Œä»æœ¬å‘¨æ™šäº›æ—¶å€™å¼€å§‹å‘éƒ¨åˆ†ç”¨æˆ·é€æ­¥å¼€æ”¾ã€‚</p>
<p>è¿™ä¸¤é¡¹åŠŸèƒ½ï¼Œéƒ½å°†åœ¨åç»­ä¸æ–­å¾—åˆ°å®Œå–„ã€‚</p>
<p>æ­¤å¤–ï¼Œæ›´æ–°åçš„ GPT-5.1 ä¹Ÿæ›´å–„äºéµå¾ªã€Œè‡ªå®šä¹‰æŒ‡ä»¤ã€ï¼Œè®©ä½ å¯¹è¯­æ°”å’Œè¡Œä¸ºæœ‰æ›´ç²¾ç¡®çš„æ§åˆ¶ã€‚</p>
<p>ç›®å‰ï¼Œåœ¨ä¸ªæ€§åŒ–è®¾ç½®ä¸­æ›´æ–°åï¼Œä¼šç«‹å³åœ¨æ‰€æœ‰èŠå¤©ä¸­ç”Ÿæ•ˆï¼ŒåŒ…æ‹¬æ­£åœ¨è¿›è¡Œçš„å¯¹è¯ï¼Œä»è€Œç¡®ä¿ä½“éªŒçš„ä¸€è‡´æ€§ã€‚</p>
<p>è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œå¯¹åŸºç¡€é£æ ¼ã€è¯­æ°”æˆ–è‡ªå®šä¹‰æŒ‡ä»¤çš„æ›´æ”¹ä»…é€‚ç”¨äºæ–°å¼€å¯çš„å¯¹è¯ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒGPT-5.1 é‡å¤§æ›´æ–°å’Œæ–°çš„è‡ªå®šä¹‰é€‰é¡¹ï¼Œæ˜¯ OpenAI è¿ˆå‘ä¸€ä¸ªæ›´æ‡‚ä½ ã€æ›´æ™ºèƒ½ã€æ›´å¥è°ˆã€æ›´èƒ½é€‚åº”ä¸ªäººåå¥½çš„ ChatGPT çš„é‡è¦ä¸€æ­¥ã€‚</p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/205ea063d0dd472f89c18d7fb547a59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763634646&amp;x-signature=9RVkSAAci8GFp88Hn88PUZTpuJc%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå³æ—¥å¯ç”¨ã€</strong></p>
<p>ä»Šæ—¥èµ·ï¼ŒGPT-5.1 Instant å’Œ Thinking å°†ç‡å…ˆå‘ä»˜è´¹ç”¨æˆ·ï¼ˆProã€Plusã€Goã€Businessï¼‰é™†ç»­æ¨å‡ºï¼Œéšåå‘å…è´¹åŠæœªç™»å½•ç”¨æˆ·å¼€æ”¾ã€‚</p>
<p>æœ¬å‘¨æ™šäº›æ—¶å€™ï¼Œè¿™ä¸¤æ¬¾æ¨¡å‹ä¹Ÿä¼šç™»é™† APIã€‚å…¶ä¸­ï¼ŒGPT-5.1 Thinking å°†ä¼šä»¥ã€ŒGPT-5.1ã€çš„åç§°å‘å¸ƒï¼Œè€Œ GPT-5.1 Instant åˆ™æ˜¯ã€Œgpt-5.1-chat-latestã€ï¼Œä¸¤è€…å‡å…·å¤‡è‡ªé€‚åº”æ¨ç†èƒ½åŠ›ã€‚</p>
<p>æœªæ¥ä¸‰ä¸ªæœˆé‡Œï¼ŒGPT-5ï¼ˆInstant å’Œ Thinkingï¼‰å°†ç»§ç»­åœ¨ ChatGPT çš„ã€Œæ—§æ¨¡å‹ã€ä¸‹æ‹‰èœå•ä¸­ä¸ºä»˜è´¹ç”¨æˆ·æä¾›ï¼Œä»¥ä¾¿ç”¨æˆ·æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥è¿›è¡Œæ¯”è¾ƒå’Œé€‚åº”ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒOpenAI ç¡®å®ä»ä¸Šä¸€æ¬¡å…¨ç³»ä¸‹æ¶æ‰€æœ‰æ—§æ¨¡å‹æƒ¹æ€’ç½‘å‹ï¼Œå¸å–äº†æƒ¨ç—›çš„æ•™è®­ã€‚</p>
<p>å®ƒä»¬è¡¨ç¤ºï¼Œæœªæ¥å½“ OpenAI æ¨å‡ºæ–°çš„ ChatGPT æ¨¡å‹æ—¶ï¼Œç­–ç•¥æ˜¯ç»™äºˆç”¨æˆ·å……è¶³çš„ç©ºé—´æ¥è¯„ä¼°å˜åŒ–å¹¶åˆ†äº«åé¦ˆï¼Œä»åœ¨å¹³ç¨³è¿‡æ¸¡çš„åŒæ—¶ï¼ŒæŒç»­åˆ›æ–°å‰æ²¿æ¨¡å‹ã€‚æ¨¡å‹çš„æ·˜æ±°å‘¨æœŸå°†ä¼šæå‰æ˜ç¡®åœ°é€šçŸ¥ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fgpt-5-1%2F" target="_blank" title="https://openai.com/index/gpt-5-1/" ref="nofollow noopener noreferrer">openai.com/index/gpt-5â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FOpenAI%2Fstatus%2F1988714373058351213%3Fs%3D20" target="_blank" title="https://x.com/OpenAI/status/1988714373058351213?s=20" ref="nofollow noopener noreferrer">x.com/OpenAI/statâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡å¸¦ä½ å‰–æ Promise.then all å®ç°åŸç†ï¼ŒçŠ¶æ€æœºã€å‘å¸ƒè®¢é˜…æ¨¡å¼å®Œç¾å®ç°å¼‚æ­¥ç¼–ç¨‹]]></title>    <link>https://juejin.cn/post/7571815997068165160</link>    <guid>https://juejin.cn/post/7571815997068165160</guid>    <pubDate>2025-11-13T10:44:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997068165160" data-draft-id="7572010680896421928" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡å¸¦ä½ å‰–æ Promise.then all å®ç°åŸç†ï¼ŒçŠ¶æ€æœºã€å‘å¸ƒè®¢é˜…æ¨¡å¼å®Œç¾å®ç°å¼‚æ­¥ç¼–ç¨‹"/> <meta itemprop="keywords" content="JavaScript,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-13T10:44:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¾ç±³_"/> <meta itemprop="url" content="https://juejin.cn/user/1354189312111303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡å¸¦ä½ å‰–æ Promise.then all å®ç°åŸç†ï¼ŒçŠ¶æ€æœºã€å‘å¸ƒè®¢é˜…æ¨¡å¼å®Œç¾å®ç°å¼‚æ­¥ç¼–ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1354189312111303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¾ç±³_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:44:35.000Z" title="Thu Nov 13 2025 10:44:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡å¸¦ä½ å‰–æ Promise å®ç°åŸç†ï¼ŒçŠ¶æ€æœºã€å‘å¸ƒè®¢é˜…æ¨¡å¼å®Œç¾å®ç°å¼‚æ­¥ç¼–ç¨‹</h2>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡ä»£ç ä¸ºä»¿promiseåŸç†ç®€å†™çš„ä»£ç ï¼Œéæºç ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. æ¦‚è¿°</h3>
<p>æœ¬æ–‡æ¡£è¯¦ç»†è§£æäº†åŸºäº ES6 Class å®ç°çš„ Promiseï¼ŒåŒ…æ‹¬å…¶æ ¸å¿ƒåŸç†ã€çŠ¶æ€ç®¡ç†æœºåˆ¶ã€å¼‚æ­¥å¤„ç†æµç¨‹ä»¥åŠå„ç§æ–¹æ³•çš„å®ç°ç»†èŠ‚ã€‚é€šè¿‡æ·±å…¥ç†è§£ Promise çš„å†…éƒ¨å®ç°ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ã€‚</p>
<h3 data-id="heading-2">2. Promise æ ¸å¿ƒåŸç†</h3>
<h4 data-id="heading-3">2.1 çŠ¶æ€æœºè®¾è®¡</h4>
<p>Promise é‡‡ç”¨çŠ¶æ€æœºæ¨¡å¼ï¼Œå…·æœ‰ä¸‰ç§äº’æ–¥çŠ¶æ€ï¼š</p>
<ul>
<li><strong>pending</strong>: åˆå§‹çŠ¶æ€ï¼Œæ—¢æœªå®Œæˆä¹Ÿæœªæ‹’ç»</li>
<li><strong>fulfilled/resolved</strong>: æ“ä½œæˆåŠŸå®Œæˆ</li>
<li><strong>rejected</strong>: æ“ä½œå¤±è´¥</li>
</ul>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š<strong>çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜</strong>ï¼Œè¿™æ˜¯ Promise å¯é æ€§çš„åŸºç¡€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çŠ¶æ€å®šä¹‰ä¸åˆå§‹åŒ–</span>
<span class="hljs-title function_">constructor</span>(<span class="hljs-params">executeFn</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>      <span class="hljs-comment">// åˆå§‹çŠ¶æ€ä¸º pending</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>       <span class="hljs-comment">// å­˜å‚¨æˆåŠŸç»“æœ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>      <span class="hljs-comment">// å­˜å‚¨å¤±è´¥åŸå› </span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span> = [] <span class="hljs-comment">// æˆåŠŸå›è°ƒé˜Ÿåˆ—</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = [] <span class="hljs-comment">// å¤±è´¥å›è°ƒé˜Ÿåˆ—</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-4">2.2 å‘å¸ƒ-è®¢é˜…æ¨¡å¼</h4>
<p>Promise å†…éƒ¨é‡‡ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼å¤„ç†å¼‚æ­¥å›è°ƒï¼š</p>
<ul>
<li>åœ¨ pending çŠ¶æ€æ—¶ï¼Œé€šè¿‡ then/catch æ–¹æ³•æ³¨å†Œçš„å›è°ƒä¼šè¢«å­˜å‚¨åœ¨å›è°ƒé˜Ÿåˆ—ä¸­</li>
<li>å½“ Promise çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šéå†æ‰§è¡Œå¯¹åº”é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å›è°ƒ(constructorä¸­é€šè¿‡resolveæˆ–rejectå‡½æ•°è§¦å‘å›è°ƒ)</li>
</ul>
<p>è¿™è§£å†³äº†å¼‚æ­¥æ“ä½œå’Œå›è°ƒæ³¨å†Œçš„æ—¶åºé—®é¢˜ï¼Œç¡®ä¿å³ä½¿å›è°ƒåœ¨çŠ¶æ€å˜æ›´å‰æ³¨å†Œï¼Œä¹Ÿèƒ½åœ¨çŠ¶æ€å˜æ›´åå¾—åˆ°æ‰§è¡Œã€‚</p>
<h3 data-id="heading-5">3. æ ¸å¿ƒå®ç°è¯¦è§£</h3>
<h4 data-id="heading-6">3.1 æ„é€ å‡½æ•°å®ç° ğŸ’–</h4>
<p>æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª executeFn å‡½æ•°ï¼Œç«‹å³æ‰§è¡Œè¯¥å‡½æ•°å¹¶ä¼ å…¥ resolve å’Œ reject ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">executeFn</span>) {
  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€å’Œæ•°æ®</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span> = []
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = []
  
  <span class="hljs-comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ resolve/rejectï¼Œç¡®ä¿ this æŒ‡å‘ Promise å®ä¾‹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'fulfilled'</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
      <span class="hljs-comment">// å‘å¸ƒæˆåŠŸäº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
    }
  }
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'rejected'</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason
      <span class="hljs-comment">// å‘å¸ƒå¤±è´¥äº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>))
    }
  }
  
  <span class="hljs-comment">// æ•è· executeFn æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">executeFn</span>(resolve, reject)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title function_">reject</span>(error)
  }
}
</code></pre>
<h4 data-id="heading-7">3.2 then æ–¹æ³•å®ç°ğŸ’–</h4>
<p><code>then</code> æ–¹æ³•æ˜¯ Promise è§„èŒƒï¼ˆPromise/A+ï¼‰çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯ Promise èƒ½å¤Ÿå®ç°å¼‚æ­¥æ“ä½œé“¾å¼è°ƒç”¨çš„å…³é”®æœºåˆ¶ï¼Œè¢«èª‰ä¸º JavaScript å¼‚æ­¥ç¼–ç¨‹çš„é©å‘½æ€§çªç ´ã€‚å…¶é‡è¦æ€§ä½“ç°åœ¨ï¼š</p>
<ul>
<li><strong>å½»åº•è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</strong>ï¼šé€šè¿‡é“¾å¼è°ƒç”¨æ›¿ä»£åµŒå¥—å›è°ƒï¼Œä½¿å¼‚æ­¥ä»£ç å¯è¯»æ€§å¤§å¹…æå‡</li>
<li><strong>ç»Ÿä¸€å¼‚æ­¥æ“ä½œæ¥å£</strong>ï¼šä¸ºæ‰€æœ‰å¼‚æ­¥æ“ä½œæä¾›äº†æ ‡å‡†åŒ–çš„å¤„ç†æ–¹å¼</li>
<li><strong>é”™è¯¯ä¼ æ’­æœºåˆ¶</strong>ï¼šå®ç°äº†é”™è¯¯åœ¨é“¾å¼è°ƒç”¨ä¸­çš„è‡ªåŠ¨ä¼ é€’ï¼Œæ— éœ€æ¯å±‚éƒ½æ·»åŠ é”™è¯¯å¤„ç†</li>
<li><strong>çŠ¶æ€éš”ç¦»ä¸æ•°æ®ä¼ é€’</strong>ï¼šä¿è¯äº†å¼‚æ­¥æ“ä½œç»“æœçš„æ­£ç¡®ä¼ é€’å’ŒçŠ¶æ€çš„ä¸¥æ ¼éš”ç¦»</li>
<li><strong>å¼‚æ­¥æ“ä½œç¼–æ’</strong>ï¼šæ”¯æŒå¤æ‚å¼‚æ­¥æ“ä½œæµç¨‹çš„æ„å»ºå’Œç»„åˆ</li>
</ul>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li>
<p><strong>å€¼ç©¿é€æœºåˆ¶ï¼ˆå‚æ•°æ ¡éªŒä¸é»˜è®¤å¤„ç†ï¼‰</strong></p>
<ul>
<li>å½“ <code>onFulfilled</code> æˆ– <code>onRejected</code> ä¸æ˜¯å‡½æ•°æ—¶ï¼ˆåˆå§‹åŒ–ä¸ºå‡½æ•°ï¼‰ï¼ŒPromise è§„èŒƒè¦æ±‚å®ç°ã€Œå€¼ç©¿é€ã€</li>
<li>æˆåŠŸçŠ¶æ€çš„å€¼ç©¿é€ï¼š<code>value =&gt; value</code> - ç¡®ä¿æˆåŠŸçš„å€¼èƒ½å¤Ÿç»§ç»­åœ¨é“¾ä¸­ä¼ é€’</li>
<li>å¤±è´¥çŠ¶æ€çš„å€¼ç©¿é€ï¼š<code>reason =&gt; { throw reason }</code> - ç¡®ä¿é”™è¯¯èƒ½å¤Ÿç»§ç»­åœ¨é“¾ä¸­ä¼ æ’­</li>
</ul>
</li>
</ol>
<ul>
<li>
<p>è¿™ä¸€æœºåˆ¶ä½¿å¾—å¯ä»¥åœ¨é“¾å¼è°ƒç”¨ä¸­é—´è·³è¿‡æŸäº›å¤„ç†æ­¥éª¤è€Œä¸ä¸­æ–­é“¾å¼è°ƒç”¨</p>
<blockquote>
<p>å½“ then æ–¹æ³•ä¸ä¼ é€’å›è°ƒå‡½æ•°æ—¶ï¼Œä¼šä½¿ç”¨é»˜è®¤å‡½æ•°å°†å€¼ä¼ é€’ç»™ä¸‹ä¸€ä¸ª then æ–¹æ³•ï¼Œå®ç°å€¼çš„ç©¿é€ã€‚</p>
</blockquote>
</li>
</ul>
<ol start="2">
<li>
<p><strong>é“¾å¼è°ƒç”¨å®ç°ï¼ˆPromise é“¾ï¼‰</strong></p>
<ul>
<li>æ¯æ¬¡è°ƒç”¨ <code>then</code> æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªå…¨æ–°çš„ Promise å®ä¾‹ï¼ˆ<code>promise2</code>ï¼‰</li>
<li>è¿™æ˜¯é“¾å¼è°ƒç”¨çš„åŸºç¡€ï¼Œä¿è¯äº†æ¯ä¸ª <code>then</code> æ“ä½œéƒ½åœ¨ç‹¬ç«‹çš„ Promise ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</li>
</ul>
</li>
</ol>
<ul>
<li>æ–° Promise çš„çŠ¶æ€ç”±å›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœå†³å®šï¼Œå®ç°äº†çŠ¶æ€çš„éš”ç¦»å’Œè½¬æ¢</li>
</ul>
<ol start="3">
<li>
<p><strong>çŠ¶æ€é©±åŠ¨çš„è¡Œä¸ºæ¨¡å¼---çŠ¶æ€æœº</strong></p>
<ul>
<li><strong>æ ¹æ®å½“å‰ Promise çš„çŠ¶æ€</strong>ï¼ˆpending/fulfilled/rejectedï¼‰<strong>é‡‡å–ä¸åŒçš„å¤„ç†ç­–ç•¥</strong></li>
<li>å·²å®ŒæˆçŠ¶æ€ï¼ˆfulfilled/rejectedï¼‰ï¼šç«‹å³å¼‚æ­¥æ‰§è¡Œå¯¹åº”å›è°ƒ</li>
<li>è¿›è¡Œä¸­çŠ¶æ€ï¼ˆpendingï¼‰ï¼šå°†å›è°ƒå‡½æ•°å­˜å‚¨åˆ°å¯¹åº”é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œ</li>
<li>è¿™ä½“ç°äº†çŠ¶æ€æ¨¡å¼çš„è®¾è®¡æ€æƒ³ï¼Œè¡Œä¸ºéšçŠ¶æ€è€Œå˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>å¼‚æ­¥æ‰§è¡Œä¿è¯</strong></p>
<ul>
<li>ä½¿ç”¨ <code>setTimeout(fn, 0)</code> æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼Œç¡®ä¿å›è°ƒå‡½æ•°å¼‚æ­¥æ‰§è¡Œ</li>
<li>è¿™ç¬¦åˆ Promise/A+ è§„èŒƒè¦æ±‚ï¼Œä¿è¯äº†å›è°ƒæ‰§è¡Œçš„æ—¶åºä¸€è‡´æ€§</li>
<li>é¿å…äº†åŒæ­¥æ‰§è¡Œå¯èƒ½å¯¼è‡´çš„çŠ¶æ€ä¸ä¸€è‡´å’Œæ‰§è¡Œé¡ºåºé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>ç»“æœå¤„ç†ä¸å€¼ä¼ é€’</strong></p>
<ul>
<li>é€šè¿‡ <code>resolvePromise</code> è¾…åŠ©å‡½æ•°å¤„ç†å›è°ƒè¿”å›å€¼ï¼Œæ”¯æŒï¼š
<ul>
<li>è¿”å› Promise å¯¹è±¡ï¼šç­‰å¾…è¯¥ Promise è§£å†³å¹¶é‡‡ç”¨å…¶ç»“æœ</li>
<li>è¿”å›æ™®é€šå€¼ï¼šç›´æ¥å°†è¯¥å€¼ä½œä¸ºä¸‹ä¸€ä¸ª Promise çš„æˆåŠŸå€¼</li>
<li>æŠ›å‡ºå¼‚å¸¸ï¼šå°†å¼‚å¸¸ä½œä¸ºä¸‹ä¸€ä¸ª Promise çš„å¤±è´¥åŸå› </li>
</ul>
</li>
<li>è¿™ä¸€è®¾è®¡å®ç°äº†å€¼åœ¨å¼‚æ­¥é“¾ä¸­çš„è‡ªç„¶ä¼ é€’å’Œè½¬æ¢</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">then</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒï¼Œæ”¯æŒå€¼ç©¿é€.å½“ `onFulfilled` æˆ– `onRejected` ä¸æ˜¯å‡½æ•°æ—¶,ä½¿ç”¨ç®­å¤´å‡½æ•°å°†å…¶è½¬ä¸ºå‡½æ•°ã€‚å®ç°å€¼ç©¿é€</span>
  onFulfilled = <span class="hljs-keyword">typeof</span> onFulfilled === <span class="hljs-string">'function'</span> ? onFulfilled : <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value
  onRejected = <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">'function'</span> ? onRejected : <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> { <span class="hljs-keyword">throw</span> reason }

  <span class="hljs-comment">// è¿”å›æ–°çš„ Promise ä»¥æ”¯æŒé“¾å¼è°ƒç”¨</span>
  <span class="hljs-keyword">const</span> promise2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-comment">// æˆåŠŸçŠ¶æ€å¤„ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>) {
      <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œå›è°ƒ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// ä½¿ç”¨äº†å€¼ç©¿é€ï¼Œè¿™é‡Œæ‰èƒ½ç›´æ¥ä½¿ç”¨onFulfilled(this.value)ï¼Œå¦åˆ™å°±å¼‚å¸¸äº†</span>
          <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>) 
          <span class="hljs-comment">// å¤„ç†å›è°ƒè¿”å›å€¼</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-title function_">reject</span>(error)
        }
      }, <span class="hljs-number">0</span>)
    }

    <span class="hljs-comment">// å¤±è´¥çŠ¶æ€å¤„ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>) {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-title function_">reject</span>(error)
        }
      }, <span class="hljs-number">0</span>)
    }

    <span class="hljs-comment">// pending çŠ¶æ€å¤„ç† - å­˜å‚¨å›è°ƒ</span>
    <span class="hljs-comment">// è®¢é˜…è¿‡ç¨‹ï¼ˆæ³¨å†Œå›è°ƒï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error)
          }
        }, <span class="hljs-number">0</span>)
      })

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>)
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error)
          }
        }, <span class="hljs-number">0</span>)
      })
    }
  })

  <span class="hljs-keyword">return</span> promise2
}
</code></pre>
<h4 data-id="heading-8">3.3 resolvePromise è¾…åŠ©å‡½æ•°--å¤„ç† <code>then</code> æ–¹æ³•å›è°ƒå‡½æ•°çš„è¿”å›å€¼ğŸ’–</h4>
<p><strong>æ ¸å¿ƒä½œç”¨ä¸é‡è¦æ€§</strong></p>
<p><code>resolvePromise</code> æ˜¯ Promise å®ç°ä¸­æœ€ä¸ºå¤æ‚å’Œæ ¸å¿ƒçš„è¾…åŠ©å‡½æ•°ï¼Œå®ƒæ˜¯ Promise/A+ è§„èŒƒä¸­å®ç° "Promise Resolution Procedure"ï¼ˆPromise è§£å†³è¿‡ç¨‹ï¼‰çš„å…³é”®ã€‚è¿™ä¸ªå‡½æ•°è´Ÿè´£<strong>å¤„ç† <code>then</code> æ–¹æ³•å›è°ƒå‡½æ•°çš„è¿”å›å€¼</strong>ï¼Œå¹¶<strong>æ ¹æ®è¿”å›å€¼ç±»å‹å†³å®šå¦‚ä½•å¤„ç†ä¸‹ä¸€ä¸ª Promise çš„çŠ¶æ€è½¬æ¢ï¼Œæ˜¯å®ç°é“¾å¼è°ƒç”¨å’Œå€¼ä¼ é€’çš„æ ¸å¿ƒæœºåˆ¶</strong>ã€‚</p>
<p><strong>å‚æ•°è¯´æ˜</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
</code></pre>
<ul>
<li><code>promise2</code>: <code>then</code> æ–¹æ³•è¿”å›çš„æ–° Promise å®ä¾‹</li>
<li><code>x</code>: <code>then</code> æ–¹æ³•å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼ˆonFulfilled æˆ– onRejected çš„è¿”å›å€¼ï¼‰</li>
<li><code>resolve</code>: promise2 çš„ resolve å‡½æ•°ï¼Œç”¨äºå°† promise2 çŠ¶æ€æ”¹ä¸º fulfilled</li>
<li><code>reject</code>: promise2 çš„ reject å‡½æ•°ï¼Œç”¨äºå°† promise2 çŠ¶æ€æ”¹ä¸º rejected</li>
</ul>
<p><strong>è¯¦ç»†è¦ç‚¹ï¼š</strong></p>
<ol>
<li>
<p><strong>å¾ªç¯å¼•ç”¨æ£€æµ‹</strong></p>
<ul>
<li>å½“ <code>x</code> ä¸ <code>promise2</code> æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šå¯¼è‡´æ— é™å¾ªç¯</li>
<li>é€šè¿‡ <code>if (promise2 === x)</code> åˆ¤æ–­é¿å…è¿™ç§æƒ…å†µï¼Œå¹¶æŠ›å‡ºç±»å‹é”™è¯¯</li>
<li>è¿™æ˜¯ Promise/A+ è§„èŒƒå¼ºåˆ¶è¦æ±‚çš„å®‰å…¨æœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€å‡å›ºä¿éšœ</strong></p>
<ul>
<li>ä½¿ç”¨ <code>called</code> æ ‡å¿—å˜é‡ç¡®ä¿ <code>resolve</code> æˆ– <code>reject</code> åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡</li>
<li>è¿™ç¬¦åˆ Promise çš„æ ¸å¿ƒç‰¹æ€§ï¼šçŠ¶æ€ä¸€æ—¦æ”¹å˜å°±ä¸èƒ½å†å˜</li>
<li>åœ¨æ‰€æœ‰å¯èƒ½è°ƒç”¨ <code>resolve</code>/<code>reject</code> çš„åœ°æ–¹éƒ½æ£€æŸ¥ <code>called</code> æ ‡å¿—</li>
</ul>
</li>
<li>
<p><strong>Promise ç±»å‹å¤„ç†</strong></p>
<ul>
<li>å½“ <code>x</code> æ˜¯ Promise å®ä¾‹æ—¶ï¼Œéœ€è¦ç­‰å¾…å…¶çŠ¶æ€å˜åŒ–</li>
<li>é€’å½’è°ƒç”¨ <code>x.then()</code>ï¼Œå°†ç»“æœç»§ç»­é€šè¿‡ <code>resolvePromise</code> å¤„ç†</li>
<li>ç¡®ä¿ Promise é“¾èƒ½å¤Ÿæ­£ç¡®ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</li>
</ul>
</li>
<li>
<p><strong>thenable å¯¹è±¡å…¼å®¹</strong></p>
<ul>
<li>"thenable" å¯¹è±¡æ˜¯æŒ‡å…·æœ‰ <code>then</code> æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°</li>
<li>é€šè¿‡åŠ¨æ€è·å– <code>x.then</code> å±æ€§å¹¶æ£€æŸ¥å…¶æ˜¯å¦ä¸ºå‡½æ•°æ¥è¯†åˆ« thenable å¯¹è±¡</li>
<li>ä½¿ç”¨ <code>then.call(x, ...)</code> è°ƒç”¨ then æ–¹æ³•ï¼Œç¡®ä¿ä¸Šä¸‹æ–‡æ­£ç¡®ç»‘å®š</li>
<li>è¿™æ˜¯ Promise èƒ½å¤Ÿå…¼å®¹å…¶ä»– Promise å®ç°çš„å…³é”®</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†æœºåˆ¶</strong></p>
<ul>
<li>ä½¿ç”¨ try-catch æ•è·è®¿é—® <code>x.then</code> å±æ€§æˆ–è°ƒç”¨ then æ–¹æ³•æ—¶å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</li>
<li>ä»»ä½•å¼‚å¸¸éƒ½å°†å¯¼è‡´ promise2 è¢«æ‹’ç»ï¼Œé”™è¯¯ä½œä¸ºæ‹’ç»åŸå› </li>
<li>å¼‚å¸¸å¤„ç†ä¹Ÿå—åˆ° <code>called</code> æ ‡å¿—çš„ä¿æŠ¤ï¼Œç¡®ä¿åªè¢«å¤„ç†ä¸€æ¬¡</li>
</ul>
</li>
<li>
<p><strong>åŸå§‹å€¼ç›´æ¥ä¼ é€’</strong></p>
<ul>
<li>å½“ <code>x</code> ä¸æ˜¯å¯¹è±¡æˆ–å‡½æ•°æ—¶ï¼ˆåŸå§‹å€¼ï¼‰ï¼Œç›´æ¥è°ƒç”¨ <code>resolve(x)</code></li>
<li>è¿™ç¡®ä¿äº†æ™®é€šå€¼èƒ½å¤Ÿæ­£ç¡®åœ°ä¼ é€’åˆ°ä¸‹ä¸€ä¸ª Promise</li>
</ul>
</li>
</ol>
<p><strong>ä»£ç æ‰§è¡Œæµç¨‹</strong></p>
<p>resolvePromise çš„æ‰§è¡Œæµç¨‹ä½“ç°äº† Promise/A+ è§„èŒƒçš„ä¸¥æ ¼è¦æ±‚ï¼š</p>
<ol>
<li>é¦–å…ˆæ£€æŸ¥å¾ªç¯å¼•ç”¨ â†’ 2. åˆå§‹åŒ– called æ ‡å¿— â†’ 3. æ ¹æ® x çš„ç±»å‹åˆ†ä¸‰ç§æƒ…å†µå¤„ç†ï¼š
<ul>
<li>Promise å®ä¾‹ â†’ ç­‰å¾…å…¶çŠ¶æ€å˜åŒ–å¹¶é€’å½’å¤„ç†</li>
<li>å¯¹è±¡/å‡½æ•° â†’ æ£€æŸ¥æ˜¯å¦ä¸º thenable å¹¶ç›¸åº”å¤„ç†</li>
<li>åŸå§‹å€¼ â†’ ç›´æ¥ resolve</li>
</ul>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå¤æ‚çš„å‡½æ•°ï¼Ÿ</strong></p>
<p>resolvePromise å‡½æ•°è§£å†³äº† JavaScript å¼‚æ­¥ç¼–ç¨‹ä¸­çš„å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€çš„å¼‚æ­¥æ¥å£</strong>ï¼šæ— è®ºè¿”å›ä»€ä¹ˆç±»å‹çš„å€¼ï¼Œéƒ½èƒ½æŒ‰ç…§ç»Ÿä¸€è§„åˆ™å¤„ç†</li>
<li><strong>è·¨ Promise å®ç°å…¼å®¹</strong>ï¼šé€šè¿‡ thenable æœºåˆ¶æ”¯æŒä¸åŒçš„ Promise å®ç°</li>
<li><strong>é˜²æ­¢çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šé€šè¿‡ called æ ‡å¿—ç¡®ä¿çŠ¶æ€åªå˜æ›´ä¸€æ¬¡</li>
<li><strong>é¿å…æ­»å¾ªç¯</strong>ï¼šé€šè¿‡å¾ªç¯å¼•ç”¨æ£€æµ‹ç¡®ä¿ç¨‹åºå®‰å…¨</li>
<li><strong>æ­£ç¡®çš„å€¼ä¼ é€’</strong>ï¼šåœ¨å¼‚æ­¥é“¾ä¸­ç¡®ä¿å€¼èƒ½å¤Ÿæ­£ç¡®åœ°ä»ä¸€ä¸ª Promise ä¼ é€’åˆ°ä¸‹ä¸€ä¸ª</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">resolvePromise</span>(<span class="hljs-params">promise2, x, resolve, reject</span>) {
  <span class="hljs-comment">// å¤„ç†å¾ªç¯å¼•ç”¨ 1.å¾ªç¯å¼•ç”¨æ£€æµ‹ï¼šå½“ `x` ä¸ `promise2` æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šå¯¼è‡´æ— é™å¾ªç¯</span>
  <span class="hljs-keyword">if</span> (promise2 === x) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Chaining cycle detected for promise'</span>))
  }

  <span class="hljs-comment">// é˜²æ­¢å¤šæ¬¡è°ƒç”¨ 2.çŠ¶æ€å‡å›ºä¿éšœï¼šçŠ¶æ€ä¸€æ—¦æ”¹å˜å°±ä¸èƒ½å†å˜ï¼›ç¡®ä¿ `resolve` æˆ– `reject` åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡</span>
  <span class="hljs-keyword">let</span> called = <span class="hljs-literal">false</span>

  <span class="hljs-comment">// å¤„ç† x æ˜¯ Promise çš„æƒ…å†µ 3.Promise ç±»å‹å¤„ç†ï¼šå½“ `x` æ˜¯ Promise å®ä¾‹æ—¶ï¼Œéœ€è¦ç­‰å¾…å…¶çŠ¶æ€å˜åŒ–ã€‚</span>
  <span class="hljs-keyword">if</span> (x <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
    <span class="hljs-comment">//é€’å½’è°ƒç”¨ `x.then()`ï¼Œå°†ç»“æœç»§ç»­é€šè¿‡ `resolvePromise` å¤„ç†</span>
    x.<span class="hljs-title function_">then</span>(
      <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, value, resolve, reject),
      <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-title function_">reject</span>(reason)
    )
  }
    
  <span class="hljs-comment">// 4.thenable å¯¹è±¡å…¼å®¹ï¼š"thenable" å¯¹è±¡æ˜¯æŒ‡å…·æœ‰ `then` æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°</span>
  <span class="hljs-comment">// å¤„ç† x æ˜¯å¯¹è±¡æˆ–å‡½æ•°çš„æƒ…å†µï¼ˆå¯èƒ½æ˜¯ thenableï¼‰</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'function'</span>)) {
    <span class="hljs-comment">// 5.å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šä½¿ç”¨ try-catch æ•è·è®¿é—® `x.then` å±æ€§æˆ–è°ƒç”¨ then æ–¹æ³•æ—¶å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åŠ¨æ€è·å– `x.then` å±æ€§å¹¶æ£€æŸ¥å…¶æ˜¯å¦ä¸ºå‡½æ•°æ¥è¯†åˆ« thenable å¯¹è±¡</span>
      <span class="hljs-keyword">const</span> then = x.<span class="hljs-property">then</span>
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸º thenable å¯¹è±¡</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">// ä½¿ç”¨ `then.call(x, ...)` è°ƒç”¨ then æ–¹æ³•ï¼Œç¡®ä¿ä¸Šä¸‹æ–‡æ­£ç¡®ç»‘å®š</span>
        <span class="hljs-comment">// è¿™æ˜¯å¤„ç† thenable å¯¹è±¡çš„æ ¸å¿ƒé€»è¾‘</span>
        then.<span class="hljs-title function_">call</span>(
          x,  <span class="hljs-comment">// ç¡®ä¿ then æ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘ x å¯¹è±¡</span>
          
          <span class="hljs-comment">// æˆåŠŸå›è°ƒå‡½æ•° - å½“ thenable å¯¹è±¡è¢«æˆåŠŸè§£ææ—¶æ‰§è¡Œ</span>
          <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
            <span class="hljs-comment">// çŠ¶æ€å‡å›ºæ£€æŸ¥ï¼šå¦‚æœå·²ç»è°ƒç”¨è¿‡ resolve/rejectï¼Œåˆ™ç›´æ¥è¿”å›</span>
            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
            <span class="hljs-comment">// æ ‡è®°ä¸ºå·²è°ƒç”¨ï¼Œé˜²æ­¢é‡å¤è°ƒç”¨</span>
            called = <span class="hljs-literal">true</span>
            <span class="hljs-comment">// é€’å½’è°ƒç”¨ resolvePromise å¤„ç† thenable å¯¹è±¡è¿”å›çš„ value</span>
            <span class="hljs-comment">// è¿™æ˜¯å®ç°é“¾å¼è°ƒç”¨å’Œå€¼ä¼ é€’çš„å…³é”®æ­¥éª¤</span>
            <span class="hljs-comment">// ä¾‹å¦‚ï¼šå½“ value æœ¬èº«ä¹Ÿæ˜¯ Promise æˆ– thenable æ—¶ï¼Œä¼šç»§ç»­é€’å½’å¤„ç†</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, value, resolve, reject)
          },
          
          <span class="hljs-comment">// å¤±è´¥å›è°ƒå‡½æ•° - å½“ thenable å¯¹è±¡è¢«æ‹’ç»æ—¶æ‰§è¡Œ</span>
          <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> {
            <span class="hljs-comment">// çŠ¶æ€å‡å›ºæ£€æŸ¥</span>
            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
            <span class="hljs-comment">// æ ‡è®°ä¸ºå·²è°ƒç”¨</span>
            called = <span class="hljs-literal">true</span>
            <span class="hljs-comment">// ç›´æ¥æ‹’ç» promise2ï¼Œå¹¶å°†é”™è¯¯åŸå› ä¼ é€’ä¸‹å»</span>
            <span class="hljs-title function_">reject</span>(reason)
          }
        )
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ™®é€šå¯¹è±¡ï¼Œç›´æ¥ resolve</span>
        <span class="hljs-title function_">resolve</span>(x)
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
      called = <span class="hljs-literal">true</span>
      <span class="hljs-title function_">reject</span>(error) <span class="hljs-comment">// é”™è¯¯ä½œä¸ºæ‹’ç»åŸå› </span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// åŸå§‹å€¼ï¼Œç›´æ¥ resolve 6.åŸå§‹å€¼ç›´æ¥ä¼ é€’</span>
    <span class="hljs-title function_">resolve</span>(x)
  }
}
</code></pre>
<blockquote>
<h3 data-id="heading-9">JavaScriptä¸­çš„ call æ–¹æ³•è¯¦è§£</h3>
<p><code>call</code>æ–¹æ³•æ˜¯JavaScriptä¸­å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œå®ƒå…è®¸ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¹¶æ˜ç¡®æŒ‡å®šå‡½æ•°å†…éƒ¨çš„<code>this</code>å€¼ã€‚è¿™åœ¨Promiseå®ç°ä¸­éå¸¸é‡è¦ï¼Œç‰¹åˆ«æ˜¯å¤„ç†thenableå¯¹è±¡æ—¶ã€‚</p>
<h4 data-id="heading-10">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>.<span class="hljs-title function_">call</span>(thisArg, arg1, arg2, ...)
</code></pre>
<h4 data-id="heading-11">ä¸»è¦ä½œç”¨</h4>
<ol>
<li><strong>æ”¹å˜å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘</strong>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°<code>thisArg</code>å°±æ˜¯å‡½æ•°æ‰§è¡Œæ—¶<code>this</code>çš„æŒ‡å‘</li>
<li>åç»­å‚æ•°ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-12">ä¸ºä»€ä¹ˆéœ€è¦ call æ–¹æ³•ï¼Ÿ</h4>
<p>åœ¨JavaScriptä¸­ï¼Œ<strong>å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘é€šå¸¸ç”±è°ƒç”¨æ–¹å¼å†³å®šï¼Œè€Œä¸æ˜¯å®šä¹‰æ–¹å¼</strong>ã€‚<code>call</code>æ–¹æ³•æä¾›äº†ä¸€ç§æ˜¾å¼æ§åˆ¶<code>this</code>æŒ‡å‘çš„æœºåˆ¶ï¼Œè¿™åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¯¹è±¡æ–¹æ³•å€Ÿç”¨ã€å›è°ƒå‡½æ•°ã€ç±»ç»§æ‰¿ç­‰æƒ…å†µæ—¶ã€‚</p>
<h4 data-id="heading-13">Promiseå®ç°ä¸­çš„åº”ç”¨</h4>
<p>åœ¨Promiseå®ç°ä¸­ï¼Œ<code>call</code>æ–¹æ³•ä¸»è¦ç”¨äºå¤„ç†thenableå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">then.<span class="hljs-title function_">call</span>(
  x,  <span class="hljs-comment">// ç¡®ä¿ then æ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘ x å¯¹è±¡</span>
  <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> { <span class="hljs-comment">/* æˆåŠŸå›è°ƒ */</span> },
  <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> { <span class="hljs-comment">/* å¤±è´¥å›è°ƒ */</span> }
)
</code></pre>
<p><strong>è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨callï¼Ÿ</strong></p>
<ul>
<li>thenableå¯¹è±¡æ˜¯æŒ‡å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡</li>
<li>æˆ‘ä»¬<strong>éœ€è¦è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„<code>then</code>æ–¹æ³•ï¼Œä½†åŒæ—¶è¦ç¡®ä¿è¿™ä¸ªæ–¹æ³•å†…éƒ¨çš„<code>this</code>æ­£ç¡®æŒ‡å‘è¯¥å¯¹è±¡æœ¬èº«</strong></li>
<li>å¦‚æœç›´æ¥å†™<code>x.then(...)</code>ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹<code>this</code>ä¹Ÿä¼šæŒ‡å‘xï¼Œä½†ä½¿ç”¨<code>call</code>æ–¹æ³•æ˜¯æ›´æ˜ç¡®ã€æ›´å®‰å…¨çš„åšæ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼ˆå¦‚å‡½æ•°è¢«èµ‹å€¼ç»™å˜é‡åè°ƒç”¨ï¼‰</li>
</ul>
<h4 data-id="heading-14">ç®€å•ä¾‹å­è¯´æ˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå¯¹è±¡</span>
<span class="hljs-keyword">const</span> person = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>,
  <span class="hljs-attr">greet</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">greeting</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>!`</span>);
  }
};

<span class="hljs-comment">// æ­£å¸¸è°ƒç”¨ - thisæŒ‡å‘person</span>
person.<span class="hljs-title function_">greet</span>(<span class="hljs-string">'Hello'</span>);  <span class="hljs-comment">// è¾“å‡º: "Hello, John!"</span>

<span class="hljs-comment">// ä½¿ç”¨callæ”¹å˜thisæŒ‡å‘</span>
<span class="hljs-keyword">const</span> anotherPerson = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Jane'</span> };
person.<span class="hljs-property">greet</span>.<span class="hljs-title function_">call</span>(anotherPerson, <span class="hljs-string">'Hi'</span>);  <span class="hljs-comment">// è¾“å‡º: "Hi, Jane!"</span>
</code></pre>
<h4 data-id="heading-15">ä¸Promise thenableå¤„ç†çš„å…³ç³»</h4>
<p>åœ¨Promiseçš„<code>resolvePromise</code>å‡½æ•°ä¸­ï¼š</p>
<ol>
<li>æˆ‘ä»¬æ£€æµ‹åˆ°ä¸€ä¸ªå¯¹è±¡æœ‰<code>then</code>æ–¹æ³•</li>
<li>æˆ‘ä»¬éœ€è¦è°ƒç”¨è¿™ä¸ª<code>then</code>æ–¹æ³•ï¼Œä½†å¿…é¡»ç¡®ä¿å®ƒåœ¨æ­£ç¡®çš„<code>this</code>ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</li>
<li>ä½¿ç”¨<code>then.call(x, onFulfilled, onRejected)</code>ç¡®ä¿äº†ï¼š
<ul>
<li><code>then</code>æ–¹æ³•è¢«è°ƒç”¨</li>
<li><code>then</code>æ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘xå¯¹è±¡</li>
<li>æˆ‘ä»¬ä¼ å…¥äº†æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒå‡½æ•°</li>
</ul>
</li>
</ol>
<p>è¿™ç§æ–¹å¼æ˜¯Promise/A+è§„èŒƒè¦æ±‚çš„æ ‡å‡†åšæ³•ï¼Œç¡®ä¿äº†ä¸åŒPromiseå®ç°ä¹‹é—´çš„å…¼å®¹æ€§å’Œæ­£ç¡®çš„ä¸Šä¸‹æ–‡ç»‘å®šã€‚</p>
</blockquote>
<h3 data-id="heading-16">4. Promise æ‰©å±•æ–¹æ³•å®ç°</h3>
<h4 data-id="heading-17">4.1 é”™è¯¯å¤„ç†æ–¹æ³•</h4>
<h5 data-id="heading-18">catch æ–¹æ³•</h5>
<p>ä¸“é—¨ç”¨äºæ•è· Promise é“¾ä¸­çš„é”™è¯¯ï¼Œ<strong>æœ¬è´¨æ˜¯ then æ–¹æ³•çš„è¯­æ³•ç³–</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">catch</span>(onRejected) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected)
}
</code></pre>
<h5 data-id="heading-19">finally æ–¹æ³•</h5>
<p><strong>æ— è®º Promise æˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šæ‰§è¡Œçš„å›è°ƒï¼Œä¸æ¥æ”¶å‚æ•°ä¹Ÿä¸å½±å“åŸ Promise çš„ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">finally</span>(<span class="hljs-params">callback</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(
    <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">callback</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> value),
    <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">callback</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">throw</span> reason })
  )
}
</code></pre>
<h4 data-id="heading-20">4.2 é™æ€æ–¹æ³•</h4>
<h5 data-id="heading-21">resolve æ–¹æ³•</h5>
<p>è¿”å›ä¸€ä¸ªå·²æˆåŠŸçš„ Promiseï¼Œå¦‚æœå‚æ•°æœ¬èº«æ˜¯ Promise åˆ™ç›´æ¥è¿”å›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">static</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
    <span class="hljs-keyword">return</span> value
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(value))
}
</code></pre>
<h5 data-id="heading-22">reject æ–¹æ³•</h5>
<p>è¿”å›ä¸€ä¸ªå·²å¤±è´¥çš„ Promiseï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">static</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">reason</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(reason))
}
</code></pre>
<h5 data-id="heading-23">all æ–¹æ³•ğŸ’–</h5>
<p>ç­‰å¾…æ‰€æœ‰ Promise éƒ½æˆåŠŸï¼Œè¿”å›åŒ…å«æ‰€æœ‰ç»“æœçš„æ•°ç»„ï¼›<strong>ä»»ä¸€ Promise å¤±è´¥åˆ™æ•´ä½“å¤±è´¥</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">static</span> <span class="hljs-title function_">all</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> result = []
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Argument must be an array'</span>))
    }

    <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>([])
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(
        <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
          result[index] = value
          count++
          <span class="hljs-keyword">if</span> (count === promises.<span class="hljs-property">length</span>) {
            <span class="hljs-title function_">resolve</span>(result)
          }
        },
        <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-title function_">reject</span>(reason)
      )
    })
  })
}
</code></pre>
<h5 data-id="heading-24">race æ–¹æ³•</h5>
<p><strong>è¿”å›ç¬¬ä¸€ä¸ªå®Œæˆçš„ Promise çš„ç»“æœï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">static</span> <span class="hljs-title function_">race</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Argument must be an array'</span>))
    }

    <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">promise</span> =&gt;</span> {
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise).<span class="hljs-title function_">then</span>(
        <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(value),
        <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-title function_">reject</span>(reason)
      )
    })
  })
}
</code></pre>
<h3 data-id="heading-25">5.constructorä¸­çš„resolveå‡½æ•°å’Œå¤–éƒ¨çš„static resolveæ–¹æ³•æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3>
<p>åœ¨Promiseå®ç°ä¸­ï¼Œconstructorä¸­çš„resolveå‡½æ•°å’Œå¤–éƒ¨çš„static resolveæ–¹æ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š</p>
<h4 data-id="heading-26">5.1. å®šä¹‰ä½ç½®ä¸ç±»å‹</h4>
<ul>
<li><strong>constructorä¸­çš„resolve</strong>ï¼šæ˜¯åœ¨Promiseæ„é€ å‡½æ•°å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å‡½æ•°ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™executorå‡½æ•°ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ä»¥ç¡®ä¿thisæŒ‡å‘Promiseå®ä¾‹ã€‚</li>
<li><strong>static resolveæ–¹æ³•</strong>ï¼šæ˜¯Promiseç±»çš„é™æ€æ–¹æ³•ï¼Œé€šè¿‡<code>MyPromise.resolve()</code>ç›´æ¥è°ƒç”¨ï¼Œä¸å±äºä»»ä½•å®ä¾‹ã€‚</li>
</ul>
<h4 data-id="heading-27">5.2. ä¸»è¦ä½œç”¨</h4>
<ul>
<li>
<p><strong>constructorä¸­çš„resolve</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£å°†Promiseå®ä¾‹çš„çŠ¶æ€ä»pendingè½¬å˜ä¸ºfulfilled</li>
<li>è®¾ç½®æˆåŠŸå€¼(value)å¹¶è§¦å‘æ‰€æœ‰æ³¨å†Œçš„æˆåŠŸå›è°ƒå‡½æ•°</li>
<li>æ˜¯Promiseå†…éƒ¨çŠ¶æ€è½¬æ¢çš„æ ¸å¿ƒæœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>static resolveæ–¹æ³•</strong>ï¼š</p>
<ul>
<li>ä½œä¸ºPromiseçš„å·¥å…·æ–¹æ³•ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªå·²æˆåŠŸçŠ¶æ€çš„Promiseå®ä¾‹</li>
<li>æä¾›PromiseåŒ…è£…åŠŸèƒ½ï¼Œå°†ä»»æ„å€¼è½¬æ¢ä¸ºPromise</li>
</ul>
</li>
</ul>
<h4 data-id="heading-28">5.3. è°ƒç”¨æ–¹å¼</h4>
<ul>
<li>
<p><strong>constructorä¸­çš„resolve</strong>ï¼š</p>
<ul>
<li>ç”±executorå‡½æ•°å†…éƒ¨è°ƒç”¨ï¼Œé€šå¸¸æ˜¯å¼‚æ­¥æ“ä½œå®Œæˆå</li>
<li>ä¾‹å¦‚ï¼š<code>new MyPromise((resolve, reject) =&gt; { setTimeout(() =&gt; resolve(1), 1000); })</code></li>
</ul>
</li>
<li>
<p><strong>static resolveæ–¹æ³•</strong>ï¼š</p>
<ul>
<li>ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä½œä¸ºå·¥å‚æ–¹æ³•ä½¿ç”¨</li>
<li>ä¾‹å¦‚ï¼š<code>MyPromise.resolve(1)</code> æˆ– <code>MyPromise.resolve(promiseInstance)</code></li>
</ul>
</li>
</ul>
<h4 data-id="heading-29">5.4. å¤„ç†é€»è¾‘</h4>
<ul>
<li>
<p><strong>constructorä¸­çš„resolve</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºpendingï¼Œç¡®ä¿çŠ¶æ€åªèƒ½å˜æ›´ä¸€æ¬¡</li>
<li>æ›´æ–°çŠ¶æ€ä¸ºfulfilledå¹¶å­˜å‚¨æˆåŠŸå€¼</li>
<li>å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„æˆåŠŸå›è°ƒ</li>
</ul>
</li>
<li>
<p><strong>static resolveæ–¹æ³•</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ä¼ å…¥å€¼æ˜¯å¦å·²ç»æ˜¯Promiseå®ä¾‹ï¼Œå¦‚æœæ˜¯åˆ™ç›´æ¥è¿”å›</li>
<li>å¦åˆ™åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å·²æˆåŠŸçŠ¶æ€çš„Promiseå®ä¾‹</li>
</ul>
</li>
</ul>
<h4 data-id="heading-30">5.5. ä»£ç å®ç°å¯¹æ¯”</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// constructorä¸­çš„resolveï¼ˆå±€éƒ¨å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'fulfilled'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
  }
}

<span class="hljs-comment">// static resolveæ–¹æ³•ï¼ˆç±»é™æ€æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">static</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
    <span class="hljs-keyword">return</span> value
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(value))
}
</code></pre>
<p>æ€»ç»“æ¥è¯´ï¼Œconstructorä¸­çš„resolveæ˜¯Promiseå†…éƒ¨çŠ¶æ€ç®¡ç†çš„æ ¸å¿ƒæœºåˆ¶ï¼Œè´Ÿè´£çŠ¶æ€è½¬æ¢å’Œå›è°ƒè§¦å‘ï¼›è€Œstatic resolveåˆ™æ˜¯ä¸€ä¸ªä¾¿æ·çš„å·¥å…·æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå·²è§£å†³çŠ¶æ€çš„Promiseå®ä¾‹ï¼Œå®ç°å€¼çš„PromiseåŒ–åŒ…è£…ã€‚</p>
<h3 data-id="heading-31">6. ä¸Šè¿°ä»£ç ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-32">6.1 å¾®ä»»åŠ¡æ¨¡æ‹Ÿæ”¹è¿›then æ–¹æ³•ä¸­ setTimeout</h4>
<p>å½“å‰å®ç°ä½¿ç”¨ <code>setTimeout</code> æ¨¡æ‹Ÿå¼‚æ­¥æ‰§è¡Œï¼Œä½†å®é™…çš„ Promise ä½¿ç”¨å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>MutationObserver</code> æˆ– <code>MessageChannel</code> æ›´å¥½åœ°æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¾®ä»»åŠ¡é˜Ÿåˆ—å®ç°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">microTask</span> = (<span class="hljs-params">fn</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> queueMicrotask === <span class="hljs-string">'function'</span>) {
    <span class="hljs-title function_">queueMicrotask</span>(fn);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MutationObserver</span> === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(fn);
    <span class="hljs-keyword">const</span> textNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-string">''</span>);
    observer.<span class="hljs-title function_">observe</span>(textNode, { <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span> });
    textNode.<span class="hljs-property">data</span> = <span class="hljs-string">'1'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">setTimeout</span>(fn, <span class="hljs-number">0</span>);
  }
};

<span class="hljs-comment">// ç„¶ååœ¨ then æ–¹æ³•ä¸­ä½¿ç”¨ microTask æ›¿ä»£ setTimeout</span>
</code></pre>
<h4 data-id="heading-33">6.2 å¢å¼ºé™æ€æ–¹æ³•</h4>
<p>å¯ä»¥æ‰©å±•æ›´å¤šå®ç”¨çš„é™æ€æ–¹æ³•ï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// allSettled æ–¹æ³• - ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼Œä¸å…³å¿ƒæˆåŠŸæˆ–å¤±è´¥</span>
<span class="hljs-keyword">static</span> <span class="hljs-title function_">allSettled</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>([]);
    }

    <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">resolve</span>([]);
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise)
        .<span class="hljs-title function_">then</span>(
          <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
            results[index] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'fulfilled'</span>, value };
            count++;
            <span class="hljs-keyword">if</span> (count === promises.<span class="hljs-property">length</span>) {
              <span class="hljs-title function_">resolve</span>(results);
            }
          },
          <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> {
            results[index] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'rejected'</span>, reason };
            count++;
            <span class="hljs-keyword">if</span> (count === promises.<span class="hljs-property">length</span>) {
              <span class="hljs-title function_">resolve</span>(results);
            }
          }
        );
    });
  });
}

<span class="hljs-comment">// any æ–¹æ³• - è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promise</span>
<span class="hljs-keyword">static</span> <span class="hljs-title function_">any</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> errors = [];
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(promises)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Argument must be an array'</span>));
    }

    <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>([], <span class="hljs-string">'All promises were rejected'</span>));
    }

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">promise, index</span>) =&gt;</span> {
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(promise)
        .<span class="hljs-title function_">then</span>(resolve)
        .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
          errors[index] = error;
          count++;
          <span class="hljs-keyword">if</span> (count === promises.<span class="hljs-property">length</span>) {
            <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>(errors, <span class="hljs-string">'All promises were rejected'</span>));
          }
        });
    });
  });
}
</code></pre>
<h3 data-id="heading-34">7. è¾“å…¥è¾“å‡ºç¤ºä¾‹</h3>
<h4 data-id="heading-35">åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºå¹¶ä½¿ç”¨ Promise</span>
<span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸäº†ï¼'</span>);
    <span class="hljs-comment">// reject('å¤±è´¥äº†ï¼');</span>
  }, <span class="hljs-number">1000</span>);
});

promise.<span class="hljs-title function_">then</span>(
  <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸ:'</span>, value); <span class="hljs-comment">// è¾“å‡º: æˆåŠŸ: æˆåŠŸäº†ï¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'é“¾å¼è°ƒç”¨'</span>;
  }
).<span class="hljs-title function_">then</span>(
  <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é“¾å¼è°ƒç”¨ç»“æœ:'</span>, value); <span class="hljs-comment">// è¾“å‡º: é“¾å¼è°ƒç”¨ç»“æœ: é“¾å¼è°ƒç”¨</span>
  }
).<span class="hljs-keyword">catch</span>(
  <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤±è´¥:'</span>, reason);
  }
);
</code></pre>
<h4 data-id="heading-36">é™æ€æ–¹æ³•ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promise.all ç¤ºä¾‹</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>), <span class="hljs-number">100</span>)),
  <span class="hljs-number">3</span>
]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">values</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'allç»“æœ:'</span>, values); <span class="hljs-comment">// è¾“å‡º: allç»“æœ: [1, 2, 3]</span>
});

<span class="hljs-comment">// Promise.race ç¤ºä¾‹</span>
<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">race</span>([
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>), <span class="hljs-number">100</span>)),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-number">2</span>), <span class="hljs-number">50</span>))
]).<span class="hljs-title function_">then</span>(
  <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'raceæˆåŠŸ:'</span>, value),
  <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'raceå¤±è´¥:'</span>, reason) <span class="hljs-comment">// è¾“å‡º: raceå¤±è´¥: 2</span>
);
</code></pre>
<h3 data-id="heading-37">8. æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†è§£æäº† Promise çš„å®ç°åŸç†ï¼ŒåŒ…æ‹¬çŠ¶æ€æœºè®¾è®¡ã€å‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ä»¥åŠå„ç§æ–¹æ³•çš„å®ç°ç»†èŠ‚ã€‚é€šè¿‡æ·±å…¥ç†è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°æŒæ¡å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ï¼Œç¼–å†™æ›´åŠ å¥å£®å’Œé«˜æ•ˆçš„å¼‚æ­¥ä»£ç ã€‚</p>
<p>Promise çš„å®ç°ä½“ç°äº†ä¼˜ç§€çš„è®¾è®¡æ¨¡å¼åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯çŠ¶æ€æœºå’Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ç»“åˆï¼Œè§£å†³äº†ä¼ ç»Ÿå›è°ƒåœ°ç‹±é—®é¢˜ï¼Œæä¾›äº†æ›´åŠ ä¼˜é›…å’Œå¯ç»´æŠ¤çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-38">æ€è€ƒ1ï¼šçŠ¶æ€æœºæ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆåœ¨Promiseä¸­å®ç°</h3>
<h4 data-id="heading-39">çŠ¶æ€æœºæ¨¡å¼çš„å®šä¹‰</h4>
<p>çŠ¶æ€æœºæ¨¡å¼æ˜¯ä¸€ç§<strong>è¡Œä¸ºè®¾è®¡æ¨¡å¼</strong>ï¼Œå®ƒ<strong>å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸º</strong>ã€‚å¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ï¼Œå› ä¸º<strong>å®ƒçš„è¡Œä¸ºéšç€çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–</strong>ã€‚åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼ŒçŠ¶æ€æœºæ¨¡å¼ç‰¹åˆ«é€‚ç”¨äº<strong>æè¿°å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…å¯èƒ½ç»å†çš„çŠ¶æ€è½¬æ¢</strong>ï¼Œä»¥åŠè¿™äº›çŠ¶æ€è½¬æ¢æ‰€è§¦å‘çš„è¡Œä¸ºã€‚</p>
<p>åœ¨<strong>ç»å…¸çš„è®¾è®¡æ¨¡å¼åˆ†ç±»</strong>ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨"çŠ¶æ€æœºæ¨¡å¼"è¿™ä¸ªæœ¯è¯­ï¼Œè€Œæ˜¯ä½¿ç”¨ <strong>çŠ¶æ€æ¨¡å¼</strong>ï¼ˆState Patternï¼‰ ã€‚çŠ¶æ€æœºæ˜¯ä¸€ä¸ªæ›´å¹¿æ³›çš„æ¦‚å¿µï¼Œè€ŒçŠ¶æ€æ¨¡å¼æ˜¯å®ç°çŠ¶æ€æœºçš„ä¸€ç§é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ã€‚</p>
<p>æ€»ç»“</p>
<ul>
<li>çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ ï¼šGoFæ­£å¼å®šä¹‰çš„è®¾è®¡æ¨¡å¼ï¼Œå±äº23ç§ç»å…¸è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚</li>
<li>çŠ¶æ€æœºæ¨¡å¼ ï¼šæ›´<strong>ä¾§é‡äºå®ç°æœ‰é™çŠ¶æ€æœºæ¦‚å¿µçš„æ¨¡å¼</strong>ï¼Œåœ¨<strong>å·¥ç¨‹å®è·µ</strong>ä¸­çš„å¸¸ç”¨ç§°å‘¼ã€‚</li>
<li>Promiseçš„å®ç°åŒæ—¶ç¬¦åˆçŠ¶æ€æ¨¡å¼çš„è®¾è®¡åŸåˆ™å’ŒçŠ¶æ€æœºçš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ‰€ä»¥å¯ä»¥è¯´å®ƒä½¿ç”¨äº†çŠ¶æ€æ¨¡å¼ï¼ˆåœ¨è®¾è®¡æ¨¡å¼æœ¯è¯­ä¸­ï¼‰æˆ–çŠ¶æ€æœºæ¨¡å¼ï¼ˆåœ¨å·¥ç¨‹å®è·µæœ¯è¯­ä¸­ï¼‰ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯èƒ½åœ¨ä¸åŒçš„èµ„æ–™ä¸­çœ‹åˆ°ä¸åŒçš„ç§°å‘¼ï¼Œä½†å®ƒä»¬æè¿°çš„æ˜¯åŒä¸€ä¸ªæ ¸å¿ƒè®¾è®¡æ€æƒ³ã€‚</p>
<h4 data-id="heading-40">Promiseä¸­çš„çŠ¶æ€æœºå®ç°</h4>
<p>åœ¨<code>promise-implementation-docs.md</code>æ–‡æ¡£ä¸­ï¼ŒPromiseé€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°äº†çŠ¶æ€æœºæ¨¡å¼ï¼š</p>
<h5 data-id="heading-41">1. çŠ¶æ€å®šä¹‰</h5>
<p>Promiseå…·æœ‰ä¸‰ç§äº’æ–¥çš„çŠ¶æ€ï¼š</p>
<ul>
<li><strong>pending</strong>: åˆå§‹çŠ¶æ€ï¼Œæ—¢æœªå®Œæˆä¹Ÿæœªæ‹’ç»</li>
<li><strong>fulfilled/resolved</strong>: æ“ä½œæˆåŠŸå®Œæˆ</li>
<li><strong>rejected</strong>: æ“ä½œå¤±è´¥</li>
</ul>
<h5 data-id="heading-42">2. çŠ¶æ€çš„ä¸å¯å˜æ€§</h5>
<p>æ ¸å¿ƒç‰¹æ€§æ˜¯ï¼š<strong>çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜</strong>ã€‚è¿™æ˜¯Promiseå¯é æ€§çš„åŸºç¡€ï¼Œç¡®ä¿äº†å¼‚æ­¥æ“ä½œçš„ç»“æœä¸€æ—¦ç¡®å®šå°±ä¸ä¼šè¢«è¦†ç›–ã€‚</p>
<h5 data-id="heading-43">3. çŠ¶æ€å®ç°ä»£ç </h5>
<p>åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çŠ¶æ€å’Œç›¸å…³æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">executeFn</span>) {
  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€å’Œæ•°æ®</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>      <span class="hljs-comment">// åˆå§‹çŠ¶æ€ä¸º pending</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>       <span class="hljs-comment">// å­˜å‚¨æˆåŠŸç»“æœ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>      <span class="hljs-comment">// å­˜å‚¨å¤±è´¥åŸå› </span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span> = [] <span class="hljs-comment">// æˆåŠŸå›è°ƒé˜Ÿåˆ—</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = [] <span class="hljs-comment">// å¤±è´¥å›è°ƒé˜Ÿåˆ—</span>
  
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h5 data-id="heading-44">4. çŠ¶æ€è½¬æ¢æœºåˆ¶</h5>
<p>é€šè¿‡<code>resolve</code>å’Œ<code>reject</code>å‡½æ•°å®ç°çŠ¶æ€è½¬æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'fulfilled'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
    <span class="hljs-comment">// å‘å¸ƒæˆåŠŸäº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'rejected'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason
    <span class="hljs-comment">// å‘å¸ƒå¤±è´¥äº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>))
  }
}
</code></pre>
<h4 data-id="heading-45">çŠ¶æ€æœºæ¨¡å¼åœ¨Promiseä¸­çš„æ ¸å¿ƒæœºåˆ¶</h4>
<ol>
<li>
<p><strong>çŠ¶æ€æ£€æŸ¥</strong>: åœ¨è½¬æ¢çŠ¶æ€å‰ï¼Œä¼šæ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯å¦ä¸º<code>pending</code>ï¼Œåªæœ‰å¤„äº<code>pending</code>çŠ¶æ€çš„Promiseæ‰èƒ½è½¬æ¢ä¸º<code>fulfilled</code>æˆ–<code>rejected</code>çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€ä¸æ•°æ®å…³è”</strong>: çŠ¶æ€è½¬æ¢æ—¶ï¼Œä¼šåŒæ—¶å­˜å‚¨ç›¸å…³çš„æ•°æ®ï¼ˆæˆåŠŸå€¼<code>value</code>æˆ–å¤±è´¥åŸå› <code>reason</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€é©±åŠ¨è¡Œä¸º</strong>: çŠ¶æ€çš„å˜åŒ–ä¼šè§¦å‘ç›¸åº”çš„è¡Œä¸ºï¼Œä¾‹å¦‚æ‰§è¡Œå­˜å‚¨åœ¨å›è°ƒé˜Ÿåˆ—ä¸­çš„å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>äº’æ–¥æ€§</strong>: ä¸‰ç§çŠ¶æ€æ˜¯äº’æ–¥çš„ï¼Œä»»ä½•æ—¶åˆ»Promiseåªèƒ½å¤„äºå…¶ä¸­ä¸€ç§çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>å•å‘è½¬æ¢</strong>: çŠ¶æ€è½¬æ¢æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»<code>pending</code>è½¬æ¢åˆ°<code>fulfilled</code>æˆ–<code>rejected</code>ï¼Œä¸€æ—¦å®Œæˆè½¬æ¢å°±ä¸èƒ½å†æ”¹å˜ã€‚</p>
</li>
</ol>
<p>è¿™ç§çŠ¶æ€æœºè®¾è®¡ä½¿Promiseèƒ½å¤Ÿå¯é åœ°è¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœï¼Œæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå¹¶ç¡®ä¿å¼‚æ­¥æ“ä½œçš„ç»“æœä¸€æ—¦ç¡®å®šå°±ä¸ä¼šè¢«è¦†ç›–ï¼Œä¸ºJavaScriptå¼‚æ­¥ç¼–ç¨‹æä¾›äº†å¯é çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-46">æ€è€ƒ2ï¼špromiseä¸­å¦‚ä½•å®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„</h3>
<p>åœ¨<code>MyPromise</code>å®ç°ä¸­ï¼Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p>
<h4 data-id="heading-47">1. äº‹ä»¶ä¸­å¿ƒï¼ˆconstructorä¸­å®šä¹‰è®¢é˜…åˆ—è¡¨ï¼‰</h4>
<p>åœ¨Promiseæ„é€ å‡½æ•°ä¸­å®šä¹‰äº†ä¸¤ä¸ªæ•°ç»„ä½œä¸º<strong>è®¢é˜…è€…åˆ—è¡¨</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜å‚¨PromiseæˆåŠŸçŠ¶æ€ä¸‹éœ€è¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°ç»„</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span> = []
<span class="hljs-comment">// å­˜å‚¨Promiseå¤±è´¥çŠ¶æ€ä¸‹éœ€è¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°ç»„</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = []
</code></pre>
<p>è¿™ä¸¤ä¸ªæ•°ç»„å°±æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸­çš„<strong>äº‹ä»¶ä¸­å¿ƒ</strong>ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p>
<h4 data-id="heading-48">2. è®¢é˜…è¿‡ç¨‹ï¼ˆ<code>then</code>æ–¹æ³•ä¸­æ³¨å†Œå›è°ƒï¼‰</h4>
<p>å½“Promiseå¤„äºpendingçŠ¶æ€æ—¶ï¼Œé€šè¿‡<code>then</code>æ–¹æ³•æ³¨å†Œçš„å›è°ƒä¼šè¢«æ·»åŠ åˆ°å¯¹åº”çš„æ•°ç»„ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// pendingçŠ¶æ€å¤„ç† - å­˜å‚¨å›è°ƒ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">reject</span>(error)
      }
    }, <span class="hljs-number">0</span>)
  })

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onRejected</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">reject</span>(error)
      }
    }, <span class="hljs-number">0</span>)
  })
}
</code></pre>
<p>è¿™éƒ¨åˆ†ä»£ç å®ç°äº†<strong>è®¢é˜…</strong>åŠŸèƒ½ï¼Œå°†å›è°ƒå‡½æ•°æ·»åŠ åˆ°ç›¸åº”çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚</p>
<h4 data-id="heading-49">3. å‘å¸ƒè¿‡ç¨‹ï¼ˆconstructorä¸­é€šè¿‡resolveæˆ–rejectå‡½æ•°è§¦å‘å›è°ƒï¼‰</h4>
<p>å½“PromiseçŠ¶æ€å‘ç”Ÿå˜æ›´æ—¶ï¼ˆé€šè¿‡resolveæˆ–rejectå‡½æ•°ï¼‰ï¼Œä¼šéå†å¯¹åº”çš„å›è°ƒæ•°ç»„å¹¶æ‰§è¡Œæ‰€æœ‰è®¢é˜…çš„å›è°ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'fulfilled'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
    <span class="hljs-comment">// å‘å¸ƒæˆåŠŸäº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„æˆåŠŸå›è°ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'rejected'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason
    <span class="hljs-comment">// å‘å¸ƒå¤±è´¥äº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„å¤±è´¥å›è°ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>))
  }
}
</code></pre>
<h4 data-id="heading-50">å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„æ ¸å¿ƒä½“ç°</h4>
<ol>
<li><strong>è§£è€¦æ€§</strong>ï¼šPromiseçš„çŠ¶æ€å˜æ›´ï¼ˆå‘å¸ƒè€…ï¼‰å’Œå›è°ƒæ‰§è¡Œï¼ˆè®¢é˜…è€…ï¼‰å®Œå…¨è§£è€¦</li>
<li><strong>æ—¶åºæ— å…³æ€§</strong>ï¼šæ— è®ºå›è°ƒæ˜¯åœ¨PromiseçŠ¶æ€å˜æ›´å‰è¿˜æ˜¯å˜æ›´åæ³¨å†Œï¼Œéƒ½èƒ½æ­£ç¡®æ‰§è¡Œ</li>
<li><strong>å¤šè®¢é˜…æ”¯æŒ</strong>ï¼šå…è®¸å¤šä¸ªå›è°ƒè®¢é˜…åŒä¸€ä¸ªPromiseçš„çŠ¶æ€å˜æ›´</li>
<li><strong>å¼‚æ­¥åè°ƒ</strong>ï¼šæœ‰æ•ˆè§£å†³äº†å¼‚æ­¥æ“ä½œå’Œå›è°ƒæ‰§è¡Œçš„æ—¶åºé—®é¢˜</li>
</ol>
<p>é€šè¿‡è¿™ç§å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ŒPromiseå·§å¦™åœ°è§£å†³äº†JavaScriptå¼‚æ­¥ç¼–ç¨‹ä¸­çš„å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚</p>
<h5 data-id="heading-51">å°æœ‹å‹ï¼Œä½ æ˜¯å¦æœ‰å¾ˆå¤šâ“</h5>
<p>è§£è€¦æ€§æ˜¯ä»€ä¹ˆæ„æ€â“æ€ä¹ˆåšåˆ°çš„æ—¶åºæ— å…³æ€§â“æ€ä¹ˆæ”¯æŒçš„å¤šè®¢é˜…â“å¼‚æ­¥åè°ƒæ˜¯thenæ–¹æ³•ä¸­çš„setTimeoutï¼Œæ€ä¹ˆè§£å†³çš„æ—¶åºé—®é¢˜â“</p>
<p>å‘å¸ƒ-è®¢é˜…æ¨¡å¼å››ä¸ªæ ¸å¿ƒç‰¹æ€§çš„å…·ä½“ä½“ç°ï¼š</p>
<h5 data-id="heading-52">1. è§£è€¦æ€§</h5>
<p>è§£è€¦æ€§æŒ‡çš„æ˜¯Promiseçš„<strong>çŠ¶æ€status</strong>å˜æ›´æœºåˆ¶ï¼ˆå‘å¸ƒè€…ï¼‰å’Œ<strong>å›è°ƒå‡½æ•°(onResolvedCallbacksã€onRejectedCallbacks)<strong>æ‰§è¡Œï¼ˆè®¢é˜…è€…ï¼‰<strong>å®Œå…¨åˆ†ç¦»</strong>ï¼Œå½¼æ­¤ä¹‹é—´</strong>ä¸ç›´æ¥ä¾èµ–</strong>ã€‚</p>
<p><strong>å…·ä½“ä½“ç°ï¼š</strong></p>
<ul>
<li>åœ¨<code>constructor</code>ä¸­å®šä¹‰äº†çŠ¶æ€ç®¡ç†å’Œå›è°ƒæ•°ç»„ï¼Œè¿™æ˜¯å‘å¸ƒè€…çš„æ ¸å¿ƒéƒ¨åˆ†</li>
<li><code>resolve</code>å’Œ<code>reject</code>å‡½æ•°è´Ÿè´£çŠ¶æ€å˜æ›´å’Œå‘å¸ƒäº‹ä»¶ï¼ˆæ‰§è¡Œå›è°ƒï¼‰</li>
<li><code>then</code>æ–¹æ³•è´Ÿè´£<strong>æ³¨å†Œå›è°ƒå‡½æ•°</strong>ï¼ˆpenddingï¼‰åˆ°è®¢é˜…åˆ—è¡¨ä¸­</li>
<li>å‘å¸ƒè€…ï¼ˆçŠ¶æ€å˜æ›´é€»è¾‘ï¼‰ä¸éœ€è¦çŸ¥é“å…·ä½“æœ‰å“ªäº›è®¢é˜…è€…ï¼ˆå›è°ƒå‡½æ•°ï¼‰</li>
<li>è®¢é˜…è€…ï¼ˆå›è°ƒå‡½æ•°ï¼‰ä¹Ÿä¸éœ€è¦çŸ¥é“çŠ¶æ€ä½•æ—¶ä¼šå˜æ›´</li>
</ul>
<h5 data-id="heading-53">2. æ—¶åºæ— å…³æ€§</h5>
<p>æ—¶åºæ— å…³æ€§ç¡®ä¿æ— è®ºå›è°ƒæ˜¯åœ¨<strong>PromiseçŠ¶æ€å˜æ›´å‰è¿˜æ˜¯å˜æ›´åæ³¨å†Œï¼Œéƒ½èƒ½æ­£ç¡®æ‰§è¡Œ</strong>ã€‚</p>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨thenæ–¹æ³•ä¸­</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
  <span class="hljs-comment">// çŠ¶æ€æœªå˜æ›´æ—¶ï¼šå­˜å‚¨å›è°ƒåˆ°é˜Ÿåˆ—</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* å›è°ƒé€»è¾‘ */</span> })
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>) {
  <span class="hljs-comment">// çŠ¶æ€å·²å˜æ›´æ—¶ï¼šç›´æ¥æ‰§è¡Œå›è°ƒ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* å›è°ƒé€»è¾‘ */</span> }, <span class="hljs-number">0</span>)
}
</code></pre>
<ul>
<li>å½“Promiseå·²ç»æ˜¯fulfilledæˆ–rejectedçŠ¶æ€æ—¶ï¼Œè°ƒç”¨thenæ–¹æ³•ä¼šç«‹å³å¼‚æ­¥æ‰§è¡Œå¯¹åº”å›è°ƒ</li>
<li>å½“Promiseè¿˜æ˜¯pendingçŠ¶æ€æ—¶ï¼Œ<strong>å›è°ƒä¼šè¢«å­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œç­‰å¾…çŠ¶æ€å˜æ›´åæ‰§è¡Œ</strong></li>
<li>è¿™æ ·<strong>æ— è®ºå›è°ƒæ³¨å†Œå’ŒçŠ¶æ€å˜æ›´çš„é¡ºåºå¦‚ä½•ï¼Œéƒ½èƒ½ä¿è¯å›è°ƒæ­£ç¡®æ‰§è¡Œ</strong></li>
</ul>
<h5 data-id="heading-54">3. å¤šè®¢é˜…æ”¯æŒ</h5>
<p><strong>å¤šè®¢é˜…</strong>æ”¯æŒå…è®¸<strong>å¤šä¸ªå›è°ƒå‡½æ•°</strong>è®¢é˜…åŒ<strong>ä¸€ä¸ªPromiseçš„çŠ¶æ€</strong>å˜æ›´ã€‚</p>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨constructorä¸­ä½¿ç”¨æ•°ç»„å­˜å‚¨å›è°ƒ</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span> = []
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = []

<span class="hljs-comment">// resolveå‡½æ•°ä¸­æ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„å›è°ƒ</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onResolvedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>))
</code></pre>
<ul>
<li>ä½¿ç”¨æ•°ç»„å­˜å‚¨å›è°ƒå‡½æ•°ï¼Œè€Œä¸æ˜¯å•ä¸€å‡½æ•°</li>
<li>æ¯ä¸ªPromiseå®ä¾‹å¯ä»¥<strong>å¤šæ¬¡è°ƒç”¨thenæ–¹æ³•</strong>ï¼Œ<strong>æ¯æ¬¡è°ƒç”¨éƒ½ä¼šå°†å›è°ƒæ·»åŠ åˆ°æ•°ç»„ä¸­</strong></li>
<li>çŠ¶æ€å˜æ›´æ—¶ï¼Œ<strong>æ‰€æœ‰æ³¨å†Œçš„å›è°ƒä¼šæŒ‰æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œ</strong></li>
<li>è¿™ä½¿å¾—å¤šä¸ªç‹¬ç«‹çš„æ“ä½œå¯ä»¥åŸºäºåŒä¸€ä¸ªPromiseçš„ç»“æœè¿›è¡Œè”åŠ¨</li>
</ul>
<h5 data-id="heading-55">4. å¼‚æ­¥åè°ƒ</h5>
<p>å¼‚æ­¥åè°ƒ<strong>é€šè¿‡setTimeoutç¡®ä¿å›è°ƒå¼‚æ­¥æ‰§è¡Œï¼Œè§£å†³äº†å¼‚æ­¥æ“ä½œå’Œå›è°ƒæ‰§è¡Œçš„æ—¶åºé—®é¢˜</strong>ã€‚</p>
<p><strong>å…·ä½“å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨thenæ–¹æ³•çš„ä¸‰ç§çŠ¶æ€å¤„ç†ä¸­éƒ½ä½¿ç”¨äº†setTimeout</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePromise</span>(promise2, x, resolve, reject)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title function_">reject</span>(error)
  }
}, <span class="hljs-number">0</span>)
</code></pre>
<ul>
<li>ä½¿ç”¨setTimeoutæ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼Œç¡®ä¿å›è°ƒåœ¨å½“å‰æ‰§è¡Œæ ˆæ¸…ç©ºåæ‰§è¡Œ</li>
<li>æ— è®ºPromiseçŠ¶æ€æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥å˜æ›´ï¼Œå›è°ƒæ€»æ˜¯å¼‚æ­¥æ‰§è¡Œ</li>
<li>è§£å†³äº†å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œæä¾›äº†æ¸…æ™°çš„å¼‚æ­¥æ“ä½œæµç¨‹æ§åˆ¶</li>
<li>ç¡®ä¿å³ä½¿åœ¨åŒæ­¥æ“ä½œå®Œæˆåï¼Œå›è°ƒä¹Ÿä¼šæŒ‰é¢„æœŸé¡ºåºå¼‚æ­¥æ‰§è¡Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# vue2 ä½¿ç”¨ cesium å±•ç¤º TLE æ˜Ÿå†æ•°æ®]]></title>    <link>https://juejin.cn/post/7571815997068197928</link>    <guid>https://juejin.cn/post/7571815997068197928</guid>    <pubDate>2025-11-13T10:47:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997068197928" data-draft-id="7572020278386769954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# vue2 ä½¿ç”¨ cesium å±•ç¤º TLE æ˜Ÿå†æ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T10:47:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å«æˆ‘AddV"/> <meta itemprop="url" content="https://juejin.cn/user/4860749051150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # vue2 ä½¿ç”¨ cesium å±•ç¤º TLE æ˜Ÿå†æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4860749051150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å«æˆ‘AddV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T10:47:54.000Z" title="Thu Nov 13 2025 10:47:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vue2 ä½¿ç”¨ cesium å±•ç¤º TLE æ˜Ÿå†æ•°æ®</h2>
<blockquote>
<p>ä¸ºå•¥çªç„¶å†™è¿™ä¹ˆä¸€ç¯‡æ–‡ç« å‘¢ï¼Œæ˜¯å› ä¸ºæˆ‘ç°åœ¨å¯¹ cesium ä¹Ÿæ˜¯äº†è§£ä¸€äº›ï¼Œåœ¨åšä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ç”¨åˆ°äº†ï¼Œå‘ç°é‡Œé¢çš„ä¸œè¥¿è¿˜å¾ˆå¤šï¼Œç¨å¾®è¯´ä¸€ä¸‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-2">1. cesiumåŒ…</h4>
<p>é¡¹ç›®ä¸­éœ€è¦å¼•å…¥ <code>cesium</code> åŒ…ï¼Œæˆ‘ä¸æ˜¯ä½¿ç”¨ <code>npm</code> å®‰è£…çš„ï¼Œæˆ‘æ˜¯ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½çš„ <code>cesium åŒ…</code>ã€‚ä¸‹è½½å®ŒæˆåæŠŠåŒ…æ”¾è¿›é¡¹ç›®ä¸­ä½¿ç”¨çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80457a1e887047058f8acc3b053d070a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=ZJmy8ET3vsRp3xRrAeauNPzsenU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶åå¼•å…¥çš„è¯ï¼Œåªéœ€è¦åœ¨ index.html ä¸­å¼•å…¥ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>åœ¨ <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œé¢æ”¾ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"./Cesium/Widgets/widgets.css"</span>&gt;</span>
</code></pre>
<p>åœ¨ <code>&lt;body&gt;</code> æ ‡ç­¾æœ€åé¢æ”¾ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./Cesium/Cesium.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç„¶åå°±å®Œäº‹äº†ã€‚cesium ä¹Ÿç®—å¼•å…¥æˆåŠŸäº†ã€‚</p>
<p>å¦‚æœä¸æ”¾å¿ƒçš„è¯ï¼Œå¯ä»¥è¿è¡Œèµ· <code>vue</code> é¡¹ç›®ï¼Œåœ¨æ§åˆ¶å°è¾“å…¥å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹å¼•å…¥çš„ <code>Cesium</code> ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Cesium</span>.<span class="hljs-property">VERSION</span>);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e9c07e3235a4de99465ade78bfc32b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=EBSPGsdCJBPzUL5WXCi8VT34mDE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-3">2. satellite.js</h4>
<p>è¿™ä¸ªçš„è¯æˆ‘å°±æ˜¯ä½¿ç”¨ <code>npm</code> å®‰è£…çš„äº†ï¼Œæˆ‘å®‰è£…çš„ <code>5.0</code> ç‰ˆæœ¬ä»¥ä¸Šçš„ï¼Œæœ€å¥½æ˜¯<code>5</code>è¿™ä¸ªç‰ˆæœ¬å¾€ä¸Šï¼Œä¸è¦è£…<code>4</code>ï¼ŒAPIå¯èƒ½ä¼šæœ‰å·®å¼‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab54b02e801f48ffaa574fa7523e01c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=rWoh4OrThM3C3w7toDIq3gSDGVg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-4">3. å…¶ä»–</h4>
<p>å…¶ä»–çš„è¯å°±æ˜¯ <code>moment</code>ï¼Œç”¨æ¥è½¬æ¢æ—¶é—´å•¥çš„ï¼Œè¿™ä¸ªç›´æ¥å®‰è£…å°±è¡Œï¼Œæƒ³ç”¨å°±ç”¨ï¼Œä¸æƒ³ç”¨å°±ç”¨ <code>Date()</code> è½¬ï¼Œéƒ½å¯ä»¥ã€‚</p>
<h3 data-id="heading-5">Cesium å¼€å‘</h3>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>TCesium.js</code> æ–‡ä»¶ï¼Œç”¨æ¥ç¼–å†™ Cesium ç›¸å…³çš„ä»£ç ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aee20f57802649dba543a0edaadd3947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=rzwPUYTHrHb7FL4WAiK4wnqYfsc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œæ¡ˆä¾‹å˜›ï¼Œæˆ‘æ–‡ä»¶éšä¾¿åˆ›å»ºäº†ï¼Œä½†æ˜¯æ­£ç»å¼€å‘çš„è¯éœ€è¦åšå¥½ç›®å½•è§„åˆ’ã€‚</p>
<h4 data-id="heading-6">åˆå§‹åŒ–è“æ˜Ÿï¼ˆåœ°çƒï¼‰</h4>
<p>é¦–å…ˆæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥æŠŠåœ°çƒå«è“æ˜Ÿï¼Œå¾ˆå¤šäººæŠŠåœ°çƒç§°ä½œè“æ˜Ÿï¼Œæˆ‘ä¹Ÿå°±è¿™æ ·å«å§ã€‚</p>
<h5 data-id="heading-7">1. åˆ›å»º TCesium ç±»</h5>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªTCesium ç±»ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œé¢åˆå§‹åŒ–è“æ˜Ÿã€‚æˆ‘å°½å¯èƒ½æŠŠæ³¨é‡Šå†™çš„è¯¦ç»†ä¸€äº›</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TCesium</span> {

  dom = <span class="hljs-literal">null</span>,  <span class="hljs-comment">// domèŠ‚ç‚¹å¯¹è±¡</span>
  scene = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// å½“å‰åœºæ™¯</span>
  viewer = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// å½“å‰åœ°å›¾å¯¹è±¡</span>
  trackEntities = {} <span class="hljs-comment">// å«æ˜Ÿå¯¹è±¡</span>
  totalTime = <span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>   <span class="hljs-comment">// ä»¿çœŸæ€»æ—¶é•¿ï¼Œé»˜è®¤ä¸€å¤©ï¼Œ å•ä½ç§’</span>
  timeInterval = <span class="hljs-number">60</span>  <span class="hljs-comment">// é‡‡æ ·é—´éš”ï¼Œå•ä½ç§’</span>
  satelliteDataSource = <span class="hljs-literal">null</span>  <span class="hljs-comment">// å«æ˜Ÿæ•°æ®æº</span>

	<span class="hljs-comment">// æ¥æ”¶ä¸€ä¸ªdomï¼Œå°±æ˜¯ç”¨æ¥æ¸²æŸ“è“æ˜Ÿçš„Dom</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dom</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dom</span> = dom;  <span class="hljs-comment">// æŠŠç©¿è¿›çš„domèŠ‚ç‚¹èµ‹å€¼ç»™å…¨å±€</span>
    <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Ion</span>.<span class="hljs-property">defaultAccessToken</span> = <span class="hljs-string">'è¿™ä¸ªåœ°æ–¹éœ€è¦å¡«å†™è‡ªå·±åœ¨å®˜ç½‘ç”³è¯·çš„Tokenå€¼'</span>;   <span class="hljs-comment">// è®¾ç½® Tokenï¼Œéœ€è¦ä»å®˜ç½‘è‡ªå·±ç”³è¯·</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Viewer</span>(dom, {
      <span class="hljs-attr">homeButton</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// æ˜¾ç¤ºä¸»é¡µæŒ‰é’®</span>
      <span class="hljs-attr">sceneModePicker</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤ºåˆ‡æ¢2D/3DæŒ‰é’®</span>
      <span class="hljs-attr">baseLayerPicker</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// å›¾å±‚åˆ‡æ¢æŒ‰é’®</span>
      <span class="hljs-attr">animation</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// åŠ¨ç”»ï¼Œéœ€è¦å¼€å¯</span>
      <span class="hljs-attr">infoBox</span>: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// ä¿¡æ¯æ¡†æ˜¾ç¤º</span>
      <span class="hljs-attr">selectionIndicator</span>: <span class="hljs-literal">false</span>, 
      <span class="hljs-attr">geocoder</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">timeline</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// æ—¶é—´è½´ï¼Œè¦å¼€å¯çš„å•Š</span>
      <span class="hljs-attr">fullscreenButton</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">shouldAnimate</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">navigationHelpButton</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">CesiumTerrainProvider</span>({   <span class="hljs-comment">// åŸºç¡€åœ°å½¢æ•°æ®</span>
        <span class="hljs-attr">url</span>: <span class="hljs-string">'https://www.supermapol.com/realspace/services/3D-stk_terrain/rest/realspace/datas/info/data/path'</span>,
        <span class="hljs-attr">requestVertexNormals</span>: <span class="hljs-literal">true</span>
      }),
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">scene</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">scene</span>.<span class="hljs-property">postProcessStages</span>.<span class="hljs-property">fxaa</span>.<span class="hljs-property">enabled</span> = <span class="hljs-literal">true</span>   <span class="hljs-comment">// å¼€å¯æŠ—é”¯é½¿ä¼˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">scene</span>.<span class="hljs-property">sun</span>.<span class="hljs-property">show</span> = <span class="hljs-literal">false</span>;   <span class="hljs-comment">// ä¸æ˜¾ç¤ºå¤ªé˜³</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">scene</span>.<span class="hljs-property">moon</span>.<span class="hljs-property">show</span> = <span class="hljs-literal">false</span>;   <span class="hljs-comment">// ä¸æ˜¾ç¤ºæœˆäº®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">scene</span>.<span class="hljs-property">skyBox</span>.<span class="hljs-property">show</span> = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// ä¸æ˜¾ç¤ºæ˜Ÿç©º</span>
  }
}
</code></pre>
<p>ç„¶åè“æ˜Ÿåˆå§‹åŒ–å®Œæˆäº†å°±ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨è“æ˜Ÿçš„ç»„ä»¶ç¼–å†™ä¸€ä¸‹åŸºç¡€ç»“æ„å¼•å…¥ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ed-earth-model"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"earthModel"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"earthModel"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TCesium</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./TCesium"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Home"</span>,

  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">cesium</span>: <span class="hljs-literal">null</span>
    }
  },

  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initMap</span>();  <span class="hljs-comment">// åˆå§‹åŒ–åœ°å›¾</span>
    })
  },

  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">initMap</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cesium</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cesium</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TCesium</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">earthModel</span>);
      }
    }
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.app</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.ed-earth-model</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ç¼–å†™å®Œä¸Šé¢çš„ä»£ç å°±å¯ä»¥çœ‹åˆ°è“æ˜Ÿåˆå§‹åŒ–å®Œæˆäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/313b16840b9442a9ae215bd83f7bbd39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=bmmWu21e9McdpNLxAVtkZeF1CA4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>éå¸¸å¥½ï¼å®Œç¾~</p>
<h5 data-id="heading-8">2. åˆå§‹åŒ–æ•°æ®</h5>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ç”¨æ¥åˆå§‹åŒ–æ•°æ®ï¼ŒåŠ è½½TLEæ˜Ÿå†æ•°æ®çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç½‘ä¸Šæ‰¾ä¸€äº›æ˜Ÿå†æ•°æ®ï¼Œæˆ–è€…å®¢æˆ·æä¾›æ˜Ÿå†æ•°æ®ï¼Œä»–ä»¬æä¾›çš„æ˜Ÿå†æ•°æ®ä¸€èˆ¬æ˜¯è¿™ä¸ªæ ¼å¼çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8d6724c90844d298f0ef41453f19578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=st8l5Ew772SY65C2NSIDHv%2BtXQE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¯ä¸ªå«æ˜Ÿçš„æ˜Ÿå†åŒ…å«<code>ä¸‰è¡Œ</code>ï¼Œç„¶åå¦‚æœæœ‰å¤šä¸ªçš„è¯å°±å¾€ä¸‹æ’ï¼Œè¿™ä¸ªæ˜Ÿå†æ–‡ä»¶å°±æ˜¯ç®€å•çš„ <code>txt</code> æ–‡ä»¶ã€‚</p>
<p>ç„¶åæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªæ˜Ÿå†æ–‡ä»¶è½¬æ¢æˆJSONå¯¹è±¡çš„å½¢å¼ï¼Œå°±åƒä¸‹é¢ï¼š</p>
<pre><code class="hljs language-josn" lang="josn">{
  "name": "STARLINK-2589",
  "tle1": "1 48371U 21038U   25270.54822457  .00018630  00000+0  12665-2 0  9999",
  "tle2": "2 48371  53.0562   3.9906 0001373 107.0633 253.0506 15.06394038242577"
},
</code></pre>
<p>è¿™ä¸ªå¯ä»¥å†™ä¸ª<code>JSå‡½æ•°</code>è¿›è¡Œè½¬æ¢ï¼Œæˆ‘å†™äº†ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³æµªè´¹æ—¶é—´è´´äº†ï¼Œè¿™ä¸ªä¸æ˜¯é‡ç‚¹ï¼Œåˆ°æ—¶å€™ä½ ä»¬éœ€è¦çš„è¯ç›´æ¥è‡ªå·±å†™ä¸€ä¸ªå°±è¡Œäº†ã€‚</p>
<p>æ˜Ÿå†æ•°æ®è‡ªå·±å»æ‰¾å°±è¡Œï¼Œæˆ‘ä¸Šé¢çš„éƒ½ä¸ä¸€å®šå‡†ç¡®äº†ï¼Œå¯ä»¥å»ç½‘ç«™ä¸Šå»å¤åˆ¶ï¼Œå¾ˆå¤šç½‘ç«™å¯ä»¥æŸ¥çœ‹å…¨çƒç™»è®°åœ¨å†Œçš„å«æ˜Ÿï¼Œéƒ½å¯ä»¥å¤åˆ¶æ˜Ÿå†æ•°æ®ï¼Œè¦ä¿è¯æ˜Ÿå†æ•°æ®çš„å‡†ç¡®æ€§å“ˆï¼Œå‡ºä¸€ç‚¹é—®é¢˜éƒ½ä¸è¡Œï¼Œæ˜Ÿå†æ•°æ®æœ‰äº†çš„è¯ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨åœ°çƒå±•ç¤ºè½¨é“äº†ã€‚</p>
<p>ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦è¯´ä¸€ä¸‹ï¼Œå°±æ˜¯è¿™ä¸ªæ˜Ÿå†å•Šï¼Œä»–æ˜¯æœ‰<code>æ—¶æ•ˆæ€§</code>çš„ï¼Œä¸€èˆ¬æ—¶æ•ˆæ€§å°±æ˜¯7å¤©åˆ°14å¤©å·¦å³ï¼Œå¤ªä¹…äº†çš„è¯ä¸æ˜¯ä¸èƒ½ç”¨ï¼Œè€Œæ˜¯ä¸å‡†ç¡®äº†ï¼Œå«æ˜Ÿçš„ä½ç½®å¯èƒ½å¤©å·®åœ°åˆ«äº†ã€‚</p>
<h5 data-id="heading-9">3. å«æ˜Ÿä»¿çœŸ</h5>
<p>é¦–å…ˆä»¿çœŸè¿™ä¸ªå°±æ˜¯çœ‹å«æ˜Ÿåœ¨æŸä¸€æ—¶é—´çš„è¿è¡Œè½¨è¿¹å˜›ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åæ¥å¤„ç†è¿™ä¸ªé€»è¾‘ã€‚</p>
<p>é¦–å…ˆä»¿çœŸæ—¶é—´å¯ä»¥æ˜¯<code>è‡ªå®šä¹‰ä»¿çœŸæ—¶é—´</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>ä½¿ç”¨å½“å‰æ—¶é—´</code>å¼€å§‹ä»¿çœŸã€‚</p>
<p>æ¯”å¦‚æ ¹æ®æä¾›çš„æ˜Ÿå†æ•°æ®ï¼Œçœ‹ä¸€ä¸‹ <code>2025-10-10 12:00:00</code>  åˆ° <code>2025-10-10 15:00:00</code> è¿™ä¸‰ä¸ªå°æ—¶çš„å«æ˜Ÿè½¨è¿¹ã€‚æˆ–è€…æ˜¯çœ‹ä¸€ä¸‹ç°åœ¨æ—¶é—´åˆ°æœªæ¥ä¸¤ä¸ªå°æ—¶å†…çš„å«æ˜Ÿè¿è¡Œè½¨è¿¹ã€‚</p>
<p><strong>å‡†å¤‡æ•°æ®</strong></p>
<p>æˆ‘å…ˆè´´ä»£ç ï¼Œç„¶åä¸€ç‚¹ä¸€ç‚¹è§£é‡Šå“ˆï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-title function_">addTle</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> tleData = [   <span class="hljs-comment">// æ˜Ÿå†æ•°æ®</span>
      {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"STARLINK-2589"</span>,
        <span class="hljs-string">"tle1"</span>: <span class="hljs-string">"1 48371U 21038U   25270.54822457  .00018630  00000+0  12665-2 0  9999"</span>,
        <span class="hljs-string">"tle2"</span>: <span class="hljs-string">"2 48371  53.0562   3.9906 0001373 107.0633 253.0506 15.06394038242577"</span>
      }
    ]
    <span class="hljs-keyword">let</span> startTime = <span class="hljs-string">"2025-11-11 08:00:00"</span>;  <span class="hljs-comment">// ä¸œå…«åŒºæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åŒ—äº¬æ—¶é—´</span>
    <span class="hljs-keyword">let</span> endTime = <span class="hljs-string">"2025-11-11 12:00:00"</span>;  <span class="hljs-comment">// ä¸œå…«åŒºæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åŒ—äº¬æ—¶é—´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadTleFile</span>(tleData, <span class="hljs-literal">true</span>, startTime, endTime);  <span class="hljs-comment">// è°ƒç”¨åŠ è½½TLEæ•°æ®çš„å‡½æ•°</span>
  }
</code></pre>
<p>è¿™ä¸ªå‡½æ•°å°±æ˜¯å‡†å¤‡äº†ä¸€ä¸‹æ˜Ÿå†æ•°æ®ï¼Œå½“ç„¶æˆ‘è¿™é‡Œå†™æ­»äº†ï¼Œåˆ°æ—¶å€™é¡¹ç›®è‚¯å®šåç«¯è¿”å›äº†ã€‚</p>
<p>ç„¶ååˆ›å»ºäº†<code>startTime</code>  å’Œ <code>endTime</code> ï¼Œè¡¨ç¤ºä»¿çœŸè¿™ä¸ªæ—¶é—´æ®µçš„å«æ˜Ÿè½¨è¿¹ã€‚</p>
<p>ç„¶åå°±æ˜¯å»èµ°<code>loadTleFile()</code>å‡½æ•°ã€‚</p>
<p><strong>åŠ è½½TLEæ•°æ®å‡½æ•°</strong></p>
<p>æˆ‘å…ˆå†™ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// åŠ è½½æ˜Ÿå†æ–‡ä»¶ï¼Œå®ç°å«æ˜Ÿè½¨è¿¹æ˜¾ç¤º</span>
  <span class="hljs-title function_">loadTleFile</span>(<span class="hljs-params">tleData, showPath = <span class="hljs-literal">false</span>, startTime = <span class="hljs-literal">null</span>, endTime = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">let</span> start = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">let</span> stop = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (startTime &amp;&amp; endTime) { <span class="hljs-comment">// å‡è®¾æä¾›äº†å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´</span>
      start = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">fromDate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">beijingTimeToDate</span>(startTime));
      stop = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">fromDate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">beijingTimeToDate</span>(endTime));
    } <span class="hljs-keyword">else</span> {  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ä¼ æ—¶é—´é»˜è®¤ä»ç³»ç»Ÿå½“å‰æ—¶é—´å¾€åä¸€å¤©çš„ä»¿çœŸæ—¶é—´</span>
      start = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">fromIso8601</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>());
      stop = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">addSeconds</span>(start, <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalTime</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">JulianDate</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalTime</span> = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">secondsDifference</span>(stop, start);  <span class="hljs-comment">// è®¡ç®—å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´çš„æ—¶é—´å·® å•ä½ç§’</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">startTime</span> = start.<span class="hljs-title function_">clone</span>() <span class="hljs-comment">// ç»™cesiumæ—¶é—´è½´è®¾ç½®å¼€å§‹çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¾¹çš„ä¸œå…«åŒºæ—¶é—´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">stopTime</span> = stop.<span class="hljs-title function_">clone</span>() <span class="hljs-comment">// è®¾ç½®cesiumæ—¶é—´è½´è®¾ç½®ç»“æŸçš„æ—¶é—´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">currentTime</span> = start.<span class="hljs-title function_">clone</span>() <span class="hljs-comment">// è®¾ç½®cesiumæ—¶é—´è½´è®¾ç½®å½“å‰çš„æ—¶é—´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">clockRange</span> = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">ClockRange</span>.<span class="hljs-property">LOOP_STOP</span> <span class="hljs-comment">// æ—¶é—´ç»“æŸäº†ï¼Œå†ç»§ç»­é‡å¤æ¥ä¸€é</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">multiplier</span> = <span class="hljs-number">1</span> <span class="hljs-comment">// æ—¶é—´è½´å€é€Ÿï¼Œ1æ˜¯æ­£å¸¸é€Ÿåº¦ï¼Œ2æ˜¯ä¸¤å€é€Ÿï¼Œ0.5æ˜¯åŠé€Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">clock</span>.<span class="hljs-property">clockStep</span> = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">ClockStep</span>.<span class="hljs-property">SYSTEM_CLOCK_MULTIPLIER</span> <span class="hljs-comment">// æ—¶é—´è½´æ­¥é•¿ï¼ŒSYSTEM_CLOCK_MULTIPLIERæ˜¯æ ¹æ®ç³»ç»Ÿæ—¶é—´æ­¥é•¿æ¥æ›´æ–°æ—¶é—´è½´ï¼Œå…¶ä»–é€‰é¡¹è¿˜æœ‰TICK_DEPENDENTå’ŒSYSTEM_CLOCK</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">timeline</span>.<span class="hljs-title function_">updateFromClock</span>();  <span class="hljs-comment">// å¼ºåˆ¶æ›´æ–°æ—¶é—´è½´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">timeline</span>.<span class="hljs-title function_">zoomTo</span>(start.<span class="hljs-title function_">clone</span>(), stop.<span class="hljs-title function_">clone</span>());  <span class="hljs-comment">// è®¾ç½®æ—¶é—´è½´æ˜¾ç¤ºåŒºé—´</span>

    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteDataSource</span>) {  <span class="hljs-comment">// åˆ¤æ–­å«æ˜Ÿæ•°æ®æºæ˜¯ä¸æ˜¯ç©ºï¼ˆå¯ä»¥ä¸ç”¨ï¼Œè§†æƒ…å†µè€Œå®šï¼Œå†™ä¸€ä¸‹æ˜¯çŸ¥é“å¯ä»¥è¿™æ ·ç”¨ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">CustomDataSource</span>(<span class="hljs-string">'satellite'</span>)  <span class="hljs-comment">// æ˜¯ç©ºåˆ™åˆ›å»ºä¸€ä¸ªæ•°æ®æº</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">dataSources</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteDataSource</span>)  <span class="hljs-comment">// æŠŠæ•°æ®æºæ·»åŠ åˆ°viewerï¼ŒåæœŸå«æ˜Ÿå…¨éƒ¨æ·»åŠ åˆ°å«æ˜Ÿæ•°æ®æº</span>
    }
    <span class="hljs-comment">// åˆ†æ‰¹å¤„ç†å«æ˜Ÿæ•°æ®ï¼Œé¿å…ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰å«æ˜Ÿå¯¼è‡´é¡µé¢å¡ä½</span>
    <span class="hljs-keyword">let</span> sss = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(tleData))
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_loadSatellitesInBatches</span>(sss, start, stop, <span class="hljs-number">10</span>, showPath) <span class="hljs-comment">// æ¯æ‰¹åŠ è½½10ä¸ªå«æ˜Ÿ</span>
  }
</code></pre>
<p>é¦–å…ˆ<code>loadTleFile()</code>å‡½æ•°æ¥æ”¶å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯<code>æ˜Ÿå†æ•°æ®åˆ—è¡¨</code>ã€<code>æ˜¯å¦æ˜¾ç¤ºå«æ˜Ÿè½¨è¿¹çº¿</code>ã€<code>ä»¿çœŸå¼€å§‹åŒ—äº¬æ—¶é—´</code>ã€<code>ä»¿çœŸç»“æŸåŒ—äº¬æ—¶é—´</code>ã€‚</p>
<p>é‡Œé¢ä¸»è¦åšäº†å•¥å‘¢ï¼Ÿä¸»è¦å°±æ˜¯<code>è®¾ç½®æ—¶é—´è½´</code>ï¼Œè®©<code>Cesium</code>ç•Œé¢ä¸Šçš„æ—¶é—´è½´æ˜¾ç¤ºæˆæˆ‘ä»¬è®¾ç½®çš„<code>ä»¿çœŸæ—¶é—´æ®µ</code>ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€é—®é¢˜éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹å“ˆï¼Œé‚£å°±æ˜¯æ—¶é—´é—®é¢˜ã€‚æˆ‘ä»¬ä¼ å…¥çš„<code>å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æ˜¯åŒ—äº¬æ—¶é—´</code>ï¼Œä¹Ÿå°±æ˜¯<code>ä¸œå…«åŒº</code>çš„æ—¶é—´ã€‚ä½†æ˜¯ï¼Cesiumæ—¶é—´è½´è®¾ç½®çš„æ—¶é—´éœ€è¦æ˜¯<code>UTCæ—¶é—´</code>ã€‚</p>
<p><code>UTC æ—¶é—´</code>ï¼ˆCoordinated Universal Timeï¼Œ<code>åè°ƒä¸–ç•Œæ—¶</code>ï¼‰æ˜¯å…¨çƒé€šç”¨çš„æ ‡å‡†æ—¶é—´ï¼Œè¢«ä¸–ç•Œå„åœ°ç”¨ä½œæ—¶é—´åŸºå‡†ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯ç»Ÿä¸€ã€æ— æ—¶åŒºåç§»ã€åŸºäºåŸå­æ—¶å’Œåœ°çƒè‡ªè½¬æ ¡å‡†ã€‚</p>
<p>æ‰€ä»¥è¯´æˆ‘ä»¬è®¾ç½®æ—¶é—´è½´çš„æ—¶å€™éœ€è¦<code>æŠŠåŒ—äº¬æ—¶é—´è½¬æ¢æˆUTCæ—¶é—´</code>ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨äº†<code>beijingTimeToDate()</code>å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js">      start = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">fromDate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">beijingTimeToDate</span>(startTime));
      stop = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">fromDate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">beijingTimeToDate</span>(endTime));
</code></pre>
<p><code>beijingTimeToDate()</code>å‡½æ•°å¯ä»¥æŠŠåŒ—äº¬æ—¶é—´å­—ç¬¦ä¸²è½¬æˆDateç±»å‹çš„å¯¹è±¡ï¼Œç„¶åé€šè¿‡<code>Cesium.JulianDate.fromDate()</code>å‡½æ•°å¯ä»¥è½¬æˆUTCæ—¶é—´ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// åŒ—äº¬æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢ä¸ºDateå¯¹è±¡</span>
  <span class="hljs-title function_">beijingTimeToDate</span>(<span class="hljs-params">beijingTimeString</span>) {
    <span class="hljs-keyword">const</span> isoString = beijingTimeString.<span class="hljs-title function_">replace</span>(<span class="hljs-string">' '</span>, <span class="hljs-string">'T'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(isoString);
  }
</code></pre>
<p>è§£é‡Šä¸€ä¸‹ï¼Œå…¶å®<code>åŒ—äº¬æ—¶é—´å’ŒUTCæ—¶é—´</code>å°±<code>å·®äº†å…«å°æ—¶</code>ï¼Œä¹Ÿå°±æ˜¯è¯´<code>åŒ—äº¬æ—¶é—´æ¯”UTCæ—¶é—´å¤šå…«å°æ—¶</code>ã€‚æ¯”å¦‚<code>åŒ—äº¬æ—¶é—´2025-11-11 08:00:00</code> å¯¹åº”çš„<code>UTCæ—¶é—´å°±æ˜¯ 2025-11-11 00:00:00</code>ã€‚</p>
<p>åœ¨åé¢å°±æ˜¯è®¾ç½®æ—¶é—´è½´äº†ï¼Œæ›´æ–°æ—¶é—´è½´ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬æ—¶é—´è½´å°±è®¾ç½®æˆåŠŸäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d90c92999b441aba7f4deb7f1d7f1bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=d3niq0IzQfPEcVdpNcBbYX42Cy0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è®¾ç½®æˆåŠŸå°±è°ƒç”¨äº† <code>_loadSatellitesInBatches()</code> å‡½æ•°åˆ†æ‰¹å¤„ç†æ˜Ÿå†æ•°æ®äº†ã€‚</p>
<h5 data-id="heading-10">_loadSatellitesInBatches()å‡½æ•° åˆ†æ‰¹å¤„ç†æ˜Ÿå†æ•°æ®</h5>
<p>è´´è¿™ä¸ªå‡½æ•°å®Œæ•´ä»£ç ï¼Œåé¢è§£é‡Šï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// åˆ†æ‰¹åŠ è½½å«æ˜Ÿæ•°æ® </span>
  <span class="hljs-title function_">_loadSatellitesInBatches</span>(<span class="hljs-params">satellites, start, stop, batchSize, showPath</span>) {
    <span class="hljs-keyword">const</span> batches = [];
    <span class="hljs-comment">// å°†å«æ˜Ÿæ•°æ®åˆ†æˆå¤šä¸ªæ‰¹æ¬¡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; satellites.<span class="hljs-property">length</span>; i += batchSize) {
      batches.<span class="hljs-title function_">push</span>(satellites.<span class="hljs-title function_">slice</span>(i, i + batchSize));
    }
    <span class="hljs-comment">// é€’å½’å¤„ç†æ¯ä¸ªæ‰¹æ¬¡</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">processBatch</span> = (<span class="hljs-params">batchIndex</span>) =&gt; {
      <span class="hljs-keyword">if</span> (batchIndex &gt;= batches.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ‰€æœ‰æ‰¹æ¬¡å¤„ç†å®Œæ¯•</span>
      }
      <span class="hljs-comment">// å¤„ç†å½“å‰æ‰¹æ¬¡</span>
      <span class="hljs-keyword">const</span> currentBatch = batches[batchIndex];
      currentBatch.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">satellite</span> =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_addSatelliteEntity</span>(satellite, start, stop, showPath);
      });
      <span class="hljs-comment">// åœ¨ä¸‹ä¸€å¸§å¤„ç†ä¸‹ä¸€æ‰¹æ¬¡ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</span>
      <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">processBatch</span>(batchIndex + <span class="hljs-number">1</span>);
      });
    };
    <span class="hljs-comment">// å¼€å§‹å¤„ç†ç¬¬ä¸€æ‰¹</span>
    <span class="hljs-title function_">processBatch</span>(<span class="hljs-number">0</span>);
  }
</code></pre>
<p>ä¸ºå•¥è¦åˆ†æ‰¹å¤„ç†å“ˆï¼Œå…¶å®å•çº¯æ¡ˆä¾‹çš„è¯ä¸éœ€è¦ï¼Œåˆ†æ‰¹æ˜¯æ€•å«æ˜Ÿæ˜Ÿå†å¾ˆå¤šï¼Œæ¯”å¦‚ä¸Šç™¾é¢—å«æ˜Ÿï¼Œæˆ–è€…æ˜¯ä¸Šåƒé¢—å«æ˜Ÿï¼Œæœ€å¥½åˆ†æ‰¹ã€‚</p>
<p>å› ä¸ºåé¢éœ€è¦å¯¹æ¯é¢—å«æ˜Ÿçš„æ˜Ÿå†è¿›è¡Œå¤„ç†ï¼Œè·å–æ¯é¢—å«æ˜Ÿä¸åŒæ—¶é—´æ®µçš„ä½ç½®ï¼Œæ¯”å¦‚1000é¢—å«æ˜Ÿï¼Œæ¯é¢—å«æ˜Ÿå–1000ä¸ªä½ç½®ï¼Œè¿™ä¸ªéå†æ—¶é—´æ˜¯æœ‰ç‚¹å„¿ä¹…çš„ï¼Œå¦‚æœä¸åˆ†æ‰¹çš„è¯ï¼ŒCesiumå±•ç¤ºçš„è¿›ç¨‹ä¼šè¢«å¡æ­»ï¼Œé¡µé¢æ•´ä¸ªæ“ä½œä¸äº†äº†ï¼Œä½†æ˜¯æ¡ˆä¾‹å°±ä¸€é¢—å«æ˜Ÿï¼Œä¸éœ€è¦åˆ†æ‰¹ï¼Œä½†æ˜¯åšåˆ†æ‰¹å¤„ç†æ˜¯æ²¡åå¤„çš„ï¼Œæœ‰å¤‡æ— æ‚£ã€‚</p>
<p><code>_loadSatellitesInBatches()</code>å‡½æ•°æ¥æ”¶äº”ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯<code>æ˜Ÿå†åˆ—è¡¨</code>ã€<code>å¼€å§‹UTCæ—¶é—´</code>ã€<code>ç»“æŸUTCæ—¶é—´</code>ã€<code>æ¯æ‰¹ä¸ªæ•°</code>ã€<code>æ˜¯å¦æ˜¾ç¤ºè½¨è¿¹çº¿</code>ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°æ²¡å•¥å¥½è¯´çš„ï¼Œçœ‹çœ‹å°±æ‡‚ï¼Œè·ŸCesiumæ²¡å•¥å…³ç³»ï¼Œå°±æ˜¯åˆ†æ‰¹åŠ è½½ï¼Œä¸€å¸§åŠ è½½åé¢—å«æ˜Ÿã€‚</p>
<p>æ¯ä¸€å¸§éå†è¿™ä¸€æ‰¹æ¬¡çš„å«æ˜Ÿæ˜Ÿå†ï¼Œæ‰§è¡Œä¸€ä¸ª<code>this._addsatelliteEntity(satellite, start, stop, showPath);</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰æ˜¯çœŸæ­£çš„å¤„ç†æ˜Ÿå†çš„å‡½æ•°ã€‚</p>
<h5 data-id="heading-11">_addSatelliteEntity å¤„ç†æ˜Ÿå†å‡½æ•°</h5>
<p>é¦–å…ˆè¿˜æ˜¯è´´ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// æ·»åŠ å•ä¸ªå«æ˜Ÿå®ä½“</span>
  <span class="hljs-title function_">_addSatelliteEntity</span>(<span class="hljs-params">satellite, start, stop, showPath</span>) {
    <span class="hljs-comment">// åˆ›å»ºä¸´æ—¶å¯¹è±¡å­˜å‚¨å½“å‰å«æ˜Ÿä¿¡æ¯ï¼Œé¿å…ä¿®æ”¹thiså¯¹è±¡</span>
    <span class="hljs-keyword">const</span> satelliteInfo = {
      <span class="hljs-attr">name</span>: satellite.<span class="hljs-property">name</span>.<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">tleLine1</span>: satellite.<span class="hljs-property">tle1</span>.<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">tleLine2</span>: satellite.<span class="hljs-property">tle2</span>.<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">satrec</span>: <span class="hljs-title function_">twoline2satrec</span>(satellite.<span class="hljs-property">tle1</span>.<span class="hljs-title function_">trim</span>(), satellite.<span class="hljs-property">tle2</span>.<span class="hljs-title function_">trim</span>()),
      <span class="hljs-attr">leadTime</span>: <span class="hljs-built_in">parseInt</span>(<span class="hljs-number">24</span> * <span class="hljs-number">3600</span> / satellite.<span class="hljs-property">tle2</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">52</span>, <span class="hljs-number">64</span>))
    };

    <span class="hljs-comment">// åˆ›å»ºå«æ˜Ÿå®ä½“</span>
    <span class="hljs-keyword">let</span> cesiumSateEntity = {
      <span class="hljs-attr">id</span>: satellite.<span class="hljs-property">noradId</span> || satellite.<span class="hljs-property">name</span>,  <span class="hljs-comment">// è®¾ç½®å«æ˜Ÿå¯¹è±¡çš„ID</span>
      <span class="hljs-attr">name</span>: satellite.<span class="hljs-property">name</span>, <span class="hljs-comment">// è®¾ç½®å«æ˜Ÿçš„åç§°</span>
      <span class="hljs-attr">description</span>: satellite.<span class="hljs-property">name</span>,  <span class="hljs-comment">// è®¾ç½®æè¿°</span>
      <span class="hljs-comment">// ä½¿ç”¨ä¸“ç”¨å‡½æ•°è®¡ç®—ä½ç½®ï¼Œä¼ å…¥å«æ˜Ÿä¿¡æ¯</span>
      <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_getSatellitePositionProperty</span>(start, satelliteInfo),
      <span class="hljs-attr">point</span>: {  <span class="hljs-comment">// å«æ˜Ÿç”¨ç‚¹è¡¨ç¤º</span>
        <span class="hljs-attr">pixelSize</span>: <span class="hljs-number">10</span>,  <span class="hljs-comment">// å«æ˜Ÿç‚¹åä¸ªåƒç´ </span>
        <span class="hljs-attr">color</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">WHITE</span>,  <span class="hljs-comment">// å«æ˜Ÿç‚¹æ˜¯ç™½è‰²çš„</span>
      },
      <span class="hljs-attr">path</span>: {  <span class="hljs-comment">// å«æ˜Ÿè½¨è¿¹çº¿è®¾ç½®</span>
        <span class="hljs-attr">width</span>: <span class="hljs-number">0.5</span>,   <span class="hljs-comment">// è½¨è¿¹çº¿çš„å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ </span>
        <span class="hljs-attr">leadTime</span>: satelliteInfo.<span class="hljs-property">leadTime</span>,  <span class="hljs-comment">//  è½¨è¿¹çº¿ â€œå‰ç»æ—¶é—´â€ï¼Œå³æ˜¾ç¤ºå«æ˜Ÿä»å½“å‰æ—¶é—´å¼€å§‹ï¼Œæœªæ¥ä¸€æ®µæ—¶é—´å†…çš„é¢„æµ‹è½¨è¿¹é•¿åº¦ï¼Œè¿™é‡Œè®¾ç½®çš„å°±æ˜¯å«æ˜Ÿè¿è¡Œä¸€åœˆçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºæœªæ¥ä¸€åœˆçš„è½¨è¿¹</span>
        <span class="hljs-attr">trailTime</span>: <span class="hljs-number">0</span>,  <span class="hljs-comment">// è½¨è¿¹çº¿ â€œå›æº¯æ—¶é—´â€ï¼Œå³æ˜¾ç¤ºå«æ˜Ÿä»è¿‡å»ä¸€æ®µæ—¶é—´åˆ°å½“å‰æ—¶é—´çš„è½¨è¿¹é•¿åº¦ï¼Œè®¾ç½®ä¸º 0 è¡¨ç¤ºä¸æ˜¾ç¤ºå«æ˜Ÿè¿‡å»çš„è½¨è¿¹ï¼Œåªå±•ç¤ºæœªæ¥çš„é¢„æµ‹è½¨è¿¹</span>
        <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">YELLOW</span>,  <span class="hljs-comment">// çº¿æ˜¯é»„è‰²çš„</span>
        <span class="hljs-attr">show</span>: showPath === <span class="hljs-literal">true</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>, <span class="hljs-comment">// é»˜è®¤éšè—è½¨è¿¹</span>
        <span class="hljs-attr">clampToGround</span>: <span class="hljs-literal">false</span>  <span class="hljs-comment">// è½¨è¿¹çº¿æ˜¯å¦ â€œè´´åœ°â€ï¼Œå«æ˜Ÿåœ¨å¤©ä¸Šé£ï¼Œè½¨è¿¹å°±ä¸è¦è´´åœ°äº†å“ˆ</span>
      },
      <span class="hljs-attr">label</span>: {  <span class="hljs-comment">// å«æ˜Ÿçš„labelå±•ç¤ºé…ç½®</span>
        <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤º</span>
        <span class="hljs-attr">text</span>: satellite.<span class="hljs-property">name</span>,  <span class="hljs-comment">// æ˜¾ç¤ºçš„å†…å®¹</span>
        <span class="hljs-attr">font</span>: <span class="hljs-string">'12px sans-serif'</span>,   <span class="hljs-comment">// å­—ä½“è®¾ç½®</span>
        <span class="hljs-attr">fillColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">WHITE</span>,   <span class="hljs-comment">// å¡«å……é¢œè‰²ç™½è‰²</span>
        <span class="hljs-attr">outlineColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">BLACK</span>,  <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²é»‘è‰²</span>
        <span class="hljs-attr">outlineWidth</span>: <span class="hljs-number">2</span>,  <span class="hljs-comment">// è¾¹æ¡†å®½åº¦2åƒç´ </span>
        <span class="hljs-attr">pixelOffset</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cartesian2</span>(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>),  <span class="hljs-comment">// åç§»é‡</span>
      }
    };
    <span class="hljs-comment">// æ·»åŠ å«æ˜Ÿå®ä½“</span>
    <span class="hljs-keyword">let</span> satelliteEntity = <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteDataSource</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Entity</span>(cesiumSateEntity));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trackEntities</span>[satelliteEntity.<span class="hljs-property">id</span>] = satelliteEntity;
  }
</code></pre>
<p>é¦–å…ˆè¿™ä¸ªå‡½æ•°æ¥æ”¶å››ä¸ªå‚æ•°ï¼š<code>å•é¢—å«æ˜Ÿæ˜Ÿå†æ•°æ®</code>ã€<code>ä»¿çœŸå¼€å§‹UTCæ—¶é—´</code>ã€<code>ä»¿çœŸç»“æŸUTCæ—¶é—´</code>ã€<code>æ˜¯å¦æ˜¾ç¤ºå«æ˜Ÿè½¨è¿¹çº¿</code>ã€‚</p>
<p>å‡½æ•°ç¬¬ä¸€æ­¥æ˜¯å¯¹å«æ˜Ÿ TLE æ•°æ®çš„ç»“æ„åŒ–å°è£…ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a378b82107f04b76b57ac0ece70c6f12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=OZLgkD8OeNzPcTutwxp5J6QjmjI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å› ä¸ºä¼ è¿›æ¥çš„<code>satellite</code>å…¶å®å°±æ˜¯å•ä¸ªå«æ˜Ÿæ•°æ®ï¼Œå°±æ˜¯è¿™ä¸ªï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92ddf144feef4d61bfc3f8fae35f7d75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=i3u28ggCluKI4RvgtFPGnw%2BqOuE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ‰€ä»¥<code>satelliteInfo</code> å‰ä¸‰ä¸ªå€¼ä¸è§£é‡Šäº†ã€‚</p>
<p>ç„¶åç¬¬ä¸‰ä¸ªå­—æ®µï¼Œ<code>satrec: twoline2satrec(satellite.tle1.trim(), satellite.tle2.trim())</code> æ˜¯é€šè¿‡ <code>twoline2satrec</code> æ–¹æ³•ï¼ˆé€šå¸¸æ¥è‡ª satellite.js åº“ï¼‰è§£æ TLE æ•°æ®åå¾—åˆ°çš„ <code>å«æ˜Ÿè½¨é“æ¨¡å‹å¯¹è±¡ï¼ˆsatrecï¼‰</code>ã€‚<code>satrec</code> åŒ…å«äº† <code>SGP4 è½¨é“</code>è®¡ç®—æ‰€éœ€çš„æ‰€æœ‰å‚æ•°ï¼ˆå¦‚åŠé•¿è½´ã€å€¾è§’ã€å†å…ƒæ—¶é—´ç­‰ï¼‰ï¼Œæ˜¯åç»­è°ƒç”¨ <code>propagate</code> æ–¹æ³•è®¡ç®—å«æ˜Ÿå®æ—¶ä½ç½®ï¼ˆ<code>ECI åæ ‡</code>ï¼‰çš„æ ¸å¿ƒè¾“å…¥ã€‚</p>
<p><code>twoline2satrec</code>  æ–¹æ³•æ˜¯<code>satellite.js</code> åº“é‡Œé¢çš„ï¼Œéœ€è¦åœ¨é¡¶éƒ¨å¼•å…¥ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { twoline2satrec, propagate, gstime, eciToGeodetic, degreesLong } <span class="hljs-keyword">from</span> <span class="hljs-string">'satellite.js'</span>
</code></pre>
<p>è¿™å‡ ä¸ªéƒ½æ˜¯åé¢ç”¨åˆ°çš„ï¼Œå…¨å†™ä¸Šå§ã€‚</p>
<p>ç¬¬å››ä¸ªå­—æ®µï¼Œ<code>leadTime: parseInt(24 * 3600 / satellite.tle2.slice(52, 64))</code>  ç”¨æ¥è®¡ç®—å«æ˜Ÿçš„è½¨é“å‘¨æœŸï¼Œå•ä½æ˜¯ç§’ï¼Œè¡¨ç¤ºå«æ˜Ÿç»•åœ°çƒä¸€å‘¨æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<p>è¿™ä¸ª<code>satelliteInfo</code> å¯¹è±¡è§£é‡Šå®Œäº†ï¼Œåé¢å¯èƒ½ç”¨åˆ°é‡Œé¢çš„å­—æ®µï¼Œæ³¨æ„çŸ¥é“æ¯ä¸ªå­—æ®µçš„å«ä¹‰å°±è¡Œã€‚</p>
<p>åœ¨åé¢å°±æ˜¯åˆ›å»ºä¸€ä¸ªå«æ˜Ÿå®ä½“<code>cesiumSateEntity</code>ï¼Œä»£ç æ³¨é‡Šçš„å¾ˆæ¸…æ¥šäº†ï¼Œå†å°±æ˜¯æŠŠå«æ˜Ÿå®ä½“å¯¹è±¡æ·»åŠ åˆ°å«æ˜Ÿæ•°æ®æºé‡Œé¢ï¼Œå…¶ä¸­æ·»åŠ åˆ°å«æ˜Ÿæ•°æ®æºä¹‹åä¼šè¿”å›è¿™ä¸ªå«æ˜Ÿå®ä½“å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å°†å«æ˜Ÿæ·»åŠ åˆ°å«æ˜Ÿæ•°æ®æº</span>
<span class="hljs-keyword">let</span> satelliteEntity = <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteDataSource</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Entity</span>(cesiumSateEntity));
</code></pre>
<p>ä»–ä¼šè¿”å›ä¸€ä¸ª<code>satelliteEntity </code>ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹satelliteEntity çš„å†…å®¹ï¼Œé¡µé¢ä¸Šçš„å«æ˜ŸçŠ¶æ€ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œæ¯”å¦‚é¢œè‰²ã€æ˜¯å¦æ˜¾ç¤ºè½¨è¿¹ã€æ˜¯å¦å¯è§å•¥çš„ï¼Œä¹Ÿå¯ä»¥è·å–ä»–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç»åº¦ã€çº¬åº¦å•¥çš„ã€‚æ‰€ä»¥åè¾¹åœ¨å¯¹è±¡é‡Œé¢å­˜å‚¨äº†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">trackEntities</span>[satelliteEntity.<span class="hljs-property">id</span>] = satelliteEntity; <span class="hljs-comment">// å­˜å‚¨å«æ˜Ÿå®ä½“</span>
</code></pre>
<p>ä¸»è¦è¯´çš„æ˜¯å•¥å‘¢ï¼æ˜¯åˆ›å»ºå«æ˜Ÿå®ä½“å¯¹è±¡çš„æ—¶å€™è®¾ç½®ä½ç½®è°ƒç”¨äº†ä¸€ä¸ªä¸“ç”¨çš„è®¡ç®—å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// ä½¿ç”¨ä¸“ç”¨å‡½æ•°è®¡ç®—ä½ç½®ï¼Œä¼ å…¥å«æ˜Ÿä¿¡æ¯</span>
  <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_getSatellitePositionProperty</span>(start, satelliteInfo),
</code></pre>
<p>è°ƒç”¨çš„<code>_getSatellitePositionProperty</code>å‡½æ•°æ‰æ˜¯å…³é”®ï¼Œä»–ç”¨æ¥è®¡ç®—è¿™ä¸ªå«æ˜Ÿåœ¨è¿™ä¸ªä»¿çœŸæ—¶é—´æ®µçš„ä½ç½®ä¿¡æ¯ï¼</p>
<h5 data-id="heading-12">å«æ˜Ÿä½ç½®è®¡ç®—</h5>
<p>è¿˜æ˜¯å“ˆï¼Œå…ˆè´´ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// ä¸ºå•ä¸ªå«æ˜Ÿè®¡ç®—ä½ç½®å±æ€§</span>
  <span class="hljs-title function_">_getSatellitePositionProperty</span>(<span class="hljs-params">start, satelliteInfo</span>) {
    <span class="hljs-keyword">const</span> positionProperty = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">SampledPositionProperty</span>();  <span class="hljs-comment">// ä½ç½®å±æ€§</span>
    <span class="hljs-keyword">const</span> baseTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">toDate</span>(start).<span class="hljs-title function_">getTime</span>();  <span class="hljs-comment">// å¼€å§‹æ—¶é—´çš„æ—¶é—´æˆ³</span>
    <span class="hljs-comment">// è¿™æ ·å¯ä»¥åœ¨ä¿æŒè½¨è¿¹è¿ç»­æ€§çš„åŒæ—¶å¤§å¹…æé«˜æ€§èƒ½</span>
    <span class="hljs-keyword">const</span> sampleInterval = <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeInterval</span>; <span class="hljs-comment">// timeInterval ç§’é’Ÿä¸€ä¸ªé‡‡æ ·ç‚¹ï¼ˆç§’ï¼‰</span>
    <span class="hljs-keyword">const</span> totalSamples = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">totalTime</span> / sampleInterval); <span class="hljs-comment">// è®¡ç®—é‡‡æ ·ç‚¹æ•°</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalSamples; i++) {  <span class="hljs-comment">// éå†æ¯ä¸ªé‡‡æ ·ç‚¹</span>
      <span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(baseTime + i * sampleInterval * <span class="hljs-number">1000</span>);  <span class="hljs-comment">// é‡‡æ ·æ—¶é—´</span>
      <span class="hljs-keyword">const</span> sateCoord = <span class="hljs-title function_">propagate</span>(satelliteInfo.<span class="hljs-property">satrec</span>, currentTime).<span class="hljs-property">position</span>;  <span class="hljs-comment">// è®¡ç®—å½“å‰æ—¶é—´çš„ä½ç½®</span>
      <span class="hljs-keyword">if</span> (!sateCoord?.<span class="hljs-property">x</span> || !sateCoord?.<span class="hljs-property">y</span> || !sateCoord?.<span class="hljs-property">z</span>) {  <span class="hljs-comment">// å¦‚æœè®¡ç®—å‡ºçš„ä½ç½®ä¸ºç©ºï¼Œåˆ™è·³è¿‡</span>
        <span class="hljs-keyword">continue</span>
      }
      <span class="hljs-keyword">let</span> gsmt = <span class="hljs-title function_">gstime</span>(currentTime)  <span class="hljs-comment">// è®¡ç®—å½“å‰æ—¶é—´çš„ GST æ—¶é—´</span>
      <span class="hljs-keyword">let</span> efgd = <span class="hljs-title function_">eciToGeodetic</span>(sateCoord, gsmt)  <span class="hljs-comment">//  å°† ECI åæ ‡è½¬æ¢ä¸ºå¤§åœ°åæ ‡</span>
      <span class="hljs-keyword">let</span> lon = <span class="hljs-title function_">degreesLong</span>(efgd.<span class="hljs-property">longitude</span>)  <span class="hljs-comment">// å°†å¤§åœ°åæ ‡è½¬æ¢ä¸ºåº¦</span>
      <span class="hljs-keyword">let</span> lat = <span class="hljs-title function_">degreesLong</span>(efgd.<span class="hljs-property">latitude</span>)  <span class="hljs-comment">//  å°†å¤§åœ°åæ ‡è½¬æ¢ä¸ºåº¦</span>
      <span class="hljs-keyword">let</span> height = efgd.<span class="hljs-property">height</span>  <span class="hljs-comment">//  é«˜åº¦</span>
      <span class="hljs-keyword">let</span> stkWorldPoint = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(lon, lat, height * <span class="hljs-number">1000</span>)  <span class="hljs-comment">// å°†å¤§åœ°åæ ‡è½¬æ¢ä¸º STK ä¸–ç•Œåæ ‡</span>
      <span class="hljs-keyword">const</span> cesiumTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">addSeconds</span>(start, i * sampleInterval, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">JulianDate</span>());
      positionProperty.<span class="hljs-title function_">addSample</span>(cesiumTime, stkWorldPoint);
    }
    <span class="hljs-keyword">return</span> positionProperty;
  }
</code></pre>
<p>è¿™ä¸ªå‡½æ•° <code>_getSatellitePositionProperty</code> æ˜¯ç”¨äºåœ¨ <code>Cesium</code> ä¸­ç”Ÿæˆ<code>å•ä¸ªå«æ˜Ÿçš„æ—¶é—´åºåˆ—ä½ç½®å±æ€§</code>ï¼ˆSampledPositionPropertyï¼‰ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡è½¨é“è®¡ç®—è·å–å«æ˜Ÿåœ¨ä¸€æ®µæ—¶é—´å†…çš„è¿ç»­ä½ç½®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Cesium å¯è¯†åˆ«çš„åæ ‡æ ¼å¼ï¼Œæœ€ç»ˆç”¨äºç»˜åˆ¶å«æ˜Ÿè½¨è¿¹æˆ–åŠ¨æ€å±•ç¤ºå«æ˜Ÿè¿åŠ¨ã€‚</p>
<p>æ•´ä½“é€»è¾‘æ˜¯ï¼šå‡½æ•°ä»æŒ‡å®šçš„èµ·å§‹æ—¶é—´ <code>start</code> å¼€å§‹ï¼ŒæŒ‰å›ºå®šæ—¶é—´é—´éš”é‡‡æ ·ï¼Œè®¡ç®—å«æ˜Ÿåœ¨æ¯ä¸ªé‡‡æ ·æ—¶åˆ»çš„ç©ºé—´ä½ç½®ï¼Œå°†è¿™äº› <code>â€œæ—¶é—´ - ä½ç½®â€ å¯¹</code>æ•´åˆä¸º SampledPositionProperty å¯¹è±¡ï¼ˆCesium ä¸­ç”¨äºæè¿°éšæ—¶é—´å˜åŒ–çš„ä½ç½®çš„ä¸“ç”¨å±æ€§ï¼‰ï¼Œä¾›<code>å«æ˜Ÿå®ä½“ç»‘å®šè½¨è¿¹æˆ–åŠ¨æ€æ›´æ–°ä½ç½®</code>ä½¿ç”¨ã€‚</p>
<p>å¯¹è¿™ä¸ªå‡½æ•°é‡ç‚¹è§£é‡Šä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> positionProperty = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">SampledPositionProperty</span>();  <span class="hljs-comment">// ä½ç½®å±æ€§</span>
</code></pre>
<p>è¿™è¡Œä»£ç æ˜¯ç”¨æ¥<code>åˆå§‹åŒ–ä½ç½®å±æ€§</code>ï¼Œåˆ›å»º <code>SampledPositionProperty</code> å®ä¾‹ï¼Œç”¨äºå­˜å‚¨ <code>â€œæ—¶é—´ç‚¹ - ä½ç½®â€</code> çš„æ˜ å°„å…³ç³»ï¼Œæ˜¯ Cesium ä¸­æè¿°åŠ¨æ€ä½ç½®çš„æ ¸å¿ƒå¯¹è±¡ï¼ˆæ”¯æŒæ’å€¼è®¡ç®—ï¼Œä½¿è½¨è¿¹å¹³æ»‘ï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> baseTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">toDate</span>(start).<span class="hljs-title function_">getTime</span>();  <span class="hljs-comment">// å¼€å§‹æ—¶é—´çš„æ—¶é—´æˆ³</span>
</code></pre>
<p>baseTime æ˜¯ç”¨æ¥åšåŸºå‡†æ—¶é—´çš„ã€‚å°±æ˜¯ä»¿çœŸå¼€å§‹æ—¶é—´ï¼Œè¿™é‡Œè½¬æ¢æˆäº†æ—¶é—´æˆ³ã€‚å°† Cesium çš„ JulianDate æ ¼å¼èµ·å§‹æ—¶é—´ï¼ˆstartï¼‰è½¬æ¢ä¸º JavaScript æ—¶é—´æˆ³ï¼ˆæ¯«ç§’çº§ï¼‰ï¼Œæ–¹ä¾¿åç»­è®¡ç®—é‡‡æ ·æ—¶é—´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sampleInterval = <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeInterval</span>; <span class="hljs-comment">// timeInterval ç§’é’Ÿä¸€ä¸ªé‡‡æ ·ç‚¹ï¼ˆç§’ï¼‰</span>
<span class="hljs-keyword">const</span> totalSamples = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">totalTime</span> / sampleInterval); <span class="hljs-comment">// è®¡ç®—é‡‡æ ·ç‚¹æ•°</span>
</code></pre>
<p>ä¸Šé¢è¿™ä¸¤è¡Œä¸»è¦ç”¨æ¥<code>è®¾ç½®é‡‡æ ·å‚æ•°</code>ã€‚ <code>sampleInterval</code>æ˜¯æ¯æ¬¡é‡‡æ ·çš„æ—¶é—´é—´éš”ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œæ§åˆ¶è½¨è¿¹çš„ç²¾åº¦ï¼ˆé—´éš”è¶Šå°ï¼Œè½¨è¿¹è¶Šç²¾ç»†ï¼Œä½†æ€§èƒ½æ¶ˆè€—è¶Šé«˜ï¼‰ï¼›<code>totalSamples</code>æ˜¯æ ¹æ®æ€»æ—¶é•¿ï¼ˆthis.totalTimeï¼‰å’Œé—´éš”è®¡ç®—éœ€è¦çš„é‡‡æ ·ç‚¹æ•°é‡ï¼Œç¡®ä¿è¦†ç›–æ•´ä¸ªæ—¶é—´æ®µã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalSamples; i++) { ... }
</code></pre>
<p><code>forå¾ªç¯</code>çš„è¯ï¼Œå°±æ˜¯ä¸ºäº†éå†æ¯ä¸ªé‡‡æ ·ç‚¹ï¼Œè®¡ç®—å¯¹åº”æ—¶é—´çš„å«æ˜Ÿä½ç½®ã€‚</p>
<p>ç„¶åæ˜¯<code>forå¾ªç¯</code>é‡Œé¢çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(baseTime + i * sampleInterval * <span class="hljs-number">1000</span>);  <span class="hljs-comment">// é‡‡æ ·æ—¶é—´</span>
<span class="hljs-keyword">const</span> sateCoord = <span class="hljs-title function_">propagate</span>(satelliteInfo.<span class="hljs-property">satrec</span>, currentTime).<span class="hljs-property">position</span>;  <span class="hljs-comment">// è®¡ç®—å½“å‰æ—¶é—´çš„ä½ç½®</span>
</code></pre>
<p>currentTime  è¿™ä¸ªæ˜¯å•¥å‘¢ï¼Œå°±æ˜¯è·å–<code>ç¬¬ i ä¸ªé‡‡æ ·ç‚¹çš„æ—¶é—´</code>ï¼Œå³ï¼š<code>åŸºå‡†æ—¶é—´ + ç¬¬ i ä¸ªå–æ ·ç‚¹ * å–æ ·é—´éš”æ—¶é—´(s) * 1000</code>ï¼Œä¹Ÿå°±æ˜¯åŸºäºèµ·å§‹æ—¶é—´æˆ³ï¼Œç´¯åŠ  <code>i * é‡‡æ ·é—´éš”</code>ï¼ˆæ¯«ç§’ï¼‰ï¼Œå¾—åˆ°å½“å‰é‡‡æ ·ç‚¹çš„ <code>UTC æ—¶é—´</code>ï¼ˆDate å¯¹è±¡ï¼‰ã€‚</p>
<p><code>sateCoord</code> æ˜¯è°ƒç”¨ <code>propagate</code> æ–¹æ³•ï¼Œæ ¹æ®å«æ˜Ÿçš„ <code>satrec</code> è½¨é“æ¨¡å‹å’Œå½“å‰æ—¶é—´ï¼Œè®¡ç®—å«æ˜Ÿåœ¨<code>æƒ¯æ€§åæ ‡ç³»ï¼ˆECIï¼‰ ä¸­çš„ä½ç½®</code>ï¼ˆx, y, zï¼Œå•ä½é€šå¸¸ä¸ºåƒç±³ï¼‰ã€‚</p>
<p>å¯ä»¥ç†è§£é€šè¿‡è¿™ä¸¤è¡Œä»£ç ï¼Œæœ€åè·å¾—äº†è¿™ä¸ª<code>åœ¨æŸä¸ªæ—¶é—´ç‚¹</code>ä¸‹ï¼Œè¯¥å«æ˜Ÿåœ¨<code>æƒ¯æ€§åæ ‡</code>ç³»ä¸‹çš„ä½ç½®ä¿¡æ¯ã€‚</p>
<p>ç»§ç»­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (!sateCoord?.<span class="hljs-property">x</span> || !sateCoord?.<span class="hljs-property">y</span> || !sateCoord?.<span class="hljs-property">z</span>) {  <span class="hljs-comment">// å¦‚æœè®¡ç®—å‡ºçš„ä½ç½®ä¸ºç©ºï¼Œåˆ™è·³è¿‡</span>
  <span class="hljs-keyword">continue</span>
}
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è¿‡æ»¤æ— æ•ˆä½ç½®ï¼Œè‹¥è½¨é“è®¡ç®—å¤±è´¥ï¼ˆè¿”å› NaN æˆ– undefinedï¼‰ï¼Œè·³è¿‡å½“å‰é‡‡æ ·ç‚¹ï¼Œé¿å…é”™è¯¯æ•°æ®å½±å“è½¨è¿¹ã€‚</p>
<p>å†å¾€ä¸‹å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> gsmt = <span class="hljs-title function_">gstime</span>(currentTime); <span class="hljs-comment">// è®¡ç®—å½“å‰æ—¶é—´çš„æ ¼æ—å°¼æ²»æ’æ˜Ÿæ—¶ï¼ˆGSTï¼‰</span>
<span class="hljs-keyword">let</span> efgd = <span class="hljs-title function_">eciToGeodetic</span>(sateCoord, gsmt); <span class="hljs-comment">// ECI è½¬å¤§åœ°åæ ‡</span>
</code></pre>
<p><code>gstime(currentTime)</code>æ˜¯ç”¨æ¥è®¡ç®—å½“å‰æ—¶é—´çš„æ ¼æ—å°¼æ²»æ’æ˜Ÿæ—¶ï¼ˆç”¨äº ECI åˆ°åœ°å›ºåæ ‡çš„è½¬æ¢ï¼Œæ¶ˆé™¤åœ°çƒè‡ªè½¬å½±å“ï¼‰ã€‚
<code>eciToGeodetic</code>æ˜¯å°†æƒ¯æ€§ç³»ï¼ˆECIï¼‰åæ ‡è½¬æ¢ä¸ºå¤§åœ°åæ ‡ï¼ˆç»åº¦ã€çº¬åº¦ã€é«˜åº¦ï¼ŒåŸºäº WGS84 æ¤­çƒï¼‰ï¼Œå³<code>å«æ˜Ÿåœ¨åœ°é¢è§‚æµ‹è€…çœ¼ä¸­çš„ä½ç½®</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> lon = <span class="hljs-title function_">degreesLong</span>(efgd.<span class="hljs-property">longitude</span>); <span class="hljs-comment">// ç»åº¦ï¼ˆå¼§åº¦â†’åº¦ï¼‰</span>
<span class="hljs-keyword">let</span> lat = <span class="hljs-title function_">degreesLong</span>(efgd.<span class="hljs-property">latitude</span>);  <span class="hljs-comment">// çº¬åº¦ï¼ˆå¼§åº¦â†’åº¦ï¼‰</span>
<span class="hljs-keyword">let</span> height = efgd.<span class="hljs-property">height</span>;              <span class="hljs-comment">// é«˜åº¦ï¼ˆåƒç±³ï¼‰</span>
</code></pre>
<p>ä¸Šé¢æ˜¯å°†<code>å¤§åœ°åæ ‡å•ä½è½¬æ¢</code>ï¼Œå°†<code>ç»çº¬åº¦ä»å¼§åº¦è½¬æ¢ä¸ºåº¦</code>ï¼ˆCesium å¸¸ç”¨å•ä½ï¼‰ï¼Œä¿ç•™é«˜åº¦å€¼ï¼ˆåç»­éœ€è½¬æ¢ä¸ºç±³ï¼‰ã€‚</p>
<p>å†å¾€ä¸‹æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> stkWorldPoint = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(lon, lat, height * <span class="hljs-number">1000</span>);
</code></pre>
<p>è®²ä½ç½®ä¿¡æ¯è½¬æ¢ä¸º Cesium ä¸–ç•Œåæ ‡ã€‚<code>Cesium.Cartesian3.fromDegrees</code>ä½œç”¨æ˜¯å°†ç»çº¬åº¦ï¼ˆåº¦ï¼‰å’Œé«˜åº¦ï¼ˆç±³ï¼Œå› æ­¤ Ã—1000 è½¬æ¢åƒç±³â†’ç±³ï¼‰è½¬æ¢ä¸º Cesium çš„<code>åœ°å›ºåæ ‡ç³»</code>ï¼ˆECEFï¼‰ åæ ‡ï¼ˆCartesian3 å¯¹è±¡ï¼‰ï¼Œå³ä¸‰ç»´ä¸–ç•Œä¸­çš„ä½ç½®ã€‚</p>
<p>æœ€åäº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> cesiumTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">addSeconds</span>(start, i * sampleInterval, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">JulianDate</span>());
positionProperty.<span class="hljs-title function_">addSample</span>(cesiumTime, stkWorldPoint);
</code></pre>
<p>ç»‘å®šæ—¶é—´ä¸ä½ç½®ï¼Œè®¡ç®—å½“å‰<code>é‡‡æ ·ç‚¹å¯¹åº”çš„ Cesium æ—¶é—´</code>ï¼ˆJulianDate æ ¼å¼ï¼‰ï¼Œå°† <code>â€œæ—¶é—´ - ä½ç½®â€ å¯¹</code>æ·»åŠ åˆ° <code>positionProperty</code> ä¸­ï¼Œå®Œæˆä¸€ä¸ªé‡‡æ ·ç‚¹çš„è®°å½•ã€‚</p>
<p>æœ€ç»ˆè¿”å›åŒ…å«æ‰€æœ‰é‡‡æ ·ç‚¹çš„ <code>SampledPositionProperty</code> å¯¹è±¡ï¼Œ<code>å¯ç›´æ¥ç»‘å®šåˆ° Cesium çš„å«æ˜Ÿå®ä½“ï¼ˆEntityï¼‰ä¸Šï¼Œç”¨äºåŠ¨æ€å±•ç¤ºå«æ˜Ÿè½¨è¿¹å’Œä½ç½®</code>ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªå‡½æ•°æ˜¯å«æ˜Ÿè½¨è¿¹å¯è§†åŒ–çš„æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡ <code>â€œæ—¶é—´é‡‡æ ·â†’è½¨é“è®¡ç®—â†’åæ ‡è½¬æ¢â†’ç»‘å®šå±æ€§â€</code> çš„æµç¨‹ï¼Œå°†å«æ˜Ÿçš„è½¨é“å‚æ•°ï¼ˆTLEï¼‰è½¬æ¢ä¸º Cesium å¯æ¸²æŸ“çš„åŠ¨æ€ä½ç½®æ•°æ®ã€‚</p>
<p>ç„¶åå°±å¯ä»¥çœ‹ä¸€ä¸‹é¡µé¢æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6a801aa43ee44ffbbfa69a8280861c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=ZARLXaZRG%2Bgjg014nwjAvzI0IgE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d8676ea90f4496a4fede4a90a6e147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=Cjgi1JyXoX%2BVSqu5WqJOI5aTDkc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å«æ˜Ÿè½¨è¿¹çº¿å·²ç»åŠ è½½å‡ºæ¥äº†ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶åŠ è½½ä¸€ä¸‹è¿™ä¸ªæ˜Ÿå†ï¼Œçœ‹ä¸€ä¸‹æ•ˆæœæ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a63d17469e14dc181a969f2ad2b0a39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=TGfb%2FkJO3yR%2BQTjS27UexbHyAlw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»˜åˆ¶çš„è½¨è¿¹çº¿å’Œç¬¬ä¸‰æ–¹è½¯ä»¶ç»˜åˆ¶çš„æ˜¯ä¸€æ ·çš„ã€‚è¿™å°±å®Œæˆäº†ï¼</p>
<h5 data-id="heading-13">æ³¨æ„</h5>
<p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f084c50505c4fc0bc8a1a931a042e78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=C%2FjHodv3nRTXIaXradIt%2BA8F2q4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å°±æ˜¯æˆ‘ä»¬çœ‹<code>3D</code>çš„æ•ˆæœï¼Œå«æ˜Ÿè½¨è¿¹çº¿ä¸ºä»€ä¹ˆè½¬å®Œä¸€åœˆä¹‹åé¦–å°¾<code>æ²¡æœ‰é—­åˆ</code>å•Šï¼Ÿæ„Ÿè§‰åƒæ˜¯è½¨è¿¹çº¿è·‘åäº†ä¸€æ ·ï¼Œä»–ç†è®ºä¸Šå›´ç€åœ°çƒç»•åœˆï¼Œä¸åº”è¯¥æ˜¯ä¸ªæ­£åœ†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜æ˜¯â€œä¸å¸¦â€çŠ¶ç¼ èµ·æ¥äº†ï¼Ÿæˆ‘çœ‹åˆ«äººåšçš„æ˜¯æ­£åœ†ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼</p>
<p>å› ä¸ºæˆ‘ä»¬åœ¨<code>_getSatellitePositionProperty</code>å‡½æ•°ä¸­ï¼Œè®¡ç®—å«æ˜Ÿé‡‡æ ·ä½ç½®çš„æ—¶å€™ï¼Œæœ€åè½¬æ¢æˆäº†<code>åœ°å›ºåæ ‡ç³»ï¼ˆECEFï¼‰</code>ã€‚è€Œä¹‹å‰é‚£äº›æ­£åœ†ï¼Œå¯ä»¥å®ç°é¦–å°¾ç›¸è¿çš„ä½¿ç”¨çš„æ˜¯<code>æƒ¯æ€§åæ ‡ç³»ï¼ˆECIï¼‰</code></p>
<p>çœ‹ä¹‹å‰æˆ‘ä»¬å†™çš„ä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ‹¿åˆ°<code>æƒ¯æ€§åæ ‡</code>åè½¬æˆäº†<code>åœ°å›ºåæ ‡</code>ã€‚</p>
<h5 data-id="heading-14">é‚£ä¹ˆ æƒ¯æ€§åæ ‡ å’Œ åœ°å›ºåæ ‡ çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h5>
<p><code>æƒ¯æ€§åæ ‡ï¼ˆECIï¼‰</code>å’Œ<code>åœ°å›ºåæ ‡</code>éƒ½æ˜¯ç”¨æ¥æè¿°å«æ˜Ÿã€èˆªå¤©å™¨ç­‰ç©ºé—´ç‰©ä½“ä½ç½®çš„ä¸¤ç§æ ¸å¿ƒåæ ‡ç³»ï¼Œæ ¸å¿ƒ<code>åŒºåˆ«åœ¨äºæ˜¯å¦éšåœ°çƒè‡ªè½¬</code>ï¼Œé€‚ç”¨åœºæ™¯ä¹Ÿå› æ­¤ä¸åŒã€‚</p>
<p><strong>æƒ¯æ€§åæ ‡</strong>ï¼šåœ°é¢ä¸Šçš„å›ºå®šç‚¹ï¼ˆå¦‚åŒ—äº¬ï¼‰çš„åæ ‡ä¼šéšåœ°çƒè‡ªè½¬è€ŒæŒç»­å˜åŒ–ï¼ˆæ¯å¤©ç»• Z è½´æ—‹è½¬ä¸€åœˆï¼‰ï¼›å«æ˜Ÿçš„åæ ‡å˜åŒ–ä»…ç”±å…¶è‡ªèº«è½¨é“è¿åŠ¨å¯¼è‡´ï¼ˆå¦‚è¿‘åœ°å«æ˜Ÿæ²¿æ¤­åœ†è½¨é“è¿åŠ¨ï¼‰ã€‚</p>
<p><strong>åœ°å›ºåæ ‡</strong>ï¼šåœ°é¢ä¸Šçš„å›ºå®šç‚¹ï¼ˆå¦‚åŒ—äº¬ï¼‰çš„åæ ‡å§‹ç»ˆä¸å˜ï¼›å«æ˜Ÿçš„åæ ‡å˜åŒ–æ˜¯å…¶è½¨é“è¿åŠ¨ä¸åœ°çƒè‡ªè½¬çš„ â€œ<code>å åŠ æ•ˆæœ</code>â€ï¼ˆå¦‚å«æ˜Ÿä»è¥¿å‘ä¸œè¿åŠ¨ï¼ŒåŒæ—¶åœ°çƒä¹Ÿåœ¨è‡ªè½¬ï¼‰ã€‚</p>
<p><strong>ECI æ˜¯ â€œå®‡å®™è§†è§’â€ï¼šä¸éšåœ°çƒè½¬ï¼Œé€‚åˆåˆ†æå«æ˜Ÿçš„ç»å¯¹è½¨é“è¿åŠ¨ï¼›
ECEF æ˜¯ â€œåœ°çƒè§†è§’â€ï¼šéšåœ°çƒè½¬ï¼Œé€‚åˆæè¿°ç‰©ä½“ç›¸å¯¹äºåœ°é¢çš„ä½ç½®ã€‚</strong></p>
<p>é‚£è¿™æ ·çš„è¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨<code>æƒ¯æ€§åæ ‡</code>ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨<code>åœ°å›ºåæ ‡</code>å‘¢ï¼Ÿ</p>
<p><code>æƒ¯æ€§åæ ‡é€‚ç”¨äº</code>ï¼šå«æ˜Ÿ<code>è½¨é“åŠ›å­¦åˆ†æ</code>ã€<code>è½¨é“è®¾è®¡</code>ã€<code>èˆªå¤©å™¨å¯¼èˆª</code>ï¼ˆéœ€è®¡ç®—<code>ç»å¯¹è¿åŠ¨</code>ï¼‰ã€‚å«æ˜Ÿè½¨é“é¢„æµ‹ï¼ˆå¦‚ç”¨ TLE è®¡ç®— ECI åæ ‡ï¼‰ã€æ˜Ÿé™…èˆªè¡Œè½¨é“è§„åˆ’ã€å¤©ä½“åŠ›å­¦ä»¿çœŸã€‚</p>
<p><code>å›ºåœ°åæ ‡é€‚ç”¨äº</code>ï¼š<code>åœ°é¢è§‚æµ‹</code>ã€<code>é€šä¿¡é“¾è·¯åˆ†æ</code>ã€åœ°å›¾åŒ¹é…ï¼ˆéœ€æè¿°<code>ç›¸å¯¹åœ°çƒè¡¨é¢çš„ä½ç½®</code>ï¼‰ã€‚å«æ˜Ÿåœ°é¢è¦†ç›–èŒƒå›´è®¡ç®—ã€åœ°é¢ç«™ä¸å«æ˜Ÿçš„æ–¹ä½è§’ / ä»°è§’è®¡ç®—ã€GPS ç­‰å¯¼èˆªç³»ç»Ÿå®šä½ã€‚</p>
<h5 data-id="heading-15">è·å–æƒ¯æ€§åæ ‡ä½ç½®å±•ç¤º</h5>
<p>é‚£ä¸Šé¢å†™äº†<code>å›ºåœ°åæ ‡</code>å±•ç¤ºçš„æ–¹å¼ï¼Œä¸‹é¢å†™ä¸€ä¸‹<code>æƒ¯æ€§åæ ‡</code>å±•ç¤ºçš„æ–¹æ³•ï¼Œå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹<code>_getSatellitePositionProperty</code>å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// ä¸ºå•ä¸ªå«æ˜Ÿè®¡ç®—ä½ç½®å±æ€§</span>
  <span class="hljs-title function_">_getSatellitePositionProperty</span>(<span class="hljs-params">start, satelliteInfo</span>) {
    <span class="hljs-keyword">const</span> positionProperty = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">SampledPositionProperty</span>();  <span class="hljs-comment">// ä½ç½®å±æ€§</span>
    <span class="hljs-keyword">const</span> baseTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">toDate</span>(start).<span class="hljs-title function_">getTime</span>();  <span class="hljs-comment">// å¼€å§‹æ—¶é—´çš„æ—¶é—´æˆ³</span>
    <span class="hljs-comment">// è¿™æ ·å¯ä»¥åœ¨ä¿æŒè½¨è¿¹è¿ç»­æ€§çš„åŒæ—¶å¤§å¹…æé«˜æ€§èƒ½</span>
    <span class="hljs-keyword">const</span> sampleInterval = <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeInterval</span>;  <span class="hljs-comment">// é‡‡æ ·æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰</span>
    <span class="hljs-keyword">const</span> totalSamples = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">totalTime</span> / sampleInterval); <span class="hljs-comment">// è®¡ç®—é‡‡æ ·ç‚¹æ•°</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalSamples; i++) {  <span class="hljs-comment">// éå†æ¯ä¸ªé‡‡æ ·ç‚¹</span>
      <span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(baseTime + i * sampleInterval * <span class="hljs-number">1000</span>);  <span class="hljs-comment">// é‡‡æ ·æ—¶é—´</span>
      <span class="hljs-keyword">const</span> sateCoord = <span class="hljs-title function_">propagate</span>(satelliteInfo.<span class="hljs-property">satrec</span>, currentTime).<span class="hljs-property">position</span>;  <span class="hljs-comment">// è®¡ç®—å½“å‰æ—¶é—´çš„ä½ç½®</span>
      <span class="hljs-keyword">if</span> (!sateCoord?.<span class="hljs-property">x</span> || !sateCoord?.<span class="hljs-property">y</span> || !sateCoord?.<span class="hljs-property">z</span>) {  <span class="hljs-comment">// å¦‚æœè®¡ç®—å‡ºçš„ä½ç½®ä¸ºç©ºï¼Œåˆ™è·³è¿‡</span>
        <span class="hljs-keyword">continue</span>
      }
      <span class="hljs-keyword">const</span> cesiumTime = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">JulianDate</span>.<span class="hljs-title function_">addSeconds</span>(start, i * sampleInterval, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">JulianDate</span>());
      <span class="hljs-keyword">const</span> cesiumPosition = {
        <span class="hljs-attr">x</span>: sateCoord.<span class="hljs-property">x</span> * <span class="hljs-number">1000</span>,
        <span class="hljs-attr">y</span>: sateCoord.<span class="hljs-property">y</span> * <span class="hljs-number">1000</span>,
        <span class="hljs-attr">z</span>: sateCoord.<span class="hljs-property">z</span> * <span class="hljs-number">1000</span>
      }
      positionProperty.<span class="hljs-title function_">addSample</span>(cesiumTime, cesiumPosition);
    }
    <span class="hljs-keyword">return</span> positionProperty;
  }
</code></pre>
<p>è¿™å°±å¯ä»¥äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/610f5ce6290d4992a15e2841517d461f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=Kl0vye78GKPTB7qIY6w56kOgR14%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63343ab9d7346ed8acfa49226b8f06a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-r5oiRQWRkVg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763635674&amp;x-signature=sTKVWh7QU8ztqSYt8CzgMSGA4p8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™å°±æ˜¯é¦–å°¾ç›¸è¿çš„æ­£åœ†äº†ã€‚</p>
<h3 data-id="heading-16">å†è¯´ä¸€ç‚¹å“ˆ</h3>
<p>å¾ˆå¤šäººå¯èƒ½è§‰å¾—è¿™ä¸ªæ–¹å¼ç»˜åˆ¶æ˜Ÿå†å¤ªéº»çƒ¦äº†ï¼Œæ€§èƒ½è¿˜ä¸å¥½ï¼Œç„¶åä½¿ç”¨czmlä¸æ˜¯æ›´å¥½å—ï¼Ÿæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¼šé‡åˆ°å„ç§ç¦»è°±çš„äº‹æƒ…ï¼Œè®©äººä¸å¾—ä¸æ”¾å¼ƒä¸€äº›ä¸œè¥¿ï¼Œæ¯•ç«Ÿé€‰æ‹©çš„å®ç°æ–¹å¼è¿˜æ˜¯ä»¥å®é™…å¼€å‘åå‡ºç»“æœä¸ºå‡†ï¼ŒåŠ æ²¹å§å„ä½ï¼å¸Œæœ›å¯¹å¤§å®¶æœ‰ç”¨ï¼</p>
<p>å¥½äº†ä»Šå¤©å°±å…ˆåˆ°è¿™å„¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¾¹é™…æˆæœ¬è¶‹è¿‘äºé›¶ï¼šå¦‚ä½•è®©AIæ™ºèƒ½ä½“"è¯´å¾—æ¸…ã€è®²å¾—æ˜"]]></title>    <link>https://juejin.cn/post/7571815573933572159</link>    <guid>https://juejin.cn/post/7571815573933572159</guid>    <pubDate>2025-11-13T11:01:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815573933572159" data-draft-id="7571972751528640548" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¾¹é™…æˆæœ¬è¶‹è¿‘äºé›¶ï¼šå¦‚ä½•è®©AIæ™ºèƒ½ä½“&quot;è¯´å¾—æ¸…ã€è®²å¾—æ˜&quot;"/> <meta itemprop="keywords" content="æ¶æ„,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T11:01:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MobotStone"/> <meta itemprop="url" content="https://juejin.cn/user/3839909554568840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¾¹é™…æˆæœ¬è¶‹è¿‘äºé›¶ï¼šå¦‚ä½•è®©AIæ™ºèƒ½ä½“"è¯´å¾—æ¸…ã€è®²å¾—æ˜"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3839909554568840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MobotStone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T11:01:52.000Z" title="Thu Nov 13 2025 11:01:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>äººå·¥æ™ºèƒ½çš„ä¸–ç•Œæ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å‘å‰ç–¾é©°ã€‚å…¶ä¸­æœ€ä»¤äººç©ç›®çš„è¿›å±•ä¹‹ä¸€ï¼Œæ˜¯ã€Œç”Ÿæˆå¼ AI æ™ºèƒ½ä½“ã€ï¼ˆGenerative AI agentsï¼‰çš„å‡ºç°ã€‚</p>
<p>è¿™äº›æ–°ä¸€ä»£çš„æ™ºèƒ½ä½“ï¼Œä¸å†ä»…ä»…æ˜¯ç”Ÿæˆæ–‡æœ¬ã€å›¾åƒæˆ–ä»£ç çš„å·¥å…·ï¼Œè€Œæ˜¯èƒ½è‡ªä¸»å†³ç­–ã€ç‹¬ç«‹è¡ŒåŠ¨çš„ç³»ç»Ÿã€‚å®ƒä»¬æ­£åœ¨æ‰©å±• AI çš„è¾¹ç•Œï¼Œé‡æ–°å®šä¹‰æœºå™¨èƒ½åšçš„äº‹æƒ…ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ èµ°è¿›ç”Ÿæˆå¼æ™ºèƒ½ä½“çš„ä¸–ç•Œï¼Œè®¨è®ºå®ƒä»¬çš„æ ¸å¿ƒç†å¿µã€å®é™…åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬æ‰€å¸¦æ¥çš„ç‹¬ç‰¹ä»·å€¼ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•å¿½è§†å®ƒä»¬é¢ä¸´çš„ç§ç§æŒ‘æˆ˜ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ‰“å¥½åŸºç¡€ã€‚åªæœ‰ç†è§£è¿™äº›å…ˆè¿›ç³»ç»ŸèƒŒåçš„åŸºæœ¬åŸç†ï¼Œæ‰èƒ½çœŸæ­£çœ‹æ‡‚å®ƒä»¬å¦‚ä½•æ”¹å˜äº§ä¸šæ ¼å±€ï¼Œå¹¶å¼€è¾Ÿå‡ºæ–°çš„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-0"><strong>ç”Ÿæˆå¼äººå·¥æ™ºèƒ½çš„åŸºæœ¬åŸç†</strong></h2>
<h3 data-id="heading-1"><strong>ç”Ÿæˆæ¨¡å‹</strong></h3>
<p>ç”Ÿæˆæ¨¡å‹æ˜¯äººå·¥æ™ºèƒ½â€œåˆ›é€ â€èƒ½åŠ›çš„æ ¸å¿ƒã€‚å¸¸è§çš„ç”Ÿæˆæ¨¡å‹åŒ…æ‹¬å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰ã€å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰ï¼Œä»¥åŠè‡ªå›å½’æ¨¡å‹ï¼ˆå¦‚ PixelRNNï¼‰ã€‚</p>
<p>è¦æƒ³çœŸæ­£ç†è§£ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ï¼Œå°±å¿…é¡»å…ˆç†è§£è¿™äº›æ¨¡å‹ã€‚å®ƒä»¬å†³å®šäº†ä¸€å°æœºå™¨èƒ½å¦åƒäººä¸€æ ·å»â€œæƒ³è±¡â€äº‹ç‰©ã€ç”Ÿæˆå†…å®¹ã€‚åªæœ‰æŒæ¡äº†è¿™å¥—æœºåˆ¶ï¼Œæˆ‘ä»¬æ‰èƒ½æ„å»ºå‡ºçœŸæ­£æœ‰ç”¨çš„ç”Ÿæˆå¼æ™ºèƒ½ä½“ï¼ˆGenerative AI Agentï¼‰ï¼Œè®©å®ƒä»¬åœ¨ä¸åŒä»»åŠ¡ä¸­è¡¨ç°å‡ºåˆ›é€ æ€§ã€‚</p>
<h3 data-id="heading-2"><strong>GPT çš„å‡ºç°</strong></h3>
<p>åœ¨ç†è§£äº†ç”Ÿæˆæ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥çœ‹çœ‹æœ€å…·å½±å“åŠ›çš„ä¸€ç±»æ¨¡å‹â€”â€”<strong>é¢„è®­ç»ƒç”Ÿæˆå¼å˜æ¢æ¨¡å‹</strong>ï¼ˆGenerative Pre-trained Transformerï¼‰ï¼Œç®€ç§°<strong>GPT</strong>ã€‚</p>
<p>GPT ç”± OpenAI æå‡ºï¼Œå®ƒæ˜¯ä¸€ç§èƒ½å¤Ÿæ ¹æ®æç¤ºè‡ªåŠ¨ç”Ÿæˆè‡ªç„¶è¯­è¨€æ–‡æœ¬çš„æ¨¡å‹ã€‚ç®€å•è¯´ï¼Œä½ ç»™å®ƒä¸€å¥è¯ï¼Œå®ƒå°±èƒ½ç»­å†™ä¸€æ®µåƒäººå†™çš„å†…å®¹ã€‚</p>
<p>è¿™ç§æ¨¡å‹å¦‚ä»Šè¢«å¹¿æ³›åº”ç”¨åœ¨å†…å®¹åˆ›ä½œã€å®¢æˆ·æœåŠ¡ç­‰åœºæ™¯ä¸­ã€‚æ›´æœ‰è¶£çš„æ˜¯ï¼ŒGPT è¿˜èƒ½â€œå®šåˆ¶â€â€”â€”ä½ å¯ä»¥ä¸ºå®ƒè®¾å®šå…·ä½“è¡ŒåŠ¨ã€è¿æ¥ APIï¼Œè®©å®ƒå»å¤„ç†ç”µå­é‚®ä»¶ã€ç®¡ç†ç”µå•†äº‹åŠ¡ç­‰ã€‚</p>
<p>ä»æ›´é«˜çš„å±‚é¢çœ‹ï¼ŒGPT ä¸ä»…æ˜¯ä¸€ä¸ªè¯­è¨€æ¨¡å‹ï¼Œæ›´æ˜¯é€šå¾€ä¸‹ä¸€ä»£æ™ºèƒ½ç³»ç»Ÿçš„åœ°åŸºã€‚åŸºäºå®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºæ›´å¤æ‚çš„â€œç”Ÿæˆå¼æ™ºèƒ½ä½“â€ï¼šå®ƒä»¬ä¸ä»…èƒ½å†™å­—ï¼Œè¿˜èƒ½åšäº‹â€”â€”è‡ªä¸»åœ°å®Œæˆä»»åŠ¡ã€æ‰§è¡Œé€»è¾‘ï¼Œæˆä¸ºå¹¿ä¹‰ä¸Šçš„â€œåŠ©æ‰‹å‹æ™ºèƒ½â€ã€‚</p>
<h2 data-id="heading-3">ç”Ÿæˆå¼äººå·¥æ™ºèƒ½çš„æ¼”è¿›</h2>
<p>ç”Ÿæˆå¼äººå·¥æ™ºèƒ½è¿™å‡ å¹´çš„å˜åŒ–ï¼Œå¯ä»¥è¯´æ˜¯ä¸€éƒ¨æŠ€æœ¯å¿«é€Ÿè¿­ä»£çš„ç¼©å½±ã€‚å®ƒä»æœ€åˆçš„æ–‡æœ¬ç”Ÿæˆï¼Œå‘å±•åˆ°å¦‚ä»Šèƒ½å¤Ÿè‡ªä¸»æ‰§è¡Œä»»åŠ¡çš„æ™ºèƒ½ä½“ï¼ŒèƒŒåæ˜¯æŒç»­çš„ç ”ç©¶æ¨åŠ¨å’ŒæŠ€æœ¯åˆ›æ–°ã€‚</p>
<p>æ—©æœŸçš„æ¨¡å‹ï¼Œæ¯”å¦‚ GPT-2ï¼Œåªæ˜¯è®©æˆ‘ä»¬ç¬¬ä¸€æ¬¡çœ‹åˆ°æœºå™¨å¯ä»¥â€œå†™â€å‡ºè‡ªç„¶è¯­è¨€çš„å¯èƒ½æ€§ã€‚</p>
<p>åˆ°äº† GPT-3ï¼Œè¿™ç§èƒ½åŠ›è¢«å¤§å¹…æå‡ã€‚æ¨¡å‹è§„æ¨¡æ›´å¤§ï¼Œç†è§£è¯­å¢ƒçš„èƒ½åŠ›æ›´å¼ºï¼Œç”Ÿæˆçš„è¯­è¨€ä¹Ÿæ›´è¿è´¯ï¼Œå‡ ä¹å¯ä»¥åœ¨å¤šæ•°åœºæ™¯ä¸­æ¨¡æ‹Ÿäººçš„è¡¨è¾¾ã€‚</p>
<p>ä»Šå¤©ï¼Œç”Ÿæˆå¼ AI çš„æœ€æ–°é˜¶æ®µï¼Œæ˜¯**è‡ªä¸»æ™ºèƒ½ä½“ï¼ˆAutonomous Agentsï¼‰**çš„å‡ºç°ã€‚å®ƒä»¬ä¸å†åªè¾“å‡ºå†…å®¹ï¼Œè€Œæ˜¯èƒ½åœ¨ä¸€å®šèŒƒå›´å†…è‡ªä¸»è¡ŒåŠ¨â€”â€”è§„åˆ’ã€å†³ç­–ã€æ‰§è¡Œï¼Œç”šè‡³ä¸å…¶ä»–ç³»ç»Ÿåä½œã€‚</p>
<p>è¿™æ„å‘³ç€ï¼ŒAI ä¸ä»…èƒ½â€œè¯´â€ï¼Œè¿˜å¼€å§‹â€œåšâ€ã€‚å®ƒæ­£åœ¨æ¸—é€åˆ°å„ä¸ªè¡Œä¸šï¼Œå¸®åŠ©ä¼ä¸šè‡ªåŠ¨åŒ–å¤æ‚æµç¨‹ï¼Œæé«˜æ•ˆç‡ï¼Œé‡å¡‘ç”Ÿäº§æ–¹å¼ã€‚</p>
<p>å¦‚æœè¯´æ—©æœŸçš„ç”Ÿæˆæ¨¡å‹åªæ˜¯â€œè¯­è¨€å·¥å…·â€ï¼Œé‚£ä¹ˆç°åœ¨çš„æ™ºèƒ½ä½“ï¼Œæ›´åƒæ˜¯æœ‰ä¸€å®šç›®æ ‡æ„è¯†çš„â€œæ•°å­—åŠ³åŠ¨åŠ›â€ã€‚æœªæ¥ï¼Œå®ƒä»¬å¯èƒ½ä¼šæˆä¸ºæ•°å­—ä¸–ç•Œçš„åŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-4"><strong>ä»€ä¹ˆæ˜¯ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“ï¼Ÿ</strong></h2>
<p>æˆ‘ä»¬å…ˆæ¥ç†è§£ä¸€ä¸‹ã€Œç”Ÿæˆå¼ AI æ™ºèƒ½ä½“ã€è¿™ä¸ªæ¦‚å¿µã€‚</p>
<p>å®ƒæ˜¯ä¸€ç±»æ¯”ä¼ ç»Ÿ AI æ¨¡å‹æ›´é«˜çº§çš„ç³»ç»Ÿï¼ŒæŠŠåƒ GPT è¿™æ ·çš„ç”Ÿæˆå¼æ¨¡å‹èƒ½åŠ›ï¼Œä¸è‡ªä¸»å†³ç­–å’Œæ‰§è¡ŒåŠŸèƒ½ç»“åˆåœ¨ä¸€èµ·ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒä¸ä»…èƒ½â€œç”Ÿæˆå†…å®¹â€ï¼Œè¿˜å¯ä»¥â€œè‡ªä¸»è¡ŒåŠ¨â€ã€‚</p>
<p>ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“èƒ½åšçš„äº‹æƒ…ç›¸å½“å¹¿æ³›ï¼Œæ¯”å¦‚åˆ†ææ•°æ®ã€åˆ¶å®šå†³ç­–ã€æ‰§è¡Œç‰¹å®šä»»åŠ¡ç­‰ã€‚ä¸ä»¥å¾€åªèƒ½è¾“å‡ºæ–‡æœ¬æˆ–å›¾åƒçš„ç”Ÿæˆæ¨¡å‹ä¸åŒï¼Œå®ƒå…·å¤‡å®Œæ•´çš„ä»»åŠ¡è§„åˆ’ä¸æ‰§è¡Œèƒ½åŠ›ï¼šèƒ½è‡ªå·±è®¾å®šç›®æ ‡ã€ç›‘æ§è¾“å‡ºç»“æœï¼Œå¹¶æ ¹æ®æ–°çš„ä¿¡æ¯è°ƒæ•´è¡ŒåŠ¨ã€‚è¿™ç§ç‹¬ç«‹è¿è¡Œçš„èƒ½åŠ›ï¼Œè®©å®ƒåœ¨å¾ˆå¤šé¢†åŸŸéƒ½éå¸¸æœ‰ä»·å€¼ã€‚</p>
<p>æ›´å…·ä½“ä¸€ç‚¹ï¼Œç”Ÿæˆå¼ AI æ™ºèƒ½ä½“çš„ç‰¹ç‚¹åœ¨äºï¼š</p>
<p>å®ƒä¸åªæ˜¯ç”Ÿæˆè¾“å‡ºï¼Œè€Œæ˜¯èƒ½åŸºäºè¾“å‡ºè¿›ä¸€æ­¥è¡ŒåŠ¨ã€‚å®ƒå¯ä»¥è‡ªåŠ¨åˆ†ææ•°æ®ï¼Œåšå‡ºåˆ¤æ–­ï¼Œå¹¶æ ¹æ®åˆ†æç»“æœé‡‡å–ä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<p>è¿™ç§ä»ã€Œç”Ÿæˆã€åˆ°ã€Œæ‰§è¡Œã€çš„ä¸€ä½“åŒ–è®¾è®¡ï¼Œä½¿å®ƒèƒ½å¤Ÿå®Œæˆå¤æ‚çš„å·¥ä½œæµç¨‹â€”â€”ä»æœ€åˆçš„æ•°æ®å¤„ç†ï¼Œåˆ°æœ€åçš„ä»»åŠ¡è½åœ°ï¼Œéƒ½èƒ½ç‹¬ç«‹å®Œæˆã€‚</p>
<p>å½“ç”Ÿæˆèƒ½åŠ›ä¸è‡ªä¸»è¡ŒåŠ¨ç»“åˆï¼Œç”Ÿæˆå¼ AI æ™ºèƒ½ä½“å°±ä¸ä»…ä»…æ˜¯ä¸€ç§æŠ€æœ¯å·¥å…·ï¼Œè€Œæ˜¯ä¸€ç±»å…·æœ‰æ½œåœ¨â€œæ™ºèƒ½åä½œè€…â€ç‰¹å¾çš„ç³»ç»Ÿã€‚å®ƒæœ‰æœ›æ”¹å˜å¤šä¸ªè¡Œä¸šçš„å·¥ä½œæ–¹å¼â€”â€”æ— è®ºæ˜¯åŒ»ç–—ã€é‡‘èï¼Œè¿˜æ˜¯å®¢æˆ·æœåŠ¡ï¼Œéƒ½èƒ½å› æ­¤å˜å¾—æ›´é«˜æ•ˆã€æ›´ç²¾å‡†ï¼Œä¹Ÿæ›´å…·åˆ›é€ åŠ›ã€‚</p>
<p>ç†è§£è¿™æ ·çš„æ™ºèƒ½ä½“ï¼Œæ„å‘³ç€ç†è§£ä¸‹ä¸€ä»£äººå·¥æ™ºèƒ½çš„æ–¹å‘â€”â€”å¦‚ä½•è®©æœºå™¨ä¸ä»…èƒ½â€œæ€è€ƒâ€ï¼Œè¿˜èƒ½â€œè¡ŒåŠ¨â€ï¼›ä¸ä»…èƒ½â€œè¾“å‡ºâ€ï¼Œè¿˜èƒ½â€œå®Œæˆâ€ã€‚è¿™æ­£æ˜¯æœªæ¥ AI åº”ç”¨çš„å…³é”®æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-5">æç¤ºç”Ÿæˆä¸æ‰§è¡Œæ¡†æ¶</h3>
<p>åœ¨æ‰“é€ é«˜æ•ˆ AI Agent çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½å¦å¦¥å–„ç”Ÿæˆå¹¶æ‰§è¡Œ Prompt è‡³å…³é‡è¦ã€‚æ‰€è°“æç¤ºç”Ÿæˆä¸æ‰§è¡Œæ¡†æ¶ï¼ˆPrompt Generation and Execution Frameworkï¼‰ï¼Œå°±æ˜¯ä¸ºæ­¤æä¾›ä¸€æ¡å®Œæ•´çš„å·¥ä½œæµç¨‹ï¼šå¦‚ä½•æ„å»º Promptã€å¦‚ä½•å¤„ç†å¼‚å¸¸ã€ä»¥åŠå¦‚ä½•é€šè¿‡åé¦ˆå›è·¯å®ç°æŒç»­æ”¹è¿›ã€‚å®ƒç¡®ä¿äº† AI Agent èƒ½å¤Ÿç²¾å‡†ç†è§£ç”¨æˆ·è¾“å…¥ï¼Œå¹¶ç»™å‡ºå¯é å›åº”ã€‚</p>
<p><strong>è¿™ä¸ªæ¡†æ¶çš„ä¸»è¦æ­¥éª¤åŒ…æ‹¬ï¼š</strong></p>
<ol>
<li>åˆ†æä¹‹å‰é˜¶æ®µçš„è¾“å‡ºï¼Œæ˜ç¡®å½“å‰æ‰€éœ€ä¿¡æ¯ã€‚</li>
<li>æŒ‰ç…§æ—¢å®šæ ¼å¼æ„å»º Promptï¼Œç¡®ä¿é€»è¾‘æ¸…æ™°ã€‚</li>
<li>æœ€ç»ˆç¡®å®šå¯æ‰§è¡Œçš„ Promptï¼Œå¹¶æŠ•å…¥æ‰§è¡Œã€‚</li>
</ol>
<p>é€šè¿‡è¿™å¥—æµç¨‹ï¼ŒAI Agent èƒ½å¤Ÿåœ¨ç”¨æˆ·æŒ‡å®šçš„æŒ‡ä»¤ä¸‹è‡ªä¸»å®Œæˆå„ç±»ä»»åŠ¡ã€‚ä»éœ€æ±‚åˆ†æåˆ°æœ€ç»ˆæ‰§è¡Œï¼Œæ¯ä¸€æ­¥éƒ½ç´§å¯†è¡”æ¥ï¼Œè®© AI èƒ½ä¸æ–­å­¦ä¹ ã€ä¼˜åŒ–ä¸æˆé•¿ã€‚</p>
<h2 data-id="heading-6">ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ</h2>
<p>ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“ï¼Œæ˜¯ä¸€ç§èƒ½å¤Ÿ<strong>è‡ªä¸»å®Œæˆå¤æ‚ä»»åŠ¡</strong>çš„æ™ºèƒ½ç³»ç»Ÿã€‚å®ƒå°†ã€Œç”Ÿæˆæ¨¡å‹ã€ï¼ˆGenerative Modelsï¼‰ä¸ã€Œå¤šæ™ºèƒ½ä½“æ¡†æ¶ã€ï¼ˆMulti-Agent Frameworkï¼‰ç»“åˆåœ¨ä¸€èµ·ï¼Œä»æ¥æ”¶ä»»åŠ¡åˆ°äº§å‡ºç»“æœï¼Œå…¨è¿‡ç¨‹å‡ ä¹æ— éœ€äººå·¥å¹²é¢„ã€‚</p>
<p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ƒä¸ä»…èƒ½é€‚åº”æ–°çš„ä¿¡æ¯ï¼Œè¿˜èƒ½æ ¹æ®ç”¨æˆ·çš„åé¦ˆä¸æ–­ä¿®æ­£è¾“å‡ºã€‚</p>
<p>å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå°å‹å›¢é˜Ÿï¼šæœ‰äººè´Ÿè´£è®¡åˆ’ã€æœ‰äººåˆ†ææ•°æ®ã€æœ‰äººæ£€éªŒç»“æœï¼Œè€ŒèƒŒåéƒ½æœ‰ä¸€ä¸ªâ€œç»ç†â€åœ¨ç»Ÿç­¹å…¨å±€ã€‚æ•´ä¸ªç³»ç»ŸååŒè¿è¡Œï¼Œå½¢æˆè‡ªæ´½çš„æ™ºèƒ½å·¥ä½œæµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b9c39974d9145ab8b14a9cc68a1f3e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763636511&amp;x-signature=pzNL5Y3zknyFkhquhoyW52nfd3Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">1ã€ç”¨æˆ·è¾“å…¥ï¼ˆUser Promptï¼‰</h3>
<p>ä¸€åˆ‡ä»ç”¨æˆ·çš„ä¸€å¥è¯å¼€å§‹ã€‚</p>
<p>ç”¨æˆ·ä»¥è‡ªç„¶è¯­è¨€æå‡ºéœ€æ±‚ï¼Œæ¯”å¦‚ç”Ÿæˆä¸€ä»½æŠ¥å‘Šã€åˆ†ææŸç»„æ•°æ®ï¼Œæˆ–è€…æ‰§è¡ŒæŸä¸ªåŠ¨ä½œã€‚</p>
<h3 data-id="heading-8">2ã€ä»»åŠ¡ç†è§£ä¸æ‰§è¡Œï¼ˆInterpretation &amp; Executionï¼‰</h3>
<p>AI ç³»ç»Ÿé¦–å…ˆâ€œç†è§£â€è¿™æ¡æŒ‡ä»¤ï¼Œç„¶ååˆ¶å®šä¸€ä»½å®Œæ•´çš„å·¥ä½œæ–¹æ¡ˆã€‚</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªã€Œç»ç†æ™ºèƒ½ä½“ã€ï¼ˆManager Agentï¼‰è´Ÿè´£åè°ƒå…¨å±€ï¼Œå®ƒä¼šæŠŠä»»åŠ¡æ‹†è§£æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œåˆ†æ´¾ç»™ä¸åŒçš„ã€Œä¸“å®¶æ™ºèƒ½ä½“ã€ã€‚</p>
<p>è¿™äº›ä¸“å®¶æ™ºèƒ½ä½“é€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åˆ†ææ™ºèƒ½ä½“ï¼ˆAnalyst Agentï¼‰</strong> ï¼šä»å¤šç§æ•°æ®æºæ”¶é›†ã€æ•´ç†å¹¶åˆ†æä¿¡æ¯ï¼›</li>
<li><strong>æ£€éªŒæ™ºèƒ½ä½“ï¼ˆChecker Agentï¼‰</strong> ï¼šè´Ÿè´£æ ¸å®æ•°æ®çš„å‡†ç¡®æ€§ï¼Œæ ¡å¯¹ä¸­é—´ç»“æœï¼›</li>
<li><strong>è§„åˆ’æ™ºèƒ½ä½“ï¼ˆPlanner Agentï¼‰</strong> ï¼šåè°ƒå„ä¸ªéƒ¨åˆ†çš„æµç¨‹ï¼Œç¡®ä¿å·¥ä½œæ–¹å‘ä¸€è‡´ã€‚</li>
</ul>
<p>è¿™äº› Agent å¯ä»¥è®¿é—®å†…éƒ¨æ•°æ®åº“æˆ–å¤–éƒ¨ç³»ç»Ÿï¼Œå–æ•°ã€åˆ†æã€æ•´åˆï¼Œä¸€æ­¥æ­¥æ„å»ºå®Œæ•´çš„ç»“æœã€‚</p>
<p>ä¸åŒçš„æ™ºèƒ½ä½“ä¹‹é—´ä¼šäº¤äº’ä¿¡æ¯ï¼Œäº’ç›¸è¡¥å……ï¼Œç¡®ä¿æ•´ä½“åä½œé¡ºç•…æ— è¯¯ã€‚</p>
<h3 data-id="heading-9">3ã€åˆç¨¿ç”Ÿæˆä¸å…±äº«ï¼ˆDraft Output Sharingï¼‰</h3>
<p>å½“æ‰€æœ‰å­ä»»åŠ¡å®Œæˆåï¼Œç»ç†æ™ºèƒ½ä½“ä¼šæ•´åˆæˆæœï¼Œç”Ÿæˆåˆç¨¿ã€‚</p>
<p>è¿™ä¸ªåˆç¨¿æ˜¯ä¾æ®ç°æœ‰ä¿¡æ¯å®Œæˆçš„â€œç¬¬ä¸€æ¬¡å°è¯•â€ï¼Œéšåä¼šæäº¤ç»™ç”¨æˆ·å®¡é˜…ã€‚</p>
<h3 data-id="heading-10">4ã€åé¦ˆä¸è¿­ä»£ï¼ˆFeedback &amp; Iterationï¼‰</h3>
<p>ç”¨æˆ·æŸ¥çœ‹åˆç¨¿ï¼Œæå‡ºä¿®æ”¹æ„è§æˆ–æ–°çš„éœ€æ±‚ã€‚</p>
<p>ç³»ç»Ÿå†æ®æ­¤è¿­ä»£æ›´æ–°ï¼Œä¼˜åŒ–è¾“å‡ºå†…å®¹ã€‚</p>
<p>å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œç›´åˆ°ç»“æœæ»¡è¶³ç”¨æˆ·é¢„æœŸã€‚</p>
<p>è¿™å¥—å¾ªç¯æœºåˆ¶ï¼Œä½¿å¾—ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“èƒ½åœ¨åé¦ˆä¸­ä¸æ–­è‡ªæˆ‘æ”¹è¿›ï¼Œè¶Šåšè¶Šå‡†ã€è¶Šåšè¶Šå¥½ã€‚</p>
<h2 data-id="heading-11"><strong>ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“çš„åº”ç”¨</strong></h2>
<p>ç”Ÿæˆå¼ AI çš„å‡ºç°ï¼Œä½¿å¾—â€œæ™ºèƒ½ä½“â€ï¼ˆAgentï¼‰è¿™ä¸€æ¦‚å¿µæ­£åœ¨è¿…é€Ÿè½åœ°ã€‚ä¸åŒäºä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼ŒAI æ™ºèƒ½ä½“æ›´åƒæ˜¯ä¸€ä¸ªèƒ½å¤Ÿç†è§£ç›®æ ‡ã€ä¸»åŠ¨è¡ŒåŠ¨ã€æŒç»­æ”¹è¿›çš„â€œæ•°å­—åŒäº‹â€ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬åœ¨å„ä¸ªé¢†åŸŸçš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-12"><strong>1ã€å®¢æˆ·æœåŠ¡</strong></h3>
<p>AI æ™ºèƒ½ä½“å¯ä»¥ç‹¬ç«‹å¤„ç†å®¢æˆ·å’¨è¯¢ï¼Œå®ç°å³æ—¶å“åº”ä¸è‡ªåŠ¨åŒ–é—®é¢˜è§£å†³ã€‚</p>
<p>å®ƒçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼šæ—¢èƒ½å‡è½»äººå·¥è´Ÿæ‹…ï¼Œåˆèƒ½æå‡å®¢æˆ·ä½“éªŒã€‚å¯¹ä¼ä¸šè€Œè¨€ï¼Œè¿™æ„å‘³ç€æœåŠ¡æ•ˆç‡çš„æå‡ï¼›å¯¹ç”¨æˆ·è€Œè¨€ï¼Œè¿™æ„å‘³ç€æ›´è¿…é€Ÿçš„å¸®åŠ©å’Œæ›´ç¨³å®šçš„ä½“éªŒã€‚</p>
<h3 data-id="heading-13"><strong>2ã€åˆ¶é€ ä¸š</strong></h3>
<p>åœ¨æ•°å­—åŒ–å·¥å‚ä¸­ï¼ŒAI è°ƒåº¦æ™ºèƒ½ä½“å¯ä»¥æ¨¡æ‹Ÿä¸åŒçš„ç”Ÿäº§åœºæ™¯ï¼Œè¯„ä¼°å„ç§æ’äº§æ–¹æ¡ˆçš„æˆæœ¬ã€é€Ÿåº¦ä¸äº¤ä»˜ç¨³å®šæ€§ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç³»ç»Ÿèƒ½è‡ªåŠ¨æ‰¾åˆ°å…¼é¡¾æ•ˆç‡ä¸æˆæœ¬çš„æœ€ä½³è·¯å¾„ï¼Œå®ç°ç”Ÿäº§çº¿çš„åŠ¨æ€ä¼˜åŒ–ï¼šæ—¢èƒ½æŒ‰æ—¶äº¤ä»˜ï¼Œåˆèƒ½å‡å°‘åˆ‡æ¢æŸè€—ã€‚</p>
<p>å®ƒä¸åªæ˜¯â€œååº”å¼â€çš„è°ƒåº¦åŠ©ç†ï¼Œæ›´æ˜¯ä¸€ä¸ªèƒ½ä¸»åŠ¨ä¼˜åŒ–çš„è¿è¥ä¼™ä¼´ã€‚</p>
<h3 data-id="heading-14"><strong>3ã€å†…å®¹ç”Ÿäº§ä¸ç®¡ç†</strong></h3>
<p>åœ¨å†…å®¹è¡Œä¸šï¼ŒAI æ™ºèƒ½ä½“å·²ç»æˆä¸ºæ–°çš„åˆ›ä½œä¼™ä¼´ã€‚</p>
<p>å®ƒä»¬å¯ä»¥ç”Ÿæˆæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘å†…å®¹ï¼Œä¹Ÿèƒ½ç®¡ç†ç¤¾äº¤åª’ä½“è´¦å·ï¼Œè§‚å¯Ÿè¶‹åŠ¿æ•°æ®ï¼Œæ’°å†™å¸å¼•äººçš„å¸–å­ï¼Œå¹¶è‡ªåŠ¨å®‰æ’å‘å¸ƒæ—¶é—´ã€‚</p>
<p>è¿‡å»éœ€è¦æ•´æ”¯å›¢é˜Ÿå®Œæˆçš„ä»»åŠ¡ï¼Œå¦‚ä»Šä¸€ä¸ªæ™ºèƒ½ä½“å°±èƒ½èƒœä»»ã€‚è¿™è®©å†…å®¹åˆ›ä½œçœŸæ­£å…·å¤‡äº†â€œè§„æ¨¡åŒ–â€çš„å¯èƒ½ã€‚</p>
<h3 data-id="heading-15"><strong>4ã€åŒ»ç–—å¥åº·</strong></h3>
<p>åœ¨åŒ»ç–—é¢†åŸŸï¼ŒAI æ™ºèƒ½ä½“æ­£ä»è¾…åŠ©åŒ»ç”Ÿçš„å·¥å…·ï¼Œé€æ¸æ¼”å˜ä¸ºâ€œæ•°å­—åŒ»ç–—åŠ©æ‰‹â€ã€‚</p>
<p>å®ƒå¯ä»¥åˆ†ææ‚£è€…æ•°æ®ï¼Œè¾…åŠ©è¯Šæ–­ç—…æƒ…ï¼Œç”šè‡³æ ¹æ®ä¸ªä½“å·®å¼‚åˆ¶å®šä¸ªæ€§åŒ–æ²»ç–—æ–¹æ¡ˆã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½æå‰è¯†åˆ«æ½œåœ¨é£é™©ï¼Œç»™å‡ºé¢„é˜²æ€§å»ºè®®ï¼Œä»â€œæ²»ç—…â€èµ°å‘â€œé˜²ç—…â€ã€‚</p>
<h3 data-id="heading-16"><strong>5ã€é‡‘èæœåŠ¡</strong></h3>
<p>åœ¨é‡‘èè¡Œä¸šï¼ŒAI æ™ºèƒ½ä½“è¢«ç”¨äºé£é™©æ§åˆ¶ã€æ¬ºè¯ˆæ£€æµ‹ä¸è‡ªåŠ¨åŒ–äº¤æ˜“ã€‚</p>
<p>å®ƒä»¬èƒ½åœ¨å®æ—¶æ•°æ®æµä¸­è¯†åˆ«å¼‚å¸¸æ¨¡å¼ï¼Œè¯„ä¼°æ½œåœ¨é£é™©ï¼Œå¹¶æ‰§è¡Œå†³ç­–ã€‚</p>
<p>ç›¸è¾ƒä¼ ç»Ÿæ¨¡å‹ï¼Œæ™ºèƒ½ä½“çš„ä¼˜åŠ¿ä¸ä»…åœ¨äºé€Ÿåº¦ï¼Œæ›´åœ¨äºâ€œæ´å¯Ÿâ€â€”â€”é€šè¿‡æŒç»­å­¦ä¹ ï¼Œå®ƒä»¬èƒ½ä¸æ–­ä¼˜åŒ–æŠ•èµ„ç­–ç•¥ï¼Œæå‡èµ„äº§å›æŠ¥ã€‚</p>
<h2 data-id="heading-17"><strong>ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“çš„ä¼˜åŠ¿</strong></h2>
<h3 data-id="heading-18"><strong>1ã€æ•ˆç‡ä¸ç”Ÿäº§åŠ›</strong></h3>
<p>ç”Ÿæˆå¼ AI çš„æœ€å¤§ä»·å€¼åœ¨äºâ€œè§£æ”¾äººåŠ›â€ã€‚</p>
<p>é‚£äº›é‡å¤ã€çç¢åˆè€—æ—¶çš„æµç¨‹ï¼ŒAI å¯ä»¥è‡ªåŠ¨å®Œæˆï¼Œè®©äººç±»æœ‰æ›´å¤šç²¾åŠ›ä¸“æ³¨äºç­–ç•¥ã€åˆ›é€ ä¸å†³ç­–ã€‚</p>
<p>ç»“æœæ˜¯ï¼šç»„ç»‡çš„æ•ˆç‡æå‡äº†ï¼Œç”Ÿäº§åŠ›ä¹Ÿæ˜¾è‘—æé«˜ã€‚æ— è®ºæ˜¯åˆ¶é€ ã€é‡‘èè¿˜æ˜¯æœåŠ¡ä¸šï¼Œå‡ ä¹éƒ½èƒ½ä»ä¸­å—ç›Šã€‚</p>
<h3 data-id="heading-19"><strong>2ã€å¯æ‰©å±•æ€§</strong></h3>
<p>AI æ™ºèƒ½ä½“å¯ä»¥åŒæ—¶å¤„ç†å¤šé¡¹ä»»åŠ¡ï¼Œå¹¶åœ¨å·¥ä½œé‡å¢åŠ æ—¶ä¿æŒè¿è½¬ï¼Œè€Œæ— éœ€ç›¸åº”å¢åŠ äººåŠ›å’Œæˆæœ¬ã€‚</p>
<p>è¿™ç§â€œè¾¹é™…æˆæœ¬è¶‹è¿‘äºé›¶â€çš„ç‰¹æ€§ï¼Œä½¿å¤§å‹ä¼ä¸šåœ¨æ‰©å¼ æ—¶å…·å¤‡äº†å‰æ‰€æœªæœ‰çš„çµæ´»æ€§ã€‚</p>
<p>è¿‡å»æ‰©å¼ é äººï¼Œç°åœ¨æ‰©å¼ é ç®—åŠ›ã€‚</p>
<h3 data-id="heading-20"><strong>3ã€å‡†ç¡®ä¸ä¸€è‡´</strong></h3>
<p>äººä¸äººå·¥ä½œçŠ¶æ€ä¸åŒï¼Œè€Œ AI çš„è¡¨ç°å´ç¨³å®šä¸”å¯é‡å¤ã€‚</p>
<p>åœ¨é‡‘èã€åŒ»ç–—ç­‰é«˜é£é™©é¢†åŸŸï¼ŒAI çš„é«˜å‡†ç¡®æ€§ä¸ä¸€è‡´æ€§å°¤ä¸ºé‡è¦ã€‚</p>
<p>ä¸€ä¸ªä¸ä¼šç–²åŠ³ã€ä¸ä¼šåˆ†å¿ƒã€ä¸ä¼šå‡ºé”™çš„â€œåŠ©æ‰‹â€ï¼Œèƒ½æå¤§æé«˜å†³ç­–çš„å¯é æ€§ã€‚</p>
<h3 data-id="heading-21"><strong>4ã€å®æ—¶å†³ç­–</strong></h3>
<p>AI çš„å¼ºé¡¹åœ¨äºâ€œå¿«é€Ÿæ´å¯Ÿâ€ã€‚</p>
<p>å®ƒèƒ½åœ¨æµ·é‡æ•°æ®æµä¸­å®æ—¶åˆ†æå¹¶ä½œå‡ºåˆ¤æ–­ï¼Œä»è€Œæ”¯æŒå³æ—¶å†³ç­–ã€‚</p>
<p>åœ¨ç¯å¢ƒå¤šå˜ã€ç«äº‰æ¿€çƒˆçš„åœºæ™¯ä¸‹â€”â€”æ¯”å¦‚è‚¡å¸‚äº¤æ˜“ã€ä¾›åº”é“¾ç®¡ç†â€”â€”è¿™ç§å³æ—¶å“åº”èƒ½åŠ›å¾€å¾€å°±æ˜¯æˆè´¥å…³é”®ã€‚</p>
<h2 data-id="heading-22"><strong>ç”Ÿæˆå¼ AI é¢ä¸´çš„æŒ‘æˆ˜ä¸é£é™©</strong></h2>
<p>ç”Ÿæˆå¼ AI çš„å‰æ™¯ä»¤äººå…´å¥‹ï¼Œä½†è¶Šæ˜¯å¼ºå¤§çš„æŠ€æœ¯ï¼Œè¶Šéœ€è¦è°¨æ…ä½¿ç”¨ã€‚</p>
<p>å®ƒå¸¦æ¥çš„é—®é¢˜ï¼Œä¹Ÿå¿…é¡»æ­£é¢é¢å¯¹ã€‚</p>
<h3 data-id="heading-23"><strong>1ã€æ•°æ®éšç§ä¸å®‰å…¨</strong></h3>
<p>AI æ™ºèƒ½ä½“å¾€å¾€éœ€è¦å¤„ç†æ•æ„Ÿæ•°æ®ã€‚å¦‚ä½•ä¿æŠ¤éšç§ã€é˜²æ­¢æ³„éœ²ï¼Œæ˜¯ç¬¬ä¸€è¦åŠ¡ã€‚</p>
<p>ä¼ä¸šå¿…é¡»å»ºç«‹å®Œå–„çš„å®‰å…¨ä½“ç³»ï¼Œç¡®ä¿æ•°æ®ä¸è¢«æ»¥ç”¨æˆ–éæ³•è®¿é—®ã€‚</p>
<p>ä¸€æ—¦å‡ºç°æ¼æ´ï¼Œåæœä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¿¡ä»»å±æœºã€‚</p>
<h3 data-id="heading-24"><strong>2ã€åè§ä¸å…¬å¹³</strong></h3>
<p>AI å­¦ä¹ çš„æ˜¯äººç±»æ•°æ®ï¼Œè€Œäººç±»çš„æ•°æ®æœ¬èº«å°±åŒ…å«åè§ã€‚</p>
<p>å¦‚æœä¸åŠ çº æ­£ï¼ŒAI å¯èƒ½ä¼šâ€œå¿ å®â€åœ°æ”¾å¤§è¿™äº›åå·®ã€‚</p>
<p>è¦è®© AI å…¬å¹³ï¼Œå°±æ„å‘³ç€åœ¨ç®—æ³•å±‚é¢ä¸æ–­åœ°æ ¡æ­£ä¸ç›‘ç£ï¼Œç¡®ä¿ä¸åŒç¾¤ä½“éƒ½èƒ½è¢«å¹³ç­‰å¯¹å¾…ã€‚</p>
<h3 data-id="heading-25"><strong>3ã€å¯è§£é‡Šæ€§ä¸é€æ˜åº¦</strong></h3>
<p>å¾ˆå¤š AI ç³»ç»Ÿåƒä¸€ä¸ªé»‘ç®±ï¼Œè¿å¼€å‘è€…æœ‰æ—¶ä¹Ÿéš¾ä»¥è§£é‡Šä¸ºä»€ä¹ˆå®ƒä¼šåšå‡ºæŸä¸ªå†³å®šã€‚</p>
<p>è¦è®©ç¤¾ä¼šä¿¡ä»» AIï¼Œæˆ‘ä»¬éœ€è¦æ›´é«˜çš„é€æ˜åº¦ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒAI å¿…é¡»â€œè¯´å¾—æ¸…ã€è®²å¾—æ˜â€ï¼Œå¦åˆ™å°±éš¾ä»¥æ‰¿æ‹…å…³é”®é¢†åŸŸçš„è´£ä»»ã€‚</p>
<h2 data-id="heading-26"><strong>æœªæ¥å±•æœ›</strong></h2>
<p>ç”Ÿæˆå¼ AI æ™ºèƒ½ä½“çš„æœªæ¥å€¼å¾—æœŸå¾…ã€‚</p>
<p>ç ”ç©¶ä»åœ¨å¿«é€Ÿæ¨è¿›ï¼Œä¼ä¸šä¹Ÿä¸æ–­åŠ å¤§æŠ•å…¥ï¼Œå¸Œæœ›åœ¨æ–°ä¸€è½®æ™ºèƒ½åŒ–æµªæ½®ä¸­å æ®ä¼˜åŠ¿ã€‚</p>
<p>æ­£å¦‚**BCGï¼ˆæ³¢å£«é¡¿å’¨è¯¢é›†å›¢ï¼‰**åœ¨ã€ŠGPT åªæ˜¯å¼€å§‹ï¼Œè‡ªæ²»æ™ºèƒ½ä½“æ­£åœ¨åˆ°æ¥ã€‹ä¸€æ–‡ä¸­æŒ‡å‡ºçš„ï¼š</p>
<p>åœ¨æœªæ¥å‡ å¹´ï¼Œèƒ½å¤Ÿç‹¬ç«‹æ‰§è¡Œå¤æ‚ä»»åŠ¡çš„è‡ªæ²»æ™ºèƒ½ä½“å°†èµ°å‘ä¸»æµã€‚</p>
<p>å¯¹ä¼ä¸šæ¥è¯´ï¼Œæ¥ä¸‹æ¥çš„å…³é”®æ˜¯<strong>æå‰å¸ƒå±€</strong>ï¼š</p>
<ul>
<li>åˆ¶å®šæ¸…æ™°çš„è½¬å‹è·¯çº¿å›¾ï¼Œ</li>
<li>æŠ•èµ„åŸºç¡€è®¾æ–½ä¸æ•°å­—äººæ‰ï¼Œ</li>
<li>ä¸ºè‡ªåŠ¨åŒ–ä¸æ™ºèƒ½åŒ–çš„èåˆåšå¥½å‡†å¤‡ã€‚</li>
</ul>
<p>è¿™åœºå˜é©ä¸ä¼šä¸€å¤œä¹‹é—´å‘ç”Ÿï¼Œä½†æ­£åœ¨æ‚„ç„¶åŠ é€Ÿã€‚</p>
<p>è°èƒ½ç†è§£è¶‹åŠ¿ã€æ‹¥æŠ±æŠ€æœ¯ï¼Œè°å°±èƒ½åœ¨ä¸‹ä¸€è½®ç«äº‰ä¸­å å¾—å…ˆæœºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webpack ä¸ Rollup ä¸­ Tree-shaking çš„å®ç°åŸç†ä¸æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7571768210715820047</link>    <guid>https://juejin.cn/post/7571768210715820047</guid>    <pubDate>2025-11-13T09:15:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571768210715820047" data-draft-id="7571815997067640872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webpack ä¸ Rollup ä¸­ Tree-shaking çš„å®ç°åŸç†ä¸æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯,Webpack,rollup.js"/> <meta itemprop="datePublished" content="2025-11-13T09:15:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webpack ä¸ Rollup ä¸­ Tree-shaking çš„å®ç°åŸç†ä¸æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:15:22.000Z" title="Thu Nov 13 2025 09:15:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Tree-shaking æ˜¯ç°ä»£å‰ç«¯æ„å»ºå·¥å…·ä¸­ç”¨äºæ¶ˆé™¤æ­»ä»£ç ï¼ˆæœªè¢«ä½¿ç”¨çš„ä»£ç ï¼‰çš„é‡è¦ä¼˜åŒ–æ‰‹æ®µï¼Œæ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨ ES6 æ¨¡å—çš„é™æ€ç‰¹æ€§ï¼ˆ<code>import</code>/<code>export</code>ï¼‰åˆ†æä»£ç ä¾èµ–ï¼Œå‰”é™¤æœªè¢«å¼•ç”¨çš„å¯¼å‡ºå†…å®¹ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€Tree-shaking æ ¸å¿ƒå‰æ</h3>
<p>Tree-shaking ä»…å¯¹Â <strong>ES6 æ¨¡å—ï¼ˆESMï¼‰</strong> Â æœ‰æ•ˆï¼Œå› ä¸º ESM å…·æœ‰ä»¥ä¸‹é™æ€ç‰¹æ€§ï¼š</p>
<ul>
<li>æ¨¡å—ä¾èµ–å…³ç³»åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ˆè€Œéè¿è¡Œæ—¶ï¼‰ã€‚</li>
<li><code>import</code>/<code>export</code>Â è¯­å¥åªèƒ½å‡ºç°åœ¨æ¨¡å—é¡¶å±‚ï¼Œæ— æ³•åŠ¨æ€ä¿®æ”¹ã€‚</li>
</ul>
<p>CommonJS æ¨¡å—ï¼ˆ<code>require</code>/<code>module.exports</code>ï¼‰å› ä¾èµ–å…³ç³»åŠ¨æ€åŒ–ï¼Œæ— æ³•è¢« Tree-shaking ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-1">äºŒã€Rollup ä¸­çš„ Tree-shaking</h3>
<p>Rollup æ˜¯ä¸“æ³¨äº ES æ¨¡å—æ‰“åŒ…çš„å·¥å…·ï¼ŒTree-shaking æ˜¯å…¶åŸç”Ÿæ ¸å¿ƒåŠŸèƒ½ï¼Œå®ç°ç®€æ´ä¸”é«˜æ•ˆã€‚</p>
<h4 data-id="heading-2">1. å®ç°åŸç†</h4>
<p>Rollup é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç° Tree-shakingï¼š</p>
<ol>
<li><strong>ä¾èµ–è§£æ</strong>ï¼šéå†æ¨¡å—çš„Â <code>import</code>/<code>export</code>Â è¯­å¥ï¼Œæ„å»ºæ¨¡å—ä¾èµ–å›¾ã€‚</li>
<li><strong>æ ‡è®°æœªä½¿ç”¨ä»£ç </strong>ï¼šä»å…¥å£æ¨¡å—å‡ºå‘ï¼Œè¿½è¸ªæ‰€æœ‰è¢«å¼•ç”¨çš„å¯¼å‡ºï¼ˆ<code>export</code>ï¼‰ï¼Œæœªè¢«å¼•ç”¨çš„å¯¼å‡ºè¢«æ ‡è®°ä¸º â€œæ­»ä»£ç â€ã€‚</li>
<li><strong>åˆ é™¤æ­»ä»£ç </strong>ï¼šåœ¨æ‰“åŒ…é˜¶æ®µç›´æ¥å‰”é™¤æ ‡è®°çš„æ­»ä»£ç ï¼Œä¸ç”Ÿæˆå†—ä½™å†…å®¹ã€‚</li>
</ol>
<p>Rollup å¯¹ä»£ç çš„é™æ€åˆ†ææ›´å½»åº•ï¼Œä¸”é»˜è®¤è¾“å‡ºæœªè¢«æ··æ·†çš„ä»£ç ï¼Œå› æ­¤ Tree-shaking æ•ˆæœç›´è§‚å¯è§ã€‚</p>
<h4 data-id="heading-3">2. ä»£ç ç¤ºä¾‹ä¸æ•ˆæœ</h4>
<h5 data-id="heading-4">æºæ–‡ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.jsï¼ˆES æ¨¡å—ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">minus</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b; <span class="hljs-comment">// æœªè¢«ä½¿ç”¨çš„å‡½æ•°</span>

<span class="hljs-comment">// index.jsï¼ˆå…¥å£æ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// ä»…ä½¿ç”¨ add</span>
</code></pre>
<h5 data-id="heading-5">Rollup é…ç½®ï¼ˆ<code>rollup.config.js</code>ï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  input: <span class="hljs-string">'src/index.js'</span>,
  output: {
    file: <span class="hljs-string">'dist/bundle.js'</span>,
    format: <span class="hljs-string">'es'</span> <span class="hljs-comment">// è¾“å‡º ES æ¨¡å—ï¼ˆä¿ç•™ import/exportï¼Œä¾¿äºè§‚å¯Ÿï¼‰</span>
  }
};
</code></pre>
<h5 data-id="heading-6">æ‰“åŒ…ç»“æœï¼ˆ<code>dist/bundle.js</code>ï¼‰</h5>
<pre><code class="hljs language-css" lang="css">const add = (<span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span>) =&gt; <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span>;
console<span class="hljs-selector-class">.log</span>(add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šæœªè¢«ä½¿ç”¨çš„Â <code>minus</code>Â å‡½æ•°è¢«å®Œå…¨å‰”é™¤ï¼Œè¾“å‡ºä»£ç ç®€æ´ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€Webpack ä¸­çš„ Tree-shaking</h3>
<p>Webpack ä» v2 å¼€å§‹æ”¯æŒ Tree-shakingï¼Œä½†å®ç°é€»è¾‘æ›´å¤æ‚ï¼Œå—å¤šç§å› ç´ å½±å“ï¼ˆå¦‚æ¨¡å¼ã€å‹ç¼©å·¥å…·ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-8">1. å®ç°åŸç†</h4>
<p>Webpack çš„ Tree-shaking åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>è§£æ ES æ¨¡å—çš„Â <code>import</code>/<code>export</code>ï¼Œé€šè¿‡Â <code>ModuleConcatenationPlugin</code>Â åˆ†ææ¨¡å—ä¾èµ–ã€‚</li>
<li>å¯¹æœªè¢«å¼•ç”¨çš„å¯¼å‡ºæ ‡è®°ä¸ºÂ <code>/* unused harmony export xxx */</code>ï¼ˆä»…æ ‡è®°ï¼Œä¸åˆ é™¤ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ é™¤é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>ä¾èµ–Â <strong>å‹ç¼©å·¥å…·ï¼ˆå¦‚ Terserï¼‰</strong> Â å‰”é™¤æ ‡è®°çš„æ­»ä»£ç ã€‚</li>
<li>ä»…åœ¨Â <code>production</code>Â æ¨¡å¼ä¸‹é»˜è®¤å¯ç”¨ï¼ˆå¼€å‘æ¨¡å¼ä¸ºä¿ç•™ä»£ç ä¸åˆ é™¤ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‰¯ä½œç”¨å¤„ç†</strong>ï¼š</p>
<ul>
<li>é€šè¿‡Â <code>package.json</code>Â çš„Â <code>sideEffects</code>Â å­—æ®µæ ‡è®°æ¨¡å—æ˜¯å¦æœ‰å‰¯ä½œç”¨ï¼ˆå¦‚å…¨å±€å˜é‡ä¿®æ”¹ã€DOM æ“ä½œï¼‰ï¼Œé¿å…è¯¯åˆ æœ‰å‰¯ä½œç”¨çš„ä»£ç ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-9">2. ä»£ç ç¤ºä¾‹ä¸æ•ˆæœ</h4>
<h5 data-id="heading-10">æºæ–‡ä»¶ï¼ˆåŒ Rollup ç¤ºä¾‹ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">minus</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b; <span class="hljs-comment">// æœªè¢«ä½¿ç”¨</span>

<span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<h5 data-id="heading-11">Webpack é…ç½®ï¼ˆ<code>webpack.config.js</code>ï¼‰</h5>
<pre><code class="hljs language-css" lang="css">module<span class="hljs-selector-class">.exports</span> = {
  entry: <span class="hljs-string">'./src/index.js'</span>,
  output: {
    filename: <span class="hljs-string">'bundle.js'</span>,
    path: path.<span class="hljs-built_in">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>)
  },
  mode: <span class="hljs-string">'production'</span> // å¿…é¡»ä¸º production æ¨¡å¼æ‰ä¼šåˆ é™¤æ­»ä»£ç 
};
</code></pre>
<h5 data-id="heading-12">æ‰“åŒ…ç»“æœï¼ˆ<code>dist/bundle.js</code>ï¼Œç®€åŒ–åï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">console.<span class="hljs-built_in">log</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// add(1,2) è¢«ç›´æ¥è®¡ç®—ï¼Œminus å®Œå…¨åˆ é™¤</span>
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šæœªè¢«ä½¿ç”¨çš„Â <code>minus</code>Â è¢«å‰”é™¤ï¼Œä¸”Â <code>add</code>Â å‡½æ•°å› é€»è¾‘ç®€å•è¢«è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆç›´æ¥è®¡ç®—ç»“æœï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">3. å…³é”®é…ç½®ï¼š<code>sideEffects</code></h4>
<p>å¦‚æœæ¨¡å—å­˜åœ¨å‰¯ä½œç”¨ï¼ˆå¦‚ä¿®æ”¹å…¨å±€å˜é‡ï¼‰ï¼Œéœ€åœ¨Â <code>package.json</code>Â ä¸­å£°æ˜ï¼Œé¿å…è¢«è¯¯åˆ ï¼š</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"./src/polyfill.js"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æœ‰å‰¯ä½œç”¨çš„æ¨¡å—</span>
    <span class="hljs-string">"*.css"</span> <span class="hljs-comment">// CSS æ–‡ä»¶é€šå¸¸æœ‰å‰¯ä½œç”¨ï¼ˆæ’å…¥æ ·å¼ï¼‰</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><code>sideEffects: false</code>ï¼šè¡¨ç¤ºæ‰€æœ‰æ¨¡å—å‡æ— å‰¯ä½œç”¨ï¼Œå¯å®‰å…¨åˆ é™¤æœªå¼•ç”¨ä»£ç ã€‚</li>
</ul>
<h3 data-id="heading-14">å››ã€æ ¸å¿ƒå·®å¼‚å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Rollup</th><th>Webpack</th></tr></thead><tbody><tr><td><strong>åˆ†æèƒ½åŠ›</strong></td><td>åŸç”Ÿæ”¯æŒ ESM é™æ€åˆ†æï¼Œæ›´å½»åº•</td><td>éœ€ä¾èµ–æ’ä»¶ï¼ˆ<code>ModuleConcatenationPlugin</code>ï¼‰ï¼Œåˆ†æé€»è¾‘è¾ƒå¤æ‚</td></tr><tr><td><strong>åˆ é™¤æ­»ä»£ç æ—¶æœº</strong></td><td>æ‰“åŒ…é˜¶æ®µç›´æ¥åˆ é™¤</td><td>ä¾èµ–å‹ç¼©å·¥å…·ï¼ˆTerserï¼‰åœ¨ä¼˜åŒ–é˜¶æ®µåˆ é™¤</td></tr><tr><td><strong>å¼€å‘æ¨¡å¼æ•ˆæœ</strong></td><td>å³ä½¿å¼€å‘æ¨¡å¼ä¹Ÿä¼šåˆ é™¤æ­»ä»£ç </td><td>ä»…Â <code>production</code>Â æ¨¡å¼åˆ é™¤ï¼ˆå¼€å‘æ¨¡å¼ä¿ç•™ç”¨äºè°ƒè¯•ï¼‰</td></tr><tr><td><strong>è¾“å‡ºå¯è¯»æ€§</strong></td><td>è¾“å‡ºä»£ç æ¥è¿‘æºç ï¼ŒTree-shaking æ•ˆæœç›´è§‚</td><td>è¾“å‡ºä»£ç ç»å‹ç¼©æ··æ·†ï¼Œæ•ˆæœéœ€åæ¨</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>åº“æ–‡ä»¶æ‰“åŒ…ï¼ˆå¦‚å·¥å…·åº“ã€ç»„ä»¶åº“ï¼‰</td><td>åº”ç”¨ç¨‹åºæ‰“åŒ…ï¼ˆä¾èµ–å¤æ‚ã€éœ€å¤„ç†å¤šç§æ¨¡å—ç±»å‹ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15">äº”ã€æ€»ç»“</h3>
<ul>
<li><strong>Rollup</strong>ï¼šTree-shaking å®ç°ç®€æ´é«˜æ•ˆï¼Œè¾“å‡ºä»£ç å¹²å‡€ï¼Œé€‚åˆåº“æ–‡ä»¶æ‰“åŒ…ï¼ˆå¦‚ Reactã€Vue ç­‰ï¼‰ã€‚</li>
<li><strong>Webpack</strong>ï¼šTree-shaking éœ€é…åˆå‹ç¼©å·¥å…·å’Œæ¨¡å¼é…ç½®ï¼ŒåŠŸèƒ½æ›´å…¨é¢ï¼ˆæ”¯æŒå¤šç§æ¨¡å—ç±»å‹ã€å¤æ‚ä¾èµ–ï¼‰ï¼Œé€‚åˆåº”ç”¨ç¨‹åºæ‰“åŒ…ã€‚</li>
</ul>
<h3 data-id="heading-16">å…­ã€ç›´è§‚ç‚¹</h3>
<ul>
<li>æ•´ä¸ªè¿‡ç¨‹å°±åƒ â€œæ¸…ç†æˆ¿é—´â€ï¼šå…ˆæ‘¸æ¸…æˆ¿é—´é‡Œçš„ç‰©å“ï¼ˆä¾èµ–è§£æï¼‰â†’ æ ‡è®°æ²¡ç”¨çš„åƒåœ¾ï¼ˆæ ‡è®°æ­»ä»£ç ï¼‰â†’ ç›´æ¥æ‰”æ‰åƒåœ¾ï¼ˆåˆ é™¤æ­»ä»£ç ï¼‰ï¼›</li>
<li>å¯¹æ¯” Webpack ï¼šRollup æ˜¯ â€œè¾¹æ‰“åŒ…è¾¹æ‰”åƒåœ¾â€ï¼ŒWebpack æ˜¯ â€œå…ˆæ ‡è®°åƒåœ¾ï¼Œæœ€åæ‰¾æ¸…æ´å·¥ï¼ˆTerserï¼‰æ‰”â€ï¼Œæ‰€ä»¥ Rollup çš„äº§ç‰©æ›´ç›´è§‚çœ‹åˆ°å‰”é™¤æ•ˆæœã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin-4]]></title>    <link>https://juejin.cn/post/7571678674144854026</link>    <guid>https://juejin.cn/post/7571678674144854026</guid>    <pubDate>2025-11-12T12:47:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678674144854026" data-draft-id="7571088527678275610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin-4"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T12:47:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin-4
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:47:15.000Z" title="Wed Nov 12 2025 12:47:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤ªæ£’äº†ï¼ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ Kotlin æœ€æ¿€åŠ¨äººå¿ƒçš„éƒ¨åˆ†â€”â€”<strong>åç¨‹</strong>å’Œ<strong>ç°ä»£å¼‚æ­¥ç¼–ç¨‹</strong>ã€‚è¿™å°†å½»åº•æ”¹å˜ä½ å¤„ç†å¹¶å‘å’Œå¼‚æ­¥ä»»åŠ¡çš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>Kotlin åç¨‹ï¼šé‡æ–°å®šä¹‰å¼‚æ­¥ç¼–ç¨‹</strong></h3>
<h4 data-id="heading-1"><strong>äºŒåäºŒã€åç¨‹åŸºç¡€ï¼šè½»é‡çº§çº¿ç¨‹</strong></h4>
<p>åç¨‹æ˜¯ Kotlin ç”¨äºå¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”çº¿ç¨‹æ›´è½»é‡ã€æ›´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¼€å§‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    
    <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
    GlobalScope.launch {
        println(<span class="hljs-string">"åç¨‹å¼€å§‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000L</span>) <span class="hljs-comment">// éé˜»å¡å»¶è¿Ÿ</span>
        println(<span class="hljs-string">"åç¨‹ç»“æŸ: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }
    
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    Thread.sleep(<span class="hljs-number">2000L</span>) <span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…åç¨‹å®Œæˆ</span>
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»“æŸ"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹å¼€å§‹: main</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ: main</span>
<span class="hljs-comment">// åç¨‹å¼€å§‹: DefaultDispatcher-worker-1</span>
<span class="hljs-comment">// åç¨‹ç»“æŸ: DefaultDispatcher-worker-1</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹ç»“æŸ</span>
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p>
<ul>
<li><code>launch</code>: å¯åŠ¨ä¸€ä¸ªä¸è¿”å›ç»“æœçš„åç¨‹</li>
<li><code>delay()</code>: éé˜»å¡çš„æŒ‚èµ·å‡½æ•°</li>
<li>åç¨‹è¿è¡Œåœ¨åå°çº¿ç¨‹æ± ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</li>
</ul>
<h4 data-id="heading-2"><strong>äºŒåä¸‰ã€æŒ‚èµ·å‡½æ•°ï¼šå¼‚æ­¥æ“ä½œçš„åŸºçŸ³</strong></h4>
<p>æŒ‚èµ·å‡½æ•°æ˜¯åç¨‹çš„æ ¸å¿ƒï¼Œç”¨Â <code>suspend</code>å…³é”®å­—æ ‡è®°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserData</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: String {
    delay(<span class="hljs-number">1000L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ· <span class="hljs-variable">$userId</span> çš„æ•°æ®"</span>
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserPosts</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: String {
    delay(<span class="hljs-number">1500L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ· <span class="hljs-variable">$userId</span> çš„å¸–å­"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> userData = fetchUserData(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> userPosts = fetchUserPosts(<span class="hljs-number">1</span>)
        println(<span class="hljs-string">"<span class="hljs-variable">$userData</span>, <span class="hljs-variable">$userPosts</span>"</span>)
    }
    println(<span class="hljs-string">"é¡ºåºæ‰§è¡Œè€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>)
}
</code></pre>
<h4 data-id="heading-3"><strong>äºŒåå››ã€å¼‚æ­¥å¹¶å‘ï¼šåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</strong></h4>
<p>ä½¿ç”¨Â <code>async</code>å’ŒÂ <code>await</code>å®ç°å¹¶å‘æ“ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlin.system.measureTimeMillis

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-comment">// åŒæ—¶å¯åŠ¨ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> userDataDeferred = async { fetchUserData(<span class="hljs-number">1</span>) }
        <span class="hljs-keyword">val</span> userPostsDeferred = async { fetchUserPosts(<span class="hljs-number">1</span>) }
        
        <span class="hljs-comment">// ç­‰å¾…ä¸¤ä¸ªä»»åŠ¡éƒ½å®Œæˆ</span>
        <span class="hljs-keyword">val</span> userData = userDataDeferred.await()
        <span class="hljs-keyword">val</span> userPosts = userPostsDeferred.await()
        
        println(<span class="hljs-string">"<span class="hljs-variable">$userData</span>, <span class="hljs-variable">$userPosts</span>"</span>)
    }
    println(<span class="hljs-string">"å¹¶å‘æ‰§è¡Œè€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>) <span class="hljs-comment">// æ—¶é—´æ¥è¿‘æœ€é•¿ä»»åŠ¡çš„æ—¶é—´</span>
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”¨æˆ· 1 çš„æ•°æ®, ç”¨æˆ· 1 çš„å¸–å­</span>
<span class="hljs-comment">// å¹¶å‘æ‰§è¡Œè€—æ—¶: 1506ms (è€Œä¸æ˜¯ 1000 + 1500 = 2500ms)</span>
</code></pre>
<h4 data-id="heading-4"><strong>äºŒåäº”ã€åç¨‹ä¸Šä¸‹æ–‡ä¸è°ƒåº¦å™¨</strong></h4>
<p>æ§åˆ¶åç¨‹åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šè¿è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss">import kotlinx<span class="hljs-selector-class">.coroutines</span>.*

fun <span class="hljs-selector-tag">main</span>() = runBlocking {
    <span class="hljs-comment">// åœ¨ä¸åŒè°ƒåº¦å™¨ä¸Šå¯åŠ¨åç¨‹</span>
    launch { <span class="hljs-comment">// ç»§æ‰¿çˆ¶åç¨‹çš„ä¸Šä¸‹æ–‡</span>
        <span class="hljs-built_in">println</span>("é»˜è®¤è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.Unconfined) { <span class="hljs-comment">// ä¸å—é™åˆ¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ä¹‹å‰è¿è¡Œåœ¨è°ƒç”¨è€…çº¿ç¨‹</span>
        <span class="hljs-built_in">println</span>("ä¸å—é™åˆ¶: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.Default) { <span class="hljs-comment">// CPU å¯†é›†å‹ä»»åŠ¡</span>
        <span class="hljs-built_in">println</span>("é»˜è®¤è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.IO) { <span class="hljs-comment">// I/O å¯†é›†å‹ä»»åŠ¡</span>
        <span class="hljs-built_in">println</span>("IO è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(newSingleThreadContext("MyThread")) { <span class="hljs-comment">// ä¸“ç”¨çº¿ç¨‹</span>
        <span class="hljs-built_in">println</span>("ä¸“ç”¨çº¿ç¨‹: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
}
</code></pre>
<h4 data-id="heading-5"><strong>äºŒåå…­ã€ç»“æ„åŒ–å¹¶å‘ï¼šé¿å…èµ„æºæ³„æ¼</strong></h4>
<p>ä½¿ç”¨Â <code>coroutineScope</code>å®ç°ç»“æ„åŒ–å¹¶å‘ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// ç»“æ„åŒ–å¹¶å‘ï¼šæ‰€æœ‰å­åç¨‹å®Œæˆåï¼Œçˆ¶åç¨‹æ‰å®Œæˆ</span>
    <span class="hljs-keyword">val</span> result = coroutineScope {
        <span class="hljs-keyword">val</span> userData = async { fetchUserData(<span class="hljs-number">1</span>) }
        <span class="hljs-keyword">val</span> userPosts = async { fetchUserPosts(<span class="hljs-number">1</span>) }
        
        <span class="hljs-string">"ç»“æœ: <span class="hljs-subst">${userData.await()}</span> + <span class="hljs-subst">${userPosts.await()}</span>"</span>
    }
    println(result)
}

<span class="hljs-comment">// å¤„ç†å¼‚å¸¸çš„ç»“æ„åŒ–å¹¶å‘</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataSafely</span><span class="hljs-params">()</span></span>: Result&lt;String&gt; = coroutineScope {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = async { 
            delay(<span class="hljs-number">500L</span>)
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() % <span class="hljs-number">2</span> == <span class="hljs-number">0L</span>) {
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"æ¨¡æ‹Ÿé”™è¯¯"</span>)
            }
            <span class="hljs-string">"è·å–çš„æ•°æ®"</span>
        }.await()
        Result.success(<span class="hljs-keyword">data</span>)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Result.failure(e)
    }
}
</code></pre>
<h4 data-id="heading-6"><strong>äºŒåä¸ƒã€æµï¼ˆFlowï¼‰ï¼šå¼‚æ­¥æ•°æ®æµ</strong></h4>
<p>Flow æ˜¯ Kotlin çš„å“åº”å¼æµå¤„ç†ï¼Œç±»ä¼¼ RxJavaã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.flow.*

<span class="hljs-comment">// åˆ›å»ºæµ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">simpleFlow</span><span class="hljs-params">()</span></span>: Flow&lt;<span class="hljs-built_in">Int</span>&gt; = flow {
    println(<span class="hljs-string">"æµå¼€å§‹"</span>)
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        delay(<span class="hljs-number">100L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥å·¥ä½œ</span>
        emit(i) <span class="hljs-comment">// å‘å°„å€¼</span>
    }
}

<span class="hljs-comment">// æµçš„ä¸­é—´æ“ä½œ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processNumbers</span><span class="hljs-params">()</span></span>: Flow&lt;String&gt; = flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.5</span>) {
        emit(i)
    }
}.filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> } <span class="hljs-comment">// è¿‡æ»¤å¶æ•°</span>
 .map { <span class="hljs-string">"æ•°å­—: <span class="hljs-variable">$it</span>"</span> }    <span class="hljs-comment">// è½¬æ¢</span>
 .onEach { println(<span class="hljs-string">"å¤„ç†: <span class="hljs-variable">$it</span>"</span>) } <span class="hljs-comment">// å‰¯ä½œç”¨</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// æ”¶é›†æµ</span>
    simpleFlow().collect { value -&gt; 
        println(<span class="hljs-string">"æ”¶é›†åˆ°: <span class="hljs-variable">$value</span>"</span>) 
    }
    
    println(<span class="hljs-string">"--- å¸¦ä¸­é—´æ“ä½œçš„æµ ---"</span>)
    processNumbers().collect { println(<span class="hljs-string">"æœ€ç»ˆç»“æœ: <span class="hljs-variable">$it</span>"</span>) }
}
</code></pre>
<h4 data-id="heading-7"><strong>äºŒåå…«ã€é€šé“ï¼ˆChannelï¼‰ï¼šåç¨‹é—´é€šä¿¡</strong></h4>
<p>Channel ç”¨äºåç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.channels.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> channel = Channel&lt;String&gt;()
    
    <span class="hljs-comment">// ç”Ÿäº§è€…åç¨‹</span>
    launch {
        <span class="hljs-keyword">val</span> users = listOf(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>)
        <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> users) {
            channel.send(user) <span class="hljs-comment">// å‘é€æ•°æ®</span>
            delay(<span class="hljs-number">100L</span>)
        }
        channel.close() <span class="hljs-comment">// å…³é—­é€šé“</span>
    }
    
    <span class="hljs-comment">// æ¶ˆè´¹è€…åç¨‹</span>
    launch {
        <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> channel) { <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
            println(<span class="hljs-string">"æ”¶åˆ°ç”¨æˆ·: <span class="hljs-variable">$user</span>"</span>)
        }
        println(<span class="hljs-string">"é€šé“å·²å…³é—­"</span>)
    }
}
</code></pre>
<h4 data-id="heading-8"><strong>äºŒåä¹ã€å®æˆ˜ï¼šæ„å»ºå®Œæ•´çš„å¼‚æ­¥åº”ç”¨</strong></h4>
<p>è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯è·å–ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.flow.*
<span class="hljs-keyword">import</span> kotlin.system.measureTimeMillis

<span class="hljs-comment">// æ•°æ®ç±»</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> email: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Post</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> userId: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> title: String, <span class="hljs-keyword">val</span> content: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfile</span>(<span class="hljs-keyword">val</span> user: User, <span class="hljs-keyword">val</span> posts: List&lt;Post&gt;, <span class="hljs-keyword">val</span> friends: List&lt;User&gt;)

<span class="hljs-comment">// æ¨¡æ‹Ÿè¿œç¨‹æ•°æ®æº</span>
<span class="hljs-keyword">object</span> UserRepository {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUser</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: User {
        delay(<span class="hljs-number">500L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
        <span class="hljs-keyword">return</span> User(id, <span class="hljs-string">"ç”¨æˆ·<span class="hljs-variable">$id</span>"</span>, <span class="hljs-string">"user<span class="hljs-variable">$id</span>@example.com"</span>)
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserPosts</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: List&lt;Post&gt; {
        delay(<span class="hljs-number">300L</span>)
        <span class="hljs-keyword">return</span> listOf(
            Post(<span class="hljs-number">1</span>, userId, <span class="hljs-string">"æ ‡é¢˜1"</span>, <span class="hljs-string">"å†…å®¹1"</span>),
            Post(<span class="hljs-number">2</span>, userId, <span class="hljs-string">"æ ‡é¢˜2"</span>, <span class="hljs-string">"å†…å®¹2"</span>)
        )
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserFriends</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: List&lt;User&gt; {
        delay(<span class="hljs-number">400L</span>)
        <span class="hljs-keyword">return</span> listOf(
            User(userId + <span class="hljs-number">1</span>, <span class="hljs-string">"æœ‹å‹1"</span>, <span class="hljs-string">"friend1@example.com"</span>),
            User(userId + <span class="hljs-number">2</span>, <span class="hljs-string">"æœ‹å‹2"</span>, <span class="hljs-string">"friend2@example.com"</span>)
        )
    }
}

<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProfile</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: UserProfile = coroutineScope {
        <span class="hljs-keyword">val</span> userDeferred = async { UserRepository.getUser(userId) }
        <span class="hljs-keyword">val</span> postsDeferred = async { UserRepository.getUserPosts(userId) }
        <span class="hljs-keyword">val</span> friendsDeferred = async { UserRepository.getUserFriends(userId) }
        
        UserProfile(
            user = userDeferred.await(),
            posts = postsDeferred.await(),
            friends = friendsDeferred.await()
        )
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ Flow å®ç°å®æ—¶æ›´æ–°</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProfileStream</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;UserProfile&gt; = flow {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">val</span> profile = getUserProfile(userId)
            emit(profile)
            delay(<span class="hljs-number">5000L</span>) <span class="hljs-comment">// æ¯5ç§’æ›´æ–°ä¸€æ¬¡</span>
        }
    }
}

<span class="hljs-comment">// UI å±‚ï¼ˆæ¨¡æ‹Ÿï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> userService = UserService()
    
    println(<span class="hljs-string">"=== è·å–ç”¨æˆ·èµ„æ–™ ==="</span>)
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> profile = userService.getUserProfile(<span class="hljs-number">1</span>)
        println(<span class="hljs-string">"ç”¨æˆ·: <span class="hljs-subst">${profile.user.name}</span>"</span>)
        println(<span class="hljs-string">"å¸–å­æ•°é‡: <span class="hljs-subst">${profile.posts.size}</span>"</span>)
        println(<span class="hljs-string">"å¥½å‹æ•°é‡: <span class="hljs-subst">${profile.friends.size}</span>"</span>)
    }
    println(<span class="hljs-string">"è€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>)
    
    println(<span class="hljs-string">"\n=== å®æ—¶æ•°æ®æµ ==="</span>)
    <span class="hljs-comment">// æ¨¡æ‹Ÿå®æ—¶æ•°æ®æµï¼ˆåªæ”¶é›†3æ¬¡ï¼‰</span>
    userService.getUserProfileStream(<span class="hljs-number">1</span>)
        .take(<span class="hljs-number">3</span>) <span class="hljs-comment">// åªå–3ä¸ªå€¼</span>
        .collect { profile -&gt;
            println(<span class="hljs-string">"å®æ—¶æ›´æ–°: <span class="hljs-subst">${profile.user.name}</span> - å¸–å­: <span class="hljs-subst">${profile.posts.size}</span>"</span>)
        }
}
</code></pre>
<h4 data-id="heading-9"><strong>ä¸‰åã€å¼‚å¸¸å¤„ç†ä¸è¶…æ—¶æ§åˆ¶</strong></h4>
<pre><code class="hljs language-scss" lang="scss">import kotlinx<span class="hljs-selector-class">.coroutines</span>.*

fun <span class="hljs-selector-tag">main</span>() = runBlocking {
    <span class="hljs-comment">// 1. åŸºæœ¬çš„å¼‚å¸¸å¤„ç†</span>
    val job = launch {
        try {
            <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>L)
            throw <span class="hljs-built_in">RuntimeException</span>("æµ‹è¯•å¼‚å¸¸")
        } catch (e: Exception) {
            <span class="hljs-built_in">println</span>("æ•è·å¼‚å¸¸: ${e.message}")
        }
    }
    job<span class="hljs-selector-class">.join</span>()
    
    <span class="hljs-comment">// 2. åç¨‹å¼‚å¸¸å¤„ç†å™¨</span>
    val handler = CoroutineExceptionHandler { _, exception -&gt;
        <span class="hljs-built_in">println</span>("åç¨‹å¼‚å¸¸å¤„ç†å™¨æ•è·: ${exception.message}")
    }
    
    val job2 = <span class="hljs-built_in">launch</span>(handler) {
        throw <span class="hljs-built_in">RuntimeException</span>("è¢«å¤„ç†å™¨æ•è·çš„å¼‚å¸¸")
    }
    job2<span class="hljs-selector-class">.join</span>()
    
    <span class="hljs-comment">// 3. è¶…æ—¶æ§åˆ¶</span>
    try {
        <span class="hljs-built_in">withTimeout</span>(<span class="hljs-number">1300</span>L) {
            repeat(<span class="hljs-number">1000</span>) { <span class="hljs-selector-tag">i</span> -&gt;
                <span class="hljs-built_in">println</span>("ä»»åŠ¡ $i")
                <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>L)
            }
        }
    } catch (e: TimeoutCancellationException) {
        <span class="hljs-built_in">println</span>("ä»»åŠ¡è¶…æ—¶")
    }
    
    <span class="hljs-comment">// 4. è¶…æ—¶è¿”å›é»˜è®¤å€¼</span>
    val result = <span class="hljs-built_in">withTimeoutOrNull</span>(<span class="hljs-number">1300</span>L) {
        <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>L)
        "æˆåŠŸç»“æœ"
    } ?: <span class="hljs-string">"è¶…æ—¶é»˜è®¤å€¼"</span>
    
    <span class="hljs-built_in">println</span>(<span class="hljs-string">"ç»“æœ: $result"</span>)
}
</code></pre>
<h4 data-id="heading-10"><strong>ä¸‰åä¸€ã€é«˜çº§æ¨¡å¼ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.channels.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> CoroutineScope.<span class="hljs-title">produceUsers</span><span class="hljs-params">()</span></span> = produce {
    <span class="hljs-keyword">var</span> id = <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        send(User(id, <span class="hljs-string">"ç”¨æˆ·<span class="hljs-variable">$id</span>"</span>, <span class="hljs-string">"user<span class="hljs-variable">$id</span>@example.com"</span>))
        delay(<span class="hljs-number">200L</span>)
        id++
        <span class="hljs-keyword">if</span> (id &gt; <span class="hljs-number">5</span>) <span class="hljs-keyword">break</span> <span class="hljs-comment">// åªç”Ÿäº§5ä¸ªç”¨æˆ·</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> CoroutineScope.<span class="hljs-title">processUser</span><span class="hljs-params">(userChannel: <span class="hljs-type">ReceiveChannel</span>&lt;<span class="hljs-type">User</span>&gt;)</span></span> = produce {
    <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> userChannel) {
        delay(<span class="hljs-number">100L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
        send(<span class="hljs-string">"å·²å¤„ç†: <span class="hljs-subst">${user.name}</span>"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> userProducer = produceUsers()
    <span class="hljs-keyword">val</span> processor = processUser(userProducer)
    
    <span class="hljs-comment">// æ¶ˆè´¹å¤„ç†ç»“æœ</span>
    <span class="hljs-keyword">for</span> (result <span class="hljs-keyword">in</span> processor) {
        println(result)
    }
    
    println(<span class="hljs-string">"å¤„ç†å®Œæˆ"</span>)
}
</code></pre>
<h4 data-id="heading-11"><strong>ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘</strong></h4>
<p>ä½ ç°åœ¨å·²ç»æŒæ¡äº† Kotlin åç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼æ¥ä¸‹æ¥å¯ä»¥æ¢ç´¢ï¼š</p>
<ol>
<li><strong>Flow é«˜çº§æ“ä½œ</strong>ï¼š<code>combine</code>ã€<code>zip</code>ã€<code>flatMapLatest</code>ç­‰æ“ä½œç¬¦</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨Â <code>StateFlow</code>å’ŒÂ <code>SharedFlow</code></li>
<li><strong>æµ‹è¯•åç¨‹</strong>ï¼šä½¿ç”¨Â <code>TestCoroutineDispatcher</code>å’ŒÂ <code>runTest</code></li>
<li><strong>Android ä¸Šçš„åç¨‹</strong>ï¼šä¸ ViewModelã€Lifecycle é›†æˆ</li>
<li><strong>æœåŠ¡ç«¯åç¨‹</strong>ï¼šKtor æ¡†æ¶çš„ä½¿ç”¨</li>
</ol>
<p>åç¨‹æ˜¯ Kotlin ç”Ÿæ€ä¸­æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°†å½»åº•æ”¹å˜ä½ å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ã€‚å°è¯•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›æ¨¡å¼ï¼Œä½ ä¼šå‘ç°ä»£ç å˜å¾—æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 10ï¼š08. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-å…³äºæˆ‘é¡µé¢å¼€å‘]]></title>    <link>https://juejin.cn/post/7572004684178358326</link>    <guid>https://juejin.cn/post/7572004684178358326</guid>    <pubDate>2025-11-13T09:17:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572004684178358326" data-draft-id="7571808096936919081" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 10ï¼š08. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-å…³äºæˆ‘é¡µé¢å¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-13T09:17:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 10ï¼š08. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-å…³äºæˆ‘é¡µé¢å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:17:38.000Z" title="Thu Nov 13 2025 09:17:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5056bca77be34136a2fa1fc117528418~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=3Rcu7m98lM6FTqD0mK3menEz0oA%3D" alt="PixPin_2025-11-13_17-12-30.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨ä¸ªäººåšå®¢é¡¹ç›®ä¸­ï¼Œ"å…³äºæˆ‘"é¡µé¢æ˜¯è®¿å®¢äº†è§£åšä¸»çš„é‡è¦çª—å£ã€‚ä¸€ä¸ªè®¾è®¡åˆç†ã€å†…å®¹ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ä¸ä»…èƒ½å±•ç¤ºä¸ªäººä¸“ä¸šèƒ½åŠ›ï¼Œè¿˜èƒ½å¢åŠ åšå®¢çš„äº²å’ŒåŠ›å’Œå¯ä¿¡åº¦ã€‚å½“ç„¶ä½ å¯ä»¥å®Œå…¨ <code>DIY</code> è¿™ä¸ªæ¨¡å—ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å‚è€ƒæˆ‘çš„è®¾è®¡ï¼Œè¿™ä¸ªé¡µé¢ä¸»è¦åŒ…å«ä¿¡æ¯å¡ç‰‡ã€ä¸ªäººç®€ä»‹ã€æŠ€æœ¯æ ˆã€å·¥ä½œç»å†å’Œæ•™è‚²ç»å†ç­‰æ¨¡å—ã€‚</p>
<p>è¿™ä¸ªæ˜¯æˆ‘çš„ç¤ºä¾‹ç«™ç‚¹ï¼Œåœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘ç›®å‰çš„è¿›åº¦ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.csyblog.cn%2F" target="_blank" title="https://www.csyblog.cn/" ref="nofollow noopener noreferrer">www.csyblog.cn/</a></p>
<h2 data-id="heading-1">äºŒã€ä¿¡æ¯å¡ç‰‡</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d36b17996cce434fa3af663b698900fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=FENXJuLz3jt3xYRRfX1CSyDFcEs%3D" alt="image.png" loading="lazy"/></p>
<p>å®ç°æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€äº›åŸºç¡€çš„å¸ƒå±€å’Œç»†èŠ‚æ ·å¼è°ƒæ•´ï¼Œå¦‚æœå®ç°æ¯”è¾ƒæ‰‹ç”Ÿï¼Œé€šè¿‡å’¨è¯¢<code>AI</code>ä¹Ÿå¾ˆå®¹æ˜“å®Œæˆã€‚</p>
<p>è¿™ä¸ªæ¨¡å—ä¸»è¦æ˜¯å±•ç¤ºåšä¸»å¤´åƒã€åŸºæœ¬ä¿¡æ¯å’Œç¤¾äº¤é“¾æ¥ã€‚</p>
<blockquote>
<p>å¦‚æœéœ€è¦æºç å¯ä»¥é€šè¿‡è¿™é‡Œçš„è”ç³»æ–¹å¼è”ç³»æˆ‘ï¼Œæˆ‘ä¼šç»™ä½ å½“å‰æœ€æ–°çš„ä»£ç ã€‚å› ä¸ºè¿˜ä¸å¤Ÿå®Œå–„ï¼Œæ‰€ä»¥æš‚æ—¶ä¸å¼€æºã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‰ã€ä¸ªäººç®€ä»‹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/177893abcc8549cf8c00da86f20c07df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=TnlHkfb4UpHnOtoeRUm3t8vI2I8%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œå…¶å®å°±æ˜¯ä¸ªç®€çŸ­çš„è‡ªæˆ‘ä»‹ç»ã€‚</p>
<h2 data-id="heading-3">å››ã€æŠ€æœ¯æ ˆ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e65a44d240c944739749a71d20a2f85a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=enG9KRkB2gS4UA%2FSzzmDlH%2F4Lmw%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ªæ¨¡å—ä¸»è¦ä½œç”¨å°±æ˜¯ï¼Œå±•ç¤ºä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯æ ˆï¼ŒçŸ¥é“çš„ï¼Œäº†è§£çš„ä¸€è‚¡è„‘å¾€ä¸Šå †å°±å¥½äº†ã€‚</p>
<h2 data-id="heading-4">äº”ã€å·¥ä½œç»å†&amp;æ•™è‚²ç»å†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f871f56eaad54111b2150b359a1d9081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=dH5LBIZ9RPWUs2%2BFn8wPRQp59Es%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘å»ºè®®è¦ä¹ˆå°±åˆ«å†™ï¼Œè¦å†™å°±å†™çœŸå®çš„ï¼Œè¿™æ˜¯äººä¸äººæœ€åŸºæœ¬çš„ä¿¡ä»»ï¼Œæ²¡å¿…è¦æ‰“è‚¿è„¸å……èƒ–å­ï¼Œæœæ’°ä¸€äº›åä¸½çš„å±¥å†å‡ºæ¥ï¼Œåˆ°æ—¶å€™ç»ä¸èµ·è€ƒéªŒï¼Œä¹Ÿæ˜¯æ¬çŸ³å¤´ç ¸è‡ªå·±çš„è„šã€‚</p>
<h2 data-id="heading-5">å…­ã€é¦–é¡µä¿®æ”¹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/440ef09935ca4f03b523022b808bd875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763630277&amp;x-signature=s7Nwv4rg3GjjrDRQKz6kR2Dvte4%3D" alt="PixPin_2025-11-13_17-06-07.gif" loading="lazy"/></p>
<p>å› ä¸ºå…³äºæˆ‘é¡µé¢æˆ‘å†™äº†å·¥ä½œç»éªŒä¸æ•™è‚²èƒŒæ™¯ï¼Œè¿™å’Œæˆ‘ä¹‹å‰é¦–é¡µå±•ç¤ºçš„æœ‰é‡å¤ï¼Œæ‰€ä»¥æˆ‘æ‰¾äº†ä¸ªç‚«é…·çš„æ ‡ç­¾äº‘ç»„ä»¶æ”¾è¿™é‡Œã€‚</p>
<h2 data-id="heading-6">ä¸ƒã€æ€»ç»“</h2>
<p>è¿™ä¸ªé¡µé¢æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯è¦ä»0åˆ°1åšå‡ºæ¥ï¼Œè¿˜æ˜¯èŠ±äº†æˆ‘ä¸å°‘æ—¶é—´çš„ã€‚æ‰¾å›¾æ ‡ï¼Œè°ƒæ ·å¼ï¼Œç—›å¹¶å¿«ä¹ç€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±è¦è¿›å…¥çœŸæ­£çš„é‡å¤´æˆäº†ï¼Œåšå®¢æ¨¡å—çš„å¼€å‘ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Golang æ„å»ºç½‘ç»œæ¼æ´æ‰«æå™¨]]></title>    <link>https://juejin.cn/post/7571753301899182120</link>    <guid>https://juejin.cn/post/7571753301899182120</guid>    <pubDate>2025-11-13T08:47:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571753301899182120" data-draft-id="7571815997067558952" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Golang æ„å»ºç½‘ç»œæ¼æ´æ‰«æå™¨"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-11-13T08:47:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Golang æ„å»ºç½‘ç»œæ¼æ´æ‰«æå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:47:46.000Z" title="Thu Nov 13 2025 08:47:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬æ–‡å®Œæ•´ä»‹ç»äº†å¦‚ä½•åŸºäº Golang ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªå®Œå–„çš„ç½‘ç»œæ¼æ´æ‰«æå™¨ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Fbuilding-a-network-vulnerability-scanner-with-go" title="https://www.sitepoint.com/building-a-network-vulnerability-scanner-with-go" target="_blank" ref="nofollow noopener noreferrer">Building a Network Vulnerability Scanner with Go</a></em></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bf49b7179b94dbeb43509caad6fd7d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763628466&amp;x-signature=EzA9Y%2FliENriQ%2FqWo58Exa%2FmHtc%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡å°†ç”¨ Go è¯­è¨€åˆ›å»ºä¸€ä¸ªç®€å•ä¸”ç›¸å½“å¯é çš„ç½‘ç»œæ¼æ´æ‰«æå™¨ã€‚Go è¯­è¨€éå¸¸é€‚åˆç½‘ç»œç¼–ç¨‹ï¼Œå®ƒåœ¨è®¾è®¡æ—¶å°±è€ƒè™‘åˆ°äº†å¹¶å‘æ€§ï¼Œå¹¶ä¸”æ‹¥æœ‰å‡ºè‰²çš„æ ‡å‡†åº“ã€‚</p>
<h2 data-id="heading-0">1. é¡¹ç›®è®¾ç½®</h2>
<h5 data-id="heading-1">åˆ›å»ºæ¼æ´æ‰«æå™¨</h5>
<p>æˆ‘ä»¬æƒ³è¦å¼€å‘ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè¯¥å·¥å…·èƒ½å¤Ÿæ‰«æä¸»æœºç½‘ç»œã€æŸ¥æ‰¾å¼€æ”¾ç«¯å£ã€è¯†åˆ«è¿è¡Œçš„æœåŠ¡å¹¶å‘ç°æ½œåœ¨æ¼æ´ã€‚è¿™ä¸ªæ‰«æå™¨ä¸€å¼€å§‹ä¼šéå¸¸ç®€å•ï¼Œä½†éšç€é€æ­¥æ·»åŠ åŠŸèƒ½ï¼Œå…¶èƒ½åŠ›ä¼šä¸æ–­å¢å¼ºã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Go é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> goscan
<span class="hljs-built_in">cd</span> goscan
go mod init github.com/yourusername/goscan
</code></pre>
<p>è¿™å°†ä¸ºé¡¹ç›®åˆå§‹åŒ–æ–°çš„Goæ¨¡å—ï¼Œå¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–é¡¹ã€‚</p>
<h5 data-id="heading-2">é…ç½®åŒ…å’Œç¯å¢ƒ</h5>
<p>æ‰«æå™¨å°†åˆ©ç”¨è‹¥å¹² Go åŒ…ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"os"</span>
    <span class="hljs-string">"strconv"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"GoScan - Network Vulnerability Scanner"</span>)
}
</code></pre>
<p>è¿™åªæ˜¯åˆå§‹è®¾ç½®ï¼Œä½†å¯¹äºåˆå§‹åŠŸèƒ½æ¥è¯´ï¼Œå·²ç»è¶³å¤Ÿäº†ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šå¯¼å…¥å†…å®¹ã€‚åƒ <code>net</code> è¿™æ ·çš„æ ‡å‡†åº“åŒ…å°†è´Ÿè´£å¤„ç†å¤§éƒ¨åˆ†ç½‘ç»œç›¸å…³æ“ä½œï¼Œè€Œ <code>sync</code> åˆ™ä¼šè´Ÿè´£å¹¶å‘å¤„ç†ç­‰ã€‚</p>
<h5 data-id="heading-3">ç½‘ç»œæ‰«æçš„ä¼¦ç†è€ƒé‡ä¸é£é™©</h5>
<p>åœ¨å¼€å§‹å®ç°ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ¢è®¨ä¸€ä¸‹ä¸ç½‘ç»œæ‰«æç›¸å…³çš„ä¼¦ç†é—®é¢˜ã€‚åœ¨è®¸å¤šåœ°åŒºï¼Œæœªç»æˆæƒçš„ç½‘ç»œæ‰«ææ˜¯è¿æ³•çš„ï¼Œä¼šè¢«è§†ä¸ºå‘åŠ¨ç½‘ç»œæ”»å‡»çš„ä¸€ç§æ‰‹æ®µã€‚å› æ­¤ï¼Œå¿…é¡»å§‹ç»ˆéµå®ˆä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li><strong>è®¸å¯</strong>ï¼šä»…å¯¹æ‹¥æœ‰æ‰€æœ‰æƒæˆ–å·²è·å¾—æ˜ç¡®è®¸å¯è¿›è¡Œæ‰«æçš„ä¸´æ—¶ç½‘ç»œå’Œç³»ç»Ÿè¿›è¡Œæ‰«æã€‚</li>
<li><strong>èŒƒå›´</strong>ï¼šä¸ºæ‰«æè®¾å®šæ˜ç¡®çš„èŒƒå›´ï¼Œå¹¶ä¸è¦è¶…å‡ºè¯¥èŒƒå›´ã€‚</li>
<li><strong>æ—¶é—´</strong>ï¼šä¸è¦è¿›è¡Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸­æ–­æˆ–å¼•å‘å®‰å…¨è­¦æŠ¥çš„è¿‡åº¦æ‰«æã€‚</li>
<li><strong>æŠ«éœ²</strong>ï¼šå¦‚æœå‘ç°æ¼æ´ï¼Œè¯·è´Ÿè´£ä»»çš„å°†å…¶æŠ¥å‘Šç»™ç›¸åº”çš„ç³»ç»Ÿæ‰€æœ‰è€…ã€‚</li>
<li><strong>æ³•å¾‹åˆè§„</strong>ï¼šäº†è§£å¹¶éµå®ˆæœ‰å…³ç½‘ç»œæ‰«æçš„å½“åœ°æ³•å¾‹ã€‚</li>
</ul>
<p>æ‰«æå·¥å…·çš„ä¸å½“ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´æ³•å¾‹è¯‰è®¼ã€ç³»ç»ŸæŸåæˆ–æ„å¤–æœåŠ¡ä¸­æ–­ã€‚æˆ‘ä»¬çš„æ‰«æå™¨å°†åŒ…å«è¯¸å¦‚é€Ÿç‡é™åˆ¶ç­‰é˜²æŠ¤æªæ–½ï¼Œä½†æœ€ç»ˆè´£ä»»åœ¨äºç”¨æˆ·ä»¥åˆä¹é“å¾·çš„æ–¹å¼ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-4">2. ç®€å•ç«¯å£æ‰«æå™¨</h2>
<p>æ¼æ´è¯„ä¼°åŸºäºç«¯å£æ‰«æã€‚æ¯ä¸ªå¼€æ”¾ç«¯å£æ‰€æä¾›çš„æ½œåœ¨æ˜“å—æ”»å‡»çš„æœåŠ¡ä¿¡æ¯æ­£æ˜¯æˆ‘ä»¬æ‰€è¦æŸ¥æ‰¾çš„å†…å®¹ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ Go è¯­è¨€ç¼–å†™ä¸€ä¸ªç®€å•çš„ç«¯å£æ‰«æå™¨ã€‚</p>
<h5 data-id="heading-5">ä½çº§ç«¯å£æ‰«æå®ç°</h5>
<p>ç«¯å£æ‰«æï¼šå°è¯•ä¸ç›®æ ‡ä¸»æœºä¸Šçš„æ¯ä¸€ä¸ªå¯èƒ½çš„ç«¯å£å»ºç«‹è¿æ¥ã€‚å¦‚æœè¿æ¥æˆåŠŸï¼Œåˆ™è¯¥ç«¯å£æ˜¯å¼€æ”¾çš„ï¼›å¦‚æœè¿æ¥å¤±è´¥ï¼Œåˆ™è¯¥ç«¯å£æ˜¯å…³é—­çš„æˆ–è¢«è¿‡æ»¤çš„ã€‚å¯¹äºæ­¤åŠŸèƒ½ï¼ŒGo çš„ <code>net</code> åŒ…å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†æ”¯æŒã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è®¾è®¡çš„ä¸€ç§ç®€å•çš„ç«¯å£æ‰«æå™¨çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPort</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> <span class="hljs-type">bool</span> {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    conn.Close()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    host := <span class="hljs-string">"localhost"</span> <span class="hljs-comment">// Change this to your target</span>
    timeout := time.Second * <span class="hljs-number">2</span>
    
    fmt.Printf(<span class="hljs-string">"Scanning host: %s\n"</span>, host)
    
    <span class="hljs-comment">// Scan ports 1-1024 (well-known ports)</span>
    <span class="hljs-keyword">for</span> port := <span class="hljs-number">1</span>; port &lt;= <span class="hljs-number">1024</span>; port++ {
        <span class="hljs-keyword">if</span> scanPort(host, port, timeout) {
            fmt.Printf(<span class="hljs-string">"Port %d is open\n"</span>, port)
        }
    }
    
    fmt.Println(<span class="hljs-string">"Scan complete"</span>)
}
</code></pre>
<h5 data-id="heading-6">ä½¿ç”¨ <code>net</code> åŒ…</h5>
<p>ä¸Šè¿°ä»£ç ä½¿ç”¨äº† Go è¯­è¨€çš„ <code>net</code> åŒ…ï¼Œè¯¥åŒ…æä¾›äº†ç½‘ç»œè¾“å…¥/è¾“å‡ºæ¥å£åŠç›¸å…³å‡½æ•°ã€‚é‚£ä¹ˆï¼Œä¸»è¦çš„ç»„æˆéƒ¨åˆ†éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<ul>
<li><strong>net.DialTimeout</strong>ï¼šæ­¤åŠŸèƒ½ä¼šå°è¯•åœ¨è®¾å®šçš„è¶…æ—¶æ—¶é—´å†…è¿æ¥åˆ° TCP ç½‘ç»œåœ°å€ã€‚å¦‚æœè¿æ¥æˆåŠŸï¼Œä¼šè¿”å›è¿æ¥ä¿¡æ¯ä»¥åŠä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</li>
<li><strong>è¿æ¥å¤„ç†</strong>ï¼šå¦‚æœè¿æ¥è¿‡ç¨‹é¡ºåˆ©ï¼Œæˆ‘ä»¬ä¾¿çŸ¥é“è¯¥è¿æ¥å·²æ‰“å¼€ï¼Œå¹¶ä¼šç«‹å³å…³é—­è¯¥è¿æ¥ä»¥é‡Šæ”¾èµ„æºã€‚</li>
<li><strong>è¶…æ—¶å‚æ•°</strong>ï¼šè®¾å®šè¶…æ—¶æ—¶é—´ï¼Œä»¥é¿å…åœ¨ä»»ä½•è¢«è¿‡æ»¤çš„å¼€æ”¾ç«¯å£ä¸Šé™·å…¥åƒµå±€ã€‚ä¸¤ç§’æ˜¯ä¸€ä¸ªä¸é”™çš„åˆå§‹å€¼ï¼Œä½†å¯æ ¹æ®ç½‘ç»œçŠ¶å†µè¿›è¡Œè°ƒæ•´ã€‚</li>
</ul>
<h5 data-id="heading-7">å¯¹é¦–æ¬¡æ‰«æè¿›è¡Œæµ‹è¯•</h5>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä¸»æœºä¸Šè¿è¡Œç®€å•æ‰«æå™¨ï¼Œé‚£é‡Œå¯èƒ½æœ‰ä¸€äº›æœåŠ¡æ­£åœ¨è¿è¡Œã€‚</p>
<ul>
<li>å°†ä»£ç ä¿å­˜åˆ°åä¸º <code>main.go</code> çš„æ–‡ä»¶ä¸­</li>
<li>ç”¨ <code>go run main.go</code> å‘½ä»¤è¿è¡Œ</li>
</ul>
<p>è¿™å°†æ˜¾ç¤ºå“ªäº›æœ¬åœ°ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚åœ¨æ™®é€šå¼€å‘æœºå™¨ä¸Šï¼Œå¯èƒ½ä¼šæœ‰ 80ï¼ˆHTTPï¼‰ç«¯å£ã€443ï¼ˆHTTPSï¼‰ç«¯å£ï¼Œæˆ–è€…æ ¹æ®è¿è¡Œçš„æœåŠ¡ä¸åŒï¼Œè¿˜æœ‰å…¶ä»–ä»»æ„æ•°é‡çš„æ•°æ®åº“ç«¯å£æ­£åœ¨ä½¿ç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½å¾—åˆ°çš„ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Scanning host: localhost
Port <span class="hljs-number">22</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">open</span>
Port <span class="hljs-number">80</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">open</span>
Port <span class="hljs-number">443</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">open</span>
Scan complete
</code></pre>
<p>ä½¿ç”¨è¿™ç§åŸºæœ¬çš„æ‰«æå™¨æ˜¯å¯ä»¥çš„ï¼Œä½†ä¹Ÿæœ‰ä¸å°‘æ˜æ˜¾çš„ç¼ºç‚¹ï¼š</p>
<ul>
<li><strong>é€Ÿåº¦</strong>ï¼šç”±äºæ˜¯æŒ‰é¡ºåºæ‰«æç«¯å£ï¼Œæ‰€ä»¥é€Ÿåº¦æå…¶ç¼“æ…¢ã€‚</li>
<li><strong>ä¿¡æ¯</strong>ï¼šåªæ˜¯å‘Šè¯‰æˆ‘ä»¬æŸä¸ªç«¯å£æ˜¯å¦å¼€æ”¾ï¼Œæ²¡æœ‰æœåŠ¡ä¿¡æ¯ã€‚</li>
<li><strong>è¦†ç›–èŒƒå›´æœ‰é™</strong>ï¼šåªæ‰«æå‰ 1024 ä¸ªç«¯å£ã€‚</li>
</ul>
<p>è¿™äº›é™åˆ¶ä½¿å¾—éš¾ä»¥åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨æ‰«æå™¨ã€‚</p>
<h2 data-id="heading-8">3. ä»è¿™é‡Œå¼€å§‹æ”¹è¿›ï¼šå¤šçº¿ç¨‹æ‰«æ</h2>
<h5 data-id="heading-9">ä¸ºä½•æœ€åˆçš„ç‰ˆæœ¬è¿è¡Œç¼“æ…¢</h5>
<p>ç¬¬ä¸€ä¸ªç«¯å£æ‰«æå™¨èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†å…¶è¿è¡Œé€Ÿåº¦æå…¶ç¼“æ…¢ï¼Œå‡ ä¹æ— æ³•å®é™…ä½¿ç”¨ã€‚é—®é¢˜åœ¨äºå…¶é‡‡ç”¨é¡ºåºæ‰«ææ–¹æ³• â€”â€” ä¸€æ¬¡æ‰«æä¸€ä¸ªç«¯å£ã€‚å½“ä¸€å°ä¸»æœºæœ‰å¾ˆå¤šå…³é—­/è¿‡æ»¤çš„ç«¯å£æ—¶ï¼Œä¼šåœ¨æ¯ä¸ªç«¯å£ä¸Šç­‰å¾…è¿æ¥è¶…æ—¶ï¼Œç„¶åå†è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªç«¯å£ï¼Œè¿™é€ æˆäº†æå¤§çš„æ—¶é—´æµªè´¹ã€‚</p>
<p>ä¸ºäº†å±•ç¤ºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åŸºæœ¬æ‰«æå™¨çš„è¿è¡Œæ—¶é—´ï¼š</p>
<ul>
<li>å¯¹äºæ‰«æå‰ 1024 ä¸ªç«¯å£çš„æƒ…å†µï¼Œå¦‚æœè®¾ç½® 2 ç§’çš„è¶…æ—¶æ—¶é—´ï¼Œæœ€é•¿æ—¶é—´å°†è¾¾ 2048 ç§’ï¼ˆè¶…è¿‡ 34 åˆ†é’Ÿï¼‰ã€‚</li>
<li>ä½†å³ä¾¿å¯¹é‚£äº›å·²å…³é—­çš„ç«¯å£çš„è¿æ¥ä¹Ÿä¼šç«‹å³å¤±è´¥ï¼Œè¿™ç§æ–¹æ³•ç”±äºç½‘ç»œå»¶è¿Ÿçš„åŸå› ä¹Ÿæ˜¯æ•ˆç‡ä½ä¸‹ã€‚</li>
</ul>
<p>è¿™ç§é€ä¸ªç«¯å£è¿›è¡Œçš„æ‰«ææ–¹å¼æ˜¯ä»»ä½•çœŸæ­£çš„æ¼æ´æ‰«æå·¥å…·çš„ç“¶é¢ˆã€‚</p>
<h5 data-id="heading-10">æ·»åŠ çº¿ç¨‹æ”¯æŒ</h5>
<p>Go è¯­è¨€åœ¨åˆ©ç”¨åç¨‹å’Œé€šé“å®ç°å¹¶å‘æ–¹é¢è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ©ç”¨è¿™äº›ç‰¹æ€§å°è¯•åŒæ—¶æ‰«æå¤šä¸ªç«¯å£ï¼Œä»è€Œæ˜¾è‘—æé«˜æ€§èƒ½ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¥åˆ›å»ºå¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">type</span> Result <span class="hljs-keyword">struct</span> {
    Port  <span class="hljs-type">int</span>
    State <span class="hljs-type">bool</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPort</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> Result {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> Result{Port: port, State: <span class="hljs-literal">false</span>}
    }
    
    conn.Close()
    <span class="hljs-keyword">return</span> Result{Port: port, State: <span class="hljs-literal">true</span>}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPorts</span><span class="hljs-params">(host <span class="hljs-type">string</span>, start, end <span class="hljs-type">int</span>, timeout time.Duration)</span></span> []Result {
    <span class="hljs-keyword">var</span> results []Result
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    <span class="hljs-comment">// Create a buffered channel to collect results</span>
    resultChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Result, end-start+<span class="hljs-number">1</span>)
    
    <span class="hljs-comment">// Create a semaphore to limit concurrent goroutines</span>
    <span class="hljs-comment">// This prevents us from opening too many connections at once</span>
    semaphore := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, <span class="hljs-number">100</span>) <span class="hljs-comment">// Limit to 100 concurrent scans</span>
    
    <span class="hljs-comment">// Launch goroutines for each port</span>
    <span class="hljs-keyword">for</span> port := start; port &lt;= end; port++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(p <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            
            <span class="hljs-comment">// Acquire semaphore</span>
            semaphore &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { &lt;-semaphore }() <span class="hljs-comment">// Release semaphore</span>
            
            result := scanPort(host, p, timeout)
            resultChan &lt;- result
        }(port)
    }
    
    <span class="hljs-comment">// Close channel when all goroutines complete</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultChan)
    }()
    
    <span class="hljs-comment">// Collect results from channel</span>
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> resultChan {
        <span class="hljs-keyword">if</span> result.State {
            results = <span class="hljs-built_in">append</span>(results, result)
        }
    }
    
    <span class="hljs-keyword">return</span> results
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    host := <span class="hljs-string">"localhost"</span> <span class="hljs-comment">// Change this to your target</span>
    startPort := <span class="hljs-number">1</span>
    endPort := <span class="hljs-number">1024</span>
    timeout := time.Millisecond * <span class="hljs-number">500</span> 
    
    fmt.Printf(<span class="hljs-string">"Scanning %s from port %d to %d\n"</span>, host, startPort, endPort)
    startTime := time.Now()
    
    results := scanPorts(host, startPort, endPort, timeout)
    
    elapsed := time.Since(startTime)
    
    fmt.Printf(<span class="hljs-string">"\nScan completed in %s\n"</span>, elapsed)
    fmt.Printf(<span class="hljs-string">"Found %d open ports:\n"</span>, <span class="hljs-built_in">len</span>(results))
    
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        fmt.Printf(<span class="hljs-string">"Port %d is open\n"</span>, result.Port)
    }
}
</code></pre>
<h5 data-id="heading-11">å¤šçº¿ç¨‹ç»“æœ</h5>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ”¹è¿›åæ‰«æå™¨çš„æ€§èƒ½æå‡ä»¥åŠå¹¶å‘æœºåˆ¶ï¼š</p>
<ul>
<li><strong>åç¨‹</strong>ï¼šä¸ºäº†ä½¿æ‰«æè¿‡ç¨‹é«˜æ•ˆï¼Œæˆ‘ä»¬ä¼šä¸ºéœ€è¦æ‰«æçš„æ¯ä¸ªç«¯å£å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œè¿™æ ·å½“æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸ªç«¯å£æ—¶ï¼Œå°±å¯ä»¥åŒæ—¶æ£€æŸ¥å…¶ä»–ç«¯å£ã€‚</li>
<li><strong>ç­‰å¾…ç»„</strong>ï¼šåŒæ­¥çš„ç­‰å¾…ç»„  å½“æˆ‘ä»¬å¯åŠ¨åç¨‹æ—¶ï¼Œå¸Œæœ›ç­‰å¾…å®ƒä»¬å®Œæˆã€‚ç­‰å¾…ç»„æœ‰åŠ©äºè·Ÿè¸ªæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„åç¨‹ï¼Œå¹¶ç­‰å¾…å®ƒä»¬å®Œæˆã€‚</li>
<li><strong>ç»“æœé€šé“</strong>ï¼šæˆ‘ä»¬ä¸ºæ‰€æœ‰åç¨‹çš„ç»“æœåˆ›å»ºäº†ä¸€ä¸ªç¼“å†²é€šé“ã€‚</li>
<li><strong>ä¿¡å·é‡æ¨¡å¼</strong>ï¼šä½¿ç”¨ä¿¡å·é‡æ¥é™åˆ¶å¹¶è¡Œè¿›è¡Œçš„æ‰«ææ•°é‡,é€šè¿‡é€šé“æ¥å®ç°,é˜²æ­¢æˆ‘ä»¬å› æ‰“å¼€è¿‡å¤šè¿æ¥è€Œä½¿ç›®æ ‡ç³»ç»Ÿç”šè‡³è‡ªèº«æœºå™¨ä¸å ªé‡è´Ÿã€‚</li>
<li><strong>ç¼©çŸ­è¶…æ—¶æ—¶é—´</strong>ï¼šç”±äºä»¥å¹¶è¡Œæ–¹å¼è¿è¡Œè®¸å¤šæ­¤ç±»æ‰«æï¼Œæ‰€ä»¥ä½¿ç”¨è¾ƒçŸ­çš„è¶…æ—¶æ—¶é—´ã€‚</li>
</ul>
<p>æ€§èƒ½å·®è·å¾ˆå¤§ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œå¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…æ‰«æ 1024 ä¸ªç«¯å£ï¼Œè€Œä¸”è‚¯å®šä¸ä¼šè¶…è¿‡åŠå°æ—¶ã€‚</p>
<p>ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-python" lang="python">Scanning localhost <span class="hljs-keyword">from</span> port <span class="hljs-number">1</span> to <span class="hljs-number">1024</span>
Scan completed <span class="hljs-keyword">in</span> <span class="hljs-number">3.2</span>s
Found <span class="hljs-number">3</span> <span class="hljs-built_in">open</span> ports:
Port <span class="hljs-number">22</span> <span class="hljs-keyword">is</span> <span class="hljs-built_in">open</span>
Port <span class="hljs-number">80</span> <span class="hljs-keyword">is</span> <span class="hljs-built_in">open</span>
Port <span class="hljs-number">443</span> <span class="hljs-keyword">is</span> <span class="hljs-built_in">open</span>
</code></pre>
<p>è¿™ç§å¤šçº¿ç¨‹æ–¹æ³•å¯¹äºè¾ƒå¤§çš„ç«¯å£èŒƒå›´å’Œå¤šä¸ªä¸»æœºæ¥è¯´å…·æœ‰æå¥½çš„æ‰©å±•æ€§ã€‚ä¿¡å·é‡æ¨¡å¼ç¡®ä¿å³ä¾¿è¦æ‰«æä¸Šåƒä¸ªç«¯å£ï¼Œä¹Ÿä¸ä¼šè€—å°½ç³»ç»Ÿèµ„æºã€‚</p>
<h2 data-id="heading-12">4. æ·»åŠ æœåŠ¡æ£€æµ‹</h2>
<p>æ—¢ç„¶å·²ç»æœ‰äº†ä¸€ä¸ªå¿«é€Ÿã€é«˜æ•ˆçš„ç«¯å£æ‰«æå™¨ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤å°±æ˜¯äº†è§£é‚£äº›å¼€æ”¾ç«¯å£ä¸Šè¿è¡Œçš„æ˜¯å“ªäº›æœåŠ¡ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œæœåŠ¡æŒ‡çº¹è¯†åˆ«â€æˆ–â€œæ ‡å¿—æŠ“å–â€ï¼Œæ˜¯ä¸€ä¸ªè¿æ¥åˆ°å¼€æ”¾ç«¯å£å¹¶æ£€æŸ¥è¿”å›æ•°æ®çš„è¿‡ç¨‹ã€‚</p>
<h5 data-id="heading-13">æœåŠ¡æ——æ ‡æŠ“å–ï¼ˆBanner Grabbingï¼‰å®ç°</h5>
<p>æœåŠ¡æ——æ ‡æŠ“å–æŒ‡çš„æ˜¯å½“æˆ‘ä»¬æ‰“å¼€æœåŠ¡å¹¶è¯»å–å‘é€ç»™æˆ‘ä»¬çš„å“åº”ï¼ˆå³æ——æ ‡ä¿¡æ¯ï¼‰æ—¶çš„æ“ä½œã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„ç¡®è®¤æœåŠ¡æ˜¯å¦è¿è¡Œçš„æ–¹æ³•ï¼Œè®¸å¤šæœåŠ¡éƒ½ä¼šåœ¨æ——æ ‡ä¸­æ ‡è¯†è‡ªèº«ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ‰«æå™¨ä¸­åŠ å…¥æŠ“å–æ——æ ‡çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"strings"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">type</span> ScanResult <span class="hljs-keyword">struct</span> {
    Port     <span class="hljs-type">int</span>
    State    <span class="hljs-type">bool</span>
    Service  <span class="hljs-type">string</span>
    Banner   <span class="hljs-type">string</span>
    Version  <span class="hljs-type">string</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">grabBanner</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    <span class="hljs-keyword">defer</span> conn.Close()
    
    conn.SetReadDeadline(time.Now().Add(timeout))
    
    <span class="hljs-comment">// Some services need a trigger to send data</span>
    <span class="hljs-comment">// Send a simple HTTP request for web services</span>
    <span class="hljs-keyword">if</span> port == <span class="hljs-number">80</span> || port == <span class="hljs-number">443</span> || port == <span class="hljs-number">8080</span> || port == <span class="hljs-number">8443</span> {
        fmt.Fprintf(conn, <span class="hljs-string">"HEAD / HTTP/1.0\r\n\r\n"</span>)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// For other services, just wait for the banner</span>
        <span class="hljs-comment">// Some services may require specific triggers</span>
    }
    
    <span class="hljs-comment">// Read the response</span>
    reader := bufio.NewReader(conn)
    banner, err := reader.ReadString(<span class="hljs-string">'\n'</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    
    <span class="hljs-keyword">return</span> strings.TrimSpace(banner), <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">identifyService</span><span class="hljs-params">(port <span class="hljs-type">int</span>, banner <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">string</span>) {
    commonPorts := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>{
        <span class="hljs-number">21</span>:    <span class="hljs-string">"FTP"</span>,
        <span class="hljs-number">22</span>:    <span class="hljs-string">"SSH"</span>,
        <span class="hljs-number">23</span>:    <span class="hljs-string">"Telnet"</span>,
        <span class="hljs-number">25</span>:    <span class="hljs-string">"SMTP"</span>,
        <span class="hljs-number">53</span>:    <span class="hljs-string">"DNS"</span>,
        <span class="hljs-number">80</span>:    <span class="hljs-string">"HTTP"</span>,
        <span class="hljs-number">110</span>:   <span class="hljs-string">"POP3"</span>,
        <span class="hljs-number">143</span>:   <span class="hljs-string">"IMAP"</span>,
        <span class="hljs-number">443</span>:   <span class="hljs-string">"HTTPS"</span>,
        <span class="hljs-number">3306</span>:  <span class="hljs-string">"MySQL"</span>,
        <span class="hljs-number">5432</span>:  <span class="hljs-string">"PostgreSQL"</span>,
        <span class="hljs-number">6379</span>:  <span class="hljs-string">"Redis"</span>,
        <span class="hljs-number">8080</span>:  <span class="hljs-string">"HTTP-Proxy"</span>,
        <span class="hljs-number">27017</span>: <span class="hljs-string">"MongoDB"</span>,
    }
    
    <span class="hljs-comment">// Try to identify service from common ports</span>
    service := <span class="hljs-string">"Unknown"</span>
    <span class="hljs-keyword">if</span> s, exists := commonPorts[port]; exists {
        service = s
    }
    
    version := <span class="hljs-string">"Unknown"</span>
    
    lowerBanner := strings.ToLower(banner)
    
    <span class="hljs-comment">// SSH version detection</span>
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"ssh"</span>) {
        service = <span class="hljs-string">"SSH"</span>
        parts := strings.Split(banner, <span class="hljs-string">" "</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
            version = parts[<span class="hljs-number">1</span>]
        }
    }
    
    <span class="hljs-comment">// HTTP server detection</span>
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"http"</span>) || strings.Contains(lowerBanner, <span class="hljs-string">"apache"</span>) || 
       strings.Contains(lowerBanner, <span class="hljs-string">"nginx"</span>) {
        <span class="hljs-keyword">if</span> port == <span class="hljs-number">443</span> {
            service = <span class="hljs-string">"HTTPS"</span>
        } <span class="hljs-keyword">else</span> {
            service = <span class="hljs-string">"HTTP"</span>
        }
        
        <span class="hljs-comment">// Try to find server info in format "Server: Apache/2.4.29"</span>
        <span class="hljs-keyword">if</span> strings.Contains(banner, <span class="hljs-string">"Server:"</span>) {
            parts := strings.Split(banner, <span class="hljs-string">"Server:"</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
                version = strings.TrimSpace(parts[<span class="hljs-number">1</span>])
            }
        }
    }
    
    <span class="hljs-keyword">return</span> service, version
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPort</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> ScanResult {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> ScanResult{Port: port, State: <span class="hljs-literal">false</span>}
    }
    
    conn.Close()
    
    banner, err := grabBanner(host, port, timeout)
    
    service := <span class="hljs-string">"Unknown"</span>
    version := <span class="hljs-string">"Unknown"</span>
    
    <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &amp;&amp; banner != <span class="hljs-string">""</span> {
        service, version = identifyService(port, banner)
    }
    
    <span class="hljs-keyword">return</span> ScanResult{
        Port:    port,
        State:   <span class="hljs-literal">true</span>,
        Service: service,
        Banner:  banner,
        Version: version,
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPorts</span><span class="hljs-params">(host <span class="hljs-type">string</span>, start, end <span class="hljs-type">int</span>, timeout time.Duration)</span></span> []ScanResult {
    <span class="hljs-keyword">var</span> results []ScanResult
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    resultChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> ScanResult, end-start+<span class="hljs-number">1</span>)
    
    semaphore := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, <span class="hljs-number">100</span>)
    
    <span class="hljs-keyword">for</span> port := start; port &lt;= end; port++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(p <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            
            semaphore &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { &lt;-semaphore }()
            
            result := scanPort(host, p, timeout)
            resultChan &lt;- result
        }(port)
    }
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultChan)
    }()
    
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> resultChan {
        <span class="hljs-keyword">if</span> result.State {
            results = <span class="hljs-built_in">append</span>(results, result)
        }
    }
    
    <span class="hljs-keyword">return</span> results
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    host := <span class="hljs-string">"localhost"</span>
    startPort := <span class="hljs-number">1</span>
    endPort := <span class="hljs-number">1024</span>
    timeout := time.Millisecond * <span class="hljs-number">800</span> 
    
    fmt.Printf(<span class="hljs-string">"Scanning %s from port %d to %d\n"</span>, host, startPort, endPort)
    startTime := time.Now()
    
    results := scanPorts(host, startPort, endPort, timeout)
    
    elapsed := time.Since(startTime)
    
    fmt.Printf(<span class="hljs-string">"\nScan completed in %s\n"</span>, elapsed)
    fmt.Printf(<span class="hljs-string">"Found %d open ports:\n\n"</span>, <span class="hljs-built_in">len</span>(results))
    
    fmt.Println(<span class="hljs-string">"PORT\tSERVICE\tVERSION\tBANNER"</span>)
    fmt.Println(<span class="hljs-string">"----\t-------\t-------\t------"</span>)
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        bannerPreview := <span class="hljs-string">""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result.Banner) &gt; <span class="hljs-number">30</span> {
            bannerPreview = result.Banner[:<span class="hljs-number">30</span>] + <span class="hljs-string">"..."</span>
        } <span class="hljs-keyword">else</span> {
            bannerPreview = result.Banner
        }
        
        fmt.Printf(<span class="hljs-string">"%d\t%s\t%s\t%s\n"</span>, 
            result.Port, 
            result.Service, 
            result.Version, 
            bannerPreview)
    }
}
</code></pre>
<h5 data-id="heading-14">è¯†åˆ«æ­£åœ¨è¿è¡Œçš„æœåŠ¡</h5>
<p>ä¸¤ç§ä¸»è¦çš„æœåŠ¡æ£€æµ‹ç­–ç•¥ï¼š</p>
<ul>
<li><strong>åŸºäºç«¯å£è¯†åˆ«</strong>ï¼šé€šè¿‡æ˜ å°„åˆ°å…¬å…±ç«¯å£å·ï¼ˆä¾‹å¦‚ï¼Œç«¯å£ 80 æ˜¯ HTTPï¼‰ï¼Œå¯¹æœåŠ¡æœ‰ä¸€ä¸ªå¯èƒ½çš„çŒœæµ‹ã€‚</li>
<li><strong>æ——æ ‡åˆ†æ</strong>ï¼šè·å–æ——æ ‡æ–‡æœ¬å¹¶æŸ¥æ‰¾æœåŠ¡æ ‡è¯†ç¬¦å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
</ul>
<p>ç¬¬ä¸€ä¸ªå‡½æ•° <code>grabBanner</code> æ—¨åœ¨ä»æœåŠ¡ä¸­è·å–ç¬¬ä¸€ä¸ªå“åº”ã€‚æœ‰äº›æœåŠ¡ï¼ˆå¦‚ HTTPï¼‰è¦æ±‚å‘é€è¯·æ±‚å¹¶æ¥æ”¶å›å¤ï¼Œä¸ºæ­¤æˆ‘ä»¬ä¼šæ·»åŠ ç‰¹å®šæ¡ˆä¾‹æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p>
<h5 data-id="heading-15">åŸºæœ¬ç‰ˆæœ¬æ£€æµ‹</h5>
<p>ç‰ˆæœ¬æ£€æµ‹å¯¹äºæ¼æ´çš„è¯†åˆ«è‡³å…³é‡è¦ã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œæ‰«æå™¨ä¼šè§£ææœåŠ¡æ——æ ‡ä»¥è·å–ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>SSH</strong>ï¼šé€šå¸¸ä¼šä»¥ <code>SSH-2.0-OpenSSH_7.4</code> è¿™æ ·çš„å½¢å¼æä¾›ç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
<li><strong>HTTP æœåŠ¡å™¨</strong>ï¼šé€šå¸¸ä¼šåœ¨å“åº”å¤´ä¸­ï¼ˆå¦‚ <code>Server: Apache/2.4.29</code>ï¼‰è¿”å›å…¶ç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
<li><strong>æ•°æ®åº“æœåŠ¡å™¨</strong>ï¼šå¯èƒ½ä¼šåœ¨å…¶æ¬¢è¿æ¶ˆæ¯ä¸­æŠ«éœ²ç‰ˆæœ¬ä¿¡æ¯ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œå¯¹äºæ¯ä¸ªå¼€æ”¾ç«¯å£ï¼Œè¾“å‡ºéƒ½ä¼šè¿”å›æ›´å¤šä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Scanning localhost <span class="hljs-keyword">from</span> port <span class="hljs-number">1</span> <span class="hljs-keyword">to</span> <span class="hljs-number">1024</span>
Scan completed <span class="hljs-keyword">in</span> <span class="hljs-number">5.4</span>s
Found <span class="hljs-number">3</span> <span class="hljs-keyword">open</span> ports:

PORT    SERVICE VERSION BANNER
<span class="hljs-comment">----    ------- ------- ------</span>
<span class="hljs-number">22</span>      SSH     <span class="hljs-number">2.0</span>     SSH<span class="hljs-number">-2.0</span><span class="hljs-operator">-</span>OpenSSH_8<span class="hljs-number">.4</span>p1 Ubuntu<span class="hljs-number">-6</span>
<span class="hljs-number">80</span>      HTTP    Apache<span class="hljs-operator">/</span><span class="hljs-number">2.4</span><span class="hljs-number">.41</span> Server: Apache<span class="hljs-operator">/</span><span class="hljs-number">2.4</span><span class="hljs-number">.41</span> (Ubuntu)
<span class="hljs-number">443</span>     HTTPS   <span class="hljs-literal">Unknown</span> Connection closed <span class="hljs-keyword">by</span> foreign...
</code></pre>
<p>è¿™ç§å¢å¼ºåçš„ä¿¡æ¯å¯¹äºæ¼æ´è¯„ä¼°è€Œè¨€è¦å…·æœ‰æ›´é«˜çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-16">5. æ¼æ´æ£€æµ‹å®ç°</h2>
<p>æ—¢ç„¶èƒ½åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„æœåŠ¡åŠå…¶ç‰ˆæœ¬ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°é’ˆå¯¹æ¼æ´çš„æ£€æµ‹ã€‚æˆ‘ä»¬å¯¹æœåŠ¡ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œå¹¶ä¸å·²çŸ¥æ¼æ´è¿›è¡Œå¯¹æ¯”ã€‚</p>
<h5 data-id="heading-17">ç¼–å†™ç®€å•çš„æ¼æ´æµ‹è¯•</h5>
<p>æˆ‘ä»¬å°†æ ¹æ®å¸¸è§æœåŠ¡å’Œç‰ˆæœ¬ï¼ŒåŸºäºå·²çŸ¥æ¼æ´æ„å»ºæ•°æ®åº“ã€‚ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåµŒå…¥ä»£ç çš„æ¼æ´æ•°æ®åº“ï¼Œä½†åœ¨å®é™…åœºæ™¯ä¸­ï¼Œæ‰«æå™¨å¾ˆå¯èƒ½ä¼šæŸ¥è¯¢å¤–éƒ¨æ¼æ´æ•°æ®åº“ï¼ˆå¦‚ CVE æˆ– NVDï¼‰ã€‚</p>
<p>ç°åœ¨è¿›ä¸€æ­¥å®Œå–„ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿæ£€æµ‹å‡ºæ¼æ´ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"strings"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">type</span> ScanResult <span class="hljs-keyword">struct</span> {
    Port          <span class="hljs-type">int</span>
    State         <span class="hljs-type">bool</span>
    Service       <span class="hljs-type">string</span>
    Banner        <span class="hljs-type">string</span>
    Version       <span class="hljs-type">string</span>
    Vulnerabilities []Vulnerability
}

<span class="hljs-keyword">type</span> Vulnerability <span class="hljs-keyword">struct</span> {
    ID          <span class="hljs-type">string</span>
    Description <span class="hljs-type">string</span>
    Severity    <span class="hljs-type">string</span>
    Reference   <span class="hljs-type">string</span>
}

<span class="hljs-keyword">var</span> vulnerabilityDB = []<span class="hljs-keyword">struct</span> {
    Service     <span class="hljs-type">string</span>
    Version     <span class="hljs-type">string</span>
    Vulnerability Vulnerability
}{
    {
        Service: <span class="hljs-string">"SSH"</span>,
        Version: <span class="hljs-string">"OpenSSH_7.4"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2017-15906"</span>,
            Description: <span class="hljs-string">"The process_open function in sftp-server.c in OpenSSH before 7.6 does not properly prevent write operations in read-only mode"</span>,
            Severity:    <span class="hljs-string">"Medium"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2017-15906"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"HTTP"</span>,
        Version: <span class="hljs-string">"Apache/2.4.29"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2019-0211"</span>,
            Description: <span class="hljs-string">"Apache HTTP Server 2.4.17 to 2.4.38 - Local privilege escalation through mod_prefork and mod_http2"</span>,
            Severity:    <span class="hljs-string">"High"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2019-0211"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"HTTP"</span>,
        Version: <span class="hljs-string">"Apache/2.4.41"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2020-9490"</span>,
            Description: <span class="hljs-string">"A specially crafted value for the 'Cache-Digest' header can cause a heap overflow in Apache HTTP Server 2.4.0-2.4.41"</span>,
            Severity:    <span class="hljs-string">"High"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2020-9490"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"MySQL"</span>,
        Version: <span class="hljs-string">"5.7"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2020-2922"</span>,
            Description: <span class="hljs-string">"Vulnerability in MySQL Server allows unauthorized users to obtain sensitive information"</span>,
            Severity:    <span class="hljs-string">"Medium"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2020-2922"</span>,
        },
    },
    <span class="hljs-comment">// Add more known vulnerabilities here</span>
}

<span class="hljs-comment">// checkVulnerabilities checks if a service/version combination has known vulnerabilities</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">checkVulnerabilities</span><span class="hljs-params">(service, version <span class="hljs-type">string</span>)</span></span> []Vulnerability {
    <span class="hljs-keyword">var</span> vulnerabilities []Vulnerability
    
    <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> vulnerabilityDB {
        <span class="hljs-comment">// Simple matching - in a real scanner, this would be more sophisticated</span>
        <span class="hljs-keyword">if</span> vuln.Service == service &amp;&amp; strings.Contains(version, vuln.Version) {
            vulnerabilities = <span class="hljs-built_in">append</span>(vulnerabilities, vuln.Vulnerability)
        }
    }
    
    <span class="hljs-keyword">return</span> vulnerabilities
}

<span class="hljs-comment">// grabBanner attempts to read the banner from an open port</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">grabBanner</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    <span class="hljs-keyword">defer</span> conn.Close()
    
    conn.SetReadDeadline(time.Now().Add(timeout))
    

    <span class="hljs-keyword">if</span> port == <span class="hljs-number">80</span> || port == <span class="hljs-number">443</span> || port == <span class="hljs-number">8080</span> || port == <span class="hljs-number">8443</span> {
        fmt.Fprintf(conn, <span class="hljs-string">"HEAD / HTTP/1.0\r\nHost: %s\r\n\r\n"</span>, host)
    } <span class="hljs-keyword">else</span> {

    }
    
    reader := bufio.NewReader(conn)
    banner, err := reader.ReadString(<span class="hljs-string">'\n'</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    
    <span class="hljs-keyword">return</span> strings.TrimSpace(banner), <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">identifyService</span><span class="hljs-params">(port <span class="hljs-type">int</span>, banner <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">string</span>) {
    commonPorts := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>{
        <span class="hljs-number">21</span>:    <span class="hljs-string">"FTP"</span>,
        <span class="hljs-number">22</span>:    <span class="hljs-string">"SSH"</span>,
        <span class="hljs-number">23</span>:    <span class="hljs-string">"Telnet"</span>,
        <span class="hljs-number">25</span>:    <span class="hljs-string">"SMTP"</span>,
        <span class="hljs-number">53</span>:    <span class="hljs-string">"DNS"</span>,
        <span class="hljs-number">80</span>:    <span class="hljs-string">"HTTP"</span>,
        <span class="hljs-number">110</span>:   <span class="hljs-string">"POP3"</span>,
        <span class="hljs-number">143</span>:   <span class="hljs-string">"IMAP"</span>,
        <span class="hljs-number">443</span>:   <span class="hljs-string">"HTTPS"</span>,
        <span class="hljs-number">3306</span>:  <span class="hljs-string">"MySQL"</span>,
        <span class="hljs-number">5432</span>:  <span class="hljs-string">"PostgreSQL"</span>,
        <span class="hljs-number">6379</span>:  <span class="hljs-string">"Redis"</span>,
        <span class="hljs-number">8080</span>:  <span class="hljs-string">"HTTP-Proxy"</span>,
        <span class="hljs-number">27017</span>: <span class="hljs-string">"MongoDB"</span>,
    }
    
    service := <span class="hljs-string">"Unknown"</span>
    <span class="hljs-keyword">if</span> s, exists := commonPorts[port]; exists {
        service = s
    }
    
    version := <span class="hljs-string">"Unknown"</span>
    
    lowerBanner := strings.ToLower(banner)
    
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"ssh"</span>) {
        service = <span class="hljs-string">"SSH"</span>
        parts := strings.Split(banner, <span class="hljs-string">" "</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
            version = parts[<span class="hljs-number">1</span>]
        }
    }
    
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"http"</span>) || strings.Contains(lowerBanner, <span class="hljs-string">"apache"</span>) || 
       strings.Contains(lowerBanner, <span class="hljs-string">"nginx"</span>) {
        <span class="hljs-keyword">if</span> port == <span class="hljs-number">443</span> {
            service = <span class="hljs-string">"HTTPS"</span>
        } <span class="hljs-keyword">else</span> {
            service = <span class="hljs-string">"HTTP"</span>
        }
        
        <span class="hljs-keyword">if</span> strings.Contains(banner, <span class="hljs-string">"Server:"</span>) {
            parts := strings.Split(banner, <span class="hljs-string">"Server:"</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
                version = strings.TrimSpace(parts[<span class="hljs-number">1</span>])
            }
        }
    }
    
    <span class="hljs-keyword">return</span> service, version
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPort</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> ScanResult {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> ScanResult{Port: port, State: <span class="hljs-literal">false</span>}
    }
    
    conn.Close()
    
    banner, err := grabBanner(host, port, timeout)
    
    service := <span class="hljs-string">"Unknown"</span>
    version := <span class="hljs-string">"Unknown"</span>
    
    <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &amp;&amp; banner != <span class="hljs-string">""</span> {
        service, version = identifyService(port, banner)
    }
    
    vulnerabilities := checkVulnerabilities(service, version)
    
    <span class="hljs-keyword">return</span> ScanResult{
        Port:           port,
        State:          <span class="hljs-literal">true</span>,
        Service:        service,
        Banner:         banner,
        Version:        version,
        Vulnerabilities: vulnerabilities,
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPorts</span><span class="hljs-params">(host <span class="hljs-type">string</span>, start, end <span class="hljs-type">int</span>, timeout time.Duration)</span></span> []ScanResult {
    <span class="hljs-keyword">var</span> results []ScanResult
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    resultChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> ScanResult, end-start+<span class="hljs-number">1</span>)
    
    semaphore := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, <span class="hljs-number">100</span>)
    
    <span class="hljs-keyword">for</span> port := start; port &lt;= end; port++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(p <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            
            semaphore &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { &lt;-semaphore }()
            
            result := scanPort(host, p, timeout)
            resultChan &lt;- result
        }(port)
    }
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultChan)
    }()
    
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> resultChan {
        <span class="hljs-keyword">if</span> result.State {
            results = <span class="hljs-built_in">append</span>(results, result)
        }
    }
    
    <span class="hljs-keyword">return</span> results
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    host := <span class="hljs-string">"localhost"</span>
    startPort := <span class="hljs-number">1</span>
    endPort := <span class="hljs-number">1024</span>
    timeout := time.Second * <span class="hljs-number">1</span> 
    
    fmt.Printf(<span class="hljs-string">"Scanning %s from port %d to %d\n"</span>, host, startPort, endPort)
    startTime := time.Now()
    
    results := scanPorts(host, startPort, endPort, timeout)
    
    elapsed := time.Since(startTime)
    
    fmt.Printf(<span class="hljs-string">"\nScan completed in %s\n"</span>, elapsed)
    fmt.Printf(<span class="hljs-string">"Found %d open ports:\n\n"</span>, <span class="hljs-built_in">len</span>(results))
    
    fmt.Println(<span class="hljs-string">"PORT\tSERVICE\tVERSION"</span>)
    fmt.Println(<span class="hljs-string">"----\t-------\t-------"</span>)
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        fmt.Printf(<span class="hljs-string">"%d\t%s\t%s\n"</span>, 
            result.Port, 
            result.Service, 
            result.Version)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result.Vulnerabilities) &gt; <span class="hljs-number">0</span> {
            fmt.Println(<span class="hljs-string">"  Vulnerabilities:"</span>)
            <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> result.Vulnerabilities {
                fmt.Printf(<span class="hljs-string">"    [%s] %s - %s\n"</span>, 
                    vuln.Severity, 
                    vuln.ID, 
                    vuln.Description)
                fmt.Printf(<span class="hljs-string">"    Reference: %s\n\n"</span>, vuln.Reference)
            }
        }
    }
}<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"strings"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">type</span> ScanResult <span class="hljs-keyword">struct</span> {
    Port          <span class="hljs-type">int</span>
    State         <span class="hljs-type">bool</span>
    Service       <span class="hljs-type">string</span>
    Banner        <span class="hljs-type">string</span>
    Version       <span class="hljs-type">string</span>
    Vulnerabilities []Vulnerability
}

<span class="hljs-keyword">type</span> Vulnerability <span class="hljs-keyword">struct</span> {
    ID          <span class="hljs-type">string</span>
    Description <span class="hljs-type">string</span>
    Severity    <span class="hljs-type">string</span>
    Reference   <span class="hljs-type">string</span>
}

<span class="hljs-keyword">var</span> vulnerabilityDB = []<span class="hljs-keyword">struct</span> {
    Service     <span class="hljs-type">string</span>
    Version     <span class="hljs-type">string</span>
    Vulnerability Vulnerability
}{
    {
        Service: <span class="hljs-string">"SSH"</span>,
        Version: <span class="hljs-string">"OpenSSH_7.4"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2017-15906"</span>,
            Description: <span class="hljs-string">"The process_open function in sftp-server.c in OpenSSH before 7.6 does not properly prevent write operations in read-only mode"</span>,
            Severity:    <span class="hljs-string">"Medium"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2017-15906"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"HTTP"</span>,
        Version: <span class="hljs-string">"Apache/2.4.29"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2019-0211"</span>,
            Description: <span class="hljs-string">"Apache HTTP Server 2.4.17 to 2.4.38 - Local privilege escalation through mod_prefork and mod_http2"</span>,
            Severity:    <span class="hljs-string">"High"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2019-0211"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"HTTP"</span>,
        Version: <span class="hljs-string">"Apache/2.4.41"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2020-9490"</span>,
            Description: <span class="hljs-string">"A specially crafted value for the 'Cache-Digest' header can cause a heap overflow in Apache HTTP Server 2.4.0-2.4.41"</span>,
            Severity:    <span class="hljs-string">"High"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2020-9490"</span>,
        },
    },
    {
        Service: <span class="hljs-string">"MySQL"</span>,
        Version: <span class="hljs-string">"5.7"</span>,
        Vulnerability: Vulnerability{
            ID:          <span class="hljs-string">"CVE-2020-2922"</span>,
            Description: <span class="hljs-string">"Vulnerability in MySQL Server allows unauthorized users to obtain sensitive information"</span>,
            Severity:    <span class="hljs-string">"Medium"</span>,
            Reference:   <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2020-2922"</span>,
        },
    },
    <span class="hljs-comment">// Add more known vulnerabilities here</span>
}

<span class="hljs-comment">// checkVulnerabilities checks if a service/version combination has known vulnerabilities</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">checkVulnerabilities</span><span class="hljs-params">(service, version <span class="hljs-type">string</span>)</span></span> []Vulnerability {
    <span class="hljs-keyword">var</span> vulnerabilities []Vulnerability
    
    <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> vulnerabilityDB {
        <span class="hljs-comment">// Simple matching - in a real scanner, this would be more sophisticated</span>
        <span class="hljs-keyword">if</span> vuln.Service == service &amp;&amp; strings.Contains(version, vuln.Version) {
            vulnerabilities = <span class="hljs-built_in">append</span>(vulnerabilities, vuln.Vulnerability)
        }
    }
    
    <span class="hljs-keyword">return</span> vulnerabilities
}

<span class="hljs-comment">// grabBanner attempts to read the banner from an open port</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">grabBanner</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    <span class="hljs-keyword">defer</span> conn.Close()
    
    conn.SetReadDeadline(time.Now().Add(timeout))
    

    <span class="hljs-keyword">if</span> port == <span class="hljs-number">80</span> || port == <span class="hljs-number">443</span> || port == <span class="hljs-number">8080</span> || port == <span class="hljs-number">8443</span> {
        fmt.Fprintf(conn, <span class="hljs-string">"HEAD / HTTP/1.0\r\nHost: %s\r\n\r\n"</span>, host)
    } <span class="hljs-keyword">else</span> {

    }
    
    reader := bufio.NewReader(conn)
    banner, err := reader.ReadString(<span class="hljs-string">'\n'</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    
    <span class="hljs-keyword">return</span> strings.TrimSpace(banner), <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">identifyService</span><span class="hljs-params">(port <span class="hljs-type">int</span>, banner <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">string</span>) {
    commonPorts := <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">string</span>{
        <span class="hljs-number">21</span>:    <span class="hljs-string">"FTP"</span>,
        <span class="hljs-number">22</span>:    <span class="hljs-string">"SSH"</span>,
        <span class="hljs-number">23</span>:    <span class="hljs-string">"Telnet"</span>,
        <span class="hljs-number">25</span>:    <span class="hljs-string">"SMTP"</span>,
        <span class="hljs-number">53</span>:    <span class="hljs-string">"DNS"</span>,
        <span class="hljs-number">80</span>:    <span class="hljs-string">"HTTP"</span>,
        <span class="hljs-number">110</span>:   <span class="hljs-string">"POP3"</span>,
        <span class="hljs-number">143</span>:   <span class="hljs-string">"IMAP"</span>,
        <span class="hljs-number">443</span>:   <span class="hljs-string">"HTTPS"</span>,
        <span class="hljs-number">3306</span>:  <span class="hljs-string">"MySQL"</span>,
        <span class="hljs-number">5432</span>:  <span class="hljs-string">"PostgreSQL"</span>,
        <span class="hljs-number">6379</span>:  <span class="hljs-string">"Redis"</span>,
        <span class="hljs-number">8080</span>:  <span class="hljs-string">"HTTP-Proxy"</span>,
        <span class="hljs-number">27017</span>: <span class="hljs-string">"MongoDB"</span>,
    }
    
    service := <span class="hljs-string">"Unknown"</span>
    <span class="hljs-keyword">if</span> s, exists := commonPorts[port]; exists {
        service = s
    }
    
    version := <span class="hljs-string">"Unknown"</span>
    
    lowerBanner := strings.ToLower(banner)
    
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"ssh"</span>) {
        service = <span class="hljs-string">"SSH"</span>
        parts := strings.Split(banner, <span class="hljs-string">" "</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
            version = parts[<span class="hljs-number">1</span>]
        }
    }
    
    <span class="hljs-keyword">if</span> strings.Contains(lowerBanner, <span class="hljs-string">"http"</span>) || strings.Contains(lowerBanner, <span class="hljs-string">"apache"</span>) || 
       strings.Contains(lowerBanner, <span class="hljs-string">"nginx"</span>) {
        <span class="hljs-keyword">if</span> port == <span class="hljs-number">443</span> {
            service = <span class="hljs-string">"HTTPS"</span>
        } <span class="hljs-keyword">else</span> {
            service = <span class="hljs-string">"HTTP"</span>
        }
        
        <span class="hljs-keyword">if</span> strings.Contains(banner, <span class="hljs-string">"Server:"</span>) {
            parts := strings.Split(banner, <span class="hljs-string">"Server:"</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) &gt;= <span class="hljs-number">2</span> {
                version = strings.TrimSpace(parts[<span class="hljs-number">1</span>])
            }
        }
    }
    
    <span class="hljs-keyword">return</span> service, version
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPort</span><span class="hljs-params">(host <span class="hljs-type">string</span>, port <span class="hljs-type">int</span>, timeout time.Duration)</span></span> ScanResult {
    target := fmt.Sprintf(<span class="hljs-string">"%s:%d"</span>, host, port)
    conn, err := net.DialTimeout(<span class="hljs-string">"tcp"</span>, target, timeout)
    
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> ScanResult{Port: port, State: <span class="hljs-literal">false</span>}
    }
    
    conn.Close()
    
    banner, err := grabBanner(host, port, timeout)
    
    service := <span class="hljs-string">"Unknown"</span>
    version := <span class="hljs-string">"Unknown"</span>
    
    <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &amp;&amp; banner != <span class="hljs-string">""</span> {
        service, version = identifyService(port, banner)
    }
    
    vulnerabilities := checkVulnerabilities(service, version)
    
    <span class="hljs-keyword">return</span> ScanResult{
        Port:           port,
        State:          <span class="hljs-literal">true</span>,
        Service:        service,
        Banner:         banner,
        Version:        version,
        Vulnerabilities: vulnerabilities,
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scanPorts</span><span class="hljs-params">(host <span class="hljs-type">string</span>, start, end <span class="hljs-type">int</span>, timeout time.Duration)</span></span> []ScanResult {
    <span class="hljs-keyword">var</span> results []ScanResult
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    resultChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> ScanResult, end-start+<span class="hljs-number">1</span>)
    
    semaphore := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, <span class="hljs-number">100</span>)
    
    <span class="hljs-keyword">for</span> port := start; port &lt;= end; port++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(p <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            
            semaphore &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { &lt;-semaphore }()
            
            result := scanPort(host, p, timeout)
            resultChan &lt;- result
        }(port)
    }
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultChan)
    }()
    
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> resultChan {
        <span class="hljs-keyword">if</span> result.State {
            results = <span class="hljs-built_in">append</span>(results, result)
        }
    }
    
    <span class="hljs-keyword">return</span> results
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    host := <span class="hljs-string">"localhost"</span>
    startPort := <span class="hljs-number">1</span>
    endPort := <span class="hljs-number">1024</span>
    timeout := time.Second * <span class="hljs-number">1</span> 
    
    fmt.Printf(<span class="hljs-string">"Scanning %s from port %d to %d\n"</span>, host, startPort, endPort)
    startTime := time.Now()
    
    results := scanPorts(host, startPort, endPort, timeout)
    
    elapsed := time.Since(startTime)
    
    fmt.Printf(<span class="hljs-string">"\nScan completed in %s\n"</span>, elapsed)
    fmt.Printf(<span class="hljs-string">"Found %d open ports:\n\n"</span>, <span class="hljs-built_in">len</span>(results))
    
    fmt.Println(<span class="hljs-string">"PORT\tSERVICE\tVERSION"</span>)
    fmt.Println(<span class="hljs-string">"----\t-------\t-------"</span>)
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        fmt.Printf(<span class="hljs-string">"%d\t%s\t%s\n"</span>, 
            result.Port, 
            result.Service, 
            result.Version)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result.Vulnerabilities) &gt; <span class="hljs-number">0</span> {
            fmt.Println(<span class="hljs-string">"  Vulnerabilities:"</span>)
            <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> result.Vulnerabilities {
                fmt.Printf(<span class="hljs-string">"    [%s] %s - %s\n"</span>, 
                    vuln.Severity, 
                    vuln.ID, 
                    vuln.Description)
                fmt.Printf(<span class="hljs-string">"    Reference: %s\n\n"</span>, vuln.Reference)
            }
        }
    }
}
</code></pre>
<h5 data-id="heading-18">åŸºäºç‰ˆæœ¬çš„æ¼æ´åŒ¹é…</h5>
<p>é’ˆå¯¹æ¼æ´æ£€æµ‹æˆ‘ä»¬ç”¨ç®€å•ç‰ˆæœ¬åŒ¹é…æ–¹æ³•ï¼š</p>
<ul>
<li><strong>ç›´æ¥åŒ¹é…</strong>ï¼šå°†æœåŠ¡ç±»å‹å’Œç‰ˆæœ¬ä¸æ¼æ´æ•°æ®åº“è¿›è¡ŒåŒ¹é…ã€‚</li>
<li><strong>éƒ¨åˆ†åŒ¹é…</strong>ï¼šå¯¹äºæ¼æ´ç‰ˆæœ¬çš„åŒ¹é…ï¼Œæˆ‘ä»¬ä¼šå¯¹ç‰ˆæœ¬å­—ç¬¦ä¸²è¿›è¡Œé™åˆ¶æ€§æ£€æŸ¥ï¼Œè¿™æ ·å³ä½¿ç‰ˆæœ¬å­—ç¬¦ä¸²åŒ…å«é¢å¤–ä¿¡æ¯ï¼Œä¹Ÿèƒ½è¯†åˆ«å‡ºå­˜åœ¨æ¼æ´çš„ç³»ç»Ÿã€‚</li>
</ul>
<p>åœ¨å®é™…çš„æ‰«æå™¨ä¸­ï¼ŒåŒ¹é…ä¼šæ›´ä¸ºå¤æ‚ï¼Œä¼šè€ƒè™‘åˆ°ä»¥ä¸‹å› ç´ ï¼š</p>
<ul>
<li>ç‰ˆæœ¬èŒƒå›´ï¼ˆå³ç‰ˆæœ¬ 2.4.0 è‡³ 2.4.38 å—å½±å“ï¼‰</li>
<li>ç‰¹å®šé…ç½®çš„æ¼æ´</li>
<li>æ“ä½œç³»ç»Ÿç‰¹å®šçš„é—®é¢˜</li>
<li>æ›´ç»†è‡´çš„ç‰ˆæœ¬æ¯”è¾ƒ</li>
</ul>
<h5 data-id="heading-19">æŠ¥å‘Šå‘ç°çš„æƒ…å†µ</h5>
<p>æŠ¥å‘Šç»“æœæ˜¯æ¼æ´æ£€æµ‹æµç¨‹ä¸­çš„æœ€åä¸€æ­¥ï¼Œéœ€è¦ä»¥ç®€æ´ä¸”å…·æœ‰å¯æ“ä½œæ€§çš„æ ¼å¼è¿›è¡Œã€‚æ‰«æå™¨ç°åœ¨ï¼š</p>
<ul>
<li>åˆ—å‡ºæ‰€æœ‰å¼€æ”¾ç«¯å£åŠå…¶æœåŠ¡åŠç‰ˆæœ¬ä¿¡æ¯</li>
<li>å¯¹äºæ¯ä¸ªå­˜åœ¨æ¼æ´çš„æœåŠ¡ï¼Œä¼šæ˜¾ç¤ºï¼š
<ul>
<li>æ¼æ´æ ‡è¯†ï¼ˆä¾‹å¦‚ï¼ŒCVE ç¼–å·ï¼‰</li>
<li>æ¼æ´æè¿°</li>
<li>ä¸¥é‡ç¨‹åº¦è¯„çº§</li>
<li>æ›´å¤šä¿¡æ¯çš„å‚è€ƒé“¾æ¥</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Scanning localhost from port <span class="hljs-number">1</span> to <span class="hljs-number">1024</span>
Scan completed in <span class="hljs-number">6.2</span>s
Found <span class="hljs-number">3</span> open ports:

PORT    SERVICE VERSION
----    ------- -------
<span class="hljs-number">22</span>      SSH     OpenSSH_7<span class="hljs-number">.4</span>p1
  Vulnerabilities:
    [Medium] CVE<span class="hljs-number">-2017</span><span class="hljs-number">-15906</span> - The process_open function in sftp-server.c in OpenSSH before <span class="hljs-number">7.6</span> does <span class="hljs-keyword">not</span> properly prevent write operations in read-only mode
    Reference: https:<span class="hljs-comment">//nvd.nist.gov/vuln/detail/CVE-2017-15906</span>

<span class="hljs-number">80</span>      HTTP    Apache/<span class="hljs-number">2.4</span><span class="hljs-number">.41</span>
  Vulnerabilities:
    [High] CVE<span class="hljs-number">-2020</span><span class="hljs-number">-9490</span> - A specially crafted value <span class="hljs-keyword">for</span> the <span class="hljs-string">'Cache-Digest'</span> header can cause a heap overflow in Apache HTTP <span class="hljs-built_in">Server</span> <span class="hljs-number">2.4</span><span class="hljs-number">.0</span><span class="hljs-number">-2.4</span><span class="hljs-number">.41</span>
    Reference: https:<span class="hljs-comment">//nvd.nist.gov/vuln/detail/CVE-2020-9490</span>

<span class="hljs-number">443</span>     HTTPS   Unknown
</code></pre>
<p>è¿™ä»½è¯¦å°½çš„æ¼æ´æ•°æ®èƒ½å¤Ÿå¸®åŠ©ç½‘ç»œå®‰å…¨ä¸“å®¶è¿…é€Ÿæ‰¾å‡ºå¹¶æ’åºå‡ºéœ€è¦è§£å†³çš„å®‰å…¨é—®é¢˜ã€‚</p>
<h2 data-id="heading-20">æœ€åå®Œå–„ä¸ä½¿ç”¨æ–¹æ³•</h2>
<p>ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå…·å¤‡æœåŠ¡æ£€æµ‹å’Œæ¼æ´åŒ¹é…åŠŸèƒ½çš„åŸºæœ¬æ¼æ´æ‰«æå™¨ï¼›æˆ‘ä»¬å¯¹å…¶è¿›è¡Œå®Œå–„ï¼Œä»¥ä¾¿åœ¨å®é™…åº”ç”¨ä¸­æ›´å…·å®ç”¨æ€§ã€‚</p>
<h6 data-id="heading-21">å‘½ä»¤è¡Œå‚æ•°</h6>
<p>æ‰«æå™¨å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ ‡å¿—è¿›è¡Œé…ç½®ï¼Œè¿™äº›æ ‡å¿—èƒ½å¤Ÿè®¾å®šç›®æ ‡ã€ç«¯å£èŒƒå›´ä»¥åŠæ‰«æé€‰é¡¹ã€‚ä½¿ç”¨ Go çš„ <code>flag</code> åŒ…è¿›è¡Œé…ç½®éå¸¸ç®€å•ã€‚</p>
<p>æ·»åŠ å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<pre><code class="hljs language-golang" lang="golang"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"bufio"</span>
    <span class="hljs-string">"encoding/json"</span>
    <span class="hljs-string">"flag"</span>
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net"</span>
    <span class="hljs-string">"os"</span>
    <span class="hljs-string">"strings"</span>
    <span class="hljs-string">"sync"</span>
    <span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">type</span> ScanResult <span class="hljs-keyword">struct</span> {
    Port            <span class="hljs-type">int</span>
    State           <span class="hljs-type">bool</span>
    Service         <span class="hljs-type">string</span>
    Banner          <span class="hljs-type">string</span>
    Version         <span class="hljs-type">string</span>
    Vulnerabilities []Vulnerability
}

<span class="hljs-keyword">type</span> Vulnerability <span class="hljs-keyword">struct</span> {
    ID          <span class="hljs-type">string</span>
    Description <span class="hljs-type">string</span>
    Severity    <span class="hljs-type">string</span>
    Reference   <span class="hljs-type">string</span>
}

<span class="hljs-keyword">var</span> vulnerabilityDB = []<span class="hljs-keyword">struct</span> {
    Service       <span class="hljs-type">string</span>
    Version       <span class="hljs-type">string</span>
    Vulnerability Vulnerability
}{
    <span class="hljs-comment">// ... (same as before)</span>
}


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    hostPtr := flag.String(<span class="hljs-string">"host"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"Target host to scan (required)"</span>)
    startPortPtr := flag.Int(<span class="hljs-string">"start"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"Starting port number"</span>)
    endPortPtr := flag.Int(<span class="hljs-string">"end"</span>, <span class="hljs-number">1024</span>, <span class="hljs-string">"Ending port number"</span>)
    timeoutPtr := flag.Int(<span class="hljs-string">"timeout"</span>, <span class="hljs-number">1000</span>, <span class="hljs-string">"Timeout in milliseconds"</span>)
    concurrencyPtr := flag.Int(<span class="hljs-string">"concurrency"</span>, <span class="hljs-number">100</span>, <span class="hljs-string">"Number of concurrent scans"</span>)
    formatPtr := flag.String(<span class="hljs-string">"format"</span>, <span class="hljs-string">"text"</span>, <span class="hljs-string">"Output format: text, json, or csv"</span>)
    verbosePtr := flag.Bool(<span class="hljs-string">"verbose"</span>, <span class="hljs-literal">false</span>, <span class="hljs-string">"Show verbose output including banners"</span>)
    outputFilePtr := flag.String(<span class="hljs-string">"output"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"Output file (default is stdout)"</span>)
    
    flag.Parse()
    
    <span class="hljs-keyword">if</span> *hostPtr == <span class="hljs-string">""</span> {
        fmt.Println(<span class="hljs-string">"Error: host is required"</span>)
        flag.Usage()
        os.Exit(<span class="hljs-number">1</span>)
    }
    
    <span class="hljs-keyword">if</span> *startPortPtr &lt; <span class="hljs-number">1</span> || *startPortPtr &gt; <span class="hljs-number">65535</span> {
        fmt.Println(<span class="hljs-string">"Error: starting port must be between 1 and 65535"</span>)
        os.Exit(<span class="hljs-number">1</span>)
    }
    <span class="hljs-keyword">if</span> *endPortPtr &lt; <span class="hljs-number">1</span> || *endPortPtr &gt; <span class="hljs-number">65535</span> {
        fmt.Println(<span class="hljs-string">"Error: ending port must be between 1 and 65535"</span>)
        os.Exit(<span class="hljs-number">1</span>)
    }
    <span class="hljs-keyword">if</span> *startPortPtr &gt; *endPortPtr {
        fmt.Println(<span class="hljs-string">"Error: starting port must be less than or equal to ending port"</span>)
        os.Exit(<span class="hljs-number">1</span>)
    }
    
    timeout := time.Duration(*timeoutPtr) * time.Millisecond
    
    <span class="hljs-keyword">var</span> outputFile *os.File
    <span class="hljs-keyword">var</span> err <span class="hljs-type">error</span>
    
    <span class="hljs-keyword">if</span> *outputFilePtr != <span class="hljs-string">""</span> {
        outputFile, err = os.Create(*outputFilePtr)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            fmt.Printf(<span class="hljs-string">"Error creating output file: %v\n"</span>, err)
            os.Exit(<span class="hljs-number">1</span>)
        }
        <span class="hljs-keyword">defer</span> outputFile.Close()
    } <span class="hljs-keyword">else</span> {
        outputFile = os.Stdout
    }
    
    fmt.Fprintf(outputFile, <span class="hljs-string">"Scanning %s from port %d to %d\n"</span>, *hostPtr, *startPortPtr, *endPortPtr)
    startTime := time.Now()
    
    <span class="hljs-keyword">var</span> results []ScanResult
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    resultChan := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> ScanResult, *endPortPtr-*startPortPtr+<span class="hljs-number">1</span>)
    
    semaphore := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}, *concurrencyPtr)
    
    <span class="hljs-keyword">for</span> port := *startPortPtr; port &lt;= *endPortPtr; port++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(p <span class="hljs-type">int</span>)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            
            semaphore &lt;- <span class="hljs-keyword">struct</span>{}{}
            <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> { &lt;-semaphore }()
            
            result := scanPort(*hostPtr, p, timeout)
            resultChan &lt;- result
        }(port)
    }
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultChan)
    }()
    
    <span class="hljs-keyword">for</span> result := <span class="hljs-keyword">range</span> resultChan {
        <span class="hljs-keyword">if</span> result.State {
            results = <span class="hljs-built_in">append</span>(results, result)
        }
    }
    
    elapsed := time.Since(startTime)
    
    <span class="hljs-keyword">switch</span> *formatPtr {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"json"</span>:
        outputJSON(outputFile, results, elapsed)
    <span class="hljs-keyword">case</span> <span class="hljs-string">"csv"</span>:
        outputCSV(outputFile, results, elapsed, *verbosePtr)
    <span class="hljs-keyword">default</span>:
        outputText(outputFile, results, elapsed, *verbosePtr)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">outputText</span><span class="hljs-params">(w *os.File, results []ScanResult, elapsed time.Duration, verbose <span class="hljs-type">bool</span>)</span></span> {
    fmt.Fprintf(w, <span class="hljs-string">"\nScan completed in %s\n"</span>, elapsed)
    fmt.Fprintf(w, <span class="hljs-string">"Found %d open ports:\n\n"</span>, <span class="hljs-built_in">len</span>(results))
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(results) == <span class="hljs-number">0</span> {
        fmt.Fprintf(w, <span class="hljs-string">"No open ports found.\n"</span>)
        <span class="hljs-keyword">return</span>
    }
    
    fmt.Fprintf(w, <span class="hljs-string">"PORT\tSERVICE\tVERSION\n"</span>)
    fmt.Fprintf(w, <span class="hljs-string">"----\t-------\t-------\n"</span>)
    
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        fmt.Fprintf(w, <span class="hljs-string">"%d\t%s\t%s\n"</span>, 
            result.Port, 
            result.Service, 
            result.Version)
        
        <span class="hljs-keyword">if</span> verbose {
            fmt.Fprintf(w, <span class="hljs-string">"  Banner: %s\n"</span>, result.Banner)
        }
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result.Vulnerabilities) &gt; <span class="hljs-number">0</span> {
            fmt.Fprintf(w, <span class="hljs-string">"  Vulnerabilities:\n"</span>)
            <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> result.Vulnerabilities {
                fmt.Fprintf(w, <span class="hljs-string">"    [%s] %s - %s\n"</span>, 
                    vuln.Severity, 
                    vuln.ID, 
                    vuln.Description)
                fmt.Fprintf(w, <span class="hljs-string">"    Reference: %s\n\n"</span>, vuln.Reference)
            }
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">outputJSON</span><span class="hljs-params">(w *os.File, results []ScanResult, elapsed time.Duration)</span></span> {
    output := <span class="hljs-keyword">struct</span> {
        ScanTime   <span class="hljs-type">string</span>       <span class="hljs-string">`json:"scan_time"`</span>
        ElapsedTime <span class="hljs-type">string</span>       <span class="hljs-string">`json:"elapsed_time"`</span>
        TotalPorts <span class="hljs-type">int</span>          <span class="hljs-string">`json:"total_ports"`</span>
        OpenPorts  <span class="hljs-type">int</span>          <span class="hljs-string">`json:"open_ports"`</span>
        Results    []ScanResult <span class="hljs-string">`json:"results"`</span>
    }{
        ScanTime:    time.Now().Format(time.RFC3339),
        ElapsedTime: elapsed.String(),
        TotalPorts:  <span class="hljs-number">0</span>, 
        OpenPorts:   <span class="hljs-built_in">len</span>(results),
        Results:     results,
    }
    
    encoder := json.NewEncoder(w)
    encoder.SetIndent(<span class="hljs-string">""</span>, <span class="hljs-string">"  "</span>)
    encoder.Encode(output)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">outputCSV</span><span class="hljs-params">(w *os.File, results []ScanResult, elapsed time.Duration, verbose <span class="hljs-type">bool</span>)</span></span> {
    fmt.Fprintf(w, <span class="hljs-string">"Port,Service,Version,Vulnerability ID,Severity,Description\n"</span>)
    
    <span class="hljs-keyword">for</span> _, result := <span class="hljs-keyword">range</span> results {
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(result.Vulnerabilities) == <span class="hljs-number">0</span> {
            fmt.Fprintf(w, <span class="hljs-string">"%d,%s,%s,,,\n"</span>, 
                result.Port, 
                escapeCSV(result.Service), 
                escapeCSV(result.Version))
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span> _, vuln := <span class="hljs-keyword">range</span> result.Vulnerabilities {
                fmt.Fprintf(w, <span class="hljs-string">"%d,%s,%s,%s,%s,%s\n"</span>, 
                    result.Port, 
                    escapeCSV(result.Service), 
                    escapeCSV(result.Version),
                    escapeCSV(vuln.ID),
                    escapeCSV(vuln.Severity),
                    escapeCSV(vuln.Description))
            }
        }
    }
    
    fmt.Fprintf(w, <span class="hljs-string">"\n# Scan completed in %s, found %d open ports\n"</span>, 
        elapsed, <span class="hljs-built_in">len</span>(results))
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">escapeCSV</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-keyword">if</span> strings.Contains(s, <span class="hljs-string">","</span>) || strings.Contains(s, <span class="hljs-string">"\""</span>) || strings.Contains(s, <span class="hljs-string">"\n"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\""</span> + strings.ReplaceAll(s, <span class="hljs-string">"\""</span>, <span class="hljs-string">"\"\""</span>) + <span class="hljs-string">"\""</span>
    }
    <span class="hljs-keyword">return</span> s
}
</code></pre>
<h6 data-id="heading-22">è¾“å‡ºæ ¼å¼</h6>
<p>æ‰«æå™¨ç°åœ¨å¯ä»¥è¾“å‡ºä¸‰ç§æ ¼å¼ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬</strong>ï¼šæ˜“äºé˜…è¯»ï¼Œæ˜“äºç¼–å†™ï¼Œéå¸¸é€‚åˆäº¤äº’ä½¿ç”¨ã€‚</li>
<li><strong>JSON</strong>ï¼šç»“æ„åŒ–è¾“å‡ºï¼Œé€‚ç”¨äºæœºå™¨å¤„ç†ä»¥åŠä¸å…¶ä»–å·¥å…·çš„é›†æˆã€‚</li>
<li><strong>CSV</strong>ï¼šç”µå­è¡¨æ ¼å…¼å®¹çš„æ ¼å¼ï¼Œç”¨äºåˆ†æå’ŒæŠ¥å‘Šã€‚</li>
</ul>
<p>è¾“å‡ºæ–‡æœ¬è¿˜ä¼šæä¾›æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚å¦‚æœè®¾ç½®äº†è¯¦ç»†æ¨¡å¼ï¼Œåˆ™ä¼šæä¾›åŸå§‹æ——æ ‡ä¿¡æ¯ï¼Œå¯¹äºè°ƒè¯•æˆ–æ·±å…¥åˆ†æä¹Ÿéå¸¸æ–¹ä¾¿ã€‚</p>
<h6 data-id="heading-23">ç¤ºä¾‹ç”¨æ³•åŠç»“æœ</h6>
<p>å¦‚æœæ‰“ç®—å°†æ‰«æå™¨ç”¨äºä¸åŒåœºåˆï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„é€‰æ‹©ï¼š</p>
<p><strong>å•ä¸ªä¸»æœºçš„åŸºæœ¬æ‰«æï¼š</strong></p>
<pre><code class="hljs language-go" lang="go">$ <span class="hljs-keyword">go</span> run main.<span class="hljs-keyword">go</span> -host example.com
</code></pre>
<p><strong>æ‰«ææŒ‡å®šç«¯å£èŒƒå›´ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">$ go run main.go -host example.com -start <span class="hljs-number">80</span> -end <span class="hljs-number">443</span>
</code></pre>
<p><strong>å¢åŠ è¶…æ—¶å’Œè¯¦ç»†ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-go" lang="go">$ <span class="hljs-keyword">go</span> run main.<span class="hljs-keyword">go</span> -host example.com -verbose -timeout <span class="hljs-number">2000</span>
</code></pre>
<p><strong>ä»¥æ›´é«˜çš„å¹¶å‘æ€§æ‰«æä»¥è·å¾—æ›´å¿«çš„ç»“æœï¼š</strong></p>
<pre><code class="hljs language-go" lang="go">$ <span class="hljs-keyword">go</span> run main.<span class="hljs-keyword">go</span> -host example.com -concurrency <span class="hljs-number">200</span>
</code></pre>
<p>ç¤ºä¾‹æ–‡æœ¬è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Scanning example.com from port <span class="hljs-number">1</span> to <span class="hljs-number">1024</span>
Scan completed in <span class="hljs-number">12.6</span>s
Found <span class="hljs-number">3</span> open ports:

PORT    SERVICE VERSION
----    ------- -------
<span class="hljs-number">22</span>      SSH     OpenSSH_7<span class="hljs-number">.4</span>p1
  Vulnerabilities:
    [Medium] CVE<span class="hljs-number">-2017</span><span class="hljs-number">-15906</span> - The process_open function in sftp-server.c in OpenSSH before <span class="hljs-number">7.6</span> does <span class="hljs-keyword">not</span> properly prevent write operations in read-only mode
    Reference: https:<span class="hljs-comment">//nvd.nist.gov/vuln/detail/CVE-2017-15906</span>

<span class="hljs-number">80</span>      HTTP    Apache/<span class="hljs-number">2.4</span><span class="hljs-number">.41</span>
  Vulnerabilities:
    [High] CVE<span class="hljs-number">-2020</span><span class="hljs-number">-9490</span> - A specially crafted value <span class="hljs-keyword">for</span> the <span class="hljs-string">'Cache-Digest'</span> header can cause a heap overflow in Apache HTTP <span class="hljs-built_in">Server</span> <span class="hljs-number">2.4</span><span class="hljs-number">.0</span><span class="hljs-number">-2.4</span><span class="hljs-number">.41</span>
    Reference: https:<span class="hljs-comment">//nvd.nist.gov/vuln/detail/CVE-2020-9490</span>

<span class="hljs-number">443</span>     HTTPS   nginx/<span class="hljs-number">1.18</span><span class="hljs-number">.0</span>ï¼š
</code></pre>
<p>JSON è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scan_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-03-18T14:30:00Z"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12.6s"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"total_ports"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1024</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"open_ports"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"results"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Port"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"State"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Service"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SSH"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Banner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SSH-2.0-OpenSSH_7.4p1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"OpenSSH_7.4p1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Vulnerabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CVE-2017-15906"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"The process_open function in sftp-server.c in OpenSSH before 7.6 does not properly prevent write operations in read-only mode"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Medium"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2017-15906"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Port"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">80</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"State"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Service"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HTTP"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Banner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HTTP/1.1 200 OK\r\nServer: Apache/2.4.41"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Apache/2.4.41"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Vulnerabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CVE-2020-9490"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"A specially crafted value for the 'Cache-Digest' header can cause a heap overflow in Apache HTTP Server 2.4.0-2.4.41"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"High"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"Reference"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://nvd.nist.gov/vuln/detail/CVE-2020-9490"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Port"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">443</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"State"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Service"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HTTPS"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Banner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HTTP/1.1 200 OK\r\nServer: nginx/1.18.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nginx/1.18.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Vulnerabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ‘ä»¬ç”¨ Go è¯­è¨€æ„å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„ç½‘ç»œæ¼æ´æ‰«æå™¨ï¼Œè¿™è¡¨æ˜è¯¥è¯­è¨€éå¸¸é€‚åˆç”¨äºå®‰å…¨å·¥å…·ã€‚æ‰«æå™¨èƒ½è¿…é€Ÿæ‰“å¼€ç«¯å£ï¼Œè¯†åˆ«ç«¯å£ä¸Šè¿è¡Œçš„æœåŠ¡ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨å·²çŸ¥æ¼æ´ã€‚</p>
<p>æ‰«æå™¨æä¾›äº†æœ‰å…³ç½‘ç»œä¸Šè¿è¡Œçš„æœåŠ¡çš„æœ‰ç”¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤šçº¿ç¨‹ã€æœåŠ¡æŒ‡çº¹è¯†åˆ«ä»¥åŠå¤šç§è¾“å‡ºæ ¼å¼ã€‚</p>
<p>è¯·è®°ä½ï¼Œåƒæ‰«æå™¨è¿™æ ·çš„å·¥å…·åªèƒ½åœ¨ç¬¦åˆé“å¾·å’Œæ³•å¾‹è§„èŒƒçš„æ¡ä»¶ä¸‹ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦è·å¾—å¯¹ç›®æ ‡ç³»ç»Ÿçš„æ‰«ææˆæƒã€‚å¦‚æœæ“ä½œå¾—å½“ï¼Œå®šæœŸè¿›è¡Œæ¼æ´æ‰«ææ˜¯è‰¯å¥½å®‰å…¨æ€åŠ¿çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèƒ½å¤Ÿå¸®åŠ©ä¿æŠ¤ç³»ç»Ÿå…å—å¨èƒã€‚</p>
<p>å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frezmoss%2Fnetwork-vulnerability-scanner" title="https://github.com/rezmoss/network-vulnerability-scanner" target="_blank" ref="nofollow noopener noreferrer">GitHub</a> ä¸Šæ‰¾åˆ°è¯¥é¡¹ç›®çš„å®Œæ•´æºä»£ç ã€‚</p>
<hr/>
<blockquote>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œåœ¨Motorolaåšè¿‡ç ”å‘ï¼Œç°åœ¨åœ¨MaveniråšæŠ€æœ¯å·¥ä½œï¼Œå¯¹é€šä¿¡ã€ç½‘ç»œã€åç«¯æ¶æ„ã€äº‘åŸç”Ÿã€DevOpsã€CICDã€åŒºå—é“¾ã€AIç­‰æŠ€æœ¯å§‹ç»ˆä¿æŒç€æµ“åšçš„å…´è¶£ï¼Œå¹³æ—¶å–œæ¬¢é˜…è¯»ã€æ€è€ƒï¼Œç›¸ä¿¡æŒç»­å­¦ä¹ ã€ç»ˆèº«æˆé•¿ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ã€‚ä¸ºäº†æ–¹ä¾¿å¤§å®¶ä»¥åèƒ½ç¬¬ä¸€æ—¶é—´çœ‹åˆ°æ–‡ç« ï¼Œè¯·æœ‹å‹ä»¬å…³æ³¨å…¬ä¼—å·"DeepNoMind"ï¼Œå¹¶è®¾ä¸ªæ˜Ÿæ ‡å§ï¼Œå¦‚æœèƒ½ä¸€é”®ä¸‰è¿(è½¬å‘ã€ç‚¹èµã€åœ¨çœ‹)ï¼Œåˆ™èƒ½ç»™æˆ‘å¸¦æ¥æ›´å¤šçš„æ”¯æŒå’ŒåŠ¨åŠ›ï¼Œæ¿€åŠ±æˆ‘æŒç»­å†™ä¸‹å»ï¼Œå’Œå¤§å®¶å…±åŒæˆé•¿è¿›æ­¥ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°]]></title>    <link>https://juejin.cn/post/7571678763781652514</link>    <guid>https://juejin.cn/post/7571678763781652514</guid>    <pubDate>2025-11-12T14:34:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678763781652514" data-draft-id="7571672422689488948" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-11-12T14:34:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:34:55.000Z" title="Wed Nov 12 2025 14:34:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React DevTools ç»„ä»¶åä¹±ç ï¼ŸèŠèŠä»£ç å‹ç¼©è¿™ä»¶äº‹</h2>
<p>çº¿ä¸Šæ‰“å¼€ React DevToolsï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œç»„ä»¶æ ‘å…¨æ˜¯ <code>C0</code>ã€<code>$r</code>ã€<code>pv</code> è¿™ç§ä¸å¯è¯»çš„å­—ç¬¦ã€‚</p>
<p>å¼€å‘ç¯å¢ƒæ˜æ˜å¥½å¥½çš„ï¼Œå« <code>NavigationProvider</code>ã€<code>DialogPortal</code>ï¼Œæ€ä¹ˆåˆ°çº¿ä¸Šå°±å…¨å˜äº†ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23fcd0708f5641e494aca20e819a15d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562895&amp;x-signature=9AyhGROp8t67XkehvUG1el%2BeKjw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">é—®é¢˜å‡ºåœ¨å“ª</h3>
<p>ç®€å•è¯´ï¼š<strong>ç”Ÿäº§æ„å»ºæ—¶ï¼Œä»£ç è¢«å‹ç¼©äº†ï¼Œå‡½æ•°åè¢«æ”¹æˆäº†çŸ­å­—ç¬¦ã€‚</strong></p>
<p>React DevTools ä¾èµ–å‡½æ•°åæ¥æ˜¾ç¤ºç»„ä»¶åã€‚å‡½æ•°åå˜äº†ï¼Œæ˜¾ç¤ºçš„è‡ªç„¶ä¹Ÿå°±å˜äº†ã€‚</p>
<h4 data-id="heading-2">å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒ</h4>
<p><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>React DevTools æ˜¾ç¤ºï¼š<code>NavigationProvider</code> âœ…</p>
<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼ˆå‹ç¼©åï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,{<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>React DevTools æ˜¾ç¤ºï¼š<code>pv</code> âŒ</p>
<h3 data-id="heading-3">ä»å¼€å‘åˆ°ç”Ÿäº§ï¼šä»£ç éƒ½ç»å†äº†ä»€ä¹ˆ</h3>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆä¼šè¢«å‹ç¼©ï¼Œå…ˆè¦çŸ¥é“æˆ‘ä»¬å†™çš„ä»£ç æ˜¯æ€ä¹ˆå˜æˆç”¨æˆ·è®¿é—®çš„çº¿ä¸Šä»£ç çš„ã€‚</p>
<h4 data-id="heading-4">å¼€å‘æ¨¡å¼ï¼šåŸæ±åŸå‘³</h4>
<p>ç”¨è„šæ‰‹æ¶ï¼ˆCreate React Appã€Viteï¼‰å¼€å‘æ—¶ï¼Œå¯åŠ¨çš„æ˜¯<strong>å¼€å‘æœåŠ¡å™¨</strong>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev
<span class="hljs-comment"># æˆ–</span>
npm start
</code></pre>
<p>è¿™æ—¶å€™ï¼š</p>
<ul>
<li>ä»£ç å®æ—¶ç¼–è¯‘ï¼Œä½†<strong>ä¸å‹ç¼©</strong></li>
<li>ä¿ç•™å®Œæ•´çš„å˜é‡åã€å‡½æ•°å</li>
<li>åŒ…å« Source Mapsï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰</li>
<li>æœ‰çƒ­æ›´æ–°ï¼ˆHot Module Replacementï¼‰</li>
</ul>
<p>æµè§ˆå™¨åŠ è½½çš„ä»£ç é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// http://localhost:3000/src/App.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>æ¸…æ¸…æ¥šæ¥šï¼ŒReact DevTools è‡ªç„¶èƒ½è¯»åˆ° <code>NavigationProvider</code>ã€‚</p>
<h4 data-id="heading-5">ç”Ÿäº§æ„å»ºï¼šå…¨é¢ä¼˜åŒ–</h4>
<p>å‡†å¤‡éƒ¨ç½²ä¸Šçº¿æ—¶ï¼Œè¦æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run build
</code></pre>
<p>è¿™ä¸€æ­¥ä¼šè°ƒç”¨æ‰“åŒ…å·¥å…·ï¼ˆWebpackã€Viteã€Rollupï¼‰ï¼Œåšä¸€ç³»åˆ—ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æºä»£ç &lt;br/&gt;å¤šä¸ª .jsx æ–‡ä»¶] --&gt; B[ç¼–è¯‘&lt;br/&gt;JSX â†’ JS]
    B --&gt; C[æ‰“åŒ…&lt;br/&gt;åˆå¹¶æˆå°‘æ•°æ–‡ä»¶]
    C --&gt; D[Tree Shaking&lt;br/&gt;åˆ é™¤æœªä½¿ç”¨ä»£ç ]
    D --&gt; E[å‹ç¼©&lt;br/&gt;Minification]
    E --&gt; F[ç”Ÿäº§ä»£ç &lt;br/&gt;dist/main.abc123.js]
</code></pre>
<h5 data-id="heading-6">1. ç¼–è¯‘ï¼ˆTranspilationï¼‰</h5>
<p>Babel æŠŠ JSX å’Œç°ä»£ JS è¯­æ³•è½¬æˆæµè§ˆå™¨èƒ½ç†è§£çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æºä»£ç </span>
&lt;<span class="hljs-title class_">Provider</span>&gt;{children}&lt;/<span class="hljs-title class_">Provider</span>&gt;

<span class="hljs-comment">// ç¼–è¯‘å</span>
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Provider</span>, <span class="hljs-literal">null</span>, children)
</code></pre>
<h5 data-id="heading-7">2. æ‰“åŒ…ï¼ˆBundlingï¼‰</h5>
<p>æŠŠå‡ åä¸Šç™¾ä¸ªæ–‡ä»¶åˆå¹¶æˆå‡ ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-css" lang="css">å¼€å‘ç¯å¢ƒï¼š
â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navigation<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.jsx</span>
â”‚   â””â”€â”€ <span class="hljs-selector-tag">Footer</span><span class="hljs-selector-class">.jsx</span>
â””â”€â”€ utils/
    â””â”€â”€ helpers<span class="hljs-selector-class">.js</span>

ç”Ÿäº§ç¯å¢ƒï¼š
â””â”€â”€ dist/
    â””â”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.abc123</span><span class="hljs-selector-class">.js</span>  â† å…¨éƒ¨åˆå¹¶
</code></pre>
<h5 data-id="heading-8">3. Tree Shaking</h5>
<p>åˆ é™¤æ²¡ç”¨åˆ°çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usedFunction</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unusedFunction</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }  <span class="hljs-comment">// è¿™ä¸ªæ²¡è¢« import</span>

<span class="hljs-comment">// æ‰“åŒ…åï¼šunusedFunction è¢«åˆ é™¤</span>
</code></pre>
<h5 data-id="heading-9">4. å‹ç¼©ï¼ˆMinificationï¼‰</h5>
<p><strong>è¿™å°±æ˜¯å¯¼è‡´ç»„ä»¶åä¹±ç çš„å…³é”®æ­¥éª¤ã€‚</strong></p>
<p>å‹ç¼©å™¨ï¼ˆTerserã€esbuildï¼‰æŠŠä»£ç ä½“ç§¯å‹åˆ°æœ€å°ï¼š</p>
<ul>
<li>åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Š</li>
<li>ç¼©çŸ­å˜é‡åå’Œå‡½æ•°å</li>
<li>ç®€åŒ–ä»£ç é€»è¾‘</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,<span class="hljs-literal">null</span>,e)}
</code></pre>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆç”Ÿäº§ç¯å¢ƒè¦è¿™ä¹ˆåš</h4>
<p><strong>ä¸€ä¸ªå­—ï¼šå¿«ã€‚</strong></p>
<p>ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼š</p>
<ol>
<li>æµè§ˆå™¨ä»æœåŠ¡å™¨ä¸‹è½½ JS æ–‡ä»¶</li>
<li>è§£æä»£ç </li>
<li>æ‰§è¡Œä»£ç </li>
</ol>
<p><strong>å¦‚æœä¸å‹ç¼©</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªä¸­å‹ React åº”ç”¨ï¼ŒåŸå§‹ä»£ç å¯èƒ½ 2-3 MB</li>
<li>åœ¨ 3G ç½‘ç»œä¸‹ï¼Œä¸‹è½½è¦ 20-30 ç§’</li>
<li>ç”¨æˆ·çœ‹åˆ°ç™½å±ï¼Œæ—©è·‘äº†</li>
</ul>
<p><strong>å‹ç¼©å</strong>ï¼š</p>
<ul>
<li>ä»£ç ä½“ç§¯é™åˆ° 500-800 KB</li>
<li>Gzip å‹ç¼©åå¯èƒ½åªæœ‰ 200 KB</li>
<li>ä¸‹è½½æ—¶é—´ç¼©çŸ­åˆ° 3-5 ç§’</li>
</ul>
<p>ä½“ç§¯å·®å¼‚è¿™ä¹ˆå¤§ï¼Œä¸»è¦å› ä¸ºï¼š</p>
<ul>
<li><strong>ç©ºæ ¼å’Œæ¢è¡Œ</strong>ï¼šåŸå§‹ä»£ç ä¸ºäº†å¯è¯»æ€§ï¼Œå¤§é‡ä½¿ç”¨ç¼©è¿›å’Œæ¢è¡Œï¼ˆå  20-30%ï¼‰</li>
<li><strong>å˜é‡åå’Œå‡½æ•°å</strong>ï¼š<code>NavigationProvider</code> â†’ <code>pv</code> è¿™ç§å‹ç¼©ï¼ˆå  30-40%ï¼‰</li>
<li><strong>æ³¨é‡Š</strong>ï¼šå¼€å‘æ—¶çš„æ³¨é‡Šåœ¨ç”Ÿäº§ç¯å¢ƒå®Œå…¨åˆ é™¤ï¼ˆå  5-10%ï¼‰</li>
<li><strong>æœªä½¿ç”¨çš„ä»£ç </strong>ï¼šTree Shaking åˆ é™¤ï¼ˆå  10-20%ï¼‰</li>
</ul>
<p>æ‰€ä»¥ï¼Œ<strong>å‹ç¼©æ˜¯ç”Ÿäº§ç¯å¢ƒçš„å¿…å¤‡æ­¥éª¤</strong>ï¼Œä¸æ˜¯å¯é€‰é¡¹ã€‚</p>
<h4 data-id="heading-11">å‹ç¼©åœ¨å“ªä¸ªé˜¶æ®µ</h4>
<p>åœ¨ Webpack æˆ– Vite çš„é…ç½®ä¸­ï¼Œå‹ç¼©æ˜¯æœ€åä¸€æ­¥ï¼š</p>
<p><strong>Webpack é…ç½®</strong>ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,  <span class="hljs-comment">// è‡ªåŠ¨å¯ç”¨å‹ç¼©</span>

    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¼€å¯å‹ç¼©</span>
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>(),  <span class="hljs-comment">// ä½¿ç”¨ Terser å‹ç¼©</span>
        ],
    },
};
</code></pre>
<p><strong>Vite é…ç½®</strong>ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,  <span class="hljs-comment">// ä½¿ç”¨ Terser å‹ç¼©ï¼ˆé»˜è®¤æ˜¯ esbuildï¼‰</span>
    },
};
</code></pre>
<p>å½“ä½ æ‰§è¡Œ <code>npm run build</code>ï¼Œæ‰“åŒ…å·¥å…·ä¼šï¼š</p>
<ol>
<li>ç¼–è¯‘æ‰€æœ‰æºæ–‡ä»¶</li>
<li>åˆå¹¶æˆå‡ ä¸ªå¤§æ–‡ä»¶</li>
<li><strong>æœ€åè°ƒç”¨å‹ç¼©å™¨å¤„ç†</strong></li>
<li>è¾“å‡ºåˆ° <code>dist/</code> ç›®å½•</li>
</ol>
<p>å‹ç¼©æ˜¯<strong>æ„å»ºæµç¨‹çš„æœ€åä¸€æ­¥</strong>ï¼Œäº§å‡ºçš„å°±æ˜¯ä¸Šçº¿çš„ä»£ç ã€‚</p>
<h4 data-id="heading-12">å¼€å‘å’Œç”Ÿäº§çš„ç¯å¢ƒåŒºåˆ«</h4>













































<table><thead><tr><th>ç‰¹æ€§</th><th>å¼€å‘ç¯å¢ƒ</th><th>ç”Ÿäº§ç¯å¢ƒ</th></tr></thead><tbody><tr><td>å‘½ä»¤</td><td><code>npm run dev</code></td><td><code>npm run build</code></td></tr><tr><td>ä»£ç å‹ç¼©</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å˜é‡å</td><td><code>NavigationProvider</code></td><td><code>pv</code></td></tr><tr><td>æ–‡ä»¶ä½“ç§¯</td><td>2-3 MB</td><td>500-800 KB</td></tr><tr><td>Source Maps</td><td>âœ… å®Œæ•´</td><td>âŒ æˆ–éšè—</td></tr><tr><td>è°ƒè¯•ä½“éªŒ</td><td>è½»æ¾</td><td>å›°éš¾</td></tr><tr><td>åŠ è½½é€Ÿåº¦</td><td>æ…¢ï¼ˆæœ¬åœ°ä¸careï¼‰</td><td>å¿«ï¼ˆå…³é”®æŒ‡æ ‡ï¼‰</td></tr></tbody></table>
<p>ç°åœ¨æ˜ç™½äº†ï¼š<strong>å¼€å‘æ—¶ä½ å†™çš„æ¸…æ™°ä»£ç ï¼Œåˆ°ç”¨æˆ·é‚£é‡Œå·²ç»é¢ç›®å…¨é</strong>ã€‚</p>
<p>è€Œç»„ä»¶åä¹±ç ï¼Œå°±æ˜¯è¿™ä¸ª"é¢ç›®å…¨é"çš„å‰¯ä½œç”¨ã€‚</p>
<h3 data-id="heading-13">ä¸ºä»€ä¹ˆè¦å‹ç¼©å‡½æ•°å</h3>
<p>ç†è§£äº†èƒŒæ™¯ï¼Œå†çœ‹å…·ä½“çš„å‹ç¼©é€»è¾‘å°±æ¸…æ¥šäº†ã€‚</p>
<p><strong>å‡å°æ–‡ä»¶ä½“ç§¯ï¼ŒåŠ å¿«åŠ è½½é€Ÿåº¦ã€‚</strong></p>
<p>å‹ç¼©å™¨åšçš„äº‹ï¼š</p>
<ol>
<li><strong>åˆ é™¤ç©ºæ ¼å’Œæ¢è¡Œ</strong></li>
<li><strong>ç¼©çŸ­å˜é‡å</strong>ï¼š<code>userName</code> â†’ <code>u</code></li>
<li><strong>ç¼©çŸ­å‡½æ•°å</strong>ï¼š<code>NavigationProvider</code> â†’ <code>pv</code></li>
<li><strong>ç®€åŒ–ä»£ç ç»“æ„</strong></li>
</ol>
<p>çœ‹ä¸ªçœŸå®ä¾‹å­ï¼š</p>
<p><strong>å‹ç¼©å‰</strong>ï¼ˆ15 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; {
        <span class="hljs-title function_">setLocation</span>(path);
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Context.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Provider</span>&gt;</span></span>
    );
}
</code></pre>
<p><strong>å‹ç¼©å</strong>ï¼ˆ4 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Context</span>.<span class="hljs-property">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:t,<span class="hljs-attr">navigate</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">n</span>(r)},<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>ä½“ç§¯ç›´æ¥ç æ‰ 70%ã€‚</p>
<p>å…¶ä¸­ <code>NavigationProvider</code> â†’ <code>pv</code> å°±çœäº† 17 ä¸ªå­—ç¬¦ã€‚æ•´ä¸ªé¡¹ç›®å‡ ç™¾ä¸ªå‡½æ•°ï¼ŒåŠ èµ·æ¥å°±æ˜¯å‡ å KB çš„å·®å¼‚ã€‚</p>
<h3 data-id="heading-14">å‹ç¼©è¿‡ç¨‹è¯¦è§£</h3>
<p>å‹ç¼©ä¸æ˜¯ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œè€Œæ˜¯ç»è¿‡å¤šä¸ªé˜¶æ®µçš„ä»£ç è½¬æ¢ã€‚</p>
<h4 data-id="heading-15">å®Œæ•´çš„æ„å»ºæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æºä»£ç  JSX] --&gt; B[Babel è½¬è¯‘]
    B --&gt; C[æ‰“åŒ…åˆå¹¶]
    C --&gt; D[Terser å‹ç¼©]
    D --&gt; E[ç”Ÿäº§ä»£ç ]
</code></pre>
<ol>
<li><strong>Babel è½¬è¯‘</strong>ï¼šæŠŠ JSX è½¬æˆæ ‡å‡† JavaScript</li>
<li><strong>æ‰“åŒ…åˆå¹¶</strong>ï¼šå¤šä¸ªæ–‡ä»¶åˆæˆä¸€ä¸ªæ–‡ä»¶</li>
<li><strong>Terser å‹ç¼©</strong>ï¼šçœŸæ­£çš„å‹ç¼©å‘ç”Ÿåœ¨è¿™ä¸€æ­¥</li>
<li><strong>è¾“å‡º</strong>ï¼šæœ€ç»ˆçš„ç”Ÿäº§ä»£ç </li>
</ol>
<p>é‡ç‚¹çœ‹ç¬¬ä¸‰æ­¥ï¼Œå‹ç¼©å™¨å†…éƒ¨å…¶å®ä¹Ÿåˆ†å¥½å‡ ä¸ªé˜¶æ®µã€‚</p>
<h4 data-id="heading-16">Terser çš„å‹ç¼©é˜¶æ®µ</h4>
<h5 data-id="heading-17">é˜¶æ®µ 1ï¼šè§£æï¼ˆParseï¼‰</h5>
<p>æŠŠä»£ç è½¬æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// è½¬æˆ ASTï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
{
    <span class="hljs-attr">type</span>: <span class="hljs-string">"FunctionDeclaration"</span>,
    <span class="hljs-attr">id</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"Identifier"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"NavigationProvider"</span> },
    <span class="hljs-attr">params</span>: [
        {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"ObjectPattern"</span>,
            <span class="hljs-attr">properties</span>: [{ <span class="hljs-attr">key</span>: <span class="hljs-string">"children"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"children"</span> }]
        }
    ],
    <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"ReturnStatement"</span>,
        <span class="hljs-attr">argument</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"JSXElement"</span>, ... }
    }
}
</code></pre>
<p>AST å°±æ˜¯ä»£ç çš„æ ‘çŠ¶ç»“æ„è¡¨ç¤ºï¼Œæ–¹ä¾¿åç»­åˆ†æå’Œä¿®æ”¹ã€‚</p>
<h5 data-id="heading-18">é˜¶æ®µ 2ï¼šåˆ†æï¼ˆAnalyzeï¼‰</h5>
<p><strong>2.1 ä½œç”¨åŸŸåˆ†æ</strong></p>
<p>æ‰¾å‡ºå“ªäº›å˜é‡åå¯ä»¥æ”¹ï¼Œå“ªäº›ä¸èƒ½æ”¹ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);  <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-variable language_">window</span>.<span class="hljs-property">NavigationProvider</span> = <span class="hljs-title class_">NavigationProvider</span>;  <span class="hljs-comment">// å…¨å±€å¼•ç”¨ï¼Œä¸èƒ½æ”¹</span>
</code></pre>
<p>è§„åˆ™ï¼š</p>
<ul>
<li><strong>å¯ä»¥æ”¹</strong>ï¼šå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ã€å‡½æ•°åï¼ˆå¦‚æœæ²¡è¢«å¤–éƒ¨å¼•ç”¨ï¼‰</li>
<li><strong>ä¸èƒ½æ”¹</strong>ï¼šå…¨å±€å˜é‡ã€å¯¹è±¡å±æ€§åã€è¢« <code>eval()</code> ä½¿ç”¨çš„å˜é‡</li>
</ul>
<p><strong>2.2 å¼•ç”¨è®¡æ•°</strong></p>
<p>ç»Ÿè®¡æ¯ä¸ªæ ‡è¯†ç¬¦å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå†³å®šæ˜¯å¦å€¼å¾—å‹ç¼©ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {  <span class="hljs-comment">// NavigationProvider å‡ºç° 1 æ¬¡</span>
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);          <span class="hljs-comment">// location å‡ºç° 1 æ¬¡</span>
    <span class="hljs-keyword">const</span> currentLocation = location;        <span class="hljs-comment">// location å‡ºç° 2 æ¬¡</span>
    <span class="hljs-keyword">return</span> currentLocation;                  <span class="hljs-comment">// currentLocation å‡ºç° 1 æ¬¡</span>
}
</code></pre>
<p>å¦‚æœä¸€ä¸ªå˜é‡åªç”¨äº† 1 æ¬¡ï¼Œæ”¹æˆçŸ­åç§°å¯èƒ½ä¸åˆ’ç®—ï¼ˆæ¯”å¦‚ <code>location</code> â†’ <code>a</code> åªçœ 7 ä¸ªå­—ç¬¦ï¼‰ã€‚</p>
<p><strong>2.3 ä¾èµ–åˆ†æ</strong></p>
<p>æ‰¾å‡ºå˜é‡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œé¿å…å‘½åå†²çªã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> a = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> b = <span class="hljs-number">2</span>;  <span class="hljs-comment">// b å¯ä»¥é‡å‘½åä¸º aï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä½œç”¨åŸŸ</span>
        <span class="hljs-keyword">return</span> b;
    }
    <span class="hljs-keyword">return</span> a;
}
</code></pre>
<h5 data-id="heading-19">é˜¶æ®µ 3ï¼šè½¬æ¢ï¼ˆTransformï¼‰</h5>
<p>è¿™æ˜¯çœŸæ­£åšå‹ç¼©çš„é˜¶æ®µï¼Œåˆ†å¤šä¸ªæ­¥éª¤ã€‚</p>
<p><strong>3.1 åˆ é™¤æ­»ä»£ç ï¼ˆDead Code Eliminationï¼‰</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEBUG</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'debug'</span>);  <span class="hljs-comment">// è¿™æ®µæ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p><strong>3.2 å¸¸é‡æŠ˜å ï¼ˆConstant Foldingï¼‰</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_COUNT</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOUBLED</span> = <span class="hljs-variable constant_">MAX_COUNT</span> * <span class="hljs-number">2</span>;
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-variable constant_">DOUBLED</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">20</span>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>ç›´æ¥ç®—å‡ºç»“æœï¼Œå‡å°‘è¿è¡Œæ—¶è®¡ç®—ã€‚</p>
<p><strong>3.3 è¡¨è¾¾å¼ç®€åŒ–</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">if</span> (isActive === <span class="hljs-literal">true</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">if</span> (isActive) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p><strong>3.4 å˜é‡åå‹ç¼©ï¼ˆMangleï¼‰</strong></p>
<p>è¿™æ˜¯æˆ‘ä»¬å…³å¿ƒçš„é‡ç‚¹ã€‚</p>
<p>å‹ç¼©å™¨éå† ASTï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™æ›¿æ¢æ ‡è¯†ç¬¦ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‡½æ•°å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children }</span>) {  <span class="hljs-comment">// NavigationProvider â†’ pv</span>
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šå‚æ•°å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children: e }</span>) {  <span class="hljs-comment">// children â†’ e</span>
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{e}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬ä¸‰è½®ï¼šå±€éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children: e }</span>) {
    <span class="hljs-keyword">const</span> [t, n] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);  <span class="hljs-comment">// location â†’ t, setLocation â†’ n</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">r</span> = (<span class="hljs-params">o</span>) =&gt; <span class="hljs-title function_">n</span>(o);         <span class="hljs-comment">// navigate â†’ r, path â†’ o</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location:</span> <span class="hljs-attr">t</span>, <span class="hljs-attr">navigate:</span> <span class="hljs-attr">r</span> }}&gt;</span>{e}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>æ³¨æ„ï¼š<strong>å¯¹è±¡å±æ€§åä¸ä¼šæ”¹</strong>ï¼ˆ<code>location:</code>ã€<code>navigate:</code> ä¿æŒåŸæ ·ï¼‰ï¼Œå› ä¸ºè¿™äº›æ˜¯å¯¹å¤–çš„æ¥å£ã€‚</p>
<p><strong>3.5 ä½œç”¨åŸŸæå‡ï¼ˆScope Hoistingï¼‰</strong></p>
<p>æŠŠå¤šä¸ªæ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªä½œç”¨åŸŸï¼Œå‡å°‘é—­åŒ…å’Œå‡½æ•°è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰ï¼ˆä¸¤ä¸ªæ–‡ä»¶ï¼‰</span>
<span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date</span>) { <span class="hljs-keyword">return</span> date.<span class="hljs-title function_">toString</span>(); }

<span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">import</span> { formatDate } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">formatDate</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()));

<span class="hljs-comment">// å‹ç¼©åï¼ˆåˆå¹¶ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">b</span>) { <span class="hljs-keyword">return</span> b.<span class="hljs-title function_">toString</span>(); }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">a</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()));
</code></pre>
<h5 data-id="heading-20">é˜¶æ®µ 4ï¼šç”Ÿæˆï¼ˆGenerateï¼‰</h5>
<p>æŠŠä¿®æ”¹åçš„ AST è½¬å›ä»£ç å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// AST è½¬å›ä»£ç </span>
{
    <span class="hljs-attr">type</span>: <span class="hljs-string">"FunctionDeclaration"</span>,
    <span class="hljs-attr">id</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"pv"</span> },  <span class="hljs-comment">// å·²è¢«ä¿®æ”¹</span>
    <span class="hljs-attr">params</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"e"</span> }],
    <span class="hljs-attr">body</span>: { ... }
}

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:t,<span class="hljs-attr">navigate</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">n</span>(r)},<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>åŒæ—¶åˆ é™¤æ‰€æœ‰ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Šã€‚</p>
<h4 data-id="heading-21">å‘½åè§„åˆ™è¯¦è§£</h4>
<p>å‹ç¼©å™¨åˆ†é…çŸ­åç§°æ—¶çš„ä¼˜å…ˆçº§ï¼š</p>
<h5 data-id="heading-22">1. å•å­—æ¯ï¼ˆ52 ä¸ªï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span>, c, ..., z
<span class="hljs-selector-tag">A</span>, <span class="hljs-selector-tag">B</span>, C, ..., Z
</code></pre>
<p>æœ€å¸¸ç”¨çš„æ ‡è¯†ç¬¦ä¼šä¼˜å…ˆåˆ†é…è¿™äº›ã€‚</p>
<h5 data-id="heading-23">2. ç¾å…ƒç¬¦å·å’Œä¸‹åˆ’çº¿ï¼ˆ104 ä¸ªï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$a</span>, <span class="hljs-variable">$b</span>, ..., <span class="hljs-variable">$Z</span>
_a, _b, ..., _Z
</code></pre>
<p>å•å­—æ¯ç”¨å®Œå°±åŠ å‰ç¼€ã€‚</p>
<h5 data-id="heading-24">3. ä¸¤ä¸ªå­—æ¯ï¼ˆ2704 ä¸ªï¼‰</h5>
<pre><code class="hljs">aa, ab, ac, ..., ZZ
</code></pre>
<p>å†ä¸å¤Ÿå°±ç”¨ä¸¤ä¸ªå­—æ¯ç»„åˆã€‚</p>
<h5 data-id="heading-25">4. ç‰¹æ®Šç»„åˆ</h5>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$,</span> _, <span class="hljs-variable">$$</span>, <span class="hljs-variable">$_</span>, ...
</code></pre>
<p>ç„¶åæ˜¯å„ç§ç‰¹æ®Šå­—ç¬¦ç»„åˆã€‚</p>
<p>æ‰€ä»¥ä½ çœ‹åˆ°çš„ <code>pv</code>ã€<code>$r</code>ã€<code>Jt</code> éƒ½æ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºåˆ†é…çš„ã€‚</p>
<h4 data-id="heading-26">çœŸå®ä¾‹å­å¯¹æ¯”</h4>
<p>æ‹¿ä¸€æ®µå®Œæ•´çš„ä»£ç çœ‹çœ‹æ¯ä¸ªé˜¶æ®µçš„å˜åŒ–ï¼š</p>
<p><strong>åŸå§‹ä»£ç </strong>ï¼ˆ150 è¡Œï¼Œ5 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">NavigationContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [currentLocation, setCurrentLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">newPath</span>) =&gt; {
        <span class="hljs-keyword">if</span> (newPath !== currentLocation) {
            <span class="hljs-title function_">setCurrentLocation</span>(newPath);
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">''</span>, newPath);
        }
    };

    <span class="hljs-keyword">const</span> value = {
        <span class="hljs-attr">location</span>: currentLocation,
        <span class="hljs-attr">navigate</span>: navigate
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavigationContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">NavigationContext.Provider</span>&gt;</span></span>
    );
}
</code></pre>
<p><strong>ç»è¿‡ Babel</strong>ï¼ˆè½¬ JSXï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">NavigationContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [currentLocation, setCurrentLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">newPath</span>) =&gt; {
        <span class="hljs-keyword">if</span> (newPath !== currentLocation) {
            <span class="hljs-title function_">setCurrentLocation</span>(newPath);
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">''</span>, newPath);
        }
    };

    <span class="hljs-keyword">const</span> value = {
        <span class="hljs-attr">location</span>: currentLocation,
        <span class="hljs-attr">navigate</span>: navigate
    };

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(
        <span class="hljs-title class_">NavigationContext</span>.<span class="hljs-property">Provider</span>,
        { <span class="hljs-attr">value</span>: value },
        children
    );
}
</code></pre>
<p><strong>ç»è¿‡ Terser åˆ†æ</strong>ï¼ˆå†…éƒ¨è®°å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ä½œç”¨åŸŸåˆ†æï¼š
<span class="hljs-deletion">- NavigationContext: å…¨å±€å¯¼å‡ºï¼Œä¸èƒ½æ”¹</span>
<span class="hljs-deletion">- NavigationProvider: å…¨å±€å¯¼å‡ºï¼Œä¸èƒ½æ”¹</span>
<span class="hljs-deletion">- children: å‡½æ•°å‚æ•°ï¼Œå¯ä»¥æ”¹ â†’ e</span>
<span class="hljs-deletion">- currentLocation: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ t</span>
<span class="hljs-deletion">- setCurrentLocation: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ n</span>
<span class="hljs-deletion">- navigate: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ r</span>
<span class="hljs-deletion">- newPath: å‡½æ•°å‚æ•°ï¼Œå¯ä»¥æ”¹ â†’ o</span>
<span class="hljs-deletion">- value: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ aï¼ˆä½†ä¼šè¢«å†…è”ä¼˜åŒ–æ‰ï¼‰</span>
</code></pre>
<p><strong>ç»è¿‡ Terser å‹ç¼©</strong>ï¼ˆæœ€ç»ˆäº§ç‰©ï¼Œ1.5 KBï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>{useState <span class="hljs-keyword">as</span> t}<span class="hljs-keyword">from</span><span class="hljs-string">"react"</span>;<span class="hljs-keyword">const</span> n=<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[r,o]=<span class="hljs-title function_">t</span>(<span class="hljs-string">"/"</span>),c=<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>{i!==r&amp;&amp;(<span class="hljs-title function_">o</span>(i),<span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({},<span class="hljs-string">""</span>,i))};<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(n.<span class="hljs-property">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:r,<span class="hljs-attr">navigate</span>:c}},e)}
</code></pre>
<p><strong>ä½“ç§¯å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li>åŸå§‹ä»£ç ï¼š5 KB</li>
<li>Babel è½¬è¯‘åï¼š5.2 KBï¼ˆJSX è½¬æ¢ç•¥æœ‰å¢åŠ ï¼‰</li>
<li>Terser å‹ç¼©åï¼š1.5 KBï¼ˆå‡å°‘ 70%ï¼‰</li>
</ul>
<p>å…³é”®å˜åŒ–ï¼š</p>
<ol>
<li>åˆ é™¤æ‰€æœ‰ç©ºæ ¼å’Œæ¢è¡Œï¼š<code>5KB â†’ 4KB</code></li>
<li>å˜é‡åå‹ç¼©ï¼š<code>4KB â†’ 2KB</code></li>
<li>è¡¨è¾¾å¼ç®€åŒ–å’Œå†…è”ï¼š<code>2KB â†’ 1.5KB</code></li>
</ol>
<h4 data-id="heading-27">ä¸ºä»€ä¹ˆè¿™ä¹ˆæ¿€è¿›</h4>
<p>ç°ä»£ Web åº”ç”¨åŠ¨è¾„å‡ ç™¾ä¸ªç»„ä»¶ï¼Œä¸Šåƒä¸ªå‡½æ•°ã€‚</p>
<p>å¦‚æœä¸å‹ç¼©å‡½æ•°åå’Œå˜é‡åï¼š</p>
<ul>
<li>å¹³å‡æ¯ä¸ªå‡½æ•°å 15 å­—ç¬¦</li>
<li>1000 ä¸ªå‡½æ•° = 15KB ä»…ç”¨äºå‘½å</li>
<li>åŠ ä¸Šå˜é‡åï¼Œæ€»å…±å¯èƒ½ 50KB+</li>
</ul>
<p>50KB åœ¨ 3G ç½‘ç»œä¸‹ï¼Œå¤šåŠ è½½ 3-5 ç§’ã€‚</p>
<p>æ‰€ä»¥å‹ç¼©å™¨é»˜è®¤éå¸¸æ¿€è¿›ï¼Œèƒ½å‹ç¼©çš„å…¨å‹ç¼©ã€‚</p>
<h3 data-id="heading-28">èƒŒåçš„åŸç†</h3>
<h4 data-id="heading-29">å‡½æ•°åæ˜¯æ€ä¹ˆè¢«æ›¿æ¢çš„</h4>
<p>å‹ç¼©å™¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ˜ å°„è¡¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">åŸå§‹åç§° â†’ å‹ç¼©ååç§°
NavigationProvider â†’ pv
LocationProvider â†’ <span class="hljs-variable">$r</span>
DialogPortal â†’ Jt
Link â†’ vv
</code></pre>
<p>è§„åˆ™å¾ˆç®€å•ï¼š</p>
<ol>
<li>æŒ‰å‡ºç°é¡ºåºåˆ†é…çŸ­åç§°</li>
<li>ä¼˜å…ˆç”¨å•å­—æ¯ï¼ˆa-z, A-Zï¼‰</li>
<li>å•å­—æ¯ç”¨å®Œå°±ç”¨ä¸¤ä¸ªå­—æ¯ï¼ˆaa, ab, ...ï¼‰</li>
<li>åŠ ä¸Šç‰¹æ®Šå­—ç¬¦ï¼ˆ$, _ï¼‰å¢åŠ ç»„åˆæ•°</li>
</ol>
<p>æ‰€ä»¥ä½ ä¼šçœ‹åˆ° <code>a</code>ã€<code>$r</code>ã€<code>pv</code>ã€<code>Jt</code> è¿™ç§çœ‹èµ·æ¥æ¯«æ— è§„å¾‹çš„åç§°ã€‚</p>
<h4 data-id="heading-30">React DevTools æ€ä¹ˆçŸ¥é“ç»„ä»¶å</h4>
<p>React DevTools è·å–ç»„ä»¶åçš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è¯»å–ç»„ä»¶] --&gt; B{æœ‰ displayName?}
    B --&gt;|æœ‰| C[æ˜¾ç¤º displayName]
    B --&gt;|æ²¡æœ‰| D{æœ‰å‡½æ•°å?}
    D --&gt;|æœ‰| E[æ˜¾ç¤ºå‡½æ•°å]
    D --&gt;|æ²¡æœ‰| F[æ˜¾ç¤º Anonymous]
</code></pre>
<p>ä¼˜å…ˆçº§ï¼š<code>displayName</code> &gt; <code>å‡½æ•°å</code> &gt; <code>"Anonymous"</code></p>
<p>å¼€å‘ç¯å¢ƒï¼š</p>
<ul>
<li>å‡½æ•°åå®Œæ•´ä¿ç•™ â†’ DevTools è¯»åˆ° <code>NavigationProvider</code></li>
</ul>
<p>ç”Ÿäº§ç¯å¢ƒï¼š</p>
<ul>
<li>å‡½æ•°åè¢«å‹ç¼©æˆ <code>pv</code> â†’ DevTools åªèƒ½è¯»åˆ° <code>pv</code></li>
<li>æ²¡è®¾ç½® <code>displayName</code> â†’ æ²¡æœ‰å¤‡ç”¨æ–¹æ¡ˆ</li>
</ul>
<p>æ‰€ä»¥å°±å‡ºç°äº†å¼€å¤´é‚£å¼ å›¾çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-31">ä¸ºä»€ä¹ˆä¸æ˜¯æ‰€æœ‰ç»„ä»¶éƒ½ä¹±ç </h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œæœ‰äº›ç»„ä»¶åè¿˜æ˜¯æ­£å¸¸çš„ï¼Œæ¯”å¦‚ <code>Link</code>ã€<code>Menu</code>ã€<code>Dialog</code>ã€‚</p>
<p>åŸå› æœ‰ä¸‰ç§ï¼š</p>
<h4 data-id="heading-32">1. ç»„ä»¶è®¾ç½®äº† displayName</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-title class_">MyComponent</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'MyComponent'</span>;
</code></pre>
<p>å‹ç¼©å™¨ä¸ä¼šæ”¹ <code>displayName</code>ï¼ˆå®ƒæ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯æ ‡è¯†ç¬¦ï¼‰ã€‚</p>
<h4 data-id="heading-33">2. ç»„ä»¶æ¥è‡ªç¬¬ä¸‰æ–¹åº“</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>;
</code></pre>
<p>ç¬¬ä¸‰æ–¹åº“é€šå¸¸ä¼šè®¾ç½® <code>displayName</code>ï¼Œæˆ–è€…é…ç½®äº†ä¿ç•™å‡½æ•°åçš„æ„å»ºé€‰é¡¹ã€‚</p>
<h4 data-id="heading-34">3. åç§°å¤ªçŸ­ï¼Œç¢°å·§æ²¡å˜</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Link</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>å¦‚æœåŸæœ¬å°±å« <code>Link</code>ï¼Œå‹ç¼©åå¯èƒ½è¿˜æ˜¯ <code>Link</code>ï¼ˆ4 ä¸ªå­—ç¬¦ï¼Œä¸ä¸€å®šå€¼å¾—å‹ç¼©ï¼‰ã€‚</p>
<p>ä½†è¿™çº¯é è¿æ°”ï¼Œä¸èƒ½ä¾èµ–ã€‚</p>
<h3 data-id="heading-35">æ€ä¹ˆè§£å†³</h3>
<p>æ ¸å¿ƒæ€è·¯å°±ä¸¤ä¸ªæ–¹å‘ï¼š</p>
<h4 data-id="heading-36">1. å‘Šè¯‰å‹ç¼©å™¨ï¼šåˆ«æ”¹å‡½æ•°å</h4>
<p>Webpack/Vite é…ç½®ä¸­ï¼Œè®¾ç½® Terser é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">terserOptions</span>: {
    <span class="hljs-attr">keep_fnames</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// ä¿ç•™å‡½æ•°å</span>
}
</code></pre>
<p>ä»£ä»·ï¼šåŒ…ä½“ç§¯å¢åŠ  5-10%ã€‚</p>
<h4 data-id="heading-37">2. æ‰‹åŠ¨ç»™ç»„ä»¶åŠ  displayName</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">NavigationProvider</span> = (<span class="hljs-params">{ children }</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
};

<span class="hljs-title class_">NavigationProvider</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'Navigation.Provider'</span>;
</code></pre>
<p>å¥½å¤„ï¼šç²¾ç¡®æ§åˆ¶ï¼Œä½“ç§¯å½±å“å°ã€‚
ä»£ä»·ï¼šè¦æ‰‹åŠ¨ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-38">è¯¥ä¸è¯¥è§£å†³</h3>
<p><strong>å†…éƒ¨ç³»ç»Ÿ/ç®¡ç†åå°</strong>ï¼š</p>
<ul>
<li>è°ƒè¯•éœ€æ±‚é«˜ï¼Œä½“ç§¯ä¸æ•æ„Ÿ</li>
<li>å»ºè®®ä¿ç•™å‡½æ•°åï¼Œè°ƒè¯•ä½“éªŒç›´æ¥æ‹‰æ»¡</li>
</ul>
<p><strong>é¢å‘ç”¨æˆ·çš„äº§å“</strong>ï¼š</p>
<ul>
<li>ä½“ç§¯å½±å“åŠ è½½é€Ÿåº¦ï¼Œè°ƒè¯•ä¸»è¦åœ¨å¼€å‘ç¯å¢ƒ</li>
<li>ä¸ç”¨ç®¡ï¼Œæˆ–è€…åªç»™æ ¸å¿ƒç»„ä»¶åŠ  displayName</li>
</ul>
<p><strong>å¼€æºç»„ä»¶åº“</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è°ƒè¯•éœ€è¦æ¸…æ™°çš„ç»„ä»¶å</li>
<li>å»ºè®®åŠ  displayNameï¼Œæˆ–æ„å»ºæ—¶ä¿ç•™å‡½æ•°å</li>
</ul>
<p>å¤§å¤šæ•°æƒ…å†µï¼Œè¿™ä¸æ˜¯ä¸ªå¿…é¡»è§£å†³çš„é—®é¢˜ã€‚çº¿ä¸Šè°ƒè¯•æœ¬æ¥å°±è¯¥åœ¨ staging ç¯å¢ƒï¼ˆä¿ç•™å‡½æ•°åï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒé æ—¥å¿—å’Œç›‘æ§ã€‚</p>
<h3 data-id="heading-39">ç›¸å…³èµ„æ–™</h3>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fterser.org%2Fdocs%2Foptions%2F" target="_blank" title="https://terser.org/docs/options/" ref="nofollow noopener noreferrer">Terser æ–‡æ¡£</a></strong> - äº†è§£ <code>keep_fnames</code> ç­‰é…ç½®</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-developer-tools%23why-is-my-component-called-_c" target="_blank" title="https://react.dev/learn/react-developer-tools#why-is-my-component-called-_c" ref="nofollow noopener noreferrer">React å®˜æ–¹ï¼šä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶å« <code>_c</code>ï¼Ÿ</a></strong> - React æ–‡æ¡£çš„è§£é‡Š</li>
</ol>
<hr/>
<p>ææ¸…æ¥šåŸç†å°±å¥½åŠäº†ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼ŒçŸ¥é“æ˜¯ä»£ç å‹ç¼©å¯¼è‡´çš„ï¼Œè€Œä¸æ˜¯ React æˆ– DevTools çš„ bugã€‚</p>
<p>è¦ä¸è¦è§£å†³ï¼Œçœ‹å…·ä½“éœ€æ±‚ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¸ç”¨ç®¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[javaå†…å­˜æ³„æ¼é—®é¢˜æ’æŸ¥å’ŒJVMè°ƒä¼˜]]></title>    <link>https://juejin.cn/post/7572016447804309530</link>    <guid>https://juejin.cn/post/7572016447804309530</guid>    <pubDate>2025-11-13T09:07:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572016447804309530" data-draft-id="7571840220703932462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="javaå†…å­˜æ³„æ¼é—®é¢˜æ’æŸ¥å’ŒJVMè°ƒä¼˜"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-13T09:07:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ·è¾¹æ¡çŸ³å­"/> <meta itemprop="url" content="https://juejin.cn/user/2335828265144488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            javaå†…å­˜æ³„æ¼é—®é¢˜æ’æŸ¥å’ŒJVMè°ƒä¼˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2335828265144488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ·è¾¹æ¡çŸ³å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:07:34.000Z" title="Thu Nov 13 2025 09:07:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Javaè¯­è¨€æœ¬èº«æ”¯æŒåƒåœ¾è‡ªåŠ¨å›æ”¶ï¼Œåœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­æˆ‘ä»¬å‡ ä¹æ²¡æœ‰å…³æ³¨è¿‡å¯¹è±¡å›æ”¶çš„é—®é¢˜ã€‚è§£å†³å†…å­˜æ³„æ¼å¯èƒ½åœç•™åœ¨å…«è‚¡æ–‡ä¸Šã€‚ä»Šå¤©åˆ†äº«ä¸€æ¬¡é¡¹ç›®ä¸­å†…å­˜æ³„æ¼çš„æ’æŸ¥æµç¨‹åˆ°æœ€ç»ˆè§£å†³ã€‚</p>
<h2 data-id="heading-0">javaè‡ªå¸¦äº†å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·</h2>





























<table><thead><tr><th>å·¥å…·</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ä¸»è¦åº”ç”¨åœºæ™¯</th><th>å…³é”®å‘½ä»¤/ç¤ºä¾‹</th></tr></thead><tbody><tr><td>**<code>jcmd</code>**â€‹</td><td><strong>å¤šåŠŸèƒ½è¯Šæ–­</strong>ï¼šä¸€ä¸ªå¼ºå¤§çš„â€œç‘å£«å†›åˆ€â€ï¼Œå¯æ‰§è¡Œä¸°å¯Œçš„è¯Šæ–­å‘½ä»¤ï¼Œæ¶µç›–JVMçŠ¶æ€æŸ¥è¯¢ã€å†…å­˜ã€çº¿ç¨‹ã€GCæ§åˆ¶ç­‰ã€‚</td><td><strong>ç»¼åˆè¯Šæ–­ä¸è¿ç»´</strong>ï¼šè·å–å®Œæ•´JVMä¿¡æ¯ï¼ˆå‚æ•°ã€å±æ€§ï¼‰ã€åŠ¨æ€æ§åˆ¶ï¼ˆè§¦å‘GCã€å¼€å¯JFRï¼‰ã€ç”Ÿæˆçº¿ç¨‹/å †è½¬å‚¨ã€‚</td><td><code>jcmd &lt;pid&gt; VM.flags</code>ï¼ˆæŸ¥çœ‹JVMå‚æ•°ï¼‰ <code>jcmd &lt;pid&gt; Thread.print</code>ï¼ˆç”Ÿæˆçº¿ç¨‹è½¬å‚¨ï¼‰ <code>jcmd &lt;pid&gt; GC.heap_dump</code>ï¼ˆç”Ÿæˆå †è½¬å‚¨ï¼‰</td></tr><tr><td>**<code>jmap</code>**â€‹</td><td><strong>å †å†…å­˜åˆ†æ</strong>ï¼šä¸“ç”¨äºJavaå †å†…å­˜ï¼ˆHeap Memoryï¼‰çš„ç›´æ–¹å›¾ç»Ÿè®¡å’Œå †è½¬å‚¨ï¼ˆHeap Dumpï¼‰æ–‡ä»¶ç”Ÿæˆã€‚</td><td><strong>æ·±åº¦å†…å­˜åˆ†æ</strong>ï¼šæ’æŸ¥å†…å­˜æ³„æ¼ã€åˆ†æå †å†…å¯¹è±¡åˆ†å¸ƒã€ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶ä¾›MATç­‰å·¥å…·æ·±åº¦åˆ†æã€‚</td><td><code>jmap -histo:live &lt;pid&gt;</code>ï¼ˆå­˜æ´»å¯¹è±¡ç›´æ–¹å›¾ï¼‰ <code>jmap -dump:live,format=b,file=heap.hprof &lt;pid&gt;</code>ï¼ˆç”Ÿæˆå †è½¬å‚¨ï¼‰</td></tr><tr><td>**<code>jstat</code>**â€‹</td><td><strong>JVMç»Ÿè®¡ç›‘æ§</strong>ï¼šæŒç»­ç›‘æ§JVMå„ç§è¿è¡Œæ—¶æŒ‡æ ‡ï¼Œç‰¹åˆ«æ˜¯åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ç›¸å…³æ•°æ®å’Œç±»åŠ è½½ä¿¡æ¯ã€‚</td><td><strong>å®æ—¶æ€§èƒ½ç›‘æ§</strong>ï¼šç›‘æ§GCè¡Œä¸ºï¼ˆé¢‘ç‡ã€è€—æ—¶ï¼‰ã€å„å†…å­˜åŒºä½¿ç”¨ç‡ã€ç±»åŠ è½½/å¸è½½æƒ…å†µï¼Œç”¨äºæ€§èƒ½è°ƒä¼˜ã€‚</td><td><code>jstat -gcutil &lt;pid&gt; &lt;interval&gt; &lt;count&gt;</code>ï¼ˆGCæƒ…å†µæ‘˜è¦ï¼‰ <code>jstat -gc &lt;pid&gt; 1000 5</code>ï¼ˆGCè¯¦æƒ…ï¼Œæ¯ç§’1æ¬¡å…±5æ¬¡ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-1">Javaåƒåœ¾å›æ”¶ç®—æ³•</h2>
<p>Javaåƒåœ¾å›æ”¶ç®—æ³•ï¼Œåˆ†ä»£åƒåœ¾å›æ”¶ç®—æ³•</p>
<ul>
<li>æ–°ç”Ÿä»£ï¼šå¤åˆ¶ç®—æ³•</li>
<li>è€å¹´ä»£ï¼šæ ‡è®°-æ¸…é™¤ç®—æ³•å’Œæ ‡è®°-æ•´ç†ç®—æ³•</li>
</ul>
<h2 data-id="heading-2">æ’æŸ¥æ€è·¯</h2>
<p>åœ¨è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œå…ˆäº†è§£ä¸‹æˆ‘ä»¬é¡¹ç›®JVMå‚æ•°ä¿¡æ¯.</p>
<pre><code class="hljs language-js" lang="js">jcmd &lt;pid&gt; <span class="hljs-variable constant_">VM</span>.<span class="hljs-property">flags</span>
-<span class="hljs-attr">XX</span>:<span class="hljs-title class_">CICompilerCount</span>=<span class="hljs-number">15</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">InitialHeapSize</span>=<span class="hljs-number">1031798784</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">MaxHeapSize</span>=<span class="hljs-number">16489906176</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">MaxNewSize</span>=<span class="hljs-number">5496635392</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">MinHeapDeltaBytes</span>=<span class="hljs-number">524288</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">NewSize</span>=<span class="hljs-number">343932928</span> -<span class="hljs-attr">XX</span>:<span class="hljs-title class_">OldSize</span>=<span class="hljs-number">687865856</span> -<span class="hljs-attr">XX</span>:+<span class="hljs-title class_">UseCompressedClassPointers</span> -<span class="hljs-attr">XX</span>:+<span class="hljs-title class_">UseCompressedOops</span> -<span class="hljs-attr">XX</span>:+<span class="hljs-title class_">UseFastUnorderedTimeStamps</span> -<span class="hljs-attr">XX</span>:+<span class="hljs-title class_">UseParallelGC</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬ä¸€ç§æƒ…å†µï¼š</h3>
<p>é¡¹ç›®è¿è¡Œåœ¨linuxæœåŠ¡å™¨ä¸Šï¼Œè¿›è¡Œå‹æµ‹ï¼Œå†…å­˜ä»¥è‚‰çœ¼å¯è§çš„é€Ÿåº¦ä¸Šå‡ã€‚
ä½¿ç”¨topå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹å ç”¨å†…å­˜æƒ…å†µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e250f8b1505a49a49810f612f3d92c9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rW36L655o2h55-z5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763629654&amp;x-signature=%2FJ4wiiHRmvzt6DxAYpOWoPWq4Zc%3D" alt="image.png" loading="lazy"/>
è¿™é‡Œä¸»è¦å…³æ³¨ä¸‹<strong>RES</strong>
è¿›ç¨‹å½“å‰å®é™…ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºåˆ°äº¤æ¢ç©ºé—´ï¼ˆswap outï¼‰çš„<strong>ç‰©ç†å†…å­˜</strong>ã€‚åŒ…å«å †å†…å­˜ã€éå †å†…å­˜ã€å †å¤–å†…å­˜ç­‰ã€‚å¦‚æœRESå€¼æŒç»­ä¸Šå‡ï¼Œå †å†…å­˜ä¿æŒç¨³å®šï¼Œè¯´æ˜å †å¤–å†…å­˜åœ¨ä¸Šå‡ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å¼€å§‹è€ƒè™‘ä½¿ç”¨jmapè·å–å †è½¬å­˜å‚¨ã€‚åˆ†æé‚£äº›å¯¹è±¡äº§ç”Ÿçš„æ³„æ¼ã€‚</p>
<h3 data-id="heading-4">å¸¸è§çš„å†…å­˜æ³„æ¼ï¼Œ</h3>
<p>HashMap ã€é˜Ÿåˆ—ã€çº¿ç¨‹æ± ã€websocketç­‰èµ„æºæ²¡æœ‰æ­£ç¡®çš„é‡Šæ”¾ï¼Œå¦å¤–ä¸€ç§æ˜¯æˆ‘ä»¬çš„ç¨‹åºè°ƒç”¨äº†nativeæ–¹æ³•ï¼Œä½†æ²¡æœ‰é‡Šæ”¾èµ„æºã€‚</p>
<p>å‘ç°æ³„æ¼åï¼Œæœ€ç›´æ¥çš„åŠæ³•ç”Ÿæˆjvmå¯¹è±¡å¿«ç…§ã€‚ç”Ÿæˆ<strong>å †è½¬å‚¨</strong>æ–‡ä»¶ï¼Œ</p>
<h3 data-id="heading-5">å†…å­˜åˆ†æå·¥å…·</h3>
<p><strong>MATï¼ˆMemory Analyzer Toolï¼‰</strong> ï¼šæœ€å¸¸ç”¨çš„å †åˆ†æå·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹æ³„æ¼å«Œç–‘äººï¼ˆLeak Suspectsï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1572a88c2cef490da539753a84cf3faa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rW36L655o2h55-z5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763629654&amp;x-signature=1OtTQoTTSvKkemUrH5oeiqaNbWc%3D" alt="image.png" loading="lazy"/>
æ³„æ¼å«Œç–‘ç›´æ¥èƒ½çœ‹åˆ°ä½¿ç”¨websocketç›¸å…³æ“ä½œå¯¼è‡´çš„</p>
<h5 data-id="heading-6">å…³é”®åˆ†ææ­¥éª¤ï¼š</h5>
<ol>
<li>
<p><strong>è¯†åˆ« â€œå¯ç–‘å¤§å¯¹è±¡â€</strong> ï¼š</p>
<ul>
<li>åœ¨ MAT ä¸­æŸ¥çœ‹ â€œHistogramâ€ï¼ˆç›´æ–¹å›¾ï¼‰ï¼ŒæŒ‰ â€œRetained Heapâ€ï¼ˆå¯¹è±¡è¢«å›æ”¶åå¯é‡Šæ”¾çš„å†…å­˜ï¼‰æ’åºï¼Œæ‰¾å‡ºå ç”¨å†…å­˜å‰å‡ åçš„ç±»ï¼ˆå¦‚æŸä¸šåŠ¡ POJOã€é›†åˆç±»ï¼‰ã€‚</li>
<li>å…³æ³¨ â€œShallow Heapâ€ï¼ˆå¯¹è±¡æœ¬èº«å¤§å°ï¼‰å°ä½† â€œRetained Heapâ€ å¤§çš„å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯é›†åˆï¼ŒæŒæœ‰å¤§é‡å­å¯¹è±¡å¼•ç”¨ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿½æº¯å¼•ç”¨é“¾ï¼ˆæ”¯é…æ ‘ / å¼•ç”¨æ ‘ï¼‰</strong> ï¼š</p>
<ul>
<li>å¯¹å¯ç–‘å¯¹è±¡å³é”®é€‰æ‹© â€œMerge Shortest Paths to GC Rootsâ€ï¼ˆæ’é™¤å¼±å¼•ç”¨ / è½¯å¼•ç”¨ç­‰å¯è¢« GC è‡ªåŠ¨å›æ”¶çš„å¼•ç”¨ç±»å‹ï¼‰ï¼ŒæŸ¥çœ‹è°åœ¨ â€œå¼ºå¼•ç”¨â€ è¯¥å¯¹è±¡ã€‚</li>
<li>æ ¸å¿ƒæ˜¯æ‰¾åˆ° â€œæ ¹å¯¹è±¡â€ï¼ˆå¦‚é™æ€å˜é‡ã€çº¿ç¨‹å¯¹è±¡ã€ç±»åŠ è½½å™¨ï¼‰ï¼Œè¿™äº›å¯¹è±¡ä¸ä¼šè¢« GC å›æ”¶ï¼Œè‹¥å…¶å¼•ç”¨é“¾ä¸­åŒ…å«æœ¬åº”é‡Šæ”¾çš„å¯¹è±¡ï¼Œåˆ™å¯¼è‡´æ³„æ¼ã€‚</li>
</ul>
<p>ä¾‹ï¼šè‹¥å‘ç°å¤§é‡<code>User</code>å¯¹è±¡è¢«<code>HashMap</code>æŒæœ‰ï¼Œä¸”<code>HashMap</code>æ˜¯<code>UserCache</code>ç±»çš„é™æ€å˜é‡ï¼Œè€Œ<code>UserCache</code>æœªè®¾ç½®è¿‡æœŸæ¸…ç†é€»è¾‘ï¼Œåˆ™å¯å®šä½ä¸º â€œé™æ€ç¼“å­˜æœªé‡Šæ”¾â€ å¯¼è‡´çš„æ³„æ¼ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windowsæ­å»ºMongoDB(5)ï¼šMongoshæ“ä½œæ•°æ®åº“å¸¸ç”¨å‘½ä»¤æ€»ç»“]]></title>    <link>https://juejin.cn/post/7572021695293571122</link>    <guid>https://juejin.cn/post/7572021695293571122</guid>    <pubDate>2025-11-13T08:53:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572021695293571122" data-draft-id="7571726099689062419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windowsæ­å»ºMongoDB(5)ï¼šMongoshæ“ä½œæ•°æ®åº“å¸¸ç”¨å‘½ä»¤æ€»ç»“"/> <meta itemprop="keywords" content="MongoDB"/> <meta itemprop="datePublished" content="2025-11-13T08:53:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WangHappy"/> <meta itemprop="url" content="https://juejin.cn/user/2137106336976183"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windowsæ­å»ºMongoDB(5)ï¼šMongoshæ“ä½œæ•°æ®åº“å¸¸ç”¨å‘½ä»¤æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2137106336976183/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WangHappy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:53:47.000Z" title="Thu Nov 13 2025 08:53:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯WangHappyï¼Œä¸€å<code>ä¸»ä¸šå‰ç«¯ï¼Œå‰¯ä¸šå…¨æ ˆ</code>çš„ç¨‹åºå‘˜ï¼Œåœ¨è¿™é‡Œæˆ‘ä¼šåˆ†äº«å…³äº<code>å‰ç«¯è¿›é˜¶å…¨æ ˆçš„å¸¸ç”¨æŠ€æœ¯</code>Â å’ŒÂ <code>åŸºæœ¬å…¥é—¨æ“ä½œ</code>ã€‚ å¦‚æœæˆ‘çš„æ–‡ç« èƒ½è®©æ‚¨æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿ï¼ˆè¯„è®ºï¼Œç‚¹èµï¼Œå…³æ³¨ï¼‰ã€‚</p>
<hr/>
<p>åœ¨å‰ç«¯è½¬å‹å…¨æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ node.js æ¥å¼€å‘æœåŠ¡ç«¯ï¼Œè€Œ node.js é‡Œæ“ä½œMongoDBæ•°æ®åº“æœ€å¸¸ç”¨çš„åº“æ˜¯ mongooseï¼Œæ‰€ä»¥ mongosh åœ¨å®é™…å¼€å‘ä¸­çš„ä½¿ç”¨é¢‘ç‡å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œå¤šç”¨äºæµ‹è¯•æˆ–æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€ç­‰åœºæ™¯ã€‚</p>
<p>æœ¬ç« åªè®²è¿° Mongosh ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“åŸºæœ¬çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼ˆCRUDï¼‰å’ŒçŠ¶æ€ä¿¡æ¯è·å–ç­‰æ“ä½œï¼Œèƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä½¿ç”¨å³å¯ã€‚</p>
<h3 data-id="heading-1">1.è¿æ¥æ•°æ®åº“</h3>
<p><strong>1.1 æœ¬åœ°è¿æ¥æ•°æ®åº“</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">mongosh --dbpath <span class="hljs-string">"path/data"</span>
</code></pre>
<p><strong>1.2 è¿œç¨‹è¿æ¥æ•°æ®åº“</strong></p>
<pre><code class="hljs language-xml" lang="xml">mongosh "mongodb://<span class="hljs-tag">&lt;<span class="hljs-name">hostname</span>&gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>"
</code></pre>
<p>ä¸¾ä¾‹ï¼š<code>mongosh "mongodb://192.168.0.0:27017"</code></p>
<p><strong>1.3 è¿œç¨‹è¿æ¥æ•°æ®åº“å¹¶ä½¿ç”¨ç”¨æˆ·åå¯†ç éªŒè¯</strong></p>
<pre><code class="hljs language-xml" lang="xml">mongosh "mongodb://<span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>@<span class="hljs-tag">&lt;<span class="hljs-name">hostname</span>&gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>"
</code></pre>
<p>ä¸¾ä¾‹ï¼š<code>mongosh "mongodb://admin:admin123@192.168.0.0:27017"</code></p>
<h3 data-id="heading-2">2.æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€</h3>
<p><strong>2.1 æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</strong></p>
<pre><code class="hljs">db
</code></pre>
<ul>
<li><strong>åˆ‡æ¢æ•°æ®åº“</strong></li>
</ul>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">use</span> &lt;database_name&gt;
</code></pre>
<p>ä¸¾ä¾‹ï¼š<code>use admin</code></p>
<p>å¦‚æœåˆ‡æ¢çš„æ•°æ®åº“åç§°å½“å‰ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨ <code>insert</code> æ’å…¥æ•°æ®æ—¶è‡ªåŠ¨åˆ›å»º</p>
<blockquote>
<p>æ³¨æ„ï¼šæ˜¯æ’å…¥æ•°æ®æ—¶åˆ›å»ºï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>use</code> åˆ‡æ¢æ—¶åˆ›å»ºã€‚</p>
</blockquote>
<p><strong>2.2 åˆ—å‡ºMongoDBå®ä¾‹ä¸‹æ‰€æœ‰çš„æ•°æ®åº“</strong></p>
<p><code>show databases</code> å¯ä»¥æŸ¥çœ‹ç›®å‰æ‰€æœ‰çš„æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç®€å†™ <code>show dbs</code></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">show</span> databases
</code></pre>
<p><strong>2.3 åˆ—å‡ºå½“å‰æ•°æ®åº“ä¸‹æ‰€æœ‰é›†åˆ</strong></p>
<p>ç†è®ºä¸Šæ¯ä¸ªæ•°æ®åº“ä¸‹éƒ½å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªé›†åˆï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ä¸­çš„ <code>è¡¨</code> çš„æ¦‚å¿µã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">show</span> collections
</code></pre>
<p><strong>2.4 é€€å‡º mongosh</strong></p>
<p>ä½¿ç”¨ <code>exit</code> å¯ä»¥ç›´æ¥é€€å‡ºmongoshæ•°æ®åº“è¿æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ctrl + c</code> å¿«æ·é”®æ¥é€€å‡º</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">exit</span>
</code></pre>
<h3 data-id="heading-3">3.æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥</h3>
<p><strong>3.1 æ’å…¥æ•°æ®</strong></p>
<p>ä½¿ç”¨ <code>insertOne</code> æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä½¿ç”¨ <code>insertMany</code> æ’å…¥å¤šæ¡æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ’å…¥ä¸€æ¡æ•°æ®</span>
db.user.<span class="hljs-title function_ invoke__">insertOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Mike"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> })

<span class="hljs-comment">// æ’å…¥å¤šæ¡æ•°æ®</span>
db.user.<span class="hljs-title function_ invoke__">insertMany</span>([{ <span class="hljs-attr">name</span>: <span class="hljs-string">"Marry"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">"Kerry"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span> }])
</code></pre>
<p><strong>3.2 åˆ é™¤æ•°æ®</strong></p>
<p>ä½¿ç”¨ <code>deleteOne</code> åˆ é™¤å•ä¸ªæ–‡æ¡£ï¼Œä½¿ç”¨ <code>deleteMany</code> åˆ é™¤å¤šä¸ªæ–‡æ¡£</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åˆ é™¤å•ä¸ªæ–‡æ¡£</span>
db.user.<span class="hljs-title function_ invoke__">deleteOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> })

<span class="hljs-comment">// åˆ é™¤å¹´é¾„30å²ä»¥ä¸‹çš„æ•°æ®</span>
db.user.<span class="hljs-title function_ invoke__">deleteMany</span>({ <span class="hljs-attr">age</span>: { <span class="hljs-variable">$lt</span>: <span class="hljs-number">30</span> } })
</code></pre>
<p><strong>3.3 æ›´æ–°æ•°æ®</strong></p>
<p>ä½¿ç”¨ <code>updateOne</code> æ›´æ–°å•ä¸ªæ–‡æ¡£ï¼Œä½¿ç”¨ <code>updateMany</code> æ›´æ–°å¤šä¸ªæ–‡æ¡£</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ›´æ–°å•ä¸ªæ–‡æ¡£</span>
db.user.<span class="hljs-title function_ invoke__">updateOne</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> }, { <span class="hljs-variable">$set</span>: { <span class="hljs-attr">age</span>: <span class="hljs-number">31</span> } })

<span class="hljs-comment">// æ›´æ–°å¤šä¸ªæ–‡æ¡£</span>
db.user.<span class="hljs-title function_ invoke__">updateMany</span>({ <span class="hljs-attr">age</span>: { <span class="hljs-variable">$lt</span>: <span class="hljs-number">30</span> } }, { <span class="hljs-variable">$set</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">"young"</span> } })
</code></pre>
<p><strong>3.4 æŸ¥è¯¢æ•°æ®</strong></p>
<p>ä½¿ç”¨ <code>find</code> æŸ¥è¯¢é›†åˆä¸­æ‰€æœ‰æ•°æ®</p>
<pre><code class="hljs language-lua" lang="lua">db.user.<span class="hljs-built_in">find</span>()
</code></pre>
<p>æŸ¥è¯¢æŸä¸ªæ¡ä»¶çš„æ–‡æ¡£</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æŸ¥è¯¢30å²ä»¥ä¸‹çš„æ•°æ®</span>
db.user.<span class="hljs-title function_ invoke__">find</span>({ <span class="hljs-attr">age</span>: { <span class="hljs-variable">$gte</span>: <span class="hljs-number">30</span> } })
</code></pre>
<p><strong>3.5 åˆ›å»ºç´¢å¼•</strong></p>
<p>ä¸ºæŸä¸ªå­—æ®µåˆ›å»ºç´¢å¼•</p>
<pre><code class="hljs language-css" lang="css">db<span class="hljs-selector-class">.user</span><span class="hljs-selector-class">.createIndex</span>({ name: <span class="hljs-number">1</span> })
</code></pre>
<p><strong>3.6 æŸ¥çœ‹å½“å‰é›†åˆä¸‹çš„æ‰€æœ‰ç´¢å¼•</strong></p>
<pre><code class="hljs language-scss" lang="scss">db<span class="hljs-selector-class">.users</span><span class="hljs-selector-class">.getIndexes</span>()
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç é€šå¸¸ä¼šè¿”å›ä¸¤ä¸ªç´¢å¼•ï¼Œ<code>_id</code> å’Œ <code>name</code></p>
<p><code>_id</code> ç´¢å¼•ï¼šæ˜¯è‡ªåŠ¨åˆ›å»ºï¼Œç”¨äºç¡®ä¿æ¯æ¡æ•°æ®çš„å”¯ä¸€æ€§ã€‚</p>
<p><code>name</code> ç´¢å¼•ï¼šè‡ªå®šä¹‰ç´¢å¼•ï¼Œæ–¹ä¾¿å¯¹æŒ‡å®šå­—æ®µçš„æŸ¥è¯¢æ“ä½œï¼Œä¾‹å¦‚ <code>name: 1</code> è¡¨ç¤ºæŒ‰å‡åºæ’åˆ—ï¼Œå¦‚æœæ”¹ä¸º <code>name: -1</code> è¡¨ç¤ºé™åºã€‚</p>
<h3 data-id="heading-4">4.å…¶å®ƒå‘½ä»¤</h3>

















<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>version()</td><td>æŸ¥çœ‹å½“å‰ä½¿ç”¨ <code>mongosh</code> çš„ç‰ˆæœ¬</td></tr><tr><td>help</td><td>æŸ¥çœ‹ <code>mongosh</code> çš„å¸®åŠ©ä¿¡æ¯, æŸ¥çœ‹æŸä¸ªå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œ<code>&lt;name&gt;.help()</code>, ä¾‹å¦‚ï¼šdb.help()</td></tr></tbody></table>
<h3 data-id="heading-5">å†™åœ¨æœ€å</h3>
<hr/>
<p>æœ¬ç« æ•´ç†äº† <code>mongosh</code> ä¸­ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œæ–¹ä¾¿å¤§å®¶åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å‚è€ƒã€‚è™½ç„¶ <code>mongosh</code> åŠŸèƒ½å¼ºå¤§ï¼Œä½†åƒ <strong>èšåˆæŸ¥è¯¢</strong>ç­‰æ›´è´´è¿‘ä¸šåŠ¡åœºæ™¯çš„åŠŸèƒ½ï¼Œæˆ‘é€šå¸¸ä¼šé€šè¿‡ <code>mongoose</code> æ¥å®ç°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ç»§ç»­ç¼–å†™å…³äº <code>node.js + mongoose</code> çš„ä½¿ç”¨æ•™ç¨‹ï¼Œå¹¶ä¸å¤§å®¶åˆ†äº«æ›´å¤šå®è·µç»éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android httpç½‘ç»œè¯·æ±‚çš„é‚£äº›äº‹å„¿]]></title>    <link>https://juejin.cn/post/7572132100326441010</link>    <guid>https://juejin.cn/post/7572132100326441010</guid>    <pubDate>2025-11-13T08:59:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572132100326441010" data-draft-id="7572016447804080154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android httpç½‘ç»œè¯·æ±‚çš„é‚£äº›äº‹å„¿"/> <meta itemprop="keywords" content="OKHttp,HTTP"/> <meta itemprop="datePublished" content="2025-11-13T08:59:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©èŠ±æ¿ä¹‹æ‹"/> <meta itemprop="url" content="https://juejin.cn/user/2027980375463565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android httpç½‘ç»œè¯·æ±‚çš„é‚£äº›äº‹å„¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2027980375463565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©èŠ±æ¿ä¹‹æ‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:59:51.000Z" title="Thu Nov 13 2025 08:59:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1.httpåè®®</h3>
<p>httpåè®®é€šå¸¸æ˜¯åŸºäº<code>TCP/IT</code>åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚åè®®ï¼Œhttpé»˜è®¤ç«¯å£æ˜¯<code>80</code>ï¼Œhttpsé»˜è®¤ç«¯å£æ˜¯<code>443</code>ã€‚</p>
<p>httpåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ï¼ŒåŸºäºè¯·æ±‚/å“åº”çš„æ¨¡å‹ï¼Œå…ˆæœ‰è¯·æ±‚ï¼Œå†æœ‰å“åº”ã€‚</p>
<p>httpè¯·æ±‚æŠ¥æ–‡åŒ…æ‹¬ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“</p>
<p>httpå“åº”æŠ¥æ–‡åŒ…æ‹¬ï¼šå“åº”è¡Œã€å“åº”å¤´ã€å“åº”ä½“</p>
<h3 data-id="heading-1">2.httpè¯·æ±‚æŠ¥æ–‡ç»“æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1061d774eb6442d860799c0d7ffd8d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6Iqx5p2_5LmL5oGL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763629190&amp;x-signature=0vzUkq1wpQuA8XbiHtxi4XcDFXc%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>è¯·æ±‚è¡Œ</strong>ï¼š
ä¸»è¦åŒ…æ‹¬è¯·æ±‚æ–¹å¼ä»¥åŠè¯·æ±‚ç›®æ ‡çš„<code>URL</code>
ä¾‹å¦‚ï¼š<em>POST /chapter17/user.html HTTP/1.1</em></p>
<p><code>POST</code>ä»£è¡¨è¯·æ±‚æ–¹å¼ï¼Œ <code>/chapter17/user.html</code>è¡¨ç¤ºè¯·æ±‚çš„URL</p>
</li>
<li>
<p><strong>è¯·æ±‚å¤´</strong>ï¼š
åŒ…å«ä¸€äº›key-valueå€¼ï¼Œä¸»è¦åŒ…æ‹¬Cookieå€¼ã€è¯·æ±‚ä½“çš„æ•°æ®ç±»å‹ã€è¯·æ±‚ä½“çš„æ•°æ®é•¿åº¦ç­‰ä¾‹å¦‚ï¼š</p>
<p>Content-Type: application/x-www-form-urlencoded</p>
<p>Content-Length: 37</p>
<p>Cookie: token_pass=92595c118b66417c395eb125e12c3438</p>
</li>
<li>
<p><strong>è¯·æ±‚ä½“</strong>ï¼š
å…·ä½“çš„æ•°æ®ï¼Œæ¯”å¦‚ç™»é™†æ—¶å€™çš„ç”¨æˆ·åå’Œå¯†ç ï¼š
username=gandalf&amp;password=19920930yus</p>
</li>
</ul>
<h3 data-id="heading-2">3.httpä¸åŒè¯·æ±‚æ–¹å¼</h3>
<p>è¯·æ±‚æ–¹å¼æœ‰å¤šç§ï¼Œå¸¸è§çš„æœ‰<code>GET</code>ã€<code>POST</code>å’Œ<code>HEAD</code></p>
<ul>
<li>
<p><strong>GETè¯·æ±‚</strong>ï¼š
GETè¯·æ±‚æ²¡æœ‰è¯·æ±‚ä½“ï¼Œä¼šæŠŠå‚æ•°ç›´æ¥åŠ åœ¨URLåé¢ï¼Œä¸å®‰å…¨ï¼Œå¹¶ä¸”æœ‰é•¿åº¦é™åˆ¶ã€‚
ä½†è¯·æ±‚ç®€å•ï¼Œæ˜¯HTTPè¯·æ±‚ä¸­ä½¿ç”¨æœ€å¤šçš„æ–¹å¼ã€‚</p>
</li>
<li>
<p><strong>POSTè¯·æ±‚</strong>ï¼š
è¯·æ±‚çš„å‚æ•°åœ¨è¯·æ±‚å¤´å†…ï¼Œè¾ƒå®‰å…¨ï¼Œä¸”æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œé€‚åˆæäº¤è¾ƒå¤§çš„è¡¨å•æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>HEADè¯·æ±‚</strong>ï¼š
è·ŸGETç›¸ä¼¼ï¼Œåªæ˜¯æœåŠ¡å™¨åªä¼šè¿”å›å“åº”å¤´ï¼Œé€šå¸¸åªä¸ºäº†æŸ¥è¯¢æŸä¸ªé¡µé¢çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">4.httpå“åº”æŠ¥æ–‡ç»“æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71acc7d6843640139ef47c383ba9ac62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6Iqx5p2_5LmL5oGL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763629190&amp;x-signature=pkD6QZdS8M1WokSvDtdmnevwSYA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å“åº”è¡Œ</strong>ï¼š
ä¸»è¦åŒ…å«çŠ¶æ€ç </p>
<p>1xx:æŒ‡ç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</p>
<p>2xx:æˆåŠŸï¼Œè¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥å—</p>
<p>3xx:é‡å®šå‘</p>
<p>4xx:å®¢æˆ·ç«¯é”™è¯¯</p>
<p>5xx:æœåŠ¡å™¨ç«¯é”™è¯¯</p>
</li>
<li>
<p><strong>å“åº”å¤´</strong>ï¼š
åŒ…å«å¤šä¸ª<code>key-value</code>å¯¹ï¼Œä¸»è¦åŒ…æ‹¬ï¼š<code>Content-Type</code>å“åº”æ­£æ–‡çš„ç±»å‹ï¼ˆMIMEç±»å‹ï¼‰ã€Set-Cookie äºä¼šè¯çŠ¶æ€ç›¸å…³çš„<code>Cookie</code>æŠ€æœ¯</p>
</li>
<li>
<p><strong>å“åº”ä½“</strong>ï¼š
æ•°æ®å†…å®¹ï¼Œå¸¸ç”¨çš„å¦‚<code>json</code>çº¯æ–‡æœ¬å†…å®¹ã€å›¾ç‰‡æ•°æ®ç­‰</p>
</li>
</ul>
<h3 data-id="heading-4">5.httpsåè®®</h3>
<p>ç”±äº<code>http</code>æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œä¿¡æ¯å®¹æ˜“è¢«ç¯¡æ”¹å’Œçªƒå–ï¼Œæ‰€ä»¥å¢åŠ äº†<code>https</code>åè®®ã€‚</p>
<p>httpsåè®®æ˜¯åœ¨httpåè®®çš„åŸºç¡€ä¸Šï¼Œå¯¹æŠ¥æ–‡åšäº†å¯¹ç§°åŠ å¯†çš„å¤„ç†ï¼Œå¹¶ä¸”åŠ å¯†å¯†é’¥åªä¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿å­˜ï¼Œä¿è¯äº†ä¿¡æ¯çš„å®‰å…¨ã€‚</p>
<p>httpsåè®®çš„å‰æï¼Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ªå…¬æ­£æƒå¨çš„æœºæ„ï¼Œå«<code>CA</code>æœºæ„ï¼Œå®ƒå†…éƒ¨ç»´æŠ¤äº†ä¸€å¥—éå¯¹ç§°åŠ å¯†çš„<code>å…¬é’¥P</code>å’Œ<code>ç§é’¥P'</code>ï¼Œå…¬é’¥Pä¼šå‘å¸ƒå‡ºæ¥ï¼Œæµè§ˆå™¨ä¼šå†…ç½®è¿™ä¸ªå…¬é’¥ã€‚</p>
<p>ä¸€ä¸ªç½‘ç«™å¦‚æœè¦ä½¿ç”¨httpsåè®®ï¼Œéœ€è¦å…ˆåœ¨CAç”³è¯·æ•°å­—è¯ä¹¦ã€‚</p>
<h3 data-id="heading-5">6.httpsåè®®åŠ å¯†è¿‡ç¨‹</h3>
<p>å‰ç½®æ¡ä»¶å®Œæ¯•ï¼Œæ¥ä¸‹æ¥çœ‹å…·ä½“çš„æ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆç½‘ç«™æœ‰ä¸€å¯¹<code>å…¬é’¥P1</code>å’Œ<code>ç§é’¥P1â€™</code>ï¼Œç„¶åæŠŠåŒ…å«ç½‘ç«™å…¬é’¥P1ã€åŸŸåç­‰ä¿¡æ¯çš„æ•°æ®Dataæä¾›ç»™CAæœºæ„ã€‚</li>
<li>CAå¯¹Dataåš<code>Hash</code>ç®—æ³•å¾—åˆ°ä¸€æ®µ<code>æ•£åˆ—ç H</code>ï¼›ç”¨P'å¯¹HåšåŠ å¯†å¾—åˆ°æ•°å­—<code>ç­¾åS</code>ï¼›æŠŠSå’ŒDataæ•°æ®æ‰“åŒ…ä¸€èµ·å°±æ˜¯æ•°å­—è¯ä¹¦ï¼Œç»™åˆ°ç½‘ç«™ã€‚</li>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹httpè¿æ¥ä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šæŠŠæ•°å­—è¯ä¹¦å‘ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯ä¼šå¾—åˆ°æ•°å­—ç­¾åSå’ŒåŸå§‹æ•°æ®Dataï¼Œç„¶åä½¿ç”¨CAçš„å…¬é’¥På¯¹Sè§£å¯†å¾—åˆ°<code>æ•£åˆ—ç H</code>ã€‚</li>
<li>å®¢æˆ·ç«¯ä¼šå¯¹DataåšåŒæ ·çš„hashç®—æ³•å¾—åˆ°<code>æ•£åˆ—ç H'</code>ï¼Œåˆ¤æ–­H'å’ŒHæ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¡¨ç¤º<code>å…¬é’¥P1</code>æ˜¯å¯ä¿¡çš„ã€‚</li>
<li>å®¢æˆ·ç«¯ä¼šé’ˆå¯¹æ­¤æ¬¡å¯¹è¯éšæœºç”Ÿæˆä¸€ä¸ªå¯¹ç§°åŠ å¯†å¯†é’¥<code>SK</code>ï¼Œå¹¶ä½¿ç”¨P1å¯¹SKä¿¡æ¯åšåŠ å¯†ï¼Œä¼ é€’ç»™æœåŠ¡å™¨ã€‚</li>
<li>æœåŠ¡å™¨åœ¨æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®åï¼Œä½¿ç”¨è‡ªå·±çš„ç§é’¥P1'åšè§£ç ï¼Œè·å–åˆ°äº†æœ¬æ¬¡çš„SKï¼Œå¹¶å¼€å§‹åšåŠ å¯†é€šä¿¡ã€‚</li>
</ol>
<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d62b7b541547e49296152044c889be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6Iqx5p2_5LmL5oGL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763629190&amp;x-signature=ho94erorHsoj7cYkbMIwBz5M7Fc%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>å…³é”®ç‚¹è¡¥å……</strong>ï¼š
CAçš„å­˜åœ¨æ˜¯ä¸ºäº†ä¿è¯å®¢æˆ·ç«¯åˆ¤æ–­æ¥è‡ªæœåŠ¡å™¨å…¬é’¥çš„å¯é æ€§ã€‚
å‰æœŸéå¯¹ç§°åŠ å¯†çš„ä¸€ç³»åˆ—åŠ¨ä½œï¼Œæ˜¯ä¸ºäº†ä¿è¯æœ€åå¯¹ç§°åŠ å¯†çš„å¯†é’¥ä¸èƒ½è¢«ç¬¬ä¸‰æ–¹è·å–ã€‚
æœ€åé€šä¿¡æ•°æ®ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼ˆ<code>AESï¼‰</code>ï¼Œæ˜¯å› ä¸ºéå¯¹ç§°åŠ å¯†å¾ˆè€—æ€§èƒ½ï¼Œè€Œå¯¹ç§°åŠ å¯†æ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
<h3 data-id="heading-6">7.Cookie</h3>
<p>ç”±äº<code>http/https</code>æ˜¯æ²¡æœ‰çŠ¶æ€çš„åè®®ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯è¯·æ±‚/åº”ç­”æ¨¡å¼ï¼Œè€Œæœ‰äº›æ•°æ®çš„è¯·æ±‚æ˜¯éœ€è¦æœ‰çŠ¶æ€çš„ï¼Œæ¯”å¦‚ï¼š
è¯·æ±‚æ”¶è—åˆ—è¡¨æ•°æ®ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯éœ€è¦å…ˆç™»é™†æ‰è¡Œï¼Œå¦åˆ™å°±ä¼šæç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">{<span class="hljs-string">"errorCode"</span>:-<span class="hljs-number">1001</span>,<span class="hljs-string">"errorMsg"</span>:<span class="hljs-string">"è¯·å…ˆç™»å½•ï¼"</span>}
</code></pre>
<p>å› æ­¤å¼•å…¥äº†<code>Cookie</code>æŠ€æœ¯ã€‚</p>
<p>é¦–å…ˆæœåŠ¡ç«¯ä¼šåœ¨å“åº”å¤´ä¸­å¸¦æœ‰<code>Set-Cookie </code>å­—æ®µçš„æ•°æ®ï¼Œå½“å®¢æˆ·ç«¯è§£æåˆ°è¿™æ ·çš„å“åº”å¤´æ•°æ®æ—¶ï¼Œå°±å¯ä»¥æŠŠè¿™äº›æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ã€‚</p>
<p>å½“å®¢æˆ·ç«¯ä¸‹æ¬¡è¦å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠè¿™äº›Cookieå†™å…¥åˆ°è¯·æ±‚å¤´ä¸­ï¼Œè¿™æ ·æœåŠ¡ç«¯å°±å¯ä»¥æ¸…æ¥šçŠ¶æ€å¹¶è¿”å›æ­£ç¡®çš„æ•°æ®äº†ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬ç™»é™†äº†WanAndroidè´¦å·ä¹‹åï¼ŒæœåŠ¡ç«¯è¿”å›çš„å“åº”æŠ¥æ–‡å¤´åŒ…å«ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Set-Cookie: JSESSIONID=354B46332F155D0823934D17025C01CB; Path=/; Secure; HttpOnly
Set-Cookie: loginUserName=gandalf; Expires=Fri, <span class="hljs-number">12</span>-Dec-<span class="hljs-number">2025</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">21</span> GMT; Path=/
Set-Cookie: token_pass=92595c118b66417c395eb125e12c3438; Expires=Fri, <span class="hljs-number">12</span>-Dec-<span class="hljs-number">2025</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">21</span> GMT; Path=/
Set-Cookie: loginUserName_wanandroid_com=gandalf; Domain=wanandroid.com; Expires=Fri, <span class="hljs-number">12</span>-Dec-<span class="hljs-number">2025</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">21</span> GMT; Path=/
Set-Cookie: token_pass_wanandroid_com=92595c118b66417c395eb125e12c3438; Domain=wanandroid.com; Expires=Fri, <span class="hljs-number">12</span>-Dec-<span class="hljs-number">2025</span> <span class="hljs-number">07</span>:<span class="hljs-number">00</span>:<span class="hljs-number">21</span> GMT; Path=/
</code></pre>
<p>å½“æˆ‘ä»¬è¯·æ±‚æ”¶è—æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦æŠŠä»¥ä¸Šçš„Cookieä¿¡æ¯å¸¦ä¸Šï¼Œè¿™æ ·å°±ä¼šè·å–åˆ°æ”¶è—åˆ—è¡¨æ•°æ®äº†ï¼Œå¦åˆ™å°±ä¼šæç¤ºâ€œè¯·å…ˆç™»å½•ï¼â€ã€‚</p>
<h3 data-id="heading-7">8.OkHttp</h3>
<p>Androidä½¿ç”¨httpç½‘ç»œåè®®çš„åˆ©å™¨ï¼Œå®ƒè´Ÿè´£å¤„ç†<code>HTTP/1.1</code>ã€<code>HTTP/2</code>ã€<code>SPDY</code>çš„è¯·æ±‚å’Œå“åº”ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè£…å¤‡ç²¾è‰¯çš„â€œå¿«é€’å‘˜â€ã€‚</p>
<p>OkHttp è´Ÿè´£å¤„ç†æ‰€æœ‰ç½‘ç»œé€šä¿¡çš„åº•å±‚è„æ´»ç´¯æ´»ï¼š</p>
<ul>
<li>é€šè¿‡è¿æ¥æ±  <code>ConnectionPool</code>ï¼Œé«˜æ•ˆåœ°å¤ç”¨ <code>TCP </code>è¿æ¥ï¼›</li>
<li><code>socket</code>è‡ªåŠ¨é€‰æ‹©æœ€å¥½è·¯çº¿ï¼Œå¹¶æ”¯æŒè‡ªåŠ¨é‡è¿ï¼›</li>
<li>æ‹¥æœ‰é˜Ÿåˆ—çº¿ç¨‹æ± ï¼Œè½»æ¾å†™å¹¶å‘ï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼›</li>
<li>æ‹¥æœ‰å¼ºå¤§çš„æ‹¦æˆªå™¨æœºåˆ¶ï¼ˆ<code>interceptors</code>ï¼‰ï¼Œå¯ä»¥è½»æ¾ä¿®æ”¹è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ï¼Œæ¯”å¦‚ç»Ÿä¸€ä¿®æ”¹è¯·æ±‚å¤´ã€æ—¥å¿—è®°å½•ã€åŠ è§£å¯†ã€Cookieç¼“å­˜ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-8">9.OkHttpçš„æ‰§è¡Œæµç¨‹</h3>
<ol>
<li>é¦–å…ˆéœ€è¦æ„é€ ä¸€ä¸ª<code>OkHttpClient</code>å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åœ¨å®¢æˆ·ç«¯é…ç½®ç›¸å…³çš„æ‹¦æˆªå™¨å’Œç›‘å¬å™¨ï¼Œä»¥ä¾¿æ‰©å±•è‡ªå®šä¹‰çš„æ“ä½œã€‚</li>
<li>æ„å»º<code>Request</code>è¯·æ±‚ç±»ï¼ŒåŒ…å«<code>URL</code>ã€<code>Post</code>å‚æ•°ç­‰ä¿¡æ¯ã€‚</li>
<li>ç„¶åé€šè¿‡OkHttpClientå®¢æˆ·ç«¯å»æ„å»ºä¸€ä¸ª<code>Call</code>ç±»å‹çš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€æ¬¡è¯·æ±‚ã€‚Callæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ–¹æ³•æ˜¯<code>executeï¼ˆï¼‰</code>ï¼Œè¡¨ç¤ºåŒæ­¥æ‰§è¡Œè¯·æ±‚ï¼›
å¦ä¸€ä¸ªæ–¹æ³•æ˜¯<code>enqueueï¼ˆï¼‰</code>ï¼Œè¡¨ç¤ºæŠŠè¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œå®é™…ä¼šè¿›å…¥åˆ°Dispatcherçš„<code>runningAsyncCalls</code>è¿™æ ·çš„ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç­‰å¾…å¼‚æ­¥æ‰§è¡Œã€‚</li>
<li>ä¸ç®¡æ˜¯åŒæ­¥æ‰§è¡Œè¿˜æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆæ„å»ºä¸€ä¸ªæ‹¦æˆªå™¨é“¾ï¼ˆ<code>RealInterceptorChain</code>ï¼‰ï¼Œå®ƒä¼šaddå¾ˆå¤šé»˜è®¤çš„æˆ–è€…æˆ‘ä»¬è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ã€‚</li>
<li>ä¸€ä¸ªæ‹¦æˆªå™¨æ‰§è¡Œå®Œä¹‹åï¼Œä¼šè°ƒç”¨ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œç›´åˆ°è°ƒç”¨åˆ°æœ€åä¸€ä¸ª<code>CallServiceInterceptor</code>å¹¶è¿”å›ä¸€ä¸ª<code>Response</code>ã€‚</li>
</ol>
<h3 data-id="heading-9">10.OkHttpä½¿ç”¨ç¤ºä¾‹</h3>
<p>åªä½¿ç”¨OkHttpçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦å‘èµ·ä¸€æ¬¡ç™»é™†è¯·æ±‚ï¼Œåˆ™ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åˆ›å»ºå®¢æˆ·ç«¯</span>
<span class="hljs-keyword">val</span> client = OkHttpClient()

<span class="hljs-comment">// 2. æ‰‹åŠ¨æ„å»ºè¯·æ±‚ (URL, è¯·æ±‚å¤´, è¯·æ±‚ä½“)</span>
<span class="hljs-keyword">val</span> requestBody = FormBody.Builder()
    .add(<span class="hljs-string">"username"</span>, <span class="hljs-string">"gandalf"</span>)
    .add(<span class="hljs-string">"password"</span>, <span class="hljs-string">"1234567"</span>)
    .build()

<span class="hljs-keyword">val</span> request = Request.Builder()
    .url(<span class="hljs-string">"https://api.example.com/login"</span>)
    .post(requestBody)
    .build()


<span class="hljs-comment">// 3. å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œå¹¶æ‰‹åŠ¨å¤„ç†å›è°ƒ</span>
client.newCall(request).enqueue(<span class="hljs-keyword">object</span> : Callback {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, e: <span class="hljs-type">IOException</span>)</span></span> {
        <span class="hljs-comment">// å¤„ç†ç½‘ç»œå¤±è´¥</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, response: <span class="hljs-type">Response</span>)</span></span> {
        <span class="hljs-comment">// åœ¨å­çº¿ç¨‹ä¸­</span>
        <span class="hljs-keyword">val</span> responseBodyString = response.body?.string()
        <span class="hljs-comment">// 4. æ‰‹åŠ¨è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">val</span> user = Gson().fromJson(responseBodyString, User::<span class="hljs-keyword">class</span>.java)
        <span class="hljs-comment">// 5. æ‰‹åŠ¨åˆ‡æ¢å›ä¸»çº¿ç¨‹æ›´æ–° UI</span>
    }
})
</code></pre>
<p>è¿™é‡Œåˆ›å»ºçš„OkHttpClientå®¢æˆ·ç«¯æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå¦‚æœæƒ³è¦æ·»åŠ å…¶ä»–é…ç½®é¡¹ï¼Œæ¯”å¦‚<code>Cookie</code>çš„æ“ä½œã€<code>httpæ—¥å¿—</code>æ‰“å°æ“ä½œç­‰ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œåšé…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> intercepter = HttpLoggingInterceptor().apply {
        level = HttpLoggingInterceptor.Level.BODY
    }

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> okhttpClient = OkHttpClient.Builder()
        .readTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)   <span class="hljs-comment">// è¯»è¶…æ—¶æ—¶é—´</span>
        .writeTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)  <span class="hljs-comment">// å†™è¶…æ—¶æ—¶é—´</span>
        .connectTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS) <span class="hljs-comment">//è¿æ¥è¶…æ—¶æ—¶é—´</span>
        .addInterceptor(intercepter)  <span class="hljs-comment">// æ·»åŠ æ—¥å¿—æ‰“å°çš„æ‹¦æˆªå™¨</span>
	.cookieJar(MyCookieJar()) <span class="hljs-comment">//æ·»åŠ Cookieæ“ä½œ</span>
        .build()
</code></pre>
<p>è¿™é‡Œå®ç°äº†CookieJaræ¥å£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCookieJar</span> : <span class="hljs-type">CookieJar</span> {
    <span class="hljs-comment">//Httpå‘é€è¯·æ±‚å‰å›è°ƒï¼ŒRequestä¸­è®¾ç½®Cookie</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadForRequest</span><span class="hljs-params">(url: <span class="hljs-type">HttpUrl</span>)</span></span>: List&lt;Cookie&gt; {
        <span class="hljs-keyword">val</span> cookieList = mutableListOf&lt;Cookie&gt;()
        CookieManager.getInstance().getCookie(url.host)?.let {
            <span class="hljs-keyword">if</span> (it.isNotEmpty()) {
                <span class="hljs-keyword">val</span> cookies = it.split(<span class="hljs-string">";"</span>.toRegex())
                <span class="hljs-keyword">for</span> (cookie <span class="hljs-keyword">in</span> cookies) {
                    Cookie.parse(url, cookie)?.apply {
                        cookieList.add(<span class="hljs-keyword">this</span>)
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> cookieList
    }


    <span class="hljs-comment">//Httpè¯·æ±‚ç»“æŸï¼ŒResponseä¸­æœ‰Cookieæ—¶å€™å›è°ƒï¼Œå¹¶åœ¨å›è°ƒä¸­å®ç°Cookieçš„ä¿å­˜</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveFromResponse</span><span class="hljs-params">(
        url: <span class="hljs-type">HttpUrl</span>,
        cookies: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Cookie</span>&gt;
    )</span></span> {
        <span class="hljs-keyword">val</span> cookieManager = CookieManager.getInstance()
        cookieManager.setAcceptCookie(<span class="hljs-literal">true</span>)
        <span class="hljs-keyword">for</span> (cookie <span class="hljs-keyword">in</span> cookies) {
            cookieManager.setCookie(url.toString(), cookie.toString())
        }
        cookieManager.flush()
    }
}
</code></pre>
<h3 data-id="heading-10">11. Retrofit</h3>
<p><code>Retrofit</code>æ˜¯ä¸€ç§æ›´é«˜å±‚çº§çš„å°è£…ï¼Œå®ƒè®©å¼€å‘è€…æ›´å®¹æ˜“å»æè¿°â€œåšä»€ä¹ˆâ€ã€‚è€Œå®ƒè‡ªå·±ä¼šæŠŠè¿™äº›ä¸šåŠ¡å±‚çš„é€»è¾‘è½¬æ¢æˆOkHttpèƒ½å¤Ÿè¯†åˆ«çš„æŒ‡ä»¤ï¼Œå…·ä½“â€œæ€ä¹ˆåšâ€çš„äº‹æƒ…ï¼Œå°±äº¤ç»™OkHttpå»å®Œæˆã€‚</p>
<p>Retrofitçš„ä¼˜åŠ¿æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>APIæ¥å£åŒ–</strong>ï¼šä½¿ç”¨ç®€å•çš„Interfaceæ¥å£æ¥å®šä¹‰ä¸€ç»„ä¸šåŠ¡å…³ç³»APIã€‚</li>
<li><strong>æ³¨è§£é©±åŠ¨</strong>ï¼šé€šè¿‡ <code>@GET``````@POST</code>, <code>@Path</code>, <code>@Query</code>, <code>@Body </code>ç­‰æ³¨è§£ï¼Œä½ å¯ä»¥æ¸…æ™°åœ°æè¿°æ¯ä¸ªè¯·æ±‚çš„ URLã€HTTP æ–¹æ³•ã€å‚æ•°å’Œè¯·æ±‚ä½“</li>
<li><strong>åºåˆ—åŒ–/ååºåˆ—åŒ–</strong>ï¼šé€šè¿‡å¯è‡ªç”±é…ç½®çš„è½¬æ¢å™¨ï¼ˆ<code>Converter</code>ï¼‰ï¼Œå¦‚<code>retrofit2:converter-gson</code>ï¼Œè‡ªåŠ¨å°† å¯¹è±¡è½¬æ¢æˆè¯·æ±‚ä½“JSONï¼Œä»¥åŠå°†å“åº”ä½“JSONè‡ªåŠ¨è½¬æ¢æˆå®šä¹‰å¥½çš„æ•°æ®æ¨¡å‹å¯¹è±¡ï¼ˆData Classï¼‰ã€‚</li>
<li><strong>é€‚é…åç¨‹</strong>ï¼šèƒ½å°†æ ‡å‡†çš„ç½‘ç»œè°ƒç”¨æ— ç¼é›†æˆåˆ°åç¨‹æ¡†æ¶ä¸­</li>
</ol>
<p>åŸºæœ¬ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åœ¨æ¥å£ä¸­å£°æ˜ API</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-meta">@POST(<span class="hljs-string">"login"</span>)</span>
    <span class="hljs-meta">@FormUrlEncoded</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-meta">@Field(<span class="hljs-string">"username"</span>)</span> username: <span class="hljs-type">String</span>)</span></span>: User
}

<span class="hljs-comment">// 2. åˆ›å»º Retrofit å®ä¾‹ (å®ƒå†…éƒ¨ä¼šæŒæœ‰å¹¶ä½¿ç”¨ä¸€ä¸ª OkHttpClient)</span>
<span class="hljs-keyword">val</span> retrofit = Retrofit.Builder()
    .baseUrl(<span class="hljs-string">"https://api.example.com/"</span>)
    .client(myOkHttpClient) <span class="hljs-comment">// æŠŠ OkHttp å¼•æ“è£…è¿›å»</span>
    .addConverterFactory(GsonConverterFactory.create())
    .build()

<span class="hljs-keyword">val</span> apiService = retrofit.create(ApiService::<span class="hljs-keyword">class</span>.java)

<span class="hljs-comment">// 3. åœ¨åç¨‹ä¸­åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨ API</span>
viewModelScope.launch {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> user = apiService.login(<span class="hljs-string">"test"</span>)  <span class="hljs-comment">// ç›´æ¥å¾—åˆ° User å¯¹è±¡ï¼Œä¸ç”¨å…³å¿ƒ JSON è§£æå’Œçº¿ç¨‹åˆ‡æ¢</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†æ‰€æœ‰é”™è¯¯</span>
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ .asStateFlow() è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572132100326539314</link>    <guid>https://juejin.cn/post/7572132100326539314</guid>    <pubDate>2025-11-13T09:18:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572132100326539314" data-draft-id="7572130072262524974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ .asStateFlow() è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼ï¼Ÿ"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2025-11-13T09:18:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»˜å¥‘ä¹‹è¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956197501854"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ .asStateFlow() è€Œä¸æ˜¯ç›´æ¥èµ‹å€¼ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956197501854/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»˜å¥‘ä¹‹è¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:18:34.000Z" title="Thu Nov 13 2025 09:18:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è®°å½•å¼€å‘è¿‡ç¨‹ä¸­ç–‘é—®ï¼Œå¦‚æœè¯´çš„ä¸å¯¹ï¼Œæ¬¢è¿æå‡ºä¿®æ”¹</p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†ä¸¤ä¸ª<code>MutableStateFlow</code>å’Œä¸¤ä¸ª<code>StateFlow</code>åšè¯´æ˜ï¼Œå…¶ä¸­strListæ˜¯ç”±<code>_strList.asStateFlow()</code>èµ‹å€¼ï¼Œè€Œ<code>str2List</code>ç”±<code>_strList</code>ç›´æ¥èµ‹å€¼ã€‚è¿™ä¸¤ç§åœ¨ä»£ç è¿è¡Œéƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘å¯¹æ­¤æœ‰ç–‘é—®ï¼Œä»è€Œåšä¸‹ç¬”è®°æ¢³ç†</p>
</blockquote>
<h3 data-id="heading-0">ç¤ºä¾‹ä»£ç åŠè¿è¡Œç»“æœ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _strList = MutableStateFlow&lt;List&lt;String&gt;&gt;(listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>))
<span class="hljs-keyword">val</span> strList: StateFlow&lt;List&lt;String&gt;&gt; = _strList.asStateFlow()

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _str2List = MutableStateFlow&lt;List&lt;String&gt;&gt;(listOf(<span class="hljs-string">"X"</span>, <span class="hljs-string">"Y"</span>, <span class="hljs-string">"Z"</span>))
<span class="hljs-keyword">val</span> str2List: StateFlow&lt;List&lt;String&gt;&gt; = _str2List

<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testAsStateFlow</span><span class="hljs-params">()</span></span> = runTest {
    launch {
        strList.collect { println(<span class="hljs-string">"strList æ”¶åˆ°æ–°å€¼: <span class="hljs-variable">$it</span>"</span>) }
    }
    launch {
        delay(<span class="hljs-number">500</span>) 
        (strList <span class="hljs-keyword">as</span>? MutableStateFlow)?.value = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>)
    }
    launch {
        str2List.collect { println(<span class="hljs-string">"str2List æ”¶åˆ°æ–°å€¼: <span class="hljs-variable">$it</span>"</span>) }
    }
    launch {
        delay(<span class="hljs-number">500</span>)
        (str2List <span class="hljs-keyword">as</span>? MutableStateFlow)?.value = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"X"</span>, <span class="hljs-string">"Y"</span>, <span class="hljs-string">"Z"</span>)
    }
}
</code></pre>
<p>ä¸‹é¢æ˜¯è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹å‡ºé€šè¿‡.<code>asStateFlow</code>() èµ‹å€¼çš„<code>strList</code> æ— æ³•ç›´æ¥é€šè¿‡<code>asStateFlow</code>è½¬æ¢ä»è€Œä¿®æ”¹å‚æ•°,è€Œ<code>str2List</code>å´å¯ä»¥</p>
<p><strong>strList æ”¶åˆ°æ–°å€¼: [A, B, C]</strong></p>
<p><strong>str2List æ”¶åˆ°æ–°å€¼: [X, Y, Z]</strong></p>
<p><strong>str2List æ”¶åˆ°æ–°å€¼: [A, X, Y, Z]</strong></p>
<h3 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ <code>MutableStateFlow</code> å’Œ <code>StateFlow</code>ï¼Ÿ</h3>
<ul>
<li><code>MutableStateFlow</code> æ˜¯ä¸€ç§å¯å˜çš„çŠ¶æ€æµï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡ <code>value</code> å±æ€§ä¿®æ”¹æµä¸­çš„çŠ¶æ€ã€‚</li>
<li><code>StateFlow</code> æ˜¯ä¸€ç§ä¸å¯å˜çš„çŠ¶æ€æµï¼Œå®ƒåªæš´éœ²ç»™å¤–éƒ¨è¯»å–çŠ¶æ€çš„èƒ½åŠ›ï¼Œè€Œä¸èƒ½ä¿®æ”¹çŠ¶æ€ã€‚</li>
</ul>
<p>é€šå¸¸ï¼Œåœ¨å°è£…çŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬å°† <code>MutableStateFlow</code> å®šä¹‰ä¸ºç§æœ‰å±æ€§ï¼ˆä¾‹å¦‚ <code>_strList</code>ï¼‰ï¼Œè€Œå°†å…¶æš´éœ²ä¸ºä¸å¯å˜çš„ <code>StateFlow</code>ï¼ˆä¾‹å¦‚ <code>strList</code>ï¼‰ï¼Œè¿™æ ·å¤–éƒ¨ä»£ç åªèƒ½è¯»å–çŠ¶æ€ï¼Œè€Œæ— æ³•ä¿®æ”¹å®ƒã€‚</p>
<h3 data-id="heading-2">2. ä¸ºä»€ä¹ˆä¸å»ºè®®ç›´æ¥èµ‹å€¼ï¼Ÿ</h3>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœç›´æ¥å°† <code>_strList</code> æˆ– <code>_str2List</code> ä½œä¸º <code>StateFlow</code> æ¥æš´éœ²ï¼Œä¼šå¯¼è‡´å¤–éƒ¨ä»£ç å¯ä»¥é€šè¿‡å¼ºåˆ¶è½¬æ¢æˆ–ç›´æ¥è®¿é—® <code>_strList</code> æˆ– <code>_str2List</code> æ¥ä¿®æ”¹å…¶å€¼ã€‚è¿™æ ·å¯èƒ½ä¼šç ´åçŠ¶æ€çš„ä¸å¯å˜æ€§ï¼Œå¯¼è‡´ä¸å¯é¢„æµ‹çš„å‰¯ä½œç”¨æˆ–çŠ¶æ€å˜æ›´ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œå°è¯•ç›´æ¥ä¿®æ”¹ <code>strList</code> çš„å€¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">(strList as? MutableStateFlow)?.<span class="hljs-attr">value</span> = listOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>)
</code></pre>
<p>è™½ç„¶ <code>strList</code> æ˜¯ <code>StateFlow</code> ç±»å‹ï¼Œå®ƒä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œä½†é€šè¿‡å¼ºåˆ¶è½¬æ¢ä¸º <code>MutableStateFlow</code> ç±»å‹ï¼Œä»£ç å¯ä»¥ç»•è¿‡ä¸å¯å˜æ€§å¹¶ç›´æ¥ä¿®æ”¹ <code>value</code> å±æ€§ã€‚è¿™è¿èƒŒäº†çŠ¶æ€ä¸å¯å˜æ€§çš„è®¾è®¡åŸåˆ™ï¼Œå®¹æ˜“å¯¼è‡´ä¸å¯æ§çš„çŠ¶æ€æ›´æ”¹ã€‚</p>
<h3 data-id="heading-3">3. <code>asStateFlow</code> çš„ä½œç”¨</h3>
<p>ä½¿ç”¨ <code>asStateFlow()</code> æ–¹æ³•å¯ä»¥å°† <code>MutableStateFlow</code> è½¬æ¢ä¸ºä¸å¯å˜çš„ <code>StateFlow</code>ã€‚è¿™æ ·ï¼Œå¤–éƒ¨ä»£ç åªèƒ½è¯»å–çŠ¶æ€ï¼Œè€Œæ— æ³•ä¿®æ”¹å®ƒã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿çŠ¶æ€çš„ä¸å¯å˜æ€§å¹¶é˜²æ­¢å¤–éƒ¨ä»£ç ç›´æ¥æ›´æ”¹çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-swift" lang="swift">val strList: <span class="hljs-type">StateFlow</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;&gt; <span class="hljs-operator">=</span> _strList.asStateFlow()
</code></pre>
<p>è¿™æ ·ï¼Œå¤–éƒ¨ä»£ç åªèƒ½ä½¿ç”¨ <code>strList.collect { ... }</code> æ¥æ”¶é›†çŠ¶æ€çš„å˜åŒ–ï¼Œè€Œä¸èƒ½ä¿®æ”¹ <code>strList</code> çš„å€¼ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ å®‰å…¨å’Œå¯æ§ã€‚</p>
<h3 data-id="heading-4">4. æ€»ç»“</h3>
<ul>
<li><code>MutableStateFlow</code> æä¾›äº†ä¿®æ”¹çŠ¶æ€çš„èƒ½åŠ›ï¼Œè€Œ <code>StateFlow</code> åªå…è®¸è¯»å–çŠ¶æ€ã€‚</li>
<li>ä½¿ç”¨ <code>asStateFlow()</code> å¯ä»¥å°† <code>MutableStateFlow</code> è½¬æ¢ä¸ºä¸å¯å˜çš„ <code>StateFlow</code>ï¼Œä»è€Œä¿æŠ¤çŠ¶æ€ä¸è¢«å¤–éƒ¨ä»£ç ç›´æ¥ä¿®æ”¹ã€‚</li>
<li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿çŠ¶æ€çš„ä¸å¯å˜æ€§ï¼Œå‡å°‘å‰¯ä½œç”¨ï¼Œä½¿ä»£ç æ›´åŠ å¥å£®å’Œå¯ç»´æŠ¤ã€‚</li>
</ul>
<h3 data-id="heading-5">5.å»¶ä¼¸é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ <code>asSharedFlow</code>ï¼Ÿ</h3>
<p>ç±»ä¼¼äº <code>StateFlow</code>ï¼Œ<code>SharedFlow</code> ä¹Ÿæœ‰å¯å˜å’Œä¸å¯å˜çš„ç‰ˆæœ¬ã€‚<code>MutableSharedFlow</code> å…è®¸å¤–éƒ¨ä»£ç é€šè¿‡ <code>emit()</code> å‘æµä¸­å‘é€äº‹ä»¶ï¼Œè€Œ <code>SharedFlow</code> åˆ™æ˜¯ä¸€ä¸ªåªè¯»æµï¼Œåªèƒ½è¢«å¤–éƒ¨ä»£ç è®¢é˜…å’Œæ”¶é›†ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹æµä¸­çš„å†…å®¹ã€‚</p>
<p>ä¸ºäº†ç¡®ä¿æµçš„ä¸å¯å˜æ€§ï¼Œåº”è¯¥ä½¿ç”¨ <code>asSharedFlow()</code> æ–¹æ³•å°† <code>MutableSharedFlow</code> è½¬æ¢ä¸ºä¸å¯å˜çš„ <code>SharedFlow</code>ã€‚è¿™æ ·ï¼Œå¤–éƒ¨ä»£ç åªèƒ½è®¢é˜…äº‹ä»¶æµï¼Œè€Œä¸èƒ½é€šè¿‡ <code>emit()</code> å‘æµä¸­å‘é€äº‹ä»¶ï¼Œé¿å…äº†æ„å¤–ä¿®æ”¹æµå†…å®¹çš„å‰¯ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>