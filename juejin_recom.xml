<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è§£å†³Webpack æ‰“åŒ…æŠ¥é”™ï¼šTypeError: Cannot assign to read only property 'exports' ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572004684177768502</link>    <guid>https://juejin.cn/post/7572004684177768502</guid>    <pubDate>2025-11-13T08:23:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572004684177768502" data-draft-id="7571621555512950838" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³Webpack æ‰“åŒ…æŠ¥é”™ï¼šTypeError: Cannot assign to read only property 'exports' ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,Vue.js,Webpack"/> <meta itemprop="datePublished" content="2025-11-13T08:23:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°è¹¦è·¶å„¿"/> <meta itemprop="url" content="https://juejin.cn/user/3245414058300238"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³Webpack æ‰“åŒ…æŠ¥é”™ï¼šTypeError: Cannot assign to read only property 'exports' ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3245414058300238/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°è¹¦è·¶å„¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:23:22.000Z" title="Thu Nov 13 2025 08:23:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰è¨€ï¼š</p>
<p>åšå‰ç«¯é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„çª˜å¢ƒï¼šæœ¬åœ°Â <code>npm run dev</code>Â è¿è¡Œä¸€åˆ‡æ­£å¸¸ï¼Œå¯æ‰§è¡ŒÂ <code>npm run build</code>Â æ‰“åŒ…åï¼Œç”Ÿäº§ç¯å¢ƒæ§åˆ¶å°ç›´æ¥æŠ›å‡ºÂ <code>TypeError: Cannot assign to read only property 'exports' of object '#&lt;Object&gt;'</code>Â é”™è¯¯ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä»‹ç»</h2>
<p>æœ€è¿‘æœ‰ä¸ªä»¥å‰çš„è€é¡¹ç›®ï¼ˆ<code>Vue2+webpack</code>ï¼‰åœ¨æ­£å¼ç¯å¢ƒå‡ºç°äº†é—®é¢˜ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­é€”ä¸€ç›´æ²¡æ”¹åŠ¨ï¼Œçªç„¶æœ‰ä¸ªé¡µé¢æ‰“ä¸å¼€äº†ã€‚åœ¨æ§åˆ¶å°çš„æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6b2b50d0954401c8fd00114313ebabf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=tzs4YKEagByBPR5jPhKM%2BnT2m3c%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€è¦è¯´æ˜çš„ä¸€ç‚¹ï¼Œè¿™æ˜¯æ‰“åŒ…åçš„æŠ¥é”™ï¼Œåœ¨æœ¬åœ°è¿è¡Œçš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚
æˆ‘æŠŠè¿™æ®µæŠ¥é”™ä¿¡æ¯å¤åˆ¶ä¸‹æ¥ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯å¯ä»¥å¤åˆ¶å»ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">vendor.0d88a535e3e863312d89.<span class="hljs-property">js</span>:<span class="hljs-number">44</span> <span class="hljs-title class_">TypeError</span>: <span class="hljs-title class_">Cannot</span> assign to read only property <span class="hljs-string">'exports'</span> <span class="hljs-keyword">of</span> object <span class="hljs-string">'#&lt;Object&gt;
    at Object.&lt;anonymous&gt; (0.d97ee341e9f7c8f3e805.js:1:14033)
    at 16Wf (0.d97ee341e9f7c8f3e805.js:1:16662)
    at n (manifest.83cbbf59a618d5d725c4.js:1:101)
    at Object.exjW (0.d97ee341e9f7c8f3e805.js:10:119646)
    at n (manifest.83cbbf59a618d5d725c4.js:1:101)
    at Object.OpaP (0.d97ee341e9f7c8f3e805.js:10:22333)
    at n (manifest.83cbbf59a618d5d725c4.js:1:101)
    at 7AuU (0.d97ee341e9f7c8f3e805.js:1:52095)
    at n (manifest.83cbbf59a618d5d725c4.js:1:101)
    at Object.sGS9 (0.d97ee341e9f7c8f3e805.js:10:181323)
</span></code></pre>
<h2 data-id="heading-1">äºŒã€è§£å†³æ–¹æ³•</h2>
<blockquote>
<h3 data-id="heading-2">å¿«é€Ÿä¿®å¤å»ºè®®</h3>
<ol>
<li>é¦–å…ˆå°è¯• <strong>æ–¹æ¡ˆä¸€</strong> å’Œ <strong>æ–¹æ¡ˆäºŒ</strong>ï¼Œæ£€æŸ¥å¹¶ä¿®æ­£ <code>babel</code> å’Œ <code>webpack</code> é…ç½®ã€‚ï¼ˆæ¨èï¼‰</li>
<li>å¦‚æœä½ çŸ¥é“å…·ä½“å“ªä¸ªæ–‡ä»¶å¯¼è‡´é—®é¢˜ï¼Œç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶çš„æ¨¡å—è¯­æ³•ã€‚</li>
</ol>
</blockquote>
<h3 data-id="heading-3">ä¸‹é¢å°†å…·ä½“å±•å¼€æè¿°è§£å†³æ­¥éª¤ï¼š</h3>
<ol>
<li>æˆ‘å°†è¿™ä¸ªé—®é¢˜çš„æŠ¥é”™ä¿¡æ¯ç›´æ¥æŠ›ç»™äº†<code>é€šä¹‰åƒé—®</code>ï¼Œè®©å®ƒå¸®æˆ‘åˆ†æé—®é¢˜åŸå› ï¼Œå¹¶ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4496d7c5a994618a8a5832617ebb6b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=2cdQnYBw%2BQgyxBFExctJtMlJVI4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ee165c0db354b78a1db3739a73877b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=KFeEAM9OMKij0Kf0QTPy%2BlZymbg%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"presets"</span>: [
    [<span class="hljs-string">"env"</span>, {
      <span class="hljs-string">"modules"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-string">"targets"</span>: {
        <span class="hljs-string">"browsers"</span>: [<span class="hljs-string">"&gt; 1%"</span>, <span class="hljs-string">"last 2 versions"</span>, <span class="hljs-string">"not ie &lt;= 8"</span>]
      }
    }],
    <span class="hljs-string">"stage-2"</span>
  ],
  <span class="hljs-string">"plugins"</span>: [<span class="hljs-string">"transform-runtime"</span>]
}

</code></pre>
<ol start="2">
<li>
<p>å¯¹ç…§ç€æˆ‘è‡ªå·±çš„ä»£ç æ£€æŸ¥ä¹‹åï¼Œç¡®ä¿é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>.babelrc</code>Â æˆ–Â <code>babel.config.js</code>æ–‡ä»¶åŒ…å«æ­£ç¡®çš„é…ç½®ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œï¼ˆæˆ‘é¡¹ç›®ä¸­æ˜¯<code>.babelrcæ–‡ä»¶</code>ï¼‰ã€‚</p>
<p>å¦‚æœæ²¡æœ‰Â <code>.babelrc</code>Â æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªå¹¶æ·»åŠ ä¸Šè¿°å†…å®¹ã€‚</p>
</li>
<li>
<p>ç„¶åç»§ç»­çœ‹ä¸‹ä¸€ä¸ªæ–¹æ¡ˆï¼š</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29209c1200af4132a8075624458fa0e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=9oGg9qKGzFqR116%2FpLCYbRY%2FAkU%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      <span class="hljs-comment">// æ·»åŠ  JavaScript æ–‡ä»¶å¤„ç†è§„åˆ™æ¥è§£å†³æ¨¡å—ç³»ç»Ÿå†²çªé—®é¢˜</span>
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/(node_modules|bower_components)/</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">presets</span>: [
            [<span class="hljs-string">'env'</span>, {
              <span class="hljs-attr">modules</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// ç¡®ä¿è®¾ç½®ä¸º false</span>
            }]
          ]
        }
      }
    ]
  },
</code></pre>
<p>æ ¹æ® <strong>æ–¹æ¡ˆäºŒ</strong> ï¼Œæ‰¾åˆ°é¡¹ç›®ä¸­å¯¹åº”çš„ <code>build/webpack.prod.conf.js</code>æ–‡ä»¶ï¼Œçœ‹æ˜¯å¦æœ‰ä¸Šé¢çš„è¿™æ®µä»£ç ã€‚</p>
<p>ä¸‹å›¾æ˜¯æˆ‘çš„é¡¹ç›®ä¸­çš„ä»£ç ï¼Œå¾ˆå°´å°¬ï¼Œæ²¡æœ‰è¿™éƒ¨åˆ†ä»£ç â€¦â€¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/497e9431d3a2457795f015eda24e6d49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=Zm2ADLUzpBSSd2BiqNflhgqZFcQ%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>æ¥ç€å°±å¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç åŠ è¿›å»ï¼š</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc5afd22e9d34f36a3986803d8a3286b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6Lmm6Le25YS_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763627002&amp;x-signature=oc%2FNPqZ8GGHf7Z%2FzGibD07YSg8c%3D" alt="image.png" loading="lazy"/></p>
<p>ä»£ç å¦‚ä¸‹ï¼Œå¯ç›´æ¥å¤åˆ¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      <span class="hljs-comment">// æ·»åŠ  JavaScript æ–‡ä»¶å¤„ç†è§„åˆ™æ¥è§£å†³æ¨¡å—ç³»ç»Ÿå†²çªé—®é¢˜</span>
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/(node_modules|bower_components)/</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">presets</span>: [
            [<span class="hljs-string">'env'</span>, {
              <span class="hljs-attr">modules</span>: <span class="hljs-literal">false</span>
            }]
          ]
        }
      },
      <span class="hljs-comment">// ä¿ç•™åŸæœ‰çš„æ ·å¼å¤„ç†è§„åˆ™</span>
      ...utils.<span class="hljs-title function_">styleLoaders</span>({
        <span class="hljs-attr">sourceMap</span>: config.<span class="hljs-property">build</span>.<span class="hljs-property">productionSourceMap</span>,
        <span class="hljs-attr">extract</span>: <span class="hljs-literal">true</span>
      })
    ]
  },
</code></pre>
<p>å…³é”®ç‚¹æ˜¯è®¾ç½®Â <code>"modules": false</code>ï¼Œè¿™å‘Šè¯‰ Babel ä¸è¦è½¬æ¢ ES6 çš„ import/export è¯­æ³•ï¼Œè®© webpack æ¥å¤„ç†æ¨¡å—ç³»ç»Ÿï¼Œé¿å… ES6 æ¨¡å—è¯­æ³•å’Œ CommonJS è¯­æ³•å†²çªçš„é—®é¢˜ã€‚</p>
<p>å®Œæˆè¿™äº›ä¿®æ”¹åï¼Œé‡æ–°è¿è¡ŒÂ <code>npm run build</code>Â åº”è¯¥å°±èƒ½è§£å†³ä½ é‡åˆ°çš„é”™è¯¯äº†ã€‚</p>
<p>æ¨èè¿™ä¸ªæ–¹æ¡ˆçš„åŸå› æ˜¯ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç›¸åŒçš„ <code>babel</code> é…ç½®ã€‚è¿™ä¸ªä¿®æ”¹å°±æ˜¯æˆ‘æˆåŠŸè§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚</p>
<ol start="5">
<li>AI è¿˜ç»™æˆ‘å»ºè®®è¯´ï¼Œâ€œæ£€æŸ¥å…·ä½“å‡ºé”™çš„æ–‡ä»¶â€œï¼Œå¯æ˜¯æ ¹æ®é”™è¯¯å †æ ˆï¼Œé—®é¢˜å‡ºç°çš„æ–‡ä»¶åç§°æ˜¯è¢«ç¼–è¯‘è¿‡çš„ï¼Œæ‰¾çš„è¯å°±éœ€è¦æŸ¥æ‰¾æºä»£ç ä¸­æ··ç”¨äº†Â <code>import</code>Â å’ŒÂ <code>module.exports</code>Â çš„åœ°æ–¹ï¼Œæ‰¾åˆ°ä¹‹åç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ¨¡å—è¯­æ³•å³å¯ã€‚
ç”±äºæˆ‘çš„å‡ºé”™æ–‡ä»¶æ˜¯åœ¨ç¬¬ä¸‰æ–¹åº“ä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆæœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘æœæ–­æ”¾å¼ƒã€‚</li>
</ol>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜åŸå› </h2>
<p>æ ¸å¿ƒåŸå› æ­£å¦‚åˆ†ææ‰€ç¤ºï¼šåœ¨åŒä¸€æ¨¡å—ä¸­åŒæ—¶æ··ç”¨äº† ES6 çš„Â <code>import/export</code>Â è¯­æ³•ä¸ CommonJS çš„Â <code>module.exports</code>Â è¯­æ³•ï¼Œå¯¼è‡´ webpack å¤„ç†æ¨¡å—æ—¶å‡ºç°å†²çªã€‚è¿™æ˜¯ webpack æ‰“åŒ…åï¼Œç”Ÿäº§ç¯å¢ƒä¸­è¾ƒä¸ºå¸¸è§çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœæ˜¯è‡ªå·±å†™çš„ä»£ç ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­æŸ¥æ‰¾å¹¶ä¿®æ”¹ï¼Œç»Ÿä¸€é¡¹ç›®ä¸­çš„æ¨¡å—è¯­æ³•è§„èŒƒå³å¯ã€‚å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹åº“å‡ºç°çš„é—®é¢˜ï¼Œå°±å¯ä»¥ç”¨æœ¬æ–‡ä¸­çš„æ–¹æ³•è§£å†³ï¼Œå…ˆå°è¯•æ£€æŸ¥ <code>babel</code> é…ç½®å¹¶ç¡®ä¿Â <code>modules: false</code>Â è®¾ç½®æ­£ç¡®ï¼Œè¿™é€šå¸¸èƒ½è§£å†³å¤§éƒ¨åˆ†æ­¤ç±»é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">å››ã€æ€»ç»“</h2>
<p>å‰ç«¯æ‰“åŒ…æŠ¥é”™å¾€å¾€ â€œç°è±¡å¤æ‚ï¼Œæ ¹æºç®€å•â€ï¼Œé‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶ï¼Œä¼˜å…ˆæ’æŸ¥æ¨¡å—è¯­æ³•ã€ä¾èµ–å…¼å®¹æ€§ã€Webpack é…ç½®è¿™ä¸‰å¤§æ–¹å‘ï¼Œé€šå¸¸èƒ½å¿«é€Ÿæ‰¾åˆ°çªç ´å£ã€‚</p>
<p>ä»¥ä¸Šï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++æ™ºèƒ½æŒ‡é’ˆä»‹ç»]]></title>    <link>https://juejin.cn/post/7571815573932916799</link>    <guid>https://juejin.cn/post/7571815573932916799</guid>    <pubDate>2025-11-13T08:22:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815573932916799" data-draft-id="7571678388954300435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++æ™ºèƒ½æŒ‡é’ˆä»‹ç»"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-11-13T08:22:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qwepoilkjasd"/> <meta itemprop="url" content="https://juejin.cn/user/318221180214507"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++æ™ºèƒ½æŒ‡é’ˆä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/318221180214507/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qwepoilkjasd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:22:23.000Z" title="Thu Nov 13 2025 08:22:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¥½çš„ï¼Œéå¸¸ä¹æ„ä¸ºä½ è¯¦ç»†è®²è§£ C++ æ™ºèƒ½æŒ‡é’ˆã€‚è¿™æ˜¯ç°ä»£ C++ï¼ˆC++11 åŠä¹‹åï¼‰ä¸­<strong>æœ€é‡è¦</strong>çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå½»åº•æ”¹å˜äº† C++ çš„å†…å­˜ç®¡ç†æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬å°†ä»<strong>ä¸ºä»€ä¹ˆ</strong>éœ€è¦å®ƒå¼€å§‹ï¼Œç„¶åé€ä¸€ä»‹ç»ä¸‰ç§æ ¸å¿ƒçš„æ™ºèƒ½æŒ‡é’ˆï¼š<code>std::unique_ptr</code>ã€<code>std::shared_ptr</code> å’Œ <code>std::weak_ptr</code>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ¯ 1. ä¸ºä»€ä¹ˆéœ€è¦æ™ºèƒ½æŒ‡é’ˆï¼Ÿï¼ˆä¼ ç»ŸæŒ‡é’ˆçš„é—®é¢˜ï¼‰</h2>
<p>åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ <code>new</code> åœ¨**å † (Heap)**ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜ã€‚</p>
<p>C++</p>
<pre><code class="hljs language-scss" lang="scss">void <span class="hljs-built_in">old_way</span>() {
    MyClass* raw_ptr = new <span class="hljs-built_in">MyClass</span>(); <span class="hljs-comment">// 1. åˆ†é…å†…å­˜</span>
    raw_ptr-&gt;<span class="hljs-built_in">do_something</span>();
    <span class="hljs-comment">// ...</span>
    delete raw_ptr; <span class="hljs-comment">// 2. å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾</span>
}
</code></pre>
<p>è¿™ç§â€œè£¸æŒ‡é’ˆâ€ (Raw Pointer) çš„ç®¡ç†æ–¹å¼éå¸¸å±é™©ï¼Œææ˜“å‡ºé”™ï¼š</p>
<ol>
<li>
<p><strong>å†…å­˜æ³„æ¼ (Memory Leaks)</strong> ï¼š</p>
<ul>
<li><strong>å¿˜è®° <code>delete</code></strong>ï¼šæœ€å¸¸è§çš„é—®é¢˜ã€‚<code>raw_ptr</code> æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå½“ <code>old_way()</code> å‡½æ•°ç»“æŸæ—¶ï¼Œ<code>raw_ptr</code> å˜é‡æœ¬èº«è¢«é”€æ¯äº†ï¼Œä½†å®ƒæ‰€<strong>æŒ‡å‘</strong>çš„åœ¨â€œå †â€ä¸Šçš„ <code>MyClass</code> å¯¹è±¡<strong>ä¾ç„¶å­˜åœ¨</strong>ï¼Œè¿™å—å†…å­˜æ°¸è¿œæ— æ³•è¢«å›æ”¶ã€‚</li>
<li><strong>æå‰è¿”å›</strong>ï¼šå¦‚æœåœ¨ <code>new</code> å’Œ <code>delete</code> ä¹‹é—´æœ‰ <code>return</code>ã€<code>break</code> æˆ– <code>continue</code>ï¼Œ<code>delete</code> è¯­å¥å¯èƒ½è¢«è·³è¿‡ã€‚</li>
<li><strong>å‘ç”Ÿå¼‚å¸¸</strong>ï¼šå¦‚æœåœ¨ <code>do_something()</code> ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œ<code>delete raw_ptr;</code> è¿™ä¸€è¡Œæ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œï¼Œå†…å­˜æ³„æ¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‚¬æŒ‚æŒ‡é’ˆ (Dangling Pointers)</strong> ï¼š<br/>
<strong>æ‚¬ç©ºæŒ‡é’ˆ</strong> ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªæŒ‡é’ˆè¢« <code>delete</code> åï¼Œå®ƒå¹¶æ²¡æœ‰è‡ªåŠ¨å˜ä¸º <code>nullptr</code>ï¼Œå®ƒä¾ç„¶æŒ‡å‘é‚£å—â€œå·²é‡Šæ”¾â€çš„å†…å­˜ã€‚å¦‚æœåç»­ä»£ç ä¸æ…å†æ¬¡ä½¿ç”¨äº†è¿™ä¸ªæŒ‡é’ˆï¼ˆâ€œUse-After-Freeâ€ï¼‰ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼ˆé€šå¸¸æ˜¯ç¨‹åºå´©æºƒï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‰€æœ‰æƒ (Ownership) ä¸æ˜</strong>ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªè£¸æŒ‡é’ˆåœ¨å¤šä¸ªå‡½æ•°æˆ–å¯¹è±¡ä¹‹é—´ä¼ é€’æ—¶ï¼Œåˆ°åº•<strong>è°</strong>è´Ÿè´£ <code>delete</code> å®ƒï¼Ÿ</li>
<li>å¦‚æœä¸¤ä¸ªæ¨¡å—éƒ½å°è¯• <code>delete</code> åŒä¸€ä¸ªæŒ‡é’ˆï¼Œä¼šå¼•å‘<strong>äºŒæ¬¡é‡Šæ”¾ (Double Free)</strong> ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</li>
<li>å¦‚æœè°éƒ½ä¸ <code>delete</code>ï¼Œå°±æ˜¯å†…å­˜æ³„æ¼ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ’¡ 2. æ ¸å¿ƒæ€æƒ³ï¼šRAII ä¸æ™ºèƒ½æŒ‡é’ˆ</h2>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒC++ å¼•å…¥äº†<strong>æ™ºèƒ½æŒ‡é’ˆ (Smart Pointers)</strong> ã€‚</p>
<p>æ™ºèƒ½æŒ‡é’ˆ<strong>ä¸æ˜¯</strong>æŒ‡é’ˆï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼ˆä¸€ä¸ªç±»æ¨¡æ¿ï¼‰ã€‚å®ƒå°è£…ï¼ˆwrapï¼‰äº†ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œå¹¶åˆ©ç”¨äº† C++ çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š<strong>RAII (Resource Acquisition Is Initialization)</strong> ï¼Œå³â€œèµ„æºè·å–å³åˆå§‹åŒ–â€ã€‚</p>
<p>RAII çš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ol>
<li>ä¸€ä¸ªå¯¹è±¡åœ¨å®ƒçš„<strong>æ„é€ å‡½æ•°</strong>ä¸­è·å–èµ„æºï¼ˆè¿™é‡Œæ˜¯ <code>new</code> å‡ºæ¥çš„å†…å­˜ï¼‰ã€‚</li>
<li>è¿™ä¸ªå¯¹è±¡åœ¨å®ƒçš„<strong>ææ„å‡½æ•°</strong>ä¸­é‡Šæ”¾èµ„æºï¼ˆè¿™é‡Œæ˜¯ <code>delete</code> å°è£…çš„è£¸æŒ‡é’ˆï¼‰ã€‚</li>
<li>C++ ä¿è¯ï¼Œä¸€ä¸ªåœ¨<strong>æ ˆ (Stack)ä¸Šåˆ›å»ºçš„å¯¹è±¡ï¼Œå½“å®ƒç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼ˆä¾‹å¦‚å‡½æ•°è¿”å›ï¼‰ï¼Œå®ƒçš„ææ„å‡½æ•°å¿…å®š</strong>ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼ˆå³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œä¹Ÿä¼šâ€œæ ˆå±•å¼€â€ï¼‰ã€‚</li>
</ol>
<p><strong>æ™ºèƒ½æŒ‡é’ˆå°±æ˜¯è¿™æ ·ä¸€ä¸ª RAII å¯¹è±¡</strong>ã€‚ä½ æŠŠ <code>new</code> å¾—åˆ°çš„æŒ‡é’ˆäº¤ç»™å®ƒï¼Œä½ å°±å¯ä»¥â€œå¿˜è®°â€<code>delete</code> äº†ã€‚å½“æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œå®ƒä¼šåœ¨ææ„å‡½æ•°ä¸­è‡ªåŠ¨å¸®ä½  <code>delete</code> æ‰å®ƒæ‰€ç®¡ç†çš„æŒ‡é’ˆã€‚</p>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span> <span class="hljs-comment">// æ™ºèƒ½æŒ‡é’ˆçš„å¤´æ–‡ä»¶</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">smart_way</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// std::make_unique æ˜¯åˆ›å»º unique_ptr çš„æ¨èæ–¹å¼ (C++14)</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; smart_ptr = <span class="hljs-built_in">std</span>::make_unique&lt;MyClass&gt;();
    
    smart_ptr-&gt;do_something();

    <span class="hljs-comment">// å½“ smart_way() å‡½æ•°è¿”å›æ—¶ï¼Œsmart_ptr ç¦»å¼€ä½œç”¨åŸŸ</span>
    <span class="hljs-comment">// å®ƒçš„ææ„å‡½æ•°è¢«è‡ªåŠ¨è°ƒç”¨</span>
    <span class="hljs-comment">// ææ„å‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œ delete smart_ptr.get()</span>
} <span class="hljs-comment">// &lt;-- å†…å­˜åœ¨è¿™é‡Œè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¸€æ ·ï¼</span>
</code></pre>
<hr/>
<h2 data-id="heading-2">ğŸ”§ 3. <code>std::unique_ptr</code> (ç‹¬å æŒ‡é’ˆ)</h2>
<p><code>std::unique_ptr</code> æ˜¯æœ€å¸¸ç”¨ã€æœ€é«˜æ•ˆã€æœ€â€œè½»é‡çº§â€çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong> <strong>ç‹¬å æ‰€æœ‰æƒ (Exclusive Ownership)</strong> ã€‚</p>
</li>
<li>
<p><strong>å«ä¹‰ï¼š</strong> åœ¨ä»»ä½•æ—¶åˆ»ï¼Œ<strong>åªæœ‰ä¸€ä¸ª</strong> <code>unique_ptr</code> å¯ä»¥æŒ‡å‘æŸä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚å®ƒâ€œæ‹¥æœ‰â€è¿™ä¸ªå¯¹è±¡ã€‚</p>
</li>
<li>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ol>
<li><strong>è½»é‡</strong>ï¼šå®ƒçš„å¤§å°å’Œè£¸æŒ‡é’ˆä¸€æ ·ï¼ˆæ²¡æœ‰é¢å¤–å¼€é”€ï¼‰ï¼Œå› ä¸ºå®ƒä¸éœ€è¦å­˜å‚¨â€œå¼•ç”¨è®¡æ•°â€ä¹‹ç±»çš„ä¸œè¥¿ã€‚</li>
<li><strong>ä¸å¯å¤åˆ¶ (Non-Copyable)</strong> ï¼šä½ ä¸èƒ½â€œæ‹·è´â€ä¸€ä¸ª <code>unique_ptr</code>ï¼Œå› ä¸ºè¿™ä¼šè¿åâ€œç‹¬å â€æ‰€æœ‰æƒã€‚</li>
<li><strong>å¯ä»¥ç§»åŠ¨ (Movable)</strong> ï¼šä½ å¯ä»¥å°†æ‰€æœ‰æƒä»ä¸€ä¸ª <code>unique_ptr</code> <strong>è½¬ç§» (move)</strong> ç»™å¦ä¸€ä¸ªã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-3">ç¤ºä¾‹ï¼šåˆ›å»ºã€ä½¿ç”¨å’Œè½¬ç§»</h3>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;utility&gt;</span> <span class="hljs-comment">// for std::move</span></span>

<span class="hljs-comment">// æ¨èçš„åˆ›å»ºæ–¹å¼ (C++14)</span>
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; p1 = <span class="hljs-built_in">std</span>::make_unique&lt;MyClass&gt;();

<span class="hljs-comment">// åƒè£¸æŒ‡é’ˆä¸€æ ·ä½¿ç”¨</span>
p1-&gt;do_something();
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; (*p1).value;

<span class="hljs-comment">// 1. ç¼–è¯‘é”™è¯¯ï¼šä¸å…è®¸å¤åˆ¶ï¼</span>
<span class="hljs-comment">// std::unique_ptr&lt;MyClass&gt; p2 = p1; // ERROR: copy constructor is deleted</span>

<span class="hljs-comment">// 2. æ­£ç¡®ï¼šè½¬ç§»æ‰€æœ‰æƒ (Move)</span>
<span class="hljs-comment">// p1 å°†æ”¾å¼ƒæ‰€æœ‰æƒï¼Œå¹¶å˜ä¸ºç©º (nullptr)</span>
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; p2 = <span class="hljs-built_in">std</span>::move(p1);

<span class="hljs-keyword">if</span> (p1 == nullptr) {
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"p1 ç°åœ¨æ˜¯ç©ºçš„"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
<span class="hljs-keyword">if</span> (p2 != nullptr) {
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"p2 æ‹¥æœ‰äº†è¯¥å¯¹è±¡"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    p2-&gt;do_something();
} <span class="hljs-comment">// &lt;-- p2 åœ¨è¿™é‡Œç¦»å¼€ä½œç”¨åŸŸï¼Œé‡Šæ”¾ MyClass å¯¹è±¡</span>

<span class="hljs-comment">// 3. ä»å‡½æ•°è¿”å› (æ‰€æœ‰æƒè½¬ç§»)</span>
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; <span class="hljs-title function_">create_object</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å·¥å‚å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::make_unique&lt;MyClass&gt;();
}
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; p3 = create_object();

<span class="hljs-comment">// 4. ä½œä¸ºå‚æ•°ä¼ é€’ (è½¬ç§»æ‰€æœ‰æƒ)</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">take_ownership</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; p)</span> {
    p-&gt;do_something();
} <span class="hljs-comment">// &lt;-- p åœ¨è¿™é‡Œææ„ï¼Œé‡Šæ”¾å¯¹è±¡</span>
take_ownership(<span class="hljs-built_in">std</span>::move(p3));
<span class="hljs-comment">// p3 åœ¨æ­¤ä¹‹åä¹Ÿå˜ä¸ºç©º</span>
</code></pre>
<h3 data-id="heading-4">ä»€ä¹ˆæ—¶å€™ç”¨ <code>unique_ptr</code>ï¼Ÿ</h3>
<p><strong>ç­”æ¡ˆï¼šé»˜è®¤é¦–é€‰ï¼</strong> åªè¦ä½ ä¸éœ€è¦å¤šä¸ªæŒ‡é’ˆâ€œå…±äº«â€ä¸€ä¸ªå¯¹è±¡ï¼Œå°±åº”è¯¥ç”¨ <code>unique_ptr</code>ã€‚</p>
<ul>
<li>ä½œä¸ºç±»çš„æˆå‘˜å˜é‡ï¼ˆPimpl æƒ¯ç”¨æ³•ï¼‰ã€‚</li>
<li>åœ¨å‡½æ•°ä¸­åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå †ä¸Šå¯¹è±¡ï¼ˆå·¥å‚æ¨¡å¼ï¼‰ã€‚</li>
<li>å­˜å‚¨åœ¨ STL å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ <code>std::vector&lt;std::unique_ptr&lt;MyClass&gt;&gt;</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¤ 4. <code>std::shared_ptr</code> (å…±äº«æŒ‡é’ˆ)</h2>
<p><code>std::shared_ptr</code> è§£å†³äº†â€œå¤šä¸ªæŒ‡é’ˆéœ€è¦æŒ‡å‘åŒä¸€å¯¹è±¡â€çš„åœºæ™¯ã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong> <strong>å…±äº«æ‰€æœ‰æƒ (Shared Ownership)</strong> ã€‚</p>
</li>
<li>
<p><strong>å«ä¹‰ï¼š</strong> å¤šä¸ª <code>shared_ptr</code> å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å®ƒä»¬é€šè¿‡<strong>å¼•ç”¨è®¡æ•° (Reference Counting)</strong> æ¥ç®¡ç†è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
</li>
<li>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ol>
<li><strong>å¼•ç”¨è®¡æ•°</strong>ï¼šå†…éƒ¨æœ‰ä¸€ä¸ªâ€œæ§åˆ¶å—â€ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªè®¡æ•°å™¨ã€‚</li>
<li>æ¯å½“ä¸€ä¸ª <code>shared_ptr</code> <strong>è¢«å¤åˆ¶</strong>ï¼ˆæˆ–èµ‹å€¼ç»™å¦ä¸€ä¸ª <code>shared_ptr</code>ï¼‰æ—¶ï¼Œ<strong>è®¡æ•°å™¨ +1</strong>ã€‚</li>
<li>æ¯å½“ä¸€ä¸ª <code>shared_ptr</code> <strong>è¢«ææ„</strong>ï¼ˆæˆ–è¢«èµ‹æ–°å€¼ï¼‰æ—¶ï¼Œ<strong>è®¡æ•°å™¨ -1</strong>ã€‚</li>
<li>å½“<strong>è®¡æ•°å™¨å‡åˆ° 0</strong> æ—¶ï¼Œæ„å‘³ç€æœ€åä¸€ä¸ªæ‹¥æœ‰è¯¥å¯¹è±¡çš„ <code>shared_ptr</code> æ¶ˆå¤±äº†ï¼Œå®ƒä¼šåœ¨ææ„æ—¶ <code>delete</code> æ‰è¢«ç®¡ç†çš„å¯¹è±¡ã€‚</li>
<li><strong>å¼€é”€</strong>ï¼šæ¯” <code>unique_ptr</code> é‡ã€‚å®ƒéœ€è¦é¢å¤–åˆ†é…â€œæ§åˆ¶å—â€çš„å†…å­˜ï¼Œå¹¶ä¸”å¢å‡è®¡æ•°å™¨å¿…é¡»æ˜¯<strong>åŸå­æ“ä½œ</strong>ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ï¼Œè¿™æœ‰æ€§èƒ½å¼€é”€ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-6">ç¤ºä¾‹ï¼šåˆ›å»ºå’Œå…±äº«</h3>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>

<span class="hljs-comment">// æ¨èçš„åˆ›å»ºæ–¹å¼ (C++11)</span>
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;MyClass&gt; sp1 = <span class="hljs-built_in">std</span>::make_shared&lt;MyClass&gt;();
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"å½“å‰å¼•ç”¨è®¡æ•°: "</span> &lt;&lt; sp1.use_count() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡º: 1</span>

{
    <span class="hljs-comment">// å¤åˆ¶æ„é€ å‡½æ•°ï¼Œsp2 ä¹ŸæŒ‡å‘ sp1 çš„å¯¹è±¡</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;MyClass&gt; sp2 = sp1;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"å½“å‰å¼•ç”¨è®¡æ•°: "</span> &lt;&lt; sp1.use_count() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡º: 2</span>
    
    <span class="hljs-comment">// sp2 å’Œ sp1 éƒ½å¯ä»¥ä½¿ç”¨</span>
    sp2-&gt;do_something();

} <span class="hljs-comment">// &lt;-- sp2 åœ¨è¿™é‡Œç¦»å¼€ä½œç”¨åŸŸï¼Œææ„</span>
  <span class="hljs-comment">// å¼•ç”¨è®¡æ•° -1ï¼Œå˜ä¸º 1</span>

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"å½“å‰å¼•ç”¨è®¡æ•°: "</span> &lt;&lt; sp1.use_count() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡º: 1</span>

<span class="hljs-comment">// ä¸ºä»€ä¹ˆç”¨ make_sharedï¼Ÿ</span>
<span class="hljs-comment">// 1. æ€§èƒ½ï¼šMyClass å¯¹è±¡å’Œâ€œæ§åˆ¶å—â€çš„å†…å­˜å¯ä»¥ä¸€æ¬¡æ€§åˆ†é…ï¼Œå‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°ã€‚</span>
<span class="hljs-comment">// 2. å¼‚å¸¸å®‰å…¨ï¼šé¿å…äº†åœ¨ `new MyClass()` æˆåŠŸä½† `shared_ptr` æ„é€ å¤±è´¥æ—¶å¯¼è‡´çš„å†…å­˜æ³„æ¼ã€‚</span>
</code></pre>
<h3 data-id="heading-7">ä»€ä¹ˆæ—¶å€™ç”¨ <code>shared_ptr</code>ï¼Ÿ</h3>
<p>å½“ä½ <strong>æ— æ³•</strong>æ˜ç¡®ç•Œå®šâ€œè°æ˜¯å”¯ä¸€çš„æ‰€æœ‰è€…â€æ—¶ã€‚</p>
<ul>
<li>ä½ å¸Œæœ›å°†ä¸€ä¸ªå¯¹è±¡å­˜å‚¨åœ¨å¤šä¸ªæ•°æ®ç»“æ„ä¸­ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒåœ¨â€œæ‰€æœ‰å¼•ç”¨å®ƒçš„åœ°æ–¹éƒ½å¤±æ•ˆâ€åæ‰è¢«é”€æ¯ã€‚</li>
<li>å¼‚æ­¥å›è°ƒï¼ˆä¾‹å¦‚ï¼Œ<code>this</code> æŒ‡é’ˆå¯èƒ½åœ¨å›è°ƒè¢«è°ƒç”¨å‰å¤±æ•ˆï¼Œä½¿ç”¨ <code>shared_from_this</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸš« 5. <code>std::weak_ptr</code> (å¼±æŒ‡é’ˆ)</h2>
<p><code>shared_ptr</code> æœ‰ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š<strong>å¾ªç¯å¼•ç”¨ (Circular Reference)</strong> ã€‚</p>
<h3 data-id="heading-9">é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨</h3>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeB</span>;</span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeA</span> {</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;NodeB&gt; b_ptr;
    ~NodeA() { <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"NodeA ææ„\n"</span>; }
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeB</span> {</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;NodeA&gt; a_ptr;
    ~NodeB() { <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"NodeB ææ„\n"</span>; }
};

<span class="hljs-type">void</span> <span class="hljs-title function_">circular_reference_problem</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">auto</span> a = <span class="hljs-built_in">std</span>::make_shared&lt;NodeA&gt;(); <span class="hljs-comment">// a çš„è®¡æ•° = 1</span>
    <span class="hljs-keyword">auto</span> b = <span class="hljs-built_in">std</span>::make_shared&lt;NodeB&gt;(); <span class="hljs-comment">// b çš„è®¡æ•° = 1</span>

    a-&gt;b_ptr = b; <span class="hljs-comment">// b çš„è®¡æ•° = 2 (a æŒæœ‰ b)</span>
    b-&gt;a_ptr = a; <span class="hljs-comment">// a çš„è®¡æ•° = 2 (b æŒæœ‰ a)</span>

} <span class="hljs-comment">// &lt;-- å‡½æ•°ç»“æŸï¼Œa å’Œ b ä¸¤ä¸ª shared_ptr ç¦»å¼€ä½œç”¨åŸŸ</span>
<span class="hljs-comment">// a çš„è®¡æ•°ä» 2 -&gt; 1</span>
<span class="hljs-comment">// b çš„è®¡æ•°ä» 2 -&gt; 1</span>

<span class="hljs-comment">// **å†…å­˜æ³„æ¼ï¼**</span>
<span class="hljs-comment">// a çš„è®¡æ•°æ˜¯ 1 (å› ä¸º b è¿˜æŒ‡ç€å®ƒ)ï¼Œæ‰€ä»¥ NodeA ä¸ä¼šè¢«ææ„ã€‚</span>
<span class="hljs-comment">// b çš„è®¡æ•°æ˜¯ 1 (å› ä¸º a è¿˜æŒ‡ç€å®ƒ)ï¼Œæ‰€ä»¥ NodeB ä¹Ÿä¸ä¼šè¢«ææ„ã€‚</span>
<span class="hljs-comment">// å®ƒä»¬äº’ç›¸â€œç»­å‘½â€ï¼Œå¯¼è‡´è°ä¹Ÿæ— æ³•é‡Šæ”¾ã€‚</span>
</code></pre>
<h3 data-id="heading-10">è§£å†³æ–¹æ¡ˆï¼š<code>std::weak_ptr</code></h3>
<p><code>weak_ptr</code> æ˜¯ä¸€ç§<strong>éæ‹¥æœ‰ (Non-owning)</strong> çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong> å®ƒåªæ˜¯ä¸€ä¸ªâ€œè§‚å¯Ÿè€…â€ã€‚</p>
</li>
<li>
<p><strong>å«ä¹‰ï¼š</strong> å®ƒå¯ä»¥æŒ‡å‘ <code>shared_ptr</code> ç®¡ç†çš„å¯¹è±¡ï¼Œä½†å®ƒ<strong>ä¸ä¼š</strong>å¢åŠ å¼•ç”¨è®¡æ•°ã€‚</p>
</li>
<li>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ol>
<li>å®ƒä¸èƒ½é˜»æ­¢æ‰€æŒ‡å‘çš„å¯¹è±¡è¢«é”€æ¯ã€‚</li>
<li>ä½ <strong>ä¸èƒ½</strong>ç›´æ¥é€šè¿‡ <code>weak_ptr</code> ä½¿ç”¨å¯¹è±¡ï¼ˆæ²¡æœ‰ <code>-&gt;</code> æˆ– <code>*</code> æ“ä½œç¬¦ï¼‰ã€‚</li>
<li>ä½ éœ€è¦<strong>æ£€æŸ¥</strong>å®ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯å¦è¿˜â€œå­˜æ´»â€ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-11">ç¤ºä¾‹ï¼šæ‰“ç ´å¾ªç¯</h3>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeB_Fixed</span>;</span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeA_Fixed</span> {</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;NodeB_Fixed&gt; b_ptr; <span class="hljs-comment">// A å¼ºå¼•ç”¨ B</span>
    ~NodeA_Fixed() { <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"NodeA ææ„\n"</span>; }
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NodeB_Fixed</span> {</span>
    <span class="hljs-comment">// B å¼±å¼•ç”¨ A</span>
    <span class="hljs-built_in">std</span>::weak_ptr&lt;NodeA_Fixed&gt; a_ptr; <span class="hljs-comment">// &lt;-- å…³é”®ï¼</span>
    ~NodeB_Fixed() { <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"NodeB ææ„\n"</span>; }
};

<span class="hljs-type">void</span> <span class="hljs-title function_">circular_reference_solution</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">auto</span> a = <span class="hljs-built_in">std</span>::make_shared&lt;NodeA_Fixed&gt;(); <span class="hljs-comment">// a è®¡æ•° = 1</span>
    <span class="hljs-keyword">auto</span> b = <span class="hljs-built_in">std</span>::make_shared&lt;NodeB_Fixed&gt;(); <span class="hljs-comment">// b è®¡æ•° = 1</span>

    a-&gt;b_ptr = b; <span class="hljs-comment">// b è®¡æ•° = 2</span>
    b-&gt;a_ptr = a; <span class="hljs-comment">// a è®¡æ•° = 1 (weak_ptr ä¸å¢åŠ è®¡æ•°)</span>
}
<span class="hljs-comment">// å‡½æ•°ç»“æŸ:</span>
<span class="hljs-comment">// 1. a (shared_ptr) ç¦»å¼€ä½œç”¨åŸŸï¼Œa è®¡æ•°ä» 1 -&gt; 0ã€‚</span>
<span class="hljs-comment">// 2. NodeA è¢«ææ„ï¼</span>
<span class="hljs-comment">// 3. åœ¨ NodeA çš„ææ„å‡½æ•°ä¸­ï¼Œa-&gt;b_ptr (shared_ptr) è¢«é”€æ¯ã€‚</span>
<span class="hljs-comment">// 4. b è®¡æ•°ä» 2 -&gt; 1ã€‚</span>
<span class="hljs-comment">// 5. b (shared_ptr) ç¦»å¼€ä½œç”¨åŸŸï¼Œb è®¡æ•°ä» 1 -&gt; 0ã€‚</span>
<span class="hljs-comment">// 6. NodeB è¢«ææ„ï¼</span>
<span class="hljs-comment">// (é¡ºåºå¯èƒ½æ˜¯ 5-&gt;6-&gt;3-&gt;4-&gt;1-&gt;2ï¼Œä½†ç»“æœä¸€æ ·)</span>
<span class="hljs-comment">// **å†…å­˜è¢«æ­£ç¡®é‡Šæ”¾ï¼**</span>
</code></pre>
<h3 data-id="heading-12">å¦‚ä½•ä½¿ç”¨ <code>weak_ptr</code>ï¼Ÿ</h3>
<p>ä½ éœ€è¦å…ˆæŠŠå®ƒâ€œé”ä½â€ (<code>.lock()</code>)ï¼Œå°è¯•è·å–ä¸€ä¸ªä¸´æ—¶çš„ <code>shared_ptr</code>ï¼š</p>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ª weak_ptr</span>
<span class="hljs-built_in">std</span>::weak_ptr&lt;MyClass&gt; wp = ...;

<span class="hljs-comment">// å°è¯•æå‡ (lock) ä¸º shared_ptr</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;MyClass&gt; sp = wp.lock()) {
    <span class="hljs-comment">// æå‡æˆåŠŸï¼</span>
    <span class="hljs-comment">// è¿™æ„å‘³ç€åœ¨ if è¯­å¥å—å†…ï¼Œå¯¹è±¡æ˜¯å­˜æ´»çš„</span>
    <span class="hljs-comment">// sp ä¿è¯äº†å¯¹è±¡åœ¨æ­¤æœŸé—´ä¸ä¼šè¢«é‡Šæ”¾</span>
    sp-&gt;do_something();
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æå‡å¤±è´¥ï¼Œå¯¹è±¡å·²ç»è¢«é”€æ¯äº†</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"å¯¹è±¡å·²ä¸å­˜åœ¨"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
</code></pre>
<h3 data-id="heading-13">ä»€ä¹ˆæ—¶å€™ç”¨ <code>weak_ptr</code>ï¼Ÿ</h3>
<ol>
<li><strong>æ‰“ç ´ <code>shared_ptr</code> çš„å¾ªç¯å¼•ç”¨</strong>ï¼ˆå¦‚ä¸Šä¾‹ä¸­çš„çˆ¶å­/A-B å…³ç³»ï¼‰ã€‚</li>
<li><strong>ç¼“å­˜ (Caching)</strong> ï¼šä½ æœ‰ä¸€ä¸ªç¼“å­˜ç³»ç»Ÿï¼Œå¸Œæœ›ç¼“å­˜çš„å¯¹è±¡åœ¨â€œåˆ«å¤„éƒ½ä¸ç”¨â€æ—¶è‡ªåŠ¨é”€æ¯ï¼Œä½†ä½ åˆæƒ³èƒ½éšæ—¶è®¿é—®å®ƒã€‚<code>std::map&lt;Key, std::weak_ptr&lt;Value&gt;&gt;</code> å°±å¾ˆåˆé€‚ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼š<code>Subject</code> å¯ä»¥æŒæœ‰ <code>std::vector&lt;std::weak_ptr&lt;Observer&gt;&gt;</code>ï¼Œå½“ <code>Observer</code> è‡ªè¡Œé”€æ¯æ—¶ï¼Œ<code>Subject</code> ä¸éœ€è¦çŸ¥é“ï¼Œå®ƒåœ¨é€šçŸ¥æ—¶åªéœ€æ£€æŸ¥ <code>lock()</code> æ˜¯å¦æˆåŠŸã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-14">ğŸ’¡ 6. æ™ºèƒ½æŒ‡é’ˆæœ€ä½³å®è·µï¼ˆæ€»ç»“ï¼‰</h2>
<ol>
<li>
<p><strong>é¦–é€‰ <code>std::make_unique</code> (C++14)</strong> ï¼šå½“ä½ åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ <code>unique_ptr</code>ã€‚</p>
</li>
<li>
<p><strong>éœ€è¦å…±äº«æ—¶æ‰ç”¨ <code>std::make_shared</code></strong>ï¼šå½“ä½ æ˜ç¡®çŸ¥é“æ‰€æœ‰æƒéœ€è¦è¢«å…±äº«æ—¶ï¼Œæ‰ä½¿ç”¨ <code>shared_ptr</code>ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>weak_ptr</code> æ‰“ç ´ <code>shared_ptr</code> å¾ªç¯</strong>ï¼šå½“ä½ å‘ç° <code>shared_ptr</code> æ„æˆäº†å¾ªç¯ï¼ˆä¾‹å¦‚æ ‘ç»“æ„ä¸­çš„â€œå­èŠ‚ç‚¹æŒ‡å‘çˆ¶èŠ‚ç‚¹â€ï¼‰ï¼Œä½¿ç”¨ <code>weak_ptr</code> ä½œä¸ºâ€œéæ‹¥æœ‰â€çš„ä¸€æ–¹ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦æ··ç”¨è£¸æŒ‡é’ˆå’Œæ™ºèƒ½æŒ‡é’ˆ</strong>ï¼š</p>
<ul>
<li><strong>ç»å¯¹ç¦æ­¢</strong>ï¼š<code>MyClass* raw = new MyClass();</code></li>
<li><code>std::shared_ptr&lt;MyClass&gt; p1(raw);</code></li>
<li><code>std::shared_ptr&lt;MyClass&gt; p2(raw);</code></li>
<li>è¿™ä¼šå¯¼è‡´ <code>p1</code> å’Œ <code>p2</code> éƒ½æœ‰å„è‡ªçš„å¼•ç”¨è®¡æ•°ï¼ˆéƒ½ä¸º1ï¼‰ï¼Œå®ƒä»¬éƒ½ä¼šåœ¨ææ„æ—¶å°è¯• <code>delete raw</code>ï¼Œå¯¼è‡´<strong>äºŒæ¬¡é‡Šæ”¾</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¦‚ä½•å‘å‡½æ•°ä¼ é€’æ™ºèƒ½æŒ‡é’ˆï¼Ÿï¼ˆéå¸¸é‡è¦ï¼‰</strong></p>
<ul>
<li>
<p><strong>æƒ…å†µ1ï¼šå‡½æ•°åªæ˜¯â€œä½¿ç”¨â€å¯¹è±¡ï¼Œä¸å…³å¿ƒæ‰€æœ‰æƒã€‚</strong></p>
<ul>
<li><strong>æœ€ä½³å®è·µï¼š</strong> ä¼ é€’<strong>è£¸æŒ‡é’ˆ</strong> (<code>MyClass*</code>) æˆ–<strong>å¼•ç”¨</strong> (<code>MyClass&amp;</code>)ã€‚</li>
<li><strong>åŸå› ï¼š</strong> è¿™æœ€å¿«ï¼Œå¹¶ä¸”è§£è€¦ã€‚è°ƒç”¨è€…å¯ä»¥ç”¨ <code>unique_ptr</code>ã€<code>shared_ptr</code> æˆ–æ™®é€šæ ˆå¯¹è±¡ã€‚</li>
</ul>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">use_object</span><span class="hljs-params">(MyClass* obj)</span> </span>{ obj-&gt;<span class="hljs-built_in">do_something</span>(); }
<span class="hljs-comment">// è°ƒç”¨:</span>
<span class="hljs-built_in">use_object</span>(my_unique_ptr.<span class="hljs-built_in">get</span>());
<span class="hljs-built_in">use_object</span>(my_shared_ptr.<span class="hljs-built_in">get</span>());
</code></pre>
</li>
<li>
<p><strong>æƒ…å†µ2ï¼šå‡½æ•°éœ€è¦â€œå…±äº«â€æ‰€æœ‰æƒï¼ˆä¾‹å¦‚ï¼ŒæŠŠå®ƒå­˜ä¸ºæˆå‘˜ï¼‰ã€‚</strong></p>
<ul>
<li><strong>æœ€ä½³å®è·µï¼š</strong> æŒ‰<strong>å¸¸é‡å¼•ç”¨</strong>ä¼ é€’ <code>shared_ptr</code>ã€‚</li>
</ul>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">store_object</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;MyClass&gt;&amp; ptr)</span> {
    m_member_ptr = ptr; <span class="hljs-comment">// å¤åˆ¶ï¼Œå¼•ç”¨è®¡æ•°+1</span>
}
</code></pre>
</li>
<li>
<p><strong>æƒ…å†µ3ï¼šå‡½æ•°éœ€è¦â€œå¤ºå–â€æˆ–â€œè½¬ç§»â€æ‰€æœ‰æƒã€‚</strong></p>
<ul>
<li><strong>æœ€ä½³å®è·µï¼š</strong> æŒ‰<strong>å€¼</strong>ä¼ é€’ <code>unique_ptr</code>ï¼ˆéœ€è¦ <code>std::move</code>ï¼‰ã€‚</li>
</ul>
<p>C++</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">take_ownership</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt; ptr)</span> {
    m_member_ptr = <span class="hljs-built_in">std</span>::move(ptr); <span class="hljs-comment">// æ¥æ”¶æ‰€æœ‰æƒ</span>
}
<span class="hljs-comment">// è°ƒç”¨:</span>
take_ownership(<span class="hljs-built_in">std</span>::move(my_unique_ptr));
</code></pre>
</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä½¿ç”¨LangGraphæ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7572022112102531098</link>    <guid>https://juejin.cn/post/7572022112102531098</guid>    <pubDate>2025-11-13T08:24:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572022112102531098" data-draft-id="7571731181198622756" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä½¿ç”¨LangGraphæ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-13T08:24:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ALLINAI"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056639549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä½¿ç”¨LangGraphæ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056639549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ALLINAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:24:45.000Z" title="Thu Nov 13 2025 08:24:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ä½¿ç”¨ LangGraph æ„å»ºæ™ºèƒ½ä½“æ—¶ï¼Œé¦–å…ˆè¦å°†ä»»åŠ¡åˆ†è§£ä¸ºç§°ä¸º <strong>èŠ‚ç‚¹</strong> çš„ç¦»æ•£æ­¥éª¤ã€‚ç„¶åï¼Œéœ€è¦æè¿°æ¯ä¸ªèŠ‚ç‚¹ä¸åŒçš„å†³ç­–é€»è¾‘å’ŒçŠ¶æ€è½¬æ¢æ–¹å¼ã€‚æœ€åï¼Œé€šè¿‡ä¸€ä¸ª <strong>å…±äº«çŠ¶æ€</strong> å°†å„ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è¯»å†™è¯¥çŠ¶æ€ã€‚</p>
<hr/>
<p>è¦åœ¨ LangGraph ä¸­å®ç°æ™ºèƒ½ä½“ï¼Œé€šå¸¸éœ€è¦éµå¾ªäº”ä¸ªæ­¥éª¤ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šå°†ä½ çš„å·¥ä½œæµç¨‹åˆ†è§£æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„æ­¥éª¤ã€‚</h2>
<p>é¦–å…ˆï¼Œç¡®å®šæµç¨‹ä¸­çš„å„ä¸ªæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½å°†æˆä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¸€ä¸ªæ‰§è¡Œç‰¹å®šæ“ä½œçš„å‡½æ•°ï¼‰ã€‚ç„¶åï¼Œç»˜åˆ¶è¿™äº›æ­¥éª¤ä¹‹é—´çš„è¿æ¥å›¾ã€‚</p>
<h2 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šæ˜ç¡®æ¯ä¸ªæ­¥éª¤éœ€è¦åšä»€ä¹ˆ</h2>
<p>å¯¹äºå›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œç¡®å®šå®ƒä»£è¡¨ä»€ä¹ˆç±»å‹çš„æ“ä½œä»¥åŠå®ƒéœ€è¦ä»€ä¹ˆä¸Šä¸‹æ–‡æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<p>ä¸€èˆ¬æœ‰ä»¥ä¸‹4ç§ç±»å‹çš„æ“ä½œæ­¥éª¤ï¼š</p>
<ul>
<li><strong>LLM æ­¥éª¤</strong>ï¼šç”¨äºæŸä¸ªæ­¥éª¤éœ€è¦ç†è§£ã€åˆ†æã€ç”Ÿæˆæ–‡æœ¬æˆ–åšå‡ºæ¨ç†å†³ç­–æ—¶ã€‚</li>
<li><strong>æ•°æ®æ­¥éª¤</strong>ï¼šç”¨äºæŸä¸ªæ­¥éª¤éœ€è¦ä»å¤–éƒ¨æ¥æºæ£€ç´¢ä¿¡æ¯æ—¶ã€‚</li>
<li><strong>åŠ¨ä½œæ­¥éª¤</strong>ï¼šç”¨äºæŸä¸ªæ­¥éª¤éœ€è¦æ‰§è¡Œå¤–éƒ¨æ“ä½œæ—¶ã€‚</li>
<li><strong>ç”¨æˆ·è¾“å…¥æ­¥éª¤</strong>ï¼šç”¨äºæŸä¸ªæ­¥éª¤éœ€è¦äººå·¥å¹²é¢„æ—¶ã€‚</li>
</ul>
<h3 data-id="heading-2">åˆ†ç±»è¯¦è§£ä¸å®ä¾‹</h3>



































<table><thead><tr><th align="left">æ­¥éª¤ç±»å‹</th><th align="left">æ ¸å¿ƒèŒèƒ½</th><th align="left">å…¸å‹èŠ‚ç‚¹ç¤ºä¾‹</th><th align="left">æ‰€éœ€ä¸Šä¸‹æ–‡ï¼ˆä¸¾ä¾‹ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>LLM æ­¥éª¤</strong><br/>ï¼ˆå¤§è„‘ï¼‰</td><td align="left"><strong>ç†è§£ã€æ¨ç†ã€å†³ç­–ã€ç”Ÿæˆ</strong></td><td align="left">â€¢ <strong>åˆ†ç±»èŠ‚ç‚¹</strong>ï¼šåˆ†æç”¨æˆ·æ„å›¾ã€‚<br/>â€¢ <strong>èµ·è‰å›å¤èŠ‚ç‚¹</strong>ï¼šç”Ÿæˆå›å¤å†…å®¹ã€‚</td><td align="left">â€¢ åŸå§‹ç”¨æˆ·è¾“å…¥<br/>â€¢ åˆ†ç±»ç»“æœ<br/>â€¢ å…¬å¸å›å¤é£æ ¼æŒ‡å—</td></tr><tr><td align="left"><strong>æ•°æ®æ­¥éª¤</strong><br/>ï¼ˆè®°å¿†ï¼‰</td><td align="left"><strong>ä¿¡æ¯æ£€ç´¢ã€æ•°æ®æŸ¥è¯¢</strong></td><td align="left">â€¢ <strong>æ–‡æ¡£æœç´¢èŠ‚ç‚¹</strong>ï¼šä»çŸ¥è¯†åº“æŸ¥æ‰¾ç­”æ¡ˆã€‚<br/>â€¢ <strong>å®¢æˆ·å†å²æŸ¥è¯¢</strong>ï¼šä»æ•°æ®åº“è·å–è¿‡å¾€è®°å½•ã€‚</td><td align="left">â€¢ æŸ¥è¯¢å…³é”®è¯ï¼ˆå¦‚è®¢å•å·ï¼‰<br/>â€¢ æœç´¢èŒƒå›´/æƒé™</td></tr><tr><td align="left"><strong>åŠ¨ä½œæ­¥éª¤</strong><br/>ï¼ˆæ‰‹è„šï¼‰</td><td align="left"><strong>æ‰§è¡Œå®é™…æ“ä½œã€æ”¹å˜å¤–éƒ¨çŠ¶æ€</strong></td><td align="left">â€¢ <strong>å‘é€å›å¤èŠ‚ç‚¹</strong>ï¼šå°†æœ€ç»ˆå›å¤é‚®ä»¶å‘å‡ºã€‚<br/>â€¢ <strong>åˆ›å»ºå·¥å•èŠ‚ç‚¹</strong>ï¼šåœ¨è¿½è¸ªç³»ç»Ÿä¸­åˆ›å»ºBugå·¥å•ã€‚</td><td align="left">â€¢ æœ€ç»ˆå®¡å®šçš„å›å¤å†…å®¹<br/>â€¢ ç›®æ ‡é‚®ç®±åœ°å€<br/>â€¢ å·¥å•è¯¦ç»†ä¿¡æ¯</td></tr><tr><td align="left"><strong>ç”¨æˆ·è¾“å…¥æ­¥éª¤</strong><br/>ï¼ˆç›‘ç£ï¼‰</td><td align="left"><strong>å¼•å…¥äººç±»åˆ¤æ–­ã€å¤„ç†å¼‚å¸¸</strong></td><td align="left">â€¢ <strong>äººå·¥å®¡æ ¸èŠ‚ç‚¹</strong>ï¼šå°†æ•æ„Ÿæˆ–å¤æ‚å›å¤äº¤ç”±äººå·¥å®¡æ‰¹ã€‚</td><td align="left">â€¢ éœ€è¦å®¡æ ¸çš„å›å¤è‰ç¨¿<br/>â€¢ è§¦å‘é€å®¡çš„åŸå› ï¼ˆå¦‚é«˜é‡‘é¢é€€æ¬¾ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šè®¾è®¡ä½ çš„å…±äº«çŠ¶æ€</h2>
<p>çŠ¶æ€æ˜¯ä½ çš„æ™ºèƒ½ä½“ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯ä»¥è®¿é—®çš„å…±äº«è®°å¿†ã€‚ä½ å¯ä»¥å°†å…¶æƒ³è±¡æˆä½ çš„æ™ºèƒ½ä½“åœ¨å¤„ç†æµç¨‹ä¸­æ‰€ä½¿ç”¨çš„ç¬”è®°æœ¬ï¼Œç”¨æ¥è®°å½•å®ƒåœ¨æ­¤è¿‡ç¨‹ä¸­äº†è§£åˆ°çš„ä¸€åˆ‡ä¿¡æ¯å’Œåšå‡ºçš„æ‰€æœ‰å†³å®šã€‚</p>
<p>è®¾è®¡çŠ¶æ€å°±æ˜¯ä¸ºä½ çš„æ™ºèƒ½ä½“ <strong>è®¾è®¡æ•°æ®ç»“æ„</strong>ã€‚ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„â€œå…±äº«ç¬”è®°æœ¬â€ï¼ˆçŠ¶æ€ï¼‰æ˜¯æ„å»ºä¸€ä¸ªé«˜æ•ˆã€å¯é ä¸”æ˜“äºç†è§£çš„æ™ºèƒ½ä½“å·¥ä½œæµçš„åŸºçŸ³ã€‚å®ƒå†³å®šäº†èŠ‚ç‚¹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Œä»¥åŠå·¥ä½œæµçš„ä¸Šä¸‹æ–‡å¦‚ä½•å¾—ä»¥ä¿æŒã€‚</p>
<h3 data-id="heading-4">å“ªäº›æ•°æ®è¦ä¿å­˜åœ¨çŠ¶æ€ä¸­ï¼Ÿ</h3>
<p>è¿™ä¸ªæ•°æ®æ˜¯å¦éœ€è¦è·¨æ­¥éª¤ä¿æŒï¼Ÿå¦‚æœéœ€è¦ï¼Œåˆ™å°†å…¶ç½®äºçŠ¶æ€ä¸­ã€‚å¦‚æœèƒ½ä»å…¶ä»–æ•°æ®ä¸­æ¨å¯¼å‡ºï¼Œåˆ™åœ¨éœ€è¦æ—¶è®¡ç®—ï¼Œè€Œä¸æ˜¯å°†å…¶å­˜å‚¨åœ¨çŠ¶æ€ä¸­ã€‚</p>
<p>ğŸ’¡ <strong>ä¸€ä¸ªå…³é”®åŸåˆ™</strong>ï¼šä½ çš„çŠ¶æ€åº”è¯¥å­˜å‚¨åŸå§‹æ•°æ®ï¼Œè€Œä¸æ˜¯æ ¼å¼åŒ–çš„æ–‡æœ¬ã€‚éœ€è¦æ—¶ï¼Œåœ¨èŠ‚ç‚¹å†…éƒ¨è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<h2 data-id="heading-5">ç¬¬å››æ­¥ï¼šæ„å»ºèŠ‚ç‚¹</h2>
<p>æ„å»ºèŠ‚ç‚¹å°±æ˜¯æˆ‘ä»¬å°†æ¯ä¸ªæ­¥éª¤å®ç°ä¸ºä¸€ä¸ªå‡½æ•°ã€‚LangGraph ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œå®ƒæ¥æ”¶å½“å‰çŠ¶æ€å¹¶è¿”å›æ›´æ–°åçš„çŠ¶æ€ã€‚</p>
<h3 data-id="heading-6">å¦‚ä½•å¦¥å–„å¤„ç†èŠ‚ç‚¹ä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Ÿ</h3>



































<table><thead><tr><th align="left">é”™è¯¯ç±»å‹</th><th align="left">è°æ¥ä¿®å¤å®ƒ</th><th align="left">ä¿®å¤ç­–ç•¥</th><th align="left">ä½•æ—¶ä½¿ç”¨</th></tr></thead><tbody><tr><td align="left">ç¬æ€é”™è¯¯ï¼ˆç½‘ç»œé—®é¢˜ã€é€Ÿç‡é™åˆ¶ï¼‰</td><td align="left">ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰</td><td align="left">é‡è¯•ç­–ç•¥</td><td align="left">ä¸´æ—¶æ•…éšœï¼Œé€šå¸¸åœ¨é‡è¯•åè§£å†³ã€‚</td></tr><tr><td align="left">LLM å¯æ¢å¤é”™è¯¯ï¼ˆå·¥å…·æ•…éšœã€è§£æé—®é¢˜ï¼‰</td><td align="left">LLM</td><td align="left">å°†é”™è¯¯å­˜å‚¨åœ¨çŠ¶æ€ä¸­å¹¶å¾ªç¯è¿”å›</td><td align="left">LLMèƒ½å¤Ÿå‘ç°é”™è¯¯å¹¶è°ƒæ•´å…¶æ–¹æ³•</td></tr><tr><td align="left">ç”¨æˆ·å¯ä¿®æ­£çš„é”™è¯¯ï¼ˆä¿¡æ¯ç¼ºå¤±ã€è¯´æ˜ä¸æ¸…æ™°ï¼‰</td><td align="left">äººç±»</td><td align="left">æš‚åœ</td><td align="left">éœ€è¦ç”¨æˆ·è¾“å…¥æ‰èƒ½ç»§ç»­</td></tr><tr><td align="left">æ„å¤–é”™è¯¯</td><td align="left">å¼€å‘è€…</td><td align="left">è®©é”™è¯¯å†’æ³¡å§</td><td align="left">æœªçŸ¥é—®é¢˜éœ€è¦Debug</td></tr></tbody></table>
<h2 data-id="heading-7">ç¬¬äº”æ­¥ï¼šå°†èŠ‚ç‚¹è¿æ¥èµ·æ¥</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†èŠ‚ç‚¹è¿æ¥æˆä¸€ä¸ªå¯è¿è¡Œçš„å·¥ä½œæµå›¾ã€‚ç”±äºæˆ‘ä»¬çš„èŠ‚ç‚¹èƒ½å¤Ÿå¤„ç†è‡ªèº«çš„è·¯ç”±å†³ç­–ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰å‡ æ¡å¿…è¦çš„è¾¹å³å¯ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“ä¸€ä¸‹</h2>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ LangGraph çš„æ€ç»´æ–¹å¼ï¼š</p>
<ul>
<li>å°†ä»»åŠ¡åˆ†è§£æˆè‹¥å¹²ä¸ªç‹¬ç«‹çš„æ­¥éª¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸“æ³¨äºåšå¥½ä¸€ä»¶äº‹ã€‚</li>
<li>çŠ¶æ€æ˜¯å…±äº«çš„è®°å¿†ï¼Œä¿å­˜äº†åŸå§‹æ•°æ®ã€‚</li>
<li>æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥çŠ¶æ€ï¼Œè¾“å‡ºæ›´æ–°åçš„çŠ¶æ€ã€‚</li>
<li>é”™è¯¯æ˜¯æµç¨‹é¢„è®¾çš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å¤šç§ç­–ç•¥ä¿®å¤å®ƒã€‚</li>
<li>äººå·¥å¹²é¢„å…·æœ‰æœ€é«˜æƒé™ï¼Œç­‰å¾…äººå·¥å¹²é¢„æ—¶æš‚åœæ‰§è¡Œï¼Œä¿å­˜æ‰€æœ‰çŠ¶æ€ã€‚</li>
<li>åªéœ€å°‘é‡çš„å¿…è¦è¿æ¥ï¼Œå›¾ç»“æ„ç”±èŠ‚ç‚¹è‡ªè¡Œæ„å»ºå‡ºæ¥ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠFlutterå…¨æ ˆå¼€å‘å®æˆ˜æŒ‡å—ï¼šä»é›¶åˆ°é«˜çº§ã€‹- 14 -ç½‘ç»œè¯·æ±‚ä¸æ•°æ®è§£æ]]></title>    <link>https://juejin.cn/post/7571892340878606374</link>    <guid>https://juejin.cn/post/7571892340878606374</guid>    <pubDate>2025-11-13T08:11:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571892340878606374" data-draft-id="7571830282849681459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠFlutterå…¨æ ˆå¼€å‘å®æˆ˜æŒ‡å—ï¼šä»é›¶åˆ°é«˜çº§ã€‹- 14 -ç½‘ç»œè¯·æ±‚ä¸æ•°æ®è§£æ"/> <meta itemprop="keywords" content="Flutter,Dart,iOS"/> <meta itemprop="datePublished" content="2025-11-13T08:11:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QuantumLeapä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/1767603104125197"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠFlutterå…¨æ ˆå¼€å‘å®æˆ˜æŒ‡å—ï¼šä»é›¶åˆ°é«˜çº§ã€‹- 14 -ç½‘ç»œè¯·æ±‚ä¸æ•°æ®è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1767603104125197/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QuantumLeapä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:11:34.000Z" title="Thu Nov 13 2025 08:11:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç½‘ç»œè¯·æ±‚ä¸æ•°æ®è§£æ</h2>
<blockquote>
<p>åœ¨ç§»åŠ¨å¼€å‘ä¸­éœ€è¦ä¸äº‘ç«¯æœåŠ¡å™¨è¿›è¡Œé¢‘ç¹çš„æ•°æ®äº¤äº’ï¼Œæœ¬èŠ‚å†…å®¹è®²å¸¦ä½ è¯¦ç»†äº†è§£ç½‘ç»œè¯·æ±‚ä¸æ•°æ®è§£æï¼Œè®©ä½ çš„åº”ç”¨çœŸæ­£åœ°â€œæ´»â€èµ·æ¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ ä¸ºä»€ä¹ˆç½‘ç»œå±‚å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæ–°é—»Appï¼Œé‚£äº›æ»šåŠ¨çš„æ—¶äº‹æ–°é—»ã€è§†é¢‘ç­‰å†…å®¹ï¼Œä¸å¯èƒ½å…¨éƒ¨æ‰“åŒ…åœ¨Appå®‰è£…åŒ…é‡Œï¼Œå®ƒä»¬éœ€è¦ä»æœåŠ¡å™¨å®æ—¶è·å–ã€‚è¿™ä¸ªâ€œè·å–â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯é€šè¿‡ç½‘ç»œè¯·æ±‚å®Œæˆçš„ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œæµç¨‹å°±æ˜¯ï¼š<strong>App é—®æœåŠ¡å™¨è¦æ•°æ® -&gt; æœåŠ¡å™¨è¿”å›æ•°æ® -&gt; App æŠŠæ•°æ®å±•ç¤ºå‡ºæ¥</strong>ã€‚</p>
<p>åœ¨Flutterä¸­ï¼Œå¸¸ç”¨çš„ä¸¤ä¸ªç½‘ç»œè¯·æ±‚åº“ï¼š<strong>å®˜æ–¹æ¨èçš„ <code>http</code> åº“</strong> å’Œ <strong>ç¤¾åŒºç»´æŠ¤å¾— <code>dio</code> åº“</strong>ã€‚æˆ‘ä»¬å°†ä»ä¸¤è€…å…¥æ‰‹ï¼Œå¸¦ä½ å½»åº•ç©è½¬ç½‘ç»œè¯·æ±‚ã€‚</p>
<h3 data-id="heading-2">äºŒã€ <code>httpåº“</code> ä¸ <code>dioåº“</code> å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<p>é€‰æ‹©å“ªä¸ªåº“ï¼Œå°±åƒé€‰æ‹©å·¥å…·ï¼Œæ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œåªæœ‰åˆä¸åˆé€‚ã€‚</p>
<h4 data-id="heading-3">1. <code>http</code> åº“</h4>
<p><code>http</code> åº“æ˜¯Flutterå›¢é˜Ÿç»´æŠ¤çš„åº•å±‚åº“ï¼Œå®ƒï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®˜æ–¹ç»´æŠ¤ï¼Œç¨³å®šå¯é ï¼›APIç®€å•ç›´æ¥ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šåŠŸèƒ½ç›¸å¯¹åŸºç¡€ï¼Œè®¸å¤šé«˜çº§åŠŸèƒ½ï¼ˆå¦‚æ‹¦æˆªå™¨ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½è¿›åº¦ç­‰ï¼‰éœ€è¦è‡ªå·±æ‰‹åŠ¨å®ç°ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>get()</code>: å‘æŒ‡å®šURLå‘èµ·GETè¯·æ±‚ï¼Œç”¨äºè·å–æ•°æ®ã€‚</li>
<li><code>post()</code>: å‘èµ·POSTè¯·æ±‚ï¼Œç”¨äºæäº¤æ•°æ®ã€‚</li>
<li><code>put()</code>, <code>delete()</code>, <code>head()</code> ç­‰ï¼šå¯¹åº”å…¶ä»–HTTPæ–¹æ³•ã€‚</li>
</ul>
<h4 data-id="heading-4">2. <code>dio</code> åº“</h4>
<p><code>dio</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç¬¬ä¸‰æ–¹HTTPå®¢æˆ·ç«¯ï¼Œå®ƒï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ”¯æŒ<strong>æ‹¦æˆªå™¨</strong>ã€<strong>å…¨å±€é…ç½®</strong>ã€<strong>è¯·æ±‚å–æ¶ˆ</strong>ã€<strong>FormData</strong>ã€<strong>æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½</strong>ã€<strong>è¶…æ—¶è®¾ç½®</strong>ç­‰ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šç›¸å¯¹äº<code>http</code>åº“æ›´é‡ä¸€äº›ã€‚</li>
</ul>
<p><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>
<ul>
<li><strong>æ–°æ‰‹å…¥é—¨</strong>ï¼šå¯ä»¥ä» <code>http</code> å¼€å§‹ï¼Œä¸Šæ‰‹å¿«ã€‚</li>
<li><strong>ä¸­å¤§å‹é¡¹ç›®</strong>ï¼šå¼ºçƒˆæ¨è <code>dio</code>ï¼Œå®ƒèƒ½å¸®ä½ èŠ‚çœå¤§é‡é€ è½®å­çš„æ—¶é—´ã€‚</li>
</ul>
<p><strong>æœ¬èŠ‚å†…å®¹ä¸»è¦ä»¥ <code>dio</code> ä¸ºä¾‹è¿›è¡Œè®²è§£</strong>ï¼Œå®ƒæ›´ç¬¦åˆé¡¹ç›®å¼€å‘çš„å®é™…æƒ…å†µã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€ å¼•å…¥ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œåœ¨ä½ çš„ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­å£°æ˜ä¾èµ–ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">dio:</span> <span class="hljs-string">^5.0.0</span> 
  <span class="hljs-comment"># ç”¨äºJSONåºåˆ—åŒ–</span>
  <span class="hljs-attr">json_annotation:</span> <span class="hljs-string">^4.8.0</span>

<span class="hljs-attr">dev_dependencies:</span>
  <span class="hljs-attr">flutter_test:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">build_runner:</span> <span class="hljs-string">^2.3.0</span>
  <span class="hljs-attr">json_serializable:</span> <span class="hljs-string">^6.5.0</span>
</code></pre>
<p>æ‰§è¡Œ <code>flutter pub get</code> å®‰è£…ä¾èµ–ã€‚</p>
<h3 data-id="heading-6">å››ã€ <code>http</code> åº“</h3>
<p>è™½ç„¶æˆ‘ä»¬æ¨èä½¿ç”¨<code>dio</code>åº“ï¼Œä½†äº†è§£<code>http</code>åº“çš„åŸºæœ¬ç”¨æ³•ä»æ˜¯å¿…è¦çš„ã€‚</p>
<p><strong>ä»¥è·å–ä¸€ç¯‡åšå®¢æ–‡ç« ä¿¡æ¯ä¸ºä¾‹</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:http/http.dart'</span> <span class="hljs-keyword">as</span> http; 
<span class="hljs-keyword">import</span> <span class="hljs-string">'dart:convert'</span>; 

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpExample</span> </span>{
  
  <span class="hljs-keyword">static</span> Future&lt;<span class="hljs-keyword">void</span>&gt; fetchPost() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. å‘èµ·GETè¯·æ±‚</span>
      <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(
        <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts/1'</span>),
      );

      <span class="hljs-comment">// 2. çŠ¶æ€ç 200è¡¨ç¤ºæˆåŠŸ</span>
      <span class="hljs-keyword">if</span> (response.statusCode == <span class="hljs-number">200</span>) {
        <span class="hljs-comment">// 3. ä½¿ç”¨ dart:convert è§£æè¿”å›çš„JSONå­—ç¬¦ä¸²</span>
        <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; jsonData = json.decode(response.body);
        
        <span class="hljs-comment">// 4. ä»è§£æåçš„Mapä¸­å–å‡ºæ•°æ®</span>
        <span class="hljs-built_in">String</span> title = jsonData[<span class="hljs-string">'title'</span>];
        <span class="hljs-built_in">String</span> body = jsonData[<span class="hljs-string">'body'</span>];
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ ‡é¢˜: <span class="hljs-subst">$title</span>'</span>);
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'å†…å®¹: <span class="hljs-subst">$body</span>'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è¯·æ±‚å¤±è´¥</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : <span class="hljs-subst">${response.statusCode}</span>'</span>);
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'å“åº”ä½“: <span class="hljs-subst">${response.body}</span>'</span>);
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-comment">// æ•è·å¼‚å¸¸</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚å‘ç”Ÿå¼‚å¸¸: <span class="hljs-subst">$e</span>'</span>);
    }
  }
}
</code></pre>
<p><strong>ä»£ç è§£è¯»ï¼š</strong></p>
<ol>
<li><code>async</code>/<code>await</code>ï¼šç½‘ç»œè¯·æ±‚æ˜¯è€—æ—¶æ“ä½œï¼Œå¿…é¡»ä½¿ç”¨å¼‚æ­¥ã€‚<code>await</code> ä¼šç­‰å¾…è¯·æ±‚å®Œæˆï¼Œè€Œä¸ä¼šé˜»å¡UIçº¿ç¨‹ã€‚</li>
<li><code>Uri.parse</code>ï¼šå°†å­—ç¬¦ä¸²URLè½¬æ¢ä¸ºUriå¯¹è±¡ã€‚</li>
<li><code>response.statusCode</code>ï¼šå“åº”çŠ¶æ€ç ï¼Œ<strong>200ç³»åˆ—è¡¨ç¤ºæˆåŠŸ</strong>ã€‚</li>
<li><code>json.decode()</code>ï¼šååºåˆ—åŒ–å°†JSONä¸²è½¬æ¢ä¸ºDartä¸­çš„ <code>Map&lt;String, dynamic&gt;</code> æˆ– <code>List</code>ï¼›</li>
</ol>
<h3 data-id="heading-7">äº”ã€ <code>dio</code> åº“</h3>
<p>ä¸‹é¢æˆ‘ä»¬é‡ç‚¹è®²è§£ä¸‹<code>dio</code>åº“ï¼š</p>
<h4 data-id="heading-8">1. Dio-å‘èµ·è¯·æ±‚</h4>
<p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªDioå®ä¾‹å¹¶è¿›è¡Œå…¨å±€é…ç½®ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DioManager</span> </span>{
  <span class="hljs-comment">// å•ä¾‹</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> DioManager _instance = DioManager._internal();
  <span class="hljs-keyword">factory</span> DioManager() =&gt; _instance;
  DioManager._internal() {
    _dio = Dio(BaseOptions(
      baseUrl: <span class="hljs-string">'https://jsonplaceholder.typicode.com'</span>, 
      connectTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">5</span>), <span class="hljs-comment">// è¿æ¥è¶…æ—¶æ—¶é—´</span>
      receiveTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">3</span>), <span class="hljs-comment">// æ¥æ”¶æ•°æ®è¶…æ—¶æ—¶é—´</span>
      headers: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>, 
      },
    ));
  }

  <span class="hljs-keyword">late</span> <span class="hljs-keyword">final</span> Dio _dio;
  Dio <span class="hljs-keyword">get</span> dio =&gt; _dio;
}

<span class="hljs-comment">// GETè¯·æ±‚</span>
<span class="hljs-keyword">void</span> fetchPostWithDio() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// baseUrlåé¢æ‹¼æ¥è·¯å¾„</span>
    Response response = <span class="hljs-keyword">await</span> DioManager().dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/posts/1'</span>);
    <span class="hljs-comment">// dioä¼šè‡ªåŠ¨æ£€æŸ¥çŠ¶æ€ç ï¼Œé200ç³»åˆ—ä¼šæŠ›å¼‚å¸¸ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å¤„ç†æ•°æ®</span>
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; data = response.data; <span class="hljs-comment">// è¿™é‡Œdioå¸®æˆ‘ä»¬è‡ªåŠ¨è§£æäº†JSON</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è·å–æ•°æ®: <span class="hljs-subst">${data[<span class="hljs-string">'title'</span>]}</span>'</span>);
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚å¼‚å¸¸: <span class="hljs-subst">$e</span>'</span>);
    <span class="hljs-keyword">if</span> (e.response != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// é”™è¯¯çŠ¶æ€ç </span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'é”™è¯¯çŠ¶æ€ç : <span class="hljs-subst">${e.response?.statusCode}</span>'</span>);
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'é”™è¯¯ä¿¡æ¯: <span class="hljs-subst">${e.response?.data}</span>'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æŠ›å¼‚å¸¸</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å¼‚å¸¸: <span class="hljs-subst">${e.message}</span>'</span>);
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// æœªçŸ¥å¼‚å¸¸</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœªçŸ¥å¼‚å¸¸: <span class="hljs-subst">$e</span>'</span>);
  }
}
</code></pre>
<p><strong>Dioç›¸æ¯”Httpçš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>è‡ªåŠ¨JSONè§£æ</strong>ï¼š<code>response.data</code> ç›´æ¥å°±æ˜¯Mapæˆ–Listï¼Œæ— éœ€æ‰‹åŠ¨ <code>json.decode</code>ï¼Œå¤ªæ–¹ä¾¿äº†ï¼</li>
<li><strong>é…ç½®æ¸…æ™°</strong>ï¼š<code>BaseOptions</code> å…¨å±€é…ç½®ä¸€ç›®äº†ç„¶ã€‚</li>
<li><strong>ç»“æ„åŒ–å¼‚å¸¸</strong>ï¼š<code>DioException</code> åŒ…å«äº†ä¸°å¯Œçš„é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-9">2. Dio-ç½‘ç»œè¯·æ±‚æµç¨‹</h4>
<p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæµç¨‹å›¾æ¥å±•ç¤ºDioå¤„ç†è¯·æ±‚çš„å®Œæ•´è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as å®¢æˆ·ç«¯
    participant I as æ‹¦æˆªå™¨
    participant D as Dio
    participant S as æœåŠ¡ç«¯

    A-&gt;&gt;D: å‘èµ·è¯·æ±‚
    Note right of A: await dio.get('/users')
    
    D-&gt;&gt;I: è¯·æ±‚æ‹¦æˆªå™¨
    Note right of I: æ·»åŠ Tokenã€æ—¥å¿—ç­‰
    
    I-&gt;&gt;D: å¤„ç†åçš„è¯·æ±‚
    D-&gt;&gt;S: å‘é€ç½‘ç»œè¯·æ±‚
    
    S--&gt;&gt;D: è¿”å›å“åº”
    D-&gt;&gt;I: å“åº”æ‹¦æˆªå™¨
    Note right of I: è§£æJSONã€é”™è¯¯å¤„ç†
    
    I-&gt;&gt;D: å¤„ç†åçš„å“åº”
    D--&gt;&gt;A: è¿”å›æœ€ç»ˆç»“æœ
</code></pre>
<h4 data-id="heading-10">3. Dio-æ‹¦æˆªå™¨</h4>
<p>æ‹¦æˆªå™¨å…è®¸æˆ‘ä»¬åœ¨è¯·æ±‚å‘é€å‰å’Œå“åº”è¿”å›åï¼Œæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œå¯¹æ‰€æœ‰ç»è¿‡çš„è¯·æ±‚å’Œå“åº”è¿›è¡Œæ£€æŸ¥å’ŒåŠ å·¥ã€‚</p>
<p><strong>æ¡ˆä¾‹ï¼šè‡ªåŠ¨æ·»åŠ è®¤è¯Token</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Interceptor</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onRequest(RequestOptions options, RequestInterceptorHandler handler) {
    <span class="hljs-comment">// è¯·æ±‚å‘é€å‰ï¼Œä¸ºæ¯ä¸ªè¯·æ±‚çš„HeaderåŠ ä¸ŠToken</span>
    <span class="hljs-keyword">const</span> <span class="hljs-built_in">String</span> token = <span class="hljs-string">'your_auth_token_here'</span>;
    <span class="hljs-keyword">if</span> (token.isNotEmpty) {
      options.headers[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-string">'Bearer <span class="hljs-subst">$token</span>'</span>;
    }
    
    handler.next(options);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onResponse(Response response, ResponseInterceptorHandler handler) {
    <span class="hljs-comment">// å“åº”æˆåŠŸå¤„ç†</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ: <span class="hljs-subst">${response.requestOptions.path}</span>'</span>);
    handler.next(response);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onError(DioException err, ErrorInterceptorHandler handler) {
    <span class="hljs-comment">// å¤±è´¥å¤„ç†</span>
    <span class="hljs-comment">// å½“Tokenè¿‡æœŸæ—¶ï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ</span>
    <span class="hljs-keyword">if</span> (err.response?.statusCode == <span class="hljs-number">401</span>) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'Tokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•!'</span>);
      <span class="hljs-comment">// è¿™é‡Œå¯ä»¥è·³è½¬åˆ°ç™»å½•é¡µé¢</span>
      <span class="hljs-comment">// NavigationService.instance.navigateTo('/login');</span>
    }
 
    handler.next(err);
  }
}

<span class="hljs-comment">// å°†æ‹¦æˆªå™¨æ·»åŠ åˆ°Dioå®ä¾‹ä¸­</span>
<span class="hljs-keyword">void</span> main() {
  <span class="hljs-keyword">final</span> dio = DioManager().dio;
  dio.interceptors.add(AuthInterceptor());
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–æ‹¦æˆªå™¨</span>
  dio.interceptors.add(LogInterceptor(responseBody: <span class="hljs-keyword">true</span>)); 
}
</code></pre>
<blockquote>
<p>æ‹¦æˆªå™¨çš„æ·»åŠ é¡ºåºå°±æ˜¯å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚<code>onRequest</code> æ­£åºæ‰§è¡Œï¼Œ<code>onResponse</code> å’Œ <code>onError</code> å€’åºæ‰§è¡Œã€‚</p>
</blockquote>
<h3 data-id="heading-11">å…­ã€ JSONåºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h3>
<blockquote>
<p>è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“è¸©å‘çš„åœ°æ–¹ã€‚ç›´æ¥ä»JSONè½¬æ¢æˆDartå¯¹è±¡ï¼ˆModelï¼‰ï¼Œèƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´å®‰å…¨ã€æ›´æ˜“ç»´æŠ¤ã€‚</p>
</blockquote>
<h4 data-id="heading-12">1. ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ</h4>
<ul>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç›´æ¥æ“ä½œMapï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“<code>data[â€˜titleâ€˜]</code>æ˜¯Stringè¿˜æ˜¯intï¼Œå®¹æ˜“å†™é”™;</li>
<li><strong>ä»£ç æ•ˆç‡</strong>ï¼šä½¿ç”¨ç‚¹è¯­æ³•<code>post.title</code>è®¿é—®å±æ€§ï¼Œæ¯”<code>post[â€˜titleâ€˜]</code>æ›´é«˜æ•ˆä¸”æœ‰ä»£ç æç¤º;</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šå½“æ¥å£å­—æ®µå˜æ›´æ—¶ï¼Œä½ åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªModelç±»ï¼Œè€Œä¸æ˜¯åˆ†æ•£åœ¨å„å¤„çš„å­—ç¬¦ä¸²key;;</li>
</ul>
<h4 data-id="heading-13">2. ä½¿ç”¨ <code>json_serializable</code>è‡ªåŠ¨åºåˆ—åŒ–</h4>
<p>é€šè¿‡ä»£ç ç”Ÿæˆçš„æ–¹å¼ï¼Œè‡ªåŠ¨åˆ›å»º <code>fromJson</code> å’Œ <code>toJson</code> æ–¹æ³•ï¼Œä¸€åŠ³æ°¸é€¸ã€‚</p>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºModelç±»å¹¶ä½¿ç”¨æ³¨è§£</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// post.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:json_annotation/json_annotation.dart'</span>;

<span class="hljs-comment">// è¿è¡Œ `flutter pub run build_runner build` åï¼Œä¼šç”Ÿæˆ post.g.dart æ–‡ä»¶</span>
<span class="hljs-keyword">part</span> <span class="hljs-string">'post.g.dart'</span>;

<span class="hljs-comment">// è¿™ä¸ªæ³¨è§£å‘Šè¯‰ç”Ÿæˆå™¨è¿™ä¸ªç±»éœ€è¦ç”Ÿæˆåºåˆ—åŒ–ä»£ç </span>
<span class="hljs-meta">@JsonSerializable</span>()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span> </span>{
  <span class="hljs-comment">// ä½¿ç”¨@JsonKeyå¯ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–è¡Œä¸º</span>
  <span class="hljs-comment">// ä¾‹å¦‚ï¼Œå¦‚æœJSONå­—æ®µåæ˜¯`user_id`ï¼Œè€ŒDartå­—æ®µæ˜¯`userId`ï¼Œå¯ä»¥è¿™æ ·æ˜ å°„ï¼š</span>
  <span class="hljs-comment">// @JsonKey(name: 'user_id')</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> userId;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> id;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> body;

  Post({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.userId,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.title,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.body,
  });

  <span class="hljs-comment">// ç”Ÿæˆçš„ä»£ç ä¼šæä¾›è¿™ä¸¤ä¸ªæ–¹æ³•</span>
  <span class="hljs-keyword">factory</span> Post.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) =&gt; _$PostFromJson(json);
  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson() =&gt; _$PostToJson(<span class="hljs-keyword">this</span>);
}
</code></pre>
<p><strong>æ­¥éª¤2ï¼šè¿è¡Œä»£ç ç”Ÿæˆå‘½ä»¤</strong></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub run build_runner build
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šæ‰«ææ‰€æœ‰å¸¦æœ‰ <code>@JsonSerializable()</code> æ³¨è§£çš„ç±»ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„ <code>.g.dart</code> æ–‡ä»¶ï¼ˆå¦‚ <code>post.g.dart</code>ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶é‡ŒåŒ…å«äº† <code>_$PostFromJson</code> å’Œ <code>_$PostToJson</code> çš„å…·ä½“å®ç°ã€‚</p>
<p><strong>æ­¥éª¤3ï¼šè‡ªåŠ¨ç”Ÿæˆ</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å…·ä½“çš„è¯·æ±‚æ–¹æ³•ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">void</span> fetchPostModel() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    Response response = <span class="hljs-keyword">await</span> DioManager().dio.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/posts/1'</span>);
    <span class="hljs-comment">// å°†å“åº”æ•°æ®è½¬æ¢ä¸ºPostå¯¹è±¡</span>
    Post post = Post.fromJson(response.data);
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ–‡ç« æ ‡é¢˜: <span class="hljs-subst">${post.title}</span>'</span>);
  } <span class="hljs-keyword">on</span> DioException <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// ... é”™è¯¯å¤„ç†</span>
  }
}
</code></pre>
<p><strong><code>json_serializable</code> çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨å¤„ç†ç±»å‹è½¬æ¢ï¼Œé¿å…æ‰‹è¯¯ï¼›</li>
<li>é€šè¿‡ <code>@JsonKey</code> æ³¨è§£å¯ä»¥å¤„ç†å„ç§å¤æ‚åœºæ™¯ï¼›</li>
</ul>
<h3 data-id="heading-14">ä¸ƒã€ ç½‘ç»œå±‚åœ¨MVVMæ¨¡å¼ä¸­çš„å®šä½</h3>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥åœ¨UIé¡µé¢é‡Œå†™ç½‘ç»œè¯·æ±‚ä»£ç ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ç½‘ç»œå±‚åœ¨MVVMæ¶æ„ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[View&lt;br&gt;è§†å›¾å±‚] --&gt;|è°ƒç”¨| B[ViewModel&lt;br&gt;è§†å›¾æ¨¡å‹]
    B --&gt;|è°ƒç”¨| C[Model&lt;br&gt;æ¨¡å‹å±‚]
    C --&gt;|ä½¿ç”¨| D[Dio&lt;br&gt;ç½‘ç»œå±‚]
    D --&gt;|è¿”å›JSON| C
    C --&gt;|è½¬æ¢ä¸ºModel| B
    B --&gt;|æ›´æ–°çŠ¶æ€| A
</code></pre>
<p><strong>å„ä¸ªåˆ†å±‚èŒè´£ï¼š</strong></p>
<ul>
<li><strong>View</strong>ï¼šåªå…³å¿ƒæ•°æ®çš„å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ï¼›</li>
<li><strong>ViewModel</strong>ï¼šæŒæœ‰ä¸šåŠ¡çŠ¶æ€ï¼Œå¤„ç†UIé€»è¾‘ï¼Œä¸å…³å¿ƒæ•°æ®ä»å“ªé‡Œæ¥ï¼›</li>
<li><strong>Model</strong>ï¼šå†³å®šæ•°æ®æ˜¯ä»ç½‘ç»œè·å–è¿˜æ˜¯æœ¬åœ°æ•°æ®åº“è¯»å–ï¼Œå®ƒè°ƒç”¨ç½‘ç»œå±‚ï¼›</li>
<li><strong>Dio</strong>ï¼šçº¯ç²¹çš„ç½‘ç»œè¯·æ±‚æ‰§è¡Œè€…ï¼Œè´Ÿè´£APIè°ƒç”¨ã€é”™è¯¯åˆæ­¥å¤„ç†ç­‰ï¼›</li>
</ul>
<p><strong>è¿™æ ·åˆ†å±‚çš„å¥½å¤„æ˜¯ï¼šæœ€ç»ˆç›®çš„æ˜¯è§£è€¦</strong>ï¼Œå„å¸å…¶èŒï¼Œä¿®æ”¹ç½‘ç»œå±‚ä¸ä¼šå½±å“ä¸šåŠ¡é€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼ŒåŒäº‹æ–¹ä¾¿å•å…ƒæµ‹è¯•ã€‚</p>
<h3 data-id="heading-15">å…«ã€ é”™è¯¯å¤„ç†</h3>
<p>ä¸€ä¸ªå¥½çš„åº”ç”¨ï¼Œå¿…é¡»æ”¯æŒå¤„ç†å„ç§å¼‚å¸¸æƒ…å†µã€‚</p>
<h4 data-id="heading-16">1.  <code>DioException</code></h4>
<p><code>DioException</code> çš„ç±»å‹ (<code>type</code>) å¸®åŠ©æˆ‘ä»¬å‡†ç¡®åˆ¤æ–­é”™è¯¯æ ¹æºã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> handleDioError(DioException e) {
  <span class="hljs-keyword">switch</span> (e.type) {
    <span class="hljs-keyword">case</span> DioExceptionType.connectionTimeout:
    <span class="hljs-keyword">case</span> DioExceptionType.sendTimeout:
    <span class="hljs-keyword">case</span> DioExceptionType.receiveTimeout:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¶…æ—¶é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®šã€‚'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.badCertificate:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯ä¹¦é”™è¯¯ã€‚'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.badResponse:
      <span class="hljs-comment">// æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç </span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯: <span class="hljs-subst">${e.response?.statusCode}</span>'</span>);
      <span class="hljs-comment">// å¯ä»¥æ ¹æ®ä¸åŒçŠ¶æ€ç åšä¸åŒå¤„ç†</span>
      <span class="hljs-keyword">if</span> (e.response?.statusCode == <span class="hljs-number">404</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨(404)'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.response?.statusCode == <span class="hljs-number">500</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯(500)'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.response?.statusCode == <span class="hljs-number">401</span>) {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)'</span>);
      }
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.cancel:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆã€‚'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.connectionError:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæ˜¯å¦å¼€å¯ã€‚'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> DioExceptionType.unknown:
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'æœªçŸ¥é”™è¯¯: <span class="hljs-subst">${e.message}</span>'</span>);
      <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<h4 data-id="heading-17">2. é‡è¯•æœºåˆ¶</h4>
<p>å¯¹äºå› ç½‘ç»œæ³¢åŠ¨å¯¼è‡´çš„å¤±è´¥ï¼Œè‡ªåŠ¨é‡è¯•èƒ½å¤§å¹…æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RetryInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Interceptor</span> </span>{
  <span class="hljs-keyword">final</span> Dio _dio;

  RetryInterceptor(<span class="hljs-keyword">this</span>._dio);

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onError(DioException err, ErrorInterceptorHandler handler) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// åªå¯¹è¶…æ—¶å’Œç½‘ç»œè¿æ¥é”™è¯¯è¿›è¡Œé‡è¯•</span>
    <span class="hljs-keyword">if</span> (err.type == DioExceptionType.connectionTimeout ||
        err.type == DioExceptionType.receiveTimeout ||
        err.type == DioExceptionType.connectionError) {
      
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> retryCount = err.requestOptions.extra[<span class="hljs-string">'retry_count'</span>] ?? <span class="hljs-number">0</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> maxRetryCount = <span class="hljs-number">3</span>;

      <span class="hljs-keyword">if</span> (retryCount &lt; maxRetryCount) {
        <span class="hljs-comment">// å¢åŠ é‡è¯•è®¡æ•°</span>
        err.requestOptions.extra[<span class="hljs-string">'retry_count'</span>] = retryCount + <span class="hljs-number">1</span>;
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'ç½‘ç»œä¸ç¨³å®šï¼Œæ­£åœ¨å°è¯•ç¬¬<span class="hljs-subst">${retryCount + <span class="hljs-number">1</span>}</span>æ¬¡é‡è¯•...'</span>);

        <span class="hljs-comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•</span>
        <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">1</span> * (retryCount + <span class="hljs-number">1</span>)));

        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// é‡æ–°å‘é€è¯·æ±‚</span>
          <span class="hljs-keyword">final</span> Response response = <span class="hljs-keyword">await</span> _dio.fetch(err.requestOptions);
          <span class="hljs-comment">// è¿”å›æˆåŠŸresponse</span>
          handler.resolve(response);
          <span class="hljs-keyword">return</span>;
        } <span class="hljs-keyword">catch</span> (retryError) {
          <span class="hljs-comment">// å¦‚æœå¤±è´¥ç»§ç»­ä¼ é€’é”™è¯¯</span>
          handler.next(err);
          <span class="hljs-keyword">return</span>;
        }
      }
    }
    <span class="hljs-comment">// å¦‚æœä¸æ˜¯æŒ‡å®šé”™è¯¯æˆ–å·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œåˆ™ç»§ç»­ä¼ é€’é”™è¯¯</span>
    handler.next(err);
  }
}
</code></pre>
<h3 data-id="heading-18">ä¹ã€ å°è£…ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œè¯·æ±‚åº“</h3>
<p>åˆ°è¿™å·²ç»æŠŠæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚çŸ¥è¯†å­¦å®Œäº†ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨å­¦åˆ°çš„çŸ¥è¯†å°è£…ä¸€ä¸ªé€šç”¨çš„ç½‘ç»œè¯·æ±‚å·¥å…·ç±»ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// http_client.dart</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:dio/dio.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/foundation.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpClient</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> HttpClient _instance = HttpClient._internal();
  <span class="hljs-keyword">factory</span> HttpClient() =&gt; _instance;

  <span class="hljs-keyword">late</span> <span class="hljs-keyword">final</span> Dio _dio;

  HttpClient._internal() {
    _dio = Dio(BaseOptions(
      baseUrl: <span class="hljs-string">'https://api.yourserver.com/v1'</span>,
      connectTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
      receiveTimeout: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">10</span>),
      headers: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
    ));

    <span class="hljs-comment">// æ·»åŠ æ‹¦æˆªå™¨</span>
    _dio.interceptors.add(LogInterceptor(
      requestBody: kDebugMode, 
      responseBody: kDebugMode,
    ));
    _dio.interceptors.add(AuthInterceptor());
    _dio.interceptors.add(RetryInterceptor(_dio));
  }

  <span class="hljs-comment">// å°è£…GETè¯·æ±‚</span>
  Future&lt;Response&lt;T&gt;&gt; <span class="hljs-keyword">get</span>&lt;T&gt;(
    <span class="hljs-built_in">String</span> path, {
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParameters,
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? headers,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> options = Options(headers: headers);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _dio.<span class="hljs-keyword">get</span>&lt;T&gt;(
        path,
        queryParameters: queryParameters,
        options: options,
      );
    } <span class="hljs-keyword">on</span> DioException {
      <span class="hljs-keyword">rethrow</span>; 
    }
  }

  <span class="hljs-comment">// å°è£…POSTè¯·æ±‚</span>
  Future&lt;Response&lt;T&gt;&gt; post&lt;T&gt;(
    <span class="hljs-built_in">String</span> path, {
    <span class="hljs-built_in">dynamic</span> data,
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParameters,
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? headers,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> options = Options(headers: headers);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _dio.post&lt;T&gt;(
        path,
        data: data,
        queryParameters: queryParameters,
        options: options,
      );
    } <span class="hljs-keyword">on</span> DioException {
      <span class="hljs-keyword">rethrow</span>;
    }
  }

  <span class="hljs-comment">// è·å–åˆ—è¡¨æ•°æ®</span>
  Future&lt;<span class="hljs-built_in">List</span>&lt;T&gt;&gt; getList&lt;T&gt;(
    <span class="hljs-built_in">String</span> path, {
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParameters,
    T <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;)? fromJson,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">get</span>&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">dynamic</span>&gt;&gt;(path, queryParameters: queryParameters);
    <span class="hljs-comment">// å°†List&lt;dynamic&gt;è½¬æ¢ä¸ºList&lt;T&gt;</span>
    <span class="hljs-keyword">if</span> (fromJson != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> response.data!.map&lt;T&gt;((item) =&gt; fromJson(item <span class="hljs-keyword">as</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;)).toList();
    }
    
    <span class="hljs-keyword">return</span> response.data <span class="hljs-keyword">as</span> <span class="hljs-built_in">List</span>&lt;T&gt;;
  }

  <span class="hljs-comment">// è·å–å•ä¸ªå¯¹è±¡</span>
  Future&lt;T&gt; getItem&lt;T&gt;(
    <span class="hljs-built_in">String</span> path, {
    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? queryParameters,
    <span class="hljs-keyword">required</span> T <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;) fromJson,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">get</span>&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&gt;(path, queryParameters: queryParameters);
    <span class="hljs-keyword">return</span> fromJson(response.data!);
  }
}

<span class="hljs-comment">// </span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostRepository</span> </span>{
  <span class="hljs-keyword">final</span> HttpClient _client = HttpClient();

  Future&lt;Post&gt; getPost(<span class="hljs-built_in">int</span> id) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> _client.getItem(
      <span class="hljs-string">'/posts/<span class="hljs-subst">$id</span>'</span>,
      fromJson: Post.fromJson, 
    );
    <span class="hljs-keyword">return</span> response;
  }

  Future&lt;<span class="hljs-built_in">List</span>&lt;Post&gt;&gt; getPosts() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> _client.getList(
      <span class="hljs-string">'/posts'</span>,
      fromJson: Post.fromJson,
    );
    <span class="hljs-keyword">return</span> response;
  }

  Future&lt;Post&gt; createPost(Post post) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// Modelè½¬JSON</span>
    <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> _client.post(
      <span class="hljs-string">'/posts'</span>,
      data: post.toJson(),
    );
    <span class="hljs-keyword">return</span> Post.fromJson(response.data);
  }
}
</code></pre>
<h3 data-id="heading-19">æ€»ç»“</h3>
<p>åˆåˆ°äº†å†™æ€»ç»“è¯¶çš„æ—¶å€™äº†ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€å¼ è¡¨æ ¼æ¥å›é¡¾æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼š</p>













































<table><thead><tr><th align="left">çŸ¥è¯†ç‚¹</th><th align="left">æ ¸å¿ƒ</th><th align="left">ç”¨é€”</th></tr></thead><tbody><tr><td align="left"><strong>åº“é€‰æ‹©</strong></td><td align="left"><code>http</code> è½»é‡ï¼Œ<code>dio</code> å¼ºå¤§</td><td align="left">ä¸­å¤§å‹é¡¹ç›®é¦–é€‰ <code>dio</code></td></tr><tr><td align="left"><strong>å¼‚æ­¥ç¼–ç¨‹</strong></td><td align="left">ä½¿ç”¨ <code>async</code>/<code>await</code> å¤„ç†è€—æ—¶æ“ä½œ</td><td align="left">ä¸èƒ½é˜»å¡UIçº¿ç¨‹</td></tr><tr><td align="left"><strong>JSONåºåˆ—åŒ–</strong></td><td align="left">è‡ªåŠ¨ç”Ÿæˆ</td><td align="left"><strong>æ¨è</strong> <code>json_serializable</code></td></tr><tr><td align="left"><strong>é”™è¯¯å¤„ç†</strong></td><td align="left">åŒºåˆ†ç½‘ç»œå¼‚å¸¸å’ŒæœåŠ¡å™¨é”™è¯¯</td><td align="left">ç²¾ç¡®æ•è· <code>DioException</code> å¹¶åˆ†ç±»å¤„ç†</td></tr><tr><td align="left"><strong>æ‹¦æˆªå™¨</strong></td><td align="left">ç»Ÿä¸€å¤„ç†è¯·æ±‚/å“åº”</td><td align="left">ç”¨äºæ·»åŠ Tokenã€æ—¥å¿—ã€é‡è¯•é€»è¾‘</td></tr><tr><td align="left"><strong>æ¶æ„åˆ†å±‚</strong></td><td align="left">MVVM</td><td align="left">åˆ†ç¦»è§£è€¦</td></tr><tr><td align="left"><strong>è¯·æ±‚å°è£…</strong></td><td align="left">ç»Ÿä¸€å°è£…GET/POSTç­‰åŸºç¡€æ–¹æ³•</td><td align="left">æä¾› <code>getItem</code>, <code>getList</code> ç­‰è¯­ä¹‰åŒ–æ–¹æ³•</td></tr></tbody></table>
<p>ç½‘ç»œè¯·æ±‚åœ¨å®é™…é¡¹ç›®ä¸­ç›´è§‚é‡è¦ï¼Œæ²¡æœ‰ç½‘ç»œå°±æ²¡æœ‰æ•°æ®ï¼ŒæŒæ¡å¥½æœ¬ç« å†…å®¹ï¼Œä½ å°±èƒ½ä¸ºä½ Flutteråº”ç”¨æ³¨å…¥æºæºä¸æ–­çš„æ´»åŠ›ã€‚è®©æˆ‘ä»¬ä¸‹æœŸè§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â€œè¯¯æ“ä½œå¯¼è‡´ feat åŠŸèƒ½æœªç”Ÿæ•ˆï¼Œå°½ç®¡ merge å·²å®Œæˆâ€]]></title>    <link>https://juejin.cn/post/7571734313928015906</link>    <guid>https://juejin.cn/post/7571734313928015906</guid>    <pubDate>2025-11-13T08:29:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571734313928015906" data-draft-id="7571559178742874147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â€œè¯¯æ“ä½œå¯¼è‡´ feat åŠŸèƒ½æœªç”Ÿæ•ˆï¼Œå°½ç®¡ merge å·²å®Œæˆâ€"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2025-11-13T08:29:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±±æœ‰æœ¨å…®æœ¨æœ‰æ_"/> <meta itemprop="url" content="https://juejin.cn/user/3393532732927097"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â€œè¯¯æ“ä½œå¯¼è‡´ feat åŠŸèƒ½æœªç”Ÿæ•ˆï¼Œå°½ç®¡ merge å·²å®Œæˆâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3393532732927097/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±±æœ‰æœ¨å…®æœ¨æœ‰æ_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:29:27.000Z" title="Thu Nov 13 2025 08:29:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœºæ™¯ï¼š</p>
<blockquote>
<p><strong>å‡å¦‚åœ¨æœ¬åœ° <code>test</code> åˆ†æ”¯åˆå¹¶äº†è¿œç¨‹åˆ†æ”¯ï¼ˆæ¯”å¦‚ <code>feat</code>ï¼‰ï¼Œä½†åœ¨åˆå¹¶è¿‡ç¨‹ä¸­â€œæ”¾å¼ƒäº†æŸäº›æ–‡ä»¶çš„ä¿®æ”¹â€ï¼ˆæ¯”å¦‚æ‰‹åŠ¨ checkout æˆ– restore è¦†ç›–äº†å†²çªæ–‡ä»¶ï¼Œä½†æ²¡æ­£ç¡®æäº¤æˆ–å¤„ç†ï¼‰ï¼Œå¯¼è‡´æœ¬åœ° <code>test</code> çš„å†…å®¹å’Œè¿œç¨‹ <code>test</code> ä¸ä¸€è‡´ã€‚ç°åœ¨ä½ æƒ³å†æ¬¡åˆå¹¶ï¼ŒGit å´æç¤ºâ€œAlready up to dateâ€ï¼ˆå·²ç»æ˜¯æœ€æ–°ï¼‰ï¼Œä½†å®é™…ä¸Šä»£ç å¹¶ä¸ä¸€è‡´ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ” é—®é¢˜æœ¬è´¨</h2>
<p>Git åˆ¤æ–­æ˜¯å¦â€œéœ€è¦åˆå¹¶â€çš„ä¾æ®æ˜¯ <strong>æäº¤å†å²ï¼ˆcommit historyï¼‰</strong> ï¼Œè€Œä¸æ˜¯æ–‡ä»¶å†…å®¹ã€‚</p>
<ul>
<li>å¦‚æœä½ æœ¬åœ° <code>test</code> åˆ†æ”¯çš„ <strong>æœ€æ–°æäº¤</strong> å·²ç»åŒ…å«äº†è¿œç¨‹ <code>feat</code> åˆ†æ”¯çš„æ‰€æœ‰æäº¤ï¼ˆé€šè¿‡ä¹‹å‰çš„åˆå¹¶ï¼‰ï¼Œé‚£ä¹ˆ Git å°±è®¤ä¸ºâ€œæ— éœ€å†åˆå¹¶â€ï¼Œå³ä½¿ä½ <strong>æ‰‹åŠ¨æ”¹è¿‡æ–‡ä»¶å†…å®¹</strong>ã€‚</li>
<li>æ¢å¥è¯è¯´ï¼š<strong>ä½ æœ¬åœ°ä¸¢å¼ƒäº†æŸäº›å˜æ›´ï¼Œä½† Git çš„å†å²è®°å½•ä»ç„¶è®¤ä¸ºâ€œè¿™äº›å˜æ›´å·²ç»è¢«åˆå¹¶è¿‡äº†â€</strong> ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œ<code>git merge origin/feat</code> â†’ æç¤º â€œAlready up to dateâ€ï¼Œä½†æ–‡ä»¶å†…å®¹å´ä¸æ˜¯ <code>feat</code> åˆ†æ”¯çš„æ ·å­ã€‚</p>
<hr/>
<h2 data-id="heading-1">âœ… è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">âœ… æ–¹æ³•ä¸€ï¼š<strong>é‡æ–°åº”ç”¨ feat åˆ†æ”¯çš„å˜æ›´ï¼ˆæ¨èï¼‰</strong></h3>
<p>ç›®æ ‡ï¼šè®© <code>test</code> åˆ†æ”¯çœŸæ­£æ‹¥æœ‰ <code>feat</code> åˆ†æ”¯ä¸­é‚£äº›è¢«ä½ ä¸¢å¼ƒçš„æ–‡ä»¶å†…å®¹ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç¡®ä¿åœ¨ test åˆ†æ”¯</span>
git checkout <span class="hljs-built_in">test</span>

<span class="hljs-comment"># 2. è·å–æœ€æ–°è¿œç¨‹ä¿¡æ¯</span>
git fetch origin

<span class="hljs-comment"># 3. ç›´æ¥ä»è¿œç¨‹ feat åˆ†æ”¯æ£€å‡ºä½ éœ€è¦çš„æ–‡ä»¶ï¼ˆè¦†ç›–å½“å‰ï¼‰</span>
git checkout origin/feat -- path/to/file1 path/to/file2

<span class="hljs-comment"># æˆ–è€…å¦‚æœä½ è¦æ•´ä¸ª feat åˆ†æ”¯çš„å…¨éƒ¨æ–‡ä»¶ï¼ˆè°¨æ…ï¼ï¼‰</span>
<span class="hljs-comment"># git checkout origin/feat -- .</span>

<span class="hljs-comment"># 4. æäº¤è¿™ä¸ªâ€œä¿®æ­£â€</span>
git add .
git commit -m <span class="hljs-string">"fix: restore files from feat branch that were dropped during merge"</span>

<span class="hljs-comment"># 5. æ¨é€åˆ°è¿œç¨‹ testï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
git push origin <span class="hljs-built_in">test</span>
</code></pre>
<blockquote>
<p>è¿™æ ·åšä¸ä¼šæ”¹å˜å†å²ï¼Œåªæ˜¯æ–°å¢ä¸€ä¸ªæäº¤æ¥â€œè¡¥å›â€ä¹‹å‰ä¸¢å¤±çš„å†…å®¹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">âœ… æ–¹æ³•äºŒï¼š<strong>æ’¤é”€ä¹‹å‰çš„é”™è¯¯åˆå¹¶ï¼Œé‡æ–°åˆå¹¶</strong></h3>
<p>å¦‚æœä¹‹å‰çš„åˆå¹¶æ˜¯â€œé”™è¯¯çš„â€ï¼ˆå› ä¸ºä¸¢å¼ƒäº†é‡è¦å†…å®¹ï¼‰ï¼Œå¯ä»¥<strong>å›é€€é‚£æ¬¡åˆå¹¶æäº¤</strong>ï¼Œç„¶åé‡æ–°å¹²å‡€åœ°åˆå¹¶ã€‚</p>
<h4 data-id="heading-5">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># 1. æŸ¥çœ‹æäº¤å†å²ï¼Œæ‰¾åˆ°é”™è¯¯åˆå¹¶çš„æäº¤ IDï¼ˆå‡è®¾æ˜¯ abc1234ï¼‰</span>
git <span class="hljs-keyword">log</span> --oneline -<span class="hljs-number">10</span>

<span class="hljs-comment"># 2. å›é€€åˆ°åˆå¹¶å‰çš„çŠ¶æ€ï¼ˆä¿ç•™æ›´æ”¹åœ¨å·¥ä½œåŒºï¼Œæ–¹ä¾¿æ£€æŸ¥ï¼‰</span>
git <span class="hljs-keyword">reset</span> --hard HEAD~<span class="hljs-number">1</span>   <span class="hljs-comment"># å¦‚æœåˆå¹¶æ˜¯ä¸Šä¸€ä¸ªæäº¤</span>

<span class="hljs-comment"># æˆ–è€…æ›´å®‰å…¨çš„æ–¹å¼ï¼šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯å¤‡ä»½å½“å‰çŠ¶æ€</span>
git branch backup-test

<span class="hljs-comment"># ç„¶åç¡¬é‡ç½®</span>
git <span class="hljs-keyword">reset</span> --hard &lt;åˆå¹¶å‰çš„æäº¤ID&gt;

<span class="hljs-comment"># 3. é‡æ–°åˆå¹¶ feat</span>
git merge origin/feat

<span class="hljs-comment"># è¿™æ¬¡è®¤çœŸå¤„ç†å†²çªï¼Œä¸è¦éšæ„ä¸¢å¼ƒä¿®æ”¹ï¼</span>

<span class="hljs-comment"># 4. æ¨é€ï¼ˆå¯èƒ½éœ€è¦ forceï¼Œå¦‚æœæ˜¯å…±äº«åˆ†æ”¯è¯·è°¨æ…ï¼ï¼‰</span>
git <span class="hljs-keyword">push</span> --force-with-lease origin test
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šå¦‚æœ <code>test</code> æ˜¯å¤šäººåä½œçš„å…¬å…±åˆ†æ”¯ï¼Œ<strong>å¼ºåˆ¶æ¨é€ä¼šé‡å†™å†å²</strong>ï¼ŒåŠ¡å¿…å…ˆæ²Ÿé€šï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">âœ… æ–¹æ³•ä¸‰ï¼šç”¨ <code>cherry-pick</code> è¡¥å…³é”®æäº¤ï¼ˆé€‚ç”¨äºåªä¸¢äº†å‡ ä»½æ–‡ä»¶ï¼‰</h3>
<p>å¦‚æœ <code>feat</code> åˆ†æ”¯åªæœ‰å°‘æ•°å‡ ä¸ªæäº¤ä¿®æ”¹äº†å…³é”®æ–‡ä»¶ï¼Œä½ å¯ä»¥å•ç‹¬ pick è¿™äº›æäº¤ï¼š</p>
<pre><code class="hljs language-python" lang="python">git cherry-pick &lt;commit-<span class="hljs-built_in">id</span>-that-modified-the-file&gt;
</code></pre>
<hr/>
<h2 data-id="heading-7">ğŸ›¡ï¸ å¦‚ä½•é¿å…ä¸‹æ¬¡å†å‘ç”Ÿï¼Ÿ</h2>
<ol>
<li><strong>ä¸è¦åœ¨åˆå¹¶å†²çªæ—¶éšæ„ <code>git checkout --theirs</code> æˆ–æ‰‹åŠ¨è¦†ç›–è€Œä¸æäº¤</strong><br/>
â†’ åº”è¯¥è§£å†³å†²çªå <code>git add</code> + <code>git commit</code>ã€‚</li>
<li><strong>åˆå¹¶å‰å…ˆ <code>git status</code> å’Œ <code>git diff</code> ç¡®è®¤å†…å®¹</strong></li>
<li><strong>ä½¿ç”¨ PR/MRï¼ˆPull Request / Merge Requestï¼‰æœºåˆ¶</strong><br/>
â†’ åœ¨ Web ç•Œé¢å®¡æŸ¥å˜æ›´ï¼Œé¿å…æœ¬åœ°è¯¯æ“ä½œã€‚</li>
<li><strong>åˆå¹¶åè¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤åŠŸèƒ½æ­£å¸¸</strong></li>
</ol>
<hr/>
<h2 data-id="heading-8">ğŸ”š æ€»ç»“</h2>















<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£æ³•</th></tr></thead><tbody><tr><td>Git è¯´â€œAlready up to dateâ€ä½†æ–‡ä»¶ä¸å¯¹</td><td>åˆå¹¶å†å²å­˜åœ¨ï¼Œä½†æ–‡ä»¶å†…å®¹è¢«æ‰‹åŠ¨ä¸¢å¼ƒ</td><td>â‘  æ‰‹åŠ¨æ£€å‡ºæ–‡ä»¶å¹¶æäº¤ï¼›â‘¡ å›é€€åˆå¹¶é‡åš</td></tr></tbody></table>
<p>æœ€å®‰å…¨ã€æœ€ç®€å•çš„åšæ³•æ˜¯ï¼š<br/>
ğŸ‘‰ <strong>ç”¨ <code>git checkout origin/feat -- æ–‡ä»¶è·¯å¾„</code> æŠŠç¼ºå¤±çš„æ–‡ä»¶è¡¥å›æ¥ï¼Œç„¶åæäº¤æ¨é€ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è·¨å›½æ•°ä»“è¿ç§»æœ€ä½³å®è·µ11ã€‘åŸºäº MaxCompute Resource & Quotaç­–ç•¥ä¼˜åŒ–å®ç°èµ„æºç®¡ç†æ€§èƒ½ä¸æˆæœ¬æœ€ä¼˜å¹³è¡¡]]></title>    <link>https://juejin.cn/post/7571815997067411496</link>    <guid>https://juejin.cn/post/7571815997067411496</guid>    <pubDate>2025-11-13T08:30:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997067411496" data-draft-id="7571722835659014178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è·¨å›½æ•°ä»“è¿ç§»æœ€ä½³å®è·µ11ã€‘åŸºäº MaxCompute Resource &amp; Quotaç­–ç•¥ä¼˜åŒ–å®ç°èµ„æºç®¡ç†æ€§èƒ½ä¸æˆæœ¬æœ€ä¼˜å¹³è¡¡"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-11-13T08:30:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è·¨å›½æ•°ä»“è¿ç§»æœ€ä½³å®è·µ11ã€‘åŸºäº MaxCompute Resource &amp; Quotaç­–ç•¥ä¼˜åŒ–å®ç°èµ„æºç®¡ç†æ€§èƒ½ä¸æˆæœ¬æœ€ä¼˜å¹³è¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:30:10.000Z" title="Thu Nov 13 2025 08:30:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬ç³»åˆ—æ–‡ç« å°†å›´ç»•ä¸œå—äºšå¤´éƒ¨ç§‘æŠ€é›†å›¢çš„çœŸå®è¿ç§»å†ç¨‹å±•å¼€ï¼Œé€æ­¥æ‹†è§£ BigQuery è¿ç§»è‡³ MaxCompute è¿‡ç¨‹ä¸­çš„å…³é”®æŒ‘æˆ˜ä¸æŠ€æœ¯åˆ›æ–°ã€‚æœ¬ç¯‡ä¸ºç¬¬åä¸€ç¯‡ï¼ŒåŸºäº MaxCompute Resource &amp; Quotaç­–ç•¥ä¼˜åŒ–å®ç°èµ„æºç®¡ç†æ€§èƒ½ä¸æˆæœ¬æœ€ä¼˜å¹³è¡¡ã€‚</p>
<p>æ³¨ï¼šå®¢æˆ·èƒŒæ™¯ä¸ºä¸œå—äºšå¤´éƒ¨ç§‘æŠ€é›†å›¢ï¼Œæ–‡ä¸­ç”¨ GoTerra è¡¨ç¤ºã€‚</p>
<h2 data-id="heading-0">1. èƒŒæ™¯</h2>
<p>GoTerraä½œä¸ºä¸œå—äºšäº’è”ç½‘å¤´éƒ¨ä¼ä¸šï¼Œå…¶ä¸šåŠ¡ç”Ÿæ€è¦†ç›–ç½‘çº¦è½¦ã€ç”µå•†ã€å¤–å–ã€ç‰©æµåŠé‡‘èæ”¯ä»˜ç­‰å¤šä¸ªå‚ç›´é¢†åŸŸï¼Œå†…éƒ¨é‡‡ç”¨å¤šè´¦æˆ·æ¶æ„ï¼ˆ10+ Accountsï¼Œ70+ Projectsï¼‰åŠä¸Šç™¾ä¸ªèµ„æºé¢åº¦ç»„ï¼ˆQuota Groupï¼‰è¿›è¡Œç²¾ç»†åŒ–ç®¡ç†ã€‚åœ¨ä»BigQueryè¿ç§»è‡³é˜¿é‡Œäº‘MaxComputeçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹èµ„æºç®¡ç†çš„æ ¸å¿ƒè¯‰æ±‚åœ¨äºé€šè¿‡æ™ºèƒ½å¼¹æ€§èµ„æºåˆ†é…ç­–ç•¥ï¼ŒåŠ¨æ€é€‚é…ä¸šåŠ¡è´Ÿè½½æ³¢åŠ¨ï¼Œåœ¨æ§åˆ¶æˆæœ¬çš„åŒæ—¶é¿å…èµ„æºç“¶é¢ˆï¼Œå®ç°æ€§èƒ½ä¸æˆæœ¬çš„æœ€ä¼˜å¹³è¡¡ã€‚é¢ä¸´ä»¥ä¸‹æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<p><strong>å¤šä¸šåŠ¡çº¿èµ„æºåè°ƒå¤æ‚</strong></p>
<ul>
<li><strong>è§„æ¨¡åºå¤§</strong>ï¼šè·¨10+ç‹¬ç«‹ä¸šåŠ¡å•å…ƒï¼ˆAccountï¼‰ï¼Œæ¶‰åŠ70+é¡¹ç›®ï¼ˆProjectï¼‰ï¼Œéœ€åˆ›å»º100+èµ„æºé¢åº¦ç»„ï¼ˆQuota Groupï¼‰ï¼Œèµ„æºç®¡ç†é¢—ç²’åº¦æç»†ã€‚</li>
<li><strong>èµ„æºé¢„ç•™æˆæœ¬å‹åŠ›</strong>ï¼šæ¯ä¸ªQuota Groupéœ€æŒ‰é…ç½®é¢„ç•™èµ„æºï¼ˆCUï¼‰ï¼Œé¢„ä»˜è´¹æ¨¡å¼ä¸‹èµ„æºé—²ç½®ä¸æˆæœ¬æ§åˆ¶éš¾ä»¥å¹³è¡¡ã€‚</li>
</ul>
<p><strong>è®¡è´¹æ¨¡å¼å·®å¼‚å¸¦æ¥çš„ä¸ç¡®å®šæ€§</strong></p>
<ul>
<li><strong>MaxCompute</strong>ï¼šé¢„ä»˜è´¹CU + å®šæ—¶å¼¹æ€§èµ„æºæ¨¡å¼ï¼Œè¿ç§»å‰ç¼ºä¹å†å²æ•°æ®æ”¯æ’‘ï¼Œæ— æ³•ç²¾å‡†é¢„ä¼°æ‰€éœ€CUé‡ï¼Œå­˜åœ¨èµ„æºé¢„ç•™ä¸è¶³ï¼ˆæ€§èƒ½ç“¶é¢ˆï¼‰æˆ–è¿‡åº¦é…ç½®ï¼ˆæˆæœ¬æµªè´¹ï¼‰çš„åŒé‡é£é™©</li>
</ul>
<p><strong>å¤šç±»å‹ä½œä¸šèµ„æºéœ€æ±‚å†²çª</strong></p>
<ul>
<li><strong>ETLä½œä¸š</strong>ï¼šéœ€ä¿éšœ1å°æ—¶å†…å®Œæˆæµ·é‡æ•°æ®å¤„ç†ï¼Œä¾èµ–é«˜ååè®¡ç®—èµ„æºã€‚</li>
<li><strong>BIä½œä¸š</strong>ï¼šè¦æ±‚10-15åˆ†é’Ÿä½å»¶è¿Ÿå“åº”ï¼Œéœ€å¿«é€Ÿåˆ†é…ä¸´æ—¶èµ„æºã€‚</li>
<li><strong>å¹¶å­˜æŒ‘æˆ˜</strong>ï¼šé•¿å‘¨æœŸETLä¸çŸ­å‘¨æœŸBIä½œä¸šå…±äº«èµ„æºæ± ï¼Œå¦‚ä½•åŠ¨æ€è°ƒåº¦ä»¥é¿å…èµ„æºäº‰æŠ¢ã€åŒæ—¶æ»¡è¶³ä¸åŒSLAï¼ˆæœåŠ¡ç­‰çº§åè®®ï¼‰ï¼Œæˆä¸ºæ€§èƒ½ä¸æˆæœ¬å¹³è¡¡çš„å…³é”®éš¾é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-1">2. Resource Advisorå’ŒTopN Fair</h2>
<h3 data-id="heading-2">2.1. Resource Advisor</h3>
<h4 data-id="heading-3">2.1.1. æ ¸å¿ƒæŒ‘æˆ˜</h4>
<p><strong>èµ„æºé¢„ä¼°éš¾é¢˜:</strong></p>
<ul>
<li>è®¡è´¹æ¨¡å¼å·®å¼‚</li>
<li>ä½œä¸šç±»å‹å¤æ‚</li>
</ul>
<p><strong>å¤šä¸šåŠ¡å®ä½“ç®¡ç†ï¼Œæ¯ä¸ªä¸šåŠ¡å®ä½“éœ€ç‹¬ç«‹é˜¿é‡Œäº‘è´¦å·ï¼ŒSLAè¦æ±‚ä¸åŒï¼Œå¯¼è‡´èµ„æºè´­ä¹°é‡é¢„æœŸä¸ä¸€è‡´ï¼š</strong></p>
<ul>
<li>è¶…ä¹°ï¼šèµ„æºé—²ç½®æµªè´¹ï¼ŒæŒ¤å é›†ç¾¤å®¹é‡</li>
<li>å°‘ä¹°ï¼šä½œä¸šå †ç§¯ï¼Œç­‰èµ„æºæ—¶é—´é•¿ï¼Œå½±å“ä¸šåŠ¡æ•°æ®äº§å‡º</li>
</ul>
<p>å¦‚ä½•åœ¨æ§åˆ¶æˆæœ¬çš„å‰æä¸‹ï¼ŒåŠ¨æ€é€‚é…ä¸šåŠ¡è´Ÿè½½æ³¢åŠ¨ï¼Œé¿å…èµ„æºç“¶é¢ˆ</p>
<h4 data-id="heading-4">2.1.2. åˆ†å±‚èµ„æºé…ç½®ç­–ç•¥</h4>





























<table><thead><tr><th>èµ„æºé…ç½®</th><th>ç”¨é€”</th><th>é…ç½®åŸåˆ™</th><th>è®¡è´¹</th></tr></thead><tbody><tr><td>é¢„ä»˜è´¹CU</td><td>ä¿éšœå…¨å¤©å€™åŸºçº¿èµ„æºéœ€æ±‚ï¼Œè¦†ç›–æ—¥å¸¸ç¨³å®šè´Ÿè½½</td><td>åŸºäºå†å²æ—¥å‡è´Ÿè½½çš„80%-90%é¢„è´­CUé€‚ç”¨äºETLç±»å‘¨æœŸæ€§ä½œä¸šï¼ˆå¦‚æ¯æ—¥å®šæ—¶æ‰¹å¤„ç†ï¼‰ã€‚</td><td>æŒ‰è´­ä¹°é‡è®¡è´¹ï¼Œ24hé¢„ç•™ï¼Œè®¡è´¹æ—¶é—´24h</td></tr><tr><td>å®šæ—¶å¼¹æ€§CU(Adhoc)</td><td>é€‚ç”¨äºå¯é¢„æµ‹çš„è´Ÿè½½æ³¢åŠ¨ï¼ˆå¦‚BIæŠ¥è¡¨æ¯æ—¥ä¸Šåˆé›†ä¸­æ‰§è¡Œï¼‰</td><td>åœ¨ä¸šåŠ¡é«˜å³°æœŸï¼ˆå¦‚æ—©æ™šé«˜å³°ï¼‰è‡ªåŠ¨æ‰©å®¹èµ„æºï¼Œå³°å€¼åé‡Šæ”¾</td><td>æŒ‡å®šæ—¶é—´è®¡è´¹æŒ‰è´­ä¹°é‡è®¡è´¹ï¼ŒæŒ‡å®šæ—¶é—´é¢„ç•™</td></tr><tr><td>AutoScaleQuota</td><td>åº”å¯¹çªå‘BIä½œä¸šæµé‡</td><td>é¢„ä¼°çªå‘æµé‡å³°å€¼ï¼Œé…ç½®å¼¹æ€§ä¸Šé™</td><td>åŠ¨æ€ç›‘æ§å®æ—¶èµ„æºåˆ©ç”¨ç‡ï¼Œè§¦å‘è‡ªåŠ¨æ‰©ç¼©å®¹ã€‚è¶…å‡ºé¢„ä»˜è´¹CU+Adhoc CUéƒ¨åˆ†æŒ‰åˆ†é’Ÿçº§è®¡è´¹ï¼Œé¿å…çªå‘æµé‡å¯¼è‡´çš„èµ„æºä¸è¶³</td></tr></tbody></table>
<p>å…¶ä¸­AutoScaleQuotaæ˜¯åº”å¯¹GoTerraè¿ç§»åœºæ™¯æ–°å¢çš„äº§å“ç±»å‹ï¼Œè§£å†³è¿ç§»è¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡èµ„æºéœ€æ±‚å˜åŒ–å¿«ï¼Œä½œä¸šæ€§èƒ½è¦æ±‚é«˜çš„éœ€æ±‚ï¼š</p>
<p>åˆ†å±‚é…ç½®ç­–ç•¥ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>çµæ´»ç»„åˆ</strong>ï¼šæ”¯æŒé¢„ä»˜è´¹ã€åˆ†æ—¶å¼¹æ€§ä¸è‡ªåŠ¨å¼¹æ€§ä»»æ„æ­é…ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„é™æœ¬å¢æ•ˆéœ€æ±‚</p>
</li>
<li>
<p><strong>æè‡´æˆæœ¬</strong>ï¼šè‡ªåŠ¨å¼¹æ€§éƒ¨åˆ†ï¼ŒæŒ‰å®é™…ä½¿ç”¨é‡è®¡è´¹ï¼›ç›¸æ¯”æ‰©ç¼©æ§½ç­‰é¢„ç•™ä»˜è´¹æ¨¡å¼æ›´åŠ ç»æµå®æƒ </p>
</li>
<li>
<p><strong>å¼€ç®±å³ç”¨</strong>ï¼šåŸºäºè´Ÿè½½æ„ŸçŸ¥çš„è‡ªåŠ¨å¼¹æ€§æ‰©ç¼©å®¹ï¼Œé…ç½®ç®€å•</p>
</li>
<li>
<p><strong>ç§’çº§å¼¹æ€§</strong>ï¼šå¯¹æ¯”BigQueryé™åˆ¶æ‰©ç¼©å®¹æ­¥é•¿å’Œçª—å£æœŸï¼ŒMaxComputeæ›´åŠ çµæ´»åŠæ—¶</p>
</li>
<li>
<p><strong>èµ„æºç¨³å®š</strong>ï¼šåŸºäºå†å²æ•°æ®å’Œé¢„æµ‹æ¨¡å‹è¿›è¡Œèµ„æºè°ƒåº¦ä¼˜åŒ–ï¼Œä¿éšœå¼¹æ€§åº“å­˜ä¾›ç»™</p>
</li>
</ul>
<h4 data-id="heading-5">2.1.3. æ™ºèƒ½èµ„æºæ¨èä¸å¼¹æ€§é…ç½®</h4>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/jpeg/27030/1755447893739-4d81b9fc-e3c2-443f-88ec-b41693951a22.jpeg" alt="img" loading="lazy"/></p>
<p>èµ„æºæ¨èå·¥å…·ï¼ˆT+1åŠ¨æ€è°ƒä¼˜ï¼‰</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>åŸºäºå†å²æ•°æ®çš„ä½œä¸šè¿è¡Œæ—¥å¿—ä¸èµ„æºæ¶ˆè€—ï¼Œç»“åˆä½œä¸šç±»å‹ï¼ˆETL/BIï¼‰çš„SLAè¦æ±‚ï¼Œé¢„æµ‹æ¬¡æ—¥CUéœ€æ±‚ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯å®ç°ï¼š</strong></p>
<ul>
<li>æ•°æ®é‡‡é›†ï¼šæŠ“å–ä½œä¸šè¿è¡Œæ—¶é•¿ã€CPU/å†…å­˜æ¶ˆè€—ã€å¹¶å‘åº¦ç­‰æŒ‡æ ‡ã€‚</li>
<li>ä½œä¸šåˆ†ç±»æ¨¡å‹ï¼šè‡ªåŠ¨è¯†åˆ«ETL/BIä½œä¸šã€‚</li>
</ul>
<p><strong>èµ„æºé¢„æµ‹ç®—æ³•ï¼š</strong></p>
<ul>
<li>çº¿æ€§å›å½’ï¼šåŸºäºå†å²èµ„æºæ¶ˆè€—è¶‹åŠ¿é¢„æµ‹åŸºçº¿éœ€æ±‚ã€‚</li>
<li>å¼¹æ€§ç¼“å†²ï¼šæ ¹æ®ä¸šåŠ¡æ³¢åŠ¨ç‡å¢åŠ 10%-20%å†—ä½™é‡ã€‚</li>
<li>åé¦ˆä¼˜åŒ–ï¼šæ¯æ—¥å¯¹æ¯”å®é™…èµ„æºæ¶ˆè€—ä¸é¢„æµ‹å€¼ï¼ŒåŠ¨æ€è°ƒæ•´æ¨¡å‹å‚æ•°ã€‚</li>
</ul>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2025/png/27030/1755447804209-897f84f9-8a75-4172-a4d7-dbadc8e06fcd.png" alt="img" loading="lazy"/></p>
<h4 data-id="heading-6">2.1.4. æ¨èæ•ˆæœ</h4>
<p>GoTerraè¿å…¥MaxComputeè¿‡ç¨‹ä¸­ï¼ŒMaxComputeè¿›è¡Œäº†æ·±åº¦æ¶æ„å‡çº§å’Œæ€§èƒ½ä¼˜åŒ–ï¼ŒåŒæ—¶åœ¨åˆç†çš„èµ„æºé…ç½®è§„åˆ’ä¸‹ï¼Œæ ¹æ®ç”¨æˆ·å†å²ä½œä¸šæ•°æ®å®šæœŸæ¨èç”¨æˆ·Quotaç»„é…ç½®å’Œç­–ç•¥ï¼Œæ¯æœˆå®é™…äº§ç”Ÿè´¹ç”¨çº¦é™ä½åˆ°BigQueryçš„42%ã€‚</p>
<h3 data-id="heading-7">2.2. TopN Fair</h3>
<h4 data-id="heading-8">2.2.1. ç°æœ‰è°ƒåº¦ç­–ç•¥å±€é™æ€§</h4>

























<table><thead><tr><th/><th>FIFO</th><th>FAIR</th></tr></thead><tbody><tr><td>è°ƒåº¦ç­–ç•¥è¯´æ˜</td><td>å¯¹äºä½œä¸šä¼˜å…ˆçº§ç›¸åŒçš„åœºæ™¯ï¼Œèµ„æºå°†ä¼˜å…ˆåˆ†é…è‡³å…ˆæäº¤çš„ä½œä¸šã€‚å¯¹äºä½œä¸šä¼˜å…ˆçº§ä¸åŒçš„åœºæ™¯ï¼Œå³ä½¿ä¼˜å…ˆçº§é«˜çš„ä½œä¸šæäº¤æ—¶é—´æ™šäºä¼˜å…ˆçº§ä½çš„ä½œä¸šï¼Œèµ„æºä¹Ÿå°†ä¼˜å…ˆåˆ†é…è‡³é«˜ä¼˜å…ˆçº§ä½œä¸šã€‚</td><td>å¯¹äºä½œä¸šä¼˜å…ˆçº§ç›¸åŒçš„åœºæ™¯ï¼Œèµ„æºå°†å¹³å‡åˆ†é…è‡³åŒä¸€æ—¶é—´æäº¤çš„æ‰€æœ‰ä½œä¸šã€‚å¯¹äºä½œä¸šä¼˜å…ˆçº§ä¸åŒçš„åœºæ™¯ï¼Œèµ„æºä¼˜å…ˆå¹³å‡åˆ†é…ç»™ä¼˜å…ˆçº§è¾ƒé«˜çš„ä½œä¸šï¼Œè‹¥æœ‰å‰©ä½™ï¼Œå†å¹³å‡åˆ†é…ç»™ä¼˜å…ˆçº§è¾ƒä½çš„ä½œä¸š</td></tr><tr><td>ä¼˜ç‚¹&amp;é€‚ç”¨åœºæ™¯</td><td>ä¿éšœå…ˆæäº¤çš„ä½œä¸šä¼˜å…ˆæ‰§è¡Œï¼Œé€‚åˆETLç±»é•¿æ—¶é—´ä»»åŠ¡</td><td>èµ„æºå‡åˆ†ç»™æœ€é«˜ä¼˜å…ˆçº§çš„æ‰€æœ‰ä½œä¸šï¼Œé€‚åˆçŸ­æ—¶BIä»»åŠ¡</td></tr><tr><td>ç¼ºç‚¹</td><td>å°ä½œä¸šéœ€ç­‰å¾…é•¿ä½œä¸šå®Œæˆï¼Œå¯¼è‡´å»¶è¿Ÿï¼ˆâ€œå¤´é˜»å¡â€)</td><td>å…ˆæäº¤çš„ä½œä¸šå¯èƒ½å› èµ„æºè¢«å¹³åˆ†èµ°è€Œå»¶é•¿æ‰§è¡Œæ—¶é—´</td></tr></tbody></table>
<p>GOTOä¸šåŠ¡éœ€æ±‚</p>
<p><strong>æ··åˆè´Ÿè½½åœºæ™¯ï¼šETLï¼ˆé•¿ä½œä¸šï¼‰ä¸BIï¼ˆçŸ­ä½œä¸šï¼‰å¹¶å­˜</strong></p>
<p><strong>æ ¸å¿ƒè¯‰æ±‚ï¼š</strong></p>
<ul>
<li>é•¿ä½œä¸šä¼˜å…ˆï¼šå…ˆæäº¤çš„ETLä½œä¸šéœ€ä¿éšœè¶³å¤Ÿå¹¶å‘èµ„æº</li>
<li>çŸ­ä½œä¸šå‹å¥½ï¼šåæäº¤çš„BIä½œä¸šå¯çŸ­æ—¶å€Ÿç”¨èµ„æºï¼Œä½†ä¸æ˜¾è‘—å½±å“é•¿ä½œä¸šè¿›åº¦</li>
</ul>
<h4 data-id="heading-9">2.2.2. æ–°ç­–ç•¥ï¼šTopN Fair + åŠ¨æ€å¹¶å‘ä¿éšœ</h4>
<h6 data-id="heading-10">2.2.2.1. æ ¸å¿ƒè®¾è®¡ç›®æ ‡</h6>
<ul>
<li>èµ„æºéš”ç¦»ï¼šç¡®ä¿é•¿ä½œä¸šçš„æœ€ä½å¹¶å‘åº¦ï¼ˆJobMinimumConcurrencyï¼‰ã€‚</li>
<li>å¼¹æ€§èµ„æºå¤ç”¨ï¼šåœ¨æ»¡è¶³é•¿ä½œä¸šçš„å‰æä¸‹ï¼Œå…è®¸Quotaç»„ä¿ç•™éƒ¨åˆ†èµ„æºç»™çŸ­ä½œä¸šåŠ¨æ€å€Ÿç”¨ã€‚</li>
<li>ä¼˜å…ˆçº§åˆ†å±‚ï¼šç»“åˆä½œä¸šç±»å‹ï¼ˆETL/BIï¼‰å’Œæäº¤æ—¶é—´ï¼Œå®ç°æ··åˆè°ƒåº¦ã€‚</li>
</ul>
<h6 data-id="heading-11">2.2.2.2. å…³é”®å‚æ•°å®šä¹‰</h6>
<ul>
<li>JobMinimumConcurrencyï¼ˆæœ€ä½å¹¶å‘åº¦ï¼‰ï¼š</li>
<li>æ¯ä¸ªä½œä¸šè¿è¡Œæ‰€éœ€çš„æœ€å°å¹¶å‘åº¦ã€‚</li>
<li>å…¨å±€é…ç½®é¡¹ï¼Œä¾‹å¦‚ï¼šJobMinimumConcurrency=10 è¡¨ç¤ºæ¯ä¸ªä½œä¸šè‡³å°‘åˆ†é…10ä¸ªå¹¶å‘å•å…ƒã€‚</li>
<li>TopN Fairç­–ç•¥ï¼š</li>
<li>TopNä½œä¸šï¼šæŒ‰æäº¤æ—¶é—´æ’åºï¼Œåœ¨è‡³å°‘ä¿éšœæ¯ä¸ªä½œä¸šJobMinimumConcurrencyå¹¶å‘åº¦çš„æƒ…å†µä¸‹ï¼ŒæŒ‘é€‰å‰Nä¸ªä½œä¸šåˆ†é…Quotaç»„èµ„æº</li>
</ul>
<h6 data-id="heading-12">2.2.2.3. <strong>åŠ¨æ€Nå€¼è®¡ç®—å…¬å¼</strong></h6>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/__latex/0a5ab9849511b050a1193e319fef1a95.svg" alt="img" loading="lazy"/></p>
<p>è®¡ç®—å‡ºNï¼Œå¦‚æœ<img src="https://intranetproxy.alipay.com/skylark/lark/__latex/1b75d0123aca04d79d5f853ed77b7409.svg" alt="img" loading="lazy"/>ï¼Œåˆ™<img src="https://intranetproxy.alipay.com/skylark/lark/__latex/2e5e940745bf407dc626f3a83aaf3e1d.svg" alt="img" loading="lazy"/></p>
<p>ç¬¦å·è§£é‡Šï¼š</p>
<ul>
<li><img src="https://intranetproxy.alipay.com/skylark/lark/__latex/246dc4d855e50ae1dc924cc0a7d9c7d8.svg" alt="img" loading="lazy"/>ï¼šç¬¬iä¸ªä½œä¸šçš„èµ„æºéœ€æ±‚ï¼ˆå¦‚CPUæ ¸æ•°ã€å†…å­˜ï¼‰ã€‚</li>
<li>Runtimeï¼šQuotaç»„å½“å‰å¯ç”¨çš„èµ„æºé‡</li>
<li><img src="https://intranetproxy.alipay.com/skylark/lark/__latex/32ffe6a546bdc55dc0a2d71bb0929934.svg" alt="img" loading="lazy"/>ï¼šå½“å‰æœ€å°‘å¯å‚ä¸èµ„æºåˆ†é…çš„ä½œä¸šæ•°</li>
</ul>
<p>å…¬å¼å«ä¹‰ï¼š
åŠ¨æ€è®¡ç®—Nå€¼ï¼Œç¡®ä¿å‰Nä¸ªä½œä¸šçš„ç´¯è®¡èµ„æºéœ€æ±‚ä¸è¶…è¿‡Quotaç»„æ€»å®¹é‡çš„JobMinimumConcurrencyå€ï¼Œä¸”è‡³å°‘ä¿éšœ<img src="https://intranetproxy.alipay.com/skylark/lark/__latex/32ffe6a546bdc55dc0a2d71bb0929934.svg" alt="img" loading="lazy"/>ä¸ªä½œä¸šå‚ä¸èµ„æºåˆ†é…ï¼Œé¿å…å°‘é‡ä½œä¸šå æ»¡æ•´ä¸ªç»„ï¼›</p>
<h4 data-id="heading-13">2.2.3. ç­–ç•¥ä¼˜åŠ¿</h4>





























<table><thead><tr><th>ç»´åº¦</th><th>FIFO</th><th>FAIR</th><th>TopN Fair + çŸ­ä½œä¸šæ’é˜Ÿ</th></tr></thead><tbody><tr><td>é•¿ä½œä¸šä¿éšœ</td><td>å¼º</td><td>å¼±</td><td>å¼º</td></tr><tr><td>çŸ­ä½œä¸šæ”¯æŒ</td><td>å·®</td><td>å¼º</td><td>å¼º</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ETL</td><td>BI</td><td>ETL+BIæ··åˆåœºæ™¯</td></tr></tbody></table>
<h4 data-id="heading-14">2.2.4. å®é™…æ•ˆæœ</h4>
<p>æ•´é›†ç¾¤ä½œä¸šå¹³å‡è¿è¡Œæ•°ä¸‹é™15.7%ï¼Œä½œä¸šè¿è¡Œæ—¶Latency 95åˆ†ä½å€¼ä¸‹é™45.7%ï¼ŒGoTerraç”¨æˆ·çš„æ•ˆæœè¾ƒå¥½çš„Quotaç»„ï¼Œä½œä¸šå¹³å‡è¿è¡Œæ•°ä¸‹é™31.3%, ä½œä¸šè¿è¡Œæ—¶Latency 95åˆ†ä½å€¼ä¸‹é™75.4%ã€‚</p>
<h2 data-id="heading-15">3. ç»“è¯­ä¸å±•æœ›</h2>
<p>GoTerraè¿ç§»åˆ°MaxComputeåï¼ŒResource AdvisoræŒç»­é€šè¿‡æ™ºèƒ½èµ„æºæ¨èä¼˜åŒ–æˆæœ¬ï¼Œç›®æ ‡å°†æ€»ä½“è´¹ç”¨æ§åˆ¶åœ¨BigQueryçš„40%ä»¥å†…ã€‚éšç€æ–°äº§å“AutoScaleQuotaä¸Šçº¿ï¼Œèµ„æºç®¡ç†å®ç°å…¨è‡ªåŠ¨åŒ–ï¼šåŸºäºä¸šåŠ¡è´Ÿè½½åŠ¨æ€è°ƒæ•´é…é¢ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œå½»åº•è§£å†³çªå‘æµé‡å¯¼è‡´çš„èµ„æºä¸è¶³ä¸ä½œä¸šç­‰å¾…é—®é¢˜ã€‚åŒæ—¶ï¼ŒTopN Fairå·²åœ¨å°å°¼é›†ç¾¤å…¨é¢ä¸Šçº¿ï¼Œåç»­çš„å‘å±•æ–¹å‘ï¼šåˆ†æå„Quotaç»„ä½œä¸šæ‰§è¡Œæ¨¡å¼ï¼Œè‡ªåŠ¨é…ç½®JobMinimumConcurrencyå¹¶åŠ¨æ€åˆ‡æ¢è°ƒåº¦ç­–ç•¥ï¼Œè¿›ä¸€æ­¥æå‡èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>åœ¨æ€§èƒ½ä¸æˆæœ¬ä¼˜åŒ–çš„åŸºç¡€ä¸Šï¼Œç¨³å®šæ€§ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®æ ‡ï¼Œç³»ç»Ÿç¨³å®šæ€§ç›®æ ‡è¾¾99.99%å¯ç”¨æ€§ï¼Œä¿éšœGoTerraåœ¨MaxComputeä¸Šå®ç°â€œä½æˆæœ¬ã€é«˜æ•ˆç‡ã€å¼ºç¨³å®šâ€çš„è¿è¡Œä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç‰©æµä¿¡æ¯æ€»æ»åï¼Ÿå¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ APIï¼Œæ¯«ç§’çº§å“åº”è®©ç‰©æµé€æ˜ä¸ç­‰å¾…]]></title>    <link>https://juejin.cn/post/7572022112102580250</link>    <guid>https://juejin.cn/post/7572022112102580250</guid>    <pubDate>2025-11-13T08:32:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572022112102580250" data-draft-id="7572002432450166793" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç‰©æµä¿¡æ¯æ€»æ»åï¼Ÿå¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ APIï¼Œæ¯«ç§’çº§å“åº”è®©ç‰©æµé€æ˜ä¸ç­‰å¾…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T08:32:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«é€’é¸Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/4279725171674573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç‰©æµä¿¡æ¯æ€»æ»åï¼Ÿå¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ APIï¼Œæ¯«ç§’çº§å“åº”è®©ç‰©æµé€æ˜ä¸ç­‰å¾…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4279725171674573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«é€’é¸Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T08:32:48.000Z" title="Thu Nov 13 2025 08:32:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç‰©æµä¿¡æ¯æ»åï¼Œæ—©å·²æ˜¯å›°æ‰°å•†å®¶ä¸ç”¨æˆ·çš„æ ¸å¿ƒç—›ç‚¹ â€”â€” ç”¨æˆ·ä¸‹å•ååå¤åˆ·æ–°æŸ¥ä¸åˆ°è½¨è¿¹ï¼Œå•†å®¶å®¢æœè¢« â€œåŒ…è£¹åˆ°å“ªäº†â€ çš„å’¨è¯¢æ·¹æ²¡ï¼Œå¼‚å¸¸åŒ…è£¹é”™è¿‡æœ€ä½³å¤„ç†æ—¶æœºï¼Œè¿™äº›åœºæ™¯åœ¨æ—¥å¸¸ç‰©æµä¸­å±¡è§ä¸é²œã€‚å¯¹å•†å®¶è€Œè¨€ï¼Œç‰©æµä¿¡æ¯æ»åä¸ä»…å¢åŠ å®¢æœå‹åŠ›ï¼Œè¿˜ä¼šå¯¼è‡´ç”¨æˆ·ä¿¡ä»»æµå¤±ã€å¤è´­ç‡ä¸‹é™ï¼›å¯¹ç”¨æˆ·æ¥è¯´ï¼Œæ¨¡ç³Šçš„ç‰©æµçŠ¶æ€æ„å‘³ç€ç„¦è™‘ä¸ä¸ç¡®å®šæ€§ï¼Œç”šè‡³å¯èƒ½å¼•å‘è®¢å•å–æ¶ˆã€‚å¿«é€’é¸Ÿé’ˆå¯¹æ€§æ¨å‡ºåœ¨é€”ç›‘æ§ APIï¼Œä»¥ â€œæ¯«ç§’çº§å“åº”ã€å…¨é“¾è·¯è¦†ç›–ã€æ™ºèƒ½é¢„è­¦â€ ä¸ºæ ¸å¿ƒï¼Œå½»åº•ç ´è§£ç‰©æµä¿¡æ¯æ»åéš¾é¢˜ï¼Œè®©ç‰©æµçŠ¶æ€å®æ—¶å¯è§ã€å¼‚å¸¸åŠæ—¶å¯æ§ï¼Œé‡å¡‘ç‰©æµä¿¡æ¯é€æ˜åŒ–ä½“éªŒã€‚</p>
<p><strong>ä¸€ã€ç‰©æµä¿¡æ¯æ»åçš„æ ¸å¿ƒç—›ç‚¹ï¼šå•†å®¶ä¸ç”¨æˆ·çš„åŒé‡å›°æ‰°</strong></p>
<p>ç‰©æµä¿¡æ¯æ»åå¹¶éç®€å•çš„ â€œæ›´æ–°æ…¢â€ï¼Œè€Œæ˜¯è´¯ç©¿è¿è¾“å…¨æµç¨‹çš„è¿é”é—®é¢˜ï¼Œå¯¹å•†å®¶å’Œç”¨æˆ·é€ æˆå¤šç»´åº¦å½±å“ï¼š</p>
<p><strong>1. ç”¨æˆ·ä½“éªŒæ»‘å¡ï¼Œä¿¡ä»»æŒç»­æµå¤±</strong></p>
<p>ç”¨æˆ·ä¸‹å•åæœ€å…³å¿ƒ â€œåŒ…è£¹æ˜¯å¦å‘å‡ºã€ä½•æ—¶èƒ½åˆ°â€ï¼Œä½†ä¼ ç»Ÿç‰©æµä¿¡æ¯å¸¸å‡ºç° â€œæ½æ”¶ååŠå¤©æ— æ›´æ–°â€â€œä¸­è½¬èŠ‚ç‚¹æ–­å±‚â€â€œæ´¾ä»¶å‰çªç„¶å¤±è”â€ ç­‰æƒ…å†µã€‚è¿™ç§ä¸ç¡®å®šæ€§è®©ç”¨æˆ·é¢‘ç¹å’¨è¯¢å®¢æœï¼Œç”šè‡³å› ç„¦è™‘å–æ¶ˆè®¢å•ï¼›éƒ¨åˆ†ç”¨æˆ·å› ç‰©æµä¿¡æ¯æ¨¡ç³Šï¼Œæ€€ç–‘åŒ…è£¹ä¸¢å¤±æˆ–é”™å‘ï¼Œç›´æ¥ç»™å‡ºå·®è¯„ï¼ŒæŸå®³å•†å®¶å£ç¢‘ã€‚æ•°æ®æ˜¾ç¤ºï¼Œè¶… 60% çš„ç‰©æµç›¸å…³æŠ•è¯‰ï¼Œæ ¹æºéƒ½åœ¨äºä¿¡æ¯æ›´æ–°ä¸åŠæ—¶ã€‚</p>
<p><strong>2. å•†å®¶å®¢æœæ‰¿å‹ï¼Œè¿è¥æ•ˆç‡ä½ä¸‹</strong></p>
<p>ç‰©æµä¿¡æ¯æ»åç›´æ¥å¯¼è‡´å•†å®¶å®¢æœå’¨è¯¢é‡æ¿€å¢ï¼Œâ€œæŸ¥ä»¶â€ æˆä¸ºå®¢æœæ—¥å¸¸å·¥ä½œçš„æ ¸å¿ƒå†…å®¹ã€‚å®¢æœéœ€åˆ‡æ¢å¤šä¸ªç‰©æµå•†ç³»ç»Ÿé€ä¸€æŸ¥è¯¢ï¼Œå†æ‰‹åŠ¨åé¦ˆç»™ç”¨æˆ·ï¼Œä¸ä»…å ç”¨å¤§é‡äººåŠ›ï¼Œè¿˜æ˜“å‡ºç°å›å¤ä¸åŠæ—¶ã€ä¿¡æ¯ä¸å‡†ç¡®çš„é—®é¢˜ï¼›å¤§ä¿ƒæœŸé—´ï¼Œæ»åçš„ç‰©æµä¿¡æ¯è®©å®¢æœå›¢é˜Ÿä¸å ªé‡è´Ÿï¼Œç”šè‡³å½±å“å…¶ä»–å”®åé—®é¢˜çš„å¤„ç†æ•ˆç‡ã€‚</p>
<p><strong>3. å¼‚å¸¸å¤„ç†è¢«åŠ¨ï¼ŒæŸå¤±ä¸æ–­æ‰©å¤§</strong></p>
<p>åŒ…è£¹å‡ºç°ä¸­è½¬æ»ç•™ã€ç ´æŸã€åœ°å€é”™è¯¯ç­‰å¼‚å¸¸æ—¶ï¼Œä¼ ç»Ÿæ¨¡å¼ä¸‹éœ€ç­‰ç”¨æˆ·åé¦ˆæˆ–ç‰©æµå•†é€šçŸ¥ï¼Œå•†å®¶æ‰èƒ½çŸ¥æ™“ã€‚æ­¤æ—¶å¾€å¾€å·²é”™è¿‡æœ€ä½³å¤„ç†æ—¶æœº â€”â€” æ»ç•™åŒ…è£¹å¯èƒ½ç»§ç»­å»¶è¯¯ï¼Œç ´æŸåŒ…è£¹éš¾ä»¥ç•Œå®šè´£ä»»ï¼Œæœ€ç»ˆå¯¼è‡´ç”¨æˆ·æŠ•è¯‰å‡çº§ã€ç†èµ”æˆæœ¬å¢åŠ ï¼Œç”šè‡³å¼•å‘å“ç‰Œä¿¡ä»»å±æœºã€‚</p>
<p><strong>4. è¿è¥å†³ç­–ç›²ç›®ï¼Œä¼˜åŒ–æ— ä»ä¸‹æ‰‹</strong></p>
<p>ç¼ºä¹å®æ—¶ã€ç²¾å‡†çš„ç‰©æµæ•°æ®æ”¯æ’‘ï¼Œå•†å®¶æ— æ³•å‡†ç¡®åˆ¤æ–­ç‰©æµå•†çš„å®é™…æ—¶æ•ˆã€å¼‚å¸¸ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚é€‰æ‹©ç‰©æµåˆä½œæ–¹ã€ä¼˜åŒ–å‘è´§æµç¨‹ã€åˆ¶å®šä¿ƒé”€å±¥çº¦é¢„æ¡ˆæ—¶ï¼Œåªèƒ½ä¾èµ–ç»éªŒè€Œéæ•°æ®ï¼Œå¯¼è‡´ç‰©æµæˆæœ¬å±…é«˜ä¸ä¸‹ï¼Œå±¥çº¦ä½“éªŒéš¾ä»¥æå‡ã€‚</p>
<p><strong>äºŒã€å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ APIï¼šæ¯«ç§’çº§å“åº”ç ´è§£æ»åéš¾é¢˜</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API ä»¥æŠ€æœ¯çªç ´ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡ â€œå®æ—¶æ•°æ®åŒæ­¥ã€å…¨é“¾è·¯è¦†ç›–ã€æ™ºèƒ½é¢„è­¦ã€æ•°æ®ååŒâ€ å››å¤§ä¼˜åŠ¿ï¼Œä»æ ¹æºä¸Šè§£å†³ç‰©æµä¿¡æ¯æ»åé—®é¢˜ï¼Œè®©ç‰©æµçŠ¶æ€ â€œç§’çº§æ›´æ–°ã€å…¨ç¨‹å¯è§†â€ã€‚</p>
<p><strong>1. æ¯«ç§’çº§æ•°æ®åŒæ­¥ï¼Œä¿¡æ¯æ›´æ–°æ— å»¶è¿Ÿ</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œåœ¨äºå…¶æè‡´çš„å“åº”é€Ÿåº¦ â€”â€” ä¾æ‰˜åˆ†å¸ƒå¼æ¶æ„ä¸æ™ºèƒ½æ•°æ®æŠ“å–æŠ€æœ¯ï¼Œå®ç°ç‰©æµæ•°æ® â€œæ¯«ç§’çº§åŒæ­¥ã€ç§’çº§æ›´æ–°â€ï¼š</p>
<ul>
<li>å¯¹æ¥ 2700 + å›½å†…å¤–ç‰©æµå•†çš„å®æ—¶æ•°æ®æ¥å£ï¼ŒåŒ…è£¹çš„æ½æ”¶ã€ä¸­è½¬ã€æ´¾é€ã€ç­¾æ”¶ç­‰æ¯ä¸€ä¸ªèŠ‚ç‚¹å˜åŠ¨ï¼Œéƒ½ä¼šåœ¨æ¯«ç§’å†…è¢«æŠ“å–å¹¶åŒæ­¥è‡³ APIï¼›</li>
<li>æ•°æ®ä¼ è¾“é‡‡ç”¨ HTTPS åŠ å¯†ä¸é«˜é€Ÿé€šé“ï¼Œç¡®ä¿ä¿¡æ¯ä»ç‰©æµå•†ç³»ç»Ÿåˆ°å•†å®¶ / ç”¨æˆ·ç»ˆç«¯çš„ä¼ è¾“å»¶è¿Ÿæ§åˆ¶åœ¨ 100-300 æ¯«ç§’å†…ï¼Œè¿œè¶…ä¼ ç»Ÿç‰©æµæŸ¥è¯¢å·¥å…·çš„åˆ†é’Ÿçº§ç”šè‡³å°æ—¶çº§æ›´æ–°é€Ÿåº¦ï¼›</li>
<li>æ”¯æŒé«˜å¹¶å‘æŸ¥è¯¢ï¼Œå³ä¾¿å¤§ä¿ƒæœŸé—´å•æ—¥ç™¾ä¸‡çº§è®¢å•æŸ¥è¯¢ï¼Œä»èƒ½ä¿æŒæ¯«ç§’çº§å“åº”ï¼Œé¿å…æŸ¥è¯¢æ‹¥å µå¯¼è‡´çš„ä¿¡æ¯å»¶è¿Ÿã€‚</li>
</ul>
<p>å¯¹ç”¨æˆ·è€Œè¨€ï¼Œä¸‹å•åå¯å®æ—¶æŸ¥çœ‹åŒ…è£¹åŠ¨æ€ï¼Œæ¯ä¸€æ¬¡èŠ‚ç‚¹å˜åŠ¨éƒ½èƒ½å³æ—¶çŸ¥æ™“ï¼›å¯¹å•†å®¶æ¥è¯´ï¼Œå®¢æœæŸ¥è¯¢ç‰©æµä¿¡æ¯æ—¶ â€œå³æŸ¥å³å¾—â€ï¼Œæ— éœ€ç­‰å¾…åŠ è½½ï¼Œå“åº”æ•ˆç‡æå‡ 80%ã€‚</p>
<p><strong>2. å…¨é“¾è·¯è½¨è¿¹è¦†ç›–ï¼Œæ— ä¿¡æ¯ç›²åŒº</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API æ‰“ç ´ä¼ ç»Ÿç‰©æµä¿¡æ¯ â€œæ–­æ¡£â€ é—®é¢˜ï¼Œå®ç°ä» â€œä¸‹å• - æ½æ”¶ - ä¸­è½¬ - æœ«ç«¯æ´¾é€ - ç­¾æ”¶â€ çš„å…¨é“¾è·¯è½¨è¿¹è¦†ç›–ï¼Œå°¤å…¶é€‚é…å¤æ‚ç‰©æµåœºæ™¯ï¼š</p>
<ul>
<li>å›½å†…ç‰©æµï¼šè¦†ç›–å¿«é€’ã€å¿«è¿ã€åŒåŸå³æ—¶é…é€ç­‰åœºæ™¯ï¼Œè¯¦ç»†å±•ç¤ºæ¯ä¸ªä¸­è½¬ä¸­å¿ƒã€ç½‘ç‚¹çš„å¤„ç†æ—¶é—´ï¼Œç”šè‡³æ ‡æ³¨ â€œå¿«é€’å‘˜æ­£åœ¨æ´¾é€â€â€œå³å°†é€è¾¾â€ ç­‰ç²¾ç»†åŒ–çŠ¶æ€ï¼›</li>
<li>è·¨å¢ƒç‰©æµï¼šåŒæ­¥å›½é™…è¿è¾“èŠ‚ç‚¹ä¸æ¸…å…³è¿›åº¦ï¼Œæ¸…æ™°å±•ç¤º â€œå›½å†…æ½æ”¶ - å›½é™…èˆªç­èµ·é£ - ç›®çš„å›½æ¸…å…³ - æœ«ç«¯æ´¾é€â€ å…¨æµç¨‹ï¼Œè®©è·¨å¢ƒç‰©æµä¸å† â€œé»‘ç®±æ“ä½œâ€ï¼›</li>
<li>ç‰¹æ®Šåœºæ™¯ï¼šç”Ÿé²œå†·é“¾è®¢å•åŒæ­¥æ¸©æ¹¿åº¦æ•°æ®ï¼Œå¤§ä»¶ç‰©æµæ ‡æ³¨ â€œä¸Šé—¨æ¬è¿â€â€œå®‰è£…é¢„çº¦â€ çŠ¶æ€ï¼Œå¼‚å¸¸è®¢å•å®æ—¶æ ‡è®° â€œæ»ç•™â€â€œç ´æŸâ€ ç­‰æç¤ºï¼Œç¡®ä¿ä¿¡æ¯æ— æ­»è§’ã€‚</li>
</ul>
<p><strong>3. æ™ºèƒ½å¼‚å¸¸é¢„è­¦ï¼Œå˜è¢«åŠ¨ä¸ºä¸»åŠ¨</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API ä¸æ­¢äº â€œå®æ—¶å±•ç¤ºâ€ï¼Œæ›´èƒ½ä¸»åŠ¨è¯†åˆ«å¼‚å¸¸ã€æå‰é¢„è­¦ï¼Œå¸®åŠ©å•†å®¶æŠ¢å å¤„ç†å…ˆæœºï¼š</p>
<ul>
<li>é¢„è®¾ 40 + å¼‚å¸¸åœºæ™¯è§„åˆ™ï¼ŒåŒ…æ‹¬æ½æ”¶è¶…æ—¶ã€ä¸­è½¬æ»ç•™è¶… 4 å°æ—¶ã€æ´¾ä»¶å¤±è´¥ã€åœ°å€é”™è¯¯ã€æ¸©æ¹¿åº¦å¼‚å¸¸ç­‰ï¼Œç³»ç»Ÿè‡ªåŠ¨ç›‘æ§åŒ…è£¹çŠ¶æ€ï¼Œä¸€æ—¦è§¦å‘å¼‚å¸¸è§„åˆ™ï¼Œç«‹å³é€šè¿‡ API æ¨é€é¢„è­¦ä¿¡æ¯ï¼›</li>
<li>é¢„è­¦æ–¹å¼çµæ´»å¤šæ ·ï¼Œæ”¯æŒçŸ­ä¿¡ã€ç«™å†…ä¿¡ã€Webhook ç­‰å¤šç§æ¸ é“ï¼Œå•†å®¶å¯å®æ—¶æ¥æ”¶å¼‚å¸¸é€šçŸ¥ï¼Œç¬¬ä¸€æ—¶é—´åè°ƒç‰©æµå•†å¤„ç†ï¼Œé¿å…é—®é¢˜æ‰©å¤§ï¼›</li>
<li>å¼‚å¸¸åŸå› æ™ºèƒ½åˆ†æï¼ŒAPI ä¼šç»“åˆå†å²æ•°æ®ä¸ç‰©æµå•†è§„åˆ™ï¼Œåˆæ­¥åˆ¤æ–­å¼‚å¸¸åŸå› ï¼ˆå¦‚ â€œä¸­è½¬ä¸­å¿ƒçˆ†ä»“â€â€œåœ°å€ä¸å®Œæ•´â€ï¼‰ï¼Œä¸ºå•†å®¶æä¾›å¤„ç†æ–¹å‘å‚è€ƒã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼ŒæŸç”µå•†å•†å®¶é€šè¿‡ API å‘ç°åŒ…è£¹ â€œä¸­è½¬æ»ç•™è¶… 4 å°æ—¶â€ï¼Œç«‹å³è”ç³»ç‰©æµå•†åŠ æ€¥å¤„ç†ï¼Œæœ€ç»ˆé¿å…äº†åŒ…è£¹å»¶è¯¯ï¼Œç”¨æˆ·æ»¡æ„åº¦æœªå—å½±å“ â€”â€” è¿™ç§ä¸»åŠ¨å¹²é¢„ï¼Œè¿œæ¯”ç”¨æˆ·æŠ•è¯‰åå†å¤„ç†æ›´é«˜æ•ˆã€‚</p>
<p><strong>4. æ•°æ®æ·±åº¦ååŒï¼Œæ‰“é€šå…¨ä¸šåŠ¡é—­ç¯</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API å¹¶éå­¤ç«‹çš„æŸ¥è¯¢å·¥å…·ï¼Œè€Œæ˜¯èƒ½ä¸å•†å®¶ä¸šåŠ¡ç³»ç»Ÿæ·±åº¦ååŒï¼Œè®©ç‰©æµæ•°æ®æˆä¸ºè¿è¥å†³ç­–çš„æ”¯æ’‘ï¼š</p>
<ul>
<li>
<p>ä¸è®¢å•ç³»ç»Ÿè”åŠ¨ï¼šç‰©æµçŠ¶æ€è‡ªåŠ¨åŒæ­¥è‡³å•†å®¶è®¢å•ç³»ç»Ÿï¼Œè§¦å‘å¯¹åº”è®¢å•çŠ¶æ€å˜æ›´ï¼ˆå¦‚ â€œå·²æ½æ”¶â€â€œå·²ç­¾æ”¶â€ï¼‰ï¼Œæ— éœ€äººå·¥æ‰‹åŠ¨æ›´æ–°ï¼›</p>
</li>
<li>
<p>ä¸å®¢æœç³»ç»Ÿé›†æˆï¼šå®¢æœæ¥å¾…ç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”è®¢å•çš„ç‰©æµè½¨è¿¹ï¼Œæ— éœ€æ‰‹åŠ¨æŸ¥è¯¢ï¼Œå“åº”é€Ÿåº¦æå‡ 50%ï¼›</p>
</li>
<li>
<p>ä¸æ•°æ®åˆ†æç³»ç»Ÿå¯¹æ¥ï¼šè‡ªåŠ¨æ±‡æ€»ç‰©æµæ—¶æ•ˆã€å¼‚å¸¸ç‡ã€å„ç‰©æµå•†è¡¨ç°ç­‰å¤šç»´åº¦æ•°æ®ï¼Œç”Ÿæˆå¯è§†åŒ–æŠ¥è¡¨ï¼Œå¸®åŠ©å•†å®¶ä¼˜åŒ–ç‰©æµåˆä½œæ–¹æ¡ˆã€è°ƒæ•´å‘è´§ç­–ç•¥ã€‚</p>
</li>
</ul>
<p><strong>ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯ï¼šå¿«é€’é¸Ÿ API é€‚é…å¤šå…ƒç‰©æµéœ€æ±‚</strong></p>
<p>å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API çš„çµæ´»æ€§ï¼Œä½¿å…¶èƒ½ç²¾å‡†é€‚é…ä¸åŒè¡Œä¸šã€ä¸åŒè§„æ¨¡çš„ç‰©æµåœºæ™¯ï¼Œè½åœ°æ•ˆæœæ˜¾è‘—ï¼š</p>
<p><strong>1. ç”µå•†æ—¥å¸¸å‘è´§åœºæ™¯</strong></p>
<p>æŸæœé¥°ç”µå•†æ—¥å‡å‘è´§ 2000 å•ï¼Œæ¥å…¥ API åï¼Œç”¨æˆ·åœ¨è®¢å•é¡µå³å¯æŸ¥çœ‹å®æ—¶ç‰©æµè½¨è¿¹ï¼ŒæŸ¥ä»¶å’¨è¯¢é‡ä¸‹é™ 60%ï¼›å®¢æœæ— éœ€åˆ‡æ¢å¤šä¸ªç‰©æµç³»ç»Ÿï¼Œç›´æ¥åœ¨åå°è·å–è½¨è¿¹ä¿¡æ¯ï¼Œå·¥ä½œæ•ˆç‡æå‡ 40%ï¼›å¼‚å¸¸åŒ…è£¹æå‰é¢„è­¦ï¼Œå”®åçº çº·ç‡ä¸‹é™ 70%ï¼Œåº—é“º DSR è¯„åˆ†æå‡ 0.4 åˆ†ã€‚</p>
<p><strong>2. è·¨å¢ƒç”µå•†ç‰©æµåœºæ™¯</strong></p>
<p>æŸè·¨å¢ƒç¾å¦†å•†å®¶é€šè¿‡ API å¯¹æ¥å›½é™…ç‰©æµå•†ï¼Œç”¨æˆ·å¯å®æ—¶æŸ¥çœ‹æ¸…å…³è¿›åº¦ä¸å›½é™…è¿è¾“è½¨è¿¹ï¼Œâ€œæ¸…å…³å¤šä¹…â€â€œåŒ…è£¹åˆ°å“ªå›½äº†â€ çš„å’¨è¯¢é‡å‡å°‘ 55%ï¼›å•†å®¶é€šè¿‡ API ç›‘æ§æ¸…å…³å¼‚å¸¸ï¼Œæå‰è¡¥å……ç”³æŠ¥èµ„æ–™ï¼Œæ¸…å…³å»¶è¯¯ç‡ä» 25% é™è‡³ 5%ï¼Œç”¨æˆ·å¤è´­ç‡å¢é•¿ 20%ã€‚</p>
<p><strong>3. å¤§ä¿ƒå³°å€¼å±¥çº¦åœºæ™¯</strong></p>
<p>åŒ 11 æœŸé—´ï¼ŒæŸå®¶å±…å•†å®¶è®¢å•é‡æ¿€å¢è‡³ 10000 å• / æ—¥ï¼Œä¾æ‰˜ API çš„é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œç‰©æµä¿¡æ¯æ›´æ–°æ— å»¶è¿Ÿï¼›å•†å®¶é€šè¿‡ API æ‰¹é‡ç›‘æ§åŒ…è£¹çŠ¶æ€ï¼Œå¿«é€Ÿç­›é€‰å¼‚å¸¸è®¢å•å¹¶å¤„ç†ï¼Œå¤§ä¿ƒæœŸé—´ç‰©æµæŠ•è¯‰ç‡ä» 30% é™è‡³ 8%ï¼Œå±¥çº¦æ•ˆç‡å¤§å¹…æå‡ã€‚</p>
<p><strong>4. ç”Ÿé²œå†·é“¾åœºæ™¯</strong></p>
<p>æŸç”Ÿé²œå¹³å°æ¥å…¥ API åï¼Œå®æ—¶åŒæ­¥å†·é“¾åŒ…è£¹çš„æ¸©æ¹¿åº¦æ•°æ®ï¼Œä¸€æ—¦è¶…å‡ºé¢„è®¾èŒƒå›´ç«‹å³é¢„è­¦ï¼Œå•†å®¶åŠæ—¶åè°ƒç‰©æµå•†è°ƒæ•´æ¸©æ§ï¼Œç”Ÿé²œç ´æŸç‡ä» 12% é™è‡³ 3%ï¼›ç”¨æˆ·åœ¨è®¢å•é¡µæŸ¥çœ‹æ¸©æ¹¿åº¦è®°å½•ï¼Œå¯¹äº§å“æ–°é²œåº¦æ›´æ”¾å¿ƒï¼Œå¤è´­ç‡æå‡ 25%ã€‚</p>
<p><strong>å››ã€è½åœ°æ ¸å¿ƒä»·å€¼ï¼šå•†å®¶ä¸ç”¨æˆ·çš„åŒå‘å…±èµ¢</strong></p>
<p><strong>1. å•†å®¶ç«¯ï¼šé™æœ¬ææ•ˆï¼Œæ„å»ºæ ¸å¿ƒç«äº‰åŠ›</strong></p>
<ul>
<li>å®¢æœæˆæœ¬é™ä½ï¼šæŸ¥ä»¶å’¨è¯¢é‡ä¸‹é™ 60%ï¼Œå®¢æœå›¢é˜Ÿè§„æ¨¡å¯ç¼©å‡ 30%-50%ï¼ŒäººåŠ›æˆæœ¬æ˜¾è‘—é™ä½ï¼›</li>
<li>å”®åçº çº·å‡å°‘ï¼šå¼‚å¸¸æå‰é¢„è­¦ä¸å¿«é€Ÿå¤„ç†ï¼Œç‰©æµç›¸å…³æŠ•è¯‰ç‡ä¸‹é™ 70%ï¼Œå“ç‰Œå£ç¢‘æŒç»­ä¼˜åŒ–ï¼›</li>
<li>è¿è¥å†³ç­–ç§‘å­¦ï¼šç‰©æµæ•°æ®å®æ—¶æ±‡æ€»åˆ†æï¼Œä¸ºç‰©æµå•†é€‰æ‹©ã€å‘è´§ä¼˜åŒ–æä¾›ä¾æ®ï¼Œç‰©æµæˆæœ¬å¹³å‡é™ä½ 10%-15%ï¼›</li>
<li>å±¥çº¦æ•ˆç‡æå‡ï¼šå…¨æµç¨‹æ•°æ®ååŒï¼Œè®¢å•å¤„ç†æ•ˆç‡æå‡ 50%ï¼Œå¤§ä¿ƒå³°å€¼æ— éœ€é¢å¤–åŠ ç­å³å¯åº”å¯¹ã€‚</li>
</ul>
<p><strong>2. ç”¨æˆ·ç«¯ï¼šä½“éªŒå‡çº§ï¼Œç‰©æµé€æ˜æ›´å®‰å¿ƒ</strong></p>
<ul>
<li>æŸ¥ä»¶æ›´ä¾¿æ·ï¼šåœ¨ä¸‹å•å¹³å°å³å¯å®æ—¶æŸ¥çœ‹å…¨é“¾è·¯è½¨è¿¹ï¼Œæ— éœ€è·³è½¬ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæ“ä½œç®€åŒ– 80%ï¼›</li>
<li>ç­‰å¾…ä¸ç„¦è™‘ï¼šæ¯«ç§’çº§æ›´æ–° + å…³é”®èŠ‚ç‚¹æ¨é€ï¼Œæ¸…æ™°çŸ¥æ™“åŒ…è£¹åŠ¨æ€ä¸é¢„è®¡é€è¾¾æ—¶é—´ï¼Œæ¶ˆé™¤ä¸ç¡®å®šæ€§ï¼›</li>
<li>æƒç›Šæœ‰ä¿éšœï¼šå¼‚å¸¸æƒ…å†µæå‰å‘ŠçŸ¥ï¼Œé—®é¢˜åŠæ—¶å¤„ç†ï¼Œæ— éœ€åå¤å’¨è¯¢å®¢æœï¼Œæ¶ˆè´¹ä½“éªŒæ›´é¡ºç•…ï¼›</li>
<li>ä¿¡ä»»åº¦æå‡ï¼šé€æ˜ã€é«˜æ•ˆçš„ç‰©æµä¿¡æ¯å±•ç¤ºï¼Œå¢å¼ºå¯¹å•†å®¶çš„ä¿¡ä»»ï¼Œå¤è´­æ„æ„¿æ˜¾è‘—æå‡ã€‚</li>
</ul>
<p><strong>â€‹</strong></p>
<p><strong>ç»“è¯­</strong></p>
<p>ç‰©æµä¿¡æ¯çš„é€æ˜åŒ–ä¸å®æ—¶æ€§ï¼Œæ—©å·²æˆä¸ºè¡¡é‡ç‰©æµæœåŠ¡å“è´¨çš„æ ¸å¿ƒæ ‡å‡†ã€‚å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API ä»¥ â€œæ¯«ç§’çº§å“åº”â€ æ‰“ç ´ç‰©æµä¿¡æ¯æ»åçš„è¡Œä¸šç—›ç‚¹ï¼Œé€šè¿‡å…¨é“¾è·¯è¦†ç›–ã€æ™ºèƒ½é¢„è­¦ã€æ•°æ®ååŒï¼Œè®©ç‰©æµçŠ¶æ€ä» â€œæ¨¡ç³ŠæœªçŸ¥â€ å˜ä¸º â€œæ¸…æ™°å¯æ§â€ï¼Œæ—¢ä¸ºå•†å®¶é™ä½è¿è¥æˆæœ¬ã€æå‡æ•ˆç‡ï¼Œä¹Ÿä¸ºç”¨æˆ·å¸¦æ¥æ›´å®‰å¿ƒã€æ›´ä¾¿æ·çš„ç‰©æµä½“éªŒã€‚</p>
<p>åœ¨ç‰©æµæ•°å­—åŒ–æ·±å…¥å‘å±•çš„ä»Šå¤©ï¼Œç‰©æµä¿¡æ¯çš„å®æ—¶æ€§å·²æˆä¸ºå•†å®¶çš„æ ¸å¿ƒç«äº‰åŠ›ä¹‹ä¸€ã€‚å¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ API ä¸ä»…æ˜¯ä¸€æ¬¾å·¥å…·ï¼Œæ›´æ˜¯å•†å®¶ä¼˜åŒ–ç‰©æµä½“éªŒã€æ„å»ºå“ç‰Œä¿¡ä»»çš„é‡è¦æ”¯æ’‘ã€‚æœªæ¥ï¼Œéšç€ AIã€ç‰©è”ç½‘æŠ€æœ¯çš„æ·±åº¦èåˆï¼Œå¿«é€’é¸Ÿè¿˜å°†å®ç°æ›´ç²¾å‡†çš„æ—¶æ•ˆé¢„æµ‹ã€æ›´æ™ºèƒ½çš„å¼‚å¸¸å¹²é¢„ï¼Œè®©ç‰©æµä¿¡æ¯æœåŠ¡æ›´å…·ä»·å€¼ï¼Œæ¨åŠ¨è¡Œä¸šå‘æ›´é«˜æ•ˆã€æ›´é€æ˜çš„æ–¹å‘å‘å±•ã€‚ç‰©æµä¿¡æ¯æ€»æ»åï¼Ÿå¿«é€’é¸Ÿåœ¨é€”ç›‘æ§ APIï¼Œæ¯«ç§’çº§å“åº”è®©ç‰©æµé€æ˜ä¸ç­‰å¾…</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2618. æ£€æŸ¥æ˜¯å¦æ˜¯ç±»çš„å¯¹è±¡å®ä¾‹ï¼ˆJavaScriptï¼‰]]></title>    <link>https://juejin.cn/post/7572004684178145334</link>    <guid>https://juejin.cn/post/7572004684178145334</guid>    <pubDate>2025-11-13T09:00:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572004684178145334" data-draft-id="7571815573932998719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2618. æ£€æŸ¥æ˜¯å¦æ˜¯ç±»çš„å¯¹è±¡å®ä¾‹ï¼ˆJavaScriptï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-13T09:00:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bug_Constructer"/> <meta itemprop="url" content="https://juejin.cn/user/254742426830856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2618. æ£€æŸ¥æ˜¯å¦æ˜¯ç±»çš„å¯¹è±¡å®ä¾‹ï¼ˆJavaScriptï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426830856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bug_Constructer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:00:04.000Z" title="Thu Nov 13 2025 09:00:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>é¢˜ç›®é“¾æ¥ï¼š<code>https://leetcode.cn/problems/check-if-object-instance-of-class/description/</code></li>
<li>éš¾åº¦ï¼šç®€å•</li>
<li>ç±»å‹ï¼šJavaScript/åŸå‹é“¾/ç±»å‹åˆ¤æ–­</li>
</ul>
<h2 data-id="heading-0">é¢˜ç›®è¦ç‚¹</h2>
<ul>
<li>ç»™å®š <code>value</code> ä¸ <code>classFn</code>ï¼Œåˆ¤æ–­ <code>value</code> æ˜¯å¦æ˜¯ <code>classFn</code> æˆ–å…¶è¶…ç±»çš„å®ä¾‹ã€‚</li>
<li>éœ€è¦è€ƒè™‘ <code>undefined</code>ã€<code>null</code>ã€éå‡½æ•°çš„ <code>classFn</code>ã€‚</li>
<li>å¯¹åŸå§‹ç±»å‹ä¸å…¶åŒ…è£…ç±»ï¼ˆå¦‚ <code>5</code> ä¸ <code>Number</code>ï¼‰è¦æ­£ç¡®å¤„ç†ã€‚</li>
</ul>
<h2 data-id="heading-1">è§£æ³•ä¸€ï¼š<code>instanceof</code> + åŸå§‹ç±»å‹æ˜ å°„ï¼ˆæ¨èï¼‰</h2>
<ul>
<li>æ€è·¯ï¼š
<ul>
<li>ä¼˜å…ˆç”¨ <code>instanceof</code> åˆ¤æ–­å¯¹è±¡ä¸åŸå‹é“¾å…³ç³»ï¼ˆå†…éƒ¨ä¼šè°ƒç”¨ <code>Symbol.hasInstance</code>ï¼‰ã€‚</li>
<li>å¯¹åŸå§‹ç±»å‹åšç‰¹åˆ¤ï¼Œä½¿ <code>number â†’ Number</code>ã€<code>string â†’ String</code>ã€<code>boolean â†’ Boolean</code>ã€<code>bigint â†’ BigInt</code>ã€<code>symbol â†’ Symbol</code> è¿”å› <code>true</code>ã€‚</li>
<li>éæ³•è¾“å…¥ï¼ˆ<code>classFn</code> éå‡½æ•°æˆ–ä»»ä¸€ä¸º <code>null/undefined</code>ï¼‰è¿”å› <code>false</code>ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ£€æŸ¥å€¼æ˜¯å¦ä¸ºç»™å®šç±»æˆ–å…¶è¶…ç±»çš„å®ä¾‹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">value</span> - ä»»æ„å€¼
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">classFn</span> - ç›®æ ‡ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦ä¸ºå®ä¾‹
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkIfInstance</span> = (<span class="hljs-params">value, classFn</span>) =&gt; {
  <span class="hljs-keyword">if</span> (classFn == <span class="hljs-literal">null</span> || value == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> classFn !== <span class="hljs-string">'function'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> classFn) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  <span class="hljs-keyword">const</span> t = <span class="hljs-keyword">typeof</span> value
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Number</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'number'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">String</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'string'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Boolean</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'boolean'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">BigInt</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'bigint'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Symbol</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'symbol'</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<ul>
<li>
<p>å¤æ‚åº¦ï¼š</p>
<ul>
<li><code>instanceof</code> çš„åŸå‹é“¾æ£€æŸ¥ä¸º <code>O(h)</code>ï¼ˆ<code>h</code> ä¸ºåŸå‹é“¾é«˜åº¦ï¼‰ã€‚</li>
<li>åŸå§‹ç±»å‹æ˜ å°„ä¸º <code>O(1)</code>ã€‚</li>
</ul>
</li>
<li>
<p>è¾¹ç•Œè¯´æ˜ï¼š</p>
<ul>
<li><code>checkIfInstance(Date, Date) â†’ false</code>ï¼ˆ<code>Date</code> æ˜¯ <code>Function</code> çš„å®ä¾‹ï¼‰ã€‚</li>
<li><code>checkIfInstance(5, Number) â†’ true</code>ï¼ˆä¸é¢˜ç›®ç¤ºä¾‹ä¸€è‡´ï¼‰ã€‚</li>
<li><code>checkIfInstance(5, Object) â†’ false</code>ï¼ˆä¸æŠŠåŸå§‹å€¼è§†ä½œ <code>Object</code> çš„å®ä¾‹ï¼‰ã€‚</li>
<li><code>checkIfInstance(null, Object) â†’ false</code>ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">è§£æ³•äºŒï¼šæ‰‹å†™åŸå‹é“¾éå† + åŸå§‹ç±»å‹ç‰¹åˆ¤</h2>
<ul>
<li>æ€è·¯ï¼š
<ul>
<li>å¯¹å¯¹è±¡ä¸å‡½æ•°ï¼šæ²¿ <code>Object.getPrototypeOf</code> é€å±‚å‘ä¸Šï¼Œåˆ¤æ–­æ˜¯å¦ç­‰äº <code>classFn.prototype</code>ã€‚</li>
<li>å¯¹åŸå§‹ç±»å‹ï¼šåšä¸è§£æ³•ä¸€ç›¸åŒçš„æ˜ å°„ç‰¹åˆ¤ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * é€šè¿‡æ‰‹å†™åŸå‹é“¾åˆ¤æ–­å®ä¾‹å…³ç³»
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">value</span> - ä»»æ„å€¼
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">classFn</span> - ç›®æ ‡ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦ä¸ºå®ä¾‹
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkIfInstanceByProto</span> = (<span class="hljs-params">value, classFn</span>) =&gt; {
  <span class="hljs-keyword">if</span> (classFn == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> classFn !== <span class="hljs-string">'function'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> t = <span class="hljs-keyword">typeof</span> value
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Number</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'number'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">String</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'string'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Boolean</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'boolean'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">BigInt</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'bigint'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Symbol</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'symbol'</span>
  <span class="hljs-keyword">let</span> proto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(value)
  <span class="hljs-keyword">const</span> target = classFn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
  <span class="hljs-keyword">while</span> (proto) {
    <span class="hljs-keyword">if</span> (proto === target) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    proto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(proto)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<ul>
<li>è¯´æ˜ï¼šä¸ <code>instanceof</code> ç­‰ä»·äºéå†åŸå‹é“¾çš„åˆ¤æ–­ï¼Œä½†ä»éœ€å¯¹åŸå§‹ç±»å‹åšç‰¹åˆ¤ã€‚</li>
</ul>
<h2 data-id="heading-3">è§£æ³•ä¸‰ï¼šåˆ©ç”¨ <code>Symbol.hasInstance</code>ï¼ˆäº†è§£ï¼‰</h2>
<ul>
<li>æ€è·¯ï¼š
<ul>
<li><code>instanceof</code> å†…éƒ¨ä¼šè°ƒç”¨ <code>classFn[Symbol.hasInstance](value)</code>ï¼Œå¯æ˜¾å¼ä½¿ç”¨ä»¥è·å¾—å¯å®šåˆ¶çš„å®ä¾‹åˆ¤æ–­è¡Œä¸ºã€‚</li>
<li>å¯¹å¤šæ•°å†…ç½®ç±»å‹ï¼Œç›´æ¥ç”¨ <code>instanceof</code> å³å¯ï¼›æ‰‹åŠ¨è°ƒç”¨ä¸€èˆ¬ç”¨äºå®šåˆ¶ç±»ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * åŸºäº Symbol.hasInstance çš„å®ä¾‹åˆ¤æ–­
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">value</span> - ä»»æ„å€¼
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">classFn</span> - ç›®æ ‡ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - æ˜¯å¦ä¸ºå®ä¾‹
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkIfInstanceByHasInstance</span> = (<span class="hljs-params">value, classFn</span>) =&gt; {
  <span class="hljs-keyword">if</span> (classFn == <span class="hljs-literal">null</span> || value == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> classFn !== <span class="hljs-string">'function'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> hasInst = classFn[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">hasInstance</span>]
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> hasInst === <span class="hljs-string">'function'</span> &amp;&amp; hasInst.<span class="hljs-title function_">call</span>(classFn, value)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  <span class="hljs-keyword">const</span> t = <span class="hljs-keyword">typeof</span> value
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Number</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'number'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">String</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'string'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Boolean</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'boolean'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">BigInt</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'bigint'</span>
  <span class="hljs-keyword">if</span> (classFn === <span class="hljs-title class_">Symbol</span>) <span class="hljs-keyword">return</span> t === <span class="hljs-string">'symbol'</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h2 data-id="heading-4">ç¤ºä¾‹ä¸éªŒè¯</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(), <span class="hljs-title class_">Date</span>))            <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(), <span class="hljs-title class_">Animal</span>))           <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-title class_">Date</span>, <span class="hljs-title class_">Date</span>))                  <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-number">5</span>, <span class="hljs-title class_">Number</span>))                   <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-title class_">Function</span>))          <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-number">5</span>, <span class="hljs-title class_">Object</span>))                   <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'7:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-literal">null</span>, <span class="hljs-title class_">Object</span>))                <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'8:'</span>, <span class="hljs-title function_">checkIfInstance</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-title class_">Number</span>))           <span class="hljs-comment">// false</span>
</code></pre>
<h2 data-id="heading-5">æ€»ç»“</h2>
<ul>
<li>æ¨èä»¥ <code>instanceof</code> ä¸ºä¸»ï¼ŒåŸå§‹ç±»å‹è¡¥å……ä¸ºè¾…ï¼Œæ»¡è¶³é¢˜ç›®ç¤ºä¾‹ä¸è¯­ä¹‰ç›´è§‰ã€‚</li>
<li>è‹¥éœ€è¦å¯å®šåˆ¶çš„è¡Œä¸ºï¼Œå¯è€ƒè™‘ <code>Symbol.hasInstance</code>ï¼Œä½†ä¸€èˆ¬åœºæ™¯ä¸å¿…å¤æ‚åŒ–ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·Ÿç€TRAE SOLOå­¦ä¹ ä¸¤å¤§æœç´¢]]></title>    <link>https://juejin.cn/post/7571829879827234835</link>    <guid>https://juejin.cn/post/7571829879827234835</guid>    <pubDate>2025-11-13T09:02:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571829879827234835" data-draft-id="7571808096936771625" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·Ÿç€TRAE SOLOå­¦ä¹ ä¸¤å¤§æœç´¢"/> <meta itemprop="keywords" content="å‰ç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-11-13T09:02:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—å¤ªç™½"/> <meta itemprop="url" content="https://juejin.cn/user/1874034273300919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·Ÿç€TRAE SOLOå­¦ä¹ ä¸¤å¤§æœç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1874034273300919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—å¤ªç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:02:00.000Z" title="Thu Nov 13 2025 09:02:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è·Ÿç€TRAE SOLOå­¦ä¹ ä¸¤å¤§æœç´¢</h2>
<h3 data-id="heading-1">1.é¡ºåºæœç´¢ï¼ˆSequential Searchï¼‰</h3>
<h4 data-id="heading-2">è®¤è¯†</h4>
<p>é¡ºåºæœç´¢ä¹Ÿç§°ä¸ºçº¿æ€§æœç´¢ï¼ˆLinear Searchï¼‰ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ä»æ•°æ®ç»“æ„çš„ä¸€ç«¯å¼€å§‹ï¼Œé€ä¸ªæ£€æŸ¥æ¯ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ æˆ–æ£€æŸ¥å®Œæ‰€æœ‰å…ƒç´ ã€‚</p>
<pre><code class="hljs language-plain" lang="plain">function sequentialSearch(arr, target) {
    for (let i = 0; i &lt; arr.length; i++) {
        if (arr[i] === target) {
            return i;
        }
    }
    return -1;
};
const arr = [4, 3, 6, 2, 5, 7, 9, 8, 1]
console.log(sequentialSearch(arr, 8)) // 7
</code></pre>
<h4 data-id="heading-3">Javascripté¡ºåºæœç´¢å®ç°</h4>
<h5 data-id="heading-4">åŸºç¡€å®ç°</h5>
<p>åŸºç¡€å®ç°æ¯”è¾ƒå¥½å†™ï¼Œå°±æ˜¯ä¸€ä¸ªå°æ ‡</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;é¡ºåºæœç´¢ Sequential Search&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;script&gt;
    // 1 é¡ºåºæœç´¢ 
    function SequentialSearch(arr, target) {
        for (let i = 0; i &lt; arr.length; i++) {
            if (arr[i] == target) {
                return i;
            }
        }
        return -1;
    }
    // åŠŸèƒ½æµ‹è¯•
    const arr = [1, 4, 3, 6, 2, 5, 7, 9, 8];
    let target = 2;
    let result = SequentialSearch(arr, target);
    console.log(`å…ƒç´  ${target} åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•æ˜¯ ${result}`);
    
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<h5 data-id="heading-5">å“¨å…µæ¨¡å¼ï¼ˆSentinel Patternï¼‰ä¼˜åŒ–</h5>
<p>é’ˆå¯¹å“¨å…µæ¨¡å¼è¿›è¡Œä¼˜åŒ–</p>
<p>ä¹Ÿå°±æ˜¯å°†ä¸Šé¢å¾ªç¯ä¸­çš„åˆ¤æ–­æ¡ä»¶è¿›è¡Œå‡å°‘ä¸ºä¸€ä¸ª</p>
<p>ã€å“¨å…µæ¨¡å¼ã€‘å°†ç›®æ ‡å€¼ä½œä¸ºå“¨å…µæ”¾åœ¨äº†æ•°ç»„çš„æœ«å°¾ï¼Œç¡®ä¿å¾ªç¯ä¸€å®šä¼šç»ˆæ­¢</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-comment">// éœ€è¦åŒæ—¶æ£€æŸ¥ä¸¤ä¸ªæ¡ä»¶:</span>
<span class="hljs-comment">// 1. arr[i] === target - æ‰¾åˆ°ç›®æ ‡å…ƒç´ </span>
<span class="hljs-comment">// 2. i &lt; arr.length - ç¡®ä¿æ²¡æœ‰è¶…å‡ºæ•°ç»„èŒƒå›´</span>
</code></pre>
<p>å®ç°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2-ä¼˜åŒ–-å“¨å…µæ¨¡å¼</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">SequentialSearch</span>(<span class="hljs-params">arr, target</span>) {
      <span class="hljs-comment">// å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œç›´æ¥è¿”å›-1</span>
      <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> == <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
      }
      <span class="hljs-comment">// ä¿å­˜æœ€åä¸€ä¸ªå…ƒç´ </span>
      <span class="hljs-keyword">const</span> last = arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
      arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] = target; <span class="hljs-comment">// å°†æœ€åä¸€ä¸ªå…ƒç´ è®¾ä¸ºå“¨å…µ</span>

      <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">while</span> (arr[i] !== target) {
          i++
      }
      <span class="hljs-comment">// æ¢å¤æœ€åä¸€ä¸ªå…ƒç´ </span>
      arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] = last;
      <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°çš„ä½ç½®ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ä¸”å€¼åŒ¹é…</span>
      <span class="hljs-keyword">if</span> (i &lt; arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> || arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === target){
          <span class="hljs-keyword">return</span> i
      }
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
 }
</code></pre>
<h5 data-id="heading-6">åŒå‘è¿­ä»£ä¼˜åŒ–</h5>
<p>åŒå‘è¿­ä»£é¡ºåºæœç´¢ï¼ŒåŒæ—¶ä»å·¦å’Œå³å¼€å§‹è¿›è¡Œæœç´¢</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * 3-åŒå‘è¿­ä»£é¡ºåºæœç´¢ï¼ˆä»å‰å’Œä»ååŒæ—¶æœç´¢ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">arr</span> - å¾…æœç´¢çš„æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">target</span> - è¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>} ç›®æ ‡å…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›-1
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">iterativeBidirectionalSearch</span>(<span class="hljs-params">arr, target</span>) {
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> right = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (left &lt;= right) {
        <span class="hljs-comment">// ä»å‰å‘åæ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (arr[left] === target) {
            <span class="hljs-keyword">return</span> left;
        }
        <span class="hljs-comment">// ä»åå‘å‰æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (arr[right] === target) {
            <span class="hljs-keyword">return</span> right;
        }
        left++;
        right--;
    }
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}
</code></pre>
<h5 data-id="heading-7">æ¦‚ç‡ä¼˜åŒ–--æš‚æ—¶æ²¡ç†è§£</h5>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-comment">/**
     * 4-åŸºäºæ¦‚ç‡çš„è¿­ä»£é¡ºåºæœç´¢ï¼ˆé«˜é¢‘å…ƒç´ ä¼˜å…ˆï¼‰
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">arr</span> - å¾…æœç´¢çš„æ•°ç»„
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">target</span> - è¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ 
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">frequencyMap</span> - å¯é€‰çš„é¢‘ç‡æ˜ å°„è¡¨
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>} ç›®æ ‡å…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›-1
     */</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">iterativeProbabilisticSearch</span>(<span class="hljs-params">arr, target, frequencyMap = <span class="hljs-literal">null</span></span>) {
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æä¾›é¢‘ç‡æ˜ å°„è¡¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª</span>
        <span class="hljs-keyword">if</span> (!frequencyMap) {
            frequencyMap = {};
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) {
                frequencyMap[item] = (frequencyMap[item] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæŒ‰é¢‘ç‡æ’åºçš„ç´¢å¼•æ•°ç»„</span>
        <span class="hljs-keyword">const</span> indices = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: arr.<span class="hljs-property">length</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i);
        indices.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span>
            (frequencyMap[arr[b]] || <span class="hljs-number">0</span>) - (frequencyMap[arr[a]] || <span class="hljs-number">0</span>)
        );

        <span class="hljs-comment">// æŒ‰ç…§æ’åºåçš„ç´¢å¼•é¡ºåºæœç´¢</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> indices) {
            <span class="hljs-keyword">if</span> (arr[i] === target) {
                <span class="hljs-keyword">return</span> i;
            }
        }

        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
    <span class="hljs-keyword">const</span> myList = [<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">iterativeProbabilisticSearch</span>(myList, <span class="hljs-number">7</span>)); <span class="hljs-comment">// è¾“å‡º: 2</span>
</code></pre>
<h5 data-id="heading-8">ç¼“å­˜ä¼˜åŒ–</h5>
<p>ä¸‹é¢çš„ä¼˜åŒ–éå¸¸çš„ç®€å•ï¼Œä½†æ˜¯ç¬¦åˆV8å¼•æ“çš„è®¾è®¡</p>
<p>æ¯æ¬¡å¾ªç¯è¿­ä»£éƒ½éœ€è¦è®¿é—®arr.lengthå±æ€§è°ƒæ•´ä¸º  åªåœ¨å¾ªç¯å¼€å§‹å‰è®¿é—®ä¸€æ¬¡arr.lengthå¹¶å°†å…¶å­˜å‚¨åœ¨å±€éƒ¨å˜é‡lengthä¸­</p>
<p>JavaScriptå¼•æ“ï¼ˆå¦‚V8ï¼‰å¯¹å±€éƒ¨å˜é‡çš„è®¿é—®é€Ÿåº¦è¿œå¿«äºå¯¹è±¡å±æ€§è®¿é—®ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<ol>
<li>å±€éƒ¨å˜é‡å­˜å‚¨åœ¨å¯„å­˜å™¨æˆ–æ ˆä¸Šï¼Œè®¿é—®é€Ÿåº¦å¿«</li>
<li>å¯¹è±¡å±æ€§å­˜å‚¨åœ¨å †ä¸Šï¼Œéœ€è¦é€šè¿‡å±æ€§æŸ¥æ‰¾æœºåˆ¶è®¿é—®ï¼Œé€Ÿåº¦è¾ƒæ…¢</li>
</ol>
<p><code>è¿™ç§å±€éƒ¨å˜é‡çš„è®¿é—®ç”±äºå­˜å‚¨åœ¨åœ¨å¯„å­˜å™¨æˆ–æ ˆä¸Š è®¿é—®é€Ÿåº¦æ˜æ˜¾å¤§äºå­˜å‚¨åœ¨å †ä¸Šçš„å¯¹è±¡å±æ€§ï¼Œä»¥å‰æˆ‘è¿˜ä¸€ç›´åšæŒä¸å¢åŠ å¤šä½™å±€éƒ¨å˜é‡å‘¢</code></p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">iterativeCachedSearch</span>(<span class="hljs-params">arr, target</span>) {
      <span class="hljs-keyword">const</span> length = arr.<span class="hljs-property">length</span>; <span class="hljs-comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
          <span class="hljs-keyword">if</span> (arr[i] === target) {
              <span class="hljs-keyword">return</span> i;
          }
      }
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  }

  <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
  <span class="hljs-keyword">const</span> myList = [<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>];
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">iterativeCachedSearch</span>(myList, <span class="hljs-number">7</span>)); <span class="hljs-comment">// è¾“å‡º: 2</span>
</code></pre>
<h3 data-id="heading-9">2.äºŒåˆ†æœç´¢ï¼ˆBinary Searchï¼‰</h3>
<h4 data-id="heading-10">è®¤è¯†</h4>
<p><code>äºŒåˆ†æœç´¢</code>ï¼Œä¹Ÿå«<code>æŠ˜åŠæœç´¢</code>ï¼Œæ˜¯ä¸€ç§åœ¨<code>æœ‰åºæ•°ç»„</code>ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚æ‰€ä»¥æ˜¯ç”¨äºŒåˆ†æŸ¥æ‰¾çš„å‰ææ˜¯æ•°ç»„å¿…é¡»æ˜¯<code>æœ‰åº</code>çš„.</p>
<p>äºŒåˆ†æœç´¢é€šè¿‡ä¸æ–­å°†æœç´¢èŒƒå›´å‡åŠçš„æ–¹å¼ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡å…ƒç´ ã€‚</p>
<h4 data-id="heading-11">å·¥ä½œåŸç†</h4>
<ol>
<li>ä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´¢è¿‡ç¨‹ç»“æŸ</li>
<li>å¦‚æœç›®æ ‡å…ƒç´ å¤§äºæˆ–å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å¤§äºæˆ–å°äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾</li>
<li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ æˆ–æœç´¢èŒƒå›´ä¸ºç©º</li>
</ol>
<h4 data-id="heading-12">æ—¶é—´å¤æ‚åº¦</h4>
<ul>
<li>æœ€åæƒ…å†µï¼šO(log n)</li>
<li>å¹³å‡æƒ…å†µï¼šO(log n)</li>
<li>æœ€å¥½æƒ…å†µï¼šO(1)ï¼ˆç›®æ ‡å…ƒç´ æ­£å¥½åœ¨ä¸­é—´ï¼‰</li>
</ul>
<h4 data-id="heading-13">ç©ºé—´å¤æ‚åº¦</h4>
<ul>
<li>è¿­ä»£å®ç°ï¼šO(1)</li>
<li>é€’å½’å®ç°ï¼šO(log n)ï¼ˆç”±äºé€’å½’è°ƒç”¨æ ˆï¼‰</li>
</ul>
<h4 data-id="heading-14">å®ç°</h4>
<h5 data-id="heading-15">åŸºç¡€ç‰ˆæœ¬</h5>
<p>åŸºç¡€ç‰ˆæœ¬å®ç°ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆæ¥è‡ªå·±æ‰‹å†™ä¸€ä¸ªç®€å•çš„äºŒåˆ†æœç´¢æ¨¡å—</p>
<pre><code class="hljs language-javascript" lang="javascript">     <span class="hljs-comment">/**
     * 1-åŸºç¡€è¿­ä»£äºŒåˆ†æœç´¢
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">arr</span> - å·²æ’åºçš„æ•°ç»„
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">target</span> - è¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ 
     * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>} ç›®æ ‡å…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›-1
     */</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">binarySearch</span>(<span class="hljs-params">arr,target</span>){
        <span class="hljs-keyword">let</span> left=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">let</span> right=arr.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span>(left &lt;= right){
            <span class="hljs-keyword">const</span> mid=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((left+ right)/<span class="hljs-number">2</span>);
            <span class="hljs-keyword">if</span>(arr[mid]===target){
                <span class="hljs-keyword">return</span> mid;<span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡ï¼Œè¿”å›ç´¢å¼•</span>
            }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(arr[mid]&lt; target){
                left = mid +<span class="hljs-number">1</span>; <span class="hljs-comment">// ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†</span>
            }<span class="hljs-keyword">else</span>{
                right =mid -<span class="hljs-number">1</span>;  <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†</span>
            }
        }
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
    <span class="hljs-keyword">const</span> sortedArray = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">15</span>];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">binarySearch</span>(sortedArray, <span class="hljs-number">7</span>)); <span class="hljs-comment">// è¾“å‡º: 3</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">binarySearch</span>(sortedArray, <span class="hljs-number">8</span>)); <span class="hljs-comment">// è¾“å‡º: -1</span>
</code></pre>
<h5 data-id="heading-16">é˜²æ­¢æ•´æ•°æº¢å‡º</h5>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è·Ÿç€traeä¼˜åŒ–è¿­ä»£ä¸Šé¢ç‰ˆæœ¬çš„äºŒåˆ†æœç´¢ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‡ºç°ä¸€ç§æƒ…å†µ</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²çš„å°±æ˜¯<code>left + (right - left) / 2</code> æ¯” <code>(left + right) / 2</code> æ›´å®‰å…¨</p>
<pre><code class="hljs language-javascript" lang="javascript">å½“ left å’Œ right éƒ½å¾ˆå¤§æ—¶
å’Œå¯èƒ½ä¼šè¶…è¿‡ <span class="hljs-title class_">JavaScript</span> ä¸­ <span class="hljs-title class_">Number</span> ç±»å‹çš„æœ€å¤§å®‰å…¨æ•´æ•°ï¼ˆ<span class="hljs-number">2</span>^<span class="hljs-number">53</span> - <span class="hljs-number">1</span>ï¼‰
è¿™ä¼šå¯¼è‡´æ•´æ•°æº¢å‡ºï¼Œå¾—åˆ°é”™è¯¯çš„ç»“æœ
</code></pre>
<p>åˆ©ç”¨ä¸‹é¢çš„å†™æ³•å°±å¯ä»¥æœ‰æ•ˆé¿å…æˆ‘ä»¬ç»“æœè¶…è¿‡<code>Number.MAX_SAFE_INTEGER</code>ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å…ˆè®¡ç®—çš„æ–¹å¼ç›´æ¥é¿å…æœ€åç»“æœè¶…è¿‡æœ€å¤§å€¼</p>
<pre><code class="hljs language-javascript" lang="javascript">ä½¿ç”¨ left + (right - left) / <span class="hljs-number">2</span>

<span class="hljs-comment">// å…ˆè®¡ç®— (right - left)ï¼Œè¿™ä¸ªå·®å€¼å¾ˆå°</span>
<span class="hljs-comment">// ç„¶ååŠ åˆ° left ä¸Šï¼Œä¸ä¼šæº¢å‡º</span>

<span class="hljs-comment">// left + right ä¼šå…ˆè®¡ç®—ï¼Œç»“æœå¯èƒ½è¶…è¿‡ Number.MAX_SAFE_INTEGER</span>
<span class="hljs-comment">// å¯¼è‡´æº¢å‡ºï¼Œå¾—åˆ°é”™è¯¯çš„ç»“æœ</span>
</code></pre>
<p>æ‰€ä»¥é˜²æ­¢æ•´æ•°æº¢å‡ºæˆ‘ä»¬æ›´æ”¹ä¸º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
<span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((left + right) / <span class="hljs-number">2</span>);

<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="hljs-keyword">const</span> mid = left + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((right - left) / <span class="hljs-number">2</span>);
</code></pre>
<h5 data-id="heading-17">æ·»åŠ è¾“å…¥éªŒè¯</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·»åŠ åœ¨å‡½æ•°å¼€å§‹å¤„</span>
<span class="hljs-comment">// è¾“å…¥éªŒè¯</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr) || arr.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¾“å…¥å¿…é¡»æ˜¯éç©ºæ•°ç»„'</span>);
}
</code></pre>
<h5 data-id="heading-18">æå‰å¤„ç†è¾¹ç•Œæƒ…å†µ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·»åŠ åœ¨è¾“å…¥éªŒè¯ä¹‹åï¼Œå¾ªç¯ä¹‹å‰</span>
<span class="hljs-comment">// æå‰å¤„ç†è¾¹ç•Œæƒ…å†µ</span>
<span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>] === target) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">if</span> (arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === target) <span class="hljs-keyword">return</span> arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

</code></pre>
<h5 data-id="heading-19">ä¼˜åŒ–å¾ªç¯æ¡ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
<span class="hljs-keyword">while</span> (left &lt;= right) {

<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="hljs-keyword">while</span> (left &lt; right) {

<span class="hljs-comment">// è°ƒæ•´å¾ªç¯ä½“å†…çš„é€»è¾‘</span>
</code></pre>
<h5 data-id="heading-20">è°ƒæ•´å¾ªç¯ä½“å†…çš„é€»è¾‘</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
<span class="hljs-keyword">if</span> (arr[mid] === target) {
    <span class="hljs-keyword">return</span> mid; <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡ï¼Œè¿”å›ç´¢å¼•</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &lt; target) {
    left = mid + <span class="hljs-number">1</span>; <span class="hljs-comment">// ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†</span>
} <span class="hljs-keyword">else</span> {
    right = mid - <span class="hljs-number">1</span>; <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†</span>
}

<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="hljs-keyword">if</span> (arr[mid] &lt; target) {
    left = mid + <span class="hljs-number">1</span>; <span class="hljs-comment">// ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†</span>
} <span class="hljs-keyword">else</span> {
    right = mid; <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†æˆ–midå°±æ˜¯ç›®æ ‡</span>
}
</code></pre>
<p>æœ€åæˆ‘ä»¬ä¼˜åŒ–å®Œæˆä»¥å</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">binarySearch</span>(<span class="hljs-params">arr, target</span>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr) || arr.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¾“å…¥å¿…é¡»æ˜¯éç©ºæ•°ç»„'</span>);
  }
  <span class="hljs-comment">// æå‰å¤„ç†è¾¹ç•Œæƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>] === target) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === target) <span class="hljs-keyword">return</span> arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> right = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// å¾ªç¯æ¡ä»¶ä¼˜åŒ–ä¸º left &lt; right</span>
  <span class="hljs-keyword">while</span> (left &lt; right) {
      <span class="hljs-comment">// é˜²æ­¢æ•´æ•°æº¢å‡ºçš„ä¸­é—´å€¼è®¡ç®—</span>
      <span class="hljs-keyword">const</span> mid = left + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((right - left) / <span class="hljs-number">2</span>);

      <span class="hljs-keyword">if</span> (arr[mid] &lt; target) {
          left = mid + <span class="hljs-number">1</span>; <span class="hljs-comment">// ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†ï¼Œæ’é™¤mid</span>
      } <span class="hljs-keyword">else</span> {
          right = mid; <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†æˆ–midå°±æ˜¯ç›®æ ‡</span>
      }
  }
  <span class="hljs-comment">// å¾ªç¯ç»“æŸåæ£€æŸ¥leftä½ç½®æ˜¯å¦ä¸ºç›®æ ‡</span>
  <span class="hljs-keyword">return</span> arr[left] === target ? left : -<span class="hljs-number">1</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLOï¼šå‰ç«¯å¼€å‘çš„æ–°èŒƒå¼ä¸å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7571972751528149028</link>    <guid>https://juejin.cn/post/7571972751528149028</guid>    <pubDate>2025-11-13T09:03:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571972751528149028" data-draft-id="7571972751527788580" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLOï¼šå‰ç«¯å¼€å‘çš„æ–°èŒƒå¼ä¸å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-13T09:03:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhouzhouya"/> <meta itemprop="url" content="https://juejin.cn/user/3931509312987511"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLOï¼šå‰ç«¯å¼€å‘çš„æ–°èŒƒå¼ä¸å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3931509312987511/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhouzhouya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T09:03:18.000Z" title="Thu Nov 13 2025 09:03:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šä¸ºä»€ä¹ˆå‰ç«¯å¼€å‘è€…éœ€è¦TRAE SOLOï¼Ÿ</h2>
<p>ä»ç»„ä»¶åº“çš„æ­å»ºçš„è§’åº¦æ¥ç®€å•è°ˆä¸‹ï¼Œä¸ºä»€ä¹ˆå‰ç«¯å¼€å‘è€…éœ€è¦TRAE SOLOå‘¢ï¼Ÿå› ä¸ºå¯ä»¥è¾…åŠ©ç¼–ç ï¼Œæå¤§çš„æå‡å¼€å‘æ•ˆç‡ã€‚ä¼ ç»Ÿçš„å‰ç«¯å¼€å‘æµç¨‹ä¸­ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤„ç†é¡¹ç›®æ­å»ºã€ç»„ä»¶å¼€å‘ã€æ ·å¼è®¾è®¡ã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±é…ç½®ç­‰ä¸€ç³»åˆ—ç¹çå·¥ä½œã€‚è€ŒTRAE SOLOé€šè¿‡å…¶<strong>ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰</strong> ç†å¿µï¼Œå°†æ•´ä¸ªå¼€å‘æµç¨‹è¿›è¡Œäº†è‡ªåŠ¨åŒ–çš„å¼€å‘ï¼Œç”Ÿæˆç¬¦åˆå‰ç«¯å¼€å‘è§„èŒƒçš„ä»£ç ç»“æ„ã€‚</p>
<p>æ­¤ç¯‡æ–‡ç« æˆ‘å°†ä»‹ç»ä½¿ç”¨ TRAE SOLOå¼€å‘å‰ç«¯AIç»„ä»¶åº“çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€TRAE SOLOç”ŸæˆAIç»„ä»¶åº“çš„å®è·µ</h2>
<p>å‰ç«¯æƒ³è¦å®Œæˆä¸€ä¸ªå¤æ‚çš„ç»„ä»¶åº“æ˜¯æå…¶å›°éš¾çš„ï¼Œè¿™ä¸ä»…åŒ…å«æ¡†æ¶çš„æ­å»ºï¼Œæ€§èƒ½çš„ä¼˜åŒ–ï¼Œå®‰å…¨æ€§çš„ç¡®è®¤ï¼ŒåŸºç¡€ç»„ä»¶ï¼Œä¸šåŠ¡ç»„ä»¶ç­‰ç­‰éœ€æ±‚çš„è€ƒè™‘ï¼Œä½†ç»è¿‡TRAE SOLOçš„è¾…åŠ©ï¼Œä»é›¶æ„å»ºç°ä»£åŒ–ç»„ä»¶åº“ä¹Ÿå¹¶éé‚£ä¹ˆå¤æ‚çš„äº‹æƒ…ã€‚</p>
<h3 data-id="heading-2">å®è·µæ¡ˆä¾‹ï¼šä»é›¶æ„å»ºç°ä»£åŒ–ç»„ä»¶åº“</h3>
<p>æ­¤éƒ¨åˆ†ä»‹ç»<strong>ä»¥AIèƒ½åŠ›ä¸ºæ ¸å¿ƒã€ä»¥å·¥ç¨‹åŒ–å®è·µä¸ºæ‰‹æ®µ</strong>çš„å®Œæ•´ç³»ç»Ÿæ„å»ºè¿‡ç¨‹ã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>ç¬¬ä¸€é˜¶æ®µï¼šæ¨¡å‹é€‰å‹ä¸é€‚é… - â€œé€‰æ‹©é€‚é…æ¨¡å‹â€</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šä¸ºç»„ä»¶åº“çš„æ¯ä¸ªAIåŠŸèƒ½ï¼ˆå¦‚æ–‡æœ¬æ€»ç»“ã€ä»£ç ç”Ÿæˆã€æ™ºèƒ½ç¿»è¯‘ï¼‰é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹ã€‚</p>
<ul>
<li><strong>éœ€æ±‚åˆ†æ</strong>ï¼šæ˜ç¡®æ¯ä¸ªç»„ä»¶çš„æ ¸å¿ƒæŒ‡æ ‡ï¼šæ˜¯è¿½æ±‚ä½å»¶è¿Ÿï¼ˆå¦‚ä»£ç è¡¥å…¨ï¼‰ï¼Œè¿˜æ˜¯è¿½æ±‚é«˜ç²¾åº¦ï¼ˆå¦‚æ–‡æ¡£æ€»ç»“ï¼‰ï¼Ÿ</li>
<li><strong>æ¨¡å‹ç­›é€‰</strong>ï¼šåˆ©ç”¨TRAE SOLOçš„è¯„ä¼°èƒ½åŠ›ï¼Œåœ¨GPT-4ã€Claudeã€å¼€æºæ¨¡å‹ï¼ˆå¦‚CodeLlamaï¼‰ä¸­è¿›è¡Œå¿«é€Ÿå¯¹æ¯”æµ‹è¯•ï¼Œæ‰¾å‡ºåœ¨æ€§èƒ½ã€æˆæœ¬ã€é€Ÿåº¦ä¸Šæœ€å¹³è¡¡çš„æ¨¡å‹ã€‚</li>
<li><strong>å†³ç­–ä¾æ®</strong>ï¼šå¹¶éæ‰€æœ‰åŠŸèƒ½éƒ½éœ€è¦æœ€å¼ºå¤§çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œç®€å•çš„æ–‡æœ¬çº é”™å¯èƒ½ç”¨è½»é‡æ¨¡å‹ï¼Œè€Œä»£ç ç”Ÿæˆåˆ™éœ€é€‰æ‹©æ›´ä¸“ä¸šçš„æ¨¡å‹ã€‚</li>
</ul>
<p><strong>è¾“å‡ºç‰©</strong>ï¼šä¸€ä»½æ¨¡å‹é€‰å‹çŸ©é˜µï¼Œæ˜ç¡®æ¯ä¸ªAIåŠŸèƒ½èƒŒåçš„æ¨¡å‹ä¾›åº”å•†ã€ç‰ˆæœ¬å’ŒAPIç«¯ç‚¹ã€‚</p>
<hr/>
<h4 data-id="heading-4"><strong>ç¬¬äºŒé˜¶æ®µï¼šæœåŠ¡éƒ¨ç½²ä¸é›†æˆ - â€œæ¨¡å‹æœåŠ¡ä¸€é”®ä¸Šçº¿â€</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šå°†é€‰å®šçš„æ¨¡å‹èƒ½åŠ›å°è£…æˆç¨³å®šã€å¯å¤ç”¨çš„APIæœåŠ¡ã€‚</p>
<ul>
<li><strong>ä¸€é”®éƒ¨ç½²</strong>ï¼šåˆ©ç”¨TRAE SOLOçš„éƒ¨ç½²æ¨¡å—ï¼Œå°†æ¯ä¸ªæ¨¡å‹æœåŠ¡ï¼ˆå¦‚Â <code>text-summarization-api</code>ã€<code>code-generation-api</code>ï¼‰å¿«é€Ÿéƒ¨ç½²ä¸ºç‹¬ç«‹çš„å¾®æœåŠ¡ã€‚</li>
<li><strong>APIæ ‡å‡†åŒ–</strong>ï¼šå®šä¹‰ç»Ÿä¸€çš„APIæ¥å£è§„èŒƒï¼Œä¾‹å¦‚æ‰€æœ‰è¯·æ±‚ä½“åŒ…å«Â <code>input</code>å­—æ®µï¼Œæ‰€æœ‰å“åº”ä½“åŒ…å«Â <code>data</code>å’ŒÂ <code>error</code>å­—æ®µã€‚TRAE SOLOå¯è‡ªåŠ¨ç”Ÿæˆè¿™äº›æ ·æ¿ä»£ç ã€‚</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šé€šè¿‡TRAE SOLOç®¡ç†ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰çš„APIé…ç½®ã€‚</li>
</ul>
<p><strong>è¾“å‡ºç‰©</strong>ï¼šä¸€ç»„å·²éƒ¨ç½²çš„ã€æ ‡å‡†åŒ–çš„AIèƒ½åŠ›APIã€‚</p>
<hr/>
<h4 data-id="heading-5"><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯ç»„ä»¶å¼€å‘ä¸ç”Ÿæˆ - â€œç”Ÿæˆä»£ç â€</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šåŸºäºä¸Šè¿°APIï¼Œå¼€å‘æ˜“äºä½¿ç”¨çš„å‰ç«¯React/Vueç»„ä»¶ã€‚</p>
<ul>
<li><strong>ç»„ä»¶ä»£ç ç”Ÿæˆ</strong>ï¼šå‘TRAE SOLOæè¿°ç»„ä»¶åŠŸèƒ½ï¼ˆå¦‚ï¼šâ€œç”Ÿæˆä¸€ä¸ªæ–‡æœ¬æ€»ç»“ç»„ä»¶ï¼ŒåŒ…å«ä¸€ä¸ªå¤šè¡Œè¾“å…¥æ¡†ã€ä¸€ä¸ªæ»‘åŠ¨æ¡æ§åˆ¶æ€»ç»“é•¿åº¦ã€ä¸€ä¸ªæäº¤æŒ‰é’®å’Œå¼‚æ­¥åŠ è½½çŠ¶æ€â€ï¼‰ï¼Œè®©å…¶ç”Ÿæˆé«˜è´¨é‡çš„ã€åŒ…å«ç±»å‹å®šä¹‰çš„ç»„ä»¶ä»£ç ã€‚</li>
<li><strong>é€»è¾‘å°è£…</strong>ï¼šç»„ä»¶å†…éƒ¨å°è£…äº†æ‰€æœ‰APIè°ƒç”¨é€»è¾‘ã€é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†ï¼Œå¯¹ä½¿ç”¨è€…å®Œå…¨é€æ˜ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"ai-summary-wrapper"</span>&gt;
    &lt;textarea <span class="hljs-attr">v-model</span>=<span class="hljs-string">"inputText"</span> placeholder=<span class="hljs-string">"è¯·è¾“å…¥è¦æ€»ç»“çš„æ–‡æœ¬..."</span>&gt;&lt;/textarea&gt;
    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;
      &lt;span&gt;æ€»ç»“å¼ºåº¦: &lt;/span&gt;
      &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span> v-model=<span class="hljs-string">"summaryLength"</span> min=<span class="hljs-string">"1"</span> max=<span class="hljs-string">"10"</span>&gt;
      &lt;button @<span class="hljs-attr">click</span>=<span class="hljs-string">"summarize"</span> :disabled=<span class="hljs-string">"isLoading"</span>&gt;
        {{ isLoading ? 'æ€»ç»“ä¸­...' : 'ä¸€é”®æ€»ç»“' }}
      &lt;/button&gt;
    &lt;/div&gt;
    &lt;div <span class="hljs-attr">v-if</span>=<span class="hljs-string">"error"</span> class=<span class="hljs-string">"error"</span>&gt;{{ error }}&lt;/div&gt;
    &lt;div <span class="hljs-attr">v-if</span>=<span class="hljs-string">"summary"</span> class=<span class="hljs-string">"result"</span>&gt;
      &lt;h4&gt;æ€»ç»“ç»“æœ:&lt;/h4&gt;
      &lt;p&gt;{{ summary }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'<span class="hljs-comment">;</span>
import { summaryApi } from '../apis/summaryApi'<span class="hljs-comment">; // TRAE SOLOç”Ÿæˆçš„æ ‡å‡†åŒ–APIæ¨¡å—</span>

const <span class="hljs-attr">inputText</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">summaryLength</span> = ref(<span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">summary</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">isLoading</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">error</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">summarize</span> = async () =&gt; {
  <span class="hljs-attr">isLoading.value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">error.value</span> = <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  try {
    const <span class="hljs-attr">response</span> = await summaryApi({
      text: inputText.value,
      length: summaryLength.value
    })<span class="hljs-comment">;</span>
    <span class="hljs-attr">summary.value</span> = response.data<span class="hljs-comment">;</span>
  } catch (err) {
    <span class="hljs-attr">error.value</span> = <span class="hljs-string">'æ€»ç»“å¤±è´¥ï¼Œè¯·é‡è¯•'</span><span class="hljs-comment">;</span>
  } finally {
    <span class="hljs-attr">isLoading.value</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  }
}<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
<hr/>
<h4 data-id="heading-6"><strong>ç¬¬å››é˜¶æ®µï¼šè´¨é‡ä¸å®‰å…¨ç®¡æ§ - â€œå…¼å®¹æ€§ä¿®å¤â€ä¸â€œå®‰å…¨è¸©å‘â€</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šç¡®ä¿ç»„ä»¶åº“çš„å¥å£®æ€§å’Œå®‰å…¨æ€§ã€‚<strong>TRAE SOLOå®è·µ</strong>ï¼š</p>
<ul>
<li>
<p><strong>DiffViewå·¥å…·</strong>ï¼šå½“AIæ¨¡å‹APIå‡çº§å¯¼è‡´æ¥å£å˜æ›´æ—¶ï¼Œä½¿ç”¨DiffViewå·¥å…·å¿«é€Ÿè¯†åˆ«å‡ºå“åº”æ•°æ®ç»“æ„çš„å˜åŒ–ï¼ˆä¾‹å¦‚ä»Â <code>result.summary</code>å˜ä¸ºÂ <code>result.content</code>ï¼‰ï¼Œå¹¶è‡ªåŠ¨ä¿®å¤å—å½±å“çš„å‰ç«¯ç»„ä»¶ä»£ç ã€‚</p>
</li>
<li>
<p><strong>å¯†é’¥å®‰å…¨ç®¡ç†</strong>ï¼šç»å¯¹é¿å…åœ¨å‰ç«¯ä»£ç ä¸­ç¡¬ç¼–ç API Keyã€‚TRAE SOLOåº”å¸®åŠ©å»ºç«‹æœ€ä½³å®è·µï¼š</p>
<ol>
<li>ä¸ºæ¯ä¸ªå‰ç«¯ç»„ä»¶ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„â€œAPIè·¯ç”±ä»£ç†â€ï¼ˆå¦‚Â <code>/api/summarize</code>ï¼‰ã€‚</li>
<li>API Keyä¿å­˜åœ¨åç«¯æœåŠ¡å™¨ç¯å¢ƒå˜é‡ä¸­ï¼Œå‰ç«¯ç»„ä»¶é€šè¿‡ä»£ç†è·¯ç”±è®¿é—®AIæœåŠ¡ï¼Œå½»åº•éš”ç¦»å¯†é’¥ã€‚</li>
<li>åŒæ—¶ï¼Œä»£ç†è·¯ç”±è¿˜å¯ä»¥å®ç°æƒé™æ ¡éªŒã€é™æµã€ç¼“å­˜ç­‰å®‰å…¨ç­–ç•¥ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h4 data-id="heading-7"><strong>ç¬¬äº”é˜¶æ®µï¼šæ–‡æ¡£ã€ç¤ºä¾‹ä¸å‘å¸ƒ</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šæ‰“é€ å¯ç”¨çš„äº§å“ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€å †ä»£ç ã€‚</p>
<ul>
<li><strong>è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£</strong>ï¼šä½¿ç”¨TRAE SOLOä¸ºæ¯ä¸ªç»„ä»¶è‡ªåŠ¨ç”ŸæˆMarkdownæ–‡æ¡£ï¼ŒåŒ…å«Propsã€Eventsã€Slotså’Œç”¨æ³•ç¤ºä¾‹ã€‚</li>
<li><strong>æ„å»ºä¸æ‰“åŒ…</strong>ï¼šé…ç½®æ„å»ºæµç¨‹ï¼Œå°†ç»„ä»¶åº“æ‰“åŒ…ä¸ºNPMåŒ…ï¼ˆ<code>ai-component-lib</code>ï¼‰ï¼Œæ”¯æŒæŒ‰éœ€å¼•å…¥å’ŒTree Shakingã€‚</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¸…æ™°åœ°ç®¡ç†è¿­ä»£ã€‚</li>
</ul>
<h4 data-id="heading-8"><strong>æœ€å</strong></h4>
<p>é€šè¿‡ä»¥ä¸Šäº”ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬æˆåŠŸåœ°<strong>å°†å›¾ç‰‡ä¸­TRAE SOLOåœ¨â€œå¤§æ¨¡å‹å·¥ç¨‹åŒ–â€æ–¹é¢çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œåº”ç”¨åˆ°äº†ä¸€ä¸ªå…·ä½“çš„é—®é¢˜â€”â€”â€œä»0åˆ°1æ­å»ºAIç»„ä»¶åº“ç³»ç»Ÿâ€ä¸Š</strong>ã€‚è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>å·¥ç¨‹åŒ–</strong>ï¼šä¸åªæ˜¯å†™ç»„ä»¶ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªå¯ç»´æŠ¤ã€å¯æ‰©å±•çš„ç³»ç»Ÿã€‚</li>
<li><strong>AIé©±åŠ¨</strong>ï¼šæ¯ä¸ªç»„ä»¶çš„æ ¸å¿ƒä»·å€¼éƒ½æ¥æºäºç²¾å¿ƒé€‰æ‹©å’Œé›†æˆçš„AIæ¨¡å‹ã€‚</li>
<li><strong>å®‰å…¨å¯é </strong>ï¼šé€šè¿‡å·¥ç¨‹åŒ–æ‰‹æ®µè§£å†³äº†APIå¯†é’¥å®‰å…¨å’Œæ¥å£å˜æ›´å…¼å®¹æ€§ä¸¤å¤§æ ¸å¿ƒç—›ç‚¹ã€‚</li>
<li><strong>é«˜æ•ˆäº¤ä»˜</strong>ï¼šåˆ©ç”¨TRAE SOLOçš„ä»£ç ç”Ÿæˆå’Œè‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œæå¤§æå‡äº†ä»æƒ³æ³•åˆ°äº§å‡ºçš„æ•ˆç‡ã€‚</li>
</ol>
<h4 data-id="heading-9"><strong>æ€»ç»“ï¼šTRAE SOLOé‡æ–°å®šä¹‰äº†å‰ç«¯åœ¨AIæ—¶ä»£çš„è§’è‰²</strong></h4>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒTRAE SOLOå¯¹äºå‰ç«¯å¼€å‘è€…çš„ä»·å€¼ï¼Œæˆ‘è§‰å¾—æ˜¯æ¨åŠ¨å‰ç«¯å¼€å‘è€…ä»è¢«åŠ¨çš„AIé›†æˆè€…è½¬å˜ä¸ºä¸»åŠ¨çš„AIåº”ç”¨æ„å»ºè€…ã€‚</p>
<p>å½“ä¸‹æ­£åœ¨è¿›è¡Œå‰ç«¯ç»„ä»¶åº“çš„è®¾è®¡ä¸å¼€å‘ï¼Œæ¬¢è¿å¤§å®¶è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tauri å’Œ enigo ä½ ä»¬ä¸è®¸å†å´©æºƒå•¦ï¼]]></title>    <link>https://juejin.cn/post/7571892340878000166</link>    <guid>https://juejin.cn/post/7571892340878000166</guid>    <pubDate>2025-11-13T07:00:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571892340878000166" data-draft-id="7571786149591121971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tauri å’Œ enigo ä½ ä»¬ä¸è®¸å†å´©æºƒå•¦ï¼"/> <meta itemprop="keywords" content="Rust,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:00:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ›å–å¨å£«å¿Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3837719308930574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tauri å’Œ enigo ä½ ä»¬ä¸è®¸å†å´©æºƒå•¦ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3837719308930574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ›å–å¨å£«å¿Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:00:47.000Z" title="Thu Nov 13 2025 07:00:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Rust æ–°æ‰‹ è½»å–·</p>
<p>æœ€è¿‘é—²æš‡æ—¶é—´ä¸€ç›´åœ¨å¼€å‘Auto Engineè¿™ä¸ªé¡¹ç›®ï¼ˆå…·ä½“åå­—è¿˜æ²¡å®šï¼Œå°±å…ˆå«è¿™ä¸ªå§ï¼‰ï¼Œå€’ä¹Ÿè¸©äº†ä¸å°‘å‘ï¼Œå°¤å…¶æ˜¯Enigoè¿™ä¸ªcrateï¼Œè¿™å°å­è¿˜çœŸä¸çœå¿ƒã€‚</p>
<p>Auto Engineæ˜¯ä¸€ä¸ªæ¡Œé¢è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œè‡ªç„¶è€Œç„¶å°±åŒ…å«äº†æ¨¡æ‹Ÿé”®é¼ çš„æ“ä½œï¼ŒåŸºäºTauriå¼€å‘ï¼Œé‚£è‡ªç„¶è€Œç„¶å°±ç”¨åˆ°äº†Enigoè¿™ä¸ªcrateã€‚</p>
<p>ç»“è®ºï¼š<code>enigo</code>è¿™ä¸ªåº“åœ¨ä¸åŒOSä¸Šæœ‰ä¸€äº›ç»†èŠ‚éœ€è¦å…³æ³¨</p>
<p>engio è¿™å°å­ç»™æˆ‘åŸ‹çš„ç¬¬ä¸€ä¸ªå‘å°±æ˜¯ï¼š</p>
<h2 data-id="heading-0">MacOSä¸‹çš„é”®ç›˜æ¨¡æ‹Ÿä¼šå´©æºƒ</h2>
<p>è™½ç„¶åœ¨Macä¸Šå¼€å‘ï¼Œä½†å› ä¸ºæœ‰ä¸ªå…·ä½“çš„ä½¿ç”¨åœºæ™¯æ˜¯Windowsçš„ï¼Œæ‰€ä»¥æµ‹è¯•éƒ½æ”¾åœ¨äº†Winä¸Šï¼Œå°±ç†æ‰€åº”å½“å¾—ä»¥ä¸ºMacä¸Šä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œã€‚æ›´ä½•å†µä¸€å¼€å§‹åœ¨Macä¸Šå•ç‹¬è¯•ç”¨enigoçš„æ—¶å€™ä¹Ÿæ²¡æœ‰å‘ç°é—®é¢˜ã€‚</p>
<p>ä½†å½“æˆ‘å…´å†²å†²åœ°ç¼–è¯‘å®Œç¬¬ä¸€ä¸ªMacç‰ˆçš„Auto Engineï¼Œç‚¹å‡»è¿è¡Œå</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76a920cea38a474f8e2dfbd88b76b461~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yb5Zad5aiB5aOr5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622046&amp;x-signature=TsrkTpauFMuxZLVI%2BOlygj5DD34%3D" alt="image.png" loading="lazy"/>
å’”ï¼çš„ä¸€ä¸‹ï¼å´©æºƒäº†ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•æ—¥å¿—è¾“å‡ºğŸ˜­</p>
<p>æ¥ç€ä¸€æ­¥æ­¥å®šä½ï¼Œæœ€ç»ˆå®šä½åˆ°äº†è¿™æ®µä»£ç ä¸Š</p>
<pre><code class="hljs language-rust" lang="rust">    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">keyboard</span>(&amp;<span class="hljs-keyword">self</span>, key: Key, direction: enigo::Direction) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">enigo</span> = Enigo::<span class="hljs-title function_ invoke__">new</span>(&amp;Settings::<span class="hljs-title function_ invoke__">default</span>()).<span class="hljs-title function_ invoke__">unwrap</span>();
        
        enigo
            .<span class="hljs-title function_ invoke__">key</span>(key, direction)
            .<span class="hljs-title function_ invoke__">map_err</span>(|err| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"Failed to click: {err}"</span>))?;
        <span class="hljs-title function_ invoke__">Ok</span>(())
    }
</code></pre>
<p>å®˜æ–¹example â†“</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6498214807041769c5daf3f105ea4e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yb5Zad5aiB5aOr5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622046&amp;x-signature=C4f6yGh9khas6SSwpf06JK%2FjA34%3D" alt="image.png" loading="lazy"/>
è¿™åº”è¯¥æ˜¯ä¸€ä¸ªéå¸¸éå¸¸æ ‡å‡†ä½¿ç”¨Â <code>enigo</code>Â çš„ä»£ç ï¼ˆæˆ‘è§‰å¾—ï¼‰ï¼Œå‡ ä¹å’Œå®˜æ–¹çš„exampleä¸­çš„ä»£ç æ²¡å•¥åŒºåˆ«~å§ï¼Ÿä¸»è¦æ˜¯è¿™ç©æ„å„¿åœ¨WIndowsä¸Šè·‘ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<p>æˆ‘å¼€å§‹è¯·æ±‚ç½‘å‹çš„å¸®åŠ©ï¼Œå…³é”®è¯ï¼š<code>macos</code> ã€<code>Tauri</code>ã€<code>Enigo</code>ã€<code>Crush</code>ã€‚</p>
<p>âœ…<strong>å¥½æ¶ˆæ¯ï¼š</strong> æ‰¾åˆ°ä¸¤ä¸ªç›¸å…³çš„Issueï¼Œä¸€ä¸ªæ˜¯æ¥è‡ªenigoè¿™ä¸ªä»“åº“ï¼Œå¦ä¸€ä¸ªæ˜¯æ¥è‡ªtauriè¿™ä¸ªä»“åº“</p>
<p>âŒ<strong>åæ¶ˆæ¯ï¼š</strong> ä¸¤ä¸ªIssueéƒ½æ˜¯Opençš„çŠ¶æ€</p>
<p>ï¼ˆæˆ‘å…ˆå“­ä¼šå„¿ğŸ¥¹ï¼‰</p>
<p>ä¸€çœ‹åˆ°éƒ½æ˜¯Opençš„çŠ¶æ€ï¼Œçœ‹éƒ½æ‡’å¾—çœ‹äº†ï¼Œå¤§è‡´æµè§ˆäº†ä¸€ä¸‹ï¼Œå¥½åƒæ˜¯è·Ÿ <code>å¹¶å‘</code>ã€<code>å¤šçº¿ç¨‹</code> æœ‰å…³ç³»ï¼Œä¸è¿‡ä¸¤è¾¹éƒ½ä¸çŸ¥é“æ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¿ƒå¦‚æ­»ç°ï¼Œé‚£æ®µæ—¶é—´æˆ‘ç”šè‡³æ‰“ç®—æ”¾å¼ƒMacå¹³å°çš„ç¼–è¯‘äº†ã€‚</p>
<p>ä½†æ˜¯äººå˜›ç»ˆç©¶æ˜¯è´±ï¼Œå¾—ä¸åˆ°çš„å°±æ›´åŠ çˆ±~ï¼Œå¯¹äºè‡ªå·±è§£å†³ä¸æ‰çš„é—®é¢˜ï¼Œç©ºçš„æ—¶å€™æ€»å½’ä¼šå›è¿‡å¤´çœ‹çœ‹å®ƒè¿˜åœ¨ä¸åœ¨é‚£ï¼›å°±åƒè·Ÿä½ åˆ†æ‰‹çš„å‰ä»»ä¸€æ ·ï¼Œå·å·æ‘¸æ‘¸çœ‹çœ‹å¥¹æœ‹å‹åœˆæœ€è¿‘è¿‡å¾—æ€ä¹ˆæ ·ğŸ¤¡</p>
<p>è™½ç„¶å¾ˆå°ä¸‘ï¼Œä½†æ˜¯ï¼ä½ åˆ«è¯´ï¼ä½ è¿˜çœŸåˆ«è¯´ï¼</p>
<p>å½“æˆ‘å†æ¬¡ç¿»çœ‹<strong>tauri</strong>çš„è¿™æ¡issueçš„æ—¶å€™ï¼Œä½ çŒœæˆ‘å‘ç°äº†ä»€ä¹ˆï¼</p>
<p>ï¼ˆæˆ‘å…ˆå¸–ä¸€ä¸‹è¿™Issueï¼šÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftauri-apps%2Ftauri%2Fissues%2F6421%25EF%25BC%2589" target="_blank" title="https://github.com/tauri-apps/tauri/issues/6421%EF%BC%89" ref="nofollow noopener noreferrer">github.com/tauri-apps/â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42449429f7e3446d804ad5e6768b7104~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yb5Zad5aiB5aOr5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622046&amp;x-signature=xDHNaGF7G1kbg6164FN%2FbJBEyTw%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä½åå­—å«åš<code>inomata137</code>çš„è€å“¥ï¼Œè¿˜çœŸç»™äº†æˆ‘ä¸ªåæ–¹ï¼ŒæŠŠå‰ä»»é—®é¢˜è§£å†³äº†ğŸ¤“ï¼Œæˆ‘tmä¸æ˜¯å°ä¸‘äº†å“ˆå“ˆï¼</p>
<p>ä»–é¦–å…ˆç”©å‡ºäº†ä¸¤ä¸ªä¼šå´©æºƒçš„æ¡ˆä¾‹ä»£ç ï¼Œç„¶åæ³¨æ„çœ‹ä»–çš„ç¬¬ä¸‰æ®µä»£ç ï¼Œä»–ç›´æ¥å°±æ˜¯ä¸€ä¸ªÂ <code>run_on_main_thread</code>Â è®©enigoè¿™å°å­ ç›´æ¥å°±æ˜¯è¯´ï¼Œåœ¨tauriçš„ ä¸»çº¿ç¨‹ ä¸­æ‰§è¡Œ~</p>
<p>æ— æ•Œ</p>
<p>è¿™æ³¢éå¸¸çš„æ— æ•Œ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vueç§»åŠ¨ç«¯å¼€å‘é•¿æŒ‰å¯¹è¯å¤åˆ¶åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7571734313927262242</link>    <guid>https://juejin.cn/post/7571734313927262242</guid>    <pubDate>2025-11-13T06:38:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571734313927262242" data-draft-id="7571722835658702882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vueç§»åŠ¨ç«¯å¼€å‘é•¿æŒ‰å¯¹è¯å¤åˆ¶åŠŸèƒ½"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:38:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æä¸ªé”¤å­å“Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2146682667533309"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vueç§»åŠ¨ç«¯å¼€å‘é•¿æŒ‰å¯¹è¯å¤åˆ¶åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2146682667533309/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æä¸ªé”¤å­å“Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:38:09.000Z" title="Thu Nov 13 2025 06:38:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ•ˆæœï¼šå¯¹è¯æ¡†é•¿æŒ‰å¼¹å‡ºå¼¹æ¡†ï¼Œé‡Œé¢æœ‰æŒ‰é’®ï¼Œå¯ä»¥å¢åŠ åŠŸèƒ½</p>
</blockquote>
<h2 data-id="heading-0">æ£€æµ‹å¯¹è¯æ¡†é•¿æŒ‰</h2>
<ul>
<li>è¦é¢å¤–è€ƒè™‘æŒ‰ä½å¯¹è¯æ¡†æ»‘åŠ¨å¯¹è¯åˆ—è¡¨çš„æƒ…å†µ</li>
<li>å°è£…hookå®ç°</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/hooks/useLongPressBubble.js</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLongPressBubble</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> showBubble = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> bubblePosition = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">0</span> })
  <span class="hljs-keyword">const</span> bubblePlacement = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'top'</span>) <span class="hljs-comment">// å‡ºç°æ–¹ä½ï¼ˆå¯¹è¯æ¡†ä¸Š/ä¸‹ï¼‰</span>
  <span class="hljs-keyword">let</span> longPressTimer = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LONG_PRESS_DELAY</span> = <span class="hljs-number">500</span> <span class="hljs-comment">// ms</span>
  <span class="hljs-comment">// ç”¨äºåˆ¤æ–­æ˜¯å¦å‘ç”Ÿç§»åŠ¨(æŒ‰ä½å¯¹è¯æ¡†æ»‘åŠ¨åˆ—è¡¨æ—¶ ä¸è¯¥æ˜¾ç¤ºæ°”æ³¡æ¡†)</span>
  <span class="hljs-keyword">let</span> touchStartX = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> touchStartY = <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MOVE_THRESHOLD</span> = <span class="hljs-number">10</span> <span class="hljs-comment">// åƒç´ ï¼Œè¶…è¿‡å³è§†ä¸ºæ»‘åŠ¨</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearTimer</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (longPressTimer) {
      <span class="hljs-built_in">clearTimeout</span>(longPressTimer)
      longPressTimer = <span class="hljs-literal">null</span>
    }
  }
  <span class="hljs-comment">// å¤„ç† touchmoveï¼Œæ£€æµ‹æ»‘åŠ¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onTouchMove</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!longPressTimer) <span class="hljs-keyword">return</span> <span class="hljs-comment">// æ²¡æœ‰å®šæ—¶å™¨ï¼Œæ— éœ€å¤„ç†</span>

    <span class="hljs-keyword">const</span> touch = event.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">const</span> dx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(touch.<span class="hljs-property">clientX</span> - touchStartX)
    <span class="hljs-keyword">const</span> dy = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(touch.<span class="hljs-property">clientY</span> - touchStartY)

    <span class="hljs-keyword">if</span> (dx &gt; <span class="hljs-variable constant_">MOVE_THRESHOLD</span> || dy &gt; <span class="hljs-variable constant_">MOVE_THRESHOLD</span>) {
      <span class="hljs-comment">// ç”¨æˆ·åœ¨æ»‘åŠ¨ï¼Œå–æ¶ˆé•¿æŒ‰</span>
      <span class="hljs-title function_">clearTimer</span>()
    }
  }
  <span class="hljs-comment">/**
   * å¼€å§‹é•¿æŒ‰æ£€æµ‹ï¼ˆå…¼å®¹ Touch å’Œ Mouseï¼‰
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">event</span> - è§¦å‘äº‹ä»¶ï¼ˆTouchEvent æˆ– MouseEventï¼‰
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">startPress</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-title function_">clearTimer</span>()
    <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">currentTarget</span>
    <span class="hljs-keyword">if</span> (!target) <span class="hljs-keyword">return</span>

    <span class="hljs-comment">// è®°å½•èµ·å§‹ä½ç½®ï¼ˆä»… touchï¼‰</span>
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'touch'</span>)) {
      <span class="hljs-keyword">const</span> touch = event.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>]
      touchStartX = touch.<span class="hljs-property">clientX</span>
      touchStartY = touch.<span class="hljs-property">clientY</span>

      <span class="hljs-comment">// ç›‘å¬ move å’Œ end</span>
      target.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchmove'</span>, onTouchMove, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
      target.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchend'</span>, endPress, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
      target.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchcancel'</span>, endPress, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
    }

    longPressTimer = <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> rect = target.<span class="hljs-title function_">getBoundingClientRect</span>()
      <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
      <span class="hljs-keyword">const</span> scrollLeft = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollX</span>

      <span class="hljs-comment">// åˆ¤æ–­å…ƒç´ è·ç¦»è§†å£é¡¶éƒ¨çš„è·ç¦»</span>
      <span class="hljs-keyword">const</span> elementTopFromViewport = rect.<span class="hljs-property">top</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GAP</span> = <span class="hljs-number">10</span> <span class="hljs-comment">// æ°”æ³¡ä¸å…ƒç´ çš„é—´è·</span>

      <span class="hljs-keyword">let</span> top, placement

      <span class="hljs-comment">// å¦‚æœå…ƒç´ å¤ªé è¿‘é¡¶éƒ¨ï¼ˆæ¯”å¦‚ &lt; 50pxï¼‰ï¼Œæ°”æ³¡æ”¾ä¸‹é¢</span>
      <span class="hljs-keyword">if</span> (elementTopFromViewport &lt; <span class="hljs-number">50</span>) {
        top = rect.<span class="hljs-property">bottom</span> + scrollTop + <span class="hljs-variable constant_">GAP</span>
        placement = <span class="hljs-string">'bottom'</span>
      } <span class="hljs-keyword">else</span> {
        top = rect.<span class="hljs-property">top</span> + scrollTop - <span class="hljs-number">40</span> - <span class="hljs-variable constant_">GAP</span> <span class="hljs-comment">// æ°”æ³¡é«˜åº¦çº¦ 40px</span>
        placement = <span class="hljs-string">'top'</span>
      }
      <span class="hljs-keyword">const</span> left = rect.<span class="hljs-property">left</span> + scrollLeft + <span class="hljs-number">10</span> <span class="hljs-comment">// æ°´å¹³åç§»</span>
      bubblePosition.<span class="hljs-property">value</span> = { top, left }
      bubblePlacement.<span class="hljs-property">value</span> = placement
      showBubble.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>

      <span class="hljs-comment">// æ¸…ç†äº‹ä»¶ç›‘å¬ï¼ˆé•¿æŒ‰å·²è§¦å‘ï¼‰ åˆ¤å®šæ—¶é—´å†…æœ‰æ»šåŠ¨ï¼Œå°±ä¸è®¤ä¸ºæ˜¯é•¿æŒ‰</span>
      <span class="hljs-title function_">cleanupTouchListeners</span>(target)
    }, <span class="hljs-variable constant_">LONG_PRESS_DELAY</span>)
  }

  <span class="hljs-comment">/**
   * ç»“æŸé•¿æŒ‰ï¼ˆå–æ¶ˆå®šæ—¶å™¨ï¼‰
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">endPress</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">clearTimer</span>()
  }

  <span class="hljs-comment">// æ¸…ç† touch äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">cleanupTouchListeners</span> = (<span class="hljs-params">el</span>) =&gt; {
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchmove'</span>, onTouchMove)
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchend'</span>, endPress)
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchcancel'</span>, endPress)
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">closeBubble</span> = (<span class="hljs-params"/>) =&gt; {
    showBubble.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// çŠ¶æ€</span>
    <span class="hljs-attr">showBubble</span>: showBubble,
    <span class="hljs-attr">bubblePosition</span>: bubblePosition,
    <span class="hljs-attr">bubblePlacement</span>: bubblePlacement,

    <span class="hljs-comment">// æ–¹æ³•</span>
    startPress,
    endPress,
    closeBubble,
  }
}

</code></pre>
<h2 data-id="heading-1">æ°”æ³¡æ¡†å¼¹å‡ºåç‚¹å‡»å¤–éƒ¨å…³é—­æ°”æ³¡</h2>
<ul>
<li>ä¹‹æ‰€ä»¥ä¸ç”¨element-plusè‡ªå¸¦çš„v-clickoutsideæ˜¯å› ä¸ºç§»åŠ¨ç«¯é‡Œæ°”æ³¡æ¡†å‡ºæ¥æ—¶ï¼Œåˆé•¿æŒ‰å¦ä¸€ä¸ªå¯¹è¯æ¡†/æ»šåŠ¨é¡µé¢ï¼Œä¹Ÿè¦å…³é—­æ°”æ³¡æ¡†ã€‚è€Œv-clickoutsideä¸€èˆ¬æ˜¯åœ¨ç›®æ ‡å…ƒç´ å¤–æŒ‰ä¸‹åˆæ¾å¼€æ‰ä¼šè§¦å‘</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/directives/clickOutside.js</span>
<span class="hljs-comment">// element-plusé‡Œè‡ªå¸¦çš„clickoutsideéœ€è¦å¤–éƒ¨æŒ‰ä¸‹å¹¶æ¾å¼€æ‰èƒ½è§¦å‘ï¼Œæœ¬å‘½ä»¤åªç”¨è§¦ç¢°äº†ç»‘å®šå…ƒç´ å¤–éƒ¨å°±ä¼šè§¦å‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWrapper</span> = (<span class="hljs-params">el, handler</span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-comment">// å¦‚æœç‚¹å‡»çš„æ˜¯å…ƒç´ æœ¬èº«æˆ–å…¶å­å…ƒç´ ï¼Œåˆ™ä¸è§¦å‘</span>
    <span class="hljs-keyword">if</span> (el.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>)) {
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-title function_">handler</span>(event)
  }

  <span class="hljs-comment">// åŒæ—¶ç›‘å¬ mouse å’Œ touchï¼ˆå…¼å®¹ç§»åŠ¨ç«¯ï¼‰</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleClick)
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchstart'</span>, handleClick, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleClick)
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchstart'</span>, handleClick)
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> vClickOutside = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> cleanup = <span class="hljs-title function_">handleWrapper</span>(el, binding.<span class="hljs-property">value</span>)
    el.<span class="hljs-property">__clickOutsideCleanup__</span> = cleanup
  },
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-keyword">const</span> cleanup = el.<span class="hljs-property">__clickOutsideCleanup__</span>
    <span class="hljs-keyword">if</span> (cleanup) {
      <span class="hljs-title function_">cleanup</span>()
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">__clickOutsideCleanup__</span>
    }
  },
}

</code></pre>
<h2 data-id="heading-2">åœ¨vueé¡¹ç›®é‡Œä½¿ç”¨</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chat-list"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¶ˆæ¯åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in messages"</span>
      <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"message-item"</span>
      @<span class="hljs-attr">touchstart.prevent</span>=<span class="hljs-string">"startPress($event)"</span>
      @<span class="hljs-attr">mousedown.prevent</span>=<span class="hljs-string">"startPress($event)"</span>
      @<span class="hljs-attr">contextmenu.prevent</span>
      @<span class="hljs-attr">touchend</span>=<span class="hljs-string">"endPress"</span>
      @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"endPress"</span>
      @<span class="hljs-attr">mouseleave</span>=<span class="hljs-string">"endPress"</span>
    &gt;</span>
      {{ item.text }}
      
    <span class="hljs-comment">&lt;!-- æ°”æ³¡æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showBubble"</span>
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"['bubble', bubblePlacement]"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ top: bubblePosition.top + 'px', left: bubblePosition.left + 'px' }"</span>
      <span class="hljs-attr">v-click-outside</span>=<span class="hljs-string">"closeBubble"</span>
      @<span class="hljs-attr">click</span>=<span class="hljs-string">"copyText"</span>
    &gt;</span>
      å¤åˆ¶
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useLongPressBubble } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useLongPressBubble'</span>
<span class="hljs-keyword">import</span> {vClickOutside} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/directives/clickOutside'</span>

<span class="hljs-keyword">const</span> messages = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ä½ å¥½å•Šï¼'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ'</span> },
])

<span class="hljs-keyword">const</span> { showBubble, bubblePosition, bubblePlacement, startPress, endPress, closeBubble } =
  <span class="hljs-title function_">useLongPressBubble</span>()

<span class="hljs-comment">// å…³é—­æ°”æ³¡çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">closeBubble</span> = (<span class="hljs-params"/>) =&gt; {
  showBubble.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
}

<span class="hljs-comment">// å±€éƒ¨æ³¨å†ŒæŒ‡ä»¤ï¼ˆé€‚ç”¨äº &lt;script setup&gt;ï¼‰</span>
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">directives</span>: {
    <span class="hljs-title class_">ClickOutside</span>: vClickOutside,
  },
})

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">copyText</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">clipboard</span>.<span class="hljs-title function_">writeText</span>(textToCopy.<span class="hljs-property">value</span>)
      showBubble.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶å¤±è´¥:'</span>, err)
      showBubble.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"sass"</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.bubble</span> {
    <span class="hljs-attr">--bubble-color</span>: <span class="hljs-number">#000</span>;
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--bubble-color);
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">6px</span> <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    user-select: none;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
    <span class="hljs-comment">/* å½“æœ‰ .top ç±»æ—¶ï¼Œåœ¨åº•éƒ¨å±…ä¸­æ˜¾ç¤ºæœä¸‹çš„ä¸‰è§’å½¢ */</span>
    &amp;<span class="hljs-selector-class">.top</span><span class="hljs-selector-pseudo">::after</span> {
      <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">bottom</span>: -<span class="hljs-number">5px</span>; <span class="hljs-comment">/* æ ¹æ®ä¸‰è§’å½¢é«˜åº¦è°ƒæ•´ï¼Œè¿™é‡Œå‡è®¾é«˜ä¸º10px */</span>
      <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50%</span>);
      <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid transparent;
      <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid transparent;
      <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid <span class="hljs-built_in">var</span>(--bubble-color); 
    }

    <span class="hljs-comment">/* å½“æœ‰ .bottom ç±»æ—¶ï¼Œåœ¨é¡¶éƒ¨å±…ä¸­æ˜¾ç¤ºæœä¸Šçš„ä¸‰è§’å½¢ */</span>
    &amp;<span class="hljs-selector-class">.bottom</span><span class="hljs-selector-pseudo">::after</span> {
      <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">top</span>: -<span class="hljs-number">5px</span>; <span class="hljs-comment">/* æ ¹æ®ä¸‰è§’å½¢é«˜åº¦è°ƒæ•´ */</span>
      <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50%</span>);
      <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid transparent;
      <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid transparent;
      <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid <span class="hljs-built_in">var</span>(--bubble-color);
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">è¡¥å……ï¼š</h3>
<ul>
<li>ä¸Šé¢é‚£ç§å¤åˆ¶æ–‡å­—çš„æ–¹å¼ä¼šå¼¹æˆæƒå¼¹æ¡†ï¼Œå¦‚æœä¸å¤åˆ¶å¤æ‚å†…å®¹ï¼Œç”¨ä¸‹é¢è¿™ç§æ–¹å¼å³å¯</li>
</ul>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">copyToClipboard</span>(text, successCB) {
  const <span class="hljs-selector-tag">textarea</span> = document<span class="hljs-selector-class">.createElement</span>('textarea')
  <span class="hljs-selector-tag">textarea</span><span class="hljs-selector-class">.value</span> = text
  <span class="hljs-selector-tag">textarea</span><span class="hljs-selector-class">.style</span><span class="hljs-selector-class">.position</span> = 'fixed' <span class="hljs-comment">// é¿å…æ»šåŠ¨é—®é¢˜</span>
  document<span class="hljs-selector-class">.body</span><span class="hljs-selector-class">.appendChild</span>(textarea)
  <span class="hljs-selector-tag">textarea</span><span class="hljs-selector-class">.select</span>()
  try {
    const successful = document<span class="hljs-selector-class">.execCommand</span>('copy')
    if (successful) {
      <span class="hljs-built_in">messageOpen</span>('å¤åˆ¶æˆåŠŸ!')
      successCB &amp;&amp; <span class="hljs-built_in">successCB</span>()
    } else {
      <span class="hljs-built_in">messageError</span>('æœ¬è®¾å¤‡ä¸æ”¯æŒå¤åˆ¶!')
    }
  } catch (err) {
    <span class="hljs-built_in">messageError</span>('å¤åˆ¶å¤±è´¥' + err)
  }
  document<span class="hljs-selector-class">.body</span><span class="hljs-selector-class">.removeChild</span>(textarea) <span class="hljs-comment">// æ¸…ç†</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue2é¡¹ç›®éƒ¨ç½²åæ›´æ–°ç‰ˆæœ¬æç¤º]]></title>    <link>https://juejin.cn/post/7571815573932261439</link>    <guid>https://juejin.cn/post/7571815573932261439</guid>    <pubDate>2025-11-13T06:48:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815573932261439" data-draft-id="7571726099690209299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue2é¡¹ç›®éƒ¨ç½²åæ›´æ–°ç‰ˆæœ¬æç¤º"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:48:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Vhen"/> <meta itemprop="url" content="https://juejin.cn/user/1697279002813517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue2é¡¹ç›®éƒ¨ç½²åæ›´æ–°ç‰ˆæœ¬æç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1697279002813517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Vhen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:48:11.000Z" title="Thu Nov 13 2025 06:48:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å°è£…æ’ä»¶VersionPlugin</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NAME</span> = <span class="hljs-string">"cp-version"</span>;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VersionPlugin</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">versionFileName</span>: <span class="hljs-string">'version.json'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼Œç‚¹å‡»æ›´æ–°æœ€æ–°ç‰ˆï¼'</span>,
      ...options,
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span> = process.<span class="hljs-property">env</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">keyName</span>] || <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>.0.0`</span>
  }
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">beforeRun</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-variable constant_">NAME</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before run'</span>)
      <span class="hljs-comment">// ç”Ÿæˆçš„ç‰ˆæœ¬ json æ–‡ä»¶å»ºè®®æ”¾ç½®åœ¨ public æ–‡ä»¶å¤¹ä¸‹</span>
      <span class="hljs-keyword">const</span> filePath = path.<span class="hljs-title function_">resolve</span>(
        __dirname,
        <span class="hljs-string">'../../public'</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">versionFileName</span>,
      )
      <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateFile</span>(
        filePath,
<span class="hljs-string">`{
  "version": "<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.version}</span>",
  "message": "<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.options.message}</span>"
}`</span>,
      )
    })
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-variable constant_">NAME</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'done ...'</span>)
    })
  }
  <span class="hljs-title function_">generateFile</span>(<span class="hljs-params">path, content</span>) {
    fs.<span class="hljs-title function_">writeFileSync</span>(path, content)
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">VersionPlugin</span>


</code></pre>
<h3 data-id="heading-1">é…ç½®æ’ä»¶</h3>
<ul>
<li>vue.config.js</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">VersionPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./src/plugins/versionPlugin'</span>)

  <span class="hljs-attr">configureWebpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> plugins = []
    plugins.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VersionPlugin</span>())
    config.<span class="hljs-property">plugins</span> = [...config.<span class="hljs-property">plugins</span>, ...plugins]
  })

</code></pre>
<h3 data-id="heading-2">å°è£…vueæ’ä»¶</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MessageBox</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">install</span>(<span class="hljs-params">Vue, options</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CP_VERSION</span> = <span class="hljs-string">'CP_VERSION'</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkVersion</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">let</span> preVersion = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">CP_VERSION</span>)
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/newcp/version.json?t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>)
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'@@ä¹‹å‰ç‰ˆæœ¬'</span>, preVersion)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'@@å½“å‰ç‰ˆæœ¬'</span>, data.<span class="hljs-property">version</span>)
      <span class="hljs-keyword">if</span> (data.<span class="hljs-property">version</span> !== preVersion) {
        <span class="hljs-title class_">MessageBox</span>.<span class="hljs-title function_">confirm</span>(data.<span class="hljs-property">message</span>, <span class="hljs-string">'æ¸©é¦¨æç¤º'</span>, {
          <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'æ›´æ–°ç‰ˆæœ¬'</span>,
          <span class="hljs-attr">showClose</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">showCancelButton</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">closeOnClickModal</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
        }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">CP_VERSION</span>, data.<span class="hljs-property">version</span>)
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'@@æ›´æ–°ç‰ˆæœ¬'</span>)
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
        })
      }
    }
    <span class="hljs-title function_">checkVersion</span>()
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">checkVersion</span>()
    }, <span class="hljs-number">10000</span>)
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$checkVersion</span> = checkVersion
  },
}

</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨</h3>
<ul>
<li>main.js</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> checkVersionNotify <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/checkVersionNotify.js'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(checkVersionNotify)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™Nextç³»ç»Ÿæ‰‹æœºä½¿ç”¨Charlesé…ç½®è¯ä¹¦å¹¶æŠ“åŒ…æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7571734313927426082</link>    <guid>https://juejin.cn/post/7571734313927426082</guid>    <pubDate>2025-11-13T07:00:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571734313927426082" data-draft-id="7571751593205973044" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™Nextç³»ç»Ÿæ‰‹æœºä½¿ç”¨Charlesé…ç½®è¯ä¹¦å¹¶æŠ“åŒ…æ•™ç¨‹"/> <meta itemprop="keywords" content="HarmonyOS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:00:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Keya"/> <meta itemprop="url" content="https://juejin.cn/user/870468938379671"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™Nextç³»ç»Ÿæ‰‹æœºä½¿ç”¨Charlesé…ç½®è¯ä¹¦å¹¶æŠ“åŒ…æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468938379671/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Keya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:00:13.000Z" title="Thu Nov 13 2025 07:00:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¸¿è’™Nextç³»ç»Ÿæ‰‹æœºä½¿ç”¨Charlesé…ç½®è¯ä¹¦å¹¶æŠ“åŒ…æ•™ç¨‹</h2>
<h3 data-id="heading-1">å‡†å¤‡å·¥ä½œ</h3>
<p>åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å‡†å¤‡å¥½äº†ä»¥ä¸‹å·¥å…·å’Œç¯å¢ƒï¼š</p>
<ol>
<li><strong>ç¡¬ä»¶è®¾å¤‡</strong>ï¼šä¸€éƒ¨æ­è½½é¸¿è’™Nextç³»ç»Ÿçš„æ‰‹æœºï¼ˆå¦‚åä¸ºMate 60ç³»åˆ—ï¼‰å’Œä¸€å°ç”µè„‘ï¼ˆWindowsã€macOSæˆ–Linuxå‡å¯ï¼‰ã€‚</li>
<li><strong>è½¯ä»¶å·¥å…·</strong>ï¼šCharles ProxyæŠ“åŒ…å·¥å…·ï¼ˆå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬5.0.1åŠä»¥ä¸Šï¼‰ï¼Œå¯ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.charlesproxy.com%2F" target="_blank" title="https://www.charlesproxy.com/" ref="nofollow noopener noreferrer">å®˜ç½‘</a>ä¸‹è½½å®‰è£…ã€‚</li>
<li><strong>ç½‘ç»œç¯å¢ƒ</strong>ï¼šç¡®ä¿æ‰‹æœºå’Œç”µè„‘è¿æ¥åˆ°åŒä¸€ä¸ªå±€åŸŸç½‘ï¼ˆå¯ä»¥æ˜¯åŒä¸€ä¸ªWi-Fiæˆ–ç”µè„‘å…±äº«çƒ­ç‚¹ï¼‰ã€‚</li>
<li><strong>å¼€å‘å·¥å…·</strong>ï¼šå®‰è£…é¸¿è’™å¼€å‘å·¥å…·åŒ…ä¸­çš„hdcå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨ç”µè„‘å’Œæ‰‹æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶å’Œæ‰§è¡Œå‘½ä»¤ã€‚</li>
</ol>
<h3 data-id="heading-2">è¯¦ç»†æ­¥éª¤</h3>
<h4 data-id="heading-3">æ­¥éª¤ä¸€ï¼šå®‰è£…å¹¶é…ç½®Charles</h4>
<ol>
<li><strong>å®‰è£…Charles</strong>ï¼šæŒ‰ç…§å®˜æ–¹æŒ‡å¼•å®‰è£…Charlesåˆ°ä½ çš„ç”µè„‘ä¸Šã€‚å®‰è£…å®Œæˆåï¼Œæ‰“å¼€Charlesï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ä¸»ç•Œé¢ï¼š</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fc3b184c948471f8085580eafdb6d47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622013&amp;x-signature=hoAPDxhuyx6zDYJcJjiNGL6v1x4%3D" alt="CharlesæŠ“åŒ…å·¥å…·ä¸»ç•Œé¢" loading="lazy"/></p>
<ol start="2">
<li>
<p><strong>é…ç½®ä»£ç†ç«¯å£</strong>ï¼šç‚¹å‡»èœå•æ ä¸­çš„"Proxy" -&gt; "Proxy Settings"ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­è®¾ç½®ä»£ç†ç«¯å£ï¼ˆé»˜è®¤æ˜¯8888ï¼‰ï¼Œå¹¶å‹¾é€‰"Enable transparent HTTP proxying"é€‰é¡¹ã€‚</p>
</li>
<li>
<p><strong>é…ç½®SSLä»£ç†</strong>ï¼šç‚¹å‡»"Proxy" -&gt; "SSL Proxy Settings"ï¼Œåœ¨"Include"æ ä¸­æ·»åŠ "*:443"ï¼Œè¿™æ ·Charleså°±èƒ½æ•è·æ‰€æœ‰HTTPSæµé‡äº†ã€‚</p>
</li>
</ol>
<h4 data-id="heading-4">æ­¥éª¤äºŒï¼šå¯¼å‡ºCharlesæ ¹è¯ä¹¦</h4>
<ol>
<li>
<p><strong>å¯¼å‡ºè¯ä¹¦</strong>ï¼šåœ¨Charlesä¸­ï¼Œç‚¹å‡»èœå•æ çš„"Help" -&gt; "SSL Proxying" -&gt; "Save Charles Root Certificate"ï¼Œå°†è¯ä¹¦ä¿å­˜ä¸ºPEMæ ¼å¼åˆ°ç”µè„‘ä¸Šã€‚</p>
</li>
<li>
<p><strong>é€šè¿‡hdcå‘½ä»¤ä¼ è¾“è¯ä¹¦åˆ°æ‰‹æœº</strong>ï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†è¯ä¹¦å‘é€åˆ°æ‰‹æœºçš„Downloadç›®å½•ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">hdc file send /path/to/your/charles.pem /storage/media/100/local/files/Download/charles.pem
</code></pre>
<ol start="3">
<li>
<p>å¯ä»¥æ‰¾ä¸ªå­˜å‚¨æœåŠ¡å™¨, ç„¶åé€šè¿‡æ‰‹æœºæµè§ˆå™¨æ‰“å¼€å¯¹åº”çš„åœ°å€ç›´æ¥è¿›è¡Œä¸‹è½½</p>
<p>3.1 é€šè¿‡vscodeçš„live server ç›´æ¥å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨æ˜¯ä¸€ä¸ªåŠæ³•
3.2 å¯ä»¥é€šè¿‡ç½‘ç»œå…¶ä»–å¹³å°, æ¯”å¦‚ æ–‡å”å”ç­‰ç­‰</p>
</li>
</ol>
<h4 data-id="heading-5">æ­¥éª¤ä¸‰ï¼šåœ¨é¸¿è’™Nextæ‰‹æœºä¸Šå®‰è£…è¯ä¹¦</h4>
<ol>
<li><strong>å¯åŠ¨è¯ä¹¦å®‰è£…å™¨</strong>ï¼šåœ¨ç”µè„‘ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨æ‰‹æœºä¸Šçš„è¯ä¹¦å®‰è£…å™¨ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">hdc shell aa start -a MainAbility -b com.ohos.certmanager
</code></pre>
<ol start="2">
<li><strong>å®‰è£…è¯ä¹¦</strong>ï¼šåœ¨æ‰‹æœºä¸Šï¼ŒæŒ‰ç…§æç¤ºé€‰æ‹©"ä»å­˜å‚¨è®¾å¤‡å®‰è£…"ï¼Œæ‰¾åˆ°å¹¶é€‰æ‹©åˆšæ‰ä¼ è¾“çš„charles.pemè¯ä¹¦æ–‡ä»¶ã€‚å®‰è£…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šæç¤º"æ­¤CAæ ¹ç›®å½•è¯ä¹¦ä¸å—ä¿¡ä»»"ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œç»§ç»­å®‰è£…å³å¯ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b14276bd8d5479fb9d382d2dc1712db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622013&amp;x-signature=T8AdvI6%2BmFhUsUqyXOaBJhw%2FEPQ%3D" alt="Charlesè¯ä¹¦å®‰è£…æ­¥éª¤" loading="lazy"/></p>
<h4 data-id="heading-6">æ­¥éª¤å››ï¼šé…ç½®æ‰‹æœºä»£ç†</h4>
<ol>
<li><strong>è¿›å…¥WLANè®¾ç½®</strong>ï¼šåœ¨æ‰‹æœºä¸Šæ‰“å¼€"è®¾ç½®" -&gt; "WLAN"ï¼Œæ‰¾åˆ°å¹¶é•¿æŒ‰å½“å‰è¿æ¥çš„Wi-Fiç½‘ç»œï¼Œé€‰æ‹©"ä¿®æ”¹ç½‘ç»œ"ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/043850ce04594c9ebea6e9eaa90b37e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622013&amp;x-signature=JYjJG7N5sKzGdFQNXmtDX4hdYU8%3D" alt="é¸¿è’™Nextç³»ç»Ÿè®¾ç½®ç•Œé¢" loading="lazy"/></p>
<ol start="2">
<li><strong>è®¾ç½®æ‰‹åŠ¨ä»£ç†</strong>ï¼šåœ¨ç½‘ç»œè®¾ç½®é¡µé¢ä¸­ï¼Œç‚¹å‡»"ä»£ç†"ï¼Œé€‰æ‹©"æ‰‹åŠ¨"ã€‚è¾“å…¥ç”µè„‘çš„IPåœ°å€å’ŒCharlesçš„ä»£ç†ç«¯å£ï¼ˆé»˜è®¤8888ï¼‰ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a32e4ed64e246a19699aeac546ff0db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622013&amp;x-signature=3VaXH399pla6r4yP3aYC1fF3LTA%3D" alt="é¸¿è’™æ‰‹æœºWiFiä»£ç†é…ç½®" loading="lazy"/></p>
<h4 data-id="heading-7">æ­¥éª¤äº”ï¼šå¼€å§‹æŠ“åŒ…</h4>
<ol>
<li>
<p><strong>å¯åŠ¨CharlesæŠ“åŒ…</strong>ï¼šåœ¨Charlesä¸­ç‚¹å‡»å·¥å…·æ ä¸Šçš„"å¼€å§‹å½•åˆ¶"æŒ‰é’®ï¼ˆçº¢è‰²åœ†ç‚¹ï¼‰ï¼Œå¼€å§‹æ•è·ç½‘ç»œè¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•æŠ“åŒ…</strong>ï¼šåœ¨æ‰‹æœºä¸Šæ‰“å¼€æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ï¼Œè®¿é—®ä¸€ä¸ªHTTPSç½‘ç«™ã€‚æ­¤æ—¶ï¼ŒCharlesåº”è¯¥èƒ½æ˜¾ç¤ºæ•è·åˆ°çš„ç½‘ç»œè¯·æ±‚ï¼ŒåŒ…æ‹¬è¯·æ±‚å¤´ã€å“åº”å†…å®¹ç­‰è¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/539efc0e400b4749805c716de87a0cf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622013&amp;x-signature=%2BkHZE28oHTUTKO%2BBQAgg9YcqV1k%3D" alt="HTTPSæŠ“åŒ…æˆåŠŸç¤ºä¾‹" loading="lazy"/></p>
<h3 data-id="heading-8">æ‰©å±•å†…å®¹ï¼šé¸¿è’™å®‰å…¨æ¨¡å‹ä¸æŠ“åŒ…åˆè§„</h3>
<p>é¸¿è’™Nextç³»ç»Ÿé‡‡ç”¨äº†å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤ä½“ç³»ï¼ŒåŒ…æ‹¬åº”ç”¨æ²™ç®±éš”ç¦»ã€è¯ä¹¦é“¾éªŒè¯ã€æƒé™ç²¾ç»†åŒ–ç®¡ç†ç­‰æœºåˆ¶ã€‚åœ¨è¿›è¡ŒæŠ“åŒ…æ“ä½œæ—¶ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>è¯ä¹¦ä¿¡ä»»æœºåˆ¶</strong>ï¼šé¸¿è’™Nexté»˜è®¤ä¸ä¿¡ä»»ç”¨æˆ·å®‰è£…çš„CAè¯ä¹¦ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨å°†Charlesè¯ä¹¦å®‰è£…åˆ°ç³»ç»Ÿçš„"å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„"å­˜å‚¨åŒºã€‚å³ä½¿å¦‚æ­¤ï¼Œéƒ¨åˆ†ç³»ç»Ÿåº”ç”¨å’Œé«˜å®‰å…¨æ€§åº”ç”¨å¯èƒ½ä»ç„¶ä¼šæ‹’ç»ä½¿ç”¨ç”¨æˆ·å®‰è£…çš„è¯ä¹¦ã€‚</p>
</li>
<li>
<p><strong>åº”ç”¨ç½‘ç»œå®‰å…¨é…ç½®</strong>ï¼šé¸¿è’™åº”ç”¨å¯ä»¥é€šè¿‡é…ç½®network_security_config.xmlæ–‡ä»¶æ¥é™åˆ¶å¯¹ç”¨æˆ·è¯ä¹¦çš„ä¿¡ä»»ã€‚å¦‚æœé‡åˆ°æ— æ³•æŠ“åŒ…çš„åº”ç”¨ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹å…¶ç½‘ç»œå®‰å…¨é…ç½®ï¼Œæ·»åŠ å¯¹ç”¨æˆ·è¯ä¹¦çš„ä¿¡ä»»ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">network-security-config</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">base-config</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">trust-anchors</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">certificates</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"system"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">certificates</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"user"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">trust-anchors</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">base-config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">network-security-config</span>&gt;</span>
</code></pre>
<ol start="3">
<li><strong>éšç§ä¿æŠ¤æ³¨æ„äº‹é¡¹</strong>ï¼šæŠ“åŒ…æ“ä½œå¯èƒ½ä¼šè·å–åˆ°æ•æ„Ÿçš„ä¸ªäººä¿¡æ¯ï¼Œå¦‚ç™»å½•å‡­è¯ã€æ”¯ä»˜ä¿¡æ¯ç­‰ã€‚è¯·ç¡®ä¿ä½ çš„æŠ“åŒ…è¡Œä¸ºç¬¦åˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œä»…å¯¹è‡ªå·±å¼€å‘çš„åº”ç”¨æˆ–è·å¾—æˆæƒçš„åº”ç”¨è¿›è¡ŒæŠ“åŒ…æµ‹è¯•ã€‚</li>
</ol>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>è¯ä¹¦æ ¼å¼è¦æ±‚</strong>ï¼šé¸¿è’™Nextç³»ç»Ÿä»…æ”¯æŒPEMæ ¼å¼çš„è¯ä¹¦ï¼Œä¸æ”¯æŒCRTæ ¼å¼ã€‚å¦‚æœä½ çš„è¯ä¹¦æ˜¯CRTæ ¼å¼ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸ºPEMæ ¼å¼ã€‚</p>
</li>
<li>
<p><strong>hdcå‘½ä»¤ä½¿ç”¨</strong>ï¼šä½¿ç”¨hdcå‘½ä»¤æ—¶ï¼Œç¡®ä¿æ‰‹æœºå·²å¼€å¯"å¼€å‘è€…æ¨¡å¼"å’Œ"USBè°ƒè¯•"åŠŸèƒ½ã€‚å¦‚æœé‡åˆ°"è®¾å¤‡æœªè¿æ¥"çš„é”™è¯¯ï¼Œå¯ä»¥å°è¯•é‡å¯adbæœåŠ¡æˆ–é‡æ–°æ’æ‹”USBçº¿ã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼šä¸åŒç‰ˆæœ¬çš„é¸¿è’™Nextç³»ç»Ÿå¯èƒ½åœ¨è¯ä¹¦å®‰è£…å’Œä»£ç†è®¾ç½®æ­¥éª¤ä¸Šç•¥æœ‰å·®å¼‚ã€‚æœ¬æ–‡æ¡£åŸºäºé¸¿è’™Next 5.1.0.150ç‰ˆæœ¬ç¼–å†™ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯å…¶ä»–ç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦é€‚å½“è°ƒæ•´æ­¥éª¤ã€‚</p>
</li>
<li>
<p><strong>ç½‘ç»œä»£ç†å†²çª</strong>ï¼šå¦‚æœä½ çš„ç½‘ç»œç¯å¢ƒä¸­å­˜åœ¨å…¶ä»–ä»£ç†æœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´CharlesæŠ“åŒ…å¤±è´¥ã€‚å»ºè®®åœ¨æŠ“åŒ…æœŸé—´å…³é—­å…¶ä»–ä»£ç†è½¯ä»¶æˆ–é…ç½®ã€‚</p>
</li>
</ol>
<h3 data-id="heading-10">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-11">é—®é¢˜ä¸€ï¼šæ— æ³•è®¿é—®chls.pro/sslä¸‹è½½è¯ä¹¦</h4>
<p>å¦‚æœä½ åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­è®¿é—®<a href="https://link.juejin.cn?target=http%3A%2F%2Fchls.pro%2Fssl%25E6%2597%25B6%25E6%2597%25A0%25E6%25B3%2595%25E4%25B8%258B%25E8%25BD%25BD%25E8%25AF%2581%25E4%25B9%25A6%25EF%25BC%258C%25E5%258F%25AF%25E4%25BB%25A5%25E5%25B0%259D%25E8%25AF%2595%25E4%25BB%25A5%25E4%25B8%258B%25E8%25A7%25A3%25E5%2586%25B3%25E6%2596%25B9%25E6%25B3%2595%25EF%25BC%259A" target="_blank" title="http://chls.pro/ssl%E6%97%B6%E6%97%A0%E6%B3%95%E4%B8%8B%E8%BD%BD%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B0%9D%E8%AF%95%E4%BB%A5%E4%B8%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A" ref="nofollow noopener noreferrer">chls.pro/sslæ—¶æ— æ³•ä¸‹è½½è¯ä¹¦ï¼Œâ€¦</a></p>
<ol>
<li>ç¡®ä¿æ‰‹æœºå·²æ­£ç¡®é…ç½®ä»£ç†ï¼Œå¹¶ä¸”Charlesæ­£åœ¨è¿è¡Œã€‚</li>
<li>åœ¨Charlesä¸­ï¼Œç‚¹å‡»"Help" -&gt; "SSL Proxying" -&gt; "Install Charles Root Certificate on a Mobile Device or Remote Browser"ï¼Œç„¶åæŒ‰ç…§æç¤ºæ“ä½œã€‚</li>
<li>å¦‚æœä»ç„¶æ— æ³•ä¸‹è½½ï¼Œå¯ä»¥æ‰‹åŠ¨ä»ç”µè„‘å¯¼å‡ºè¯ä¹¦ï¼Œå†é€šè¿‡hdcå‘½ä»¤ä¼ è¾“åˆ°æ‰‹æœºã€‚</li>
</ol>
<h4 data-id="heading-12">é—®é¢˜äºŒï¼šå®‰è£…è¯ä¹¦åä»æ— æ³•æŠ“å–HTTPSè¯·æ±‚</h4>
<p>å¦‚æœå·²ç»å®‰è£…äº†Charlesè¯ä¹¦ï¼Œä½†ä»ç„¶æ— æ³•æŠ“å–HTTPSè¯·æ±‚ï¼Œå¯èƒ½æ˜¯ä»¥ä¸‹åŸå› å¯¼è‡´ï¼š</p>
<ol>
<li>
<p><strong>åº”ç”¨ä½¿ç”¨äº†è¯ä¹¦å›ºå®šï¼ˆCertificate Pinningï¼‰</strong>ï¼šéƒ¨åˆ†åº”ç”¨ä¼šå›ºå®šæœåŠ¡å™¨è¯ä¹¦ï¼Œæ‹’ç»ä½¿ç”¨ç”¨æˆ·å®‰è£…çš„CAè¯ä¹¦ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å¯¹åº”ç”¨è¿›è¡Œåç¼–è¯‘ï¼Œç§»é™¤è¯ä¹¦å›ºå®šé€»è¾‘ï¼Œæˆ–è€…ä½¿ç”¨Fridaç­‰å·¥å…·åœ¨è¿è¡Œæ—¶ç»•è¿‡è¯ä¹¦éªŒè¯ã€‚</p>
</li>
<li>
<p><strong>Charlesé…ç½®é”™è¯¯</strong>ï¼šæ£€æŸ¥Charlesçš„SSL Proxy Settingsï¼Œç¡®ä¿å·²æ·»åŠ "*:443"è§„åˆ™ï¼Œå¹¶ä¸”"Enable SSL proxying"é€‰é¡¹å·²å‹¾é€‰ã€‚</p>
</li>
<li>
<p><strong>è¯ä¹¦æœªæ­£ç¡®å®‰è£…</strong>ï¼šè¿›å…¥æ‰‹æœºçš„"è®¾ç½®" -&gt; "å®‰å…¨" -&gt; "åŠ å¯†ä¸å‡­æ®" -&gt; "ä¿¡ä»»çš„å‡­æ®"ï¼Œæ£€æŸ¥Charlesè¯ä¹¦æ˜¯å¦åœ¨"ç”¨æˆ·"æ ‡ç­¾ä¸‹ï¼Œå¹¶ä¸”çŠ¶æ€ä¸º"å·²å¯ç”¨"ã€‚</p>
</li>
</ol>
<h4 data-id="heading-13">é—®é¢˜ä¸‰ï¼šæŠ“åŒ…æ—¶æ‰‹æœºæ— æ³•ä¸Šç½‘</h4>
<p>å¦‚æœé…ç½®ä»£ç†åæ‰‹æœºæ— æ³•ä¸Šç½‘ï¼Œå¯èƒ½æ˜¯ä»¥ä¸‹åŸå› ï¼š</p>
<ol>
<li>
<p><strong>ä»£ç†è®¾ç½®é”™è¯¯</strong>ï¼šæ£€æŸ¥ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç”µè„‘å’Œæ‰‹æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚</p>
</li>
<li>
<p><strong>é˜²ç«å¢™æ‹¦æˆª</strong>ï¼šæ£€æŸ¥ç”µè„‘çš„é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿Charlesçš„ç«¯å£ï¼ˆé»˜è®¤8888ï¼‰æ²¡æœ‰è¢«é˜²ç«å¢™é˜»æ­¢ã€‚</p>
</li>
<li>
<p><strong>Charlesæœªæˆæƒ</strong>ï¼šå½“æ‰‹æœºç¬¬ä¸€æ¬¡è¿æ¥åˆ°Charlesæ—¶ï¼Œç”µè„‘ä¸Šä¼šå¼¹å‡ºæˆæƒçª—å£ï¼Œéœ€è¦ç‚¹å‡»"Allow"å…è®¸è¿æ¥ã€‚å¦‚æœä¸å°å¿ƒç‚¹å‡»äº†"Deny"ï¼Œå¯ä»¥åœ¨Charlesçš„"Proxy" -&gt; "Access Control Settings"ä¸­æ·»åŠ æ‰‹æœºçš„IPåœ°å€åˆ°å…è®¸åˆ—è¡¨ã€‚</p>
</li>
</ol>
<h3 data-id="heading-14">ç»“è¯­</h3>
<p>é€šè¿‡æœ¬æ–‡çš„æ­¥éª¤ï¼Œä½ åº”è¯¥å·²ç»æˆåŠŸåœ¨é¸¿è’™Nextç³»ç»Ÿæ‰‹æœºä¸Šé…ç½®å¥½äº†Charlesè¯ä¹¦å¹¶å®ç°äº†HTTPSæŠ“åŒ…ã€‚æŠ“åŒ…æŠ€æœ¯æ˜¯åº”ç”¨å¼€å‘å’Œè°ƒè¯•çš„é‡è¦å·¥å…·ï¼Œä½†åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„éµå®ˆæ³•å¾‹æ³•è§„å’Œéšç§ä¿æŠ¤åŸåˆ™ã€‚</p>
<p>é¸¿è’™Nextç³»ç»Ÿçš„å®‰å…¨æœºåˆ¶åœ¨ä¸æ–­å¼ºåŒ–ï¼Œæœªæ¥å¯èƒ½ä¼šå¯¹æŠ“åŒ…è¡Œä¸ºæ–½åŠ æ›´å¤šé™åˆ¶ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­å­¦ä¹ å’Œé€‚åº”æ–°çš„æŠ€æœ¯å˜åŒ–ï¼ŒåŒæ—¶å§‹ç»ˆå°†ç”¨æˆ·éšç§å’Œæ•°æ®å®‰å…¨æ”¾åœ¨é¦–ä½ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ åœ¨é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p>
<hr/>
<p>End</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ·±æ‹·è´å…¨è§£æï¼šä»æ ˆä¸å †å†…å­˜æœºåˆ¶åˆ°å®‰å…¨å¯¹è±¡å¤åˆ¶å®è·µ]]></title>    <link>https://juejin.cn/post/7571837786250887214</link>    <guid>https://juejin.cn/post/7571837786250887214</guid>    <pubDate>2025-11-13T06:48:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571837786250887214" data-draft-id="7571837786250821678" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ·±æ‹·è´å…¨è§£æï¼šä»æ ˆä¸å †å†…å­˜æœºåˆ¶åˆ°å®‰å…¨å¯¹è±¡å¤åˆ¶å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,JSON"/> <meta itemprop="datePublished" content="2025-11-13T06:48:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ·±æ‹·è´å…¨è§£æï¼šä»æ ˆä¸å †å†…å­˜æœºåˆ¶åˆ°å®‰å…¨å¯¹è±¡å¤åˆ¶å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:48:33.000Z" title="Thu Nov 13 2025 06:48:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œå¯¹è±¡çš„å¤åˆ¶æ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•å´ææ˜“å‡ºé”™çš„é—®é¢˜ã€‚å¾ˆå¤šåˆå­¦è€…ç”šè‡³ä¸­çº§å¼€å‘è€…éƒ½æ›¾å› â€œæµ…æ‹·è´â€å¯¼è‡´æ•°æ®æ„å¤–ä¿®æ”¹è€Œé™·å…¥è°ƒè¯•å›°å¢ƒã€‚æœ¬æ–‡å°†ä»åº•å±‚å†…å­˜æœºåˆ¶å‡ºå‘ï¼Œç³»ç»Ÿè®²è§£ <strong>æ ˆå†…å­˜ä¸å †å†…å­˜çš„åŒºåˆ«</strong>ã€<strong>å®ƒä»¬å¦‚ä½•ååŒå·¥ä½œ</strong>ï¼Œå¹¶æ·±å…¥å‰–æ <strong>ä»€ä¹ˆæ˜¯çœŸæ­£çš„æ·±æ‹·è´</strong>ï¼Œä»¥åŠå¦‚ä½•åœ¨å®é™…å¼€å‘ä¸­å®‰å…¨åœ°å®ç°å®ƒã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ ˆå†…å­˜ vs å †å†…å­˜ï¼šç¨‹åºè¿è¡Œçš„â€œéª¨æ¶â€ä¸â€œè¡€è‚‰â€</h2>
<p>è¦çœŸæ­£ç†è§£æ·±æ‹·è´ï¼Œå¿…é¡»å…ˆäº†è§£ JavaScriptï¼ˆä»¥åŠå…¶ä»–é«˜çº§è¯­è¨€ï¼‰æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œå†…å­˜ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š<strong>æ ˆï¼ˆStackï¼‰</strong> å’Œ <strong>å †ï¼ˆHeapï¼‰</strong> ã€‚</p>
<h3 data-id="heading-2">1. æ ˆå†…å­˜ï¼šè‡ªåŠ¨ç®¡ç†çš„â€œå‚¨ç‰©æ¶â€</h3>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>éµå¾ª <strong>å…ˆè¿›åå‡ºï¼ˆLIFO, Last In First Outï¼‰</strong> åŸåˆ™ã€‚</li>
<li>å­˜å‚¨ <strong>å‡½æ•°è°ƒç”¨ä¸Šä¸‹æ–‡</strong>ã€<strong>å±€éƒ¨å˜é‡</strong> å’Œ <strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼ˆå¦‚ <code>number</code>ã€<code>string</code>ã€<code>boolean</code>ã€<code>undefined</code>ã€<code>null</code>ã€<code>symbol</code>ã€<code>bigint</code>ï¼‰ã€‚</li>
<li>å†…å­˜åˆ†é…å’Œé‡Šæ”¾ç”±ç³»ç»Ÿ <strong>è‡ªåŠ¨å®Œæˆ</strong>ï¼Œæ•ˆç‡æé«˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå…¶å±€éƒ¨å˜é‡ä¼šè¢«å‹å…¥æ ˆä¸­ï¼›</li>
<li>å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œæ•´ä¸ªæ ˆå¸§è¢«å¼¹å‡ºï¼Œå†…å­˜è‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">foo</span>()</span> {
  <span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;        <span class="hljs-comment">// a å­˜åœ¨æ ˆä¸­</span>
  <span class="hljs-keyword">let</span> b = <span class="hljs-string">"hello"</span>;   <span class="hljs-comment">// b ä¹Ÿå­˜åœ¨æ ˆä¸­</span>
}
foo(); <span class="hljs-comment">// æ‰§è¡Œç»“æŸåï¼Œa å’Œ b è‡ªåŠ¨é”€æ¯</span>
</code></pre>
</blockquote>
<h3 data-id="heading-3">2. å †å†…å­˜ï¼šæ‰‹åŠ¨ï¼ˆæˆ–åŠè‡ªåŠ¨ï¼‰ç®¡ç†çš„â€œå¤§ä»“åº“â€</h3>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç”¨äºå­˜å‚¨ <strong>å¤æ‚æ•°æ®ç»“æ„</strong>ï¼Œå¦‚å¯¹è±¡ï¼ˆObjectï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰ç­‰ã€‚</li>
<li>å†…å­˜åˆ†é…çµæ´»ï¼Œä½†è®¿é—®é€Ÿåº¦ç•¥æ…¢äºæ ˆã€‚</li>
<li>åœ¨ JavaScript ä¸­ï¼Œå †å†…å­˜ç”± <strong>åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰</strong> ç®¡ç†ï¼Œè€Œéç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<ul>
<li>å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå°±å­˜åœ¨äºå †ä¸­ï¼›</li>
<li>åªæœ‰å½“æ²¡æœ‰ä»»ä½•å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨æ‰ä¼šå°†å…¶å›æ”¶ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">let</span> user = { name: <span class="hljs-string">"Alice"</span>, age: <span class="hljs-number">25</span> };
<span class="hljs-comment">// å¯¹è±¡ { name: "Alice", age: 25 } å­˜åœ¨äºå †ä¸­</span>
<span class="hljs-comment">// å˜é‡ userï¼ˆåœ¨æ ˆä¸­ï¼‰ä¿å­˜çš„æ˜¯è¯¥å¯¹è±¡çš„å†…å­˜åœ°å€ï¼ˆå¼•ç”¨ï¼‰</span>
</code></pre>
</blockquote>
<hr/>
<h2 data-id="heading-4">äºŒã€æ ˆä¸å †çš„åä½œï¼šå¼•ç”¨æœºåˆ¶æ­ç§˜</h2>
<p>JavaScript ä¸­çš„å¯¹è±¡æ“ä½œæœ¬è´¨ä¸Šæ˜¯ <strong>é€šè¿‡å¼•ç”¨è¿›è¡Œçš„</strong>ã€‚è¿™ç§è®¾è®¡æå¤§æå‡äº†æ€§èƒ½ï¼Œä½†ä¹Ÿå¸¦æ¥äº†â€œå…±äº«å‰¯ä½œç”¨â€çš„é£é™©ã€‚</p>
<h3 data-id="heading-5">å…³é”®å…³ç³»ï¼š</h3>
<ol>
<li><strong>æ ˆå­˜å¼•ç”¨ï¼Œå †å­˜å®ä½“</strong><br/>
å½“ä½ å£°æ˜ä¸€ä¸ªå¯¹è±¡å˜é‡æ—¶ï¼Œ<strong>å˜é‡æœ¬èº«ï¼ˆå¼•ç”¨ï¼‰å­˜å‚¨åœ¨æ ˆä¸­</strong>ï¼Œè€Œ<strong>å¯¹è±¡çš„å®é™…å†…å®¹å­˜å‚¨åœ¨å †ä¸­</strong>ã€‚</li>
<li><strong>èµ‹å€¼å³å¤åˆ¶å¼•ç”¨</strong><br/>
å¦‚æœä½ å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œå®é™…ä¸Šåªæ˜¯å¤åˆ¶äº†æ ˆä¸­çš„å¼•ç”¨åœ°å€ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜ä½ç½®ã€‚</li>
</ol>
<p>â— å±é™©ç¤ºä¾‹ï¼ˆæµ…æ‹·è´é™·é˜±ï¼‰ï¼š</p>
<blockquote>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">users</span> = [
  { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">'å¼ ä¸‰'</span> ,hometown:<span class="hljs-string">'åŒ—äº¬'</span>},
  { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">'æå››'</span> ,hometown:<span class="hljs-string">'ä¸Šæµ·'</span>},
  { id: <span class="hljs-number">3</span>, name: <span class="hljs-string">'ç‹äº”'</span> ,hometown:<span class="hljs-string">'å¹¿å·'</span>}
]<span class="hljs-comment">;</span>

const  <span class="hljs-attr">data</span> = users<span class="hljs-comment">; </span>

<span class="hljs-attr">data.hobbies</span> = [<span class="hljs-string">'ç¯®çƒ'</span>,<span class="hljs-string">'è¶³çƒ'</span>,<span class="hljs-string">'è·‘æ­¥'</span>]<span class="hljs-comment">;</span>
console.log(data, users)<span class="hljs-comment">;</span>
</code></pre>
</blockquote>
<p>æ­¤æ—¶è¿è¡Œä»£ç ç»“æœå¦‚ä¸‹ï¼š</p>
<p>Â dataå†…å®¹çš„ä¿®æ”¹åŒæ—¶å‘ç”Ÿåœ¨userså’Œdataä¸Š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbab76d804984bc293903f4b56b15b01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763621313&amp;x-signature=P%2FRlfFXP8sNEI1ANEK526st5NX8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸè§£è€¦</strong><br/>
æ ˆä¸­å˜é‡çš„é”€æ¯ï¼ˆå¦‚å‡½æ•°ç»“æŸï¼‰ä¸ä¼šç«‹å³åˆ é™¤å †ä¸­çš„å¯¹è±¡ï¼Œåªæœ‰å½“æ‰€æœ‰å¼•ç”¨éƒ½æ¶ˆå¤±åï¼Œå¯¹è±¡æ‰ä¼šè¢« GC å›æ”¶ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<h3 data-id="heading-7">å®šä¹‰</h3>
<blockquote>
<p><strong>æ·±æ‹·è´ï¼ˆDeep Copyï¼‰</strong> æ˜¯æŒ‡ï¼š<strong>é€’å½’åœ°å¤åˆ¶å¯¹è±¡åŠå…¶æ‰€æœ‰åµŒå¥—å±æ€§ï¼Œåœ¨å †å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ã€å®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡å‰¯æœ¬</strong>ã€‚æ–°å¯¹è±¡ä¸åŸå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨å…³è”ã€‚</p>
</blockquote>
<h3 data-id="heading-8">ç›®æ ‡</h3>
<ul>
<li>ä¿®æ”¹å‰¯æœ¬ <strong>ä¸å½±å“åŸå¯¹è±¡</strong>ï¼›</li>
<li>å‰¯æœ¬æ‹¥æœ‰ <strong>å®Œæ•´çš„æ•°æ®ç»“æ„å‰¯æœ¬</strong>ï¼ŒåŒ…æ‹¬åµŒå¥—å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€å®ç°æ·±æ‹·è´çš„å¸¸ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-10">æ–¹æ³• 1ï¼šJSON åºåˆ—åŒ– + ååºåˆ—åŒ–ï¼ˆæœ€ç®€å•ä½†æœ‰é™åˆ¶ï¼‰</h3>
<p>è¿™æ˜¯å‰ç«¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„â€œä¼ªæ·±æ‹·è´â€æŠ€å·§ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">users</span>; 
<span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">data</span>;  
<span class="hljs-selector-tag">users</span> = <span class="hljs-selector-attr">[  { id: 1, name: <span class="hljs-string">'å¼ ä¸‰'</span> ,hometown:<span class="hljs-string">'åŒ—äº¬'</span>},  { id: 2, name: <span class="hljs-string">'æå››'</span> ,hometown:<span class="hljs-string">'ä¸Šæµ·'</span>},  { id: 3, name: <span class="hljs-string">'ç‹äº”'</span> ,hometown:<span class="hljs-string">'å¹¿å·'</span>}]</span>; 

<span class="hljs-comment">// æ·±æ‹·è´ï¼Œæ˜¯æŒ‡åœ¨å †å†…å­˜ä¸­ï¼Œé‡æ–°åˆ†é…ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ‹·è´çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å¼•ç”¨åœ°å€ã€‚</span>
<span class="hljs-comment">// åºåˆ—åŒ– ï¼šæŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸² JSON.stringify()</span>
<span class="hljs-comment">// ååºåˆ—åŒ– ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ JSON.parse()</span>
<span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">data</span> = <span class="hljs-selector-tag">JSON</span><span class="hljs-selector-class">.parse</span>(JSON.<span class="hljs-built_in">stringify</span>(users));

<span class="hljs-selector-tag">data</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[<span class="hljs-string">'hobbies'</span>]</span> = <span class="hljs-selector-attr">[<span class="hljs-string">'ç¯®çƒ'</span>,<span class="hljs-string">'è¶³çƒ'</span>,<span class="hljs-string">'è·‘æ­¥'</span>]</span>;
<span class="hljs-selector-tag">console</span><span class="hljs-selector-class">.log</span>(data, users);
</code></pre>
<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b87f65fcd78448eb20729166295ef47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763621313&amp;x-signature=UNa5%2BOMFyCB5g6j8MMzzi1YXqVM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ä»£ç ç®€æ´ï¼Œä¸€è¡Œæå®šï¼›</li>
<li>å¯¹çº¯ JSON å…¼å®¹çš„æ•°æ®ç»“æ„éå¸¸æœ‰æ•ˆã€‚</li>
</ul>
<p>âŒ <strong>è‡´å‘½ç¼ºé™·</strong>ï¼š</p>

































<table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å‡½æ•°ä¸¢å¤±</strong></td><td><code>function</code> ä¼šè¢«å¿½ç•¥ï¼ˆ<code>JSON.stringify</code> ä¸å¤„ç†å‡½æ•°ï¼‰</td></tr><tr><td><strong>undefined ä¸¢å¤±</strong></td><td>å±æ€§å€¼ä¸º <code>undefined</code> çš„å­—æ®µä¼šè¢«åˆ é™¤</td></tr><tr><td><strong>Symbol é”®ä¸¢å¤±</strong></td><td>Symbol ä½œä¸º key æ— æ³•è¢«åºåˆ—åŒ–</td></tr><tr><td><strong>å¾ªç¯å¼•ç”¨å´©æºƒ</strong></td><td>å¯¹è±¡è‡ªå¼•ç”¨ä¼šå¯¼è‡´ <code>JSON.stringify</code> æŠ¥é”™</td></tr><tr><td><strong>Date å˜å­—ç¬¦ä¸²</strong></td><td><code>new Date()</code> ä¼šè¢«è½¬ä¸º ISO å­—ç¬¦ä¸²ï¼Œä¸å†æ˜¯ Date å¯¹è±¡</td></tr><tr><td><strong>RegExpã€Error ç­‰ç‰¹æ®Šå¯¹è±¡å¤±æ•ˆ</strong></td><td>è½¬ä¸ºæ™®é€šå¯¹è±¡æˆ–ç©ºå¯¹è±¡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">æ–¹æ³• 2ï¼šæ‰‹å†™é€’å½’æ·±æ‹·è´ï¼ˆæ›´å¥å£®ï¼‰</h3>
<p>ä¸ºäº†å…‹æœ JSON æ–¹æ³•çš„å±€é™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®ç°ä¸€ä¸ªæ”¯æŒæ›´å¤šç±»å‹çš„æ·±æ‹·è´å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰‹å†™é€’å½’æ·±æ‹·è´</span>
users = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> ,<span class="hljs-attr">hometown</span>:<span class="hljs-string">'åŒ—äº¬'</span>},
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span> ,<span class="hljs-attr">hometown</span>:<span class="hljs-string">'ä¸Šæµ·'</span>},
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç‹äº”'</span> ,<span class="hljs-attr">hometown</span>:<span class="hljs-string">'å¹¿å·'</span>}
];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepClone</span>(<span class="hljs-params">obj, hash = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()</span>) {
  <span class="hljs-comment">// å¤„ç† null å’Œéå¯¹è±¡ç±»å‹</span>
  <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">"object"</span>) <span class="hljs-keyword">return</span> obj;

  <span class="hljs-comment">// é˜²æ­¢å¾ªç¯å¼•ç”¨</span>
  <span class="hljs-keyword">if</span> (hash.<span class="hljs-title function_">has</span>(obj)) <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">get</span>(obj);

  <span class="hljs-comment">// å¤„ç† Date</span>
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(obj);

  <span class="hljs-comment">// å¤„ç† RegExp</span>
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(obj.<span class="hljs-property">source</span>, obj.<span class="hljs-property">flags</span>);

  <span class="hljs-comment">// å¤„ç† Array å’Œ Object</span>
  <span class="hljs-keyword">const</span> cloned = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : {};

  <span class="hljs-comment">// è®°å½•å¼•ç”¨ï¼Œé˜²æ­¢å¾ªç¯</span>
  hash.<span class="hljs-title function_">set</span>(obj, cloned);

  <span class="hljs-comment">// é€’å½’æ‹·è´æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬ Symbolï¼‰</span>
  <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
    cloned[key] = <span class="hljs-title function_">deepClone</span>(obj[key], hash);
  });

  <span class="hljs-keyword">return</span> cloned;
}
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">deepClone</span>(users);
data[<span class="hljs-number">0</span>][<span class="hljs-string">'hobbies'</span>] = [<span class="hljs-string">'ç¯®çƒ'</span>,<span class="hljs-string">'è¶³çƒ'</span>,<span class="hljs-string">'è·‘æ­¥'</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data, users);
</code></pre>
<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1d49e180ea247de8bb92adf6681656b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763621313&amp;x-signature=FEg8l%2FU20%2BHd2c5HL1xBVc%2Bf2qw%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ”¯æŒ <code>Date</code>ã€<code>RegExp</code>ã€<code>Symbol</code> é”®ï¼›</li>
<li>èƒ½å¤„ç†å¾ªç¯å¼•ç”¨ï¼ˆé€šè¿‡ <code>WeakMap</code> ç¼“å­˜å·²æ‹·è´å¯¹è±¡ï¼‰ï¼›</li>
<li>ä¿ç•™å‡½æ•°ï¼ˆè‹¥éœ€è¦å¯æ‰©å±•ï¼‰ï¼›</li>
<li>æ›´æ¥è¿‘â€œçœŸæ­£â€çš„æ·±æ‹·è´ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ä½¿ç”¨æˆç†Ÿåº“ï¼ˆå¦‚ Lodash çš„ <code>_.cloneDeep</code>ï¼‰ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">æ–¹æ³• 3ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰</h3>
<ul>
<li><strong>Lodash</strong>: <code>_.cloneDeep(value)</code></li>
<li><strong>jQuery</strong>: <code>$.extend(true, {}, obj)</code>ï¼ˆå·²ä¸æ¨èï¼‰</li>
<li><strong>structuredClone()</strong> ï¼ˆç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼‰</li>
</ul>
<h4 data-id="heading-13">æ–°æ ‡å‡†ï¼š<code>structuredClone()</code></h4>
<p>ES2022 å¼•å…¥äº†å…¨å±€å‡½æ•° <code>structuredClone()</code>ï¼Œä¸“ä¸ºæ·±æ‹·è´è®¾è®¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">copy</span> = structuredClone(original)<span class="hljs-comment">;</span>
</code></pre>
<p>æ”¯æŒï¼š</p>
<ul>
<li>å¾ªç¯å¼•ç”¨</li>
<li><code>Date</code>ã€<code>RegExp</code>ã€<code>Map</code>ã€<code>Set</code>ã€<code>ArrayBuffer</code> ç­‰</li>
<li><code>undefined</code>ã€<code>Symbol</code>ï¼ˆéƒ¨åˆ†é™åˆ¶ï¼‰</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä»ä¸æ”¯æŒå‡½æ•°ã€DOM èŠ‚ç‚¹ç­‰ï¼›</li>
<li>éœ€è¦è¾ƒæ–°æµè§ˆå™¨ï¼ˆChrome 98+ï¼ŒNode.js 17+ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-14">äº”ã€æ€»ç»“ï¼šä½•æ—¶ç”¨å“ªç§æ‹·è´ï¼Ÿ</h2>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ³•</th></tr></thead><tbody><tr><td>ç®€å•å¯¹è±¡ï¼Œæ— å‡½æ•°/æ—¥æœŸ/å¾ªç¯å¼•ç”¨</td><td><code>JSON.parse(JSON.stringify(obj))</code></td></tr><tr><td>éœ€è¦å…¼å®¹æ—§ç¯å¢ƒï¼Œä¸”ç»“æ„å¤æ‚</td><td>æ‰‹å†™é€’å½’ or Lodash <code>_.cloneDeep</code></td></tr><tr><td>ç°ä»£é¡¹ç›®ï¼Œè¿½æ±‚æ ‡å‡†ä¸æ€§èƒ½</td><td><code>structuredClone()</code></td></tr><tr><td>ä»…éœ€ç¬¬ä¸€å±‚æ‹·è´ï¼ˆæµ…æ‹·è´ï¼‰</td><td><code>{...obj}</code> æˆ– <code>Object.assign({}, obj)</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">å…­ã€ç»“è¯­</h2>
<p>æ·±æ‹·è´ä¸ä»…æ˜¯è¯­æ³•æŠ€å·§ï¼Œæ›´æ˜¯å¯¹ <strong>å†…å­˜æ¨¡å‹</strong> å’Œ <strong>æ•°æ®æ‰€æœ‰æƒ</strong> çš„æ·±åˆ»ç†è§£ã€‚æŒæ¡æ ˆä¸å †çš„åä½œæœºåˆ¶ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ä»£ç ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¯·æ ¹æ®æ•°æ®ç»“æ„çš„å¤æ‚åº¦å’Œè¿è¡Œç¯å¢ƒï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ‹·è´ç­–ç•¥ã€‚</p>
<blockquote>
<p><strong>è®°ä½</strong>ï¼š<br/>
æµ…æ‹·è´æ˜¯â€œå…±ç”¨ä¸€æœ¬æ—¥è®°â€ï¼Œ<br/>
æ·±æ‹·è´æ˜¯â€œèªŠæŠ„ä¸€æœ¬æ–°æ—¥è®°â€ã€‚<br/>
åˆ«è®©åˆ«äººçš„æ¶‚æ”¹ï¼Œæ¯äº†ä½ çš„åŸå§‹è®°å½•ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ JavaScript çš„ Array.prototype.map() æ–¹æ³•åŠå…¶ç»å…¸é™·é˜±ï¼šä»åŸç†åˆ°é¢è¯•å®æˆ˜]]></title>    <link>https://juejin.cn/post/7571830282850107443</link>    <guid>https://juejin.cn/post/7571830282850107443</guid>    <pubDate>2025-11-13T06:52:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571830282850107443" data-draft-id="7571829822340775987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ JavaScript çš„ Array.prototype.map() æ–¹æ³•åŠå…¶ç»å…¸é™·é˜±ï¼šä»åŸç†åˆ°é¢è¯•å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-13T06:52:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ JavaScript çš„ Array.prototype.map() æ–¹æ³•åŠå…¶ç»å…¸é™·é˜±ï¼šä»åŸç†åˆ°é¢è¯•å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:52:51.000Z" title="Thu Nov 13 2025 06:52:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œ<code>Array.prototype.map()</code> æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨ã€ä¹Ÿæœ€å®¹æ˜“â€œè¯¯ç”¨â€çš„æ•°ç»„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒç®€æ´ä¼˜é›…ï¼Œä½†è‹¥å¯¹å…¶åº•å±‚æœºåˆ¶ç¼ºä¹æ·±å…¥ç†è§£ï¼Œå¾ˆå®¹æ˜“åœ¨çœ‹ä¼¼ç®€å•çš„ä»£ç ä¸­è¸©å‘â€”â€”å°¤å…¶æ˜¯ä¸ <code>parseInt</code> ç»“åˆä½¿ç”¨æ—¶çš„ç»å…¸é¢è¯•é¢˜ <code>[1, 2, 3].map(parseInt)</code>ã€‚æœ¬æ–‡å°†ä» <strong>map çš„æ ¸å¿ƒæœºåˆ¶</strong>ã€<strong>parseInt çš„è¡Œä¸ºç‰¹æ€§</strong>ã€<strong>NaN ä¸ç±»å‹åˆ¤æ–­</strong>ã€<strong>JavaScript åŒ…è£…ç±»åŸç†</strong>ï¼Œä¸€ç›´åˆ° <strong>å­—ç¬¦ä¸²æ“ä½œä¸ç¼–ç ç»†èŠ‚</strong>ï¼Œå…¨é¢å‰–æè¿™ä¸€çŸ¥è¯†ç‚¹ï¼Œå¹¶æä¾›æœ€ä½³å®è·µå»ºè®®ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€<code>map()</code> æ–¹æ³•çš„æ ¸å¿ƒæœºåˆ¶</h2>
<h3 data-id="heading-2">1.1 åŸºæœ¬åŠŸèƒ½ä¸è¯­æ³•</h3>
<p><code>map()</code> æ˜¯ ES5 å¼•å…¥ï¼ˆå¸¸è¢«è¯¯è®¤ä¸ºæ˜¯ ES6 æ–°å¢ï¼‰çš„æ•°ç»„å®ä¾‹æ–¹æ³•ï¼Œç”¨äº<strong>åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„</strong>ï¼Œå…¶å…ƒç´ æ˜¯åŸæ•°ç»„æ¯ä¸ªå…ƒç´ ç»è¿‡å›è°ƒå‡½æ•°å¤„ç†åçš„è¿”å›å€¼ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">const</span> newArray = arr.<span class="hljs-built_in">map</span>(callbackFn(element, index, <span class="hljs-built_in">array</span>), thisArg);
</code></pre>
<ul>
<li>
<p><strong><code>callbackFn</code></strong>ï¼šä¸ºæ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>element</code>ï¼šå½“å‰å…ƒç´ </li>
<li><code>index</code>ï¼šå½“å‰ç´¢å¼•</li>
<li><code>array</code>ï¼šåŸæ•°ç»„æœ¬èº«</li>
</ul>
</li>
<li>
<p><strong><code>thisArg</code>ï¼ˆå¯é€‰ï¼‰</strong> ï¼šæŒ‡å®šå›è°ƒå‡½æ•°å†…éƒ¨çš„ <code>this</code> å€¼</p>
</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>map()</code> <strong>ä¸ä¼šä¿®æ”¹åŸæ•°ç»„</strong>ï¼Œå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ª<strong>å…¨æ–°æ•°ç»„</strong>ã€‚å¦‚æœä¸éœ€è¦è¿”å›å€¼ï¼Œåº”ä½¿ç”¨ <code>forEach</code> æˆ– <code>for...of</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-3">1.2 å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-ini" lang="ini">// ç¤ºä¾‹1ï¼šå¹³æ–¹æ¯ä¸ªå…ƒç´ 
const <span class="hljs-attr">numbers</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>]<span class="hljs-comment">;</span>
const <span class="hljs-attr">squares</span> = numbers.map(x =&gt; x * x)<span class="hljs-comment">; // [1, 16, 81]</span>

// ç¤ºä¾‹2ï¼šå¯¹è±¡è½¬æ¢
const <span class="hljs-attr">users</span> = [{ name: <span class="hljs-string">'Alice'</span> }, { name: <span class="hljs-string">'Bob'</span> }]<span class="hljs-comment">;</span>
const <span class="hljs-attr">names</span> = users.map(u =&gt; u.name)<span class="hljs-comment">; // ['Alice', 'Bob']</span>

// ç¤ºä¾‹3ï¼šé€šç”¨æ€§ï¼ˆå¯ç”¨äºç±»æ•°ç»„å¯¹è±¡ï¼‰
const <span class="hljs-attr">arrayLike</span> = { length: <span class="hljs-number">2</span>, <span class="hljs-number">0</span>: <span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>: <span class="hljs-string">'b'</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">result</span> = Array.prototype.map.call(arrayLike, x =&gt; x.toUpperCase())<span class="hljs-comment">;</span>
// <span class="hljs-section">['A', 'B']</span>
</code></pre>
<h3 data-id="heading-4">1.3 ç¨€ç–æ•°ç»„ä¸ç©ºæ§½å¤„ç†</h3>
<p><code>map()</code> <strong>ä¸ä¼šéå†ç¨€ç–æ•°ç»„ä¸­çš„ç©ºæ§½ï¼ˆempty slotsï¼‰</strong> ï¼Œä¸”ç»“æœæ•°ç»„ä¹Ÿä¼šä¿ç•™è¿™äº›ç©ºæ§½ï¼š</p>
<pre><code class="hljs language-c" lang="c">console.<span class="hljs-built_in">log</span>([<span class="hljs-number">1</span>, , <span class="hljs-number">3</span>].<span class="hljs-built_in">map</span>(x =&gt; x * <span class="hljs-number">2</span>));
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Visit 0</span>
<span class="hljs-comment">// Visit 2</span>
<span class="hljs-comment">// [2, empty, 6]</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">äºŒã€<code>parseInt()</code> çš„è¡Œä¸ºç‰¹æ€§ä¸é™·é˜±</h2>
<h3 data-id="heading-6">2.1 <code>parseInt(string, radix)</code> çš„è§£æè§„åˆ™</h3>
<ul>
<li>
<p><code>string</code>ï¼šè¦è§£æçš„å­—ç¬¦ä¸²</p>
</li>
<li>
<p><code>radix</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¿›åˆ¶åŸºæ•°ï¼ŒèŒƒå›´ <strong>2â€“36</strong></p>
<ul>
<li>
<p>è‹¥ <code>radix</code> ä¸º <code>0</code> æˆ–æœªä¼ ï¼Œåˆ™æ ¹æ®å­—ç¬¦ä¸²å†…å®¹è‡ªåŠ¨æ¨æ–­ï¼š</p>
<ul>
<li><code>"0x..."</code> â†’ åå…­è¿›åˆ¶</li>
<li><code>"0..."</code>ï¼ˆæ—§è§„èŒƒï¼‰â†’ å…«è¿›åˆ¶ï¼ˆç°ä»£ JS å·²åºŸå¼ƒï¼‰</li>
<li>å¦åˆ™é»˜è®¤åè¿›åˆ¶</li>
</ul>
</li>
<li>
<p>è‹¥ <code>radix</code> æ— æ•ˆï¼ˆå¦‚ <code>1</code>ã€<code>-1</code>ã€<code>37</code>ï¼‰ï¼Œè¿”å› <code>NaN</code></p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">2.2 è¿›åˆ¶è½¬æ¢å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'0xF'</span>, <span class="hljs-number">16</span>);   <span class="hljs-comment">// 15ï¼ˆåå…­è¿›åˆ¶ï¼‰</span>
<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'10'</span>, <span class="hljs-number">8</span>);     <span class="hljs-comment">// 8ï¼ˆå…«è¿›åˆ¶ï¼‰</span>
<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'8'</span>, <span class="hljs-number">8</span>);      <span class="hljs-comment">// NaNï¼ˆå…«è¿›åˆ¶æ— æ•°å­— 8ï¼‰</span>
<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'1.9'</span>, <span class="hljs-number">10</span>);   <span class="hljs-comment">// 1ï¼ˆåªå–æ•´æ•°éƒ¨åˆ†ï¼‰</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€ç»å…¸é¢è¯•é¢˜æ·±åº¦è§£æï¼š<code>[1, 2, 3].map(parseInt)</code></h2>
<h3 data-id="heading-9">3.1 é—®é¢˜ç°è±¡</h3>
<pre><code class="hljs language-arduino" lang="arduino">console.<span class="hljs-built_in">log</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-built_in">map</span>(parseInt)); <span class="hljs-comment">// [1, NaN, NaN]</span>
</code></pre>
<p><strong>é¢„æœŸç»“æœ</strong>ï¼š<code>[1, 2, 3]</code><br/>
<strong>å®é™…ç»“æœ</strong>ï¼š<code>[1, NaN, NaN]</code></p>
<h3 data-id="heading-10">3.2 æ ¹æºåˆ†æ</h3>
<p><strong><code>map()</code></strong> è°ƒç”¨å›è°ƒæ—¶ä¼šä¼ é€’ <strong>ä¸‰ä¸ªå‚æ•°</strong>ï¼š <strong><code>(element, index, array)</code></strong> ã€‚<br/>
è€Œ <strong><code>parseInt</code></strong> æ¥æ”¶ <strong>ä¸¤ä¸ªå‚æ•°</strong>ï¼š <strong><code>(string, radix)</code></strong> ã€‚</p>
<p>å› æ­¤ï¼Œ <strong><code>[1, 2, 3].map(parseInt)</code></strong> ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">parseInt(1, 0, <span class="hljs-section">[1,2,3]</span>)  // <span class="hljs-attr">radix</span> = <span class="hljs-number">0</span> â†’ é»˜è®¤åè¿›åˆ¶ â†’ <span class="hljs-number">1</span>
parseInt(2, 1, <span class="hljs-section">[1,2,3]</span>)  // <span class="hljs-attr">radix</span> = <span class="hljs-number">1</span> â†’ éæ³• â†’ NaN
parseInt(3, 2, <span class="hljs-section">[1,2,3]</span>)  // <span class="hljs-attr">radix</span> = <span class="hljs-number">2</span> â†’ äºŒè¿›åˆ¶æ— æ³•è¡¨ç¤º <span class="hljs-number">3</span> â†’ NaN
</code></pre>
<blockquote>
<p>ğŸ” å…³é”®ç‚¹ï¼š<strong><code>index</code> è¢«å½“ä½œäº† <code>radix</code>ï¼</strong></p>
</blockquote>
<h3 data-id="heading-11">3.3 æ­£ç¡®è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-12">âœ… æ–¹æ¡ˆ1ï¼šæ˜¾å¼å°è£…å›è°ƒå‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript">[<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> <span class="hljs-built_in">parseInt</span>(str, <span class="hljs-number">10</span>)); <span class="hljs-comment">// [1, 2, 3]</span>
</code></pre>
<h4 data-id="heading-13">âœ… æ–¹æ¡ˆ2ï¼šä½¿ç”¨ <code>Number</code> æ„é€ å‡½æ•°ï¼ˆæ›´ç®€æ´ï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>]</span><span class="hljs-selector-class">.map</span>(Number); <span class="hljs-comment">// [1, 2, 3]</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ æ³¨æ„ï¼š<code>Number</code> ä¼šè§£ææµ®ç‚¹æ•°å’Œç§‘å­¦è®¡æ•°æ³•ï¼Œè€Œ <code>parseInt</code> åªå–æ•´æ•°éƒ¨åˆ†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">å››ã€ç‰¹æ®Šæ•°å€¼ï¼š<code>NaN</code> ä¸ <code>Infinity</code></h2>
<h3 data-id="heading-15">4.1 <code>NaN</code> çš„ç‰¹æ€§</h3>
<ul>
<li>
<p><strong>å«ä¹‰</strong>ï¼šNot-a-Numberï¼Œè¡¨ç¤ºæ— æ•ˆçš„æ•°å€¼è¿ç®—ç»“æœ</p>
</li>
<li>
<p><strong>ç±»å‹</strong>ï¼š<code>typeof NaN === 'number'</code></p>
</li>
<li>
<p><strong>äº§ç”Ÿåœºæ™¯</strong>ï¼š</p>
<ul>
<li><code>0 / 0</code></li>
<li><code>Math.sqrt(-1)</code></li>
<li><code>parseInt('abc')</code></li>
<li><code>Number('xyz')</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">4.2 å¦‚ä½•æ­£ç¡®åˆ¤æ–­ <code>NaN</code>ï¼Ÿ</h3>
<p>ç”±äº <code>NaN !== NaN</code>ï¼Œä¸èƒ½ç”¨ <code>==</code> æˆ– <code>===</code> åˆ¤æ–­ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//  é”™è¯¯æ–¹å¼</span>
<span class="hljs-keyword">if</span> (value === <span class="hljs-title class_">NaN</span>) { ... }

<span class="hljs-comment">//  æ­£ç¡®æ–¹å¼</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isNaN</span>(value)) { ... }
<span class="hljs-comment">// æˆ–ï¼ˆä¸æ¨èï¼Œå› ä¼šå°è¯•è½¬æ¢ç±»å‹ï¼‰</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(value)) { ... }
</code></pre>
<blockquote>
<p>ğŸ“Œ <code>Number.isNaN()</code> æ˜¯ ES6 æ–°å¢ï¼Œåªå¯¹çœŸæ­£çš„ <code>NaN</code> è¿”å› <code>true</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-17">4.3 <code>Infinity</code> çš„äº§ç”Ÿ</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">1</span> / <span class="hljs-number">0</span>        <span class="hljs-comment">// Infinity</span>
<span class="hljs-number">-1</span> / <span class="hljs-number">0</span>       <span class="hljs-comment">// -Infinity</span>
<span class="hljs-keyword">typeof</span> Infinity <span class="hljs-comment">// "number"</span>
</code></pre>
<hr/>
<h2 data-id="heading-18">äº”ã€JavaScript åŒ…è£…ç±»æœºåˆ¶ï¼šä¸ºä»€ä¹ˆ <code>"hello".length</code> èƒ½å·¥ä½œï¼Ÿ</h2>
<h3 data-id="heading-19">5.1 è‡ªåŠ¨è£…ç®±ï¼ˆAuto-boxingï¼‰</h3>
<p>è™½ç„¶å­—ç¬¦ä¸²æ˜¯åŸå§‹ç±»å‹ï¼ˆprimitiveï¼‰ï¼Œä½†å½“ä½ è°ƒç”¨å…¶æ–¹æ³•æ—¶ï¼ŒJS å¼•æ“ä¼š<strong>ä¸´æ—¶åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">"hello"</span>.<span class="hljs-property">length</span>
<span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello"</span>)).<span class="hljs-property">length</span>
<span class="hljs-comment">// ä½¿ç”¨åç«‹å³é”€æ¯</span>
</code></pre>
<h3 data-id="heading-20">5.2 ä¸‰æ­¥è¿‡ç¨‹</h3>
<ol>
<li>åˆ›å»ºåŒ…è£…å¯¹è±¡ï¼ˆå¦‚ <code>new String(str)</code>ï¼‰</li>
<li>è°ƒç”¨æ–¹æ³•æˆ–è®¿é—®å±æ€§</li>
<li>é”€æ¯å¯¹è±¡ï¼Œä¿æŒåŸå§‹å€¼ä¸å¯å˜</li>
</ol>
<blockquote>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŸºæœ¬ç±»å‹ä¹Ÿèƒ½æ‹¥æœ‰æ–¹æ³•â€”â€”è¿™æ˜¯ JavaScript é¢å‘å¯¹è±¡è®¾è®¡çš„ä½“ç°ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-21">å…­ã€å­—ç¬¦ä¸²æ“ä½œä¸ UTF-16 ç¼–ç é™·é˜±</h2>
<h3 data-id="heading-22">6.1 <code>length</code> å±æ€§çš„å±€é™æ€§</h3>
<p>JS ä½¿ç”¨ <strong>UTF-16 ç¼–ç </strong>ï¼Œ<code>length</code> è¿”å›çš„æ˜¯<strong>ç¼–ç å•å…ƒæ•°é‡</strong>ï¼Œè€Œéå­—ç¬¦æ•°ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"cafÃ©"</span>.length        <span class="hljs-comment">// 4ï¼ˆÃ© å  1 ä¸ªå•å…ƒï¼‰</span>
<span class="hljs-string">"ğŸ‘©â€ğŸ’»"</span>.length         <span class="hljs-comment">// 5ï¼ˆemoji ç”±å¤šä¸ªä»£ç†å¯¹ç»„æˆï¼‰</span>
</code></pre>
<h3 data-id="heading-23">6.2 å®‰å…¨éå†å­—ç¬¦ä¸²çš„æ–¹æ³•</h3>
<p>ä½¿ç”¨ <code>Array.from()</code> æˆ– <code>for...of</code> è·å–çœŸå®å­—ç¬¦ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Array.<span class="hljs-keyword">from</span>(<span class="hljs-string">"ğŸ‘©â€ğŸ’»"</span>).length <span class="hljs-comment">// 1</span>
[...<span class="hljs-string">"ğŸ‘©â€ğŸ’»"</span>].length        <span class="hljs-comment">// 1</span>
</code></pre>
<h3 data-id="heading-24">6.3 <code>slice()</code> vs <code>substring()</code></h3>




















<table><thead><tr><th>æ–¹æ³•</th><th>æ”¯æŒè´Ÿæ•°ç´¢å¼•ï¼Ÿ</th><th>å‚æ•°é¡ºåºé”™è¯¯å¤„ç†</th></tr></thead><tbody><tr><td><code>slice(a,b)</code></td><td>Â æ˜¯</td><td>è¿”å›ç©ºå­—ç¬¦ä¸²</td></tr><tr><td><code>substring(a,b)</code></td><td>Â å¦ï¼ˆè½¬ä¸º0ï¼‰</td><td>è‡ªåŠ¨äº¤æ¢ a å’Œ b</td></tr></tbody></table>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-string">"hello"</span>.slice(<span class="hljs-number">-3</span>, <span class="hljs-number">-1</span>)     // <span class="hljs-string">"ll"</span>
<span class="hljs-string">"hello"</span>.<span class="hljs-keyword">sub</span><span class="hljs-built_in">string</span>(<span class="hljs-number">-3</span>, <span class="hljs-number">-1</span>) // <span class="hljs-string">""</span>ï¼ˆç­‰ä»·äº <span class="hljs-keyword">sub</span><span class="hljs-built_in">string</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)ï¼‰
</code></pre>
<blockquote>
<p>âœ… æ¨èä½¿ç”¨ <code>slice</code>ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ä¸”è¡Œä¸ºæ›´å¯é¢„æµ‹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-25">ä¸ƒã€é¢è¯•è€ƒå¯Ÿé‡ç‚¹ä¸å­¦ä¹ å»ºè®®</h2>
<h3 data-id="heading-26">7.1 é¢è¯•å®˜æƒ³è€ƒå¯Ÿä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>æ˜¯å¦ç†è§£ <strong>é«˜é˜¶å‡½æ•°çš„å‚æ•°ä¼ é€’æœºåˆ¶</strong></li>
<li>æ˜¯å¦æŒæ¡ <strong>API çš„åº•å±‚è¡Œä¸º</strong>ï¼ˆè€Œéä»…ä¼šç”¨ï¼‰</li>
<li>æ˜¯å¦å…·å¤‡ <strong>è°ƒè¯•å¤æ‚é€»è¾‘çš„èƒ½åŠ›</strong></li>
<li>æ˜¯å¦äº†è§£ <strong>JavaScript ç±»å‹ç³»ç»Ÿä¸åŒ…è£…ç±»</strong></li>
</ul>
<h3 data-id="heading-27">7.2 å­¦ä¹ å»ºè®®</h3>
<ol>
<li><strong>ç²¾è¯» MDN æ–‡æ¡£</strong>ï¼šå®˜æ–¹æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å‚è€ƒ</li>
<li><strong>åŠ¨æ‰‹å®éªŒ</strong>ï¼šç”¨ <code>console.log</code> æ‰“å°æ¯ä¸€æ­¥ç»“æœ</li>
<li><strong>æ€»ç»“æˆæ–‡</strong>ï¼šå†™åšå®¢æˆ–ç¬”è®°åŠ æ·±è®°å¿†</li>
<li><strong>åˆ»æ„ç»ƒä¹ </strong>ï¼šåå¤æ€è€ƒç±»ä¼¼ <code>[].map(parseInt)</code> çš„é™·é˜±</li>
</ol>
<hr/>
<h2 data-id="heading-28">å…«ã€ç»“è¯­</h2>
<p><code>Array.prototype.map()</code> çœ‹ä¼¼ç®€å•ï¼Œå´è•´å«äº† JavaScript ç±»å‹ç³»ç»Ÿã€å‡½æ•°è°ƒç”¨æœºåˆ¶ã€æ•°å€¼è§£æè§„åˆ™ç­‰å¤šé‡çŸ¥è¯†ã€‚æŒæ¡å®ƒï¼Œä¸ä»…æ˜¯ä¸ºäº†å†™å‡ºæ­£ç¡®çš„ä»£ç ï¼Œæ›´æ˜¯ä¸ºäº†ç†è§£è¿™é—¨è¯­è¨€çš„è®¾è®¡å“²å­¦ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ çœ‹åˆ° <code>[1, 2, 3].map(parseInt)</code> æ—¶ï¼Œå¸Œæœ›ä½ èƒ½è‡ªä¿¡åœ°è¯´å‡ºï¼šâ€œæˆ‘çŸ¥é“å®ƒä¸ºä»€ä¹ˆè¿”å› <code>[1, NaN, NaN]</code>ï¼Œå¹¶ä¸”çŸ¥é“ä¸‰ç§ä¿®å¤æ–¹æ³•ã€‚â€</p>
<blockquote>
<p>ğŸŒŸ <strong>è®°ä½</strong>ï¼šçœŸæ­£çš„é«˜æ‰‹ï¼Œä¸æ˜¯ä¸ä¼šçŠ¯é”™ï¼Œè€Œæ˜¯çŸ¥é“é”™è¯¯ä¸ºä½•å‘ç”Ÿï¼Œå¹¶èƒ½ä¼˜é›…åœ°é¿å…å®ƒã€‚</p>
</blockquote>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray%2Fmap" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" ref="nofollow noopener noreferrer">MDN: Array.prototype.map()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fecma262%2F" title="https://tc39.es/ecma262/" target="_blank" ref="nofollow noopener noreferrer">ECMAScript è§„èŒƒ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[elï¼Œjsï¼Œjstlä»€ä¹ˆæ—¶å€™è¿›è¡Œæ··ç”¨]]></title>    <link>https://juejin.cn/post/7571731181198835748</link>    <guid>https://juejin.cn/post/7571731181198835748</guid>    <pubDate>2025-11-13T06:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571731181198835748" data-draft-id="7571742703534620708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="elï¼Œjsï¼Œjstlä»€ä¹ˆæ—¶å€™è¿›è¡Œæ··ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jokerå­¦java"/> <meta itemprop="url" content="https://juejin.cn/user/3006480498043673"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            elï¼Œjsï¼Œjstlä»€ä¹ˆæ—¶å€™è¿›è¡Œæ··ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3006480498043673/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jokerå­¦java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:54:10.000Z" title="Thu Nov 13 2025 06:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ <strong>JSPï¼ˆJavaServer Pagesï¼‰</strong> å¼€å‘ä¸­ï¼Œ<strong>ELè¡¨è¾¾å¼ï¼ˆExpression Languageï¼‰</strong> ã€<strong>JSTLï¼ˆJSP Standard Tag Libraryï¼‰</strong> å’Œ <strong>JavaScriptï¼ˆJSï¼‰</strong> å¯ä»¥<strong>æœ‰é™åº¦åœ°ç©¿æ’ä½¿ç”¨</strong>ï¼Œä½†éœ€è¦éµå¾ªå„è‡ªçš„è¿è¡Œç¯å¢ƒå’Œä½œç”¨åŸŸè§„åˆ™ã€‚ä»¥ä¸‹æ˜¯å…·ä½“åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼š</p>
<h2 data-id="heading-0"><strong>1. ELè¡¨è¾¾å¼ ä¸ JSTL çš„ç©¿æ’ä½¿ç”¨</strong></h2>
<h3 data-id="heading-1"><strong>âœ… å®Œå…¨å…¼å®¹ï¼Œæ— ç¼è¡”æ¥</strong></h3>
<p>ELè¡¨è¾¾å¼é€šå¸¸åµŒå¥—åœ¨JSTLæ ‡ç­¾ä¸­ï¼Œç”¨äºåŠ¨æ€è®¡ç®—å€¼æˆ–åˆ¤æ–­æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">Jsp
<span class="hljs-comment">&lt;!-- ç¤ºä¾‹1ï¼šELåœ¨JSTLä¸­æ§åˆ¶å¾ªç¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">"${requestScope.userList}"</span> <span class="hljs-attr">var</span>=<span class="hljs-string">"user"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>${user.name} (è§’è‰²: ${user.role})<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¤ºä¾‹2ï¼šELåœ¨JSTLä¸­åšæ¡ä»¶åˆ¤æ–­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"${not empty sessionScope.currentUser}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">fmt:message</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"welcome.message"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>ELÂ <code>${}</code>Â å¯ä»¥ç›´æ¥è¯»å–JSTLæ ‡ç­¾ä¸­å®šä¹‰çš„å˜é‡ï¼ˆå¦‚Â <code>var="user"</code>ï¼‰ã€‚</li>
<li>JSTLæ ‡ç­¾å±æ€§ï¼ˆå¦‚Â <code>&lt;c:if test="..."&gt;</code>ï¼‰å¿…é¡»ä½¿ç”¨ELè¡¨è¾¾å¼ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>2. ELè¡¨è¾¾å¼ ä¸ JavaScript çš„ç©¿æ’ä½¿ç”¨</strong></h2>
<h3 data-id="heading-3"><strong>âœ… å•å‘ä¼ é€’ï¼ˆEL â†’ JSï¼‰</strong></h3>
<p>ELè¡¨è¾¾å¼åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“åç”Ÿæˆé™æ€å†…å®¹ï¼Œå¯åµŒå…¥åˆ°JSä»£ç ä¸­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">Jsp
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// å°†ELå˜é‡ä¼ é€’ç»™JSï¼ˆå­—ç¬¦ä¸²éœ€è½¬ä¹‰ï¼ï¼‰</span>
  <span class="hljs-keyword">const</span> username = <span class="hljs-string">"${fn:escapeXml(sessionScope.user.name)}"</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰ç”¨æˆ·:"</span>, username); <span class="hljs-comment">// æœåŠ¡å™¨æ¸²æŸ“åå˜ä¸ºï¼šconst username = "John";</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><strong>å¿…é¡»è½¬ä¹‰</strong>ï¼šä½¿ç”¨Â <code>fn:escapeXml</code>Â æˆ–Â <code>JSON.stringify</code>Â é˜²æ­¢XSSæ”»å‡»ã€‚</li>
<li><strong>ä»…é™ç®€å•æ•°æ®</strong>ï¼šå¤æ‚å¯¹è±¡éœ€è½¬ä¸ºJSONå­—ç¬¦ä¸²ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">Jsp
  &lt;%@ taglib <span class="hljs-attr">prefix</span>=<span class="hljs-string">"fn"</span> uri=<span class="hljs-string">"http://java.sun.com/jsp/jstl/functions"</span> %&gt;
  &lt;script&gt;
    const <span class="hljs-attr">userData</span> = <span class="hljs-variable">${not empty user ? fn:escapeXml(user.toJson()) : 'null'}</span><span class="hljs-comment">;</span>
  &lt;/script&gt;
</code></pre>
<h3 data-id="heading-4"><strong>âŒ JSå˜é‡ä¸èƒ½åå‘ä¼ é€’åˆ°EL</strong></h3>
<pre><code class="hljs language-xml" lang="xml">Jsp
<span class="hljs-comment">&lt;!-- é”™è¯¯ç¤ºä¾‹ï¼šJSå˜é‡æ— æ³•åœ¨æœåŠ¡å™¨ç«¯ELä¸­ä½¿ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">let</span> jsVar = <span class="hljs-string">"hello"</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>${jsVar}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> <span class="hljs-comment">&lt;!-- è¾“å‡ºä¸ºç©ºï¼ŒELæ— æ³•è¯»å–JSå˜é‡ --&gt;</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šELåœ¨æœåŠ¡å™¨ç«¯è§£æï¼ŒJSåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä¸¤è€…ç”Ÿå‘½å‘¨æœŸéš”ç¦»ã€‚</p>
<h2 data-id="heading-5"><strong>3. JSTL ä¸ JavaScript çš„ç©¿æ’ä½¿ç”¨</strong></h2>
<h3 data-id="heading-6"><strong>âœ… åŠ¨æ€ç”ŸæˆJSä»£ç ï¼ˆéœ€è°¨æ…ï¼‰</strong></h3>
<p>JSTLå¯åœ¨æœåŠ¡å™¨ç«¯ç”ŸæˆJSä»£ç å—ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">Jsp
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// JSTLæ§åˆ¶JSä»£ç ç”Ÿæˆ</span>
  &lt;<span class="hljs-attr">c</span>:<span class="hljs-keyword">if</span> test=<span class="hljs-string">"${isAdmin}"</span>&gt;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç®¡ç†å‘˜æ¨¡å¼å·²å¯ç”¨"</span>);
  &lt;/<span class="hljs-attr">c</span>:<span class="hljs-keyword">if</span>&gt;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆçš„JSä»£ç æ˜¯é™æ€çš„ï¼ˆæœåŠ¡å™¨æ¸²æŸ“åå›ºå®šï¼‰ï¼Œæ— æ³•å“åº”å‰ç«¯äº‹ä»¶ã€‚</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­ç”Ÿæˆå¤§é‡JSä»£ç ï¼ˆæ€§èƒ½é—®é¢˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7"><strong>âŒ JSä¸èƒ½ç›´æ¥è°ƒç”¨JSTLæ ‡ç­¾</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">JavaScript</span>
<span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šJSä¸­æ— æ³•è°ƒç”¨JSTL</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reloadData</span>(<span class="hljs-params"/>) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">c:import</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"/api/data"</span> /&gt;</span></span> <span class="hljs-comment">// æ— æ•ˆï¼</span>
}
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šç”¨AJAXè¯·æ±‚æ›¿ä»£JSTLçš„åŠ¨æ€å†…å®¹åŠ è½½ã€‚</p>
<h2 data-id="heading-8"><strong>4. ä¸‰è€…çš„æ··åˆä½¿ç”¨åœºæ™¯</strong></h2>
<h3 data-id="heading-9"><strong>åœºæ™¯ï¼šåŠ¨æ€è¡¨æ ¼æ¸²æŸ“ï¼ˆåç«¯æ•°æ® + å‰ç«¯äº¤äº’ï¼‰</strong></h3>
<pre><code class="hljs language-xml" lang="xml">Jsp
<span class="hljs-comment">&lt;!-- 1. JSTLå¾ªç¯æ¸²æŸ“åˆå§‹æ•°æ® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userTable"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">"${userList}"</span> <span class="hljs-attr">var</span>=<span class="hljs-string">"user"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">data-userid</span>=<span class="hljs-string">"${user.id}"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>${user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>${user.email}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"deleteUser(${user.id})"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 2. JSå¤„ç†å‰ç«¯äº¤äº’ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-comment">// AJAXè¯·æ±‚åˆ é™¤æ•°æ®</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/deleteUser?id=<span class="hljs-subst">${userId}</span>`</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// åŠ¨æ€åˆ é™¤DOMèŠ‚ç‚¹ï¼ˆä¸ä¾èµ–JSTLï¼‰</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`tr[data-userid="<span class="hljs-subst">${userId}</span>"]`</span>).<span class="hljs-title function_">remove</span>();
      });
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>åˆ†å·¥è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>JSTL+EL</strong>ï¼šåˆå§‹åŒ–é¡µé¢æ•°æ®ã€‚</li>
<li><strong>JS</strong>ï¼šå¤„ç†åç»­åŠ¨æ€äº¤äº’ã€‚</li>
</ul>
<h2 data-id="heading-10"><strong>5. å…³é”®æ³¨æ„äº‹é¡¹</strong></h2>
<ol>
<li>
<p><strong>ä½œç”¨åŸŸéš”ç¦»</strong>ï¼š</p>
<ul>
<li>EL/JSTLåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼ŒJSåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œå˜é‡æ— æ³•ç›´æ¥å…±äº«ã€‚</li>
<li>éœ€è¦æ•°æ®ä¼ é€’æ—¶ï¼Œé€šè¿‡Â <strong>éšè—åŸŸ</strong>ã€<strong>JSONåºåˆ—åŒ–</strong>Â æˆ–Â <strong>AJAX</strong>Â å®ç°ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨æ€§</strong>ï¼š</p>
<ul>
<li>æ°¸è¿œå¯¹ELè¾“å‡ºåˆ°JSçš„æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼ˆ<code>fn:escapeXml</code>Â æˆ–Â <code>JSON.stringify</code>ï¼‰ã€‚</li>
<li>é¿å…æ‹¼æ¥æœªç»éªŒè¯çš„ELåˆ°JSä»£ç ä¸­ï¼ˆXSSæ¼æ´é«˜å±ï¼ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>é¿å…åœ¨JSTLå¾ªç¯ä¸­ç”Ÿæˆé‡å¤çš„JSä»£ç ã€‚</li>
<li>å¤æ‚é€»è¾‘å°½é‡ç”¨AJAXæ›¿ä»£JSTLåŠ¨æ€æ¸²æŸ“ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-11"><strong>æ€»ç»“</strong></h2>









































<table><thead><tr><th><strong>ç»„åˆæ–¹å¼</strong></th><th><strong>æ˜¯å¦å¯è¡Œ</strong></th><th><strong>ç¤ºä¾‹åœºæ™¯</strong></th><th><strong>æ³¨æ„äº‹é¡¹</strong></th></tr></thead><tbody><tr><td><strong>EL + JSTL</strong></td><td>âœ… å®Œå…¨æ”¯æŒ</td><td>å¾ªç¯ã€æ¡ä»¶æ¸²æŸ“</td><td>æ— </td></tr><tr><td><strong>EL â†’ JS</strong></td><td>âœ… å•å‘ä¼ é€’</td><td>å°†åç«¯æ•°æ®åµŒå…¥JS</td><td>å¿…é¡»è½¬ä¹‰æ•°æ®é˜²XSS</td></tr><tr><td><strong>JS â†’ EL</strong></td><td>âŒ ä¸å¯è¡Œ</td><td>-</td><td>éœ€æ”¹ç”¨AJAXæäº¤æ•°æ®</td></tr><tr><td><strong>JSTL â†’ JS</strong></td><td>âœ… ç”Ÿæˆé™æ€ä»£ç </td><td>æ ¹æ®æ¡ä»¶ç”ŸæˆJSä»£ç å—</td><td>é¿å…ç”Ÿæˆå†—ä½™ä»£ç </td></tr><tr><td><strong>JS â†’ JSTL</strong></td><td>âŒ ä¸å¯è¡Œ</td><td>-</td><td>éœ€æ”¹ç”¨AJAX + æœåŠ¡å™¨é‡æ–°æ¸²æŸ“</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>EL/JSTL</strong>Â è´Ÿè´£<strong>åˆå§‹é¡µé¢æ¸²æŸ“</strong>ã€‚</li>
<li><strong>JS</strong>Â è´Ÿè´£<strong>åç»­åŠ¨æ€äº¤äº’</strong>ã€‚</li>
<li><strong>æ•°æ®ä¼ é€’</strong>é€šè¿‡å®‰å…¨è½¬ä¹‰æˆ–APIè°ƒç”¨å®ç°ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android15 Framework(1): ç”¨æˆ·ç©ºé—´å¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ Init]]></title>    <link>https://juejin.cn/post/7571753301898444840</link>    <guid>https://juejin.cn/post/7571753301898444840</guid>    <pubDate>2025-11-13T06:53:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571753301898444840" data-draft-id="7569501785380159540" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android15 Framework(1): ç”¨æˆ·ç©ºé—´å¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ Init"/> <meta itemprop="keywords" content="Android,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-11-13T06:53:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å…‰è·¬æ­¥"/> <meta itemprop="url" content="https://juejin.cn/user/1286855157887751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android15 Framework(1): ç”¨æˆ·ç©ºé—´å¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ Init
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1286855157887751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å…‰è·¬æ­¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:53:13.000Z" title="Thu Nov 13 2025 06:53:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨æå‡Androidèƒ½åŠ›çš„å¤šç§æ–¹å¼ä¸­ï¼Œé˜…è¯»Androidæºç æ˜¯ä¸€ç§ç›¸å½“é‡è¦çš„æ–¹å¼ï¼Œå¹¶ä¸”åªæœ‰åœ¨ç†Ÿæ‚‰äº†æºç ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½å¤„ç†ä¸€äº›éœ€æ±‚ã€‚</p>
<p>åœ¨Androidæºç ä¸­ï¼Œæˆ‘è®¤ä¸ºé¦–å…ˆéœ€è¦é˜…è¯»çš„å°±æ˜¯Androidç³»ç»Ÿå¯åŠ¨æµç¨‹ã€‚å®é™…ä¸Šå·²ç»æœ‰å¾ˆå¤šçš„æ–‡ç« ã€ä¹¦ç±å’Œè§†é¢‘éƒ½è®²è¿‡è¿™ä¸ªäº†ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³å†™å†™Androidç³»ç»Ÿå¯åŠ¨æµç¨‹çš„æ–‡ç« ï¼šä¸€æ–¹é¢æ˜¯å¯¹è¿‡å¾€çŸ¥è¯†åšä¸€ä¸ªæ€»ç»“ï¼ŒåŠ æ·±è‡ªå·±çš„ç†è§£ï¼›å¦ä¸€æ–¹é¢æ˜¯åˆ†äº«å‡ºæ¥ï¼Œå¦‚æœå¯ä»¥å¸®åŠ©åˆ°ä¸€äº›äººä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„æºç åŸºäºAndroid - 15.0.0_r1ã€‚å¦å¤–æœ¬æ–‡å…³æ³¨ä¸»è¦é€»è¾‘ï¼Œçœç•¥éƒ¨åˆ†ä»£ç ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€ Androidç³»ç»Ÿå¯åŠ¨å¤§è‡´æµç¨‹</h2>
<p>æœ¬æ–‡æ˜¯ä»‹ç»initè¿›ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆçœ‹ä¸‹Androidç³»ç»Ÿå¯åŠ¨æµç¨‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf1b9fa35016420d8afb5ee52c61f27e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5YWJ6Les5q2l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622857&amp;x-signature=tRhqpYQLFBkyZ6c9Ult8WITavgw%3D" alt="image.png" loading="lazy"/>
å¯åŠ¨ç”µæºåŠç³»ç»Ÿå¯åŠ¨ -&gt; Bootloader -&gt; Linuxå†…æ ¸å¯åŠ¨ -&gt; initÂ -&gt;Â ZygoteÂ -&gt;Â SystemServerÂ -&gt;Â  Launcher</p>
<h2 data-id="heading-2">äºŒã€Initè¿›ç¨‹</h2>
<p><strong>init</strong> è¿›ç¨‹æ˜¯ç”¨æˆ·ç©ºé—´å¯åŠ¨çš„ç¬¬1ä¸ªè¿›ç¨‹ï¼Œå®ƒä¼šä¾æ¬¡æ‰§è¡Œ FirstStageMain -&gt; SetupSelinux -&gt; SecondStageMain ä¸‰ä¸ªé˜¶æ®µã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒC++ä¸­çš„mainæ–¹æ³•ï¼Œæ˜¯å‡½æ•°çš„å…¥å£ï¼ŒAndroidä¸­ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒçš„å…¥å£å‡½æ•°æ˜¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fmain.cpp%2353" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/main.cpp#53" ref="nofollow noopener noreferrer">/system/core/init/main.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>** argv)</span> </span>{
	...
    <span class="hljs-keyword">if</span> (argc &gt; <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">strcmp</span>(argv[<span class="hljs-number">1</span>], <span class="hljs-string">"selinux_setup"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">SetupSelinux</span>(argv);
        }

        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">strcmp</span>(argv[<span class="hljs-number">1</span>], <span class="hljs-string">"second_stage"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">SecondStageMain</span>(argc, argv);
        }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">FirstStageMain</span>(argc, argv);
}
</code></pre>
<p>åœ¨mainå‡½æ•°åˆšè¿›æ¥æ—¶ï¼Œä¼šè¿›åˆ°FirstStageMainä¸­å»ã€‚çœ‹çœ‹FirstStageMainåšäº†ä»€ä¹ˆã€‚</p>
<h3 data-id="heading-3">2.1 FirstStageMain</h3>
<p>FirstStageMainçš„ä»£ç çš„ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Ffirst_stage_init.cpp%23316" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/first_stage_init.cpp#316" ref="nofollow noopener noreferrer">/system/core/init/first_stage_init.cpp</a><br/>
æºç è¾ƒé•¿ï¼Œåªçœ‹æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">FirstStageMain</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>** argv)</span> </span>{
    ...
    <span class="hljs-built_in">CHECKCALL</span>(<span class="hljs-built_in">mount</span>(<span class="hljs-string">"tmpfs"</span>, <span class="hljs-string">"/dev"</span>, <span class="hljs-string">"tmpfs"</span>, MS_NOSUID, <span class="hljs-string">"mode=0755"</span>));
    ...
    <span class="hljs-built_in">CHECKCALL</span>(<span class="hljs-built_in">mount</span>(<span class="hljs-string">"devpts"</span>, <span class="hljs-string">"/dev/pts"</span>, <span class="hljs-string">"devpts"</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>));
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MAKE_STR(x) __STRING(x)</span>
    <span class="hljs-built_in">CHECKCALL</span>(<span class="hljs-built_in">mount</span>(<span class="hljs-string">"proc"</span>, <span class="hljs-string">"/proc"</span>, <span class="hljs-string">"proc"</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"hidepid=2,gid="</span> <span class="hljs-built_in">MAKE_STR</span>(AID_READPROC)));
<span class="hljs-meta">#<span class="hljs-keyword">undef</span> MAKE_STR</span>
    ...
    <span class="hljs-built_in">CHECKCALL</span>(<span class="hljs-built_in">mount</span>(<span class="hljs-string">"sysfs"</span>, <span class="hljs-string">"/sys"</span>, <span class="hljs-string">"sysfs"</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>));
    <span class="hljs-built_in">CHECKCALL</span>(<span class="hljs-built_in">mount</span>(<span class="hljs-string">"selinuxfs"</span>, <span class="hljs-string">"/sys/fs/selinux"</span>, <span class="hljs-string">"selinuxfs"</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>));
    
    ...
    <span class="hljs-built_in">InitKernelLogging</span>(argv);
    ...

    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* path = <span class="hljs-string">"/system/bin/init"</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* args[] = {path, <span class="hljs-string">"selinux_setup"</span>, <span class="hljs-literal">nullptr</span>};
    ...
    <span class="hljs-built_in">execv</span>(path, <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">char</span>**&gt;(args));
	...
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

</code></pre>
<p>FirstStageMainå‡½æ•°ä¸»è¦åšäº†æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ›å»ºç›®å½•ï¼Œåˆå§‹åŒ–Kernel logã€‚ä»‹ç»ä¸‹5ä¸ªé‡è¦çš„æ–‡ä»¶ç³»ç»Ÿï¼š</p>
<ul>
<li>tmpfsï¼šç”¨äºå­˜æ”¾è®¾å¤‡èŠ‚ç‚¹å’ŒåŠ¨æ€ç”Ÿæˆçš„è®¾å¤‡æ–‡ä»¶ï¼Œæ”¯æŒè¿è¡Œæ—¶è®¾å¤‡ç®¡ç†ã€‚</li>
<li>devptsï¼‰ï¼šæä¾›ä¼ªç»ˆç«¯ï¼ˆPTYï¼‰æ¥å£ï¼Œè®©ç”¨æˆ·ç©ºé—´ç»ˆç«¯ï¼shell èƒ½ä¸å†…æ ¸ç»ˆç«¯å­ç³»ç»Ÿäº¤äº’ã€‚</li>
<li>procfsï¼šæš´éœ²è¿›ç¨‹å’Œå†…æ ¸çŠ¶æ€ã€é…ç½®ä¿¡æ¯ç»™ç”¨æˆ·ç©ºé—´ï¼Œå¯ç”¨äºç³»ç»Ÿç›‘æ§ä¸å‚æ•°è°ƒæ•´ã€‚</li>
<li>sysfsï¼šç”¨äºæš´éœ²å†…æ ¸è®¾å¤‡æ¨¡å‹ã€é©±åŠ¨å’Œå­ç³»ç»Ÿçš„ä¿¡æ¯ä¸æ§åˆ¶æ¥å£ï¼Œæ”¯æ’‘ç¡¬ä»¶ç®¡ç†ã€‚</li>
<li>selinuxfsï¼šæä¾› SELinux å®‰å…¨ç­–ç•¥ä¸çŠ¶æ€çš„æ¥å£ï¼Œç”¨äºç³»ç»Ÿçš„å¼ºåˆ¶è®¿é—®æ§åˆ¶æœºåˆ¶ã€‚</li>
</ul>
<p>InitKernelLogging(argv)ä»£ç å¦‚ä¸‹ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Ffirst_stage_init.cpp%23400" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/first_stage_init.cpp#400" ref="nofollow noopener noreferrer">/system/core/init/first_stage_init.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitKernelLogging</span><span class="hljs-params">(<span class="hljs-type">char</span>** argv)</span> </span>{
    <span class="hljs-built_in">SetFatalRebootTarget</span>();
    android::base::<span class="hljs-built_in">InitLogging</span>(argv, &amp;android::base::KernelLogger, InitAborter);
}
</code></pre>
<p>è¿™é‡Œç€é‡çœ‹çœ‹android::base::InitLogging(argv, &amp;android::base::KernelLogger, InitAborter)ï¼Œ å…ˆçœ‹KernelLoggeråšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Flibbase%2Flogging.cpp%23278" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/libbase/logging.cpp#278" ref="nofollow noopener noreferrer">/system/libbase/logging.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">KernelLogger</span><span class="hljs-params">(android::base::LogId, android::base::LogSeverity severity, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* tag,
                  <span class="hljs-type">const</span> <span class="hljs-type">char</span>*, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* full_message)</span> </span>{
  <span class="hljs-built_in">SplitByLines</span>(full_message, KernelLogLine, severity, tag);
}
</code></pre>
<p>ç»§ç»­è·ŸKernelLogLine<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Flibbase%2Flogging.cpp%23238" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/libbase/logging.cpp#238" ref="nofollow noopener noreferrer">/system/libbase/logging.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(__linux__)</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">KernelLogLine</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* msg, <span class="hljs-type">int</span> length, android::base::LogSeverity severity,
   ...
  <span class="hljs-type">static</span> <span class="hljs-type">int</span> klog_fd = OpenKmsg();
  <span class="hljs-keyword">if</span> (klog_fd == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span>;
  ...
}
</span></span></code></pre>
<p>å®é™…ä¸Šï¼ŒKernelLogLineå°±æ˜¯è°ƒç”¨äº†OpenKmsg<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Flibbase%2Flogging.cpp%23101" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/libbase/logging.cpp#101" ref="nofollow noopener noreferrer">/system/libbase/logging.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(__linux__)</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">OpenKmsg</span><span class="hljs-params">()</span> </span>{
<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(__ANDROID__)</span>
    <span class="hljs-comment">// å°è¯•ä»ç¯å¢ƒå˜é‡è·å–é¢„æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦</span>
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> val = <span class="hljs-built_in">getenv</span>(<span class="hljs-string">"ANDROID_FILE__dev_kmsg"</span>);
    <span class="hljs-keyword">if</span> (val != <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-type">int</span> fd;
        <span class="hljs-comment">// è§£æç¯å¢ƒå˜é‡å€¼ä¸ºæ–‡ä»¶æè¿°ç¬¦</span>
        <span class="hljs-keyword">if</span> (android::base::<span class="hljs-built_in">ParseInt</span>(val, &amp;fd, <span class="hljs-number">0</span>)) {
            <span class="hljs-comment">// éªŒè¯æ–‡ä»¶æè¿°ç¬¦æœ‰æ•ˆæ€§</span>
            <span class="hljs-keyword">auto</span> flags = <span class="hljs-built_in">fcntl</span>(fd, F_GETFL);
            <span class="hljs-keyword">if</span> ((flags != <span class="hljs-number">-1</span>) &amp;&amp; ((flags &amp; O_ACCMODE) == O_WRONLY)) 
                <span class="hljs-keyword">return</span> fd; <span class="hljs-comment">// è¿”å›å¯ç”¨çš„ fd</span>
        }
    }
    <span class="hljs-comment">// initè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½•é¢„å…ˆå­˜åœ¨çš„æ–‡ä»¶æè¿°ç¬¦å¯ç»§æ‰¿ï¼Œå› æ­¤ä¼šæ‰“å¼€/dev/kmsg</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">TEMP_FAILURE_RETRY</span>(<span class="hljs-built_in">open</span>(<span class="hljs-string">"/dev/kmsg"</span>, O_WRONLY | O_CLOEXEC));
}
</code></pre>
<p>å†çœ‹çœ‹InitLoggingä»£ç <br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Flibbase%2Flogging.cpp%23346" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/libbase/logging.cpp#346" ref="nofollow noopener noreferrer">/system/libbase/logging.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitLogging</span><span class="hljs-params">(<span class="hljs-type">char</span>* argv[], LogFunction&amp;&amp; logger, AbortFunction&amp;&amp; aborter)</span> </span>{
  <span class="hljs-built_in">SetLogger</span>(std::forward&lt;LogFunction&gt;(logger));
  <span class="hljs-built_in">SetAborter</span>(std::forward&lt;AbortFunction&gt;(aborter));

  <span class="hljs-keyword">if</span> (gInitialized) { <span class="hljs-comment">// gInitializedæ˜¯ä¸€ä¸ªé™æ€å˜é‡ï¼Œé˜²æ­¢é‡å¤è°ƒç”¨</span>
    <span class="hljs-keyword">return</span>;
  }

  gInitialized = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">if</span> (argv != <span class="hljs-literal">nullptr</span>) {
    <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ—¥å¿—æ ‡ç­¾</span>
    <span class="hljs-built_in">SetDefaultTag</span>(<span class="hljs-built_in">basename</span>(argv[<span class="hljs-number">0</span>]));
  }

  <span class="hljs-comment">// è·å–ç¯å¢ƒå˜é‡é…ç½®</span>
  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* tags = <span class="hljs-built_in">getenv</span>(<span class="hljs-string">"ANDROID_LOG_TAGS"</span>);
  <span class="hljs-keyword">if</span> (tags == <span class="hljs-literal">nullptr</span>) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// æ ¹æ®ç¯å¢ƒå˜é‡ï¼Œè®¾ç½®æ—¥å¿—çº§åˆ«</span>
  std::vector&lt;std::string&gt; specs = <span class="hljs-built_in">Split</span>(tags, <span class="hljs-string">" "</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; specs.<span class="hljs-built_in">size</span>(); ++i) {
    <span class="hljs-function">std::string <span class="hljs-title">spec</span><span class="hljs-params">(specs[i])</span></span>;
    <span class="hljs-keyword">if</span> (spec.<span class="hljs-built_in">size</span>() == <span class="hljs-number">3</span> &amp;&amp; <span class="hljs-built_in">StartsWith</span>(spec, <span class="hljs-string">"*:"</span>)) {
      <span class="hljs-keyword">switch</span> (spec[<span class="hljs-number">2</span>]) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'v'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(VERBOSE);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(DEBUG);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'i'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(INFO);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'w'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(WARNING);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'e'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(ERROR);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'f'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(FATAL_WITHOUT_ABORT);
          <span class="hljs-keyword">continue</span>;
        <span class="hljs-comment">// liblog will even suppress FATAL if you say 's' for silent, but fatal should</span>
        <span class="hljs-comment">// never be suppressed.</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span>:
          <span class="hljs-built_in">SetMinimumLogSeverity</span>(FATAL_WITHOUT_ABORT);
          <span class="hljs-keyword">continue</span>;
      }
    }
    <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; <span class="hljs-string">"unsupported '"</span> &lt;&lt; spec &lt;&lt; <span class="hljs-string">"' in ANDROID_LOG_TAGS ("</span> &lt;&lt; tags
               &lt;&lt; <span class="hljs-string">")"</span>;
  }
}
</code></pre>
<p>å°ç»“ä¸€ä¸‹FirstStageMain</p>
<ul>
<li>åˆ›å»ºç›®å½•å’ŒæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</li>
<li>åˆå§‹åŒ–Kernelæ—¥å¿— (æ‰“å¼€/dev/kmsgï¼Œå¹¶æ ¹æ®ç¯å¢ƒå˜é‡ANDROID_LOG_TAGSï¼Œè®¾ç½®æ—¥å¿—çº§åˆ«)</li>
</ul>
<p>å®Œæˆè¿™äº›åï¼Œä¼šé€šè¿‡execvå›åˆ°Main.cpp,æ­¤æ—¶ä¼šæ‰§è¡ŒSetupSelinux é˜¶æ®µ</p>
<h3 data-id="heading-4">2.2 SetupSelinux</h3>
<p>å®ƒè´Ÿè´£åŠ è½½å¹¶å¯ç”¨ SELinux å®‰å…¨ç­–ç•¥<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fselinux.cpp%23685" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/selinux.cpp#685" ref="nofollow noopener noreferrer">/system/core/init/selinux.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">SetupSelinux</span><span class="hljs-params">(<span class="hljs-type">char</span>** argv)</span> </span>{
    <span class="hljs-comment">// è®¾ç½® stdio åˆ° /dev/null</span>
    <span class="hljs-built_in">SetStdioToDevNull</span>(argv);
    
    <span class="hljs-comment">// åˆå§‹åŒ– kernel æ—¥å¿—</span>
    <span class="hljs-built_in">InitKernelLogging</span>(argv);

    <span class="hljs-keyword">if</span> (REBOOT_BOOTLOADER_ON_PANIC) {
        <span class="hljs-built_in">InstallRebootSignalHandlers</span>();
    }

    boot_clock::time_point start_time = boot_clock::<span class="hljs-built_in">now</span>();

    <span class="hljs-built_in">SelinuxSetupKernelLogging</span>();

    <span class="hljs-comment">// åŠ è½½SELinuxç­–ç•¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsMicrodroid</span>()) {
        <span class="hljs-built_in">LoadSelinuxPolicyMicrodroid</span>();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">LoadSelinuxPolicyAndroid</span>();
    }

    <span class="hljs-comment">// åˆ‡æ¢åˆ° Selinux enforcement æ¨¡å¼</span>
    <span class="hljs-built_in">SelinuxSetEnforcement</span>();

    ...

    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* path = <span class="hljs-string">"/system/bin/init"</span>;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* args[] = {path, <span class="hljs-string">"second_stage"</span>, <span class="hljs-literal">nullptr</span>};
    <span class="hljs-comment">// é‡æ–°å¯åŠ¨ init æœ¬èº«ï¼Œè¿›å…¥SecondStageMain</span>
    <span class="hljs-built_in">execv</span>(path, <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">char</span>**&gt;(args));

    ...
}
</code></pre>
<p>è¿™ä¸€é˜¶æ®µæä¾›äº†æ•´ä¸ªç”¨æˆ·ç©ºé—´æœåŠ¡å¯åŠ¨çš„å®‰å…¨åŸºç¡€ï¼šåœ¨ SELinux ç­–ç•¥ç”Ÿæ•ˆä¹‹åï¼Œåç»­è§£æ .rcã€å¯åŠ¨æœåŠ¡ã€fork åº”ç”¨è¿›ç¨‹ï¼Œæ‰èƒ½åœ¨é¢„æœŸçš„å®‰å…¨åŸŸä¸‹æ‰§è¡Œã€‚</p>
<h3 data-id="heading-5">2.3 SecondStageMain</h3>
<p>ä¹‹åä¾¿è¿›å…¥äº†æˆ‘ä»¬ç€é‡å…³æ³¨çš„ç¬¬äºŒé˜¶æ®µåˆå§‹åŒ–ã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Finit.cpp%23930" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/init.cpp#930" ref="nofollow noopener noreferrer">/system/core/init/init.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">SecondStageMain</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>** argv)</span> </span>{
    ...
    <span class="hljs-built_in">InitKernelLogging</span>(argv);
   ...
    <span class="hljs-comment">// åˆå§‹åŒ–å±æ€§æœåŠ¡</span>
    <span class="hljs-built_in">PropertyInit</span>();

    <span class="hljs-comment">// åˆ›å»ºEpollå¯¹è±¡</span>
    Epoll epoll;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = epoll.<span class="hljs-built_in">Open</span>(); !result.<span class="hljs-built_in">ok</span>()) {
        <span class="hljs-built_in">PLOG</span>(FATAL) &lt;&lt; result.<span class="hljs-built_in">error</span>();
    }
    epoll.<span class="hljs-built_in">SetFirstCallback</span>(ReapAnyOutstandingChildren);

    <span class="hljs-comment">// æ³¨å†Œepoll</span>
    <span class="hljs-built_in">InstallSignalFdHandler</span>(&amp;epoll);
    <span class="hljs-built_in">InstallInitNotifier</span>(&amp;epoll);

    <span class="hljs-comment">// å¼€å¯å±æ€§æœåŠ¡</span>
    <span class="hljs-built_in">StartPropertyService</span>(&amp;property_fd);

    <span class="hljs-comment">// åŠ è½½init.rcæ–‡ä»¶</span>
    <span class="hljs-built_in">LoadBootScripts</span>(am, sm);
    ...
}
</code></pre>
<h4 data-id="heading-6">2.3.1 åˆå§‹åŒ–å±æ€§æœåŠ¡</h4>
<p>æˆ‘ä»¬çœ‹çœ‹PropertyInitå…·ä½“æ˜¯æ€ä¹ˆåˆå§‹åŒ–å±æ€§æœåŠ¡çš„ï¼Œå…ˆçœ‹ä¸‹PropertyInitä»£ç 
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%231403" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#1403" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PropertyInit</span><span class="hljs-params">()</span> </span>{
    ...

    <span class="hljs-built_in">mkdir</span>(<span class="hljs-string">"/dev/__properties__"</span>, S_IRWXU | S_IXGRP | S_IXOTH);
    <span class="hljs-built_in">CreateSerializedPropertyInfo</span>();
    <span class="hljs-comment">// åˆå§‹åŒ–å±æ€§å†…å­˜åŒºåŸŸ</span>
    <span class="hljs-keyword">if</span> (__system_property_area_init()) {
        <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; <span class="hljs-string">"Failed to initialize property area"</span>;
    }
    ...
}
</code></pre>
<p>__system_property_area_initæ˜¯å®šä¹‰åœ¨system_property_api.cppä¸­çš„ä¸€ä¸ªæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fbionic%2Fsystem_property_api.cpp%2358" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/bionic/system_property_api.cpp#58" ref="nofollow noopener noreferrer">/bionic/libc/bionic/system_property_api.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-type">int</span> __system_property_area_init() {
    <span class="hljs-type">bool</span> fsetxattr_fail = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> system_properties.<span class="hljs-built_in">AreaInit</span>(PROP_DIRNAME, &amp;fsetxattr_fail) &amp;&amp; !fsetxattr_fail ? <span class="hljs-number">0</span> : <span class="hljs-number">-1</span>;
}
</code></pre>
<p>åªæ˜¯è°ƒç”¨äº†system_properties.AreaInitï¼Œç»§ç»­è·Ÿè¿™ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹åšäº†ä»€ä¹ˆ
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fsystem_properties.cpp%23107" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/system_properties.cpp#107" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/system_properties.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">SystemProperties::AreaInit</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename, <span class="hljs-type">bool</span>* fsetxattr_failed)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">AreaInit</span>(filename, fsetxattr_failed, <span class="hljs-literal">false</span>);
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">SystemProperties::AreaInit</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename, <span class="hljs-type">bool</span>* fsetxattr_failed,
                             <span class="hljs-type">bool</span> load_default_path)</span> </span>{
   ...
   <span class="hljs-keyword">if</span> (!serial_contexts-&gt;<span class="hljs-built_in">Initialize</span>(<span class="hljs-literal">true</span>, properties_filename_.<span class="hljs-built_in">c_str</span>(), fsetxattr_failed,
			load_default_path)) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
   }
  
   ...
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>ç»§ç»­è·Ÿserial_contexts-&gt;Initialize<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fcontexts_serialized.cpp%2345" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/contexts_serialized.cpp#45" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/contexts_serialized.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ContextsSerialized::Initialize</span><span class="hljs-params">(<span class="hljs-type">bool</span> writable, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* dirname, <span class="hljs-type">bool</span>* fsetxattr_failed,
                                    <span class="hljs-type">bool</span> load_default_path)</span> </span>{
  dirname_ = dirname;
  tree_filename_ = <span class="hljs-built_in">PropertiesFilename</span>(dirname, <span class="hljs-string">"property_info"</span>);
  serial_filename_ = <span class="hljs-built_in">PropertiesFilename</span>(dirname, <span class="hljs-string">"properties_serial"</span>);

  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">InitializeProperties</span>(load_default_path)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (writable) {
    ...
    <span class="hljs-keyword">if</span> (open_failed || !<span class="hljs-built_in">MapSerialPropertyArea</span>(<span class="hljs-literal">true</span>, fsetxattr_failed)) {
      <span class="hljs-built_in">FreeAndUnmap</span>();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">MapSerialPropertyArea</span>(<span class="hljs-literal">false</span>, <span class="hljs-literal">nullptr</span>)) {
      <span class="hljs-built_in">FreeAndUnmap</span>();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>åç»­æ‰§è¡ŒMapSerialPropertyAreaæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fcontexts_serialized.cpp%2369" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/contexts_serialized.cpp#69" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/contexts_serialized.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ContextsSerialized::MapSerialPropertyArea</span><span class="hljs-params">(<span class="hljs-type">bool</span> access_rw, <span class="hljs-type">bool</span>* fsetxattr_failed)</span> </span>{
  <span class="hljs-keyword">if</span> (access_rw) {
    serial_prop_area_ = prop_area::<span class="hljs-built_in">map_prop_area_rw</span>(
        serial_filename_.<span class="hljs-built_in">c_str</span>(), <span class="hljs-string">"u:object_r:properties_serial:s0"</span>, fsetxattr_failed);
  } <span class="hljs-keyword">else</span> {
    serial_prop_area_ = prop_area::<span class="hljs-built_in">map_prop_area</span>(serial_filename_.<span class="hljs-built_in">c_str</span>());
  }
  <span class="hljs-keyword">return</span> serial_prop_area_;
}
</code></pre>
<p>è‹¥æ˜¯å¯å†™ï¼Œæ‰§è¡Œmap_prop_area_rw<br/>
ä¸å¯å†™ï¼Œæ‰§è¡Œmap_prop_area<br/>
å…ˆçœ‹çœ‹æ‰§è¡Œmap_prop_area_rwä»£ç <br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fprop_area.cpp%2355" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/prop_area.cpp#55" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/prop_area.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">prop_area* <span class="hljs-title">prop_area::map_prop_area_rw</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* context,
                                       <span class="hljs-type">bool</span>* fsetxattr_failed)</span> </span>{
  ...
  <span class="hljs-type">void</span>* <span class="hljs-type">const</span> memory_area = <span class="hljs-built_in">mmap</span>(<span class="hljs-literal">nullptr</span>, pa_size_, PROT_READ | PROT_WRITE, MAP_SHARED, fd, <span class="hljs-number">0</span>);
  ...
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯è°ƒç”¨äº†mmapåšå†…å­˜æ˜ å°„ï¼Œå†çœ‹çœ‹map_prop_areaä»£ç 
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fprop_area.cpp%23140" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/prop_area.cpp#140" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/prop_area.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">prop_area* <span class="hljs-title">prop_area::map_prop_area</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename)</span> </span>{
  <span class="hljs-type">int</span> fd = <span class="hljs-built_in">open</span>(filename, O_CLOEXEC | O_NOFOLLOW | O_RDONLY);
  <span class="hljs-keyword">if</span> (fd == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;

  prop_area* map_result = <span class="hljs-built_in">map_fd_ro</span>(fd);
  <span class="hljs-built_in">close</span>(fd);

  <span class="hljs-keyword">return</span> map_result;
}

<span class="hljs-function">prop_area* <span class="hljs-title">prop_area::map_fd_ro</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> fd)</span> </span>{
  ...
  <span class="hljs-type">void</span>* <span class="hljs-type">const</span> map_result = <span class="hljs-built_in">mmap</span>(<span class="hljs-literal">nullptr</span>, pa_size_, PROT_READ, MAP_SHARED, fd, <span class="hljs-number">0</span>);
  ...
}
</code></pre>
<p>åŒæ ·æœ€ç»ˆä¹Ÿæ˜¯è°ƒç”¨äº†mmapæ–¹æ³•ã€‚</p>
<p>å› æ­¤PropertyInit() åˆå§‹åŒ–å±æ€§æœåŠ¡ï¼Œå…¶å®å°±æ˜¯é€šè¿‡ <strong>mmap ç³»ç»Ÿè°ƒç”¨</strong> æ¥å®Œæˆå±æ€§å†…å­˜åŒºåŸŸçš„åˆå§‹åŒ–ä¸æ˜ å°„çš„, å»ºç«‹äº† <strong>/dev/<strong>properties</strong></strong> å…±äº«å†…å­˜åŒºï¼Œä¾›æ‰€æœ‰è¿›ç¨‹è¯»å†™ç³»ç»Ÿå±æ€§ï¼Œå¦‚ getprop/setprop å‘½ä»¤æ“ä½œçš„æ•°æ®æ¥æºã€‚</p>
<h4 data-id="heading-7">2.3.2 å¼€å¯å±æ€§æœåŠ¡</h4>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%231548" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#1548" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">StartPropertyService</span><span class="hljs-params">(<span class="hljs-type">int</span>* epoll_socket)</span> </span>{
    <span class="hljs-comment">// åˆå§‹åŒ–å±æ€§ç‰ˆæœ¬</span>
    <span class="hljs-built_in">InitPropertySet</span>(<span class="hljs-string">"ro.property_service.version"</span>, <span class="hljs-string">"2"</span>);

    <span class="hljs-comment">// åˆ›å»º socketpairï¼Œç”¨æ¥è®© init ä¸å…¶å±æ€§æœåŠ¡çº¿ç¨‹ä¹‹é—´åšé€šä¿¡</span>
    <span class="hljs-type">int</span> sockets[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">socketpair</span>(AF_UNIX, SOCK_SEQPACKET | SOCK_CLOEXEC, <span class="hljs-number">0</span>, sockets) != <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">PLOG</span>(FATAL) &lt;&lt; <span class="hljs-string">"Failed to socketpair() between property_service and init"</span>;
    }
    *epoll_socket = from_init_socket = sockets[<span class="hljs-number">0</span>];
    init_socket = sockets[<span class="hljs-number">1</span>];
    
    <span class="hljs-comment">// å¼€å¯æ¶ˆæ¯æ¥æ”¶é€šé“</span>
    <span class="hljs-built_in">StartSendingMessages</span>();

    <span class="hljs-comment">// å¯åŠ¨ç³»ç»Ÿå±æ€§æœåŠ¡çº¿ç¨‹å’Œæ™®é€šå±æ€§æœåŠ¡çº¿ç¨‹</span>
    <span class="hljs-built_in">StartThread</span>(PROP_SERVICE_FOR_SYSTEM_NAME, <span class="hljs-number">0660</span>, AID_SYSTEM, property_service_for_system_thread,
                <span class="hljs-literal">true</span>);
    <span class="hljs-built_in">StartThread</span>(PROP_SERVICE_NAME, <span class="hljs-number">0666</span>, <span class="hljs-number">0</span>, property_service_thread, <span class="hljs-literal">false</span>);
    ...
}
</code></pre>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹StartSendingMessagesæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%23151" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#151" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">StartSendingMessages</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> lock = std::lock_guard{accept_messages_lock};
    accept_messages = <span class="hljs-literal">true</span>;
}
</code></pre>
<p>StartSendingMessagesæ–¹æ³•å¾ˆç®€å•ï¼Œaccept_messagesæ˜¯é™æ€å˜é‡ï¼Œè¿™é‡Œä½¿ç”¨äº†äº’æ–¥é”æ¥ä¿è¯å®ƒçš„å†™æ“ä½œï¼Œå¹¶è®¾ç½®ä¸ºtrueï¼Œåç»­å±æ€§å˜æ›´æ—¶ï¼Œä¼šåˆ¤æ–­accept_messagesä¸ºtrueæ‰ä¼šæ‰§è¡Œã€‚<br/>
å†çœ‹çœ‹StartThreadæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%231531" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#1531" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">StartThread</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name, <span class="hljs-type">int</span> mode, <span class="hljs-type">int</span> gid, std::thread&amp; t, <span class="hljs-type">bool</span> listen_init)</span> </span>{
    <span class="hljs-type">int</span> fd = <span class="hljs-number">-1</span>;
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª socket</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">CreateSocket</span>(name, SOCK_STREAM | SOCK_CLOEXEC | SOCK_NONBLOCK,
                                   <span class="hljs-comment">/*passcred=*/</span><span class="hljs-literal">false</span>, <span class="hljs-comment">/*should_listen=*/</span><span class="hljs-literal">false</span>, mode, <span class="hljs-comment">/*uid=*/</span><span class="hljs-number">0</span>,
                                   <span class="hljs-comment">/*gid=*/</span>gid, <span class="hljs-comment">/*socketcon=*/</span>{});
        result.<span class="hljs-built_in">ok</span>()) {
        fd = *result;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; <span class="hljs-string">"start_property_service socket creation failed: "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
    }

    <span class="hljs-comment">// å¯¹ fd è¿›è¡Œç›‘å¬</span>
    <span class="hljs-built_in">listen</span>(fd, <span class="hljs-number">8</span>);

    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹</span>
    <span class="hljs-keyword">auto</span> new_thread = std::<span class="hljs-built_in">thread</span>(PropertyServiceThread, fd, listen_init);
    t.<span class="hljs-built_in">swap</span>(new_thread);
}
</code></pre>
<p>StartPropertyServiceä¼šåˆ›å»ºå¯åŠ¨ç³»ç»Ÿå±æ€§æœåŠ¡çº¿ç¨‹å’Œæ™®é€šå±æ€§æœåŠ¡çº¿ç¨‹,ç³»ç»Ÿå±æ€§ä½¿ç”¨0660ï¼Œæ™®é€šå±æ€§ä½¿ç”¨0666ã€‚
è¿™é‡Œè¯´ä¸‹Linuxä¸­å„ä¸ªæ•°å­—ä»£è¡¨ä»€ä¹ˆæƒé™ï¼š4 ã€2 å’Œ 1è¡¨ç¤ºè¯»ã€å†™ã€æ‰§è¡Œæƒé™
0abc, aè¡¨ç¤ºæ‹¥æœ‰è€…ï¼Œbè¡¨ç¤ºæ‰€å±ç»„ï¼Œcè¡¨ç¤ºå…¶ä»–ç”¨æˆ·ã€‚å› æ­¤ç³»ç»Ÿå±æ€§ä½¿ç”¨0660ï¼Œè¡¨ç¤ºæ‹¥æœ‰è€…ï¼Œæ‰€å±ç»„æœ‰è¯»å†™æƒé™ï¼›æ™®é€šå±æ€§ä½¿ç”¨0666è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·å‡æœ‰è¯»å†™æƒé™ã€‚<br/>
è¿™é‡Œä½¿ç”¨2ä¸ªçº¿ç¨‹ï¼Œå› ä¸ºç³»ç»Ÿå±æ€§å¯èƒ½æœ‰æ•æ„Ÿå±æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æ›´ä¸¥æ ¼çš„æƒé™ã€‚åç»­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œçœ‹çœ‹PropertyServiceThreadé‡Œé¢åšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%231468" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#1468" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">PropertyServiceThread</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">bool</span> listen_init)</span> </span>{
    Epoll epoll;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = epoll.<span class="hljs-built_in">Open</span>(); !result.<span class="hljs-built_in">ok</span>()) {
        <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; result.<span class="hljs-built_in">error</span>();
    }

    <span class="hljs-comment">// ç›‘å¬fdï¼Œå½“æœ‰æ›´æ–°æ—¶, è°ƒç”¨handle_property_set_fdæ¥è¿›è¡Œå¤„ç†ã€‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = epoll.<span class="hljs-built_in">RegisterHandler</span>(fd, std::<span class="hljs-built_in">bind</span>(handle_property_set_fd, fd));
        !result.<span class="hljs-built_in">ok</span>()) {
        <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; result.<span class="hljs-built_in">error</span>();
    }

    <span class="hljs-comment">// ç›‘å¬init_socket(init_socketåœ¨StartPropertyServiceå·²ç»åˆå§‹åŒ–äº†), å½“æ›´æ–°æ—¶, è°ƒç”¨HandleInitSocketæ¥è¿›è¡Œå¤„ç†ã€‚</span>
    <span class="hljs-keyword">if</span> (listen_init) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = epoll.<span class="hljs-built_in">RegisterHandler</span>(init_socket, HandleInitSocket); !result.<span class="hljs-built_in">ok</span>()) {
            <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; result.<span class="hljs-built_in">error</span>();
        }
    }

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// è¿›å…¥äº‹ä»¶ç­‰å¾…å¾ªç¯</span>
        <span class="hljs-keyword">auto</span> epoll_result = epoll.<span class="hljs-built_in">Wait</span>(std::<span class="hljs-literal">nullopt</span>);
        <span class="hljs-keyword">if</span> (!epoll_result.<span class="hljs-built_in">ok</span>()) {
            <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; epoll_result.<span class="hljs-built_in">error</span>();
        }
    }
}
</code></pre>
<p>åœ¨PropertyServiceThreadä¸­ç›‘å¬äº†fdå’Œinit_socketï¼Œç»§ç»­çœ‹çœ‹handle_property_set_fdé‡Œçš„ä»£ç <br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%23601" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#601" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">handle_property_set_fd</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span> </span>{
    ...
    <span class="hljs-type">uint32_t</span> cmd = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// // ä» socket ä¸­è·å–cmd</span>
    <span class="hljs-keyword">if</span> (!socket.<span class="hljs-built_in">RecvUint32</span>(&amp;cmd, &amp;timeout_ms)) {
        <span class="hljs-built_in">PLOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"sys_prop: error while reading command from the socket"</span>;
        socket.<span class="hljs-built_in">SendUint32</span>(PROP_ERROR_READ_CMD);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">switch</span> (cmd) {
    <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
    <span class="hljs-keyword">case</span> PROP_MSG_SETPROP: {
        <span class="hljs-type">char</span> prop_name[PROP_NAME_MAX];
        <span class="hljs-type">char</span> prop_value[PROP_VALUE_MAX];

        <span class="hljs-comment">// ä» socket ä¸­è·å–name, value</span>
        <span class="hljs-keyword">if</span> (!socket.<span class="hljs-built_in">RecvChars</span>(prop_name, PROP_NAME_MAX, &amp;timeout_ms) ||
            !socket.<span class="hljs-built_in">RecvChars</span>(prop_value, PROP_VALUE_MAX, &amp;timeout_ms)) {
          <span class="hljs-built_in">PLOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"sys_prop(PROP_MSG_SETPROP): error while reading name/value from the socket"</span>;
          <span class="hljs-keyword">return</span>;
        }
        ...
        
        <span class="hljs-comment">// åœ¨HandlePropertySetNoSocketä¸­å¤„ç†</span>
        <span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">HandlePropertySetNoSocket</span>(prop_name, prop_value, source_context, cr, &amp;error);
        ...

        <span class="hljs-keyword">break</span>;
      }

    <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
    <span class="hljs-keyword">case</span> PROP_MSG_SETPROP2: {
        std::string name;
        std::string value;
        
        <span class="hljs-comment">// ä» socket ä¸­è·å–name, value</span>
        <span class="hljs-keyword">if</span> (!socket.<span class="hljs-built_in">RecvString</span>(&amp;name, &amp;timeout_ms) ||
            !socket.<span class="hljs-built_in">RecvString</span>(&amp;value, &amp;timeout_ms)) {
          <span class="hljs-built_in">PLOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"sys_prop(PROP_MSG_SETPROP2): error while reading name/value from the socket"</span>;
          socket.<span class="hljs-built_in">SendUint32</span>(PROP_ERROR_READ_DATA);
          <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// åœ¨HandlePropertySetä¸­å¤„ç†</span>
        <span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">HandlePropertySet</span>(name, value, source_context, cr, &amp;socket, &amp;error);
        ...
        <span class="hljs-keyword">break</span>;
      }

    <span class="hljs-keyword">default</span>:
        <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"sys_prop: invalid command "</span> &lt;&lt; cmd;
        socket.<span class="hljs-built_in">SendUint32</span>(PROP_ERROR_INVALID_CMD);
        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<p>handle_property_set_fd æ ¹æ® socket ä¸­è·å–åˆ°çš„cmd, è°ƒç”¨HandlePropertySetNoSocket æˆ–HandlePropertySetå»è®¾ç½®å±æ€§ã€‚è€Œ HandlePropertySetNoSocket ä¹Ÿä¼šè°ƒç”¨åˆ° HandlePropertySetï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥çœ‹HandlePropertySetä»£ç <br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%23548" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#548" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">std::optional&lt;<span class="hljs-type">uint32_t</span>&gt; <span class="hljs-title">HandlePropertySet</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, <span class="hljs-type">const</span> std::string&amp; value,
                                          <span class="hljs-type">const</span> std::string&amp; source_context, <span class="hljs-type">const</span> ucred&amp; cr,
                                          SocketConnection* socket, std::string* error)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> ret = <span class="hljs-built_in">CheckPermissions</span>(name, value, source_context, cr, error); ret != PROP_SUCCESS) {
        <span class="hljs-keyword">return</span> {ret};
    }

    <span class="hljs-comment">// æ§åˆ¶å±æ€§</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">StartsWith</span>(name, <span class="hljs-string">"ctl."</span>)) {
        <span class="hljs-keyword">return</span> {<span class="hljs-built_in">SendControlMessage</span>(name.<span class="hljs-built_in">c_str</span>() + <span class="hljs-number">4</span>, value, cr.pid, socket, error)};
    }

    <span class="hljs-comment">// è®¾å¤‡é‡æ–°å¯åŠ¨å±æ€§</span>
    <span class="hljs-keyword">if</span> (name == <span class="hljs-string">"sys.powerctl"</span>) {
        std::string cmdline_path = <span class="hljs-built_in">StringPrintf</span>(<span class="hljs-string">"proc/%d/cmdline"</span>, cr.pid);
        std::string process_cmdline;
        std::string process_log_string;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ReadFileToString</span>(cmdline_path, &amp;process_cmdline)) {
            process_log_string = <span class="hljs-built_in">StringPrintf</span>(<span class="hljs-string">" (%s)"</span>, process_cmdline.<span class="hljs-built_in">c_str</span>());
        }
        <span class="hljs-built_in">LOG</span>(INFO) &lt;&lt; <span class="hljs-string">"Received sys.powerctl='"</span> &lt;&lt; value &lt;&lt; <span class="hljs-string">"' from pid: "</span> &lt;&lt; cr.pid
                  &lt;&lt; process_log_string;
        <span class="hljs-keyword">if</span> (value == <span class="hljs-string">"reboot,userspace"</span> &amp;&amp; !<span class="hljs-built_in">is_userspace_reboot_supported</span>().<span class="hljs-built_in">value_or</span>(<span class="hljs-literal">false</span>)) {
            *error = <span class="hljs-string">"Userspace reboot is not supported by this device"</span>;
            <span class="hljs-keyword">return</span> {PROP_ERROR_INVALID_VALUE};
        }
    }

    <span class="hljs-keyword">if</span> (name == kRestoreconProperty &amp;&amp; cr.pid != <span class="hljs-number">1</span> &amp;&amp; !value.<span class="hljs-built_in">empty</span>()) {
        <span class="hljs-type">static</span> AsyncRestorecon async_restorecon;
        async_restorecon.<span class="hljs-built_in">TriggerRestorecon</span>(value);
        <span class="hljs-keyword">return</span> {PROP_SUCCESS};
    }

    <span class="hljs-comment">// æ™®é€šå±æ€§</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">PropertySet</span>(name, value, socket, error);
}
</code></pre>
<p>HandlePropertySetä¸­ï¼Œè®¾ç½®æ™®é€šå±æ€§ä¼šè°ƒç”¨PropertySetï¼Œç»§ç»­çœ‹çœ‹PropertySetä»£ç <br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fproperty_service.cpp%23391" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/property_service.cpp#391" ref="nofollow noopener noreferrer">/system/core/init/property_service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> std::optional&lt;<span class="hljs-type">uint32_t</span>&gt; <span class="hljs-title">PropertySet</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, <span class="hljs-type">const</span> std::string&amp; value,
                                           SocketConnection* socket, std::string* error)</span> </span>{
    <span class="hljs-type">size_t</span> valuelen = value.<span class="hljs-built_in">size</span>();

    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsLegalPropertyName</span>(name)) {
        *error = <span class="hljs-string">"Illegal property name"</span>;
        <span class="hljs-keyword">return</span> {PROP_ERROR_INVALID_NAME};
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">IsLegalPropertyValue</span>(name, value); !result.<span class="hljs-built_in">ok</span>()) {
        *error = result.<span class="hljs-built_in">error</span>().<span class="hljs-built_in">message</span>();
        <span class="hljs-keyword">return</span> {PROP_ERROR_INVALID_VALUE};
    }

    <span class="hljs-keyword">if</span> (name == <span class="hljs-string">"sys.powerctl"</span>) {
        <span class="hljs-comment">// No action here - NotifyPropertyChange will trigger the appropriate action, and since this</span>
        <span class="hljs-comment">// can come to the second thread, we mustn't call out to the __system_property_* functions</span>
        <span class="hljs-comment">// which support multiple readers but only one mutator.</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// __system_property_find</span>
        prop_info* pi = (prop_info*)__system_property_find(name.<span class="hljs-built_in">c_str</span>());
        <span class="hljs-keyword">if</span> (pi != <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-comment">// ro.* properties are actually "write-once".</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">StartsWith</span>(name, <span class="hljs-string">"ro."</span>)) {
                *error = <span class="hljs-string">"Read-only property was already set"</span>;
                <span class="hljs-keyword">return</span> {PROP_ERROR_READ_ONLY_PROPERTY};
            }

            __system_property_update(pi, value.<span class="hljs-built_in">c_str</span>(), valuelen);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">int</span> rc = __system_property_add(name.<span class="hljs-built_in">c_str</span>(), name.<span class="hljs-built_in">size</span>(), value.<span class="hljs-built_in">c_str</span>(), valuelen);
            <span class="hljs-keyword">if</span> (rc &lt; <span class="hljs-number">0</span>) {
                *error = <span class="hljs-string">"__system_property_add failed"</span>;
                <span class="hljs-keyword">return</span> {PROP_ERROR_SET_FAILED};
            }
        }

        <span class="hljs-comment">// Don't write properties to disk until after we have read all default</span>
        <span class="hljs-comment">// properties to prevent them from being overwritten by default values.</span>
        <span class="hljs-type">bool</span> need_persist = <span class="hljs-built_in">StartsWith</span>(name, <span class="hljs-string">"persist."</span>) || <span class="hljs-built_in">StartsWith</span>(name, <span class="hljs-string">"next_boot."</span>);
        <span class="hljs-keyword">if</span> (socket &amp;&amp; persistent_properties_loaded &amp;&amp; need_persist) {
            <span class="hljs-keyword">if</span> (persist_write_thread) {
                persist_write_thread-&gt;<span class="hljs-built_in">Write</span>(name, value, std::<span class="hljs-built_in">move</span>(*socket));
                <span class="hljs-keyword">return</span> {};
            }
            <span class="hljs-built_in">WritePersistentProperty</span>(name, value);
        }
    }

    <span class="hljs-built_in">NotifyPropertyChange</span>(name, value);
    <span class="hljs-keyword">return</span> {PROP_SUCCESS};
}
</code></pre>
<p>[/system/core/init/property_service.cpp](<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-" target="_blank" title="https://xrefandroid.com/android-" ref="nofollow noopener noreferrer">xrefandroid.com/android-</a>
PropertySetæ–¹æ³•ä¸­ï¼Œå…ˆè°ƒç”¨__system_property_findæ–¹æ³•ï¼Œå¦‚æœå·²ç»å½“å‰å±æ€§å­˜åœ¨ï¼Œåˆ™æ›´æ–°å®ƒï¼Œä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ã€‚å…ˆçœ‹çœ‹__system_property_findæ–¹æ³•ã€‚<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fsystem_properties.cpp%23162" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/system_properties.cpp#162" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/system_properties.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">const</span> prop_info* <span class="hljs-title">SystemProperties::Find</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span> </span>{
  <span class="hljs-keyword">if</span> (!initialized_) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
  }

  prop_area* pa = contexts_-&gt;<span class="hljs-built_in">GetPropAreaForName</span>(name);
  <span class="hljs-keyword">if</span> (!pa) {
    <span class="hljs-built_in">async_safe_format_log</span>(ANDROID_LOG_WARN, <span class="hljs-string">"libc"</span>, <span class="hljs-string">"Access denied finding property \"%s\""</span>, name);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
  }

  <span class="hljs-keyword">return</span> pa-&gt;<span class="hljs-built_in">find</span>(name);
}

</code></pre>
<p>SystemPropertiesæ–¹æ³•å…ˆè°ƒç”¨äº†contexts_-&gt;GetPropAreaForNameï¼Œ ç„¶åå†è°ƒç”¨äº†pa-&gt;findã€‚contexts_æ˜¯åœ¨åˆå§‹åŒ–å±æ€§æµç¨‹ä¸­èµ‹å€¼çš„(auto serial_contexts = new (contexts_data_) ContextsSerialized();)ã€‚é€šè¿‡è°ƒç”¨ContextsSerializedè¿”å›äº†prop_areaå¯¹è±¡ï¼Œè¿™é‡Œå°±ä¸è·Ÿè¿›å»çœ‹æ€ä¹ˆè¿”å›prop_areaå¯¹è±¡äº†ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹prop_areaé‡Œé¢çš„findæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fprop_area.cpp%23229" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/prop_area.cpp#229" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/prop_area.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">const</span> prop_info* <span class="hljs-title">prop_area::find</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name)</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">find_property</span>(<span class="hljs-built_in">root_node</span>(), name, <span class="hljs-built_in">strlen</span>(name), <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);
}
</code></pre>
<p>findæ–¹æ³•ç›´æ¥è°ƒç”¨äº†find_propertyæ–¹æ³•ï¼Œé‚£ä¹ˆçœ‹çœ‹find_propertyçš„å®ç°<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fbionic%2Flibc%2Fsystem_properties%2Fprop_area.cpp%23278" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/bionic/libc/system_properties/prop_area.cpp#278" ref="nofollow noopener noreferrer">/bionic/libc/system_properties/prop_area.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">const</span> prop_info* <span class="hljs-title">prop_area::find_property</span><span class="hljs-params">(prop_trie_node* <span class="hljs-type">const</span> trie, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name,
                                          <span class="hljs-type">uint32_t</span> namelen, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* value, <span class="hljs-type">uint32_t</span> valuelen,
                                          <span class="hljs-type">bool</span> alloc_if_needed)</span> </span>{
  <span class="hljs-keyword">if</span> (!trie) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;

  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* remaining_name = name;
  prop_trie_node* current = trie;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* sep = <span class="hljs-built_in">strchr</span>(remaining_name, <span class="hljs-string">'.'</span>);
    <span class="hljs-type">const</span> <span class="hljs-type">bool</span> want_subtree = (sep != <span class="hljs-literal">nullptr</span>);
    <span class="hljs-type">const</span> <span class="hljs-type">uint32_t</span> substr_size = (want_subtree) ? sep - remaining_name : <span class="hljs-built_in">strlen</span>(remaining_name);

    <span class="hljs-keyword">if</span> (!substr_size) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }

    prop_trie_node* root = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-type">uint_least32_t</span> children_offset = <span class="hljs-built_in">atomic_load_explicit</span>(&amp;current-&gt;children, memory_order_relaxed);
    <span class="hljs-keyword">if</span> (children_offset != <span class="hljs-number">0</span>) {
      root = <span class="hljs-built_in">to_prop_trie_node</span>(&amp;current-&gt;children);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (alloc_if_needed) {
      <span class="hljs-type">uint_least32_t</span> new_offset;
      root = <span class="hljs-built_in">new_prop_trie_node</span>(remaining_name, substr_size, &amp;new_offset);
      <span class="hljs-keyword">if</span> (root) {
        <span class="hljs-built_in">atomic_store_explicit</span>(&amp;current-&gt;children, new_offset, memory_order_release);
      }
    }

    <span class="hljs-keyword">if</span> (!root) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }

    current = <span class="hljs-built_in">find_prop_trie_node</span>(root, remaining_name, substr_size, alloc_if_needed);
    <span class="hljs-keyword">if</span> (!current) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }

    <span class="hljs-keyword">if</span> (!want_subtree) <span class="hljs-keyword">break</span>;

    remaining_name = sep + <span class="hljs-number">1</span>;
  }

  <span class="hljs-type">uint_least32_t</span> prop_offset = <span class="hljs-built_in">atomic_load_explicit</span>(&amp;current-&gt;prop, memory_order_relaxed);
  <span class="hljs-keyword">if</span> (prop_offset != <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">to_prop_info</span>(&amp;current-&gt;prop);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (alloc_if_needed) {
    <span class="hljs-type">uint_least32_t</span> new_offset;
    prop_info* new_info = <span class="hljs-built_in">new_prop_info</span>(name, namelen, value, valuelen, &amp;new_offset);
    <span class="hljs-keyword">if</span> (new_info) {
      <span class="hljs-built_in">atomic_store_explicit</span>(&amp;current-&gt;prop, new_offset, memory_order_release);
    }

    <span class="hljs-keyword">return</span> new_info;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
  }
}
</code></pre>
<p>åœ¨find_propertyæ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å±æ€§æ˜¯é€šè¿‡æ ‘æ¥å­˜å‚¨çš„ã€‚__system_property_findæ˜¯ä»æ ‘é‡Œæ‰¾èŠ‚ç‚¹ï¼Œè€Œ__system_property_addæœ€ç»ˆä¹Ÿä¼šè°ƒç”¨åˆ°find_propertyæ–¹æ³•ï¼Œå®ƒæ˜¯å¾€è¿™ä¸ªæ ‘é‡Œæ·»åŠ èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-8">2.3.3 åŠ è½½init.rcæ–‡ä»¶</h4>
<p>åŠ è½½init.rcæ–‡ä»¶æ˜¯åœ¨LoadBootScriptsæ–¹æ³•ä¸­ï¼Œçœ‹çœ‹å®ƒåšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Finit.cpp%23337" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/init.cpp#337" ref="nofollow noopener noreferrer">/system/core/init/init.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">LoadBootScripts</span><span class="hljs-params">(ActionManager&amp; action_manager, ServiceList&amp; service_list)</span> </span>{
    <span class="hljs-comment">// åˆ›å»ºè§£æå™¨</span>
    Parser parser = <span class="hljs-built_in">CreateParser</span>(action_manager, service_list);

    std::string bootscript = <span class="hljs-built_in">GetProperty</span>(<span class="hljs-string">"ro.boot.init_rc"</span>, <span class="hljs-string">""</span>);
    <span class="hljs-keyword">if</span> (bootscript.<span class="hljs-built_in">empty</span>()) {
        parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/system/etc/init/hw/init.rc"</span>);
        <span class="hljs-keyword">if</span> (!parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/system/etc/init"</span>)) {
            late_import_paths.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"/system/etc/init"</span>);
        }
        <span class="hljs-comment">// late_import is available only in Q and earlier release. As we don't</span>
        <span class="hljs-comment">// have system_ext in those versions, skip late_import for system_ext.</span>
        parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/system_ext/etc/init"</span>);
        <span class="hljs-keyword">if</span> (!parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/vendor/etc/init"</span>)) {
            late_import_paths.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"/vendor/etc/init"</span>);
        }
        <span class="hljs-keyword">if</span> (!parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/odm/etc/init"</span>)) {
            late_import_paths.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"/odm/etc/init"</span>);
        }
        <span class="hljs-keyword">if</span> (!parser.<span class="hljs-built_in">ParseConfig</span>(<span class="hljs-string">"/product/etc/init"</span>)) {
            late_import_paths.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"/product/etc/init"</span>);
        }
    } <span class="hljs-keyword">else</span> {
        parser.<span class="hljs-built_in">ParseConfig</span>(bootscript);
    }
}
</code></pre>
<p>é¦–å…ˆçœ‹çœ‹ CreateParser ä¸­çš„ä»£ç <br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Finit.cpp%23270" target="_blank" title="https://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/init.cpp#270" ref="nofollow noopener noreferrer">/system/core/init/init.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Parser <span class="hljs-title">CreateParser</span><span class="hljs-params">(ActionManager&amp; action_manager, ServiceList&amp; service_list)</span> </span>{
    Parser parser;

    parser.<span class="hljs-built_in">AddSectionParser</span>(<span class="hljs-string">"service"</span>, std::<span class="hljs-built_in">make_unique</span>&lt;ServiceParser&gt;(
                                               &amp;service_list, <span class="hljs-built_in">GetSubcontext</span>(), std::<span class="hljs-literal">nullopt</span>));
    parser.<span class="hljs-built_in">AddSectionParser</span>(<span class="hljs-string">"on"</span>, std::<span class="hljs-built_in">make_unique</span>&lt;ActionParser&gt;(&amp;action_manager, <span class="hljs-built_in">GetSubcontext</span>()));
    parser.<span class="hljs-built_in">AddSectionParser</span>(<span class="hljs-string">"import"</span>, std::<span class="hljs-built_in">make_unique</span>&lt;ImportParser&gt;(&amp;parser));

    <span class="hljs-keyword">return</span> parser;
}

std::map&lt;std::string, std::unique_ptr&lt;SectionParser&gt;&gt; section_parsers_;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Parser::AddSectionParser</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, std::unique_ptr&lt;SectionParser&gt; parser)</span> </span>{
    section_parsers_[name] = std::<span class="hljs-built_in">move</span>(parser);
}
</code></pre>
<p>CreateParser æ–¹æ³•åˆ›å»ºäº† ServiceParserã€ActionParserã€å’Œ ImportParserï¼Œå¹¶é€šè¿‡ AddSectionParser å°†å®ƒä»¬æŒ‰åå­—æ³¨å†Œåˆ° Parser å†…éƒ¨çš„ section_parsers_ æ˜ å°„è¡¨ï¼ˆå³é”®ä¸º "service"ã€"on"ã€"import"ï¼‰ä¸­ã€‚<br/>
è€Œéœ€è¦è¿›è¡Œè§£æçš„init.rcæ–‡ä»¶ï¼Œä¹Ÿåªæœ‰è¿™3ç§, ä¸‹é¢ä¸ºinit.rcç®€ç•¥æ–‡ä»¶<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Frootdir%2Finit.rc" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/rootdir/init.rc" ref="nofollow noopener noreferrer">/system/core/rootdir/init.rc</a></p>
<pre><code class="hljs language-C++" lang="C++">...
<span class="hljs-keyword">import</span> /system/etc/init/hw/init.${ro.zygote}.rc

# Cgroups are mounted right before early-init <span class="hljs-keyword">using</span> list from /etc/cgroups.json
on early-init
    # Disable sysrq from keyboard
    write /proc/sys/kernel/sysrq <span class="hljs-number">0</span>
...
service ueventd /system/bin/ueventd
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">core</span>
    critical
...
</code></pre>
<p>è€ŒParseConfigæ–¹æ³•é‡Œé¢ä¼šåˆ¤æ–­æ˜¯ä¸æ˜¯ç›®å½•ï¼Œinit.rcä¸æ˜¯ç›®å½•ï¼Œä¼šè°ƒç”¨ParseConfigFileæ–¹æ³•ï¼Œç»§ç»­çœ‹è¿™ä¸ªæ–¹æ³•ã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fparser.cpp%23134" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/parser.cpp#134" ref="nofollow noopener noreferrer">/system/core/init/parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">Parser::ParseConfigFile</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; path)</span> </span>{
    ...
    <span class="hljs-comment">// ä»è·¯å¾„ä¸­è¯»å–æ–‡ä»¶</span>
    <span class="hljs-keyword">auto</span> config_contents = <span class="hljs-built_in">ReadFile</span>(path);
    
    <span class="hljs-comment">// è§£ææ•°æ®</span>
    <span class="hljs-built_in">ParseData</span>(path, &amp;config_contents.<span class="hljs-built_in">value</span>());

    <span class="hljs-built_in">LOG</span>(VERBOSE) &lt;&lt; <span class="hljs-string">"(Parsing "</span> &lt;&lt; path &lt;&lt; <span class="hljs-string">" took "</span> &lt;&lt; t &lt;&lt; <span class="hljs-string">".)"</span>;
    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>ç»§ç»­çœ‹çœ‹ParseDataä¸­æ€ä¹ˆå¤„ç†çš„<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fparser.cpp%2345" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/parser.cpp#45" ref="nofollow noopener noreferrer">/system/core/init/parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-comment">// system/core/init/parser.cpp</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Parser::ParseData</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filename, std::string* data)</span> </span>{
    ...

    <span class="hljs-keyword">for</span> (;;) {
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">next_token</span>(&amp;state)) {
            <span class="hljs-keyword">case</span> T_EOF:
                <span class="hljs-built_in">end_section</span>();

                <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [section_name, section_parser] : section_parsers_) {
                    section_parser-&gt;<span class="hljs-built_in">EndFile</span>();
                }

                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">case</span> T_NEWLINE: {
                state.line++;
                <span class="hljs-keyword">if</span> (args.<span class="hljs-built_in">empty</span>()) <span class="hljs-keyword">break</span>;
                <span class="hljs-comment">// If we have a line matching a prefix we recognize, call its callback and unset any</span>
                <span class="hljs-comment">// current section parsers.  This is meant for /sys/ and /dev/ line entries for</span>
                <span class="hljs-comment">// uevent.</span>
                <span class="hljs-keyword">auto</span> line_callback = std::<span class="hljs-built_in">find_if</span>(
                    line_callbacks_.<span class="hljs-built_in">begin</span>(), line_callbacks_.<span class="hljs-built_in">end</span>(),
                    [&amp;args](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; c) { <span class="hljs-keyword">return</span> android::base::<span class="hljs-built_in">StartsWith</span>(args[<span class="hljs-number">0</span>], c.first); });
                <span class="hljs-keyword">if</span> (line_callback != line_callbacks_.<span class="hljs-built_in">end</span>()) {
                    <span class="hljs-built_in">end_section</span>();

                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = line_callback-&gt;<span class="hljs-built_in">second</span>(std::<span class="hljs-built_in">move</span>(args)); !result.<span class="hljs-built_in">ok</span>()) {
                        parse_error_count_++;
                        <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; state.line &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (section_parsers_.<span class="hljs-built_in">count</span>(args[<span class="hljs-number">0</span>])) { <span class="hljs-comment">// 1</span>
                    <span class="hljs-built_in">end_section</span>();
                    section_parser = section_parsers_[args[<span class="hljs-number">0</span>]].<span class="hljs-built_in">get</span>();
                    section_start_line = state.line;
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result =
                                section_parser-&gt;<span class="hljs-built_in">ParseSection</span>(std::<span class="hljs-built_in">move</span>(args), filename, state.line);
                        !result.<span class="hljs-built_in">ok</span>()) {
                        parse_error_count_++;
                        <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; state.line &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
                        section_parser = <span class="hljs-literal">nullptr</span>;
                        bad_section_found = <span class="hljs-literal">true</span>;
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (section_parser) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = section_parser-&gt;<span class="hljs-built_in">ParseLineSection</span>(std::<span class="hljs-built_in">move</span>(args), state.line);
                        !result.<span class="hljs-built_in">ok</span>()) {
                        parse_error_count_++;
                        <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; state.line &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!bad_section_found) {
                    parse_error_count_++;
                    <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; state.line
                               &lt;&lt; <span class="hljs-string">": Invalid section keyword found"</span>;
                }
                args.<span class="hljs-built_in">clear</span>();
                <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">case</span> T_TEXT:
                args.<span class="hljs-built_in">emplace_back</span>(state.text);
                <span class="hljs-keyword">break</span>;
        }
    }
}
</code></pre>
<p>éœ€è¦å…ˆè¯´æ˜1å¤„çš„ std::mapÂ çš„Â count() Â å‡½æ•°ç”¨äºæ£€æŸ¥æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨äºæ˜ å°„ä¸­ã€‚<br/>
section_parsers_ä¹‹å‰æ·»åŠ äº†on, service, importï¼Œå½“éå†init.rcæ–‡ä»¶æ—¶ï¼Œå¦‚æœæ˜¯è¿™å‡ ä¸ªå­—ç¬¦ä¸²ï¼Œsection_parser = section_parsers_[args[0]].get();ä¼šæ‹¿åˆ°å¯¹åº”çš„è§£æå™¨ã€‚<br/>
å¦‚Service ç±»å‹è¯­å¥ä¼šä½¿ç”¨ ServiceParser è§£æ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice_parser.cpp%23642" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service_parser.cpp#642" ref="nofollow noopener noreferrer">/system/core/init/service_parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">ServiceParser::ParseSection</span><span class="hljs-params">(std::vector&lt;std::string&gt;&amp;&amp; args,
                                         <span class="hljs-type">const</span> std::string&amp; filename, <span class="hljs-type">int</span> line)</span> </span>{
    <span class="hljs-comment">// åˆ¤æ–­å‚æ•°æ˜¯å¦å°‘äº3ä¸ª</span>
    <span class="hljs-keyword">if</span> (args.<span class="hljs-built_in">size</span>() &lt; <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Error</span>() &lt;&lt; <span class="hljs-string">"services must have a name and a program"</span>;
    }

    <span class="hljs-type">const</span> std::string&amp; name = args[<span class="hljs-number">1</span>];
    <span class="hljs-comment">// åˆ¤æ–­ Service çš„ name æœ‰æ•ˆæ€§</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsValidName</span>(name)) { 
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Error</span>() &lt;&lt; <span class="hljs-string">"invalid service name '"</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">"'"</span>;
    }
    ...

    <span class="hljs-comment">// æ„é€  Service å¯¹è±¡</span>
    service_ = std::<span class="hljs-built_in">make_unique</span>&lt;Service&gt;(name, restart_action_subcontext, filename, str_args);
    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>åœ¨è§£æå®Œinit.rcæ–‡ä»¶ä¹‹åï¼ŒParseDataä¼šåœ¨å¾ªç¯ä¸­æ‰§è¡Œend_sectionæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fparser.cpp%2362" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/parser.cpp#62" ref="nofollow noopener noreferrer">/system/core/init/parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++">    <span class="hljs-keyword">auto</span> end_section = [&amp;] {
        bad_section_found = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (section_parser == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = section_parser-&gt;<span class="hljs-built_in">EndSection</span>(); !result.<span class="hljs-built_in">ok</span>()) {
            parse_error_count_++;
            <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; section_start_line &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
        }

        section_parser = <span class="hljs-literal">nullptr</span>;
        section_start_line = <span class="hljs-number">-1</span>;
    };
</code></pre>
<p>ç»§ç»­è·‘åˆ°å¯¹åº”è§£æå™¨çš„EndSectionï¼Œæ­¤å¤„çœ‹ä¸‹ServiceParserçš„EndSectionæ–¹æ³•<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice_parser.cpp%23689" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service_parser.cpp#689" ref="nofollow noopener noreferrer">/system/core/init/service_parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">ServiceParser::EndSection</span><span class="hljs-params">()</span> </span>{
    ...

    service_list_-&gt;<span class="hljs-built_in">AddService</span>(std::<span class="hljs-built_in">move</span>(service_));

    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>å®é™…ä¸Šè¿™é‡Œå°±æ˜¯æŠŠæ„å»ºçš„serviceå¯¹è±¡æ·»åŠ åˆ°service_list_ä¸­ã€‚</p>
<p>å†çœ‹çœ‹onå¯¹åº”è§£æå™¨åšäº†ä»€ä¹ˆã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Faction_parser.cpp%23133" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/action_parser.cpp#133" ref="nofollow noopener noreferrer">/system/core/init/action_parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">ActionParser::ParseSection</span><span class="hljs-params">(std::vector&lt;std::string&gt;&amp;&amp; args,
                                        <span class="hljs-type">const</span> std::string&amp; filename, <span class="hljs-type">int</span> line)</span> </span>{
    ...
    <span class="hljs-keyword">auto</span> action = std::<span class="hljs-built_in">make_unique</span>&lt;Action&gt;(<span class="hljs-literal">false</span>, action_subcontext, filename, line, event_trigger,
                                           property_triggers);

    action_ = std::<span class="hljs-built_in">move</span>(action);
    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Faction_parser.cpp%23173" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/action_parser.cpp#173" ref="nofollow noopener noreferrer">/system/core/init/action_parser.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">ActionParser::EndSection</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (action_ &amp;&amp; action_-&gt;<span class="hljs-built_in">NumCommands</span>() &gt; <span class="hljs-number">0</span>) {
        action_manager_-&gt;<span class="hljs-built_in">AddAction</span>(std::<span class="hljs-built_in">move</span>(action_));
    }

    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>ç±»ä¼¼äºServiceParser, ActionParserå…ˆé€šè¿‡ParseSectionæ„é€ actionï¼Œåœ¨EndSectionæ·»åŠ åˆ°äº†action_managerä¸­ã€‚
SecondStageMainåç»­ä¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­å»æ‰§è¡Œè¿™äº›activonï¼Œå¦‚ä¸‹ï¼š<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Finit.cpp%231103" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/init.cpp#1103" ref="nofollow noopener noreferrer">/system/core/init/init.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++">    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        ...
        <span class="hljs-keyword">if</span> (!(prop_waiter_state.<span class="hljs-built_in">MightBeWaiting</span>() || Service::<span class="hljs-built_in">is_exec_service_running</span>())) {
            am.<span class="hljs-built_in">ExecuteOneCommand</span>();
            <span class="hljs-comment">// If there's more work to do, wake up again immediately.</span>
            <span class="hljs-keyword">if</span> (am.<span class="hljs-built_in">HasMoreCommands</span>()) {
                next_action_time = boot_clock::<span class="hljs-built_in">now</span>();
            }
        }
        ...
    }
</code></pre>
<p>ä»£ç ä¸­çš„amå°±æ˜¯ActionManageï¼Œçœ‹çœ‹ExecuteOneCommandåšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Faction_manager.cpp%2367" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/action_manager.cpp#67" ref="nofollow noopener noreferrer">/system/core/init/action_manager.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ActionManager::ExecuteOneCommand</span><span class="hljs-params">()</span> </span>{
    {
        <span class="hljs-keyword">auto</span> lock = std::lock_guard{event_queue_lock_};
        <span class="hljs-comment">// å–å‡ºå¯æ‰§è¡Œçš„ Action</span>
        <span class="hljs-keyword">while</span> (current_executing_actions_.<span class="hljs-built_in">empty</span>() &amp;&amp; !event_queue_.<span class="hljs-built_in">empty</span>()) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; action : actions_) {
                <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">visit</span>([&amp;action](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; event) { <span class="hljs-keyword">return</span> action-&gt;<span class="hljs-built_in">CheckEvent</span>(event); },
                               event_queue_.<span class="hljs-built_in">front</span>())) {
                    current_executing_actions_.<span class="hljs-built_in">emplace</span>(action.<span class="hljs-built_in">get</span>());
                }
            }
            event_queue_.<span class="hljs-built_in">pop</span>();
        }
    }

    <span class="hljs-comment">// æ‰§è¡Œaction</span>
    action-&gt;<span class="hljs-built_in">ExecuteOneCommand</span>(current_command_);
    ...
}
</code></pre>
<p>åœ¨ExecuteOneCommandä¸­ä¼šä»event_queue_ä¸­å–å‡ºå¯æ‰§è¡Œçš„acitonå¹¶ä¸”æ‰§è¡Œã€‚</p>
<p>å°ç»“ä¸€ä¸‹æ­¤å¤„ï¼šè§£æinit.rcæ–‡ä»¶ï¼Œå°†serviceæ·»åŠ åˆ°service_listä¸­ï¼Œå°†actionæ·»åŠ åˆ°action_managerä¸­ï¼Œåç»­åœ¨ä¸€ä¸ªå¾ªç¯ä¸­æ‰§è¡Œaction_managerä¸­çš„actionã€‚</p>
<h4 data-id="heading-9">2.3.4 å¯åŠ¨zygote</h4>
<p>åœ¨çŸ¥é“äº†ä¸Šé¢è¿™äº›åï¼Œå†æ¥çœ‹çœ‹initæ˜¯å¦‚ä½•å¯åŠ¨zygoteçš„å‘¢ï¼Ÿ</p>
<p>zygoteçš„rcæ–‡ä»¶æ˜¯é€šè¿‡importå¯¼å…¥çš„ï¼Œä¼šé€šè¿‡ImportParserå¯¼å…¥zygote.rcã€‚<br/>
init.zygote64.rcæ–‡ä»¶<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Frootdir%2Finit.zygote64.rc" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/rootdir/init.zygote64.rc" ref="nofollow noopener noreferrer">/system/core/rootdir/init.zygote64.rc</a></p>
<pre><code class="hljs language-rc" lang="rc">service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote
    class main
    priority -20
    user root
    group root readproc reserved_disk
    socket zygote stream 660 root system
    socket usap_pool_primary stream 660 root system
    ...
</code></pre>
<p>æ­¤å¤„class ä¸º main å¯¹åº”initä¸­çš„<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Frootdir%2Finit.rc" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/rootdir/init.rc" ref="nofollow noopener noreferrer">/system/core/rootdir/init.rc</a></p>
<pre><code class="hljs language-rc" lang="rc">on nonencrypted
    class_start main
    class_start late_start
</code></pre>
<p>åœ¨SecondStageMainä¸­çš„å¾ªç¯å»æ‰§è¡Œactionæ—¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„onè¯­å¥, æ‰§è¡Œclass_startï¼Œå®ƒå¯¹åº”çš„æ–¹æ³•æ˜¯do_class_startï¼Œå¦‚ä¸‹<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fbuiltins.cpp%231320" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/builtins.cpp#1320" ref="nofollow noopener noreferrer">/system/core/init/builtins.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-comment">// Builtin-function-map start</span>
<span class="hljs-function"><span class="hljs-type">const</span> BuiltinFunctionMap&amp; <span class="hljs-title">GetBuiltinFunctionMap</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">constexpr</span> std::<span class="hljs-type">size_t</span> kMax = std::numeric_limits&lt;std::<span class="hljs-type">size_t</span>&gt;::<span class="hljs-built_in">max</span>();
    <span class="hljs-comment">// clang-format off</span>
    <span class="hljs-type">static</span> <span class="hljs-type">const</span> BuiltinFunctionMap builtin_functions = {
        ...
        {<span class="hljs-string">"class_start"</span>,             {<span class="hljs-number">1</span>,     <span class="hljs-number">1</span>,    {<span class="hljs-literal">false</span>,  do_class_start}}},
        ...
    }
}
</code></pre>
<p>ç»§ç»­çœ‹çœ‹do_class_startåšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fbuiltins.cpp%23166" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/builtins.cpp#166" ref="nofollow noopener noreferrer">/system/core/init/builtins.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">do_class_start</span><span class="hljs-params">(<span class="hljs-type">const</span> BuiltinArguments&amp; args)</span> </span>{
    ...
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; service : ServiceList::<span class="hljs-built_in">GetInstance</span>()) {
        <span class="hljs-keyword">if</span> (service-&gt;<span class="hljs-built_in">classnames</span>().<span class="hljs-built_in">count</span>(args[<span class="hljs-number">1</span>])) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> result = service-&gt;<span class="hljs-built_in">StartIfNotDisabled</span>(); !result.<span class="hljs-built_in">ok</span>()) {
                <span class="hljs-built_in">LOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"Could not start service '"</span> &lt;&lt; service-&gt;<span class="hljs-built_in">name</span>()
                           &lt;&lt; <span class="hljs-string">"' as part of class '"</span> &lt;&lt; args[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">"': "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>();
            }
        }
    }
    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>do_class_startä¼šå»éå†ServiceListï¼Œç„¶åå»è°ƒç”¨StartIfNotDisabledæ–¹æ³•ã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice.cpp%23857" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service.cpp#857" ref="nofollow noopener noreferrer">/system/core/init/service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">Service::StartIfNotDisabled</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (!(flags_ &amp; SVC_DISABLED)) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Start</span>();
    } <span class="hljs-keyword">else</span> {
        flags_ |= SVC_DISABLED_START;
    }
    <span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>StartIfNotDisabledç»§ç»­è°ƒç”¨äº†Startæ–¹æ³•ã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice.cpp%23586" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service.cpp#586" ref="nofollow noopener noreferrer">/system/core/init/service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function">Result&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">Service::Start</span><span class="hljs-params">()</span> </span>{
    ...

    <span class="hljs-type">pid_t</span> pid = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">if</span> (namespaces_.flags) {
        pid = <span class="hljs-built_in">clone</span>(<span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>, namespaces_.flags | SIGCHLD, <span class="hljs-literal">nullptr</span>);
    } <span class="hljs-keyword">else</span> {
        pid = fork();
    }

    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) { <span class="hljs-comment">// 1</span>
        <span class="hljs-built_in">umask</span>(<span class="hljs-number">077</span>);
        cgroups_activated.<span class="hljs-built_in">CloseWriteFd</span>();
        setsid_finished.<span class="hljs-built_in">CloseReadFd</span>();
        <span class="hljs-built_in">RunService</span>(descriptors, std::<span class="hljs-built_in">move</span>(cgroups_activated), std::<span class="hljs-built_in">move</span>(setsid_finished)); <span class="hljs-comment">// 2</span>
        _exit(<span class="hljs-number">127</span>);
    } <span class="hljs-keyword">else</span> {
        cgroups_activated.<span class="hljs-built_in">CloseReadFd</span>();
        setsid_finished.<span class="hljs-built_in">CloseWriteFd</span>();
    }

    ...
}
</code></pre>
<p>åœ¨Startæ–¹æ³•ä¸­, 1å¤„è°ƒç”¨äº†forkå‡½æ•°, forkå‡½æ•°è¿”å›pidä¸º0ä»£è¡¨æ˜¯å­è¿›ç¨‹ï¼Œç»§ç»­æ‰§è¡Œ2å¤„çš„RunServiceã€‚<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice.cpp%23529" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service.cpp#529" ref="nofollow noopener noreferrer">/system/core/init/service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Service::RunService</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;Descriptor&gt;&amp; descriptors,
                         InterprocessFifo cgroups_activated, InterprocessFifo setsid_finished)</span> </span>{
    ...

    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">ExpandArgsAndExecv</span>(args_, sigstop_)) {
        <span class="hljs-built_in">PLOG</span>(ERROR) &lt;&lt; <span class="hljs-string">"cannot execv('"</span> &lt;&lt; args_[<span class="hljs-number">0</span>]
                    &lt;&lt; <span class="hljs-string">"'). See the 'Debugging init' section of init's README.md for tips"</span>;
    }
}
</code></pre>
<p>è°ƒç”¨äº†ExpandArgsAndExecvæ–¹æ³•ï¼Œçœ‹çœ‹å®ƒåšäº†ä»€ä¹ˆ<br/>
<a href="https://link.juejin.cn?target=http%3A%2F%2Fxrefandroid.com%2Fandroid-15.0.0_r1%2Fxref%2Fsystem%2Fcore%2Finit%2Fservice.cpp%23116" target="_blank" title="http://xrefandroid.com/android-15.0.0_r1/xref/system/core/init/service.cpp#116" ref="nofollow noopener noreferrer">/system/core/init/service.cpp</a></p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">bool</span> <span class="hljs-title">ExpandArgsAndExecv</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;std::string&gt;&amp; args, <span class="hljs-type">bool</span> sigstop)</span> </span>{
    std::vector&lt;std::string&gt; expanded_args;
    std::vector&lt;<span class="hljs-type">char</span>*&gt; c_strings;

    expanded_args.<span class="hljs-built_in">resize</span>(args.<span class="hljs-built_in">size</span>());
    c_strings.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(args[<span class="hljs-number">0</span>].<span class="hljs-built_in">data</span>()));
    <span class="hljs-keyword">for</span> (std::<span class="hljs-type">size_t</span> i = <span class="hljs-number">1</span>; i &lt; args.<span class="hljs-built_in">size</span>(); ++i) {
        <span class="hljs-keyword">auto</span> expanded_arg = <span class="hljs-built_in">ExpandProps</span>(args[i]);
        <span class="hljs-keyword">if</span> (!expanded_arg.<span class="hljs-built_in">ok</span>()) {
            <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; args[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">": cannot expand arguments': "</span> &lt;&lt; expanded_arg.<span class="hljs-built_in">error</span>();
        }
        expanded_args[i] = *expanded_arg;
        c_strings.<span class="hljs-built_in">push_back</span>(expanded_args[i].<span class="hljs-built_in">data</span>());
    }
    c_strings.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">nullptr</span>);

    <span class="hljs-keyword">if</span> (sigstop) {
        <span class="hljs-built_in">kill</span>(<span class="hljs-built_in">getpid</span>(), SIGSTOP);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">execv</span>(c_strings[<span class="hljs-number">0</span>], c_strings.<span class="hljs-built_in">data</span>()) == <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™é‡Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†execvæ–¹æ³•ï¼Œæ‰¾åˆ°/system/bin/app_process64ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»è€Œå¯åŠ¨zygoteè¿›ç¨‹ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€æ€»ç»“</h2>
<p>è‡³æ­¤å°±åˆ†æå®Œäº†initè¿›ç¨‹ï¼Œæ¯ä¸ªé˜¶æ®µæ‰§è¡Œå†…å®¹ï¼š</p>

























<table><thead><tr><th>é˜¶æ®µ</th><th>å¯¹åº”æ–‡ä»¶</th><th>å…³é”®ä»»åŠ¡</th></tr></thead><tbody><tr><td>FirstStageMain</td><td>first_stage_init.cpp</td><td>æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€è¿›å…¥ selinux_setup</td></tr><tr><td>SetupSelinux</td><td>selinux.cpp</td><td>åŠ è½½ SELinux ç­–ç•¥å¹¶å¯ç”¨</td></tr><tr><td>SecondStageMain</td><td>init.cpp</td><td>åˆå§‹åŒ–å¹¶å¼€å¯å±æ€§æœåŠ¡ã€åŠ è½½ rc æ–‡ä»¶ã€å¯åŠ¨ Zygote</td></tr></tbody></table>
<p>3ä¸ªé˜¶æ®µéƒ½ä¼šå»åˆå§‹åŒ–åˆå§‹åŒ–Kernelæ—¥å¿—ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥é¿å…é˜¶æ®µä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ä½è€¦åˆï¼Œé«˜å†…èšã€‚</p>
<p>å½“åŠ è½½init.rcæ–‡ä»¶æ—¶ï¼Œåœ¨ServiceParser::ParseSectionæ–¹æ³•ä¸­ï¼Œä¼šæŠŠserviceè¯­å¥åŒ…è£…æˆstd::unique_ptrï¼Œåœ¨ServiceParser::EndSectionæ–¹æ³•ä¸­æ·»åŠ åˆ°ServiceListï¼ŒåŒç†onè¯­å¥ä¹Ÿä¼šæ·»åŠ åˆ°ActionManagerï¼Œåé¢åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œéå†ActionManagerã€‚<br/>
åœ¨init_zygotexx.rcæ–‡ä»¶ä¸­ï¼ŒZygoteçš„classä¸ºmainï¼Œå½“è§£æåˆ°nonencryptedè¯­å¥æ—¶</p>
<pre><code class="hljs language-rc" lang="rc">on nonencrypted
    class_start main
    class_start late_start
</code></pre>
<p>ä¼šæ‰§è¡Œclass_startï¼Œå®ƒå¯¹åº”çš„æ–¹æ³•æ˜¯do_class_startï¼Œéå†æœåŠ¡serviceListï¼Œä»è€Œæ‰¾åˆ°å¯¹åº”çš„æœåŠ¡å¼€å¯ï¼Œè°ƒç”¨Service::Start æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå…ˆforkå‡ºå­è¿›ç¨‹ï¼Œç„¶åæ‰§è¡Œexecv, ä¼šæ‰¾åˆ°å¯¹åº”çš„å¯æ‰§è¡Œæ€§æ–‡ä»¶app_processï¼Œä»è€Œå¯åŠ¨äº†Zygoteã€‚</p>
<p>æœ€ååˆ†äº«å‡ ä¸ªçœ‹Androidç³»ç»Ÿæºç çš„ç½‘ç«™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2Fmain%2F" target="_blank" title="https://cs.android.com/android/platform/superproject/main/" ref="nofollow noopener noreferrer">cs.android.com/android/plaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Faospxref.com%2F" target="_blank" title="http://aospxref.com/" ref="nofollow noopener noreferrer">aospxref.com/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.androidos.net.cn%2Fsourcecode" target="_blank" title="https://www.androidos.net.cn/sourcecode" ref="nofollow noopener noreferrer">Android OS åœ¨çº¿æºä»£ç  - https://www.androidos.net.cn</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxrefandroid.com%2F" target="_blank" title="https://xrefandroid.com/" ref="nofollow noopener noreferrer">XRefAndroid - Support Android 16.0 &amp; OpenHarmony 6.0 (AndroidXRef/AospXRef)</a></li>
</ul>
<p>æ„Ÿè°¢é˜…è¯»ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œ<strong>å¦‚æœ‰ä»»ä½•ä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡º</strong>ã€‚</p>
<h2 data-id="heading-11">å››ã€å‚è€ƒèµ„æ–™</h2>
<p>ã€ŠAndroidè¿›é˜¶è§£å¯†ã€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Swift ä¸­ï¼Œå‚æ•°æ ‡ç­¾ï¼ˆargument labelï¼‰ï¼Œç”¨äºåœ¨è°ƒç”¨å‡½æ•°æ—¶æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚]]></title>    <link>https://juejin.cn/post/7571786149591171123</link>    <guid>https://juejin.cn/post/7571786149591171123</guid>    <pubDate>2025-11-13T06:51:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571786149591171123" data-draft-id="7571892340877852710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Swift ä¸­ï¼Œå‚æ•°æ ‡ç­¾ï¼ˆargument labelï¼‰ï¼Œç”¨äºåœ¨è°ƒç”¨å‡½æ•°æ—¶æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:51:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024å°ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/70007368988926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Swift ä¸­ï¼Œå‚æ•°æ ‡ç­¾ï¼ˆargument labelï¼‰ï¼Œç”¨äºåœ¨è°ƒç”¨å‡½æ•°æ—¶æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/70007368988926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024å°ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:51:48.000Z" title="Thu Nov 13 2025 06:51:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘çš„å¼€æºé¡¹ç›®PakePluså¯ä»¥å°†ç½‘é¡µ/Vue/Reacté¡¹ç›®æ‰“åŒ…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨å¹¶ä¸”å°äº5Måªéœ€å‡ åˆ†é’Ÿï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpakeplus.com" target="_blank" title="https://pakeplus.com" ref="nofollow noopener noreferrer">pakeplus.com</a></p><p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58d2959c31c84cbb8d5159fa8170dee1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1946" loading="lazy"/></p><p/>
<h3 data-id="heading-0">1. å‡½æ•°ç­¾ååˆ†æ</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-params">didUpdate</span> <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)</code></pre>
<ul>
	<li>
	<p><code>func session</code>ï¼šæ–¹æ³•å</p>
	</li>
	<li>
	<p><code>_ session: ARSession</code>ï¼šç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ<code>_</code>Â è¡¨ç¤ºè°ƒç”¨æ—¶çœç•¥å‚æ•°æ ‡ç­¾</p>
	</li>
	<li>
	<p><code>didUpdate frame: ARFrame</code>ï¼šç¬¬äºŒä¸ªå‚æ•°ï¼Œ<code>didUpdate</code>Â æ˜¯å‚æ•°æ ‡ç­¾ï¼Œ<code>frame</code>Â æ˜¯å‚æ•°å</p>
	</li>
</ul>
<h3 data-id="heading-1">2. è°ƒç”¨æ—¶çš„åŒºåˆ«</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆçœç•¥æ ‡ç­¾ï¼‰</span>
<span class="hljs-built_in">session</span>(someARSession, didUpdate: someARFrame)

<span class="hljs-comment">// å¦‚æœæ²¡æœ‰ didUpdate æ ‡ç­¾ï¼Œè°ƒç”¨ä¼šæ˜¯ï¼š</span>
<span class="hljs-built_in">session</span>(someARSession, someARFrame) <span class="hljs-comment">// å¯è¯»æ€§å·®</span></code></pre>
<h3 data-id="heading-2">3.Â <code>didUpdate</code>Â çš„å«ä¹‰</h3>
<ul>
	<li>
	<p><strong>å­—é¢æ„æ€</strong>ï¼š"å·²ç»æ›´æ–°äº†"</p>
	</li>
	<li>
	<p><strong>è¯­ä¹‰ä½œç”¨</strong>ï¼šè¡¨æ˜è¿™ä¸ªå‚æ•°ä»£è¡¨çš„æ˜¯"è¢«æ›´æ–°çš„å¸§"</p>
	</li>
	<li>
	<p><strong>ä»£ç å¯è¯»æ€§</strong>ï¼šè®©è°ƒç”¨ä»£ç è¯»èµ·æ¥åƒè‡ªç„¶è¯­è¨€</p>
	</li>
</ul>
<h3 data-id="heading-3">4. ç±»ä¼¼çš„ä¾‹å­</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å…¶ä»–å¸¸è§çš„å‚æ•°æ ‡ç­¾</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">tableView</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">tableView</span>: <span class="hljs-type">UITableView</span>, <span class="hljs-params">didSelectRowAt</span> <span class="hljs-params">indexPath</span>: <span class="hljs-type">IndexPath</span>)
<span class="hljs-keyword">func</span> <span class="hljs-title function_">textField</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">textField</span>: <span class="hljs-type">UITextField</span>, <span class="hljs-params">shouldChangeCharactersIn</span> <span class="hljs-params">range</span>: <span class="hljs-type">NSRange</span>)</code></pre>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p><code>didUpdate</code>Â æ˜¯ä¸€ä¸ª<strong>å‚æ•°æ ‡ç­¾</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<ul>
	<li>
	<p>æé«˜ä»£ç å¯è¯»æ€§</p>
	</li>
	<li>
	<p>æ˜ç¡®å‚æ•°çš„å«ä¹‰ï¼ˆè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¢«æ›´æ–°çš„å¸§ï¼‰</p>
	</li>
	<li>
	<p>éµå¾ª Swift çš„ API è®¾è®¡æƒ¯ä¾‹</p>
	</li>
</ul>
<p>åœ¨æ–¹æ³•å†…éƒ¨ï¼Œä½ ä½¿ç”¨å‚æ•°åÂ <code>frame</code>Â æ¥è®¿é—®è¿™ä¸ªå€¼ï¼Œè€Œåœ¨è°ƒç”¨æ—¶ä½¿ç”¨Â <code>didUpdate</code>Â æ ‡ç­¾æ¥ä½¿ä»£ç æ›´åŠ æ¸…æ™°</p>
<p/>
<p>Swift ä½¿ç”¨å‚æ•°æ ‡ç­¾çš„è®¾è®¡æ˜¯ä¸ºäº†<strong>è§£å†³å¤šä¸ªé—®é¢˜</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æŠ€æœ¯å¿…è¦æ€§ã€‚</p>
<h2 data-id="heading-5">ä¸»è¦åŸå› ï¼š</h2>
<h3 data-id="heading-6">1. æé«˜ä»£ç å¯è¯»æ€§</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æœ‰æ ‡ç­¾ - è¯»èµ·æ¥åƒè‡ªç„¶è¯­è¨€</span>
<span class="hljs-built_in">session</span>(someSession, didUpdate: currentFrame)

<span class="hljs-comment">// æ— æ ‡ç­¾ - å«ä¹‰ä¸æ˜ç¡®</span>
<span class="hljs-built_in">session</span>(someSession, currentFrame) <span class="hljs-comment">// è¿™ä¸ª currentFrame æ˜¯ä»€ä¹ˆï¼Ÿ</span></code></pre>
<h3 data-id="heading-7">2. åŒºåˆ†å¤šä¸ªå‚æ•°</h3>
<p>å½“æ–¹æ³•æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œæ ‡ç­¾å°¤ä¸ºé‡è¦ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ¸…æ™°æ˜ç¡®</span>
<span class="hljs-selector-tag">func</span> <span class="hljs-selector-tag">calculateArea</span>(of <span class="hljs-attribute">shape</span>: String, <span class="hljs-attribute">width</span>: Double, <span class="hljs-attribute">height</span>: Double)

<span class="hljs-selector-tag">calculateArea</span>(<span class="hljs-attribute">of</span>: <span class="hljs-string">"rectangle"</span>, <span class="hljs-attribute">width</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">5</span>)

<span class="hljs-comment">// å¯¹æ¯”ï¼šæ²¡æœ‰æ ‡ç­¾ä¼šå¾ˆæ··ä¹±</span>
<span class="hljs-selector-tag">calculateArea</span>(<span class="hljs-string">"rectangle"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">// 10 å’Œ 5 åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ</span></code></pre>
<h3 data-id="heading-8">3. éµå¾ª Swift API è®¾è®¡å‡†åˆ™</h3>
<p>Swift é¼“åŠ±ç¼–å†™"è‡ªæ–‡æ¡£åŒ–"çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// Swift é£æ ¼ - å¯è¯»æ€§å¼º</span>
<span class="hljs-selector-tag">x</span><span class="hljs-selector-class">.addSubview</span>(y)
<span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.setTitle</span>(<span class="hljs-string">"Hello"</span>, <span class="hljs-attribute">for</span>: .normal)

<span class="hljs-comment">// å¯¹æ¯”å…¶ä»–è¯­è¨€ - å¯è¯»æ€§è¾ƒå·®</span>
<span class="hljs-selector-tag">x</span><span class="hljs-selector-class">.add</span>(y)
<span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.setTitle</span>(<span class="hljs-string">"Hello"</span>, .normal)</code></pre>
<h3 data-id="heading-9">4. æ–¹æ³•é‡è½½æ—¶çš„æ¸…æ™°åº¦</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">to</span> <span class="hljs-params">position</span>: <span class="hljs-type">CGPoint</span>)
<span class="hljs-keyword">func</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">by</span> <span class="hljs-params">delta</span>: <span class="hljs-type">CGVector</span>)
<span class="hljs-keyword">func</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">towards</span> <span class="hljs-params">direction</span>: <span class="hljs-type">Direction</span>)

<span class="hljs-comment">// è°ƒç”¨æ—¶éå¸¸æ¸…æ™°</span>
move(to: targetPosition)
move(by: movementVector) 
move(towards: .north)</code></pre>
<h2 data-id="heading-10">åœ¨ä½ çš„å…·ä½“ä¾‹å­ä¸­ï¼š</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å½“å‰è®¾è®¡ï¼š</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-params">didUpdate</span> <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)

<span class="hljs-comment">// å¦‚æœå»æ‰æ ‡ç­¾ï¼š</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)

<span class="hljs-comment">// è°ƒç”¨æ—¶ï¼š</span>
session(someSession, frame: someFrame) <span class="hljs-comment">// å«ä¹‰ä¸æ˜ç¡® - æ˜¯è¦è®¾ç½®å¸§ï¼Ÿè¿˜æ˜¯å¸§æ›´æ–°äº†ï¼Ÿ</span></code></pre>
<h2 data-id="heading-11">æŠ€æœ¯ä¸Šçš„ç­‰ä»·æ€§</h2>
<p>å®é™…ä¸Šï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ–¹å¼1ï¼šä½¿ç”¨ä¸åŒæ ‡ç­¾å’Œå‚æ•°å</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-params">didUpdate</span> <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)

<span class="hljs-comment">// æ–¹å¼2ï¼šæ ‡ç­¾å’Œå‚æ•°åç›¸åŒ</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)

<span class="hljs-comment">// æ–¹å¼3ï¼šçœç•¥æ ‡ç­¾ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">session</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">session</span>: <span class="hljs-type">ARSession</span>, <span class="hljs-keyword">_</span> <span class="hljs-params">frame</span>: <span class="hljs-type">ARFrame</span>)</code></pre>
<p/>
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯1024å°ç¥ï¼ŒæŠ€æœ¯ç¾¤ / ç§æ´»ç¾¤ / è‚¡ç¥¨ç¾¤ æˆ– äº¤æœ‹å‹ éƒ½å¯ä»¥ç§ä¿¡æˆ‘ã€‚
å¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (ç‚¹èµã€è¯„è®ºã€å…³æ³¨)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringAI æ•´åˆMCPå®ç°è”ç½‘æœç´¢ (åŸºäºtavily)]]></title>    <link>https://juejin.cn/post/7571722835658883106</link>    <guid>https://juejin.cn/post/7571722835658883106</guid>    <pubDate>2025-11-13T06:25:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571722835658883106" data-draft-id="7571395183943745545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringAI æ•´åˆMCPå®ç°è”ç½‘æœç´¢ (åŸºäºtavily)"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-13T06:25:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="l0sgAi"/> <meta itemprop="url" content="https://juejin.cn/user/328089396327643"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringAI æ•´åˆMCPå®ç°è”ç½‘æœç´¢ (åŸºäºtavily)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/328089396327643/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    l0sgAi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:25:32.000Z" title="Thu Nov 13 2025 06:25:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">ä½¿ç”¨SpringAIæ‰§è¡Œè”ç½‘æœç´¢</h2>
<p><em>æœ¬æ–‡å±äºæˆ‘çš„<code>AI</code>åº”ç”¨å­¦ä¹ ç¬”è®°çš„ä¸€éƒ¨åˆ†ï¼Œæ›´å¤šå†…å®¹è¯·è§ï¼š<a href="https://juejin.cn/column/7510247527553105971" target="_blank" title="https://juejin.cn/column/7510247527553105971">æˆ‘çš„ä¸“æ </a></em></p>
<blockquote>
<p>æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fmcp%2Fmcp-client-boot-starter-docs.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html" ref="nofollow noopener noreferrer">SpringAI-MCP</a></p>
<p><strong>MCPå³æ¨¡å‹ä¸Šä¸‹æ–‡åè®®</strong>ï¼Œæ˜¯ä¸€ç§ç”±<code>Anthropic</code>æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨ç»Ÿä¸€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆ<code>LLM</code>ï¼‰ä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ä¹‹é—´çš„é€šä¿¡åè®®ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯è§£å†³AIæ¨¡å‹å› æ•°æ®å­¤å²›é™åˆ¶è€Œæ— æ³•å……åˆ†å‘æŒ¥æ½œåŠ›çš„é—®é¢˜ï¼Œä½¿å¾—<code>AI</code>åº”ç”¨èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®å’Œæ“ä½œæœ¬åœ°åŠè¿œç¨‹æ•°æ®ã€‚<code>MCP</code>å°±åƒAIä¸–ç•Œçš„â€œ<code>USB-C</code>æ¥å£â€ï¼Œæä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹æ³•ï¼Œå°†<code>AI</code>æ¨¡å‹è¿æ¥åˆ°å„ç§æ•°æ®æºå’Œå·¥å…·ï¼Œä»è€Œæé«˜<code>AI</code>ç³»ç»Ÿçš„å¯é æ€§å’Œæ•ˆç‡ï¼Œé€šè¿‡ä¸€ä¸ªç»Ÿä¸€è§„èŒƒçš„æ¥å£ï¼Œå°±å¯ä»¥è®©å¤§æ¨¡å‹è®¿é—®å¤–éƒ¨çš„å·¥å…·ï¼Œå¹¶æ‰§è¡Œå„ç§æ™ºèƒ½åŒ–æ“ä½œï¼Œæ¯”å¦‚å¸®å¿™å›é‚®ä»¶ã€å¡«è¡¨å•ç­‰ã€‚</p>
</blockquote>
<p><strong>æ³¨æ„ï¼šä½¿ç”¨SpringAIè¿›è¡Œå¼€å‘éœ€è¦JDK17+ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯JDK21ã€‚</strong></p>
<p><code>SpringAI</code>æ˜¯ä¸€ä¸ªä¸»æµçš„<code>Java</code>å¤§æ¨¡å‹å¼€å‘æ¡†æ¶ï¼Œå¯ä»¥ç®€åŒ–æˆ‘ä»¬çš„<code>AI</code>åº”ç”¨å¼€å‘ï¼Œæœ¬æ–‡å°†å°†åˆæ­¥ä»‹ç»ä½¿ç”¨<code>SpringAI</code>é›†æˆ<code>tavily</code>æœç´¢æœåŠ¡ï¼Œåˆ©ç”¨<code>MCP</code>å®ç°è”ç½‘æœç´¢çš„æ–¹æ³•ã€‚</p>
<p><strong>å®Œæ•´é¡¹ç›®åœ°å€:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fl0sgAi%2Fai-chat-demo" target="_blank" title="https://github.com/l0sgAi/ai-chat-demo" ref="nofollow noopener noreferrer">ai-chat-demo</a></strong></p>
<p>å…¶ä¸­ï¼Œ<code>mcp-server</code>åˆ†æ”¯ä¸ºæœ¬æ–‡æ­å»ºçš„<code>mcp</code>æœåŠ¡ï¼Œ<code>main</code>åˆ†æ”¯ä¸º<code>mcp</code>å®¢æˆ·ç«¯åº”ç”¨</p>
<h4 data-id="heading-1">é˜…è¯»æœ¬æ–‡å‰åº”è¯¥æœ‰çš„çŸ¥è¯†åŸºç¡€</h4>
<ul>
<li>JavaåŸºç¡€</li>
<li>Java WebåŸºç¡€</li>
<li>æ•°æ®åº“åŸºç¡€</li>
<li>åŒ…ç®¡ç† (Mavenã€gradleç­‰)</li>
<li>SpringåŸºç¡€ã€SSMæ•´åˆã€SpringBootç­‰</li>
<li>SpringAIåŸºç¡€ï¼Œå‚è€ƒ<a href="https://juejin.cn/column/7510247527553105971" target="_blank" title="https://juejin.cn/column/7510247527553105971">æˆ‘çš„ä¸“æ </a>ä¹‹å‰çš„æ–‡ç« ï¼Œäº†è§£å¦‚ä½•æ­å»ºSpringAIåŸºç¡€åº”ç”¨</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca7b0b607ffe4a9f9e1305f09f5eae29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbDBzZ0Fp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620849&amp;x-signature=deFjD%2Fd9qqJlKNy3vr%2FNA%2Bzqs7s%3D" alt="mcp-struct" loading="lazy"/></p>
<p><code>SpringAI</code>å®˜æ–¹æä¾›çš„æ¶æ„å›¾å¦‚ä¸Šï¼Œæˆ‘ä»¬çš„åº”ç”¨å³<code>MCP Client</code>ï¼Œè°ƒç”¨<code>MCP Server</code>çš„æœç´¢æœåŠ¡ï¼Œå³æˆ‘ä»¬æ¥ä¸‹æ¥è¦åŒæ—¶å¼€å‘æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚</p>
<hr/>
<blockquote>
<p>ä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä½ æƒ³ç”¨çš„æœç´¢æœåŠ¡ï¼Œå¹¶è‡ªè¡Œè¿›è¡Œ<code>MCP Server</code>å¼€å‘ï¼Œè¿™é‡Œç”¨çš„æ˜¯<code>tavily</code></p>
</blockquote>
<h6 data-id="heading-2">1. è·å–API KEY</h6>
<p>é¦–å…ˆè®¿é—®å®˜ç½‘å®˜æ–¹<code>API</code>å¹³å°(æ²¡æœ‰æ³¨å†Œå…ˆç™»å½•æ³¨å†Œ)ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fapp.tavily.com%2Fhome" target="_blank" title="https://app.tavily.com/home" ref="nofollow noopener noreferrer">tavily-home</a></p>
<p>ç„¶åç‚¹å‡»å¤åˆ¶API KEYï¼Œæ¥ä¸‹æ¥è¦ç”¨åˆ°ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e03fec72b2464193acf65a67b502b179~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbDBzZ0Fp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620849&amp;x-signature=Lr%2BsdXIfimgZf311a2e29SjUE8s%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-3">2.æ­å»ºMCP-Server</h6>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fl0sgAi%2Fai-chat-demo%2Ftree%2Fmcp-server" target="_blank" title="https://github.com/l0sgAi/ai-chat-demo/tree/mcp-server" ref="nofollow noopener noreferrer">MCP-Serveræºä»£ç ä»“åº“</a></p>
<p><strong>2.1 å‡†å¤‡å·¥ä½œ</strong></p>
<p>é¦–å…ˆï¼Œå¼•å…¥<code>Maven</code>ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-mcp-server-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0-RC1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç„¶åï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£å†™é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">mcp-server</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">mcp:</span>
      <span class="hljs-attr">server:</span>
        <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">mcp-server</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">ASYNC</span>
        <span class="hljs-attr">instructions:</span> <span class="hljs-string">"This server provides internet information tools and resources"</span>
        <span class="hljs-attr">sse-message-endpoint:</span> <span class="hljs-string">/mcp/search/sse</span>
        <span class="hljs-attr">capabilities:</span>
            <span class="hljs-attr">tool:</span> <span class="hljs-literal">true</span>
            <span class="hljs-attr">resource:</span> <span class="hljs-literal">true</span>
            <span class="hljs-attr">prompt:</span> <span class="hljs-literal">true</span>
            <span class="hljs-attr">completion:</span> <span class="hljs-literal">true</span>

<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8577</span>
</code></pre>
<p>ä¹‹åï¼Œç¼–å†™æ§åˆ¶å™¨æ¥å£<code>SSE</code>ï¼Œéœ€è¦æš´éœ²ä¸€ä¸ªç«¯å£ä»¥ä¾›æ¶ˆæ¯æ¨æµï¼Œå¦åˆ™å®¢æˆ·ç«¯å¯åŠ¨æŠ¥é”™ã€‚</p>
<p><code>SSE</code>ç®¡ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç»Ÿä¸€å¤„ç†sseè¿æ¥
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SseEmitterManager</span> {
    <span class="hljs-comment">// æ”¯æŒçš„åŒæ—¶åœ¨çº¿äººæ•°=SESSION_LIMIT-1 æœ‰ä¸€ä¸ªç›‘æ§sse</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SESSION_LIMIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, SseEmitter&gt; emitterMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * å°†å¯¹è¯è¯·æ±‚åŠ å…¥é˜Ÿåˆ—
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">addEmitter</span><span class="hljs-params">(String sessionId, SseEmitter emitter)</span> {
        <span class="hljs-keyword">if</span> (emitterMap.size() &lt; SESSION_LIMIT) {
            emitterMap.put(sessionId, emitter);
            <span class="hljs-comment">// æ¨æµå½“å‰çº¿ç¨‹æ•°</span>
            <span class="hljs-built_in">this</span>.notifyThreadCount();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">/**
     * è·å–Mapä¸­çš„sseè¿æ¥
     */</span>
    <span class="hljs-keyword">public</span> SseEmitter <span class="hljs-title function_">getEmitter</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-keyword">return</span> emitterMap.get(sessionId);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeEmitter</span><span class="hljs-params">(String sessionId)</span> {
        emitterMap.remove(sessionId);
        <span class="hljs-comment">// æ¨æµå½“å‰çº¿ç¨‹æ•°</span>
        <span class="hljs-built_in">this</span>.notifyThreadCount();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOverLoad</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> emitterMap.size() &gt;= SESSION_LIMIT;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getEmitterCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> emitterMap.size();
    }
    
    <span class="hljs-comment">/**
     * è·å–çº¿ç¨‹ç›‘æ§å®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addThreadMonitor</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç›‘æ§</span>
        emitterMap.put(<span class="hljs-string">"thread-monitor"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SseEmitter</span>(<span class="hljs-number">0L</span>));
    }

    <span class="hljs-comment">/**
     * æ‰‹åŠ¨å‘é€æ¶ˆæ¯ï¼Œé€šçŸ¥å½“å‰å ç”¨çš„çº¿ç¨‹æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyThreadCount</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SseEmitter</span> <span class="hljs-variable">sseEmitter</span> <span class="hljs-operator">=</span> emitterMap.get(<span class="hljs-string">"thread-monitor"</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (emitterMap.containsKey(<span class="hljs-string">"thread-monitor"</span>)) {
                sseEmitter.send(<span class="hljs-built_in">this</span>.getEmitterCount());
            }<span class="hljs-keyword">else</span> {
                addThreadMonitor();
                sseEmitter = emitterMap.get(<span class="hljs-string">"thread-monitor"</span>);
                sseEmitter.send(<span class="hljs-built_in">this</span>.getEmitterCount());
            }
        } <span class="hljs-keyword">catch</span> (IOException e) {
            sseEmitter.completeWithError(e);
            emitterMap.remove(<span class="hljs-string">"thread-monitor"</span>); <span class="hljs-comment">// æ¸…é™¤å¤±æ•ˆè¿æ¥</span>
        }
    }

    <span class="hljs-comment">/**
     * å°†sseè¿æ¥å…¨éƒ¨å…³é—­
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeAll</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">for</span> (SseEmitter emitter : emitterMap.values()) {
            emitter.complete();
        }
        emitterMap.clear();
    }

}
</code></pre>
<p><code>Web</code>æ§åˆ¶å™¨:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@RequestMapping("/mcp/search")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SseEmitterManager sseEmitterManager;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_EMITTER_ID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"search-emitter"</span>;

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªçº¿ç¨‹ç›‘æ§</span>
        sseEmitterManager.addThreadMonitor();
        <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªé»˜è®¤çš„ SSE ç›‘å¬å™¨</span>
        <span class="hljs-comment">// æ³¨å†Œ emitter</span>
        <span class="hljs-type">SseEmitter</span> <span class="hljs-variable">emitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SseEmitter</span>(<span class="hljs-number">0L</span>); <span class="hljs-comment">// æ°¸ä¸è¶…æ—¶</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">emitterId</span> <span class="hljs-operator">=</span> DEFAULT_EMITTER_ID; <span class="hljs-comment">// æˆ–ç”Ÿæˆå”¯ä¸€ID</span>

        emitter.onCompletion(() -&gt; {
            log.info(<span class="hljs-string">"MCP SSE è¿æ¥å®Œæˆ"</span>);
            sseEmitterManager.removeEmitter(emitterId);
        });

        emitter.onTimeout(() -&gt; {
            log.warn(<span class="hljs-string">"MCP SSE è¿æ¥è¶…æ—¶"</span>);
            sseEmitterManager.removeEmitter(emitterId);
        });

        emitter.onError(e -&gt; {
            log.error(<span class="hljs-string">"MCP SSE è¿æ¥é”™è¯¯"</span>, e);
            sseEmitterManager.removeEmitter(emitterId);
        });

        sseEmitterManager.addEmitter(emitterId, emitter);
    }

    <span class="hljs-comment">// ä»…ç”¨äº SSE é€šé“å»ºç«‹</span>
    <span class="hljs-meta">@GetMapping("/sse")</span>
    <span class="hljs-keyword">public</span> SseEmitter <span class="hljs-title function_">connect</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿™é‡Œä¸å¤„ç†queryï¼Œå› ä¸ºå®¢æˆ·ç«¯é¦–æ¬¡è¿æ¥åªæ˜¯å»ºç«‹ä¼šè¯</span>
        <span class="hljs-type">SseEmitter</span> <span class="hljs-variable">emitter</span> <span class="hljs-operator">=</span> sseEmitterManager.getEmitter(DEFAULT_EMITTER_ID);
        <span class="hljs-keyword">if</span> (emitter == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"MCP SSE ç›‘å¬å™¨æœªæ³¨å†Œ"</span>);
            sseEmitterManager.addEmitter(DEFAULT_EMITTER_ID, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SseEmitter</span>(<span class="hljs-number">0L</span>));
        }
        <span class="hljs-keyword">return</span> sseEmitterManager.getEmitter(DEFAULT_EMITTER_ID);
    }

}
</code></pre>
<p><strong>2.2 ç¼–å†™æ£€ç´¢æœåŠ¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SearchService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WebClient webClient;

<span class="hljs-comment">//    private final SseEmitterManager sseEmitterManager;</span>

    <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨è‡ªå·±çš„tavily API KEY</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">baseUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://api.tavily.com"</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">bearerToken</span> <span class="hljs-operator">=</span> <span class="hljs-string">"tvly-dev-***"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SearchServiceImpl</span><span class="hljs-params">(
            SseEmitterManager sseEmitterManager)</span> {
<span class="hljs-comment">//        this.sseEmitterManager = sseEmitterManager;</span>
        <span class="hljs-built_in">this</span>.webClient = WebClient.builder()
                .baseUrl(baseUrl)
                .build();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Tool(name = "webSearch", description = "Searching information from the internet")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">search</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(description = "æœç´¢å…³é”®è¯")</span>
            String query)</span> {

        <span class="hljs-keyword">if</span> (StrUtil.isBlank(query)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"none"</span>;
        }

        <span class="hljs-comment">// æ„å»ºè¯·æ±‚ä½“</span>
        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>();
        req.setQuery(query);
        req.setTopic(<span class="hljs-string">"general"</span>);
        req.setSearchDepth(<span class="hljs-string">"basic"</span>);
        req.setChunksPerSource(<span class="hljs-number">3</span>);
        req.setMaxResults(<span class="hljs-number">5</span>);
        req.setTimeRange(<span class="hljs-literal">null</span>);
        req.setDays(<span class="hljs-number">3</span>);
        req.setIncludeAnswer(<span class="hljs-literal">true</span>);
        req.setIncludeRawContent(<span class="hljs-literal">false</span>);
        req.setIncludeImages(<span class="hljs-literal">false</span>);
        req.setIncludeImageDescriptions(<span class="hljs-literal">false</span>);
        req.setIncludeDomains(Collections.emptyList());
        req.setExcludeDomains(Collections.emptyList());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”ï¼ˆåŒæ­¥é£æ ¼ï¼‰</span>
            <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> webClient.post()
                    .uri(<span class="hljs-string">"/search"</span>)
                    .header(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + bearerToken)
                    .header(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)
                    .bodyValue(req)
                    .retrieve()
                    .onStatus(status -&gt; status.is4xxClientError() || status.is5xxServerError(),
                            ClientResponse::createException)
                    .bodyToMono(SearchResponse.class)
                    .block(Duration.ofSeconds(<span class="hljs-number">15</span>)); <span class="hljs-comment">// è¶…æ—¶æ—¶é—´å¯è°ƒæ•´</span>

            <span class="hljs-keyword">if</span> (resp == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"No results returned."</span>;
            }

            <span class="hljs-comment">// æ„å»ºè¾“å‡ºæ–‡æœ¬</span>
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            out.append(<span class="hljs-string">"Query: "</span>).append(resp.getQuery()).append(<span class="hljs-string">"\n\n"</span>);

            <span class="hljs-keyword">if</span> (resp.getAnswer() != <span class="hljs-literal">null</span> &amp;&amp; !resp.getAnswer().isBlank()) {
                out.append(<span class="hljs-string">"Answer (summary):\n"</span>).append(resp.getAnswer()).append(<span class="hljs-string">"\n\n"</span>);
            }

            List&lt;SearchResult&gt; results = resp.getResults();
            <span class="hljs-keyword">if</span> (results == <span class="hljs-literal">null</span> || results.isEmpty()) {
                out.append(<span class="hljs-string">"No results returned."</span>);
            } <span class="hljs-keyword">else</span> {
                out.append(<span class="hljs-string">"Top results:\n"</span>);
                <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
                <span class="hljs-keyword">for</span> (SearchResult r : results.stream().limit(<span class="hljs-number">5</span>).toList()) {
                    out.append(idx++).append(<span class="hljs-string">". "</span>).append(safe(r.getTitle())).append(<span class="hljs-string">"\n"</span>);
                    out.append(<span class="hljs-string">" URL: "</span>).append(safe(r.getUrl())).append(<span class="hljs-string">"\n"</span>);
                    <span class="hljs-keyword">if</span> (r.getContent() != <span class="hljs-literal">null</span> &amp;&amp; !r.getContent().isBlank()) {
                        <span class="hljs-comment">// æˆªæ–­contentåˆ°åˆç†é•¿åº¦ä»¥å…è¿”å›è¿‡é•¿æ–‡æœ¬</span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">snip</span> <span class="hljs-operator">=</span> r.getContent().length() &gt; <span class="hljs-number">400</span> ? r.getContent().substring(<span class="hljs-number">0</span>, <span class="hljs-number">400</span>) + <span class="hljs-string">"..."</span> : r.getContent();
                        out.append(<span class="hljs-string">" Snippet: "</span>).append(snip).append(<span class="hljs-string">"\n"</span>);
                    }
                    out.append(<span class="hljs-string">" Score: "</span>).append(r.getScore()).append(<span class="hljs-string">"\n\n"</span>);
                }
            }

            out.append(<span class="hljs-string">"API response_time: "</span>).append(safe(resp.getResponseTime())).append(<span class="hljs-string">"s"</span>);
            <span class="hljs-comment">// å‘é€ç»“æœ</span>
<span class="hljs-comment">//            sseEmitterManager.getEmitter(DEFAULT_EMITTER_ID).send(out.toString(), MediaType.TEXT_PLAIN);</span>
            <span class="hljs-keyword">return</span> out.toString();
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            log.error(<span class="hljs-string">"æœç´¢æœåŠ¡é”™è¯¯: "</span>, ex);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Error: "</span> + ex.getMessage();
        }
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">safe</span><span class="hljs-params">(String s)</span> {
        <span class="hljs-keyword">return</span> s == <span class="hljs-literal">null</span> ? <span class="hljs-string">""</span> : s;
    }

    <span class="hljs-meta">@Setter</span>
    <span class="hljs-meta">@Getter</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchRequest</span> {
        <span class="hljs-comment">// getters / setters</span>
        <span class="hljs-keyword">private</span> String query;
        <span class="hljs-keyword">private</span> String topic;
        <span class="hljs-meta">@JsonProperty("search_depth")</span>
        <span class="hljs-keyword">private</span> String searchDepth;
        <span class="hljs-meta">@JsonProperty("chunks_per_source")</span>
        <span class="hljs-keyword">private</span> Integer chunksPerSource;
        <span class="hljs-meta">@JsonProperty("max_results")</span>
        <span class="hljs-keyword">private</span> Integer maxResults;
        <span class="hljs-meta">@JsonProperty("time_range")</span>
        <span class="hljs-keyword">private</span> Object timeRange;
        <span class="hljs-keyword">private</span> Integer days;
        <span class="hljs-meta">@JsonProperty("include_answer")</span>
        <span class="hljs-keyword">private</span> Boolean includeAnswer;
        <span class="hljs-meta">@JsonProperty("include_raw_content")</span>
        <span class="hljs-keyword">private</span> Boolean includeRawContent;
        <span class="hljs-meta">@JsonProperty("include_images")</span>
        <span class="hljs-keyword">private</span> Boolean includeImages;
        <span class="hljs-meta">@JsonProperty("include_image_descriptions")</span>
        <span class="hljs-keyword">private</span> Boolean includeImageDescriptions;
        <span class="hljs-meta">@JsonProperty("include_domains")</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; includeDomains;
        <span class="hljs-meta">@JsonProperty("exclude_domains")</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; excludeDomains;

    }

    <span class="hljs-meta">@Setter</span>
    <span class="hljs-meta">@Getter</span>
    <span class="hljs-meta">@JsonIgnoreProperties(ignoreUnknown = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchResponse</span> {
        <span class="hljs-comment">// getters / setters</span>
        <span class="hljs-keyword">private</span> String query;
        <span class="hljs-keyword">private</span> String answer;
        <span class="hljs-keyword">private</span> List&lt;String&gt; images;
        <span class="hljs-keyword">private</span> List&lt;SearchResult&gt; results;
        <span class="hljs-meta">@JsonProperty("response_time")</span>
        <span class="hljs-keyword">private</span> String responseTime;

    }

    <span class="hljs-meta">@Setter</span>
    <span class="hljs-meta">@Getter</span>
    <span class="hljs-meta">@JsonIgnoreProperties(ignoreUnknown = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchResult</span> {
        <span class="hljs-comment">// getters / setters</span>
        <span class="hljs-keyword">private</span> String title;
        <span class="hljs-keyword">private</span> String url;
        <span class="hljs-keyword">private</span> String content;
        <span class="hljs-keyword">private</span> Double score;
        <span class="hljs-meta">@JsonProperty("raw_content")</span>
        <span class="hljs-keyword">private</span> String rawContent;
    }

}
</code></pre>
<p><strong>2.3 åœ¨å¯åŠ¨ç±»ä¸­å£°æ˜å›è°ƒå·¥å…·æ–¹æ³•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(AiApplication.class, args);
    }

    <span class="hljs-comment">// è‡ªåŠ¨é…ç½®å°†è‡ªåŠ¨å°†å·¥å…·å›è°ƒæ³¨å†Œä¸º MCP å·¥å…·ã€‚</span>
    <span class="hljs-comment">// æ‚¨å¯ä»¥æœ‰å¤šä¸ª Bean ç”Ÿæˆ ToolCallbacksã€‚è‡ªåŠ¨é…ç½®å°†åˆå¹¶å®ƒä»¬ã€‚</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ToolCallbackProvider <span class="hljs-title function_">searchTools</span><span class="hljs-params">(SearchService searchService)</span> {
        <span class="hljs-keyword">return</span> MethodToolCallbackProvider.builder().toolObjects(searchService).build();
    }

}
</code></pre>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå¯ä»¥ä¾›<code>SpringAI MCP</code>å®¢æˆ·ç«¯è°ƒç”¨çš„<code>MCP Server</code>ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªåº”ç”¨çš„åŸºç¡€ä¸Šæ·»åŠ å…¶å®ƒæ¨¡å—ä»¥ä¸°å¯Œåº”ç”¨åŠŸèƒ½ã€‚</p>
<h6 data-id="heading-4">3.é…ç½®MCP-Client</h6>
<p><strong>æ³¨æ„ï¼šä¸åŒçš„æ¨¡å‹å·¥å…·è°ƒç”¨èƒ½åŠ›ä¸åŒï¼Œç™¾ç‚¼å¹³å°çš„ä¸€äº›æ¨¡å‹åœ¨æµå¼è¾“å‡ºè°ƒç”¨<code>MCP</code>å·¥å…·çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œç›®å‰ç»è¿‡æµ‹è¯•ï¼Œåœ¨ç™¾ç‚¼å¹³å°å·¥å…·ä¸Š<code>MCP</code>å·¥å…·è°ƒç”¨èƒ½åŠ›è¾ƒå¼ºçš„æ¨¡å‹<code>ID</code>æœ‰:</strong></p>
<ul>
<li><code>qwen-turbo-latest</code></li>
<li><code>qwen3-max</code></li>
<li><code>qwen3-235b-a22b-thinking-2507</code></li>
<li><code>qwen-plus-latest</code></li>
</ul>
<p>è€Œä¸‹åˆ—æ¨¡å‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°ä¸åŒç¨‹åº¦çš„é”™è¯¯ï¼š</p>
<ul>
<li><code>qwen3-235b-a22b-instruct-2507</code>å¦‚æœä½¿ç”¨<code>.stream()</code>æµå¼è¾“å‡ºï¼Œä¼šåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­æŠ¥é”™<code>null or empty toolName</code>ï¼Œè€Œç›´æ¥ä½¿ç”¨<code>.call()</code>åˆ™ä¸ä¼š</li>
<li><code>DeepSeek</code>ç³»åˆ—æ— æ³•è°ƒç”¨<code>MCP Server</code>çš„å·¥å…·</li>
</ul>
<p>ä»¥ä¸Šç»“è®ºåœ¨ç‰ˆæœ¬<code>SpringAI 1.1.0-RC1</code>æµ‹è¯•å¾—å‡ºï¼Œç›®å‰ä¸ç¡®å®šæ˜¯<code>SpringAI</code>çš„é—®é¢˜è¿˜æ˜¯æ¨¡å‹æœ¬èº«çš„é—®é¢˜</p>
<hr/>
<p><strong>3.1 å‡†å¤‡å·¥ä½œ</strong></p>
<p>å¼•å…¥Mavenä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-mcp-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0-RC1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç¼–å†™é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">mcp:</span>
      <span class="hljs-attr">client:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">chat-client</span>
        <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
        <span class="hljs-attr">request-timeout:</span> <span class="hljs-string">120s</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">ASYNC</span> <span class="hljs-comment"># ç±»å‹åŒæ­¥SYNCæˆ–è€…å¼‚æ­¥ASYNC</span>
        <span class="hljs-attr">sse:</span>
          <span class="hljs-attr">connections:</span>
            <span class="hljs-attr">search:</span>
              <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost:8577/mcp/search/</span>
</code></pre>
<p><strong>3.2 æµ‹è¯•</strong></p>
<p>ç¼–å†™æµ‹è¯•ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringAITests</span> {

    <span class="hljs-comment">// è‡ªåŠ¨æ³¨å…¥çš„toolCallbackProvider</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> AsyncMcpToolCallbackProvider toolCallbackProvider;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">springAIStreamChatWithMemoClient</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {

        <span class="hljs-comment">// è®¡æ—¶å™¨</span>
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);

        <span class="hljs-type">OpenAiApi</span> <span class="hljs-variable">openAiApi</span> <span class="hljs-operator">=</span> OpenAiApi.builder()
                <span class="hljs-comment">// ç™¾ç‚¼å¹³å° API KEY</span>
                .apiKey(<span class="hljs-string">"sk-***"</span>)
                .baseUrl(<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>)
                .completionsPath(<span class="hljs-string">"/chat/completions"</span>)
                .build();

        <span class="hljs-type">OpenAiChatOptions</span> <span class="hljs-variable">chatOptions</span> <span class="hljs-operator">=</span> OpenAiChatOptions.builder()
                .maxTokens(<span class="hljs-number">2048</span>)
                .temperature(<span class="hljs-number">0.85</span>)
                .topP(<span class="hljs-number">0.9</span>)
                .model(<span class="hljs-string">"qwen3-max"</span>)
                .streamUsage(<span class="hljs-literal">true</span>)
                .build();

        <span class="hljs-type">ChatModel</span> <span class="hljs-variable">chatModel</span> <span class="hljs-operator">=</span> OpenAiChatModel.builder()
                .openAiApi(openAiApi)
                .defaultOptions(chatOptions)
                .build();

        <span class="hljs-type">ChatClient</span> <span class="hljs-variable">chatClient</span> <span class="hljs-operator">=</span> ChatClient.builder(chatModel)
                <span class="hljs-comment">// é»˜è®¤å·¥å…·è°ƒç”¨</span>
                .defaultTools(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTimeTools</span>())
                <span class="hljs-comment">// é»˜è®¤ç³»ç»Ÿæç¤ºè¯</span>
                .defaultSystem(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªç”±losgaiå¼€å‘çš„ã€å‹å–„çš„AIåŠ©æ‰‹ï¼Œè¯·ä¿æŒä½ çš„è¯­æ°”å¹³å’Œã€è€å¿ƒã€ç¤¼è²Œã€‚"</span>)
                .build();

        ToolCallback[] toolCallbacks = toolCallbackProvider.getToolCallbacks();

        <span class="hljs-comment">// ååº”å¼å¯¹è¯æµ</span>
        Flux&lt;ChatResponse&gt; responseFlux = chatClient.prompt()
                .user(<span class="hljs-string">"å¸®æˆ‘æœç´¢è‹±é›„è”ç›ŸS15ä¸–ç•Œèµ›ç»“æœ"</span>)
                .toolCallbacks(toolCallbacks)
                .stream()
                .chatResponse();

        <span class="hljs-comment">// ç”¨äºè·Ÿè¸ªæœ€åä¸€ä¸ª ChatResponse</span>
        AtomicReference&lt;ChatResponse&gt; lastResponse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicReference</span>&lt;&gt;();

        <span class="hljs-comment">// è®¢é˜… Flux å®ç°æµå¼è¾“å‡ºï¼ˆæ§åˆ¶å°è¾“å‡ºæˆ– SSE æ¨é€ï¼‰</span>
        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();
        responseFlux.subscribe(
                token -&gt; {
                    <span class="hljs-comment">// è·å–å½“å‰è¾“å‡ºå†…å®¹ç‰‡æ®µ</span>
                    <span class="hljs-keyword">if</span>(token.getResult()!=<span class="hljs-literal">null</span>){
                        log.info(<span class="hljs-string">"è¾“å‡ºå†…å®¹:{}"</span>, token.getResult().getOutput().getText());
                        res.append(token.getResult().getOutput().getText());
                    }
                    <span class="hljs-comment">// æ›´æ–°æœ€åä¸€ä¸ªå“åº”</span>
                    lastResponse.set(token);
                },
                <span class="hljs-comment">// ååº”å¼æµåœ¨æŠ¥é”™æ—¶ä¼šç›´æ¥ä¸­æ–­</span>
                error -&gt; {
                    log.error(<span class="hljs-string">"å‡ºé”™ï¼š"</span>, error);
                    <span class="hljs-comment">// é”™è¯¯ï¼Œåœæ­¢å€’è®¡æ—¶</span>
                    countDownLatch.countDown();
                }, <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
                () -&gt; {<span class="hljs-comment">// æµç»“æŸ</span>
                    log.info(<span class="hljs-string">"\nå›ç­”å®Œæ¯•ï¼"</span>);
                    <span class="hljs-comment">// ä»æœ€åä¸€ä¸ªå“åº”ä¸­è·å– Token ä½¿ç”¨ä¿¡æ¯</span>
                    <span class="hljs-type">ChatResponse</span> <span class="hljs-variable">chatResponse</span> <span class="hljs-operator">=</span> lastResponse.get();
                    <span class="hljs-keyword">if</span> (chatResponse != <span class="hljs-literal">null</span>) {
                        <span class="hljs-type">Usage</span> <span class="hljs-variable">usage</span> <span class="hljs-operator">=</span> chatResponse.getMetadata().getUsage();
                        log.info(<span class="hljs-string">"===== Token ä½¿ç”¨ç»Ÿè®¡ ====="</span>);
                        log.info(<span class="hljs-string">"è¾“å…¥ Token æ•°ï¼ˆPrompt Tokensï¼‰: {}"</span>, usage.getPromptTokens());
                        log.info(<span class="hljs-string">"è¾“å‡º Token æ•°ï¼ˆCompletion Tokensï¼‰: {}"</span>, usage.getCompletionTokens());
                        log.info(<span class="hljs-string">"æ€» Token æ•°ï¼ˆTotal Tokensï¼‰: {}"</span>, usage.getTotalTokens());
                        log.info(<span class="hljs-string">"å›å¤æ±‡æ€»ï¼š\n{}"</span>, res);
                    } <span class="hljs-keyword">else</span> {
                        log.warn(<span class="hljs-string">"æœªè·å–åˆ° Token ä½¿ç”¨ä¿¡æ¯ï¼Œå¯èƒ½æ¨¡å‹æœªè¿”å›æˆ–é…ç½®æœªå¯ç”¨"</span>);
                    }
                    countDownLatch.countDown();
                });

        <span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹æœ€å¤š60s ç­‰å¾…ç»“æœ</span>
        countDownLatch.await(<span class="hljs-number">60</span>, TimeUnit.SECONDS);
    }
}
</code></pre>
<p>æµ‹è¯•ç»“æœ</p>
<pre><code class="hljs language-md" lang="md">com.losgai.ai.SpringAITests              : ===== Token ä½¿ç”¨ç»Ÿè®¡ =====
com.losgai.ai.SpringAITests              : è¾“å…¥ Token æ•°ï¼ˆPrompt Tokensï¼‰: 2167
com.losgai.ai.SpringAITests              : è¾“å‡º Token æ•°ï¼ˆCompletion Tokensï¼‰: 261
com.losgai.ai.SpringAITests              : æ€» Token æ•°ï¼ˆTotal Tokensï¼‰: 2428
com.losgai.ai.SpringAITests              : å›å¤æ±‡æ€»ï¼š
æ ¹æ®æœç´¢ç»“æœï¼Œ<span class="hljs-strong">**è‹±é›„è”ç›ŸS15å…¨çƒæ€»å†³èµ›**</span>å·²äº2025å¹´11æœˆåœ¨æˆéƒ½ä¸¾è¡Œï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š

<span class="hljs-bullet">-</span> <span class="hljs-strong">**å† å†›**</span>ï¼š<span class="hljs-strong">**T1æˆ˜é˜Ÿ**</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**äºšå†›**</span>ï¼š<span class="hljs-strong">**KTæˆ˜é˜Ÿ**</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å†³èµ›æ¯”åˆ†**</span>ï¼š<span class="hljs-strong">**T1 3:2 KT**</span>

<span class="hljs-section">### å…³é”®äº®ç‚¹ï¼š</span>
<span class="hljs-bullet">1.</span> <span class="hljs-strong">**T1æˆ˜é˜ŸæˆåŠŸå®ç°ä¸‰è¿å† **</span>ï¼ˆS13ã€S14ã€S15ï¼‰ï¼Œæˆä¸ºè‹±é›„è”ç›Ÿå†å²ä¸Šé¦–æ”¯è¾¾æˆæ­¤æˆå°±çš„æˆ˜é˜Ÿã€‚
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**Fakerï¼ˆæç›¸èµ«ï¼‰æ–©è·ä¸ªäººç¬¬å…­ä¸ªä¸–ç•Œèµ›å† å†›**</span>ï¼Œè¿›ä¸€æ­¥å·©å›ºå…¶â€œä¼ å¥‡ä¸­å•â€çš„åœ°ä½ã€‚
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**FMVPï¼ˆæ€»å†³èµ›æœ€æœ‰ä»·å€¼é€‰æ‰‹ï¼‰**</span>ï¼š<span class="hljs-strong">**Gumayusi**</span>ï¼ˆT1ä¸‹è·¯é€‰æ‰‹ï¼‰ã€‚

æ¯”èµ›è¿‡ç¨‹éå¸¸æ¿€çƒˆï¼ŒåŒæ–¹æ‰“æ»¡äº”å±€ï¼Œæœ€ç»ˆT1åœ¨å†³èƒœå±€ä¸­å‡­å€Ÿå‡ºè‰²çš„å›¢é˜Ÿé…åˆå’Œæˆ˜æœ¯æ‰§è¡Œæ‹¿ä¸‹èƒœåˆ©ã€‚è¿™åœºå†³èµ›ä¸ä»…å±•ç°äº†LCKèµ›åŒºçš„å¼ºå¤§å®åŠ›ï¼Œä¹Ÿä¸ºå…¨çƒè§‚ä¼—å¥‰çŒ®äº†ä¸€åœºç²¾å½©ç»ä¼¦çš„å¯¹å†³ï¼ ğŸ†

å¦‚æœéœ€è¦æ›´å¤šç»†èŠ‚ï¼ˆå¦‚æ¯å±€æ¯”èµ›çš„BPæˆ–å…³é”®æ“ä½œï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰å¢å¼ºå·¥å…·è°ƒç”¨é˜¶æ®µçš„é€»è¾‘ï¼Œä¾‹å¦‚ä¸‹é¢çš„<code>CustomMcpToolCallbackProvider.java</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰MCPå·¥å…·å›è°ƒæä¾›å™¨ï¼Œæ·»åŠ æ—¥å¿—åŠŸèƒ½
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Primary</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomMcpToolCallbackProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncMcpToolCallbackProvider</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AsyncMcpToolCallbackProvider delegate;

    <span class="hljs-meta">@NotNull</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolCallback[] getToolCallbacks() {
        ToolCallback[] originalCallbacks = delegate.getToolCallbacks();

        <span class="hljs-keyword">if</span> (originalCallbacks.length == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> originalCallbacks;
        }

        <span class="hljs-comment">// åŒ…è£…æ¯ä¸ªå·¥å…·å›è°ƒï¼Œæ·»åŠ SSEé€šçŸ¥</span>
        <span class="hljs-keyword">return</span> Arrays.stream(originalCallbacks)
                .map(<span class="hljs-built_in">this</span>::wrapNotification)
                .toArray(ToolCallback[]::<span class="hljs-keyword">new</span>);
    }

    <span class="hljs-keyword">private</span> ToolCallback <span class="hljs-title function_">wrapNotification</span><span class="hljs-params">(ToolCallback originalCallback)</span> {

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolCallback</span>() {

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ToolDefinition <span class="hljs-title function_">getToolDefinition</span><span class="hljs-params">()</span> {
                <span class="hljs-type">ToolDefinition</span> <span class="hljs-variable">toolDefinition</span> <span class="hljs-operator">=</span> originalCallback.getToolDefinition();
                log.info(<span class="hljs-string">"è·å–å·¥å…·å®šä¹‰: {}"</span>, toolDefinition);
                <span class="hljs-keyword">return</span> toolDefinition;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> ToolMetadata <span class="hljs-title function_">getToolMetadata</span><span class="hljs-params">()</span> {
                <span class="hljs-type">ToolMetadata</span> <span class="hljs-variable">toolMetadata</span> <span class="hljs-operator">=</span> originalCallback.getToolMetadata();
                log.info(<span class="hljs-string">"MCPå·¥å…·è°ƒç”¨å¼€å§‹: {}"</span>, toolMetadata);
                <span class="hljs-keyword">return</span> toolMetadata;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">(String toolInput, ToolContext toolContext)</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">call</span> <span class="hljs-operator">=</span> ToolCallback.<span class="hljs-built_in">super</span>.call(toolInput, toolContext);
                log.info(<span class="hljs-string">"MCPå·¥å…·è°ƒç”¨ç»“æŸ: {}"</span>, call);
                <span class="hljs-keyword">return</span> call;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">(String functionInput)</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">toolName</span> <span class="hljs-operator">=</span> getToolDefinition().name();
                <span class="hljs-keyword">if</span> (StrUtil.isBlank(functionInput)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"none"</span>;
                }
                <span class="hljs-keyword">try</span> {
                    log.info(<span class="hljs-string">"MCPå·¥å…·è°ƒç”¨å¼€å§‹: {} å‚æ•°: {}"</span>, toolName, functionInput);
                    <span class="hljs-comment">// æ‰§è¡Œå®é™…çš„å·¥å…·è°ƒç”¨</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> originalCallback.call(functionInput);
                    log.info(<span class="hljs-string">"MCPå·¥å…·è°ƒç”¨æˆåŠŸ: {} ç»“æœ: {}"</span>, toolName, result);

                    <span class="hljs-keyword">return</span> result;
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    log.error(<span class="hljs-string">"MCPå·¥å…·è°ƒç”¨å¤±è´¥: {} é”™è¯¯: {}"</span>, toolName, e.getMessage(), e);
                    <span class="hljs-keyword">throw</span> e;
                }
            }
        };
    }
}
</code></pre>
<p>å¢å¼ºçš„æ—¥å¿—è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">è·å–å·¥å…·å®šä¹‰: DefaultToolDefinition[name=webSearch, description=Searching information from the internet, inputSchema={<span class="hljs-string">"type"</span>:<span class="hljs-string">"object"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"query"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"string"</span>,<span class="hljs-string">"description"</span>:<span class="hljs-string">"æœç´¢å…³é”®è¯"</span>}},<span class="hljs-string">"required"</span>:[<span class="hljs-string">"query"</span>],<span class="hljs-string">"additionalProperties"</span>:<span class="hljs-literal">false</span>}]
MCPå·¥å…·è°ƒç”¨å¼€å§‹: DefaultToolMetadata[returnDirect=<span class="hljs-literal">false</span>]
è·å–å·¥å…·å®šä¹‰: DefaultToolDefinition[name=webSearch, description=Searching information from the internet, inputSchema={<span class="hljs-string">"type"</span>:<span class="hljs-string">"object"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"query"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"string"</span>,<span class="hljs-string">"description"</span>:<span class="hljs-string">"æœç´¢å…³é”®è¯"</span>}},<span class="hljs-string">"required"</span>:[<span class="hljs-string">"query"</span>],<span class="hljs-string">"additionalProperties"</span>:<span class="hljs-literal">false</span>}]
MCPå·¥å…·è°ƒç”¨å¼€å§‹: DefaultToolMetadata[returnDirect=<span class="hljs-literal">false</span>]
è·å–å·¥å…·å®šä¹‰: DefaultToolDefinition[name=webSearch, description=Searching information from the internet, inputSchema={<span class="hljs-string">"type"</span>:<span class="hljs-string">"object"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"query"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"string"</span>,<span class="hljs-string">"description"</span>:<span class="hljs-string">"æœç´¢å…³é”®è¯"</span>}},<span class="hljs-string">"required"</span>:[<span class="hljs-string">"query"</span>],<span class="hljs-string">"additionalProperties"</span>:<span class="hljs-literal">false</span>}]
MCPå·¥å…·è°ƒç”¨å¼€å§‹: webSearch å‚æ•°: {<span class="hljs-string">"query"</span>: <span class="hljs-string">"è‹±é›„è”ç›ŸS15ä¸–ç•Œèµ›ç»“æœ"</span>}
MCPå·¥å…·è°ƒç”¨æˆåŠŸ: webSearch ç»“æœ: [{<span class="hljs-string">"text"</span>:<span class="hljs-string">"\"Query: è‹±é›„è”ç›ŸS15ä¸–ç•Œèµ›ç»“æœ\\n\\nAnswer (summary):\\nT1 won the 2025 League of Legends World Championship S15, defeating KT 3-2 in the finals. Faker earned his sixth championship title. T1 became the first team to achieve three consecutive world championships.\\n\\nTop results:\\n1. T1 å¤ºå¾—è‹±é›„è”ç›ŸS15 æ€»å†³èµ›å† å†›ï¼Œæˆä¸ºé¦–æ”¯ã€Œä¸‰è¿å† ã€æˆ˜é˜Ÿ - NOWRE\\n URL: https://nowre.com/lifestyle/1004558/t1-duodeyingxionglianmeng-s15-zongjuesaiguanjunchengweishouzhisanlianguanzhandui/\\n Snippet: åœ¨2025 è‹±é›„è”ç›Ÿå…¨çƒæ€»å†³èµ›æˆéƒ½çš„å†³èµ›èˆå°ä¸Šï¼Œä¸¤æ”¯æ¥è‡ªLCK æˆ˜é˜ŸT1 å’ŒKT æ‰“æ»¡äº”åœºï¼Œæœ€ç»ˆT1 åœ¨å†³èƒœå±€èµ¢ä¸‹æ¯”èµ›ï¼Œå¤ºå¾—æœ¬æ¬¡ä¸–ç•Œèµ›å† å†›ã€‚T1 ä¸­å•é€‰æ‰‹æç›¸èµ«ï¼ˆFakerï¼‰æ”¶è·äº†\\n Score: 0.99979013\\n\\n2. T1å¤ºå¾—è‹±é›„è”ç›ŸS15ä¸–ç•Œæ€»å†³èµ›å† å†›ï¼Œå†åˆ›ç”µç«é«˜å³°\\n URL: https://lufkindailynews.com/test/?s-news-7346505-2025-11-10-t1-clinches-championship-titles-at-league-of-legends-s15-world-finals\\n Snippet: T1å¤ºå¾—è‹±é›„è”ç›ŸS15ä¸–ç•Œæ€»å†³èµ›å† å†›ï¼Œå†åˆ›ç”µç«é«˜å³°. 2025å¹´11æœˆ10æ—¥. èµ›å†µå›é¡¾ï¼šT1åŠ›å…‹KTæˆ˜é˜Ÿï¼Œç¨³è·å…¨çƒå† å†›. 2025å¹´ï¼Œè‹±é›„è”ç›Ÿå…¨çƒæ€»å†³èµ›ï¼ˆWorld\\n Score: 0.9997695\\n\\n3. ã€è‹±é›„è”ç›Ÿä¸–ç•Œèµ›ã€‘T1å¤ºå¾—S15å† å†›ï¼ŒFakeræ–©è·ç¬¬å…­å† ï¼šæ¯”èµ·æ‰€æœ‰çš„ ...\\n URL: https://www.youtube.com/watch?v=DTv2svlGH_c\\n Snippet: ã€è‹±é›„è”ç›Ÿä¸–ç•Œèµ›ã€‘T1å¤ºå¾—S15å† å†›ï¼ŒFakeræ–©è·ç¬¬å…­å† ï¼šæ¯”èµ·æ‰€æœ‰çš„æˆå°±å’Œè®°å½•ï¼Œæˆ‘æ›´åœ¨æ„ä»Šå¤©æ˜¯ä¸æ˜¯ä¸€åœºç²¾å½©çš„æ¯”èµ›ï¼è°¢è°¢KTï¼Œæˆ‘ä»¬å…±åŒå‘ˆç°äº†ä¸€åœºç²¾å½©ç»ä¼¦çš„æ¯”èµ›ï¼\\nLPL TV\\n31400 subscribers\\n29 likes\\n4179 views\\n9 Nov 2025\\nè®¢é˜…éå¸¸é€‚åˆä¸Šä¼ è§†é¢‘ï¼\\nå¦‚æœæ‚¨è®¾ç½®äº†é€šçŸ¥ï¼Œåˆ™ä¸Šä¼ åå¯ä»¥ç«‹å³çœ‹åˆ°å®ƒï¼\\nâ–ºè®¢é˜…é¢‘é“(Subscribe) :  https://goo.gl/bwEQRX\\nâ–ºContact me: wilsonyang218@gmail.com\\nThank you for your coopertation.\\n14 comments\\n\\n Score: 0.9988575\\n\\n4. T1å‡»è´¥KTï¼Œæ–©è·ã€Šè‹±é›„è”ç›Ÿã€‹S15æ€»å†³èµ›å† å†› - æœºæ ¸\\n URL: https://www.gcores.com/articles/206710\\n Snippet: æ¸¸æˆåº“ æ’­å• ä¸“é¢˜ é¢„å‘Š ä¸‹è½½æœºæ ¸ APP # T1å‡»è´¥KTï¼Œæ–©è·ã€Šè‹±é›„è”ç›Ÿã€‹S15æ€»å†³èµ›å† å†› æ­å–œT1ï¼ YT174 å°æ—¶å‰å‘å¸ƒäºèµ„è®¯ æœ¬æ–‡ç³»ç”¨æˆ·æŠ•ç¨¿ï¼Œä¸ä»£è¡¨æœºæ ¸ç½‘è§‚ç‚¹ åœ¨æˆéƒ½ä¸œå®‰æ¹–ä½“è‚²å…¬å›­å¤šåŠŸèƒ½ä½“è‚²é¦†ä¸¾è¡Œçš„ã€Šè‹±é›„è”ç›Ÿã€‹2025å…¨çƒæ€»å†³èµ›ç°åœºï¼ŒLCK çš„ä¸¤åªæˆ˜é˜Ÿè¿æ¥å†…æˆ˜ã€‚ æœ€ç»ˆï¼Œ T1æˆ˜é˜Ÿä»¥3æ¯”2æˆ˜èƒœäº†KT æˆ˜é˜Ÿï¼Œæ–©è·å† å†›ï¼ Gumayusié€‰æ‰‹è·å¾—FMVP ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯ T1 é˜Ÿå²çš„ç¬¬å…­åº§å¬å”¤å¸ˆå† å†›å¥–æ¯ï¼Œä¹Ÿåˆ›ä¸‹äº†ä¸‰è¿å† çš„æƒŠäººè®°å½•ã€‚æ­¤å‰ T1 çš„æˆ˜ç»©ä¸ºï¼šS3å† å†›ã€S5å† å†›ã€S6å† å†›ã€S7äºšå†›ã€S12äºšå†›ã€S13å† å†›ã€S14å† å†›ã€‚ ç‹å† ä¹‹é‡ï¼Œç‹è€…æ‰¿æ‹…ï¼Œæ— æ•°æ–‘é©³æ˜Ÿå…‰æ±‡èšä¹‹å¤„å³æ˜¯å¸Œæœ›ï¼æ€€æ£ä¸€é¢—ç‚½çƒ­ã€çœŸè¯šä¸”çº¯ç²¹çš„å¿ƒï¼Œå°±èƒ½çœ‹æ¸…é‚£è±¡å¾è‡³é«˜è£èª‰å¥–æ¯ä¹‹ä¸Šçš„å…‰è¾‰ã€‚äº‰è€…ç•™å…¶åï¼Œ2025å…¨çƒæ€»å†³èµ›å† äºšå†›å†³èµ›æœ€ç»ˆä¹‹æˆ˜ï¼Œå†æ¬¡æ­å–œ T1! åœ¨èµ›åœºä¸­ï¼Œä»Šå¹´ 29 å²çš„é€‰æ‰‹ Fakerï¼ˆæç›¸èµ«ï¼‰å†åº¦å±•ç°äº†è‡ª...\\n Score: 0.99843913\\n\\n5. æ­å–œT1æ‹¿ä¸‹è‹±é›„è”ç›ŸS15ä¸–ç•Œå† å†›ï¼3-2å‡»è´¥KTï¼ŒFakerå®ç°6å† ç‹è£èª‰\\n URL: https://news.qq.com/rain/a/20251109A04ROT00\\n Snippet: # æ­å–œT1æ‹¿ä¸‹è‹±é›„è”ç›ŸS15ä¸–ç•Œå† å†›ï¼3-2å‡»è´¥KTï¼ŒFakerå®ç°6å† ç‹è£èª‰ è´å¡”çœ‹æ¯”èµ› 2025-11-09 21:14å‘å¸ƒäºæ¹–åŒ—æ¸¸æˆé¢†åŸŸåˆ›ä½œè€… S15å…¨çƒæ€»å†³èµ›KTå’ŒT1çš„å†³èµ›BO5ï¼ŒåŒæ–¹æ‰“æ»¡5å±€ä¹‹åï¼ŒT1ä»¥3-2çš„æˆ˜ç»©å‡»è´¥KTï¼Œæ‹¿ä¸‹ä¸–ç•Œå† å†›ï¼Fakerå®Œæˆ6å† ç‹çš„æˆå°±ï¼ ç¬¬ä¸€å±€KTä¸Šå•å…°åšï¼Œæ‰“é‡çŒ´å­ï¼Œä¸­å•ç‘å…¹ï¼Œä¸‹è·¯è‰¾å¸ŒåŠ å¸ƒéš†ï¼›T1ä¸Šå•å®‰è““è¨ï¼Œæ‰“é‡èµµä¿¡ï¼Œä¸­å•å²©é›€ï¼Œä¸‹è·¯éŸ¦é²æ–¯åŠ æ³¢æ¯”ã€‚å¯¹çº¿æœŸKTèŠ‚å¥èµ·é£ï¼Œæ²³é“å‡»æ€onerèµµä¿¡ï¼ŒBDDç‘å…¹æ‹¿åˆ°ä¸€è¡€ï¼ŒéšåT1ä¸‹è·¯å¤±è¯¯ï¼ŒKTæ‰“å‡º1æ¢2ï¼Œä¸Šè·¯KTé‡è¾…åŠæ—¶æ”¯æ´æ‰“å‡º0æ¢2ï¼Œå‰æœŸKTæ¨æ‰äº†ä¸Šè·¯ä¸€è¡€å¡”ï¼Œæ‹¿åˆ°äº†2æ¡å°é¾™ï¼Œç»æµé¢†å…ˆ2Kã€‚ ä¸­æœŸåŒæ–¹äº‰å¤ºå³¡è°·å…ˆé”‹ï¼ŒDoranå®‰è““è¨ç›´æ¥å¼€åˆ°Deokdamè‰¾å¸Œï¼ŒT1æ‰“å‡º0æ¢2åæ‹‰æ‰¯æ‰“å„å¡”æ±—ï¼ŒKTå…¶ä»–äººæƒ³è¦é˜»æ­¢è¢«T1å›¢ç­ï¼ŒT1æ‹¿ä¸‹å„å¡”æ±—ã€‚28åˆ†é’ŸåŒæ–¹ä¸­è·¯æ··æˆ˜ï¼Œè™½ç„¶Onerèµµä¿¡å¼€å›¢ç‡å…ˆè¢«ç§’ï¼Œä½†æ˜¯BDDç‘å…¹è¢«keriaæ³¢...\\n Score: 0.9973061\\n\\nAPI response_time: 1.24s\""</span>}]
MCPå·¥å…·è°ƒç”¨ç»“æŸ: [{<span class="hljs-string">"text"</span>:<span class="hljs-string">"\"Query: è‹±é›„è”ç›ŸS15ä¸–ç•Œèµ›ç»“æœ\\n\\nAnswer (summary):\\nT1 won the 2025 League of Legends World Championship S15, defeating KT 3-2 in the finals. Faker earned his sixth championship title. T1 became the first team to achieve three consecutive world championships.\\n\\nTop results:\\n1. T1 å¤ºå¾—è‹±é›„è”ç›ŸS15 æ€»å†³èµ›å† å†›ï¼Œæˆä¸ºé¦–æ”¯ã€Œä¸‰è¿å† ã€æˆ˜é˜Ÿ - NOWRE\\n URL: https://nowre.com/lifestyle/1004558/t1-duodeyingxionglianmeng-s15-zongjuesaiguanjunchengweishouzhisanlianguanzhandui/\\n Snippet: åœ¨2025 è‹±é›„è”ç›Ÿå…¨çƒæ€»å†³èµ›æˆéƒ½çš„å†³èµ›èˆå°ä¸Šï¼Œä¸¤æ”¯æ¥è‡ªLCK æˆ˜é˜ŸT1 å’ŒKT æ‰“æ»¡äº”åœºï¼Œæœ€ç»ˆT1 åœ¨å†³èƒœå±€èµ¢ä¸‹æ¯”èµ›ï¼Œå¤ºå¾—æœ¬æ¬¡ä¸–ç•Œèµ›å† å†›ã€‚T1 ä¸­å•é€‰æ‰‹æç›¸èµ«ï¼ˆFakerï¼‰æ”¶è·äº†\\n Score: 0.99979013\\n\\n2. T1å¤ºå¾—è‹±é›„è”ç›ŸS15ä¸–ç•Œæ€»å†³èµ›å† å†›ï¼Œå†åˆ›ç”µç«é«˜å³°\\n URL: https://lufkindailynews.com/test/?s-news-7346505-2025-11-10-t1-clinches-championship-titles-at-league-of-legends-s15-world-finals\\n Snippet: T1å¤ºå¾—è‹±é›„è”ç›ŸS15ä¸–ç•Œæ€»å†³èµ›å† å†›ï¼Œå†åˆ›ç”µç«é«˜å³°. 2025å¹´11æœˆ10æ—¥. èµ›å†µå›é¡¾ï¼šT1åŠ›å…‹KTæˆ˜é˜Ÿï¼Œç¨³è·å…¨çƒå† å†›. 2025å¹´ï¼Œè‹±é›„è”ç›Ÿå…¨çƒæ€»å†³èµ›ï¼ˆWorld\\n Score: 0.9997695\\n\\n3. ã€è‹±é›„è”ç›Ÿä¸–ç•Œèµ›ã€‘T1å¤ºå¾—S15å† å†›ï¼ŒFakeræ–©è·ç¬¬å…­å† ï¼šæ¯”èµ·æ‰€æœ‰çš„ ...\\n URL: https://www.youtube.com/watch?v=DTv2svlGH_c\\n Snippet: ã€è‹±é›„è”ç›Ÿä¸–ç•Œèµ›ã€‘T1å¤ºå¾—S15å† å†›ï¼ŒFakeræ–©è·ç¬¬å…­å† ï¼šæ¯”èµ·æ‰€æœ‰çš„æˆå°±å’Œè®°å½•ï¼Œæˆ‘æ›´åœ¨æ„ä»Šå¤©æ˜¯ä¸æ˜¯ä¸€åœºç²¾å½©çš„æ¯”èµ›ï¼è°¢è°¢KTï¼Œæˆ‘ä»¬å…±åŒå‘ˆç°äº†ä¸€åœºç²¾å½©ç»ä¼¦çš„æ¯”èµ›ï¼\\nLPL TV\\n31400 subscribers\\n29 likes\\n4179 views\\n9 Nov 2025\\nè®¢é˜…éå¸¸é€‚åˆä¸Šä¼ è§†é¢‘ï¼\\nå¦‚æœæ‚¨è®¾ç½®äº†é€šçŸ¥ï¼Œåˆ™ä¸Šä¼ åå¯ä»¥ç«‹å³çœ‹åˆ°å®ƒï¼\\nâ–ºè®¢é˜…é¢‘é“(Subscribe) :  https://goo.gl/bwEQRX\\nâ–ºContact me: wilsonyang218@gmail.com\\nThank you for your coopertation.\\n14 comments\\n\\n Score: 0.9988575\\n\\n4. T1å‡»è´¥KTï¼Œæ–©è·ã€Šè‹±é›„è”ç›Ÿã€‹S15æ€»å†³èµ›å† å†› - æœºæ ¸\\n URL: https://www.gcores.com/articles/206710\\n Snippet: æ¸¸æˆåº“ æ’­å• ä¸“é¢˜ é¢„å‘Š ä¸‹è½½æœºæ ¸ APP # T1å‡»è´¥KTï¼Œæ–©è·ã€Šè‹±é›„è”ç›Ÿã€‹S15æ€»å†³èµ›å† å†› æ­å–œT1ï¼ YT174 å°æ—¶å‰å‘å¸ƒäºèµ„è®¯ æœ¬æ–‡ç³»ç”¨æˆ·æŠ•ç¨¿ï¼Œä¸ä»£è¡¨æœºæ ¸ç½‘è§‚ç‚¹ åœ¨æˆéƒ½ä¸œå®‰æ¹–ä½“è‚²å…¬å›­å¤šåŠŸèƒ½ä½“è‚²é¦†ä¸¾è¡Œçš„ã€Šè‹±é›„è”ç›Ÿã€‹2025å…¨çƒæ€»å†³èµ›ç°åœºï¼ŒLCK çš„ä¸¤åªæˆ˜é˜Ÿè¿æ¥å†…æˆ˜ã€‚ æœ€ç»ˆï¼Œ T1æˆ˜é˜Ÿä»¥3æ¯”2æˆ˜èƒœäº†KT æˆ˜é˜Ÿï¼Œæ–©è·å† å†›ï¼ Gumayusié€‰æ‰‹è·å¾—FMVP ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯ T1 é˜Ÿå²çš„ç¬¬å…­åº§å¬å”¤å¸ˆå† å†›å¥–æ¯ï¼Œä¹Ÿåˆ›ä¸‹äº†ä¸‰è¿å† çš„æƒŠäººè®°å½•ã€‚æ­¤å‰ T1 çš„æˆ˜ç»©ä¸ºï¼šS3å† å†›ã€S5å† å†›ã€S6å† å†›ã€S7äºšå†›ã€S12äºšå†›ã€S13å† å†›ã€S14å† å†›ã€‚ ç‹å† ä¹‹é‡ï¼Œç‹è€…æ‰¿æ‹…ï¼Œæ— æ•°æ–‘é©³æ˜Ÿå…‰æ±‡èšä¹‹å¤„å³æ˜¯å¸Œæœ›ï¼æ€€æ£ä¸€é¢—ç‚½çƒ­ã€çœŸè¯šä¸”çº¯ç²¹çš„å¿ƒï¼Œå°±èƒ½çœ‹æ¸…é‚£è±¡å¾è‡³é«˜è£èª‰å¥–æ¯ä¹‹ä¸Šçš„å…‰è¾‰ã€‚äº‰è€…ç•™å…¶åï¼Œ2025å…¨çƒæ€»å†³èµ›å† äºšå†›å†³èµ›æœ€ç»ˆä¹‹æˆ˜ï¼Œå†æ¬¡æ­å–œ T1! åœ¨èµ›åœºä¸­ï¼Œä»Šå¹´ 29 å²çš„é€‰æ‰‹ Fakerï¼ˆæç›¸èµ«ï¼‰å†åº¦å±•ç°äº†è‡ª...\\n Score: 0.99843913\\n\\n5. æ­å–œT1æ‹¿ä¸‹è‹±é›„è”ç›ŸS15ä¸–ç•Œå† å†›ï¼3-2å‡»è´¥KTï¼ŒFakerå®ç°6å† ç‹è£èª‰\\n URL: https://news.qq.com/rain/a/20251109A04ROT00\\n Snippet: # æ­å–œT1æ‹¿ä¸‹è‹±é›„è”ç›ŸS15ä¸–ç•Œå† å†›ï¼3-2å‡»è´¥KTï¼ŒFakerå®ç°6å† ç‹è£èª‰ è´å¡”çœ‹æ¯”èµ› 2025-11-09 21:14å‘å¸ƒäºæ¹–åŒ—æ¸¸æˆé¢†åŸŸåˆ›ä½œè€… S15å…¨çƒæ€»å†³èµ›KTå’ŒT1çš„å†³èµ›BO5ï¼ŒåŒæ–¹æ‰“æ»¡5å±€ä¹‹åï¼ŒT1ä»¥3-2çš„æˆ˜ç»©å‡»è´¥KTï¼Œæ‹¿ä¸‹ä¸–ç•Œå† å†›ï¼Fakerå®Œæˆ6å† ç‹çš„æˆå°±ï¼ ç¬¬ä¸€å±€KTä¸Šå•å…°åšï¼Œæ‰“é‡çŒ´å­ï¼Œä¸­å•ç‘å…¹ï¼Œä¸‹è·¯è‰¾å¸ŒåŠ å¸ƒéš†ï¼›T1ä¸Šå•å®‰è““è¨ï¼Œæ‰“é‡èµµä¿¡ï¼Œä¸­å•å²©é›€ï¼Œä¸‹è·¯éŸ¦é²æ–¯åŠ æ³¢æ¯”ã€‚å¯¹çº¿æœŸKTèŠ‚å¥èµ·é£ï¼Œæ²³é“å‡»æ€onerèµµä¿¡ï¼ŒBDDç‘å…¹æ‹¿åˆ°ä¸€è¡€ï¼ŒéšåT1ä¸‹è·¯å¤±è¯¯ï¼ŒKTæ‰“å‡º1æ¢2ï¼Œä¸Šè·¯KTé‡è¾…åŠæ—¶æ”¯æ´æ‰“å‡º0æ¢2ï¼Œå‰æœŸKTæ¨æ‰äº†ä¸Šè·¯ä¸€è¡€å¡”ï¼Œæ‹¿åˆ°äº†2æ¡å°é¾™ï¼Œç»æµé¢†å…ˆ2Kã€‚ ä¸­æœŸåŒæ–¹äº‰å¤ºå³¡è°·å…ˆé”‹ï¼ŒDoranå®‰è““è¨ç›´æ¥å¼€åˆ°Deokdamè‰¾å¸Œï¼ŒT1æ‰“å‡º0æ¢2åæ‹‰æ‰¯æ‰“å„å¡”æ±—ï¼ŒKTå…¶ä»–äººæƒ³è¦é˜»æ­¢è¢«T1å›¢ç­ï¼ŒT1æ‹¿ä¸‹å„å¡”æ±—ã€‚28åˆ†é’ŸåŒæ–¹ä¸­è·¯æ··æˆ˜ï¼Œè™½ç„¶Onerèµµä¿¡å¼€å›¢ç‡å…ˆè¢«ç§’ï¼Œä½†æ˜¯BDDç‘å…¹è¢«keriaæ³¢...\\n Score: 0.9973061\\n\\nAPI response_time: 1.24s\""</span>}]
2025-11-13T14:03:01.616+08:00  INFO 22732 --- [ai] [oundedElastic-2] c.l.a.u.CustomMcpToolCallbackProvider    : è·å–å·¥å…·å®šä¹‰: DefaultToolDefinition[name=webSearch, description=Searching information from the internet, inputSchema={<span class="hljs-string">"type"</span>:<span class="hljs-string">"object"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"query"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"string"</span>,<span class="hljs-string">"description"</span>:<span class="hljs-string">"æœç´¢å…³é”®è¯"</span>}},<span class="hljs-string">"required"</span>:[<span class="hljs-string">"query"</span>],<span class="hljs-string">"additionalProperties"</span>:<span class="hljs-literal">false</span>}]
</code></pre>
<p>ä¸Šé¢çš„ç»„ä»¶ä¸ºå·¥å…·è°ƒç”¨é˜¶æ®µæä¾›äº†æ—¥å¿—ï¼Œåœ¨å®é™…åº”ç”¨å¼€å‘ä¸­ï¼Œå¯ä»¥è€ƒè™‘åœ¨è¿™ä¸ªé˜¶æ®µå‘é€<code>SSE</code>çŠ¶æ€é€šçŸ¥ç­‰æ“ä½œã€‚</p>
<p><strong>3.3 åº”ç”¨é›†æˆ</strong></p>
<p>ä¿®æ”¹æˆ‘ä»¬çš„<code>ChatClientFactory.java</code>ç»„ä»¶ï¼Œæ–°æ³¨å…¥å¯¹åº”çš„<code>AsyncMcpToolCallbackProvider</code>æˆ–åˆšæ‰è‡ªå®šä¹‰çš„<code>CustomMcpToolCallbackProvider</code>ï¼Œå¹¶æ·»åŠ <code>.toolCallbacks</code>å‚æ•°å³å¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatClientFactory</span> {

    <span class="hljs-comment">// æ ¹æ®é…ç½®idæ¥åˆ†é…ä¸åŒçš„Clientï¼Œå¤ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Integer, ChatClient&gt; clientCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MybatisChatMemory mybatisChatMemory;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RagService ragService;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmbeddingStoreFactory embeddingStoreFactory;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SseEmitterManager sseEmitterManager;

<span class="hljs-comment">//        private final AsyncMcpToolCallbackProvider toolCallbackProvider;</span>

    <span class="hljs-comment">// è‡ªå®šä¹‰MCPå·¥å…·å›è°ƒæä¾›å™¨ï¼Œæ·»åŠ æ—¥å¿—è°ƒè¯•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CustomMcpToolCallbackProvider toolCallbackProvider;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">INDEX_FINDING_SYSTEM_MSG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"You are an expert-level AI Routing Agent. "</span> +
            <span class="hljs-string">"Your sole task is to select the most relevant index name from a given list based on a user's question.\n"</span>
            +
            <span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"Your workflow is as follows:\n"</span> +
            <span class="hljs-string">"1.  Analyze the user's question to understand its core intent and subject matter.\n"</span> +
            <span class="hljs-string">"2.  Examine each name in the "</span>Index Name List<span class="hljs-string">" to understand the data domain it represents.\n"</span>
            +
            <span class="hljs-string">"3.  Perform a semantic match to determine which index is most likely to contain the information needed to answer the user's question.\n"</span>
            +
            <span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"You must strictly adhere to the following rules:\n"</span> +
            <span class="hljs-string">"-   **Unique Output**: Your response MUST be one of the index names from the list, or the string "</span><span class="hljs-number">0</span><span class="hljs-string">".\n"</span>
            +
            <span class="hljs-string">"-   **No Explanation**: Do NOT include any explanations, justifications, apologies, or any form of additional text. For example, do not say "</span>I think the best match is a<span class="hljs-string">". You must only output "</span>a<span class="hljs-string">".\n"</span>
            +
            <span class="hljs-string">"-   **Definition of "</span><span class="hljs-number">0</span><span class="hljs-string">"**: If the user's question is small talk, a greeting, completely unrelated to any of the indexes, or if you cannot determine a clear correlation, you MUST output "</span><span class="hljs-number">0</span><span class="hljs-string">".\n"</span>
            +
            <span class="hljs-string">"-   **Exact Match**: The outputted index name must be an exact, case-sensitive match to the string provided in the list.\n"</span>
            +
            <span class="hljs-string">"-   **Decisive Choice**: When multiple options seem partially relevant, choose the one that is most centrally and directly related. If you cannot make a clear best choice, default to outputting "</span><span class="hljs-number">0</span><span class="hljs-string">" to avoid incorrect routing."</span>;

    <span class="hljs-comment">/**
     * æ ¹æ® AI é…ç½®åˆ›å»ºæˆ–å¤ç”¨ ChatClient
     */</span>
    <span class="hljs-keyword">public</span> ChatClient <span class="hljs-title function_">getOrCreateClient</span><span class="hljs-params">(AiConfig aiConfig)</span> {
        <span class="hljs-keyword">return</span> clientCache.computeIfAbsent(aiConfig.getId(), k -&gt; createClient(aiConfig));
    }

    <span class="hljs-comment">/**
     * çœŸæ­£åˆ›å»º ChatClient çš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">private</span> ChatClient <span class="hljs-title function_">createClient</span><span class="hljs-params">(AiConfig aiConfig)</span> {
        <span class="hljs-type">OpenAiApi</span> <span class="hljs-variable">openAiApi</span> <span class="hljs-operator">=</span> OpenAiApi.builder()
                .apiKey(aiConfig.getApiKey())
                .baseUrl(aiConfig.getApiDomain())
                .completionsPath(<span class="hljs-string">"/chat/completions"</span>)
                .build();

        <span class="hljs-type">OpenAiChatOptions</span> <span class="hljs-variable">chatOptions</span> <span class="hljs-operator">=</span> OpenAiChatOptions.builder()
                .maxTokens(aiConfig.getMaxContextMsgs())
                .temperature(aiConfig.getTemperature())
                .topP(aiConfig.getSimilarityTopP())
                .model(aiConfig.getModelId())
                .streamUsage(<span class="hljs-literal">true</span>)
                .build();

        <span class="hljs-type">ChatModel</span> <span class="hljs-variable">chatModel</span> <span class="hljs-operator">=</span> OpenAiChatModel.builder()
                .openAiApi(openAiApi)
                .defaultOptions(chatOptions)
                .build();

        <span class="hljs-keyword">return</span> ChatClient.builder(chatModel)
                <span class="hljs-comment">// é»˜è®¤å·¥å…·è°ƒç”¨</span>
                .defaultTools(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTimeTools</span>())
                <span class="hljs-comment">// é»˜è®¤ç³»ç»Ÿæç¤ºè¯</span>
                .defaultSystem(<span class="hljs-string">"you are a helpful ai assistant developed by losgai."</span> +
                        <span class="hljs-string">"You are connected to a Web Search Tool. "</span> +
                        <span class="hljs-string">"If the user asks something you cannot answer confidently, "</span> +
                        <span class="hljs-string">"always call the tool 'webSearch' with the query string."</span>)
                .build();
    }

    <span class="hljs-comment">/**
     * æ„å»ºæµå¼å¯¹è¯å“åº”
     */</span>
    <span class="hljs-keyword">public</span> Flux&lt;ChatResponse&gt; <span class="hljs-title function_">streamChat</span><span class="hljs-params">(
            AiConfig aiConfig,
            List&lt;String&gt; urlList,
            String userMsg,
            String conversationId)</span> {
        <span class="hljs-comment">// çŠ¶æ€é€šçŸ¥çš„sse</span>
        <span class="hljs-keyword">if</span> (sseEmitterManager.getEmitter(conversationId) == <span class="hljs-literal">null</span>) {
            sseEmitterManager.addEmitter(conversationId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SseEmitter</span>(<span class="hljs-number">30000L</span>));
        }
        <span class="hljs-type">SseEmitter</span> <span class="hljs-variable">emitter</span> <span class="hljs-operator">=</span> sseEmitterManager.getEmitter(conversationId);
        <span class="hljs-keyword">try</span> {
            emitter.send(<span class="hljs-string">"æ­£åœ¨è¿æ¥æœåŠ¡å™¨..."</span>);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }

        <span class="hljs-type">ChatClient</span> <span class="hljs-variable">chatClient</span> <span class="hljs-operator">=</span> getOrCreateClient(aiConfig);

        List&lt;String&gt; indexes = List.of();
        <span class="hljs-keyword">try</span> {
            indexes = ragService.getIndexes();
        } <span class="hljs-keyword">catch</span> (IOException e) {
            log.error(<span class="hljs-string">"è·å–å‘é‡ç´¢å¼•åˆ—è¡¨å¤±è´¥ï¼"</span>);
        }

        <span class="hljs-comment">// RAGæ£€ç´¢</span>
        <span class="hljs-type">Advisor</span> <span class="hljs-variable">retrievalAugmentationAdvisor</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">if</span> (CollUtil.isNotEmpty(indexes)) {

            <span class="hljs-keyword">try</span> {
                emitter.send(<span class="hljs-string">"æ­£åœ¨æ£€ç´¢çŸ¥è¯†åº“..."</span>);
            } <span class="hljs-keyword">catch</span> (IOException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            }

            Set&lt;String&gt; indexSet = Set.copyOf(indexes);
            <span class="hljs-type">String</span> <span class="hljs-variable">INDEX_FINDING_USER_MSG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Index Name List:"</span> +
                    indexes +
                    <span class="hljs-string">"User Question:"</span> +
                    userMsg;

            <span class="hljs-comment">// é¦–å…ˆé€šè¿‡å¤§æ¨¡å‹ï¼Œé€‰æ‹©åˆé€‚çš„RAGç´¢å¼•</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">indexName</span> <span class="hljs-operator">=</span> chatClient.prompt()
                    .system(INDEX_FINDING_SYSTEM_MSG)
                    .user(INDEX_FINDING_USER_MSG)
                    .call()
                    .content();
            <span class="hljs-comment">// ç´¢å¼•åˆæ³•ï¼Œæ„å»ºæ£€ç´¢å™¨</span>
            <span class="hljs-keyword">if</span> (indexSet.contains(indexName)) {
                <span class="hljs-comment">// æ„å»ºæ£€ç´¢å™¨</span>
                <span class="hljs-type">ElasticsearchVectorStore</span> <span class="hljs-variable">vectorStore</span> <span class="hljs-operator">=</span> embeddingStoreFactory
                        .createVectorStore(indexName);
                <span class="hljs-comment">// æ„å»ºå¬å›å™¨</span>
                retrievalAugmentationAdvisor = RetrievalAugmentationAdvisor.builder()
                        .documentRetriever(VectorStoreDocumentRetriever.builder()
                                <span class="hljs-comment">// ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œ0.5è¡¨ç¤ºåªæœ‰å½“æ£€ç´¢ç»“æœçš„ç›¸ä¼¼åº¦åˆ†æ•° â‰¥ 0.50 æ—¶ï¼Œæ‰è¿”å›ä¸Šå±‚</span>
                                .similarityThreshold(<span class="hljs-number">0.1</span>)
                                <span class="hljs-comment">// æ³¨å…¥çš„å‘é‡å­˜å‚¨</span>
                                .vectorStore(vectorStore)
                                .build())
                        .queryAugmenter(ContextualQueryAugmenter.builder()
                                <span class="hljs-comment">// ä½¿ç”¨å‚æ•°ï¼Œå…è®¸æŸ¥æ‰¾çš„ç»“æœä¸ºç©º</span>
                                .allowEmptyContext(<span class="hljs-literal">true</span>)
                                .build())
                        .build();
            }
        } <span class="hljs-keyword">else</span> {
            log.info(<span class="hljs-string">"è·³è¿‡RAGæ­¥éª¤"</span>);
        }

        <span class="hljs-keyword">try</span> {
            emitter.send(<span class="hljs-string">"æ­£åœ¨æ£€ç´¢..."</span>);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }

        ToolCallback[] toolCallbacks = toolCallbackProvider.getToolCallbacks();

        <span class="hljs-comment">// å¤šæ¨¡æ€è¾“å…¥</span>
        <span class="hljs-keyword">if</span> (CollUtil.isNotEmpty(urlList) &amp;&amp; aiConfig.getModelType() == <span class="hljs-number">2</span>) {
            List&lt;Media&gt; mediaList = urlList.stream().map(url -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">MimeType</span> <span class="hljs-variable">mimeType</span> <span class="hljs-operator">=</span> url.endsWith(<span class="hljs-string">"png"</span>) ? MimeTypeUtils.IMAGE_PNG
                            : MimeTypeUtils.IMAGE_JPEG;
                    <span class="hljs-keyword">return</span> Media.builder().mimeType(mimeType).data(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlResource</span>(url)).build();
                } <span class="hljs-keyword">catch</span> (MalformedURLException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                }
            }).toList();

            <span class="hljs-keyword">if</span> (retrievalAugmentationAdvisor == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> chatClient.prompt()
<span class="hljs-comment">//                        .toolCallbacks(toolCallbacks)</span>
                        .user(u -&gt; u.text(userMsg).media(mediaList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Media</span>[<span class="hljs-number">0</span>])))
                        .advisors(MessageChatMemoryAdvisor.builder(mybatisChatMemory).build())
                        .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, conversationId))
                        .stream()
                        .chatResponse();
            }
            <span class="hljs-keyword">return</span> chatClient.prompt()
<span class="hljs-comment">//                    .toolCallbacks(toolCallbacks)</span>
                    .user(u -&gt; u.text(userMsg).media(mediaList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Media</span>[<span class="hljs-number">0</span>])))
                    .advisors(MessageChatMemoryAdvisor.builder(mybatisChatMemory).build())
                    .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, conversationId))
                    .advisors(retrievalAugmentationAdvisor)
                    .stream()
                    .chatResponse();
        }

        <span class="hljs-keyword">if</span> (retrievalAugmentationAdvisor == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> chatClient.prompt()
                    .toolCallbacks(toolCallbacks)
                    .user(userMsg)
                    .advisors(MessageChatMemoryAdvisor.builder(mybatisChatMemory).build())
                    .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, conversationId))
                    .stream()
                    .chatResponse();
        }

        <span class="hljs-comment">// æ™®é€šæ–‡æœ¬</span>
        <span class="hljs-keyword">return</span> chatClient.prompt()
                .toolCallbacks(toolCallbacks)
                .user(userMsg)
                .advisors(MessageChatMemoryAdvisor.builder(mybatisChatMemory).build())
                .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, conversationId))
                .advisors(retrievalAugmentationAdvisor)
                .stream()
                .chatResponse();
    }
}
</code></pre>
<p>ç»“æœæ¼”ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c590db8e67f49b68dfacf08e1f1fb40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbDBzZ0Fp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620849&amp;x-signature=qkGxxPqhm7Jpht7wr%2B5nrYrT61o%3D" alt="webSearch.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-5">æ€»ç»“</h4>
<p>ğŸ‰æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨SpringAIç»“åˆMCPå®ç°è”ç½‘æœç´¢çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ­å»ºï¼Œä»¥åŠåº”ç”¨çš„æ•´åˆã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åˆ°å¤§å®¶ï¼Œå¦‚æœå–œæ¬¢åˆ«å¿˜äº†ç‚¹èµã€å…³æ³¨ã€æ”¶è—ï¼Œæˆ–è€…å¸®å¿™åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fl0sgAi%2Fai-chat-demo" target="_blank" title="https://github.com/l0sgAi/ai-chat-demo" ref="nofollow noopener noreferrer">github</a>ç‚¹ä¸€ä¸ªstarâ­ï¸ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Transform åˆ° Transformerï¼Œç”¨ EventBridge ä¸ç™¾ç‚¼æ„å»ºå®æ—¶æ™ºèƒ½çš„ ETL æ•°æ®ç®¡é“]]></title>    <link>https://juejin.cn/post/7571753301898625064</link>    <guid>https://juejin.cn/post/7571753301898625064</guid>    <pubDate>2025-11-13T07:19:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571753301898625064" data-draft-id="7571734313927213090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Transform åˆ° Transformerï¼Œç”¨ EventBridge ä¸ç™¾ç‚¼æ„å»ºå®æ—¶æ™ºèƒ½çš„ ETL æ•°æ®ç®¡é“"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-13T07:19:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Transform åˆ° Transformerï¼Œç”¨ EventBridge ä¸ç™¾ç‚¼æ„å»ºå®æ—¶æ™ºèƒ½çš„ ETL æ•°æ®ç®¡é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:19:02.000Z" title="Thu Nov 13 2025 07:19:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šç¨šæŸ³</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºæ•°æ®å¤„ç†é¢†åŸŸçš„ç»å…¸æ¨¡å¼ï¼ŒETLï¼ˆExtract-Transform-Loadï¼‰é€šè¿‡æå–ã€è½¬æ¢ã€åŠ è½½ä¸‰ä¸ªæ­¥éª¤ï¼Œé«˜æ•ˆåœ°å¤„ç†ç€å„ç±»ç»“æ„åŒ–æ•°æ®ã€‚ç„¶è€Œï¼Œé¢å¯¹ AI æ—¶ä»£æµ·é‡ã€å¼‚æ„ã€å®æ—¶çš„â€œæ•°æ®æ´ªæµâ€ï¼Œä¼ ç»Ÿ ETL é“¾è·¯ï¼Œå°¤å…¶æ˜¯å…¶æ ¸å¿ƒçš„è½¬æ¢ï¼ˆTransformï¼‰ç¯èŠ‚ï¼Œæ­£é¢ä¸´ä¸¥å³»æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†ä»ä¸€ä¸ªåˆçº§å¼€å‘è€…ä¹Ÿèƒ½ç†è§£å’Œä¸Šæ‰‹çš„è§†è§’ï¼Œæ¢è®¨ AI æ—¶ä»£çš„æ•°æ®å¤„ç†æ–°èŒƒå¼ï¼šå¦‚ä½•åˆ©ç”¨åŸºäº Transformer æ¶æ„çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é‡å¡‘ä¼ ç»Ÿæ•°æ®å¤„ç†ä¸­çš„è½¬æ¢ï¼ˆTransformï¼‰ç¯èŠ‚ï¼Œå¹¶ç»“åˆäº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEvent-Driven Architecture, EDAï¼‰ï¼Œä¸º AI æ•°æ®å¤„ç†é“¾è·¯â€œæ³¨å…¥å®æ—¶æ™ºèƒ½â€ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿ ETL åœ¨ AI æ—¶ä»£çš„å›°å¢ƒï¼šâ€œTâ€ä¸ä»…æ˜¯â€œè½¬æ¢â€ï¼Œæ›´æ˜¯â€œç—›ç‚¹â€</h2>
<p>ETLï¼ˆExtract-Transform-Loadï¼‰æ˜¯æ•°æ®å¤„ç†çš„æ ¸å¿ƒæµç¨‹ã€‚å®ƒè´Ÿè´£ä»ä¸åŒæ•°æ®æºä¸­æå–æ•°æ®ï¼Œç»è¿‡æ¸…æ´—ã€è½¬æ¢å’Œæ•´åˆåï¼ŒåŠ è½½åˆ°ç»Ÿä¸€çš„æ•°æ®ä»“åº“ï¼Œä¸ºåç»­çš„æ•°æ®åˆ†æä¸å•†ä¸šæ™ºèƒ½æä¾›æ”¯æ’‘ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°† ETL ç”ŸåŠ¨åœ°æ¯”ä½œä¸€ä¸ªâ€œä¸­å¤®å¨æˆ¿â€ï¼šâ€œæå–ï¼ˆExtractï¼‰â€ æ˜¯é‡‡è´­ç”Ÿé²œé£Ÿæï¼ˆåŸå§‹æ•°æ®ï¼‰ï¼Œâ€œåŠ è½½ï¼ˆLoadï¼‰â€ æ˜¯å°†ç²¾ç¾èœè‚´ï¼ˆå¯ç”¨æ•°æ®ï¼‰ç«¯ä¸Šé¤æ¡Œï¼Œè€Œ â€œè½¬æ¢ï¼ˆTransformï¼‰â€ åˆ™æ˜¯è‡³å…³é‡è¦çš„çƒ¹é¥ªç¯èŠ‚ã€‚åœ¨è¿‡å»ï¼Œå¨æˆ¿é‡‡è´­çš„å¤šæ˜¯è§„æ ¼ç»Ÿä¸€çš„é£Ÿæï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰ï¼Œä¾é â€œè€èœè°±â€ï¼ˆå›ºå®šçš„è§„åˆ™ä»£ç ï¼‰ä¾¿èƒ½é«˜æ•ˆã€ç¨³å®šåœ°å®Œæˆå¤„ç†ã€‚ç„¶è€Œï¼ŒAI æ—¶ä»£å¸¦æ¥äº†å½¢æ€å„å¼‚ã€æ•°é‡åºå¤§çš„â€œå±±çæµ·å‘³â€â€”â€”æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ï¼Œä¸”å¾€å¾€è¦æ±‚å®æ—¶å¤„ç†ã€‚è¿™ä½¿å¾—å¨æˆ¿é‡Œæœ€å…³é”®çš„çƒ¹é¥ªç¯èŠ‚ï¼ˆTransformï¼‰ä¸å ªé‡è´Ÿï¼Œé‚£å¥—ä¸ºæ ‡å‡†é£Ÿæè®¾è®¡çš„â€œè€èœè°±â€å·²ç„¶æ‰è¥Ÿè§è‚˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bfc4623301645688d815c95f5667224~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=aoH%2BDhPn4W8esk5lUzJFEXwYsKA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»¥ä¸€ä¸ªå¸¸è§çš„åœ°å€ä¿¡æ¯æ ‡å‡†åŒ–åœºæ™¯ä¸ºä¾‹ã€‚ç”¨æˆ·è¾“å…¥çš„åœ°å€æ ¼å¼äº”èŠ±å…«é—¨ï¼Œå¯èƒ½æ˜¯æ–‡æœ¬ã€æ–‡æ¡£ã€æ‰«æå›¾ç‰‡ä»¥åŠå®¢æœå¯¹è¯ç­‰ã€‚åç«¯ç³»ç»Ÿä¸ºäº†ä¾¿äºå…¥åº“ä¸åˆ†æï¼Œå¿…é¡»å°†è¿™äº›ä¿¡æ¯ç²¾å‡†åœ°è§£æä¸ºâ€œçœ-å¸‚-åŒº-è¡—é“â€çš„æ ‡å‡†åŒ–ç»“æ„ã€‚æ›´æ£˜æ‰‹çš„æ˜¯ï¼ŒåŸå§‹åœ°å€ä¿¡æ¯è¿˜å¯èƒ½å­˜åœ¨é”™åˆ«å­—ã€ä¿¡æ¯ç¼ºå¤±æˆ–è¯­ä¹‰æ¨¡ç³Šç­‰é—®é¢˜ã€‚åœ¨ä¼ ç»Ÿ ETL æ¨¡å¼ä¸‹ï¼Œå·¥ç¨‹å¸ˆä¸å¾—ä¸ç¼–å†™æ•°åƒè¡Œå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼å’Œåˆ¤æ–­é€»è¾‘ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªåºå¤§çš„åœ°å€åº“ã€‚è¿™ç§æ–¹å¼ä¸ä»…å¼€å‘å’Œç»´æŠ¤æˆæœ¬é«˜ã€æ‰©å±•æ€§å·®ï¼Œè€Œä¸”éš¾ä»¥è¦†ç›–æ‰€æœ‰éæ ‡å‡†æ ¼å¼å’Œå¼‚å¸¸æƒ…å†µã€‚</p>
<p>è¿™æ­£æ˜¯ä¼ ç»Ÿ ETL åœ¨ AI æ—¶ä»£â€œåŠ›ä¸ä»å¿ƒâ€çš„ç¼©å½±ï¼Œä½†ä¹Ÿåªæ˜¯å†°å±±ä¸€è§’ã€‚åœ¨ AI åº”ç”¨ä¸­ï¼Œæ•°æ®è½¬æ¢çš„éœ€æ±‚è¿œä¸æ­¢äºæ­¤ï¼Œä¾‹å¦‚ï¼šä»ç”¨æˆ·è¯„è®ºä¸­æå–æƒ…æ„Ÿå€¾å‘ã€ä¸ºéç»“æ„åŒ–æ–‡æ¡£æ‰“æ ‡ç­¾ã€ä»å›¾ç‰‡ä¸­è¯†åˆ«ç‰¹å®šå†…å®¹ç­‰ã€‚ä¼ ç»ŸåŸºäºå›ºå®šè§„åˆ™çš„ Transform å·¥å…·ï¼Œé¢å¯¹è¿™äº›å……æ»¡â€œè¯­ä¹‰â€å’Œâ€œä¸ç¡®å®šæ€§â€çš„ä»»åŠ¡ï¼Œå‡ ä¹æŸæ‰‹æ— ç­–ã€‚æœ€ç»ˆï¼Œæ•°æ®å¤„ç†é“¾è·¯å˜å¾—éš¾ä»¥æ‰©å±•ã€è¿ç»´å¤æ‚ä¸”ç¨³å®šæ€§å·®ï¼Œä¸¥é‡æ‹–æ…¢äº† AI åº”ç”¨çš„åˆ›æ–°æ­¥ä¼ã€‚</p>
<h2 data-id="heading-2">ä¸º ETL æ›´æ¢â€œAI å¤§è„‘â€ï¼šç”¨ Transformerï¼ˆAIï¼‰ä»£æ›¿ Transform</h2>
<p>æ—¢ç„¶ä¼ ç»Ÿ Transform éš¾ä»¥ç†è§£æ•°æ®èƒŒåçš„â€œè¯­ä¹‰â€ï¼Œä¸ºä½•ä¸è®©æ“…é•¿æ­¤é“çš„ AI æ¥ä¸»å¯¼è¿™ä¸ªç¯èŠ‚å‘¢ï¼Ÿ</p>
<p>æœ¬æ–‡å·§å¦™åœ°è¿ç”¨äº†â€œTransformerâ€ä¸€è¯çš„åŒå…³å«ä¹‰ï¼šå®ƒæ—¢æŒ‡ä»£ ETL ä¸­çš„â€œè½¬æ¢å™¨â€ï¼ˆTransform-erï¼‰ï¼Œæ›´ç‰¹æŒ‡é©±åŠ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ ¸å¿ƒæ¶æ„â€”â€”Transformerã€‚</p>
<p>è¿™æ­£æ˜¯â€œç”¨ Transformer ä»£æ›¿ Transformâ€çš„æ ¸å¿ƒæ€æƒ³ï¼šå°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½ç›´æ¥æ³¨å…¥ ETL çš„æ•°æ®è½¬æ¢ç¯èŠ‚ã€‚è®¸å¤šè¿‡å»éœ€è¦å¤æ‚ä»£ç æ‰èƒ½å®ç°çš„æ•°æ®è½¬æ¢ä»»åŠ¡ï¼Œå¦‚ä»Šé€šè¿‡ä¸ AI äº¤äº’å³å¯è½»æ¾å®Œæˆã€‚</p>
<p>å›åˆ°æˆ‘ä»¬çš„â€œä¸­å¤®å¨æˆ¿â€æ¯”å–»ï¼Œç°åœ¨è´Ÿè´£åŠ å·¥èœå“çš„ï¼Œä¸å†æ˜¯ä¸€æœ¬å›ºåŒ–çš„èœè°±ï¼Œè€Œæ˜¯ä¸€ä½æ‹¥æœ‰ç±³å…¶æ—æ˜Ÿçº§æ°´å‡†ã€èƒ½ç†è§£å¹¶å¤„ç†ä»»ä½•é£Ÿæçš„å…¨èƒ½å¤§å¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f9bcbae943d4a749da70ce5588098ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=GxUBw1Wnk3n7ctm28mQoTbTMFX8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»¥å‰æ–‡æåˆ°çš„â€œåœ°å€ä¿¡æ¯æ ‡å‡†åŒ–â€åœºæ™¯ä¸ºä¾‹ï¼Œé›†æˆäº† LLM çš„æ•°æ®ç®¡é“èƒ½åšåˆ°ï¼š</p>
<ul>
<li>ç»“æ„åŒ–è§£æï¼šåˆ©ç”¨å¤§æ¨¡å‹çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œå³ä½¿åœ°å€æ ¼å¼ä¸è§„èŒƒã€å­—æ®µé¡ºåºæ··ä¹±ï¼Œä¹Ÿèƒ½å‡†ç¡®è¯†åˆ«å‡ºçœã€å¸‚ã€åŒºã€è¡—é“ç­‰æ ¸å¿ƒè¦ç´ ã€‚ä¾‹å¦‚ï¼Œå¯¹äºâ€œåŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·â€ï¼Œå¤§æ¨¡å‹èƒ½å‡†ç¡®è§£æå‡ºç»“æ„åŒ–å­—æ®µï¼šçœä»½ä¸ºâ€œåŒ—äº¬â€ï¼ŒåŸå¸‚ä¸ºâ€œåŒ—äº¬â€ï¼ŒåŒºå¿ä¸ºâ€œæµ·æ·€åŒºâ€ï¼Œè¡—é“ä¸ºâ€œä¸­å…³æ‘å¤§è¡—1å·â€ã€‚</li>
<li>è‡ªåŠ¨è¯†åˆ«çº é”™ï¼šåŸºäºå¤§æ¨¡å‹å¼ºå¤§çš„è¯­è¨€çŸ¥è¯†ä¸ä¸Šä¸‹æ–‡æ¨ç†ï¼Œè‡ªåŠ¨è¯†åˆ«å¹¶çº æ­£åœ°å€ä¿¡æ¯ä¸­çš„é”™åˆ«å­—æˆ–æ ¼å¼é”™è¯¯ï¼Œå†ç»“åˆåœ°ç†çŸ¥è¯†åº“ï¼Œèƒ½å¤Ÿè¿›ä¸€æ­¥ç¡®ä¿çº æ­£çš„å‡†ç¡®æ€§ã€‚ä¾‹å¦‚ï¼Œå°†â€œåŒ—äº¬å¸‚æµ·å®šåŒºâ€çº æ­£ä¸ºâ€œåŒ—äº¬å¸‚æµ·æ·€åŒºâ€ï¼Œå°†â€œä¸­å…³æ‘å¤§è¡—ä¸€å·â€æ ‡å‡†åŒ–ä¸ºâ€œä¸­å…³æ‘å¤§è¡—1å·â€ã€‚</li>
<li>æ™ºèƒ½ä¿¡æ¯è¡¥å…¨ï¼šå€ŸåŠ©å¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡æ¨ç†èƒ½åŠ›ï¼Œå¹¶é›†æˆå®Œæ•´çš„åœ°ç†ä¿¡æ¯æ•°æ®åº“ï¼Œèƒ½å¤Ÿæ ¹æ®å·²æœ‰åœ°å€ä¿¡æ¯æ™ºèƒ½è¡¥å…¨ç¼ºå¤±çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è¯¦ç»†åœ°å€è‡ªåŠ¨æ¨æ–­é‚®æ”¿ç¼–ç ï¼Œæ ¹æ®åŒºå¿ä¿¡æ¯è¡¥å…¨åŸå¸‚å’Œçœä»½ã€‚</li>
<li>æ ¼å¼æ ‡å‡†åŒ–ï¼šæœ€ç»ˆï¼Œæ‰€æœ‰è§£æåçš„ä¿¡æ¯å°†è¢«ç»Ÿä¸€è¾“å‡ºä¸ºæ ‡å‡†æ ¼å¼ï¼Œå¦‚ç»“æ„åŒ–çš„å­—æ®µä¿¡æ¯ï¼ˆçœã€å¸‚ã€åŒºã€è¡—é“ã€é‚®æ”¿ç¼–ç ç­‰ï¼‰å’Œè§„èŒƒåŒ–çš„åœ°å€å­—ç¬¦ä¸²ï¼Œç¡®ä¿ä¸‹æ¸¸ç³»ç»Ÿèƒ½å¤Ÿç›´æ¥ã€é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®å¤„ç†å’Œåˆ†æã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦ç»´æŠ¤å¤æ‚çš„è§„åˆ™åº“ï¼Œåªéœ€åœ¨æ•°æ®æµä¸­é›†æˆå¤§è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ï¼Œå³å¯å®ç°æ™ºèƒ½åŒ–çš„æ•°æ®æ¸…æ´—å’Œæ ‡å‡†åŒ–å¤„ç†ã€‚</p>
<h2 data-id="heading-3">äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰ï¼šETL for AI Date çš„â€œå¤©é€‰è½½ä½“â€</h2>
<p>è§£å†³äº†æ•°æ®â€œå¦‚ä½•è½¬æ¢â€çš„é—®é¢˜åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç°ä»£åŒ–çš„æ¶æ„æ¥æ‰¿è½½æ•´ä¸ªæµç¨‹ã€‚ç›¸è¾ƒäºä¼ ç»Ÿçš„æ‰¹é‡å¤„ç†æ¨¡å¼ï¼Œ<strong>äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEvent-Driven Architecture, EDAï¼‰</strong> å·²è¢«å…¬è®¤ä¸ºæ˜¯ AI æ—¶ä»£æ•°æ®å¤„ç†çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>å¦‚æœè¯´â€œç”¨ Transformer ä»£æ›¿ Transformâ€æ˜¯ä¸ºæ•°æ®ç®¡é“æ¤å…¥â€œAI å¤§è„‘â€ï¼Œé‚£ä¹ˆÂ <strong>EDA å°±æ˜¯æ„å»ºè¿™å¥—æ™ºèƒ½ç³»ç»Ÿçš„â€œç¥ç»ç½‘ç»œâ€</strong>ï¼Œè®©æ•°æ®å’Œ AI æŒ‡ä»¤é«˜æ•ˆåœ°æµåŠ¨èµ·æ¥ã€‚å®ƒå°†ç³»ç»Ÿä¸­çš„æ¯ä¸€æ¬¡çŠ¶æ€å˜åŒ–ï¼ˆå¦‚â€œæ–°æ–‡ä»¶ä¸Šä¼ â€ã€â€œæ–°è¯„è®ºäº§ç”Ÿâ€ï¼‰éƒ½è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„â€œäº‹ä»¶â€ï¼Œå®æ—¶è§¦å‘ç›¸åº”çš„å¤„ç†åŠ¨ä½œï¼Œå¹¶å‡†ç¡®åœ°å°†å¤„ç†ç»“æœè·¯ç”±åˆ°æŒ‡å®šçš„ä¸‹æ¸¸ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-4">é˜¿é‡Œäº‘äº‹ä»¶æ€»çº¿ EventBridgeï¼šAI æ—¶ä»£çš„äº‹ä»¶ä¸­æ¢</h3>
<p>ä½œä¸º AI æ—¶ä»£çš„ä¼ä¸šçº§äº‹ä»¶æ¢çº½ï¼Œ<strong>äº‹ä»¶æ€»çº¿ EventBridge</strong>Â ä¸º AI æ•°æ®å¤„ç†æä¾›å¼ºå¤§çš„äº‹ä»¶é©±åŠ¨èƒ½åŠ›ã€‚å®ƒèƒ½å¤Ÿå¸®ä½ è½»æ¾æ„å»ºé«˜æ•ˆã€æ™ºèƒ½çš„ ETL æ•°æ®ç®¡é“ï¼Œæ— ç¼é›†æˆ AI èƒ½åŠ›ï¼Œå¹¶ä¸”åŸç”Ÿæ”¯æŒ<strong>å®æ—¶æ¨ç†</strong>å’Œ<strong>å¼‚æ­¥æ¨ç†</strong>ä¸¤ç§æ¨¡å¼ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚å…¶æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>å®æ—¶æ™ºèƒ½å†³ç­–ï¼š</strong> å°† AI æ¨ç†èƒ½åŠ›æ— ç¼èå…¥æ•°æ®å¤„ç†æµç¨‹ï¼Œä½¿ç³»ç»Ÿèƒ½å¯¹å®æ—¶æ•°æ®è¿›è¡Œæ™ºèƒ½åˆ†æä¸å†³ç­–ï¼Œæå¤§æå‡ä¸šåŠ¡çš„æ™ºèƒ½åŒ–æ°´å¹³ã€‚</li>
<li><strong>ç³»ç»Ÿè§£è€¦ã€çµæ´»æ‰©å±•ï¼š</strong> æ•°æ®æºã€AI æ¨¡å‹å’Œä¸šåŠ¡ç³»ç»Ÿé€šè¿‡ EventBridge å®Œå…¨è§£è€¦ï¼Œä»»ä½•ç»„ä»¶çš„å˜æ›´éƒ½ä¸ä¼šå½±å“å…¶ä»–éƒ¨åˆ†ï¼Œè®©ç³»ç»Ÿæ›´åŠ çµæ´»ã€æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</li>
<li><strong>AI èƒ½åŠ›æ²‰æ·€ä¸å¤ç”¨ï¼š</strong> ç›¸åŒçš„ AI æ¨ç†æœåŠ¡å¯è¢«å¤šä¸ªä¸šåŠ¡åœºæ™¯å¤ç”¨ï¼Œé¿å…é‡å¤å¼€å‘ï¼Œæœ€å¤§åŒ– AI æ¨¡å‹çš„ä»·å€¼ä¸åˆ©ç”¨ç‡ã€‚</li>
<li><strong>Serverless ä¸æ˜“ç”¨æ€§ï¼š</strong> ä½œä¸ºå…¨æ‰˜ç®¡çš„ Serverless æœåŠ¡ï¼ŒEventBridge å…å»äº†ç¹ççš„éƒ¨ç½²å’Œè¿ç»´å·¥ä½œã€‚é€šè¿‡ç®€å•çš„æ§åˆ¶å°é…ç½®æˆ– API è°ƒç”¨ï¼Œå³å¯å¿«é€Ÿæ„å»ºå’Œç®¡ç†äº‹ä»¶é©±åŠ¨çš„æ•°æ®å¤„ç†æµç¨‹ï¼Œå¹¶æ”¯æŒäº‹ä»¶è¿‡æ»¤ã€è½¬æ¢ã€è·¯ç”±ã€é‡è¯•ç­‰é«˜çº§èƒ½åŠ›ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/074fe845ef5749cd855b1cf5caec1876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=sTxZj0ThiLMReAD%2BPoP0eO1NfpA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-5">æ ¸å¿ƒèƒ½åŠ›ï¼šä»ä¸ç¡®å®šåˆ°ç¡®å®šçš„â€œç»“æ„åŒ–è¾“å‡ºâ€</h3>
<p>åœ¨ ETL çš„ â€œè½¬æ¢ï¼ˆTransformï¼‰â€ ç¯èŠ‚ä¸­ï¼ŒEventBridge å…è®¸ç”¨æˆ·ç›´æ¥è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆä¾‹å¦‚é€šä¹‰åƒé—®æˆ–ç™¾ç‚¼å¤§æ¨¡å‹æœåŠ¡å¹³å°ä¸Šçš„æ¨¡å‹ï¼‰ï¼Œç”šè‡³æ˜¯æ›´å¤æ‚çš„ AI Agentã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼šLLM çš„è¾“å‡ºå…·æœ‰ä¸ç¡®å®šæ€§ï¼Œæœ‰æ—¶åƒâ€œå¼€ç›²ç›’â€ï¼Œè¿™åœ¨è¦æ±‚ç¨³å®šå¯é çš„ä¼ä¸šçº§åº”ç”¨ä¸­æ˜¯æ— æ³•æ¥å—çš„ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼ŒEventBridge æä¾›äº†å¼ºå¤§çš„<strong>ç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰</strong> èƒ½åŠ›ï¼Œç¡®ä¿ AI çš„æ¯ä¸€æ¬¡å¤„ç†ç»“æœéƒ½ä»¥ç¨³å®šã€å¯é çš„æ ¼å¼è¿”å›ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“éœ€è¦æ¨¡å‹åˆ†æç”¨æˆ·è¯„è®ºçš„æƒ…æ„Ÿæ—¶ï¼Œæˆ‘ä»¬æœŸæœ›çš„ä¸æ˜¯â€œæˆ‘è§‰å¾—è¿™å¥è¯æ˜¯ç§¯æçš„â€è¿™ç±»æ¨¡æ£±ä¸¤å¯çš„æ–‡æœ¬ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¸…æ™°çš„ JSON å¯¹è±¡ï¼Œå¦‚ï¼š<code>{ "sentiment": "ç§¯æ", "summary": "äº§å“è®¾è®¡å’Œæ€§èƒ½å‡ºè‰²ï¼Œå®¢æˆ·éå¸¸æ»¡æ„" }</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03e892c03cc34ae2816729bb8c374603~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=%2BUiJ0UgJiIOpnNV3GrnP5rOQOuM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>EventBridge é€šè¿‡ä»¥ä¸‹ä¸¤é¡¹æ ¸å¿ƒæŠ€æœ¯ï¼Œäº§å“åŒ–åœ°å®ç°äº†è¿™ä¸€å…³é”®èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>JsonSchema åŸç”Ÿæ”¯æŒï¼š</strong> å¯¹äºæ”¯æŒ JsonSchema çš„æ¨¡å‹ï¼ŒEventBridge ä¼šåˆ©ç”¨å…¶åŸç”Ÿèƒ½åŠ›ï¼Œç¡®ä¿æ¨¡å‹è¾“å‡ºä¸¥æ ¼éµå¾ªç”¨æˆ·å®šä¹‰çš„æ ¼å¼ï¼Œå®ç°é«˜æ€§èƒ½ä¸é«˜å¯é æ€§ã€‚</li>
<li><strong>æ™ºèƒ½æç¤ºè¯æ³¨å…¥ï¼š</strong> å¯¹äºä¸æ”¯æŒ JsonSchema çš„æ¨¡å‹ï¼ŒEventBridge ä¼šé‡‡ç”¨æ™ºèƒ½æç¤ºè¯æ³¨å…¥æŠ€æœ¯ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆç¨³å®šã€å¯é çš„ç»“æ„åŒ–è¾“å‡ºï¼Œå¹¶ç¡®ä¿å¤šè½®å¯¹è¯æ ¼å¼çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<p>è¿™é¡¹èƒ½åŠ›æå¤§åœ°é™ä½äº†åœ¨ ETL æµç¨‹ä¸­ä½¿ç”¨ AI çš„é—¨æ§›ï¼Œä¸ºä¼ä¸šçº§åº”ç”¨çš„ç¨³å®šæ€§æä¾›äº†åšå®ä¿éšœã€‚</p>
<h2 data-id="heading-6">åœºæ™¯å®è·µï¼šEventBridge+ç™¾ç‚¼ï¼Œè®© AI èµ‹èƒ½æ•°æ®é“¾è·¯</h2>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡é˜¿é‡Œäº‘çš„äº‹ä»¶æ€»çº¿ EventBridgeÂ ä¸å¤§æ¨¡å‹æœåŠ¡å¹³å°ç™¾ç‚¼çš„ç»“åˆï¼Œæ„å»º AI èµ‹èƒ½çš„æ•°æ®é“¾è·¯ã€‚</p>
<p>é€šè¿‡åœ¨ EventBridge çš„äº‹ä»¶æµä¸­åŸç”Ÿé›†æˆç™¾ç‚¼å¤§æ¨¡å‹æœåŠ¡ï¼Œä½¿å¼€å‘è€…å¯ä»¥åœ¨æ•°æ®æµä¸­ç›´æ¥è°ƒç”¨ AIï¼Œä»è€Œè½»æ¾ã€é«˜æ•ˆåœ°å®Œæˆä¼ ç»Ÿ ETL ä¸­å¤æ‚çš„è½¬æ¢ï¼ˆTransformï¼‰ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-7">åº”ç”¨åœºæ™¯ï¼šæ•æ„Ÿä¿¡æ¯è¿‡æ»¤ä¸æ•°æ®è„±æ•</h3>
<p>æœ¬æ–¹æ¡ˆå°†æ¼”ç¤ºå¦‚ä½•åˆ©ç”¨ AI å¯¹å®æ—¶æ•°æ®æµè¿›è¡Œæ¸…æ´—ä¸è„±æ•å¤„ç†ï¼Œè‡ªåŠ¨å‘ç°å¹¶å±è”½ä¸šåŠ¡æ•°æ®ä¸­çš„æ•æ„Ÿå…³é”®è¯ï¼Œä»è€Œä¿éšœä¸šåŠ¡çš„æ•°æ®åˆè§„æ€§ã€‚</p>
<h4 data-id="heading-8">æ–¹æ¡ˆæ¶æ„ä¸å®æ–½æ­¥éª¤</h4>
<p>è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒæ˜¯åˆ©ç”¨ EventBridge ä½œä¸ºæ•°æ®ä¸­æ¢ï¼Œå°†æ¥è‡ªä¸åŒæ•°æ®æºçš„å®æ—¶æ•°æ®æµï¼Œåˆ†å‘ç»™ç™¾ç‚¼ AI æ¨¡å‹è¿›è¡Œæ¨ç†ï¼Œå†å°†æ¨ç†ç»“æœé€šè¿‡ EventBridge è·¯ç”±åˆ°ä¸‹æ¸¸çš„ä¸šåŠ¡ç³»ç»Ÿæˆ–æ•°æ®å­˜å‚¨ä¸­ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†è¯¥æ–¹æ¡ˆçš„å‚è€ƒæ¶æ„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8566feb30ca4c25ab6fbe5f5911e6c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=J9Ap26vfALDu5it%2FLP07S6jCnBQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®æ–½è¯¥æ–¹æ¡ˆä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>1.  æ„å»ºæ•°æ®ç®¡é“ï¼š</strong> åˆ›å»ºä¸€ä¸ª EventBridge äº‹ä»¶æµï¼Œä½œä¸ºæ•´ä¸ªæ•°æ®å¤„ç†çš„æ ¸å¿ƒé“¾è·¯ã€‚</p>
<p><strong>2.  é…ç½®æ•°æ®æºä¸ç›®æ ‡ï¼š</strong> åˆ›å»ºä¸¤ä¸ªè½»é‡æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåˆ†åˆ«ä½œä¸ºäº‹ä»¶æµçš„æºï¼ˆSourceï¼‰å’Œç›®æ ‡ï¼ˆSinkï¼‰ã€‚</p>
<p><strong>3.  é›†æˆ AI èƒ½åŠ›ï¼š</strong> åœ¨äº‹ä»¶æµçš„è½¬æ¢ï¼ˆTransformï¼‰ç¯èŠ‚ï¼Œé…ç½®è°ƒç”¨å·²å¼€é€šçš„é˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹æœåŠ¡ï¼Œå°† AI çš„æ™ºèƒ½å¤„ç†èƒ½åŠ›æ— ç¼åµŒå…¥æ•°æ®ç®¡é“ä¸­ã€‚</p>
<p>æ•´ä¸ªæµç¨‹é€šè¿‡åœ¨ EventBridge æ§åˆ¶å°è¿›è¡Œç®€å•çš„ç‚¹å‡»å’Œé…ç½®å³å¯å®Œæˆï¼Œæ— éœ€ç¼–å†™å¤æ‚çš„ä»£ç æ¥è¿æ¥æ•°æ®æºã€AI æ¨¡å‹å’Œä¸‹æ¸¸ç³»ç»Ÿï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea9027c2c0a24eaf8e3a9aa3ae29976b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=NFKcqaJ%2FNeRi9lprt%2BbO%2BvBK%2FBM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-9">å®ç°æ•ˆæœ</h4>
<p>éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯æ•°æ®è„±æ•æ•ˆæœï¼šä» Sourceï¼ˆæºï¼‰é˜Ÿåˆ—å‘é€å¸¦æœ‰æ•æ„Ÿä¿¡æ¯çš„æ•°æ®ï¼Œç„¶ååœ¨ Sinkï¼ˆç›®æ ‡ï¼‰é˜Ÿåˆ—æ¥æ”¶ç»è¿‡äº‹ä»¶æµå¤„ç†åçš„æ•°æ®ã€‚</p>
<ul>
<li>è¾“å…¥ç¤ºä¾‹ï¼šåŒ…å«æ•æ„Ÿä¿¡æ¯çš„æ•°æ®ï¼Œå¦‚<code>["å®¢æˆ·å¼ ä¸‰ï¼ˆ13812345678ï¼‰åé¦ˆäº†ä¸€ä¸ªé—®é¢˜..."]</code></li>
<li>è¾“å‡ºç¤ºä¾‹ï¼šç»è¿‡ AI è„±æ•åçš„æ•°æ®ï¼Œå¦‚<code>["å®¢æˆ·***ï¼ˆ138*****5678ï¼‰åé¦ˆäº†ä¸€ä¸ªé—®é¢˜..."]</code></li>
</ul>
<blockquote>
<p>æ³¨ï¼šç”±äºå¤§æ¨¡å‹ç”Ÿæˆç»“æœå­˜åœ¨éšæœºæ€§ï¼Œå®é™…æµ‹è¯•æ—¶è¾“å‡ºç»“æœçš„æ ¼å¼å¯èƒ½å­˜åœ¨å·®å¼‚ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯ä»¥ç»“åˆ EventBridge çš„ç»“æ„åŒ–è¾“å‡ºèƒ½åŠ›ä¸æç¤ºè¯å·¥ç¨‹ï¼Œè·å¾—ç¨³å®šå¯é çš„è¾“å‡ºç»“æœã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d3743a85a6c43888629e633432648c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623142&amp;x-signature=nxSGGoZa4nsLssFl7vGw81Y2qm8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-10">å¼€å‘è€…å…³å¿ƒçš„é—®é¢˜ï¼ˆQ&amp;Aï¼‰</h4>
<p>é—®ï¼šæ¯æ¬¡æ•°æ®è½¬æ¢éƒ½è°ƒç”¨ LLMï¼Œæˆæœ¬ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ</p>
<p>ç­”ï¼šæˆæœ¬æ˜¯å¤§å®¶æœ€å…³å¿ƒçš„é—®é¢˜ã€‚é¦–å…ˆï¼ŒEventBridge æœ¬èº«æ˜¯ Serverless æœåŠ¡ï¼ŒæŒ‰å®é™…å¤„ç†çš„äº‹ä»¶æ•°é‡ä»˜è´¹ã€‚ä¸»è¦çš„æˆæœ¬æ¥è‡ª LLM è°ƒç”¨ï¼Œä½†ä½ å¯ä»¥æ ¹æ®åœºæ™¯éœ€æ±‚çµæ´»é€‰æ‹©ä¸åŒè§„æ¨¡å’Œæˆæœ¬çš„æ¨¡å‹ã€‚å¯¹äºç®€å•ä»»åŠ¡ï¼Œè½»é‡çº§æ¨¡å‹å·²è¶³å¤Ÿï¼Œæˆæœ¬è¾ƒä½ã€‚å¯¹äºéå®æ—¶åœºæ™¯ï¼Œå¯é‡‡ç”¨å¼‚æ­¥æ‰¹é‡è°ƒç”¨çš„æ–¹å¼ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æˆæœ¬ã€‚</p>
<p>é—®ï¼šLLM æ¨ç†æœ‰å»¶è¿Ÿï¼Œä¼šå½±å“å®æ—¶æ€§å—ï¼Ÿ</p>
<p>ç­”ï¼šäº‹ä»¶é©±åŠ¨æ¶æ„çš„å¼‚æ­¥å’Œè§£è€¦ç‰¹æ€§å¤©ç„¶é€‚åˆè¿™ç§æƒ…å†µã€‚æ•°æ®æºå‘é€äº‹ä»¶åæ— éœ€ç­‰å¾…å¤„ç†ç»“æœï¼Œæ•´ä¸ªç³»ç»Ÿæµç¨‹ä¸ä¼šè¢«é˜»å¡ã€‚EventBridge æ”¯æŒå®æ—¶å’Œå¼‚æ­¥ä¸¤ç§æ¨ç†æ¨¡å¼ï¼Œä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡å¯¹å»¶è¿Ÿçš„æ•æ„Ÿåº¦è¿›è¡Œé€‰æ‹©ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒä¸å—å½±å“ã€‚</p>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ç”¨ Transformerï¼ˆLLMï¼‰å‡çº§ Transformï¼ˆè½¬æ¢ï¼‰ï¼Œå¹¶ä»¥äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰ä½œä¸ºæ‰¿è½½ï¼Œæ˜¯ AI æ—¶ä»£æ•°æ®å¤„ç†èŒƒå¼çš„ä¸€æ¬¡â€œæ™ºâ€å˜ã€‚é˜¿é‡Œäº‘ EventBridge ä¸ç™¾ç‚¼çš„ç»“åˆï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€æ¡ä½é—¨æ§›ã€é«˜çµæ´»æ€§çš„è·¯å¾„ï¼Œå°†å¼ºå¤§çš„ AI èƒ½åŠ›æ— ç¼èå…¥å®æ—¶æ•°æ®æµï¼Œè®©ä½ çš„åº”ç”¨è½»æ¾å®ç°æ™ºèƒ½åŒ–ã€‚</p>
<p>ç›®å‰ï¼Œè¯¥è§£å†³æ–¹æ¡ˆå·²åœ¨é˜¿é‡Œäº‘å®˜ç½‘ä¸Šçº¿ï¼Œæ¬¢è¿ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fsolution%2Ftech-solution%2Fetl-for-ai-data-a-one-stop-platform-for-ai-data-processing" target="_blank" title="https://www.aliyun.com/solution/tech-solution/etl-for-ai-data-a-one-stop-platform-for-ai-data-processing" ref="nofollow noopener noreferrer">æ­¤å¤„</a>å³å¯éƒ¨ç½²ä½“éªŒï½</p>
<p>é’‰é’‰æœç´¢ç¾¤å·ï¼š44552972 åŠ å…¥ EventBridge ç”¨æˆ·äº¤æµç¾¤ï¼Œæ¢ç´¢æ›´å¤šäº§å“åŠŸèƒ½ï¼Œä¸æˆ‘ä»¬å…±åŒå®šä¹‰å’Œæ„å»º AI æ•°æ®å¤„ç†çš„æœªæ¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç±»åŠ è½½æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7572002432449806345</link>    <guid>https://juejin.cn/post/7572002432449806345</guid>    <pubDate>2025-11-13T07:27:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572002432449806345" data-draft-id="7572002432449773577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç±»åŠ è½½æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:27:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jony_"/> <meta itemprop="url" content="https://juejin.cn/user/3403743732709767"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç±»åŠ è½½æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743732709767/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jony_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:27:52.000Z" title="Thu Nov 13 2025 07:27:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€åˆ†ç±»</strong></h2>
<p>ç±»çš„åŠ è½½éƒ½æ˜¯é€šè¿‡ ClassLoader æ¥å®Œæˆçš„ï¼Œæ ¹æ®åŠ è½½ç±»å­˜æ”¾åœ¨ä¸åŒçš„ä½ç½®ï¼Œéœ€è¦ä¸åŒçš„ClassLoaderã€‚å› æ­¤å¤§æ¦‚å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>Apk ä¸­å·²ç»å­˜åœ¨çš„ç±»</li>
<li>Apk æœªå­˜åœ¨çš„ç±»ï¼ˆæ’ä»¶åŒ–å®ç°æ–¹å¼ï¼‰</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°çš„åˆ†ç±»ï¼ŒAndroid ä¸­æœ‰å¦‚ä¸‹çš„ ClassLoader å®ç°ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc5a676355048fc869cf55ee1f15879~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624739&amp;x-signature=natGKZQQG9yY%2F0w%2Bfz6DSU%2BXZOs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>PathClassLoaderï¼šé€šå¸¸ç”¨æ¥åŠ è½½ç³»ç»Ÿç±»å’Œåº”ç”¨ç¨‹åºç±»ï¼ŒåŠ è½½ Apk ä¸­å·²ç»å®‰è£…çš„ dex</li>
<li>DexClassLoaderï¼šåŠ è½½ dex æ–‡ä»¶ï¼Œå¯ç”¨æ¥åŠ è½½å¤–éƒ¨çš„ç±»ï¼Œåœ¨ Android8.0 ä¹‹åï¼Œå’Œ PathClassLoader æ²¡æœ‰åŒºåˆ«</li>
</ul>
<h2 data-id="heading-1">äºŒã€åŒäº²å§”æ‰˜æœºåˆ¶å®ç°</h2>
<p>æœºåˆ¶çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦è¢«åŠ è½½è¿‡ï¼Œå¦‚æœåŠ è½½è¿‡ï¼Œåˆ™ç›´æ¥è¿”å›</li>
<li>å¦‚æœçˆ¶ ClassLoader å­˜åœ¨ï¼Œåˆ™äº¤ç»™çˆ¶ ClassLoader åŠ è½½ï¼Œå¦åˆ™äº¤ç»™ BootClassLoader åŠ è½½</li>
<li>å¦‚æœçˆ¶ ClassLoader æ— æ³•åŠ è½½ï¼Œåˆ™è°ƒç”¨è‡ªå·±çš„ findClass å®ŒæˆåŠ è½½</li>
</ol>
<p>åŒäº²å§”æ‰˜æœºåˆ¶çš„æºç å¦‚ä¸‹ï¼šï¼ˆä¼ªä»£ç ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="hljs-type">boolean</span> resolve) {
    <span class="hljs-keyword">synchronized</span> (getClassLoadingLock(name)) {
        <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦æ›¾åŠ è½½è¿‡</span>
        Class&lt;?&gt; c = findLoadedClass(name);
        <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
           <span class="hljs-keyword">if</span> (parent != <span class="hljs-literal">null</span>) {
               <span class="hljs-comment">// 2. ä¼˜å…ˆè®© parent åŠ è½½å™¨å»åŠ è½½</span>
               c = parent.loadClass(name, <span class="hljs-literal">false</span>);
           } <span class="hljs-keyword">else</span> {
               c = findBootstrapClassOrNull(name);
           }
            <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
            	<span class="hljs-comment">// 3. å¦‚æœ parent å‡æ²¡æœ‰åŠ è½½åˆ°ç›®æ ‡classï¼Œè°ƒç”¨è‡ªèº«çš„ findClass() æ–¹æ³•å»æœç´¢</span>
                c = findClass(name);
            }
        }
        <span class="hljs-keyword">return</span> c;
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨åŒäº²å§”æ‰˜æœºåˆ¶ï¼š</p>
<ul>
<li>é¿å…ä¸€ä¸ªç±»è¢«å¤šæ¬¡åŠ è½½</li>
<li>å®‰å…¨ï¼Œç¡®ä¿ç³»ç»Ÿç±» .Class ä¸è¢«ç¯¡æ”¹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡æ–°æ€è€ƒ weapp-tailwindcss çš„æœªæ¥ | æ˜é‡‘ä¸€å‘¨ 11.13]]></title>    <link>https://juejin.cn/post/7571892340878262310</link>    <guid>https://juejin.cn/post/7571892340878262310</guid>    <pubDate>2025-11-13T07:30:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571892340878262310" data-draft-id="7571892340877656102" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡æ–°æ€è€ƒ weapp-tailwindcss çš„æœªæ¥ | æ˜é‡‘ä¸€å‘¨ 11.13"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T07:30:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡æ–°æ€è€ƒ weapp-tailwindcss çš„æœªæ¥ | æ˜é‡‘ä¸€å‘¨ 11.13
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:30:39.000Z" title="Thu Nov 13 2025 07:30:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1400+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 5åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7569536278254125092" target="_blank" title="https://juejin.cn/post/7569536278254125092">é‡æ–°æ€è€ƒ weapp-tailwindcss çš„æœªæ¥</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568418604812632073" target="_blank" title="https://juejin.cn/post/7568418604812632073">å°±å› ä¸ºpackage.jsoné‡Œå°‘äº†ä¸ª^å·ï¼Œæˆ‘ä»¬å…¬å¸èµ”äº†å®¢æˆ·åä¸‡å—</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7569777676098814002" target="_blank" title="https://juejin.cn/post/7569777676098814002">å¦‚ä½•ç”¨Claude Code ç”Ÿæˆé¡¶çº§UI â‡ï¸</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568416956040560694" target="_blank" title="https://juejin.cn/post/7568416956040560694">åŸºäºç™¾åº¦åœ°å›¾JSAPI Threeçš„åŸå¸‚å…¬äº¤å®¢æµå¯è§†åŒ–ï¼ˆä¸‰ï¼‰â€”â€”å®æ—¶å…¬äº¤</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568859869693837348" target="_blank" title="https://juejin.cn/post/7568859869693837348"> javaæ·±åº¦è°ƒè¯•æŠ€æœ¯ã€ç¬¬å››äº”ç« ï¼šå¤šçº¿ç¨‹å’Œå¹½çµä»£ç ã€‘</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7569959427879567370" target="_blank" title="https://juejin.cn/post/7569959427879567370">Elasticsearch é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨é¡¹ç›®ä¸­æ€»ç»“çš„ 14 æ¡å®ç”¨ç»éªŒ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568873939033260082" target="_blank" title="https://juejin.cn/post/7568873939033260082">Jetpack Navigation 3ï¼šé¢†èˆªæœªæ¥</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7569422202950221859" target="_blank" title="https://juejin.cn/post/7569422202950221859">AIæ—¶ä»£ç¨‹åºå‘˜å¦‚ä½•é«˜æ•ˆæé—®ä¸å¼€å‘å·¥ä½œï¼Ÿ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568418604812140553" target="_blank" title="https://juejin.cn/post/7568418604812140553">å¤§æ¨¡å‹å¦‚ä½•é©æ–°æœç´¢ç›¸å…³æ€§ï¼Ÿæ™ºèƒ½å‡çº§è®©æœç´¢æ›´â€œæ‡‚ä½ â€ï½œå¾—ç‰©æŠ€æœ¯</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623839&amp;x-signature=Q8OLc6DXXnapT0d0Dm9G0Nu9iBM%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7569536278254125092" target="_blank" title="https://juejin.cn/post/7569536278254125092">é‡æ–°æ€è€ƒ weapp-tailwindcss çš„æœªæ¥</a> <a href="https://juejin.cn/user/1943592290496919/posts" target="_blank" title="https://juejin.cn/user/1943592290496919/posts">@icebreaker </a></p>
<blockquote>
<p>å†³å®šâ€œæŠŠé”…èƒŒå›<strong>è¿è¡Œæ—¶</strong>â€ä»¥åï¼Œæˆ‘åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æŠŠå…¥å£å…¨éƒ¨è¿›è¡Œç»Ÿä¸€ï¼š<code>twMerge</code> / <code>twJoin</code> / <code>createTailwindMerge</code> / <code>extendTailwindMerge</code> / <code>cva</code> / <code>variants</code>â€¦â€¦ç»Ÿç»Ÿç»‘è¿›åŒä¸€å¥— transformer é‡Œã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7568418604812632073" target="_blank" title="https://juejin.cn/post/7568418604812632073">å°±å› ä¸ºpackage.jsoné‡Œå°‘äº†ä¸ª^å·ï¼Œæˆ‘ä»¬å…¬å¸èµ”äº†å®¢æˆ·åä¸‡å—</a> <a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts">@ErpanOmer </a></p>
<blockquote>
<p>æµæ°´çº¿æ‰§è¡Œåˆ°<code>pnpm install</code>æ—¶ï¼Œ<code>pnpm</code>æ‹¿ç€<code>lock</code>æ–‡ä»¶ï¼Œå¿ å®åœ°å»æ‰¾<code>@internal/core@1.3.5</code>è¿™ä¸ªåŒ…...
<strong>â€œError: Package '1.3.5' not found.â€</strong> æµæ°´çº¿å´©æºƒäº†ã€‚ä¸€ä¸ªæœ¬è¯¥5åˆ†é’Ÿå®Œæˆçš„æ–‡æ¡ˆæ›´æ–°ï¼Œå¯¼è‡´äº†<strong>æ•´ä¸ªæœåŠ¡7ä¸ªå°æ—¶çš„å®•æœºğŸ˜–</strong>ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7569777676098814002" target="_blank" title="https://juejin.cn/post/7569777676098814002">å¦‚ä½•ç”¨Claude Code ç”Ÿæˆé¡¶çº§UI â‡ï¸</a> <a href="https://juejin.cn/user/2173085529944110/posts" target="_blank" title="https://juejin.cn/user/2173085529944110/posts">@hiå¤§é›„</a></p>
<blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒOCR è¿‡ç¨‹ï¼Œå‡ºç°å¾ˆå¤§UI ä¿¡æ¯ç¼ºå¤±ï¼Œæ¯”å¦‚ï¼šå…·ä½“é…è‰²æ•°å€¼ã€é˜´å½±ã€é—´è·ã€å­—ä½“ç­‰ï¼Œäºæ˜¯ä½ ä¼šå‘ç°ï¼Œæœ€ç»ˆAIå®Œæˆçš„æ•ˆæœå¯èƒ½éƒ½æ²¡æœ‰60% ã€‚äºæ˜¯æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>è§£å†³æ ·å¼ä¿¡æ¯å¤§é‡ä¸¢å¤±çš„é—®é¢˜ï¼Œé€šè¿‡å‡å°‘ä¿¡æ¯ä»£å·®ï¼Œè®©AI coding å®Œæˆçš„UI é£æ ¼æœ‰ä¸é”™çš„æ•ˆæœ</strong></p>
</blockquote>
<p><a href="https://juejin.cn/post/7568416956040560694" target="_blank" title="https://juejin.cn/post/7568416956040560694">åŸºäºç™¾åº¦åœ°å›¾JSAPI Threeçš„åŸå¸‚å…¬äº¤å®¢æµå¯è§†åŒ–ï¼ˆä¸‰ï¼‰â€”â€”å®æ—¶å…¬äº¤</a> <a href="https://juejin.cn/user/3408905680473438/posts" target="_blank" title="https://juejin.cn/user/3408905680473438/posts"> @å°å·¦OvO</a></p>
<blockquote>
<p>ä¸€èˆ¬å…¬äº¤è½¦æ›´æ–°å®æ—¶ä½ç½®éƒ½æ˜¯socketï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨å†å²è¡Œè¿›è½¨è¿¹æ•°æ®traceData.jsonè¿›è¡Œè°ƒè¯•ï¼Œç«™å°æˆ‘ä»¬é‡‡ç”¨glbæ¨¡å‹ï¼Œå¹¶å°†æ¨¡å‹æœå‘è·¯çº¿ä¿è¯è§†è§‰æ­£ç¡®ï¼Œå…¬äº¤è½¦è¿è¡Œæ—¶éœ€è¦æ²¿è·¯è¡Œé©¶å¹¶ä¸”éœ€è¦æ­£ç¡®çš„æœå‘ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7569087944159150106" target="_blank" title="https://juejin.cn/post/7569087944159150106">TemPad Devï¼šå…è´¹çš„ Figma inspect é¢æ¿æ˜¯æ€ä¹ˆå®ç°çš„</a> <a href="https://juejin.cn/user/4212984285234862/posts" target="_blank" title="https://juejin.cn/user/4212984285234862/posts"> @Justineo</a></p>
<blockquote>
<p>ç”±äº Inspect é¢æ¿åœ¨æ¨å‡º Dev Mode ä»¥åè¢«è°ƒæ•´åˆ°ä»˜è´¹å¢™åäº†ï¼Œè€Œä¸”åªè¯»æ¨¡å¼ä¸‹æˆ‘ä»¬ä¹Ÿæ— æ³•è¿è¡Œ Figma æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›é€šè¿‡æµè§ˆå™¨æ‰©å±•ï¼Œä¸ºåªè¯»æ¨¡å¼ç”¨æˆ·æä¾›åŸºç¡€çš„è®¾è®¡äº¤ä»˜èƒ½åŠ›ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7568859869693837348" target="_blank" title="https://juejin.cn/post/7568859869693837348"> javaæ·±åº¦è°ƒè¯•æŠ€æœ¯ã€ç¬¬å››äº”ç« ï¼šå¤šçº¿ç¨‹å’Œå¹½çµä»£ç ã€‘</a>  <a href="https://juejin.cn/user/465848660928872/posts" target="_blank" title="https://juejin.cn/user/465848660928872/posts">@æå‰é€€ä¼‘çš„javaçŒ¿</a></p>
<blockquote>
<p>çº¿ç¨‹æ± ä»»åŠ¡ä¸æ•æ‰å¼‚å¸¸ï¼Œå¹¶ä¸”ä½¿ç”¨äº†<code>CountDownLatch</code>Â ç­‰åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸å°±ä¼šå‡ºç° ä¸»çº¿ç¨‹ä¸€ç›´è¢«é˜»å¡</p>
</blockquote>
<p><a href="https://juejin.cn/post/7569959427879567370" target="_blank" title="https://juejin.cn/post/7569959427879567370">Elasticsearch é¿å‘æŒ‡å—ï¼šæˆ‘åœ¨é¡¹ç›®ä¸­æ€»ç»“çš„ 14 æ¡å®ç”¨ç»éªŒ</a> <a href="https://juejin.cn/user/3485898277388519/posts" target="_blank" title="https://juejin.cn/user/3485898277388519/posts">@ä¸€æ—…äºº</a></p>
<blockquote>
<p>åˆšå¼€å§‹æ¥è§¦ Elasticsearch æ—¶ï¼Œæˆ‘è§‰å¾—å®ƒå°±åƒä¸ªé»‘ç›’å­â€”â€”æ•°æ®å¾€é‡Œä¸€æ‰”ï¼ŒæŸ¥è¯¢è¯­å¥ä¸€å†™ï¼Œç»“æœå°±å‡ºæ¥äº†ã€‚ç›´åˆ°è´Ÿè´£å…¬å¸æ ¸å¿ƒä¸šåŠ¡çš„æœç´¢æ¨¡å—åï¼Œæˆ‘æ‰å‘ç°è¿™ä¸ªé»‘ç›’å­é‡Œé¢è—ç€æ— æ•°éœ€è¦æ³¨æ„çš„ç»†èŠ‚ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7568812341010366515" target="_blank" title="https://juejin.cn/post/7568812341010366515">ä½ çš„é¡¹ç›®è¿˜åœ¨ç”¨MyBatiså—ï¼Ÿæˆ–è®¸è¿™ä¸ªæ¡†æ¶æ›´é€‚åˆä½ ï¼šEasy-Query</a>
<a href="https://juejin.cn/user/4001878056904584/posts" target="_blank" title="https://juejin.cn/user/4001878056904584/posts">@SimonKing</a></p>
<blockquote>
<p>å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è®©æŸ¥è¯¢å˜å¾—â€œç®€å•â€ï¼ˆEasyï¼‰ï¼Œé€šè¿‡æç®€çš„Â <code>API</code>è®¾è®¡ã€å¼ºå¤§çš„é“¾å¼æ“ä½œå’Œæ™ºèƒ½çš„Â <code>SQL</code>ç”Ÿæˆï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä»¥æ›´å°‘çš„ä»£ç å®Œæˆå¤æ‚çš„æ•°æ®äº¤äº’ä»»åŠ¡ã€‚æ—¢èƒ½å®Œæˆå•è¡¨çš„æ“ä½œï¼Œä¹Ÿèƒ½é€šè¿‡éšå¼ç»“æ„è¿›è¡Œ<code>Join</code>å…³è”æ“ä½œç­‰ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7569213885095673883" target="_blank" title="https://juejin.cn/post/7569213885095673883">å¾—ç‰©ç®¡ç†ç±»ç›®é…ç½®çº¿ä¸ŠåŒ–ï¼šä»ä¸šåŠ¡ç—›ç‚¹åˆ°æŠ€æœ¯å®ç°</a> <a href="https://juejin.cn/user/2392954206960247/posts" target="_blank" title="https://juejin.cn/user/2392954206960247/posts">@å¾—ç‰©æŠ€æœ¯</a></p>
<blockquote>
<p>ç®¡ç†ç±»ç›®é…ç½®çº¿ä¸ŠåŒ–é¡¹ç›®çš„æ ¸å¿ƒä»·å€¼ï¼Œä¸ä»…åœ¨äºæŠ€æœ¯å±‚é¢çš„æ•ˆç‡æå‡ï¼Œæ›´åœ¨äºé€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·é“¾ï¼Œè®©ä¸šåŠ¡æ–¹ä» â€œè§„åˆ™ææŠ¥çš„æ‰§è¡Œè€…â€ è½¬å˜ä¸º â€œä¸šåŠ¡ç­–ç•¥çš„è®¾è®¡è€…â€ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7568873939033260082" target="_blank" title="https://juejin.cn/post/7568873939033260082">Jetpack Navigation 3ï¼šé¢†èˆªæœªæ¥</a> <a href="https://juejin.cn/user/941602739853453/posts" target="_blank" title="https://juejin.cn/user/941602739853453/posts">@bqliang</a></p>
<blockquote>
<p>åœ¨ Nav3 é‡Œï¼ŒNavEntry å……å½“äº†è·¯ç”±æè¿°ç¬¦çš„è§’è‰²ï¼Œå®ƒåŒ…å«äº†å…·ä½“ key å®ä¾‹ã€UI å†…å®¹ä»¥åŠå…¶ä»–å„ç§é…ç½®ä¿¡æ¯ï¼Œè€Œ EntryProvider åˆ™æ˜¯è´Ÿè´£æ ¹æ® Key æ¥è¿”å›å¯¹åº”çš„ NavEntryã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7569422202950221859" target="_blank" title="https://juejin.cn/post/7569422202950221859">AIæ—¶ä»£ç¨‹åºå‘˜å¦‚ä½•é«˜æ•ˆæé—®ä¸å¼€å‘å·¥ä½œï¼Ÿ</a> <a href="https://juejin.cn/user/3817959264107757/posts" target="_blank" title="https://juejin.cn/user/3817959264107757/posts">@è“ç‘Ÿ</a></p>
<blockquote>
<p>åœ¨AIè¾…åŠ©ç¼–ç¨‹çš„å®è·µä¸­ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ç³»ç»ŸåŒ–çš„æ–¹æ³•ä½“ç³»ã€‚æœ¬èŠ‚æŒ‰ç…§<strong>å­¦ä¹ -&gt;ç†è§£-&gt;åˆ›é€ -&gt;ä¼˜åŒ–</strong>çš„é€»è¾‘é¡ºåºï¼Œé‡æ–°ç»„ç»‡AIåœ¨ç¼–ç¨‹å„ç¯èŠ‚çš„åº”ç”¨æŠ€å·§ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7568418604812140553" target="_blank" title="https://juejin.cn/post/7568418604812140553">å¤§æ¨¡å‹å¦‚ä½•é©æ–°æœç´¢ç›¸å…³æ€§ï¼Ÿæ™ºèƒ½å‡çº§è®©æœç´¢æ›´â€œæ‡‚ä½ â€ï½œå¾—ç‰©æŠ€æœ¯</a> <a href="https://juejin.cn/user/2392954206960247/posts" target="_blank" title="https://juejin.cn/user/2392954206960247/posts"> @å¾—ç‰©æŠ€æœ¯</a></p>
<blockquote>
<p>æˆ‘ä»¬å°†ç«¯åˆ°ç«¯çš„ç›¸å…³æ€§åˆ¤æ–­æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚ä¸€é˜¶æ®µä¾§é‡ç†è§£ç”¨æˆ·æŸ¥è¯¢ï¼Œä»ä¸­æŠ½å–å‡ºå“ç‰Œã€ç³»åˆ—ã€é€‚ç”¨äººç¾¤ç­‰å…³é”®å±æ€§ã€‚äºŒé˜¶æ®µåˆ™å¯¹å†…å®¹è¿›è¡Œå±æ€§è§£æï¼Œå¹¶é€ä¸€åˆ¤æ–­å…¶ä¸æŸ¥è¯¢æ„å›¾çš„ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ç¤¾åŒºæ´»åŠ¨æ—¥å†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c589decbd804477a753bfc1a3b8f5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623839&amp;x-signature=mSBcRly7yUnh7GK0Ff2UJWqez9g%3D" alt="æ˜é‡‘å®˜æ–¹ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<h4 data-id="heading-6">æ´»åŠ¨æ—¥å†</h4>

















<table><thead><tr><th>æ´»åŠ¨åç§°</th><th>æ´»åŠ¨æ—¶é—´</th><th/><th/></tr></thead><tbody><tr><td><a href="https://juejin.cn/post/7571751304625815598" target="_blank" title="https://juejin.cn/post/7571751304625815598">ğŸš€TRAE SOLO å®æˆ˜èµ›</a></td><td>2025å¹´11æœˆ13æ—¥-2025å¹´12æœˆ16æ—¥</td><td/><td/></tr></tbody></table>
<h2 data-id="heading-7">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æµè§ˆå™¨æ’ä»¶ã€‘ä¸€é”®ä¸‹è½½é¡µé¢å›¾ç‰‡å’Œæ–‡æœ¬]]></title>    <link>https://juejin.cn/post/7571768210715344911</link>    <guid>https://juejin.cn/post/7571768210715344911</guid>    <pubDate>2025-11-13T07:34:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571768210715344911" data-draft-id="7571830282849992755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æµè§ˆå™¨æ’ä»¶ã€‘ä¸€é”®ä¸‹è½½é¡µé¢å›¾ç‰‡å’Œæ–‡æœ¬"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:34:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jolyne_"/> <meta itemprop="url" content="https://juejin.cn/user/339101640827981"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æµè§ˆå™¨æ’ä»¶ã€‘ä¸€é”®ä¸‹è½½é¡µé¢å›¾ç‰‡å’Œæ–‡æœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/339101640827981/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jolyne_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:34:00.000Z" title="Thu Nov 13 2025 07:34:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æˆ‘çš„æœ‹å‹ä»¬å·¥ä½œä¸Šå¥½åƒæ²¡äº‹å°±è¦ä¸‹è½½é¡µé¢çš„å›¾ç‰‡å’Œæ–‡æœ¬ï¼Œäºæ˜¯æˆ‘å¹²è„†å†™äº†ä¸ªè°·æ­Œæµè§ˆå™¨æ’ä»¶ï¼Œä¸‹è½½å½“å‰é¡µé¢æ‰€æœ‰çš„å›¾ç‰‡å’Œæ–‡æœ¬ï¼Œæ–¹ä¾¿çœäº‹å˜¿å˜¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e55737e14b4545b592eed6c9f715083e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624040&amp;x-signature=1%2B2ko9zkrBiD1VOYgJscTnoo%2BHY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">image-text-plugin/
â”œâ”€â”€ icons/                  <span class="hljs-comment"># æ’ä»¶å›¾æ ‡ï¼ˆå¯ä½¿ç”¨åœ¨çº¿å›¾æ ‡æ›¿ä»£ï¼‰</span>
â”‚   â”œâ”€â”€ icon16.png
â”‚   â”œâ”€â”€ icon48.png
â”‚   â””â”€â”€ icon128.png
â”œâ”€â”€ manifest.json           <span class="hljs-comment"># æ’ä»¶é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ popup.html              <span class="hljs-comment"># å¼¹å‡ºçª—å£ç•Œé¢</span>
â”œâ”€â”€ popup.js                <span class="hljs-comment"># å¼¹å‡ºçª—å£é€»è¾‘</span>
â”œâ”€â”€ content.js              <span class="hljs-comment"># é¡µé¢å†…å®¹å¤„ç†è„šæœ¬</span>
â””â”€â”€ download.js             <span class="hljs-comment"># é¡µé¢å›¾ç‰‡å¤„ç†è„šæœ¬</span>
</code></pre>
<h2 data-id="heading-1">manifest.json</h2>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"manifest_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ–‡æœ¬å¤åˆ¶ã€å›¾ç‰‡ä¸‹è½½"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç‚¹å‡»å³å¯å¤åˆ¶å½“å‰ç½‘é¡µçš„æ‰€æœ‰æ–‡æœ¬å†…å®¹åˆ°å‰ªè´´æ¿ï¼Œæˆ–è€…ä¸‹è½½å½“å‰é¡µé¢çš„æ‰€æœ‰å›¾ç‰‡"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"16"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/copy.png"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"48"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/copy.png"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"128"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/copy.png"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"default_popup"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"popup.html"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default_icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"icons/copy.png"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"activeTab"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"scripting"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"contextMenus"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"downloads"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“ç‚¹å‡»æµè§ˆå™¨æ‹“å±•ç¨‹åºæ—¶ï¼Œè¦æ˜¾ç¤º <code>popup.html</code> çš„å†…å®¹</p>
<h2 data-id="heading-2">popup.html</h2>
<pre><code class="hljs language-html" lang="html"> <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">180px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
    }
    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">text-align</span>: center;
    }
    <span class="hljs-selector-id">#copyBtn</span>, <span class="hljs-selector-id">#downloadBtn</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">font-weight</span>: bold;
      <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span>;
    }
    <span class="hljs-selector-id">#copyBtn</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4285f4</span>;
    }
    <span class="hljs-selector-id">#downloadBtn</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#df42f4</span>;
    }
    <span class="hljs-selector-id">#copyBtn</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3367d6</span>;
    }
    <span class="hljs-selector-id">#downloadBtn</span><span class="hljs-selector-pseudo">:hover</span>{
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#b42fc5</span>;
    }
    <span class="hljs-selector-id">#status</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    }
    <span class="hljs-selector-class">.success</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#198754</span> <span class="hljs-meta">!important</span>;
    }
    <span class="hljs-selector-class">.error</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#dc3545</span> <span class="hljs-meta">!important</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"copyBtn"</span>&gt;</span>å¤åˆ¶å½“å‰é¡µé¢æ‰€æœ‰æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"downloadBtn"</span>&gt;</span>ä¸‹è½½å½“å‰é¡µé¢æ‰€æœ‰å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"status"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"popup.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>ä¸¤ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«å¤åˆ¶æ–‡æœ¬ã€ä¸‹è½½å›¾ç‰‡ã€‚ç„¶åå†åŠ ä¸Šä¸€ä¸ªçŠ¶æ€æç¤ºæ˜¯å¦æˆåŠŸ</p>
<p>å¹¶æ³¨å…¥è„šæœ¬ <code>popup.js</code></p>
<h2 data-id="heading-3">popup.js</h2>
<p>è„šæœ¬çš„ä»£ç åœ¨é¡µé¢åŠ è½½å®Œæˆåæ‰æ‰§è¡Œ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"DOMContentLoaded"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">//...</span>
});
</code></pre>
<h3 data-id="heading-4">å¤åˆ¶æ–‡æœ¬</h3>
<p>å…ˆçœ‹å¤åˆ¶æ–‡æœ¬çš„è„šæœ¬</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"DOMContentLoaded"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> copyBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"copyBtn"</span>);
  <span class="hljs-keyword">const</span> status = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"status"</span>);
  
    copyBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è·å–å½“å‰æ´»è·ƒæ ‡ç­¾é¡µ</span>
      <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({
        <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span>,
      });

      <span class="hljs-comment">// å‘é¡µé¢æ³¨å…¥å†…å®¹è„šæœ¬ï¼Œè·å–æ‰€æœ‰æ–‡æœ¬</span>
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">scripting</span>.<span class="hljs-title function_">executeScript</span>({
        <span class="hljs-attr">target</span>: { <span class="hljs-attr">tabId</span>: tab.<span class="hljs-property">id</span> },
        <span class="hljs-attr">files</span>: [<span class="hljs-string">"content.js"</span>],
      });

      <span class="hljs-comment">// æå–æ–‡æœ¬å†…å®¹</span>
      <span class="hljs-keyword">const</span> pageText = results[<span class="hljs-number">0</span>].<span class="hljs-property">result</span>;

      <span class="hljs-keyword">if</span> (!pageText.<span class="hljs-title function_">trim</span>()) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å½“å‰é¡µé¢æ²¡æœ‰å¯å¤åˆ¶çš„æ–‡æœ¬"</span>);
      }

      <span class="hljs-comment">// å¤åˆ¶åˆ°å‰ªè´´æ¿</span>
      <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">clipboard</span>.<span class="hljs-title function_">writeText</span>(pageText);

      <span class="hljs-comment">// æ˜¾ç¤ºæˆåŠŸæç¤º</span>
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">"âœ… å¤åˆ¶æˆåŠŸï¼"</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">"success"</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯æç¤º</span>
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">`âŒ å¤åˆ¶å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">"error"</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¤åˆ¶å¤±è´¥ï¼š"</span>, error);
    }

    <span class="hljs-comment">// 3ç§’åæ¸…é™¤æç¤º</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">""</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">""</span>;
    }, <span class="hljs-number">3000</span>);
  });
  
  <span class="hljs-comment">//...</span>
  
});
</code></pre>
<p>å½“æˆ‘ä»¬æ‰§è¡Œå¤åˆ¶æ“ä½œæ—¶ï¼Œä¼šå¾€å½“å‰é¡µé¢æ³¨å…¥ <code>content.js</code> çš„è„šæœ¬ï¼Œæ‹¿åˆ°æ‰§è¡Œç»“æœ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// content.js - ä¿ç•™æ¢è¡Œçš„æ–‡æœ¬æå–é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getAllPageTextWithLineBreaks</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> tempDoc = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-comment">// ç§»é™¤ä¸éœ€è¦çš„æ ‡ç­¾ï¼ˆè„šæœ¬ã€æ ·å¼ã€iframeç­‰ï¼‰</span>
  <span class="hljs-keyword">const</span> removeTags = [<span class="hljs-string">'script'</span>, <span class="hljs-string">'style'</span>, <span class="hljs-string">'noscript'</span>, <span class="hljs-string">'iframe'</span>, <span class="hljs-string">'svg'</span>, <span class="hljs-string">'canvas'</span>];
  removeTags.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tag</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> elements = tempDoc.<span class="hljs-title function_">querySelectorAll</span>(tag);
    elements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el.<span class="hljs-title function_">remove</span>());
  });

  <span class="hljs-comment">// å®šä¹‰éœ€è¦è‡ªåŠ¨æ¢è¡Œçš„å—çº§å…ƒç´ å’Œé‡è¦è¡Œå†…å…ƒç´ </span>
  <span class="hljs-keyword">const</span> blockElements = [
    <span class="hljs-string">'div'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'h1'</span>, <span class="hljs-string">'h2'</span>, <span class="hljs-string">'h3'</span>, <span class="hljs-string">'h4'</span>, <span class="hljs-string">'h5'</span>, <span class="hljs-string">'h6'</span>,
    <span class="hljs-string">'ul'</span>, <span class="hljs-string">'ol'</span>, <span class="hljs-string">'li'</span>, <span class="hljs-string">'dl'</span>, <span class="hljs-string">'dt'</span>, <span class="hljs-string">'dd'</span>, <span class="hljs-string">'table'</span>, <span class="hljs-string">'tr'</span>, <span class="hljs-string">'td'</span>,
    <span class="hljs-string">'header'</span>, <span class="hljs-string">'footer'</span>, <span class="hljs-string">'section'</span>, <span class="hljs-string">'article'</span>, <span class="hljs-string">'nav'</span>, <span class="hljs-string">'aside'</span>,
    <span class="hljs-string">'blockquote'</span>, <span class="hljs-string">'pre'</span>, <span class="hljs-string">'address'</span>, <span class="hljs-string">'figure'</span>, <span class="hljs-string">'figcaption'</span>
  ];

  <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼ŒåŒæ—¶è®°å½•å…ƒç´ ç±»å‹ä»¥æ·»åŠ æ¢è¡Œ</span>
  <span class="hljs-keyword">const</span> textParts = [];
  <span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(tempDoc.<span class="hljs-property">body</span>, <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_TEXT</span>, <span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
    <span class="hljs-comment">// è¿‡æ»¤æ‰çº¯ç©ºç™½æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">return</span> node.<span class="hljs-property">textContent</span>.<span class="hljs-title function_">trim</span>() ? <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_ACCEPT</span> : <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_REJECT</span>;
  });

  <span class="hljs-keyword">let</span> currentNode;
  <span class="hljs-keyword">let</span> prevElement = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">while</span> (currentNode = walker.<span class="hljs-title function_">nextNode</span>()) {
    <span class="hljs-keyword">const</span> text = currentNode.<span class="hljs-property">textContent</span>.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (!text) <span class="hljs-keyword">continue</span>;

    <span class="hljs-comment">// è·å–å½“å‰æ–‡æœ¬èŠ‚ç‚¹çš„çˆ¶å…ƒç´ </span>
    <span class="hljs-keyword">const</span> parentEl = currentNode.<span class="hljs-property">parentElement</span>;
    <span class="hljs-keyword">const</span> parentTag = parentEl.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>();

    <span class="hljs-comment">// é€»è¾‘ï¼šæ·»åŠ æ¢è¡Œçš„æƒ…å†µ</span>
    <span class="hljs-keyword">const</span> shouldAddLineBreak = (<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// 1. å¦‚æœå‰ä¸€ä¸ªå…ƒç´ æ˜¯å—çº§å…ƒç´ ï¼Œæ·»åŠ æ¢è¡Œ</span>
      <span class="hljs-keyword">if</span> (prevElement &amp;&amp; blockElements.<span class="hljs-title function_">includes</span>(prevElement.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>())) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-comment">// 2. å¦‚æœå½“å‰çˆ¶å…ƒç´ æ˜¯å—çº§å…ƒç´ ï¼Œä¸”ä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ·»åŠ æ¢è¡Œ</span>
      <span class="hljs-keyword">if</span> (blockElements.<span class="hljs-title function_">includes</span>(parentTag) &amp;&amp; textParts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-comment">// 3. å¦‚æœå‰ä¸€ä¸ªå…ƒç´ å’Œå½“å‰å…ƒç´ æ˜¯ä¸åŒçš„è¡Œå†…å…„å¼Ÿå…ƒç´ ï¼Œæ·»åŠ æ¢è¡Œ</span>
      <span class="hljs-keyword">if</span> (prevElement &amp;&amp; 
          prevElement.<span class="hljs-property">parentElement</span> === parentEl.<span class="hljs-property">parentElement</span> &amp;&amp; 
          !blockElements.<span class="hljs-title function_">includes</span>(prevElement.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>()) &amp;&amp;
          !blockElements.<span class="hljs-title function_">includes</span>(parentTag)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-comment">// 4. åˆ—è¡¨é¡¹ç‰¹æ®Šå¤„ç†ï¼šæ¯ä¸ªliå‰åŠ æ¢è¡Œ</span>
      <span class="hljs-keyword">if</span> (parentTag === <span class="hljs-string">'li'</span> &amp;&amp; textParts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    })();

    <span class="hljs-comment">// æ ¹æ®åˆ¤æ–­æ·»åŠ æ¢è¡Œç¬¦</span>
    <span class="hljs-keyword">if</span> (shouldAddLineBreak) {
      <span class="hljs-comment">// é¿å…è¿ç»­å¤šä¸ªæ¢è¡Œ</span>
      <span class="hljs-keyword">const</span> lastPart = textParts[textParts.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (!lastPart || !lastPart.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'\n\n'</span>)) {
        textParts.<span class="hljs-title function_">push</span>(<span class="hljs-string">'\n'</span>);
      }
    }

    <span class="hljs-comment">// æ·»åŠ å½“å‰æ–‡æœ¬ï¼ˆæ¸…ç†å†…éƒ¨å¤šä½™ç©ºç™½ï¼‰</span>
    <span class="hljs-keyword">const</span> cleanedText = text.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">' '</span>); <span class="hljs-comment">// åªæ¸…ç†æ–‡æœ¬å†…éƒ¨çš„å¤šä½™ç©ºç™½</span>
    textParts.<span class="hljs-title function_">push</span>(cleanedText);

    <span class="hljs-comment">// æ›´æ–°å‰ä¸€ä¸ªå…ƒç´ è®°å½•</span>
    prevElement = parentEl;
  }

  <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰éƒ¨åˆ†ï¼Œå¤„ç†é¦–å°¾æ¢è¡Œ</span>
  <span class="hljs-keyword">let</span> finalText = textParts.<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\n+/</span>, <span class="hljs-string">''</span>) <span class="hljs-comment">// ç§»é™¤å¼€å¤´çš„æ¢è¡Œ</span>
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+$/</span>, <span class="hljs-string">''</span>) <span class="hljs-comment">// ç§»é™¤ç»“å°¾çš„æ¢è¡Œ</span>
    .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n{3,}/g</span>, <span class="hljs-string">'\n\n'</span>); <span class="hljs-comment">// æœ€å¤šä¿ç•™ä¸¤ä¸ªè¿ç»­æ¢è¡Œï¼ˆæ¨¡æ‹Ÿæ®µè½é—´è·ï¼‰</span>

  <span class="hljs-keyword">return</span> finalText;
}

<span class="hljs-comment">// å°†ç»“æœè¿”å›ç»™popup</span>
<span class="hljs-title function_">getAllPageTextWithLineBreaks</span>();
</code></pre>
<p>ç„¶åé€šè¿‡ <code>navigator.clipboard.writeText(pageText)</code> å¤åˆ¶æ–‡æœ¬</p>
<p>è¿™é‡Œé¢ä¸»è¦æ˜¯å¤åˆ¶æ–‡æœ¬åï¼Œä¿æŒæ¢è¡Œã€‚æ¯”å¦‚æ–‡æœ¬æ˜¯ <code>11 222</code> å¤åˆ¶å‡ºæ¥çš„å°±æ˜¯</p>
<pre><code class="hljs language-html" lang="html">11
222
</code></pre>
<p>æ¢è¡Œçš„</p>
<h3 data-id="heading-5">å›¾ç‰‡ä¸‹è½½</h3>
<p>å›¾ç‰‡ä¸‹è½½ä¹Ÿä¸€æ ·çš„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"DOMContentLoaded"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> downloadBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"downloadBtn"</span>);
  <span class="hljs-keyword">const</span> status = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"status"</span>);

  downloadBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è·å–å½“å‰æ´»è·ƒæ ‡ç­¾é¡µ</span>
      <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({
        <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span>,
      });

      <span class="hljs-comment">// å‘é¡µé¢æ³¨å…¥å†…å®¹è„šæœ¬ï¼Œè·å–æ‰€æœ‰æ–‡æœ¬</span>
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">scripting</span>.<span class="hljs-title function_">executeScript</span>({
        <span class="hljs-attr">target</span>: { <span class="hljs-attr">tabId</span>: tab.<span class="hljs-property">id</span> },
        <span class="hljs-attr">files</span>: [<span class="hljs-string">"download.js"</span>],
      });

      <span class="hljs-comment">// è·å–æ‰§è¡Œç»“æœ</span>
      <span class="hljs-keyword">if</span> (!results || !results[<span class="hljs-number">0</span>]?.<span class="hljs-property">result</span> || results[<span class="hljs-number">0</span>].<span class="hljs-property">result</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æœªæ‰¾åˆ°å›¾ç‰‡"</span>);
        <span class="hljs-keyword">return</span>;
      }
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">"âœ… æ­£åœ¨ä¸‹è½½"</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">"success"</span>;
      <span class="hljs-keyword">const</span> images = results[<span class="hljs-number">0</span>].<span class="hljs-property">result</span>;
      <span class="hljs-comment">// æ‰¹é‡ä¸‹è½½å›¾ç‰‡</span>
      images.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (url, index) =&gt; {
        <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">downloads</span>.<span class="hljs-title function_">download</span>({
          <span class="hljs-attr">url</span>: url,
          <span class="hljs-attr">filename</span>: <span class="hljs-string">`images/image_<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>.jpg`</span>, <span class="hljs-comment">// ä¿å­˜è·¯å¾„</span>
          <span class="hljs-attr">saveAs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†</span>
        })
        <span class="hljs-comment">// setTimeout(() =&gt; {</span>
        <span class="hljs-comment">//   chrome.downloads.download({</span>
        <span class="hljs-comment">//     url: url,</span>
        <span class="hljs-comment">//     filename: `images/image_${index + 1}.jpg`, // ä¿å­˜è·¯å¾„</span>
        <span class="hljs-comment">//     saveAs: false, // ä¸å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†</span>
        <span class="hljs-comment">//   });</span>
        <span class="hljs-comment">// }, index * 500); // æ¯å¼ å›¾ç‰‡é—´éš” 500msï¼Œé¿å…æµè§ˆå™¨é™åˆ¶</span>
      });
      <span class="hljs-comment">// æ˜¾ç¤ºæˆåŠŸæç¤º</span>
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">"âœ… ä¸‹è½½å®Œæˆï¼"</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯æç¤º</span>
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">`âŒ ä¸‹è½½å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">"error"</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ä¸‹è½½å¤±è´¥ï¼š"</span>, error);
    }

    <span class="hljs-comment">// 3ç§’åæ¸…é™¤æç¤º</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      status.<span class="hljs-property">textContent</span> = <span class="hljs-string">""</span>;
      status.<span class="hljs-property">className</span> = <span class="hljs-string">""</span>;
    }, <span class="hljs-number">3000</span>);
  });
});
</code></pre>
<p>ç‚¹å‡»ä¸‹è½½å›¾ç‰‡çš„æŒ‰é’®åï¼Œæ‰§è¡Œè„šæœ¬ï¼Œæ³¨å…¥ <code>download.js</code> è„šæœ¬ï¼Œæ‹¿åˆ°æ‰§è¡Œç»“æœ</p>
<pre><code class="hljs language-download.js" lang="download.js">// åœ¨é¡µé¢ä¸­æ‰§è¡Œçš„å‡½æ•°ï¼Œç”¨äºè·å–æ‰€æœ‰å›¾ç‰‡URL
function getImagesFromPage() {
  const images = Array.from(document.images)
    .map((img) =&gt; img.src)
    .filter((src) =&gt; src.startsWith("http"));

  return images;
}

getImagesFromPage();
</code></pre>
<p>ç„¶åé€šè¿‡ <code>chrome.downloads.download</code> æŠŠå›¾ç‰‡éƒ½ä¸‹è½½å‡ºæ¥</p>
<h2 data-id="heading-6">æ•ˆæœæ¼”ç¤º</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a40caa5164a47bdbd849ca25dcde849~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9seW5lXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624040&amp;x-signature=KdfUyvL2iX9vB8zd%2FowIrNxi8pI%3D" alt="QQ20251113-152420.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IMç³»ç»Ÿ-å®¢æˆ·ç«¯æ¶æ„ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7571742703534833700</link>    <guid>https://juejin.cn/post/7571742703534833700</guid>    <pubDate>2025-11-13T07:25:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571742703534833700" data-draft-id="7571742703534669860" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IMç³»ç»Ÿ-å®¢æˆ·ç«¯æ¶æ„ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-13T07:25:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é”…æ‹Œé¥­"/> <meta itemprop="url" content="https://juejin.cn/user/210732593191543"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IMç³»ç»Ÿ-å®¢æˆ·ç«¯æ¶æ„ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/210732593191543/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é”…æ‹Œé¥­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:25:43.000Z" title="Thu Nov 13 2025 07:25:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å³æ—¶é€šè®¯ç³»ç»Ÿï¼ˆInstant Messagingï¼Œç®€ç§°IMï¼‰ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡äº’è”ç½‘å®æ—¶ç›¸äº’å‘é€/æ¥æ”¶ä¿¡æ¯ã€‚åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œä¸»æµè½¯ä»¶å¤§éƒ½å†…ç½®äº†è‡ªå·±çš„IMç³»ç»Ÿã€‚é™¤äº†å¾®ä¿¡ã€é£ä¹¦è¿™æ ·çš„IMåº”ç”¨å¤–ï¼Œè¿˜æœ‰åƒæ·˜å®ã€äº¬ä¸œã€ç¾å›¢ä¹Ÿæœ‰è‡ªå·±çš„IMå®¢æœå…¥å£ï¼Œå°çº¢ä¹¦ã€æŠ–éŸ³ç­‰ç¤¾åŒºè§†é¢‘ç±»è½¯ä»¶ï¼Œä¹Ÿæœ‰è‡ªå·±çš„IMç¤¾äº¤ç³»ç»Ÿå…¥å£ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f02a87106c0b40939f9a1f0d91c5bbff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=xG10hg02pfPOeZHlNpPcVNoZSxM%3D" width="300" loading="lazy"/>
<p>IMåŠŸèƒ½ä¸»è¦åŒ…æ‹¬<strong>æ¶ˆæ¯çš„æ”¶å‘ã€ç”¨æˆ·ç™»å½•æ€ç®¡ç†ã€ä¼šè¯ç®¡ç†</strong>ç­‰åŸºç¡€åŠŸèƒ½ã€‚è¿˜æœ‰<strong>ç¾¤èŠä¼šè¯ã€å¯Œæ–‡æœ¬æ¶ˆæ¯ã€è¯­éŸ³è§†é¢‘èŠå¤©</strong>ç­‰é«˜çº§åŠŸèƒ½ã€‚å½“ç„¶å¯¹äºé£ä¹¦è¿™æ ·çš„åŠå…¬åº”ç”¨ï¼Œè¿˜æœ‰<strong>æœºå™¨äººã€æ—¥å†æ—¥ç¨‹ã€å¼€æ”¾å¹³å°ã€äº‘æ–‡æ¡£</strong>ç­‰å®šåˆ¶åŒ–åŠŸèƒ½ã€‚åŒæ—¶å½“å‰AIå…´èµ·ï¼Œåœ¨IMä¸­ä¹Ÿæœ‰å¤§é‡åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚<strong>AIæ€»ç»“æ–‡æ¡£ã€AIæ€»ç»“æœªè¯»æ¶ˆæ¯</strong>ç­‰åŠŸèƒ½ã€‚</p>
<p>ç½‘ç»œä¸Šæœ‰å¾ˆå¤šIMæœåŠ¡ç«¯ç›¸å…³æ–‡ç« ï¼Œå¯¹äºå®¢æˆ·ç«¯çš„æŠ€æœ¯é€‰å‹ã€ç»†èŠ‚ç­‰æè¿°è¾ƒå°‘ã€‚æœ¬æ–‡ä¸»è¦èšç„¦åœ¨å®¢æˆ·ç«¯æ¶æ„é€‰å‹ä¸Šã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å®¢æˆ·ç«¯æ•´ä½“æ¶æ„</h2>
<p>åœ¨ä¸€ä¸ªå…¬å¸ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªä¸šåŠ¡æ–¹éƒ½ç”¨åˆ°äº†IMåŠŸèƒ½ï¼Œä¸ºé¿å…é‡å¤å¼€å‘ï¼Œä¸€èˆ¬ä¼šå°†IMä¸šåŠ¡å°è£…ä¸ºSDKï¼Œå°†é€šç”¨ä¸šåŠ¡ä¸‹æ²‰åˆ°SDKä¸­ï¼Œæ–¹ä¾¿å„ä¸ªä¸šåŠ¡æ–¹ç›´æ¥ä½¿ç”¨ã€‚ä»¥å­—èŠ‚è·³åŠ¨ä¸ºä¾‹ï¼Œæ­£å¸¸çš„æ¶æ„å¯èƒ½ä¼šå¦‚ä¸‹ï¼š</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c2fe4c7f4c9474893e155008a91aab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=3XPy7otALB3o6PkEluDwRqecMmg%3D" loading="lazy"/>
<p><strong>IMæœåŠ¡ç«¯ï¼š</strong> æä¾›ç¨³å®šã€å®æ—¶çš„å„é¡¹æœåŠ¡ï¼Œå¦‚æ¶ˆæ¯æ”¶å‘ã€ç™»å½•æ³¨å†Œã€æ¶ˆæ¯åŒæ­¥ã€ä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ç½‘ç»œå±‚SDKï¼š</strong> è¿™é‡Œä¸€èˆ¬æŒ‡é•¿é“¾SDKï¼Œå³<code>socket</code>å±‚ã€‚æä¾›æ•°æ®åŠ è§£å¯†ã€æ•°æ®å‹ç¼©ã€æ•°æ®ä¼ è¾“ï¼Œä¿è¯æ•°æ®å®æ—¶ã€å®‰å…¨ã€é«˜æ•ˆä¼ è¾“ã€‚</p>
<p><strong>å®¢æˆ·ç«¯IMä¸šåŠ¡å±‚SDKï¼š</strong> å¤„ç†å®¢æˆ·ç«¯çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œå¦‚æ¶ˆæ¯/ä¼šè¯åŒæ­¥ã€ç”¨æˆ·çŠ¶æ€ç®¡ç†ã€æœªè¯»æ•°ç®¡ç†ã€æ•°æ®å­˜å‚¨ã€è®¾ç½®ç®¡ç†ã€æœ¬åœ°ç¼“å­˜ç­‰èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç½‘ç»œé€‰å‹</h2>
<p>åœ¨IMç³»ç»Ÿä¸­ï¼Œç½‘ç»œå±‚çš„é€‰å‹æ— ç–‘æ˜¯æœ€é‡è¦çš„ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œé€šå¸¸ä¼šæœ‰è¿™å››ç§æŠ€æœ¯ï¼š<code>çŸ­è½®è¯¢</code>ã€<code>é•¿è½®è¯¢</code>ã€<code>WebSocket</code>ã€<code>SSE</code>ã€‚</p>
<h3 data-id="heading-2">1. çŸ­è½®è¯¢</h3>
<p>å®¢æˆ·ç«¯å®šæ—¶ï¼Œå¦‚æ¯500æ¯«ç§’å‘æœåŠ¡ç«¯å‘é€<code>HTTP</code>è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å¤„ç†å®Œæˆåè¿”å›è¯·æ±‚æ•°æ®ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fbackendgarden.com%2Fnotes%2Fhttp-polling" target="_blank" title="https://backendgarden.com/notes/http-polling" ref="nofollow noopener noreferrer">HTTP Polling</a></p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2674f6880c54e3fa0dfad3aca971431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=%2BTvA5wfXXLg2nLdsDufcQeRCDAI%3D" loading="lazy"/>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å®ç°ç®€å•ã€å…¼å®¹æ€§å¥½</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> <code>HTTP</code>å¤šæ¬¡è¯·æ±‚æµªè´¹å®¢æˆ·ç«¯æµé‡ï¼Œå ç”¨å¤šä¸ªæœåŠ¡ç«¯ç«¯å£ç­‰èµ„æºã€‚</p>
<p><strong>å®æ—¶æ€§ï¼š</strong> å·®</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> éå¸¸å°‘ï¼Œä½¿ç”¨é¢‘ç‡ä½çš„é¡µé¢</p>
<p>åœ¨ç§»åŠ¨ç«¯çš„æ‰«æäºŒç»´ç é¡µé¢ï¼Œä¼šé‡‡ç”¨<code>çŸ­è½®è¯¢</code>æ–¹å¼ã€‚è¿˜æœ‰ç½‘é¡µç«¯çš„èµ›äº‹æ¯”åˆ†å±•ç¤ºé¡µé¢ï¼Œä¹Ÿå¯èƒ½ä¼šé‡‡ç”¨<code>çŸ­è½®è¯¢</code>æ–¹å¼ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/981d2248281c485380dca93d64e7af86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=bz0bacwfdKohP23iEoLEk3%2BlWlw%3D" width="400" loading="lazy"/>
<p><code>çŸ­è½®è¯¢</code>å¼€å‘æˆæœ¬æä½ï¼Œä½†æ˜¯é¢‘ç¹è°ƒç”¨æœåŠ¡ç«¯æ¥å£ï¼Œå¯¹æœåŠ¡ç«¯çš„CPUå’Œç«¯å£èµ„æºå ç”¨æå¤§ã€‚åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨è¾ƒå°‘ã€‚</p>
<h3 data-id="heading-3">2. é•¿è½®è¯¢</h3>
<p>å®¢æˆ·ç«¯å‘é€<code>HTTP</code>è¯·æ±‚åï¼ŒæœåŠ¡ç«¯æŒ‚èµ·è¿æ¥ç›´åˆ°æ•°æ®æ›´æ–°æˆ–è¶…æ—¶ï¼Œè¿”å›å“åº”åï¼Œå®¢æˆ·ç«¯ç«‹å³å‘èµ·æ–°è¯·æ±‚ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fdc283aeee14a53b0d3b280488e0691~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=kHNpVQcvdx%2F0ox%2BGUlWnTlP1ub0%3D" loading="lazy"/>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å‡å°‘æ— æ•ˆè¯·æ±‚ï¼Œæ¯”<code>çŸ­è½®è¯¢</code>å®æ—¶æ€§å¥½ï¼Œèµ„æºæ¶ˆè€—ä½</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> æœåŠ¡ç«¯éœ€ç»´æŠ¤æŒ‚èµ·è¿æ¥ï¼Œé«˜å¹¶å‘æ—¶èµ„æºæ¶ˆè€—ä»ç„¶æ¯”è¾ƒå¤§</p>
<p><strong>å®æ—¶æ€§ï¼š</strong> å¥½</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> æœ‰å®æ—¶æ€§è¦æ±‚ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨<code>WebSocket</code>ã€<code>SSE</code>çš„åœºæ™¯</p>
<p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯è¿˜æ²¡æœ‰ç”¨åˆ°è¿‡è¿™ä¸ªæŠ€æœ¯ã€‚æœåŠ¡ç«¯çš„<code>Nacos</code>çš„é…ç½®ä¸­å¿ƒä½¿ç”¨è¾ƒå¤šï¼Œå¯æŸ¥çœ‹æ–‡ç« ï¼š<a href="https://juejin.cn/post/7137124336783065125" target="_blank" title="https://juejin.cn/post/7137124336783065125">å®ç°ä¸€ä¸ªç®€å•çš„é•¿è½®è¯¢</a></p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c6a875b3a8c4f2cae32be9a31e8fdaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=DhW71Ks2oG%2BIXCCr8DXCFFgBZTE%3D" width="400" loading="lazy"/>
<ul>
<li>
<p>é¦–å…ˆå®¢æˆ·ç«¯å‘èµ·<code>é•¿è½®è¯¢</code>è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿™æ—¶ä¼šæŒ‚èµ·å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æœåœ¨æœåŠ¡ç«¯è®¾è®¡çš„30sä¹‹å†…éƒ½æ²¡æœ‰å‘ç”Ÿå˜æ›´ï¼ŒæœåŠ¡ç«¯ä¼šå“åº”å›å®¢æˆ·ç«¯æ•°æ®æ²¡æœ‰å˜æ›´ï¼Œå®¢æˆ·ç«¯ä¼šç»§ç»­å‘é€è¯·æ±‚ã€‚</p>
</li>
<li>
<p>å¦‚æœåœ¨30sä¹‹å†…æœåŠ¡æ•°æ®å‘ç”Ÿäº†å˜æ›´ï¼ŒæœåŠ¡ç«¯ä¼šæ¨é€å˜æ›´çš„æ•°æ®åˆ°å®¢æˆ·ç«¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">3. Server Send Event (SSE)</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.bytebytego.com%2Fp%2Fnetwork-protocols-behind-server-push" target="_blank" title="https://blog.bytebytego.com/p/network-protocols-behind-server-push" ref="nofollow noopener noreferrer">Network Protocols behind Server Push, Online Gaming, and Emails</a></p>
<p>åŸºäº<code>HTTP</code>åè®®ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥åï¼Œè¿æ¥ä¸æ–­å¼€ï¼ŒæœåŠ¡ç«¯å¯ä»¥ä¸»åŠ¨æ¨é€æ•°æ®æµï¼ˆå¦‚<code>Content-Type: text/event-stream</code>ï¼‰</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/804a066541dd41be91715cd5be06710d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=2UIm3wOuv0VW0zHwlwx66x94dnA%3D" loading="lazy"/>
<p><strong>ä¼˜ç‚¹ï¼š</strong> åŸºäº<code>HTTP</code>ï¼Œæ”¯æŒæ–­çº¿é‡è¿ã€å†…ç½‘ç©¿é€ã€å¿ƒè·³ä¿æ´»ç­‰åŠŸèƒ½</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> åŠåŒå·¥ï¼Œä»…æ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œä¸æ”¯æŒå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®ã€‚</p>
<p><strong>å®æ—¶æ€§ï¼š</strong> å¥½</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> è‚¡ç¥¨è¡Œæƒ…èµ°åŠ¿å›¾ã€æ–°é—»æ¨é€</p>
<p>ä¼´éšAIå‘å±•ï¼Œç›®å‰ä¸€äº›ä¸»æµçš„AIåº”ç”¨ï¼Œé‡‡ç”¨çš„ä¹Ÿæ˜¯<code>SSE</code>ã€‚</p>
<p>åœ¨ç½‘é¡µç«¯é—®é—®é¢˜åï¼Œè±†åŒ…å’Œ<code>deepseek</code>éƒ½æœ‰ä¸€ä¸ª<code>SSE</code>è¿æ¥ï¼ŒæœåŠ¡ç«¯ä¸æ–­å‘å®¢æˆ·ç«¯è¿”å›é—®é¢˜ç»“æœï¼Œå®¢æˆ·ç«¯æ ¹æ®æœåŠ¡ç«¯è¿”å›å†…å®¹è¿›è¡Œæµå¼è¾“å‡ºã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd833e9007f6469cadef20abf835c348~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=x8HSh3cnAZjy8PgKmJ%2B2pSnYXKA%3D" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a447811d5c44653b6f8dceee1b4b4c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=L%2B50dSFDiGgWD0dFUWGR%2B8b6Wdo%3D" loading="lazy"/>
<h3 data-id="heading-5">4. WebSocket</h3>
<p>åŸºäº<code>TCP</code>çš„å…¨åŒå·¥åè®®ï¼Œå‰æœŸé€šè¿‡<code>HTTP</code>å‡çº§æ¡æ‰‹ï¼ˆ<code>Upgrade: websocket</code>ï¼‰å»ºç«‹æŒä¹…è¿æ¥ï¼Œåç»­é€šè¿‡<code>TCP</code>å®ç°åŒå‘å®æ—¶é€šä¿¡ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34affe5948e4417eb48873d48e71187f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=ZRfQ4GKfObWqwByVnkT05QPE%2BDc%3D" loading="lazy"/>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å…¨åŒå·¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç›¸äº’å‘é€æ•°æ®</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> å®ç°å¤æ‚ï¼Œéœ€è¦å•ç‹¬å¤„ç†é‡è¿ã€ä¿æ´»ã€‚</p>
<p><strong>å®æ—¶æ€§ï¼š</strong> å¥½</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> åœ¨çº¿æ¸¸æˆã€ç›´æ’­å¼¹å¹•ã€<code>Figma</code>ååŒç¼–è¾‘</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af6c59be82744b0fa56387400cce603d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=IjPeMGJz%2FgIqMLlkavL5aeWl5BI%3D" width="300" loading="lazy"/>
<p><code>WebSocket</code>åœ¨æ‰€æœ‰æ–¹æ¡ˆä¸­ï¼ŒåŠŸèƒ½ä¸Šæ˜¯æœ€å¼ºå¤§çš„ï¼Œä½†æ˜¯å®ç°æˆæœ¬è¾ƒé«˜ã€‚åŒæ—¶<code>WebSocket</code>åªæœ‰ä¸€ä¸ªè¿æ¥é€šé“ï¼Œæ‰€ä»¥æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œä¹Ÿä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿã€‚</p>
<p><strong>WebSocketå»ºç«‹è¿æ¥çš„è¿‡ç¨‹ï¼š</strong></p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ae2553ff6646c0832b2f6d85c28f1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZSF5ouM6aWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763623543&amp;x-signature=nki12wgxSfit5PIS8zba6xnjs%2BU%3D" loading="lazy"/>
<h3 data-id="heading-6">5. æ€»ç»“</h3>








































<table><thead><tr><th>****</th><th><strong>çŸ­è½®è¯¢</strong></th><th><strong>é•¿è½®è¯¢</strong></th><th><strong>SSE</strong></th><th><strong>WebSocket</strong></th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ–¹å‘</strong></td><td>å®¢æˆ·ç«¯â†’æœåŠ¡å™¨</td><td>å®¢æˆ·ç«¯â†’æœåŠ¡å™¨</td><td>æœåŠ¡å™¨â†’å®¢æˆ·ç«¯</td><td>åŒå‘é€šä¿¡</td></tr><tr><td><strong>åè®®</strong></td><td>HTTP</td><td>HTTP</td><td>HTTP</td><td>WebSocket</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>ä½</td><td>ä¸­</td><td>å¥½</td><td>å¥½</td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>é«˜ï¼ˆé¢‘ç¹è¯·æ±‚ï¼‰</td><td>ä¸­ï¼ˆæŒ‚èµ·è¿æ¥ï¼‰</td><td>ä½</td><td>ä½ï¼ˆé•¿è¿æ¥ï¼‰</td></tr></tbody></table>
<p>IMåº”ç”¨çš„æ•°æ®é‡å¤§ã€å®æ—¶æ€§è¦æ±‚é«˜ï¼Œ<code>çŸ­è½®è¯¢</code>å’Œ<code>é•¿è½®è¯¢</code>æ˜¾ç„¶ä¸ç¬¦åˆIMçš„è¦æ±‚ã€‚</p>
<p>å¯¹æ¯”<code>SSE</code>å’Œ<code>WebSocket</code>ï¼Œ<code>SSE</code>åœ¨å¼€å‘æˆæœ¬ä¸Šæ¯”<code>WebSocket</code>ä½ï¼Œä½†æ˜¯å› ä¸ºåªæ”¯æŒå•å‘é€šä¿¡ï¼Œä¹Ÿä¸æ˜¯<code>WebSocket</code>çš„æœ€ä½³é€‰æ‹©ã€‚è€ŒAIåº”ç”¨é‡‡ç”¨<code>SSE</code>çš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºä»ä¸šåŠ¡ä¸Šçœ‹ï¼ŒAIåº”ç”¨çš„ç½‘ç»œé€šä¿¡ç›¸å¯¹ç®€å•ã€‚åœ¨äº¤äº’ä¸Šï¼ŒåŒä¸€æ—¶é—´å†…ä¸€ä¸ªä¼šè¯åªèƒ½å‘èµ·ä¸€æ¬¡è¯·æ±‚ï¼Œåœ¨<code>SSE</code>æµå¼è¾“å‡ºè¿‡ç¨‹ä¸­ï¼Œæ— æ³•å‘èµ·æ–°çš„è¯·æ±‚ï¼Œæˆ–è€…å¯ä»¥å‘èµ·æ–°è¯·æ±‚ï¼Œè€çš„è¯·æ±‚ä¼šç»“æŸã€‚</p>
<p>è€ŒIMåº”ç”¨ä¸­ï¼Œåœ¨ä¼šè¯ä¸­ï¼Œå°¤å…¶æ˜¯ç¾¤èŠä¼šè¯ä¸­ï¼Œåœ¨æ¥å—æ¶ˆæ¯çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥å¤šæ¬¡å‘é€æ¶ˆæ¯ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>SSE</code>+å¤šä¸ª<code>HTTP</code>çš„æ¡†æ¶ï¼Œ<code>SSE</code>è´Ÿè´£æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œ<code>HTTP</code>è´Ÿè´£å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®ã€‚ä½†è¿™æ ·è¿˜æ˜¯ä¼šæœ‰å¤šä¸ª<code>HTTP</code>è¯·æ±‚çš„èµ„æºæµªè´¹ã€‚</p>
<p>åœ¨IMåº”ç”¨ä¸­ï¼Œä½¿ç”¨<code>WebSocket</code>æ˜¯æœ€ä½³é€‰æ‹©ï¼Œè™½ç„¶å‰æœŸæœ‰ä¸€å®šå¼€å‘æˆæœ¬ï¼Œä½†æ˜¯å±äºä¸€åŠ³æ°¸é€¸ï¼ŒåæœŸå¤æ‚ä¸šåŠ¡å¼€å‘èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€SDKé€‰å‹</h2>
<h3 data-id="heading-8">1. é•¿è¿SDK</h3>
<p><strong>é•¿è¿SDK</strong>ç›®å‰æ¨èç›´æ¥æ¥å…¥è…¾è®¯<code>Mars</code>ï¼Œå®ƒæ›´åŠ è´´åˆ"ç§»åŠ¨äº’è”ç½‘"ã€"ç§»åŠ¨å¹³å°"ç‰¹æ€§çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶é’ˆå¯¹å¼±ç½‘ç»œã€å¹³å°ç‰¹æ€§ç­‰æœ‰å¾ˆå¤šçš„ç›¸å…³ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9DJxipJaaBC8yC-buHgnTQ" target="_blank" title="https://mp.weixin.qq.com/s/9DJxipJaaBC8yC-buHgnTQ" ref="nofollow noopener noreferrer">å¾®ä¿¡ç»ˆç«¯è·¨å¹³å°ç»„ä»¶ mars ç³»åˆ—(äºŒ) - ä¿¡ä»¤ä¼ è¾“è¶…æ—¶è®¾è®¡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fmars%2Fwiki" target="_blank" title="https://github.com/Tencent/mars/wiki" ref="nofollow noopener noreferrer">mars/wiki</a></p>
<p><code>mars</code> æ˜¯å¾®ä¿¡å®˜æ–¹ä½¿ç”¨ <code>C++</code> ç¼–å†™çš„ä¸šåŠ¡æ€§æ— å…³ã€å¹³å°æ€§æ— å…³çš„ç»ˆç«¯åŸºç¡€ç»„ä»¶ï¼Œç›®å‰åœ¨å¾®ä¿¡ <code>Android</code>ã€<code>iOS</code>ã€<code>Windows</code>ã€<code>Mac</code>ã€<code>Windows Phone</code> ç­‰å¤šä¸ªå¹³å°ä¸­ä½¿ç”¨ï¼Œå¹¶æ­£åœ¨ç­¹å¤‡å¼€æºï¼Œå®ƒä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼š</p>
<ol>
<li>
<p><code>COMM</code>ï¼šåŸºç¡€åº“ï¼ŒåŒ…æ‹¬ <code>socket</code>ã€çº¿ç¨‹ã€æ¶ˆæ¯é˜Ÿåˆ—ã€åç¨‹ç­‰åŸºç¡€å·¥å…·ï¼›</p>
</li>
<li>
<p><code>XLOG</code>ï¼šé€šç”¨æ—¥å¿—æ¨¡å—ï¼Œå……åˆ†è€ƒè™‘ç§»åŠ¨ç»ˆç«¯çš„ç‰¹ç‚¹ï¼Œæä¾›é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å®‰å…¨æ€§ã€å®¹é”™æ€§çš„æ—¥å¿—åŠŸèƒ½ï¼›ï¼ˆè¯¦æƒ…ç‚¹å‡»ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3NTYzODYzMg%3D%3D%26mid%3D2653577964%26idx%3D2%26sn%3D48ae92e40ae450327bc47498bd25280f%26chksm%3D84b3b0ebb3c439fd23a62625c088d1231229b4c2576cb50fdfb530751f4b70c12a404a556f30%26scene%3D21%23wechat_redirect" target="_blank" title="http://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=2653577964&amp;idx=2&amp;sn=48ae92e40ae450327bc47498bd25280f&amp;chksm=84b3b0ebb3c439fd23a62625c088d1231229b4c2576cb50fdfb530751f4b70c12a404a556f30&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é«˜æ€§èƒ½æ—¥å¿—æ¨¡å—xlog</a> ï¼‰</p>
</li>
<li>
<p><code>SDT</code>ï¼šç½‘ç»œè¯Šæ–­æ¨¡å—ï¼›</p>
</li>
<li>
<p><code>STN</code>ï¼šä¿¡ä»¤ä¼ è¾“ç½‘ç»œæ¨¡å—ï¼Œè´Ÿè´£ç»ˆç«¯ä¸æœåŠ¡å™¨çš„å°æ•°æ®ä¿¡ä»¤é€šé“ã€‚åŒ…å«äº†å¾®ä¿¡ç»ˆç«¯åœ¨ç§»åŠ¨ç½‘ç»œä¸Šçš„å¤§é‡ä¼˜åŒ–ç»éªŒä¸æˆæœï¼Œç»å†äº†å¾®ä¿¡æµ·é‡ç”¨æˆ·çš„è€ƒéªŒã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">2. ä¸šåŠ¡å±‚SDK</h3>
<p><strong>ä¸šåŠ¡å±‚SDK</strong>ä¸»è¦åŒ…å«æ•°æ®å­˜å‚¨ã€ä¼šè¯æ¶ˆæ¯åŒæ­¥ã€ç™»å½•ç®¡ç†ç­‰é€»è¾‘ã€‚</p>
<p>ä¸»è¦è®¨è®ºç‚¹ï¼Œåœ¨äºä½¿ç”¨<code>C++</code>å±‚SDKè¿˜æ˜¯å„ç«¯å¹³å°SDKã€‚è¿™ä¸¤ç§æ–¹å¼å„æœ‰åˆ©å¼Šï¼Œæœ€ç»ˆåº”è¯¥ç»“åˆå„å›¢é˜Ÿçš„äººå‘˜åˆ†å¸ƒæƒ…å†µå†³å®šã€‚</p>
<ul>
<li>
<p><code>C++</code>å±‚SDKï¼Œå³å°†ä¸šåŠ¡ä¸‹æ²‰åˆ°<code>C++</code>å±‚ï¼Œå„ç«¯é€šè¿‡æ¥å£è°ƒç”¨ï¼Œå¦‚<code>Android</code>çš„<code>JNI</code>ç­‰</p>
</li>
<li>
<p>å„ç«¯å¹³å°SDKï¼Œå³å„ç«¯å°†ä¸šåŠ¡ä¸‹æ²‰åˆ°ä¸€ä¸ªSDKä¸­ï¼Œå¯ä»¥å¿«é€Ÿå¤ç”¨ï¼Œå¦‚<code>Android</code>çš„<code>aar</code>ï¼Œ<code>iOS</code>çš„<code>framework</code>ç­‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-10">2.1 C++å±‚SDK</h4>
<h5 data-id="heading-11">ä¼˜ç‚¹</h5>
<ol>
<li>
<p><code>C++</code>å±‚SDKæ¯”è¾ƒé€šç”¨ï¼Œå¯ä»¥è·¨å¹³å°ï¼Œä¸€æ¬¡å¼€å‘å¤šç«¯ä½¿ç”¨ï¼Œå¼€å‘æˆæœ¬ä¸Šä¼šæœ‰ä¸€å®šä¼˜åŠ¿ã€‚è€Œä¸”åœ¨èŠå¤©è®°å½•è¿ç§»ç­‰ä¸šåŠ¡ä¸Šï¼Œä¹Ÿæœ‰å®ç”¨ä»·å€¼ã€‚</p>
</li>
<li>
<p><code>C++</code>å±‚SDKæ€§èƒ½æ›´ä¼˜ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚</p>
</li>
</ol>
<h5 data-id="heading-12">ç¼ºç‚¹</h5>
<ol>
<li><strong>æ€§èƒ½æŸè€—</strong></li>
</ol>
<p>ä»¥<code>Android</code>å¹³å°ä¸ºä¾‹ï¼Œçº¯<code>JNI</code>è°ƒç”¨ä¹Ÿä¼šæœ‰é¢å¤–è€—æ—¶ã€‚</p>
<ul>
<li>
<p><strong>æ‰§è¡Œç¯å¢ƒçš„åˆ‡æ¢</strong>ï¼šå½“ä»<code>Java</code>ä»£ç è¿›å…¥æœ¬åœ°ï¼ˆ<code>C/C++</code>ï¼‰ä»£ç æ—¶ï¼Œ<code>Java</code>è™šæ‹Ÿæœºï¼ˆ<code>JVM</code>ï¼‰éœ€è¦æ‰§è¡Œä¸€ç³»åˆ—æ“ä½œæ¥åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚è¿™åŒ…æ‹¬ä¿å­˜å½“å‰<code>Java</code>çº¿ç¨‹çš„çŠ¶æ€ã€åˆ‡æ¢åˆ°æœ¬åœ°ä»£ç çš„æ‰§è¡Œç¯å¢ƒï¼Œç„¶ååœ¨è¿”å›æ—¶æ¢å¤çŠ¶æ€ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±æœ‰å›ºå®šçš„æ—¶é—´æˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®ç±»å‹çš„è½¬æ¢ä¸ç¼–ç»„</strong>ï¼š<code>Java</code>å’Œ<code>C/C++</code>ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹å’Œå†…å­˜æ¨¡å‹ã€‚å½“å‚æ•°å’Œè¿”å›å€¼åœ¨ä¸¤è€…é—´ä¼ é€’æ—¶ï¼Œ<code>JNI</code>éœ€è¦è¿›è¡Œè½¬æ¢ï¼ˆç¼–ç»„ï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>Java</code>çš„ <code>String</code>å¯¹è±¡éœ€è¦è½¬æ¢ä¸º<code>C</code>é£æ ¼çš„ <code>char*</code>æŒ‡é’ˆï¼Œæ•°ç»„ä¹Ÿéœ€è¦è¢«<code>JNI</code>å‡½æ•°å¤„ç†ï¼Œè¿™å¯èƒ½æ¶‰åŠæ•´ä¸ªæ•°æ®å—çš„å¤åˆ¶ã€‚</p>
</li>
<li>
<p><strong>JNIå‡½æ•°è°ƒç”¨æœ¬èº«çš„å¼€é”€</strong>ï¼šåœ¨æœ¬åœ°ä»£ç ä¸­ï¼Œæ¯æ¬¡é€šè¿‡ <code>JNIEnv*</code>æŒ‡é’ˆè°ƒç”¨å‡½æ•°ï¼ˆå¦‚ <code>GetFieldID</code>, <code>CallVoidMethod</code>ï¼‰éƒ½æ˜¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨ã€‚ä¸è™šæ‹Ÿæœºçš„äº¤äº’ä½¿å¾—<code>JIT</code>ç¼–è¯‘å™¨éš¾ä»¥å¯¹è¿™äº›è°ƒç”¨è¿›è¡Œå†…è”ç­‰ä¼˜åŒ–ã€‚</p>
</li>
</ul>
<ol start="2">
<li><strong>çº¿ç¨‹åˆ‡æ¢</strong></li>
</ol>
<p>ä»å¼€å‘è§„èŒƒä¸Šæ¥çœ‹ï¼Œæ‰€æœ‰çš„<code>JNI</code>è°ƒç”¨éƒ½è¦åœ¨å¼‚æ­¥çº¿ç¨‹ã€‚è¿™ä¼šå¯¼è‡´ä¸€äº›ç®€å•çš„è¿ç®—ä¹Ÿè¦åˆ‡æ¢çº¿ç¨‹ï¼Œå¯¼è‡´æ¸²æŸ“å»¶è¿Ÿã€‚ä»¥ä¼šè¯IDä¸ºä¾‹ï¼Œä¼šè¯ID=ä¼šè¯id_ä¼šè¯ç±»å‹ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ‹¼æ¥é€»è¾‘ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯åªæœ‰ä¼šè¯idï¼Œä¸šåŠ¡ä¸Šéœ€è¦è·å–å¯¹åº”çš„ä¼šè¯ç±»å‹ã€‚é‚£å°±å¿…é¡»è°ƒç”¨<code>C++</code>çš„åè§£æ–¹æ³•ï¼Œæ ¹æ®æ‹¼æ¥è§„åˆ™ï¼Œåè§£è·å–ä¼šè¯ç±»å‹ã€‚å½“ç„¶è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œå°±æ˜¯å„ç«¯å°†åè§£é€»è¾‘å†å®ç°ä¸€éï¼Œè¿™å°±èƒŒç¦»äº†é€šç”¨SDKçš„åˆè¡·ï¼Œè€Œä¸”è§„åˆ™æ˜¯éšä¸šåŠ¡å‘ç”Ÿå˜åŒ–çš„ï¼Œåç»­ä¼šè¯idè¿˜å¯èƒ½æ‹¼æ¥å…¶ä»–åç¼€ï¼Œæ¯ä¸€æ¬¡æ”¹åŠ¨éƒ½è¦å„ç«¯é€‚é…ã€‚</p>
<p>ä¼šè¯idçš„ä¾‹å­æ˜¯ä¸ºäº†è¯´æ˜ï¼Œå³ä½¿æ˜¯å¾ˆç®€å•çš„é€»è¾‘ï¼Œé€šè¿‡<code>JNI</code>è°ƒç”¨ä¹Ÿæœ‰çº¿ç¨‹åˆ‡æ¢çš„æŸè€—ã€‚</p>
<p>å½“ç„¶ï¼Œä¸Šè¿°é—®é¢˜ä¹Ÿæœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯å®šä¹‰ä¸¤ç±»<code>JNI</code>æ–¹æ³•ã€‚ä¸€ç§æ˜¯å¼‚æ­¥çº¿ç¨‹è°ƒç”¨çš„ï¼Œå‚æ•°å¯ä»¥æœ‰<code>json</code>æ ¼å¼æ•°æ®ï¼Œ<code>native</code>å¯ä»¥æœ‰è€—æ—¶æ“ä½œã€‚å¦ä¸€ç§æ˜¯åŒæ­¥è°ƒç”¨ï¼Œå‚æ•°åªèƒ½æœ‰åŸºæœ¬æ•°æ®ç±»å‹ï¼Œ<code>native</code>ä¹Ÿä¸èƒ½æœ‰è€—æ—¶æ“ä½œã€‚</p>
<ol start="3">
<li><strong>å†…å­˜å¢åŠ </strong></li>
</ol>
<p>åœ¨éƒ¨åˆ†ä¸šåŠ¡ä¸Šï¼Œä¸ºäº†è¾¾åˆ°å¿«é€Ÿè®¿é—®æ•ˆæœï¼Œé€šå¸¸ä¼šåšç¼“å­˜ã€‚æ¯”å¦‚æœ€è¿‘è¿›å…¥è¿‡çš„ä¼šè¯çš„æ¶ˆæ¯ï¼Œåšæ¶ˆæ¯ç¼“å­˜ï¼Œä¸‹æ¬¡è¿›å…¥å¯ä»¥å¿«é€Ÿæ˜¾ç¤ºï¼Œè€Œä¸éœ€è¦<code>loading</code>ã€‚<code>C++</code>å±‚SDKä¸€å®šä¼šåšæ¶ˆæ¯çš„ç¼“å­˜ã€‚ç«¯ä¸Šä¸ºäº†é¿å…çº¿ç¨‹åˆ‡æ¢+<code>JNI</code>è€—æ—¶åˆåšä¸€éï¼Œä¼šå¯¼è‡´å†…å­˜å¢åŠ ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œä»¥<code>Android</code>å¹³å°ä¸ºä¾‹ï¼Œè™½ç„¶ç³»ç»Ÿé™åˆ¶çš„æ˜¯å•ä¸ªåº”ç”¨<code>Java</code>å†…å­˜ä¸èƒ½è¶…è¿‡<code>512M</code>ï¼Œä½†æ˜¯å¯¹äºåº”ç”¨å ç”¨çš„æ•´ä½“å†…å­˜ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸èƒ½è¶…è¿‡<code>1.2G</code>ã€‚åŒæ—¶<code>Android</code>å¹³å°çš„<code>LowMemoryKiller</code>çš„æ¸…ç†è§„åˆ™ä¸­ï¼Œä¼šæ ¹æ®åº”ç”¨å ç”¨æ•´ä½“å†…å­˜è¿›è¡ŒåŠ æƒï¼Œæ•´ä½“å†…å­˜å ç”¨å¤šçš„æ›´å®¹æ˜“è¢«<code>LMK</code>æ€æ‰ã€‚æ‰€ä»¥ä¸è¦å¿½ç•¥<code>native</code>å†…å­˜å¸¦æ¥çš„å½±å“ã€‚</p>
<ol start="4">
<li><strong>å¹³å°ç‰¹æ€§ä¸¢å¤±</strong></li>
</ol>
<ul>
<li>
<p>åœ¨æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œçº¿ç¨‹æ²»ç†ä¹Ÿæ˜¯é‡è¦ä¸€ç¯ã€‚å½“å‰çš„çº¿ç¨‹æ²»ç†æ–¹æ¡ˆä¸­ï¼Œæ— è®ºæ˜¯å­—èŠ‚ç æ’æ¡©è¿˜æ˜¯å…¶ä»–æ–¹å¼ï¼Œéƒ½æ— æ³•åšåˆ°å¯¹<code>native</code>çº¿ç¨‹çš„æ²»ç†ã€‚</p>
</li>
<li>
<p><code>Android</code>å’Œ<code>iOS</code>å¹³å°çš„é¡µé¢åˆ‡æ¢ç­‰ç”Ÿå‘½å‘¨æœŸï¼Œéƒ½éœ€è¦é€šè¿‡<code>JNI</code>æ–¹æ³•å°†äº‹ä»¶é€šçŸ¥ç»™<code>native</code>ã€‚</p>
</li>
</ul>
<ol start="5">
<li><strong>å¼€å‘æ•ˆç‡å¯èƒ½é™ä½</strong></li>
</ol>
<ul>
<li>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>C++</code>å±‚SDKéƒ½æ˜¯æœ‰ä¸“é—¨çš„å›¢é˜Ÿçš„ï¼Œé‚£å„å¹³å°ä¸<code>C++</code>å±‚SDKçš„æ²Ÿé€šä¼šæœ‰æˆæœ¬ã€‚</p>
</li>
<li>
<p>åœ¨æ’æŸ¥é—®é¢˜æ—¶ï¼Œä¹Ÿéœ€è¦å®¢æˆ·ç«¯ä¸<code>C++</code>å±‚SDKçš„é…åˆã€‚</p>
</li>
<li>
<p>ä¸”<code>C++</code>å±‚SDKæ— æ³•æ–­ç‚¹ï¼Œä¸€äº›é—®é¢˜å®šä½åªèƒ½é€šè¿‡æ—¥å¿—æ’æŸ¥ã€‚</p>
</li>
</ul>
<h4 data-id="heading-13">2.2 å„ç«¯å¹³å°SDK</h4>
<h5 data-id="heading-14">ä¼˜ç‚¹</h5>
<p>å¯¹æ¯”<code>C++</code>å±‚çš„ç¼ºç‚¹ï¼Œå³ä¸ºå„ç«¯å¹³å°SDKçš„ä¼˜ç‚¹ã€‚</p>
<p>æ— <code>JNI</code>è°ƒç”¨æŸè€—ã€ç®€å•é€»è¾‘è¿ç®—æ— éœ€åˆ‡æ¢çº¿ç¨‹ã€ç¼“å­˜é€»è¾‘ä¸ä¼šé‡å¤å ç”¨å†…å­˜ã€å„ç§å®¢æˆ·ç«¯æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆéƒ½èƒ½ç”Ÿæ•ˆã€æ²Ÿé€šæ•ˆç‡é«˜ã€‚</p>
<h5 data-id="heading-15">ç¼ºç‚¹</h5>
<ol>
<li>
<p>å¼€å‘æˆæœ¬é«˜ï¼ŒåŒä¸€ä¸ªåŠŸèƒ½ï¼Œå›¢é˜Ÿæ•´ä½“å·¥æ—¶å¯èƒ½æ˜¯<code>C++</code>å±‚çš„3å€ï¼ˆ<code>Android</code>/<code>iOS</code>/å‰ç«¯ï¼‰</p>
</li>
<li>
<p>å„ç«¯æ•°æ®å­˜å‚¨ä¸ä¸€è‡´ï¼ŒèŠå¤©è®°å½•è¿ç§»ç­‰åŠŸèƒ½å¯èƒ½æ— æ³•å®ç°</p>
</li>
</ol>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>å…·ä½“é€‰æ‹©å“ªç§æ–¹å¼ï¼Œåº”è¯¥æ ¹æ®å„è‡ªä¸šåŠ¡å›¢é˜Ÿé£æ ¼é€‰æ‹©ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸šå†…çš„é€šç”¨æ–¹æ¡ˆæ˜¯é‡‡ç”¨<code>C++</code>å±‚SDKçš„æ–¹æ¡ˆã€‚å› ä¸ºäººåŠ›æˆæœ¬&gt;æŠ€æœ¯æˆæœ¬ã€‚</p>
<h2 data-id="heading-17">å‚è€ƒæ–‡ç« </h2>
<p><a href="https://juejin.cn/post/6844903609138692110" target="_blank" title="https://juejin.cn/post/6844903609138692110">èœé¸Ÿå­¦ç½‘ç»œä¹‹ â€”â€” é•¿è¿æ¥å’ŒçŸ­è¿æ¥</a></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-4874-1-1.html" target="_blank" title="http://www.52im.net/thread-4874-1-1.html" ref="nofollow noopener noreferrer">è½¬è½¬å®¢æœIMèŠå¤©ç³»ç»ŸèƒŒåçš„æŠ€æœ¯æŒ‘æˆ˜å’Œå®è·µåˆ†äº«-IMå¼€å‘/ä¸“é¡¹æŠ€æœ¯åŒº - å³æ—¶é€šè®¯å¼€å‘è€…ç¤¾åŒº!</a></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-3780-1-1.html" target="_blank" title="http://www.52im.net/thread-3780-1-1.html" ref="nofollow noopener noreferrer">æ¢æ¢çš„IMé•¿è¿æ¥æŠ€æœ¯å®è·µï¼šæŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–-IMå¼€å‘/ä¸“é¡¹æŠ€æœ¯åŒº - å³æ—¶é€šè®¯å¼€å‘è€…ç¤¾åŒº!</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9DJxipJaaBC8yC-buHgnTQ" target="_blank" title="https://mp.weixin.qq.com/s/9DJxipJaaBC8yC-buHgnTQ" ref="nofollow noopener noreferrer">å¾®ä¿¡ç»ˆç«¯è·¨å¹³å°ç»„ä»¶ mars ç³»åˆ—(äºŒ) - ä¿¡ä»¤ä¼ è¾“è¶…æ—¶è®¾è®¡</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.dreamtobe.cn%2Fmars%2F" target="_blank" title="https://blog.dreamtobe.cn/mars/" ref="nofollow noopener noreferrer">å¾®ä¿¡Marsç­–ç•¥åˆ†æ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠ¨æ€ä»£ç†æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7572012699626831899</link>    <guid>https://juejin.cn/post/7572012699626831899</guid>    <pubDate>2025-11-13T07:42:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572012699626831899" data-draft-id="7571892340878311462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠ¨æ€ä»£ç†æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:42:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jony_"/> <meta itemprop="url" content="https://juejin.cn/user/3403743732709767"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠ¨æ€ä»£ç†æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743732709767/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jony_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:42:53.000Z" title="Thu Nov 13 2025 07:42:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚è¿°</h2>
<p>åŒºåˆ«äºé™æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†æä¾›äº†ä¸€ç§æ‰‹æ®µï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ç”Ÿæˆä»£ç†ç±»ï¼Œå¹¶é’ˆå¯¹ä»£ç†å¯¹è±¡ç»Ÿä¸€å¤„ç†ã€‚æ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½æ”¶æ•›åˆ°äº† InvocationHandler.invoke ä¸­ï¼Œé¿å…äº†ä¸šåŠ¡é€»è¾‘è¿‡äºå†—ä½™ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç†ç±»</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">newProxyInstance</span><span class="hljs-params">(ClassLoader loader,
                                      Class&lt;?&gt;[] interfaces,
                                      InvocationHandler h)</span>
        <span class="hljs-keyword">throws</span> IllegalArgumentException {
    Objects.requireNonNull(h);
    
    <span class="hljs-keyword">final</span> Class&lt;?&gt;[] intfs = interfaces.clone();
    <span class="hljs-comment">// 1. ç”Ÿæˆå¸¦ä»£ç†ç±»</span>
    Class&lt;?&gt; cl = getProxyClass0(loader, intfs);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">final</span> Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams);
        <span class="hljs-keyword">final</span> <span class="hljs-type">InvocationHandler</span> <span class="hljs-variable">ih</span> <span class="hljs-operator">=</span> h;
        <span class="hljs-comment">// 2. ä¿®æ”¹è®¿é—®æ ‡è®°ç¬¦</span>
        <span class="hljs-keyword">if</span> (!Modifier.isPublic(cl.getModifiers())) cons.setAccessible(<span class="hljs-literal">true</span>);
        <span class="hljs-comment">// 3. åå°„åˆ›å»ºå¯¹è±¡</span>
        <span class="hljs-keyword">return</span> cons.newInstance(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{h});
    } <span class="hljs-keyword">catch</span> (IllegalAccessException | InstantiationException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternalError</span>(e.toString(), e);
    } <span class="hljs-keyword">catch</span> (InvocationTargetException e) {
        <span class="hljs-type">Throwable</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> e.getCause();
        <span class="hljs-keyword">if</span> (t <span class="hljs-keyword">instanceof</span> RuntimeException) {
            <span class="hljs-keyword">throw</span> (RuntimeException) t;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternalError</span>(t.toString(), t);
        }
    } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternalError</span>(e.toString(), e);
    }
}
</code></pre>
<p>ç”Ÿæˆä»£ç†ç±»çš„æºä»£ç å¦‚ä¸Šï¼Œä»£ç†ç±»ä¸»è¦æ˜¯é€šè¿‡ getProxyClass0 æ¥ç”Ÿæˆçš„ã€‚è€Œ getProxyClass0 åœ¨é¦–æ¬¡åŠ è½½çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯é€šè¿‡ ProxyClassFactory æ¥å®Œæˆçš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Class&lt;?&gt; getProxyClass0(ClassLoader loader,
                                       Class&lt;?&gt;... interfaces) {
    <span class="hljs-keyword">if</span> (interfaces.length &gt; <span class="hljs-number">65535</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"interface limit exceeded"</span>);
    }
    <span class="hljs-comment">// 1. é¦–æ¬¡è¿™é‡Œå–åˆ°çš„è‚¯å®šæ˜¯ null å¯¹è±¡ï¼Œç„¶åäº¤ç»™äº† ProxyClassFactory å¤„ç†</span>
    <span class="hljs-keyword">return</span> proxyClassCache.get(loader, interfaces);
}
</code></pre>
<p>ProxyClassFactory çš„ç”Ÿæˆä»£ç†ç±»æºç å¦‚ä¸‹ ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Class&lt;?&gt; apply(ClassLoader loader, Class&lt;?&gt;[] interfaces) {


    Map&lt;Class&lt;?&gt;, Boolean&gt; interfaceSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdentityHashMap</span>&lt;&gt;(interfaces.length);
    
    <span class="hljs-comment">// 1ã€ä»£ç†å¯¹è±¡æ¥å£è¿›è¡Œæ ¡éªŒ</span>
    <span class="hljs-keyword">for</span> (Class&lt;?&gt; intf : interfaces) {
        Class&lt;?&gt; interfaceClass = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            interfaceClass = Class.forName(intf.getName(), <span class="hljs-literal">false</span>, loader);
        } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
        }
        <span class="hljs-keyword">if</span> (interfaceClass != intf) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                    intf + <span class="hljs-string">" is not visible from class loader"</span>);
        }
        <span class="hljs-keyword">if</span> (!interfaceClass.isInterface()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                    interfaceClass.getName() + <span class="hljs-string">" is not an interface"</span>);
        }
        <span class="hljs-keyword">if</span> (interfaceSet.put(interfaceClass, Boolean.TRUE) != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                    <span class="hljs-string">"repeated interface: "</span> + interfaceClass.getName());
        }
    }
    <span class="hljs-type">String</span> <span class="hljs-variable">proxyPkg</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;     <span class="hljs-comment">// package to define proxy class in</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">accessFlags</span> <span class="hljs-operator">=</span> Modifier.PUBLIC | Modifier.FINAL;
    <span class="hljs-comment">// 2. ä»£ç†å¯¹è±¡åŒ…åè¿›è¡Œæ ¡éªŒ</span>
    <span class="hljs-keyword">for</span> (Class&lt;?&gt; intf : interfaces) {
        <span class="hljs-type">int</span> <span class="hljs-variable">flags</span> <span class="hljs-operator">=</span> intf.getModifiers();
        <span class="hljs-keyword">if</span> (!Modifier.isPublic(flags)) {
            accessFlags = Modifier.FINAL;
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> intf.getName();
            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> name.lastIndexOf(<span class="hljs-string">'.'</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">pkg</span> <span class="hljs-operator">=</span> ((n == -<span class="hljs-number">1</span>) ? <span class="hljs-string">""</span> : name.substring(<span class="hljs-number">0</span>, n + <span class="hljs-number">1</span>));
            <span class="hljs-keyword">if</span> (proxyPkg == <span class="hljs-literal">null</span>) {
                proxyPkg = pkg;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!pkg.equals(proxyPkg)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                        <span class="hljs-string">"non-public interfaces from different packages"</span>);
            }
        }
    }
    {
        <span class="hljs-comment">// 3. ç”Ÿæˆä»£ç†å¯¹è±¡</span>
        List&lt;Method&gt; methods = getMethods(interfaces);
        Collections.sort(methods, ORDER_BY_SIGNATURE_AND_SUBTYPE);
        validateReturnTypes(methods);
        List&lt;Class&lt;?&gt;[]&gt; exceptions = deduplicateAndGetExceptions(methods);


        Method[] methodsArray = methods.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Method</span>[methods.size()]);
        Class&lt;?&gt;[][] exceptionsArray = exceptions.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>&lt;?&gt;[exceptions.size()][]);
        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> nextUniqueNumber.getAndIncrement();
        <span class="hljs-type">String</span> <span class="hljs-variable">proxyName</span> <span class="hljs-operator">=</span> proxyPkg + proxyClassNamePrefix + num;
        <span class="hljs-keyword">return</span> generateProxy(proxyName, interfaces, loader, methodsArray,
                exceptionsArray);
    }
}
</code></pre>
<p>ç”Ÿæˆä»£ç†ä¸»è¦ç»å†äº†å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>ä»£ç†å¯¹è±¡æ ¡éªŒ
<ul>
<li>å½“å‰çš„ç±»åŠ è½½å™¨èƒ½å¤ŸåŠ è½½</li>
<li>ä»£ç†å¯¹è±¡å¿…é¡»æ˜¯æ¥å£</li>
<li>åŒç±»å‹æ¥å£ä¸èƒ½è¢«å¤šæ¬¡ä»£ç†</li>
</ul>
</li>
<li>ä»£ç†å¯¹è±¡è·¯å¾„æ ¡éªŒï¼Œå¿…é¡»æ˜¯ç›¸åŒçš„åŒ…å</li>
<li>ç”Ÿæˆä»£ç†å¯¹è±¡
<ul>
<li>é€’å½’è·å–ä»£ç†å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ ¹æ®æ¥å£ç­¾åå’Œå­ç±»å‹è¿›è¡Œæ’åº</li>
<li>è·å–ä»£ç†æ–¹æ³•çš„æ‰€æœ‰çš„å¼‚å¸¸</li>
<li>è°ƒç”¨ Native æ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡ï¼šåŒ…å + $Proxy + number</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å›½é™…åŒ–å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571837786251493422</link>    <guid>https://juejin.cn/post/7571837786251493422</guid>    <pubDate>2025-11-13T07:44:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571837786251493422" data-draft-id="7571840220704178222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Flutter å›½é™…åŒ–å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-11-13T07:44:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸…å‡‰å¤æ—¥"/> <meta itemprop="url" content="https://juejin.cn/user/3378174574203678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Flutter å›½é™…åŒ–å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3378174574203678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸…å‡‰å¤æ—¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:44:15.000Z" title="Thu Nov 13 2025 07:44:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter å›½é™…åŒ–å®Œæ•´æŒ‡å—ï¼šä½¿ç”¨ VS Code Flutter Intl æ’ä»¶å¿«é€Ÿå®ç°å¤šè¯­è¨€</h2>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•åœ¨ Flutter é¡¹ç›®ä¸­å¿«é€Ÿå®ç°å›½é™…åŒ–ï¼Œä½¿ç”¨ VS Code çš„ <strong>Flutter Intl</strong> æ’ä»¶ç®€åŒ–å¤šè¯­è¨€é…ç½®æµç¨‹ã€‚</p>
<h3 data-id="heading-1">ğŸš€ å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-2">æ­¥éª¤ 1ï¼šåˆ›å»º Flutter é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash">flutter create intl_demo
<span class="hljs-built_in">cd</span> intl_demo
</code></pre>
<h4 data-id="heading-3">æ­¥éª¤ 2ï¼šé…ç½® pubspec.yaml</h4>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">flutter_localizations:</span>    <span class="hljs-comment"># æ·»åŠ  Flutter æœ¬åœ°åŒ–æ”¯æŒ</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">intl:</span> <span class="hljs-string">^0.18.1</span>            <span class="hljs-comment"># æ·»åŠ  intl åŒ…</span>

<span class="hljs-attr">dev_dependencies:</span>
  <span class="hljs-attr">flutter_test:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
</code></pre>
<p>ä¿å­˜åè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤ 3ï¼šå®‰è£… VS Code æ’ä»¶</h4>
<p>åœ¨ VS Code æ‰©å±•å•†åº—ä¸­æœç´¢å¹¶å®‰è£… <strong>Flutter Intl</strong> æ’ä»¶ã€‚</p>
<h4 data-id="heading-5">æ­¥éª¤ 4ï¼šåˆå§‹åŒ–å›½é™…åŒ–</h4>
<ol>
<li>æŒ‰ä¸‹ <code>Shift + Ctrl + P</code> (Windows) æˆ– <code>Shift + Cmd + P</code> (Mac)</li>
<li>è¾“å…¥ <code>Flutter Intl: Initialize</code> å¹¶æ‰§è¡Œ</li>
<li>æ·»åŠ æ›´å¤šè¯­è¨€
æŒ‰ä¸‹ <code>Shift + Ctrl + P</code>ï¼Œè¾“å…¥ <code>Flutter Intl: Add locale</code>ï¼Œç„¶åè¾“å…¥è¯­è¨€ä»£ç ï¼ˆå¦‚ <code>zh</code> æ·»åŠ ä¸­æ–‡ï¼‰ã€‚
è¿™ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹ç›®å½•ç»“æ„ï¼š</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">lib/
â”œâ”€â”€ l10n/
â”‚   â”œâ”€â”€ intl_en.arb        <span class="hljs-comment"># è‹±æ–‡ç¿»è¯‘æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ intl_zh.arb        <span class="hljs-comment"># ä¸­æ–‡ç¿»è¯‘æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ messages_all.dart
â”‚   â””â”€â”€ ...
â””â”€â”€ generated/
    â””â”€â”€ l10n.dart          <span class="hljs-comment"># è‡ªåŠ¨ç”Ÿæˆçš„æœ¬åœ°åŒ–ç±»</span>
</code></pre>
<h3 data-id="heading-6">âš™ï¸ é…ç½® MaterialApp</h3>
<p>åœ¨ <code>main.dart</code> ä¸­é…ç½®æœ¬åœ°åŒ–æ”¯æŒï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_localizations/flutter_localizations.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'generated/l10n.dart'</span>;  <span class="hljs-comment">// å¼•å…¥ç”Ÿæˆçš„æœ¬åœ°åŒ–ç±»</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">'Flutter Demo'</span>,
      <span class="hljs-comment">// é…ç½®æœ¬åœ°åŒ–ä»£ç†</span>
      localizationsDelegates: <span class="hljs-keyword">const</span> [
        S.delegate,  <span class="hljs-comment">// ç”Ÿæˆçš„æœ¬åœ°åŒ–ä»£ç†</span>
        GlobalMaterialLocalizations.delegate,  <span class="hljs-comment">// Material ç»„ä»¶æœ¬åœ°åŒ–</span>
        GlobalWidgetsLocalizations.delegate,   <span class="hljs-comment">// åŸºç¡€ Widget æœ¬åœ°åŒ–</span>
        GlobalCupertinoLocalizations.delegate, <span class="hljs-comment">// Cupertino ç»„ä»¶æœ¬åœ°åŒ–</span>
      ],
      <span class="hljs-comment">// æ”¯æŒçš„è¯­è¨€åˆ—è¡¨</span>
      supportedLocales: S.delegate.supportedLocales,
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: <span class="hljs-keyword">const</span> MyHomePage(),
    );
  }
}
</code></pre>
<h3 data-id="heading-7">ğŸ“ ç®¡ç†ç¿»è¯‘æ–‡ä»¶</h3>
<h4 data-id="heading-8">ç¼–è¾‘ ARB æ–‡ä»¶</h4>
<p>åœ¨ <code>lib/l10n/</code> ç›®å½•ä¸‹ç¼–è¾‘å¯¹åº”çš„è¯­è¨€æ–‡ä»¶ï¼š</p>
<p><strong>intl_en.arb (è‹±æ–‡)</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"helloWorld"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello World!"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"welcome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Welcome {name}!"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Settings"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"language"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Language"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"@welcome"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Welcome message with name parameter"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"placeholders"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>intl_zh.arb (ä¸­æ–‡)</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"helloWorld"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ å¥½ä¸–ç•Œï¼"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"welcome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ¬¢è¿ {name}ï¼"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è®¾ç½®"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"language"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯­è¨€"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">ğŸ’¡ åœ¨ä»£ç ä¸­ä½¿ç”¨</h3>
<h4 data-id="heading-10">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'generated/l10n.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(
        title: Text(S.of(context).helloWorld),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(S.of(context).welcome(<span class="hljs-string">'Flutter'</span>)), <span class="hljs-comment">// å¸¦å‚æ•°çš„ç¿»è¯‘</span>
            Text(S.of(context).settings),
          ],
        ),
      ),
    );
  }
}
</code></pre>
<h4 data-id="heading-11">åŠ¨æ€è¯­è¨€åˆ‡æ¢</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LanguageSwitcher</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> LanguageSwitcher({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> DropdownButton&lt;Locale&gt;(
      value: Localizations.localeOf(context),
      items: [
        DropdownMenuItem(
          value: <span class="hljs-keyword">const</span> Locale(<span class="hljs-string">'en'</span>),
          child: Text(S.of(context).english),
        ),
        DropdownMenuItem(
          value: <span class="hljs-keyword">const</span> Locale(<span class="hljs-string">'zh'</span>),
          child: Text(S.of(context).chinese),
        ),
      ],
      onChanged: (Locale? newLocale) {
        <span class="hljs-keyword">if</span> (newLocale != <span class="hljs-keyword">null</span>) {
          <span class="hljs-comment">// ä½¿ç”¨ GetX æˆ– Provider ç­‰çŠ¶æ€ç®¡ç†æ¥åˆ‡æ¢è¯­è¨€</span>
          <span class="hljs-comment">// æˆ–è€…é‡å»º MaterialApp æ—¶ä¼ å…¥æ–°çš„ locale</span>
        }
      },
    );
  }
}
</code></pre>
<h3 data-id="heading-12">ğŸ¯ é«˜çº§åŠŸèƒ½</h3>
<h4 data-id="heading-13">å¤æ•°å¤„ç†</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"itemCount"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{count,plural, =0{No items}=1{One item}other{{count} items}}"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Text(S.of(context).itemCount(<span class="hljs-number">5</span>)) <span class="hljs-comment">// æ˜¾ç¤º "5 items"</span>
</code></pre>
<h3 data-id="heading-14">ğŸ“± åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¿«æ·æ“ä½œæ–¹æ³•</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0206523e4e9545458ef44b061096b1a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF5YeJ5aSP5pel:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624797&amp;x-signature=eF7qkgesMh0z%2BC6xuRG4GEgR9D4%3D" alt="QQ20251113-15315.gif" loading="lazy"/></p>
<p>é€šè¿‡è¿™ä¸ªå®Œæ•´çš„æŒ‡å—ï¼Œä½ å¯ä»¥å¿«é€Ÿåœ¨ Flutter é¡¹ç›®ä¸­å®ç°å›½é™…åŒ–æ”¯æŒï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„å¤šè¯­è¨€ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åä¸ºå°ç±³éƒ½åœ¨å¸ƒå±€çš„å¤šå±ååŒï¼Œå…¶å®Androidæ—©å°±æœ‰äº†ï¼åªæ˜¯ä½ ä¸çŸ¥é“...]]></title>    <link>https://juejin.cn/post/7571837786251509806</link>    <guid>https://juejin.cn/post/7571837786251509806</guid>    <pubDate>2025-11-13T07:47:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571837786251509806" data-draft-id="7572012699626848283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åä¸ºå°ç±³éƒ½åœ¨å¸ƒå±€çš„å¤šå±ååŒï¼Œå…¶å®Androidæ—©å°±æœ‰äº†ï¼åªæ˜¯ä½ ä¸çŸ¥é“..."/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-11-13T07:47:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åä¸ºå°ç±³éƒ½åœ¨å¸ƒå±€çš„å¤šå±ååŒï¼Œå…¶å®Androidæ—©å°±æœ‰äº†ï¼åªæ˜¯ä½ ä¸çŸ¥é“...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:47:03.000Z" title="Thu Nov 13 2025 07:47:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å“ˆå–½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>åŒ11å¯èƒ½ä¸å°‘æœ‹å‹åœ¨ç½®åŠæ‰‹æœºã€ç¬”è®°æœ¬ã€‚</p>
<p>å¦‚æœä½ æ˜¯å†²ç€å¤šè®¾å¤‡ååŒåŠå…¬å»çš„ï¼Œå…ˆåˆ«æ€¥ç€ä¸‹å•ï¼Œè€åˆ˜ç»™ä½ æ¨èä¸€æ¬¾æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„å¼€æºå·¥å…·ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ»¡è¶³ä½ å¤šè®¾å¤‡ååŒçš„éœ€æ±‚ã€‚</p>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•ç”¨scrcpyè§£é”æ‰‹æœºçš„éšè—æŠ€èƒ½ï¼Œå½»åº•æ”¹å˜ä½ çš„å·¥ä½œå’Œå¨±ä¹æ–¹å¼ï¼</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆè¯´æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Œæœ€åå†ä»‹ç»å…¶èƒŒåçš„åŸç†ã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-1">1. å‡†å¤‡å·¥ä½œ</h3>
<ul>
<li>
<p>ä¸‹è½½å¹¶å®‰è£…scrcpy 3.0ä»¥ä¸Šç‰ˆæœ¬ã€‚</p>
<p>ä¸‹è½½å®Œæˆåï¼Œæ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„å®‰è£…æ–¹å¼ï¼š</p>
<ul>
<li>
<p><strong>Windows</strong>ï¼šç›´æ¥è§£å‹å³å¯ä½¿ç”¨ã€‚
ä½ å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°scrcpyçš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGenymobile%2Fscrcpy%2Freleases%2Ftag%2Fv3.3.3" target="_blank" title="https://github.com/Genymobile/scrcpy/releases/tag/v3.3.3" ref="nofollow noopener noreferrer">github.com/Genymobile/â€¦</a></p>
</li>
<li>
<p><strong>Mac</strong>ï¼šä½¿ç”¨Homebrewå®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">brew install scrcpy
</code></pre>
</li>
<li>
<p><strong>Linux</strong>ï¼šé€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…ï¼Œä¾‹å¦‚Ubuntuç”¨æˆ·å¯ä»¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt install scrcpy
</code></pre>
</li>
</ul>
</li>
<li>
<p>ç¡®ä¿æ‰‹æœºå’Œç”µè„‘é€šè¿‡USBè¿æ¥ï¼Œå¹¶å¼€å¯å¼€å‘è€…æ¨¡å¼ã€‚</p>
<p>å¼€å¯å¼€å‘è€…æ¨¡å¼çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ‰“å¼€æ‰‹æœºçš„"è®¾ç½®"ã€‚</li>
<li>æ‰¾åˆ°"å…³äºæ‰‹æœº"æˆ–"å…³äºè®¾å¤‡"ã€‚</li>
<li>è¿ç»­ç‚¹å‡»"ç‰ˆæœ¬å·"7æ¬¡ï¼Œç›´åˆ°æç¤º"æ‚¨å·²è¿›å…¥å¼€å‘è€…æ¨¡å¼"ã€‚</li>
<li>è¿”å›è®¾ç½®ï¼Œè¿›å…¥"å¼€å‘è€…é€‰é¡¹"ã€‚</li>
<li>å¯ç”¨"USBè°ƒè¯•"ã€‚</li>
</ol>
<p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œç”¨æ•°æ®çº¿å°†æ‰‹æœºè¿æ¥åˆ°ç”µè„‘ï¼Œç¡®ä¿è¿æ¥ç¨³å®šã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. å®ç°å±å¹•é•œåƒ</h3>
<p>å®Œæˆå‡†å¤‡å·¥ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½“éªŒscrcpyçš„åŸºç¡€åŠŸèƒ½â€”â€”å±å¹•é•œåƒã€‚</p>
<p>åªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">scrcpy
</code></pre>
<p>æ‰‹æœºå±å¹•å°±ä¼šå®æ—¶æŠ•å°„åˆ°ç”µè„‘ä¸Šã€‚</p>
<p>ä½ å¯ä»¥ç›´æ¥ç”¨é¼ æ ‡å’Œé”®ç›˜æ“ä½œæ‰‹æœºï¼Œå°±åƒæ“ä½œç”µè„‘ä¸Šçš„åº”ç”¨ä¸€æ ·ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>åœ¨ç”µè„‘ä¸Šå›å¤æ‰‹æœºæ¶ˆæ¯ï¼Œæ‰“å­—é€Ÿåº¦æ›´å¿«ã€‚</li>
<li>ç”¨å¤§å±å¹•æŸ¥çœ‹æ‰‹æœºä¸Šçš„å›¾ç‰‡æˆ–æ–‡æ¡£ï¼Œç»†èŠ‚æ›´æ¸…æ™°ã€‚</li>
</ul>
<p>æ›´é‡è¦çš„äº‹æ˜¯ï¼Œè¿™ä¸€åˆ‡éƒ½éå¸¸æµç•…ï¼Œå‡ ä¹æ²¡æœ‰å»¶è¿Ÿã€‚</p>
<p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨scrcpyï¼Œå¯èƒ½ä¼šæƒŠå¹äºå®ƒçš„æµç•…åº¦å’Œé«˜æ•ˆæ€§ã€‚</p>
<p>å¦‚æœåœ¨å±å¹•é•œåƒçš„æ—¶å€™å¸Œæœ›æ‰‹æœºæœ¬èº«çš„å±å¹•æ˜¯å…³é—­çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">scrcpy --turn-screen-off
</code></pre>
<p>æ€»ç»“æ¥è¯´ï¼Œå±å¹•é•œåƒæ˜¯scrcpyæœ€åŸºç¡€ä½†éå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå€¼å¾—ä¸€è¯•ï¼</p>
<h3 data-id="heading-3">3. å¤šè®¾å¤‡ååŒæ“ä½œ</h3>
<p>å¦‚æœä½ è§‰å¾—å±å¹•é•œåƒå·²ç»å¤Ÿå¼ºå¤§äº†ï¼Œé‚£æ¥ä¸‹æ¥çš„åŠŸèƒ½ä¼šè®©ä½ æ›´åŠ æƒŠå–œã€‚</p>
<p>scrcpyæ”¯æŒé€šè¿‡<code>--new-display</code>å‚æ•°ï¼Œä¸ºæ‰‹æœºåˆ›å»ºå¤šä¸ªè™šæ‹Ÿæ˜¾ç¤ºçª—å£ã€‚</p>
<p>æ¯ä¸ªçª—å£éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œä¸€ä¸ªåº”ç”¨ï¼ŒçœŸæ­£å®ç°å¤šä»»åŠ¡ååŒæ“ä½œã€‚</p>
<p>ä¸‹é¢åˆ—ä¸¾å‡ ç§è€åˆ˜è‡ªå·±å¸¸ç”¨çš„å¤šçª—å£æ“ä½œåœºæ™¯ï¼š</p>
<ul>
<li>
<p>åœ¨ä¸€ä¸ªçª—å£ä¸­æ‰“å¼€é˜…è¯»åº”ç”¨ï¼ŒåŒæ—¶åœ¨å¦ä¸€ä¸ªçª—å£ä¸­æ‰“å¼€èŠå¤©åº”ç”¨ã€‚
è¿™æ ·ä½ å¯ä»¥ä¸€è¾¹é˜…è¯»ï¼Œä¸€è¾¹å›å¤æ¶ˆæ¯ï¼Œæ•ˆç‡ç›´æ¥æ‹‰æ»¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">scrcpy --new-display --start-app=com.tencent.weread --window-title=<span class="hljs-string">"å¾®ä¿¡è¯»ä¹¦"</span> 

scrcpy --new-display --keyboard=uhid  --display-ime-policy=<span class="hljs-built_in">local</span> --start-app=com.tencent.mm --window-title=<span class="hljs-string">"å¾®ä¿¡"</span> 
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>--new-display</code>ï¼šä¸ºæ‰‹æœºåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿæ˜¾ç¤ºçª—å£ã€‚</li>
<li><code>--start-app</code>ï¼šæŒ‡å®šè¦åœ¨çª—å£ä¸­è¿è¡Œçš„åº”ç”¨åŒ…åã€‚</li>
<li><code>--window-title</code>ï¼šä¸ºçª—å£æŒ‡å®šä¸€ä¸ªæ ‡é¢˜ï¼Œæ–¹ä¾¿è¯†åˆ«ã€‚</li>
<li><code>--keyboard=uhid</code>ï¼šå¯ç”¨ç‰©ç†é”®ç›˜è¾“å…¥ï¼Œé¿å…åœ¨çª—å£ä¸­è¾“å…¥æ—¶è¢«é®æŒ¡ã€‚</li>
<li><code>--display-ime-policy=local</code>ï¼šå°†è¾“å…¥æ³•è®¾ç½®ä¸ºæœ¬åœ°è¾“å…¥æ³•ï¼Œé¿å…åœ¨çª—å£ä¸­è¾“å…¥æ—¶è¢«é®æŒ¡ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72544ae342864802811cec6b10b906ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624823&amp;x-signature=Bpbr51Xx%2F7sKEWW1ZVGqBNi38qc%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œå¯ä»¥é€šè¿‡<code>--new-display</code>å‚æ•°ä¸ºåº”ç”¨æŒ‡å®šä¸åŒçš„åˆ†è¾¨ç‡å’Œåˆ·æ–°ç‡ï¼Œæ–¹ä¾¿è°ƒè¯•åº”ç”¨åœ¨ä¸åŒå±å¹•ä¸Šçš„é€‚é…æƒ…å†µã€‚</p>
<pre><code class="hljs language-bash" lang="bash">scrcpy --new-display --start-app=com.example.flutter_test_1 --window-title=<span class="hljs-string">"åŸå§‹åˆ†è¾¨ç‡"</span> 
</code></pre>
<p><code>--new-display</code>å‚æ•°é»˜è®¤ä½¿ç”¨æ‰‹æœºæœ¬èº«çš„åˆ†è¾¨ç‡åˆ›å»ºè™šæ‹Ÿæ˜¾ç¤ºçª—å£ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3145b6c42244773a90782d2f83d7cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624823&amp;x-signature=CPVonfBVxAbHWTqJnjn1RfFfc3E%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">```bash
scrcpy --<span class="hljs-keyword">new</span>-display=<span class="hljs-number">1080</span>x1080 --start-app=com.example.flutter_test_1 --window-title=<span class="hljs-string">"ç‰¹æ®Šåˆ†è¾¨ç‡"</span> 
```

é€šè¿‡`--<span class="hljs-keyword">new</span>-display=<span class="hljs-number">1080</span>x1080`å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºåº”ç”¨åˆ›å»ºä¸€ä¸ª<span class="hljs-number">1080</span>x1080çš„è™šæ‹Ÿæ˜¾ç¤ºçª—å£ã€‚

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f98eae083844ff19ff4bb23e7bd8b40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624823&amp;x-signature=R0Ic1dm2twVF9yffneq5rkSIod8%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚è€åˆ˜è¿™è¾¹ä¹Ÿç»å¸¸ä¼šç”¨è¿™ç§æ–¹å¼ç»™è¿è¥å±•ç¤ºäº§å“æµ·æŠ¥åœ¨ä¸åŒæ‰‹æœºä¸Šçš„æ˜¾ç¤ºæ•ˆæœã€‚</p>
<ul>
<li>
<p>çœ‹çŸ­å‰§æ—¶ï¼Œå°†çª—å£è°ƒæ•´ä¸ºé€‚åˆè§†é¢‘æ¯”ä¾‹çš„å®½é«˜æ¯”ï¼Œé¿å…ç”»é¢è¢«è£å‰ªã€‚
ä¸çŸ¥é“å¤§å®¶å‘ç°æ²¡æœ‰ï¼Œæœ€è¿‘å¾ˆç«çš„çŸ­å‰§ï¼Œåœ¨æ‰‹æœºç«¯å’Œipadä¸Šéƒ½ä¼šè¢«è£å‰ªï¼Œæ‰‹æœºç«¯ä¸€èˆ¬æ˜¯è£å‰ªä¸¤è¾¹ï¼Œè€Œipadç«¯æ˜¯è£å‰ªä¸Šä¸‹éƒ¨åˆ†ã€‚</p>
<p>è¿™ä¸¤ç§æ–¹å¼è£å‰ªéƒ½æœ‰å¯èƒ½å¯¼è‡´ç”»é¢å†…å®¹è¢«è£æ‰ä¸€éƒ¨åˆ†ã€‚</p>
<p>åŸå› æ˜¯çŸ­å‰§çš„è§†é¢‘æ¯”ä¾‹ä¸€èˆ¬æ˜¯9:16ï¼Œè€Œæ‰‹æœºç«¯å¸¸è§çš„åˆ†è¾¨ç‡æ˜¯1080x2400å·¦å³ï¼Œipadå¸¸è§çš„åˆ†è¾¨ç‡æ˜¯3:4å·¦å³ã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>--new-display=1080x1920</code>å‚æ•°ï¼Œä¸ºåº”ç”¨åˆ›å»ºä¸€ä¸ª1080x1920çš„è™šæ‹Ÿæ˜¾ç¤ºçª—å£ï¼Œä¿è¯è§†é¢‘çš„ç”»é¢å®Œæ•´æ˜¾ç¤ºã€‚</p>
<p>è¿™é‡Œç”¨ç•ªèŒ„è¯»ä¹¦ä¸­çš„çŸ­å‰§ä½œä¸ºå±•ç¤º:</p>
<pre><code class="hljs language-bash" lang="bash">scrcpy --new-display=1080x2000 --start-app=com.dragon.read --window-title=<span class="hljs-string">"çŸ­å‰§"</span> 
</code></pre>
<p>è¿™é‡Œ1080x2000åˆ†è¾¨ç‡å¤šå‡ºæ¥çš„éƒ¨åˆ†æ˜¯åº•éƒ¨é€‰é›†çš„åŒºåŸŸï¼Œä¸ä¼šå½±å“è§†é¢‘çš„æ˜¾ç¤ºã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9222c372aa74481b402cb44a77c2d6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763624823&amp;x-signature=t9yFDvfvwZayByRlGfkqDq17SWc%3D" alt="" loading="lazy"/></p>
<p>æ€ä¹ˆæ ·ï¼Œæ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯å¨±ä¹ï¼Œå¤šè®¾å¤‡ååŒæ“ä½œéƒ½èƒ½è®©ä½ çš„ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ï¼</p>
<p>æƒ³è±¡ä¸€ä¸‹ä½ å¯ä»¥æ‰“å¼€å¤šä¸ªä¸åŒåˆ†è¾¨ç‡çš„åº”ç”¨åŒæ—¶æ“ä½œï¼Œæ˜¯ä¸æ˜¯å’Œç›´æ¥æ“ä½œç”µè„‘ä¸€æ ·æ–¹ä¾¿ï¼Ÿ</p>
<p>æ˜¯ä¸æ˜¯æ¯”ä¸å°‘å‚å•†çš„å¤šè®¾å¤‡ååŒæ“ä½œåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Ÿ</p>
<p>å…¶å®ä¸å°‘å‚å•†çš„å¤šè®¾å¤‡ååŒåŠŸèƒ½å’Œscrcpyä½¿ç”¨çš„æ˜¯ç›¸åŒçš„æŠ€æœ¯ã€‚</p>
<p>æœ‰äº›æ˜¯æŠŠåº•å±‚ä»£ç æ‹¿æ¥æ”¹äº†æ”¹ï¼Œæœ‰äº›ç”šè‡³ç›´æ¥æ˜¯scrcpyå¤–é¢å¥—äº†ä¸ªå£³ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹scrcpyä¸ºå•¥è¿™ä¹ˆå¼ºå¤§ï¼Œå®ƒçš„è¿è¡ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<hr/>
<h2 data-id="heading-4">åŸç†</h2>
<p>scrcpy çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå……åˆ†åˆ©ç”¨äº† Android ç³»ç»Ÿçš„è™šæ‹Ÿæ˜¾ç¤ºåŠŸèƒ½ã€‚</p>
<p>å½“ä½ ä½¿ç”¨ <code>--new-display</code> å‚æ•°æ—¶ï¼Œscrcpy ä¼šé€šè¿‡ Android çš„ DisplayManager API åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿæ˜¾ç¤ºå™¨ã€‚</p>
<p>æ¯ä¸ªè™šæ‹Ÿæ˜¾ç¤ºå™¨éƒ½ç›¸å½“äºä¸€ä¸ªç‹¬ç«‹çš„å±å¹•ï¼Œç³»ç»Ÿä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„æ˜¾ç¤ºç«¯å£ã€‚</p>
<p>ä½ çš„æ‰‹æœºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨ï¼Œå¹¶å°†å®ƒä»¬çš„ç”»é¢åˆ†åˆ«æŠ•å°„åˆ°ä¸åŒçš„è™šæ‹Ÿæ˜¾ç¤ºå™¨ä¸Šã€‚</p>
<p>è€Œä¸” scrcpy å…è®¸ä½ ä¸ºæ¯ä¸ªè™šæ‹Ÿæ˜¾ç¤ºå™¨è®¾ç½®ä¸åŒçš„åˆ†è¾¨ç‡å’Œåˆ·æ–°ç‡ã€‚</p>
<p>è¿™èƒŒåçš„åŸç†æ˜¯ï¼ŒAndroid ç³»ç»Ÿæœ¬èº«æ”¯æŒå¤šæ˜¾ç¤ºå™¨æ¨¡å¼ï¼Œå‚å•†çš„å¤šè®¾å¤‡ååŒåŠŸèƒ½ä¹Ÿæ˜¯åŸºäºè¿™ä¸€ç‰¹æ€§å¼€å‘çš„ã€‚</p>
<p>scrcpy åˆ™æ˜¯å°†è¿™ä¸€åŠŸèƒ½å¼€æ”¾ç»™äº†æ™®é€šç”¨æˆ·ï¼Œå¹¶é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè®©ä½ å¯ä»¥è½»æ¾å®ç°è¿™äº›åŠŸèƒ½ã€‚</p>
<p>æ­¤å¤–ï¼Œscrcpy çš„é«˜æ•ˆæ€§å¾—ç›Šäºå®ƒçš„ä½¿ç”¨äº†ä¸²æµæ–¹å¼ï¼Œå°†æ‰‹æœºå±å¹•å†…å®¹å®æ—¶ç¼–ç åï¼Œé€šè¿‡ USB æˆ– Wi-Fi ä¼ è¾“åˆ°ç”µè„‘ã€‚</p>
<p>è¿™ç§æ–¹å¼ä¸ä»…ä¿è¯äº†ç”»é¢çš„é«˜è´¨é‡ï¼Œè¿˜èƒ½æœ€å¤§ç¨‹åº¦åœ°é™ä½å»¶è¿Ÿã€‚ç°åœ¨åœ¨pcç«¯æ¯”è¾ƒæµè¡Œçš„è¿œç¨‹æ¸¸æˆæ–¹æ¡ˆä¹Ÿéƒ½åŸºäºè¿™ç§ä¸²æµçš„æ–¹å¼ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ— è®ºæ˜¯å±å¹•é•œåƒè¿˜æ˜¯å¤šè®¾å¤‡ååŒæ“ä½œï¼Œscrcpy éƒ½èƒ½æä¾›æµç•…çš„ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>ä»åŸºç¡€çš„å±å¹•æŠ•å°„åˆ°é«˜çº§çš„å¤šçª—å£æ“ä½œï¼Œscrcpy ç”¨å¼€æºçš„æ–¹å¼æ‰“ç ´äº†å‚å•†å£å’ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½æ‹¥æœ‰æ¯”å®˜æ–¹è§£å†³æ–¹æ¡ˆæ›´å¼ºå¤§çš„å¤šè®¾å¤‡ååŒèƒ½åŠ›ã€‚</p>
<p>è€Œä¸”è¿™ä¸€åˆ‡éƒ½æ˜¯å…è´¹çš„ã€‚</p>
<p>ä¸éœ€è¦è´­ä¹°æ˜‚è´µçš„ç¡¬ä»¶è®¾å¤‡ï¼Œä¸éœ€è¦è®¢é˜…ä»˜è´¹æœåŠ¡ï¼Œåªéœ€è¦ä¸€æ¡ USB æ•°æ®çº¿å’Œå‡ ä¸ªç®€å•çš„å‘½ä»¤ï¼Œå°±èƒ½è®©ä½ çš„æ‰‹æœºå’Œç”µè„‘å®Œç¾èåˆã€‚</p>
<p>ä¸‹æ¬¡å†çœ‹åˆ°å„ç§èŠ±é‡Œèƒ¡å“¨çš„å¤šè®¾å¤‡ååŒåŠŸèƒ½æ—¶ï¼Œä¸å¦¨æƒ³æƒ³ï¼šå…¶å®ä½ å¯èƒ½æ—©å°±æ‹¥æœ‰äº†æ›´å¼ºå¤§çš„å·¥å…·ï¼Œåªæ˜¯è¿˜ä¸çŸ¥é“æ€ä¹ˆç”¨è€Œå·²ã€‚</p>
<p>å¥½äº†ï¼Œå¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚
ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚
å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>â€”â€” laoliu_dev</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[git "baseç‚¹"è¯¦è§£,é¡ºä¾¿è§£é‡Šmergeå’ŒrebaseåŒºåˆ«]]></title>    <link>https://juejin.cn/post/7571840220704342062</link>    <guid>https://juejin.cn/post/7571840220704342062</guid>    <pubDate>2025-11-13T07:54:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571840220704342062" data-draft-id="7571829822340988979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="git &quot;baseç‚¹&quot;è¯¦è§£,é¡ºä¾¿è§£é‡Šmergeå’ŒrebaseåŒºåˆ«"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T07:54:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€šæ å¬é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/2682464103830750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            git "baseç‚¹"è¯¦è§£,é¡ºä¾¿è§£é‡Šmergeå’ŒrebaseåŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464103830750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€šæ å¬é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:54:49.000Z" title="Thu Nov 13 2025 07:54:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„ Git æ¦‚å¿µã€‚æˆ‘ä»¬æ¥ç”¨ä¸€ä¸ªé€šä¿—æ˜“æ‡‚çš„æ–¹å¼å½»åº•ç†è§£å®ƒã€‚</p>
<h3 data-id="heading-0">æ ¸å¿ƒæ¯”å–»ï¼šç›–æ¥¼</h3>
<p>ä½ å¯ä»¥æŠŠ Git çš„æäº¤å†å²æƒ³è±¡æˆ<strong>ç›–ä¸€æ ‹å¤§æ¥¼</strong>ã€‚</p>
<ul>
<li><strong>æ¯ä¸€æ¬¡Â <code>git commit</code></strong>Â å°±åƒæ˜¯åœ¨è¿™æ ‹æ¥¼ä¸Š<strong>æ–°ç›–ä¸€å±‚</strong>ã€‚</li>
<li><strong><code>git commit</code>Â çš„ base ç‚¹ï¼ˆåŸºç‚¹ï¼‰</strong> ï¼Œå°±æ˜¯ä½ <strong>è¦å¾€ä¸Šç›–æ–°æ¥¼å±‚çš„é‚£ä¸ªâ€œå½“å‰æœ€é«˜å±‚â€</strong> ã€‚</li>
</ul>
<p>æ²¡æœ‰è¿™ä¸ªåŸºç‚¹ï¼Œä½ å°±ä¸çŸ¥é“æ–°çš„ä¸€å±‚è¯¥ä»å“ªé‡Œå¼€å§‹ç›–ã€‚åœ¨ Git ä¸­ï¼Œæ²¡æœ‰åŸºç‚¹ï¼Œä½ å°±ä¸çŸ¥é“æ–°çš„ä»£ç å˜æ›´åº”è¯¥åŸºäºå“ªä¸ªå†å²ç‰ˆæœ¬æ¥åˆ›å»ºã€‚</p>
<hr/>
<h3 data-id="heading-1">è¯¦ç»†è§£é‡Š</h3>
<p><strong>æ ¸å¿ƒç†è§£</strong>ï¼šä¸€ä¸ª Commit çš„â€œçˆ¶æäº¤â€ åœ¨Gitä¸­ï¼Œä¸€ä¸ª Commit çš„ Baseç‚¹ï¼Œæœ€ç›´æ¥çš„ç†è§£å°±æ˜¯å®ƒçš„ã€çˆ¶æäº¤ã€‘ã€‚</p>
<h3 data-id="heading-2">1. æœ€ç®€å•çš„çº¿æ€§æƒ…å†µ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä½ çš„æäº¤å†å²æ˜¯ä¸€æ¡ç›´çº¿ï¼š</p>
<pre><code class="hljs language-text" lang="text">A &lt;- B &lt;- C &lt;- D
</code></pre>
<p>åœ¨è¿™é‡Œï¼š</p>
<ul>
<li>æäº¤Â <code>D</code>Â çš„ Baseç‚¹ æ˜¯Â <code>C</code>ã€‚</li>
<li>æäº¤Â <code>C</code>Â çš„ Baseç‚¹ æ˜¯Â <code>B</code>ã€‚</li>
<li>æäº¤Â <code>B</code>Â çš„ Baseç‚¹ æ˜¯Â <code>A</code>ã€‚</li>
<li>æäº¤Â <code>A</code>Â æ˜¯åˆå§‹æäº¤ï¼Œæ²¡æœ‰ Baseç‚¹ï¼ˆçˆ¶æäº¤ï¼‰ã€‚</li>
</ul>
<p>å½“ä½ æ‰§è¡ŒÂ <code>git commit</code>Â æ—¶ï¼ŒGit ä¼šï¼š</p>
<ol>
<li>å°†å½“å‰<strong>æš‚å­˜åŒº</strong>Â çš„å†…å®¹ä¸Â <strong>HEAD æ‰€æŒ‡å‘çš„æäº¤</strong>ï¼ˆä¹Ÿå°±æ˜¯ä½ å½“å‰æ‰€åœ¨çš„æäº¤ï¼Œæ¯”å¦‚Â <code>C</code>ï¼‰è¿›è¡Œæ¯”è¾ƒã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤å¯¹è±¡Â <code>D</code>ã€‚</li>
<li>å°†Â <code>D</code>Â çš„çˆ¶æäº¤è®¾ç½®ä¸ºÂ <code>C</code>ã€‚</li>
<li>å°†Â <code>HEAD</code>Â æŒ‡é’ˆç§»åŠ¨åˆ°æ–°çš„æäº¤Â <code>D</code>ã€‚</li>
</ol>
<p><strong>æ‰€ä»¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„ Baseç‚¹ å°±æ˜¯ä½ æ‰§è¡ŒÂ <code>git commit</code>Â å‘½ä»¤æ—¶ï¼ŒHEAD æŒ‡å‘çš„é‚£ä¸ªæäº¤ã€‚</strong></p>
<h4 data-id="heading-3">2. å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h4>
<p>Git åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ—¶ï¼Œä¼šåšä»¥ä¸‹å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>å°†æš‚å­˜åŒºï¼ˆStaging Areaï¼‰é‡Œçš„æ–‡ä»¶å¿«ç…§ä¿å­˜ä¸‹æ¥ã€‚</li>
<li>ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤å¯¹è±¡ï¼ˆCommit Objectï¼‰ã€‚</li>
<li><strong>å°†è¿™ä¸ªæ–°æäº¤çš„çˆ¶æäº¤ï¼ˆParentï¼‰è®¾ç½®ä¸ºå½“å‰çš„Â <code>HEAD</code>ï¼ˆä¹Ÿå°±æ˜¯ base ç‚¹ï¼‰ã€‚</strong></li>
<li>å°†Â <code>HEAD</code>ï¼ˆä»¥åŠå½“å‰åˆ†æ”¯æŒ‡é’ˆï¼‰ç§»åŠ¨åˆ°é€™å€‹æ–°çš„æäº¤ä¸Šã€‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹å½¢æˆäº†ä¸€ä¸ªé“¾æ¡ï¼Œæ¯ä¸ªæ–°æäº¤éƒ½æŒ‡å‘ä¸Šä¸€ä¸ªæäº¤ï¼ˆå®ƒçš„ base ç‚¹ï¼‰ã€‚</p>
<h3 data-id="heading-4">2. æ›´å¤æ‚çš„åœºæ™¯ï¼šåˆ†æ”¯ä¸åˆå¹¶</h3>
<p>å½“å­˜åœ¨åˆ†æ”¯å’Œåˆå¹¶æ—¶ï¼Œâ€œBaseç‚¹â€çš„æ¦‚å¿µä¼šå˜å¾—æ›´åŠ é‡è¦å’Œå…·ä½“ã€‚</p>
<h4 data-id="heading-5">a) åˆ›å»ºæ–°åˆ†æ”¯æ—¶</h4>
<p>å½“ä½ åŸºäºÂ <code>main</code>Â åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯Â <code>feature</code>Â æ—¶ï¼š</p>
<p>text</p>
<pre><code class="hljs language-css" lang="css">          E - F (feature)
         /
<span class="hljs-selector-tag">A</span> - <span class="hljs-selector-tag">B</span> - C - D (<span class="hljs-selector-tag">main</span>)
</code></pre>
<ul>
<li>åˆ†æ”¯Â <code>feature</code>Â æ˜¯ä»æäº¤Â <code>C</code>Â åˆ›å»ºçš„ã€‚</li>
<li>å› æ­¤ï¼Œæäº¤Â <code>E</code>Â çš„ Baseç‚¹ æ˜¯Â <code>C</code>ã€‚</li>
<li>å¯¹äºÂ <code>feature</code>Â åˆ†æ”¯ä¸Šçš„ä»»ä½•æ–°æäº¤ï¼Œå®ƒä»¬çš„ Baseç‚¹ éƒ½æ˜¯å…¶ç›´æ¥çš„å‰ä¸€ä¸ªæäº¤ã€‚</li>
</ul>
<h4 data-id="heading-6">b) åˆå¹¶æ—¶ - â€œMerge Baseâ€</h4>
<p>è¿™æ˜¯â€œBaseç‚¹â€æ¦‚å¿µæœ€å…³é”®çš„è¿ç”¨åœºæ™¯ä¹‹ä¸€ã€‚å½“ä½ å°è¯•å°†Â <code>feature</code>Â åˆ†æ”¯åˆå¹¶å›Â <code>main</code>Â åˆ†æ”¯æ—¶ï¼š</p>
<pre><code class="hljs language-text" lang="text">          E - F (feature)
         /
A - B - C - D (main)
</code></pre>
<p>Git ä¼šæ‰§è¡Œä¸€ä¸ªéå¸¸èªæ˜çš„æ“ä½œï¼š<strong>å¯»æ‰¾åˆå¹¶åŸºå‡†ç‚¹</strong>ã€‚</p>
<ol>
<li>
<p><strong>å¯»æ‰¾ Merge Base</strong>ï¼šGit ä¼šæ‰¾åˆ°ä¸¤ä¸ªåˆ†æ”¯ï¼ˆ<code>main</code>Â å’ŒÂ <code>feature</code>ï¼‰çš„â€œæœ€è¿‘å…±åŒç¥–å…ˆâ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯æäº¤Â <code>C</code>ã€‚</p>
</li>
<li>
<p><strong><code>C</code>Â å°±æ˜¯è¿™æ¬¡åˆå¹¶çš„ Baseç‚¹</strong>ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œä¸‰æ–¹åˆå¹¶</strong>ï¼šGit ä¼šè¿›è¡Œä»¥ä¸‹æ¯”è¾ƒï¼š</p>
<ul>
<li>Baseç‚¹ (<code>C</code>) ä¸Â <code>main</code>Â çš„å½“å‰çŠ¶æ€ (<code>D</code>) çš„å·®å¼‚ã€‚</li>
<li>Baseç‚¹ (<code>C</code>) ä¸Â <code>feature</code>Â çš„å½“å‰çŠ¶æ€ (<code>F</code>) çš„å·®å¼‚ã€‚</li>
</ul>
</li>
<li>
<p>Git ä¼šå°è¯•å°†è¿™ä¸¤ç»„å·®å¼‚åˆå¹¶èµ·æ¥ï¼Œåº”ç”¨åˆ°ä¸€ä¸ªæ–°çš„æäº¤ä¸Šã€‚å¦‚æœæˆåŠŸï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª<strong>åˆå¹¶æäº¤</strong>Â <code>G</code>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-text" lang="text">          E - F (feature)
         /         \
A - B - C - D ----- G (main)
</code></pre>
<ul>
<li>è¿™ä¸ªåˆå¹¶æäº¤Â <code>G</code>Â æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæœ‰ä¸¤ä¸ªçˆ¶æäº¤ï¼š<code>D</code>Â å’ŒÂ <code>F</code>ã€‚</li>
</ul>
<h3 data-id="heading-7">3. å˜åŸºæ—¶ - â€œRebase Baseâ€</h3>
<p>å˜åŸºæ˜¯å¦ä¸€ç§æ”¹å˜ Baseç‚¹ çš„å¼ºå¤§æ“ä½œã€‚</p>
<p>åœ¨åˆå¹¶çš„ä¾‹å­ä¸­ï¼Œ<code>feature</code>Â åˆ†æ”¯çš„å†å²æ˜¯åŸºäºÂ <code>C</code>Â çš„ã€‚ä½†å¦‚æœä½ æƒ³è®©å†å²çœ‹èµ·æ¥åƒæ˜¯ä¸€æ¡ç›´çº¿ï¼Œä½ å¯ä»¥ä½¿ç”¨Â <code>git rebase</code>ã€‚</p>
<p><strong>å˜åŸºçš„æœ¬è´¨å°±æ˜¯æ”¹å˜ä¸€ä¸ªåˆ†æ”¯çš„ Baseç‚¹ã€‚</strong></p>
<p><strong>å˜åŸºå‰ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">          E - F (feature)
         /
A - B - C - D (main)
</code></pre>
<p>ä½ æ‰§è¡ŒÂ <code>git checkout feature</code>Â ç„¶åÂ <code>git rebase main</code>ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ï¼š</p>
<ol>
<li>Git æ‰¾åˆ°Â <code>feature</code>Â åˆ†æ”¯ä¸Šç‹¬æœ‰çš„æäº¤ï¼ˆ<code>E</code>Â å’ŒÂ <code>F</code>ï¼‰ã€‚</li>
<li>Git ä¸´æ—¶ä¿å­˜è¿™äº›æäº¤çš„æ›´æ”¹ï¼ˆå·®å¼‚ï¼‰ã€‚</li>
<li>Git å°†Â <code>feature</code>Â åˆ†æ”¯çš„Â <strong>Baseç‚¹</strong>Â ä»Â <code>C</code>Â <strong>é‡ç½®</strong>Â åˆ°Â <code>main</code>Â åˆ†æ”¯çš„é¡¶ç«¯ï¼Œä¹Ÿå°±æ˜¯Â <code>D</code>ã€‚</li>
<li>ç„¶åï¼ŒGit åœ¨<strong>æ–°çš„ Baseç‚¹ (<code>D</code>)</strong> Â ä¸Šï¼Œä¾æ¬¡é‡æ–°åº”ç”¨ä¹‹å‰ä¿å­˜çš„Â <code>E</code>Â å’ŒÂ <code>F</code>Â çš„æ›´æ”¹ï¼Œç”Ÿæˆä¸¤ä¸ª<strong>å…¨æ–°çš„æäº¤</strong>Â <code>E'</code>Â å’ŒÂ <code>Fâ€˜</code>ã€‚</li>
</ol>
<p><strong>å˜åŸºåï¼š</strong></p>
<p>text</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span> - <span class="hljs-selector-tag">B</span> - C - D - E' - F' (feature, <span class="hljs-selector-tag">main</span>)
                (æ–°çš„Baseç‚¹)
</code></pre>
<p>ç°åœ¨ï¼Œ<code>feature</code>Â åˆ†æ”¯çš„ Baseç‚¹ å˜æˆäº†Â <code>D</code>ï¼Œå†å²å˜æˆäº†ä¸€æ¡æ•´æ´çš„ç›´çº¿ã€‚</p>
<h3 data-id="heading-8">Base ç‚¹çš„é‡è¦æ€§ä½“ç°åœ¨å“ªäº›æ–¹é¢ï¼Ÿ</h3>
<h4 data-id="heading-9">1. æ„å»ºæäº¤å†å²</h4>
<p>Base ç‚¹æ˜¯ Git ç‰ˆæœ¬å†å²èƒ½å¤Ÿä¸²è”èµ·æ¥çš„æ ¹æœ¬ã€‚å®ƒç¡®ä¿äº†æäº¤å†å²æ˜¯ä¸€æ¡ï¼ˆæˆ–å¤šæ¡ï¼‰æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰çš„é“¾ï¼Œä½ å¯ä»¥å›æº¯åˆ°ä»»ä½•ä¸€ä¸ªå†å²ç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-10">2. åˆ†æ”¯ï¼ˆBranchingï¼‰çš„æ ¸å¿ƒ</h4>
<p><strong>åˆ›å»ºåˆ†æ”¯çš„æœ¬è´¨ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ã€å¯ç§»åŠ¨çš„æŒ‡é’ˆï¼Œå¹¶è®©å®ƒæŒ‡å‘å½“å‰çš„ base ç‚¹ã€‚</strong></p>
<pre><code class="hljs language-text" lang="text">          (HEAD -&gt; main)
                |
A &lt;- B &lt;- C &lt;- D
          |
        (feature)
</code></pre>
<ul>
<li>å½“ä½ åœ¨æäº¤Â <code>C</code>Â æ—¶æ‰§è¡ŒÂ <code>git branch feature</code>ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªåä¸ºÂ <code>feature</code>Â çš„åˆ†æ”¯ï¼Œå®ƒæŒ‡å‘Â <code>C</code>ã€‚</li>
<li>æ­¤æ—¶ï¼Œ<code>C</code>Â æ˜¯Â <code>feature</code>Â åˆ†æ”¯çš„èµ·ç‚¹ï¼ˆbase ç‚¹ï¼‰ã€‚</li>
<li>å½“ä½ åˆ‡æ¢åˆ°Â <code>feature</code>Â åˆ†æ”¯ï¼ˆ<code>git checkout feature</code>ï¼‰åï¼Œ<code>HEAD</code>Â å°±æŒ‡å‘äº†Â <code>feature</code>ã€‚é‚£ä¹ˆÂ <code>C</code>Â å°±æˆäº†ä½ åœ¨Â <code>feature</code>Â åˆ†æ”¯ä¸Šç¬¬ä¸€æ¬¡æäº¤çš„ base ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>ä½ å¯ä»¥æŠŠÂ <code>git commit</code>Â çš„Â <strong>base ç‚¹</strong>Â ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>å½“å‰å·¥ä½œç›®å½•æ‰€åŸºäºçš„é‚£ä¸ªå†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯æ–°æäº¤çš„â€œçˆ¶æäº¤â€ã€‚å®ƒå†³å®šäº†ä½ çš„æ–°ä»£ç å˜æ›´å°†ä»ä»£ç åº“çš„å“ªä¸ªçŠ¶æ€å¼€å§‹è®°å½•ï¼Œæ˜¯æ•´ä¸ªç‰ˆæœ¬å†å²å½¢æˆé“¾æ¡çš„åŸºçŸ³ã€‚</strong></p>
</blockquote>
<p>ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œä½ å°±èƒ½æ›´å¥½åœ°ç†è§£åˆ†æ”¯ã€åˆå¹¶ã€å˜åŸºç­‰å‡ ä¹æ‰€æœ‰ Git é«˜çº§æ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ajax æ•°æ®è¯·æ±‚è¯¦è§£ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7571815997067214888</link>    <guid>https://juejin.cn/post/7571815997067214888</guid>    <pubDate>2025-11-13T07:53:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571815997067214888" data-draft-id="7571734313927770146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ajax æ•°æ®è¯·æ±‚è¯¦è§£ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-13T07:53:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="3ç§’ä¸€ä¸ªå¤§"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ajax æ•°æ®è¯·æ±‚è¯¦è§£ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    3ç§’ä¸€ä¸ªå¤§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:53:12.000Z" title="Thu Nov 13 2025 07:53:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ajax æ•°æ®è¯·æ±‚è¯¦è§£ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Ajaxï¼Ÿ</h3>
<p>Ajax å…¨ç§°æ˜¯ Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥ JavaScript å’Œ XMLï¼‰ï¼Œä¸è¿‡éšç€æŠ€æœ¯å‘å±•ï¼Œç°åœ¨æ›´å¤šä½¿ç”¨ JSON æ ¼å¼ä¼ è¾“æ•°æ®ã€‚å®ƒæ˜¯ä¸€ç§åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹çš„æŠ€æœ¯ï¼Œè¿™è®©ç½‘é¡µäº¤äº’æ›´åŠ æµç•…è‡ªç„¶ã€‚</p>
<h3 data-id="heading-2">Ajax å®ç°æµç¨‹</h3>
<p>ç»“åˆä»£ç å®ä¾‹ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è®²è§£ Ajax çš„å®ç°æ­¥éª¤ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡Â <code>XMLHttpRequest</code>Â å¯¹è±¡å®Œæˆæ•°æ®è¯·æ±‚ä¸å¤„ç†ã€‚</p>
<h4 data-id="heading-3">1. å®ä¾‹åŒ– XMLHttpRequest å¯¹è±¡</h4>
<p><code>XMLHttpRequest</code>Â æ˜¯æµè§ˆå™¨æä¾›çš„åŸç”Ÿå¯¹è±¡ï¼Œç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">XMLHttpRequest</span>(); <span class="hljs-comment">// åˆ›å»º Ajax è¯·æ±‚å¯¹è±¡</span>
</code></pre>
<h4 data-id="heading-4">2. æ‰“å¼€è¯·æ±‚ï¼ˆopen æ–¹æ³•ï¼‰</h4>
<p><code>open</code>Â æ–¹æ³•ç”¨äºåˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚ï¼Œè¯­æ³•ä¸ºï¼š<code>xhr.open(method, url, async)</code></p>
<ul>
<li><code>method</code>ï¼šè¯·æ±‚æ–¹å¼ï¼Œå¦‚ GETï¼ˆè·å–æ•°æ®ï¼‰ã€POSTï¼ˆæäº¤æ•°æ®ï¼‰ç­‰</li>
<li><code>url</code>ï¼šè¯·æ±‚çš„æ¥å£åœ°å€</li>
<li><code>async</code>ï¼šæ˜¯å¦å¼‚æ­¥è¯·æ±‚ï¼ˆ<code>true</code>Â ä¸ºå¼‚æ­¥ï¼Œ<code>false</code>Â ä¸ºåŒæ­¥ï¼Œé€šå¸¸ä½¿ç”¨å¼‚æ­¥ï¼‰</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ª GET è¯·æ±‚ï¼Œåœ°å€ä¸º GitHub ç»„ç»‡æˆå‘˜æ¥å£ï¼Œè¿™é‡Œè®¾ç½®ä¸ºåŒæ­¥ï¼ˆå®é™…å¼€å‘æ¨èå¼‚æ­¥ trueï¼‰</span>
xhr.<span class="hljs-keyword">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'https://api.github.com/orgs/lemoncode/members'</span>, <span class="hljs-literal">false</span>);
</code></pre>
<h4 data-id="heading-5">3. å‘é€è¯·æ±‚ï¼ˆsend æ–¹æ³•ï¼‰</h4>
<p><code>send</code>Â æ–¹æ³•ç”¨äºå°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼Œè‹¥ä¸º POST è¯·æ±‚ï¼Œå¯åœ¨å‚æ•°ä¸­æºå¸¦è¯·æ±‚ä½“ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">xhr<span class="hljs-selector-class">.send</span>(); <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
</code></pre>
<h4 data-id="heading-6">4. ç›‘å¬è¯·æ±‚çŠ¶æ€å˜åŒ–ï¼ˆonreadystatechange äº‹ä»¶ï¼‰</h4>
<p>ç”±äºç½‘ç»œè¯·æ±‚æ˜¯å¼‚æ­¥è¿‡ç¨‹ï¼ˆå³ä½¿ä»£ç ä¸­è®¾ç½®ä¸ºåŒæ­¥ï¼Œä¹Ÿå»ºè®®é€šè¿‡äº‹ä»¶ç›‘å¬å¤„ç†ï¼‰ï¼Œéœ€è¦é€šè¿‡Â <code>onreadystatechange</code>Â äº‹ä»¶ç›‘å¬è¯·æ±‚çŠ¶æ€çš„å˜åŒ–ï¼Œåœ¨åˆé€‚çš„æ—¶æœºå¤„ç†å“åº”æ•°æ®ã€‚</p>
<p>å…³é”®åˆ¤æ–­æ¡ä»¶ï¼š</p>
<ul>
<li><code>readyState</code>ï¼šè¯·æ±‚çŠ¶æ€ç ï¼ˆ0-4ï¼Œä»£è¡¨ä¸åŒé˜¶æ®µï¼‰</li>
<li><code>status</code>ï¼šHTTP å“åº”çŠ¶æ€ç ï¼ˆ200 è¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼‰</li>
</ul>
<h5 data-id="heading-7">readyState çŠ¶æ€è¯´æ˜</h5>
<ul>
<li>0ï¼šæœªåˆå§‹åŒ–ï¼ˆå¯¹è±¡åˆ›å»ºä½†æœªè°ƒç”¨ open æ–¹æ³•ï¼‰</li>
<li>1ï¼šå·²æ‰“å¼€ï¼ˆè°ƒç”¨ open æ–¹æ³•åï¼Œæœªå‘é€è¯·æ±‚ï¼‰</li>
<li>2ï¼šå·²å‘é€ï¼ˆè°ƒç”¨ send æ–¹æ³•åï¼Œæœªæ¥æ”¶å“åº”ï¼‰</li>
<li>3ï¼šæ¥æ”¶ä¸­ï¼ˆå·²æ¥æ”¶éƒ¨åˆ†å“åº”æ•°æ®ï¼‰</li>
<li>4ï¼šå®Œæˆï¼ˆå“åº”æ•°æ®æ¥æ”¶å®Œæ¯•ï¼‰</li>
</ul>
<h4 data-id="heading-8">5. å¤„ç†å“åº”æ•°æ®å¹¶æ›´æ–° DOM</h4>
<p>å½“Â <code>readyState === 4</code>Â ä¸”Â <code>status === 200</code>Â æ—¶ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸä¸”å“åº”å®Œæˆï¼Œæ­¤æ—¶å¯è§£æå“åº”æ•°æ®å¹¶æ›´æ–°é¡µé¢ã€‚</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">readyState</span>, <span class="hljs-string">'|--|--|'</span>); <span class="hljs-comment">// æ‰“å°å½“å‰è¯·æ±‚çŠ¶æ€</span>
  <span class="hljs-comment">// åˆ¤æ–­è¯·æ±‚æˆåŠŸä¸”å“åº”å®Œæˆ</span>
  <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>){
    <span class="hljs-comment">// è§£æå“åº”æ•°æ®ï¼ˆæœåŠ¡å™¨è¿”å›çš„ JSON å­—ç¬¦ä¸²è½¬ä¸º JavaScript å¯¹è±¡ï¼‰</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>); 
    <span class="hljs-comment">// åŠ¨æ€ç”Ÿæˆåˆ—è¡¨é¡¹å¹¶æ›´æ–°åˆ°é¡µé¢</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'members'</span>).<span class="hljs-property">innerHTML</span> = data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${item.login}</span>&lt;/li&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
  };
}
</code></pre>
<h3 data-id="heading-9">å®Œæ•´ä»£ç è§£æ</h3>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç å®ç°ï¼ŒåŒ…å«å…³é”®æ­¥éª¤çš„æ—¥å¿—æ‰“å°ï¼Œå¸®åŠ©ç†è§£è¯·æ±‚çŠ¶æ€å˜åŒ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Ajax æ•°æ®è¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"members"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç”¨äºå±•ç¤ºè¯·æ±‚åˆ°çš„æ•°æ® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// åˆ›å»º XMLHttpRequest å¯¹è±¡</span>
        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">readyState</span>, <span class="hljs-string">'-----'</span>); <span class="hljs-comment">// æ‰“å° 0ï¼ˆæœªåˆå§‹åŒ–ï¼‰</span>
        
        <span class="hljs-comment">// æ‰“å¼€è¯·æ±‚ï¼ˆGET æ–¹å¼ï¼ŒåŒæ­¥è¯·æ±‚ï¼‰</span>
        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'https://api.github.com/orgs/lemoncode/members'</span>,<span class="hljs-literal">false</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">readyState</span>, <span class="hljs-string">'|----'</span>); <span class="hljs-comment">// æ‰“å° 1ï¼ˆå·²æ‰“å¼€ï¼‰</span>
        
        <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
        xhr.<span class="hljs-title function_">send</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">readyState</span>, <span class="hljs-string">'|--|--'</span>); <span class="hljs-comment">// åŒæ­¥è¯·æ±‚ä¸‹ï¼Œè¿™é‡Œå¯èƒ½æ‰“å° 4ï¼ˆå·²å®Œæˆï¼‰</span>
        
        <span class="hljs-comment">// æ‰“å°åŸå§‹å“åº”æ–‡æœ¬</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'//////'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">responseText</span>);
        
        <span class="hljs-comment">// ç›‘å¬è¯·æ±‚çŠ¶æ€å˜åŒ–</span>
        xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">readyState</span>, <span class="hljs-string">'|--|--|'</span>); <span class="hljs-comment">// æ‰“å°å½“å‰çŠ¶æ€ï¼ˆåŒæ­¥è¯·æ±‚å¯èƒ½åªæ‰“å° 4ï¼‰</span>
            <span class="hljs-comment">// å¤„ç†æˆåŠŸå“åº”</span>
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>){
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">responseText</span>); <span class="hljs-comment">// æ‰“å°å“åº”æ–‡æœ¬</span>
                <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>); <span class="hljs-comment">// è§£æ JSON æ•°æ®ï¼ˆæ³¨æ„ï¼šåŸä»£ç æ­¤å¤„å¤šäº†ä¸ªæ•°å­— 4ï¼Œéœ€åˆ é™¤ï¼‰</span>
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// æ‰“å°è§£æåçš„å¯¹è±¡</span>
                <span class="hljs-comment">// åŠ¨æ€ç”Ÿæˆåˆ—è¡¨å¹¶æ›´æ–° DOM</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'members'</span>).<span class="hljs-property">innerHTML</span> = data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${item.login}</span>&lt;/li&gt;`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
            };
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>åŒæ­¥ vs å¼‚æ­¥</strong>ï¼šä»£ç ä¸­ä½¿ç”¨äº†åŒæ­¥è¯·æ±‚ï¼ˆ<code>async: false</code>ï¼‰ï¼Œä½†å®é™…å¼€å‘ä¸­å»ºè®®ä½¿ç”¨å¼‚æ­¥ï¼ˆ<code>true</code>ï¼‰ï¼Œé¿å…é˜»å¡é¡µé¢æ¸²æŸ“ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç¤ºä¾‹æœªåŒ…å«é”™è¯¯å¤„ç†ï¼ˆå¦‚ç½‘ç»œé”™è¯¯ã€404 ç­‰ï¼‰ï¼Œå®é™…å¼€å‘éœ€è¡¥å……å¯¹é 200 çŠ¶æ€ç çš„å¤„ç†ã€‚</li>
<li><strong>JSON è§£æ</strong>ï¼šéœ€ç¡®ä¿æœåŠ¡å™¨è¿”å›çš„æ˜¯åˆæ³• JSON æ ¼å¼ï¼Œå¦åˆ™Â <code>JSON.parse</code>Â ä¼šæŠ¥é”™ã€‚</li>
<li><strong>è·¨åŸŸé—®é¢˜</strong>ï¼šè‹¥è¯·æ±‚éåŒæºæ¥å£ï¼Œéœ€æœåŠ¡å™¨é…ç½® CORS æˆ–ä½¿ç”¨ä»£ç†è§£å†³è·¨åŸŸé™åˆ¶ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é€šè¿‡åŸç”Ÿ JavaScript å‘èµ· Ajax è¯·æ±‚ï¼ŒåŠ¨æ€è·å–å¹¶å±•ç¤ºæ•°æ®ï¼Œè¿™æ˜¯ç°ä»£ç½‘é¡µäº¤äº’çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HBuilderX é…ç½® adb.exe + æ¨¡æ‹Ÿå™¨ç«¯å£ä¸€ä½“åŒ–å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571829822340579379</link>    <guid>https://juejin.cn/post/7571829822340579379</guid>    <pubDate>2025-11-13T06:11:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571829822340579379" data-draft-id="7571830282849697843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HBuilderX é…ç½® adb.exe + æ¨¡æ‹Ÿå™¨ç«¯å£ä¸€ä½“åŒ–å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:11:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HBuilderX é…ç½® adb.exe + æ¨¡æ‹Ÿå™¨ç«¯å£ä¸€ä½“åŒ–å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:11:07.000Z" title="Thu Nov 13 2025 06:11:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Windows ç¯å¢ƒä¸‹ä½¿ç”¨ HBuilderX è°ƒè¯• Android åº”ç”¨æ—¶ï¼Œæœ€å…³é”®çš„ä¸¤ä¸ªè¦ç´ æ˜¯ï¼š</p>
<ul>
<li><strong>adb.exe è·¯å¾„é…ç½®</strong></li>
<li><strong>æ¨¡æ‹Ÿå™¨ç«¯å£é…ç½®</strong></li>
</ul>
<p>æœ¬æ–‡å°†è¿™ä¸¤ä¸ªé…ç½®æ”¾åœ¨ä¸€èµ·è®²è§£ï¼Œè®©ä½ èƒ½å¤Ÿå¿«é€Ÿå®Œæˆè°ƒè¯•ç¯å¢ƒè®¾ç½®ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>1. ä¸€å¼ å›¾çœ‹æ‡‚æ•´ä½“æµç¨‹</strong></h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[æ‰¾åˆ° adb.exe ]</span> --&gt; <span class="hljs-selector-attr">[é…ç½®åˆ° HBuilderX ]</span> --&gt; <span class="hljs-selector-attr">[adb devices æŸ¥çœ‹ç«¯å£ ]</span> 
      |                                           |
      |                                           â†“
      +--&gt;ï¼ˆå¯é€‰ï¼šåŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰       <span class="hljs-selector-attr">[é…ç½®æ¨¡æ‹Ÿå™¨ç«¯å£åˆ° HBuilderX ]</span>
</code></pre>
<p>åªè¦ <strong>adb è·¯å¾„æ­£ç¡®</strong> + <strong>ç«¯å£åŒ¹é…æ­£ç¡®</strong>ï¼ŒHBuilderX å°±èƒ½è¯†åˆ«æ¨¡æ‹Ÿå™¨ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>2. é…ç½® adb è·¯å¾„ + æ¨¡æ‹Ÿå™¨ç«¯å£ï¼ˆå¹¶åˆ—è¯´æ˜ï¼‰</strong></h2>
<h3 data-id="heading-2"><strong>â‘  åœ¨ HBuilderX ä¸­è®¾ç½® ADB è·¯å¾„</strong></h3>
<p>è¿›å…¥ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">è¿è¡Œ <span class="hljs-punctuation">-&gt;</span> è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ <span class="hljs-punctuation">-&gt;</span> adb è·¯å¾„è®¾ç½®
</code></pre>
<p>å°†æ¨¡æ‹Ÿå™¨æˆ– Android SDK çš„ adb.exe å¡«å…¥ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Android\platform-tools\adb.exe</span>
</code></pre>
<p>æˆ–è€…æ¨¡æ‹Ÿå™¨è‡ªå¸¦çš„ adbï¼Œä¾‹å¦‚è”æƒ³æ¨¡æ‹Ÿå™¨ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Program Files\LenovoSimulator\adb.exe</span>
</code></pre>
<hr/>
<h3 data-id="heading-3"><strong>â‘¡ åŒæ—¶é…ç½®æ¨¡æ‹Ÿå™¨ç«¯å£ï¼ˆä¸ adb ä¸€èµ·é…ï¼‰</strong></h3>
<p>åŒä¸€ä½ç½®å³å¯è®¾ç½®æ¨¡æ‹Ÿå™¨ç«¯å£ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">è¿è¡Œ <span class="hljs-punctuation">-&gt;</span> è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ <span class="hljs-punctuation">-&gt;</span> Android æ¨¡æ‹Ÿå™¨ç«¯å£
</code></pre>
<p>å¡«å…¥ä½  adb devices ä¸­çœ‹åˆ°çš„ç«¯å£ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">11509
</code></pre>
<blockquote>
<p><strong>è®°ä½ï¼šç«¯å£å¿…é¡»ä¸ adb devices è¾“å‡ºä¸€è‡´ï¼Œå¦åˆ™ä¸ä¼šè¯†åˆ«æ¨¡æ‹Ÿå™¨ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-4"><strong>3. å¦‚ä½•å¿«é€Ÿæ‰¾åˆ° adb.exe ä¸ç«¯å£ï¼Ÿï¼ˆå…³é”®éƒ¨åˆ†ï¼‰</strong></h2>
<h3 data-id="heading-5"><strong>ï¼ˆ1ï¼‰æ‰¾åˆ° adb.exe</strong></h3>
<p>ä½ å¯ä»¥ä»ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ï¼š</p>





















<table><thead><tr><th>æ¥æº</th><th>adb.exe ä½ç½®ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Android SDK</td><td>C:\Android\platform-tools\adb.exe</td></tr><tr><td>è”æƒ³æ¨¡æ‹Ÿå™¨</td><td>å®‰è£…ç›®å½•ä¸‹æŸ¥æ‰¾ adb.exe</td></tr><tr><td>å¤œç¥ã€MuMuã€é›·ç”µç­‰æ¨¡æ‹Ÿå™¨</td><td>å®‰è£…ç›®å½•é€šå¸¸åŒ…å« adb.exe</td></tr></tbody></table>
<p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œç›´æ¥æœç´¢ï¼š</p>
<pre><code class="hljs">åœ¨æ¨¡æ‹Ÿå™¨å®‰è£…ç›®å½•æœç´¢ï¼šadb.exe
</code></pre>
<hr/>
<h3 data-id="heading-6"><strong>ï¼ˆ2ï¼‰æŸ¥çœ‹æ¨¡æ‹Ÿå™¨ç«¯å£</strong></h3>
<p>CMD æˆ– PowerShell æ‰§è¡Œï¼š</p>
<pre><code class="hljs">adb devices
</code></pre>
<p>å¦‚æœçœ‹åˆ°ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">127.0.0.1:11509 device</span>
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><strong>è®¾å¤‡ IP</strong>ï¼š127.0.0.1ï¼ˆæœ¬æœºï¼‰</li>
<li><strong>ç«¯å£å·</strong>ï¼š11509</li>
<li><strong>çŠ¶æ€</strong>ï¼šdeviceï¼ˆå·²è¿æ¥ï¼‰</li>
</ul>
<p>è¿™ä¸ªç«¯å£å·å°±æ˜¯ä½ è¦é…ç½®ç»™ HBuilderX çš„ç«¯å£ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>4. ADB æ•…éšœæ’æŸ¥ï¼ˆä¸ç«¯å£ä¸€èµ·æ“ä½œï¼‰</strong></h2>
<p>ä¸ºäº†è®©ã€Œç«¯å£ + ADBã€ç»Ÿä¸€æ“ä½œï¼Œè¿™é‡Œæ•´ç†æˆè¿è´¯æµç¨‹ï¼š</p>
<hr/>
<h3 data-id="heading-8"><strong>æ­¥éª¤ 1ï¼šç¡®ä¿ adb å¯ç”¨</strong></h3>
<pre><code class="hljs">adb devices
</code></pre>
<p>è‹¥æç¤ºæ‰¾ä¸åˆ° adb â†’ adb è·¯å¾„é…ç½®é”™è¯¯ â†’ é‡æ–°è®¾ç½®åˆ° HBuilderXã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>æ­¥éª¤ 2ï¼šé‡å¯ adb æœåŠ¡ï¼ˆè‹¥æ— æ³•è¯†åˆ«è®¾å¤‡ï¼‰</strong></h3>
<pre><code class="hljs language-perl" lang="perl">adb <span class="hljs-keyword">kill</span>-server   <span class="hljs-comment"># å…³é—­ adb</span>
adb start-server  <span class="hljs-comment"># é‡å¯ adb</span>
</code></pre>
<p>è§£é‡Šï¼š<br/>
é‡å¯ adb å¯ä»¥è§£å†³ 80% çš„è¿æ¥å¤±è´¥ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>æ­¥éª¤ 3ï¼šæ‰‹åŠ¨è¿æ¥æ¨¡æ‹Ÿå™¨ç«¯å£</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">adb connect <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">11509</span>
</code></pre>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>å¼ºåˆ¶è®© adb è¿æ¥æ¨¡æ‹Ÿå™¨ç«¯å£</li>
<li>é¿å…æ¨¡æ‹Ÿå™¨æœªè‡ªåŠ¨æ³¨å†Œåˆ° adb åˆ—è¡¨çš„é—®é¢˜</li>
</ul>
<p>å†æ¬¡æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs">adb devices
</code></pre>
<p>åº”çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">127.0.0.1:11509 device</span>
</code></pre>
<hr/>
<h3 data-id="heading-11"><strong>æ­¥éª¤ 4ï¼šæŠŠç«¯å£ + adb åœ°å€ä¸€èµ·é…åˆ° HBuilderX</strong></h3>
<p><strong>adb è·¯å¾„ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">C:\Program Files\LenovoSimulator\adb.exe</span>
</code></pre>
<p><strong>æ¨¡æ‹Ÿå™¨ç«¯å£ï¼š</strong></p>
<pre><code class="hljs">11509
</code></pre>
<p>HBuilderX ç«‹åˆ»èƒ½è¯†åˆ«æ¨¡æ‹Ÿå™¨ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>5. å®Œæ•´ç®€æ˜æ€»ç»“ï¼ˆä¿è¯ä¸€çœ‹å°±æ‡‚ï¼‰</strong></h2>
<h4 data-id="heading-13">âœ” é… adb.exe</h4>
<p>HBuilderX â†’ è¿è¡Œ â†’ adb è·¯å¾„è®¾ç½®</p>
<h4 data-id="heading-14">âœ” é…æ¨¡æ‹Ÿå™¨ç«¯å£</h4>
<p>HBuilderX â†’ è¿è¡Œ â†’ Android æ¨¡æ‹Ÿå™¨ç«¯å£</p>
<h4 data-id="heading-15">âœ” ç”¨ adb devices æŸ¥ç«¯å£</h4>
<p>å¦‚çœ‹åˆ°ï¼š<code>127.0.0.1:11509 device</code> â†’ é… 11509 å³å¯</p>
<h4 data-id="heading-16">âœ” æ— æ³•è¯†åˆ«è®¾å¤‡ï¼Ÿ</h4>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-perl" lang="perl">adb <span class="hljs-keyword">kill</span>-server
adb start-server
adb <span class="hljs-keyword">connect</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">11509</span>
</code></pre>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChainå…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571742703534391332</link>    <guid>https://juejin.cn/post/7571742703534391332</guid>    <pubDate>2025-11-13T06:16:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571742703534391332" data-draft-id="7571747061386559507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChainå…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T06:16:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChainå…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:16:12.000Z" title="Thu Nov 13 2025 06:16:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„Pythonå¼€æºæ¡†æ¶ï¼Œä¸“é—¨ç”¨äºæ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚å®ƒé€šè¿‡æ¨¡å—åŒ–çš„ç»„ä»¶ï¼Œç®€åŒ–äº†LLMä¸å¤–éƒ¨æ•°æ®æºã€å·¥å…·é“¾çš„é›†æˆè¿‡ç¨‹ï¼Œè®©å¼€å‘è€…èƒ½åƒæ­ç§¯æœ¨ä¸€æ ·å¿«é€Ÿæ„å»ºåŠŸèƒ½ä¸°å¯Œçš„AIåº”ç”¨ã€‚</p>
<p>ä¸‹è¡¨æ¦‚è¿°äº†LangChainæœ€æ ¸å¿ƒçš„å…­å¤§ç»„ä»¶ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†å…¶å¼ºå¤§åŠŸèƒ½çš„åŸºçŸ³ï¼š</p>

































<table><thead><tr><th>ç»„ä»¶æ¨¡å—</th><th>æ ¸å¿ƒåŠŸèƒ½ä¸ä»·å€¼</th></tr></thead><tbody><tr><td><strong>Model I/O</strong>â€‹</td><td>æä¾›ä¸å„ç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚OpenAI GPTã€é€šä¹‰åƒé—®ï¼‰äº¤äº’çš„ç»Ÿä¸€æ¥å£ï¼ŒåŒ…æ‹¬æ¨¡å‹è°ƒç”¨ã€æç¤ºè¯ç®¡ç†å’Œè¾“å‡ºè§£æã€‚</td></tr><tr><td><strong>Retrieval</strong>â€‹</td><td>å®ç°æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„æ ¸å¿ƒï¼Œè´Ÿè´£ä»å¤–éƒ¨æ•°æ®æºï¼ˆå¦‚æ–‡æ¡£ã€æ•°æ®åº“ï¼‰è·å–ç›¸å…³ä¿¡æ¯ï¼Œä»¥å¢å¼ºLLMçš„çŸ¥è¯†å’Œå›ç­”å‡†ç¡®æ€§ã€‚</td></tr><tr><td><strong>Chains</strong>â€‹</td><td>å°†å¤šä¸ªç»„ä»¶æˆ–æ­¥éª¤ä¸²è”æˆå¤æ‚çš„å·¥ä½œæµï¼Œå®ç°å¤šæ­¥éª¤æ¨ç†ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œå…ˆæ£€ç´¢èµ„æ–™ï¼Œå†ç”Ÿæˆç­”æ¡ˆï¼‰ã€‚</td></tr><tr><td><strong>Agents</strong>â€‹</td><td>è®©AIèƒ½å¤Ÿè‡ªä¸»å†³ç­–ï¼Œæ ¹æ®ä»»åŠ¡åŠ¨æ€é€‰æ‹©å’Œä½¿ç”¨å·¥å…·ï¼ˆå¦‚è®¡ç®—å™¨ã€æœç´¢å¼•æ“ã€APIï¼‰ï¼Œå®Œæˆå¤æ‚æ“ä½œã€‚</td></tr><tr><td><strong>Memory</strong>â€‹</td><td>ä¸ºå¯¹è¯æˆ–äº¤äº’æä¾›çŸ­æœŸæˆ–é•¿æœŸçš„è®°å¿†èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿè®°ä½ä¸Šä¸‹æ–‡ï¼Œå®ç°è¿è´¯çš„å¤šè½®å¯¹è¯ã€‚</td></tr><tr><td><strong>Prompt</strong>â€‹</td><td>æä¾›æç¤ºæ¨¡æ¿åŠŸèƒ½ï¼Œå¸®åŠ©ç®¡ç†å’Œä¼˜åŒ–ç»™æ¨¡å‹çš„æŒ‡ä»¤ï¼Œä½¿äº¤äº’æ›´é«˜æ•ˆã€è¾“å‡ºæ›´å¯æ§ã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-0">ğŸ”Œ æ ¸å¿ƒç»„ä»¶æ·±åº¦è§£æ</h3>
<h4 data-id="heading-1">1. Model I/O</h4>
<p>è¿™æ˜¯ä¸LLMäº¤äº’çš„åŸºçŸ³ã€‚LangChainæŠ½è±¡äº†ä¸åŒæ¨¡å‹çš„APIå·®å¼‚ï¼Œè®©å¼€å‘è€…å¯ä»¥ç”¨å‡ ä¹ç›¸åŒçš„ä»£ç è°ƒç”¨OpenAIã€Anthropicã€å›½å†…çš„é€šä¹‰åƒé—®ç­‰ä¸»æµæ¨¡å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_openai import ChatOpenAI
<span class="hljs-attr">llm</span> = ChatOpenAI(model=<span class="hljs-string">"gpt-3.5-turbo"</span>)
<span class="hljs-attr">response</span> = llm.invoke(<span class="hljs-string">"è¯·è§£é‡Šä¸€ä¸‹äººå·¥æ™ºèƒ½ã€‚"</span>)
</code></pre>
<h4 data-id="heading-2">2. Retrievalï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆ-RAGï¼‰</h4>
<p>RAGæ˜¯LangChainæœ€æ ¸å¿ƒçš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ï¼Œå®ƒæœ‰æ•ˆè§£å†³äº†LLMçš„â€œå¹»è§‰â€é—®é¢˜ã€çŸ¥è¯†é™ˆæ—§å’Œæ— æ³•å¤„ç†å†…éƒ¨èµ„æ–™ç­‰ç—›ç‚¹ã€‚å…¶å·¥ä½œæµç¨‹éå¸¸æ¸…æ™°ï¼š</p>
<ol>
<li>
<p><strong>åŠ è½½æ–‡æ¡£</strong>ï¼šä½¿ç”¨æ–‡æ¡£åŠ è½½å™¨ï¼ˆDocument Loaderï¼‰è¯»å–PDFã€TXTã€CSVç­‰æ ¼å¼çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>æ–‡æœ¬åˆ†å‰²</strong>ï¼šç”¨æ–‡æœ¬åˆ†å‰²å™¨ï¼ˆText Splitterï¼‰å°†é•¿æ–‡æ¡£åˆ‡æˆå°å—ï¼Œä»¥ä¾¿æ¨¡å‹å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>å‘é‡åŒ–å­˜å‚¨</strong>ï¼šä½¿ç”¨åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰å°†æ–‡æœ¬å—è½¬æ¢ä¸ºæ•°å€¼å‘é‡ï¼Œå¹¶å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚FAISSã€Chromaï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ£€ç´¢ä¸ç”Ÿæˆ</strong>ï¼šå½“ç”¨æˆ·æé—®æ—¶ï¼Œç³»ç»Ÿå°†é—®é¢˜ä¹Ÿè½¬æ¢ä¸ºå‘é‡ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾æœ€ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µï¼Œç„¶åå°†è¿™äº›ç‰‡æ®µå’ŒåŸé—®é¢˜ä¸€èµ·äº¤ç»™LLMç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</p>
</li>
</ol>
<h4 data-id="heading-3">3. Agentsï¼ˆæ™ºèƒ½ä»£ç†ï¼‰</h4>
<p>Agentæ˜¯LangChainä¸­æœ€å…·æƒ³è±¡åŠ›çš„éƒ¨åˆ†ã€‚å®ƒå°†LLMä½œä¸ºâ€œå¤§è„‘â€ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®ç›®æ ‡è‡ªä¸»å†³å®šè°ƒç”¨ä½•ç§å·¥å…·ï¼ˆToolsï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªAgentï¼Œå®ƒå…·å¤‡è®¿é—®æœç´¢å¼•æ“ã€æŸ¥è¯¢æ•°æ®åº“å’Œå‘é€é‚®ä»¶çš„å·¥å…·ã€‚å½“ä½ æå‡ºâ€œè¯·æŸ¥è¯¢ä¸€ä¸‹ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Œç„¶åå‘é‚®ä»¶æé†’æˆ‘æ˜¯å¦è¦å¸¦ä¼â€è¿™æ ·çš„å¤æ‚æŒ‡ä»¤æ—¶ï¼ŒAgentä¼šè‡ªåŠ¨è§„åˆ’æ­¥éª¤ï¼šå…ˆè°ƒç”¨æœç´¢å¼•æ“æŸ¥å¤©æ°”ï¼Œå†æ ¹æ®ç»“æœå†³å®šè°ƒç”¨é‚®ä»¶å·¥å…·å‘é€ç›¸åº”å†…å®¹ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ› ï¸ å®æˆ˜æ¼”ç»ƒï¼šæ„å»ºæ–‡æ¡£æ™ºèƒ½é—®ç­”ç³»ç»Ÿ</h3>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥åœ°æ„å»ºä¸€ä¸ªæœ€ç®€å•çš„RAGé—®ç­”ç³»ç»Ÿï¼Œå®ƒèƒ½å¤ŸåŸºäºä½ æä¾›çš„æ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ã€‚</p>
<h4 data-id="heading-5">æ­¥éª¤ä¸€ï¼šç¯å¢ƒå‡†å¤‡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ ¸å¿ƒåº“</span>
pip install langchain langchain-openai python-dotenv faiss-cpu
</code></pre>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code>æ–‡ä»¶ï¼Œå­˜æ”¾ä½ çš„APIå¯†é’¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">OPENAI_API_KEY</span>=<span class="hljs-string">"ä½ çš„API-KEY"</span>
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤äºŒï¼šå‡†å¤‡ä¸å¤„ç†æ–‡æ¡£</h4>
<pre><code class="hljs language-ini" lang="ini">import os
from dotenv import load_dotenv
from langchain_community.document_loaders import TextLoader  <span class="hljs-comment"># ä»¥æ–‡æœ¬æ–‡ä»¶ä¸ºä¾‹</span>
from langchain_text_splitters import RecursiveCharacterTextSplitter
from langchain_openai import OpenAIEmbeddings
from langchain_community.vectorstores import FAISS

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-comment"># 1. åŠ è½½æ–‡æ¡£</span>
<span class="hljs-attr">loader</span> = TextLoader(<span class="hljs-string">"your_document.txt"</span>)  <span class="hljs-comment"># è¯·æ›¿æ¢ä¸ºä½ çš„æ–‡ä»¶è·¯å¾„</span>
<span class="hljs-attr">documents</span> = loader.load()

<span class="hljs-comment"># 2. åˆ†å‰²æ–‡æœ¬</span>
<span class="hljs-attr">text_splitter</span> = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">1000</span>, chunk_overlap=<span class="hljs-number">200</span>)
<span class="hljs-attr">texts</span> = text_splitter.split_documents(documents)

<span class="hljs-comment"># 3. åˆ›å»ºå‘é‡å­˜å‚¨</span>
<span class="hljs-attr">embeddings</span> = OpenAIEmbeddings()
<span class="hljs-attr">vectorstore</span> = FAISS.from_documents(texts, embeddings)
</code></pre>
<h4 data-id="heading-7">æ­¥éª¤ä¸‰ï¼šæ„å»ºé—®ç­”é“¾å¹¶è¿›è¡ŒæŸ¥è¯¢</h4>
<pre><code class="hljs language-ini" lang="ini">from langchain.chains import RetrievalQA
from langchain_openai import ChatOpenAI

<span class="hljs-comment"># 1. åˆå§‹åŒ–LLM</span>
<span class="hljs-attr">llm</span> = ChatOpenAI(model=<span class="hljs-string">"gpt-3.5-turbo"</span>, temperature=<span class="hljs-number">0</span>)

<span class="hljs-comment"># 2. åˆ›å»ºæ£€ç´¢å¼é—®ç­”é“¾</span>
<span class="hljs-attr">qa_chain</span> = RetrievalQA.from_chain_type(
    <span class="hljs-attr">llm</span>=llm,
    <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,  <span class="hljs-comment"># ä¸€ç§ç®€å•çš„å¤„ç†æ–¹å¼</span>
    <span class="hljs-attr">retriever</span>=vectorstore.as_retriever()
)

<span class="hljs-comment"># 3. è¿›è¡Œæé—®ï¼</span>
<span class="hljs-attr">query</span> = <span class="hljs-string">"æ ¹æ®æ–‡æ¡£ï¼Œæœ¬é¡¹ç›®çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
<span class="hljs-attr">result</span> = qa_chain.invoke({<span class="hljs-string">"query"</span>: query})
print(result<span class="hljs-section">["result"]</span>)
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ’¡ è¿›é˜¶åº”ç”¨ä¸æœ€ä½³å®è·µ</h3>
<p>åœ¨æŒæ¡äº†åŸºç¡€æµç¨‹åï¼Œä»¥ä¸‹æ€è·¯å¯ä»¥å¸®åŠ©ä½ æ‰“é€ æ›´å¼ºå¤§ã€æ›´å¯é çš„åº”ç”¨ï¼š</p>
<ul>
<li>
<p><strong>åˆ©ç”¨Agentæ„å»ºâ€œæ•°å­—å‘˜å·¥â€</strong> ï¼šå°†AIä¸ä½ çš„ä¸šåŠ¡ç³»ç»Ÿè¿æ¥ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªâ€œCRMæŸ¥è¯¢Agentâ€ï¼Œå®ƒå¯ä»¥ç†è§£å¦‚â€œæ‰¾å‡ºä¸Šä¸ªæœˆæ¶ˆè´¹æœ€é«˜çš„å®¢æˆ·å¹¶ç»™ä»–å‘ä¸€å°æ„Ÿè°¢é‚®ä»¶â€è¿™æ ·çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œç„¶åè‡ªåŠ¨è°ƒç”¨æ•°æ®åº“æŸ¥è¯¢å·¥å…·å’Œé‚®ä»¶å‘é€å·¥å…·å®Œæˆä»»åŠ¡ã€‚</p>
</li>
<li>
<p><strong>å®ç°é•¿æœŸè®°å¿†</strong>ï¼šå¯¹äºèŠå¤©æœºå™¨äººï¼Œé»˜è®¤çš„<code>ConversationBufferMemory</code>ä¼šè®°ä½æ‰€æœ‰å¯¹è¯å†å²ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œä¾‹å¦‚<code>ConversationSummaryMemory</code>å¯ä»¥å°†é•¿å¯¹è¯æ€»ç»“æˆè¦ç‚¹èŠ‚çœtokenï¼Œæˆ–è€…å°†å¯¹è¯å†å²å­˜å…¥æ•°æ®åº“ä»¥å®ç°è·¨ä¼šè¯çš„è®°å¿†ã€‚</p>
</li>
<li>
<p><strong>æç¤ºè¯å·¥ç¨‹ä¼˜åŒ–</strong>ï¼šé€šè¿‡ç²¾å¿ƒè®¾è®¡æç¤ºæ¨¡æ¿ï¼ˆPrompt Templateï¼‰ï¼Œä½ å¯ä»¥æå¤§åœ°æ§åˆ¶æ¨¡å‹çš„è¾“å‡ºé£æ ¼å’Œè´¨é‡ã€‚ä¾‹å¦‚ï¼Œè®©æ¨¡å‹æ‰®æ¼”â€œä¸€ä½èµ„æ·±è¿ç»´ä¸“å®¶â€ï¼Œå¹¶è§„å®šå›ç­”çš„æ ¼å¼ä¸ºMarkdownåˆ—è¡¨ï¼Œå¯ä»¥ä½¿å…¶è¾“å‡ºæ›´ä¸“ä¸šã€æ›´æ˜“è¯»ã€‚</p>
</li>
<li>
<p><strong>å…³æ³¨å¯è§‚æµ‹æ€§</strong>ï¼šåœ¨å¼€å‘å¤æ‚åº”ç”¨æ—¶ï¼Œå»ºè®®ä½¿ç”¨LangSmithï¼ˆLangChainå®˜æ–¹è°ƒè¯•å¹³å°ï¼‰æ¥å¯è§†åŒ–è¿½è¸ªæ¯ä¸ªé“¾ã€æ¯ä¸ªAgentçš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜å¹¶ä¼˜åŒ–æ€§èƒ½ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">ğŸ’ æ ¸å¿ƒä»·å€¼ä¸å­¦ä¹ è·¯å¾„</h3>
<p>LangChainçš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ƒ<strong>å°†å¤§æ¨¡å‹ä»ä¸€ç§æ–°é¢–çš„èŠå¤©æŠ€æœ¯ï¼Œè½¬å˜ä¸ºäº†å¯ä»¥èå…¥ç°æœ‰ä¸šåŠ¡æµç¨‹å’Œç”Ÿäº§ç¯å¢ƒçš„å¼ºå¤§å¼€å‘æ¡†æ¶</strong>ã€‚æ— è®ºæ˜¯æ„å»ºæ™ºèƒ½å®¢æœã€ä¼ä¸šçŸ¥è¯†åº“ï¼Œè¿˜æ˜¯å¼€å‘é«˜åº¦è‡ªåŠ¨åŒ–çš„AIæ™ºèƒ½ä½“ï¼ŒLangChainéƒ½æä¾›äº†æ ‡å‡†åŒ–çš„è·¯å¾„ã€‚</p>
<p>å¯¹äºå­¦ä¹ è€…ï¼Œæˆ‘å»ºè®®çš„è·¯å¾„æ˜¯ï¼š</p>
<ol>
<li>
<p><strong>ç†è§£æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šæŒæ¡ä¸Šè¿°å…­å¤§ç»„ä»¶åŠå…¶å…³ç³»ã€‚</p>
</li>
<li>
<p><strong>åŠ¨æ‰‹å®è·µ</strong>ï¼šä»æœ€ç®€å•çš„é“¾å¼€å§‹ï¼Œé€æ­¥å®Œæˆä¸€ä¸ªRAGåº”ç”¨ã€‚</p>
</li>
<li>
<p><strong>æ·±å…¥æ¢ç´¢</strong>ï¼šç ”ç©¶Agentå’ŒMemoryï¼Œæ„å»ºæ›´åŠ¨æ€ã€æ›´æ™ºèƒ½çš„åº”ç”¨ã€‚</p>
</li>
<li>
<p><strong>å‚ä¸ç¤¾åŒº</strong>ï¼šLangChainç”Ÿæ€è¿­ä»£è¿…é€Ÿï¼Œç§¯æå‚ä¸å…¶ç¤¾åŒºå’ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£æ˜¯æŒç»­å­¦ä¹ çš„æœ€ä½³æ–¹å¼ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»‹ç»ä¸€ä¸‹æˆ‘å¼€å‘çš„ä¸€æ¬¾æ–°å·¥å…·ï¼šå‡½æ•°å›¾åƒç»˜åˆ¶å·¥å…·]]></title>    <link>https://juejin.cn/post/7571829822340628531</link>    <guid>https://juejin.cn/post/7571829822340628531</guid>    <pubDate>2025-11-13T06:17:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571829822340628531" data-draft-id="7571830282849730611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»‹ç»ä¸€ä¸‹æˆ‘å¼€å‘çš„ä¸€æ¬¾æ–°å·¥å…·ï¼šå‡½æ•°å›¾åƒç»˜åˆ¶å·¥å…·"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:17:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’æ¢…ä¸»ç "/> <meta itemprop="url" content="https://juejin.cn/user/2277843825604222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»‹ç»ä¸€ä¸‹æˆ‘å¼€å‘çš„ä¸€æ¬¾æ–°å·¥å…·ï¼šå‡½æ•°å›¾åƒç»˜åˆ¶å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843825604222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’æ¢…ä¸»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:17:40.000Z" title="Thu Nov 13 2025 06:17:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ æ°å“¥ã€‚</p>
<p>ä¸Šä¸ªæœˆï¼Œæˆ‘ç”¨ AI ç¼–ç¨‹ä¸Šçº¿äº†ä¸€ä¸ªå°å·¥å…·ï¼Œå«â€œå‡½æ•°å›¾åƒç»˜åˆ¶å·¥å…·â€ï¼Œåœ°å€æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tooljson.com%2Fmath%2Ffunction-graph-plotter" target="_blank" title="https://www.tooljson.com/math/function-graph-plotter" ref="nofollow noopener noreferrer">www.tooljson.com/math/functiâ€¦</a> ã€‚è¯´å®è¯ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§é¡¹ç›®ï¼Œå°±æ˜¯æˆ‘é—²æš‡æ—¶ç¢ç£¨å‡ºæ¥çš„ä¸€ä¸ªå®ç”¨å·¥å…·ã€‚ä¸ºä»€ä¹ˆåšå®ƒå‘¢ï¼Ÿå› ä¸ºæˆ‘è‡ªå·±å­¦æ•°å­¦çš„æ—¶å€™ï¼Œæ€»æ˜¯è¢«ç”»å‡½æ•°å›¾åƒè¿™äº‹å„¿çƒ¦å¾—ä¸è¡Œã€‚çº¸ç¬”ç”»ç€è´¹åŠ²ï¼Œè½¯ä»¶åˆå¤ªå¤æ‚ï¼Œä¸‹è½½å®‰è£…è¿˜å¾—ç­‰åŠå¤©ã€‚ç»“æœå‘¢ï¼Ÿä¸€ä¸ªç®€å•æ›²çº¿éƒ½ç”»å¾—åƒé¬¼ç”»ç¬¦ã€‚æƒ³åˆ°å¾ˆå¤šäººå¯èƒ½ä¹Ÿè¿™æ ·ï¼Œæˆ‘å°±æƒ³åšä¸ªå…è´¹çš„åœ¨çº¿ç‰ˆæœ¬ï¼Œç®€å•å¥½ç”¨ï¼Œéšæ—¶æ‰“å¼€å°±èƒ½è¯•ã€‚</p>
<p>è¿™ä¸ªå·¥å…·çš„ç›®æ ‡ç”¨æˆ·æŒºå¹¿çš„ï¼šå­¦ç”Ÿå¤ä¹ åŠŸè¯¾ã€è€å¸ˆå¤‡è¯¾ã€ç¨‹åºå‘˜éªŒè¯å…¬å¼ï¼Œç”šè‡³æ˜¯ä¸šä½™çˆ±å¥½è€…å¥½å¥‡å‡½æ•°é•¿å•¥æ ·ã€‚å®ƒå®Œå…¨å…è´¹ï¼Œä¸ç”¨æ³¨å†Œï¼Œæµè§ˆå™¨ä¸€æ‰“å¼€å°±è¡Œã€‚åŠ è½½å¿«ï¼Œç•Œé¢å¹²å‡€ï¼Œç°åœ¨å·²ç»æœ‰ä¸€äº›ç”¨æˆ·åé¦ˆè¯´å¸®äº†å¤§å¿™ã€‚ä¸‹é¢æˆ‘æ¥èŠèŠå®ƒçš„å…·ä½“ç©æ³•å’Œåœºæ™¯ï¼Œå¸Œæœ›èƒ½è®©ä½ è§‰å¾—â€œå“¦ï¼Œè¿™ä¸ªä¸é”™ï¼Œè¯•è¯•çœ‹â€ã€‚</p>
<h2 data-id="heading-0">å…ˆè¯´è¯´æ€ä¹ˆç”¨ï¼šä¸‰æ­¥èµ°ï¼Œé›¶é—¨æ§›</h2>
<p>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tooljson.com%2Fmath%2Ffunction-graph-plotter" target="_blank" title="https://www.tooljson.com/math/function-graph-plotter" ref="nofollow noopener noreferrer">www.tooljson.com/math/functiâ€¦</a> ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç®€æ´çš„é¡µé¢ï¼šå·¦è¾¹æ˜¯è¾“å…¥åŒºå’Œå‚æ•°æ ï¼ŒåŒ…æ‹¬å¯¹äºå›¾åƒæ˜¾ç¤ºçš„å†…å®¹çš„è°ƒæ•´ä»¥åŠå¯¹äºä¸€äº›ç‰¹æ®Šç‚¹çš„æ ‡æ³¨ç­‰ï¼Œå³è¾¹æ˜¯å›¾åƒç”»å¸ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f76a2775f994a82a376e0223731265d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=%2F5LQGmgguM6znMF%2FyORD6OVMKCs%3D" alt="" loading="lazy"/></p>
<p>ä¸¾ä¸ªæœ€åŸºæœ¬çš„ä¾‹å­ï¼šæƒ³ç”» <strong>y=2x+1</strong> è¿™æ¡ç›´çº¿ã€‚ç›´æ¥è¾“å…¥ <strong>y=2x+1</strong> ï¼Œå›¾åƒå°±è‡ªåŠ¨ç»˜åˆ¶å‡ºæ¥äº†â€”â€”ä¸€æ¡ä»å·¦ä¸‹åˆ°å³ä¸Šçš„ç›´çº¿ï¼Œåæ ‡è½´æ ‡å¾—æ¸…æ¸…æ¥šæ¥šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14a3e73d9b0a4acaadd5b8eb9b76c88f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=d48c9z8D0wHSLsZBIEW%2FyrMK%2FZE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2752b09b06a942cfb846e19e79717de4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=oYTAWAL8GvLgMR%2FkuxJDKzZhH4E%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09be689eaadf4f908699bd922d1c7148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=F0E%2BhIopeBuBoPvQDI6fJQSWDwo%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥ä¿®æ”¹æ–œç‡ï¼ˆ<strong>k=-2</strong>ï¼‰ï¼Œä»æ­£å˜è´Ÿï¼Œçœ‹çº¿æ¡æ€ä¹ˆâ€œç¿»èº«â€ä»ä¸Šå¡å˜ä¸‹å¡ã€‚æˆ–è€…è°ƒæˆªè·ï¼ˆb=-1ï¼‰ï¼Œèµ·ç‚¹ä¸Šä¸‹ç§»åŠ¨ã€‚æ•´ä¸ªè¿‡ç¨‹å°±å‡ ç§’é’Ÿï¼Œä¸ç”¨æ‰‹åŠ¨ç®—ç‚¹åæ ‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a93e21edc0e24a9889532a7475dcfd27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=TUZ8T9p381BPTncDGZTWdU3TkAk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a28bf8469cf40619cc20429a13bb018~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619980&amp;x-signature=1NsHp%2FOHawPs56L6SG2xEwO%2FDZ8%3D" alt="" loading="lazy"/></p>
<p>æ”¯æŒçš„å‡½æ•°æŒºå…¨çš„ï¼Œè¦†ç›–äº†é«˜ä¸­å’Œå¤§å­¦å…¥é—¨çº§åˆ«çš„ï¼š<strong>çº¿æ€§ã€äºŒæ¬¡ã€ä¸‰è§’ã€æŒ‡æ•°ã€å¯¹æ•°</strong>ã€‚è¾“å…¥æ–¹å¼åƒå†™å…¬å¼ä¸€æ ·ç®€å•ï¼Œç”¨â€œ^â€è¡¨ç¤ºå¹‚ï¼ˆæ¯”å¦‚ <strong>y=2^xï¼‰</strong>ï¼Œsin(x) å°±æ˜¯æ­£å¼¦ã€‚åæ ‡èŒƒå›´å®ƒä¼šæ™ºèƒ½æ¨èï¼Œé¿å…ç”»å‡ºç©ºç™½é¡µæˆ–æº¢å‡ºã€‚å¦‚æœä½ æƒ³å¯¹æ¯”ä¸¤ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ <strong>y=xÂ²</strong> å’Œ <strong>y=2xÂ²</strong>ï¼Œä¸€é”®æ·»åŠ ç¬¬äºŒæ¡æ›²çº¿ï¼Œé¢œè‰²åŒºåˆ†ï¼Œå åŠ æ˜¾ç¤ºã€‚é¼ æ ‡æ»šè½®æ”¾å¤§ç¼©å°ï¼Œæ‹–æ‹½ç§»åŠ¨ï¼Œç‚¹é€‰ç‚¹å°±èƒ½çœ‹åæ ‡å€¼â€”â€”è¿™äº›å°äº¤äº’ï¼Œè®©ä½ è§‰å¾—ä¸æ˜¯åœ¨â€œç”»å›¾â€ï¼Œè€Œæ˜¯åœ¨â€œç©â€å‡½æ•°ã€‚</p>
<p>ç”±äºæˆ‘ä¹Ÿæ˜¯ç”¨æˆ·ä¹‹ä¸€ï¼Œäº†è§£ç”¨æˆ·æœŸæœ›ä¸€ä¸ªå·¥å…·è¦å®ç”¨ã€å¥½ç”¨ã€‚å› æ­¤æˆ‘ç‰¹åˆ«æ³¨é‡å®ç”¨æ€§å’Œæ˜“ç”¨æ€§ï¼š<strong>å›¾åƒå¯ä»¥é«˜æ¸…å¯¼å‡ºï¼ŒPNG æ ¼å¼ï¼Œç›´æ¥æˆªå±æˆ–ä¸‹è½½åˆ†äº«</strong>ã€‚æ‰‹æœºä¸Šä¹Ÿè¡Œï¼Œå“åº”å¼è®¾è®¡ï¼Œä¸ä¼šä¹±å¥—ã€‚å®Œå…¨å…è´¹ï¼Œæ²¡æœ‰å¹¿å‘Šã€æ°´å°ä»€ä¹ˆçš„ï¼Œå°±æ˜¯çº¯å·¥å…·ã€‚</p>
<h2 data-id="heading-1">æ—¥å¸¸åœºæ™¯ï¼šè°éƒ½å¯ä»¥ç”¨å®ƒï¼Ÿ</h2>
<p>å…ˆè¯´<strong>å­¦ç”Ÿå…š</strong>ï¼šæœŸæœ«å¤ä¹ å‡½æ•°ç« èŠ‚ï¼Œæ€»å¾—ç”»ä¸€å †å›¾åƒæ¥ç†è§£ã€‚ä»¥å‰æˆ‘ç”¨ Excelï¼Œå‚æ•°ä¸€æ”¹å°±å¾—é‡åšè¡¨æ ¼ï¼Œç°åœ¨è¿™ä¸ªå·¥å…·ç›´æ¥æ»‘å—è°ƒæ•´ã€‚æ¯”æ–¹è¯´å­¦äºŒæ¬¡å‡½æ•° <strong>y=axÂ²+bx+c</strong>ï¼Œè°ƒ <strong>a</strong> çœ‹æŠ›ç‰©çº¿å¼€å£å¤§å°ï¼Œ<strong>b</strong> çœ‹å·¦å³åç§»ï¼Œ<strong>c</strong> çœ‹ä¸Šä¸‹ç§»åŠ¨ã€‚ä¸€ç›®äº†ç„¶ï¼Œå¸®ä½ å¿«é€ŸæŠ“ä½æœ¬è´¨ã€‚è®°å¾—æˆ‘ä¾„å­ç”¨å®ƒå¤ä¹ ï¼Œç”» <strong>sin(x)</strong> å’Œ <strong>cos(x)</strong> çš„ç›¸ä½å·®ï¼Œè¾¹ç©è¾¹è®°ï¼Œæ•ˆç‡é«˜å¤šäº†ã€‚</p>
<p><strong>è€å¸ˆç”¨èµ·æ¥æ›´æ–¹ä¾¿</strong>ã€‚å¤‡è¯¾æ—¶ï¼Œä¸ç”¨é»‘æ¿æ¶‚é¸¦ï¼Œç›´æ¥åœ¨å·¥å…·ä¸Šç”Ÿæˆç¤ºä¾‹å›¾ï¼ŒæŠ•å½±åˆ°è¯¾å ‚ã€‚è®©å­¦ç”Ÿé›†ä½“æ”¹å‚æ•°ï¼Œæ¯”å¦‚æŠŠ <strong>y=sin(x)</strong> çš„æŒ¯å¹…ä» 1 è°ƒåˆ° 2ï¼Œçœ‹æ³¢æµªæ€ä¹ˆâ€œæ¶¨æ½®â€ã€‚äº’åŠ¨æ€§å¼ºï¼Œè¯¾å ‚ä¸æ¯ç‡¥ã€‚åé¦ˆé‡Œæœ‰ä¸ªè€å¸ˆè¯´ï¼Œç”¨å®ƒåšäº†ä¸ªå°æµ‹éªŒï¼šç»™å­¦ç”Ÿä¸€ä¸ªå‡½æ•°ï¼Œè®©ä»–ä»¬é¢„æµ‹å›¾åƒå˜åŒ–ï¼Œç„¶åç°åœºéªŒè¯ã€‚å…¨ç­éƒ½å‚ä¸ï¼Œå­¦ä¹ æ•ˆæœç¿»å€ã€‚</p>
<p><strong>èŒåœºé‡Œå‘¢ï¼Ÿæ•°æ®åˆ†ææˆ–æŠ¥å‘Šæ—¶ï¼Œå‡½æ•°å¯è§†åŒ–æ˜¯æ ‡é…</strong>ã€‚å‡è®¾ä½ æ˜¯å¸‚åœºä¸“å‘˜ï¼Œè¦å±•ç¤º <strong>y=e^x</strong> çš„æŒ‡æ•°å¢é•¿æ¨¡å‹ï¼Œæ¨¡æ‹Ÿç”¨æˆ·å¢é•¿æ›²çº¿ã€‚è¾“å…¥å…¬å¼ï¼Œè°ƒæ•´ x èŒƒå›´ï¼ˆæ¯”å¦‚ 0 åˆ° 5ï¼‰ï¼Œå›¾åƒä¸€å‡ºï¼Œå°±èƒ½ç›´è§‚çœ‹åˆ°â€œé›ªçƒæ•ˆåº”â€ã€‚å¯¹æ¯” <strong>y=ln(x)</strong> çš„å¯¹æ•°æ›²çº¿ï¼Œçœ‹è¡°å‡é€Ÿåº¦ã€‚æˆå“åˆ†äº«ç»™å›¢é˜Ÿï¼Œä¸“ä¸šåˆå¿«ã€‚æ¯”èµ·ä¸“ä¸šè½¯ä»¶ï¼Œå®ƒè½»é‡ï¼Œä¸ç”¨å­¦æ›²çº¿ã€‚</p>
<p><strong>è¿˜æœ‰äº›æ„å¤–ç©æ³•</strong>ï¼šç¨‹åºå‘˜è°ƒè¯•ä»£ç æ—¶ï¼Œç”¨å®ƒéªŒè¯æ•°å­¦åº“è¾“å‡ºå¯¹ä¸å¯¹ï¼›è®¾è®¡å¸ˆæ‰¾çµæ„Ÿï¼Œç”»æ›²çº¿æ¢ç´¢å›¾å½¢ç¾æ„Ÿï¼›ç”šè‡³å¥èº«çˆ±å¥½è€…ï¼ŒæŠŠå¿ƒç‡å˜åŒ–æ‹Ÿåˆæˆå‡½æ•°ï¼Œå›¾ä¸Šçœ‹çœ‹â€œå³°è°·â€ã€‚æ€»ä¹‹ï¼Œå®ƒä¸åªæ˜¯å·¥å…·ï¼Œè¿˜èƒ½æ¿€å‘ç‚¹å°å¥½å¥‡ã€‚</p>
<h2 data-id="heading-2">å¼€å‘èƒŒåçš„å°æ•…äº‹ï¼šä»ç—›ç‚¹åˆ°ä¸Šçº¿</h2>
<p>è¿™ä¸ªå·¥å…·çš„çµæ„Ÿæ¥è‡ªæˆ‘ä¸€ä¸ªåˆšåˆšæˆä¸ºè€å¸ˆçš„æœ‹å‹è®©æˆ‘å¸®å¥¹ç”»ä¸€ä¸ªåœ¨çº¿ç‰ˆçš„ä¸‰è§’å‡½æ•°çš„å›¾åƒï¼Œéœ€è¦èƒ½å¤Ÿä½“ç°å‡ºæ¥å‚æ•°çš„å˜åŒ–å¼•èµ·çš„å‡½æ•°å›¾åƒçš„å˜åŒ–è§„å¾‹ã€‚æˆ‘åœ¨ç½‘ä¸Šå®åœ¨æ‰¾ä¸åˆ°åˆé€‚çš„å·¥å…·ï¼Œäºæ˜¯å°±æƒ³è‡ªå·±åšä¸€ä¸ªã€‚äºæ˜¯å°±å¼€å§‹è®¾è®¡éœ€æ±‚ã€ç¼–ç ã€è°ƒè¯•ï¼Œä¸€å‘¨æ—¶é—´åç»ˆäºè‡ªå·±æ¯”è¾ƒæ»¡æ„äº†ã€‚æˆ‘ä¾¿æ‹‰äº†å‡ ä¸ªæœ‹å‹è¯•ç”¨â€”â€”é«˜ä¸­ç”Ÿè¯´â€œç»ˆäºä¸æ€•ç”»é”™äº†â€ï¼ŒåŒäº‹è¯´â€œæŠ¥å‘Šæ—¶é—´çœä¸€åŠâ€ã€‚</p>
<p>å·¥å…·ä¸Šçº¿åï¼Œè®¿é—®é‡æ…¢æ…¢èµ·æ¥äº†ï¼Œç°åœ¨è¿™ä¸ªå·¥å…·çš„æ—¥æ´»æœ‰ <strong>500+</strong> äººã€‚ç”¨æˆ·åé¦ˆæ˜¯æœ€å¥½çš„åŠ¨åŠ›ï¼Œæœ‰äººå»ºè®®åŠ æ»‘å—åŠŸèƒ½ã€å¢åŠ æ›´å¤šå‡½æ•°ç±»å‹ç­‰ï¼Œæˆ‘å·²ç»åœ¨è®¡åˆ’äº†ã€‚</p>
<p>å½“ç„¶ï¼Œå®ƒä¸æ˜¯å®Œç¾æ— ç¼ºã€‚æ²¡æœ‰é«˜çº§åŠŸèƒ½å¦‚ 3D æˆ–åŠ¨ç”»ï¼Œä½†å¯¹å¤§å¤šæ•°äººå¤Ÿç”¨ã€‚æ€»ä¹‹ï¼Œ<strong>æˆ‘çš„ç›®æ ‡æ˜¯è®©æ•°å­¦æ›´äº²æ°‘ç‚¹ï¼Œåˆ«è®©å‡½æ•°å›¾åƒæˆä¸ºæ‹¦è·¯è™</strong>ã€‚</p>
<h2 data-id="heading-3">è¯•è¯•çœ‹ï¼Ÿä½ çš„åé¦ˆå¾ˆé‡è¦</h2>
<p>å†™äº†è¿™ä¹ˆå¤šï¼Œå…¶å®å°±æƒ³è¯´ï¼šæœ‰ç©ºç‚¹å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tooljson.com%2Fmath%2Ffunction-graph-plotter" target="_blank" title="https://www.tooljson.com/math/function-graph-plotter" ref="nofollow noopener noreferrer">www.tooljson.com/math/functiâ€¦</a>ï¼ŒæŒ‘ä¸ªå‡½æ•°è¯•è¯•ã€‚æˆ–è®¸ä» <strong>y=x</strong> å¼€å§‹ï¼Œæ…¢æ…¢ç©åˆ° <strong>e^x</strong> çš„â€œæ— é™æƒŠå–œâ€ã€‚</p>
<p><strong>æ•°å­¦ä¸éš¾ï¼Œéš¾çš„æ˜¯æ²¡å¥½å¸®æ‰‹</strong>ã€‚è¿™ä¸ªå°å·¥å…·ï¼Œå¸Œæœ›èƒ½æˆä¸ºä½ çš„é‚£ä¸ªâ€œå¸®æ‰‹â€ã€‚</p>
<p>ç”¨ç€è§‰å¾—å¥½ï¼Œæ¬¢è¿åœ¨ç¤¾åŒºæˆ–è€…åœ¨æ–‡ç« ä¸‹ç•™è¨€ï¼›å¦‚æœæœ‰ bug æˆ–å…¶ä»–æƒ³æ³•ï¼Œä¹Ÿå°½ç®¡è¯´â€”â€”å·¥å…·æ˜¯ä¸ºå¤§å®¶åšçš„ï¼Œä¸€èµ·å®Œå–„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java é¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†ï¼ˆ2026 å¹´ å¤§å‚é¢è¯•è¢«é—®ï¼‰]]></title>    <link>https://juejin.cn/post/7571747061386592275</link>    <guid>https://juejin.cn/post/7571747061386592275</guid>    <pubDate>2025-11-13T06:17:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571747061386592275" data-draft-id="7571729676344901695" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java é¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†ï¼ˆ2026 å¹´ å¤§å‚é¢è¯•è¢«é—®ï¼‰"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-11-13T06:17:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java é¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†ï¼ˆ2026 å¹´ å¤§å‚é¢è¯•è¢«é—®ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:17:03.000Z" title="Thu Nov 13 2025 06:17:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä¸€ã€Java åŸºç¡€</h4>
<p><strong>1. JDK å’Œ JRE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>JDKï¼šJava Development Kit çš„ç®€ç§°ï¼Œjava å¼€å‘å·¥å…·åŒ…ï¼Œæä¾›äº† java çš„å¼€å‘ç¯å¢ƒå’Œè¿è¡Œç¯å¢ƒã€‚</li>
<li>JREï¼šJava Runtime Environment çš„ç®€ç§°ï¼Œjava è¿è¡Œç¯å¢ƒï¼Œä¸º java çš„è¿è¡Œæä¾›äº†æ‰€éœ€ç¯å¢ƒã€‚</li>
</ul>
<p>å…·ä½“æ¥è¯´ JDK å…¶å®åŒ…å«äº† JREï¼ŒåŒæ—¶è¿˜åŒ…å«äº†ç¼–è¯‘ javaÂ æºç çš„ç¼–è¯‘å™¨ javacï¼Œè¿˜åŒ…å«äº†å¾ˆå¤š java ç¨‹åºè°ƒè¯•å’Œåˆ†æçš„å·¥å…·ã€‚ç®€å•æ¥è¯´ï¼šå¦‚æœä½ éœ€è¦è¿è¡Œ java ç¨‹åºï¼Œåªéœ€å®‰è£… JRE å°±å¯ä»¥äº†ï¼Œå¦‚æœä½ éœ€è¦ç¼–å†™ java ç¨‹åºï¼Œéœ€è¦å®‰è£… JDKã€‚</p>
<p><strong>2. == å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â == å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´æ˜¯å€¼æ¯”è¾ƒï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´æ˜¯æ¯”è¾ƒçš„æ˜¯å¼•ç”¨ï¼›è€Œ equals é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œåªæ˜¯å¾ˆå¤šç±»é‡æ–°äº† equals æ–¹æ³•ï¼Œæ¯”å¦‚ Stringã€Integer ç­‰æŠŠå®ƒå˜æˆäº†å€¼æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ equals æ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ã€‚</p>
<p><strong>3. ä¸¤ä¸ªå¯¹è±¡çš„ hashCode()ç›¸åŒï¼Œåˆ™ equals()ä¹Ÿä¸€å®šä¸º trueï¼Œå¯¹å—ï¼Ÿ</strong> Â ä¸å¯¹ï¼Œä¸¤ä¸ªå¯¹è±¡çš„ hashCode()ç›¸åŒï¼Œequals()ä¸ä¸€å®š trueã€‚ä»£ç è§£è¯»ï¼šå¾ˆæ˜¾ç„¶â€œé€šè¯â€å’Œâ€œé‡åœ°â€çš„ hashCode() ç›¸åŒï¼Œç„¶è€Œ equals() åˆ™ä¸º falseï¼Œå› ä¸ºåœ¨æ•£åˆ—è¡¨ä¸­ï¼ŒhashCode()ç›¸ç­‰å³ä¸¤ä¸ªé”®å€¼å¯¹çš„å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œç„¶è€Œå“ˆå¸Œå€¼ç›¸ç­‰ï¼Œå¹¶ä¸ä¸€å®šèƒ½å¾—å‡ºé”®å€¼å¯¹ç›¸ç­‰ã€‚</p>
<p><strong>4. final åœ¨ java ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p>
<ul>
<li>final ä¿®é¥°çš„ç±»å«æœ€ç»ˆç±»ï¼Œè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚</li>
<li>final ä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚</li>
<li>final ä¿®é¥°çš„å˜é‡å«å¸¸é‡ï¼Œå¸¸é‡å¿…é¡»åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä¹‹åå€¼å°±ä¸èƒ½è¢«ä¿®æ”¹ã€‚</li>
</ul>
<p><strong>5. java ä¸­çš„ Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ</strong> Â ç­‰äº -1ï¼Œå› ä¸ºåœ¨æ•°è½´ä¸Šå–å€¼æ—¶ï¼Œä¸­é—´å€¼ï¼ˆ0.5ï¼‰å‘å³å–æ•´ï¼Œæ‰€ä»¥æ­£ 0.5 æ˜¯å¾€ä¸Šå–æ•´ï¼Œè´Ÿ 0.5 æ˜¯ç›´æ¥èˆå¼ƒã€‚</p>
<p><strong>6. String å±äºåŸºç¡€çš„</strong>æ•°æ®<strong>ç±»å‹å—ï¼Ÿ</strong> Â String ä¸å±äºåŸºç¡€ç±»å‹ï¼ŒåŸºç¡€ç±»å‹æœ‰ 8 ç§ï¼šbyteã€booleanã€charã€shortã€intã€floatã€longã€doubleï¼Œè€Œ String å±äºå¯¹è±¡ã€‚</p>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
<blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/014072374bb64a648a10ee9a91e1a32a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=nS0lIiR4mwx2xNUU8FZDFVLkVVA%3D" alt="c25310b285cd7198a33a66f22a71890.png" loading="lazy"/></p>
</blockquote>
<p><strong>7. java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong> Â æ“ä½œå­—ç¬¦ä¸²çš„ç±»æœ‰ï¼šStringã€StringBufferã€StringBuilderã€‚String å’Œ StringBufferã€StringBuilder çš„åŒºåˆ«åœ¨äº String å£°æ˜çš„æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„ String å¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„ String å¯¹è±¡ï¼Œè€Œ StringBufferã€StringBuilder å¯ä»¥åœ¨åŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šè¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥åœ¨ç»å¸¸æ”¹å˜å­—ç¬¦ä¸²å†…å®¹çš„æƒ…å†µä¸‹æœ€å¥½ä¸è¦ä½¿ç”¨ Stringã€‚StringBuffer å’Œ StringBuilder æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼ŒStringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ StringBuilder æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä½† StringBuilder çš„æ€§èƒ½å´é«˜äº StringBufferï¼Œæ‰€ä»¥åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹æ¨èä½¿ç”¨ StringBuilderï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ¨èä½¿ç”¨ StringBufferã€‚</p>
<p><strong>8. String str="i"ä¸ String str=new String("i")ä¸€æ ·å—ï¼Ÿ</strong> Â ä¸ä¸€æ ·ï¼Œå› ä¸ºå†…å­˜çš„åˆ†é…æ–¹å¼ä¸ä¸€æ ·ã€‚String str="i"çš„æ–¹å¼ï¼Œjava è™šæ‹Ÿæœºä¼šå°†å…¶åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼›è€Œ String str=new String("i") åˆ™ä¼šè¢«åˆ†åˆ°å †å†…å­˜ä¸­ã€‚</p>
<p><strong>9. å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ</strong> Â ä½¿ç”¨ StringBuilder æˆ–è€… stringBuffer çš„ reverse() æ–¹æ³•ã€‚</p>
<p><strong>10. String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ</strong></p>
<ul>
<li>indexOf()ï¼šè¿”å›æŒ‡å®šå­—ç¬¦çš„ç´¢å¼•ã€‚</li>
<li>charAt()ï¼šè¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦ã€‚</li>
<li>replace()ï¼šå­—ç¬¦ä¸²æ›¿æ¢ã€‚</li>
<li>trim()ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ç©ºç™½ã€‚</li>
<li>split()ï¼šåˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚</li>
<li>getBytes()ï¼šè¿”å›å­—ç¬¦ä¸²çš„ byte ç±»å‹æ•°ç»„ã€‚</li>
<li>length()ï¼šè¿”å›å­—ç¬¦ä¸²é•¿åº¦ã€‚</li>
<li>toLowerCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå°å†™å­—æ¯ã€‚</li>
<li>toUpperCase()ï¼šå°†å­—ç¬¦ä¸²è½¬æˆå¤§å†™å­—ç¬¦ã€‚</li>
<li>substring()ï¼šæˆªå–å­—ç¬¦ä¸²ã€‚</li>
<li>equals()ï¼šå­—ç¬¦ä¸²æ¯”è¾ƒã€‚</li>
</ul>
<p><strong>11. æŠ½è±¡ç±»å¿…é¡»è¦æœ‰</strong>æŠ½è±¡æ–¹æ³•<strong>å—ï¼Ÿ</strong> Â ä¸éœ€è¦ï¼ŒæŠ½è±¡ç±»ä¸ä¸€å®šéè¦æœ‰æŠ½è±¡æ–¹æ³•ã€‚</p>
<ul>
<li>æ™®é€šç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚</li>
<li>æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œæ™®é€šç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ã€‚</li>
</ul>
<p><strong>13. æŠ½è±¡ç±»èƒ½ä½¿ç”¨ final ä¿®é¥°å—ï¼Ÿ</strong> Â ä¸èƒ½ï¼Œå®šä¹‰æŠ½è±¡ç±»å°±æ˜¯è®©å…¶ä»–ç±»ç»§æ‰¿çš„ï¼Œå¦‚æœå®šä¹‰ä¸º final è¯¥ç±»å°±ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¿™æ ·å½¼æ­¤å°±ä¼šäº§ç”ŸçŸ›ç›¾ï¼Œæ‰€ä»¥ final ä¸èƒ½ä¿®é¥°æŠ½è±¡ç±»</p>
<p><strong>14. æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>å®ç°ï¼šæŠ½è±¡ç±»çš„å­ç±»ä½¿ç”¨ extends æ¥ç»§æ‰¿ï¼›æ¥å£å¿…é¡»ä½¿ç”¨ implements æ¥å®ç°æ¥å£ã€‚</li>
<li>æ„é€ å‡½æ•°ï¼šæŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼›æ¥å£ä¸èƒ½æœ‰ã€‚</li>
<li>main æ–¹æ³•ï¼šæŠ½è±¡ç±»å¯ä»¥æœ‰ main æ–¹æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½è¿è¡Œå®ƒï¼›æ¥å£ä¸èƒ½æœ‰ main æ–¹æ³•ã€‚</li>
<li>å®ç°æ•°é‡ï¼šç±»å¯ä»¥å®ç°å¾ˆå¤šä¸ªæ¥å£ï¼›ä½†æ˜¯åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</li>
<li>è®¿é—®ä¿®é¥°ç¬¦ï¼šæ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤ä½¿ç”¨ public ä¿®é¥°ï¼›æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•å¯ä»¥æ˜¯ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ã€‚</li>
</ul>
<p><strong>15. java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ</strong> Â æŒ‰åŠŸèƒ½æ¥åˆ†ï¼šè¾“å…¥æµï¼ˆinputï¼‰ã€è¾“å‡ºæµï¼ˆoutputï¼‰ã€‚æŒ‰ç±»å‹æ¥åˆ†ï¼šå­—èŠ‚æµå’Œå­—ç¬¦æµã€‚å­—èŠ‚æµå’Œå­—ç¬¦æµçš„åŒºåˆ«æ˜¯ï¼šå­—èŠ‚æµæŒ‰ 8 ä½ä¼ è¾“ä»¥å­—èŠ‚ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®ï¼Œå­—ç¬¦æµæŒ‰ 16 ä½ä¼ è¾“ä»¥å­—ç¬¦ä¸ºå•ä½è¾“å…¥è¾“å‡ºæ•°æ®ã€‚</p>
<p><strong>16. BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>BIOï¼šBlock IO åŒæ­¥é˜»å¡å¼ IOï¼Œå°±æ˜¯æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„ä¼ ç»Ÿ IOï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ¨¡å¼ç®€å•ä½¿ç”¨æ–¹ä¾¿ï¼Œå¹¶å‘å¤„ç†èƒ½åŠ›ä½ã€‚</li>
<li>NIOï¼šNew IO åŒæ­¥éé˜»å¡ IOï¼Œæ˜¯ä¼ ç»Ÿ IO çš„å‡çº§ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šè¿‡ Channelï¼ˆé€šé“ï¼‰é€šè®¯ï¼Œå®ç°äº†å¤šè·¯å¤ç”¨ã€‚</li>
<li>AIOï¼šAsynchronous IO æ˜¯ NIO çš„å‡çº§ï¼Œä¹Ÿå« NIO2ï¼Œå®ç°äº†å¼‚æ­¥éå µå¡ IO ï¼Œå¼‚æ­¥ IO çš„æ“ä½œåŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶ã€‚</li>
</ul>
<p><strong>17. Files çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ</strong></p>
<ul>
<li>Files.exists()ï¼šæ£€æµ‹æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</li>
<li>Files.createFile()ï¼šåˆ›å»ºæ–‡ä»¶ã€‚</li>
<li>Files.createDirectory()ï¼šåˆ›å»ºæ–‡ä»¶å¤¹ã€‚</li>
<li>Files.delete()ï¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚</li>
<li>Files.copy()ï¼šå¤åˆ¶æ–‡ä»¶ã€‚</li>
<li>Files.move()ï¼šç§»åŠ¨æ–‡ä»¶ã€‚</li>
<li>Files.size()ï¼šæŸ¥çœ‹æ–‡ä»¶ä¸ªæ•°ã€‚</li>
<li>Files.read()ï¼šè¯»å–æ–‡ä»¶ã€‚</li>
<li>Files.write()ï¼šå†™å…¥æ–‡ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-1"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/>äºŒã€å®¹å™¨</h4>
<p><strong>18. java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ</strong> Â å¸¸ç”¨å®¹å™¨çš„å›¾å½•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/766ceefbcd2c4d9aba2ab75b131ce1e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=A78G82QBMj4yYqnZ2fp26Xah2As%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p><strong>19. Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>java.util.Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ï¼ˆé›†åˆç±»çš„ä¸€ä¸ªé¡¶çº§æ¥å£ï¼‰ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collection æ¥å£åœ¨ Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collection æ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ï¼Œå…¶ç›´æ¥ç»§æ‰¿æ¥å£æœ‰ List ä¸ Setã€‚</li>
<li>Collections åˆ™æ˜¯é›†åˆç±»çš„ä¸€ä¸ªå·¥å…·ç±»/å¸®åŠ©ç±»ï¼Œå…¶ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºå¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œæ’åºã€æœç´¢ä»¥åŠçº¿ç¨‹å®‰å…¨ç­‰å„ç§æ“ä½œã€‚</li>
</ul>
<p><strong>20. Listã€Setã€Map ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/480dbbdb54384356a1cb612a8fb905e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=3xN4cHRSQq9308aAyjneSD3Ijpw%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p><strong>21. HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>hashMap å»æ‰äº† HashTable çš„ contains æ–¹æ³•ï¼Œä½†æ˜¯åŠ ä¸Šäº† containsValueï¼ˆï¼‰å’Œ containsKeyï¼ˆï¼‰æ–¹æ³•ã€‚</li>
<li>hashTable åŒæ­¥çš„ï¼Œè€Œ HashMap æ˜¯éåŒæ­¥çš„ï¼Œæ•ˆç‡ä¸Šé€¼ hashTable è¦é«˜ã€‚</li>
<li>hashMap å…è®¸ç©ºé”®å€¼ï¼Œè€Œ hashTable ä¸å…è®¸ã€‚</li>
</ul>
<p><strong>22. å¦‚ä½•å†³å®šä½¿ç”¨ HashMap è¿˜æ˜¯ TreeMapï¼Ÿ</strong> Â å¯¹äºåœ¨ Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œå‡å¦‚ä½ éœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„ key é›†åˆè¿›è¡Œéå†ï¼ŒTreeMap æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚åŸºäºä½ çš„ collection çš„å¤§å°ï¼Œä¹Ÿè®¸å‘ HashMap ä¸­æ·»åŠ å…ƒç´ ä¼šæ›´å¿«ï¼Œå°† map æ¢ä¸º TreeMap è¿›è¡Œæœ‰åº key çš„éå†ã€‚</p>
<p><strong>23. è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ</strong> Â HashMap æ¦‚è¿°ï¼š HashMap æ˜¯åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£çš„éåŒæ­¥å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ null å€¼å’Œ null é”®ã€‚æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚HashMap çš„æ•°æ®ç»“æ„ï¼š åœ¨ java ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œæ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨è¿™ä¸¤ä¸ªåŸºæœ¬ç»“æ„æ¥æ„é€ çš„ï¼ŒHashMap ä¹Ÿä¸ä¾‹å¤–ã€‚HashMap å®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œé“¾è¡¨æ•£åˆ—â€çš„æ•°æ®ç»“æ„ï¼Œå³æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ã€‚</p>
<ul>
<li>HashSet åº•å±‚ç”± HashMap å®ç°</li>
<li>HashSet çš„å€¼å­˜æ”¾äº HashMap çš„ key ä¸Š</li>
<li>HashMap çš„ value ç»Ÿä¸€ä¸º PRESENT</li>
</ul>
<p><strong>25. ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â æœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯ ArrrayList åº•å±‚çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®ï¼Œè€Œ LinkedList çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯åŒå‘å¾ªç¯é“¾è¡¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ã€‚ä½¿ç”¨ä¸‹æ ‡è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼ŒArrayList çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œè€Œ LinkedList æ˜¯ O(n)ã€‚</p>
<p><strong>26. å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ</strong></p>
<ul>
<li>List è½¬æ¢æˆä¸ºæ•°ç»„ï¼šè°ƒç”¨ ArrayList çš„ toArray æ–¹æ³•ã€‚</li>
<li>æ•°ç»„è½¬æ¢æˆä¸º Listï¼šè°ƒç”¨ Arrays çš„ asList æ–¹æ³•ã€‚</li>
</ul>
<p><strong>27. ArrayList å’Œ Vector çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>Vector æ˜¯åŒæ­¥çš„ï¼Œè€Œ ArrayList ä¸æ˜¯ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å¯»æ±‚åœ¨è¿­ä»£çš„æ—¶å€™å¯¹åˆ—è¡¨è¿›è¡Œæ”¹å˜ï¼Œä½ åº”è¯¥ä½¿ç”¨ CopyOnWriteArrayListã€‚</li>
<li>ArrayList æ¯” Vector å¿«ï¼Œå®ƒå› ä¸ºæœ‰åŒæ­¥ï¼Œä¸ä¼šè¿‡è½½ã€‚</li>
<li>ArrayList æ›´åŠ é€šç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Collections å·¥å…·ç±»è½»æ˜“åœ°è·å–åŒæ­¥åˆ—è¡¨å’Œåªè¯»åˆ—è¡¨ã€‚</li>
</ul>
<p><strong>28. Array å’Œ ArrayList æœ‰ä½•åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>Array å¯ä»¥å®¹çº³åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ï¼Œè€Œ ArrayList åªèƒ½å®¹çº³å¯¹è±¡ã€‚</li>
<li>Array æ˜¯æŒ‡å®šå¤§å°çš„ï¼Œè€Œ ArrayList å¤§å°æ˜¯å›ºå®šçš„ã€‚</li>
<li>Array æ²¡æœ‰æä¾› ArrayList é‚£ä¹ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ addAllã€removeAll å’Œ iterator ç­‰ã€‚</li>
</ul>
<p><strong>29. åœ¨ Queue ä¸­</strong>Â pollÂ  <strong>()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong> Â poll() å’Œ remove() éƒ½æ˜¯ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ poll() åœ¨è·å–å…ƒç´ å¤±è´¥çš„æ—¶å€™ä¼šè¿”å›ç©ºï¼Œä½†æ˜¯ remove() å¤±è´¥çš„æ—¶å€™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><strong>30. å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ</strong></p>
<ul>
<li>vectorï¼šå°±æ¯” arraylist å¤šäº†ä¸ªåŒæ­¥åŒ–æœºåˆ¶ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ï¼Œå› ä¸ºæ•ˆç‡è¾ƒä½ï¼Œç°åœ¨å·²ç»ä¸å¤ªå»ºè®®ä½¿ç”¨ã€‚åœ¨ web åº”ç”¨ä¸­ï¼Œç‰¹åˆ«æ˜¯å‰å°é¡µé¢ï¼Œå¾€å¾€æ•ˆç‡ï¼ˆé¡µé¢å“åº”é€Ÿåº¦ï¼‰æ˜¯ä¼˜å…ˆè€ƒè™‘çš„ã€‚</li>
<li>statckï¼šå †æ ˆç±»ï¼Œå…ˆè¿›åå‡ºã€‚</li>
<li>hashtableï¼šå°±æ¯” hashmap å¤šäº†ä¸ªçº¿ç¨‹å®‰å…¨ã€‚</li>
<li>enumerationï¼šæšä¸¾ï¼Œç›¸å½“äºè¿­ä»£å™¨ã€‚</li>
</ul>
<p><strong>31. è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â è¿­ä»£å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥éå†å¹¶é€‰æ‹©åºåˆ—ä¸­çš„å¯¹è±¡ï¼Œè€Œå¼€å‘äººå‘˜ä¸éœ€è¦äº†è§£è¯¥åºåˆ—çš„åº•å±‚ç»“æ„ã€‚è¿­ä»£å™¨é€šå¸¸è¢«ç§°ä¸ºâ€œè½»é‡çº§â€å¯¹è±¡ï¼Œå› ä¸ºåˆ›å»ºå®ƒçš„ä»£ä»·å°ã€‚</p>
<p><strong>32. Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</strong> Â (1) ä½¿ç”¨æ–¹æ³• iterator()è¦æ±‚å®¹å™¨è¿”å›ä¸€ä¸ª Iteratorã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨ Iterator çš„ next()æ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æ³¨æ„ï¼šiterator()æ–¹æ³•æ˜¯ java.lang.Iterable æ¥å£,è¢« Collection ç»§æ‰¿ã€‚(2) ä½¿ç”¨ next()è·å¾—åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚(3) ä½¿ç”¨ hasNext()æ£€æŸ¥åºåˆ—ä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ ã€‚(4) ä½¿ç”¨ remove()å°†è¿­ä»£å™¨æ–°è¿”å›çš„å…ƒç´ åˆ é™¤ã€‚Iterator æ˜¯ Java è¿­ä»£å™¨æœ€ç®€å•çš„å®ç°ï¼Œä¸º List è®¾è®¡çš„ ListIterator å…·æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä»ä¸¤ä¸ªæ–¹å‘éå† Listï¼Œä¹Ÿå¯ä»¥ä» List ä¸­æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚</p>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
<blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aca73549ce1c4f05b4811376c4df151b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=Ndb%2FLrd3KgVqZvuBOW6ZYwCo5ew%3D" alt="c25310b285cd7198a33a66f22a71890.png" loading="lazy"/></p>
</blockquote>
<p><strong>33. Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>Iterator å¯ç”¨æ¥éå† Set å’Œ List é›†åˆï¼Œä½†æ˜¯ ListIterator åªèƒ½ç”¨æ¥éå† Listã€‚</li>
<li>Iterator å¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ŒListIterator æ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘ã€‚</li>
<li>ListIterator å®ç°äº† Iterator æ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šå¢åŠ å…ƒç´ ï¼Œæ›¿æ¢å…ƒç´ ï¼Œè·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œç­‰ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-2"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/>ä¸‰ã€å¤šçº¿ç¨‹</h4>
<p><strong>35. å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>å¹¶è¡Œæ˜¯æŒ‡ä¸¤ä¸ªæˆ–è€…å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿï¼›è€Œå¹¶å‘æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å‘ç”Ÿã€‚</li>
<li>å¹¶è¡Œæ˜¯åœ¨ä¸åŒå®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ï¼Œå¹¶å‘æ˜¯åœ¨åŒä¸€å®ä½“ä¸Šçš„å¤šä¸ªäº‹ä»¶ã€‚</li>
<li>åœ¨ä¸€å°å¤„ç†å™¨ä¸Šâ€œåŒæ—¶â€å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œåœ¨å¤šå°å¤„ç†å™¨ä¸ŠåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚å¦‚ hadoop åˆ†å¸ƒå¼é›†ç¾¤ã€‚</li>
</ul>
<p>æ‰€ä»¥å¹¶å‘ç¼–ç¨‹çš„ç›®æ ‡æ˜¯å……åˆ†çš„åˆ©ç”¨å¤„ç†å™¨çš„æ¯ä¸€ä¸ªæ ¸ï¼Œä»¥è¾¾åˆ°æœ€é«˜çš„å¤„ç†æ€§èƒ½ã€‚</p>
<p><strong>36. çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</strong> Â ç®€è€Œè¨€ä¹‹ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œå’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯ cpu è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ¯”ç¨‹åºæ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p>
<p><strong>37.</strong> Â å®ˆæŠ¤çº¿ç¨‹<strong>æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â å®ˆæŠ¤çº¿ç¨‹ï¼ˆå³ daemon threadï¼‰ï¼Œæ˜¯ä¸ªæœåŠ¡çº¿ç¨‹ï¼Œå‡†ç¡®åœ°æ¥è¯´å°±æ˜¯æœåŠ¡å…¶ä»–çš„çº¿ç¨‹ã€‚</p>
<p><strong>38. åˆ›å»ºçº¿ç¨‹æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</strong> Â â‘ . ç»§æ‰¿ Thread ç±»åˆ›å»ºçº¿ç¨‹ç±»â‘¡. é€šè¿‡ Runnable æ¥å£åˆ›å»ºçº¿ç¨‹ç±»â‘¢. é€šè¿‡ Callable å’Œ Future åˆ›å»ºçº¿ç¨‹</p>
<p><strong>39. è¯´ä¸€ä¸‹ runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>Runnable æ¥å£ä¸­çš„ run()æ–¹æ³•çš„è¿”å›å€¼æ˜¯ voidï¼Œå®ƒåšçš„äº‹æƒ…åªæ˜¯çº¯ç²¹åœ°å»æ‰§è¡Œ run()æ–¹æ³•ä¸­çš„ä»£ç è€Œå·²ï¼›</li>
<li>Callable æ¥å£ä¸­çš„ call()æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ˜¯ä¸€ä¸ªæ³›å‹ï¼Œå’Œ Futureã€FutureTask é…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœã€‚</li>
</ul>
<p><strong>40. çº¿ç¨‹æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</strong> Â çº¿ç¨‹é€šå¸¸éƒ½æœ‰äº”ç§çŠ¶æ€ï¼Œåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡å’Œæ­»äº¡ã€‚</p>
<p><strong>41. sleep() å’Œ wait() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong> Â sleep()ï¼šæ–¹æ³•æ˜¯çº¿ç¨‹ç±»ï¼ˆThreadï¼‰çš„é™æ€æ–¹æ³•ï¼Œè®©è°ƒç”¨çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œè®©å‡ºæ‰§è¡Œæœºä¼šç»™å…¶ä»–çº¿ç¨‹ï¼Œç­‰åˆ°ä¼‘çœ æ—¶é—´ç»“æŸåï¼Œçº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€å’Œå…¶ä»–çº¿ç¨‹ä¸€èµ·ç«äº‰ cpu çš„æ‰§è¡Œæ—¶é—´ã€‚å› ä¸º sleep() æ˜¯ static é™æ€çš„æ–¹æ³•ï¼Œä»–ä¸èƒ½æ”¹å˜å¯¹è±¡çš„æœºé”ï¼Œå½“ä¸€ä¸ª synchronized å—ä¸­è°ƒç”¨äº† sleep() æ–¹æ³•ï¼Œçº¿ç¨‹è™½ç„¶è¿›å…¥ä¼‘çœ ï¼Œä½†æ˜¯å¯¹è±¡çš„æœºé”æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹ä¾ç„¶æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ã€‚wait()ï¼šwait()æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ° wait æ–¹æ³•æ—¶ï¼Œå®ƒå°±è¿›å…¥åˆ°ä¸€ä¸ªå’Œè¯¥å¯¹è±¡ç›¸å…³çš„ç­‰å¾…æ± ï¼ŒåŒæ—¶é‡Šæ”¾å¯¹è±¡çš„æœºé”ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹èƒ½å¤Ÿè®¿é—®ï¼Œå¯ä»¥é€šè¿‡ notifyï¼ŒnotifyAll æ–¹æ³•æ¥å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚</p>
<p><strong>42. notify()å’Œ notifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ wait()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šå»ç«äº‰è¯¥å¯¹è±¡çš„é”ã€‚</li>
<li>å½“æœ‰çº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„ notifyAll()æ–¹æ³•ï¼ˆå”¤é†’æ‰€æœ‰ wait çº¿ç¨‹ï¼‰æˆ– notify()æ–¹æ³•ï¼ˆåªéšæœºå”¤é†’ä¸€ä¸ª wait çº¿ç¨‹ï¼‰ï¼Œè¢«å”¤é†’çš„çš„çº¿ç¨‹ä¾¿ä¼šè¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ä¸­ï¼Œé”æ± ä¸­çš„çº¿ç¨‹ä¼šå»ç«äº‰è¯¥å¯¹è±¡é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨äº† notify ååªè¦ä¸€ä¸ªçº¿ç¨‹ä¼šç”±ç­‰å¾…æ± è¿›å…¥é”æ± ï¼Œè€Œ notifyAll ä¼šå°†è¯¥å¯¹è±¡ç­‰å¾…æ± å†…çš„æ‰€æœ‰çº¿ç¨‹ç§»åŠ¨åˆ°é”æ± ä¸­ï¼Œç­‰å¾…é”ç«äº‰ã€‚</li>
<li>ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç«äº‰åˆ°å¯¹è±¡é”çš„æ¦‚ç‡å¤§ï¼Œå‡è‹¥æŸçº¿ç¨‹æ²¡æœ‰ç«äº‰åˆ°è¯¥å¯¹è±¡é”ï¼Œå®ƒè¿˜ä¼šç•™åœ¨é”æ± ä¸­ï¼Œå”¯æœ‰çº¿ç¨‹å†æ¬¡è°ƒç”¨ wait()æ–¹æ³•ï¼Œå®ƒæ‰ä¼šé‡æ–°å›åˆ°ç­‰å¾…æ± ä¸­ã€‚è€Œç«äº‰åˆ°å¯¹è±¡é”çš„çº¿ç¨‹åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œäº† synchronized ä»£ç å—ï¼Œå®ƒä¼šé‡Šæ”¾æ‰è¯¥å¯¹è±¡é”ï¼Œè¿™æ—¶é”æ± ä¸­çš„çº¿ç¨‹ä¼šç»§ç»­ç«äº‰è¯¥å¯¹è±¡é”ã€‚</li>
</ul>
<p><strong>43. çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong> Â start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è¿™æ—¶æ— éœ€ç­‰å¾… run æ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼› è¿™æ—¶æ­¤çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œ å¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤ Thread ç±»è°ƒç”¨æ–¹æ³• run()æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ è¿™é‡Œæ–¹æ³• run()ç§°ä¸ºçº¿ç¨‹ä½“ï¼Œå®ƒåŒ…å«äº†è¦æ‰§è¡Œçš„è¿™ä¸ªçº¿ç¨‹çš„å†…å®¹ï¼Œ Run æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶å CPU å†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚run()æ–¹æ³•æ˜¯åœ¨æœ¬çº¿ç¨‹é‡Œçš„ï¼Œåªæ˜¯çº¿ç¨‹é‡Œçš„ä¸€ä¸ªå‡½æ•°,è€Œä¸æ˜¯å¤šçº¿ç¨‹çš„ã€‚ å¦‚æœç›´æ¥è°ƒç”¨ run(),å…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ï¼Œç›´æ¥å¾…ç”¨ run()æ–¹æ³•å¿…é¡»ç­‰å¾… run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ‰€ä»¥æ‰§è¡Œè·¯å¾„è¿˜æ˜¯åªæœ‰ä¸€æ¡ï¼Œæ ¹æœ¬å°±æ²¡æœ‰çº¿ç¨‹çš„ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶è¦ä½¿ç”¨ start()æ–¹æ³•è€Œä¸æ˜¯ run()æ–¹æ³•ã€‚</p>
<p><strong>44. åˆ›å»º</strong>çº¿ç¨‹æ± <strong>æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</strong> Â â‘ . newFixedThreadPool(int nThreads)åˆ›å»ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œæ¯å½“æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§æ•°é‡ï¼Œè¿™æ—¶çº¿ç¨‹è§„æ¨¡å°†ä¸å†å˜åŒ–ï¼Œå½“çº¿ç¨‹å‘ç”Ÿæœªé¢„æœŸçš„é”™è¯¯è€Œç»“æŸæ—¶ï¼Œçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚â‘¡. newCachedThreadPool()åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± çš„è§„æ¨¡è¶…è¿‡äº†å¤„ç†éœ€æ±‚ï¼Œå°†è‡ªåŠ¨å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè€Œå½“éœ€æ±‚å¢åŠ æ—¶ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨æ·»åŠ æ–°çº¿ç¨‹ï¼Œçº¿ç¨‹æ± çš„è§„æ¨¡ä¸å­˜åœ¨ä»»ä½•é™åˆ¶ã€‚â‘¢. newSingleThreadExecutor()è¿™æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„ Executorï¼Œå®ƒåˆ›å»ºå•ä¸ªå·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœè¿™ä¸ªçº¿ç¨‹å¼‚å¸¸ç»“æŸï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¥æ›¿ä»£å®ƒï¼›å®ƒçš„ç‰¹ç‚¹æ˜¯èƒ½ç¡®ä¿ä¾ç…§ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­çš„é¡ºåºæ¥ä¸²è¡Œæ‰§è¡Œã€‚â‘£. newScheduledThreadPool(int corePoolSize)åˆ›å»ºäº†ä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œè€Œä¸”ä»¥å»¶è¿Ÿæˆ–å®šæ—¶çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼äº Timerã€‚</p>
<p><strong>45. çº¿ç¨‹æ± éƒ½æœ‰å“ªäº›çŠ¶æ€ï¼Ÿ</strong> Â çº¿ç¨‹æ± æœ‰ 5 ç§çŠ¶æ€ï¼šRunningã€ShutDownã€Stopã€Tidyingã€Terminatedã€‚çº¿ç¨‹æ± å„ä¸ªçŠ¶æ€åˆ‡æ¢æ¡†æ¶å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31e1da68bb9f48d7a6eceb782060b8a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=hd1K1qj9KQHyQX1vn%2Fo8b30G2N8%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p><strong>46. çº¿ç¨‹æ± ä¸­ submit()å’Œ execute()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>æ¥æ”¶çš„å‚æ•°ä¸ä¸€æ ·</li>
<li>submit æœ‰è¿”å›å€¼ï¼Œè€Œ execute æ²¡æœ‰</li>
<li>submit æ–¹ä¾¿ Exception å¤„ç†</li>
</ul>
<p><strong>47. åœ¨ java ç¨‹åºä¸­æ€ä¹ˆä¿è¯å¤šçº¿ç¨‹çš„è¿è¡Œå®‰å…¨ï¼Ÿ</strong> Â çº¿ç¨‹å®‰å…¨åœ¨ä¸‰ä¸ªæ–¹é¢ä½“ç°ï¼š</p>
<ul>
<li>åŸå­æ€§ï¼šæä¾›äº’æ–¥è®¿é—®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œï¼ˆatomic,synchronizedï¼‰ï¼›</li>
<li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜çš„ä¿®æ”¹å¯ä»¥åŠæ—¶åœ°è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ï¼Œï¼ˆsynchronized,volatileï¼‰ï¼›</li>
<li>æœ‰åºæ€§ï¼šä¸€ä¸ªçº¿ç¨‹è§‚å¯Ÿå…¶ä»–çº¿ç¨‹ä¸­çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºï¼Œç”±äºæŒ‡ä»¤é‡æ’åºï¼Œè¯¥è§‚å¯Ÿç»“æœä¸€èˆ¬æ‚ä¹±æ— åºï¼Œï¼ˆhappens-before åŸåˆ™ï¼‰ã€‚</li>
</ul>
<p><strong>48. å¤šçº¿ç¨‹é”çš„å‡çº§åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â åœ¨ Java ä¸­ï¼Œé”å…±æœ‰ 4 ç§çŠ¶æ€ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼šæ— çŠ¶æ€é”ï¼Œåå‘é”ï¼Œè½»é‡çº§é”å’Œé‡é‡çº§é”çŠ¶æ€ï¼Œè¿™å‡ ä¸ªçŠ¶æ€ä¼šéšç€ç«äº‰æƒ…å†µé€æ¸å‡çº§ã€‚é”å¯ä»¥å‡çº§ä½†ä¸èƒ½é™çº§ã€‚<a href="https://link.juejin.cn/?target=https%3A%2F%2Fxie.infoq.cn%2Flink%3Ftarget%3Dhttps%253A%252F%252Fzhida.zhihu.com%252Fsearch%253Fcontent_id%253D242258297%2526content_type%253DArticle%2526match_order%253D1%2526q%253D%2525E9%252594%252581%2525E5%25258D%252587%2525E7%2525BA%2525A7%2526zhida_source%253Dentity" title="https://link.juejin.cn/?target=https%3A%2F%2Fxie.infoq.cn%2Flink%3Ftarget%3Dhttps%253A%252F%252Fzhida.zhihu.com%252Fsearch%253Fcontent_id%253D242258297%2526content_type%253DArticle%2526match_order%253D1%2526q%253D%2525E9%252594%252581%2525E5%25258D%252587%2525E7%2525BA%2525A7%2526zhida_source%253Dentity" target="_blank">é”å‡çº§</a>çš„å›¾ç¤ºè¿‡ç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d56e504a6ff404a82713b5344cd37cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763620018&amp;x-signature=aTevoZMv8MpZ%2BQDH2npclSOdNbg%3D" alt="" loading="lazy"/></p>
<p>â€‹</p>
<p><strong>49. ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ</strong> Â æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>
<p><strong>50. æ€ä¹ˆé˜²æ­¢æ­»é”ï¼Ÿ</strong> Â æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</p>
<ul>
<li>äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿›è¡Œè®¿é—®ï¼Œè‹¥å…¶ä»–è¿›ç¨‹è®¿é—®è¯¥èµ„æºï¼Œåªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰è¯¥èµ„æºçš„è¿›ç¨‹ä½¿ç”¨å®Œæˆåé‡Šæ”¾è¯¥èµ„æº</li>
<li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šè¿›ç¨‹è·å¾—ä¸€å®šçš„èµ„æºä¹‹åï¼Œåˆå¯¹å…¶ä»–èµ„æºå‘å‡ºè¯·æ±‚ï¼Œä½†æ˜¯è¯¥èµ„æºå¯èƒ½è¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤äº‹è¯·æ±‚é˜»å¡ï¼Œä½†åˆå¯¹è‡ªå·±è·å¾—çš„èµ„æºä¿æŒä¸æ”¾</li>
<li>ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šæ˜¯æŒ‡è¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªå®Œæˆä½¿ç”¨ä¹‹å‰ï¼Œä¸å¯è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œåè‡ªå·±é‡Šæ”¾</li>
<li>ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šæ˜¯æŒ‡è¿›ç¨‹å‘ç”Ÿæ­»é”åï¼Œè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»</li>
</ul>
<p><strong>51. ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</strong> Â çº¿ç¨‹å±€éƒ¨å˜é‡æ˜¯å±€é™äºçº¿ç¨‹å†…éƒ¨çš„å˜é‡ï¼Œå±äºçº¿ç¨‹è‡ªèº«æ‰€æœ‰ï¼Œä¸åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«ã€‚Java æä¾› ThreadLocal ç±»æ¥æ”¯æŒçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ˜¯ä¸€ç§å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨ç®¡ç†ç¯å¢ƒä¸‹ï¼ˆå¦‚ web æœåŠ¡å™¨ï¼‰ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·¥ä½œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ¯”ä»»ä½•åº”ç”¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½è¦é•¿ã€‚ä»»ä½•çº¿ç¨‹å±€éƒ¨å˜é‡ä¸€æ—¦åœ¨å·¥ä½œå®Œæˆåæ²¡æœ‰é‡Šæ”¾ï¼ŒJava åº”ç”¨å°±å­˜åœ¨å†…å­˜æ³„éœ²çš„é£é™©ã€‚</p>
<p><strong>52.è¯´ä¸€ä¸‹ synchronized åº•å±‚å®ç°åŸç†ï¼Ÿ</strong> Â synchronized å¯ä»¥ä¿è¯æ–¹æ³•æˆ–è€…ä»£ç å—åœ¨è¿è¡Œæ—¶ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è¿›å…¥åˆ°ä¸´ç•ŒåŒºï¼ŒåŒæ—¶å®ƒè¿˜å¯ä»¥ä¿è¯å…±äº«å˜é‡çš„å†…å­˜å¯è§æ€§ã€‚Java ä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œè¿™æ˜¯ synchronized å®ç°åŒæ­¥çš„åŸºç¡€ï¼š</p>
<ul>
<li>æ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</li>
<li>é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„ class å¯¹è±¡</li>
<li>åŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</li>
</ul>
<p><strong>53. synchronized å’Œ volatile çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>volatile æœ¬è´¨æ˜¯åœ¨å‘Šè¯‰ jvm å½“å‰å˜é‡åœ¨å¯„å­˜å™¨ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼› synchronized åˆ™æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚</li>
<li>volatile ä»…èƒ½ä½¿ç”¨åœ¨å˜é‡çº§åˆ«ï¼›synchronized åˆ™å¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€å’Œç±»çº§åˆ«çš„ã€‚</li>
<li>volatile ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œ synchronized åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§ã€‚</li>
<li>volatile ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ã€‚</li>
<li>volatile æ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronized æ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</li>
</ul>
<p><strong>54. synchronized å’Œ Lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>é¦–å…ˆ synchronized æ˜¯ java å†…ç½®å…³é”®å­—ï¼Œåœ¨ jvm å±‚é¢ï¼ŒLock æ˜¯ä¸ª java ç±»ï¼›</li>
<li>synchronized æ— æ³•åˆ¤æ–­æ˜¯å¦è·å–é”çš„çŠ¶æ€ï¼ŒLock å¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼›</li>
<li>synchronized ä¼šè‡ªåŠ¨é‡Šæ”¾é”(a çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ä¼šé‡Šæ”¾é” ï¼›b çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä¼šé‡Šæ”¾é”)ï¼ŒLock éœ€åœ¨ finally ä¸­æ‰‹å·¥é‡Šæ”¾é”ï¼ˆunlock()æ–¹æ³•é‡Šæ”¾é”ï¼‰ï¼Œå¦åˆ™å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”ï¼›</li>
<li>ç”¨ synchronized å…³é”®å­—çš„ä¸¤ä¸ªçº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2ï¼Œå¦‚æœå½“å‰çº¿ç¨‹ 1 è·å¾—é”ï¼Œçº¿ç¨‹ 2 çº¿ç¨‹ç­‰å¾…ã€‚å¦‚æœçº¿ç¨‹ 1 é˜»å¡ï¼Œçº¿ç¨‹ 2 åˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€Œ Lock é”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ï¼Œå¦‚æœå°è¯•è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…å°±ç»“æŸäº†ï¼›</li>
<li>synchronized çš„é”å¯é‡å…¥ã€ä¸å¯ä¸­æ–­ã€éå…¬å¹³ï¼Œè€Œ Lock é”å¯é‡å…¥ã€å¯åˆ¤æ–­ã€å¯å…¬å¹³ï¼ˆä¸¤è€…çš†å¯ï¼‰ï¼›</li>
<li>Lock é”é€‚åˆå¤§é‡åŒæ­¥çš„ä»£ç çš„åŒæ­¥é—®é¢˜ï¼Œsynchronized é”é€‚åˆä»£ç å°‘é‡çš„åŒæ­¥é—®é¢˜ã€‚</li>
</ul>
<p><strong>55. synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Â synchronized æ˜¯å’Œ ifã€elseã€forã€while ä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚</p>
<ul>
<li>ReentrantLock å¯ä»¥å¯¹è·å–é”çš„ç­‰å¾…æ—¶é—´è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·å°±é¿å…äº†æ­»é”</li>
<li>ReentrantLock å¯ä»¥è·å–å„ç§é”çš„ä¿¡æ¯</li>
<li>ReentrantLock å¯ä»¥çµæ´»åœ°å®ç°å¤šè·¯é€šçŸ¥</li>
</ul>
<p>å¦å¤–ï¼ŒäºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„:ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„ park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark wordã€‚</p>
<p><strong>56. è¯´ä¸€ä¸‹ atomic çš„åŸç†ï¼Ÿ</strong> Â Atomic åŒ…ä¸­çš„ç±»åŸºæœ¬çš„ç‰¹æ€§å°±æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å•ä¸ªï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»å‹åŠå¼•ç”¨ç±»å‹ï¼‰å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œå…·æœ‰æ’ä»–æ€§ï¼Œå³å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹è¯¥å˜é‡çš„å€¼è¿›è¡Œæ›´æ–°æ—¶ï¼Œä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸï¼Œè€ŒæœªæˆåŠŸçš„çº¿ç¨‹å¯ä»¥å‘è‡ªæ—‹é”ä¸€æ ·ï¼Œç»§ç»­å°è¯•ï¼Œä¸€ç›´ç­‰åˆ°æ‰§è¡ŒæˆåŠŸã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target="/>å››ã€åå°„</h4>
<p><strong>57. ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</strong> Â åå°„ä¸»è¦æ˜¯æŒ‡ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ› Java åå°„ï¼šåœ¨ Java è¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œèƒ½å¦çŸ¥é“è¿™ä¸ªç±»æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ï¼Ÿå¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¦è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³• Java åå°„æœºåˆ¶ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</li>
</ul>
<p><strong>58. ä»€ä¹ˆæ˜¯ java åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ</strong> Â ç®€å•è¯´å°±æ˜¯ä¸ºäº†ä¿å­˜åœ¨å†…å­˜ä¸­çš„å„ç§å¯¹è±¡çš„çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹å˜é‡ï¼Œä¸æ˜¯æ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥æŠŠä¿å­˜çš„å¯¹è±¡çŠ¶æ€å†è¯»å‡ºæ¥ã€‚è™½ç„¶ä½ å¯ä»¥ç”¨ä½ è‡ªå·±çš„å„ç§å„æ ·çš„æ–¹æ³•æ¥ä¿å­˜ object statesï¼Œä½†æ˜¯ Java ç»™ä½ æä¾›ä¸€ç§åº”è¯¥æ¯”ä½ è‡ªå·±å¥½çš„ä¿å­˜å¯¹è±¡çŠ¶æ€çš„æœºåˆ¶ï¼Œé‚£å°±æ˜¯åºåˆ—åŒ–ã€‚ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼šaï¼‰å½“ä½ æƒ³æŠŠçš„å†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶å€™ï¼›bï¼‰å½“ä½ æƒ³ç”¨å¥—æ¥å­—åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„æ—¶å€™ï¼›cï¼‰å½“ä½ æƒ³é€šè¿‡ RMI ä¼ è¾“å¯¹è±¡çš„æ—¶å€™ï¼›</p>
<p><strong>59. åŠ¨æ€ä»£ç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨ï¼Ÿ</strong> Â åŠ¨æ€ä»£ç†ï¼šå½“æƒ³è¦ç»™å®ç°äº†æŸä¸ªæ¥å£çš„ç±»ä¸­çš„æ–¹æ³•ï¼ŒåŠ ä¸€äº›é¢å¤–çš„å¤„ç†ã€‚æ¯”å¦‚è¯´åŠ æ—¥å¿—ï¼ŒåŠ äº‹åŠ¡ç­‰ã€‚åŠ¨æ€ä»£ç†çš„åº”ç”¨ï¼š</p>
<ul>
<li>Spring çš„ AOP</li>
<li>åŠ äº‹åŠ¡</li>
<li>åŠ æƒé™</li>
<li>åŠ æ—¥å¿—</li>
</ul>
<p><strong>60. æ€ä¹ˆå®ç°åŠ¨æ€ä»£ç†</strong>é¦–å…ˆå¿…é¡»å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè¿˜è¦æœ‰ä¸€ä¸ª InvocationHandler(å°†å®ç°æ¥å£çš„ç±»çš„å¯¹è±¡ä¼ é€’ç»™å®ƒ)å¤„ç†ç±»ã€‚å†æœ‰ä¸€ä¸ªå·¥å…·ç±» Proxy(ä¹ æƒ¯æ€§å°†å…¶ç§°ä¸ºä»£ç†ç±»ï¼Œå› ä¸ºè°ƒç”¨ä»–çš„ newInstance()å¯ä»¥äº§ç”Ÿä»£ç†å¯¹è±¡,å…¶å®ä»–åªæ˜¯ä¸€ä¸ªäº§ç”Ÿä»£ç†å¯¹è±¡çš„å·¥å…·ç±»ï¼‰ã€‚åˆ©ç”¨åˆ° InvocationHandlerï¼Œæ‹¼æ¥ä»£ç†ç±»æºç ï¼Œå°†å…¶ç¼–è¯‘ç”Ÿæˆä»£ç†ç±»çš„äºŒè¿›åˆ¶ç ï¼Œåˆ©ç”¨åŠ è½½å™¨åŠ è½½ï¼Œå¹¶å°†å…¶å®ä¾‹åŒ–äº§ç”Ÿä»£ç†å¯¹è±¡ï¼Œæœ€åè¿”å›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG Chunking 2.0:æå‡æ–‡æ¡£åˆ†å—æ•ˆæœçš„ä¸€äº›ç»éªŒ]]></title>    <link>https://juejin.cn/post/7571830282849828915</link>    <guid>https://juejin.cn/post/7571830282849828915</guid>    <pubDate>2025-11-13T06:22:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571830282849828915" data-draft-id="7571786149590990899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG Chunking 2.0:æå‡æ–‡æ¡£åˆ†å—æ•ˆæœçš„ä¸€äº›ç»éªŒ"/> <meta itemprop="keywords" content="LLM,ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-13T06:22:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±åº¦å­¦ä¹ æœºå™¨"/> <meta itemprop="url" content="https://juejin.cn/user/486421344552179"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG Chunking 2.0:æå‡æ–‡æ¡£åˆ†å—æ•ˆæœçš„ä¸€äº›ç»éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/486421344552179/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±åº¦å­¦ä¹ æœºå™¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:22:47.000Z" title="Thu Nov 13 2025 06:22:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„RAGç³»ç»Ÿé‡Œï¼Œæ–‡æœ¬åˆ†å—æ˜¯éå¸¸å…³é”®çš„ä¸€æ­¥ã€‚åˆ†å—åšå¾—å¥½ï¼Œåç»­çš„å‘é‡æ£€ç´¢ã€ç»“æœå¬å›å’Œç”Ÿæˆè´¨é‡éƒ½ä¼šæ›´ç¨³æ›´å‡†ã€‚é™¤äº†å¤§å®¶å¸¸ç”¨çš„å›ºå®šå¤§å°ã€é€’å½’ã€è¯­ä¹‰ã€æŒ‰æ–‡æ¡£ç­‰åˆ‡æ³•ï¼Œè‡³å°‘è¿˜æœ‰å¥½å‡ ç§ç­–ç•¥ï¼Œèƒ½æ˜¾è‘—æå‡æ£€ç´¢å‡†ç¡®ç‡ã€ä¿æŒä¸Šä¸‹æ–‡è¿ç»­ï¼Œå¹¶é€‚é…ä¸åŒä»»åŠ¡ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. æ»‘åŠ¨çª—å£åˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>é¦–å…ˆè®¾å®šä¸€ä¸ªå›ºå®šå¤§å°çš„çª—å£ï¼Œå†æŒ‰è®¾å®šçš„é‡å é‡å‘å‰æ»‘åŠ¨ï¼Œç”Ÿæˆä¸€ç³»åˆ—é‡å å—ï¼Œè¿™æ ·è·¨å—è¾¹ç•Œçš„ä¸Šä¸‹æ–‡æ›´ä¸å®¹æ˜“ä¸¢ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>é€‚åˆè¿½è¸ªé•¿æ–‡æ¡£é‡Œçš„ã€Œè¿›å±•ã€ã€Œæ¼”å˜ã€ã€Œå…³ç³»å˜åŒ–ã€ï¼Œæ¯”å¦‚åŒ»ç–—è®°å½•ã€æ—¥å¿—ã€å†å²æŠ¥å‘Šç­‰ã€‚</p>
<p><strong>Pythonç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sliding_window_chunks</span>(<span class="hljs-params">text, window_size=<span class="hljs-number">500</span>, overlap=<span class="hljs-number">100</span></span>):
    words = text.split()
    chunks = []
    start = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> start &lt; <span class="hljs-built_in">len</span>(words):
        end = <span class="hljs-built_in">min</span>(start + window_size, <span class="hljs-built_in">len</span>(words))
        chunk = <span class="hljs-string">" "</span>.join(words[start:end])
        chunks.append(chunk)
        <span class="hljs-keyword">if</span> end == <span class="hljs-built_in">len</span>(words):
            <span class="hljs-keyword">break</span>
        start = end - overlap
    <span class="hljs-keyword">return</span> chunks

<span class="hljs-comment"># ç”¨æ³•ç¤ºä¾‹</span>
doc = <span class="hljs-string">"""...ä¸€æ®µéå¸¸é•¿çš„æ–‡æœ¬..."""</span>
chunks = sliding_window_chunks(doc, window_size=<span class="hljs-number">500</span>, overlap=<span class="hljs-number">100</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Generated <span class="hljs-subst">{<span class="hljs-built_in">len</span>(chunks)}</span> chunks."</span>)
</code></pre>
<blockquote>
<p>é‡å æ¯”ä¾‹å¯æŒ‰ä»»åŠ¡é‡è¦æ€§è°ƒæ•´ï¼Œæ¯”å¦‚åŒ»ç–—è®°å½•è¿™äº›é«˜ä¿¡æ¯å¯†åº¦çš„å¯ä»¥è¾¾åˆ°20%å·¦å³ï¼Œè€Œæ™®é€šæ–‡æ¡£åªéœ€10%å·¦å³å³å¯ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e6a3cb804c44bfbcf010fc92ce4ab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=lR8rPLDqyMzwovHZw8h95ucGguo%3D" alt="sliding-window.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">2. è‡ªé€‚åº”åˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>ä¸åŒäºå›ºå®šå¤§å°ï¼Œè‡ªé€‚åº”åˆ†å—ä¼šå°½é‡æŠŠè‡ªç„¶æ–‡æ¡£å•å…ƒï¼ˆå¦‚æ¡æ¬¾ã€æ®µè½ã€ç« èŠ‚ï¼‰æ”¾åœ¨åŒä¸€ä¸ªå—é‡Œï¼ŒåŒæ—¶éµå®ˆæœ€å¤§tokenæ•°çº¦æŸã€‚
è¿™ç§æ–¹æ³•å…¸å‹çš„åº”ç”¨æ˜¯æ³•å¾‹æ³•è§„ç­‰æ–‡æ¡£ï¼Œå› ä¸ºè¿™äº›æ–‡æ¡£é€šå¸¸æœ‰æ˜ç¡®çš„ç« èŠ‚æˆ–æ®µè½ç»“æ„ï¼Œå¯æŒ‰ã€Œæ¯ä¸€ç« ã€ã€Œæ¯ä¸€èŠ‚ã€è¿›è¡Œåˆ†å—å¤„ç†ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>éå¸¸é€‚åˆç»“æ„åŒ–æ–‡æ¡£ï¼šæ³•å¾‹åˆåŒã€åè®®ã€ç™½çš®ä¹¦ã€æ”¿ç­–æ–‡ä»¶ç­‰ã€‚</p>
<p><strong>Pythonç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> re

<span class="hljs-keyword">def</span> <span class="hljs-title function_">adaptive_chunking</span>(<span class="hljs-params">text, min_tokens=<span class="hljs-number">800</span>, max_tokens=<span class="hljs-number">1200</span>, boundary_pattern=<span class="hljs-string">r"SECTION\s+\d+:"</span></span>):
    sections = re.split(boundary_pattern, text)
    chunks = []
    <span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> sections:
        <span class="hljs-comment"># ç®€åŒ–ï¼šå¦‚æœ sec å¾ˆé•¿ï¼Œè¿›ä¸€æ­¥æ‹†åˆ†</span>
        words = sec.split()
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(words) &lt;= max_tokens:
            chunks.append(sec.strip())
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># ç®€å•æŒ‰å¥å­æ‹†</span>
            current = []
            <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> words:
                current.append(w)
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(current) &gt;= max_tokens:
                    chunks.append(<span class="hljs-string">" "</span>.join(current))
                    current = []
            <span class="hljs-keyword">if</span> current:
                chunks.append(<span class="hljs-string">" "</span>.join(current))
    <span class="hljs-keyword">return</span> chunks

<span class="hljs-comment"># ç”¨æ³•</span>
contract_text = <span class="hljs-string">"""SECTION 1: ... SECTION 2: ..."""</span>
chunks = adaptive_chunking(contract_text, min_tokens=<span class="hljs-number">800</span>, max_tokens=<span class="hljs-number">1200</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(chunks))
</code></pre>
<blockquote>
<p>éœ€è¦æ ¹æ®æ–‡æ¡£ç±»å‹ï¼Œä½¿ç”¨æ­£ç¡®çš„æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«è¾¹ç•Œï¼Œä»è€Œæ¥æé«˜è´¨é‡ã€‚
æ­¤å¤–ï¼Œåº”è¯¥å°½é‡é¿å…åœ¨é€»è¾‘å•å…ƒä¸­é—´ç¡¬æ‹†ï¼Œå¦åˆ™ä¸Šä¸‹æ–‡å®¹æ˜“è¢«ç ´åã€‚é™¤éå—çš„å¤§å°ä»æ—§ä¸æ»¡è¶³è¦æ±‚ï¼Œæ‰å…è®¸åœ¨é€»è¾‘å•å…ƒä¸­é—´è¿›è¡Œæ‹†åˆ†ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1b408a0a4c416d93930684ba836b43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=u1Dd9CXTquEbVYKwtG47uxQ0HFg%3D" alt="adaptive-chunking.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">3. åŸºäºå®ä½“åˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>å…ˆåšå‘½åå®ä½“è¯†åˆ«ï¼Œå†æŒ‰å®ä½“æŠŠç›¸å…³å¥å­èšåˆ°åŒä¸€å—é‡Œï¼Œè€Œä¸æ˜¯åªæŒ‰åŸæ–‡é¡ºåºåˆ‡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>é€‚åˆçŸ¥è¯†åº“ã€ä»¥å®ä½“ä¸ºæ ¸å¿ƒçš„QAã€æ–°é—»æ¡£æ¡ˆæ£€ç´¢ç­‰ã€‚æ¯”å¦‚é—®ã€ŒæŸæŸäººè¿™å‘¨åšäº†ä»€ä¹ˆï¼Ÿã€ï¼Œäº‹å…ˆæŠŠè¯¥å®ä½“ç›¸å…³å†…å®¹èšåˆ°ä¸€èµ·ï¼Œæ£€ç´¢æ›´é«˜æ•ˆã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> spacy
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

nlp = spacy.load(<span class="hljs-string">"en_core_web_sm"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">entity_based_chunks</span>(<span class="hljs-params">text</span>):
    doc = nlp(text)
    entity_map = defaultdict(<span class="hljs-built_in">list</span>)
    <span class="hljs-keyword">for</span> sent <span class="hljs-keyword">in</span> doc.sents:
        ents = {ent.text <span class="hljs-keyword">for</span> ent <span class="hljs-keyword">in</span> sent.ents}
        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> ents:
            entity_map[e].append(sent.text)
    <span class="hljs-keyword">return</span> {entity: <span class="hljs-string">" "</span>.join(sents) <span class="hljs-keyword">for</span> entity, sents <span class="hljs-keyword">in</span> entity_map.items()}

text = <span class="hljs-string">"""Elon Musk announced a new AI initiative. Tesla unveiled its Model Y refresh. SpaceX launched its Starship test flight."""</span>
chunks = entity_based_chunks(text)
<span class="hljs-keyword">for</span> entity, chunk <span class="hljs-keyword">in</span> chunks.items():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Entity: <span class="hljs-subst">{entity}</span>\nChunk: <span class="hljs-subst">{chunk}</span>\n"</span>)
</code></pre>
<blockquote>
<p>å¯ç”¨ç‰¹å®šçš„NERæ¨¡å‹æ¥è¯†åˆ«å®ä½“ã€‚
æ¯ä¸ªå®ä½“ç”Ÿæˆä¸€ä¸ªå—æ—¶ï¼Œæ³¨æ„å¥å­å¯èƒ½å±äºå¤šä¸ªå®ä½“ï¼Œå­˜åœ¨é‡å ï¼Œå¯ä»¥æŒ‰ç…§é‡è¦æ€§æˆ–è€…å…¶ä»–ç­–ç•¥è¿›è¡Œå½’ç±»ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a1be4af364441c88b81b4a6ade0118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=LiXIBD4oHZEVQuXAZKqf8Uzk2bs%3D" alt="entity-based.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">4. æ··åˆåˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯ä»¥æŠŠå¤šç§åˆ†å—ç­–ç•¥ç»„æˆPipelineï¼šå…ˆæŒ‰ç»“æ„æ‹†åˆ†ï¼Œå†åšè¯­ä¹‰èšç±»ï¼Œæœ€ååšå®ä½“ä¿ç•™ã€‚è¿™æ ·èƒ½å…¼é¡¾ç»“æ„ã€è¯­ä¹‰å’Œå®ä½“ä¸‰æ–¹é¢çš„ä¼˜åŠ¿ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>é€‚åˆæŠ€æœ¯æ–‡æ¡£ã€API æ–‡æ¡£ã€è½¯ä»¶è¯´æ˜ã€æ··åˆå†…å®¹ï¼ˆæ–‡æœ¬ + ä»£ç ï¼‰ç­‰ã€‚å•ä¸€ç­–ç•¥å¾ˆéš¾åŒæ—¶å…¼é¡¾ç»“æ„å®Œæ•´æ€§ã€è¯­ä¹‰èšåˆå’Œå®ä½“è¯†åˆ«æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ··åˆç­–ç•¥ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">hybrid_chunking</span>(<span class="hljs-params">text</span>):
    <span class="hljs-comment"># Step1: Recursive split by headings</span>
    sections = text.split(<span class="hljs-string">"\n## "</span>)
    chunks_stage1 = [sec <span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> sections]
    <span class="hljs-comment"># Step2: Within each section, semantic cluster paragraphs (reuse previous code)</span>
    paragraphs = [sec.split(<span class="hljs-string">"\n"</span>) <span class="hljs-keyword">for</span> sec <span class="hljs-keyword">in</span> chunks_stage1]
    chunks_stage2 = []
    <span class="hljs-keyword">for</span> paras <span class="hljs-keyword">in</span> paragraphs:
        chunks_stage2.extend(topic_based_chunks(paras, n_clusters=<span class="hljs-number">2</span>))
    <span class="hljs-comment"># Step3: Entity preservation: ensure entity sentences stay with their chunk</span>
    final_chunks = []
    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> chunks_stage2:
        <span class="hljs-comment"># simple heuristic: if entity appears, include nearby sentences</span>
        final_chunks.append(chunk)
    <span class="hljs-keyword">return</span> final_chunks

text = <span class="hljs-string">"""## Authentication Methods â€¦ ## Error Handling â€¦ ## Rate Limiting â€¦ """</span>
chunks = hybrid_chunking(text)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(chunks))
</code></pre>
<blockquote>
<p>Pipelineå¯ä»¥æŒ‰ç…§è¿™ç§é¡ºåºå¤„ç†ï¼šç»“æ„ â†’ è¯­ä¹‰ â†’ å®ä½“ï¼Œç”±ç®€åˆ°éš¾ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e947aa516af848a2808a90a23096d3b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=Mv42sZa%2FbJ%2By7Uw%2FyY09GAMkxwg%3D" alt="hybrid-pipeline.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">5. ä»»åŠ¡æ„ŸçŸ¥åˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>æ ¹æ®ä¸‹æ¸¸ä»»åŠ¡ç±»å‹ï¼ˆå¦‚æ‘˜è¦ã€æ£€ç´¢ã€é—®ç­”ç­‰ä¸åŒéœ€æ±‚ï¼‰é€‰æ‹©ä¸åŒåˆ†å—è§„åˆ™ã€‚åŒä¸€å†…å®¹å¯ä»¥é’ˆå¯¹ä¸åŒä»»åŠ¡ç”Ÿæˆä¸åŒçš„åˆ†å—æ–¹æ¡ˆã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>æ¯”å¦‚å¯¹ä»£ç åº“åšæ‘˜è¦æ—¶ï¼Œç”¨æ›´å°çš„å‡½æ•°çº§åˆ†å—ï¼›åšæ£€ç´¢æ—¶ï¼ŒæŒ‰å‡½æ•°ç­¾åï¼‹æ–‡æ¡£å­—ç¬¦ä¸²æˆå—ï¼›åšQAæ—¶ï¼ŒæŒ‰ç±»æˆ–æ¨¡å—çº§åˆ«æˆå—ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">task_aware_chunking</span>(<span class="hljs-params">code_text, task=<span class="hljs-string">'search'</span></span>):
    <span class="hljs-keyword">if</span> task == <span class="hljs-string">'summarization'</span>:
        <span class="hljs-comment"># chunk size small: 20-30 lines per function</span>
        <span class="hljs-keyword">return</span> code_text.split(<span class="hljs-string">"\n\n"</span>)  <span class="hljs-comment"># ç®€åŒ–ç‰ˆ</span>
    <span class="hljs-keyword">elif</span> task == <span class="hljs-string">'search'</span>:
        <span class="hljs-comment"># chunk: function signature + docstring</span>
        chunks = []
        <span class="hljs-keyword">for</span> func <span class="hljs-keyword">in</span> code_text.split(<span class="hljs-string">"def "</span>):
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> func.strip(): <span class="hljs-keyword">continue</span>
            chunks.append(<span class="hljs-string">"def "</span> + func.split(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">return</span> chunks
    <span class="hljs-keyword">elif</span> task == <span class="hljs-string">'qa'</span>:
        <span class="hljs-comment"># chunk: entire class definitions (~100-200 lines)</span>
        <span class="hljs-keyword">return</span> code_text.split(<span class="hljs-string">"class "</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> [code_text]

code = <span class="hljs-string">"""class AuthenticationManager: â€¦ def authenticate â€¦ def refresh_token â€¦"""</span>
<span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> [<span class="hljs-string">'summarization'</span>,<span class="hljs-string">'search'</span>,<span class="hljs-string">'qa'</span>]:
    <span class="hljs-built_in">print</span>(task, <span class="hljs-built_in">len</span>(task_aware_chunking(code, task)))
</code></pre>
<ul>
<li>ä¸ºä¸åŒä»»åŠ¡ç»´æŠ¤ä¸åŒé…ç½®ï¼ˆchunk å¤§å°ã€ç­–ç•¥ã€ä¼˜å…ˆçº§ï¼‰æ›´ç¨³ã€‚</li>
<li>åŒä¸€è¯­æ–™å¯ä»¥é¢å‘å¤šä»»åŠ¡åŒæ—¶ç”Ÿæˆå¤šä¸ªç´¢å¼•ï¼Œæ¯ä¸ªä»»åŠ¡ä¸€å¥—ç­–ç•¥ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/493bdc6e160048ca96c6e0832c435f82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=JPnys4ndR1ugAyDdOsqGIbiEwFY%3D" alt="task-aware.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">6. åŸºäºHTML/XMLæ ‡ç­¾æ‹†åˆ†</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>è§£æ HTML æˆ– XML çš„ DOM ç»“æ„ï¼Œæ ¹æ®æ ‡ç­¾ï¼ˆå¦‚ <code>&lt;h2&gt;</code>ã€<code>&lt;section&gt;</code>ã€<code>&lt;div&gt;</code>ï¼‰æ¥ç¡®å®šchunkçš„è¾¹ç•Œï¼Œæ›´å¥½åœ°ä¿ç•™é¡µé¢ç»“æ„ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>é€‚åˆå¤„ç†çˆ¬è™«ç½‘é¡µã€åšå®¢æ–‡ç« ã€åœ¨çº¿æ–‡æ¡£ç­‰å«ç»“æ„åŒ–æ ‡è®°çš„å†…å®¹ã€‚ä¼˜ç‚¹æ˜¯èƒ½ä¿ç•™é¡µé¢ç»“æ„ï¼Œè€Œä¸æ˜¯ç›²ç›®æŒ‰è¯æˆ–å¥æ‹†åˆ†ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup

<span class="hljs-keyword">def</span> <span class="hljs-title function_">tag_based_splitting</span>(<span class="hljs-params">html, boundary_tags=[<span class="hljs-string">"h2"</span>, <span class="hljs-string">"section"</span>]</span>):
    soup = BeautifulSoup(html, <span class="hljs-string">"html.parser"</span>)
    chunks = []
    <span class="hljs-keyword">for</span> tag <span class="hljs-keyword">in</span> soup.find_all(boundary_tags):
        <span class="hljs-comment"># get text of this section</span>
        section_text = tag.get_text(separator=<span class="hljs-string">"\n"</span>)
        chunks.append(section_text)
    <span class="hljs-keyword">return</span> chunks

html = <span class="hljs-string">"""&lt;article&gt;&lt;h2&gt;Introduction&lt;/h2&gt;&lt;p&gt;â€¦&lt;/p&gt;&lt;h2&gt;Supervised Learning&lt;/h2&gt;&lt;p&gt;â€¦&lt;/p&gt;&lt;/article&gt;"""</span>
chunks = tag_based_splitting(html)
<span class="hljs-keyword">for</span> i, c <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(chunks): <span class="hljs-built_in">print</span>(i, c[:<span class="hljs-number">50</span>])
</code></pre>
<blockquote>
<p>æ³¨æ„æ ‡ç­¾åµŒå¥—ï¼šä¾‹å¦‚ <code>&lt;h3&gt;</code> æ˜¯å¦ä½œä¸ºå­å—ï¼Œè¿˜æ˜¯åˆå¹¶åˆ° <code>&lt;h2&gt;</code>ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ¥å®šã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/057ee5d234cd429896e06c602ab8fa37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=VbtFNMDw06OYycXZgn5Fig03eRs%3D" alt="tag-splitting.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">7. åŸºäºæŠ½è±¡è¯­æ³•æ ‘çš„ä»£ç æ–‡ä»¶æ‹†åˆ†</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>é’ˆå¯¹ä»£ç æ–‡æœ¬ï¼Œä½¿ç”¨ASTæˆ–è¯­è¨€ç‰¹å®šæ¨¡å¼è¯†åˆ«å‡½æ•°ã€ç±»ã€æ¨¡å—ç­‰é€»è¾‘è¾¹ç•Œæ¥æ‹†åˆ†ã€‚è¿™ç§æ–¹æ³•åœ¨å¾ˆå¤šCoding Agentå‡ºç°ï¼Œå¦‚Cursorï¼ŒTraeç­‰ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>é€‚åˆå¼€å‘æ–‡æ¡£ã€ä»£ç å®¡æŸ¥ã€è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€ä»£ç é—®ç­”ç­‰åœºæ™¯ã€‚å¾€å¾€æŠŠæ•´ä¸ªç±»æˆ–å‡½æ•°ä½œä¸ºä¸€ä¸ª chunkï¼Œè€Œä¸æ˜¯ç®€å•æŒ‰è¡Œæ•°æ¥åˆ‡ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> ast

<span class="hljs-keyword">def</span> <span class="hljs-title function_">code_specific_chunks</span>(<span class="hljs-params">code</span>):
    tree = ast.parse(code)
    chunks = []
    <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> tree.body:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(node, ast.ClassDef) <span class="hljs-keyword">or</span> <span class="hljs-built_in">isinstance</span>(node, ast.FunctionDef):
            start = node.lineno - <span class="hljs-number">1</span>
            end = node.end_lineno
            chunk = <span class="hljs-string">"\n"</span>.join(code.splitlines()[start:end])
            chunks.append(chunk)
    <span class="hljs-keyword">return</span> chunks

code = <span class="hljs-string">"""
class UserManager:
    def __init__(self):
        pass
    def add_user(self, name, email):
        pass

def helper_function(x, y):
    return x + y
"""</span>
chunks = code_specific_chunks(code)
<span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> chunks:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Chunk:"</span>, c.splitlines()[<span class="hljs-number">0</span>])
</code></pre>
<blockquote>
<p>å¯ç”¨<code>ast</code>æ¥å¤„ç†Pythonï¼Œæˆ–æ›´é€šç”¨çš„<code>Tree-Sitter</code>ä»¥æ”¯æŒæ›´å¤šçš„ç¼–ç¨‹è¯­è¨€ã€‚
å¯ä»¥é€‚å½“ä¿ç•™æ³¨é‡Šå’Œdocstringï¼Œä»¥å¢å¼ºå¯è¯»æ€§å’Œè¯­ä¹‰ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc0a36190a484e41ac330b0ff55c1ccf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=10BaM7uq7y8GhZnYrhv2KpLQQR0%3D" alt="code-specific.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">8. æ­£åˆ™è¡¨è¾¾å¼åˆ†å—</h2>
<p><strong>æ¦‚å¿µ</strong></p>
<p>åŸºäºå¯é¢„æµ‹çš„æ–‡æœ¬æ¨¡å¼ï¼ˆæ—¶é—´æˆ³ã€åˆ†éš”ç¬¦ã€æ ‡è®°ç­‰ï¼‰ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼å®šä½æ‹†åˆ†è¾¹ç•Œã€‚æ¯æ¬¡åŒ¹é…äº§ç”Ÿä¸€ä¸ªæ–°å—ã€‚</p>
<p>æ¯”å¦‚Jina-AIä¹‹å‰å‘å¸ƒè¿‡çš„ä¸€ä¸ªæ­£åˆ™æ¨¡æ¿ï¼Œå·ç§°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£ææ•´æœ¬ä¹¦ã€Šçˆ±ä¸½ä¸æ¢¦æ¸¸ä»™å¢ƒã€‹åªéœ€è¦2æ¯«ç§’ï¼Œæ€»å…±äº§ç”Ÿäº†1204ä¸ªå—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02ed14ac6f6c4dda958cf0f38ad22abb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619767&amp;x-signature=0N0ZJ9bVs5oL1P9kpQaoPF0QTcI%3D" alt="regex.jpeg" loading="lazy"/></p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>è¿™ç§æ–¹æ³•ç†è®ºä¸Šèƒ½æå–æ‰€æœ‰æ ¼å¼ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯”å¦‚å¯ä»¥ä»æ—¥å¿—è®°å½•ä¸­æŒ‰æ—¶é—´æˆ³è¿›è¡Œåˆ‡åˆ†</span>
<span class="hljs-keyword">import</span> re

<span class="hljs-keyword">def</span> <span class="hljs-title function_">regex_chunking</span>(<span class="hljs-params">text, pattern=<span class="hljs-string">r"\[\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\]"</span></span>):
    parts = re.split(pattern, text)
    chunks = []
    <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> parts:
        <span class="hljs-keyword">if</span> part.strip():
            chunks.append(part.strip())
    <span class="hljs-keyword">return</span> chunks

log = <span class="hljs-string">"""[2025-01-15 10:23:45] INFO: User john logged in
[2025-01-15 10:24:12] ERROR: DB connection failed
[2025-01-15 10:24:15] INFO: Retryingâ€¦"""</span>
chunks = regex_chunking(log)
<span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> chunks:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Chunk:"</span>, c[:<span class="hljs-number">50</span>])
</code></pre>
<hr/>
<h2 data-id="heading-8">ä¸€äº›å®è·µç»éªŒ</h2>
<p>åœ¨é€‰æ‹©æ–‡æœ¬åˆ†å—ç­–ç•¥æ—¶ï¼Œä¸€èˆ¬éœ€è¦ä»æœ€ç®€å•çš„å…¥æ‰‹ï¼Œå¦‚æŒ‰ç…§å›ºå®šçš„chunk sizeè¿›è¡Œåˆ‡åˆ†ï¼Œå¾…æ•ˆæœç¨³å®šåå†é€æ­¥å‡çº§åˆ°æ›´å¤æ‚çš„æ–¹æ¡ˆã€‚
åœ¨è¯„ä¼°ç¯èŠ‚ï¼Œéœ€è¦é€šè¿‡æ£€ç´¢å‡†ç¡®ç‡å’Œå“åº”è´¨é‡ç­‰æŒ‡æ ‡è¡¡é‡å®é™…æ•ˆæœï¼Œå¿…è¦æ—¶å¯è¿›è¡ŒA/Bæµ‹è¯•ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æŠ€å·§æ¥å¿«é€Ÿé€‰æ‹©åˆé€‚çš„åˆ†å—ç­–ç•¥ï¼š</p>









































<table><thead><tr><th>ç±»å‹</th><th>åˆ†å—ç­–ç•¥</th></tr></thead><tbody><tr><td>éœ€è¦ä¿ç•™è·¨è¾¹ç•Œä¸Šä¸‹æ–‡</td><td>æ»‘åŠ¨çª—å£</td></tr><tr><td>å¤„ç†åˆåŒã€åè®®ç±»æ–‡æ¡£</td><td>è‡ªé€‚åº”åˆ†å—</td></tr><tr><td>æ„å»ºå®ä½“çŸ¥è¯†åº“</td><td>å®ä½“åˆ†å—</td></tr><tr><td>å†…å®¹å¤æ‚ã€ç»“æ„å¤šæ ·</td><td>æ··åˆåˆ†å—</td></tr><tr><td>ä»»åŠ¡ä¸åŒ</td><td>ä»»åŠ¡æ„ŸçŸ¥åˆ†å—</td></tr><tr><td>ç»“æ„åŒ– HTMLï¼XML ç½‘é¡µ</td><td>æ ‡ç­¾æ‹†åˆ†</td></tr><tr><td>ä»£ç å†…å®¹</td><td>ä»£ç ä¸“ç”¨æ‹†åˆ†</td></tr><tr><td>æ—¥å¿—ï¼æµæ°´ï¼å¸¦æ ‡è®°æ–‡æœ¬</td><td>æ­£åˆ™åˆ†å—</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>å¯¹äºå®é™…çš„åº”ç”¨æ¥è¯´ï¼Œå¹¶æ²¡æœ‰åŒ…ç½—ä¸‡è±¡çš„åˆ†å—æ–¹æ³•ï¼ŒåŒ…æ‹¬ä¸Šé¢çš„æåˆ°è¿™äº›åˆ†å—ç­–ç•¥ï¼Œä¹Ÿå¹¶ä¸èƒ½ä¿è¯èƒ½å¤Ÿå®Œç¾æå‡RAGçš„æ•ˆæœï¼Œåªæ˜¯åœ¨ä¸åŒåœºæ™¯ä¸‹çš„ä¸€ç§æŠ˜è¡·æ–¹æ¡ˆè€Œå·²ã€‚</p>
<p>å¥½çš„åˆ†å—ç­–ç•¥ä¸åªæ˜¯ã€ŒæŠŠæ–‡æœ¬åˆ‡æˆå—ã€ï¼Œè€Œæ˜¯è¦åŒæ—¶è€ƒè™‘ <strong>å†…å®¹ç±»å‹ï¼ä»»åŠ¡ç±»å‹ï¼æ–‡æ¡£ç»“æ„</strong>ï¼Œå†é€‰æ‹©æˆ–ç»„åˆåˆé€‚çš„æ–¹æ³•ï¼Œ è®©RAGç³»ç»Ÿæ›´å¥½åœ°åˆ©ç”¨ä¸Šä¸‹æ–‡ã€æä¾›æ›´å‡†çš„ç­”æ¡ˆï¼Œå¹¶æå‡æ•´ä½“ä½“éªŒã€‚</p>
<p>æŒæ¡ä¸Šé¢çš„å‡ ç§ç­–ç•¥ï¼Œå¹¶ç»“åˆè‡ªå·±æ­£åœ¨åšçš„åœºæ™¯åšä¸€äº›å®éªŒï¼Œé€šå¸¸éƒ½èƒ½å¸¦æ¥å¾ˆå¯è§‚çš„æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥Â·æ·±åœ³ç«™ä¸¨é™æ—¶æŠ¥åå¼€å¯ï¼]]></title>    <link>https://juejin.cn/post/7571734313927180322</link>    <guid>https://juejin.cn/post/7571734313927180322</guid>    <pubDate>2025-11-13T06:18:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571734313927180322" data-draft-id="7571678763782897698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥Â·æ·±åœ³ç«™ä¸¨é™æ—¶æŠ¥åå¼€å¯ï¼"/> <meta itemprop="keywords" content="Serverless,RocketMQ,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-11-13T06:18:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥Â·æ·±åœ³ç«™ä¸¨é™æ—¶æŠ¥åå¼€å¯ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:18:31.000Z" title="Thu Nov 13 2025 06:18:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹é©±åŠ¨è½¯ä»¶èŒƒå¼æ¼”è¿›çš„å½“ä¸‹ï¼ŒAIÂ åŸç”Ÿï¼ˆAI-Nativeï¼‰åº”ç”¨æ­£æˆä¸ºä¼ä¸šæ„å»ºä¸‹ä¸€ä»£æ™ºèƒ½ç³»ç»Ÿçš„æ ¸å¿ƒè·¯å¾„ã€‚</p>
<p>ä¸ºç³»ç»Ÿæ€§æ¢è®¨Â AIÂ åŸç”Ÿæ¶æ„çš„è®¾è®¡åŸåˆ™ã€å·¥ç¨‹å®ç°ä¸å¯è§‚æµ‹æ€§ä¿éšœï¼Œé˜¿é‡Œäº‘å°†äºÂ 2025Â å¹´Â 11Â æœˆÂ 14Â æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰13:30â€“17:00ï¼Œåœ¨æ·±åœ³å¸‚é˜¿é‡Œä¸­å¿ƒåæµ·Â T3Â æ ‹å²³éº“ä¹¦é™¢ä¸¾åŠã€ŒAIÂ åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥ã€çº¿ä¸‹ä¸“åœºæ´»åŠ¨ã€‚</p>
<p>æœ¬æ¬¡æ´»åŠ¨ç”±é˜¿é‡Œäº‘æ™ºèƒ½äº‘åŸç”Ÿå›¢é˜Ÿèµ„æ·±ä¸“å®¶ç°åœºæˆè¯¾ï¼ŒåŸºäºå·²å‘å¸ƒå¹¶å¹¿å—ä¸šç•Œå…³æ³¨çš„ã€ŠAIÂ åŸç”Ÿåº”ç”¨æ¶æ„ç™½çš®ä¹¦ã€‹ï¼ˆç´¯è®¡ä¸‹è½½è¶…Â 10,000Â ä»½ï¼‰ï¼Œå›´ç»•Â AIÂ åŸç”Ÿåº”ç”¨çš„Â DEVOPSÂ å…¨ç”Ÿå‘½å‘¨æœŸï¼Œä»æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹ã€å·¥ç¨‹å®è·µåˆ°è¿ç»´ä¼˜åŒ–ï¼Œå¯¹æ¦‚å¿µå’Œéš¾ç‚¹è¿›è¡Œç³»ç»ŸåŒ–åœ°åˆ†äº«ã€‚</p>
<p>ğŸ’ŒÂ å‚ä¼šè€…å°†è·å¾—ï¼š</p>
<ul>
<li>é˜¿é‡Œäº‘å®˜æ–¹è®¤è¯çš„åŸ¹è®­å‚ä¸è¯ä¹¦å’Œç²¾ç¾ç¤¼å“</li>
<li>ä¸é˜¿é‡Œäº‘Â AIÂ åŸç”Ÿé¢†åŸŸä¸“å®¶çš„ä¸€å¯¹ä¸€äº¤æµæœºä¼š</li>
</ul>
<p>ğŸ“•Â æ´»åŠ¨è¯¦æƒ…ï¼š</p>
<ul>
<li>æ—¶é—´ï¼š2025Â å¹´Â 11Â æœˆÂ 14Â æ—¥ï¼ˆå‘¨äº”ï¼‰13:30â€“17:00</li>
<li>åœ°ç‚¹ï¼šæ·±åœ³å¸‚é˜¿é‡Œä¸­å¿ƒÂ·æ·±åœ³åæµ·Â T3Â æ ‹Â 3Â æ¥¼å²³éº“ä¹¦é™¢Â </li>
</ul>
<p>ğŸ”—Â æŠ¥åé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Factivity%2Fmiddleware%2Fshenzhen-2025" target="_blank" title="https://www.aliyun.com/activity/middleware/shenzhen-2025" ref="nofollow noopener noreferrer">www.aliyun.com/activity/miâ€¦</a></p>
<p>å¸­ä½æœ‰é™ï¼Œå®¡æ ¸åˆ¶å…¥åœºï¼Œæ•¬è¯·æå‰æŠ¥åç¡®è®¤ï¼Œæºæ‰‹æ¨è¿›Â AIÂ å·¥ç¨‹åŒ–è½åœ°ï¼Œå…±å»ºå¯æ‰©å±•ã€å¯è¿ç»´ã€å¯æ²»ç†çš„Â AIÂ åŸç”ŸåŸºç¡€è®¾æ–½ã€‚æœŸå¾…æ‚¨çš„è…ä¸´ï¼Œå…±æ¢æ™ºèƒ½æ—¶ä»£çš„æŠ€æœ¯è¾¹ç•Œä¸ä¼ä¸šçº§å®è·µè·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0a52deb8af642cca7e252f4c60c314c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619511&amp;x-signature=JKLZ74psFeuFnkD62ikYiyzz3fw%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è®²æ¸…ï¼šMoEæ··åˆä¸“å®¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571731181198639140</link>    <guid>https://juejin.cn/post/7571731181198639140</guid>    <pubDate>2025-11-13T06:25:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571731181198639140" data-draft-id="7571747061386657811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è®²æ¸…ï¼šMoEæ··åˆä¸“å®¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-13T06:25:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è®²æ¸…ï¼šMoEæ··åˆä¸“å®¶æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:25:18.000Z" title="Thu Nov 13 2025 06:25:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹æŠ€æœ¯å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ¨¡å‹è§„æ¨¡çš„ä¸æ–­æ‰©å±•å·²æˆä¸ºæ¨åŠ¨æ€§èƒ½æå‡çš„æ ¸å¿ƒå› ç´ ã€‚ä½†ä¼ ç»Ÿçš„"å¯†é›†"ï¼ˆDenseï¼‰æ¶æ„ï¼Œå…¶æ¯æ¬¡æ¨ç†éƒ½éœ€è°ƒç”¨å…¨éƒ¨å‚æ•°ï¼Œæ­£é¢ä¸´ç€è®¡ç®—æˆæœ¬å’Œèƒ½è€—çš„å·¨å¤§ç“¶é¢ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a2523886f5e438c82fd4f09977b1ff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=cNDihcrGCtqJcKvV2n9AhoqR%2FKU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¢å¯¹è¿™ä¸€å›°å¢ƒï¼Œæ··åˆä¸“å®¶æ¨¡å‹ï¼ˆMixture-of-Experts, MoEï¼‰å‡­å€Ÿå…¶åˆ›æ–°æ€§çš„ç¨€ç–ç»“æ„è„±é¢–è€Œå‡ºã€‚åˆ°2025å¹´ï¼Œè¯¥æŠ€æœ¯å·²è¢«å…¬è®¤ä¸ºæ‰“é€ ä¸‡äº¿å‚æ•°çº§è¶…å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸é«˜æ€§èƒ½å¤šæ¨¡æ€æ¨¡å‹çš„ä¸»æµè§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>MoEçš„æ ¸å¿ƒç†å¿µåœ¨äº"æ¡ä»¶è®¡ç®—"ï¼ˆConditional Computationï¼‰ï¼Œå…¶é€šè¿‡å°†å¤§å‹ç¥ç»ç½‘ç»œæ‹†åˆ†ä¸ºè‹¥å¹²åŠŸèƒ½ç‹¬ç«‹çš„"ä¸“å®¶"å­æ¨¡å—ï¼Œå¹¶å€ŸåŠ©"é—¨æ§ç½‘ç»œ"ï¼ˆGating Networkï¼‰æˆ–"è·¯ç”±å™¨"ï¼ˆRouterï¼‰å®ç°æŒ‰éœ€æ¿€æ´»ç‰¹å®šä¸“å®¶å¤„ç†è¾“å…¥æ•°æ®ã€‚</p>
<p>å…·ä½“è€Œè¨€ï¼ŒMoEé‡‡ç”¨ä»»åŠ¡åˆ†è§£ç­–ç•¥ï¼šå¤æ‚ä»»åŠ¡è¢«æ‹†åˆ†ä¸ºå¤šä¸ªä¸“é¡¹å­ä»»åŠ¡ï¼Œç”±ç‰¹å®šä¸“å®¶åˆ†åˆ«å¤„ç†ã€‚</p>
<p>åœ¨è¯¥æ¶æ„ä¸­ï¼Œå„"ä¸“å®¶"ä¸“æ³¨äºå·®å¼‚åŒ–ä¿¡æ¯çš„å­¦ä¹ ä¸å¤„ç†ï¼Œè€Œ"è·¯ç”±å™¨"åˆ™åŸºäºè¾“å…¥ç‰¹å¾åŠ¨æ€åŒ¹é…æœ€ä¼˜ä¸“å®¶ï¼Œå°†å…¶è¾“å‡ºä½œä¸ºæœ€ç»ˆç»“æœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f88946092b84fa5b63942c5b184118c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=j8P0XXP71r%2FUEZK2lm5aUTK%2BOfo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç§æœºåˆ¶ä½¿å¾—æ¨¡å‹æ€»å‚æ•°é‡å¯ä»¥æå¤§å¢åŠ ï¼Œä»è€Œæå‡æ¨¡å‹å®¹é‡å’ŒçŸ¥è¯†å­˜å‚¨èƒ½åŠ›ï¼Œä½†æ¯æ¬¡å‰å‘ä¼ æ’­çš„å®é™…è®¡ç®—é‡ï¼ˆFLOPsï¼‰å´èƒ½ç»´æŒåœ¨è¾ƒä½æ°´å¹³ï¼Œå®ç°äº†æ¨¡å‹è§„æ¨¡ä¸è®¡ç®—æ•ˆç‡çš„"è§£è€¦"ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p>
<p><strong>ä¸€ã€MoEæ¨¡å‹ç®€å²</strong></p>
<p>MoEæ¨¡å‹çš„æ€æƒ³æºå¤´å¯è¿½æº¯è‡³1991å¹´Michael Jordanä¸Geoffrey Hintonç­‰å­¦è€…å‘è¡¨çš„å¥ åŸºæ€§è®ºæ–‡ã€ŠAdaptive Mixture of Local Expertsã€‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd3052e54eb74ee099f1c2c3dbbeb975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=gWo%2FfwwqoJNT4i591W7084vpiiw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥ç ”ç©¶é¦–æ¬¡ç³»ç»Ÿé˜è¿°äº†"åˆ†è€Œæ²»ä¹‹"çš„æ ¸å¿ƒç†å¿µâ€”â€”é€šè¿‡å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå­é—®é¢˜å¹¶ç”±ä¸“ä¸šåŒ–æ¨¡å‹åˆ†åˆ«å¤„ç†ï¼Œæ„å»ºäº†ç±»ä¼¼äººç±»ä¸“å®¶åä½œçš„æ¶æ„ä½“ç³»ã€‚</p>
<p>åœ¨MoEæ¡†æ¶ä¸­ï¼Œå„ä¸“å®¶æ¨¡å—èšç„¦ç‰¹å®šé¢†åŸŸä»»åŠ¡ï¼Œé—¨æ§ç½‘ç»œåˆ™ä¾æ®è¾“å…¥ç‰¹å¾æ™ºèƒ½åˆ†é…è®¡ç®—èµ„æºã€‚è¿™ç§æœºåˆ¶æ—¢ç¡®ä¿äº†æ¨¡å‹æ€§èƒ½ä¼˜åŠ¿ï¼Œåˆå®ç°äº†è®¡ç®—æ•ˆç‡çš„å¤§å¹…æå‡ã€‚</p>
<p>â€Œ2010-2015å¹´â€Œï¼Œæ··åˆä¸“å®¶æ¨¡å‹ï¼ˆMoEï¼‰çš„è¿›æ­¥ä¸»è¦æºäºâ€Œç»„ä»¶ä¸“å®¶â€Œä¸â€Œæ¡ä»¶è®¡ç®—â€Œä¸¤å¤§æ–¹å‘ã€‚</p>
<p>ç»„ä»¶ä¸“å®¶é€šè¿‡å°†MoEæ•´åˆè‡³æ·±å±‚ç½‘ç»œç»“æ„ï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹çš„æ•ˆç‡ä¸è§„æ¨¡æ‰©å±•èƒ½åŠ›ï¼›æ¡ä»¶è®¡ç®—åˆ™å€ŸåŠ©åŠ¨æ€ç½‘ç»œç»„ä»¶æ¿€æ´»æœºåˆ¶ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†è®¡ç®—èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99628997a0d44b51857a634c51211895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=vXfvw8ad8el1KwDYiHSAsBcg3JM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>2017å¹´ï¼Œè°·æ­Œå›¢é˜Ÿåœ¨è®ºæ–‡ã€ŠOutrageously Large Neural Networks: The Sparsely-Gated Mixture-of-Experts Layerã€‹ä¸­æå‡ºå°†MoEä¸LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰èåˆï¼Œåˆ©ç”¨ç¨€ç–æ€§ç‰¹å¾å®ç°å¤§è§„æ¨¡æ¨¡å‹çš„å¿«é€Ÿæ¨ç†ã€‚</p>
<p>è¯¥æŠ€æœ¯è™½åœ¨æœºå™¨ç¿»è¯‘é¢†åŸŸå–å¾—æ˜¾è‘—æ•ˆæœï¼Œä½†ä»éœ€åº”å¯¹é€šä¿¡å¼€é”€é«˜å’Œè®­ç»ƒç¨³å®šæ€§ä¸è¶³ç­‰é—®é¢˜ã€‚</p>
<p>åç»­ç ”ç©¶ä¸­ï¼ŒMoEæŠ€æœ¯æŒç»­æ·±åŒ–ã€‚2020å¹´ï¼Œè°·æ­Œé€šè¿‡GShardé¡¹ç›®é¦–æ¬¡å°†MoEé›†æˆè‡³Transformeræ¶æ„ï¼Œå¹¶å¼€å‘å‡ºæ”¯æŒåˆ†å¸ƒå¼å¹¶è¡Œè®¡ç®—çš„é«˜æ•ˆæ¡†æ¶ï¼Œä¸ºè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸçš„å¤§è§„æ¨¡è®­ç»ƒä¸æ¨ç†å¥ å®šåŸºç¡€ã€‚</p>
<p>2021å¹´ï¼ŒSwitch Transformerå’ŒGLaMæ¨¡å‹é€šè¿‡æ”¹è¿›é—¨æ§ç­–ç•¥ä¸ä¸“å®¶æ¨¡å—è®¾è®¡ï¼Œè¿›ä¸€æ­¥é‡Šæ”¾äº†MoEåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„æ½œåŠ›ã€‚</p>
<p>å½“å‰ï¼ŒMoEçš„åº”ç”¨å·²è¶…è¶Šè‡ªç„¶è¯­è¨€å¤„ç†èŒƒç•´ï¼Œé€æ­¥æ‹“å±•è‡³è®¡ç®—æœºè§†è§‰ã€å¤šæ¨¡æ€å­¦ä¹ ç­‰å‰æ²¿é¢†åŸŸï¼Œå±•ç°å‡ºæ›´å¹¿æ³›çš„ç ”ç©¶ä»·å€¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fe3a90915494d89aa3c5bf7f5b3ef18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=dso4NXpUiULEqYYNpl6bJy67g6g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>äºŒã€MoEæ¨¡å‹çš„æ ¸å¿ƒæ¶æ„ä¸å·¥ä½œåŸç†</strong></p>
<p>MoEæ¶æ„å¹¶éå•ä¸€å›ºå®šçš„è®¾è®¡ï¼Œä½†å…¶æ ¸å¿ƒç»„ä»¶å’Œå·¥ä½œæµç¨‹å…·æœ‰å…±é€šæ€§ã€‚ä¸€ä¸ªå…¸å‹çš„MoEå±‚é€šå¸¸åµŒå…¥åœ¨Transformeræ¶æ„ä¸­ï¼Œç”¨äºæ›¿ä»£å…¶ä¸­çš„å‰é¦ˆç½‘ç»œï¼ˆFeed-Forward Network, FFNï¼‰å±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c6ff3b986304af4bc6c502c18fbec63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=D6tlql8i4j6RgkNHs5sxd%2BUX9Ew%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å·¥ä½œåŸç†ï¼šæ¡ä»¶è®¡ç®—ä¸ç¨€ç–æ¿€æ´»</strong></p>
<p>MoEçš„å·¥ä½œæµç¨‹å¯åˆ†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼šâ€Œåˆ†å‘-è®¡ç®—-æ•´åˆâ€Œï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<p><strong>â€Œåˆ†å‘ (Dispatch)â€Œ</strong></p>
<p>è¾“å…¥æ‰¹æ¬¡ä¸­çš„æ¯ä¸ªä»¤ç‰Œå‡é€šè¿‡é—¨æ§ç½‘ç»œåŠ¨æ€ç­›é€‰ï¼Œé—¨æ§ç½‘ç»œä¼šä¸ºå…¶åˆ†é…Top-Kä¸ªæœ€åŒ¹é…çš„ä¸“å®¶å­é›†ã€‚</p>
<p><strong>â€Œè®¡ç®— (Compute)â€Œ</strong></p>
<p>ä»¤ç‰Œè¢«è·¯ç”±è‡³é€‰å®šçš„ä¸“å®¶æ¨¡å—è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œå…¶ä½™ä¸“å®¶å¤„äºé—²ç½®çŠ¶æ€ï¼Œä¸å‚ä¸å½“å‰è®¡ç®—ä»»åŠ¡ã€‚</p>
<p>â€Œ<strong>æ•´åˆ (Combine)â€Œ</strong></p>
<p>æ ¹æ®é—¨æ§ç½‘ç»œç”Ÿæˆçš„æƒé‡ç³»æ•°ï¼Œå¯¹æ¯ä¸ªä»¤ç‰Œå¯¹åº”çš„Kä¸ªä¸“å®¶è¾“å‡ºç»“æœè¿›è¡ŒåŠ æƒèåˆï¼Œç”Ÿæˆæœ€ç»ˆè¾“å‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eca24cf71db145b8b362be2d65c2c094~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=C1SxqDn8ndtmI%2FUn%2B%2FuYGcY%2BrSU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç§æœºåˆ¶ä½¿MoEæ¨¡å‹åœ¨ä¿æŒåºå¤§æ€»å‚æ•°é‡ï¼ˆå¦‚Mixtral 8x7B[6]å«8ä¸ªä¸“å®¶ï¼Œæ€»å‚æ•°çº¦47Bï¼‰çš„åŒæ—¶ï¼Œå®é™…æ¨ç†ä¸­æ¯ä¸ªä»¤ç‰Œä»…æ¿€æ´»2ä¸ªä¸“å®¶ï¼Œè®¡ç®—é‡ç›¸å½“äº12.9Bçš„å¯†é›†æ¨¡å‹ã€‚</p>
<p>å…¶æ¨ç†æˆæœ¬ï¼ˆFLOPsï¼‰ä»…ä¸æ¿€æ´»ä¸“å®¶æ•°ç›¸å…³ï¼Œæ˜¾è‘—ä½äºåŒç­‰å‚æ•°è§„æ¨¡çš„å¯†é›†æ¨¡å‹ã€‚</p>
<p><strong>ä¸‰ã€MoEæ¨¡å‹çš„è®­ç»ƒæŒ‘æˆ˜ä¸å…³é”®ä¼˜åŒ–æŠ€æœ¯</strong></p>
<p>å°½ç®¡MoEåœ¨æ‰©å±•æ€§ä¸Šä¼˜åŠ¿æ˜¾è‘—ï¼Œä½†å…¶è®­ç»ƒè¿‡ç¨‹è¿œæ¯”å¯†é›†æ¨¡å‹å¤æ‚ï¼Œéœ€è¦ä¸€ç³»åˆ—ç²¾å·§çš„ç®—æ³•æŠ€æœ¯æ¥ä¿è¯è®­ç»ƒçš„ç¨³å®šæ€§å’Œæ•ˆç‡ã€‚</p>
<p><strong>æ ¸å¿ƒæŒ‘æˆ˜ï¼šè´Ÿè½½ä¸å‡è¡¡</strong></p>
<p>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„æ£˜æ‰‹é—®é¢˜æ˜¯è´Ÿè½½ä¸å‡è¡¡ï¼ˆLoad Imbalanceï¼‰ï¼šé—¨æ§ç½‘ç»œå¯èƒ½å€¾å‘äºé¢‘ç¹é€‰æ‹©å°‘æ•°å‡ ä¸ªâ€œçƒ­é—¨â€ä¸“å®¶ï¼Œè€Œå…¶ä»–ä¸“å®¶åˆ™å¾ˆå°‘è¢«æ¿€æ´»ï¼Œæˆä¸ºâ€œå†·é—¨â€ä¸“å®¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac4e937c68474afca65c99999058650c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=t1g%2F9zCVQ%2B3Z6v7fMxN129edR5w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¼šå¯¼è‡´æ¨¡å‹è®­ç»ƒæ•ˆç‡ä½ä¸‹ï¼Œéƒ¨åˆ†å‚æ•°å¾—ä¸åˆ°å……åˆ†è®­ç»ƒï¼Œæœ€ç»ˆæŸå®³æ¨¡å‹æ€§èƒ½ ã€‚</p>
<p><strong>å…³é”®ä¼˜åŒ–æŠ€æœ¯è¯¦è§£</strong></p>
<p><strong>åˆ†å¸ƒå¼è®­ç»ƒä¸å¹¶è¡Œç­–ç•¥â€Œ</strong></p>
<p>ç”±äºMixture-of-Expertsï¼ˆMoEï¼‰æ¨¡å‹çš„å‚æ•°é‡çº§åºå¤§ï¼Œå•å¡GPUæ˜¾å­˜æ— æ³•å®¹çº³å®Œæ•´æ¨¡å‹ï¼Œå¿…é¡»é‡‡ç”¨åˆ†å¸ƒå¼è®­ç»ƒæ¶æ„ã€‚</p>
<p>é™¤ä¼ ç»Ÿçš„æ•°æ®å¹¶è¡Œï¼ˆDPï¼‰ä¸å¼ é‡å¹¶è¡Œï¼ˆTPï¼‰å¤–ï¼ŒMoEåˆ›æ–°æ€§åœ°æå‡ºä¸“å®¶å¹¶è¡Œï¼ˆEPï¼‰æœºåˆ¶ï¼šé€šè¿‡å°†ä¸åŒä¸“å®¶æ¨¡å—åŠ¨æ€åˆ†é…åˆ°å¤šGPUæˆ–å¤šè®¡ç®—èŠ‚ç‚¹ä¸Šå®ç°è´Ÿè½½å‡è¡¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f870b41df6489a868a1844796d81f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=VOW3hLZf8OmEGbqNfTDQfAdVjhU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â€Œæ··åˆå¹¶è¡Œæ¶æ„â€Œï¼šå½“å‰ä¸»æµMoEè®­ç»ƒæ¡†æ¶ï¼ˆå¦‚Megatron-LMã€DeepSpeedï¼‰æ™®éé‡‡ç”¨æ•°æ®ã€å¼ é‡ä¸ä¸“å®¶å¹¶è¡Œçš„ä¸‰é‡æ··åˆç­–ç•¥ï¼Œé€šè¿‡ååŒè°ƒåº¦å……åˆ†é‡Šæ”¾é›†ç¾¤è®¡ç®—æ½œåŠ›ã€‚</p>
<p>â€Œé€šä¿¡ç“¶é¢ˆä¼˜åŒ–â€Œï¼šä¸“å®¶å¹¶è¡Œä¼šè§¦å‘é«˜é¢‘All-to-Allé€šä¿¡ï¼Œå³å„GPUéœ€å‘å…¶ä»–èŠ‚ç‚¹ä¸“å®¶å‘é€ä»¤ç‰Œå¹¶èšåˆç»“æœã€‚</p>
<p>é’ˆå¯¹æ­¤ç“¶é¢ˆçš„ä¼˜åŒ–æ–¹æ¡ˆåŒ…æ‹¬ï¼šéƒ¨ç½²é«˜é€Ÿäº’è”ç¡¬ä»¶ï¼ˆå¦‚NVLinkã€Infinibandï¼‰ã€å‡çº§é€šä¿¡åº“ï¼ˆå¦‚NCCLï¼‰ä»¥åŠæ„å»ºæ‹“æ‰‘æ„ŸçŸ¥çš„å¹¶è¡Œä»»åŠ¡åˆ†é…ç®—æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e4caaabdc4344f98d02b4d3f2bf7301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=UWGy3ON84vDey9rMSDBbjHrO7Kw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>â€Œè¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ä¸æ¨ç†ä¼˜åŒ–â€Œ</strong></p>
<p>å°†å¤§è§„æ¨¡MoEæ¨¡å‹éƒ¨ç½²è‡³æ‰‹æœºã€è½¦è½½ç»ˆç«¯ç­‰è¾¹ç¼˜è®¾å¤‡æ˜¯å‰æ²¿ç ”ç©¶æ–¹å‘ã€‚æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºè¾¹ç¼˜è®¾å¤‡æœ‰é™çš„å­˜å‚¨ä¸ç®—åŠ›ä¸MoEæ¨¡å‹æµ·é‡å‚æ•°ä¹‹é—´çš„çŸ›ç›¾ï¼Œç°æœ‰è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š</p>
<p>â€Œä¸“å®¶å¸è½½ï¼ˆExpert Offloadingï¼‰â€Œï¼šä»…å°†é«˜é¢‘ä½¿ç”¨çš„ä¸“å®¶æƒé‡å¸¸é©»GPU/NPUç¼“å­˜ï¼Œä½é¢‘ä¸“å®¶ä¿ç•™äºCPUå†…å­˜æˆ–é—ªå­˜ï¼ŒæŒ‰éœ€åŠ¨æ€åŠ è½½ã€‚</p>
<p>â€Œæ™ºèƒ½è·¯ç”±ç­–ç•¥ï¼ˆCache-Aware Routingï¼‰â€Œï¼šè®¾è®¡ä¼˜å…ˆé€‰æ‹©å·²ç¼“å­˜ä¸“å®¶çš„è·¯ç”±ç®—æ³•ï¼Œæœ€å¤§åŒ–å±€éƒ¨è®¿é—®ç‡ä»¥é™ä½å»¶è¿Ÿã€‚</p>
<p>â€Œæ¨¡å‹è½»é‡åŒ–ï¼ˆModel Distillation &amp; Compressionï¼‰â€Œï¼šé€šè¿‡çŸ¥è¯†è’¸é¦å°†å¤§MoEæ¨¡å‹å‹ç¼©ä¸ºå°è§„æ¨¡å¯†é›†æ¨¡å‹æˆ–ç²¾ç®€MoEæ¶æ„ï¼Œé€‚é…è¾¹ç¼˜èµ„æºçº¦æŸã€‚</p>
<p>å®éªŒè¡¨æ˜ï¼ŒEdgeMoEä¸SiDA-MoEç­‰æ–¹æ¡ˆå¯æœ‰æ•ˆé™ä½ç§»åŠ¨ç«¯æ¨ç†å»¶è¿Ÿï¼ˆæœ€é«˜è¾¾3å€ï¼‰å¹¶å‡å°‘å†…å­˜å ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c020e1c165244457a7270a4ee638bf90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=Dwv5830S5qkcGx2hglv%2FXiyHRlc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å››ã€æ€§èƒ½åŸºå‡†ï¼šMoEæ¨¡å‹ vs. ç¨ å¯†æ¨¡å‹</strong></p>
<p>MoEæ¨¡å‹çš„æ ¸å¿ƒä»·å€¼æ˜¯åœ¨ç›¸ä¼¼ç”šè‡³æ›´ä½çš„è®¡ç®—æˆæœ¬ä¸‹ï¼Œè¾¾åˆ°æˆ–è¶…è¶Šæ›´å¤§è§„æ¨¡çš„å¯†é›†æ¨¡å‹çš„æ€§èƒ½ã€‚</p>
<p>å¤§é‡ç ”ç©¶å’Œå®è·µè¡¨æ˜ï¼ŒMoEæ¨¡å‹åœ¨æ€§èƒ½å’Œè®¡ç®—æˆæœ¬ä¹‹é—´å–å¾—äº†æ›´ä¼˜çš„å¹³è¡¡ã€‚åœ¨ç›¸åŒçš„è®¡ç®—é¢„ç®—ï¼ˆFLOPsï¼‰ä¸‹ï¼ŒMoEæ¨¡å‹é€šå¸¸èƒ½å±•ç°å‡ºæ›´ä½çš„å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰å’Œæ›´é«˜çš„ä¸‹æ¸¸ä»»åŠ¡å‡†ç¡®ç‡ ã€‚</p>
<p><strong>â€ŒSwitchTransformerâ€Œ</strong></p>
<p>Googleçš„ç ”ç©¶è¡¨æ˜ï¼ŒSwitch Transformeræ¨¡å‹åœ¨è®¡ç®—é‡ï¼ˆ220Må‚æ•°ï¼‰ä¸T5-Baseç›¸è¿‘çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½å¯è¾¾åˆ°T5-Largeï¼ˆ770Må‚æ•°ï¼‰çš„æ°´å¹³ã€‚åœ¨TPUv3ç¡¬ä»¶ä¸Šï¼Œå…¶æ¨ç†é€Ÿåº¦ç›¸æ¯”åŒç­‰è®¡ç®—é‡çš„å¯†é›†æ¨¡å‹æå‡æœ€é«˜è¾¾7å€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8213ccb82ba841428d7f536cafaf9d4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=zGqugWeX3KO6KSBh4dyqg%2B3%2B7T8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>â€ŒGLaMâ€Œ</strong></p>
<p>åŒä¸ºGoogleæå‡ºçš„GLaMæ¨¡å‹ï¼Œå°½ç®¡æ€»å‚æ•°é‡è¾¾åˆ°1.2Tï¼Œä½†æ¨ç†æˆæœ¬ä»…ä¸ºGPT-3 (175B)çš„1/3ï¼ŒåŒæ—¶åœ¨å¤šé¡¹é›¶æ ·æœ¬ï¼ˆZero-shotï¼‰NLPä»»åŠ¡ä¸­è¡¨ç°æ›´ä¼˜ã€‚</p>
<p><strong>â€ŒMixtral 8x7Bâ€Œ</strong></p>
<p>ç”±Mistral AIå¼€æºçš„Mixtral 8x7Bæ¨¡å‹ï¼Œé€šè¿‡çº¦13Bçš„æ¿€æ´»å‚æ•°ï¼Œåœ¨åŸºå‡†æµ‹è¯•ä¸­è¶…è¶Šå‚æ•°è§„æ¨¡è¾¾70Bçš„Llama 2 70Bæ¨¡å‹ï¼Œè¢«ç¡®ç«‹ä¸ºå¼€æºé¢†åŸŸçš„æ–°æ ‡æ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7eb37cee7ac45ee8845126746c3e469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=PEDmocRjk5J5C8sULSBRg8jqVaA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æŒ‘æˆ˜ä¸æƒè¡¡</strong></p>
<p>å°½ç®¡æ¨ç†é«˜æ•ˆï¼Œä½†MoEæ¨¡å‹ä¹Ÿå­˜åœ¨å›ºæœ‰æŒ‘æˆ˜ï¼š</p>
<p>å·¨å¤§çš„å†…å­˜å ç”¨ï¼šéœ€è¦å­˜å‚¨æ‰€æœ‰ä¸“å®¶çš„å‚æ•°ï¼Œå¯¹GPUæ˜¾å­˜è¦æ±‚æé«˜ã€‚</p>
<p>å¤æ‚çš„è®­ç»ƒç³»ç»Ÿï¼šéœ€è¦ä¸“é—¨çš„å¹¶è¡Œç­–ç•¥ï¼ˆå¦‚ä¸“å®¶å¹¶è¡Œï¼‰å’Œé€šä¿¡ä¼˜åŒ–ï¼Œè®­ç»ƒåŸºç¡€è®¾æ–½å¤æ‚ã€‚</p>
<p>é€šä¿¡å¼€é”€ï¼šä¸“å®¶å¹¶è¡Œä¸­çš„All-to-Allé€šä¿¡æ˜¯ä¸»è¦ç“¶é¢ˆï¼Œå°¤å…¶æ˜¯åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ã€‚</p>
<p><strong>äº”ã€MoEçš„åº”ç”¨é¢†åŸŸæ‰©å±•ï¼šä»NLPåˆ°è§†è§‰ä¸å¤šæ¨¡æ€</strong></p>
<p>MoEæŠ€æœ¯ç‡å…ˆåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸå–å¾—æ˜¾è‘—çªç ´ï¼Œå…¶åº”ç”¨èŒƒå›´æ­£å¿«é€Ÿå‘è®¡ç®—æœºè§†è§‰ä¸å¤šæ¨¡æ€ç­‰æ›´å¤šé¢†åŸŸå»¶ä¼¸ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c304f99239e413fb71e787169801585~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=t8q8wRFHobbT5eAWAkRpG%2BEsxdY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨è§†è§‰ç ”ç©¶æ–¹é¢ï¼Œç§‘å­¦å®¶é€šè¿‡å°†MoEå±‚åµŒå…¥Vision Transformer (ViT)æ¶æ„ï¼Œå–ä»£ä¼ ç»ŸMLPæ¨¡å—ï¼Œä»è€Œå¼€å‘å‡ºV-MoEï¼ˆVision MoEï¼‰ç­‰åˆ›æ–°æ¨¡å‹ã€‚</p>
<p>è¯¥æ¨¡å‹èƒ½æ™ºèƒ½åœ°å°†å›¾åƒå—ï¼ˆpatchesï¼‰åˆ†é…ç»™ç‰¹å®šä¸“å®¶æ¨¡å—ï¼Œè¿™äº›ä¸“å®¶åˆ†åˆ«ä¸“æ³¨äºè§£æå„ç±»è§†è§‰ç‰¹å¾ï¼ˆå¦‚çº¹ç†æ„æˆã€è½®å»“çº¿æ¡ã€å±€éƒ¨ç‰©ä½“ç»“æ„ï¼‰ã€‚</p>
<p>å¯¹äºéœ€è¦æ•´åˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘çš„å¤æ‚å¤šæ¨¡æ€ä»»åŠ¡ï¼ŒMoEæŠ€æœ¯è¡¨ç°å‡ºç‹¬ç‰¹ä¼˜åŠ¿ã€‚</p>
<p>å…¶æœºåˆ¶å…è®¸æ¨¡å‹çµæ´»è°ƒé…ä¸“å®¶èµ„æºï¼šä¾‹å¦‚éƒ¨åˆ†ä¸“å®¶ä¸“ç²¾æ–‡æœ¬è¯­ä¹‰è§£æï¼Œå…¶ä»–ä¸“å®¶å¤„ç†è§†è§‰ç‰¹å¾æå–ï¼Œå¦æœ‰ä¸“å®¶å›¢é˜Ÿè´Ÿè´£å®ç°è·¨æ¨¡æ€ä¿¡æ¯çš„ååŒä¸èåˆã€‚</p>
<p>è‡ª2023å¹´ä»¥æ¥ï¼Œæ¶Œç°äº†å¤§é‡å¤šæ¨¡æ€MoEæ¨¡å‹ï¼Œå¦‚ LIMoEã€MoE-LLaVAã€Ming-Lite-Omniç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7e74662d45d4417b4f5027146ae4b33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619918&amp;x-signature=Z3ngeW%2Ft2%2BYM12E8Y9hgSSmVaqA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼Œ MoE-LLaVA åœ¨å¤šä¸ªè§†è§‰é—®ç­”ï¼ˆVQAï¼‰åŸºå‡†ä¸Šï¼Œå…¶æ€§èƒ½æ˜¾è‘—ä¼˜äºå…¶å¯¹åº”çš„éMoEå¯†é›†æ¨¡å‹åŸºçº¿ ã€‚</p>
<p><strong>æœ€å</strong></p>
<p>MoEæŠ€æœ¯ä¸ä»…æ˜¯ä¸€é¡¹æˆç†Ÿä¸”å¼ºå¤§çš„æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ç ”ç©¶é¢†åŸŸã€‚å±•æœ›æœªæ¥ï¼Œå®ƒå°†é©±åŠ¨ç€æ›´å¤§ã€æ›´å¼ºã€æ›´é«˜æ•ˆçš„AIæ¨¡å‹çš„è¯ç”Ÿã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring WebFlux æ ¸å¿ƒæ“ä½œç¬¦è¯¦è§£ï¼šmapã€flatMap ä¸ Mono å¸¸ç”¨æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7571729676344934463</link>    <guid>https://juejin.cn/post/7571729676344934463</guid>    <pubDate>2025-11-13T06:18:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571729676344934463" data-draft-id="7571729676344918079" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring WebFlux æ ¸å¿ƒæ“ä½œç¬¦è¯¦è§£ï¼šmapã€flatMap ä¸ Mono å¸¸ç”¨æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯,Spring"/> <meta itemprop="datePublished" content="2025-11-13T06:18:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring WebFlux æ ¸å¿ƒæ“ä½œç¬¦è¯¦è§£ï¼šmapã€flatMap ä¸ Mono å¸¸ç”¨æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:18:08.000Z" title="Thu Nov 13 2025 06:18:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SpringÂ WebFlux æ ¸å¿ƒæ“ä½œç¬¦è¯¦è§£ï¼šmapã€flatMap ä¸ Mono å¸¸ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.Â å“åº”å¼ç¼–ç¨‹ç®€ä»‹</h3>
<p>Spring WebFlux æ˜¯ Spring Framework 5.0 å¼•å…¥çš„å“åº”å¼ Web æ¡†æ¶ï¼ŒåŸºäº Project Reactor åº“æ„å»ºã€‚åœ¨å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>Mono</code>Â å’ŒÂ <code>Flux</code>Â è¿™ä¸¤ç§æ ¸å¿ƒå‘å¸ƒè€…æ¥å¤„ç†å¼‚æ­¥æ•°æ®æµã€‚</p>
<ul>
<li><strong>Mono</strong>: è¡¨ç¤º 0 æˆ– 1 ä¸ªå…ƒç´ çš„å¼‚æ­¥åºåˆ—</li>
<li><strong>Flux</strong>: è¡¨ç¤º 0 åˆ° N ä¸ªå…ƒç´ çš„å¼‚æ­¥åºåˆ—</li>
</ul>
<p>ç†è§£è¿™äº›æ“ä½œç¬¦å¯¹äºç¼–å†™é«˜æ•ˆã€å¯è¯»çš„å“åº”å¼ä»£ç è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.Â mapÂ ä¸ flatMap çš„æ ¸å¿ƒåŒºåˆ«</h3>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1 map æ“ä½œç¬¦ï¼šåŒæ­¥è½¬æ¢</h4>
<p><code>map</code>Â ç”¨äº<strong>åŒæ­¥è½¬æ¢</strong>ï¼Œå°†ä¸€ä¸ªå€¼ç›´æ¥è½¬æ¢ä¸ºå¦ä¸€ä¸ªå€¼ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åŒæ­¥æ‰§è¡Œè½¬æ¢æ“ä½œ</li>
<li>ç›´æ¥è¿”å›è½¬æ¢åçš„å€¼</li>
<li>é€‚ç”¨äºç®€å•çš„æ•°æ®è½¬æ¢åœºæ™¯</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// åŸºæœ¬æ•°æ®è½¬æ¢
Flux&lt;Integer&gt; <span class="hljs-attr">numbers</span> = Flux.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
Flux&lt;Integer&gt; <span class="hljs-attr">squared</span> = numbers.map(n -&gt; n * n)<span class="hljs-comment">;</span>
// è¾“å‡º: 1, 4, 9, 16, 25

// WebFlux ä¸­çš„å®ä½“è½¬æ¢
public Mono&lt;UserDTO&gt; getUserById(Long id) {
    return userRepository.findById(id)
           .map(user -&gt; {
               // åŒæ­¥è½¬æ¢ Entity åˆ° DTO
               UserDTO <span class="hljs-attr">dto</span> = new UserDTO()<span class="hljs-comment">;</span>
               dto.setId(user.getId())<span class="hljs-comment">;</span>
               dto.setName(user.getName())<span class="hljs-comment">;</span>
               dto.setEmail(user.getEmail())<span class="hljs-comment">;</span>
               return dto<span class="hljs-comment">;</span>
           })<span class="hljs-comment">;</span>
}

AIå†™ä»£ç java
è¿è¡Œ
1234567891011121314151617
</code></pre>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2 flatMap æ“ä½œç¬¦ï¼šå¼‚æ­¥è½¬æ¢</h4>
<p><code>flatMap</code>Â ç”¨äº<strong>å¼‚æ­¥è½¬æ¢</strong>ï¼Œå°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºä¸€ä¸ª Publisherï¼ˆMono/Fluxï¼‰ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¼‚æ­¥æ‰§è¡Œè½¬æ¢æ“ä½œ</li>
<li>è¿”å› Publisher (Mono/Flux)</li>
<li>é€‚ç”¨äºéœ€è¦è°ƒç”¨å…¶ä»–å¼‚æ­¥æœåŠ¡çš„åœºæ™¯</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// å¼‚æ­¥æ•°æ®è½¬æ¢
Flux&lt;Integer&gt; <span class="hljs-attr">numbers</span> = Flux.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
Flux&lt;Integer&gt; <span class="hljs-attr">result</span> = numbers.flatMap(n -&gt; 
    Mono.just(n * n).delayElement(Duration.ofMillis(100))
)<span class="hljs-comment">;</span>

// WebFlux ä¸­çš„å¤æ‚ä¸šåŠ¡å¤„ç†
public Mono&lt;OrderWithDetailsDTO&gt; getOrderWithDetails(Long orderId) {
    return orderRepository.findById(orderId)
           .flatMap(order -&gt; {
               // å¼‚æ­¥æŸ¥è¯¢å…³è”æ•°æ®
               return productService.getProduct(order.getProductId())
                      .flatMap(product -&gt; 
                         userService.getUser(order.getUserId())
                               .map(user -&gt; {
                                   OrderWithDetailsDTO <span class="hljs-attr">dto</span> = new OrderWithDetailsDTO()<span class="hljs-comment">;</span>
                                   dto.setOrder(order)<span class="hljs-comment">;</span>
                                   dto.setProduct(product)<span class="hljs-comment">;</span>
                                   dto.setUser(user)<span class="hljs-comment">;</span>
                                   return dto<span class="hljs-comment">;</span>
                               })
                      )<span class="hljs-comment">;</span>
           })<span class="hljs-comment">;</span>
}

AIå†™ä»£ç java
è¿è¡Œ
123456789101112131415161718192021222324
</code></pre>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.3 å¯¹æ¯”æ€»ç»“</h4>



































<table><thead><tr><th>ç‰¹æ€§</th><th>map</th><th>flatMap</th></tr></thead><tbody><tr><td><strong>è¿”å›å€¼</strong></td><td>ç›´æ¥è¿”å›è½¬æ¢åçš„å€¼</td><td>è¿”å› Publisher (Mono/Flux)</td></tr><tr><td><strong>æ‰§è¡Œæ–¹å¼</strong></td><td>åŒæ­¥æ‰§è¡Œ</td><td>å¼‚æ­¥æ‰§è¡Œ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç®€å•çš„åŒæ­¥è½¬æ¢</td><td>éœ€è¦è°ƒç”¨å…¶ä»–å¼‚æ­¥æ–¹æ³•çš„åœºæ™¯</td></tr><tr><td><strong>å¹¶å‘æ€§</strong></td><td>é¡ºåºæ‰§è¡Œï¼Œæ— å¹¶å‘</td><td>å¯ä»¥å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œ</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>ä½å¼€é”€</td><td>å¯èƒ½æ¶‰åŠç½‘ç»œè°ƒç”¨æˆ–å¤æ‚å¼‚æ­¥æ“ä½œ</td></tr></tbody></table>
<p><strong>é€‰æ‹©åŸåˆ™ï¼š</strong></p>
<ul>
<li>å¦‚æœ lambda è¡¨è¾¾å¼è¿”å›æ™®é€šå¯¹è±¡ â†’ ä½¿ç”¨Â <code>map</code></li>
<li>å¦‚æœ lambda è¡¨è¾¾å¼è¿”å› Mono/Flux â†’ ä½¿ç”¨Â <code>flatMap</code></li>
</ul>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. Mono å¸¸ç”¨æ“ä½œç¬¦è¯¦è§£</h3>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.1 åˆ›å»ºæ“ä½œç¬¦</h4>
<pre><code class="hljs language-ini" lang="ini">// åŸºç¡€åˆ›å»º
Mono&lt;String&gt; <span class="hljs-attr">mono1</span> = Mo<span class="hljs-literal">no</span>.just(<span class="hljs-string">"Hello"</span>)<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">mono2</span> = Mo<span class="hljs-literal">no</span>.justOrEmpty(null)<span class="hljs-comment">; // ç©º Mono</span>
Mono&lt;String&gt; <span class="hljs-attr">mono3</span> = Mo<span class="hljs-literal">no</span>.justOrEmpty(Optional.of(<span class="hljs-string">"value"</span>))<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">emptyMono</span> = Mo<span class="hljs-literal">no</span>.empty()<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">errorMono</span> = Mo<span class="hljs-literal">no</span>.error(new RuntimeException(<span class="hljs-string">"Error"</span>))<span class="hljs-comment">;</span>

// å»¶è¿Ÿåˆ›å»º
Mono&lt;String&gt; <span class="hljs-attr">deferredMono</span> = Mo<span class="hljs-literal">no</span>.defer(() -&gt; 
    Mono.just("Value created at subscription time: " + System.currentTimeMillis())
)<span class="hljs-comment">;</span>

// ä»å…¶ä»–ç±»å‹åˆ›å»º
Mono&lt;String&gt; <span class="hljs-attr">fromCallable</span> = Mo<span class="hljs-literal">no</span>.fromCallable(() -&gt; 
    expensiveOperation()
)<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">fromFuture</span> = Mo<span class="hljs-literal">no</span>.fromFuture(
    CompletableFuture.supplyAsync(() -&gt; "Future result")
)<span class="hljs-comment">;</span>

AIå†™ä»£ç java
è¿è¡Œ
12345678910111213141516171819
</code></pre>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.2 è½¬æ¢ä¸è¿‡æ»¤æ“ä½œ</h4>
<pre><code class="hljs language-ini" lang="ini">Mono&lt;String&gt; <span class="hljs-attr">original</span> = Mo<span class="hljs-literal">no</span>.just(<span class="hljs-string">"hello"</span>)<span class="hljs-comment">;</span>

// è½¬æ¢æ“ä½œ
Mono&lt;String&gt; <span class="hljs-attr">upperCase</span> = original.map(String::toUpperCase)<span class="hljs-comment">;</span>
Mono&lt;Integer&gt; <span class="hljs-attr">length</span> = original.map(String::length)<span class="hljs-comment">;</span>

// å¼‚æ­¥è½¬æ¢
Mono&lt;String&gt; <span class="hljs-attr">processed</span> = original.flatMap(str -&gt; 
    processStringAsync(str)
)<span class="hljs-comment">;</span>

// è¿‡æ»¤æ“ä½œ
Mono&lt;String&gt; <span class="hljs-attr">filtered</span> = original.filter(str -&gt; str.length() &gt; <span class="hljs-number">3</span>)<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">defaultIfEmpty</span> = Mo<span class="hljs-literal">no</span>.&lt;String&gt;empty()
    .defaultIfEmpty("Default Value")<span class="hljs-comment">;</span>

// ç±»å‹è½¬æ¢
Mono&lt;Object&gt; <span class="hljs-attr">objectMono</span> = Mo<span class="hljs-literal">no</span>.just(<span class="hljs-string">"hello"</span>)<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">casted</span> = objectMo<span class="hljs-literal">no</span>.cast(String.class)<span class="hljs-comment">;</span>

AIå†™ä»£ç java
è¿è¡Œ
12345678910111213141516171819
</code></pre>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.3 é”™è¯¯å¤„ç†æ“ä½œç¬¦</h4>
<p>é”™è¯¯å¤„ç†æ˜¯å“åº”å¼ç¼–ç¨‹ä¸­çš„é‡è¦ç¯èŠ‚ï¼ŒMono æä¾›äº†ä¸°å¯Œçš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Mono&lt;<span class="hljs-built_in">String</span>&gt; unreliableMono = createUnreliableMono();

<span class="hljs-comment">// åŸºç¡€é”™è¯¯å¤„ç†</span>
Mono&lt;<span class="hljs-built_in">String</span>&gt; safeMono = unreliableMono
    .onErrorReturn(<span class="hljs-string">"Fallback Value"</span>)
    .onErrorResume(TimeoutException.<span class="hljs-keyword">class</span>, ex -&gt; 
        Mono.just(<span class="hljs-string">"Timeout Fallback"</span>)
    )
    .onErrorResume(ex -&gt; 
        backupService.getData().onErrorReturn(<span class="hljs-string">"Final Fallback"</span>)
    );

<span class="hljs-comment">// é”™è¯¯è½¬æ¢</span>
Mono&lt;<span class="hljs-built_in">String</span>&gt; mappedError = unreliableMono
    .onErrorMap(IOException.<span class="hljs-keyword">class</span>, ex -&gt; 
        <span class="hljs-keyword">new</span> BusinessException(<span class="hljs-string">"Data access failed"</span>, ex)
    );

<span class="hljs-comment">// é‡è¯•æœºåˆ¶</span>
Mono&lt;<span class="hljs-built_in">String</span>&gt; withRetry = unreliableMono
    .retry(<span class="hljs-number">3</span>) <span class="hljs-comment">// ç®€å•é‡è¯•3æ¬¡</span>
    .retryWhen(Retry.backoff(<span class="hljs-number">3</span>, <span class="hljs-built_in">Duration</span>.ofSeconds(<span class="hljs-number">1</span>)) <span class="hljs-comment">// æŒ‡æ•°é€€é¿é‡è¯•</span>
    .timeout(<span class="hljs-built_in">Duration</span>.ofSeconds(<span class="hljs-number">5</span>)); <span class="hljs-comment">// è¶…æ—¶æ§åˆ¶</span>

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">1234567891011121314151617181920212223</span>
</code></pre>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.4 ç»„åˆæ“ä½œç¬¦</h4>
<p>ç»„åˆå¤šä¸ª Mono æ˜¯å¸¸è§çš„ä¸šåŠ¡éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Mono&lt;String&gt; <span class="hljs-attr">userMono</span> = getUser()<span class="hljs-comment">;</span>
Mono&lt;String&gt; <span class="hljs-attr">profileMono</span> = getProfile()<span class="hljs-comment">;</span>
Mono&lt;Integer&gt; <span class="hljs-attr">scoreMono</span> = getScore()<span class="hljs-comment">;</span>

// zip - å¹¶è¡Œæ‰§è¡Œå¹¶ç»„åˆç»“æœ
Mono&lt;Tuple3&lt;String, String, Integer&gt;&gt; <span class="hljs-attr">zipped</span> = 
    Mono.zip(userMono, profileMono, scoreMono)<span class="hljs-comment">;</span>

Mono&lt;String&gt; <span class="hljs-attr">combined</span> = Mo<span class="hljs-literal">no</span>.zip(userMo<span class="hljs-literal">no</span>, profileMo<span class="hljs-literal">no</span>)
    .map(tuple -&gt; tuple.getT1() + " - " + tuple.getT2())<span class="hljs-comment">;</span>

// zipWith - é“¾å¼ç»„åˆ
Mono&lt;String&gt; <span class="hljs-attr">userWithProfile</span> = userMo<span class="hljs-literal">no</span>
    .zipWith(profileMono, (user, profile) -&gt; user + " : " + profile)<span class="hljs-comment">;</span>

// then - é¡ºåºæ‰§è¡Œï¼ˆå¿½ç•¥å‰ä¸€ä¸ªç»“æœï¼‰
Mono&lt;Void&gt; <span class="hljs-attr">sequence</span> = userMo<span class="hljs-literal">no</span>
    .then(profileMono)
    .then(cleanupOperation())<span class="hljs-comment">;</span>

// when - ç­‰å¾…å¤šä¸ªæ“ä½œå®Œæˆ
Mono&lt;Void&gt; <span class="hljs-attr">allCompleted</span> = Mo<span class="hljs-literal">no</span>.when(userMo<span class="hljs-literal">no</span>, profileMo<span class="hljs-literal">no</span>, scoreMo<span class="hljs-literal">no</span>)<span class="hljs-comment">;</span>

AIå†™ä»£ç java
è¿è¡Œ
12345678910111213141516171819202122
</code></pre>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.5 å‰¯ä½œç”¨æ“ä½œç¬¦</h4>
<p>ç”¨äºæ·»åŠ ç›‘æ§ã€æ—¥å¿—ç­‰å‰¯ä½œç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">Mono&lt;String&gt; businessMono = getBusinessData();

Mono&lt;String&gt; withLogging = businessMono
    .doOnSubscribe(subscription -&gt; 
        <span class="hljs-built_in">log</span>.info(<span class="hljs-string">"Starting business operation"</span>)
    )
    .doOnNext(value -&gt; 
        <span class="hljs-built_in">log</span>.info(<span class="hljs-string">"Processing value: {}"</span>, value)
    )
    .doOnSuccess(value -&gt; 
        <span class="hljs-built_in">log</span>.info(<span class="hljs-string">"Operation completed successfully: {}"</span>, value)
    )
    .doOnError(<span class="hljs-built_in">error</span> -&gt; 
        <span class="hljs-built_in">log</span>.<span class="hljs-built_in">error</span>(<span class="hljs-string">"Operation failed"</span>, <span class="hljs-built_in">error</span>)
    )
    .doOnCancel(() -&gt; 
        <span class="hljs-built_in">log</span>.warn(<span class="hljs-string">"Operation cancelled"</span>)
    )
    .doOnTerminate(() -&gt; 
        <span class="hljs-built_in">log</span>.info(<span class="hljs-string">"Operation terminated"</span>)
    );

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415161718192021</span>
</code></pre>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.6 å·¥å…·æ“ä½œç¬¦</h4>
<pre><code class="hljs language-ini" lang="ini">Mono&lt;String&gt; <span class="hljs-attr">dataMono</span> = getData()<span class="hljs-comment">;</span>

// ç¼“å­˜
Mono&lt;String&gt; <span class="hljs-attr">cached</span> = dataMo<span class="hljs-literal">no</span>.cache(Duration.ofMinutes(<span class="hljs-number">10</span>))<span class="hljs-comment">;</span>

// å»¶è¿Ÿ
Mono&lt;String&gt; <span class="hljs-attr">delayed</span> = dataMo<span class="hljs-literal">no</span>.delayElement(Duration.ofSeconds(<span class="hljs-number">1</span>))<span class="hljs-comment">;</span>

// è¶…æ—¶æ§åˆ¶
Mono&lt;String&gt; <span class="hljs-attr">withTimeout</span> = dataMo<span class="hljs-literal">no</span>.timeout(Duration.ofSeconds(<span class="hljs-number">5</span>))<span class="hljs-comment">;</span>

// é‡å¤ï¼ˆè½¬æ¢ä¸º Fluxï¼‰
Flux&lt;String&gt; <span class="hljs-attr">repeated</span> = dataMo<span class="hljs-literal">no</span>.repeat(<span class="hljs-number">3</span>)<span class="hljs-comment">;</span>

// æ—¥å¿—è°ƒè¯•
Mono&lt;String&gt; <span class="hljs-attr">withLog</span> = dataMo<span class="hljs-literal">no</span>.log(<span class="hljs-string">"data.flow"</span>)<span class="hljs-comment">;</span>

AIå†™ä»£ç java
è¿è¡Œ
12345678910111213141516
</code></pre>
<h3 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.1 å®Œæ•´çš„ç”¨æˆ·è®¢å•å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Mono</span>&lt;<span class="hljs-selector-tag">OrderResult</span>&gt; <span class="hljs-selector-tag">processUserOrder</span>(OrderRequest request) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">validateRequest</span>(request)
        <span class="hljs-selector-class">.flatMap</span>(validated -&gt; 
            inventoryService.<span class="hljs-built_in">checkStock</span>(validated.<span class="hljs-built_in">getProductId</span>(), validated.<span class="hljs-built_in">getQuantity</span>())
        )
        <span class="hljs-selector-class">.flatMap</span>(stockAvailable -&gt; {
            <span class="hljs-selector-tag">if</span> (!stockAvailable) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Mono</span><span class="hljs-selector-class">.error</span>(new <span class="hljs-built_in">InsufficientStockException</span>());
            }
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">processPayment</span>(request);
        })
        <span class="hljs-selector-class">.flatMap</span>(paymentResult -&gt; {
            <span class="hljs-selector-tag">if</span> (paymentResult.<span class="hljs-built_in">isSuccess</span>()) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">createOrder</span>(request)
                    <span class="hljs-selector-class">.flatMap</span>(order -&gt; 
                        <span class="hljs-built_in">updateInventory</span>(order)
                            .<span class="hljs-built_in">then</span>(<span class="hljs-built_in">sendConfirmationEmail</span>(order))
                            .<span class="hljs-built_in">then</span>(Mono.<span class="hljs-built_in">just</span>(OrderResult.<span class="hljs-built_in">success</span>(order)))
                    );
            } <span class="hljs-selector-tag">else</span> {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Mono</span><span class="hljs-selector-class">.just</span>(OrderResult.<span class="hljs-built_in">failed</span>(<span class="hljs-string">"Payment failed: "</span> + paymentResult.<span class="hljs-built_in">getMessage</span>()));
            }
        })
        <span class="hljs-selector-class">.timeout</span>(Duration.<span class="hljs-built_in">ofSeconds</span>(<span class="hljs-number">30</span>))
        <span class="hljs-selector-class">.retryWhen</span>(Retry.<span class="hljs-built_in">backoff</span>(<span class="hljs-number">3</span>, Duration.<span class="hljs-built_in">ofSeconds</span>(<span class="hljs-number">1</span>))
        .<span class="hljs-built_in">doOnSuccess</span>(result -&gt; 
            metricsService.<span class="hljs-built_in">recordOrderSuccess</span>(result.<span class="hljs-built_in">getOrderId</span>())
        )
        .<span class="hljs-built_in">doOnError</span>(error -&gt; {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"Order processing failed for request: {}"</span>, request, error);
            metricsService.<span class="hljs-built_in">recordOrderFailure</span>();
        })
        .<span class="hljs-built_in">onErrorResume</span>(ex -&gt; 
            <span class="hljs-built_in">handleOrderFailure</span>(request, ex)
        );
}

private Mono&lt;OrderResult&gt; <span class="hljs-built_in">handleOrderFailure</span>(OrderRequest request, Throwable ex) {
    <span class="hljs-selector-tag">if</span> (ex instanceof TimeoutException) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Mono</span><span class="hljs-selector-class">.just</span>(OrderResult.<span class="hljs-built_in">failed</span>(<span class="hljs-string">"Order timeout, please try again"</span>));
    } <span class="hljs-selector-tag">else</span> <span class="hljs-selector-tag">if</span> (ex instanceof InsufficientStockException) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Mono</span><span class="hljs-selector-class">.just</span>(OrderResult.<span class="hljs-built_in">failed</span>(<span class="hljs-string">"Insufficient stock"</span>));
    } <span class="hljs-selector-tag">else</span> {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">compensationService</span><span class="hljs-selector-class">.compensateOrder</span>(request)
            <span class="hljs-selector-class">.then</span>(Mono.<span class="hljs-built_in">just</span>(OrderResult.<span class="hljs-built_in">failed</span>(<span class="hljs-string">"System error, order cancelled"</span>)));
    }
}

<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
<span class="hljs-number">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647</span>
</code></pre>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.2 æ‰¹é‡æ•°æ®å¤„ç†æ¨¡å¼</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Flux</span>&lt;<span class="hljs-selector-tag">ProcessedItem</span>&gt; <span class="hljs-selector-tag">processBatch</span>(Flux&lt;InputItem&gt; items) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">items</span>
        <span class="hljs-selector-class">.window</span>(<span class="hljs-number">100</span>) <span class="hljs-comment">// æ¯100ä¸ªå…ƒç´ ä¸ºä¸€ç»„</span>
        <span class="hljs-selector-class">.flatMap</span>(window -&gt; 
            window.<span class="hljs-built_in">flatMap</span>(<span class="hljs-attribute">this</span>::validateItem)
                  .<span class="hljs-built_in">collectList</span>()
                  .<span class="hljs-built_in">flatMap</span>(validatedItems -&gt; 
                      <span class="hljs-built_in">processBatchAsync</span>(validatedItems)
                          .<span class="hljs-built_in">timeout</span>(Duration.<span class="hljs-built_in">ofMinutes</span>(<span class="hljs-number">5</span>))
                          .<span class="hljs-built_in">retry</span>(<span class="hljs-number">2</span>)
                  )
                  .<span class="hljs-built_in">flatMapIterable</span>(<span class="hljs-attribute">ProcessedBatch</span>::getItems)
        )
        <span class="hljs-selector-class">.doOnNext</span>(processed -&gt; 
            log.<span class="hljs-built_in">debug</span>(<span class="hljs-string">"Processed item: {}"</span>, processed.<span class="hljs-built_in">getId</span>())
        )
        <span class="hljs-selector-class">.doOnComplete</span>(() -&gt; 
            log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"Batch processing completed"</span>)
        );
}

<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
<span class="hljs-number">1234567891011121314151617181920</span>
</code></pre>
<h3 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. æœ€ä½³å®è·µä¸æ€§èƒ½è€ƒè™‘</h3>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1 æ“ä½œç¬¦é€‰æ‹©æŒ‡å—</h4>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨åŒæ­¥æ“ä½œ</strong>ï¼šå¦‚æœæ“ä½œæ˜¯ CPU å¯†é›†å‹ä¸”å¿«é€Ÿå®Œæˆï¼Œä½¿ç”¨Â <code>map</code></li>
<li><strong>IO æ“ä½œä½¿ç”¨å¼‚æ­¥</strong>ï¼šæ¶‰åŠç½‘ç»œã€æ•°æ®åº“ç­‰ IO æ“ä½œï¼Œä½¿ç”¨Â <code>flatMap</code></li>
<li><strong>é¿å…é˜»å¡æ“ä½œ</strong>ï¼šä¸è¦åœ¨Â <code>map</code>Â æˆ–Â <code>flatMap</code>Â ä¸­æ‰§è¡Œé˜»å¡æ“ä½œ</li>
<li><strong>åˆç†ä½¿ç”¨å¹¶å‘</strong>ï¼š<code>flatMap</code>Â å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œä½†è¦æ³¨æ„èµ„æºæ§åˆ¶</li>
</ol>
<h4 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 é”™è¯¯å¤„ç†ç­–ç•¥</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// è‰¯å¥½çš„é”™è¯¯å¤„ç†æ¨¡å¼</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Mono</span>&lt;<span class="hljs-selector-tag">ApiResponse</span>&gt; <span class="hljs-selector-tag">robustApiCall</span>() {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">externalService</span><span class="hljs-selector-class">.call</span>()
        <span class="hljs-selector-class">.timeout</span>(Duration.<span class="hljs-built_in">ofSeconds</span>(<span class="hljs-number">10</span>))
        <span class="hljs-selector-class">.retryWhen</span>(Retry.<span class="hljs-built_in">backoff</span>(<span class="hljs-number">3</span>, Duration.<span class="hljs-built_in">ofSeconds</span>(<span class="hljs-number">1</span>)))
        <span class="hljs-selector-class">.onErrorResume</span>(TimeoutException.class, ex -&gt; 
            fallbackService.<span class="hljs-built_in">getData</span>()
        )
        <span class="hljs-selector-class">.onErrorReturn</span>(ApiResponse.<span class="hljs-built_in">error</span>(<span class="hljs-string">"Service unavailable"</span>))
        <span class="hljs-selector-class">.doOnError</span>(ex -&gt; 
            metrics.<span class="hljs-built_in">increment</span>(<span class="hljs-string">"api.call.failed"</span>)
        );
}

<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
<span class="hljs-number">12345678910111213</span>
</code></pre>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.3 è°ƒè¯•ä¸ç›‘æ§</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æ·»åŠ è¯¦ç»†çš„ç›‘æ§ç‚¹</span>
Mono&lt;<span class="hljs-type">String</span>&gt; monitoredOperation = dataSource.<span class="hljs-title function_ invoke__">getData</span>()
    .<span class="hljs-title function_ invoke__">name</span>(<span class="hljs-string">"database.query"</span>)
    .<span class="hljs-title function_ invoke__">metrics</span>()
    .<span class="hljs-title function_ invoke__">doOnSubscribe</span>(s <span class="hljs-punctuation">-&gt;</span> 
        tracer.<span class="hljs-title function_ invoke__">startSpan</span>(<span class="hljs-string">"business-operation"</span>)
    )
    .<span class="hljs-title function_ invoke__">doOnNext</span>(value <span class="hljs-punctuation">-&gt;</span> 
        log.<span class="hljs-title function_ invoke__">debug</span>(<span class="hljs-string">"Intermediate value: {}"</span>, value)
    )
    .<span class="hljs-title function_ invoke__">doOnTerminate</span>(() <span class="hljs-punctuation">-&gt;</span> 
        tracer.<span class="hljs-title function_ invoke__">finishSpan</span>()
    );

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345678910111213</span>
</code></pre>
<h3 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. æ€»ç»“</h3>
<p>Spring WebFlux çš„æ“ä½œç¬¦ä¸ºæ„å»ºå“åº”å¼åº”ç”¨æä¾›äº†å¼ºå¤§çš„å·¥å…·é›†ï¼š</p>
<ul>
<li><strong>map/flatMap</strong>Â æ˜¯æ ¸å¿ƒè½¬æ¢æ“ä½œç¬¦ï¼Œç†è§£å®ƒä»¬çš„åŒºåˆ«æ˜¯æŒæ¡å“åº”å¼ç¼–ç¨‹çš„åŸºç¡€</li>
<li><strong>Mono æ“ä½œç¬¦</strong>Â æ¶µç›–äº†åˆ›å»ºã€è½¬æ¢ã€ç»„åˆã€é”™è¯¯å¤„ç†ç­‰å„ä¸ªæ–¹é¢</li>
<li><strong>åˆç†çš„æ“ä½œç¬¦ç»„åˆ</strong>Â å¯ä»¥æ„å»ºå‡ºæ—¢é«˜æ•ˆåˆå¥å£®çš„å¼‚æ­¥æ•°æ®å¤„ç†æµç¨‹</li>
<li><strong>é”™è¯¯å¤„ç†å’Œç›‘æ§</strong>Â åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è‡³å…³é‡è¦</li>
</ul>
<p>é€šè¿‡ç†Ÿç»ƒæŒæ¡è¿™äº›æ“ä½œç¬¦ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™å‡ºç®€æ´ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„å“åº”å¼ä»£ç ï¼Œå……åˆ†åˆ©ç”¨å“åº”å¼ç¼–ç¨‹çš„ä¼˜åŠ¿æ¥å¤„ç†é«˜å¹¶å‘ã€å¼‚æ­¥çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>è®°ä½ï¼šå“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§æ€ç»´æ¨¡å¼çš„è½¬å˜ï¼Œéœ€è¦ä»ä¼ ç»Ÿçš„åŒæ­¥é˜»å¡æ€ç»´è½¬æ¢ä¸ºå¼‚æ­¥éé˜»å¡çš„æ•°æ®æµå¤„ç†æ€ç»´ã€‚å¤šåŠ ç»ƒä¹ å’Œå®è·µæ˜¯æŒæ¡è¿™äº›æ¦‚å¿µçš„å…³é”®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL æ…¢æŸ¥è¯¢ debugï¼šç´¢å¼•æ²¡ç”Ÿæ•ˆçš„ä¸‰é‡é™·é˜±]]></title>    <link>https://juejin.cn/post/7571726099690258451</link>    <guid>https://juejin.cn/post/7571726099690258451</guid>    <pubDate>2025-11-13T06:22:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571726099690258451" data-draft-id="7571747061386608659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL æ…¢æŸ¥è¯¢ debugï¼šç´¢å¼•æ²¡ç”Ÿæ•ˆçš„ä¸‰é‡é™·é˜±"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-11-13T06:22:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL æ…¢æŸ¥è¯¢ debugï¼šç´¢å¼•æ²¡ç”Ÿæ•ˆçš„ä¸‰é‡é™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:22:13.000Z" title="Thu Nov 13 2025 06:22:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ‘˜è¦</h3>
<p>ä½œä¸ºä¸€ååœ¨æ•°æ®åº“ä¼˜åŒ–æˆ˜åœºä¸Šæ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„è€å…µï¼Œæˆ‘æ·±çŸ¥MySQLæ…¢æŸ¥è¯¢é—®é¢˜æ˜¯æ¯ä¸ªåç«¯å¼€å‘è€…éƒ½ä¼šé‡åˆ°çš„"æ‹¦è·¯è™"ã€‚æœ€è¿‘åœ¨å¤„ç†ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ï¼šæ˜æ˜åˆ›å»ºäº†ç´¢å¼•ï¼ŒæŸ¥è¯¢é€Ÿåº¦å´ä¾ç„¶æ…¢å¦‚èœ—ç‰›ã€‚ç»è¿‡æ·±å…¥åˆ†æï¼Œæˆ‘å‘ç°äº†ç´¢å¼•å¤±æ•ˆçš„ä¸‰ä¸ªéšè”½é™·é˜±ï¼Œè¿™äº›é™·é˜±å°±åƒæ½œä¼åœ¨ä»£ç æ·±å¤„çš„"å¹½çµ"ï¼Œæ‚„æ— å£°æ¯åœ°åå™¬ç€ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p>ç¬¬ä¸€ä¸ªé™·é˜±æ˜¯"éšå¼ç±»å‹è½¬æ¢"ï¼Œå½“æˆ‘ä»¬åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨äº†ä¸å­—æ®µç±»å‹ä¸åŒ¹é…çš„å€¼æ—¶ï¼ŒMySQLä¼šè¿›è¡Œéšå¼è½¬æ¢ï¼Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ç¬¬äºŒä¸ªé™·é˜±æ˜¯"å‡½æ•°åŒ…è£…é™·é˜±"ï¼Œåœ¨ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨å‡½æ•°ä¼šè®©ä¼˜åŒ–å™¨æ— æ³•åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ã€‚ç¬¬ä¸‰ä¸ªé™·é˜±æ˜¯"å¤åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™è¿èƒŒ"ï¼Œè¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†å´å½±å“æœ€å¤§çš„æ€§èƒ½æ€æ‰‹ã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†é€šè¿‡çœŸå®çš„æ¡ˆä¾‹åˆ†æï¼Œå¸¦ä½ æ·±å…¥ç†è§£è¿™ä¸‰ä¸ªé™·é˜±çš„æˆå› ã€è¡¨ç°å’Œè§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å°†ä»æ…¢æŸ¥è¯¢æ—¥å¿—çš„åˆ†æå¼€å§‹ï¼Œé€æ­¥å‰–ææ¯ä¸ªé™·é˜±çš„æŠ€æœ¯ç»†èŠ‚ï¼Œå¹¶æä¾›å¯æ“ä½œçš„ä¼˜åŒ–ç­–ç•¥ã€‚é€šè¿‡EXPLAINæ‰§è¡Œè®¡åˆ’çš„è§£è¯»ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å¿«é€Ÿå®šä½ç´¢å¼•å¤±æ•ˆçš„æ ¹æœ¬åŸå› ã€‚åŒæ—¶ï¼Œæˆ‘è¿˜ä¼šåˆ†äº«ä¸€äº›å®ç”¨çš„ç›‘æ§å·¥å…·å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ åœ¨æ—¥å¸¸å¼€å‘ä¸­é¿å…è¿™äº›é™·é˜±ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ï¼Œæ›´æ˜¯ä¸€æ¬¡ä»é—®é¢˜å‘ç°åˆ°è§£å†³çš„å®Œæ•´æ€ç»´è®­ç»ƒã€‚</p>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. æ…¢æŸ¥è¯¢é—®é¢˜çš„å‘ç°ä¸å®šä½</h3>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.1 æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ</h4>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ…¢æŸ¥è¯¢é—®é¢˜å¾€å¾€éšè—åœ¨æµ·é‡çš„æ—¥å¿—æ•°æ®ä¸­ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦å¼€å¯MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</span>
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> slow_query_log <span class="hljs-operator">=</span> <span class="hljs-string">'ON'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> long_query_time <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> slow_query_log_file <span class="hljs-operator">=</span> <span class="hljs-string">'/var/log/mysql/slow.log'</span>;
 
<span class="hljs-comment">-- æŸ¥çœ‹å½“å‰æ…¢æŸ¥è¯¢é…ç½®</span>
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'slow_query%'</span>;
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'long_query_time'</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œæˆ‘ä»¬å°†è®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’çš„æŸ¥è¯¢ã€‚æ¥ä¸‹æ¥ä½¿ç”¨mysqldumpslowå·¥å…·åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒæŒ‰æŸ¥è¯¢æ—¶é—´æ’åº</span>
mysqldumpslow <span class="hljs-operator">-</span>s t <span class="hljs-operator">-</span>t <span class="hljs-number">10</span> <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span><span class="hljs-built_in">log</span><span class="hljs-operator">/</span>mysql<span class="hljs-operator">/</span>slow.log
 
<span class="hljs-comment"># æŒ‰æŸ¥è¯¢æ¬¡æ•°æ’åº</span>
mysqldumpslow <span class="hljs-operator">-</span>s <span class="hljs-built_in">c</span> <span class="hljs-operator">-</span>t <span class="hljs-number">10</span> <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span><span class="hljs-built_in">log</span><span class="hljs-operator">/</span>mysql<span class="hljs-operator">/</span>slow.log
 
<span class="hljs-comment"># æŒ‰å¹³å‡æŸ¥è¯¢æ—¶é—´æ’åº</span>
mysqldumpslow <span class="hljs-operator">-</span>s at <span class="hljs-operator">-</span>t <span class="hljs-number">10</span> <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span><span class="hljs-built_in">log</span><span class="hljs-operator">/</span>mysql<span class="hljs-operator">/</span>slow.log
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.2 æ€§èƒ½ç›‘æ§ä½“ç³»æ­å»º</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4c7a4190ce4e2ea1f79455f164b8bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=o0gbeCK32gJUENPfJXZFuhL7Q0k%3D" alt="" loading="lazy"/></p>
<p>å›¾1ï¼šMySQLæ€§èƒ½ç›‘æ§ä½“ç³»æ¶æ„å›¾ - å±•ç¤ºäº†ä»åº”ç”¨å±‚åˆ°ç³»ç»Ÿå±‚çš„å®Œæ•´ç›‘æ§é“¾è·¯</p>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. é™·é˜±ä¸€ï¼šéšå¼ç±»å‹è½¬æ¢çš„ç´¢å¼•æ€æ‰‹</h3>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1 é—®é¢˜ç°è±¡ä¸æ¡ˆä¾‹åˆ†æ</h4>
<p>éšå¼ç±»å‹è½¬æ¢æ˜¯æœ€å¸¸è§å´æœ€å®¹æ˜“è¢«å¿½è§†çš„ç´¢å¼•å¤±æ•ˆåŸå› ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºæµ‹è¯•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_orders (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    user_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    order_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    INDEX idx_user_id (user_id)
);
 
<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> user_orders (user_id, order_amount) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'U001'</span>, <span class="hljs-number">299.99</span>), (<span class="hljs-string">'U002'</span>, <span class="hljs-number">199.50</span>), (<span class="hljs-string">'U003'</span>, <span class="hljs-number">399.00</span>);
 
<span class="hljs-comment">-- é—®é¢˜æŸ¥è¯¢ï¼šä½¿ç”¨æ•°å­—æŸ¥è¯¢å­—ç¬¦ä¸²å­—æ®µ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
 
<span class="hljs-comment">-- æ­£ç¡®æŸ¥è¯¢ï¼šä½¿ç”¨å­—ç¬¦ä¸²æŸ¥è¯¢å­—ç¬¦ä¸²å­—æ®µ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-string">'U001'</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<p>ä½¿ç”¨EXPLAINåˆ†æè¿™ä¸¤ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- åˆ†æé—®é¢˜æŸ¥è¯¢
EXPLAIN SELECT * FROM user_orders WHERE <span class="hljs-attr">user_id</span> = <span class="hljs-number">1001</span><span class="hljs-comment">;</span>
-- ç»“æœï¼š<span class="hljs-attr">type</span>=ALL, key=NULL (å…¨è¡¨æ‰«æ)
 
-- åˆ†ææ­£ç¡®æŸ¥è¯¢
EXPLAIN SELECT * FROM user_orders WHERE <span class="hljs-attr">user_id</span> = <span class="hljs-string">'U001'</span><span class="hljs-comment">;</span>
-- ç»“æœï¼š<span class="hljs-attr">type</span>=ref, key=idx_user_id (ä½¿ç”¨ç´¢å¼•)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2 ç±»å‹è½¬æ¢è§„åˆ™ä¸å½±å“</h4>
<p>MySQLçš„éšå¼ç±»å‹è½¬æ¢éµå¾ªç‰¹å®šçš„è§„åˆ™ï¼Œç†è§£è¿™äº›è§„åˆ™å¯¹äºé¿å…ç´¢å¼•å¤±æ•ˆè‡³å…³é‡è¦ï¼š</p>









































<table><thead><tr><th>æºç±»å‹</th><th>ç›®æ ‡ç±»å‹</th><th>è½¬æ¢æ–¹å‘</th><th>ç´¢å¼•å½±å“</th></tr></thead><tbody><tr><td>VARCHAR</td><td>INT</td><td>å­—ç¬¦ä¸²â†’æ•°å­—</td><td>ç´¢å¼•å¤±æ•ˆ</td></tr><tr><td>INT</td><td>VARCHAR</td><td>æ•°å­—â†’å­—ç¬¦ä¸²</td><td>ç´¢å¼•æœ‰æ•ˆ</td></tr><tr><td>DECIMAL</td><td>INT</td><td>å°æ•°â†’æ•´æ•°</td><td>å¯èƒ½å¤±æ•ˆ</td></tr><tr><td>DATE</td><td>DATETIME</td><td>æ—¥æœŸâ†’æ—¥æœŸæ—¶é—´</td><td>ç´¢å¼•æœ‰æ•ˆ</td></tr><tr><td>TIMESTAMP</td><td>DATE</td><td>æ—¶é—´æˆ³â†’æ—¥æœŸ</td><td>ç´¢å¼•å¤±æ•ˆ</td></tr></tbody></table>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.3 æ£€æµ‹ä¸é¢„é˜²ç­–ç•¥</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç±»å‹è½¬æ¢æ£€æµ‹å‡½æ•°</span>
DELIMITER <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> detect_type_conversion(
    table_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>),
    column_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>)
) <span class="hljs-keyword">RETURNS</span> TEXT
<span class="hljs-keyword">READS</span> <span class="hljs-keyword">SQL</span> DATA
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> <span class="hljs-keyword">result</span> TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>;
    <span class="hljs-keyword">DECLARE</span> done <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">FALSE</span>;
    <span class="hljs-keyword">DECLARE</span> query_text TEXT;
    
    <span class="hljs-comment">-- æ£€æµ‹å¸¸è§çš„ç±»å‹è½¬æ¢é—®é¢˜</span>
    <span class="hljs-keyword">SET</span> <span class="hljs-keyword">result</span> <span class="hljs-operator">=</span> CONCAT(
        <span class="hljs-string">'Column: '</span>, column_name, 
        <span class="hljs-string">' - Check for implicit conversions in WHERE clauses'</span>
    );
    
    <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">result</span>;
<span class="hljs-keyword">END</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
DELIMITER ;
 
<span class="hljs-comment">-- ä½¿ç”¨æ€§èƒ½æ¨¡å¼æ£€æµ‹ç±»å‹è½¬æ¢</span>
<span class="hljs-keyword">SELECT</span> 
    DIGEST_TEXT,
    COUNT_STAR,
    AVG_TIMER_WAIT<span class="hljs-operator">/</span><span class="hljs-number">1000000000</span> <span class="hljs-keyword">as</span> avg_time_sec
<span class="hljs-keyword">FROM</span> performance_schema.events_statements_summary_by_digest 
<span class="hljs-keyword">WHERE</span> DIGEST_TEXT <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%WHERE%'</span>
<span class="hljs-keyword">AND</span> DIGEST_TEXT REGEXP <span class="hljs-string">'=[[:space:]]*[0-9]+[[:space:]]*'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> AVG_TIMER_WAIT <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">10</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. é™·é˜±äºŒï¼šå‡½æ•°åŒ…è£…å¯¼è‡´çš„ç´¢å¼•å¤±æ•ˆ</h3>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.1 å‡½æ•°ä½¿ç”¨çš„å¸¸è§è¯¯åŒº</h4>
<p>åœ¨ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨å‡½æ•°æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„ç´¢å¼•å¤±æ•ˆé™·é˜±ã€‚è®©æˆ‘ä»¬é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥åˆ†æï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    order_no <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
    INDEX idx_create_time (create_time),
    INDEX idx_order_no (order_no)
);
 
<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (order_no, create_time, status) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'ORD20240101001'</span>, <span class="hljs-string">'2024-01-01 10:30:00'</span>, <span class="hljs-number">1</span>),
(<span class="hljs-string">'ORD20240101002'</span>, <span class="hljs-string">'2024-01-01 14:20:00'</span>, <span class="hljs-number">2</span>),
(<span class="hljs-string">'ORD20240102001'</span>, <span class="hljs-string">'2024-01-02 09:15:00'</span>, <span class="hljs-number">1</span>);
 
<span class="hljs-comment">-- é”™è¯¯ç”¨æ³•ï¼šåœ¨ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨å‡½æ•°</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(create_time) <span class="hljs-operator">=</span> <span class="hljs-string">'2024-01-01'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-built_in">UPPER</span>(order_no) <span class="hljs-operator">=</span> <span class="hljs-string">'ORD20240101001'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-built_in">SUBSTRING</span>(order_no, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>) <span class="hljs-operator">=</span> <span class="hljs-string">'ORD20240'</span>;
 
<span class="hljs-comment">-- æ­£ç¡®ç”¨æ³•ï¼šé¿å…åœ¨ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨å‡½æ•°</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01 00:00:00'</span> 
<span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-01-02 00:00:00'</span>;
 
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> order_no <span class="hljs-operator">=</span> <span class="hljs-string">'ORD20240101001'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> order_no <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'ORD20240%'</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.2 å‡½æ•°ç´¢å¼•çš„è§£å†³æ–¹æ¡ˆ</h4>
<p>MySQL 8.0å¼•å…¥äº†å‡½æ•°ç´¢å¼•åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å‡½æ•°è¡¨è¾¾å¼ä¸Šåˆ›å»ºç´¢å¼•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MySQL 8.0+ æ”¯æŒå‡½æ•°ç´¢å¼•</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> INDEX idx_date_create ((<span class="hljs-type">DATE</span>(create_time)));
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> INDEX idx_upper_order_no ((<span class="hljs-built_in">UPPER</span>(order_no)));
 
<span class="hljs-comment">-- ç°åœ¨è¿™äº›æŸ¥è¯¢å¯ä»¥ä½¿ç”¨ç´¢å¼•äº†</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(create_time) <span class="hljs-operator">=</span> <span class="hljs-string">'2024-01-01'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-built_in">UPPER</span>(order_no) <span class="hljs-operator">=</span> <span class="hljs-string">'ORD20240101001'</span>;
 
<span class="hljs-comment">-- å¯¹äºMySQL 5.7åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œä½¿ç”¨è™šæ‹Ÿåˆ—</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> create_date <span class="hljs-type">DATE</span> 
GENERATED ALWAYS <span class="hljs-keyword">AS</span> (<span class="hljs-type">DATE</span>(create_time)) VIRTUAL;
 
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> INDEX idx_create_date (create_date);
 
<span class="hljs-comment">-- æŸ¥è¯¢è™šæ‹Ÿåˆ—</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> create_date <span class="hljs-operator">=</span> <span class="hljs-string">'2024-01-01'</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.3 å‡½æ•°æ€§èƒ½å½±å“åˆ†æ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8aeb3211ea2464b9b3af16b210237d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=qnkea9tvgBaQGwObwHWVxANZ1oQ%3D" alt="" loading="lazy"/></p>
<p>å›¾2ï¼šå‡½æ•°å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“è¶‹åŠ¿å›¾ - å±•ç¤ºäº†ä¸åŒå‡½æ•°ç±»å‹å¯¹æŸ¥è¯¢æ‰§è¡Œæ—¶é—´çš„å½±å“</p>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. é™·é˜±ä¸‰ï¼šå¤åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€é™·é˜±</h3>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.1 æœ€å·¦å‰ç¼€åŸåˆ™è¯¦è§£</h4>
<p>å¤åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™æ˜¯MySQLç´¢å¼•ä¼˜åŒ–ä¸­æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼Œè¿èƒŒè¿™ä¸ªåŸåˆ™ä¼šå¯¼è‡´ç´¢å¼•å®Œå…¨å¤±æ•ˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡Œä¸ºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_behavior (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    user_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    action_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    target_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    <span class="hljs-comment">-- åˆ›å»ºå¤åˆç´¢å¼•</span>
    INDEX idx_user_action_time (user_id, action_type, create_time),
    INDEX idx_target_time (target_id, create_time)
);
 
<span class="hljs-comment">-- æ’å…¥æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> user_behavior (user_id, action_type, target_id, create_time) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1001</span>, <span class="hljs-string">'view'</span>, <span class="hljs-number">2001</span>, <span class="hljs-string">'2024-01-01 10:00:00'</span>),
(<span class="hljs-number">1001</span>, <span class="hljs-string">'click'</span>, <span class="hljs-number">2002</span>, <span class="hljs-string">'2024-01-01 11:00:00'</span>),
(<span class="hljs-number">1002</span>, <span class="hljs-string">'view'</span>, <span class="hljs-number">2001</span>, <span class="hljs-string">'2024-01-01 12:00:00'</span>);
 
<span class="hljs-comment">-- èƒ½ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆéµå¾ªæœ€å·¦å‰ç¼€ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> <span class="hljs-keyword">AND</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> <span class="hljs-keyword">AND</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span> 
    <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span>;
 
<span class="hljs-comment">-- ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆè¿èƒŒæœ€å·¦å‰ç¼€ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span> <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.2 ç´¢å¼•ä½¿ç”¨æƒ…å†µåˆ†æ</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ†æç´¢å¼•ä½¿ç”¨æƒ…å†µ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
<span class="hljs-comment">-- key: idx_user_action_time, key_len: 4 (åªä½¿ç”¨äº†user_idéƒ¨åˆ†)</span>
 
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> <span class="hljs-keyword">AND</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span>;
<span class="hljs-comment">-- key: idx_user_action_time, key_len: 86 (ä½¿ç”¨äº†user_id + action_type)</span>
 
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> action_type <span class="hljs-operator">=</span> <span class="hljs-string">'view'</span>;
<span class="hljs-comment">-- key: NULL (ç´¢å¼•å¤±æ•ˆï¼Œå…¨è¡¨æ‰«æ)</span>
 
<span class="hljs-comment">-- æŸ¥çœ‹ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-keyword">SELECT</span> 
    TABLE_NAME,
    INDEX_NAME,
    COLUMN_NAME,
    SEQ_IN_INDEX,
    <span class="hljs-keyword">CARDINALITY</span>
<span class="hljs-keyword">FROM</span> information_schema.STATISTICS 
<span class="hljs-keyword">WHERE</span> TABLE_SCHEMA <span class="hljs-operator">=</span> DATABASE() 
<span class="hljs-keyword">AND</span> TABLE_NAME <span class="hljs-operator">=</span> <span class="hljs-string">'user_behavior'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> INDEX_NAME, SEQ_IN_INDEX;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.3 å¤åˆç´¢å¼•ä¼˜åŒ–ç­–ç•¥</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a43c73a849ac457e8d928aa97b643e35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=F5OvfGoZE%2FWTnNwND9zK1wVHnIA%3D" alt="" loading="lazy"/></p>
<p>å›¾3ï¼šå¤åˆç´¢å¼•æŸ¥è¯¢æ‰§è¡Œæ—¶åºå›¾ - å±•ç¤ºäº†æœ€å·¦å‰ç¼€åŸåˆ™çš„æ‰§è¡Œæµç¨‹</p>
<h3 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. ç´¢å¼•å¤±æ•ˆçš„æ£€æµ‹ä¸ç›‘æ§</h3>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1Â è‡ªåŠ¨åŒ–æ£€æµ‹å·¥å…·</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pymysql
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexEffectivenessMonitor</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host, user, password, database</span>):
        self.connection = pymysql.connect(
            host=host, user=user, password=password, 
            database=database, charset=<span class="hljs-string">'utf8mb4'</span>
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_unused_indexes</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ£€æµ‹æœªä½¿ç”¨çš„ç´¢å¼•"""</span>
        query = <span class="hljs-string">"""
        SELECT 
            t.TABLE_SCHEMA,
            t.TABLE_NAME,
            t.INDEX_NAME,
            t.COLUMN_NAME
        FROM information_schema.STATISTICS t
        LEFT JOIN performance_schema.table_io_waits_summary_by_index_usage p
            ON t.TABLE_SCHEMA = p.OBJECT_SCHEMA
            AND t.TABLE_NAME = p.OBJECT_NAME
            AND t.INDEX_NAME = p.INDEX_NAME
        WHERE t.TABLE_SCHEMA NOT IN ('mysql', 'information_schema', 'performance_schema')
            AND p.INDEX_NAME IS NULL
            AND t.INDEX_NAME != 'PRIMARY'
        ORDER BY t.TABLE_SCHEMA, t.TABLE_NAME, t.INDEX_NAME;
        """</span>
        
        <span class="hljs-keyword">with</span> self.connection.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(query)
            <span class="hljs-keyword">return</span> cursor.fetchall()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_slow_queries</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åˆ†ææ…¢æŸ¥è¯¢ä¸­çš„ç´¢å¼•ä½¿ç”¨æƒ…å†µ"""</span>
        query = <span class="hljs-string">"""
        SELECT 
            DIGEST_TEXT,
            COUNT_STAR as execution_count,
            AVG_TIMER_WAIT/1000000000 as avg_time_seconds,
            SUM_ROWS_EXAMINED/COUNT_STAR as avg_rows_examined,
            SUM_ROWS_SENT/COUNT_STAR as avg_rows_sent
        FROM performance_schema.events_statements_summary_by_digest
        WHERE AVG_TIMER_WAIT &gt; 1000000000  -- è¶…è¿‡1ç§’çš„æŸ¥è¯¢
        ORDER BY AVG_TIMER_WAIT DESC
        LIMIT 20;
        """</span>
        
        <span class="hljs-keyword">with</span> self.connection.cursor() <span class="hljs-keyword">as</span> cursor:
            cursor.execute(query)
            <span class="hljs-keyword">return</span> cursor.fetchall()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_optimization_report</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š"""</span>
        unused_indexes = self.check_unused_indexes()
        slow_queries = self.analyze_slow_queries()
        
        report = {
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'unused_indexes'</span>: unused_indexes,
            <span class="hljs-string">'slow_queries'</span>: slow_queries,
            <span class="hljs-string">'recommendations'</span>: self._generate_recommendations(unused_indexes, slow_queries)
        }
        
        <span class="hljs-keyword">return</span> json.dumps(report, indent=<span class="hljs-number">2</span>, ensure_ascii=<span class="hljs-literal">False</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_generate_recommendations</span>(<span class="hljs-params">self, unused_indexes, slow_queries</span>):
        <span class="hljs-string">"""ç”Ÿæˆä¼˜åŒ–å»ºè®®"""</span>
        recommendations = []
        
        <span class="hljs-keyword">if</span> unused_indexes:
            recommendations.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'unused_indexes'</span>,
                <span class="hljs-string">'message'</span>: <span class="hljs-string">f'å‘ç° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(unused_indexes)}</span> ä¸ªæœªä½¿ç”¨çš„ç´¢å¼•ï¼Œå»ºè®®åˆ é™¤ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´'</span>,
                <span class="hljs-string">'action'</span>: <span class="hljs-string">'DROP INDEX'</span>
            })
        
        <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> slow_queries:
            <span class="hljs-keyword">if</span> query[<span class="hljs-number">3</span>] &gt; <span class="hljs-number">1000</span>:  <span class="hljs-comment"># å¹³å‡æ‰«æè¡Œæ•°è¶…è¿‡1000</span>
                recommendations.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'missing_index'</span>,
                    <span class="hljs-string">'message'</span>: <span class="hljs-string">f'æŸ¥è¯¢æ‰«æè¡Œæ•°è¿‡å¤š: <span class="hljs-subst">{query[<span class="hljs-number">3</span>]:<span class="hljs-number">.0</span>f}</span>'</span>,
                    <span class="hljs-string">'query'</span>: query[<span class="hljs-number">0</span>][:<span class="hljs-number">100</span>] + <span class="hljs-string">'...'</span>,
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'ADD INDEX'</span>
                })
        
        <span class="hljs-keyword">return</span> recommendations
 
<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
monitor = IndexEffectivenessMonitor(<span class="hljs-string">'localhost'</span>, <span class="hljs-string">'root'</span>, <span class="hljs-string">'password'</span>, <span class="hljs-string">'testdb'</span>)
report = monitor.generate_optimization_report()
<span class="hljs-built_in">print</span>(report)
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 æ€§èƒ½åŸºå‡†æµ‹è¯•</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºæ€§èƒ½æµ‹è¯•å­˜å‚¨è¿‡ç¨‹</span>
DELIMITER <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> benchmark_index_performance()
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> i <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">DECLARE</span> start_time <span class="hljs-type">TIMESTAMP</span>;
    <span class="hljs-keyword">DECLARE</span> end_time <span class="hljs-type">TIMESTAMP</span>;
    
    <span class="hljs-comment">-- æ¸…ç©ºæŸ¥è¯¢ç¼“å­˜</span>
    RESET QUERY CACHE;
    
    <span class="hljs-comment">-- æµ‹è¯•æœ‰ç´¢å¼•çš„æŸ¥è¯¢</span>
    <span class="hljs-keyword">SET</span> start_time <span class="hljs-operator">=</span> NOW(<span class="hljs-number">6</span>);
    WHILE i <span class="hljs-operator">&lt;=</span> <span class="hljs-number">1000</span> DO
        <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">END</span> WHILE;
    <span class="hljs-keyword">SET</span> end_time <span class="hljs-operator">=</span> NOW(<span class="hljs-number">6</span>);
    
    <span class="hljs-keyword">SELECT</span> <span class="hljs-string">'With Index'</span> <span class="hljs-keyword">as</span> test_type, 
           TIMESTAMPDIFF(MICROSECOND, start_time, end_time) <span class="hljs-keyword">as</span> execution_time_microseconds;
    
    <span class="hljs-comment">-- æµ‹è¯•æ— ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆä¸´æ—¶åˆ é™¤ç´¢å¼•ï¼‰</span>
    <span class="hljs-keyword">DROP</span> INDEX idx_user_action_time <span class="hljs-keyword">ON</span> user_behavior;
    
    <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">SET</span> start_time <span class="hljs-operator">=</span> NOW(<span class="hljs-number">6</span>);
    WHILE i <span class="hljs-operator">&lt;=</span> <span class="hljs-number">1000</span> DO
        <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> user_behavior <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">END</span> WHILE;
    <span class="hljs-keyword">SET</span> end_time <span class="hljs-operator">=</span> NOW(<span class="hljs-number">6</span>);
    
    <span class="hljs-keyword">SELECT</span> <span class="hljs-string">'Without Index'</span> <span class="hljs-keyword">as</span> test_type,
           TIMESTAMPDIFF(MICROSECOND, start_time, end_time) <span class="hljs-keyword">as</span> execution_time_microseconds;
    
    <span class="hljs-comment">-- é‡æ–°åˆ›å»ºç´¢å¼•</span>
    <span class="hljs-keyword">CREATE</span> INDEX idx_user_action_time <span class="hljs-keyword">ON</span> user_behavior (user_id, action_type, create_time);
<span class="hljs-keyword">END</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
DELIMITER ;
 
<span class="hljs-comment">-- æ‰§è¡Œæ€§èƒ½æµ‹è¯•</span>
<span class="hljs-keyword">CALL</span> benchmark_index_performance();
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. ä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.1 ç´¢å¼•è®¾è®¡åŸåˆ™</h4>
<p>"å¥½çš„ç´¢å¼•è®¾è®¡æ˜¯æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–çš„åŸºçŸ³ã€‚ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¦ç²¾å‡†å‘½ä¸­æŸ¥è¯¢éœ€æ±‚ï¼Œé¿å…ç»´æŠ¤æˆæœ¬è¿‡é«˜ã€‚" â€”â€” æ•°æ®åº“ä¼˜åŒ–ç®´è¨€</p>
<p>åŸºäºå¤šå¹´çš„å®è·µç»éªŒï¼Œæˆ‘æ€»ç»“å‡ºä»¥ä¸‹ç´¢å¼•è®¾è®¡åŸåˆ™ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. é€‰æ‹©æ€§åŸåˆ™ï¼šä¼˜å…ˆä¸ºé«˜é€‰æ‹©æ€§å­—æ®µåˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> 
    COLUMN_NAME,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> COLUMN_NAME) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> selectivity
<span class="hljs-keyword">FROM</span> information_schema.COLUMNS c
<span class="hljs-keyword">JOIN</span> your_table t <span class="hljs-keyword">ON</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>
<span class="hljs-keyword">WHERE</span> c.TABLE_NAME <span class="hljs-operator">=</span> <span class="hljs-string">'your_table'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> COLUMN_NAME
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> selectivity <span class="hljs-keyword">DESC</span>;
 
<span class="hljs-comment">-- 2. è¦†ç›–ç´¢å¼•åŸåˆ™ï¼šè®©ç´¢å¼•åŒ…å«æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰å­—æ®µ</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_covering <span class="hljs-keyword">ON</span> orders (user_id, status, create_time, order_amount);
 
<span class="hljs-comment">-- 3. å‰ç¼€ç´¢å¼•åŸåˆ™ï¼šå¯¹äºé•¿å­—ç¬¦ä¸²å­—æ®µä½¿ç”¨å‰ç¼€ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_order_no_prefix <span class="hljs-keyword">ON</span> orders (order_no(<span class="hljs-number">10</span>));
 
<span class="hljs-comment">-- 4. ç´¢å¼•åˆå¹¶åŸåˆ™ï¼šé¿å…åˆ›å»ºè¿‡å¤šå•åˆ—ç´¢å¼•</span>
<span class="hljs-comment">-- é”™è¯¯åšæ³•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_id <span class="hljs-keyword">ON</span> orders (user_id);
<span class="hljs-keyword">CREATE</span> INDEX idx_status <span class="hljs-keyword">ON</span> orders (status);
<span class="hljs-keyword">CREATE</span> INDEX idx_create_time <span class="hljs-keyword">ON</span> orders (create_time);
 
<span class="hljs-comment">-- æ­£ç¡®åšæ³•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status_time <span class="hljs-keyword">ON</span> orders (user_id, status, create_time);
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-21"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.2 æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33e50bf08a994edb9328ebdeafd3bdaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=b6y7I8TcEHQPXd2f3LAplxaRBWM%3D" alt="" loading="lazy"/></p>
<p>å›¾4ï¼šæŸ¥è¯¢ä¼˜åŒ–ä¼˜å…ˆçº§çŸ©é˜µå›¾ - å±•ç¤ºäº†ä¸åŒä¼˜åŒ–ç­–ç•¥çš„å½±å“ç¨‹åº¦å’Œå®æ–½éš¾åº¦</p>
<h4 data-id="heading-22"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.3 ç›‘æ§å‘Šè­¦ä½“ç³»</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># MySQLæ€§èƒ½ç›‘æ§é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">mysql_monitoring:</span>
  <span class="hljs-attr">slow_query_threshold:</span> <span class="hljs-number">2.0</span>  <span class="hljs-comment"># æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆç§’ï¼‰</span>
  
  <span class="hljs-attr">alerts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"æ…¢æŸ¥è¯¢æ•°é‡å‘Šè­¦"</span>
      <span class="hljs-attr">condition:</span> <span class="hljs-string">"slow_queries_per_minute &gt; 10"</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">"warning"</span>
      
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"ç´¢å¼•å¤±æ•ˆå‘Šè­¦"</span>
      <span class="hljs-attr">condition:</span> <span class="hljs-string">"full_table_scans_per_minute &gt; 5"</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">"critical"</span>
      
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"è¿æ¥æ•°å‘Šè­¦"</span>
      <span class="hljs-attr">condition:</span> <span class="hljs-string">"active_connections &gt; 80% of max_connections"</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">"warning"</span>
  
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">query_response_time</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">index_usage_ratio</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">table_scan_ratio</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">connection_utilization</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">buffer_pool_hit_ratio</span>
<span class="hljs-string">AIå†™ä»£ç python</span>
<span class="hljs-string">è¿è¡Œ</span>
</code></pre>
<h3 data-id="heading-23"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†ç³»ç»Ÿä¼˜åŒ–å®å½•</h3>
<h4 data-id="heading-24"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.1 é—®é¢˜èƒŒæ™¯</h4>
<p>åœ¨ä¸€ä¸ªæ—¥è®¢å•é‡10ä¸‡+çš„ç”µå•†ç³»ç»Ÿä¸­ï¼Œè®¢å•æŸ¥è¯¢æ¥å£å“åº”æ—¶é—´ä»åŸæ¥çš„100msæ¿€å¢åˆ°5ç§’ä»¥ä¸Šï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.2 é—®é¢˜æ’æŸ¥è¿‡ç¨‹</h4>
<pre><code class="hljs language-vbnet" lang="vbnet">-- <span class="hljs-number">1</span>. åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—
<span class="hljs-keyword">SELECT</span> 
    sql_text,
    exec_count,
    avg_timer_wait/<span class="hljs-number">1000000000</span> <span class="hljs-keyword">as</span> avg_time_sec,
    sum_rows_examined/exec_count <span class="hljs-keyword">as</span> avg_rows_examined
<span class="hljs-keyword">FROM</span> performance_schema.events_statements_summary_by_digest
<span class="hljs-keyword">WHERE</span> avg_timer_wait &gt; <span class="hljs-number">1000000000</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> avg_timer_wait DESC;
 
-- <span class="hljs-number">2</span>. å‘ç°é—®é¢˜SQL
<span class="hljs-keyword">SELECT</span> o.*, u.username, p.product_name 
<span class="hljs-keyword">FROM</span> orders o
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> o.user_id = u.id
<span class="hljs-keyword">JOIN</span> order_items oi <span class="hljs-keyword">ON</span> o.id = oi.order_id
<span class="hljs-keyword">JOIN</span> products p <span class="hljs-keyword">ON</span> oi.product_id = p.id
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(o.create_time) = <span class="hljs-comment">'2024-01-15'</span>
<span class="hljs-built_in">AND</span> o.status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-built_in">AND</span> u.user_type = <span class="hljs-comment">'VIP';</span>
 
-- <span class="hljs-number">3</span>. åˆ†ææ‰§è¡Œè®¡åˆ’
EXPLAIN <span class="hljs-keyword">SELECT</span> o.*, u.username, p.product_name 
<span class="hljs-keyword">FROM</span> orders o
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> o.user_id = u.id
<span class="hljs-keyword">JOIN</span> order_items oi <span class="hljs-keyword">ON</span> o.id = oi.order_id
<span class="hljs-keyword">JOIN</span> products p <span class="hljs-keyword">ON</span> oi.product_id = p.id
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(o.create_time) = <span class="hljs-comment">'2024-01-15'</span>
<span class="hljs-built_in">AND</span> o.status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-built_in">AND</span> u.user_type = <span class="hljs-comment">'VIP';</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-26"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.3 ä¼˜åŒ–æ–¹æ¡ˆå®æ–½</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¼˜åŒ–å‰çš„ç´¢å¼•ç»“æ„</span>
<span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> orders;
<span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> users;
<span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> order_items;
<span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> products;
 
<span class="hljs-comment">-- ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šä¿®å¤å‡½æ•°ç´¢å¼•é—®é¢˜</span>
<span class="hljs-comment">-- åŸé—®é¢˜ï¼šWHERE DATE(o.create_time) = '2024-01-15'</span>
<span class="hljs-comment">-- è§£å†³æ–¹æ¡ˆï¼šæ”¹ä¸ºèŒƒå›´æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.username, p.product_name 
<span class="hljs-keyword">FROM</span> orders o
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id
<span class="hljs-keyword">JOIN</span> order_items oi <span class="hljs-keyword">ON</span> o.id <span class="hljs-operator">=</span> oi.order_id
<span class="hljs-keyword">JOIN</span> products p <span class="hljs-keyword">ON</span> oi.product_id <span class="hljs-operator">=</span> p.id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-15 00:00:00'</span>
<span class="hljs-keyword">AND</span> o.create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-01-16 00:00:00'</span>
<span class="hljs-keyword">AND</span> o.status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-keyword">AND</span> u.user_type <span class="hljs-operator">=</span> <span class="hljs-string">'VIP'</span>;
 
<span class="hljs-comment">-- ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šåˆ›å»ºå¤åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_orders_time_status <span class="hljs-keyword">ON</span> orders (create_time, status);
<span class="hljs-keyword">CREATE</span> INDEX idx_users_type <span class="hljs-keyword">ON</span> users (user_type);
<span class="hljs-keyword">CREATE</span> INDEX idx_order_items_order_product <span class="hljs-keyword">ON</span> order_items (order_id, product_id);
 
<span class="hljs-comment">-- ä¼˜åŒ–æ–¹æ¡ˆ3ï¼šæŸ¥è¯¢é‡å†™ï¼Œå‡å°‘JOIN</span>
<span class="hljs-comment">-- åˆ†æ­¥æŸ¥è¯¢ï¼Œå…ˆç­›é€‰å†å…³è”</span>
<span class="hljs-keyword">SELECT</span> o.id, o.user_id, o.create_time, o.status
<span class="hljs-keyword">FROM</span> orders o
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-15 00:00:00'</span>
<span class="hljs-keyword">AND</span> o.create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-01-16 00:00:00'</span>
<span class="hljs-keyword">AND</span> o.status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
 
<span class="hljs-comment">-- ç„¶ååŸºäºç»“æœè¿›è¡Œå…³è”æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.username, p.product_name 
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-15 00:00:00'</span>
    <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-01-16 00:00:00'</span>
    <span class="hljs-keyword">AND</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    LIMIT <span class="hljs-number">1000</span>
) o
<span class="hljs-keyword">JOIN</span> users u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id <span class="hljs-keyword">AND</span> u.user_type <span class="hljs-operator">=</span> <span class="hljs-string">'VIP'</span>
<span class="hljs-keyword">JOIN</span> order_items oi <span class="hljs-keyword">ON</span> o.id <span class="hljs-operator">=</span> oi.order_id
<span class="hljs-keyword">JOIN</span> products p <span class="hljs-keyword">ON</span> oi.product_id <span class="hljs-operator">=</span> p.id;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-27"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.4 ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</h4>









































<table><thead><tr><th>ä¼˜åŒ–é¡¹ç›®</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td>å¹³å‡å“åº”æ—¶é—´</td><td>5.2ç§’</td><td>0.15ç§’</td><td>97.1%</td></tr><tr><td>æ‰«æè¡Œæ•°</td><td>500ä¸‡+</td><td>1200</td><td>99.98%</td></tr><tr><td>CPUä½¿ç”¨ç‡</td><td>85%</td><td>12%</td><td>85.9%</td></tr><tr><td>å¹¶å‘å¤„ç†èƒ½åŠ›</td><td>50 QPS</td><td>800 QPS</td><td>1500%</td></tr><tr><td>ç´¢å¼•å‘½ä¸­ç‡</td><td>15%</td><td>95%</td><td>533%</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beef29dff25a4c0f9fdf4a0b8b853c75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=nwXSsiuMFMwhCT094K37xDZeJtc%3D" alt="" loading="lazy"/></p>
<p>å›¾5ï¼šä¼˜åŒ–åæŸ¥è¯¢æ€§èƒ½åˆ†å¸ƒé¥¼å›¾ - å±•ç¤ºäº†ç´¢å¼•ä¼˜åŒ–åçš„æŸ¥è¯¢ç±»å‹å æ¯”</p>
<h3 data-id="heading-28"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. è¿›é˜¶ä¼˜åŒ–æŠ€æœ¯</h3>
<h4 data-id="heading-29"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.1 åˆ†åŒºè¡¨ä¸ç´¢å¼•ç­–ç•¥</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåˆ†åŒºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_partitioned (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    user_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    order_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    create_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,
    INDEX idx_user_status (user_id, status),
    INDEX idx_create_time (create_time)
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (<span class="hljs-keyword">YEAR</span>(create_time)) (
    <span class="hljs-keyword">PARTITION</span> p2022 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">2023</span>),
    <span class="hljs-keyword">PARTITION</span> p2023 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">2024</span>),
    <span class="hljs-keyword">PARTITION</span> p2024 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">2025</span>),
    <span class="hljs-keyword">PARTITION</span> p2025 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">2026</span>)
);
 
<span class="hljs-comment">-- åˆ†åŒºè£å‰ªæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders_partitioned 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span> 
<span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-02-01'</span>
<span class="hljs-keyword">AND</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-30"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.2 è¯»å†™åˆ†ç¦»ä¸ç´¢å¼•åŒæ­¥</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseRouter</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.master_db = self._connect_master()
        self.slave_dbs = [self._connect_slave(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)]
        self.current_slave = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_read_query</span>(<span class="hljs-params">self, query, use_index_hint=<span class="hljs-literal">True</span></span>):
        <span class="hljs-string">"""æ‰§è¡Œè¯»æŸ¥è¯¢ï¼Œè‡ªåŠ¨é€‰æ‹©ä»åº“"""</span>
        <span class="hljs-keyword">if</span> use_index_hint:
            query = self._add_index_hints(query)
        
        slave_db = self._get_next_slave()
        <span class="hljs-keyword">return</span> slave_db.execute(query)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_write_query</span>(<span class="hljs-params">self, query</span>):
        <span class="hljs-string">"""æ‰§è¡Œå†™æŸ¥è¯¢ï¼Œä½¿ç”¨ä¸»åº“"""</span>
        <span class="hljs-keyword">return</span> self.master_db.execute(query)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_add_index_hints</span>(<span class="hljs-params">self, query</span>):
        <span class="hljs-string">"""è‡ªåŠ¨æ·»åŠ ç´¢å¼•æç¤º"""</span>
        <span class="hljs-comment"># åˆ†ææŸ¥è¯¢å¹¶æ·»åŠ é€‚å½“çš„ç´¢å¼•æç¤º</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'WHERE user_id'</span> <span class="hljs-keyword">in</span> query:
            query = query.replace(<span class="hljs-string">'FROM orders'</span>, <span class="hljs-string">'FROM orders USE INDEX (idx_user_id)'</span>)
        <span class="hljs-keyword">return</span> query
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_next_slave</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è½®è¯¢é€‰æ‹©ä»åº“"""</span>
        slave = self.slave_dbs[self.current_slave]
        self.current_slave = (self.current_slave + <span class="hljs-number">1</span>) % <span class="hljs-built_in">len</span>(self.slave_dbs)
        <span class="hljs-keyword">return</span> slave
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h4 data-id="heading-31"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.3 æ™ºèƒ½ç´¢å¼•æ¨èç³»ç»Ÿ</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•æ¨èåˆ†æè§†å›¾</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> index_recommendation <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    t.TABLE_SCHEMA,
    t.TABLE_NAME,
    GROUP_CONCAT(<span class="hljs-keyword">DISTINCT</span> 
        <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> s.COLUMN_NAME <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> 
        <span class="hljs-keyword">THEN</span> CONCAT(<span class="hljs-string">'WHERE '</span>, s.COLUMN_NAME) <span class="hljs-keyword">END</span>
    ) <span class="hljs-keyword">as</span> missing_indexes,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> s.DIGEST) <span class="hljs-keyword">as</span> query_count,
    <span class="hljs-built_in">AVG</span>(s.AVG_TIMER_WAIT)<span class="hljs-operator">/</span><span class="hljs-number">1000000000</span> <span class="hljs-keyword">as</span> avg_time_seconds
<span class="hljs-keyword">FROM</span> information_schema.TABLES t
<span class="hljs-keyword">JOIN</span> performance_schema.events_statements_summary_by_digest s
    <span class="hljs-keyword">ON</span> s.DIGEST_TEXT <span class="hljs-keyword">LIKE</span> CONCAT(<span class="hljs-string">'%'</span>, t.TABLE_NAME, <span class="hljs-string">'%'</span>)
<span class="hljs-keyword">WHERE</span> t.TABLE_SCHEMA <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">'mysql'</span>, <span class="hljs-string">'information_schema'</span>, <span class="hljs-string">'performance_schema'</span>)
    <span class="hljs-keyword">AND</span> s.AVG_TIMER_WAIT <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000000000</span>
    <span class="hljs-keyword">AND</span> s.DIGEST_TEXT REGEXP <span class="hljs-string">'WHERE.*='</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> t.TABLE_SCHEMA, t.TABLE_NAME
<span class="hljs-keyword">HAVING</span> query_count <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> avg_time_seconds <span class="hljs-keyword">DESC</span>;
 
<span class="hljs-comment">-- æŸ¥çœ‹æ¨èç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> index_recommendation LIMIT <span class="hljs-number">10</span>;
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-32"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9. ç›‘æ§ä¸å‘Šè­¦ä½“ç³»</h3>
<h4 data-id="heading-33"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9.1 å®æ—¶ç›‘æ§ä»ªè¡¨æ¿</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15df376caaff4fd0beef7cbfa0bfde40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619733&amp;x-signature=Za3WVIosiwIO%2F%2F0lwHZE%2FPjLgzI%3D" alt="" loading="lazy"/></p>
<p>å›¾6ï¼šMySQLæ€§èƒ½ç›‘æ§ç”¨æˆ·æ—…ç¨‹å›¾ - å±•ç¤ºäº†ä»é—®é¢˜å‘ç°åˆ°è§£å†³çš„å®Œæ•´æµç¨‹</p>
<h4 data-id="heading-34"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9.2 è‡ªåŠ¨åŒ–ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySQLOptimizationAdvisor</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_connection</span>):
        self.db = db_connection
        self.rules = self._load_optimization_rules()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_and_recommend</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åˆ†ææ•°æ®åº“å¹¶æä¾›ä¼˜åŒ–å»ºè®®"""</span>
        recommendations = []
        
        <span class="hljs-comment"># æ£€æŸ¥æ…¢æŸ¥è¯¢</span>
        slow_queries = self._get_slow_queries()
        <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> slow_queries:
            <span class="hljs-keyword">if</span> self._has_function_in_where(query[<span class="hljs-string">'sql'</span>]):
                recommendations.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'function_optimization'</span>,
                    <span class="hljs-string">'priority'</span>: <span class="hljs-string">'high'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'æ£€æµ‹åˆ°WHEREå­å¥ä¸­ä½¿ç”¨å‡½æ•°ï¼Œå»ºè®®é‡å†™æŸ¥è¯¢'</span>,
                    <span class="hljs-string">'sql'</span>: query[<span class="hljs-string">'sql'</span>],
                    <span class="hljs-string">'suggestion'</span>: self._suggest_function_fix(query[<span class="hljs-string">'sql'</span>])
                })
        
        <span class="hljs-comment"># æ£€æŸ¥æœªä½¿ç”¨çš„ç´¢å¼•</span>
        unused_indexes = self._get_unused_indexes()
        <span class="hljs-keyword">if</span> unused_indexes:
            recommendations.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'unused_index_cleanup'</span>,
                <span class="hljs-string">'priority'</span>: <span class="hljs-string">'medium'</span>,
                <span class="hljs-string">'description'</span>: <span class="hljs-string">f'å‘ç°<span class="hljs-subst">{<span class="hljs-built_in">len</span>(unused_indexes)}</span>ä¸ªæœªä½¿ç”¨çš„ç´¢å¼•'</span>,
                <span class="hljs-string">'indexes'</span>: unused_indexes,
                <span class="hljs-string">'suggestion'</span>: <span class="hljs-string">'DROP INDEX statements'</span>
            })
        
        <span class="hljs-comment"># æ£€æŸ¥ç¼ºå¤±çš„ç´¢å¼•</span>
        missing_indexes = self._suggest_missing_indexes()
        <span class="hljs-keyword">for</span> suggestion <span class="hljs-keyword">in</span> missing_indexes:
            recommendations.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'missing_index'</span>,
                <span class="hljs-string">'priority'</span>: <span class="hljs-string">'high'</span>,
                <span class="hljs-string">'description'</span>: <span class="hljs-string">'å»ºè®®åˆ›å»ºç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½'</span>,
                <span class="hljs-string">'table'</span>: suggestion[<span class="hljs-string">'table'</span>],
                <span class="hljs-string">'columns'</span>: suggestion[<span class="hljs-string">'columns'</span>],
                <span class="hljs-string">'suggestion'</span>: suggestion[<span class="hljs-string">'create_sql'</span>]
            })
        
        <span class="hljs-keyword">return</span> self._prioritize_recommendations(recommendations)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_suggest_function_fix</span>(<span class="hljs-params">self, sql</span>):
        <span class="hljs-string">"""å»ºè®®å‡½æ•°æŸ¥è¯¢çš„ä¿®å¤æ–¹æ¡ˆ"""</span>
        fixes = {
            <span class="hljs-string">'DATE('</span>: <span class="hljs-string">'ä½¿ç”¨èŒƒå›´æŸ¥è¯¢æ›¿ä»£DATE()å‡½æ•°'</span>,
            <span class="hljs-string">'UPPER('</span>: <span class="hljs-string">'è€ƒè™‘åˆ›å»ºå‡½æ•°ç´¢å¼•æˆ–ä½¿ç”¨COLLATE'</span>,
            <span class="hljs-string">'SUBSTRING('</span>: <span class="hljs-string">'ä½¿ç”¨LIKEæ“ä½œç¬¦æˆ–å‰ç¼€ç´¢å¼•'</span>
        }
        
        <span class="hljs-keyword">for</span> func, suggestion <span class="hljs-keyword">in</span> fixes.items():
            <span class="hljs-keyword">if</span> func <span class="hljs-keyword">in</span> sql:
                <span class="hljs-keyword">return</span> suggestion
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">'é‡å†™æŸ¥è¯¢ä»¥é¿å…åœ¨ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨å‡½æ•°'</span>
AIå†™ä»£ç python
è¿è¡Œ
</code></pre>
<h3 data-id="heading-35"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10. æ€»ç»“ä¸å±•æœ›</h3>
<p>ç»è¿‡è¿™æ¬¡æ·±å…¥çš„[MySQLæ…¢æŸ¥è¯¢ä¼˜åŒ–]ä¹‹æ—…ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°ç´¢å¼•ä¼˜åŒ–çš„å¤æ‚æ€§å’Œé‡è¦æ€§ã€‚ä¸‰ä¸ªä¸»è¦é™·é˜±â€”â€”éšå¼ç±»å‹è½¬æ¢ã€å‡½æ•°åŒ…è£…å’Œæœ€å·¦å‰ç¼€åŸåˆ™è¿èƒŒï¼Œçœ‹ä¼¼ç®€å•å´å¾€å¾€æ˜¯æ€§èƒ½ç“¶é¢ˆçš„æ ¹æºã€‚åœ¨å®é™…çš„ç”µå•†ç³»ç»Ÿä¼˜åŒ–æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç³»ç»Ÿæ€§çš„åˆ†æå’Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œå°†æŸ¥è¯¢å“åº”æ—¶é—´ä»5ç§’é™ä½åˆ°150æ¯«ç§’ï¼Œæ€§èƒ½æå‡äº†97%ä»¥ä¸Šã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹è®©æˆ‘è®¤è¯†åˆ°ï¼Œæ•°æ®åº“ä¼˜åŒ–ä¸ä»…ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ã€‚å®ƒéœ€è¦æˆ‘ä»¬å…·å¤‡å…¨å±€è§†é‡ï¼Œä»åº”ç”¨æ¶æ„ã€æŸ¥è¯¢è®¾è®¡ã€ç´¢å¼•ç­–ç•¥åˆ°ç›‘æ§ä½“ç³»ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ä¸èƒ½å¿½è§†ã€‚ç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„æ—¥ç›Šæ™®åŠçš„ä»Šå¤©ï¼Œæ•°æ®åº“æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ€§æ›´åŠ å‡¸æ˜¾ã€‚</p>
<p>å›é¡¾æ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹ï¼Œæˆ‘æ€»ç»“å‡ºå‡ ä¸ªå…³é”®è¦ç‚¹ï¼šé¦–å…ˆï¼Œé¢„é˜²èƒœäºæ²»ç–—ï¼Œåœ¨è®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘ç´¢å¼•ç­–ç•¥ï¼›å…¶æ¬¡ï¼Œç›‘æ§ä½“ç³»æ˜¯å‘ç°é—®é¢˜çš„çœ¼ç›ï¼Œæ²¡æœ‰ç›‘æ§å°±æ²¡æœ‰ä¼˜åŒ–çš„åŸºç¡€ï¼›æœ€åï¼Œä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦å»ºç«‹é•¿æ•ˆæœºåˆ¶ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼Œéšç€MySQL 8.0æ–°ç‰¹æ€§çš„æ™®åŠï¼Œå¦‚å‡½æ•°ç´¢å¼•ã€éšè—ç´¢å¼•ã€ç›´æ–¹å›¾ç»Ÿè®¡ç­‰åŠŸèƒ½å°†ä¸ºæˆ‘ä»¬æä¾›æ›´å¤šä¼˜åŒ–æ‰‹æ®µã€‚åŒæ—¶ï¼ŒAIé©±åŠ¨çš„æ•°æ®åº“è‡ªåŠ¨è°ƒä¼˜æŠ€æœ¯ä¹Ÿåœ¨å¿«é€Ÿå‘å±•ï¼Œç›¸ä¿¡ä¸ä¹…çš„å°†æ¥ï¼Œå¾ˆå¤šä¼˜åŒ–å·¥ä½œéƒ½èƒ½å®ç°è‡ªåŠ¨åŒ–ã€‚ä½†æ— è®ºæŠ€æœ¯å¦‚ä½•å‘å±•ï¼Œæ·±å…¥ç†è§£æ•°æ®åº“åŸç†ã€æŒæ¡æ€§èƒ½åˆ†ææ–¹æ³•å§‹ç»ˆæ˜¯æˆ‘ä»¬ä½œä¸ºæŠ€æœ¯äººå‘˜çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p>åœ¨è¿™ä¸ªæ•°æ®é©±åŠ¨çš„æ—¶ä»£ï¼Œæ¯ä¸€æ¬¡æŸ¥è¯¢ä¼˜åŒ–éƒ½æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„æå‡ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è®¾è®¡éƒ½æ‰¿è½½ç€ä¸šåŠ¡æˆåŠŸçš„å¸Œæœ›ã€‚è®©æˆ‘ä»¬ç»§ç»­åœ¨æ•°æ®åº“ä¼˜åŒ–çš„é“è·¯ä¸Šæ¢ç´¢å‰è¡Œï¼Œç”¨æŠ€æœ¯çš„åŠ›é‡åˆ›é€ æ›´å¤§çš„ä»·å€¼ã€‚è®°ä½ï¼Œä¼˜ç§€çš„DBAä¸æ˜¯è§£å†³é—®é¢˜æœ€å¤šçš„äººï¼Œè€Œæ˜¯é¢„é˜²é—®é¢˜æœ€å¥½çš„äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Javaè€å…µåˆ°AIå¼€å‘å®æˆ˜ï¼šæˆ‘çœ¼ä¸­çš„ TRAE SOLO åŠ©åŠ›å®è·µè½åœ°]]></title>    <link>https://juejin.cn/post/7571742703534456868</link>    <guid>https://juejin.cn/post/7571742703534456868</guid>    <pubDate>2025-11-13T06:23:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571742703534456868" data-draft-id="7571747061386641427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Javaè€å…µåˆ°AIå¼€å‘å®æˆ˜ï¼šæˆ‘çœ¼ä¸­çš„ TRAE SOLO åŠ©åŠ›å®è·µè½åœ°"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-13T06:23:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Javaè€å…µåˆ°AIå¼€å‘å®æˆ˜ï¼šæˆ‘çœ¼ä¸­çš„ TRAE SOLO åŠ©åŠ›å®è·µè½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:23:50.000Z" title="Thu Nov 13 2025 06:23:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»Javaè€å…µåˆ°AIå¼€å‘å®æˆ˜ï¼šæˆ‘çœ¼ä¸­çš„ TRAE SOLO åŠ©åŠ›å®è·µè½åœ°</h2>
<blockquote>
<p>ä½œè€…ï¼šå¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
æ—¶é—´ï¼š2025å¹´11æœˆ</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å†™åœ¨å‰é¢ï¼šä¸ºä»€ä¹ˆæˆ‘å¼€å§‹ä½¿ç”¨ TRAE SOLOï¼Ÿ</h3>
<p>ä½œä¸ºä¸€ä¸ªæœ‰8å¹´Javaå¼€å‘ç»éªŒçš„ç¨‹åºå‘˜ï¼Œæˆ‘ä¸€ç›´åœ¨è¿½é€æŠ€æœ¯æµªæ½®çš„å‰æ²¿ã€‚AIå¤§æ¨¡å‹ä»å»å¹´å¼€å§‹é€æ¸èµ°å‘å·¥ç¨‹åŒ–ï¼Œèº«è¾¹çš„åŒäº‹åœ¨å°è¯• LangChainã€Transformersã€Flowise ç­‰å·¥å…·ã€‚æˆ‘ä¹Ÿæ›¾è¯•è¿‡ç”¨Spring Bootæ•´åˆOpenAIæ¥å£æä¸ªå°åŠ©æ‰‹ï¼Œä½†å¾ˆå¿«å‘ç°ï¼Œä»â€œç©â€åˆ°â€œäº§å“åŒ–â€ï¼Œä¸­é—´å·®çš„ä¸åªæ˜¯ä»£ç èƒ½åŠ›ï¼Œè€Œæ˜¯<strong>æ•´å¥—å·¥ç¨‹åŒ–æ”¯æ’‘ä½“ç³»</strong>ã€‚</p>
<p>ç›´åˆ°æˆ‘æ¥è§¦åˆ° TRAE SOLOï¼Œæ‰æ„è¯†åˆ°ï¼š<strong>AIåº”ç”¨å¼€å‘ï¼Œä¸åº”è¯¥å†ç”¨ä¼ ç»ŸWebé¡¹ç›®çš„æ€ç»´æ¥å¥—ç”¨ï¼Œè€Œéœ€è¦ä¸€å¥—æ–°èŒƒå¼ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³åˆ†äº«æˆ‘ä½¿ç”¨ TRAE SOLO æ­£å¼ç‰ˆå¼€å‘ä¸€ä¸ªâ€œæ™ºèƒ½å®¡æ‰¹ç³»ç»Ÿâ€çš„å®æˆ˜è¿‡ç¨‹ï¼Œå¹¶ç»“åˆæˆ‘çš„Javaå¼€å‘ç»éªŒï¼Œå¯¹æ¯”åˆ†æå®ƒåœ¨<strong>æ¶æ„è®¾è®¡ã€æ¨¡å‹éƒ¨ç½²ã€ä»£ç å¯è§‚æµ‹æ€§</strong>ç­‰æ–¹é¢å¸¦æ¥çš„å˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€é¡¹ç›®èƒŒæ™¯ï¼šä»0åˆ°1æ­å»ºä¸€ä¸ªAIå®¡æ‰¹ç³»ç»Ÿ</h3>
<p>æˆ‘æ‰€åœ¨çš„å›¢é˜Ÿæ­£åœ¨å°è¯•æ„å»ºä¸€ä¸ªâ€œæ™ºèƒ½å®¡æ‰¹ç³»ç»Ÿâ€â€”â€”ç›®æ ‡æ˜¯è®©ç³»ç»Ÿèƒ½<strong>è‡ªåŠ¨è¯†åˆ«å®¡æ‰¹åœºæ™¯ä¸­çš„é£é™©ç‚¹ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥ä»‹å…¥</strong>ã€‚</p>
<p>ä¼ ç»Ÿåšæ³•æ˜¯ç”¨è§„åˆ™å¼•æ“ï¼Œä½†éšç€ä¸šåŠ¡å¤æ‚åº¦æå‡ï¼Œè§„åˆ™ç»´æŠ¤å˜å¾—è¶Šæ¥è¶Šç—›è‹¦ã€‚æˆ‘ä»¬å†³å®šå¼•å…¥å¤§æ¨¡å‹åšæ„å›¾è¯†åˆ«ä¸è¯­ä¹‰æŠ½å–ï¼Œç”¨AIè¾…åŠ©å®¡æ‰¹åˆ¤æ–­ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘é€‰æ‹©ç”¨ TRAE SOLO æ¥æ­å»ºåŸå‹çš„èµ·ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€TRAE SOLO å®æˆ˜ï¼šä¸‰æ­¥è½åœ° AI å®¡æ‰¹ç³»ç»Ÿ</h3>
<h4 data-id="heading-4">1. æŠ€æœ¯é€‰å‹ï¼šç”¨ SOLO coder å¿«é€Ÿç”Ÿæˆæ¶æ„è‰å›¾</h4>
<p>è¿‡å»æˆ‘å†™ç³»ç»Ÿè®¾è®¡æ–‡æ¡£è¦èŠ±ä¸€æ•´å¤©ï¼Œç°åœ¨ç”¨ TRAE SOLO çš„ SOLO coderï¼ŒåŸºäºæˆ‘çš„Promptï¼ˆéœ€æ±‚è¯´æ˜ï¼‰ï¼Œä¸åˆ°1åˆ†é’Ÿå°±ç”Ÿæˆäº†ï¼š</p>
<ul>
<li>ç³»ç»Ÿæ¨¡å—æ‹†åˆ†å›¾ï¼ˆå®¡æ‰¹è¯†åˆ«æ¨¡å—ã€é£é™©åˆ†ææ¨¡å—ã€æ¨¡å‹æœåŠ¡æ¨¡å—ï¼‰</li>
<li>Spring Boot + LangChain4J çš„é›†æˆå»ºè®®</li>
<li>æ¨¡å‹æœåŠ¡å°è£…å»ºè®®ï¼ˆæ”¯æŒOpenAIã€Qwenã€æœ¬åœ°æ¨¡å‹åˆ‡æ¢ï¼‰</li>
<li>APIæ¥å£è‰æ¡ˆ + æ•°æ®ç»“æ„å®šä¹‰</li>
</ul>
<p>è¿™ä¸æ˜¯â€œç”Ÿæˆä»£ç â€é‚£ä¹ˆç®€å•ï¼Œè€Œæ˜¯<strong>è®©æˆ‘æ›´å¿«è¿›å…¥â€œæ¶æ„æ€è€ƒâ€çŠ¶æ€</strong>ï¼Œéå¸¸é€‚åˆæˆ‘è¿™ç§ä¹ æƒ¯å…ˆç†æ¸…ç»“æ„çš„å¼€å‘è€…ã€‚</p>
<blockquote>
<p>âœï¸ å¼€å‘å»ºè®®ï¼šå¯ä»¥ç»“åˆ Trae çš„ Spec-Kit å¿«é€Ÿç”Ÿæˆæ¥å£å®šä¹‰æ–‡æ¡£ï¼Œå¯¹æ¥å‰ç«¯æ›´é¡ºç•…ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-5">2. æ¨¡å‹æœåŠ¡éƒ¨ç½²ï¼šä¸€é”®ä¸Šçº¿ + APIå¯†é’¥å®‰å…¨å¤„ç†</h4>
<p>æˆ‘é€‰æ‹©äº†é˜¿é‡Œé€šä¹‰Qwen-14Bä½œä¸ºåº•å±‚æ¨¡å‹ï¼Œéƒ¨ç½²åœ¨æœ¬åœ°GPUæœåŠ¡å™¨ä¸Šã€‚</p>
<p>TRAE SOLO å†…ç½®çš„éƒ¨ç½²æ¨¡å—è®©æˆ‘éå¸¸æƒŠå–œï¼š</p>
<ul>
<li>æä¾›äº†æ ‡å‡†åŒ–çš„æ¨¡å‹é€‚é…å±‚ï¼ˆå…¼å®¹OpenAIåè®®ï¼‰</li>
<li>è‡ªåŠ¨ç”ŸæˆDockeréƒ¨ç½²è„šæœ¬</li>
<li>æ”¯æŒMCPåè®®ï¼Œé€‚é…å¤šä¸ªLLMæœåŠ¡</li>
<li>æ”¯æŒAPI Keyé…ç½®åŠ å¯†å­˜å‚¨ + å®‰å…¨è°ƒç”¨ï¼ˆé¿å…ç¡¬ç¼–ç ï¼‰</li>
</ul>
<p>ä»¥å‰æˆ‘éƒ¨ç½²æ¨¡å‹è¦å†™ä¸€å †Shellè„šæœ¬ï¼Œé…ç½®Nginxã€å†™Tokenæ ¡éªŒï¼Œè¿™æ¬¡åŸºæœ¬æ˜¯â€œå¡«ç©ºå¼â€é…ç½®ï¼Œå‡ åˆ†é’Ÿå°±èƒ½ä¸Šçº¿ã€‚</p>
<blockquote>
<p>âš ï¸ è¸©å‘æé†’ï¼šå¦‚æœä½ ç”¨ä¼ä¸šä»£ç†è®¿é—®æ¨¡å‹APIï¼Œè®°å¾—è®¾ç½®MCPä»£ç†å‚æ•°ï¼Œå¦åˆ™è¯·æ±‚ä¼šè¢«æ‹¦æˆªå¯¼è‡´æ¨¡å‹ä¸å¯ç”¨ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">3. ä»£ç è´¨é‡ä¿éšœï¼šDiffView + è‡ªåŠ¨æµ‹è¯•è„šæœ¬è¶…é¦™ï¼</h4>
<p>å†™Javaä¹…äº†ï¼Œæˆ‘å¯¹â€œä»£ç å¯ç»´æŠ¤æ€§â€ç‰¹åˆ«æ•æ„Ÿã€‚</p>
<p>TRAE SOLO åœ¨ç”Ÿæˆä»£ç åï¼Œæ”¯æŒä½¿ç”¨ <strong>DiffView å·¥å…·</strong> ç›´æ¥å¯¹æ¯”æ”¹åŠ¨ï¼Œçœ‹çœ‹æ¨¡å‹ç”Ÿæˆçš„ä»£ç ä¸ç°æœ‰é€»è¾‘æ˜¯å¦å†²çªã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>å•å…ƒæµ‹è¯•æ¨¡æ¿ï¼ˆç”¨JUnit5ï¼‰</li>
<li>Mockæ•°æ®ï¼ˆåŸºäºæ¥å£å®šä¹‰ï¼‰</li>
<li>åŠŸèƒ½éªŒè¯è„šæœ¬ï¼ˆPostmanæ ¼å¼ï¼‰</li>
</ul>
<p>æˆ‘ç”¨ DiffView å‘ç°æ¨¡å‹ç”Ÿæˆçš„å®¡æ‰¹åˆ¤æ–­é€»è¾‘ä¸­æœ‰ä¸ªâ€œæµ®ç‚¹æ•°æ¯”è¾ƒâ€çš„bugï¼ŒåŠæ—¶ä¿®å¤é¿å…äº†çº¿ä¸Šäº‹æ•…ã€‚</p>
<blockquote>
<p>âœ… ç»éªŒå»ºè®®ï¼šä¸è¦ç›²ä¿¡ç”Ÿæˆä»£ç ï¼ŒDiffView æ˜¯ä½ AIå¼€å‘è¿‡ç¨‹ä¸­çš„â€œè´¨é‡æŠ¤æ â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€ä»å¼€å‘è€…è§†è§’è°ˆè°ˆ TRAE SOLO çš„ä¼˜åŠ¿ä¸ä¸è¶³</h3>
<h4 data-id="heading-8">ğŸ’¡ ä¼˜åŠ¿æ€»ç»“ï¼š</h4>

























<table><thead><tr><th>æ–¹é¢</th><th>æˆ‘çš„ä½“éªŒ</th></tr></thead><tbody><tr><td>æ¶æ„è¾…åŠ©</td><td>SOLO coder èƒ½å¿«é€Ÿç”Ÿæˆæ¶æ„æ–¹æ¡ˆï¼ŒèŠ‚çœå¤§é‡æ–‡æ¡£å·¥ä½œ</td></tr><tr><td>å·¥ç¨‹åŒ–éƒ¨ç½²</td><td>éƒ¨ç½²æ¨¡å‹å˜å¾—å¼‚å¸¸è½»æ¾ï¼Œæ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢</td></tr><tr><td>å¯è§‚æµ‹æ€§</td><td>ä»»åŠ¡è¿½è¸ª + æµ‹è¯•è„šæœ¬ç”Ÿæˆï¼Œæå¤§æå‡å¯ç»´æŠ¤æ€§</td></tr><tr><td>å®‰å…¨æ€§</td><td>å¯¹API Keyåšäº†åŠ å¯†éš”ç¦»ï¼Œè¸©å‘å°‘</td></tr></tbody></table>
<h4 data-id="heading-9">âš ï¸ ä¸è¶³ä¹‹å¤„ï¼š</h4>
<ul>
<li>ç›®å‰å¯¹Javaç”Ÿæ€çš„æ”¯æŒè¿˜ä¸å¤Ÿæ·±å…¥ï¼Œå°¤å…¶æ˜¯Spring Cloudç›¸å…³é›†æˆå»ºè®®è¾ƒå°‘</li>
<li>SOLO coder çš„Promptéœ€è¦è¾ƒå¼ºè¡¨è¾¾èƒ½åŠ›ï¼Œæ–°æ‰‹å¯èƒ½ç”Ÿæˆæ•ˆæœä¸ç†æƒ³</li>
<li>DiffView åœ¨å¤§å‹é¡¹ç›®ä¸­å¯¹æ¯”ä¼šå¡é¡¿ï¼Œå»ºè®®åæœŸä¼˜åŒ–æ€§èƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-10">äº”ã€æ€»ç»“ä¸æ€è€ƒï¼šAIå¼€å‘ä¸åªæ˜¯å†™ä»£ç ï¼Œæ›´æ˜¯â€œåä½œå¼å·¥ç¨‹è®¾è®¡â€</h3>
<p>å¦‚æœè¯´ä¼ ç»Ÿå¼€å‘æ˜¯â€œä¸€ä¸ªäººå†™ä¸€å †ä»£ç â€ï¼Œé‚£ä¹ˆAIæ—¶ä»£çš„å¼€å‘æ›´åƒæ˜¯â€œä½ å’ŒAIä¸€èµ·è®¾è®¡ç³»ç»Ÿâ€ã€‚</p>
<p>TRAE SOLO ç»™æˆ‘çš„æ„Ÿè§‰ä¸æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œAIå¼€å‘æ‹æ¡£â€ï¼š</p>
<ul>
<li>å®ƒä¸æ˜¯æ›¿ä»£ä½ å†™ä»£ç ï¼Œè€Œæ˜¯è®©ä½ <strong>æ›´å¿«è¿›å…¥æ€è€ƒçŠ¶æ€</strong></li>
<li>å®ƒä¸åªæ˜¯éƒ¨ç½²æ¨¡å‹ï¼Œè€Œæ˜¯<strong>è®©AIåº”ç”¨è½åœ°æ›´å®‰å…¨ã€æ›´ç¨³å®š</strong></li>
<li>å®ƒä¸åªæ˜¯ç”Ÿæˆæ–‡æ¡£ï¼Œè€Œæ˜¯<strong>è®©å›¢é˜Ÿåä½œæ›´é«˜æ•ˆ</strong></li>
</ul>
<p>ä½œä¸ºä¸€åJavaå¼€å‘è€å…µï¼Œæˆ‘è®¤ä¸º AI å·¥ç¨‹åŒ–æœ€å¤§çš„æŒ‘æˆ˜ä¸æ˜¯æ¨¡å‹æœ¬èº«ï¼Œè€Œæ˜¯â€œå¦‚ä½•åƒå†™å¾®æœåŠ¡ä¸€æ ·å†™AIç³»ç»Ÿâ€ã€‚è¿™ä¹Ÿæ˜¯ TRAE SOLO æœ€æ‰“åŠ¨æˆ‘çš„åœ°æ–¹ã€‚</p>
<hr/>
<h3 data-id="heading-11">å…­ã€æœªæ¥è®¡åˆ’ &amp; ç•™ä¸ªå°å°¾å·´ ğŸ¯</h3>
<p>æ¥ä¸‹æ¥æˆ‘å‡†å¤‡ç”¨ TRAE SOLO + LangChain4J + Spring Boot æ„å»ºä¸€ä¸ªâ€œAIä»£ç å®¡è®¡ç³»ç»Ÿâ€ï¼Œè®©å¤§æ¨¡å‹è‡ªåŠ¨è¯†åˆ«Javaä»£ç ä¸­çš„å®‰å…¨æ¼æ´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Elastic Observability ä¸­ä½¿ç”¨ OpAmp å¯¹ EDOT SDK è¿›è¡Œé›†ä¸­é…ç½®]]></title>    <link>https://juejin.cn/post/7571726099690274835</link>    <guid>https://juejin.cn/post/7571726099690274835</guid>    <pubDate>2025-11-13T06:24:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571726099690274835" data-draft-id="7571731181198573604" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Elastic Observability ä¸­ä½¿ç”¨ OpAmp å¯¹ EDOT SDK è¿›è¡Œé›†ä¸­é…ç½®"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-11-13T06:24:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Elastic Observability ä¸­ä½¿ç”¨ OpAmp å¯¹ EDOT SDK è¿›è¡Œé›†ä¸­é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:24:35.000Z" title="Thu Nov 13 2025 06:24:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fobservability-labs%2Fauthor%2Fchristoph-heger" title="https://www.elastic.co/observability-labs/author/christoph-heger" target="_blank" ref="nofollow noopener noreferrer">Christoph Heger</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f0112a4c5394905b46b278b7acd2cd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619875&amp;x-signature=nrPPc8w6xW985u0kiJDJd2qwpIU%3D" alt="" loading="lazy"/></p>
<p>äº†è§£å¦‚ä½•åœ¨ Elastic Observability ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ OpAmp åœ¨å¤§è§„æ¨¡ç¯å¢ƒä¸‹é€šè¿‡ EDOT Collector é›†ä¸­é…ç½® Elastic Distributions of OpenTelemetryï¼ˆEDOTï¼‰SDKã€‚</p>
<p>ä½¿ç”¨ Elastic Distribution of OpenTelemetryï¼ˆEDOTï¼‰SDK çš„å¤§é‡æœåŠ¡æ—¶ï¼Œç®¡ç†é…ç½®å˜æ›´å¯èƒ½æ—¢å¤æ‚åˆè€—æ—¶ã€‚OpenTelemetry æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fopentelemetry.io%2Fdocs%2Fspecs%2Fopamp%2F" title="https://opentelemetry.io/docs/specs/opamp/" target="_blank" ref="nofollow noopener noreferrer">Open Agent Management Protocol</a>ï¼ˆOpAMPï¼‰ï¼ŒElastic é€šè¿‡ EDOT Collector åˆ©ç”¨è¯¥åè®®æ¥ç®¡ç†è¿™äº› SDKã€‚åœ¨ Elastic Observability ä¸­ï¼ŒElastic çš„ APM Agent å·²ç»å…·å¤‡è¿™ç§é›†ä¸­ç®¡ç†åŠŸèƒ½ã€‚ç»“åˆ OpAMP åï¼Œä½ ç°åœ¨å¯ä»¥é€šè¿‡ Elastic Observability é›†ä¸­ç®¡ç†æ‰€æœ‰ä½¿ç”¨ EDOT SDK çš„æœåŠ¡ï¼ŒEDOT Collector é€šè¿‡ OpAMP ååŠ©å¤„ç†è¿™äº›é…ç½®å˜æ›´ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ EDOT Gateway Collector å®ç° EDOT SDK çš„é›†ä¸­é…ç½®åŠŸèƒ½ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•é…ç½® EDOT SDK å’Œ EDOT Gateway Collector ä»¥å¯ç”¨é›†ä¸­é…ç½®ï¼Œæœ€åæˆ‘ä»¬ä¼šè®²è§£é›†ä¸­é…ç½®æ‰€æ”¯æŒçš„é…ç½®é¡¹ã€‚</p>
<h2 data-id="heading-0">åŸºäº OpenTelemetry Open Agent Management Protocol çš„é›†ä¸­é…ç½®</h2>
<p>OpenTelemetry é¡¹ç›®æä¾›äº† OpAMPï¼Œç”¨äºè¿œç¨‹ç®¡ç†å¤§é‡æ•°æ®é‡‡é›† Agent åŠå…¶ä»–åŠŸèƒ½ã€‚EDOT SDK çš„é›†ä¸­ç®¡ç†åˆ©ç”¨ OpAMP åˆ†å‘é…ç½®ã€‚å®ƒæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯â€”æœåŠ¡å™¨ç½‘ç»œåè®®ï¼Œå…¶ä¸­ OpAMP æœåŠ¡å™¨æ˜¯ EDOT Collector çš„ä¸€éƒ¨åˆ†ï¼Œè€Œ OpAMP å®¢æˆ·ç«¯æ˜¯ EDOT SDK çš„ä¸€éƒ¨åˆ†ã€‚EDOT SDK ä¼šå®šæœŸè½®è¯¢ OpAMP æœåŠ¡å™¨ä»¥è·å–é…ç½®æ›´æ–°ã€‚EDOT Collector ä¸­çš„ OpAMP æœåŠ¡å™¨ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felastic%2Fopentelemetry-collector-components%2Fblob%2Fmain%2Fextension%2Fapmconfigextension%2FREADME.md" title="https://github.com/elastic/opentelemetry-collector-components/blob/main/extension/apmconfigextension/README.md" target="_blank" ref="nofollow noopener noreferrer">Elastic APM é›†ä¸­é…ç½®æ‰©å±•</a>æä¾›ï¼Œè¯¥æ‰©å±•ä» Elasticsearch ä¸­è¯»å– EDOT SDK çš„é…ç½®ã€‚è¿™ä¸ªæ‰©å±•çš„æŠ€æœ¯åç§°æ˜¯ <strong><code>apmconfigextension</code></strong>ï¼Œéœ€è¦åœ¨ EDOT Collector çš„é…ç½®ä¸­å¯ç”¨æ‰èƒ½ç”Ÿæ•ˆã€‚æ ¹æ® OpAMP è§„èŒƒï¼Œä¼ è¾“å±‚å¯ä½¿ç”¨ WebSocket æˆ–æ™®é€š HTTP è¿æ¥ã€‚EDOT SDK é€šè¿‡ HTTP è¿æ¥ä» EDOT Collector æ‹‰å–é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fccd3f398665454eba5929c8b841d1ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619875&amp;x-signature=GEbjqEhOBe17olIrT0Zav7K4fEs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">å‰ææ¡ä»¶</h2>
<p>EDOT SDK çš„é›†ä¸­é…ç½®éœ€è¦ä¸€ä¸ªä»¥ Gateway æ¨¡å¼è¿è¡Œçš„ç‹¬ç«‹ EDOT Collectorã€‚å…¶ä»–é‡‡é›†å™¨ï¼ˆå¦‚ OpenTelemetry contrib collector æˆ–è‡ªå®šä¹‰æ„å»ºçš„é‡‡é›†å™¨ï¼‰åˆ™éœ€è¦åŒ…å« Elastic APM é›†ä¸­é…ç½®æ‰©å±•ã€‚</p>
<h3 data-id="heading-2">æ”¯æŒé›†ä¸­é…ç½®çš„ EDOT ç‰ˆæœ¬</h3>
<p>ä¸‹è¡¨æ¦‚è¿°äº†æ”¯æŒé›†ä¸­é…ç½®åŠŸèƒ½çš„ EDOT SDK å’Œ EDOT Collector ç‰ˆæœ¬ã€‚åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å¿…é¡»ä½¿ç”¨ä¸‹è¡¨ä¸­åˆ—å‡ºçš„ EDOT SDK ç‰ˆæœ¬è¿›è¡Œæ£€æµ‹ï¼Œæ‰èƒ½æ‹‰å–å¹¶åº”ç”¨é›†ä¸­é…ç½®æ›´æ”¹ã€‚</p>
<table><thead><tr><th>EDOT</th><th>Version</th></tr></thead><tbody><tr><td>Android</td><td>1.2.0+</td></tr><tr><td>iOS</td><td>1.4.0+</td></tr><tr><td>Java</td><td>1.5.0+</td></tr><tr><td>Node.js</td><td>1.2.0+</td></tr><tr><td>PHP</td><td>1.1.1+</td></tr><tr><td>Python</td><td>1.4.0+</td></tr><tr><td>Collector (Gateway mode)</td><td>8.19, 9.1+</td></tr></tbody></table>
<p>å¯¹äº EDOT çš„ Javaã€Node.jsã€PHP å’Œ Pythonï¼Œé›†ä¸­é…ç½®ä¸ä¼šé˜»å¡åº”ç”¨ç¨‹åºå¯åŠ¨ã€‚åº”ç”¨ç¨‹åºä¼šä½¿ç”¨é»˜è®¤é…ç½®æˆ–ç”±ç¯å¢ƒå˜é‡æä¾›çš„é…ç½®å¯åŠ¨ã€‚å½“æˆåŠŸæ‹‰å–é›†ä¸­é…ç½®åï¼Œå®ƒå°†ä¼˜å…ˆäºæœ¬åœ°é…ç½®ç”Ÿæ•ˆã€‚ç›®å‰ï¼ŒEDOT .NET å°šä¸æ”¯æŒé›†ä¸­é…ç½®ï¼Œä½†è®¡åˆ’åœ¨æœªæ¥åŠ å…¥æ”¯æŒã€‚</p>
<p>æ­¤å¤–ï¼ŒEDOT SDK çš„é›†ä¸­é…ç½®æš‚æ—¶ä¸æ”¯æŒåœ¨ Elastic Cloud Serverless æˆ– Elastic Cloud æ‰˜ç®¡çš„ OTLP Endpoint ä¸Šä½¿ç”¨ã€‚<br/>
ä¸‹è¡¨æ¦‚è¿°äº†æ”¯æŒ EDOT SDK é›†ä¸­é…ç½®çš„ Elastic Stack ç‰ˆæœ¬ã€‚</p>
<table><thead><tr><th>Elastic</th><th>Version</th></tr></thead><tbody><tr><td>Self-managed</td><td>9.1.0+</td></tr><tr><td>Elastic Cloud Hosted</td><td>9.1.0+</td></tr></tbody></table>
<h3 data-id="heading-3">æ£€ç´¢ Elasticsearch ç«¯ç‚¹å’Œ API å¯†é’¥</h3>
<p>Elastic APM é›†ä¸­é…ç½®æ‰©å±•éœ€è¦åœ¨é…ç½®ä¸­åŒ…å« Elasticsearch ç«¯ç‚¹ï¼Œä»¥ä¾¿è¯»å– EDOT SDK çš„é›†ä¸­é…ç½®è®¾ç½®ã€‚è¯¥ Elasticsearch ç«¯ç‚¹ä¸ç”¨äºå°†é¥æµ‹æ•°æ®å¯¼å‡ºåˆ° Elasticsearch çš„ Elasticsearch exporter æ‰€ä½¿ç”¨çš„ç«¯ç‚¹ç›¸åŒã€‚é›†ä¸­é…ç½®æ–‡æ¡£ä¸­è¯¦ç»†æè¿°äº†è·å–ç«¯ç‚¹å’Œ API å¯†é’¥çš„æ­¥éª¤ã€‚</p>
<h2 data-id="heading-4">å¯ç”¨ EDOT çš„é›†ä¸­é…ç½®</h2>
<p>è¦å¯ç”¨é›†ä¸­é…ç½®ï¼ŒEDOT Collector éœ€è¦åœ¨ extensions éƒ¨åˆ†ä¸­é…ç½® apmconfigextensionã€‚è¿™éœ€è¦å‰é¢è·å–çš„ Elasticsearch ç«¯ç‚¹å’Œ Elasticsearch API å¯†é’¥ã€‚åŒæ—¶ï¼Œéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ <strong>ELASTIC_OTEL_OPAMP_ENDPOINT</strong> ä»¥åœ¨ EDOT SDK ä¸­å¯ç”¨é›†ä¸­é…ç½®ã€‚</p>
<p>ä¸‹é¢è¯´æ˜äº†å¦‚ä½•ä¸º EDOT Gateway Collector å’Œ EDOT SDK å¯ç”¨é›†ä¸­é…ç½®ã€‚</p>
<h3 data-id="heading-5">é…ç½® EDOT Collector ä»¥å¯ç”¨é›†ä¸­é…ç½®</h3>
<p>åœ¨ EDOT Collector ä¸­å¯ç”¨é›†ä¸­é…ç½®æ”¯æŒï¼Œéœ€è¦å°† Elastic APM é›†ä¸­é…ç½®æ‰©å±•ï¼ˆapmconfigextensionï¼‰çš„é…ç½®æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚<br/>
ä¸º apmconfigextension ä¸ Elasticsearch ç«¯ç‚¹çš„èº«ä»½éªŒè¯é…ç½® <strong>bearertokenauth</strong> è®¤è¯å™¨ã€‚è¯¥è®¤è¯å™¨ä¸ºå‘å¾€ Elasticsearch ç«¯ç‚¹çš„å‡ºç«™è¯·æ±‚é…ç½®å®¢æˆ·ç«¯ç±»å‹çš„èº«ä»½éªŒè¯æœºåˆ¶ã€‚apmconfigextension å……å½“å®¢æˆ·ç«¯ï¼Œè€Œ Elasticsearch ç«¯ç‚¹å……å½“æœåŠ¡å™¨ã€‚<strong>apmconfig</strong> éƒ¨åˆ†é…ç½® OpAMP æœåŠ¡å™¨ç«¯ç‚¹ï¼ŒEDOT SDK å°†è¿æ¥è¯¥ç«¯ç‚¹ä»¥è·å–é…ç½®ã€‚<strong>service</strong> éƒ¨åˆ†åˆ™æ¿€æ´» apmconfig å’Œ bearertokenauth æ‰©å±•ã€‚</p>
<p>ä»¥ä¸‹ä»£ç ç‰‡æ®µå±•ç¤ºäº† EDOT Collector çš„é…ç½®ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å« bearertoken è®¤è¯å™¨å’Œç”¨äºé›†ä¸­é…ç½®çš„ apmconfig é…ç½®ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">`</span>

<span class="hljs-attr">1.  extensions:</span>
<span class="hljs-attr">2.    bearertokenauth:</span>
<span class="hljs-attr">3.      scheme:</span> <span class="hljs-string">"APIKey"</span>
<span class="hljs-attr">4.      token:</span> <span class="hljs-string">"&lt;ENCODED_ELASTICSEARCH_APIKEY&gt;"</span>
<span class="hljs-attr">5.    source:</span>
<span class="hljs-attr">6.       elasticsearch:</span>
<span class="hljs-attr">7.         endpoint:</span> <span class="hljs-string">"&lt;YOUR_ELASTICSEARCH_ENDPOINT&gt;"</span>
<span class="hljs-attr">8.         auth:</span>
<span class="hljs-attr">9.           authenticator:</span> <span class="hljs-string">bearertokenauth</span>
<span class="hljs-attr">10.    apmconfig:</span>
<span class="hljs-attr">11.      opamp:</span>
<span class="hljs-attr">12.        protocols:</span>
<span class="hljs-attr">13.          http:</span>
<span class="hljs-number">14</span><span class="hljs-string">.</span>            <span class="hljs-comment"># Default is localhost:4320</span>
<span class="hljs-number">15</span><span class="hljs-string">.</span>            <span class="hljs-comment"># To specify a custom endpoint, uncomment the following line</span>
<span class="hljs-number">16</span><span class="hljs-string">.</span>            <span class="hljs-comment"># and set the endpoint to the custom endpoint</span>
<span class="hljs-number">17</span><span class="hljs-string">.</span>            <span class="hljs-comment"># endpoint: "&lt;CUSTOM_OPAMP_ENDPOINT&gt;"</span>
<span class="hljs-attr">18.    service:</span>
<span class="hljs-attr">19.      extensions:</span> [<span class="hljs-string">bearertokenauth</span>, <span class="hljs-string">apmconfig</span>]

<span class="hljs-string">`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)</span>
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fedot-collector%2Fdownload" title="https://www.elastic.co/docs/reference/edot-collector/download" target="_blank" ref="nofollow noopener noreferrer">ä¸‹è½½</a> EDOT Collectorï¼Œå¹¶åœ¨ <strong>otel.yml</strong> é…ç½®æ–‡ä»¶ä¸­åŒ…å«ä¸Šé¢çš„é…ç½®ç‰‡æ®µä»¥å¯ç”¨é›†ä¸­é…ç½®ã€‚<strong>otel.yml</strong> é…ç½®æ–‡ä»¶ç¤ºä¾‹å¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fedot-collector%2Fconfig%2Fdefault-config-standalone%23agent-mode" title="https://www.elastic.co/docs/reference/edot-collector/config/default-config-standalone#agent-mode" target="_blank" ref="nofollow noopener noreferrer">EDOT Collector æ–‡æ¡£</a>ä¸­æ‰¾åˆ°ï¼Œå¯å‚è€ƒç›´æ¥å°†æ•°æ®æ‘„å–è‡³ Elasticsearch çš„ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-6">é…ç½® EDOT SDK ä»¥å¯ç”¨é›†ä¸­é…ç½®</h3>
<p>è¦åœ¨ <strong>EDOT SDKsï¼ˆJavaã€Node.jsã€PHP å’Œ Pythonï¼‰</strong> ä¸­å¯ç”¨é›†ä¸­é…ç½®ï¼Œéœ€è¦å°†ç¯å¢ƒå˜é‡ <strong>ELASTIC_OTEL_OPAMP_ENDPOINT</strong> è®¾ç½®ä¸º EDOT Collector çš„ OpAMP æœåŠ¡å™¨ç«¯ç‚¹ï¼Œå¹¶è®¾ç½®æ‰€éœ€çš„èµ„æºå±æ€§ã€‚</p>
<h4 data-id="heading-7">å¯ç”¨ EDOT SDK çš„é›†ä¸­é…ç½®</h4>
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†å¦‚ä½•åœ¨ shell ä¸­ä½¿ç”¨ <code>export</code> å‘½ä»¤è®¾ç½® <strong>ELASTIC_OTEL_OPAMP_ENDPOINT</strong> ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">`export <span class="hljs-attr">ELASTIC_OTEL_OPAMP_ENDPOINT</span>=<span class="hljs-string">"http://&lt;your-opamp-end-point&gt;:4320/v1/opamp"</span>` AIå†™ä»£ç 
</code></pre>
<p>å¿…é¡»å°† <code>&lt;your-opamp-end-point&gt;</code> è®¾ç½®ä¸ºæä¾›é›†ä¸­é…ç½®ç”¨çš„ OpAMP æœåŠ¡å™¨ç«¯ç‚¹çš„ <strong>EDOT Gateway Collector</strong> çš„åœ°å€æˆ–ä¸»æœºåã€‚</p>
<p>å¦‚æœä½ åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨ <strong>EDOT SDKs</strong>ï¼Œç›¸å…³æ–‡æ¡£ä¼šè¯´æ˜å¦‚ä½•åœ¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fopentelemetry%2Fedot-sdks%2Fandroid%2Fconfiguration%23central-configuration" title="https://www.elastic.co/docs/reference/opentelemetry/edot-sdks/android/configuration#central-configuration" target="_blank" ref="nofollow noopener noreferrer">EDOT Android</a></strong> å’Œ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fopentelemetry%2Fedot-sdks%2Fios%2Fconfiguration%23central-configuration-edot" title="https://www.elastic.co/docs/reference/opentelemetry/edot-sdks/ios/configuration#central-configuration-edot" target="_blank" ref="nofollow noopener noreferrer">EDOT iOS</a></strong> ä¸­å¯ç”¨é›†ä¸­é…ç½®æ”¯æŒã€‚</p>
<h4 data-id="heading-8">é…ç½®èµ„æºå±æ€§</h4>
<p>é›†ä¸­é…ç½®è¦æ±‚è®¾ç½® OpenTelemetry çš„èµ„æºå±æ€§ <strong>service.name</strong> å’Œ <strong>deployment.environment.name</strong>ã€‚å…¶ä¸­ <strong>service.name</strong> æ˜¯å¿…å¡«é¡¹ï¼Œ<strong>deployment.environment.name</strong> è™½ç„¶æ˜¯å¯é€‰çš„ï¼Œä½†å¼ºçƒˆå»ºè®®è®¾ç½®ã€‚å¦‚æœæœªè®¾ç½® <strong>deployment.environment.name</strong>ï¼Œåˆ™æ— æ³•åˆ›å»ºé€‚ç”¨äºæ•´ä¸ªç¯å¢ƒçš„é…ç½®ã€‚</p>
<p>è®¾ç½®ç¯å¢ƒå˜é‡ <strong>OTEL_RESOURCE_ATTRIBUTES</strong>ï¼Œå…¶ä¸­åŒ…å« <strong>service.name</strong> å’Œ <strong>deployment.environment.name</strong>ï¼Œå¦‚ä¸‹ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚é”®å€¼å¯¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œå¹¶ä½œä¸ºå€¼æä¾›ç»™ <strong>OTEL_RESOURCE_ATTRIBUTES</strong> ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">`<span class="hljs-keyword">export</span> OTEL_RESOURCE_ATTRIBUTES=<span class="hljs-string">"deployment.environment.` AIå†™ä»£ç 
</span></code></pre>
<h2 data-id="heading-9">æ”¯æŒçš„é…ç½®è®¾ç½®</h2>
<p>ä¸‹è¡¨æ¦‚è¿°äº†æˆªè‡³æœ¬æ–‡æ’°å†™æ—¶ï¼Œéç§»åŠ¨ç«¯ EDOT SDK çš„æ”¯æŒçš„é›†ä¸­é…ç½®è®¾ç½®ã€‚</p>
<h3 data-id="heading-10">éç§»åŠ¨ç«¯ EDOT SDK</h3>
<p>è¡¨æ ¼æ˜¾ç¤ºäº† EDOT Javaã€Node.jsã€PHP å’Œ Python SDK æ”¯æŒçš„é›†ä¸­é…ç½®è®¾ç½®ã€‚</p>
<table><thead><tr><th>è®¾ç½®</th><th>è¯´æ˜</th><th>Java</th><th>Node.js</th><th>PHP</th><th>Python</th><th>Kibana</th></tr></thead><tbody><tr><td>logging_level</td><td>EDOT SDK çš„æ—¥å¿—çº§åˆ«</td><td>1.5.0+</td><td>1.2.0+</td><td>1.1.0+</td><td>1.4.0+</td><td>9.1.0+</td></tr><tr><td>deactivate_instrumentations</td><td>å…³é—­é€‰å®šçš„ instrumentation</td><td>1.5.0+</td><td>1.2.0+</td><td>-</td><td>-</td><td>9.1.0+</td></tr><tr><td>deactivate_all_instrumentations</td><td>å…³é—­æ‰€æœ‰ instrumentation</td><td>1.5.0+</td><td>1.2.0+</td><td>-</td><td>-</td><td>9.1.0+</td></tr><tr><td>send_traces</td><td>æ§åˆ¶æ˜¯å¦å‘é€ traces</td><td>1.5.0+</td><td>1.3.0+</td><td>-</td><td>-</td><td>9.1.0+</td></tr><tr><td>send_metrics</td><td>æ§åˆ¶æ˜¯å¦å‘é€ metrics</td><td>1.5.0+</td><td>1.3.0+</td><td>-</td><td>-</td><td>9.1.0+</td></tr><tr><td>send_logs</td><td>æ§åˆ¶æ˜¯å¦å‘é€ logs</td><td>1.5.0+</td><td>1.3.0+</td><td>-</td><td>-</td><td>9.1.0+</td></tr><tr><td>opamp_polling_interval</td><td>è¿ç»­æ‹‰å–é›†ä¸­é…ç½®çš„æ—¶é—´é—´éš”</td><td>1.6.0+</td><td>-</td><td>-</td><td>-</td><td>9.2.0+ï¼ˆè®¡åˆ’ä¸­ï¼‰</td></tr><tr><td>sampling_rate</td><td>head-based trace çš„é‡‡æ ·ç‡</td><td>1.6.0+</td><td>-</td><td>-</td><td>1.7.0+</td><td>9.2.0+ï¼ˆè®¡åˆ’ä¸­ï¼‰</td></tr><tr><td>infer_spans</td><td>æ¿€æ´»/å…³é—­æ¨æ–­ spans</td><td>1.7.0+</td><td>-</td><td>-</td><td>-</td><td>9.2.0+ï¼ˆè®¡åˆ’ä¸­ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-11">ç§»åŠ¨ EDOT SDK</h3>
<p>ä¸‹è¡¨æ˜¾ç¤ºäº† EDOT Android å’Œ iOS SDK æ”¯æŒçš„ä¸­å¤®é…ç½®è®¾ç½®ã€‚</p>
<table><thead><tr><th>è®¾ç½®</th><th>æè¿°</th><th>Android</th><th>iOS</th><th>Kibana</th></tr></thead><tbody><tr><td>recording</td><td>è®°å½•å¹¶å‘é€é¥æµ‹</td><td>1.2.0+</td><td>1.4.0+</td><td>9.1.0+</td></tr><tr><td>session_sample_rate</td><td>åŸºäºä¼šè¯é‡‡æ ·çš„é‡‡æ ·ç‡</td><td>1.2.0+</td><td>1.4.0+</td><td>9.1.0+</td></tr></tbody></table>
<h2 data-id="heading-12">ä½¿ç”¨ Elastic Observability æ›´æ”¹ EDOT SDK çš„é…ç½®è®¾ç½®</h2>
<p>åº”ç”¨ç¨‹åºå¿…é¡»ç”Ÿæˆå¹¶å‘é€é¥æµ‹æ•°æ®ï¼Œå¦åˆ™ EDOT SDK ä¸ä¼šå‡ºç°åœ¨ Elastic Observability çš„ Agent é…ç½® UI ä¸­ã€‚å› ä¸º Elastic Observability ä¸­çš„ Agent é…ç½®åœ¨æ¥æ”¶åˆ°é¥æµ‹æ•°æ®ä¹‹å‰ï¼Œä¸çŸ¥é“ EDOT SDK çš„å­˜åœ¨ã€‚OpenTelemetry èµ„æºå±æ€§ service.name ç”¨ä½œå°†é…ç½®åˆ†é…ç»™ EDOT SDK çš„å…³é”®ã€‚ç›®å‰ï¼ŒEDOT SDK ä¸ä¼šæ˜¾ç¤ºåœ¨ Agent Explorer ä¸­ã€‚</p>
<p>è¿›å…¥ Kibana -&gt; Observability -&gt; Applications -&gt; Service Inventory -&gt; Settings -&gt; Agent Configuration åˆ›å»ºä½ çš„ EDOT SDK çš„æ–°é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10cfc27953ef499da8670d8d4b1a1344~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619875&amp;x-signature=fNRdXB%2FeBzkERi2y5rEI15VOKqU%3D" alt="" loading="lazy"/></p>
<p>ä¸Šè¿° EDOT Java SDK é…ç½®é€šè¿‡å°† deactivate_all_instrumentations è®¾ç½®ä¸º true æ¥ç¦ç”¨æ‰€æœ‰ instrumentationã€‚è¿™åœ¨éœ€è¦å…³é—­ instrumentation çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚å½“éœ€è¦æ›´æ”¹ EDOT SDK çš„é‡‡æ ·ç‡æ—¶ï¼Œsampling_rate è®¾ç½®å°±å¾ˆæœ‰ç”¨ã€‚å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©é‡‡æ ·ç‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/400b41b8c13f4cfd91ef1f79c2c7fb6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763619875&amp;x-signature=Q4XJAMGcNfdD5wjBwR04JdmsJek%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">ç¦ç”¨ä¸­å¤®é…ç½®</h2>
<p>ç¦ç”¨ä¸­å¤®é…ç½®å¾ˆç®€å•ã€‚ç§»é™¤ç¯å¢ƒå˜é‡ ELASTIC_OTEL_OPAMP_ENDPOINT å¹¶é‡å¯åº”ç”¨ï¼Œå³å¯åœ¨ EDOT SDK ä¸­ç¦ç”¨ä¸­å¤®é…ç½®æ”¯æŒã€‚ç§»é™¤ EDOT Collector é…ç½®ä¸­ service éƒ¨åˆ†çš„ apmconfig æ‰©å±•å¹¶é‡å¯ Collectorï¼Œå³å¯åœ¨ EDOT Collector ä¸­ç¦ç”¨ Elastic APM ä¸­å¤®é…ç½®æ‰©å±•ã€‚</p>
<h2 data-id="heading-14">Elastic å¯¹ OpenTelemetry çš„è´¡çŒ®</h2>
<p>Elastic è‡´åŠ›äº OpenTelemetry é¡¹ç›®ã€‚Elastic å‘ OpenTelemetry é¡¹ç›®è´¡çŒ®äº† Java OpAMP å®¢æˆ·ç«¯å®ç°ï¼ˆGithub PRï¼‰ï¼Œå¹¶æ­£åœ¨è¿›è¡Œ Pythonï¼ˆGithub PRï¼‰å’Œ Node.js çš„è´¡çŒ®ã€‚PHP çš„ OpAMP å®¢æˆ·ç«¯å°†ä½œä¸º Elastic çš„æ›´å¤§è´¡çŒ®ï¼ˆGithub issueï¼‰çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-15">ç»“è®º</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•åœ¨ Elastic Observability ä¸­é€šè¿‡ Gateway Collector å’Œ OpAMP å¯¹ EDOT SDK è¿›è¡Œé›†ä¸­é…ç½®ã€‚ä½ äº†è§£äº†å¦‚ä½•åœ¨ Collector ä¸­é…ç½® apmconfigextensionï¼Œä»¥åŠå¦‚ä½•è®¾ç½® ELASTIC_OTEL_OPAMP_ENDPOINT ç¯å¢ƒå˜é‡ä»¥å¯ç”¨ EDOT SDK çš„ä¸­å¤®é…ç½®ï¼Œå“ªäº› SDK å’Œ Collector ç‰ˆæœ¬æ”¯æŒä¸­å¤®é…ç½®ï¼Œä»¥åŠå½“å‰æ”¯æŒçš„é…ç½®è®¾ç½®ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨å¤§è§„æ¨¡éƒ¨ç½²ä¸­åˆ©ç”¨ä¸­å¤®é…ç½®æ¥ç®¡ç† EDOT SDK çš„é…ç½®ã€‚</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fobservability-labs%2Fblog%2Felastic-distribution-opentelemetry-sdk-central-configuration-opamp" title="https://www.elastic.co/observability-labs/blog/elastic-distribution-opentelemetry-sdk-central-configuration-opamp" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/observabiliâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[elè¡¨è¾¾å¼jstlå’Œæˆ‘ä»¬çš„jséƒ½æ˜¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7571731181198802980</link>    <guid>https://juejin.cn/post/7571731181198802980</guid>    <pubDate>2025-11-13T06:52:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571731181198802980" data-draft-id="7571729676345245759" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="elè¡¨è¾¾å¼jstlå’Œæˆ‘ä»¬çš„jséƒ½æ˜¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-13T06:52:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jokerå­¦java"/> <meta itemprop="url" content="https://juejin.cn/user/3006480498043673"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            elè¡¨è¾¾å¼jstlå’Œæˆ‘ä»¬çš„jséƒ½æ˜¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3006480498043673/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jokerå­¦java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:52:09.000Z" title="Thu Nov 13 2025 06:52:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ <strong>JSPï¼ˆJavaServer Pagesï¼‰</strong> å¼€å‘ä¸­ï¼Œ<strong>ELè¡¨è¾¾å¼ï¼ˆExpression Languageï¼‰</strong> ã€<strong>JSTLï¼ˆJSP Standard Tag Libraryï¼‰</strong> å’Œ <strong>JavaScriptï¼ˆJSï¼‰</strong> å„è‡ªæœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯å’Œåˆ†å·¥ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«å’Œé€‚ç”¨åœºæ™¯ï¼š</p>
<h2 data-id="heading-0"><strong>1. ELè¡¨è¾¾å¼ï¼ˆ${}ï¼‰</strong></h2>
<h3 data-id="heading-1"><strong>ä½œç”¨</strong></h3>
<ul>
<li><strong>ç®€åŒ–JSPä¸­çš„Javaä»£ç </strong>ï¼Œç”¨äºåŠ¨æ€è¾“å‡ºæ•°æ®ã€‚</li>
<li><strong>è®¿é—®ä½œç”¨åŸŸå˜é‡</strong>ï¼ˆ<code>requestScope</code>ã€<code>sessionScope</code>ã€<code>applicationScope</code>ï¼‰ã€‚</li>
<li><strong>è¯»å–è¯·æ±‚å‚æ•°</strong>ï¼ˆ<code>param</code>ã€<code>paramValues</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2"><strong>ä½¿ç”¨æ—¶æœº</strong></h3>
<p>âœ… <strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>åœ¨JSPé¡µé¢ä¸­ç›´æ¥è¾“å‡ºå˜é‡å€¼ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">Jsp
  &lt;p&gt;ç”¨æˆ·åï¼š<span class="hljs-variable">${user.name}</span>&lt;/p&gt;
</code></pre>
<ul>
<li>è®¿é—®è¯·æ±‚å‚æ•°ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">Jsp
  &lt;p&gt;æœç´¢å…³é”®è¯ï¼š<span class="hljs-variable">${param.keyword}</span>&lt;/p&gt;
</code></pre>
<ul>
<li>æ¡ä»¶åˆ¤æ–­ï¼ˆç»“åˆJSTLÂ <code>&lt;c:if&gt;</code>ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">Jsp
  &lt;c:<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span>=<span class="hljs-string">"<span class="hljs-variable">${not empty user}</span>"</span>&gt;
      &lt;p&gt;æ¬¢è¿ï¼Œ<span class="hljs-variable">${user.name}</span>ï¼&lt;/p&gt;
  &lt;/c:<span class="hljs-keyword">if</span>&gt;
</code></pre>
<p>âŒ <strong>ä¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å¤æ‚é€»è¾‘è¿ç®—ï¼ˆåº”ä½¿ç”¨JSTLæˆ–Javaä»£ç ï¼‰ã€‚</li>
<li>å‰ç«¯äº¤äº’ï¼ˆå¦‚DOMæ“ä½œã€äº‹ä»¶å¤„ç†ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-3"><strong>2. JSTLï¼ˆJSPæ ‡å‡†æ ‡ç­¾åº“ï¼‰</strong></h2>
<h3 data-id="heading-4"><strong>ä½œç”¨</strong></h3>
<ul>
<li><strong>æ›¿ä»£JSPä¸­çš„Javaè„šæœ¬</strong>ï¼ˆ<code>&lt;% %&gt;</code>ï¼‰ï¼Œä½¿ä»£ç æ›´ç®€æ´ã€‚</li>
<li><strong>æä¾›é€»è¾‘æ§åˆ¶</strong>ï¼ˆå¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ï¼‰ã€‚</li>
<li><strong>æ ¼å¼åŒ–æ•°æ®</strong>ï¼ˆæ—¥æœŸã€æ•°å­—ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5"><strong>æ ¸å¿ƒæ ‡ç­¾åº“</strong></h3>

























<table><thead><tr><th><strong>æ ‡ç­¾åº“</strong></th><th><strong>ç”¨é€”</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><strong><code>&lt;c:...&gt;</code></strong></td><td>æ ¸å¿ƒé€»è¾‘ï¼ˆå¾ªç¯ã€æ¡ä»¶ï¼‰</td><td><code>&lt;c:forEach items="${users}" var="user"&gt;${user.name}&lt;/c:forEach&gt;</code></td></tr><tr><td><strong><code>&lt;fmt:...&gt;</code></strong></td><td>æ ¼å¼åŒ–ï¼ˆæ—¥æœŸã€æ•°å­—ï¼‰</td><td><code>&lt;fmt:formatDate value="${order.date}" pattern="yyyy-MM-dd" /&gt;</code></td></tr><tr><td><strong><code>&lt;fn:...&gt;</code></strong></td><td>å­—ç¬¦ä¸²å¤„ç†ï¼ˆJSTLå‡½æ•°ï¼‰</td><td><code>${fn:length(userList)}</code></td></tr></tbody></table>
<h3 data-id="heading-6"><strong>ä½¿ç”¨æ—¶æœº</strong></h3>
<p>âœ… <strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å¾ªç¯éå†é›†åˆï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml">Jsp
  <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">"${products}"</span> <span class="hljs-attr">var</span>=<span class="hljs-string">"product"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>${product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</code></pre>
<ul>
<li>æ¡ä»¶åˆ¤æ–­ï¼š</li>
</ul>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Jsp</span>
  &lt;<span class="hljs-selector-tag">c</span>:<span class="hljs-selector-tag">choose</span>&gt;
      &lt;<span class="hljs-selector-tag">c</span>:<span class="hljs-keyword">when</span> test=<span class="hljs-string">"${user.role == 'admin'}"</span>&gt;ç®¡ç†å‘˜&lt;/<span class="hljs-attribute">c</span>:<span class="hljs-keyword">when</span>&gt;
      &lt;<span class="hljs-attribute">c</span>:otherwise&gt;æ™®é€šç”¨æˆ·&lt;/<span class="hljs-attribute">c</span>:otherwise&gt;
  &lt;/<span class="hljs-attribute">c</span>:choose&gt;
</code></pre>
<ul>
<li>æ ¼å¼åŒ–æ•°æ®ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">Jsp
  &lt;<span class="hljs-built_in">fmt</span>:formatNumber value=<span class="hljs-string">"<span class="hljs-variable">${price}</span>"</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">"currency"</span> currencyCode=<span class="hljs-string">"USD"</span> /&gt;
</code></pre>
<p>âŒ <strong>ä¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>å‰ç«¯äº¤äº’ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ã€AJAXè¯·æ±‚ï¼‰ã€‚</li>
<li>å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆåº”æ”¾åœ¨Servletæˆ–Javaç±»ä¸­ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-7"><strong>3. JavaScriptï¼ˆJSï¼‰</strong></h2>
<h3 data-id="heading-8"><strong>ä½œç”¨</strong></h3>
<ul>
<li><strong>å‰ç«¯åŠ¨æ€äº¤äº’</strong>ï¼ˆDOMæ“ä½œã€äº‹ä»¶å¤„ç†ï¼‰ã€‚</li>
<li><strong>å¼‚æ­¥è¯·æ±‚ï¼ˆAJAXï¼‰</strong> Â ä¸åç«¯äº¤äº’ã€‚</li>
<li><strong>è¡¨å•éªŒè¯</strong>ã€åŠ¨ç”»æ•ˆæœç­‰ã€‚</li>
</ul>
<h3 data-id="heading-9"><strong>ä½¿ç”¨æ—¶æœº</strong></h3>
<p>âœ… <strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>åŠ¨æ€ä¿®æ”¹é¡µé¢å†…å®¹ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">JavaScript
  document.getElementById("message").<span class="hljs-attr">innerHTML</span> = <span class="hljs-string">"Hello, JS!"</span><span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>å‘é€AJAXè¯·æ±‚ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">JavaScript
  fetch("/api/users")
      .then(<span class="hljs-attr">response</span> =&gt; response.json())
      .then(<span class="hljs-attr">data</span> =&gt; console.log(data))<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>è¡¨å•éªŒè¯ï¼š</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">JavaScript
  <span class="hljs-title">if</span> <span class="hljs-params">(document.getElementById(<span class="hljs-string">"email"</span>).value === <span class="hljs-string">""</span>)</span> </span>{
      <span class="hljs-built_in">alert</span>(<span class="hljs-string">"é‚®ç®±ä¸èƒ½ä¸ºç©ºï¼"</span>);
  }
</code></pre>
<p>âŒ <strong>ä¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ç›´æ¥è®¿é—®JSPä½œç”¨åŸŸå˜é‡ï¼ˆéœ€é€šè¿‡ELä¼ é€’ï¼‰ã€‚</li>
<li>æœåŠ¡å™¨ç«¯é€»è¾‘ï¼ˆåº”ç”±Javaå¤„ç†ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10"><strong>4. ä¸‰è€…çš„åä½œå…³ç³»</strong></h2>






























<table><thead><tr><th><strong>ä»»åŠ¡</strong></th><th><strong>ä½¿ç”¨æŠ€æœ¯</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><strong>ä»æ•°æ®åº“è·å–æ•°æ®</strong></td><td>Servlet/Java</td><td><code>request.setAttribute("users", userList)</code></td></tr><tr><td><strong>åœ¨JSPä¸­æ˜¾ç¤ºæ•°æ®</strong></td><td>EL + JSTL</td><td><code>&lt;c:forEach items="${users}" var="user"&gt;${user.name}&lt;/c:forEach&gt;</code></td></tr><tr><td><strong>å‰ç«¯äº¤äº’ï¼ˆç‚¹å‡»äº‹ä»¶ï¼‰</strong></td><td>JavaScript</td><td><code>button.addEventListener("click", () =&gt; { ... })</code></td></tr><tr><td><strong>AJAXè¯·æ±‚</strong></td><td>JavaScript (Fetch/jQuery)</td><td><code>$.ajax({ url: "/api/data", success: (data) =&gt; { ... } })</code></td></tr></tbody></table>
<h2 data-id="heading-11"><strong>5. æœ€ä½³å®è·µæ€»ç»“</strong></h2>
<ol>
<li>
<p><strong>ELè¡¨è¾¾å¼</strong>ï¼š</p>
<ul>
<li>ç”¨äºÂ <strong>ç®€å•æ•°æ®è¾“å‡º</strong>ï¼ˆ<code>${variable}</code>ï¼‰ã€‚</li>
<li><strong>ä¸è¦</strong>Â åœ¨å…¶ä¸­å†™å¤æ‚é€»è¾‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>JSTL</strong>ï¼š</p>
<ul>
<li>ç”¨äºÂ <strong>å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­</strong>ï¼ˆ<code>&lt;c:forEach&gt;</code>ã€<code>&lt;c:if&gt;</code>ï¼‰ã€‚</li>
<li><strong>ä¸è¦</strong>Â ç”¨å®ƒå¤„ç†å‰ç«¯äº¤äº’ã€‚</li>
</ul>
</li>
<li>
<p><strong>JavaScript</strong>ï¼š</p>
<ul>
<li>ç”¨äºÂ <strong>åŠ¨æ€äº¤äº’ã€AJAX</strong>ã€‚</li>
<li><strong>ä¸è¦</strong>Â ç”¨å®ƒç›´æ¥è®¿é—®JSPå˜é‡ï¼ˆéœ€é€šè¿‡ELä¼ é€’ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12"><strong>ä¸€å¥è¯æ€»ç»“</strong></h3>
<ul>
<li><strong>EL</strong>ï¼šæ˜¾ç¤ºæ•°æ®ï¼ˆ<code>${}</code>ï¼‰ã€‚</li>
<li><strong>JSTL</strong>ï¼šæ§åˆ¶é€»è¾‘ï¼ˆ<code>&lt;c:if&gt;</code>ã€<code>&lt;c:forEach&gt;</code>ï¼‰ã€‚</li>
<li><strong>JS</strong>ï¼šå‰ç«¯äº¤äº’ï¼ˆDOMã€AJAXï¼‰ã€‚</li>
</ul>
<p>åˆç†åˆ†å·¥ï¼Œé¿å…æ··ç”¨ï¼ ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æé€Ÿæ€§èƒ½ä¼˜åŒ–ï¼šä»åŠ è½½åˆ°æ¸²æŸ“çš„å…¨é“¾è·¯å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571734313927442466</link>    <guid>https://juejin.cn/post/7571734313927442466</guid>    <pubDate>2025-11-13T07:01:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571734313927442466" data-draft-id="7571768210715000847" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æé€Ÿæ€§èƒ½ä¼˜åŒ–ï¼šä»åŠ è½½åˆ°æ¸²æŸ“çš„å…¨é“¾è·¯å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-13T07:01:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æé€Ÿæ€§èƒ½ä¼˜åŒ–ï¼šä»åŠ è½½åˆ°æ¸²æŸ“çš„å…¨é“¾è·¯å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T07:01:46.000Z" title="Thu Nov 13 2025 07:01:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â å›¾ç‰‡æ‡’åŠ è½½ï¼šè®©é•¿é¡µé¢"é£"èµ·æ¥çš„ç§˜å¯†æ­¦å™¨</h2>
<h3 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰åˆç§°å»¶è¿ŸåŠ è½½ï¼Œæ˜¯ä¸€ç§æ˜¾è‘—æå‡ç½‘é¡µæ€§èƒ½çš„ä¼˜åŒ–ç­–ç•¥ã€‚åœ¨åŒ…å«å¤§é‡å›¾ç‰‡çš„é•¿é¡µé¢ä¸­ï¼ŒåªåŠ è½½å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡èµ„æºï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰å›¾ç‰‡é€ æˆçš„æ€§èƒ½æµªè´¹ã€‚</p>
<h3 data-id="heading-2">æŠ€æœ¯ä¼˜åŠ¿</h3>
<ul>
<li>
<p><strong>èµ„æºåŠ è½½ä¼˜åŒ–</strong>ï¼šæ˜¾è‘—å‡å°‘æœåŠ¡å™¨å‹åŠ›ä¸å¸¦å®½æ¶ˆè€—</p>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒæå‡</strong>ï¼šé¿å…é•¿æ—¶é—´ç­‰å¾…ï¼Œå®ç°æµç•…æµè§ˆä½“éªŒ</p>
</li>
<li>
<p><strong>èµ„æºåˆ†é…åˆç†</strong>ï¼šé˜²æ­¢å›¾ç‰‡åŠ è½½é˜»å¡å…³é”®èµ„æºæ¸²æŸ“</p>
</li>
</ul>
<h3 data-id="heading-3">å®ç°åŸç†ä¸å®æˆ˜ä»£ç </h3>
<p><strong>å®ç°æœºåˆ¶</strong>ï¼šåˆ©ç”¨ <code>data-src</code> å±æ€§å­˜å‚¨çœŸå®å›¾ç‰‡è·¯å¾„ï¼Œå½“å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸæ—¶åŠ¨æ€æ›¿æ¢ <code>src</code> å±æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyLoader</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img[data-src]'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }

  <span class="hljs-comment">// åˆå§‹åŒ–ç›‘å¬</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkImages</span>();
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">throttle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkImages</span>, <span class="hljs-number">200</span>));
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">throttle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkImages</span>, <span class="hljs-number">200</span>));
  }

  <span class="hljs-comment">// æ£€æŸ¥å›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ</span>
  checkImages = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isInViewport</span>(img) &amp;&amp; img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadImage</span>(img);
      }
    });
  }

  <span class="hljs-comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸå†…</span>
  <span class="hljs-title function_">isInViewport</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">return</span> (
      rect.<span class="hljs-property">top</span> &lt;= <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * <span class="hljs-number">1.5</span> &amp;&amp;
      rect.<span class="hljs-property">bottom</span> &gt;= -<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * <span class="hljs-number">0.5</span> &amp;&amp;
      rect.<span class="hljs-property">left</span> &lt;= <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &amp;&amp;
      rect.<span class="hljs-property">right</span> &gt;= <span class="hljs-number">0</span>
    );
  }

  <span class="hljs-comment">// åŠ è½½å›¾ç‰‡</span>
  <span class="hljs-title function_">loadImage</span>(<span class="hljs-params">img</span>) {
    <span class="hljs-keyword">const</span> src = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    
    image.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      img.<span class="hljs-property">src</span> = src;
      img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>);
      img.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">'data-src'</span>);
    };
    
    image.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥:'</span>, src);
      img.<span class="hljs-property">dataset</span>.<span class="hljs-property">error</span> = <span class="hljs-literal">true</span>;
    };
    
    image.<span class="hljs-property">src</span> = src;
  }

  <span class="hljs-comment">// èŠ‚æµå‡½æ•°</span>
  <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay</span>) {
    <span class="hljs-keyword">let</span> timeoutId;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
      <span class="hljs-keyword">if</span> (!timeoutId) {
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          timeoutId = <span class="hljs-literal">null</span>;
        }, delay);
      }
    };
  }
}

<span class="hljs-comment">// åˆå§‹åŒ–æ‡’åŠ è½½</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyLoader</span>();
});
</code></pre>
<p><strong>HTMLç»“æ„ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;img <span class="hljs-attr">data-src</span>=<span class="hljs-string">"path/to/image.jpg"</span> alt=<span class="hljs-string">"æè¿°"</span> class=<span class="hljs-string">"lazy-image"</span>&gt;
</code></pre>
<h2 data-id="heading-4">äºŒã€æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–ï¼šæ·±å…¥ç†è§£å›æµä¸é‡ç»˜</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ¦‚å¿µè§£æ</h3>
<ul>
<li>
<p><strong>å›æµï¼ˆReflowï¼‰</strong>ï¼šå¸ƒå±€å‡ ä½•å±æ€§å˜åŒ–å¼•å‘çš„é‡æ–°å¸ƒå±€è¿‡ç¨‹</p>
</li>
<li>
<p><strong>é‡ç»˜ï¼ˆRepaintï¼‰</strong>ï¼šæ ·å¼å˜åŒ–ä½†ä¸å½±å“å¸ƒå±€çš„é‡æ–°ç»˜åˆ¶è¿‡ç¨‹</p>
</li>
</ul>
<p><strong>å…³é”®è®¤çŸ¥</strong>ï¼šå›æµå¿…ç„¶è§¦å‘é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šå¼•å‘å›æµ</p>
<h3 data-id="heading-6">è§¦å‘æ¡ä»¶è¯¦è§£</h3>
<h4 data-id="heading-7">å¼•å‘å›æµçš„å…¸å‹æ“ä½œ</h4>
<pre><code class="hljs language-ini" lang="ini">// è§¦å‘å›æµçš„å¸¸è§åœºæ™¯
<span class="hljs-attr">element.style.width</span> = <span class="hljs-string">'100px'</span><span class="hljs-comment">;          // å°ºå¯¸å˜åŒ–</span>
<span class="hljs-attr">element.style.position</span> = <span class="hljs-string">'absolute'</span><span class="hljs-comment">;    // å®šä½æ”¹å˜</span>
<span class="hljs-attr">element.style.fontSize</span> = <span class="hljs-string">'16px'</span><span class="hljs-comment">;        // å­—ä½“å¤§å°</span>
<span class="hljs-attr">element.innerHTML</span> = <span class="hljs-string">'&lt;div&gt;æ–°å†…å®¹&lt;/div&gt;'</span><span class="hljs-comment">; // å†…å®¹æ”¹å˜</span>
window.getComputedStyle(element)<span class="hljs-comment">;       // æ ·å¼è¯»å–</span>
</code></pre>
<h4 data-id="heading-8">ä»…è§¦å‘é‡ç»˜çš„æ“ä½œ</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åªå¼•å‘é‡ç»˜çš„å±æ€§ */</span>
<span class="hljs-selector-class">.color</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff0000</span>; }
<span class="hljs-selector-class">.background</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>; }
<span class="hljs-selector-class">.border</span> { <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>; }
<span class="hljs-selector-class">.shadow</span> { <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.3</span>); }
<span class="hljs-selector-class">.opacity</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.8</span>; }
</code></pre>
<h3 data-id="heading-9">æ€§èƒ½ä¼˜åŒ–å®æˆ˜ç­–ç•¥</h3>
<h4 data-id="heading-10">1. CSSä¼˜åŒ–æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ¨èï¼šä½¿ç”¨transformå®ç°åŠ¨ç”» */</span>
<span class="hljs-selector-class">.animate-element</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>); <span class="hljs-comment">/* é¿å…å›æµ */</span>
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-comment">/* é¿å…ï¼šç›´æ¥ä¿®æ”¹å°ºå¯¸å±æ€§ */</span>
<span class="hljs-selector-class">.not-optimized</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* å¯èƒ½å¼•å‘å›æµ */</span>
}
</code></pre>
<h4 data-id="heading-11">2. JavaScriptä¼˜åŒ–æŠ€å·§</h4>
<pre><code class="hljs language-ini" lang="ini">// æ‰¹é‡DOMæ“ä½œ
const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()<span class="hljs-comment">;</span>
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 100; i++) {</span>
  const <span class="hljs-attr">div</span> = document.createElement(<span class="hljs-string">'div'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">div.textContent</span> = `Item <span class="hljs-variable">${i}</span>`<span class="hljs-comment">;</span>
  fragment.appendChild(div)<span class="hljs-comment">;</span>
}
document.getElementById('container').appendChild(fragment)<span class="hljs-comment">;</span>

// è¯»å†™åˆ†ç¦»
const <span class="hljs-attr">width</span> = element.<span class="hljs-literal">off</span>setWidth<span class="hljs-comment">; // è¯»</span>
<span class="hljs-attr">element.style.width</span> = width + <span class="hljs-number">10</span> + <span class="hljs-string">'px'</span><span class="hljs-comment">; // å†™</span>
</code></pre>
<h4 data-id="heading-12">3. å¸ƒå±€ä¼˜åŒ–ç­–ç•¥</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// ä½¿ç”¨è™šæ‹ŸDOMæŠ€æœ¯</span>
<span class="hljs-comment">// ä½¿ç”¨CSSåŠ¨ç”»ä»£æ›¿JavaScriptåŠ¨ç”»</span>
<span class="hljs-comment">// åˆç†ä½¿ç”¨will-changeå±æ€§</span>
<span class="hljs-selector-class">.optimized-element</span> {
  <span class="hljs-attribute">will-change</span>: transform;
}
</code></pre>
<h2 data-id="heading-13">ä¸‰ã€å‡½æ•°æ€§èƒ½ä¼˜åŒ–ï¼šé˜²æŠ–ä¸èŠ‚æµç²¾è®²</h2>
<h3 data-id="heading-14">é˜²æŠ–ï¼ˆDebounceï¼‰å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Debouncer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, wait, immediate = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">later</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!immediate) func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      };
      
      <span class="hljs-keyword">const</span> callNow = immediate &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>;
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeoutId</span> = <span class="hljs-built_in">setTimeout</span>(later, wait);
      
      <span class="hljs-keyword">if</span> (callNow) func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> searchInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'search'</span>);
<span class="hljs-keyword">const</span> debouncer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Debouncer</span>();

searchInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, debouncer.<span class="hljs-title function_">debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢å…³é”®è¯:'</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  <span class="hljs-comment">// æ‰§è¡Œæœç´¢APIè°ƒç”¨</span>
}, <span class="hljs-number">300</span>));
</code></pre>
<h3 data-id="heading-15">èŠ‚æµï¼ˆThrottleï¼‰å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Throttler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, limit</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">if</span> (now - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span> &gt;= limit) {
        func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span> = now;
      }
    };
  }

  <span class="hljs-comment">// å®šæ—¶å™¨ç‰ˆæœ¬èŠ‚æµ</span>
  <span class="hljs-title function_">throttleWithTimer</span>(<span class="hljs-params">func, limit</span>) {
    <span class="hljs-keyword">let</span> timeoutId;
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!timeoutId) {
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          timeoutId = <span class="hljs-literal">null</span>;
        }, limit);
      }
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> throttler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Throttler</span>();
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, throttler.<span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»šåŠ¨ä½ç½®:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>);
  <span class="hljs-comment">// æ›´æ–°æ»šåŠ¨ç›¸å…³UI</span>
}, <span class="hljs-number">100</span>));
</code></pre>
<h3 data-id="heading-16">åº”ç”¨åœºæ™¯å¯¹æ¯”</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b59194978c2a4b5b96f1ca9203256a61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn55-l6Zey6ZeyaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763622105&amp;x-signature=%2BTcv3Kovz38Ed8o%2BF%2FOK%2F9GlsdU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">å››ã€å›¾ç‰‡èµ„æºä¼˜åŒ–å…¨æ”»ç•¥</h2>
<h3 data-id="heading-18">ä¼˜åŒ–ç­–ç•¥çŸ©é˜µ</h3>
<h4 data-id="heading-19">1. æ ¼å¼é€‰æ‹©æŒ‡å—</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- WebPæ ¼å¼ï¼ˆä¼˜å…ˆï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.webp"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/jpeg"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æè¿°"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>

<span class="hljs-comment">&lt;!-- SVGçŸ¢é‡å›¾æ ‡ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"40"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"#ff0000"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
</code></pre>
<h4 data-id="heading-20">2. å“åº”å¼å›¾ç‰‡æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¤šå°ºå¯¸é€‚é… --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> 
  <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image-320w.jpg 320w,
          image-480w.jpg 480w,
          image-800w.jpg 800w"</span>
  <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 320px) 280px,
         (max-width: 480px) 440px,
         800px"</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">"image-800w.jpg"</span> 
  <span class="hljs-attr">alt</span>=<span class="hljs-string">"å“åº”å¼å›¾ç‰‡"</span>&gt;</span>
</code></pre>
<h4 data-id="heading-21">3. ç°ä»£ä¼˜åŒ–æŠ€æœ¯</h4>
<pre><code class="hljs language-ini" lang="ini">// å›¾ç‰‡å‹ç¼©ä¸è½¬æ¢
const <span class="hljs-attr">optimizeImage</span> = async (file, quality = <span class="hljs-number">0.8</span>) =&gt; {
  return new Promise((resolve) =&gt; {
    const <span class="hljs-attr">canvas</span> = document.createElement(<span class="hljs-string">'canvas'</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">ctx</span> = canvas.getContext(<span class="hljs-string">'2d'</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">img</span> = new Image()<span class="hljs-comment">;</span>
    
    <span class="hljs-attr">img.onload</span> = () =&gt; {
      <span class="hljs-attr">canvas.width</span> = img.width<span class="hljs-comment">;</span>
      <span class="hljs-attr">canvas.height</span> = img.height<span class="hljs-comment">;</span>
      ctx.drawImage(img, 0, 0)<span class="hljs-comment">;</span>
      canvas.toBlob(resolve, 'image/jpeg', quality)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
    
    <span class="hljs-attr">img.src</span> = URL.createObjectURL(file)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-22">äº”ã€Webpackæ„å»ºæ·±åº¦ä¼˜åŒ–</h2>
<h3 data-id="heading-23">æ€§èƒ½ä¼˜åŒ–é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">webpack.config.js</span>
<span class="hljs-string">module.exports</span> <span class="hljs-string">=</span> {
  <span class="hljs-string">//</span> <span class="hljs-string">æ„å»ºä¼˜åŒ–</span>
  <span class="hljs-attr">optimization:</span> {
    <span class="hljs-attr">splitChunks:</span> {
      <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups:</span> {
        <span class="hljs-attr">vendor:</span> {
          <span class="hljs-attr">test:</span> <span class="hljs-string">/</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">node_modules</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">/</span>,
          <span class="hljs-attr">name:</span> <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
        },
        <span class="hljs-attr">common:</span> {
          <span class="hljs-attr">name:</span> <span class="hljs-string">'common'</span>,
          <span class="hljs-attr">minChunks:</span> <span class="hljs-number">2</span>,
          <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
          <span class="hljs-attr">enforce:</span> <span class="hljs-literal">true</span>
        }
      }
    }
  },
  
  <span class="hljs-string">//</span> <span class="hljs-string">èµ„æºä¼˜åŒ–</span>
  <span class="hljs-attr">module:</span> {
    <span class="hljs-attr">rules:</span> [
      {
        <span class="hljs-attr">test:</span> <span class="hljs-string">/\.(png|jpg|jpeg|gif)$/i</span>,
        <span class="hljs-attr">use:</span> [
          {
            <span class="hljs-attr">loader:</span> <span class="hljs-string">'image-webpack-loader'</span>,
            <span class="hljs-attr">options:</span> {
              <span class="hljs-attr">mozjpeg:</span> { <span class="hljs-attr">progressive:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">quality:</span> <span class="hljs-number">65</span> },
              <span class="hljs-attr">optipng:</span> { <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span> },
              <span class="hljs-attr">pngquant:</span> { <span class="hljs-attr">quality:</span> [<span class="hljs-number">0.65</span>, <span class="hljs-number">0.90</span>], <span class="hljs-attr">speed:</span> <span class="hljs-number">4</span> },
              <span class="hljs-attr">gifsicle:</span> { <span class="hljs-attr">interlaced:</span> <span class="hljs-literal">false</span> }
            }
          }
        ]
      }
    ]
  }
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-24">é«˜çº§ä¼˜åŒ–æŠ€å·§</h3>
<pre><code class="hljs language-ini" lang="ini">// åŠ¨æ€å¯¼å…¥å®ç°ä»£ç åˆ†å‰²
const <span class="hljs-attr">LazyComponent</span> = () =&gt; import(/* webpackChunkName: <span class="hljs-string">"lazy-component"</span> */ <span class="hljs-string">'./LazyComponent'</span>)<span class="hljs-comment">;</span>

// é¢„åŠ è½½å…³é”®èµ„æº
&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"critical.css"</span> as=<span class="hljs-string">"style"</span>&gt;
&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> href=<span class="hljs-string">"next-page.js"</span> as=<span class="hljs-string">"script"</span>&gt;
</code></pre>
<h2 data-id="heading-25">å…­ã€å®‰å…¨é˜²æŠ¤å®æˆ˜</h2>
<h3 data-id="heading-26">XSSé˜²æŠ¤</h3>
<pre><code class="hljs language-ini" lang="ini">// è¾“å…¥è¿‡æ»¤ä¸è½¬ä¹‰
const <span class="hljs-attr">sanitizeHTML</span> = (str) =&gt; {
  const <span class="hljs-attr">div</span> = document.createElement(<span class="hljs-string">'div'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">div.textContent</span> = str<span class="hljs-comment">;</span>
  return div.innerHTML<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// CSPå†…å®¹å®‰å…¨ç­–ç•¥
// Content-Security-Policy: default-src 'self'<span class="hljs-comment">; script-src 'self' 'unsafe-inline'</span>
</code></pre>
<h3 data-id="heading-27">CSRFé˜²æŠ¤</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¯·æ±‚å¤´éªŒè¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">requestWithCSRF</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">url, data</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'meta[name="csrf-token"]'</span>).<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'content'</span>);
  
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      <span class="hljs-string">'X-CSRF-Token'</span>: token
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data)
  });
  
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
};
</code></pre>
<p>é€šè¿‡ç³»ç»Ÿæ€§åœ°å®æ–½è¿™äº›ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—æå‡å‰ç«¯åº”ç”¨æ€§èƒ½ï¼ŒåŒæ—¶ç¡®ä¿åº”ç”¨çš„å®‰å…¨æ€§ã€‚å»ºè®®æ ¹æ®å…·ä½“é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡æ€§èƒ½ç›‘æ§å·¥å…·æŒç»­è·Ÿè¸ªä¼˜åŒ–æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬å…­ç¯‡: Rust ä¸­çš„"é™æ€æ–¹æ³•"ï¼ˆå…³è”å‡½æ•°ï¼‰]]></title>    <link>https://juejin.cn/post/7571729676345278527</link>    <guid>https://juejin.cn/post/7571729676345278527</guid>    <pubDate>2025-11-13T06:55:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571729676345278527" data-draft-id="7571734313927393314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬å…­ç¯‡: Rust ä¸­çš„&quot;é™æ€æ–¹æ³•&quot;ï¼ˆå…³è”å‡½æ•°ï¼‰"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-13T06:55:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‹¤å¥‹çš„å°å°å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/958429870439544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬å…­ç¯‡: Rust ä¸­çš„"é™æ€æ–¹æ³•"ï¼ˆå…³è”å‡½æ•°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429870439544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‹¤å¥‹çš„å°å°å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:55:43.000Z" title="Thu Nov 13 2025 06:55:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Rust ä¸­çš„"é™æ€æ–¹æ³•"ï¼ˆå…³è”å‡½æ•°ï¼‰</h2>
<h3 data-id="heading-1">ç®€å•å›ç­”</h3>
<p><strong>æ˜¯çš„ï¼ŒRust æœ‰é™æ€æ–¹æ³•ï¼Œå«åš"å…³è”å‡½æ•°"ï¼ˆAssociated Functionsï¼‰</strong></p>
<ul>
<li>å…¶ä»–è¯­è¨€å«ï¼š<code>static method</code>ï¼ˆé™æ€æ–¹æ³•ï¼‰</li>
<li>Rust å«ï¼š<code>associated function</code>ï¼ˆå…³è”å‡½æ•°ï¼‰</li>
<li>æœ¬è´¨ï¼šæ²¡æœ‰Â <code>self</code>Â å‚æ•°çš„å‡½æ•°</li>
</ul>
<h3 data-id="heading-2">å¿«é€Ÿå¯¹æ¯”</h3>
<h4 data-id="heading-3">Java é™æ€æ–¹æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;
    
    <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">create</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(name);
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"Hello, "</span> + name);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
<span class="hljs-title class_">User</span> user = <span class="hljs-title class_">User</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"Alice"</span>);  <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
user.<span class="hljs-title function_">greet</span>();                       <span class="hljs-comment">// å®ä¾‹æ–¹æ³•</span>
</code></pre>
<h4 data-id="heading-4">Rust å…³è”å‡½æ•°</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    name: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼ˆ= é™æ€æ–¹æ³•ï¼‰</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create</span>(name: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { name }
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">greet</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Hello, {}"</span>, <span class="hljs-keyword">self</span>.name);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = User::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"Alice"</span>));  <span class="hljs-comment">// å…³è”å‡½æ•°</span>
user.<span class="hljs-title function_ invoke__">greet</span>();                                     <span class="hljs-comment">// å®ä¾‹æ–¹æ³•</span>
</code></pre>
<h3 data-id="heading-5">å…³é”®åŒºåˆ«</h3>






























<table><thead><tr><th>ç‰¹å¾</th><th>å…³è”å‡½æ•°ï¼ˆé™æ€æ–¹æ³•ï¼‰</th><th>å®ä¾‹æ–¹æ³•</th></tr></thead><tbody><tr><td><code>self</code>Â å‚æ•°</td><td>âŒ æ²¡æœ‰</td><td>âœ… æœ‰ï¼ˆ<code>&amp;self</code>ã€<code>&amp;mut self</code>ã€<code>self</code>ï¼‰</td></tr><tr><td>è°ƒç”¨æ–¹å¼</td><td><code>ç±»å‹å::å‡½æ•°å()</code></td><td><code>å®ä¾‹.æ–¹æ³•å()</code></td></tr><tr><td>éœ€è¦å®ä¾‹</td><td>âŒ ä¸éœ€è¦</td><td>âœ… éœ€è¦</td></tr><tr><td>å…¸å‹ç”¨é€”</td><td>æ„é€ å™¨ã€å·¥å‚æ–¹æ³•ã€å·¥å…·å‡½æ•°</td><td>æ“ä½œå®ä¾‹æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-6">è¯¦ç»†ç¤ºä¾‹</h3>
<h4 data-id="heading-7">1. æ„é€ å™¨æ¨¡å¼ï¼ˆæœ€å¸¸è§ç”¨æ³•ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    id: <span class="hljs-type">u64</span>,
    username: <span class="hljs-type">String</span>,
    email: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-comment">// æ ‡å‡†æ„é€ å™¨</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(username: <span class="hljs-type">String</span>, email: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            id: <span class="hljs-number">0</span>,
            username,
            email,
        }
    }
    
    <span class="hljs-comment">// å¸¦ ID çš„æ„é€ å™¨</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">with_id</span>(id: <span class="hljs-type">u64</span>, username: <span class="hljs-type">String</span>, email: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            id,
            username,
            email,
        }
    }
    
    <span class="hljs-comment">// é»˜è®¤æ„é€ å™¨</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            id: <span class="hljs-number">0</span>,
            username: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"guest"</span>),
            email: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"guest@example.com"</span>),
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// è°ƒç”¨ä¸åŒçš„å…³è”å‡½æ•°ï¼ˆæ„é€ å™¨ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user1</span> = User::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"alice"</span>),
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"alice@example.com"</span>)
    );
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user2</span> = User::<span class="hljs-title function_ invoke__">with_id</span>(
        <span class="hljs-number">1</span>,
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"bob"</span>),
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"bob@example.com"</span>)
    );
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user3</span> = User::<span class="hljs-title function_ invoke__">default</span>();
}
</code></pre>
<h4 data-id="heading-8">2. å·¥å‚æ–¹æ³•æ¨¡å¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Rectangle</span> {
    width: <span class="hljs-type">u32</span>,
    height: <span class="hljs-type">u32</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-comment">// æ ‡å‡†æ„é€ å™¨</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(width: <span class="hljs-type">u32</span>, height: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { width, height }
    }
    
    <span class="hljs-comment">// å·¥å‚æ–¹æ³•ï¼šåˆ›å»ºæ­£æ–¹å½¢</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">square</span>(size: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            width: size,
            height: size,
        }
    }
    
    <span class="hljs-comment">// å·¥å‚æ–¹æ³•ï¼šä»æ•°ç»„åˆ›å»º</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from_array</span>(arr: [<span class="hljs-type">u32</span>; <span class="hljs-number">2</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            width: arr[<span class="hljs-number">0</span>],
            height: arr[<span class="hljs-number">1</span>],
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rect</span> = Rectangle::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">square</span> = Rectangle::<span class="hljs-title function_ invoke__">square</span>(<span class="hljs-number">15</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">from_arr</span> = Rectangle::<span class="hljs-title function_ invoke__">from_array</span>([<span class="hljs-number">30</span>, <span class="hljs-number">40</span>]);
}
</code></pre>
<h4 data-id="heading-9">3. å·¥å…·å‡½æ•°ï¼ˆä¸éœ€è¦å®ä¾‹çš„åŠŸèƒ½ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MathUtils</span>;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">MathUtils</span> {
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼šè®¡ç®—æœ€å¤§å…¬çº¦æ•°</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">gcd</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
        <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
            a
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">Self</span>::<span class="hljs-title function_ invoke__">gcd</span>(b, a % b)
        }
    }
    
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼šåˆ¤æ–­ç´ æ•°</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_prime</span>(n: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>..=(n <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>).<span class="hljs-title function_ invoke__">sqrt</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> {
            <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼šé˜¶ä¹˜</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">factorial</span>(n: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u64</span> {
        <span class="hljs-keyword">match</span> n {
            <span class="hljs-number">0</span> | <span class="hljs-number">1</span> =&gt; <span class="hljs-number">1</span>,
            _ =&gt; n <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span> * <span class="hljs-keyword">Self</span>::<span class="hljs-title function_ invoke__">factorial</span>(n - <span class="hljs-number">1</span>),
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"GCD(48, 18) = {}"</span>, MathUtils::<span class="hljs-title function_ invoke__">gcd</span>(<span class="hljs-number">48</span>, <span class="hljs-number">18</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"7 æ˜¯ç´ æ•°å—? {}"</span>, MathUtils::<span class="hljs-title function_ invoke__">is_prime</span>(<span class="hljs-number">7</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"5! = {}"</span>, MathUtils::<span class="hljs-title function_ invoke__">factorial</span>(<span class="hljs-number">5</span>));
}
</code></pre>
<h4 data-id="heading-10">4. å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Debug)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    username: <span class="hljs-type">String</span>,
    email: <span class="hljs-type">String</span>,
    age: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,
    bio: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">UserBuilder</span> {
    username: <span class="hljs-type">String</span>,
    email: <span class="hljs-type">String</span>,
    age: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,
    bio: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">UserBuilder</span> {
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼šåˆ›å»º Builder</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(username: <span class="hljs-type">String</span>, email: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            username,
            email,
            age: <span class="hljs-literal">None</span>,
            bio: <span class="hljs-literal">None</span>,
        }
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼šè®¾ç½®å¹´é¾„</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">age</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, age: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.age = <span class="hljs-title function_ invoke__">Some</span>(age);
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼šè®¾ç½®ç®€ä»‹</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">bio</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, bio: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">self</span>.bio = <span class="hljs-title function_ invoke__">Some</span>(bio);
        <span class="hljs-keyword">self</span>
    }
    
    <span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼šæ„å»ºæœ€ç»ˆå¯¹è±¡</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">build</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> User {
        User {
            username: <span class="hljs-keyword">self</span>.username,
            email: <span class="hljs-keyword">self</span>.email,
            age: <span class="hljs-keyword">self</span>.age,
            bio: <span class="hljs-keyword">self</span>.bio,
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// é“¾å¼è°ƒç”¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = UserBuilder::<span class="hljs-title function_ invoke__">new</span>(
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"alice"</span>),
        <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"alice@example.com"</span>)
    )
    .<span class="hljs-title function_ invoke__">age</span>(<span class="hljs-number">25</span>)
    .<span class="hljs-title function_ invoke__">bio</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"Rust å¼€å‘è€…"</span>))
    .<span class="hljs-title function_ invoke__">build</span>();
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, user);
}
</code></pre>
<h3 data-id="heading-11">æœ¬é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-12">ç¤ºä¾‹ 1ï¼šUserServiceï¼ˆsrc/services/user_service.rsï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">UserService</span> {
    db: MySqlPool,
    cache: RedisCache,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-comment">/// å…³è”å‡½æ•°ï¼ˆæ„é€ å™¨ï¼‰</span>
    <span class="hljs-comment">/// åˆ›å»ºæ–°çš„ UserService å®ä¾‹</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(db: MySqlPool, cache: RedisCache) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { db, cache }
    }

    <span class="hljs-comment">/// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-comment">/// åˆ›å»ºç”¨æˆ·</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_user</span>(&amp;<span class="hljs-keyword">self</span>, payload: CreateUserRequest) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;User&gt; {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘...</span>
    }

    <span class="hljs-comment">/// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-comment">/// è·å–ç”¨æˆ·</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_user</span>(&amp;<span class="hljs-keyword">self</span>, user_id: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Option</span>&lt;User&gt;&gt; {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘...</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å…³è”å‡½æ•°ï¼šåˆ›å»ºæœåŠ¡å®ä¾‹
let <span class="hljs-attr">service</span> = UserService::new(pool, cache)<span class="hljs-comment">;</span>

// å®ä¾‹æ–¹æ³•ï¼šä½¿ç”¨æœåŠ¡
let <span class="hljs-attr">user</span> = service.create_user(req).await?<span class="hljs-comment">;</span>
let <span class="hljs-attr">found</span> = service.get_user(<span class="hljs-number">1</span>).await?<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-13">ç¤ºä¾‹ 2ï¼šRedisCacheï¼ˆsrc/utils/cache.rsï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">RedisCache</span> {
    client: ConnectionManager,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">RedisCache</span> {
    <span class="hljs-comment">/// å…³è”å‡½æ•°ï¼ˆå¼‚æ­¥æ„é€ å™¨ï¼‰</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(redis_url: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> RedisResult&lt;<span class="hljs-keyword">Self</span>&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = redis::Client::<span class="hljs-title function_ invoke__">open</span>(redis_url)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">connection_manager</span> = ConnectionManager::<span class="hljs-title function_ invoke__">new</span>(client).<span class="hljs-keyword">await</span>?;
        <span class="hljs-title function_ invoke__">Ok</span>(RedisCache {
            client: connection_manager,
        })
    }

    <span class="hljs-comment">/// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> RedisResult&lt;<span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">conn</span> = <span class="hljs-keyword">self</span>.client.<span class="hljs-title function_ invoke__">clone</span>();
        conn.<span class="hljs-title function_ invoke__">get</span>(key).<span class="hljs-keyword">await</span>
    }

    <span class="hljs-comment">/// å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">set</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>, value: &amp;<span class="hljs-type">str</span>, ttl: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> RedisResult&lt;()&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">conn</span> = <span class="hljs-keyword">self</span>.client.<span class="hljs-title function_ invoke__">clone</span>();
        conn.<span class="hljs-title function_ invoke__">set_ex</span>(key, value, ttl).<span class="hljs-keyword">await</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å…³è”å‡½æ•°ï¼šåˆ›å»ºç¼“å­˜å®ä¾‹</span>
<span class="hljs-keyword">let</span> cache = RedisCache::<span class="hljs-keyword">new</span>(<span class="hljs-string">"redis://localhost:6379"</span>).<span class="hljs-keyword">await</span>?;

<span class="hljs-comment">// å®ä¾‹æ–¹æ³•ï¼šä½¿ç”¨ç¼“å­˜</span>
cache.<span class="hljs-keyword">set</span>(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-number">3600</span>).<span class="hljs-keyword">await</span>?;
<span class="hljs-keyword">let</span> <span class="hljs-keyword">value</span> = cache.<span class="hljs-keyword">get</span>(<span class="hljs-string">"key"</span>).<span class="hljs-keyword">await</span>?;
</code></pre>
<h4 data-id="heading-14">ç¤ºä¾‹ 3ï¼šgRPC æœåŠ¡å®ç°ï¼ˆsrc/grpc/service.rsï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">UserServiceImpl</span> {
    pool: MySqlPool,
    cache: Arc&lt;RedisCache&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">UserServiceImpl</span> {
    <span class="hljs-comment">/// å…³è”å‡½æ•°ï¼ˆæ„é€ å™¨ï¼‰</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(pool: MySqlPool, cache: Arc&lt;RedisCache&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { pool, cache }
    }
}

<span class="hljs-meta">#[tonic::async_trait]</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">UserServiceImpl</span> {
    <span class="hljs-comment">/// å®ä¾‹æ–¹æ³•ï¼ˆgRPC æ¥å£å®ç°ï¼‰</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_user</span>(
        &amp;<span class="hljs-keyword">self</span>,
        request: Request&lt;CreateUserRequest&gt;,
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;CreateUserResponse&gt;, Status&gt; {
        <span class="hljs-comment">// å®ç°é€»è¾‘...</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">// å…³è”å‡½æ•°ï¼šåˆ›å»º gRPC æœåŠ¡å®ä¾‹
let user_service = UserServiceImpl::<span class="hljs-built_in">new</span>(pool.<span class="hljs-built_in">clone</span>(), cache.<span class="hljs-built_in">clone</span>());

// æ³¨å†Œåˆ° gRPC æœåŠ¡å™¨
Server::<span class="hljs-built_in">builder</span>()
    .<span class="hljs-built_in">add_service</span>(UserServiceServer::<span class="hljs-built_in">new</span>(user_service))
    .<span class="hljs-built_in">serve</span>(addr)
    .await?;
</code></pre>
<h3 data-id="heading-15">å¸¸è§æ¨¡å¼æ€»ç»“</h3>
<h4 data-id="heading-16">1. å‘½åçº¦å®š</h4>



































<table><thead><tr><th>å‡½æ•°å</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>new()</code></td><td>æ ‡å‡†æ„é€ å™¨</td><td><code>User::new(name, email)</code></td></tr><tr><td><code>default()</code></td><td>é»˜è®¤å€¼æ„é€ å™¨</td><td><code>User::default()</code></td></tr><tr><td><code>with_*()</code></td><td>å¸¦ç‰¹å®šå‚æ•°çš„æ„é€ å™¨</td><td><code>User::with_id(1, name)</code></td></tr><tr><td><code>from_*()</code></td><td>ç±»å‹è½¬æ¢æ„é€ å™¨</td><td><code>User::from_string(json)</code></td></tr><tr><td><code>builder()</code></td><td>å»ºé€ è€…æ¨¡å¼å…¥å£</td><td><code>User::builder()</code></td></tr></tbody></table>
<h4 data-id="heading-17">2. è°ƒç”¨è¯­æ³•</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å…³è”å‡½æ•°ä½¿ç”¨ :: è°ƒç”¨</span>
<span class="hljs-title class_">User</span>::<span class="hljs-keyword">new</span>(name, email)
<span class="hljs-title class_">String</span>::<span class="hljs-keyword">from</span>(<span class="hljs-string">"hello"</span>)
<span class="hljs-title class_">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">10</span>)

<span class="hljs-comment">// å®ä¾‹æ–¹æ³•ä½¿ç”¨ . è°ƒç”¨</span>
user.<span class="hljs-title function_ invoke__">get_name</span>()
<span class="hljs-keyword">string</span>.<span class="hljs-title function_ invoke__">len</span>()
vec.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">1</span>)
</code></pre>
<h4 data-id="heading-18">3. self å‚æ•°ç±»å‹</h4>
<pre><code class="hljs language-php" lang="php">impl MyStruct {
    <span class="hljs-comment">// å…³è”å‡½æ•°ï¼ˆæ—  selfï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">new</span>(<span class="hljs-params"/>) -&gt; <span class="hljs-title">Self</span> </span>{ }
    
    <span class="hljs-comment">// ä¸å¯å˜å€Ÿç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">read_data</span>(<span class="hljs-params">&amp;<span class="hljs-built_in">self</span></span>) </span>{ }
    
    <span class="hljs-comment">// å¯å˜å€Ÿç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">modify_data</span>(<span class="hljs-params">&amp;mut <span class="hljs-built_in">self</span></span>) </span>{ }
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰æƒï¼ˆæ¶ˆè´¹ selfï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">consume</span>(<span class="hljs-params"><span class="hljs-built_in">self</span></span>) </span>{ }
}
</code></pre>
<h3 data-id="heading-19">ä¸å…¶ä»–è¯­è¨€å¯¹æ¯”</h3>
<h4 data-id="heading-20">Python</h4>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, name</span>):  <span class="hljs-comment"># å®ä¾‹æ–¹æ³•</span>
        <span class="hljs-variable language_">self</span>.name = name
    
    <span class="hljs-variable">@staticmethod</span>              <span class="hljs-comment"># é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">name</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">User</span>(name)
    
    <span class="hljs-variable">@classmethod</span>               <span class="hljs-comment"># ç±»æ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_dict</span>(<span class="hljs-params">cls, data</span>):
        <span class="hljs-keyword">return</span> cls(data[<span class="hljs-string">'name'</span>])
</code></pre>
<h4 data-id="heading-21">Java</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{  <span class="hljs-comment">// æ„é€ å™¨</span>
        <span class="hljs-keyword">this</span>.name = name;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> User <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{  <span class="hljs-comment">// é™æ€æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">User</span>(name);
    }
}
</code></pre>
<h4 data-id="heading-22">Rust</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    name: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {  <span class="hljs-comment">// å…³è”å‡½æ•°</span>
        <span class="hljs-keyword">Self</span> { name }
    }
    
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create</span>(name: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {  <span class="hljs-comment">// å…³è”å‡½æ•°</span>
        <span class="hljs-keyword">Self</span> { name }
    }
}
</code></pre>
<h3 data-id="heading-23">ä¸ºä»€ä¹ˆå«"å…³è”å‡½æ•°"ï¼Ÿ</h3>
<p>å› ä¸ºè¿™äº›å‡½æ•°<strong>å…³è”ï¼ˆassociatedï¼‰</strong> Â åˆ°ç‰¹å®šç±»å‹ï¼Œä½†ä¸éœ€è¦è¯¥ç±»å‹çš„å®ä¾‹ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">String</span> {
    <span class="hljs-comment">// å…³è”åˆ° String ç±»å‹</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Vec</span>&lt;T&gt; {
    <span class="hljs-comment">// å…³è”åˆ° Vec&lt;T&gt; ç±»å‹</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> { }
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">with_capacity</span>(capacity: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> { }
}
</code></pre>
<h3 data-id="heading-24">æ€»ç»“</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th></tr></thead><tbody><tr><td>Rust æœ‰é™æ€æ–¹æ³•å—ï¼Ÿ</td><td>âœ… æœ‰ï¼Œå«<strong>å…³è”å‡½æ•°</strong></td></tr><tr><td>å¦‚ä½•å®šä¹‰ï¼Ÿ</td><td><code>impl</code>Â å—ä¸­æ²¡æœ‰Â <code>self</code>Â å‚æ•°çš„å‡½æ•°</td></tr><tr><td>å¦‚ä½•è°ƒç”¨ï¼Ÿ</td><td><code>ç±»å‹å::å‡½æ•°å()</code></td></tr><tr><td>å¸¸è§ç”¨é€”ï¼Ÿ</td><td>æ„é€ å™¨ã€å·¥å‚æ–¹æ³•ã€å·¥å…·å‡½æ•°</td></tr><tr><td>å…³é”®å­—ï¼Ÿ</td><td>âŒ æ²¡æœ‰Â <code>static</code>Â å…³é”®å­—ï¼Œåªæ˜¯æ™®é€šå‡½æ•°</td></tr></tbody></table>
<h4 data-id="heading-25">è®°å¿†è¦ç‚¹</h4>
<ul>
<li><strong>æœ‰Â <code>self</code></strong>Â = å®ä¾‹æ–¹æ³•ï¼ˆéœ€è¦å®ä¾‹è°ƒç”¨ï¼‰</li>
<li><strong>æ— Â <code>self</code></strong>Â = å…³è”å‡½æ•°ï¼ˆç±»å‹åè°ƒç”¨ï¼‰</li>
<li><strong><code>::</code></strong> Â = å…³è”å‡½æ•°è°ƒç”¨ç¬¦å·</li>
<li><strong><code>.</code></strong> Â = å®ä¾‹æ–¹æ³•è°ƒç”¨ç¬¦å·</li>
</ul>
<hr/>
<p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fbook%2Fch05-03-method-syntax.html" target="_blank" title="https://doc.rust-lang.org/book/ch05-03-method-syntax.html" ref="nofollow noopener noreferrer">Rust Book - Method Syntax</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Freference%2Fitems%2Fassociated-items.html" target="_blank" title="https://doc.rust-lang.org/reference/items/associated-items.html" ref="nofollow noopener noreferrer">Rust Reference - Associated Items</a></li>
<li>æœ¬é¡¹ç›®æ–‡æ¡£ï¼š<code>RUST_STRUCT_TRAITS.md</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸ƒç¯‡: Rust å¤šçº¿ç¨‹ä¸å¹¶å‘ç¼–ç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7571747061386919955</link>    <guid>https://juejin.cn/post/7571747061386919955</guid>    <pubDate>2025-11-13T06:56:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571747061386919955" data-draft-id="7571815573932326975" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸ƒç¯‡: Rust å¤šçº¿ç¨‹ä¸å¹¶å‘ç¼–ç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-13T06:56:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‹¤å¥‹çš„å°å°å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/958429870439544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸ƒç¯‡: Rust å¤šçº¿ç¨‹ä¸å¹¶å‘ç¼–ç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429870439544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‹¤å¥‹çš„å°å°å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T06:56:47.000Z" title="Thu Nov 13 2025 06:56:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Rust å¤šçº¿ç¨‹ä¸å¹¶å‘ç¼–ç¨‹è¯¦è§£</h2>
<blockquote>
<p>Rust çš„å¹¶å‘æ¨¡å‹åŸºäº"æ— ç•å¹¶å‘"ï¼ˆFearless Concurrencyï¼‰ç†å¿µï¼Œé€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿåœ¨ç¼–è¯‘æœŸé˜²æ­¢æ•°æ®ç«äº‰ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E7%25BA%25BF%25E7%25A8%258B%25E5%259F%25BA%25E7%25A1%2580" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80" ref="nofollow noopener noreferrer">çº¿ç¨‹åŸºç¡€</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E6%25B6%2588%25E6%2581%25AF%25E4%25BC%25A0%25E9%2580%2592" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92" ref="nofollow noopener noreferrer">æ¶ˆæ¯ä¼ é€’</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E5%2585%25B1%25E4%25BA%25AB%25E7%258A%25B6%25E6%2580%2581%25E5%25B9%25B6%25E5%258F%2591" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E5%85%B1%E4%BA%AB%E7%8A%B6%E6%80%81%E5%B9%B6%E5%8F%91" ref="nofollow noopener noreferrer">å…±äº«çŠ¶æ€å¹¶å‘</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E5%25BC%2582%25E6%25AD%25A5%25E7%25BC%2596%25E7%25A8%258B" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B" ref="nofollow noopener noreferrer">å¼‚æ­¥ç¼–ç¨‹ (Async/Await)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E5%25B9%25B6%25E5%258F%2591%25E6%25A8%25A1%25E5%25BC%258F%25E4%25B8%258E%25E6%259C%2580%25E4%25BD%25B3%25E5%25AE%259E%25E8%25B7%25B5" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" ref="nofollow noopener noreferrer">å¹¶å‘æ¨¡å¼ä¸æœ€ä½³å®è·µ</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A63343%2FmarkdownPreview%2F1592549676%2Fmarkdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html%23%25E5%25AE%259E%25E6%2588%2598%25E7%25A4%25BA%25E4%25BE%258B" target="_blank" title="http://localhost:63343/markdownPreview/1592549676/markdown-preview-index-37o8pp9tsavu739jj6o812h5ho.html#%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B" ref="nofollow noopener noreferrer">å®æˆ˜ç¤ºä¾‹</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">çº¿ç¨‹åŸºç¡€</h3>
<h4 data-id="heading-3">1. åˆ›å»ºçº¿ç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆ›å»ºæ–°çº¿ç¨‹</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å­çº¿ç¨‹: {}"</span>, i);
            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1</span>));
        }
    });

    <span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">5</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹: {}"</span>, i);
        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1</span>));
    }

    <span class="hljs-comment">// ç­‰å¾…å­çº¿ç¨‹å®Œæˆ</span>
    handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<h4 data-id="heading-4">2. å¸¦è¿”å›å€¼çš„çº¿ç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| {
        <span class="hljs-comment">// çº¿ç¨‹æ‰§è¡Œè®¡ç®—</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = (<span class="hljs-number">1</span>..=<span class="hljs-number">100</span>).sum::&lt;<span class="hljs-type">i32</span>&gt;();
        result  <span class="hljs-comment">// è¿”å›å€¼</span>
    });

    <span class="hljs-comment">// è·å–çº¿ç¨‹è¿”å›å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è®¡ç®—ç»“æœ: {}"</span>, result);
}
</code></pre>
<h4 data-id="heading-5">3. æ•è·å¤–éƒ¨å˜é‡ï¼ˆmove é—­åŒ…ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

    <span class="hljs-comment">// ä½¿ç”¨ move å°†æ‰€æœ‰æƒè½¬ç§»åˆ°çº¿ç¨‹</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘é‡: {:?}"</span>, v);
    });

    handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-comment">// v å·²è¢«ç§»åŠ¨ï¼Œä¸èƒ½å†ä½¿ç”¨</span>
}
</code></pre>
<h4 data-id="heading-6">4. çº¿ç¨‹å‘½åå’Œæ„å»ºå™¨</h4>
<pre><code class="hljs language-css" lang="css">use std::thread;

fn <span class="hljs-selector-tag">main</span>() {
    let builder = thread::Builder::<span class="hljs-built_in">new</span>()
        .<span class="hljs-built_in">name</span>(<span class="hljs-string">"worker-thread"</span>.<span class="hljs-built_in">to_string</span>())
        .<span class="hljs-built_in">stack_size</span>(<span class="hljs-number">4</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);  // <span class="hljs-number">4</span>MB æ ˆ

    let handle = builder<span class="hljs-selector-class">.spawn</span>(|| {
        println!("çº¿ç¨‹å: {:?}", thread::<span class="hljs-built_in">current</span>().<span class="hljs-built_in">name</span>());
        // æ‰§è¡Œä»»åŠ¡
    })<span class="hljs-selector-class">.unwrap</span>();

    handle<span class="hljs-selector-class">.join</span>()<span class="hljs-selector-class">.unwrap</span>();
}
</code></pre>
<hr/>
<h3 data-id="heading-7">æ¶ˆæ¯ä¼ é€’</h3>
<p>Rust ä½¿ç”¨Â <strong>é€šé“ï¼ˆChannelï¼‰</strong> Â å®ç°çº¿ç¨‹é—´é€šä¿¡ï¼Œéµå¾ª"ä¸è¦é€šè¿‡å…±äº«å†…å­˜é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜"ã€‚</p>
<h4 data-id="heading-8">1. å•ç”Ÿäº§è€…å•æ¶ˆè´¹è€…ï¼ˆmpscï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::mpsc;
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆ›å»ºé€šé“</span>
    <span class="hljs-keyword">let</span> (tx, rx) = mpsc::<span class="hljs-title function_ invoke__">channel</span>();

    <span class="hljs-comment">// å‘é€è€…çº¿ç¨‹</span>
    thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">messages</span> = <span class="hljs-built_in">vec!</span>[
            <span class="hljs-string">"æ¶ˆæ¯1"</span>,
            <span class="hljs-string">"æ¶ˆæ¯2"</span>,
            <span class="hljs-string">"æ¶ˆæ¯3"</span>,
        ];

        <span class="hljs-keyword">for</span> <span class="hljs-variable">msg</span> <span class="hljs-keyword">in</span> messages {
            tx.<span class="hljs-title function_ invoke__">send</span>(msg).<span class="hljs-title function_ invoke__">unwrap</span>();
            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">100</span>));
        }
    });

    <span class="hljs-comment">// æ¥æ”¶è€…ï¼ˆä¸»çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">received</span> <span class="hljs-keyword">in</span> rx {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {}"</span>, received);
    }
}
</code></pre>
<h4 data-id="heading-9">2. å¤šç”Ÿäº§è€…å•æ¶ˆè´¹è€…</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::mpsc;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> (tx, rx) = mpsc::<span class="hljs-title function_ invoke__">channel</span>();

    <span class="hljs-comment">// å…‹éš†å‘é€ç«¯ï¼Œåˆ›å»ºå¤šä¸ªç”Ÿäº§è€…</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">3</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">tx_clone</span> = tx.<span class="hljs-title function_ invoke__">clone</span>();
        thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">msg</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"çº¿ç¨‹ {} çš„æ¶ˆæ¯"</span>, i);
            tx_clone.<span class="hljs-title function_ invoke__">send</span>(msg).<span class="hljs-title function_ invoke__">unwrap</span>();
        });
    }

    <span class="hljs-comment">// æ˜¾å¼ä¸¢å¼ƒåŸå§‹å‘é€ç«¯</span>
    <span class="hljs-title function_ invoke__">drop</span>(tx);

    <span class="hljs-comment">// æ¥æ”¶æ‰€æœ‰æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">received</span> <span class="hljs-keyword">in</span> rx {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {}"</span>, received);
    }
}
</code></pre>
<h4 data-id="heading-10">3. æœ‰ç•Œé€šé“ï¼ˆåŒæ­¥é€šé“ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::mpsc;
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆ›å»ºå®¹é‡ä¸º 2 çš„æœ‰ç•Œé€šé“</span>
    <span class="hljs-keyword">let</span> (tx, rx) = mpsc::<span class="hljs-title function_ invoke__">sync_channel</span>(<span class="hljs-number">2</span>);

    thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..=<span class="hljs-number">5</span> {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘é€: {}"</span>, i);
            tx.<span class="hljs-title function_ invoke__">send</span>(i).<span class="hljs-title function_ invoke__">unwrap</span>();  <span class="hljs-comment">// é˜Ÿåˆ—æ»¡æ—¶ä¼šé˜»å¡</span>
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å·²å‘é€: {}"</span>, i);
        }
    });

    thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">2</span>));

    <span class="hljs-keyword">for</span> <span class="hljs-variable">received</span> <span class="hljs-keyword">in</span> rx {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {}"</span>, received);
        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>));
    }
}
</code></pre>
<h4 data-id="heading-11">4. é€šé“é€‰æ‹©ï¼ˆCrossbeamï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> crossbeam::channel;
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> (tx1, rx1) = channel::<span class="hljs-title function_ invoke__">unbounded</span>();
    <span class="hljs-keyword">let</span> (tx2, rx2) = channel::<span class="hljs-title function_ invoke__">unbounded</span>();

    <span class="hljs-comment">// ç”Ÿäº§è€…1</span>
    thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">100</span>));
        tx1.<span class="hljs-title function_ invoke__">send</span>(<span class="hljs-string">"æ¥è‡ªé€šé“1"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    });

    <span class="hljs-comment">// ç”Ÿäº§è€…2</span>
    thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">200</span>));
        tx2.<span class="hljs-title function_ invoke__">send</span>(<span class="hljs-string">"æ¥è‡ªé€šé“2"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    });

    <span class="hljs-comment">// é€‰æ‹©å…ˆåˆ°è¾¾çš„æ¶ˆæ¯</span>
    channel::<span class="hljs-built_in">select!</span> {
        <span class="hljs-title function_ invoke__">recv</span>(rx1) <span class="hljs-punctuation">-&gt;</span> msg =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {:?}"</span>, msg),
        <span class="hljs-title function_ invoke__">recv</span>(rx2) <span class="hljs-punctuation">-&gt;</span> msg =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {:?}"</span>, msg),
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-12">å…±äº«çŠ¶æ€å¹¶å‘</h3>
<h4 data-id="heading-13">1. äº’æ–¥é”ï¼ˆMutexï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::Mutex;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counter</span> = Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-comment">// è¿™é‡Œæœ‰é—®é¢˜ï¼šcounter è¢«ç§»åŠ¨äº†</span>
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">num</span> = counter.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            *num += <span class="hljs-number">1</span>;
        });
        handles.<span class="hljs-title function_ invoke__">push</span>(handle);
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœ: {}"</span>, *counter.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œéœ€è¦ä½¿ç”¨Â <code>Arc</code>ï¼š</p>
<h4 data-id="heading-14">2. Arc + Mutexï¼ˆæ­£ç¡®çš„æ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// Arc: åŸå­å¼•ç”¨è®¡æ•°ï¼Œå…è®¸å¤šä¸ªæ‰€æœ‰è€…</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counter</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counter</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;counter);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">num</span> = counter.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            *num += <span class="hljs-number">1</span>;
        });
        handles.<span class="hljs-title function_ invoke__">push</span>(handle);
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœ: {}"</span>, *counter.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
}
</code></pre>
<h4 data-id="heading-15">3. RwLockï¼ˆè¯»å†™é”ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, RwLock};
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(RwLock::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-comment">// å¤šä¸ªè¯»è€…</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;data);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = data.<span class="hljs-title function_ invoke__">read</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¯»è€… {}: {:?}"</span>, i, *r);
        });
        handles.<span class="hljs-title function_ invoke__">push</span>(handle);
    }

    <span class="hljs-comment">// ä¸€ä¸ªå†™è€…</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data_write</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;data);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">writer</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">w</span> = data_write.<span class="hljs-title function_ invoke__">write</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        w.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">4</span>);
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å†™è€…æ·»åŠ äº† 4"</span>);
    });
    handles.<span class="hljs-title function_ invoke__">push</span>(writer);

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœ€ç»ˆæ•°æ®: {:?}"</span>, *data.<span class="hljs-title function_ invoke__">read</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
}
</code></pre>
<h4 data-id="heading-16">4. åŸå­ç±»å‹ï¼ˆAtomicï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::atomic::{AtomicUsize, Ordering};
<span class="hljs-keyword">use</span> std::sync::Arc;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counter</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AtomicUsize::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">counter</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;counter);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">1000</span> {
                counter.<span class="hljs-title function_ invoke__">fetch_add</span>(<span class="hljs-number">1</span>, Ordering::SeqCst);
            }
        });
        handles.<span class="hljs-title function_ invoke__">push</span>(handle);
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœ: {}"</span>, counter.<span class="hljs-title function_ invoke__">load</span>(Ordering::SeqCst));
}
</code></pre>
<h4 data-id="heading-17">5. æ¡ä»¶å˜é‡ï¼ˆCondvarï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex, Condvar};
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pair</span> = Arc::<span class="hljs-title function_ invoke__">new</span>((Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-literal">false</span>), Condvar::<span class="hljs-title function_ invoke__">new</span>()));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pair_clone</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;pair);

    <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹</span>
    thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">let</span> (lock, cvar) = &amp;*pair_clone;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">started</span> = lock.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        
        <span class="hljs-keyword">while</span> !*started {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç­‰å¾…ä¿¡å·..."</span>);
            started = cvar.<span class="hljs-title function_ invoke__">wait</span>(started).<span class="hljs-title function_ invoke__">unwrap</span>();
        }
        
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°ä¿¡å·ï¼Œå¼€å§‹å·¥ä½œï¼"</span>);
    });

    thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>));

    <span class="hljs-comment">// é€šçŸ¥çº¿ç¨‹</span>
    <span class="hljs-keyword">let</span> (lock, cvar) = &amp;*pair;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">started</span> = lock.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    *started = <span class="hljs-literal">true</span>;
    cvar.<span class="hljs-title function_ invoke__">notify_one</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å·²å‘é€ä¿¡å·"</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-18">å¼‚æ­¥ç¼–ç¨‹</h3>
<p>Rust çš„å¼‚æ­¥ç¼–ç¨‹åŸºäºÂ <code>async/await</code>Â è¯­æ³•å’ŒÂ <code>Future</code>Â traitã€‚</p>
<h4 data-id="heading-19">1. åŸºæœ¬ async/await</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio;

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">async_function</span>().<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœ: {}"</span>, result);
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">async_function</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¼€å§‹å¼‚æ­¥æ“ä½œ..."</span>);
    tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>)).<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¼‚æ­¥æ“ä½œå®Œæˆ"</span>);
    <span class="hljs-number">42</span>
}
</code></pre>
<h4 data-id="heading-20">2. å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio;

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task1</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> {
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>)).<span class="hljs-keyword">await</span>;
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä»»åŠ¡1å®Œæˆ"</span>);
        <span class="hljs-number">1</span>
    });

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task2</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> {
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">2</span>)).<span class="hljs-keyword">await</span>;
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä»»åŠ¡2å®Œæˆ"</span>);
        <span class="hljs-number">2</span>
    });

    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-keyword">let</span> (result1, result2) = tokio::join!(task1, task2);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»“æœ: {:?}, {:?}"</span>, result1, result2);
}
</code></pre>
<h4 data-id="heading-21">3. select! å®ï¼ˆç«äº‰æ‰§è¡Œï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio;
<span class="hljs-keyword">use</span> tokio::time::{sleep, Duration};

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task1</span> = <span class="hljs-keyword">async</span> {
        <span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>)).<span class="hljs-keyword">await</span>;
        <span class="hljs-string">"ä»»åŠ¡1"</span>
    };

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task2</span> = <span class="hljs-keyword">async</span> {
        <span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">2</span>)).<span class="hljs-keyword">await</span>;
        <span class="hljs-string">"ä»»åŠ¡2"</span>
    };

    <span class="hljs-comment">// å“ªä¸ªå…ˆå®Œæˆå°±è¿”å›å“ªä¸ª</span>
    tokio::<span class="hljs-built_in">select!</span> {
        result = task1 =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å…ˆå®Œæˆ: {}"</span>, result),
        result = task2 =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å…ˆå®Œæˆ: {}"</span>, result),
    }
}
</code></pre>
<h4 data-id="heading-22">4. å¼‚æ­¥é€šé“</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio::sync::mpsc;

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> (tx, <span class="hljs-keyword">mut</span> rx) = mpsc::<span class="hljs-title function_ invoke__">channel</span>(<span class="hljs-number">100</span>);

    <span class="hljs-comment">// å‘é€è€…ä»»åŠ¡</span>
    tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..=<span class="hljs-number">5</span> {
            tx.<span class="hljs-title function_ invoke__">send</span>(i).<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘é€: {}"</span>, i);
        }
    });

    <span class="hljs-comment">// æ¥æ”¶è€…</span>
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(i) = rx.<span class="hljs-title function_ invoke__">recv</span>().<span class="hljs-keyword">await</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ”¶åˆ°: {}"</span>, i);
    }
}
</code></pre>
<h4 data-id="heading-23">5. å¼‚æ­¥äº’æ–¥é”</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio::sync::Mutex;
<span class="hljs-keyword">use</span> std::sync::Arc;

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;data);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">lock</span> = data.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>;
            *lock += <span class="hljs-number">1</span>;
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä»»åŠ¡ {} å¢åŠ è®¡æ•°"</span>, i);
        });
        handles.<span class="hljs-title function_ invoke__">push</span>(handle);
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœ€ç»ˆè®¡æ•°: {}"</span>, *data.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-24">å¹¶å‘æ¨¡å¼ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-25">1. çº¿ç¨‹æ± æ¨¡å¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex, mpsc};
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Job</span> = <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> <span class="hljs-title function_ invoke__">FnOnce</span>() + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>&gt;;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ThreadPool</span> {
    workers: <span class="hljs-type">Vec</span>&lt;Worker&gt;,
    sender: mpsc::Sender&lt;Job&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ThreadPool</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(size: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> ThreadPool {
        <span class="hljs-keyword">let</span> (sender, receiver) = mpsc::<span class="hljs-title function_ invoke__">channel</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">receiver</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(receiver));
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">workers</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(size);

        <span class="hljs-keyword">for</span> <span class="hljs-variable">id</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..size {
            workers.<span class="hljs-title function_ invoke__">push</span>(Worker::<span class="hljs-title function_ invoke__">new</span>(id, Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;receiver)));
        }

        ThreadPool { workers, sender }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">execute</span>&lt;F&gt;(&amp;<span class="hljs-keyword">self</span>, f: F)
    <span class="hljs-keyword">where</span>
        F: <span class="hljs-title function_ invoke__">FnOnce</span>() + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>,
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">job</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(f);
        <span class="hljs-keyword">self</span>.sender.<span class="hljs-title function_ invoke__">send</span>(job).<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Worker</span> {
    id: <span class="hljs-type">usize</span>,
    thread: thread::JoinHandle&lt;()&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Worker</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(id: <span class="hljs-type">usize</span>, receiver: Arc&lt;Mutex&lt;mpsc::Receiver&lt;Job&gt;&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> Worker {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || <span class="hljs-keyword">loop</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">job</span> = receiver.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">recv</span>();

            <span class="hljs-keyword">match</span> job {
                <span class="hljs-title function_ invoke__">Ok</span>(job) =&gt; {
                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Worker {} æ‰§è¡Œä»»åŠ¡"</span>, id);
                    <span class="hljs-title function_ invoke__">job</span>();
                }
                <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; {
                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Worker {} æ–­å¼€è¿æ¥"</span>, id);
                    <span class="hljs-keyword">break</span>;
                }
            }
        });

        Worker { id, thread }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pool</span> = ThreadPool::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">4</span>);

    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">8</span> {
        pool.<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä»»åŠ¡ {} æ‰§è¡Œ"</span>, i);
            thread::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>));
        });
    }

    thread::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">10</span>));
}
</code></pre>
<h4 data-id="heading-26">2. Actor æ¨¡å¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio::sync::mpsc;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Actor</span> {
    receiver: mpsc::Receiver&lt;ActorMessage&gt;,
    state: <span class="hljs-type">i32</span>,
}

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">ActorMessage</span> {
    Increment,
    Decrement,
    <span class="hljs-title function_ invoke__">GetValue</span>(tokio::sync::oneshot::Sender&lt;<span class="hljs-type">i32</span>&gt;),
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Actor</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(receiver: mpsc::Receiver&lt;ActorMessage&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        Actor {
            receiver,
            state: <span class="hljs-number">0</span>,
        }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">run</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(msg) = <span class="hljs-keyword">self</span>.receiver.<span class="hljs-title function_ invoke__">recv</span>().<span class="hljs-keyword">await</span> {
            <span class="hljs-keyword">match</span> msg {
                ActorMessage::Increment =&gt; {
                    <span class="hljs-keyword">self</span>.state += <span class="hljs-number">1</span>;
                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¢åŠ ï¼Œå½“å‰å€¼: {}"</span>, <span class="hljs-keyword">self</span>.state);
                }
                ActorMessage::Decrement =&gt; {
                    <span class="hljs-keyword">self</span>.state -= <span class="hljs-number">1</span>;
                    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‡å°‘ï¼Œå½“å‰å€¼: {}"</span>, <span class="hljs-keyword">self</span>.state);
                }
                ActorMessage::<span class="hljs-title function_ invoke__">GetValue</span>(respond_to) =&gt; {
                    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = respond_to.<span class="hljs-title function_ invoke__">send</span>(<span class="hljs-keyword">self</span>.state);
                }
            }
        }
    }
}

<span class="hljs-meta">#[derive(Clone)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ActorHandle</span> {
    sender: mpsc::Sender&lt;ActorMessage&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ActorHandle</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">let</span> (sender, receiver) = mpsc::<span class="hljs-title function_ invoke__">channel</span>(<span class="hljs-number">8</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">actor</span> = Actor::<span class="hljs-title function_ invoke__">new</span>(receiver);
        tokio::<span class="hljs-title function_ invoke__">spawn</span>(actor.<span class="hljs-title function_ invoke__">run</span>());

        ActorHandle { sender }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">increment</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = <span class="hljs-keyword">self</span>.sender.<span class="hljs-title function_ invoke__">send</span>(ActorMessage::Increment).<span class="hljs-keyword">await</span>;
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">decrement</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = <span class="hljs-keyword">self</span>.sender.<span class="hljs-title function_ invoke__">send</span>(ActorMessage::Decrement).<span class="hljs-keyword">await</span>;
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_value</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
        <span class="hljs-keyword">let</span> (send, recv) = tokio::sync::oneshot::<span class="hljs-title function_ invoke__">channel</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = <span class="hljs-keyword">self</span>.sender.<span class="hljs-title function_ invoke__">send</span>(ActorMessage::<span class="hljs-title function_ invoke__">GetValue</span>(send)).<span class="hljs-keyword">await</span>;
        recv.<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>()
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">actor</span> = ActorHandle::<span class="hljs-title function_ invoke__">new</span>();

    actor.<span class="hljs-title function_ invoke__">increment</span>().<span class="hljs-keyword">await</span>;
    actor.<span class="hljs-title function_ invoke__">increment</span>().<span class="hljs-keyword">await</span>;
    actor.<span class="hljs-title function_ invoke__">decrement</span>().<span class="hljs-keyword">await</span>;

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">value</span> = actor.<span class="hljs-title function_ invoke__">get_value</span>().<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœ€ç»ˆå€¼: {}"</span>, value);
}
</code></pre>
<h4 data-id="heading-27">3. ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> std::sync::mpsc;
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">use</span> std::time::Duration;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> (tx, rx) = mpsc::<span class="hljs-title function_ invoke__">sync_channel</span>(<span class="hljs-number">5</span>);  <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°ä¸º 5</span>

    <span class="hljs-comment">// ç”Ÿäº§è€…</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">producer</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..=<span class="hljs-number">10</span> {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç”Ÿäº§: {}"</span>, i);
            tx.<span class="hljs-title function_ invoke__">send</span>(i).<span class="hljs-title function_ invoke__">unwrap</span>();
            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">100</span>));
        }
    });

    <span class="hljs-comment">// æ¶ˆè´¹è€…</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">consumer</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">item</span> <span class="hljs-keyword">in</span> rx {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ¶ˆè´¹: {}"</span>, item);
            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">300</span>));
        }
    });

    producer.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    consumer.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<h4 data-id="heading-28">4. å±éšœåŒæ­¥ï¼ˆBarrierï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Barrier};
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">5</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">barrier</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Barrier::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">5</span>));

    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;barrier);
        handles.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çº¿ç¨‹ {} å‡†å¤‡ä¸­..."</span>, i);
            thread::<span class="hljs-title function_ invoke__">sleep</span>(std::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(i * <span class="hljs-number">100</span>));
            
            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœ</span>
            c.<span class="hljs-title function_ invoke__">wait</span>();
            
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çº¿ç¨‹ {} å¼€å§‹æ‰§è¡Œ"</span>, i);
        }));
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-29">å®æˆ˜ç¤ºä¾‹</h3>
<h4 data-id="heading-30">ç¤ºä¾‹ 1ï¼šå¹¶å‘ä¸‹è½½å™¨</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> tokio;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">DownloadManager</span> {
    completed: Arc&lt;Mutex&lt;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt;&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">DownloadManager</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            completed: Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>())),
        }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">download</span>(&amp;<span class="hljs-keyword">self</span>, url: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¼€å§‹ä¸‹è½½: {}"</span>, url);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸‹è½½</span>
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="hljs-title function_ invoke__">from_secs</span>(<span class="hljs-number">1</span>)).<span class="hljs-keyword">await</span>;
        
        <span class="hljs-comment">// è®°å½•å®Œæˆ</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">completed</span> = <span class="hljs-keyword">self</span>.completed.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        completed.<span class="hljs-title function_ invoke__">push</span>(url.<span class="hljs-title function_ invoke__">clone</span>());
        
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä¸‹è½½å®Œæˆ: {}"</span>, url);
        <span class="hljs-title function_ invoke__">Ok</span>(())
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">download_all</span>(&amp;<span class="hljs-keyword">self</span>, urls: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tasks</span> = <span class="hljs-built_in">vec!</span>[];

        <span class="hljs-keyword">for</span> <span class="hljs-variable">url</span> <span class="hljs-keyword">in</span> urls {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">manager</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">clone</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
                manager.<span class="hljs-title function_ invoke__">download</span>(url).<span class="hljs-keyword">await</span>
            });
            tasks.<span class="hljs-title function_ invoke__">push</span>(task);
        }

        <span class="hljs-keyword">for</span> <span class="hljs-variable">task</span> <span class="hljs-keyword">in</span> tasks {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = task.<span class="hljs-keyword">await</span>;
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_completed</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">self</span>.completed.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">clone</span>()
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Clone</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">DownloadManager</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            completed: Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;<span class="hljs-keyword">self</span>.completed),
        }
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">manager</span> = DownloadManager::<span class="hljs-title function_ invoke__">new</span>();
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">urls</span> = <span class="hljs-built_in">vec!</span>[
        <span class="hljs-string">"https://example.com/file1.zip"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        <span class="hljs-string">"https://example.com/file2.zip"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        <span class="hljs-string">"https://example.com/file3.zip"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    ];

    manager.<span class="hljs-title function_ invoke__">download_all</span>(urls).<span class="hljs-keyword">await</span>;

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\nå·²å®Œæˆä¸‹è½½:"</span>);
    <span class="hljs-keyword">for</span> <span class="hljs-variable">url</span> <span class="hljs-keyword">in</span> manager.<span class="hljs-title function_ invoke__">get_completed</span>() {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"  - {}"</span>, url);
    }
}
</code></pre>
<h4 data-id="heading-31">ç¤ºä¾‹ 2ï¼šå¹¶å‘ Web çˆ¬è™«</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tokio::sync::{Semaphore, Mutex};
<span class="hljs-keyword">use</span> std::sync::Arc;
<span class="hljs-keyword">use</span> std::collections::HashSet;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">WebCrawler</span> {
    visited: Arc&lt;Mutex&lt;HashSet&lt;<span class="hljs-type">String</span>&gt;&gt;&gt;,
    semaphore: Arc&lt;Semaphore&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">WebCrawler</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(max_concurrent: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            visited: Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(HashSet::<span class="hljs-title function_ invoke__">new</span>())),
            semaphore: Arc::<span class="hljs-title function_ invoke__">new</span>(Semaphore::<span class="hljs-title function_ invoke__">new</span>(max_concurrent)),
        }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">crawl</span>(&amp;<span class="hljs-keyword">self</span>, url: <span class="hljs-type">String</span>) {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²è®¿é—®</span>
        {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">visited</span> = <span class="hljs-keyword">self</span>.visited.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>;
            <span class="hljs-keyword">if</span> visited.<span class="hljs-title function_ invoke__">contains</span>(&amp;url) {
                <span class="hljs-keyword">return</span>;
            }
            visited.<span class="hljs-title function_ invoke__">insert</span>(url.<span class="hljs-title function_ invoke__">clone</span>());
        }

        <span class="hljs-comment">// è·å–è®¸å¯ï¼ˆé™åˆ¶å¹¶å‘æ•°ï¼‰</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_permit</span> = <span class="hljs-keyword">self</span>.semaphore.<span class="hljs-title function_ invoke__">acquire</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();

        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çˆ¬å–: {}"</span>, url);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
        tokio::time::<span class="hljs-title function_ invoke__">sleep</span>(tokio::time::Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">500</span>)).<span class="hljs-keyword">await</span>;
        
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å®Œæˆ: {}"</span>, url);
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">crawl_all</span>(&amp;<span class="hljs-keyword">self</span>, urls: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tasks</span> = <span class="hljs-built_in">vec!</span>[];

        <span class="hljs-keyword">for</span> <span class="hljs-variable">url</span> <span class="hljs-keyword">in</span> urls {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">crawler</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">clone</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
                crawler.<span class="hljs-title function_ invoke__">crawl</span>(url).<span class="hljs-keyword">await</span>;
            });
            tasks.<span class="hljs-title function_ invoke__">push</span>(task);
        }

        <span class="hljs-keyword">for</span> <span class="hljs-variable">task</span> <span class="hljs-keyword">in</span> tasks {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = task.<span class="hljs-keyword">await</span>;
        }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">visited_count</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
        <span class="hljs-keyword">self</span>.visited.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">len</span>()
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Clone</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">WebCrawler</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            visited: Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;<span class="hljs-keyword">self</span>.visited),
            semaphore: Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;<span class="hljs-keyword">self</span>.semaphore),
        }
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">crawler</span> = WebCrawler::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">3</span>);  <span class="hljs-comment">// æœ€å¤š3ä¸ªå¹¶å‘</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">urls</span> = (<span class="hljs-number">1</span>..=<span class="hljs-number">10</span>)
        .<span class="hljs-title function_ invoke__">map</span>(|i| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"https://example.com/page{}"</span>, i))
        .<span class="hljs-title function_ invoke__">collect</span>();

    crawler.<span class="hljs-title function_ invoke__">crawl_all</span>(urls).<span class="hljs-keyword">await</span>;

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\næ€»å…±çˆ¬å–äº† {} ä¸ªé¡µé¢"</span>, crawler.<span class="hljs-title function_ invoke__">visited_count</span>().<span class="hljs-keyword">await</span>);
}
</code></pre>
<h4 data-id="heading-32">ç¤ºä¾‹ 3ï¼šæœ¬é¡¹ç›®å®é™…åº”ç”¨ï¼ˆæ•°æ®åº“è¿æ¥æ± ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¿™æ˜¯æœ¬é¡¹ç›®ä¸­ Tokio å¼‚æ­¥ç¼–ç¨‹çš„å®é™…åº”ç”¨</span>

<span class="hljs-keyword">use</span> sqlx::MySqlPool;
<span class="hljs-keyword">use</span> tokio;

<span class="hljs-comment">// æ•°æ®åº“æ“ä½œï¼ˆå¼‚æ­¥ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_user</span>(pool: &amp;MySqlPool, username: &amp;<span class="hljs-type">str</span>, email: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i64</span>, sqlx::Error&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = sqlx::<span class="hljs-title function_ invoke__">query</span>(
        <span class="hljs-string">"INSERT INTO users (username, email, password_hash) VALUES (?, ?, ?)"</span>
    )
    .<span class="hljs-title function_ invoke__">bind</span>(username)
    .<span class="hljs-title function_ invoke__">bind</span>(email)
    .<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">"hashed_password"</span>)
    .<span class="hljs-title function_ invoke__">execute</span>(pool)
    .<span class="hljs-keyword">await</span>?;

    <span class="hljs-title function_ invoke__">Ok</span>(result.<span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>)
}

<span class="hljs-comment">// å¹¶å‘åˆ›å»ºå¤šä¸ªç”¨æˆ·</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_users_concurrently</span>(pool: MySqlPool) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tasks</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..=<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pool</span> = pool.<span class="hljs-title function_ invoke__">clone</span>();  <span class="hljs-comment">// è¿æ¥æ± å¯ä»¥å…‹éš†</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">username</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"user{}"</span>, i);
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">email</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"user{}@example.com"</span>, i);
            
            <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">create_user</span>(&amp;pool, &amp;username, &amp;email).<span class="hljs-keyword">await</span> {
                <span class="hljs-title function_ invoke__">Ok</span>(id) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åˆ›å»ºç”¨æˆ· {} (ID: {})"</span>, username, id),
                <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; eprintln!(<span class="hljs-string">"é”™è¯¯: {}"</span>, e),
            }
        });
        tasks.<span class="hljs-title function_ invoke__">push</span>(task);
    }

    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">task</span> <span class="hljs-keyword">in</span> tasks {
        task.<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), sqlx::Error&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pool</span> = MySqlPool::<span class="hljs-title function_ invoke__">connect</span>(<span class="hljs-string">"mysql://root:password@localhost/test"</span>).<span class="hljs-keyword">await</span>?;
    
    <span class="hljs-title function_ invoke__">create_users_concurrently</span>(pool).<span class="hljs-keyword">await</span>;
    
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h4 data-id="heading-33">ç¤ºä¾‹ 4ï¼šç¼“å­˜æœåŠ¡ï¼ˆæœ¬é¡¹ç›® Redis åº”ç”¨ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::Arc;
<span class="hljs-keyword">use</span> tokio::sync::RwLock;
<span class="hljs-keyword">use</span> std::collections::HashMap;

<span class="hljs-comment">// å†…å­˜ç¼“å­˜ï¼ˆè¯»å¤šå†™å°‘åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cache</span> {
    data: Arc&lt;RwLock&lt;HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt;&gt;&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            data: Arc::<span class="hljs-title function_ invoke__">new</span>(RwLock::<span class="hljs-title function_ invoke__">new</span>(HashMap::<span class="hljs-title function_ invoke__">new</span>())),
        }
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-keyword">self</span>.data.<span class="hljs-title function_ invoke__">read</span>().<span class="hljs-keyword">await</span>;
        data.<span class="hljs-title function_ invoke__">get</span>(key).<span class="hljs-title function_ invoke__">cloned</span>()
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">set</span>(&amp;<span class="hljs-keyword">self</span>, key: <span class="hljs-type">String</span>, value: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = <span class="hljs-keyword">self</span>.data.<span class="hljs-title function_ invoke__">write</span>().<span class="hljs-keyword">await</span>;
        data.<span class="hljs-title function_ invoke__">insert</span>(key, value);
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">delete</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = <span class="hljs-keyword">self</span>.data.<span class="hljs-title function_ invoke__">write</span>().<span class="hljs-keyword">await</span>;
        data.<span class="hljs-title function_ invoke__">remove</span>(key);
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Clone</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            data: Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;<span class="hljs-keyword">self</span>.data),
        }
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cache</span> = Cache::<span class="hljs-title function_ invoke__">new</span>();

    <span class="hljs-comment">// å¹¶å‘è¯»å†™</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tasks</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-comment">// å†™å…¥ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cache</span> = cache.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">key</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"key{}"</span>, i);
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">value</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"value{}"</span>, i);
            cache.<span class="hljs-title function_ invoke__">set</span>(key.<span class="hljs-title function_ invoke__">clone</span>(), value).<span class="hljs-keyword">await</span>;
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å†™å…¥: {}"</span>, key);
        });
        tasks.<span class="hljs-title function_ invoke__">push</span>(task);
    }

    <span class="hljs-comment">// è¯»å–ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cache</span> = cache.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">task</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">key</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"key{}"</span>, i % <span class="hljs-number">5</span>);
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(value) = cache.<span class="hljs-title function_ invoke__">get</span>(&amp;key).<span class="hljs-keyword">await</span> {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¯»å–: {} = {}"</span>, key, value);
            }
        });
        tasks.<span class="hljs-title function_ invoke__">push</span>(task);
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">task</span> <span class="hljs-keyword">in</span> tasks {
        task.<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-34">åŒæ­¥åŸè¯­å¯¹æ¯”</h3>





















































<table><thead><tr><th>ç±»å‹</th><th>ç”¨é€”</th><th>å¼€é”€</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>Mutex&lt;T&gt;</code></td><td>äº’æ–¥è®¿é—®</td><td>ä¸­ç­‰</td><td>å…±äº«å¯å˜çŠ¶æ€</td></tr><tr><td><code>RwLock&lt;T&gt;</code></td><td>è¯»å†™é”</td><td>è¾ƒé«˜</td><td>è¯»å¤šå†™å°‘</td></tr><tr><td><code>Atomic*</code></td><td>åŸå­æ“ä½œ</td><td>æä½</td><td>ç®€å•è®¡æ•°å™¨</td></tr><tr><td><code>Arc&lt;T&gt;</code></td><td>å¼•ç”¨è®¡æ•°</td><td>ä½</td><td>å…±äº«åªè¯»æ•°æ®</td></tr><tr><td><code>mpsc::channel</code></td><td>æ¶ˆæ¯ä¼ é€’</td><td>ä¸­ç­‰</td><td>çº¿ç¨‹é—´é€šä¿¡</td></tr><tr><td><code>Barrier</code></td><td>å±éšœåŒæ­¥</td><td>ä½</td><td>ç­‰å¾…æ‰€æœ‰çº¿ç¨‹</td></tr><tr><td><code>Condvar</code></td><td>æ¡ä»¶å˜é‡</td><td>ä½</td><td>ç­‰å¾…ç‰¹å®šæ¡ä»¶</td></tr></tbody></table>
<h3 data-id="heading-35">å¼‚æ­¥ vs çº¿ç¨‹</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>çº¿ç¨‹ (Thread)</th><th>å¼‚æ­¥ (Async)</th></tr></thead><tbody><tr><td>å¼€é”€</td><td>è¾ƒé«˜ï¼ˆæ¯ä¸ªçº¿ç¨‹ ~2MBï¼‰</td><td>æä½ï¼ˆæ¯ä¸ªä»»åŠ¡ ~KBï¼‰</td></tr><tr><td>ä¸Šä¸‹æ–‡åˆ‡æ¢</td><td>OS è°ƒåº¦</td><td>ç”¨æˆ·æ€è°ƒåº¦</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>CPU å¯†é›†å‹</td><td>I/O å¯†é›†å‹</td></tr><tr><td>é˜»å¡æ“ä½œ</td><td>å¯ä»¥ä½¿ç”¨</td><td>ä¸èƒ½é˜»å¡</td></tr><tr><td>å¹¶å‘æ•°é‡</td><td>æœ‰é™ï¼ˆæ•°ç™¾ï¼‰</td><td>æå¤§ï¼ˆæ•°ä¸‡ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-36">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-37">1. é€‰æ‹©åˆé€‚çš„å¹¶å‘æ¨¡å‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// CPU å¯†é›†å‹ï¼šä½¿ç”¨çº¿ç¨‹</span>
<span class="hljs-keyword">use</span> std::thread;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| {
    <span class="hljs-comment">// è®¡ç®—å¯†é›†å‹ä»»åŠ¡</span>
    (<span class="hljs-number">1</span>..<span class="hljs-number">1_000_000</span>).sum::&lt;<span class="hljs-type">i64</span>&gt;()
});

<span class="hljs-comment">// I/O å¯†é›†å‹ï¼šä½¿ç”¨å¼‚æ­¥</span>
<span class="hljs-keyword">use</span> tokio;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰</span>
    <span class="hljs-title function_ invoke__">fetch_data</span>().<span class="hljs-keyword">await</span>
});
</code></pre>
<h4 data-id="heading-38">2. é¿å…æ­»é”</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¯èƒ½æ­»é”</span>
let data1 = mutex1<span class="hljs-selector-class">.lock</span>()<span class="hljs-selector-class">.unwrap</span>();
let data2 = mutex2<span class="hljs-selector-class">.lock</span>()<span class="hljs-selector-class">.unwrap</span>();  <span class="hljs-comment">// å¦‚æœå…¶ä»–çº¿ç¨‹å…ˆé” mutex2</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç»Ÿä¸€é”é¡ºåº</span>
fn <span class="hljs-built_in">safe_operation</span>(mutex1: &amp;Mutex&lt;i32&gt;, mutex2: &amp;Mutex&lt;i32&gt;) {
    let data1 = mutex1<span class="hljs-selector-class">.lock</span>()<span class="hljs-selector-class">.unwrap</span>();
    let data2 = mutex2<span class="hljs-selector-class">.lock</span>()<span class="hljs-selector-class">.unwrap</span>();
    <span class="hljs-comment">// ä½¿ç”¨æ•°æ®</span>
}
</code></pre>
<h4 data-id="heading-39">3. æœ€å°åŒ–é”æŒæœ‰æ—¶é—´</h4>
<pre><code class="hljs language-ini" lang="ini">// âŒ é”æŒæœ‰æ—¶é—´è¿‡é•¿
{
    let mut <span class="hljs-attr">data</span> = mutex.lock().unwrap()<span class="hljs-comment">;</span>
    expensive_computation(&amp;mut data)<span class="hljs-comment">;</span>
}

// âœ… ç¼©çŸ­é”æŒæœ‰æ—¶é—´
let <span class="hljs-attr">result</span> = expensive_computation_without_lock()<span class="hljs-comment">;</span>
{
    let mut <span class="hljs-attr">data</span> = mutex.lock().unwrap()<span class="hljs-comment">;</span>
    *<span class="hljs-attr">data</span> = result<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-40">4. ä½¿ç”¨ RAII è‡ªåŠ¨é‡Šæ”¾èµ„æº</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// é”ä¼šåœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾</span>
{
    <span class="hljs-keyword">let</span> data = mutex.<span class="hljs-keyword">lock</span>().unwrap();
    <span class="hljs-comment">// ä½¿ç”¨ data</span>
}  <span class="hljs-comment">// é”è‡ªåŠ¨é‡Šæ”¾</span>
</code></pre>
<h3 data-id="heading-41">æ€»ç»“</h3>
<h4 data-id="heading-42">æ ¸å¿ƒæ¦‚å¿µ</h4>
<ol>
<li><strong>æ‰€æœ‰æƒç³»ç»Ÿé˜²æ­¢æ•°æ®ç«äº‰</strong>Â - ç¼–è¯‘æœŸä¿è¯</li>
<li><strong>Send å’Œ Sync trait</strong>Â - æ§åˆ¶è·¨çº¿ç¨‹ä¼ é€’</li>
<li><strong>æ¶ˆæ¯ä¼ é€’ä¼˜äºå…±äº«å†…å­˜</strong>Â - Channel ä¼˜å…ˆ</li>
<li><strong>é›¶æˆæœ¬æŠ½è±¡</strong>Â - æ€§èƒ½æ— æŸå¤±</li>
</ol>
<h4 data-id="heading-43">å¸¸ç”¨æ¨¡å¼</h4>
<ul>
<li><strong>Arc + Mutex</strong>Â - å…±äº«å¯å˜çŠ¶æ€</li>
<li><strong>mpsc::channel</strong>Â - çº¿ç¨‹é—´é€šä¿¡</li>
<li><strong>tokio::spawn</strong>Â - å¼‚æ­¥å¹¶å‘</li>
<li><strong>Semaphore</strong>Â - é™åˆ¶å¹¶å‘æ•°</li>
</ul>
<h4 data-id="heading-44">æœ¬é¡¹ç›®åº”ç”¨</h4>
<ul>
<li>âœ…Â <strong>Tokio å¼‚æ­¥è¿è¡Œæ—¶</strong>Â -Â <code>#[tokio::main]</code></li>
<li>âœ…Â <strong>æ•°æ®åº“è¿æ¥æ± </strong>Â - å¤šçº¿ç¨‹å®‰å…¨çš„Â <code>MySqlPool</code></li>
<li>âœ…Â <strong>Redis è¿æ¥ç®¡ç†</strong>Â -Â <code>Arc&lt;RedisCache&gt;</code></li>
<li>âœ…Â <strong>å¹¶å‘è¯·æ±‚å¤„ç†</strong>Â - Axum å¼‚æ­¥ handlers</li>
<li>âœ…Â <strong>gRPC æµå¼é€šä¿¡</strong>Â -Â <code>tokio_stream</code></li>
</ul>
<hr/>
<h3 data-id="heading-45">å»¶ä¼¸é˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fbook%2Fch16-00-concurrency.html" target="_blank" title="https://doc.rust-lang.org/book/ch16-00-concurrency.html" ref="nofollow noopener noreferrer">The Rust Book - Concurrency</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftokio.rs%2Ftokio%2Ftutorial" target="_blank" title="https://tokio.rs/tokio/tutorial" ref="nofollow noopener noreferrer">Tokio Tutorial</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frust-lang.github.io%2Fasync-book%2F" target="_blank" title="https://rust-lang.github.io/async-book/" ref="nofollow noopener noreferrer">Async Book</a></li>
<li>æœ¬é¡¹ç›®ä»£ç ï¼š<code>src/main.rs</code>,Â <code>src/grpc/</code>,Â <code>src/services/</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker å…¥é—¨å®æˆ˜ï¼šç”¨10ä¸ªæ¡ˆä¾‹å¸¦ä½ ç©è½¬å®¹å™¨åŒ–]]></title>    <link>https://juejin.cn/post/7571840220703064110</link>    <guid>https://juejin.cn/post/7571840220703064110</guid>    <pubDate>2025-11-13T04:07:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571840220703064110" data-draft-id="7570940025580994600" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker å…¥é—¨å®æˆ˜ï¼šç”¨10ä¸ªæ¡ˆä¾‹å¸¦ä½ ç©è½¬å®¹å™¨åŒ–"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-13T04:07:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker å…¥é—¨å®æˆ˜ï¼šç”¨10ä¸ªæ¡ˆä¾‹å¸¦ä½ ç©è½¬å®¹å™¨åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T04:07:55.000Z" title="Thu Nov 13 2025 04:07:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Docker ç¯å¢ƒå®‰è£…ä¸é…ç½®</h2>
<h3 data-id="heading-1">1.1 åœ¨ Ubuntu ç³»ç»Ÿä¸Šå®‰è£… Docker</h3>
<p>åˆ›å»ºå®‰è£…è„šæœ¬æ–‡ä»¶ï¼š<code>install_docker.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ›´æ–°ç³»ç»ŸåŒ…åˆ—è¡¨</span>
sudo apt-get update

<span class="hljs-comment"># å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…</span>
sudo apt-get install -y \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

<span class="hljs-comment"># æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</span>
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

<span class="hljs-comment"># æ·»åŠ  Docker ç¨³å®šç‰ˆä»“åº“</span>
<span class="hljs-built_in">echo</span> \
  <span class="hljs-string">"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  <span class="hljs-subst">$(lsb_release -cs)</span> stable"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null

<span class="hljs-comment"># æ›´æ–°åŒ…åˆ—è¡¨ï¼ˆåŒ…å« Docker ä»“åº“ï¼‰</span>
sudo apt-get update

<span class="hljs-comment"># å®‰è£… Docker Engine</span>
sudo apt-get install -y docker-ce docker-ce-cli containerd.io

<span class="hljs-comment"># å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„ï¼ˆé¿å…æ¯æ¬¡ä½¿ç”¨ sudoï¼‰</span>
sudo usermod -aG docker <span class="hljs-variable">$USER</span>

<span class="hljs-comment"># å¯åŠ¨ Docker æœåŠ¡</span>
sudo systemctl start docker
sudo systemctl <span class="hljs-built_in">enable</span> docker

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
docker --version
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Docker å®‰è£…å®Œæˆï¼è¯·é‡æ–°ç™»å½•ä»¥ä½¿ç»„æƒé™ç”Ÿæ•ˆã€‚"</span>
</code></pre>
<h3 data-id="heading-2">1.2 Docker åŸºç¡€é…ç½®</h3>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š<code>docker_daemon.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"registry-mirrors"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"https://docker.mirrors.ustc.edu.cn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://hub-mirror.c.163.com"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"log-driver"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"json-file"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"log-opts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"max-size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100m"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"max-file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data-root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/var/lib/docker"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"storage-driver"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"overlay2"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åº”ç”¨é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º docker é…ç½®ç›®å½•</span>
sudo <span class="hljs-built_in">mkdir</span> -p /etc/docker

<span class="hljs-comment"># å¤åˆ¶é…ç½®æ–‡ä»¶</span>
sudo <span class="hljs-built_in">cp</span> docker_daemon.json /etc/docker/daemon.json

<span class="hljs-comment"># é‡å¯ docker æœåŠ¡</span>
sudo systemctl daemon-reload
sudo systemctl restart docker

<span class="hljs-comment"># éªŒè¯é…ç½®</span>
docker info
</code></pre>
<h2 data-id="heading-3">2. Docker åŸºç¡€æ¦‚å¿µä¸å‘½ä»¤</h2>
<h3 data-id="heading-4">2.1 Docker æ ¸å¿ƒç»„ä»¶ç†è§£</h3>
<p>åˆ›å»ºå­¦ä¹ æ–‡æ¡£ï¼š<code>docker_concepts.md</code></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Docker æ ¸å¿ƒæ¦‚å¿µ</span>

<span class="hljs-section">## é•œåƒ (Image)</span>
<span class="hljs-bullet">-</span> åªè¯»æ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå®¹å™¨
<span class="hljs-bullet">-</span> åˆ†å±‚å­˜å‚¨ç»“æ„
<span class="hljs-bullet">-</span> åŒ…å«è¿è¡Œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰å†…å®¹

<span class="hljs-section">## å®¹å™¨ (Container)</span>
<span class="hljs-bullet">-</span> é•œåƒçš„è¿è¡Œå®ä¾‹
<span class="hljs-bullet">-</span> å…·æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œè¿›ç¨‹ç©ºé—´
<span class="hljs-bullet">-</span> å¯å†™å±‚åœ¨åªè¯»é•œåƒå±‚ä¹‹ä¸Š

<span class="hljs-section">## ä»“åº“ (Registry)</span>
<span class="hljs-bullet">-</span> å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„åœ°æ–¹
<span class="hljs-bullet">-</span> Docker Hub æ˜¯å®˜æ–¹å…¬å…±ä»“åº“
<span class="hljs-bullet">-</span> å¯ä»¥æ­å»ºç§æœ‰ä»“åº“
</code></pre>
<h3 data-id="heading-5">2.2 åŸºç¡€å‘½ä»¤ç»ƒä¹ </h3>
<p>åˆ›å»ºç»ƒä¹ è„šæœ¬ï¼š<code>basic_commands.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æŸ¥çœ‹ Docker ç‰ˆæœ¬ä¿¡æ¯</span>
docker version

<span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</span>
docker info

<span class="hljs-comment"># æœç´¢é•œåƒ</span>
docker search nginx

<span class="hljs-comment"># æ‹‰å–é•œåƒ</span>
docker pull nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
docker images

<span class="hljs-comment"># è¿è¡Œå®¹å™¨ï¼ˆå‰å°è¿è¡Œï¼‰</span>
docker run -it --name my-nginx nginx:latest

<span class="hljs-comment"># è¿è¡Œå®¹å™¨ï¼ˆåå°è¿è¡Œï¼‰</span>
docker run -d --name my-nginx-background -p 8080:80 nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
docker ps

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰</span>
docker ps -a

<span class="hljs-comment"># åœæ­¢å®¹å™¨</span>
docker stop my-nginx-background

<span class="hljs-comment"># å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</span>
docker start my-nginx-background

<span class="hljs-comment"># é‡å¯å®¹å™¨</span>
docker restart my-nginx-background

<span class="hljs-comment"># è¿›å…¥å®¹å™¨å†…éƒ¨</span>
docker <span class="hljs-built_in">exec</span> -it my-nginx-background bash

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs my-nginx-background

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span>
docker inspect my-nginx-background

<span class="hljs-comment"># åˆ é™¤å®¹å™¨</span>
docker <span class="hljs-built_in">rm</span> my-nginx-background

<span class="hljs-comment"># åˆ é™¤é•œåƒ</span>
docker rmi nginx:latest
</code></pre>
<h2 data-id="heading-6">3. ç¬¬ä¸€ä¸ª Docker åº”ç”¨ï¼šHello World</h2>
<h3 data-id="heading-7">3.1 åˆ›å»ºç®€å•çš„ Web åº”ç”¨</h3>
<p>åˆ›å»ºåº”ç”¨æ–‡ä»¶ï¼š<code>app.py</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> socket

app = Flask(__name__)

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    container_id = socket.gethostname()
    <span class="hljs-keyword">return</span> <span class="hljs-string">f'''
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Docker Hello World&lt;/title&gt;
        &lt;style&gt;
            body {{
                font-family: Arial, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                color: white;
            }}
            .container {{
                text-align: center;
                background: rgba(255, 255, 255, 0.1);
                padding: 40px;
                border-radius: 15px;
                backdrop-filter: blur(10px);
            }}
            h1 {{
                font-size: 2.5em;
                margin-bottom: 20px;
            }}
            p {{
                font-size: 1.2em;
                margin: 10px 0;
            }}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class="container"&gt;
            &lt;h1&gt;ğŸš€ Docker Hello World!&lt;/h1&gt;
            &lt;p&gt;&lt;strong&gt;å®¹å™¨ID:&lt;/strong&gt; <span class="hljs-subst">{container_id}</span>&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;ç¯å¢ƒ:&lt;/strong&gt; Python Flask in Docker&lt;/p&gt;
            &lt;p&gt;ğŸ‰ æ­å–œï¼ä½ çš„ç¬¬ä¸€ä¸ªDockeråº”ç”¨è¿è¡ŒæˆåŠŸï¼&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    '''</span>

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/health'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">health</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">'status'</span>: <span class="hljs-string">'healthy'</span>, <span class="hljs-string">'service'</span>: <span class="hljs-string">'hello-world'</span>}

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    app.run(host=<span class="hljs-string">'0.0.0.0'</span>, port=<span class="hljs-number">5000</span>, debug=<span class="hljs-literal">True</span>)
</code></pre>
<h3 data-id="heading-8">3.2 åˆ›å»º Dockerfile</h3>
<p>åˆ›å»º Dockerfile æ–‡ä»¶ï¼š<code>Dockerfile</code></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨å®˜æ–¹ Python è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒ
FROM python:3.9-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶å½“å‰ç›®å½•å†…å®¹åˆ°å®¹å™¨çš„ /app ç›®å½•
COPY . /app

# å®‰è£…ä¾èµ–
RUN pip install --no-cache-dir flask

# æš´éœ²ç«¯å£
EXPOSE 5000

# å®šä¹‰ç¯å¢ƒå˜é‡
ENV NAME World

# å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œåº”ç”¨
CMD ["python", "app.py"]
</code></pre>
<h3 data-id="heading-9">3.3 æ„å»ºå’Œè¿è¡Œåº”ç”¨</h3>
<p>åˆ›å»ºæ„å»ºè„šæœ¬ï¼š<code>build_and_run.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ„å»º Docker é•œåƒ</span>
docker build -t hello-world-app .

<span class="hljs-comment"># è¿è¡Œå®¹å™¨</span>
docker run -d -p 5000:5000 --name hello-container hello-world-app

<span class="hljs-comment"># æ£€æŸ¥å®¹å™¨çŠ¶æ€</span>
docker ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker logs hello-container

<span class="hljs-built_in">echo</span> <span class="hljs-string">"åº”ç”¨å·²å¯åŠ¨ï¼è®¿é—® http://localhost:5000 æŸ¥çœ‹ç»“æœ"</span>
</code></pre>
<h2 data-id="heading-10">4. Docker å®¹å™¨ç½‘ç»œé…ç½®</h2>
<h3 data-id="heading-11">4.1 ç½‘ç»œåŸºç¡€æ“ä½œ</h3>
<p>åˆ›å»ºç½‘ç»œæ“ä½œè„šæœ¬ï¼š<code>network_demo.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</span>
docker network <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</span>
docker network create --driver bridge my-custom-network

<span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œè¯¦æƒ…</span>
docker network inspect my-custom-network

<span class="hljs-comment"># åœ¨è‡ªå®šä¹‰ç½‘ç»œä¸­è¿è¡Œå®¹å™¨</span>
docker run -d --name web1 --network my-custom-network nginx:alpine
docker run -d --name web2 --network my-custom-network nginx:alpine

<span class="hljs-comment"># æµ‹è¯•å®¹å™¨é—´é€šä¿¡</span>
docker <span class="hljs-built_in">exec</span> web1 ping web2

<span class="hljs-comment"># åˆ›å»ºå¦ä¸€ä¸ªç½‘ç»œ</span>
docker network create --driver bridge another-network

<span class="hljs-comment"># å°†å®¹å™¨è¿æ¥åˆ°å¤šä¸ªç½‘ç»œ</span>
docker network connect another-network web1

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨çš„ç½‘ç»œé…ç½®</span>
docker inspect web1 | grep -A 10 <span class="hljs-string">"Networks"</span>

<span class="hljs-comment"># æ–­å¼€ç½‘ç»œè¿æ¥</span>
docker network disconnect another-network web1

<span class="hljs-comment"># æ¸…ç†</span>
docker stop web1 web2
docker <span class="hljs-built_in">rm</span> web1 web2
docker network <span class="hljs-built_in">rm</span> my-custom-network another-network
</code></pre>
<h3 data-id="heading-12">4.2 å¤šå®¹å™¨åº”ç”¨ç½‘ç»œé…ç½®</h3>
<p>åˆ›å»ºå¤šå®¹å™¨åº”ç”¨æ–‡ä»¶ï¼š<code>docker-compose-network.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx-web</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">api</span>

  <span class="hljs-attr">api:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">python:3.9-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">python-api</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">python</span> <span class="hljs-string">-m</span> <span class="hljs-string">http.server</span> <span class="hljs-number">8000</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">frontend</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">working_dir:</span> <span class="hljs-string">/app</span>

  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:13-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">postgres-db</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">myapp</span>
      <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">user</span>
      <span class="hljs-attr">POSTGRES_PASSWORD:</span> <span class="hljs-string">password</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db_data:/var/lib/postgresql/data</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db_data:</span>
</code></pre>
<p>è¿è¡Œå¤šå®¹å™¨åº”ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker-compose -f docker-compose-network.yml up -d
docker network <span class="hljs-built_in">ls</span>
docker-compose -f docker-compose-network.yml down
</code></pre>
<h2 data-id="heading-13">5. Docker æ•°æ®æŒä¹…åŒ–</h2>
<h3 data-id="heading-14">5.1 æ•°æ®å·æ“ä½œ</h3>
<p>åˆ›å»ºæ•°æ®å·ç®¡ç†è„šæœ¬ï¼š<code>volume_management.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># åˆ›å»ºæ•°æ®å·</span>
docker volume create my-data

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·åˆ—è¡¨</span>
docker volume <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</span>
docker volume inspect my-data

<span class="hljs-comment"># ä½¿ç”¨æ•°æ®å·è¿è¡Œå®¹å™¨</span>
docker run -d \
  --name mysql-container \
  -e MYSQL_ROOT_PASSWORD=password \
  -e MYSQL_DATABASE=testdb \
  -v my-data:/var/lib/mysql \
  mysql:8.0

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·ä½¿ç”¨æƒ…å†µ</span>
docker <span class="hljs-built_in">exec</span> mysql-container <span class="hljs-built_in">df</span> -h

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½å·</span>
docker volume create backup-data

<span class="hljs-comment"># ä½¿ç”¨ä¸´æ—¶å®¹å™¨å¤‡ä»½æ•°æ®</span>
docker run --<span class="hljs-built_in">rm</span> \
  -v my-data:/source \
  -v backup-data:/backup \
  alpine tar czf /backup/mysql-backup.tar.gz -C /source .

<span class="hljs-comment"># æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶</span>
docker run --<span class="hljs-built_in">rm</span> -v backup-data:/backup alpine <span class="hljs-built_in">ls</span> -lh /backup

<span class="hljs-comment"># æ¸…ç†</span>
docker stop mysql-container
docker <span class="hljs-built_in">rm</span> mysql-container
docker volume <span class="hljs-built_in">rm</span> my-data backup-data
</code></pre>
<h3 data-id="heading-15">5.2 ç»‘å®šæŒ‚è½½å®æˆ˜</h3>
<p>åˆ›å»ºç»‘å®šæŒ‚è½½ç¤ºä¾‹ï¼š<code>bind_mount_demo.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># åˆ›å»ºæœ¬åœ°ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p /home/<span class="hljs-variable">$USER</span>/docker-data/website
<span class="hljs-built_in">mkdir</span> -p /home/<span class="hljs-variable">$USER</span>/docker-data/config

<span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹ç½‘ç«™æ–‡ä»¶</span>
<span class="hljs-built_in">cat</span> &gt; /home/<span class="hljs-variable">$USER</span>/docker-data/website/index.html &lt;&lt; <span class="hljs-string">'EOF'</span>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;<span class="hljs-built_in">head</span>&gt;
    &lt;title&gt;Bind Mount Demo&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(45deg, <span class="hljs-comment">#ff6b6b, #4ecdc4);</span>
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }
        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 40px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=<span class="hljs-string">"container"</span>&gt;
        &lt;h1&gt;ğŸ¯ Bind Mount æ¼”ç¤º&lt;/h1&gt;
        &lt;p&gt;è¿™ä¸ªé¡µé¢æ¥è‡ªå®¿ä¸»æœºçš„ç›®å½•ï¼&lt;/p&gt;
        &lt;p&gt;å®æ—¶ä¿®æ”¹ host çš„æ–‡ä»¶ä¼šç«‹å³åæ˜ åœ¨å®¹å™¨ä¸­&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
EOF

<span class="hljs-comment"># ä½¿ç”¨ç»‘å®šæŒ‚è½½è¿è¡Œ Nginx</span>
docker run -d \
  --name nginx-bind-mount \
  -p 8081:80 \
  -v /home/<span class="hljs-variable">$USER</span>/docker-data/website:/usr/share/nginx/html \
  nginx:alpine

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¿é—® http://localhost:8081 æŸ¥çœ‹ç»‘å®šæŒ‚è½½çš„ç½‘ç«™"</span>

<span class="hljs-comment"># å®æ—¶ä¿®æ”¹æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"&lt;p&gt;ğŸš€ å®æ—¶æ›´æ–°æµ‹è¯•æˆåŠŸï¼&lt;/p&gt;"</span> &gt;&gt; /home/<span class="hljs-variable">$USER</span>/docker-data/website/index.html

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨ä¸­çš„æ–‡ä»¶å˜åŒ–</span>
docker <span class="hljs-built_in">exec</span> nginx-bind-mount <span class="hljs-built_in">cat</span> /usr/share/nginx/html/index.html

<span class="hljs-comment"># æ¸…ç†</span>
docker stop nginx-bind-mount
docker <span class="hljs-built_in">rm</span> nginx-bind-mount
</code></pre>
<h2 data-id="heading-16">6. Dockerfile æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">6.1 ä¼˜åŒ– Dockerfile</h3>
<p>åˆ›å»ºä¼˜åŒ–åçš„ Dockerfileï¼š<code>optimized.Dockerfile</code></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># å¤šé˜¶æ®µæ„å»ºç¤ºä¾‹
# é˜¶æ®µ1: æ„å»ºé˜¶æ®µ
FROM python:3.9-slim as builder

WORKDIR /app

# å¤åˆ¶ requirements æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…æ„å»ºä¾èµ–å’Œ Python åŒ…
RUN apt-get update &amp;&amp; apt-get install -y \
    gcc \
    g++ \
    &amp;&amp; pip install --user -r requirements.txt \
    &amp;&amp; apt-get remove -y gcc g++ \
    &amp;&amp; apt-get autoremove -y \
    &amp;&amp; rm -rf /var/lib/apt/lists/*

# é˜¶æ®µ2: è¿è¡Œé˜¶æ®µ
FROM python:3.9-slim

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_NO_CACHE_DIR=1

WORKDIR /app

# åˆ›å»ºérootç”¨æˆ·
RUN groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶å·²å®‰è£…çš„åŒ…
COPY --from=builder /root/.local /home/appuser/.local
COPY --chown=appuser:appuser . .

# è®¾ç½®è·¯å¾„å’Œérootç”¨æˆ·
ENV PATH=/home/appuser/.local/bin:$PATH
USER appuser

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:5000/health || exit 1

# æš´éœ²ç«¯å£
EXPOSE 5000

# å¯åŠ¨å‘½ä»¤
CMD ["python", "app.py"]
</code></pre>
<p>åˆ›å»º requirements æ–‡ä»¶ï¼š<code>requirements.txt</code></p>
<pre><code class="hljs language-txt" lang="txt">Flask==2.3.3
requests==2.31.0
gunicorn==21.2.0
</code></pre>
<h3 data-id="heading-18">6.2 å¤šé˜¶æ®µæ„å»ºå®æˆ˜</h3>
<p>åˆ›å»ºå¤šé˜¶æ®µæ„å»ºç¤ºä¾‹ï¼š<code>multi-stage.Dockerfile</code></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># å¤šé˜¶æ®µæ„å»ºï¼šGo åº”ç”¨ç¤ºä¾‹

# é˜¶æ®µ1: æ„å»ºé˜¶æ®µ
FROM golang:1.19-alpine as builder

WORKDIR /app

# ä¸‹è½½ä¾èµ–
COPY go.mod go.sum ./
RUN go mod download

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .

# é˜¶æ®µ2: è¿è¡Œé˜¶æ®µ
FROM alpine:latest

RUN apk --no-cache add ca-certificates

WORKDIR /root/

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶
COPY --from=builder /app/main .

# åˆ›å»ºérootç”¨æˆ·
RUN adduser -D -g '' appuser
USER appuser

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¯åŠ¨åº”ç”¨
CMD ["./main"]
</code></pre>
<p>åˆ›å»º Go åº”ç”¨ç¤ºä¾‹ï¼š<code>main.go</code></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"os"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    http.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
        hostname, _ := os.Hostname()
        fmt.Fprintf(w, <span class="hljs-string">`
        &lt;!DOCTYPE html&gt;
        &lt;html&gt;
        &lt;head&gt;
            &lt;title&gt;Go Docker App&lt;/title&gt;
            &lt;style&gt;
                body {
                    font-family: Arial, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    margin: 0;
                    padding: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    color: white;
                }
                .container {
                    text-align: center;
                    background: rgba(255, 255, 255, 0.1);
                    padding: 40px;
                    border-radius: 15px;
                    backdrop-filter: blur(10px);
                }
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;div class="container"&gt;
                &lt;h1&gt;ğŸ¹ Go + Docker&lt;/h1&gt;
                &lt;p&gt;&lt;strong&gt;å®¹å™¨ID:&lt;/strong&gt; %s&lt;/p&gt;
                &lt;p&gt;å¤šé˜¶æ®µæ„å»ºæˆåŠŸï¼&lt;/p&gt;
            &lt;/div&gt;
        &lt;/body&gt;
        &lt;/html&gt;
        `</span>, hostname)
    })

    log.Println(<span class="hljs-string">"Server starting on :8080..."</span>)
    log.Fatal(http.ListenAndServe(<span class="hljs-string">":8080"</span>, <span class="hljs-literal">nil</span>))
}
</code></pre>
<p>åˆ›å»º Go æ¨¡å—æ–‡ä»¶ï¼š<code>go.mod</code></p>
<pre><code class="hljs language-go" lang="go">module docker-<span class="hljs-keyword">go</span>-app

<span class="hljs-keyword">go</span> <span class="hljs-number">1.19</span>
</code></pre>
<h2 data-id="heading-19">7. Docker Compose å®æˆ˜</h2>
<h3 data-id="heading-20">7.1 å®Œæ•´çš„ Web åº”ç”¨æ ˆ</h3>
<p>åˆ›å»º Docker Compose æ–‡ä»¶ï¼š<code>docker-compose-fullstack.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># å‰ç«¯æœåŠ¡</span>
  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">frontend.Dockerfile</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">vue-frontend</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3000:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">API_URL=http://backend:8000</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># åç«¯ API æœåŠ¡</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">backend.Dockerfile</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">flask-backend</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8000:8000"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=postgresql://user:password@database:5432/myapp</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_URL=redis://redis:6379</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend-logs:/app/logs</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># æ•°æ®åº“æœåŠ¡</span>
  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:13-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">postgres-db</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">myapp</span>
      <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">user</span>
      <span class="hljs-attr">POSTGRES_PASSWORD:</span> <span class="hljs-string">password</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">postgres-data:/var/lib/postgresql/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./init.sql:/docker-entrypoint-initdb.d/init.sql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># Redis ç¼“å­˜æœåŠ¡</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.2-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis-cache</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># Nginx åå‘ä»£ç†</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx-proxy</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">frontend</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nginx.conf:/etc/nginx/nginx.conf</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./ssl:/etc/nginx/ssl</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># ç›‘æ§æœåŠ¡</span>
  <span class="hljs-attr">monitor:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">portainer/portainer-ce:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">portainer</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9000:9000"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/run/docker.sock:/var/run/docker.sock</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">portainer-data:/data</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">app-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
    <span class="hljs-attr">ipam:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">subnet:</span> <span class="hljs-number">172.20</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/16</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">postgres-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">redis-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">backend-logs:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">portainer-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
</code></pre>
<h3 data-id="heading-21">7.2 åˆ›å»ºç›¸å…³é…ç½®æ–‡ä»¶</h3>
<p>åˆ›å»º Nginx é…ç½®ï¼š<code>nginx.conf</code></p>
<pre><code class="hljs language-nginx" lang="nginx">events {
    worker_connections 1024;
}

http {
    upstream backend {
        server backend:8000;
    }

    upstream frontend {
        server frontend:80;
    }

    server {
        listen 80;
        server_name localhost;

        # å‰ç«¯é™æ€æ–‡ä»¶
        location / {
            proxy_pass http://frontend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # åç«¯ API ä»£ç†
        location /api/ {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # CORS å¤´
            add_header Access-Control-Allow-Origin *;
            add_header Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE";
            add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization";
        }

        # å¥åº·æ£€æŸ¥ç«¯ç‚¹
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
    }
}
</code></pre>
<p>åˆ›å»ºæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š<code>init.sql</code></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç¤ºä¾‹è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> users (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> products (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    description TEXT,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

<span class="hljs-comment">-- æ’å…¥ç¤ºä¾‹æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (username, email) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'admin'</span>, <span class="hljs-string">'admin@example.com'</span>),
(<span class="hljs-string">'user1'</span>, <span class="hljs-string">'user1@example.com'</span>)
<span class="hljs-keyword">ON</span> CONFLICT (username) DO NOTHING;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> products (name, price, description) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'Docker Book'</span>, <span class="hljs-number">39.99</span>, <span class="hljs-string">'Learn Docker from scratch'</span>),
(<span class="hljs-string">'Kubernetes Guide'</span>, <span class="hljs-number">49.99</span>, <span class="hljs-string">'Master container orchestration'</span>)
<span class="hljs-keyword">ON</span> CONFLICT (id) DO NOTHING;
</code></pre>
<h2 data-id="heading-22">8. Docker å®‰å…¨å®è·µ</h2>
<h3 data-id="heading-23">8.1 å®‰å…¨æ‰«æä¸æœ€ä½³å®è·µ</h3>
<p>åˆ›å»ºå®‰å…¨æ‰«æè„šæœ¬ï¼š<code>security_scan.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å®‰è£… Docker å®‰å…¨æ‰«æå·¥å…·</span>
sudo apt-get update
sudo apt-get install -y trivy

<span class="hljs-comment"># æ‰«ææœ¬åœ°é•œåƒ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰«æ nginx é•œåƒçš„å®‰å…¨æ¼æ´..."</span>
trivy image nginx:latest

<span class="hljs-comment"># ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œå®¹å™¨</span>
docker run -d \
  --name security-demo \
  --user 1000:1000 \
  -p 8082:80 \
  nginx:alpine

<span class="hljs-comment"># æ£€æŸ¥å®¹å™¨è¿è¡Œç”¨æˆ·</span>
docker <span class="hljs-built_in">exec</span> security-demo <span class="hljs-built_in">whoami</span>

<span class="hljs-comment"># åªè¯»æ–‡ä»¶ç³»ç»Ÿç¤ºä¾‹</span>
docker run -d \
  --name read-only-demo \
  --read-only \
  --tmpfs /tmp \
  -p 8083:80 \
  nginx:alpine

<span class="hljs-comment"># å®‰å…¨é€‰é¡¹ç¤ºä¾‹</span>
docker run -d \
  --name secure-container \
  --security-opt=no-new-privileges:<span class="hljs-literal">true</span> \
  --cap-drop=ALL \
  --cap-add=NET_BIND_SERVICE \
  -p 8084:80 \
  nginx:alpine

<span class="hljs-comment"># æ£€æŸ¥å®¹å™¨å®‰å…¨æ€§</span>
docker inspect secure-container | grep -A 5 SecurityOpt

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰å…¨æ¼”ç¤ºå®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-24">8.2 åˆ›å»ºå®‰å…¨åŠ å›ºçš„ Dockerfile</h3>
<p>åˆ›å»ºå®‰å…¨åŠ å›ºçš„ Dockerfileï¼š<code>secure.Dockerfile</code></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„åŸºç¡€é•œåƒ
FROM nginx:1.23-alpine

# è®¾ç½®ç”¨æˆ·å’Œç»„
RUN addgroup -g 1000 -S www-group &amp;&amp; \
    adduser -S -D -H -u 1000 -h /var/cache/nginx -s /sbin/nologin -G www-group -g www-user www-user

# ç§»é™¤ä¸å¿…è¦çš„æ–‡ä»¶
RUN rm -rf /etc/nginx/conf.d/* &amp;&amp; \
    rm -rf /usr/share/nginx/html/*

# å¤åˆ¶è‡ªå®šä¹‰é…ç½®
COPY nginx-secure.conf /etc/nginx/nginx.conf
COPY html/ /usr/share/nginx/html/

# è®¾ç½®æ­£ç¡®çš„æƒé™
RUN chown -R www-user:www-group /var/cache/nginx &amp;&amp; \
    chown -R www-user:www-group /var/log/nginx &amp;&amp; \
    chown -R www-user:www-group /etc/nginx/nginx.conf &amp;&amp; \
    chmod -R 755 /usr/share/nginx/html &amp;&amp; \
    chmod 644 /etc/nginx/nginx.conf

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER www-user

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:80/ || exit 1

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨å‘½ä»¤
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<p>åˆ›å»ºå®‰å…¨ Nginx é…ç½®ï¼š<code>nginx-secure.conf</code></p>
<pre><code class="hljs language-nginx" lang="nginx">worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # å®‰å…¨å¤´
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
    add_header Referrer-Policy "strict-origin-when-cross-origin";

    # éšè—æœåŠ¡å™¨ç‰ˆæœ¬
    server_tokens off;

    # é™åˆ¶è¯·æ±‚å¤§å°
    client_max_body_size 1m;

    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

    access_log /var/log/nginx/access.log main;

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    # Gzip å‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    server {
        listen 80;
        server_name _;

        # æ ¹ç›®å½•é…ç½®
        location / {
            root /usr/share/nginx/html;
            index index.html index.htm;
            
            # å®‰å…¨é™åˆ¶
            limit_except GET {
                deny all;
            }
        }

        # ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶
        location ~ /\. {
            deny all;
            access_log off;
            log_not_found off;
        }

        # å¥åº·æ£€æŸ¥
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
    }
}
</code></pre>
<h2 data-id="heading-25">9. Docker ç›‘æ§ä¸æ—¥å¿—ç®¡ç†</h2>
<h3 data-id="heading-26">9.1 å®¹å™¨ç›‘æ§å®æˆ˜</h3>
<p>åˆ›å»ºç›‘æ§è„šæœ¬ï¼š<code>monitoring_setup.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ä½¿ç”¨ Docker Stats ç›‘æ§</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®æ—¶å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ:"</span>
docker stats --format <span class="hljs-string">"table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.NetIO}}\t{{.BlockIO}}"</span>

<span class="hljs-comment"># è®¾ç½®å®¹å™¨èµ„æºé™åˆ¶</span>
docker run -d \
  --name limited-container \
  --memory=512m \
  --cpus=1.0 \
  --memory-reservation=256m \
  --blkio-weight=500 \
  nginx:alpine

<span class="hljs-comment"># æ£€æŸ¥èµ„æºé™åˆ¶</span>
docker inspect limited-container | grep -A 10 <span class="hljs-string">"HostConfig"</span>

<span class="hljs-comment"># å®‰è£… cAdvisor è¿›è¡Œè¯¦ç»†ç›‘æ§</span>
docker run -d \
  --name=cadvisor \
  --volume=/:/rootfs:ro \
  --volume=/var/run:/var/run:ro \
  --volume=/sys:/sys:ro \
  --volume=/var/lib/docker/:/var/lib/docker:ro \
  --volume=/dev/disk/:/dev/disk:ro \
  --publish=8080:8080 \
  --detach=<span class="hljs-literal">true</span> \
  --privileged \
  --device=/dev/kmsg \
  gcr.io/cadvisor/cadvisor:v0.47.0

<span class="hljs-built_in">echo</span> <span class="hljs-string">"cAdvisor ç›‘æ§é¢æ¿: http://localhost:8080"</span>

<span class="hljs-comment"># æ—¥å¿—ç®¡ç†ç¤ºä¾‹</span>
docker run -d \
  --name logging-demo \
  --log-driver=json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  -p 8085:80 \
  nginx:alpine

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker logs logging-demo

<span class="hljs-comment"># æ—¥å¿—å¯¼å‡º</span>
docker logs logging-demo &gt; nginx.log

<span class="hljs-comment"># æ¸…ç†</span>
docker stop cadvisor limited-container logging-demo
docker <span class="hljs-built_in">rm</span> cadvisor limited-container logging-demo
</code></pre>
<h3 data-id="heading-27">9.2 ä½¿ç”¨ Prometheus å’Œ Grafana</h3>
<p>åˆ›å»ºç›‘æ§æ ˆé…ç½®ï¼š<code>docker-compose-monitoring.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># Node Exporter - ç³»ç»ŸæŒ‡æ ‡æ”¶é›†</span>
  <span class="hljs-attr">node-exporter:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/node-exporter:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">node-exporter</span>
    <span class="hljs-attr">command:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--path.rootfs=/host'</span>
    <span class="hljs-attr">network_mode:</span> <span class="hljs-string">host</span>
    <span class="hljs-attr">pid:</span> <span class="hljs-string">host</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'/:/host:ro,rslave'</span>
    <span class="hljs-attr">user:</span> <span class="hljs-string">root</span>

  <span class="hljs-comment"># cAdvisor - å®¹å™¨æŒ‡æ ‡æ”¶é›†</span>
  <span class="hljs-attr">cadvisor:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">gcr.io/cadvisor/cadvisor:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">cadvisor</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/:/rootfs:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/run:/var/run:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/sys:/sys:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/lib/docker/:/var/lib/docker:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/dev/disk/:/dev/disk:ro</span>
    <span class="hljs-attr">devices:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/dev/kmsg</span>
    <span class="hljs-attr">network_mode:</span> <span class="hljs-string">host</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">privileged:</span> <span class="hljs-literal">true</span>

  <span class="hljs-comment"># Prometheus - æŒ‡æ ‡å­˜å‚¨å’ŒæŸ¥è¯¢</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">prometheus</span>
    <span class="hljs-attr">command:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--config.file=/etc/prometheus/prometheus.yml'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.path=/prometheus'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--web.console.libraries=/etc/prometheus/console_libraries'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--web.console.templates=/etc/prometheus/consoles'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.retention.time=200h'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--web.enable-lifecycle'</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./prometheus.yml:/etc/prometheus/prometheus.yml:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">prometheus-data:/prometheus</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9090:9090"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>

  <span class="hljs-comment"># Grafana - æ•°æ®å¯è§†åŒ–</span>
  <span class="hljs-attr">grafana:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">grafana</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">grafana-data:/var/lib/grafana</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./grafana/provisioning:/etc/grafana/provisioning</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_SECURITY_ADMIN_PASSWORD=admin123</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_USERS_ALLOW_SIGN_UP=false</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3000:3000"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">prometheus</span>

  <span class="hljs-comment"># Alertmanager - å‘Šè­¦ç®¡ç†</span>
  <span class="hljs-attr">alertmanager:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/alertmanager:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">alertmanager</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./alertmanager.yml:/etc/alertmanager/alertmanager.yml:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">alertmanager-data:/alertmanager</span>
    <span class="hljs-attr">command:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--config.file=/etc/alertmanager/alertmanager.yml'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.path=/alertmanager'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--web.external-url=http://localhost:9093'</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9093:9093"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">monitoring:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">prometheus-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">grafana-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
  <span class="hljs-attr">alertmanager-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
</code></pre>
<p>åˆ›å»º Prometheus é…ç½®ï¼š<code>prometheus.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">global:</span>
  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span>

<span class="hljs-attr">rule_files:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"alert_rules.yml"</span>

<span class="hljs-attr">alerting:</span>
  <span class="hljs-attr">alertmanagers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">alertmanager:9093</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'prometheus'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'localhost:9090'</span>]

  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'node-exporter'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'node-exporter:9100'</span>]

  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'cadvisor'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'cadvisor:8080'</span>]

  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'docker-containers'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'localhost:9323'</span>]
</code></pre>
<h2 data-id="heading-28">10. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å®æˆ˜</h2>
<h3 data-id="heading-29">10.1 å®Œæ•´çš„ç”Ÿäº§çº§é…ç½®</h3>
<p>åˆ›å»ºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬ï¼š<code>production_deploy.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®</span>
<span class="hljs-built_in">export</span> COMPOSE_PROJECT_NAME=<span class="hljs-string">"myapp"</span>
<span class="hljs-built_in">export</span> DEPLOY_ENV=<span class="hljs-string">"production"</span>
<span class="hljs-built_in">export</span> DOCKER_REGISTRY=<span class="hljs-string">"registry.mycompany.com"</span>
<span class="hljs-built_in">export</span> APP_VERSION=<span class="hljs-string">"1.0.0"</span>

<span class="hljs-comment"># åˆ›å»ºå¿…è¦çš„ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p {logs,data,config,backups}

<span class="hljs-comment"># æ‹‰å–æœ€æ–°é•œåƒ</span>
docker-compose -f docker-compose-prod.yml pull

<span class="hljs-comment"># åœæ­¢ç°æœ‰æœåŠ¡</span>
docker-compose -f docker-compose-prod.yml down

<span class="hljs-comment"># å¤‡ä»½æ•°æ®åº“</span>
docker run --<span class="hljs-built_in">rm</span> \
  -v <span class="hljs-variable">${COMPOSE_PROJECT_NAME}</span>_db_data:/source \
  -v $(<span class="hljs-built_in">pwd</span>)/backups:/backup \
  alpine tar czf /backup/db-backup-$(<span class="hljs-built_in">date</span> +%Y%m%d-%H%M%S).tar.gz -C /source .

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
docker-compose -f docker-compose-prod.yml up -d

<span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿›è¡Œå¥åº·æ£€æŸ¥..."</span>
<span class="hljs-built_in">sleep</span> 30

<span class="hljs-comment"># æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€</span>
docker-compose -f docker-compose-prod.yml ps

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€</span>
<span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> $(docker-compose -f docker-compose-prod.yml ps --services); <span class="hljs-keyword">do</span>
    container_id=$(docker-compose -f docker-compose-prod.yml ps -q <span class="hljs-variable">$service</span>)
    health_status=$(docker inspect --format=<span class="hljs-string">'{{.State.Health.Status}}'</span> <span class="hljs-variable">$container_id</span> 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"no health check"</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœåŠ¡ <span class="hljs-variable">$service</span>: <span class="hljs-variable">$health_status</span>"</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># æ—¥å¿—æ£€æŸ¥</span>
docker-compose -f docker-compose-prod.yml logs --<span class="hljs-built_in">tail</span>=50

<span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²å®Œæˆï¼"</span>
</code></pre>
<p>åˆ›å»ºç”Ÿäº§ç¯å¢ƒ Docker Composeï¼š<code>docker-compose-prod.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">x-common-variables:</span> <span class="hljs-string">&amp;common-vars</span>
  <span class="hljs-attr">DEPLOY_ENV:</span> <span class="hljs-string">production</span>
  <span class="hljs-attr">LOG_LEVEL:</span> <span class="hljs-string">info</span>
  <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># åº”ç”¨æœåŠ¡</span>
  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">${DOCKER_REGISTRY}/myapp:${APP_VERSION}</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">${COMPOSE_PROJECT_NAME}-app</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-string">&lt;&lt;:</span> <span class="hljs-string">*common-vars</span>
      <span class="hljs-attr">DATABASE_URL:</span> <span class="hljs-string">postgresql://${DB_USER}:${DB_PASSWORD}@database:5432/${DB_NAME}</span>
      <span class="hljs-attr">REDIS_URL:</span> <span class="hljs-string">redis://redis:6379</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">database:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:8080/health"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>
    <span class="hljs-attr">logging:</span>
      <span class="hljs-attr">driver:</span> <span class="hljs-string">"json-file"</span>
      <span class="hljs-attr">options:</span>
        <span class="hljs-attr">max-size:</span> <span class="hljs-string">"10m"</span>
        <span class="hljs-attr">max-file:</span> <span class="hljs-string">"3"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">frontend</span>

  <span class="hljs-comment"># æ•°æ®åº“</span>
  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:13-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">${COMPOSE_PROJECT_NAME}-database</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-string">&lt;&lt;:</span> <span class="hljs-string">*common-vars</span>
      <span class="hljs-attr">POSTGRES_DB:</span> <span class="hljs-string">${DB_NAME}</span>
      <span class="hljs-attr">POSTGRES_USER:</span> <span class="hljs-string">${DB_USER}</span>
      <span class="hljs-attr">POSTGRES_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD}</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db_data:/var/lib/postgresql/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/postgres.conf:/etc/postgresql/postgresql.conf</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">postgres</span> <span class="hljs-string">-c</span> <span class="hljs-string">config_file=/etc/postgresql/postgresql.conf</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"pg_isready -U ${DB_USER} -d ${DB_NAME}"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>

  <span class="hljs-comment"># Redis</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.2-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">${COMPOSE_PROJECT_NAME}-redis</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">/usr/local/etc/redis/redis.conf</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis_data:/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/redis.conf:/usr/local/etc/redis/redis.conf</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"redis-cli"</span>, <span class="hljs-string">"ping"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>

  <span class="hljs-comment"># Nginx</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.23-alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">${COMPOSE_PROJECT_NAME}-nginx</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/nginx.conf:/etc/nginx/nginx.conf:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./ssl:/etc/nginx/ssl:ro</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./logs/nginx:/var/log/nginx</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost/health"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">frontend</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">com.docker.network.driver.mtu:</span> <span class="hljs-number">1500</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
    <span class="hljs-attr">internal:</span> <span class="hljs-literal">false</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db_data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">${PWD}/data/db</span>
  <span class="hljs-attr">redis_data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">bind</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">${PWD}/data/redis</span>
</code></pre>
<p>åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š<code>.env.production</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åº”ç”¨é…ç½®</span>
COMPOSE_PROJECT_NAME=myapp-production
APP_VERSION=1.0.0
DOCKER_REGISTRY=registry.mycompany.com

<span class="hljs-comment"># æ•°æ®åº“é…ç½®</span>
DB_NAME=myapp
DB_USER=app_user
DB_PASSWORD=secure_password_123

<span class="hljs-comment"># ç½‘ç»œé…ç½®</span>
DOMAIN=myapp.com
SSL_EMAIL=admin@myapp.com

<span class="hljs-comment"># èµ„æºé™åˆ¶</span>
APP_MEMORY_LIMIT=1g
DB_MEMORY_LIMIT=2g
REDIS_MEMORY_LIMIT=512m
</code></pre>
<h2 data-id="heading-30">Docker å­¦ä¹ æµç¨‹å›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[Docker å­¦ä¹ è·¯å¾„] --&gt; B[ç¯å¢ƒå®‰è£…]
    A --&gt; C[åŸºç¡€æ¦‚å¿µ]
    A --&gt; D[å®æˆ˜æ¡ˆä¾‹]
    
    B --&gt; B1[ç³»ç»Ÿå®‰è£…]
    B --&gt; B2[ç¯å¢ƒé…ç½®]
    B --&gt; B3[æƒé™è®¾ç½®]
    
    C --&gt; C1[é•œåƒç®¡ç†]
    C --&gt; C2[å®¹å™¨æ“ä½œ]
    C --&gt; C3[ç½‘ç»œé…ç½®]
    C --&gt; C4[æ•°æ®æŒä¹…åŒ–]
    
    D --&gt; D1[Hello World]
    D --&gt; D2[Web åº”ç”¨]
    D --&gt; D3[å¤šå®¹å™¨åº”ç”¨]
    D --&gt; D4[ç”Ÿäº§éƒ¨ç½²]
    
    B1 --&gt; E[å®Œæˆå®‰è£…]
    B2 --&gt; E
    B3 --&gt; E
    
    C1 --&gt; F[æŒæ¡åŸºç¡€]
    C2 --&gt; F
    C3 --&gt; F
    C4 --&gt; F
    
    D1 --&gt; G[å®æˆ˜èƒ½åŠ›]
    D2 --&gt; G
    D3 --&gt; G
    D4 --&gt; G
    
    E --&gt; H[Docker ç²¾é€š]
    F --&gt; H
    G --&gt; H
    
    style A fill:#4CAF50,color:white
    style B fill:#2196F3,color:white
    style C fill:#2196F3,color:white
    style D fill:#2196F3,color:white
    style H fill:#FF9800,color:white
    style E fill:#9C27B0,color:white
    style F fill:#9C27B0,color:white
    style G fill:#9C27B0,color:white
</code></pre>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>é€šè¿‡è¿™10ä¸ªè¯¦ç»†çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ‚¨å·²ç»å…¨é¢æŒæ¡äº† Docker çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®é™…åº”ç”¨æŠ€èƒ½ã€‚ä»åŸºç¡€çš„ç¯å¢ƒå®‰è£…åˆ°ç”Ÿäº§çº§éƒ¨ç½²ï¼Œæ¯ä¸ªæ¡ˆä¾‹éƒ½æä¾›äº†å®Œæ•´çš„ä»£ç å’Œé…ç½®ï¼Œç¡®ä¿æ‚¨å¯ä»¥ç«‹å³åœ¨å®è·µä¸­åº”ç”¨è¿™äº›çŸ¥è¯†ã€‚</p>
<p>å…³é”®å­¦ä¹ è¦ç‚¹ï¼š</p>
<ol>
<li>Docker åŸºç¡€å‘½ä»¤å’Œæ¦‚å¿µç†è§£</li>
<li>å®¹å™¨ç½‘ç»œå’Œæ•°æ®ç®¡ç†</li>
<li>Dockerfile æœ€ä½³å®è·µå’Œå¤šé˜¶æ®µæ„å»º</li>
<li>Docker Compose ç¼–æ’å¤æ‚åº”ç”¨</li>
<li>å®¹å™¨å®‰å…¨åŠ å›ºå’Œç›‘æ§</li>
<li>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ç­–ç•¥</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PostGreSQL docker æ‹‰å–ä»¥åŠéƒ¨ç½²æµç¨‹]]></title>    <link>https://juejin.cn/post/7571781196298207241</link>    <guid>https://juejin.cn/post/7571781196298207241</guid>    <pubDate>2025-11-13T05:17:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571781196298207241" data-draft-id="7571786149590679603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PostGreSQL  docker æ‹‰å–ä»¥åŠéƒ¨ç½²æµç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-13T05:17:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·96999628157"/> <meta itemprop="url" content="https://juejin.cn/user/3845409933637289"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PostGreSQL  docker æ‹‰å–ä»¥åŠéƒ¨ç½²æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3845409933637289/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·96999628157
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T05:17:51.000Z" title="Thu Nov 13 2025 05:17:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h3 data-id="heading-0">1. æ‹‰å–é•œåƒï¼ˆå›½å†…åŠ é€Ÿï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 2025-10 å·²æ¨é€çš„ 18 æœ€æ–°ç‰ˆ </span>
docker pull docker.1ms.run/postgres:18
</code></pre>
<hr/>
<h3 data-id="heading-1">2. åˆ›å»ºå®¿ä¸»æœºç›®å½•ï¼ˆçˆ¶ç›®å½•æŒ‚è½½æ–¹æ¡ˆï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/pg18
<span class="hljs-comment"># èµ‹äºˆå®¹å™¨å†… 999 ç”¨æˆ·å†™æƒé™ï¼ˆé•œåƒé»˜è®¤ uidï¼‰</span>
sudo <span class="hljs-built_in">chown</span> -R 999:999 <span class="hljs-variable">$HOME</span>/pg18
</code></pre>
<hr/>
<h3 data-id="heading-2">3. å¯åŠ¨å®¹å™¨ï¼ˆå…³é”®ï¼šæŒ‚è½½çˆ¶ç›®å½• <code>/var/lib/postgresql</code>ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">docker run -d --name postgres \
  -e POSTGRES_PASSWORD=Root@123 \
  -v <span class="hljs-variable">$HOME</span>/pg18:/var/lib/postgresql \
  -p 5432:5432 \
  --restart unless-stopped \
  docker.1ms.run/postgres:18
</code></pre>

















<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>-v $HOME/pg18:/var/lib/postgresql</code></td><td><strong>åªæŒ‚çˆ¶ç›®å½•</strong>ï¼Œé•œåƒä¼šåœ¨å…¶ä¸‹è‡ªåŠ¨åˆ›å»º <code>18/main</code> ç‰ˆæœ¬å­ç›®å½•ï¼Œå…¼å®¹ 18+ çš„ <code>pg_ctlcluster</code> ç»“æ„</td></tr><tr><td>ä¸å†æŒ‚ <code>/var/lib/postgresql/data</code></td><td>é¿å…ä¸æ–°ç‰ˆç›®å½•å†²çªï¼Œé˜²æ­¢å‡ºç°ã€Œunused mountã€é”™è¯¯</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">4. éªŒè¯éƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash">docker ps | grep postgres
<span class="hljs-comment"># çŠ¶æ€ Up å³å¯</span>

docker <span class="hljs-built_in">exec</span> -it postgres psql -U postgres
<span class="hljs-comment"># å‡ºç° postgres=# è¡¨ç¤ºæ­£å¸¸è¿æ¥</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">5. åç»­å‡çº§å°ç‰ˆæœ¬ï¼ˆ18.x â†’ 18.yï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">docker pull docker.1ms.run/postgres:18
docker restart postgres
</code></pre>
<p>æ•°æ®ç›®å½•ç»“æ„ä¸å˜ï¼Œè‡ªåŠ¨å…¼å®¹ ã€‚</p>
<hr/>
<h3 data-id="heading-5">6. ä¸€é”®åœ/åˆ ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">docker stop postgres &amp;&amp; docker <span class="hljs-built_in">rm</span> postgres
</code></pre>
<p>å®¿ä¸»æœº <code>$HOME/pg18</code> ä»ä¼šä¿ç•™ï¼Œé‡æ–°è¿è¡Œç¬¬ 3 æ­¥å³å¯å¤ç”¨æ•°æ®ã€‚</p>
<p>æŒ‰ç…§ä»¥ä¸Š 5 æ­¥ï¼Œå³å¯åœ¨æœ¬åœ°å®Œæˆ PostgreSQL 18 çš„æ‹‰å–ä¸éƒ¨ç½²ï¼Œå¹¶è§„é¿å› ç›®å½•ç»“æ„å˜æ›´å¯¼è‡´çš„é‡å¯å¾ªç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[goé¡¹ç›®é€‚é…DTMï¼Œgozeroå·²ç»é€‚é…dtmäº†ï¼Œgoframeé¡¹ç›®è¦æ€ä¹ˆé€‚é…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571722835658440738</link>    <guid>https://juejin.cn/post/7571722835658440738</guid>    <pubDate>2025-11-13T03:41:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571722835658440738" data-draft-id="7571753301897756712" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="goé¡¹ç›®é€‚é…DTMï¼Œgozeroå·²ç»é€‚é…dtmäº†ï¼Œgoframeé¡¹ç›®è¦æ€ä¹ˆé€‚é…ï¼Ÿ"/> <meta itemprop="keywords" content="å¾®æœåŠ¡,Go"/> <meta itemprop="datePublished" content="2025-11-13T03:41:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="maoæ¯›"/> <meta itemprop="url" content="https://juejin.cn/user/1146138854949790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            goé¡¹ç›®é€‚é…DTMï¼Œgozeroå·²ç»é€‚é…dtmäº†ï¼Œgoframeé¡¹ç›®è¦æ€ä¹ˆé€‚é…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146138854949790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    maoæ¯›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T03:41:34.000Z" title="Thu Nov 13 2025 03:41:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰€è°“çš„gozeroé€‚é…dtm</h2>
<p>ä»¥ä¸‹æ˜¯gozeroçš„ç¤ºä¾‹ï¼Œæœ¬è´¨ä¸å°±æ˜¯ç»´æŠ¤äº†dtmé…ç½®</p>
<h3 data-id="heading-1">go-zeroæ”¯æŒ</h3>
<p>dtmä¸go-zeroè¿›è¡Œäº†æ·±åº¦åˆä½œï¼Œæ‰“é€ äº†go-zeroåŸç”Ÿæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†æç®€çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>dtmä»v1.6.0å¼€å§‹åŸç”Ÿæ”¯æŒgo-zeroå¾®æœåŠ¡æ¡†æ¶ï¼Œgo-zeroçš„ç‰ˆæœ¬éœ€è¦v1.2.4ä»¥ä¸Š</p>
<h3 data-id="heading-2">è¿è¡Œä¸€ä¸ªå·²æœ‰çš„ç¤ºä¾‹</h3>
<p>æˆ‘ä»¬ä»¥etcdä½œä¸ºæ³¨å†ŒæœåŠ¡ä¸­å¿ƒä¸ºä¾‹ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿è¡Œä¸€ä¸ªgo-zeroçš„ç¤ºä¾‹ï¼š</p>
<ul>
<li>å¯åŠ¨etcd</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‰æï¼šå·²å®‰è£…etcd</span>
etcd
</code></pre>
<ul>
<li>é…ç½®dtm</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">MicroService:</span>
  <span class="hljs-attr">Driver:</span> <span class="hljs-string">'dtm-driver-gozero'</span> <span class="hljs-comment"># é…ç½®dtmä½¿ç”¨go-zeroçš„å¾®æœåŠ¡åè®®</span>
  <span class="hljs-attr">Target:</span> <span class="hljs-string">'etcd://localhost:2379/dtmservice'</span> <span class="hljs-comment"># æŠŠdtmæ³¨å†Œåˆ°etcdçš„è¿™ä¸ªåœ°å€</span>
  <span class="hljs-attr">EndPoint:</span> <span class="hljs-string">'localhost:36790'</span> <span class="hljs-comment"># dtmçš„æœ¬åœ°åœ°å€</span>
</code></pre>
<ul>
<li>å¯åŠ¨dtm</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‰æï¼šé…ç½®å¥½conf.yml</span>
go run app/main.go -c conf.yml
</code></pre>
<ul>
<li>è¿è¡Œä¸€ä¸ªgo-zeroçš„æœåŠ¡</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/dtm-labs/dtmdriver-clients &amp;&amp; <span class="hljs-built_in">cd</span> dtmdriver-clients
<span class="hljs-built_in">cd</span> gozero/trans &amp;&amp; go run trans.go
</code></pre>
<ul>
<li>å‘èµ·ä¸€ä¸ªgo-zeroä½¿ç”¨dtmçš„äº‹åŠ¡</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨dtmdriver-clientsçš„ç›®å½•ä¸‹</span>
<span class="hljs-built_in">cd</span> gozero/app &amp;&amp; go run main.go
</code></pre>
<p>å½“æ‚¨åœ¨transçš„æ—¥å¿—ä¸­çœ‹åˆ°</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">2021</span>/<span class="hljs-number">12</span>/<span class="hljs-number">03</span> <span class="hljs-number">15</span>:<span class="hljs-number">44</span>:<span class="hljs-number">05</span> transfer <span class="hljs-keyword">out</span> <span class="hljs-number">30</span> cents <span class="hljs-keyword">from</span> <span class="hljs-number">1</span>
<span class="hljs-number">2021</span>/<span class="hljs-number">12</span>/<span class="hljs-number">03</span> <span class="hljs-number">15</span>:<span class="hljs-number">44</span>:<span class="hljs-number">05</span> transfer <span class="hljs-keyword">in</span> <span class="hljs-number">30</span> cents to <span class="hljs-number">2</span>
<span class="hljs-number">2021</span>/<span class="hljs-number">12</span>/<span class="hljs-number">03</span> <span class="hljs-number">15</span>:<span class="hljs-number">44</span>:<span class="hljs-number">05</span> transfer <span class="hljs-keyword">out</span> <span class="hljs-number">30</span> cents <span class="hljs-keyword">from</span> <span class="hljs-number">1</span>
<span class="hljs-number">2021</span>/<span class="hljs-number">12</span>/<span class="hljs-number">03</span> <span class="hljs-number">15</span>:<span class="hljs-number">44</span>:<span class="hljs-number">05</span> transfer <span class="hljs-keyword">out</span> <span class="hljs-number">30</span> cents <span class="hljs-keyword">from</span> <span class="hljs-number">1</span>
</code></pre>
<p>é‚£å°±æ˜¯äº‹åŠ¡æ­£å¸¸å®Œæˆäº†</p>
<h3 data-id="heading-3">å¼€å‘æ¥å…¥</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸‹é¢è¿™è¡Œå¯¼å…¥gozeroçš„dtmé©±åŠ¨</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-string">"github.com/dtm-labs/driver-gozero"</span>

<span class="hljs-comment">// dtmå·²ç»é€šè¿‡å‰é¢çš„é…ç½®ï¼Œæ³¨å†Œåˆ°ä¸‹é¢è¿™ä¸ªåœ°å€ï¼Œå› æ­¤åœ¨dtmgrpcä¸­ä½¿ç”¨è¯¥åœ°å€</span>
<span class="hljs-keyword">var</span> dtmServer = <span class="hljs-string">"etcd://localhost:2379/dtmservice"</span>

<span class="hljs-comment">// ä¸‹é¢ä»é…ç½®æ–‡ä»¶ä¸­Loadé…ç½®ï¼Œç„¶åé€šè¿‡BuildTargetè·å¾—ä¸šåŠ¡æœåŠ¡çš„åœ°å€</span>
<span class="hljs-keyword">var</span> c zrpc.RpcClientConf
conf.MustLoad(*configFile, &amp;c)
busiServer, err := c.BuildTarget()

  <span class="hljs-comment">// ä½¿ç”¨dtmgrpcç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯å‹åˆ†å¸ƒå¼äº‹åŠ¡å¹¶æäº¤</span>
	gid := dtmgrpc.MustGenGid(dtmServer)
	msg := dtmgrpc.NewMsgGrpc(dtmServer, gid).
    <span class="hljs-comment">// äº‹åŠ¡çš„ç¬¬ä¸€æ­¥ä¸ºè°ƒç”¨trans.TransSvcClient.TransOut</span>
    <span class="hljs-comment">// å¯ä»¥ä»trans.pb.goä¸­æ‰¾åˆ°ä¸Šè¿°æ–¹æ³•å¯¹åº”çš„Methodåç§°ä¸º"/trans.TransSvc/TransOut"</span>
    <span class="hljs-comment">// dtméœ€è¦ä»dtmæœåŠ¡å™¨è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èµ°å¼ºç±»å‹</span>
    <span class="hljs-comment">// è€Œæ˜¯èµ°åŠ¨æ€çš„url: busiServer+"/trans.TransSvc/TransOut"</span>
		Add(busiServer+<span class="hljs-string">"/trans.TransSvc/TransOut"</span>, &amp;busi.BusiReq{Amount: <span class="hljs-number">30</span>, UserId: <span class="hljs-number">1</span>}).
		Add(busiServer+<span class="hljs-string">"/trans.TransSvc/TransIn"</span>, &amp;busi.BusiReq{Amount: <span class="hljs-number">30</span>, UserId: <span class="hljs-number">2</span>})
	err := msg.Submit()
</code></pre>
<p>æ•´ä¸ªå¼€å‘æ¥å…¥çš„è¿‡ç¨‹å¾ˆå°‘ï¼Œå‰é¢çš„æ³¨é‡Šå·²ç»å¾ˆæ¸…æ™°ï¼Œå°±ä¸å†èµ˜è¿°äº†</p>
<h2 data-id="heading-4">æ­£ç¡®çš„åšæ³•ï¼Œä»»ä½•goé¡¹ç›®éƒ½å¯ä»¥å»é€‚é…dtm</h2>
<p>è¯´ç™½äº†å°±æ˜¯è®©æœåŠ¡æ‰¾åˆ°dtmçš„è°ƒç”¨å…¥å£</p>
<h3 data-id="heading-5">1. ä½¿ç”¨dtm,ä¼ å‚dtm serveråœ°å€</h3>
<pre><code class="hljs language-go" lang="go">gid := dtmgrpc.MustGenGid(l.svcCtx.Config.DtmServerAddr)
</code></pre>
<h3 data-id="heading-6">2. tccäº‹åŠ¡ä¸Šä¸‹æ–‡ä¸¢å¤±è§£å†³æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> dtmtool

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"violet/common"</span>

	<span class="hljs-string">"github.com/dtm-labs/client/dtmcli/dtmimp"</span>
	<span class="hljs-string">"github.com/dtm-labs/client/dtmgrpc"</span>
	<span class="hljs-string">"github.com/dtm-labs/client/dtmgrpc/dtmgimp"</span>
	<span class="hljs-string">"go.opentelemetry.io/otel"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TccGlobalTransactionWithContext</span><span class="hljs-params">(ctx context.Context, dtm <span class="hljs-type">string</span>, gid <span class="hljs-type">string</span>, tccFunc dtmgrpc.TccGlobalFunc)</span></span> (rerr <span class="hljs-type">error</span>) {
	headers := <span class="hljs-built_in">make</span>(common.BranchHeaders)
	propagator := otel.GetTextMapPropagator()
	propagator.Inject(ctx, headers)

	tcc := &amp;dtmgrpc.TccGrpc{TransBase: *dtmimp.NewTransBase(gid, <span class="hljs-string">"tcc"</span>, dtm, <span class="hljs-string">""</span>)}

	tcc.Context = ctx
	tcc.BranchHeaders = headers

	rerr = dtmgimp.DtmGrpcCall(&amp;tcc.TransBase, <span class="hljs-string">"Prepare"</span>)
	<span class="hljs-keyword">if</span> rerr != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> rerr
	}
	<span class="hljs-keyword">defer</span> dtmimp.DeferDo(&amp;rerr, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> dtmgimp.DtmGrpcCall(&amp;tcc.TransBase, <span class="hljs-string">"Submit"</span>)
	}, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
		tcc.RollbackReason = rerr.Error()
		<span class="hljs-keyword">return</span> dtmgimp.DtmGrpcCall(&amp;tcc.TransBase, <span class="hljs-string">"Abort"</span>)
	})
	rerr = tccFunc(tcc)
	<span class="hljs-keyword">return</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">SagaTransactionWithContext</span><span class="hljs-params">(ctx context.Context, dtm <span class="hljs-type">string</span>, gid <span class="hljs-type">string</span>)</span></span> *dtmgrpc.SagaGrpc {
	headers := <span class="hljs-built_in">make</span>(common.BranchHeaders)
	propagator := otel.GetTextMapPropagator()
	propagator.Inject(ctx, headers)

	saga := dtmgrpc.NewSagaGrpc(dtm, gid)

	saga.Context = ctx
	saga.BranchHeaders = headers

	<span class="hljs-keyword">return</span> saga
}
</code></pre>
<h3 data-id="heading-7">3. å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-go" lang="go">gid := dtmgrpc.MustGenGid(l.svcCtx.Config.DtmServerAddr)
	err = dtmtool.TccGlobalTransactionWithContext(l.ctx, l.svcCtx.Config.DtmServerAddr, gid, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(tcc *dtmgrpc.TccGrpc)</span></span> <span class="hljs-type">error</span> {
		financeRpcFullAddr := k8stool.CombineFullAddr(l.svcCtx.Config.Namespace, l.svcCtx.Config.FinanceRpcAddr)
		userRpcFullAddr := k8stool.CombineFullAddr(l.svcCtx.Config.Namespace, l.svcCtx.Config.UserRpcAddr)

		transferRequest := &amp;financeRpc.CreateTransferApplyReq{
			UserId:      userId,
			UserName:    userName,
			OutPlatform: req.FromAccountPlatform,
			InPlatform:  req.ToAccountPlatform,
			OutAmount:   amount.String(),
			InAmount:    inAmount,
			OutCurrency: fromCurrency,
			InCurrency:  toCurrency,
			OutAccount:  req.FromAccount,
			InAccount:   req.ToAccount,
			OrderSource: orderSource,
			Rate:        rate,
		}
		<span class="hljs-keyword">var</span> transferResp financeRpc.CreateTransferApplyRes
		err = tcc.CallBranch(transferRequest,
			financeRpcFullAddr+financeRpc.TransferApplication_TccTryCreateTransferApply_FullMethodName,
			financeRpcFullAddr+financeRpc.TransferApplication_TccConfirmCreateTransferApply_FullMethodName,
			financeRpcFullAddr+financeRpc.TransferApplication_TccCancelCreateTransferApply_FullMethodName,
			&amp;transferResp)
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"åˆ’è½¬è®°å½•å¤±è´¥,err:%v"</span>, err)
			<span class="hljs-keyword">return</span> err
		}
		<span class="hljs-keyword">if</span> transferResp.Status.Code != <span class="hljs-number">0</span> {
			<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(transferResp.Status.Code), transferResp.Status.Message)
		}

		resp = &amp;types.TransactionResponse{
			Amount:         amount.String(),
			AmountReceived: inAmount,
			OrderId:        transferResp.OrderId,
			OrderTime:      transferResp.CreateTime,
		}

		<span class="hljs-keyword">if</span> req.FromAccountPlatform == comment.AccountWallet {
			<span class="hljs-comment">// é’±åŒ…è°ƒæ•´è®°å½•</span>
			walletAdjustmentReq := &amp;walletAdjust.CreateWalletAdjustmentReq{
				UserId:             userId,
				UserName:           userName,
				UserType:           userType,
				ChangeBeforeAmount: fromBalance.String(),
				AdminUser:          comment.AdminUser,
				ChangeType:         <span class="hljs-type">int32</span>(comment.OUT_Amount),
				Wallet:             req.FromAccount,
				WalletCurrency:     fromCurrency,
				ChangeAmount:       amount.String(),
				ChangeMethod:       <span class="hljs-type">int32</span>(comment.INNER_TRANS),
				TradeOrder:         &amp;transferResp.OrderId,
			}
			<span class="hljs-keyword">var</span> walletAdjustmentRes walletAdjust.Status
			err = tcc.CallBranch(walletAdjustmentReq,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccTryCreateWalletAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccConfirmCreateWalletAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccCancelCreateWalletAdjustment_FullMethodName,
				&amp;walletAdjustmentRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"é’±åŒ…è°ƒæ•´è®°å½•å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> walletAdjustmentRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(walletAdjustmentRes.Status.Code), walletAdjustmentRes.Status.Message)
			}
			<span class="hljs-comment">// é’±åŒ…æµæ°´</span>
			walletTransHisReq := &amp;walletAdjust.WalletTransactionHistory{
				UserId:             userId,
				UserName:           userName,
				UserType:           userType,
				WalletId:           req.FromAccount,
				Currency:           fromCurrency,
				Amount:             req.Amount,
				ChangeBeforeAmount: fromBalance.String(),
				ChangeType:         <span class="hljs-type">int32</span>(comment.OUT_Amount),
				Remark:             <span class="hljs-string">"åˆ’è½¬,è½¬å‡ºåˆ°äº¤æ˜“è´¦æˆ·"</span>,
				ChangeMethod:       common.TransactionTypeTransferOut,
				OrderId:            transferResp.OrderId,
			}
			<span class="hljs-keyword">var</span> walletTransHisRes walletAdjust.WalletTransactionHistoryID
			err = tcc.CallBranch(walletTransHisReq,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccTryCreateWalletTransactionHistory_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccConfirmCreateWalletTransactionHistory_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccCancelCreateWalletTransactionHistory_FullMethodName,
				&amp;walletTransHisRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"tcc write wallet transaction history error: %v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> walletTransHisRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(walletTransHisRes.Status.Code), walletTransHisRes.Status.Message)
			}
			<span class="hljs-comment">// é’±åŒ…å‡é’±</span>
			<span class="hljs-keyword">var</span> adjustWalletBalance userRpc.Status
			err = tcc.CallBranch(&amp;userRpc.RWalletBalanceAdjustRequest{
				WalletId: req.FromAccount,
				Type:     <span class="hljs-number">2</span>,
				Amount:   amount.String(),
			},
				userRpcFullAddr+userRpc.RWallet_TccTryAdjustRWalletBalance_FullMethodName,
				userRpcFullAddr+userRpc.RWallet_TccConfirmAdjustRWalletBalance_FullMethodName,
				userRpcFullAddr+userRpc.RWallet_TccCancelCreateRWallet_FullMethodName,
				&amp;adjustWalletBalance)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"é’±åŒ…ä½™é¢è°ƒæ•´å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> adjustWalletBalance.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(adjustWalletBalance.Status.Code), adjustWalletBalance.Status.Message)
			}
			<span class="hljs-comment">// è´¦æˆ·è°ƒæ•´è®°å½•</span>
			accountAdjustmentReq := &amp;accountAdjust.CreateAccountAdjustmentReq{
				UserId:          userId,
				UserName:        userName,
				UserType:        userType,
				ChangeType:      <span class="hljs-type">int32</span>(comment.IN_Amount),
				AdminUser:       comment.AdminUser,
				Account:         req.ToAccount,
				AccountPlatform: req.ToAccountPlatform,
				Currency:        toCurrency,
				BeforeAmount:    toBalance.String(),
				ChangeAmount:    inAmount,
				ChangeMethod:    <span class="hljs-type">int32</span>(comment.INNER_TRANS),
				TradeOrder:      &amp;transferResp.OrderId,
			}

			<span class="hljs-keyword">var</span> accountAdjustmentRes accountAdjust.CreateAccountAdjustmentRes
			err = tcc.CallBranch(accountAdjustmentReq,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccTryCreateAccountAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccConfirmCreateAccountAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccCancelCreateAccountAdjustment_FullMethodName,
				&amp;accountAdjustmentRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"è´¦æˆ·è°ƒæ•´è®°å½•å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> accountAdjustmentRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(accountAdjustmentRes.Status.Code), accountAdjustmentRes.Status.Message)
			}
			<span class="hljs-comment">// è´¦æˆ·åŠ é’±</span>
			payload := &amp;finance_task.AccountAdjustBalance{
				ApplyId:      transferResp.OrderId,
				AdjustmentID: accountAdjustmentRes.OrderId,
			}
			taskInfo, _ := l.svcCtx.StaskClient.EnqueueContext(l.ctx, payload.CreateTransactionTaskFactory())
			logx.WithContext(l.ctx).Infof(<span class="hljs-string">"task id: %+v"</span>, taskInfo.ID)
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// é’±åŒ…è°ƒæ•´è®°å½•</span>
			walletAdjustmentReq := &amp;walletAdjust.CreateWalletAdjustmentReq{
				UserId:             userId,
				UserName:           userName,
				UserType:           userType,
				ChangeBeforeAmount: toBalance.String(),
				AdminUser:          comment.AdminUser,
				ChangeType:         <span class="hljs-type">int32</span>(comment.IN_Amount),
				Wallet:             req.ToAccount,
				WalletCurrency:     toCurrency,
				ChangeAmount:       inAmount,
				ChangeMethod:       <span class="hljs-type">int32</span>(comment.INNER_TRANS),
				TradeOrder:         &amp;transferResp.OrderId,
			}
			<span class="hljs-keyword">var</span> walletAdjustmentRes walletAdjust.Status
			err = tcc.CallBranch(walletAdjustmentReq,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccTryCreateWalletAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccConfirmCreateWalletAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccCancelCreateWalletAdjustment_FullMethodName,
				&amp;walletAdjustmentRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"é’±åŒ…è°ƒæ•´è®°å½•å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> walletAdjustmentRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(walletAdjustmentRes.Status.Code), walletAdjustmentRes.Status.Message)
			}
			<span class="hljs-comment">// é’±åŒ…æµæ°´</span>
			walletTransHisReq := &amp;walletAdjust.WalletTransactionHistory{
				OrderId:            transferResp.OrderId,
				UserId:             userId,
				UserName:           userName,
				UserType:           userType,
				WalletId:           req.ToAccount,
				Currency:           toCurrency,
				Amount:             inAmount,
				ChangeBeforeAmount: toBalance.String(),
				ChangeType:         <span class="hljs-type">int32</span>(comment.IN_Amount),
				Remark:             <span class="hljs-string">"åˆ’è½¬,äº¤æ˜“è´¦æˆ·è½¬å…¥"</span>,
				ChangeMethod:       common.TransactionTypeTransferIn,
			}
			<span class="hljs-keyword">var</span> walletTransHisRes walletAdjust.WalletTransactionHistoryID
			err = tcc.CallBranch(walletTransHisReq,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccTryCreateWalletTransactionHistory_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccConfirmCreateWalletTransactionHistory_FullMethodName,
				financeRpcFullAddr+financeRpc.WalletAdjustment_TccCancelCreateWalletTransactionHistory_FullMethodName,
				&amp;walletTransHisRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"tcc write wallet transaction history error: %v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> walletTransHisRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(walletTransHisRes.Status.Code), walletTransHisRes.Status.Message)
			}
			<span class="hljs-comment">// é’±åŒ…åŠ é’±</span>
			<span class="hljs-keyword">var</span> adjustWalletBalance userRpc.Status
			err = tcc.CallBranch(&amp;userRpc.RWalletBalanceAdjustRequest{
				WalletId: req.ToAccount,
				Type:     <span class="hljs-number">1</span>,
				Amount:   inAmount,
			},
				userRpcFullAddr+userRpc.RWallet_TccTryAdjustRWalletBalance_FullMethodName,
				userRpcFullAddr+userRpc.RWallet_TccConfirmAdjustRWalletBalance_FullMethodName,
				userRpcFullAddr+userRpc.RWallet_TccCancelCreateRWallet_FullMethodName,
				&amp;adjustWalletBalance)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"é’±åŒ…ä½™é¢è°ƒæ•´å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> adjustWalletBalance.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(adjustWalletBalance.Status.Code), adjustWalletBalance.Status.Message)
			}

			<span class="hljs-comment">// è´¦æˆ·è°ƒæ•´è®°å½•</span>
			accountAdjustmentReq := &amp;accountAdjust.CreateAccountAdjustmentReq{
				UserId:          userId,
				UserName:        userName,
				UserType:        userType,
				ChangeType:      <span class="hljs-type">int32</span>(comment.OUT_Amount),
				AdminUser:       comment.AdminUser,
				Account:         req.FromAccount,
				AccountPlatform: req.FromAccountPlatform,
				Currency:        fromCurrency,
				BeforeAmount:    fromBalance.String(),
				ChangeAmount:    amount.String(),
				ChangeMethod:    <span class="hljs-type">int32</span>(comment.INNER_TRANS),
				TradeOrder:      &amp;transferResp.OrderId,
			}
			<span class="hljs-keyword">var</span> accountAdjustmentRes accountAdjust.CreateAccountAdjustmentRes
			err = tcc.CallBranch(accountAdjustmentReq,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccTryCreateAccountAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccConfirmCreateAccountAdjustment_FullMethodName,
				financeRpcFullAddr+financeRpc.AccountAdjustment_TccCancelCreateAccountAdjustment_FullMethodName,
				&amp;accountAdjustmentRes)
			<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
				logx.WithContext(l.ctx).Errorf(<span class="hljs-string">"è´¦æˆ·è°ƒæ•´è®°å½•å¤±è´¥,err:%v"</span>, err)
				<span class="hljs-keyword">return</span> err
			}
			<span class="hljs-keyword">if</span> accountAdjustmentRes.Status.Code != <span class="hljs-number">0</span> {
				<span class="hljs-keyword">return</span> common.NewErr(<span class="hljs-type">int</span>(accountAdjustmentRes.Status.Code), accountAdjustmentRes.Status.Message)
			}
			payload := &amp;finance_task.AccountAdjustBalance{
				ApplyId:      transferResp.OrderId,
				AdjustmentID: accountAdjustmentRes.OrderId,
			}
			taskInfo, _ := l.svcCtx.StaskClient.EnqueueContext(l.ctx, payload.CreateTransactionTaskFactory())
			logx.WithContext(l.ctx).Infof(<span class="hljs-string">"task id: %+v"</span>, taskInfo.ID)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})
</code></pre>
<h3 data-id="heading-8">4. ä¸ºä»€ä¹ˆè¦æ³¨å†Œä¸Šä¸‹æ–‡ï¼Ÿ</h3>
<p>ä¸ºçš„æ˜¯å­äº‹åŠ¡å±éšœå¯ä»¥ä½¿ç”¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå­äº‹åŠ¡å±éšœå¦‚ä½•ä½¿ç”¨å‘¢?è¦ä»dbå…¥æ‰‹</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> sql

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"database/sql"</span>
	<span class="hljs-string">"fmt"</span>

	<span class="hljs-string">"github.com/dtm-labs/client/dtmcli"</span>
	<span class="hljs-string">"github.com/dtm-labs/client/dtmcli/dtmimp"</span>
	<span class="hljs-string">"github.com/dtm-labs/client/dtmgrpc/dtmgimp"</span>
	<span class="hljs-string">"github.com/zeromicro/go-zero/core/logx"</span>
	<span class="hljs-string">"go.opentelemetry.io/otel/attribute"</span>
	oteltrace <span class="hljs-string">"go.opentelemetry.io/otel/trace"</span>
	<span class="hljs-string">"gorm.io/gorm"</span>

	<span class="hljs-string">"violet/common"</span>
)

<span class="hljs-keyword">type</span> barrierDBWrapper <span class="hljs-keyword">struct</span> {
	ctx context.Context
	DB  *gorm.DB
}

<span class="hljs-keyword">type</span> sqlResult <span class="hljs-keyword">struct</span> {
	rowsAffected <span class="hljs-type">int64</span>
	err          <span class="hljs-type">error</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ss *sqlResult)</span></span> LastInsertId() (<span class="hljs-type">int64</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// RowsAffected dtm_barrier åªä¼šç”¨äº†RowsAffected,æ²¡æœ‰ä½¿ç”¨ LastInsertId æ‰€ä»¥æ²¡æœ‰å®ç° LastInsertId</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(ss *sqlResult)</span></span> RowsAffected() (<span class="hljs-type">int64</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">return</span> ss.rowsAffected, ss.err
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewDBWrapper</span><span class="hljs-params">(ctx context.Context, db *gorm.DB)</span></span> *barrierDBWrapper {
	<span class="hljs-keyword">return</span> &amp;barrierDBWrapper{
		ctx: ctx,
		DB:  db,
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *barrierDBWrapper)</span></span> Exec(query <span class="hljs-type">string</span>, args ...<span class="hljs-keyword">interface</span>{}) (sql.Result, <span class="hljs-type">error</span>) {
	result := bb.DB.Exec(query, args...)
	<span class="hljs-keyword">return</span> &amp;sqlResult{
		rowsAffected: result.RowsAffected,
		err:          result.Error,
	}, result.Error
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *barrierDBWrapper)</span></span> QueryRow(query <span class="hljs-type">string</span>, args ...<span class="hljs-keyword">interface</span>{}) *sql.Row {
	<span class="hljs-keyword">return</span> bb.DB.WithContext(bb.ctx).Raw(query, args...).Row()
}

<span class="hljs-keyword">type</span> BarrierGormFunc <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(gtx *gorm.DB)</span></span> <span class="hljs-type">error</span>

<span class="hljs-keyword">type</span> DtmBarrier <span class="hljs-keyword">struct</span> {
	ctx              context.Context
	TransType        <span class="hljs-type">string</span>
	Gid              <span class="hljs-type">string</span>
	BranchID         <span class="hljs-type">string</span>
	Op               <span class="hljs-type">string</span>
	BarrierID        <span class="hljs-type">int</span>
	DBType           <span class="hljs-type">string</span> <span class="hljs-comment">// DBTypeMysql | DBTypePostgres</span>
	BarrierTableName <span class="hljs-type">string</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBarrierFromGRPC</span><span class="hljs-params">(ctx context.Context)</span></span> (*DtmBarrier, <span class="hljs-type">error</span>) {
	tb := dtmgimp.TransBaseFromGrpc(ctx)
	barrier := &amp;DtmBarrier{
		TransType: tb.TransType,
		Gid:       tb.Gid,
		BranchID:  tb.BranchID,
		Op:        tb.Op,
		ctx:       ctx,
	}

	<span class="hljs-keyword">if</span> barrier.TransType == <span class="hljs-string">""</span> || barrier.Gid == <span class="hljs-string">""</span> || barrier.BranchID == <span class="hljs-string">""</span> || barrier.Op == <span class="hljs-string">""</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"invalid trans info: %v"</span>, barrier)
	}

	<span class="hljs-keyword">return</span> barrier, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *DtmBarrier)</span></span> String() <span class="hljs-type">string</span> {
	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"transInfo: %s %s %s %s"</span>, bb.TransType, bb.Gid, bb.BranchID, bb.Op)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *DtmBarrier)</span></span> newBarrierID() <span class="hljs-type">string</span> {
	bb.BarrierID++
	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"%02d"</span>, bb.BarrierID)
}

<span class="hljs-comment">// CallWithDB ç»“åˆgorm å¯¹dtm barrier çš„å°è£…</span>
<span class="hljs-comment">// æ³¨æ„ï¼š</span>
<span class="hljs-comment">//  1. BarrierGormFuncä¸­å¯¹æ•°æ®åº“çš„CREATEã€UPDATEã€DELETEå¿…é¡»ä½¿ç”¨å‚æ•°gtxè€Œä¸æ˜¯d.DB, SELECT ä¸¤è€…éƒ½å¯ä»¥</span>
<span class="hljs-comment">//  2. CallWithDB å‡½æ•°ä¸­ä½¿ç”¨gdbå·²ç»å¯åŠ¨äº†ä¸€ä¸ªäº‹åŠ¡,è€Œä¸”ä¼šè‡ªåŠ¨æäº¤ï¼Œæ‰€ä»¥ä¸å¿…å†BarrierGormFuncå¯åŠ¨æ–°äº‹ç‰©</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *DtmBarrier)</span></span> CallWithDB(db *gorm.DB, busiCall BarrierGormFunc) (rerr <span class="hljs-type">error</span>) {
	tx := db.WithContext(bb.ctx).Begin()
	<span class="hljs-keyword">defer</span> dtmimp.DeferDo(&amp;rerr, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> tx.Commit().Error
	}, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> tx.Rollback().Error
	})

	rerr = bb.Call(db, busiCall)
	<span class="hljs-keyword">return</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *DtmBarrier)</span></span> CallWithDBandTracing(db *gorm.DB, operationName <span class="hljs-type">string</span>, busiCall BarrierGormFunc) (rerr <span class="hljs-type">error</span>) {
	c, span := common.StartSpan(bb.ctx, <span class="hljs-string">"sql"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(r oteltrace.Span)</span></span> {
		r.SetAttributes(attribute.Key(<span class="hljs-string">"sql.method"</span>).String(operationName))
	})
	<span class="hljs-keyword">var</span> err <span class="hljs-type">error</span>
	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		common.EndSpan(span, err)
	}()

	bb.ctx = c

	<span class="hljs-comment">// æ‰§è¡Œæ•°æ®åº“æ“ä½œå¹¶è®°å½•é”™è¯¯</span>
	err = bb.CallWithDB(db, busiCall)

	<span class="hljs-keyword">return</span> err
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bb *DtmBarrier)</span></span> Call(gtx *gorm.DB, busiCall BarrierGormFunc) (rerr <span class="hljs-type">error</span>) {
	bid := bb.newBarrierID()
	originOp := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{
		dtmimp.OpCancel:     dtmimp.OpTry,    <span class="hljs-comment">// tcc</span>
		dtmimp.OpCompensate: dtmimp.OpAction, <span class="hljs-comment">// saga</span>
		dtmimp.OpRollback:   dtmimp.OpAction, <span class="hljs-comment">// workflow</span>
	}[bb.Op]

	originAffected, oerr := dtmimp.InsertBarrier(NewDBWrapper(bb.ctx, gtx), bb.TransType, bb.Gid, bb.BranchID, originOp, bid, bb.Op, bb.DBType, bb.BarrierTableName)
	currentAffected, rerr := dtmimp.InsertBarrier(NewDBWrapper(bb.ctx, gtx), bb.TransType, bb.Gid, bb.BranchID, bb.Op, bid, bb.Op, bb.DBType, bb.BarrierTableName)

	logx.WithContext(bb.ctx).Debugf(<span class="hljs-string">"originAffected: %d currentAffected: %d"</span>, originAffected, currentAffected)

	<span class="hljs-keyword">if</span> rerr == <span class="hljs-literal">nil</span> &amp;&amp; bb.Op == dtmimp.MsgDoOp &amp;&amp; currentAffected == <span class="hljs-number">0</span> { <span class="hljs-comment">// for msg's DoAndSubmit, repeated insert should be rejected.</span>
		<span class="hljs-keyword">return</span> dtmcli.ErrDuplicated
	}

	<span class="hljs-keyword">if</span> rerr == <span class="hljs-literal">nil</span> {
		rerr = oerr
	}

	<span class="hljs-keyword">if</span> (bb.Op == dtmimp.OpCancel || bb.Op == dtmimp.OpCompensate || bb.Op == dtmimp.OpRollback) &amp;&amp; originAffected &gt; <span class="hljs-number">0</span> || <span class="hljs-comment">// null compensate</span>
		currentAffected == <span class="hljs-number">0</span> { <span class="hljs-comment">// repeated request or dangled request</span>
		<span class="hljs-keyword">return</span>
	}

	<span class="hljs-keyword">if</span> rerr == <span class="hljs-literal">nil</span> {
		rerr = busiCall(gtx)
	}

	<span class="hljs-keyword">return</span>
}
</code></pre>
<h3 data-id="heading-9">5. ä½¿ç”¨å­äº‹åŠ¡å±éšœ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *DAO)</span></span> ConfirmCreateDepositApply(ctx context.Context, apply *DepositApplication) (*DepositApplication, <span class="hljs-type">error</span>) {
	barrier, err := sql.NewBarrierFromGRPC(ctx)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		logx.WithContext(ctx).Error(err)
		<span class="hljs-comment">// codes.Internal é”™è¯¯ä¼šé‡è¯•</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	<span class="hljs-comment">//åªä¿®æ”¹çŠ¶æ€</span>
	err = barrier.CallWithDBandTracing(d.DB, <span class="hljs-string">"ConfirmCreateDepositApply"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(gtx *gorm.DB)</span></span> <span class="hljs-type">error</span> {
		err = gtx.Model(&amp;DepositApplication{}).Where(<span class="hljs-string">"gid = ? and trans_status = ?"</span>, barrier.Gid, common.DtmTransactionStatusPending).
			Update(<span class="hljs-string">"trans_status"</span>, common.DtmTransactionStatusCompleted).Error
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-keyword">return</span> err
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		logx.Errorw(<span class="hljs-string">"ConfirmCreateDepositApply error"</span>, logx.Field(<span class="hljs-string">"err"</span>, err))
	}
	<span class="hljs-keyword">return</span> apply, err
}
</code></pre>
<p>æœ¬æ•™ç¨‹åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ‰ä»€ä¹ˆä¸æ‡‚çš„è¯·ç§ä¿¡ï¼Œæœ‰æ—¶é—´é€ä¸€è§£ç­”</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[seataè¦æ”¯æŒOracleæ‰¹é‡æ’å…¥çš„è¯­æ³•äº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571829822340268083</link>    <guid>https://juejin.cn/post/7571829822340268083</guid>    <pubDate>2025-11-13T04:54:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571829822340268083" data-draft-id="7571662618055376922" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="seataè¦æ”¯æŒOracleæ‰¹é‡æ’å…¥çš„è¯­æ³•äº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-13T04:54:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            seataè¦æ”¯æŒOracleæ‰¹é‡æ’å…¥çš„è¯­æ³•äº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-13T04:54:44.000Z" title="Thu Nov 13 2025 04:54:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>å¤§å®¶å¥½ï¼å¤§å®¶éƒ½çŸ¥é“seataæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œå®ƒä¸ä»…ä½¿æ‚¨è½»æ¾å¿«æ·åœ°é€šè¿‡æ³¨è§£å°±å¯ä»¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œè€Œä¸”è¿˜æœ‰AT,XA,TCC,Sagaå››ç§æ¨¡å¼å¯ä»¥é€‰æ‹©ï¼Œå¯ä»¥ä¸ºæ‚¨çš„é¡¹ç›®æä¾›æœ€é€‚åˆçš„æ–¹æ¡ˆã€‚éšç€seataä¸æ–­å‘å±•ï¼Œå®ƒä¹Ÿåœ¨ä¸æ–­åœ°è¦†ç›–æ›´å¤šçš„ä¸šåŠ¡åœºæ™¯ã€‚åœ¨æœªå‘å¸ƒçš„2.6.0ç‰ˆæœ¬ä¸­ï¼Œseataå°±å¯ä»¥æ”¯æŒOracleçš„æ‰¹é‡æ’å…¥è¯­æ³•äº†ï¼æ¥ä¸‹æ¥è®©æˆ‘ä»¬è§£æä¸€ä¸‹å®ƒåˆ°åº•æ˜¯æ€ä¹ˆåšåˆ°çš„å§â¤ï¸</p>
<h2 data-id="heading-1">é—®é¢˜èµ·æº</h2>
<p>ç°åœ¨æœ‰ä¸€ä¸ªSQLè¯­å¥ï¼š<strong>insert all into a (id) values(1) into a (id) values(2) SELECT 1 FROM DUAL</strong>
è¿›å…¥seataå°±ä¼šè¢«è§£ææˆ<code>OracleMultiInsertStatement</code>è¿™ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åœ¨åŸæ¥seataçš„ä»£ç ä¸­,<code>DruidSQLRecognizerFactoryImpl</code>è¿™ä¸ªå·¥å‚å®ç°ç±»ï¼Œå¹¶ä¸æ”¯æŒè§£æè·å–åˆ°<code>OracleMultiInsertStatement</code>è¿™ä¸ªå¯¹è±¡ï¼ˆåªæ”¯æŒæœ€é€šç”¨çš„å¢åˆ æ”¹æŸ¥ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f26e1be50b34e908704326169749ffc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763614484&amp;x-signature=3ZsHa7d5i2E%2Fred9fpoz4IRjLNE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">è§£å†³æ­¥éª¤</h2>
<h3 data-id="heading-3">é—®é¢˜åˆ†æ</h3>
<p>è¦æ”¯æŒè¿™ä¸ªè¯­æ³•ï¼Œæˆ‘ä»¬å°±å¿…é¡»å…ˆæ˜ç™½ï¼ŒOracle Insert Batchè¯­æ³•åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä»¥åŠæˆ‘ä»¬seataåˆ°åº•è¦æ”¯æŒè¿™ä¸ªè¯­æ³•åˆ°å“ªä¸€æ­¥ï¼Ÿæ²¡æœ‰å…¨æ”¯æŒçš„åŸå› åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸‰ä¸ªé—®é¢˜æˆ‘ä»¬ä¼šåœ¨ä¸‹é¢ä¸€ä¸€è§£ç­”ã€‚</p>
<h4 data-id="heading-4">ä»€ä¹ˆæ˜¯ Oracle Multi-Insertï¼Ÿ</h4>
<p>Oracle æ”¯æŒä¸€ç§ç‰¹æ®Šçš„ <code>INSERT</code> è¯­æ³•ï¼Œå¯ä»¥åœ¨<strong>ä¸€æ¡è¯­å¥ä¸­å‘å¤šä¸ªè¡¨æ’å…¥æ•°æ®</strong>ï¼Œæ ¹æ®æ¡ä»¶å†³å®šæ’å…¥åˆ°å“ªä¸ªï¼ˆæˆ–å“ªäº›ï¼‰è¡¨ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªSQLè¯­å¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/906082cd0a4f4cd2a63ad3776a46653a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763614484&amp;x-signature=Setuzab%2F9ht2x3jyDxHikL6Pmy8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä»€ä¹ˆæ˜¯INSERT ALL / FIRSTï¼Ÿ</strong></p>
<p>1.<code>INSERT FIRST</code> ï¼Œå®ƒæ ¹æ®æ¡ä»¶ï¼Œå°†ä¸€æ¡æºæ•°æ®æ’å…¥åˆ°å¤šä¸ªç›®æ ‡è¡¨ä¸­çš„â€œç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶â€çš„è¡¨ä¸­ï¼ˆä»…æ’å…¥ä¸€æ¬¡ï¼‰ï¼Œ<strong>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ¤æ–­Â <code>WHEN</code>Â æ¡ä»¶</strong>ï¼Œ<strong>ä¸€æ—¦æŸä¸ªæ¡ä»¶ä¸ºçœŸï¼Œå°±æ‰§è¡Œå¯¹åº”çš„Â <code>INTO</code>ï¼Œç„¶åè·³è¿‡åç»­æ‰€æœ‰åˆ†æ”¯</strong>ï¼Œ<strong>æ¯è¡Œæºæ•°æ®æœ€å¤šåªè¢«æ’å…¥ä¸€æ¬¡</strong>ï¼ˆå³ä½¿å¤šä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼‰ï¼Œ<code>ELSE</code>Â æ˜¯å¯é€‰çš„ï¼›å¦‚æœæ²¡æœ‰Â <code>ELSE</code>Â ä¸”æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™è¯¥è¡Œè¢«ä¸¢å¼ƒã€‚</p>
<p>2.<code>INSERT ALL</code>å’Œ<code>INSERT FIRST</code>ç›¸åï¼Œæ»¡è¶³å¤šä¸ªæ¡ä»¶å°±æ’å…¥å¤šæ¬¡</p>
<p>ps:è¿™ç§è¯­æ³•åœ¨æ ‡å‡† SQL ä¸­<strong>ä¸å­˜åœ¨</strong>ï¼Œæ˜¯ Oracle çš„æ‰©å±•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OracleMultiInsertStatement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OracleStatementImpl</span>
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª <strong>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰èŠ‚ç‚¹ç±»</strong>ï¼Œç”¨äºè¡¨ç¤ºä¸Šè¿° <code>INSERT ALL / FIRST</code> è¯­å¥</p>
<p><strong>æ ¸å¿ƒå­—æ®µè§£é‡Š</strong></p>






























<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>option</code></td><td><code>Option</code>Â enum (<code>ALL</code>,Â <code>FIRST</code>)</td><td>è¡¨ç¤ºæ˜¯Â <code>INSERT ALL</code>Â è¿˜æ˜¯Â <code>INSERT FIRST</code></td></tr><tr><td><code>subQuery</code></td><td><code>SQLSelect</code></td><td>æœ€åçš„Â <code>SELECT ...</code>Â å­æŸ¥è¯¢ï¼Œæä¾›æ•°æ®æº</td></tr><tr><td><code>entries</code></td><td><code>List&lt;Entry&gt;</code></td><td>æ’å…¥è§„åˆ™åˆ—è¡¨ï¼Œæ¯ä¸ªÂ <code>Entry</code>Â æ˜¯ä¸€ä¸ªæ’å…¥åˆ†æ”¯ï¼ˆå¯èƒ½æ˜¯æ¡ä»¶åˆ†æ”¯æˆ–æ— æ¡ä»¶æ’å…¥ï¼‰</td></tr><tr><td><code>hints</code></td><td><code>List&lt;SQLHint&gt;</code></td><td>Oracle çš„ä¼˜åŒ–å™¨æç¤ºï¼ˆå¦‚Â <code>/*+ APPEND */</code>ï¼‰</td></tr></tbody></table>
<p><strong>å†…éƒ¨ç±»è¯¦è§£</strong></p>
<p>1.<strong>Entryæ¥å£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Entry</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OracleSQLObject</span>
</code></pre>
<p>è¿™æ˜¯ <code>entries</code> åˆ—è¡¨ä¸­å…ƒç´ çš„é€šç”¨æ¥å£ã€‚ç›®å‰æœ‰ä¸¤ä¸ªå®ç°ï¼š</p>
<ul>
<li><code>ConditionalInsertClause</code>ï¼ˆå¸¦Â <code>WHEN/ELSE</code>Â çš„æ¡ä»¶æ’å…¥ï¼‰</li>
<li><code>InsertIntoClause</code>ï¼ˆæ— æ¡ä»¶ç›´æ¥æ’å…¥ï¼‰</li>
</ul>
<p>è¿™æ ·å†™æ˜¯ä¸ºäº†å¯ä»¥æ”¯æŒæ··åˆå†™æ³•</p>
<ol start="2">
<li><strong>ConditionalInsertClauseItem</strong></li>
</ol>
<p>ä»£è¡¨ä¸€ä¸ª <code>WHEN ... THEN ...</code> åˆ†æ”¯ã€‚</p>
<ul>
<li><code>when</code>:Â <code>SQLExpr</code>Â â†’ æ¡ä»¶è¡¨è¾¾å¼ï¼ˆå¦‚Â <code>dept = 'IT'</code>ï¼‰</li>
<li><code>then</code>:Â <code>InsertIntoClause</code>Â â†’ æ»¡è¶³æ¡ä»¶æ—¶è¦æ‰§è¡Œçš„Â <code>INSERT INTO ...</code></li>
</ul>
<p>è¦è®°ä½çš„æ˜¯ï¼Œ<code>ConditionalInsertClause</code>åŒ…å«äº†<code>ConditionalInsertClauseItem</code>å…¨éƒ¨ã€‚</p>
<h4 data-id="heading-5">seataæ”¯æŒè¯¥è¯­æ³•åˆ°å“ªä¸€æ­¥å‘¢ï¼Ÿ</h4>
<p>ç›®å‰ï¼Œseataåªæ”¯æŒåŒä¸€ä¸ªè¡¨çš„å¤šæ’å…¥(åˆ—ä¸€è‡´)ï¼Œè€Œä¸”ä¹Ÿä¸æ”¯æŒæ¡ä»¶æ’å…¥ä¸Insert Firstè¯­æ³•ã€‚
é‚£è¿™æ ·è¯»è€…å°±ä¼šæœ‰ç–‘é—®äº†ï¼Œé‚£è¿™æ ·å²‚ä¸æ˜¯å’ŒSQLå¤šæ’å…¥è¯­æ³•å·®ä¸å¤šå—ï¼Ÿæ˜¯çš„ï¼Œä½ çš„çŒœæµ‹ä¸é”™ã€‚</p>
<p>å¯¹äºä¸Šè¿°ä¸æ”¯æŒçš„æƒ…å†µï¼Œseataä¼šæŠ›å‡º<code>NotSupportYetException</code>è¿™ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç»™ä¸Šæ¸¸åº”ç”¨å±‚æ•è·ï¼Œä»£è¡¨seataä¸æ”¯æŒè¿™ç§æƒ…å†µã€‚</p>
<h4 data-id="heading-6">æ²¡æœ‰å…¨æ”¯æŒOracleæ‰¹é‡æ’å…¥çš„è¯­æ³•åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>é¦–å…ˆæˆ‘ä»¬ä¸æ˜¯ä¸ºäº†æ”¯æŒè€Œæ”¯æŒï¼Œseataæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶ï¼Œå¦‚æœæ˜¯æ¶‰åŠåˆ°ä¸åŒè¡¨çš„æ›´æ”¹ï¼Œæˆ‘ä»¬æ›´åŠ æ¨èåœ¨åˆ†æ”¯äº‹åŠ¡æ¥è¿›è¡Œæ›´æ”¹ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€ä¸ªSQLè¯­å¥é‡Œé¢è¿›è¡Œæ›´æ”¹ã€‚<strong>æ‹†æˆå¤šä¸ªå•è¡¨ SQLï¼Œåœ¨å¤šä¸ªåˆ†æ”¯äº‹åŠ¡ä¸­æ‰§è¡Œ</strong>ï¼Œæ˜¯æ›´å®‰å…¨ã€å¯å›æ»šçš„åšæ³•ã€‚</p>
<p>å…³äºæ¡ä»¶æ’å…¥å’ŒInsert Firstè¯­æ³•ï¼Œæˆ‘ä»¬æ›´æ¨èæ˜¯åœ¨æœåŠ¡å±‚å¤„ç†æ¡ä»¶é€»è¾‘ï¼Œè€Œä¸æ˜¯ç•™åˆ°æ•°æ®å±‚å†è¿›è¡Œå¤„ç†ã€‚æ•°æ®åº“åº”èšç„¦äº<strong>é«˜æ•ˆå­˜å‚¨ä¸æŸ¥è¯¢</strong>ï¼Œè€Œéå¤æ‚ä¸šåŠ¡é€»è¾‘</p>
<p>è¿™æ ·åšçš„æ ¸å¿ƒè€ƒé‡åŒ…æ‹¬ï¼š<strong>ä¿éšœåˆ†å¸ƒå¼äº‹åŠ¡çš„å¯é æ€§ã€æå‡ä»£ç å¯ç»´æŠ¤æ€§ã€é¿å…æ•°æ®åº“æ–¹è¨€ç»‘å®šï¼Œä»¥åŠç¡®ä¿ä¸šåŠ¡é€»è¾‘çš„ç»Ÿä¸€ç®¡æ§</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h3 data-id="heading-7">æ”¯æŒæ­¥éª¤ä¸€: OracleMultiInsertRecognizer</h3>
<p>okï¼Œè®²å®Œäº†å®šä¹‰ä¸åŸå› ï¼Œæ¥ä¸‹æ¥å°±åº”è¯¥æ¥è®²å¦‚ä½•å®ç°äº†è¿™ç§ç®€åŒ–çš„Oracleæ‰¹é‡æ’å…¥è¯­æ³•äº†ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆåº”è¯¥å®ç°<code>OracleMultiInsertRecognizer</code>è¿™ä¸ªè¯†åˆ«å™¨ç±»ï¼Œè¿™é‡Œè¿ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå•ä¸€èŒè´£ç­‰å¤šç§è®¾è®¡æ¨¡å¼ä¸åŸåˆ™ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OracleMultiInsertRecognizer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseOracleRecognizer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SQLInsertRecognizer</span>
</code></pre>
<h4 data-id="heading-8">è®¾è®¡æ¨¡å¼</h4>
<p><strong>ç­–ç•¥æ¨¡å¼çš„ä½“ç°</strong></p>
<ul>
<li><code>OracleMultiInsertRecognizer</code>Â å®ç°äº†Â <code>SQLInsertRecognizer</code>Â æ¥å£ã€‚</li>
<li>Seata åœ¨è¿è¡Œæ—¶ä¼šæ ¹æ® SQL çš„ AST ç±»å‹ï¼ˆå¦‚Â <code>SQLInsertStatement</code>ï¼Œ<code>OracleMultiInsertStatement</code>Â ç­‰ï¼‰<strong>åŠ¨æ€é€‰æ‹©å¯¹åº”çš„ Recognizer å®ç°ç±»</strong></li>
</ul>
<p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä½“ç°</strong></p>
<ul>
<li>ç»§æ‰¿è‡ªÂ <code>BaseOracleRecognizer</code>ï¼ˆåŸºç±»ï¼‰ï¼Œè¯¥åŸºç±»å®šä¹‰äº†é€šç”¨è§£ææµç¨‹ï¼Œå­ç±»å¯ä»¥ç›´æ¥ç»§æ‰¿å¤ç”¨æŠ½è±¡çˆ¶ç±»çš„æ–¹æ³•ã€‚</li>
</ul>
<p><strong>å•ä¸€èŒè´£åŸåˆ™ + æ¥å£éš”ç¦»</strong></p>
<ul>
<li><code>SQLInsertRecognizer</code>Â æ¥å£åªå®šä¹‰ INSERT ç›¸å…³çš„æ–¹æ³•ï¼ˆ<code>getTableName</code>,Â <code>getInsertColumns</code>,Â <code>getInsertRows</code>Â ç­‰ï¼‰ï¼›</li>
<li><code>OracleMultiInsertRecognizer</code>Â <strong>åªè´Ÿè´£è¯†åˆ«ä¸€ç§ç‰¹å®šè¯­æ³•</strong>ï¼Œä¸å¤„ç† UPDATE/DELETEï¼›</li>
<li>æ ¡éªŒé€»è¾‘ï¼ˆ<code>validateSingleTableConsistency</code>ï¼‰ä¸æ•°æ®æå–é€»è¾‘ï¼ˆ<code>getInsertRows</code>ï¼‰åˆ†ç¦»ã€‚</li>
</ul>
<h4 data-id="heading-9">å…·ä½“é€»è¾‘</h4>
<p>è¿™é‡ŒæŒ‘å‡ ä¸ªé‡è¦çš„è®²å³å¯ï¼Œå‰©ä¸‹å¤§å®¶å»çœ‹æºç å³å¯ã€‚</p>
<p>1.Â <code>validateSingleTableConsistency()</code></p>
<p>è¿™æ˜¯<strong>æœ€æ ¸å¿ƒçš„æ ¡éªŒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>
<p>éå†æ‰€æœ‰Â <code>Entry</code>ï¼ˆæ¯ä¸ªÂ <code>INTO ...</code>Â å­å¥ï¼‰ï¼›</p>
</li>
<li>
<p>å¦‚æœé‡åˆ°Â <code>ConditionalInsertClause</code>ï¼ˆå³Â <code>WHEN...THEN</code>ï¼‰â†’Â <strong>æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œè¯´æ˜å¹¶ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼›</p>
</li>
<li>
<p>å¯¹æ¯ä¸ªÂ <code>InsertIntoClause</code>ï¼š</p>
<ul>
<li>æå–è¡¨åï¼ˆé€šè¿‡Â <code>OracleOutputVisitor</code>Â æ¸²æŸ“ AST å¾—åˆ°å­—ç¬¦ä¸²ï¼‰ï¼›</li>
<li>æå–åˆ—åï¼ˆåªæ”¯æŒÂ <code>SQLIdentifierExpr</code>ï¼Œå³æ™®é€šåˆ—åï¼‰ï¼›</li>
<li>ä¸ç¬¬ä¸€ä¸ªå­å¥å¯¹æ¯”ï¼š<strong>è¡¨åå¿…é¡»ç›¸åŒï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Œåˆ—åˆ—è¡¨å¿…é¡»å®Œå…¨ä¸€è‡´</strong>ï¼›</li>
</ul>
</li>
<li>
<p>æˆåŠŸåç¼“å­˜Â <code>validatedTableName</code>Â å’ŒÂ <code>validatedColumns</code></p>
</li>
</ul>
<p>2.<code>getInsertRows(...)</code></p>
<p>ç”¨äºæå–æ‰€æœ‰è¦æ’å…¥çš„<strong>å…·ä½“å€¼ï¼ˆç”¨äºç”Ÿæˆ undo logï¼‰</strong> ï¼š</p>
<ul>
<li>
<p>éå†æ¯ä¸ªÂ <code>InsertIntoClause</code>Â çš„Â <code>VALUES</code>Â åˆ—è¡¨ï¼›</p>
</li>
<li>
<p>å¯¹æ¯ä¸ªè¡¨è¾¾å¼åšç±»å‹åˆ¤æ–­ï¼š</p>
<ul>
<li><code>SQLNullExpr</code>Â â†’ è½¬ä¸ºÂ <code>Null.get()</code>ï¼ˆSeata å†…éƒ¨ç©ºå€¼è¡¨ç¤ºï¼‰</li>
<li><code>SQLValuableExpr</code>ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ï¼‰â†’ å–Â <code>.getValue()</code></li>
<li><code>SQLVariantRefExpr</code>ï¼ˆå¦‚Â <code>:var</code>Â ç»‘å®šå˜é‡ï¼‰â†’ ä¿ç•™å˜é‡å</li>
<li><code>SQLMethodInvokeExpr</code>ï¼ˆå¦‚Â <code>SYSDATE</code>ï¼‰â†’ æ ‡è®°ä¸ºÂ <code>SqlMethodExpr.get()</code></li>
<li><code>SQLSequenceExpr</code>ï¼ˆå¦‚Â <code>seq.nextval</code>ï¼‰â†’ å°è£…ä¸ºÂ <code>SqlSequenceExpr</code></li>
<li>å…¶ä»–å¤æ‚è¡¨è¾¾å¼ â†’ è‹¥è¯¥ä½ç½®æ˜¯ä¸»é”®ï¼Œåˆ™æŠ¥é”™ï¼›å¦åˆ™æ ‡è®°ä¸ºÂ <code>NotPlaceholderExpr.get()</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">æ”¯æŒæ­¥éª¤äºŒï¼šOracleOperateRecognizerHolder</h3>
<p>è¿™ä¸ªå®¹å™¨å¯ä»¥æ ¹æ®astè¯­æ³•çš„ä¸åŒï¼Œä»è€Œè¿”å›ä¸åŒçš„è¯†åˆ«å™¨ï¼Œæœ‰ç­–ç•¥æ¨¡å¼çš„æ€æƒ³åœ¨é‡Œé¢ã€‚
æˆ‘ä»¬åœ¨è¿™æ–°æ·»ä¸€ä¸ªå¯ä»¥è¿”å›æˆ‘ä»¬ç¬¬ä¸€æ­¥åšçš„æ‰¹é‡æ’å…¥çš„è¯†åˆ«å™¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> SQLRecognizer <span class="hljs-title function_">getMultiInsertRecognizer</span><span class="hljs-params">(String sql, SQLStatement ast)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OracleMultiInsertRecognizer</span>(sql, ast);
}
</code></pre>
<h3 data-id="heading-11">æ”¯æŒæ­¥éª¤ä¸‰ï¼šDruidSQLRecognizerFactoryImpl</h3>
<p>å½“åœ¨druidè¯†åˆ«å™¨å·¥å‚ç±»è¯†åˆ«åˆ°ç›¸å…³çš„sqlStatementï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹åº”å…¥åº§ï¼Œä¸åŒçš„sqlStatementåˆ†é…ä¸åŒçš„è¯†åˆ«å™¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sqlStatement <span class="hljs-keyword">instanceof</span> OracleMultiInsertStatement) {
    <span class="hljs-type">OracleMultiInsertStatement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> (OracleMultiInsertStatement) sqlStatement;
    <span class="hljs-keyword">if</span> (stmt.getOption() == OracleMultiInsertStatement.Option.FIRST) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NotSupportYetException</span>(<span class="hljs-string">"INSERT FIRST not supported yet"</span>);
    }
    <span class="hljs-comment">// Use specialized methods to handle Oracle bulk inserts</span>
    recognizer =
            ((OracleOperateRecognizerHolder) recognizerHolder).getMultiInsertRecognizer(sql, sqlStatement);
}
</code></pre>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>é‚£ä¹ˆä»¥ä¸Šå°±æ˜¯seataå°†è¦æ”¯æŒçš„oracleæ‰¹é‡æ’å…¥çš„è§£æäº†ï¼Œåé¢æˆ‘å°†æ›´æ–°æ›´å¤šæœ‰å…³äºseataçš„è§£æï¼Œå–œæ¬¢çš„å¯ä»¥ç‚¹ä¸ªå…³æ³¨ï¼Œè°¢è°¢ä½ ä»¬</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>