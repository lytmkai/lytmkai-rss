<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä»€ä¹ˆæ˜¯è“ç»¿éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7577228831138381867</link>    <guid>https://juejin.cn/post/7577228831138381867</guid>    <pubDate>2025-11-27T14:07:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831138381867" data-draft-id="7577220965438357558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯è“ç»¿éƒ¨ç½²"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T14:07:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯è“ç»¿éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:07:49.000Z" title="Thu Nov 27 2025 14:07:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è“ç»¿éƒ¨ç½²æ˜¯ä¸€ç§ç”¨äºè½¯ä»¶å‘å¸ƒçš„é‡è¦ç­–ç•¥ï¼Œå®ƒé€šè¿‡ç»´æŠ¤ä¸¤å¥—å®Œå…¨ç‹¬ç«‹çš„ç¯å¢ƒï¼ˆè“è‰²å’Œç»¿è‰²ï¼‰æ¥å®ç°åº”ç”¨çš„å¹³æ»‘æ›´æ–°å’Œå¿«é€Ÿå›æ»šï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯æœ€å¤§é™åº¦åœ°å‡å°‘å‘å¸ƒè¿‡ç¨‹ä¸­çš„æœåŠ¡ä¸­æ–­æ—¶é—´ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©æ‚¨å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†è“ç»¿éƒ¨ç½²çš„æ ¸å¿ƒç‰¹ç‚¹ã€å·¥ä½œæµç¨‹ä»¥åŠå…³é”®çš„å®æ–½å‰æã€‚</p>

























<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>è“ç»¿éƒ¨ç½²çš„æ ¸å¿ƒè¦ç‚¹</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒç›®æ ‡</strong>â€‹</td><td>å®ç°<strong>é›¶åœæœºæ—¶é—´</strong>çš„åº”ç”¨æ›´æ–°å’Œ<strong>ç¬æ—¶å›æ»š</strong>ã€‚</td></tr><tr><td><strong>åŸºæœ¬æ¶æ„</strong>â€‹</td><td>åŒæ—¶å­˜åœ¨ä¸¤å¥—ç¯å¢ƒï¼š<strong>è“è‰² (Blue)</strong> â€‹ ä»£è¡¨æ—§ç‰ˆæœ¬ï¼Œ<strong>ç»¿è‰² (Green)</strong> â€‹ ä»£è¡¨æ–°ç‰ˆæœ¬ã€‚ä»»ä½•æ—¶å€™åªæœ‰ä¸€å¥—ç¯å¢ƒæ‰¿è½½å¤–éƒ¨æµé‡ã€‚</td></tr><tr><td><strong>å·¥ä½œæµç¨‹</strong>â€‹</td><td>1. åœ¨é—²ç½®ç¯å¢ƒéƒ¨ç½²æ–°ç‰ˆæœ¬ã€‚ 2. è¿›è¡Œå……åˆ†æµ‹è¯•ã€‚ 3. å°†æµé‡ä»å½“å‰ç”Ÿäº§ç¯å¢ƒ<strong>ä¸€æ¬¡æ€§å…¨éƒ¨åˆ‡æ¢</strong>åˆ°æ–°ç¯å¢ƒã€‚ 4. éªŒè¯æ— è¯¯åï¼Œä¸‹çº¿æ—§ç¯å¢ƒã€‚</td></tr><tr><td><strong>å…³é”®å®æ–½å‰æ</strong>â€‹</td><td>1. <strong>å†—ä½™çš„åŸºç¡€è®¾æ–½èµ„æº</strong>ï¼Œä»¥æ”¯æŒä¸¤å¥—ç¯å¢ƒã€‚ 2. <strong>ç²¾å‡†çš„æµé‡åˆ‡æ¢èƒ½åŠ›</strong>ï¼ˆå¦‚è´Ÿè½½å‡è¡¡å™¨ã€è·¯ç”±è§„åˆ™ã€DNSï¼‰ã€‚ 3. <strong>å¦¥å–„å¤„ç†æ•°æ®ä¸€è‡´æ€§é—®é¢˜</strong>ï¼ˆå¦‚æ•°æ®åº“schemaå˜æ›´ï¼‰ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ’¡ ç”ŸåŠ¨ç†è§£ï¼šæµ·è±šå¤§è„‘çš„å¯ç¤º</h3>
<p>ä¸€ä¸ªéå¸¸å½¢è±¡çš„æ¯”å–»æ˜¯<strong>æµ·è±šçš„å¤§è„‘</strong>ã€‚æµ·è±šä¸ºäº†èƒ½å¤ŸæŒç»­å‘¼å¸å’Œåº”å¯¹å±é™©ï¼Œå…¶å·¦è„‘å’Œå³è„‘å¯ä»¥äº¤æ›¿ä¼‘æ¯å’Œå·¥ä½œï¼šå½“ä¸€åŠå¤§è„‘è¿›å…¥ç¡çœ æ—¶ï¼Œå¦ä¸€åŠå¤§è„‘ä¿æŒæ¸…é†’ä»¥æ§åˆ¶èº«ä½“æ´»åŠ¨ã€‚è“ç»¿éƒ¨ç½²å°±å¦‚åŒè¿™ä¸ªè¿‡ç¨‹ï¼Œè“è‰²å’Œç»¿è‰²ç¯å¢ƒå°±åƒæµ·è±šçš„ä¸¤ä¸ªè„‘åŠçƒã€‚åœ¨å‘å¸ƒæ—¶ï¼Œè®©â€œæ´»è·ƒâ€çš„è„‘åŠçƒï¼ˆå½“å‰ç”Ÿäº§ç¯å¢ƒï¼‰ç»§ç»­æœåŠ¡ç”¨æˆ·ï¼Œè€Œè®©â€œä¼‘æ¯â€çš„è„‘åŠçƒï¼ˆæ–°ç‰ˆæœ¬ç¯å¢ƒï¼‰è¿›è¡Œæ›´æ–°å’Œå‡†å¤‡ã€‚ä¸€æ—¦å‡†å¤‡å°±ç»ªï¼Œä¸¤ä¸ªè„‘åŠçƒè¿›è¡Œâ€œæ§åˆ¶æƒâ€çš„ç¬é—´äº¤æ¥ï¼Œæ•´ä¸ªè¿‡ç¨‹å¹³æ»‘æ— ç¼ï¼Œå¤–ç•Œå‡ ä¹æ„ŸçŸ¥ä¸åˆ°ã€‚</p>
<h3 data-id="heading-1">ğŸ”„ æ ¸å¿ƒå·¥ä½œæµç¨‹</h3>
<p>ä¸€æ¬¡æ ‡å‡†çš„è“ç»¿éƒ¨ç½²é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹çŠ¶æ€</strong>ï¼šå‡è®¾è“è‰²ç¯å¢ƒæ˜¯å½“å‰æ­£åœ¨æœåŠ¡ç”¨æˆ·æµé‡çš„ç”Ÿäº§ç¯å¢ƒï¼ˆç‰ˆæœ¬v1ï¼‰ï¼Œç»¿è‰²ç¯å¢ƒå·²éƒ¨ç½²äº†ç›¸åŒç‰ˆæœ¬çš„v1åº”ç”¨ï¼Œä½†ä¸è“è‰²ç¯å¢ƒå®Œå…¨éš”ç¦»ï¼Œä¸æ¥æ”¶å¤–éƒ¨æµé‡ã€‚</p>
</li>
<li>
<p><strong>éƒ¨ç½²æ–°ç‰ˆæœ¬</strong>ï¼šåœ¨ç»¿è‰²ç¯å¢ƒä¸Šéƒ¨ç½²æ–°ç‰ˆæœ¬v2ï¼Œå¹¶è¿›è¡Œå……åˆ†çš„å†…éƒ¨æµ‹è¯•ã€‚åœ¨æ­¤æœŸé—´ï¼Œè“è‰²ç¯å¢ƒç»§ç»­ç¨³å®šæä¾›æœåŠ¡ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ã€‚</p>
</li>
<li>
<p><strong>æµé‡åˆ‡æ¢</strong>ï¼šå½“v2ç‰ˆæœ¬æµ‹è¯•é€šè¿‡åï¼Œé€šè¿‡ä¿®æ”¹è´Ÿè½½å‡è¡¡å™¨ã€è·¯ç”±è§„åˆ™æˆ–DNSé…ç½®ï¼Œå°†<strong>æ‰€æœ‰ç”¨æˆ·æµé‡ä¸€æ¬¡æ€§ã€ç¬é—´åœ°ä»è“è‰²ç¯å¢ƒåˆ‡æ¢åˆ°ç»¿è‰²ç¯å¢ƒ</strong>ã€‚</p>
</li>
<li>
<p><strong>è§‚å¯Ÿä¸å†³ç­–</strong>ï¼š</p>
<ul>
<li><strong>æˆåŠŸ</strong>ï¼šå¯†åˆ‡è§‚å¯Ÿç»¿è‰²ç¯å¢ƒï¼ˆv2ï¼‰çš„è¿è¡ŒçŠ¶æ€ã€‚è‹¥ä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™å‘å¸ƒæˆåŠŸã€‚è“è‰²ç¯å¢ƒï¼ˆv1ï¼‰å¯ä»¥ä¸‹çº¿ï¼Œå¹¶æˆä¸ºä¸‹ä¸€æ¬¡å‘å¸ƒçš„â€œç»¿è‰²â€ç¯å¢ƒã€‚</li>
<li><strong>å¤±è´¥</strong>ï¼šå¦‚æœv2ä¸Šçº¿åå‡ºç°ä¸¥é‡é—®é¢˜ï¼Œç«‹å³å°†æµé‡<strong>å¿«é€Ÿåˆ‡å›è“è‰²ç¯å¢ƒï¼ˆv1ï¼‰</strong> ã€‚ç”±äºè“è‰²ç¯å¢ƒä¸€ç›´å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå›æ»šè¿‡ç¨‹éå¸¸è¿…é€Ÿï¼Œèƒ½æœ€å¤§é™åº¦å‡å°‘æ•…éšœå½±å“ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">âš–ï¸ ç­–ç•¥ä¼˜ç¼ºç‚¹</h3>
<p><strong>ä¸»è¦ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>å‘å¸ƒé£é™©å¯æ§ï¼Œå›æ»šè¿…æ·</strong>ï¼šç”±äºæ–°æ—§ç‰ˆæœ¬ç³»ç»ŸåŒæ—¶åœ¨çº¿ï¼Œä¸€æ—¦æ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå›æ»šæ“ä½œä»…ä»…æ˜¯åˆ‡æ¢ä¸€ä¸‹æµé‡æŒ‡å‘ï¼Œé€šå¸¸åœ¨ç§’çº§å³å¯å®Œæˆï¼Œèƒ½æå¤§ç¼©çŸ­å¹³å‡æ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰ã€‚</li>
<li><strong>å‘å¸ƒè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜</strong>ï¼šç†è®ºä¸Šå¯ä»¥å®ç°<strong>é›¶åœæœºéƒ¨ç½²</strong>ï¼Œç”¨æˆ·ä¸ä¼šæ„Ÿå—åˆ°æœåŠ¡ä¸­æ–­ï¼Œä½“éªŒå¹³æ»‘ã€‚</li>
</ul>
<p><strong>ä¸»è¦æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>èµ„æºæˆæœ¬ç¿»å€</strong>ï¼šéœ€è¦ç»´æŠ¤ä¸¤å¥—åŠŸèƒ½å®Œæ•´çš„ç¯å¢ƒï¼Œå¯¹åŸºç¡€è®¾æ–½èµ„æºï¼ˆå¦‚æœåŠ¡å™¨ã€è®¡ç®—èµ„æºï¼‰çš„æ¶ˆè€—æ˜¯åŒå€çš„ã€‚</li>
<li><strong>æ–°ç‰ˆæœ¬æ•…éšœå½±å“èŒƒå›´å¤§</strong>ï¼šç”±äºæµé‡æ˜¯<strong>ä¸€æ¬¡æ€§å…¨é‡åˆ‡æ¢</strong>ï¼Œå¦‚æœæ–°ç‰ˆæœ¬å­˜åœ¨éšè—è¾ƒæ·±çš„ç¼ºé™·ï¼Œä¼šç¬é—´å½±å“æ‰€æœ‰ç”¨æˆ·ã€‚</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§æŒ‘æˆ˜</strong>ï¼šå¯¹äºæœ‰çŠ¶æ€æœåŠ¡ï¼Œç¡®ä¿ä¸¤ä¸ªç¯å¢ƒä¸­çš„æ•°æ®åº“ schema å˜æ›´ä»¥åŠæ•°æ®åŒæ­¥æ˜¯ä¸€ä¸ªå¤æ‚ä¸”å…³é”®çš„é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-3">ğŸ”€ ä¸å…¶ä»–éƒ¨ç½²ç­–ç•¥å¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£è“ç»¿éƒ¨ç½²ï¼Œå¯ä»¥å°†å…¶ä¸å¦å¤–ä¸¤ç§å¸¸è§çš„éƒ¨ç½²ç­–ç•¥è¿›è¡Œç®€å•å¯¹æ¯”ï¼š</p>




















<table><thead><tr><th>ç­–ç•¥</th><th>æ ¸å¿ƒæ€æƒ³</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é‡‘ä¸é›€å‘å¸ƒ / ç°åº¦å‘å¸ƒ</strong>â€‹</td><td>å°†<strong>å°‘é‡</strong>æµé‡ï¼ˆå¦‚5%ï¼‰å¯¼å…¥æ–°ç‰ˆæœ¬ï¼Œé€æ­¥å¢åŠ æ¯”ä¾‹ï¼Œå®ç°<strong>æ¸è¿›å¼</strong>ä¸Šçº¿ã€‚</td><td>å¸Œæœ›<strong>é€æ­¥é™ä½é£é™©</strong>ã€è§‚å¯ŸçœŸå®ç”¨æˆ·åé¦ˆçš„åœºæ™¯ã€‚å½±å“èŒƒå›´å°ï¼Œå‘å¸ƒå‘¨æœŸè¾ƒé•¿ã€‚</td></tr><tr><td><strong>A/B æµ‹è¯•</strong>â€‹</td><td>åŒæ—¶ä¸Šçº¿å¤šä¸ªä¸åŒç‰ˆæœ¬ï¼Œ<strong>æ ¹æ®ç”¨æˆ·å±æ€§ï¼ˆå¦‚åœ°åŒºã€è®¾å¤‡ç±»å‹ï¼‰åˆ†é…æµé‡</strong>ï¼Œç›®çš„æ˜¯è¿›è¡Œ<strong>æ•ˆæœå¯¹æ¯”å’Œç§‘å­¦å®éªŒ</strong>ã€‚</td><td>ä¸»è¦ç”¨äºæµ‹è¯•ä¸åŒUIã€ç®—æ³•æˆ–åŠŸèƒ½å¯¹ç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ï¼‰çš„å½±å“ï¼Œè€Œéå•çº¯çš„å‘å¸ƒã€‚</td></tr></tbody></table>
<p>ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ çš„é¦–è¦ç›®æ ‡æ˜¯<strong>å‘å¸ƒé€Ÿåº¦æœ€å¿«ã€å›æ»šæœ€è¿…é€Ÿ</strong>ï¼Œä¸”èƒ½å¤Ÿæ‰¿æ‹…é¢å¤–çš„èµ„æºæˆæœ¬ï¼Œé‚£ä¹ˆè“ç»¿éƒ¨ç½²æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å¦‚æœä½ çš„ä¸šåŠ¡æ›´çœ‹é‡<strong>é£é™©æ§åˆ¶</strong>ï¼Œå…è®¸è¾ƒé•¿çš„å‘å¸ƒå‘¨æœŸï¼Œé‚£ä¹ˆé‡‘ä¸é›€å‘å¸ƒå¯èƒ½æ›´åˆé€‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go Web å¼€å‘åˆ©å™¨ï¼šå¦‚ä½•è®©ä½ çš„ Gin æœåŠ¡æ‹¥æœ‰ Nginx èˆ¬çš„é™æ€æ–‡ä»¶å¤„ç†èƒ½åŠ›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577050643204259890</link>    <guid>https://juejin.cn/post/7577050643204259890</guid>    <pubDate>2025-11-27T14:07:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577050643204259890" data-draft-id="7577237961638445065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go Web å¼€å‘åˆ©å™¨ï¼šå¦‚ä½•è®©ä½ çš„ Gin æœåŠ¡æ‹¥æœ‰ Nginx èˆ¬çš„é™æ€æ–‡ä»¶å¤„ç†èƒ½åŠ›ï¼Ÿ"/> <meta itemprop="keywords" content="Go,Gin,Nginx"/> <meta itemprop="datePublished" content="2025-11-27T14:07:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goæœ‰å¼•åŠ›"/> <meta itemprop="url" content="https://juejin.cn/user/3866346347042247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go Web å¼€å‘åˆ©å™¨ï¼šå¦‚ä½•è®©ä½ çš„ Gin æœåŠ¡æ‹¥æœ‰ Nginx èˆ¬çš„é™æ€æ–‡ä»¶å¤„ç†èƒ½åŠ›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3866346347042247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goæœ‰å¼•åŠ›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:07:15.000Z" title="Thu Nov 27 2025 14:07:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åšè¿‡ Go Web å¼€å‘çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒGin æ¡†æ¶è™½ç„¶åœ¨ API è·¯ç”±å¤„ç†ä¸Šæ€§èƒ½å½ªæ‚ï¼Œä½†åŸç”Ÿçš„ <code>Static()</code> é™æ€æ–‡ä»¶æœåŠ¡åŠŸèƒ½ç›¸å¯¹åŸºç¡€ã€‚åœ¨å¾ˆå¤šç”Ÿäº§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä¹ æƒ¯æ€§åœ°åœ¨ Go æœåŠ¡å‰é¢æŒ¡ä¸€å±‚ Nginxï¼Œä¸“é—¨ç”¨æ¥å¤„ç†é™æ€èµ„æºï¼ˆJS/CSS/HTMLï¼‰å’Œç¼“å­˜æ§åˆ¶ã€‚</p>
<p>ä½†æœ‰äº›åœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚å†…éƒ¨å·¥å…·ã€å•ä½“åº”ç”¨ã€æˆ–è€…ä¸æƒ³ç»´æŠ¤å¤æ‚çš„ Sidecar å®¹å™¨ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ› Go æœåŠ¡æœ¬èº«å°±èƒ½åƒ Nginx ä¸€æ ·é«˜æ•ˆåœ°é€šè¿‡æœ¬åœ°è·¯å¾„ï¼ˆRootï¼‰æ‰˜ç®¡é™æ€æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜å¾—å…·å¤‡æµè§ˆå™¨ç¼“å­˜æ§åˆ¶ã€ç›®å½•æµè§ˆç”šè‡³æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ã€‚</p>
<p>ä»Šå¤©ä»‹ç»çš„ <strong>StaticFS</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ã€‚å®ƒæ˜¯ä¸“é—¨ä¸º Gin è®¾è®¡çš„é«˜æ€§èƒ½é™æ€æ–‡ä»¶æœåŠ¡ä¸­é—´ä»¶ï¼Œä¸ä»…æ”¯æŒç±»ä¼¼ Nginx çš„ <code>root</code> è·¯å¾„æ˜ å°„ï¼Œè¿˜å†…ç½®äº†æ–‡ä»¶ç´¢å¼•ã€ç¼“å­˜æ§åˆ¶å’Œå®‰å…¨è¿‡æ»¤ï¼Œç”šè‡³è‡ªå¸¦äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„æ–‡ä»¶æµè§ˆå™¨ UIã€‚</p>
<br/>
<h3 data-id="heading-1">æ ¸å¿ƒåŠŸèƒ½ä¸€ï¼šåƒ Nginx ä¸€æ ·æ‰˜ç®¡é™æ€èµ„æº</h3>
<p>åœ¨ Nginx ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é…ç½® <code>root</code> æŒ‡ä»¤å°† URL æ˜ å°„åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æŸä¸ªç›®å½•ã€‚<code>StaticFS</code> çš„ <code>staticfs.StaticFS</code> æ–¹æ³•æä¾›äº†ç±»ä¼¼çš„ä½“éªŒï¼Œå¹¶ä¸”åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šåšäº†å¾ˆå¤šâ€œéšå½¢â€å·¥ä½œã€‚</p>
<h4 data-id="heading-2">ä¸ºä»€ä¹ˆæ¯”åŸç”Ÿå¥½ç”¨ï¼Ÿ</h4>
<ol>
<li><strong>è‡ªåŠ¨å¤„ç† Index æ–‡ä»¶</strong>ï¼šè®¿é—®ç›®å½•æ—¶è‡ªåŠ¨å¯»æ‰¾ <code>index.html</code>ï¼Œå¯¹å•é¡µåº”ç”¨ï¼ˆSPAï¼‰éƒ¨ç½²éå¸¸å‹å¥½ã€‚</li>
<li><strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼šå®ƒä¸ä»…æœ‰æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å‡å°‘ç£ç›˜ I/Oï¼Œè¿˜è‡ªåŠ¨å¤„ç† HTTP <code>Cache-Control</code> å¤´ï¼Œå‡å°‘å®¢æˆ·ç«¯çš„é‡å¤è¯·æ±‚ã€‚</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šå¦‚æœä½ ä¸æƒ³æ”¹ä»£ç ï¼Œåªéœ€æ”¹æ”¹é…ç½®å‚æ•°å³å¯é€‚åº”ä¸åŒç¯å¢ƒã€‚</li>
</ol>
<br/>
<h4 data-id="heading-3">å®æˆ˜ä»£ç </h4>
<p>å‡è®¾ä½ çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼Œé™æ€èµ„æºéƒ½æ”¾åœ¨ <code>/var/www/dist</code> ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">.
â”œâ”€â”€ main.go
â””â”€â”€ /var/www/dist/  &lt;-- ä½ çš„å‰ç«¯æ„å»ºäº§ç‰©
    â”œâ”€â”€ index.html
    â””â”€â”€ css/
        â””â”€â”€ style.css
</code></pre>
<p>åœ¨ä»£ç ä¸­æ¥å…¥ StaticFS éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"github.com/gin-gonic/gin"</span>
    <span class="hljs-string">"github.com/go-dev-frame/sponge/pkg/gin/staticfs"</span> 
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    r := gin.Default()

    <span class="hljs-comment">// ã€å…³é”®ç‚¹ã€‘è¿™é‡Œå®ç°äº†ç±»ä¼¼ Nginx çš„ location /user/ { root /var/www/dist; } çš„æ•ˆæœ</span>
    <span class="hljs-comment">// è®¿é—® http://localhost:8080/user/ æ—¶ï¼Œå®é™…é€šè¿‡ StaticFS </span>
    <span class="hljs-comment">// æ˜ å°„åˆ°äº†æœ¬åœ°çš„ /var/www/dist ç›®å½•</span>
    staticfs.StaticFS(r, <span class="hljs-string">"/user/"</span>, <span class="hljs-string">"/var/www/dist"</span>,
        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰ä½ è¿˜å¯ä»¥é¡ºæ‰‹åŠ ä¸Šä¸€äº›è‡ªå®šä¹‰é…ç½®ï¼Œæ¯”å¦‚æŒ‡å®š index æ–‡ä»¶åç§°</span>
        staticfs.WithStaticFSIndexFile(<span class="hljs-string">"index.html"</span>),
        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰è®¾ç½®å¼ºç¼“å­˜æ—¶é—´</span>
        staticfs.WithCacheMaxAge(<span class="hljs-number">3600</span> * <span class="hljs-number">24</span>), 
    )

    log.Println(<span class="hljs-string">"Server is running on http://localhost:8080"</span>)
    r.Run(<span class="hljs-string">":8080"</span>)
}
</code></pre>
<p>å¯åŠ¨åï¼š</p>
<ul>
<li>è®¿é—® <code>/user/</code> -&gt; è‡ªåŠ¨å±•ç¤º <code>/var/www/dist/index.html</code></li>
<li>è®¿é—® <code>/user/css/style.css</code> -&gt; å±•ç¤º <code>/var/www/dist/css/style.css</code></li>
</ul>
<br/>
<h3 data-id="heading-4">æ ¸å¿ƒåŠŸèƒ½äºŒï¼šå¼€ç®±å³ç”¨çš„æ–‡ä»¶æµè§ˆå™¨</h3>
<p>é™¤äº†åšé™æ€æœåŠ¡å™¨ï¼ŒStaticFS çš„å¦ä¸€ä¸ªæ€æ‰‹é”æ˜¯<strong>ç›®å½•æµè§ˆï¼ˆListDirï¼‰</strong>ã€‚</p>
<p>åœ¨å¼€å‘è¿ç»´åå°æˆ–è€…æ—¥å¿—æŸ¥çœ‹æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€ä¸ªç•Œé¢æ¥æŸ¥çœ‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶åˆ—è¡¨ã€‚è‡ªå·±å†™å‰ç«¯é¡µé¢è§£æ JSON å¾ˆéº»çƒ¦ï¼ŒStaticFS ç›´æ¥æä¾›äº†ä¸€å¥—ç°æˆçš„ Web UI å’Œ JSON APIã€‚</p>
<br/>
<h4 data-id="heading-5">äº®ç‚¹ç‰¹æ€§</h4>
<ul>
<li><strong>åŒæ¨¡å¼æ”¯æŒ</strong>ï¼šæ—¢æœ‰ç»™å¼€å‘è€…çœ‹çš„ HTML ç•Œé¢ï¼Œä¹Ÿæœ‰ç»™ç¨‹åºè°ƒç”¨çš„ JSON APIã€‚</li>
<li><strong>å®‰å…¨ç¬¬ä¸€</strong>ï¼šè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼Œå®ƒé»˜è®¤å¼€å¯äº†å®‰å…¨è¿‡æ»¤ï¼Œè‡ªåŠ¨éšè— <code>.git</code>ã€<code>.env</code>ã€<code>/proc</code> ç­‰æ•æ„Ÿç›®å½•ï¼Œé˜²æ­¢å› ä¸ºé…ç½®å¤±è¯¯å¯¼è‡´æœåŠ¡å™¨ç§é’¥æˆ–é…ç½®æ³„æ¼ã€‚</li>
<li><strong>ä½“éªŒå®Œå–„</strong>ï¼šæ”¯æŒæŒ‰æ–‡ä»¶åã€å¤§å°ã€æ—¶é—´æ’åºï¼Œæ–‡ä»¶å¤šäº†è‡ªåŠ¨åˆ†é¡µï¼Œç”šè‡³æ”¯æŒæ–‡ä»¶ä¸‹è½½ã€‚</li>
</ul>
<br/>
<h4 data-id="heading-6">å¿«é€Ÿé›†æˆ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    r := gin.Default()

    <span class="hljs-comment">// ä¸€è¡Œä»£ç æ³¨å†Œç›®å½•æµè§ˆè·¯ç”±</span>
    <span class="hljs-comment">// é»˜è®¤ä¼šæ³¨å†Œ /dir/list (é¡µé¢) å’Œ /dir/list/api (æ¥å£)</span>
    staticfs.ListDir(r, 
        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰å¼€å¯ä¸‹è½½åŠŸèƒ½ï¼ˆé»˜è®¤å…³é—­ï¼‰</span>
        staticfs.WithListDirDownload(),
        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰è‡ªå®šä¹‰å¢åŠ ä¸€äº›ä¸æƒ³è®©äººçœ‹åˆ°çš„ç›®å½•</span>
        staticfs.WithListDirDirsFilter(<span class="hljs-string">"private_data"</span>, <span class="hljs-string">"backup"</span>),
        <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰è®¾ç½®ä¸­é—´ï¼Œä¾‹å¦‚é‰´æƒ</span>
        staticfs.WithListDirMiddlewares(auth))
    )

    log.Println(<span class="hljs-string">"æ–‡ä»¶æµè§ˆå™¨å·²å°±ç»ª: http://localhost:8080/dir/list?dir=/path/to/your/log"</span>)
    r.Run(<span class="hljs-string">":8080"</span>)
}
</code></pre>
<br/>
<h4 data-id="heading-7">æ€ä¹ˆç”¨ï¼Ÿ</h4>
<p>é›†æˆåï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨è®¿é—®ï¼š</p>
<ol>
<li>
<p><strong>Web ç•Œé¢</strong>ï¼š
<code>http://localhost:8080/dir/list?dir=/var/www/dist</code></p>
<ul>
<li>
<p>è¿™æ˜¯ä¸€ä¸ªæ¸²æŸ“å¥½çš„ HTML é¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>/var/www/dist</code> ä¸‹çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒåœ¨é¡µé¢ä¸ŠæŒ‰å±æ€§æ’åºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f09a0ec5eaf34c9291c76cf60e273dea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2_mnInlvJXlips=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764858554&amp;x-signature=iINm78hXkfFHMMOtofWYLjI6XyY%3D" alt="listdir.png" loading="lazy"/></p>
</li>
</ul>
</li>
<li>
<p><strong>API è°ƒç”¨</strong>ï¼š
<code>http://localhost:8080/dir/list/api?dir=/var/log</code></p>
<ul>
<li>è¿”å›æ ‡å‡†çš„ JSON ç»“æ„ï¼ŒåŒ…å«æ–‡ä»¶åˆ—è¡¨ã€åˆ†é¡µä¿¡æ¯ç­‰ï¼Œæ–¹ä¾¿ä½ é›†æˆåˆ°è‡ªå·±çš„ç®¡ç†åå°ä¸­ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–‡ä»¶ä¸‹è½½</strong>ï¼š
<code>http://localhost:8080/dir/file/download?path=/var/log/syslog</code></p>
<ul>
<li>æ³¨æ„ï¼šè¿™ä¸ªæ¥å£éœ€è¦æ˜¾å¼è°ƒç”¨ <code>WithListDirDownload()</code> æ‰ä¼šå¯ç”¨ï¼Œé˜²æ­¢ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ã€‚</li>
</ul>
</li>
</ol>
<br/>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>StaticFS ä¸ä»…ä»…æ˜¯ <code>http.FileServer</code> çš„ç®€å•å°è£…ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªä¸ºç”Ÿäº§ç¯å¢ƒæ‰“ç£¨è¿‡çš„é™æ€èµ„æºå¾®æœåŠ¡æ¨¡å—ã€‚</p>
<ul>
<li>å¦‚æœä½ åœ¨åš<strong>å•ä½“åº”ç”¨</strong>ï¼Œéœ€è¦é«˜æ•ˆæ‰˜ç®¡å‰ç«¯æ„å»ºäº§ç‰©ï¼Œå®ƒçš„ç¼“å­˜å’Œ Index æœºåˆ¶èƒ½å¸®ä½ çœå» Nginx çš„é…ç½®ã€‚</li>
<li>å¦‚æœä½ åœ¨åš<strong>å†…éƒ¨å·¥å…·</strong>ï¼Œéœ€è¦å¿«é€Ÿæš´éœ²æœåŠ¡å™¨æ—¥å¿—æˆ–æ–‡ä»¶ç›®å½•ï¼Œå®ƒçš„ <code>ListDir</code> åŠŸèƒ½èƒ½è®©ä½ å°‘å†™å‡ ç™¾è¡Œä»£ç ã€‚</li>
</ul>
<p>å¯¹äºå¸Œæœ›ç®€åŒ–éƒ¨ç½²æ¶æ„ã€å‡å°‘è¿ç»´ä¾èµ–çš„ Go å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·åº“ã€‚</p>
<br/>
<hr/>
<br/>
<p><code>staticfs</code>æ˜¯ Sponge çš„å†…ç½®åº“ï¼ŒSponge æ˜¯ä¸€æ¬¾å¼ºå¤§ä¸”æ˜“ç”¨çš„ Go å¼€å‘æ¡†æ¶ï¼Œå®ƒåŸºäº <strong>å®šä¹‰å³ä»£ç </strong> çš„æ ¸å¿ƒç†å¿µï¼Œè‡´åŠ›äºé€šè¿‡è‡ªåŠ¨ç”ŸæˆæŠ€æœ¯é‡å¡‘åç«¯å¼€å‘ä½“éªŒï¼Œè§£æ”¾ç”Ÿäº§åŠ›ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚é€šè¿‡è§£æ SQLã€Protobuf å’Œ JSON é…ç½®æ–‡ä»¶ç”Ÿæˆæ¨¡å—åŒ–æœåŠ¡ä»£ç ï¼Œå¼€å‘è€…å¯çµæ´»ç»„åˆè¿™äº›æ¨¡å—ï¼Œå¿«é€Ÿæ„å»ºä» <strong>å•ä½“åº”ç”¨</strong> åˆ° <strong>å¾®æœåŠ¡é›†ç¾¤</strong>ï¼ŒåŒ…æ‹¬ RESTful APIã€gRPCã€HTTP+gRPCã€gRPC Gatewayç­‰ã€‚</p>
<p>Sponge Github åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgo-dev-frame%2Fsponge" target="_blank" title="https://github.com/go-dev-frame/sponge" ref="nofollow noopener noreferrer">github.com/go-dev-framâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å¤„ç†è“ç»¿éƒ¨ç½²ä¸­çš„æ•°æ®è¿ç§»å’Œæ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577198193216225323</link>    <guid>https://juejin.cn/post/7577198193216225323</guid>    <pubDate>2025-11-27T14:11:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577198193216225323" data-draft-id="7577268271213887524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å¤„ç†è“ç»¿éƒ¨ç½²ä¸­çš„æ•°æ®è¿ç§»å’Œæ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T14:11:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å¤„ç†è“ç»¿éƒ¨ç½²ä¸­çš„æ•°æ®è¿ç§»å’Œæ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:11:47.000Z" title="Thu Nov 27 2025 14:11:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è“ç»¿éƒ¨ç½²ä¸­ï¼Œä¼˜é›…åœ°å¤„ç†æ•°æ®è¿ç§»å’Œæ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§ç¡®å®æ˜¯å®ç°<strong>é›¶åœæœºå‘å¸ƒ</strong>å’Œ<strong>å¿«é€Ÿå›æ»š</strong>çš„å…³é”®ã€‚ä¸‹é¢æˆ‘å°†ä¸ºæ‚¨æ¢³ç†ä¸€å¥—æ¸…æ™°ã€å¯è½åœ°çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-0">ğŸ’¡ æ ¸å¿ƒåŸåˆ™ï¼šå‘å‰å…¼å®¹ä¸è°¨æ…å˜æ›´</h3>
<p>å¤„ç†æ•°æ®åº“å˜æ›´çš„é¦–è¦åŸåˆ™æ˜¯<strong>å‘å‰å…¼å®¹</strong>ã€‚è¿™æ„å‘³ç€æ–°ç‰ˆæœ¬çš„åº”ç”¨ä»£ç å¿…é¡»èƒ½å¤Ÿä¸<strong>æ—§ç‰ˆæœ¬çš„æ•°æ®åº“SchemaååŒå·¥ä½œ</strong>ï¼Œåä¹‹ï¼Œæ—§ç‰ˆæœ¬çš„åº”ç”¨åœ¨å›æ»šæ—¶ï¼Œæœ€å¥½ä¹Ÿèƒ½è¯»å–æ–°Schemaï¼ˆè‡³å°‘ä¸èƒ½æŠ¥é”™ï¼‰ã€‚</p>
<p><strong>å…³é”®ç­–ç•¥æ˜¯â€œæ‰©å±•è€Œéä¿®æ”¹â€</strong> ï¼š</p>
<ul>
<li><strong>æ·»åŠ è€Œéé‡å‘½å</strong>ï¼šéœ€è¦æ–°å­—æ®µæ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ·»åŠ æ–°åˆ—ï¼Œè€Œä¸æ˜¯ç›´æ¥é‡å‘½åæˆ–åˆ é™¤æ—§åˆ—ã€‚</li>
<li><strong>æ¸è¿›å¼å¼ƒç”¨</strong>ï¼šå¦‚æœå¿…é¡»åˆ é™¤æŸä¸ªå­—æ®µæˆ–è¡¨ï¼Œåº”å…ˆéƒ¨ç½²ä¸€ä¸ªä¸å†å†™å…¥æ—§å­—æ®µçš„æ–°ç‰ˆæœ¬åº”ç”¨ï¼Œåœ¨ç¡®è®¤æ—§å­—æ®µä¸å†è¢«ä½¿ç”¨åï¼Œå†é€šè¿‡åç»­çš„éƒ¨ç½²å°†å…¶ç§»é™¤ã€‚</li>
</ul>
<p>ä¸ºäº†å¸®åŠ©ä½ å¿«é€Ÿç†è§£ä¸åŒåœºæ™¯ä¸‹çš„ç­–ç•¥é€‰æ‹©ï¼Œå¯ä»¥å‚è€ƒä¸‹è¡¨ï¼š</p>





























<table><thead><tr><th>ç­–ç•¥</th><th>æ ¸å¿ƒæœºåˆ¶</th><th>æœ€ä½³é€‚ç”¨åœºæ™¯</th><th>å…³é”®ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>å‘å‰/å‘åå…¼å®¹</strong>â€‹</td><td>è®¾è®¡æ•°æ®åº“å˜æ›´æ—¶ï¼Œç¡®ä¿æ–°æ—§åº”ç”¨ç‰ˆæœ¬éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚</td><td>æ‰€æœ‰è“ç»¿éƒ¨ç½²ï¼Œå°¤å…¶æ˜¯æ— æ³•æ¥å—æ•°æ®ä¸¢å¤±çš„åœºæ™¯ã€‚</td><td><strong>å›æ»šå®‰å…¨</strong>ï¼Œæ˜¯å®æ–½è“ç»¿éƒ¨ç½²çš„åŸºçŸ³ã€‚</td></tr><tr><td><strong>åŒå†™æ¨¡å¼</strong>â€‹</td><td>åº”ç”¨åŒæ—¶å‘æ–°æ—§ä¸¤å¥—æ•°æ®æºå†™å…¥æ•°æ®ï¼Œä¿æŒå®æ—¶åŒæ­¥ã€‚</td><td>æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œä¸”éœ€è¦å®ç°æ— ç¼ã€é€æ˜çš„åˆ‡æ¢ã€‚</td><td>æ•°æ®åŒæ­¥<strong>è¿‘ä¹å®æ—¶</strong>ï¼Œåˆ‡æ¢è¿‡ç¨‹<strong>å¹³æ»‘</strong>ã€‚</td></tr><tr><td><strong>å¢é‡è¿ç§»</strong>â€‹</td><td>å…ˆå…¨é‡å¤åˆ¶åŸºç¡€æ•°æ®ï¼Œå†æŒç»­åŒæ­¥å˜æ›´ï¼ˆé€šå¸¸åŸºäºæ•°æ®åº“æ—¥å¿—å¦‚binlogï¼‰ã€‚</td><td>æ•°æ®é‡å·¨å¤§ï¼Œæ— æ³•åœ¨çŸ­æ—¶é—´å†…å®Œæˆå…¨é‡æ‹·è´çš„åœºæ™¯ã€‚</td><td><strong>å¯¹æºåº“å½±å“å°</strong>ï¼Œå¯æ§åˆ¶è¿ç§»èŠ‚å¥ã€‚</td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ› ï¸ å®æ–½è·¯çº¿å›¾ï¼šåˆ†é˜¶æ®µæ¨è¿›</h3>
<p>åœ¨å®è·µä¸­ï¼Œæ¨èé‡‡ç”¨ä»¥ä¸‹æ¸…æ™°çš„æ­¥éª¤æ¥ä¿éšœè¿ç§»é¡ºåˆ©è¿›è¡Œï¼š</p>
<ol>
<li>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼šSchemaå˜æ›´ä¸æ•°æ®åŒæ­¥</strong></p>
<ul>
<li>é¦–å…ˆï¼Œåœ¨ç›®æ ‡æ•°æ®åº“ï¼ˆç»¿ç¯å¢ƒï¼‰æ‰§è¡Œæ‰€æœ‰<strong>å‘å‰å…¼å®¹</strong>çš„Schemaå˜æ›´ï¼ˆä¾‹å¦‚ï¼Œæ·»åŠ æ–°åˆ—ã€æ–°è¡¨ï¼‰ã€‚æ­¤æ—¶æ—§ç‰ˆæœ¬åº”ç”¨å¯¹æ­¤æ— æ„ŸçŸ¥ã€‚</li>
<li>æ ¹æ®æ•°æ®é‡å’Œä¸šåŠ¡å®¹å¿åº¦ï¼Œé€‰æ‹©ä¸Šè¡¨ä¸­çš„<strong>æ•°æ®åŒæ­¥ç­–ç•¥</strong>ï¼ˆå¦‚å¢é‡è¿ç§»æˆ–åŒå†™ï¼‰ï¼Œå¼€å§‹å°†è“ç¯å¢ƒçš„æ•°æ®åŒæ­¥åˆ°ç»¿ç¯å¢ƒï¼Œå¹¶æŒç»­éªŒè¯ä¸€è‡´æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼šéƒ¨ç½²æ–°åº”ç”¨ä¸å……åˆ†éªŒè¯</strong></p>
<ul>
<li>å°†æ–°ç‰ˆæœ¬åº”ç”¨ï¼ˆå·²å…·å¤‡è¯»å–æ–°Schemaèƒ½åŠ›ï¼‰éƒ¨ç½²åˆ°ç»¿ç¯å¢ƒï¼Œä½†<strong>ä¸æ¥å…¥ç”Ÿäº§æµé‡</strong>ã€‚</li>
<li>åœ¨ç»¿ç¯å¢ƒå†…éƒ¨è¿›è¡Œå½»åº•çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬åŠŸèƒ½éªŒè¯ã€æ€§èƒ½å‹æµ‹å’Œæ•°æ®ä¸€è‡´æ€§æ ¸å¯¹ã€‚è¿™æ˜¯åˆ‡æ¢å‰æœ€é‡è¦çš„è´¨é‡å…³å¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰é˜¶æ®µï¼šæµé‡åˆ‡æ¢ä¸åŒå†™ä¿éšœ</strong></p>
<ul>
<li>é€šè¿‡è´Ÿè½½å‡è¡¡å™¨å°†ç”Ÿäº§æµé‡ä»è“ç¯å¢ƒåˆ‡æ¢åˆ°ç»¿ç¯å¢ƒã€‚</li>
<li>åœ¨åˆ‡æ¢åçš„<strong>å…³é”®è§‚å¯ŸæœŸ</strong>å†…ï¼Œå»ºè®®å¯ç”¨<strong>åŒå†™æ¨¡å¼</strong>ï¼Œå³ç»¿ç¯å¢ƒåœ¨å†™å…¥è‡ªèº«æ•°æ®åº“çš„åŒæ—¶ï¼Œä¹Ÿå‘è“ç¯å¢ƒæ•°æ®åº“å†™å…¥ã€‚è¿™ä¸ºç§’çº§å›æ»šæä¾›äº†åšå®çš„æ•°æ®åŸºç¡€ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬å››é˜¶æ®µï¼šç¨³å®šè¿è¡Œä¸æ¸…ç†</strong></p>
<ul>
<li>ç¡®è®¤ç»¿ç¯å¢ƒç¨³å®šè¿è¡Œä¸€æ®µæ—¶é—´åï¼ˆå¦‚24-48å°æ—¶ï¼‰ï¼Œå¯åœæ­¢åŒå†™ï¼Œå¹¶æ‹©æœºä¸‹çº¿è“ç¯å¢ƒåŠæ—§çš„æ•°æ®åº“Schemaã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">âš™ï¸ æ¨èå·¥å…·ä¸é«˜é˜¶å®è·µ</h3>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚é€‰æ‹©åˆé€‚çš„å·¥å…·èƒ½äº‹åŠåŠŸå€ã€‚</p>
<ul>
<li><strong>æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶å·¥å…·</strong>ï¼šä½¿ç”¨åƒ <strong>Liquibase</strong>â€‹ æˆ– <strong>Flyway</strong>â€‹ è¿™æ ·çš„å·¥å…·æ¥ç®¡ç†Schemaå˜æ›´è„šæœ¬ã€‚å®ƒä»¬èƒ½ç¡®ä¿æ¯æ¬¡å˜æ›´éƒ½æ˜¯<strong>å¹‚ç­‰ä¸”å¯è¿½æº¯çš„</strong>ï¼Œå¹¶è‡ªåŠ¨è®°å½•å½“å‰Schemaçš„ç‰ˆæœ¬ï¼Œæ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒé—´ä¿æŒä¸€è‡´æ€§ã€‚</li>
<li><strong>æ•°æ®æ¯”å¯¹ä¸æ ¡éªŒ</strong>ï¼šåˆ‡æ¢å‰åï¼Œä½¿ç”¨æ•°æ®å¯¹æ¯”å·¥å…·ï¼ˆå¦‚Perconaçš„<code>pt-table-checksum</code>æˆ–è‡ªå®šä¹‰æ ¡éªŒè„šæœ¬ï¼‰å¯¹è“ç»¿ç¯å¢ƒçš„æ•°æ®è¿›è¡Œ<strong>ä¸€è‡´æ€§æ ¡éªŒ</strong>ï¼Œè¿™æ˜¯ä¿¡å¿ƒçš„æ¥æºã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§å»ºè®¾</strong>ï¼šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>ç›‘æ§å’Œæ—¥å¿—</strong>è‡³å…³é‡è¦ã€‚ä½ éœ€è¦æ¸…æ™°åœ°ç›‘æ§ä¸¤ä¸ªç¯å¢ƒçš„åº”ç”¨æ€§èƒ½æŒ‡æ ‡ï¼ˆå¦‚QPSã€å»¶è¿Ÿã€é”™è¯¯ç‡ï¼‰å’Œæ•°æ®åº“å…³é”®æŒ‡æ ‡ï¼ˆå¦‚è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢ï¼‰ã€‚ä¸€æ—¦åœ¨åˆ‡æ¢åå‘ç°ç»¿ç¯å¢ƒæŒ‡æ ‡å¼‚å¸¸ï¼Œåº”<strong>ç«‹å³è§¦å‘å›æ»šæµç¨‹</strong>ã€‚</li>
</ul>
<h3 data-id="heading-3">ğŸ’ æ€»ç»“ä¸æ ¸å¿ƒå»ºè®®</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒæˆåŠŸå¤„ç†è“ç»¿éƒ¨ç½²ä¸­çš„æ•°æ®é—®é¢˜ï¼Œæ ¸å¿ƒåœ¨äº<strong>ä¸¥å®ˆå‘å‰å…¼å®¹çš„å˜æ›´çºªå¾‹ã€é€‰æ‹©é€‚åˆä¸šåŠ¡çš„æ•°æ®åŒæ­¥ç­–ç•¥ï¼Œå¹¶ä¾æ‰˜è‡ªåŠ¨åŒ–å·¥å…·å’Œå¯è§‚æµ‹æ€§æ¥ä¿éšœæµç¨‹</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯é‡‘ä¸é›€/ç°åº¦å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7577278843233255467</link>    <guid>https://juejin.cn/post/7577278843233255467</guid>    <pubDate>2025-11-27T14:14:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577278843233255467" data-draft-id="7577198193216241707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯é‡‘ä¸é›€/ç°åº¦å‘å¸ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T14:14:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯é‡‘ä¸é›€/ç°åº¦å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:14:06.000Z" title="Thu Nov 27 2025 14:14:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é‡‘ä¸é›€å‘å¸ƒï¼ˆCanary Releaseï¼‰ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸ºç°åº¦å‘å¸ƒï¼Œæ˜¯ä¸€ç§æ—¨åœ¨<strong>å¹³æ»‘ã€å¯æ§åœ°æ¨å‡ºæ–°ç‰ˆæœ¬è½¯ä»¶</strong>çš„éƒ¨ç½²ç­–ç•¥ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ä¸ç«‹å³å°†æ–°ç‰ˆæœ¬å®Œå…¨æ›¿æ¢æ—§ç‰ˆæœ¬ï¼Œè€Œæ˜¯å…ˆè®©ä¸€å°éƒ¨åˆ†ç”¨æˆ·æµé‡ï¼ˆä¾‹å¦‚5%ï¼‰ä½¿ç”¨æ–°ç‰ˆæœ¬ã€‚</strong> â€‹ ç»è¿‡è§‚å¯Ÿï¼Œç¡®è®¤æ–°ç‰ˆæœ¬è¿è¡Œç¨³å®šã€æ— é‡å¤§é—®é¢˜åï¼Œå†é€æ­¥å¢åŠ å¯¼æµæ¯”ä¾‹ï¼ˆä¾‹å¦‚20% -&gt; 50% -&gt; 100%ï¼‰ï¼Œç›´è‡³æ‰€æœ‰ç”¨æˆ·éƒ½åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ ã€‚</p>
<p>è¿™ç§ç­–ç•¥çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼Œå®ƒèƒ½å°†æ–°ç‰ˆæœ¬å¯èƒ½å­˜åœ¨çš„é£é™©æ§åˆ¶åœ¨æå°çš„èŒƒå›´å†…ã€‚å¦‚æœæ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šï¼Œåªå½±å“å°‘æ•°ç”¨æˆ·ï¼Œä»è€Œä¿éšœäº†æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šæ€§ ã€‚å…¶å¾—åæ¥æºäºä¸€ä¸ªå…¸æ•…ï¼šçŸ¿å·¥ä¸‹äº•æ—¶ä¼šæºå¸¦å¯¹ç“¦æ–¯ç­‰æœ‰æ¯’æ°”ä½“æä¸ºæ•æ„Ÿçš„é‡‘ä¸é›€ã€‚å¦‚æœé‡‘ä¸é›€å‡ºç°å¼‚å¸¸ï¼ŒçŸ¿å·¥ä¾¿èƒ½æå‰æ„ŸçŸ¥å±é™©å¹¶æ’¤ç¦»ã€‚åœ¨è¿™é‡Œï¼Œæ–°ç‰ˆæœ¬åº”ç”¨å°±å¦‚åŒâ€œé‡‘ä¸é›€â€ï¼Œé€šè¿‡ä¸€å°éƒ¨åˆ†æµé‡å…ˆè¡Œæµ‹è¯•ï¼Œä¸ºæ•´ä¸ªç³»ç»Ÿæ¢æ˜é£é™© ã€‚</p>
<h3 data-id="heading-0">æ ¸å¿ƒå·¥ä½œæµç¨‹</h3>
<p>ä¸€æ¬¡æ ‡å‡†çš„é‡‘ä¸é›€å‘å¸ƒé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ ï¼š</p>
<ol>
<li>
<p><strong>éƒ¨ç½²æ–°ç‰ˆæœ¬</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²æ–°ç‰ˆæœ¬çš„åº”ç”¨å®ä¾‹ï¼ˆå¦‚V2ç‰ˆæœ¬ï¼‰ï¼Œç¡®ä¿å…¶ä¸æ—§ç‰ˆæœ¬ï¼ˆV1ç‰ˆæœ¬ï¼‰åŒæ—¶åœ¨çº¿è¿è¡Œã€‚</p>
</li>
<li>
<p><strong>å¼•å…¥å°éƒ¨åˆ†æµé‡</strong>ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼ˆå¦‚è´Ÿè½½å‡è¡¡å™¨æˆ–æœåŠ¡ç½‘æ ¼ï¼‰ï¼Œå°†æ€»ç”¨æˆ·æµé‡ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼ˆå¦‚5%ï¼‰å®šå‘åˆ°V2ç‰ˆæœ¬ï¼Œå…¶ä½™ç»å¤§éƒ¨åˆ†æµé‡ï¼ˆ95%ï¼‰ä»ç”±V1ç‰ˆæœ¬å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>è§‚å¯Ÿä¸ç›‘æ§</strong>ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚éœ€è¦å¯†åˆ‡ç›‘æ§æ–°ç‰ˆæœ¬çš„å„é¡¹å…³é”®æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡æŒ‡æ ‡</strong>ï¼šå¦‚è¯·æ±‚é”™è¯¯ç‡ã€å“åº”å»¶è¿Ÿã€äº¤æ˜“æˆåŠŸç‡ç­‰ã€‚</li>
<li><strong>ç³»ç»ŸæŒ‡æ ‡</strong>ï¼šå¦‚CPU/å†…å­˜ä½¿ç”¨ç‡ã€åƒåœ¾å›æ”¶æƒ…å†µç­‰ã€‚</li>
<li><strong>ä¸šåŠ¡åé¦ˆ</strong>ï¼šå…³æ³¨è¿™å°‘é‡ç”¨æˆ·çš„ç›´æ¥åé¦ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>å†³ç­–ä¸ä¸‹ä¸€æ­¥è¡ŒåŠ¨</strong>ï¼š</p>
<ul>
<li><strong>å¦‚æœéªŒè¯é€šè¿‡</strong>ï¼šé€æ­¥æ‰©å¤§æ–°ç‰ˆæœ¬çš„æµé‡æ¯”ä¾‹ï¼ˆå¦‚ä»5%æå‡è‡³20%ï¼Œå†åˆ°50%ï¼‰ï¼Œæ¯ä¸€æ­¥éƒ½é‡å¤æ­¥éª¤3çš„è§‚å¯Ÿè¿‡ç¨‹ï¼Œç›´è‡³100%æµé‡åˆ‡è‡³æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong>å¦‚æœå‘ç°é—®é¢˜</strong>ï¼šç«‹å³å°†æµå‘æ–°ç‰ˆæœ¬çš„æµé‡åˆ‡å›æ—§ç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿå›æ»šï¼Œå°†å½±å“é™è‡³æœ€ä½ã€‚éšåæ’æŸ¥å¹¶ä¿®å¤æ–°ç‰ˆæœ¬çš„é—®é¢˜ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">ğŸ› ï¸ ä¸»è¦å®ç°æ–¹å¼</h3>
<p>åœ¨å®è·µä¸­ï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ§åˆ¶æµé‡ï¼Œå®ç°é‡‘ä¸é›€å‘å¸ƒ ï¼š</p>




















<table><thead><tr><th>æ–¹å¼</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æŒ‰æµé‡æ¯”ä¾‹</strong>â€‹</td><td>æ ¹æ®é¢„è®¾çš„ç™¾åˆ†æ¯”ï¼ˆå¦‚5%çš„è¯·æ±‚ï¼‰å°†æµé‡éšæœºåˆ†å‘åˆ°æ–°ç‰ˆæœ¬ã€‚</td><td>é€‚åˆåšé€šç”¨çš„æ€§èƒ½å’Œé«˜å¯ç”¨æ€§æµ‹è¯•ï¼Œæ“ä½œç®€å•ã€‚</td></tr><tr><td><strong>æŒ‰å†…å®¹è·¯ç”±</strong>â€‹</td><td>æ ¹æ®è¯·æ±‚çš„ç‰¹å®šç‰¹å¾ï¼ˆå¦‚HTTPå¤´éƒ¨ä¿¡æ¯ã€ç”¨æˆ·IDã€åœ°ç†ä½ç½®ã€è®¾å¤‡ç±»å‹ç­‰ï¼‰å°†åŒ¹é…è§„åˆ™çš„æµé‡å¯¼å‘æ–°ç‰ˆæœ¬ ã€‚</td><td>é€‚åˆè¿›è¡ŒA/Bæµ‹è¯•æˆ–é¢å‘ç‰¹å®šç”¨æˆ·ç¾¤ä½“ï¼ˆå¦‚å†…éƒ¨å‘˜å·¥ã€æµ‹è¯•ç”¨æˆ·ï¼‰è¿›è¡Œç°åº¦ã€‚</td></tr></tbody></table>
<p>ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸‹çš„é‡‘ä¸é›€å‘å¸ƒé€šå¸¸ä¼šå€ŸåŠ©<strong>æœåŠ¡ç½‘æ ¼ï¼ˆå¦‚Istioã€Apache APISIXï¼‰</strong> â€‹ æˆ–<strong>ä¸“ç”¨éƒ¨ç½²å·¥å…·ï¼ˆå¦‚Argo Rolloutsã€Flaggerï¼‰</strong> â€‹ æ¥å®ç°ï¼Œå®ƒä»¬æä¾›äº†ç²¾ç»†åŒ–çš„æµé‡æ§åˆ¶å’Œä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡ï¼Œä½¿å‘å¸ƒè¿‡ç¨‹æ›´åŠ è‡ªåŠ¨åŒ–å’Œå¯é  ã€‚</p>
<h3 data-id="heading-2">âš–ï¸ ç­–ç•¥å¯¹æ¯”ä¸é€‰æ‹©</h3>
<p>ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£é‡‘ä¸é›€å‘å¸ƒï¼Œä¸‹è¡¨å°†å…¶ä¸å¦å¤–å‡ ç§å¸¸è§çš„å‘å¸ƒç­–ç•¥è¿›è¡Œäº†å¯¹æ¯” ï¼š</p>





























<table><thead><tr><th>ç­–ç•¥</th><th>æ ¸å¿ƒæ€æƒ³</th><th>ä¼˜åŠ¿</th><th>æŒ‘æˆ˜</th></tr></thead><tbody><tr><td><strong>é‡‘ä¸é›€å‘å¸ƒ</strong>â€‹</td><td>é€æ­¥å°†ç”¨æˆ·æµé‡ä»æ—§ç‰ˆæœ¬è¿ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚</td><td><strong>é£é™©å¯æ§</strong>ï¼Œå›æ»šé€Ÿåº¦å¿«ï¼Œèµ„æºå ç”¨ç›¸å¯¹è¾ƒå°‘ï¼ˆæ— éœ€åŒæ—¶ç»´æŠ¤ä¸¤å¥—å®Œæ•´ç¯å¢ƒï¼‰ã€‚</td><td>å‘å¸ƒå‘¨æœŸè¾ƒé•¿ï¼Œæµé‡è°ƒåº¦å’Œç›‘æ§ä½“ç³»å¤æ‚ã€‚</td></tr><tr><td><strong>è“ç»¿éƒ¨ç½²</strong>â€‹</td><td>åŒæ—¶éƒ¨ç½²å®Œæ•´çš„æ–°ï¼ˆç»¿ï¼‰æ—§ï¼ˆè“ï¼‰ä¸¤å¥—ç‰ˆæœ¬ï¼Œé€šè¿‡åˆ‡æ¢æµé‡å…¥å£ä¸€æ¬¡æ€§å®Œæˆå‘å¸ƒ ã€‚</td><td><strong>å‘å¸ƒå’Œå›æ»šæå…¶è¿…é€Ÿ</strong>ï¼Œç‰ˆæœ¬çŠ¶æ€æ˜ç¡®ã€‚</td><td><strong>èµ„æºæˆæœ¬é«˜</strong>ï¼ˆéœ€è¦ä¸¤å¥—ç¯å¢ƒï¼‰ï¼Œå¤„ç†æ•°æ®åº“å…¼å®¹æ€§ç­‰æœ‰çŠ¶æ€æœåŠ¡æŒ‘æˆ˜å¤§ã€‚</td></tr><tr><td><strong>æ»šåŠ¨å‘å¸ƒ</strong>â€‹</td><td>é€æ­¥åœæ­¢æ—§ç‰ˆæœ¬å®ä¾‹å¹¶å¯åŠ¨æ–°ç‰ˆæœ¬å®ä¾‹ï¼ˆKubernetesçš„Deploymenté»˜è®¤ç­–ç•¥ï¼‰ã€‚</td><td><strong>èŠ‚çº¦èµ„æº</strong>ï¼Œå®ç°ç®€å•ã€‚</td><td>å‘å¸ƒè¿‡ç¨‹ä¸­ç‰ˆæœ¬æ··æ‚ï¼Œä¸æ˜“å›æ»šï¼Œç¼ºä¹æ˜ç¡®çš„â€œç¨³å®šâ€åŸºå‡†ç¯å¢ƒ ã€‚</td></tr></tbody></table>
<h3 data-id="heading-3">ğŸ’ æ€»ç»“</h3>
<p>ç®€å•æ¥è¯´ï¼Œé‡‘ä¸é›€å‘å¸ƒå°±åƒæ˜¯ä¸€æ¬¡è°¨æ…çš„â€œè·¯æµ‹â€ã€‚å®ƒä¸æ˜¯æŠŠæ–°è½¦ç›´æ¥æ¨å‘å¸‚åœºï¼Œè€Œæ˜¯å…ˆè®©å°‘æ•°ç»éªŒä¸°å¯Œçš„å¸æœºåœ¨çœŸå®è·¯å†µä¸‹è¯•é©¾ï¼Œæ”¶é›†æ•°æ®ã€å‘ç°æ½œåœ¨é—®é¢˜å¹¶ä¼˜åŒ–ï¼Œç¡®è®¤æ€§èƒ½ç¨³å®šå¯é åï¼Œå†å¼€å§‹å¤§è§„æ¨¡é‡äº§å’Œäº¤ä»˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹CSSç¯‡ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7577203946063626280</link>    <guid>https://juejin.cn/post/7577203946063626280</guid>    <pubDate>2025-11-27T14:21:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577203946063626280" data-draft-id="7577203946063609896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹CSSç¯‡ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,CSS"/> <meta itemprop="datePublished" content="2025-11-27T14:21:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯é«˜é¢‘é¢è¯•é¢˜ä¹‹CSSç¯‡ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:21:33.000Z" title="Thu Nov 27 2025 14:21:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€å®ç°å‚ç›´å±…ä¸­çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2>
<ul>
<li><strong>line-height</strong>ï¼šæ–‡æœ¬å¯ä»¥ä½¿ç”¨ <code>line-height</code> ç­‰äºå®¹å™¨é«˜åº¦ã€‚</li>
<li><strong>Flex å¸ƒå±€ï¼š</strong>ï¼ˆ<code>display: flex; align-items: center;</code>ï¼‰ã€‚</li>
<li><strong>absolute + transform æˆ–è€… absolute + è´Ÿmargin</strong>ï¼š<code>position: absolute; top: 50%; transform: translateY(-50%);</code>æˆ–è€… <code>position: absolute; top: 50%; margin-top: -50px;ï¼ˆå®¹å™¨é«˜åº¦ä¸º 100pxï¼‰</code>ã€‚</li>
<li><strong>absolute + margin: auto</strong>ï¼š<code>position: absolute; inset: 0; margin: auto</code>ã€‚</li>
<li><strong>Grid å¸ƒå±€</strong>ï¼š<code>display: grid; place-items: center;</code>ã€‚</li>
<li><strong>table å¸ƒå±€</strong>ï¼š<code>display: table-cell;vertical-align: middle;</code>ã€‚</li>
</ul>
<h2 data-id="heading-1">2ã€é€‰æ‹©å™¨æƒé‡å’Œæ ·å¼ä¼˜å…ˆçº§æ˜¯æ€æ ·çš„ï¼Ÿ</h2>
<p><strong>CSS å„é€‰æ‹©å™¨æƒé‡ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š</strong></p>




























































<table><thead><tr><th>é€‰æ‹©å™¨åç§°</th><th>é€‰æ‹©å™¨æ ¼å¼</th><th>æƒé‡</th></tr></thead><tbody><tr><td>idé€‰æ‹©å™¨</td><td>#id</td><td>100</td></tr><tr><td>ç±»é€‰æ‹©å™¨</td><td>.classname</td><td>10</td></tr><tr><td>å±æ€§é€‰æ‹©å™¨</td><td>[attr=value]</td><td>10</td></tr><tr><td>ä¼ªç±»é€‰æ‹©å™¨</td><td>li:first-child</td><td>10</td></tr><tr><td>æ ‡ç­¾é€‰æ‹©å™¨</td><td>a</td><td>1</td></tr><tr><td>ä¼ªå…ƒç´ é€‰æ‹©å™¨</td><td>div::after</td><td>1</td></tr><tr><td>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨</td><td>div+div</td><td>0</td></tr><tr><td>å­é€‰æ‹©å™¨</td><td>div &gt; a</td><td>0</td></tr><tr><td>åä»£é€‰æ‹©å™¨</td><td>div  a</td><td>0</td></tr><tr><td>é€šé…ç¬¦é€‰æ‹©å™¨</td><td>*</td><td>0</td></tr></tbody></table>
<ul>
<li>å¯ä»¥åœ¨æ ·å¼åé¢ä½¿ç”¨ <code>!important</code> ï¼Œæ¯”å¦‚ <code>display: none !important</code>ï¼Œæ­¤æ—¶è¯¥æ ·å¼çš„æƒé‡æœ€é«˜ï¼Œæƒé‡å€¼ä¸º <code>Infinity</code>ï¼Œä½†éœ€è¦æ…ç”¨ã€‚</li>
<li><code>styleå†…è”æ ·å¼</code>çš„æƒé‡ä¸º<code>1000</code>ã€‚</li>
<li>æƒé‡ç›¸åŒï¼Œåå‡ºç°çš„è¦†ç›–å‰é¢ã€‚</li>
</ul>
<h2 data-id="heading-2">3ã€CSS éšè—å…ƒç´ çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h2>
<ol>
<li><code>display:none</code>: å…ƒç´ ä¸ä¼šæ¸²æŸ“ï¼Œä¸å æ®ç©ºé—´ï¼Œä¹Ÿä¸å“åº”ç»‘å®šçš„äº‹ä»¶ã€‚</li>
<li><code>opacity: 0</code>: å°†å…ƒç´ çš„é€æ˜åº¦è®¾ç½®ä¸º0ï¼Œè¿›è€Œè®©å…ƒç´ ä»è§†è§‰ä¸Šæ¶ˆå¤±ï¼Œä½†å…ƒç´ ä»ç„¶ä¼šå æ®ç©ºé—´ï¼Œå¹¶ä¸”<strong>ä¼šå“åº”ç»‘å®šçš„äº‹ä»¶</strong>ã€‚</li>
<li><code>visibility: hidden</code>: è¿™ç§æ–¹å¼éšè—ä¼šè®©å…ƒç´ ä¾æ—§å æ®ç©ºé—´ï¼Œä½†<strong>ä¸ä¼šå“åº”äº‹ä»¶</strong>ã€‚</li>
<li><code>position: absolute;left: -9999px;top: -9999px;</code>: åˆ©ç”¨ç»å¯¹å®šä½å°†å…ƒç´ ç§»åˆ°å±å¹•å¤–ã€‚</li>
<li><code>z-index: -9999</code>: é™ä½å…ƒç´ å±‚çº§ï¼Œè®©å½“å‰å…ƒç´ è¢«å…¶å®ƒå…ƒç´ è¦†ç›–ï¼Œé—´æ¥è¾¾åˆ°å…ƒç´ éšè—çš„ç›®çš„ã€‚</li>
<li><code>overflow: hidden</code>: è¶…å‡ºè¯¥å…ƒç´ èŒƒå›´å†…çš„å…ƒç´ å°†ä¼šéšè—æ˜¾ç¤ºã€‚</li>
<li><code>clip-path: inset(100%)(å‘å†…è£å‰ª100%)</code>æˆ–è€…<code>clip-path: circle(0)(åŠå¾„ä¸º0çš„åœ†å½¢)</code>: ä½¿ç”¨å…ƒç´ è£å‰ªæ¥å®ç°å…ƒç´ éšè—ã€‚</li>
<li><code>transform: scale(0,0)</code>: åˆ©ç”¨ css3 çš„å…ƒç´ ç¼©æ”¾èƒ½åŠ›ï¼Œå°†å…ƒç´ ç¼©æ”¾ä¸º0æ¥å®ç°å…ƒç´ çš„éšè—ã€‚</li>
</ol>
<h2 data-id="heading-3">4ã€Link å’Œ @import çš„åŒºåˆ«</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>linkæ ‡ç­¾</th><th>@import</th></tr></thead><tbody><tr><td>æ‰€å±æ ‡å‡†</td><td>XHTML/HTMLæ ‡å‡†</td><td>CSSæ ‡å‡†</td></tr><tr><td>å¼•ç”¨å†…å®¹ç±»å‹</td><td>å¯ç”¨äºå¼•å…¥ CSSã€RSSã€å›¾æ ‡ç­‰å¤šç§èµ„æº</td><td>ä»…æ”¯æŒcssæ ·å¼</td></tr><tr><td>åŠ è½½æ—¶æœº</td><td>é¡µé¢åŠ è½½æ—¶åŒæ­¥åŠ è½½</td><td>ç­‰å¾…æ•´ä¸ªé¡µé¢åŠ è½½å®Œæˆåå†åŠ è½½</td></tr><tr><td>JavaScript æ§åˆ¶</td><td>æ”¯æŒé€šè¿‡ DOM æ“ä½œä¿®æ”¹æ ·å¼é“¾æ¥</td><td>ä¸æ”¯æŒåŠ¨æ€æ§åˆ¶</td></tr><tr><td>å…¼å®¹æ€§</td><td>æ— å…¼å®¹é—®é¢˜</td><td>CSS2.1 æ‰æœ‰çš„è¯­æ³•ï¼Œåœ¨ IE5+ æ‰èƒ½è¯†åˆ«</td></tr><tr><td>æ€§èƒ½</td><td>æ›´å¿«ï¼Œæœ‰åˆ©äºé¦–å±æ¸²æŸ“</td><td>ç›¸å¯¹è¾ƒæ…¢ï¼Œå¯èƒ½é€ æˆæ ·å¼å»¶è¿ŸåŠ è½½</td></tr></tbody></table>
<h2 data-id="heading-4">5ã€transition å’Œ animation çš„åŒºåˆ«</h2>
<ul>
<li>è¿‡æ¸¡ï¼ˆ<code>transition</code>ï¼‰ï¼šå…¶æ ¸å¿ƒæ˜¯<strong>çŠ¶æ€å˜åŒ–</strong>ï¼Œå¦‚ <code>transition: all 0.5s ease;</code>ï¼Œç»™æ‰€æœ‰å±æ€§åŠ ä¸Šä¸€ä¸ª 0.5s çš„å¹³æ»‘è¿‡æ¸¡ã€‚</li>
<li>åŠ¨ç”»ï¼ˆ<code>animation</code>ï¼‰ï¼šå…¶æ ¸å¿ƒæ˜¯<strong>å¯¹åŠ¨ç”»è¿‡ç¨‹è¿›è¡Œå¤šå¸§å…³é”®å¸§æ§åˆ¶</strong>ï¼Œå¦‚ <code>@keyframes name { 0% { ... } 100% { ... } }</code>ï¼Œç„¶å <code>animation: name 1s infinite;</code>ã€‚åŠ¨ç”»ç›¸æ¯”è¿‡æ¸¡è€Œè¨€æ›´åŠ å¤æ‚ï¼Œæ”¯æŒå¾ªç¯å’Œæš‚åœã€‚</li>
</ul>
<h2 data-id="heading-5">6ã€èŠä¸€èŠç›’æ¨¡å‹</h2>
<p>CSS ç›’æ¨¡å‹æè¿°äº†å…ƒç´ åœ¨é¡µé¢ä¸Šçš„ç©ºé—´å ç”¨ï¼ŒåŒ…æ‹¬å†…å®¹ï¼ˆcontentï¼‰ã€å†…è¾¹è·ï¼ˆpaddingï¼‰ã€è¾¹æ¡†ï¼ˆborderï¼‰å’Œå¤–è¾¹è·ï¼ˆmarginï¼‰ã€‚</p>
<ul>
<li><strong>æ ‡å‡†ç›’æ¨¡å‹ï¼ˆW3C æ ‡å‡†ï¼Œé»˜è®¤ç›’æ¨¡å‹ï¼‰</strong>ï¼šwidth å’Œ height ä»…åŒ…å«å†…å®¹çš„å®½åº¦å’Œé«˜åº¦ï¼Œå…ƒç´ çš„æ€»å®½åº¦ = width + å·¦å³ padding + å·¦å³ border + å·¦å³ marginã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">box-sizing</span>: content-box;
}
</code></pre>
<ul>
<li><strong>IE ç›’æ¨¡å‹ï¼ˆborder-boxï¼‰ï¼Œä¹Ÿå«æ€ªå¼‚ç›’æ¨¡å‹</strong>ï¼šå…ƒç´ çš„å®½åº¦ = widthï¼ˆwidth é‡Œé¢åŒ…æ‹¬å†…è¾¹è· padding å’Œè¾¹æ¡† borderï¼‰ + å·¦å³ marginã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</code></pre>
<h2 data-id="heading-6">7ã€èŠä¸€èŠ CSS é¢„å¤„ç†å™¨</h2>
<p>CSS é¢„å¤„ç†å™¨æ˜¯ä¸€ç§å·¥å…·æˆ–è¯­è¨€æ‰©å±•ï¼Œå®ƒå¯ä»¥è®©å¼€å‘è€…ä»¥æ›´åŠ é«˜çº§çš„è¯­æ³•æ¥ç¼–å†™ CSSï¼Œæ¯”å¦‚<strong>å¯ä»¥å®šä¹‰å˜é‡ã€æ”¯æŒ CSS åµŒå¥—å†™æ³•ã€å®šä¹‰å‡½æ•°ã€ä½¿ç”¨å¾ªç¯</strong>ç­‰ï¼Œåœ¨å¼€å‘æ—¶å¯ä»¥æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡å’Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚ä½†ç”±äºæˆ‘ä»¬è¿è¡Œçš„å¹³å°ï¼Œæ¯”å¦‚æµè§ˆå™¨ä¸æ”¯æŒè¿™äº›é«˜çº§è¯­æ³•ï¼Œæ‰€ä»¥åœ¨ä»£ç çš„è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦åˆ©ç”¨å¯¹åº”çš„å·¥å…·ç¼–è¯‘æˆæ ‡å‡†çš„ CSSã€‚</p>
<p>CSS å¸¸è§çš„é¢„å¤„ç†å™¨åŒ…æ‹¬ <code>Sass</code>ã€<code>Less</code> ã€<code>Stylus</code>ã€<code>PostCSS</code> ç­‰ã€‚</p>
<h2 data-id="heading-7">8ã€ä»€ä¹ˆæ˜¯ CSS Sprites?</h2>
<p><strong>CSS Sprites</strong> æŠ€æœ¯å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>é›ªç¢§å›¾</strong>ï¼Œé€šè¿‡å°†å¤šå¼ å°å›¾æ ‡æ‹¼æ¥æˆä¸€å¼ å¤§å›¾ï¼Œç„¶åé€šè¿‡ CSS çš„ <code>background-image</code> å’Œ <code>background-position</code> å±æ€§æ¥æ˜¾ç¤ºå›¾åƒçš„ç‰¹å®šéƒ¨åˆ†ï¼Œèƒ½æœ‰æ•ˆçš„<strong>å‡å°‘HTTPè¯·æ±‚æ•°é‡</strong>ä»¥è¾¾åˆ°åŠ é€Ÿæ˜¾ç¤ºå†…å®¹çš„æŠ€æœ¯ã€‚</p>
<h2 data-id="heading-8">9ã€ä»€ä¹ˆæ˜¯BFCï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h2>
<p><code>BFC(block formatting contextï¼‰</code>ï¼šç®€å•æ¥è¯´ï¼ŒBFC å°±æ˜¯ä¸€ç§å±æ€§ï¼Œè¿™ç§å±æ€§ä¼šå½±å“ç€å…ƒç´ çš„å®šä½ä»¥åŠä¸å…¶å…„å¼Ÿå…ƒç´ ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚</p>
<p><strong>å½¢æˆ BFC çš„æ¡ä»¶:</strong></p>
<ol>
<li>æµ®åŠ¨å…ƒç´ ï¼Œ<code>float</code> é™¤ <code>none</code> ä»¥å¤–çš„å€¼ï¼›</li>
<li>ç»å¯¹å®šä½å…ƒç´ ï¼Œ<code>positionï¼ˆabsoluteï¼Œfixedï¼‰</code>ï¼›</li>
<li><code>display</code> ä¸ºä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€çš„å€¼ï¼š<code>inline-blocksï¼Œtable-cellsï¼Œtable-captions</code>ï¼›</li>
<li><code>overflow</code> é™¤äº† <code>visible</code> ä»¥å¤–çš„å€¼ï¼ˆ<code>hiddenï¼Œautoï¼Œscroll</code>ï¼‰ã€‚</li>
</ol>
<p><strong>BFCå¸¸è§ä½œç”¨:</strong></p>
<ol>
<li>åŒ…å«æµ®åŠ¨å…ƒç´ ã€‚</li>
<li>ä¸è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–ã€‚</li>
<li>BFC ä¼šé˜»æ­¢å¤–è¾¹è·æŠ˜å ï¼Œå¯è§£å†³ <strong>margin å¡Œé™·</strong>é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-9">10ã€Flex å¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨å±æ€§æœ‰å“ªäº›ï¼Ÿ</h2>
<p>Flexï¼ˆå¼¹æ€§ç›’å¸ƒå±€ï¼‰ç”¨äºä¸€ç»´å¸ƒå±€ï¼ˆå¦‚è¡Œæˆ–åˆ—ï¼‰ï¼Œçˆ¶å®¹å™¨è®¾ç½® <code>display: flex;</code>ã€‚</p>
<p><strong>å…¶å¸¸ç”¨å±æ€§å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>å®¹å™¨ï¼šflex-directionï¼ˆæ–¹å‘ï¼‰ã€justify-contentï¼ˆä¸»è½´å¯¹é½ï¼‰ã€align-itemsï¼ˆäº¤å‰è½´å¯¹é½ï¼‰ã€flex-wrapï¼ˆæ¢è¡Œï¼‰ã€‚</li>
<li>å­é¡¹ï¼šflex-growï¼ˆå¢é•¿æ¯”ä¾‹ï¼‰ã€flex-shrinkï¼ˆæ”¶ç¼©æ¯”ä¾‹ï¼‰ã€flex-basisï¼ˆåŸºç¡€å¤§å°ï¼‰ã€‚é€‚åˆå“åº”å¼è®¾è®¡ã€‚</li>
</ul>
<h2 data-id="heading-10">11ã€flex:1 æ˜¯å“ªäº›å±æ€§ç»„æˆçš„ï¼Ÿ</h2>
<p>flex å®é™…ä¸Šæ˜¯ <code>flex-grow</code>ã€<code>flex-shrink</code> å’Œ <code>flex-basis</code> ä¸‰ä¸ªå±æ€§çš„ç¼©å†™ã€‚</p>
<ul>
<li><code>flex-grow</code>ï¼šå®šä¹‰é¡¹ç›®çš„çš„æ”¾å¤§æ¯”ä¾‹ï¼›</li>
<li><code>flex-shrink</code>ï¼šå®šä¹‰é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼›</li>
<li><code>flex-basis</code>ï¼š å®šä¹‰åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ï¼Œæµè§ˆå™¨æ ¹æ®æ­¤å±æ€§è®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚</li>
</ul>
<h2 data-id="heading-11">12ã€flex-basis å’Œ width çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h2>
<p><strong>å®šä¹‰å’Œä½œç”¨ï¼š</strong></p>
<ul>
<li><code>flex-basis</code>: æ˜¯ <code>CSS Flexbox</code> å¸ƒå±€ä¸­çš„ä¸“æœ‰å±æ€§ï¼Œåœ¨å…¶å®ƒåœ°æ–¹ä½¿ç”¨ä¸ç”Ÿæ•ˆã€‚</li>
<li><code>width</code> æ˜¯ä¸€ä¸ªé€šç”¨çš„ CSS å±æ€§ã€‚å®ƒé€‚ç”¨äºä»»ä½•å…ƒç´ ï¼ˆå—çº§ã€è¡Œå†…å—ç­‰ï¼‰ï¼Œä¸å—å¸ƒå±€æ¨¡å¼é™åˆ¶ã€‚</li>
</ul>
<p><strong>ä¼˜å…ˆçº§ï¼š</strong></p>
<p>å¦‚æœ<code>flex-basis</code>çš„å€¼ä¸º <code>auto</code>ï¼ˆå…¶é»˜è®¤å€¼å°±æ˜¯ autoï¼Œæœªæ˜¾ç¤ºè®¾ç½®é‡‡ç”¨çš„å°±æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œåˆ™ <code>flex item</code> çš„åˆå§‹å¤§å°ä¼š <code>fallback</code> åˆ° <code>width</code>ï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨ <code>width</code> è®¾ç½®çš„å€¼ä½œä¸ºåˆå§‹å¤§å°ï¼Œè€Œå¦‚æœ <code>flex-basis</code> ä¸€æ—¦è®¾ç½®äº†å€¼ï¼Œæ¯”å¦‚åŒæ—¶è®¾ç½® <code>width: 100px;</code> å’Œ <code>flex-basis: 200px;</code>, <code>flex item</code> çš„åˆå§‹å¤§å°ä¼šé‡‡ç”¨ <code>flex-basis</code> è®¾ç½®çš„ <code>200px</code>ã€‚</p>
<p><strong>è®¡ç®—è§„åˆ™</strong>ï¼š</p>
<ul>
<li><code>flex-basis</code>: <code>flex item</code> çš„æœ€ç»ˆå¤§å° = <code>flex-basis + (å‰©ä½™ç©ºé—´ * flex-grow) - (ä¸è¶³ç©ºé—´ * flex-shrink)</code>ã€‚</li>
<li><code>width</code>ï¼Œå¦‚æœçˆ¶çº§å®½åº¦è¶³å¤Ÿï¼Œæœ€ç»ˆ <code>flex-item</code> çš„æœ€ç»ˆå¤§å° = <code>width</code>ï¼Œå¦‚æœç©ºé—´ä¸è¶³ï¼Œä¼šè¿›è¡Œå®½åº¦å‹ç¼©ï¼Œ <code>flex-item</code> çš„æœ€ç»ˆå¤§å° &lt; <code>width</code>ï¼Œé™¤éè®¾ç½® <code>flex-shark: 0</code>ï¼Œå®½åº¦å°±ä¸ä¼šè¢«å‹ç¼©ï¼Œæœ€ç»ˆå®½åº¦è¿˜æ˜¯ä¸º <code>width</code>çš„å¤§å°ã€‚</li>
</ul>
<h2 data-id="heading-12">13ã€remã€emã€pxæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2>
<ul>
<li>**pxï¼ˆåƒç´ ï¼‰ï¼š**ç»å¯¹å•ä½ï¼Œç›¸å¯¹äºå±å¹•åˆ†è¾¨ç‡å¤§å°å›ºå®šã€‚</li>
<li><strong>remï¼ˆroot emï¼‰ï¼š</strong> æ˜¯ <code>CSS3</code> å¼•å…¥çš„ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äº <strong>HTML æ ¹å…ƒç´ </strong>çš„å­—ä½“å¤§å°è®¡ç®—ã€‚å¯å®ç°å“åº”å¼å¸ƒå±€ã€‚</li>
<li><strong>em</strong>ï¼šæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ã€‚ç›¸å¯¹äºå½“å‰å¯¹è±¡å†…<strong>æ–‡æœ¬çš„å­—ä½“å°ºå¯¸</strong>ã€‚</li>
</ul>
<blockquote>
<p>è¿™ä¸ªå¾ˆå¤šäººæœ‰ä¸ªè¯¯è§£ï¼Œ<code>em</code> åœ¨è®¾ç½®è‡ªèº«å­—ä½“å¤§å°çš„æ—¶å€™æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°; åœ¨ç”¨ <code>em</code>è®¾ç½®å…¶ä»–å±æ€§å•ä½çš„æ—¶å€™, æ¯”å¦‚<code>width</code>ï¼Œæ˜¯ç›¸å¯¹äºè‡ªèº«çš„å­—ä½“å±æ€§å¤§å°, åªæ˜¯å¾ˆå¤šæ—¶å€™è‡ªèº«å­—ä½“å±æ€§æ˜¯ç»§æ‰¿è‡ªçˆ¶å…ƒç´ .</p>
</blockquote>
<h2 data-id="heading-13">14ã€å¦‚ä½•æ¸…é™¤æµ®åŠ¨ï¼Ÿ</h2>
<p><strong>æµ®åŠ¨ä¼šå¯¼è‡´çˆ¶å…ƒç´ é«˜åº¦å¡Œé™·ã€‚æ¸…é™¤æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>çˆ¶å…ƒç´ æ·»åŠ  <code>overflow: hidden;</code>ï¼ˆè§¦å‘ BFCï¼‰ã€‚</li>
<li>ä½¿ç”¨ä¼ªå…ƒç´ ï¼š<code>.clearfix::after { content: ''; display: block; clear: both; }</code>ã€‚</li>
<li>çˆ¶å…ƒç´ è®¾ç½® <code>float</code> æˆ– <code>display: table;</code>ã€‚</li>
</ul>
<p>ç°ä»£å¸ƒå±€æ›´æ¨èä½¿ç”¨ <code>Flex/Grid</code> é¿å…æµ®åŠ¨ã€‚</p>
<h2 data-id="heading-14">15ã€CSS æ€§èƒ½ä¼˜åŒ–çš„å¸¸è§æŠ€å·§ï¼Ÿ</h2>
<ul>
<li>
<p><strong>CSS åŠ è½½æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>æå–<code>å…¬å…± CSS</code> æ–‡ä»¶ã€‚</li>
<li>é¿å…ä½¿ç”¨ <code>@import</code>ã€‚</li>
<li>å‹ç¼© CSS æ–‡ä»¶ã€‚</li>
<li>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚</li>
<li>ä½¿ç”¨ <code>CDN</code> åŠ é€Ÿã€‚</li>
<li>ä½¿ç”¨ <code>CSS Sprite</code>ã€‚</li>
<li>CSS æ ·å¼æŠ½ç¦»å’Œå»é™¤<code>æ— ç”¨ CSS</code>ã€‚</li>
<li>åˆç†ä½¿ç”¨<code>å†…åµŒ CSS</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSS é€‰æ‹©å™¨æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>é¿å…ä½¿ç”¨é€šé…ç¬¦é€‰æ‹©å™¨ã€‚</li>
<li>ä½¿ç”¨å­é€‰æ‹©å™¨ä»£æ›¿åä»£é€‰æ‹©å™¨ã€‚</li>
<li>ä¼˜å…ˆä½¿ç”¨ç±»ï¼ˆ<code>Class</code>ï¼‰å’Œ <code>ID</code> é€‰æ‹©å™¨ã€‚</li>
<li>é¿å…æ·±å±‚åµŒå¥—çš„é€‰æ‹©å™¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSS é€‰æ‹©å™¨æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>é¿å…ä½¿ç”¨è¿‡äºå¤æ‚çš„å±æ€§ã€‚</li>
<li>é¿å…ä½¿ç”¨ä¸å¿…è¦çš„å±æ€§ã€‚</li>
<li>é¿å…ä½¿ç”¨ <code>!important</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSS åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code> å±æ€§æ¥è¿›è¡ŒåŠ¨ç”»ã€‚</li>
<li>é¿å…ä½¿ç”¨è¿‡äºå¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚</li>
<li>åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨ <code>will-change</code> å±æ€§ã€‚</li>
<li>ä½¿ç”¨ <code>requestAnimationFrame()</code> å‡½æ•°æ¥ä¼˜åŒ–åŠ¨ç”»ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSS æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>class</code> åˆå¹¶ <code>DOM</code> çš„ä¿®æ”¹ã€‚</li>
<li>è®© <code>DOM</code> å…ƒç´ è„±ç¦»æ–‡æ¡£æµã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">16ã€æœ€åæ¥ä¸€é“è€ƒå¯Ÿ CSS çš„ z-index çš„é¢è¯•çœŸé¢˜</h2>
<p><strong>è¯·æŒ‰å±‚çº§ä»é«˜åˆ°ä½çš„é¡ºåºåˆ—å‡ºå…ƒç´ ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-1"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: fixed; z-index: 100;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-2"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; z-index: 2000;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-3"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative; z-index: 1000;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>è¿™é‡Œä¸»è¦è€ƒå¯Ÿ <code>z-index</code> çš„ä¸¤æ¡å±‚çº§è®¡ç®—è§„åˆ™ï¼š</p>
<ul>
<li>å½“çˆ¶å…ƒç´ åˆ›å»ºäº†ä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ <code>position: relative/absolute/fixed</code> æ—¶ï¼Œæ­¤æ—¶çˆ¶å­å…ƒç´ çš„å±‚çº§ä¸ <code>z-index</code> æ— å…³ï¼Œå°±ç®— <code>dom-2</code> çš„ <code>z-index</code> ä¸º <code>99</code>ï¼Œå…¶å±‚çº§ä¹Ÿæ¯”çˆ¶çº§é«˜ã€‚</li>
<li><strong>å­å…ƒç´ çš„ z-index å—çˆ¶å…ƒç´ é™åˆ¶ã€‚å³ä½¿å­å…ƒç´  z-index å¾ˆé«˜ï¼Œå¦‚æœçˆ¶å…ƒç´  z-index ä½ï¼Œæ•´ä¸ªå­æ ‘éƒ½ä¼šåœ¨ä½å±‚ã€‚</strong></li>
</ul>
<p>æ‰€ä»¥å±‚çº§é¡ºåºä»é«˜åˆ°ä½ä¾æ¬¡æ˜¯ <code>dom-3</code> &gt; <code>dom-2</code> &gt; <code>dom-1</code>ã€‚</p>
<p>æˆ‘ä»¬åŠ ä¸€ç‚¹æ ·å¼å°±èƒ½å¾ˆæ˜æ˜¾çœ‹å‡ºå±‚çº§å…³ç³»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- z-index.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-id">#dom-1</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
    <span class="hljs-attribute">background-color</span>: red;
  }
  <span class="hljs-selector-id">#dom-2</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">background-color</span>: blue;
  }
  <span class="hljs-selector-id">#dom-3</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>: yellow;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-1"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: fixed; z-index: 100"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-2"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; z-index: 2000"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-3"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative; z-index: 1000"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p><strong>å…¶æ¸²æŸ“ç»“æœå¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/555fe35534bb487da4954da43fc181d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5a-S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764858092&amp;x-signature=fG%2BPWDuAmeIXQRT3Wp9IuzKLj2c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">å°ç»“</h2>
<p>ä»¥ä¸Šæ˜¯æ•´ç†çš„ä¸€éƒ¨åˆ† CSS çš„ç›¸å…³é¢è¯•é¢˜ï¼Œå¦‚æœ‰é”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹æ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£ï¼Œåç»­è¿˜ä¼šæ›´æ–° CSS ä¸€äº›å¸¸è§å¸ƒå±€å®ç°çš„é¢è¯•é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetesæ»šåŠ¨å‘å¸ƒè¯¦è§£]]></title>    <link>https://juejin.cn/post/7577220965438406710</link>    <guid>https://juejin.cn/post/7577220965438406710</guid>    <pubDate>2025-11-27T14:24:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577220965438406710" data-draft-id="7577278843233353771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetesæ»šåŠ¨å‘å¸ƒè¯¦è§£"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-27T14:24:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetesæ»šåŠ¨å‘å¸ƒè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:24:07.000Z" title="Thu Nov 27 2025 14:24:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kubernetes ä¸­çš„æ»šåŠ¨å‘å¸ƒï¼ˆRolling Updateï¼‰æ˜¯ä¸€ç§éå¸¸ä¼˜é›…çš„éƒ¨ç½²ç­–ç•¥ï¼Œå®ƒèƒ½è®©ä½ åœ¨æ›´æ–°åº”ç”¨æ—¶ï¼Œå®ç°<strong>é›¶åœæœº</strong>å’Œ<strong>ç”¨æˆ·æ— æ„ŸçŸ¥</strong>çš„å¹³æ»‘å‡çº§ã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/992c09ff7ece4fb0a77945fdf73376ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVTmqZjlrZDnmq4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764858302&amp;x-signature=C0ZEOOBSCWEfjFdgOTYaXGkU79Y%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¯¦ç»†è§£è¯»è¿™ä¸ªè¿‡ç¨‹ï¼Œå¹¶çœ‹çœ‹å¦‚ä½•æŒæ§å®ƒã€‚</p>
<h3 data-id="heading-0">ğŸ”„ æ»šåŠ¨å‘å¸ƒå¦‚ä½•å·¥ä½œ</h3>
<p>æ»šåŠ¨å‘å¸ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>é€æ­¥æ›¿æ¢</strong>ã€‚å®ƒä¸æ˜¯ä¸€æ¬¡æ€§åœæ­¢æ‰€æœ‰æ—§ç‰ˆæœ¬çš„ Podï¼ˆå®ä¾‹ï¼‰ï¼Œç„¶åå†å¯åŠ¨æ‰€æœ‰æ–°ç‰ˆæœ¬çš„ Podã€‚ç›¸åï¼Œå®ƒéµå¾ªä¸€ä¸ªç²¾å¿ƒæ§åˆ¶çš„æµç¨‹ï¼š</p>
<ol>
<li><strong>é€æ­¥æ›´æ›¿</strong>ï¼šå¦‚æµç¨‹å›¾æ‰€ç¤ºï¼Œç³»ç»Ÿä¼šå…ˆå¯åŠ¨ä¸€ä¸ª<strong>æ–°ç‰ˆæœ¬ Pod</strong>ï¼ˆV2ï¼‰ï¼Œå¹¶ç­‰å¾…å…¶é€šè¿‡<strong>å°±ç»ªæ¢é’ˆ</strong>æ£€æŸ¥ï¼Œç¡®è®¤å…¶å·²å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚</li>
<li><strong>æµé‡åˆ‡æ¢</strong>ï¼šä¸€æ—¦æ–°çš„ Pod å°±ç»ªï¼Œè´Ÿè½½å‡è¡¡å™¨ï¼ˆé€šå¸¸æ˜¯ Kubernetes Serviceï¼‰å°±ä¼šå°†æµé‡å¼•å¯¼åˆ°å®ƒä¸Šé¢ï¼ŒåŒæ—¶<strong>ç»ˆæ­¢ä¸€ä¸ªæ—§ç‰ˆæœ¬ Pod</strong>ï¼ˆV1ï¼‰ã€‚</li>
<li><strong>å¾ªç¯å¾€å¤</strong>ï¼šè¿™ä¸ªè¿‡ç¨‹å¾ªç¯è¿›è¡Œï¼Œç›´åˆ°æ‰€æœ‰æ—§ç‰ˆæœ¬çš„ Pod éƒ½è¢«æ›¿æ¢ä¸ºæ–°ç‰ˆæœ¬çš„ Podã€‚</li>
</ol>
<p>è¿™ç§æ–¹å¼ç¡®ä¿äº†åœ¨æ•´ä¸ªæ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå§‹ç»ˆæœ‰å¯ç”¨çš„ Pod å®ä¾‹åœ¨å¯¹å¤–æä¾›æœåŠ¡ï¼Œä»è€Œå®ç°äº†é›¶åœæœºã€‚</p>
<h3 data-id="heading-1">âš™ï¸ æ ¸å¿ƒé…ç½®å‚æ•°</h3>
<p>æ»šåŠ¨å‘å¸ƒçš„ç²¾ç»†æ§åˆ¶ï¼Œä¸»è¦é€šè¿‡ Deployment é…ç½®ä¸­çš„ <code>strategy.rollingUpdate</code>ä¸‹çš„ä¸¤ä¸ªå…³é”®å‚æ•°å®ç°ï¼š</p>























<table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>é»˜è®¤å€¼</th><th>ç”Ÿäº§ç¯å¢ƒå»ºè®®</th></tr></thead><tbody><tr><td>**<code>maxSurge</code>**â€‹</td><td>æ§åˆ¶<strong>æœ€å¤šèƒ½åˆ›å»ºå¤šå°‘ä¸ªè¶…å‡ºæœŸæœ›å‰¯æœ¬æ•°</strong>çš„ Podã€‚</td><td>25%</td><td>é€šå¸¸è®¾ç½®ä¸º 1 æˆ– 25%ã€‚è¿™ç›¸å½“äºæ›´æ–°è¿‡ç¨‹ä¸­çš„â€œç¼“å†²åŒºâ€ï¼Œå…è®¸æ–° Pod æå‰å¯åŠ¨ã€‚</td></tr><tr><td>**<code>maxUnavailable</code>**â€‹</td><td>æ§åˆ¶<strong>åœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæœ€å¤šå…è®¸å¤šå°‘ä¸ª Pod ä¸å¯ç”¨</strong>ã€‚</td><td>25%</td><td>å¯¹äºè¦æ±‚é«˜å¯ç”¨çš„æœåŠ¡ï¼Œå¯è®¾ç½®ä¸º 0ï¼Œç¡®ä¿æ›´æ–°æœŸé—´æœåŠ¡å®¹é‡ä¸é™ä½ã€‚</td></tr></tbody></table>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨æœ‰ 4 ä¸ªå‰¯æœ¬ï¼Œå¹¶è®¾ç½® <code>maxSurge=1</code>ï¼ˆæœ€å¤šå¯è¶… 1 ä¸ª Podï¼‰ï¼Œ<code>maxUnavailable=0</code>ï¼ˆä¸å…è®¸ä»»ä½• Pod ä¸å¯ç”¨ï¼‰ã€‚é‚£ä¹ˆæ»šåŠ¨æ›´æ–°æ—¶ï¼ŒKubernetes ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–° Podï¼ˆæ­¤æ—¶æ€»æ•°ä¸º 5 ä¸ªï¼‰ï¼Œå¾…å…¶å°±ç»ªåï¼Œå†ç»ˆæ­¢ä¸€ä¸ªæ—§ Podï¼ˆæ€»æ•°æ¢å¤ 4 ä¸ªï¼‰ï¼Œå¦‚æ­¤å¾ªç¯ã€‚è¿™æ ·ï¼Œä»»ä½•æ—¶å€™éƒ½è‡³å°‘æœ‰ 4 ä¸ª Pod æ˜¯å¯ç”¨çš„ã€‚</p>
<h3 data-id="heading-2">ğŸ› ï¸ å®æˆ˜æ“ä½œæŒ‡å—</h3>
<p>æŒæ¡äº†åŸç†åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ç®¡ç†å’Œç›‘æ§æ»šåŠ¨å‘å¸ƒï¼š</p>

































<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>kubectl set image deployment/&lt;éƒ¨ç½²åç§°&gt; &lt;å®¹å™¨å&gt;=&lt;æ–°é•œåƒ&gt;:&lt;æ ‡ç­¾&gt;</code></td><td><strong>è§¦å‘æ›´æ–°</strong>ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„è§¦å‘æ–¹å¼ã€‚</td></tr><tr><td><code>kubectl rollout status deployment/&lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>å®æ—¶æŸ¥çœ‹</strong>æ›´æ–°çŠ¶æ€å’Œè¿›åº¦ã€‚</td></tr><tr><td><code>kubectl rollout pause deployment/&lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>æš‚åœ</strong>æ»šåŠ¨æ›´æ–°ã€‚é€‚ç”¨äºæƒ³åœ¨æŸä¸ªä¸­é—´çŠ¶æ€è¿›è¡ŒéªŒè¯çš„åœºæ™¯ã€‚</td></tr><tr><td><code>kubectl rollout resume deployment/&lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>ç»§ç»­</strong>è¢«æš‚åœçš„æ»šåŠ¨æ›´æ–°ã€‚</td></tr><tr><td><code>kubectl rollout undo deployment/&lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>å›æ»š</strong>åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™æ˜¯æ»šåŠ¨å‘å¸ƒå¸¦æ¥çš„å·¨å¤§ä¼˜åŠ¿ä¹‹ä¸€ã€‚</td></tr><tr><td><code>kubectl get pods -w</code></td><td><strong>è§‚å¯Ÿ Pod çš„æ–°æ—§æ›¿æ¢è¿‡ç¨‹</strong>ï¼Œç›´è§‚çœ‹åˆ°æµç¨‹å›¾ä¸­çš„æ¯ä¸€æ­¥ã€‚</td></tr></tbody></table>
<h3 data-id="heading-3">ğŸ’¡ ç¡®ä¿å¹³æ»‘å‘å¸ƒçš„è¿›é˜¶æŠ€å·§</h3>
<p>è¦è®©æ»šåŠ¨å‘å¸ƒçœŸæ­£ä¸æ»‘ï¼Œè¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>é…ç½®å°±ç»ªæ¢é’ˆ</strong>ï¼šè¿™æ˜¯æœ€é‡è¦çš„é…ç½®ï¼<code>readinessProbe</code>å‘Šè¯‰ Kubernetes ä½ çš„åº”ç”¨<strong>ä½•æ—¶çœŸæ­£å‡†å¤‡å¥½</strong>æ¥æ”¶æµé‡ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼ŒKubernetes ä¼šåœ¨å®¹å™¨è¿›ç¨‹å¯åŠ¨åç«‹å³å‘é€æµé‡ï¼Œè€Œæ­¤æ—¶ä½ çš„åº”ç”¨ï¼ˆå¦‚ Spring Boot é¡¹ç›®ï¼‰å¯èƒ½è¿˜åœ¨åŠ è½½ Spring ä¸Šä¸‹æ–‡æˆ–è¿æ¥æ•°æ®åº“ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚åŠ¡å¿…æ ¹æ®åº”ç”¨å¯åŠ¨ç‰¹ç‚¹é…ç½®åˆç†çš„è·¯å¾„å’Œå»¶è¿Ÿæ—¶é—´ã€‚</li>
<li><strong>é…ç½®ä¼˜é›…ç»ˆæ­¢</strong>ï¼šåœ¨ Pod è¢«ç»ˆæ­¢æ—¶ï¼ŒKubernetes ä¼šå‘å®¹å™¨å†…çš„è¿›ç¨‹å‘é€ SIGTERM ä¿¡å·ã€‚ä½ çš„åº”ç”¨åº”è¯¥æ•è·è¿™ä¸ªä¿¡å·ï¼Œç„¶ååœæ­¢æ¥æ”¶æ–°è¯·æ±‚ï¼Œå¹¶ç­‰å¾…å·²æœ‰è¯·æ±‚å¤„ç†å®Œæˆåå†é€€å‡ºã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ Deployment ä¸­é…ç½® <code>spec.template.spec.terminationGracePeriodSeconds</code>å¹¶ç»“åˆ <code>preStop</code>é’©å­æ¥å®ç°ï¼Œç»™åº”ç”¨ä¸€ä¸ªæ¸…ç†å’Œé€€å‡ºçš„ç¼“å†²æ—¶é—´ã€‚</li>
<li><strong>é¿å…ä½¿ç”¨ <code>latest</code>æ ‡ç­¾</strong>ï¼šåœ¨ Deployment çš„ YAML ä¸­ï¼Œæ˜ç¡®æŒ‡å®šé•œåƒç‰ˆæœ¬æ ‡ç­¾ã€‚ä½¿ç”¨ <code>latest</code>æ ‡ç­¾ä¼šå¯¼è‡´æ— æ³•æ¸…æ™°è¿½è¸ªå½“å‰è¿è¡Œçš„ç‰ˆæœ¬ï¼Œä¹Ÿç»™å›æ»šå¸¦æ¥ä¸ç¡®å®šæ€§ã€‚</li>
</ol>
<h3 data-id="heading-4">âš–ï¸ ä¼˜ç¼ºç‚¹ä¸ç­–ç•¥å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹ç‚¹</th><th>æ»šåŠ¨å‘å¸ƒ</th><th>é‡å»ºå‘å¸ƒ</th><th>è“ç»¿å‘å¸ƒ</th></tr></thead><tbody><tr><td><strong>å‘å¸ƒæ–¹å¼</strong>â€‹</td><td>é€æ­¥æ›¿æ¢ï¼Œæ–°è€ç‰ˆæœ¬<strong>åŒæ—¶å­˜åœ¨</strong>ä¸€æ®µæ—¶é—´</td><td>å…ˆ<strong>å…¨éƒ¨åœæ­¢</strong>æ—§ç‰ˆæœ¬ï¼Œå†å¯åŠ¨æ–°ç‰ˆæœ¬</td><td>éƒ¨ç½²<strong>ä¸¤å¥—å®Œæ•´ç¯å¢ƒ</strong>ï¼Œæµé‡ä¸€æ¬¡æ€§åˆ‡æ¢</td></tr><tr><td><strong>èµ„æºå ç”¨</strong>â€‹</td><td>ä½ï¼ˆåªéœ€è¿è¡Œä¸€å¥—ç¯å¢ƒï¼‰</td><td>ä½ï¼ˆåªéœ€è¿è¡Œä¸€å¥—ç¯å¢ƒï¼‰</td><td>é«˜ï¼ˆéœ€è¦ä¸¤å¥—ç¯å¢ƒçš„èµ„æºï¼‰</td></tr><tr><td><strong>å‘å¸ƒé£é™©</strong>â€‹</td><td>ä¸­ï¼ˆé£é™©è¢«åˆ†æ•£ï¼Œå¯å¿«é€Ÿå›æ»šï¼‰</td><td>é«˜ï¼ˆæœåŠ¡æœ‰ä¸­æ–­æœŸï¼‰</td><td>ä½ï¼ˆå›æ»šæå¿«ï¼‰</td></tr><tr><td><strong>å¤æ‚åº¦</strong>â€‹</td><td>ä½ï¼ˆKubernetes åŸç”Ÿæ”¯æŒï¼‰</td><td>ä½</td><td>ä¸­ï¼ˆéœ€è¦é¢å¤–çš„æµé‡æ§åˆ¶èƒ½åŠ›ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-5">ğŸ’ æ€»ç»“</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒKubernetes çš„æ»šåŠ¨å‘å¸ƒæ˜¯ä¸€ç§å¼ºå¤§ä¸”å®ç”¨çš„éƒ¨ç½²ç­–ç•¥ã€‚ç†è§£å…¶<strong>é€æ­¥æ›¿æ¢</strong>çš„å·¥ä½œåŸç†ï¼Œç†Ÿç»ƒè¿ç”¨ <strong><code>maxSurge</code>å’Œ <code>maxUnavailable</code><strong>â€‹ æ¥æ§åˆ¶èŠ‚å¥ï¼Œå¹¶ç»“åˆ</strong>å°±ç»ªæ¢é’ˆå’Œä¼˜é›…ç»ˆæ­¢</strong>ç­‰æœ€ä½³å®è·µï¼Œä½ å°±èƒ½çœŸæ­£æŒæ¡åœ¨ Kubernetes ä¸Šè¿›è¡Œå¹³æ»‘ã€æ— æŸåº”ç”¨å‘å¸ƒçš„è‰ºæœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨CI/CDæµæ°´çº¿ä¸­å¦‚ä½•é›†æˆè‡ªåŠ¨åŒ–çš„å‘å¸ƒéªŒè¯å’Œç†”æ–­æœºåˆ¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577228831138512939</link>    <guid>https://juejin.cn/post/7577228831138512939</guid>    <pubDate>2025-11-27T14:28:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831138512939" data-draft-id="7577228831138496555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨CI/CDæµæ°´çº¿ä¸­å¦‚ä½•é›†æˆè‡ªåŠ¨åŒ–çš„å‘å¸ƒéªŒè¯å’Œç†”æ–­æœºåˆ¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T14:28:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨CI/CDæµæ°´çº¿ä¸­å¦‚ä½•é›†æˆè‡ªåŠ¨åŒ–çš„å‘å¸ƒéªŒè¯å’Œç†”æ–­æœºåˆ¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:28:57.000Z" title="Thu Nov 27 2025 14:28:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨CI/CDæµæ°´çº¿ä¸­é›†æˆè‡ªåŠ¨åŒ–çš„å‘å¸ƒéªŒè¯å’Œç†”æ–­æœºåˆ¶ï¼Œæ˜¯æ„å»ºç¨³å¥ã€å¯è‡ªæ„ˆçš„ç°ä»£åŒ–è½¯ä»¶äº¤ä»˜æµç¨‹çš„æ ¸å¿ƒã€‚å®ƒèƒ½è®©å‘å¸ƒè¿‡ç¨‹åœ¨äº«å—è‡ªåŠ¨åŒ–å¸¦æ¥çš„é€Ÿåº¦ä¸æ•ˆç‡çš„åŒæ—¶ï¼Œå…·å¤‡å…³é”®çš„é£é™©æ§åˆ¶èƒ½åŠ›å’Œå¿«é€Ÿæ¢å¤èƒ½åŠ›ã€‚</p>
<p>ä¸ºäº†è®©æ‚¨å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†å®ç°è¿™ä¸€ç›®æ ‡çš„æ ¸å¿ƒç¯èŠ‚ä¸å…³é”®å®è·µã€‚</p>

























<table><thead><tr><th align="left">ç¯èŠ‚</th><th align="left">æ ¸å¿ƒç›®æ ‡</th><th align="left">å…³é”®å®è·µä¸å·¥å…·ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">è‡ªåŠ¨åŒ–å‘å¸ƒéªŒè¯</td><td align="left">åœ¨æ–°ç‰ˆæœ¬ä¸Šçº¿å‰ååŠè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨ã€æŒç»­åœ°éªŒè¯å…¶æ­£ç¡®æ€§ä¸ç¨³å®šæ€§ã€‚</td><td align="left">è´¨é‡é—¨ç¦ã€æ¸è¿›å¼å‘å¸ƒï¼ˆé‡‘ä¸é›€/è“ç»¿ï¼‰ã€è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆã€å¯è§‚æµ‹æ€§æŒ‡æ ‡æ£€æŸ¥ã€‚</td></tr><tr><td align="left">ç†”æ–­æœºåˆ¶</td><td align="left">å½“éªŒè¯å¤±è´¥æˆ–ç³»ç»Ÿå¼‚å¸¸æ—¶ï¼Œè‡ªåŠ¨ä¸­æ­¢å‘å¸ƒæµç¨‹å¹¶è§¦å‘å›æ»šï¼Œé˜²æ­¢æ•…éšœæ‰©å¤§ã€‚</td><td align="left">ç†”æ–­å™¨ï¼ˆHystrix/Resilience4jï¼‰ã€åŸºäºæŒ‡æ ‡çš„è‡ªåŠ¨å›æ»šï¼ˆå¦‚Flagger/Argo Rolloutsï¼‰ã€äººå·¥å®¡æ‰¹ä»‹å…¥ç‚¹ã€‚</td></tr><tr><td align="left">æ”¯æ’‘ä½“ç³»</td><td align="left">ä¸ºéªŒè¯å’Œç†”æ–­æä¾›å†³ç­–ä¾æ®ä¸æ‰§è¡Œèƒ½åŠ›ã€‚</td><td align="left">ç»Ÿä¸€å¯è§‚æµ‹æ€§ã€æ ‡å‡†åŒ–å›æ»šæµç¨‹ã€æ•…éšœæ¼”ç»ƒï¼ˆæ··æ²Œå·¥ç¨‹ï¼‰ã€‚</td></tr></tbody></table>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨å¦‚ä½•å…·ä½“å®æ–½è¿™äº›ç¯èŠ‚ã€‚</p>
<h3 data-id="heading-0">ğŸ” å®æ–½è‡ªåŠ¨åŒ–å‘å¸ƒéªŒè¯</h3>
<p>å‘å¸ƒéªŒè¯ä¸åº”æ˜¯ä¸€ä¸ªå­¤ç«‹çš„â€œæµ‹è¯•é˜¶æ®µâ€ï¼Œè€Œåº”æ˜¯ä¸€å¥—è´¯ç©¿æ•´ä¸ªå‘å¸ƒæµç¨‹çš„ã€å¤šå±‚æ¬¡çš„è´¨é‡æ£€æŸ¥ä½“ç³»ã€‚</p>
<ol>
<li>
<p>è®¾ç«‹è´¨é‡é—¨ç¦ (Quality Gates)ï¼šè¿™æ˜¯å‘å¸ƒæµç¨‹ä¸­çš„å¼ºåˆ¶æ€§æ£€æŸ¥ç‚¹ï¼Œåªæœ‰é€šè¿‡æ£€æŸ¥æ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚é€šå¸¸é›†æˆåœ¨CIé˜¶æ®µæˆ–éƒ¨ç½²åˆæœŸã€‚
â—¦   é™æ€ä»£ç åˆ†æï¼šä½¿ç”¨ SonarQube ç­‰å·¥å…·æ£€æŸ¥ä»£ç æ¼æ´ã€åå‘³é“å’Œæµ‹è¯•è¦†ç›–ç‡ï¼Œå¿…é¡»è§£å†³é˜»æ–­æ€§é—®é¢˜æ‰èƒ½åˆå¹¶ã€‚</p>
<p>â—¦   å®‰å…¨æ‰«æï¼šä½¿ç”¨ Trivyã€OWASP ZAP ç­‰å·¥å…·å¯¹ä»£ç ä¾èµ–å’Œå®¹å™¨é•œåƒè¿›è¡Œæ¼æ´æ‰«æï¼Œå¹¶è®¾ç½®ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ã€‚</p>
<p>â—¦   è½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰ï¼šåœ¨CIæµç¨‹ä¸­è‡ªåŠ¨ç”ŸæˆSBOMï¼Œç¡®ä¿äº¤ä»˜ç‰©æˆåˆ†æ¸…æ™°å¯æº¯ï¼Œè¿™å¯¹äºåˆè§„æ€§è‡³å…³é‡è¦ã€‚</p>
</li>
<li>
<p>é›†æˆæ¸è¿›å¼å‘å¸ƒç­–ç•¥ï¼šè¿™æ˜¯å®ç°è‡ªåŠ¨åŒ–éªŒè¯çš„æ ¸å¿ƒè½½ä½“ã€‚æ–°ç‰ˆæœ¬å¹¶ä¸ç›´æ¥å…¨é‡å‘å¸ƒï¼Œè€Œæ˜¯é€æ­¥æ‰©å¤§å½±å“èŒƒå›´ï¼Œå¹¶åœ¨æ¯ä¸€æ­¥éƒ½è¿›è¡ŒéªŒè¯ã€‚
â—¦   é‡‘ä¸é›€å‘å¸ƒï¼šé¦–å…ˆå°†ä¸€å°éƒ¨åˆ†ï¼ˆå¦‚5%ï¼‰çš„æµé‡è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ã€‚åœ¨æ­¤æœŸé—´ï¼Œæµæ°´çº¿ä¼šè‡ªåŠ¨æ‰§è¡ŒéªŒè¯ã€‚</p>
<p>â—¦   ä¸è‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°é›†æˆï¼šé€šè¿‡é’©å­ï¼ˆhookï¼‰å‡½æ•°ï¼Œåœ¨å‘å¸ƒè¿‡ç¨‹ä¸­è§¦å‘é’ˆå¯¹æ–°ç‰ˆæœ¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…æ‹¬APIæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ã€‚åªæœ‰æµ‹è¯•é€šè¿‡ï¼Œæ‰ä¼šç»§ç»­å‘å¸ƒã€‚</p>
<p>â—¦   è“ç»¿éƒ¨ç½²ï¼šåŒæ—¶éƒ¨ç½²æ–°æ—§ä¸¤å¥—å®Œæ•´ç¯å¢ƒï¼Œåœ¨å°†æµé‡å®Œå…¨åˆ‡æ¢åˆ°æ–°ç¯å¢ƒï¼ˆç»¿ï¼‰ä¹‹å‰ï¼Œå¯ä»¥è¿›è¡Œæœ€ç»ˆçš„å…¨é‡é›†æˆæµ‹è¯•ã€‚éªŒè¯é€šè¿‡åï¼Œå†åˆ‡æµã€‚</p>
</li>
<li>
<p>åŸºäºå¯è§‚æµ‹æ€§æŒ‡æ ‡çš„éªŒè¯ï¼šè¿™æ˜¯æ›´é«˜é˜¶çš„è‡ªåŠ¨åŒ–éªŒè¯å½¢å¼ï¼Œç³»ç»Ÿèƒ½å¤Ÿâ€œè§‚å¯Ÿâ€æ–°ç‰ˆæœ¬è¿è¡Œæ—¶çš„çœŸå®è¡¨ç°ã€‚
â—¦   å…³é”®æŒ‡æ ‡ç›‘æ§ï¼šåœ¨æµé‡åˆ‡æ¢åï¼Œæµæ°´çº¿ä¼šè‡ªåŠ¨æŸ¥è¯¢ç›‘æ§ç³»ç»Ÿï¼ˆå¦‚Prometheusï¼‰ï¼Œæ£€æŸ¥æ–°ç‰ˆæœ¬Podçš„å…³é”®æŒ‡æ ‡ï¼Œä¾‹å¦‚ï¼šè¯·æ±‚é”™è¯¯ç‡ï¼ˆæ˜¯å¦&lt;1%ï¼‰ã€P99å»¶è¿Ÿï¼ˆæ˜¯å¦&lt;500msï¼‰ã€èµ„æºåˆ©ç”¨ç‡ç­‰ã€‚</p>
<p>â—¦   ä¸šåŠ¡æŒ‡æ ‡æ£€æŸ¥ï¼šå¯¹äºæ ¸å¿ƒä¸šåŠ¡ï¼Œè¿˜å¯ä»¥æ£€æŸ¥ä¸šåŠ¡æŒ‡æ ‡ï¼ˆå¦‚è®¢å•æˆåŠŸç‡ï¼‰ã€‚è¿™äº›æ£€æŸ¥é€šå¸¸ç”±å‘å¸ƒè‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚Flaggerã€Argo Rolloutsï¼‰ è‡ªåŠ¨å®Œæˆã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">âš™ï¸ æ„å»ºæ™ºèƒ½ç†”æ–­æœºåˆ¶</h3>
<p>ç†”æ–­æœºåˆ¶æ˜¯å‘å¸ƒæµç¨‹çš„â€œå®‰å…¨åˆ¹è½¦â€ã€‚å½“éªŒè¯ç¯èŠ‚å‘ç°é—®é¢˜æ—¶ï¼Œå®ƒèƒ½è‡ªåŠ¨è§¦å‘é¢„è®¾çš„é˜²æŠ¤åŠ¨ä½œã€‚</p>
<ol>
<li>
<p>ä½¿ç”¨ç†”æ–­å™¨æ¨¡å¼ï¼šåœ¨æµæ°´çº¿è°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚Jenkins APIã€é•œåƒä»“åº“ï¼‰æ—¶ï¼Œä½¿ç”¨Hystrixæˆ–Resilience4jç­‰ç»„ä»¶ã€‚å¯é…ç½®åœ¨è¿ç»­å¤±è´¥å¤šæ¬¡æˆ–é”™è¯¯ç‡è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚50%ï¼‰æ—¶â€œç†”æ–­â€ï¼Œå¿«é€Ÿå¤±è´¥å¹¶æ‰§è¡Œé™çº§ç­–ç•¥ï¼ˆå¦‚è¿”å›ç¼“å­˜æ•°æ®ã€è®°å½•æ—¥å¿—åé‡è¯•ï¼‰ï¼Œé¿å…å› å•ä¸ªæœåŠ¡ä¸å¯ç”¨å¯¼è‡´æ•´ä¸ªæµæ°´çº¿é˜»å¡æˆ–èµ„æºè€—å°½ã€‚</p>
</li>
<li>
<p>å®ç°åŸºäºæŒ‡æ ‡çš„è‡ªåŠ¨å›æ»šï¼šè¿™æ˜¯å‘å¸ƒç†”æ–­æœ€ç›´æ¥çš„ä½“ç°ã€‚å½“æ¸è¿›å¼å‘å¸ƒï¼ˆå¦‚é‡‘ä¸é›€ï¼‰çš„éªŒè¯å¤±è´¥æ—¶ï¼Œç³»ç»Ÿåº”èƒ½è‡ªåŠ¨å›æ»šã€‚
â—¦   å·¥å…·é›†æˆï¼šä½¿ç”¨Flaggeræˆ–Argo Rolloutsç­‰Kubernetesäº¤ä»˜å·¥å…·ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®è¿™äº›è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå½“é”™è¯¯ç‡&gt;1%æˆ–P99å»¶è¿Ÿ&gt;500msæ—¶ï¼Œè‡ªåŠ¨å°†æµé‡åˆ‡å›æ—§ç‰ˆæœ¬ã€‚</p>
<p>â—¦   æµç¨‹æ ‡å‡†åŒ–ï¼šå›æ»šæ“ä½œæœ¬èº«ä¹Ÿåº”è‡ªåŠ¨åŒ–ï¼Œä¾‹å¦‚æ‰§è¡Œ <code>kubectl rollout undo</code> æˆ–é€šè¿‡GitOpså·¥å…·åŒæ­¥æ—§ç‰ˆæœ¬çš„é…ç½®æ¸…å•ã€‚</p>
</li>
<li>
<p>è®¾ç½®äººå·¥å®¡æ‰¹ä»‹å…¥ç‚¹ï¼šå¹¶éæ‰€æœ‰é—®é¢˜éƒ½èƒ½è¢«è§„åˆ™å®Œå…¨è¦†ç›–ã€‚åœ¨å…³é”®é˜¶æ®µï¼ˆå¦‚å…¨é‡å‘å¸ƒå‰ï¼‰è®¾ç½®æ‰‹åŠ¨ç¡®è®¤ç‚¹æ˜¯å¿…è¦çš„é£é™©æ§åˆ¶æ‰‹æ®µã€‚å¦‚æœé‡‘ä¸é›€éªŒè¯é˜¶æ®µå‡ºç°é—®é¢˜ï¼Œè¿ç»´äººå‘˜å¯ä»¥åœ¨æ­¤é€‰æ‹©åœæ­¢å‘å¸ƒæˆ–å›æ»šã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">ğŸ› ï¸ å…³é”®æ”¯æ’‘ä½“ç³»</h3>
<p>ä¸ºäº†è®©éªŒè¯å’Œç†”æ–­æœºåˆ¶å¯é å·¥ä½œï¼Œéœ€è¦ä»¥ä¸‹åŸºç¡€æ”¯æ’‘ï¼š</p>
<ol>
<li>ç»Ÿä¸€çš„è§‚æµ‹èƒ½åŠ›ï¼šè¿™æ˜¯éªŒè¯å’Œç†”æ–­çš„â€œçœ¼ç›â€ã€‚å¿…é¡»å»ºç«‹ç»Ÿä¸€çš„ç›‘æ§ã€æ—¥å¿—å’Œé“¾è·¯è¿½è¸ªä½“ç³»ï¼Œç¡®ä¿èƒ½å®æ—¶ã€å‡†ç¡®åœ°è·å–åº”ç”¨å’Œæµæ°´çº¿çš„å¥åº·çŠ¶æ€ã€‚</li>
<li>æ ‡å‡†åŒ–ä¸”å¯æµ‹è¯•çš„å›æ»šæµç¨‹ï¼šå›æ»šè„šæœ¬æˆ–é…ç½®å¿…é¡»ç»è¿‡å……åˆ†æµ‹è¯•ï¼Œå¹¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚è¦ç¡®ä¿å›æ»šè·¯å¾„å§‹ç»ˆç•…é€šã€‚</li>
<li>æŒç»­çš„æ•…éšœæ¼”ç»ƒï¼šå®šæœŸé€šè¿‡æ··æ²Œå·¥ç¨‹å·¥å…·ï¼ˆå¦‚Chaos Meshï¼‰æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿã€Podæ•…éšœç­‰åœºæ™¯ï¼Œä¸»åŠ¨æµ‹è¯•ç†”æ–­å’Œå›æ»šæœºåˆ¶æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼ŒæŒç»­ä¼˜åŒ–ç›¸å…³é…ç½®ã€‚</li>
</ol>
<h3 data-id="heading-3">ğŸ’ æ ¸å¿ƒä»·å€¼æ€»ç»“</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼Œåœ¨CI/CDæµæ°´çº¿ä¸­é›†æˆè‡ªåŠ¨åŒ–çš„å‘å¸ƒéªŒè¯ä¸ç†”æ–­æœºåˆ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå°†è¢«åŠ¨æ•‘ç«å˜ä¸ºä¸»åŠ¨é˜²å¾¡ã€‚å®ƒé€šè¿‡ä¸€ç³»åˆ—è‡ªåŠ¨åŒ–çš„æ£€æŸ¥ã€æ¸è¿›å¼çš„æµé‡æ›å…‰å’Œæ™ºèƒ½çš„ç†”æ–­å›æ»šç­–ç•¥ï¼Œåœ¨ä¿éšœä¸šåŠ¡ç¨³å®šæ€§çš„å‰æä¸‹ï¼Œä¾ç„¶èƒ½å®ç°å¿«é€Ÿã€é¢‘ç¹çš„äº¤ä»˜ï¼Œæœ€ç»ˆå»ºç«‹èµ·å¯¹è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹çš„ä¿¡å¿ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RBACæ¨¡å‹ï¼šåƒç”µå½±é™¢é€‰åº§ä¸€æ ·ç®¡ç†æƒé™ï¼Œå‘Šåˆ«"ä¸€ä¸ªç”¨æˆ·é…ä¸€ä¸ªæƒé™"çš„å™©æ¢¦]]></title>    <link>https://juejin.cn/post/7577242285197344795</link>    <guid>https://juejin.cn/post/7577242285197344795</guid>    <pubDate>2025-11-27T14:34:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577242285197344795" data-draft-id="7577226119105658907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RBACæ¨¡å‹ï¼šåƒç”µå½±é™¢é€‰åº§ä¸€æ ·ç®¡ç†æƒé™ï¼Œå‘Šåˆ«&quot;ä¸€ä¸ªç”¨æˆ·é…ä¸€ä¸ªæƒé™&quot;çš„å™©æ¢¦"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T14:34:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RBACæ¨¡å‹ï¼šåƒç”µå½±é™¢é€‰åº§ä¸€æ ·ç®¡ç†æƒé™ï¼Œå‘Šåˆ«"ä¸€ä¸ªç”¨æˆ·é…ä¸€ä¸ªæƒé™"çš„å™©æ¢¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T14:34:08.000Z" title="Thu Nov 27 2025 14:34:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ­ RBACæ¨¡å‹ï¼šåƒç”µå½±é™¢é€‰åº§ä¸€æ ·ç®¡ç†æƒé™ï¼Œå‘Šåˆ«"ä¸€ä¸ªç”¨æˆ·é…ä¸€ä¸ªæƒé™"çš„å™©æ¢¦ï¼</h2>
<blockquote>
<p>æ¬¢è¿æ¥åˆ°æ— é™å¤§çš„é¢‘é“ï¼Œæœ‰æ®µæ—¥å­æ²¡æ›´æ–°äº†ï¼Œå› ä¸ºæ‹¿äº†ä¸€ä¸ªæ¯”è¾ƒæ»¡æ„çš„offerï¼Œç»™è‡ªå·±æ”¾äº†ä¸ªå‡ï¼Œä¹‹åå°±æ…¢æ…¢æ¢å¤æ›´æ–°äº†</p>
</blockquote>
<h3 data-id="heading-1">ğŸ¬ å¼•è¨€ï¼šå½“ä½ çš„ç³»ç»Ÿæƒé™ç®¡ç†å˜æˆäº†"æ•£ç¥¨é»„ç‰›"...</h3>
<blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ æ£ç€çˆ†ç±³èŠ±ğŸ¿ï¼Œå“¼ç€ä¸»é¢˜æ›²ğŸ¶ï¼Œå…´å†²å†²è·‘åˆ°ç”µå½±é™¢æƒ³çœ‹ã€Šå¤è”5ã€‹ï¼Œç»“æœå”®ç¥¨å‘˜é¢æ— è¡¨æƒ…åœ°è¯´ï¼š"ä¸å¥½æ„æ€ï¼Œæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰åº§ä½åˆ†åŒºï¼Œæƒ³çœ‹ç”µå½±å¾—å•ç‹¬ä¹°æ¯ä¸ªåº§ä½çš„ç¥¨ğŸ«"ã€‚</p>
<p>ä½ å½“åœºçŸ³åŒ–â€”â€”è¿™å“ªæ˜¯çœ‹ç”µå½±ï¼Ÿè¿™åˆ†æ˜æ˜¯åœ¨ä¹°ç”µå½±å…çš„é©¬èµ›å…‹åœ°ç –å•Šï¼ğŸ˜±</p>
<p>ç°å®ä¸­ï¼Œ90%çš„ç³»ç»Ÿæƒé™ç®¡ç†å°±åƒè¿™ä¸ª"è„‘å›è·¯æ¸…å¥‡çš„ç”µå½±é™¢"ï¼š</p>
<ul>
<li>ç»™æ¯ä¸ªç”¨æˆ·å•ç‹¬åˆ†é…æƒé™ï¼Ÿæ”¹ä¸€æ¬¡æƒé™è¦æ”¹500ä¸ªç”¨æˆ·é…ç½®ğŸ™„</li>
<li>æ–°å‘˜å·¥å…¥èŒè¦å¡«8å¼ æƒé™ç”³è¯·è¡¨ï¼ŸHRå°å§å§éƒ½å¿«å“­äº†ğŸ˜­</li>
<li>ä¸´æ—¶è°ƒå²—ï¼Ÿæƒé™äº¤æ¥å ªæ¯”äºŒæ‰‹æˆ¿è¿‡æˆ·ğŸ“‹</li>
</ul>
<p>ç›´åˆ°RBACæ¨¡å‹æ¨ªç©ºå‡ºä¸–ï¼Œæ‰æŠŠæˆ‘ä»¬ä»è¿™ç§"æ‰‹å·¥ä½œåŠ"å¼çš„æƒé™ç®¡ç†é‡Œè§£æ”¾å‡ºæ¥â€”â€”
<strong>è¿™å°±åƒæ˜¯ç»™ç”µå½±é™¢è£…äº†ä¸ªæ™ºèƒ½åˆ†åŒºå”®ç¥¨ç³»ç»Ÿï¼</strong> ğŸš€</p>
</blockquote>
<h3 data-id="heading-2">â±ï¸ 3åˆ†é’Ÿææ‡‚RBACï¼šä»"æ•£ç¥¨é»„ç‰›"åˆ°"æ™ºèƒ½å½±é™¢å”®ç¥¨ç³»ç»Ÿ"çš„é€†è¢­ï¼</h3>
<p>RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿè¯´äººè¯å°±æ˜¯â€”â€”<strong>æƒé™ç®¡ç†ç•Œçš„"æ™ºèƒ½åˆ†åŒºå”®ç¥¨ç³»ç»Ÿ"ï¼</strong> ğŸ«</p>
<p>è®©æˆ‘ä»¬ç”¨çœ‹ç”µå½±çš„ä¾‹å­æ¥æ‹†è§£è¿™ä¸ªç¥å¥‡æ¨¡å‹ï¼š</p>

























<table><thead><tr><th>RBACæœ¯è¯­</th><th>ç”µå½±é™¢ç±»æ¯”</th><th>ç°å®ä¸­çš„ä¾‹å­</th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·ï¼ˆUserï¼‰</strong></td><td>è§‚ä¼—</td><td>ä½ çš„ç³»ç»Ÿé‡Œçš„å¼ ä¸‰ã€æå››ã€ç‹äº”</td></tr><tr><td><strong>è§’è‰²ï¼ˆRoleï¼‰</strong></td><td>åº§ä½åŒºåŸŸ</td><td>æ™®é€šå…ã€IMAXå…ã€VIPå…</td></tr><tr><td><strong>æƒé™ï¼ˆPermissionï¼‰</strong></td><td>å…·ä½“åº§ä½+æœåŠ¡</td><td>3æ’5åº§çš„åº§ä½+å…è´¹çˆ†ç±³èŠ±ğŸ¿+é¥®æ–™ğŸ¥¤</td></tr></tbody></table>
<p>å°±åƒä½ ä¹°äº†IMAXå…çš„ç¥¨ï¼Œè‡ªç„¶å°±èƒ½äº«å—"å·¨å¹•ä½“éªŒ+æœæ¯”éŸ³æ•ˆ"ï¼Œè€Œä¸ç”¨å†å•ç‹¬ä¸ºéŸ³æ•ˆä¹°å¼ ç¥¨â€”â€”RBACçš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸ª**"ç”¨æˆ·â†’è§’è‰²â†’æƒé™"çš„ä¸‰å±‚æ˜ å°„å…³ç³»**ï¼</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œä¸ç®¡æœ‰å¤šå°‘ç”¨æˆ·ï¼Œåªè¦æŠŠä»–ä»¬åˆ†åˆ°ä¸åŒçš„"å½±å…"ï¼ˆè§’è‰²ï¼‰ï¼Œä»–ä»¬è‡ªç„¶å°±èƒ½è·å¾—ç›¸åº”çš„"è§‚å½±ä½“éªŒ"ï¼ˆæƒé™ï¼‰ã€‚</p>
<p><strong>å½»åº•å‘Šåˆ«"ä¸€äººä¸€æƒé™"çš„å™©æ¢¦ï¼</strong> ğŸ‘»</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    subgraph "ğŸ¬ ç”¨æˆ·å±‚ (è§‚å½±è€…)"
        A1["å°æ˜ ğŸ‘¦\næ™®é€šç”¨æˆ·"] --&gt; B1["åˆ†é…è§’è‰²"]
        A2["å°çº¢ ğŸ’\nVIPå®¢æˆ·"] --&gt; B2["åˆ†é…è§’è‰²"]
        A3["è€ç‹ ğŸ§”\nç®¡ç†å‘˜"] --&gt; B3["åˆ†é…è§’è‰²"]
        A4["å°æ ğŸ‘¤\næ–°ç”¨æˆ·"] --&gt; B4["åˆ†é…è§’è‰²"]
    end
  
    subgraph "ğŸ« è§’è‰²å±‚ (ç¥¨ç§)"
        B1 --&gt; C1["æ™®é€šä¼šå‘˜ ğŸ‘¥"]
        B2 --&gt; C2["VIPå®¢æˆ· ğŸ’«"]
        B3 --&gt; C3["ç®¡ç†å‘˜ ğŸ› ï¸"]
        B4 --&gt; C1
    end
  
    subgraph "ğŸ¿ æƒé™å±‚ (å½±é™¢æœåŠ¡)"
        C1 --&gt; D1["æŸ¥çœ‹ç”µå½±ä¿¡æ¯ ğŸ“½ï¸"]
        C1 --&gt; D2["è´­ä¹°ç”µå½±ç¥¨ ğŸŸï¸"]
        C1 --&gt; D3["åŸºç¡€è§‚å½±ä½“éªŒ ğŸ¥"]
    
        C2 --&gt; D1
        C2 --&gt; D2
        C2 --&gt; D3
        C2 --&gt; D4["å…è´¹çˆ†ç±³èŠ± ğŸ¿"]
        C2 --&gt; D5["VIPä¼‘æ¯å®¤ ğŸ "]
        C2 --&gt; D6["ä¼˜å…ˆé€‰åº§ ğŸ’º"]
    
        C3 --&gt; D1
        C3 --&gt; D2
        C3 --&gt; D3
        C3 --&gt; D7["æ·»åŠ ç”µå½± ğŸ¬"]
        C3 --&gt; D8["ç®¡ç†ä¼šå‘˜ ğŸ’¼"]
        C3 --&gt; D9["ä¿®æ”¹ç¥¨ä»· ğŸ’°"]
    
        D1 --&gt; E["è®¿é—®èµ„æº"]
        D2 --&gt; E
        D3 --&gt; E
        D4 --&gt; E
        D5 --&gt; E
        D6 --&gt; E
        D7 --&gt; E
        D8 --&gt; E
        D9 --&gt; E
    end
  
    style A1 fill:#f9f,stroke:#333,stroke-width:2px
    style A2 fill:#bbf,stroke:#333,stroke-width:2px
    style A3 fill:#bfb,stroke:#333,stroke-width:2px
    style A4 fill:#fdd,stroke:#333,stroke-width:2px
  
    style C1 fill:#ddd,stroke:#333,stroke-width:2px
    style C2 fill:#aaf,stroke:#333,stroke-width:2px
    style C3 fill:#afa,stroke:#333,stroke-width:2px
</code></pre>
<h3 data-id="heading-3">ğŸ” Javaç‰ˆï¼šç»™ç”µå½±é™¢è£…ä¸ªæ™ºèƒ½å®‰æ£€ç³»ç»Ÿ</h3>
<p>å¦‚æœä½ ç”¨Javaå¼€å‘ï¼ŒSpring Securityæ—©å°±ç»™ä½ å‡†å¤‡å¥½äº†"ç°æˆçš„æƒé™ç®¡ç†å®‰æ£€é—¨"ï¼ç›´æ¥é…ç½®è§’è‰²æƒé™å°±è¡Œï¼Œç®€å•åˆ°å“­â€”â€”</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CinemaSecurityConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {
        http.authorizeHttpRequests()
            <span class="hljs-comment">// VIPå…åªæœ‰VIPè§’è‰²èƒ½è¿›ï¼ˆå°±åƒVIPé€šé“ï¼Œæ™®é€šè§‚ä¼—è¿›ä¸å»ï¼‰</span>
            .antMatchers(<span class="hljs-string">"/cinema/vip/**"</span>).hasRole(<span class="hljs-string">"VIP"</span>)
            <span class="hljs-comment">// IMAXå…æ™®é€šè§‚ä¼—å’ŒVIPéƒ½èƒ½è¿›ï¼ˆIMAXå…æ¯”è¾ƒè´µï¼Œä½†å¤§å®¶éƒ½èƒ½ä¹°ï¼‰</span>
            .antMatchers(<span class="hljs-string">"/cinema/imax/**"</span>).hasAnyRole(<span class="hljs-string">"VIP"</span>, <span class="hljs-string">"NORMAL"</span>)
            <span class="hljs-comment">// å…¬å…±åŒºåŸŸéšä¾¿è¿›ï¼ˆçˆ†ç±³èŠ±æŸœå°ã€æ´—æ‰‹é—´ä¸éœ€è¦æƒé™ï¼‰</span>
            .antMatchers(<span class="hljs-string">"/cinema/public/**"</span>).permitAll()
            <span class="hljs-comment">// å…¶ä»–æ‰€æœ‰åŒºåŸŸéƒ½éœ€è¦è®¤è¯</span>
            .anyRequest().authenticated()
            .and()
            <span class="hljs-comment">// é…ç½®ç™»å½•é¡µé¢</span>
            .formLogin();

        <span class="hljs-keyword">return</span> http.build();
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> UserDetailsService <span class="hljs-title function_">userDetailsService</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆ›å»ºç”¨æˆ·å’Œè§’è‰²ï¼ˆç›¸å½“äºç”µå½±ç¥¨æ•°æ®åº“ï¼‰</span>
        <span class="hljs-type">UserDetails</span> <span class="hljs-variable">vipUser</span> <span class="hljs-operator">=</span> User.withUsername(<span class="hljs-string">"xiaoming"</span>)
            .password(<span class="hljs-string">"{bcrypt}$2a$10$dxj3sw6g7p50lgmmkkmwe.20cqqubk3.hzwzg3yb1tlry.fqvm/bg"</span>) <span class="hljs-comment">// å¯†ç å·²åŠ å¯†</span>
            .roles(<span class="hljs-string">"VIP"</span>)  <span class="hljs-comment">// å°æ˜æ˜¯VIPè§‚ä¼—</span>
            .build();

        <span class="hljs-type">UserDetails</span> <span class="hljs-variable">normalUser</span> <span class="hljs-operator">=</span> User.withUsername(<span class="hljs-string">"laowang"</span>)
            .password(<span class="hljs-string">"{bcrypt}$2a$10$dxj3sw6g7p50lgmmkkmwe.20cqqubk3.hzwzg3yb1tlry.fqvm/bg"</span>) <span class="hljs-comment">// å¯†ç å·²åŠ å¯†</span>
            .roles(<span class="hljs-string">"NORMAL"</span>)  <span class="hljs-comment">// è€ç‹æ˜¯æ™®é€šè§‚ä¼—</span>
            .build();

        <span class="hljs-comment">// å†…å­˜ç”¨æˆ·ç®¡ç†å™¨ï¼ˆå®é™…é¡¹ç›®ä¸­åº”è¯¥è¿æ¥æ•°æ®åº“ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryUserDetailsManager</span>(vipUser, normalUser);
    }
}
</code></pre>
<p><strong>è¿™æ®µä»£ç åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</strong> ğŸ¤”</p>
<ol>
<li>å®šä¹‰äº†ä¸åŒ"å½±å…"ï¼ˆURLè·¯å¾„ï¼‰çš„è®¿é—®è§„åˆ™</li>
<li>åˆ›å»ºäº†ä¸¤ä¸ª"è§‚ä¼—"ï¼ˆç”¨æˆ·ï¼‰å¹¶åˆ†é…äº†ä¸åŒçš„"ç¥¨ç§"ï¼ˆè§’è‰²ï¼‰</li>
<li>å½“ç”¨æˆ·è®¿é—®ç³»ç»Ÿæ—¶ï¼ŒSpring Securityä¼šè‡ªåŠ¨æ£€æŸ¥ä»–ä»¬çš„è§’è‰²ï¼Œå†³å®šä»–ä»¬èƒ½è¿›å“ªäº›åŒºåŸŸ</li>
</ol>
<p>å°±åƒç”µå½±é™¢é—¨å£çš„æ™ºèƒ½å®‰æ£€ç³»ç»Ÿï¼Œåˆ·ä¸€ä¸‹ç¥¨å°±çŸ¥é“ä½ èƒ½è¿›å“ªä¸ªå…ï¼ğŸšª</p>
<h3 data-id="heading-4">ğŸ­ RBACçš„å››ç§"è±ªåå½±å…"ï¼šä»ç»æµèˆ±åˆ°ç§äººå½±é™¢</h3>
<p>RBACå®¶æ—ä¸€å…±æœ‰å››ä¸ªæˆå‘˜ï¼Œå°±åƒç”µå½±é™¢é‡Œçš„å››ç§ä¸åŒæ¡£æ¬¡çš„å½±å…ï¼Œå„æœ‰å„çš„ç‰¹ç‚¹ï¼Œæ»¡è¶³ä¸åŒè§„æ¨¡ç³»ç»Ÿçš„éœ€æ±‚ï¼š</p>
<h4 data-id="heading-5">ğŸ›« RBAC0ï¼šç»æµèˆ±åŸºç¡€æ¬¾ - å°å½±é™¢é¦–é€‰ï¼</h4>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šæœ€ç®€å•çš„"ç”¨æˆ·-è§’è‰²-æƒé™"ä¸‰å±‚æ˜ å°„</p>
<ul>
<li>å°±åƒé£æœºçš„ç»æµèˆ±ï¼Œè™½ç„¶ç®€å•ï¼Œä½†èƒ½æ»¡è¶³åŸºæœ¬éœ€æ±‚âœˆï¸</li>
<li>80%çš„ä¸­å°å‹ç³»ç»Ÿç”¨å®ƒå°±å¤Ÿäº†ï¼</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå°å‹é¡¹ç›®ã€åˆåˆ›å…¬å¸ã€å†…éƒ¨ç®¡ç†ç³»ç»Ÿ</li>
</ul>
<h4 data-id="heading-6">ğŸ‘‘ RBAC1ï¼šVIPå…å‡çº§æ¬¾ - å¸¦ç»§æ‰¿åŠŸèƒ½çš„é«˜çº§è´§ï¼</h4>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šåœ¨RBAC0åŸºç¡€ä¸Šå¢åŠ äº†"è§’è‰²ç»§æ‰¿"åŠŸèƒ½</p>
<ul>
<li>å°±åƒä¹°äº†VIPå…çš„ç¥¨ï¼Œè‡ªç„¶ä¹Ÿèƒ½å»æ™®é€šå…ï¼ˆæƒé™å‘ä¸‹ç»§æ‰¿ï¼‰</li>
<li>ä½†æ™®é€šå…è§‚ä¼—ç»å¯¹è¿›ä¸å»VIPåŒºï¼ˆæƒé™ä¸èƒ½å‘ä¸Šç»§æ‰¿ï¼‰</li>
<li>é€‚åˆæœ‰æ˜ç¡®èŒçº§ä½“ç³»çš„ä¼ä¸š</li>
</ul>
<p>è§’è‰²ç»§æ‰¿å…³ç³»å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b73499f39ab410a9826947490946cd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764858848&amp;x-signature=GuH6Yoz%2Bqt7EABv24P0uFoGR45g%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">ğŸ« RBAC2ï¼šå¸¦ä¸¥æ ¼æ£€ç¥¨å‘˜çš„å®‰å…¨å‡çº§ç‰ˆ</h4>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šå¢åŠ äº†å„ç§é™åˆ¶è§„åˆ™ï¼Œå°±åƒç”µå½±é™¢æœ‰äº†ä¸¥æ ¼çš„æ£€ç¥¨å‘˜</p>





























<table><thead><tr><th>çº¦æŸç±»å‹</th><th>ç”µå½±é™¢ä¾‹å­</th><th>ç³»ç»Ÿä¸­çš„åº”ç”¨</th><th>å®‰å…¨çº§åˆ«</th></tr></thead><tbody><tr><td><strong>è§’è‰²äº’æ–¥</strong></td><td>ä¸èƒ½åŒæ—¶ä¹°"æ™®é€šå…"å’Œ"VIPå…"çš„ç¥¨</td><td>ä¸€ä¸ªç”¨æˆ·ä¸èƒ½åŒæ—¶æ‹¥æœ‰"è´¢åŠ¡å®¡æ ¸"å’Œ"è´¢åŠ¡ä»˜æ¬¾"æƒé™</td><td>ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”</td></tr><tr><td><strong>åŸºæ•°çº¦æŸ</strong></td><td>VIPå…æœ€å¤šå–20å¼ ç¥¨</td><td>ç®¡ç†å‘˜è§’è‰²æœ€å¤šåªèƒ½åˆ†é…ç»™5ä¸ªç”¨æˆ·</td><td>ğŸ”ğŸ”ğŸ”</td></tr><tr><td><strong>å…ˆå†³æ¡ä»¶</strong></td><td>ä¹°IMAXç¥¨å¿…é¡»å…ˆä¹°è¿‡æ™®é€šç¥¨</td><td>è¦è·å¾—"ç»ç†"è§’è‰²å¿…é¡»å…ˆæœ‰"æ™®é€šå‘˜å·¥"è§’è‰²</td><td>ğŸ”ğŸ”ğŸ”ğŸ”</td></tr></tbody></table>
<p>å°±åƒç”µå½±é™¢è§„å®š"1ç±³2ä»¥ä¸‹å„¿ç«¥ä¸èƒ½çœ‹Rçº§ç‰‡"ï¼ŒRBAC2è®©ä½ çš„æƒé™ç®¡ç†æ›´å®‰å…¨ğŸ”’</p>
<h4 data-id="heading-8">ğŸ† RBAC3ï¼šç§äººå®šåˆ¶å½±é™¢ - ä¼ä¸šçº§è±ªåå¥—é¤ï¼</h4>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šRBAC1 + RBAC2 = å®‡å®™æ— æ•Œè±ªåç‰ˆ</p>
<ul>
<li>æ—¢æœ‰è§’è‰²ç»§æ‰¿çš„ä¾¿åˆ©æ€§ï¼Œåˆæœ‰ä¸¥æ ¼çš„æƒé™çº¦æŸ</li>
<li>å°±åƒç§äººå®šåˆ¶å½±é™¢ï¼Œæ—¢èƒ½äº«å—æ‰€æœ‰æ”¾æ˜ æŠ€æœ¯ï¼Œåˆèƒ½ä¸¥æ ¼æ§åˆ¶å…¥åœºäººæ•°</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§å‹ä¼ä¸šã€é‡‘èç³»ç»Ÿã€éœ€è¦ä¸¥æ ¼æƒé™æ§åˆ¶çš„å¤æ‚åº”ç”¨</li>
</ul>
<h3 data-id="heading-9">ğŸ“Š RBACå››ç§æ¨¡å‹è¯¦ç»†å¯¹æ¯”è¡¨</h3>


















































<table><thead><tr><th align="left"><strong>æ¨¡å‹ç‰ˆæœ¬</strong></th><th align="left"><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></th><th align="left"><strong>å¤æ‚åº¦</strong></th><th align="left"><strong>é€‚ç”¨åœºæ™¯</strong></th><th align="left"><strong>å¼€å‘éš¾åº¦</strong></th><th align="left"><strong>ç”µå½±é™¢ç±»æ¯”</strong></th><th align="left"><strong>æ¨èæŒ‡æ•°</strong></th></tr></thead><tbody><tr><td align="left"><strong>RBAC0</strong></td><td align="left">ç”¨æˆ·-è§’è‰²-æƒé™ä¸‰å±‚æ˜ å°„</td><td align="left">â­â­</td><td align="left">å°å‹é¡¹ç›®ã€åˆåˆ›å…¬å¸ã€å†…éƒ¨ç®¡ç†ç³»ç»Ÿ</td><td align="left">ğŸ’»</td><td align="left">ç»æµèˆ±/æ™®é€šå½±å…</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸ</td></tr><tr><td align="left"><strong>RBAC1</strong></td><td align="left">RBAC0 + è§’è‰²ç»§æ‰¿åŠŸèƒ½</td><td align="left">â­â­â­</td><td align="left">æœ‰èŒçº§ä½“ç³»çš„ä¼ä¸š</td><td align="left">ğŸ’»ğŸ’»</td><td align="left">VIPå…</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td></tr><tr><td align="left"><strong>RBAC2</strong></td><td align="left">RBAC0 + çº¦æŸè§„åˆ™</td><td align="left">â­â­â­</td><td align="left">å®‰å…¨è¦æ±‚é«˜çš„ç³»ç»Ÿ</td><td align="left">ğŸ’»ğŸ’»ğŸ’»</td><td align="left">å¸¦ä¸¥æ ¼æ£€ç¥¨å‘˜çš„å½±å…</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</td></tr><tr><td align="left"><strong>RBAC3</strong></td><td align="left">RBAC1 + RBAC2</td><td align="left">â­â­â­â­â­</td><td align="left">å¤§å‹å¤æ‚ä¼ä¸šç³»ç»Ÿ</td><td align="left">ğŸ’»ğŸ’»ğŸ’»ğŸ’»ğŸ’»</td><td align="left">ç§äººå®šåˆ¶å½±é™¢</td><td align="left">ğŸŒŸğŸŒŸğŸŒŸ</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>åˆåˆ›é¡¹ç›®/å°å›¢é˜Ÿï¼šä»RBAC0å¼€å§‹ï¼ŒåæœŸæ ¹æ®éœ€æ±‚å‡çº§åˆ°RBAC1</li>
<li>ä¸­å¤§å‹ä¼ä¸šï¼šRBAC1æˆ–RBAC2æ˜¯å¹³è¡¡å®‰å…¨æ€§å’Œå¤æ‚åº¦çš„æœ€ä½³é€‰æ‹©</li>
<li>é‡‘è/åŒ»ç–—ç­‰æ•æ„Ÿè¡Œä¸šï¼šå»ºè®®ä½¿ç”¨RBAC2ä»¥æ»¡è¶³åˆè§„è¦æ±‚</li>
<li>è¶…å¤§ç³»ç»Ÿï¼šRBAC3è™½ç„¶åŠŸèƒ½æœ€å…¨ï¼Œä½†å¼€å‘ç»´æŠ¤æˆæœ¬é«˜ï¼Œéœ€è°¨æ…é€‰æ‹©</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/251b4cf15880403b82cd7755b968e824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg6ZmQ5aSnNg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764858848&amp;x-signature=AMpU%2FOSy%2B3M6EZ6sb33LKWOeQHE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-10">âš ï¸ é¿å‘æŒ‡å—ï¼šåˆ«è®©ä½ çš„RBACå˜æˆ"çƒ‚ç‰‡"ï¼</h3>
<h4 data-id="heading-11">ğŸš¨ å‘ä¸€ï¼šè§’è‰²çˆ†ç‚¸ - ä½ çš„ç³»ç»Ÿé‡Œæœ‰1000ä¸ªè§’è‰²å—ï¼Ÿ</h4>
<p>æŸé“¶è¡Œç³»ç»Ÿçš„å·¥ç¨‹å¸ˆçªå‘å¥‡æƒ³ï¼š"æŠŠæ¯ä¸ªå²—ä½éƒ½è®¾æˆç‹¬ç«‹è§’è‰²å§ï¼"ç»“æœâ€”â€”</p>
<ul>
<li>"ä¸Šæµ·å¾æ±‡åŒºå®¢æˆ·ç»ç†"</li>
<li>"åŒ—äº¬æœé˜³åŒºå®¢æˆ·ç»ç†"</li>
<li>"å¹¿å·å¤©æ²³åŒºå®¢æˆ·ç»ç†"</li>
<li>...</li>
</ul>
<p>ç³»ç»Ÿé‡Œå‡ºç°äº†200å¤šä¸ªç±»ä¼¼è§’è‰²ï¼Œç®¡ç†å‘˜éƒ½å¿«è¢«é€¼ç–¯äº†ï¼ğŸ˜µâ€ğŸ’«</p>
<p><strong>æ­£ç¡®å§¿åŠ¿</strong>ï¼šè§’è‰²æŒ‰èŒè´£åˆ’åˆ†ï¼ŒåŒºåŸŸä½œä¸ºæ•°æ®æƒé™æ§åˆ¶ï¼ğŸŒ</p>
<h4 data-id="heading-12">ğŸš¨ å‘äºŒï¼šæƒé™ç²’åº¦è¿‡ç²— - "è¦ä¹ˆå…¨æœ‰è¦ä¹ˆå…¨æ— "çš„å™©æ¢¦</h4>
<p>å°±åƒç”µå½±é™¢åªå–"è§‚å½±æƒ"ï¼Œå´ä¸ç»†åˆ†"3Dçœ¼é•œç§Ÿèµæƒ"ã€"ä¸­é€”ç¦»åœºå†å…¥åœºæƒ"...</p>
<p><strong>æƒé™è®¾è®¡åº”è¯¥ç²¾ç»†åˆ°æŒ‰é’®çº§åˆ«</strong>ï¼š</p>
<ul>
<li>"æŸ¥çœ‹è®¢å•"å’Œ"å¯¼å‡ºè®¢å•"æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æƒé™</li>
<li>"ç¼–è¾‘ä¸ªäººèµ„æ–™"å’Œ"ä¿®æ”¹è–ªèµ„æ•°æ®"æ›´æ˜¯å¤©å£¤ä¹‹åˆ«</li>
</ul>
<h4 data-id="heading-13">ğŸš¨ å‘ä¸‰ï¼šå¿½è§†å®¡è®¡ - "è°åŠ¨äº†æˆ‘çš„æƒé™è›‹ç³•ï¼Ÿ"</h4>
<p>æ²¡æœ‰æ—¥å¿—è®°å½•çš„RBACå°±åƒæ²¡æœ‰ç›‘æ§çš„å½±é™¢ï¼Œå‡ºäº†é—®é¢˜æ‰¾ä¸åˆ°è´£ä»»äººï¼</p>
<p><strong>ä¸€å®šè¦è®°å½•</strong>ï¼š<strong>è°åœ¨ä»€ä¹ˆæ—¶å€™ç”¨äº†ä»€ä¹ˆæƒé™</strong> ğŸ•µï¸â€â™‚ï¸</p>
<h3 data-id="heading-14">ğŸ† å¤§å‚éƒ½æ˜¯æ€ä¹ˆè®¾è®¡æƒé™çš„ï¼Ÿ</h3>
<h4 data-id="heading-15">ğŸ’° SAPç³»ç»Ÿï¼šè´¢åŠ¡æƒé™çš„"åˆ†çº§å”®ç¥¨çª—å£"</h4>
<p>SAPæŠŠè´¢åŠ¡ç³»ç»Ÿåˆ†æˆäº†ç²¾ç»†çš„æƒé™å±‚çº§ï¼š</p>
<ul>
<li>"ä¼šè®¡"è§’è‰²åªèƒ½"å½•å‡­è¯"</li>
<li>"è´¢åŠ¡ç»ç†"è§’è‰²èƒ½"å½•å‡­è¯+å®¡æ‰¹"</li>
<li>"è´¢åŠ¡æ€»ç›‘"è§’è‰²æ‹¥æœ‰å…¨éƒ¨æƒé™</li>
</ul>
<p>å°±åƒç”µå½±é™¢çš„å”®ç¥¨çª—å£åˆ†"æ™®é€šç¥¨çª—å£"å’Œ"VIPä¸“å±çª—å£"ï¼Œæ—¢é¿å…è¶Šæƒæ“ä½œï¼Œåˆä¿è¯å·¥ä½œæµé¡ºç•…ã€‚</p>
<h4 data-id="heading-16">â˜ï¸ AWS IAMï¼šäº‘èµ„æºçš„"åŠ¨æ€åº§ä½å›¾"</h4>
<p>AWSçš„æƒé™ç³»ç»Ÿç²¾ç»†åˆ°è®©äººæƒŠå¹ï¼š</p>
<ul>
<li>ç®¡ç†å‘˜/å¼€å‘/åªè¯»è§’è‰²æ˜ç¡®åˆ†ç¦»</li>
<li>EC2å®ä¾‹çš„"å¯åŠ¨/åœæ­¢/æŸ¥çœ‹"æƒé™ç²¾ç¡®åˆ°APIçº§åˆ«</li>
<li>S3å­˜å‚¨æ¡¶çš„"ä¸Šä¼ /ä¸‹è½½/åˆ é™¤"æƒé™å¯æŒ‰æ–‡ä»¶å¤¹è®¾ç½®</li>
</ul>
<p>è¿™å¥½æ¯”IMAXå…ä¸ä»…åˆ†åº§ä½ï¼Œè¿˜æŒ‰åº§ä½æä¾›ä¸åŒæœåŠ¡ï¼ˆå‰æ’é€è€³æœºï¼Œåæ’é€é å«ï¼‰ï¼Œå®ç°äº†çœŸæ­£çš„ç²¾ç»†åŒ–æƒé™ç®¡æ§ï¼</p>
<h4 data-id="heading-17">ğŸš¢ Kubernetesï¼šå®¹å™¨é›†ç¾¤çš„"å½±å…åˆ†åŒºç³»ç»Ÿ"</h4>
<p>K8sçš„æƒé™æ§åˆ¶å ªç§°æ•™ç§‘ä¹¦çº§åˆ«ï¼š</p>
<ul>
<li>ClusterRoleå®šä¹‰"pod-reader"è§’è‰²ï¼Œå…è®¸å¼€å‘äººå‘˜æŸ¥çœ‹ä½†ä¸èƒ½åˆ é™¤å®¹å™¨</li>
<li>é€šè¿‡RoleBindingç»‘å®šåˆ°ç‰¹å®šå‘½åç©ºé—´</li>
<li>å³ä½¿éƒ½æ˜¯"è§‚ä¼—"ï¼Œä¹Ÿä¸¥æ ¼é™åˆ¶åœ¨è‡ªå·±çš„"å½±å…"é‡Œ</li>
</ul>
<p>å°±åƒç”µå½±é™¢æŠŠ"IMAXå…"å’Œ"æ™®é€šå…"ç‰©ç†éš”ç¦»ï¼Œé˜²æ­¢æœ‰äººä¸²å…æäº‹æƒ…ï¼ğŸ”’</p>
<p><strong>åˆ’é‡ç‚¹</strong>ï¼šå°±ç®—æ˜¯å¥½æ¨¡å‹ï¼Œç”¨ä¸å¥½ä¹Ÿä¼šç¿»è½¦ã€‚ä¸Šé¢è¿™ä¸‰ä¸ªå‘ï¼Œä¸€å®šè¦é¿å¼€ï¼</p>
<h3 data-id="heading-18">ğŸš€ ç»“è¯­ï¼šä»"æ‰‹å·¥ä½œåŠ"åˆ°"æ™ºèƒ½å½±é™¢"çš„æƒé™ç®¡ç†è¿›åŒ–ï¼</h3>
<p>RBACæ¨¡å‹çš„ä¼Ÿå¤§ä¹‹å¤„ï¼Œåœ¨äºå®ƒæŠŠæƒé™ç®¡ç†ä»"å–æ•£è£…åº§ä½"å˜æˆäº†"åˆ†åŒºå”®ç¥¨ç³»ç»Ÿ"ã€‚å½“ä½ ä¸‹æ¬¡å†ä¸ºæƒé™é…ç½®æŠ“ç‹‚æ—¶ï¼Œæƒ³æƒ³ç”µå½±é™¢çš„ä¾‹å­ï¼š<strong>ç”¨æˆ·æ˜¯è§‚ä¼—ï¼Œè§’è‰²æ˜¯ç¥¨ç§ï¼Œæƒé™æ˜¯åº§ä½å’ŒæœåŠ¡</strong>ã€‚</p>
<p>æœ€åé€å¤§å®¶ä¸€ä¸ªRBACå®æ–½ Checklistï¼š</p>
<p>âœ… <strong>å…ˆæ¢³ç†å…¬å¸çš„ç»„ç»‡æ¶æ„</strong>ï¼ˆç›¸å½“äºå½±é™¢å¹³é¢å›¾ï¼‰
âœ… <strong>æŒ‰èŒè´£åˆ’åˆ†è§’è‰²</strong>ï¼ˆè®¾è®¡ç¥¨ç§ï¼‰
âœ… <strong>ç»™è§’è‰²åˆ†é…æœ€å°å¿…è¦æƒé™</strong>ï¼ˆé¿å…è¿‡åº¦æˆæƒï¼‰
âœ… <strong>å®šæœŸå®¡è®¡è§’è‰²å’Œæƒé™</strong>ï¼ˆæŸ¥ç¥¨æ ¹ï¼‰</p>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™æŠŠä½ çš„ç³»ç»Ÿæƒé™ç®¡ç†ä»"é»„ç‰›ç¥¨æ—¶ä»£"å‡çº§åˆ°"æ™ºèƒ½å½±é™¢æ—¶ä»£"äº†ï¼ğŸ¬ äº«å—è¿™ç§å¦‚ä¸èˆ¬é¡ºæ»‘çš„æƒé™ç®¡ç†ä½“éªŒå§ï¼</p>
<blockquote>
<p>ğŸ’¡ <strong>æ€è€ƒé¢˜</strong>ï¼šå¦‚æœæŠŠABACæ¨¡å‹ï¼ˆåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰æ¯”ä½œ"åŠ¨æ€ç¥¨ä»·ç³»ç»Ÿ"ï¼ˆå¦‚å‘¨äºŒåŠä»·ã€å­¦ç”ŸæŠ˜æ‰£ï¼‰ï¼Œå®ƒå’ŒRBACä¼šæ“¦å‡ºä»€ä¹ˆç«èŠ±ï¼Ÿè¯„è®ºåŒºè¯´è¯´ä½ çš„æƒ³æ³•ï¼ğŸ‘‡ è¯´ä¸å®šä½ çš„æƒ³æ³•ä¼šå¯å‘ä¸‹ä¸€ç¯‡ç²¾å½©æ–‡ç« å“¦ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openGaussèµ‹èƒ½æ™ºèƒ½å®¢æœï¼šAIæ—¶ä»£çš„ä¼ä¸šæœåŠ¡å˜é©]]></title>    <link>https://juejin.cn/post/7577228831138103339</link>    <guid>https://juejin.cn/post/7577228831138103339</guid>    <pubDate>2025-11-27T12:57:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831138103339" data-draft-id="7577228831138086955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openGaussèµ‹èƒ½æ™ºèƒ½å®¢æœï¼šAIæ—¶ä»£çš„ä¼ä¸šæœåŠ¡å˜é©"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-27T12:57:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openGaussèµ‹èƒ½æ™ºèƒ½å®¢æœï¼šAIæ—¶ä»£çš„ä¼ä¸šæœåŠ¡å˜é©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T12:57:08.000Z" title="Thu Nov 27 2025 12:57:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œä¼ä¸šå¯¹æ™ºèƒ½å®¢æœç³»ç»Ÿçš„éœ€æ±‚æ—¥ç›Šå¢é•¿ã€‚ä¼ ç»Ÿçš„å®¢æœç³»ç»Ÿé¢ä¸´ç€æ•°æ®ç®¡ç†å¤æ‚ã€å“åº”æ•ˆç‡ä½ã€ä¸ªæ€§åŒ–æœåŠ¡ä¸è¶³ç­‰æŒ‘æˆ˜ã€‚openGaussä½œä¸ºä¸€æ¬¾å¼€æºä¼ä¸šçº§å…³ç³»å‹æ•°æ®åº“ï¼Œå‡­å€Ÿå…¶å¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€å‘é‡æ•°æ®åº“æ”¯æŒå’ŒAIå‹å¥½çš„ç‰¹æ€§ï¼Œä¸ºæ™ºèƒ½å®¢æœç³»ç»Ÿçš„æ„å»ºæä¾›äº†åšå®çš„æ•°æ®åŸºç¡€ã€‚æœ¬æ–‡æ¢è®¨äº†openGaussåœ¨æ™ºèƒ½å®¢æœé¢†åŸŸçš„åº”ç”¨ï¼Œåˆ†æäº†å…¶å¦‚ä½•èµ‹èƒ½ä¼ä¸šå®ç°é«˜æ•ˆã€æ™ºèƒ½ã€ä¸ªæ€§åŒ–çš„å®¢æˆ·æœåŠ¡ä½“éªŒã€‚</p>
<h2 data-id="heading-1">èƒŒæ™¯ä¸æœºé‡</h2>
<h4 data-id="heading-2">AIæ™ºèƒ½å®¢æœçš„èƒŒæ™¯</h4>
<p>åœ¨æ•°å­—åŒ–è½¬å‹çš„æµªæ½®ä¸­ï¼Œä¼ä¸šå®¢æœå·²ä»ç®€å•çš„é—®é¢˜è§£ç­”æ¼”è¿›ä¸ºå¤æ‚çš„å®¢æˆ·å…³ç³»ç®¡ç†å’ŒæœåŠ¡åˆ›æ–°çš„é‡è¦ç¯èŠ‚ã€‚æ ¹æ®è¡Œä¸šæ•°æ®æ˜¾ç¤ºï¼Œä¼ä¸šå¹³å‡æ¯å¹´å¤„ç†æ•°ç™¾ä¸‡çº§åˆ«çš„å®¢æˆ·å’¨è¯¢ï¼Œä¼ ç»Ÿçš„äººå·¥å®¢æœæ¨¡å¼é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>æ•ˆç‡ç“¶é¢ˆ</strong>ï¼šäººå·¥å®¢æœå“åº”æ—¶é—´é•¿ï¼Œæ— æ³•24å°æ—¶å…¨å¤©å€™æœåŠ¡</p>
</li>
<li>
<p><strong>æˆæœ¬å‹åŠ›</strong>ï¼šå®¢æœäººå‘˜åŸ¹è®­ã€ç®¡ç†æˆæœ¬é«˜ï¼Œäººå‘˜æµåŠ¨ç‡å¤§</p>
</li>
<li>
<p><strong>æœåŠ¡è´¨é‡ä¸å‡</strong>ï¼šæœåŠ¡è´¨é‡ä¾èµ–äºä¸ªäººèƒ½åŠ›ï¼Œéš¾ä»¥ä¿è¯ä¸€è‡´æ€§</p>
</li>
<li>
<p><strong>æ•°æ®å­¤å²›</strong>ï¼šå®¢æˆ·ä¿¡æ¯åˆ†æ•£ï¼Œéš¾ä»¥å½¢æˆç»Ÿä¸€çš„çŸ¥è¯†åº“</p>
</li>
<li>
<p><strong>ä¸ªæ€§åŒ–ä¸è¶³</strong>ï¼šæ— æ³•æ ¹æ®å®¢æˆ·å†å²å’Œåå¥½æä¾›å®šåˆ¶åŒ–æœåŠ¡</p>
</li>
</ul>
<h4 data-id="heading-3">AIæ™ºèƒ½å®¢æœçš„æœºé‡</h4>
<p>äººå·¥æ™ºèƒ½æŠ€æœ¯çš„çªç ´ä¸ºå®¢æœè¡Œä¸šå¸¦æ¥äº†æ–°çš„æœºé‡ã€‚é€šè¿‡è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ã€æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰å’Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç­‰æŠ€æœ¯ï¼Œä¼ä¸šå¯ä»¥æ„å»ºèƒ½å¤Ÿç†è§£å®¢æˆ·æ„å›¾ã€è‡ªåŠ¨ç”Ÿæˆå›å¤ã€æŒç»­å­¦ä¹ æ”¹è¿›çš„æ™ºèƒ½å®¢æœç³»ç»Ÿã€‚</p>
<p>ç„¶è€Œï¼Œæ„å»ºé«˜æ•ˆçš„AIæ™ºèƒ½å®¢æœç³»ç»Ÿéœ€è¦ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åŸºç¡€è®¾æ–½ï¼Œè¿™æ­£æ˜¯openGaussçš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-4">openGaussçš„æ ¸å¿ƒèƒ½åŠ›</h2>
<h4 data-id="heading-5">ä¼ä¸šçº§æ•°æ®åº“ç‰¹æ€§</h4>
<p>openGaussæ˜¯åä¸ºè‡ªä¸»ç ”å‘çš„å¼€æºä¼ä¸šçº§å…³ç³»å‹æ•°æ®åº“ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<h5 data-id="heading-6">é«˜æ€§èƒ½</h5>
<ul>
<li>
<p><strong>OLTP****ä¼˜åŒ–</strong>ï¼šé’ˆå¯¹åœ¨çº¿äº‹åŠ¡å¤„ç†è¿›è¡Œæ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯</p>
</li>
<li>
<p><strong>æŸ¥è¯¢åŠ é€Ÿ</strong>ï¼šå…ˆè¿›çš„æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œæ‰§è¡Œå¼•æ“ï¼Œæ¯«ç§’çº§å“åº”</p>
</li>
<li>
<p><strong>æ‰¹é‡å¤„ç†</strong>ï¼šæ”¯æŒå¤§è§„æ¨¡æ•°æ®å¯¼å…¥å’Œå¤„ç†ï¼Œæå‡æ•°æ®ååé‡</p>
</li>
</ul>
<h5 data-id="heading-7">é«˜å¯ç”¨æ€§</h5>
<ul>
<li>
<p><strong>ä¸»å¤‡ä¸€ä½“åŒ–</strong>ï¼šæ”¯æŒåŒæ­¥å¤åˆ¶ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±</p>
</li>
<li>
<p><strong>æ•…éšœè‡ªåŠ¨è½¬ç§»</strong>ï¼šç§’çº§æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨åˆ‡æ¢</p>
</li>
<li>
<p><strong>å¤šå‰¯æœ¬æœºåˆ¶</strong>ï¼šæ”¯æŒå¤šä¸ªå¤‡ä»½å‰¯æœ¬ï¼Œæå‡ç³»ç»Ÿå¯é æ€§</p>
</li>
</ul>
<h5 data-id="heading-8">å®‰å…¨æ€§</h5>
<ul>
<li>
<p><strong>å¤šå±‚å®‰å…¨é˜²æŠ¤</strong>ï¼šèº«ä»½è®¤è¯ã€æƒé™æ§åˆ¶ã€æ•°æ®åŠ å¯†</p>
</li>
<li>
<p><strong>å®¡è®¡æ—¥å¿—</strong>ï¼šå®Œæ•´çš„æ“ä½œå®¡è®¡ï¼Œæ»¡è¶³åˆè§„è¦æ±‚</p>
</li>
<li>
<p><strong>æ•°æ®éšç§ä¿æŠ¤</strong>ï¼šæ”¯æŒè¡Œçº§å®‰å…¨ç­–ç•¥å’Œæ•°æ®è„±æ•</p>
</li>
</ul>
<h4 data-id="heading-9">å‘é‡æ•°æ®åº“èƒ½åŠ›</h4>
<p>openGaussé›†æˆäº†å‘é‡æ•°æ®åº“åŠŸèƒ½ï¼Œè¿™æ˜¯AIåº”ç”¨çš„å…³é”®ï¼š</p>
<h5 data-id="heading-10">å‘é‡å­˜å‚¨ä¸æ£€ç´¢</h5>
<ul>
<li>
<p><strong>é«˜ç»´å‘é‡æ”¯æŒ</strong>ï¼šåŸç”Ÿæ”¯æŒé«˜ç»´å‘é‡æ•°æ®ç±»å‹</p>
</li>
<li>
<p><strong>å‘é‡ç´¢å¼•</strong>ï¼šæ”¯æŒIVFFlatã€HNSWç­‰é«˜æ•ˆç´¢å¼•ç®—æ³•</p>
</li>
<li>
<p><strong>ç›¸ä¼¼åº¦æœç´¢</strong>ï¼šæ¯«ç§’çº§çš„å‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢</p>
</li>
</ul>
<h5 data-id="heading-11">å‘é‡ä¸å…³ç³»æ•°æ®èåˆ</h5>
<ul>
<li>
<p><strong>ç»Ÿä¸€å­˜å‚¨</strong>ï¼šå‘é‡å’Œç»“æ„åŒ–æ•°æ®åœ¨åŒä¸€æ•°æ®åº“ä¸­ç®¡ç†</p>
</li>
<li>
<p><strong>è”åˆæŸ¥è¯¢</strong>ï¼šæ”¯æŒå‘é‡ä¸å…³ç³»æ•°æ®çš„æ··åˆæŸ¥è¯¢</p>
</li>
<li>
<p><strong>äº‹åŠ¡ä¸€è‡´æ€§</strong>ï¼šä¿è¯å‘é‡å’Œå…³ç³»æ•°æ®çš„ä¸€è‡´æ€§</p>
</li>
</ul>
<h4 data-id="heading-12">AIå‹å¥½çš„ç‰¹æ€§</h4>
<h5 data-id="heading-13">å‘é‡åŒ–è®¡ç®—</h5>
<ul>
<li>
<p><strong>SIMD****ä¼˜åŒ–</strong>ï¼šå……åˆ†åˆ©ç”¨ç°ä»£CPUçš„å‘é‡åŒ–æŒ‡ä»¤</p>
</li>
<li>
<p><strong>GPU****åŠ é€Ÿ</strong>ï¼šæ”¯æŒGPUåŠ é€Ÿçš„å‘é‡è®¡ç®—</p>
</li>
<li>
<p><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šé«˜æ•ˆçš„æ‰¹é‡å‘é‡æ“ä½œ</p>
</li>
</ul>
<h5 data-id="heading-14">ä¸AIæ¡†æ¶çš„é›†æˆ</h5>
<ul>
<li>
<p><strong>Pythonæ”¯æŒ</strong>ï¼šåŸç”Ÿæ”¯æŒPythonå®¢æˆ·ç«¯å’Œå­˜å‚¨è¿‡ç¨‹</p>
</li>
<li>
<p><strong>å¼€æºç”Ÿæ€</strong>ï¼šä¸TensorFlowã€PyTorchç­‰ä¸»æµAIæ¡†æ¶å…¼å®¹</p>
</li>
<li>
<p><strong>å‘é‡åŒ–æ¥å£</strong>ï¼šæä¾›å‹å¥½çš„å‘é‡æ“ä½œAPI</p>
</li>
</ul>
<h2 data-id="heading-15">æ™ºèƒ½å®¢æœç³»ç»Ÿæ¶æ„</h2>
<h4 data-id="heading-16">ç³»ç»Ÿæ•´ä½“æ¶æ„</h4>
<p>è¡¨ç°å±‚ (Controller)</p>
<p>â†“</p>
<p>ä¸šåŠ¡å±‚ (Service)</p>
<p>â†“</p>
<p>æ•°æ®è®¿é—®å±‚ (Repository)</p>
<p>â†“</p>
<p>æ•°æ®æ¨¡å‹å±‚ (Entity)</p>
<p>â†“</p>
<p>æ•°æ®åº“å±‚ (openGauss/PostgreSQL)</p>
<h4 data-id="heading-17">æ ¸å¿ƒæ¨¡å—è®¾è®¡</h4>
<h5 data-id="heading-18">æ™ºèƒ½é—®ç­”æ¨¡å—</h5>
<ul>
<li>
<p>åŸºäºå‘é‡ç›¸ä¼¼åº¦çš„è¯­ä¹‰æœç´¢</p>
</li>
<li>
<p>æ”¯æŒå¤šçŸ¥è¯†åº“æ¡ç›®æ’åº</p>
</li>
<li>
<p>å¯é…ç½®çš„ç›¸ä¼¼åº¦é˜ˆå€¼å’Œè¿”å›æ•°é‡</p>
</li>
<li>
<p><strong>å®ç°ç±»</strong>: SmartCustomerService.smartQA()</p>
</li>
</ul>
<h5 data-id="heading-19">ä¸ªæ€§åŒ–æ¨èæ¨¡å—</h5>
<ul>
<li>
<p>åŸºäºå®¢æˆ·æ¡£æ¡ˆå‘é‡çš„æ¨è</p>
</li>
<li>
<p>è€ƒè™‘ä¼˜å…ˆçº§å’ŒVIPç­‰çº§çš„åŠ æƒè®¡ç®—</p>
</li>
<li>
<p>åŠ¨æ€ç”Ÿæˆä¸ªæ€§åŒ–ç»“æœ</p>
</li>
<li>
<p><strong>å®ç°ç±»</strong>: SmartCustomerService.getPersonalizedRecommendations()</p>
</li>
</ul>
<h5 data-id="heading-20">å¯¹è¯ç®¡ç†æ¨¡å—</h5>
<ul>
<li>
<p>å¤šæ¸ é“å¯¹è¯æ”¯æŒï¼ˆWeb/App/å¾®ä¿¡ç­‰ï¼‰</p>
</li>
<li>
<p>å®Œæ•´çš„å¯¹è¯å†å²è®°å½•</p>
</li>
<li>
<p>å¯¹è¯çŠ¶æ€è·Ÿè¸ªå’Œæ„å›¾è¯†åˆ«</p>
</li>
<li>
<p><strong>å®ç°ç±»</strong>: SmartCustomerService.createConversationSession(), logMessage(), closeConversationSession()</p>
</li>
</ul>
<h5 data-id="heading-21">å®¢æˆ·æ¡£æ¡ˆç®¡ç†æ¨¡å—</h5>
<ul>
<li>
<p>å®¢æˆ·åŸºæœ¬ä¿¡æ¯ç®¡ç†</p>
</li>
<li>
<p>VIPç­‰çº§å’Œæ¶ˆè´¹ç»Ÿè®¡</p>
</li>
<li>
<p>ä¸ªæ€§åŒ–åå¥½å­˜å‚¨</p>
</li>
<li>
<p><strong>å®ç°ç±»</strong>: SmartCustomerService.updateCustomerProfile()</p>
</li>
</ul>
<h5 data-id="heading-22">æ•°æ®åˆ†ææ¨¡å—</h5>
<ul>
<li>
<p>æ»¡æ„åº¦åˆ†æè§†å›¾</p>
</li>
<li>
<p>æ„å›¾åˆ†å¸ƒç»Ÿè®¡</p>
</li>
<li>
<p>è§£å†³ç‡å’Œé«˜æ»¡æ„åº¦ç‡è®¡ç®—</p>
</li>
<li>
<p><strong>å®ç°æ–¹å¼</strong>: SQLè§†å›¾ (satisfaction_analysis, intent_distribution)</p>
</li>
</ul>
<h2 data-id="heading-23">å®ç°æœ€ä½³å®è·µ</h2>
<h4 data-id="heading-24">æ•°æ®æ¨¡å‹è®¾è®¡</h4>
<h5 data-id="heading-25">å‘é‡ç»´åº¦é€‰æ‹©</h5>
<ul>
<li>
<p><strong>æ¨èç»´åº¦</strong>ï¼š657-1435ç»´</p>
</li>
<li>
<p><strong>æƒè¡¡è€ƒè™‘</strong>ï¼šç»´åº¦è¶Šé«˜ç²¾åº¦è¶Šå¥½ï¼Œä½†å­˜å‚¨å’Œè®¡ç®—æˆæœ¬å¢åŠ </p>
</li>
<li>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼šæ ¹æ®å…·ä½“çš„embeddingæ¨¡å‹é€‰æ‹©ï¼Œå¦‚BERTä½¿ç”¨657ç»´ï¼ŒOpenAI embeddingä½¿ç”¨1435ç»´</p>
</li>
</ul>
<h5 data-id="heading-26">å‘é‡ç´¢å¼•ç­–ç•¥</h5>
<p>-- IVFFlatç´¢å¼•ï¼šé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«</p>
<p>CREATE INDEX idx_ivf ON knowledge_base</p>
<p>USING ivfflat (embedding vector_cosine_ops)</p>
<p>WITH (lists = 100);</p>
<p>-- HNSWç´¢å¼•ï¼šé€‚åˆé«˜ç»´æ•°æ®ï¼Œç²¾åº¦é«˜</p>
<p>CREATE INDEX idx_hnsw ON knowledge_base</p>
<p>USING hnsw (embedding vector_cosine_ops)</p>
<p>WITH (m = 15, ef_construction = 200);</p>
<h5 data-id="heading-27">æ··åˆæŸ¥è¯¢ä¼˜åŒ–</h5>
<p>-- ç»“åˆå‘é‡ç›¸ä¼¼åº¦å’Œå…³é”®å­—åŒ¹é…</p>
<p>SELECT id, title, content,</p>
<p>1 - (embedding &lt;=&gt; query_embedding) as similarity</p>
<p>FROM knowledge_base</p>
<p>WHERE category = 'faq'</p>
<p>AND (title ILIKE '%å…³é”®è¯%' OR content ILIKE '%å…³é”®è¯%')</p>
<p>ORDER BY similarity DESC</p>
<p>LIMIT 10;</p>
<h4 data-id="heading-28">æ€§èƒ½ä¼˜åŒ–</h4>
<h5 data-id="heading-29">æŸ¥è¯¢ä¼˜åŒ–</h5>
<ul>
<li>
<p><strong>ä½¿ç”¨å‘é‡ç´¢å¼•</strong>ï¼šç¡®ä¿å‘é‡æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•</p>
</li>
<li>
<p><strong>é™åˆ¶è¿”å›ç»“æœ</strong>ï¼šä½¿ç”¨LIMITé™åˆ¶è¿”å›æ•°é‡</p>
</li>
<li>
<p><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šä½¿ç”¨æ‰¹é‡æ’å…¥æå‡å†™å…¥æ€§èƒ½</p>
</li>
<li>
<p><strong>è¿æ¥æ± </strong>ï¼šä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥</p>
</li>
</ul>
<h5 data-id="heading-30">å­˜å‚¨ä¼˜åŒ–</h5>
<ul>
<li>
<p><strong>åˆ†åŒºç­–ç•¥</strong>ï¼šæŒ‰æ—¶é—´æˆ–ç±»åˆ«åˆ†åŒºå¤§è¡¨</p>
</li>
<li>
<p><strong>å‹ç¼©</strong>ï¼šå¯ç”¨è¡¨å‹ç¼©å‡å°‘å­˜å‚¨ç©ºé—´</p>
</li>
<li>
<p><strong>æ¸…ç†è¿‡æœŸæ•°æ®</strong>ï¼šå®šæœŸæ¸…ç†è¿‡æœŸçš„äº¤äº’è®°å½•</p>
</li>
</ul>
<h5 data-id="heading-31">å¹¶å‘æ§åˆ¶</h5>
<p>-- ä½¿ç”¨è¡Œçº§é”ä¿è¯å¹¶å‘å®‰å…¨</p>
<p>BEGIN;</p>
<p>SELECT * FROM customer_profile</p>
<p>WHERE customer_id = 'cust_001'</p>
<p>FOR UPDATE;</p>
<p>-- æ›´æ–°æ“ä½œ</p>
<p>COMMIT;</p>
<h4 data-id="heading-32">æ•°æ®å®‰å…¨ä¸éšç§</h4>
<h5 data-id="heading-33">è®¿é—®æ§åˆ¶</h5>
<p>-- åˆ›å»ºè§’è‰²å’Œæƒé™</p>
<p>CREATE ROLE customer_service_user;</p>
<p>GRANT SELECT ON knowledge_base TO customer_service_user;</p>
<p>GRANT SELECT, INSERT ON interaction_log TO customer_service_user;</p>
<p>-- è¡Œçº§å®‰å…¨ç­–ç•¥</p>
<p>CREATE POLICY customer_isolation ON customer_profile</p>
<p>USING (customer_id = current_user_id);</p>
<h5 data-id="heading-34">æ•°æ®åŠ å¯†</h5>
<ul>
<li>
<p><strong>ä¼ è¾“åŠ å¯†</strong>ï¼šä½¿ç”¨SSL/TLSåŠ å¯†æ•°æ®åº“è¿æ¥</p>
</li>
<li>
<p><strong>å­˜å‚¨åŠ å¯†</strong>ï¼šå¯ç”¨é€æ˜æ•°æ®åŠ å¯†ï¼ˆTDEï¼‰</p>
</li>
<li>
<p><strong>å­—æ®µåŠ å¯†</strong>ï¼šå¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŠ å¯†å­˜å‚¨</p>
</li>
</ul>
<h5 data-id="heading-35">å®¡è®¡æ—¥å¿—</h5>
<p>-- å¯ç”¨å®¡è®¡æ—¥å¿—</p>
<p>ALTER SYSTEM SET audit_enabled = on;</p>
<p>ALTER SYSTEM SET audit_log_statement = 'all';</p>
<p>-- æŸ¥è¯¢å®¡è®¡æ—¥å¿—</p>
<p>SELECT * FROM pg_audit_log</p>
<p>WHERE object_name = 'customer_profile'</p>
<p>ORDER BY audit_time DESC;</p>
<h2 data-id="heading-36">è¯¦ç»†æ¡ˆä¾‹åˆ†æï¼šæŸç”µå•†ä¼ä¸šçš„æ™ºèƒ½å®¢æœå®è·µ</h2>
<h4 data-id="heading-37">èƒŒæ™¯ä¸æŒ‘æˆ˜</h4>
<p>æŸå¤§å‹ç”µå•†å¹³å°æ˜¯å›½å†…é¢†å…ˆçš„ç»¼åˆæ€§ç”µå•†ä¼ä¸šï¼Œæ—¥å‡è®¢å•é‡è¶…è¿‡100ä¸‡ï¼Œå®¢æˆ·åŸºæ•°è¶…è¿‡1äº¿ã€‚éšç€ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§ï¼Œå®¢æœå‹åŠ›æ—¥ç›Šå¢åŠ ï¼š</p>
<p><strong>ä¸»è¦æŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>
<p><strong>ä¸šåŠ¡è§„æ¨¡</strong>ï¼šæ—¥å‡å®¢æœå’¨è¯¢é‡40ä¸‡+ï¼Œæ¶‰åŠå•†å“ã€è®¢å•ã€å”®åç­‰å¤šä¸ªé¢†åŸŸ</p>
</li>
<li>
<p><strong>äººåŠ›æˆæœ¬</strong>ï¼šå®¢æœå›¢é˜Ÿ400+äººï¼Œå¹´åº¦æˆæœ¬è¶…è¿‡4000ä¸‡å…ƒ</p>
</li>
<li>
<p><strong>æœåŠ¡è´¨é‡</strong>ï¼šå“åº”æ—¶é—´é•¿ï¼ˆå¹³å‡4åˆ†é’Ÿï¼‰ï¼ŒæœåŠ¡è´¨é‡ä¸å‡ï¼ˆæ»¡æ„åº¦ä»…74%ï¼‰</p>
</li>
<li>
<p><strong>çŸ¥è¯†ç®¡ç†</strong>ï¼šçŸ¥è¯†åˆ†æ•£åœ¨å¤šä¸ªç³»ç»Ÿï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†å’Œæ›´æ–°</p>
</li>
<li>
<p><strong>ä¸šåŠ¡å¢é•¿</strong>ï¼šä¼ ç»Ÿå®¢æœæ¨¡å¼éš¾ä»¥æ”¯æ’‘ä¸šåŠ¡å¿«é€Ÿå¢é•¿</p>
</li>
</ul>
<h4 data-id="heading-38">è§£å†³æ–¹æ¡ˆè®¾è®¡</h4>
<p>åŸºäºopenGaussæ„å»ºçš„æ™ºèƒ½å®¢æœç³»ç»Ÿæ¶æ„åŒ…æ‹¬ï¼š</p>
<h5 data-id="heading-39">ç³»ç»Ÿæ¶æ„</h5>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚ å¤šæ¸ é“å®¢æˆ·äº¤äº’å±‚ â”‚</p>
<p>â”‚ (Web/App/å¾®ä¿¡/ç”µè¯/é‚®ä»¶) â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>â”‚</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚ AIå¯¹è¯å¼•æ“å±‚ â”‚</p>
<p>â”‚ (æ„å›¾è¯†åˆ«/å¯¹è¯ç®¡ç†/å›å¤ç”Ÿæˆ) â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>â”‚</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚ å‘é‡æ£€ç´¢ä¸çŸ¥è¯†åº“å±‚ â”‚</p>
<p>â”‚ (å‘é‡åŒ–/ç›¸ä¼¼åº¦æ£€ç´¢/çŸ¥è¯†åŒ¹é…) â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>â”‚</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚ openGaussæ•°æ®åº“å±‚ â”‚</p>
<p>â”‚ (å‘é‡å­˜å‚¨/å…³ç³»æ•°æ®/äº‹åŠ¡ç®¡ç†) â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<h5 data-id="heading-40">æ ¸å¿ƒç±»è¯´æ˜</h5>
<ol>
<li><strong>æ§åˆ¶å±‚ (Controller)</strong></li>
</ol>
<p><strong>CustomerServiceController</strong></p>
<ul>
<li>
<p>èŒè´£ï¼šå¤„ç†HTTPè¯·æ±‚ï¼Œè°ƒç”¨Serviceå±‚</p>
</li>
<li>
<p>æ³¨è§£ï¼š@RestController, @RequestMapping</p>
</li>
<li>
<p>æ–¹æ³•ï¼š7ä¸ªREST APIç«¯ç‚¹</p>
</li>
</ul>
<ol>
<li><strong>ä¸šåŠ¡å±‚ (Service)</strong></li>
</ol>
<p><strong>SmartCustomerService</strong></p>
<ul>
<li>
<p>èŒè´£ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</p>
</li>
<li>
<p>ä¾èµ–ï¼šRepositoryå±‚ã€EmbeddingService</p>
</li>
<li>
<p>æ–¹æ³•ï¼š7ä¸ªä¸šåŠ¡æ–¹æ³•</p>
</li>
</ul>
<p><strong>EmbeddingService</strong></p>
<ul>
<li>
<p>èŒè´£ï¼šå¤„ç†å‘é‡åŒ–å’Œç›¸ä¼¼åº¦è®¡ç®—</p>
</li>
<li>
<p>æ–¹æ³•ï¼šå‘é‡ç”Ÿæˆã€è½¬æ¢ã€ç›¸ä¼¼åº¦è®¡ç®—</p>
</li>
</ul>
<ol>
<li><strong>æ•°æ®è®¿é—®å±‚ (Repository)</strong></li>
</ol>
<p><strong>å››ä¸ªRepositoryæ¥å£</strong></p>
<ul>
<li>
<p>ç»§æ‰¿ï¼šJpaRepository</p>
</li>
<li>
<p>èŒè´£ï¼šæ•°æ®åº“CRUDæ“ä½œ</p>
</li>
<li>
<p>æ–¹æ³•ï¼šè‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•</p>
</li>
</ul>
<ol>
<li><strong>æ•°æ®æ¨¡å‹å±‚ (Entity)</strong></li>
</ol>
<p><strong>å››ä¸ªEntityç±»</strong></p>
<ul>
<li>
<p>æ³¨è§£ï¼š@Entity, @Table, @Column</p>
</li>
<li>
<p>èŒè´£ï¼šæ˜ å°„æ•°æ®åº“è¡¨</p>
</li>
<li>
<p>å­—æ®µï¼šä¸æ•°æ®åº“è¡¨å­—æ®µå¯¹åº”</p>
</li>
</ul>
<ol>
<li><strong>ä¼ è¾“å±‚ (DTO)</strong></li>
</ol>
<p><strong>ä¸‰ä¸ªDTOç±»</strong></p>
<ul>
<li>
<p>èŒè´£ï¼šAPIè¯·æ±‚/å“åº”æ•°æ®ä¼ è¾“</p>
</li>
<li>
<p>ç‰¹ç‚¹ï¼šç®€å•æ•°æ®å®¹å™¨ï¼Œæ— ä¸šåŠ¡é€»è¾‘</p>
</li>
</ul>
<h4 data-id="heading-41">æ ¸å¿ƒåŠŸèƒ½å®ç°</h4>
<h5 data-id="heading-42">æ™ºèƒ½é—®ç­”åŠŸèƒ½</h5>
<p>-- åˆ›å»ºæ™ºèƒ½é—®ç­”å­˜å‚¨è¿‡ç¨‹</p>
<p>CREATE OR REPLACE FUNCTION smart_qa(</p>
<p>p_query TEXT,</p>
<p>p_query_embedding VECTOR,</p>
<p>p_customer_id VARCHAR,</p>
<p>p_top_k INT DEFAULT 4</p>
<p>)</p>
<p>RETURNS TABLE (</p>
<p>kb_id BIGINT,</p>
<p>title VARCHAR,</p>
<p>content TEXT,</p>
<p>similarity DECIMAL,</p>
<p>category VARCHAR</p>
<p>) AS $$</p>
<p>BEGIN</p>
<p>RETURN QUERY</p>
<p>SELECT</p>
<p>kb.id,</p>
<p>kb.title,</p>
<p>kb.content,</p>
<p>(1 - (kb.embedding &lt;=&gt; p_query_embedding))::DECIMAL as similarity,</p>
<p>kb.category</p>
<p>FROM knowledge_base kb</p>
<p>WHERE kb.is_active = true</p>
<p>AND (1 - (kb.embedding &lt;=&gt; p_query_embedding)) &gt; 0.5 -- ç›¸ä¼¼åº¦é˜ˆå€¼</p>
<p>ORDER BY similarity DESC</p>
<p>LIMIT p_top_k;</p>
<p>END;</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>A</mi><mi>N</mi><mi>G</mi><mi>U</mi><mi>A</mi><mi>G</mi><mi>E</mi><mi>p</mi><mi>l</mi><mi>p</mi><mi>g</mi><mi>s</mi><mi>q</mi><mi>l</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex"> LANGUAGE plpgsql;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">L</span><span class="mord mathnormal">A</span><span class="mord mathnormal">NG</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal">A</span><span class="mord mathnormal">GEplp</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.01968em;">ql</span><span class="mpunct">;</span></span></span></span></span></p>
<h5 data-id="heading-43">ä¸ªæ€§åŒ–æ¨èåŠŸèƒ½</h5>
<p>-- åˆ›å»ºä¸ªæ€§åŒ–æ¨èå­˜å‚¨è¿‡ç¨‹</p>
<p>CREATE OR REPLACE FUNCTION personalized_recommendation(</p>
<p>p_customer_id VARCHAR,</p>
<p>p_top_k INT DEFAULT 4</p>
<p>)</p>
<p>RETURNS TABLE (</p>
<p>kb_id BIGINT,</p>
<p>title VARCHAR,</p>
<p>content TEXT,</p>
<p>relevance_score DECIMAL</p>
<p>) AS $$</p>
<p>DECLARE</p>
<p>v_profile_embedding VECTOR;</p>
<p>v_vip_level INT;</p>
<p>BEGIN</p>
<p>-- è·å–å®¢æˆ·æ¡£æ¡ˆå’ŒVIPç­‰çº§</p>
<p>SELECT profile_embedding, vip_level INTO v_profile_embedding, v_vip_level</p>
<p>FROM customer_profile</p>
<p>WHERE customer_id = p_customer_id;</p>
<p>-- è¿”å›ä¸ªæ€§åŒ–æ¨è</p>
<p>RETURN QUERY</p>
<p>SELECT</p>
<p>kb.id,</p>
<p>kb.title,</p>
<p>kb.content,</p>
<p>(1 - (kb.embedding &lt;=&gt; v_profile_embedding))::DECIMAL *</p>
<p>(1 + kb.priority * 0.1) *</p>
<p>(1 + v_vip_level * 0.04) as relevance_score</p>
<p>FROM knowledge_base kb</p>
<p>WHERE kb.is_active = true</p>
<p>AND kb.category IN (</p>
<p>SELECT jsonb_array_elements(cp.preferences-&gt;'interested_categories')::TEXT</p>
<p>FROM customer_profile cp</p>
<p>WHERE cp.customer_id = p_customer_id</p>
<p>)</p>
<p>ORDER BY relevance_score DESC</p>
<p>LIMIT p_top_k;</p>
<p>END;</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>A</mi><mi>N</mi><mi>G</mi><mi>U</mi><mi>A</mi><mi>G</mi><mi>E</mi><mi>p</mi><mi>l</mi><mi>p</mi><mi>g</mi><mi>s</mi><mi>q</mi><mi>l</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex"> LANGUAGE plpgsql;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">L</span><span class="mord mathnormal">A</span><span class="mord mathnormal">NG</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal">A</span><span class="mord mathnormal">GEplp</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.01968em;">ql</span><span class="mpunct">;</span></span></span></span></span></p>
<h5 data-id="heading-44">å¯¹è¯è®°å½•ä¸åˆ†æ</h5>
<p>-- åˆ›å»ºå¯¹è¯è®°å½•æ’å…¥å‡½æ•°</p>
<p>CREATE OR REPLACE FUNCTION log_conversation_message(</p>
<p>p_session_id VARCHAR,</p>
<p>p_customer_id VARCHAR,</p>
<p>p_message_type VARCHAR,</p>
<p>p_content TEXT,</p>
<p>p_intent VARCHAR DEFAULT NULL,</p>
<p>p_confidence DECIMAL DEFAULT NULL</p>
<p>)</p>
<p>RETURNS BIGINT AS $$</p>
<p>DECLARE</p>
<p>v_session_id BIGINT;</p>
<p>v_message JSONB;</p>
<p>BEGIN</p>
<p>-- æ„å»ºæ¶ˆæ¯å¯¹è±¡</p>
<p>v_message := jsonb_build_object(</p>
<p>'type', p_message_type,</p>
<p>'content', p_content,</p>
<p>'intent', p_intent,</p>
<p>'confidence', p_confidence,</p>
<p>'timestamp', CURRENT_TIMESTAMP</p>
<p>);</p>
<p>-- æ›´æ–°ä¼šè¯çš„æ¶ˆæ¯æ•°ç»„</p>
<p>UPDATE conversation_session</p>
<p>SET messages = array_append(messages, v_message),</p>
<p>detected_intent = COALESCE(p_intent, detected_intent),</p>
<p>session_end = CURRENT_TIMESTAMP</p>
<p>WHERE session_id = p_session_id</p>
<p>RETURNING id INTO v_session_id;</p>
<p>RETURN v_session_id;</p>
<p>END;</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>A</mi><mi>N</mi><mi>G</mi><mi>U</mi><mi>A</mi><mi>G</mi><mi>E</mi><mi>p</mi><mi>l</mi><mi>p</mi><mi>g</mi><mi>s</mi><mi>q</mi><mi>l</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex"> LANGUAGE plpgsql;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">L</span><span class="mord mathnormal">A</span><span class="mord mathnormal">NG</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal">A</span><span class="mord mathnormal">GEplp</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.01968em;">ql</span><span class="mpunct">;</span></span></span></span></span></p>
<h5 data-id="heading-45">å®¢æˆ·æ»¡æ„åº¦åˆ†æ</h5>
<p>-- åˆ›å»ºæ»¡æ„åº¦ç»Ÿè®¡è§†å›¾</p>
<p>CREATE VIEW satisfaction_analysis AS</p>
<p>SELECT</p>
<p>DATE_TRUNC('day', session_end) as date,</p>
<p>COUNT(</p>
<p>) as total_conversations,</p>
<p>COUNT(CASE WHEN resolved = true THEN 1 END) as resolved_count,</p>
<p>ROUND(100.0 * COUNT(CASE WHEN resolved = true THEN 1 END) / COUNT(</p>
<p>), 2) as resolution_rate,</p>
<p>ROUND(AVG(satisfaction_score), 2) as avg_satisfaction,</p>
<p>COUNT(CASE WHEN satisfaction_score &gt;= 4 THEN 1 END) as high_satisfaction_count,</p>
<p>ROUND(100.0 * COUNT(CASE WHEN satisfaction_score &gt;= 4 THEN 1 END) / COUNT(*), 2) as high_satisfaction_rate</p>
<p>FROM conversation_session</p>
<p>WHERE session_end IS NOT NULL</p>
<p>GROUP BY DATE_TRUNC('day', session_end)</p>
<p>ORDER BY date DESC;</p>
<p>-- åˆ›å»ºæ„å›¾åˆ†å¸ƒè§†å›¾</p>
<p>CREATE VIEW intent_distribution AS</p>
<p>SELECT</p>
<p>detected_intent,</p>
<p>COUNT(</p>
<p>) as count,</p>
<p>ROUND(100.0 * COUNT(</p>
<p>) / (SELECT COUNT(</p>
<p>) FROM conversation_session), 2) as percentage,</p>
<p>ROUND(AVG(satisfaction_score), 2) as avg_satisfaction,</p>
<p>ROUND(100.0 * COUNT(CASE WHEN resolved = true THEN 1 END) / COUNT(</p>
<p>), 2) as resolution_rate</p>
<p>FROM conversation_session</p>
<p>WHERE detected_intent IS NOT NULL</p>
<p>GROUP BY detected_intent</p>
<p>ORDER BY count DESC;</p>
<h4 data-id="heading-46">åº”ç”¨å±‚å®ç°ç¤ºä¾‹ï¼ˆJava Spring Bootï¼‰</h4>
<h5 data-id="heading-47">æ ¸å¿ƒä¸šåŠ¡æœåŠ¡</h5>
<p>package com.openGauss.smartcustomerservice.service;</p>
<p>import com.openGauss.smartcustomerservice.dto.QAResponse;</p>
<p>import com.openGauss.smartcustomerservice.dto.RecommendationResponse;</p>
<p>import com.openGauss.smartcustomerservice.entity.*;</p>
<p>import com.openGauss.smartcustomerservice.repository.*;</p>
<p>import lombok.RequiredArgsConstructor;</p>
<p>import org.springframework.beans.factory.annotation.Value;</p>
<p>import org.springframework.stereotype.Service;</p>
<p>import org.springframework.transaction.annotation.Transactional;</p>
<p>import java.time.LocalDateTime;</p>
<p>import java.util.*;</p>
<p>import java.util.stream.Collectors;</p>
<p>@Service</p>
<p>@RequiredArgsConstructor</p>
<p>@Transactional</p>
<p>public class SmartCustomerService {</p>
<p>private final KnowledgeBaseRepository knowledgeBaseRepository;</p>
<p>private final CustomerProfileRepository customerProfileRepository;</p>
<p>private final ConversationSessionRepository conversationSessionRepository;</p>
<p>private final IntentLibraryRepository intentLibraryRepository;</p>
<p>private final EmbeddingService embeddingService;</p>
<p>@Value("${app.vector.similarity-threshold:0.5}")</p>
<p>private double similarityThreshold;</p>
<p>@Value("${app.vector.top-k:4}")</p>
<p>private int topK;</p>
<p>/**</p>
<p>* æ™ºèƒ½é—®ç­” - åŸºäºå‘é‡ç›¸ä¼¼åº¦çš„è¯­ä¹‰æœç´¢</p>
<p>*/</p>
<p>public List smartQA(String customerId, String query) {</p>
<p>// è·å–æŸ¥è¯¢å‘é‡</p>
<p>double[] queryEmbedding = embeddingService.getEmbedding(query);</p>
<p>// è·å–æ‰€æœ‰æ¿€æ´»çš„çŸ¥è¯†åº“</p>
<p>List knowledgeBases = knowledgeBaseRepository.findByIsActiveTrueAndCategory(null);</p>
<p>// è®¡ç®—ç›¸ä¼¼åº¦å¹¶æ’åº</p>
<p>return knowledgeBases.stream()</p>
<p>.map(kb -&gt; {</p>
<p>double[] kbEmbedding = embeddingService.stringToEmbedding(kb.getEmbedding());</p>
<p>double similarity = embeddingService.cosineSimilarity(queryEmbedding, kbEmbedding);</p>
<p>return new QAResponse(</p>
<p>kb.getId(),</p>
<p>kb.getTitle(),</p>
<p>kb.getContent(),</p>
<p>similarity,</p>
<p>kb.getCategory()</p>
<p>);</p>
<p>})</p>
<p>.filter(qa -&gt; qa.getSimilarity() &gt; similarityThreshold)</p>
<p>.sorted(Comparator.comparingDouble(QAResponse::getSimilarity).reversed())</p>
<p>.limit(topK)</p>
<p>.collect(Collectors.toList());</p>
<p>}</p>
<p>/**</p>
<p>* ä¸ªæ€§åŒ–æ¨è - åŸºäºå®¢æˆ·æ¡£æ¡ˆçš„åŠ æƒæ¨è</p>
<p>*/</p>
<p>public List getPersonalizedRecommendations(String customerId) {</p>
<p>// è·å–å®¢æˆ·æ¡£æ¡ˆ</p>
<p>CustomerProfile profile = customerProfileRepository.findByCustomerId(customerId)</p>
<p>.orElseThrow(() -&gt; new RuntimeException("Customer not found: " + customerId));</p>
<p>// è§£æå®¢æˆ·æ¡£æ¡ˆå‘é‡</p>
<p>double[] profileEmbedding = embeddingService.stringToEmbedding(profile.getProfileEmbedding());</p>
<p>// è·å–æ‰€æœ‰æ¿€æ´»çš„çŸ¥è¯†åº“</p>
<p>List knowledgeBases = knowledgeBaseRepository.findByIsActiveTrue();</p>
<p>// è®¡ç®—ç›¸å…³æ€§åˆ†æ•°</p>
<p>return knowledgeBases.stream()</p>
<p>.map(kb -&gt; {</p>
<p>double[] kbEmbedding = embeddingService.stringToEmbedding(kb.getEmbedding());</p>
<p>double similarity = embeddingService.cosineSimilarity(profileEmbedding, kbEmbedding);</p>
<p>// åŠ æƒè®¡ç®—ï¼šå‘é‡ç›¸ä¼¼åº¦ Ã— ä¼˜å…ˆçº§ç³»æ•° Ã— VIPç³»æ•°</p>
<p>double relevanceScore = similarity</p>
<p>* (1 + kb.getPriority() * 0.1)</p>
<p>* (1 + profile.getVipLevel() * 0.04);</p>
<p>return new RecommendationResponse(</p>
<p>kb.getId(),</p>
<p>kb.getTitle(),</p>
<p>kb.getContent(),</p>
<p>relevanceScore</p>
<p>);</p>
<p>})</p>
<p>.sorted(Comparator.comparingDouble(RecommendationResponse::getRelevanceScore).reversed())</p>
<p>.limit(topK)</p>
<p>.collect(Collectors.toList());</p>
<p>}</p>
<p>/**</p>
<p>* åˆ›å»ºå¯¹è¯ä¼šè¯</p>
<p>*/</p>
<p>public ConversationSession createConversationSession(String customerId, String channel) {</p>
<p>String sessionId = String.format("sess_%s_%d", customerId, System.currentTimeMillis());</p>
<p>ConversationSession session = new ConversationSession();</p>
<p>session.setSessionId(sessionId);</p>
<p>session.setCustomerId(customerId);</p>
<p>session.setChannel(channel);</p>
<p>session.setStatus("active");</p>
<p>session.setResolved(false);</p>
<p>session.setSessionStart(LocalDateTime.now());</p>
<p>return conversationSessionRepository.save(session);</p>
<p>}</p>
<p>/**</p>
<p>* è®°å½•å¯¹è¯æ¶ˆæ¯</p>
<p>*/</p>
<p>public void logMessage(String sessionId, String customerId, String messageType,</p>
<p>String content, String intent, Double confidence) {</p>
<p>ConversationSession session = conversationSessionRepository.findBySessionId(sessionId)</p>
<p>.orElseThrow(() -&gt; new RuntimeException("Session not found: " + sessionId));</p>
<p>// æ„å»ºæ¶ˆæ¯å¯¹è±¡</p>
<p>Map&lt;String, Object&gt; message = new LinkedHashMap&lt;&gt;();</p>
<p>message.put("type", messageType);</p>
<p>message.put("content", content);</p>
<p>message.put("intent", intent);</p>
<p>message.put("confidence", confidence);</p>
<p>message.put("timestamp", LocalDateTime.now());</p>
<p>// æ›´æ–°ä¼šè¯æ¶ˆæ¯</p>
<p>if (session.getMessages() == null) {</p>
<p>session.setMessages(new ArrayList&lt;&gt;());</p>
<p>}</p>
<p>session.getMessages().add(message);</p>
<p>session.setDetectedIntent(intent);</p>
<p>session.setSessionEnd(LocalDateTime.now());</p>
<p>conversationSessionRepository.save(session);</p>
<p>}</p>
<p>/**</p>
<p>* å…³é—­å¯¹è¯ä¼šè¯</p>
<p>*/</p>
<p>public void closeConversationSession(String sessionId, Integer satisfactionScore, String feedbackText) {</p>
<p>ConversationSession session = conversationSessionRepository.findBySessionId(sessionId)</p>
<p>.orElseThrow(() -&gt; new RuntimeException("Session not found: " + sessionId));</p>
<p>session.setStatus("closed");</p>
<p>session.setResolved(true);</p>
<p>session.setSatisfactionScore(satisfactionScore);</p>
<p>session.setFeedbackText(feedbackText);</p>
<p>session.setSessionEnd(LocalDateTime.now());</p>
<p>conversationSessionRepository.save(session);</p>
<p>}</p>
<p>/**</p>
<p>* è·å–å®¢æˆ·å¯¹è¯å†å²</p>
<p>*/</p>
<p>public List getCustomerConversationHistory(String customerId) {</p>
<p>return conversationSessionRepository.findByCustomerId(customerId);</p>
<p>}</p>
<p>/**</p>
<p>* æ›´æ–°å®¢æˆ·æ¡£æ¡ˆ</p>
<p>*/</p>
<p>public CustomerProfile updateCustomerProfile(String customerId, String name,</p>
<p>String email, String phone) {</p>
<p>CustomerProfile profile = customerProfileRepository.findByCustomerId(customerId)</p>
<p>.orElse(new CustomerProfile());</p>
<p>profile.setCustomerId(customerId);</p>
<p>profile.setName(name);</p>
<p>profile.setEmail(email);</p>
<p>profile.setPhone(phone);</p>
<p>profile.setLastInteraction(LocalDateTime.now());</p>
<p>return customerProfileRepository.save(profile);</p>
<p>}</p>
<p>}</p>
<h5 data-id="heading-48">REST API æ§åˆ¶å™¨</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dfcf033407e40618bbb0f367aaaf3f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853028&amp;x-signature=%2BQo9r80FUIu4FWhC2oc5sJL8vyY%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªã€Œé«˜å†…èšã€ä½è€¦åˆã€çš„æ™ºèƒ½é—®ç­”æ¥å£å®ç°ï¼Œéµå¾ª Spring Boot æœ€ä½³å®è·µï¼š</p>
<p>æ§åˆ¶å±‚ï¼ˆControllerï¼‰è´Ÿè´£è¯·æ±‚æ¥æ”¶å’Œå“åº”å°è£…ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼›</p>
<p>æœåŠ¡å±‚ï¼ˆServiceï¼‰å°è£…æ ¸å¿ƒä¸šåŠ¡ï¼Œä¾¿äºå¤ç”¨å’Œæµ‹è¯•ï¼›</p>
<p>ç»Ÿä¸€å“åº”æ ¼å¼ï¼ˆApiResponseï¼‰å’Œæ—¥å¿—æ‰“å°ï¼Œæå‡æ¥å£çš„å¯ç»´æŠ¤æ€§å’Œå¯è§‚æµ‹æ€§ï¼›</p>
<p>å…¨å±€å¼‚å¸¸æ•è·ï¼Œé¿å…æ¥å£æŠ›å‡ºæœªå¤„ç†å¼‚å¸¸å¯¼è‡´å®¢æˆ·ç«¯æ— æ³•è§£æã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d241f8a27f2d439f99e0c75cc178f7b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853028&amp;x-signature=Fe65TtAJYf1j%2FOcBuMN1DilYPg8%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªæ¥å£åˆ†åˆ«è¦†ç›–äº†ã€Œä¸ªæ€§åŒ–æŸ¥è¯¢ã€å’Œã€Œä¼šè¯åˆ›å»ºã€ä¸¤ä¸ªæ ¸å¿ƒåœºæ™¯ï¼Œè®¾è®¡ä¸Šéµå¾ªäº†ï¼š</p>
<p>ã€ŒRESTful è§„èŒƒã€ï¼šHTTP æ–¹æ³•ä¸ä¸šåŠ¡æ“ä½œè¯­ä¹‰ä¸€è‡´ï¼›</p>
<p>ã€Œé«˜å¯ç»´æŠ¤æ€§ã€ï¼šç»Ÿä¸€å“åº”ã€æ—¥å¿—ã€å¼‚å¸¸å¤„ç†ï¼Œé™ä½åç»­æ‰©å±•æˆæœ¬ï¼›</p>
<p>ã€Œåˆ†å±‚è§£è€¦ã€ï¼šController ä¸ Service èŒè´£åˆ†ç¦»ï¼Œä¾¿äºå•å…ƒæµ‹è¯•å’Œä¸šåŠ¡é€»è¾‘å¤ç”¨ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œè¿™ç»„æ¥å£å±äºã€Œå®¢æˆ·æ™ºèƒ½æœåŠ¡ç³»ç»Ÿã€çš„æ ¸å¿ƒæ¥å£é›†åˆï¼ˆé—®ç­” + æ¨è + ä¼šè¯ï¼‰ï¼Œèƒ½å¤Ÿæ”¯æ’‘èµ·ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½å®¢æœ / ç”¨æˆ·ä¸ªæ€§åŒ–æœåŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5059dcb0aaf64a0b80bd76290a00f947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853028&amp;x-signature=XVE1nLFM4qjkuKZGawSoh2Rmr%2BY%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªæ¥å£æ˜¯å¯¹è¯ç³»ç»Ÿçš„ã€ŒåŸºç¡€æ”¯æ’‘æ¥å£ã€ï¼š</p>
<p>"/message" è´Ÿè´£å¯¹è¯æ•°æ®çš„ã€Œè®°å½•ä¸æ²‰æ·€ã€ï¼Œä¸ºä¸Šä¸‹æ–‡ç†è§£ã€æ•°æ®åˆ†ææä¾›æ•°æ®åŸºç¡€ï¼›</p>
<p>"/session/close" è´Ÿè´£å¯¹è¯ç”Ÿå‘½å‘¨æœŸçš„ã€Œæ”¶å°¾ä¸åé¦ˆæ”¶é›†ã€ï¼Œç¡®ä¿èµ„æºé‡Šæ”¾å’ŒæœåŠ¡ä¼˜åŒ–ã€‚</p>
<p>ç»“åˆä¹‹å‰çš„ã€Œä¼šè¯åˆ›å»ºã€ã€Œæ™ºèƒ½é—®ç­”ã€ã€Œä¸ªæ€§åŒ–æ¨èã€æ¥å£ï¼Œæ•´å¥—æ¥å£å½¢æˆäº†ä¸€ä¸ª åŠŸèƒ½å®Œæ•´ã€è®¾è®¡è§„èŒƒã€å¯æ‰©å±• çš„æ™ºèƒ½å®¢æœ / ç”¨æˆ·å¯¹è¯æœåŠ¡ä½“ç³»ï¼Œèƒ½å¤Ÿæ”¯æ’‘ä»ç”¨æˆ·æ¥å…¥åˆ°å¯¹è¯ç»“æŸçš„å…¨æµç¨‹éœ€æ±‚ã€‚</p>
<h5 data-id="heading-49">å‘é‡å¤„ç†æœåŠ¡</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b214ebefa114a18acf50f37d44a598f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853028&amp;x-signature=d87GVb3P1t1Cs8pv6iu3H65suF4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªã€Œåˆæ ¼çš„ Embedding æ¨¡æ‹Ÿå®ç°ã€ï¼š</p>
<p>æ»¡è¶³ â€œæµç¨‹éªŒè¯â€ çš„æ ¸å¿ƒéœ€æ±‚ï¼Œç¡®ä¿ç›¸åŒæ–‡æœ¬ç”Ÿæˆç›¸åŒå‘é‡ã€å‘é‡ç»´åº¦å›ºå®šä¸”å½’ä¸€åŒ–ï¼›</p>
<p>æ˜ç¡®æ ‡æ³¨ â€œæ¨¡æ‹Ÿå®ç°â€ï¼Œé¿å…è¯¯ç”¨ç”Ÿäº§ç¯å¢ƒï¼›</p>
<p>ä»£ç é€»è¾‘ç®€æ´ï¼Œæ— å†—ä½™ï¼Œç¬¦åˆ Java ç¼–ç è§„èŒƒã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œé™ä½å¼€å‘æµ‹è¯•é—¨æ§›ã€â€”â€” åœ¨æ²¡æœ‰çœŸå® Embedding æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿæ­å»ºä¸šåŠ¡æµç¨‹ï¼›ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåªéœ€æ›¿æ¢ getEmbedding æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼ˆè°ƒç”¨çœŸå®æœåŠ¡ï¼‰ï¼Œå¤–éƒ¨è°ƒç”¨é€»è¾‘æ— éœ€ä¿®æ”¹ï¼ˆç¬¦åˆ â€œå¼€é—­åŸåˆ™â€ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1e98c594f08471a8ed3394ff9481c29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853028&amp;x-signature=suyI0hD30sM3CCSARgnR%2Fc6Qgaw%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸¤æ®µæ–¹æ³•æ˜¯ã€Œå‘é‡å­˜å‚¨çš„å®ç”¨å·¥å…·ã€ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>æ ¼å¼ç®€æ´æ ‡å‡†åŒ–ï¼ˆJSON æ•°ç»„é£æ ¼ï¼‰ï¼Œä¾¿äºå­˜å‚¨å’Œè§£æï¼›</p>
<p>åŒ…å«å®Œå–„çš„å…¥å‚æ ¡éªŒå’Œå¼‚å¸¸å¤„ç†ï¼Œé²æ£’æ€§å¼ºï¼›</p>
<p>å¹³è¡¡äº†ç²¾åº¦å’Œå­˜å‚¨æˆæœ¬ï¼ˆä¿ç•™ 6 ä½å°æ•°ï¼‰ï¼›</p>
<p>ä¸ä¹‹å‰çš„ Embedding ç”Ÿæˆæ–¹æ³•æ— ç¼è¡”æ¥ï¼Œå½¢æˆã€Œç”Ÿæˆâ†’åºåˆ—åŒ–â†’å­˜å‚¨â†’ååºåˆ—åŒ–â†’ä½¿ç”¨ã€çš„å®Œæ•´é“¾è·¯ã€‚</p>
<p>æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå…¼å®¹æ€§ã€â€”â€” åœ¨ä¸ä¾èµ–æ•°æ®åº“ç‰¹æ®ŠåŠŸèƒ½çš„å‰æä¸‹ï¼Œå®ç°å‘é‡çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œæ”¯æ’‘æ™ºèƒ½é—®ç­”ã€æ–‡æœ¬æ£€ç´¢ç­‰ä¾èµ– Embedding çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h4 data-id="heading-50">å®ç°æ•ˆæœåŠä¼˜åŒ–</h4>
<h5 data-id="heading-51">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h5>
<ul>
<li>
<p><strong>æ•°æ®åº“ä¼˜åŒ–</strong></p>
<ul>
<li>
<p>æ·»åŠ é€‚å½“çš„ç´¢å¼•</p>
</li>
<li>
<p>ä½¿ç”¨å‘é‡ç´¢å¼•ï¼ˆHNSW/IVFFlatï¼‰</p>
</li>
<li>
<p>å®šæœŸåˆ†æè¡¨ç»Ÿè®¡ä¿¡æ¯</p>
</li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜ä¼˜åŒ–</strong></p>
<ul>
<li>
<p>ç¼“å­˜çƒ­ç‚¹çŸ¥è¯†åº“æ•°æ®</p>
</li>
<li>
<p>ç¼“å­˜å®¢æˆ·æ¡£æ¡ˆ</p>
</li>
<li>
<p>ä½¿ç”¨Redisåˆ†å¸ƒå¼ç¼“å­˜</p>
</li>
</ul>
</li>
<li>
<p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong></p>
<ul>
<li>
<p>ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢</p>
</li>
<li>
<p>é™åˆ¶è¿”å›ç»“æœæ•°é‡</p>
</li>
<li>
<p>ä½¿ç”¨æ‰¹é‡æ“ä½œ</p>
</li>
</ul>
</li>
<li>
<p><strong>å¹¶å‘ä¼˜åŒ–</strong></p>
<ul>
<li>
<p>è°ƒæ•´è¿æ¥æ± å¤§å°</p>
</li>
<li>
<p>ä½¿ç”¨å¼‚æ­¥å¤„ç†</p>
</li>
<li>
<p>å®ç°è¯·æ±‚é˜Ÿåˆ—</p>
</li>
</ul>
</li>
</ul>
<h5 data-id="heading-52">ä¸šåŠ¡ä»·å€¼</h5>
<p><strong>æˆæœ¬èŠ‚çº¦</strong>ï¼š</p>
<ul>
<li>
<p>å®¢æœäººå‘˜æˆæœ¬ï¼šä»4000ä¸‡/å¹´é™è‡³3000ä¸‡/å¹´ï¼ŒèŠ‚çº¦2000ä¸‡å…ƒ</p>
</li>
<li>
<p>ç³»ç»Ÿç»´æŠ¤æˆæœ¬ï¼šé™ä½30%</p>
</li>
<li>
<p>æ€»ä½“æˆæœ¬é™ä½34%</p>
</li>
</ul>
<p><strong>æ”¶å…¥å¢é•¿</strong>ï¼š</p>
<ul>
<li>
<p>å®¢æˆ·æ»¡æ„åº¦æå‡å¸¦æ¥çš„å¤è´­ç‡å¢åŠ ï¼š+12%</p>
</li>
<li>
<p>ä¸ªæ€§åŒ–æ¨èå¸¦æ¥çš„è½¬åŒ–ç‡æå‡ï¼š+7%</p>
</li>
<li>
<p>é¢„è®¡å¹´åº¦æ”¶å…¥å¢åŠ ï¼š+4000ä¸‡å…ƒ</p>
</li>
</ul>
<p><strong>è¿è¥æ•ˆç‡</strong>ï¼š</p>
<ul>
<li>
<p>å¹³å‡å¤„ç†æ—¶é—´ï¼šä»300ç§’é™è‡³7ç§’</p>
</li>
<li>
<p>æ—¥å‡å¤„ç†å’¨è¯¢é‡ï¼šä»40ä¸‡æå‡è‡³50ä¸‡</p>
</li>
<li>
<p>çŸ¥è¯†åº“æ›´æ–°å‘¨æœŸï¼šä»1å‘¨é™è‡³1å¤©</p>
</li>
</ul>
<h5 data-id="heading-53">æŠ€æœ¯æŒ‡æ ‡</h5>
<p><strong>æ•°æ®åº“æ€§èƒ½</strong>ï¼š</p>
<ul>
<li>
<p>å‘é‡æŸ¥è¯¢å“åº”æ—¶é—´ï¼šP84 &lt; 40msï¼ŒP88 &lt; 100ms</p>
</li>
<li>
<p>çŸ¥è¯†åº“è§„æ¨¡ï¼š4ä¸‡+æ¡è®°å½•ï¼Œå­˜å‚¨ç©ºé—´ &lt; 40GB</p>
</li>
<li>
<p>å¹¶å‘è¿æ¥æ•°ï¼šæ”¯æŒ10000+å¹¶å‘ä¼šè¯</p>
</li>
<li>
<p>æ—¥å‡æ•°æ®å¢é•¿ï¼š100ä¸‡+æ¡æ–°è®°å½•</p>
</li>
</ul>
<p><strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ï¼š</p>
<ul>
<li>
<p>æ•°æ®åº“æ•…éšœæ¢å¤æ—¶é—´ï¼š&lt; 30ç§’</p>
</li>
<li>
<p>æ•°æ®ä¸€è‡´æ€§ï¼šRPO = 0ï¼ˆé›¶æ•°æ®ä¸¢å¤±ï¼‰</p>
</li>
<li>
<p>å¤‡ä»½é¢‘ç‡ï¼šæ¯å°æ—¶ä¸€æ¬¡ï¼Œä¿ç•™30å¤©å†å²</p>
</li>
</ul>
<h4 data-id="heading-54">å…³é”®æˆåŠŸå› ç´ </h4>
<ol>
<li>
<p><strong>å……åˆ†çš„æ•°æ®å‡†å¤‡</strong>ï¼šèŠ±è´¹3ä¸ªæœˆæ—¶é—´æ¸…ç†å’Œæ ‡å‡†åŒ–å†å²æ•°æ®</p>
</li>
<li>
<p><strong>è¿­ä»£å¼ä¸Šçº¿</strong>ï¼šåˆ†é˜¶æ®µä¸Šçº¿ï¼Œå…ˆä»FAQå¼€å§‹ï¼Œé€æ­¥æ‰©å±•åˆ°è®¢å•ã€å”®åç­‰</p>
</li>
<li>
<p><strong>æŒç»­ä¼˜åŒ–</strong>ï¼šå»ºç«‹åé¦ˆæœºåˆ¶ï¼Œæ¯å‘¨åˆ†ææ•°æ®ï¼ŒæŒç»­æ”¹è¿›æ¨¡å‹å’ŒçŸ¥è¯†åº“</p>
</li>
<li>
<p><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ•°æ®åº“å›¢é˜Ÿã€AIå›¢é˜Ÿã€ä¸šåŠ¡å›¢é˜Ÿç´§å¯†åˆä½œ</p>
</li>
<li>
<p><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜</p>
</li>
</ol>
<h4 data-id="heading-55">ç»éªŒæ•™è®­ä¸å»ºè®®</h4>
<p><strong>æˆåŠŸç»éªŒ</strong>ï¼š</p>
<p>openGaussçš„å‘é‡æ•°æ®åº“èƒ½åŠ›å®Œå…¨æ»¡è¶³å¤§è§„æ¨¡åº”ç”¨éœ€æ±‚</p>
<p>æ··åˆæŸ¥è¯¢ï¼ˆå‘é‡+å…³é”®å­—ï¼‰çš„æ•ˆæœä¼˜äºå•ä¸€æ–¹å¼</p>
<p>å®šæœŸæ›´æ–°çŸ¥è¯†åº“å’Œæ¨¡å‹æ˜¯ä¿è¯ç³»ç»Ÿæ•ˆæœçš„å…³é”®</p>
<p><strong>æ”¹è¿›å»ºè®®</strong>ï¼š</p>
<p>æ—©æœŸåº”è¯¥æ›´é‡è§†æ•°æ®è´¨é‡ï¼Œè€Œä¸æ˜¯æ•°æ®é‡</p>
<p>éœ€è¦å»ºç«‹æ›´å®Œå–„çš„A/Bæµ‹è¯•æ¡†æ¶</p>
<p>åº”è¯¥æå‰è§„åˆ’å¤šè¯­è¨€æ”¯æŒ</p>
<h2 data-id="heading-56">æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h4 data-id="heading-57">å¤§è§„æ¨¡å‘é‡æ•°æ®ç®¡ç†</h4>
<p><strong>æŒ‘æˆ˜</strong>ï¼š</p>
<p>å‘é‡æ•°æ®é‡å¤§ï¼ˆç™¾äº¿çº§ï¼‰</p>
<p>ç»´åº¦é«˜ï¼ˆ1000+ç»´ï¼‰</p>
<p>æŸ¥è¯¢é¢‘ç¹ï¼ˆQPSé«˜ï¼‰</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p><strong>åˆ†å±‚ç´¢å¼•</strong>ï¼šä½¿ç”¨IVFFlatè¿›è¡Œç²—ç²’åº¦åˆ†ç»„ï¼ŒHNSWè¿›è¡Œç²¾ç»†æ£€ç´¢</p>
<p><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šçƒ­ç‚¹å‘é‡æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­</p>
<p><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šåå°æ‰¹é‡æ›´æ–°å‘é‡ç´¢å¼•</p>
<h4 data-id="heading-58">å®æ—¶æ€§ä¸å‡†ç¡®æ€§çš„å¹³è¡¡</h4>
<p><strong>æŒ‘æˆ˜</strong>ï¼š</p>
<p>éœ€è¦æ¯«ç§’çº§çš„å“åº”æ—¶é—´</p>
<p>åŒæ—¶è¦ä¿è¯å›å¤çš„å‡†ç¡®æ€§å’Œç›¸å…³æ€§</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p><strong>å¤šé˜¶æ®µæ£€ç´¢</strong>ï¼šç²—æ’â†’ç²¾æ’â†’é‡æ’</p>
<p><strong>ç¼“å­˜çƒ­ç‚¹</strong>ï¼šç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœ</p>
<p><strong>æ¨¡å‹ä¼˜åŒ–</strong>ï¼šä½¿ç”¨æ›´è½»é‡çš„embeddingæ¨¡å‹</p>
<h4 data-id="heading-59">å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p><strong>æŒ‘æˆ˜</strong>ï¼š</p>
<p>å¯¹è¯å†å²é•¿ï¼Œä¸Šä¸‹æ–‡å¤æ‚</p>
<p>éœ€è¦å‡†ç¡®ç†è§£ç”¨æˆ·çœŸå®æ„å›¾</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p><strong>å¯¹è¯çŠ¶æ€æœº</strong>ï¼šä½¿ç”¨çŠ¶æ€æœºç®¡ç†å¯¹è¯æµç¨‹</p>
<p><strong>æ„å›¾è¿½è¸ª</strong>ï¼šè·Ÿè¸ªæ„å›¾çš„æ¼”å˜è¿‡ç¨‹</p>
<p><strong>ä¸Šä¸‹æ–‡å‹ç¼©</strong>ï¼šå¯¹é•¿å¯¹è¯è¿›è¡Œæ‘˜è¦å‹ç¼©</p>
<h4 data-id="heading-60">å†·å¯åŠ¨ä¸æŒç»­å­¦ä¹ </h4>
<p><strong>æŒ‘æˆ˜</strong>ï¼š</p>
<p>æ–°ç³»ç»Ÿç¼ºå°‘è®­ç»ƒæ•°æ®</p>
<p>éœ€è¦æŒç»­æ”¹è¿›æ¨¡å‹å’ŒçŸ¥è¯†åº“</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p><strong>çŸ¥è¯†åº“é¢„çƒ­</strong>ï¼šä»ç°æœ‰ç³»ç»Ÿè¿ç§»å†å²æ•°æ®</p>
<p><strong>äººå·¥åé¦ˆ</strong>ï¼šæ”¶é›†ç”¨æˆ·åé¦ˆè¿›è¡Œæ¨¡å‹ä¼˜åŒ–</p>
<p><strong>A/Bæµ‹è¯•</strong>ï¼šå¯¹æ–°ç­–ç•¥è¿›è¡Œç§‘å­¦è¯„ä¼°</p>
<h2 data-id="heading-61">æ€§èƒ½æŒ‡æ ‡ä¸ç›‘æ§</h2>
<h4 data-id="heading-62">å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰</h4>
<h5 data-id="heading-63">ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡</h5>
<p><strong>æŸ¥è¯¢å“åº”æ—¶é—´</strong>ï¼šP84 &lt; 100msï¼ŒP88 &lt; 400ms</p>
<p><strong>ååé‡</strong>ï¼šæ”¯æŒ10000+ QPS</p>
<p><strong>ç³»ç»Ÿå¯ç”¨æ€§</strong>ï¼š&gt; 88.8%</p>
<p><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šRPO = 0ï¼ŒRTO &lt; 1åˆ†é’Ÿ</p>
<h5 data-id="heading-64">ä¸šåŠ¡æŒ‡æ ‡</h5>
<p><strong>è‡ªåŠ¨åŒ–å¤„ç†ç‡</strong>ï¼šç›®æ ‡ &gt; 70%</p>
<p><strong>é¦–æ¬¡è§£å†³ç‡</strong>ï¼šç›®æ ‡ &gt; 74%</p>
<p><strong>å®¢æˆ·æ»¡æ„åº¦</strong>ï¼šç›®æ ‡ &gt; 80%</p>
<p><strong>å¹³å‡å¤„ç†æ—¶é—´</strong>ï¼šç›®æ ‡ &lt; 30ç§’</p>
<h4 data-id="heading-65">ç›‘æ§ä¸å‘Šè­¦</h4>
<h5 data-id="heading-66">æ•°æ®åº“ç›‘æ§</h5>
<p>-- ç›‘æ§æŸ¥è¯¢æ€§èƒ½</p>
<p>SELECT query, calls, mean_time, max_time</p>
<p>FROM pg_stat_statements</p>
<p>WHERE query LIKE '%knowledge_base%'</p>
<p>ORDER BY mean_time DESC;</p>
<p>-- ç›‘æ§ç´¢å¼•ä½¿ç”¨æƒ…å†µ</p>
<p>SELECT schemaname, tablename, indexname, idx_scan, idx_tup_read</p>
<p>FROM pg_stat_user_indexes</p>
<p>WHERE tablename = 'knowledge_base'</p>
<p>ORDER BY idx_scan DESC;</p>
<p>-- ç›‘æ§è¡¨å¤§å°</p>
<p>SELECT schemaname, tablename,</p>
<p>pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as size</p>
<p>FROM pg_tables</p>
<p>WHERE schemaname = 'public'</p>
<p>ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;</p>
<h5 data-id="heading-67">åº”ç”¨å±‚ç›‘æ§</h5>
<p><strong>APIå“åº”æ—¶é—´</strong>ï¼šç›‘æ§å„ä¸ªAPIç«¯ç‚¹çš„å“åº”æ—¶é—´</p>
<p><strong>é”™è¯¯ç‡</strong>ï¼šç›‘æ§ç³»ç»Ÿé”™è¯¯å’Œå¼‚å¸¸</p>
<p><strong>å‘é‡æ£€ç´¢å‘½ä¸­ç‡</strong>ï¼šç›‘æ§å‘é‡æ£€ç´¢çš„æ•ˆæœ</p>
<p><strong>æ¨¡å‹å‡†ç¡®ç‡</strong>ï¼šç›‘æ§æ„å›¾è¯†åˆ«å’Œæƒ…æ„Ÿåˆ†æçš„å‡†ç¡®ç‡</p>
<h2 data-id="heading-68">æ€»ç»“ä¸æœªæ¥</h2>
<h4 data-id="heading-69">æŠ€æœ¯å‘å±•æ–¹å‘</h4>
<h5 data-id="heading-70">å¤šæ¨¡æ€æ•°æ®æ”¯æŒ</h5>
<p>æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€æ•°æ®</p>
<p>ç»Ÿä¸€çš„å¤šæ¨¡æ€å‘é‡è¡¨ç¤º</p>
<p>è·¨æ¨¡æ€çš„ç›¸ä¼¼åº¦æ£€ç´¢</p>
<h5 data-id="heading-71">å®æ—¶æµå¤„ç†</h5>
<p>æ”¯æŒå®æ—¶çš„æ•°æ®æµå¤„ç†</p>
<p>æµå¼å‘é‡è®¡ç®—</p>
<h5 data-id="heading-72">è”é‚¦å­¦ä¹ </h5>
<p>æ”¯æŒåˆ†å¸ƒå¼çš„æ¨¡å‹è®­ç»ƒ</p>
<p>ä¿æŠ¤ç”¨æˆ·éšç§çš„åŒæ—¶è¿›è¡Œæ¨¡å‹ä¼˜åŒ–</p>
<p>å¤šä¼ä¸šçš„åä½œå­¦ä¹ </p>
<h4 data-id="heading-73">åº”ç”¨åˆ›æ–°æ–¹å‘</h4>
<h5 data-id="heading-74">ä¸»åŠ¨æœåŠ¡</h5>
<p>ä»è¢«åŠ¨åº”ç­”åˆ°ä¸»åŠ¨æ¨è</p>
<p>åŸºäºç”¨æˆ·è¡Œä¸ºçš„æ™ºèƒ½æç¤º</p>
<p>ä¸ªæ€§åŒ–çš„è¥é”€å’ŒæœåŠ¡</p>
<h5 data-id="heading-75">è·¨æ¸ é“æ•´åˆ</h5>
<p>ç»Ÿä¸€çš„å®¢æˆ·è§†å›¾</p>
<p>æ— ç¼çš„æ¸ é“åˆ‡æ¢ä½“éªŒ</p>
<p>ä¸€è‡´çš„æœåŠ¡è´¨é‡</p>
<h5 data-id="heading-76">è¡Œä¸šå‚ç›´åŒ–</h5>
<p>é’ˆå¯¹ç‰¹å®šè¡Œä¸šçš„å®šåˆ¶åŒ–è§£å†³æ–¹æ¡ˆ</p>
<p>è¡Œä¸šçŸ¥è¯†åº“çš„æ·±åº¦é›†æˆ</p>
<p>è¡Œä¸šç‰¹å®šçš„ä¸šåŠ¡æµç¨‹æ”¯æŒ</p>
<h2 data-id="heading-77">æœ€åæ€»ç»“</h2>
<p>openGaussä½œä¸ºä¸€æ¬¾å¼€æºä¼ä¸šçº§æ•°æ®åº“ï¼Œå‡­å€Ÿå…¶å¼ºå¤§çš„å‘é‡æ•°æ®åº“èƒ½åŠ›ã€é«˜æ€§èƒ½çš„äº‹åŠ¡å¤„ç†ã€å®Œå–„çš„å®‰å…¨æœºåˆ¶ï¼Œä¸ºæ™ºèƒ½å®¢æœç³»ç»Ÿçš„æ„å»ºæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡ã€ç§‘å­¦çš„æ•°æ®æ¨¡å‹ã€ä¼˜åŒ–çš„æŸ¥è¯¢ç­–ç•¥ï¼Œä¼ä¸šå¯ä»¥æ„å»ºé«˜æ•ˆã€æ™ºèƒ½ã€å®‰å…¨çš„å®¢æœç³»ç»Ÿï¼Œæ˜¾è‘—æå‡å®¢æˆ·ä½“éªŒå’Œè¿è¥æ•ˆç‡ã€‚</p>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•å’ŒopenGaussåŠŸèƒ½çš„æŒç»­å®Œå–„ï¼Œæ™ºèƒ½å®¢æœç³»ç»Ÿå°†åœ¨ä»¥ä¸‹æ–¹é¢å–å¾—æ›´å¤§çš„è¿›å±•ï¼š</p>
<p><strong>æ›´æ™ºèƒ½çš„å¯¹è¯</strong>ï¼šæ”¯æŒæ›´å¤æ‚çš„å¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç†è§£</p>
<p><strong>æ›´ä¸ªæ€§åŒ–çš„æœåŠ¡</strong>ï¼šåŸºäºæ·±åº¦å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¨èå’ŒæœåŠ¡</p>
<p><strong>æ›´å®‰å…¨çš„ä¿éšœ</strong>ï¼šå®Œå–„çš„éšç§ä¿æŠ¤å’Œæ•°æ®å®‰å…¨æœºåˆ¶</p>
<p><strong>æ›´å¹¿æ³›çš„åº”ç”¨</strong>ï¼šä»å®¢æœæ‰©å±•åˆ°è¥é”€ã€é”€å”®ç­‰å¤šä¸ªä¸šåŠ¡åœºæ™¯</p>
<p>openGausså°†ç»§ç»­èµ‹èƒ½ä¼ä¸šçš„æ•°å­—åŒ–è½¬å‹ï¼ŒåŠ©åŠ›ä¼ä¸šåœ¨AIæ—¶ä»£å®ç°æœåŠ¡åˆ›æ–°å’Œä¸šåŠ¡å¢é•¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ Trae IDE å®Œæˆã€Šæµç¢§å¡ç‰‡ã€‹é¡¹ç›®çš„å®Œæ•´è®°å½•]]></title>    <link>https://juejin.cn/post/7577202452800176128</link>    <guid>https://juejin.cn/post/7577202452800176128</guid>    <pubDate>2025-11-27T13:05:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577202452800176128" data-draft-id="7577239264309248000" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ Trae IDE å®Œæˆã€Šæµç¢§å¡ç‰‡ã€‹é¡¹ç›®çš„å®Œæ•´è®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-27T13:05:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‡å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/4441682708283191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ Trae IDE å®Œæˆã€Šæµç¢§å¡ç‰‡ã€‹é¡¹ç›®çš„å®Œæ•´è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682708283191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‡å°‘
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:05:55.000Z" title="Thu Nov 27 2025 13:05:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ Trae IDE å®Œæˆã€Šæµç¢§å¡ç‰‡ã€‹é¡¹ç›®çš„å®Œæ•´è®°å½•</h2>
<h3 data-id="heading-1">é¡¹ç›®èƒŒæ™¯ä¸èµ·ç‚¹</h3>
<blockquote>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcard.zbztb.cn%2F" target="_blank" title="https://card.zbztb.cn/" ref="nofollow noopener noreferrer">card.zbztb.cn/</a></p>
</blockquote>
<p>è¿™æ˜¯æˆ‘ä½¿ç”¨ Trae IDE + Gemini-3-pro-Preview åœ¨ 6 å°æ—¶å†…å®Œæˆçš„å®æˆ˜é¡¹ç›®â€”â€”æµç¢§å¡ç‰‡ï¼ˆLiubi Cardï¼‰ã€‚ä½œä¸ºä¸€ä¸ªç¤¾äº¤åª’ä½“å¡ç‰‡ç”Ÿæˆå·¥å…·ï¼Œå®ƒæ”¯æŒ 40+ ç§è§†è§‰æ¨¡æ¿ï¼Œæ‰€æœ‰å›¾ç‰‡ç”Ÿæˆéƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆã€‚</p>
<p><strong>æˆ‘çš„å¼€å‘ç›®æ ‡ï¼š</strong></p>
<ul>
<li>å¿«é€ŸéªŒè¯ AI è¾…åŠ©å¼€å‘çš„å¯è¡Œæ€§</li>
<li>å®ç°ä¸€ä¸ªå®Œæ•´å¯ç”¨çš„äº§å“åŸå‹</li>
<li>æ¢ç´¢ Trae IDE çš„æœ€ä½³å®è·µ</li>
<li>ç§¯ç´¯å¯å¤ç”¨çš„å¼€å‘ç»éªŒ</li>
</ul>
<p><strong>æœ€ç»ˆæˆæœï¼š</strong></p>
<ul>
<li>âœ… 6 å°æ—¶å®Œæˆä» 0 åˆ°ä¸Šçº¿</li>
<li>âœ… 40+ ç²¾ç¾æ¨¡æ¿ç³»ç»Ÿ</li>
<li>âœ… å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ</li>
<li>âœ… æ·±è‰²æ¨¡å¼é€‚é…</li>
<li>âœ… æ‰¹é‡å¯¼å‡ºåŠŸèƒ½</li>
</ul>
<hr/>
<p>ç›®å‰é¡¹ç›®å·²ç»éƒ¨ç½²ä¸Šçº¿ï¼ŒæŸ¥çœ‹ä¸‹æ•ˆæœå§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb102acb4c7b4291a251c071dad13bab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=CT5Gpb%2FShdWlMvv3cLMFXah5Qnc%3D" alt="image-20251127173418872" loading="lazy"/></p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0645f2834de4832ad8d5b802639eef3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=xcVhwnfwk6xpSaXuRvwPjnyD8mU%3D" alt="image-20251127173428581" loading="lazy"/></p>
<h3 data-id="heading-2">æˆ‘çš„å®é™…å¼€å‘å†ç¨‹</h3>
<h4 data-id="heading-3">å¯¹è¯ä¸€ï¼šå¼€å‘ä¸€ä¸ªçº¯Webç«¯çš„å¡ç‰‡ç”Ÿæˆä¸åˆ†äº«å¹³å°</h4>
<p>åœ¨å›½é™…ç‰ˆTraeå¯¹è¯æ¡†ä¸‹ï¼Œè¾“å…¥æƒ³è¦å®ç°çš„å†…å®¹ï¼Œç„¶ååˆ©ç”¨è‡ªå¸¦çš„æç¤ºè¯ä¼˜åŒ–åŠŸèƒ½ï¼Œå¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23b8c9b8ab794271950f3461696c77d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=JZWEeYmuMVgNRHSQQpnUaqNae%2Bw%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å‘ä¸€ä¸ªçº¯Webç«¯çš„å¡ç‰‡ç”Ÿæˆä¸åˆ†äº«å¹³å°ï¼Œå…·ä½“éœ€æ±‚å¦‚ä¸‹ï¼š

<span class="hljs-bullet">1.</span> æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼š

<span class="hljs-bullet">-</span> å¼€å‘ç”¨æˆ·è¾“å…¥ç•Œé¢ï¼ŒåŒ…å«æ–‡æœ¬è¾“å…¥åŒºåŸŸå’Œå®æ—¶é¢„è§ˆåŠŸèƒ½

<span class="hljs-bullet">-</span> å®ç°å¡ç‰‡ç”Ÿæˆå¼•æ“ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„æ–‡å­—å†…å®¹è‡ªåŠ¨æ’ç‰ˆæˆç¾è§‚çš„å¡ç‰‡å¸ƒå±€

<span class="hljs-bullet">-</span> é›†æˆHTMLè½¬å›¾ç‰‡åŠŸèƒ½ï¼Œæ”¯æŒå°†ç”Ÿæˆçš„å¡ç‰‡è½¬æ¢ä¸ºå›¾ç‰‡æ ¼å¼

<span class="hljs-bullet">2.</span> å›¾ç‰‡å¤„ç†åŠŸèƒ½ï¼š

<span class="hljs-bullet">-</span> å®ç°ç‚¹å‡»å¤åˆ¶åŠŸèƒ½ï¼Œå°†å¡ç‰‡ä»¥å›¾ç‰‡å½¢å¼å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿

<span class="hljs-bullet">-</span> æä¾›å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ï¼Œæ”¯æŒPNG/JPEGæ ¼å¼é€‰æ‹©

<span class="hljs-bullet">-</span> ç¡®ä¿ç”Ÿæˆçš„å›¾ç‰‡åˆ†è¾¨ç‡é€‚é…å°çº¢ä¹¦å’ŒæŠ–éŸ³çš„åˆ†äº«è¦æ±‚

<span class="hljs-bullet">3.</span> ç¤¾äº¤å¹³å°é€‚é…ï¼š

<span class="hljs-bullet">-</span> ä¼˜åŒ–å¡ç‰‡å°ºå¯¸å’Œæ¯”ä¾‹ï¼Œç¬¦åˆå°çº¢ä¹¦å’ŒæŠ–éŸ³çš„å†…å®¹è§„èŒƒ

<span class="hljs-bullet">-</span> æ·»åŠ å¹³å°åˆ†äº«æŒ‰é’®ï¼Œæ”¯æŒä¸€é”®åˆ†äº«åˆ°ä¸»æµç¤¾äº¤å¹³å°

<span class="hljs-bullet">-</span> åœ¨å›¾ç‰‡ä¸­è‡ªåŠ¨åµŒå…¥å“ç‰Œæ°´å°ï¼ˆå¯é€‰é…ç½®ï¼‰

<span class="hljs-bullet">4.</span> æ¨¡æ¿ç®¡ç†ç³»ç»Ÿï¼š

<span class="hljs-bullet">-</span> å¼€å‘å¤šæ ·åŒ–çš„å¡ç‰‡æ¨¡æ¿åº“ï¼ŒåŒ…æ‹¬ä¸åŒé£æ ¼ã€é…è‰²å’Œå¸ƒå±€

<span class="hljs-bullet">-</span> å®ç°æ¨¡æ¿é¢„è§ˆå’Œé€‰æ‹©åŠŸèƒ½

<span class="hljs-bullet">-</span> å…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿å‚æ•°ï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰ï¼‰

<span class="hljs-bullet">5.</span> æŠ€æœ¯æ–¹æ¡ˆå»ºè®®ï¼š

<span class="hljs-bullet">-</span> å‰ç«¯æ¡†æ¶ï¼šReact/Vue.js

<span class="hljs-bullet">-</span> å›¾ç‰‡ç”Ÿæˆï¼šhtml2canvasæˆ–dom-to-image

<span class="hljs-bullet">-</span> UIç»„ä»¶åº“ï¼šMaterial-UIæˆ–Ant Design

<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†ï¼šReduxæˆ–Vuex

<span class="hljs-bullet">-</span> æ„å»ºå·¥å…·ï¼šWebpackæˆ–Vite

<span class="hljs-bullet">6.</span> è´¨é‡è¦æ±‚ï¼š

<span class="hljs-bullet">-</span> å“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

<span class="hljs-bullet">-</span> ç”Ÿæˆå›¾ç‰‡æ¸…æ™°åº¦é«˜ï¼Œæ— æ¨¡ç³Šå¤±çœŸ

<span class="hljs-bullet">-</span> æ“ä½œæµç¨‹æµç•…ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½

<span class="hljs-bullet">-</span> æ€§èƒ½ä¼˜åŒ–ï¼Œç¡®ä¿å¿«é€Ÿç”Ÿæˆå’Œè½¬æ¢

<span class="hljs-bullet">7.</span> å¼€å‘é‡Œç¨‹ç¢‘ï¼š

<span class="hljs-bullet">-</span> ç¬¬ä¸€é˜¶æ®µï¼šå®ŒæˆåŸºç¡€å¡ç‰‡ç”ŸæˆåŠŸèƒ½

<span class="hljs-bullet">-</span> ç¬¬äºŒé˜¶æ®µï¼šå®ç°å›¾ç‰‡å¯¼å‡ºå’Œåˆ†äº«åŠŸèƒ½

<span class="hljs-bullet">-</span> ç¬¬ä¸‰é˜¶æ®µï¼šå¼€å‘æ¨¡æ¿ç®¡ç†ç³»ç»Ÿ

<span class="hljs-bullet">-</span> ç¬¬å››é˜¶æ®µï¼šè¿›è¡Œå¤šå¹³å°æµ‹è¯•å’Œä¼˜åŒ–
</code></pre>
<p>å¼€å§‹æ‰§è¡Œè®¡åˆ’ï¼ŒTraeæ¯”è¾ƒæ™ºèƒ½ï¼Œç»™å‡ºäº†å…·ä½“çš„è®¡åˆ’å’Œæ‰§è¡Œæ­¥éª¤ï¼Œå°±å¼€å§‹å¸®æˆ‘åˆ›å»ºé¡¹ç›®äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ff5de249d1e4ee68f8c76e6051f132f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=O2pq%2FCjYgLSrLFR3soxUwbjygUY%3D" alt="image-20251127174102177" loading="lazy"/></p>
<p>å…¶å®è¿™ä¸ªæ‰§è¡Œæµç¨‹ç»“æŸåï¼Œæˆ‘çš„ç½‘ç«™å·²ç»å®Œæˆäº† 80%åŠŸèƒ½äº†ï¼Œä¸å¾—ä¸æ„Ÿå¹ <strong>gemini-3-pro-preview</strong>çš„å¼ºå¤§ï¼Œæ˜¨æ™šä½¿ç”¨çš„æ—¶å€™ï¼Œæœ€å¤šä¹Ÿæ˜¯2ã€3ä¸ªäººå¼€å§‹æ’é˜Ÿï¼Œå¤§å®¶æƒ³è¦ä½“éªŒçš„å°±æŠ“ç´§äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acf665f536be48bf9b8493ac49158777~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=GuEMUTJbSX9aKOwSUq2N8HllT2c%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">å¯¹è¯äºŒï¼šä¿®å¤bug</h4>
<p>åœ¨ç¬¬ä¸€è½®å¯¹è¯ä¸‹ï¼Œé¡¹ç›®è¿è¡Œå‡ºå‡ºç°äº†å°è®¸é—®é¢˜ï¼Œæˆ‘è¿™è¾¹ç›´æ¥æŠŠé”™è¯¯æç¤ºç²˜è´´å›Traeï¼Œè®©å®ƒè‡ªå·±ä¿®å¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f509a9f9e0543099db4ed9b17e221df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=R7P42X8h2IFoPrF0O6vCxVqypy0%3D" alt="image-20251127174338525" loading="lazy"/></p>
<h4 data-id="heading-5">å¯¹è¯ä¸‰ï¼šä¸ºæ¸¸æˆ/åº”ç”¨è®¾è®¡å¹¶å®ç°ä¸€ç³»åˆ—é«˜å“è´¨çš„é…·ç‚«åŠ¨æ€çš®è‚¤ä¸»é¢˜</h4>
<p>æ¥ç€è€ƒè™‘åˆ°å¡ç‰‡éœ€è¦é…·ç‚«çš„çš®è‚¤ï¼Œæˆ‘å°±å¼€å§‹è®©Traeå¸®æˆ‘åœ¨å·²æœ‰çš„åŠŸèƒ½ä¸‹æ·»åŠ åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">æ¸¸æˆ/åº”ç”¨è®¾è®¡å¹¶å®ç°ä¸€ç³»åˆ—é«˜å“è´¨çš„é…·ç‚«åŠ¨æ€çš®è‚¤ä¸»é¢˜ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š

<span class="hljs-bullet">1.</span> ä¸»é¢˜æ¸…å•å¿…é¡»åŒ…å«ä½†ä¸ä»…é™äºï¼š

<span class="hljs-bullet">-</span> é›ªå±±ä¸»é¢˜ï¼šåŠ¨æ€é£˜é›ªæ•ˆæœ+å†°å·åå…‰

<span class="hljs-bullet">-</span> ç«å±±ä¸»é¢˜ï¼šç†”å²©æµåŠ¨+ç²’å­å–·å‘ç‰¹æ•ˆ

<span class="hljs-bullet">-</span> æµ·æµªä¸»é¢˜ï¼š3Dæµä½“æ¨¡æ‹Ÿ+æµªèŠ±é£æº…

<span class="hljs-bullet">-</span> æ˜Ÿç©ºä¸»é¢˜ï¼šé“¶æ²³æ—‹è½¬+æµæ˜Ÿåˆ’è¿‡åŠ¨ç”»

<span class="hljs-bullet">2.</span> æŠ€æœ¯è§„æ ¼ï¼š

<span class="hljs-bullet">-</span> æ¯ä¸ªä¸»é¢˜éœ€æä¾›4Kåˆ†è¾¨ç‡ç´ æ

<span class="hljs-bullet">-</span> æ”¯æŒå®æ—¶åŠ¨æ€å…‰ç…§æ•ˆæœ

<span class="hljs-bullet">-</span> åŒ…å«ç¯å¢ƒéŸ³æ•ˆé…å¥—æ–¹æ¡ˆ

<span class="hljs-bullet">-</span> é€‚é…ç§»åŠ¨ç«¯/PCç«¯å¤šå¹³å°æ¸²æŸ“

<span class="hljs-bullet">3.</span> è§†è§‰è¦æ±‚ï¼š

<span class="hljs-bullet">-</span> ä½¿ç”¨HDRè‰²å½©ç©ºé—´

<span class="hljs-bullet">-</span> ç²’å­ç‰¹æ•ˆä¸å°‘äº3ç§åŠ¨æ€å…ƒç´ 

<span class="hljs-bullet">-</span> ä¸»è§†è§‰ç„¦ç‚¹åŒºåŸŸéœ€æœ‰å¼•å¯¼æ€§åŠ¨çº¿è®¾è®¡

<span class="hljs-bullet">-</span> æ‰€æœ‰åŠ¨ç”»å¾ªç¯æ—¶é•¿æ§åˆ¶åœ¨8-15ç§’åŒºé—´

<span class="hljs-bullet">4.</span> æ‰©å±•å»ºè®®ï¼š

<span class="hljs-bullet">-</span> æå…‰ä¸»é¢˜ï¼ˆåŠ¨æ€å…‰å¹•ï¼‰

<span class="hljs-bullet">-</span> é‡å­éš§é“ï¼ˆèµ›åšæœ‹å…‹é£æ ¼ï¼‰

<span class="hljs-bullet">-</span> ç»†èƒåˆ†è£‚ï¼ˆç”Ÿç‰©ç§‘æŠ€æ„Ÿï¼‰

<span class="hljs-bullet">-</span> æ•°æ®é£æš´ï¼ˆæ•°å­—ç²’å­æµï¼‰

è¯·ç¡®ä¿æ‰€æœ‰çš®è‚¤ä¸»é¢˜åœ¨ä¿æŒè§†è§‰å†²å‡»åŠ›çš„åŒæ—¶ï¼Œç³»ç»Ÿèµ„æºå ç”¨ä¸è¶…è¿‡åŸºç¡€çš®è‚¤çš„120%ã€‚æ¯ä¸ªä¸»é¢˜éœ€æä¾›é¢„è§ˆç¼©ç•¥å›¾ã€ç‰¹æ•ˆè¯´æ˜æ–‡æ¡£å’ŒæŠ€æœ¯å‚æ•°è¡¨ã€‚
</code></pre>
<p>Traeä¸€å£æ°”ç»™æˆ‘æ•´ç†äº†15ä¸ªæ­¥éª¤ï¼Œå¯è°“æ˜¯æ€ç»´è°¨æ…çš„boyã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d699e370a884e59bf5efb56aa267ca4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=04rfXzQeZRLjqf6O4vAL9zsXE6E%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä¹Ÿé¡ºåˆ©å¾—åˆ°äº†ç»“æœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c565b5492743bcae4181f36c7e311c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=V%2FRQ%2BwHbfb5jxWV0GOKHN%2FyXdq0%3D" alt="image-20251127174601873" loading="lazy"/></p>
<h4 data-id="heading-6">å¯¹è¯å››ï¼šä¿®å¤bug:å­˜åœ¨é—®é¢˜ï¼Œå¡ç‰‡å†…æœ‰å†…å®¹éƒ½ï¼Œä½†æ˜¯å¤åˆ¶çš„å›¾ç‰‡ ç¼ºæ²¡æœ‰ å¡ç‰‡çš„æ–‡æœ¬å†…å®¹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce356f658cf54bd1ae6a1f4d137c38cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=TqGeYorX0tOAUFWJOIGVmZlnOCI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">å¯¹è¯5ï¼šä¿®å¤bugï¼šç”¨äº† ä¸»é¢˜ï¼Œæ¯”å¦‚è¯´é›ªå±±ä¸»é¢˜åï¼Œå†ä¿®æ”¹èƒŒæ™¯é¢œè‰²å°±æ— æ•ˆäº†ï¼Œæˆ‘å¸Œæœ›å®ƒæœ‰æ•ˆ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83020048ecf6447cbc354bd9d1c7615e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=AqnMOza9JgmsobKmw2IROIt0kV0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">åç»­</h3>
<p>è€ƒè™‘åˆ°åç»­è¿˜éœ€è¦ä¸æ–­å¢åŠ åŠŸèƒ½ï¼Œå…¶å®å¯ä»¥åˆ©ç”¨Traeæä¾›çš„SOLOåŠŸèƒ½ï¼Œä¸€æ­¥åˆ°ä½ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c596e6ca1844f5d996b40e467fffba0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764853555&amp;x-signature=0glvXJnpNtNjo3i3wb5Z29CKVis%3D" alt="image-20251127210442243" loading="lazy"/></p>
<p>åç»­å†…å®¹ä¹Ÿå·®ä¸å¤šï¼ŒåŸºæœ¬ <strong>Gemini-3-pro-preview</strong> åšåˆ°äº†æˆ‘æƒ³è¦çš„ï¼ŒåŸºæœ¬ä½¿ç”¨è‡ªç„¶è¯­è¨€å»ç†è§£å’Œå¼€å‘æˆ‘æƒ³è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸ªèƒ½åŠ›çš„æå‡å¯ä»¥å¤§ä¹‹å‰ä¸€å¤§å †ä¼˜åŒ–æç¤ºè¯çš„å·¥ä½œéƒ½ç»™è¦†ç›–äº†ï¼Œæœç„¶å°±æ˜¯é¥é¥é¢†å…ˆäº†ã€‚</p>
<p>æœ€åæˆ‘æ˜¯åˆ©ç”¨äº†è…¾è®¯edgeOneæŠŠç½‘ç«™ç»™éƒ¨ç½²ä¸Šå»äº†ï¼Œæ¬¢è¿ä½“éªŒã€‚</p>
<p>ä½“éªŒåœ°å€</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcard.zbztb.cn%2F" target="_blank" title="https://card.zbztb.cn/" ref="nofollow noopener noreferrer">card.zbztb.cn/</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetes Deployment é…ç½®ç®€åŒ–å®æˆ˜ï¼šä»å¤æ‚åˆ°é«˜æ•ˆ]]></title>    <link>https://juejin.cn/post/7577228831138168875</link>    <guid>https://juejin.cn/post/7577228831138168875</guid>    <pubDate>2025-11-27T13:22:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831138168875" data-draft-id="7577198193216045099" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetes Deployment é…ç½®ç®€åŒ–å®æˆ˜ï¼šä»å¤æ‚åˆ°é«˜æ•ˆ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-27T13:22:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetes Deployment é…ç½®ç®€åŒ–å®æˆ˜ï¼šä»å¤æ‚åˆ°é«˜æ•ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:22:13.000Z" title="Thu Nov 27 2025 13:22:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šDeployment é…ç½®çš„å¤æ‚æ€§æŒ‘æˆ˜</h2>
<p>åœ¨ Kubernetes ä¸­ï¼ŒDeployment æ˜¯ç®¡ç†æ— çŠ¶æ€åº”ç”¨çš„æ ¸å¿ƒèµ„æºå¯¹è±¡ï¼Œå®ƒé€šè¿‡å£°æ˜å¼é…ç½®ä¸ºæˆ‘ä»¬æä¾›äº†å‰¯æœ¬ç®¡ç†ã€æ»šåŠ¨æ›´æ–°ã€ç‰ˆæœ¬å›æ»šç­‰å¼ºå¤§åŠŸèƒ½ã€‚ç„¶è€Œï¼Œéšç€åº”ç”¨å¤æ‚åº¦çš„å¢åŠ ï¼ŒDeployment é…ç½®æ–‡ä»¶ä¹Ÿå˜å¾—æ„ˆå‘å†—é•¿å’Œå¤æ‚ï¼Œä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„ YAML æ–‡ä»¶å¯èƒ½åŒ…å«æ•°åä¸ªå‚æ•°ï¼Œè¿™ç»™ç»´æŠ¤å’Œæ­£ç¡®æ€§å¸¦æ¥äº†ä¸¥å³»æŒ‘æˆ˜ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿæ€§åœ°ä»‹ç»å¤šç§ç®€åŒ– Kubernetes Deployment é…ç½®çš„ç­–ç•¥å’Œå·¥å…·ï¼Œå¸®åŠ©æ‚¨åœ¨ä¿æŒåŠŸèƒ½å®Œæ•´æ€§çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½é…ç½®å¤æ‚åº¦å’Œå‡ºé”™æ¦‚ç‡ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜æ ¹æºï¼šä¸ºä»€ä¹ˆ Deployment é…ç½®å¦‚æ­¤å¤æ‚ï¼Ÿ</h2>
<p>åœ¨æ¢è®¨è§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£ Deployment é…ç½®å¤æ‚æ€§çš„æ ¹æºã€‚ä¸€ä¸ªå…¸å‹çš„ç”Ÿäº§çº§ Deployment é…ç½®å¯èƒ½åŒ…å«ä»¥ä¸‹å¤šä¸ªç»´åº¦çš„å‚æ•°ï¼š</p>
<ul>
<li><strong>åŸºç¡€é…ç½®</strong>ï¼šå‰¯æœ¬æ•°é‡ã€é•œåƒæ ‡ç­¾ã€å®¹å™¨ç«¯å£</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šCPU/å†…å­˜è¯·æ±‚å’Œé™åˆ¶</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šå°±ç»ªæ¢é’ˆã€å­˜æ´»æ¢é’ˆã€å¯åŠ¨æ¢é’ˆ</li>
<li><strong>æ›´æ–°ç­–ç•¥</strong>ï¼šæ»šåŠ¨æ›´æ–°å‚æ•°ã€æœ€å¤§ä¸å¯ç”¨æ¯”ä¾‹</li>
<li><strong>å®‰å…¨ä¸Šä¸‹æ–‡</strong>ï¼šç”¨æˆ·æƒé™ã€å®‰å…¨ç­–ç•¥</li>
<li><strong>ç¯å¢ƒé…ç½®</strong>ï¼šç¯å¢ƒå˜é‡ã€é…ç½®æ˜ å°„ã€å¯†é’¥</li>
</ul>
<p>è¿™ç§å¤æ‚æ€§æºäºç”Ÿäº§ç¯å¢ƒå¯¹<strong>åº”ç”¨é«˜å¯ç”¨æ€§</strong>ã€<strong>å¯æ‰©å±•æ€§</strong>å’Œ<strong>å¯è§‚æµ‹æ€§</strong>çš„ä¸¥æ ¼è¦æ±‚ã€‚ç›´æ¥ä¿®æ”¹è¿™äº›å†—é•¿çš„ YAML æ–‡ä»¶ä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”åœ¨å¤šç¯å¢ƒéƒ¨ç½²æ—¶éš¾ä»¥ä¿æŒä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-2">äºŒã€è§£å†³æ–¹æ¡ˆä¸€ï¼šæ¨¡æ¿åŒ–ä¸æŠ½è±¡åŒ–</h2>
<h3 data-id="heading-3">2.1 ä½¿ç”¨ Helm è¿›è¡Œåº”ç”¨æ‰“åŒ…</h3>
<p>Helm ä½œä¸º Kubernetes çš„åŒ…ç®¡ç†å™¨ï¼Œé€šè¿‡æ¨¡æ¿åŒ–å’Œå€¼åˆ†ç¦»ï¼Œæå¤§åœ°ç®€åŒ–äº†å¤šç¯å¢ƒéƒ¨ç½²çš„å¤æ‚åº¦ã€‚</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ¨¡æ¿å¼•æ“ï¼šä½¿ç”¨ Go æ¨¡æ¿è¯­è¨€ï¼Œæ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯</li>
<li>å€¼è¦†ç›–ï¼šé€šè¿‡ç‹¬ç«‹çš„ values.yaml æ–‡ä»¶ç®¡ç†ç¯å¢ƒå·®å¼‚åŒ–é…ç½®</li>
<li>ä¾èµ–ç®¡ç†ï¼šæ”¯æŒå­å›¾è¡¨å’Œä¾èµ–å…³ç³»è§£æ</li>
</ul>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ Helm å›¾è¡¨ç»“æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">my-app-chart/
â”œâ”€â”€ Chart.yaml
â”œâ”€â”€ values.yaml
â””â”€â”€ templates/
<span class="hljs-code">    â”œâ”€â”€ deployment.yaml
    â”œâ”€â”€ service.yaml
    â””â”€â”€ configmap.yaml
</span></code></pre>
<p>åœ¨ <code>templates/deployment.yaml</code>ä¸­ä½¿ç”¨æ¨¡æ¿å˜é‡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Release.Name</span> }}<span class="hljs-string">-deployment</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> {{ <span class="hljs-string">.Values.replicaCount</span> }}
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Chart.Name</span> }}
        <span class="hljs-attr">image:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Values.image.repository }}</span>:<span class="hljs-template-variable">{{ .Values.image.tag }}</span>"</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> {{ <span class="hljs-string">.Values.service.port</span> }}
</code></pre>
<p>å¯¹åº”çš„ <code>values.yaml</code>æä¾›é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">replicaCount:</span> <span class="hljs-number">3</span>
<span class="hljs-attr">image:</span>
  <span class="hljs-attr">repository:</span> <span class="hljs-string">nginx</span>
  <span class="hljs-attr">tag:</span> <span class="hljs-string">stable</span>
<span class="hljs-attr">service:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰åˆ›å»ºä¸åŒçš„ values æ–‡ä»¶ï¼Œè€Œä¿æŒæ¨¡æ¿ä¸å˜ã€‚</p>
<h3 data-id="heading-4">2.2 ä½¿ç”¨ Kustomize è¿›è¡Œé…ç½®è¦†ç›–</h3>
<p>Kustomize é‡‡ç”¨"åŸºç¡€+è¦†ç›–"çš„æ¨¡å‹ï¼Œä¸éœ€è¦å­¦ä¹ æ¨¡æ¿è¯­æ³•å³å¯å®ç°é…ç½®å·®å¼‚åŒ–ã€‚</p>
<p><strong>é¡¹ç›®ç»“æ„ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">my-app/
â”œâ”€â”€ <span class="hljs-keyword">base</span>/
â”‚   â”œâ”€â”€ kustomization.yaml
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â””â”€â”€ service.yaml
â””â”€â”€ overlays/
    â”œâ”€â”€ development/
    â”‚   â”œâ”€â”€ kustomization.yaml
    â”‚   â””â”€â”€ replica-patch.yaml
    â””â”€â”€ production/
        â”œâ”€â”€ kustomization.yaml
        â”œâ”€â”€ replica-patch.yaml
        â””â”€â”€ hpa.yaml
</code></pre>
<p><strong>å¼€å‘ç¯å¢ƒè¦†ç›–é…ç½®</strong>ï¼ˆoverlays/development/kustomization.yamlï¼‰ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-section">kind: Kustomization</span>

<span class="hljs-section">resources:</span>
- ../../base

<span class="hljs-section">patchesStrategicMerge:</span>
- replica-patch.yaml

<span class="hljs-section">namePrefix: dev-</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•é¿å…äº†æ¨¡æ¿è¯­æ³•å¤æ‚åº¦ï¼Œç›´æ¥ä½¿ç”¨åŸç”Ÿ YAML è¿›è¡Œé…ç½®è¡¥ä¸ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€è§£å†³æ–¹æ¡ˆäºŒï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹</h2>
<h3 data-id="heading-6">3.1 ä½¿ç”¨ Skaffold å®ç°æŒç»­å¼€å‘</h3>
<p>Skaffold æ˜¯è°·æ­Œå¼€å‘çš„ Kubernetes å¼€å‘å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–æ„å»ºã€æ¨é€å’Œéƒ¨ç½²æµç¨‹ã€‚</p>
<p><strong>Skaffold æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹ä»£ç å˜æ›´å¹¶è§¦å‘é‡æ–°éƒ¨ç½²</li>
<li>æ”¯æŒå¤šç§éƒ¨ç½²å·¥å…·ï¼ˆkubectlã€Helmã€Kustomizeï¼‰</li>
<li>æä¾›ç«¯åˆ°ç«¯çš„å¼€å‘å·¥ä½œæµ</li>
</ul>
<p><strong>åŸºç¡€é…ç½®ç¤ºä¾‹</strong>ï¼ˆskaffold.yamlï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">skaffold/v4beta13</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Config</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">my-app</span>
<span class="hljs-attr">build:</span>
  <span class="hljs-attr">artifacts:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">my-app</span>
    <span class="hljs-attr">context:</span> <span class="hljs-string">src</span>
    <span class="hljs-attr">docker:</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile</span>
<span class="hljs-attr">deploy:</span>
  <span class="hljs-attr">kubectl:</span>
    <span class="hljs-attr">manifests:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">k8s/*.yaml</span>
<span class="hljs-attr">profiles:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">dev</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">kustomize:</span>
      <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">overlays/dev</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">prod</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">helm:</span>
      <span class="hljs-attr">releases:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">my-app</span>
        <span class="hljs-attr">chartPath:</span> <span class="hljs-string">charts/my-app</span>
</code></pre>
<p>é€šè¿‡ Skaffoldï¼Œå¼€å‘è€…åªéœ€è¿è¡Œ <code>skaffold dev</code>å³å¯è¿›å…¥è‡ªåŠ¨åŒ–å¼€å‘å¾ªç¯ï¼Œå¤§å¹…ç®€åŒ–æœ¬åœ°å¼€å‘å’Œè°ƒè¯•æµç¨‹ã€‚</p>
<h3 data-id="heading-7">3.2 GitOps å·¥ä½œæµ</h3>
<p>ç»“åˆ ArgoCD æˆ– Flux å®ç° GitOpsï¼Œå°†é…ç½®å­˜å‚¨åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå†…ï¼Œå®ç°å£°æ˜å¼çš„åŸºç¡€è®¾æ–½ç®¡ç†ã€‚</p>
<p><strong>GitOps æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li>å£°æ˜å¼ï¼šç³»ç»ŸçŠ¶æ€é€šè¿‡å£°æ˜æ€§æè¿°å®šä¹‰</li>
<li>ç‰ˆæœ¬æ§åˆ¶ï¼šæ‰€æœ‰é…ç½®å˜æ›´ç‰ˆæœ¬åŒ–ã€å¯å®¡è®¡</li>
<li>è‡ªåŠ¨åŒæ­¥ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹é…ç½®å˜æ›´å¹¶åº”ç”¨</li>
<li>è‡ªæ„ˆï¼šç³»ç»ŸæŒç»­è¶‹å‘æœŸæœ›çŠ¶æ€</li>
</ul>
<h2 data-id="heading-8">å››ã€è§£å†³æ–¹æ¡ˆä¸‰ï¼šé…ç½®æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-9">4.1 å¥åº·æ£€æŸ¥æ ‡å‡†åŒ–</h3>
<p>æ­£ç¡®é…ç½®å¥åº·æ£€æŸ¥æ¢é’ˆæ˜¯ç¡®ä¿åº”ç”¨é«˜å¯ç”¨çš„åŸºç¡€ã€‚</p>
<p><strong>æ¢é’ˆé…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">containers:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app</span>
  <span class="hljs-attr">livenessProbe:</span>
    <span class="hljs-attr">httpGet:</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">/health</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
    <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
    <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">timeoutSeconds:</span> <span class="hljs-number">5</span>
  <span class="hljs-attr">readinessProbe:</span>
    <span class="hljs-attr">httpGet:</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">/ready</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
    <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">5</span>
    <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">5</span>
    <span class="hljs-attr">timeoutSeconds:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">startupProbe:</span>
    <span class="hljs-attr">httpGet:</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">/startup</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
    <span class="hljs-attr">failureThreshold:</span> <span class="hljs-number">30</span>
    <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
</code></pre>
<p>å¥åº·æ£€æŸ¥ç¡®ä¿ Kubernetes èƒ½å¤Ÿå‡†ç¡®åˆ¤æ–­åº”ç”¨çŠ¶æ€ï¼Œæ˜¯å®ç°è‡ªæ„ˆå’Œæ»šåŠ¨æ›´æ–°çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-10">4.2 èµ„æºç®¡ç†ä¸é™åˆ¶</h3>
<p>åˆç†è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶æ˜¯ä¿è¯åº”ç”¨ç¨³å®šè¿è¡Œçš„å…³é”®ã€‚</p>
<p><strong>èµ„æºé™åˆ¶ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"128Mi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"1000m"</span>
</code></pre>
<p>èµ„æºç®¡ç†æœ€ä½³å®è·µï¼š</p>
<ul>
<li>å§‹ç»ˆè®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶</li>
<li>é€šè¿‡ HPA å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹</li>
<li>å®šæœŸç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µå¹¶ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-11">4.3 å‘½åç©ºé—´ä¸æ ‡ç­¾ç­–ç•¥</h3>
<p>ä½¿ç”¨å‘½åç©ºé—´å’Œæ ‡ç­¾å®ç°é€»è¾‘éš”ç¦»å’Œèµ„æºç»„ç»‡ã€‚</p>
<p><strong>æ ‡ç­¾æ ‡å‡†åŒ–ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">user-service</span>
    <span class="hljs-attr">version:</span> <span class="hljs-string">v1.2.3</span>
    <span class="hljs-attr">environment:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">tier:</span> <span class="hljs-string">backend</span>
</code></pre>
<p>ç»Ÿä¸€çš„æ ‡ç­¾ç­–ç•¥ä¾¿äºèµ„æºæŸ¥è¯¢ã€ç›‘æ§å’Œè‡ªåŠ¨åŒ–ç®¡ç†ã€‚</p>
<h2 data-id="heading-12">äº”ã€æ¸è¿›å¼é…ç½®ç­–ç•¥</h2>
<h3 data-id="heading-13">5.1 ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å®Œå–„</h3>
<p>ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§åˆ›å»ºå®Œç¾çš„ Deployment é…ç½®ï¼Œè€Œåº”é‡‡ç”¨æ¸è¿›å¼æ–¹æ³•ï¼š</p>
<ol>
<li><strong>åŸºç¡€é˜¶æ®µ</strong>ï¼šä»…åŒ…å«å¿…è¦å­—æ®µï¼ˆé•œåƒã€å‰¯æœ¬æ•°ã€ç«¯å£ï¼‰</li>
<li><strong>å¢å¼ºé˜¶æ®µ</strong>ï¼šæ·»åŠ å¥åº·æ£€æŸ¥ã€èµ„æºé™åˆ¶</li>
<li><strong>ä¼˜åŒ–é˜¶æ®µ</strong>ï¼šé…ç½®é«˜çº§ç­–ç•¥ï¼ˆç½‘ç»œã€å®‰å…¨ã€å­˜å‚¨ï¼‰</li>
</ol>
<p><strong>åŸºç¡€é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">my-app</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">my-app</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">my-app</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">my-app:latest</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>
</code></pre>
<h3 data-id="heading-14">5.2 é…ç½®éªŒè¯ä¸è‡ªåŠ¨åŒ–æµ‹è¯•</h3>
<p>å°†é…ç½®éªŒè¯é›†æˆåˆ° CI/CD æµæ°´çº¿ä¸­ï¼Œç¡®ä¿å˜æ›´å®‰å…¨å¯é ã€‚</p>
<p><strong>éªŒè¯æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>è¯­æ³•éªŒè¯ï¼š<code>kubectl apply --dry-run=client -f deployment.yaml</code></li>
<li>ç­–ç•¥æ£€æŸ¥ï¼šä½¿ç”¨ OPA/Conftest éªŒè¯å®‰å…¨ç­–ç•¥</li>
<li>é›†æˆæµ‹è¯•ï¼šåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯é…ç½®æ­£ç¡®æ€§</li>
</ol>
<h2 data-id="heading-15">å…­ã€å·¥å…·é“¾æ•´åˆ</h2>
<p>ä»¥ä¸‹è¡¨æ ¼å¯¹æ¯”äº†ä¸åŒç®€åŒ–æ–¹æ¡ˆçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š</p>



































<table><thead><tr><th>å·¥å…·/æ–¹æ³•</th><th>æ ¸å¿ƒä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th><th>å­¦ä¹ æ›²çº¿</th></tr></thead><tbody><tr><td>Helm</td><td>å¼ºå¤§çš„æ¨¡æ¿åŒ–ã€ç‰ˆæœ¬ç®¡ç†ã€ä¾èµ–è§£å†³</td><td>å¤æ‚åº”ç”¨ã€å¤šç¯å¢ƒéƒ¨ç½²ã€åº”ç”¨åˆ†å‘</td><td>ä¸­ç­‰</td></tr><tr><td>Kustomize</td><td>æ— æ¨¡æ¿ã€çº¯ YAMLã€Kubernetes åŸç”Ÿ</td><td>ç¯å¢ƒå·®å¼‚åŒ–ã€é…ç½®è¡¥ä¸ã€ç®€å•åº”ç”¨</td><td>å¹³ç¼“</td></tr><tr><td>Skaffold</td><td>è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹ã€å¿«é€Ÿåé¦ˆ</td><td>æœ¬åœ°å¼€å‘ã€æŒç»­é›†æˆã€å¾®æœåŠ¡æ¶æ„</td><td>ä¸­ç­‰</td></tr><tr><td>GitOps</td><td>å£°æ˜å¼ã€ç‰ˆæœ¬æ§åˆ¶ã€è‡ªæ„ˆèƒ½åŠ›</td><td>ç”Ÿäº§ç¯å¢ƒã€å›¢é˜Ÿåä½œã€åˆè§„è¦æ±‚</td><td>é™¡å³­</td></tr></tbody></table>
<h2 data-id="heading-16">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†åº”ç”¨é…ç½®ç®€åŒ–</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”µå•†åº”ç”¨ï¼Œéœ€è¦ç®¡ç†å‰ç«¯ã€åç«¯å’Œæ•°æ®åº“å¤šä¸ªç»„ä»¶ã€‚</p>
<p><strong>åŸå§‹å¤æ‚é…ç½®</strong>ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åŸå§‹å†—é•¿ä¸”é‡å¤çš„é…ç½®</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">ecommerce-frontend</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">frontend</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">frontend:1.2.3</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">DB_HOST</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"db.example.com"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">API_ENDPOINT</span>  
          <span class="hljs-attr">value:</span> <span class="hljs-string">"https://api.example.com"</span>
        <span class="hljs-comment"># ... æ›´å¤šç¯å¢ƒå˜é‡</span>
</code></pre>
<p><strong>ç®€åŒ–åé…ç½®</strong>ï¼ˆä½¿ç”¨ Kustomize + Helmï¼‰ï¼š</p>
<ol>
<li><strong>åŸºç¡€é…ç½®</strong>ï¼ˆbase/deployment.yamlï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Release.Name</span> }}<span class="hljs-string">-frontend</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> {{ <span class="hljs-string">.Values.replicaCount</span> }}
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">frontend</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Values.image.repository }}</span>:<span class="hljs-template-variable">{{ .Values.image.tag }}</span>"</span>
        <span class="hljs-attr">envFrom:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">configMapRef:</span>
            <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Release.Name</span> }}<span class="hljs-string">-environment</span>
</code></pre>
<ol>
<li><strong>ç¯å¢ƒç‰¹å®šå€¼</strong>ï¼ˆvalues/production.yamlï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">replicaCount:</span> <span class="hljs-number">5</span>
<span class="hljs-attr">image:</span>
  <span class="hljs-attr">repository:</span> <span class="hljs-string">frontend</span>
  <span class="hljs-attr">tag:</span> <span class="hljs-number">2.0</span><span class="hljs-number">.0</span><span class="hljs-string">-prod</span>
</code></pre>
<ol>
<li><strong>é…ç½®æ˜ å°„ç”Ÿæˆ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">apiVersion:</span> v1
<span class="hljs-symbol">kind:</span> ConfigMap
<span class="hljs-symbol">metadata:</span>
  name: {{ .Release.Name }}-environment
<span class="hljs-symbol">data:</span>
  {{- range $<span class="hljs-keyword">key</span>, $value := .Values.environment }}
  {{ $<span class="hljs-keyword">key</span> }}: {{ $value | quote }}
  {{- <span class="hljs-keyword">end</span> }}
</code></pre>
<p>è¿™ç§æ–¹æ³•å°†é…ç½®åˆ†è§£ä¸ºå¯ç®¡ç†çš„éƒ¨åˆ†ï¼Œå¤§å¹…æå‡äº†å¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-17">å…«ã€æ€»ç»“</h2>
<p>Kubernetes Deployment é…ç½®çš„å¤æ‚æ€§æ˜¯ä¸å¯é¿å…çš„ï¼Œä½†é€šè¿‡åˆé€‚çš„å·¥å…·å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ç§å¤æ‚æ€§æœ‰æ•ˆç®¡ç†èµ·æ¥ã€‚å…³é”®è¦ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å·¥å…·é€‰æ‹©</strong>ï¼šæ ¹æ®å›¢é˜Ÿè§„æ¨¡å’ŒæŠ€æœ¯æ ˆé€‰æ‹©åˆé€‚çš„å·¥å…·ç»„åˆï¼ˆHelm + Kustomize + Skaffoldï¼‰</li>
<li><strong>æ¸è¿›é‡‡çº³</strong>ï¼šä»ç®€å•é…ç½®å¼€å§‹ï¼Œé€æ­¥æ·»åŠ é«˜çº§åŠŸèƒ½</li>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šå»ºç«‹å›¢é˜Ÿç»Ÿä¸€çš„é…ç½®è§„èŒƒå’Œæœ€ä½³å®è·µ</li>
<li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šå°†éªŒè¯ã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹è‡ªåŠ¨åŒ–</li>
<li><strong>æ–‡æ¡£åŒ–</strong>ï¼šä¸ºé…ç½®æ¨¡æ¿å’Œå€¼æ–‡ä»¶æä¾›æ¸…æ™°çš„æ–‡æ¡£</li>
</ol>
<p>é€šè¿‡å®æ–½è¿™äº›ç­–ç•¥ï¼Œæ‚¨ä¸ä»…èƒ½å¤Ÿé™ä½ Kubernetes Deployment çš„é…ç½®å¤æ‚åº¦ï¼Œè¿˜èƒ½æå‡éƒ¨ç½²æ•ˆç‡å’Œåº”ç”¨å¯é æ€§ï¼ŒçœŸæ­£å‘æŒ¥ Kubernetes ä½œä¸ºå®¹å™¨ç¼–æ’å¹³å°çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•å’Œå·¥å…·å¯ä»¥å•ç‹¬æˆ–ç»„åˆä½¿ç”¨ï¼Œå»ºè®®å›¢é˜Ÿæ ¹æ®å…·ä½“éœ€æ±‚å’ŒæŠ€èƒ½æ°´å¹³é€‰æ‹©æœ€é€‚åˆçš„ç®€åŒ–è·¯å¾„ï¼Œé€æ­¥å»ºç«‹é«˜æ•ˆå¯é çš„ Kubernetes åº”ç”¨äº¤ä»˜æµç¨‹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Golang: sqlc å’Œ goose æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7577031454586945563</link>    <guid>https://juejin.cn/post/7577031454586945563</guid>    <pubDate>2025-11-27T13:47:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577031454586945563" data-draft-id="7577222731790336026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Golang: sqlc å’Œ goose æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="åç«¯,Go,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-11-27T13:47:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å·¥ç¨‹å¸ˆ_Yan"/> <meta itemprop="url" content="https://juejin.cn/user/4266553197470408"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Golang: sqlc å’Œ goose æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4266553197470408/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å·¥ç¨‹å¸ˆ_Yan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:47:49.000Z" title="Thu Nov 27 2025 13:47:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">sqlc å’Œ goose æœ€ä½³å®è·µ</h2>
<p>æœ€è¿‘æœ‰ä½¿ç”¨ Golang æ¥å†™ä¸€äº›å°çš„é¡¹ç›®ï¼Œéœ€è¦ä½¿ç”¨åˆ°æ•°æ®åº“ï¼Œä¹‹å‰æœ‰ä½¿ç”¨è¿‡ GORM è¿™ç§ ORM æ¡†æ¶ï¼Œå¼€å‘èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å‘ç°é¡¹ç›®çš„ä»£ç å¤šäº†ä¹‹åç®¡ç†èµ·æ¥ä¸æ˜¯éå¸¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å­¦ä¹ äº†ä¸€ä¸‹ goose å’Œ sqlc è¿™ä¸¤ä¸ªå·¥å…·ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯æ€»ç»“ä¸€ä¸‹ä¸¤ä¸ªå·¥å…·å¦‚ä½•æ­é…ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-1">goose æ•°æ®åº“ç‰ˆæœ¬è¿ç§»å·¥å…·</h3>
<h4 data-id="heading-2">å®‰è£…</h4>
<p>goose æ˜¯ Go è¯­è¨€å†™çš„ä¸€ä¸ªæ•°æ®åº“è¿ç§»å·¥å…·ï¼Œèƒ½å¤Ÿä»¥ç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼å¸®æˆ‘ä»¬ç®¡ç†æ•°æ®åº“å½“ä¸­çš„è¡¨ã€‚</p>
<p>åœ¨ä½¿ç”¨ goose ä¹‹å‰éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚</p>
<pre><code class="hljs language-zsh" lang="zsh">go install github.com/pressly/goose/v3/cmd/goose@latest
</code></pre>
<p>å‡ºç°å¦‚ä¸‹å‘½ä»¤è¯´æ˜æˆåŠŸå®‰è£…äº† <code>goose</code> ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82b4a401523d4f56918ac863ce28b6de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bel56iL5biIX1lhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856068&amp;x-signature=arI%2FE8hr9EtRaeeojVz4V5WcIgA%3D" alt="1764076458777-vXrPwV" loading="lazy"/></p>
<h4 data-id="heading-3">ä½¿ç”¨</h4>
<h4 data-id="heading-4">1. é…ç½®ç¯å¢ƒå˜é‡</h4>
<p>åœ¨ä½¿ç”¨ goose çš„æ—¶å€™é»˜è®¤ä¼šè¯»å–ç¯å¢ƒå˜é‡å½“ä¸­çš„ <code>GOOSE_DRIVER</code> ã€ <code>GOOSE_DBSTRING</code> ã€<code>GOOSE_MIGRATION_DIR</code> ä¸‰ä¸ªç¯å¢ƒå˜é‡ã€‚</p>
<ul>
<li><code>GOOSE_DRIVER</code> : goose åœ¨æ‰§è¡Œæ•°æ®åº“è¿ç§»çš„æ—¶å€™ä½¿ç”¨çš„æ•°æ®åº“é©±åŠ¨ç±»å‹</li>
<li><code>GOOSE_DBSTRING</code> : goose åœ¨æ‰§è¡Œæ•°æ®åº“è¿ç§»çš„æ—¶å€™ä½¿ç”¨çš„æ•°æ®åº“é“¾æ¥ URL</li>
<li><code>GOOSE_MIGRATION_DIR</code>ï¼šgoose è¯»å–çš„è¿ç§»æ–‡ä»¶ç›®å½•</li>
</ul>
<p>å½“ç„¶ï¼Œgoose ä¸æ­¢æœ‰ä¸Šé¢ä¸‰ä¸ªç¯å¢ƒå˜é‡çš„é…ç½®ï¼Œæ›´å¤šçš„å¯ä»¥æŸ¥çœ‹å®˜æ–¹ä»‹ç»æ–‡æ¡£ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpressly.github.io%2Fgoose%2Fdocumentation%2Fenvironment-variables%2F" target="_blank" title="https://pressly.github.io/goose/documentation/environment-variables/" ref="nofollow noopener noreferrer">pressly.github.io/goose/documâ€¦</a></p>
<p>ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œåˆ›å»ºä¸€ä¸ª .env æ–‡ä»¶ï¼Œç„¶åå†™å…¥ç›¸å…³çš„å†…å®¹ï¼Œåœ¨ä½¿ç”¨ goose çš„æ—¶å€™ä¼šé»˜è®¤è½½å…¥ .env å½“ä¸­çš„ç¯å¢ƒå˜é‡é…ç½®ã€‚</p>
<pre><code class="hljs language-env" lang="env">GOOSE_DRIVER=postgres  
GOOSE_DBSTRING=postgres://postgres:123456@localhost:5432/goose_test  
GOOSE_MIGRATION_DIR=./sql/schema
</code></pre>
<h4 data-id="heading-5">2. åˆ›å»º schema</h4>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªè¿ç§»çš„ sql æ–‡ä»¶</p>
<pre><code class="hljs language-zsh" lang="zsh">goose create create_user_table sql
</code></pre>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°åœ¨é¡¹ç›®çš„ sql/schema ç›®å½•å½“ä¸­åˆ›å»ºä¸€ä¸ª sql æ–‡ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c27eb6bc7184d308a7445ce336f5626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bel56iL5biIX1lhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856068&amp;x-signature=W4lRv5sEXfQHGLwlOW734FQOm8s%3D" alt="1764077003108-awDsnf" loading="lazy"/></p>
<p>åœ¨ sql æ–‡ä»¶å½“ä¸­å†™å…¥å¦‚ä¸‹çš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- +goose Up  </span>
<span class="hljs-comment">-- +goose StatementBegin  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> account  
(  
    id       SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
    name     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
    email    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>  
);  
<span class="hljs-comment">-- +goose StatementEnd  </span>
  
<span class="hljs-comment">-- +goose Down  </span>
<span class="hljs-comment">-- +goose StatementBegin  </span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> account;  
<span class="hljs-comment">-- +goose StatementEnd</span>
</code></pre>
<p>æ–‡ä»¶å½“ä¸­çš„ <code>-- +goose Up  </code> ä¸‹é¢çš„éƒ¨åˆ†æ˜¯åœ¨æ‰§è¡Œ <code>goose up</code> è®©æ•°æ®åº“çš„ç‰ˆæœ¬ +1 çš„æ—¶å€™ç”Ÿæ•ˆï¼›<code>-- +goose Down </code> ä¸‹é¢çš„éƒ¨åˆ†å¯¹åº”çš„ä¸Šé¢éƒ¨åˆ†çš„åå‘æ“ä½œã€‚ä¸Šé¢çš„ sql <code>goose up</code> çš„éƒ¨åˆ†å°±æ˜¯åœ¨æ•°æ®åº“å½“ä¸­åˆ›å»ºä¸€å¼  account è¡¨ï¼Œè€Œ <code>goose down</code> çš„éƒ¨åˆ†å°±æ˜¯æŠŠæ•°æ®å½“ä¸­çš„ <code>account</code> è¡¨åˆ æ‰ã€‚</p>
<h4 data-id="heading-6">3. æ‰§è¡Œè¿ç§»</h4>
<p>æœ‰äº†æ•°æ®åº“è¿ç§»æ–‡ä»¶ä¹‹åå°±å¯ä»¥å¼€å§‹æ‰§è¡Œæ•°æ®åº“è¿ç§»äº†ã€‚å¸¸ç”¨çš„å‘½ä»¤æœ‰ä¸‹é¢ä¸¤ä¸ªï¼š</p>
<ul>
<li><code>goose up</code> : è¿™ä¸ªå‘½ä»¤èƒ½å¤ŸæŠŠå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä½ æœ€æ–°åˆ›å»ºçš„é‚£ä¸ªæ•°æ®åº“è¿ç§»æ–‡ä»¶çš„ç‰ˆæœ¬ã€‚</li>
<li><code>goose down</code>ï¼šè¿™ä¸ªå‘½ä»¤ä¼šå°†å½“å‰çš„æ•°æ®åº“ç‰ˆæœ¬è¿›è¡Œé™ä½ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½é™ä½ä¸€ä¸ªç‰ˆæœ¬ã€‚</li>
</ul>
<p>æ›´å¤šçš„è¯¦ç»†å‘½ä»¤å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>goose</code> å‘½ä»¤æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚</p>
<p>ä¸‹å›¾ä½¿ç”¨ä¸€æ¬¡ <code>goose up</code> æŠŠæœ€æ–°çš„ä¸¤æ¬¡ sql è¿ç§»æ–‡ä»¶éƒ½åº”ç”¨åˆ°æ•°æ®å½“ä¸­ï¼Œéšåä½¿ç”¨ä¸¤æ¬¡ <code>goose down</code> æŠŠæ•°æ®åº“çš„ç‰ˆæœ¬æ¢å¤åˆ°æœ€å¼€å§‹ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7ca04ffca174fd9b030285fda3f2ebd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bel56iL5biIX1lhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856068&amp;x-signature=bx2xQTTYxdSC2xzHw8nA3nzt9Rg%3D" alt="1764078258242-hx3bEw" loading="lazy"/></p>
<p><code>20251125133155_create_post_table.sql</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- +goose Up  </span>
<span class="hljs-comment">-- +goose StatementBegin  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> post  
(  
    id       SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
    title    text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
    body     text  
);  
<span class="hljs-comment">-- +goose StatementEnd  </span>
  
<span class="hljs-comment">-- +goose Down  </span>
<span class="hljs-comment">-- +goose StatementBegin  </span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> post;  
<span class="hljs-comment">-- +goose StatementEnd</span>
</code></pre>
<h3 data-id="heading-7">sqlc</h3>
<p><strong>sqlc</strong> æ˜¯ä¸€ä¸ªä¸º Go è¯­è¨€è®¾è®¡çš„ SQL ç¼–è¯‘å™¨ï¼Œå®ƒèƒ½å¤Ÿä» SQL æŸ¥è¯¢ç”Ÿæˆå®Œå…¨ç±»å‹å®‰å…¨çš„æƒ¯ç”¨ Go ä»£ç ã€‚å®ƒä¸æ˜¯ä¸€ä¸ª ORMï¼Œè€Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œä¸“é—¨è§£å†³æ•°æ®åº“äº¤äº’ä¸­çš„ç±»å‹å®‰å…¨é—®é¢˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.sqlc.dev%2Fen%2Fstable%2Foverview%2Finstall.html" target="_blank" title="https://docs.sqlc.dev/en/stable/overview/install.html" ref="nofollow noopener noreferrer">docs.sqlc.dev/en/stable/oâ€¦</a></p>
<h4 data-id="heading-8">å®‰è£…</h4>
<p>sqlc æœ¬è´¨æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ã€‚</p>
<pre><code class="hljs language-zsh" lang="zsh">go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest
</code></pre>
<h4 data-id="heading-9">é…ç½®</h4>
<p>å®‰è£…å¥½äº†ä¹‹åï¼Œå°±èƒ½å¤Ÿç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨ <code>sqlc</code> çš„å‘½ä»¤ã€‚åœ¨é¡¹ç›®å½“ä¸­ä½¿ç”¨æˆ‘ä»¬éœ€è¦å…ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>sqlc.yaml</code> æˆ–è€… <code>sqlc.yml</code>  çš„é…ç½®æ–‡ä»¶ã€‚<code>sqlc</code> åœ¨ç”Ÿæˆä»£ç çš„æ—¶å€™ä¼šè‡ªåŠ¨è¯»å–é…ç½®æ–‡ä»¶å½“ä¸­çš„é…ç½®ã€‚</p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ <code>postgresql</code> ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>sqlc init</code> æ¥è‡ªåŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"2"</span>  
<span class="hljs-attr">sql:</span>  
  <span class="hljs-bullet">-</span> <span class="hljs-attr">engine:</span> <span class="hljs-string">"postgresql"</span>  
    <span class="hljs-attr">queries:</span> <span class="hljs-string">"sql/queries"</span>  
    <span class="hljs-attr">schema:</span> <span class="hljs-string">"sql/schema"</span>  
    <span class="hljs-attr">gen:</span>  
      <span class="hljs-attr">go:</span>  
        <span class="hljs-attr">package:</span> <span class="hljs-string">"db"</span>  
        <span class="hljs-attr">out:</span> <span class="hljs-string">"db"</span>  
        <span class="hljs-attr">sql_package:</span> <span class="hljs-string">"pgx/v5"</span>
</code></pre>
<p>é…ç½®æ–‡ä»¶å½“ä¸­çš„ <code>queries</code> é…ç½®äº†æˆ‘éœ€è¦ä½¿ç”¨çš„ SQL è¯­å¥æ‰€åœ¨çš„ç›®å½•ï¼Œschema é…ç½®äº†æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>goose</code> çš„ schema ã€‚</p>
<p><code>gen</code> ç›¸å…³çš„é…ç½®å°±æ˜¯é…ç½®ç”Ÿæˆçš„ä»£ç çš„ä¸€äº›ä¿¡æ¯ï¼Œ<code>package</code> æŒ‡å®šç”Ÿæˆä»£ç çš„åŒ…åï¼Œ<code>out</code> æŒ‡å®šç”Ÿæˆä»£ç çš„æ–‡ä»¶å¤¹ï¼Œ <code>sql_package</code> æŒ‡å®šç”Ÿæˆçš„ä»£ç æ–‡ä»¶ä½¿ç”¨çš„æ•°æ®åº“åŒ…ã€‚</p>
<h4 data-id="heading-10">ç¼–å†™ SQL</h4>
<p>é…ç½®å¥½äº†ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹å†™è‡ªå·±çš„ä¸šåŠ¡ä»£ç éœ€è¦ç”¨åˆ°çš„ SQL äº†ï¼Œå’Œé…ç½®æ–‡ä»¶æŒ‡å®šçš„ä¸€æ ·ï¼ŒæŠŠä¸šåŠ¡éœ€è¦ç”¨åˆ°çš„ SQL æ–‡ä»¶éƒ½å†™åˆ° <code>sql/queries</code> é‡Œé¢ï¼Œåˆ›å»ºä¸€ä¸ª <code>user.sql</code>ã€‚</p>
<p>è¿™é‡Œæˆ‘ç›´æ¥ç»™å‡ºä¸€ä¸ªå¢ã€åˆ ã€æ”¹ã€æŸ¥çš„ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- name: GetAccountById :one  </span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>  
<span class="hljs-keyword">FROM</span> account  
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> $<span class="hljs-number">1</span> LIMIT <span class="hljs-number">1</span>;  
  
<span class="hljs-comment">-- name: CreateUser :one  </span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> account (name, email, password)  
<span class="hljs-keyword">VALUES</span> ($<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>) RETURNING <span class="hljs-operator">*</span>;  
  
<span class="hljs-comment">-- name: UpdateUser :exec  </span>
<span class="hljs-keyword">UPDATE</span> account  
<span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> $<span class="hljs-number">1</span>, email <span class="hljs-operator">=</span> $<span class="hljs-number">2</span>, password <span class="hljs-operator">=</span> $<span class="hljs-number">3</span>  
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> $<span class="hljs-number">4</span>;  
  
<span class="hljs-comment">-- name: DeleteUser :exec  </span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> account  
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> $<span class="hljs-number">1</span>;
</code></pre>
<p>æ¯ä¸ª SQL å¼€å§‹ä¹‹å‰çš„æ³¨é‡Šå½“ä¸­çš„ name ä»£è¡¨ç”Ÿæˆçš„ä»£ç å½“ä¸­çš„æ–¹æ³•åï¼Œåé¢çš„ <code>:one</code> ä»£è¡¨è¿”å›ä¸€æ¡è®°å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šæ¡ <code>:many</code> ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆä¹Ÿä¸è¿”å› <code>:exec</code> ã€‚å…·ä½“çš„ä½¿ç”¨å¯ä»¥å‚ç…§è¯¦ç»†çš„å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h4 data-id="heading-11">ç”Ÿæˆä»£ç </h4>
<p>æ¥ç€å°±æ˜¯ä½¿ç”¨ <code>sqlc</code> æ¥å¸®æˆ‘ä»¬ç”Ÿæˆå’Œæ•°æ®åº“äº¤äº’çš„ç›¸å…³ä»£ç ã€‚</p>
<p>ç›´æ¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ <code>sqlc generate</code> å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒæˆåŠŸçš„åœ¨é¡¹ç›®ä¸‹çš„ <code>db</code> æ–‡ä»¶å¤¹ç”Ÿæˆäº†ä¸€äº›ä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a45da45e910342d49d4855def8eb05bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bel56iL5biIX1lhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856068&amp;x-signature=C4wx0bN6PhpLcQbDwJeMCuJv4wo%3D" alt="1764243393386-OBkcrT" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å°±æ„‰å¿«çš„åœ¨è‡ªå·±çš„é¡¹ç›®å½“ä¸­ä½¿ç”¨å§ï¼è¿™é‡Œæˆ‘è´´å‡ºè¿™ä¸ªè°ƒç”¨ä¸Šé¢çš„ <code>user.sql</code> çš„è°ƒç”¨ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main  
  
<span class="hljs-keyword">import</span> (  
    <span class="hljs-string">"context"</span>  
    <span class="hljs-string">"fmt"</span>  
    <span class="hljs-string">"github.com/dimplesY/goose_test/db"</span>    <span class="hljs-string">"github.com/jackc/pgx/v5"</span>)  
  
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {  
  
    conn, _ := pgx.Connect(context.Background(), <span class="hljs-string">"postgres://postgres:123456@localhost:5432/goose_test"</span>)  
    <span class="hljs-keyword">defer</span> conn.Close(context.Background())  
    queries := db.New(conn)  
  
    user, _ := queries.CreateUser(context.Background(), db.CreateUserParams{  
       Name:     <span class="hljs-string">"1"</span>,  
       Email:    <span class="hljs-string">"1"</span>,  
       Password: <span class="hljs-string">"1"</span>,  
    })  
  
    fmt.Println(user)  
  
    u1, _ := queries.GetAccountById(context.Background(), user.ID)  
    fmt.Println(u1)  
  
    _ = queries.UpdateUser(context.Background(), db.UpdateUserParams{  
       Name:     <span class="hljs-string">"2"</span>,  
       Email:    <span class="hljs-string">"2"</span>,  
       Password: <span class="hljs-string">"2"</span>,  
       ID:       user.ID,  
    })  
  
    u2, _ := queries.GetAccountById(context.Background(), user.ID)  
    fmt.Println(u2)  
  
    _ = queries.DeleteUser(context.Background(), user.ID)  
  
    u3, _ := queries.GetAccountById(context.Background(), user.ID)  
    fmt.Println(u3)  
  
}
</code></pre>
<p>è¿è¡Œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d3a42c3cf9d403388ec49374656cd87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bel56iL5biIX1lhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856068&amp;x-signature=PF3GLKt7VtBDx2iJdyj0IiQT7NQ%3D" alt="1764250203991-rpLyA8" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆè¯´Kubernetesçš„APIè®¾è®¡æ˜¯å…¶æˆåŠŸçš„å…³é”®å› ç´ ä¹‹ä¸€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577284409964036159</link>    <guid>https://juejin.cn/post/7577284409964036159</guid>    <pubDate>2025-11-27T13:50:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284409964036159" data-draft-id="7577220965438193718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆè¯´Kubernetesçš„APIè®¾è®¡æ˜¯å…¶æˆåŠŸçš„å…³é”®å› ç´ ä¹‹ä¸€ï¼Ÿ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-27T13:50:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆè¯´Kubernetesçš„APIè®¾è®¡æ˜¯å…¶æˆåŠŸçš„å…³é”®å› ç´ ä¹‹ä¸€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:50:46.000Z" title="Thu Nov 27 2025 13:50:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kubernetes çš„ API è®¾è®¡ç¡®å®è¢«å¹¿æ³›è®¤ä¸ºæ˜¯å…¶æˆåŠŸçš„å…³é”®åŸºçŸ³ã€‚è¿™ç§æˆåŠŸå¹¶éå¶ç„¶ï¼Œè€Œæ˜¯æºäºä¸€ç³»åˆ—æ·±æ€ç†Ÿè™‘çš„è®¾è®¡å“²å­¦å’ŒåŸåˆ™ï¼Œå®ƒä»¬å…±åŒé€ å°±äº†ä¸€ä¸ªæ—¢å¼ºå¤§åˆçµæ´»ã€æ—¢ç¨³å®šä¸”æ˜“äºæ‰©å±•çš„ç³»ç»Ÿã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†å‡ ä¸ªæœ€æ ¸å¿ƒçš„è®¾è®¡åŸåˆ™åŠå…¶å¸¦æ¥çš„å…³é”®ä»·å€¼ã€‚</p>






























<table><thead><tr><th>è®¾è®¡åŸåˆ™</th><th>æ ¸å¿ƒæ€æƒ³</th><th>å¸¦æ¥çš„å…³é”®ä»·å€¼</th></tr></thead><tbody><tr><td><strong>å£°æ˜å¼ API</strong>â€‹</td><td>ç”¨æˆ·å£°æ˜â€œæœŸæœ›çŠ¶æ€â€ï¼ˆWhatï¼‰ï¼Œè€Œéå‘å‡ºå…·ä½“å‘½ä»¤ï¼ˆHowï¼‰ã€‚</td><td>ç³»ç»Ÿå¥å£®æ€§ã€æ“ä½œç¨³å®šæ€§å’Œç®€åŒ–ç”¨æˆ·ä½“éªŒ ã€‚</td></tr><tr><td><strong>æ— éšè—å†…éƒ¨ API</strong>â€‹</td><td>æ‰€æœ‰ç»„ä»¶ï¼ˆåŒ…æ‹¬å†…éƒ¨æ§åˆ¶å™¨ï¼‰éƒ½é€šè¿‡åŒä¸€ä¸ªå…¬å…± API ä¸ç³»ç»Ÿäº¤äº’ã€‚</td><td>ç³»ç»Ÿé«˜åº¦çš„<strong>å¯ç»„åˆæ€§</strong>å’Œ<strong>å¯æ‰©å±•æ€§</strong>â€‹ ã€‚</td></tr><tr><td><strong>API å¯¹è±¡å¯ç»„åˆ</strong>â€‹</td><td>API å¯¹è±¡åƒä¹é«˜ç§¯æœ¨ï¼Œéµå¾ªâ€œé«˜å†…èšï¼Œæ¾è€¦åˆâ€çš„é¢å‘å¯¹è±¡è®¾è®¡ç†å¿µã€‚</td><td>åŠŸèƒ½æ¨¡å—çš„<strong>å¯é‡ç”¨æ€§</strong>å’Œæ¶æ„çš„æ¸…æ™°åº¦ ã€‚</td></tr><tr><td><strong>æ¸…æ™°çš„å±‚çº§ä¸åˆ†ç»„</strong>â€‹</td><td>API æŒ‰åŠŸèƒ½åˆ†ä¸ºä¸åŒç»„ï¼Œå¹¶æœ‰æ˜ç¡®çš„æˆç†Ÿåº¦ï¼ˆAlpha, Beta, Stableï¼‰å’Œç‰ˆæœ¬ç®¡ç†ã€‚</td><td>ç³»ç»Ÿæ¼”è¿›çš„<strong>å¯æŒç»­æ€§</strong>å’Œå‡çº§çš„<strong>å¹³æ»‘æ€§</strong>â€‹ ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ’¡ æ·±å…¥ç†è§£æ ¸å¿ƒåŸåˆ™</h3>
<ul>
<li><strong>å£°æ˜å¼APIé©±åŠ¨æ§åˆ¶é—­ç¯</strong>ï¼šå£°æ˜å¼è®¾è®¡æ˜¯Kubernetesçš„çµé­‚ã€‚ä½ åªéœ€å‘ç³»ç»Ÿæäº¤ä¸€ä¸ªYAMLæˆ–JSONæ–‡ä»¶ï¼Œæè¿°ä½ æœŸæœ›çš„åº”ç”¨çŠ¶æ€ï¼ˆä¾‹å¦‚â€œéœ€è¦è¿è¡Œ3ä¸ªNginxå®ä¾‹â€ï¼‰ã€‚Kubernetesçš„æ§åˆ¶å™¨ä¼šæŒç»­åœ°è§‚å¯Ÿå½“å‰çŠ¶æ€ï¼Œå¹¶å°†å…¶ä¸ä½ çš„æœŸæœ›çŠ¶æ€è¿›è¡Œæ¯”å¯¹ï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œå¿…è¦çš„æ“ä½œï¼ˆå¦‚åˆ›å»ºæˆ–åˆ é™¤Podï¼‰æ¥é©±åŠ¨ç³»ç»Ÿå‘æœŸæœ›çŠ¶æ€æ”¶æ•›ã€‚è¿™ç§â€œæ°´å¹³è§¦å‘â€çš„æœºåˆ¶ä½¿å¾—ç³»ç»Ÿåœ¨ç»„ä»¶å‘ç”Ÿæ•…éšœå¹¶æ¢å¤åï¼Œèƒ½å¤Ÿæ ¹æ®å½“å‰çŠ¶æ€ç«‹å³çŸ¥é“è¯¥åšä»€ä¹ˆï¼Œè€Œä¸ä¼šå› ä¸ºé”™è¿‡æŸä¸ªæŒ‡ä»¤è€Œæ··ä¹±ï¼Œä»è€Œæå¤§åœ°å¢å¼ºäº†ç³»ç»Ÿçš„<strong>è‡ªæˆ‘ä¿®å¤å’Œå®¹é”™èƒ½åŠ›</strong>â€‹ ã€‚</li>
<li><strong>ç»Ÿä¸€çš„APIå¹³é¢å®ç°é«˜åº¦å¯æ‰©å±•</strong>ï¼šKubernetesåšæŒâ€œæ²¡æœ‰éšè—çš„å†…éƒ¨APIâ€åŸåˆ™ã€‚è¿™æ„å‘³ç€ä½ é€šè¿‡<code>kubectl</code>ä½¿ç”¨çš„APIï¼Œå’ŒKuberneteså†…éƒ¨çš„è°ƒåº¦å™¨ã€æ§åˆ¶å™¨ç®¡ç†å™¨ã€kubeletç­‰ç»„ä»¶ä½¿ç”¨çš„APIæ˜¯<strong>å®Œå…¨ç›¸åŒçš„</strong>â€‹ ã€‚è¿™ç§é€æ˜æ€§å¸¦æ¥äº†å·¨å¤§çš„å¥½å¤„ï¼šå¦‚æœä½ å¯¹é»˜è®¤çš„è°ƒåº¦å™¨ä¸æ»¡æ„ï¼Œä½ å¯ä»¥å…³é—­å®ƒï¼Œå¹¶è¿è¡Œä¸€ä¸ªä½ è‡ªå·±ç¼–å†™çš„è°ƒåº¦å™¨ï¼Œè¿™ä¸ªè‡ªå®šä¹‰è°ƒåº¦å™¨é€šè¿‡ç›‘å¬å’Œæ›´æ–°Podçš„<code>nodeName</code>å­—æ®µæ¥å®Œæˆè°ƒåº¦ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸é›†ç¾¤çš„å…¶ä»–éƒ¨åˆ†æ— ç¼é›†æˆã€‚è¿™ä¸º<strong>è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆCRDï¼‰</strong> â€‹ å’Œ <strong>Operatoræ¨¡å¼</strong>â€‹ çš„ç¹è£å¥ å®šäº†åšå®åŸºç¡€ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿåƒç®¡ç†åŸç”ŸKubernetesèµ„æºä¸€æ ·ç®¡ç†ä»»ä½•è‡ªå®šä¹‰çš„åº”ç”¨ã€‚</li>
<li><strong>é¢å‘æ„å›¾çš„è®¾è®¡ä¸å¯ç»„åˆæ€§</strong>ï¼šKubernetesçš„é«˜å±‚APIï¼ˆå¦‚Deploymentã€Serviceï¼‰æ˜¯é¢å‘ç”¨æˆ·çš„<strong>æ“ä½œæ„å›¾</strong>è®¾è®¡çš„ï¼Œè€Œä¸æ˜¯é¢å‘å…·ä½“çš„æŠ€æœ¯å®ç°ã€‚ä¾‹å¦‚ï¼Œä½ å…³å¿ƒçš„æ˜¯â€œéƒ¨ç½²ä¸€ä¸ªå¯æ‰©å±•çš„åº”ç”¨â€ï¼Œè€Œä¸æ˜¯â€œå…ˆåˆ›å»ºPodï¼Œå†åˆ›å»ºReplicaSetâ€ã€‚åŒæ—¶ï¼Œè¿™äº›APIå¯¹è±¡æ˜¯äº’è¡¥å’Œå¯ç»„åˆçš„ã€‚ä¸€ä¸ªDeploymentå¯ä»¥ç®¡ç†ä¸€ç»„Podï¼Œè€Œä¸€ä¸ªServiceå¯ä»¥ä¸ºè¿™ç»„Podæä¾›è´Ÿè½½å‡è¡¡å’Œç¨³å®šçš„ç½‘ç»œå…¥å£ã€‚è¿™ç§è®¾è®¡ä½¿å¾—å¤æ‚çš„åˆ†å¸ƒå¼åº”ç”¨èƒ½å¤Ÿé€šè¿‡å¤šä¸ªç®€å•çš„ã€å¯é‡ç”¨çš„APIå¯¹è±¡ç»„åˆè€Œæˆï¼Œé™ä½äº†å¤æ‚åº¦ ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸŒ± æ”¯æ’‘ç”Ÿæ€ç¹è£ä¸å¹³æ»‘æ¼”è¿›</h3>
<ul>
<li><strong>ç¨³å¥çš„APIç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šKubernetesé¡¹ç›®å‘å±•è¿…é€Ÿï¼Œä½†ä»æœªå› å¼•å…¥æ–°åŠŸèƒ½è€Œç ´åç°æœ‰ç”¨æˆ·çš„ç¨³å®šæ€§ï¼Œè¿™å¾—ç›Šäºå…¶ç²¾ç»†çš„APIç‰ˆæœ¬ç®¡ç†ç­–ç•¥ã€‚APIç‰ˆæœ¬åˆ†ä¸ºAlphaï¼ˆå®éªŒæ€§ï¼‰ã€Betaï¼ˆæµ‹è¯•æ€§ï¼‰å’ŒStableï¼ˆç¨³å®šæ€§ï¼‰ä¸‰ä¸ªæˆç†Ÿåº¦ç­‰çº§ï¼Œå¹¶éµå¾ªä¸¥æ ¼çš„<strong>å¼ƒç”¨æ”¿ç­–</strong>â€‹ ã€‚è¿™ç»™ç”Ÿæ€ä¸­çš„å¼€å‘è€…å’Œç”¨æˆ·åƒäº†ä¸€é¢—â€œå®šå¿ƒä¸¸â€ï¼Œä»–ä»¬å¯ä»¥æ”¾å¿ƒåœ°åŸºäºStableç‰ˆæœ¬çš„APIæ„å»ºç”Ÿäº§ç³»ç»Ÿï¼Œå› ä¸ºçŸ¥é“å³ä½¿åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ï¼Œè¿™äº›APIä¹Ÿä¼šåœ¨å¾ˆé•¿å‘¨æœŸå†…ä¿æŒå…¼å®¹ï¼Œå¹¶æœ‰æ¸…æ™°çš„è¿ç§»è·¯å¾„ã€‚</li>
<li><strong>å¼ºå¤§çš„å­˜å‚¨ã€ç½‘ç»œç­‰åŸºç¡€è®¾æ–½æŠ½è±¡</strong>ï¼šKubernetesé€šè¿‡å®šä¹‰æ ‡å‡†çš„æ¥å£ï¼ˆå¦‚å®¹å™¨å­˜å‚¨æ¥å£CSIã€å®¹å™¨ç½‘ç»œæ¥å£CNIï¼‰ï¼Œå°†åº•å±‚å­˜å‚¨å’Œç½‘ç»œå®ç°çš„å¤æ‚æ€§æŠ½è±¡æ‰ã€‚ç”¨æˆ·é€šè¿‡PersistentVolumeClaimï¼ˆPVCï¼‰ä»¥ä¸å®ç°æ— å…³çš„æ–¹å¼ç”³è¯·å­˜å‚¨ï¼Œè€Œæ— éœ€å…³å¿ƒåå°æ˜¯NFSã€Cephè¿˜æ˜¯äº‘ç¡¬ç›˜ã€‚è¿™å®Œç¾ä½“ç°äº†å…¶â€œå·¥ä½œè´Ÿè½½å¯ç§»æ¤æ€§â€çš„åŸåˆ™ï¼Œä½¿å¾—åº”ç”¨éƒ¨ç½²æè¿°å¯ä»¥è·¨ä¸åŒçš„é›†ç¾¤å’Œç¯å¢ƒï¼ˆæœ¬åœ°ã€å¤šäº‘ï¼‰æ— ç¼è¿ç§» ã€‚</li>
</ul>
<h3 data-id="heading-2">ğŸ’ æ€»ç»“</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒKubernetesçš„APIè®¾è®¡æˆåŠŸåœ°å°†åˆ†å¸ƒå¼ç³»ç»Ÿç®¡ç†çš„å¤æ‚æ€§å°è£…åœ¨ä¸€å¥—<strong>å£°æ˜å¼ã€å¯ç»„åˆã€å¯æ‰©å±•ä¸”ç”Ÿå‘½å‘¨æœŸç®¡ç†å®Œå–„</strong>çš„æ¥å£ä¹‹åã€‚è¿™å¥—è®¾è®¡ä¸ä»…ä½¿Kubernetesè‡ªèº«æˆä¸ºä¸€ä¸ªå¥å£®ä¸”å¼ºå¤§çš„å¹³å°ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå‚¬ç”Ÿäº†ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ç”Ÿæ€ç³»ç»Ÿï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼æ„å»ºå’Œè¿è¡Œåº”ç”¨ï¼Œè€Œæ— éœ€è¿‡åº¦å…³æ³¨åº•å±‚åŸºç¡€è®¾æ–½çš„å·®å¼‚ã€‚è¿™æ­£æ˜¯Kubernetesèƒ½å¤Ÿæˆä¸ºäº‘åŸç”Ÿæ—¶ä»£äº‹å®æ ‡å‡†çš„æ·±å±‚åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kuberneteså£°æ˜å¼APIç›¸æ¯”ä¼ ç»Ÿå‘½ä»¤å¼APIåœ¨æ•…éšœæ¢å¤åœºæ™¯ä¸‹çš„å…·ä½“ä¼˜åŠ¿æœ‰å“ªäº›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577198193216176171</link>    <guid>https://juejin.cn/post/7577198193216176171</guid>    <pubDate>2025-11-27T13:51:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577198193216176171" data-draft-id="7577198193216159787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kuberneteså£°æ˜å¼APIç›¸æ¯”ä¼ ç»Ÿå‘½ä»¤å¼APIåœ¨æ•…éšœæ¢å¤åœºæ™¯ä¸‹çš„å…·ä½“ä¼˜åŠ¿æœ‰å“ªäº›ï¼Ÿ"/> <meta itemprop="keywords" content="Kubernetes,GitHub"/> <meta itemprop="datePublished" content="2025-11-27T13:51:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kuberneteså£°æ˜å¼APIç›¸æ¯”ä¼ ç»Ÿå‘½ä»¤å¼APIåœ¨æ•…éšœæ¢å¤åœºæ™¯ä¸‹çš„å…·ä½“ä¼˜åŠ¿æœ‰å“ªäº›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:51:56.000Z" title="Thu Nov 27 2025 13:51:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kubernetes çš„å£°æ˜å¼ API åœ¨è®¾è®¡ä¸Šç¡®å®ä¸ºç³»ç»Ÿçš„æ•…éšœæ¢å¤å¸¦æ¥äº†æ˜¾è‘—ä¼˜åŠ¿ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å£°æ˜å¼ API å’Œå‘½ä»¤å¼ API åœ¨æ•…éšœæ¢å¤åœºæ™¯ä¸‹çš„æ ¸å¿ƒå·®å¼‚ã€‚</p>



































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>å£°æ˜å¼ API (Kubernetes)</th><th>å‘½ä»¤å¼ API (ä¼ ç»Ÿè„šæœ¬)</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒé€»è¾‘</strong>â€‹</td><td><strong>æ°´å¹³è§¦å‘ (Level-Triggered)</strong> ï¼šæŒç»­å¯¹æ¯”â€œæœŸæœ›çŠ¶æ€â€ä¸â€œå½“å‰çŠ¶æ€â€ï¼Œé©±ä½¿å…¶ä¸€è‡´ã€‚</td><td><strong>è¾¹ç¼˜è§¦å‘ (Edge-Triggered)</strong> ï¼šæ‰§è¡Œä¸€ç³»åˆ—ç‰¹å®šçš„æŒ‡ä»¤ã€‚</td></tr><tr><td><strong>æ“ä½œå¹‚ç­‰æ€§</strong>â€‹</td><td><strong>å¤©ç„¶å¹‚ç­‰</strong>ï¼šæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ <code>kubectl apply</code>ï¼Œç³»ç»Ÿæœ€ç»ˆçŠ¶æ€éƒ½ä¸€è‡´ã€‚</td><td><strong>éå¸¸è„†å¼±</strong>ï¼šé‡è¯•è„šæœ¬å¯èƒ½å¯¼è‡´é‡å¤æ“ä½œï¼ˆå¦‚é‡å¤åˆ›å»ºèµ„æºï¼‰æˆ–é—æ¼æ“ä½œã€‚</td></tr><tr><td><strong>çŠ¶æ€æ„ŸçŸ¥</strong>â€‹</td><td><strong>æœ‰çŠ¶æ€</strong>ï¼šç³»ç»Ÿæ˜ç¡®çŸ¥é“æœ€ç»ˆçš„ç›®æ ‡æ˜¯ä»€ä¹ˆã€‚</td><td><strong>æ— çŠ¶æ€</strong>ï¼šè„šæœ¬ä¸çŸ¥é“æ“ä½œçš„æœ€ç»ˆç›®æ ‡ï¼Œåªè´Ÿè´£æ‰§è¡Œæ­¥éª¤ã€‚</td></tr><tr><td><strong>æ•…éšœå¤„ç†</strong>â€‹</td><td><strong>è‡ªåŠ¨åŒ–è‡ªæˆ‘ä¿®å¤</strong>ï¼šæ§åˆ¶å™¨è‡ªåŠ¨æ£€æµ‹å·®å¼‚å¹¶ä¿®å¤ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚</td><td><strong>æ‰‹åŠ¨å¹²é¢„</strong>ï¼šéœ€è¦äººå·¥åˆ¤æ–­æ•…éšœç‚¹ï¼Œå¹¶æ‰§è¡Œä¿®å¤è„šæœ¬æˆ–å‘½ä»¤ã€‚</td></tr><tr><td><strong>å¤æ‚åº¦</strong>â€‹</td><td><strong>ç®€åŒ–</strong>ï¼šç”¨æˆ·åªéœ€å…³å¿ƒâ€œåšä»€ä¹ˆâ€ï¼Œè€Œéâ€œæ€ä¹ˆåšâ€ã€‚</td><td><strong>é«˜æ˜‚</strong>ï¼šéœ€è¦ç¼–å†™å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µçš„å¤æ‚è„šæœ¬ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ’¡ æ·±å…¥ç†è§£å£°æ˜å¼APIçš„æ•…éšœæ¢å¤ä¼˜åŠ¿</h3>
<p>å£°æ˜å¼APIçš„ä¼˜åŠ¿ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæºäºå…¶â€œæ°´å¹³è§¦å‘â€çš„æ§åˆ¶å¾ªç¯ï¼ˆControl Loopï¼‰æœºåˆ¶ã€‚ç³»ç»Ÿä¸­çš„å„ç§æ§åˆ¶å™¨ï¼ˆå¦‚Deployment Controllerï¼‰ä¼šæŒç»­<strong>è§‚å¯Ÿï¼ˆObserveï¼‰</strong> â€‹ ç³»ç»Ÿçš„å½“å‰çŠ¶æ€ï¼Œå¹¶å°†å…¶ä¸ä½ é€šè¿‡YAMLæ–‡ä»¶å£°æ˜çš„<strong>æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰</strong> â€‹ è¿›è¡Œ<strong>æ¯”è¾ƒï¼ˆCompareï¼‰</strong> ã€‚ä¸€æ—¦å‘ç°ä¸ä¸€è‡´ï¼ˆä¾‹å¦‚ï¼ŒPodå‰¯æœ¬æ•°æœªè¾¾åˆ°è¦æ±‚ï¼‰ï¼Œæ§åˆ¶å™¨å°±ä¼š<strong>æ‰§è¡Œï¼ˆActï¼‰</strong> â€‹ å¿…è¦çš„æ“ä½œï¼ˆå¦‚åˆ›å»ºæ–°çš„Podï¼‰ï¼Œä½¿å½“å‰çŠ¶æ€å‘æœŸæœ›çŠ¶æ€<strong>æ”¶æ•›ï¼ˆReconcileï¼‰</strong> ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯æŒç»­ä¸æ–­çš„ï¼Œå³ä½¿æœ¬æ¬¡ä¿®å¤åå†æ¬¡å‘ç”Ÿæ•…éšœï¼Œæ§åˆ¶å¾ªç¯ä¾ç„¶ä¼šç”Ÿæ•ˆã€‚</p>
<p>è¿™ç§è®¾è®¡å¸¦æ¥äº†å‡ ä¸ªå…³é”®ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¤©ç„¶å¹‚ç­‰æ€§ä¸å®‰å…¨çš„é‡è¯•æœºåˆ¶</strong>ï¼šå£°æ˜å¼æ“ä½œï¼ˆå¦‚ <code>kubectl apply</code>ï¼‰æ˜¯<strong>å¹‚ç­‰</strong>çš„ã€‚ä½ å¯ä»¥å®‰å…¨åœ°å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªå‘½ä»¤ï¼Œè€Œä¸ä¼šç ´åç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚å¦‚æœç³»ç»Ÿå·²ç»å¤„äºæœŸæœ›çŠ¶æ€ï¼Œæ“ä½œå°†ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚è¿™å¯¹äºæ•…éšœæ¢å¤è‡³å…³é‡è¦ï¼Œå› ä¸ºä½ å¯ä»¥æ”¾å¿ƒåœ°é‡æ–°æäº¤é…ç½®ï¼Œè€Œä¸å¿…æ‹…å¿ƒå› é‡è¯•å¯¼è‡´é‡å¤åˆ›å»ºèµ„æºç­‰å‰¯ä½œç”¨ã€‚</li>
<li><strong>ç›®æ ‡å¯¼å‘ä¸ç³»ç»Ÿè‡ªæ„ˆ</strong>ï¼šä½ åªéœ€å®šä¹‰â€œè¿è¡Œ3ä¸ªNginxå®ä¾‹â€è¿™ä¸ªç›®æ ‡ï¼Œè€Œä¸éœ€è¦ç¼–å†™â€œå¦‚æœç°åœ¨åªæœ‰2ä¸ªï¼Œå°±å†å¯åŠ¨1ä¸ªâ€çš„é€»è¾‘ã€‚å½“æŸä¸ªPodå› åº•å±‚èŠ‚ç‚¹æ•…éšœè€Œç»ˆæ­¢æ—¶ï¼ŒDeploymentæ§åˆ¶å™¨ä¼š<strong>è‡ªåŠ¨æ£€æµ‹</strong>åˆ°å½“å‰çŠ¶æ€ï¼ˆ2ä¸ªPodï¼‰ä¸æœŸæœ›çŠ¶æ€ï¼ˆ3ä¸ªPodï¼‰ä¸åŒ¹é…ï¼Œå¹¶ç«‹å³åœ¨æ–°çš„å¥åº·èŠ‚ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„Podã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯<strong>è‡ªåŠ¨çš„</strong>ï¼Œæ— éœ€è¿ç»´äººå‘˜æ‰‹åŠ¨ä»‹å…¥ã€‚</li>
<li><strong>ç»Ÿä¸€çš„çŠ¶æ€å­˜å‚¨ä¸å¯è§æ€§</strong>ï¼šæ•´ä¸ªç³»ç»Ÿçš„æœŸæœ›çŠ¶æ€å’Œå½“å‰çŠ¶æ€éƒ½æŒä¹…åŒ–å­˜å‚¨åœ¨<strong>etcd</strong>è¿™ä¸ªç»Ÿä¸€çš„ä¸­å¿ƒåŒ–æ•°æ®åº“ä¸­ã€‚ è¿™æ„å‘³ç€ï¼Œå³ä½¿Kubernetesçš„æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆå¦‚æ§åˆ¶å™¨ç®¡ç†å™¨ï¼‰å‘ç”Ÿé‡å¯ï¼Œå®ƒä»¬åœ¨æ¢å¤åä¹Ÿèƒ½ç«‹åˆ»ä»etcdä¸­è·å–åˆ°å®Œæ•´çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ç»§ç»­æ‰§è¡Œåè°ƒå·¥ä½œï¼Œä¸ä¼šå› é”™è¿‡æ•…éšœäº‹ä»¶è€Œæ— æ³•æ¢å¤ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸ› ï¸ å£°æ˜å¼APIçš„å®è·µè¿ç”¨</h3>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå£°æ˜å¼APIçš„å¨åŠ›é€šè¿‡ä¸€äº›æ ¸å¿ƒå‘½ä»¤å’Œæ¦‚å¿µä½“ç°å‡ºæ¥ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒæ“ä½œå‘½ä»¤</strong>ï¼š<code>kubectl apply -f &lt;file.yaml&gt;</code>æ˜¯å£°æ˜å¼æ“ä½œçš„ä»£è¡¨ã€‚ä½ åº”è¯¥å°†åº”ç”¨çš„æ‰€æœ‰é…ç½®ï¼ˆDeployment, Serviceç­‰ï¼‰ç”¨YAMLæ–‡ä»¶æè¿°å‡ºæ¥ï¼Œå¹¶çº³å…¥<strong>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚Gitï¼‰</strong> â€‹ è¿›è¡Œç®¡ç†ã€‚è¿™å¸¦æ¥äº†å¯è¿½æº¯ã€å¯å›æ»šå’Œæ˜“äºå¤ç°çš„éƒ¨ç½²æµç¨‹ï¼Œæ˜¯<strong>GitOps</strong>å®è·µçš„åŸºç¡€ã€‚</li>
<li><strong>æ•…éšœæ¨¡æ‹Ÿä¸æ¢å¤</strong>ï¼šä½ å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªæ•…éšœï¼ˆä¾‹å¦‚ä½¿ç”¨ <code>kubectl delete pod &lt;pod-name&gt;</code>æ‰‹åŠ¨åˆ é™¤ä¸€ä¸ªPodï¼‰ï¼Œç„¶ååœ¨å‡ åˆ†é’Ÿå†…ä½¿ç”¨ <code>kubectl get pods</code>å‘½ä»¤è§‚å¯Ÿï¼Œä¼šå‘ç°Kubernetesè‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Podæ¥æ›¿æ¢è¢«åˆ é™¤çš„ï¼Œä»è€Œç»´æŒäº†å‰¯æœ¬æ•°é‡ã€‚è¦å›æ»šä¸€ä¸ªæœ‰é—®é¢˜çš„éƒ¨ç½²ï¼Œä½ å¯ä»¥ç®€å•åœ°æ‰§è¡Œ <code>kubectl rollout undo deployment/&lt;deployment-name&gt;</code>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†åº”ç”¨å›é€€åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>kubectl get deployment &lt;deployment-name&gt; -o yaml &gt; old-version.yaml</code>å¤‡ä»½å½“å‰é…ç½®ï¼Œç„¶åä½¿ç”¨ <code>kubectl apply -f old-version.yaml</code>æ¥å¼ºåˆ¶å›æ»šåˆ°å·²çŸ¥çš„æ—§é…ç½®ã€‚</li>
</ul>
<h3 data-id="heading-2">ğŸ’ æ€»ç»“</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒKubernetesçš„å£°æ˜å¼APIå°†å…¶æ•…éšœæ¢å¤æ¨¡å¼ä»ä¸€ç§è¢«åŠ¨çš„ã€ä¾èµ–äººå·¥å¹²é¢„å’Œå¤æ‚è„šæœ¬çš„â€œè¾¹ç¼˜è§¦å‘â€æ–¹å¼ï¼Œè½¬å˜ä¸ºä¸€ç§ä¸»åŠ¨çš„ã€<strong>è‡ªæˆ‘ä¿®å¤</strong>çš„â€œæ°´å¹³è§¦å‘â€èŒƒå¼ã€‚å®ƒå°†è¿ç»´äººå‘˜ä»ç¹ççš„å…·ä½“æ“ä½œæŒ‡ä»¤ä¸­è§£æ”¾å‡ºæ¥ï¼Œä½¿å…¶èƒ½æ›´å…³æ³¨äºå®šä¹‰ç³»ç»Ÿçš„å®è§‚ç›®æ ‡ï¼Œä»è€Œæå¤§åœ°æå‡äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„**ç¨³å®šæ€§å’Œå¯é æ€§*</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GitPulseï¼šè®©ä»£ç çš„æ•…äº‹è‡ªå·±è®²è¿°]]></title>    <link>https://juejin.cn/post/7577202452800307200</link>    <guid>https://juejin.cn/post/7577202452800307200</guid>    <pubDate>2025-11-27T13:55:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577202452800307200" data-draft-id="7577229187896836131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GitPulseï¼šè®©ä»£ç çš„æ•…äº‹è‡ªå·±è®²è¿°"/> <meta itemprop="keywords" content="IntelliJ IDEA,ç¨‹åºå‘˜,Git"/> <meta itemprop="datePublished" content="2025-11-27T13:55:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GitPulseï¼šè®©ä»£ç çš„æ•…äº‹è‡ªå·±è®²è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:55:30.000Z" title="Thu Nov 27 2025 13:55:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä½ å€¼å¾—è¢«çœ‹è§ï¼Œè€Œä¸æ˜¯è¢«é—å¿˜</strong></h2>
<p>å‘¨äº”ä¸‹åˆï¼Œé¢†å¯¼çªç„¶é—®ä½ ï¼šâ€œè¿™å‘¨åšäº†ä»€ä¹ˆï¼Ÿâ€</p>
<p>ä½ æ„£ä½äº†ã€‚æ˜æ˜ä¸€æ•´å‘¨éƒ½åœ¨å†™ä»£ç ã€æ”¹ bugã€è°ƒæ¥å£ï¼Œå¯ Git æäº¤è®°å½•å´åªå†™ç€ <code>fix bug</code>ã€<code>update</code>ã€<code>è°ƒæ•´</code>â€¦â€¦è¿™äº›ç¢ç‰‡æ— æ³•è¿˜åŸä½ çš„çœŸå®ä»·å€¼â€”â€”é‚£äº›æ·±å¤œçš„æ€è€ƒã€é‡æ„çš„å†³å¿ƒã€æ”»å…‹éš¾é¢˜çš„å–œæ‚¦ï¼Œå…¨éƒ½æ²‰æ²¡åœ¨æ—¶é—´çš„æ´ªæµé‡Œã€‚</p>
<p>è¿™ä¸æ˜¯ä½ çš„é—®é¢˜ï¼Œæ˜¯å·¥å…·çš„é—®é¢˜ã€‚</p>
<p><strong>æˆ‘ä»¬å†™ä»£ç ï¼Œä¸æ˜¯ä¸ºäº†ç•™ä¸‹ä¸€ä¸²ä¹±ç ï¼Œè€Œæ˜¯ä¸ºäº†è®²è¿°ä¸€ä¸ªæ•…äº‹ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d89c7675ce0c475cb40810091f773c3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=AS%2B%2BnpQBrJsPrK7MqqeL%2F0YOsC8%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1"><strong>ä¿¡æ¯ â‰  ç†è§£ã€‚è€Œ GitPulseï¼Œè®©ä¿¡æ¯å˜æˆæ´å¯Ÿ</strong></h2>
<p>ç†æŸ¥å¾·Â·æ²ƒæ›¼â€”â€”TED åˆ›å§‹äººã€ä¿¡æ¯æ¶æ„ä¹‹çˆ¶â€”â€”æ›¾è¯´è¿‡ä¸€å¥æ·±åˆ»çš„è¯ï¼š</p>
<blockquote>
<p>â€œä¿¡æ¯åªæœ‰è¢«ç†è§£ï¼Œæ‰èƒ½äº§ç”Ÿä»·å€¼ã€‚å¦åˆ™ï¼Œå®ƒåªæ˜¯å™ªéŸ³ã€‚â€</p>
</blockquote>
<p>Git æäº¤è®°å½•å°±æ˜¯å…¸å‹çš„â€œä¿¡æ¯å™ªéŸ³â€ï¼š<br/>
æ•°æ®å¾ˆå¤šï¼Œä½†æ²¡æœ‰ç»“æ„ï¼›<br/>
å†å²å¾ˆé•¿ï¼Œä½†çœ‹ä¸è§è¶‹åŠ¿ï¼›<br/>
è®°å½•å¾ˆå…¨ï¼Œä½†è¯»ä¸æ‡‚æ„å›¾ã€‚</p>
<p>GitPulse çš„ä½¿å‘½ï¼Œå°±æ˜¯æŠŠè¿™å †å™ªéŸ³ï¼Œå˜æˆä½ èƒ½å¬æ‡‚ã€èƒ½åˆ†äº«ã€èƒ½ç§¯ç´¯çš„<strong>æˆé•¿å™äº‹</strong>ã€‚</p>
<h3 data-id="heading-2"><strong>å¦‚ä½•åšåˆ°ï¼Ÿä¸‰ä¸ªå…³é”®è¯å°±å¤Ÿäº†ï¼š</strong></h3>
<h4 data-id="heading-3"><strong>1. ç»“æ„åŒ–ï¼šä»æ··ä¹±ä¸­æç‚¼ç§©åº</strong></h4>
<ul>
<li><strong>æŒ‰æ—¶é—´ç»´åº¦</strong>ï¼šæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆçš„å¼€å‘èŠ‚å¥æ¸…æ™°å¯è§</li>
<li><strong>æŒ‰å·¥ä½œè¯­ä¹‰</strong>ï¼šè‡ªåŠ¨è¯†åˆ«â€œåŠŸèƒ½å¼€å‘â€â€œBug ä¿®å¤â€â€œæ¶æ„é‡æ„â€</li>
<li><strong>æŒ‰è´¡çŒ®ä»·å€¼</strong>ï¼šä»£ç å¢åˆ é‡ã€å½±å“èŒƒå›´ã€åä½œæ¨¡å¼ä¸€ç›®äº†ç„¶</li>
</ul>
<p>å°±åƒä¸€å¼ ç²¾å¿ƒè®¾è®¡çš„åœ°å›¾ï¼ŒGitPulse åªçªå‡ºä½ çœŸæ­£éœ€è¦çš„ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-4"><strong>2. å¯è§†åŒ–ï¼šè®©æ•°æ®å¼€å£è¯´è¯</strong></h4>
<ul>
<li>è¶‹åŠ¿å›¾è¡¨ï¼šä½ æ˜¯ç¨³å®šè¾“å‡ºè€…ï¼Œè¿˜æ˜¯å†²åˆºå‹é€‰æ‰‹ï¼Ÿ</li>
<li>ç»Ÿè®¡é¢æ¿ï¼šä¸ªäººã€é¡¹ç›®ã€å›¢é˜Ÿï¼Œä¸‰é‡è§†è§’ç«‹ä½“å‘ˆç°</li>
<li>æ™ºèƒ½å‘¨æŠ¥ï¼šä¸æ˜¯æµæ°´è´¦ï¼Œè€Œæ˜¯æœ‰ä¸»é¢˜ã€æœ‰é‡ç‚¹çš„<strong>ä»·å€¼æ€»ç»“</strong></li>
</ul>
<h4 data-id="heading-5"><strong>3. è¯­ä¹‰åŒ–ï¼šè¯»æ‡‚ä½ ä»£ç èƒŒåçš„â€œä¸ºä»€ä¹ˆâ€</strong></h4>
<p>GitPulse ä¸åªçœ‹ diffï¼Œæ›´ç†è§£æ„å›¾ï¼š<br/>
è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼Ÿè¿˜æ˜¯æ–°åŠŸèƒ½ä¸Šçº¿ï¼Ÿ<br/>
æ˜¯æŠ€æœ¯å€ºå¿è¿˜ï¼Ÿè¿˜æ˜¯ç³»ç»Ÿæ¶æ„å‡çº§ï¼Ÿ</p>
<p>å®ƒæŠŠé›¶æ•£çš„æäº¤ï¼Œé‡ç»„æˆä¸€æ¡æ¡<strong>æœ‰é€»è¾‘ã€æœ‰æ¸©åº¦çš„æ•…äº‹çº¿</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bceb49a34214d4e8b0c746cec7f2dca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=6WxLPKestABzkTl9jRJE4fuSqBM%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6"><strong>ä»·å€¼å…ˆè¡Œï¼šä¸æ˜¯ç›‘æ§ä½ ï¼Œè€Œæ˜¯è®©ä½ çœ‹è§è‡ªå·±</strong></h2>
<p>å“ˆé‡ŒÂ·é©¬å…‹æ€â€”â€”ä¼ å¥‡è¥é”€å¤§å¸ˆâ€”â€”æœ‰ä¸€æ¡é“å¾‹ï¼š</p>
<blockquote>
<p>â€œå…ˆé—®ä½ èƒ½ä¸ºå®¢æˆ·åˆ›é€ ä»€ä¹ˆä»·å€¼ï¼Œå†è°ˆå›æŠ¥ã€‚â€</p>
</blockquote>
<p>GitPulse ä»ä¸ç›‘æ§ã€ä¸è€ƒæ ¸ã€ä¸å‹æ¦¨ã€‚<br/>
å®ƒå­˜åœ¨çš„å”¯ä¸€ç›®çš„ï¼Œæ˜¯å¸®ä½ <strong>çœ‹è§è‡ªå·±çš„ç¨€ç¼ºæ€§</strong>ã€‚</p>
<blockquote>
<p>åœ¨è¿™ä¸ª AI é«˜é€Ÿæ™®åŠçš„æ—¶ä»£ï¼Œæœ€å±é™©çš„ä¸æ˜¯ä¸ä¼šç”¨ AIï¼Œè€Œæ˜¯åˆ†ä¸æ¸…ä»€ä¹ˆæ˜¯â€œæ ‡å‡†åŒ–å·¥ä½œâ€â€”â€”æ¯”å¦‚åœ¨æ–‡æ¡£æŒ‡å¯¼ä¸‹å°±èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚<br/>
çœŸæ­£è®©ä½ ä¸å¯æ›¿ä»£çš„ï¼Œæ˜¯é‚£äº›èƒ½å¸¦æ¥â€œéçº¿æ€§å›æŠ¥â€çš„äº‹ï¼šè®¾è®¡ç³»ç»Ÿã€å®šä¹‰æ¶æ„ã€è§£å†³æ¨¡ç³Šé—®é¢˜ã€‚</p>
</blockquote>
<p>GitPulse å¸®ä½ è¯†åˆ«è¿™äº›é—ªå…‰ç‚¹ï¼Œå¹¶æŠŠå®ƒä»¬æ²‰æ·€ä¸‹æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a973e90aff1461fbbf4b5f2413ec87b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=N5B0abKOYxSVklpoDe0By8NLFos%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7"><strong>ä¸ºè°åˆ›é€ ä»·å€¼ï¼Ÿ</strong></h3>
<h4 data-id="heading-8">âœ… <strong>ç»™å¼€å‘è€…ï¼šæ„å»ºä½ çš„æˆé•¿æ¡£æ¡ˆ</strong></h4>
<ul>
<li>çœ‹è§è¿›æ­¥ï¼šä»£ç é‡ã€é—®é¢˜è§£å†³æ•°ã€æŠ€æœ¯æ·±åº¦çš„å˜åŒ–</li>
<li>å‘ç°æ¨¡å¼ï¼šé«˜æ•ˆæ—¶æ®µã€æ“…é•¿é¢†åŸŸã€æˆé•¿ç“¶é¢ˆ</li>
<li>ç§¯ç´¯èµ„äº§ï¼šæ¯å‘¨è‡ªåŠ¨ç”Ÿæˆçš„å‘¨æŠ¥ï¼Œè‡ªåŠ¨å½’æ¡£è‡³ MongoDBï¼Œæˆä¸ºä½ <strong>åå¹´åéƒ½èƒ½å›çœ‹çš„èŒä¸šæ—¥è®°</strong></li>
</ul>
<p>è¿™ä¸æ˜¯æ‰“å¡ï¼Œè¿™æ˜¯<strong>æœ‰è¯æ®çš„æˆé•¿</strong>ã€‚</p>
<h4 data-id="heading-9">âœ… <strong>ç»™å›¢é˜Ÿï¼šè®©åä½œé€æ˜ï¼Œå‡å°‘å†…è€—</strong></h4>
<ul>
<li>è°åœ¨åšä»€ä¹ˆï¼Ÿè¿›å±•å¦‚ä½•ï¼Ÿé¿å…é‡å¤åŠ³åŠ¨</li>
<li>è´¡çŒ®è¢«çœ‹è§ï¼ŒåŠªåŠ›è¢«è®¤å¯ï¼Œåä½œæ›´æµç•…</li>
<li>ä¸å†â€œé»˜é»˜ä»˜å‡ºâ€ï¼Œè€Œæ˜¯â€œå½¼æ­¤ç…§äº®â€</li>
</ul>
<h4 data-id="heading-10">âœ… <strong>ç»™ç®¡ç†è€…ï¼šç†è§£ï¼Œè€Œéæ§åˆ¶</strong></h4>
<ul>
<li>è°æœ€è¿‘å‹åŠ›å¤§ï¼Ÿå“ªäº›æ¨¡å—é¢‘ç¹æ”¹åŠ¨ï¼Ÿ</li>
<li>å›¢é˜ŸèŠ‚å¥æ˜¯å¦å¥åº·ï¼Ÿåä½œæ˜¯å¦å­˜åœ¨ç“¶é¢ˆï¼Ÿ<br/>
GitPulse æä¾›çš„æ˜¯<strong>å…±æƒ…çš„è§†è§’</strong>ï¼Œä¸æ˜¯å†°å†·çš„ KPIã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11"><strong>ç‰¹åˆ«åŠŸèƒ½ï¼šAI ä»£ç æ£€æµ‹â€”â€”æ‹¥æŠ±æœªæ¥ï¼Œè¯šå®è®°å½•</strong></h2>
<p>æˆ‘ä»¬ä¸å›é¿ AI ç¼–ç¨‹ã€‚<br/>
ç›¸åï¼ŒGitPulse å†…ç½® <strong>AI ä»£ç è¯†åˆ«åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ ‡è®° AI ç”Ÿæˆä»£ç </li>
<li>ç»Ÿè®¡ AI è¾…åŠ©å æ¯”</li>
<li>å¸®ä½ åæ€ï¼šå“ªäº›å·¥ä½œå¯è¢« AI æ›¿ä»£ï¼Ÿä½ çš„æ ¸å¿ƒä»·å€¼åœ¨å“ªé‡Œï¼Ÿ</li>
</ul>
<p>è¿™ä¸æ˜¯â€œæŠ“ä½ ç”¨ AIâ€ï¼Œè€Œæ˜¯å¸®ä½ <strong>å’Œ AI æ›´èªæ˜åœ°åä½œ</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94d67b4af82640d595f636d188b36c57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=ykWHne1A52OZLtgsIKOy440emW0%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-12"><strong>æ¯å‘¨ä¸€å°â€œä»·å€¼åç‰‡â€ï¼šè®©æˆé•¿è¢«çœ‹è§</strong></h2>
<p>æ¯å‘¨äº”ï¼ŒGitPulse å¯è‡ªåŠ¨å‘é€<strong>ç»“æ„åŒ–å‘¨æŠ¥</strong>åˆ°ä½ çš„é‚®ç®±ï¼ˆç”šè‡³å¯æŠ„é€é¢†å¯¼ï¼‰ï¼š</p>
<ul>
<li>æœ‰ä¸»é¢˜ã€æœ‰é‡ç‚¹ã€æœ‰æ•°æ®æ”¯æ’‘</li>
<li>ä¸æ˜¯â€œæˆ‘åšäº†5ä¸ªtaskâ€ï¼Œè€Œæ˜¯â€œæˆ‘å®Œæˆäº†XXæ¨¡å—çš„æ¶æ„å‡çº§ï¼Œæ€§èƒ½æå‡40%â€</li>
<li>é™„å¸¦è¶‹åŠ¿åˆ†æï¼Œå±•ç¤ºä½ çš„æŒç»­æˆé•¿</li>
</ul>
<p>è¿™å°é‚®ä»¶ï¼Œæ˜¯ä½ <strong>å†™ç»™èŒåœºçš„è‡ªä¿¡å®£è¨€</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc0a87976bd04c7cb47b1ea01cd00fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=O0dYAzLx9SqQhX2iqgJIcImDT9A%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13"><strong>é•¿æœŸä¸»ä¹‰è€…çš„ç§˜å¯†æ­¦å™¨ï¼šMongoDB å½’æ¡£</strong></h2>
<p>æ‰€æœ‰å‘¨æŠ¥è‡ªåŠ¨å½’æ¡£è‡³ä½ çš„ä¸ªäºº MongoDB çŸ¥è¯†åº“ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>ä¸€å¹´åï¼Œä½ èƒ½æ¸…æ™°çœ‹åˆ°æŠ€æœ¯æˆé•¿æ›²çº¿</li>
<li>ä¸‰å¹´åï¼Œä½ èƒ½è‡ªä¿¡åœ°è¯´å‡ºâ€œæˆ‘ä»åˆçº§åˆ°æ¶æ„å¸ˆçš„è·¯å¾„â€</li>
<li>åå¹´åï¼Œä½ æˆ–è®¸èƒ½å†™å‡ºä¸€æœ¬ã€Šæˆ‘çš„ç¼–ç¨‹äººç”Ÿã€‹</li>
</ul>
<p>è¿™ä¸æ˜¯æ•°æ®å¤‡ä»½ï¼Œè¿™æ˜¯<strong>ä½ èŒä¸šç”Ÿæ¶¯çš„æ•°å­—èµ„äº§</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de0e4b59a65442ae9cf516761376b946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764856530&amp;x-signature=vEQJyXhTvGjU3r65jkkK1pDtcpE%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-14"><strong>å®Œå…¨å…è´¹ï¼Œåªä¸ºä»·å€¼è€Œç”Ÿ</strong></h2>
<p>GitPulse <strong>æ²¡æœ‰å¹¿å‘Šï¼Œæ²¡æœ‰ä»˜è´¹å¢™ï¼Œå®Œå…¨å…è´¹</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ<br/>
å› ä¸ºæˆ‘ç›¸ä¿¡ï¼š<strong>å…ˆç»™äºˆä»·å€¼ï¼Œå†è°ˆå›æŠ¥</strong>ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—å®ƒæœ‰ç”¨ï¼Œä½ çš„å›æŠ¥å¯ä»¥æ˜¯ï¼š</p>
<ul>
<li>åˆ†äº«ç»™åŒè¡Œ</li>
<li>æå‡ºå»ºè®®</li>
<li>æˆ–åªæ˜¯è¯´ä¸€å¥â€œè°¢è°¢â€</li>
</ul>
<p>è¿™å°±å¤Ÿäº†ã€‚</p>
<hr/>
<h2 data-id="heading-15"><strong>ä¸‰æ­¥å¼€å¯ä½ çš„ä»·å€¼ä¹‹æ—…</strong></h2>
<ol>
<li><strong>å®‰è£…</strong>ï¼šåœ¨ JetBrains Marketplace æœç´¢ <strong>â€œGitPulseâ€</strong></li>
<li><strong>æ‰“å¼€</strong>ï¼šIDE å³ä¾§å·¥å…·æ ç‚¹å‡» <strong>â€œGit Statisticsâ€</strong></li>
<li><strong>æ„Ÿå—</strong>ï¼šçœ‹è§ä½ çš„ç¬¬ä¸€ä»½â€œæœ‰æ•…äº‹çš„å‘¨æŠ¥â€</li>
</ol>
<hr/>
<h2 data-id="heading-16"><strong>æœ€åçš„è¯</strong></h2>
<p>æˆ‘ä»¬ä¸æ˜¯ä»£ç æœºå™¨ï¼Œæˆ‘ä»¬æ˜¯<strong>åˆ›é€ è€…</strong>ã€‚<br/>
æ¯ä¸€è¡Œä»£ç èƒŒåï¼Œéƒ½æœ‰æ€è€ƒã€æŒ£æ‰ã€çªç ´å’Œå–œæ‚¦ã€‚</p>
<p>GitPulse çš„ä½¿å‘½ï¼Œå°±æ˜¯è®©è¿™äº›<strong>è¢«å¿½è§†çš„ä»·å€¼</strong>ï¼Œé‡æ–°è¢«çœ‹è§ï¼š</p>
<ul>
<li>è®©ä½ çœ‹è§è‡ªå·±</li>
<li>è®©å›¢é˜Ÿçœ‹è§å½¼æ­¤</li>
<li>è®©ä¸–ç•Œçœ‹è§å¼€å‘è€…çš„çœŸå®åˆ†é‡</li>
</ul>
<p>å®ƒä¸æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>æ‡‚ä½ çš„ä¼™ä¼´</strong>ã€‚</p>
<hr/>
<blockquote>
<p><strong>GitPulseï¼šä¸æ˜¯ç›‘æ§ä½ çš„å·¥å…·ï¼Œè€Œæ˜¯çœ‹è§ä½ çš„ä¼™ä¼´ã€‚</strong><br/>
<em>ä½ çš„æäº¤æœ‰è„‰æã€‚è®©å®ƒä»¬è¯´è¯å§ã€‚</em> ğŸ’»ğŸµ</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒKuberneteså£°æ˜å¼APIå¦‚ä½•å®ç°è“ç»¿éƒ¨ç½²ã€é‡‘ä¸é›€å‘å¸ƒç­‰é«˜çº§éƒ¨ç½²ç­–ç•¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577284409964118079</link>    <guid>https://juejin.cn/post/7577284409964118079</guid>    <pubDate>2025-11-27T13:59:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577284409964118079" data-draft-id="7577220965438242870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒKuberneteså£°æ˜å¼APIå¦‚ä½•å®ç°è“ç»¿éƒ¨ç½²ã€é‡‘ä¸é›€å‘å¸ƒç­‰é«˜çº§éƒ¨ç½²ç­–ç•¥ï¼Ÿ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-27T13:59:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒKuberneteså£°æ˜å¼APIå¦‚ä½•å®ç°è“ç»¿éƒ¨ç½²ã€é‡‘ä¸é›€å‘å¸ƒç­‰é«˜çº§éƒ¨ç½²ç­–ç•¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T13:59:32.000Z" title="Thu Nov 27 2025 13:59:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kubernetes çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå£°æ˜å¼ API æ˜¯å®ç°è“ç»¿éƒ¨ç½²ã€é‡‘ä¸é›€å‘å¸ƒç­‰é«˜çº§éƒ¨ç½²ç­–ç•¥çš„åŸºçŸ³ã€‚å®ƒé€šè¿‡â€œå®šä¹‰æœ€ç»ˆçŠ¶æ€â€è€Œéâ€œæ‰§è¡Œå…·ä½“æ­¥éª¤â€çš„é€»è¾‘ï¼Œè®©å¤æ‚ä¸”æ˜“é”™çš„å‘å¸ƒè¿‡ç¨‹å˜å¾—è‡ªåŠ¨åŒ–ã€å¯é‡å¤ä¸”é«˜åº¦å¯é ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†å£°æ˜å¼ API å¦‚ä½•æ ¸å¿ƒæ”¯æ’‘ä¸¤ç§ä¸»æµçš„éƒ¨ç½²ç­–ç•¥ã€‚</p>




















<table><thead><tr><th><strong>éƒ¨ç½²ç­–ç•¥</strong>â€‹</th><th><strong>å£°æ˜å¼ API çš„æ ¸å¿ƒä½œç”¨æœºåˆ¶</strong>â€‹</th><th><strong>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„å…³é”®ä¼˜åŠ¿</strong>â€‹</th></tr></thead><tbody><tr><td><strong>è“ç»¿éƒ¨ç½² (Blue-Green)</strong> â€‹</td><td>é€šè¿‡ä¿®æ”¹ <strong>Service</strong>â€‹ æˆ– <strong>Ingress</strong>â€‹ èµ„æºä¸­çš„<strong>æ ‡ç­¾é€‰æ‹©å™¨</strong>ï¼Œä¸€é”®å°†æµé‡ä»â€œè“è‰²â€ï¼ˆæ—§ï¼‰ç‰ˆæœ¬å…¨éƒ¨åˆ‡æ¢åˆ°â€œç»¿è‰²â€ï¼ˆæ–°ï¼‰ç‰ˆæœ¬ ã€‚</td><td><strong>ç§’çº§å›æ»š</strong>ï¼šè‹¥æ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå†æ¬¡ä¿®æ”¹é€‰æ‹©å™¨å³å¯ç«‹å³åˆ‡å›æ—§ç‰ˆæœ¬ï¼ŒæœåŠ¡æ¢å¤æ—¶é—´æçŸ­ï¼Œå¯¹ç”¨æˆ·å½±å“æœ€å° ã€‚</td></tr><tr><td><strong>é‡‘ä¸é›€å‘å¸ƒ (Canary Release)</strong> â€‹</td><td>åœ¨ <strong>Ingress</strong>â€‹ æˆ– <strong>Service Mesh</strong>â€‹ çš„è™šæ‹ŸæœåŠ¡è§„åˆ™ä¸­ï¼Œ<strong>å£°æ˜</strong>ä¸åŒç‰ˆæœ¬ï¼ˆå¦‚ç¨³å®šç‰ˆå’Œé‡‘ä¸é›€ç‰ˆï¼‰çš„<strong>æµé‡æƒé‡æ¯”ä¾‹</strong>æˆ–åŒ¹é…è§„åˆ™ ã€‚</td><td><strong>é£é™©å¯æ§</strong>ï¼šå¯å°†åˆå§‹æµé‡ï¼ˆå¦‚ 5%ï¼‰å¯¼è‡³æ–°ç‰ˆæœ¬ï¼Œæ ¹æ®ç›‘æ§æŒ‡æ ‡ï¼ˆæˆåŠŸç‡ã€å»¶è¿Ÿï¼‰é€æ­¥è°ƒæ•´æƒé‡ï¼Œå®ç°å¹³æ»‘ã€å¯æ§çš„ä¸Šçº¿ ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ’¡ å£°æ˜å¼APIå¦‚ä½•æ”¯æ’‘éƒ¨ç½²ç­–ç•¥</h3>
<p>å£°æ˜å¼ API çš„é­…åŠ›åœ¨äºï¼Œä½ åªéœ€è¦å‘Šè¯‰ Kubernetes <em>â€œä½ æƒ³è¦ä»€ä¹ˆâ€</em> ï¼Œè€Œä¸æ˜¯ <em>â€œå…·ä½“æ€ä¹ˆåšâ€</em> ã€‚å¯¹äºéƒ¨ç½²ç­–ç•¥è€Œè¨€ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>å¯¹äºè“ç»¿éƒ¨ç½²</strong>ï¼šä½ æ— éœ€æ‰‹åŠ¨ç¼–å†™è„šæœ¬å»é€ä¸ªè°ƒæ•´è´Ÿè½½å‡è¡¡å™¨çš„é…ç½®ã€‚ä½ åªéœ€æäº¤ä¸€ä¸ªæœŸæœ›çŠ¶æ€çš„å˜æ›´ï¼Œä¾‹å¦‚å°† Service çš„ <code>selector</code>ä» <code>version: blue</code>æ”¹ä¸º <code>version: green</code>ã€‚Kubernetes ç³»ç»Ÿå†…çš„æ§åˆ¶å™¨ä¼šæŒç»­è§‚å¯Ÿæ­¤å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨å°†æµé‡è·¯ç”±åˆ°æ–°çš„ Pod é›†åˆã€‚å¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œä½ åªéœ€å°†é…ç½®æ”¹å›å»ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸”æ— è¯¯åœ°æ‰§è¡Œå›æ»šæ“ä½œ ã€‚è¿™ç§<strong>æ°´å¹³è§¦å‘</strong>çš„æ¨¡å¼ç¡®ä¿äº†ç³»ç»Ÿå§‹ç»ˆå‘å£°æ˜çš„æœŸæœ›çŠ¶æ€æ”¶æ•›ã€‚</li>
<li><strong>å¯¹äºé‡‘ä¸é›€å‘å¸ƒ</strong>ï¼šä½ é€šè¿‡ YAML æ–‡ä»¶å£°æ˜â€œå°† 5% çš„æµé‡è·¯ç”±åˆ°å…·æœ‰ <code>version: canary</code>æ ‡ç­¾çš„ Podâ€ã€‚åƒ Istio æˆ– Nginx Ingress Controller è¿™æ ·çš„æ§åˆ¶å™¨ä¼šç›‘å¬åˆ°è¿™ä¸ªå˜åŒ–ï¼Œå¹¶ç²¾ç¡®åœ°æŒ‰æ­¤æ¯”ä¾‹åˆ†å‘æµé‡ ã€‚ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡å¤šæ¬¡åº”ç”¨æ›´æ–°çš„ YAML æ–‡ä»¶ï¼ˆä¾‹å¦‚å°†æµé‡è°ƒæ•´ä¸º 20%ã€50%ï¼‰ï¼Œé€æ­¥æ‰©å¤§æ–°ç‰ˆæœ¬çš„æµé‡ï¼Œæ•´ä¸ªè¿‡ç¨‹æ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„ï¼Œå®ç°äº†<strong>æ¸è¿›å¼äº¤ä»˜</strong>â€‹ ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸ› ï¸ ç”Ÿäº§ç¯å¢ƒä¸­çš„å…³é”®å®è·µä¸å·¥å…·</h3>
<p>åœ¨å®é™…æ“ä½œä¸­ï¼Œç»“åˆä»¥ä¸‹å®è·µå’Œå·¥å…·èƒ½æœ€å¤§åŒ–å£°æ˜å¼ API çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨ GitOps è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ä¸è‡ªåŠ¨åŒ–</strong>ï¼šå°†å£°æ˜éƒ¨ç½²ç­–ç•¥çš„ YAML æ–‡ä»¶ï¼ˆä¾‹å¦‚å®šä¹‰ Serviceã€Ingress çš„æ–‡ä»¶ï¼‰å­˜å‚¨åœ¨ Git ä»“åº“ä¸­ã€‚ä»»ä½•å˜æ›´éƒ½é€šè¿‡ Pull Request è¿›è¡Œï¼Œä¾¿äºè¯„å®¡ã€å®¡è®¡å’Œå›æ»šã€‚é…åˆ Argo CD æˆ– Flux ç­‰ GitOps å·¥å…·ï¼Œå½“ Git ä»“åº“ä¸­çš„å£°æ˜æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå·¥å…·ä¼šè‡ªåŠ¨å°†å˜æ›´åŒæ­¥åˆ° Kubernetes é›†ç¾¤ï¼Œå®ç°<strong>æŒç»­ä¸”å®‰å…¨çš„äº¤ä»˜</strong>â€‹ ã€‚</li>
<li><strong>åˆ©ç”¨é«˜çº§å·¥å…·å®ç°æ›´å¤æ‚çš„ç­–ç•¥</strong>ï¼šè™½ç„¶åŸç”Ÿ Kubernetes èµ„æºèƒ½å®ç°åŸºæœ¬ç­–ç•¥ï¼Œä½†ä½¿ç”¨å¦‚ <strong>Argo Rollouts</strong>â€‹ è¿™æ ·çš„ä¸“ç”¨æ§åˆ¶å™¨å¯ä»¥è®©ä½ æ›´å¼ºå¤§ã€æ›´ç›´è§‚åœ°å£°æ˜å¤æ‚ç­–ç•¥ã€‚Argo Rollouts æä¾›äº†è‡ªå®šä¹‰èµ„æº <code>Rollout</code>ï¼Œå…è®¸ä½ åœ¨ YAML ä¸­ç›´æ¥å£°æ˜è“ç»¿å‘å¸ƒçš„è‡ªåŠ¨åˆ‡æ¢æ¡ä»¶æˆ–é‡‘ä¸é›€å‘å¸ƒçš„åˆ†ææ­¥éª¤ï¼Œä»è€Œå®ç°<strong>è‡ªåŠ¨åŒ–ã€æŒ‡æ ‡é©±åŠ¨çš„å‘å¸ƒæµç¨‹</strong>â€‹ ã€‚</li>
<li><strong>é…ç½®å¥åº·æ£€æŸ¥å’Œèµ„æºé™åˆ¶</strong>ï¼šä¸ºç¡®ä¿æµé‡åˆ‡æ¢ååº”ç”¨çš„ç¨³å®šæ€§ï¼Œå¿…é¡»åœ¨ Pod çš„å£°æ˜ä¸­é…ç½®æœ‰æ•ˆçš„ <code>readinessProbe</code>å’Œ <code>livenessProbe</code>ã€‚åŒæ—¶ï¼Œé€šè¿‡ <code>resources</code>å­—æ®µä¸ºæ¯ä¸ªå®¹å™¨è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶ï¼Œé˜²æ­¢æœ‰é—®é¢˜çš„ç‰ˆæœ¬ï¼ˆå¦‚å†…å­˜æ³„æ¼ï¼‰å½±å“é›†ç¾¤èŠ‚ç‚¹ï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒçš„<strong>å¿…å¤‡å®‰å…¨æªæ–½</strong>ã€‚</li>
</ol>
<h3 data-id="heading-2">ğŸ’ æ€»ç»“</h3>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒKubernetes çš„å£°æ˜å¼ API å°†é«˜çº§éƒ¨ç½²ç­–ç•¥ä»ä¾èµ–äººå·¥æ“ä½œå’Œè‡ªå®šä¹‰è„šæœ¬çš„å¤æ‚ä»»åŠ¡ï¼Œè½¬å˜ä¸ºäº†é€šè¿‡å®šä¹‰ YAML æ–‡ä»¶å³å¯ç®¡ç†çš„æ ‡å‡†ã€å¯é æµç¨‹ã€‚å®ƒä¸ä»…<strong>æå¤§åœ°ç®€åŒ–äº†æ“ä½œ</strong>ï¼Œè¿˜é€šè¿‡<strong>è‡ªåŠ¨åŒ–</strong>å’Œ<strong>ç‰ˆæœ¬æ§åˆ¶</strong>æ˜¾è‘—æå‡äº†ç”Ÿäº§ç¯å¢ƒåº”ç”¨å‘å¸ƒçš„<strong>å®‰å…¨æ€§</strong>ä¸<strong>å¯é æ€§</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TinyEngine ä½ä»£ç å®æ—¶åä½œæ­ç§˜ï¼šåŸç† +å®æ“ï¼Œçœ‹å®Œç›´æ¥ç”¨ï¼]]></title>    <link>https://juejin.cn/post/7577229187896573987</link>    <guid>https://juejin.cn/post/7577229187896573987</guid>    <pubDate>2025-11-27T12:04:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577229187896573987" data-draft-id="7577226553286524963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TinyEngine ä½ä»£ç å®æ—¶åä½œæ­ç§˜ï¼šåŸç† +å®æ“ï¼Œçœ‹å®Œç›´æ¥ç”¨ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,ä½ä»£ç "/> <meta itemprop="datePublished" content="2025-11-27T12:04:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TinyEngine ä½ä»£ç å®æ—¶åä½œæ­ç§˜ï¼šåŸç† +å®æ“ï¼Œçœ‹å®Œç›´æ¥ç”¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T12:04:39.000Z" title="Thu Nov 27 2025 12:04:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±å‘¨å¤©æ„åŒå­¦åŸåˆ›ã€‚</p>
<p>ä¸€èˆ¬çš„å¤šäººåä½œä¸šåŠ¡éœ€æ±‚ä¸€èˆ¬æ˜¯é’ˆå¯¹æ–‡æ¡£ï¼Œè¡¨æ ¼æˆ–è€…æ˜¯åˆ¶å›¾ä¹‹ç±»çš„ï¼Œåœºæ™¯æ¯”è¾ƒç®€å•ï¼ŒååŒæ“ä½œçš„å¯¹è±¡ä¸ºæ–‡å­—æˆ–è€…å›¾ç‰‡ï¼Œå¯¹è±¡æ¯”è¾ƒå•ä¸€ã€‚
ä¹ä¸€çœ‹ä½ä»£ç çš„å¤šäººåä½œçœ‹ä¼¼æ— ä»ä¸‹æ‰‹ï¼Œå› ä¸ºä½ä»£ç ä¸ä»…æ¶‰åŠåˆ°é¡µé¢ canvas ä¸­ä¸€äº›æ–‡å­—å±æ€§çš„åŒæ­¥ï¼Œè¿˜æ¶‰åŠåˆ°<strong>ç»„ä»¶æ‹–æ‹½ï¼Œæ ·å¼ï¼Œç»‘å®šäº‹ä»¶ï¼Œé«˜çº§å±æ€§ï¼Œç”šè‡³æ˜¯ä»£ç ååŒç¼–è¾‘</strong>çš„ç¼–è¾‘ä¸åŒæ­¥ã€‚é‚£æˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨ä½ä»£ç è¿™ä¸ªåœºæ™¯ä¸‹å®ç°å¤šäººååŒç¼–è¾‘çš„å‘¢ã€‚</p>
<h2 data-id="heading-0">TinyEngineä½ä»£ç å¼•æ“å¤šäººååŒæŠ€æœ¯è¯¦è§£</h2>
<h3 data-id="heading-1">CRDT</h3>
<p>æˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»ä¸€ä¸‹å®ç°ä½ä»£ç ç¼–è¾‘çš„ååŒç¼–è¾‘çš„åº•å±‚é€»è¾‘ â€”â€” CRDTï¼ˆConflict-free Replicated Data Typeï¼Œæ— å†²çªå¤åˆ¶æ•°æ®ç±»å‹ï¼‰æ˜¯ä¸€ç§<strong>å…è®¸å¹¶å‘ä¿®æ”¹ã€è‡ªåŠ¨åˆå¹¶ä¸”æ°¸ä¸å†²çªçš„æ•°æ®ç»“æ„</strong>ã€‚
å³ä½¿å¤šä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘åŒä¸€ä»½æ–‡æ¡£ã€è¡¨æ ¼æˆ–å›¾å½¢ï¼Œç³»ç»Ÿä¹Ÿèƒ½åœ¨ä¹‹åè‡ªåŠ¨åˆå¹¶å‡ºä¸€è‡´çš„ç»“æœï¼Œ<strong>ä¸éœ€è¦â€œé”â€æˆ–â€œäººå·¥è§£å†³å†²çªâ€</strong>ã€‚</p>
<h4 data-id="heading-2">ä¸€ä¸ªä¾‹å­</h4>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåä½œæ–‡æœ¬ç¼–è¾‘å™¨æœ‰ä¸¤ä¸ªç”¨æˆ·ï¼š
A	æ’å…¥â€œHello â€
B	æ’å…¥â€œWorld!â€</p>
<p>åœ¨æ™®é€šç³»ç»Ÿä¸­ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œå‡ ä¹åŒæ—¶å‘ç”Ÿï¼Œå¯èƒ½å¯¼è‡´å†²çªï¼ˆæ¯”å¦‚ï¼šè°çš„æ”¹åŠ¨ç®—æ•°ï¼Ÿï¼‰ã€‚ä½†åœ¨ CRDT æ¨¡å‹ä¸‹ï¼Œæ¯ä¸ªæ“ä½œéƒ½æ˜¯å¯åˆå¹¶çš„ï¼šç³»ç»Ÿä¼šåŸºäºæ“ä½œçš„é€»è¾‘æ—¶é—´æˆ–å”¯ä¸€æ ‡è¯†ç¬¦è‡ªåŠ¨ç¡®å®šåˆå¹¶é¡ºåºï¼›æœ€ç»ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šæ”¶æ•›åˆ°ç›¸åŒçš„çŠ¶æ€ï¼Œæ¯”å¦‚ "Hello World!"ã€‚</p>
<h4 data-id="heading-3">CRDT çš„ä¸¤ç§ä¸»è¦ç±»å‹</h4>
<ol>
<li>
<p>State-basedï¼ˆçŠ¶æ€å‹ CRDTï¼‰
æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤å®Œæ•´çš„çŠ¶æ€å‰¯æœ¬ï¼Œå¹¶å®šæœŸå°†çŠ¶æ€åˆå¹¶ï¼š
local_state = merge(local_state, remote_state)</p>
</li>
<li>
<p>Operation-basedï¼ˆæ“ä½œå‹ CRDTï¼‰
æ¯ä¸ªèŠ‚ç‚¹åªä¼ æ’­â€œæ“ä½œâ€ï¼Œæ¯”å¦‚â€œåŠ 1â€â€œæ’å…¥å­—ç¬¦Xâ€ï¼Œ
å…¶ä»–èŠ‚ç‚¹æŒ‰ç›¸åŒé€»è¾‘æ‰§è¡Œè¯¥æ“ä½œã€‚</p>
</li>
</ol>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ <strong>æ“ä½œå‹ CRDTï¼ˆOperation-based CRDTï¼‰åº“ Yjs</strong>ã€‚
åœ¨ Yjs ä¸­ï¼Œæ¯ä¸ªååŒæ–‡æ¡£å¯¹åº”ä¸€ä¸ª<strong>æ ¹å¯¹è±¡ Y.Doc</strong>ï¼Œå®ƒå¯ä»¥åŒ…å«å¤šç§å¯ååŒçš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ <strong>Y.Arrayã€Y.Mapã€Y.Text</strong> ç­‰ã€‚<strong>æ¯ä¸ªå®¢æˆ·ç«¯éƒ½ç»´æŠ¤ä¸€ä»½æœ¬åœ°çš„ Y.Doc å‰¯æœ¬</strong>ï¼Œè¿™äº›å‰¯æœ¬é€šè¿‡ Yjs çš„åŒæ­¥æœºåˆ¶ä¿æŒä¸€è‡´ã€‚
å½“å¤šä¸ªå®¢æˆ·ç«¯é€šè¿‡ y-websocket provider è¿æ¥åˆ°åŒä¸€ä¸ªæˆ¿é—´ï¼ˆroomï¼‰æ—¶ï¼Œå®ƒä»¬ä¼šå…±äº«ç›¸åŒçš„æ–‡æ¡£æ•°æ®ã€‚<strong>ä»»ä½•å®¢æˆ·ç«¯å¯¹æ–‡æ¡£çš„ä¿®æ”¹ï¼ˆå¦‚æ’å…¥ã€åˆ é™¤ã€æ›´æ–°ï¼‰éƒ½ä¼šè¢«ç¼–ç ä¸ºæ“ä½œï¼ˆoperationï¼‰</strong>ï¼Œå¹¶å¹¿æ’­åˆ°å…¶ä»–å®¢æˆ·ç«¯ï¼Œä»è€Œå®ç°å®æ—¶çš„æ•°æ®åŒæ­¥ã€‚</p>
<h3 data-id="heading-4">ä»æ•°æ®ç»“æ„åˆ°ååŒæ¨¡å‹ï¼štiny-engine çš„é¡µé¢ Schema ä¸ Yjs çš„ç»“åˆ</h3>
<p>é€šè¿‡å‰é¢çš„è®¨è®ºæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ— è®ºæ˜¯å“ªä¸€ç§ç±»å‹çš„ <strong>CRDTï¼ˆConflict-free Replicated Data Typeï¼‰</strong>ï¼Œå…¶æ ¸å¿ƒéƒ½ç¦»ä¸å¼€ä¸€ä¸ª<strong>å¥å…¨ä¸”å®Œå¤‡çš„æ•°æ®ç»“æ„</strong>ã€‚
å¯¹äºæˆ‘ä»¬çš„ <strong>tiny-engine</strong> æ¥è¯´ï¼Œä½ä»£ç é¡µé¢æœ¬èº«ä¹Ÿæ˜¯ç”±ä¸€å¥—ç»“æ„åŒ–çš„æ•°æ®æ‰€æè¿°çš„ã€‚
è¿™å¥—æ•°æ®ç»“æ„ä¸ä»…è¦æ”¯æŒé¡µé¢çš„å±‚çº§å…³ç³»ï¼ˆå¦‚åŒºå—ã€ç»„ä»¶ã€æ’æ§½ï¼‰ï¼Œè¿˜è¦èƒ½å¤Ÿè¡¨è¾¾é¡µé¢çš„åŠ¨æ€é€»è¾‘ï¼ˆå¦‚å¾ªç¯ã€æ¡ä»¶ã€ç”Ÿå‘½å‘¨æœŸã€æ•°æ®æºç­‰ï¼‰ã€‚</p>
<p>åœ¨ tiny-engine ä¸­ï¼Œé¡µé¢çš„åŸºç¡€ç»“æ„å¯ä»¥æŠ½è±¡ä¸ºä»¥ä¸‹ä¸¤ä¸ª TypeScript æ¥å£ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// èŠ‚ç‚¹ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Node</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">componentName</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; &amp; { columns?: { slots?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; }[] }
  children?: <span class="hljs-title class_">Node</span>[]
  componentType?: <span class="hljs-string">'Block'</span> | <span class="hljs-string">'PageStart'</span> | <span class="hljs-string">'PageSection'</span>
  slot?: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  params?: <span class="hljs-built_in">string</span>[]
  loop?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  loopArgs?: <span class="hljs-built_in">string</span>[]
  condition?: <span class="hljs-built_in">boolean</span> | <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
}
  
<span class="hljs-comment">// æ ¹èŠ‚ç‚¹ç±»å‹ï¼Œå³é¡µé¢ Schema</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">RootNode</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">Node</span>, <span class="hljs-string">'id'</span>&gt; &amp; {
  id?: <span class="hljs-built_in">string</span>
  css?: <span class="hljs-built_in">string</span>
  fileName?: <span class="hljs-built_in">string</span>
  methods?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  state?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  lifeCycles?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;
  dataSource?: <span class="hljs-built_in">any</span>
  bridge?: <span class="hljs-built_in">any</span>
  inputs?: <span class="hljs-built_in">any</span>[]
  outputs?: <span class="hljs-built_in">any</span>[]
  schema?: <span class="hljs-built_in">any</span>
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š</p>
<ul>
<li><strong>Node</strong> ä»£è¡¨é¡µé¢ä¸­çš„ä¸€ä¸ªé€šç”¨ç»„ä»¶èŠ‚ç‚¹ï¼›</li>
<li><strong>RootNode</strong> åˆ™æ˜¯æ•´ä¸ªé¡µé¢çš„æ ¹èŠ‚ç‚¹ï¼ˆSchemaï¼‰ï¼Œåœ¨ Node çš„åŸºç¡€ä¸Šæ‰©å±•äº†é¡µé¢çº§çš„å±æ€§ï¼Œå¦‚ <code>state</code>ã€<code>methods</code>ã€<code>lifeCycles</code> ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-5">ä»æ•°æ®ç»“æ„åˆ°ååŒå¯¹è±¡</h3>
<p>åœ¨ä½¿ç”¨ <strong>CRDTï¼ˆè¿™é‡Œæ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fyjs.dev%2F" target="_blank" title="https://yjs.dev/" ref="nofollow noopener noreferrer">Yjs</a>ï¼‰</strong> è¿›è¡Œå®æ—¶åä½œæ—¶ï¼Œæˆ‘ä»¬çš„â€œåä½œå•å…ƒâ€å°±æ˜¯ä¸Šè¿°çš„è¿™ç±»æ•°æ®ç»“æ„ã€‚æ¢å¥è¯è¯´ï¼ŒYjs éœ€è¦åœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä»½ä¸ <code>RootNode</code> å¯¹åº”çš„å…±äº«çŠ¶æ€å‰¯æœ¬ã€‚</p>
<p>ç„¶è€Œï¼ŒYjs å¹¶ä¸èƒ½ç›´æ¥ç†è§£å¤æ‚çš„ TypeScript å¯¹è±¡ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶<strong>è½¬åŒ–ä¸º Yjs èƒ½å¤Ÿè¯†åˆ«å’ŒåŒæ­¥çš„ç±»å‹ç³»ç»Ÿ</strong>ã€‚
ä¾‹å¦‚ï¼š</p>
<ul>
<li>æ™®é€šå¯¹è±¡ â†’ <code>Y.Map</code></li>
<li>æ•°ç»„ â†’ <code>Y.Array</code></li>
<li>å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ â†’ <code>Y.Text</code> / åŸºæœ¬ç±»å‹</li>
<li>åµŒå¥—ç»“æ„ï¼ˆå¦‚ childrenï¼‰åˆ™éœ€è¦é€’å½’åœ°è½¬åŒ–ä¸ºåµŒå¥—çš„ Y ç±»å‹ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å·¥ä½œæ˜¯ï¼š</p>
<blockquote>
<p>æ ¹æ®å·²æœ‰çš„ <code>Node</code> å’Œ <code>RootNode</code> æ•°æ®ç»“æ„ï¼Œå°†å…¶æ˜ å°„ä¸ºç­‰ä»·çš„ Yjs ç±»å‹ï¼ˆå¦‚ Y.Mapã€Y.Array ç­‰ï¼‰ã€‚</p>
</blockquote>
<p>è¿™ä¸€è¿‡ç¨‹å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªé€šç”¨çš„ â€œschema â†’ YDocâ€ è½¬æ¢å‡½æ•°ã€‚é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">UNDEFINED_PLACEHOLDER</span> = <span class="hljs-string">'__undefined__'</span>
  
<span class="hljs-comment">/**
 * å°†æ™®é€šå¯¹è±¡/æ•°ç»„é€’å½’è½¬æ¢æˆ Yjs å¯¹è±¡
 * <span class="hljs-doctag">@param</span> target Y.Map æˆ– Y.Array
 * <span class="hljs-doctag">@param</span> obj è¦è½¬æ¢çš„å¯¹è±¡
 */</span>
<span class="hljs-comment">// toYjs å‡½æ•°ä¼˜åŒ–åçš„ç‰ˆæœ¬</span>
  
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">toYjs</span>(<span class="hljs-params">target: Y.<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">any</span>&gt; | Y.<span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">any</span>&gt;, obj: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj)) {
    <span class="hljs-keyword">if</span> (!(target <span class="hljs-keyword">instanceof</span> Y.<span class="hljs-property">Array</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Expected Y.Array as target for array input'</span>)
    }
    obj.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (item === <span class="hljs-literal">undefined</span>) {
        target.<span class="hljs-title function_">push</span>([<span class="hljs-variable constant_">UNDEFINED_PLACEHOLDER</span>])
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (item === <span class="hljs-literal">null</span>) {
        target.<span class="hljs-title function_">push</span>([<span class="hljs-literal">null</span>])
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(item)) {
        <span class="hljs-keyword">const</span> childArr = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Array</span>()
        <span class="hljs-title function_">toYjs</span>(childArr, item)
        target.<span class="hljs-title function_">push</span>([childArr])
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'object'</span> &amp;&amp; item !== <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ˜ç¡®æ’é™¤ null</span>
        <span class="hljs-keyword">const</span> childMap = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Map</span>()
        <span class="hljs-title function_">toYjs</span>(childMap, item)
        target.<span class="hljs-title function_">push</span>([childMap])
      } <span class="hljs-keyword">else</span> {
        target.<span class="hljs-title function_">push</span>([item])
      }
    })
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span> &amp;&amp; obj !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (!(target <span class="hljs-keyword">instanceof</span> Y.<span class="hljs-property">Map</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Expected Y.Map as target for object input'</span>)
    }
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, val]</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">undefined</span>) {
        target.<span class="hljs-title function_">set</span>(key, <span class="hljs-variable constant_">UNDEFINED_PLACEHOLDER</span>)
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val === <span class="hljs-literal">null</span>) {
        target.<span class="hljs-title function_">set</span>(key, <span class="hljs-literal">null</span>)
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
        <span class="hljs-keyword">const</span> yArr = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Array</span>()
        target.<span class="hljs-title function_">set</span>(key, yArr)
        <span class="hljs-title function_">toYjs</span>(yArr, val)
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'object'</span> &amp;&amp; val !== <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ˜ç¡®æ’é™¤ null</span>
        <span class="hljs-keyword">const</span> yMap = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Map</span>()
        target.<span class="hljs-title function_">set</span>(key, yMap)
        <span class="hljs-title function_">toYjs</span>(yMap, val)
      } <span class="hljs-keyword">else</span> {
        target.<span class="hljs-title function_">set</span>(key, val)
      }
    })
  }
  <span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœ obj ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼ˆå¦‚ string, numberï¼‰ï¼Œå‡½æ•°å°†é™é»˜åœ°ä¸åšä»»ä½•äº‹ã€‚è¿™æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</span>
}
  
<span class="hljs-comment">// å°† Yjs Map è½¬å›æ™®é€šå¯¹è±¡ï¼ˆé€’å½’ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fromYjs</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">any</span> {
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Y.<span class="hljs-property">Map</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: <span class="hljs-built_in">any</span> = {}
    value.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">v, k</span>) =&gt;</span> {
      obj[k] = <span class="hljs-title function_">fromYjs</span>(v)
    })
    <span class="hljs-keyword">return</span> obj
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Y.<span class="hljs-property">Array</span>) {
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">toArray</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-title function_">fromYjs</span>(item))
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Y.<span class="hljs-property">Text</span>) {
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">toString</span>()
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value === <span class="hljs-variable constant_">UNDEFINED_PLACEHOLDER</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span> <span class="hljs-comment">// è¿˜åŸ undefined</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> value
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬é€šè¿‡ Yjs å¯¹è¿™äº› Y ç±»å‹è¿›è¡Œä¿®æ”¹ï¼ˆä¾‹å¦‚ä¿®æ”¹ propsã€æ’å…¥/åˆ é™¤ childrenã€æ›´æ–° stateï¼‰ï¼ŒYjs å°±ä¼šè‡ªåŠ¨ç»´æŠ¤ CRDT å†²çªåˆå¹¶é€»è¾‘ï¼Œå¹¶å°†å˜æ›´åŒæ­¥åˆ°æ‰€æœ‰åä½œå®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-6">ç›‘å¬æœºåˆ¶å®ç° â€”â€” ä» Yjs å˜æ›´åˆ°å¤šäººååŒè§†å›¾æ›´æ–°</h3>
<p>å‰é¢çš„æ­¥éª¤æˆåŠŸè®©æˆ‘ä»¬å€ŸåŠ© <strong>Yjs</strong> å®ç°äº†æ•°æ®å±‚é¢çš„å®æ—¶åŒæ­¥ï¼š
æ— è®ºæ˜¯å“ªä½åä½œè€…ä¿®æ”¹äº†é¡µé¢ä¸­çš„æŸä¸ªèŠ‚ç‚¹ã€å±æ€§æˆ–å±‚çº§ç»“æ„ï¼Œè¿™äº›å˜æ›´éƒ½èƒ½è¢«åŒæ­¥ä¼ æ’­åˆ°æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œä»…ä»…è®©æ•°æ®â€œåŒæ­¥â€è¿˜ä¸å¤Ÿã€‚
åœ¨ <strong>tiny-engine</strong> ä¸­ï¼Œé¡µé¢æ¸²æŸ“ä¸ç¼–è¾‘çš„æ ¸å¿ƒçŠ¶æ€ä»ç„¶ä¾èµ–äºæœ¬åœ°çš„ <strong>Schema</strong>ï¼ˆå³ <code>RootNode</code> å’Œ <code>Node</code> çš„ç»“æ„æ ‘ï¼‰ã€‚
æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p>Yjs è´Ÿè´£ç»´æŠ¤åä½œçš„å…±äº«çŠ¶æ€ï¼Œä½†é¡µé¢çš„å®é™…æ¸²æŸ“ä¸äº¤äº’ä»æ˜¯åŸºäºæœ¬åœ°å†…å­˜ä¸­çš„ Schemaã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å»ºç«‹ä¸€å¥—ç›‘å¬æœºåˆ¶ï¼Œè®© Yjs çš„å˜æ›´<strong>èƒ½å¤Ÿé©±åŠ¨ Schema ä¸è§†å›¾çš„æ›´æ–°</strong>ï¼Œå½¢æˆå¦‚ä¸‹çš„å®Œæ•´åŒæ­¥é“¾è·¯ï¼š</p>
<pre><code class="hljs">Yjs æ•°æ®å˜åŒ– â†’ æ›´æ–°æœ¬åœ° Schema â†’ è§¦å‘æ¸²æŸ“å¼•æ“åˆ·æ–°è§†å›¾
</code></pre>
<p>éå¸¸å¥½ ğŸ‘ï¼Œä½ è¿™é‡Œå®é™…ä¸Šå¼•å‡ºäº†å¤šäººååŒä¸­æœ€å…³é”®çš„ä¸€ä¸ªè®¾è®¡ç‚¹â€”â€”<strong>â€œæ“ä½œæ„å›¾å±‚â€å’Œâ€œæ•°æ®å±‚â€çš„è§£è€¦â€</strong>ã€‚
ä½ çš„æ€è·¯å·²ç»éå¸¸æ­£ç¡®ï¼šç”¨äº‹ä»¶æ€»çº¿å¤„ç†ç»“æ„æ€§å˜æ›´ï¼ˆå¦‚èŠ‚ç‚¹æ’å…¥/åˆ é™¤ï¼‰ï¼Œç”¨ meta å…ƒæ•°æ®è¿½è¸ªå±æ€§å˜æ›´ã€‚ä¸‹é¢æˆ‘å¸®ä½ æŠŠè¿™ä¸€èŠ‚å†…å®¹å®Œæ•´ã€ç³»ç»Ÿåœ°æ‰©å†™æˆæŠ€æœ¯åšå®¢é£æ ¼ï¼ŒåŒæ—¶ä¿ç•™ä½ çš„åŸå§‹è¯­ä¹‰ä¸å·¥ç¨‹æ„Ÿã€‚ğŸ‘‡</p>
<h4 data-id="heading-7">å®ç°æ€è·¯ï¼šYjs observe æœºåˆ¶</h4>
<p>Yjs ä¸ºæˆ‘ä»¬æä¾›äº†éå¸¸å¼ºå¤§çš„å˜æ›´ç›‘å¬æœºåˆ¶ï¼š</p>
<ul>
<li><strong><code>observe</code></strong>ï¼šç›‘å¬å•ä¸ª <code>Y.Map</code> æˆ– <code>Y.Array</code> çš„å˜æ›´ï¼›</li>
<li><strong><code>observeDeep</code></strong>ï¼šé€’å½’ç›‘å¬æ•´ä¸ªæ–‡æ¡£ä¸­çš„æ‰€æœ‰åµŒå¥—ç»“æ„ï¼ˆå¸¸ç”¨äºå¤æ‚ Schemaï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡è¿™äº›ç›‘å¬å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ•è·åˆ°æ‰€æœ‰èŠ‚ç‚¹å±‚é¢çš„å¢åˆ æ”¹äº‹ä»¶ï¼ˆåŒ…æ‹¬ propsã€children ç­‰ï¼‰ï¼Œç„¶åå°†è¿™äº›å˜åŒ–<strong>åŒæ­¥å›æœ¬åœ° Schema</strong>ã€‚</p>
<h4 data-id="heading-8">é—®é¢˜ï¼šç»“æ„æ€§æ“ä½œç¼ºä¹è¯­ä¹‰ä¿¡æ¯</h4>
<p>åœ¨ç†è®ºä¸Šï¼Œ<code>observe</code> èƒ½å‘Šè¯‰æˆ‘ä»¬ã€Œæœ‰èŠ‚ç‚¹è¢«æ’å…¥ã€ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œè¿™ä¸ªä¿¡æ¯è¿œè¿œä¸å¤Ÿã€‚</p>
<p>ä»¥èŠ‚ç‚¹æ’å…¥ä¸ºä¾‹ï¼Œtiny-engine ä¸­çš„æ’å…¥å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">insertAfter</span> = (<span class="hljs-params">{ parent, node, data }: InsertOptions</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">id</span>) {
    data.<span class="hljs-property">id</span> = utils.<span class="hljs-title function_">guid</span>()
  }
  
  <span class="hljs-title function_">useCanvas</span>().<span class="hljs-title function_">operateNode</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>,
    <span class="hljs-attr">parentId</span>: parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>,
    <span class="hljs-attr">newNodeData</span>: data,
    <span class="hljs-attr">position</span>: <span class="hljs-string">'after'</span>,
    <span class="hljs-attr">referTargetNodeId</span>: node.<span class="hljs-property">id</span>
  })
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹</strong>ä¸ä»…ä»…æ˜¯å‘ children æ•°ç»„ä¸­å¤š push ä¸€ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯ä¾èµ–ä¸€ç³»åˆ—ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š</p>
<ul>
<li>æ’å…¥åˆ°å“ªä¸ªçˆ¶èŠ‚ç‚¹ï¼ˆ<code>parentId</code>ï¼‰ï¼›</li>
<li>ç›¸å¯¹å“ªä¸ªå‚è€ƒèŠ‚ç‚¹ï¼ˆ<code>referTargetNodeId</code>ï¼‰ï¼›</li>
<li>æ’å…¥ä½ç½®ï¼ˆ<code>position</code>ï¼šbefore/after/append ç­‰ï¼‰ï¼›</li>
</ul>
<p>ä½†æ˜¯åœ¨ Yjs çš„åº•å±‚ç»“æ„ä¸­ï¼Œè¿™äº›ä¸Šä¸‹æ–‡ä¿¡æ¯åœ¨åŒæ­¥æ—¶éƒ½ä¼š<strong>ä¸¢å¤±</strong>ã€‚
æˆ‘ä»¬åªä¼šæ”¶åˆ°ä¸€æ¡ â€œ<code>children</code> æ•°ç»„æ–°å¢äº†ä¸€ä¸ªå…ƒç´ â€ çš„äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">event.<span class="hljs-property">changes</span>.<span class="hljs-property">added</span> <span class="hljs-comment">// =&gt; [Y.Map({ id: 'new-node-id', ... })]</span>
</code></pre>
<p>è¿™æ—¶æˆ‘ä»¬æ— æ³•æ¨æ–­å‡ºèŠ‚ç‚¹æ˜¯â€œå¦‚ä½•æ’å…¥â€çš„ï¼Œä¹Ÿå°±æ— æ³•è¿˜åŸç¼–è¾‘å™¨å±‚é¢çš„çœŸå®æ“ä½œã€‚
æ¢å¥è¯è¯´ï¼Œ<strong>Yjs æä¾›äº†æ•°æ®å˜åŒ–çš„ç»“æœï¼Œä½†æˆ‘ä»¬éœ€è¦çš„æ˜¯æ“ä½œçš„æ„å›¾</strong>ã€‚</p>
<h4 data-id="heading-9">è§£å†³æ–¹æ¡ˆï¼šäº‹ä»¶æ€»çº¿ + meta å…ƒæ•°æ®</h4>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨æ¶æ„ä¸­å¼•å…¥äº†ä¸¤ä¸ªå…³é”®æœºåˆ¶ï¼š</p>




















<table><thead><tr><th>æœºåˆ¶</th><th>ä¸»è¦è´Ÿè´£</th><th>ä½œç”¨èŒƒå›´</th></tr></thead><tbody><tr><td><strong>äº‹ä»¶æ€»çº¿ï¼ˆEvent Busï¼‰</strong></td><td>ä¼ æ’­èŠ‚ç‚¹çº§æ“ä½œçš„è¯­ä¹‰ï¼Œå¦‚æ–°å¢ã€åˆ é™¤ã€ç§»åŠ¨ç­‰</td><td>ç»“æ„æ€§æ“ä½œ</td></tr><tr><td><strong>Meta å…ƒæ•°æ®ï¼ˆMetadataï¼‰</strong></td><td>æè¿°èŠ‚ç‚¹å±æ€§ã€çŠ¶æ€ç­‰ç»†ç²’åº¦å˜åŒ–</td><td>å±æ€§çº§æ“ä½œ</td></tr></tbody></table>
<h4 data-id="heading-10">1. äº‹ä»¶æ€»çº¿ï¼šåŒæ­¥æ“ä½œæ„å›¾</h4>
<p>äº‹ä»¶æ€»çº¿çš„è®¾è®¡ç›®æ ‡æ˜¯è®©æ¯ä¸€ä¸ªâ€œå¯å¤ç°çš„æ“ä½œâ€éƒ½èƒ½ä»¥äº‹ä»¶çš„å½¢å¼ä¼ æ’­åˆ°åä½œå±‚ä¸­ã€‚</p>
<p>æˆ‘ä»¬ä¼šåœ¨ Yjs æ–‡æ¡£ä¸­ä¸“é—¨åˆ›å»ºä¸€ä¸ª <strong><code>__app_events__</code></strong> é€šé“ï¼Œç”¨äºé€šä¿¡ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åˆ›å»ºäº‹ä»¶é€šé“</span>
<span class="hljs-keyword">const</span> eventsMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">yDoc</span>.<span class="hljs-title function_">getMap</span>(<span class="hljs-string">'__app_events__'</span>)
  
<span class="hljs-comment">// å¼€å¯äº‹åŠ¡ä¿è¯åŸå­æ€§</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">yDoc</span>.<span class="hljs-title function_">transact</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè®¾ç½®è½¯åˆ é™¤æ ‡å¿—ï¼Œé˜²æ­¢å¹½çµäº‹ä»¶</span>
  targetNode.<span class="hljs-title function_">set</span>(<span class="hljs-string">'_node_deleted'</span>, <span class="hljs-literal">true</span>)
  
  <span class="hljs-comment">// è·å–äº‹ä»¶æ€»çº¿</span>
  <span class="hljs-keyword">const</span> eventsMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">yDoc</span>.<span class="hljs-title function_">getMap</span>(<span class="hljs-string">'__app_events__'</span>)
  
  <span class="hljs-comment">// å‡†å¤‡äº‹ä»¶è´Ÿè½½</span>
  <span class="hljs-keyword">const</span> eventPayload = {
    <span class="hljs-attr">op</span>: <span class="hljs-string">'delete'</span>,
    <span class="hljs-attr">deletedNodeId</span>: id,
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¯ä»¥åœ¨è´Ÿè½½ä¸­åŒ…å«è¢«åˆ é™¤å‰çš„æ•°æ®ï¼Œä¾¿äºè¿œç¨‹å®¢æˆ·ç«¯åšä¸€äº›é«˜çº§å¤„ç†ï¼ˆå¦‚ "æ¢å¤" åŠŸèƒ½ï¼‰</span>
    previousNodeData,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  }
  
  <span class="hljs-comment">// ä½¿ç”¨å”¯ä¸€ ID å‘å¸ƒäº‹ä»¶</span>
  <span class="hljs-keyword">const</span> eventId = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substring(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>
  eventsMap.<span class="hljs-title function_">set</span>(eventId, eventPayload)
}, <span class="hljs-string">'local-delete-operation'</span>)
</code></pre>
<p><strong>ç›‘å¬å™¨è®¾è®¡</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„ç›‘å¬å™¨æ¥å¤„ç†æ¥è‡ªâ€œäº‹ä»¶æ€»çº¿â€çš„è‡ªå®šä¹‰æ“ä½œ</span>
<span class="hljs-comment">// å¤„ç†æ— æ³•è¢« initObserver ç›‘å¬å™¨å¾ˆå¥½å¤„ç†çš„äº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">setupEventListeners</span>(<span class="hljs-attr">docName</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-comment">// è§£ç»‘æ—§çš„ç›‘å¬å™¨ï¼Œé˜²æ­¢é‡å¤</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">has</span>(docName)) {
    <span class="hljs-keyword">const</span> { map, cb } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(docName)
    map.<span class="hljs-title function_">unobserve</span>(cb)
  }
  
  <span class="hljs-keyword">const</span> docManager = <span class="hljs-title class_">DocManager</span>.<span class="hljs-title function_">getInstance</span>()
  <span class="hljs-keyword">const</span> ydoc = docManager.<span class="hljs-title function_">getOrCreateDoc</span>(docName)
  <span class="hljs-keyword">const</span> eventsMap = ydoc.<span class="hljs-title function_">getMap</span>(<span class="hljs-string">'__app_events__'</span>)
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">eventCallback</span> = (<span class="hljs-params">event: Y.YMapEvent&lt;<span class="hljs-built_in">any</span>&gt;, transaction: Y.Transaction</span>) =&gt; {
    <span class="hljs-keyword">if</span> (transaction.<span class="hljs-property">local</span>) <span class="hljs-keyword">return</span>
  
    event.<span class="hljs-property">changes</span>.<span class="hljs-property">keys</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">change, key</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (change.<span class="hljs-property">action</span> === <span class="hljs-string">'add'</span>) {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">payload</span>: <span class="hljs-built_in">any</span> = eventsMap.<span class="hljs-title function_">get</span>(key)
  
        <span class="hljs-keyword">if</span> (payload &amp;&amp; payload.<span class="hljs-property">op</span> === <span class="hljs-string">'move'</span>) {
          <span class="hljs-keyword">const</span> <span class="hljs-attr">patch</span>: <span class="hljs-title class_">DiffPatch</span> = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'array-swap'</span>,
            <span class="hljs-attr">parentId</span>: payload.<span class="hljs-property">parentId</span>,
            <span class="hljs-attr">schemaId</span>: payload.<span class="hljs-property">schemaId</span>,
            <span class="hljs-attr">swapId</span>: payload.<span class="hljs-property">swapId</span>
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyPatches</span>(docName, [patch])
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (payload &amp;&amp; payload.<span class="hljs-property">op</span> === <span class="hljs-string">'insert'</span>) {
          <span class="hljs-keyword">const</span> <span class="hljs-attr">patch</span>: <span class="hljs-title class_">DiffPatch</span> = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'array-insert'</span>,
            <span class="hljs-attr">parentId</span>: payload.<span class="hljs-property">parentId</span>,
            <span class="hljs-attr">newNodeData</span>: payload.<span class="hljs-property">newNodeData</span>,
            <span class="hljs-attr">position</span>: payload.<span class="hljs-property">position</span>,
            <span class="hljs-attr">referTargetNodeId</span>: payload.<span class="hljs-property">referTargetNodeId</span>
          }
  
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyPatches</span>(docName, [patch])
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (payload &amp;&amp; payload.<span class="hljs-property">op</span> === <span class="hljs-string">'delete'</span>) {
          <span class="hljs-keyword">const</span> <span class="hljs-attr">patch</span>: <span class="hljs-title class_">DiffPatch</span> = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'array-delete'</span>,
            <span class="hljs-attr">deletedId</span>: payload.<span class="hljs-property">deletedNodeId</span>,
            <span class="hljs-attr">previousNodeData</span>: payload.<span class="hljs-property">previousNodeData</span>
          }
  
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyPatches</span>(docName, [patch])
        }
      }
  
      eventsMap.<span class="hljs-title function_">delete</span>(key)
    })
  }
  
  <span class="hljs-comment">// ç»‘å®šç›‘å¬å™¨</span>
  eventsMap.<span class="hljs-title function_">observe</span>(eventCallback)
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">set</span>(docName, { <span class="hljs-attr">map</span>: eventsMap, <span class="hljs-attr">cb</span>: eventCallback })
}
</code></pre>
<p>è¿™æ ·ï¼Œæ¯å½“ä¸€ä¸ªç”¨æˆ·åœ¨æœ¬åœ°æ‰§è¡ŒèŠ‚ç‚¹æ’å…¥æˆ–åˆ é™¤æ“ä½œæ—¶ï¼š</p>
<p>a. ç¼–è¾‘å™¨ä¼šå‘äº‹ä»¶æ€»çº¿å‘é€ä¸€æ¡â€œæ“ä½œæ„å›¾â€ï¼›
b. è¯¥äº‹ä»¶ä¼šè¢«åŒæ­¥åˆ° Yjs çš„ <code>__app_events__</code>ï¼›
c. æ‰€æœ‰åä½œè€…å®¢æˆ·ç«¯çš„ç›‘å¬å™¨æ”¶åˆ°äº‹ä»¶åï¼Œè°ƒç”¨ <code>operateNode</code> é‡æ”¾æ“ä½œï¼›
d. ä»è€Œä¿æŒé€»è¾‘ä¸€è‡´æ€§ä¸ç»“æ„åŒæ­¥ã€‚</p>
<p>è¿™ç§åšæ³•æœ¬è´¨ä¸Šæ˜¯ <strong>â€œYjs åŒæ­¥ç»“æœ + EventBus åŒæ­¥è¯­ä¹‰â€</strong> çš„ç»“åˆã€‚</p>
<h4 data-id="heading-11">2. Meta å…ƒæ•°æ®ï¼šè¿½è¸ªèŠ‚ç‚¹å±æ€§å˜åŒ–</h4>
<p>è€Œå¯¹äºèŠ‚ç‚¹å±æ€§ï¼ˆå¦‚ <code>props</code>ã€<code>style</code>ã€<code>loop</code>ã€<code>condition</code> ç­‰ï¼‰è€Œè¨€ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åŒæ­¥æ“ä½œæ„å›¾ï¼Œåªéœ€åŒæ­¥æœ€ç»ˆç»“æœå³å¯ã€‚
å› æ­¤æˆ‘ä»¬åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ Yjs è¡¨ç¤ºä¸­å¢åŠ ä¸€ä»½ <strong>meta å…ƒæ•°æ®</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> yNode = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Map</span>()
yNode.<span class="hljs-title function_">set</span>(<span class="hljs-string">'meta'</span>, <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Map</span>({
  <span class="hljs-attr">lastModifiedBy</span>: userId,
  <span class="hljs-attr">lastModifiedAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
  <span class="hljs-attr">changeType</span>: <span class="hljs-string">'props'</span>
}))
</code></pre>
<p>å½“å±æ€§å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬æ›´æ–°å¯¹åº”çš„ meta å­—æ®µï¼Œè¿™æ ·åä½œè€…å°±èƒ½çŸ¥é“ï¼š</p>
<ul>
<li>æ˜¯å“ªä¸ªç”¨æˆ·ä¿®æ”¹çš„ï¼›</li>
<li>ä¿®æ”¹äº†ä»€ä¹ˆéƒ¨åˆ†ï¼›</li>
<li>ä¿®æ”¹æ—¶é—´ç­‰ä¿¡æ¯ã€‚</li>
</ul>
<p>å¹¶é€šè¿‡ <code>observeDeep</code> è‡ªåŠ¨æ•è·å˜åŒ–ï¼Œå®ç°å±æ€§çº§åˆ«çš„å®æ—¶åŒæ­¥ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä¸‹ï¼Œç»“æ„æ“ä½œï¼ˆå¢åˆ èŠ‚ç‚¹ï¼‰å’Œå±æ€§æ“ä½œï¼ˆèŠ‚ç‚¹å†…éƒ¨æ›´æ–°ï¼‰å„å¸å…¶èŒï¼Œä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p>
<h4 data-id="heading-12">æ¶æ„å°ç»“</h4>
<p>é€šè¿‡äº‹ä»¶æ€»çº¿ä¸ meta å…ƒæ•°æ®çš„ç»“åˆï¼Œæˆ‘ä»¬å®ç°äº† Yjs ååŒç¼–è¾‘çš„å®Œæ•´é—­ç¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æ“ä½œ â†’ å‘å¸ƒäº‹ä»¶ï¼ˆEventBusï¼‰
<span class="hljs-code">          â†“
     åŒæ­¥åˆ° Yjs (__app_events__)
          â†“
     å…¶ä»–å®¢æˆ·ç«¯æ¥æ”¶ â†’ é‡æ”¾æ“ä½œ
          â†“
     Schema &amp; è§†å›¾æ›´æ–°
</span></code></pre>
<p>è€Œå¯¹äºå±æ€§æ›´æ–°çš„è·¯å¾„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ç¼–è¾‘å±æ€§ â†’ æ›´æ–°èŠ‚ç‚¹ meta + props
<span class="hljs-code">          â†“
     Yjs observeDeep ç›‘å¬åˆ°å˜åŒ–
          â†“
     åŒæ­¥åˆ°å…¶ä»–å®¢æˆ·ç«¯ â†’ æ›´æ–°æœ¬åœ° Schema
          â†“
     è§¦å‘è§†å›¾é‡ç»˜
</span></code></pre>
<p>è¿™ç§åˆ†å±‚æ¶æ„æ—¢ä¿æŒäº† <strong>Yjs çš„ä¸€è‡´æ€§ç‰¹æ€§</strong>ï¼Œåˆè¡¥ä¸Šäº†ååŒç¼–è¾‘ä¸­è‡³å…³é‡è¦çš„ <strong>æ“ä½œè¯­ä¹‰å±‚</strong>ï¼Œè®©å¤šäººå®æ—¶ååŒçœŸæ­£å…·å¤‡â€œäººç†è§£çš„ä¸Šä¸‹æ–‡é€»è¾‘â€ã€‚</p>
<p>éå¸¸å¥½ï¼Œè¿™ä¸€èŠ‚æ­£æ˜¯æ•´ä¸ª <strong>åå‘åŒæ­¥é“¾è·¯ï¼ˆSchema â†’ Yjsï¼‰</strong> çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚ä¸‹é¢æ˜¯ç»è¿‡æ¶¦è‰²å’Œæ‰©å±•åçš„å®Œæ•´åšå®¢å†…å®¹ç‰‡æ®µï¼Œå¯ä»¥ç›´æ¥ç”¨äºæŠ€æœ¯æ–‡æ¡£æˆ–åšå®¢æ–‡ç« ä¸­ğŸ‘‡</p>
<h3 data-id="heading-13">åå‘åŒæ­¥æœºåˆ¶ â€”â€” ä» Schema æ”¹åŠ¨æ›´æ–° Yjs</h3>
<p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†å¦‚ä½•é€šè¿‡ Yjs çš„å˜æ›´æ¥é©±åŠ¨æœ¬åœ° Schema çš„æ›´æ–°ï¼Œå®ç°äº†**â€œè¿œç«¯ â†’ æœ¬åœ°â€** çš„åŒæ­¥é€»è¾‘ã€‚
è€Œè¿™ä¸€èŠ‚è¦è®²çš„ï¼Œåˆ™æ˜¯åå‘è¿‡ç¨‹ï¼š<strong>å½“æœ¬åœ°ç”¨æˆ·æ“ä½œå¯¼è‡´ Schema å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å°†è¿™äº›å˜æ›´åŒæ­¥åˆ° Yjs æ–‡æ¡£ï¼Œä»è€Œå¹¿æ’­ç»™å…¶ä»–åä½œè€…ã€‚</strong></p>
<h4 data-id="heading-14">åŸºæœ¬æ€è·¯</h4>
<p>åå‘åŒæ­¥çš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š</p>
<blockquote>
<p>å½“æœ¬åœ° Vue å“åº”å¼çŠ¶æ€ï¼ˆSchemaï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ Vue Hook æ•è·åˆ°å˜æ›´ï¼Œå¹¶å°†è¿™äº›å˜æ›´åŒæ­¥åˆ° Yjs çš„å…±äº«ç»“æ„ä¸­ã€‚</p>
</blockquote>
<p>è¿™ä¸€æœºåˆ¶çš„å…³é”®åœ¨äºå¯¹ <strong>æ“ä½œæ„å›¾ï¼ˆOperation Intentï¼‰</strong> çš„æ•è·ï¼Œè€Œä¸æ˜¯å•çº¯åœ°å¯¹æ•°æ®å·®å¼‚åšæ¯”å¯¹ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨æ£€æµ‹â€œæ•°æ®å˜äº†å¤šå°‘â€ï¼Œè€Œæ˜¯åœ¨ç›‘å¬â€œç”¨æˆ·æ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œâ€â€”â€”æ¯”å¦‚æ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€ä¿®æ”¹å±æ€§ç­‰ã€‚</p>
<h4 data-id="heading-15">æ·»åŠ èŠ‚ç‚¹çš„ç¤ºä¾‹</h4>
<p>ä»¥â€œæ·»åŠ èŠ‚ç‚¹â€ä¸ºä¾‹ï¼Œå½“ç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­æ‰§è¡Œæ’å…¥æ“ä½œæ—¶ï¼Œå®é™…çš„ Schema æ”¹åŠ¨ä¼šé€šè¿‡ä»¥ä¸‹å‡½æ•°å®Œæˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">insertNode</span> = (<span class="hljs-params">
  node: { node: Node; parent: Node; data: Node },
  position: PositionType = POSITION.IN,
  select = <span class="hljs-literal">true</span>
</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">parent</span>) {
    <span class="hljs-title function_">insertInner</span>({ <span class="hljs-attr">node</span>: <span class="hljs-title function_">useCanvas</span>().<span class="hljs-property">pageState</span>.<span class="hljs-property">pageSchema</span>!, <span class="hljs-attr">data</span>: node.<span class="hljs-property">data</span> }, position)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">switch</span> (position) {
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">TOP</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">LEFT</span>:
        <span class="hljs-title function_">insertBefore</span>(node)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">BOTTOM</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">RIGHT</span>:
        <span class="hljs-title function_">insertAfter</span>(node)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">IN</span>:
        <span class="hljs-title function_">insertInner</span>(node)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">OUT</span>:
        <span class="hljs-title function_">insertContainer</span>(node)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">REPLACE</span>:
        <span class="hljs-title function_">insertReplace</span>(node)
        <span class="hljs-keyword">break</span>
      <span class="hljs-attr">default</span>:
        <span class="hljs-title function_">insertInner</span>(node)
        <span class="hljs-keyword">break</span>
    }
  }
  
  <span class="hljs-keyword">if</span> (select) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selectNode</span>(node.<span class="hljs-property">data</span>.<span class="hljs-property">id</span>))
  }
  
  <span class="hljs-title function_">getController</span>().<span class="hljs-title function_">addHistory</span>()
}
</code></pre>
<p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨ <code>insertBefore</code> å‡½æ•°çš„å®ç°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">insertBefore</span> = (<span class="hljs-params">{ parent, node, data }: InsertOptions</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">id</span>) {
    data.<span class="hljs-property">id</span> = utils.<span class="hljs-title function_">guid</span>()
  }
  
  <span class="hljs-comment">// æ›´æ–°æœ¬åœ° Schema</span>
  <span class="hljs-title function_">useCanvas</span>().<span class="hljs-title function_">operateNode</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>,
    <span class="hljs-attr">parentId</span>: parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>,
    <span class="hljs-attr">newNodeData</span>: data,
    <span class="hljs-attr">position</span>: <span class="hljs-string">'before'</span>,
    <span class="hljs-attr">referTargetNodeId</span>: node.<span class="hljs-property">id</span>
  })
  
  <span class="hljs-comment">// å¤šäººåä½œåŒæ­¥</span>
  <span class="hljs-title function_">useRealtimeCollab</span>().<span class="hljs-title function_">insertSharedNode</span>({ node, parent, data }, <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">TOP</span>)
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æœ¬åœ° Schema æ‰§è¡ŒèŠ‚ç‚¹æ’å…¥åï¼Œæ¥ä¸‹æ¥å°±é€šè¿‡
<code>useRealtimeCollab().insertSharedNode(...)</code>
æ¥å®Œæˆä¸ Yjs çš„åŒæ­¥ã€‚</p>
<h4 data-id="heading-16">æ ¸å¿ƒé€»è¾‘ï¼š<code>insertSharedNode</code></h4>
<p><code>insertSharedNode</code> æ˜¯æ•´ä¸ªåå‘åŒæ­¥æœºåˆ¶çš„å…³é”®å‡½æ•°ï¼Œå®ƒçš„ä¸»è¦èŒè´£æ˜¯ï¼š</p>
<ol>
<li>
<p><strong>ç¡®å®š Yjs ç»“æ„ä¸­ç›®æ ‡ä½ç½®</strong>
é€šè¿‡ <code>parent.id</code> è·å–å…±äº«æ–‡æ¡£ä¸­å¯¹åº”çš„ <code>Y.Map</code> æˆ– <code>Y.Array</code>ï¼Œæ‰¾åˆ°åº”æ’å…¥çš„ç›®æ ‡èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>æ„é€  Yjs èŠ‚ç‚¹å¯¹è±¡</strong>
å°†æœ¬åœ°çš„ <code>Node</code> æ•°æ®ç»“æ„åºåˆ—åŒ–ä¸ºå¯¹åº”çš„ Yjs ç±»å‹ï¼ˆ<code>Y.Map</code>ï¼‰ï¼Œå¹¶é€’å½’åœ°å°† <code>props</code>ã€<code>children</code> ç­‰å­—æ®µæ˜ å°„ä¸º Yjs å¯æ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œäº‹åŠ¡æ€§æ’å…¥</strong>
ä½¿ç”¨ <code>ydoc.transact()</code> è¿›è¡ŒåŸå­æ“ä½œï¼Œä¿è¯ä¸€æ¬¡æ’å…¥åœ¨æ‰€æœ‰åä½œè€…ä¸­çŠ¶æ€ä¸€è‡´ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–åçš„æ ¸å¿ƒç¤ºä¾‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ‹–æ‹½è¡Œä¸ºäº§ç”Ÿçš„èŠ‚ç‚¹æ’å…¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">insertNode</span>(<span class="hljs-params">{ node, parent, data }: InsertOptions, position: PositionType</span>) {
  <span class="hljs-keyword">let</span> insertPos
  <span class="hljs-keyword">let</span> insertPosFinal
  
  <span class="hljs-keyword">if</span> (!parent) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(<span class="hljs-title function_">useCanvas</span>().<span class="hljs-property">pageState</span>.<span class="hljs-property">pageSchema</span>!.<span class="hljs-property">id</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>, data, position)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">switch</span> (position) {
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">TOP</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">LEFT</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, <span class="hljs-string">'before'</span>, node.<span class="hljs-property">id</span>)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">BOTTOM</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">RIGHT</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, <span class="hljs-string">'after'</span>, node.<span class="hljs-property">id</span>)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">IN</span>:
        insertPos = ([<span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">TOP</span>, <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">LEFT</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[]).<span class="hljs-title function_">includes</span>(position) ? <span class="hljs-string">'before'</span> : <span class="hljs-string">'after'</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(node.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, insertPos)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">OUT</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">OUT</span>, node.<span class="hljs-property">id</span>)
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">REPLACE</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(parent.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, <span class="hljs-string">'replace'</span>, node.<span class="hljs-property">id</span>)
        <span class="hljs-keyword">break</span>
      <span class="hljs-attr">default</span>:
        insertPosFinal = ([<span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">TOP</span>, <span class="hljs-variable constant_">POSITION</span>.<span class="hljs-property">LEFT</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[]).<span class="hljs-title function_">includes</span>(position) ? <span class="hljs-string">'before'</span> : <span class="hljs-string">'after'</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>(node.<span class="hljs-property">id</span> || <span class="hljs-string">''</span>, data, insertPosFinal)
        <span class="hljs-keyword">break</span>
    }
  }
}
  
<span class="hljs-comment">// insert æ“ä½œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">parentId: <span class="hljs-built_in">string</span>, newNodeData: Node, position: <span class="hljs-built_in">string</span>, referTargetNodeId?: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">operationHandler</span>.<span class="hljs-title function_">insert</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'insert'</span>,
    parentId,
    newNodeData,
    position,
    referTargetNodeId
  })
}
</code></pre>
<p>å…¶å®å°±ç›¸å½“äºé‡å†™äº† <code>insertNode</code> æ¥å®ç° Yjs çš„å˜åŠ¨</p>
<h4 data-id="heading-17">Vue Hook çš„ä½œç”¨</h4>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†è¿™ç±»åŒæ­¥é€»è¾‘å°è£…åœ¨ä¸€ä¸ªç»„åˆå¼ Hook ä¸­ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * useCollabSchema Composable
 * èŒè´£:
 * 1. æ•´åˆ Y.Doc (æŒä¹…åŒ–æ•°æ®) å’Œ Y.Awareness (ç¬æ—¶çŠ¶æ€) çš„åŒæ­¥ã€‚
 * 2. æä¾›å¯¹å…±äº«æ–‡æ¡£ç»“æ„ (Schema) çš„å¢åˆ æ”¹ APIã€‚
 * 3. æä¾›å¯¹è¿œç¨‹ç”¨æˆ·å®æ—¶çŠ¶æ€çš„å“åº”å¼æ•°æ®å’Œæ›´æ–° APIã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCollabSchema</span>(<span class="hljs-params">options: UseCollabSchemaOptions</span>) {
  <span class="hljs-keyword">const</span> { roomId, currentUser } = options
  <span class="hljs-keyword">const</span> { awareness, provider } = <span class="hljs-title function_">useYjs</span>(roomId, { <span class="hljs-attr">websocketUrl</span>: <span class="hljs-string">`ws://localhost:<span class="hljs-subst">${PORT}</span>`</span> })
  <span class="hljs-keyword">const</span> { remoteStates, updateLocalStateField } = useAwareness&lt;<span class="hljs-title class_">SchemaAwarenessState</span>&gt;(awareness, currentUser)
  
  <span class="hljs-comment">// è·å– NodeSchemaModel å®ä¾‹</span>
  <span class="hljs-keyword">const</span> schemaManager = <span class="hljs-title class_">SchemaManager</span>.<span class="hljs-title function_">getInstance</span>()
  <span class="hljs-keyword">const</span> schemaModel = schemaManager.<span class="hljs-title function_">createSchema</span>(roomId, provider.<span class="hljs-property">value</span>!)
  
  <span class="hljs-comment">// æ‹–æ‹½èŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">insertSharedNode</span> = (<span class="hljs-params">
    node: { node: Node | RootNode; parent: Node | RootNode; data: Node },
    position: PositionType = POSITION.IN
  </span>) =&gt; {
    <span class="hljs-comment">// ...ä¸Šé¢æåˆ°çš„æ ¸å¿ƒé€»è¾‘</span>
  }
  
  <span class="hljs-comment">// ... å…¶ä»–æ ¸å¿ƒå‡½æ•°</span>
  
  <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆç›‘å¬</span>
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    schemaManager.<span class="hljs-title function_">destroyObserver</span>(roomId)
    provider.<span class="hljs-property">value</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'sync'</span>, <span class="hljs-function">() =&gt;</span> {})
    <span class="hljs-comment">// awareness.value?.destroy()</span>
  })
  
  <span class="hljs-keyword">return</span> {
    remoteStates,
    insertSharedNode,
    <span class="hljs-comment">// ... å…¶ä»–æ ¸å¿ƒå‡½æ•°</span>
  }
}
  
</code></pre>
<p>è¿™æ ·ï¼Œä»»ä½•æ—¶å€™ Schema å±‚æ‰§è¡Œäº†æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ“ä½œï¼Œéƒ½å¯ä»¥ç›´æ¥é€šè¿‡ <code>useCollabSchema()</code> æ¥åŒæ­¥åˆ°å…±äº«æ–‡æ¡£ã€‚</p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>åœ¨æ•´ä¸ªå¤šäººååŒä½“ç³»ä¸­ï¼Œ<strong>Yjs ä¸ Schema çš„åŒå‘åŒæ­¥æœºåˆ¶</strong>æ˜¯ tiny-engine åä½œçš„æ ¸å¿ƒã€‚</p>
<ul>
<li>
<p><strong>æ­£å‘åŒæ­¥ï¼ˆYjs â†’ Schemaï¼‰</strong>ï¼š
é€šè¿‡ <code>observe</code> ä¸ <code>observeDeep</code> ç›‘å¬ Yjs çš„æ•°æ®å˜æ›´ï¼Œå½“è¿œç«¯åä½œè€…ä¿®æ”¹æ–‡æ¡£æ—¶ï¼Œæœ¬åœ°è‡ªåŠ¨æ›´æ–° Schemaï¼Œä»è€Œè§¦å‘ç•Œé¢åˆ·æ–°ã€‚</p>
</li>
<li>
<p><strong>åå‘åŒæ­¥ï¼ˆSchema â†’ Yjsï¼‰</strong>ï¼š
é€šè¿‡ Vue Hook æ•è·æœ¬åœ°ç”¨æˆ·æ“ä½œï¼ˆå¦‚æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹èŠ‚ç‚¹ç­‰ï¼‰ï¼Œå†è°ƒç”¨å°è£…çš„ <code>useRealtimeCollab()</code> æ–¹æ³•ï¼Œå°†å˜æ›´åŒæ­¥å› Yjs æ–‡æ¡£ã€‚</p>
</li>
<li>
<p><strong>äº‹ä»¶æ€»çº¿ä¸ Meta å…ƒæ•°æ®</strong>ï¼š
ç”¨äºè§£å†³å•çº¯æ•°æ®å˜æ›´ä¸­æ— æ³•è¿˜åŸæ“ä½œæ„å›¾çš„é—®é¢˜ã€‚äº‹ä»¶æ€»çº¿è´Ÿè´£èŠ‚ç‚¹çº§åˆ«çš„åˆ›å»ºä¸åˆ é™¤åŒæ­¥ï¼Œè€Œ Meta åˆ™ç”¨äºç›‘å¬å±æ€§ä¸çŠ¶æ€çš„æ›´æ”¹ã€‚</p>
</li>
</ul>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬æ„å»ºå‡ºäº†ä¸€æ¡å®Œæ•´çš„æ•°æ®åŒæ­¥é“¾è·¯ï¼š</p>
<pre><code class="hljs">Yjs æ”¹åŠ¨ â†’ Schema æ›´æ–° â†’ è§†å›¾åˆ·æ–°
Schema æ”¹åŠ¨ â†’ Yjs æ›´æ–° â†’ è¿œç«¯åŒæ­¥
</code></pre>
<p>è¿™æ¡é“¾è·¯ç¡®ä¿äº†å¤šäººååŒç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§ä¸å®æ—¶å“åº”èƒ½åŠ›ï¼Œè®©æ¯ä¸€ä¸ªç¼–è¾‘åŠ¨ä½œéƒ½èƒ½å³æ—¶åœ°è¢«æ‰€æœ‰åä½œè€…æ„ŸçŸ¥ä¸å‘ˆç°ã€‚
å®ƒæ—¢ä¿è¯äº†æ“ä½œçš„è¯­ä¹‰åŒ–ï¼Œä¹Ÿä¸ºåç»­çš„å†²çªè§£å†³ä¸ç‰ˆæœ¬ç®¡ç†æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-19">å®æ“ä¸Šæ‰‹ï¼š</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¼•å¯¼æ‚¨åœ¨æœ¬åœ°ç¯å¢ƒä¸­ï¼Œä»…éœ€å‡ æ¡å‘½ä»¤ï¼Œå°±èƒ½å¯åŠ¨ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ååŒè®¾è®¡ç”»å¸ƒï¼Œå¹¶è§è¯å®æ—¶åŒæ­¥çš„â€œé­”æ³•â€ã€‚</p>
<h3 data-id="heading-20">é¢„å¤‡å·¥ä½œï¼šä½ çš„å¼€å‘ç¯å¢ƒ</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœ¬åœ°ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œè¿™æ˜¯ä¿è¯é¡ºåˆ©è¿è¡Œçš„åŸºç¡€ï¼š</p>
<ul>
<li><strong>Node.js</strong>: ç‰ˆæœ¬éœ€ <code>â‰¥ 16</code>ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ <code>nvm</code> æˆ– <code>fnm</code> ç­‰å·¥å…·æ¥ç®¡ç† Node.js ç‰ˆæœ¬ï¼Œä»¥é¿å…ç¯å¢ƒå†²çªã€‚
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ä½ çš„ Node.js ç‰ˆæœ¬</span>
node -v 
</code></pre>
</li>
<li><strong>pnpm</strong>: <code>tiny-engine</code> é‡‡ç”¨ pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œä»¥å……åˆ†åˆ©ç”¨å…¶åœ¨ monorepoï¼ˆå¤šåŒ…ä»“åº“ï¼‰é¡¹ç›®ä¸­çš„é«˜æ•ˆä¾èµ–ç®¡ç†èƒ½åŠ›ã€‚
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœå°šæœªå®‰è£… pnpmï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤</span>
npm install -g pnpm
</code></pre>
</li>
</ul>
<h3 data-id="heading-21">ç¬¬ä¸€æ­¥ï¼šå…‹éš† <code>tiny-engine</code> æºç </h3>
<p>é¦–å…ˆï¼Œå°† <code>tiny-engine</code> çš„å®˜æ–¹ä»“åº“å…‹éš†åˆ°æ‚¨çš„æœ¬åœ°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/opentiny/tiny-engine.git
<span class="hljs-built_in">cd</span> tiny-engine
</code></pre>
<p>è¿›å…¥é¡¹ç›®ç›®å½•åï¼Œæ‚¨ä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªç»“æ„æ¸…æ™°çš„ monorepo é¡¹ç›®ï¼Œæ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ç¼–è¾‘å™¨æ ¸å¿ƒã€ç‰©æ–™é¢æ¿ã€åä½œæœåŠ¡ç­‰ï¼‰éƒ½ä½œä¸ºç‹¬ç«‹çš„å­åŒ…å­˜åœ¨äº <code>packages/</code> ç›®å½•ä¸‹ã€‚</p>
<h3 data-id="heading-22">2ï¸âƒ£ ç¬¬äºŒæ­¥ï¼šå®‰è£…é¡¹ç›®ä¾èµ–</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ <code>pnpm install</code>ã€‚pnpm ä¼šæ™ºèƒ½åœ°è§£æå¹¶å®‰è£…æ‰€æœ‰å­åŒ…çš„ä¾èµ–ï¼Œå¹¶å»ºç«‹å®ƒä»¬ä¹‹é—´çš„ç¬¦å·é“¾æ¥ï¼ˆsymlinksï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pnpm install
</code></pre>
<blockquote>
<p><strong>ğŸ’¡ ä¸ºä»€ä¹ˆæ˜¯ pnpmï¼Ÿ</strong>
åœ¨ monorepo æ¶æ„ä¸­ï¼Œpnpm é€šè¿‡å…¶ç‹¬ç‰¹çš„éæ‰å¹³åŒ– <code>node_modules</code> ç»“æ„å’Œå†…å®¹å¯»å€å­˜å‚¨ï¼Œå¯ä»¥æå¤§åœ°èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶é¿å…â€œå¹»å½±ä¾èµ–â€é—®é¢˜ï¼Œä¿è¯äº†å¼€å‘ç¯å¢ƒçš„çº¯å‡€ä¸ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-23">3ï¸âƒ£ ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨å¼€å‘æœåŠ¡ï¼Œè§è¯å¥‡è¿¹ï¼</h3>
<p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œç°åœ¨åªéœ€è¿è¡Œ <code>dev</code> å‘½ä»¤ï¼Œå³å¯ä¸€é”®å¯åŠ¨æ•´ä¸ª <code>tiny-engine</code> å¼€å‘ç¯å¢ƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pnpm dev
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å®ƒä¼šåŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li><strong>Vite å‰ç«¯å¼€å‘æœåŠ¡å™¨</strong>: è´Ÿè´£æ„å»ºå’Œçƒ­æ›´æ–°æ‚¨åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„ç¼–è¾‘å™¨ç•Œé¢ã€‚</li>
<li><strong>åä½œåç«¯æœåŠ¡å™¨ (y-websocket)</strong>: ä¸€ä¸ªè½»é‡çº§çš„ WebSocket æœåŠ¡å™¨ï¼Œè´Ÿè´£æ¥æ”¶ã€å¹¿æ’­å’ŒæŒä¹…åŒ– Y.js çš„ååŒæ•°æ®ã€‚</li>
</ul>
</li>
<li>ç»ˆç«¯ä¼šè¾“å‡ºç¼–è¾‘å™¨å‰ç«¯çš„è®¿é—®åœ°å€ï¼Œé€šå¸¸é»˜è®¤ä¸º <code>http://localhost:7007</code>ï¼ˆè¯·ä»¥æ‚¨ç»ˆç«¯çš„å®é™…è¾“å‡ºä¸ºå‡†ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-24">4ï¸âƒ£ ç¬¬å››æ­¥ï¼šå¼€å¯ä½ çš„â€œå¤šäººåä½œâ€å‰§æœ¬</h3>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ‰®æ¼”ä¸åŒçš„åä½œè€…äº†ï¼</p>
<ol>
<li><strong>æ‰“å¼€ç¬¬ä¸€ä¸ªçª—å£</strong>: åœ¨æ‚¨çš„æµè§ˆå™¨ï¼ˆæ¨è Chromeï¼‰ä¸­æ‰“å¼€ä¸Šä¸€æ­¥è·å–çš„åœ°å€ï¼Œä¾‹å¦‚ <code>http://localhost:7007</code>ã€‚æ‚¨ä¼šçœ‹åˆ° <code>tiny-engine</code> çš„ä½ä»£ç è®¾è®¡å™¨ç•Œé¢ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„<strong>ç”¨æˆ·A</strong>ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c46d1b252a42319099d33d96da2ea2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764849879&amp;x-signature=kqRqJGP82o1tNqidGhjKO%2FLSLLE%3D" alt="image-2.png" loading="lazy"/></p>
<ol start="2">
<li>
<p><strong>æ‰“å¼€ç¬¬äºŒä¸ªçª—å£</strong>: <strong>æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨éšèº«çª—å£</strong>ï¼Œæˆ–è€…ä½¿ç”¨<strong>å¦ä¸€å°è¿æ¥åˆ°åŒä¸€å±€åŸŸç½‘çš„è®¾å¤‡</strong>ï¼Œå†æ¬¡è®¿é—®ç›¸åŒçš„åœ°å€ã€‚è¿™ä¸ªçª—å£å°†æ‰®æ¼”<strong>ç”¨æˆ·B</strong>ã€‚</p>
</li>
<li>
<p><strong>å¼€å§‹å®æ—¶ååŒï¼</strong>: å°†ä¸¤ä¸ªçª—å£å¹¶æ’æ‘†æ”¾ï¼Œç°åœ¨å¼€å§‹æ‚¨çš„è¡¨æ¼”ï¼š</p>
<ul>
<li><strong>åœ¨ç”¨æˆ·Açš„ç”»å¸ƒä¸Šæ‹–å…¥ä¸€ä¸ªæŒ‰é’®ç»„ä»¶</strong>ã€‚è§‚å¯Ÿç”¨æˆ·Bçš„ç”»å¸ƒï¼Œå‡ ä¹åœ¨æ‹–æ‹½å®Œæˆçš„ç¬é—´ï¼ŒåŒæ ·çš„æŒ‰é’®å°±ä¼šâ€œå‡­ç©ºå‡ºç°â€åœ¨ç›¸åŒçš„ä½ç½®ã€‚</li>
<li><strong>åœ¨ç”¨æˆ·Bçš„ç•Œé¢ä¸Šï¼Œé€‰ä¸­åˆšåˆšåŒæ­¥è¿‡æ¥çš„æŒ‰é’®ï¼Œä¿®æ”¹å®ƒçš„â€œæŒ‰é’®å†…å®¹â€å±æ€§</strong>ã€‚è§‚å¯Ÿç”¨æˆ·Açš„ç•Œé¢ï¼ŒæŒ‰é’®çš„æ–‡æœ¬ä¼šå®æ—¶åœ°ã€é€å­—åœ°å‘ç”Ÿå˜åŒ–ã€‚</li>
<li><strong>åœ¨ç”¨æˆ·Açš„å¤§çº²æ ‘é¢æ¿ä¸­ï¼Œæ‹–æ‹½ä¸€ä¸ªç»„ä»¶æ¥æ”¹å˜å…¶å±‚çº§ç»“æ„</strong>ã€‚è§‚å¯Ÿç”¨æˆ·Bçš„å¤§çº²æ ‘ï¼ŒèŠ‚ç‚¹ä¼šç«‹å³ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ã€‚</li>
<li><strong>åœ¨ä»»æ„ä¸€ä¸ªçª—å£ä¸­ï¼Œå°è¯•åŒæ—¶æ“ä½œ</strong>ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·Aä¿®æ”¹ç»„ä»¶çš„é¢œè‰²ï¼Œç”¨æˆ·Bä¿®æ”¹å…¶è¾¹è·ã€‚æ‚¨ä¼šå‘ç°ï¼Œç”±äº CRDT çš„ç‰¹æ€§ï¼Œæ‰€æœ‰çš„ä¿®æ”¹æœ€ç»ˆéƒ½ä¼šè¢«æ­£ç¡®åˆå¹¶ï¼Œè¾¾åˆ°æœ€ç»ˆä¸€è‡´çš„çŠ¶æ€ï¼Œè€Œä¸ä¼šäº§ç”Ÿå†²çªæˆ–è¦†ç›–ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-25">è¿›é˜¶æ¢ç´¢ä¸è°ƒè¯•æŠ€å·§</h3>
<p>å¦‚æœæ‚¨å¯¹èƒŒåçš„åŸç†æ„Ÿåˆ°å¥½å¥‡ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ“ä½œæ¥æ·±å…¥æ¢ç´¢ï¼š</p>
<ul>
<li>
<p><strong>æŸ¥çœ‹ååŒçŠ¶æ€</strong>: æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œè¿›å…¥ æ§åˆ¶å°ï¼Œä½ ä¼šçœ‹åˆ°ç›¸åº”çš„ååŒçŠ¶æ€æ•°æ®</p>
</li>
<li>
<p><strong>ç½‘ç»œâ€œæ—¶å…‰æœºâ€</strong>: åœ¨å¼€å‘è€…å·¥å…·çš„ <code>Network</code> æ ‡ç­¾é¡µï¼Œç­›é€‰ <code>WS</code> (WebSocket) è¿æ¥ã€‚æ‚¨å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯ä¸ <code>y-websocket</code> æœåŠ¡å™¨ä¹‹é—´æµåŠ¨çš„äºŒè¿›åˆ¶æ¶ˆæ¯ã€‚å°è¯•æ–­å¼€ç½‘ç»œå†é‡è¿ï¼Œè§‚å¯Ÿ Y.js æ˜¯å¦‚ä½•åˆ©ç”¨ CRDT çš„èƒ½åŠ›ï¼Œåœ¨é‡è¿åè‡ªåŠ¨åŒæ­¥æ‰€æœ‰ç¦»çº¿æœŸé—´çš„å˜æ›´çš„ã€‚</p>
</li>
<li>
<p><strong>æ‰®æ¼”â€œä¸Šå¸â€</strong>: åœ¨æ§åˆ¶å°ä¸­ï¼Œæ‚¨å¯ä»¥è®¿é—® Y.js çš„ <code>doc</code> å’Œ <code>awareness</code> å®ä¾‹ï¼Œå°è¯•æ‰‹åŠ¨ä¿®æ”¹æ•°æ®æˆ–å¹¿æ’­è‡ªå®šä¹‰çŠ¶æ€ï¼Œæ¥æ›´æ·±å…¥åœ°ç†è§£æ•°æ®é©±åŠ¨çš„ååŒæ¨¡å‹ã€‚</p>
</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å·²ç»æˆåŠŸåœ¨æœ¬åœ°å®Œæ•´åœ°ä½“éªŒäº† <code>tiny-engine</code> å…ˆè¿›çš„å¤šäººåä½œèƒ½åŠ›ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½æ¼”ç¤ºï¼Œå®ƒèƒŒåèåˆäº† <strong>CRDT (Y.js)ã€å®æ—¶é€šä¿¡ (WebSocket)ã€å…ƒæ•°æ®é©±åŠ¨å’Œäº‹ä»¶æ€»çº¿</strong> ç­‰ä¸€ç³»åˆ—ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-26">æ¼”ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48a2d5c95a0a4e93b44d525add444549~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764849879&amp;x-signature=SNzsGXjimOx6A4VPEBLMD4Bblwk%3D" alt="20251026152240_rec_.gif" loading="lazy"/></p>
<p>ï¼ˆæœ¬é¡¹ç›®ä¸ºå¼€æºä¹‹å¤æ´»åŠ¨è´¡çŒ®ï¼Œæ¬¢è¿å¤§å®¶ä½“éªŒå¹¶ä½¿ç”¨ï¼‰
æºç å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine%2Ftree%2Fospp-2025%2Fmultiplayer-collaboration" target="_blank" title="https://github.com/opentiny/tiny-engine/tree/ospp-2025/multiplayer-collaboration" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<h2 data-id="heading-27">å…³äº OpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2F" target="_blank" title="https://opentiny.design/" ref="nofollow noopener noreferrer">OpenTiny å®˜ç½‘</a>ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a></strong><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">OpenTiny ä»£ç ä»“åº“</a>ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a></strong><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">TinyVue æºç </a>ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></strong><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">TinyEngine æºç </a>ï¼šâ€…<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></strong><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~
å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openGausså‘é‡æ•°æ®åº“ï¼šèµ‹èƒ½æ™ºèƒ½åˆ¶é€ çš„å·¥ä¸šAIå®è·µ]]></title>    <link>https://juejin.cn/post/7577198193215946795</link>    <guid>https://juejin.cn/post/7577198193215946795</guid>    <pubDate>2025-11-27T12:55:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577198193215946795" data-draft-id="7577268271213559844" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openGausså‘é‡æ•°æ®åº“ï¼šèµ‹èƒ½æ™ºèƒ½åˆ¶é€ çš„å·¥ä¸šAIå®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-27T12:55:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openGausså‘é‡æ•°æ®åº“ï¼šèµ‹èƒ½æ™ºèƒ½åˆ¶é€ çš„å·¥ä¸šAIå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T12:55:01.000Z" title="Thu Nov 27 2025 12:55:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>éšç€å·¥ä¸š4.0å’Œäººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ·±å…¥å‘å±•ï¼Œæ™ºèƒ½åˆ¶é€ å¯¹æ•°æ®ç®¡ç†å’Œæ™ºèƒ½å†³ç­–çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ã€‚ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“åœ¨å¤„ç†éç»“æ„åŒ–æ•°æ®å’Œå®ç°é«˜æ•ˆçš„ç›¸ä¼¼åº¦æœç´¢æ–¹é¢å­˜åœ¨ç“¶é¢ˆã€‚openGausså‘é‡æ•°æ®åº“é€šè¿‡é›†æˆå‘é‡å­˜å‚¨å’Œæ£€ç´¢èƒ½åŠ›ï¼Œä¸ºå·¥ä¸šAIåº”ç”¨æä¾›äº†å¼ºå¤§çš„æ”¯æ’‘ã€‚æœ¬æ–‡ä»‹ç»äº†openGausså‘é‡æ•°æ®åº“çš„æ ¸å¿ƒç‰¹æ€§ï¼Œé€šè¿‡ä¸€ä¸ªæ™ºèƒ½è´¨é‡æ£€æµ‹ç³»ç»Ÿçš„å®é™…æ¡ˆä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨å‘é‡æ•°æ®åº“å®ç°å·¥ä¸šç¼ºé™·è¯†åˆ«å’Œé¢„æµ‹æ€§ç»´æŠ¤ï¼Œä¸ºæ™ºèƒ½åˆ¶é€ ä¼ä¸šæä¾›äº†å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å…³é”®è¯</strong>ï¼šopenGaussã€å‘é‡æ•°æ®åº“ã€æ™ºèƒ½åˆ¶é€ ã€ç¼ºé™·æ£€æµ‹ã€æœºå™¨å­¦ä¹ </p>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>å·¥ä¸šAIçš„ç°çŠ¶ä¸æŒ‘æˆ˜</p>
<p>å·¥ä¸šåˆ¶é€ ä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹è¿‡ç¨‹ä¸­é¢ä¸´å¤šé‡æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>æ•°æ®å¤šæ ·æ€§</strong>ï¼šç”Ÿäº§è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å›¾åƒã€ä¼ æ„Ÿå™¨æ•°æ®ã€æ–‡æœ¬æ—¥å¿—ç­‰éç»“æ„åŒ–æ•°æ®å æ¯”é«˜è¾¾80%ä»¥ä¸Š</p>
</li>
<li>
<p><strong>å®æ—¶æ€§è¦æ±‚</strong>ï¼šéœ€è¦åœ¨æ¯«ç§’çº§æ—¶é—´å†…å®Œæˆç¼ºé™·æ£€æµ‹å’Œå¼‚å¸¸é¢„è­¦</p>
</li>
<li>
<p><strong>æ¨¡å‹éƒ¨ç½²</strong>ï¼šå¦‚ä½•é«˜æ•ˆåœ°å°†æ·±åº¦å­¦ä¹ æ¨¡å‹é›†æˆåˆ°ç”Ÿäº§ç³»ç»Ÿä¸­</p>
</li>
<li>
<p><strong>å¯æ‰©å±•æ€§</strong>ï¼šéšç€äº§çº¿æ•°é‡å¢åŠ ï¼Œç³»ç»Ÿéœ€è¦æ”¯æŒPBçº§æ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢</p>
</li>
</ul>
<h4 data-id="heading-2">å‘é‡æ•°æ®åº“çš„ä¼˜åŠ¿</h4>
<p>å‘é‡æ•°æ®åº“ä½œä¸ºæ–°å…´çš„æ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>é«˜æ•ˆçš„ç›¸ä¼¼åº¦æœç´¢</strong>ï¼šæ”¯æŒL2è·ç¦»ã€ä½™å¼¦ç›¸ä¼¼åº¦ç­‰å¤šç§è·ç¦»åº¦é‡</p>
</li>
<li>
<p><strong>ä¸AIæ¨¡å‹çš„å¤©ç„¶ç»“åˆ</strong>ï¼šç›´æ¥å­˜å‚¨ç¥ç»ç½‘ç»œçš„åµŒå…¥å‘é‡</p>
</li>
<li>
<p><strong>å®æ—¶æ€§</strong>ï¼šæ¯«ç§’çº§çš„æŸ¥è¯¢å“åº”æ—¶é—´</p>
</li>
<li>
<p><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²å’Œå¤§è§„æ¨¡å¹¶å‘æŸ¥è¯¢</p>
</li>
</ul>
<h4 data-id="heading-3">openGausså‘é‡æ•°æ®åº“çš„å®šä½</h4>
<p>openGaussä½œä¸ºå¼€æºæ•°æ®åº“ï¼Œå…¶å‘é‡æ•°æ®åº“æ‰©å±•æä¾›äº†ï¼š</p>
<ul>
<li>
<p>åŸç”Ÿçš„å‘é‡æ•°æ®ç±»å‹å’Œç´¢å¼•ç»“æ„</p>
</li>
<li>
<p>ä¸PostgreSQLå…¼å®¹çš„SQLæ¥å£</p>
</li>
<li>
<p>ä¼ä¸šçº§çš„å¯é æ€§å’Œå®‰å…¨æ€§</p>
</li>
</ul>
<h2 data-id="heading-4">é¡¹ç›®ç‰¹ç‚¹</h2>
<ol>
<li><strong>å®Œæ•´æ€§</strong></li>
</ol>
<ul>
<li>
<p>ä»æ•°æ®åº“è®¾è®¡åˆ°åº”ç”¨å®ç°çš„å®Œæ•´é“¾æ¡</p>
</li>
<li>
<p>åŒ…å«æ‰€æœ‰å¿…è¦çš„é…ç½®å’Œè„šæœ¬</p>
</li>
<li>
<p>æä¾›è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹</p>
</li>
</ul>
<ol>
<li><strong>å¯è¿è¡Œæ€§</strong></li>
</ol>
<ul>
<li>
<p>æ‰€æœ‰ä»£ç éƒ½æ˜¯å®Œæ•´çš„ã€å¯ç¼–è¯‘çš„</p>
</li>
<li>
<p>åŒ…å«å®Œæ•´çš„Mavené…ç½®</p>
</li>
<li>
<p>æä¾›å¿«é€Ÿå¼€å§‹æŒ‡å—</p>
</li>
<li>
<p>æ”¯æŒå¼€ç®±å³ç”¨</p>
</li>
</ul>
<ol>
<li><strong>ç”Ÿäº§çº§è´¨é‡</strong></li>
</ol>
<ul>
<li>
<p>å®Œå–„çš„é”™è¯¯å¤„ç†</p>
</li>
<li>
<p>è¯¦ç»†çš„æ—¥å¿—è®°å½•</p>
</li>
<li>
<p>è¿æ¥æ± ç®¡ç†</p>
</li>
<li>
<p>äº‹åŠ¡å¤„ç†</p>
</li>
</ul>
<ol>
<li><strong>æ–‡æ¡£å®Œå–„</strong></li>
</ol>
<ul>
<li>
<p>6ä»½è¯¦ç»†çš„æ–‡æ¡£</p>
<ul>
<li>ä»£ç æ³¨é‡Šå®Œæ•´</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨ç¤ºä¾‹ä¸°å¯Œ</p>
</li>
<li>
<p>æ•…éšœæ’æŸ¥æŒ‡å—</p>
</li>
</ul>
<ol>
<li><strong>æŠ€æœ¯å…ˆè¿›</strong></li>
</ol>
<ul>
<li>
<p>ä½¿ç”¨openGausså‘é‡æ•°æ®åº“</p>
</li>
<li>
<p>é›†æˆæ·±åº¦å­¦ä¹ æ¡†æ¶</p>
</li>
<li>
<p>å®ç°å‘é‡ç›¸ä¼¼åº¦æœç´¢</p>
</li>
<li>
<p>æ”¯æŒé¢„æµ‹æ€§ç»´æŠ¤</p>
</li>
</ul>
<h2 data-id="heading-5">æ¡ˆä¾‹ï¼šæ™ºèƒ½åˆ¶é€ ç¼ºé™·æ£€æµ‹ç³»ç»Ÿ</h2>
<p>æ¡ˆä¾‹èƒŒæ™¯</p>
<p>æŸæ±½è½¦é›¶éƒ¨ä»¶åˆ¶é€ ä¼ä¸šï¼Œå¹´äº§é‡è¾¾100ä¸‡ä»¶ï¼Œäº§å“è´¨é‡ç›´æ¥å½±å“æ•´è½¦å®‰å…¨ã€‚ä¼ ç»Ÿçš„äººå·¥æ£€æµ‹æ–¹å¼å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>
<p>æ£€æµ‹å‘˜å·¥ä½œå¼ºåº¦å¤§ï¼Œæ˜“äº§ç”Ÿç–²åŠ³è¯¯åˆ¤</p>
</li>
<li>
<p>æ£€æµ‹æ ‡å‡†éš¾ä»¥ç»Ÿä¸€ï¼Œæ¼æ£€ç‡çº¦ä¸º3-5%</p>
</li>
<li>
<p>æ— æ³•è¿›è¡Œé¢„æµ‹æ€§ç»´æŠ¤ï¼Œè®¾å¤‡æ•…éšœçªå‘æ€§å¼º</p>
</li>
</ul>
<p>è¯¥ä¼ä¸šå†³å®šå»ºç«‹åŸºäºAIçš„æ™ºèƒ½è´¨é‡æ£€æµ‹ç³»ç»Ÿï¼Œåˆ©ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹è¯†åˆ«äº§å“ç¼ºé™·ï¼Œå¹¶é€šè¿‡å‘é‡æ•°æ®åº“å­˜å‚¨å’Œæ£€ç´¢å†å²ç¼ºé™·ç‰¹å¾ï¼Œå®ç°å¿«é€Ÿçš„ç¼ºé™·åˆ†ç±»å’Œæ ¹å› åˆ†æã€‚</p>
<h4 data-id="heading-6">é¡¹ç›®ç»“æ„</h4>
<p>manufacturing-ai-system/</p>
<p>â”œâ”€â”€ pom.xml # Mavené¡¹ç›®é…ç½®æ–‡ä»¶</p>
<p>â”œâ”€â”€ src/</p>
<p>â”‚ â”œâ”€â”€ main/</p>
<p>â”‚ â”‚ â”œâ”€â”€ java/</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ com/manufacturing/</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DefectFeatureExtractor.java # ç‰¹å¾æå–æ¨¡å—</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ DefectClassifier.java # ç¼ºé™·åˆ†ç±»æ¨¡å—</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ RootCauseAnalyzer.java # æ ¹å› åˆ†ææ¨¡å—</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ model/</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ DefectInfo.java # ç¼ºé™·ä¿¡æ¯æ•°æ®ç±»</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ DefectStatistics.java # ç¼ºé™·ç»Ÿè®¡æ•°æ®ç±»</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ RootCauseResult.java # æ ¹å› åˆ†æç»“æœç±»</p>
<p>â”‚ â”‚ â”‚ â”‚ â””â”€â”€ MaintenanceResult.java # ç»´æŠ¤é¢„æµ‹ç»“æœç±»</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ service/</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ DatabaseService.java # æ•°æ®åº“è¿æ¥ç®¡ç†</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ FeatureExtractionService.java # ç‰¹å¾æå–æœåŠ¡</p>
<p>â”‚ â”‚ â”‚ â”‚ â””â”€â”€ AnalysisService.java # åˆ†ææœåŠ¡</p>
<p>â”‚ â”‚ â”‚ â”œâ”€â”€ util/</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ VectorUtils.java # å‘é‡å·¥å…·ç±»</p>
<p>â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ ImageProcessingUtils.java # å›¾åƒå¤„ç†å·¥å…·</p>
<p>â”‚ â”‚ â”‚ â”‚ â””â”€â”€ DatabaseUtils.java # æ•°æ®åº“å·¥å…·ç±»</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ Application.java # ä¸»åº”ç”¨ç¨‹åº</p>
<p>â”‚ â”‚ â””â”€â”€ resources/</p>
<p>â”‚ â”‚ â”œâ”€â”€ application.properties # åº”ç”¨é…ç½®æ–‡ä»¶</p>
<p>â”‚ â”‚ â”œâ”€â”€ db/</p>
<p>â”‚ â”‚ â”‚ â””â”€â”€ schema.sql # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</p>
<p>â”‚ â”‚ â””â”€â”€ models/</p>
<p>â”‚ â”‚ â””â”€â”€ resnet50.zip # é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶</p>
<p>â”‚ â””â”€â”€ test/</p>
<p>â”‚ â””â”€â”€ java/</p>
<p>â”‚ â””â”€â”€ com/manufacturing/</p>
<p>â”‚ â”œâ”€â”€ DefectClassifierTest.java</p>
<p>â”‚ â”œâ”€â”€ RootCauseAnalyzerTest.java</p>
<p>â”‚ â””â”€â”€ VectorUtilsTest.java</p>
<p>â”œâ”€â”€ docs/</p>
<p>â”‚ â”œâ”€â”€ APIæ–‡æ¡£.md</p>
<p>â”‚ â”œâ”€â”€ éƒ¨ç½²æŒ‡å—.md</p>
<p>â”‚ â””â”€â”€ ä½¿ç”¨ç¤ºä¾‹.md</p>
<p>â””â”€â”€ README.md</p>
<h4 data-id="heading-7">å®ç°æ­¥éª¤</h4>
<p>æ•°æ®åº“åˆå§‹åŒ–</p>
<p>-- åˆ›å»ºç¼ºé™·ç‰¹å¾è¡¨</p>
<p>CREATE TABLE defect_features (</p>
<p>defect_id BIGSERIAL PRIMARY KEY,</p>
<p>product_id VARCHAR(50) NOT NULL,</p>
<p>production_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</p>
<p>defect_type VARCHAR(50), -- åˆ’ä¼¤ã€å‡¹é™·ã€å˜è‰²ç­‰</p>
<p>severity DECIMAL(3,2), -- ç¼ºé™·ä¸¥é‡ç¨‹åº¦ 0-1</p>
<p>feature_vector VECTOR(2048), -- ResNet-50æå–çš„ç‰¹å¾å‘é‡</p>
<p>image_path VARCHAR(500),</p>
<p>production_line VARCHAR(20),</p>
<p>shift VARCHAR(10) -- ç­æ¬¡ä¿¡æ¯</p>
<p>);</p>
<p>-- åˆ›å»ºç¼ºé™·ç±»å‹å‚è€ƒè¡¨</p>
<p>CREATE TABLE defect_types (</p>
<p>type_id SERIAL PRIMARY KEY,</p>
<p>type_name VARCHAR(100) UNIQUE,</p>
<p>description TEXT,</p>
<p>standard_vector VECTOR(2048), -- æ ‡å‡†ç¼ºé™·ç‰¹å¾å‘é‡</p>
<p>acceptable_threshold DECIMAL(3,2)</p>
<p>);</p>
<p>-- åˆ›å»ºå‘é‡ç´¢å¼•ä»¥åŠ é€Ÿç›¸ä¼¼åº¦æœç´¢</p>
<p>CREATE INDEX idx_defect_feature_vector ON defect_features</p>
<p>USING ivfflat (feature_vector vector_cosine_ops)</p>
<p>WITH (lists = 100);</p>
<p>CREATE INDEX idx_defect_type_vector ON defect_types</p>
<p>USING hnsw (standard_vector vector_cosine_ops);</p>
<p>ç¼ºé™·è¯†åˆ«å’Œå­˜å‚¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c98d6f975b944dc8c33bc7f4e3f55d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=bO4Ba%2BXAceCBdk8wuHeM4yqWzv4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ã€Œå›¾åƒç‰¹å¾æå–çš„æ ‡å‡†åŒ–æµç¨‹å®ç°ã€ï¼Œè®¾è®¡ä¸Šè§£è€¦ã€çµæ´»ã€å¯è§‚æµ‹ï¼Œæ ¸å¿ƒä»·å€¼æ˜¯ï¼š</p>
<p>å±è”½åº•å±‚å›¾åƒå¤„ç†çš„å¤æ‚æ€§ï¼Œå‘ä¸Šå±‚æä¾› â€œè¾“å…¥è·¯å¾„â†’è¾“å‡ºç‰¹å¾å‘é‡â€ çš„ç®€æ´æ¥å£ï¼›</p>
<p>æ”¯æŒé…ç½®åŒ–ã€å¯æ‰©å±•ï¼Œä¾¿äºé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ï¼ˆæ£€ç´¢ã€åˆ†ç±»ã€åŒ¹é…ï¼‰å’Œç®—æ³•æ–¹æ¡ˆï¼ˆä¼ ç»Ÿç®—æ³•ã€æ·±åº¦å­¦ä¹ ï¼‰ã€‚</p>
<p>å…¶æœ¬è´¨æ˜¯å›¾åƒä¸šåŠ¡çš„ â€œåŸºç¡€è®¾æ–½â€â€”â€” é€šè¿‡å°†å›¾åƒæ•°å­—åŒ–ä¸ºç‰¹å¾å‘é‡ï¼Œè®©è®¡ç®—æœºèƒ½å¤Ÿ â€œç†è§£â€ å›¾åƒå†…å®¹ï¼Œä¸ºåç»­çš„æ™ºèƒ½å†³ç­–æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/002553ad28d64ec2ad5c881258852110~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=oP%2FWuq0a7s4GlX1yCNeZPX5J0sU%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šç¼ºé™·ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®å­˜å‚¨æ¥å£ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>è´´åˆå·¥ä¸šåœºæ™¯éœ€æ±‚ï¼Œå­—æ®µé€‚é…ç”Ÿäº§çº¿ã€ç­æ¬¡ã€ç¼ºé™·ç±»å‹ç­‰ä¸šåŠ¡å±æ€§ï¼›</p>
<p>é“¾è·¯å®Œæ•´ã€å®¹é”™æ€§å¼ºï¼ŒåŒ…å«å¤šèŠ‚ç‚¹æ ¡éªŒã€èµ„æºé‡Šæ”¾ã€å¼‚å¸¸å¤„ç†ï¼›</p>
<p>å…¼å®¹ä¹‹å‰çš„ç‰¹å¾æå–ã€å‘é‡åºåˆ—åŒ–æ–¹æ³•ï¼Œä½“ç°äº†ä»£ç å¤ç”¨å’Œåˆ†å±‚è®¾è®¡æ€æƒ³ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå°†éç»“æ„åŒ–çš„ç¼ºé™·å›¾åƒè½¬åŒ–ä¸ºå¯å­˜å‚¨ã€å¯æ£€ç´¢ã€å¯åˆ†æçš„ç»“æ„åŒ–æ•°æ®ã€ï¼Œä¸ºå·¥ä¸šè´¨é‡æ£€æµ‹çš„æ™ºèƒ½åŒ–ï¼ˆå¦‚ç›¸ä¼¼ç¼ºé™·åŒ¹é…ã€è‡ªåŠ¨åˆ†ç±»ã€å·¥è‰ºä¼˜åŒ–ï¼‰æä¾›æ•°æ®åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13e74f2a80194b73b535fe903403b104~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=C7PwqThPz5ZxsYvoE4p8PoaBh%2Fs%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šç¼ºé™·æ‰¹é‡å­˜å‚¨çš„é«˜å¯ç”¨å®ç°ï¼Œæ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<p>æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡ SQL æ‰§è¡Œå‡å°‘æ•°æ®åº“äº¤äº’ï¼Œé€‚é…é«˜å¹¶å‘åœºæ™¯ï¼›</p>
<p>æ•°æ®ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ§åˆ¶ç¡®ä¿æ‰¹é‡æ“ä½œåŸå­æ€§ï¼›</p>
<p>å®¹é”™æ€§å¼ºï¼šè·³è¿‡æ— æ•ˆæ•°æ®ã€å¼‚å¸¸å›æ»šã€èµ„æºè§„èŒƒé‡Šæ”¾ï¼Œé¿å…æµç¨‹ä¸­æ–­ï¼›</p>
<p>ä¸šåŠ¡é€‚é…ï¼šä¸å•æ¡å­˜å‚¨é€»è¾‘å…¼å®¹ï¼Œæ”¯æŒåˆ†æ‰¹ã€å¼‚æ­¥æ‰©å±•ã€‚</p>
<p>å…¶æœ¬è´¨æ˜¯ã€Œå•æ¡å­˜å‚¨é€»è¾‘çš„æ‰¹é‡å‡çº§ã€ï¼Œåœ¨ä¿æŒä¸šåŠ¡é€»è¾‘ä¸€è‡´æ€§çš„å‰æä¸‹ï¼Œé€šè¿‡ JDBC æ‰¹é‡æ“ä½œå’Œäº‹åŠ¡æ§åˆ¶ï¼Œè§£å†³äº†é«˜å¹¶å‘ã€å¤§æ•°æ®é‡åœºæ™¯ä¸‹çš„ç¼ºé™·å­˜å‚¨æ•ˆç‡å’Œæ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ˜¯å·¥ä¸šè´¨é‡æ£€æµ‹ç³»ç»Ÿä¸­æ‰¹é‡æ•°æ®å¤„ç†çš„æ ¸å¿ƒæ¥å£ã€‚</p>
<h5 data-id="heading-8">ç¼ºé™·åˆ†ç±»å’Œç›¸ä¼¼åº¦æœç´¢</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69d5c9ce4f45418f98211c04a3671c98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=wAK42ef85AE6AOc8jg%2B47%2B6pBaI%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šç¼ºé™·æ™ºèƒ½åŒ–åˆ†ç±»çš„æ ¸å¿ƒå®ç°ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>æŠ€æœ¯é€‰å‹ç²¾å‡†ï¼šåˆ©ç”¨ PostgreSQL + pgvector å®ç°æ•°æ®åº“å±‚é¢çš„é«˜æ•ˆç›¸ä¼¼åº¦æŸ¥è¯¢ï¼Œå…¼é¡¾æ€§èƒ½å’Œå¼€å‘æ•ˆç‡ï¼›</p>
<p>ä¸šåŠ¡é€‚é…æ€§å¼ºï¼šè¿”å› Top-K ç›¸ä¼¼ç»“æœ + ç›¸ä¼¼åº¦åˆ†æ•°ï¼Œæ—¢æ”¯æŒè‡ªåŠ¨åˆ†ç±»ï¼Œä¹Ÿæ”¯æŒäººå·¥ç¡®è®¤ï¼Œç¬¦åˆå·¥ä¸šè´¨æ£€çš„å®é™…æµç¨‹ï¼›</p>
<p>å¤ç”¨æ€§é«˜ï¼šä¸ä¹‹å‰çš„ç‰¹å¾æå–ã€å‘é‡åºåˆ—åŒ–ã€æ•°æ®å­˜å‚¨é€»è¾‘å®Œå…¨å…¼å®¹ï¼Œå½¢æˆ â€œæå–â†’å­˜å‚¨â†’åˆ†ç±»â€ çš„å®Œæ•´é“¾è·¯ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå°†å†å²ç¼ºé™·æ•°æ®è½¬åŒ–ä¸ºåˆ†ç±»èƒ½åŠ›ã€ï¼Œé€šè¿‡æ— ç›‘ç£çš„ç›¸ä¼¼åº¦åŒ¹é…å®ç°æ–°ç¼ºé™·çš„è‡ªåŠ¨åˆ†ç±»ï¼Œå¤§å¹…é™ä½äººå·¥æ ‡æ³¨æˆæœ¬ï¼Œæå‡å·¥ä¸šè´¨æ£€çš„æ™ºèƒ½åŒ–æ°´å¹³å’Œæ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e077e5e9425742f6b5710406942523cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=Nvqj9z1RrHGPwXjoAtrGsoJX5Xs%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šè´¨é‡ç»Ÿè®¡åˆ†æçš„æ ¸å¿ƒæ¥å£ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>æ€§èƒ½é«˜æ•ˆï¼šæ•°æ®åº“å±‚é¢å®Œæˆèšåˆè®¡ç®—ï¼Œé¿å…åº”ç”¨å±‚å†—ä½™å¤„ç†ï¼›</p>
<p>ä¸šåŠ¡è´´åˆï¼šåˆ†ç»„ç²’åº¦ã€ç»Ÿè®¡æŒ‡æ ‡ç²¾å‡†åŒ¹é…å·¥ä¸šè´¨é‡ç®¡æ§éœ€æ±‚ï¼›</p>
<p>ç»“æœç»“æ„åŒ–ï¼šè¿”å›å€¼ä¾¿äºæŠ¥è¡¨å±•ç¤ºå’Œä¸Šå±‚ä¸šåŠ¡æ‰©å±•ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå°†åˆ†æ•£çš„ç¼ºé™·æ•°æ®è½¬åŒ–ä¸ºå¯å†³ç­–çš„è´¨é‡æ´å¯Ÿã€â€”â€” é€šè¿‡å¤šç»´åº¦ç»Ÿè®¡ï¼Œè®©ç”Ÿäº§ç®¡ç†è€…å¿«é€Ÿå®šä½è´¨é‡é—®é¢˜ã€è¯„ä¼°ä¼˜åŒ–æ•ˆæœï¼Œæ¨åŠ¨å·¥ä¸šç”Ÿäº§çš„ç²¾ç»†åŒ–è´¨é‡ç®¡æ§ã€‚</p>
<h5 data-id="heading-9">é¢„æµ‹æ€§ç»´æŠ¤å’Œæ ¹å› åˆ†æ</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2136d18c5aa40449b42125c398268de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=yY6umzsAclAUb1ZltRBgPP2dhoU%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šç¼ºé™·æ ¹å› åˆ†æçš„æ™ºèƒ½åŒ–å®ç°ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>æŠ€æœ¯é€‰å‹è´´åˆåœºæ™¯ï¼šç”¨ä½™å¼¦ç›¸ä¼¼åº¦é‡åŒ–ç‰¹å¾ç›¸ä¼¼æ€§ï¼Œæ—¶åºç›¸é‚»è®¡ç®—è´´åˆç”Ÿäº§å®é™…ï¼›</p>
<p>ç»“æœå®¢è§‚å¯è½åœ°ï¼šåŸºäºé‡åŒ–æŒ‡æ ‡ + é…ç½®é˜ˆå€¼åˆ¤æ–­æ ¹å› ï¼Œæä¾›é’ˆå¯¹æ€§å»ºè®®ï¼Œé¿å… â€œçº¸ä¸Šè°ˆå…µâ€ï¼›</p>
<p>é“¾è·¯å…¼å®¹å¤ç”¨ï¼šä¸ä¹‹å‰çš„ç‰¹å¾æå–ã€å­˜å‚¨ã€åˆ†ç±»é€»è¾‘æ— ç¼è¡”æ¥ï¼Œå½¢æˆ â€œæ•°æ®å­˜å‚¨â†’åˆ†æå†³ç­–â€ çš„å®Œæ•´é—­ç¯ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå°†éç»“æ„åŒ–çš„ç¼ºé™·å›¾åƒæ•°æ®ï¼Œè½¬åŒ–ä¸ºå¯æŒ‡å¯¼ç”Ÿäº§ä¼˜åŒ–çš„æ ¹å› æ´å¯Ÿã€ï¼Œå¸®åŠ©ç”Ÿäº§éƒ¨é—¨å¿«é€Ÿå®šä½é—®é¢˜ã€å‡å°‘æ— æ•ˆæ’æŸ¥ï¼Œæ¨åŠ¨å·¥ä¸šè´¨é‡ç®¡æ§ä» â€œè¢«åŠ¨æ£€æµ‹â€ å‘ â€œä¸»åŠ¨é¢„é˜²â€ è½¬å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa11b96bc710467f859194a02dafc8e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=NSp9sD6CXjlhyUVAdDsGo9Q%2FEFU%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šè®¾å¤‡é¢„é˜²æ€§ç»´æŠ¤çš„æ™ºèƒ½åŒ–å®ç°ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>æ•°æ®é©±åŠ¨ï¼šåŸºäºæ—¶åºç¼ºé™·æ•°æ®è®¡ç®—å¢é•¿é€Ÿç‡ï¼Œé¿å…ä¸»è§‚åˆ¤æ–­ï¼Œé¢„æµ‹ç»“æœå®¢è§‚å¯å¤ç°ï¼›</p>
<p>ä¸šåŠ¡è´´åˆï¼šç»“æœåŒ…å«ç´§æ€¥åº¦ã€å…·ä½“å»ºè®®ã€æ—¶é—´é¢„ä¼°ï¼Œç›´æ¥é€‚é…å·¥ä¸šè¿ç»´æµç¨‹ï¼›</p>
<p>é“¾è·¯å…¼å®¹ï¼šå¤ç”¨ä¹‹å‰çš„ç¼ºé™·å­˜å‚¨æ•°æ®ï¼Œæ— éœ€é¢å¤–å»ºè®¾æ•°æ®é“¾è·¯ï¼Œé™ä½è½åœ°æˆæœ¬ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œå°†ç¼ºé™·æ•°æ®è½¬åŒ–ä¸ºè®¾å¤‡ç»´æŠ¤å†³ç­–ã€ï¼Œé€šè¿‡æå‰é¢„åˆ¤è®¾å¤‡æ•…éšœï¼Œå‡å°‘éè®¡åˆ’åœæœºæ—¶é—´ï¼Œé™ä½ç”Ÿäº§æŸå¤±ï¼Œæ¨åŠ¨å·¥ä¸šè¿ç»´ä» â€œè¢«åŠ¨ç»´ä¿®â€ å‘ â€œä¸»åŠ¨é¢„é˜²â€ è½¬å‹ï¼Œæ˜¯æ™ºèƒ½åˆ¶é€ åœºæ™¯ä¸­è´¨é‡ç®¡æ§ä¸è®¾å¤‡ç®¡ç†çš„æ ¸å¿ƒè¡”æ¥æ¥å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/550f92cfc07243a1b15b624283c57d05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764852901&amp;x-signature=KbInD4bkoR7ykMqgF0osEEHzWhc%3D" alt="" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ˜¯ å·¥ä¸šè´¨é‡è¶‹åŠ¿ç›‘æ§çš„è½»é‡çº§å®ç°ï¼Œè®¾è®¡ä¸Šï¼š</p>
<p>ç®€æ´å®ç”¨ï¼šç›´æ¥è¿”å›æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ— éœ€ä¸Šå±‚äºŒæ¬¡è§£æï¼Œå¿«é€Ÿé€‚é…å¯è§†åŒ–åœºæ™¯ï¼›</p>
<p>æŒ‡æ ‡å…¨é¢ï¼šå…¼é¡¾ç¼ºé™·æ•°ï¼ˆé¢‘ç‡ï¼‰å’Œä¸¥é‡ç¨‹åº¦ï¼ˆå½±å“ï¼‰ï¼Œå…¨é¢åæ˜ è´¨é‡è¶‹åŠ¿ï¼›</p>
<p>é“¾è·¯å…¼å®¹ï¼šå¤ç”¨ defect_features è¡¨æ•°æ®ï¼Œä¸ä¹‹å‰çš„ç¼ºé™·å­˜å‚¨ã€ç»Ÿè®¡é€»è¾‘æ— ç¼è¡”æ¥ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼æ˜¯ã€Œä¸ºè´¨é‡ç›‘æ§æä¾›ç›´è§‚ã€æ—¶åºåŒ–çš„è¶‹åŠ¿æ•°æ®ã€ï¼Œå¸®åŠ©ç”Ÿäº§ç®¡ç†è€…å¿«é€ŸæŒæ¡è´¨é‡å˜åŒ–åŠ¨æ€ï¼Œä¸ºå†³ç­–æä¾›æ•°æ®æ”¯æ’‘ã€‚è‹¥éœ€é€‚é…æ›´å¤æ‚çš„å¯è§†åŒ–åœºæ™¯ï¼ˆå¦‚æŠ˜çº¿å›¾ã€è·¨ç»´åº¦å¯¹æ¯”ï¼‰ï¼Œå¯é€šè¿‡ â€œè¿”å›ç»“æ„åŒ–æ•°æ® + è¡¥å……ç¼ºå¤±æ—¥æœŸâ€ è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæå‡æ‰©å±•æ€§å’Œç²¾å‡†åº¦ã€‚</p>
<h2 data-id="heading-10">æ€§èƒ½æŒ‡æ ‡</h2>
<p>è¯¥ç³»ç»Ÿä¸Šçº¿åå–å¾—çš„æˆæœï¼š</p>
<p><strong>æŒ‡æ ‡</strong></p>
<p><strong>å®æ–½å‰</strong></p>
<p><strong>å®æ–½å</strong></p>
<p><strong>æ”¹è¿›</strong></p>
<p>ç¼ºé™·æ¼æ£€ç‡</p>
<p>3.5%</p>
<p>0.8%</p>
<p>â†“77%</p>
<p>æ£€æµ‹é€Ÿåº¦</p>
<p>15ç§’/ä»¶</p>
<p>0.5ç§’/ä»¶</p>
<p>â†‘30å€</p>
<p>äººå·¥æˆæœ¬</p>
<p>100ä¸‡/å¹´</p>
<p>30ä¸‡/å¹´</p>
<p>â†“70%</p>
<p>è®¾å¤‡æ•…éšœé¢„è­¦æ—¶é—´</p>
<p>0å°æ—¶</p>
<p>48å°æ—¶</p>
<p>+48h</p>
<p>ç³»ç»Ÿå¯ç”¨æ€§</p>
<p>95%</p>
<p>99.5%</p>
<p>â†‘4.5%</p>
<h4 data-id="heading-11">æŠ€æœ¯äº®ç‚¹</h4>
<h4 data-id="heading-12">å‘é‡æ•°æ®åº“çš„ä¼˜åŠ¿ä½“ç°</h4>
<ol>
<li>
<p><strong>å®æ—¶æ€§</strong>ï¼šæ¯«ç§’çº§çš„ç›¸ä¼¼åº¦æœç´¢ï¼Œæ»¡è¶³ç”Ÿäº§çº¿å®æ—¶æ£€æµ‹éœ€æ±‚</p>
</li>
<li>
<p><strong>å‡†ç¡®æ€§</strong>ï¼šé€šè¿‡å‘é‡ç›¸ä¼¼åº¦è€Œéè§„åˆ™åŒ¹é…ï¼Œæé«˜äº†ç¼ºé™·è¯†åˆ«çš„å‡†ç¡®ç‡</p>
</li>
<li>
<p><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒPBçº§æ•°æ®å­˜å‚¨ï¼Œå¯åº”ç”¨äºå¤šæ¡äº§çº¿</p>
</li>
<li>
<p><strong>å¯è§£é‡Šæ€§</strong>ï¼šé€šè¿‡ç›¸ä¼¼åº¦æœç´¢æ‰¾åˆ°å†å²æ¡ˆä¾‹ï¼Œä¾¿äºå·¥ç¨‹å¸ˆåˆ†æå’Œæ”¹è¿›</p>
</li>
</ol>
<p>ä¸openGaussçš„ç»“åˆä¼˜åŠ¿</p>
<ul>
<li>
<p><strong>å…¼å®¹æ€§</strong>ï¼šä¸PostgreSQLå…¼å®¹ï¼Œé™ä½è¿ç§»æˆæœ¬</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§</strong>ï¼šæ”¯æŒè¡Œçº§å®‰å…¨ç­–ç•¥å’ŒåŠ å¯†å­˜å‚¨</p>
</li>
<li>
<p><strong>æˆæœ¬</strong>ï¼šå¼€æºå…è´¹ï¼Œé™ä½ä¼ä¸šITæˆæœ¬</p>
</li>
</ul>
<h2 data-id="heading-13">æœ€ä½³å®è·µ</h2>
<h4 data-id="heading-14">æ•°æ®è´¨é‡ç®¡ç†</h4>
<p>-- å®šæœŸæ¸…ç†å¼‚å¸¸æ•°æ®</p>
<p>DELETE FROM defect_features</p>
<p>WHERE severity &lt; 0 OR severity &gt; 1</p>
<p>OR feature_vector IS NULL;</p>
<p>-- æ•°æ®å¤‡ä»½å’Œæ¢å¤</p>
<p>BACKUP DATABASE manufacturing_db</p>
<p>TO '/backup/manufacturing_db_backup.sql';</p>
<h4 data-id="heading-15">æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>
<p><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç®—æ³•ï¼ˆIVFFLAT vs HNSWï¼‰</p>
</li>
<li>
<p><strong>åˆ†åŒºç­–ç•¥</strong>ï¼šæŒ‰ç”Ÿäº§æ—¥æœŸåˆ†åŒºï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</p>
</li>
<li>
<p><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šç¼“å­˜çƒ­ç‚¹ç¼ºé™·ç±»å‹çš„æ ‡å‡†å‘é‡</p>
</li>
</ul>
<h4 data-id="heading-16">ç›‘æ§å’Œå‘Šè­¦</h4>
<p>-- åˆ›å»ºç›‘æ§è§†å›¾</p>
<p>CREATE VIEW defect_alert_view AS</p>
<p>SELECT</p>
<p>production_line,</p>
<p>defect_type,</p>
<p>COUNT(*) as hourly_count,</p>
<p>AVG(severity) as avg_severity</p>
<p>FROM defect_features</p>
<p>WHERE production_date &gt;= CURRENT_TIMESTAMP - INTERVAL '1 hour'</p>
<p>GROUP BY production_line, defect_type</p>
<p>HAVING COUNT(*) &gt; 10 OR AVG(severity) &gt; 0.7;</p>
<h2 data-id="heading-17">å†™åœ¨æœ€å</h2>
<p><strong>æŒ‘æˆ˜</strong></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>ç‰¹å¾å‘é‡ç»´åº¦é«˜</p>
<p>ä½¿ç”¨PCAæˆ–è‡ªç¼–ç å™¨é™ç»´ï¼Œä»2048ç»´é™è‡³512ç»´</p>
<p>æ¨¡å‹æ¼‚ç§»</p>
<p>å®šæœŸé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œä½¿ç”¨åœ¨çº¿å­¦ä¹ æŠ€æœ¯</p>
<p>æ•°æ®éšç§</p>
<p>å¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŒ¿ååŒ–å¤„ç†ï¼Œä½¿ç”¨å·®åˆ†éšç§æŠ€æœ¯</p>
<p>ç³»ç»Ÿå»¶è¿Ÿ</p>
<p>ä½¿ç”¨GPUåŠ é€Ÿç‰¹å¾æå–ï¼Œä¼˜åŒ–ç´¢å¼•å‚æ•°</p>
<h4 data-id="heading-18">ä¸»è¦æˆæœ</h4>
<p>é€šè¿‡å°†openGausså‘é‡æ•°æ®åº“åº”ç”¨äºæ™ºèƒ½åˆ¶é€ ç¼ºé™·æ£€æµ‹ç³»ç»Ÿï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>
<p>ç¼ºé™·æ£€æµ‹å‡†ç¡®ç‡æå‡è‡³99.2%</p>
</li>
<li>
<p>ç³»ç»Ÿå“åº”æ—¶é—´ä»ç§’çº§é™è‡³æ¯«ç§’çº§</p>
</li>
<li>
<p>é¢„æµ‹æ€§ç»´æŠ¤æå‰48å°æ—¶é¢„è­¦è®¾å¤‡æ•…éšœ</p>
</li>
<li>
<p>å¹´åº¦æˆæœ¬èŠ‚çœ700ä¸‡å…ƒ</p>
</li>
</ul>
<p>æœªæ¥æ–¹å‘</p>
<ol>
<li>
<p><strong>å¤šæ¨¡æ€èåˆ</strong>ï¼šç»“åˆå›¾åƒã€ä¼ æ„Ÿå™¨æ•°æ®å’Œæ–‡æœ¬æ—¥å¿—çš„å¤šæ¨¡æ€å‘é‡</p>
</li>
<li>
<p><strong>è¾¹ç¼˜è®¡ç®—</strong>ï¼šåœ¨äº§çº¿ç«¯éƒ¨ç½²è½»é‡çº§æ¨¡å‹ï¼Œå®ç°æœ¬åœ°æ¨ç†</p>
</li>
<li>
<p><strong>è”é‚¦å­¦ä¹ </strong>ï¼šåœ¨å¤šä¸ªå·¥å‚é—´å…±äº«æ¨¡å‹è€Œä¸æš´éœ²åŸå§‹æ•°æ®</p>
</li>
<li>
<p><strong>æ•°å­—å­ªç”Ÿ</strong>ï¼šå»ºç«‹è™šæ‹Ÿç”Ÿäº§çº¿ï¼Œè¿›è¡Œç¼ºé™·é¢„æµ‹å’Œå·¥è‰ºä¼˜åŒ–</p>
</li>
</ol>
<p>å»ºè®®</p>
<p>å¯¹äºè®¡åˆ’é‡‡ç”¨å‘é‡æ•°æ®åº“çš„åˆ¶é€ ä¼ä¸šï¼Œæˆ‘ä»¬å»ºè®®ï¼š</p>
<ol>
<li>
<p><strong>ä»å°è§„æ¨¡è¯•ç‚¹å¼€å§‹</strong>ï¼Œé€‰æ‹©ä¸€æ¡äº§çº¿è¿›è¡ŒPOCéªŒè¯</p>
</li>
<li>
<p><strong>å»ºç«‹å®Œå–„çš„æ•°æ®æ²»ç†ä½“ç³»</strong>ï¼Œç¡®ä¿æ•°æ®è´¨é‡</p>
</li>
<li>
<p><strong>æŠ•å…¥äººæ‰åŸ¹å…»</strong>ï¼ŒåŸ¹è®­å›¢é˜ŸæŒæ¡AIå’Œæ•°æ®åº“æŠ€æœ¯</p>
</li>
<li>
<p><strong>åˆ¶å®šé•¿æœŸè§„åˆ’</strong>ï¼Œé€æ­¥æ‰©å±•åˆ°å…¨å‚åº”ç”¨</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€]]></title>    <link>https://juejin.cn/post/7577268271213183012</link>    <guid>https://juejin.cn/post/7577268271213183012</guid>    <pubDate>2025-11-27T11:35:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577268271213183012" data-draft-id="7577042546094899242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-27T11:35:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T11:35:38.000Z" title="Thu Nov 27 2025 11:35:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1bd2b15c6be4c5cb7900bef6c5b96c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764848866&amp;x-signature=2VLnxWzYBrKeCaV1BMXHDaf8%2Bic%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ä¸ªçœŸå®æ•…äº‹</h2>
<p>å»å¹´10æœˆï¼Œæˆ‘æ‰‹é‡Œæœ‰ä¸ªReacté¡¹ç›®è¦é‡æ„ï¼Œ2000å¤šè¡Œçš„ä¸Šå¸ç±»ï¼Œçœ‹ç€å°±å¤´ç–¼ã€‚æ¯æ¬¡è®©Claude Codeå¸®æˆ‘ä¼˜åŒ–ä»£ç ï¼Œæˆ‘éƒ½è¦é‡å¤äº¤ä»£ä¸€éï¼š</p>
<ul>
<li>"è®°å¾—ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼"</li>
<li>"APIè°ƒç”¨è¦åŠ é”™è¯¯å¤„ç†"</li>
<li>"ç»„ä»¶è¦ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™"</li>
</ul>
<p>å¤åˆ¶ç²˜è´´è¿™äº›è¦æ±‚ï¼Œå°‘è¯´ä¹Ÿå¾—ä¸¤ä¸‰åˆ†é’Ÿã€‚æ›´çƒ¦çš„æ˜¯ï¼ŒèŠäº†åå‡ è½®ä¹‹åï¼ŒClaude Codeç»å¸¸ä¼š"å¿˜è®°"æˆ‘æœ€åˆçš„è¦æ±‚ï¼Œåˆå¼€å§‹å†™å‡ºä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ã€‚</p>
<p>ç›´åˆ°æˆ‘åœ¨æ–‡æ¡£é‡Œç¿»åˆ°äº†SkillåŠŸèƒ½ã€‚</p>
<p>è¯•äº†ä¸€å‘¨åï¼Œæˆ‘æŠŠé‚£äº›é‡å¤çš„è¦æ±‚å…¨å°è£…æˆäº†å‡ ä¸ªskillæ–‡ä»¶ã€‚ç°åœ¨åªè¦ä¸€å¥<code>@skill react-refactor</code>ï¼ŒClaude Codeç«‹åˆ»å°±çŸ¥é“è¯¥æ€ä¹ˆåšã€‚é‚£ä¸ª2000è¡Œçš„ç±»ï¼ŒåŸæœ¬ä¼°è®¡è¦èŠ±ä¸‰å¤©æ—¶é—´é‡æ„ï¼Œæœ€åä¸¤ä¸ªä¸‹åˆå°±æå®šäº†ã€‚</p>
<h2 data-id="heading-1">Skillåˆ°åº•æ˜¯ä»€ä¹ˆ</h2>
<p>è¯´ç™½äº†ï¼ŒSkillå°±æ˜¯ç»™Claude Codeè£…æŠ€èƒ½åŒ…ã€‚</p>
<p>ä½ åœ¨<code>.claude/skills/</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmarkdownæ–‡ä»¶ï¼ŒæŠŠå¸¸ç”¨çš„æç¤ºè¯ã€å·¥ä½œæµç¨‹ã€ä»£ç è§„èŒƒå†™è¿›å»ã€‚éœ€è¦çš„æ—¶å€™ï¼Œä¸€å¥<code>@skill æŠ€èƒ½å</code>å°±èƒ½è°ƒç”¨ã€‚å°±åƒæ¸¸æˆé‡Œç»™è§’è‰²è£…å¤‡ä¸åŒæŠ€èƒ½ï¼Œéœ€è¦è¾“å‡ºçš„æ—¶å€™è£…è¾“å‡ºæŠ€èƒ½ï¼Œéœ€è¦å¦å…‹çš„æ—¶å€™è£…é˜²å¾¡æŠ€èƒ½ã€‚</p>
<p>æ¥çœ‹ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "Reactä»£ç å®¡æŸ¥ä¸“å®¶"
<span class="hljs-section">description: "ä¸“é—¨å®¡æŸ¥Reactä»£ç çš„è´¨é‡ã€æ€§èƒ½å’Œæœ€ä½³å®è·µ"
---</span>

<span class="hljs-section"># Reactä»£ç å®¡æŸ¥æµç¨‹</span>

ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„Reactä»£ç å®¡æŸ¥ä¸“å®¶ã€‚è¯·æŒ‰ä»¥ä¸‹æ ‡å‡†å®¡æŸ¥ä»£ç ï¼š

<span class="hljs-section">## å®¡æŸ¥é‡ç‚¹</span>
<span class="hljs-bullet">1.</span> <span class="hljs-strong">**ç»„ä»¶è®¾è®¡**</span>
<span class="hljs-bullet">   -</span> å•ä¸€èŒè´£åŸåˆ™
<span class="hljs-bullet">   -</span> Propsç±»å‹å®šä¹‰çš„å®Œæ•´æ€§
<span class="hljs-bullet">   -</span> ç»„ä»¶æ‹†åˆ†çš„åˆç†æ€§

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**æ€§èƒ½ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> ä¸å¿…è¦çš„é‡æ¸²æŸ“
<span class="hljs-bullet">   -</span> useMemo/useCallbackçš„ä½¿ç”¨
<span class="hljs-bullet">   -</span> åˆ—è¡¨æ¸²æŸ“çš„keyå€¼

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ä»£ç è´¨é‡**</span>
<span class="hljs-bullet">   -</span> TypeScriptç±»å‹å®‰å…¨
<span class="hljs-bullet">   -</span> é”™è¯¯è¾¹ç•Œå¤„ç†
<span class="hljs-bullet">   -</span> å¯è®¿é—®æ€§ï¼ˆa11yï¼‰

<span class="hljs-section">## è¾“å‡ºæ ¼å¼</span>
<span class="hljs-bullet">-</span> é—®é¢˜åˆ—è¡¨ï¼ˆæŒ‰ä¸¥é‡ç¨‹åº¦æ’åºï¼‰
<span class="hljs-bullet">-</span> å…·ä½“çš„ä»£ç å»ºè®®
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§æ ‡æ³¨ï¼ˆP0/P1/P2ï¼‰
</code></pre>
<p>æŠŠè¿™ä¸ªæ–‡ä»¶ä¿å­˜ä¸º<code>.claude/skills/react-review.md</code>ï¼Œä»¥åå®¡æŸ¥Reactä»£ç æ—¶ï¼Œç›´æ¥<code>@skill react-review</code>å°±è¡Œã€‚Claude Codeä¼šä¸¥æ ¼æŒ‰ç…§ä½ å®šä¹‰çš„æ ‡å‡†æ¥å®¡æŸ¥ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆæ‰‹å†™æç¤ºè¯æ’‘ä¸ä½äº†</h2>
<p>æˆ‘ä¹‹å‰ä¹Ÿæ˜¯æç¤ºè¯å·¥ç¨‹å¸ˆï¼ŒNotioné‡Œå­˜äº†å‡ åæ¡ç²¾å¿ƒæ‰“ç£¨çš„æç¤ºè¯æ¨¡æ¿ã€‚ä½†ç”¨äº†å‡ ä¸ªæœˆåï¼Œå‘ç°è¿™ç©æ³•æœ‰ç¡¬ä¼¤ï¼š</p>
<p><strong>é‡å¤åŠ³åŠ¨å¤ªå¤š</strong>
æ¯æ¬¡éƒ½è¦ä»Notionå¤åˆ¶ç²˜è´´ï¼Œæœ‰æ—¶å€™è¿˜è¦æ ¹æ®å½“å‰é¡¹ç›®è°ƒæ•´å‡ ä¸ªè¯ã€‚ä¸€å¤©ä¸‹æ¥å…‰æ˜¯å¤åˆ¶ç²˜è´´æç¤ºè¯ï¼Œå°±è¦èŠ±åŠå°æ—¶ã€‚</p>
<p><strong>ç‰ˆæœ¬ç®¡ç†æ··ä¹±</strong>
ä»Šå¤©ç”¨çš„æç¤ºè¯å’Œä¸Šå‘¨çš„ä¸ä¸€æ ·ï¼Œæ•ˆæœä¹Ÿä¸ç¨³å®šã€‚æƒ³å›æº¯"ä¸Šæ¬¡é‚£ä¸ªå¥½ç”¨çš„ç‰ˆæœ¬"ï¼ŸæŠ±æ­‰ï¼Œæ‰¾ä¸åˆ°äº†ã€‚</p>
<p><strong>å›¢é˜Ÿåä½œæ˜¯ç¾éš¾</strong>
æˆ‘çš„å¥½æç¤ºè¯ï¼ŒåŒäº‹æƒ³ç”¨ï¼Ÿæ‰‹åŠ¨å‘å¾®ä¿¡ã€‚åŒäº‹æ”¹è¿›äº†ï¼Ÿåˆè¦æ‰‹åŠ¨åŒæ­¥å›æ¥ã€‚è¿™æ•ˆç‡è·ŸçŸ³å™¨æ—¶ä»£æ²¡åŒºåˆ«ã€‚</p>
<p><strong>AIä¼šé—å¿˜</strong>
é•¿å¯¹è¯é‡Œï¼ŒClaude Codeå¾ˆå®¹æ˜“å¿˜è®°ä½ æœ€åˆçš„è¦æ±‚ã€‚èŠåˆ°ç¬¬20è½®ï¼Œä½ å‘ç°å®ƒåˆåœ¨çŠ¯ä¹‹å‰è¯´è¿‡ä¸è¦çŠ¯çš„é”™è¯¯ã€‚</p>
<p>SkillæŠŠè¿™äº›é—®é¢˜ä¸€æ¬¡æ€§è§£å†³äº†ï¼š</p>
<ul>
<li>ç‰ˆæœ¬åŒ–ï¼šç”¨Gitç®¡ç†ï¼Œå›æº¯éšä¾¿</li>
<li>å¯å…±äº«ï¼šå›¢é˜Ÿä»“åº“ä¸€æ‹‰ï¼Œæ‰€æœ‰äººåŒæ­¥</li>
<li>å§‹ç»ˆç”Ÿæ•ˆï¼šä¸ä¼šå› ä¸ºå¯¹è¯å¤ªé•¿è€Œå¤±æ•ˆ</li>
</ul>
<h2 data-id="heading-3">æˆ‘çš„ç¬¬ä¸€ä¸ªSkillï¼šAPIæ¥å£ç”Ÿæˆå™¨</h2>
<p>é‚£ä¸ªç”µå•†é¡¹ç›®é‡Œï¼Œåç«¯ç»™æˆ‘æ‰”äº†ä¸ª100å¤šä¸ªæ¥å£çš„Swaggeræ–‡æ¡£ã€‚æ‰‹åŠ¨å¯¹æ¥çš„è¯ï¼Œä¸€ä¸ªæ¥å£è¦å†™ï¼š</p>
<ol>
<li>TypeScriptç±»å‹å®šä¹‰</li>
<li>axiosè¯·æ±‚å‡½æ•°</li>
<li>é”™è¯¯å¤„ç†é€»è¾‘</li>
<li>loadingçŠ¶æ€ç®¡ç†</li>
</ol>
<p>ç®—äº†ä¸€ä¸‹ï¼Œ100ä¸ªæ¥å£å·®ä¸å¤šè¦30ä¸ªå°æ—¶ã€‚</p>
<p>æˆ‘èŠ±äº†1ä¸ªå°æ—¶ï¼Œå†™äº†ä¸ª<code>api-generator</code>çš„skillï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "APIæ¥å£ä»£ç ç”Ÿæˆå™¨"
description: "æ ¹æ®æ¥å£æ–‡æ¡£ç”ŸæˆTSç±»å‹å®šä¹‰å’Œaxioså°è£…"
<span class="hljs-section">version: "1.3.0"
---</span>

<span class="hljs-section"># APIä»£ç ç”Ÿæˆä¸“å®¶</span>

ä½ æ˜¯ä¸€ä½å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ“…é•¿å‰åç«¯æ¥å£å¯¹æ¥ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®APIæ–‡æ¡£ç”Ÿæˆé«˜è´¨é‡çš„TypeScriptä»£ç ã€‚

<span class="hljs-section">## ç”Ÿæˆå†…å®¹</span>

<span class="hljs-section">### 1. TypeScriptç±»å‹å®šä¹‰</span>
<span class="hljs-code">```typescript
// è¯·æ±‚å‚æ•°ç±»å‹
interface GetUserRequest {
  userId: string;
  includeDetails?: boolean;
}

// å“åº”æ•°æ®ç±»å‹
interface GetUserResponse {
  id: string;
  name: string;
  email: string;
  createdAt: string;
}
</span></code></pre>
<h3 data-id="heading-4">2. Axiosè¯·æ±‚å‡½æ•°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getUserAPI = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">params</span>: <span class="hljs-title class_">GetUserRequest</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GetUserResponse</span>&gt; =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> request.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">GetUserResponse</span>&gt;(<span class="hljs-string">'/api/user'</span>, { params });
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
};
</code></pre>
<h3 data-id="heading-5">3. React Hookå°è£…ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGetUser</span> = (<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [data, setData] = useState&lt;<span class="hljs-title class_">GetUserResponse</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserAPI</span>({ userId });
        <span class="hljs-title function_">setData</span>(result);
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-title function_">setError</span>(err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>);
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
      }
    };
    <span class="hljs-title function_">fetchData</span>();
  }, [userId]);

  <span class="hljs-keyword">return</span> { data, loading, error };
};
</code></pre>
<h2 data-id="heading-6">ä»£ç è§„èŒƒ</h2>
<ul>
<li>å‘½åéµå¾ªé©¼å³°å‘½åæ³•</li>
<li>APIå‡½æ•°ä»¥<code>API</code>ç»“å°¾</li>
<li>Hookå‡½æ•°ä»¥<code>use</code>å¼€å¤´</li>
<li>æ‰€æœ‰å¼‚æ­¥å‡½æ•°éƒ½è¦æœ‰é”™è¯¯å¤„ç†</li>
<li>å¯¼å‡ºçš„ç±»å‹å’Œå‡½æ•°éƒ½è¦åŠ JSDocæ³¨é‡Š</li>
</ul>
<h2 data-id="heading-7">è¾“å‡ºæ ¼å¼</h2>
<ol>
<li>å…ˆè¾“å‡ºç±»å‹å®šä¹‰</li>
<li>å†è¾“å‡ºAPIå‡½æ•°</li>
<li>å¦‚æœæ˜¯å¸¸ç”¨æ¥å£ï¼Œå†ç”ŸæˆHookå°è£…</li>
<li>æœ€åç»™å‡ºä½¿ç”¨ç¤ºä¾‹</li>
</ol>
<pre><code class="hljs language-python" lang="python">
æœ‰äº†è¿™ä¸ªskillï¼Œå¯¹æ¥ä¸€ä¸ªæ¥å£ä»<span class="hljs-number">30</span>åˆ†é’Ÿç¼©çŸ­åˆ°äº†<span class="hljs-number">5</span>åˆ†é’Ÿã€‚<span class="hljs-number">100</span>ä¸ªæ¥å£ï¼Œå‰ååªèŠ±äº†ä¸¤å¤©æ—¶é—´å°±å…¨éƒ¨æå®šã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå›¢é˜Ÿé‡Œçš„æ–°äººä¹Ÿèƒ½ç”¨åŒæ ·çš„è§„èŒƒç”Ÿæˆä»£ç ï¼Œæ•´ä¸ªé¡¹ç›®çš„ä»£ç é£æ ¼é«˜åº¦ç»Ÿä¸€ã€‚

<span class="hljs-comment">## é«˜çº§ç©æ³•ï¼šè®©Skillé…åˆèµ·æ¥å¹²æ´»</span>

ç”¨ç†Ÿäº†ä¹‹åï¼Œæˆ‘å‘ç°å•ä¸ªskillè¿˜ä¸å¤Ÿã€‚çœŸå®çš„å¼€å‘åœºæ™¯å¾€å¾€éœ€è¦å¤šä¸ªskillé…åˆã€‚

æ¯”å¦‚æˆ‘é‡æ„è€ä»£ç æ—¶çš„æ ‡å‡†æµç¨‹ï¼š

```bash
<span class="hljs-comment"># ç¬¬1æ­¥ï¼šåˆ†æä»£ç é—®é¢˜</span>
<span class="hljs-meta">@skill code-analyzer src/legacy/UserService.ts</span>

<span class="hljs-comment"># ç¬¬2æ­¥ï¼šåˆ¶å®šé‡æ„æ–¹æ¡ˆ</span>
<span class="hljs-meta">@skill refactor-planner</span>

<span class="hljs-comment"># ç¬¬3æ­¥ï¼šç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆé‡æ„å‰å¿…é¡»æœ‰æµ‹è¯•ä¿åº•ï¼‰</span>
<span class="hljs-meta">@skill test-generator</span>

<span class="hljs-comment"># ç¬¬4æ­¥ï¼šæ‰§è¡Œé‡æ„</span>
ï¼ˆæ‰‹åŠ¨é‡æ„æˆ–è®©Claude Codeè¾…åŠ©ï¼‰

<span class="hljs-comment"># ç¬¬5æ­¥ï¼šæœ€ç»ˆä»£ç å®¡æŸ¥</span>
<span class="hljs-meta">@skill code-reviewer</span>
</code></pre>
<p>è¿™å››ä¸ªskillä¾æ¬¡è°ƒç”¨ï¼Œå½¢æˆäº†å®Œæ•´çš„é‡æ„å·¥ä½œæµã€‚æˆ‘ç”šè‡³å†™äº†ä¸ªshellè„šæœ¬è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªæµç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># refactor-workflow.sh</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” æ­¥éª¤1/4: åˆ†æä»£ç é—®é¢˜..."</span>
claude-code @skill code-analyzer <span class="hljs-variable">$1</span>

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“‹ æ­¥éª¤2/4: åˆ¶å®šé‡æ„æ–¹æ¡ˆ..."</span>
claude-code @skill refactor-planner

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ§ª æ­¥éª¤3/4: ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹..."</span>
claude-code @skill test-generator

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æ‰§è¡Œæµ‹è¯•å¹¶ç¡®è®¤é€šè¿‡åï¼ŒæŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æ­¥éª¤4/4: æœ€ç»ˆä»£ç å®¡æŸ¥..."</span>
claude-code @skill code-reviewer
</code></pre>
<p>ç”¨è¿™ä¸ªè„šæœ¬é‡æ„è¿‡ä¸€ä¸ª2000è¡Œçš„ä¸Šå¸ç±»ï¼Œæ‹†æˆäº†7ä¸ªèŒè´£æ¸…æ™°çš„å°ç±»ã€‚æµ‹è¯•è¦†ç›–ç‡ä»40%æå‡åˆ°85%ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¯”æƒ³è±¡ä¸­é¡ºåˆ©å¾ˆå¤šã€‚</p>
<h2 data-id="heading-8">å›¢é˜Ÿå…±äº«ï¼šæŠŠSkillå½“ä½œåŸºç¡€è®¾æ–½</h2>
<p>æˆ‘ä»¬å›¢é˜Ÿç°åœ¨æŠŠskillå½“ä½œåŸºç¡€è®¾æ–½æ¥ç®¡ç†ã€‚åˆ›å»ºäº†ä¸€ä¸ªGitä»“åº“ä¸“é—¨å­˜æ”¾team-skillsï¼š</p>
<pre><code class="hljs language-bash" lang="bash">team-skills/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ react-review.md          <span class="hljs-comment"># Reactä»£ç å®¡æŸ¥</span>
â”‚   â”œâ”€â”€ vue-component-gen.md     <span class="hljs-comment"># Vueç»„ä»¶ç”Ÿæˆ</span>
â”‚   â””â”€â”€ css-optimizer.md         <span class="hljs-comment"># CSSæ€§èƒ½ä¼˜åŒ–</span>
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api-design.md            <span class="hljs-comment"># APIè®¾è®¡è§„èŒƒ</span>
â”‚   â”œâ”€â”€ database-review.md       <span class="hljs-comment"># æ•°æ®åº“å®¡æŸ¥</span>
â”‚   â””â”€â”€ security-audit.md       <span class="hljs-comment"># å®‰å…¨å®¡è®¡</span>
â””â”€â”€ common/
    â”œâ”€â”€ code-cleaner.md          <span class="hljs-comment"># ä»£ç æ¸…ç†</span>
    â”œâ”€â”€ test-generator.md        <span class="hljs-comment"># æµ‹è¯•ç”Ÿæˆ</span>
    â””â”€â”€ commit-msg.md            <span class="hljs-comment"># Gitæäº¤ä¿¡æ¯ç”Ÿæˆ</span>
</code></pre>
<p>æ¯ä¸ªå¼€å‘è€…åœ¨æœ¬åœ°é¡¹ç›®é‡Œè½¯é“¾æ¥åˆ°è¿™ä¸ªä»“åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€æ¬¡æ€§é…ç½®</span>
git <span class="hljs-built_in">clone</span> git@github.com:your-team/team-skills.git ~/.team-skills
<span class="hljs-built_in">ln</span> -s ~/.team-skills/* .claude/skills/
</code></pre>
<p>å¥½å¤„ç«‹ç«¿è§å½±ï¼š</p>
<ul>
<li><strong>æ–°äººå‹å¥½</strong>ï¼šå…¥èŒç¬¬ä¸€å¤©å°±æœ‰å®Œæ•´çš„skillåº“ï¼Œç«‹åˆ»å°±èƒ½æŒ‰è§„èŒƒå†™ä»£ç </li>
<li><strong>è‡ªåŠ¨åŒæ­¥</strong>ï¼šå›¢é˜Ÿæ›´æ–°skillåï¼Œæ‰€æœ‰äººgit pullå°±èƒ½è·å–æœ€æ–°ç‰ˆæœ¬</li>
<li><strong>ä»£ç ä¸€è‡´</strong>ï¼šä¸ç®¡è°å†™çš„ä»£ç ï¼Œé£æ ¼éƒ½é«˜åº¦ç»Ÿä¸€</li>
</ul>
<p>ä¸Šä¸ªæœˆæ¥äº†ä¸ªå®ä¹ ç”Ÿï¼Œç¬¬äºŒå¤©å°±èƒ½å†™å‡ºç¬¦åˆå›¢é˜Ÿè§„èŒƒçš„ä»£ç ã€‚è¦åœ¨ä»¥å‰ï¼Œè‡³å°‘å¾—åŸ¹è®­ä¸€å‘¨ã€‚</p>
<h2 data-id="heading-9">Skillå’ŒCLAUDE.mdæ˜¯é»„é‡‘æ­æ¡£</h2>
<p>Skillæ›´å¼ºå¤§çš„ç©æ³•ï¼Œæ˜¯é…åˆé¡¹ç›®æ ¹ç›®å½•çš„<code>CLAUDE.md</code>ä¸€èµ·ç”¨ã€‚</p>
<p>åœ¨CLAUDE.mdé‡Œå®šä¹‰é¡¹ç›®å…¨å±€è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ä¸Šä¸‹æ–‡</span>

<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šReact 18 + TypeScript 5.0 + Vite 4
<span class="hljs-bullet">-</span> ä»£ç è§„èŒƒï¼šAirbnb ESLintè§„åˆ™
<span class="hljs-bullet">-</span> æäº¤è§„èŒƒï¼šConventional Commits
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†ï¼šZustandï¼ˆç¦æ­¢ä½¿ç”¨Reduxï¼‰

<span class="hljs-section">## é‡è¦çº¦å®š</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰ç»„ä»¶å¿…é¡»æœ‰å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
<span class="hljs-bullet">-</span> APIè°ƒç”¨ç»Ÿä¸€ä½¿ç”¨ src/utils/request.ts å°è£…
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶åä½¿ç”¨PascalCaseï¼ˆå¦‚UserProfile.tsxï¼‰
<span class="hljs-bullet">-</span> å·¥å…·å‡½æ•°æ–‡ä»¶åä½¿ç”¨camelCaseï¼ˆå¦‚formatDate.tsï¼‰

<span class="hljs-section">## ç›®å½•ç»“æ„</span>
src/
â”œâ”€â”€ components/    # å…¬å…±ç»„ä»¶
â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”œâ”€â”€ hooks/        # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”œâ”€â”€ services/     # APIæœåŠ¡
â””â”€â”€ stores/       # ZustandçŠ¶æ€ç®¡ç†
</code></pre>
<p>ç„¶ååœ¨skillé‡Œå¼•ç”¨è¿™äº›è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
<span class="hljs-section">title: "Reactç»„ä»¶ç”Ÿæˆå™¨"
---</span>

<span class="hljs-section"># ç»„ä»¶ç”ŸæˆæŒ‡ä»¤</span>

ä¸¥æ ¼æŒ‰ç…§CLAUDE.mdä¸­å®šä¹‰çš„æŠ€æœ¯æ ˆã€ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒç”ŸæˆReactç»„ä»¶ã€‚

ç”Ÿæˆçš„ç»„ä»¶å¿…é¡»ï¼š
<span class="hljs-bullet">-</span> ä½¿ç”¨TypeScript
<span class="hljs-bullet">-</span> ç¬¦åˆé¡¹ç›®çš„ESLintè§„åˆ™
<span class="hljs-bullet">-</span> æ”¾åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹
<span class="hljs-bullet">-</span> ä½¿ç”¨é¡¹ç›®çº¦å®šçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
</code></pre>
<p>è¿™æ ·skillä¼šè‡ªåŠ¨è¯»å–CLAUDE.mdçš„é…ç½®ï¼Œç”Ÿæˆçš„ä»£ç å®Œå…¨ç¬¦åˆé¡¹ç›®è§„èŒƒã€‚æ–°é¡¹ç›®å…‹éš†ä¸‹æ¥ï¼Œskillä¹Ÿèƒ½ç«‹åˆ»é€‚é…ã€‚</p>
<h2 data-id="heading-10">æˆ‘çš„5ä¸ªå¿…å¤‡Skill</h2>
<p>ç”¨äº†åŠå¹´ï¼Œæˆ‘çš„skillsç›®å½•é‡Œç§¯ç´¯äº†20å¤šä¸ªskillã€‚æŒ‘å‡ ä¸ªæœ€å¸¸ç”¨çš„åˆ†äº«ä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-11">1. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨ï¼ˆtest-gen.mdï¼‰</h3>
<p>å†™å®ŒåŠŸèƒ½ä»£ç åæœ€çƒ¦çš„å°±æ˜¯è¡¥æµ‹è¯•ã€‚è¿™ä¸ªskillèƒ½åˆ†æå‡½æ•°é€»è¾‘ï¼Œè‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼ŒåŒ…æ‹¬è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸åœºæ™¯ã€‚</p>
<p>æ•ˆæœï¼šæˆ‘çš„æµ‹è¯•è¦†ç›–ç‡ä»40%æå‡åˆ°85%ï¼ŒèŠ‚çœäº†è‡³å°‘ä¸€åŠçš„æµ‹è¯•ç¼–å†™æ—¶é—´ã€‚</p>
<h3 data-id="heading-12">2. Gitæäº¤ä¿¡æ¯ç”Ÿæˆå™¨ï¼ˆcommit-msg.mdï¼‰</h3>
<p>æ¯æ¬¡æäº¤éƒ½è¦æƒ³commit messageï¼ŒæŒºæµªè´¹è„‘ç»†èƒçš„ã€‚è¿™ä¸ªskillåˆ†ægit diffå†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆConventional Commitsè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚</p>
<p>ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">feat(user-auth): æ·»åŠ OAuth2.0ç™»å½•åŠŸèƒ½

<span class="hljs-deletion">- é›†æˆGoogleå’ŒGitHubç¬¬ä¸‰æ–¹ç™»å½•</span>
<span class="hljs-deletion">- æ·»åŠ JWT tokenåˆ·æ–°æœºåˆ¶</span>
<span class="hljs-deletion">- å®Œå–„ç”¨æˆ·æƒé™æ ¡éªŒä¸­é—´ä»¶</span>

Closes #123
</code></pre>
<p>è™½ç„¶åªæœ‰30è¡Œä»£ç ï¼Œä½†è¿™æ˜¯æˆ‘æ¯å¤©éƒ½è¦ç”¨çš„skillã€‚ç´¯è®¡èŠ‚çœçš„æ—¶é—´å·²ç»å¥½å‡ ä¸ªå°æ—¶äº†ã€‚</p>
<h3 data-id="heading-13">3. ä»£ç é‡æ„åŠ©æ‰‹ï¼ˆrefactor.mdï¼‰</h3>
<p>è€ä»£ç éœ€è¦ä¼˜åŒ–ä½†ä¸çŸ¥ä»ä½•ä¸‹æ‰‹æ—¶ï¼Œè¿™ä¸ªskillèƒ½ï¼š</p>
<ul>
<li>è¯†åˆ«ä»£ç åå‘³é“</li>
<li>ç»™å‡ºé‡æ„ä¼˜å…ˆçº§æ’åº</li>
<li>æä¾›step-by-stepé‡æ„è®¡åˆ’</li>
<li>ä¿è¯é‡æ„å‰ååŠŸèƒ½ä¸€è‡´</li>
</ul>
<p>é‚£ä¸ª2000è¡Œçš„ä¸Šå¸ç±»å°±æ˜¯é è¿™ä¸ªskillæå®šçš„ã€‚</p>
<h3 data-id="heading-14">4. å®‰å…¨å®¡æŸ¥ä¸“å®¶ï¼ˆsecurity-audit.mdï¼‰</h3>
<p>ä¸“é—¨æ£€æŸ¥ä»£ç å®‰å…¨é—®é¢˜ï¼š</p>
<ul>
<li>SQLæ³¨å…¥é£é™©</li>
<li>XSSæ”»å‡»é˜²æŠ¤</li>
<li>æ•æ„Ÿä¿¡æ¯æ³„éœ²</li>
<li>æƒé™æ ¡éªŒå®Œæ•´æ€§</li>
</ul>
<p>æœ‰æ¬¡å‡†å¤‡ä¸Šçº¿å‰ç”¨è¿™ä¸ªskillæ‰«äº†ä¸€éï¼Œå‘ç°3ä¸ªæ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼Œå“å‡ºä¸€èº«å†·æ±—ã€‚</p>
<h3 data-id="heading-15">5. æ–‡æ¡£ç”Ÿæˆå™¨ï¼ˆdoc-gen.mdï¼‰</h3>
<p>é¡¹ç›®æ–‡æ¡£æ€»æ˜¯æ»åäºä»£ç ï¼Ÿè¿™ä¸ªskillèƒ½æ ¹æ®ä»£ç è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œæå–å‡½æ•°æ³¨é‡Šç”ŸæˆMarkdownï¼Œè¿˜èƒ½ç»´æŠ¤æ›´æ–°æ—¥å¿—ã€‚</p>
<p>æ–‡æ¡£æ›´æ–°æ—¶é—´ä»2å°æ—¶ç¼©çŸ­åˆ°10åˆ†é’Ÿï¼Œè€Œä¸”å†ä¹Ÿä¸ä¼šå‡ºç°"ä»£ç æ”¹äº†æ–‡æ¡£æ²¡æ”¹"çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-16">å†™å¥½Skillçš„5ä¸ªæŠ€å·§</h2>
<p>åŠå¹´ä¸‹æ¥ï¼Œæˆ‘æ€»ç»“äº†å‡ ä¸ªç¼–å†™skillçš„ç»éªŒï¼š</p>
<h3 data-id="heading-17">1. Frontmatterè¦è®¤çœŸå†™</h3>
<p>è™½ç„¶çœ‹èµ·æ¥å¯æœ‰å¯æ— ï¼Œä½†titleå’Œdescriptionä¼šæ˜¾ç¤ºåœ¨skillåˆ—è¡¨é‡Œï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "å…¨æ ˆä»£ç å®¡æŸ¥ä¸“å®¶"
description: "å®¡æŸ¥å‰åç«¯ä»£ç ï¼Œå…³æ³¨å®‰å…¨æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§"
version: "2.1.0"
<span class="hljs-section">tags: ["ä»£ç å®¡æŸ¥", "å®‰å…¨", "æ€§èƒ½"]
---</span>
</code></pre>
<p>versionå­—æ®µæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ï¼Œtagsæ–¹ä¾¿åˆ†ç±»æŸ¥æ‰¾ã€‚</p>
<h3 data-id="heading-18">2. è§’è‰²å®šä¹‰è¦æ¸…æ™°</h3>
<p>"ä½ æ˜¯ä¸€ä½...ä¸“å®¶"è¿™ç§å¼€å¤´å¾ˆæœ‰ç”¨ï¼Œèƒ½è®©Claude Codeå¿«é€Ÿè¿›å…¥è§’è‰²ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ æ˜¯ä¸€ä½æ‹¥æœ‰10å¹´ç»éªŒçš„å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ“…é•¿ä»£ç å®¡æŸ¥å’Œå®‰å…¨å®¡è®¡ã€‚
</code></pre>
<p>æ¯”ç›´æ¥è¯´"è¯·å®¡æŸ¥ä»£ç "æ•ˆæœå¥½å¾ˆå¤šã€‚</p>
<h3 data-id="heading-19">3. ç”¨å¯¹æ¯”ç¤ºä¾‹è¯´æ˜</h3>
<p>ç”¨âœ…å’ŒâŒå¯¹æ¯”å¥½åä»£ç ï¼ŒClaude Codeç†è§£èµ·æ¥æ›´å‡†ç¡®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### SQLæ³¨å…¥é£é™©</span>

âŒ å±é™©å†™æ³•ï¼š
<span class="hljs-code">```javascript
const query = `SELECT * FROM users WHERE id = ${userId}`;
</span></code></pre>
<p>âœ… å®‰å…¨å†™æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> query = <span class="hljs-string">'SELECT * FROM users WHERE id = ?'</span>;
db.<span class="hljs-title function_">query</span>(query, [userId]);
</code></pre>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## 4. è¾“å‡ºæ ¼å¼è¦å…·ä½“</span></span>

åˆ«è¯´"è¯·ç»™å‡ºå»ºè®®"ï¼Œè¦è¯´"æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡º"ï¼š

```markdown
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># è¾“å‡ºæ ¼å¼</span></span>
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰</span></span>
- [æ–‡ä»¶å:è¡Œå·] é—®é¢˜æè¿°
- é£é™©è¯´æ˜
- ä¿®å¤å»ºè®®ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼‰
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## ğŸŸ¡ å»ºè®®æ”¹è¿›ï¼ˆæ¨èä¼˜åŒ–ï¼‰</span></span>
- [æ–‡ä»¶å:è¡Œå·] é—®é¢˜æè¿°
- æ”¹è¿›ç†ç”±
- ä¼˜åŒ–æ–¹æ¡ˆ
</code></pre>
<h3 data-id="heading-20">5. åŠ ä¸Šé”™è¯¯å¤„ç†è§„åˆ™</h3>
<p>å‘Šè¯‰AIé‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## é”™è¯¯å¤„ç†</span>

å¦‚æœé‡åˆ°ä»¥ä¸‹æƒ…å†µï¼š
<span class="hljs-bullet">-</span> ä»£ç è¯­æ³•é”™è¯¯ï¼šå…ˆæŒ‡å‡ºé”™è¯¯ä½ç½®ï¼Œä¸ç»§ç»­å®¡æŸ¥
<span class="hljs-bullet">-</span> æ–‡ä»¶æ— æ³•è®¿é—®ï¼šæç¤ºç”¨æˆ·æ£€æŸ¥è·¯å¾„
<span class="hljs-bullet">-</span> ä»£ç é‡è¿‡å¤§ï¼ˆ&gt;5000è¡Œï¼‰ï¼šå»ºè®®åˆ†æ‰¹å®¡æŸ¥
</code></pre>
<h2 data-id="heading-21">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-22">Skillå¤ªå¤šè®°ä¸ä½åå­—ï¼Ÿ</h3>
<p>ç”¨å¥½å‘½åè§„èŒƒï¼š</p>
<ul>
<li><code>review-*</code>: ä»£ç å®¡æŸ¥ç±»</li>
<li><code>gen-*</code>: ä»£ç ç”Ÿæˆç±»</li>
<li><code>util-*</code>: å·¥å…·ç±»</li>
<li><code>fix-*</code>: é—®é¢˜ä¿®å¤ç±»</li>
</ul>
<p>æˆ‘çš„å‘½åï¼š<code>review-frontend.md</code>ã€<code>gen-api.md</code>ã€<code>util-commit.md</code></p>
<h3 data-id="heading-23">Skillè¾“å‡ºå¤ªé•¿çœ‹ä¸å®Œï¼Ÿ</h3>
<p>åœ¨skillé‡ŒåŠ ä¸Šç®€æ´æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">é»˜è®¤ä½¿ç”¨è¯¦ç»†æ¨¡å¼ã€‚å¦‚æœç”¨æˆ·æ·»åŠ <span class="hljs-code">`--brief`</span>å‚æ•°ï¼Œè¾“å‡ºç®€æ´ç‰ˆï¼š
<span class="hljs-bullet">-</span> é—®é¢˜æ¸…å•ï¼ˆä¸€è¡Œä¸€ä¸ªï¼‰
<span class="hljs-bullet">-</span> ä¸¥é‡ç¨‹åº¦æ ‡æ³¨
<span class="hljs-bullet">-</span> å…³é”®ä¿®å¤å»ºè®®
</code></pre>
<h3 data-id="heading-24">Skillåœ¨ä¸åŒé¡¹ç›®ä¸­è¡¨ç°ä¸ä¸€è‡´ï¼Ÿ</h3>
<p>è®©skillä¸»åŠ¨è¯·æ±‚ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## åˆ†æå‰ç½®æ­¥éª¤</span>

å¼€å§‹å‰è¯·å…ˆï¼š
<span class="hljs-bullet">1.</span> è¯»å–package.jsonäº†è§£ä¾èµ–ç‰ˆæœ¬
<span class="hljs-bullet">2.</span> æ£€æŸ¥tsconfig.jsonäº†è§£TSé…ç½®
<span class="hljs-bullet">3.</span> æŸ¥çœ‹.eslintrcäº†è§£ä»£ç è§„èŒƒ
<span class="hljs-bullet">4.</span> æµè§ˆREADME.mdäº†è§£é¡¹ç›®æ¶æ„
</code></pre>
<h2 data-id="heading-25">æœ€åè¯´ä¸¤å¥</h2>
<p>ç”¨äº†åŠå¹´çš„skillåŠŸèƒ½ï¼Œæˆ‘çš„å¼€å‘æ•ˆç‡è‡³å°‘æå‡äº†40%ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¾ˆå¤šé‡å¤æ€§çš„è„‘åŠ›åŠ³åŠ¨è¢«è§£æ”¾å‡ºæ¥äº†ï¼Œæˆ‘å¯ä»¥æŠŠæ—¶é—´èŠ±åœ¨çœŸæ­£éœ€è¦æ€è€ƒçš„æ¶æ„è®¾è®¡å’Œä¸šåŠ¡é€»è¾‘ä¸Šã€‚</p>
<p>å¦‚æœä½ ç°åœ¨è¿˜åœ¨æ‰‹å†™æç¤ºè¯ï¼Œå»ºè®®ä½ ï¼š</p>
<ol>
<li><strong>ä»Šå¤©å°±å¼€å§‹</strong>ï¼šä»ä¸€ä¸ªç®€å•çš„skillå¼€å§‹ï¼Œæ¯”å¦‚ä»£ç å®¡æŸ¥æˆ–æµ‹è¯•ç”Ÿæˆ</li>
<li><strong>é€æ­¥å®Œå–„</strong>ï¼šæ¯æ¬¡ç”¨å®Œååæ€å“ªé‡Œå¯ä»¥æ”¹è¿›ï¼Œæ›´æ–°ç‰ˆæœ¬</li>
<li><strong>å›¢é˜Ÿå…±äº«</strong>ï¼šå¥½çš„skillå°±åƒå¥½çš„å·¥å…·åº“ï¼Œè¦åˆ†äº«å‡ºå»</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šå…³æ³¨å®˜æ–¹æ–‡æ¡£æ›´æ–°ï¼Œæ–°åŠŸèƒ½å¯èƒ½ä¼šæ”¹å˜å†™æ³•</li>
</ol>
<p>æœ€ååˆ†äº«ä¸€ä¸ªå¿ƒå¾—ï¼š<strong>Skillçš„ä»·å€¼ä¸åœ¨äºæœ‰å¤šå¤æ‚ï¼Œè€Œåœ¨äºè§£å†³çœŸå®é—®é¢˜</strong>ã€‚æˆ‘é‚£ä¸ªæœ€ç®€å•çš„commit-msgç”Ÿæˆå™¨åªæœ‰30è¡Œï¼Œä½†æ¯å¤©éƒ½åœ¨ç”¨ï¼Œç´¯è®¡èŠ‚çœçš„æ—¶é—´å·²ç»å¥½å‡ ä¸ªå°æ—¶äº†ã€‚</p>
<p>ä»ç°åœ¨å¼€å§‹ï¼Œè¯•ç€æŠŠä½ æ¯å¤©é‡å¤è¾“å…¥çš„æç¤ºè¯æ•´ç†æˆskillå§ã€‚ä¸‰ä¸ªæœˆåï¼Œä½ ä¼šæ„Ÿè°¢ä»Šå¤©çš„è‡ªå·±ã€‚</p>
<p><strong>ç›¸å…³èµ„æº</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs" target="_blank" title="https://code.claude.com/docs" ref="nofollow noopener noreferrer">Claude Codeå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fagents-and-tools%2Fagent-skills%2Fbest-practices" target="_blank" title="https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices" ref="nofollow noopener noreferrer">Skillæœ€ä½³å®è·µæŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">ç¤¾åŒºSkillæ¨¡æ¿åº“</a></li>
</ul>
<blockquote>
<p>æœ¬æ–‡é¦–å‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2F" target="_blank" title="https://blog.betterlink.top/zh/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577228831137890347</link>    <guid>https://juejin.cn/post/7577228831137890347</guid>    <pubDate>2025-11-27T11:57:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831137890347" data-draft-id="7577215663968354346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ"/> <meta itemprop="keywords" content="Go,Vue.js"/> <meta itemprop="datePublished" content="2025-11-27T11:57:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T11:57:12.000Z" title="Thu Nov 27 2025 11:57:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ</h2>
<p>ä¼ä¸šçº§ Admin ç³»ç»Ÿçš„æŠ€æœ¯é€‰å‹ï¼Œæ—¢è¦å…¼é¡¾<strong>é«˜æ€§èƒ½</strong>ä¸<strong>ç¨³å®šæ€§</strong>ï¼Œä¹Ÿè¦å¹³è¡¡<strong>å¼€å‘æ•ˆç‡</strong>ä¸<strong>å¯æ‰©å±•æ€§</strong>ã€‚go-kratos-admin ä½œä¸ºå¼€ç®±å³ç”¨çš„å…¨æ ˆ Admin è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆé€‰å®š <strong>Golang ç”Ÿæ€ï¼ˆåç«¯ï¼‰</strong> + <strong>Vue3 ç”Ÿæ€ï¼ˆå‰ç«¯ï¼‰</strong> çš„æŠ€æœ¯ç»„åˆï¼Œå¹¶éå¶ç„¶ â€”â€” è€Œæ˜¯ç²¾å‡†åŒ¹é…ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒéœ€æ±‚çš„å¿…ç„¶é€‰æ‹©ã€‚æœ¬æ–‡å°†æ·±åº¦æ‹†è§£è¿™å¥—æŠ€æœ¯æ ˆçš„é€‰å‹é€»è¾‘ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸ºé¡¹ç›®èµ‹èƒ½ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åç«¯æŠ€æœ¯æ ˆï¼šGolang ç”Ÿæ€çš„ â€œç²¾å‡†ç‹™å‡»â€</h3>
<p>åç«¯æ˜¯ Admin ç³»ç»Ÿçš„ â€œéª¨æ¶â€ï¼Œéœ€è¦æ”¯æ’‘æƒé™æ§åˆ¶ã€å¤šç§Ÿæˆ·éš”ç¦»ã€é«˜å¹¶å‘è¯·æ±‚ç­‰æ ¸å¿ƒåœºæ™¯ã€‚go-kratos-admin é€‰æ‹©ä»¥ Golang ä¸ºåŸºç¡€ï¼Œæ­é… go-kratosã€entã€gormã€wireã€casbin ç­‰ç»„ä»¶ï¼Œæ­£æ˜¯ç„å‡†äº†ä¼ä¸šçº§ç³»ç»Ÿçš„ç—›ç‚¹ã€‚</p>
<h4 data-id="heading-2">1. æ ¸å¿ƒè¯­è¨€ï¼šä¸ºä»€ä¹ˆæ˜¯ Golang è€Œé Java/Node.jsï¼Ÿ</h4>
<p>ä¼ä¸šçº§ Admin ç³»ç»Ÿçœ‹ä¼¼ â€œä¸šåŠ¡é€»è¾‘ä¸ºä¸»â€ï¼Œå®åˆ™å¯¹<strong>æ€§èƒ½</strong>å’Œ<strong>èµ„æºå ç”¨</strong>æœ‰éšæ€§é«˜è¦æ±‚ï¼šæ¯”å¦‚æ‰¹é‡æ•°æ®å¯¼å‡ºã€é«˜é¢‘æƒé™æ ¡éªŒã€åˆ†å¸ƒå¼ç¼“å­˜æ“ä½œç­‰åœºæ™¯ï¼Œéƒ½éœ€è¦åç«¯å¿«é€Ÿå“åº”ã€‚</p>
<ul>
<li><strong>Golang çš„å¤©ç„¶ä¼˜åŠ¿</strong>ï¼šç¼–è¯‘å‹è¯­è¨€å¸¦æ¥çš„é«˜æ€§èƒ½ï¼ˆæ¯” Node.js å¿«æ•°å€ï¼‰ã€goroutine è½»é‡çº§å¹¶å‘æ¨¡å‹ï¼ˆè½»æ¾åº”å¯¹ä¸Šä¸‡å¹¶å‘è¯·æ±‚ï¼‰ã€æä½çš„å†…å­˜å ç”¨ï¼ˆéƒ¨ç½²æœåŠ¡å™¨æˆæœ¬æ›´ä½ï¼‰ï¼›</li>
<li><strong>å¯¹æ¯” Java</strong>ï¼šGolang ä»£ç æ›´ç®€æ´ï¼ˆå°‘ â€œæ ·æ¿ä»£ç â€ï¼‰ï¼Œç¼–è¯‘é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²æ— éœ€ JVMï¼Œè¿ç»´æ›´è½»é‡åŒ–ï¼›</li>
<li><strong>å¯¹æ¯” Node.js</strong>ï¼šGolang æ—  â€œå›è°ƒåœ°ç‹±â€ï¼ŒåŒæ­¥ä»£ç ç¼–å†™æ›´ç¬¦åˆåç«¯å¼€å‘ä¹ æƒ¯ï¼Œä¸”åœ¨ CPU å¯†é›†å‹åœºæ™¯ï¼ˆå¦‚æ•°æ®è®¡ç®—ï¼‰ä¸­ä¼˜åŠ¿æ˜¾è‘—ã€‚</li>
</ul>
<p>å¯¹ go-kratos-admin è€Œè¨€ï¼ŒGolang æ—¢èƒ½æ”¯æ’‘å•ä½“æ¶æ„çš„å¿«é€Ÿå¼€å‘ï¼Œä¹Ÿèƒ½å¹³æ»‘æ‰©å±•åˆ°å¾®æœåŠ¡æ¶æ„ â€”â€” è¿™æ°å¥½åŒ¹é…äº†é¡¹ç›® â€œé€‚é…ä¸åŒè§„æ¨¡å›¢é˜Ÿâ€ çš„å®šä½ã€‚</p>
<h4 data-id="heading-3">2. æ¡†æ¶é€‰å‹ï¼šgo-kratos ä¸ºä½•æˆä¸ºé¦–é€‰ï¼Ÿ</h4>
<p>åç«¯æ¡†æ¶æ˜¯æŠ€æœ¯æ ˆçš„ â€œæ ¸å¿ƒæ¢çº½â€ï¼Œgo-kratos-admin é€‰æ‹©å­—èŠ‚è·³åŠ¨å¼€æºçš„ go-kratosï¼Œè€Œé Gin/Echo ç­‰è½»é‡æ¡†æ¶ï¼Œæ ¸å¿ƒåŸå› åœ¨äºï¼š</p>
<ul>
<li><strong>ä¼ä¸šçº§ç‰¹æ€§å†…ç½®</strong>ï¼škratos åŸç”Ÿæ”¯æŒæœåŠ¡å‘ç°ã€é…ç½®ä¸­å¿ƒã€é“¾è·¯è¿½è¸ªã€é™æµç†”æ–­ç­‰å¾®æœåŠ¡èƒ½åŠ›ï¼Œæ— éœ€å¼€å‘è€…é‡å¤é›†æˆï¼›</li>
<li><strong>æ ‡å‡†åŒ–è®¾è®¡</strong>ï¼šéµå¾ª RESTful + gRPC åŒåè®®è§„èŒƒï¼Œå‰åç«¯äº¤äº’æ›´æ¸…æ™°ï¼ŒåŒæ—¶æ”¯æŒåè®®è‡ªåŠ¨è½¬æ¢ï¼ˆæ¯”å¦‚å‰ç«¯ HTTP è¯·æ±‚è½¬åç«¯ gRPC è°ƒç”¨ï¼‰ï¼›</li>
<li><strong>ç”Ÿæ€é€‚é…æ€§</strong>ï¼šä¸ wireï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€entï¼ˆORMï¼‰ç­‰ Golang ç”Ÿæ€ç»„ä»¶æ— ç¼åä½œï¼Œé™ä½æŠ€æœ¯æ ˆæ•´åˆæˆæœ¬ã€‚</li>
</ul>
<p>å¯¹ Admin ç³»ç»Ÿæ¥è¯´ï¼Œkratos çš„ â€œå¾®æœåŠ¡åŸºå› â€ è®©é¡¹ç›®èƒ½ä»ä¸€å¼€å§‹å°±é¢„ç•™æ‰©å±•ç©ºé—´ â€”â€” æ¯”å¦‚åç»­æ‹†åˆ† â€œæƒé™æœåŠ¡â€â€œç§Ÿæˆ·æœåŠ¡â€ æ—¶ï¼Œæ— éœ€é‡æ„åº•å±‚æ¡†æ¶ã€‚</p>
<h4 data-id="heading-4">3. æ•°æ®å±‚ï¼šent ä¸ gorm çš„ â€œæŒ‰éœ€æ›¿æ¢â€ æ–¹æ¡ˆ</h4>
<p>æ•°æ®æ“ä½œæ˜¯ Admin ç³»ç»Ÿçš„æ ¸å¿ƒåœºæ™¯ï¼ˆå¦‚å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ã€å¤æ‚æ¡ä»¶æŸ¥è¯¢ã€ç®€å• CRUD æ“ä½œï¼‰ï¼Œé¡¹ç›®å¹¶æœªé‡‡ç”¨ â€œä¸»è¾…ç»“åˆâ€ çš„å›ºå®šæ¨¡å¼ï¼Œè€Œæ˜¯è®¾è®¡äº†<strong>å¯çµæ´»æ›¿æ¢çš„ ORM æ–¹æ¡ˆ</strong>â€”â€” å¼€å‘è€…å¯æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨ ent å’Œ gorm ä¹‹é—´è‡ªä¸»é€‰æ‹©é€‚é…å·¥å…·ï¼Œæ— éœ€ä¿®æ”¹åº•å±‚æ¶æ„ã€‚</p>
<ul>
<li><strong>ent çš„é€‚ç”¨åœºæ™¯ä¸ä¼˜åŠ¿</strong>ï¼šæ›´é€‚åˆä¸šåŠ¡é€»è¾‘å¤æ‚ã€å…³è”æŸ¥è¯¢å¯†é›†çš„åœºæ™¯ã€‚ä½œä¸ºåŸºäºä»£ç ç”Ÿæˆçš„å¼ºç±»å‹ ORMï¼Œå®ƒåŸç”Ÿæ”¯æŒ GraphQL åè®®ï¼Œèƒ½é«˜æ•ˆå¤„ç†å¤šè¡¨æ·±åº¦å…³è”æŸ¥è¯¢ï¼ˆä¾‹å¦‚ â€œç”¨æˆ· - è§’è‰² - ç§Ÿæˆ· - éƒ¨é—¨â€ çš„å››çº§å…³è”æ•°æ®æ‹‰å–ï¼‰ï¼Œä¸”ç¼–è¯‘æœŸç±»å‹æ ¡éªŒå¯å‡å°‘æ•°æ®æ“ä½œé”™è¯¯ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¹Ÿä¼˜äºä¼ ç»Ÿåå°„å‹ ORMã€‚å½“é¡¹ç›®éœ€è¦æ„å»ºç²¾ç»†åŒ–çš„æ•°æ®æƒé™é€»è¾‘ï¼ˆå¦‚ â€œæŒ‰ç§Ÿæˆ· + éƒ¨é—¨ + è§’è‰²ä¸‰é‡è¿‡æ»¤æ•°æ®â€ï¼‰æ—¶ï¼Œent çš„é“¾å¼æŸ¥è¯¢è¯­æ³•èƒ½è®©æ¡ä»¶æ‹¼æ¥æ›´æ¸…æ™°ã€å¯ç»´æŠ¤æ€§æ›´å¼ºã€‚</li>
<li><strong>gorm çš„é€‚ç”¨åœºæ™¯ä¸ä¼˜åŠ¿</strong>ï¼šæ›´é€‚åˆç®€å• CRUD æ“ä½œã€å¤šæ•°æ®åº“å…¼å®¹éœ€æ±‚æ˜ç¡®çš„åœºæ™¯ã€‚å®ƒå¯¹åŸºç¡€å¢åˆ æ”¹æŸ¥æ¥å£å°è£…æ›´ç®€æ´ï¼Œå¼€å‘è€…æ— éœ€å­¦ä¹ æ–°çš„è¯­æ³•å³å¯å¿«é€Ÿä¸Šæ‰‹ï¼›åŒæ—¶å…¼å®¹ MySQLã€PostgreSQLã€TiDBã€SQL Server ç­‰å›½å†…å¤–ä¸»æµæ•°æ®åº“ï¼Œå½“é¡¹ç›®éœ€è¦é€‚é…ä¸åŒå®¢æˆ·çš„æ•°æ®åº“ç¯å¢ƒï¼ˆå¦‚å›½å†…ä¼ä¸šå¸¸ç”¨çš„ MySQLã€æµ·å¤–å®¢æˆ·åå¥½çš„ PostgreSQLï¼‰æ—¶ï¼Œgorm çš„æ•°æ®åº“é©±åŠ¨ç”Ÿæ€èƒ½é™ä½é€‚é…æˆæœ¬ã€‚</li>
</ul>
<p>è¿™ç§ â€œå¯æ›¿æ¢â€ è®¾è®¡çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>å¹³è¡¡å¼€å‘æ•ˆç‡ä¸ä¸šåŠ¡å¤æ‚åº¦</strong>ï¼šä¾‹å¦‚é¡¹ç›®åˆæœŸæ­å»º â€œç§Ÿæˆ·åŸºç¡€ä¿¡æ¯ç®¡ç†â€ æ¨¡å—æ—¶ï¼Œå¯é€‰ç”¨ gorm å¿«é€Ÿå®ç°ç§Ÿæˆ·åˆ›å»ºã€æŸ¥è¯¢ã€ç¦ç”¨ç­‰ç®€å•æ“ä½œï¼›å½“ä¸šåŠ¡æ‰©å±•åˆ° â€œç§Ÿæˆ· - ç”¨æˆ· - æƒé™çš„å…³è”ç»Ÿè®¡åˆ†æâ€ æ—¶ï¼Œå¯æ— ç¼åˆ‡æ¢ä¸º ent å¤„ç†å¤æ‚æŸ¥è¯¢é€»è¾‘ â€”â€” ä¸¤è€…å…±äº«ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å®šä¹‰ï¼Œæ— éœ€é‡æ„æ ¸å¿ƒä»£ç ï¼Œæ—¢æ»¡è¶³ä¸åŒé˜¶æ®µçš„éœ€æ±‚ï¼Œåˆé¿å…äº†å•ä¸€ ORM å·¥å…·çš„å±€é™æ€§ã€‚</p>
<h4 data-id="heading-5">4. å·¥ç¨‹åŒ–ï¼šwire ä¾èµ–æ³¨å…¥çš„ â€œè§£è€¦ä»·å€¼â€</h4>
<p>Admin ç³»ç»ŸåŠŸèƒ½è¶Šå¤æ‚ï¼Œæ¨¡å—é—´çš„ä¾èµ–å…³ç³»è¶Šå®¹æ˜“æ··ä¹±ã€‚go-kratos-admin å¼•å…¥ wire å®ç°ä¾èµ–æ³¨å…¥ï¼š</p>
<ul>
<li><strong>ä»£ç è§£è€¦</strong>ï¼šå°† â€œå¯¹è±¡åˆ›å»ºâ€ ä¸ â€œä¸šåŠ¡é€»è¾‘â€ åˆ†ç¦»ï¼Œæ¯”å¦‚æƒé™æ ¡éªŒæ¨¡å—æ— éœ€å…³å¿ƒæ•°æ®åº“è¿æ¥çš„åˆ›å»ºæ–¹å¼ï¼›</li>
<li><strong>å¯æµ‹è¯•æ€§æå‡</strong>ï¼šå•å…ƒæµ‹è¯•æ—¶å¯å¿«é€Ÿæ›¿æ¢ä¾èµ–ï¼ˆå¦‚ç”¨ mock æ•°æ®åº“æ›¿ä»£çœŸå®æ•°æ®åº“ï¼‰ï¼›</li>
<li><strong>æ‰©å±•æ€§å¢å¼º</strong>ï¼šæ–°å¢åŠŸèƒ½æ¨¡å—æ—¶ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œåªéœ€é…ç½®ä¾èµ–å…³ç³»å³å¯ã€‚</li>
</ul>
<p>å¯¹å›¢é˜Ÿåä½œè€Œè¨€ï¼Œwire è®©ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæ–°äººä¸Šæ‰‹æˆæœ¬æ›´ä½ã€‚</p>
<h3 data-id="heading-6">äºŒã€å‰ç«¯æŠ€æœ¯æ ˆï¼šVue3 ç”Ÿæ€çš„ â€œé«˜æ•ˆé€‚é…â€</h3>
<p>å‰ç«¯æ˜¯ Admin ç³»ç»Ÿçš„ â€œé—¨é¢â€ï¼Œéœ€è¦å…¼é¡¾<strong>äº¤äº’ä½“éªŒ</strong>ä¸<strong>å¼€å‘æ•ˆç‡</strong>ã€‚go-kratos-admin é€‰æ‹© Vue3 + TypeScript + Antdv + Vben Admin çš„ç»„åˆï¼Œæ­£æ˜¯ä¸ºäº†åŒ¹é…ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿçš„ UI/UX éœ€æ±‚ã€‚</p>
<h4 data-id="heading-7">1. æ ¸å¿ƒæ¡†æ¶ï¼šVue3 ä¸ºä½•ä¼˜äº Vue2/Reactï¼Ÿ</h4>
<p>Admin ç³»ç»Ÿä»¥è¡¨å•ã€è¡¨æ ¼ã€å¼¹çª—ç­‰ â€œç»„ä»¶åŒ–åœºæ™¯â€ ä¸ºä¸»ï¼ŒVue3 çš„ç‰¹æ€§å®Œç¾é€‚é…è¿™ç±»éœ€æ±‚ï¼š</p>
<ul>
<li><strong>ç»„åˆå¼ APIï¼ˆComposition APIï¼‰</strong>ï¼šå¤æ‚ç»„ä»¶ï¼ˆå¦‚å¤šæ¡ä»¶æŸ¥è¯¢è¡¨å•ï¼‰çš„é€»è¾‘å¯æ‹†åˆ†å¤ç”¨ï¼Œæ¯” Vue2 çš„ Options API æ›´æ˜“ç»´æŠ¤ï¼›</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šVue3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxy é‡æ„ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“å¼€é”€ï¼Œè¡¨æ ¼æ»šåŠ¨ã€å¤§æ•°æ®æ¸²æŸ“æ›´æµç•…ï¼›</li>
<li><strong>TypeScript å‹å¥½</strong>ï¼šåŸç”Ÿæ”¯æŒ TSï¼Œç±»å‹æç¤ºèƒ½å¤§å¹…é™ä½å‰ç«¯å¼€å‘çš„ Bug ç‡ï¼ˆæ¯”å¦‚æƒé™æŒ‰é’®çš„æ˜¾éšé€»è¾‘ï¼‰ã€‚</li>
</ul>
<p>å¯¹æ¯” Reactï¼ŒVue3 çš„ â€œæ¸è¿›å¼æ¡†æ¶â€ ç‰¹æ€§æ›´é€‚åˆ Admin ç³»ç»Ÿï¼šå¼€å‘è€…æ— éœ€å…¨ç›˜æ¥å— React çš„å‡½æ•°å¼ç†å¿µï¼Œå¯æŒ‰éœ€å¼•å…¥åŠŸèƒ½ï¼Œå­¦ä¹ æˆæœ¬æ›´ä½ã€‚</p>
<h4 data-id="heading-8">2. UI ç»„ä»¶åº“ï¼šAntdv + Vben Admin çš„ â€œä¼ä¸šçº§é€‚é…â€</h4>
<p>Admin ç³»ç»Ÿéœ€è¦å¤§é‡æˆç†Ÿçš„ UI ç»„ä»¶ï¼ˆå¦‚é«˜çº§è¡¨æ ¼ã€æƒé™æ ‘ã€å¤šç§Ÿæˆ·è¡¨å•ï¼‰ï¼Œé‡å¤é€ è½®å­ä¼šä¸¥é‡æ‹–æ…¢å¼€å‘è¿›åº¦ï¼š</p>
<ul>
<li><strong>Antdvï¼ˆAnt Design Vueï¼‰</strong>ï¼šé˜¿é‡Œå¼€æºçš„ä¼ä¸šçº§ç»„ä»¶åº“ï¼Œè¦†ç›– Admin ç³»ç»Ÿæ‰€éœ€çš„ 90% ç»„ä»¶ï¼ˆå¦‚ Tableã€Formã€Modalã€Treeï¼‰ï¼Œè®¾è®¡é£æ ¼ç¬¦åˆä¼ä¸šå®¡ç¾ï¼›</li>
<li><strong>Vben Admin</strong>ï¼šåŸºäº Vue3 + Antdv çš„å¼€ç®±å³ç”¨ Admin æ¨¡æ¿ï¼Œå†…ç½®äº†æƒé™è·¯ç”±ã€ä¸»é¢˜å®šåˆ¶ã€å›½é™…åŒ–ç­‰åŠŸèƒ½ï¼Œgo-kratos-admin ç›´æ¥å¤ç”¨å…¶åŸºç¡€æ¶æ„ï¼Œé¿å…ä»é›¶æ­å»ºå‰ç«¯æ¡†æ¶ã€‚</li>
</ul>
<p>è¿™ç§ç»„åˆè®©å‰ç«¯å¼€å‘èšç„¦äº â€œä¸šåŠ¡é€»è¾‘â€ è€Œé â€œåŸºç¡€ç»„ä»¶å¼€å‘â€â€”â€” æ¯”å¦‚å®ç° â€œå¤šç§Ÿæˆ·åˆ—è¡¨çš„é«˜çº§æœç´¢ + æ‰¹é‡æ“ä½œâ€ï¼Œåªéœ€åŸºäº Vben Admin çš„è¡¨æ ¼ç»„ä»¶äºŒæ¬¡å°è£…å³å¯ã€‚</p>
<h4 data-id="heading-9">3. ç±»å‹å®‰å…¨ï¼šTypeScript çš„ â€œä¿é©¾æŠ¤èˆªâ€</h4>
<p>Admin ç³»ç»Ÿæ¶‰åŠå¤§é‡æƒé™ã€æ•°æ®æ ¼å¼çš„æ ¡éªŒï¼ŒTypeScript çš„å¼•å…¥è§£å†³äº†å‰ç«¯çš„ â€œç±»å‹æ··ä¹±â€ é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ¥å£ç±»å‹çº¦æŸ</strong>ï¼šå‰åç«¯æ¥å£é€šè¿‡ TS å®šä¹‰ç±»å‹ï¼Œé¿å…å› å‚æ•°æ ¼å¼é”™è¯¯å¯¼è‡´çš„ Bugï¼›</li>
<li><strong>ç»„ä»¶ props æ ¡éªŒ</strong>ï¼šæƒé™æŒ‰é’®ã€ç§Ÿæˆ·è¡¨å•ç­‰ç»„ä»¶çš„ props ç±»å‹æ˜ç¡®ï¼Œå›¢é˜Ÿåä½œæ—¶æ›´æ˜“ç†è§£ï¼›</li>
<li><strong>é‡æ„å®‰å…¨æ€§</strong>ï¼šä¿®æ”¹æƒé™é€»è¾‘æ—¶ï¼ŒTS ä¼šè‡ªåŠ¨æç¤ºç±»å‹é”™è¯¯ï¼Œé™ä½é‡æ„é£é™©ã€‚</li>
</ul>
<p>å¯¹ä¼ä¸šçº§é¡¹ç›®è€Œè¨€ï¼ŒTypeScript å¸¦æ¥çš„ â€œå¯ç»´æŠ¤æ€§æå‡â€ è¿œå¤§äºçŸ­æœŸçš„å¼€å‘æˆæœ¬å¢åŠ ã€‚</p>
<h3 data-id="heading-10">ä¸‰ã€Golang+Vue3 ç»„åˆï¼šä¼ä¸šçº§ Admin ç³»ç»Ÿçš„ â€œæœ€ä¼˜è§£â€</h3>
<p>åç«¯ Golang ç”Ÿæ€çš„ â€œé«˜æ€§èƒ½ + å¯æ‰©å±•â€ï¼Œä¸å‰ç«¯ Vue3 ç”Ÿæ€çš„ â€œé«˜æ•ˆå¼€å‘ + ä¼ä¸šçº§ç»„ä»¶â€ å½¢æˆäº’è¡¥ï¼Œæ°å¥½å‘½ä¸­ Admin ç³»ç»Ÿçš„æ ¸å¿ƒéœ€æ±‚ï¼š</p>
<h4 data-id="heading-11">1. æ€§èƒ½ä¸ä½“éªŒçš„å¹³è¡¡</h4>
<ul>
<li>åç«¯ Golang å¤„ç†é«˜å¹¶å‘è¯·æ±‚ï¼ˆå¦‚æ‰¹é‡æ•°æ®å¯¼å‡ºã€é«˜é¢‘æƒé™æ ¡éªŒï¼‰æ—¶ï¼Œå“åº”é€Ÿåº¦æ¯”ä¼ ç»Ÿ Node.js åç«¯å¿« 3-5 å€ï¼›</li>
<li>å‰ç«¯ Vue3 çš„è½»é‡åŒ–æ¸²æŸ“ï¼Œè®©è¡¨æ ¼æ»šåŠ¨ã€å¼¹çª—åˆ‡æ¢ç­‰äº¤äº’æ›´æµç•…ï¼Œç”¨æˆ·ä½“éªŒä¼˜äº Vue2 æˆ– React æ—§ç‰ˆé¡¹ç›®ã€‚</li>
</ul>
<h4 data-id="heading-12">2. å¼€å‘æ•ˆç‡ä¸æ‰©å±•æ€§çš„å¹³è¡¡</h4>
<ul>
<li>åç«¯ go-kratos + ent çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ï¼Œå‰ç«¯ Vben Admin çš„æ¨¡æ¿å¤ç”¨ï¼Œè®©é¡¹ç›®èƒ½å¿«é€Ÿæ­å»ºæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å¤šç§Ÿæˆ·ç®¡ç†ã€æƒé™ä½“ç³»ï¼‰ï¼›</li>
<li>å¾®æœåŠ¡æ¶æ„ï¼ˆkratosï¼‰+ ç»„ä»¶åŒ–å¼€å‘ï¼ˆVue3ï¼‰ï¼Œè®©é¡¹ç›®èƒ½éšä¼ä¸šè§„æ¨¡å¢é•¿å¹³æ»‘æ‰©å±• â€”â€” æ¯”å¦‚ä»å•ä½“æ¶æ„æ‹†åˆ†ä¸º â€œæƒé™æœåŠ¡ + ç§Ÿæˆ·æœåŠ¡ + ä¸šåŠ¡æœåŠ¡â€ã€‚</li>
</ul>
<h4 data-id="heading-13">3. ä¼ä¸šçº§éœ€æ±‚çš„ç²¾å‡†åŒ¹é…</h4>
<ul>
<li>å¤šç§Ÿæˆ·éš”ç¦»ï¼šGolang çš„ goroutine å¹¶å‘å¤„ç†ç§Ÿæˆ·è¯·æ±‚ï¼ŒVue3 çš„ç»„ä»¶åŒ–æ¸²æŸ“ç§Ÿæˆ·ä¸“å±ç•Œé¢ï¼›</li>
<li>æƒé™æ§åˆ¶ï¼šåç«¯ kratos çš„ä¸­é—´ä»¶æ ¡éªŒæ¥å£æƒé™ï¼Œå‰ç«¯ Vben Admin çš„è·¯ç”±å®ˆå«æ§åˆ¶é¡µé¢è®¿é—®ï¼›</li>
<li>è·¨å¹³å°éƒ¨ç½²ï¼šGolang ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ— éœ€ä¾èµ–è¿è¡Œæ—¶ï¼ŒVue3 æ‰“åŒ…åçš„é™æ€èµ„æºå¯éƒ¨ç½²åœ¨ä»»æ„æœåŠ¡å™¨ï¼Œé€‚é…ä¼ä¸šçš„ç§æœ‰åŒ–éƒ¨ç½²éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-14">å››ã€æ€»ç»“ï¼šæŠ€æœ¯æ ˆé€‰å‹çš„åº•å±‚é€»è¾‘</h3>
<p>go-kratos-admin é€‰æ‹© Golang+Vue3 ç»„åˆï¼Œæœ¬è´¨æ˜¯ <strong>â€œéœ€æ±‚é©±åŠ¨é€‰å‹â€</strong>ï¼š</p>
<ul>
<li>ä¼ä¸šçº§ Admin ç³»ç»Ÿéœ€è¦ â€œé«˜æ€§èƒ½ã€æ˜“æ‰©å±•ã€ä½æˆæœ¬ç»´æŠ¤â€ï¼ŒGolang ç”Ÿæ€å®Œç¾æ»¡è¶³åç«¯éœ€æ±‚ï¼›</li>
<li>å‰ç«¯éœ€è¦ â€œé«˜æ•ˆå¼€å‘ã€ç»„ä»¶ä¸°å¯Œã€äº¤äº’æµç•…â€ï¼ŒVue3 ç”Ÿæ€æ°å¥½é€‚é…è¿™äº›åœºæ™¯ã€‚</li>
</ul>
<p>è¿™å¥—æŠ€æœ¯æ ˆæ—¢ä¸æ˜¯ â€œè¿½æ–°â€ï¼Œä¹Ÿä¸æ˜¯ â€œä¿å®ˆâ€â€”â€” è€Œæ˜¯åœ¨ â€œæ»¡è¶³éœ€æ±‚â€ ä¸ â€œæŠ€æœ¯æˆç†Ÿåº¦â€ ä¹‹é—´æ‰¾åˆ°çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚å¯¹å¼€å‘è€…è€Œè¨€ï¼ŒåŸºäºè¿™å¥—æŠ€æœ¯æ ˆæ„å»º Admin ç³»ç»Ÿï¼Œæ—¢èƒ½å¿«é€Ÿè½åœ°ä¸šåŠ¡ï¼Œåˆèƒ½ä¸ºæœªæ¥çš„æ‰©å±•é¢„ç•™ç©ºé—´ï¼›å¯¹ä¼ä¸šè€Œè¨€ï¼Œè¿™å¥—ç»„åˆçš„è¿ç»´æˆæœ¬ä½ã€ç¨³å®šæ€§é«˜ï¼Œæ˜¯æ”¯æ’‘é•¿æœŸå‘å±•çš„å¯é é€‰æ‹©ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨æ­å»ºä¼ä¸šçº§ Admin ç³»ç»Ÿï¼Œgo-kratos-admin çš„æŠ€æœ¯æ ˆé€‰å‹æ€è·¯ï¼Œæˆ–è®¸èƒ½ä¸ºä½ æä¾›ä¸€ä»½æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<h3 data-id="heading-15">é¡¹ç›®ä»£ç </h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftx7do%2Fgo-kratos-admin" target="_blank" title="https://gitee.com/tx7do/go-kratos-admin" ref="nofollow noopener noreferrer">kratos-admin Gitee</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-kratos-admin" target="_blank" title="https://github.com/tx7do/go-kratos-admin" ref="nofollow noopener noreferrer">kratos-admin Github</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576608733612425242</link>    <guid>https://juejin.cn/post/7576608733612425242</guid>    <pubDate>2025-11-26T07:15:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576608733612425242" data-draft-id="7576236480114475058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T07:15:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡³ç®€ç®€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984286819384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984286819384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡³ç®€ç®€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T07:15:49.000Z" title="Wed Nov 26 2025 07:15:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    115
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<blockquote>
<p>æœ¬æ–‡å°†æ·±å…¥è®²è§£å¦‚ä½•ä½¿ç”¨ snapdom å’Œ jsPDF å®ç°é«˜è´¨é‡çš„ HTML è½¬ PDF åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨å¯¼å‡ºæ¡ˆä¾‹ï¼Œå¸¦ä½ æŒæ¡è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ HTML è½¬ PDF å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œ<strong>HTML è½¬ PDF</strong> æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚åœºæ™¯ï¼š</p>
<ol>
<li><strong>å®¢æœç³»ç»Ÿ</strong>ï¼šå¯¼å‡ºèŠå¤©è®°å½•ç”¨äºå­˜æ¡£æˆ–æŠ•è¯‰å¤„ç†</li>
<li><strong>ç”µå•†å¹³å°</strong>ï¼šç”Ÿæˆè®¢å•è¯¦æƒ…ã€å‘ç¥¨ç­‰ PDF æ–‡æ¡£</li>
<li><strong>æŠ¥è¡¨ç³»ç»Ÿ</strong>ï¼šå°†å¯è§†åŒ–å›¾è¡¨å’Œæ•°æ®å¯¼å‡ºä¸º PDF æŠ¥å‘Š</li>
<li><strong>åœ¨çº¿æ–‡æ¡£</strong>ï¼šæ”¯æŒç”¨æˆ·å°†ç½‘é¡µå†…å®¹ç¦»çº¿ä¿å­˜</li>
<li><strong>åˆåŒç­¾ç½²</strong>ï¼šç”ŸæˆåˆåŒ PDF ç”¨äºç”µå­ç­¾å</li>
</ol>
<p>ç„¶è€Œï¼Œå®ç°ä¸€ä¸ª<strong>é«˜è´¨é‡</strong>çš„ HTML è½¬ PDF åŠŸèƒ½å¹¶ä¸ç®€å•ã€‚æˆ‘ä»¬é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>





























<table><thead><tr><th>æŒ‘æˆ˜</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>æ ·å¼è¿˜åŸ</strong></td><td>CSS æ ·å¼ã€å­—ä½“ã€æ¸å˜ç­‰èƒ½å¦å®Œç¾å‘ˆç°ï¼Ÿ</td></tr><tr><td><strong>åˆ†é¡µå¤„ç†</strong></td><td>é•¿å†…å®¹å¦‚ä½•æ™ºèƒ½åˆ†é¡µï¼Œé¿å…å†…å®¹è¢«æˆªæ–­ï¼Ÿ</td></tr><tr><td><strong>æ¸…æ™°åº¦</strong></td><td>å¯¼å‡ºçš„ PDF æ˜¯å¦è¶³å¤Ÿæ¸…æ™°ï¼Œå°¤å…¶åœ¨æ‰“å°æ—¶ï¼Ÿ</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>å¤§é‡å†…å®¹ï¼ˆå¦‚ 1000 æ¡æ¶ˆæ¯ï¼‰èƒ½å¦å¿«é€Ÿå¯¼å‡ºï¼Ÿ</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>ä¸åŒæµè§ˆå™¨è¡¨ç°æ˜¯å¦ä¸€è‡´ï¼Ÿ</td></tr></tbody></table>
<p>ä¼ ç»Ÿçš„ <code>html2canvas</code> + <code>jsPDF</code> æ–¹æ¡ˆè™½ç„¶èƒ½ç”¨ï¼Œä½†åœ¨<strong>æ ·å¼è¿˜åŸåº¦</strong>å’Œ<strong>æˆªå›¾è´¨é‡</strong>ä¸Šå­˜åœ¨æ˜æ˜¾ä¸è¶³ã€‚</p>
<p>ä»Šå¤©ç¬”è€…ä»‹ç»ä¸€å¥—æ–°è§£å†³æ–¹æ¡ˆï¼š<strong>snapdom + jsPDF</strong>ã€‚</p>
<h2 data-id="heading-2">snapdom å’Œ jsPDF åŸºç¡€ç†è®ºçŸ¥è¯†</h2>
<h3 data-id="heading-3">snapdom æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzumerlab%2Fsnapdom" target="_blank" title="https://github.com/zumerlab/snapdom" ref="nofollow noopener noreferrer">SnapDOM</a> æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ DOM æˆªå›¾åº“ï¼Œå®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">DOM Element â†’ <span class="hljs-selector-tag">Canvas</span>/PNG/SVG
</code></pre>
<h4 data-id="heading-4">æ ¸å¿ƒä¼˜åŠ¿</h4>
<ol>
<li><strong>é«˜ä¿çœŸæˆªå›¾</strong>ï¼šå®Œç¾è¿˜åŸ CSS æ ·å¼ï¼ŒåŒ…æ‹¬ flexboxã€gridã€æ¸å˜ã€é˜´å½±ç­‰</li>
<li><strong>å¤šç§è¾“å‡ºæ ¼å¼</strong>ï¼šæ”¯æŒ Canvasã€PNGã€SVG ç­‰å¤šç§æ ¼å¼</li>
<li><strong>é«˜æ¸…ç¼©æ”¾</strong>ï¼šé€šè¿‡ <code>scale</code> å‚æ•°å®ç° 2x/3x é«˜æ¸…æˆªå›¾</li>
<li><strong>ä½“ç§¯å°å·§</strong>ï¼šå‹ç¼©åä»… ~20KB</li>
</ol>
<h4 data-id="heading-5">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// è·å– DOM å…ƒç´ </span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.my-element'</span>);

<span class="hljs-comment">// æˆªå›¾</span>
<span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,      <span class="hljs-comment">// 2å€æ¸…æ™°åº¦</span>
  <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>  <span class="hljs-comment">// PNG è´¨é‡</span>
});

<span class="hljs-comment">// è¾“å‡ºæ–¹å¼</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toCanvas</span>();  <span class="hljs-comment">// Canvas å…ƒç´ </span>
<span class="hljs-keyword">const</span> imgEl = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>();      <span class="hljs-comment">// &lt;img&gt; å…ƒç´ ï¼Œsrc ä¸º data URL</span>
<span class="hljs-keyword">const</span> svgStr = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toSvg</span>();     <span class="hljs-comment">// SVG å­—ç¬¦ä¸²</span>
</code></pre>
<h4 data-id="heading-6">å…³é”®å‚æ•°è¯´æ˜</h4>























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>scale</code></td><td>number</td><td>1</td><td>ç¼©æ”¾å€æ•°ï¼Œ2 è¡¨ç¤º 2 å€æ¸…æ™°åº¦</td></tr><tr><td><code>quality</code></td><td>number</td><td>0.92</td><td>å›¾ç‰‡è´¨é‡ï¼ŒèŒƒå›´ 0-1</td></tr></tbody></table>
<p>æ›´å¤šè¯¦ç»†å†…å®¹è¯·çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fsnapdom.dev%2F%25E5%25AE%2598%25E6%2596%25B9%25E6%2596%2587%25E6%25A1%25A3" target="_blank" title="https://snapdom.dev/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3" ref="nofollow noopener noreferrer">snapdom.dev/å®˜æ–¹æ–‡æ¡£</a></p>
<h3 data-id="heading-7">jsPDF æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fparallax%2FjsPDF" target="_blank" title="https://github.com/parallax/jsPDF" ref="nofollow noopener noreferrer">jsPDF</a> æ˜¯æœ€æµè¡Œçš„ JavaScript PDF ç”Ÿæˆåº“ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ç«¯ç›´æ¥åˆ›å»º PDF æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-8">æ ¸å¿ƒç‰¹ç‚¹</h4>
<ol>
<li><strong>çº¯å‰ç«¯æ–¹æ¡ˆ</strong>ï¼šæ— éœ€æœåŠ¡ç«¯ï¼Œæµè§ˆå™¨ç›´æ¥ç”Ÿæˆ</li>
<li><strong>åŠŸèƒ½ä¸°å¯Œ</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æ ¼ã€é“¾æ¥ç­‰</li>
<li><strong>å¤šç§å°ºå¯¸</strong>ï¼šA4ã€Letter ç­‰æ ‡å‡†çº¸å¼ æ ¼å¼</li>
<li><strong>æ’ä»¶ç”Ÿæ€</strong>ï¼šæ”¯æŒ AutoTable ç­‰æ‰©å±•æ’ä»¶</li>
</ol>
<h4 data-id="heading-9">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { jsPDF } <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>;

<span class="hljs-comment">// åˆ›å»º PDF å®ä¾‹</span>
<span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>({
  <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span>,  <span class="hljs-comment">// çºµå‘</span>
  <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>,               <span class="hljs-comment">// å•ä½ï¼šæ¯«ç±³</span>
  <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>,             <span class="hljs-comment">// A4 çº¸å¼ </span>
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>            <span class="hljs-comment">// å¯ç”¨å‹ç¼©</span>
});

<span class="hljs-comment">// æ·»åŠ å›¾ç‰‡</span>
pdf.<span class="hljs-title function_">addImage</span>(
  imageDataUrl,  <span class="hljs-comment">// Base64 å›¾ç‰‡æ•°æ®</span>
  <span class="hljs-string">'PNG'</span>,         <span class="hljs-comment">// å›¾ç‰‡æ ¼å¼</span>
  <span class="hljs-number">10</span>,            <span class="hljs-comment">// X åæ ‡ï¼ˆmmï¼‰</span>
  <span class="hljs-number">10</span>,            <span class="hljs-comment">// Y åæ ‡ï¼ˆmmï¼‰</span>
  <span class="hljs-number">190</span>,           <span class="hljs-comment">// å®½åº¦ï¼ˆmmï¼‰</span>
  <span class="hljs-number">100</span>            <span class="hljs-comment">// é«˜åº¦ï¼ˆmmï¼‰</span>
);

<span class="hljs-comment">// æ·»åŠ æ–°é¡µé¢</span>
pdf.<span class="hljs-title function_">addPage</span>();

<span class="hljs-comment">// ä¿å­˜æ–‡ä»¶</span>
pdf.<span class="hljs-title function_">save</span>(<span class="hljs-string">'output.pdf'</span>);
</code></pre>
<h4 data-id="heading-10">A4 å°ºå¯¸å¸¸é‡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// A4 æ ‡å‡†å°ºå¯¸ï¼ˆå•ä½ï¼šmmï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_WIDTH_MM</span> = <span class="hljs-number">210</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_HEIGHT_MM</span> = <span class="hljs-number">297</span>;

<span class="hljs-comment">// é¡µé¢è¾¹è·</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MARGIN_MM</span> = <span class="hljs-number">10</span>;

<span class="hljs-comment">// å¯ç”¨å†…å®¹åŒºåŸŸ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTENT_WIDTH_MM</span> = <span class="hljs-number">190</span>;   <span class="hljs-comment">// 210 - 10*2</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTENT_HEIGHT_MM</span> = <span class="hljs-number">277</span>;  <span class="hljs-comment">// 297 - 10*2</span>
</code></pre>
<h3 data-id="heading-11">snapdom + jsPDF ç»„åˆçš„ä¼˜åŠ¿</h3>
<h2 data-id="heading-12"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6dfc5710dc44cb683e902ccef1c5c5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iez566A566A:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818465&amp;x-signature=BWGSg2sI1NPQ%2FnYMd6a7vmPLta0%3D" alt="image.png" loading="lazy"/></h2>
<h2 data-id="heading-13">æ¡ˆä¾‹è®²è¿°</h2>
<p>ç¬”è€…å†™ä¸€ä¸ªIMäº§å“ä¸­ MessageList æ¶ˆæ¯å¯¼å‡ºDEMOã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„<strong>å®¢æœæ¶ˆæ¯åˆ—è¡¨å¯¼å‡º</strong>æ¡ˆä¾‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨ snapdom + jsPDF å®ç° HTML è½¬ PDFã€‚</p>
<h3 data-id="heading-14">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MessageList.tsx      <span class="hljs-comment"># æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶</span>
â”‚   â””â”€â”€ MessageList.css      <span class="hljs-comment"># æ¶ˆæ¯åˆ—è¡¨æ ·å¼</span>
â”œâ”€â”€ services/
â”‚   â””â”€â”€ messageExportService.ts  <span class="hljs-comment"># PDF å¯¼å‡ºæœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰</span>
â””â”€â”€ App.tsx
</code></pre>
<h3 data-id="heading-15">æ ¸å¿ƒæµç¨‹</h3>
<p>æ•´ä¸ªå¯¼å‡ºè¿‡ç¨‹åˆ†ä¸º <strong>4 ä¸ªæ­¥éª¤</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23cb91cd191a4466b508c3f7776510fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iez566A566A:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818465&amp;x-signature=LAFXGjzfD5n437Fjlx5sc5FY44g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">Step 1ï¼šDOM æˆªå›¾ï¼ˆsnapdomï¼‰</h3>
<p>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨ snapdom å°†æ•´ä¸ªæ¶ˆæ¯åˆ—è¡¨ DOM è½¬æ¢ä¸ºé«˜æ¸… PNG å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// messageExportService.ts</span>

<span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// å›¾ç‰‡è´¨é‡é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">IMAGE_QUALITY</span> = <span class="hljs-number">0.95</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">IMAGE_FORMAT</span> = <span class="hljs-string">'image/png'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-comment">/**
 * å°† DOM å…ƒç´ è½¬æ¢ä¸ºå›¾ç‰‡
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">captureElementToImage</span>(<span class="hljs-params">
  element: HTMLElement,
  quality: <span class="hljs-built_in">number</span> = IMAGE_QUALITY
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æˆªå›¾...'</span>);

  <span class="hljs-comment">// ä¿å­˜åŸå§‹æ ·å¼</span>
  <span class="hljs-keyword">const</span> originalOverflow = element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span>;
  <span class="hljs-keyword">const</span> originalHeight = element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span>;
  <span class="hljs-keyword">const</span> originalMaxHeight = element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span>;

  <span class="hljs-comment">// ä¸´æ—¶è®¾ç½®æ ·å¼ï¼Œç¡®ä¿å®Œæ•´æˆªå›¾</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">'visible'</span>;
  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'auto'</span>;
  element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span> = <span class="hljs-string">'none'</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ ¸å¿ƒï¼šä½¿ç”¨ snapdom è¿›è¡Œæˆªå›¾</span>
    <span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
      <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,        <span class="hljs-comment">// 2å€æ¸…æ™°åº¦</span>
      <span class="hljs-attr">quality</span>: quality
    });

    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ toPng()</span>
    <span class="hljs-keyword">const</span> imgElement = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>();
    <span class="hljs-keyword">const</span> dataUrl = imgElement.<span class="hljs-property">src</span>;

    <span class="hljs-comment">// éªŒè¯æ•°æ®æœ‰æ•ˆæ€§</span>
    <span class="hljs-keyword">if</span> (!dataUrl || dataUrl.<span class="hljs-property">length</span> &lt; <span class="hljs-number">100</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'toPng è¿”å›æ— æ•ˆï¼Œå°è¯• toCanvas...'</span>);
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toCanvas</span>();
      <span class="hljs-keyword">return</span> canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-variable constant_">IMAGE_FORMAT</span>, quality);
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆªå›¾æˆåŠŸï¼Œå¤§å°:'</span>, (dataUrl.<span class="hljs-property">length</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'KB'</span>);
    <span class="hljs-keyword">return</span> dataUrl;

  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ¢å¤åŸå§‹æ ·å¼</span>
    element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = originalOverflow;
    element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = originalHeight;
    element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span> = originalMaxHeight;
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹è§£æ</strong>ï¼š</p>
<ol>
<li><strong>ä¸´æ—¶ä¿®æ”¹æ ·å¼</strong>ï¼šå°† <code>overflow</code>ã€<code>height</code>ã€<code>maxHeight</code> ä¸´æ—¶è®¾ç½®ä¸ºå¯è§çŠ¶æ€ï¼Œç¡®ä¿æˆªå–å®Œæ•´å†…å®¹</li>
<li><strong>scale: 2</strong>ï¼š2 å€ç¼©æ”¾æé«˜æ¸…æ™°åº¦ï¼Œæ‰“å°æ—¶æ•ˆæœæ›´ä½³</li>
<li><strong>é™çº§å¤„ç†</strong>ï¼š<code>toPng()</code> å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ° <code>toCanvas()</code></li>
<li><strong>æ ·å¼æ¢å¤</strong>ï¼šæˆªå›¾å®Œæˆåæ¢å¤åŸå§‹æ ·å¼</li>
</ol>
<h3 data-id="heading-17">Step 2ï¼šå›¾ç‰‡åˆ†é¡µï¼ˆCanvasï¼‰</h3>
<p>é•¿å›¾ç‰‡éœ€è¦æŒ‰ç…§ A4 é¡µé¢é«˜åº¦è¿›è¡Œåˆ†å‰²ï¼Œè¿™æ˜¯æœ€å¤æ‚çš„ä¸€æ­¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°ºå¯¸å¸¸é‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_WIDTH_MM</span> = <span class="hljs-number">210</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_HEIGHT_MM</span> = <span class="hljs-number">297</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_MARGIN_MM</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span> = <span class="hljs-variable constant_">A4_WIDTH_MM</span> - <span class="hljs-variable constant_">PDF_MARGIN_MM</span> * <span class="hljs-number">2</span>;   <span class="hljs-comment">// 190mm</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_CONTENT_HEIGHT_MM</span> = <span class="hljs-variable constant_">A4_HEIGHT_MM</span> - <span class="hljs-variable constant_">PDF_MARGIN_MM</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// 277mm</span>

<span class="hljs-comment">// 1mm = 3.7795275590551 åƒç´ ï¼ˆ96 DPIï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MM_TO_PX</span> = <span class="hljs-number">3.7795275590551</span>;

<span class="hljs-comment">// åˆ†é¡µåçš„å›¾ç‰‡æ•°æ®</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageImageData</span> {
  <span class="hljs-attr">dataUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">/**
 * å°†é•¿å›¾ç‰‡åˆ†å‰²æˆå¤šä¸ª A4 é¡µé¢
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">splitImageIntoPages</span>(<span class="hljs-params">
  imageDataUrl: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">PageImageData</span>[]&gt; {

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'anonymous'</span>;

    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">pages</span>: <span class="hljs-title class_">PageImageData</span>[] = [];
      <span class="hljs-keyword">const</span> originalWidth = img.<span class="hljs-property">width</span>;
      <span class="hljs-keyword">const</span> originalHeight = img.<span class="hljs-property">height</span>;

      <span class="hljs-comment">// å°† A4 å†…å®¹åŒºåŸŸè½¬æ¢ä¸ºåƒç´ ï¼ˆè€ƒè™‘ scale=2ï¼‰</span>
      <span class="hljs-keyword">const</span> pageContentHeightPx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(
        <span class="hljs-variable constant_">PDF_CONTENT_HEIGHT_MM</span> * <span class="hljs-variable constant_">MM_TO_PX</span> * <span class="hljs-number">2</span>  <span class="hljs-comment">// scale=2</span>
      );
      <span class="hljs-keyword">const</span> pageContentWidthPx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(
        <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span> * <span class="hljs-variable constant_">MM_TO_PX</span> * <span class="hljs-number">2</span>
      );

      <span class="hljs-comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ï¼ˆå›¾ç‰‡å®½åº¦é€‚é…é¡µé¢å®½åº¦ï¼‰</span>
      <span class="hljs-keyword">const</span> widthScale = pageContentWidthPx / originalWidth;
      <span class="hljs-keyword">const</span> scaledHeight = originalHeight * widthScale;

      <span class="hljs-comment">// è®¡ç®—æ€»é¡µæ•°</span>
      <span class="hljs-keyword">const</span> totalPages = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(scaledHeight / pageContentHeightPx);

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŸå§‹å°ºå¯¸: <span class="hljs-subst">${originalWidth}</span>x<span class="hljs-subst">${originalHeight}</span>px`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¼©æ”¾åé«˜åº¦: <span class="hljs-subst">${scaledHeight}</span>px, æ€»é¡µæ•°: <span class="hljs-subst">${totalPages}</span>`</span>);

      <span class="hljs-comment">// é€é¡µè£å‰ª</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">0</span>; pageIndex &lt; totalPages; pageIndex++) {
        <span class="hljs-keyword">const</span> startY = pageIndex * pageContentHeightPx;
        <span class="hljs-keyword">const</span> endY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startY + pageContentHeightPx, scaledHeight);
        <span class="hljs-keyword">const</span> currentPageHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(endY - startY);

        <span class="hljs-comment">// è®¡ç®—æºå›¾ç‰‡å¯¹åº”çš„åŒºåŸŸ</span>
        <span class="hljs-keyword">const</span> sourceStartY = startY / widthScale;
        <span class="hljs-keyword">const</span> sourceHeight = currentPageHeight / widthScale;

        <span class="hljs-comment">// åˆ›å»ºæ–° Canvas</span>
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
        <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)!;

        canvas.<span class="hljs-property">width</span> = pageContentWidthPx;
        canvas.<span class="hljs-property">height</span> = currentPageHeight;

        <span class="hljs-comment">// é«˜è´¨é‡æ¸²æŸ“</span>
        ctx.<span class="hljs-property">imageSmoothingEnabled</span> = <span class="hljs-literal">true</span>;
        ctx.<span class="hljs-property">imageSmoothingQuality</span> = <span class="hljs-string">'high'</span>;

        <span class="hljs-comment">// ç»˜åˆ¶å½“å‰é¡µå†…å®¹</span>
        ctx.<span class="hljs-title function_">drawImage</span>(
          img,
          <span class="hljs-number">0</span>, sourceStartY,           <span class="hljs-comment">// æºå›¾ç‰‡èµ·å§‹ä½ç½®</span>
          originalWidth, sourceHeight, <span class="hljs-comment">// æºå›¾ç‰‡å°ºå¯¸</span>
          <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,                        <span class="hljs-comment">// ç›®æ ‡èµ·å§‹ä½ç½®</span>
          pageContentWidthPx, currentPageHeight <span class="hljs-comment">// ç›®æ ‡å°ºå¯¸</span>
        );

        <span class="hljs-comment">// è½¬æ¢ä¸º data URL</span>
        <span class="hljs-keyword">const</span> pageDataUrl = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-variable constant_">IMAGE_FORMAT</span>, <span class="hljs-variable constant_">IMAGE_QUALITY</span>);

        pages.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">dataUrl</span>: pageDataUrl,
          <span class="hljs-attr">width</span>: pageContentWidthPx,
          <span class="hljs-attr">height</span>: currentPageHeight
        });

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${pageIndex + <span class="hljs-number">1</span>}</span>/<span class="hljs-subst">${totalPages}</span> é¡µå¤„ç†å®Œæˆ`</span>);
      }

      <span class="hljs-title function_">resolve</span>(pages);
    };

    img.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>));
    img.<span class="hljs-property">src</span> = imageDataUrl;
  });
}
</code></pre>
<p><strong>åˆ†é¡µç®—æ³•å›¾è§£</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸå§‹é•¿å›¾ (å‡è®¾ <span class="hljs-number">5000px</span> é«˜)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">1</span>       â”‚  â”‚ <span class="hljs-number">1046px</span> (<span class="hljs-number">277mm</span> Ã— <span class="hljs-number">3.78</span> Ã— <span class="hljs-number">2</span>)
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">2</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">3</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">4</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Page <span class="hljs-number">5</span>       â”‚ â”€â”€ å‰©ä½™ <span class="hljs-number">816px</span>
â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-18">Step 3ï¼šåˆ›å»º PDFï¼ˆjsPDFï¼‰</h3>
<p>å°†åˆ†é¡µåçš„å›¾ç‰‡é€ä¸€æ·»åŠ åˆ° PDF ä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { jsPDF } <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>;

<span class="hljs-comment">/**
 * ä»åˆ†é¡µå›¾ç‰‡åˆ›å»º PDF
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createPdfFromPages</span>(<span class="hljs-params">pages: PageImageData[]</span>): jsPDF {
  <span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>({
    <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span>,
    <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>,
    <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¯ç”¨å‹ç¼©ï¼Œå‡å°æ–‡ä»¶ä½“ç§¯</span>
  });

  <span class="hljs-keyword">if</span> (pages.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ²¡æœ‰å¯æ·»åŠ çš„é¡µé¢'</span>);
  }

  pages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">page, index</span>) =&gt;</span> {
    <span class="hljs-comment">// ç¬¬ä¸€é¡µç›´æ¥ç”¨ï¼Œåç»­éœ€è¦ addPage</span>
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">0</span>) {
      pdf.<span class="hljs-title function_">addPage</span>();
    }

    <span class="hljs-comment">// åƒç´ è½¬æ¯«ç±³ï¼ˆè€ƒè™‘ scale=2ï¼‰</span>
    <span class="hljs-keyword">const</span> scaleFactor = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> pageHeightMm = page.<span class="hljs-property">height</span> / <span class="hljs-variable constant_">MM_TO_PX</span> / scaleFactor;

    <span class="hljs-comment">// å›¾ç‰‡é€‚é…å†…å®¹åŒºåŸŸå®½åº¦</span>
    <span class="hljs-keyword">const</span> finalWidth = <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span>;  <span class="hljs-comment">// 190mm</span>
    <span class="hljs-keyword">const</span> finalHeight = pageHeightMm;

    <span class="hljs-comment">// ä½ç½®ï¼šå·¦ä¸Šè§’å¯¹é½ï¼Œä¿ç•™ 10mm è¾¹è·</span>
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable constant_">PDF_MARGIN_MM</span>;
    <span class="hljs-keyword">const</span> y = <span class="hljs-variable constant_">PDF_MARGIN_MM</span>;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ·»åŠ ç¬¬ <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span> é¡µ: <span class="hljs-subst">${finalWidth}</span>x<span class="hljs-subst">${finalHeight.toFixed(<span class="hljs-number">2</span>)}</span>mm`</span>);

    <span class="hljs-comment">// æ·»åŠ å›¾ç‰‡åˆ° PDF</span>
    pdf.<span class="hljs-title function_">addImage</span>(page.<span class="hljs-property">dataUrl</span>, <span class="hljs-string">'PNG'</span>, x, y, finalWidth, finalHeight);
  });

  <span class="hljs-keyword">return</span> pdf;
}
</code></pre>
<h3 data-id="heading-19">Step 4ï¼šä¸»å¯¼å‡ºå‡½æ•°</h3>
<p>å°†ä»¥ä¸Šæ­¥éª¤ä¸²è”èµ·æ¥ï¼Œæä¾›ç»Ÿä¸€çš„å¯¼å‡ºæ¥å£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ExportConfig</span> {
  <span class="hljs-attr">targetSelector</span>: <span class="hljs-built_in">string</span>;   <span class="hljs-comment">// CSS é€‰æ‹©å™¨</span>
  filename?: <span class="hljs-built_in">string</span>;        <span class="hljs-comment">// æ–‡ä»¶å</span>
  quality?: <span class="hljs-built_in">number</span>;         <span class="hljs-comment">// å›¾ç‰‡è´¨é‡</span>
}

<span class="hljs-comment">/**
 * ä¸»å¯¼å‡ºå‡½æ•°
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportMessagesToPdf</span>(<span class="hljs-params">config: ExportConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">const</span> {
    targetSelector,
    filename = <span class="hljs-string">'messages.pdf'</span>,
    quality = <span class="hljs-variable constant_">IMAGE_QUALITY</span>
  } = config;

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== å¼€å§‹å¯¼å‡º PDF ==='</span>);

  <span class="hljs-comment">// 1. è·å–ç›®æ ‡å…ƒç´ </span>
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(targetSelector) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
  <span class="hljs-keyword">if</span> (!element) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å…ƒç´ æœªæ‰¾åˆ°: <span class="hljs-subst">${targetSelector}</span>`</span>);
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å°ºå¯¸:'</span>, {
    <span class="hljs-attr">width</span>: element.<span class="hljs-property">offsetWidth</span>,
    <span class="hljs-attr">height</span>: element.<span class="hljs-property">scrollHeight</span>
  });

  <span class="hljs-comment">// 2. DOM æˆªå›¾</span>
  <span class="hljs-keyword">const</span> imageDataUrl = <span class="hljs-keyword">await</span> <span class="hljs-title function_">captureElementToImage</span>(element, quality);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆªå›¾å®Œæˆï¼Œå¤§å°:'</span>, (imageDataUrl.<span class="hljs-property">length</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'KB'</span>);

  <span class="hljs-comment">// 3. å›¾ç‰‡åˆ†é¡µ</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-keyword">await</span> <span class="hljs-title function_">splitImageIntoPages</span>(imageDataUrl);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ†é¡µå®Œæˆï¼Œå…± <span class="hljs-subst">${pages.length}</span> é¡µ`</span>);

  <span class="hljs-comment">// 4. åˆ›å»º PDF</span>
  <span class="hljs-keyword">const</span> pdf = <span class="hljs-title function_">createPdfFromPages</span>(pages);

  <span class="hljs-comment">// 5. ä¿å­˜æ–‡ä»¶</span>
  pdf.<span class="hljs-title function_">save</span>(filename);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== å¯¼å‡ºå®Œæˆ ==='</span>);
}
</code></pre>
<h3 data-id="heading-20">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// MessageList.tsx</span>

<span class="hljs-keyword">import</span> { exportMessagesToPdf } <span class="hljs-keyword">from</span> <span class="hljs-string">'../services/messageExportService'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MessageList</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> messageListRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isExporting, setIsExporting] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> handleExportToPdf = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-title function_">setIsExporting</span>(<span class="hljs-literal">true</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„æ–‡ä»¶å</span>
      <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[:.]/g</span>, <span class="hljs-string">'-'</span>);
      <span class="hljs-keyword">const</span> filename = <span class="hljs-string">`messages-<span class="hljs-subst">${timestamp}</span>.pdf`</span>;

      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exportMessagesToPdf</span>({
        <span class="hljs-attr">targetSelector</span>: <span class="hljs-string">'.message-list-container'</span>,
        filename,
        <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>
      });

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¯¼å‡ºå¤±è´¥:'</span>, error);
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsExporting</span>(<span class="hljs-literal">false</span>);
    }
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list-container"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{messageListRef}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¶ˆæ¯è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"export-button"</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleExportToPdf}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isExporting}</span>
        &gt;</span>
          {isExporting ? 'å¯¼å‡ºä¸­...' : 'å¯¼å‡º PDF'}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list"</span>&gt;</span>
        {messages.map(message =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">MessageItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{message.id}</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{message}</span> /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-21">å®Œæ•´æ•ˆæœ</h3>
<p>è¿è¡Œé¡¹ç›®åï¼Œç‚¹å‡»ã€Œå¯¼å‡º PDFã€æŒ‰é’®ï¼š</p>
<ol>
<li>æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†çš„å¯¼å‡ºæ—¥å¿—</li>
<li>è‡ªåŠ¨è®¡ç®—é¡µæ•°å¹¶åˆ†é¡µ</li>
<li>ç”Ÿæˆé«˜æ¸… PDF æ–‡ä»¶å¹¶è‡ªåŠ¨ä¸‹è½½</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">=== å¼€å§‹å¯¼å‡º <span class="hljs-attr">PDF</span> ===
ç›®æ ‡é€‰æ‹©å™¨: .message-list-container
å…ƒç´ å°ºå¯¸: { width: 600, height: 8500 }
å¼€å§‹æˆªå›¾...
æˆªå›¾å®Œæˆï¼Œå¤§å°: 2847.65 KB
åˆ†é¡µå®Œæˆï¼Œå…± 8 é¡µ
æ·»åŠ ç¬¬ 1 é¡µ: 190x277.00mm
æ·»åŠ ç¬¬ 2 é¡µ: 190x277.00mm
...
æ·»åŠ ç¬¬ 8 é¡µ: <span class="hljs-attr">190x156.32mm</span>
=== å¯¼å‡ºå®Œæˆ ===
</code></pre>
<hr/>
<h2 data-id="heading-22">SnapDOM VS html2canvas</h2>
<p>ä¸ºä»€ä¹ˆé€‰æ‹© SnapDOM è€Œä¸æ˜¯æ›´æµè¡Œçš„ html2canvasï¼Ÿè®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-23">è¯¦ç»†å¯¹æ¯”è¡¨</h3>




























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>SnapDOM</th><th>html2canvas</th></tr></thead><tbody><tr><td><strong>æ ·å¼è¿˜åŸ</strong></td><td>â˜…â˜…â˜…â˜…â˜… æ¥è¿‘å®Œç¾</td><td>â˜…â˜…â˜…â˜†â˜† éƒ¨åˆ†æ ·å¼ä¸¢å¤±</td></tr><tr><td><strong>Flexbox/Grid</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ éƒ¨åˆ†é—®é¢˜</td></tr><tr><td><strong>æ¸å˜èƒŒæ™¯</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ å¯èƒ½å¤±çœŸ</td></tr><tr><td><strong>é˜´å½±æ•ˆæœ</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ éƒ¨åˆ†ä¸¢å¤±</td></tr><tr><td><strong>è‡ªå®šä¹‰å­—ä½“</strong></td><td>âœ… æ”¯æŒ</td><td>âš ï¸ éœ€è¦é¢å¤–å¤„ç†</td></tr><tr><td><strong>SVG æ”¯æŒ</strong></td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âš ï¸ æœ‰é™æ”¯æŒ</td></tr><tr><td><strong>è¾“å‡ºæ ¼å¼</strong></td><td>PNG/Canvas/SVG</td><td>Canvas/PNG</td></tr><tr><td><strong>åŒ…å¤§å°</strong></td><td>~20KB</td><td>~60KB</td></tr><tr><td><strong>ç»´æŠ¤çŠ¶æ€</strong></td><td>æ´»è·ƒæ›´æ–°</td><td>è¾ƒå°‘æ›´æ–°</td></tr><tr><td><strong>API è®¾è®¡</strong></td><td>ç°ä»£ Promise</td><td>å›è°ƒ + Promise</td></tr></tbody></table>
<h3 data-id="heading-24">ä»£ç å¯¹æ¯”</h3>
<p><strong>html2canvas æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> html2canvas <span class="hljs-keyword">from</span> <span class="hljs-string">'html2canvas'</span>;

<span class="hljs-comment">// éœ€è¦å¤„ç†å„ç§å…¼å®¹æ€§é—®é¢˜</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> <span class="hljs-title function_">html2canvas</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">logging</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">allowTaint</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">foreignObjectRendering</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯èƒ½ä¸ç”Ÿæ•ˆ</span>
  <span class="hljs-comment">// è¿˜éœ€è¦å¤„ç†å­—ä½“ã€SVG ç­‰é—®é¢˜...</span>
});

<span class="hljs-keyword">const</span> dataUrl = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);
</code></pre>
<p><strong>SnapDOM æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// ç®€æ´çš„ APIï¼Œæ— éœ€é¢å¤–é…ç½®</span>
<span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>
});

<span class="hljs-keyword">const</span> dataUrl = (<span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>()).<span class="hljs-property">src</span>;
</code></pre>
<h3 data-id="heading-25">ä»€ä¹ˆæ—¶å€™é€‰æ‹© html2canvasï¼Ÿ</h3>
<p>è™½ç„¶ SnapDOM åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹æ›´ä¼˜ç§€ï¼Œä½† html2canvas åœ¨ä»¥ä¸‹æƒ…å†µå¯èƒ½æ›´é€‚åˆï¼š</p>
<ol>
<li><strong>é¡¹ç›®å·²åœ¨ä½¿ç”¨</strong>ï¼šè¿ç§»æˆæœ¬è¾ƒé«˜</li>
<li><strong>ç®€å•åœºæ™¯</strong>ï¼šåªéœ€æˆªå–ç®€å•æ–‡æœ¬ï¼Œæ— å¤æ‚æ ·å¼</li>
<li><strong>å›¢é˜Ÿç†Ÿæ‚‰åº¦</strong>ï¼šå›¢é˜Ÿå¯¹ html2canvas æ›´ç†Ÿæ‚‰</li>
</ol>
<h2 data-id="heading-26">æ€»ç»“</h2>
<h3 data-id="heading-27">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>SnapDOM</strong> æä¾›é«˜ä¿çœŸçš„ DOM æˆªå›¾èƒ½åŠ›ï¼Œé€šè¿‡ <code>scale: 2</code> å®ç° 2 å€æ¸…æ™°åº¦</li>
<li><strong>jsPDF</strong> æ˜¯å¼ºå¤§çš„ PDF ç”Ÿæˆåº“ï¼Œæ”¯æŒ A4 çº¸å¼ ã€å‹ç¼©ç­‰ç‰¹æ€§</li>
<li><strong>åˆ†é¡µç®—æ³•</strong> æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒéš¾ç‚¹ï¼Œéœ€è¦ç²¾ç¡®è®¡ç®—åƒç´ ä¸æ¯«ç±³çš„è½¬æ¢</li>
<li><strong>SnapDOM</strong> ç›¸æ¯” html2canvas åœ¨æ ·å¼è¿˜åŸåº¦ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿</li>
</ol>
<h3 data-id="heading-28">è¿›ä¸€æ­¥ä¼˜åŒ–æ–¹å‘</h3>





























<table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Web Worker</strong></td><td>å°†åˆ†é¡µè®¡ç®—æ”¾åˆ° Worker ä¸­ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</td></tr><tr><td><strong>åˆ†æ®µæˆªå›¾</strong></td><td>è¶…é•¿å†…å®¹åˆ†æ®µæˆªå›¾ï¼Œé¿å…å†…å­˜æº¢å‡º</td></tr><tr><td><strong>åŠ è½½æç¤º</strong></td><td>æ·»åŠ è¿›åº¦æ¡ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>PDF å‹ç¼©</strong></td><td>ä½¿ç”¨ pdf-lib è¿›ä¸€æ­¥å‹ç¼© PDF ä½“ç§¯</td></tr><tr><td><strong>é¡µçœ‰é¡µè„š</strong></td><td>æ·»åŠ é¡µç ã€æ—¶é—´æˆ³ç­‰ä¿¡æ¯</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼]]></title>    <link>https://juejin.cn/post/7576580177662132234</link>    <guid>https://juejin.cn/post/7576580177662132234</guid>    <pubDate>2025-11-26T04:34:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576580177662132234" data-draft-id="7576646142315937833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T04:34:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:34:27.000Z" title="Wed Nov 26 2025 04:34:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 454 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è¿˜æ²¡ç§ƒé¡¶çš„è‹ä½•ã€‚</p>
<p>æ˜¨æ™šå¬äº† TRAE SOLO å›½å†…ç‰ˆä¸Šçº¿çš„å‘å¸ƒä¼šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a52e09b1f24a669b6039c91d2450ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=0XY9x7d8iNF1Vlt%2BhvEfs9PoZBs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ—¶éš” 4 ä¸ªæœˆï¼Œå®ƒç»ˆäºæ¥äº†ã€‚</p>
<p>æˆ‘ä¹Ÿç¬¬ä¸€æ—¶é—´åšäº†ä¸‹ä½“éªŒï¼Œåšäº†å‡ ä¸ª caseï¼Œå½•äº†ä¸ªè§†é¢‘ç»™å¤§å®¶çœ‹çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46ea2fc4cbe04f63a92a4f3b65840006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=tFRfXJgCl1EV6%2BCd0RqY8Btf6c0%3D" alt="wxv_4269304641676214281" loading="lazy"/></p>
<p>è¿½æº¯åˆ° 7 æœˆä»½ï¼Œé‚£æ—¶å€™å›½é™…ç‰ˆåˆšå¼€ Beta æµ‹è¯•ï¼Œå…¨ç½‘çˆ†ç«ï¼Œæ¿€æ´»ç çœŸæ˜¯ä¸€ç éš¾æ±‚ã€‚æˆ‘å½“æ—¶åºŸäº†å¾ˆå¤§åŠ²ï¼Œç¬¬ä¸€æ—¶é—´æŠ¢é²œä½“éªŒäº†ä¸€æŠŠï¼Œæ‰‹æ„Ÿç¡®å®æƒŠè‰³ï¼Œä¸ºæ­¤è¿˜ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« åˆ†äº«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e3bfebe492740cab632a4b7a26e89d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=wh5d7TvihbfhjeQt6wosEvfCtrk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ˜¯ä»é‚£æ—¶èµ·ï¼Œæˆ‘å’Œ Trae ç®—æ˜¯ã€Œæ ã€ä¸Šäº†ï¼Œå…³ç³»å˜å¾—ç›¸å½“å¾®å¦™ã€‚</p>
<p>åæ¥æˆ‘è¿˜æˆäº†æ­¦æ±‰çš„ Trae Fellowï¼Œåœ¨æ­¦æ±‰æäº†ä¸€åœºé»‘å®¢æ¾ã€‚çœ‹ç€å¤§å®¶åœ¨ç°åœºç”¨å®ƒä» 0 åˆ° 1 æ„å»ºé¡¹ç›®ï¼Œæˆ‘æ˜¯çœŸåˆ‡æ„Ÿå—åˆ°äº†å·¥å…·å¸¦æ¥çš„å˜åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/250626d7ed844bb0a57773ac8935e4ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=ZOAYXNR8s4WiRFhT3SGgg93OuTc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‡³äºä¸ºå•¥æˆ‘ä¸€ç›´ç›¯ç€ Trae ä¸æ”¾ï¼Œåˆä¸ºå•¥è§‰å¾—è¿™æ¬¡å›½å†…ç‰ˆ SOLO æ¨¡å¼çš„å‘å¸ƒæ„ä¹‰éå‡¡ï¼Ÿ</p>
<p>ç†ç”±å…¶å®å¾ˆç®€å•ã€‚</p>
<p>è™½ç„¶ Cursor å¾ˆå¼ºï¼Œä½†ç½‘ç»œé—®é¢˜æŠŠå¤ªå¤šäººæŒ¡åœ¨é—¨å¤–äº†ã€‚æˆ‘ä»¬å¤ªç¼ºä¸€æ¬¾èƒ½çœŸæ­£å¯¹æ ‡ç”šè‡³è¶…è¶Š Cursorï¼ŒåŒæ—¶åˆæ²¡æœ‰ä»»ä½•ç½‘ç»œé—¨æ§›çš„ AI IDE äº†ã€‚</p>
<p>AI ç¼–ç¨‹ä¸è¯¥æ˜¯å°‘æ•°äººçš„ç‰¹æƒã€‚</p>
<p>è¦æƒ³è®©è¿™ç§å¼ºå¤§çš„ç”Ÿäº§åŠ›çœŸæ­£é“ºå¼€ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½ä½“ä¼šåˆ°å®ƒçš„å¼ºå¤§ï¼Œå°±å¾—æŠŠé—¨æ§›è¸©ç¢ã€‚</p>
<p>è¿™æ­£æ˜¯ Trae è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨é»˜é»˜åšçš„äº‹ã€‚</p>
<p>11 æœˆ 25 æ—¥å‘å¸ƒçš„è¿™ä¸ªç‰ˆæœ¬ï¼Œç›´æ¥åŒæ­¥äº†å›½é™…ç‰ˆæœ€æ ¸å¿ƒçš„ SOLO Coder åŠŸèƒ½ï¼Œç”šè‡³åŒ…æ‹¬ Plan æ¨¡å¼ã€å¤šä»»åŠ¡å¹¶è¡Œè¿™äº›ç¡¬æ ¸èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87dc3653e8434bfe8a2e91642294e9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=qjd62r%2FZsZ1sX9yhB4UzN8vVVxk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æœ€æœ€å…³é”®çš„æ˜¯ï¼Œå®ƒç›®å‰<strong>å®Œå…¨å…è´¹</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6be1518803bd41b898e9a6726b5372a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1HT2kZ9K6%2F3WlOMEsRiK2pbvqUY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¯ä»¥å®æ—¶è·Ÿéšï¼Œè¿˜ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¡µé¢é¢„è§ˆï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>è¿™å°±å¾ˆæœ‰æ„æ€äº†ã€‚ä»¥å‰æˆ‘ä»¬ç”¨ AI å†™ä»£ç ï¼Œæ€»æ„Ÿè§‰åƒæ˜¯åœ¨ã€Œå¼€ç›²ç›’ã€ã€‚ä½ ç»™ä¸ªæŒ‡ä»¤ï¼ŒAI é—·å¤´å†™ï¼Œå†™å‡ºæ¥èƒ½è·‘ç®—è¿æ°”å¥½ï¼Œä¸èƒ½è·‘ä½ å°±å¾—åœ¨é‚£å¯¹ç€ä¸€å †ä»£ç å¹²çªçœ¼ï¼Œå®Œå…¨ä¸çŸ¥é“å®ƒä¸­é—´ç»å†äº†ä»€ä¹ˆå¿ƒè·¯å†ç¨‹ã€‚</p>
<p>ä½† TRAE SOLO ä¸»æ‰“çš„æ¦‚å¿µå«ã€ŒResponsive Coding Agentã€ã€‚</p>
<p>åˆ«è¢«è¿™ä¸ªè‹±æ–‡å“åˆ°ï¼Œæˆ‘è‡ªå·±ä¸Šæ‰‹ç›˜äº†ä¸€ä¸‹ï¼Œè§‰å¾—ç”¨å¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼š<strong>å®ƒä¸å†æ˜¯ä¸ªåªä¼šæ‰§è¡Œå‘½ä»¤çš„æ­»æ¿å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å’Œä½ ã€Œæœ‰å•†æœ‰é‡ã€çš„æ™ºèƒ½é˜Ÿå‹ã€‚</strong></p>
<p>å…·ä½“å¼ºåœ¨å“ªï¼Ÿæˆ‘æŒ‘å‡ ä¸ªå’±ä»¬å†™ä»£ç æ—¶æœ€æ„ŸåŒèº«å—çš„ç‚¹èŠèŠã€‚</p>
<p><strong>ç¬¬ä¸€ï¼Œå®ƒæ‡‚å¾—ã€Œå…ˆæ€è€ƒï¼Œå†åŠ¨æ‰‹ã€ã€‚</strong></p>
<p>ä»¥å‰çš„ AI æ˜¯æ€¥æ€§å­ï¼Œä½ éœ€æ±‚è¿˜æ²¡è¯´å®Œï¼Œå®ƒä»£ç å¯èƒ½å°±ç”Ÿæˆäº†ä¸€åŠã€‚ç»“æœå¾€å¾€æ˜¯æ–¹å‘é”™äº†ï¼Œè¿˜å¾—æ¨å€’é‡æ¥ã€‚</p>
<p>TRAE SOLO æœ‰ä¸ªÂ <strong>Plan æ¨¡å¼</strong>ã€‚å½“ä½ æŠ›å‡ºä¸€ä¸ªå¤æ‚éœ€æ±‚æ—¶ï¼Œå®ƒä¸ä¼šæ€¥ç€å†™ä»£ç ï¼Œè€Œæ˜¯å…ˆç»™ä½ åˆ—ä¸€ä¸ª To-Do Listï¼Œå‘Šè¯‰ä½ å®ƒå‡†å¤‡åˆ†å‡ æ­¥èµ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28279fd152f94235a5b404a7fd0ebd35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=CaOfEkZ3AKrNDfoJpmgRhfBExc4%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™å°±å¾ˆåƒå¸¦å¾’å¼Ÿäº†ã€‚</p>
<p>ä½ çœ‹äº†è®¡åˆ’ï¼Œè§‰å¾—æ²¡é—®é¢˜ï¼Œå®ƒå†å¼€å·¥ï¼›è§‰å¾—é€»è¾‘ä¸å¯¹ï¼Œç›´æ¥åœ¨è®¡åˆ’é˜¶æ®µå°±æŒ‡å‡ºæ¥ã€‚æŠŠé”™è¯¯æ‰¼æ€åœ¨å†™ä»£ç ä¹‹å‰ï¼Œè¿™æ‰æ˜¯æ­£ç»çš„å·¥ç¨‹æ€ç»´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/015f8615e6134b819e7066e3ad68231f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=6u1MWBujjCMpZQGfr90%2FAPtwnow%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬äºŒï¼Œå‘Šåˆ«é»‘ç›’ï¼Œä»£ç æ”¹äº†å“ªä¸€ç›®äº†ç„¶ã€‚</strong></p>
<p>è¿™æ¬¡æ–°å¢çš„ä»£ç å˜æ›´ï¼ˆÂ <strong>DiffView</strong>Â ï¼‰åŠŸèƒ½æˆ‘ä¸ªäººéå¸¸å–œæ¬¢ã€‚</p>
<p>ä»¥å‰ AI æ”¹ä»£ç ï¼Œç»å¸¸æŠŠå¥½çš„é€»è¾‘ä¹Ÿç»™æ”¹åäº†ã€‚ç°åœ¨ï¼Œå®ƒåšäº†å“ªäº›æ–°å¢ã€æ”¹äº†å“ªäº›é€»è¾‘ï¼Œéƒ½åœ¨ç•Œé¢ä¸Šæ¸…æ¸…æ¥šæ¥šåœ°å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>ä½ å¯ä»¥å®æ—¶å®¡æŸ¥ï¼ˆCode Reviewï¼‰ï¼Œå°±åƒçœ‹åŒäº‹æäº¤çš„ä»£ç ä¸€æ ·ã€‚ä½ æ²¡ç‚¹å¤´ï¼Œå®ƒå°±ä¸æ•¢ä¹±åˆå¹¶ã€‚è¿™ç§ã€Œéšæ—¶å¯æŒæ§ã€çš„æ„Ÿè§‰ï¼Œæ‰æ˜¯æˆ‘ä»¬æ•¢åœ¨å®é™…é¡¹ç›®é‡Œç”¨ AI çš„åº•æ°”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e79022ae1ff423f9ac7e9215d1d81a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=LLKNsMavSOSm37mOd5xYhWNQB8A%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬ä¸‰ï¼Œè„‘å­å¥½ä½¿ï¼Œè¿˜æ‡‚å¾—ã€Œæ–­èˆç¦»ã€ã€‚</strong></p>
<p>åšå¤§é¡¹ç›®æœ€æ€• AI èŠç€èŠç€å°±ã€Œå¤±å¿†ã€ï¼Œæˆ–è€…å› ä¸ºä¸Šä¸‹æ–‡å¤ªé•¿å¼€å§‹èƒ¡è¨€ä¹±è¯­ã€‚</p>
<p>TRAE SOLO åœ¨è¿™å—åšå¾—æ¯”è¾ƒèªæ˜ã€‚å®ƒèƒ½æ”¯æŒæ£€ç´¢æµ·é‡çš„ä»£ç æ–‡ä»¶ï¼ˆæ®è¯´èƒ½æ‰›ä½ 10 ä¸‡ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæœ‰ä¸€å¥—è‡ªåŠ¨çš„ä¸Šä¸‹æ–‡å‹ç¼©æœºåˆ¶ã€‚</p>
<p>å½“å¯¹è¯å¤ªé•¿æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è§¦å‘å‹ç¼©ï¼Œä¿ç•™æ ¸å¿ƒä¿¡æ¯ï¼›ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç‚¹ä¸€ä¸‹å‹ç¼©ï¼Œè®©å®ƒæŠŠæ²¡ç”¨çš„åºŸè¯æ¸…æ‰ã€‚è¿™æ ·æ—¢ä¿ç•™äº†å…³é”®è®°å¿†ï¼Œåˆä¸ä¼šè®©æ¨¡å‹è·‘åã€‚</p>
<p><strong>é™¤æ­¤ï¼Œå®ƒè¿˜èƒ½ã€Œåˆ†èº«ã€ã€‚</strong></p>
<p>è¿™ç©æ„å„¿æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œ sub agentã€‚ä½ å¯ä»¥å¼€ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»ä¿® Bugï¼ŒåŒæ—¶å¼€å¦ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»å†™æ–°åŠŸèƒ½çš„æ¥å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca08f3fe2b84b6583cd6c0291dd9d3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=VW8Mrm4rK8LpYaLQ%2FgBVwi46z8g%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼Œè¿™å›çœŸä¸æ˜¯è¯´è¯´è€Œå·²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6242fa3c9ee3409abcd55bc373db269f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=2GrcV1KDXI%2FxENe6DFU1J6SVv98%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™äº›æ™ºèƒ½ä½“ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±åˆ›å»ºçš„ï¼Œç‚¹ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€å°±èƒ½åˆ›å»ºäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b883d8c325084545954e87bf2212da84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=vQEIIt65AKol489Y236CkCZhRPg%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>åˆ›å»ºå¥½åå°±èƒ½çœ‹åˆ°è‡ªå·±æ‹¥æœ‰çš„æ™ºèƒ½ä½“äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8254192470f4ba191e26e935671b09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1hw0UzJ%2Fcv6k%2BVmpNYAOapnHF%2F8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ç›®å‰å›½å†…ç‰ˆæ”¯æŒäº†å›½å†…é¡¶å°–çš„ä»£ç æ¨¡å‹ï¼Œæ¯”å¦‚ Doubao-Seed-Codeã€Kimi K2ã€GLM 4.6 ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f521848b7e4e1eb4a80885117a8918~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=o51GEbXYwKRgRlBQiDJ2lGQZuyk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹ã€‚</p>
<p>åŒæ ·å†…ç½®ä¸å°‘ MCPã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbbf2dcefc24e199bce02b606cf6c67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=lWbEPTx5ANz1qP1IDo6th5kPxLY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¹¿åœºèƒ½æœç´ åˆ°éå¸¸å¤šå¥½ç”¨çš„ MCPï¼Œé…ç½®ä¹Ÿå¾ˆç®€å•ç›¸å¯¹ Cursor æ¥è¯´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c251ca0914e406b9c9844c0e9a4419e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=yQ5TLllMOnxrVNqPixWLzzLjVD0%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸‹æ¥ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ã€Œé¡ºæ»‘ã€ã€‚æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿçš„ç„¦è™‘ï¼ŒåŠ ä¸Šè¿™ç§é€æ˜çš„åä½œæ¨¡å¼ï¼Œç¡®å®èƒ½è®©äººä¸“æ³¨äºåˆ›é€ æœ¬èº«ã€‚</p>
<p>è¯´å®è¯ï¼ŒTrae SOLO ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ã€Œç‘•ä¸æ©ç‘œã€ã€‚</p>
<p>å¦‚æœè¦å¹æ¯›æ±‚ç–µï¼Œå›½å†…åº•å±‚çš„ä»£ç æ¨¡å‹åœ¨å¤„ç†æåº¦å¤æ‚çš„æ·±å±‚é€»è¾‘æ—¶ï¼Œè·ç¦»å›½å¤–æœ€é¡¶å°–çš„æ¨¡å‹ç¡®å®è¿˜æœ‰ä¸€äº›æå‡ç©ºé—´ã€‚è¿™ç‚¹å’±ä»¬å¾—è®¤ï¼Œæ¨¡å‹èƒ½åŠ›çš„æ‰“ç£¨è¿˜éœ€è¦æ—¶é—´ã€‚</p>
<p>ä½† Trae å›¢é˜Ÿèªæ˜çš„åœ°æ–¹åœ¨äºï¼Œä»–ä»¬ç”¨æè‡´çš„äº§å“ç»†èŠ‚å¼¥è¡¥äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>é‚£ç§è¡Œäº‘æµæ°´çš„äº¤äº’æ„Ÿï¼ŒDiffView å¸¦æ¥çš„æŒæ§æ„Ÿï¼Œä»¥åŠ Plan æ¨¡å¼ä¸‹çš„ã€Œå•†é‡ç€æ¥ã€ï¼Œè®©ä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¾€å¾€ä¼šå¿½ç•¥æ‰æ¨¡å‹æœ¬èº«çš„ä¸€ç‚¹å°ç‘•ç–µã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ‰“ç ´äº†é‚£å µæŠŠæ— æ•°äººæŒ¡åœ¨ AI ç¼–ç¨‹é—¨å¤–çš„ã€Œå¢™ã€ã€‚</p>
<p>ä¸ç”¨æŠ˜è…¾ç½‘ç»œï¼Œä¸ç”¨æ‹…å¿ƒè´¦å•ï¼Œæ‰“å¼€å°±èƒ½ç”¨ã€‚å¯¹äºå¤§å¤šæ•°æƒ³å°è¯• AI ç¼–ç¨‹çš„æœ‹å‹æ¥è¯´ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<p>å›½äº§ IDE èƒ½åšåˆ°è¿™ä¸ªç»†è…»ç¨‹åº¦ï¼Œå€¼å¾—ç»™ç‚¹æŒå£°ã€‚</p>
<p>å»è¯•è¯•å§ï¼Œä¹Ÿè®¸å®ƒå°±æ˜¯ä½ æœŸå¾…å·²ä¹…çš„é‚£ä¸ªã€Œç¼–ç¨‹æ­å­ã€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7576543407013232659</link>    <guid>https://juejin.cn/post/7576543407013232659</guid>    <pubDate>2025-11-26T00:39:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576543407013232659" data-draft-id="7571815573933408319" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ"/> <meta itemprop="keywords" content="Flutter,Android,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T00:39:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T00:39:47.000Z" title="Wed Nov 26 2025 00:39:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>åœ¨å¥åº·ç±» App å¼€å‘ä¸­ï¼Œç¡çœ å‘¨æœŸåˆ†æå’Œå†¥æƒ³æ•°æ®å±•ç¤ºæ˜¯æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚ä¸€ä¸ªç›´è§‚ã€ç¾è§‚ä¸”äº¤äº’æµç•…çš„å¯è§†åŒ–å›¾è¡¨ï¼Œèƒ½æå¤§æå‡ç”¨æˆ·å¯¹å¥åº·æ•°æ®çš„ç†è§£å’Œä½¿ç”¨ä½“éªŒã€‚ä»Šå¤©ç»™å¤§å®¶æ¨èä¸€æ¬¾ä¸“ä¸º Flutter å¼€å‘è€…æ‰“é€ çš„å…¨èƒ½å‹å›¾è¡¨æ’ä»¶â€”â€”<strong>sleep_stage_chart</strong>ï¼Œå®ƒä¸ä»…èƒ½å®Œç¾å‘ˆç°ç¡çœ é˜¶æ®µæ•°æ®ï¼Œè¿˜æ”¯æŒå†¥æƒ³æ—¶é•¿å¯è§†åŒ–ï¼Œè·¨å¹³å°å…¼å®¹ä¸”é«˜åº¦å¯å®šåˆ¶ã€‚</p>
<h2 data-id="heading-0">1. ç®€ä»‹</h2>
<p><code>sleep_stage_chart</code>æ˜¯ä¸€æ¬¾ä¸“æ³¨äºç¡çœ é˜¶æ®µå’Œå†¥æƒ³æ•°æ®å¯è§†åŒ–çš„ Flutter æ’ä»¶ï¼Œå€Ÿé‰´äº† Apple Health åº”ç”¨çš„ä¼˜é›…è®¾è®¡é£æ ¼ï¼Œæä¾›äº†å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœå’Œä¸°å¯Œçš„äº¤äº’èƒ½åŠ›ã€‚è¯¥æ’ä»¶æ”¯æŒ Androidã€iOS å’Œ Windows ä¸‰å¤§å¹³å°ï¼Œèƒ½å¤Ÿæ»¡è¶³å¥åº·ç±» App å¯¹ç¡çœ å‘¨æœŸåˆ†æã€å†¥æƒ³æ—¶é•¿ç»Ÿè®¡ç­‰åœºæ™¯çš„å¯è§†åŒ–éœ€æ±‚ã€‚</p>
<h3 data-id="heading-1">1.1. ä¾‹å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b79258904c437ebbd0ad21222c3480~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764722387&amp;x-signature=j27zZH389EnntvmiOQ5T5xdwVVo%3D" alt="ç¡çœ å›¾" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6c35ad686d4faab1d7fb8b59c205fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764722387&amp;x-signature=Kp5YCWV4ao5d15cAckwkfDNzm%2Bo%3D" alt="å†¥æƒ³å›¾" loading="lazy"/></p>
<h3 data-id="heading-2">1.2. æ ¸å¿ƒåŠŸèƒ½</h3>
<p>è¯¥æ’ä»¶çš„åŠŸèƒ½è¦†ç›–äº†å¥åº·æ•°æ®å¯è§†åŒ–çš„æ ¸å¿ƒéœ€æ±‚ï¼ŒåŒæ—¶æä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ï¼š</p>
<ul>
<li>ğŸ“Š <strong>åŒå›¾è¡¨æ”¯æŒ</strong>ï¼šåŒæ—¶å…¼å®¹ç¡çœ é˜¶æ®µå›¾ï¼ˆæµ…ç¡/æ·±ç¡/REM/æ¸…é†’çŠ¶æ€ï¼‰å’Œå†¥æƒ³æ—¶é•¿å›¾</li>
<li>ğŸ¨ <strong>æ·±åº¦å®šåˆ¶åŒ–</strong>ï¼šæ”¯æŒé¢œè‰²ã€æ ·å¼ã€å¸ƒå±€ã€ç½‘æ ¼çº¿ç­‰å…¨ç»´åº¦è‡ªå®šä¹‰</li>
<li>ğŸ“± <strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šæ— ç¼è¿è¡Œäº Androidã€iOSã€Windows å¹³å°</li>
<li>ğŸ¤ <strong>äº¤äº’ä½“éªŒ</strong>ï¼šæ”¯æŒè§¦æ‘¸æ‹–æ‹½æŒ‡ç¤ºå™¨ï¼ŒæŸ¥çœ‹ä¸åŒæ—¶æ®µçš„è¯¦ç»†æ•°æ®</li>
<li>ğŸ• <strong>ç²¾å‡†æ—¶é—´å±•ç¤º</strong>ï¼šæ¸…æ™°å‘ˆç°æ—¶é—´èŒƒå›´ã€é˜¶æ®µæ—¶é•¿ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¶é—´æ ¼å¼åŒ–</li>
<li>ğŸ€ <strong>æ ·å¼æ‰©å±•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰åº•éƒ¨ç»„ä»¶ã€åœ†è§’ã€èƒŒæ™¯è‰²ç­‰å¤–è§‚å±æ€§</li>
<li>ğŸ“– <strong>å®Œå–„æ–‡æ¡£</strong>ï¼šæä¾›å®Œæ•´çš„ API è¯´æ˜å’Œå¯ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ä»£ç </li>
</ul>
<h2 data-id="heading-3">2. å¿«é€Ÿé›†æˆ</h2>
<p>åœ¨é¡¹ç›®çš„ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">sleep_stage_chart:</span> <span class="hljs-string">^1.1.2</span>  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h3 data-id="heading-4">2.1. åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<p>æ’ä»¶æä¾›äº†ä¸¤ç§æ ¸å¿ƒå›¾è¡¨åœºæ™¯ï¼šç¡çœ é˜¶æ®µå›¾å’Œå†¥æƒ³æ—¶é•¿å›¾ï¼Œä»¥ä¸‹æ˜¯æœ€ç®€å®ç°ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-5">ç¡çœ é˜¶æ®µå›¾</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:sleep_stage_chart/sleep_stage_chart.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SleepChartDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// æ„é€ ç¡çœ æ•°æ®ï¼šåŒ…å«é˜¶æ®µç±»å‹ã€èµ·æ­¢æ—¶é—´ã€æè¿°ä¿¡æ¯</span>
    <span class="hljs-keyword">final</span> sleepData = [
      SleepStageDetails(
        model: SleepStageEnum.light,  <span class="hljs-comment">// æµ…ç¡</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">22</span>, <span class="hljs-number">30</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">30</span>),
        info: [<span class="hljs-string">'æµ…ç¡ï¼Œç¡çœ è´¨é‡è‰¯å¥½'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.deep,   <span class="hljs-comment">// æ·±ç¡</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">30</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        info: [<span class="hljs-string">'æ·±ç¡ï¼Œèº«ä½“ä¿®å¤é˜¶æ®µ'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.rem,    <span class="hljs-comment">// REMç¡çœ ï¼ˆå¿«é€Ÿçœ¼åŠ¨ï¼‰</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">15</span>),
        info: [<span class="hljs-string">'REMç¡çœ ï¼Œå¤§è„‘æ´»è·ƒ'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.awake,  <span class="hljs-comment">// æ¸…é†’</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">30</span>),
        info: [<span class="hljs-string">'æ¸…é†’ï¼Œå‡†å¤‡èµ·åºŠ'</span>],
      ),
    ];

    <span class="hljs-keyword">return</span> Container(
      height: <span class="hljs-number">300</span>,
      margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
      child: SleepStageChart(
        details: sleepData,  <span class="hljs-comment">// ç¡çœ æ•°æ®ï¼ˆå¿…å¡«ï¼‰</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">22</span>, <span class="hljs-number">30</span>),  <span class="hljs-comment">// å¼€å§‹æ—¶é—´ï¼ˆå¿…å¡«ï¼‰</span>
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">30</span>),     <span class="hljs-comment">// ç»“æŸæ—¶é—´ï¼ˆå¿…å¡«ï¼‰</span>
        backgroundColor: Colors.white,            <span class="hljs-comment">// èƒŒæ™¯è‰²ï¼ˆå¿…å¡«ï¼‰</span>
        heightUnitRatio: <span class="hljs-number">1</span> / <span class="hljs-number">8</span>,                   <span class="hljs-comment">// é«˜åº¦æ¯”ä¾‹å•ä½</span>
        onIndicatorMoved: (stage) {               <span class="hljs-comment">// æŒ‡ç¤ºå™¨ç§»åŠ¨å›è°ƒ</span>
          <span class="hljs-built_in">print</span>(<span class="hljs-string">'å½“å‰é˜¶æ®µï¼š<span class="hljs-subst">${stage.model.name}</span>ï¼Œæ—¶é•¿ï¼š<span class="hljs-subst">${stage.duration}</span>åˆ†é’Ÿ'</span>);
        },
        bottomChild: <span class="hljs-keyword">const</span> [Text(<span class="hljs-string">'å…¥ç¡'</span>), Text(<span class="hljs-string">'èµ·åºŠ'</span>)],  <span class="hljs-comment">// åº•éƒ¨è‡ªå®šä¹‰æ–‡æœ¬</span>
        stageColors: {  <span class="hljs-comment">// è‡ªå®šä¹‰å„é˜¶æ®µé¢œè‰²</span>
          SleepStageEnum.light: Colors.blue.shade300,
          SleepStageEnum.deep: Colors.blue.shade700,
          SleepStageEnum.rem: Colors.teal.shade400,
          SleepStageEnum.awake: Colors.orange.shade300,
        },
      ),
    );
  }
}
</code></pre>
<h4 data-id="heading-6">å†¥æƒ³æ—¶é•¿å›¾</h4>
<p>å†¥æƒ³å›¾è¡¨é€šå¸¸éœ€è¦å±•ç¤ºå…¨å¤©æˆ–ç‰¹å®šæ—¶æ®µçš„å†¥æƒ³åˆ†å¸ƒï¼Œå¯é€šè¿‡ç»Ÿä¸€é¢œè‰²å’Œæ—¶é—´è½´é…ç½®å®ç°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:sleep_stage_chart/sleep_stage_chart.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MeditationChartDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">DateTime</span> dayStart = <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Container(
      height: <span class="hljs-number">300</span>,
      margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
      child: SleepStageChart(
        details: [
          SleepStageDetails(
            model: SleepStageEnum.light,
            startTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(minutes: <span class="hljs-number">30</span>)),
            endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(minutes: <span class="hljs-number">75</span>)),
            info: [<span class="hljs-string">'æ™¨é—´å†¥æƒ³ï¼Œä¸“æ³¨å‘¼å¸'</span>],
          ),
          SleepStageDetails(
            model: SleepStageEnum.light,
            startTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(hours: <span class="hljs-number">19</span>)),
            endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(hours: <span class="hljs-number">20</span>, minutes: <span class="hljs-number">20</span>)),
            info: [<span class="hljs-string">'ç¡å‰å†¥æƒ³ï¼Œæ”¾æ¾èº«å¿ƒ'</span>],
          ),
        ],
        startTime: dayStart,
        endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(days: <span class="hljs-number">1</span>)),
        backgroundColor: Colors.transparent,
        heightUnitRatio: <span class="hljs-number">1</span> / <span class="hljs-number">8</span>,
        allDayModel: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// å¼€å¯å…¨å¤©æ¨¡å¼</span>
        minuteInterval: <span class="hljs-number">360</span>,  <span class="hljs-comment">// æ—¶é—´è½´é—´éš”ï¼š6å°æ—¶</span>
        stageColors: <span class="hljs-keyword">const</span> {  <span class="hljs-comment">// ç»Ÿä¸€å†¥æƒ³é¢œè‰²</span>
          SleepStageEnum.light: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.deep: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.rem: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.awake: Color(<span class="hljs-number">0xFF43CAC4</span>),
        },
        bottomChild: [<span class="hljs-string">'00:00'</span>, <span class="hljs-string">'06:00'</span>, <span class="hljs-string">'12:00'</span>, <span class="hljs-string">'18:00'</span>, <span class="hljs-string">'00:00'</span>]
            .map((time) =&gt; Text(time, style: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">12</span>)))
            .toList(),
        showVerticalLine: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºç«–çº¿åˆ†éš”</span>
        showHorizontalLine: <span class="hljs-keyword">false</span>,  <span class="hljs-comment">// éšè—æ¨ªçº¿</span>
        borderRadius: <span class="hljs-number">12</span>,  <span class="hljs-comment">// åœ†è§’ä¼˜åŒ–</span>
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-7">2.2. é«˜çº§å®šåˆ¶æŒ‡å—</h3>
<p><code>sleep_stage_chart</code>æä¾›äº†ä¸°å¯Œçš„å®šåˆ¶å±æ€§ï¼Œä»¥ä¸‹æ˜¯å¸¸è§åœºæ™¯çš„å®šåˆ¶æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-8">é¢œè‰²å®šåˆ¶</h4>
<p>é€šè¿‡ <code>stageColors</code> å±æ€§è‡ªå®šä¹‰å„ç¡çœ é˜¶æ®µçš„é¢œè‰²ï¼Œæ”¯æŒæ‰€æœ‰ <code>SleepStageEnum</code> ç±»å‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">stageColors: <span class="hljs-keyword">const</span> {
  SleepStageEnum.light: Color(<span class="hljs-number">0xFFE3F2FD</span>),  <span class="hljs-comment">// æµ…ç¡-æ·¡è“</span>
  SleepStageEnum.deep: Color(<span class="hljs-number">0xFF90CAF9</span>),   <span class="hljs-comment">// æ·±ç¡-ä¸­è“</span>
  SleepStageEnum.rem: Color(<span class="hljs-number">0xFF42A5F5</span>),    <span class="hljs-comment">// REM-æ·±è“</span>
  SleepStageEnum.awake: Color(<span class="hljs-number">0xFFFFE0B2</span>),  <span class="hljs-comment">// æ¸…é†’-æ·¡æ©™</span>
  SleepStageEnum.notWorn: Color(<span class="hljs-number">0xFFF5F5F5</span>),<span class="hljs-comment">// æœªä½©æˆ´-ç°è‰²</span>
  SleepStageEnum.unknown: Color(<span class="hljs-number">0xFFEEEEEE</span>),<span class="hljs-comment">// æœªçŸ¥-æµ…ç°</span>
},
</code></pre>
<h4 data-id="heading-9">ç½‘æ ¼çº¿å®šåˆ¶</h4>
<p>æ§åˆ¶ç½‘æ ¼çº¿çš„æ˜¾ç¤º/éšè—å’Œæ ·å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ¨ªçº¿æ ·å¼</span>
horizontalLineStyle: SleepStageChartLineStyle(
  width: <span class="hljs-number">1.0</span>,
  color: Colors.grey.shade200,
  space: <span class="hljs-number">2.0</span>,  <span class="hljs-comment">// è™šçº¿é—´éš”</span>
),
<span class="hljs-comment">// ç«–çº¿æ ·å¼</span>
verticalLineStyle: SleepStageChartLineStyle(
  width: <span class="hljs-number">1.0</span>,
  color: Colors.grey.shade200,
),
showHorizontalLine: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºæ¨ªçº¿</span>
showVerticalLine: <span class="hljs-keyword">true</span>,    <span class="hljs-comment">// æ˜¾ç¤ºç«–çº¿</span>
horizontalLineCount: <span class="hljs-number">6</span>,    <span class="hljs-comment">// æ¨ªçº¿æ•°é‡ï¼ˆåˆ†å‰²å›¾è¡¨é«˜åº¦ï¼‰</span>
</code></pre>
<h4 data-id="heading-10">æ—¶é—´æ ¼å¼åŒ–</h4>
<p>é€šè¿‡ <code>dateFormatter</code> è‡ªå®šä¹‰æ—¶é—´è½´çš„æ˜¾ç¤ºæ ¼å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">dateFormatter: (<span class="hljs-built_in">DateTime</span> date) {
  <span class="hljs-comment">// è‡ªå®šä¹‰æ ¼å¼ï¼šå°æ—¶-åˆ†é’Ÿï¼ˆè¡¥é›¶ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${date.hour.toString().padLeft(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>)}</span>:<span class="hljs-subst">${date.minute.toString().padLeft(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>)}</span>'</span>;
},
</code></pre>
<h4 data-id="heading-11">äº¤äº’æ§åˆ¶</h4>
<p>æ§åˆ¶æŒ‡ç¤ºå™¨çš„æ˜¾ç¤ºå’Œå›è°ƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart">hasIndicator: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºè§¦æ‘¸æŒ‡ç¤ºå™¨</span>
onIndicatorMoved: (SleepStageDetails stage) {
  <span class="hljs-comment">// æŒ‡ç¤ºå™¨ç§»åŠ¨æ—¶å›è°ƒï¼Œå¯ç”¨äºæ›´æ–°è¯¦æƒ…é¢æ¿</span>
  setState(() {
    _currentStage = stage;
    _currentDuration = <span class="hljs-string">'<span class="hljs-subst">${stage.duration}</span>åˆ†é’Ÿ'</span>;
    _currentInfo = stage.info.join(<span class="hljs-string">' '</span>);
  });
},
</code></pre>
<h2 data-id="heading-12">3. æ ¸å¿ƒ API å‚è€ƒ</h2>
<p>ä¸‹é¢æ˜¯æ ¸å¿ƒçš„apiå±æ€§åˆ—ä¸¾ï¼š</p>
<h3 data-id="heading-13">SleepStageChartï¼ˆä¸»ç»„ä»¶ï¼‰</h3>





































































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>details</code></td><td>List</td><td>-</td><td>æ ¸å¿ƒæ•°æ®ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>startTime</code></td><td>DateTime</td><td>-</td><td>å¼€å§‹æ—¶é—´ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>endTime</code></td><td>DateTime</td><td>-</td><td>ç»“æŸæ—¶é—´ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>backgroundColor</code></td><td>Color</td><td>-</td><td>èƒŒæ™¯è‰²ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>stageColors</code></td><td>Map&lt;SleepStageEnum, Color&gt;?</td><td>null</td><td>é˜¶æ®µé¢œè‰²æ˜ å°„</td></tr><tr><td><code>heightUnitRatio</code></td><td>double</td><td>-</td><td>é«˜åº¦æ¯”ä¾‹å•ä½</td></tr><tr><td><code>borderRadius</code></td><td>double</td><td>8.0</td><td>åœ†è§’åŠå¾„</td></tr><tr><td><code>showVerticalLine</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºç«–çº¿</td></tr><tr><td><code>showHorizontalLine</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºæ¨ªçº¿</td></tr><tr><td><code>hasIndicator</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºè§¦æ‘¸æŒ‡ç¤ºå™¨</td></tr><tr><td><code>onIndicatorMoved</code></td><td>void Function(SleepStageDetails)?</td><td>null</td><td>æŒ‡ç¤ºå™¨ç§»åŠ¨å›è°ƒ</td></tr><tr><td><code>allDayModel</code></td><td>bool</td><td>false</td><td>æ˜¯å¦å¼€å¯å…¨å¤©æ¨¡å¼</td></tr><tr><td><code>minuteInterval</code></td><td>int</td><td>360</td><td>å…¨å¤©æ¨¡å¼æ—¶é—´é—´éš”ï¼ˆåˆ†é’Ÿï¼‰</td></tr><tr><td><code>bottomChild</code></td><td>List</td><td>[]</td><td>åº•éƒ¨è‡ªå®šä¹‰ç»„ä»¶åˆ—è¡¨</td></tr><tr><td><code>dateFormatter</code></td><td>String Function(DateTime)?</td><td>null</td><td>æ—¶é—´æ ¼å¼åŒ–å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-14">SleepStageDetailsï¼ˆæ•°æ®æ¨¡å‹ï¼‰</h3>



































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>model</code></td><td>SleepStageEnum</td><td>ç¡çœ /å†¥æƒ³é˜¶æ®µç±»å‹</td></tr><tr><td><code>startTime</code></td><td>DateTime</td><td>é˜¶æ®µå¼€å§‹æ—¶é—´</td></tr><tr><td><code>endTime</code></td><td>DateTime</td><td>é˜¶æ®µç»“æŸæ—¶é—´</td></tr><tr><td><code>info</code></td><td>List</td><td>é˜¶æ®µæè¿°ä¿¡æ¯</td></tr><tr><td><code>duration</code></td><td>int</td><td>æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œè‡ªåŠ¨è®¡ç®—ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15">SleepStageEnumï¼ˆé˜¶æ®µæšä¸¾ï¼‰</h3>





























<table><thead><tr><th>æšä¸¾å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>light</code></td><td>æµ…ç¡/å†¥æƒ³</td></tr><tr><td><code>deep</code></td><td>æ·±ç¡</td></tr><tr><td><code>rem</code></td><td>REMç¡çœ </td></tr><tr><td><code>awake</code></td><td>æ¸…é†’</td></tr><tr><td><code>unknown</code></td><td>æœªçŸ¥çŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-16">4. ç¤ºä¾‹Appé¡¹ç›®</h2>
<p>æ’ä»¶æä¾›äº†å®Œæ•´çš„ç¤ºä¾‹é¡¹ç›®ï¼Œå¯ç›´æ¥å…‹éš†æºç è¿è¡Œä½“éªŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/wp993080086/sleep_stage_chart.git

<span class="hljs-comment"># è¿›å…¥ç¤ºä¾‹ç›®å½•</span>
<span class="hljs-built_in">cd</span> sleep_stage_chart/example

<span class="hljs-comment"># å®‰è£…ä¾èµ–å¹¶è¿è¡Œ</span>
flutter pub get
flutter run
</code></pre>
<p>ç¤ºä¾‹é¡¹ç›®åŒ…å«äº†ç¡çœ å›¾è¡¨ã€å†¥æƒ³å›¾è¡¨çš„å„ç§å®šåˆ¶åœºæ™¯ï¼Œå¯ç›´æ¥å‚è€ƒå¤ç”¨ã€‚</p>
<h2 data-id="heading-17">5. æ€»ç»“</h2>
<p>sleep_stage_chart æ˜¯ä¸€æ¬¾åŠŸèƒ½å…¨é¢ã€é«˜åº¦å¯å®šåˆ¶çš„ Flutter å¥åº·æ•°æ®å¯è§†åŒ–æ’ä»¶ï¼Œå‡­å€Ÿå…¶ä¼˜é›…çš„è®¾è®¡é£æ ¼ã€æµç•…çš„äº¤äº’ä½“éªŒå’Œè·¨å¹³å°å…¼å®¹æ€§ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ»¡è¶³ç¡çœ å’Œå†¥æƒ³æ•°æ®çš„å¯è§†åŒ–éœ€æ±‚ã€‚æ— è®ºæ˜¯å¿«é€Ÿé›†æˆåŸºç¡€å›¾è¡¨ï¼Œè¿˜æ˜¯æ·±åº¦å®šåˆ¶ç¬¦åˆ App é£æ ¼çš„å¯è§†åŒ–æ•ˆæœï¼Œè¯¥æ’ä»¶éƒ½èƒ½æä¾›ç®€æ´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç¡çœ ç›‘æµ‹ç±» Appï¼šå±•ç¤ºæ·±ç¡ã€æµ…ç¡ã€REM ç¡çœ å‘¨æœŸåˆ†å¸ƒ</li>
<li>å†¥æƒ³ç±» Appï¼šç»Ÿè®¡æ¯æ—¥/æ¯å‘¨å†¥æƒ³æ—¶é•¿å’Œæ—¶æ®µåˆ†å¸ƒ</li>
<li>å¥åº·ç®¡ç† Appï¼šæ•´åˆç¡çœ ä¸å†¥æƒ³æ•°æ®çš„ç»¼åˆå¯è§†åŒ–</li>
<li>æ™ºèƒ½ç©¿æˆ´è®¾å¤‡é…å¥— Appï¼šåŒæ­¥è®¾å¤‡é‡‡é›†çš„ç¡çœ æ•°æ®å±•ç¤º</li>
</ul>
<p>å¦‚æœä½ çš„é¡¹ç›®ä¸­éœ€è¦å®ç°ç¡çœ å‘¨æœŸåˆ†ææˆ–å†¥æƒ³æ•°æ®å±•ç¤ºï¼Œä¸å¦¨è¯•è¯• sleep_stage_chartï¼Œè®©å¥åº·æ•°æ®å¯è§†åŒ–å¼€å‘æ›´é«˜æ•ˆï¼</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwp993080086%2Fsleep_stage_chart" target="_blank" title="https://github.com/wp993080086/sleep_stage_chart" ref="nofollow noopener noreferrer">GitHubä»“åº“</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwp993080086%2Fsleep_stage_chart%2Fblob%2Fmaster%2FREADME_zh.md" target="_blank" title="https://github.com/wp993080086/sleep_stage_chart/blob/master/README_zh.md" ref="nofollow noopener noreferrer">ä¸­æ–‡æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fsleep_stage_chart" target="_blank" title="https://pub.dev/packages/sleep_stage_chart" ref="nofollow noopener noreferrer">pub.devä»“åº“</a></p>
</li>
</ul>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576669556150403110</link>    <guid>https://juejin.cn/post/7576669556150403110</guid>    <pubDate>2025-11-26T06:38:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576669556150403110" data-draft-id="7576580177662640138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,Nginx"/> <meta itemprop="datePublished" content="2025-11-26T06:38:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´çªæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2538113306470631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2538113306470631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´çªæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T06:38:20.000Z" title="Wed Nov 26 2025 06:38:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    58
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c801015fd006484384445c9421b6ec01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811946&amp;x-signature=Tfoe1ntAgSUIr8tgkmb23oANSNE%3D" alt="logo.png" loading="lazy"/></p>
<p>æœ€è¿‘æŒç»­è¢«ä¸œå—äºšçš„å‡ ä¸ªIPæŒç»­æ”»å‡»ï¼Œæˆ‘ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„å…è´¹åº”ç”¨é˜²ç«å¢™ï¼Œä¸€ç›´æ²¡ä»€ä¹ˆå¥½åŠæ³•ã€‚ä»Šå¤©çœ‹åˆ°äº†å‡ ä¸ªå…è´¹çš„IPåº“ï¼Œä¸€ä¸‹å­å°±æƒ³åˆ°äº†å¦‚æœæˆ‘ç›´æ¥å±è”½è¿™äº›æ¥æºå›½å®¶çš„è®¿é—®ä¸å°±å¥½äº†ã€‚</p>
<p>åœ¨ç½‘ç«™è¿è¥ã€ç½‘ç»œå®‰å…¨æˆ–æµé‡ç®¡æ§åœºæ™¯ä¸­ï¼ŒæŒ‰å›½å®¶/åœ°åŒºé™åˆ¶IPè®¿é—®ï¼ˆå¦‚ä»…å…è®¸å›½å†…IPè®¿é—®ã€å±è”½ç‰¹å®šå›½å®¶IPï¼‰æ˜¯å¸¸è§éœ€æ±‚ã€‚å®ç°è¿™ä¸€éœ€æ±‚çš„æ ¸å¿ƒæ­¥éª¤æ˜¯ï¼šè·å–ç›®æ ‡å›½å®¶çš„IPæ®µ â†’ å°†IPæ®µé…ç½®åˆ° Nginx ä¸­ç”Ÿæ•ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£å¦‚ä½•é€šè¿‡Node.jsæˆ–Shellè„šæœ¬è·å–å›½å®¶IPæ®µï¼Œå¹¶ç»“åˆ Nginx çš„geoæ¨¡å—å®Œæˆé…ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é€‰æ‹© IP æ•°æ®æº</h2>
<p>è·å–å›½å®¶ IP æ®µçš„å‰ææ˜¯é€‰æ‹©å¯é çš„æ•°æ®æºï¼Œç›®å‰ä¸»æµå…è´¹/å•†ç”¨æ•°æ®æºåŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-1">1. MaxMind GeoLite2</h3>
<p>MaxMind æ˜¯å…¨çƒçŸ¥åçš„ IP åœ°ç†ä¿¡æ¯æœåŠ¡å•†ï¼Œæä¾›å…è´¹çš„ GeoLite2 æ•°æ®åº“ï¼ˆéœ€æ³¨å†Œè´¦å·ï¼‰ï¼ŒåŒ…å« IPv4/IPv6 çš„å›½å®¶ / åœ°åŒºæ˜ å°„ï¼Œæ•°æ®ç²¾åº¦é«˜ä¸”æ›´æ–°åŠæ—¶ï¼ˆæ¯æœˆæ›´æ–°ï¼‰ã€‚</p>
<h3 data-id="heading-2">2. apnic</h3>
<p>apnicæä¾›å…è´¹å¯ç›´æ¥è·å–çš„IPä¿¡æ¯ï¼Œç›´æ¥ä¸‹è½½å°±èƒ½è·å–æœ€æ–°çš„IPæ•°æ®ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-3">3. å…¶ä»–</h3>
<ul>
<li>ip2regionï¼šå›½å†…å¼€æºçš„ IP å®šä½åº“ï¼Œæ”¯æŒå›½å®¶ / åŸå¸‚çº§æ˜ å°„ï¼Œæ•°æ®æ–‡ä»¶å°ï¼ˆçº¦ 10MBï¼‰ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ã€‚</li>
<li>17monipï¼ˆçº¯çœŸ IPï¼‰ï¼šå›½å†…å¸¸ç”¨çš„ IP åº“ï¼Œéœ€å®šæœŸä¸‹è½½æ›´æ–°åŒ…ã€‚</li>
<li>IP2Location LITEï¼šç±»ä¼¼ GeoLite2 çš„å…è´¹æ•°æ®åº“ï¼Œæä¾› CSV/MMDB æ ¼å¼ã€‚</li>
</ul>
<p>æœ¬æ–‡ä»¥apnicä¸ºä¾‹è®²è§£ï¼ˆå…¼å®¹æ€§å’Œæ˜“ç”¨æ€§æœ€ä¼˜ï¼‰ã€‚</p>
<h2 data-id="heading-4">äºŒã€è·å–å›½å®¶ IP æ®µçš„æ–¹æ³•</h2>
<h3 data-id="heading-5">æ–¹æ³• 1ï¼šä½¿ç”¨bashè„šæœ¬è·å–å¹¶å¤„ç†</h3>
<p>è¿™ç§æ–¹å¼é€‚åˆlinuxç³»ç»Ÿä¸‹çš„ç®€å•ä½¿ç”¨ï¼Œå…¼å®¹centosã€ubuntuç­‰ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤ä¸€ï¼šè·å–æ•°æ®</h4>
<p>å¯ä»¥ä½¿ç”¨<code>wget</code>æˆ–è€…<code>curl</code>è¿™ç§å‘½ä»¤ç›´æ¥ä»è¿œç¨‹ä¸‹è½½è„šæœ¬ï¼Œè„šæœ¬åœ°å€å–æœ€æ–°æ•°æ®<code>http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest</code>ï¼Œè„šæœ¬å†…å®¹ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wget -c -O /tmp http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest

curl -C - -o /tmp http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest
</code></pre>
<h3 data-id="heading-7">æ­¥éª¤äºŒï¼šå¤„ç†æ•°æ®</h3>
<p>å®˜æ–¹æä¾›çš„æ•°æ®é€šå¸¸éƒ½æ˜¯txtæ ¼å¼çš„ï¼Œé€è¡Œè¿›è¡Œæ’åˆ—çš„æ•°æ®ã€‚æˆ‘ä»¬è¦ä½¿ç”¨è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œè§£æï¼ŒæŠŠæˆ‘ä»¬éœ€è¦çš„æ•°æ®å•ç‹¬è·å–å‡ºæ¥ã€‚å¯ä»¥ä½¿ç”¨è„šæœ¬çš„<code>awk</code>å‘½ä»¤è¿›è¡Œå¤„ç†ã€‚</p>
<p><code>awk</code>çš„å‘½ä»¤æ ¼å¼:</p>
<pre><code class="hljs language-bash" lang="bash">awk [å‚æ•°] [å¤„ç†å†…å®¹] [æ“ä½œå¯¹è±¡]
</code></pre>
<h3 data-id="heading-8">å®Œæ•´è„šæœ¬</h3>
<p>æˆ‘ä»¬å‡è®¾è¦æŠŠæ•°æ®å¤„ç†æˆâ€œèµ·å§‹IP|æ•°é‡/å‰ç¼€é•¿åº¦|æ³¨å†Œæœºæ„|å›½å®¶ä»£ç â€çš„æ ¼å¼ï¼ŒæŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œå†åŠ ä¸Šé”™è¯¯å¤„ç†ï¼Œæˆ‘ä»¬è¾“å‡ºä»¥ä¸‹è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">set</span> -eu  <span class="hljs-comment"># ç§»é™¤ pipefailï¼Œå…¼å®¹ä½ç‰ˆæœ¬ Bashï¼Œä¿ç•™å…³é”®é”™è¯¯æ£€æŸ¥</span>

<span class="hljs-comment"># è„šæœ¬é…ç½®</span>
URL=<span class="hljs-string">"http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest"</span>
DOWNLOAD_DIR=<span class="hljs-string">"/root/apnic"</span>
DOWNLOAD_FILENAME=<span class="hljs-string">"delegated-apnic-latest"</span>
IPV4_OUTPUT_FILENAME=<span class="hljs-string">"apnic_ipv4.txt"</span>
IPV6_OUTPUT_FILENAME=<span class="hljs-string">"apnic_ipv6.txt"</span>

<span class="hljs-comment"># å¸®åŠ©ä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-title">show_help</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”¨æ³•ï¼š<span class="hljs-variable">$0</span> --download-dir &lt;ä¸‹è½½ç›®å½•&gt; [--temp-dir &lt;ä¸´æ—¶ç›®å½•&gt;]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"é€‰é¡¹ï¼š"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  --download-dir  å¯é€‰ï¼Œæ–‡ä»¶ä¸‹è½½ä¿å­˜ç›®å½•"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  -h/--help       æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"</span>
}

<span class="hljs-comment"># è§£æå‘½ä»¤è¡Œå‚æ•°</span>
<span class="hljs-function"><span class="hljs-title">parse_args</span></span>() {

    <span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$#</span> -gt 0 ]]; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
            --download-dir)
                DOWNLOAD_DIR=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
                <span class="hljs-built_in">shift</span> 2
                ;;
            -h|--<span class="hljs-built_in">help</span>)
                show_help
                <span class="hljs-built_in">exit</span> 0
                ;;
            *)
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæœªçŸ¥å‚æ•° <span class="hljs-variable">$1</span>"</span>
                show_help
                <span class="hljs-built_in">exit</span> 1
                ;;
        <span class="hljs-keyword">esac</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># æ£€æŸ¥ä¾èµ–å·¥å…·ï¼ˆwget æˆ– curlï¼‰</span>
<span class="hljs-function"><span class="hljs-title">check_dependencies</span></span>() {
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v wget &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        DOWNLOAD_TOOL=<span class="hljs-string">"wget"</span>
    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v curl &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        DOWNLOAD_TOOL=<span class="hljs-string">"curl"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæœªæ‰¾åˆ° wget æˆ– curlï¼Œè¯·å…ˆå®‰è£…å…¶ä¸­ä¸€ä¸ªå·¥å…·"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶ + æ ¡éªŒæ–‡ä»¶æœ‰æ•ˆæ€§</span>
<span class="hljs-function"><span class="hljs-title">download_file</span></span>() {
    <span class="hljs-built_in">local</span> download_path=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${DOWNLOAD_FILENAME}</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å¼€å§‹ä¸‹è½½æ–‡ä»¶ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"URL: <span class="hljs-variable">$URL</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¿å­˜è·¯å¾„: <span class="hljs-variable">$download_path</span>"</span>

    <span class="hljs-comment"># æ£€æŸ¥ä¸‹è½½ç›®å½•æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_DIR</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_DIR</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæ— æ³•åˆ›å»ºä¿æŒç›®å½• <span class="hljs-variable">$DOWNLOAD_DIR</span>"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶ï¼ˆæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_TOOL</span>"</span> == <span class="hljs-string">"wget"</span> ]]; <span class="hljs-keyword">then</span>
        wget -c -O <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$URL</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šwget ä¸‹è½½å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼‰"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">else</span>
        curl -C - -o <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$URL</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šcurl ä¸‹è½½å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼‰"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># æ ¡éªŒä¸‹è½½æ–‡ä»¶æ˜¯å¦ä¸ºç©º</span>
    <span class="hljs-keyword">if</span> [[ ! -s <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šä¸‹è½½çš„æ–‡ä»¶ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ URL æˆ–ç½‘ç»œè¿æ¥"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span>  <span class="hljs-comment"># åˆ é™¤ç©ºæ–‡ä»¶</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ–‡ä»¶ä¸‹è½½å®Œæˆï¼ˆå¤§å°ï¼š<span class="hljs-subst">$(du -sh <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> | awk '{print $1}')</span>ï¼‰==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸‹è½½æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$download_path</span>"</span>
    <span class="hljs-built_in">echo</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># è§£æå¹¶ç­›é€‰ IPv4/IPv6ï¼ˆå®¹é”™å¢å¼ºï¼‰</span>
<span class="hljs-function"><span class="hljs-title">parse_and_filter_ip</span></span>() {
    <span class="hljs-built_in">local</span> download_path=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${DOWNLOAD_FILENAME}</span>"</span>
    <span class="hljs-built_in">local</span> ipv4_output=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${IPV4_OUTPUT_FILENAME}</span>"</span>
    <span class="hljs-built_in">local</span> ipv6_output=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${IPV6_OUTPUT_FILENAME}</span>"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å¼€å§‹è§£ææ–‡ä»¶ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æºæ–‡ä»¶: <span class="hljs-variable">$download_path</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è§£æç›®å½•: <span class="hljs-variable">$DOWNLOAD_DIR</span>"</span>

    <span class="hljs-comment"># æ¸…ç©ºè¾“å‡ºæ–‡ä»¶ï¼ˆé¿å…æ®‹ç•™æ—§æ•°æ®ï¼‰</span>
    &gt; <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span>
    &gt; <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span>

    <span class="hljs-comment"># ç­›é€‰è§„åˆ™ï¼š</span>
    <span class="hljs-comment"># 1. è·³è¿‡æ³¨é‡Šè¡Œï¼ˆä»¥ # å¼€å¤´ï¼‰å’Œç©ºè¡Œ</span>
    <span class="hljs-comment"># 2. ç¬¬ 3 åˆ—ï¼ˆtypeï¼‰ä¸º ipv4/ipv6 çš„è¡Œ</span>
    <span class="hljs-comment"># 3. è¾“å‡ºæ ¼å¼ï¼šèµ·å§‹IP|æ•°é‡/å‰ç¼€é•¿åº¦|æ³¨å†Œæœºæ„|å›½å®¶ä»£ç ï¼ˆå­—æ®µ 4|5|1|2ï¼‰</span>
    <span class="hljs-comment"># ç”¨ awk å¤„ç†ï¼Œå³ä½¿éƒ¨åˆ†è¡Œæ ¼å¼å¼‚å¸¸ä¹Ÿä¸ä¸­æ–­</span>
    awk -F <span class="hljs-string">'|'</span> <span class="hljs-string">'
        !/^#/ &amp;&amp; NF &gt;= 6 {  # åªå¤„ç†éæ³¨é‡Šè¡Œä¸”å­—æ®µæ•°â‰¥6çš„è¡Œ
            if ($3 == "ipv4") {
                print $4 "|" $5 "|" $1 "|" $2 &gt;&gt; "'</span><span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span><span class="hljs-string">'"
            } else if ($3 == "ipv6") {
                print $4 "|" $5 "|" $1 "|" $2 &gt;&gt; "'</span><span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span><span class="hljs-string">'"
            }
        }
    '</span> <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> || {
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šéƒ¨åˆ†è¡Œæ ¼å¼å¼‚å¸¸ï¼Œå·²è·³è¿‡"</span>
    }

    <span class="hljs-comment"># æ£€æŸ¥ç­›é€‰ç»“æœï¼ˆå…è®¸å…¶ä¸­ä¸€ç§IPç±»å‹ä¸ºç©ºï¼Œé¿å…è¯¯åˆ¤ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv4 ç­›é€‰å®Œæˆï¼Œè®°å½•æ•°ï¼š<span class="hljs-subst">$(wc -l &lt; <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span>)</span> è¡Œ"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šæœªç­›é€‰åˆ° IPv4 æ•°æ®ï¼ˆå¯èƒ½æ–‡ä»¶æ ¼å¼å˜æ›´æˆ–æ— ç›¸å…³è®°å½•ï¼‰"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv6 ç­›é€‰å®Œæˆï¼Œè®°å½•æ•°ï¼š<span class="hljs-subst">$(wc -l &lt; <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span>)</span> è¡Œ"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šæœªç­›é€‰åˆ° IPv6 æ•°æ®ï¼ˆå¯èƒ½æ–‡ä»¶æ ¼å¼å˜æ›´æˆ–æ— ç›¸å…³è®°å½•ï¼‰"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== è§£æç­›é€‰å®Œæˆ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv4 æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$ipv4_output</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv6 æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$ipv6_output</span>"</span>
    <span class="hljs-built_in">echo</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># ä¸»æµç¨‹</span>
<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    parse_args <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
    check_dependencies
    download_file
    parse_and_filter_ip

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ä»»åŠ¡å…¨éƒ¨å®Œæˆ ==="</span>
}

<span class="hljs-comment"># å¯åŠ¨è„šæœ¬</span>
main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è„šæœ¬é¦–å…ˆè®¾ç½®é»˜è®¤å˜é‡ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„å­˜å‚¨ä½ç½®æ˜¯<code>/root/apnic</code>ï¼Œç„¶åå†æŠŠæœ€æ–°æ•°æ®ä¸‹è½½åˆ°æ–‡ä»¶é‡Œï¼Œé€šè¿‡å‘½ä»¤ç­›é€‰æˆ‘ä»¬éœ€è¦çš„æ•°æ®åˆ†åˆ«å­˜åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚</p>
<h3 data-id="heading-9">æ–¹æ³• 2ï¼šNode.jså¤„ç†æ•°æ®</h3>
<p>ä½¿ç”¨nodejsæ•´ä½“æµç¨‹è®¾è®¡ä¸Šå°±ä¸éœ€è¦ä¸´æ—¶å­˜å‚¨æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ¯æ¬¡è·å–ä¹‹ååœ¨å†…å­˜ä¸­å°±å…¨éƒ¨å¤„ç†å®Œæˆã€‚æ•´ä½“å¤„ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);
<span class="hljs-comment">// è¦å…è®¸é€šè¿‡çš„å›½å®¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ALLowList</span> = [<span class="hljs-string">'CN'</span>, <span class="hljs-string">'HK'</span>, <span class="hljs-string">'MO'</span>, <span class="hljs-string">'TW'</span>];

<span class="hljs-comment">// è·å–è¿œç¨‹æ•°æ®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getApnicTxt</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest'</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
}

<span class="hljs-comment">// apnic|BD|ipv4|103.132.248.0|1024|20190116|allocated</span>
<span class="hljs-comment">// apnic|ID|ipv6|2001:df0:f180::|48|20190718|assigned</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createIpRecord</span>(<span class="hljs-params">line, dot = <span class="hljs-string">'24'</span></span>) {
    <span class="hljs-keyword">const</span> parts = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">'|'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">ALLowList</span>.<span class="hljs-title function_">includes</span>(parts[<span class="hljs-number">1</span>])) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`allow <span class="hljs-subst">${parts[<span class="hljs-number">3</span>]}</span>/<span class="hljs-subst">${dot}</span>; #<span class="hljs-subst">${parts[<span class="hljs-number">1</span>]}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`deny <span class="hljs-subst">${parts[<span class="hljs-number">3</span>]}</span>/<span class="hljs-subst">${dot}</span>; #<span class="hljs-subst">${parts[<span class="hljs-number">1</span>]}</span>`</span>;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> txts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getApnicTxt</span>();
    <span class="hljs-keyword">const</span> list = txts.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
    <span class="hljs-keyword">const</span> ipv4list = [];
    <span class="hljs-keyword">const</span> ipv6list = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; list.<span class="hljs-property">length</span>; index++) {
        <span class="hljs-keyword">const</span> txt = list[index];
        <span class="hljs-keyword">if</span> (txt.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'|ipv4|'</span>)) {
            ipv4list.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">createIpRecord</span>(txt));
        }
        <span class="hljs-keyword">if</span> (txt.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'|ipv6|'</span>)) {
            ipv6list.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">createIpRecord</span>(txt, <span class="hljs-string">'32'</span>));
        }
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ipv4list'</span>, ipv4list);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ipv4list'</span>, ipv6list);
}

<span class="hljs-title function_">main</span>();
</code></pre>
<p>è„šæœ¬ä¸­åŒæ ·æ˜¯å…ˆè·å–æœ€æ–°çš„æ•°æ®ï¼Œç„¶åç›´æ¥äº¤ç»™å¤„ç†å‡½æ•°è¿›è¡Œåˆ†æ‰¹å¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾å¤„ç†çš„ç»“æœæ˜¯ç»™nginxä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨ç»“æ„ä¸Šå¢åŠ <code>allow</code>å’Œ<code>deny</code>å‰ç¼€ï¼Œæ–¹ä¾¿åœ¨nginxä¸­ç›´æ¥ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€é…ç½®nginxæ–‡ä»¶</h2>
<h3 data-id="heading-11">æ–¹æ³•1ï¼šä½¿ç”¨<code>allow</code>è¿›è¡Œç®¡ç†</h3>
<p>è¿™ç§é…ç½®æ–¹å¼å…¼å®¹æ–°è€ç‰ˆæœ¬çš„nginxï¼Œåªéœ€è¦åœ¨nginxä¸­æå‰å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œæ¯æ¬¡æ›´æ–°é…ç½®æ–‡ä»¶å†…å®¹ä¹‹åé‡å¯nginxå°±èƒ½è¾¾åˆ°è‡ªåŠ¨å…è®¸å’Œæ‹’ç»æ¥æºå›½å®¶çš„è®¿é—®åœ°å€ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
Â  Â  listen 80;
Â  Â  listen [::]:80;
Â  Â  server_name your-domain.com;

Â  Â  # å¼•å…¥å…è®¸çš„IPç™½åå•
Â  Â  include /etc/nginx/conf.d/china-ipv4.conf;
Â  Â  include /etc/nginx/conf.d/china-ipv6.conf;

Â  Â  # å¯é€‰ï¼šæ”¾è¡Œæœ¬åœ°å›ç¯ï¼ˆé¿å…è‡ªå·±è¢«æ‹¦ï¼‰
Â  Â  allow 127.0.0.1;
Â  Â  allow ::1;

Â  Â  # æ‹’ç»æ‰€æœ‰æœªåŒ¹é…çš„è¯·æ±‚
Â  Â  deny all;

Â  Â  location / {
Â  Â  Â  Â  root /var/www/html;
Â  Â  Â  Â  index index.html;
Â  Â  Â  Â  # ä½ çš„å…¶ä»–é…ç½®...
Â  Â  }
}
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å°±å¯ä»¥è¾¾åˆ°åªå…è®¸æˆ‘ä»¬éœ€è¦çš„è®¿é—®ï¼Œå…¶ä»–å›½å®¶è®¿é—®ä¸€å¾‹ç¦æ­¢ã€‚</p>
<h3 data-id="heading-12">æ–¹æ³•2ï¼šä½¿ç”¨geoæ¨¡å—</h3>
<p>Nginx é€šè¿‡geoæ¨¡å—ï¼ˆé»˜è®¤ç¼–è¯‘ï¼‰å®ç° IP æ®µçš„å¿«é€ŸåŒ¹é…ï¼Œè¯¥æ¨¡å—å°† IP æ®µåŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢æ•ˆç‡æé«˜ï¼ˆä¸å— IP æ®µæ•°é‡å½±å“ï¼‰ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx">http {
    # å®šä¹‰IPv4çš„å›½å®¶åŒ¹é…å˜é‡ï¼ˆ$is_cn_v4ï¼š1=ä¸­å›½IPï¼Œ0=éä¸­å›½IPï¼‰
    geo $is_cn_v4 {
        default 0;
        include /etc/nginx/conf.d/cn-ipv4.conf;  # å¼•å…¥ä¸­å›½IPv4æ®µæ–‡ä»¶
    }

    # å®šä¹‰IPv6çš„å›½å®¶åŒ¹é…å˜é‡ï¼ˆå¦‚éœ€æ”¯æŒIPv6ï¼‰
    geo $is_cn_v6 {
        default 0;
        include /etc/nginx/conf.d/cn-ipv6.conf;  # å¼•å…¥ä¸­å›½IPv6æ®µæ–‡ä»¶
    }

    # åˆå¹¶IPv4/IPv6çš„åŒ¹é…ç»“æœ
    map $scheme $is_cn {
        http $is_cn_v4;
        https $is_cn_v4;
        httpv6 $is_cn_v6;
        httpsv6 $is_cn_v6;
    }

    server {
      listen 80;
      listen [::]:80;
      server_name yourdomain.com;

      # éä¸­å›½IPè¿”å›403
      if ($is_cn != 1) {
          return 403;
      }

      # æ­£å¸¸ä¸šåŠ¡é…ç½®...
      location / {
          root /var/www/html;
          index index.html;
      }
  }
}
</code></pre>
<p>é€šè¿‡ä½¿ç”¨nginxçš„geoæ¨¡å—å¯ä»¥éå¸¸å¿«é€Ÿçš„è¯†åˆ«åˆ°ipå¯¹åº”çš„å›½å®¶ï¼Œç„¶ååœ¨å…·ä½“çš„è·¯ç”±ä¸­é€šè¿‡è‡ªåŠ¨ä¸€åˆ¤æ–­æ¥è¿”å›è‡ªå·±æƒ³è¦è¿”å›çš„å†…å®¹ã€‚åŒæ ·çš„ï¼Œé…ç½®æ–‡ä»¶æ›´æ–°ä¹‹åè¦é‡æ–°å¯åŠ¨nginxæœåŠ¡ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–å‘½ä»¤</h3>
<p>æ£€æŸ¥nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</p>
<pre><code class="hljs">nginx -t
</code></pre>
<p>é‡æ–°å¯åŠ¨nginxã€‚</p>
<pre><code class="hljs">systemctl restart nginx
</code></pre>
<p>ä¸¥é‡IPåŒ¹é…çš„æ•ˆæœã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -H <span class="hljs-string">"X-Forwarded-For: 8.8.8.8"</span> http://yourdomain.com  <span class="hljs-comment"># 8.8.8.8ä¸ºç¾å›½IP</span>
</code></pre>
<h2 data-id="heading-14">å››ã€æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨å…·ä½“çš„ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼š</p>
<ol>
<li>geoå’Œallowçš„é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</li>
<li>å¦‚æœä½¿ç”¨äº‘æœåŠ¡åšè½¬å‘ï¼Œæ¥æºipæ˜¯äº‘æœåŠ¡çš„åœ°å€ï¼Œéœ€è¦é¢å¤–å¢åŠ IPé€ä¼ çš„åŠŸèƒ½ã€‚</li>
<li>è¿œç¨‹åœ°å€çš„æ›´æ–°æ²¡é‚£ä¹ˆå¿«ï¼Œå¯ä»¥è®¾ç½®æ¯éš”ä¸€å‘¨æ¥å®šæ—¶æ›´æ–°ä¸€æ¬¡ã€‚æŒç»­è®¿é—®å¯èƒ½ä¼šè¢«å®˜æ–¹å°ç¦å“¦ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP]]></title>    <link>https://juejin.cn/post/7576555431943503882</link>    <guid>https://juejin.cn/post/7576555431943503882</guid>    <pubDate>2025-11-26T03:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576555431943503882" data-draft-id="7496341294567800883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,NestJS"/> <meta itemprop="datePublished" content="2025-11-26T03:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:04:24.000Z" title="Wed Nov 26 2025 03:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡ä¿è¯ç»å¯¹å¤§ç™½è¯ï¼ç®€å•æ˜“æ‡‚!</p>
<p>æœ€è¿‘è·Ÿä¸€ä¸ªå¥½å‹è®¨è®ºï¼Œä»–è¯´æƒ³å­¦ä¹  <code>node.js</code> åç«¯æ¡†æ¶ <code>nest.js</code>ï¼Œä½†å¯¹äº <code>nest.js</code> çš„ä¸‹é¢ç”¨æ³•ä¸€å¤´é›¾æ°´ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆç”¨å‘¢ï¼Ÿä»€ä¹ˆ <code>Contoller</code>, <code>Provider</code>ï¼Œæ€ä¹ˆè·Ÿä¸€èˆ¬çš„ <code>javascript</code> ä»£ç çš„ç”¨æ³•å®Œå…¨ä¸ä¸€æ ·å‘¢ï¼Ÿå¦‚ä¸‹çš„ <code>@Controller</code>,<code>@Injectable</code> ä½ ç†è§£æ˜¯ä»€ä¹ˆæ„æ€å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨è¿™æ ·çš„æ–¹å¼ç»„ç»‡ä»£ç å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-Javascript" lang="Javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Cat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./interfaces/cat.interface'</span>;


@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  private readonly <span class="hljs-attr">cats</span>: <span class="hljs-title class_">Cat</span>[] = [];

  <span class="hljs-title function_">create</span>(<span class="hljs-params">cat: Cat</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>.<span class="hljs-title function_">push</span>(cat);
  }

  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Cat</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>;
  }
}

</code></pre>
<p>åŸºäºæ­¤ï¼Œæˆ‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸®åŠ©å¤§å®¶ä» 0 å¼€å§‹ï¼Œå±‚å±‚é€’è¿›åˆ°æ‰€æœ‰è¿™äº›è®©ä½ é™Œç”Ÿçš„ <code>nest.js</code> çš„æ¦‚å¿µï¼</p>
<h2 data-id="heading-1">ä»ç¼–ç¨‹èŒƒå¼è¯´èµ·</h2>
<p>ç¼–ç¨‹èŒƒå¼åœ¨ä¹‹å‰é¢è¯•ç»å¸¸è¢«é—®åˆ°äº†ï¼Œä»€ä¹ˆ <code>FP</code>(å‡½æ•°å¼ç¼–ç¨‹)ï¼Œ<code>RP</code>(å“åº”å¼ç¼–ç¨‹)ï¼Œ<code>FRP</code>ï¼ˆå‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œè¿˜æœ‰æˆ‘ä»¬ç†ŸçŸ¥çš„å¤§å…„å¼Ÿ <code>é¢ç›¸å¯¹è±¡ç¼–ç¨‹</code>ï¼Œç°åœ¨ <code>nest.js</code> åˆæ¥ä¸ª <code>AOP</code>ï¼ˆé¢ç›¸åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œå±å®è®©äººè’™åœˆäº†ã€‚ã€‚ã€‚ã€‚å¤ªå¤šæ¦‚å¿µäº†ã€‚</p>
<p>åˆ«æ€¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥ï¼</p>
<h3 data-id="heading-2">å‡½æ•°å¼ç¼–ç¨‹ - FP</h3>
<p>ç®€å•æ¥è¯´å°±æ˜¯è¦æ±‚ä½ ä½¿ç”¨çº¯å‡½æ•°ï¼Œä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œå°±æ˜¯è¾“å…¥ä¸€å®šçš„æ—¶å€™è¾“å‡ºä¸€å®šï¼Œå°±æ˜¯ä¼ å…¥ç›¸åŒçš„å‚æ•°å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å°±è¿™ä¹ˆç®€å•ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<p>å¸¸è§æœ‰å‡ ç§æƒ…å†µä¼šå½±å“çº¯å‡½æ•°çš„çº¯å‡€ï¼Œæœ€å¸¸è§å°±æ˜¯ï¼š</p>
<ul>
<li>ä¿®æ”¹ä¼ å‚çš„å€¼ï¼Œæˆ–è€…å¼•ç”¨ï¼Œæˆ–è€…å…¨å±€çŠ¶æ€ï¼Œæ”¹ DOMï¼Œä¾‹å¦‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c</span>) { 
     <span class="hljs-comment">// å‡è®¾ c ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œc çš„ xx å±æ€§è¢«ä¿®æ”¹</span>
     c.<span class="hljs-property">xx</span> = a + b; <span class="hljs-comment">// ä¿®æ”¹ä¼ å‚çš„å€¼</span>
     <span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span> = a; <span class="hljs-comment">// ä¿®æ”¹å…¨å±€å˜é‡</span>
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<ul>
<li>åšä¸€äº› i/o æ“ä½œï¼Œä¾‹å¦‚ console.log, å†™æ–‡ä»¶ã€‚å¥½äº†æ¥ä¸‹é‡Œè¯´è¯´ <code>RP</code>(å“åº”å¼ç¼–ç¨‹)</li>
</ul>
<h3 data-id="heading-3">å“åº”å¼ç¼–ç¨‹ - RP</h3>
<p>ä¹Ÿèƒ½å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å°±åƒâ€œExcel è¡¨æ ¼â€ï¼š<br/>
ä½ æ”¹äº† A1ï¼ŒB1 = A1 + 10 ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè¿™å°±æ˜¯å…¸å‹çš„ RPã€‚</p>
<p>åœ¨ vue å’Œ react éƒ½éå¸¸å¸¸è§ï¼Œè·Ÿè¸ªä¸€ä¸ªå€¼å˜åŒ–ï¼Œç„¶åå¼•å‘å¦ä¸€äº›å€¼å˜åŒ–ã€‚</p>
<p>å®ƒå¼ºè°ƒï¼š</p>
<ul>
<li>æ•°æ®æ˜¯â€œæµâ€ï¼ˆstreamï¼‰</li>
<li>æ•°æ®å˜åŒ–ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°ä¾èµ–å®ƒçš„é€»è¾‘ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰</li>
<li>ä½ ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
</ul>
<h3 data-id="heading-4">å‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ - FRP</h3>
<p>FRP æ˜¯â€œå‡½æ•°å¼ç¼–ç¨‹ + å“åº”å¼ç¼–ç¨‹â€çš„ç»“åˆã€‚æ¯”è¾ƒå…¸å‹çš„å°±æ˜¯ Rxjs çš„é£æ ¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬ DOM çš„ input äº‹ä»¶</span>
<span class="hljs-keyword">const</span> input$ = <span class="hljs-title function_">fromEvent</span>(searchInput, <span class="hljs-string">'input'</span>); <span class="hljs-comment">// è¾“å…¥æ˜¯ä¸€ä¸ªâ€œæµâ€</span>

<span class="hljs-keyword">const</span> results$ = input$.<span class="hljs-title function_">pipe</span>(
  <span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>),  <span class="hljs-comment">// å‡½æ•°å¼è½¬æ¢</span>
);

results$.<span class="hljs-title function_">subscribe</span>(renderResults);
</code></pre>
<p>ç®€å•ç†è§£å°±æ˜¯å½“è§¦å‘ <code>DOM</code> çš„ <code>input</code> äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå€¼æ”¹å˜çš„æ—¶å€™ï¼Œè§¦å‘ results$ å€¼çš„æ”¹å˜ï¼Œè¿™å°±æ˜¯ <code>RP</code>ï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œç„¶ååœ¨ <code>input</code> äº‹ä»¶è§¦å‘å€¼æ”¹å˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ‰§è¡Œäº† <code>map</code> æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿç®— <code>FP</code> å‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<h3 data-id="heading-5">OOP - é¢å‘å¯¹è±¡ç¼–ç¨‹</h3>
<p>é¡¾åæ€ä¹‰ï¼Œé¢ç›¸å¯¹è±¡å°±æ˜¯ä»¥å¯¹è±¡ä¸ºå¯¹è±¡ä¸ºå•ä½ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> {
  <span class="hljs-attr">name</span>: string;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: string</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is barking!`</span>);
  }
}
</code></pre>
<p>ä½¿ç”¨åˆ°çš„æ•°æ®ï¼Œæœ€å¥½éƒ½å°è£…ä¸ºå¯¹è±¡ï¼Œå¦‚ä¸Šé¢ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ <code>new Dog()</code> è¿”å›æˆ‘ä»¬æ–°åˆ›é€ å‡ºæ¥çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ class ä»…ä»…æ˜¯ä¸ªæ¨¡æ¿ã€‚å¯¹è±¡æ˜¯ç”±æ¨¡æ¿åˆ›é€ å‡ºæ¥çš„ã€‚</p>
<p>ç„¶åå°±æ˜¯é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€ç†Ÿæ‚‰çš„ä¸‰ä»¶å¥—ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ã€‚é è¿™ä¸‰ä¸ªï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€ç»´æ¨¡å¼è®¤ä¸ºå¯ä»¥æ¨¡æ‹Ÿç°å®ä¸–ç•Œã€‚</p>
<p>å°è£…ï¼šå¾ˆç®€å•ï¼Œä¾‹å¦‚ <code>Dog</code> è¿™ä¸ªç±»ï¼ŒæŠŠè·Ÿ <code>Dog</code> ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•éƒ½æ”¾åœ¨ä¸€ä¸ªç±»é‡Œå°±æ˜¯å°è£…ï¼Œä¾‹å¦‚æœ‰ name å±æ€§ï¼Œç‹—çš„åå­—ï¼Œä½ å¦‚æœæƒ³åŠ å…¶å®ƒå‚æ•°ï¼Œç»§ç»­æ‹“å±•å°±è¡Œäº†ï¼Œä¾‹å¦‚æ€§åˆ«ï¼Œå“ç§ã€‚å½“ç„¶å°è£…è¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼Œä¾‹å¦‚å°è£…ç§æœ‰å±æ€§ä»€ä¹ˆçš„ï¼Œè¿™äº›ç»†ææœ«èŠ‚ä¸ç”¨å¤ªåœ¨æ„ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯ç®€å•ä»‹ç» OOP çš„æ€æƒ³ã€‚</p>
<p>ç»§æ‰¿ï¼šå¯ä»¥å°†åˆ«çš„ç±»çš„ä¸œè¥¿ç»§æ‰¿è¿‡æ¥ï¼Œä¾‹å¦‚, å¾ˆå¤šåŠ¨ç‰©éƒ½å¯ä»¥ç»§æ‰¿<code>Animal</code> è¿™ä¸ªç±»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">public name: string</span>) {}

  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Some sound..."</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says meow~`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says woof!`</span>);
  }
}

<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">"Mimi"</span>);
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"Coco"</span>);

cat.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Mimi says meow~</span>
dog.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Coco says woof!</span>

</code></pre>
<p>ä¸»è¦æ˜¯ä¸ºæˆ‘ä»¬æŠ½è±¡ä»£ç ç”¨çš„ï¼Œä¾‹å¦‚å…¬å…±éƒ¨åˆ†æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå­ç±»å•ç‹¬å®ç°ã€‚æ€æƒ³æ˜¯æŒºå¥½çš„ï¼Œå°±æ˜¯å®ç°èµ·æ¥æœ‰æ—¶å€™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºåˆšå¼€å§‹è®¾è®¡çš„æ—¶å€™ï¼Œä¸å¤ªå®¹æ˜“ä¸€å¼€å§‹å°±èƒ½é¢„çŸ¥æœªæ¥éœ€è¦æŠ½è±¡å“ªäº›ã€‚</p>
<p>å¤šæ€ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸åŒå®ç°ï¼ŒJavascript ä¸­æ²¡æœ‰å¤šæ€ï¼Œæ›´å¤šåœ¨ typescript ä¸­å‡ºç°ï¼Œä¾‹å¦‚ç”¨é‡è½½å®ç°å¤šæ€ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: number, <span class="hljs-attr">b</span>: number): number;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: string, <span class="hljs-attr">b</span>: string): string;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: any, <span class="hljs-attr">b</span>: any): any {
    <span class="hljs-keyword">return</span> a + b;
  }
}

<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>));       <span class="hljs-comment">// 15</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>)) <span class="hljs-comment">// foobar</span>
</code></pre>
<h2 data-id="heading-6">é¢ç›¸åˆ‡é¢ç¼–ç¨‹ - AOP</h2>
<p>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å°†ä»£ç æ³¨å…¥ç°æœ‰å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹ç›®æ ‡é€»è¾‘ã€‚è¿™å¥è¯å¤§å®¶çœ‹çœ‹å°±è¡Œäº†ï¼Œå¾ˆå®˜æ–¹ï¼Œæˆ‘ä»¬ç®€å•ç†è§£å°±æ˜¯ï¼š</p>
<p>æŠŠæ¨ªè·¨å¤šä¸ªåŠŸèƒ½çš„â€œé€šç”¨é€»è¾‘â€æŠ½å‡ºæ¥ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå‡½æ•°é‡Œé‡å¤å†™ã€‚</p>
<p>å¸¸è§å®ç°çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨å‡½æ•°å‰åï¼Œæ³¨å†Œä¸€ä¸ªé’©å­ï¼Œè¿™æ ·è¾¾åˆ°ä¸ä¿®æ”¹å½“å‰å‡½æ•°é€»è¾‘çš„ç›®çš„ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logBefore</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Calling:"</span>, fn.<span class="hljs-property">name</span>, <span class="hljs-string">"args:"</span>, args);
    <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
  }
}
</code></pre>
<p>ä»¥ä¸Šæ–¹æ³•æ˜¯ä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">getUser</span> = logBefore(function getUser(id) {
  // åœ¨æ•°æ®åº“æœç´¢æ•°æ®è¿”å›
  return db.query(`SELECT * FROM users WHERE <span class="hljs-attr">id</span> = <span class="hljs-variable">${id}</span>`)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ ·å…¶å®ƒå‡½æ•°éƒ½å¯ä»¥å…±äº«è¿™ä¸ª <code>logBefore</code> çš„é€»è¾‘ã€‚</p>
<p>å½“ç„¶å®é™…åœºæ™¯ï¼Œä¾‹å¦‚é‰´æƒï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å‰ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æƒé™ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½¿ç”¨ <code>AOP</code> çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-7">AOP è·Ÿ nest.js å…³ç³»</h2>
<p>nest.js åé¢æˆ‘ä»¬ä¼šè®²ä¸€ä¸ªå¾ˆå…³é”®çš„æ¦‚å¿µï¼Œpipelineï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåé¢è¯¦ç»†è¯´ã€‚pipeline å°±æ˜¯å½“å®¢æˆ·ç«¯æ”¶åˆ°è¯·æ±‚åˆ°è¿”å›çš„è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆ nest.js éœ€è¦æ³¨å†Œä¸€ä¸ª Controller æ¥å¤„ç†è¯·æ±‚,å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}
</code></pre>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œget æ–¹æ³•è®¿é—®è·¯å¾„ <code>/cats</code> çš„æ—¶å€™ï¼Œè¿”å› 'This action returns all cats'ã€‚</p>
<p>ä½†å®é™…ä¸Šåˆ° <code>Controller</code> å¤„ç†æ•°æ®ä¹‹å‰ï¼Œè¿˜æœ‰è®¸å¤šæ­¥éª¤ã€‚</p>
<p>ä¾‹å¦‚åœ¨ nest.js ä¸­æœ‰ <code>Middleware</code>ï¼ˆä¸­é—´ä»¶ï¼‰ çš„æ¦‚å¿µï¼Œä¹Ÿæœ‰ <code>Guard</code>(å®ˆå«çš„æ¦‚å¿µ) ç­‰ç­‰æ¦‚å¿µï¼Œæˆ‘ä»¬è¿™é‡Œä¸ç»†è¯´ï¼Œåé¢æ–‡ç« ä¼šæœ‰ï¼Œè¿™é‡Œåªéœ€è¦è®°ä½ï¼šè¯·æ±‚æ¥äº†ä¹‹åï¼Œå…ˆåˆ° <code>Middleware</code> ç„¶ååˆ° <code>Guard</code>ã€‚ã€‚ã€‚å…œå…œè½¬è½¬å¥½å‡ å›æ‰èƒ½åˆ° <code>Controller</code>ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬æåˆ°ï¼ŒAOP ä¸­çš„é¢å‘åˆ‡é¢ï¼Œä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚</p>
<p>nest.js ä¸­çš„ <code>Middleware</code> å¯ä»¥æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸æ˜¯åœ¨ä¸ç›´æ¥å½±å“  <code>Controller</code> é€»è¾‘çš„å‰æä¸‹ï¼Œå®ç°äº†ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå› ä¸ºæ‰€æœ‰è·¯ç”±æ¥æ”¶çš„è¯·æ±‚éƒ½ä¼šç»è¿‡  <code>Middleware</code>ã€‚</p>
<p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ <code>Middleware</code>ï¼Œ<code>Guard</code> è¿™äº›æ¦‚å¿µæœ¬è´¨å°±æ˜¯ â€œåˆ‡é¢â€ã€‚</p>
<p>å¦‚æœä½ å¯¹node.js ï¼Œç»„ä»¶åº“ï¼Œå‰ç«¯åŠ¨ç”»æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è¿›ç¾¤äº¤æµã€‚è¿™æ˜¯æˆ‘ç»„ä»¶åº“æ•™ç¨‹å®˜ç½‘ã€‚æ„Ÿè°¢starï¼Œå†æ¬¡æ„Ÿè°¢ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">t-ui</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul>
<h2 data-id="heading-8">ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬</h2>
<p>è¿™ä¸¤ä¸ªæ¦‚å¿µçœ‹èµ·æ¥æŒºå”¬äººçš„ï¼Œæ¯”è¾ƒé«˜å¤§ä¸Šã€‚æˆ‘ä»¬ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•ä¾‹å­è¯´èµ·ï¼š</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªç±»å«è€ç‹ï¼Œä¸“æŒ‡é‚£äº›ä½åœ¨ç¾å¥³éš”å£çš„é“ä»”ä»¬ã€‚ä»–ä»¬å–œæ¬¢åŠ©äººä¸ºä¹ï¼Œé€å¤§å¸½å­ã€‚èƒ½åŠ›ä¸Šæ“…é•¿é€ƒè·‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'å¥³'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>();
    }
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()); <span class="hljs-comment">// { hobby: ['å¥³', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
</code></pre>
<p>å¥½äº†ï¼Œè¿™ä¸ªPersonç±»ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰å•¥ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡åˆ›å»ºPersonç±»çš„å®ä¾‹ï¼Œéƒ½è¦ä¼ å…¥Hobbyç±»å’ŒSkillç±»ï¼Œä¹Ÿå°±æ˜¯å¯¹è¿™ä¸¤ä¸ªç±»éƒ½äº§ç”Ÿäº†ä¾èµ–ï¼Œå‡å¦‚æœ‰ä¸€å¤©æˆ‘ä»¬æƒ³åˆ›å»ºä¸åŒçš„è€ç‹ï¼Œæ¯”å¦‚æœ‰çš„è€ç‹å–œæ¬¢å°é²œè‚‰ï¼Œæœ‰çš„è€ç‹å–œæ¬¢è€è…Šè‚‰ï¼Œè¿™ä¸ªPersonç±»å†™æ­»äº†ï¼Œæ²¡æ³•å®šåˆ¶</li>
</ul>
<p>æœ‰åŒå­¦é©¬ä¸Šå°±ä¼šè¯´ï¼Œè¿™ä¸ªç®€å•å•Šï¼ŒHobbyå’ŒSkillå½“åšå‚æ•°ä¼ å…¥ä¸å°±è¡Œäº†ï¼Œæ˜¯çš„ï¼Œè¿™ä¸ªæ–¹æ³•ç¡®å®èƒ½è§£å†³é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby, skill</span>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = hobby;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = skill;
    }
}

<span class="hljs-comment">// { hobby: [â€™ç”·', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'ç”·'</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>()); 
</code></pre>
<ul>
<li>ä½†æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç±»æˆ‘ä»¬ä¸ç”¨è‡ªå·±å»newï¼Œåƒä¸‹é¢è¿™æ ·ï¼Œç³»ç»Ÿå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼å…¥å‘¢ï¼Ÿ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby: Hobby, skill: Skill</span>){
  
    }
    <span class="hljs-title function_">hello</span>(<span class="hljs-params"/>){
        è¿™é‡Œç›´æ¥å°±å¯ä»¥ç”¨<span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span>äº†
    }
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ new Personçš„æ—¶å€™ï¼Œhobbyå’Œskillå‚æ•°ï¼Œè‡ªåŠ¨å¸®ä½ å®ä¾‹åŒ–å¯¼å…¥ï¼Œè€Œä¸”ä½ è¿˜éœ€è¦new Personï¼Œèƒ½ä¸èƒ½ä¸new Person éƒ½æ˜¯è‡ªåŠ¨è°ƒç”¨å¹¶æŠŠå‚æ•°å¯¼å…¥ï¼Ÿ</p>
<ul>
<li>è¿™å°±å¼•ç”³å‡ºç¬¬ä¸€ä¸ªæ¦‚å¿µå°±æ§åˆ¶åè½¬ï¼Œä»¥å‰æˆ‘ä»¬éƒ½è¦è‡ªå·±ä¸»åŠ¨å»newï¼Œä»è€Œåˆ›å»ºå®ä¾‹ï¼Œç°åœ¨æ˜¯æŠŠåˆ›å»ºå®ä¾‹çš„ä»»åŠ¡äº¤ç»™äº†ä¸€ä¸ªå®¹å™¨ï¼ˆåé¢ä¼šå®ç°ï¼Œä½ å°±æ˜ç™½äº†ï¼Œç›¸å½“äºä¸€ä¸ªæŒæ§è€…ï¼Œæˆ–è€…è¯´é€ ç‰©ä¸»ï¼Œä¸“é—¨æ¥åˆ›å»ºå®ä¾‹çš„ï¼Œå¹¶ç®¡ç†ä¾èµ–å…³ç³»ï¼‰ï¼Œæ‰€ä»¥æ§åˆ¶æƒæ˜¯ä¸æ˜¯å°±åè½¬äº†ï¼Œä½ ä¸»åŠ¨çš„åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ï¼Œåè½¬ä¸ºå®¹å™¨åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ã€‚</li>
<li>å¯¹äºæ§åˆ¶åè½¬ï¼Œæœ€å¸¸ç”¨ä»¶çš„æ–¹å¼å«ä¾èµ–æ³¨å…¥ï¼Œæ„æ€æ˜¯å®¹å™¨åŠ¨æ€çš„å°†ä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚</li>
<li>æ§åˆ¶åè½¬å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥å®ç°ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå…¶å®å¤§å®¶ä¹Ÿæ²¡è§‰å¾—ä¾èµ–æ³¨å…¥æœ‰å•¥æ¯›ç”¨å§ï¼ä¸‹é¢çš„è®²è§£ä¸€è¨€ä»¥è”½ä¹‹å°±æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬jså¯ä»¥æŠŠå‡½æ•°æˆ–è€…ç±»å½“å‚æ•°ä¼ å…¥å¦ä¸€ä¸ªç±»é‡Œï¼Œè¿™ç¡®å®è§£å†³äº†ä¹‹å‰è®²çš„å†™æ­»ä»£ç çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ç”¨ä¾èµ–æ³¨å…¥ä¹Ÿèƒ½è§£å†³ä»£ç è€¦åˆçš„é—®é¢˜ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æˆ‘ä»¬å¹¶ä¸æ˜¯é‚£ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥ã€‚</p>
<h2 data-id="heading-9">å°ç»“</h2>
<p>è¿™é‡Œç¬¬ä¸€ç¯‡ nest.js å†…å®¹å®Œæ¯•ï¼Œæ¥ä¸‹æ¥ä¼šè¯¦ç»†è§£é‡Šä¸Šæ–‡æåˆ°çš„ piplineï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯·æ±‚ç»è¿‡ <code>nest.js</code> çš„å…¨è¿‡ç¨‹ï¼Œä»¥åŠè¿™äº›ç»è¿‡çš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°çš„æ ¸å¿ƒæ¦‚å¿µï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦]]></title>    <link>https://juejin.cn/post/7576609946190577700</link>    <guid>https://juejin.cn/post/7576609946190577700</guid>    <pubDate>2025-11-26T04:45:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190577700" data-draft-id="7576575703167254534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-11-26T04:45:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:45:44.000Z" title="Wed Nov 26 2025 04:45:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>Go æ˜¯ Google è®¾è®¡çš„ç±» C é™æ€ç±»å‹è¯­è¨€ï¼Œå…¼é¡¾åº•å±‚æ€§èƒ½ä¸å¼€å‘æ•ˆç‡ã€‚å®ƒå¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰è¯­è¨€ â€”â€” æ²¡æœ‰ class å…³é”®å­—ï¼Œä¹Ÿä¸æ”¯æŒä¼ ç»Ÿçš„ â€œç»§æ‰¿â€ è¯­æ³•ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å®ç°</strong> å’Œ <strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼ŒGo èƒ½çµæ´»å®ç° OOP çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆå¤šæ€ã€ä»£ç å¤ç”¨ï¼‰ï¼Œä¸”è®¾è®¡æ›´ç®€æ´ã€æ— ç»§æ‰¿å¸¦æ¥çš„è€¦åˆé—®é¢˜ã€‚
ä¸ C++ ç›¸æ¯”ï¼ŒGo çš„è®¾è®¡å“²å­¦æ˜¯ â€œ<strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>â€ï¼šç”¨æ¥å£å®ç°å¤šæ€ï¼Œç”¨ç»“æ„ä½“åµŒå…¥å®ç°ä»£ç å¤ç”¨ï¼Œæ—¢é¿å…äº†ç»§æ‰¿çš„å¤æ‚è¯­æ³•ï¼Œåˆè§£å†³äº†å¤šé‡ç»§æ‰¿çš„æ­§ä¹‰é—®é¢˜ã€‚æœ¬æ–‡å°†é€šè¿‡ç±»æ¯” C++ çš„æ¥å£ / ç»§æ‰¿é€»è¾‘ï¼Œè¯¦è§£ Go å¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœã€‚</p>
<h3 data-id="heading-2">äºŒã€Go ä¸­çš„ â€œå•ä¸€å¤ç”¨â€ï¼ˆç±»ä¼¼å•ä¸€ç»§æ‰¿ï¼‰</h3>
<p>C++ çš„å•ä¸€ç»§æ‰¿æ ¸å¿ƒæ˜¯ â€œä¸€ä¸ªå­ç±»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±» / æ¥å£â€ï¼ŒGo ä¸­é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ç±»ä¼¼æ•ˆæœï¼š<strong>ä»…ç”¨æ¥å£å®ç°å¤šæ€</strong>ï¼ˆæ— ä»£ç å¤ç”¨ï¼Œä»…çº¦æŸè¡Œä¸ºï¼‰ã€<strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰+ æ¥å£</strong>ï¼ˆæ—¢æœ‰ä»£ç å¤ç”¨ï¼Œåˆæœ‰å¤šæ€ï¼‰ã€‚</p>
<h4 data-id="heading-3">2.1 ä»…é€šè¿‡æ¥å£å®ç°ï¼ˆéšå¼å¤šæ€ï¼‰</h4>
<p>C++ çš„æ¥å£æ˜¯ â€œçº¯è™šå‡½æ•°é›†åˆâ€ï¼Œå­ç±»éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿å¹¶å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•ï¼›è€Œ Go çš„æ¥å£æ˜¯ â€œæ–¹æ³•ç­¾åé›†åˆâ€ï¼Œ<strong>æ— éœ€æ˜¾å¼å£°æ˜å®ç°</strong>â€”â€” åªè¦ç»“æ„ä½“å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå°±è‡ªåŠ¨æ»¡è¶³è¯¥æ¥å£ï¼Œè¿™å°±æ˜¯ â€œéšå¼å®ç°â€ï¼Œä¹Ÿæ˜¯ Go æ¥å£çš„æ ¸å¿ƒç‰¹æ€§ã€‚</p>
<h5 data-id="heading-4">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IFruit</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span> : <span class="hljs-keyword">public</span> IFruit { <span class="hljs-comment">// æ˜¾å¼ç»§æ‰¿</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function">std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"apple"</span>; }
};
</code></pre>
<h5 data-id="heading-5">Go å®ç°ä»£ç </h5>
<p>é¦–å…ˆå®šä¹‰æ¥å£ï¼ˆä»…çº¦æŸè¡Œä¸ºï¼Œæ— å®ç°ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰ Fruit æ¥å£ï¼šä»…å£°æ˜æ–¹æ³•ç­¾åï¼Œæ— å®ç°</span>
<span class="hljs-keyword">type</span> FruitType <span class="hljs-type">string</span> <span class="hljs-comment">// è¡¥å……ç±»å‹å®šä¹‰ï¼Œä½¿ä»£ç å¯è¿è¡Œ</span>
<span class="hljs-keyword">const</span> (
    BananaType FruitType = <span class="hljs-string">"banana"</span>
    AppleType  FruitType = <span class="hljs-string">"apple"</span>
)

<span class="hljs-keyword">type</span> Fruit <span class="hljs-keyword">interface</span> {
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    GetType() FruitType <span class="hljs-comment">// æ˜ç¡®ç±»å‹ï¼Œé¿å…æ­§ä¹‰</span>
}
</code></pre>
<p>å®šä¹‰ Banana ç»“æ„ä½“ï¼Œéšå¼å®ç° Fruit æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Banana <span class="hljs-keyword">struct</span> {
    name   <span class="hljs-type">string</span>
    energy <span class="hljs-type">float32</span> <span class="hljs-comment">// è‡ªå®šä¹‰å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Banana å®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBanana</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Banana {
    <span class="hljs-keyword">return</span> &amp;Banana{
        name:   name,
        energy: <span class="hljs-number">0</span>,
    }
}

<span class="hljs-comment">// å®ç° Fruit æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼ˆéšå¼æ»¡è¶³ Fruit æ¥å£ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetType() FruitType {
    <span class="hljs-keyword">return</span> BananaType
}

<span class="hljs-comment">// Banana è‡ªå®šä¹‰æ–¹æ³•ï¼ˆæ¥å£æœªçº¦æŸï¼Œä»…è‡ªèº«å¯ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetEnergy(energy <span class="hljs-type">float32</span>) {
    b.energy = energy
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetEnergy() <span class="hljs-type">float32</span> {
    <span class="hljs-keyword">return</span> b.energy
}
</code></pre>
<h5 data-id="heading-6">æ¥å£çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼ˆä½“ç°å¤šæ€ï¼‰</h5>
<h6 data-id="heading-7">1. èµ‹å€¼ç»™æ¥å£å˜é‡ï¼šé€šè¿‡æ¥å£ç»Ÿä¸€è°ƒç”¨ï¼Œå±è”½å…·ä½“å®ç°</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> fruit Fruit <span class="hljs-comment">// æ¥å£å˜é‡</span>
fruit = NewBanana(<span class="hljs-string">"big banana"</span>) <span class="hljs-comment">// éšå¼è½¬æ¢ï¼Œæ— éœ€æ˜¾å¼å£°æ˜</span>
fmt.Println(fruit.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šbig bananaï¼ˆè°ƒç”¨ Banana çš„å®ç°ï¼‰</span>
fmt.Println(fruit.GetType()) <span class="hljs-comment">// è¾“å‡ºï¼šbanana</span>
</code></pre>
<h6 data-id="heading-8">2. ç›´æ¥ä½¿ç”¨ç»“æ„ä½“å®ä¾‹ï¼šå¯è°ƒç”¨æ¥å£æ–¹æ³• + è‡ªå®šä¹‰æ–¹æ³•</h6>
<pre><code class="hljs language-go" lang="go">banana := NewBanana(<span class="hljs-string">"little banana"</span>)
banana.SetEnergy(<span class="hljs-number">100</span>) <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•</span>
fmt.Println(banana.GetEnergy()) <span class="hljs-comment">// è¾“å‡ºï¼š100</span>
fmt.Println(banana.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šlittle bananaï¼ˆè°ƒç”¨æ¥å£æ–¹æ³•ï¼‰</span>
</code></pre>
<h6 data-id="heading-9">3. å·¥å‚æ–¹æ³•ç»Ÿä¸€åˆ›å»ºå®ä¾‹ï¼ˆå¢å¼ºå¤šæ€çµæ´»æ€§ï¼‰</h6>
<p>è¡¥å…… NewFruit å®ç°ï¼Œæ ¹æ®ç±»å‹åˆ›å»ºä¸åŒ Fruit å®ä¾‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFruit</span><span class="hljs-params">(fruitType FruitType, name <span class="hljs-type">string</span>)</span></span> Fruit {
    <span class="hljs-keyword">switch</span> fruitType {
    <span class="hljs-keyword">case</span> BananaType:
        <span class="hljs-keyword">return</span> NewBanana(name)
    <span class="hljs-keyword">case</span> AppleType:
        <span class="hljs-keyword">return</span> NewApple(name) <span class="hljs-comment">// éœ€å®ç° Apple ç»“æ„ä½“ï¼ˆç±»ä¼¼ Bananaï¼‰</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•</span>
apple := NewFruit(AppleType, <span class="hljs-string">"red apple"</span>)
banana := NewFruit(BananaType, <span class="hljs-string">"yellow banana"</span>)
fmt.Println(apple.GetName(), banana.GetName()) <span class="hljs-comment">// ç»Ÿä¸€è°ƒç”¨æ¥å£æ–¹æ³•`</span>
</code></pre>
<h4 data-id="heading-10">2.2 ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰å®ç°ä»£ç å¤ç”¨ï¼ˆç±»ä¼¼åŸºç±»ç»§æ‰¿ï¼‰</h4>
<p>C++ ä¸­é€šè¿‡ â€œå­ç±»ç»§æ‰¿åŸºç±»â€ å¤ç”¨åŸºç±»ä»£ç ï¼ŒGo ä¸­é€šè¿‡ â€œç»“æ„ä½“åµŒå…¥â€ï¼ˆå°†ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºå¦ä¸€ä¸ªç»“æ„ä½“çš„åŒ¿åå­—æ®µï¼‰å®ç°ä»£ç å¤ç”¨ â€”â€” åµŒå…¥çš„ç»“æ„ä½“ï¼ˆç§°ä¸º â€œåµŒå…¥ç±»å‹â€ï¼‰çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¼šè¢«å¤–å±‚ç»“æ„ä½“ â€œç»§æ‰¿â€ï¼ˆå®é™…æ˜¯éšå¼ä»£ç†ï¼‰ï¼Œå¤–å±‚ç»“æ„ä½“å¯ç›´æ¥è°ƒç”¨ï¼Œä¹Ÿå¯è¦†ç›–è¿™äº›æ–¹æ³•ã€‚</p>
<h5 data-id="heading-11">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºç±»ï¼ˆå«éƒ¨åˆ†å®ç°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehicleBase</span> : <span class="hljs-keyword">public</span> IVehicle {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetWheelCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> <span class="hljs-keyword">override</span> </span>{ wheelCount = count; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetWheelCount</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> wheelCount; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>; }
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> wheelCount;
};

<span class="hljs-comment">// å­ç±»ç»§æ‰¿åŸºç±»ï¼Œå¤ç”¨æ–¹æ³•å¹¶å¯è¦†ç›–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bus</span> : <span class="hljs-keyword">public</span> VehicleBase {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> name; }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string n)</span> <span class="hljs-keyword">override</span> </span>{ name = n; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> VehicleBase::<span class="hljs-built_in">ToString</span>() + <span class="hljs-string">"Bus -&gt; "</span> + name; <span class="hljs-comment">// è°ƒç”¨åŸºç±»æ–¹æ³•</span>
    }
<span class="hljs-keyword">private</span>:
    std::string name;
};
</code></pre>
<h5 data-id="heading-12">Go å®ç°ä»£ç </h5>
<h6 data-id="heading-13">1. å®šä¹‰æ¥å£ï¼ˆçº¦æŸæ ¸å¿ƒè¡Œä¸ºï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> VehicleType <span class="hljs-type">string</span>
<span class="hljs-keyword">const</span> (
    BusType VehicleType = <span class="hljs-string">"bus"</span>
)

<span class="hljs-keyword">type</span> Vehicle <span class="hljs-keyword">interface</span> {
    GetType() VehicleType
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    SetWheelCount(count <span class="hljs-type">int</span>)
    GetWheelCount() <span class="hljs-type">int</span>
    ToString() <span class="hljs-type">string</span>
}
</code></pre>
<h6 data-id="heading-14">2. å®šä¹‰ â€œåµŒå…¥ç»“æ„ä½“â€ï¼ˆç±»ä¼¼åŸºç±»ï¼Œæä¾›é€šç”¨å®ç°ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// vehicleImpl æ˜¯é€šç”¨å®ç°ï¼Œä½œä¸ºåµŒå…¥ç±»å‹ä¾›å…¶ä»–ç»“æ„ä½“å¤ç”¨</span>
<span class="hljs-keyword">type</span> vehicleImpl <span class="hljs-keyword">struct</span> {
    wheelCount <span class="hljs-type">int</span> <span class="hljs-comment">// é€šç”¨å­—æ®µ</span>
}

<span class="hljs-comment">// é€šç”¨æ–¹æ³•å®ç°ï¼ˆä¾›åµŒå…¥è€…å¤ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> SetWheelCount(count <span class="hljs-type">int</span>) {
    v.wheelCount = count
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> GetWheelCount() <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> v.wheelCount
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>
}
</code></pre>
<h6 data-id="heading-15">3. å®šä¹‰å¤–å±‚ç»“æ„ä½“ï¼ˆåµŒå…¥ vehicleImplï¼Œå¤ç”¨ä»£ç ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Bus ç»“æ„ä½“é€šè¿‡åµŒå…¥ vehicleImplï¼Œå¤ç”¨å…¶æ–¹æ³•å’Œå­—æ®µ</span>
<span class="hljs-keyword">type</span> Bus <span class="hljs-keyword">struct</span> {
    vehicleImpl <span class="hljs-comment">// åŒ¿ååµŒå…¥ï¼ˆç»„åˆï¼‰ï¼Œæ— éœ€æ˜¾å¼è°ƒç”¨</span>
    name        <span class="hljs-type">string</span> <span class="hljs-comment">// è‡ªèº«å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Bus å®ä¾‹ï¼ˆéœ€åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBus</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Bus {
    <span class="hljs-keyword">return</span> &amp;Bus{
        name: name,
        vehicleImpl: vehicleImpl{ <span class="hljs-comment">// åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“</span>
            wheelCount: <span class="hljs-number">4</span>, <span class="hljs-comment">// å…¬äº¤è½¦é»˜è®¤4ä¸ªè½®å­</span>
        },
    }
}

<span class="hljs-comment">// å®ç° Vehicle æ¥å£çš„å‰©ä½™æ–¹æ³•ï¼ˆæœªè¢« vehicleImpl å®ç°çš„éƒ¨åˆ†ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetType() VehicleType {
    <span class="hljs-keyword">return</span> BusType
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„ ToString æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„è¢«è¦†ç›–æ–¹æ³•ï¼šb.vehicleImpl.ToString()</span>
    <span class="hljs-keyword">return</span> b.vehicleImpl.ToString() + fmt.Sprintf(<span class="hljs-string">"Bus -&gt; %s (wheels: %d)"</span>, b.GetName(), b.GetWheelCount())
}
</code></pre>
<h6 data-id="heading-16">æ ¸å¿ƒç‰¹æ€§è¯´æ˜</h6>
<ul>
<li>ä»£ç å¤ç”¨ï¼š<code>Bus</code> æ— éœ€é‡æ–°å®ç° <code>SetWheelCount</code>ã€<code>GetWheelCount</code>ï¼Œç›´æ¥å¤ç”¨ <code>vehicleImpl</code> çš„æ–¹æ³•ï¼›</li>
<li>æ–¹æ³•è¦†ç›–ï¼š<code>Bus</code> å®šä¹‰äº†ä¸ <code>vehicleImpl</code> åŒåçš„ <code>ToString</code> æ–¹æ³•ï¼Œä¼šè¦†ç›–åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å¤–å±‚æ–¹æ³•ï¼›</li>
<li>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•ï¼šé€šè¿‡ <code>b.vehicleImpl.ToString()</code> å¯è°ƒç”¨è¢«è¦†ç›–çš„åµŒå…¥ç»“æ„ä½“æ–¹æ³•ï¼›</li>
<li>å­—æ®µè®¿é—®ï¼šåµŒå…¥ç»“æ„ä½“çš„å­—æ®µå¯ç›´æ¥è®¿é—®ï¼ˆ<code>b.wheelCount</code>ï¼‰ï¼Œä¹Ÿå¯æ˜¾å¼è®¿é—®ï¼ˆ<code>b.vehicleImpl.wheelCount</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">ä¸‰ã€Go ä¸­çš„ â€œå¤šç»„åˆâ€ï¼ˆç±»ä¼¼å¤šé‡ç»§æ‰¿ï¼‰</h3>
<p>C++ æ”¯æŒå¤šé‡ç»§æ‰¿ï¼ˆä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼‰ï¼Œä½†å®¹æ˜“å¼•å‘ â€œè±å½¢ç»§æ‰¿â€ï¼ˆå¤šä¸ªçˆ¶ç±»ç»§æ‰¿è‡ªåŒä¸€åŸºç±»ï¼‰çš„æ­§ä¹‰é—®é¢˜ã€‚Go æœ¬èº«<strong>ä¸æ”¯æŒä¼ ç»Ÿå¤šé‡ç»§æ‰¿</strong>ï¼Œä½†é€šè¿‡ â€œå¤šåµŒå…¥â€ï¼ˆä¸€ä¸ªç»“æ„ä½“åµŒå…¥å¤šä¸ªç»“æ„ä½“ï¼‰ï¼Œå¯å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœ â€”â€” å¤ç”¨å¤šä¸ªåµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¸”æ— æ­§ä¹‰ã€‚</p>
<h4 data-id="heading-18">ç±»æ¯” C++ ä¼ªä»£ç </h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Mother</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-comment">// å¤šé‡ç»§æ‰¿ï¼šåŒæ—¶ç»§æ‰¿ Father å’Œ Mother</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> : <span class="hljs-keyword">public</span> Father, <span class="hljs-keyword">public</span> Mother {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œé¿å…æ­§ä¹‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>() + <span class="hljs-string">", Father: "</span> + Father::<span class="hljs-built_in">Say</span>() + <span class="hljs-string">", Mother: "</span> + Mother::<span class="hljs-built_in">Say</span>();
    }
};
</code></pre>
<h4 data-id="heading-19">Go å®ç°ä»£ç ï¼ˆå¤šåµŒå…¥ç»“æ„ä½“ï¼‰</h4>
<h5 data-id="heading-20">1. å®šä¹‰ä¸¤ä¸ª â€œè¢«ç»„åˆâ€ çš„ç»“æ„ä½“ï¼ˆç±»ä¼¼çˆ¶ç±»ï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Father ç»“æ„ä½“ï¼ˆæä¾›ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Father <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFather</span><span class="hljs-params">()</span></span> *Father {
    <span class="hljs-keyword">return</span> &amp;Father{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + f.GetName()
}

<span class="hljs-comment">// Mother ç»“æ„ä½“ï¼ˆæä¾›å¦ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Mother <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMother</span><span class="hljs-params">()</span></span> *Mother {
    <span class="hljs-keyword">return</span> &amp;Mother{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + m.GetName()
}
</code></pre>
<h5 data-id="heading-21">2. å®šä¹‰ Child ç»“æ„ä½“ï¼ˆåµŒå…¥ Father å’Œ Motherï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Child åµŒå…¥ä¸¤ä¸ªç»“æ„ä½“ï¼Œå¤ç”¨å…¶æ–¹æ³•</span>
<span class="hljs-keyword">type</span> Child <span class="hljs-keyword">struct</span> {
    *Mother <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥ï¼ˆéœ€åˆå§‹åŒ–æŒ‡é’ˆï¼‰</span>
    *Father <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Child åŠåµŒå…¥çš„ç»“æ„ä½“æŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewChild</span><span class="hljs-params">()</span></span> *Child {
    <span class="hljs-keyword">return</span> &amp;Child{
        Mother: NewMother(), <span class="hljs-comment">// åˆå§‹åŒ– Mother æŒ‡é’ˆ</span>
        Father: NewFather(), <span class="hljs-comment">// åˆå§‹åŒ– Father æŒ‡é’ˆ</span>
    }
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„åŒåæ–¹æ³•ï¼ˆé¿å…è°ƒç”¨æ­§ä¹‰ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>
}

<span class="hljs-comment">// è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ˜¾å¼è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œè°ƒç”¨å…¶æ–¹æ³•ï¼ˆæ— æ­§ä¹‰ï¼‰</span>
    fatherSay := c.Father.Say()
    motherSay := c.Mother.Say()
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"I am %s. Father: %s, Mother: %s"</span>, c.GetName(), fatherSay, motherSay)
}
</code></pre>
<h5 data-id="heading-22">3. ä½¿ç”¨ç¤ºä¾‹ï¼š</h5>
<pre><code class="hljs language-go" lang="go">child := NewChild()
fmt.Println(child.Say())
<span class="hljs-comment">// è¾“å‡ºï¼šI am Jerry. Father: I am Tony, Mother: I am Aurora</span>
</code></pre>
<h5 data-id="heading-23">æ ¸å¿ƒè§„åˆ™ï¼ˆé¿å…æ­§ä¹‰ï¼‰</h5>
<ul>
<li><strong>åµŒå…¥æ–¹å¼</strong>ï¼šæ”¯æŒå€¼åµŒå…¥ï¼ˆ<code>Father</code>ï¼‰å’ŒæŒ‡é’ˆåµŒå…¥ï¼ˆ<code>*Mother</code>ï¼‰ï¼ŒæŒ‡é’ˆåµŒå…¥éœ€åœ¨æ„é€ æ—¶åˆå§‹åŒ–æŒ‡é’ˆï¼›</li>
<li><strong>åŒåæ–¹æ³•å¤„ç†</strong>ï¼šè‹¥å¤šä¸ªåµŒå…¥ç»“æ„ä½“æœ‰åŒåæ–¹æ³•ï¼Œå¤–å±‚ç»“æ„ä½“å¿…é¡»å®šä¹‰åŒåæ–¹æ³•è¦†ç›–ï¼ˆå¦åˆ™è°ƒç”¨æ—¶ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæç¤ºæ­§ä¹‰ï¼‰ï¼›</li>
<li><strong>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•</strong>ï¼šé€šè¿‡ <code>c.Father.Say()</code> æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œé¿å…æ­§ä¹‰ï¼Œè¿™æ˜¯ Go å¤„ç† â€œå¤šç»„åˆâ€ å†²çªçš„æ ¸å¿ƒæ–¹å¼ã€‚</li>
</ul>
<h3 data-id="heading-24">å››ã€Go ä¸ C++ æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>C++</th><th>Go</th></tr></thead><tbody><tr><td>æ¥å£å®ç°</td><td>æ˜¾å¼ç»§æ‰¿ï¼ˆ<code>public</code> æ¥å£ï¼‰</td><td>éšå¼å®ç°ï¼ˆæ— éœ€å£°æ˜ï¼Œå®ç°æ–¹æ³•å³æ»¡è¶³ï¼‰</td></tr><tr><td>ä»£ç å¤ç”¨</td><td>ç»§æ‰¿åŸºç±»</td><td>ç»“æ„ä½“åµŒå…¥ï¼ˆç»„åˆï¼‰</td></tr><tr><td>å¤šé‡ç»§æ‰¿</td><td>æ”¯æŒï¼ˆæ˜“å¼•å‘è±å½¢ç»§æ‰¿æ­§ä¹‰ï¼‰</td><td>ä¸æ”¯æŒï¼Œé€šè¿‡å¤šåµŒå…¥å®ç°å¤šç»„åˆï¼ˆæ— æ­§ä¹‰ï¼‰</td></tr><tr><td>æ–¹æ³•è¦†ç›–</td><td>éœ€ <code>override</code> å…³é”®å­—</td><td>åŒåæ–¹æ³•è‡ªåŠ¨è¦†ç›–ï¼ˆå¤–å±‚ä¼˜å…ˆï¼‰</td></tr><tr><td>æ ¸å¿ƒè®¾è®¡å“²å­¦</td><td>ç»§æ‰¿ä¼˜å…ˆ</td><td>ç»„åˆä¼˜äºç»§æ‰¿</td></tr></tbody></table>
<h3 data-id="heading-25">äº”ã€å®Œæ•´ä»£ç ä»“åº“</h3>
<p>æœ¬æ–‡æ‰€æœ‰å¯è¿è¡Œä»£ç å·²æ•´ç†è‡³ GitHubï¼ŒåŒ…å«æ¥å£ã€ç»„åˆã€å¤šç»„åˆçš„å®Œæ•´ç¤ºä¾‹ï¼Œå¯ç›´æ¥å…‹éš†è¿è¡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-inheritance-example" target="_blank" title="https://github.com/tx7do/go-inheritance-example" ref="nofollow noopener noreferrer">github.com/tx7do/go-inâ€¦</a></p>
<h3 data-id="heading-26">å…­ã€æ€»ç»“</h3>
<p>Go æ²¡æœ‰ä¼ ç»Ÿ OOP çš„ â€œç±»â€ å’Œ â€œç»§æ‰¿â€ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å¤šæ€</strong> å’Œ <strong>ç»“æ„ä½“çš„ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼Œå®ç°äº†æ›´çµæ´»ã€ä½è€¦åˆçš„ä»£ç å¤ç”¨å’Œå¤šæ€ç‰¹æ€§ï¼š</p>
<ol>
<li>æ¥å£è´Ÿè´£ â€œçº¦æŸè¡Œä¸ºâ€ï¼Œéšå¼å®ç°è®©ä»£ç æ›´ç®€æ´ï¼Œæ”¯æŒå¤šæ€ï¼›</li>
<li>ç»“æ„ä½“åµŒå…¥è´Ÿè´£ â€œå¤ç”¨ä»£ç â€ï¼Œæ›¿ä»£ä¼ ç»Ÿç»§æ‰¿ï¼Œæ— è€¦åˆé—®é¢˜ï¼›</li>
<li>å¤šåµŒå…¥å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœï¼Œä½†é€šè¿‡æ˜¾å¼è°ƒç”¨é¿å…æ­§ä¹‰ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡æ—¢ä¿ç•™äº† OOP çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œåˆè§„é¿äº†ç»§æ‰¿å¸¦æ¥çš„å¤æ‚é—®é¢˜ï¼Œæ˜¯ Go ç®€æ´ã€é«˜æ•ˆçš„å…³é”®åŸå› ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?]]></title>    <link>https://juejin.cn/post/7576559408660234292</link>    <guid>https://juejin.cn/post/7576559408660234292</guid>    <pubDate>2025-11-26T06:50:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576559408660234292" data-draft-id="7576559408660152372" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T06:50:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘¨å°›å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/3562073402377933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3562073402377933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘¨å°›å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T06:50:42.000Z" title="Wed Nov 26 2025 06:50:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c865216d9814d28a29831d6cbc2def2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1920&amp;h=1080&amp;s=225936&amp;e=webp&amp;b=020e37" alt="src=http___pic1.win4000.com_wallpaper_2020-07-22_5f17fe7fe9959.jpg&amp;refer=http___pic1.win4000 (1).webp" loading="lazy"/></p>
<p>å¦‚æœä½ è¿˜åœ¨ React åº”ç”¨çš„ <code>useEffect</code>é‡Œå†™ <code>fetch</code>è¯·æ±‚ï¼Œé‚£ä½ å°±åšé”™äº†ã€‚æˆ‘ä»¬æ¯å¤©éƒ½å¬åˆ°è¿™ç§è¯´æ³•ã€‚ä½†æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰å¯¹å‘¢ï¼Ÿå¥½å§ï¼Œäº‹å®è¯æ˜ï¼ŒReact å›¢é˜Ÿå·²ç»æ¸…æ¥šåœ°å¬åˆ°äº†æˆ‘ä»¬çš„å£°éŸ³ã€‚React 19.2 ä¸ä»…ä»…æ˜¯ä¿®è¡¥å¼‚æ­¥é—®é¢˜â€”â€”å®ƒé€šè¿‡ <code>use()</code>ã€<code>&lt;Suspense&gt;</code>ã€<code>useTransition()</code>ä»¥åŠç°åœ¨çš„ View Transitionsï¼Œä»å¤´é‡å»ºäº†å¼‚æ­¥å¤„ç†æœºåˆ¶ã€‚è¿™äº›åŸºç¡€æ„å»ºå—å…±åŒå°†å¼‚æ­¥é€»è¾‘ä»ä¸€ä¸ª"å¿…è¦çš„éº»çƒ¦"è½¬å˜ä¸ºä¸€æµçš„æ¶æ„ç‰¹æ€§ã€‚è®©æˆ‘å¸¦ä½ äº†è§£ React çš„å¼‚æ­¥å™äº‹æ˜¯å¦‚ä½•å½»åº•æ”¹å˜çš„ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆå¯¹ä½ çš„å›¢é˜Ÿå¾ˆé‡è¦ã€‚</p>
<p><strong>æ—§æ–¹å¼ï¼šuseEffect + isLoading</strong></p>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªå±•ç¤ºæ—§çš„ <code>useEffect</code>/ <code>fetch</code>ç»„åˆæ¨¡å¼çš„ä¾‹å­å¼€å§‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageData, setImageData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isPending, setIsPending] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">fetchImage</span>(imageId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-title function_">setImageData</span>(data);
      <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">false</span>);
    });
  }, [imageId]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setImageId((id) =&gt; id + 1)}&gt;Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {isPending ? <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> : }
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ï¼ˆè¿™é‡Œçš„ <code>fetchImage</code>åªæ˜¯ <code>fetch</code>çš„ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œä»¥ä¿æŒç¤ºä¾‹ç®€çŸ­ã€‚ï¼‰</p>
<p>è¿™ä¸ªæ¨¡å¼ç¡®å®èƒ½ç”¨ï¼Œä½†ä½ åšäº†å¾ˆå¤šé‡å¤æ€§çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä½ ç®¡ç†äº†ä¸‰ä¸ªçŠ¶æ€ï¼ˆ<code>imageId</code>, <code>imageData</code>, <code>isPending</code>ï¼‰ï¼Œè€Œå®é™…ä¸Šä½ åªæ˜¯æƒ³æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ã€‚åŠ è½½çŠ¶æ€é€»è¾‘æ˜¯æ‰‹åŠ¨çš„ï¼Œé”™è¯¯å¤„ç†ä¹Ÿå¸¸å¸¸æ˜¯äº‹åæ‰è€ƒè™‘ã€‚è€Œä¸”å¾ˆå¯èƒ½ï¼Œä½ çš„ä»£ç åº“ä¸­æ¯ä¸ªå¼‚æ­¥æ“ä½œçœ‹èµ·æ¥éƒ½ç•¥æœ‰ä¸åŒã€‚</p>
<p>æœ€ç³Ÿç³•çš„æ˜¯ï¼Œé‚£ä¸ª <code>useEffect</code>çš„ä¾èµ–æ•°ç»„æ˜¯ä¸ªéšæ‚£ã€‚æ¼æ‰ä¸€ä¸ªä¾èµ–é¡¹ï¼Œä½ ä¼šå¾—åˆ°è¿‡æ—¶çš„é—­åŒ…ï¼›åŒ…å«å¤ªå¤šä¾èµ–é¡¹ï¼Œåˆä¼šè§¦å‘æ— é™å¾ªç¯ã€‚è¿™æ˜¯æ— æ•°ç”Ÿäº§ç¯å¢ƒ bug çš„æ ¹æºã€‚</p>
<p>è¿™å¹¶ä¸ç†æƒ³ï¼Œè€å®è¯´ï¼Œç”¨è¿™ç§ä»£ç ä½ èƒ½åšåˆ°çš„æœ€å¥½ç¨‹åº¦å°±æ˜¯"ä¸æç ¸"ã€‚è€Œè¿™å¹¶ä¸æ˜¯ä½ æƒ³è¦ç¼–å†™çš„ä»£ç ç±»å‹ã€‚</p>
<p><strong>æ–°çš„å¼‚æ­¥åŸºç¡€æ„å»ºå—</strong></p>
<p>React 19.2 ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸å†ç”¨ <code>useEffect</code>æ¥ç®¡ç† Promiseï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ <code>use()</code>å’Œ <code>&lt;Suspense&gt;</code>æ¥å¤„ç† Promiseã€‚</p>
<p><strong>æ ¸å¿ƒæ¨¡å¼ï¼šuse() + <code>&lt;Suspense&gt;</code></strong></p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨ React æ–°çš„ <code>use</code>Hook å’Œ <code>Suspense</code>ç»„ä»¶ç»„åˆé‡å†™çš„åŒä¸€ä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { use, <span class="hljs-title class_">Suspense</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Image</span>(<span class="hljs-params">{ imageDataPromise }</span>) {
  <span class="hljs-keyword">const</span> image = <span class="hljs-title function_">use</span>(imageDataPromise);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{image.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çœ‹çœ‹è¿™æœ‰å¤šç®€æ´ã€‚æ²¡æœ‰ <code>useEffect</code>ã€‚æ²¡æœ‰æ‰‹åŠ¨çš„ <code>isPending</code>çŠ¶æ€ã€‚çˆ¶ç»„ä»¶ä¸­æ²¡æœ‰æ¡ä»¶æ¸²æŸ“é€»è¾‘ã€‚æˆ‘ä»¬å­˜å‚¨çš„æ˜¯ä¸€ä¸ª Promise è€Œä¸æ˜¯æ•°æ®ï¼ŒReact ä¼šå¤„ç†å‰©ä¸‹çš„äº‹æƒ…ã€‚</p>
<p><strong>ä½†è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ<code>&lt;Suspense&gt;</code>èƒŒåçš„é­”æ³•</strong></p>
<p>å½“ <code>&lt;Suspense&gt;</code>å°è¯•æ¸²æŸ“å…¶å­ç»„ä»¶æ—¶ï¼Œ<code>&lt;Image&gt;</code>ç»„ä»¶ä¼šè°ƒç”¨ <code>use(imageDataPromise)</code>ã€‚å¦‚æœé‚£ä¸ª Promise è¿˜æ²¡æœ‰è§£å†³ï¼Œ<code>use()</code>ä¼šç›´æ¥<em>æŠ›å‡º</em>è¿™ä¸ª Promiseã€‚æ˜¯çš„â€”â€”åƒæŠ›å‡ºå¼‚å¸¸ä¸€æ ·æŠ›å‡ºå®ƒã€‚</p>
<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼š"ç”¨å¼‚å¸¸æ¥æ§åˆ¶æµç¨‹ï¼Ÿè¿™å¤ªå¥‡æ€ªäº†ï¼"ä½†è¯·å¬æˆ‘è¯´ï¼Œå› ä¸ºè¿™å…¶å®éå¸¸å·§å¦™ã€‚</p>
<p>é‚£ä¸ªè¢«æŠ›å‡ºçš„ Promise ä¼šå‘ä¸Šå†’æ³¡ç©¿è¿‡ç»„ä»¶æ ‘ï¼Œç›´åˆ°è¢« <code>&lt;Suspense&gt;</code>æ•è·ã€‚<code>&lt;Suspense&gt;</code>äºæ˜¯çŸ¥é“ï¼š"å•Šï¼Œæˆ‘çš„å­ç»„ä»¶éœ€è¦ä»è¿™ä¸ª Promise è·å–æ•°æ®ã€‚æˆ‘ä¼šæ˜¾ç¤ºæˆ‘çš„åŠ è½½çŠ¶æ€ï¼ˆfallbackï¼‰ï¼Œå¹¶ç­‰å¾…è¿™ä¸ª Promise è§£å†³ã€‚"</p>
<p>å½“ Promise è§£å†³åï¼Œ<code>&lt;Suspense&gt;</code>ä¼šé‡æ–°æ¸²æŸ“å…¶å­ç»„ä»¶ï¼Œ<code>use()</code>è¿”å›æ•°æ®ï¼Œå›¾ç‰‡å°±æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p>
<p>è¿™æ¶ˆé™¤äº†åœ¨ç»„ä»¶æ ‘çš„æ¯ä¸ªå±‚çº§è¿›è¡Œæ¡ä»¶æ¸²æŸ“çš„éœ€è¦ã€‚åŠ è½½çŠ¶æ€å˜å¾—å£°æ˜å¼ï¼Œå› ä¸ºä½ å¯ä»¥ç”¨ <code>&lt;Suspense&gt;</code>åŒ…è£…å¼‚æ­¥ç»„ä»¶ï¼Œå¹¶å®šä¹‰åœ¨åŠ è½½æ—¶æ˜¾ç¤ºä»€ä¹ˆã€‚React ä¼šå¤„ç†æ—¶æœºã€‚</p>
<p><strong>æ›´æµç•…çš„äº¤äº’ï¼šuseTransition() + action</strong></p>
<p>ä½†æˆ‘ä»¬å¯ä»¥è®©å®ƒå˜å¾—æ›´å¥½ã€‚ç›®å‰ï¼Œå½“ä½ ç‚¹å‡» "Next Image" æ—¶ï¼ŒæŒ‰é’®åœ¨æ–°å›¾ç‰‡åŠ è½½æœŸé—´ä»ç„¶å¯ç‚¹å‡»ã€‚è¿™ä¸æ˜¯å¾ˆå¥½çš„ç”¨æˆ·ä½“éªŒï¼›ç”¨æˆ·å¯èƒ½ä¼šå¤šæ¬¡ç‚¹å‡»ï¼Œé€ æˆç«æ€æ¡ä»¶ã€‚React 19.2 å¼•å…¥äº† action props å’Œ <code>useTransition()</code>æ¥ä¼˜é›…åœ°å¤„ç†è¿™ç§æƒ…å†µï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ action, children }</span>) {
  <span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">action</span>();
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>åä¸º <code>action</code>çš„ prop æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚å®ƒåªæ˜¯ä¸€ä¸ªçº¦å®šï¼Œå‘Šè¯‰å…¶ä»–å¼€å‘è€…è¿™ä¸ªæŒ‰é’®ä¼šå°†å¤„ç†å™¨åŒ…è£…åœ¨ä¸€ä¸ªè¿‡æ¸¡ï¼ˆtransitionï¼‰ä¸­ã€‚</p>
<p><strong>View Transitionsï¼šGPU åŠ é€Ÿçš„æ¶¦è‰²</strong></p>
<p>æ—¢ç„¶æˆ‘ä»¬è°ˆåˆ°äº†å¼‚æ­¥çš„ UI éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬èŠèŠ View Transitionsã€‚React 19.2ï¼ˆåœ¨å®éªŒæ€§åˆ†æ”¯ä¸Šï¼‰æ·»åŠ äº†å¯¹æµè§ˆå™¨åŸç”Ÿ View Transitions API çš„æ”¯æŒã€‚è¿™è®©ä½ åœ¨å¼‚æ­¥å†…å®¹åŠ è½½æ—¶èƒ½è·å¾—å¦‚é»„æ²¹èˆ¬é¡ºæ»‘çš„ã€GPU åŠ é€Ÿçš„åŠ¨ç”»ã€‚è€Œä¸”åªéœ€è¦å‡ è¡Œä»£ç ã€‚</p>
<p>é¦–å…ˆï¼Œæ·»åŠ ä¸€äº› CSS åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> fadeIn {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
}
<span class="hljs-keyword">@keyframes</span> fadeOut {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; }
}
<span class="hljs-keyword">@keyframes</span> pulse {
  <span class="hljs-number">0%</span>, <span class="hljs-number">100%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>; }
}

::<span class="hljs-built_in">view-transition-old</span>(image-container) {
  <span class="hljs-attribute">animation</span>: fadeOut <span class="hljs-number">0.3s</span> ease-out;
}
::<span class="hljs-built_in">view-transition-new</span>(image-container) {
  <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.3s</span> ease-in;
}
::<span class="hljs-built_in">view-transition-old</span>(button-pulse) {
  <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">0.3s</span> ease-in-out;
}
</code></pre>
<p>ç„¶åå°† View Transitions æ·»åŠ åˆ°ä½ çš„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { experimental_useViewTransition <span class="hljs-keyword">as</span> useViewTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Image</span>(<span class="hljs-params">{ imageDataPromise }</span>) {
  <span class="hljs-keyword">const</span> image = <span class="hljs-title function_">use</span>(imageDataPromise);
  <span class="hljs-keyword">return</span> ;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageSkeleton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"image-skeleton"</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ action, children, disabled }</span>) {
  <span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();
  <span class="hljs-keyword">const</span> viewTransition = <span class="hljs-title function_">useViewTransition</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">action</span>();
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...viewTransition</span>("<span class="hljs-attr">button-pulse</span>")}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...useViewTransition</span>("<span class="hljs-attr">image-container</span>")}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>å°±è¿™æ ·ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨å¤„ç† GPU åŠ é€Ÿçš„è¿‡æ¸¡åŠ¨ç”»ã€‚ä½ çš„éª¨æ¶å±æ·¡å‡ºï¼Œä½ çš„å›¾ç‰‡æ·¡å…¥ï¼Œä½ çš„æŒ‰é’®åœ¨åŠ è½½æ—¶ä¼šè„‰åŠ¨ã€‚æ•ˆæœéå¸¸ä¸æ»‘ï¼Œè€Œä½ å‡ ä¹æ²¡å†™ä»€ä¹ˆä»£ç ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> â€‹ ä½ éœ€è¦ React 19.2 å®éªŒç‰ˆæ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½ï¼š<code>npm install react@experimental react-dom@experimental</code></p>
<p><strong>è¿™å¯¹å‰ç«¯å›¢é˜Ÿä¸ºä½•é‡è¦</strong></p>
<p>è¿™äº›æ”¹å˜ä¸ä»…ä»…æ˜¯æ¸…ç† <code>useEffect</code>/ <code>fetch</code>çš„çƒ‚æ‘Šå­ã€‚å®ƒå…³ä¹æ„å»ºä¸€ä¸ªæ›´ä¼˜ç§€çš„ Reactï¼Œè¿™ä¸ª React ç»ˆäºæ‰¿è®¤å¼‚æ­¥æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚</p>
<p>è¿™äº›æ¨¡å¼æ„å‘³ç€ä½ çš„å›¢é˜Ÿç¼–å†™çš„ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚æ¡†æ¶å¤„ç†äº†æ›´å¤šäº‹æƒ…ã€‚UI å“åº”æ›´è¿…æ·ï¼Œå› ä¸ºå®ƒæ˜¯æŒ‰éœ€æ›´æ–°çš„ã€‚ä½ æ­£åœ¨åˆ©ç”¨æ›´å¤šåº•å±‚æ¡†æ¶çš„èƒ½åŠ›ï¼Œä¸ºä½ çš„åº”ç”¨èµ‹äºˆå…·æœ‰æµç•…åŠ¨ç”»çš„ç°ä»£æ„Ÿã€‚</p>
<p>è¿™ä¸å†æ˜¯"ä½ çˆ·çˆ·è¾ˆçš„ React"äº†ï¼Œæ˜¯æ—¶å€™è®©å›¢é˜Ÿå¼€å§‹ä½¿ç”¨è¿™äº›æ–°å·¥å…·äº†ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹</strong></p>
<ul>
<li>
<p>React 19.2 å¸¦æ¥äº†"æ— å¤„ä¸åœ¨çš„å¼‚æ­¥"ã€‚</p>
</li>
<li>
<p>è¿™äº›åŸºç¡€æ„å»ºå—ä½œä¸ºä¸€ä¸ªç³»ç»ŸååŒå·¥ä½œï¼š</p>
<ul>
<li><code>use()</code>ä» Promise ä¸­æå–æ•°æ®</li>
<li><code>&lt;Suspense&gt;</code>å£°æ˜å¼åœ°å¤„ç†åŠ è½½çŠ¶æ€</li>
<li><code>useTransition()</code>å…è´¹ä¸ºä½ æä¾›åŠ è½½æ ‡å¿—</li>
<li>View Transitions æ·»åŠ  GPU åŠ é€Ÿçš„æ¶¦è‰²</li>
</ul>
</li>
<li>
<p>æ—§æ–¹å¼ï¼ˆ<code>useEffect</code>å’Œ <code>fetch</code>ï¼‰å¯¹ React æ¥è¯´æ˜¯ä¸ªä¸¥é‡çš„ç—›ç‚¹ï¼Œä½†æˆ‘ä»¬æœ‰äº†å¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p>React çš„å¼‚æ­¥åŸºç¡€æ„å»ºå—æ„å‘³ç€æ›´å°‘çš„ä»£ç ã€æ›´å°‘çš„ bug å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p>ä½ çš„å›¢é˜Ÿå¯ä»¥æ›´ä¸“æ³¨äºæ„å»ºä½“éªŒï¼Œè€Œä¸æ˜¯æ”¯æ’‘å®ƒçš„åº•å±‚ç®¡é“ã€‚</p>
</li>
</ul>
<p><strong>é 19.2 çš„é€‰æ‹©ï¼šTanStack Query</strong></p>
<p>è¯è™½å¦‚æ­¤ï¼Œå¦‚æœä½ è¿˜æ²¡å‡†å¤‡å¥½å‡çº§åˆ° React 19.2ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼šTanStack Queryï¼ˆå‰èº«ä¸º React Queryï¼‰ã€‚å®ƒé€‚ç”¨äºä»»ä½• React ç‰ˆæœ¬ï¼Œå¹¶ä¸ºä½ æä¾›è‡ªåŠ¨ç¼“å­˜ã€åå°é‡æ–°è·å–ã€ä¹è§‚æ›´æ–°ç­‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªä¹…ç»è€ƒéªŒçš„è§£å†³æ–¹æ¡ˆï¼Œè§£å†³äº†ä¸ React 19.2 å¼‚æ­¥åŸºç¡€æ„å»ºå—ç›¸åŒçš„é—®é¢˜ï¼Œåªæ˜¯ API ä¸åŒã€‚æœ‰å……åˆ†çš„ç†ç”±è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤š React åº”ç”¨éƒ½å®‰è£…äº† <code>react-query</code>ã€‚</p>
<p><strong>ä¸‹ä¸€æ­¥ï¼šReact 19.2 å¼•é¢†çš„å‰ç«¯æœªæ¥</strong></p>
<p>React 19.2 å·²ç»å‘å¸ƒã€‚å®ƒæ˜¯ç¨³å®šçš„ã€‚ä½ åº”è¯¥å°†å…¶ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ˆé™¤äº†ä»åœ¨å®Œå–„ä¸­çš„ View Transitionsï¼‰ã€‚</p>
<p>å¼‚æ­¥å˜é©å·²ç»åˆ°æ¥ã€‚React ç»ˆäºè§£å†³äº†å®ƒæœ€å¤§çš„ç—›ç‚¹ï¼Œæ¡†æ¶ä¹Ÿå› æ­¤å˜å¾—æ›´å¥½ã€‚</p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰æ¢ç´¢è¿‡ React 19.2ï¼Œç°åœ¨æ˜¯æ—¶å€™äº†ã€‚åœ¨ä¸€ä¸ªå‰¯é¡¹ç›®ä¸Šè¯•è¯• <code>use()</code>å’Œ <code>&lt;Suspense&gt;</code>ï¼Œçœ‹çœ‹å¼‚æ­¥é€»è¾‘å˜å¾—å¤šä¹ˆç®€å•ã€‚ä½ ä¼šæƒŠè®¶äºè‡ªå·±ä»¥å‰æ²¡æœ‰å®ƒæ˜¯æ€ä¹ˆè¿‡çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ]]></title>    <link>https://juejin.cn/post/7576821684251918379</link>    <guid>https://juejin.cn/post/7576821684251918379</guid>    <pubDate>2025-11-26T09:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251918379" data-draft-id="7576575703166402566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-26T09:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:13:00.000Z" title="Wed Nov 26 2025 09:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    38
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><p>æƒé™æ§åˆ¶æ˜¯å‰ç«¯åº”ç”¨ï¼ˆå°¤å…¶æ˜¯ä¸­å¤§å‹ç³»ç»Ÿï¼‰çš„æ ¸å¿ƒå®‰å…¨ä¸ä½“éªŒä¿éšœï¼Œå®Œæ•´çš„æƒé™ä½“ç³»éœ€è¦†ç›–ã€Œè·¯ç”±æƒé™ã€é¡µé¢å…ƒç´ æƒé™ã€æ¥å£æƒé™ã€ä¸‰å¤§åœºæ™¯ã€‚æœ¬æ–‡ç»“åˆçœŸå®é¡¹ç›®è½åœ°ç»éªŒï¼Œç³»ç»Ÿæ¢³ç†å„åœºæ™¯çš„åº”ç”¨é€»è¾‘ã€å®ç°æ–¹æ¡ˆã€è®¾è®¡æ¨¡å¼ä¸å­˜å‚¨å®‰å…¨ï¼Œè¡¥å……ä¼ä¸šçº§å¼€å‘çš„å…³é”®ç»†èŠ‚ä¸é¿å‘è¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è·¯ç”±æƒé™ï¼šé¡µé¢è®¿é—®çš„ â€œç¬¬ä¸€é“é—¨æ§›â€</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è§’è‰²å·®å¼‚åŒ–è®¿é—®</strong>ï¼šä¼ä¸šåå°ä¸­ï¼Œç®¡ç†å‘˜å¯è®¿é—®ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®é¡µï¼Œè¿è¥ä»…èƒ½è®¿é—®è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†é¡µã€‚</li>
<li><strong>SaaS å¤šç§Ÿæˆ·å®šåˆ¶</strong>ï¼šä¸åŒç§Ÿæˆ·ï¼ˆå®¢æˆ·ï¼‰å¼€é€šä¸åŒåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ A ç§Ÿæˆ·æœ‰æŠ¥è¡¨åˆ†ææ¨¡å—ï¼ŒB ç§Ÿæˆ·æ— ï¼‰ï¼Œåç«¯æ ¹æ®ç§Ÿæˆ· ID è¿”å›å¯¹åº”è·¯ç”±ã€‚</li>
<li><strong>æƒé™åŠ¨æ€å˜æ›´</strong>ï¼šç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹ç”¨æˆ·è§’è‰²åï¼Œå‰ç«¯æ— éœ€é‡å¯åº”ç”¨ï¼Œå®æ—¶æ›´æ–°å¯è®¿é—®é¡µé¢ã€‚</li>
<li><strong>åˆ·æ–°ä¸¢å¤±ä¿®å¤</strong>ï¼šå•é¡µåº”ç”¨ï¼ˆSPAï¼‰åˆ·æ–°åï¼ŒåŠ¨æ€æ·»åŠ çš„è·¯ç”±ä¼šä¸¢å¤±ï¼Œéœ€é‡æ–°åŠ è½½è·¯ç”±é…ç½®ã€‚</li>
<li><strong>è·¯ç”±æ‡’åŠ è½½é€‚é…</strong>ï¼šå¤§å‹åº”ç”¨ä¸­ï¼Œè·¯ç”±ç»„ä»¶ä½“ç§¯å¤§ï¼Œéœ€ç»“åˆæƒé™é¢„æ ¡éªŒå®ç°æŒ‰éœ€åŠ è½½ï¼Œé¿å…æ— æ•ˆèµ„æºè¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰æ··åˆå¼è·¯ç”±é…ç½®ï¼ˆå‰ç«¯é¢„è®¾ + åç«¯è¿‡æ»¤ï¼‰</h4>
<p>çº¯åç«¯è¿”å›è·¯ç”±çµæ´»æ€§å·®ï¼Œçº¯å‰ç«¯é¢„è®¾è·¯ç”±éš¾ä»¥åº”å¯¹æƒé™å˜æ›´ï¼Œå®é™…é¡¹ç›®å¸¸ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<ul>
<li>å‰ç«¯é¢„è®¾ã€ŒåŸºç¡€è·¯ç”±ã€ï¼ˆç™»å½•é¡µã€404 é¡µã€é¦–é¡µï¼‰å’Œã€Œæƒé™è·¯ç”±æ¨¡æ¿ã€ï¼ˆå« meta.permission æ ‡è¯†é¡µé¢æ‰€éœ€æƒé™ï¼‰ã€‚</li>
<li>ç™»å½•åï¼Œåç«¯è¿”å›ç”¨æˆ·ã€Œæƒé™æ ‡è¯†åˆ—è¡¨ã€ï¼Œå‰ç«¯è¿‡æ»¤å‡ºå¯è®¿é—®çš„æƒé™è·¯ç”±ï¼ŒåŠ¨æ€æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯é¢„è®¾è·¯ç”±æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> asyncRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user-manage'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserManage'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/UserManage.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'user:manage'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span> } <span class="hljs-comment">// é¡µé¢æ‰€éœ€æƒé™æ ‡è¯†</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/system-config'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SystemConfig'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/SystemConfig.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'system:config'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç³»ç»Ÿé…ç½®'</span> }
  }
];

<span class="hljs-comment">// ç”Ÿæˆå¯è®¿é—®è·¯ç”±ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateAccessibleRoutes</span> = (<span class="hljs-params">permissions</span>) =&gt; {
  <span class="hljs-keyword">return</span> asyncRoutes.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-comment">// æ— æƒé™æ ‡è¯†çš„è·¯ç”±é»˜è®¤å¯è®¿é—®ï¼Œæœ‰æƒé™æ ‡è¯†éœ€åŒ¹é…ç”¨æˆ·æƒé™</span>
    <span class="hljs-keyword">return</span> !route.<span class="hljs-property">meta</span>?.<span class="hljs-property">permission</span> || permissions.<span class="hljs-title function_">includes</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">permission</span>);
  });
};
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰è·¯ç”±å®ˆå«çš„ â€œè´£ä»»é“¾æ ¡éªŒâ€</h4>
<p>å°†ç™»å½•æ ¡éªŒã€æƒé™æ ¡éªŒã€åˆ·æ–°ä¿®å¤ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹å®ˆå«ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œé™ä½è€¦åˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">router.beforeEach(<span class="hljs-keyword">async</span> (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = localStorage.getItem(<span class="hljs-comment">'token');</span>
  <span class="hljs-keyword">const</span> userPermissions = store.getters.userPermissions;

  // <span class="hljs-number">1</span>. æœªç™»å½•æ‹¦æˆªï¼ˆè´£ä»»é“¾ç¬¬ä¸€ç¯ï¼‰
  <span class="hljs-keyword">if</span> (!token &amp;&amp; <span class="hljs-keyword">to</span>.path !== <span class="hljs-comment">'/login') {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/login?redirect=' + to.fullPath); // è®°å½•è·³è½¬ç›®æ ‡ï¼Œç™»å½•åå›è·³</span>
  }

  // <span class="hljs-number">2</span>. å·²ç™»å½•ä½†æ— æƒé™è®¿é—®ï¼ˆè´£ä»»é“¾ç¬¬äºŒç¯ï¼‰
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">to</span>.meta.permission &amp;&amp; !userPermissions.includes(<span class="hljs-keyword">to</span>.meta.permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/403'); // è·³è½¬åˆ°è‡ªå®šä¹‰æ— æƒé™é¡µï¼Œæå‡ä½“éªŒ</span>
  }

  // <span class="hljs-number">3</span>. åˆ·æ–°ååŠ¨æ€è·¯ç”±ä¸¢å¤±ä¿®å¤ï¼ˆè´£ä»»é“¾ç¬¬ä¸‰ç¯ï¼‰
  <span class="hljs-keyword">if</span> (store.getters.accessRoutes.length === <span class="hljs-number">0</span> &amp;&amp; token) {
    <span class="hljs-keyword">const</span> accessibleRoutes = generateAccessibleRoutes(userPermissions);
    store.dispatch(<span class="hljs-comment">'setAccessRoutes', accessibleRoutes);</span>
    accessibleRoutes.forEach(route =&gt; router.addRoute(route));
    // é‡æ–°è§¦å‘è·¯ç”±è·³è½¬ï¼Œé¿å…ç©ºç™½é¡µ
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>({ ...<span class="hljs-keyword">to</span>, replace: <span class="hljs-literal">true</span> });
  }

  <span class="hljs-keyword">next</span>();
});
</code></pre>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰è·¯ç”±ç‹¬äº«å®ˆå«å¢å¼º</h4>
<p>é’ˆå¯¹æ•æ„Ÿé¡µé¢ï¼ˆå¦‚è´¢åŠ¡å¯¹è´¦ã€ç”¨æˆ·æƒé™é…ç½®ï¼‰ï¼Œæ·»åŠ äºŒæ¬¡æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> routes = [
  {
    path: <span class="hljs-comment">'/financial-reconciliation',</span>
    component: FinancialReconciliation,
    meta: { permission: <span class="hljs-comment">'financial:view' },</span>
    beforeEnter: (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
      // é¢å¤–æ ¡éªŒï¼šä»…å·¥ä½œæ—¶é—´å¯è®¿é—®
      <span class="hljs-keyword">const</span> hour = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>().getHours();
      <span class="hljs-keyword">if</span> (hour &lt; <span class="hljs-number">9</span> || hour &gt; <span class="hljs-number">18</span>) {
        ElMessage.warning(<span class="hljs-comment">'ä»…å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰å¯è®¿é—®');</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-keyword">from</span>.path);
      }
      <span class="hljs-keyword">next</span>();
    }
  }
];
</code></pre>
<h3 data-id="heading-6">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šè·¯ç”±å®ˆå«æŒ‰ â€œç™»å½•æ ¡éªŒâ†’æƒé™æ ¡éªŒâ†’åˆ·æ–°ä¿®å¤â€ çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªå®ˆå«è´Ÿè´£å•ä¸€èŒè´£ï¼Œå¯çµæ´»å¢åˆ è°ƒæ•´ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆå¦‚ adminã€editorï¼‰åº”ç”¨ä¸åŒçš„è·¯ç”±è¿‡æ»¤ç­–ç•¥ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ä¿ç•™æ‰€æœ‰æƒé™è·¯ç”±ï¼Œè¿è¥ä»…ä¿ç•™ä¸šåŠ¡ç›¸å…³è·¯ç”±ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šæƒé™å˜æ›´æ—¶ï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™ï¼‰ï¼Œè§¦å‘è·¯ç”±é‡æ–°åŠ è½½äº‹ä»¶ï¼Œæ›´æ–°å¯è®¿é—®è·¯ç”±åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-7">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>è·¯ç”±é…ç½®ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œåˆ·æ–°åé‡æ–°è¯·æ±‚åç«¯è·å–ï¼Œé¿å… localStorage å­˜å‚¨æ•æ„Ÿè·¯ç”±è§„åˆ™ï¼ˆå¦‚æ¥å£åœ°å€ã€æƒé™æ ‡è¯†ï¼‰ã€‚</li>
<li>ç”¨æˆ·æƒé™æ ‡è¯†ï¼šé‡‡ç”¨ â€œlocalStorageï¼ˆæŒä¹…åŒ–ï¼‰+ Vuex/Piniaï¼ˆå†…å­˜è®¿é—®ï¼‰â€ åŒå­˜å‚¨ï¼ŒlocalStorage ç¡®ä¿åˆ·æ–°åä¸ä¸¢å¤±ï¼ŒVuex/Pinia æå‡è®¿é—®æ•ˆç‡ã€‚</li>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorage æˆ– sessionStorageï¼Œå»ºè®®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œé™ä½æ³„éœ²é£é™©ã€‚</li>
</ul>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>æƒé™æ ‡è¯†åŠ å¯†ï¼šå¯¹ localStorage ä¸­çš„æƒé™æ ‡è¯†åšç®€å•åŠ å¯†ï¼ˆå¦‚ Base64ï¼‰ï¼Œé¿å…æ˜æ–‡æ³„éœ²ï¼ˆè™½ä¸èƒ½é˜²ç ´è§£ï¼Œä½†èƒ½æå‡åŸºç¡€å®‰å…¨ï¼‰ã€‚</li>
<li>é˜² URL ç»•è¿‡ï¼šå³ä½¿å‰ç«¯éšè—è·¯ç”±ï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥ URL è®¿é—®æ—¶ï¼Œåç«¯éœ€å¯¹ â€œé¡µé¢åˆå§‹åŒ–æ¥å£â€ åšæƒé™æ ¡éªŒï¼ˆå¦‚è®¿é—®<code>/system-config</code>æ—¶ï¼Œåç«¯æ ¡éªŒ<code>system:config</code>æƒé™ï¼‰ã€‚</li>
<li>æ•æ„Ÿè·¯ç”±éšè—ï¼šæ— æƒé™çš„è·¯ç”±ä¸æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼ŒåŒæ—¶åœ¨èœå•æ¸²æŸ“æ—¶è¿‡æ»¤ï¼Œé¿å…ç”¨æˆ·æ„ŸçŸ¥æœªæˆæƒåŠŸèƒ½ã€‚</li>
</ul>
<h2 data-id="heading-10">äºŒã€é¡µé¢å…ƒç´ æƒé™ï¼šç»†ç²’åº¦çš„ â€œåŠŸèƒ½å¯è§æ€§æ§åˆ¶â€</h2>
<h3 data-id="heading-11">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ“ä½œæƒé™å·®å¼‚åŒ–</strong>ï¼šåŒä¸€é¡µé¢ä¸­ï¼Œç®¡ç†å‘˜å¯çœ‹åˆ° â€œåˆ é™¤ç”¨æˆ·â€â€œæ‰¹é‡å¯¼å‡ºâ€ æŒ‰é’®ï¼Œæ™®é€šç”¨æˆ·ä»…èƒ½çœ‹åˆ° â€œæŸ¥çœ‹è¯¦æƒ…â€ æŒ‰é’®ã€‚</li>
<li><strong>æ•°æ®åˆ—æƒé™</strong>ï¼šè¡¨æ ¼ä¸­ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ â€œæ‰‹æœºå·â€â€œèº«ä»½è¯å·â€ åˆ—ï¼Œè¿è¥ä»…èƒ½æŸ¥çœ‹ â€œç”¨æˆ·åâ€â€œè®¢å•å·â€ åˆ—ã€‚</li>
<li><strong>å¤æ‚æƒé™ç»„åˆ</strong>ï¼šæŒ‰é’®æ˜¾ç¤ºéœ€æ»¡è¶³ â€œè§’è‰²ä¸º editor + æ‹¥æœ‰ order:edit æƒé™ + æ•°æ®å½’å±æœ¬éƒ¨é—¨â€ ç­‰å¤šæ¡ä»¶ç»„åˆã€‚</li>
<li><strong>ç°åº¦åŠŸèƒ½å‘å¸ƒ</strong>ï¼šæ–°åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œä»…å¯¹éƒ¨åˆ†ç”¨æˆ·ï¼ˆå¦‚å†…éƒ¨æµ‹è¯•è´¦å·ï¼‰æ˜¾ç¤ºå…¥å£ï¼Œé€æ­¥å…¨é‡å¼€æ”¾ã€‚</li>
<li><strong>æƒé™åŠ¨æ€æ›´æ–°</strong>ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé¡µé¢å…ƒç´ å®æ—¶åˆ·æ–°ï¼ˆå¦‚ç«‹å³éšè— â€œåˆ é™¤â€ æŒ‰é’®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰æƒé™ä¸­å¿ƒå°è£…ï¼ˆè§£å†³ç¢ç‰‡åŒ–é—®é¢˜ï¼‰</h4>
<p>æ„å»ºå…¨å±€æƒé™ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†æƒé™æ ¡éªŒé€»è¾‘ï¼Œé¿å…æ•£è½åœ¨å„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/utils/permissionCenter.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionCenter</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.permissions = []; <span class="hljs-comment">// æƒé™ç åˆ—è¡¨ï¼ˆå¦‚["user:add", "order:edit"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.roles = []; <span class="hljs-comment">// è§’è‰²åˆ—è¡¨ï¼ˆå¦‚["admin", "editor"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.customRules = new Map(); <span class="hljs-comment">// è‡ªå®šä¹‰æƒé™è§„åˆ™ï¼ˆåº”å¯¹å¤æ‚åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">this</span>.cache = new Map(); <span class="hljs-comment">// æ ¡éªŒç»“æœç¼“å­˜ï¼Œæå‡æ€§èƒ½</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–æƒé™æ•°æ®</span>
  <span class="hljs-keyword">init</span>(permissions, roles) {
    <span class="hljs-keyword">this</span>.permissions = permissions;
    <span class="hljs-keyword">this</span>.roles = roles;
    <span class="hljs-keyword">this</span>.cache.clear(); <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ¸…ç©ºç¼“å­˜</span>
  }

  <span class="hljs-comment">// åŸºç¡€æƒé™æ ¡éªŒï¼ˆæƒé™ç åŒ¹é…ï¼‰</span>
  hasPermission(code) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cache.has(code)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">get</span>(code);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">this</span>.permissions.includes(code);
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">set</span>(code, result); <span class="hljs-comment">// ç¼“å­˜æ ¡éªŒç»“æœ</span>
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  hasRole(role) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.roles.includes(role);
  }

  <span class="hljs-comment">// å¤æ‚è§„åˆ™æ ¡éªŒï¼ˆæ”¯æŒå¤šæ¡ä»¶ç»„åˆï¼‰</span>
  checkCustomRule(ruleName, ...args) {
    <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">get</span>(ruleName);
    <span class="hljs-keyword">if</span> (!rule) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> rule(...args);
  }

  <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰è§„åˆ™</span>
  registerCustomRule(ruleName, ruleFn) {
    <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">set</span>(ruleName, ruleFn);
  }

  <span class="hljs-comment">// æƒé™æ›´æ–°ï¼ˆè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ï¼‰</span>
  updatePermissions(permissions, roles) {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>(permissions, roles);
    <span class="hljs-comment">// è§¦å‘Vueå“åº”å¼æ›´æ–°ï¼ˆéœ€ç»“åˆVuex/Piniaï¼‰</span>
    store.dispatch(<span class="hljs-string">'updateUserPermissions'</span>, { permissions, roles });
  }
}

export default new PermissionCenter();
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰æŒ‡ä»¤ + ç»„ä»¶çš„åŒå±‚æ§åˆ¶</h4>
<ul>
<li><strong>å…¨å±€æŒ‡ä»¤ï¼ˆv-permï¼‰</strong> ï¼šè´Ÿè´£åŸºç¡€æƒé™æ ¡éªŒï¼Œå¿«é€Ÿéšè—æ— æƒé™å…ƒç´ ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// æ³¨å†Œå…¨å±€æƒé™æŒ‡ä»¤
app.directive('perm', {
  mounted(el, binding) {
    const { value, arg } = binding<span class="hljs-comment">;</span>
    let <span class="hljs-attr">hasAccess</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

    // æ”¯æŒæƒé™ç æ ¡éªŒï¼ˆ<span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>ï¼‰å’Œè‡ªå®šä¹‰è§„åˆ™æ ¡éªŒï¼ˆv-perm:rule=<span class="hljs-string">"xxx"</span>ï¼‰
    if (<span class="hljs-attr">arg</span> === <span class="hljs-string">'rule'</span>) {
      const { name, args } = value<span class="hljs-comment">;</span>
      <span class="hljs-attr">hasAccess</span> = permissionCenter.checkCustomRule(name, ...args)<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">hasAccess</span> = permissionCenter.hasPermission(value)<span class="hljs-comment">;</span>
    }

    // æ— æƒé™æ—¶ç§»é™¤å…ƒç´ ï¼ˆé¿å…ç”¨æˆ·é€šè¿‡DOMæ“ä½œæ˜¾ç¤ºï¼‰
    if (!hasAccess) {
      el.parentNode?.removeChild(el)<span class="hljs-comment">;</span>
    }
  },
  // æƒé™æ›´æ–°æ—¶é‡æ–°æ ¡éªŒï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹æƒé™åï¼‰
  updated(el, binding) {
    // å¤ç”¨mountedé€»è¾‘ï¼Œé‡æ–°æ ¡éªŒæƒé™
    this.mounted(el, binding)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><strong>æƒé™ç»„ä»¶ï¼ˆPermissionWrapï¼‰</strong> ï¼šåº”å¯¹å¤æ‚åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆã€æƒé™å˜æ›´åˆ·æ–°ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- components/PermissionWrap.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasAccess"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> permissionCenter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/permissionCenter'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// æƒé™ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">perm</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è§’è‰²ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">role</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
  <span class="hljs-attr">customRule</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> }
});

<span class="hljs-comment">// æƒé™æ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">const</span> hasAccess = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æƒé™ç æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">perm</span>) {
    <span class="hljs-keyword">const</span> perms = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">perm</span>) ? props.<span class="hljs-property">perm</span> : [props.<span class="hljs-property">perm</span>];
    <span class="hljs-keyword">if</span> (!perms.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasPermission</span>(perm))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">role</span>) {
    <span class="hljs-keyword">const</span> roles = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">role</span>) ? props.<span class="hljs-property">role</span> : [props.<span class="hljs-property">role</span>];
    <span class="hljs-keyword">if</span> (!roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasRole</span>(role))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">customRule</span>) {
    <span class="hljs-keyword">const</span> { name, args } = props.<span class="hljs-property">customRule</span>;
    <span class="hljs-keyword">if</span> (!permissionCenter.<span class="hljs-title function_">checkCustomRule</span>(name, ...args)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ï¼ˆ3ï¼‰é¡µé¢ä¸­ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€æƒé™æŒ‰é’® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è§’è‰²+æƒé™ç»„åˆæ§åˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">perm</span>=<span class="hljs-string">"order:export"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"admin"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ‰¹é‡å¯¼å‡ºè®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¤æ‚è‡ªå®šä¹‰è§„åˆ™ï¼ˆä»…èƒ½æ“ä½œè‡ªå·±åˆ›å»ºçš„è®¢å•ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">:custom-rule</span>=<span class="hljs-string">"{ name: 'canOperateOrder', args: [order] }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"editOrder(order.id)"</span>&gt;</span>ç¼–è¾‘è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¡¨æ ¼åˆ—æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ‰‹æœºå·"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"permissionCenter.hasPermission('user:view:phone')"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"scope"</span>&gt;</span>{{ scope.row.phone }}<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šé€šè¿‡<code>v-perm</code>æŒ‡ä»¤æˆ–<code>PermissionWrap</code>ç»„ä»¶åŒ…è£…åŸæœ‰å…ƒç´ ï¼Œæ·»åŠ æƒé™æ§åˆ¶é€»è¾‘ï¼Œä¸ä¿®æ”¹å…ƒç´ æœ¬èº«ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
<li><strong>ç»„åˆæ¨¡å¼</strong>ï¼šå°†åŸºç¡€æƒé™æ ¡éªŒã€è§’è‰²æ ¡éªŒã€è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒç»„åˆä¸ºå¤æ‚æƒé™é€»è¾‘ï¼Œæ”¯æŒçµæ´»ç»„åˆä¸æ‰©å±•ã€‚</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæƒé™ä¸­å¿ƒï¼ˆPermissionCenterï¼‰é‡‡ç”¨å•ä¾‹è®¾è®¡ï¼Œç¡®ä¿å…¨åº”ç”¨æƒé™æ•°æ®ä¸€è‡´ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 data-id="heading-17">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>æƒé™ç  / è§’è‰²åˆ—è¡¨ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰+ localStorageï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œä¸è·¯ç”±æƒé™å…±ç”¨å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è‡ªå®šä¹‰è§„åˆ™ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒå®ä¾‹ä¸­ï¼ˆå†…å­˜ï¼‰ï¼Œåˆå§‹åŒ–æ—¶æ³¨å†Œï¼Œæ— éœ€æŒä¹…åŒ–ã€‚</li>
<li>æ ¡éªŒç»“æœç¼“å­˜ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒçš„<code>cache</code>å±æ€§ï¼ˆå†…å­˜ï¼‰ï¼Œé¡µé¢åˆ·æ–°åæ¸…ç©ºï¼Œé¿å…ç¼“å­˜è¿‡æœŸã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>é˜² DOM ç¯¡æ”¹ï¼šä»…ç”¨<code>v-if</code>éšè—å…ƒç´ ä¸å¤Ÿï¼Œéœ€ç”¨<code>el.remove()</code>å½»åº•ç§»é™¤ï¼Œé¿å…ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°ä¿®æ”¹ DOM æ˜¾ç¤ºæ— æƒé™å…ƒç´ ã€‚</li>
<li>äºŒæ¬¡æ ¡éªŒï¼šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­æ·»åŠ æƒé™äºŒæ¬¡æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡æ§åˆ¶å°è§¦å‘äº‹ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> handleDelete = (userId) =&gt; {
  <span class="hljs-keyword">if</span> (!permissionCenter.hasPermission(<span class="hljs-string">'user:delete'</span>)) {
    ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ— åˆ é™¤æƒé™'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ‰§è¡Œåˆ é™¤é€»è¾‘</span>
};
</code></pre>
<ul>
<li>æƒé™æ›´æ–°åŒæ­¥ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯è°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æƒé™æ•°æ®ï¼Œè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<h2 data-id="heading-20">ä¸‰ã€æ¥å£æƒé™ï¼šç³»ç»Ÿå®‰å…¨çš„ â€œæœ€åä¸€é“é˜²çº¿â€</h2>
<h3 data-id="heading-21">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•æ„Ÿæ“ä½œæ¥å£æ§åˆ¶</strong>ï¼š<code>/api/user/delete</code>ï¼ˆåˆ é™¤ç”¨æˆ·ï¼‰ã€<code>/api/order/update-status</code>ï¼ˆä¿®æ”¹è®¢å•çŠ¶æ€ï¼‰ç­‰é«˜å±æ¥å£ï¼Œä»…æˆæƒè§’è‰²å¯è°ƒç”¨ã€‚</li>
<li><strong>æ•°æ®èŒƒå›´æƒé™</strong>ï¼š<code>/api/order/list</code>æ¥å£ï¼Œç®¡ç†å‘˜è¿”å›æ‰€æœ‰è®¢å•ï¼Œæ™®é€šç”¨æˆ·ä»…è¿”å›è‡ªå·±åˆ›å»ºçš„è®¢å•ã€‚</li>
<li><strong>æ¥å£é¢‘ç‡é™åˆ¶</strong>ï¼šå…è´¹ç”¨æˆ·è°ƒç”¨<code>/api/search</code>æ¥å£æ¯åˆ†é’Ÿæœ€å¤š 10 æ¬¡ï¼Œä»˜è´¹ç”¨æˆ·æ— é™åˆ¶ã€‚</li>
<li><strong>æ¥å£ç‰ˆæœ¬æƒé™</strong>ï¼šæ–°ç‰ˆæœ¬æ¥å£ï¼ˆå¦‚<code>/api/v2/order</code>ï¼‰ä»…å¯¹å·²å‡çº§ç‰ˆæœ¬çš„ç§Ÿæˆ·å¼€æ”¾ã€‚</li>
<li><strong>Token å¤±æ•ˆ / æƒé™å˜æ›´å¤„ç†</strong>ï¼šToken è¿‡æœŸæˆ–æƒé™è¢«å›æ”¶æ—¶ï¼Œæ¥å£è¿”å› 403/401ï¼Œå‰ç«¯éœ€ä¼˜é›…å¤„ç†ï¼ˆå¦‚ç™»å‡ºã€åˆ·æ–° Tokenï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-23">ï¼ˆ1ï¼‰è¯·æ±‚ / å“åº”æ‹¦æˆªå™¨çš„å…¨é“¾è·¯æ§åˆ¶</h4>
<ul>
<li><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong>ï¼šæ·»åŠ  Tokenã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. æ·»åŠ Tokenï¼ˆé‰´æƒåŸºç¡€ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }

    <span class="hljs-comment">// 2. æ¥å£æƒé™é¢„åˆ¤ï¼ˆå‡å°‘æ— æ•ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">const</span> { url, method } = config;
    <span class="hljs-comment">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆå¦‚"DELETE:/api/user/delete" â†’ "user:delete"ï¼‰</span>
    <span class="hljs-keyword">const</span> apiPerm = <span class="hljs-title function_">generateApiPermissionKey</span>(method, url);
    <span class="hljs-keyword">if</span> (apiPerm &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasPermission</span>(apiPerm)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æ¥å£æƒé™ï¼š<span class="hljs-subst">${apiPerm}</span>`</span>));
    }

    <span class="hljs-comment">// 3. æ•°æ®èŒƒå›´å‚æ•°ï¼ˆé…åˆåç«¯è¿‡æ»¤ï¼‰</span>
    <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/order/list'</span>) &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasRole</span>(<span class="hljs-string">'admin'</span>)) {
      config.<span class="hljs-property">params</span> = { ...config.<span class="hljs-property">params</span>, <span class="hljs-attr">creatorId</span>: store.<span class="hljs-property">getters</span>.<span class="hljs-property">userId</span> };
    }

    <span class="hljs-comment">// 4. å¹‚ç­‰æ€§å¤„ç†ï¼ˆæ•æ„Ÿæ¥å£é˜²é‡å¤è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> ([<span class="hljs-string">'POST'</span>, <span class="hljs-string">'PUT'</span>, <span class="hljs-string">'DELETE'</span>].<span class="hljs-title function_">includes</span>(method)) {
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">'X-Request-Id'</span>] = <span class="hljs-title function_">uuidv4</span>();
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);
</code></pre>
<ul>
<li><strong>å“åº”æ‹¦æˆªå™¨</strong>ï¼šå¤„ç†æƒé™å¼‚å¸¸ã€Token å¤±æ•ˆï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">axios.interceptors.response.use(
  (response) =&gt; {
    <span class="hljs-comment">// ç¼“å­˜é¢‘ç¹è°ƒç”¨çš„éæ•æ„Ÿæ¥å£ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (response.config.url === <span class="hljs-string">'/api/user/info'</span> &amp;&amp; response.status === <span class="hljs-number">200</span>) {
      store.dispatch(<span class="hljs-string">'cacheUserInfo'</span>, response.data);
    }
    <span class="hljs-keyword">return</span> response;
  },
  (<span class="hljs-type">error</span>) =&gt; {
    <span class="hljs-keyword">const</span> { status, data } = <span class="hljs-type">error</span>.response || {};
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
        <span class="hljs-comment">// Tokenå¤±æ•ˆï¼Œç™»å‡ºå¹¶è·³è½¬ç™»å½•é¡µ</span>
        ElMessage.<span class="hljs-type">error</span>(data.msg || <span class="hljs-string">'ç™»å½•å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        store.dispatch(<span class="hljs-string">'logout'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
        <span class="hljs-comment">// åŒºåˆ†æ¥å£æƒé™ä¸è¶³å’Œæ•°æ®æƒé™ä¸è¶³</span>
        <span class="hljs-keyword">const</span> msg = data.msg || <span class="hljs-string">'æ— æ¥å£è®¿é—®æƒé™'</span>;
        ElMessage.<span class="hljs-type">error</span>(msg);
        <span class="hljs-comment">// æ•æ„Ÿæ“ä½œæƒé™ä¸è¶³ï¼Œå¯è®°å½•æ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (msg.includes(<span class="hljs-string">'æ•æ„Ÿæ“ä½œ'</span>)) {
          reportPermissionError({ url: <span class="hljs-type">error</span>.config.url, msg });
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">429</span>:
        ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ¥å£è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'</span>);
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-type">error</span>);
  }
);
</code></pre>
<h4 data-id="heading-24">ï¼ˆ2ï¼‰æ¥å£æƒé™æ ‡è¯†ç”Ÿæˆè§„åˆ™</h4>
<p>ç»Ÿä¸€æ¥å£ä¸æƒé™ç çš„æ˜ å°„å…³ç³»ï¼Œé¿å…æ··ä¹±ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆmethod + æ¥å£è·¯å¾„ç®€åŒ–ï¼‰
const <span class="hljs-attr">generateApiPermissionKey</span> = (method, url) =&gt; {
  // ç¤ºä¾‹ï¼šDELETE /api/user/123 â†’ user:delete
  // ç¤ºä¾‹ï¼šGET /api/order/list â†’ order:list
  const <span class="hljs-attr">pathParts</span> = url.replace(/^/api//, <span class="hljs-string">''</span>).split(<span class="hljs-string">'/'</span>)<span class="hljs-comment">;</span>
  if (<span class="hljs-attr">pathParts.length</span> === <span class="hljs-number">0</span>) return <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">resource</span> = pathParts[<span class="hljs-number">0</span>]<span class="hljs-comment">; // èµ„æºåï¼ˆuser/orderï¼‰</span>
  let <span class="hljs-attr">action</span> = method.toLowerCase()<span class="hljs-comment">; // æ“ä½œï¼ˆget/post/deleteï¼‰</span>
  // ç‰¹æ®Šæ˜ å°„ï¼šgetåˆ—è¡¨ â†’ listï¼Œgetè¯¦æƒ… â†’ view
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.includes(<span class="hljs-string">'list'</span>)) action = <span class="hljs-string">'list'</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.length &gt;= <span class="hljs-number">2</span> &amp;&amp; !isNaN(pathParts[<span class="hljs-number">1</span>])) action = <span class="hljs-string">'view'</span><span class="hljs-comment">;</span>
  return `${resource}:${action}`<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-25">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šè¯·æ±‚æ‹¦æˆªå™¨ä½œä¸ºæ¥å£è°ƒç”¨çš„ä»£ç†ï¼Œç»Ÿä¸€æ·»åŠ é‰´æƒä¿¡æ¯ã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼Œä¸ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚ä»£ç ã€‚</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šåç«¯æ¥å£æ ¡éªŒæŒ‰ â€œToken æ ¡éªŒâ†’æƒé™ç æ ¡éªŒâ†’æ•°æ®èŒƒå›´æ ¡éªŒâ†’é¢‘ç‡é™åˆ¶â€ çš„é¡ºåºæ‰§è¡Œï¼Œå‰ç«¯å“åº”æ‹¦æˆªå™¨æŒ‰ â€œ401 å¤„ç†â†’403 å¤„ç†â†’429 å¤„ç†â€ é¡ºåºå¤„ç†å¼‚å¸¸ã€‚</li>
<li><strong>ç¼“å­˜æ¨¡å¼</strong>ï¼šå¯¹éæ•æ„Ÿæ¥å£ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼Œæå‡æ€§èƒ½ï¼ˆéœ€åœ¨æƒé™å˜æ›´æ—¶æ¸…ç©ºç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorageï¼ˆæŒä¹…åŒ–ï¼‰æˆ– sessionStorageï¼ˆä¼šè¯çº§ï¼‰ï¼Œå»ºè®®è®¾ç½®<code>HttpOnly</code>å’Œ<code>Secure</code>å±æ€§ï¼ˆéœ€åç«¯é…åˆï¼‰ï¼Œé˜²æ­¢ XSS æ”»å‡»ã€‚</li>
<li>æ¥å£æƒé™æ ‡è¯†æ˜ å°„è§„åˆ™ï¼šå‰ç«¯é¢„è®¾ï¼ˆå¦‚<code>user:delete</code>å¯¹åº”<code>/api/user/delete</code>ï¼‰ï¼Œæ— éœ€æŒä¹…åŒ–ï¼Œç¡®ä¿ä¸åç«¯ä¸€è‡´ã€‚</li>
<li>æ¥å£ç¼“å­˜ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œç¼“å­˜ key åŒ…å«ç”¨æˆ· ID å’Œæƒé™æ ‡è¯†ï¼Œé¿å…å¤šç”¨æˆ·æ•°æ®æ··æ·†ã€‚</li>
</ul>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>åç«¯ç»å¯¹æ ¡éªŒï¼šå‰ç«¯æƒé™é¢„åˆ¤ä»…ä¸ºä½“éªŒä¼˜åŒ–ï¼Œåç«¯å¿…é¡»å¯¹æ¯ä¸ªæ¥å£åšç‹¬ç«‹æƒé™æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡ Postman ç­‰å·¥å…·ç»•è¿‡å‰ç«¯æ‹¦æˆªã€‚</li>
<li>Token åŠ å¯†ä¼ è¾“ï¼šæ‰€æœ‰æ¥å£é‡‡ç”¨ HTTPS åè®®ï¼ŒToken åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œé¿å…ä¸­é—´äººæ”»å‡»ã€‚</li>
<li>æ•æ„Ÿæ¥å£äºŒæ¬¡éªŒè¯ï¼šæ ¸å¿ƒæ¥å£ï¼ˆå¦‚åˆ é™¤ç”¨æˆ·ã€è½¬è´¦ï¼‰éœ€æ·»åŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚è¾“å…¥å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ï¼‰ï¼Œå³ä½¿æƒé™æ ¡éªŒé€šè¿‡ï¼Œä¹Ÿéœ€ç¡®è®¤æ“ä½œæ„å›¾ã€‚</li>
<li>æƒé™æ—¥å¿—è®°å½•ï¼šå‰ç«¯è°ƒç”¨æ•æ„Ÿæ¥å£æ—¶ï¼Œä¼ é€’æ“ä½œäººã€æ“ä½œæ—¶é—´ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œåç«¯å­˜å‚¨æ—¥å¿—ï¼Œä¾¿äºå®‰å…¨è¿½æº¯ã€‚</li>
</ul>
<h2 data-id="heading-29">å››ã€é™è®¾è®¡çš„é¢å¤–å…³é”®è¦ç‚¹</h2>
<h3 data-id="heading-30">1. æƒé™å¯è§†åŒ–é…ç½®</h3>
<ul>
<li>ç®¡ç†å‘˜é€šè¿‡ç³»ç»Ÿåå°çš„ â€œæƒé™é…ç½®é¡µé¢â€ï¼Œå‹¾é€‰è§’è‰²å¯¹åº”çš„æƒé™ï¼ˆå¦‚ â€œç”¨æˆ·ç®¡ç†â€â†’â€œåˆ é™¤ç”¨æˆ·â€ï¼‰ï¼Œåç«¯å­˜å‚¨è§’è‰² - æƒé™æ˜ å°„å…³ç³»ã€‚</li>
<li>å‰ç«¯æ¸²æŸ“ â€œæƒé™æ ‘â€ï¼Œæ”¯æŒæŒ‰æ¨¡å—æŠ˜å  / å±•å¼€ï¼Œä¾¿äºç®¡ç†å‘˜æ“ä½œï¼›æ”¯æŒæ‰¹é‡åˆ†é…æƒé™ï¼ˆå¦‚ç»™ â€œè¿è¥â€ è§’è‰²åˆ†é…æ‰€æœ‰è®¢å•ç›¸å…³æƒé™ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-31">2. æƒé™åŠ¨æ€æ›´æ–°ä¸åŒæ­¥</h3>
<ul>
<li>ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯é€šè¿‡ WebSocket æˆ–è½®è¯¢å®æ—¶è·å–æœ€æ–°æƒé™ï¼Œè°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æ•°æ®ï¼Œæ— éœ€ç”¨æˆ·åˆ·æ–°é¡µé¢ã€‚</li>
<li>è·¨æ ‡ç­¾é¡µæƒé™åŒæ­¥ï¼šé€šè¿‡<code>localStorage</code>ç›‘å¬äº‹ä»¶ï¼Œä¸€ä¸ªæ ‡ç­¾é¡µä¿®æ”¹æƒé™åï¼Œå…¶ä»–æ ‡ç­¾é¡µè‡ªåŠ¨æ›´æ–°æƒé™çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-32">3. è·¨ç«¯æƒé™ç»Ÿä¸€ç®¡ç†</h3>
<ul>
<li>è‹¥é¡¹ç›®åŒ…å« PC ç«¯ã€ç§»åŠ¨ç«¯ã€å°ç¨‹åºï¼Œè®¾è®¡ç»Ÿä¸€çš„æƒé™ä¸­å¿ƒï¼ˆåç«¯ï¼‰ï¼Œå„ç«¯å…±ç”¨ä¸€å¥—æƒé™ç å’Œè§’è‰²ä½“ç³»ï¼ˆå¦‚<code>user:delete</code>åœ¨æ‰€æœ‰ç«¯å«ä¹‰ä¸€è‡´ï¼‰ã€‚</li>
<li>å‰ç«¯å„ç«¯å¤ç”¨æƒé™æ ¡éªŒé€»è¾‘ï¼ˆå¦‚<code>permissionCenter</code>å·¥å…·ç±»ï¼‰ï¼Œç¡®ä¿æƒé™æ§åˆ¶è¡Œä¸ºä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-33">4. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æƒé™æ ¡éªŒç¼“å­˜ï¼šå¯¹é¢‘ç¹æ ¡éªŒçš„æƒé™ç ï¼ˆå¦‚è¡¨æ ¼åˆ—æƒé™ï¼‰è¿›è¡Œç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li>åŠ¨æ€è·¯ç”±æ‡’åŠ è½½ï¼šåŠ¨æ€æ·»åŠ çš„è·¯ç”±ç»„ä»¶é‡‡ç”¨æ‡’åŠ è½½ï¼ˆ<code>() =&gt; import('../views/xxx.vue')</code>ï¼‰ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li>
<li>æƒé™æ•°æ®æ‰¹é‡è¯·æ±‚ï¼šç™»å½•åä¸€æ¬¡æ€§è·å–ç”¨æˆ·è§’è‰²ã€æƒé™ç ã€è·¯ç”±é…ç½®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚åç«¯ã€‚</li>
</ul>
<h3 data-id="heading-34">5. ç°åº¦å‘å¸ƒä¸ A/B æµ‹è¯•</h3>
<ul>
<li>æƒé™ä¸­å¿ƒæ”¯æŒ â€œç°åº¦è§„åˆ™â€ï¼Œå¦‚ â€œç”¨æˆ· ID åœ¨ç™½åå•å†…â€â€œéƒ¨é—¨ä¸ºæµ‹è¯•éƒ¨â€ çš„ç”¨æˆ·å¯è®¿é—®æ–°åŠŸèƒ½è·¯ç”±å’ŒæŒ‰é’®ã€‚</li>
<li>é€šè¿‡æƒé™é…ç½®å®ç° A/B æµ‹è¯•ï¼Œç»™ä¸åŒç”¨æˆ·ç»„åˆ†é…ä¸åŒæƒé™ï¼ŒéªŒè¯åŠŸèƒ½æ•ˆæœåå…¨é‡å¼€æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-35">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-36">1. æƒé™è®¾è®¡çš„ä¸‰å±‚é€»è¾‘</h3>
<ul>
<li>å‰ç«¯è·¯ç”±æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦è®¿é—®é¡µé¢â€ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ã€‚</li>
<li>å‰ç«¯å…ƒç´ æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦çœ‹åˆ°åŠŸèƒ½â€ï¼Œéšè—æ— æƒé™å…ƒç´ ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘ã€‚</li>
<li>åç«¯æ¥å£æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦æ‰§è¡Œæ“ä½œâ€ï¼Œæ˜¯å®‰å…¨æ ¸å¿ƒï¼Œå¿…é¡»ç»å¯¹å¯é ã€‚</li>
</ul>
<h3 data-id="heading-37">2. å®‰å…¨æ€§åŸåˆ™</h3>
<ul>
<li>å‰ç«¯æƒé™æ˜¯ â€œä½“éªŒå±‚â€ï¼Œä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼›åç«¯æƒé™æ˜¯ â€œå®‰å…¨å±‚â€ï¼Œå¿…é¡»è¦†ç›–æ‰€æœ‰æ•æ„Ÿæ“ä½œã€‚</li>
<li>æ•æ„Ÿä¿¡æ¯ï¼ˆTokenã€æƒé™æ ‡è¯†ï¼‰éœ€åŠ å¯†å­˜å‚¨å’Œä¼ è¾“ï¼Œé˜²æ­¢æ³„éœ²ã€‚</li>
<li>æƒé™å˜æ›´éœ€å®æ—¶åŒæ­¥ï¼Œé¿å…æƒé™ä¸ä¸€è‡´å¯¼è‡´çš„å®‰å…¨éšæ‚£ã€‚</li>
</ul>
<h3 data-id="heading-38">3. å¯æ‰©å±•æ€§åŸåˆ™</h3>
<ul>
<li>é‡‡ç”¨è®¾è®¡æ¨¡å¼ï¼ˆå¦‚è´£ä»»é“¾ã€è£…é¥°å™¨ã€å•ä¾‹ï¼‰é™ä½ä»£ç è€¦åˆï¼Œä¾¿äºåæœŸæ‰©å±•æƒé™è§„åˆ™ã€‚</li>
<li>é¢„ç•™è‡ªå®šä¹‰æƒé™è§„åˆ™æ¥å£ï¼Œåº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆæƒé™ï¼‰ã€‚</li>
<li>æƒé™é…ç½®å¯è§†åŒ–ã€åŠ¨æ€åŒ–ï¼Œå‡å°‘å‰ç«¯å‘ç‰ˆé¢‘ç‡ï¼Œæå‡è¿è¥æ•ˆç‡ã€‚</li>
</ul>
<p>é¡¹ç›®ä¸­ï¼Œæƒé™è®¾è®¡å¹¶éä¸€æˆä¸å˜ï¼Œéœ€æ ¹æ®ä¸šåŠ¡è§„æ¨¡å’Œå®‰å…¨è¦æ±‚é€æ­¥è¿­ä»£ï¼šåˆæœŸå¯é‡‡ç”¨ â€œè§’è‰² + é™æ€æƒé™â€ï¼Œä¸­æœŸå¼•å…¥ â€œæƒé™ç  + åŠ¨æ€è·¯ç”±â€ï¼ŒåæœŸå‡çº§ä¸º â€œå¯è§†åŒ–é…ç½® + ç»†ç²’åº¦æ•°æ®æƒé™â€ï¼Œæœ€ç»ˆå®ç° â€œå®‰å…¨ã€çµæ´»ã€æ˜“ç»´æŠ¤â€ çš„æƒé™ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7577215663968026666</link>    <guid>https://juejin.cn/post/7577215663968026666</guid>    <pubDate>2025-11-27T10:31:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663968026666" data-draft-id="7577204540417753151" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-27T10:31:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œåˆå¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4081803083395527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4081803083395527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œåˆå¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:31:38.000Z" title="Thu Nov 27 2025 10:31:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»Ÿä¿¡æ¡Œé¢æ“ä½œç³»ç»Ÿä¸“ä¸šç‰ˆV20ï¼ˆ1070ï¼‰<br/>
Linux uos 5.10.97-arm64-desktop</p>
</blockquote>
<h3 data-id="heading-0">uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-c" lang="c">root@uos:/var/<span class="hljs-built_in">log</span>/cups<span class="hljs-meta"># cat /etc/cups/cupsd.conf </span>
#
# Configuration file <span class="hljs-keyword">for</span> the CUPS scheduler.  See <span class="hljs-string">"man cupsd.conf"</span> <span class="hljs-keyword">for</span> a
<span class="hljs-meta"># complete description of this file.</span>
#

# Log general information in error_log - change <span class="hljs-string">"warn"</span> to <span class="hljs-string">"debug"</span>
<span class="hljs-meta"># for troubleshooting...</span>
LogLevel warn
PageLogFormat

# Specifies the maximum size of the <span class="hljs-built_in">log</span> files before they are rotated.  The value <span class="hljs-string">"0"</span> disables <span class="hljs-built_in">log</span> rotation.
MaxLogSize <span class="hljs-number">0</span>

# Default error policy <span class="hljs-keyword">for</span> printers
ErrorPolicy retry-job

# Only listen <span class="hljs-keyword">for</span> connections from the local machine.
Listen localhost:<span class="hljs-number">631</span>
Listen /run/cups/cups.sock

# Show shared printers on the local network.
Browsing Yes
BrowseLocalProtocols dnssd

# Default authentication type, when authentication is required...
DefaultAuthType Basic

# Web interface setting...
WebInterface Yes

# Timeout after cupsd exits <span class="hljs-keyword">if</span> <span class="hljs-title function_">idle</span> <span class="hljs-params">(applied only <span class="hljs-keyword">if</span> cupsd runs on-demand - with -l)</span>
IdleExitTimeout 60

# Restrict access to the server...
&lt;Location /&gt;
  Order allow,deny
&lt;/Location&gt;

# Restrict access to the admin pages...
&lt;Location /admin&gt;
  Order allow,deny
&lt;/Location&gt;

# Restrict access to configuration files...
&lt;Location /admin/conf&gt;
  AuthType Default
  Require user @SYSTEM
  Order allow,deny
&lt;/Location&gt;

# Restrict access to <span class="hljs-built_in">log</span> files...
&lt;Location /admin/<span class="hljs-built_in">log</span>&gt;
  AuthType Default
  Require user @SYSTEM
  Order allow,deny
&lt;/Location&gt;

# Set the <span class="hljs-keyword">default</span> printer/job policies...
&lt;Policy <span class="hljs-keyword">default</span>&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit CUPS-Get-Document&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;

# Set the authenticated printer/job policies...
&lt;Policy authenticated&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    AuthType Default
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;

# Set the kerberized printer/job policies...
&lt;Policy kerberos&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    AuthType Negotiate
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;
    AuthType Negotiate
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    AuthType Negotiate
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;
root@uos:/var/<span class="hljs-built_in">log</span>/cups# 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576841976927567908</link>    <guid>https://juejin.cn/post/7576841976927567908</guid>    <pubDate>2025-11-26T08:25:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576841976927567908" data-draft-id="7576487832089804815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜"/> <meta itemprop="keywords" content="Android,HTML"/> <meta itemprop="datePublished" content="2025-11-26T08:25:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:25:44.000Z" title="Wed Nov 26 2025 08:25:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“æˆ‘ä»¬æƒ³è¦å¼€å‘ä¸€ä¸ªç”µå­ä¹¦é˜…è¯»å™¨æ—¶ï¼Œä¸å¯é¿å…åœ°ä¼šé‡åˆ° EPUB æ ¼å¼ã€‚</p>
<p>å…¶å®ï¼ŒEPUB å¹¶ä¸å¤æ‚ï¼Œåªè¦æŒæ¡äº† XML è§£æå’Œ HTML å¤„ç†ï¼Œå°±èƒ½å¤Ÿå†™å‡ºä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„è§£æå¼•æ“ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»æœ€åŸºç¡€çš„è§£æå·¥å…·å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">XmlPullParser</h2>
<p>EPUB çš„æ ¸å¿ƒå…ƒæ•°æ®æ–‡ä»¶ï¼ˆ<code>.opf</code>ï¼‰å’Œå®¹å™¨æè¿°æ–‡ä»¶ï¼ˆ<code>.xml</code>ï¼‰ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ XMLã€‚Android å®˜æ–¹æ¨èä½¿ç”¨ <code>XmlPullParser</code> æ¥è§£æå®ƒä»¬ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Pull è§£æï¼Ÿ</h3>
<p>Pull è§£æå°±æ˜¯ä¸€è¡Œè¡Œå¾€ä¸‹è¯»å–ï¼Œè¿™ç§æ–¹å¼å†…å­˜å ç”¨ä½ã€‚</p>
<p>ä¸ä¹‹ç›¸å¯¹çš„æœ‰ DOM è§£æï¼Œå®ƒæ˜¯ä¸€æ¬¡æ€§å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å¿«ï¼Œä½†å¯¹å†…å­˜æåº¦ä¸å‹å¥½ã€‚</p>
<h3 data-id="heading-3">äº‹ä»¶å¾ªç¯</h3>
<p><code>XmlPullParser</code> çš„å·¥ä½œæ¨¡å¼å…¶å®å°±æ˜¯ä¸€ä¸ª while å¾ªç¯ï¼Œä¸æ–­å¤„ç†å½“å‰çš„<strong>äº‹ä»¶ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>START_DOCUMENT</code>: å¼€å§‹</li>
<li><code>START_TAG</code>: è¯»åˆ°äº†å¼€å§‹æ ‡ç­¾</li>
<li><code>TEXT</code>: è¯»åˆ°äº†æ ‡ç­¾é‡Œçš„æ–‡å­—</li>
<li><code>END_TAG</code>: è¯»åˆ°äº†ç»“æŸæ ‡ç­¾</li>
<li><code>END_DOCUMENT</code>: ç»“æŸ</li>
</ul>
<h3 data-id="heading-4">å®æˆ˜</h3>
<p>äº†è§£å®Œä»¥ä¸Šå†…å®¹ï¼Œå°±å¯ä»¥å¼€å§‹è§£æä¸€æ®µ XML äº†ã€‚</p>
<p>ä»¥ä¸‹é¢è¿™æ®µ XML ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">age</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span>
</code></pre>
<blockquote>
<p>ä½œä¸º <code>student_data.xml</code> æ–‡ä»¶å­˜æ”¾åœ¨ <code>app/src/main/assets</code> ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<p>åœ¨ <code>MainActivity</code> ä¸­ä½¿ç”¨ <code>XmlPullParser</code> æ¥è§£æï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>, <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>)

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseStudentXml</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Student? = withContext(Dispatchers.IO) { <span class="hljs-comment">// å°†è€—æ—¶æ“ä½œæ”¾åœ¨ IO çº¿ç¨‹ä¸­</span>
    <span class="hljs-comment">// åˆ›å»º Pull è§£æå™¨</span>
    <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
    <span class="hljs-keyword">var</span> student: Student? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">try</span> {
        parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
        <span class="hljs-keyword">var</span> eventType = parser.eventType

        <span class="hljs-keyword">var</span> currentName = <span class="hljs-string">""</span>
        <span class="hljs-keyword">var</span> currentAge = <span class="hljs-number">0</span>

        Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"å¼€å§‹è§£æ XML æ–‡æ¡£..."</span>)
        <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
            <span class="hljs-keyword">when</span> (eventType) {
                XmlPullParser.START_TAG -&gt; {
                    <span class="hljs-comment">// è·å–æ ‡ç­¾å</span>
                    <span class="hljs-keyword">when</span> (parser.name) {
                        <span class="hljs-string">"student"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ student"</span>)
                        }
                        <span class="hljs-comment">// è·å–æ ‡ç­¾å†…å®¹, å¹¶ç§»åˆ°æ ‡ç­¾æœ«ä½</span>
                        <span class="hljs-string">"name"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ name"</span>)
                            currentName = parser.nextText()
                        }
                        <span class="hljs-string">"age"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ age"</span>)
                            currentAge = parser.nextText().toIntOrNull() ?: <span class="hljs-number">0</span>
                        }
                    }
                }
            }
            <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªäº‹ä»¶</span>
            eventType = parser.next()
        }

        student = Student(currentName, currentAge)
        Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£ææˆåŠŸ: <span class="hljs-variable">$student</span>"</span>)

    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Log.e(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£æå¤±è´¥"</span>, e)
    } <span class="hljs-keyword">finally</span> {
        inputStream.close()
    }

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> student
}


<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹</span>
lifecycleScope.launch {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"student_data.xml"</span>)
        <span class="hljs-keyword">val</span> student = parseStudentXml(inputStream)
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å¼€å§‹è§£æ XML æ–‡æ¡£...
é‡åˆ°æ ‡ç­¾ student
é‡åˆ°æ ‡ç­¾ name
é‡åˆ°æ ‡ç­¾ age
è§£ææˆåŠŸ: Student(<span class="hljs-attr">name</span>=å¼ ä¸‰, age=<span class="hljs-number">18</span>)
</code></pre>
<h3 data-id="heading-5">nextText() é™·é˜±</h3>
<p><code>nextText()</code> ä¼šè¯»å–å½“å‰æ ‡ç­¾çš„å†…å®¹ï¼Œå¹¶ç§»åŠ¨åˆ°æ ‡ç­¾æœ«å°¾ <code>END_TAG</code>ã€‚</p>
<ul>
<li>
<p>å¦‚æœæ ‡ç­¾å†…å®¹æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ç©ºä¸² ""ã€‚</p>
</li>
<li>
<p>å¦‚æœæ ‡ç­¾è¿˜åµŒå¥—äº†æ ‡ç­¾ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šè¿°çš„ XML å†…å®¹æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>å¼ <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>ä¸‰
    <span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">age</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span>
</code></pre>
<p>æ­¤æ—¶è¿è¡Œç¨‹åºï¼Œä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-less" lang="less">è§£æå¤±è´¥                                                        <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.xmlpull</span><span class="hljs-selector-class">.v1</span><span class="hljs-selector-class">.XmlPullParserException</span>: <span class="hljs-selector-tag">END_TAG</span> <span class="hljs-selector-tag">expected</span> (<span class="hljs-attribute">position</span>:START_TAG (empty) &lt;br&gt;<span class="hljs-variable">@2</span>:<span class="hljs-number">18</span> in java.io.InputStreamReader<span class="hljs-variable">@352bfed</span>) 
</code></pre>
<p>æ„æ€æ˜¯è¯´åœ¨æœŸæœ›æ‰¾åˆ°ä¸€ä¸ªç»“æŸæ ‡ç­¾æ—¶ï¼Œå´é‡åˆ°äº†ä¸€ä¸ªå¼€å§‹æ ‡ç­¾ <code>&lt;br</code>ã€‚ä½†æˆ‘ä»¬è®¤ä¸ºçš„ <code>&lt;br /&gt;</code> åªæ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œåº”è¯¥è¢«å½“ä½œæ–‡æœ¬å†…å®¹è¿›è¡Œå¤„ç†ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç† TEXT äº‹ä»¶ã€‚</p>
<blockquote>
<p>æ ‡ç­¾ä¹‹é—´çš„æ¢è¡Œç¬¦ä¹Ÿæ˜¯ä¸€ä¸ª TEXT äº‹ä»¶ã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ‰‹åŠ¨å¤„ç† TEXT äº‹ä»¶</h4>
<p>æ‰‹åŠ¨å¤„ç† <code>TEXT</code> äº‹ä»¶æ—¶ï¼Œä¸ºäº†è§£å†³ XML åµŒå¥—å¯¼è‡´çš„çŠ¶æ€ä¸¢å¤±é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ ˆæ¥ç»´æŠ¤çŠ¶æ€ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ <code>ArrayDeque</code> æ¥æ›¿æ¢ <code>Stack</code>ï¼Œæ€§èƒ½æ›´å¥½ã€‚</p>
<p>é€»è¾‘æµç¨‹ï¼š</p>
<ul>
<li>
<p><strong>START_TAG</strong>ï¼šå°†å½“å‰æ ‡ç­¾åå‹å…¥çŠ¶æ€æ ˆä¸­ã€‚</p>
</li>
<li>
<p><strong>TEXT</strong>ï¼šæ£€æŸ¥æ ˆé¡¶å…ƒç´ ï¼Œå¦‚æœæ˜¯ç›®æ ‡æ ‡ç­¾ï¼Œå°±æå–å¹¶æ‹¼æ¥æ–‡æœ¬ï¼›å¦‚æœæ˜¯ç›®æ ‡æ ‡ç­¾çš„å­æ ‡ç­¾ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ¤æ–­æ˜¯å¦éœ€è¦æå–ã€‚</p>
</li>
<li>
<p><strong>END_TAG</strong>ï¼šå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå›åˆ°æœ€è¿‘ä¸€å±‚çš„çˆ¶æ ‡ç­¾çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<p>ä»£ç å®ç°ï¼š<strong>åŸºäºæ ˆçš„çŠ¶æ€æœº</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseStudentXmlManual</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Student? =
    withContext(Dispatchers.IO) {
        <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
        <span class="hljs-keyword">var</span> student: Student? = <span class="hljs-literal">null</span>

        <span class="hljs-comment">// ç”¨ ArrayDeque ä»£æ›¿ Stack</span>
        <span class="hljs-keyword">val</span> stateStack = ArrayDeque&lt;String&gt;()

        <span class="hljs-keyword">try</span> {
            parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
            <span class="hljs-keyword">var</span> eventType = parser.eventType
            <span class="hljs-keyword">val</span> sbName = StringBuilder()
            <span class="hljs-keyword">var</span> age = <span class="hljs-number">0</span>

            <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
                <span class="hljs-keyword">when</span> (eventType) {
                    XmlPullParser.START_TAG -&gt; {
                        <span class="hljs-keyword">val</span> tagName = parser.name
                        <span class="hljs-comment">// å­˜å…¥æ–°çŠ¶æ€</span>
                        stateStack.addLast(tagName)
                    }

                    XmlPullParser.TEXT -&gt; {
                        <span class="hljs-comment">// è·å–å½“å‰æ–‡æœ¬å†…å®¹</span>
                        <span class="hljs-keyword">val</span> text = parser.text
                        <span class="hljs-keyword">if</span> (!text.isNullOrBlank()) {
                            <span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶ï¼Œå†³å®šäº†å½“å‰æ–‡æœ¬å±äºè°</span>
                            <span class="hljs-keyword">if</span> (stateStack.isNotEmpty()) {
                                <span class="hljs-keyword">val</span> currentTag = stateStack.last() <span class="hljs-comment">// è·å–å½“å‰æ‰€å¤„çš„æœ€è¿‘ä¸€å±‚æ ‡ç­¾</span>

                                <span class="hljs-keyword">when</span> (currentTag) {
                                    <span class="hljs-string">"name"</span> -&gt; sbName.append(text.trim())
                                    <span class="hljs-string">"br"</span> -&gt; { <span class="hljs-comment">/* å¿½ç•¥ */</span>
                                    }

                                    <span class="hljs-string">"age"</span> -&gt; age = text.trim().toIntOrNull() ?: <span class="hljs-number">0</span>
                                }
                            }
                        }
                    }

                    XmlPullParser.END_TAG -&gt; {
                        <span class="hljs-comment">// æ¢å¤åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€</span>
                        <span class="hljs-keyword">if</span> (stateStack.isNotEmpty()) {
                            stateStack.removeLast()
                        }
                    }
                }
                eventType = parser.next()
            }

            <span class="hljs-keyword">val</span> name: String = sbName.toString()
            student = Student(name, age)
            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£ææˆåŠŸ: <span class="hljs-variable">$student</span>"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£æå¤±è´¥"</span>, e)
        } <span class="hljs-keyword">finally</span> {
            inputStream.close()
        }

        <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> student
    }
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">è§£ææˆåŠŸ: Student(<span class="hljs-attr">name</span>=å¼ ä¸‰, age=<span class="hljs-number">18</span>)
</code></pre>
<h2 data-id="heading-7">Jsoup</h2>
<p>EPUB çš„æ­£æ–‡å†…å®¹å…¶å®å°±æ˜¯ç½‘é¡µï¼ˆXHTML/HTMLï¼‰ã€‚å¯¹äºè§£æ HTMLï¼Œæˆ‘ä»¬ä¸ä¼šå»ä½¿ç”¨ <code>XmlPullParser</code>ï¼Œå› ä¸ºå®ƒåµŒå¥—å¾ˆå¤æ‚ï¼Œå¹¶ä¸”æ ‡ç­¾å¸¸å¸¸ä¸é—­åˆã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Jsoup æ¥è§£æã€‚</p>
<p>å®ƒèƒ½å°†æ‚ä¹±çš„ HTML ä¿®æ­£ä¸ºæ ‡å‡†çš„ DOM æ ‘ï¼Œå¹¶ä¸”æœ‰ç€ CSS é€‰æ‹©å™¨ï¼šå¯ä»¥åƒå†™ CSS æ ·å¼ä¸€æ ·æŸ¥æ‰¾å…ƒç´ ã€‚</p>
<h3 data-id="heading-8">CSS é€‰æ‹©å™¨</h3>
<p>æå–æ•°æ®éå¸¸å®¹æ˜“ï¼š</p>
<ul>
<li>
<p>é€‰å–æ‰€æœ‰ä¸€çº§æ ‡é¢˜ï¼š<code>doc.select("h1")</code>ã€‚</p>
</li>
<li>
<p>é€‰å–æ‰€æœ‰å¸¦å›¾ç‰‡è·¯å¾„çš„ img æ ‡ç­¾ï¼š<code>doc.select("img[src]")</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">å®æˆ˜</h3>
<p>å‡è®¾è¦è§£æå¦‚ä¸‹ HTML æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æå–æ ‡é¢˜ã€ä½œè€…å’Œæ­£æ–‡å†…å®¹ï¼Œå»é™¤æ‰æ­£æ–‡ä¸­çš„å¹¿å‘Šã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Android æ€§èƒ½ä¼˜åŒ–å®æˆ˜ - æŠ€æœ¯å‘¨åˆŠ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nav"</span>&gt;</span>é¦–é¡µ &gt; Android &gt; æ€§èƒ½ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post-title"</span>&gt;</span>Android å†…å­˜ä¼˜åŒ–ï¼šä»å…¥é—¨åˆ°ç²¾é€š<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"meta-info"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä½œè€…ï¼šAndroidä¸“å®¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é˜…è¯»ï¼š1024<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post-content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                    åœ¨ Android å¼€å‘ä¸­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å†…å­˜æ³„æ¼<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad-banner"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹¿å‘Šï¼šç‚¹å‡»é¢†å–é«˜è–ªé¢è¯•é¢˜åº“ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                    ä½¿ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://square.github.io/leakcanary/"</span>&gt;</span>LeakCanary<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½ <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>Activity<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> å’Œ <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>Fragment<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> çš„æ³„æ¼ç‚¹ã€‚
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Copyright Â© 2022 æŠ€æœ¯åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>é¦–å…ˆå¼•å…¥ä¾èµ–ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    implementation(<span class="hljs-string">"org.jsoup:jsoup:1.21.2"</span>)
}
</code></pre>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Blog</span>(
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> author: String,
    <span class="hljs-keyword">val</span> content: String,
)

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseHtmlContent</span><span class="hljs-params">(
    inputStream: <span class="hljs-type">InputStream</span>
)</span></span> = withContext(Dispatchers.IO) {
    <span class="hljs-comment">// è§£æ HTML ä¸º Document å¯¹è±¡</span>
    <span class="hljs-keyword">val</span> doc: Document = Jsoup.parse(inputStream, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">""</span>)

    <span class="hljs-comment">// æå–æ ‡é¢˜</span>
    <span class="hljs-keyword">val</span> title = doc.select(<span class="hljs-string">"h1.post-title"</span>).text()

    <span class="hljs-comment">// æå–ä½œè€…</span>
    <span class="hljs-keyword">val</span> author = doc.selectFirst(<span class="hljs-string">"div.meta-info"</span>)?.text()
            ?.substringAfter(<span class="hljs-string">"ä½œè€…ï¼š"</span>)
            ?.substringBefore(<span class="hljs-string">"é˜…è¯»ï¼š"</span>)
            ?.trim()
            ?: <span class="hljs-string">"æœªçŸ¥"</span>

    <span class="hljs-keyword">val</span> contentDiv = doc.select(<span class="hljs-string">"div.post-content"</span>)

    <span class="hljs-comment">// å…ˆå»é™¤å¹¿å‘ŠèŠ‚ç‚¹</span>
    contentDiv.select(<span class="hljs-string">".ad-banner"</span>).remove()

    <span class="hljs-comment">// è·å–å†…å®¹</span>
    <span class="hljs-keyword">val</span> content = contentDiv.text()

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Blog(title, author, content)
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
lifecycleScope.launch(Dispatchers.IO) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"blog.html"</span>)
        <span class="hljs-keyword">val</span> blog = parseHtmlContent(inputStream)
        Log.d(<span class="hljs-string">"EpubTest"</span>, <span class="hljs-string">"Blog: <span class="hljs-variable">$blog</span>"</span>)
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Blog: Blog(<span class="hljs-attr">title</span>=Android å†…å­˜ä¼˜åŒ–ï¼šä»å…¥é—¨åˆ°ç²¾é€š, author=Androidä¸“å®¶, content=åœ¨ Android å¼€å‘ä¸­ï¼Œå†…å­˜æ³„æ¼æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚ ä½¿ç”¨ LeakCanary å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½ Activity å’Œ Fragment çš„æ³„æ¼ç‚¹ã€‚ åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚)
</code></pre>
<h3 data-id="heading-10">DOM éå†ä¸èŠ‚ç‚¹æ“ä½œ</h3>
<p>ç›´æ¥ä½¿ç”¨ <code>text()</code>ï¼Œç¡®å®å¾ˆæ–¹ä¾¿ï¼Œå®ƒèƒ½è‡ªåŠ¨å¤„ç†æ¢è¡Œã€‚ä½†å®ƒä¹Ÿä¼šå°† <code>&lt;b&gt;</code>, <code>&lt;a&gt;</code> ç­‰æ ‡ç­¾å‰¥ç¦»ï¼Œå¯¼è‡´åŠ ç²—ã€æ–œä½“ç­‰æ ·å¼ä¹Ÿéƒ½ä¸¢å¤±äº†ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨éå† DOM æ ‘æ¥æ‰‹åŠ¨å¤„ç†ç‰¹å®šæ ‡ç­¾ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseHtmlContent</span><span class="hljs-params">(
    inputStream: <span class="hljs-type">InputStream</span>
)</span></span> = withContext(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> doc: Document = Jsoup.parse(inputStream, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> title = doc.select(<span class="hljs-string">"h1.post-title"</span>).text()

    <span class="hljs-comment">// æå–ä½œè€…</span>
    <span class="hljs-keyword">val</span> author = doc.selectFirst(<span class="hljs-string">"div.meta-info"</span>)?.text()
        ?.substringAfter(<span class="hljs-string">"ä½œè€…ï¼š"</span>)
        ?.substringBefore(<span class="hljs-string">"é˜…è¯»ï¼š"</span>)
        ?.trim()
        ?: <span class="hljs-string">"æœªçŸ¥"</span>

    <span class="hljs-keyword">val</span> sbContent = StringBuilder()

    <span class="hljs-keyword">val</span> contentDiv = doc.select(<span class="hljs-string">"div.post-content"</span>).first()
    <span class="hljs-comment">// ç§»é™¤å¹¿å‘ŠèŠ‚ç‚¹</span>
    contentDiv?.select(<span class="hljs-string">".ad-banner"</span>)?.remove()

    contentDiv?.let {
        <span class="hljs-comment">// éå†å®¹å™¨çš„å­èŠ‚ç‚¹</span>
        <span class="hljs-keyword">for</span> (node <span class="hljs-keyword">in</span> it.childNodes()) {
            traverseNode(node, sbContent)
        }
    }
    <span class="hljs-keyword">val</span> content = sbContent.toString().trim()

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Blog(title, author, content)
}

<span class="hljs-comment">/**
 * é€’å½’éå†èŠ‚ç‚¹æ ‘
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">traverseNode</span><span class="hljs-params">(
    node: <span class="hljs-type">Node</span>,
    sb: <span class="hljs-type">StringBuilder</span>
)</span></span> {
    <span class="hljs-keyword">when</span> (node) {
        <span class="hljs-comment">// çº¯æ–‡æœ¬èŠ‚ç‚¹</span>
        <span class="hljs-keyword">is</span> TextNode -&gt; {
            <span class="hljs-keyword">val</span> text = node.text().trim()
            <span class="hljs-keyword">if</span> (text.isNotBlank()) {
                sb.append(text)
            }
        }
        <span class="hljs-comment">// å…ƒç´ èŠ‚ç‚¹</span>
        <span class="hljs-keyword">is</span> Element -&gt; {
            <span class="hljs-keyword">when</span> (node.tagName()) {
                <span class="hljs-string">"p"</span> -&gt; { <span class="hljs-comment">// æ®µè½</span>
                    sb.append(<span class="hljs-string">"\n"</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                }

                <span class="hljs-string">"div"</span>, <span class="hljs-string">"span"</span> -&gt; { <span class="hljs-comment">// å®¹å™¨</span>
                    node.childNodes().forEach { traverseNode(it, sb) }
                }

                <span class="hljs-string">"b"</span>, <span class="hljs-string">"strong"</span> -&gt; {
                    sb.append(<span class="hljs-string">"[åŠ ç²—: "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-string">"i"</span>, <span class="hljs-string">"em"</span> -&gt; {
                    sb.append(<span class="hljs-string">"[æ–œä½“: "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-string">"a"</span> -&gt; {
                    <span class="hljs-keyword">val</span> href = node.attr(<span class="hljs-string">"href"</span>)
                    sb.append(<span class="hljs-string">"[é“¾æ¥(<span class="hljs-variable">$href</span>): "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-keyword">else</span> -&gt; {}
            }
        }
    }
}
</code></pre>
<p>è§£æå‡ºçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-css" lang="css">åœ¨ Android å¼€å‘ä¸­ï¼Œ<span class="hljs-selector-attr">[åŠ ç²—: å†…å­˜æ³„æ¼]</span>æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚
ä½¿ç”¨<span class="hljs-selector-attr">[é“¾æ¥(https://square.github.io/leakcanary/): LeakCanary]</span>å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½<span class="hljs-selector-attr">[æ–œä½“: Activity]</span>å’Œ<span class="hljs-selector-attr">[æ–œä½“: Fragment]</span>çš„æ³„æ¼ç‚¹ã€‚
åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚
</code></pre>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>SpannableStringBuilder</code> æ¥æ‹¼æ¥ç»“æœï¼Œæ¯”å¦‚é‡åˆ° <code>&lt;b&gt;</code> æ ‡ç­¾æ—¶åº”ç”¨ <code>StyleSpan(Typeface.BOLD)</code>ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åœ¨ UI ç»„ä»¶ä¸­æ˜¾ç¤ºå¯Œæ–‡æœ¬æ•ˆæœã€‚</p>
</blockquote>
<h2 data-id="heading-11">EPUB çš„ç»„æˆ</h2>
<p>EPUB ç”µå­ä¹¦æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ZIP å‹ç¼©åŒ…ï¼Œä½ å¯ä»¥å°†å…¶åç¼€æ”¹ä¸º .zip å¹¶è§£å‹ï¼ŒæŸ¥çœ‹å…¶ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">eBook</span>/
â”œâ”€â”€ <span class="hljs-selector-tag">META-INF</span>/
â”‚   â””â”€â”€ <span class="hljs-selector-tag">container</span><span class="hljs-selector-class">.xml</span>      (å…¥å£)
â”œâ”€â”€ <span class="hljs-selector-tag">OEBPS</span>/                 
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">content</span><span class="hljs-selector-class">.opf</span>        (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">nav</span><span class="hljs-selector-class">.xhtml</span>          (å¯¼èˆª)  
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">toc</span><span class="hljs-selector-class">.ncx</span>            (ç›®å½•)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Styles</span>/            (æ ·å¼)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Text</span>/              (æ­£æ–‡)
â”‚   â””â”€â”€ <span class="hljs-selector-tag">Images</span>/            (å›¾ç‰‡)
â””â”€â”€ <span class="hljs-selector-tag">mimetype</span>               (èº«ä»½æ ‡è¯†)
</code></pre>
<h3 data-id="heading-12">å…³é”®æ–‡ä»¶ï¼šMETA-INF/container.xml</h3>
<p>å®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰æˆ‘ä»¬æ ¸å¿ƒæè¿°æ–‡ä»¶ï¼ˆ.opfï¼‰çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"OEBPS/content.opf"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬åªéœ€ä½¿ç”¨ <code>XmlPullParser</code> è¯»å– <code>full-path</code> å±æ€§ï¼Œå°±èƒ½æ‹¿åˆ°æ–‡ä»¶è·¯å¾„ "OEBPS/content.opf"ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseContainer</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: String? = withContext(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> xmlPullParser = Xml.newPullParser()

    xmlPullParser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
    <span class="hljs-keyword">var</span> eventType = xmlPullParser.eventType

    <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
        <span class="hljs-keyword">when</span> (eventType) {
            XmlPullParser.START_TAG -&gt; {
                <span class="hljs-keyword">val</span> tagName = xmlPullParser.name
                <span class="hljs-keyword">if</span> (tagName == <span class="hljs-string">"rootfile"</span>) {
                    <span class="hljs-keyword">val</span> rootFilePath = xmlPullParser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"full-path"</span>)
                    Log.d(<span class="hljs-string">"ContainerRootFilePath"</span>, <span class="hljs-string">"rootFilePath: <span class="hljs-variable">$rootFilePath</span>"</span>)
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> rootFilePath
                }
            }
        }
        eventType = xmlPullParser.next()
    }
    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rootFilePath: OEBPS/content.opf
</code></pre>
<h3 data-id="heading-13">å…³é”®æ–‡ä»¶ï¼šopf æ–‡ä»¶</h3>
<p>OPF æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ª XMLï¼Œå®ƒå­˜ç€ä¹¦ç±çš„é‡è¦ä¿¡æ¯ï¼š</p>
<ul>
<li><strong><code>&lt;metadata&gt;</code></strong>ï¼šå…ƒæ•°æ®ã€‚ä¹¦åã€ä½œè€…ã€æ ‡è¯†ç¬¦ã€ç®€ä»‹ã€è¯­è¨€ã€ç®€ä»‹ã€å‡ºç‰ˆç¤¾ã€åˆ†ç±»ã€å°é¢ç­‰ã€‚</li>
<li><strong><code>&lt;mainfest&gt;</code></strong>ï¼šèµ„æºæ¸…å•ã€‚ä¹¦ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¦åœ¨æ­¤è¿›è¡Œæ³¨å†Œï¼Œæ¯ä¸€é¡¹ï¼ˆ<code>item</code>ï¼‰éƒ½æœ‰ç€ <code>href</code>ã€<code>id</code>ã€<code>media-type</code>ã€‚</li>
<li><strong><code>spine</code></strong>ï¼šä¹¦è„Šã€‚å®ƒå¼•ç”¨äº†èµ„æºæ¸…å•é‡Œé¢çš„ idï¼Œå®šä¹‰äº†ä¹¦çš„é˜…è¯»é¡ºåºã€‚</li>
</ul>
<h4 data-id="heading-14">OPF ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.idpf.org/2007/opf"</span> <span class="hljs-attr">unique-identifier</span>=<span class="hljs-string">"BookId"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"3.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">metadata</span> <span class="hljs-attr">xmlns:dc</span>=<span class="hljs-string">"http://purl.org/dc/elements/1.1/"</span> <span class="hljs-attr">xmlns:opf</span>=<span class="hljs-string">"http://www.idpf.org/2007/opf"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:title</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰ ç¬¬ä¸€å· Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">dc:title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:creator</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-2"</span>&gt;</span>ä¸ƒèœãªãª<span class="hljs-tag">&lt;/<span class="hljs-name">dc:creator</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:creator</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-3"</span>&gt;</span>Parum<span class="hljs-tag">&lt;/<span class="hljs-name">dc:creator</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span>&gt;</span>calibre:19525<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span>&gt;</span>uuid:77842cae-a0d7-4144-9f4d-9ca1a73b2129<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BookId"</span> <span class="hljs-attr">opf:scheme</span>=<span class="hljs-string">"UUID"</span>&gt;</span>urn:uuid:52746820-f83f-11ee-bf6c-08bfb888ec3a<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:source</span>&gt;</span>https://www.wenku8.cc/book/3103.htm<span class="hljs-tag">&lt;/<span class="hljs-name">dc:source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:language</span>&gt;</span>zh<span class="hljs-tag">&lt;/<span class="hljs-name">dc:language</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:contributor</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-1"</span>&gt;</span>calibre (7.0.0) [https://calibre-ebook.com]<span class="hljs-tag">&lt;/<span class="hljs-name">dc:contributor</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:description</span>&gt;</span>åœ¨æŸä¸€æ‰€ä¹¡æ‘å›½ä¸­ï¼Œä¸€å¯¹ç”·å¥³å‘å½¼æ­¤ç«‹ä¸‹æ°¸æ’å‹æƒ…çš„èª“è¨€ã€‚
æœç€åŒä¸€ä¸ªæ¢¦æƒ³å‰è¿›ï¼Œæˆä¸ºå‘½è¿å…±åŒä½“çš„ä¸¤äººä¹‹é—´â”€â”€
å…³ç³»å¹¶æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„å‘å±•ï¼Œå°±è¿™ä¹ˆåº¦è¿‡äº†ä¸¤å¹´çš„å²æœˆâ€¦â€¦ï¼
è‡³ä»Šéƒ½è¿˜æ²¡è°ˆè¿‡åˆæ‹çš„ High å’–å¥³å­â”€â”€çŠ¬å†¢æ—¥è‘µï¼Œ
ä»¥åŠçƒ­çˆ±èŠ±å‰çš„æ¤ç‰©ç”·å­â”€â”€å¤ç›®æ‚ å®‡ï¼Œ
å°±ç®—å‡ä¸Šé«˜ä¸­äºŒå¹´çº§ï¼Œè¿˜æ˜¯ä¸€æ ·åœ¨åªæœ‰ä¸¤äººçš„å›­è‰ºç¤¾ä¸­ï¼Œå¹³å’Œåœ°å½“ç€æŒšå‹ã€‚
ç„¶è€Œè¿™æ—¶ï¼Œæ‚ å®‡è·Ÿåˆæ‹å¯¹è±¡é‡é€¢ï¼Œä½¿å¾—ä¸¤äººä¹‹é—´çš„å…³ç³»å¼€å§‹å¤±æ§ï¼Ÿ
ç©¶ç«Ÿã€Œå·²ç»æ‡‚å¾—æ‹æ…•ä¹‹å¿ƒã€çš„æ—¥è‘µï¼Œèƒ½ä¸èƒ½æ‘†è„±ã€Œç†æƒ³æŒšå‹ã€çš„èº«ä»½å‘¢ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">dc:description</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:publisher</span>&gt;</span>ç”µå‡»æ–‡åº“<span class="hljs-tag">&lt;/<span class="hljs-name">dc:publisher</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ ¡å›­<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>é’æ˜¥<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ‹çˆ±<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>åå®«<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ¬¢ä¹å‘<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"title-type"</span>&gt;</span>main<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰ ç¬¬ä¸€å· Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cover"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"img157909.jpg"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-1"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>bkp<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-2"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>aut<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-2"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>ä¸ƒèœãªãª<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-3"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>aut<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-3"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>Parum<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"belongs-to-collection"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-4"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-4"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"collection-type"</span>&gt;</span>series<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-4"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"group-position"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">metadata</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/Cover.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Cover.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/chapter0.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chapter0.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/chapter1.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chapter1.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/Credits.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Credits.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nav"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"nav.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span> <span class="hljs-attr">properties</span>=<span class="hljs-string">"nav"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"toc.ncx"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ncxuks"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/x-dtbncx+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Styles/style.css"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"style.css"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"text/css"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Images/157909.jpg"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img157909.jpg"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"image/jpeg"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Images/157910.jpg"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img157910.jpg"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"image/jpeg"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">spine</span> <span class="hljs-attr">toc</span>=<span class="hljs-string">"ncxuks"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"Cover.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"chapter0.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"chapter1.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"Credits.xhtml"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">spine</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">package</span>&gt;</span>
</code></pre>
<p>å®šä¹‰æ•°æ®ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ä¹¦ç±å…ƒæ•°æ®
 */</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookMetadata</span>(
    <span class="hljs-keyword">val</span> title: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> authors: List&lt;String&gt; = emptyList(),
    <span class="hljs-keyword">val</span> description: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> language: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> cover: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> publisher: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> categories: List&lt;String&gt; = emptyList(),
)

<span class="hljs-comment">/**
 * ä¹¦ç±ç›®å½•é¡ºåº
 */</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookSpineItem</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> href: String,
    <span class="hljs-keyword">val</span> mediaType: String,
)

<span class="hljs-comment">// ä¸´æ—¶å­˜å‚¨ manifest æ•°æ®</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ManifestItem</span>(<span class="hljs-keyword">val</span> href: String, <span class="hljs-keyword">val</span> mediaType: String)
</code></pre>
<p>å› ä¸ºå…ƒæ•°æ®å°é¢å’Œä¹¦è„Šéƒ½ä½¿ç”¨äº† ID å¼•ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè§£æ <code>Manifest</code>ï¼Œæ„å»ºå‡ºä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå†æ¥è§£æ <code>Metadata</code> å’Œ <code>Spine</code>ï¼Œè¿™æ ·æ›´åŠ æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseOpf</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Pair&lt;BookMetadata, List&lt;BookSpineItem&gt;&gt; {
    <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
    parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
    <span class="hljs-comment">// å¼€å¯å‘½åç©ºé—´å¤„ç†ï¼Œè¿™æ · parser.name ä¼šè¿”å› "title" è€Œä¸æ˜¯ "dc:title"ï¼Œä¸åŒ…å« dc: å‰ç¼€</span>
    parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, <span class="hljs-literal">true</span>)

    <span class="hljs-keyword">var</span> eventType = parser.eventType

    <span class="hljs-comment">// æ˜ å°„è¡¨ï¼šID -&gt; ManifestItem</span>
    <span class="hljs-keyword">val</span> manifestMap = mutableMapOf&lt;String, ManifestItem&gt;()

    <span class="hljs-comment">// ä¹¦ç±å…ƒæ•°æ®</span>
    <span class="hljs-keyword">var</span> title = <span class="hljs-string">""</span>
    <span class="hljs-keyword">val</span> authors = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">var</span> description = <span class="hljs-string">""</span>
    <span class="hljs-keyword">var</span> language = <span class="hljs-string">""</span>
    <span class="hljs-keyword">var</span> publisher = <span class="hljs-string">""</span>
    <span class="hljs-keyword">val</span> categories = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">var</span> coverId = <span class="hljs-string">""</span> <span class="hljs-comment">// å°é¢ ID</span>

    <span class="hljs-comment">// è„Šéª¨åˆ—è¡¨ï¼šåªå­˜ ID å¼•ç”¨ï¼Œç¨åè§£æ</span>
    <span class="hljs-keyword">val</span> spineIdRefs = mutableListOf&lt;String&gt;()

    <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
        <span class="hljs-keyword">when</span> (eventType) {
            XmlPullParser.START_TAG -&gt; {
                <span class="hljs-keyword">val</span> tagName = parser.name

                <span class="hljs-keyword">when</span> (tagName) {
                    <span class="hljs-comment">// å¤„ç†å…ƒæ•°æ® (Metadata)</span>
                    <span class="hljs-string">"title"</span> -&gt; title = safeNextText(parser)
                    <span class="hljs-string">"creator"</span> -&gt; authors.add(safeNextText(parser))
                    <span class="hljs-string">"description"</span> -&gt; description = safeNextText(parser)
                    <span class="hljs-string">"language"</span> -&gt; language = safeNextText(parser)
                    <span class="hljs-string">"publisher"</span> -&gt; publisher = safeNextText(parser)
                    <span class="hljs-string">"subject"</span> -&gt; categories.add(safeNextText(parser))

                    <span class="hljs-string">"meta"</span> -&gt; {
                        <span class="hljs-comment">// å¤„ç†å°é¢ï¼š&lt;meta name="cover" content="img157909.jpg"/&gt;</span>
                        <span class="hljs-keyword">val</span> nameAttr = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"name"</span>)
                        <span class="hljs-keyword">if</span> (nameAttr == <span class="hljs-string">"cover"</span>) {
                            coverId = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"content"</span>)
                        }
                    }

                    <span class="hljs-comment">// å¤„ç†æ¸…å• (Manifest)</span>
                    <span class="hljs-string">"item"</span> -&gt; {
                        <span class="hljs-comment">// &lt;item id="..." href="..." media-type="..."/&gt;</span>
                        <span class="hljs-keyword">val</span> id = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"id"</span>)
                        <span class="hljs-keyword">val</span> href = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"href"</span>)
                        <span class="hljs-keyword">val</span> mediaType = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"media-type"</span>)

                        <span class="hljs-keyword">if</span> (id != <span class="hljs-literal">null</span> &amp;&amp; href != <span class="hljs-literal">null</span> &amp;&amp; mediaType != <span class="hljs-literal">null</span>) {
                            manifestMap[id] = ManifestItem(href, mediaType)
                        }
                    }

                    <span class="hljs-comment">// --- 3. å¤„ç†è„Šéª¨ (Spine) ---</span>
                    <span class="hljs-string">"itemref"</span> -&gt; {
                        <span class="hljs-comment">// &lt;itemref idref="..."/&gt;</span>
                        <span class="hljs-keyword">val</span> idref = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"idref"</span>)
                        <span class="hljs-keyword">if</span> (idref != <span class="hljs-literal">null</span>) {
                            spineIdRefs.add(idref)
                        }
                    }
                }
            }
        }
        eventType = parser.next()
    }


    <span class="hljs-comment">// è§£æå°é¢è·¯å¾„ï¼šåˆ©ç”¨ coverId ä» manifestMap æŸ¥æ‰¾çœŸå®è·¯å¾„</span>
    <span class="hljs-keyword">val</span> finalCoverPath = coverId.let { id -&gt;
        manifestMap[id]?.href
    } ?: <span class="hljs-string">""</span>

    <span class="hljs-keyword">val</span> metadata = BookMetadata(
        title = title,
        authors = authors,
        description = description,
        language = language,
        cover = finalCoverPath, <span class="hljs-comment">// çœŸå®è·¯å¾„</span>
        publisher = publisher,
        categories = categories
    )

    <span class="hljs-keyword">val</span> bookSpineItems = spineIdRefs.mapNotNull { idref -&gt;
        <span class="hljs-keyword">val</span> item = manifestMap[idref]
        <span class="hljs-keyword">if</span> (item != <span class="hljs-literal">null</span>) {
            BookSpineItem(
                id = idref,
                href = item.href,
                mediaType = item.mediaType
            )
        } <span class="hljs-keyword">else</span> {
            Log.w(<span class="hljs-string">"OpfParser"</span>, <span class="hljs-string">"Spine item '<span class="hljs-variable">$idref</span>' not found in manifest."</span>)
            <span class="hljs-literal">null</span>
        }
    }

    <span class="hljs-keyword">return</span> Pair(metadata, bookSpineItems)
}

<span class="hljs-comment">// é˜²æ­¢ç©ºæ ‡ç­¾å¯¼è‡´å¼‚å¸¸</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">safeNextText</span><span class="hljs-params">(parser: <span class="hljs-type">XmlPullParser</span>)</span></span>: String {
    <span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>
    <span class="hljs-keyword">if</span> (parser.next() == XmlPullParser.TEXT) {
        result = parser.text
        parser.nextTag() <span class="hljs-comment">// ç§»è‡³ END_TAG</span>
    }
    <span class="hljs-keyword">return</span> result
}
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch(Dispatchers.IO) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"OEBPS/content.opf"</span>)

        <span class="hljs-keyword">val</span> (metadata, spine) = parseOpf(inputStream)

        println(<span class="hljs-string">"=== ä¹¦ç±ä¿¡æ¯ ==="</span>)
        println(<span class="hljs-string">"æ ‡é¢˜: <span class="hljs-subst">${metadata.title}</span>"</span>)
        println(<span class="hljs-string">"ä½œè€…: <span class="hljs-subst">${metadata.authors}</span>"</span>)
        println(<span class="hljs-string">"å°é¢è·¯å¾„: <span class="hljs-subst">${metadata.cover}</span>"</span>)
        println(<span class="hljs-string">"ç®€ä»‹: <span class="hljs-subst">${metadata.description.take(<span class="hljs-number">100</span>)}</span>..."</span>)

        println(<span class="hljs-string">"\n=== ç« èŠ‚åˆ—è¡¨ (Spine) ==="</span>)
        spine.forEach { item -&gt;
            println(<span class="hljs-string">"ID: <span class="hljs-subst">${item.id.padEnd(<span class="hljs-number">15</span>)}</span> | Type: <span class="hljs-subst">${item.mediaType.padEnd(<span class="hljs-number">25</span>)}</span> | Path: <span class="hljs-subst">${item.href}</span>"</span>)
        }
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">===</span> <span class="hljs-string">ä¹¦ç±ä¿¡æ¯</span> <span class="hljs-string">===</span>
<span class="hljs-string">æ ‡é¢˜:</span> <span class="hljs-string">ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰</span> <span class="hljs-string">ç¬¬ä¸€å·</span> <span class="hljs-string">Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ</span>
<span class="hljs-string">ä½œè€…:</span> [<span class="hljs-string">ä¸ƒèœãªãª</span>, <span class="hljs-string">Parum</span>]
<span class="hljs-string">å°é¢è·¯å¾„:</span> <span class="hljs-string">Images/157909.jpg</span>
<span class="hljs-string">ç®€ä»‹:</span> <span class="hljs-string">åœ¨æŸä¸€æ‰€ä¹¡æ‘å›½ä¸­ï¼Œä¸€å¯¹ç”·å¥³å‘å½¼æ­¤ç«‹ä¸‹æ°¸æ’å‹æƒ…çš„èª“è¨€ã€‚</span>
<span class="hljs-string">æœç€åŒä¸€ä¸ªæ¢¦æƒ³å‰è¿›ï¼Œæˆä¸ºå‘½è¿å…±åŒä½“çš„ä¸¤äººä¹‹é—´â”€â”€</span>
<span class="hljs-string">å…³ç³»å¹¶æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„å‘å±•ï¼Œå°±è¿™ä¹ˆåº¦è¿‡äº†ä¸¤å¹´çš„å²æœˆâ€¦â€¦ï¼</span>
<span class="hljs-string">è‡³ä»Šéƒ½è¿˜æ²¡è°ˆè¿‡åˆæ‹çš„</span> <span class="hljs-string">High</span> <span class="hljs-string">å’–å¥³å­â”€...</span>
<span class="hljs-string">===</span> <span class="hljs-string">ç« èŠ‚åˆ—è¡¨</span> <span class="hljs-string">(Spine)</span> <span class="hljs-string">===</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">Cover.xhtml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/Cover.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter0.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter0.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter1.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter1.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter2.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter2.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter3.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter3.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter4.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter4.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter5.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter5.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter6.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter6.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter7.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter7.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">Credits.xhtml</span>   <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/Credits.xhtml</span>
</code></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>å…³äºè§£æçš„å†…å®¹å°±åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ EPUB é˜…è¯»å™¨çš„è§£ææµç¨‹ï¼š</p>
<ol>
<li>è·å– EPUB ç”µå­ä¹¦çš„ Uriã€‚</li>
<li>ä½¿ç”¨ <code>ZipInputStream</code> è¯»å–è¿™ä¸ªå‹ç¼©æ–‡ä»¶ï¼ˆèŠ‚çœç©ºé—´ï¼‰ã€‚</li>
<li>åœ¨ Zip æµä¸­æ‰¾åˆ° <code>META-INF/container.xml</code> æ–‡ä»¶ï¼Œè§£æå‡º <code>.opf</code> æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚</li>
<li>ä» OPF æ–‡ä»¶ä¸­è§£æå‡ºä¹¦ç±å…ƒæ•°æ®ï¼Œä»¥åŠé˜…è¯»é¡ºåºï¼ˆä¹¦ç±ç›®å½•ï¼‰ã€‚</li>
<li>æœ€åï¼Œåœ¨æ¸²æŸ“å†…å®¹æ—¶ï¼Œæ ¹æ®è·¯å¾„æ‰¾åˆ°å†…å®¹æ–‡ä»¶ï¼Œä½¿ç”¨ <code>Jsoup</code> è§£æ HTML å³å¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®]]></title>    <link>https://juejin.cn/post/7576821684252016683</link>    <guid>https://juejin.cn/post/7576821684252016683</guid>    <pubDate>2025-11-26T09:24:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252016683" data-draft-id="7576841976927993892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-26T09:24:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:24:52.000Z" title="Wed Nov 26 2025 09:24:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c35e9c8d2f43f09a8c45c7858d7513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=vVZYOE1xotETMxheo5tMCO8v%2FXg%3D" alt="image-20251126172101658" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘å·²ç»å°†å®˜ç½‘ä¸Šçš„æ ¸å¿ƒæ¦‚å¿µå¤§è‡´æ‰«äº†ä¸€éï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftauri.app%2Fzh-cn%2Fconcept%2F%25EF%25BC%258C%25E8%25AF%25B4%25E5%25AE%259E%25E8%25AF%259D%25EF%25BC%258C%25E4%25B8%258D%25E7%259F%25A5%25E6%2589%2580%25E4%25BA%2591%25EF%25BC%258C%25E4%25B8%258E%25E6%2588%2591%25E4%25B9%258B%25E5%2589%258D%25E7%2586%259F%25E6%2582%2589%25E7%259A%2584" target="_blank" title="https://tauri.app/zh-cn/concept/%EF%BC%8C%E8%AF%B4%E5%AE%9E%E8%AF%9D%EF%BC%8C%E4%B8%8D%E7%9F%A5%E6%89%80%E4%BA%91%EF%BC%8C%E4%B8%8E%E6%88%91%E4%B9%8B%E5%89%8D%E7%86%9F%E6%82%89%E7%9A%84" ref="nofollow noopener noreferrer">tauri.app/zh-cn/conceâ€¦</a> <code>web</code> ç«¯ç›¸å·®ç”šè¿œï¼Œä¸è¿‡æˆ‘å¥½åƒæ‘¸åˆ°äº†ä¸€äº›é—¨è·¯ï¼Œä»¥ä¸‹éƒ½æ˜¯æˆ‘ä¸ªäººè§è§£ï¼Œå¯èƒ½æœ‰æ‰€åå·®ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚<code>Tauri</code> å¼€å‘çš„åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ç«¯å’Œåç«¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯ C/S æ¶æ„ã€‚å‰ç«¯å°±å’Œä¹‹å‰ <code>web</code> å¼€å‘ä¸€æ ·ï¼Œä½ å¯ä»¥é€‰æ‹©è‡ªå·±æ“…é•¿çš„ UI æ¡†æ¶ï¼Œè€Œåç«¯åˆ™æ˜¯åŸºäº <code>Rust</code> æ¥åšçš„ï¼Œå¯ä»¥å®Œæˆä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œç³»ç»Ÿè°ƒç”¨ç­‰ç­‰ã€‚æˆ‘çš„è„‘æµ·é‡Œç›®å‰ç»“æ„æ˜¯è¿™æ ·çš„ï¼Œå¯¹åº”ä»£ç çš„ç›®å½•ï¼Œå‰ç«¯å°±æ˜¯ <code>src</code> ä¸‹çš„ä»£ç ï¼Œåç«¯å°±æ˜¯ <code>src-tauri</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb6e3236740745338f15aafefbba6ac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=hwimUXiBU0In96rVZE4EX9B3l6w%3D" alt="image-20251126112339786" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™å…¶å®å°±æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼ŒæŠŠ <code>Rust</code> æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>Java</code>ï¼Œåˆå›åˆ°äº† <code>web</code> å¼€å‘çš„æ¨¡å¼äº†ã€‚å½“ç„¶å¦‚æœä½ æ„¿æ„æ·±å…¥å­¦ä¹  <code>Rust</code>ï¼Œå®Œå…¨ç”¨ <code>Rust</code> æ¥æ„å»ºæœåŠ¡ç«¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>æ‰€ä»¥æœ€åå®é™…ä¸Šæˆ‘çš„é¡¹ç›®å°±å˜æˆäº†è¿™æ ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6d0b6d4eaa48878d653b986e55d88c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=n835ZsPkv2diTIKKQT99%2Bg01KA8%3D" alt="image-20251126113509775" loading="lazy"/></p>
<p>è¿™å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œ<code>Tauri</code> ä¼¼ä¹åªæ˜¯ç®€å•çš„å¥—å£³äº†ã€‚åæ¥ä»”ç»†æƒ³æƒ³å¥½åƒä¹Ÿä¸æ˜¯ï¼Œç›¸æ¯”äº <code>Web</code> ç«¯å¤šäº†ä¸€äº›è®¿é—®ç³»ç»ŸåŸç”Ÿ <code>Api</code> çš„èƒ½åŠ›ã€‚</p>
<p>âœ… <strong>Vue3</strong>ï¼šå‰ç«¯å¼€å‘ä½“éªŒå¥½</p>
<p>âœ… <strong>Java åç«¯</strong>ï¼šæˆç†Ÿç¨³å®šï¼Œå¼€å‘æ•ˆç‡é«˜</p>
<p>âœ… <strong>Tauri</strong>ï¼šæä¾›æ¡Œé¢åº”ç”¨å¤–å£³ï¼Œæœªæ¥å¯æ‰©å±•ç³»ç»ŸåŠŸèƒ½</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯æ ˆé€‰æ‹©</h2>
<h3 data-id="heading-2">å‰ç«¯ï¼ˆTauriï¼‰ï¼š</h3>
<ul>
<li>Vue3 + TypeScript</li>
<li>UI ç»„ä»¶åº“ï¼šAnt Design  Vue</li>
<li>HTTP å®¢æˆ·ç«¯ï¼šaxios</li>
<li>çŠ¶æ€ç®¡ç†ï¼šPinia</li>
</ul>
<h3 data-id="heading-3">åç«¯ï¼ˆJavaï¼‰ï¼š</h3>
<ul>
<li>
<p>Spring Boot + Sa-Token</p>
</li>
<li>
<p>æ•°æ®åº“ï¼šPostgreSQL + MyBatis-Plus</p>
</li>
<li>
<p>API æ–‡æ¡£ï¼šSwagger</p>
</li>
<li>
<p>éƒ¨ç½²ï¼šDocker + äº‘æœåŠ¡å™¨</p>
</li>
</ul>
<blockquote>
<p>æˆªæ­¢ç›®å‰ 2025.11.26 æˆ‘ä¼šä½¿ç”¨å½“å‰æ‰€æœ‰æœ€æ–°ç¨³å®šç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚æˆ‘å»ºè®®æ˜¯æˆ‘å½“å‰çš„æ–‡ç« ä½œä¸ºè¾…åŠ©ï¼Œä»¥å®˜æ–¹æ–‡æ¡£ä¸ºä¸»ï¼Œæˆ‘ä¼šåœ¨å…³é”®ä½ç½®ç»™å‡ºæ–‡æ¡£é“¾æ¥ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ä¸‰ã€å®Œæˆå‰åç«¯æ•°æ®äº¤äº’</h2>
<h3 data-id="heading-5">3.1. ç›®å½•æœºæ„è§„åˆ’</h3>
<p>é¦–å…ˆå’Œå¸¸è§„ <code>Vue</code> é¡¹ç›®ä¸€æ ·ï¼Œè§„åˆ’å¥½æˆ‘ä»¬çš„ç›®å½•ç»“æ„ï¼Œå¤§è‡´å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">src               
â”œâ”€ api            <span class="hljs-comment"># API æ¥å£   </span>
â”œâ”€ assets          <span class="hljs-comment"># é™æ€èµ„æº</span>
â”œâ”€ components       <span class="hljs-comment"># é€šç”¨ç»„ä»¶   </span>
â”œâ”€ layouts         <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶     </span>
â”œâ”€ router          <span class="hljs-comment"># è·¯ç”±é…ç½®  </span>
â”œâ”€ stores      		 <span class="hljs-comment"># çŠ¶æ€ç®¡ç†(Pinia)  </span>
â”œâ”€ utils      		 <span class="hljs-comment"># å·¥å…·å‡½æ•° </span>
â”œâ”€ views     		 <span class="hljs-comment"># é¡µé¢ç»„ä»¶     </span>
â”œâ”€ App.vue        
â”œâ”€ main.ts        
â””â”€ vite-env.d.ts  

</code></pre>
<h3 data-id="heading-6">3.2. å®‰è£…æ•´åˆå¸¸ç”¨ä¾èµ–</h3>
<p>å®‰è£…æ‰€æœ‰ä¾èµ–</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Vue ç”Ÿæ€</span>
pnpm add vue-router@4 pinia pinia-plugin-persistedstate
<span class="hljs-comment"># UI ç»„ä»¶åº“ (Ant Design Vue)</span>
pnpm add ant-design-vue@4.x @ant-design/icons-vue
<span class="hljs-comment"># æ ·å¼é¢„å¤„ç†</span>
pnpm add install less 
<span class="hljs-comment"># HTTP å®¢æˆ·ç«¯</span>
pnpm add install axios
</code></pre>
<p>ä¸€é”®å®‰è£…æ‰€æœ‰</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add vue-router@4 pinia pinia-plugin-persistedstate ant-design-vue@4.x @ant-design/icons-vue less  axios
</code></pre>
<h4 data-id="heading-7">3.2.1. æ•´åˆ Ant Design Vue</h4>
<blockquote>
<p>è¿™é‡Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå®ç°è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ï¼Œå®˜æ–¹æ–‡æ¡£è¿™é‡Œå†™çš„ä¸å¤Ÿæ¸…æ¥šï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.antdv.com%2Fdocs%2Fvue%2Fgetting-started-cn%25E3%2580%2582%25E6%2588%2591%25E4%25BB%25AC%25E5%258F%25AF%25E4%25BB%25A5%25E5%2580%259F%25E5%258A%25A9" target="_blank" title="https://www.antdv.com/docs/vue/getting-started-cn%E3%80%82%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%80%9F%E5%8A%A9" ref="nofollow noopener noreferrer">www.antdv.com/docs/vue/geâ€¦</a> <code>unplugin-vue-components</code> å’Œ <code>unplugin-auto-import</code>è¿™ä¸¤æ¬¾æ’ä»¶æ¥å®Œæˆã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">pnpm install -D unplugin-vue-components unplugin-auto-import
</code></pre>
<p>åœ¨æ’ä»¶çš„ <code>GitHub</code> ä»“åº“ä¸­å¯ä»¥çœ‹åˆ°æ˜¯æ”¯æŒçš„ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-auto-import" target="_blank" title="https://github.com/unplugin/unplugin-auto-import" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-vue-components" target="_blank" title="https://github.com/unplugin/unplugin-vue-components" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><strong>åœ¨ <code>vite.config.js</code> ä¸­é…ç½®æŒ‰éœ€å¼•å…¥ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-auto-import/vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AntDesignVueResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title class_">AutoImport</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">AntDesignVueResolver</span>()],
    }),
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [
        <span class="hljs-title class_">AntDesignVueResolver</span>({
           <span class="hljs-attr">importStyle</span>: <span class="hljs-string">'less'</span>, <span class="hljs-comment">// ä½¿ç”¨ less</span>
        }),
      ],
    }),
  ],
})
</code></pre>
<blockquote>
<p>è¿™é‡Œè¦æ³¨æ„ï¼Œ å¿…é¡»ç”¨ <code>less</code></p>
</blockquote>
<p>éšä¾¿æ‰¾ä¸€ä¸ªç»„ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0834b46076024be48455c818b6b990ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=6%2FMVZNzjYD68VOeuynUf2SxCwIU%3D" alt="image-20251126153900116" loading="lazy"/></p>
<h4 data-id="heading-8">3.2.2. æ•´åˆ Vue Router</h4>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Finstallation.html" target="_blank" title="https://router.vuejs.org/zh/installation.html" ref="nofollow noopener noreferrer">router.vuejs.org/zh/installaâ€¦</a></p>
<p>åˆ›å»ºè·¯ç”±å®ä¾‹ <code>router/index.js</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HomeView.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AboutView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AboutView.vue'</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),
    <span class="hljs-attr">routes</span>: [
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span> },
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutView</span> },
    ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router

</code></pre>
<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ªé¡µé¢ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>main.ts</code> ä¸­æ³¨å†Œè·¯ç”±</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>


<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h1&gt;Hello App!&lt;/h1&gt;
  &lt;p&gt;&lt;strong&gt;Current route path:&lt;/strong&gt; {{ $route.fullPath }}&lt;/p&gt;
  &lt;nav&gt;
    &lt;RouterLink to="/"&gt;Go to Home&lt;/RouterLink&gt;
    &lt;RouterLink to="/about"&gt;Go to About&lt;/RouterLink&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;RouterView /&gt;
  &lt;/main&gt;
&lt;/template&gt;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e06f1842ad4659a32549bc0cae73bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=25BdHKyoEbylpWLuWo%2B3MDabM1c%3D" alt="PixPin_2025-11-26_16-14-56.gif" loading="lazy"/></p>
<h4 data-id="heading-9">3.2.3. æ•´åˆ pinia &amp; pinia-plugin-persistedstate</h4>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinia.vuejs.org%2Fzh%2Fintroduction.html" target="_blank" title="https://pinia.vuejs.org/zh/introduction.html" ref="nofollow noopener noreferrer">pinia.vuejs.org/zh/introducâ€¦</a></p>
<p><strong>æŒ‰æ¨¡å—åŒ–å®šä¹‰ store</strong>ï¼Œä»¥ä¸‹ä¸ºç›®å½•ç»“æ„</p>
<pre><code class="hljs">stores         
â”œâ”€ modules     
â”‚  â””â”€ user.ts  
â””â”€ index.ts    
</code></pre>
<ul>
<li>åˆ›å»º <code>src/stores/index.ts</code></li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<ul>
<li><code>main.ts</code> é‡Œå¼•å…¥</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//main.ts</span>
...
<span class="hljs-comment">// å¼•å…¥ pinia</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./stores'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(store)
...
</code></pre>
<ul>
<li>modules: æŒ‰æ¨¡å—å®šä¹‰å¯¹åº”çš„ store, user.ts è¡¨ç¤ºç”¨æˆ·ç›¸å…³æ•°æ®å­˜å‚¨çš„ä»“åº“</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// user.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// ä½ å¯ä»¥å¯¹ `defineStore()` çš„è¿”å›å€¼è¿›è¡Œä»»æ„å‘½åï¼Œä½†æœ€å¥½ä½¿ç”¨ store çš„åå­—ï¼ŒåŒæ—¶ä»¥ `use` å¼€å¤´ä¸”ä»¥ `Store` ç»“å°¾ã€‚(æ¯”å¦‚ `useUserStore`ï¼Œ`useCartStore`ï¼Œ`useProductStore`)</span>
<span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„åº”ç”¨ä¸­ Store çš„å”¯ä¸€ IDã€‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
})
</code></pre>
<blockquote>
<p><strong>åœ¨å¼•å…¥ pinia çš„æ—¶å€™åšä¸€äº›è°ƒæ•´ï¼Œä¸ç›´æ¥åœ¨ main.ts é‡Œå¼•å…¥ï¼Œè¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œä¹‹åå¯¹äº pinia é›†æˆä¸€äº›æ’ä»¶ï¼Œæˆ–è€…åšä¸€äº›å…¶ä»–é…ç½®ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ç”¨å…¨éƒ¨å †ç§¯åœ¨ main.ts ä¸­</strong></p>
</blockquote>
<ul>
<li>ä½¿ç”¨ <code>pinia-plugin-persistedstate</code> æŒä¹…åŒ–</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpraz.codeberg.page%2Fpinia-plugin-persistedstate%2Fguide%2F%23usage" target="_blank" title="https://praz.codeberg.page/pinia-plugin-persistedstate/guide/#usage" ref="nofollow noopener noreferrer">praz.codeberg.page/pinia-plugiâ€¦</a></p>
<blockquote>
<p>åœ¨ <code>web</code> ç«¯çš„æ—¶å€™å¯ä»¥ç”¨ <code>LocalStorage</code>ã€<code>SessionStorage</code> ç­‰ï¼Œä½†æ˜¯æ¡Œé¢ç«¯æˆ‘å°±ä¸ç¡®å®šäº†ï¼Œæˆ‘å»æœäº†ä¸€ä¸‹ï¼Œæ®è¯´æ˜¯æ”¯æŒ <code>LocalStorage</code> çš„ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼Œæ¨èäº†ä¸€ä¸ª <code>Tauri Store</code>ï¼Œè¿™ä¸ªç­‰åˆ°å…·ä½“ä½¿ç”¨çš„æ—¶å€™å†å»ç ”ç©¶ï¼Œä»Šå¤©ä»»åŠ¡å°±æ˜¯å…ˆæ•´åˆä¸Šã€‚</p>
</blockquote>
<p>å°†æ’ä»¶æ·»åŠ åˆ° <code>pinia</code> å®ä¾‹ä¸Š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ./stores/index.ts</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> piniaPluginPersistedstate <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia-plugin-persistedstate'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

store.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<p>åªéœ€è¦åœ¨å®šä¹‰çš„ <code>store</code> é‡Œå¼€å¯é…ç½®å³å¯å®ŒæˆæŒä¹…åŒ–æ“ä½œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>   
})
</code></pre>
<blockquote>
<p>é»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ <code>LocalStorage</code>ï¼Œè¿™é‡Œæˆ‘æš‚æ—¶ä¸æµ‹è¯•äº†ï¼Œç­‰åˆ°ç”¨çš„æ—¶å€™æ›¿æ¢ä¸º <code>Tauri Store</code> å†ç ”ç©¶ã€‚</p>
</blockquote>
<h4 data-id="heading-10">3.2.4. æ•´åˆ Axios</h4>
<p>å®šä¹‰è¯·æ±‚å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä»ä¹‹å‰é¡¹ç›®ä¸­æ‹·è´è¿‡æ¥çš„ï¼ŒåŸºæœ¬ä¸Šéƒ½å·®ä¸å¤šã€‚</p>
<p>åˆ›å»º <code>utils/request.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant-design-vue'</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">RequestConfig</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt; = <span class="hljs-title class_">AxiosRequestConfig</span> &amp; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è‡ªå®šä¹‰é…ç½®</span>
    mock?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨mockæ•°æ®</span>
    mockData?: T <span class="hljs-comment">// mockæ•°æ®</span>
    noErrorToast?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä¸æ˜¾ç¤ºé”™è¯¯æç¤º</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AxiosInstance</span> <span class="hljs-comment">// axioså®ä¾‹</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = axios.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_BASE_API</span>,
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">180000</span>,
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=UTF-8'</span>,
            },
        })

        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupInterceptors</span>()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">setupInterceptors</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> config,
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error),
        )

        <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse</span>) =&gt;</span> {
                <span class="hljs-comment">// ä¸šåŠ¡çŠ¶æ€ç å¤„ç†</span>
                <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
                    <span class="hljs-keyword">const</span> config = response.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span>
                    <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">noErrorToast</span>) {
                        message.<span class="hljs-title function_">error</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>)
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(response.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>
            },
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
                <span class="hljs-comment">// å¤„ç†mockæ•°æ®</span>
                <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isMock</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(error.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">const</span> config = error.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span> | <span class="hljs-literal">undefined</span>

                <span class="hljs-comment">// åªæœ‰é…ç½®äº†ä¸è·³è¿‡é”™è¯¯å¤„ç†æ—¶æ‰æ˜¾ç¤ºé”™è¯¯æç¤º</span>
                <span class="hljs-keyword">if</span> (!config?.<span class="hljs-property">noErrorToast</span>) {
                    <span class="hljs-keyword">let</span> msg = <span class="hljs-string">'è¯·æ±‚é”™è¯¯'</span>
                    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
                        <span class="hljs-keyword">switch</span> (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
                            <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚å‚æ•°é”™è¯¯'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                                msg = <span class="hljs-string">'æœªæˆæƒï¼Œè¯·ç™»å½•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
                                msg = <span class="hljs-string">'æ‹’ç»è®¿é—®'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚èµ„æºä¸å­˜åœ¨'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
                                msg = <span class="hljs-string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-attr">default</span>:
                                msg = error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || <span class="hljs-string">`æœåŠ¡å™¨é”™è¯¯: <span class="hljs-subst">${error.response.status}</span>`</span>
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
                        msg = <span class="hljs-string">'è¯·æ±‚è¶…æ—¶æˆ–ç½‘ç»œå¼‚å¸¸'</span>
                    } <span class="hljs-keyword">else</span> {
                        msg = error.<span class="hljs-property">message</span> || <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>
                    }
                    message.<span class="hljs-title function_">error</span>(msg)
                }
                <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
            },
        )
    }

    <span class="hljs-comment">// å°è£…æ ¸å¿ƒè¯·æ±‚æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> request&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">config</span>: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">mock</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(config.<span class="hljs-property">mockData</span> <span class="hljs-keyword">as</span> T)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">instance</span>(config)
    }

    <span class="hljs-keyword">public</span> get&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, url })
    }

    <span class="hljs-keyword">public</span> post&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> put&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>, url, data })
    }
}

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http

</code></pre>
<p>å®šä¹‰ä¸ªæ¥å£æµ‹è¯•ä¸€ä¸‹</p>
<p>åˆ›å»º <code>api/user.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userApi = {
    <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span>
    <span class="hljs-attr">getUserInfo</span>: <span class="hljs-function">() =&gt;</span>
        http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/info'</span>),

}
</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;a-button type="primary" @click="getUserInfo"&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/a-button&gt;
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { userApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api/user'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = (<span class="hljs-params"/>) =&gt; {
  userApi.<span class="hljs-title function_">getUserInfo</span>()
}

&lt;/script&gt;
</code></pre>
<p>åœ¨åº”ç”¨çª—å£ç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰ <code>F12</code>ï¼Œçœ‹åˆ°è¯·æ±‚å‡ºå»äº†ï¼Œå³è¡¨ç¤ºæˆåŠŸäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c94b2860a83481989b65ee375b7eab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=9AHuJDg4NYLVweMEeAH43fnOW3Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>åˆ°å¤´æ¥å‘ç°åˆå›åˆ°äº†ç†Ÿæ‚‰çš„é¢†åŸŸï¼Œå¦‚æœä½ ä¸æƒ³åšæˆæ¡Œé¢ç«¯ï¼Œç›´æ¥ä½¿ç”¨ vue è„šæ‰‹æ¶æ­å»ºé¡¹ç›®ï¼Œæ‰€æœ‰æ•´åˆæ­¥éª¤å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚ä»Šå¤©å°±å…ˆè¿™æ ·ï¼Œç°åœ¨æœ‰ä¸ªé—®é¢˜ï¼Œå…ˆåšå‰ç«¯ç”¨ <code>mock</code> æ•°æ®åšæ¥å£ï¼Œå®ŒæˆåŸºç¡€åŠŸèƒ½åï¼Œå†å¼€å‘æœåŠ¡ç«¯ï¼Œè¿˜æ˜¯ç›´æ¥åŒæ—¶è¿›è¡Œã€‚å¦‚æœæœ‰äººçœ‹åˆ°è¿™é‡Œï¼Œä½ å¸Œæœ›é‡‡ç”¨å“ªç§æ–¹å¼å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡]]></title>    <link>https://juejin.cn/post/7576646142315495465</link>    <guid>https://juejin.cn/post/7576646142315495465</guid>    <pubDate>2025-11-26T03:11:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576646142315495465" data-draft-id="7573486671296790570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T03:11:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="let_code"/> <meta itemprop="url" content="https://juejin.cn/user/4265760847307678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4265760847307678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    let_code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:11:52.000Z" title="Wed Nov 26 2025 03:11:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CopilotKitæ˜¯ä»€ä¹ˆ</h2>
<p><code>CopilotKit</code> å°†åº”ç”¨çš„é€»è¾‘ã€çŠ¶æ€å’Œç”¨æˆ·ä¸Šä¸‹æ–‡è¿æ¥åˆ° <code>AI</code> ä»£ç†ã€‚æä¾›äº†æ„å»ºã€éƒ¨ç½²å’Œç›‘æ§ <code>AI</code> è¾…åŠ©åŠŸèƒ½çš„å·¥å…·ï¼Œè¿™äº›åŠŸèƒ½æ„Ÿè§‰ç›´è§‚ã€æœ‰ç”¨ä¸”æ·±åº¦é›†æˆã€‚</p>
<h2 data-id="heading-1">CopilotKitç‰¹ç‚¹</h2>
<ul>
<li><code>Generative UI</code>(ç”Ÿæˆå¼ UI)ï¼šä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç°<code>agent</code>çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</li>
<li><code>Human in the Loop</code>(äººæœºååŒ)ï¼šç”¨æˆ·å¯ä»¥åœ¨å…³é”®ç‚¹æŒ‡å¯¼<code>agent</code>ã€‚å®ç°æ›´å¯é çš„è¾“å‡ºã€‚</li>
<li><code>Shared State</code>(å…±äº«çŠ¶æ€)ï¼šagentå’Œåº”ç”¨çŠ¶æ€ä¿æŒåŒæ­¥ã€‚<code>agent</code>å¯ä»¥æŸ¥çœ‹åº”ç”¨ä¸­çš„æ‰€æœ‰çŠ¶æ€ï¼Œåº”ç”¨å¯ä»¥å®æ—¶å“åº”<code>agent</code>ã€‚</li>
</ul>
<h2 data-id="heading-2">CopilotKitå’ŒLangGraphçš„å…³ç³»</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adb67101b1754134b048eda4e40a8540~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=NOWH6B6nYzD30Eb%2BjSq1maA7XRM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">èŠå¤©ç»„ä»¶</h2>
<p>å‰ä¸‰ä¸ªç»„ä»¶ç”±<code>@copilotkit/react-ui</code>æä¾›ã€‚</p>
<ol>
<li><code>CopilotChat</code> ï¼šçµæ´»çš„èŠå¤©ç•Œé¢ç»„ä»¶ã€‚</li>
<li><code>CopilotSidebar</code> ï¼šå¯æŠ˜å å’Œæ‰©å±•çš„ä¾§è¾¹æ èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>CopilotPopup</code> ï¼š å¯ä»¥æ‰“å¼€å’Œå…³é—­çš„æµ®åŠ¨èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>HeadLess UI</code> : æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ã€‚
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useCopilotChat } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Role</span>, <span class="hljs-title class_">TextMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomChatInterface</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> {
    visibleMessages,
    appendMessage,
    setMessages,
    deleteMessage,
    reloadMessages,
    stopGeneration,
    isLoading,
} = <span class="hljs-title function_">useCopilotChat</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = (<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title function_">appendMessage</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({ content, <span class="hljs-attr">role</span>: <span class="hljs-title class_">Role</span>.<span class="hljs-property">User</span> }));
};

<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    {/* Implement your custom chat UI here */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-4">è®¾ç½®èŠå¤©ç»„ä»¶çš„æ ·å¼</h3>
<ul>
<li>æ ·å¼ï¼šä¸»è¦æ€è·¯æ˜¯é€šè¿‡<strong>æ ·å¼è¦†ç›–</strong>çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼çš„è®¾å®šã€‚æ”¯æŒé€šè¿‡csså˜é‡ã€cssç±»çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼å’Œå­—ä½“çš„å®šä¹‰ã€‚</li>
<li>å›¾æ ‡ï¼šé€šè¿‡ç»„ä»¶çš„<code>icons</code>å±æ€§è¿›è¡Œå®šä¹‰ã€‚</li>
<li>æ ‡ç­¾ï¼šé€šè¿‡ç»„ä»¶çš„<code>labels</code>å±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚</li>
</ul>
<p>å…·ä½“ç±»åã€å˜é‡åã€iconså±æ€§ã€labelså±æ€§<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fcustom-look-and-feel%2Fcustomize-built-in-ui-components%23css-variables-easiest" target="_blank" title="https://docs.copilotkit.ai/langgraph/custom-look-and-feel/customize-built-in-ui-components#css-variables-easiest" ref="nofollow noopener noreferrer">å‚è€ƒè¿™é‡Œ</a></p>
<h3 data-id="heading-5">è‡ªå®šä¹‰å­ç»„ä»¶</h3>
<p>æ”¯æŒé€šè¿‡ç»„ä»¶çš„<code>props</code>å°†è‡ªå®šä¹‰çš„å­ç»„ä»¶ä¼ é€’è¿›å»ï¼Œä»è€Œå®ç°å­ç»„ä»¶çš„è‡ªå®šä¹‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { type <span class="hljs-title class_">AssistantMessageProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { useChatContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Markdown</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SparklesIcon</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@heroicons/react/24/outline"</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotSidebar</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@copilotkit/react-ui/styles.css"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomAssistantMessage</span> = (<span class="hljs-params">props: AssistantMessageProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> { icons } = <span class="hljs-title function_">useChatContext</span>();
  <span class="hljs-keyword">const</span> { message, isLoading, subComponent } = props;

  <span class="hljs-keyword">const</span> avatarStyles = <span class="hljs-string">"bg-zinc-400 border-zinc-500 shadow-lg min-h-10 min-w-10 rounded-full text-white flex items-center justify-center"</span>;
  <span class="hljs-keyword">const</span> messageStyles = <span class="hljs-string">"px-4 rounded-xl pt-2"</span>;

  <span class="hljs-keyword">const</span> avatar = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{avatarStyles}</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">SparklesIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-6 w-6"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"py-2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-start"</span>&gt;</span>
        {!subComponent &amp;&amp; avatar}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{messageStyles}</span>&gt;</span>
          {message &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Markdown</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{message.content</span> || ""} /&gt;</span> }
          {isLoading &amp;&amp; icons.spinnerIcon}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-2"</span>&gt;</span>{subComponent}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};


<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CopilotKit</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CopilotSidebar</span> <span class="hljs-attr">AssistantMessage</span>=<span class="hljs-string">{CustomAssistantMessage}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CopilotKit</span>&gt;</span></span>
</code></pre>
<p>å­ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6f9933b815f4cb9b26dccbc18c95b94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=zXAVBmOlJGjLy%2FfXYE3t%2FDo9a7A%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œmarkdownçš„æ¸²æŸ“é»˜è®¤ä½¿ç”¨<code>react-markdown</code>ã€‚æ”¯æŒé€šè¿‡<code>markdownTagRenderers</code>å±æ€§æ¥è‡ªå®šä¹‰markdownæ¸²æŸ“ç»„ä»¶ã€‚</p>
<h4 data-id="heading-6">Actions</h4>
<p>å…è®¸ LLM ä¸åº”ç”¨ç¨‹åºçš„åŠŸèƒ½äº¤äº’ã€‚å½“ LLM è°ƒç”¨ Action æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å¯è§†åŒ–å…¶æ‰§è¡Œå’Œç»“æœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span> <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
<span class="hljs-keyword">import</span> { useCopilotAction } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Your custom components (examples - implement these in your app)</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LoadingView</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./loading-view"</span>; <span class="hljs-comment">// Your loading component</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CalendarMeetingCardComponent</span>, type <span class="hljs-title class_">CalendarMeetingCardProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./calendar-meeting-card"</span>; <span class="hljs-comment">// Your meeting card component</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">YourComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useCopilotAction</span>({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"showCalendarMeeting"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Displays calendar meeting information"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"date"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting date (YYYY-MM-DD)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"time"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting time (HH:mm)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"meetingName"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Name of the meeting"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>
      }
    ],
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ status, args }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { date, time, meetingName } = args;
 
      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'inProgress'</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadingView</span> /&gt;</span></span>; <span class="hljs-comment">// Your own component for loading state</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">meetingProps</span>: <span class="hljs-title class_">CalendarMeetingCardProps</span> = {
          <span class="hljs-attr">date</span>: date,
          time,
          meetingName
        };
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CalendarMeetingCardComponent</span> {<span class="hljs-attr">...meetingProps</span>} /&gt;</span></span>;
      }
    },
  });
 
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>...<span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">Agent State</h4>
<p><code>Agent State</code>ç»„ä»¶å…è®¸å¯è§†åŒ– <code>CoAgents</code> çš„å†…éƒ¨çŠ¶æ€å’Œè¿›åº¦ã€‚ä½¿ç”¨ <code>CoAgents</code> æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å‘ˆç°ä»£ç†çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span>; <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
 
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Progress</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./progress"</span>;

type <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">logs</span>: string[];
}

useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"basic_agent"</span>,
  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state, nodeName, status }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">logs</span> || state.<span class="hljs-property">logs</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// Progress is a component we are omitting from this example for brevity.</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Progress</span> <span class="hljs-attr">logs</span>=<span class="hljs-string">{state.logs}</span> /&gt;</span></span>; 
  },
});
</code></pre>
<h2 data-id="heading-8">å‰ç«¯å·¥å…·</h2>
<p>å‰ç«¯å·¥å…·æŒ‡çš„æ˜¯å‰ç«¯å®šä¹‰çš„å‡½æ•°å¯ä»¥è¢« agent è°ƒç”¨ã€‚å½“å‡½æ•°è¢« agent è°ƒç”¨æ—¶ï¼Œå‡½æ•°åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒï¼Œä»è€Œå®ç°agentå¯¹UIçš„æ§åˆ¶å’Œäººæœºäº¤äº’ã€‚</p>
<p>å‰ç«¯å·¥å…·å¯ä»¥è½»æ¾å®ç°ï¼š</p>
<ol>
<li>è¯»å–æˆ–ä¿®æ”¹ React ç»„ä»¶çŠ¶æ€</li>
<li>è®¿é—®æµè§ˆå™¨ APIï¼Œå¦‚ localStorageã€sessionStorage æˆ– cookie</li>
<li>è§¦å‘ UI æ›´æ–°æˆ–åŠ¨ç”»</li>
<li>ä¸ç¬¬ä¸‰æ–¹å‰ç«¯åº“äº¤äº’</li>
<li>æ‰§è¡Œéœ€è¦ç”¨æˆ·å³æ—¶æµè§ˆä¸Šä¸‹æ–‡çš„æ“ä½œ</li>
</ol>
<h3 data-id="heading-9">å®ç°</h3>
<h4 data-id="heading-10">1.åˆ›å»ºå‰ç«¯å·¥å…·</h4>
<p>éœ€è¦ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//page.tsx </span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ name }) =&gt; {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>);
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-11">2.ä¿®æ”¹ä»£ç†</h4>
<p>å®‰è£… CopilotKit SDK <code>npm install @copilotkit/sdk-js</code>ã€‚</p>
<p>è¦è®¿é—® CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œå¯ä»¥åœ¨ä»£ç†çš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿ CopilotKitState ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ä¹‹åï¼Œä»£ç†çš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</p>
<p>agentè°ƒç”¨å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h2 data-id="heading-12">Generative UI</h2>
<p>ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç° agent çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ä½¿ç”¨ç”Ÿæˆå¼UIï¼š</p>
<ol>
<li>åç«¯å·¥å…·ï¼šé€šè¿‡ç”Ÿæˆå¼UIç»„ä»¶æ¸²æŸ“å·¥å…·çš„è°ƒç”¨</li>
<li>å‰ç«¯å·¥å…·ï¼šä¸ºagentæä¾›å‰ç«¯å·¥å…·æ¥æ˜¾ç¤ºè‡ªå®šä¹‰ç»„ä»¶å¹¶ä¸”é©±åŠ¨UI</li>
<li>agent çŠ¶æ€ï¼šç”¨è‡ªå®šä¹‰ç»„ä»¶æ¥æ˜¾ç¤ºagentçš„çŠ¶æ€ã€è¿›åº¦å’Œè¾“å‡º</li>
</ol>
<h3 data-id="heading-13">åç«¯å·¥å…·</h3>
<p>å·¥å…·æ˜¯ LLM è°ƒç”¨é¢„å®šä¹‰çš„ï¼ˆé€šå¸¸æ˜¯ç¡®å®šæ€§å‡½æ•°ï¼‰çš„ä¸€ç§æ–¹å¼ã€‚CopilotKit å…è®¸åœ¨ UI ä¸­å°†è¿™äº›å·¥å…·å‘ˆç°ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç”Ÿæˆå¼ UIã€‚</p>
<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯å…è®¸æˆ‘ä»¬å‘ç”¨æˆ·å±•ç¤ºagentæ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬è°ƒç”¨å·¥å…·æ—¶ï¼Œå…è®¸å®Œå…¨è‡ªå®šä¹‰å·¥å…·åœ¨èŠå¤©ä¸­çš„å‘ˆç°æ–¹å¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">const</span> get_weather = <span class="hljs-title function_">tool</span>(
  <span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`The weather for <span class="hljs-subst">${args.location}</span> is 70 degrees.`</span>;
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Get the weather for a given location."</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">location</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"The location to get weather for"</span>),
    }),
  }
);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> });
  <span class="hljs-keyword">const</span> modelWithTools = model.<span class="hljs-title function_">bindTools</span>([get_weather]); 

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a helpful assistant."</span>),
    ...state.<span class="hljs-property">messages</span>,
  ], config);

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å‰ç«¯é€šè¿‡<code>useCopilotAction</code>é’©å­åœ¨UIä¸­å‘ˆç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx  </span>
<span class="hljs-keyword">import</span> { useRenderToolCall } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useRenderToolCall</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,<span class="hljs-comment">// æ³¨æ„nameä¿æŒä¸€è‡´</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{status, args}</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
          {status !== "complete" &amp;&amp; "Calling weather API..."}
          {status === "complete" &amp;&amp; `Called the weather API for ${args.location}.`}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>useDefaultTool</code> æ•è·æ‰€æœ‰æ²¡æœ‰ä¸“ç”¨æ¸²æŸ“å™¨çš„å·¥å…·ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useDefaultTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useDefaultTool</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ name, args, status, result }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> "<span class="hljs-attr">black</span>" }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
            {status === "complete" ? "âœ“" : "â³"}
            {name}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {status === "complete" &amp;&amp; result &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{JSON.stringify(result, null, 2)}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-14">å‰ç«¯å·¥å…·</h3>
<p>å®šä¹‰ LangGraph agent å¯ä»¥è°ƒç”¨çš„å®¢æˆ·ç«¯å‡½æ•°ï¼Œæ‰§è¡Œå®Œå…¨åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è¿›è¡Œã€‚å½“agentè°ƒç”¨å‰ç«¯å·¥å…·æ—¶ï¼Œé€»è¾‘ä¼šåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒã€‚ä¸€èˆ¬åœ¨agentéœ€è¦å’Œå®¢æˆ·ç«¯äº¤äº’æ—¶ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// page.tsx</span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">{ name }</span>) {
      <span class="hljs-comment">// Handler returns the result of the tool call</span>
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">currentURLPath</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>, <span class="hljs-attr">userName</span>: name };
    },
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ args }</span>) =&gt;</span> {
      <span class="hljs-comment">// Renders UI based on the data of the tool call</span>
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {args.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>You're currently on {window.location.href}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>agent è®¿é—®å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-comment">//ç°åœ¨ï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-15">agent çŠ¶æ€</h3>
<p>æ‰€æœ‰ LangGraph agent éƒ½æ˜¯çŠ¶æ€åŒ–çš„ã€‚è¿™æ„å‘³ç€å½“ agent é€šè¿‡èŠ‚ç‚¹æ—¶ï¼Œä¸€ä¸ªçŠ¶æ€å¯¹è±¡ä¼šåœ¨å®ƒä»¬ä¹‹é—´ä¼ é€’ï¼Œä»¥ä¿æŒä¼šè¯çš„æ•´ä½“çŠ¶æ€ã€‚CopilotKit å…è®¸ä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶(ç”Ÿæˆå¼ UI)åœ¨åº”ç”¨ç¨‹åºä¸­å‘ˆç°æ­¤çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { copilotkitEmitState, <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Search</span> = {
  <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">searches</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-title class_">Search</span>[]&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">searches</span> = [
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Initial research"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Retrieving sources"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Forming an answer"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
  ];

  <span class="hljs-comment">// We can call copilotkit_emit_state to emit updated state</span>
  <span class="hljs-comment">// before a node finishes</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);

  <span class="hljs-comment">// Simulate state updates</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> search <span class="hljs-keyword">of</span> state.<span class="hljs-property">searches</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    search.<span class="hljs-property">done</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// We can also emit updates in a loop to simulate progress</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"You are a helpful assistant."</span>}),
    ...state.<span class="hljs-property">messages</span>,
  ], config);
</code></pre>
<p>å‰ç«¯é€šè¿‡ <code>useCoAgentStateRender</code> åœ¨èŠå¤©ä¸­å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-comment">// For type safety, redefine the state of the agent. If you're using</span>
<span class="hljs-comment">// using LangGraph JS you can import the type here and share it.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-comment">// styles omitted for brevity</span>
  useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}{search.done ? "" : "..."}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–è¿˜å…è®¸åœ¨èŠå¤©ä¹‹å¤–å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Define the state of the agent, should match the state of the agent in your LangGraph.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
  })

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* ... */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 mt-4"</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-row"</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-16">Human in the Loop (HITL)</h2>
<p>ç”¨æˆ·ä¸ agent åä½œå¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°äººæœºäº¤äº’ï¼š</p>
<ol>
<li>åŸºäºä¸­æ–­</li>
<li>åŸºäºå‰ç«¯å·¥å…·</li>
<li>åŸºäºèŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-17">åŸºäºä¸­æ–­</h3>
<h4 data-id="heading-18">åŸºç¡€</h4>
<p>éœ€è¦ä¸€ä¸ªçŠ¶æ€å±æ€§æ¥å­˜å‚¨åç§°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// This is the state of the agent.</span>
<span class="hljs-comment">// It inherits from the CopilotKitState properties from CopilotKit.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>åœ¨LangGraph ä»£ç†ä¸­è°ƒç”¨ interruptï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// add the agent state definition from the previous step</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> agentName = state.<span class="hljs-property">agentName</span>
    ?? <span class="hljs-title function_">interrupt</span>(<span class="hljs-string">"Before we start, what would you like to call me?"</span>); 

    <span class="hljs-comment">// Tell the agent its name</span>
    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
        <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant named <span class="hljs-subst">${agentName}</span>...`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
        [systemMessage, ...state.<span class="hljs-property">messages</span>],
        config
    );

    <span class="hljs-keyword">return</span> {
        ...state,
        agentName,
        <span class="hljs-attr">messages</span>: response,
    };
}
</code></pre>
<p>å‰ç«¯ä½¿ç”¨ <code>useLangGraphInterrupt</code> é’©å­ï¼Œä¸ºç»ˆä¸­æ–­æä¾›ä¸€ä¸ªè¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œç„¶åä½¿ç”¨ç”¨æˆ·çš„å“åº”è°ƒç”¨ resolveã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// styles omitted for brevity</span>
<span class="hljs-title function_">useLangGraphInterrupt</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{event.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
                e.preventDefault();
                resolve((e.target as HTMLFormElement).response.value);
            }}&gt;
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
});
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-19">é«˜çº§</h4>
<p>åœ¨ä»£ç†ä¸­å‘ˆç°å¤šä¸ªä¸­æ–­äº‹ä»¶æ—¶ï¼ŒUI ä¸­çš„å¤šä¸ª <code>useLangGraphInterrupt</code> é’©å­è°ƒç”¨ä¹‹é—´å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œé’©å­å¯ä»¥æ¥å—ä¸€ä¸ª <code>enabled</code> å‚æ•°ï¼Œè¯¥å‚æ•°å°†æœ‰æ¡ä»¶åœ°åº”ç”¨å®ƒï¼š</p>
<p>å®šä¹‰ä¸¤ä¸ªä¸åŒçš„ä¸­æ–­ï¼Œé€šè¿‡<code>type</code>è¿›è¡ŒåŒºåˆ†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// ... your full state definition</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">approval</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"approval"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"please approve"</span> }); 

  <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">agentName</span>) {
    state.<span class="hljs-property">agentName</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"ask"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"Before we start, what would you like to call me?"</span> }); 
  }

  <span class="hljs-comment">// Tell the agent its name</span>
  <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
    <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant...`</span>,
  });

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
    [systemMessage, ...state.<span class="hljs-property">messages</span>],
    config
  );

  <span class="hljs-keyword">return</span> {
    ...state,
    <span class="hljs-attr">messages</span>: response,
  };
}
</code></pre>
<p>å‰ç«¯å®šä¹‰å¤šä¸ªå¤„ç†ç¨‹åºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ApproveComponent</span> = (<span class="hljs-params">{ content, onAnswer }: { content: <span class="hljs-built_in">string</span>; onAnswer: (approved: <span class="hljs-built_in">boolean</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Do you approve?<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(true)}&gt;Approve<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(false)}&gt;Reject<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">AskComponent</span> = (<span class="hljs-params">{ question, onAnswer }: { question: <span class="hljs-built_in">string</span>; onAnswer: (answer: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
<span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{question}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            e.preventDefault();
            onAnswer((e.target as HTMLFormElement).response.value);
        }}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'ask'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AskComponent</span> <span class="hljs-attr">question</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'approval'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ApproveComponent</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>é€‰æ‹©è‡ªå®šä¹‰èŠå¤© UI æ—¶ï¼ŒæŸäº›æƒ…å†µå¯èƒ½éœ€è¦é¢„å¤„ç†ä¸­æ–­äº‹ä»¶çš„ä¼ å…¥å€¼ï¼Œç”šè‡³éœ€è¦å®Œå…¨è§£æå®ƒè€Œä¸æ˜¾ç¤ºå…¶ UIã€‚è¿™å¯ä»¥ä½¿ç”¨ <code>handeer</code> å±æ€§æ¥å®ç°ï¼Œè¯¥å±æ€§ä¸éœ€è¦è¿”å›ä¸€ä¸ª React ç»„ä»¶ã€‚ å¤„ç†ç¨‹åºçš„è¿”å›å€¼å°†ä½œä¸ºç»“æœå‚æ•°ä¼ é€’ç»™ render æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-comment">// We will assume an interrupt event in the following shape</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Department</span> = <span class="hljs-string">'finance'</span> | <span class="hljs-string">'engineering'</span> | <span class="hljs-string">'admin'</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AuthorizationInterruptEvent</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'auth'</span>,
    <span class="hljs-attr">accessDepartment</span>: <span class="hljs-title class_">Department</span>,
}

<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [userEmail, setUserEmail] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">'example@user.com'</span> })
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserByEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">department</span>: <span class="hljs-title class_">Department</span> } {
        <span class="hljs-comment">// ... an implementation of user fetching</span>
    }

    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ result, event, resolve }) =&gt; {
            <span class="hljs-keyword">const</span> { department } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserByEmail</span>(userEmail)
            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">value</span>.<span class="hljs-property">accessDepartment</span> === department || department === <span class="hljs-string">'admin'</span>) {
                <span class="hljs-comment">// Following the resolution of the event, we will not proceed to the render method</span>
                <span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">code</span>: <span class="hljs-string">'AUTH_BY_DEPARTMENT'</span> })
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">return</span> { department, userId }
        },
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ result, event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Request for {event.value.type}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Members from {result.department} department cannot access this information<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You can request access from an administrator to continue.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'REQUEST_AUTH', data: { department: result.department, userId: result.userId } })}
                &gt;
                    Request Access
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'CANCEL' })}
                &gt;
                    Cancel
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    });
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-20">åŸºäºå‰ç«¯å·¥å…·</h3>
<p>å‰ç«¯å·¥å…·å¯ä»¥ç”¨åœ¨å¤šç§æ–¹å¼ä¸Šã€‚å…¶ä¸­ä¸€ç§æ–¹å¼æ˜¯æœ‰äººå·¥ä»‹å…¥çš„æµç¨‹ï¼Œå·¥å…·çš„å“åº”ç”±ç”¨æˆ·çš„å†³å®šæ¥æ§åˆ¶ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿä¸€ä¸ªç”¨äºæ‰§è¡Œå‘½ä»¤çš„â€œæ‰¹å‡†â€æµç¨‹ã€‚é¦–å…ˆï¼Œä½¿ç”¨<code>useHumanInTheLoop</code>é’©å­æ¥åˆ›å»ºä¸€ä¸ªæç¤ºç”¨æˆ·æ‰¹å‡†çš„å·¥å…·ã€‚</p>
<p>è¦è®¿é—®ç”± CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œæ‚¨å¯ä»¥åœ¨agentçš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿è‡ª CopilotKitState:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ç»ä¸Šè¿°æ“ä½œï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥è°ƒç”¨å‰ç«¯å·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.tsx</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-21">åŸºäºèŠ‚ç‚¹</h3>
<p>LangGraph å’Œ CopilotKit ç°åœ¨éƒ½ä¸é¼“åŠ±ä½¿ç”¨åŸºäºèŠ‚ç‚¹çš„ä¸­æ–­ã€‚ä» LangGraph 0.2.57 å¼€å§‹ï¼Œæ¨èçš„è®¾ç½®æ–­ç‚¹çš„æ–¹æ³•æ˜¯ä½¿ç”¨ interrupt å‡½æ•° ï¼Œå› ä¸ºå®ƒç®€åŒ–äº†äººæœºäº¤äº’æ¨¡å¼ã€‚</p>
<p>æƒ³è¦äº†è§£å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fhuman-in-the-loop%2Fnode-flow" target="_blank" title="https://docs.copilotkit.ai/langgraph/human-in-the-loop/node-flow" ref="nofollow noopener noreferrer">è¿™é‡Œ</a></p>
<h2 data-id="heading-22">çŠ¶æ€å…±äº«</h2>
<p>åœ¨ UI å’Œ LangGraph agent çŠ¶æ€ä¹‹é—´åˆ›å»ºåŒå‘è¿æ¥ã€‚</p>
<h3 data-id="heading-23">è¯»å–agentçŠ¶æ€</h3>
<p>ä¸ä»…å¯ä»¥åœ¨èŠå¤©ç•Œé¢ä¸­ä½¿ç”¨å®æ—¶ä»£ç†çŠ¶æ€ï¼Œè¿˜å¯ä»¥åœ¨åŸç”Ÿåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p>
<p>LangGraph æ˜¯æœ‰çŠ¶æ€çš„ã€‚åœ¨èŠ‚ç‚¹ä¹‹é—´è½¬æ¢æ—¶ï¼Œè¯¥çŠ¶æ€å°†æ›´æ–°å¹¶ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾agentçŠ¶æ€å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-comment">// If language is not defined, use a default value.</span>
  <span class="hljs-keyword">const</span> language = state.<span class="hljs-property">language</span> ?? <span class="hljs-string">'spanish'</span>

  <span class="hljs-comment">// ... add the rest of the node implementation and use the language variable</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// ... add the rest of state to return</span>
    <span class="hljs-comment">// return the language to make it available for the next nodes &amp; frontend to read</span>
    language
  }
}
</code></pre>
<p>å‰ç«¯è°ƒç”¨ <code>useCoAgent</code> é’©å­ï¼Œä¼ é€’agentçš„åç§°ï¼Œå¹¶é€‰æ‹©æ€§åœ°æä¾›åˆå§‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//pages.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> // [!code highlight]
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong><code>useCoAgent</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°</strong></p>
<h4 data-id="heading-24">åœ¨èŠå¤©ä¸­æ¸²æŸ“ agent çŠ¶æ€</h4>
<p>å¯ä»¥ä½¿ç”¨ <code>useCoAgentStateRender</code> é’©å­ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useCoAgentStateRender</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">language</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong><code>useCoAgentStateRender</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</strong></p>
<h3 data-id="heading-25">å†™å…¥agentçŠ¶æ€</h3>
<p>å‡è®¾ agent çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agebt.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p><code>useCoAgent</code> è¿”å›ä¸€ä¸ª <code>setState</code> å‡½æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°æ¥æ›´æ–°ä»£ç†çŠ¶æ€ã€‚è°ƒç”¨è¿™ä¸ªå°†æ›´æ–°ä»£ç†çŠ¶æ€å¹¶è§¦å‘ä¾èµ–äºä»£ç†çŠ¶æ€çš„ä»»ä½•å†…å®¹çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-comment">// Example usage in a pseudo React component</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span> }); 
  };

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleLanguage}</span>&gt;</span>Toggle Language<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-26">é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-27">é‡æ–°è¿è¡Œagentï¼Œå¹¶æç¤ºæ›´æ”¹å†…å®¹</h5>
<p>æ–°çš„ agent çŠ¶æ€å°†åœ¨ä¸‹æ¬¡ agent è¿è¡Œæ—¶ä½¿ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨é‡æ–°è¿è¡Œå®ƒï¼Œè¯·åœ¨<code>useCoAgent</code>é’©å­ä¸Šä½¿ç”¨<code>run</code>å‚æ•°ã€‚
agentå°†é‡æ–°è¿è¡Œï¼Œå®ƒä¸ä»…ä¼šè·å¾—æœ€æ–°çš„æ›´æ–°çŠ¶æ€ï¼Œè¿˜ä¼šè·å¾—å¯èƒ½å–å†³äºä»¥å‰çŠ¶æ€å’Œå½“å‰çŠ¶æ€ä¹‹é—´çš„æ•°æ®å¢é‡çš„æç¤º ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextMessage</span>, <span class="hljs-title class_">MessageRole</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;  

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState, run } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// setup to be called when some event in the app occurs</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> newLanguage = state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span>;
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: newLanguage });

    <span class="hljs-comment">// re-run the agent and provide a hint about what's changed</span>
    <span class="hljs-title function_">run</span>(<span class="hljs-function">(<span class="hljs-params">{ previousState, currentState }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({
        <span class="hljs-attr">role</span>: <span class="hljs-title class_">MessageRole</span>.<span class="hljs-property">User</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`the language has been updated to <span class="hljs-subst">${currentState.language}</span>`</span>,
      });
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// ...</span>
  );
}
</code></pre>
<h3 data-id="heading-28">agentçŠ¶æ€è¾“å…¥å’Œè¾“å‡º</h3>
<p>æœ‰äº›å±æ€§æ˜¯å†…éƒ¨å¤„ç†çš„ï¼Œè€Œå¦ä¸€äº›åˆ™æ˜¯ UI ä¼ é€’ç”¨æˆ·è¾“å…¥çš„æ–¹å¼ã€‚æ­¤å¤–ï¼Œæœ‰äº›çŠ¶æ€å±æ€§åŒ…å«å¤§é‡ä¿¡æ¯ã€‚åœ¨agentå’Œ UI ä¹‹é—´æ¥å›åŒæ­¥å®ƒä»¬å¯èƒ½æˆæœ¬é«˜æ˜‚ï¼Œè€Œä¸”å¯èƒ½æ²¡æœ‰å®é™…å¥½å¤„ã€‚</p>
<p>å‡è®¾çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
  <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;, <span class="hljs-comment">//æœŸæœ›LLMå›ç­”çš„é—®é¢˜</span>
  <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,<span class="hljs-comment">//LLMå›åº”çš„ç­”æ¡ˆ</span>
  <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,<span class="hljs-comment">//ç”¨äºLLMå›ç­”é—®é¢˜ï¼Œä¸åº”å‘ç”¨æˆ·åŒæ­¥</span>
})
</code></pre>
<p>agentå®šä¹‰è¾“å…¥è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

  <span class="hljs-comment">// Divide the state to 3 parts</span>

  <span class="hljs-comment">// An input schema for inputs you are willing to accept from the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">InputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// Output schema for output you are willing to pass to the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">OutputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// The full schema, including the inputs, outputs and internal state ("resources" in our case)</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">OutputAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">InputAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,
  });

  <span class="hljs-comment">// Define a typed state that supports the entire</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">answerNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>()

    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
      <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant. Answer the question: <span class="hljs-subst">${state.question}</span>.`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>(
      [systemMessage, ...state.<span class="hljs-property">messages</span>],
      config
    );

    <span class="hljs-comment">// ...add the rest of the agent implementation</span>
    <span class="hljs-comment">// extract the answer, which will be assigned to the state soon</span>
    <span class="hljs-keyword">const</span> answer = response.<span class="hljs-property">content</span>

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">messages</span>: response,
      <span class="hljs-comment">// include the answer in the returned state</span>
      answer,
    }
  }

  <span class="hljs-comment">// finally, before compiling the graph, we define the 3 state components</span>
  <span class="hljs-keyword">const</span> workflow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>({
    <span class="hljs-attr">input</span>: <span class="hljs-title class_">InputAnnotation</span>,
    <span class="hljs-attr">output</span>: <span class="hljs-title class_">OutputAnnotation</span>,
    <span class="hljs-comment">// @ts-expect-error -- LangGraph does not expect a "full schema with internal properties".</span>
    <span class="hljs-attr">stateSchema</span>: <span class="hljs-title class_">AgentStateAnnotation</span>,
  })
    .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"answer_node"</span>, answerNode) <span class="hljs-comment">// add all the different nodes and edges and compile the graph</span>
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"answer_node"</span>)
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"answer_node"</span>, <span class="hljs-variable constant_">END</span>)
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> graph = workflow.<span class="hljs-title function_">compile</span>()
</code></pre>
<h3 data-id="heading-29">é¢„æµ‹çŠ¶æ€æ›´æ–°</h3>
<p>ä¸€ä¸ªLangGraph agentçš„çŠ¶æ€æ›´æ–°æ˜¯ä¸è¿ç»­çš„ï¼›ä»…åœ¨å›¾ä¸­çš„èŠ‚ç‚¹è½¬æ¢ä¹‹é—´è¿›è¡Œã€‚ä½†æ˜¯ï¼Œå›¾ä¸­å•ä¸ªèŠ‚ç‚¹è¿è¡Œå¾€å¾€éœ€è¦è®¸å¤šç§’ï¼Œå¹¶ä¸”åŒ…å«ç”¨æˆ·æ„Ÿå…´è¶£çš„å­æ­¥éª¤ã€‚</p>
<p>é¢„æµ‹çŠ¶æ€æ›´æ–°å¸®åŠ©æˆ‘ä»¬å‘ç”¨æˆ·å°½å¯èƒ½è¿ç»­çš„ååº” agent æ­£åœ¨æ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>å½“ä½ çš„LangGraphä¸­çš„èŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå…¶è¿”å›çš„çŠ¶æ€æˆä¸ºå”¯ä¸€çš„çœŸå®æ¥æºã€‚è™½ç„¶ä¸­é—´çŠ¶æ€æ›´æ–°å¯¹äºå®æ—¶åé¦ˆå¾ˆæœ‰å¸®åŠ©ï¼Œä½†ä»»ä½•ä½ æƒ³æŒä¹…åŒ–çš„æ›´æ”¹éƒ½å¿…é¡»æ˜ç¡®åœ°åŒ…å«åœ¨èŠ‚ç‚¹çš„æœ€ç»ˆè¿”å›çŠ¶æ€ä¸­ã€‚å¦åˆ™ï¼Œå®ƒä»¬å°†åœ¨èŠ‚ç‚¹å®Œæˆæ—¶è¢«è¦†ç›–ã€‚</p>
<p>åœ¨çŠ¶æ€ä¸­å®šä¹‰ä¸€ä¸ª <code>observed_steps</code> å­—æ®µï¼Œè¯¥å­—æ®µå°†åœ¨agentç¼–å†™æŠ¥å‘Šçš„ä¸åŒéƒ¨åˆ†æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,  <span class="hljs-comment">// Array of completed steps</span>
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>æœ‰ä¸¤ç§å‘å‡ºçŠ¶æ€æ›´æ–°çš„æ–¹å¼ï¼šæ‰‹åŠ¨é¢„æµ‹å’ŒåŸºäºå·¥å…·çš„é¢„æµ‹ã€‚</p>
<h4 data-id="heading-30">æ‰‹åŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¯ä»¥é€æ­¥å‘å‡ºçŠ¶æ€æ›´æ–°ï¼Œä½œä¸ºæœ€ç»ˆçŠ¶æ€çš„é¢„æµ‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—å¸¦æœ‰æ¯æ¬¡æ›´æ–°ä¹‹é—´ä¸€ç§’å»¶è¿Ÿçš„æ­¥éª¤æ¥æ¨¡æ‹Ÿä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitEmitState } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// Simulate executing steps one by one</span>
    <span class="hljs-keyword">const</span> steps = [
        <span class="hljs-string">"Analyzing input data..."</span>,
        <span class="hljs-string">"Identifying key patterns..."</span>,
        <span class="hljs-string">"Generating recommendations..."</span>,
        <span class="hljs-string">"Formatting final output..."</span>
    ];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> steps) {
        state.<span class="hljs-property">observed_steps</span> = [...(state.<span class="hljs-property">observed_steps</span> ?? []), step];
        <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    }
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-31">åŸºäºå·¥å…·é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæ‚¨å¯ä»¥é…ç½® CopilotKit åœ¨æ‰§è¡Œç‰¹å®šå·¥å…·è°ƒç”¨æ—¶è‡ªåŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†é…ç½® CopilotKit åœ¨ LLM è°ƒç”¨æ­¥éª¤è¿›åº¦å·¥å…·æ—¶é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitCustomizeConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/sdk-js/langgraph'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">frontendActionsNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AgentState</span>&gt; {
    <span class="hljs-keyword">const</span> modifiedConfig = <span class="hljs-title function_">copilotkitCustomizeConfig</span>(config, {
        <span class="hljs-attr">emitIntermediateState</span>: [
        {
            <span class="hljs-attr">stateKey</span>: <span class="hljs-string">"observed_steps"</span>,
            <span class="hljs-attr">tool</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">toolArgument</span>: <span class="hljs-string">"steps"</span>,
        },
        ],
    });

    <span class="hljs-keyword">const</span> stepProgress = <span class="hljs-title function_">tool</span>(
        <span class="hljs-keyword">async</span> (args) =&gt; args,
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">"Records progress by updating the steps array"</span>,
            <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
                <span class="hljs-attr">steps</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()),
            }),
        }
    );

    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span>,
    }).<span class="hljs-title function_">bindTools</span>([stepProgress]);

    <span class="hljs-keyword">const</span> system_message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a task performer. Pretend doing tasks you are given, report the steps using StepProgressTool."</span>)
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>([system_message, ...state.<span class="hljs-property">messages</span>], modifiedConfig);


    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">messages</span>: response;
            <span class="hljs-attr">observed_steps</span>: response.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">args</span>.<span class="hljs-property">steps</span>,
        }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">messages</span>: response };
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h2 data-id="heading-32">å­å›¾</h2>
<p>ä¸€ä¸ªå­å›¾ç®€å•åœ°æ˜¯ä½œä¸ºå¦ä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹ä½¿ç”¨çš„å›¾ã€‚æŠŠå®ƒçœ‹ä½œæ˜¯LangGraphçš„å°è£…ï¼šæ¯ä¸ªå­å›¾æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å•å…ƒï¼Œå¯ä»¥ç»„åˆèµ·æ¥æ„å»ºæ›´å¤§ã€æ›´å¤æ‚çš„ç³»ç»Ÿã€‚</p>
<p>ä½¿ç”¨æ­¤åŠŸèƒ½ä¸éœ€è¦åœ¨agentç«¯æ‰§è¡Œé¢å¤–æ­¥éª¤ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯åœ¨ useCoAgent é’©å­ä¸­å¯ç”¨å­å›¾æµï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">  <span class="hljs-keyword">const</span> { state, nodeName } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: <span class="hljs-variable constant_">INITIAL_STATE</span>,
    <span class="hljs-attr">config</span>: {
      <span class="hljs-attr">streamSubgraphs</span>: <span class="hljs-literal">true</span>, 
    }
  });
</code></pre>
<p>å­å›¾èŠ‚ç‚¹å°†ç…§å¸¸æµå¼ä¼ è¾“ï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ <code>nodeName</code> å˜é‡æŸ¥çœ‹å“ªä¸ªå­å›¾æ­£åœ¨æµå¼ä¼ è¾“ã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»å­å›¾ä½¿ç”¨ <code>interruptï¼ˆï¼‰</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7576825095134986266</link>    <guid>https://juejin.cn/post/7576825095134986266</guid>    <pubDate>2025-11-26T05:57:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576825095134986266" data-draft-id="7576669556150190118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T05:57:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±…ç„¶JuRan"/> <meta itemprop="url" content="https://juejin.cn/user/2524134427858205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134427858205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±…ç„¶JuRan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T05:57:07.000Z" title="Wed Nov 26 2025 05:57:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ç»™å¤§æ¨¡å‹"ç˜¦èº«"?</h2>
<p>åœ¨AIæŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©,å¤§è¯­è¨€æ¨¡å‹å·²ç»æˆä¸ºå„è¡Œå„ä¸šçš„å¾—åŠ›åŠ©æ‰‹ã€‚ä½†ä½ æ˜¯å¦çŸ¥é“,éƒ¨ç½²ä¸€ä¸ªå¤§æ¨¡å‹çš„æˆæœ¬æœ‰å¤šé«˜?</p>
<p>ä¸€ä¸ªåƒäº¿å‚æ•°çº§åˆ«çš„æ¨¡å‹,ä¸ä»…éœ€è¦å ç”¨å¤§é‡çš„å­˜å‚¨ç©ºé—´,åœ¨å®é™…è¿è¡Œæ—¶æ›´æ˜¯éœ€è¦æƒŠäººçš„è®¡ç®—èµ„æºã€‚å¯¹äºä¼ä¸šæ¥è¯´,è¿™æ„å‘³ç€é«˜æ˜‚çš„ç¡¬ä»¶æˆæœ¬å’Œè¿è¥å¼€æ”¯ã€‚å› æ­¤,å¦‚ä½•åœ¨ä¿æŒæ¨¡å‹æ€§èƒ½çš„åŒæ—¶é™ä½éƒ¨ç½²æˆæœ¬,æˆä¸ºäº†AIå·¥ç¨‹å¸ˆä»¬å¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚</p>
<p>ä»Šå¤©,æˆ‘ä»¬å°±æ¥èŠèŠå¤§æ¨¡å‹å‹ç¼©çš„ä¸¤å¤§ä¸»æµæŠ€æœ¯â€”â€”<strong>é‡åŒ–(Quantization)å’Œè’¸é¦(Distillation)</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb122be11df49e0b2e47cbda4123427~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=xUqEIgMf6B0xrbulchmQuih2GlY%3D" alt="å¤§æ¨¡å‹å‹ç¼©æŠ€æœ¯æ¦‚è§ˆ" loading="lazy"/></p>
<h2 data-id="heading-1">é‡åŒ–:ç”¨æ›´å°‘çš„ä½æ•°å­˜å‚¨å‚æ•°</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯é‡åŒ–?</h3>
<p>è¦ç†è§£é‡åŒ–,æˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“:å¤§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ç”±æµ·é‡å‚æ•°ç»„æˆçš„ã€‚æ¯”å¦‚GPT-3,å°±åŒ…å«äº†1750äº¿ä¸ªå‚æ•°ã€‚æ¯ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ªæ•°å€¼,è€Œè¿™äº›æ•°å€¼çš„å­˜å‚¨æ–¹å¼,ç›´æ¥å†³å®šäº†æ¨¡å‹å ç”¨çš„ç©ºé—´å¤§å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52330fabeb214786abcfba009f5b1a54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=pSf6HinPuv6%2BzRgb9BBfXvk51ew%3D" alt="é‡åŒ–åŸç†è§£é‡Š" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚å‡è®¾æŸä¸ªå‚æ•°çš„å€¼æ˜¯1.2768,ä¸ºäº†åœ¨è®¡ç®—æœºä¸­å­˜å‚¨è¿™ä¸ªç²¾ç¡®çš„æ•°å€¼,æˆ‘ä»¬éœ€è¦å¼€è¾Ÿä¸€å®šçš„å†…å­˜ç©ºé—´ã€‚ä½†å¦‚æœæˆ‘ä»¬åšä¸ª"å››èˆäº”å…¥",æŠŠå®ƒç®€åŒ–æˆ1æˆ–è€…1.28,æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å°±ä¼šå¤§å¤§å‡å°‘ã€‚</p>
<p><strong>è¿™å°±æ˜¯é‡åŒ–çš„æ ¸å¿ƒæ€æƒ³â€”â€”é€šè¿‡é™ä½æ•°å€¼ç²¾åº¦æ¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</strong></p>
<h3 data-id="heading-3">ä»Float32åˆ°INT8çš„è½¬å˜</h3>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­,å‚æ•°é€šå¸¸ä»¥Float32çš„æ ¼å¼å­˜å‚¨,ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå‚æ•°å ç”¨32ä¸ªbits(4ä¸ªå­—èŠ‚)çš„ç©ºé—´ã€‚ä½†é€šè¿‡é‡åŒ–æŠ€æœ¯,æˆ‘ä»¬å¯ä»¥å°†è¿™äº›å‚æ•°è½¬æ¢ä¸ºæ›´ä½ç²¾åº¦çš„æ•°æ®ç±»å‹:</p>
<ul>
<li>
<p><strong>Float32 â†’ Float16</strong>:ç©ºé—´å‡åŠ,æ¯ä¸ªå‚æ•°ä»…å 16ä¸ªbits</p>
</li>
<li>
<p><strong>Float32 â†’ INT8</strong>:ç©ºé—´å‹ç¼©è‡³1/4,æ¯ä¸ªå‚æ•°ä»…å 8ä¸ªbits</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33d3fcb13a374856b9dcb900473adbce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=QQEPn3g8hMDSsGwBjZrtfFDWChg%3D" alt="æ•°æ®ç±»å‹è½¬æ¢ç¤ºæ„" loading="lazy"/></p>
<p>è¿™ç§è½¬æ¢å¸¦æ¥çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„:</p>
<ol>
<li>
<p><strong>å¤§å¹…é™ä½å­˜å‚¨éœ€æ±‚</strong>:æ¨¡å‹æ–‡ä»¶å˜å°,æ›´å®¹æ˜“éƒ¨ç½²</p>
</li>
<li>
<p><strong>åŠ é€Ÿæ¨ç†é€Ÿåº¦</strong>:è®¡ç®—é‡å‡å°‘,å“åº”æ›´å¿«</p>
</li>
<li>
<p><strong>é™ä½æˆæœ¬</strong>:å¯¹ç¡¬ä»¶çš„è¦æ±‚å¤§å¹…ä¸‹é™</p>
</li>
</ol>
<p>ä½ å¯èƒ½ä¼šæ‹…å¿ƒ:ç²¾åº¦é™ä½äº†,æ¨¡å‹çš„å‡†ç¡®ç‡ä¼šä¸ä¼šå—å½±å“?</p>
<p>ç­”æ¡ˆæ˜¯:**å¦‚æœé‡åŒ–è¿‡ç¨‹æŠŠæ§å¾—å½“,æ¨¡å‹çš„å‡†ç¡®ç‡æ˜¯æœ‰ä¿éšœçš„ã€‚**è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé‡åŒ–æˆä¸ºç›®å‰å¤§æ¨¡å‹å‹ç¼©æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-4">è’¸é¦:è®©å°æ¨¡å‹å­¦ä¼š"æ¨¡ä»¿"</h2>
<h3 data-id="heading-5">è’¸é¦çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ?</h3>
<p>å¦‚æœè¯´é‡åŒ–æ˜¯"å‹ç¼©å‚æ•°",é‚£ä¹ˆè’¸é¦åˆ™æ˜¯å®Œå…¨ä¸åŒçš„æ€è·¯â€”â€”<strong>è®©ä¸€ä¸ªå°æ¨¡å‹å»æ¨¡ä»¿å¤§æ¨¡å‹çš„è¡Œä¸º</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad612a7432bc401ba6d549483e411cc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=Selr8ftFG1%2FKCdLwZulvF0z%2BAW0%3D" alt="æ¨¡å‹è’¸é¦åŸç†" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯:æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªåƒäº¿å‚æ•°çš„å¤§æ¨¡å‹,ä½†å®ƒå¤ªå¤§å¤ªé‡,éƒ¨ç½²æˆæœ¬å¤ªé«˜ã€‚è¿™æ—¶å€™,æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå°å¾—å¤šçš„æ¨¡å‹,ç„¶åè®©è¿™ä¸ª"å­¦ç”Ÿæ¨¡å‹"(Student Model)å»å­¦ä¹ "æ•™å¸ˆæ¨¡å‹"(Teacher Model)çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-6">è’¸é¦æ˜¯å¦‚ä½•å·¥ä½œçš„?</h3>
<p>å…·ä½“æ¥è¯´,è’¸é¦çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„:</p>
<ol>
<li>
<p>ç»™å®šä¸€ä¸ªè¾“å…¥(æ¯”å¦‚ä¸€ä¸ªprompt)</p>
</li>
<li>
<p>å°†è¿™ä¸ªè¾“å…¥åŒæ—¶å–‚ç»™å¤§æ¨¡å‹å’Œå°æ¨¡å‹</p>
</li>
<li>
<p>è§‚å¯Ÿå¤§æ¨¡å‹çš„è¾“å‡º</p>
</li>
<li>
<p>è®­ç»ƒå°æ¨¡å‹,è®©å®ƒçš„è¾“å‡ºå°½å¯èƒ½æ¥è¿‘å¤§æ¨¡å‹çš„è¾“å‡º</p>
</li>
</ol>
<p><strong>å°±åƒå°å­©å­æ¨¡ä»¿å¤§äººä¸€æ ·,å¤§æ¨¡å‹åšä»€ä¹ˆ,å°æ¨¡å‹ä¹Ÿå­¦ç€åšä»€ä¹ˆã€‚</strong></p>
<p>é€šè¿‡è¿™ç§æ–¹å¼,å°æ¨¡å‹é€æ¸å­¦ä¼šäº†å¤§æ¨¡å‹çš„"è¡Œä¸ºæ¨¡å¼",æœ€ç»ˆèƒ½å¤Ÿåœ¨ä¿æŒç›¸ä¼¼æ€§èƒ½çš„åŒæ—¶,å¤§å¹…å‡å°‘æ¨¡å‹è§„æ¨¡å’Œè®¡ç®—å¼€é”€ã€‚</p>
<h3 data-id="heading-7">è’¸é¦åœ¨å®é™…ä¸­çš„åº”ç”¨</h3>
<p>è’¸é¦æŠ€æœ¯ä¸ä»…ç”¨äºæ¨¡å‹å‹ç¼©,åœ¨è®­ç»ƒæ–°æ¨¡å‹æ—¶ä¹Ÿç»å¸¸ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/795d7eabee8d40d7ac4381417456b8f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=yuPYq1MLtEck17Uwlt0MCoTUmKQ%3D" alt="è’¸é¦åº”ç”¨åœºæ™¯" loading="lazy"/></p>
<p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯:å¸‚é¢ä¸Šå¾ˆå¤šå¼€æºå¤§æ¨¡å‹,éƒ½æ˜¯é€šè¿‡"æ¨¡ä»¿"GPT-4è®­ç»ƒå‡ºæ¥çš„ã€‚å…·ä½“åšæ³•æ˜¯:</p>
<ol>
<li>
<p>æ”¶é›†GPT-4å¯¹å„ç§é—®é¢˜çš„å›å¤</p>
</li>
<li>
<p>å°†è¿™äº›è¾“å…¥-è¾“å‡ºå¯¹ä½œä¸ºè®­ç»ƒæ•°æ®</p>
</li>
<li>
<p>ç”¨è¿™äº›æ•°æ®è®­ç»ƒè‡ªå·±çš„æ¨¡å‹</p>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼,å¼€æºæ¨¡å‹èƒ½å¤Ÿé€æ­¥æ¥è¿‘GPT-4çš„è¡¨ç°,åŒæ—¶ä¿æŒæ›´ä½çš„éƒ¨ç½²æˆæœ¬ã€‚</p>
<h2 data-id="heading-8">é‡åŒ–vsè’¸é¦:è¯¥é€‰å“ªä¸€ä¸ª?</h2>
<p>è¿™ä¸¤ç§æŠ€æœ¯å„æœ‰ç‰¹ç‚¹,é€‚ç”¨äºä¸åŒåœºæ™¯:</p>
<p><strong>é‡åŒ–æŠ€æœ¯</strong>:</p>
<ul>
<li>
<p>ä¼˜åŠ¿:å®æ–½ç®€å•,ä¸éœ€è¦é‡æ–°è®­ç»ƒ,å‹ç¼©æ•ˆæœæ˜æ˜¾</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯:å·²æœ‰æ¨¡å‹çš„å¿«é€Ÿä¼˜åŒ–,å¯¹ç²¾åº¦è¦æ±‚ä¸æ˜¯ç‰¹åˆ«ä¸¥æ ¼çš„åº”ç”¨</p>
</li>
<li>
<p>ä¸»æµæ–¹æ³•:ç›®å‰å¤§æ¨¡å‹å‹ç¼©æœ€å¸¸ç”¨çš„æ‰‹æ®µ</p>
</li>
</ul>
<p><strong>è’¸é¦æŠ€æœ¯</strong>:</p>
<ul>
<li>
<p>ä¼˜åŠ¿:å¯ä»¥è·å¾—ä¸€ä¸ªå…¨æ–°çš„å°æ¨¡å‹,çµæ´»æ€§æ›´é«˜</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯:éœ€è¦å¤§å¹…åº¦ç¼©å°æ¨¡å‹è§„æ¨¡,æˆ–è®­ç»ƒæ–°æ¨¡å‹æ—¶å€Ÿé‰´å¤§æ¨¡å‹èƒ½åŠ›</p>
</li>
<li>
<p>åº”ç”¨å¹¿æ³›:å¾ˆå¤šå¼€æºæ¨¡å‹éƒ½åŸºäºè’¸é¦æ€è·¯è®­ç»ƒ</p>
</li>
</ul>
<p>åœ¨å®é™…åº”ç”¨ä¸­,è¿™ä¸¤ç§æŠ€æœ¯ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨,è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœã€‚</p>
<h2 data-id="heading-9">å…¶ä»–å‹ç¼©æŠ€æœ¯</h2>
<p>é™¤äº†é‡åŒ–å’Œè’¸é¦,è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¨¡å‹å‹ç¼©æŠ€æœ¯,æ¯”å¦‚<strong>å‰ªæ(Pruning)</strong>â€”â€”é€šè¿‡ç§»é™¤æ¨¡å‹ä¸­ä¸é‡è¦çš„å‚æ•°æˆ–è¿æ¥æ¥å‡å°æ¨¡å‹è§„æ¨¡ã€‚</p>
<p>ä½†åœ¨å¤§æ¨¡å‹é¢†åŸŸ,å‰ªæçš„å®ç”¨æ€§ç›¸å¯¹è¾ƒå¼±,é‡åŒ–å’Œè’¸é¦ä»ç„¶æ˜¯æœ€ä¸»æµã€æœ€å®ç”¨çš„ä¸¤ç§æ–¹æ³•ã€‚</p>
<h2 data-id="heading-10">å†™åœ¨æœ€å</h2>
<p>éšç€å¤§æ¨¡å‹åº”ç”¨çš„ä¸æ–­æ™®åŠ,æ¨¡å‹å‹ç¼©æŠ€æœ¯å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æ— è®ºæ˜¯é‡åŒ–è¿˜æ˜¯è’¸é¦,å®ƒä»¬çš„ç›®æ ‡éƒ½æ˜¯åœ¨ä¿è¯æ¨¡å‹æ€§èƒ½çš„å‰æä¸‹,è®©AIæŠ€æœ¯æ›´åŠ "å¹³æ°‘åŒ–"â€”â€”é™ä½éƒ¨ç½²é—¨æ§›,è®©æ›´å¤šäººèƒ½å¤Ÿç”¨å¾—èµ·ã€ç”¨å¾—å¥½å¤§æ¨¡å‹ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´,ç†è§£è¿™äº›æŠ€æœ¯åŸç†,ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°éƒ¨ç½²æ¨¡å‹,ä¹Ÿèƒ½åœ¨è®¾è®¡AIåº”ç”¨æ—¶åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>ä½ åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿‡è¿™äº›æŠ€æœ¯å—?æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒ!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576821684252475435</link>    <guid>https://juejin.cn/post/7576821684252475435</guid>    <pubDate>2025-11-26T12:36:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252475435" data-draft-id="7576859345935089718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="Trae,Solo,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T12:36:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:36:45.000Z" title="Wed Nov 26 2025 12:36:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸€é˜µå­åˆ·åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æ“ä½œï¼šæœ‰äººç›´æ¥æŠŠä¸€å°æœåŠ¡å™¨çš„æƒé™æ‰”ç»™äº† AIï¼Œå¹¶ç®€å•è¯´äº†å¥ç›®æ ‡ã€‚</p>
<p>ç„¶åï¼ŒAI å°±ä»é›¶å¼€å§‹å®‰è£…ç¯å¢ƒã€é…ä¾èµ–ï¼Œæ‹‰ä»“åº“ï¼Œå¯åŠ¨æœåŠ¡ï¼Œæœ€åæˆåŠŸå®Œæˆäº†å¯¹å¤–æœåŠ¡çš„æä¾›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å°è¯•ä¸‹è¿™ä¸ªæ€è·¯ï¼šè®© <code>TRAE SOLO</code> è‡ªè¡Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸­æ­å»ºä¸€å¥— <code>MinerU</code> ç¯å¢ƒã€‚</p>
<h2 data-id="heading-0">MinerU</h2>
<p>é¦–å…ˆï¼Œç®€å•ä»‹ç»ä¸‹ <code>MinerU</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f6d82478d04e299eb19d753a2feee7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=eyAcvMYv80Ko0lYxi894%2BhOMfN4%3D" alt="" loading="lazy"/></p>
<p><code>MinerU</code> æ˜¯ä¸€æ¬¾èƒ½å°†<strong>PDF/å›¾ç‰‡è½¬æ¢ä¸ºæœºå™¨å¯è¯»æ ¼å¼</strong>ï¼ˆä¾‹å¦‚ <code>markdown</code>ã€<code>JSON</code>ï¼‰çš„å·¥å…·ï¼Œè¯ç”Ÿäºä¸Šæµ·äººå·¥æ™ºèƒ½å®éªŒå®¤å‡ºå“å¤§æ¨¡å‹ <code>InternLM</code> çš„é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ã€‚</p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¤šæ¨¡æ€æ–‡æ¡£è§£æ</strong>ï¼šæ”¯æŒå¤šç§æ–‡æ¡£ç±»å‹ï¼ŒåŒ…æ‹¬æ‰«æç‰ˆ PDF</li>
<li><strong>ç»“æ„åŒ–è¿˜åŸ</strong>ï¼šå¯è¯†åˆ«è¡¨æ ¼ã€å…¬å¼ã€åˆ†å­å¼ç­‰</li>
<li><strong>é«˜ä¿çœŸè¯­ä¹‰ç†è§£</strong>ï¼šåˆ©ç”¨å¸ƒå±€åˆ†æå’Œé˜…è¯»é¡ºåºæ¨ç†ï¼Œé¿å…ä¼ ç»Ÿ OCR æœºæ¢°è¯†åˆ«å¯¼è‡´çš„é€»è¾‘é”™ä¹±ã€‚</li>
<li><strong>æœ¬åœ°åŒ– &amp; å¼€æºå…è´¹</strong>ï¼šå…¨éƒ¨æ¨¡å‹å’Œä»£ç å¼€æºï¼Œå¯ç§æœ‰éƒ¨ç½²ï¼Œæ— éœ€è°ƒç”¨å¤–éƒ¨ APIï¼Œä¿éšœæ•°æ®éšç§ã€‚</li>
</ul>
<h2 data-id="heading-1">å…±ç»©ç®—åŠ›</h2>
<p>AI è¦éƒ¨ç½²çš„åº”ç”¨å·²ç»äº†è§£äº†ï¼Œç°åœ¨éœ€è¦ç»™ AI æ‰¾ä¸€ä¸ªå¯ä»¥æ“ä½œçš„æœåŠ¡å™¨ã€‚</p>
<p>æœ€è¿‘æˆ‘ä½¿ç”¨çš„ç®—åŠ›å¹³å°æ˜¯â€œå…±ç»©ç®—åŠ›â€ï¼Œ<code>RTX 4090</code> åªè¦ <code>1.68</code> å…ƒ/å°æ—¶ï¼Œè¿˜èƒ½æŒ‰æ¯«ç§’è®¡è´¹ã€è‡ªåŠ¨æ‰©å®¹ï¼Œéå¸¸ä¾¿äºæˆ‘æ ¹æ®ç ”ç©¶çš„æ¨¡å‹æŒ‘é€‰åˆé€‚çš„èŠ‚ç‚¹é…ç½®ã€‚</p>
<p>å°¤å…¶æ˜¯ç›®å‰ï¼Œå¹³å°è¿˜æœ‰ç¦åˆ©ï¼Œ<strong>æ³¨å†Œå°±é€ç®—åŠ›åˆ¸</strong>ã€‚</p>
<h2 data-id="heading-2">å®æ“è®°å½•</h2>
<h3 data-id="heading-3">èŠ‚ç‚¹å»ºç«‹</h3>
<p>æ³¨å†Œå¹¶ç™»å½•â€œå…±ç»©ç®—åŠ›â€å¹³å°ã€‚</p>
<p>åœ¨â€œäº‘ä¸»æœºâ€é¡µé¢é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381d765e27df439a89ad4481f0287395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=Rc4YtH5x9fML4ri8vP5vSZVT9jw%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ç±»å‹åï¼Œé…ç½®ç›¸å…³é•œåƒã€å­˜å‚¨ç­‰ï¼Œæˆ‘è¿™é‡Œé…ç½®äº†â€œåŸºç¡€é•œåƒâ€ï¼Œç”±äºæ˜¯æµ‹è¯•æ­å»ºæ¨¡å‹ï¼Œæœªé…ç½®ç›¸å…³å­˜å‚¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45720f1c6b0c433eb1630a9778577e87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=ZHXguh3rd2MYd2LyIXgx%2F%2FIF8wI%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç§Ÿç”¨ï¼Œè´¦æˆ·ä½™é¢ä¸º 0ï¼Œä¼šè¦æ±‚å……å€¼ä¸€ä¸‹ï¼ˆ0.01å…ƒå³å¯ï¼‰ï¼Œç„¶åï¼Œéœ€è¦åœ¨ä¸ªäººä¸­å¿ƒå…³æ³¨ä¸‹å…¬ä¼—å·ï¼Œè¿™äº›æŒ‰ç…§é¡µé¢æç¤ºè¿›è¡Œå³å¯ã€‚</p>
<p>ç§Ÿç”¨æˆåŠŸåï¼Œä¼šåœ¨â€œæ§åˆ¶å°â€-â€œäº‘ä¸»æœºåˆ—è¡¨â€ä¸­çœ‹åˆ°ç§Ÿç”¨çš„èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced2f6fccc284a258c6b961f3df6fc34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=c53clo2VeJABljwf1KwMHtyaP8E%3D" alt="" loading="lazy"/></p>
<p>24G æ˜¾å­˜ã€63G å†…å­˜ï¼Œ1å°æ—¶ 1.68 å…ƒï¼Œå¹¶ä¸”æœ‰ç®—åŠ›åˆ¸æŠµæ‰£ï¼Œè¿˜å¾ˆåˆé€‚çš„ã€‚</p>
<h3 data-id="heading-4">è¿œç¨‹è¿æ¥</h3>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œæˆ‘ä»¬å…ˆæ¥è°ƒæ•´ä¸‹ <code>SSH</code> è¿æ¥çš„å‘½ä»¤ï¼Œè®©å…¶æ”¯æŒç«¯å£æ˜ å°„ï¼Œæ–¹ä¾¿è®¿é—® demoã€‚</p>
<p>åœ¨ä¸Šä¸€æ­¥çš„â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­ï¼Œå¤åˆ¶å‡ºç™»å½•æŒ‡ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-css" lang="css">ssh root<span class="hljs-keyword">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å¢åŠ <strong>ç«¯å£æ˜ å°„å‚æ•°</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java">ssh -vvN -L <span class="hljs-number">7860</span>:<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">7860</span> root<span class="hljs-meta">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å…¶ä¸­ <code>7860</code> æ˜¯ <code>MinerU demo</code> çš„æœåŠ¡ç«¯å£ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>TRAE</code> è¿›è¡Œè¿œç¨‹è¿æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f9b703dfe8241f19585bdafa24cd984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=M1BqQ%2FKJfoL%2FPVZAlOzkjla%2Fc70%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥ä¸Šé¢çš„æŒ‡ä»¤ï¼Œå›è½¦å³å¯ã€‚</p>
<p>æ­¤æ—¶ä¼šè¦æ±‚å½•å…¥å¯†ç ï¼Œå†æ¬¡ä»â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­å¤åˆ¶â€œç™»å½•å¯†ç â€å³å¯ã€‚</p>
<blockquote>
<p>å¦‚æœåŒä¸€åœ°å€è¿æ¥å¤šæ¬¡ï¼Œå¯èƒ½ä¼šåœ¨ SSH è¿æ¥ä¸­ç”Ÿæˆå¤šä¸ªç›¸åŒçš„ Hostï¼Œæ­¤æ—¶ä¼šå‡ºç°ç™»å½•å¤±è´¥çš„æƒ…å†µï¼Œæ‰‹åŠ¨åˆ é™¤é‡å¤çš„ Host å³å¯ã€‚</p>
</blockquote>
<p>æˆåŠŸè¿æ¥åï¼Œç»ˆç«¯ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a9b28a6d3d742e1a8102d68ad591783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=m8gIiVOKAC5gAOWKDOX9fEqEBFc%3D" alt="" loading="lazy"/></p>
<p>æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¿œç¨‹æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤äº†ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œæˆ‘ä»¬éƒ½äº¤ç»™ AIã€‚</p>
<h3 data-id="heading-5">ç¯å¢ƒéƒ¨ç½²</h3>
<p>å¼€å‘ç¯å¢ƒï¼šå›½é™…ç‰ˆ <code>SOLO Coder</code> æ™ºèƒ½ä½“ï¼Œæœªé€‰æ‹© <code>Plan</code> æ¨¡å¼ã€‚</p>
<p>ç›´æ¥åœ¨ <code>Chat</code> çª—å£å½•å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç­‰å¾…å®Œæˆã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<p>æŒ‡ä»¤éå¸¸ç®€å•ï¼Œè®© AI å‚è€ƒ <code>MinerU</code> å®˜æ–¹ä»“åº“æ–‡æ¡£ï¼Œè‡ªè¡Œå®Œæˆéƒ¨ç½²ã€‚</p>
<p>å› ä¸ºæ¨¡å‹ä¸‹è½½æ¶‰åŠåˆ° <code>HuggingFace</code> çš„ç½‘ç»œé—®é¢˜ï¼Œä¸€èˆ¬å„å¤§ç®—åŠ›ä¼ä¸šéƒ½ä¼šæä¾›é•œåƒå†…å®¹ï¼Œè¿™é‡ŒæŠŠâ€œå…±ç»©ç®—åŠ›â€çš„é•œåƒæ–‡æ¡£ä¹Ÿæ”¾ä¸Šäº†ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">å‚è€ƒgithubæ–‡æ¡£<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/opendatalab</span><span class="hljs-regexp">/mineru?tab=readme-ov-file ï¼Œå¸®æˆ‘å®Œæˆmineruçš„å®‰è£…ï¼Œå¹¶å®Œæˆdemoå¯åŠ¨ã€‚
äº‘æœåŠ¡å™¨æ–‡æ¡£ï¼šhttps:/</span><span class="hljs-regexp">/www.gongjiyun.com/docs</span><span class="hljs-regexp">/server/introduction</span><span class="hljs-regexp">/rznmwsy13i4a8yktuyycoxyinmg/</span> 
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>è¿‡ç¨‹å¾ˆæ¸…æ™°ï¼šå®‰è£…ä¾èµ–ã€ä¸‹è½½æ¨¡å‹ã€å¯åŠ¨Demoã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ed996c916d140cdb6e08f5c1fdf5da5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=zqHwEcUepdAd22Ase9gK8vIZOhs%3D" alt="" loading="lazy"/></p>
<p>åé¢è¿˜æœ‰è¯¦ç»†çš„å®‰è£…æ­¥éª¤ã€ç½‘ç»œåŠ é€Ÿä¸é•œåƒå»ºè®®ã€å¸¸ç”¨å‚æ•°ä¸ä¼˜åŒ–ã€é—®é¢˜æ’æŸ¥ã€åç»­å¯é€‰å¢å¼ºç­‰å†…å®¹ï¼Œä¾¿äºæˆ‘ä»¬å›é¡¾å®¡é˜…ã€‚</p>
<p><strong>SOLO æ¨¡å¼çš„å¥½å¤„å°±æ˜¯ä¸­é—´é‡åˆ°é—®é¢˜ï¼Œå®ƒå¯ä»¥è‡ªè¡Œè§£å†³</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a961e3db9aa7494f8246f58bcf74ae20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=xQkx4ScwbTogw%2Bfyg2KosdmFI84%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¿˜ç»™å‡ºäº† demo çš„è®¿é—®æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad9688c470114572ba55130ceef88e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=BzTO%2FbDrygPDuRktGgBxwy02eHw%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œ<code>SOLO</code> å†…ç½®æµè§ˆå™¨å·²ç»å¸®æˆ‘æŠŠ demo æ‰“å¼€äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbb24fca4efe455ea6f1c14f79537ddb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=1diCpbeVDiDxzba0NULY8kS%2F6PU%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œå¯ä»¥é€šè¿‡ <code>http://localhost:7860/</code> è®¿é—®åˆ°æœåŠ¡å™¨ï¼Œå°±æ˜¯å› ä¸ºâ€œè¿œç¨‹è¿æ¥â€ç« èŠ‚ä¸­çš„ SSH å‘½ä»¤ä¸­å¢åŠ äº†ç«¯å£æ˜ å°„ã€‚</p>
<h3 data-id="heading-6">è°ƒè¯•ä¼˜åŒ–</h3>
<p>ä¸Šé¢è·‘èµ·æ¥çš„ demoï¼Œä¸Šä¼ æµ‹è¯•çš„ PDF åï¼Œè½¬æ¢æŠ¥é”™ã€‚</p>
<p>ä¸ç€æ€¥ï¼Œæˆ‘ä»¬ç›´æ¥è®© <code>SOLO</code> å¸®å¿™ä¿®å¤ä¸‹ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">demoä¸­ä¸Šä¼ åæŠ¥é”™ï¼Œè¯·å¸®æˆ‘ä¿®å¤
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p><code>SOLO</code> å¯ä»¥ä»ç»ˆç«¯ä¸­è·å–é”™è¯¯ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼š</p>
<p>â€œä¸Šä¼ è§£ææ—¶æŠ¥é”™çš„æ ¹å› æ˜¯ Gradio å¤„ç†æµç¨‹åœ¨è§£ææ—¶å°è¯•è®¿é—® HuggingFace è·å–æ¨¡å‹å…ƒæ•°æ®ï¼Œå‡ºç° SSL é”™è¯¯å¯¼è‡´å‡½æ•°è¿”å› None ï¼Œæœ€ç»ˆè§¦å‘ TypeError: cannot unpack non-iterable NoneType object â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147e903ead2f409eb39b6ffa8b9c95c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=NjQAkBUNiBJd0hRoLD75Qfim%2B1c%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å†æ¬¡ä¸Šä¼  <code>PDF</code>ï¼Œå¯ä»¥çœ‹åˆ°æå–ç»“æœäº†ï¼Œå·²ç»å®Œæˆäº†ä»Šå¤©çš„æ—¢å®šç›®æ ‡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fad90c7e2c44072961045993260da4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=nZEk2Y46KqYNQjC%2F79J7mgqmy%2FQ%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæ¨¡å‹å‚æ•°æœªè°ƒä¼˜ï¼Œè¯†åˆ«ä¸­å­˜åœ¨äº›è®¸é—®é¢˜ï¼Œéæ­¤æ¬¡åˆ†äº«é‡ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸å†è®¨è®ºäº†ã€‚</p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯éå¸¸é¡ºåˆ©çš„ï¼Œé™¤äº†æˆ‘ç¬¬ä¸€æ¬¡å¿˜è®°é…ç½®æ¨¡å‹é•œåƒä¸‹è½½å¯¼è‡´çš„å¤±è´¥ã€‚</p>
<p>ä¹‹å‰ä»¥ä¸º AI å¯ä»¥è‡ªå·± <code>SOLO</code> ä»£ç å°±å¾ˆé…·äº†ï¼Œæ²¡æƒ³åˆ°ï¼ŒAI éƒ½å·²ç»å¯ä»¥è‡ªå·±æŒæ§æœåŠ¡å™¨äº†ã€‚</p>
<p>ç»™ä¸ªç›®æ ‡ï¼Œå°±èƒ½ç›´æ¥ç­‰å¾…éªŒæ”¶ï¼Ÿé‚£åç»­æŠ€æœ¯éªŒè¯ã€ç¯å¢ƒæ­å»ºè„šæœ¬å²‚ä¸æ˜¯æ›´è½»æ¾äº†ã€‚</p>
<p>å½“éƒ¨ç½²ã€è°ƒè¯•ã€ä¼˜åŒ–ä¹Ÿèƒ½äº¤ç»™ AI è‡ªä¸»å®Œæˆåï¼Œå¼€å‘è€…å°±æœ‰äº†æ›´å¤šçš„æ—¶é—´å»æ€è€ƒâ€œåšä»€ä¹ˆâ€è€Œéâ€œæ€ä¹ˆåšâ€â€”â€”è¿™æˆ–è®¸æ‰æ˜¯æ™ºèƒ½æ—¶ä»£çš„ç”Ÿäº§åŠ›è·ƒè¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘]]></title>    <link>https://juejin.cn/post/7576827115967954979</link>    <guid>https://juejin.cn/post/7576827115967954979</guid>    <pubDate>2025-11-26T08:55:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115967954979" data-draft-id="7576676694784294946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-26T08:55:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:55:59.000Z" title="Wed Nov 26 2025 08:55:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>ä¸ºä»€ä¹ˆåŒæ ·æ˜¯åš RAGï¼Œæœ‰çš„æ•ˆæœæ‹”ç¾¤ï¼Œæœ‰çš„å´å·®å¼ºäººæ„ï¼Ÿåˆ†å—ï¼ˆChunkingï¼‰ç­–ç•¥å¯èƒ½æ˜¯é‚£ä¸ªè¢«ä½ å¿½ç•¥çš„å…³é”®ç¯èŠ‚ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯Chunkï¼Ÿ</h2>
<p>AIä¸­çš„åˆ†å—æ˜¯æŒ‡å°†å¤§å‹æ–‡æ¡£åˆ†å‰²æˆç§°ä¸ºâ€œchunkâ€çš„è¾ƒå°ç‰‡æ®µã€‚è¿™äº›ç‰‡æ®µå¯ä»¥æ˜¯æ®µè½ã€å¥å­ã€è¯ç»„æˆ–å—tokené™åˆ¶çš„ç‰‡æ®µï¼Œè¿™ä½¿å¾—æ¨¡å‹èƒ½æ›´è½»æ¾åœ°ä»…æœç´¢å’Œæ£€ç´¢æ‰€éœ€å†…å®¹ã€‚è¿™ç§åˆ†å—æŠ€æœ¯å¯¹äºä¼˜åŒ–æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆåœ¨RAGä¸­éœ€è¦Chunkï¼Ÿ</h2>
<p>åœ¨RAGä¸­ï¼Œæ£€ç´¢åˆ°æ­£ç¡®çš„ä¿¡æ¯æ˜¯å…³é”®ï¼Œä½†å½“çŸ¥è¯†åº“éå¸¸åºå¤§ï¼Œå¯èƒ½åŒ…å«æ•°ç™¾ä¸‡å­—æˆ–æ–‡æ¡£æ—¶ï¼Œä½¿ç”¨æœ‰æ•ˆçš„RAGåˆ†å—æŠ€æœ¯å¯¹äºä»è¿™ç±»å¤§å‹æ•°æ®é›†ä¸­é«˜æ•ˆæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå°±å˜å¾—è‡³å…³é‡è¦äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªæœåŠ¡QPSè¾¾åˆ°åƒä¸‡çº§è¿˜è¦åœ¨30mså†…è¿”å›ç»“æœï¼Œè¿™æ—¶ä¸€å®šä¼šæä¸€ç»„æœ¬åœ°ç¼“å­˜çš„é›†ç¾¤ã€‚æŠŠä½ çš„æ•°æ®æŒ‰è§„åˆ™åˆå§‹åŒ–åˆ°ç¼“å­˜é‡Œï¼Œå°±æ˜¯å¯¹åº”çš„RAGçš„Chunkæ“ä½œã€‚</p>
<p>Chunkä¹Ÿæ˜¯RAG ETL Pipelineä¸­Transformç¯èŠ‚çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå¯ä»¥æ¯”å–»æˆæˆ‘ä»¬åˆ‡è›‹ç³•ï¼Œåœ¨åˆ‡ä¹‹å‰å°±å·²ç»æƒ³å¥½è¦åˆ†å‡ å—äº†ã€‚è®©æˆ‘çœ‹çœ‹â€œåˆ‡è›‹ç³•ğŸ°â€æœ‰å‡ ç§æ‰‹æ³•ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-3">äºŒã€ä¸»æµRAGçš„åˆ†å—ç­–ç•¥è¯¦è§£</h2>
<h3 data-id="heading-4">2.1.å›ºå®šå¤§å°åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e717f4856f4b4d6b8c1e6d1233624a18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=g2xtCDIgEz0NUrWeff8FwuFXQlU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æ ¹æ®é¢„å®šä¹‰çš„å­—ç¬¦æ•°æˆ– token æ•°å°†æ–‡æœ¬åˆ†æˆç»Ÿä¸€çš„å—ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œå›ºå®šæ¯å— 500 tokensã€‚å¼•å…¥ â€œé‡å åŒºâ€ï¼ˆOverlapï¼‰æ¥ç¼“è§£ä¸Šä¸‹æ–‡æ–­è£‚é—®é¢˜ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å®ç°ç®€å•ï¼Œå¤„ç†é€Ÿåº¦å¿«ï¼Œä¸ä¾èµ–å¤æ‚æ¨¡å‹ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å¯èƒ½ç ´åè¯­ä¹‰å®Œæ•´æ€§ï¼ˆå¦‚æ‹†åˆ†å¥å­æˆ–æ®µè½ï¼‰ï¼Œå¯¹ç»“æ„å·®å¼‚å¤§çš„æ–‡æ¡£é€‚åº”æ€§å·®ã€‚</p>
<h3 data-id="heading-5">2.2.è¯­ä¹‰åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e691b1f6ab74899b57fedc35ac0bd2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=0PbrXc1dPP93Kudu%2F7nns4uu7GM%3D" alt="" loading="lazy"/></p>
<p>ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æ ¹æ®æ–‡æœ¬çš„è¯­ä¹‰ç›¸ä¼¼åº¦è€Œéç‰©ç†ç»“æ„è¿›è¡Œåˆ†å—ï¼Œç¡®ä¿æ¯ä¸ª Chunk å†…éƒ¨ä¸»é¢˜é«˜åº¦ç›¸å…³ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> é€šå¸¸é€šè¿‡è®¡ç®—å¥å­ Embedding çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå½“ç›¸ä¼¼åº¦ä½äºæŸä¸ªé˜ˆå€¼æ—¶è¿›è¡Œåˆ†å‰²ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> èƒ½åˆ›å»ºé€»è¾‘ä¸Šæœ€è¿è´¯çš„ Chunkï¼Œå¯¹åç»­æ£€ç´¢å’Œç”Ÿæˆè´¨é‡æå‡æ˜¾è‘—ã€‚ç‰¹åˆ«é€‚ç”¨äºå¤„ç†ä¸»é¢˜è·³è·ƒè¾ƒå¤šçš„æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> è®¡ç®—æˆæœ¬é«˜ï¼ˆéœ€è¦è°ƒç”¨ Embedding æ¨¡å‹ï¼‰ï¼Œå¤„ç†é€Ÿåº¦è¾ƒæ…¢ã€‚</p>
<h3 data-id="heading-6">2.3.åŸºäºé€’å½’åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/670c024dfd7c43b993949ac771409482~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=NF7aI%2ByLRo0r2qMx0qoUlOT3wV8%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ä¸€ç§æ›´æ™ºèƒ½çš„ç»„åˆå¼ç­–ç•¥ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºå°è¯•å¤šç§åˆ†éš”ç¬¦è¿›è¡Œé€’å½’åˆ†å‰²ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œä¼˜å…ˆæŒ‰æ®µè½åˆ†å‰²ï¼Œå¦‚æœæ®µè½ä»è¿‡å¤§ï¼Œå†æŒ‰å¥å­åˆ†å‰²ï¼Œæœ€åæ‰æŒ‰å­—ç¬¦æ•°å¼ºåˆ¶åˆ†å‰²ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å°½å¯èƒ½ä¿ç•™é«˜çº§åˆ«çš„è¯­ä¹‰ç»“æ„ï¼ˆæ®µè½ &gt; å¥å­ &gt; ...ï¼‰ï¼Œé€‚åº”æ€§å¼ºï¼Œèƒ½å¤„ç†å¤šç§ç±»å‹æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å®ç°ç¨å¤æ‚ï¼Œæ€§èƒ½å¼€é”€é«˜äºçº¯å›ºå®šå¤§å°åˆ†å—ã€‚</p>
<h3 data-id="heading-7">2.4.åŸºäºæ–‡æ¡£çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a97488467434bb7a0be391548c9780b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=%2BEmotgSPOZxQkpc1vpbZTKqazUE%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> åˆ©ç”¨æ–‡æ¡£æœ¬èº«çš„å…ƒæ•°æ®å’Œç»“æ„ä¿¡æ¯ï¼ˆå¦‚æ ‡é¢˜å±‚çº§ã€è¡¨æ ¼ã€å›¾ç‰‡è¯´æ˜ã€PDF é¡µç ç­‰ï¼‰è¿›è¡Œæ™ºèƒ½åˆ†å‰²ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªä¸€çº§æ ‡é¢˜ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬å­æ ‡é¢˜å’Œæ®µè½ï¼‰ä½œä¸ºä¸€ä¸ªå¤§ Chunkï¼Œæˆ–è€…å°†æ¯ä¸ªè¡¨æ ¼å•ç‹¬ä½œä¸ºä¸€ä¸ª Chunkã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å®Œç¾è´´åˆç‰¹å®šç±»å‹æ–‡æ¡£ï¼ˆå¦‚æ³•å¾‹åˆåŒã€å­¦æœ¯è®ºæ–‡ã€æŠ¥å‘Šï¼‰çš„é€»è¾‘ç»“æ„ï¼Œä¿¡æ¯ç»„ç»‡æ€§å¼ºã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> ä¾èµ–é«˜è´¨é‡çš„æ–‡æ¡£è§£æå’Œç»“æ„è¯†åˆ«ï¼Œé€šç”¨æ€§ç›¸å¯¹è¾ƒå¼±ã€‚</p>
<h3 data-id="heading-8">2.5.æ™ºèƒ½ä½“åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8593b21374bc4634a5f4eed20831a28f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=xz1Qm%2Bdn1fnEl31%2BxgY1bdrERc0%3D" alt="" loading="lazy"/></p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> è¿™æ˜¯ä¸€ç§æ›´å‰æ²¿çš„åŠ¨æ€ç­–ç•¥ï¼Œæ ¹æ® Agent å°†è¦æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡æˆ–ç›®æ ‡æ¥å†³å®šå¦‚ä½•åˆ†å—ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> Agent ä¼šå…ˆç†è§£ä»»åŠ¡ï¼Œç„¶åè‡ªé€‚åº”åœ°ä»æ–‡æ¡£ä¸­æå–å’Œç»„ç»‡æœ€ç›¸å…³çš„ä¿¡æ¯å—ã€‚ä¾‹å¦‚ï¼Œä»»åŠ¡æ˜¯ â€œæ€»ç»“â€ï¼Œåˆ™å¯èƒ½æå–å…³é”®è®ºç‚¹ï¼›ä»»åŠ¡æ˜¯ â€œå›ç­”ç‰¹å®šé—®é¢˜â€ï¼Œåˆ™å¯èƒ½ç²¾å‡†å®šä½ç›¸å…³è¯æ®ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> çµæ´»æ€§å’Œé’ˆå¯¹æ€§æé«˜ï¼Œèƒ½æœ€å¤§åŒ–ä»»åŠ¡æ•ˆæœã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å®ç°å¤æ‚ï¼Œé€šå¸¸éœ€è¦å¼ºå¤§çš„è§„åˆ’å’Œæ¨ç†èƒ½åŠ›ï¼Œç›®å‰è¿˜ä¸æ™®åŠã€‚</p>
<h3 data-id="heading-9">2.6.åŸºäºå¥å­çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a67aeda6ad49a59bd6f28bfa68daec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=mWfClsUnrnUw4UQKfLkYfblJJso%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> å°†æ–‡æœ¬åˆ†å‰²æˆå®Œæ•´çš„å¥å­ï¼Œç¡®ä¿æ¯ä¸ª Chunk éƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®Œæ•´çš„æ€æƒ³ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä½¿ç”¨ NLP å·¥å…·ï¼ˆå¦‚ NLTK, SpaCyï¼‰è¯†åˆ«å¥å­è¾¹ç•Œï¼Œç„¶åå¯ä»¥å°†å‡ ä¸ªè¿ç»­çš„å¥å­ç»„åˆæˆä¸€ä¸ª Chunkã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> ä¿è¯äº†åŸºæœ¬çš„è¯­ä¹‰å•å…ƒå®Œæ•´ï¼Œé¿å…äº† â€œåŠå¥è¯â€ çš„é—®é¢˜ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å¥å­é•¿åº¦å·®å¼‚ä»å¯èƒ½å¯¼è‡´ Chunk å¤§å°ä¸å‡ï¼›å¤šä¸ªå¥å­ç»„åˆæ—¶ï¼Œå¦‚ä½•ç¡®å®šæœ€ä½³ç»„åˆä»éœ€ç­–ç•¥ã€‚</p>
<h3 data-id="heading-10">2.7.åŸºäºæ®µè½çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbabf005b3df4b2aaa70477648bf3e05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=pomnwhwuKz%2FPfPicHwIalOihUM4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> åŸºäºæ®µè½çš„åˆ†å—ï¼Œé€šè¿‡æç¤ºç¬¦æˆªå–ï¼Œå°†æ•´ä¸ªæ–‡æœ¬åˆ’åˆ†æˆå¤šä¸ªæ®µè½ã€‚è¿™ç§æ–¹å¼åŒæ ·é€‚åˆç»“æ„æ¸…æ™°çš„æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œä¿é™©æ¡æ¬¾ã€æ³•å¾‹ã€è®ºæ–‡ã€ABå®éªŒæŠ¥å‘Šç­‰æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> ä¼˜ç‚¹è‡ªç„¶åˆ†æ®µï¼Œè¯­ä¹‰å®Œæ•´ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> ç¼ºç‚¹è‡ªç„¶æ˜¯æ®µè½é•¿åº¦ä¸ä¸€ï¼Œå¯èƒ½è¶…tokené™åˆ¶ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-11">å…¶ä»–</h3>
<p>é™¤ä»¥ä¸Š7ç§å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå¤§ç¥ä»¬æ€»ç»“çš„åˆ‡å—æ–¹æ³•è®ºï¼Œå¦‚æŒ‰ç…§tokenã€æŒ‰ç…§å±‚çº§ï¼ŒæŒ‰ç…§excel sheeté¡µï¼ŒæŒ‰ç…§pdfé¡µç ç­‰ã€‚éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€‚ä¸‹é¢æˆ‘ç»“åˆ<strong>å®æˆ˜</strong>å’Œ<strong>ä¸­æ–‡</strong>çš„åˆ‡å—çš„æ–¹æ³•è®ºåšä¸€ä¸‹æ€»ç»“ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-12">ä¸‰ã€åˆ†å—ç­–ç•¥çš„é€‰æ‹©ä¸å®æˆ˜ä¼˜åŒ–</h2>
<h3 data-id="heading-13">3.1. æ²¡æœ‰â€œä¸‡èƒ½â€çš„åˆ†å—ç­–ç•¥</h3>
<p>ç°å®ä¸­ä¸å­˜åœ¨ä¸€ç§â€œone-for-allâ€ çš„æ•°æ®è¯»å–å’Œåˆ†å—æ–¹æ³•ï¼Œç‰¹åˆ«åƒæ˜¯ PDF å’Œ Word è¿™ç±»å¤æ‚æ ¼å¼çš„æ–‡æ¡£ã€‚æ¯”è¾ƒæµè¡Œçš„æ–¹æ¡ˆæ˜¯å®ç”¨DeepDocï¼ˆOCRã€TSRã€DLRï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸­åº”æ ¹æ®ä¸šåŠ¡ï¼Œåˆ¶ä½œä¸åŒçš„æ¨¡æ¿ã€‚é‚£ä¹ˆè¯„ä¼°Chunkçš„å‚æ•°å’ŒæŒ‡æ ‡æœ‰å“ªäº›å‘¢ï¼Ÿ æŒ‡æ ‡å°±æ˜¯<strong>Precisionå’ŒRecall</strong>ï¼Œè¯¦ç»†çœ‹è¡¨æ ¼ <strong>ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>å‚è€ƒå€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>chunk_size</td><td>512-1024</td><td>1.åˆ‡çš„è¶Šå°chunksæ•°è¶Šå¤šï¼Œæ‰€ä»¥chunk_sizeè·Ÿä½ çš„top-kå€¼æœ‰å…³ã€‚åœ¨ Recall å·®ä¸å¤šçš„æƒ…æ³ä¸‹ï¼Œå¯ä»¥é€‰Precision é«˜çš„ï¼Œæ¯”è¾ƒæœ‰æ•ˆç‡ã€‚ 2.å¦‚æœæ˜¯èƒ½åŠ›å¼·çš„å¤§æ¨¡å‹ï¼ŒPrecision ä½ä¸€é»ï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚ 3.å¦‚æœæ˜¯èƒ½åŠ›å¼±çš„å°æ¨¡å‹ï¼Œå®¹æ˜“è¢«å™ªå£°å½±å“ï¼ŒPrecision å¤ªä½ä¸å¥½ï¼Œå› æ­¤åˆ‡å—éœ€è¦è°ƒå°ã€‚ 4.ä¸ºä»€ä¹ˆé»˜è®¤å€¼æ˜¯512ï¼Ÿä¸ä¸»æµé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£å¤§å°ï¼ˆå¦‚BERTçš„512ï¼‰ä¿æŒå…¼å®¹ã€‚</td></tr><tr><td>separator</td><td>/n</td><td>åˆ†éš”ç¬¦</td></tr><tr><td>overlap</td><td>10%-15%</td><td>é€šå¸¸é‡å å—é•¿åº¦åœ¨10%-20%ä¹‹é—´</td></tr></tbody></table>
<p>ï»¿</p>
<p>Chunkå‚æ•°ä¸æŒ‡æ ‡ï¼Œæˆ‘è®¾è®¡äº†ä¸¤å¥—ç­–ç•¥ï¼š512/10%å’Œ2500/25 ï¼ˆå•ä½tokenï¼‰</p>

















<table><thead><tr><th>é€šç”¨ç­–ç•¥ï¼ˆ512/10%ï¼‰</th><th>æœ€å¤§ä¸Šä¸‹æ–‡ç­–ç•¥ï¼ˆ2500/25ï¼‰</th></tr></thead><tbody><tr><td>chunk_sizeï¼š512ä¸ªtokenï¼Œçº¦450å¤šä¸ªæ±‰å­—æ˜¯ç›¸å¯¹ä¸­ç­‰çš„åˆ‡å—å¤§å°ã€‚è¿™ä¸ªå¤§å°è¶³ä»¥å®¹çº³å®Œæ•´çš„å‰§ç»„æˆ–æ®µè½ã€‚å¤§å¤šæƒ…å†µå¯ä»¥åœ¨â€œå‡†ç¡®ç‡â€ä¸â€œä¸Šä¸‹æ–‡å®Œæ•´æ€§â€ä¹‹é—´å–çš„å¹³è¡¡</td><td>chunk_sizeï¼š2500ä¸ªtokenç›¸å½“äº2000å¤šä¸ªæ±‰å­—ï¼Œå±äºéå¸¸å¤§çš„æ–‡æœ¬å—äº†ã€‚è¿™ä¸ªè®¾å®šçš„èƒŒåé€»è¾‘æ˜¯åˆ©ç”¨ç°åœ¨çš„å¤§æ¨¡å‹ï¼ˆGPT-5.1ã€gemini 3ï¼‰çš„è¶…å¤§tokenã€‚å½“ä»»åŠ¡æ˜¯è¿›è¡Œé•¿ç¯‡æ–‡ä»¶çš„æ·±åº¦æ€è€ƒæ¨ç†æ—¶ï¼Œå¯ä»¥æä¾›ä¸°å¯Œçš„ä¿¡æ¯ç»™åˆ°æ¨¡å‹ï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„Precisionã€‚</td></tr><tr><td>overlapï¼š10%æ˜¯æ¯”è¾ƒä¸­åº¸è®¾å®šï¼Œæ˜¯ä¸šç•Œæ™®éçš„å»ºè®®ï¼Œèƒ½ç¼“è§£è¾¹ç•Œåˆ‡å‰²é—®é¢˜ã€‚</td><td>overlapï¼š10ä¸ªå·¦å³æ±‰å­—ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥äº†ï¼Œè¶…å¤§æ–‡æœ¬å—è¢«åˆ‡å‰²çš„å‡ ç‡ç›¸å¯¹è¾ƒå°ã€‚</td></tr></tbody></table>
<h3 data-id="heading-14">ï»¿</h3>
<h3 data-id="heading-15">3.2.Chunkç­–ç•¥çš„é€‰æ‹©</h3>
<p>æˆ‘çš„æ–¹æ³•è®ºï¼š<strong>æ®µè½åˆ†å—ï¼ˆParagraph Chunkingï¼‰ï¼Œå¥å­åˆ†å—ï¼ˆSemantic Chunkingï¼‰ï¼Œé€’å½’åˆ†å—ï¼ˆRecursive Chunkingï¼‰ï¼Œè¯­ä¹‰åˆ†å—ï¼ˆSemantic Chunkingï¼‰ã€‚</strong></p>
<p>ç°åœ¨çš„RAGæ¡†æ¶åŸºæœ¬éƒ½æ˜¯åŸºäºæ®µè½æˆ–å¥å­æ¥åˆ†å—ï¼Œä¹Ÿéƒ½éƒ½æ”¯æŒï¼ˆ\nã€‚ï¼›ï¼ï¼Ÿï¼‰çš„é€’å½’åˆ†å—ã€‚é‚£ä»è¿è¥ç”¨æˆ·è§’åº¦å‡ºå‘ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡åˆ‡çš„æ—¶å€™ï¼Œå¦‚ä½•å‚»ç“œå¼æ“ä½œå‘¢ï¼ŸRAGFlowäº¤å‡ºäº†ä¸€ä»½æ–¹æ¡ˆï¼Œçœ‹ä¸€ä¸‹å®ƒçš„åˆ†å—æ ¸å¿ƒç®—æ³•</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63a86ad1118a49449dcaf1d79b33dd69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=dxXiwgAZLZHvrkAc%2BjYkTAJTjsQ%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h2 data-id="heading-16">å››ã€æ–¹æ³•è®ºæ€»ç»“</h2>
<p>å¦‚ä½•å¼€å§‹ï¼Ÿå¯ä»¥ä»512 tokens æ­é… 10-15%çš„é‡å ç‡å¼€å§‹ã€‚</p>
<p>å¦‚ä½•ä¼˜åŒ–ï¼Ÿè°ƒè¯•å‚æ•°ï¼Œå¤šä½¿ç”¨é€’å½’åˆ†å—å’Œå¥å­åˆ†å—ï¼Œè¯­ä¹‰åˆ†å—è¿˜æ˜¯ä¸å¤Ÿä¼˜ç§€ã€‚</p>
<p>å¦‚ä½•æµ‹è¯„ï¼Ÿä¸Šå· <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrandonstarxel%2Fchunking_evaluation" target="_blank" title="https://github.com/brandonstarxel/chunking_evaluation" ref="nofollow noopener noreferrer">chunking_evaluation </a>ï»¿</p>
<p>æœ‰å’Œæ–¹æ³•è®ºï¼Ÿ ä¸Šå· <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2401.17043" target="_blank" title="https://arxiv.org/abs/2401.17043" ref="nofollow noopener noreferrer">CRUD-RAG</a> è®ºæ–‡æŒ‡å‡ºå¯¹äºåˆ›æ„ç”Ÿæˆå’Œä¿æŒæ–‡ç« è¿è´¯æ€§çš„ä»»åŠ¡ï¼Œåˆ‡åˆ†è¾ƒå¤§çš„å—è¡¨ç°ä¼šæ›´ä½³ã€‚æˆ‘ä»¬åœ¨</p>
<p>ï»¿<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2309.15217.pdf" target="_blank" title="https://arxiv.org/pdf/2309.15217.pdf" ref="nofollow noopener noreferrer">RAGas</a>å®éªŒä¹Ÿå¾—åˆ°äº†ç›¸åŒçš„ç­”æ¡ˆã€‚</p>
<p>ï»¿</p>
<p>å¥½äº†ï¼Œä»¥ä¸Šæ˜¯æˆ‘ä»¬çš„å®è·µæ€»ç»“ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7576827115967791139</link>    <guid>https://juejin.cn/post/7576827115967791139</guid>    <pubDate>2025-11-26T08:38:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115967791139" data-draft-id="7576661150684299279" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-26T08:38:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:38:32.000Z" title="Wed Nov 26 2025 08:38:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šè¨€åˆã€å¤ç¦</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Dify æ˜¯æ—¶ä¸‹çƒ­é—¨çš„ä½ä»£ç  LLM åº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶ä¸°å¯Œçš„æ¨¡å‹æ”¯æŒã€Prompt ç¼–æ’ã€RAG å¼•æ“ã€Workflow/Agent æ¡†æ¶ä»¥åŠæ’ä»¶ç”Ÿæ€å¤§å¤§ä¾¿åˆ©äº† Agentic åº”ç”¨çš„å¼€å‘ã€‚</p>
<p>ç”Ÿäº§çº§çš„ Agentic åº”ç”¨æ¶‰åŠå¤§é‡åŠ¨æ€å†…å®¹ï¼Œè¯¸å¦‚å†å²ä¼šè¯ã€è®°å¿†å¤„ç†ï¼Œå·¥å…·è°ƒç”¨ã€çŸ¥è¯†åº“å¬å›ï¼Œæ¨¡å‹ç”Ÿæˆï¼Œè„šæœ¬æ‰§è¡Œå’Œæµç¨‹æ§åˆ¶ç­‰ç¯èŠ‚ç»™ Agentic åº”ç”¨ç”Ÿæˆçš„æ•ˆæœå¸¦æ¥å¾ˆå¤§ä¸ç¡®å®šæ€§ã€‚å¯è§‚æµ‹æ€§è´¯ç©¿ Agentic åº”ç”¨å¼€å‘è°ƒè¯•ã€è¿ç»´è¿­ä»£çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸²è” Agentic åº”ç”¨æ‰§è¡Œå’Œä¸Šä¸‹æ¸¸ç³»ç»Ÿä¸­çš„å·¥å…·ã€æ¨¡å‹å’Œè°ƒç”¨æ–¹ï¼Œæ˜¯æ”¯æ’‘ Agentic åº”ç”¨ç”Ÿäº§è½åœ°çš„å…³é”®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c767555e86904128bcb30e84159e00ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=7QQ5BnNtSRW7YJlOXR3KFnAgI9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-1">Dify å¯è§‚æµ‹çš„ä¸¤ä¸ªè§†è§’ä¸¨å¼€å‘è€… &amp; è¿ç»´æ–¹</h3>
<p>å¯¹ Dify è¿™ç±»ä½ä»£ç å¹³å°çš„å¯è§‚æµ‹æ€§éœ€æ±‚ï¼Œæœ‰å¼€å‘è€…å’Œå¹³å°è¿ç»´ä¸¤ä¸ªè§†è§’ã€‚</p>
<p>Agentic åº”ç”¨å¼€å‘è€…ä½¿ç”¨ Dify SaaS æˆ–è‡ªéƒ¨ç½²çš„ Dify æœåŠ¡å¼€å‘ Workflow åº”ç”¨ï¼Œä¸“æ³¨äº Workflow çš„æ„å»ºï¼Œè§‚æµ‹çš„ä¸»ä½“æ˜¯ Dify å¹³å°ä¸Šè¿è¡Œçš„ä¸€ä¸ªä¸ª Workflow åº”ç”¨ã€‚å…³æ³¨ç‚¹åœ¨äº Workflow æ•´ä½“å’Œå…¶ä¸­ RAGã€Toolã€LLM ç­‰å„ä¸ªæ­¥éª¤çš„æ‰§è¡Œï¼Œå¼€å‘è€…ä¾èµ–å¯è§‚æµ‹æœåŠ¡ç›‘æµ‹å¤§æ¨¡å‹åº”ç”¨ç”Ÿæˆæ•ˆæœå’Œæ€§èƒ½ï¼Œè¿½è¸ªç”¨æˆ·å¤šè½®ä¼šè¯çš„äº¤äº’ä½“éªŒã€‚åœ¨ Agentic åº”ç”¨å¼€å‘æ„å»ºå’Œä¸Šçº¿åçš„è¿­ä»£ç»´æŠ¤é˜¶æ®µå¯è§‚æµ‹èƒ½åŠ›éƒ½æ˜¯ Agentic åº”ç”¨æŒç»­ä¼˜åŒ–çš„å…³é”®ã€‚</p>
<p>Dify å¹³å°è¿ç»´æ–¹å…³æ³¨ Dify é›†ç¾¤ä¸­ä»åŸºç¡€è®¾æ–½åˆ°å„ä¸ªç»„ä»¶çš„è´Ÿè½½å’Œå¼‚å¸¸æƒ…å†µï¼Œç®¡ç† Dify å’Œä¸Šä¸‹æ¸¸çš„æœåŠ¡å’Œä¾èµ–ï¼Œè§‚æµ‹çš„ä¸»ä½“æ˜¯ Dify é›†ç¾¤åŠå…¶ä¸Šä¸‹æ¸¸ä¾èµ–ã€‚Dify é›†ç¾¤åŒ…å«æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ²™ç®±ç¯å¢ƒå’Œå­˜å‚¨æœåŠ¡ç­‰åå¤šä¸ªç»„ä»¶ï¼›åŒæ—¶è¿˜æ¶‰åŠè°ƒç”¨æ–¹ã€æ¨¡å‹æœåŠ¡ã€å·¥å…·è®¿é—®ã€å¤–éƒ¨çŸ¥è¯†åº“ç­‰ä¸Šä¸‹æ¸¸ä¾èµ–ã€‚è¯·æ±‚è¿‡ç¨‹çš„å…¨é“¾è·¯å¯è§‚æµ‹æ˜¯çº¿ä¸Šé—®é¢˜è¿½æº¯ï¼Œæ€§èƒ½ç“¶é¢ˆå®šä½çš„å…³é”®å·¥å…·ã€‚</p>
<h3 data-id="heading-2">Dify å¯è§‚æµ‹ç°çŠ¶ &amp; ç—›ç‚¹</h3>
<p>å¯è§‚æµ‹æ€§ä¸€ç›´æ˜¯ Dify ç¤¾åŒºæ´»è·ƒçš„è®®é¢˜ï¼Œç›®å‰ Dify åŸç”Ÿæ”¯æŒçš„å¯è§‚æµ‹èƒ½åŠ›ç”±ä¸‰ä¸ªæ–¹é¢ç»„æˆã€‚</p>
<p>å…¶ä¸€æ˜¯Â <strong>Dify å†…ç½®çš„åº”ç”¨ç›‘æ§èƒ½åŠ›</strong>ï¼Œæ•°æ®é‡‡è‡ª Dify æ‰§è¡Œå¼•æ“è¿è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„æ‰§è¡Œæ˜ç»†è®°å½•ï¼Œå­˜å‚¨åœ¨ Dify æ•°æ®åº“å†…ã€‚å…¶ç‰¹ç‚¹æ˜¯å’Œ Dify è‡ªèº«çš„é›†æˆåº¦æœ€é«˜ï¼Œåœ¨å¼€å‘è°ƒè¯•é˜¶æ®µä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/776d30c9592a49b4801e8ec4e981b2a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Bvb6t4ibpQAQB1RtQXuSYA7dYBI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶è€Œå†…ç½®çš„åº”ç”¨ç›‘æ§åœ¨åˆ†æèƒ½åŠ›å’Œæ€§èƒ½ä¸¤ä¸ªæ–¹é¢å­˜åœ¨ä¸è¶³ã€‚åœ¨åˆ†æèƒ½åŠ›ä¸Šï¼ŒWorkflow ä¸Šçº¿åå¯¹å…¶è§‚æµ‹æ•°æ®éœ€è¦å¤šç»´åº¦çš„èšåˆåˆ†ææˆ–äºŒæ¬¡åŠ å·¥ï¼Œé—®é¢˜æ’æŸ¥ä¹Ÿéœ€è¦å…³é”®å­—ã€æ—¶é—´èŒƒå›´ã€æ¨¡ç³ŠåŒ¹é…ã€é”™è¯¯ç±»å‹ç­‰å¤šç»´åº¦çš„æ£€ç´¢èƒ½åŠ›ï¼Œä½† Dify è‡ªå¸¦çš„ç›‘æ§åªèƒ½é€šè¿‡ä¼šè¯ ID å’Œç”¨æˆ· ID ç­‰æœ‰é™æ–¹å¼æ£€ç´¢ï¼Œä¸èƒ½æ»¡è¶³æ•°æ®åˆ†æå’Œé—®é¢˜æ’æŸ¥çš„éœ€è¦ã€‚åœ¨æ€§èƒ½ä¸Šï¼Œå—é™äºåœ¨ DB ä¸­è®°å½•æ‰§è¡Œæ—¥å¿—çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå†…ç½®åº”ç”¨ç›‘æ§åœ¨å¤§è§„æ¨¡åº”ç”¨çš„ç”Ÿäº§ç¯å¢ƒä¸‹æ€§èƒ½ä¸ä½³ï¼Œæ—¥å¿—æ•°æ®åŠ è½½è¾ƒæ…¢ç”šè‡³å¤§é‡çš„æ‰§è¡Œæ˜ç»†æ•°æ®ä¼šæ‹–æ…¢æ•°æ®åº“æ•´ä½“æ€§èƒ½ï¼Œéœ€è¦åœ¨åå° Celery ä»»åŠ¡ä¸­é…ç½®æ¸…ç†ä»»åŠ¡å‘¨æœŸæ€§æ¸…ç†æ—¥å¿—æ•°æ®ã€‚</p>
<p>å…¶äºŒæ˜¯Â <strong>Dify å®˜æ–¹é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨è¿½è¸ªæœåŠ¡</strong>ï¼ŒåŒ…æ‹¬<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a> / Langfuse å’Œ LangSmith ç­‰ã€‚æ•°æ®é‡‡è‡ª Dify ç‰¹æœ‰çš„ OpsTrace äº‹ä»¶æœºåˆ¶å’Œ Dify å¼•æ“ç”Ÿæˆçš„æ‰§è¡Œæ˜ç»†è®°å½•ï¼Œä¸»è¦é‡‡é›† Workflow/Agent å±‚é¢çš„å¤§æ¨¡å‹ã€å·¥å…·ã€çŸ¥è¯†åº“å¬å›ç­‰èŠ‚ç‚¹ä¿¡æ¯ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘äº‘ç›‘æ§</a>ä» Dify v1.6.0 èµ·ä¹Ÿé›†æˆäº† Dify å®˜æ–¹å¯è§‚æµ‹èƒ½åŠ›ï¼Œæä¾›å…¨æ‰˜ç®¡å…è¿ç»´çš„å¯è§‚æµ‹æœåŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de98bd86d5c4172b97fdb9d68cf1d47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=W8qHsqwkBVrVXTVixPPMlOEtgQk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ–¹é›†æˆçš„è¿½è¸ªæœåŠ¡ç—›ç‚¹åœ¨äº<strong>æ•°æ®é‡‡é›†ç²’åº¦å—é™ä¸”ç¼ºå°‘å…¨é“¾è·¯è¿½è¸ªèƒ½åŠ›</strong>ã€‚Dify é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨è¿½è¸ªæœåŠ¡ä¸»è¦å…³æ³¨ Agentic åº”ç”¨å¼€å‘è€…è§†è§’ä¸‹çš„ Wrokflow æ‰§è¡Œæƒ…å†µï¼Œæ›´å¤šåœ°ç”¨äº Prompt è°ƒä¼˜ã€Wrokflow ä¼˜åŒ–ã€æ•°æ®åˆ†æç­‰åœºæ™¯ï¼Œä½†å¯¹äºè‡ªå»º Dify é›†ç¾¤æ—¶å¹³å°è¿ç»´æ–¹çš„é›†ç¾¤ç›‘æ§å’Œä¸Šä¸‹æ¸¸å…¨é“¾è·¯é—®é¢˜æ’æŸ¥èƒ½æä¾›çš„å¸®åŠ©å°±å¾ˆæœ‰é™ã€‚åŒæ—¶å—é™äº Dify çš„ OpsTrace æœºåˆ¶ï¼Œèƒ½å¤Ÿé‡‡é›†çš„æ•°æ®ç²’åº¦åœ¨ Workflow èŠ‚ç‚¹å±‚é¢ï¼Œå…¶ä»–æ›´ç»†ç²’åº¦çš„æ•°æ®æ”¯æŒèµ·æ¥æ¯”è¾ƒå›°éš¾ã€‚</p>
<p>å…¶ä¸‰æ˜¯å¯¹Â <strong>Dify é›†ç¾¤è‡ªèº«çš„å¯è§‚æµ‹æ€§</strong>ï¼Œé¢å‘ Dify é›†ç¾¤å„ç»„ä»¶åŠä¸Šä¸‹æ¸¸ä¾èµ–çš„å…¨é“¾è·¯å¯è§‚æµ‹ã€‚ç›®å‰ Dify åŸç”Ÿæ”¯æŒ Sentry å’Œ OpenTelemetry ä¸¤å¥—å¯è§‚æµ‹æ–¹å¼ã€‚ä¸¤è€…ä¸»è¦é‡‡é›† Flaskã€HTTPã€DBã€Redisã€Celery ç­‰æ¡†æ¶å±‚é¢çš„æ•°æ®ï¼Œå¯¹ Dify è‡ªèº«çš„å†…éƒ¨æ‰§è¡Œé€»è¾‘æœªåšåŸ‹ç‚¹ã€‚Sentry ç”±äºç›¸å¯¹å°é—­ï¼Œç›®å‰ç¤¾åŒº issue ä¸»è¦è½¬å‘æ›´å¼€æ”¾çš„ OTel ç”Ÿæ€ã€‚</p>
<p>åŸç”Ÿ OTel æ–¹å¼çš„ç—›ç‚¹åœ¨äº<strong>é‡‡é›†çš„æ•°æ®éå¸¸æœ‰é™ï¼Œæ— æ³•ä¸²è”ä¸Šä¸‹æ¸¸</strong>å®ç°å…¨é“¾è·¯è¿½è¸ªä¸”æ— æ³•ä¸ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®è”åŠ¨ã€‚åŸç”Ÿçš„ OTel åªæ”¯æŒå¯¹ Dify æ‰§è¡Œå¼•æ“å’Œ Celery ä»»åŠ¡ç»„ä»¶åŸ‹ç‚¹ï¼Œé‡‡é›†çš„ä¿¡æ¯å¹¶ä¸å®Œæ•´ï¼ŒåŒæ—¶ç”±äº Dify æ¶æ„å¤æ‚ä¸”å­˜åœ¨éƒ¨åˆ†è‡ªå®šä¹‰åè®®ï¼Œç¼ºå°‘å…¨é“¾è·¯å¯è§‚æµ‹ä»¥åŠå’Œ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®è”åŠ¨çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">Dify å…¨æ™¯å¯è§‚æµ‹â€”â€”æŒ‘æˆ˜ä¸æ–¹æ¡ˆ</h2>
<p>é’ˆå¯¹ç°æœ‰å¯è§‚æµ‹æ–¹æ¡ˆçš„ç—›ç‚¹ï¼Œäº‘ç›‘æ§ä¸Šçº¿äº† Dify å…¨ç»„ä»¶æ— ä¾µå…¥æ¢é’ˆ + Dify å®˜æ–¹é›†æˆçš„åº”ç”¨è¿½è¸ªæœåŠ¡ç»„åˆçš„ Dify å…¨æ™¯å¯è§‚æµ‹è§£å†³æ–¹æ¡ˆï¼Œæ»¡è¶³ Dify Agentic åº”ç”¨å¼€å‘è€…å’Œ Dify å¹³å°ç»´æŠ¤è€…ä¸¤ä¸ªè§†è§’å¯¹å¯è§‚æµ‹æ€§çš„éœ€è¦ï¼Œå®ç°å¯¹æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€æ²™ç®±ç¯å¢ƒã€æ’ä»¶è¿è¡Œæ—¶ä»¥åŠ Workflow åº”ç”¨çš„å…¨æ–¹ä½ç›‘æ§ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œå›  Dify æ¶æ„å¤æ‚è¿­ä»£è¿…é€Ÿï¼Œå…¨æ™¯å¯è§‚æµ‹çš„å®ç°é¢ä¸´å¤šé¡¹æŒ‘æˆ˜ï¼š</p>
<h3 data-id="heading-4">1. Dify ç»„ä»¶ä¼—å¤šï¼Œæ‰§è¡Œé“¾è·¯å¤æ‚</h3>
<p>Dify è¯·æ±‚ç»è¿‡ç½‘å…³å…¥å£ã€æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€ä»£ç æ²™ç®±ã€æ’ä»¶è¿è¡Œæ—¶ç­‰å¤šä¸ªç»„ä»¶ï¼Œå…³è” Celery åå°ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ’ä»¶è¿è¡Œæ—¶å—æ’ä»¶å¼•æ“çš„ç§æœ‰åè®®ç®¡ç†ï¼Œé“¾è·¯å¤æ‚ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a>ä¸ºæ‰§è¡Œå¼•æ“ã€æ’ä»¶è¿è¡Œæä¾› Python æ¢é’ˆï¼Œé€šè¿‡å‡½æ•° Patch å®ç°é›¶ä»£ç æ”¹åŠ¨çš„æ— ä¾µå…¥åŸ‹ç‚¹ï¼›ä¸ºæ’ä»¶å¼•æ“å’Œä»£ç æ²™ç®±æä¾› Go æ¢é’ˆï¼Œé€šè¿‡ç¼–è¯‘æ—¶æ’æ¡©å®ç°æ— ä¾µå…¥æ³¨å…¥ï¼›ä¸º Nginx å’Œ Celery ä»»åŠ¡é˜Ÿåˆ—æä¾› OTel æ¢é’ˆçš„è§£å†³æ–¹æ¡ˆï¼›å¯¹äºç”Ÿå‘½å‘¨æœŸå—æ’ä»¶å¼•æ“ç®¡æ§çš„æ’ä»¶è¿è¡Œæ—¶ï¼Œé€šè¿‡ä»£ç æ’æ¡©æ”¹é€ æ’ä»¶æ‹‰èµ·æµç¨‹ï¼Œå¼•å…¥æ¢é’ˆæŒ‚è½½é€»è¾‘ã€‚æœ€ç»ˆå¯¹ Dify é›†ç¾¤å†…çš„å„ä¸ªç»„ä»¶ï¼Œåªéœ€é…ç½®ç¯å¢ƒå˜é‡å¹¶ä¿®æ”¹å¯åŠ¨å‘½ä»¤å³å¯å®ç°æ— ä¾µå…¥æ³¨å…¥ã€‚</p>
<h3 data-id="heading-5">2. Dify è¿­ä»£è¿…é€Ÿï¼Œä»£ç å˜åŠ¨é¢‘ç¹</h3>
<p>Dify ç¤¾åŒºå·²æœ‰ 1000+ è´¡çŒ®è€…ï¼Œç»å¸¸ä¸€å‘¨ç”šè‡³æ•°å¤©å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ã€‚Dify å®ç°çš„é¢‘ç¹å˜åŠ¨ç»™æ— ä¾µå…¥æ¢é’ˆçš„å®ç°å¸¦æ¥å¾ˆå¤§æŒ‘æˆ˜ï¼Œçº¯æ— ä¾µå…¥æ–¹å¼å¾ˆéš¾è·Ÿä¸Š Dify çš„å‘ç‰ˆèŠ‚å¥ã€‚</p>
<p>äº‘ç›‘æ§å›¢é˜Ÿå’Œç¤¾åŒºç§¯æåˆä½œï¼Œå¯¹æ¥å®˜æ–¹æä¾›çš„ç¬¬ä¸‰æ–¹é›†æˆæ–¹å¼ï¼Œå¯¹äº Dify å†…éƒ¨æ˜“å˜çš„ Workflow æ‰§è¡Œé€»è¾‘é‡‡ç”¨å®˜æ–¹æ–¹å¼ä¸ŠæŠ¥ï¼Œç”±ç¤¾åŒºç»´æŠ¤ç‰ˆæœ¬æ›´è¿­å¼•èµ·çš„æ”¹åŠ¨ã€‚åŒæ—¶åœ¨æ— ä¾µå…¥æ¢é’ˆä¸­å¯¹ Dify å†…éƒ¨æ–¹æ³•åšæœ€å°ä¾èµ–ï¼Œä»…å¤„ç†æ¡†æ¶å±‚é¢çš„åŸ‹ç‚¹å’Œä¸Šä¸‹æ–‡ä¼ é€’è¿‡ç¨‹ä¸­çš„æ–­é“¾é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">3. Dify å®˜æ–¹é›†æˆçš„ç›‘æµ‹å’Œ OTel ç”Ÿæ€éš¾ä»¥ä¸²è”</h3>
<p>Dify å®˜æ–¹é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨ç›‘æ§æœåŠ¡ä½¿ç”¨ Dify è‡ªå®šä¹‰çš„ OpsTrace æœºåˆ¶ï¼Œé‡‡ç”¨å¼‚æ­¥åèšåˆçš„æ–¹å¼ä¸ŠæŠ¥è¿½è¸ªæ•°æ®ï¼Œè¿™å’Œæ ‡å‡†çš„ OTel å®ç°å­˜åœ¨è¾ƒå¤§å·®å¼‚ã€‚ç°æœ‰çš„é›†æˆæ–¹å¦‚ Langfuse ç­‰éƒ½æ— æ³•å®ç°å®˜æ–¹çš„åº”ç”¨è¿½è¸ªå’Œå…¨é“¾è·¯è¿½è¸ªç»“åˆã€‚</p>
<p>äº‘ç›‘æ§é‡‡ç”¨ OTel æ ¼å¼ä¸ŠæŠ¥æ•°æ®ï¼Œåœ¨ Dify å¼•æ“æŒ‚è½½æ¢é’ˆæ—¶å°† traceId ä¿¡æ¯é€ä¼ åˆ°åå°çš„ Celery ä»»åŠ¡ï¼Œé€šè¿‡ Trace Link æ–¹å¼å…³è” Dify å®˜æ–¹é›†æˆæ–¹å¼ä¸ŠæŠ¥çš„ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®å’Œæ— ä¾µå…¥æ¢é’ˆä¸ŠæŠ¥çš„å…¨é“¾è·¯è¿½è¸ªæ•°æ®ï¼Œå®ç°å…¨æ™¯å¯è§‚æµ‹ã€‚</p>
<h2 data-id="heading-7">äº‘ç›‘æ§å¯è§‚æµ‹é›†æˆ</h2>
<h3 data-id="heading-8">æ¥å…¥é€Ÿè§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215a805636554690a9cb18dfec64518d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=lF5XO8gHh%2BBTw7jDXYCdTX3wo%2B0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äº‘ç›‘æ§ç»™ Dify çš„å„ä¸ªç»„ä»¶éƒ½æä¾›äº†å¯è§‚æµ‹æ–¹æ¡ˆï¼Œå…¶ä¸­ Workflow åº”ç”¨æ— éœ€æŒ‚è½½æ¢é’ˆï¼Œåœ¨ Dify æ§åˆ¶å°ä¸Šä¸ºéœ€è¦ç›‘æ§çš„åº”ç”¨å¼€å¯è¿½è¸ªå³å¯ã€‚å…¶ä½™ç»„ä»¶éœ€è¦æŒ‚è½½æ¢é’ˆå®ç°ç›‘æ§ï¼Œå…¶ä¸­ API å’Œ Plugin-Daemon æ˜¯æ ¸å¿ƒçš„å·¥ä½œæµå’Œæ’ä»¶ç³»ç»Ÿæ‰§è¡Œå¼•æ“ï¼Œæ¨èä¼˜å…ˆæŒ‚è½½ã€‚Sandboxã€Workerã€Nginx æŒ‰éœ€å¯é€‰æŒ‚è½½ã€‚</p>
<h3 data-id="heading-9">ç‰ˆæœ¬è¦æ±‚</h3>
<h4 data-id="heading-10">Python æ¢é’ˆ</h4>
<p>ä½¿ç”¨æœ€æ–°ç‰ˆ Python æ¢é’ˆå³å¯ï¼ŒDify v1.x ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œå› ä¸ºåªé‡‡ HTTP/Flask/Redis/DB ç­‰æ¡†æ¶å±‚æ•°æ®ï¼Œæ‰€ä»¥ Python æ¢é’ˆå¯¹ Dify ç‰ˆæœ¬æ— å¼ºè¦æ±‚ã€‚Dify v1.8.0 ä»¥åçš„ç‰ˆæœ¬æ”¯æŒé€šè¿‡ Trace Link æ–¹å¼ä¸²è” Dify å®˜æ–¹é›†æˆä¸ŠæŠ¥çš„ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®ã€‚</p>
<h4 data-id="heading-11">Go æ¢é’ˆ</h4>
<p>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Go æ¢é’ˆå³å¯ï¼ŒDify v1.x ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œæä¾›å¯¹ dify-plugin-damon çš„ç›‘æ§ï¼ŒåŒæ—¶æ”¯æŒå¯¹æ’ä»¶ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç›‘æ§ã€‚</p>
<h4 data-id="heading-12">Dify åŸç”Ÿç›‘æ§</h4>
<p>ä» Dify v1.6.x å¼€å§‹é›†æˆï¼Œæ›´é«˜çš„ç‰ˆæœ¬åŠŸèƒ½æ›´å…¨ï¼Œæ¨èä½¿ç”¨è¾ƒæ–°çš„ç‰ˆæœ¬ã€‚æ›´æ–°è®°å½•å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79959323cae54e3b891b74c8eae1f537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Jur6z0Yh7%2BbulM3k0z0xdmPt7Rk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-13">Opentelemetry æ’ä»¶</h4>
<p>æ¨èé¦–é€‰ Python æ¢é’ˆï¼Œé˜¿é‡Œäº‘ Python æ¢é’ˆæŒ‰ç…§ OTel æ ‡å‡†å®ç°ï¼Œå¹¶åœ¨æ¢é’ˆåŸºåº§å’Œæ•°æ®ä¸ŠæŠ¥ä¸Šåšäº†å¢å¼ºã€‚Dify çš„ Workerã€Nginx å¯ä»¥ä½¿ç”¨ OTel æ–¹æ¡ˆã€‚Dify ä» v1.3.0 å¼€å§‹æ”¯æŒ OTel é…ç½®ï¼Œä½†ä¸ŠæŠ¥ç«¯ç‚¹å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œä» Dify v1.7.0 ä»¥åæ”¯æŒä¸ŠæŠ¥åˆ°é˜¿é‡Œäº‘çš„äº‘ç›‘æ§2.0/ARMS åç«¯ã€‚</p>
<h3 data-id="heading-14">ç›‘æ§ Workflow åº”ç”¨</h3>
<p>ä½¿ç”¨ Dify å®˜æ–¹é›†æˆçš„äº‘ç›‘æ§å¯é‡‡é›† LLMã€Toolã€RAG ç­‰ Workflow å±‚é¢çš„ Trace æ•°æ®ï¼Œå³Â Dify å®˜æ–¹é›†æˆçš„ç›‘æ§é‡‡é›†å¤§æ¨¡å‹åº”ç”¨æ•°æ®ï¼Œä¸€ä¸ª Workflow å¯¹åº”ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨ã€‚</p>
<p>é™äº Dify æ¡†æ¶ç‰¹æ€§ï¼ŒDify å®˜æ–¹é›†æˆçš„äº‘ç›‘æ§å’Œ Python æ¢é’ˆé‡‡é›†çš„ Trace æ— æ³•ç›´æ¥è”é€šï¼Œä½†å¯ä»¥é€šè¿‡ Trace Link æ–¹å¼å®ç°å¤§æ¨¡å‹åº”ç”¨å’Œå¾®æœåŠ¡åº”ç”¨çš„ç›¸å…³å…³è”ï¼Œé€šè¿‡ Python æ¢é’ˆå’Œ Dify åŸç”Ÿç›‘æ§ç»„åˆå®ç° API ç»„ä»¶çš„å¯è§‚æµ‹ã€‚</p>
<h4 data-id="heading-15">å‰ææ¡ä»¶</h4>
<p>Dify ç‰ˆæœ¬ &gt;= 1.6.0</p>
<h4 data-id="heading-16">æ­¥éª¤ä¸€ï¼šè·å–é˜¿é‡Œäº‘ Endpoint å’Œ License Key</h4>
<p>æ–¹å¼ä¸€ï¼‰äº‘ç›‘æ§ 2.0 ä¸” Dify ç‰ˆæœ¬ &gt;= 1.9.1 çš„ç”¨æˆ·æ¨èä½¿ç”¨äº‘ç›‘æ§ 2.0 çš„ä¸ŠæŠ¥ç«¯ç‚¹ï¼š</p>
<ol>
<li>
<p>ç™»å½•äº‘ç›‘æ§ 2.0 æ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»æ¥å…¥ä¸­å¿ƒã€‚</p>
</li>
<li>
<p>åœ¨åº”ç”¨ç›‘æ§&amp;é“¾è·¯è¿½è¸ªåŒºåŸŸå•å‡» Dify å¡ç‰‡ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„æ¥å…¥é¢æ¿ä¸­é€‰æ‹©æ•°æ®ä¸ŠæŠ¥åœ°åŸŸï¼Œç‚¹å‡»è·å– LicenseKeyã€‚</p>
</li>
<li>
<p>è®°å½•ç”Ÿæˆçš„ LicenseKey å’Œ Endpointã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/011914895a7f43a481eeb59208911244~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=5sgZL7sw%2BL1n7zfVPCSNciMmwDY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">ARMS</a> ç”¨æˆ·æˆ– Dify ç‰ˆæœ¬åœ¨ 1.6.0ï½1.9.0 çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ ARMS çš„ä¸ŠæŠ¥ç«¯ç‚¹ï¼Œæ•°æ®ä¹Ÿä¼šåœ¨äº‘ç›‘æ§ 2.0 ä¸ŠåŒæ­¥å‘ˆç°ï¼š</p>
<ol>
<li>
<p>ç™»å½• ARMS æ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»æ¥å…¥ä¸­å¿ƒã€‚</p>
</li>
<li>
<p>åœ¨æœåŠ¡ç«¯åº”ç”¨åŒºåŸŸå•å‡» OpenTelemetry å¡ç‰‡ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„ OpenTelemetry é¢æ¿ä¸­é€‰æ‹©æ•°æ®ä¸ŠæŠ¥åœ°åŸŸï¼Œä¸ŠæŠ¥æ–¹å¼é€‰ gRPCã€‚</p>
</li>
<li>
<p>è®°å½•ç”Ÿæˆçš„ LicenseKey å’Œ Endpointï¼Œæ³¨æ„ Endpoint ä¸è¦å¸¦ç«¯å£å·ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a65d3ea809046c68dc01bce25e87beb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ngyc0HDEgtyIbd6X9SIDm7t1PAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-17">æ­¥éª¤äºŒï¼šé…ç½®åº”ç”¨æ€§èƒ½è¿½è¸ª</h4>
<ol>
<li>
<p>ç™»å½• Dify æ§åˆ¶å°ï¼Œå¹¶è¿›å…¥éœ€è¦ç›‘æ§çš„ Dify åº”ç”¨ã€‚</p>
</li>
<li>
<p>åœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»ç›‘æµ‹ã€‚</p>
</li>
<li>
<p>å•å‡»è¿½è¸ªåº”ç”¨æ€§èƒ½ï¼Œç„¶ååœ¨äº‘ç›‘æ§åŒºåŸŸå•å‡»é…ç½®ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥æ­¥éª¤ä¸€è·å–çš„ License Key å’Œ Endpointï¼Œå¹¶è‡ªå®šä¹‰ App Nameï¼ˆARMS æ§åˆ¶å°æ˜¾ç¤ºçš„åº”ç”¨åç§°ï¼‰ï¼Œç„¶åå•å‡»ä¿å­˜å¹¶å¯ç”¨ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cca257e9687a4b918ff735379fd303be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=zVjRZp2rF5dYKphlJLX8YOZeNW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-18">æ­¥éª¤ä¸‰ï¼šæŸ¥çœ‹ Dify åº”ç”¨ç›‘æ§æ•°æ®</h4>
<p>é…ç½®å®Œæ¯•ååœ¨ Dify æ§åˆ¶å°æˆ–é€šè¿‡ DifyÂ APIÂ å‘èµ·å‡ æ¬¡è¯·æ±‚ï¼Œç¨ç­‰ 1ï½2 åˆ†é’Ÿå³å¯ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°æŸ¥çœ‹ä¸ŠæŠ¥çš„æ•°æ®ã€‚</p>
<p>æ–¹å¼ä¸€ï¼šç›‘æ§ 2.0 ç”¨æˆ·åœ¨åº”ç”¨ä¸­å¿ƒ- AI åº”ç”¨å¯è§‚æµ‹å¤„æŸ¥çœ‹</p>
<p>æ–¹å¼äºŒï¼šARMS ç”¨æˆ·åœ¨ LLM åº”ç”¨ç›‘æ§å¤„æŸ¥çœ‹</p>
<p><strong>åº”ç”¨è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd080d6ce771403987e394600a9a815c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3%2FIocsqIkXxCtTSBkBENOQZbqYA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<p>LLM èŠ‚ç‚¹ä¼šé‡‡é›†ç³»ç»Ÿ/ç”¨æˆ·æç¤ºè¯ã€æ¨¡å‹è¾“å‡ºã€æ¨¡å‹æä¾›å•†å’Œå‹å·ã€token ç”¨é‡ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7f92d57fa4d4e6199dc722af405b03b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=L9z4jQlm5i3zwFg4izFQgBYoaCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Retriever èŠ‚ç‚¹ä¼šé‡‡é›†æŸ¥è¯¢è¯­å¥ã€å¬å›ç‰‡æ®µã€å…³è”æ–‡æ¡£å…ƒæ•°æ®ã€embbeding è¯„åˆ†ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a351fc888844770bd172f54d4684fc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Ki14WctZgV6Jg1QNN9mrV2qBCS0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Tool èŠ‚ç‚¹ä¼šé‡‡é›†å·¥å…·å‚æ•°å’Œè°ƒç”¨ç»“æœã€å·¥å…·æä¾›å•†å’Œæè¿°ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95aa2c0ec49141068afccaa622b53a77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3fbOgKrvscyWwujNEap0kbhh%2BhM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶ä»–æµç¨‹èŠ‚ç‚¹ä¹Ÿéƒ½ä¼šé‡‡é›†èŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºã€ä¼šè¯ IDã€ç”¨æˆ· ID ç­‰å¿…è¦æ•°æ®ã€‚</p>
<p>æ¥å…¥å¯å‚è€ƒæ–‡æ¡£[3][4]ã€‚</p>
<h3 data-id="heading-19">ç›‘æ§æ‰§è¡Œå¼•æ“ API</h3>
<p>API æ˜¯ Dify æ‰§è¡Œå¼•æ“ã€‚ä½¿ç”¨ Python æ¢é’ˆå¯é‡‡é›† HTTP/Flask/Redis/DB ç­‰æ¡†æ¶å±‚é¢çš„ Trace æ•°æ®ï¼Œå¹¶å…³è”ä¸Šä¸‹æ¸¸è°ƒç”¨å®ç°å…¨é“¾è·¯è¿½è¸ªï¼Œå³Â Python æ¢é’ˆé‡‡é›†å¾®æœåŠ¡æ•°æ®ï¼ŒAPIÂ ç»„ä»¶å¯¹åº”ä¸€ä¸ªå¾®æœåŠ¡åº”ç”¨ã€‚</p>
<h4 data-id="heading-20">æ­¥éª¤ä¸€ï¼šå®‰è£… Python æ¢é’ˆ</h4>
<p>é¦–å…ˆéœ€è¦å¸è½½å†²çªçš„ OTel æ’ä»¶ï¼Œä¸‹è½½å¹¶å®‰è£… Python æ¢é’ˆã€‚</p>
<p>å¯åŠ¨è„šæœ¬å¼€å¤´æ”¹åŠ¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿pipç¯å¢ƒ</span>
pythonÂ -m ensurepip --upgrade

<span class="hljs-comment"># å¸è½½å†²çªçš„OTelæ’ä»¶</span>
pip3Â uninstall -y opentelemetry-instrumentation-celeryÂ \
Â  opentelemetry-instrumentation-flaskÂ \
Â  opentelemetry-instrumentation-redisÂ \
Â  opentelemetry-instrumentation-requestsÂ \
Â  opentelemetry-instrumentation-loggingÂ \
Â  opentelemetry-instrumentation-wsgiÂ \
Â  opentelemetry-instrumentation-fastapiÂ \
Â  opentelemetry-instrumentation-asgiÂ \
Â  opentelemetry-instrumentation-sqlalchemy

<span class="hljs-comment"># å®‰è£…Pythonæ¢é’ˆ</span>
pip3Â config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple/ &amp;&amp; pip3 config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com
pip3Â install aliyun-bootstrap &amp;&amp; aliyun-bootstrap -a install
</code></pre>
<p><strong>æç¤ºï¼š</strong></p>
<p>å¯ä»¥é€šè¿‡ Docker æ•°æ®å·æŒ‚è½½æ–¹å¼ç”¨ä¿®æ”¹åçš„å¯åŠ¨è„šæœ¬æ›¿æ¢åŸè„šæœ¬ï¼ˆä¿®æ”¹æºç å¹¶é‡æ‰“é•œåƒä¹Ÿå¯ä»¥ï¼‰ã€‚å³å°†ä¿®æ”¹åçš„è„šæœ¬ä½œä¸ºé…ç½®é¡¹æŒ‚è½½åˆ°å®¹å™¨ç›®å½•å†…ï¼Œå¹¶æŒ‡å®šå®¹å™¨ä»æ­¤è„šæœ¬å¯åŠ¨ã€‚ä¾‹å¦‚ï¼š</p>
<p>å°†ä¿®æ”¹åçš„è„šæœ¬ entrypoint.sh å­˜å‚¨ä¸ºé…ç½®é¡¹ï¼Œå¹¶æŒ‚è½½åˆ°å®¹å™¨ç›®å½• /app/api/dockerã€‚</p>
<p>æŒ‡å®šå¯åŠ¨å‘½ä»¤ï¼š["/bin/bash","/app/api/docker/entrypoint.sh"]</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16bf9c3ba8bd4cf7b74ebafe95bdb4c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=42kRrfGt9ddXNf9t4e7BRgpwsw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-21">æ­¥éª¤äºŒï¼šä¿®æ”¹å¯åŠ¨å‘½ä»¤</h4>
<p>åœ¨å¯åŠ¨è„šæœ¬æœ€åçš„åº”ç”¨å¯åŠ¨éƒ¨åˆ†åšä¿®æ”¹ï¼Œä» aliyun-instrument å¯åŠ¨ï¼š</p>
<p>å¯åŠ¨è„šæœ¬æœ«å°¾æ”¹åŠ¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨aliyun-instrumentå¯åŠ¨</span>
<span class="hljs-built_in">exec</span>Â aliyun-instrument gunicorn \
Â  Â  Â  --<span class="hljs-built_in">bind</span>Â <span class="hljs-string">"<span class="hljs-variable">${DIFY_BIND_ADDRESS:-0.0.0.0}</span>:<span class="hljs-variable">${DIFY_PORT:-5001}</span>"</span>Â \
Â  Â  Â  --workersÂ <span class="hljs-variable">${SERVER_WORKER_AMOUNT:-1}</span>Â \
Â  Â  Â  --worker-classÂ <span class="hljs-variable">${SERVER_WORKER_CLASS:-gevent}</span>Â \
Â  Â  Â  --worker-connectionsÂ <span class="hljs-variable">${SERVER_WORKER_CONNECTIONS:-10}</span>Â \
Â  Â  Â  --<span class="hljs-built_in">timeout</span>Â <span class="hljs-variable">${GUNICORN_TIMEOUT:-200}</span>Â \
Â  Â  Â  app:app
</code></pre>
<p>åŒç†æ­¤æ­¥éª¤ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹é•œåƒæ‰“åŒ…è¿‡ç¨‹æˆ–é€šè¿‡æŒ‚è½½ K8S é…ç½®é¡¹å¹¶æ›¿æ¢ Dify å¯åŠ¨è„šæœ¬çš„æ–¹å¼å®ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b018a7ed8f24d9bb851032e19a02009~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=FlQs%2FuUGFyQ3JxrUIks7Fwl6q%2Fo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-22">æ­¥éª¤ä¸‰ï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>é…ç½®å¦‚ä¸‹ç¯å¢ƒå˜é‡ï¼Œåº”ç”¨åã€åœ°åŸŸå’Œ License Key æ ¹æ®å®é™…æƒ…å†µå¡«å†™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692375ca8b844b4e85ee655417062a39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ykq%2Fjxwpji54g7LfA268%2FzTBtHo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-23">æ­¥éª¤å››ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹Â APIÂ ç›‘æ§æ•°æ®</h4>
<p>è¿›å…¥åº”ç”¨ç›‘æ§åˆ—è¡¨å¯ä»¥çœ‹åˆ° dify-api åº”ç”¨ï¼Œåº”ç”¨è¯¦æƒ…ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e04c1d649e734abf9905b5e2d485d68d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=PICxuZzFy5C8A9EnijtD%2B%2FUTWLA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è°ƒç”¨é“¾ä¼šä¸²è”ä¸Šä¸‹æ¸¸è°ƒç”¨ä¿¡æ¯ï¼Œç¤ºä¾‹æ•°æ®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a67eba21a02843b499e28167f2ab384e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=P9o%2BWMuxktAhAMG3loTJBZXVc9I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥å‚è€ƒæ–‡æ¡£[5]ï¼Œæ³¨æ„å¦‚æœç›´æ¥ä½¿ç”¨ ack-onepilot è‡ªåŠ¨æ³¨å…¥ï¼Œä¼šå­˜åœ¨ Dify è‡ªå¸¦çš„ OTel SDK å’Œ Python æ¢é’ˆå†²çªçš„é—®é¢˜ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨æ”¹å¯åŠ¨è„šæœ¬å¸è½½å†²çªçš„ OTel ä¾èµ–ã€‚</p>
<h3 data-id="heading-24">ç›‘æ§æ’ä»¶å¼•æ“ Dify-Plugin-Daemon</h3>
<p>Dify-Plugin-Daemon æ˜¯ Dify çš„æ’ä»¶ç®¡ç†å™¨ï¼ŒDify çš„ LLMã€æ’ä»¶ã€Agent ç­–ç•¥çš„æ‰§è¡Œéƒ½ä¾èµ– Plugin-Daemonã€‚Go Agent[2]æ”¯æŒç›‘æ§ Dify-Plugin-Daemonï¼Œæ¥å…¥ Go ç›‘æ§éœ€ä¿®æ”¹Dockerfileã€é‡æ–°ç¼–è¯‘é•œåƒåé…ç½®ç¯å¢ƒå˜é‡å¼€å¯ã€‚Plugin-Daemon çš„ Go æ¢é’ˆåŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨ä¸ºæ’ä»¶è¿è¡Œæ—¶æŒ‚è½½ Python æ¢é’ˆã€‚</p>
<h4 data-id="heading-25">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Dockerfile æ–‡ä»¶é‡æ–°ç¼–è¯‘å¯¹åº”é•œåƒ</h4>
<p>local.dockerfile ä¿®æ”¹ç¤ºä¾‹</p>
<p>DockerFile</p>
<pre><code class="hljs language-bash" lang="bash">FROM golang:1.23-alpine AS builder


ARG VERSION=unknown
<span class="hljs-comment"># copy project</span>
COPY . /app
<span class="hljs-comment"># set working directory</span>
WORKDIR /app
<span class="hljs-comment"># using goproxy if you have network issues</span>
<span class="hljs-comment"># ENV GOPROXY=https://goproxy.cn,direct</span>
<span class="hljs-comment"># download arms instgo</span>
RUN wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
RUNÂ <span class="hljs-built_in">chmod</span>Â 777 instgo
<span class="hljs-comment"># instgo build</span>
RUN INSTGO_EXTRA_RULES=<span class="hljs-string">"dify_python"</span>Â ./instgo go build \
Â  Â  -ldflagsÂ <span class="hljs-string">"\
Â  Â  -X 'github.com/langgenius/dify-plugin-daemon/internal/manifest.VersionX=<span class="hljs-variable">${VERSION}</span>' \
Â  Â  -X 'github.com/langgenius/dify-plugin-daemon/internal/manifest.BuildTimeX=<span class="hljs-subst">$(date -u +%Y-%m-%dT%H:%M:%S%z)</span>'"</span> \
Â  Â  -o /app/main cmd/server/main.go
<span class="hljs-comment"># copy entrypoint.sh</span>
COPY entrypoint.sh /app/entrypoint.sh
RUNÂ <span class="hljs-built_in">chmod</span>Â +x /app/entrypoint.sh
FROM ubuntu:24.04
WORKDIR /app
<span class="hljs-comment"># check build args</span>
ARG PLATFORM=<span class="hljs-built_in">local</span>
<span class="hljs-comment"># Install python3.12if PLATFORM is local</span>
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y curl python3.12 python3.12-venv python3.12-dev python3-pip ffmpeg build-essential \
Â  Â  &amp;&amp; apt-get clean \
Â  Â  &amp;&amp;Â <span class="hljs-built_in">rm</span>Â -rf /var/lib/apt/lists/* \
Â  Â  &amp;&amp; update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.12 1;
<span class="hljs-comment"># preload tiktoken</span>
ENV TIKTOKEN_CACHE_DIR=/app/.tiktoken
<span class="hljs-comment"># Install dify_plugin to speedup the environment setup, test uv and preload tiktoken</span>
RUNÂ <span class="hljs-built_in">mv</span>Â /usr/lib/python3.12/EXTERNALLY-MANAGED /usr/lib/python3.12/EXTERNALLY-MANAGED.bk \
Â  Â  &amp;&amp; python3 -m pip install uv \
Â  Â  &amp;&amp; uv pip install --system dify_plugin \
Â  Â  &amp;&amp; python3 -cÂ <span class="hljs-string">"from uv._find_uv import find_uv_bin;print(find_uv_bin());"</span>Â \
Â  Â  &amp;&amp; python3 -cÂ <span class="hljs-string">"import tiktoken; encodings = ['o200k_base', 'cl100k_base', 'p50k_base', 'r50k_base', 'p50k_edit', 'gpt2']; [tiktoken.get_encoding(encoding).special_tokens_set for encoding in encodings]"</span>
ENV UV_PATH=/usr/local/bin/uv
ENV PLATFORM=<span class="hljs-variable">$PLATFORM</span>
ENV GIN_MODE=release
COPY --from=builder /app/main /app/entrypoint.sh /app/
<span class="hljs-comment"># run the server, using sh as the entrypoint to avoid process being the root process</span>
<span class="hljs-comment"># and using bash to recycle resources</span>
CMD [<span class="hljs-string">"/bin/bash"</span>,Â <span class="hljs-string">"-c"</span>,Â <span class="hljs-string">"/app/entrypoint.sh"</span>]
</code></pre>
<p>æ³¨æ„ INSTGO_EXTRA_RULES é€‰é¡¹ä¼šå¼€å¯ Plugin è¿è¡Œæ—¶è‡ªåŠ¨ç›‘æµ‹åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦åœ¨ Plugin-Daemon å¯åŠ¨æ—¶æ‹‰èµ·å¯¹ Plugin æ¢é’ˆï¼Œå¯ä»¥å»é™¤ç¼–è¯‘æ–‡ä»¶ä¸­çš„<code>INSTGO_EXTRA_RULES="dify_python"ã€‚</code></p>
<h4 data-id="heading-26">æ­¥éª¤äºŒï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>æ–¹å¼ä¸€ï¼‰ECS ç¯å¢ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a14ec06f90f44155b0bd899e6ea1d2fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=E%2Bpeiy1kp2YXQZ2WRw5cbxrg4WI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰å®¹å™¨åŒ– ack-onepilot ç¯å¢ƒ</p>
<p>åœ¨ dify-plugin-daemon åº”ç”¨çš„ YAML é…ç½®ä¸­å°†ä»¥ä¸‹ labels æ·»åŠ åˆ° spec.template.metadata å±‚çº§ä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">labels:
Â  aliyun.com/app-language: golang
Â  armsPilotAutoEnable:Â <span class="hljs-string">'on'</span>
Â  armsPilotCreateAppName:Â <span class="hljs-string">"dify-daemon-plugin"</span>
</code></pre>
<h4 data-id="heading-27">æ­¥éª¤ä¸‰ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹Â dify-plugin-daemon ç›‘æ§</h4>
<p>åœ¨åº”ç”¨åˆ—è¡¨é¡µé¢è¿›å…¥ dify-plugin-daemon åº”ç”¨ï¼Œç›‘æ§è¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58ac56cd7ef24c119d2a7db118a59370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=IFOGvcgL99hkyGAlVsx1qAaPUIo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac53088b9e66401c95422be50dfbd1ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=6hAhQq8xXNCOyOHZjOurjLYx4Po%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-28">æ­¥éª¤å››ï¼šæŸ¥çœ‹ Plugin ç›‘æ§</h4>
<p>æŒ‚è½½æ¢é’ˆåï¼ŒPlugin-Daemon ä¼šè‡ªåŠ¨æ‹‰èµ·æ’ä»¶è¿è¡Œæ—¶çš„æ¢é’ˆã€‚æ¯ä¸ªæ’ä»¶è¿è¡Œæ—¶å¯¹åº”ä¸€ä¸ªå¯è§‚æµ‹åº”ç”¨ï¼Œåº”ç”¨åä¸º {plugin_daemon_name}<em>plugin</em>{plugin_name}_{plugin_version}ã€‚ä¾‹å¦‚ï¼ŒPlugin-Daemon é…ç½®çš„åº”ç”¨åä¸º local-dify-plugin-daemonï¼Œå®‰è£…äº† tongyi çš„ version 0.0.53 æ’ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆåº”ç”¨ local-dify-plugin-daemon_plugin_tongyi_0.0.53ã€‚</p>
<p>æ’ä»¶ç›‘æ§æ¦‚è§ˆé¡µç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02763908464745ddba514613fadaad9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=67YjRhs2uZFciyoBgCzmMbcpyVE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-29">(å¯é€‰) ç›‘æ§ä»£ç æ²™ç®± Sandbox</h3>
<p>Sandbox æ˜¯ Dify ä»£ç æ²™ç®±å¼•æ“ï¼Œè´Ÿè´£æ‰§è¡Œ Workflow ä¸­çš„ Python/Node.js ä»£ç ã€‚Go æ¢é’ˆæ”¯æŒç›‘æ§ Sandboxï¼Œéœ€ä¿®æ”¹ Dockerfileã€é‡æ–°ç¼–è¯‘é•œåƒåé…ç½®ç¯å¢ƒå˜é‡å¼€å¯ã€‚</p>
<h4 data-id="heading-30">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Dockerfile æ–‡ä»¶é‡æ–°ç¼–è¯‘å¯¹åº”é•œåƒ</h4>
<p>ä¿®æ”¹ ./build/build_[amd64|arm64].sh æ–‡ä»¶ã€‚</p>
<p>a. æ·»åŠ  instgo ä¸‹è½½å‘½ä»¤ã€‚</p>
<p>ä¸‹è½½å‘½ä»¤ç¤ºä¾‹å¦‚ä¸‹ï¼Œå…¶ä»–åœ°åŸŸå’Œæ¶æ„çš„ä¸‹è½½å‘½ä»¤è¯·å‚è§ä¸‹è½½ instgoã€‚</p>
<p>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Finstgo-tool-introduction%255B%239b94bbe8a62ra%25EF%25BC%2589" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/instgo-tool-introduction%5B#9b94bbe8a62ra%EF%BC%89" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
<span class="hljs-built_in">chmod</span>Â 777Â instgo
</code></pre>
<p>b. åœ¨Â <code>go build</code>Â å‰æ·»åŠ Â <code>instgo</code>Â å‘½ä»¤ã€‚</p>
<p>ä»¥ amd64 ä¸ºä¾‹ï¼Œä¿®æ”¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span>Â -f internal/core/runner/python/python.so
<span class="hljs-built_in">rm</span>Â -f internal/core/runner/nodejs/nodejs.so
<span class="hljs-built_in">rm</span>Â -f /tmp/sandbox-python/python.so
<span class="hljs-built_in">rm</span>Â -f /tmp/sandbox-nodejs/nodejs.so
wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
<span class="hljs-built_in">chmod</span>Â 777 instgo
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building Python lib"</span>
CGO_ENABLED=1 GOOS=linux GOARCH=amd64 ./instgo go build -o internal/core/runner/python/python.so -buildmode=c-shared -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/lib/python/main.go &amp;&amp;
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building Nodejs lib"</span>Â &amp;&amp;
CGO_ENABLED=1 GOOS=linux GOARCH=amd64 ./instgo go build -o internal/core/runner/nodejs/nodejs.so -buildmode=c-shared -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/lib/nodejs/main.go &amp;&amp;
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building main"</span>Â &amp;&amp;
GOOS=linux GOARCH=amd64 ./instgo go build -o main -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/server/main.go
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building env"</span>
GOOS=linux GOARCH=amd64 ./instgo go build -oÂ <span class="hljs-built_in">env</span>Â -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/dependencies/init.go
</code></pre>
<h4 data-id="heading-31">æ­¥éª¤äºŒï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>æ–¹å¼ä¸€ï¼‰æ—  ack-onepilot ç¯å¢ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/636de4fea1ba4df388e678b033c1292b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=UMp4vE%2FC7Da%2BuYs0XwYfnohVztQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰å®¹å™¨åŒ– ack-onepilot ç¯å¢ƒ</p>
<p>åœ¨ dify-plugin-daemon åº”ç”¨çš„ YAML é…ç½®ä¸­å°†ä»¥ä¸‹ labels æ·»åŠ åˆ° spec.template.metadata å±‚çº§ä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">labels:
Â  aliyun.com/app-language: golang
Â  armsPilotAutoEnable:Â <span class="hljs-string">'on'</span>
Â  armsPilotCreateAppName:Â <span class="hljs-string">"dify-daemon-plugin"</span>
</code></pre>
<h3 data-id="heading-32">æ­¥éª¤ä¸‰ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹ sandbox ç›‘æ§</h3>
<p>åœ¨åº”ç”¨åˆ—è¡¨é¡µé¢è¿›å…¥ dify-sandbox åº”ç”¨ï¼Œç›‘æ§è¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae047344ee80435e904f9c0194e681f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Y6U4bD3OhAGluZix7Js7uiw8VRg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbaf52127eb4d2089932fa04bcdfd86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=MR5AIp%2FKsI%2BpBr%2BOASuV%2BNrUpHM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p><strong>å‚è€ƒæ–‡æ¡£ï¼š</strong></p>
<p>ç›‘æ§ Go åº”ç”¨</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fuser-guide%2Fmonitoring-the-golang-applications%2F" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/user-guide/monitoring-the-golang-applications/" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fuser-guide%2Fconnect-a-dify-application-to-arms-application-monitoring(%25E6%25AD%25A5%25E9%25AA%25A4%25E4%25BA%2594)" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/user-guide/connect-a-dify-application-to-arms-application-monitoring(%E6%AD%A5%E9%AA%A4%E4%BA%94)" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
</blockquote>
<h3 data-id="heading-33">(å¯é€‰) ç›‘æ§ä»»åŠ¡é˜Ÿåˆ— Worker</h3>
<p>Worker æ˜¯ Dify åå°ä»»åŠ¡ç»„ä»¶ï¼ŒçŸ¥è¯†åº“æ„å»ºå’Œå‘¨æœŸæ€§æ¸…ç†ä»»åŠ¡ä¾èµ– Worker æ‰§è¡Œã€‚æŒ‰æ™®é€š Python Celery åº”ç”¨æ–¹å¼æ¥å…¥å³å¯ã€‚è¿™é‡Œç»™å‡ºä½¿ç”¨ Dify å†…ç½®çš„ OTel æ’ä»¶ä¸ŠæŠ¥æ•°æ®çš„ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-34">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Worker ç¯å¢ƒå˜é‡</h4>
<p>OTel æ’ä»¶æ˜¯ Dify å†…ç½®åŠŸèƒ½ï¼Œç›´æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡å³å¯ã€‚æ³¨æ„è¦æ±‚ Dify 1.7.0 ä»¥ä¸Šç‰ˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e3f6587c64405b9a3a4c710f9b37e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=SiojLQfW6wPHik4GYNGkKQHEH6c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-35">æ­¥éª¤äºŒï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹ Worker ç›‘æ§</h4>
<p>è¿›å…¥åº”ç”¨ç›‘æ§/ OpenTelemetry ç›‘æ§é¡µé¢æŸ¥çœ‹ä¸ŠæŠ¥çš„æ•°æ®ã€‚</p>
<p>Worker æ‰§è¡Œçš„åå°ä»»åŠ¡ Trace è¯¦æƒ…ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec32342ce9dc4987ac13f0e10543d630~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=QuiZVT7nWh7SKNV%2FjlpyfAoRMyE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-36">(å¯é€‰) ç›‘æ§å…¥å£ç½‘å…³ Nginx</h3>
<p>Nginx æ˜¯ Dify çš„å…¥å£ç½‘å…³ï¼Œä¸€äº›è¶…æ—¶é—®é¢˜å’ŒçŸ¥è¯†åº“/æ’ä»¶/Workflow çš„æ–‡ä»¶ä¸Šä¼ é—®é¢˜å¯èƒ½å’Œ Nginx é…ç½®æœ‰å…³ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ Opentelemetry æ–¹å¼ä¸ŠæŠ¥å³å¯ï¼Œæ¨èä½¿ç”¨é¢„æ„å»ºçš„ Nginx-OTel é•œåƒæ–¹å¼ã€‚</p>
<h4 data-id="heading-37">æ­¥éª¤ä¸€ï¼šä¸‹è½½é¢„æ„å»º Docker é•œåƒ</h4>
<p>å‰å¾€ Docker å®˜ç½‘ï¼Œæœç´¢å¹¶æ‹‰å–å¸¦æœ‰ -otel åç¼€çš„ Nginx é•œåƒï¼ˆå¦‚ nginx:1.29.0-otelï¼‰ï¼Œé€šè¿‡æ ‡å‡†å®¹å™¨å¯åŠ¨æµç¨‹éƒ¨ç½²æœåŠ¡ã€‚</p>
<h4 data-id="heading-38">æ­¥éª¤äºŒï¼šè·å– gRPC æ¥å…¥ç‚¹å’Œé‰´æƒ Token ä¿¡æ¯</h4>
<p>ç™»å½•å¯è§‚æµ‹é“¾è·¯ OpenTelemetry ç‰ˆæ§åˆ¶å°ï¼Œåœ¨æ¥å…¥ä¸­å¿ƒé€‰å– OpenTelemetry å¡ç‰‡ï¼Œé€‰æ‹© gRPC åè®®ä¸ŠæŠ¥æ•°æ®ã€‚</p>
<p>è®°å½•æ¥å…¥ç‚¹å’Œé‰´æƒ Token å¤‡ç”¨ã€‚</p>
<p>åœ¨å¼€æºæ¡†æ¶åŒºåŸŸå•å‡»ï¼Œåœ¨å¼¹å‡ºçš„ OpenTelemetry é¢æ¿ä¸­é€‰æ‹©æ•°æ®éœ€è¦ä¸ŠæŠ¥çš„åœ°åŸŸã€‚</p>
<h4 data-id="heading-39">æ­¥éª¤ä¸‰ï¼šå¯ç”¨ Nginx OTel æ¨¡å—</h4>
<p>ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ nginx.conf.templateï¼š</p>
<p>Nginx é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">load_module modules/ngx_otel_module.so;Â <span class="hljs-comment"># åŠ è½½ ngx_otel_module</span>
...
http {
Â  Â  ...

Â  Â  otel_exporter {
Â  Â  Â  Â  endpointÂ <span class="hljs-string">"<span class="hljs-variable">${GRPC_ENDPOINT}</span>"</span>;Â <span class="hljs-comment"># å‰ææ¡ä»¶ä¸­è·å–çš„ gRPC æ¥å…¥ç‚¹</span>
Â  Â  Â  Â  header AuthenticationÂ <span class="hljs-string">"<span class="hljs-variable">${GRPC_TOKEN}</span>"</span>;Â <span class="hljs-comment"># å‰ææ¡ä»¶ä¸­è·å–çš„é‰´æƒ Token</span>
Â  Â  }

Â  Â  otel_trace on; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¼€å¯é“¾è·¯è¿½è¸ª</span>
Â  Â  otel_service_nameÂ <span class="hljs-variable">${SERVICE_NAME}</span>; Â <span class="hljs-comment"># åº”ç”¨å</span>
Â  Â  otel_trace_context propagate; Â  Â  Â  Â Â <span class="hljs-comment"># å‘ä¸‹æ¸¸æœåŠ¡æ³¨å…¥Traceä¸Šä¸‹æ–‡</span>
Â  Â  ...
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5227e4b9ca54920a9a9a53844bb74ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Bu5XRQk9cTA6X70IBB4c2SVgdwI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯å‚è€ƒæ–‡æ¡£[6]æ¥å…¥ Nginx ç›‘æ§ã€‚</p>
<h2 data-id="heading-40">å®è·µæŒ‡å—</h2>
<h3 data-id="heading-41">å…³è” LLM Trace å’Œå¾®æœåŠ¡ Trace=</h3>
<p>Dify çš„ Workflow æ‰§è¡Œæ•°æ®é€šè¿‡å®˜æ–¹é›†æˆæ–¹å¼ä¸ŠæŠ¥ Traceï¼Œè€Œ Dify-apiã€Dify-Workerã€Dify-Plugin-Daemon ç­‰åŸºç¡€è®¾æ–½é€šè¿‡æ— ä¾µå…¥æ¢é’ˆæŒ‰ OTel æ ‡å‡†ä¸ŠæŠ¥ Traceã€‚è¿™ä¸¤å¥—å‰²è£‚çš„ä½“ç³»æ— æ³•ç›´æ¥èåˆï¼Œé˜¿é‡Œäº‘æä¾›äº† Trace Link èƒ½åŠ›ï¼Œå°†åº”ç”¨å±‚å’ŒåŸºç¡€è®¾æ–½å±‚çš„ä¸¤æ¡ Trace ä¸²è”ã€‚</p>
<p><strong>ä» LLM Trace è·³è½¬å¾®æœåŠ¡ Traceï¼š</strong></p>
<p>è¿›å…¥ä¸€æ¡ LLM Trace çš„è¯¦æƒ…ï¼Œå¯ä»¥çœ‹åˆ°å®Œæ•´çš„ Workflow æ‰§è¡Œæ•°æ®ï¼Œä½†å¦‚ä½•æ‰¾åˆ°åŸºç¡€è®¾æ–½ç»„ä»¶çš„ span å’Œä¸Šä¸‹æ¸¸ä¸²è”æ•°æ®ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24fafe96a69b49048838f757dfd418e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=jNXWyQ0AcuH5JH2Q%2BdjLK1JaWAg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€‰ä¸­ä¸€ä¸ª spanï¼Œåœ¨ span å³ä¾§çš„é™„åŠ ä¿¡æ¯é¢æ¿é€‰æ‹© Links æ ‡ç­¾é¡µï¼Œå¯ä»¥çœ‹åˆ°å’Œæ­¤ LLM Trace ç›¸å…³è”çš„åŸºç¡€è®¾æ–½ Trace çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d5e80d4adcb42dca86b90a8ea68a61a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=6r%2Bm4DZN45tktcRh2ET4JwWyM%2Bc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»â€œæŸ¥è¯¢å…³è”çš„è°ƒç”¨é“¾â€ï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°å…³è”çš„åŸºç¡€è®¾æ–½ Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/305362d503c8496fb726565b9f31e53c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=%2BZGzsXOkfnHqkbPTcm4Ya%2BmIYA4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä» å¾®æœåŠ¡ Trace è·³è½¬ LLM Traceï¼š</p>
<p>åœ¨åŸºç¡€è®¾æ–½çš„å¾®æœåŠ¡ Trace ä¸Šï¼Œå¯ä»¥çœ‹åˆ° nginxã€dify-apiã€dify-plugin-daemonã€dify-sandbox ç­‰å„ä¸ªç»„ä»¶çš„ Trace æ•°æ®ï¼Œæ˜¯å¦å¯ä»¥å°†å®ƒå…³è”åˆ° Dify å®˜æ–¹é›†æˆçš„ Trace æ•°æ®ä¸Šï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8195d657974f3298a3aff0cd747a97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=gRdQvmhpAG93%2BZ4V285Hp8r2W3I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»è°ƒç”¨é“¾ä¸Šæ–¹çš„ç­›é€‰åŠŸèƒ½ï¼Œç”¨ span åç§°ç­›é€‰ï¼Œæ‰¾åˆ°åç§°ä¸º AdvancedChatAppRunner.run æˆ– WorkflowAppRunner.run çš„ spanã€‚ï¼ˆå–å†³äº Dify Workflow çš„ç±»å‹ï¼Œå¦‚æœè°ƒç”¨äº†å­ Workflow å¯èƒ½ä¼šæœ‰å¤šä¸ªè¿™æ ·çš„ spanï¼‰ã€‚</p>
<p>å¦‚æœå¯¹åº”çš„ Workflow å¼€å¯äº†äº‘ç›‘æ§è¿½è¸ªï¼Œåœ¨ span é™„åŠ ä¿¡æ¯çš„ Links é¡µç­¾å¯ä»¥çœ‹åˆ°å…³è”çš„ LLM Trace Idï¼Œç‚¹å‡»â€œæŸ¥è¯¢å…³è”çš„è°ƒç”¨é“¾â€å¯è·³è½¬åˆ°ç›¸åº” LLM Traceã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/990d1a3ed5c545f68a7fa98197d5aa49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ift9PpxfUZAT232KQs506nz%2Bnp8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-42">åˆ†ææ‰§è¡Œå¼•æ“å¼‚å¸¸æ ¹å› </h3>
<p>å·¥ä½œæµå±‚é¢çš„å¼‚å¸¸é€šå¸¸åœ¨ LLM Trace æˆ– Dify æ—¥å¿—è¿½è¸ªé‡Œå¯ä»¥çœ‹åˆ°ç›´è§‚çš„æŠ¥é”™ä¿¡æ¯ï¼Œä½†è¿˜æœ‰ä¸€ç±»é”™è¯¯æ˜¯åº•å±‚ Dify å¼•æ“çš„é…ç½®ä¸å½“æˆ–å†…éƒ¨ bug å¼•èµ·çš„ã€‚æ— ä¾µå…¥æ¢é’ˆæä¾›äº†å¯¹è¿™ç±»é”™è¯¯çš„å®šä½åˆ†æèƒ½åŠ›ã€‚</p>
<p>å¦‚å›¾çš„ç¤ºä¾‹åœºæ™¯ï¼Œåœ¨ Dify Workflow çš„æŸæ¬¡æ‰§è¡Œä¸­å‘ç°çŸ¥è¯†æ£€ç´¢çš„è¾“å‡ºæ€»æ˜¯ä¸ºç©ºï¼Œä½†æ˜¯ Dify æ§åˆ¶å°ä¸Šåˆæ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/786acfb4f8554128a091f809faaaab86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=h3c3W5FC1scrPu2m9g0ylyfCDCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤æ—¶ï¼Œå¯ä»¥æ ¹æ® Dify å¯¹è¯ IDã€ç”¨æˆ· ID ç­‰ä¿¡æ¯åœ¨äº‘ç›‘æ§ä¸Šå®šä½å¯¹åº”çš„ LLM Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5837c0bfdb804b0ba9e478a2666385a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=5wY53GrBvbzDjPFxn%2FhujFfWIs4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿›å…¥ä¼šè¯è¯¦æƒ…ï¼Œæ‰¾åˆ°å¯¹åº” Trace å’Œç›¸å…³ Spanï¼Œé¦–å…ˆå°è¯•åœ¨ Span è¯¦æƒ…ä¸­æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53f1b598bab8498bad1c3b84e8f897a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Lw1ZkBwcHL3SiYMEpylaOlIglQw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ª Case çš„é—®é¢˜ä¸åœ¨ Wrokflow å±‚é¢ï¼Œæ‰€ä»¥åªèƒ½è§‚å¯Ÿåˆ°è¾“å‡ºå¼‚å¸¸ï¼Œè¦å®šä½å…·ä½“åŸå› ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸€èŠ‚ä»‹ç»çš„ Links åŠŸèƒ½ï¼Œè·³è½¬åˆ°å¯¹åº”çš„ Dify infra å±‚ Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84477c7605d54eb9a70998491736c6f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=FjjOpKOyqqXgq4HbHMHtImrhScs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥è§‚å¯Ÿåˆ° Trace ä¸Šå­˜åœ¨éƒ¨åˆ†é”™è¯¯ Spanï¼Œé€šè¿‡å¿«æ·ç­›é€‰ç›´æ¥å®šä½é”™è¯¯ Spanï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/320193f2edd744a1beb37b19071725dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Lz3FlEESb2EoNHvRTjfnJ22H9Kg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨é”™è¯¯ Span çš„ Details å’Œ Events ä¸­ï¼Œå¯ä»¥çœ‹åˆ°é”™è¯¯ä¿¡æ¯å’Œå¼‚å¸¸å †æ ˆã€‚å¹¶å®šä½åˆ°æ ¹å› æ˜¯ Weaviate å‘é‡å­˜å‚¨é…ç½®å¼•èµ·çš„é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a58664826c8b4ad4acc96f2ecc2feff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=IhAli%2FHfPX46Qt3osBWPzoboM3w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-43">å®šä½æ’ä»¶æ…¢è°ƒç”¨</h3>
<p>Dify ç¤¾åŒºæä¾›äº†ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œä½†ç®¡ç†æ’ä»¶çš„ Dify-Plugin-Daemon å’Œæ’ä»¶è¿è¡Œæ—¶å´æ˜¯éš¾ä»¥å®šä½æ•…éšœçš„é»‘ç›’ã€‚åœ¨ Dify æ§åˆ¶å°ä¸Šèƒ½æ¸…æ™°åœ°çœ‹åˆ°å„ä¸ªå·¥ä½œæµèŠ‚ç‚¹çš„è¿è¡Œè®°å½•ï¼Œä½†å¯¹äºæµç¨‹èŠ‚ç‚¹ä¹‹ä¸‹ Dify infra è®¾æ–½çš„æ•…éšœå´æ— ä»åˆ†æã€‚ä¸€æ¬¡ Workflow è°ƒç”¨é“¾è·¯æ¶‰åŠ Nginxã€APIã€Plugin-Daemonã€Plugin è¿è¡Œæ—¶å’Œæ¨¡å‹ç½‘å…³ç­‰å¤šä¸ªç»„ä»¶ï¼Œé˜¿é‡Œäº‘äº‘ç›‘æ§æä¾›çš„å…¨é“¾è·¯è¿½è¸ªèƒ½åŠ›å¯ä»¥ä¸²è”ä¸Šä¸‹æ¸¸çš„å®Œæ•´é“¾è·¯ï¼Œå®šä½æ’ä»¶å†…çš„é”™æ…¢å¼‚å¸¸ã€‚</p>
<p>å¦‚å›¾ç¤ºä¾‹ä¸­â€œæŸ¥è¯¢ SLS æ—¥å¿—â€æ˜¯ä¸€ä¸ª Dify æ’ä»¶ï¼Œæ­£å¸¸è°ƒç”¨åªéœ€ 200 msï¼Œä½†åœ¨è¿™ä¸ª Trace ä¸­å´æœ‰ 5s å¤šçš„æ…¢è°ƒç”¨ã€‚ä»…çœ‹ LLM Trace æˆ– Dify æ‰§è¡Œæ—¥å¿—ï¼Œæ— æ³•åˆ¤æ–­æ…¢è¯·æ±‚æ˜¯å› ä¸º Dify-Api å¼•æ“ã€Dify-Plugin-Daemon æ’ä»¶å¼•æ“ã€Dify-Plugin è¿è¡Œæ—¶æˆ–è€… SLS æ—¥å¿—æœåŠ¡æœ¬èº«å¯¼è‡´çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/870192cf24ea4ab8a18159450602d410~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=HZiPR7WdfcJ7OZY7C99aiDiNC3o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡ Links æ‰¾åˆ°å…³è”çš„ Infra å±‚è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ° Trace è¯¦æƒ…ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08ea1a24080041efbb9aec94f0cf7d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=1nuEpsJiHfJ7s8%2BLmskoX3PO2Cc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Dify å¼•æ“ä¼šåšå¤§é‡ DB å’Œ Redis è®¿é—®ï¼Œæ’æŸ¥é DB/Redis ç±»é—®é¢˜æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾å¤„ç‚¹é€‰å¹¶æ»¤å» sqlalchemy å’Œ redis ç»„ä»¶çš„ Span ä»¥ä¾¿æ’æŸ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e4d0b5cb3e743c29c6979fe32545e53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3iKdzKHNuo%2BPwycjp9FaXN%2FyUyg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ° dify æ‰§è¡Œå¼•æ“ï¼ˆlocal-dify-apiï¼‰å‘èµ·äº†å¯¹ dify æ’ä»¶å¼•æ“ï¼ˆlocal-dify-plugin-daemonï¼‰çš„ POST è°ƒç”¨ï¼Œæ’ä»¶å¼•æ“è°ƒç”¨æ’ä»¶è¿è¡Œæ—¶ï¼ˆlocal-dify-plugin-daemon_plugin_cms_0.0.1ï¼‰å¹¶è½¬å‘è¯·æ±‚ç»™ SLS æœåŠ¡ç«¯å£ã€‚æ•´ä¸ªé“¾è·¯ä¸Šè€—æ—¶æœ€é•¿çš„æ˜¯ dify_plugin_executeï¼Œè¿™æ˜¯æ’ä»¶è¿è¡Œæ—¶å†…éƒ¨çš„å…¥å£æ–¹æ³•ï¼Œæˆ‘ä»¬æ­£æ˜¯åœ¨æ­¤å¤„æ³¨å…¥äº†æ•…éšœæ¨¡æ‹Ÿçš„æ…¢è°ƒç”¨ã€‚</p>
<p>æ¬¢è¿å¤§å®¶åŠ å…¥æˆ‘ä»¬çš„é’‰é’‰ç¾¤ï¼Œå…±åŒæ„å»ºæ›´å¥½çš„ Dify å…¨é“¾è·¯ç›‘æ§èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p>LoongSuite Python å¼€æºäº¤æµç¾¤ï¼š101925034286</p>
</li>
<li>
<p>LoongSuite Go Agent å¼€æºäº¤æµç¾¤ï¼š102565007776</p>
</li>
<li>
<p>ARMS å¤šè¯­è¨€åº”ç”¨ç›‘æ§äº§å“äº¤æµç¾¤ï¼š159215000379</p>
</li>
</ul>
<p><strong>å‚è€ƒï¼š</strong></p>
<p>[1] è·å– LicenseKey</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Fapi-arms-2019-08-08-describetracelicensekey-apps" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/api-arms-2019-08-08-describetracelicensekey-apps" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p>[2] ARMS åº”ç”¨ç›‘æ§æ”¯æŒçš„ Go ç»„ä»¶å’Œæ¡†æ¶</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Fgo-components-and-frameworks-supported-by-arms-application-monitoring" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/go-components-and-frameworks-supported-by-arms-application-monitoring" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p>[3] Dify å®˜æ–¹ç›‘æ§æ¥å…¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Ftracing-analysis%2Funtitled-document-1750672984680" target="_blank" title="https://help.aliyun.com/zh/arms/tracing-analysis/untitled-document-1750672984680" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/traâ€¦</a></p>
<p>[4]Â é›†æˆé˜¿é‡Œäº‘äº‘ç›‘æ§</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.dify.ai%2Fzh-hans%2Fguides%2Fmonitoring%2Fintegrate-external-ops-tools%2Fintegrate-aliyun" target="_blank" title="https://docs.dify.ai/zh-hans/guides/monitoring/integrate-external-ops-tools/integrate-aliyun" ref="nofollow noopener noreferrer">docs.dify.ai/zh-hans/guiâ€¦</a></p>
<p>[5] Dify Python æ¢é’ˆæ¥å…¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fcms%2Fcloudmonitor-2-0%2Fuser-guide%2Fmonitor-dify-applications" target="_blank" title="https://help.aliyun.com/zh/cms/cloudmonitor-2-0/user-guide/monitor-dify-applications" ref="nofollow noopener noreferrer">help.aliyun.com/zh/cms/clouâ€¦</a></p>
<p>[6]Â ä½¿ç”¨ OpenTelemetry å¯¹ Nginx è¿›è¡Œé“¾è·¯è¿½è¸ª</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fopentelemetry%2Fuser-guide%2Fuse-opentelemetry-to-perform-tracing-analysis-on-nginx" target="_blank" title="https://help.aliyun.com/zh/opentelemetry/user-guide/use-opentelemetry-to-perform-tracing-analysis-on-nginx" ref="nofollow noopener noreferrer">help.aliyun.com/zh/openteleâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾]]></title>    <link>https://juejin.cn/post/7576843726011301914</link>    <guid>https://juejin.cn/post/7576843726011301914</guid>    <pubDate>2025-11-26T10:01:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011301914" data-draft-id="7576838095519105075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-26T10:01:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:01:52.000Z" title="Wed Nov 26 2025 10:01:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾</h2>
<p>æ”¯ä»˜åœºæ™¯ä¸­ï¼Œâ€œé‡å¤æ”¯ä»˜â€ æ˜¯æœ€è‡´å‘½çš„é—®é¢˜ä¹‹ä¸€ â€”â€” ç”¨æˆ·ç‚¹å‡»ä¸¤æ¬¡æ”¯ä»˜æŒ‰é’®ã€ç½‘ç»œå»¶è¿Ÿå¯¼è‡´ç³»ç»Ÿé‡è¯•ã€ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥ï¼Œéƒ½å¯èƒ½å¯¼è‡´ â€œä¸€ç¬”è®¢å•æ‰£ä¸¤æ¬¡æ¬¾â€ã€‚ä¸€æ—¦å‘ç”Ÿï¼Œä¸ä»…ä¼šå¼•å‘ç”¨æˆ·æŠ•è¯‰ï¼Œè¿˜å¯èƒ½é€ æˆèµ„é‡‘æŸå¤±ä¸åˆè§„é£é™©ã€‚è€Œè§£å†³è¿™ä¸€é—®é¢˜çš„æ ¸å¿ƒï¼Œå°±æ˜¯<strong>ä¿è¯æ”¯ä»˜è¯·æ±‚çš„å¹‚ç­‰æ€§</strong>ã€‚</p>
<p>æœ¬æ–‡ç»“åˆç”µå•†ã€é‡‘èæ”¯ä»˜çš„å®æˆ˜ç»éªŒï¼Œä» â€œä¸ºä»€ä¹ˆéœ€è¦å¹‚ç­‰æ€§â€â€œé‡å¤è¯·æ±‚çš„æ¥æºâ€â€œå…·ä½“å®ç°æ–¹æ¡ˆâ€ åˆ° â€œè½åœ°é¿å‘â€ï¼Œå®Œæ•´æ‹†è§£æ”¯ä»˜å¹‚ç­‰æ€§çš„è®¾è®¡é€»è¾‘ï¼Œæä¾›å¯ç›´æ¥å¤ç”¨çš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šæ”¯ä»˜åœºæ™¯çš„å¹‚ç­‰æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-2">1. å¹‚ç­‰æ€§çš„å®šä¹‰</h4>
<p>åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå¹‚ç­‰æ€§æ˜¯æŒ‡ï¼š<strong>åŒä¸€æ“ä½œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæœ€ç»ˆç»“æœéƒ½æ˜¯ä¸€è‡´çš„</strong>ã€‚</p>
<p>å¯¹äºæ”¯ä»˜è¯·æ±‚ï¼Œå¹‚ç­‰æ€§çš„æ ¸å¿ƒè¦æ±‚æ˜¯ï¼š</p>
<ul>
<li>åŒä¸€ç¬”è®¢å•ï¼Œæ— è®ºç”¨æˆ·å‘èµ·å¤šå°‘æ¬¡æ”¯ä»˜è¯·æ±‚ï¼Œéƒ½åªæ‰£ä¸€æ¬¡æ¬¾ï¼›</li>
</ul>

<ul>
<li>åŒä¸€ç¬”æ”¯ä»˜å›è°ƒï¼Œæ— è®ºç¬¬ä¸‰æ–¹ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ï¼‰é‡å¤é€šçŸ¥å¤šå°‘æ¬¡ï¼Œéƒ½åªæ›´æ–°ä¸€æ¬¡è®¢å•çŠ¶æ€ï¼›</li>
</ul>

<ul>
<li>é‡å¤æ“ä½œä¸ä¼šäº§ç”Ÿé¢å¤–çš„ä¸šåŠ¡å½±å“ï¼ˆå¦‚é‡å¤ç”Ÿæˆæ”¯ä»˜è®°å½•ã€é‡å¤å‘é€æ‰£æ¬¾çŸ­ä¿¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3">2. ä¸ºä»€ä¹ˆæ”¯ä»˜åœºæ™¯å¿…é¡»ä¿è¯å¹‚ç­‰æ€§ï¼Ÿ</h4>
<p>æ”¯ä»˜çš„æ ¸å¿ƒæ˜¯ â€œèµ„é‡‘å®‰å…¨â€ï¼Œå¹‚ç­‰æ€§æ˜¯èµ„é‡‘å®‰å…¨çš„åº•çº¿ï¼š</p>
<ul>
<li>è‹¥ä¸ä¿è¯å¹‚ç­‰æ€§ï¼šç”¨æˆ·å› ç½‘ç»œå¡é¡¿é‡å¤ç‚¹å‡»æ”¯ä»˜ï¼Œå¯èƒ½å¯¼è‡´ â€œä¸€ç¬”è®¢å•æ‰£ä¸¤æ¬¡æ¬¾â€ï¼ˆèµ„æŸé£é™©ï¼‰ï¼›</li>
</ul>

<ul>
<li>è‹¥ä¸ä¿è¯å¹‚ç­‰æ€§ï¼šç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥ï¼Œå¯èƒ½å¯¼è‡´ â€œè®¢å•å·²æ”¯ä»˜ä½†é‡å¤å›è°ƒæ›´æ–°çŠ¶æ€â€ï¼ˆä¸šåŠ¡æ··ä¹±ï¼‰ï¼›</li>
</ul>

<ul>
<li>åˆè§„è¦æ±‚ï¼šé‡‘èæ”¯ä»˜åœºæ™¯éœ€æ»¡è¶³ â€œä¸€ç¬”äº¤æ˜“ä¸€æ¬¡æ¸…ç®—â€ï¼Œå¹‚ç­‰æ€§æ˜¯åˆè§„çš„åŸºç¡€ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€æ”¯ä»˜è¯·æ±‚é‡å¤çš„ 4 ä¸ªå¸¸è§åœºæ™¯</h3>
<p>åœ¨è®¾è®¡æ–¹æ¡ˆå‰ï¼Œå…ˆæ˜ç¡® â€œé‡å¤è¯·æ±‚ä»å“ªæ¥â€ï¼Œæ‰èƒ½é’ˆå¯¹æ€§è§£å†³ï¼š</p>






























<table><thead><tr><th>é‡å¤åœºæ™¯</th><th>å…·ä½“æè¿°</th><th>å…¸å‹æ¡ˆä¾‹</th></tr></thead><tbody><tr><td>ç”¨æˆ·é‡å¤æ“ä½œ</td><td>ç”¨æˆ·ç‚¹å‡»æ”¯ä»˜æŒ‰é’®åï¼Œå› é¡µé¢æ— å“åº”å†æ¬¡ç‚¹å‡»ï¼ˆæˆ–è¿ç»­ç‚¹å‡»ï¼‰</td><td>ç”µå•†ä¸‹å•åï¼Œç”¨æˆ·å¿«é€Ÿç‚¹å‡» â€œå¾®ä¿¡æ”¯ä»˜â€ æŒ‰é’® 3 æ¬¡</td></tr><tr><td>ç½‘ç»œå»¶è¿Ÿ / è¶…æ—¶é‡è¯•</td><td>æ”¯ä»˜è¯·æ±‚å‘é€åï¼Œå› ç½‘ç»œå»¶è¿Ÿæœªæ”¶åˆ°å“åº”ï¼Œå®¢æˆ·ç«¯ / æœåŠ¡ç«¯è§¦å‘é‡è¯•</td><td>ç§»åŠ¨ç«¯æ”¯ä»˜è¯·æ±‚è¶…æ—¶ï¼ŒAPP è‡ªåŠ¨é‡è¯• 2 æ¬¡</td></tr><tr><td>ç³»ç»Ÿæ•…éšœé‡å‘</td><td>æœåŠ¡ç«¯å¤„ç†æ”¯ä»˜æ—¶å®•æœºï¼Œé‡å¯åé‡æ–°æ¥æ”¶æœªå®Œæˆçš„è¯·æ±‚</td><td>æ”¯ä»˜æœåŠ¡å¤„ç†ä¸­æ•°æ®åº“å®•æœºï¼Œæ¢å¤åé‡æ”¾è¯·æ±‚</td></tr><tr><td>ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥</td><td>å¾®ä¿¡æ”¯ä»˜ / æ”¯ä»˜å®çš„æ”¯ä»˜ç»“æœå›è°ƒï¼Œå› ç½‘ç»œæ³¢åŠ¨é‡å¤å‘é€</td><td>æ”¯ä»˜å®å›è°ƒé€šçŸ¥è¶…æ—¶ï¼Œé‡å¤å‘é€ 3 æ¬¡æ”¯ä»˜æˆåŠŸé€šçŸ¥</td></tr></tbody></table>
<p><strong>å…³é”®ç»“è®º</strong>ï¼šé‡å¤è¯·æ±‚æ— æ³•é¿å…ï¼ˆç”¨æˆ·æ“ä½œã€ç½‘ç»œã€ç³»ç»Ÿéƒ½å¯èƒ½å¯¼è‡´ï¼‰ï¼Œå¿…é¡»é€šè¿‡æŠ€æœ¯æ‰‹æ®µè®©é‡å¤è¯·æ±‚ â€œæ— å®³â€ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒæ–¹æ¡ˆï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„ 5 ç§å®ç°æ–¹å¼ï¼ˆæŒ‰æ˜“è½åœ°æ’åºï¼‰</h3>
<p>æ”¯ä»˜å¹‚ç­‰æ€§çš„å®ç°æ ¸å¿ƒæ˜¯ â€œ<strong>å”¯ä¸€æ ‡è¯† + çŠ¶æ€æ ¡éªŒ</strong>â€â€”â€” ç”¨å”¯ä¸€æ ‡è¯†åŒºåˆ†è¯·æ±‚ï¼Œç”¨çŠ¶æ€æ ¡éªŒåˆ¤æ–­æ˜¯å¦å…è®¸æ‰§è¡Œï¼Œä»¥ä¸‹æ˜¯ 5 ç§ä¸»æµæ–¹æ¡ˆï¼Œè¦†ç›–ä¸åŒåœºæ™¯ï¼š</p>
<h4 data-id="heading-6">æ–¹æ¡ˆ 1ï¼šå”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰å·ï¼‰â€”â€” æœ€åŸºç¡€ã€æœ€å¸¸ç”¨</h4>
<h5 data-id="heading-7">åŸç†</h5>
<p>ç”¨<strong>å…¨å±€å”¯ä¸€çš„è®¢å•å·</strong>ä½œä¸ºå¹‚ç­‰æ ‡è¯†ï¼Œæ”¯ä»˜è¯·æ±‚å¿…é¡»æºå¸¦è¯¥è®¢å•å·ï¼ŒæœåŠ¡ç«¯é€šè¿‡è®¢å•å·åˆ¤æ–­æ˜¯å¦å·²å¤„ç†ï¼š</p>
<ol>
<li>ä¸‹å•æ—¶ç”Ÿæˆå”¯ä¸€è®¢å•å·ï¼ˆå¦‚ORDER202511210001ï¼‰ï¼Œå…³è”ç”¨æˆ·ã€é‡‘é¢ç­‰æ ¸å¿ƒä¿¡æ¯ï¼›</li>
</ol>

<ol start="2">
<li>ç”¨æˆ·æ”¯ä»˜æ—¶ï¼Œè¯·æ±‚æºå¸¦è¯¥è®¢å•å·ï¼›</li>
</ol>

<ol start="3">
<li>æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚åï¼Œå…ˆæŸ¥è¯¢ â€œè¯¥è®¢å•å·æ˜¯å¦å·²æ”¯ä»˜ / å¤„ç†ä¸­â€ï¼›</li>
</ol>

<ol start="4">
<li>è‹¥å·²å¤„ç†ï¼šç›´æ¥è¿”å›æˆåŠŸç»“æœï¼›è‹¥æœªå¤„ç†ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼›è‹¥å¤„ç†ä¸­ï¼šè¿”å› â€œå¤„ç†ä¸­â€ï¼ˆé¿å…å¹¶å‘é‡å¤ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-8">å®ç°æ­¥éª¤ï¼ˆJava+MySQLï¼‰</h5>
<ol>
<li><strong>è®¢å•è¡¨è®¾è®¡</strong>ï¼ˆæ ¸å¿ƒå­—æ®µï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_order` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰æ ‡è¯†ï¼‰'</span>,
  `user_id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `amount` <span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ”¯ä»˜é‡‘é¢'</span>,
  `status` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ”¯ä»˜çŠ¶æ€ï¼š0=å¾…æ”¯ä»˜ï¼Œ1=æ”¯ä»˜ä¸­ï¼Œ2=å·²æ”¯ä»˜ï¼Œ3=æ”¯ä»˜å¤±è´¥'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_order_no` (`order_no`) COMMENT <span class="hljs-string">'è®¢å•å·å”¯ä¸€ç´¢å¼•ï¼ˆç¡®ä¿å¹‚ç­‰ï¼‰'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜è®¢å•è¡¨'</span>;
</code></pre>
<ul>
<li>å…³é”®ï¼šorder_noåŠ å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤åˆ›å»ºè®¢å•ï¼›statuså­—æ®µç”¨äºçŠ¶æ€æ ¡éªŒã€‚</li>
</ul>
<ol start="2">
<li><strong>æœåŠ¡ç«¯æ”¯ä»˜æ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentOrderMapper orderMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PayGatewayClient payGateway; <span class="hljs-comment">// è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ç½‘å…³ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ï¼‰</span>
    
    <span class="hljs-comment">/**
     * æ”¯ä»˜æ¥å£ï¼ˆä¿è¯å¹‚ç­‰æ€§ï¼‰
     * <span class="hljs-doctag">@param</span> orderNo å”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰æ ‡è¯†ï¼‰
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> amount æ”¯ä»˜é‡‘é¢
     * <span class="hljs-doctag">@return</span> æ”¯ä»˜ç»“æœ
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO pay(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šæŸ¥è¯¢è®¢å•ï¼ˆé€šè¿‡å”¯ä¸€è®¢å•å·ï¼‰</span>
        PaymentOrder order = orderMapper.selectByOrderNo(orderNo);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šå·²å¤„ç†è¿‡ï¼Œç›´æ¥è¿”å›ç»“æœ</span>
            <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">2</span>) { <span class="hljs-comment">// å·²æ”¯ä»˜</span>
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">1</span>) { <span class="hljs-comment">// æ”¯ä»˜ä¸­</span>
                <span class="hljs-keyword">return</span> PaymentResultDTO.processing(<span class="hljs-string">"æ”¯ä»˜å¤„ç†ä¸­ï¼Œè¯·ç¨åæŸ¥è¯¢"</span>, orderNo);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">3</span>) { <span class="hljs-comment">// æ”¯ä»˜å¤±è´¥ï¼Œå…è®¸é‡è¯•</span>
                <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
            }
        }
        <span class="hljs-comment">// æ­¥éª¤3ï¼šæœªå¤„ç†ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘</span>
        <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
    }
    
    <span class="hljs-comment">/**
     * æ ¸å¿ƒæ”¯ä»˜é€»è¾‘ï¼ˆæŠ½ç¦»å¤ç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> PaymentResultDTO processPayment(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šåˆ›å»ºè®¢å•ï¼ˆå”¯ä¸€ç´¢å¼•ä¿è¯ä¸ä¼šé‡å¤åˆ›å»ºï¼‰</span>
        PaymentOrder newOrder = new PaymentOrder();
        newOrder.setOrderNo(orderNo);
        newOrder.setUserId(userId);
        newOrder.setAmount(amount);
        newOrder.setStatus(<span class="hljs-number">1</span>); <span class="hljs-comment">// çŠ¶æ€è®¾ä¸ºâ€œæ”¯ä»˜ä¸­â€ï¼ˆé˜²æ­¢å¹¶å‘é‡å¤ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            orderMapper.insert(newOrder);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// å¹¶å‘åœºæ™¯ä¸‹ï¼Œå…¶ä»–çº¿ç¨‹å·²åˆ›å»ºè®¢å•ï¼Œç›´æ¥æŸ¥è¯¢è¿”å›</span>
            <span class="hljs-keyword">return</span> pay(orderNo, userId, amount);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šè°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ç½‘å…³ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•æ¥å£ï¼‰</span>
            PayGatewayResponse gatewayResp = payGateway.unifiedOrder(orderNo, amount);
            <span class="hljs-keyword">if</span> (gatewayResp.isSuccess()) {
                <span class="hljs-comment">// æ­¥éª¤3ï¼šæ”¯ä»˜æˆåŠŸï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œå·²æ”¯ä»˜â€</span>
                orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">2</span>);
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ­¥éª¤4ï¼šæ”¯ä»˜å¤±è´¥ï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œæ”¯ä»˜å¤±è´¥â€</span>
                orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">3</span>);
                <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¤±è´¥ï¼š"</span> + gatewayResp.getMsg(), orderNo);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ­¥éª¤5ï¼šå¼‚å¸¸æƒ…å†µï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œæ”¯ä»˜å¤±è´¥â€</span>
            orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">3</span>);
            log.error(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}"</span>, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-9">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå•ä½“åº”ç”¨ã€è®¢å•é©±åŠ¨çš„æ”¯ä»˜ï¼ˆå¦‚ç”µå•†è®¢å•æ”¯ä»˜ï¼‰ã€åŒæ­¥æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œæ— é¢å¤–ä¾èµ–ï¼ˆä»…ç”¨è®¢å•è¡¨ï¼‰ï¼Œå…¼å®¹æ€§å¼ºï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¾èµ–è®¢å•å·çš„å”¯ä¸€æ€§ï¼Œè‹¥è®¢å•å·ç”Ÿæˆè§„åˆ™æ³„éœ²å¯èƒ½è¢«æ¶æ„åˆ©ç”¨ï¼ˆéœ€é…åˆç­¾åéªŒè¯ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">æ–¹æ¡ˆ 2ï¼šä»¤ç‰Œæœºåˆ¶ï¼ˆTokenï¼‰â€”â€” é€‚åˆå‰ç«¯é‡å¤æäº¤</h4>
<h5 data-id="heading-11">åŸç†</h5>
<p>é’ˆå¯¹ â€œç”¨æˆ·é‡å¤ç‚¹å‡»â€ åœºæ™¯ï¼Œé€šè¿‡ â€œé¢„ç”Ÿæˆä»¤ç‰Œâ€ æ§åˆ¶æ”¯ä»˜è¯·æ±‚çš„å”¯ä¸€æ€§ï¼š</p>
<ol>
<li>å‰ç«¯å‘èµ·æ”¯ä»˜å‰ï¼Œå…ˆè°ƒç”¨ â€œè·å–æ”¯ä»˜ä»¤ç‰Œâ€ æ¥å£ï¼ŒæœåŠ¡ç«¯ç”Ÿæˆå”¯ä¸€ Tokenï¼ˆå¦‚TOKEN_123456ï¼‰ï¼Œå­˜å…¥ Redisï¼ˆè®¾ç½® 15 åˆ†é’Ÿè¿‡æœŸï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>å‰ç«¯æºå¸¦è¯¥ Token å‘èµ·æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ol>

<ol start="3">
<li>æœåŠ¡ç«¯æ ¡éªŒ Tokenï¼šè‹¥ Token ä¸å­˜åœ¨ï¼ˆå·²ä½¿ç”¨ / è¿‡æœŸï¼‰ï¼Œæ‹’ç»è¯·æ±‚ï¼›è‹¥å­˜åœ¨ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘å¹¶åˆ é™¤ Tokenï¼ˆæˆ–æ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-12">å®ç°æ­¥éª¤ï¼ˆJava+Redisï¼‰</h5>
<ol>
<li><strong>è·å–ä»¤ç‰Œæ¥å£</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(<span class="hljs-string">"/api/pay"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;
    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> String TOKEN_PREFIX = <span class="hljs-string">"pay:token:"</span>;
    
    <span class="hljs-comment">/**
     * è·å–æ”¯ä»˜ä»¤ç‰Œï¼ˆå‰ç«¯æ”¯ä»˜å‰è°ƒç”¨ï¼‰
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> å”¯ä¸€Token
     */</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/get-token"</span>)</span>
    <span class="hljs-keyword">public</span> ResultDTO getPayToken(<span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€Tokenï¼ˆUUID+ç”¨æˆ·IDï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼‰</span>
        String token = <span class="hljs-string">"TOKEN_"</span> + UUID.randomUUID().toString().replace(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>) + <span class="hljs-string">"_"</span> + userId;
        <span class="hljs-comment">// å­˜å…¥Redisï¼Œè¿‡æœŸæ—¶é—´15åˆ†é’Ÿï¼ˆé¿å…Tokené•¿æœŸæœ‰æ•ˆï¼‰</span>
        redisTemplate.opsForValue().<span class="hljs-keyword">set</span>(TOKEN_PREFIX + token, userId.toString(), <span class="hljs-number">15</span>, TimeUnit.MINUTES);
        <span class="hljs-keyword">return</span> ResultDTO.success(token);
    }
}
</code></pre>
<ol start="2">
<li><strong>æ”¯ä»˜æ¥å£ï¼ˆç»“åˆ Token æ ¡éªŒï¼‰</strong> ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOKEN_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"pay:token:"</span>;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO <span class="hljs-title function_">payWithToken</span><span class="hljs-params">(String token, String orderNo, Long userId, BigDecimal amount)</span> {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šTokenæ ¡éªŒï¼ˆæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> TOKEN_PREFIX + token;
        <span class="hljs-type">String</span> <span class="hljs-variable">redisUserId</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(redisKey);
        <span class="hljs-keyword">if</span> (redisUserId == <span class="hljs-literal">null</span> || !redisUserId.equals(userId.toString())) {
            <span class="hljs-comment">// Tokenä¸å­˜åœ¨/å·²ä½¿ç”¨/ç”¨æˆ·ä¸åŒ¹é…ï¼Œæ‹’ç»è¯·æ±‚</span>
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ— æ•ˆçš„æ”¯ä»˜è¯·æ±‚ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"</span>, orderNo);
        }
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šè®¢å•æ ¡éªŒï¼ˆåŒæ–¹æ¡ˆ1ï¼ŒåŒé‡ä¿éšœï¼‰</span>
        <span class="hljs-type">PaymentOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectByOrderNo(orderNo);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span> &amp;&amp; order.getStatus() == <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ­¥éª¤3ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
            <span class="hljs-type">PaymentResultDTO</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> processPayment(orderNo, userId, amount);
            
            <span class="hljs-comment">// æ­¥éª¤4ï¼šæ”¯ä»˜å®Œæˆåï¼Œåˆ é™¤Tokenï¼ˆæ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼‰</span>
            redisTemplate.delete(redisKey);
            
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¼‚å¸¸æ—¶ä¸åˆ é™¤Tokenï¼Œå…è®¸é‡è¯•ï¼ˆé¿å…å› ç³»ç»Ÿå¼‚å¸¸å¯¼è‡´æ— æ³•æ”¯ä»˜ï¼‰</span>
            log.error(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼ŒTokenï¼š{}ï¼Œè®¢å•å·ï¼š{}"</span>, token, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-13">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå‰ç«¯é‡å¤æäº¤ï¼ˆå¦‚æŒ‰é’®è¿ç»­ç‚¹å‡»ï¼‰ã€ç§»åŠ¨ç«¯æ”¯ä»˜ã€éœ€è¦é˜²æ­¢æ¶æ„è¯·æ±‚çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šToken ä¸€æ¬¡æ€§æœ‰æ•ˆï¼Œå®‰å…¨æ€§é«˜ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢æ—  Token çš„æ¶æ„æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¤šä¸€æ­¥ â€œè·å– Tokenâ€ æ¥å£è°ƒç”¨ï¼Œå¢åŠ å‰ç«¯å¼€å‘æˆæœ¬ï¼›ä¾èµ– Redisï¼ˆåˆ†å¸ƒå¼åœºæ™¯éœ€ Redis é›†ç¾¤ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">æ–¹æ¡ˆ 3ï¼šæ”¯ä»˜çŠ¶æ€æœºæ ¡éªŒ â€”â€” é˜²æ­¢çŠ¶æ€å›é€€</h4>
<h5 data-id="heading-15">åŸç†</h5>
<p>æ”¯ä»˜è®¢å•çš„çŠ¶æ€å˜æ›´éµå¾ªå›ºå®šæµç¨‹ï¼ˆå¦‚ â€œå¾…æ”¯ä»˜â†’æ”¯ä»˜ä¸­â†’å·²æ”¯ä»˜â€ï¼‰ï¼Œé€šè¿‡çŠ¶æ€æœºé™åˆ¶ â€œä¸å…è®¸çš„çŠ¶æ€å˜æ›´â€ï¼Œé¿å…é‡å¤å¤„ç†ï¼š</p>
<ul>
<li>çŠ¶æ€æµè½¬è§„åˆ™ï¼š0=å¾…æ”¯ä»˜ â†’ 1=æ”¯ä»˜ä¸­ â†’ 2=å·²æ”¯ä»˜ æˆ– 3=æ”¯ä»˜å¤±è´¥ï¼›</li>
</ul>

<ul>
<li>å¹‚ç­‰é€»è¾‘ï¼šè‹¥å½“å‰çŠ¶æ€æ˜¯ â€œå·²æ”¯ä»˜â€ æˆ– â€œæ”¯ä»˜ä¸­â€ï¼Œæ‹’ç»é‡å¤æ”¯ä»˜è¯·æ±‚ï¼›åªæœ‰ â€œå¾…æ”¯ä»˜â€ æˆ– â€œæ”¯ä»˜å¤±è´¥â€ çŠ¶æ€å…è®¸æ‰§è¡Œæ”¯ä»˜ã€‚</li>
</ul>
<h5 data-id="heading-16">å®ç°ç¤ºä¾‹ï¼ˆçŠ¶æ€æœºæ ¡éªŒï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ”¯ä»˜çŠ¶æ€æœºæ ¡éªŒï¼ˆå·¥å…·ç±»ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStateMachine</span> {
    <span class="hljs-comment">// çŠ¶æ€æµè½¬è§„åˆ™ï¼škey=å½“å‰çŠ¶æ€ï¼Œvalue=å…è®¸æµè½¬çš„ç›®æ ‡çŠ¶æ€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;Integer, List&lt;Integer&gt;&gt; STATE_RULES = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// å¾…æ”¯ä»˜ï¼ˆ0ï¼‰å¯æµè½¬åˆ°ï¼šæ”¯ä»˜ä¸­ï¼ˆ1ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">0</span>, Collections.singletonList(<span class="hljs-number">1</span>));
        <span class="hljs-comment">// æ”¯ä»˜ä¸­ï¼ˆ1ï¼‰å¯æµè½¬åˆ°ï¼šå·²æ”¯ä»˜ï¼ˆ2ï¼‰ã€æ”¯ä»˜å¤±è´¥ï¼ˆ3ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">1</span>, Arrays.asList(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));
        <span class="hljs-comment">// æ”¯ä»˜å¤±è´¥ï¼ˆ3ï¼‰å¯æµè½¬åˆ°ï¼šæ”¯ä»˜ä¸­ï¼ˆ1ï¼‰ï¼ˆå…è®¸é‡è¯•ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">3</span>, Collections.singletonList(<span class="hljs-number">1</span>));
        <span class="hljs-comment">// å·²æ”¯ä»˜ï¼ˆ2ï¼‰ä¸å¯æµè½¬åˆ°ä»»ä½•çŠ¶æ€ï¼ˆä¸å…è®¸é‡å¤æ”¯ä»˜ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">2</span>, Collections.emptyList());
    }
    
    <span class="hljs-comment">/**
     * æ ¡éªŒçŠ¶æ€æ˜¯å¦å…è®¸æµè½¬
     * <span class="hljs-doctag">@param</span> currentState å½“å‰çŠ¶æ€
     * <span class="hljs-doctag">@param</span> targetState ç›®æ ‡çŠ¶æ€
     * <span class="hljs-doctag">@return</span> true=å…è®¸ï¼Œfalse=ä¸å…è®¸
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkStateTransition</span><span class="hljs-params">(<span class="hljs-type">int</span> currentState, <span class="hljs-type">int</span> targetState)</span> {
        List&lt;Integer&gt; allowedStates = STATE_RULES.getOrDefault(currentState, Collections.emptyList());
        <span class="hljs-keyword">return</span> allowedStates.contains(targetState);
    }
}
<span class="hljs-comment">// æ”¯ä»˜æ¥å£ä¸­ä½¿ç”¨çŠ¶æ€æœºæ ¡éªŒ</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> PaymentResultDTO <span class="hljs-title function_">payWithStateMachine</span><span class="hljs-params">(String orderNo, Long userId, BigDecimal amount)</span> {
    <span class="hljs-type">PaymentOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectByOrderNo(orderNo);
    <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// çŠ¶æ€æœºæ ¡éªŒï¼šè‹¥å½“å‰çŠ¶æ€ä¸å…è®¸æµè½¬åˆ°â€œæ”¯ä»˜ä¸­â€ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (!PaymentStateMachine.checkStateTransition(order.getStatus(), <span class="hljs-number">1</span>)) {
            <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">2</span>) {
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"å½“å‰è®¢å•çŠ¶æ€ä¸å…è®¸æ”¯ä»˜"</span>, orderNo);
            }
        }
    }
    <span class="hljs-comment">// åç»­æ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
    <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
}
</code></pre>
<h5 data-id="heading-17">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚æ”¯ä»˜æµç¨‹ï¼ˆå¦‚åˆ†æœŸæ”¯ä»˜ã€é¢„æˆæƒæ”¯ä»˜ï¼‰ã€éœ€è¦ä¸¥æ ¼æ§åˆ¶çŠ¶æ€æµè½¬çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šçŠ¶æ€æ ¡éªŒä¸¥è°¨ï¼Œèƒ½é˜²æ­¢ â€œå·²æ”¯ä»˜è®¢å•é‡å¤æ”¯ä»˜â€â€œæ”¯ä»˜ä¸­è®¢å•è¢«é‡å¤å¤„ç†â€ï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€ç»´æŠ¤çŠ¶æ€æœºè§„åˆ™ï¼Œé€‚åˆçŠ¶æ€æµè½¬æ¸…æ™°çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-18">æ–¹æ¡ˆ 4ï¼šé˜²é‡è¡¨ â€”â€” åˆ†å¸ƒå¼åœºæ™¯çš„å¼ºä¸€è‡´æ€§ä¿éšœ</h4>
<h5 data-id="heading-19">åŸç†</h5>
<p>é’ˆå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¤šæœåŠ¡å®ä¾‹ï¼‰ï¼Œç”¨ â€œé˜²é‡è¡¨â€ è®°å½•å·²å¤„ç†çš„æ”¯ä»˜è¯·æ±‚ï¼Œé€šè¿‡æ•°æ®åº“å”¯ä¸€ç´¢å¼•ä¿è¯å¹‚ç­‰ï¼š</p>
<ol>
<li>é˜²é‡è¡¨ä»…å­˜å‚¨ â€œå¹‚ç­‰æ ‡è¯†â€ï¼ˆå¦‚è®¢å•å·ã€æ”¯ä»˜æµæ°´å·ï¼‰ï¼Œæ— å…¶ä»–ä¸šåŠ¡å­—æ®µï¼›</li>
</ol>

<ol start="2">
<li>æ”¯ä»˜è¯·æ±‚åˆ°è¾¾åï¼Œå…ˆå‘é˜²é‡è¡¨æ’å…¥å¹‚ç­‰æ ‡è¯†ï¼›</li>
</ol>

<ol start="3">
<li>è‹¥æ’å…¥æˆåŠŸï¼ˆæ— é‡å¤ï¼‰ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼›è‹¥æ’å…¥å¤±è´¥ï¼ˆå·²å­˜åœ¨ï¼‰ï¼Œç›´æ¥è¿”å›æˆåŠŸç»“æœã€‚</li>
</ol>
<h5 data-id="heading-20">å®ç°æ­¥éª¤</h5>
<ol>
<li><strong>é˜²é‡è¡¨è®¾è®¡</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_idempotent` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `idempotent_key` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¹‚ç­‰æ ‡è¯†ï¼ˆè®¢å•å·/æ”¯ä»˜æµæ°´å·ï¼‰'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_idempotent_key` (`idempotent_key`) COMMENT <span class="hljs-string">'å¹‚ç­‰æ ‡è¯†å”¯ä¸€ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜é˜²é‡è¡¨'</span>;
</code></pre>
<ul>
<li>æ ¸å¿ƒï¼šidempotent_keyåŠ å”¯ä¸€ç´¢å¼•ï¼Œç¡®ä¿åŒä¸€æ ‡è¯†åªèƒ½æ’å…¥ä¸€æ¬¡ã€‚</li>
</ul>
<ol start="2">
<li><strong>åˆ†å¸ƒå¼æ”¯ä»˜æ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedPaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentIdempotentMapper idempotentMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentOrderMapper orderMapper;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO distributedPay(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šæ’å…¥é˜²é‡è¡¨ï¼ˆæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼‰</span>
        PaymentIdempotent idempotent = new PaymentIdempotent();
        idempotent.setIdempotentKey(orderNo); <span class="hljs-comment">// ç”¨è®¢å•å·ä½œä¸ºå¹‚ç­‰æ ‡è¯†</span>
        <span class="hljs-keyword">try</span> {
            idempotentMapper.insert(idempotent);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// æ’å…¥å¤±è´¥ï¼Œè¯´æ˜å·²å¤„ç†è¿‡ï¼ŒæŸ¥è¯¢è®¢å•çŠ¶æ€è¿”å›</span>
            PaymentOrder order = orderMapper.selectByOrderNo(orderNo);
            <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span> &amp;&amp; order.getStatus() == <span class="hljs-number">2</span>) {
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            }
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"è¯¥è®¢å•å·²æäº¤æ”¯ä»˜ï¼Œè¯·ç¨åæŸ¥è¯¢ç»“æœ"</span>, orderNo);
        }
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ­¥éª¤3ï¼šæ”¯ä»˜å¤±è´¥ï¼Œåˆ é™¤é˜²é‡è¡¨è®°å½•ï¼ˆå…è®¸é‡è¯•ï¼‰</span>
            idempotentMapper.deleteByIdempotentKey(orderNo);
            log.error(<span class="hljs-string">"åˆ†å¸ƒå¼æ”¯ä»˜å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}"</span>, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-21">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¤šæœåŠ¡å®ä¾‹ï¼‰ã€é«˜å¹¶å‘æ”¯ä»˜ï¼ˆå¦‚ç§’æ€æ”¯ä»˜ï¼‰ã€éœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šä¸ä¾èµ–ç¼“å­˜ï¼Œæ•°æ®åº“å”¯ä¸€ç´¢å¼•ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œé€‚åˆåˆ†å¸ƒå¼ç¯å¢ƒï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¤šä¸€å¼ é˜²é‡è¡¨ï¼Œå¢åŠ æ•°æ®åº“å­˜å‚¨æˆæœ¬ï¼›æ’å…¥åˆ é™¤æ“ä½œå¢åŠ æ•°æ®åº“å‹åŠ›ï¼ˆå¯é€šè¿‡åˆ†è¡¨ä¼˜åŒ–ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-22">æ–¹æ¡ˆ 5ï¼šç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒå¹‚ç­‰ â€”â€” å¤„ç†é‡å¤é€šçŸ¥</h4>
<h5 data-id="heading-23">åŸç†</h5>
<p>ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ï¼ˆå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ï¼‰çš„æ”¯ä»˜ç»“æœå›è°ƒå¯èƒ½é‡å¤å‘é€ï¼Œéœ€å•ç‹¬å¤„ç†å›è°ƒçš„å¹‚ç­‰æ€§ï¼š</p>
<ol>
<li>ç¬¬ä¸‰æ–¹å›è°ƒä¼šæºå¸¦å”¯ä¸€çš„ â€œæ”¯ä»˜æµæ°´å·â€ï¼ˆå¦‚å¾®ä¿¡çš„transaction_idã€æ”¯ä»˜å®çš„trade_noï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>æœåŠ¡ç«¯æ¥æ”¶å›è°ƒåï¼Œå…ˆæ ¡éªŒè¯¥æµæ°´å·æ˜¯å¦å·²å¤„ç†ï¼›</li>
</ol>

<ol start="3">
<li>è‹¥å·²å¤„ç†ï¼šç›´æ¥è¿”å›ç¬¬ä¸‰æ–¹ â€œæˆåŠŸâ€ æ ‡è¯†ï¼ˆé¿å…ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥ï¼‰ï¼›è‹¥æœªå¤„ç†ï¼šæ›´æ–°è®¢å•çŠ¶æ€å¹¶è®°å½•æµæ°´å·ã€‚</li>
</ol>
<h5 data-id="heading-24">å®ç°æ­¥éª¤ï¼ˆä»¥å¾®ä¿¡æ”¯ä»˜å›è°ƒä¸ºä¾‹ï¼‰</h5>
<ol>
<li><strong>å›è°ƒè®°å½•è¡¨è®¾è®¡</strong>ï¼ˆå­˜å‚¨å·²å¤„ç†çš„å›è°ƒæµæ°´å·ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_callback_record` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `third_party_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç¬¬ä¸‰æ–¹æ”¯ä»˜æµæ°´å·ï¼ˆå¦‚å¾®ä¿¡transaction_idï¼‰'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å…³è”è®¢å•å·'</span>,
  `callback_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'å›è°ƒæ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_third_party_no` (`third_party_no`) COMMENT <span class="hljs-string">'ç¬¬ä¸‰æ–¹æµæ°´å·å”¯ä¸€ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜å›è°ƒè®°å½•è¡¨'</span>;
</code></pre>
<ol start="2">
<li><strong>å¾®ä¿¡æ”¯ä»˜å›è°ƒæ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@RestController</span>
<span class="hljs-keyword">@RequestMapping</span>(<span class="hljs-string">"/api/pay/callback"</span>)
public class WechatPayCallbackController {
    <span class="hljs-keyword">@Autowired</span>
    private PaymentCallbackRecordMapper callbackMapper;
    <span class="hljs-keyword">@Autowired</span>
    private PaymentOrderMapper orderMapper;
    
    <span class="hljs-comment">/**
     * å¾®ä¿¡æ”¯ä»˜å›è°ƒæ¥å£ï¼ˆä¿è¯å¹‚ç­‰æ€§ï¼‰
     */</span>
    <span class="hljs-keyword">@PostMapping</span>(<span class="hljs-string">"/wechat"</span>)
    public String wechatPayCallback(<span class="hljs-keyword">@RequestBody</span> String xmlData) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šè§£æå¾®ä¿¡å›è°ƒæ•°æ®ï¼ˆè·å–transaction_idã€order_noã€result_codeç­‰ï¼‰</span>
        WechatCallbackDTO callbackDTO = <span class="hljs-built_in">parseWechatCallback</span>(xmlData);
        String thirdPartyNo = callbackDTO<span class="hljs-selector-class">.getTransactionId</span>(); <span class="hljs-comment">// ç¬¬ä¸‰æ–¹å”¯ä¸€æµæ°´å·</span>
        String orderNo = callbackDTO<span class="hljs-selector-class">.getOutTradeNo</span>(); <span class="hljs-comment">// å•†æˆ·è®¢å•å·</span>
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šæ ¡éªŒå›è°ƒæ˜¯å¦å·²å¤„ç†ï¼ˆå¹‚ç­‰æ ¸å¿ƒï¼‰</span>
        PaymentCallbackRecord record = callbackMapper<span class="hljs-selector-class">.selectByThirdPartyNo</span>(thirdPartyNo);
        if (record != null) {
            <span class="hljs-comment">// å·²å¤„ç†ï¼Œè¿”å›å¾®ä¿¡â€œæˆåŠŸâ€æ ‡è¯†ï¼ˆé¿å…é‡å¤å›è°ƒï¼‰</span>
            return <span class="hljs-built_in">buildWechatSuccessXml</span>();
        }
        
        <span class="hljs-comment">// æ­¥éª¤3ï¼šæ ¡éªŒæ”¯ä»˜ç»“æœï¼ˆä»…å¤„ç†æ”¯ä»˜æˆåŠŸçš„å›è°ƒï¼‰</span>
        if (!"SUCCESS".equals(callbackDTO.getResultCode())) {
            log<span class="hljs-selector-class">.error</span>("å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤±è´¥ï¼Œè®¢å•å·ï¼š{}ï¼ŒåŸå› ï¼š{}", orderNo, callbackDTO.getErrCodeDes());
            return <span class="hljs-built_in">buildWechatFailXml</span>("æ”¯ä»˜å¤±è´¥");
        }
        
        try {
            <span class="hljs-comment">// æ­¥éª¤4ï¼šæ›´æ–°è®¢å•çŠ¶æ€ä¸ºâ€œå·²æ”¯ä»˜â€</span>
            int updateCount = orderMapper<span class="hljs-selector-class">.updateStatusByOrderNo</span>(orderNo, <span class="hljs-number">2</span>);
            if (updateCount == <span class="hljs-number">0</span>) {
                log<span class="hljs-selector-class">.error</span>("è®¢å•ä¸å­˜åœ¨æˆ–å·²å¤„ç†ï¼Œè®¢å•å·ï¼š{}", orderNo);
                return <span class="hljs-built_in">buildWechatSuccessXml</span>(); <span class="hljs-comment">// ä»è¿”å›æˆåŠŸï¼Œé¿å…é‡å¤å›è°ƒ</span>
            }
            
            <span class="hljs-comment">// æ­¥éª¤5ï¼šè®°å½•å›è°ƒæµæ°´å·ï¼ˆæ ‡è®°ä¸ºå·²å¤„ç†ï¼‰</span>
            PaymentCallbackRecord newRecord = new <span class="hljs-built_in">PaymentCallbackRecord</span>();
            newRecord<span class="hljs-selector-class">.setThirdPartyNo</span>(thirdPartyNo);
            newRecord<span class="hljs-selector-class">.setOrderNo</span>(orderNo);
            callbackMapper<span class="hljs-selector-class">.insert</span>(newRecord);
            
            <span class="hljs-comment">// æ­¥éª¤6ï¼šè¿”å›æˆåŠŸæ ‡è¯†</span>
            return <span class="hljs-built_in">buildWechatSuccessXml</span>();
        } catch (Exception e) {
            log<span class="hljs-selector-class">.error</span>("å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤„ç†å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}", orderNo, e);
            <span class="hljs-comment">// å›è°ƒå¤„ç†å¤±è´¥ï¼Œè¿”å›å¤±è´¥æ ‡è¯†ï¼Œå¾®ä¿¡ä¼šé‡è¯•ï¼ˆéœ€åšå¥½é‡è¯•æœºåˆ¶ï¼‰</span>
            return <span class="hljs-built_in">buildWechatFailXml</span>("å¤„ç†å¼‚å¸¸");
        }
    }
    
    <span class="hljs-comment">// å·¥å…·æ–¹æ³•ï¼šè§£æå¾®ä¿¡å›è°ƒXMLã€æ„å»ºè¿”å›XMLï¼ˆçœç•¥ï¼‰</span>
    private WechatCallbackDTO <span class="hljs-built_in">parseWechatCallback</span>(String xmlData) { <span class="hljs-comment">/* ... */</span> }
    private String <span class="hljs-built_in">buildWechatSuccessXml</span>() { <span class="hljs-comment">/* ... */</span> }
    private String <span class="hljs-built_in">buildWechatFailXml</span>(String msg) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<h5 data-id="heading-25">å…³é”®æ³¨æ„ç‚¹</h5>
<ul>
<li>å¿…é¡»ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ â€œå”¯ä¸€æµæ°´å·â€ ä½œä¸ºå¹‚ç­‰æ ‡è¯†ï¼Œè€Œéå•†æˆ·è®¢å•å·ï¼ˆé¿å…åŒä¸€è®¢å•å¤šæ¬¡æ”¯ä»˜çš„å›è°ƒå†²çªï¼‰ï¼›</li>
</ul>

<ul>
<li>å›è°ƒå¤„ç†æˆåŠŸåï¼Œæ— è®ºè®¢å•çŠ¶æ€æ˜¯å¦æ›´æ–°æˆåŠŸï¼Œéƒ½éœ€è¿”å›ç¬¬ä¸‰æ–¹ â€œæˆåŠŸâ€ æ ‡è¯†ï¼ˆå¦åˆ™ç¬¬ä¸‰æ–¹ä¼šæŒç»­é‡å¤å›è°ƒï¼‰ï¼›</li>
</ul>

<ul>
<li>å›è°ƒæ¥å£éœ€æ”¯æŒå¹‚ç­‰é‡è¯•ï¼ˆå¦‚è®¢å•ä¸å­˜åœ¨æ—¶ä»è¿”å›æˆåŠŸï¼Œé¿å…ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†æ”¯ä»˜å¹‚ç­‰æ€§å®Œæ•´æµç¨‹</h3>
<p>ç»“åˆä»¥ä¸Šæ–¹æ¡ˆï¼Œä»¥ç”µå•†æ”¯ä»˜ä¸ºä¾‹ï¼Œæ¢³ç†å®Œæ•´çš„å¹‚ç­‰æ€§ä¿éšœæµç¨‹ï¼š</p>
<ol>
<li><strong>ä¸‹å•é˜¶æ®µ</strong>ï¼šç”Ÿæˆå”¯ä¸€è®¢å•å·ORDER202511210001ï¼Œè®¢å•çŠ¶æ€è®¾ä¸º â€œå¾…æ”¯ä»˜â€ï¼›</li>
</ol>

<ol start="2">
<li><strong>å‰ç«¯æ”¯ä»˜å‰</strong>ï¼šè°ƒç”¨ â€œè·å– Tokenâ€ æ¥å£ï¼Œè·å– TokenTOKEN_XXXï¼›</li>
</ol>

<ol start="3">
<li><strong>æ”¯ä»˜è¯·æ±‚é˜¶æ®µ</strong>ï¼šå‰ç«¯æºå¸¦ Token + è®¢å•å·å‘èµ·æ”¯ä»˜ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>Token æ ¡éªŒï¼ˆæ–¹æ¡ˆ 2ï¼‰â†’ è®¢å•çŠ¶æ€æ ¡éªŒï¼ˆæ–¹æ¡ˆ 3ï¼‰â†’ é˜²é‡è¡¨æ’å…¥ï¼ˆæ–¹æ¡ˆ 4ï¼‰â†’ è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ï¼›</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>ç¬¬ä¸‰æ–¹å›è°ƒé˜¶æ®µ</strong>ï¼šå¾®ä¿¡æ”¯ä»˜å›è°ƒæºå¸¦transaction_idï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å›è°ƒæµæ°´å·æ ¡éªŒï¼ˆæ–¹æ¡ˆ 5ï¼‰â†’ æ›´æ–°è®¢å•çŠ¶æ€â†’ è®°å½•å›è°ƒè®°å½•ï¼›</li>
</ul>
</li>
</ul>
<ol start="5">
<li><strong>é‡å¤è¯·æ±‚å¤„ç†</strong>ï¼šç”¨æˆ·é‡å¤ç‚¹å‡»æ”¯ä»˜æ—¶ï¼ŒæœåŠ¡ç«¯é€šè¿‡ Token / é˜²é‡è¡¨ / è®¢å•çŠ¶æ€ç›´æ¥è¿”å›ç»“æœï¼Œä¸é‡å¤æ‰£æ¬¾ã€‚</li>
</ol>
<h3 data-id="heading-27">äº”ã€é¿å‘æŒ‡å—ï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„ 6 ä¸ªå…³é”®æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å¹‚ç­‰æ ‡è¯†å¿…é¡»å…¨å±€å”¯ä¸€</strong>ï¼šè®¢å•å·ã€Tokenã€ç¬¬ä¸‰æ–¹æµæ°´å·ç­‰å¹‚ç­‰æ ‡è¯†ï¼Œéœ€ä¿è¯å…¨å±€å”¯ä¸€ï¼ˆå¦‚è®¢å•å·ç”¨ â€œæ—¶é—´æˆ³ + éšæœºæ•° + ç”¨æˆ· IDâ€ ç”Ÿæˆï¼‰ï¼›</li>
</ol>

<ol start="2">
<li><strong>å¹¶å‘åœºæ™¯åŠ é”</strong>ï¼šé«˜å¹¶å‘æ”¯ä»˜æ—¶ï¼Œéœ€ç”¨åˆ†å¸ƒå¼é”ï¼ˆå¦‚ Redis é”ï¼‰é”å®šè®¢å•å·ï¼Œé¿å… â€œåŒæ—¶æ’å…¥é˜²é‡è¡¨â€ å¯¼è‡´çš„ DuplicateKeyException è¿‡å¤šï¼›</li>
</ol>

<ol start="3">
<li><strong>å¼‚å¸¸å¤„ç†éœ€è°¨æ…</strong>ï¼šæ”¯ä»˜å¤±è´¥ / ç³»ç»Ÿå¼‚å¸¸æ—¶ï¼Œéœ€é‡Šæ”¾å¹‚ç­‰æ ‡è¯†ï¼ˆå¦‚åˆ é™¤ Tokenã€é˜²é‡è¡¨è®°å½•ï¼‰ï¼Œå…è®¸ç”¨æˆ·é‡è¯•ï¼›</li>
</ol>

<ol start="4">
<li><strong>é¿å…çŠ¶æ€å›é€€</strong>ï¼šå·²æ”¯ä»˜çš„è®¢å•ä¸å…è®¸å†æ¬¡æ”¯ä»˜ï¼ˆçŠ¶æ€æœºé™åˆ¶ï¼‰ï¼Œé˜²æ­¢ â€œå·²æ”¯ä»˜è®¢å•é‡å¤æ‰£æ¬¾â€ï¼›</li>
</ol>

<ol start="5">
<li><strong>ç¬¬ä¸‰æ–¹å›è°ƒå¿…é¡»å¹‚ç­‰</strong>ï¼šç¬¬ä¸‰æ–¹å›è°ƒçš„å¹‚ç­‰æ€§ç‹¬ç«‹å¤„ç†ï¼Œä¸ä¾èµ–è®¢å•çŠ¶æ€ï¼ˆé¿å…åŒä¸€è®¢å•å¤šæ¬¡æ”¯ä»˜çš„å›è°ƒå†²çªï¼‰ï¼›</li>
</ol>

<ol start="6">
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong>ï¼šè®°å½•æ¯ç¬”æ”¯ä»˜çš„å¹‚ç­‰æ ¡éªŒç»“æœã€çŠ¶æ€å˜æ›´æ—¥å¿—ï¼Œç›‘æ§é‡å¤è¯·æ±‚æ¬¡æ•°ï¼Œå¼‚å¸¸æ—¶è§¦å‘å‘Šè­¦ï¼ˆå¦‚é‡å¤æ”¯ä»˜è¯·æ±‚çªå¢ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-28">å…­ã€æ–¹æ¡ˆé€‰å‹å»ºè®®</h3>



































<table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆç»„åˆ</th><th>æ ¸å¿ƒåŸå› </th></tr></thead><tbody><tr><td>ä¸­å°ç”µå•†ï¼ˆå•ä½“åº”ç”¨ï¼‰</td><td>å”¯ä¸€è®¢å•å·ï¼ˆæ–¹æ¡ˆ 1ï¼‰+ çŠ¶æ€æœºï¼ˆæ–¹æ¡ˆ 3ï¼‰</td><td>å®ç°ç®€å•ï¼Œæ— é¢å¤–ä¾èµ–ï¼Œæ»¡è¶³åŸºç¡€å¹‚ç­‰éœ€æ±‚</td></tr><tr><td>ç§»åŠ¨ç«¯æ”¯ä»˜ï¼ˆé˜²é‡å¤ç‚¹å‡»ï¼‰</td><td>ä»¤ç‰Œæœºåˆ¶ï¼ˆæ–¹æ¡ˆ 2ï¼‰+ å”¯ä¸€è®¢å•å·ï¼ˆæ–¹æ¡ˆ 1ï¼‰</td><td>Token é˜²æ­¢é‡å¤ç‚¹å‡»ï¼Œè®¢å•å·åŒé‡ä¿éšœ</td></tr><tr><td>åˆ†å¸ƒå¼ç”µå•†ï¼ˆå¤šæœåŠ¡ï¼‰</td><td>é˜²é‡è¡¨ï¼ˆæ–¹æ¡ˆ 4ï¼‰+ çŠ¶æ€æœºï¼ˆæ–¹æ¡ˆ 3ï¼‰</td><td>åˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§ï¼Œæ”¯æŒé«˜å¹¶å‘</td></tr><tr><td>ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒ</td><td>å›è°ƒæµæ°´å·æ ¡éªŒï¼ˆæ–¹æ¡ˆ 5ï¼‰</td><td>é’ˆå¯¹æ€§å¤„ç†ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥</td></tr><tr><td>ç§’æ€æ”¯ä»˜ï¼ˆé«˜å¹¶å‘ï¼‰</td><td>é˜²é‡è¡¨ï¼ˆæ–¹æ¡ˆ 4ï¼‰+ Redis åˆ†å¸ƒå¼é”</td><td>å…¼é¡¾é«˜å¹¶å‘ä¸å¼ºä¸€è‡´æ€§</td></tr></tbody></table>
<h3 data-id="heading-29">æ€»ç»“ï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>æ”¯ä»˜å¹‚ç­‰æ€§çš„æœ¬è´¨æ˜¯ â€œ<strong>ç”¨å”¯ä¸€æ ‡è¯†é”å®šæ“ä½œï¼Œç”¨çŠ¶æ€æ ¡éªŒæ§åˆ¶æµç¨‹</strong>â€â€”â€” æ— è®ºé‡å¤è¯·æ±‚æ¥è‡ªç”¨æˆ·ã€ç½‘ç»œè¿˜æ˜¯ç³»ç»Ÿï¼Œåªè¦é€šè¿‡ â€œå”¯ä¸€æ ‡è¯†åˆ¤æ–­æ˜¯å¦å·²å¤„ç†â€ï¼Œå°±èƒ½ä¿è¯ç»“æœä¸€è‡´ã€‚</p>
<p>è®¾è®¡æ—¶éœ€éµå¾ª â€œ<strong>ç®€å•ä¼˜å…ˆï¼Œå…¼é¡¾åœºæ™¯</strong>â€ï¼š</p>
<ul>
<li>ä¸­å°å›¢é˜Ÿ / å•ä½“åº”ç”¨ï¼šä¼˜å…ˆç”¨ â€œå”¯ä¸€è®¢å•å· + çŠ¶æ€æœºâ€ï¼Œä½æˆæœ¬è½åœ°ï¼›</li>
</ul>

<ul>
<li>åˆ†å¸ƒå¼ / é«˜å¹¶å‘åœºæ™¯ï¼šå åŠ  â€œé˜²é‡è¡¨ + åˆ†å¸ƒå¼é”â€ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ï¼›</li>
</ul>

<ul>
<li>ç¬¬ä¸‰æ–¹å›è°ƒï¼šå•ç‹¬ç”¨ â€œç¬¬ä¸‰æ–¹æµæ°´å·â€ åšå¹‚ç­‰ï¼Œé¿å…é‡å¤é€šçŸ¥ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œæ”¯ä»˜å¹‚ç­‰æ€§æ˜¯èµ„é‡‘å®‰å…¨çš„åº•çº¿ï¼Œæ²¡æœ‰ â€œæœ€ä¼˜æ–¹æ¡ˆâ€ï¼Œåªæœ‰ â€œæœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„æ–¹æ¡ˆâ€â€”â€” ç»“åˆè‡ªèº«ä¸šåŠ¡è§„æ¨¡ã€æŠ€æœ¯æ¶æ„é€‰æ‹©ç»„åˆæ–¹æ¡ˆï¼ŒåŒæ—¶åšå¥½ç›‘æ§ä¸æ—¥å¿—ï¼Œæ‰èƒ½æœç»é‡å¤æ‰£æ¬¾ï¼Œä¿éšœç”¨æˆ·ä¸å¹³å°çš„èµ„é‡‘å®‰å…¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576556950331867136</link>    <guid>https://juejin.cn/post/7576556950331867136</guid>    <pubDate>2025-11-26T03:16:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950331867136" data-draft-id="7576559408659103796" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-26T03:16:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢å"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403434270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403434270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:16:30.000Z" title="Wed Nov 26 2025 03:16:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜æè¿°</h2>
<p>é¡¹ç›®ä¸­è¦åšè§†é¢‘æ’­æ”¾ï¼Œæ¥å…¥é˜¿é‡Œäº‘çš„ <code>flutter_aliplayer</code>åæ¨¡æ‹Ÿå™¨è·‘ä¸èµ·æ¥</p>
<pre><code class="hljs language-bash" lang="bash">Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilter</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterConfig</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterOptions</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPPreloadTask</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AliMediaLoaderV2</span>

</code></pre>
<h3 data-id="heading-1">é—®é¢˜åŸå› </h3>
<p>AliPlayer SDK çš„ <code>AliyunPlayer.framework</code> åœ¨ iOS æ¨¡æ‹Ÿå™¨æ¶æ„ï¼ˆx86_64/arm64-simulatorï¼‰ä¸­ç¼ºå°‘ä»¥ä¸‹ç¬¦å·çš„å®ç°ï¼š</p>
<ul>
<li>
<p><code>AVPFilter</code>ã€<code>AVPFilterConfig</code>ã€<code>AVPFilterOptions</code> - è§†é¢‘æ»¤é•œç›¸å…³ç±»</p>
</li>
<li>
<p><code>AVPPreloadTask</code>ã€<code>AliMediaLoaderV2</code> - é¢„åŠ è½½åŠŸèƒ½ç›¸å…³ç±»</p>
</li>
</ul>
<p>è¿™äº›ç¬¦å·åœ¨çœŸæœºæ¶æ„ï¼ˆarm64ï¼‰ä¸­å­˜åœ¨ï¼Œä½†åœ¨æ¨¡æ‹Ÿå™¨æ¶æ„ä¸­ç¼ºå¤±ï¼Œå¯¼è‡´é“¾æ¥å¤±è´¥ã€‚</p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h2>
<p>é€šè¿‡åœ¨ <code>flutter_aliplayer</code> æ’ä»¶ä¸­æ·»åŠ æ¡ä»¶ç¼–è¯‘ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šä½¿ç”¨å­˜æ ¹å®ç°ï¼Œåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´å®ç°ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li>
<p><strong><strong>æ¡ä»¶ç¼–è¯‘</strong></strong>ï¼šä½¿ç”¨ <code>#if TARGET_OS_SIMULATOR</code> åŒºåˆ†æ¨¡æ‹Ÿå™¨å’ŒçœŸæœº</p>
</li>
<li>
<p><strong><strong>å­˜æ ¹å®ç°</strong></strong>ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸Šæä¾›æœ€å°åŒ–å®ç°ï¼Œè¿”å›æ˜ç¡®çš„é”™è¯¯æç¤º</p>
</li>
<li>
<p><strong><strong>å®Œæ•´å®ç°</strong></strong>ï¼šåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´çš„ AliPlayer SDK åŠŸèƒ½</p>
</li>
<li>
<p><strong><strong>ä¾èµ–ç®¡ç†</strong></strong>ï¼šé€šè¿‡ <code>dependency_overrides</code> ä½¿ç”¨ä¿®æ”¹åçš„æœ¬åœ°ç‰ˆæœ¬</p>
</li>
</ol>
<h2 data-id="heading-4">å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-5">1. ä¿®æ”¹ <code>FlutterAliMediaLoaderV2.m</code></h3>
<p>ä¸ºé¢„åŠ è½½ v2 åŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨å­˜æ ¹ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
#import "FlutterAliMediaLoaderV2.h"

#import &lt;TargetConditionals.h&gt;

#if TARGET_OS_SIMULATOR
// æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ï¼šè¿”å›é”™è¯¯ï¼Œä¸è°ƒç”¨ä»»ä½• AliPlayer API

- (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {

Â  Â  result([FlutterError errorWithCode:@"AliPlayerPreloadV2Unavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"AliPlayer preload v2 is not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

}

  


#else

// çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

// ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

</code></pre>
<h3 data-id="heading-6">2. ä¿®æ”¹ AliPlayerFactory.m</h3>
<p>ä¸ºæ»¤é•œåŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
- (void)setFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°æ»¤é•œåŠŸèƒ½

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

  


- (void)updateFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

</code></pre>
<p>ä¿®æ”¹å®Œæ¯•åï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘å•¦ã€‚ä¸ªäººå¼€å‘ç›´æ¥æ”¾åœ¨æœ¬åœ°ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘çš„æ—¶å€™å¼•ç”¨æœ¬åœ°<code>flutter_aliplayer</code>åŒ…ï¼ŒçœŸæœºä¸Šçº¿æ—¶ä½¿ç”¨é˜¿é‡Œäº‘çš„æ­£å¼åŒ…ã€‚å›¢é˜Ÿå¼€å‘æ—¶æœ€å¥½æŠŠä¿®æ”¹åçš„ä»£ç ä¸Šä¼ åˆ°è‡ªå·±å…¬å¸çš„git,ç„¶åé…ç½®æ‰“åŒ…è„šæœ¬ã€‚</p>
<h2 data-id="heading-7">é¡¹ç›®é…ç½®</h2>
<h3 data-id="heading-8">1. ä½¿ç”¨ Git ä»“åº“ç‰ˆæœ¬</h3>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­é…ç½® <code>dependency_overrides</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">dependency_overrides:</span>

Â  <span class="hljs-attr">flutter_aliplayer:</span>

Â  Â  <span class="hljs-attr">git:</span>

Â  Â  Â  <span class="hljs-attr">url:</span> <span class="hljs-string">è‡ªå·±çš„.git</span>

</code></pre>
<h3 data-id="heading-9">2. æ„å»ºè„šæœ¬è‡ªåŠ¨åˆ‡æ¢</h3>
<p><code>build.sh</code> è„šæœ¬ä¼šåœ¨ä¸åŒåœºæ™¯è‡ªåŠ¨åˆ‡æ¢ä¾èµ–æºï¼š</p>
<ul>
<li>
<p>æ³¨é‡Šæ‰ git é…ç½®ï¼Œä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬</p>
</li>
<li>
<p>å–æ¶ˆæ³¨é‡Š git é…ç½®ï¼Œä½¿ç”¨åŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤çš„ç‰ˆæœ¬</p>
</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ³¨é‡Šæ‰ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ pub.dev ç‰ˆæœ¬</span>

comment_flutter_aliplayer_override

  


<span class="hljs-comment"># æ¢å¤ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ git ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</span>

uncomment_flutter_aliplayer_override

</code></pre>
<h3 data-id="heading-10">æ¨¡æ‹Ÿå™¨ä¸Šçš„é™åˆ¶</h3>
<p>åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸Šï¼Œè§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ä¸å¯ç”¨ï¼Œä¿®æ”¹åªæ˜¯ä¸ºäº†å¼€å‘ä¸­æ–¹ä¾¿ä½¿ç”¨iOSæ¨¡æ‹Ÿå™¨ã€‚</p>
<h3 data-id="heading-11">ç¬¦å·æ£€æŸ¥</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ¡†æ¶ä¸­çš„ç¬¦å·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ£€æŸ¥æ‰€æœ‰æ¶æ„</span>

lipo -info ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer

<span class="hljs-comment"># æ£€æŸ¥ x86_64 æ¶æ„ä¸­çš„ç¬¦å·</span>

lipo ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer -thin x86_64 -output /tmp/AliyunPlayer_x86_64

nm -gU /tmp/AliyunPlayer_x86_64 | grep AVPFilter

</code></pre>
<h3 data-id="heading-12">ä¾èµ–ç®¡ç†</h3>
<ul>
<li>
<p><strong><strong>å¼€å‘ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ git ä»“åº“ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</p>
</li>
<li>
<p><strong><strong>ç”Ÿäº§ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬ï¼ˆé¿å…æœ¬åœ°ä¿®æ”¹å½±å“ç”Ÿäº§æ„å»ºï¼‰</p>
</li>
</ul>
<h2 data-id="heading-13">æœªæ¥æ”¹è¿›</h2>
<p>å¦‚æœå“ªå¤©<code>AliPlayer SDK</code>å®˜æ–¹æä¾›äº†åŒ…å«å®Œæ•´æ¨¡æ‹Ÿå™¨æ”¯æŒçš„ç‰ˆæœ¬ï¼Œé‚£æœ€å¥½ä¸è¿‡ã€‚</p>
<h2 data-id="heading-14">ç›¸å…³æ–‡ä»¶</h2>
<ul>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/FlutterAliMediaLoaderV2.m</code> - é¢„åŠ è½½ v2 å®ç°</p>
</li>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/AliPlayerFactory.m</code> - æ’­æ”¾å™¨å·¥å‚å®ç°</p>
</li>
<li>
<p><code>pubspec.yaml</code> - ä¾èµ–é…ç½®</p>
</li>
<li>
<p><code>build.sh</code> - æ„å»ºè„šæœ¬</p>
</li>
</ul>
<h2 data-id="heading-15">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fvod%2Fdeveloper-reference" target="_blank" title="https://help.aliyun.com/zh/vod/developer-reference" ref="nofollow noopener noreferrer">AliPlayer SDK å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fdevelopment%2Fplatform-integration%2Fplatform-channels" target="_blank" title="https://docs.flutter.dev/development/platform-integration/platform-channels" ref="nofollow noopener noreferrer">Flutter iOS å¹³å°ç‰¹å®šä»£ç </a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Farchive%2Fdocumentation%2FDeveloperTools%2FConceptual%2Fcross_development%2FUsing%2Fusing.html" target="_blank" title="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html" ref="nofollow noopener noreferrer">Objective-C æ¡ä»¶ç¼–è¯‘</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°]]></title>    <link>https://juejin.cn/post/7577228831137660971</link>    <guid>https://juejin.cn/post/7577228831137660971</guid>    <pubDate>2025-11-27T10:55:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831137660971" data-draft-id="7577215663968124970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T10:55:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:55:19.000Z" title="Thu Nov 27 2025 10:55:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d90ed9aea7445f7b7e461d158f6fb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764845718&amp;x-signature=WWe2r7BZJwc6tTMGSMR7AIoYtZE%3D" alt="4c1920f98b528d631ce91ff20a708bd6.png" loading="lazy"/></p>
<p>åœ¨C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å„ç§ç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œä½†æœ‰ä¸€ç§æƒ…å†µç‰¹åˆ«å®¹æ˜“å¯¼è‡´éš¾ä»¥å‘ç°çš„bugâ€”â€”é‚£å°±æ˜¯æ— ç¬¦å·ç±»å‹ä¸æœ‰ç¬¦å·ç±»å‹çš„æ··åˆè¿ç®—ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨è¿™ä¸ªçœ‹ä¼¼ç®€å•å´æš—è—ç„æœºçš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ä¸ªçœ‹ä¼¼æ— å®³çš„å¾ªç¯</h2>
<p>è€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼Œå®ƒçœ‹èµ·æ¥å®Œå…¨æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processPair</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Processing: "</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">" and "</span> &lt;&lt; b &lt;&lt; std::endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::vector&lt;<span class="hljs-type">int</span>&gt; data = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    
    <span class="hljs-comment">// å¤„ç†ç›¸é‚»å…ƒç´ å¯¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
        <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å½“å‘é‡ä¸­æœ‰æ•°æ®æ—¶ï¼Œè¿™æ®µä»£ç è¿è¡Œå¾—å¾ˆå¥½ã€‚å®ƒä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Processing: 1 and 2</span>
<span class="hljs-section">Processing: 2 and 3</span>
<span class="hljs-section">Processing: 3 and 4</span>
<span class="hljs-section">Processing: 4 and 5</span>
</code></pre>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬é¢å¯¹ä¸€ä¸ªç©ºå‘é‡æ—¶ï¼Œé—®é¢˜å°±å‡ºç°äº†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; empty_vec;  <span class="hljs-comment">// ç©ºå‘é‡</span>

<span class="hljs-comment">// åŒæ ·çš„ä»£ç ï¼Œä¸åŒçš„ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; empty_vec.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
    <span class="hljs-built_in">processPair</span>(empty_vec[i], empty_vec[i + <span class="hljs-number">1</span>]);
}
</code></pre>
<p><strong>æ€è€ƒä¸€ä¸‹ï¼šä½ æœŸæœ›è¿™ä¸ªå¾ªç¯æ‰§è¡Œå¤šå°‘æ¬¡ï¼Ÿ</strong></p>
<h2 data-id="heading-1">é—®é¢˜çš„æ ¹æºï¼šéšå¼ç±»å‹è½¬æ¢</h2>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥äº†è§£C++çš„ç±»å‹è½¬æ¢è§„åˆ™ã€‚</p>
<h3 data-id="heading-2">å¸¸ç”¨ç®—æœ¯è½¬æ¢ï¼ˆUsual Arithmetic Conversionsï¼‰</h3>
<p>åœ¨C++ä¸­ï¼Œå½“äºŒå…ƒæ“ä½œç¬¦ä¸¤è¾¹çš„æ“ä½œæ•°ç±»å‹ä¸åŒæ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œ<strong>å¸¸ç”¨ç®—æœ¯è½¬æ¢</strong>ã€‚å…¶ä¸­ä¸€ä¸ªå…³é”®è§„åˆ™æ˜¯ï¼š</p>
<p><strong>å½“æœ‰ç¬¦å·ç±»å‹ä¸æ— ç¬¦å·ç±»å‹è¿›è¡Œè¿ç®—æ—¶ï¼Œæœ‰ç¬¦å·ç±»å‹ä¼šè¢«æå‡ä¸ºæ— ç¬¦å·ç±»å‹ã€‚</strong></p>
<p>è®©æˆ‘ä»¬åˆ†è§£é‚£ä¸ªé—®é¢˜è¡¨è¾¾å¼ï¼š<code>empty_vec.size() - 1</code></p>
<ol>
<li><code>empty_vec.size()</code> è¿”å› <code>size_t</code> ç±»å‹ï¼ˆæ— ç¬¦å·æ•´å‹ï¼‰</li>
<li><code>1</code> æ˜¯ <code>int</code> ç±»å‹ï¼ˆæœ‰ç¬¦å·æ•´å‹ï¼‰</li>
<li>æ ¹æ®è§„åˆ™ï¼Œ<code>1</code> è¢«è½¬æ¢ä¸º <code>size_t</code> ç±»å‹</li>
<li>è¡¨è¾¾å¼å˜ä¸ºï¼š<code>size_t_value - size_t(1)</code></li>
</ol>
<h3 data-id="heading-3">æ— ç¬¦å·æ•´æ•°çš„ä¸‹æº¢è¡Œä¸º</h3>
<p>å½“å®¹å™¨ä¸ºç©ºæ—¶ï¼š</p>
<ul>
<li><code>empty_vec.size()</code> = 0</li>
<li><code>size_t(0) - size_t(1)</code> å‘ç”Ÿä¸‹æº¢</li>
</ul>
<p>ç”±äº<code>size_t</code>æ˜¯æ— ç¬¦å·ç±»å‹ï¼Œå®ƒéµå¾ªæ¨¡ç®—æœ¯è§„åˆ™ï¼š</p>
<ul>
<li>ä¸‹æº¢ä¸ä¼šäº§ç”Ÿè´Ÿæ•°ï¼Œè€Œæ˜¯å›ç»•åˆ°è¯¥ç±»å‹çš„æœ€å¤§å€¼</li>
<li>åœ¨64ä½ç³»ç»Ÿä¸Šï¼Œ<code>0 - 1</code> å˜æˆäº† <code>18446744073709551615</code></li>
</ul>
<p>äºæ˜¯æˆ‘ä»¬çš„å¾ªç¯æ¡ä»¶å˜æˆäº†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">18446744073709551615</span>; i++)
</code></pre>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªå‡ ä¹æ— é™å¾ªç¯ï¼</p>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜å¦‚æ­¤å±é™©ï¼Ÿ</h2>
<h3 data-id="heading-5">1. éšè”½æ€§æé«˜</h3>
<p>è¿™ç§bugåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¸ä¼šå‡ºç°ï¼š</p>
<ul>
<li>åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘æµ‹è¯•ç©ºå®¹å™¨çš„æƒ…å†µ</li>
<li>åœ¨ä»£ç å®¡æŸ¥æ—¶ï¼Œè¿™æ ·çš„å¾ªç¯çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</li>
<li>åœ¨æœ‰æ•°æ®çš„æ­£å¸¸æƒ…å†µä¸‹ï¼Œä»£ç è¿è¡Œå®Œç¾</li>
</ul>
<h3 data-id="heading-6">2. åæœä¸¥é‡</h3>
<p>å½“é—®é¢˜çœŸçš„å‘ç”Ÿæ—¶ï¼š</p>
<ul>
<li>ç¨‹åºé™·å…¥æ­»å¾ªç¯ï¼Œæ¶ˆè€—å¤§é‡CPUèµ„æº</li>
<li>å¯èƒ½å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨</li>
<li>åœ¨åµŒå…¥å¼æˆ–èµ„æºå—é™ç¯å¢ƒä¸­å¯èƒ½é€ æˆç³»ç»Ÿå´©æºƒ</li>
</ul>
<h3 data-id="heading-7">3. è°ƒè¯•å›°éš¾</h3>
<p>ç”±äºé—®é¢˜åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹å‡ºç°ï¼š</p>
<ul>
<li>éš¾ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å¤ç°</li>
<li>æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶å¯èƒ½éå¸¸å¤§ï¼ˆå› ä¸ºå¾ªç¯æ¬¡æ•°æå¤šï¼‰</li>
<li>æ—¥å¿—è¾“å‡ºå¯èƒ½æ·¹æ²¡ç³»ç»Ÿ</li>
</ul>
<h2 data-id="heading-8">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">æ–¹æ¡ˆ1ï¼šæ˜¾å¼æ£€æŸ¥è¾¹ç•Œ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ˜ç¡®æ£€æŸ¥å®¹å™¨å¤§å°</span>
<span class="hljs-keyword">if</span> (!data.<span class="hljs-built_in">empty</span>() &amp;&amp; data.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
        <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
    }
}
</code></pre>
<p>è¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ï¼Œæ˜ç¡®è¡¨è¾¾äº†æˆ‘ä»¬çš„æ„å›¾ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆ2ï¼šè°ƒæ•´å¾ªç¯æ¡ä»¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¿å…å‡æ³•æ“ä½œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i + <span class="hljs-number">1</span> &lt; data.<span class="hljs-built_in">size</span>(); i++) {
    <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
}
</code></pre>
<p>è¿™ç§æ–¹æ³•é€šè¿‡è°ƒæ•´æ¯”è¾ƒé€»è¾‘æ¥é¿å…å‡æ³•æ“ä½œã€‚</p>
<h3 data-id="heading-11">æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¿­ä»£å™¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨æ ‡å‡†åº“è¿­ä»£å™¨</span>
<span class="hljs-keyword">if</span> (data.<span class="hljs-built_in">size</span>() &gt;= <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = data.<span class="hljs-built_in">begin</span>(); it != std::<span class="hljs-built_in">prev</span>(data.<span class="hljs-built_in">end</span>()); ++it) {
        <span class="hljs-built_in">processPair</span>(*it, *(std::<span class="hljs-built_in">next</span>(it)));
    }
}
</code></pre>
<p>è¿­ä»£å™¨æ–¹å¼æ›´ç¬¦åˆC++çš„æƒ¯ç”¨æ³•ã€‚</p>
<h3 data-id="heading-12">æ–¹æ¡ˆ4ï¼šä½¿ç”¨æ ‡å‡†åº“ç®—æ³•</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨æ ‡å‡†åº“ç®—æ³•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</span>
std::<span class="hljs-built_in">adjacent_difference</span>(data.<span class="hljs-built_in">begin</span>(), data.<span class="hljs-built_in">end</span>(), 
                        std::<span class="hljs-built_in">ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(std::cout, <span class="hljs-string">" "</span>));
</code></pre>
<p>å¯¹äºæŸäº›åœºæ™¯ï¼Œæ ‡å‡†åº“å·²ç»æä¾›äº†ç°æˆçš„ç®—æ³•ã€‚</p>
<h2 data-id="heading-13">é˜²å¾¡æ€§ç¼–ç¨‹çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-14">1. ä¿æŒç±»å‹ä¸€è‡´æ€§</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¥½ï¼šä½¿ç”¨ä¸€è‡´çš„size_tç±»å‹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>(); i++)

<span class="hljs-comment">// æ›´å¥½ï¼šå¦‚æœéœ€è¦å‡æ³•ï¼Œç¡®ä¿ç±»å‹ä¸€è‡´</span>
<span class="hljs-type">size_t</span> size = data.<span class="hljs-built_in">size</span>();
<span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size - <span class="hljs-number">1</span>; i++)
}
</code></pre>
<h3 data-id="heading-15">2. å¯ç”¨ç¼–è¯‘å™¨è­¦å‘Š</h3>
<p>ç°ä»£ç¼–è¯‘å™¨å¯ä»¥æ£€æµ‹åˆ°å¾ˆå¤šç±»å‹è½¬æ¢é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">g++ -Wall -Wextra -Wsign-conversion -Wsign-compare program.cpp
</code></pre>
<p>å…³é”®è­¦å‘Šé€‰é¡¹ï¼š</p>
<ul>
<li><code>-Wsign-conversion</code>ï¼šè­¦å‘Šæœ‰ç¬¦å·/æ— ç¬¦å·è½¬æ¢</li>
<li><code>-Wsign-compare</code>ï¼šè­¦å‘Šæœ‰ç¬¦å·/æ— ç¬¦å·æ¯”è¾ƒ</li>
<li><code>-Wconversion</code>ï¼šè­¦å‘Šå¯èƒ½æ”¹å˜å€¼çš„éšå¼è½¬æ¢</li>
</ul>
<h3 data-id="heading-16">3. ä½¿ç”¨é™æ€åˆ†æå·¥å…·</h3>
<p>å·¥å…·å¦‚Clang-Tidyã€CPPCheckç­‰å¯ä»¥å¸®åŠ©å‘ç°è¿™ç±»é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clang-tidy -checks=<span class="hljs-string">'*'</span> program.cpp -- -std=c++17
</code></pre>
<h3 data-id="heading-17">4. å…¨é¢çš„è¾¹ç•Œæµ‹è¯•</h3>
<p>ç¡®ä¿æµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">TEST</span>(ContainerTest, EmptyVector) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; empty_vec;
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(empty_vec));
}

<span class="hljs-built_in">TEST</span>(ContainerTest, SingleElement) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; single_vec{<span class="hljs-number">42</span>};
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(single_vec));
}

<span class="hljs-built_in">TEST</span>(ContainerTest, NormalCase) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; normal_vec{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(normal_vec));
}
</code></pre>
<h2 data-id="heading-18">æ›´å¹¿æ³›çš„é€‚ç”¨åœºæ™¯</h2>
<p>è¿™ä¸ªé—®é¢˜ä¸ä»…å‡ºç°åœ¨<code>std::vector</code>ä¸­ï¼Œè¿˜å‡ºç°åœ¨æ‰€æœ‰è¿”å›<code>size_t</code>çš„å®¹å™¨ä¸­ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::string str;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-built_in">length</span>() - <span class="hljs-number">1</span>; i++) {}  <span class="hljs-comment">// åŒæ ·çš„é—®é¢˜ï¼</span>

std::array&lt;<span class="hljs-type">int</span>, 5&gt; arr;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {}    <span class="hljs-comment">// è¿™é‡Œä¹Ÿæ˜¯ï¼</span>

<span class="hljs-comment">// ç”šè‡³è‡ªå®šä¹‰å®¹å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyContainer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> data_size; }
    <span class="hljs-comment">// ...</span>
};
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>C++çš„ç±»å‹ç³»ç»Ÿè™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå……æ»¡äº†é™·é˜±ã€‚æ— ç¬¦å·ç±»å‹ä¸æœ‰ç¬¦å·ç±»å‹çš„æ··åˆè¿ç®—å°±æ˜¯å…¶ä¸­ä¸€ä¸ªå…¸å‹çš„"å‘"ã€‚é€šè¿‡ç†è§£èƒŒåçš„è½¬æ¢è§„åˆ™ï¼Œå¹¶é‡‡ç”¨é˜²å¾¡æ€§ç¼–ç¨‹ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…è¿™ç±»éšè”½çš„bugã€‚</p>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ul>
<li>è­¦æƒ•æ— ç¬¦å·ç±»å‹çš„å‡æ³•æ“ä½œ</li>
<li>ä¿æŒè¿ç®—ä¸­çš„ç±»å‹ä¸€è‡´æ€§</li>
<li>å¯ç”¨ç¼–è¯‘å™¨è­¦å‘Šå¹¶ä½¿ç”¨é™æ€åˆ†æå·¥å…·</li>
<li>å…¨é¢æµ‹è¯•è¾¹ç•Œæƒ…å†µ</li>
<li>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ç®—æ³•å’Œè¿­ä»£å™¨</li>
</ul>
<p>è®°ä½ï¼šåœ¨C++ç¼–ç¨‹ä¸­ï¼Œæœ€å±é™©çš„bugå¾€å¾€è—åœ¨æœ€"æ˜æ˜¾"çš„ä»£ç é‡Œã€‚å¤šä¸€ä»½è°¨æ…ï¼Œå°‘ä¸€ä»½è°ƒè¯•çš„ç…ç†¬ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£]]></title>    <link>https://juejin.cn/post/7577204540417982527</link>    <guid>https://juejin.cn/post/7577204540417982527</guid>    <pubDate>2025-11-27T10:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417982527" data-draft-id="7577220965437751350" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T10:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:57:40.000Z" title="Thu Nov 27 2025 10:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ç†Ÿæ‚‰é»˜è®¤ç±»å‹è½¬æ¢ï¼ŒçœŸçš„å¾ˆå®¹æ˜“å†™å‡ºbugï¼ï¼ï¼</p>
</blockquote>
<p>åœ¨C++ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚ä¸‹é¢è¯¦ç»†è®²è§£C++ä¸­å„ç§é»˜è®¤ç±»å‹è½¬æ¢çš„è§„åˆ™å’Œæœºåˆ¶ã€‚</p>
<h2 data-id="heading-0">1. ç®—æœ¯ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-1">æ•´å‹æå‡ (Integral Promotion)</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">char</span> c = <span class="hljs-string">'A'</span>;
<span class="hljs-type">short</span> s = <span class="hljs-number">100</span>;
<span class="hljs-type">int</span> i = c + s;  <span class="hljs-comment">// charå’Œshortéƒ½æå‡ä¸ºint</span>
</code></pre>
<h3 data-id="heading-2">ç®—æœ¯è½¬æ¢è§„åˆ™</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è½¬æ¢ä¼˜å…ˆçº§ï¼šlong double &gt; double &gt; float &gt; unsigned long long &gt; long long &gt; </span>
<span class="hljs-comment">// unsigned long &gt; long &gt; unsigned int &gt; int</span>

<span class="hljs-type">int</span> i = <span class="hljs-number">10</span>;
<span class="hljs-type">double</span> d = <span class="hljs-number">3.14</span>;
<span class="hljs-type">double</span> result = i + d;  <span class="hljs-comment">// intè½¬æ¢ä¸ºdouble</span>

<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> u = <span class="hljs-number">100</span>;
<span class="hljs-type">int</span> j = <span class="hljs-number">-50</span>;
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> result2 = u + j;  <span class="hljs-comment">// intè½¬æ¢ä¸ºunsigned int</span>
</code></pre>
<h2 data-id="heading-3">2. æŒ‡é’ˆç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-4">éšå¼æŒ‡é’ˆè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ´¾ç”Ÿç±»æŒ‡é’ˆåˆ°åŸºç±»æŒ‡é’ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

Derived d;
Base* bp = &amp;d;  <span class="hljs-comment">// éšå¼å‘ä¸Šè½¬æ¢</span>

<span class="hljs-comment">// æ•°ç»„åˆ°æŒ‡é’ˆé€€åŒ–</span>
<span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>];
<span class="hljs-type">int</span>* ptr = arr;  <span class="hljs-comment">// æ•°ç»„é€€åŒ–ä¸ºæŒ‡é’ˆ</span>

<span class="hljs-comment">// 0æˆ–nullptråˆ°æŒ‡é’ˆ</span>
<span class="hljs-type">int</span>* p1 = <span class="hljs-number">0</span>;
<span class="hljs-type">int</span>* p2 = <span class="hljs-literal">nullptr</span>;

<span class="hljs-comment">// ä»»æ„æŒ‡é’ˆåˆ°void*</span>
<span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;
<span class="hljs-type">void</span>* vp = &amp;x;
</code></pre>
<h2 data-id="heading-5">3. å¼•ç”¨ç±»å‹è½¬æ¢</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>{ cout &lt;&lt; <span class="hljs-string">"Base"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"Derived"</span> &lt;&lt; endl; }
};

Derived d;
Base&amp; br = d;  <span class="hljs-comment">// æ´¾ç”Ÿç±»å¼•ç”¨åˆ°åŸºç±»å¼•ç”¨</span>
br.<span class="hljs-built_in">show</span>();     <span class="hljs-comment">// è¾“å‡º: Derived (å¤šæ€)</span>
</code></pre>
<h2 data-id="heading-6">4. é™å®šç¬¦è½¬æ¢ (Qualification Conversions)</h2>
<h3 data-id="heading-7">constè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;
<span class="hljs-type">const</span> <span class="hljs-type">int</span>* cp = &amp;x;     <span class="hljs-comment">// éconståˆ°const</span>
<span class="hljs-comment">// int* p = cp;         // é”™è¯¯: ä¸èƒ½å»æ‰consté™å®š</span>

<span class="hljs-type">const</span> <span class="hljs-type">int</span> y = <span class="hljs-number">20</span>;
<span class="hljs-comment">// int* p2 = &amp;y;        // é”™è¯¯: ä¸èƒ½å»æ‰consté™å®š</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span>* cp2 = &amp;y;    <span class="hljs-comment">// OK</span>
</code></pre>
<h3 data-id="heading-8">volatileè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> normal = <span class="hljs-number">10</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> vi = <span class="hljs-number">20</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span>* vp = &amp;normal;  <span class="hljs-comment">// évolatileåˆ°volatile</span>
<span class="hljs-comment">// int* p = &amp;vi;            // é”™è¯¯: ä¸èƒ½å»æ‰volatileé™å®š</span>
</code></pre>
<h2 data-id="heading-9">5. å¸ƒå°”è½¬æ¢</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä»¥ä¸‹æƒ…å†µä¼šéšå¼è½¬æ¢ä¸ºbool</span>
<span class="hljs-type">int</span>* ptr = <span class="hljs-literal">nullptr</span>;
<span class="hljs-keyword">if</span> (ptr) {  <span class="hljs-comment">// æŒ‡é’ˆåˆ°bool: nullptrâ†’false, å…¶ä»–â†’true</span>
    cout &lt;&lt; <span class="hljs-string">"Pointer is valid"</span> &lt;&lt; endl;
}

<span class="hljs-type">int</span> value = <span class="hljs-number">10</span>;
<span class="hljs-keyword">if</span> (value) {  <span class="hljs-comment">// ç®—æœ¯ç±»å‹åˆ°bool: 0â†’false, é0â†’true</span>
    cout &lt;&lt; <span class="hljs-string">"Value is non-zero"</span> &lt;&lt; endl;
}
</code></pre>
<h2 data-id="heading-10">6. ç”¨æˆ·å®šä¹‰ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-11">è½¬æ¢æ„é€ å‡½æ•°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyString</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">char</span>* str;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è½¬æ¢æ„é€ å‡½æ•°: const char* â†’ MyString</span>
    <span class="hljs-built_in">MyString</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* s) {
        str = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-built_in">strlen</span>(s) + <span class="hljs-number">1</span>];
        <span class="hljs-built_in">strcpy</span>(str, s);
    }
    
    ~<span class="hljs-built_in">MyString</span>() { <span class="hljs-keyword">delete</span>[] str; }
};

MyString s = <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// éšå¼è°ƒç”¨è½¬æ¢æ„é€ å‡½æ•°</span>
</code></pre>
<h3 data-id="heading-12">ç±»å‹è½¬æ¢è¿ç®—ç¬¦</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartBool</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">bool</span> value;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">SmartBool</span>(<span class="hljs-type">bool</span> b) : <span class="hljs-built_in">value</span>(b) {}
    
    <span class="hljs-comment">// ç±»å‹è½¬æ¢è¿ç®—ç¬¦: SmartBool â†’ bool</span>
    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">bool</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> value;
    }
};

SmartBool sb = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (sb) {  <span class="hljs-comment">// éšå¼è°ƒç”¨operator bool()</span>
    cout &lt;&lt; <span class="hljs-string">"SmartBool is true"</span> &lt;&lt; endl;
}
</code></pre>
<h2 data-id="heading-13">7. æ ‡å‡†è½¬æ¢åºåˆ—</h2>
<p>C++ç¼–è¯‘å™¨ä¼šå°è¯•ä»¥ä¸‹æ ‡å‡†è½¬æ¢åºåˆ—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> {};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(A a)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    B b;
    <span class="hljs-built_in">func</span>(b);  <span class="hljs-comment">// æ ‡å‡†è½¬æ¢: B â†’ A (æ´¾ç”Ÿç±»åˆ°åŸºç±»)</span>
    
    <span class="hljs-comment">// å¯èƒ½çš„è½¬æ¢åºåˆ—:</span>
    <span class="hljs-comment">// 1. ç²¾ç¡®åŒ¹é…</span>
    <span class="hljs-comment">// 2. æå‡è½¬æ¢</span>
    <span class="hljs-comment">// 3. æ ‡å‡†è½¬æ¢</span>
    <span class="hljs-comment">// 4. ç”¨æˆ·å®šä¹‰è½¬æ¢</span>
    <span class="hljs-comment">// 5. çœç•¥å·åŒ¹é…</span>
}
</code></pre>
<h2 data-id="heading-14">8. æ˜¾å¼æ§åˆ¶éšå¼è½¬æ¢</h2>
<h3 data-id="heading-15">explicitå…³é”®å­—</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExplicitClass</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">ExplicitClass</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{}  <span class="hljs-comment">// ç¦æ­¢éšå¼è½¬æ¢</span>
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">(ExplicitClass ec)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ExplicitClass ec = 10;  // é”™è¯¯: ä¸èƒ½éšå¼è½¬æ¢</span>
    <span class="hljs-function">ExplicitClass <span class="hljs-title">ec</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;      <span class="hljs-comment">// OK: ç›´æ¥åˆå§‹åŒ–</span>
    <span class="hljs-built_in">test</span>(<span class="hljs-built_in">ExplicitClass</span>(<span class="hljs-number">10</span>));   <span class="hljs-comment">// OK: æ˜¾å¼è½¬æ¢</span>
}
</code></pre>
<h3 data-id="heading-16">åˆ é™¤è½¬æ¢å‡½æ•°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NoConvert</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">NoConvert</span>(<span class="hljs-type">int</span>) {}
    
    <span class="hljs-comment">// åˆ é™¤ä¸éœ€è¦çš„è½¬æ¢</span>
    <span class="hljs-built_in">NoConvert</span>(<span class="hljs-type">double</span>) = <span class="hljs-keyword">delete</span>;
    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">bool</span><span class="hljs-params">()</span> </span>= <span class="hljs-keyword">delete</span>;
};

<span class="hljs-function">NoConvert <span class="hljs-title">nc</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;    <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// NoConvert nc(3.14); // é”™è¯¯: ä½¿ç”¨å·²åˆ é™¤çš„å‡½æ•°</span>
<span class="hljs-comment">// if (nc) {}         // é”™è¯¯: ä½¿ç”¨å·²åˆ é™¤çš„å‡½æ•°</span>
</code></pre>
<h2 data-id="heading-17">9. è½¬æ¢çš„ä¼˜å…ˆçº§å’Œæ­§ä¹‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ambiguous</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Ambiguous</span>(<span class="hljs-type">int</span> x) {}
    <span class="hljs-built_in">Ambiguous</span>(<span class="hljs-type">double</span> x) {}
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(Ambiguous a)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// func(10);     // æ­§ä¹‰: intå¯ä»¥è½¬æ¢ä¸ºintæˆ–double</span>
    <span class="hljs-built_in">func</span>(<span class="hljs-built_in">Ambiguous</span>(<span class="hljs-number">10</span>));  <span class="hljs-comment">// å¿…é¡»æ˜¾å¼æŒ‡å®š</span>
}
</code></pre>
<h2 data-id="heading-18">10. æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>é¿å…æ„å¤–çš„éšå¼è½¬æ¢</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨explicité˜²æ­¢æ„å¤–çš„æ„é€ å‡½æ•°è½¬æ¢</span>
<span class="hljs-comment">// å°å¿ƒç®—æœ¯ç±»å‹è½¬æ¢çš„ç²¾åº¦æŸå¤±</span>
</code></pre>
</li>
<li>
<p><strong>æ³¨æ„ç¬¦å·æ€§å’Œå¤§å°</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> u = <span class="hljs-number">10</span>;
<span class="hljs-type">int</span> i = <span class="hljs-number">-5</span>;
<span class="hljs-keyword">if</span> (u &gt; i) {  <span class="hljs-comment">// iè½¬æ¢ä¸ºunsigned int, ç»“æœå¯èƒ½å‡ºä¹æ„æ–™</span>
    cout &lt;&lt; <span class="hljs-string">"Unexpected result!"</span> &lt;&lt; endl;
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨static_castè¿›è¡Œæ˜¾å¼è½¬æ¢</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">double</span> d = <span class="hljs-number">3.14</span>;
<span class="hljs-type">int</span> i = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(d);  <span class="hljs-comment">// æ˜ç¡®çš„æ„å›¾</span>
</code></pre>
</li>
</ol>
<p>ç†è§£C++çš„ç±»å‹è½¬æ¢è§„åˆ™å¯¹äºç¼–å†™å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ã€‚åœ¨å¯èƒ½äº§ç”Ÿæ­§ä¹‰æˆ–æ„å¤–è¡Œä¸ºçš„åœ°æ–¹ï¼Œå»ºè®®ä½¿ç”¨æ˜¾å¼è½¬æ¢æ¥æ˜ç¡®æ„å›¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·]]></title>    <link>https://juejin.cn/post/7577215663967420458</link>    <guid>https://juejin.cn/post/7577215663967420458</guid>    <pubDate>2025-11-27T09:02:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663967420458" data-draft-id="7577215663967387690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·"/> <meta itemprop="keywords" content="åç«¯,è¿œç¨‹å·¥ä½œ,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:02:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:02:42.000Z" title="Thu Nov 27 2025 09:02:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç°åœ¨ä¸å°‘å¼€å‘å›¢é˜Ÿä¼šé€‰æ‹©è¿œç¨‹åŠå…¬ï¼Œä½†ä»–ä»¬çš„åä½œæ•ˆç‡é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚ä»‹ç»å‡ æ¬¾å¥½ç”¨çš„è¿œç¨‹åä½œå·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-0">ç›´å‡»å¼€å‘æ ¸å¿ƒï¼šä»ç¯å¢ƒåˆ°ç¼–ç çš„æ— ç¼åä½œ</h3>
<p>å¯¹å¼€å‘è€…æ¥è¯´ï¼Œæœ€é«˜æ•ˆçš„åä½œï¼Œå°±æ˜¯èƒ½è®©å¤§å®¶åƒååœ¨åŒä¸€é—´åŠå…¬å®¤é‡Œä¸€æ ·ï¼Œé¢å¯¹åŒæ ·çš„ç¯å¢ƒã€åŒæ ·çš„ä»£ç ï¼Œé¡ºç•…åœ°æ²Ÿé€šã€‚ä¸‹é¢è¿™å‡ ä¸ªå·¥å…·ï¼Œå°±æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p>
<h4 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">ServBay</a>ï¼šå¯¹é½å›¢é˜Ÿå¼€å‘ç¯å¢ƒçš„é¢—ç²’åº¦</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d0fd44ddff4516b14577392afcfb47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=ZGnJ4sejl1P6BFljDCOl6NOOJnM%3D" alt="" loading="lazy"/></p>
<p>â€œæˆ‘ç”µè„‘ä¸Šè·‘å¾—å¥½å¥½çš„å•Šï¼â€ è¿™å¥è¯ä½ è‚¯å®šä¸é™Œç”Ÿã€‚ä¸€ä¸ªå›¢é˜Ÿé‡Œï¼Œè€å¼ ç”¨ PHP 8.1ï¼Œè€æç”¨ 8.2ï¼Œè€å¤–çš„ Node.js è¿˜æ˜¯æ—§ç‰ˆæœ¬ï¼Œå…‰æ˜¯è§£å†³è¿™äº›ç¯å¢ƒå·®å¼‚å¸¦æ¥çš„ bugï¼Œå°±èƒ½è€—è´¹æ‰å¤§é‡æ—¶é—´ã€‚</p>
<p>ServBayå°±æ˜¯è§£å†³è¿™äº›é—®é¢˜è€Œå­˜åœ¨ã€‚</p>
<p>ServBay æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">æœ¬åœ° Web å¼€å‘ç¯å¢ƒé›†æˆå·¥å…·</a>ï¼Œæ”¯æŒ PHPã€Node.jsã€Pythonã€Goã€Java ç­‰å„ç§è¯­è¨€å’Œæ•°æ®åº“ã€‚ä½†å®ƒçœŸæ­£è®©æˆ‘è§‰å¾—æƒŠè‰³çš„ï¼Œæ˜¯å®ƒçš„å›¢é˜Ÿåä½œåŠŸèƒ½ã€‚</p>
<p>å®ƒé€šè¿‡ <code>.servbay.config</code> çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠå›¢é˜Ÿå¼€å‘ç¯å¢ƒä¸ä¸€è‡´è¿™ä¸ªéš¾é¢˜ç»™è§£å†³äº†ã€‚</p>
<p>é€šè¿‡ <code>.servbay.config</code> ï¼Œå›¢é˜Ÿè´Ÿè´£äººå¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œï¼Œç²¾ç¡®æŒ‡å®šé¡¹ç›®éœ€è¦ç”¨åˆ°çš„ Python ç‰ˆæœ¬ã€Node.js ç‰ˆæœ¬æˆ–è€…å…¶ä»–çš„è¯­è¨€ï¼Œç”šè‡³æ˜¯ Node.js åŒ…ç®¡ç†å™¨çš„ä»“åº“åœ°å€å’Œç¼“å­˜ç›®å½•ã€‚ç„¶åæŠŠè¿™ä¸ªæ–‡ä»¶éšä»£ç ä¸€èµ·æäº¤åˆ° Git ä»“åº“ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå›¢é˜Ÿåä½œçš„ä½“éªŒå°±å®Œå…¨ä¸åŒäº†ï¼š</p>
<ul>
<li><strong>å‘Šåˆ«â€œæˆ‘è¿™å„¿æ²¡é—®é¢˜â€çš„é—®é¢˜</strong>ï¼šå›¢é˜Ÿé‡Œæ‰€æœ‰äººï¼Œåªè¦æ‹‰ä¸‹ä»£ç ï¼ŒServBay å°±ä¼šè‡ªåŠ¨æ ¹æ® <code>.servbay.config</code> æ–‡ä»¶æ¥åˆ‡æ¢å’Œé…ç½®ç¯å¢ƒã€‚ç¡®ä¿äº†ä»å¼€å‘ã€æµ‹è¯•åˆ°æœ€ç»ˆä¸Šçº¿ï¼Œç¯å¢ƒéƒ½æ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚</li>
<li><strong>æ–°äººå…¥èŒé€Ÿåº¦å¿«åˆ°é£èµ·</strong>ï¼šæ–°äººæ¥äº†ï¼Œä¸ç”¨å†å¯¹ç€é•¿é•¿çš„æ–‡æ¡£æŠ˜è…¾åŠå¤©ç¯å¢ƒã€‚ç›´æ¥ç”¨å›¢é˜Ÿçš„ <code>.servbay.config</code> æ–‡ä»¶ï¼Œå‡ åˆ†é’Ÿå°±èƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œé©¬ä¸Šå°±èƒ½æŠ•å…¥å·¥ä½œã€‚</li>
<li><strong>ç¯å¢ƒç®¡ç†ä¸å†æ˜¯æ•£è£…çš„</strong>ï¼šå›¢é˜Ÿçš„æŠ€æœ¯è´Ÿè´£äººå¯ä»¥ç»Ÿä¸€ç®¡ç†å’Œæ›´æ–°è¿™ä»½é…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚é¡¹ç›®éœ€è¦å‡çº§è¯­è¨€ç‰ˆæœ¬ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶ï¼Œå›¢é˜Ÿæˆå‘˜ä¸‹æ¬¡æ‹‰å–ä»£ç æ—¶ï¼Œç¯å¢ƒå°±è‡ªåŠ¨åŒæ­¥äº†ã€‚</li>
<li><strong>å¤§å®¶èƒ½æ›´ä¸“æ³¨äºå†™ä»£ç </strong>ï¼šç¯å¢ƒç»Ÿä¸€äº†ï¼Œå› ä¸ºç¯å¢ƒé—®é¢˜å¯¼è‡´çš„å†²çªå’Œé˜»å¡å°±å°‘äº†ã€‚å¼€å‘è€…å¯ä»¥æŠŠç²¾åŠ›éƒ½æ”¾åœ¨ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œåä½œæ•ˆç‡è‡ªç„¶å°±é«˜äº†ã€‚</li>
</ul>
<p>ServBayçš„è¿™ä¸ªåŠŸèƒ½ï¼Œä¸ç®¡æ˜¯è¿œç¨‹å·¥ä½œè¿˜æ˜¯çº¿ä¸‹å·¥ä½œï¼Œéƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2Fblogs%2F2017%2F11%2F15%2Flive-share" target="_blank" title="https://code.visualstudio.com/blogs/2017/11/15/live-share" ref="nofollow noopener noreferrer">Live Share</a>ï¼šèº«ä¸´å…¶å¢ƒçš„è¿œç¨‹ç»“å¯¹ç¼–ç¨‹</h4>
<p>ç¯å¢ƒç»Ÿä¸€äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ€ä¹ˆé«˜æ•ˆåœ°ä¸€èµ·å†™ä»£ç ã€‚Live Share æ˜¯ VS Code çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒèƒ½è®©å¼€å‘è€…æŠŠè‡ªå·±çš„ç¼–è¾‘å™¨åˆ†äº«ç»™é˜Ÿå‹ã€‚é˜Ÿå‹å¯ä»¥ç›´æ¥è¿›å…¥ä½ çš„ç¼–è¾‘å™¨ï¼Œå®æ—¶çœ‹åˆ°ä½ çš„ä»£ç ï¼Œå’Œä½ ä¸€èµ·ç¼–è¾‘ã€è°ƒè¯•ï¼Œç”šè‡³å…±äº«ä½ çš„ç»ˆç«¯ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹éå¸¸æµç•…ï¼Œå°±åƒä»–ååœ¨ä½ æ—è¾¹ä¸€æ ·ã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGruntfuggly%2Ftodo-tree" target="_blank" title="https://github.com/Gruntfuggly/todo-tree" ref="nofollow noopener noreferrer">Todo Tree</a>ï¼šä»£ç ä¸­çš„å¼‚æ­¥å¤‡å¿˜å½•</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26ca1444f1943dfbbc67e64c7920b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=NU8X4%2BsTDrByAYEJ4UHcgKQQoMA%3D" alt="" loading="lazy"/></p>
<p>ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½éœ€è¦æ‹‰ç€äººå®æ—¶æ²Ÿé€šã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œå‘ç°ä¸€ä¸ªå°bugï¼Œå¯ä»¥å…ˆè®°ä¸‹æ¥ã€‚Todo Tree è¿™ä¸ª VS Code æ’ä»¶å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚</p>
<p>å®ƒèƒ½æ‰«ææ•´ä¸ªé¡¹ç›®ä»£ç é‡Œçš„ <code>TODO</code>ã€<code>FIXME</code> ç­‰æ³¨é‡Šï¼Œå¹¶æŠŠå®ƒä»¬é›†ä¸­åœ¨ä¸€ä¸ªè§†å›¾é‡Œå±•ç¤ºã€‚è¿™æ ·ï¼Œåœ¨å†™ä»£ç æ—¶éšæ‰‹è®°ä¸‹çš„å¾…åŠäº‹é¡¹å°±ä¸ä¼šè¢«é—å¿˜ã€‚åœ¨ Code Review çš„æ—¶å€™ï¼Œå›¢é˜Ÿæˆå‘˜ä¹Ÿèƒ½æ¸…æ™°åœ°çœ‹åˆ°è¿˜æœ‰å“ªäº›åœ°æ–¹éœ€è¦å®Œå–„ï¼Œç®—æ˜¯ä¸€ç§è½»é‡çº§çš„ã€ä»£ç å±‚é¢çš„å¼‚æ­¥ååŒã€‚</p>
<h3 data-id="heading-4">ä»»åŠ¡ä¸é¡¹ç›®ç®¡ç†ï¼šä¸ºå¼€å‘æµç¨‹æœåŠ¡çš„éª¨æ¶</h3>
<p>ä»£ç å±‚é¢çš„åä½œç†é¡ºäº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹æ›´é«˜ä¸€å±‚çš„é¡¹ç›®ç®¡ç†ã€‚è¿™é‡Œçš„å·¥å…·é€‰æ‹©å¾ˆå¤šï¼Œå®ƒä»¬å„æœ‰ä¾§é‡ï¼Œé€‚åˆä¸åŒé£æ ¼çš„å›¢é˜Ÿã€‚</p>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Flinear.app%2F" target="_blank" title="https://linear.app/" ref="nofollow noopener noreferrer">Linear</a>ï¼šè¿½æ±‚æè‡´é€Ÿåº¦çš„å¼€å‘è€…é¦–é€‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6efc5bc49bd460a9129b40d94ee8abf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=mpx0ELjmDCwjvnrh9rCDh6y%2BSGc%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å—å¤Ÿäº† Jira çš„è‡ƒè‚¿å’Œå¡é¡¿ï¼ŒLinear ç»å¯¹èƒ½è®©ä½ çœ¼å‰ä¸€äº®ã€‚å®ƒçš„ç•Œé¢æç®€ã€å“åº”é£å¿«ï¼Œæ‰€æœ‰æ“ä½œåŸºæœ¬éƒ½èƒ½ç”¨é”®ç›˜å¿«æ·é”®å®Œæˆã€‚å®ƒå’Œ GitHub çš„é›†æˆåšå¾—éå¸¸å¥½ï¼Œä»£ç æäº¤èƒ½è‡ªåŠ¨æ›´æ–°ä»»åŠ¡çŠ¶æ€ã€‚ç”¨å®ƒæ¥ç®¡ç† Sprint å’Œ Bugï¼Œæ„Ÿè§‰å°±åƒåœ¨å†™ä»£ç ä¸€æ ·æµç•…ã€‚</p>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Ftrello.com%2F" target="_blank" title="https://trello.com/" ref="nofollow noopener noreferrer">Trello</a>ï¼šç®€å•ç›´è§‚çš„çœ‹æ¿</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5098b3c992ad4b5fba1051bff91af2f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=Wt%2BA6I9g2NPJbKD7jn3Yjc%2FVMZ4%3D" alt="" loading="lazy"/></p>
<p>Trello å°±åƒä¸€å—ç™½æ¿å’Œä¸€å †ä¾¿åˆ©è´´ã€‚å®ƒçš„æ ¸å¿ƒå°±æ˜¯çœ‹æ¿ï¼ˆBoardï¼‰ã€åˆ—è¡¨ï¼ˆListï¼‰ã€å¡ç‰‡ï¼ˆCardï¼‰ã€‚æ“ä½œç®€å•ç›´è§‚ï¼Œå­¦ä¹ æˆæœ¬å‡ ä¹ä¸ºé›¶ã€‚éå¸¸é€‚åˆè§„æ¨¡ä¸å¤§ã€æµç¨‹ä¸å¤æ‚çš„å›¢é˜Ÿï¼Œæˆ–è€…ç”¨æ¥ç®¡ç†ä¸€äº›ä¸´æ—¶çš„ã€éæ ¸å¿ƒçš„é¡¹ç›®ã€‚</p>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fmonday.com%2F" target="_blank" title="https://monday.com/" ref="nofollow noopener noreferrer">Monday</a>ï¼šé«˜åº¦å®šåˆ¶åŒ–çš„é¡¹ç›®å·¥å…·</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0440d1d54b241ecadfdfb76d7203582~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=eKuNsDDgmlt%2BZiEOt0QLhsuBVO0%3D" alt="" loading="lazy"/></p>
<p>Monday æ›´åƒä¸€ä¸ªå·¥ä½œæ“ä½œç³»ç»Ÿã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºé«˜åº¦çš„å¯å®šåˆ¶æ€§ï¼Œä½ å¯ä»¥ç”¨å®ƒæ­å»ºå‡ºå„ç§å„æ ·çš„å·¥ä½œæµã€‚å®ƒçš„å„ç§è§†å›¾ï¼ˆæ—¶é—´çº¿ã€å›¾è¡¨ï¼‰éå¸¸ä¸°å¯Œï¼Œå¾ˆé€‚åˆéœ€è¦å‘ç®¡ç†å±‚æˆ–éæŠ€æœ¯åŒäº‹å±•ç¤ºé¡¹ç›®è¿›åº¦çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.teamcamp.app%2F" target="_blank" title="https://www.teamcamp.app/" ref="nofollow noopener noreferrer">Teamcamp</a>ï¼šæ•´åˆä»£ç ä¸ä»»åŠ¡çš„ä¸€ä½“åŒ–å¹³å°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2165b0336a7f46078001fccf541ec6e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=pEuhq67X8odcTA4RAeOJD1NQEms%3D" alt="" loading="lazy"/></p>
<p>Teamcamp çš„æ€è·¯æ˜¯æŠŠé¡¹ç›®ç®¡ç†å’Œä»£ç å·¥ä½œæµæ›´ç´§å¯†åœ°ç»“åˆèµ·æ¥ã€‚æ¯”å¦‚å®ƒçš„ä¸€ä¸ªç‰¹è‰²æ˜¯ Git æäº¤å¯ä»¥è‡ªåŠ¨æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼Œå‡å°‘äº†å¼€å‘è€…åœ¨ä»»åŠ¡æ¿å’Œä»£ç åº“ä¹‹é—´æ¥å›åˆ‡æ¢çš„æ‰‹åŠ¨æ“ä½œã€‚å¦‚æœæƒ³è¦ä»»åŠ¡çŠ¶æ€èƒ½å’Œä»£ç è¿›åº¦å¼ºç»‘å®šï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-9">æ—¶é—´ä¸æ•ˆç‡è¿½è¸ª</h3>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fclockify.me%2F" target="_blank" title="https://clockify.me/" ref="nofollow noopener noreferrer">Clockify</a>ï¼šç®€å•ç›´æ¥çš„æ—¶é—´è®°å½•å·¥å…·</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2a9937d241449fdad7ef01d4d55e728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=nFqE9JzeCd1b%2Bys3iGW5rXQ%2FDMc%3D" alt="" loading="lazy"/></p>
<p>è¿œç¨‹å·¥ä½œï¼Œæœ‰æ—¶å€™éœ€è¦è®°å½•ä¸€ä¸‹è‡ªå·±åœ¨å„ä¸ªé¡¹ç›®ä¸ŠèŠ±äº†å¤šå°‘æ—¶é—´ï¼Œä»¥ä¾¿è¯„ä¼°å·¥ä½œé‡æˆ–è¿›è¡Œé¡¹ç›®å¤ç›˜ã€‚Clockify æ˜¯ä¸€ä¸ªå…è´¹åˆç®€å•çš„æ—¶é—´è¿½è¸ªå·¥å…·ã€‚å®ƒæ²¡ä»€ä¹ˆå­¦ä¹ æˆæœ¬ï¼Œå¯ä»¥æŒ‰é¡¹ç›®ã€æŒ‰ä»»åŠ¡æ¥è®°å½•æ—¶é—´ï¼Œä¹Ÿèƒ½ç”Ÿæˆç®€å•çš„æŠ¥è¡¨ã€‚å¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªä¸æ‰“æ‰°ã€ä¸å¤æ‚çš„å·¥å…·æ¥è®°å½•å·¥æ—¶ï¼Œå®ƒè¶³å¤Ÿäº†ã€‚</p>
<h3 data-id="heading-11">æ€»ç»“ä¸€ä¸‹</h3>
<p>ä¸€ä¸ªå¥½çš„è¿œç¨‹åä½œå·¥å…·æ ˆï¼Œæœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸï¼š</p>
<ul>
<li>
<p><strong>ServBay</strong> è´Ÿè´£æ‰“å¥½åœ°åŸºï¼Œç»Ÿä¸€å¼€å‘ç¯å¢ƒã€‚</p>
</li>
<li>
<p><strong>Linearã€Trelloã€Mondayã€Teamcamp</strong> è´Ÿè´£æ­å»ºé¡¹ç›®ç®¡ç†çš„éª¨æ¶ï¼Œé£æ ¼å„å¼‚ï¼ŒæŒ‰éœ€ä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>Live Share</strong> å’Œ <strong>Todo</strong> <strong>Tree</strong> è´Ÿè´£å¡«å……ä»£ç åä½œçš„è¡€è‚‰ï¼Œä¸€ä¸ªå®æ—¶ã€ä¸€ä¸ªå¼‚æ­¥ã€‚</p>
</li>
<li>
<p><strong>Clockify</strong> è´Ÿè´£æœ€åçš„åº¦é‡å’Œå¤ç›˜ã€‚</p>
</li>
</ul>
<p>å…ˆæŠŠåœ°åŸºæ‰“ç‰¢ï¼Œä¸Šå±‚çš„åä½œæ‰ä¼šäº‹åŠåŠŸå€ã€‚å¸Œæœ›è¿™äº›å·¥å…·èƒ½å¸®åˆ°ä½ å’Œä½ çš„å›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™]]></title>    <link>https://juejin.cn/post/7577204540417228863</link>    <guid>https://juejin.cn/post/7577204540417228863</guid>    <pubDate>2025-11-27T09:08:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417228863" data-draft-id="7577220965437079606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-27T09:08:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Databend"/> <meta itemprop="url" content="https://juejin.cn/user/4477651847485534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4477651847485534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Databend
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:08:58.000Z" title="Thu Nov 27 2025 09:08:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®æ´ªæµå¥”æ¶Œï¼ŒAI æµªæ½®æ¾æ¹ƒã€‚å½“ Data ä¸ AI æ·±åº¦äº¤ç»‡ï¼Œå¦‚ä½•æ„å»ºé¢å‘æœªæ¥çš„æŠ€æœ¯æ ˆï¼Ÿå¦‚ä½•åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ„æ•°æ®åˆ†æä¸šåŠ¡ï¼Ÿ11æœˆ29æ—¥ã€Œå¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™ã€ åº”åŠ¿è€Œæ¥ï¼æˆ‘ä»¬åŠ›é‚€å¤šä½æ¥è‡ªæ˜æ˜Ÿå¼€æºé¡¹ç›®ä¸ä¸€çº¿å¤§å‚çš„èµ„æ·±ä¸“å®¶ï¼Œä¸ºæ‚¨å…¨æ™¯è§£ææ•°æ®å¹³å°æ¶æ„ã€AI åˆ›æ–°å®è·µä¸èŒä¸šå‘å±•è·¯å¾„ï¼Œå¼€å¯ä¸€åœºæ€æƒ³ä¸æŠ€æœ¯çš„ç¢°æ’ã€‚</p>
<p>æœ¬æ¬¡ Meetupï¼Œæˆ‘ä»¬è£å¹¸åœ°é‚€è¯·åˆ° Databend Labs è”åˆåˆ›å§‹äººå´ç‚³é”¡ã€æ²‰æµ¸å¼ç¿»è¯‘æŠ€æœ¯ä¸“å®¶é™ˆç¦ã€æ•°æ®å¹³å°æ¶æ„å¸ˆé‚µé”‹ã€å¹³å‡¯æ˜Ÿè¾°ï¼ˆTiDBï¼‰è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆåˆ˜æºã€Airwallex ç©ºä¸­äº‘æ±‡æ•°æ®åº“æ¶æ„å¸ˆèµµé£ç¥¥ï¼Œä»–ä»¬å°†å¸¦æ¥å…¼å…·æ·±åº¦ä¸å¹¿åº¦çš„å¹²è´§åˆ†äº«ï¼Œä¸ºæ‚¨å‘ˆç°ä¸€åœº Data + AI çš„å®è·µã€‚</p>
<h2 data-id="heading-0">æ´»åŠ¨ä¿¡æ¯</h2>
<p>â°Â æ´»åŠ¨æ—¶é—´ï¼š2025 å¹´Â 11 æœˆ 29 æ—¥ï¼ˆå‘¨å…­ï¼‰13:30 - 17:30</p>
<p>ğŸ“Â æ´»åŠ¨åœ°ç‚¹ï¼šä¸Šæµ·å¸‚é»„æµ¦åŒºä¸­æµ·å›½é™…ä¸­å¿ƒ A åº§ 21 æ¥¼Â </p>
<p>ğŸ”—Â æŠ¥åæ–¹å¼ï¼šï¼ˆæ‰«ææµ·æŠ¥äºŒç»´ç ï¼‰çº¿ä¸‹å‚ä¸é‡‡å–å®¡æ ¸åˆ¶ (100 äºº)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/124728b4348f4bbd9806b0c14104e8e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839337&amp;x-signature=Yw%2FRhuOP3GIs7koFqUSbE3%2BHeUQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">æ´»åŠ¨äº®ç‚¹</h2>
<p>ä¸€çº¿å®æˆ˜ï¼šÂ å˜‰å®¾æ¥è‡ªä¸šå†…çŸ¥åä¼ä¸šåŠå¼€æºé¡¹ç›®ï¼Œåˆ†äº«å†…å®¹æºäºçœŸå®ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>å…¨æ™¯è§†è§’ï¼šÂ è¦†ç›–ä»å¼€æºå·¥å…·ã€AI äº§å“åˆ°ä¼ä¸šçº§å¹³å°çš„å®Œæ•´äº§ä¸šé“¾è§†è§’ã€‚</p>
<p>æ·±åº¦äº’åŠ¨ï¼šÂ åœ†æ¡Œè®¨è®ºä¸äº¤æµç¯èŠ‚ï¼Œè®©æ‚¨æœ‰æœºä¼šä¸å˜‰å®¾ç›´æ¥å¯¹è¯ã€‚</p>
<p>é«˜ç«¯äººè„‰ï¼šÂ ç»“è¯†ä¼—å¤šå¯¹ Data å’Œ AI å……æ»¡çƒ­æƒ…çš„åŒé“ä¸­äººï¼Œæ‹“å±•ä¸“ä¸šäººè„‰åœˆã€‚</p>
<h2 data-id="heading-2">æ´»åŠ¨å‚ä¸å¥–åŠ±</h2>
<p>ğŸ ä¸°åšå‚ä¼šç¦åˆ©ï¼šDatabend ç¤¾åŒºä¸°å¯Œå‘¨è¾¹,å¦æœ‰æŠ€æœ¯èµ„æ–™ç­‰ä½ æ¥æ‹¿~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b583891dbd246d0bdb544ec905eb85b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839337&amp;x-signature=oMMykhkhFrk8VEEPQ3FZcL0s9mI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">ç«‹å³è¡ŒåŠ¨ï¼Œé”å®šå¸­ä½ï¼</h3>
<ul>
<li>æ´»åŠ¨ä¸»é¢˜ï¼š DATA AI Databend Meetup</li>
<li>æ´»åŠ¨å½¢å¼ï¼š çº¿ä¸‹åˆ†äº« + åœ†æ¡Œè®¨è®º + è‡ªç”±äº¤æµ</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯æ•°æ®å·¥ç¨‹å¸ˆã€AI å¼€å‘è€…ã€æŠ€æœ¯è´Ÿè´£äººï¼Œè¿˜æ˜¯å¯¹æ•°æ®æ™ºèƒ½å……æ»¡å¥½å¥‡çš„å­¦ä¹ è€…ï¼Œè¿™éƒ½å°†æ˜¯ä¸€åœºæ”¶è·æ»¡æ»¡çš„ç››ä¼šã€‚å¸­ä½æœ‰é™ï¼Œè¯·ç«‹å³æŠ¥åï¼Œä¸æˆ‘ä»¬ä¸€åŒç«™åœ¨æŠ€æœ¯æµªæ½®ä¹‹å·…ï¼Œå…±ç»˜ Data ä¸ AI çš„æœªæ¥å›¾æ™¯ï¼</p>
<h2 data-id="heading-4">å…³äº Databend</h2>
<p>Databend æ˜¯ä¸€æ¬¾ 100%Â RustÂ æ„å»ºã€é¢å‘å¯¹è±¡å­˜å‚¨è®¾è®¡çš„æ–°ä¸€ä»£å¼€æºäº‘åŸç”Ÿæ•°æ®ä»“åº“ï¼Œç»Ÿä¸€æ”¯æŒÂ BIÂ åˆ†æã€AI å‘é‡ã€å…¨æ–‡æ£€ç´¢åŠåœ°ç†ç©ºé—´åˆ†æç­‰å¤šæ¨¡æ€èƒ½åŠ›ã€‚æœŸå¾…æ‚¨çš„å…³æ³¨ï¼Œä¸€èµ·æ‰“é€ æ–°ä¸€ä»£å¼€æº AI + Data Cloudã€‚</p>
<p>ğŸ‘¨â€ğŸ’»â€Â Databend Cloudï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatabend.cn" target="_blank" title="https://databend.cn" ref="nofollow noopener noreferrer">databend.cn</a></p>
<p>ğŸ“–Â Databend æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn" target="_blank" title="https://docs.databend.cn" ref="nofollow noopener noreferrer">docs.databend.cn</a></p>
<p>ğŸ’»Â Wechatï¼šDatabend</p>
<p>âœ¨Â GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" target="_blank" title="https://github.com/databendlabs/databend" ref="nofollow noopener noreferrer">github.com/databendlabâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7577215663967535146</link>    <guid>https://juejin.cn/post/7577215663967535146</guid>    <pubDate>2025-11-27T09:10:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663967535146" data-draft-id="7577198193215094827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:10:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:10:13.000Z" title="Thu Nov 27 2025 09:10:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è®¸å¤šå›¢é˜Ÿä¸­ï¼ŒiOS åŠ å›ºå¾€å¾€æ˜¯æ„å»ºé“¾è·¯ä¸­è¢«å¿½ç•¥çš„ä¸€ç¯ã€‚
è¦ä¹ˆä¾èµ–äººå·¥æ“ä½œï¼Œè¦ä¹ˆèµ°ä¸“äººæ‰§è¡Œï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>æ··æ·†ç­–ç•¥ä¸ç»Ÿä¸€</li>
<li>æŸäº›æ¸ é“åŒ…å¿˜è®°åŠ å›º</li>
<li>æ‰‹å·¥æ“ä½œæ˜“å‡ºé”™</li>
<li>ä¸åŒæ„å»ºä¹‹é—´æ˜ å°„è¡¨ä¸ä¸€è‡´</li>
<li>å‘å¸ƒæµç¨‹ä¸å¯å®¡è®¡ã€ä¸å¯è¿½è¸ª</li>
<li>å®¡æ ¸å‰çš„åŠ å›ºæ­¥éª¤ä¸´æ—¶è¡¥æ•‘ã€å‹åŠ›å·¨å¤§</li>
</ul>
<p>è€Œéšç€ <strong>Ipa Guard CLI</strong> æ”¯æŒå‘½ä»¤è¡Œæ“ä½œã€æ”¯æŒç¬¦å·æ–‡ä»¶ã€å¯æ§æ··æ·†ç­–ç•¥ï¼ŒiOS åŠ å›ºç»ˆäºå¯ä»¥è¢«æ­£å¼çº³å…¥ <strong>CI/CD æµç¨‹</strong>ï¼Œå®ç°ï¼š</p>
<p>è‡ªåŠ¨åŠ å›º
è‡ªåŠ¨æµ‹è¯•
è‡ªåŠ¨é‡ç­¾
è‡ªåŠ¨ä¸Šä¼ 
è‡ªåŠ¨å½’æ¡£æ··æ·†æ˜ å°„è¡¨
å¯å›æ»šã€å¯å®¡è®¡ã€å¯è¿½è¸ª</p>
<p>æœ¬æ–‡å°†ä» DevOps å®è·µè§’åº¦ä»‹ç»å¦‚ä½•è®© <strong>Ipa Guard + CI/CD</strong> å½¢æˆå®Œæ•´é—­ç¯ï¼Œå¹¶ç»“åˆ MobSFã€kxsignã€Frida/Hopperã€KMS ç­‰å·¥å…·ç»™å‡ºæ•´å¥—è‡ªåŠ¨åŒ–æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦æŠŠ Ipa Guard é›†æˆåˆ° CI/CDï¼Ÿ</h2>
<h3 data-id="heading-1"><strong>1. æ¶ˆé™¤äººå·¥æ­¥éª¤ï¼Œé™ä½é£é™©</strong></h3>
<p>æ‰‹åŠ¨æ··æ·†å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯å¤šæ¸ é“ã€å¤šç‰ˆæœ¬ã€å¤šå›¢é˜Ÿã€‚</p>
<h3 data-id="heading-2"><strong>2. åŠ å›ºç­–ç•¥å¯æ§ã€å¯æ²»ç†</strong></h3>
<p>ä½¿ç”¨ sym.jsonï¼Œç¡®ä¿æ¯æ¬¡æ··æ·†ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-3"><strong>3. æ˜ å°„è¡¨è‡ªåŠ¨å½’æ¡£</strong></h3>
<p>ç”¨äºå´©æºƒç¬¦å·åŒ–ã€é—®é¢˜å›æº¯ä¸å®¡è®¡ã€‚</p>
<h3 data-id="heading-4"><strong>4. æ‹‰é½å¤šä¸ªç‰ˆæœ¬æµç¨‹</strong></h3>
<p>ä¸»åŒ…ã€æ¸ é“åŒ…ã€å“ç‰Œå®šåˆ¶åŒ…éƒ½å¯ç»Ÿä¸€å¤„ç†ã€‚</p>
<h3 data-id="heading-5"><strong>5. å½¢æˆå¯è¯å®çš„å®‰å…¨é“¾è·¯</strong></h3>
<p>å¯¹å¤–åˆè§„ä¸å†…éƒ¨å®¡è®¡æ›´å‹å¥½ã€‚</p>
<p>å› æ­¤ï¼ŒIpa Guard CLI çš„å‘½ä»¤è¡Œèƒ½åŠ›ä¸ºæ„å»ºæµæ°´çº¿å¥ å®šäº†æœ€ä½³åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€CI/CD ä¸­éœ€è¦çš„å·¥å…·çŸ©é˜µï¼ˆå…¨é“¾è·¯è‡ªåŠ¨åŒ–ï¼‰</h2>























































<table><thead><tr><th>é˜¶æ®µ</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>é™æ€åˆ†æ</td><td>MobSFã€class-dump</td><td>è‡ªåŠ¨è¯†åˆ«æš´éœ²ç¬¦å·ï¼Œè¾…åŠ©ç”Ÿæˆç™½åå•</td></tr><tr><td>IPA è§£æ</td><td><strong>Ipa Guard CLI parse</strong></td><td>å¯¼å‡ºç¬¦å·æ–‡ä»¶ sym.json</td></tr><tr><td>ç­–ç•¥ç”Ÿæˆ</td><td>è‡ªå®šä¹‰è„šæœ¬</td><td>è‡ªåŠ¨åˆå¹¶ç™½åå•æˆ–ç­–ç•¥æ¨¡æ¿</td></tr><tr><td>IPA åŠ å›º</td><td><strong>Ipa Guard CLI protect</strong></td><td>è‡ªåŠ¨æ··æ·†ã€èµ„æºæ‰°åŠ¨ã€MD5 ä¿®æ”¹</td></tr><tr><td>é‡ç­¾å</td><td>kxsign</td><td>ç”Ÿæˆå¯å®‰è£… ipaï¼ˆDev / Adhoc / Releaseï¼‰</td></tr><tr><td>è‡ªåŠ¨æµ‹è¯•</td><td>XCTest / UI è‡ªåŠ¨åŒ– / çœŸæœºç»„</td><td>éªŒè¯åŠ å›ºåç¨³å®šæ€§</td></tr><tr><td>å®‰å…¨éªŒè¯</td><td>Fridaã€Hopper</td><td>è‡ªåŠ¨æ£€æŸ¥å…³é”®æ–¹æ³•æ˜¯å¦è¢«æ··æ·†</td></tr><tr><td>å½’æ¡£</td><td>KMS / S3 / å†…ç½‘æ–‡ä»¶åº“</td><td>ä¿å­˜æ˜ å°„è¡¨ã€äº§ç‰©ä¸å®¡è®¡æ—¥å¿—</td></tr><tr><td>åˆ†å‘</td><td>Fastlane / GitLab Runner / Jenkins</td><td>è‡ªåŠ¨ä¸Šä¼  TestFlight / å†…éƒ¨åˆ†å‘å¹³å°</td></tr></tbody></table>
<p>è¿™æ˜¯ä¸€å¥—å¯æ§ã€å¯ç»´æŠ¤çš„ iOS åŠ å›ºæµæ°´çº¿ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€Ipa Guard åœ¨ CI/CD ä¸­çš„å®Œæ•´é›†æˆæµç¨‹</h2>
<p>ä¸‹é¢ä»¥ Jenkins/GitLab CI ä¸ºä¾‹ä»‹ç»æµæ°´çº¿ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>â‘  Step 1ï¼šç”ŸæˆåŸºç¡€ IPA</strong></h2>
<p>æ¥è‡ªï¼š</p>
<ul>
<li>Xcode æ„å»ºï¼ˆä¸»åŒ…ï¼‰</li>
<li>å¤–åŒ…æäº¤çš„ IPA</li>
<li>æ¸ é“åŒ…</li>
<li>è‡ªåŠ¨æ„å»ºæµç¨‹</li>
</ul>
<p>å°† IPA å­˜æ”¾åˆ° <code>$WORKSPACE/app.ipa</code></p>
<hr/>
<h2 data-id="heading-9"><strong>â‘¡ Step 2ï¼šå¯¼å‡ºå¯æ··æ·†ç¬¦å·ï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰</strong></h2>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p>CI å°†ç”Ÿæˆçš„ <code>sym.json</code> ä¸Šä¼ åˆ°ï¼š</p>
<ul>
<li>å†…ç½‘ä»“åº“</li>
<li>Git repo</li>
<li>æˆ–è€… KMS å­˜å‚¨</li>
</ul>
<p>ç”¨äºå®¡è®¡ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>â‘¢ Step 3ï¼šè‡ªåŠ¨ç¼–è¾‘ç¬¦å·ï¼ˆç­–ç•¥åˆå¹¶ï¼‰</strong></h2>
<p>é€šå¸¸åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<h3 data-id="heading-11">1. é¡¹ç›®ä¸“å±ç™½åå•ï¼ˆå¦‚ MethodChannelã€JSBridge é»‘åå•ï¼‰</h3>
<p>ç”±å®‰å…¨å›¢é˜Ÿç»´æŠ¤ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">whitelist.json
</code></pre>
<h3 data-id="heading-12">2. è‡ªåŠ¨ç”Ÿæˆçš„ sym.jsonï¼ˆæ¥è‡ª parseï¼‰</h3>
<p>è„šæœ¬è‡ªåŠ¨åˆå¹¶ä¸¤è€…ï¼Œå¾—åˆ°æœ€ç»ˆå¯æ··æ·†ç­–ç•¥ï¼š</p>
<pre><code class="hljs">merged_sym.json
</code></pre>
<hr/>
<h2 data-id="heading-13"><strong>â‘£ Step 4ï¼šæ‰§è¡Œ Ipa Guard æ··æ·†ï¼ˆCI æ ¸å¿ƒæ­¥éª¤ï¼‰</strong></h2>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect app.ipa \
  -c merged_sym.json \
  --email team@company.com \
  --image \
  --js \
  -o protected.ipa
</code></pre>
<p>CI è‡ªåŠ¨å®Œæˆï¼š</p>
<p>Swift/ObjC æ–¹æ³•ã€ç±»åæ··æ·†
å˜é‡åæ··æ·†
å›¾ç‰‡ã€èµ„æºæ–‡ä»¶åæ‰°åŠ¨
JSON/JS/H5 è·¯å¾„ä¿®æ”¹
MD5 ä¿®æ”¹
ç”Ÿæˆæ˜ å°„è¡¨ï¼ˆç”¨äºå›æ»šä¸ç¬¦å·åŒ–ï¼‰</p>
<p>æ‰€æœ‰ç»“æœè‡ªåŠ¨å¤‡ä»½ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>â‘¤ Step 5ï¼šè‡ªåŠ¨é‡ç­¾å</strong></h2>
<pre><code class="hljs language-arduino" lang="arduino">kxsign sign <span class="hljs-keyword">protected</span>.ipa \
  -c cert.p12 \
  -p $CERT_PASSWORD \
  -m profile.mobileprovision \
  -z <span class="hljs-type">signed</span>.ipa
</code></pre>
<p>å¯è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>Dev æµ‹è¯•åŒ…</li>
<li>Adhoc å†…æµ‹åŒ…</li>
<li>Release æå®¡åŒ…</li>
<li>æ¸ é“ä¸“å±ç­¾ååŒ…</li>
</ul>
<p>CI ä¸‹å‘å¯¹åº”æ–‡ä»¶å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-15"><strong>â‘¥ Step 6ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼‰</strong></h2>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>XCTest å•å…ƒæµ‹è¯•</li>
<li>XCUITest UI è‡ªåŠ¨åŒ–</li>
<li>çœŸæœºè‡ªåŠ¨åŒ–è·‘ä¸€éä¸»æµç¨‹</li>
<li>æˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹çœŸæœºé›†ç¾¤ï¼ˆå¦‚å†…éƒ¨è®¾å¤‡å†œåœºï¼‰</li>
</ul>
<p>é‡ç‚¹éªŒè¯ï¼š</p>
<ul>
<li>æ··æ·†åæ˜¯å¦å´©æºƒ</li>
<li>JS/H5 é¡µé¢æ˜¯å¦æ­£å¸¸</li>
<li>Flutter/RN æ˜¯å¦æ­£å¸¸åŠ è½½</li>
<li>SDKï¼ˆç™»å½•/æ”¯ä»˜ï¼‰æ˜¯å¦æ­£å¸¸</li>
</ul>
<hr/>
<h2 data-id="heading-16"><strong>â‘¦ Step 7ï¼šè‡ªåŠ¨é€†å‘éªŒè¯ï¼ˆå¯è‡ªåŠ¨æ‰§è¡Œï¼‰</strong></h2>
<h3 data-id="heading-17">1. class-dump åº”è¯¥å®Œå…¨çœ‹ä¸æ‡‚</h3>
<h3 data-id="heading-18">2. Frida Hook åº”è¯¥éš¾ä»¥ç›´æ¥å®šä½æ–¹æ³•åç§°</h3>
<h3 data-id="heading-19">3. Hopper ä¸­ç¬¦å·åº”è¯¥å…¨ä¹±ç </h3>
<p>è„šæœ¬è‡ªåŠ¨æ¯”å¯¹æ˜¯å¦å­˜åœ¨å¯è¯»ç¬¦å·ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">class</span>-dump <span class="hljs-type">signed</span>.ipa | grep <span class="hljs-string">"Controller"</span>
</code></pre>
<p>è‹¥è¾“å‡ºä¸ä¸ºç©º â†’ é˜»æ–­å‘å¸ƒ</p>
<hr/>
<h2 data-id="heading-20"><strong>â‘§ Step 8ï¼šä¿å­˜æ˜ å°„è¡¨ã€å®¡è®¡æ•°æ®</strong></h2>
<p>CI è‡ªåŠ¨å°†ï¼š</p>
<ul>
<li>æ˜ å°„è¡¨</li>
<li>sym.json</li>
<li>merged_sym.json</li>
<li>ipa äº§ç‰©</li>
<li>æ„å»ºå·ã€Git æäº¤</li>
<li>æ—¶é—´æˆ³ã€æ“ä½œæ—¥å¿—</li>
</ul>
<p>å½’æ¡£è‡³ï¼š</p>
<ul>
<li>å†…éƒ¨å¯¹è±¡å­˜å‚¨ï¼ˆS3ã€OSSã€COSï¼‰</li>
<li>KMS åŠ å¯†æœºåˆ¶</li>
<li>å†…éƒ¨ç¬¦å·åŒ–æœåŠ¡ï¼ˆSentry/Buglyï¼‰</li>
</ul>
<p>å®ç°å®Œæ•´å¯è¿½è¸ªæ²»ç†ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-21"><strong>â‘¨ Step 9ï¼šè‡ªåŠ¨åˆ†å‘ / ä¸Šä¼ å®¡æ ¸</strong></h2>
<p>é€šè¿‡ Fastlaneï¼š</p>
<pre><code class="hljs">fastlane deliver
</code></pre>
<p>æˆ–å†…éƒ¨åˆ†å‘å¹³å°ï¼š</p>
<ul>
<li>è’²å…¬è‹±</li>
<li>è‡ªå»ºåˆ†å‘</li>
<li>Jenkins Artifacts</li>
</ul>
<p>ä»æ­¤ iOS åŠ å›ºæˆä¸ºæµæ°´çº¿è‡ªåŠ¨çš„ä¸€ç¯ã€‚</p>
<hr/>
<h2 data-id="heading-22">å››ã€Ipa Guard é›†æˆ CI/CD çš„æœ€ç»ˆæ•ˆæœ</h2>
<p>å½“è¿™å¥—æµç¨‹è·‘é€šåï¼Œä½ ä¼šè·å¾—ï¼š</p>
<h3 data-id="heading-23">è‡ªåŠ¨æ··æ·†</h3>
<h3 data-id="heading-24">è‡ªåŠ¨é‡ç­¾</h3>
<h3 data-id="heading-25">è‡ªåŠ¨æµ‹è¯•</h3>
<h3 data-id="heading-26">è‡ªåŠ¨å®¡è®¡</h3>
<h3 data-id="heading-27">è‡ªåŠ¨é€†å‘æ£€æµ‹</h3>
<h3 data-id="heading-28">è‡ªåŠ¨åˆ†å‘</h3>
<h3 data-id="heading-29">ç»“æ„æ¸…æ™°ã€å¯å›æ»š</h3>
<h3 data-id="heading-30">æœ‰æ˜ å°„è¡¨å¯ç¬¦å·åŒ–</h3>
<p>æ•´ä¸ª iOS åŠ å›ºä¸å†ä¾é äººå·¥ï¼Œè€Œæ˜¯ï¼š</p>
<p><strong>è‡ªåŠ¨åŒ–ã€å¯é‡å¤ã€å¯å®¡è®¡ã€å¯æ²»ç†ã€‚</strong></p>
<p>è¿™æ‰æ˜¯ç°ä»£ç§»åŠ¨å›¢é˜Ÿåº”è¯¥è¾¾åˆ°çš„å®‰å…¨æ°´å¹³ã€‚</p>
<hr/>
<h2 data-id="heading-31">äº”ã€æ€»ç»“ï¼šIpa Guard ä¸ CI/CD çš„ç»“åˆï¼Œæ˜¯å·¥ç¨‹ä½“ç³»å‡çº§çš„å…³é”®</h2>
<p>æœ€ç»ˆæ¨èç»„åˆå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-32"><strong>åˆ†æå±‚</strong></h3>
<p>MobSFã€class-dump</p>
<h3 data-id="heading-33"><strong>åŠ å›ºå±‚ï¼ˆæ ¸å¿ƒï¼‰</strong></h3>
<p>Ipa Guard CLI</p>
<ul>
<li>IPA æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>åŠ å›ºç­–ç•¥æ§åˆ¶</li>
</ul>
<h3 data-id="heading-34"><strong>éªŒè¯å±‚</strong></h3>
<p>kxsignã€Fridaã€Hopperã€è‡ªåŠ¨åŒ–æµ‹è¯•</p>
<h3 data-id="heading-35"><strong>æ²»ç†å±‚</strong></h3>
<p>KMSã€Sentry/Buglyã€GitLab/Jenkins å½’æ¡£</p>
<h3 data-id="heading-36"><strong>åˆ†å‘å±‚</strong></h3>
<p>Fastlaneã€Jenkinsã€å†…éƒ¨å¹³å°</p>
<p>é€šè¿‡è¿™å¥—é“¾è·¯ï¼ŒiOS åŠ å›ºæ‰èƒ½â€œå·¥ç¨‹åŒ–â€ï¼Œè€Œä¸æ˜¯â€œæ‰‹å·¥åŒ–â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7577042851080880171</link>    <guid>https://juejin.cn/post/7577042851080880171</guid>    <pubDate>2025-11-27T09:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577042851080880171" data-draft-id="7576994308274307091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-27T09:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:14:51.000Z" title="Thu Nov 27 2025 09:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Axiosæ˜¯å¦çœŸçš„æ”¯æŒå–æ¶ˆè¯·æ±‚å‘¢</h2>
<p>æ˜¯çš„ï¼Œ<strong>Axios å®Œå…¨æ”¯æŒå–æ¶ˆè¯·æ±‚</strong>ã€‚</p>
<p>Axios æä¾›äº†ä¸¤ç§ä¸»è¦çš„å–æ¶ˆè¯·æ±‚çš„æ–¹å¼ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨Â <code>AbortController</code>Â (æ¨èï¼Œç°ä»£æµè§ˆå™¨å’Œ Node.js ç¯å¢ƒ)</strong></li>
<li><strong>ä½¿ç”¨Â <code>CancelToken</code>Â (æ—§ç‰ˆæ–¹å¼ï¼ŒAxios 0.22.0 ä¹‹å‰çš„ä¸»è¦æ–¹å¼ï¼Œç°åœ¨å·²åºŸå¼ƒä½†ä»å…¼å®¹)</strong></li>
</ol>
<hr/>
<h3 data-id="heading-1">1. ä½¿ç”¨Â <code>AbortController</code>Â (æ¨è)</h3>
<p><code>AbortController</code>Â æ˜¯ Web æ ‡å‡† APIï¼Œç”¨äºä¸­æ­¢ä¸€ä¸ªæˆ–å¤šä¸ª Web è¯·æ±‚ã€‚Axios ä» v0.22.0 å¼€å§‹æ”¯æŒå®ƒï¼Œå¹¶æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª AbortController å®ä¾‹</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>; <span class="hljs-comment">// è·å– AbortSignal å¯¹è±¡</span>

<span class="hljs-comment">// 2. åœ¨ Axios è¯·æ±‚é…ç½®ä¸­ä¼ å…¥ signal</span>
axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>, { signal })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ:'</span>, response.<span class="hljs-property">data</span>);
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯æ˜¯å¦æ˜¯ç”±äºè¯·æ±‚å–æ¶ˆå¼•èµ·çš„</span>
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å‘ç”Ÿé”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);
    }
  });

<span class="hljs-comment">// 3. åœ¨éœ€è¦å–æ¶ˆè¯·æ±‚æ—¶è°ƒç”¨ controller.abort()</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæˆ–è€…ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®æ—¶</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  controller.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// è¿™ä¼šè§¦å‘ signal ä¸Šçš„ abort äº‹ä»¶ï¼ŒAxios ä¼šæ•è·å¹¶å–æ¶ˆè¯·æ±‚</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å°è¯•å–æ¶ˆ'</span>);
}, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100ms åå–æ¶ˆè¯·æ±‚</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æ˜¯ Web æ ‡å‡† APIï¼Œä¸ä»…é™äº Axiosï¼Œä¹Ÿå¯ä»¥ç”¨äºÂ <code>fetch</code>Â API æˆ–å…¶ä»–æ”¯æŒÂ <code>AbortSignal</code>Â çš„å¼‚æ­¥æ“ä½œã€‚</li>
<li>æ›´ç°ä»£ã€æ›´ç®€æ´çš„ API è®¾è®¡ã€‚</li>
<li>å¯ä»¥å–æ¶ˆå¤šä¸ªè¯·æ±‚ï¼ˆå°†åŒä¸€ä¸ªÂ <code>signal</code>Â ä¼ é€’ç»™å¤šä¸ªè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. ä½¿ç”¨Â <code>CancelToken</code>Â (æ—§ç‰ˆï¼Œå·²åºŸå¼ƒä½†ä»å…¼å®¹)</h3>
<p><code>CancelToken</code>Â æ˜¯ Axios æ—©æœŸæä¾›çš„å–æ¶ˆè¯·æ±‚æœºåˆ¶ã€‚è™½ç„¶ç°åœ¨æ¨èä½¿ç”¨Â <code>AbortController</code>ï¼Œä½†å¦‚æœä½ åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ Axios æˆ–è€…éœ€è¦å…¼å®¹æ—§ä»£ç ï¼Œå®ƒä»ç„¶å¯ç”¨ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª CancelToken.Source å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CancelToken</span> = axios.<span class="hljs-property">CancelToken</span>;
<span class="hljs-keyword">const</span> source = <span class="hljs-title class_">CancelToken</span>.<span class="hljs-title function_">source</span>(); <span class="hljs-comment">// source å¯¹è±¡åŒ…å« token å’Œ cancel æ–¹æ³•</span>

<span class="hljs-comment">// 2. åœ¨ Axios è¯·æ±‚é…ç½®ä¸­ä¼ å…¥ token</span>
axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>, { <span class="hljs-attr">cancelToken</span>: source.<span class="hljs-property">token</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ:'</span>, response.<span class="hljs-property">data</span>);
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯æ˜¯å¦æ˜¯ç”±äºè¯·æ±‚å–æ¶ˆå¼•èµ·çš„</span>
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å‘ç”Ÿé”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);
    }
  });

<span class="hljs-comment">// 3. åœ¨éœ€è¦å–æ¶ˆè¯·æ±‚æ—¶è°ƒç”¨ source.cancel()</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæˆ–è€…ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®æ—¶</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  source.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'ç”¨æˆ·å–æ¶ˆäº†è¯·æ±‚'</span>); <span class="hljs-comment">// ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å°è¯•å–æ¶ˆ'</span>);
}, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100ms åå–æ¶ˆè¯·æ±‚</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>åœ¨æ—§ç‰ˆæœ¬ Axios ä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>Axios ç‰¹æœ‰çš„ APIï¼Œä¸é€‚ç”¨äºå…¶ä»– Web APIã€‚</li>
<li>å·²è¢«Â <code>AbortController</code>Â æ›¿ä»£ï¼Œæœªæ¥å¯èƒ½ä¸å†ç»´æŠ¤æˆ–æ¨èã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">ä½•æ—¶éœ€è¦å–æ¶ˆè¯·æ±‚ï¼Ÿ</h3>
<p>å–æ¶ˆè¯·æ±‚åœ¨å‰ç«¯å¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç»„ä»¶å¸è½½æ—¶</strong>ï¼šå½“ç”¨æˆ·åœ¨è¯·æ±‚å®Œæˆå‰åˆ‡æ¢é¡µé¢æˆ–ç»„ä»¶è¢«é”€æ¯æ—¶ï¼Œé¿å…å› è¯·æ±‚è¿”å›åå°è¯•æ›´æ–°å·²ä¸å­˜åœ¨çš„ç»„ä»¶çŠ¶æ€è€Œå¯¼è‡´çš„å†…å­˜æ³„æ¼æˆ–é”™è¯¯ã€‚</li>
<li><strong>ç”¨æˆ·æ“ä½œå–æ¶ˆ</strong>ï¼šä¾‹å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»äº†â€œå–æ¶ˆä¸Šä¼ â€æŒ‰é’®ï¼Œæˆ–åœ¨æœç´¢æ¡†ä¸­å¿«é€Ÿè¾“å…¥æ—¶ï¼Œå–æ¶ˆä¹‹å‰çš„æ—§æœç´¢è¯·æ±‚ï¼Œåªä¿ç•™æœ€æ–°çš„è¯·æ±‚ã€‚</li>
<li><strong>é¿å…é‡å¤è¯·æ±‚</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æˆ–å¿«é€Ÿè§¦å‘æŸä¸ªæ“ä½œå¯¼è‡´å‘é€å¤šä¸ªç›¸åŒçš„è¯·æ±‚ï¼Œå¯ä»¥åœ¨æ–°è¯·æ±‚å‘å‡ºå‰å–æ¶ˆæ—§è¯·æ±‚ã€‚</li>
</ol>
<p>æ€»ä¹‹ï¼ŒAxios æä¾›äº†å¼ºå¤§ä¸”çµæ´»çš„è¯·æ±‚å–æ¶ˆæœºåˆ¶ï¼Œæ¨èåœ¨ç°ä»£é¡¹ç›®ä¸­ä½¿ç”¨Â <code>AbortController</code>ã€‚</p>
<h2 data-id="heading-4">è¿™ç§å–æ¶ˆæ˜¯å‰ç«¯æ‹’ç»æ¥æ”¶æ•°æ®è¿˜æ˜¯çœŸçš„åœæ­¢httpçš„è¯·æ±‚é“¾æ¥å‘¢ï¼Ÿ</h2>
<h3 data-id="heading-5">1. å®ƒæ˜¯å¦‚ä½•â€œçœŸå–æ¶ˆâ€çš„ï¼Ÿï¼ˆæµè§ˆå™¨å±‚é¢ï¼‰</h3>
<p>å½“ä½ è°ƒç”¨Â <code>controller.abort()</code>ï¼ˆæˆ–æ—§ç‰ˆçš„Â <code>cancelToken</code>ï¼‰æ—¶ï¼ŒAxios ä¼šè°ƒç”¨æµè§ˆå™¨åº•å±‚çš„ APIï¼ˆ<code>XMLHttpRequest.abort()</code>Â æˆ–Â <code>fetch</code>Â çš„ signal æœºåˆ¶ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>ç½‘ç»œè¿æ¥è¢«åˆ‡æ–­</strong>ï¼šæµè§ˆå™¨ä¼šç«‹å³å…³é—­ä¸æœåŠ¡å™¨çš„ TCP è¿æ¥ã€‚</li>
<li><strong>åœæ­¢æ¥æ”¶æ•°æ®</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ­£åœ¨å‘é€ä¸€ä¸ªå¾ˆå¤§çš„å“åº”ï¼ˆæ¯”å¦‚ä¸‹è½½ä¸€ä¸ª 100MB çš„æ–‡ä»¶ï¼‰ï¼Œæµè§ˆå™¨ä¼šç«‹åˆ»åœæ­¢ä¸‹è½½ï¼Œ<strong>èŠ‚çœå¸¦å®½</strong>ã€‚</li>
<li><strong>Promise ç«‹å³ Reject</strong>ï¼šAxios çš„ Promise ä¼šç«‹åˆ»æŠ›å‡ºä¸€ä¸ªÂ <code>CanceledError</code>ï¼Œä½ çš„ä»£ç ä¼šç«‹åˆ»è¿›å…¥Â <code>.catch()</code>ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨å“åº”è¶…æ—¶ã€‚</li>
</ul>
<p><strong>å¯¹æ¯”ï¼š</strong> Â å¦‚æœä»…ä»…æ˜¯â€œå‰ç«¯ä¸äºˆæ¥æ”¶â€ï¼Œæµè§ˆå™¨ä¼šå‚»å‚»åœ°æŠŠ 100MB ä¸‹è½½å®Œï¼Œç„¶åä½ çš„ä»£ç å†æŠŠæ•°æ®æ‰”æ‰ã€‚<strong>Axios çš„å–æ¶ˆæ˜¯å‰è€…ï¼Œç›´æ¥ææ–­è¿æ¥ï¼ŒèŠ‚çœèµ„æºã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">2. æœåŠ¡å™¨ç«¯å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆåç«¯å±‚é¢ï¼‰</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“äº§ç”Ÿè¯¯è§£çš„åœ°æ–¹ã€‚ <strong>â€œå‰ç«¯å–æ¶ˆäº†è¯·æ±‚â€å¹¶ä¸ä»£è¡¨â€œåç«¯æ’¤é”€äº†æ“ä½œâ€ã€‚</strong></p>
<ul>
<li>
<p><strong>è¯·æ±‚å·²å‘å‡º</strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ ç‚¹å‡»å–æ¶ˆæ—¶ï¼Œè¯·æ±‚æŒ‡ä»¤å·²ç»é€šè¿‡ç½‘ç»œå‘é€åˆ°äº†æœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å™¨æ­£åœ¨å¤„ç†</strong>ï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå¼€å§‹æŸ¥è¯¢æ•°æ®åº“ã€è®¡ç®—æ•°æ®æˆ–å†™å…¥è®°å½•ã€‚</p>
</li>
<li>
<p><strong>è¿æ¥ä¸­æ–­</strong>ï¼šæ­¤æ—¶å‰ç«¯æ–­å¼€äº†è¿æ¥ã€‚</p>
<ul>
<li><strong>å¤§å¤šæ•°åç«¯æ¡†æ¶ï¼ˆå¦‚ Java Spring, Node Express, Python Flaskï¼‰</strong> ï¼šé€šå¸¸<strong>ä¸ä¼š</strong>è‡ªåŠ¨æ£€æµ‹è¿æ¥æ–­å¼€è€Œåœæ­¢ä¸šåŠ¡é€»è¾‘ã€‚å®ƒä»¬ä¼šç»§ç»­æŠŠæ´»å¹²å®Œï¼ˆæ¯”å¦‚æŠŠæ•°æ®å†™è¿›æ•°æ®åº“ï¼‰ï¼Œç„¶åè¯•å›¾æŠŠç»“æœè¿”å›ç»™å‰ç«¯ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šå½“æœåŠ¡å™¨è¯•å›¾è¿”å›ç»“æœæ—¶ï¼Œå‘ç°è¿æ¥å·²ç»æ²¡äº†ï¼ŒæœåŠ¡å™¨ä¼šæŠ¥é”™ï¼ˆå¦‚Â <code>Broken pipe</code>ï¼‰ï¼Œä½†ä¹‹å‰çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚å†™åº“ï¼‰å¯èƒ½å·²ç»æ‰§è¡Œäº†ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong><br/>
ä½ åœ¨é¤å…ç‚¹äº†ä¸€é“èœï¼ˆ<strong>å‘é€è¯·æ±‚</strong>ï¼‰ã€‚<br/>
å¨å¸ˆå¼€å§‹åšèœï¼ˆ<strong>æœåŠ¡å™¨å¤„ç†</strong>ï¼‰ã€‚<br/>
ä½ çªç„¶æœ‰æ€¥äº‹èµ°äº†ï¼Œè·ŸæœåŠ¡å‘˜è¯´â€œæˆ‘ä¸è¦äº†â€ï¼ˆ<strong>å‰ç«¯å–æ¶ˆè¯·æ±‚</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>å‰ç«¯è§†è§’</strong>ï¼šä½ èµ°äº†ï¼Œæ²¡åƒåˆ°èœï¼Œä¹Ÿæ²¡ä»˜é’±ï¼ˆèŠ‚çœäº†æ—¶é—´å’Œèµ„æºï¼‰ã€‚</li>
<li><strong>åç«¯è§†è§’</strong>ï¼šå¨å¸ˆå¯èƒ½å·²ç»æŠŠèœåšå¥½äº†ï¼Œå‘ç°æ²¡äººåƒï¼Œåªèƒ½å€’æ‰ã€‚<strong>ä½†èœç¡®å®è¢«åšå‡ºæ¥äº†ï¼ˆå‰¯ä½œç”¨å·²äº§ç”Ÿï¼‰ã€‚</strong></li>
</ul>
<hr/>
<h3 data-id="heading-7">3. æ€»ç»“ï¼šä¸‰ç§æƒ…å†µ</h3>
<p>æ ¹æ®å–æ¶ˆçš„æ—¶æœºä¸åŒï¼Œæ•ˆæœä¹Ÿä¸åŒï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚è¿˜åœ¨æ’é˜Ÿï¼ˆæå°‘è§ï¼‰</strong> ï¼š</p>
<ul>
<li>æµè§ˆå™¨è¿˜æ²¡æ¥å¾—åŠæŠŠè¯·æ±‚å‘å‡ºå»ä½ å°±å–æ¶ˆäº†ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šæœåŠ¡å™¨å®Œå…¨ä¸çŸ¥é“æœ‰è¿™å›äº‹ï¼Œè¿™æ˜¯æœ€å½»åº•çš„å–æ¶ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚åœ¨ä¼ è¾“ä¸­/æœåŠ¡å™¨å¤„ç†ä¸­ï¼ˆæœ€å¸¸è§ï¼‰</strong> ï¼š</p>
<ul>
<li>è¯·æ±‚å·²å‘ï¼ŒæœåŠ¡å™¨æ­£åœ¨ç®—ï¼Œå‰ç«¯å–æ¶ˆã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šå‰ç«¯æ–­å¼€è¿æ¥ï¼Œä¸å†ç­‰å¾…ã€‚æœåŠ¡å™¨å¯èƒ½è¿˜æ˜¯ä¼šæŠŠæ´»å¹²å®Œï¼Œä½†å‘ä¸å›æ¥ã€‚<strong>è¿™å¯¹å‰ç«¯æ¥è¯´æ˜¯çœŸå–æ¶ˆï¼ˆä¸å¡ç•Œé¢ã€ä¸è´¹æµé‡ï¼‰ï¼Œå¯¹åç«¯æ¥è¯´é€šå¸¸æ— æ³•æ’¤é”€å‰¯ä½œç”¨ã€‚</strong></li>
</ul>
</li>
<li>
<p><strong>å“åº”å·²åˆ°è¾¾æµè§ˆå™¨</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨æ•°æ®å·²ç»å‘å›æ¥äº†ï¼Œæµè§ˆå™¨åˆšæ”¶åˆ°ï¼Œä½ æ­£å¥½ç‚¹äº†å–æ¶ˆã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šè¿™æ—¶å€™å…¶å®å·²ç»æ™šäº†ï¼ŒAxios åªæ˜¯æŠ›ä¸ªé”™è®©ä½ å¿½ç•¥ç»“æœã€‚è¿™å°±å˜æˆäº†ä½ è¯´çš„â€œå‰ç«¯ä¸äºˆæ¥æ”¶â€ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">æ ¸å¿ƒå»ºè®®</h3>
<ul>
<li><strong>ç”¨äºä¼˜åŒ–ä½“éªŒ</strong>ï¼šAxios çš„å–æ¶ˆéå¸¸é€‚åˆç”¨äº<strong>æœç´¢æ¡†è”æƒ³</strong>ï¼ˆè¾“å…¥Â <code>a</code>Â å‘è¯·æ±‚ï¼Œç´§æ¥ç€è¾“å…¥Â <code>ab</code>ï¼Œæ­¤æ—¶å–æ¶ˆÂ <code>a</code>Â çš„è¯·æ±‚ï¼‰æˆ–<strong>åˆ‡æ¢ Tab</strong>ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢â€œæ—§æ•°æ®çš„å“åº”è¦†ç›–äº†æ–°æ•°æ®â€çš„ Bugï¼Œå¹¶èŠ‚çœå¸¦å®½ã€‚</li>
<li><strong>ä¸è¦ä¾èµ–å®ƒæ¥å›æ»šæ•°æ®</strong>ï¼šå¦‚æœä½ å‘çš„æ˜¯Â <code>POST</code>Â è¯·æ±‚ï¼ˆæ¯”å¦‚â€œä»˜æ¬¾â€ï¼‰ï¼Œåƒä¸‡ä¸è¦æŒ‡æœ›å‰ç«¯å–æ¶ˆå°±èƒ½é˜»æ­¢æœåŠ¡å™¨æ‰£æ¬¾ã€‚åç«¯å¿…é¡»è¦æœ‰å¹‚ç­‰æ€§è®¾è®¡æˆ–ä¸“é—¨çš„æ’¤é”€æ¥å£ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ]]></title>    <link>https://juejin.cn/post/7577189654488989746</link>    <guid>https://juejin.cn/post/7577189654488989746</guid>    <pubDate>2025-11-27T09:13:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654488989746" data-draft-id="7576968345876283419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ"/> <meta itemprop="keywords" content="Flutter,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:13:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:13:45.000Z" title="Thu Nov 27 2025 09:13:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å“ˆå–½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>è€åˆ˜åšFlutterå¼€å‘å·®ä¸å¤š7å¹´äº†ï¼ŒæœŸé—´å¦‚ä½•é€‰æ‹©Flutterç‰ˆæœ¬æ˜¯è¢«é—®å¾—æœ€å¤šçš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<p>æ‰€ä»¥è€åˆ˜æ–°å¼€äº†ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œæ¯ä¸ªæœˆéƒ½ä¼šæ·±åº¦åˆ†ææœ€è¿‘çš„å‡ ä¸ªFlutterç‰ˆæœ¬ã€‚</p>
<ul>
<li>æä¾›å…·ä½“çš„ç‰ˆæœ¬é€‰æ‹©å»ºè®®</li>
<li>åˆ†äº«çœŸå®çš„ç”Ÿäº§ç¯å¢ƒç»éªŒ</li>
<li>ç»™å‡ºè¯¦ç»†çš„å‡çº§å’Œå›æ»šç­–ç•¥</li>
</ul>
<p>è®©ä½ åœ¨ç‰ˆæœ¬é€‰æ‹©ä¸Šä¸å†çº ç»“ï¼Œä¸å†è¸©å‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Flutterç‰ˆæœ¬é€‰æ‹©ç­–ç•¥</h2>
<p>å¯¹äºæŠ€æœ¯æ¡†æ¶å’Œç‰ˆæœ¬çš„é€‰æ‹©ï¼Œä¸åº”è¯¥æ˜¯ç›²ç›®çš„é€‰æ‹©æœ€æ–°ç‰ˆï¼Œæˆ–è€…æ— è„‘çœ‹ç½‘ä¸Šåˆ«äººæ€ä¹ˆæ¨èï¼Œè€Œæ˜¯åº”è¯¥æœ‰è‡ªå·±çš„åˆ†ææ–¹æ³•ã€‚</p>
<p>æœ€æ–°çš„ç‰ˆæœ¬å¤§æ¦‚ç‡è§£å†³äº†ä¹‹å‰ç‰ˆæœ¬ä¸­æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ·»åŠ äº†æ–°ç‰¹æ€§ã€‚</p>
<p>ä½†æ˜¯æœ€æ–°ç‰ˆæœ‰å¾ˆæœ‰å¯èƒ½å¼•å…¥æ–°çš„bugæˆ–è€…ç¼ºé™·ã€‚</p>
<p>é‚£ä¹ˆä½œä¸ºå¼€å‘è€…è¯¥å¦‚ä½•æƒè¡¡è¿™ä¸¤è€…çš„åˆ©å¼Šå‘¢ï¼Ÿ</p>
<p><strong>ç¬¬ä¸€ä¸ªæ³•åˆ™ï¼š2ä¸ªæœˆè§‚å¯ŸæœŸï¼Œåˆ«å½“å°ç™½é¼ </strong></p>
<p>æ–°ç‰ˆæœ¬å‘å¸ƒåçš„å‰2ä¸ªæœˆï¼Œå°±æ˜¯ä¸€åœºå¤§å‹çœŸäººå®éªŒã€‚</p>
<p>å¤§éƒ¨åˆ†ä¸¥é‡çš„bugåœ¨å‘å¸ƒåçš„ä¸€åˆ°ä¸¤ä¸ªæœˆéƒ½èƒ½è¢«çˆ†å‡ºæ¥ã€‚</p>
<p>æ‰€ä»¥èªæ˜çš„åšæ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç­‰2ä¸ªæœˆï¼Œçœ‹ç¤¾åŒºåé¦ˆï¼Œçœ‹bugåˆ—è¡¨ã€‚å¦‚æœè¿™æ®µæ—¶é—´æ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡å°±æ˜¯æ¯”è¾ƒå®‰å…¨çš„ã€‚</p>
<p>ä¹Ÿå¯ä»¥çœ‹è€åˆ˜æ¯ä¸ªæœˆå‘å¸ƒçš„ã€ŠFlutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ã€‹ã€‚</p>
<p>è¿™å°±åƒä¹°è‚¡ç¥¨ä¸€æ ·ï¼Œä¸è¦è¿½é«˜ï¼Œè¦ç­‰è¿›å…¥ä½ä¼°åŒºé—´ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªæ³•åˆ™ï¼šåˆ†ç¯å¢ƒæµ‹è¯•ï¼Œåˆ«ä¸€ä¸Šæ¥å°±all in</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/069712e44df847c2b90613ce4f1892c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=Wt%2BEWnIMdRIGP%2BqQor82AwplVoY%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ â†’ ç”Ÿäº§ç¯å¢ƒ</strong></p>
<p>å¼€å‘ç¯å¢ƒç”¨æœ€æ–°ç‰ˆï¼Œè¸©å‘æˆ‘è®¤äº†ï¼Œåæ­£å½±å“ä¸äº†ç”¨æˆ·ã€‚</p>
<p>æµ‹è¯•ç¯å¢ƒç”¨ç»è¿‡å¼€å‘ç¯å¢ƒæ£€éªŒçš„ç‰ˆæœ¬ï¼Œå……åˆ†æµ‹è¯•ï¼Œè®°å½•é—®é¢˜ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒç”¨ç¨³å®šç‰ˆï¼Œç”¨æˆ·è‡³ä¸Šï¼Œç¨³å®šå‹å€’ä¸€åˆ‡ã€‚</p>
<p>å‡çº§å‰é¢„ç•™è¶³å¤Ÿçš„æ—¶é—´çª—å£ï¼Œæ¯”å¦‚åœ¨å½“å‰å·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ä¸Šåªå‡çº§Flutterç‰ˆæœ¬ï¼Œç„¶åå¿«é€Ÿå‘å¸ƒä¸€ä¸ªå°ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœå‘ç°é—®é¢˜å¯ä»¥å°½å¿«å›æ»šã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€Flutteræœ€è¿‘5ä¸ªç‰ˆæœ¬æ·±åº¦è§£æ</h2>
<h3 data-id="heading-2">1. ç‰ˆæœ¬åˆ—è¡¨</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/982928cab4c54c32982500ec2a44f651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=c%2FykUfoOuFEtgx2urT4mSNiYU70%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>Flutter 3.38</strong> (æœ€æ–°) - 2025å¹´11æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.35</strong> - 2025å¹´8æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.32</strong> - 2025å¹´5æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.29</strong> - 2025å¹´2æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.27</strong> - 2024å¹´12æœˆå‘å¸ƒ</li>
</ol>
<h3 data-id="heading-3">2. å„ç‰ˆæœ¬é—®é¢˜åˆ†æä¸é£é™©è¯„ä¼°</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feabfc3b870d4ad89cb56e5063093a86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=SFsswHzu7MiIX%2FrTiNOT%2BVLOYRo%3D" alt="" loading="lazy"/></p>
<p><strong>Flutter 3.38 - åˆšå‘å¸ƒï¼Œè¿›å…¥è§‚å¯ŸæœŸ</strong></p>
<ul>
<li><strong>å·¥å…·é“¾å‡çº§</strong>ï¼šiOS å¼•å…¥ UIScene ç”Ÿå‘½å‘¨æœŸæ”¯æŒï¼Œæ—§å·¥ç¨‹éœ€æŒ‰æŒ‡å—è¿ç§»ï¼›Android é»˜è®¤ NDK å‡è‡³ r28ï¼Œæ»¡è¶³ Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹è¦æ±‚ã€‚</li>
<li><strong>æ¸²æŸ“ä¸æ€§èƒ½</strong>ï¼šWebä¸ç§»åŠ¨ç«¯æœ‰ä¼˜åŒ–ï¼Œå»ºè®®ç”¨çœŸæœºä¸çº¿ä¸Šæ•°æ®åšå¯¹æ¯”ã€‚</li>
<li><strong>ç”Ÿæ€é€‚é…</strong>ï¼šç¬¬ä¸‰æ–¹æ’ä»¶ä¸åº“é€šå¸¸éœ€è¦1â€“3å‘¨å®Œæˆé€‚é…ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šå»ºè®®ç­‰å¾…ä¸‰æ–¹åº“é€‚é…ï¼ŒåŒæ—¶è§‚å¯Ÿç¤¾ç¾¤åé¦ˆ</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæ­¤ç‰ˆæœ¬æ”¯æŒäº†iOSç«¯çš„UISceneç”Ÿå‘½å‘¨æœŸè¿ç§»å’ŒAndroidç«¯çš„Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹ï¼Œå› æ­¤å»ºè®®å¼€å‘è€…ä¿æŒå…³æ³¨ï¼Œæ—¶æœºæˆç†Ÿåå°½æ—©è¿›è¡Œé€‚é…ã€‚</p>
</blockquote>
<p><strong>Flutter 3.35 - å½“å‰æ¨èç‰ˆæœ¬</strong></p>
<ul>
<li><strong>ç¨³å®šæ€§æå‡</strong>ï¼šä¿®å¤äº†å‰æœŸç‰ˆæœ¬çš„ä¸»è¦é—®é¢˜</li>
<li><strong>æ–°åŠŸèƒ½</strong>ï¼šWebç«¯çƒ­é‡è½½ã€Widgeté¢„è§ˆç­‰åŠŸèƒ½é€æ­¥å®Œå–„</li>
<li><strong>ç¤¾åŒºè¯„ä»·</strong>ï¼šç¨³å®šç‰ˆæœ¬ï¼Œæ¨èå„ç§é¡¹ç›®ä½¿ç”¨</li>
</ul>
<p><strong>Flutter 3.32 - æ¸²æŸ“å¼•æ“è°ƒæ•´æœŸ</strong></p>
<ul>
<li><strong>æ¸²æŸ“åç«¯è°ƒæ•´</strong>ï¼šä»Vulkanå›é€€åˆ°OpenGLESï¼Œæ€§èƒ½æœ‰æ‰€å½±å“</li>
<li><strong>è®¾å¤‡å…¼å®¹æ€§</strong>ï¼šéƒ¨åˆ†è€æ—§è®¾å¤‡æ”¯æŒæœ‰é™</li>
<li><strong>è¿‡æ¸¡æœŸå»ºè®®</strong>ï¼šç­‰å¾…åç»­ç‰ˆæœ¬ç¨³å®šæ€§æå‡</li>
</ul>
<p><strong>Flutter 3.29 - å¯åŠ¨å’Œå†…å­˜ç®¡ç†éœ€å…³æ³¨</strong></p>
<ul>
<li><strong>åº”ç”¨å¯åŠ¨é—®é¢˜</strong>ï¼šéƒ¨åˆ†å¼€å‘è€…åé¦ˆå¯åŠ¨é˜¶æ®µå­˜åœ¨å´©æºƒç°è±¡</li>
<li><strong>å†…å­˜ç®¡ç†ä¼˜åŒ–</strong>ï¼šç›¸æ¯”æ—©æœŸç‰ˆæœ¬æœ‰æ‰€æ”¹è¿›ï¼Œä½†éœ€æŒç»­è§‚å¯Ÿ</li>
<li><strong>å»ºè®®</strong>ï¼šç”Ÿäº§ç¯å¢ƒå‡çº§å‰éœ€å……åˆ†æµ‹è¯•</li>
</ul>
<p><strong>Flutter 3.27 - é«˜é£é™©ç‰ˆæœ¬ï¼Œéœ€è°¨æ…è¯„ä¼°</strong></p>
<ul>
<li><strong>Impelleræ¸²æŸ“å¼•æ“ç¨³å®šæ€§é—®é¢˜</strong>ï¼šæ–°æ¸²æŸ“å¼•æ“åœ¨éƒ¨åˆ†è®¾å¤‡ä¸Šå­˜åœ¨é—®é¢˜
<ul>
<li>éƒ¨åˆ†Androidè®¾å¤‡å‡ºç°èŠ±å±ã€é»‘å±ç°è±¡ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li>å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿå™¨æ€§èƒ½ä¸‹é™ï¼Œå½±å“å¼€å‘æ•ˆç‡</li>
<li>å¯é€šè¿‡ <code>--no-enable-impeller</code> å‚æ•°ç¦ç”¨æ–°æ¸²æŸ“å¼•æ“</li>
</ul>
</li>
<li><strong>ç¤¾åŒºåé¦ˆ</strong>ï¼šRedditç­‰å¹³å°æœ‰ç”¨æˆ·æŠ¥å‘Šè“å±å’Œå†»ç»“é—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ä¸åŒåœºæ™¯çš„ç‰ˆæœ¬é€‰æ‹©ç­–ç•¥</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eca95582b2f4ff39eaa0d7e7cbaa185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=3SROAOvuBn%2F%2FONUqcG3GcSLnrjw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5"><strong>ç”Ÿäº§ç¯å¢ƒï¼ˆæ±‚ç¨³ä¸æ±‚æ–°ï¼‰</strong></h4>
<ul>
<li><strong>é¦–é€‰</strong>ï¼šFlutter 3.35 - æ–°åŠŸèƒ½ä¸ç¨³å®šæ€§çš„å¹³è¡¡ç‚¹</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼šFlutter 3.38 - åˆšå‘å¸ƒï¼Œæš‚ä¸å»ºè®®ç›´æ¥ä¸Šç”Ÿäº§</li>
</ul>
<p><strong>ç†ç”±</strong>ï¼šç”¨æˆ·ä½“éªŒ &gt; å¼€å‘ä½“éªŒï¼Œç¨³å®šå‹å€’ä¸€åˆ‡</p>
<p><strong>3.35ç‰ˆæœ¬ç»è¿‡ä¸¤ä¸ªæœˆéªŒè¯æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œ10æœˆä»½æå‡ä¸ºé¦–é€‰</strong></p>
<ul>
<li>å¦‚æœå¯¹ç¨³å®šæ€§æ²¡æœ‰æç«¯è¦æ±‚çš„Appå¯ä»¥è€ƒè™‘å‡çº§3.35ã€‚</li>
<li>å¦‚æœå¯¹ç¨³å®šæ€§è¦æ±‚å¾ˆé«˜ï¼Œå»ºè®®å†è§‚å¯Ÿä¸€ä¸ªæœˆã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>å¼€å‘ç¯å¢ƒï¼ˆå¯ä»¥æ¿€è¿›ä¸€ç‚¹ï¼‰</strong></h4>
<ul>
<li><strong>æ¨è</strong>ï¼šFlutter 3.35 - ä½“éªŒæœ€æ–°åŠŸèƒ½ï¼Œå½“å‰æœ€ç¨³å®šçš„ç‰ˆæœ¬</li>
<li><strong>æ³¨æ„</strong>ï¼šéšæ—¶å‡†å¤‡å›æ»šï¼Œä¸è¦åœ¨deadlineå‰å‡çº§</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼š3.38ç‰ˆæœ¬å‘å¸ƒæ—¶é—´å¤ªçŸ­ï¼Œä¸‰æ–¹åº“é€‚é…ä¸å¤Ÿå……åˆ†ï¼Œæš‚æ—¶ä¸å»ºè®®è¿›å…¥å¼€å‘ç¯å¢ƒ</li>
</ul>
<h4 data-id="heading-7"><strong>æ–°é¡¹ç›®å¯åŠ¨</strong></h4>
<ul>
<li><strong>æœ€ä½³é€‰æ‹©</strong>ï¼šFlutter 3.35</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé•¿æœŸæ”¯æŒã€ç¤¾åŒºæ´»è·ƒã€bugä¿®å¤åŠæ—¶</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼š3.38ç‰ˆæœ¬å‘å¸ƒæ—¶é—´å¤ªçŸ­ï¼Œä¸‰æ–¹åº“é€‚é…ä¸å¤Ÿå……åˆ†ï¼Œæš‚æ—¶ä¸å»ºè®®è¿›å…¥å¼€å‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-8">âš ï¸ <strong>éœ€è°¨æ…ä½¿ç”¨çš„ç‰ˆæœ¬</strong></h3>
<ul>
<li><strong>Flutter 3.38</strong>ï¼šåˆšå‘å¸ƒï¼Œå»ºè®®å…ˆåœ¨å¼€å‘ç¯å¢ƒéªŒè¯ï¼Œç­‰å¾…ç¤¾åŒºåé¦ˆ</li>
<li><strong>Flutter 3.32</strong>ï¼šæ¸²æŸ“å¼•æ“è°ƒæ•´æœŸï¼Œæ€§èƒ½æœ‰æ‰€å½±å“</li>
<li><strong>Flutter 3.29</strong>ï¼šå»ºè®®å……åˆ†æµ‹è¯•åå†ç”¨äºç”Ÿäº§ç¯å¢ƒ</li>
<li><strong>Flutter 3.27</strong>ï¼šImpelleræ¸²æŸ“å¼•æ“åœ¨éƒ¨åˆ†è®¾å¤‡ä¸Šå­˜åœ¨ç¨³å®šæ€§é—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>å½“å‰çš„ç°çŠ¶æ˜¯ï¼šå¤§å‚éƒ½åœ¨ç”¨"è¿‡æ—¶"ç‰ˆæœ¬ï¼Œè€Œå°å…¬å¸å´åœ¨è¿½æœ€æ–°ã€‚</p>
<p>åœ¨å®¢æˆ·ç«¯é¡¹ç›®ä¸­ï¼ŒåŸºç¡€æ¡†æ¶çš„ç‰ˆæœ¬é€‰æ‹©æ ¸å¿ƒåŸåˆ™æ˜¯ä¸è¦è¿½æ–°ï¼Œç•™ä¸¤ä¸ªæœˆå†·é™æœŸã€‚</p>
<p>"åœ¨è¿™ä¸ªå¿«é€Ÿè¿­ä»£çš„æ—¶ä»£ï¼Œæ‡‚å¾—æ…¢ä¸‹æ¥é€‰æ‹©ç¨³å®šç‰ˆæœ¬çš„å¼€å‘è€…ï¼Œæ‰æ˜¯çœŸæ­£çš„é«˜æ‰‹ã€‚"</p>
<blockquote>
<p>å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚</p>
<p>å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>â€”â€” laoliu_dev</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜]]></title>    <link>https://juejin.cn/post/7577050643203375154</link>    <guid>https://juejin.cn/post/7577050643203375154</guid>    <pubDate>2025-11-27T09:06:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577050643203375154" data-draft-id="7577031454586273819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-27T09:06:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯å¤©è¿›æ­¥ä¸€ç‚¹_JL"/> <meta itemprop="url" content="https://juejin.cn/user/1161549994267080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1161549994267080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯å¤©è¿›æ­¥ä¸€ç‚¹_JL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:06:06.000Z" title="Thu Nov 27 2025 09:06:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜</h2>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜çš„æœ¬è´¨ï¼šæ—¶ç©ºé”™ä½çš„ä¸€è‡´æ€§å›°å¢ƒ</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šä¸€ä¸ªä¸šåŠ¡æ–¹æ³•æ—¢è¦ä¿®æ”¹æ•°æ®åº“çŠ¶æ€ï¼Œåˆè¦å‘é€æ¶ˆæ¯åˆ°MQè§¦å‘ä¸‹æ¸¸æœåŠ¡ã€‚è¡¨é¢çœ‹ï¼Œè¿™åªæ˜¯ç®€å•çš„"å†™DB+å‘æ¶ˆæ¯"ï¼Œä½†ç»†ç©¶å…¶æ‰§è¡Œæ—¶åºï¼Œéšè—ç€ä¸€ä¸ªè‡´å‘½é™·é˜±ã€æœ¬æ–‡ä»¥@Transactionalä¸ºä¾‹ã€‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
    userRepository.<span class="hljs-title function_">save</span>(user); <span class="hljs-comment">// 1. æ•°æ®åº“æ“ä½œ</span>
    mqProducer.<span class="hljs-title function_">sendUserCreatedEvent</span>(user.<span class="hljs-title function_">getId</span>()); <span class="hljs-comment">// 2. å‘é€MQæ¶ˆæ¯</span>
    ......
}
</code></pre>
<p><strong>é—®é¢˜æ ¸å¿ƒ</strong>ï¼šå½“äº‹åŠ¡å°šæœªæäº¤æ—¶ï¼ŒMQæ¶ˆæ¯å·²è¢«å‘å‡ºã€‚ä¸‹æ¸¸æ¶ˆè´¹è€…ç«‹å³å¤„ç†è¯¥æ¶ˆæ¯ï¼Œå°è¯•æŸ¥è¯¢åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·æ•°æ®ï¼Œå´å› <strong>äº‹åŠ¡å°šæœªæäº¤</strong>è€ŒæŸ¥è¯¢ä¸åˆ°ï¼Œå¯¼è‡´ä¸šåŠ¡å¤±è´¥ã€‚</p>
<p>è¿™ä¸æ˜¯ç®€å•çš„ä»£ç bugï¼Œè€Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­<strong>æ—¶ç©ºé”™ä½</strong>çš„å…¸å‹è¡¨ç°â€”â€”äº‹åŠ¡è¾¹ç•Œä¸æ¶ˆæ¯ä¼ é€’åœ¨æ—¶é—´ç»´åº¦ä¸Šä¸åŒæ­¥ï¼Œé€ æˆæ•°æ®å¯è§æ€§ä¸ä¸€è‡´ã€‚æ­£å¦‚ç‰©ç†å­¦ä¸­çš„ç›¸å¯¹è®ºï¼Œä¸åŒå‚ç…§ç³»ï¼ˆæœåŠ¡ï¼‰å¯¹"ç°åœ¨"çš„å®šä¹‰å¹¶ä¸ç›¸åŒã€‚</p>
<h4 data-id="heading-2">1.1 äº‹åŠ¡æäº¤æ—¶æœºçš„è¿·æ€</h4>
<p>Springçš„<code>@Transactional</code>èƒŒåè¿ä½œæœºåˆ¶å¸¸è¢«è¯¯è§£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/212bc1a115e94599bf4fe23bd04a1767~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-P5aSp6L-b5q2l5LiA54K5X0pM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839166&amp;x-signature=2Q913JqQTWr59DU6UfyIMr8SynE%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®æ´å¯Ÿï¼š<strong>äº‹åŠ¡æäº¤å‘ç”Ÿåœ¨æ–¹æ³•æ‰§è¡Œç»“æŸä¹‹å</strong>ï¼Œè€Œéæ•°æ®åº“æ“ä½œä¹‹åã€‚å½“<code>mqProducer.send()</code>æ‰§è¡Œæ—¶ï¼Œäº‹åŠ¡å°šæœªæäº¤ï¼Œæ•°æ®å¯¹å…¶ä»–è¿æ¥ä¸å¯è§ã€‚</p>
<h3 data-id="heading-3">äºŒã€å¦‚ä½•è¯†åˆ«è¿™ç§åœºæ™¯ï¼Ÿ</h3>
<p>åœ¨ä»£ç å®¡æŸ¥ä¸­ï¼Œè­¦æƒ•åŒæ—¶å‡ºç°çš„ä»¥ä¸‹æ¨¡å¼ï¼š</p>
<ul>
<li><code>@Transactional</code>æ³¨è§£çš„æ–¹æ³•å†…ç›´æ¥è°ƒç”¨MQå‘é€</li>
<li>äº‹åŠ¡æ–¹æ³•å†…è°ƒç”¨å¼‚æ­¥æ–¹æ³•(<code>@Async</code>)</li>
<li>äº‹åŠ¡æ–¹æ³•å†…è§¦å‘è¿œç¨‹æœåŠ¡è°ƒç”¨</li>
<li>äº‹åŠ¡æ–¹æ³•ä¸­æ“ä½œç¼“å­˜(å¦‚Redis)</li>
</ul>
<h3 data-id="heading-4">ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">3.1 äº‹åŠ¡åŒæ­¥æœºåˆ¶ï¼šè®©æ¶ˆæ¯åœ¨æäº¤åå‘é€</h4>
<p>åˆ©ç”¨Springçš„<code>TransactionSynchronizationManager</code>æ³¨å†Œå›è°ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeUserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userRepository.<span class="hljs-title function_">save</span>(user);
        
        <span class="hljs-comment">// æ³¨å†Œäº‹åŠ¡æäº¤åçš„å›è°ƒ</span>
        <span class="hljs-title class_">TransactionSynchronizationManager</span>.<span class="hljs-title function_">registerSynchronization</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronization</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">afterCommit</span>(<span class="hljs-params"/>) {
                    mqProducer.<span class="hljs-title function_">sendUserCreatedEvent</span>(user.<span class="hljs-title function_">getId</span>());
                }
            }
        );
    }
}
</code></pre>
<h4 data-id="heading-6">3.2 äº‹åŠ¡æ¶ˆæ¯è¡¨ï¼šæœ¬åœ°äº‹åŠ¡ä¸æ¶ˆæ¯çš„åŸå­æ€§</h4>
<p>å°†æ¶ˆæ¯ä½œä¸ºä¸šåŠ¡æ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œå†™å…¥åŒä¸€äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
    userRepository.<span class="hljs-title function_">save</span>(user);
    <span class="hljs-comment">// åŒä¸€äº‹åŠ¡ä¸­ä¿å­˜æ¶ˆæ¯</span>
    messageRepository.<span class="hljs-title function_">save</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutboxMessage</span>(<span class="hljs-string">"user.created"</span>, user.<span class="hljs-title function_">getId</span>()));
}

<span class="hljs-comment">// ç‹¬ç«‹çš„å®šæ—¶ä»»åŠ¡/ç›‘å¬å™¨</span>
<span class="hljs-meta">@Scheduled</span>(fixedDelay = <span class="hljs-number">1000</span>)
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendPendingMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">OutboxMessage</span>&gt; messages = messageRepository.<span class="hljs-title function_">findPending</span>(<span class="hljs-number">100</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-title class_">OutboxMessage</span> message : messages) {
        <span class="hljs-keyword">if</span> (mqProducer.<span class="hljs-title function_">send</span>(message)) {
            message.<span class="hljs-title function_">setSent</span>(<span class="hljs-literal">true</span>);
        }
    }
}
</code></pre>
<p>ä¼˜åŠ¿ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯æ•°æ®ä¸æ¶ˆæ¯çš„ä¸€è‡´æ€§ï¼›</p>
<p>åŠ£åŠ¿ï¼šå¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦ï¼Œéœ€è¦å¤„ç†æ¶ˆæ¯è¡¨æ¸…ç†ã€é‡å¤å‘é€ç­‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-7">3.3 äº‹ä»¶æº¯æºï¼šé‡æ„æ•°æ®ä¸äº‹ä»¶çš„å…³ç³»</h4>
<p>å°†äº‹ä»¶æœ¬èº«ä½œä¸ºé¦–è¦æ•°æ®å­˜å‚¨ï¼Œè€Œéå‰¯äº§å“ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">@Transactional
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">User user</span>)</span> {
    <span class="hljs-comment">// åˆ›å»ºé¢†åŸŸäº‹ä»¶(æŒä¹…åŒ–)</span>
    UserCreatedEvent <span class="hljs-keyword">event</span> = <span class="hljs-keyword">new</span> UserCreatedEvent(user);
    eventRepository.save(<span class="hljs-keyword">event</span>);
    
    <span class="hljs-comment">// ä¸šåŠ¡æ•°æ®ä»äº‹ä»¶ä¸­æ´¾ç”Ÿ</span>
    userRepository.save(user);
}

<span class="hljs-comment">// äº‹ä»¶å¤„ç†å™¨(ç‹¬ç«‹äº‹åŠ¡)</span>
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserCreated</span>(<span class="hljs-params">UserCreatedEvent <span class="hljs-keyword">event</span></span>)</span> {
    mqProducer.send(<span class="hljs-keyword">event</span>);
}
</code></pre>
<p>è¿™ç§æ¨¡å¼å°†äº‹ä»¶æå‡ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ—¶åºé—®é¢˜ï¼Œä½†éœ€è¦å¯¹é¢†åŸŸæ¨¡å‹è¿›è¡Œé‡æ„ã€‚</p>
<h3 data-id="heading-8">å››ã€æ¶æ„å±‚é¢çš„æ€è€ƒ</h3>
<h4 data-id="heading-9">4.1 æœ€ç»ˆä¸€è‡´æ€§ vs å¼ºä¸€è‡´æ€§</h4>
<p>è®¤è¯†åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¼ºä¸€è‡´æ€§çš„é«˜æ˜‚ä»£ä»·ï¼Œå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯å¯æ¥å—<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">public void handleUserCreatedEvent(String userId) {
    User <span class="hljs-attr">user</span> = null<span class="hljs-comment">;</span>
    int <span class="hljs-attr">retryCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    // é‡è¯•æœºåˆ¶ï¼Œç­‰å¾…æ•°æ®å¯è§
    while (<span class="hljs-attr">user</span> == null &amp;&amp; retryCount &lt; <span class="hljs-number">5</span>) {
        <span class="hljs-attr">user</span> = userRepository.findById(userId).orElse(null)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">user</span> == null) {
            Thread.sleep(100 * (long)Math.pow(2, retryCount))<span class="hljs-comment">; // æŒ‡æ•°é€€é¿</span>
            retryCount++<span class="hljs-comment">;</span>
        }
    }
    
    if (<span class="hljs-attr">user</span> == null) {
        // é‡è¯•å¤±è´¥ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—æˆ–äººå·¥å¹²é¢„
        deadLetterService.handleUnresolvedEvent(userId)<span class="hljs-comment">;</span>
        return<span class="hljs-comment">;</span>
    }
    
    // æ­£å¸¸å¤„ç†
    processUser(user)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-10">4.2 äº‹åŠ¡è¾¹ç•Œè®¾è®¡åŸåˆ™</h4>
<ul>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šäº‹åŠ¡æ–¹æ³•åº”åªè´Ÿè´£æ•°æ®ä¸€è‡´æ€§ï¼Œä¸æ··æ‚å¤–éƒ¨é€šä¿¡</li>
<li><strong>æœ€å°äº‹åŠ¡åŸåˆ™</strong>ï¼šäº‹åŠ¡èŒƒå›´åº”å½“å°½å¯èƒ½å°ï¼ŒåªåŒ…å«å¿…è¦çš„æ•°æ®åº“æ“ä½œ</li>
<li><strong>åˆ†å±‚æ˜ç¡®åŸåˆ™</strong>ï¼šå°†äº‹åŠ¡æ§åˆ¶ã€ä¸šåŠ¡é€»è¾‘ã€é›†æˆé€šä¿¡åˆ†å±‚å®ç°</li>
</ul>

<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜åŒ–åçš„åˆ†å±‚è®¾è®¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TransactionalEventPublisher eventPublisher;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(CreateUserCommand command)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(command.getName(), command.getEmail());
        userRepository.save(user);
        
        <span class="hljs-comment">// ä»…å‘å¸ƒé¢†åŸŸäº‹ä»¶ï¼Œä¸å…³å¿ƒä¼ è¾“ç»†èŠ‚</span>
        eventPublisher.publishAfterCommit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserCreatedEvent</span>(user.getId()));
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEventConsumer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmailService emailService;
    
    <span class="hljs-meta">@TransactionalEventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUserCreated</span><span class="hljs-params">(UserCreatedEvent event)</span> {
        <span class="hljs-comment">// ä¿è¯åœ¨äº‹åŠ¡æäº¤åå¤„ç†</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(event.getUserId())
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">EntityNotFoundException</span>(<span class="hljs-string">"User not found after TX commit"</span>));
        
        emailService.sendWelcomeEmail(user);
    }
}
</code></pre>
<h3 data-id="heading-11">äº”ã€è§„é¿</h3>
<p>å½“åœ¨äº‹åŠ¡æ–¹æ³•ä¸­æ¶‰åŠå¼‚æ­¥æ“ä½œæ—¶ï¼Œé—®è‡ªå·±ï¼š</p>
<ol>
<li><strong>æ—¶åºéªŒè¯</strong>ï¼šæˆ‘çš„MQæ¶ˆè´¹è€…æ˜¯å¦ä¾èµ–æ­¤äº‹åŠ¡ä¸­åˆ›å»º/ä¿®æ”¹çš„æ•°æ®ï¼Ÿ</li>
<li><strong>è¾¹ç•Œè¯†åˆ«</strong>ï¼šäº‹åŠ¡è¾¹ç•Œæ˜¯å¦æ°å¥½åŒ…è£¹äº†æ‰€æœ‰æ•°æ®æ“ä½œï¼Œä¸åŒ…å«é€šä¿¡é€»è¾‘ï¼Ÿ</li>
<li><strong>å›æ»šè€ƒé‡</strong>ï¼šè‹¥äº‹åŠ¡å›æ»šï¼Œå·²å‘é€çš„MQæ¶ˆæ¯å¦‚ä½•å¤„ç†ï¼Ÿ(è¡¥å¿æœºåˆ¶)</li>
<li><strong>é‡è¯•è®¾è®¡</strong>ï¼šæ¶ˆè´¹è€…æ˜¯å¦å…·å¤‡å¹‚ç­‰æ€§å’Œé‡è¯•èƒ½åŠ›ï¼Œåº”å¯¹çŸ­æš‚ä¸ä¸€è‡´ï¼Ÿ</li>
<li><strong>ç›‘æ§è¦†ç›–</strong>ï¼šæ˜¯å¦æœ‰ç›‘æ§èƒ½æ£€æµ‹åˆ°"æ¶ˆæ¯å…ˆäºæ•°æ®åˆ°è¾¾"çš„å¼‚å¸¸æƒ…å†µï¼Ÿ</li>
</ol>
<p>äº‹åŠ¡ä¸MQçš„åè°ƒé—®é¢˜ï¼Œæœ¬è´¨æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ—¶ç©ºå…³ç³»çš„æ˜ å°„ã€‚</p>
<p>é¿å…æ­¤é—®é¢˜ä¸åœ¨äºä½¿ç”¨æ›´å¤æ‚çš„æ¡†æ¶ï¼Œè€Œåœ¨äº<strong>æ·±åˆ»ç†è§£äº‹åŠ¡è¾¹ç•Œ</strong>ã€<strong>æ˜ç¡®ç³»ç»Ÿç»„ä»¶é—´çš„æ—¶åºä¾èµ–</strong>ï¼Œä»¥åŠ<strong>è®¾è®¡ç¬¦åˆç‰©ç†è§„å¾‹çš„æ¶æ„</strong>ã€‚</p>
<p>å½“ä½ ä¸‹æ¬¡åœ¨äº‹åŠ¡æ–¹æ³•ä¸­ç¼–å†™MQå‘é€ä»£ç æ—¶ï¼Œä¸å¦¨æš‚åœç‰‡åˆ»ï¼Œæ€è€ƒï¼šæ­¤åˆ»ï¼Œæˆ‘çš„æ•°æ®çš„ç¡®åˆ‡ä½ç½®æ˜¯ä»€ä¹ˆï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–]]></title>    <link>https://juejin.cn/post/7577189654488842290</link>    <guid>https://juejin.cn/post/7577189654488842290</guid>    <pubDate>2025-11-27T08:47:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654488842290" data-draft-id="7577189654488645682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T08:47:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Drift_Dream"/> <meta itemprop="url" content="https://juejin.cn/user/3107677514241500"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3107677514241500/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Drift_Dream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:47:03.000Z" title="Thu Nov 27 2025 08:47:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ResizeObserverï¼Ÿ</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦çŸ¥é“ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚è¿‡å»ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ç›‘å¬windowçš„resizeäº‹ä»¶ï¼Œä½†è¿™åªèƒ½ç›‘å¬æµè§ˆå™¨çª—å£çš„å˜åŒ–ï¼Œæ— æ³•ç›‘å¬å…·ä½“å…ƒç´ çš„å˜åŒ–ã€‚ResizeObserveråº”è¿è€Œç”Ÿï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›‘å¬ä»»æ„å…ƒç´ çš„å¤§å°å˜åŒ–ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒResizeObserverå°±åƒæ˜¯ä¸€ä¸ª"å°ºå¯¸ç›‘è§†å™¨"ï¼Œå½“è¢«è§‚å¯Ÿçš„å…ƒç´ å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šç«‹å³é€šçŸ¥æˆ‘ä»¬ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦ResizeObserverï¼Ÿ</h3>
<p>åœ¨ResizeObserverå‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³è¦ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ol>
<li><strong>window.resizeäº‹ä»¶</strong>ï¼šåªèƒ½ç›‘å¬çª—å£å˜åŒ–ï¼Œä¸èƒ½ç›‘å¬å…·ä½“å…ƒç´ </li>
<li><strong>è½®è¯¢æ£€æŸ¥</strong>ï¼šé€šè¿‡å®šæ—¶å™¨ä¸æ–­æ£€æŸ¥å…ƒç´ å°ºå¯¸ï¼Œæ€§èƒ½å·®</li>
<li><strong>MutationObserver</strong>ï¼šå¯ä»¥ç›‘å¬DOMå˜åŒ–ï¼Œä½†æ— æ³•ç›´æ¥ç›‘å¬å°ºå¯¸å˜åŒ–</li>
</ol>
<p>è¿™äº›æ–¹æ³•è¦ä¹ˆåŠŸèƒ½æœ‰é™ï¼Œè¦ä¹ˆæ€§èƒ½ä¸ä½³ã€‚ResizeObserverä¸“é—¨ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿï¼Œå®ƒæä¾›äº†é«˜æ•ˆã€ç²¾å‡†çš„å…ƒç´ å°ºå¯¸ç›‘å¬èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-3">åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-4">åˆ›å»ºResizeObserver</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºResizeObserverå®ä¾‹</span>
<span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-comment">// entry.targetï¼šè¢«è§‚å¯Ÿçš„å…ƒç´ </span>
    <span class="hljs-comment">// entry.contentRectï¼šå…ƒç´ çš„å°ºå¯¸ä¿¡æ¯</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å°ºå¯¸å‘ç”Ÿå˜åŒ–:'</span>, entry.<span class="hljs-property">contentRect</span>);
  }
});
</code></pre>
<h4 data-id="heading-5">è§‚å¯Ÿå…ƒç´ </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myElement'</span>);
resizeObserver.<span class="hljs-title function_">observe</span>(element);
</code></pre>
<h4 data-id="heading-6">åœæ­¢è§‚å¯Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœæ­¢è§‚å¯Ÿç‰¹å®šå…ƒç´ </span>
resizeObserver.<span class="hljs-title function_">unobserve</span>(element);

<span class="hljs-comment">// åœæ­¢æ‰€æœ‰è§‚å¯Ÿå¹¶é”€æ¯å®ä¾‹</span>
resizeObserver.<span class="hljs-title function_">disconnect</span>();
</code></pre>
<h3 data-id="heading-7">å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ResizeObserver<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.box</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
    }
    <span class="hljs-selector-class">.resizeable</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">resize</span>: both;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">overflow</span>: auto;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
    }
    <span class="hljs-selector-class">.resizeable1</span> {
      <span class="hljs-attribute">background-color</span>: aquamarine;
    }
    <span class="hljs-selector-class">.resizeable2</span> {
      <span class="hljs-attribute">background-color</span>: blueviolet;
    }
    <span class="hljs-selector-class">.log</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">resize</span>: both;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-direction</span>: column;
      <span class="hljs-attribute">justify-content</span>: space-around;
      <span class="hljs-attribute">align-items</span>: center;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizeable resizeable1"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"resizeable1"</span>&gt;</span>box1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizeable resizeable2"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"resizeable2"</span>&gt;</span>box2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"log"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> textNode1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".text1"</span>);
    <span class="hljs-keyword">const</span> textNode2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".text2"</span>);

    <span class="hljs-keyword">const</span> resizeNode1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#resizeable1"</span>);
    <span class="hljs-keyword">const</span> resizeNode2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#resizeable2"</span>);

    <span class="hljs-keyword">const</span> nodeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(entry);
        <span class="hljs-keyword">const</span> { width, height } = entry.<span class="hljs-property">contentRect</span>;
        <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">target</span>.<span class="hljs-property">id</span> === <span class="hljs-string">"resizeable1"</span>) {
          textNode1.<span class="hljs-property">textContent</span> = <span class="hljs-string">`box1å½“å‰å°ºå¯¸ï¼š<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
            width
          )}</span> * <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(height)}</span> åƒç´ `</span>;
        } <span class="hljs-keyword">else</span> {
          textNode2.<span class="hljs-property">textContent</span> = <span class="hljs-string">`box2å½“å‰å°ºå¯¸ï¼š<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
            width
          )}</span> * <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(height)}</span> åƒç´ `</span>;
        }
      }
    });
    nodeObserver.<span class="hljs-title function_">observe</span>(resizeNode1);
    nodeObserver.<span class="hljs-title function_">observe</span>(resizeNode2);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b3ca003d764be99aab9eb28c9d639a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838022&amp;x-signature=sofh2PB60pDRxQWbUIPTaXkLfxI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">åœ¨Vue 3ä¸­çš„ä½¿ç”¨å®è·µ</h3>
<h4 data-id="heading-9">ç»„åˆå¼APIç”¨æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-observer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"resizableElement"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizable-box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ResizeObserver ç®€å•ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å®½åº¦: {{ width }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰é«˜åº¦: {{ height }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">const</span> resizableElement = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">let</span> <span class="hljs-attr">resizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
        width.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
        height.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>;
      }
    });

    resizeObserver.<span class="hljs-title function_">observe</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizeObserver) {
    resizeObserver.<span class="hljs-title function_">disconnect</span>();
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.resizable-box</span> {
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: auto;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-10">è‡ªå®šä¹‰Hookå°è£…</h4>
<p>ä¸ºäº†æ›´å¥½åœ°å¤ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ResizeObserverå°è£…æˆè‡ªå®šä¹‰Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { onUnmounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useResizeObserver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">let</span> <span class="hljs-attr">resizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">observe</span> = (<span class="hljs-params">el: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
    resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        width.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
        height.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>;
      }
    });
    resizeObserver.<span class="hljs-title function_">observe</span>(el);
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">unobserve</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
  };
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
  });
  <span class="hljs-keyword">return</span> {
    width,
    height,
    observe,
    unobserve,
  };
}

</code></pre>
<p>ä½¿ç”¨è‡ªå®šä¹‰Hook</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-observer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"resizableElement"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizable-box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨é’©å­å‡½æ•°å®ç°çš„ ResizeObserver<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å®½åº¦: {{ width }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰é«˜åº¦: {{ height }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted, onUnmounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { useResizeObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hook/useResizeObserver.ts"</span>;

<span class="hljs-keyword">const</span> { width, height, observe, unobserve } = <span class="hljs-title function_">useResizeObserver</span>();

<span class="hljs-keyword">const</span> resizableElement = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">observe</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">unobserve</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.resizable-box</span> {
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: auto;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background-color</span>: aquamarine;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-11">Vue 3ä¸­ResizeObserverçš„å®é™…åº”ç”¨ï¼šå¯è°ƒæ•´å¸ƒå±€çš„ç®¡ç†åå°</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯è°ƒæ•´å®½åº¦çš„ä¾§è¾¹æ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"sidebarRef"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ width: sidebarWidth + 'px' }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¯¼èˆªèœå•<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
            <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in menuItems"</span>
            <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span>
            <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: activeMenu === item.id }"</span>
            @<span class="hljs-attr">click</span>=<span class="hljs-string">"activeMenu = item.id"</span>
          &gt;</span>
            {{ item.name }}
          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- æ‹–æ‹½æŠŠæ‰‹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-handle"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"startResize"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"mainRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"toggleSidebar"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toggle-btn"</span>&gt;</span>
          {{ isSidebarCollapsed ? "å±•å¼€ä¾§è¾¹æ " : "æŠ˜å ä¾§è¾¹æ " }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ˜¾ç¤ºå½“å‰å°ºå¯¸ä¿¡æ¯ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"size-info"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¾§è¾¹æ å®½åº¦: {{ sidebarWidth }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸»å†…å®¹åŒºåŸŸå®½åº¦: {{ mainContentWidth }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-comment">//  ä¾§è¾¹æ çŠ¶æ€</span>
<span class="hljs-keyword">const</span> sidebarWidth = <span class="hljs-title function_">ref</span>(<span class="hljs-number">280</span>);
<span class="hljs-keyword">const</span> isSidebarCollapsed = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> activeMenu = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"dashboard"</span>);

<span class="hljs-comment">// å…ƒç´ å¼•ç”¨</span>
<span class="hljs-keyword">const</span> sidebarRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> mainRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// å°ºå¯¸æ•°æ®</span>
<span class="hljs-keyword">const</span> mainContentWidth = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// èœå•æ•°æ®</span>
<span class="hljs-keyword">const</span> menuItems = [
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"dashboard"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ä»ªè¡¨ç›˜"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"users"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ç”¨æˆ·ç®¡ç†"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"orders"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"è®¢å•ç®¡ç†"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"settings"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ç³»ç»Ÿè®¾ç½®"</span> },
];

<span class="hljs-comment">// ç›‘å¬ä¸»å†…å®¹åŒºåŸŸå®½åº¦å˜åŒ–</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">mainResizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç›‘å¬ä¸»å†…å®¹åŒºåŸŸå®½åº¦</span>
  mainResizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
      mainContentWidth.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
    }
  });

  <span class="hljs-keyword">if</span> (mainRef.<span class="hljs-property">value</span>) {
    mainResizeObserver.<span class="hljs-title function_">observe</span>(mainRef.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-comment">// åˆ‡æ¢ä¾§è¾¹æ æ˜¾ç¤º/éšè—</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleSidebar</span> = (<span class="hljs-params"/>) =&gt; {
  isSidebarCollapsed.<span class="hljs-property">value</span> = !isSidebarCollapsed.<span class="hljs-property">value</span>;
  sidebarWidth.<span class="hljs-property">value</span> = isSidebarCollapsed.<span class="hljs-property">value</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">280</span>;
};

<span class="hljs-comment">// å¼€å§‹è°ƒæ•´ä¾§è¾¹æ å®½åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startResize</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-keyword">const</span> startX = e.<span class="hljs-property">clientX</span>;
  <span class="hljs-keyword">const</span> startWidth = sidebarWidth.<span class="hljs-property">value</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseMove</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> newWidth = startWidth + (e.<span class="hljs-property">clientX</span> - startX);
    <span class="hljs-comment">// é™åˆ¶æœ€å°å’Œæœ€å¤§å®½åº¦</span>
    <span class="hljs-keyword">if</span> (newWidth &gt;= <span class="hljs-number">200</span> &amp;&amp; newWidth &lt;= <span class="hljs-number">500</span>) {
      sidebarWidth.<span class="hljs-property">value</span> = newWidth;
      isSidebarCollapsed.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousemove"</span>, handleMouseMove);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
  };

  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousemove"</span>, handleMouseMove);
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
};

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (mainResizeObserver) {
    mainResizeObserver.<span class="hljs-title function_">disconnect</span>();
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.demo-container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
}

<span class="hljs-selector-class">.sidebar</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2c3e50</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.sidebar-content</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#34495e</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.nav-item</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#34495e</span>;
}

<span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.resize-handle</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#34495e</span>;
  <span class="hljs-attribute">cursor</span>: col-resize;
  <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.resize-handle</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.main-content</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ecf0f1</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
}

<span class="hljs-selector-class">.content-header</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.toggle-btn</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.toggle-btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2980b9</span>;
}

<span class="hljs-selector-class">.size-info</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
}

<span class="hljs-selector-class">.chart-container</span>,
<span class="hljs-selector-class">.table-container</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€]]></title>    <link>https://juejin.cn/post/7577016562252873779</link>    <guid>https://juejin.cn/post/7577016562252873779</guid>    <pubDate>2025-11-27T08:47:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252873779" data-draft-id="7576953459544916022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€"/> <meta itemprop="keywords" content="Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T08:47:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jason_yang"/> <meta itemprop="url" content="https://juejin.cn/user/2972704795802653"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2972704795802653/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jason_yang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:47:28.000Z" title="Thu Nov 27 2025 08:47:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.èƒŒæ™¯</h2>
<p>åœ¨ Vue 3 å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸€ä¸ªåº”ç”¨åªéœ€è¦è°ƒç”¨ä¸€æ¬¡ <code>createApp()</code> åˆ›å»ºä¸€ä¸ªæ ¹åº”ç”¨å®ä¾‹ã€‚ä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œç¡®å®éœ€è¦åˆ›å»ºå¤šä¸ª Vue åº”ç”¨å®ä¾‹ï¼ˆå³å¤šæ¬¡è°ƒç”¨ <code>createApp</code>ï¼‰ã€‚è¿™äº›åœºæ™¯ä¸»è¦åŒ…æ‹¬ï¼š</p>
<h2 data-id="heading-1">2.åœºæ™¯</h2>
<h3 data-id="heading-2">1.åŠ¨æ€ç”Ÿæˆhtml</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
æ¯”å¦‚åœ¨ä½¿ç”¨googleåœ°å›¾çš„æ—¶å€™ï¼Œç‚¹å‡»å¼¹æ¡†ä½¿ç”¨ä¼ å…¥ä¸€ä¸ªhtmlå¼¹æ¡†å†…å®¹è¯¦æƒ…å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96752d0b501d4d1d88e1c6604a7a50ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamFzb25feWFuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839137&amp;x-signature=NK%2FKgzo6IZCklM4TVPIw848jaE8%3D" alt="image.png" loading="lazy"/>
ä¸Šé¢å°±æ˜¯è°·æ­Œç‚¹å‡»æ—¶å€™æä¾›çš„å¼¹æ¡†å†…å®¹ï¼Œä½¿ç”¨<code>InfoWindow.open</code>è§¦å‘å¼¹æ¡†ï¼Œã€‚<code>infoWindow.setContent</code>æ’å…¥è‡ªå·±è¦æ˜¾ç¤ºçš„è¯¦æƒ…å†…å®¹ã€‚</p>
<p>è€åŠæ³•æ˜¯ç›´æ¥jquery æ’å„ç§domæ“ä½œã€‚ä½†ç°åœ¨éƒ½ç»„ä»¶åŒ–äº†å¦‚æœèƒ½å¤ç”¨ç°æœ‰çš„æ¶æ„å’Œæ ·å¼æ˜¯æœ€ç†æƒ³çš„ã€‚</p>
<h4 data-id="heading-3">æ–¹æ¡ˆ1 createApp</h4>
<p>è¿™æ—¶å€™å°±å¯ä»¥åˆ©ç”¨createAppåˆ›å»ºvueæ¥æ¸²æŸ“è¯¦æƒ…ï¼Œè¿™æ ·å°±å¯ä»¥å¤ç”¨ç³»ç»Ÿå·²ç»å¼€å‘å¥½çš„æ ·å¼çš„ç»“æ„ã€‚ï¼ˆç¼ºç‚¹é‡æ–°å®ä¾‹äº†ä¸€éæœ‰ä¸€å®šå¼€é”€ï¼‰</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-Js" lang="Js">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">StoreInfoWindow</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/StoreInfoWindow.vue'</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">infoWindow</span>: google.<span class="hljs-property">maps</span>.<span class="hljs-property">InfoWindow</span>
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">markerShowDetail</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">marker: google.maps.marker.AdvancedMarkerElement</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨æ¥å£æŸ¥è¯¢è¯¦æƒ…æ•°æ®</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: any = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getStoreInfo</span>(marker)
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span> &amp;&amp; res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>) {
        <span class="hljs-comment">// è¯¦æƒ…é¡µé¢æ˜¾ç¤º</span>
        <span class="hljs-keyword">const</span> storeDetail = res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>
        <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
        infoWindow.<span class="hljs-title function_">setContent</span>(content)
        infoWindow.<span class="hljs-title function_">open</span>(map, marker)
        <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">StoreInfoWindow</span>, { <span class="hljs-attr">store</span>: xxx })
        app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>)
        app.<span class="hljs-title function_">mount</span>(content)
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// loading.value = false</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error fetching store info:'</span>, error)
    }
  }
</code></pre>
<h4 data-id="heading-4">æ–¹æ¡ˆ2 éšè—div</h4>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨createAppï¼Œç›´æ¥åœ¨ç°æœ‰sfcé¡µé¢é‡Œ æ’å…¥ä¸€ä¸ªéšè—çš„divï¼Œå†…å®¹æŠŠå†…å®¹æ¸²æŸ“åˆ°éšè—divï¼Œè°ƒç”¨<code>infoWindow.setContent</code>ä¼ å…¥dom</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">StoreInfoWindow</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/StoreInfoWindow.vue'</span>
  
 &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"hideDiv"</span>&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">StoreInfoWindow</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"storeInfoRef"</span> <span class="hljs-attr">:store</span>=<span class="hljs-string">"storeDetail"</span>  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StoreInfoWindow</span>&gt;</span></span>
    &lt;/div&gt;


  <span class="hljs-keyword">const</span> storeDetail = ref&lt;<span class="hljs-title class_">MapStore</span>&gt;()
  <span class="hljs-keyword">const</span> storeInfoRef = <span class="hljs-title function_">ref</span>()
  <span class="hljs-keyword">let</span> <span class="hljs-attr">infoWindow</span>: google.<span class="hljs-property">maps</span>.<span class="hljs-property">InfoWindow</span>
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">markerShowDetail</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">marker: google.maps.marker.AdvancedMarkerElement</span>) =&gt; {    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨æ¥å£æŸ¥è¯¢è¯¦æƒ…æ•°æ®</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: any = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getStoreInfo</span>(marker)
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span> &amp;&amp; res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>) {
        <span class="hljs-comment">// è¯¦æƒ…é¡µé¢æ˜¾ç¤º</span>
        storeDetail.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>
        <span class="hljs-keyword">if</span> (storeInfoRef.<span class="hljs-property">value</span>) {
          <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
            infoWindow.<span class="hljs-title function_">setContent</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)
            infoWindow.<span class="hljs-title function_">open</span>(map, marker)
          })
        }
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error fetching store info:'</span>, error)
    }
  }
</code></pre>
<blockquote>
<p>ç”±äºä¸€ä¸ªdomèŠ‚ç‚¹ ä¸èƒ½åŒæ—¶æŒ‚åœ¨å¤šä¸ªä¸åŒèŠ‚ç‚¹ä¸‹ï¼Œæ‰€ä»¥ä¸Šé¢çš„infoWindow.setContent(storeInfoRef.value.$el) è®¾ç½®åï¼ŒhideDivçš„ä¸‹é¢çš„å†…å®¹ä¼šè¢«ç§»èµ°ã€‚æ‰€ä»¥å…³é—­æ—¶å€™éœ€è¦è¿˜åŸå›æ¥ã€‚é˜²æ­¢èŠ‚ç‚¹å¼•ç”¨ä¸¢å¤±ã€‚</p>
</blockquote>
<p>å…³é—­åï¼Œè¡¥å¿æ–¹æ³•</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">infoWindowClose</span> = (<span class="hljs-params"/>) =&gt; {
    infoWindow.<span class="hljs-title function_">close</span>()
    <span class="hljs-keyword">const</span> hideDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.hideDiv'</span>)
    <span class="hljs-keyword">if</span> (hideDiv) {
      <span class="hljs-keyword">if</span> (!hideDiv.<span class="hljs-title function_">contains</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)) {
        hideDiv.<span class="hljs-title function_">appendChild</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)
      }
    }
  }
</code></pre>
<h3 data-id="heading-5">2.å¾®å‰ç«¯æ¶æ„ï¼ˆMicro Frontendsï¼‰</h3>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œä¸€ä¸ªé¡µé¢å¯èƒ½ç”±å¤šä¸ªç‹¬ç«‹çš„å­åº”ç”¨ç»„æˆï¼Œæ¯ä¸ªå­åº”ç”¨å¯èƒ½æ˜¯ç”±ä¸åŒçš„å›¢é˜Ÿå¼€å‘ã€ä½¿ç”¨ä¸åŒçš„æ¡†æ¶æˆ–ä¸åŒç‰ˆæœ¬çš„ Vueã€‚ä¸ºäº†éš”ç¦»ä½œç”¨åŸŸå’Œé¿å…å†²çªï¼Œæ¯ä¸ªå­åº”ç”¨åº”æ‹¥æœ‰è‡ªå·±çš„ Vue å®ä¾‹ã€‚</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-number">1</span><span class="hljs-comment">// å­åº”ç”¨ A</span>
2<span class="hljs-keyword">const</span> appA = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">AppA</span>);
3appA.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#micro-app-a'</span>);
<span class="hljs-number">4</span>
<span class="hljs-number">5</span><span class="hljs-comment">// å­åº”ç”¨ B</span>
6<span class="hljs-keyword">const</span> appB = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">AppB</span>);
7appB.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#micro-app-b'</span>);
</code></pre>
<blockquote>
<p>æ¯ä¸ªå­åº”ç”¨å¯ä»¥ç‹¬ç«‹æ³¨å†Œæ’ä»¶ã€å…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ç­‰ï¼Œäº’ä¸å½±å“ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3.åœ¨åŒä¸€ä¸ªé¡µé¢åµŒå…¥å¤šä¸ªç‹¬ç«‹çš„ Vue åº”ç”¨</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
æ¯”å¦‚ä¸€ä¸ªä¼ ç»Ÿå¤šé¡µç½‘ç«™ï¼ˆé SPAï¼‰ä¸­ï¼ŒæŸäº›é¡µé¢åŒ…å«å¤šä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚å¯¼èˆªæ ã€ä¾§è¾¹è´­ç‰©è½¦ã€è¯„è®ºåŒºï¼‰ï¼Œå®ƒä»¬å½¼æ­¤é€»è¾‘ç‹¬ç«‹ï¼Œä¸éœ€è¦å…±äº«çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦é€šä¿¡ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-Html" lang="Html"><span class="hljs-comment">&lt;!-- index.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"header-widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cart-widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"comment-section"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HeaderWidget</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HeaderWidget.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CartWidget</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CartWidget.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CommentSection</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CommentSection.vue'</span>;

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">HeaderWidget</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#header-widget'</span>);
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">CartWidget</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#cart-widget'</span>);
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">CommentSection</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#comment-section'</span>);
</code></pre>
<blockquote>
<p>æ¯ä¸ª widget æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Vue åº”ç”¨ï¼Œå¯å•ç‹¬å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">4.æ’ä»¶æˆ–ç¬¬ä¸‰æ–¹åº“éœ€è¦éš”ç¦»çš„ Vue å®ä¾‹</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
å½“ä½ å¼€å‘ä¸€ä¸ª Vue æ’ä»¶ï¼ˆå¦‚ UI ç»„ä»¶åº“ä¸­çš„å¼¹çª—ã€é€šçŸ¥ç­‰ï¼‰ï¼Œè€Œè¯¥æ’ä»¶å†…éƒ¨éœ€è¦æ¸²æŸ“ Vue ç»„ä»¶æ—¶ï¼Œä¸ºé¿å…æ±¡æŸ“ä¸»åº”ç”¨çš„å…¨å±€é…ç½®ï¼ˆå¦‚å…¨å±€æŒ‡ä»¤ã€æ··å…¥ã€provide/inject ç­‰ï¼‰ï¼Œåº”åˆ›å»ºç‹¬ç«‹çš„ Vue å®ä¾‹ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼ˆå°è£…ä¸€ä¸ªå…¨å±€ Toast ç»„ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-comment">// toast.js</span>
<span class="hljs-keyword">import</span> { createVNode, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ToastComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Toast.vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);

  <span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">createVNode</span>(<span class="hljs-title class_">ToastComponent</span>, { message });
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({}); <span class="hljs-comment">// åˆ›å»ºå¹²å‡€å®ä¾‹</span>
  app.<span class="hljs-title function_">mount</span>(container);
  <span class="hljs-title function_">render</span>(vm, container);
}
</code></pre>
<blockquote>
<p>è¿™æ · Toast ä¸ä¼šç»§æ‰¿ä¸»åº”ç”¨çš„å…¨å±€é…ç½®ï¼Œæ›´å®‰å…¨å¯é ã€‚</p>
</blockquote>
<h3 data-id="heading-8">5.å•å…ƒæµ‹è¯•æˆ–å¤šå®ä¾‹æ²™ç®±ç¯å¢ƒ</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œä¸ºé¿å…æµ‹è¯•ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åº”ä½¿ç”¨ç‹¬ç«‹çš„ Vue åº”ç”¨å®ä¾‹ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼ˆVitest / Jestï¼‰ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-title function_">test</span>(<span class="hljs-string">'Component A works'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">ComponentA</span>);
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  app.<span class="hljs-title function_">mount</span>(div);
  <span class="hljs-comment">// ...æ–­è¨€</span>
  app.<span class="hljs-title function_">unmount</span>();
});

<span class="hljs-title function_">test</span>(<span class="hljs-string">'Component B works'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">ComponentB</span>); <span class="hljs-comment">// å…¨æ–°å®ä¾‹ï¼Œæ— æ±¡æŸ“</span>
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<h2 data-id="heading-9">3.createApp æ„é€ æ–¹å¼</h2>
<p>æˆ‘ä»¬å¤ä¹ ä¸€ä¸‹ åˆ›å»ºçš„æ–¹å¼</p>
<h3 data-id="heading-10"><strong>1.ä¼ å…¥ SFCï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰ã€æœ€å¸¸ç”¨ã€‘</strong></h3>
<h4 data-id="heading-11">ä¼ å…¥ .vue æ–‡ä»¶ä½œä¸ºæ ¹ç»„ä»¶</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-12">å¸¦ root props çš„æ–¹å¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello'</span> }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>SFC å†…ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13"><strong>2.ä¼ å…¥ Options API å¯¹è±¡ï¼ˆæ„é€ å¯¹è±¡ç»„ä»¶ï¼‰</strong></h3>
<p>ä¸ç”¨ SFCï¼Œç›´æ¥ä¼ ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<h4 data-id="heading-14">ç›´æ¥ä¼ ç»„ä»¶å¯¹è±¡</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">msg</span>: <span class="hljs-string">'Hello'</span> }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;{{ msg }}&lt;/div&gt;`</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-15">å¸¦ root props</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'title'</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h1&gt;{{ title }}&lt;/h1&gt;`</span>
}, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello Props'</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-16"><strong>3.ä¼ å…¥ Render Functionï¼ˆå‡½æ•°å¼åˆ›å»ºæ ¹ç»„ä»¶ï¼‰</strong></h3>
<h4 data-id="heading-17">ä½¿ç”¨ <code>h()</code> æ¸²æŸ“å‡½æ•°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">createApp</span>({
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, <span class="hljs-string">'Hello from render'</span>)
  }
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-18">å¸¦ root props çš„ render å†™æ³•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'msg'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, props.<span class="hljs-property">msg</span>)
  }
}, {
  <span class="hljs-attr">msg</span>: <span class="hljs-string">'Hello props'</span>
})
.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<hr/>
<h3 data-id="heading-19"><strong>4.ä¼ å…¥ Template å­—ç¬¦ä¸²ï¼ˆinline æ¨¡æ¿ï¼‰</strong></h3>
<p>é€‚ç”¨äºå¿«é€Ÿ demoï¼š</p>
<h4 data-id="heading-20">æ ¹ç»„ä»¶ç›´æ¥å†™ template å­—ç¬¦ä¸²</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;p&gt;Hello Template&lt;/p&gt;`</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-21">root props + template</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'text'</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;p&gt;{{ text }}&lt;/p&gt;`</span>
}, {
  <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello!'</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h2 data-id="heading-22">4.æ•°æ®å…±äº«é—®é¢˜</h2>
<p>ç”±äºä¸¤ä¸ªapp æ˜¯ç‹¬ç«‹çš„æ²™ç›’ï¼Œä½†æ˜¯æˆ‘ä»¬åˆéœ€è¦åŒæ­¥éƒ¨åˆ†æ•°æ®çŠ¶æ€</p>
<h3 data-id="heading-23">1.å…¨å±€å˜é‡ï¼ˆç®€å•åœºæ™¯ï¼Œä¸æ¨èå¤§å‹é¡¹ç›®ï¼‰</h3>
<p>é€šè¿‡æµè§ˆå™¨å…¨å±€å¯¹è±¡ï¼ˆ<code>window</code>ï¼‰å­˜å‚¨å…±äº«æ•°æ®ï¼Œåˆ©ç”¨ Vue çš„å“åº”å¼ APIï¼ˆ<code>ref</code>/<code>reactive</code>ï¼‰ä¿è¯æ•°æ®å˜æ›´èƒ½è§¦å‘è§†å›¾æ›´æ–°ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script&gt;
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;

  <span class="hljs-comment">// 1. å®šä¹‰å…¨å±€å…±äº«çš„å“åº”å¼æ•°æ®</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span> = <span class="hljs-title function_">ref</span>({
    <span class="hljs-attr">username</span>: <span class="hljs-string">'Vueå¼€å‘è€…'</span>,
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  });

  <span class="hljs-comment">// 2. åº”ç”¨å®ä¾‹1ï¼šä½¿ç”¨å…¨å±€å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> shared = <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; shared.<span class="hljs-property">value</span>.<span class="hljs-property">count</span>++;
      <span class="hljs-keyword">return</span> { shared, increment };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
      &lt;div&gt;
        &lt;h3&gt;åº”ç”¨1 - è®¡æ•°ï¼š{{ shared.count }}&lt;/h3&gt;
        &lt;button @click="increment"&gt;+1&lt;/button&gt;
      &lt;/div&gt;
    `</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// 3. åº”ç”¨å®ä¾‹2ï¼šå…±äº«åŒä¸€ä»½æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> shared = <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"/>) =&gt; shared.<span class="hljs-property">value</span>.<span class="hljs-property">username</span> = <span class="hljs-string">'æ–°åç§°'</span>;
      <span class="hljs-keyword">return</span> { shared, changeName };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
      &lt;div&gt;
        &lt;h3&gt;åº”ç”¨2 - ç”¨æˆ·åï¼š{{ shared.username }}&lt;/h3&gt;
        &lt;h3&gt;åº”ç”¨2 - åŒæ­¥è®¡æ•°ï¼š{{ shared.count }}&lt;/h3&gt;
        &lt;button @click="changeName"&gt;ä¿®æ”¹ç”¨æˆ·å&lt;/button&gt;
      &lt;/div&gt;
    `</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-24">2.äº‹ä»¶æ€»çº¿</h3>
<p>é€šè¿‡ç¬¬ä¸‰æ–¹äº‹ä»¶åº“ï¼ˆå¦‚Â <code>mitt</code>ï¼‰å®ç°è·¨å®ä¾‹çš„ â€œå‘å¸ƒ - è®¢é˜…â€ é€šä¿¡ï¼Œé€‚ç”¨äºéœ€è¦<strong>è§¦å‘è¡Œä¸º / ä¼ é€’ä¸´æ—¶æ•°æ®</strong>çš„åœºæ™¯ï¼ˆè€ŒéæŒä¹…åŒ–å…±äº«çŠ¶æ€ï¼‰ã€‚</p>
<h4 data-id="heading-25">æ­¥éª¤ï¼š</h4>
<ol>
<li>å®‰è£…Â <code>mitt</code>ï¼ˆå·¥ç¨‹åŒ–é¡¹ç›®ï¼‰ï¼š<code>npm install mitt</code>ï¼›</li>
<li>åˆ›å»ºå…¨å±€äº‹ä»¶æ€»çº¿å®ä¾‹ï¼›</li>
<li>ä¸åŒåº”ç”¨å®ä¾‹é€šè¿‡Â <code>emit</code>Â å‘å¸ƒäº‹ä»¶ï¼Œ<code>on</code>Â ç›‘å¬äº‹ä»¶ä¼ é€’æ•°æ®ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js">&lt;!-- <span class="hljs-variable constant_">CDN</span> æ–¹å¼ç¤ºä¾‹ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.prod.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/mitt/dist/mitt.umd.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;
  <span class="hljs-comment">// 1. åˆ›å»ºå…¨å±€äº‹ä»¶æ€»çº¿</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span> = <span class="hljs-title function_">mitt</span>();

  <span class="hljs-comment">// åº”ç”¨1ï¼šå‘å¸ƒäº‹ä»¶ï¼ˆä¼ é€’æ•°æ®ï¼‰</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendCount</span> = (<span class="hljs-params"/>) =&gt; {
        count.<span class="hljs-property">value</span>++;
        <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ï¼Œæºå¸¦æ•°æ®</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'count-change'</span>, count.<span class="hljs-property">value</span>);
      };
      <span class="hljs-keyword">return</span> { count, sendCount };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;button @click="sendCount"&gt;åº”ç”¨1å‘é€è®¡æ•°&lt;/button&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// åº”ç”¨2ï¼šç›‘å¬äº‹ä»¶ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> receiveCount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
      <span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼Œæ¥æ”¶æ•°æ®</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'count-change'</span>, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
        receiveCount.<span class="hljs-property">value</span> = val;
      });
      <span class="hljs-keyword">return</span> { receiveCount };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨2æ¥æ”¶çš„è®¡æ•°ï¼š{{ receiveCount }}&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-26">3.Pinia/Vuex</h3>
<p>Piniaï¼ˆVue 3 å®˜æ–¹æ¨èï¼‰/ Vuex æ˜¯ä¸“é—¨çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå¯åˆ›å»º<strong>å…¨å±€å…±äº«çš„çŠ¶æ€ä»“åº“</strong>ï¼Œå¤šä¸ªåº”ç”¨å®ä¾‹é€šè¿‡è®¿é—®åŒä¸€ä»“åº“å®ç°æ•°æ®å…±äº«ï¼ˆæœ€è§„èŒƒçš„æ–¹æ¡ˆï¼‰ã€‚</p>
<h4 data-id="heading-27">åˆ›å»ºå…¨å±€ Pinia</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/store/index.js</span>
<span class="hljs-keyword">import</span> { createPinia, defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºå…¨å±€ Pinia å®ä¾‹ï¼ˆå”¯ä¸€ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();

<span class="hljs-comment">// 2. å®šä¹‰å…±äº«ä»“åº“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useSharedStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'shared'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Pinia å…±äº«æ•°æ®'</span>
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">updateMessage</span>(<span class="hljs-params">newMsg</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = newMsg;
    }
  }
});
</code></pre>
<h4 data-id="heading-28">å¤šä¸ªåº”ç”¨å®ä¾‹æŒ‚è½½åŒä¸€ Pinia å¹¶ä½¿ç”¨ä»“åº“</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/app1.jsï¼ˆåº”ç”¨å®ä¾‹1ï¼‰</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { pinia, useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App1.vue'</span>;

<span class="hljs-keyword">const</span> app1 = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App1</span>);
<span class="hljs-comment">// æŒ‚è½½å…¨å±€ Pinia å®ä¾‹</span>
app1.<span class="hljs-title function_">use</span>(pinia);
<span class="hljs-comment">// ç»„ä»¶å†…ä½¿ç”¨ä»“åº“</span>
<span class="hljs-comment">// App1.vue ä¸­ï¼š</span>
<span class="hljs-comment">// setup() { const store = useSharedStore(); store.increment(); }</span>
app1.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

<span class="hljs-comment">// src/app2.jsï¼ˆåº”ç”¨å®ä¾‹2ï¼‰</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { pinia, useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App2.vue'</span>;

<span class="hljs-keyword">const</span> app2 = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App2</span>);
<span class="hljs-comment">// æŒ‚è½½åŒä¸€ä¸ª Pinia å®ä¾‹</span>
app2.<span class="hljs-title function_">use</span>(pinia);
<span class="hljs-comment">// App2.vue ä¸­å¯ç›´æ¥è®¿é—®åŒä¸€ä»½ä»“åº“æ•°æ®</span>
app2.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
</code></pre>
<h4 data-id="heading-29">ç»„ä»¶å†…ä½¿ç”¨ç¤ºä¾‹ï¼ˆApp1.vueï¼‰ï¼š</h4>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åº”ç”¨1 - {{ store.message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{{ store.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"store.increment"</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useSharedStore</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-30">ç»„ä»¶å†…ä½¿ç”¨ç¤ºä¾‹ï¼ˆApp2.vueï¼‰ï¼š</h4>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åº”ç”¨2 - {{ store.message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒæ­¥è®¡æ•°ï¼š{{ store.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"store.updateMessage('åº”ç”¨2ä¿®æ”¹äº†æ¶ˆæ¯')"</span>&gt;</span>ä¿®æ”¹æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useSharedStore</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-31">4.å…±äº«å“åº”å¼å¯¹è±¡</h3>
<h4 data-id="heading-32">1. ésfcæ–¹å¼</h4>
<p>ç›´æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å“åº”å¼å¯¹è±¡ï¼ˆ<code>ref</code>/<code>reactive</code>ï¼‰ï¼Œä½œä¸ºå¤šä¸ªåº”ç”¨å®ä¾‹çš„ â€œæ•°æ®æºâ€ï¼Œæœ¬è´¨æ˜¯å°†å“åº”å¼æ•°æ®æŠ½ç¦»åˆ°å®ä¾‹å¤–éƒ¨ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script&gt;
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;

  <span class="hljs-comment">// 1. æŠ½ç¦»å…±äº«çš„å“åº”å¼æ•°æ®ï¼ˆç‹¬ç«‹äºåº”ç”¨å®ä¾‹ï¼‰</span>
  <span class="hljs-keyword">const</span> sharedData = <span class="hljs-title function_">ref</span>({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-string">'å…±äº«å“åº”å¼æ•°æ®'</span>
  });

  <span class="hljs-comment">// åº”ç”¨1ï¼šä½¿ç”¨å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; sharedData.<span class="hljs-property">value</span>.<span class="hljs-property">count</span>++;
      <span class="hljs-keyword">return</span> { sharedData, increment };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨1ï¼š{{ sharedData.count }} &lt;button @click="increment"&gt;+1&lt;/button&gt;&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// åº”ç”¨2ï¼šä½¿ç”¨åŒä¸€ä»½å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeText</span> = (<span class="hljs-params"/>) =&gt; sharedData.<span class="hljs-property">value</span>.<span class="hljs-property">text</span> = <span class="hljs-string">'åº”ç”¨2ä¿®æ”¹'</span>;
      <span class="hljs-keyword">return</span> { sharedData, changeText };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨2ï¼š{{ sharedData.text }} / {{ sharedData.count }} &lt;button @click="changeText"&gt;æ”¹æ–‡æœ¬&lt;/button&gt;&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-33">2.sfcçš„æ–¹å¼</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e477e7b7eb844fd8b509a983b12229b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamFzb25feWFuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839137&amp;x-signature=stE2D8COLFf5zIUrdg314iPtls8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Vue 3 å…±äº«Refç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»åº”ç”¨ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å…±äº«è®¡æ•°: {{ sharedCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ ‡é¢˜: {{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"incrementCount"</span>&gt;</span>å¢åŠ è®¡æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTitle"</span>&gt;</span>ä¿®æ”¹æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åŠ¨æ€åˆ›å»ºçš„ç»„ä»¶å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dynamic-component"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
  <span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

  <span class="hljs-comment">// å­ç»„ä»¶å®šä¹‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ChildComponent</span> = {
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div class="child-component"&gt;
      &lt;h3&gt;åŠ¨æ€åˆ›å»ºçš„å­ç»„ä»¶&lt;/h3&gt;
      &lt;p&gt;å…±äº«è®¡æ•°: {{ count }}&lt;/p&gt;
      &lt;p&gt;æ ‡é¢˜: {{ title }}&lt;/p&gt;
      &lt;button @click="decrementCount"&gt;å‡å°‘è®¡æ•°&lt;/button&gt;
      &lt;button @click="resetTitle"&gt;é‡ç½®æ ‡é¢˜&lt;/button&gt;
    &lt;/div&gt;
  `</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">count</span>: {
        <span class="hljs-comment">// è¿™é‡Œè¦ä¼ å…¥refç±»å‹</span>
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">title</span>: {
        <span class="hljs-comment">// è¿™é‡Œè¦ä¼ å…¥refç±»å‹</span>
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">onDecrement</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Function</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">onResetTitle</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Function</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    },
    <span class="hljs-attr">methods</span>: {
      <span class="hljs-title function_">decrementCount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onDecrement</span>()
      },
      <span class="hljs-title function_">resetTitle</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onResetTitle</span>()
      },
    },
  }

  <span class="hljs-comment">// åˆ›å»ºå…±äº«çš„ref</span>
  <span class="hljs-keyword">const</span> sharedCount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello'</span>)
  <span class="hljs-keyword">let</span> dynamicApp = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">incrementCount</span> = (<span class="hljs-params"/>) =&gt; {
    sharedCount.<span class="hljs-property">value</span>++
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrementCount</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (sharedCount.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0</span>) {
      sharedCount.<span class="hljs-property">value</span>--
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTitle</span> = (<span class="hljs-params"/>) =&gt; {
    title.<span class="hljs-property">value</span> = <span class="hljs-string">`æ ‡é¢˜å·²ä¿®æ”¹ <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()}</span>`</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetTitle</span> = (<span class="hljs-params"/>) =&gt; {
    title.<span class="hljs-property">value</span> = <span class="hljs-string">'Hello'</span>
  }

  <span class="hljs-comment">// åŠ¨æ€åº”ç”¨çš„æ ¹ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicRoot</span> = {
    <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;ChildComponent :count="count" :title="title" :on-decrement="onDecrement" :on-reset-title="onResetTitle" /&gt;'</span>,
    <span class="hljs-attr">components</span>: {
      <span class="hljs-title class_">ChildComponent</span>,
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">count</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">onDecrement</span>: <span class="hljs-title class_">Function</span>,
      <span class="hljs-attr">onResetTitle</span>: <span class="hljs-title class_">Function</span>,
    },
  }

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨createApp(App, props)çš„å†™æ³•åˆ›å»ºåŠ¨æ€åº”ç”¨</span>
    dynamicApp = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">DynamicRoot</span>, {
      <span class="hljs-attr">count</span>: sharedCount,
      <span class="hljs-attr">title</span>: title,
      <span class="hljs-attr">onDecrement</span>: decrementCount,
      <span class="hljs-attr">onResetTitle</span>: resetTitle,
    })

    <span class="hljs-comment">// æŒ‚è½½åˆ°DOM</span>
    dynamicApp.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#dynamic-component'</span>)
  })

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¸…ç†åŠ¨æ€åˆ›å»ºçš„åº”ç”¨</span>
    <span class="hljs-keyword">if</span> (dynamicApp) {
      dynamicApp.<span class="hljs-title function_">unmount</span>()
    }
  })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
  }

  <span class="hljs-selector-class">.main-app</span>,
  <span class="hljs-selector-class">.child-component</span> {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f9f9f9</span>;
  }

  <span class="hljs-selector-class">.child-component</span> {
    <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#007bff</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f8ff</span>;
  }

  <span class="hljs-selector-tag">button</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;
  }

  <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0056b3</span>;
  }

  <span class="hljs-selector-tag">h1</span>,
  <span class="hljs-selector-tag">h2</span>,
  <span class="hljs-selector-tag">h3</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<blockquote>
<p>æ³¨æ„ å­ç»„ä»¶éœ€è¦ä½¿ç”¨refç±»å‹ä½œä¸ºå‚æ•°ï¼Œå› ä¸ºæ˜¯æ ¹èŠ‚ç‚¹</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7577016562252890163</link>    <guid>https://juejin.cn/post/7577016562252890163</guid>    <pubDate>2025-11-27T08:49:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252890163" data-draft-id="7577031454585831451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T08:49:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_ç‘¶ç‘¶_"/> <meta itemprop="url" content="https://juejin.cn/user/3635454702002747"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3635454702002747/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _ç‘¶ç‘¶_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:49:59.000Z" title="Thu Nov 27 2025 08:49:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æˆ‘çš„éœ€æ±‚</h3>
<p>åŒæ—¶åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­æ˜¾ç¤º6ä¸ªç”šè‡³æ›´å¤šçš„ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæ•°æ®é‡åœ¨æ¯ä¸ªä¼ æ„Ÿå™¨æ¯10ç§’1æ¡æ•°æ®ï¼Œä¸€èˆ¬è¯·æ±‚1å¤©çš„æ•°æ®ã€‚</p>
<p>ä»¥6ä¸ªä¼ æ„Ÿå™¨è®¡ç®—ä¸€ä¸‹æ•°æ®é‡ï¼š</p>
<p><code>6 * 24 * 60 * 6 = 51840</code></p>
<p>ä¸€æ¬¡åªèƒ½è¯·æ±‚åˆ°1ä¸ªä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯8640æ¡ï¼Œå½“æŸ¥è¯¢æ—¶é—´èŒƒå›´å˜åŒ–æ—¶ï¼Œå¾ªç¯è¯·æ±‚æ¥å£è·å–æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦å¾ˆå¿«çš„æ¸²æŸ“å®Œæ¯•ã€‚</p>
<p>æ•ˆæœåƒè¿™æ ·</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caa8193045524e92941d241d6041b374~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-eRtueRtl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838242&amp;x-signature=nA55nICdoid0l8aLZgY7OBv7SL0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">æˆ‘çš„ç»å†</h3>
<h4 data-id="heading-2">å…ˆä½¿ç”¨çš„ Tableï¼ˆel-tableï¼‰</h4>
<p>è°ƒç”¨ä¸€æ¬¡æ¥å£ååº”æ—¶é—´ï¼ˆæµè§ˆå™¨ç½‘ç»œçª—å£æŸ¥çœ‹ï¼‰çº¦åœ¨1-2så·¦å³ï¼Œä¸€æ¬¡æ¥å£çš„æ•°æ®ä½¿ç”¨<code>Table</code>æ¸²æŸ“ä¸€æ¬¡æ—¶é—´çº¦æ˜¯4så·¦å³ã€‚</p>
<h4 data-id="heading-3">æœ€å¼€å§‹çš„æƒ³æ³•</h4>
<p>æ–°æ·»åŠ ä¸€ä¸ªä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œæ¯ä¸€æ¬¡éœ€è¦é‡æ–°æ¸²æŸ“ä¸€æ¬¡æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å½“åˆ‡æ¢æŸ¥è¯¢æ—¶é—´åï¼Œå¾ªç¯è°ƒç”¨æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯â€”â€”ç»™tableDataä¸­ç›´æ¥æ·»åŠ ã€‚è¿™ä¼šå¯¼è‡´åœ¨å¾ªç¯è°ƒå–æ•°æ®æ—¶ï¼Œæ¯è°ƒå–ä¸€æ¬¡å°±ä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ã€‚å‡ºç°æ¸²æŸ“å¡é¡¿é—®é¢˜ï¼Œ6ä¸ªæ¥å£è°ƒç”¨å®Œæ¯•ä¸”æ¸²æŸ“å®Œæˆï¼Œéœ€è¦20-30sçš„æ—¶é—´ï¼Œæ•°æ®é‡å¤§çš„æ—¶é—´ä¼šæ›´é•¿ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è¯•ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;el-table v-loading=<span class="hljs-string">"loading"</span> element-loading-text=<span class="hljs-string">"æ•°æ®åŠ è½½ä¸­"</span>:data=<span class="hljs-string">"tableData"</span>
  height=<span class="hljs-string">"100%"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">:min-width</span>=<span class="hljs-string">"leftWidth"</span> <span class="hljs-attr">:fixed</span>=<span class="hljs-string">"index == 0"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(column, index) in columns"</span>
    <span class="hljs-attr">:key</span>=<span class="hljs-string">"column.prop"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"column.label"</span> <span class="hljs-attr">:prop</span>=<span class="hljs-string">"column.prop"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span></span>
&lt;/el-table&gt;
Â·Â·Â·Â·Â·Â·
tableData.<span class="hljs-property">value</span> = tableData.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      ...item,
      [<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>)]: <span class="hljs-title class_">Number</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">Data</span>[index].<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>)
    }
})
</code></pre>
<h4 data-id="heading-4">å¯¹æœ€å¼€å§‹çš„æƒ³æ³•ä¼˜åŒ–</h4>
<p>åœ¨å¾ªç¯è°ƒç”¨æ—¶ï¼Œè°ƒç”¨ä¸€æ¬¡æ¸²æŸ“ä¸€æ¬¡éå¸¸æ…¢ï¼Œç¬¬ä¸€æ¬¡ä¼˜åŒ–æ˜¯æ‹¿åˆ°æ‰€æœ‰çš„æ•°æ®ä¹‹åï¼Œå†å°†æ•°æ®æ·»åŠ è‡³tableDataï¼Œä¹‹ååŒæ„è¿›è¡Œæ¸²æŸ“ï¼Œè¿™ç§æ–¹å¼å¿«äº†ä¸€ç‚¹ï¼Œä½†æ²¡æœ‰å¤ªå¤§æ”¹å–„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">buildTableFromAllData</span> = (<span class="hljs-params">allFetched: <span class="hljs-built_in">Array</span>&lt;any&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (allFetched.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæ„å»º columns</span>
  <span class="hljs-keyword">const</span> newColumns = [
    { <span class="hljs-attr">prop</span>: <span class="hljs-string">'time'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'æ—¶é—´'</span> }
  ];
  allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ device, gateway }</span>) =&gt;</span> {
    newColumns.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">prop</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>),
      <span class="hljs-attr">label</span>: sensor.<span class="hljs-property">name</span>
    });
  });

  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šå¯¹é½æ—¶é—´è½´ï¼ˆå‡è®¾æ‰€æœ‰è®¾å¤‡è¿”å›çš„æ—¶é—´ç‚¹ä¸€è‡´ï¼‰</span>
  <span class="hljs-keyword">const</span> firstData = allFetched[<span class="hljs-number">0</span>].<span class="hljs-property">rawData</span>;
  <span class="hljs-keyword">const</span> timeList = firstData.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title function_">dayjs</span>(item.<span class="hljs-property">time</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>));

  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ„å»º tableData è¡Œæ•°æ®</span>
  <span class="hljs-keyword">const</span> newTableData = timeList.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">time: string, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">row</span>: <span class="hljs-title class_">Record</span>&lt;string, any&gt; = { time };
    allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">_, colIndex</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = allFetched[colIndex].<span class="hljs-property">rawData</span>[index]?.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> formatted = value ? <span class="hljs-title class_">Number</span>(value).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>) : <span class="hljs-string">''</span>;
      row[<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(_.<span class="hljs-property">sensor</span>.<span class="hljs-property">id</span>)] = formatted;
    });
    <span class="hljs-keyword">return</span> row;
  });

  <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šæ„å»º lineDataï¼ˆç”¨äºå›¾è¡¨ï¼‰</span>
  <span class="hljs-keyword">const</span> newLineData = allFetched.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fetched</span> =&gt;</span>
    fetched.<span class="hljs-property">rawData</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title class_">Number</span>(item.<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>))
  );

  <span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§èµ‹å€¼ï¼åªè§¦å‘ä¸€æ¬¡å“åº”å¼æ›´æ–°</span>
  columns.<span class="hljs-property">value</span> = newColumns;
  tableData.<span class="hljs-property">value</span> = newTableData;
};
</code></pre>
<h4 data-id="heading-5">è™šæ‹ŸåŒ–è¡¨æ ¼çš„æ¥è§¦</h4>
<p>åœ¨AIçš„å»ºè®®ä¸‹ä½¿ç”¨è™šæ‹ŸåŒ–è¡¨æ ¼ã€‚</p>
<p><code>ElementPlus</code>ä¸­çš„è¯´æ˜<code>é€šè¿‡è™šæ‹ŸåŒ–è¡¨æ ¼ç»„ä»¶ï¼Œè¶…å¤§æ•°æ®æ¸²æŸ“å°†ä¸å†æ˜¯ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜</code>ã€‚</p>
<p>ä½¿ç”¨è™šæ‹ŸåŒ–è¡¨æ ¼ä¹‹åï¼Œæ¸²æŸ“é€Ÿåº¦è‡³å°‘æå‡ä¸€åŠæ—¶é—´ä»¥ä¸Šã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;el-auto-resizer&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ height, width }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-v2</span> <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">element-loading-text</span>=<span class="hljs-string">"æ•°æ®åŠ è½½ä¸­"</span> <span class="hljs-attr">:columns</span>=<span class="hljs-string">"columns"</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableData"</span>
      <span class="hljs-attr">:width</span>=<span class="hljs-string">"width"</span> <span class="hljs-attr">:height</span>=<span class="hljs-string">"height"</span> <span class="hljs-attr">fixed</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
&lt;/el-auto-resizer&gt;
Â·Â·Â·Â·Â·Â·
<span class="hljs-keyword">const</span> <span class="hljs-title function_">buildTableFromAllData</span> = (<span class="hljs-params">allFetched: <span class="hljs-built_in">Array</span>&lt;any&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (allFetched.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">newColumns</span>: any[] = [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'time'</span>,
      <span class="hljs-attr">dataKey</span>: <span class="hljs-string">'time'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ—¶é—´'</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> * <span class="hljs-title class_">Number</span>(ratio.<span class="hljs-property">value</span>),
      <span class="hljs-attr">fixed</span>: <span class="hljs-string">'left'</span>
    }
  ];

  allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ sensor }</span>) =&gt;</span> {
    newColumns.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">key</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>),
      <span class="hljs-attr">dataKey</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(device.<span class="hljs-property">Deviceid</span>),
      <span class="hljs-attr">title</span>: sensor.<span class="hljs-property">name</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> * <span class="hljs-title class_">Number</span>(ratio.<span class="hljs-property">value</span>)
    })
  });

  <span class="hljs-keyword">const</span> firstData = allFetched[<span class="hljs-number">0</span>].<span class="hljs-property">rawData</span>;
  <span class="hljs-keyword">const</span> timeList = firstData.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title function_">dayjs</span>(item.<span class="hljs-property">time</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>));

  <span class="hljs-keyword">const</span> newTableData = timeList.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">time: string, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">row</span>: <span class="hljs-title class_">Record</span>&lt;string, any&gt; = { time };
    allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">_, colIndex</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = allFetched[colIndex].<span class="hljs-property">rawData</span>[index]?.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> formatted = value ? <span class="hljs-title class_">Number</span>(value).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>) : <span class="hljs-string">''</span>;
      row[<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(_.<span class="hljs-property">sensor</span>.<span class="hljs-property">id</span>)] = formatted;
    });
    <span class="hljs-keyword">return</span> row;
  });
  
  <span class="hljs-keyword">const</span> newLineData = allFetched.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fetched</span> =&gt;</span>
    fetched.<span class="hljs-property">rawData</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title class_">Number</span>(item.<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>))
  );

  <span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§èµ‹å€¼ï¼åªè§¦å‘ä¸€æ¬¡å“åº”å¼æ›´æ–°</span>
  columns.<span class="hljs-property">value</span> = newColumns;
  tableData.<span class="hljs-property">value</span> = newTableData;
};
</code></pre>
<h4 data-id="heading-6">å…¶å®ƒé—®é¢˜</h4>
<h5 data-id="heading-7">é—®é¢˜</h5>
<p>å…¶å®ä»¥ä¸Šç”¨æ³•å·²ç»å®Œå…¨è§£å†³äº†æˆ‘çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ç”µè„‘æµè§ˆå™¨ä¸­ä½¿ç”¨æ— è¯¯ï¼Œä½†æ˜¯<code>ä¸€æ¢åˆ°æ‰‹æœºæµè§ˆå™¨æˆ–è€…å¹³æ¿æµè§ˆå™¨ä¸­ï¼Œè™šæ‹Ÿè¡¨æ ¼ç›´æ¥æ»‘ä¸åŠ¨</code>ï¼Œèƒ½çœ‹åˆ°æ»šåŠ¨æ¡ï¼Œä½†æ˜¯å°±æ˜¯æ»‘ä¸åŠ¨ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„è§£å†³å°è¯•è¿‡ç¨‹ã€‚</p>
<h5 data-id="heading-8">AIç»™çš„è§£å†³æ–¹æ¡ˆâ€”â€”æ·»åŠ CSS</h5>
<p>æŸ¥è¯¢åˆ°æ»šåŠ¨çš„å†…å®¹æ˜¯è¿™æ ·çš„<code>&lt;div class="el-vl__wrapper el-table-v2__body"</code>ï¼Œäºæ˜¯æˆ‘æ·»åŠ äº†ä¸‹é¢çš„æ ·å¼</p>
<pre><code class="hljs language-css" lang="css">:<span class="hljs-built_in">deep</span>(.el-table-v2__main .el-table-v2__body) {
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-y</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-x</span>: auto <span class="hljs-meta">!important</span>;
  touch-action: pan-x pan-y <span class="hljs-meta">!important</span>;
}
</code></pre>
<p>ç»“æœå°±æ˜¯æ²¡æœ‰ç»“æœï¼Œå¹¶æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-9">æœ€ç»ˆè§£å†³æ–¹æ¡ˆâ€”â€”è¿˜æ˜¯æ·»åŠ CSSï¼Œä½†ç•¥æœ‰ä¸åŒ</h5>
<p>åœ¨å®¡æŸ¥å…ƒç´ çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªä¸œè¥¿ï¼Œç¬¬äºŒè¡Œdivä¸­çš„<code>overflow: hidden;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-vl__wrapper el-table-v2__body"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"rowgroup"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">""</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative; overflow: hidden; will-change: transform; direction: ltr; height: 1313.11px; width: 2143.33px;"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 3000px; width: 2137.33px;"</span>&gt;</span>
    Â·Â·Â·Â·Â·Â·
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æ€ä¹ˆç»™bodyè®¾ç½®æ»šåŠ¨éƒ½æ²¡æœ‰ç”¨ï¼Œå› ä¸ºé‡Œé¢ç»™<code>hidden</code>äº†ï¼Œäºæ˜¯æ·»åŠ çš„CSSå˜æˆäº†è¿™æ ·</p>
<pre><code class="hljs language-css" lang="css">:<span class="hljs-built_in">deep</span>(.el-table-v2__main .el-table-v2__body) {
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-y</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-x</span>: auto <span class="hljs-meta">!important</span>;
  touch-action: pan-x pan-y <span class="hljs-meta">!important</span>;
}
</code></pre>
<blockquote>
<p>OKï¼æˆåŠŸè§£å†³é—®é¢˜ï¼Œä»¥ä¸Šå°±æ˜¯è™šæ‹ŸåŒ–è¡¨æ ¼çš„æµ…ç”¨è¿‡ç¨‹ï¼Œå¾—ä¸‹æ¬¡æœ‰æœºä¼šå†æ·±å…¥ä½¿ç”¨ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>