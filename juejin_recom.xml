<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Pythonæ€§èƒ½æå‡50%ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µâš¡]]></title>    <link>https://juejin.cn/post/7575106644498923554</link>    <guid>https://juejin.cn/post/7575106644498923554</guid>    <pubDate>2025-11-23T04:16:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498923554" data-draft-id="7575162322239700992" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæ€§èƒ½æå‡50%ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µâš¡"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T04:16:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæ€§èƒ½æå‡50%ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µâš¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:16:58.000Z" title="Sun Nov 23 2025 04:16:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Pythonæ€§èƒ½æå‡50%ï¼šè¿™5ä¸ªéšè—æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µâš¡</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Pythonå› å…¶ç®€æ´æ˜“è¯»çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿè€Œå¹¿å—æ¬¢è¿ï¼Œä½†å®ƒçš„æ€§èƒ½é—®é¢˜ä¹Ÿå¸¸å¸¸æˆä¸ºå¼€å‘è€…è¯Ÿç—…çš„ç„¦ç‚¹ã€‚å°½ç®¡Pythonçš„è§£é‡Šå‹ç‰¹æ€§ä½¿å…¶åœ¨è¿è¡Œæ—¶æ•ˆç‡ä¸Šä¸å¦‚Cæˆ–Rustç­‰ç¼–è¯‘å‹è¯­è¨€ï¼Œä½†é€šè¿‡ä¸€äº›é«˜çº§æŠ€å·§å’Œä¼˜åŒ–æ‰‹æ®µï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æ˜¾è‘—æå‡Pythonä»£ç çš„æ‰§è¡Œé€Ÿåº¦â€”â€”åœ¨æŸäº›æƒ…å†µä¸‹ç”šè‡³èƒ½è¾¾åˆ°50%ä»¥ä¸Šçš„æ€§èƒ½æå‡ï¼</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªé²œä¸ºäººçŸ¥ä½†æ•ˆæœæ˜¾è‘—çš„Pythonæ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œæ¶µç›–ä»æ•°æ®ç»“æ„é€‰æ‹©åˆ°åº•å±‚å­—èŠ‚ç ä¼˜åŒ–çš„å¤šä¸ªå±‚é¢ã€‚æ— è®ºä½ æ˜¯å¤„ç†å¤§è§„æ¨¡æ•°æ®è¿˜æ˜¯ç¼–å†™é«˜é¢‘è°ƒç”¨çš„å¾®æœåŠ¡ï¼Œè¿™äº›æŠ€å·§éƒ½èƒ½å¸®åŠ©ä½ æ¦¨å¹²Pythonçš„æœ€åä¸€æ»´æ€§èƒ½æ½œåŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. åˆ©ç”¨å†…ç½®å‡½æ•°å’Œæ ‡å‡†åº“</h3>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</h4>
<p>Pythonçš„å†…ç½®å‡½æ•°ï¼ˆå¦‚<code>map()</code>ã€<code>filter()</code>ã€<code>sum()</code>ï¼‰æ˜¯ç”¨Cå®ç°çš„ï¼Œæ¯”çº¯Pythonå®ç°çš„å¾ªç¯å¿«å¾—å¤šã€‚æ ‡å‡†åº“ä¸­çš„æ¨¡å—ï¼ˆå¦‚<code>collections</code>ã€<code>itertools</code>ï¼‰ä¹Ÿç»è¿‡äº†é«˜åº¦ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-4">å®æˆ˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ…¢é€Ÿç‰ˆæœ¬ï¼šçº¯Pythonå¾ªç¯</span>
result = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
    result.append(i * <span class="hljs-number">2</span>)

<span class="hljs-comment"># å¿«é€Ÿç‰ˆæœ¬ï¼šå†…ç½®mapå‡½æ•°</span>
result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>)))
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œ<code>map</code>ç‰ˆæœ¬æ¯”å¾ªç¯å¿«çº¦30%-40%ã€‚å¦‚æœç»“åˆç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆå¦‚<code>(x*2 for x in range(1000000))</code>ï¼‰ï¼Œå†…å­˜å ç”¨è¿˜ä¼šè¿›ä¸€æ­¥é™ä½ã€‚</p>
<h4 data-id="heading-5">è¿›é˜¶æŠ€å·§</h4>
<ul>
<li>ä½¿ç”¨<code>collections.deque</code>ä»£æ›¿åˆ—è¡¨å®ç°é˜Ÿåˆ—æ“ä½œï¼ˆO(1) vs O(n)ï¼‰ã€‚</li>
<li><code>itertools.chain</code>åˆå¹¶å¤šä¸ªè¿­ä»£å™¨æ—¶æ¯”æ˜¾å¼å¾ªç¯æ›´é«˜æ•ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">2. é¿å…å…¨å±€å˜é‡ï¼Œæ‹¥æŠ±å±€éƒ¨ä½œç”¨åŸŸ</h3>
<h4 data-id="heading-7">Pythonçš„å˜é‡æŸ¥æ‰¾æœºåˆ¶</h4>
<p>Pythonåœ¨è®¿é—®å˜é‡æ—¶ä¼šæŒ‰é¡ºåºæŸ¥æ‰¾ï¼šå±€éƒ¨ä½œç”¨åŸŸ -&gt; é—­åŒ… -&gt; å…¨å±€ -&gt; å†…ç½®ã€‚å…¨å±€å˜é‡çš„æŸ¥æ‰¾æˆæœ¬è¿œé«˜äºå±€éƒ¨å˜é‡ã€‚</p>
<h4 data-id="heading-8">ä¼˜åŒ–æ¡ˆä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ…¢é€Ÿç‰ˆæœ¬ï¼šé¢‘ç¹è®¿é—®å…¨å±€å˜é‡</span>
global_var = [...]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>():
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> global_var:
        do_something(item)

<span class="hljs-comment"># å¿«é€Ÿç‰ˆæœ¬ï¼šå°†å…¨å±€å˜é‡è½¬ä¸ºå±€éƒ¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data_fast</span>(<span class="hljs-params">data</span>):
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        do_something(item)
</code></pre>
<p><strong>æ€§èƒ½æå‡</strong>ï¼šå®æµ‹ä¸­è¿™ç§æ”¹åŠ¨å¯å¸¦æ¥10%-20%çš„é€Ÿåº¦æå‡ï¼Œå°¤å…¶åœ¨å¾ªç¯æ¬¡æ•°å¤šçš„æƒ…å†µä¸‹ã€‚</p>
<h4 data-id="heading-9">æ·±å±‚åŸç†</h4>
<p>å­—èŠ‚ç å±‚é¢çš„å·®å¼‚ï¼š</p>
<ul>
<li><code>LOAD_GLOBAL</code>æ“ä½œç éœ€è¦å“ˆå¸Œè¡¨æŸ¥æ‰¾ã€‚</li>
<li><code>LOAD_FAST</code>ç›´æ¥é€šè¿‡æ•°ç»„ç´¢å¼•è®¿é—®å±€éƒ¨å˜é‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">3. JITç¼–è¯‘çš„é­”æ³•ï¼šPyPyä¸Numba</h3>
<h4 data-id="heading-11">PyPyçš„ä¼˜åŠ¿</h4>
<p>PyPyæ˜¯Pythonçš„å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰å®ç°ï¼Œç‰¹åˆ«é€‚åˆé•¿æ—¶é—´è¿è¡Œçš„ç®—æ³•å¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚æ•°å€¼è®¡ç®—ï¼‰ã€‚æŸäº›åœºæ™¯ä¸‹å¯æ¯”CPythonå¿«5-10å€ï¼</p>
<h4 data-id="heading-12">Numbaçš„ç²¾å‡†æ‰“å‡»</h4>
<p>Numbaé€šè¿‡è£…é¥°å™¨å°†ç‰¹å®šå‡½æ•°ç¼–è¯‘ä¸ºæœºå™¨ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> numba <span class="hljs-keyword">import</span> jit

<span class="hljs-meta">@jit(<span class="hljs-params">nopython=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sum_array</span>(<span class="hljs-params">arr</span>):
    total = <span class="hljs-number">0.0</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> arr:
        total += x
    <span class="hljs-keyword">return</span> total
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°å€¼è®¡ç®—ã€NumPyæ•°ç»„æ“ä½œç­‰ï¼Œé€šå¸¸å¯æé€Ÿ50å€ä»¥ä¸Šã€‚ä½†æ³¨æ„é¦–æ¬¡è¿è¡Œä¼šæœ‰ç¼–è¯‘å¼€é”€ã€‚</p>
<hr/>
<h3 data-id="heading-13">4. å†…å­˜è§†å›¾ï¼ˆMemory Viewsï¼‰ä¸ç¼“å†²åè®®</h3>
<h4 data-id="heading-14">Pythonçš„å†…å­˜ç“¶é¢ˆ</h4>
<p>å½“å¤„ç†å¤§å‹æ•°æ®é›†ï¼ˆå¦‚å›¾åƒã€éŸ³é¢‘ï¼‰æ—¶ï¼Œä¼ ç»Ÿçš„åˆ‡ç‰‡å¤åˆ¶ä¼šå¼•å‘å¤§é‡å†…å­˜åˆ†é…æ“ä½œã€‚å†…å­˜è§†å›¾å…è®¸é›¶å¤åˆ¶è®¿é—®åº•å±‚ç¼“å†²åŒºï¼š</p>
<pre><code class="hljs language-python" lang="python">data = <span class="hljs-built_in">bytearray</span>(...)
view = <span class="hljs-built_in">memoryview</span>(data)
partial_view = view[<span class="hljs-number">1000</span>:<span class="hljs-number">2000</span>] <span class="hljs-comment"># Zero-copy!</span>
</code></pre>
<h4 data-id="heading-15">NumPyçš„æœ€ä½³æ­æ¡£</h4>
<pre><code class="hljs language-python" lang="python">arr = np.zeros(...)
arr_view = arr[:, :, ::<span class="hljs-number">2</span>] <span class="hljs-comment"># No data copied!</span>
</code></pre>
<p><strong>æ€§èƒ½å½±å“</strong>ï¼šåœ¨å¤§æ•°æ®å¤„ç†ä¸­å¯å‡å°‘90%ä»¥ä¸Šçš„å†…å­˜åˆ†é…æ—¶é—´ã€‚è¿™ä¹Ÿæ˜¯Pillowã€OpenCVç­‰åº“é«˜æ€§èƒ½çš„å…³é”®ä¹‹ä¸€ã€‚</p>
<hr/>
<h3 data-id="heading-16">5. Cæ‰©å±•ä¸Cythonç»ˆæä¼˜åŒ–</h3>
<h4 data-id="heading-17">Cythonçš„ä¸¤æ –ç‰¹æ€§</h4>
<p>Cythonå…è®¸æ··åˆç¼–å†™Pythonå’ŒCä»£ç ï¼š</p>
<pre><code class="hljs language-cython" lang="cython"># cython: language_level=3
cimport numpy as np

def fast_sum(np.ndarray[np.float64_t] arr):
    cdef double total = 0.0
    cdef int i
    for i in range(arr.shape[0]):
        total += arr[i]
    return total
</code></pre>
<h4 data-id="heading-18">CPython APIç›´æ¥è°ƒç”¨</h4>
<p>å¯¹äºæç«¯æ€§èƒ½éœ€æ±‚çš„éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// example.c</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Python.h&gt;</span></span>

<span class="hljs-type">static</span> PyObject* <span class="hljs-title function_">fast_func</span><span class="hljs-params">(PyObject* self, PyObject* args)</span> {
    <span class="hljs-comment">// C implementation here...</span>
}
</code></pre>
<p><strong>å®æµ‹æ•ˆæœ</strong>ï¼šç»è¿‡è‰¯å¥½ä¼˜åŒ–çš„Cæ‰©å±•å¯æ¯”çº¯Pythonå¿«100-1000å€ï¼ˆå¦‚åŠ å¯†ç®—æ³•ã€ç‰©ç†æ¨¡æ‹Ÿï¼‰ã€‚è‘—åçš„ä¾‹å­åŒ…æ‹¬lxmlã€psycopg2ç­‰åº“çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p>
<hr/>
<h3 data-id="heading-19">BonusæŠ€å·§ï¼šå­—ç¬¦ä¸²æ“ä½œçš„é»‘æš—è‰ºæœ¯</h3>
<ol>
<li>
<p><strong>join()æˆ˜èƒœ+è¿ç®—ç¬¦</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Bad: O(nÂ²) time complexity!</span>
s = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> chunks:
    s += chunk

<span class="hljs-comment"># Good: O(n) with join()</span>
s = <span class="hljs-string">""</span>.join(chunks)
</code></pre>
</li>
<li>
<p><strong>f-stringçš„ç§˜å¯†é€Ÿåº¦</strong><br/>
f-stringä¸ä»…æ˜¯è¯­æ³•ç³–â€”â€”å®ƒè¿˜æ˜¯æœ€å¿«çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹å¼ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">%timeit f<span class="hljs-string">"Value: {x}"</span>          <span class="hljs-comment"># ~80ns </span>
%timeit <span class="hljs-string">"Value: {}"</span>.format(<span class="hljs-keyword">x</span>)   <span class="hljs-comment"># ~150ns </span>
%timeit <span class="hljs-string">"Value: %s"</span> % <span class="hljs-keyword">x</span>         <span class="hljs-comment"># ~120ns </span>
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-20"><strong>æ€»ç»“ä¸è¡ŒåŠ¨æŒ‡å—</strong></h3>
<ol>
<li><strong>ä¼˜å…ˆé€‰æ‹©æ ‡å‡†åº“æä¾›çš„å·¥å…·</strong>â€”â€”å®ƒä»¬é€šå¸¸æ˜¯æœ€é«˜æ•ˆçš„å®ç°ã€‚</li>
<li><strong>å°†çƒ­ç‚¹ä»£ç ç§»å‡ºå…¨å±€ä½œç”¨åŸŸ</strong>â€”â€”å“ªæ€•åªæ˜¯å°è£…åˆ°ä¸€ä¸ªå‡½æ•°é‡Œã€‚</li>
<li><strong>å¯¹è®¡ç®—å¯†é›†å‹ä»»åŠ¡å°è¯•JITæ–¹æ¡ˆ</strong>â€”â€”PyPy/Numbaå¯èƒ½å¸¦æ¥è´¨çš„é£è·ƒã€‚</li>
<li><strong>ç”¨å†…å­˜è§†å›¾æ›¿ä»£æ•°æ®å¤åˆ¶</strong>â€”â€”ç‰¹åˆ«æ˜¯å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶ã€‚</li>
<li><strong>è€ƒè™‘ç”¨Cython/Cæ‰©å±•æ”¹å†™å…³é”®è·¯å¾„</strong>â€”â€”å½“å…¶ä»–ä¼˜åŒ–æ‰‹æ®µè§¦é¡¶æ—¶ã€‚</li>
</ol>
<p>è®°ä½ï¼š"è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº"ï¼ˆKnuthï¼‰ï¼Œä½†åœ¨ç¡®è®¤çœŸå®çš„æ€§èƒ½ç“¶é¢ˆåï¼Œè¿™äº›æŠ€å·§å°†æˆä¸ºä½ å·¥å…·ç®±ä¸­çš„åˆ©å™¨âš¡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[WWDC 21]Detect and diagnose memory issues ç¬”è®°]]></title>    <link>https://juejin.cn/post/7575152891955462144</link>    <guid>https://juejin.cn/post/7575152891955462144</guid>    <pubDate>2025-11-23T04:25:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955462144" data-draft-id="7575090551357358132" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[WWDC 21]Detect and diagnose memory issues ç¬”è®°"/> <meta itemprop="keywords" content="Swift,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-23T04:25:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="songgeb"/> <meta itemprop="url" content="https://juejin.cn/user/3122268752587006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [WWDC 21]Detect and diagnose memory issues ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268752587006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    songgeb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:25:06.000Z" title="Sun Nov 23 2025 04:25:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/" ref="nofollow noopener noreferrer">developer.apple.com/videos/playâ€¦</a></p>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬Sessionä¸»è¦è§£é‡Šäº†Appå†…å­˜ç”±å“ªäº›éƒ¨åˆ†ç»„æˆï¼Œå¹¶ä»‹ç»äº†å¯ä»¥ä½¿ç”¨Performace XCTestså·¥å…·å¯¹å†…å­˜é—®é¢˜è¿›è¡Œæ’æŸ¥ã€åˆ†æ</p>
<h2 data-id="heading-1">Impact of Memory footprint</h2>
<p>å¥½çš„å†…å­˜ç®¡ç†å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼Œå¯ä»¥è¡¨ç°åœ¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e318640848844cd09c97d57606693a9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=N2K9ucCz3r6rB9SsUCxAks11YO8%3D" alt="" loading="lazy"/></p>
<ol>
<li>Faster application activationï¼Œå› ä¸ºå†…å­˜æ§åˆ¶çš„å¥½ï¼Œæ‰€ä»¥appè¿›å…¥åå°æ—¶ä¸æ˜“è¢«ç³»ç»Ÿç»ˆæ­¢ï¼Œé‡æ–°æ¿€æ´»å›åˆ°å‰å°æ—¶ä¹Ÿæ›´å¿«</li>
<li>Responsive experienceï¼Œæ›´é«˜çš„å“åº”é€Ÿåº¦</li>
<li>Complex workflowsï¼Œå†…å­˜æ§åˆ¶çš„å¥½åˆ™æ„å‘³ç€å¯ä»¥å¢åŠ æ›´å¤šæ›´æ¶ˆè€—å†…å­˜çš„åŠŸèƒ½</li>
<li>Wider device compatibilityï¼Œæ§åˆ¶å¥½å†…å­˜åˆ™å¯ä»¥å…¼å®¹åˆ°æ›´è€çš„æœºå™¨</li>
</ol>
<h2 data-id="heading-2">Memory footprint</h2>
<p>æœ¬å°èŠ‚ä¸»è¦ä»‹ç»Memory footprintéƒ½æ˜¯æœ‰å“ªäº›å†…å®¹ç»„æˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae2656d9f2a34deaaa2680b4e29d5808~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=EEF1620%2Fr98jqssruvxbMrmOoNg%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D151" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=151" ref="nofollow noopener noreferrer">Dirty memory consists of memory written by your application. </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D155" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=155" ref="nofollow noopener noreferrer">It also includes all heap allocations </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D158" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=158" ref="nofollow noopener noreferrer">such as when you use malloc, decoded image buffers, </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D161" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=161" ref="nofollow noopener noreferrer">and frameworks.</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b414cb8b3be4125a8174b5de7130d27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=PA1bDhSb9K9jjYIAAWGfo7j%2BHUQ%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D164" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=164" ref="nofollow noopener noreferrer">Compressed memory refers to any dirty pages </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D167" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=167" ref="nofollow noopener noreferrer">that haven't recently been accessed </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D169" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=169" ref="nofollow noopener noreferrer">that the memory compressor has compressed. </a><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10180%2F%3Ftime%3D172" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10180/?time=172" ref="nofollow noopener noreferrer">These pages will be decompressed on access.</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db0b1f4cfd1d427ba70fb7b64fe416b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=S5%2FqfUsuSxFiH4krAx6NS3Ym9eU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">Tools for profiling memory</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ef50099abc741afafb7ab55379d1d5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=Lgsn%2B0Yj9eEI4VlEn9fIdwhc9cg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">Performance XCTests</h3>
<p>å¯ä»¥ä½¿ç”¨XCTestså»æ£€æŸ¥å„ä¸ªåŠŸèƒ½çš„æ€§èƒ½è¡¨ç°ï¼Œæ¯”å¦‚</p>
<ul>
<li>Memory utilizationï¼Œå†…å­˜åˆ©ç”¨æƒ…å†µ</li>
<li>CPU usage</li>
<li>Disk writes</li>
<li>Hitch rateï¼Œå¡é¡¿ç‡</li>
<li>Wall clock timeï¼ŒåŠŸèƒ½çš„è€—æ—¶æƒ…å†µ</li>
<li>Application launch time</li>
</ul>
<h4 data-id="heading-5">Memory utilization ç¤ºä¾‹</h4>
<pre><code class="hljs language-scss" lang="scss">func <span class="hljs-built_in">testSaveMeal</span>() {
    let app = <span class="hljs-built_in">XCUIApplication</span>()
    let options = <span class="hljs-built_in">XCTMeasureOptions</span>()
    options<span class="hljs-selector-class">.invocationOptions</span> = <span class="hljs-selector-attr">[.manuallyStart]</span>
    <span class="hljs-built_in">measure</span>(metrics: [XCTMemoryMetric(application: aapp)<span class="hljs-number">1</span>
        options: options) {
        app<span class="hljs-selector-class">.launch</span>()
        <span class="hljs-built_in">startMeasuring</span>()
        app<span class="hljs-selector-class">.cells</span><span class="hljs-selector-class">.firstMatch</span><span class="hljs-selector-class">.buttons</span><span class="hljs-selector-attr">[<span class="hljs-string">"Save meal"</span>]</span><span class="hljs-selector-class">.firstMatch</span><span class="hljs-selector-class">.tap</span>()
        let savedButton = app<span class="hljs-selector-class">.cells</span><span class="hljs-selector-class">.firstMatch</span><span class="hljs-selector-class">.buttons</span><span class="hljs-selector-attr">[<span class="hljs-string">"Saved"</span>]</span><span class="hljs-selector-class">.firstMatch</span>
        XCTAssertTrue (savedButton.waitForExistendce(timeout: <span class="hljs-number">30</span>)
    }
}
</code></pre>
<p>ä¸Šè¿°ä»£ç æ£€æµ‹çš„æ˜¯ç‚¹å‡»â€œSave mealâ€æŒ‰é’®åå†…å­˜çš„å˜åŒ–æƒ…å†µï¼Œå˜åŒ–æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19da0bfded9d4c89bdf48f4c8de680ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=fxTIQK5ANGh9N1agI0WgcUgVFD8%3D" alt="" loading="lazy"/></p>
<ol>
<li>Metricé¡¹å¯ä»¥é€‰æ‹©ä¸åŒçš„å†…å­˜æ£€æµ‹æŒ‡æ ‡ï¼Œå¦‚å†…å­˜å³°å€¼è¿˜æ˜¯æ™®é€šå†…å­˜å€¼</li>
<li>åº•éƒ¨æŸ±çŠ¶å›¾è¡¨ç¤ºæ˜¯å¤šæ¬¡æ‰§è¡Œçš„æƒ…å†µ</li>
<li>Averageé¡¹è¡¨ç¤ºçš„æ˜¯æ‰€é€‰Metricçš„å‡å€¼æƒ…å†µ</li>
<li>Baselineã€Max STDDEV(æœ€å¤§æ ‡å‡†å·®)åˆ™å¯ä»¥ç”¨æ¥è®¾ç½®æ£€æµ‹åŸºçº¿å’Œä¸Šä¸‹æµ®åŠ¨é˜ˆå€¼</li>
<li>å½“æ£€æµ‹ç»“æŸåï¼Œå¯ä»¥é€šè¿‡ResultæŸ¥çœ‹æœ¬æ¬¡æ£€æµ‹ç»“æœå˜å¥½äº†è¿˜æ˜¯å˜å·®äº†</li>
</ol>
<h4 data-id="heading-6">Diagnostic collection</h4>
<p>Xcode 13ä¸­å¼•å…¥äº†ä¸¤ä¸ªæœ‰åŠ›çš„è¯Šæ–­æ•°æ®Ktrace fileså’ŒMemory graphs</p>
<p>æ‰§è¡ŒPerformance XCTestsæ—¶å¯ä»¥å¼€å¯ä»–ä»¬</p>
<h5 data-id="heading-7">Ktrace files</h5>
<p>æ˜¯ä¸€ç§ä¸“ç”¨çš„æ–‡ä»¶ç±»å‹ï¼Œç”¨äºåˆ†æå¡é¡¿é—®é¢˜ï¼Œå¯ä»¥ç”¨Instrumentç›´æ¥æ‰“å¼€</p>
<p>è¯¦æƒ…å¯ä»¥å‚è€ƒ</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2019%2F411%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2019/411/" ref="nofollow noopener noreferrer">Getting Started with Instruments</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2021%2F10258%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2021/10258/" ref="nofollow noopener noreferrer">Understand and eliminate hangs from your app</a></li>
</ul>
<h5 data-id="heading-8">Memory graphs</h5>
<p>æŸä¸€æ—¶åˆ»ï¼ŒAppå†…å­˜ä¸­æ‰€æœ‰å¯¹è±¡åŠå¼•ç”¨å…³ç³»æ•°æ®</p>
<ul>
<li>åœ¨æ—¥å¸¸ä½¿ç”¨Xcode debug Appæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°å†…ç½®çš„Memory graphsåŠŸèƒ½</li>
<li>ä¸‹å›¾ä¸ºè¿è¡Œå®ŒXCTestsåï¼Œç»“æœä¸­Memory graphsæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å•ç‹¬è¿›è¡Œåˆ†æ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089116f2d5b84de0991dbaf071e7ebc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=uIh0zTXsp78E284cYAHrikWxCCQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Types of memory issues</h2>
<p>å†…å­˜é—®é¢˜ç±»å‹æœ‰å¤šç§ï¼Œæœ¬sessionä¸­ä¼šä»‹ç»åˆ°Leaksï¼ˆå†…å­˜æ³„æ¼ï¼‰å’ŒHeap size issues</p>
<h3 data-id="heading-10">Leaks</h3>
<p>å¯¹äºå†…å­˜æ³„æ¼é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨<code>leaks</code>å‘½ä»¤å¯¹é’±æ–‡å¿ çš„Memory graphsæ–‡ä»¶è¿›è¡Œåˆ†æï¼ŒæŸ¥æ‰¾æ³„æ¼çš„ä»£ç å †æ ˆã€æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f16fdcfd9db34262b3cdd633ccfa5806~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=d%2BWCKQOozPVhwqhhSFF7%2F1WUyFw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">Heap size issues</h3>
<h4 data-id="heading-12">Heap allocations regressions</h4>
<p>å †å†…å­˜å ç”¨çš„åŠ£åŒ–é—®é¢˜</p>
<p>ä¸ºå‡å°‘ä½¿ç”¨å †å†…å­˜å¼€è¾Ÿç©ºé—´å¯¼è‡´å†…å­˜å ç”¨åŠ£åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<ul>
<li>Remove unused allocations</li>
<li>Shrink overly large allocations</li>
<li>Deallocated memory you are finished with</li>
<li>Wait to allocate memory until you need it</li>
</ul>
<p>Sessionä¸­æåˆ°ï¼Œå®˜æ–¹æä¾›äº†å¦‚<code>vmmap</code>ç­‰ä¸€ç³»åˆ—å‘½ä»¤å¯¹å‰é¢ç”Ÿæˆçš„Memory graphsæ–‡ä»¶åˆ†æ</p>
<h4 data-id="heading-13">Fragmentation</h4>
<p>Fragmentationè¯‘ä¸ºç¢ç‰‡åŒ–</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58b333abcdfd4de5b237790122abe4f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=PfE33yDhxD0EqlNEg9l11I3RkLk%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä½•å¯ä»¥å‡å°‘ç¢ç‰‡åŒ–</p>
<ul>
<li>Allocate objects with similar lifetimes close to each other</li>
<li>Aim for 25% fragmentation</li>
<li>Use autorelease pools</li>
<li>Pay extra attention to long running processes</li>
<li>Use allocations track in Instruments</li>
</ul>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>vmmap</code>ç­‰å‘½ä»¤æŸ¥çœ‹ç¢ç‰‡æ¯”ä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3b7c06db7044e77957820a11bf70368~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=ahMRnfiNgnaWl6gbn4Idap3EpmI%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸Šå›¾ä¸­FRAGæ˜¯ç¢ç‰‡æ¯”ä¾‹</li>
<li>DIRTY SIZEè¡¨ç¤ºç¢ç‰‡åŒ–å¯¼è‡´çš„Dirty pagesæƒ…å†µ</li>
<li>DIRTY+SWAP FRAG SIZEè¡¨ç¤ºçš„æ˜¯ç¢ç‰‡ç©ºé—´å¤§å°</li>
</ul>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>æ€»ç»“ä¸€ä¸‹å®˜æ–¹æ¨èçš„æ£€æµ‹ã€è¯Šæ–­å†…å­˜é—®é¢˜çš„æœ€ä½³å®è·µ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb7a70b74e8474696470073313fb2b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=upICJhqYE8vy8SykTv3KJ3KQsyQ%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€æ­¥ï¼šå…ˆæ˜¯æ£€æµ‹</p>
<ol>
<li>é’ˆå¯¹ä¸šåŠ¡åŠŸèƒ½/åœºæ™¯ç¼–å†™Performance XCTests</li>
<li>è®¾ç½®baselineï¼ˆåŸºçº¿ï¼‰è¿›è¡Œæµ‹è¯•</li>
<li>å¦‚æœå‘ç°æœ‰regressionï¼ˆåŠ£åŒ–ï¼‰ï¼Œåˆ™æ”¶é›†è¯Šæ–­æ•°æ®ï¼ˆMemory graphs or Ktraceï¼‰</li>
</ol>
<p>ç¬¬äºŒæ­¥ï¼šè¯Šæ–­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c089bf6b1af413f98093f85c7199723~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc29uZ2dlYg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764476705&amp;x-signature=%2B67eU1bNOvWz%2FjEXL61eh5W8l20%3D" alt="" loading="lazy"/></p>
<ol>
<li>æ£€æŸ¥æœ€æ˜“å‘ç°çš„å†…å­˜æ³„æ¼</li>
<li>å†ä½¿ç”¨å„ç§å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æœ‰å †å†…å­˜åŠ£åŒ–</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¡ç®—æœºæ¯•ä¸šè®¾è®¡æ¨èï¼šåŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿã€Java+spring boot+MySQLã€Javaé¡¹ç›®ã€Javaæ¯•è®¾ã€Javaé¡¹ç›®å®šåˆ¶å®šåšã€‘]]></title>    <link>https://juejin.cn/post/7575090551357390900</link>    <guid>https://juejin.cn/post/7575090551357390900</guid>    <pubDate>2025-11-23T04:50:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357390900" data-draft-id="7575162322239717376" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¡ç®—æœºæ¯•ä¸šè®¾è®¡æ¨èï¼šåŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿã€Java+spring boot+MySQLã€Javaé¡¹ç›®ã€Javaæ¯•è®¾ã€Javaé¡¹ç›®å®šåˆ¶å®šåšã€‘"/> <meta itemprop="keywords" content="Java,Spring Boot,MySQL"/> <meta itemprop="datePublished" content="2025-11-23T04:50:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è®¡ç®—æœºæ¯•ä¸šè®¾è®¡å°é€”"/> <meta itemprop="url" content="https://juejin.cn/user/3344059640330504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¡ç®—æœºæ¯•ä¸šè®¾è®¡æ¨èï¼šåŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿã€Java+spring boot+MySQLã€Javaé¡¹ç›®ã€Javaæ¯•è®¾ã€Javaé¡¹ç›®å®šåˆ¶å®šåšã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3344059640330504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è®¡ç®—æœºæ¯•ä¸šè®¾è®¡å°é€”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:50:45.000Z" title="Sun Nov 23 2025 04:50:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ’–ğŸ’–ä½œè€…ï¼šè®¡ç®—æœºæ¯•ä¸šè®¾è®¡å°é€”
ğŸ’™ğŸ’™ä¸ªäººç®€ä»‹ï¼šæ›¾é•¿æœŸä»äº‹è®¡ç®—æœºä¸“ä¸šåŸ¹è®­æ•™å­¦ï¼Œæœ¬äººä¹Ÿçƒ­çˆ±ä¸Šè¯¾æ•™å­¦ï¼Œè¯­è¨€æ“…é•¿Javaã€å¾®ä¿¡å°ç¨‹åºã€Pythonã€Golangã€å®‰å“Androidç­‰ï¼Œå¼€å‘é¡¹ç›®åŒ…æ‹¬å¤§æ•°æ®ã€æ·±åº¦å­¦ä¹ ã€ç½‘ç«™ã€å°ç¨‹åºã€å®‰å“ã€ç®—æ³•ã€‚å¹³å¸¸ä¼šåšä¸€äº›é¡¹ç›®å®šåˆ¶åŒ–å¼€å‘ã€ä»£ç è®²è§£ã€ç­”è¾©æ•™å­¦ã€æ–‡æ¡£ç¼–å†™ã€ä¹Ÿæ‡‚ä¸€äº›é™é‡æ–¹é¢çš„æŠ€å·§ã€‚å¹³å¸¸å–œæ¬¢åˆ†äº«ä¸€äº›è‡ªå·±å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œä¹Ÿå–œæ¬¢äº¤æµæŠ€æœ¯ï¼Œå¤§å®¶æœ‰æŠ€æœ¯ä»£ç è¿™ä¸€å—çš„é—®é¢˜å¯ä»¥é—®æˆ‘ï¼
ğŸ’›ğŸ’›æƒ³è¯´çš„è¯ï¼šæ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ä¸æ”¯æŒï¼
ğŸ’œğŸ’œ
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011385.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011385.html" ref="nofollow noopener noreferrer">ç½‘ç«™å®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011386.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011386.html" ref="nofollow noopener noreferrer">å®‰å“/å°ç¨‹åºå®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011387.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011387.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011390.html%3Fspm%3D1001.2014.3001.5482" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011390.html?spm=1001.2014.3001.5482" ref="nofollow noopener noreferrer">æ·±åº¦å­¦ä¹ å®æˆ˜é¡¹ç›®</a></p>
</blockquote>
<p>@<a href="https://link.juejin.cn?target=%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<h2 data-id="heading-0">åŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿä»‹ç»</h2>
<p>æœ¬ç³»ç»Ÿå‘½åä¸ºã€ŠåŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿã€‹ï¼Œæ—¨åœ¨é€šè¿‡ä¿¡æ¯åŒ–æ‰‹æ®µå…¨é¢æå‡æ°´äº§å…»æ®–è¡Œä¸šçš„ç°ä»£åŒ–ç®¡ç†æ°´å¹³ã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨B/Sï¼ˆBrowser/Serverï¼‰æ¶æ„ï¼Œæ ¸å¿ƒæŠ€æœ¯æ ˆå¼ºå¤§ä¸”çµæ´»ã€‚åœ¨åç«¯ï¼Œç³»ç»Ÿä¸»è¦åŸºäºJavaè¯­è¨€å¼€å‘ï¼Œå¹¶æ·±åº¦æ•´åˆäº†Spring Bootæ¡†æ¶ï¼Œå……åˆ†åˆ©ç”¨äº†Springçš„ä¾èµ–æ³¨å…¥ã€Spring MVCçš„è¯·æ±‚å¤„ç†èƒ½åŠ›ä»¥åŠMyBatisçš„æŒä¹…å±‚æ“ä½œï¼Œå®ç°äº†é«˜æ•ˆç¨³å®šçš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼›åŒæ—¶ï¼Œç³»ç»Ÿä¹Ÿæä¾›äº†Pythonè¯­è¨€ç‰ˆæœ¬ï¼ŒåŸºäºDjangoæ¡†æ¶å®ç°ï¼Œä¸ºç”¨æˆ·æä¾›äº†å¤šæ ·åŒ–çš„æŠ€æœ¯é€‰æ‹©ã€‚å‰ç«¯ç•Œé¢åˆ™ç”±Vue.jsæ¡†æ¶é…åˆElementUIç»„ä»¶åº“åŠHTMLæŠ€æœ¯æ„å»ºï¼Œç¡®ä¿äº†ç”¨æˆ·ç•Œé¢çš„å“åº”å¼ã€äº¤äº’æ€§å’Œç¾è§‚æ€§ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„æ“ä½œä½“éªŒã€‚æ•°æ®å­˜å‚¨æ–¹é¢ï¼Œç³»ç»Ÿé€‰æ‹©æˆç†Ÿç¨³å®šçš„MySQLæ•°æ®åº“ï¼Œç¡®ä¿äº†æ•°æ®çš„é«˜æ•ˆå­˜å–ä¸ç®¡ç†ã€‚å¼€å‘å·¥å…·æ¨èä½¿ç”¨IntelliJ IDEAè¿›è¡ŒJavaç‰ˆæœ¬å¼€å‘ï¼Œæˆ–PyCharmè¿›è¡ŒPythonç‰ˆæœ¬å¼€å‘ã€‚ç³»ç»ŸåŠŸèƒ½æ¨¡å—è®¾è®¡å‘¨å¯†ï¼Œæ¶µç›–äº†æ°´äº§å…»æ®–ç®¡ç†çš„å„ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€æ°´äº§ç§ç±»ç®¡ç†ã€æ°´äº§ä¿¡æ¯ç®¡ç†ã€æ°´äº§äº§åœ°ç®¡ç†ä»¥åŠè‡³å…³é‡è¦çš„æ°´äº§è®¢å•ç®¡ç†ï¼Œæ„å»ºäº†ä»ç”Ÿäº§åˆ°é”€å”®çš„å®Œæ•´é“¾æ¡ã€‚æ­¤å¤–ï¼Œç³»ç»Ÿè¿˜å…·å¤‡è¯¦ç»†çš„å…»æ®–è®°å½•ç®¡ç†åŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿½æº¯ä¸åˆ†æï¼›é€šè¿‡é¥²æ–™ä¿¡æ¯ç®¡ç†ã€é‡‡è´­å…¥åº“ç®¡ç†ä¸å‡ºåº“ä¿¡æ¯ç®¡ç†ï¼Œå®ç°äº†å¯¹å…»æ®–ç‰©èµ„çš„ç²¾ç»†åŒ–ç®¡æ§ã€‚ä¸ºäº†æå‡å…»æ®–æŠ€èƒ½ä¸çŸ¥è¯†æ°´å¹³ï¼Œç³»ç»Ÿç‰¹åˆ«é›†æˆäº†å…»æ®–åŸ¹è®­ç®¡ç†ã€åŸ¹è®­ç±»å‹ç®¡ç†åŠåŸ¹è®­æŠ¥åç®¡ç†æ¨¡å—ï¼Œä¸ºå…»æ®–æˆ·æä¾›å­¦ä¹ äº¤æµå¹³å°ã€‚åœ¨å¹³å°è¿è¥å±‚é¢ï¼Œç³»ç»Ÿæä¾›äº†ç›´è§‚çš„ç³»ç»Ÿé¦–é¡µã€ä¸ªæ€§åŒ–çš„ä¸ªäººä¸­å¿ƒã€å…¨é¢çš„ç³»ç»Ÿç®¡ç†åŠŸèƒ½ã€å…¬å‘Šèµ„è®¯åˆ†ç±»ä¸è½®æ’­å›¾ç®¡ç†ï¼Œç¡®ä¿äº†å¹³å°çš„ä¿¡æ¯å‘å¸ƒä¸æ—¥å¸¸è¿ç»´ã€‚æ™ºèƒ½å®¢æœæ¨¡å—çš„å¼•å…¥ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·æœåŠ¡æ•ˆç‡ä¸ä½“éªŒï¼›è¯¦å°½çš„ç³»ç»Ÿæ—¥å¿—åŠŸèƒ½åˆ™ä¿éšœäº†ç³»ç»Ÿçš„å¯è¿½æº¯æ€§å’Œå®‰å…¨æ€§ã€‚é€šè¿‡è¿™äº›æ¨¡å—çš„æœ‰æœºç»“åˆï¼Œæœ¬ç³»ç»Ÿè‡´åŠ›äºä¸ºæ°´äº§å…»æ®–ä¼ä¸šæä¾›ä¸€ä¸ªé›†çº¦åŒ–ã€æ™ºèƒ½åŒ–ã€æ•°æ®åŒ–çš„ç»¼åˆç®¡ç†è§£å†³æ–¹æ¡ˆï¼ŒåŠ©åŠ›è¡Œä¸šå®ç°å¯æŒç»­å‘å±•å’Œæ•ˆç‡é£è·ƒã€‚</p>
<h2 data-id="heading-1">åŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿæ¼”ç¤ºè§†é¢‘</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1JAUNBiEzS%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1JAUNBiEzS/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">æ¼”ç¤ºè§†é¢‘</a></p>
<h2 data-id="heading-2">åŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿæ¼”ç¤ºå›¾ç‰‡</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18ee925be93d4aa7b85b4ffd663d41f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=ecU5OqgjJfIg4ulFcY%2B6dTP83Oo%3D" alt="é‡‡è´­å…¥åº“.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc60bb5db3394ade96aeaeab856654e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=hPce7eAqkQ%2Bh7D1rRMaUFPNYPZg%3D" alt="å‡ºåº“ä¿¡æ¯.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bcf55771f8f450f92e57e5e12934cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=yyVNqCzfAPoFenA6tQsoX%2B8XL%2Fs%3D" alt="åŸ¹è®­æŠ¥å.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75ce0e78b1e74fdca8e931b12879a44c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=uo3cj6p6ezGJjvnAJ2BjGS3V7j0%3D" alt="æ°´äº§è®¢å•.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccb25cc9882e45d09dbabae20605c402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=Cw0UVocsVKQ0pDq23Q9v0K3gb%2FU%3D" alt="æ°´äº§ä¿¡æ¯.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3ecb866651445729998fe42b2c8a935~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=4MZE50OTOCEJ2ZqbuBLaCCbuLu4%3D" alt="é¥²æ–™ä¿¡æ¯.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e206bfe1eb754d15bb25e690a6444d71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=ZwifH3Yzcok0yplnNvAht7QLv54%3D" alt="å…»æ®–è®°å½•.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/096d8b54b7584e38b24bc1b417018a89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=IyiUr%2BEyIGc%2B8RMqRpF5yJkqJIU%3D" alt="å…»æ®–åŸ¹è®­.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa8f36111b14bb989bd12d1dfd1b4e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=Q0o2kokPYSGzYZfSZoiACZa%2FQ0E%3D" alt="ç”¨æˆ·ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-3">åŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿä»£ç å±•ç¤º</h2>
<pre><code class="hljs language-dart" lang="dart"># Big Data processing <span class="hljs-keyword">with</span> SparkSession.builder <span class="hljs-keyword">is</span> utilized <span class="hljs-keyword">for</span> advanced analytics and recommendation engines.
# All necessary imports are grouped at the top.
from pyspark.sql <span class="hljs-keyword">import</span> SparkSession
from pyspark.sql.functions <span class="hljs-keyword">import</span> avg, col, datediff, to_date, lit, count, when
from pyspark.ml.recommendation <span class="hljs-keyword">import</span> ALS
from pyspark.sql.types <span class="hljs-keyword">import</span> StructType, StructField, IntegerType, FloatType
from datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd # Used <span class="hljs-keyword">for</span> simulating small data <span class="hljs-keyword">for</span> Spark DataFrame creation <span class="hljs-keyword">if</span> needed, but not <span class="hljs-keyword">for</span> core logic itself
# --- Core Functionality <span class="hljs-number">1</span>: å…»æ®–è®°å½•ç®¡ç† (Farming Record Analytics) ---
# Analyzes historical farming records using Spark to detect anomalies or predict trends.
def analyze_farming_records_spark(record_data_path: str, species_thresholds: dict):
    spark = SparkSession.builder \
        .appName(<span class="hljs-string">"FarmingRecordAnalytics"</span>) \
        .config(<span class="hljs-string">"spark.some.config.option"</span>, <span class="hljs-string">"some-value"</span>) \
        .getOrCreate()
    df = spark.read.csv(record_data_path, header=True, inferSchema=True)
    df = df.withColumn(<span class="hljs-string">"record_date"</span>, to_date(col(<span class="hljs-string">"record_date"</span>), <span class="hljs-string">"yyyy-MM-dd"</span>)) \
           .withColumn(<span class="hljs-string">"feed_amount_kg"</span>, col(<span class="hljs-string">"feed_amount"</span>).cast(<span class="hljs-string">"double"</span>)) \
           .withColumn(<span class="hljs-string">"growth_rate_g_day"</span>, col(<span class="hljs-string">"growth_rate"</span>).cast(<span class="hljs-string">"double"</span>))
    growth_analysis = df.groupBy(<span class="hljs-string">"species_id"</span>, <span class="hljs-string">"record_date"</span>) \
                        .agg(avg(<span class="hljs-string">"growth_rate_g_day"</span>).alias(<span class="hljs-string">"avg_growth_rate"</span>))
    anomalous_records = growth_analysis.join(
        spark.createDataFrame(list(species_thresholds.items()), [<span class="hljs-string">"species_id"</span>, <span class="hljs-string">"min_growth_threshold"</span>]),
        <span class="hljs-keyword">on</span>=<span class="hljs-string">"species_id"</span>
    ).filter(col(<span class="hljs-string">"avg_growth_rate"</span>) &lt; col(<span class="hljs-string">"min_growth_threshold"</span>))
    anomalies_collected = anomalous_records.collect()
    results = []
    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> anomalies_collected:
        results.append(f<span class="hljs-string">"Anomaly detected for Species {row['species_id']} on {row['record_date']}: Average growth rate {row['avg_growth_rate']:.2f}g/day is below threshold {row['min_growth_threshold']:.2f}g/day."</span>)
    spark.stop()
    <span class="hljs-keyword">return</span> results
# --- Core Functionality <span class="hljs-number">2</span>: æ°´äº§è®¢å•ç®¡ç† (Aquaculture Order Processing) ---
# Processes <span class="hljs-keyword">new</span> aquaculture product orders, including stock validation and inventory updates.
# Simulates database interactions using global dictionaries.
db_products_sim = {
    <span class="hljs-number">1</span>: {<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tilapia"</span>, <span class="hljs-string">"price"</span>: <span class="hljs-number">12.5</span>, <span class="hljs-string">"stock"</span>: <span class="hljs-number">100</span>},
    <span class="hljs-number">2</span>: {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Shrimp"</span>, <span class="hljs-string">"price"</span>: <span class="hljs-number">25.0</span>, <span class="hljs-string">"stock"</span>: <span class="hljs-number">200</span>},
    <span class="hljs-number">3</span>: {<span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Salmon"</span>, <span class="hljs-string">"price"</span>: <span class="hljs-number">30.0</span>, <span class="hljs-string">"stock"</span>: <span class="hljs-number">50</span>},
}
db_orders_sim = {}
db_order_items_sim = []
order_id_counter = <span class="hljs-number">1</span>
def process_aquaculture_order(user_id: <span class="hljs-built_in">int</span>, order_items_data: list):
    global order_id_counter
    <span class="hljs-keyword">if</span> not order_items_data:
        raise ValueError(<span class="hljs-string">"Order must contain items."</span>)
    total_amount = <span class="hljs-number">0.0</span>
    products_to_update = {}
    <span class="hljs-keyword">for</span> item_data <span class="hljs-keyword">in</span> order_items_data:
        product_id = item_data.<span class="hljs-keyword">get</span>(<span class="hljs-string">"product_id"</span>)
        quantity = item_data.<span class="hljs-keyword">get</span>(<span class="hljs-string">"quantity"</span>)
        <span class="hljs-keyword">if</span> not product_id or not quantity or quantity &lt;= <span class="hljs-number">0</span>:
            raise ValueError(<span class="hljs-string">"Invalid product ID or quantity in order item."</span>)
        product = db_products_sim.<span class="hljs-keyword">get</span>(product_id)
        <span class="hljs-keyword">if</span> not product:
            raise ValueError(f<span class="hljs-string">"Product with ID {product_id} not found."</span>)
        <span class="hljs-keyword">if</span> product[<span class="hljs-string">"stock"</span>] &lt; quantity:
            raise ValueError(f<span class="hljs-string">"Insufficient stock for product {product['name']}. Available: {product['stock']}, Requested: {quantity}."</span>)
        sub_total = product[<span class="hljs-string">"price"</span>] * quantity
        total_amount += sub_total
        products_to_update[product_id] = {<span class="hljs-string">"product_ref"</span>: product, <span class="hljs-string">"quantity"</span>: quantity, <span class="hljs-string">"unit_price"</span>: product[<span class="hljs-string">"price"</span>]}
    new_order_id = order_id_counter
    order_id_counter += <span class="hljs-number">1</span>
    new_order = {
        <span class="hljs-string">"id"</span>: new_order_id,
        <span class="hljs-string">"user_id"</span>: user_id,
        <span class="hljs-string">"order_date"</span>: datetime.now(),
        <span class="hljs-string">"total_amount"</span>: total_amount,
        <span class="hljs-string">"status"</span>: <span class="hljs-string">"CONFIRMED"</span>,
        <span class="hljs-string">"items"</span>: []
    }
    db_orders_sim[new_order_id] = new_order
    <span class="hljs-keyword">for</span> product_id, item_info <span class="hljs-keyword">in</span> products_to_update.items():
        order_item = {
            <span class="hljs-string">"order_id"</span>: new_order_id,
            <span class="hljs-string">"product_id"</span>: item_info[<span class="hljs-string">"product_ref"</span>][<span class="hljs-string">"id"</span>],
            <span class="hljs-string">"quantity"</span>: item_info[<span class="hljs-string">"quantity"</span>],
            <span class="hljs-string">"unit_price"</span>: item_info[<span class="hljs-string">"unit_price"</span>]
        }
        db_order_items_sim.append(order_item)
        item_info[<span class="hljs-string">"product_ref"</span>][<span class="hljs-string">"stock"</span>] -= item_info[<span class="hljs-string">"quantity"</span>]
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"order_id"</span>: new_order[<span class="hljs-string">"id"</span>], <span class="hljs-string">"total_amount"</span>: new_order[<span class="hljs-string">"total_amount"</span>], <span class="hljs-string">"status"</span>: new_order[<span class="hljs-string">"status"</span>]}
# --- Core Functionality <span class="hljs-number">3</span>: æ°´äº§æ¨èç³»ç»Ÿ (Aquaculture Product Recommendation Engine) ---
# Generates personalized aquaculture product recommendations using Spark<span class="hljs-string">'s ALS algorithm.
def get_aquaculture_recommendations_spark(interaction_data_path: str, user_id_to_recommend: int, num_recommendations: int = 5):
    spark = SparkSession.builder \
        .appName("AquacultureRecommendationEngine") \
        .config("spark.some.other.config.option", "another-value") \
        .getOrCreate()
    schema = StructType([
        StructField("user_id", IntegerType(), True),
        StructField("product_id", IntegerType(), True),
        StructField("rating", FloatType(), True)
    ])
    interactions_df = spark.read.csv(interaction_data_path, header=True, schema=schema)
    als = ALS(maxIter=5, regParam=0.01, userCol="user_id", itemCol="product_id", ratingCol="rating",
              coldStartStrategy="drop")
    model = als.fit(interactions_df)
    user_df = spark.createDataFrame([(user_id_to_recommend,)], ["user_id"])
    recommendations = model.recommendForUserSubset(user_df, num_recommendations)
    recommended_product_ids = []
    if recommendations.count() &gt; 0:
        for row in recommendations.collect()[0]["recommendations"]:
            recommended_product_ids.append(row["product_id"])
    spark.stop()
    return recommended_product_ids
</span></code></pre>
<h2 data-id="heading-4">åŸºäºSpringBootçš„æ°´äº§å…»æ®–ç®¡ç†ç³»ç»Ÿæ–‡æ¡£å±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab8f270cf20849deabba7f02492a91ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V5Lia6K6-6K6h5bCP6YCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478245&amp;x-signature=qTpbat7rDSSgocev9ijQZljSUZ4%3D" alt="æ–‡æ¡£.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ’–ğŸ’–ä½œè€…ï¼šè®¡ç®—æœºæ¯•ä¸šè®¾è®¡å°é€”
ğŸ’™ğŸ’™ä¸ªäººç®€ä»‹ï¼šæ›¾é•¿æœŸä»äº‹è®¡ç®—æœºä¸“ä¸šåŸ¹è®­æ•™å­¦ï¼Œæœ¬äººä¹Ÿçƒ­çˆ±ä¸Šè¯¾æ•™å­¦ï¼Œè¯­è¨€æ“…é•¿Javaã€å¾®ä¿¡å°ç¨‹åºã€Pythonã€Golangã€å®‰å“Androidç­‰ï¼Œå¼€å‘é¡¹ç›®åŒ…æ‹¬å¤§æ•°æ®ã€æ·±åº¦å­¦ä¹ ã€ç½‘ç«™ã€å°ç¨‹åºã€å®‰å“ã€ç®—æ³•ã€‚å¹³å¸¸ä¼šåšä¸€äº›é¡¹ç›®å®šåˆ¶åŒ–å¼€å‘ã€ä»£ç è®²è§£ã€ç­”è¾©æ•™å­¦ã€æ–‡æ¡£ç¼–å†™ã€ä¹Ÿæ‡‚ä¸€äº›é™é‡æ–¹é¢çš„æŠ€å·§ã€‚å¹³å¸¸å–œæ¬¢åˆ†äº«ä¸€äº›è‡ªå·±å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œä¹Ÿå–œæ¬¢äº¤æµæŠ€æœ¯ï¼Œå¤§å®¶æœ‰æŠ€æœ¯ä»£ç è¿™ä¸€å—çš„é—®é¢˜å¯ä»¥é—®æˆ‘ï¼
ğŸ’›ğŸ’›æƒ³è¯´çš„è¯ï¼šæ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ä¸æ”¯æŒï¼
ğŸ’œğŸ’œ
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011385.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011385.html" ref="nofollow noopener noreferrer">ç½‘ç«™å®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011386.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011386.html" ref="nofollow noopener noreferrer">å®‰å“/å°ç¨‹åºå®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011387.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011387.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2501_92808674%2Fcategory_13011390.html" target="_blank" title="https://blog.csdn.net/2501_92808674/category_13011390.html" ref="nofollow noopener noreferrer">æ·±åº¦å­¦ä¹ å®æˆ˜é¡¹ç›®</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…å…¥ç†è§£æµå¼SSRçš„æ€§èƒ½æ”¶ç›Šä¸å·¥ä½œåŸç†]]></title>    <link>https://juejin.cn/post/7575090551357407284</link>    <guid>https://juejin.cn/post/7575090551357407284</guid>    <pubDate>2025-11-23T04:51:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357407284" data-draft-id="7570912420568481802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…å…¥ç†è§£æµå¼SSRçš„æ€§èƒ½æ”¶ç›Šä¸å·¥ä½œåŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,iOS"/> <meta itemprop="datePublished" content="2025-11-23T04:51:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜è¿œæ¹–ä¹‹é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2370998127573751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…å…¥ç†è§£æµå¼SSRçš„æ€§èƒ½æ”¶ç›Šä¸å·¥ä½œåŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2370998127573751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜è¿œæ¹–ä¹‹é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:51:36.000Z" title="Sun Nov 23 2025 04:51:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯æµå¼ SSR</h2>
<p>æµå¼ SSRï¼ˆStreaming Server-Side Renderingï¼‰æ˜¯ä¸€ç§å°†æœåŠ¡ç«¯æ¸²æŸ“å’Œæµå¼ä¼ è¾“ç»“åˆèµ·æ¥çš„æŠ€æœ¯ã€‚ä¸ä¼ ç»Ÿçš„ SSR ä¸åŒï¼Œæµå¼ SSR å¯ä»¥åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„åŒæ—¶ï¼Œé€æ­¥å°†æ¸²æŸ“ç»“æœä¼ è¾“åˆ°å®¢æˆ·ç«¯ï¼Œå®ç°é¡µé¢çš„æ¸è¿›å¼å±•ç¤ºã€‚</p>
<p>åœ¨æµå¼ SSR ä¸­ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œé€æ­¥ç”Ÿæˆé¡µé¢å†…å®¹ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºæµå¼æ•°æ®æµå¼ä¼ è¾“åˆ°å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å¯ä»¥åœ¨æ¥æ”¶åˆ°ä¸€éƒ¨åˆ†æ•°æ®åï¼Œå°±å¼€å§‹é€æ­¥æ˜¾ç¤ºé¡µé¢ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œæˆã€‚è¿™ç§æ–¹å¼å¯ä»¥æœ‰æ•ˆæé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8d597f865b43c79abefb42c03ca09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478296&amp;x-signature=7%2BPppr%2BKU2I0Z%2BX22ELwntltuHU%3D" alt="20251111002406.jpg" loading="lazy"/>
(æµå¼ SSR çš„é¡µé¢åŠ è½½è¿‡ç¨‹ï¼‰</p>
<h2 data-id="heading-1">ä½¿ç”¨æµå¼ SSR çš„æ”¶ç›Š</h2>
<ul>
<li>
<p><strong>å‡å°‘è®¾å¤‡å’Œç½‘ç»œæƒ…å†µçš„å‰¯ä½œç”¨</strong></p>
<p>è¿™æ˜¯ SSR æ¸²æŸ“æ¨¡å¼ç›¸æ¯”äºä¼ ç»Ÿ  CSR æ¸²æŸ“æ¨¡å¼å¸¦æ¥çš„ä¼˜åŠ¿ï¼Œå¯¹äºæµå¼ SSR åº”ç”¨åŒæ ·é€‚ç”¨ã€‚
CSR æ¸²æŸ“æ¨¡å¼éœ€è¦åœ¨ç»ˆç«¯è®¾å¤‡ä¸Šå®Œæˆèµ„æºåŠ è½½ã€æ•°æ®åŠ è½½ä»¥åŠæ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹ï¼Œå—ç«¯ä¾§è®¾å¤‡è‡ªèº« CPU åŠç½‘ç»œæ€§èƒ½å½±å“å¤§ï¼Œå¦‚è®¾å¤‡ CPU æ€§èƒ½ä¸è¶³æˆ–ç½‘ç»œæ³¢åŠ¨è¾ƒå¤§ï¼Œåˆ™æ­¤æ—¶æ•´ä¸ªé¡µé¢åŠ è½½æ€§èƒ½å°†ä¸¥é‡ä¸‹é™ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šé¡µé¢åœ¨é«˜ç«¯è®¾å¤‡ä¸ŠåŠ è½½é€Ÿåº¦è¾ƒå¿«ï¼Œä½†åœ¨ä½ç«¯è®¾å¤‡ä¸Šéœ€è¦7-8ç§’çš„åŸå› ã€‚</p>
<p>è€Œ SSR çš„æ¸²æŸ“æ¨¡å¼ï¼Œåˆ™<strong>åœ¨æœåŠ¡ç«¯æä¾›äº†é«˜æ€§èƒ½çš„æ¸²æŸ“å®¹å™¨åŠç½‘ç»œç¯å¢ƒï¼ŒæœåŠ¡ç«¯çš„æ¸²æŸ“ï¼Œä¸å—ç«¯ä¾§è®¾å¤‡ CPU æˆ–ç½‘ç»œå½±å“ï¼Œå§‹ç»ˆæä¾›ç¨³å®šçš„æ¸²æŸ“æ€§èƒ½è¡¨ç°</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba73baf6b12b44a0b7b6055b1c45b7fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478296&amp;x-signature=vYH5fhaZmJ1rFH8%2FPW4m4SNzkW0%3D" alt="fa9a1944-b6b4-4e22-980a-47bf604c2e2c.png" loading="lazy"/></p>
</li>
<li>
<p><strong>å‡å°‘æ¥å£è¿‡æ…¢å¯¹é¦–å±æ€§èƒ½çš„å½±å“</strong></p>
<p>é€šå¸¸ï¼Œé¡µé¢ä¼šç”±å¤šä¸ªåŒºå—ç»„æˆï¼Œå…¶ä¸­ä¸€äº›åŒºå—ä¸ä¾èµ–äºæ•°æ®ï¼Œè€Œå…¶ä»–åŒºå—å¯èƒ½ä¾èµ–äºå¿«é€Ÿæˆ–ç¼“æ…¢å“åº”çš„æ¥å£ã€‚</p>
<p>ç°æœ‰ SSR æ¸²æŸ“æ¨¡å¼å­˜åœ¨çš„ä¸€ä¸ªä¸è¶³æ˜¯ï¼Œæ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œéœ€è¦åœ¨é¡µé¢æ¸²æŸ“ä¹‹å‰å®Œæˆæ‰€æœ‰æ•°æ®è¯·æ±‚ï¼Œå¹¶ä¸€æ¬¡æ€§è¿”å›æ•´ä¸ªé¡µé¢çš„ HTMLã€‚å¦‚æœé¡µé¢çš„æŸäº›æ¥å£å“åº”è¿‡æ…¢ï¼Œå°†ä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢çš„å“åº”æ—¶é—´è¿‡é•¿ã€‚</p>
<p>æµå¼æ¸²æŸ“çš„æœ€å¤§å¥½å¤„åœ¨äºå®ƒå¯ä»¥åˆ†å—è¿”å›é¡µé¢å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå½“è¯·æ±‚è¿›å…¥æ—¶ï¼Œå®ƒå¯ä»¥é¦–å…ˆå®Œæˆé¡µé¢é™æ€å†…å®¹çš„æ¸²æŸ“å¹¶å“åº”ç»™ç«¯ä¾§è¿›è¡Œæ¸²æŸ“ï¼Œç­‰å¾…å…¶ä»–ä¾èµ–äºæ•°æ®çš„åŒºå—å®Œæˆæ¸²æŸ“åå†åˆ†å—è¿”å›ã€‚è¿™æ ·æ•´ä¸ªé¡µé¢çš„æ¸²æŸ“è¿‡ç¨‹ä¸å†ç»‘å®šåœ¨ä¸€èµ·ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œå…ˆå®Œæˆæ¸²æŸ“çš„éƒ¨åˆ†å°†å…ˆè¿”å›ï¼Œä»è€Œä¼˜åŒ–äº†é¡µé¢å“åº”é€Ÿåº¦ã€‚</p>
</li>
<li>
<p><strong>æå‰èµ„æºçš„åŠ è½½æ—¶æœº</strong></p>
<p>æµå¼ SSR ç›¸æ¯”ä¼ ç»Ÿ SSR åº”ç”¨æœ‰å¦ä¸€ä¸ªé¢å¤–çš„æ”¶ç›Šæ˜¯ï¼Œç”±äº HTML å¯ä»¥åˆ†å—è¿”å›ï¼Œé¡µé¢çš„èµ„æºä¿¡æ¯å¯ä»¥éšç¬¬ä¸€ä¸ª HTML ç‰‡æ®µä¸€èµ·ä¸‹å‘ï¼Œä»è€Œå°½å¿«å¼€å§‹åŠ è½½ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ä¼ ç»Ÿ SSR åº”ç”¨ä¸­ï¼Œèµ„æºä¿¡æ¯å¿…é¡»ç­‰å¾…æ•´ä¸ª HTML å®Œæˆæ¸²æŸ“åä¸‹å‘ï¼Œè¯·æ±‚å¼€å§‹çš„æ—¶æœºä¼šå—åˆ°æ¸²æŸ“è¿‡ç¨‹çš„é˜»å¡ã€‚</p>
<p>é‡‡ç”¨æµå¼ SSRï¼Œå¯ä»¥ä½¿èµ„æºè¯·æ±‚å’Œé¡µé¢æ¸²æŸ“è¿‡ç¨‹å¹¶è¡Œè¿›è¡Œï¼Œè¿›ä¸€æ­¥æå‡äº†é¡µé¢çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/262454a66ef1469789c973908bdfdf86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478296&amp;x-signature=pueQsCLST%2FVr2owHTM95M6HTlvU%3D" alt="752472f2-cf39-4c89-9738-e4ad3e084ba9.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æå‡é¡µé¢çš„å¯äº¤äº’æ—¶é—´</strong></p>
<p>åœ¨ SSR æ¸²æŸ“æ¨¡å¼ä¸‹ï¼Œå°†é¡µé¢èŠ‚ç‚¹è¾¾åˆ°å¯äº¤äº’çŠ¶æ€çš„è¿‡ç¨‹ç§°ä¸º Hydrateï¼Œå®ƒéœ€è¦åœ¨ç«¯ä¾§æ‰§è¡Œ JavaScriptã€‚</p>
<p>ç”±äºé¡µé¢èµ„æºå¯ä»¥æå‰ä¸‹å‘ï¼Œå¹¶ä¸” React 18 å¯¹ Hydrate è¿›è¡Œäº†å¼‚æ­¥åŒ–å¤„ç†ï¼Œåœ¨æµå¼ SSR åº”ç”¨ä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥å®ç°å…ˆæ¸²æŸ“çš„é¡µé¢å…ˆè¾¾åˆ°å¯äº¤äº’çŠ¶æ€çš„æ•ˆæœã€‚å¯¹äºéƒ¨åˆ†é¦–å±æ¥å£è¾ƒæ…¢çš„åº”ç”¨ï¼Œè¿™å°†è¿›ä¸€æ­¥æå‡é¡µé¢çš„å¯äº¤äº’ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6d50f24ad84d6397f6b472e57ce551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478296&amp;x-signature=sxEYVIj6yhciBVEKqwOPNJXnz1c%3D" alt="20251111002828.jpg" loading="lazy"/></p>
</li>
</ul>
<h2 data-id="heading-2">åŸºæœ¬å·¥ä½œåŸç†</h2>
<p>æµå¼ SSR çš„å®ç°ï¼Œæœ€åŸºæœ¬çš„åŸç†æ˜¯ï¼š</p>
<ul>
<li>åŸºäº HTTP åè®®ä¸­çš„ chunked ç¼–ç è§„èŒƒï¼Œè®¾ç½®å“åº”å¤´çš„ Transfer-Encoding ä¸º chunked å¯¹ HTML å†…å®¹è¿›è¡Œåˆ†å—ä¼ è¾“ã€‚</li>
<li>åœ¨æµè§ˆå™¨ä¾§ï¼Œæµå¼åœ°è¯»å–æ•°æ®å¹¶è¿›è¡Œæ¸²æŸ“ï¼Œè¿™æ˜¯ä¸»æµæµè§ˆå™¨é»˜è®¤æ”¯æŒçš„ã€‚</li>
</ul>
<p>ç»“åˆ Node.js å†…ç½®çš„ HTTP æ¨¡å—ï¼Œå®ç°ä¸€ä¸ªæœ€ç®€å•çš„æµå¼ DEMO ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">async</span> (req, res) =&gt; {
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Transfer-Encoding'</span>, <span class="hljs-string">'chunked'</span>)

  <span class="hljs-comment">// åˆ†åŒºå—çš„ä¼ è¾“é¡µé¢å†…å®¹</span>
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;html&gt;'</span>);
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;head&gt;&lt;title&gt;Stream Demo&lt;/title&gt;&lt;head&gt;'</span>);
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;body&gt;'</span>);

  <span class="hljs-comment">// æ¨¡æ‹ŸæœåŠ¡ç«¯æš‚åœ</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">3000</span>);
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;h2&gt;Hello&lt;/h2&gt;'</span>);

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">3000</span>);
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;h2&gt;ICE 3&lt;/h2&gt;'</span>);
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'&lt;/body&gt;&lt;/html&gt;'</span>);
  res.<span class="hljs-title function_">end</span>();
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<p>åŸºäºè¿™ä¸ªåŸºæœ¬åŸç†ï¼Œå°†é¡µé¢åˆ†ä¸ºéª¨æ¶å±å’Œå‡ ä¸ªåŒºå—ï¼Œå¹¶è¡Œåœ°æ¸²æŸ“è¿™äº›åŒºå—ï¼Œç„¶åå°†æ¸²æŸ“å¥½çš„åŒºå—åˆ†æ®µè¿”å›ï¼Œå°±å¯ä»¥å®ç°åŸºæœ¬çš„æµå¼ SSR ã€‚</p>
<h2 data-id="heading-3">WebView æ¥æ”¶æµå¼Chunkæ¸²æŸ“çš„å®ç°åŸç†ï¼ˆiOSï¼‰</h2>
<h3 data-id="heading-4">æ ¸å¿ƒç»„ä»¶</h3>
<p>iOS WebView æ¥æ”¶æµå¼ Chunk æ¸²æŸ“åŸºäº <strong>NSURLProtocol æ‹¦æˆªæœºåˆ¶</strong> + <strong>NSURLProtocolClient å›è°ƒæœºåˆ¶</strong> å®ç°ã€‚</p>
<p><strong>NSURLProtocolï¼ˆè¯·æ±‚æ‹¦æˆªå™¨ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‹¦æˆª WebView çš„ç½‘ç»œè¯·æ±‚</span>
+ (<span class="hljs-variable constant_">BOOL</span>)<span class="hljs-attr">canInitWithRequest</span>:(<span class="hljs-title class_">NSURLRequest</span> *)request {
    <span class="hljs-keyword">return</span> [self <span class="hljs-attr">shouldInterceptRequest</span>:request];
}

- (<span class="hljs-keyword">void</span>)startLoading {
    <span class="hljs-comment">// è½¬å‘ç»™è‡ªå®šä¹‰å¤„ç†å™¨</span>
    [[<span class="hljs-title class_">SSRHandler</span> shareInstance] <span class="hljs-attr">sendRequest</span>:self.<span class="hljs-property">request</span> <span class="hljs-attr">delegate</span>:self];
}
</code></pre>
<p><strong>NSURLProtocolClientï¼ˆæ•°æ®ä¼ é€’æ¡¥æ¢ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç³»ç»Ÿæä¾›çš„åè®®ï¼Œç”¨äºå‘ WebView ä¼ é€’æ•°æ®</span>
@protocol <span class="hljs-title class_">NSURLProtocolClient</span>
- (<span class="hljs-keyword">void</span>)<span class="hljs-title class_">URLProtocol</span>:<span class="hljs-attr">didReceiveResponse</span>:<span class="hljs-attr">cacheStoragePolicy</span>:;  <span class="hljs-comment">// å“åº”å¤´</span>
- (<span class="hljs-keyword">void</span>)<span class="hljs-title class_">URLProtocol</span>:<span class="hljs-attr">didLoadData</span>:;                           <span class="hljs-comment">// æ•°æ®å—ï¼ˆå¯å¤šæ¬¡ï¼‰</span>
- (<span class="hljs-keyword">void</span>)<span class="hljs-title class_">URLProtocolDidFinishLoading</span>:;                       <span class="hljs-comment">// å®Œæˆ</span>
- (<span class="hljs-keyword">void</span>)<span class="hljs-title class_">URLProtocol</span>:<span class="hljs-attr">didFailWithError</span>:;                      <span class="hljs-comment">// é”™è¯¯</span>
@end

</code></pre>
<h3 data-id="heading-5">æ¸²æŸ“æµç¨‹</h3>
<ul>
<li>
<p><strong>é˜¶æ®µä¸€ï¼šè¯·æ±‚æ‹¦æˆª</strong></p>
<pre><code class="hljs language-objectivec" lang="objectivec">WebView å‘èµ·è¯·æ±‚ â†’ <span class="hljs-built_in">NSURLProtocol</span> æ‹¦æˆª â†’ è½¬å‘ç»™ SSR å¤„ç†å™¨
</code></pre>
</li>
<li>
<p><strong>é˜¶æ®µäºŒï¼šå“åº”å¤„ç†</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. è¿”å›å“åº”å¤´</span>
[<span class="hljs-meta">client URLProtocol:protocol didReceiveResponse:response cacheStoragePolicy:policy</span>];

<span class="hljs-comment">// 2. æµå¼è¿”å›æ•°æ®ï¼ˆå…³é”®æ­¥éª¤ï¼‰</span>
[<span class="hljs-meta">client URLProtocol:protocol didLoadData:chunk1</span>];  <span class="hljs-comment">// ç¬¬1å—</span>
[<span class="hljs-meta">client URLProtocol:protocol didLoadData:chunk2</span>];  <span class="hljs-comment">// ç¬¬2å—</span>
[<span class="hljs-meta">client URLProtocol:protocol didLoadData:chunkN</span>];  <span class="hljs-comment">// ç¬¬Nå—</span>

<span class="hljs-comment">// 3. æ ‡è®°å®Œæˆ</span>
[<span class="hljs-meta">client URLProtocolDidFinishLoading:protocol</span>];
</code></pre>
</li>
<li>
<p><strong>é˜¶æ®µä¸‰ï¼šWebView æ¸²æŸ“</strong></p>
<pre><code class="hljs language-css" lang="css">æ¯æ¬¡ didLoadData è°ƒç”¨ â†’ WebView å¢é‡è§£æ <span class="hljs-selector-tag">HTML</span> â†’ å®æ—¶æ¸²æŸ“åˆ°é¡µé¢
</code></pre>
</li>
</ul>
<p><strong>æ•°æ®æµå›¾ç¤ºå¦‚ä¸‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WebView   â”‚â”€â”€â”€â–¶â”‚NSURLProtocol â”‚â”€â”€â”€â–¶â”‚ SSR Handler â”‚
â”‚             â”‚    â”‚              â”‚    â”‚             â”‚
â”‚             â”‚â—€â”€â”€â”€â”‚              â”‚â—€â”€â”€â”€â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â”‚
       â”‚                   â–¼
   å¢é‡æ¸²æŸ“          NSURLProtocolClient
       â–²                   â”‚
       â”‚                   â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚     didLoadData (chunk1)    â”‚
   â”‚     didLoadData (chunk2)    â”‚
   â”‚     didLoadData (chunkN)    â”‚
   â”‚  URLProtocolDidFinishLoading â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JHandlerâ€”â€”ä¸€å¥—ç®€å•æ˜“ç”¨çš„ C++ äº‹ä»¶å¾ªç¯æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7575349314945368105</link>    <guid>https://juejin.cn/post/7575349314945368105</guid>    <pubDate>2025-11-23T04:52:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575349314945368105" data-draft-id="7575159361904345129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JHandlerâ€”â€”ä¸€å¥—ç®€å•æ˜“ç”¨çš„ C++ äº‹ä»¶å¾ªç¯æœºåˆ¶"/> <meta itemprop="keywords" content="Android,HarmonyOS,C++"/> <meta itemprop="datePublished" content="2025-11-23T04:52:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±Ÿæ¾æ¶Œ"/> <meta itemprop="url" content="https://juejin.cn/user/1820446986338504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JHandlerâ€”â€”ä¸€å¥—ç®€å•æ˜“ç”¨çš„ C++ äº‹ä»¶å¾ªç¯æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1820446986338504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±Ÿæ¾æ¶Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:52:34.000Z" title="Sun Nov 23 2025 04:52:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é›¶ã€JHandler</h2>
<p><strong>JHandler æ˜¯ä¸€å¥— C++ çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚</strong> å¯åœ¨è‡ªè¡Œåˆ›å»ºçš„çº¿ç¨‹ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ JHandler å·²å°è£…å¥½çš„ç‹¬ç«‹çº¿ç¨‹å¤„ç†äº‹ä»¶ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FzincPower%2FJHandler" target="_blank" title="https://github.com/zincPower/JHandler" ref="nofollow noopener noreferrer">github.com/zincPower/Jâ€¦</a></p>
<h2 data-id="heading-1">ä¸€ã€é›†æˆ</h2>
<p>å°†é¡¹ç›®ä¸­ <code>jhandler</code> æ–‡ä»¶å¤¹æ‹·è´æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œå¹¶åœ¨é¡¹ç›®çš„ <code>CMakeLists.txt</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">include_directories(â€œæ·»åŠ çš„ jhandler ç›®å½•ç›¸å¯¹äºå½“å‰ CMakeLists.txt æ–‡ä»¶çš„è·¯å¾„â€/jhandler/include)
add_subdirectory(jhandler)

target_link_libraries(â€œé“¾æ¥ç›®æ ‡åç§°â€ PUBLIC jhandler)
</code></pre>
<h2 data-id="heading-2">äºŒã€å¸¸è§„ä½¿ç”¨</h2>
<h3 data-id="heading-3">1ã€ä½¿ç”¨ JHandler è‡ªå¸¦çš„çº¿ç¨‹</h3>
<p><code>JHandler</code> ä¸­å·²ç»å‡†å¤‡å¥½äº† <code>HandlerThread</code> ï¼Œ<strong>å†…éƒ¨ä¼šåœ¨è°ƒç”¨ <code>start</code> æ–¹æ³•ååˆ›å»ºç‹¬ç«‹çº¿ç¨‹</strong>ï¼ŒæŒ‰ç…§æ”¾å…¥æ¶ˆæ¯å’Œé—­åŒ…çš„é¡ºåºï¼Œä¸²è¡Œåˆ†å‘äº‹ä»¶æ¶ˆæ¯æˆ–æ‰§è¡Œé—­åŒ…ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»º HandlerThread</span>
<span class="hljs-keyword">auto</span> handlerThread = jhandler::HandlerThread::<span class="hljs-built_in">create</span>();
<span class="hljs-comment">// å¯åŠ¨ HandlerThread ï¼Œå†…éƒ¨ä¼šå¯åŠ¨çº¿ç¨‹</span>
handlerThread-&gt;<span class="hljs-built_in">start</span>();

<span class="hljs-comment">// å¯¹ HandlerThread è¿›è¡Œä½¿ç”¨</span>

<span class="hljs-comment">// é€€å‡º HandlerThread ï¼Œä¼šæ‰§è¡Œå®Œå·²ç»æ”¾å…¥çš„äº‹ä»¶æ¶ˆæ¯å’Œé—­åŒ…</span>
handlerThread-&gt;<span class="hljs-built_in">quit</span>();
</code></pre>
<p><strong><code>quit</code> æ–¹æ³•ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œä¼šè®© <code>HandlerThread</code> å†…éƒ¨çº¿ç¨‹åœ¨å¤„ç†å®Œæ‰€æœ‰çš„æ¶ˆæ¯å’Œé—­åŒ…åå…³é—­çº¿ç¨‹ã€‚</strong></p>
<h3 data-id="heading-4">2ã€æ·»åŠ äº‹ä»¶æ¶ˆæ¯ã€é—­åŒ…</h3>
<p>å¯åŠ¨ <code>HandlerThread</code> åï¼Œå¯ä»¥æ”¾å…¥<strong>é—­åŒ…</strong>æˆ–<strong>äº‹ä»¶æ¶ˆæ¯ <code>Message</code></strong> ã€‚</p>
<p><strong>é—­åŒ…ï¼š</strong> è°ƒç”¨ <code>Handler-&gt;post(std::function&lt;void()&gt; fun)</code> æ–¹æ³•æ”¾å…¥é—­åŒ…ï¼Œå…·ä½“ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">auto</span> name = <span class="hljs-string">"æ±Ÿæ¾æ¶Œ"</span>;
handler-&gt;<span class="hljs-built_in">post</span>([name]() {
jhandler::Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"ã€runClosureã€‘è¿è¡Œé—­åŒ… name="</span>, name, <span class="hljs-string">" Looper çº¿ç¨‹ id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
});

<span class="hljs-comment">// è¾“å‡º</span>
<span class="hljs-comment">// ã€CommonUseã€‘ ã€runClosureã€‘è¿è¡Œé—­åŒ… name=æ±Ÿæ¾æ¶Œ Looper çº¿ç¨‹ id=0x700000339000</span>
</code></pre>
<p><strong>äº‹ä»¶æ¶ˆæ¯ Messageï¼š</strong> è°ƒç”¨ <code>Handler-&gt;sendMessage(std::unique_ptr&lt;Message&gt; message)</code> æ–¹æ³•æ”¾å…¥äº‹ä»¶æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">auto</span> message = jhandler::Message::<span class="hljs-built_in">obtain</span>();             <span class="hljs-comment">// è·å–äº‹ä»¶æ¶ˆæ¯</span>
message-&gt;what = SAY_HI;                                 <span class="hljs-comment">// äº‹ä»¶ç±»åˆ«</span>
message-&gt;data = std::<span class="hljs-built_in">make_shared</span>&lt;std::string&gt;(<span class="hljs-string">"æ±Ÿæ¾æ¶Œ"</span>); <span class="hljs-comment">// äº‹ä»¶æ•°æ®</span>
message-&gt;arg1 = <span class="hljs-number">1994</span>;
message-&gt;arg2 = <span class="hljs-number">170</span>;
handler-&gt;<span class="hljs-built_in">sendMessage</span>(std::<span class="hljs-built_in">move</span>(message));               <span class="hljs-comment">// æ”¾å…¥äº‹ä»¶æ¶ˆæ¯</span>

<span class="hljs-comment">// è¾“å‡º</span>
<span class="hljs-comment">// ã€FirstCommonUseHandlerã€‘ ã€handleMessageã€‘ä½ å¥½ï¼Œæ±Ÿæ¾æ¶Œ(1994,170) Looper çº¿ç¨‹ id=0x70000589c000</span>
</code></pre>
<blockquote>
<p>å¦‚ä½•å¤„ç†äº‹ä»¶æ¶ˆæ¯ï¼Œè¯·æŸ¥çœ‹ <strong>â€œè‡ªå®šä¹‰äº‹ä»¶å¤„ç†çš„ Handlerâ€</strong> å°èŠ‚ã€‚</p>
</blockquote>
<h3 data-id="heading-5">3ã€ç§»é™¤æ¶ˆæ¯</h3>
<p>å¯ä»¥é€šè¿‡ <code>Handler-&gt;removeMessage(int32_t what)</code> ç§»é™¤ä¸ <code>what</code> ç›¸åŒçš„äº‹ä»¶æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">handler-&gt;<span class="hljs-built_in">removeMessage</span>(SAY_HI);
</code></pre>
<p>å¯ä»¥é€šè¿‡ <code>Handler-&gt;removeAllMessages()</code> ç§»é™¤æ‰€æœ‰çš„é—­åŒ…å’Œäº‹ä»¶æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">handler-&gt;<span class="hljs-built_in">removeAllMessages</span>();
</code></pre>
<h3 data-id="heading-6">4ã€å®šä¹‰å¤„ç†äº‹ä»¶æ¶ˆæ¯çš„ Handler</h3>
<p>æ”¾å…¥çš„äº‹ä»¶æ¶ˆæ¯ï¼Œéœ€è¦å¼€å‘è€…ç»§æ‰¿ <code>jhandler::Handler</code> ç¼–å†™è‡ªå®šä¹‰äº‹ä»¶å¤„ç†çš„ <code>Handler</code> è¿›è¡Œæ¥æ”¶å¤„ç†ã€‚</p>
<p>åœ¨é‡å†™çš„ <code>handleMessage</code> æ–¹æ³•ä¸­æ¥æ”¶æ”¾å…¥çš„äº‹ä»¶æ¶ˆæ¯ï¼Œç¼–å†™ç›¸åº”ä¸šåŠ¡çš„é€»è¾‘ã€‚å…·ä½“ç¼–å†™å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®šä¹‰äº‹ä»¶æ¶ˆæ¯ what</span>
<span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> SAY_HI = <span class="hljs-number">10000</span>;

<span class="hljs-comment">// å®šä¹‰ Handler</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FirstCommonUseHandler</span> : <span class="hljs-keyword">public</span> jhandler::Handler {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">static</span> std::string TAG;
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">FirstCommonUseHandler</span><span class="hljs-params">(std::shared_ptr&lt;jhandler::Looper&gt; looper)</span> </span>{}
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handleMessage</span><span class="hljs-params">(<span class="hljs-type">const</span> std::unique_ptr&lt;jhandler::Message&gt; &amp;message)</span> <span class="hljs-keyword">override</span></span>{
        <span class="hljs-comment">// æ­¤å¤„æ¥æ”¶ Message ç¼–å†™è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘</span>
        <span class="hljs-keyword">switch</span> (message-&gt;what) {
            <span class="hljs-keyword">case</span> SAY_HI: {
                <span class="hljs-keyword">auto</span> name = message-&gt;<span class="hljs-built_in">getData</span>&lt;std::string&gt;();
                <span class="hljs-keyword">auto</span> year = message-&gt;arg1;
                <span class="hljs-keyword">auto</span> height = message-&gt;arg2;
                Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"ã€handleMessageã€‘ä½ å¥½ï¼Œ"</span>, *name, <span class="hljs-string">"("</span>, year, <span class="hljs-string">","</span>, height, <span class="hljs-string">")"</span>, <span class="hljs-string">" Looper çº¿ç¨‹ id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
                <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">case</span> SHOW_DESCRIPTION: {
                Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"ã€handleMessageã€‘æˆ‘æ˜¯ä¸€ä¸ª C++ äº‹ä»¶å¾ªç¯æœºåˆ¶ Looper çº¿ç¨‹ id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
                <span class="hljs-keyword">break</span>;
            }
        }
    }
};

<span class="hljs-comment">// åˆ›å»º HandlerThread</span>
<span class="hljs-keyword">auto</span> handlerThread = jhandler::HandlerThread::<span class="hljs-built_in">create</span>();
<span class="hljs-comment">// å¯åŠ¨ HandlerThread</span>
handlerThread-&gt;<span class="hljs-built_in">start</span>();
<span class="hljs-comment">// è·å– Looper</span>
<span class="hljs-keyword">auto</span> looper = handlerThread-&gt;<span class="hljs-built_in">getLooper</span>();
<span class="hljs-comment">// åˆ›å»ºè‡ªå·±çš„ Handler</span>
<span class="hljs-keyword">auto</span> handler = std::<span class="hljs-built_in">make_shared</span>&lt;FirstCommonUseHandler&gt;(looper);
<span class="hljs-comment">// äº‹ä»¶æ¶ˆæ¯ä¼ é€’</span>
<span class="hljs-keyword">auto</span> message = jhandler::Message::<span class="hljs-built_in">obtain</span>();
message-&gt;what = SAY_HI;
message-&gt;data = std::<span class="hljs-built_in">make_shared</span>&lt;std::string&gt;(<span class="hljs-string">"æ±Ÿæ¾æ¶Œ"</span>);
message-&gt;arg1 = <span class="hljs-number">1994</span>;
message-&gt;arg2 = <span class="hljs-number">170</span>;
handler-&gt;<span class="hljs-built_in">sendMessage</span>(std::<span class="hljs-built_in">move</span>(message));

message = jhandler::Message::<span class="hljs-built_in">obtain</span>();
message-&gt;what = SHOW_DESCRIPTION;
handler-&gt;<span class="hljs-built_in">sendMessage</span>(std::<span class="hljs-built_in">move</span>(message));

<span class="hljs-comment">// è¾“å‡º </span>
<span class="hljs-comment">// ã€FirstCommonUseHandlerã€‘ ã€handleMessageã€‘ä½ å¥½ï¼Œæ±Ÿæ¾æ¶Œ(1994,170) Looper çº¿ç¨‹ id=0x70000589c000</span>
<span class="hljs-comment">// ã€FirstCommonUseHandlerã€‘ ã€handleMessageã€‘æˆ‘æ˜¯ä¸€ä¸ª C++ äº‹ä»¶å¾ªç¯æœºåˆ¶ Looper çº¿ç¨‹ id=0x70000589c000</span>
</code></pre>
<h3 data-id="heading-7">5ã€å¤šä¸ª Handler è§£è€¦é€»è¾‘</h3>
<p>æœ‰æ—¶éœ€è¦å°†å¤„ç†äº‹ä»¶æ¶ˆæ¯çš„é€»è¾‘è§£è€¦ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡ <code>Looper</code> åˆ›å»ºå¤šä¸ª <code>Handler</code> ï¼Œå°†äº‹ä»¶æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„ <code>Handler</code> ï¼Œåç»­ä¼šç”±è¯¥ <code>Handler</code> æ‰§è¡Œå¯¹åº”é€»è¾‘ï¼Œå¹¶ä¸”<strong>å¤šä¸ª <code>Handler</code> éƒ½æ˜¯è¿è¡Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼ŒæŒ‰æ·»åŠ é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚</strong></p>
<p>å…·ä½“ç¼–å†™å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">auto</span> handlerThread = jhandler::HandlerThread::<span class="hljs-built_in">create</span>();
handlerThread-&gt;<span class="hljs-built_in">start</span>();

<span class="hljs-keyword">auto</span> looper = handlerThread-&gt;<span class="hljs-built_in">getLooper</span>();
<span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ª Handler</span>
<span class="hljs-keyword">auto</span> handler1 = std::<span class="hljs-built_in">make_shared</span>&lt;FirstCommonUseHandler&gt;(looper);
<span class="hljs-keyword">auto</span> handler2 = std::<span class="hljs-built_in">make_shared</span>&lt;SecondCommonUseHandler&gt;(looper);

<span class="hljs-comment">// å‘ handler1 å‘é€ SAY_HI ç±»å‹çš„ message ï¼Œç”± handler1 è¿›è¡Œå¤„ç† </span>
<span class="hljs-keyword">auto</span> message = jhandler::Message::<span class="hljs-built_in">obtain</span>();
message-&gt;what = SAY_HI;
message-&gt;data = std::<span class="hljs-built_in">make_shared</span>&lt;std::string&gt;(<span class="hljs-string">"æ±Ÿæ¾æ¶Œ"</span>);
message-&gt;arg1 = <span class="hljs-number">1994</span>;
message-&gt;arg2 = <span class="hljs-number">170</span>;
handler1-&gt;<span class="hljs-built_in">sendMessage</span>(std::<span class="hljs-built_in">move</span>(message));

<span class="hljs-comment">// å‘ handler2 å‘é€ SAY_HI ç±»å‹çš„ message ï¼Œç”± handler2 è¿›è¡Œå¤„ç† </span>
message = jhandler::Message::<span class="hljs-built_in">obtain</span>();
message-&gt;what = SAY_HI;
message-&gt;data = std::<span class="hljs-built_in">make_shared</span>&lt;std::string&gt;(<span class="hljs-string">"jiang peng yong"</span>);
message-&gt;arg1 = <span class="hljs-number">2025</span>;
message-&gt;arg2 = <span class="hljs-number">100</span>;
handler2-&gt;<span class="hljs-built_in">sendMessage</span>(std::<span class="hljs-built_in">move</span>(message));

<span class="hljs-comment">// ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè™½ç„¶æ˜¯åŒä¸€ç±»å‹æ¶ˆæ¯ï¼Œä½†ç”±ä¸åŒ Handler è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”çº¿ç¨‹æ˜¯ç›¸åŒçš„ä¸”æŒ‰é¡ºåºæ‰§è¡Œ</span>
<span class="hljs-comment">//ã€FirstCommonUseHandlerã€‘ ã€handleMessageã€‘ä½ å¥½ï¼Œæ±Ÿæ¾æ¶Œ(1994,170) Looper çº¿ç¨‹ id=0x700009ae3000</span>
<span class="hljs-comment">//ã€SecondCommonUseHandlerã€‘ ã€handleMessageã€‘hello, jiang peng yong(2025,100) Looper çº¿ç¨‹ id=0x700009ae3000</span>
</code></pre>
<blockquote>
<p><code>FirstCommonUseHandler</code> å’Œ <code>SecondCommonUseHandler</code> è¯·æŸ¥çœ‹æºç ä¸å†èµ˜è¿°ã€‚</p>
</blockquote>
<h2 data-id="heading-8">ä¸‰ã€è‡ªå®šä¹‰çº¿ç¨‹ä¸­ä½¿ç”¨ JHandler</h2>
<p>æœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨è‡ªå·±çš„çº¿ç¨‹ä¸­ä½¿ç”¨äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œæ‰€ä»¥ JHandler ä¹Ÿæ”¯æŒåœ¨è‡ªå®šä¹‰çº¿ç¨‹ä¸­å¢åŠ äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚</p>
<p>ä¾‹å¦‚åœ¨é¸¿è’™ä¸­ï¼Œéœ€è¦å°è£…ä¸€ä¸ª OpenGL çº¿ç¨‹ç»™åˆ°ç›¸æœºä½¿ç”¨ï¼ŒOpenGL æ˜¯çº¿ç¨‹ç›¸å…³çš„ï¼Œéœ€è¦ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸æ–­çš„å¤„ç†æ¯ä¸€å¸§æ•°æ®ï¼ŒåŒæ—¶å¤„ç†å¥½ Surface ã€æ»¤é•œç­‰æ•°æ®ã€‚ä»¥ä¸‹ä¾¿æ˜¯ä¸€ä¸ª OpenGL çš„æ¨¡æ‹Ÿæ ·ä¾‹ï¼š</p>
<blockquote>
<p>å®Œæ•´ä»£ç å¯ä»¥æŸ¥çœ‹ <code>thread_use.cpp</code></p>
</blockquote>
<p><strong>åœ¨è‡ªå®šä¹‰çº¿ç¨‹ä¸­ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œï¼š</strong></p>
<ol>
<li>å¢åŠ  egl çš„åˆ›å»ºï¼Œé€šè¿‡ <code>jhandler::Looper::create()</code> åˆ›å»º <code>Looper</code> ï¼Œç„¶ååˆ›å»ºå†…éƒ¨çš„ Handler ç”¨äºå¤„ç†åç»­çš„ç›¸æœºå¸§ã€æ»¤é•œç®¡ç†ç­‰ã€‚</li>
<li>è°ƒç”¨ <code>Looper::loop()</code> æ–¹æ³•ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°å¤–éƒ¨è°ƒç”¨ <code>Looper::quit()</code> ç»ˆæ­¢äº‹ä»¶å¾ªç¯ã€‚</li>
<li>é‡Šæ”¾å’Œå›æ”¶ egl ç›¸å…³èµ„æºã€‚</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GLThread::loop</span><span class="hljs-params">(<span class="hljs-type">const</span> std::shared_ptr&lt;GLThread&gt; &amp;glThread)</span> </span>{
    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ è¿›å…¥ GLThread å¯åŠ¨ GL é€»è¾‘ ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ æ¨¡æ‹Ÿåˆ›å»º EGL ç›¸å…³ç¯å¢ƒ ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
    <span class="hljs-comment">// ç¡çœ äº† 500 æ¯«ç§’ï¼Œæ¨¡æ‹Ÿåˆ›å»º EGL</span>
    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">500</span>));

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ è¿›å…¥äº‹ä»¶å¾ªç¯ ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
    glThread-&gt;mLooper-&gt;<span class="hljs-built_in">loop</span>();
    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ é€€å‡ºäº‹ä»¶å¾ªç¯ ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ å¼€å§‹é‡Šæ”¾èµ„æº ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ é‡Šæ”¾ EGL ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ é‡Šæ”¾ Handler ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
    glThread-&gt;mHandler-&gt;<span class="hljs-built_in">removeAllMessages</span>();
    glThread-&gt;mHandler = <span class="hljs-literal">nullptr</span>;

    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"é‡Šæ”¾ Looper"</span>);
    glThread-&gt;mLooper = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-built_in">quitLoop</span>(glThread);
    Log::<span class="hljs-built_in">i</span>(TAG, <span class="hljs-string">"------------------------ é€€å‡º GLThread çº¿ç¨‹ ------------------------ thread id="</span>, std::this_thread::<span class="hljs-built_in">get_id</span>());
}
</code></pre>
<p>åŒæ ·ä¹Ÿæ”¯æŒå¤šä¸ª Handler è§£è€¦é€»è¾‘ï¼Œé€šè¿‡è·å–å†…éƒ¨çš„ <code>Looper</code> åˆ›å»ºå¯¹åº”çš„ <code>Handler</code> å³å¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">threadUse</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> glThread = std::<span class="hljs-built_in">make_shared</span>&lt;GLThread&gt;();
    glThread-&gt;<span class="hljs-built_in">start</span>();

    <span class="hljs-comment">// åˆ›å»ºä¸šåŠ¡éœ€è¦çš„ handler ï¼Œå¯ä»¥ä¸è€¦åˆ gl çš„ç›¸å…³æµç¨‹</span>
    <span class="hljs-keyword">auto</span> businessHandler = std::<span class="hljs-built_in">make_shared</span>&lt;BusinessHandler&gt;(glThread-&gt;<span class="hljs-built_in">getLooper</span>());
    businessHandler-&gt;<span class="hljs-built_in">sayHello</span>();

    <span class="hljs-keyword">auto</span> glHandler = glThread-&gt;<span class="hljs-built_in">getHandler</span>();
    glHandler-&gt;<span class="hljs-built_in">addFilter</span>();
    glHandler-&gt;<span class="hljs-built_in">requestRender</span>();
    glHandler-&gt;<span class="hljs-built_in">removeFilter</span>();

    businessHandler-&gt;<span class="hljs-built_in">sayHello</span>();

    glThread-&gt;<span class="hljs-built_in">quit</span>();

    <span class="hljs-comment">// ä¸ºäº†è®©å†…éƒ¨æ‰§è¡Œå¤–ï¼Œæ‰ç»“æŸæ•´ä¸ªé¡¹ç›®è¿è¡Œã€‚</span>
    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));
    
    <span class="hljs-comment">// è¾“å‡º</span>
    <span class="hljs-comment">// ã€GLHandlerã€‘ æ·»åŠ æ»¤é•œ filterName=0x600002314048 thread id=0x700009ae3000</span>
    <span class="hljs-comment">// ã€GLHandlerã€‘ è¿›è¡Œæ¸²æŸ“ thread id=0x700009ae3000</span>
    <span class="hljs-comment">// ã€GLHandlerã€‘ ç§»é™¤æ»¤é•œ filterName=0x600002314078 thread id=0x700009ae3000</span>
    <span class="hljs-comment">// ã€BusinessHandlerã€‘ ä½ å¥½ thread id=0x700009ae3000</span>
}
</code></pre>
<h2 data-id="heading-9">å››ã€ä½œè€…ç®€ä»‹</h2>
<p>æ˜é‡‘ï¼š<a href="https://juejin.im/user/5c3033ef51882524ec3a88ba/posts" target="_blank" title="https://juejin.im/user/5c3033ef51882524ec3a88ba/posts">juejin.im/user/5c3033â€¦</a></p>
<p>csdnï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_37625173" target="_blank" title="https://blog.csdn.net/weixin_37625173" ref="nofollow noopener noreferrer">blog.csdn.net/weixin_3762â€¦</a></p>
<p>å…¬ä¼—å·ï¼šå¾®ä¿¡æœç´¢ "æ±Ÿæ¾æ¶Œ"</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@Transactionalåšä¸åˆ°çš„5ä»¶äº‹ï¼Œæˆ‘ç”¨è¿™6ç§æ–¹æ³•è§£å†³äº†]]></title>    <link>https://juejin.cn/post/7575104251866398730</link>    <guid>https://juejin.cn/post/7575104251866398730</guid>    <pubDate>2025-11-23T02:52:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251866398730" data-draft-id="7575133880435753011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@Transactionalåšä¸åˆ°çš„5ä»¶äº‹ï¼Œæˆ‘ç”¨è¿™6ç§æ–¹æ³•è§£å†³äº†"/> <meta itemprop="keywords" content="Spring Boot,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-23T02:52:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @Transactionalåšä¸åˆ°çš„5ä»¶äº‹ï¼Œæˆ‘ç”¨è¿™6ç§æ–¹æ³•è§£å†³äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:52:00.000Z" title="Sun Nov 23 2025 02:52:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    37
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">@Transactionalåšä¸åˆ°çš„5ä»¶äº‹ï¼Œæˆ‘ç”¨è¿™6ç§æ–¹æ³•è§£å†³äº†</h2>
<p>çœ‹Mallé¡¹ç›®è®¢å•ä»£ç æ—¶å‘ç°ï¼šä¸€ä¸ªæ–¹æ³•æ“ä½œ6å¼ è¡¨ï¼Œ14æ­¥ä¸šåŠ¡é€»è¾‘ï¼Œå…¨åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œå±…ç„¶æ²¡ç‚¸ã€‚</p>
<p>ç ”ç©¶äº†ä¸¤å¤©ï¼Œå‘ç°äº†6ç§æ¯”<code>@Transactional</code>æ›´çµæ´»çš„ç©æ³•ã€‚å†™äº†ä¸ªdemoé¡¹ç›®éªŒè¯äº†ä¸€éã€‚</p>
<h3 data-id="heading-1">æˆ‘ä»¬è¦è§£å†³çš„ç—›ç‚¹</h3>
<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œ<code>@Transactional</code>è§£å†³ä¸äº†çš„å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>åº“å­˜ä¸è¶³æ—¶</strong>ï¼šæƒ³ä¿ç•™è®¢å•è®°å½•æ ‡è®°"å¾…è¡¥è´§"ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆä¸å›æ»š</li>
<li><strong>å‘MQæ¶ˆæ¯</strong>ï¼šåœ¨äº‹åŠ¡é‡Œå‘äº†æ¶ˆæ¯ï¼Œç»“æœäº‹åŠ¡å›æ»šäº†ï¼Œæ¶ˆæ¯å´å‘å‡ºå»äº†</li>
<li><strong>æ‰¹é‡æ“ä½œ</strong>ï¼š100ä¸ªè®¢å•å‘è´§ï¼Œ1ä¸ªå¤±è´¥å°±å…¨éƒ¨å›æ»šï¼Œä½†å…¶å®æƒ³è®©æˆåŠŸçš„ç»§ç»­</li>
<li><strong>è®°å½•æ—¥å¿—</strong>ï¼šä¸šåŠ¡å¤±è´¥äº†ä¹Ÿæƒ³è®°å½•æ—¥å¿—ï¼Œä½†äº‹åŠ¡å›æ»šäº†æ—¥å¿—ä¹Ÿæ²¡äº†</li>
<li><strong>éš”ç¦»çº§åˆ«/è¶…æ—¶</strong>ï¼šä¸çŸ¥é“<code>@Transactional</code>é‚£äº›å‚æ•°æ€ä¹ˆç”¨</li>
</ol>
<p>è¿™ç¯‡æ–‡ç« ä¼šç”¨å®é™…ä»£ç æ¼”ç¤º6ç§è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">ç›®å½•</h3>
<ul>
<li><a href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8C%BA%E5%88%86%E4%B8%9A%E5%8A%A1%E5%A4%B1%E8%B4%A5%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8" title="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%8C%BA%E5%88%86%E4%B8%9A%E5%8A%A1%E5%A4%B1%E8%B4%A5%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8">ç¼–ç¨‹å¼äº‹åŠ¡ï¼šåŒºåˆ†ä¸šåŠ¡å¤±è´¥å’Œç³»ç»Ÿå¼‚å¸¸</a></li>
<li><a href="#transactional%E7%9A%84%E5%8F%82%E6%95%B0%E6%88%91%E8%A2%AB%E5%9D%91%E8%BF%87" title="#transactional%E7%9A%84%E5%8F%82%E6%95%B0%E6%88%91%E8%A2%AB%E5%9D%91%E8%BF%87">@Transactionalå‚æ•°ï¼šéš”ç¦»çº§åˆ«å’Œè¶…æ—¶</a></li>
<li><a href="#%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E5%90%8E%E5%8F%91mq%E6%88%91%E4%B9%8B%E5%89%8D%E9%83%BD%E5%81%9A%E9%94%99%E4%BA%86" title="#%E4%BA%8B%E5%8A%A1%E6%8F%90%E4%BA%A4%E5%90%8E%E5%8F%91mq%E6%88%91%E4%B9%8B%E5%89%8D%E9%83%BD%E5%81%9A%E9%94%99%E4%BA%86">äº‹åŠ¡åŒæ­¥å™¨ï¼šæäº¤åå‘MQ</a></li>
<li><a href="#%E4%BA%8B%E5%8A%A1%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E8%A7%A3%E8%80%A6%E5%89%AF%E4%BD%9C%E7%94%A8%E6%93%8D%E4%BD%9C" title="#%E4%BA%8B%E5%8A%A1%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E8%A7%A3%E8%80%A6%E5%89%AF%E4%BD%9C%E7%94%A8%E6%93%8D%E4%BD%9C">äº‹åŠ¡äº‹ä»¶ç›‘å¬ï¼šè§£è€¦å‰¯ä½œç”¨æ“ä½œ</a></li>
<li><a href="#%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E5%BF%85%E9%A1%BB%E7%94%A8%E6%89%8B%E5%8A%A8%E4%BA%8B%E5%8A%A1" title="#%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E5%BF%85%E9%A1%BB%E7%94%A8%E6%89%8B%E5%8A%A8%E4%BA%8B%E5%8A%A1">æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡ï¼šæ‰¹é‡æ“ä½œ</a></li>
<li><a href="#%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B63%E7%A7%8D%E5%B8%B8%E7%94%A8%E5%9C%BA%E6%99%AF" title="#%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B63%E7%A7%8D%E5%B8%B8%E7%94%A8%E5%9C%BA%E6%99%AF">äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼š3ç§å¸¸ç”¨åœºæ™¯</a></li>
</ul>
<h3 data-id="heading-3">å…³äºdemoé¡¹ç›®</h3>
<p>æœ¬æ–‡ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsh_wangwanbao%2Fsimple-transactional" target="_blank" title="https://gitee.com/sh_wangwanbao/simple-transactional" ref="nofollow noopener noreferrer">gitee.com/sh_wangwanbâ€¦</a></p>
<p><strong>ç‰¹ç‚¹</strong>ï¼šé›†æˆæµ‹è¯•æ¡†æ¶ï¼Œé€šè¿‡åå°„è‡ªåŠ¨æ„å»ºå‚æ•°ï¼Œå¯åŠ¨å³æµ‹è¯•ï¼Œè‡ªåŠ¨ç”ŸæˆmarkdownæŠ¥å‘Šã€‚ä¸ç”¨æ‰‹åŠ¨å‡†å¤‡æ•°æ®ï¼Œä¸ç”¨ä¸€ä¸ªä¸ªè·‘æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>å¯¼å…¥æ•°æ®åº“è„šæœ¬ï¼ˆdoc/simple-transactional-init.sqlï¼‰ï¼Œæ”¹ä¸‹é…ç½®ï¼Œå¯åŠ¨é¡¹ç›®å°±èƒ½çœ‹åˆ°å®Œæ•´æµ‹è¯•ç»“æœã€‚</p>
<hr/>
<h3 data-id="heading-4">ç¼–ç¨‹å¼äº‹åŠ¡ï¼šåŒºåˆ†ä¸šåŠ¡å¤±è´¥å’Œç³»ç»Ÿå¼‚å¸¸</h3>
<p>è¿™æ˜¯æˆ‘åœ¨Mallé‡Œå‘ç°çš„ä¸€ä¸ªåœºæ™¯ï¼šè®¢å•åˆ›å»ºåè¦è°ƒç”¨é£æ§æœåŠ¡æ£€æŸ¥ã€‚</p>
<ul>
<li><strong>é£æ§ä¸é€šè¿‡</strong>ï¼ˆä¸šåŠ¡è§„åˆ™ï¼‰ï¼šè®¢å•è¦ä¿ç•™ï¼Œæ ‡è®°"å¾…å®¡æ ¸"ï¼Œäººå·¥å¤æ ¸</li>
<li><strong>é£æ§æœåŠ¡æŒ‚äº†</strong>ï¼ˆç³»ç»Ÿæ•…éšœï¼‰ï¼šè®¢å•è¦å›æ»šï¼Œä¸èƒ½ç•™è„æ•°æ®</li>
</ul>
<p><strong>ç”¨<code>@Transactional</code>åšä¸åˆ°</strong>ã€‚å› ä¸ºå®ƒåªèƒ½é æŠ›å¼‚å¸¸è§¦å‘å›æ»šï¼Œæ— æ³•åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µã€‚</p>
<h4 data-id="heading-5">TransactionTemplateå¯ä»¥åŠ¨æ€æ§åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> OrderResult <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderParam param)</span> {
    
    <span class="hljs-keyword">return</span> transactionTemplate.execute(status -&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> buildOrder(param);
            orderMapper.insert(order);
            
            <span class="hljs-comment">// 2. åˆ›å»ºè®¢å•å•†å“</span>
            List&lt;OrderItem&gt; items = buildOrderItems(order);
            orderItemMapper.batchInsert(items);
            
            <span class="hljs-comment">// 3. é”å®šåº“å­˜</span>
            lockStock(param.getItems());
            
            <span class="hljs-comment">// 4. è°ƒç”¨é£æ§æœåŠ¡æ£€æŸ¥</span>
            <span class="hljs-type">RiskCheckResult</span> <span class="hljs-variable">riskResult</span> <span class="hljs-operator">=</span> riskService.check(order);
            
            <span class="hljs-keyword">if</span> (!riskResult.isPass()) {
                <span class="hljs-comment">// é£æ§ä¸é€šè¿‡ - ä¸šåŠ¡å¤±è´¥ï¼Œä½†ä¸å›æ»š</span>
                order.setStatus(OrderStatus.WAIT_AUDIT);  <span class="hljs-comment">// å¾…å®¡æ ¸</span>
                order.setNote(<span class="hljs-string">"é£æ§æ£€æŸ¥æœªé€šè¿‡ï¼š"</span> + riskResult.getReason());
                orderMapper.updateById(order);
                
                <span class="hljs-comment">// å…³é”®ï¼šä¸è°ƒç”¨ status.setRollbackOnly()</span>
                <span class="hljs-comment">// è®¢å•å’Œå•†å“æ˜ç»†éƒ½ä¼šä¿ç•™</span>
                <span class="hljs-keyword">return</span> OrderResult.fail(<span class="hljs-string">"è®¢å•éœ€äººå·¥å®¡æ ¸"</span>);
            }
            
            <span class="hljs-comment">// é£æ§é€šè¿‡ï¼Œè®¢å•æ­£å¸¸</span>
            <span class="hljs-keyword">return</span> OrderResult.success(order.getId());
            
        } <span class="hljs-keyword">catch</span> (RiskServiceException e) {
            <span class="hljs-comment">// é£æ§æœåŠ¡å¼‚å¸¸ - ç³»ç»Ÿæ•…éšœï¼Œå¿…é¡»å›æ»š</span>
            log.error(<span class="hljs-string">"é£æ§æœåŠ¡å¼‚å¸¸"</span>, e);
            status.setRollbackOnly();
            <span class="hljs-keyword">return</span> OrderResult.error(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å…¶ä»–å¼‚å¸¸ä¹Ÿå›æ»š</span>
            status.setRollbackOnly();
            <span class="hljs-keyword">return</span> OrderResult.error(e.getMessage());
        }
    });
}
</code></pre>
<h4 data-id="heading-6">ç”»ä¸ªå›¾å°±æ˜ç™½äº†</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹äº‹åŠ¡] --&gt; B[åˆ›å»ºè®¢å•]
    B --&gt; C[åˆ›å»ºè®¢å•å•†å“]
    C --&gt; D[é”å®šåº“å­˜]
    D --&gt; E[è°ƒç”¨é£æ§æœåŠ¡]
    
    E --&gt; F{é£æ§ç»“æœ?}
    
    F --&gt;|ä¸é€šè¿‡-ä¸šåŠ¡å¤±è´¥| G[æ›´æ–°è®¢å•çŠ¶æ€=å¾…å®¡æ ¸]
    G --&gt; H[æäº¤äº‹åŠ¡]
    H --&gt; I[è®¢å•ä¿ç•™,çŠ¶æ€=å¾…å®¡æ ¸]
    
    F --&gt;|é€šè¿‡| J[æäº¤äº‹åŠ¡]
    J --&gt; K[è®¢å•æ­£å¸¸åˆ›å»º]
    
    F --&gt;|æœåŠ¡å¼‚å¸¸-ç³»ç»Ÿæ•…éšœ| L[setRollbackOnly]
    L --&gt; M[å›æ»šäº‹åŠ¡]
    M --&gt; N[è®¢å•è¢«åˆ é™¤]
</code></pre>
<h4 data-id="heading-7">è¿™æ‰æ˜¯ç¼–ç¨‹å¼äº‹åŠ¡çš„ä»·å€¼</h4>

























<table><thead><tr><th>åœºæ™¯</th><th>@Transactional</th><th>TransactionTemplate</th></tr></thead><tbody><tr><td>é£æ§ä¸é€šè¿‡</td><td>æŠ›å¼‚å¸¸â†’å…¨å›æ»š</td><td>ä¸å›æ»šï¼Œä¿ç•™è®¢å•</td></tr><tr><td>é£æ§æœåŠ¡æŒ‚äº†</td><td>æŠ›å¼‚å¸¸â†’å…¨å›æ»š</td><td>å›æ»šï¼Œä¸ç•™è„æ•°æ®</td></tr><tr><td>åº“å­˜ä¸è¶³</td><td>æŠ›å¼‚å¸¸â†’å…¨å›æ»š</td><td>ä¿ç•™è®¢å•ï¼Œæ ‡è®°"å¾…è¡¥è´§"</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼šèƒ½åŒºåˆ†"ä¸šåŠ¡å¤±è´¥"å’Œ"ç³»ç»Ÿå¼‚å¸¸"ï¼ŒåŠ¨æ€å†³å®šè¦ä¸è¦å›æ»šã€‚</p>
<p>æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•é£æ§ä¸é€šè¿‡ï¼ˆé«˜é‡‘é¢è®¢å•ï¼‰</span>
POST /programmatic/risk-check

<span class="hljs-comment"># ç»“æœ</span>
è®¢å•IDï¼š8
è®¢å•çŠ¶æ€ï¼šå¾…å®¡æ ¸
è®¢å•å¤‡æ³¨ï¼šé£æ§æ£€æŸ¥æœªé€šè¿‡ï¼šé‡‘é¢è¿‡é«˜
æ•°æ®åº“ï¼šè®¢å•å’Œå•†å“æ˜ç»†éƒ½ä¿ç•™äº†
</code></pre>
<p>è¿™ç©æ„å„¿æˆ‘ä¹‹å‰çœŸä¸çŸ¥é“èƒ½è¿™ä¹ˆç”¨ã€‚</p>
<h3 data-id="heading-8">@Transactionalçš„å‚æ•°ï¼Œæˆ‘è¢«å‘è¿‡</h3>
<p>Mallçš„å•†å“åˆ›å»ºæ–¹æ³•æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(
    isolation = Isolation.REPEATABLE_READ,    
    propagation = Propagation.REQUIRED,      
    timeout = 30,                            
    rollbackFor = Exception.class            
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">createProduct</span><span class="hljs-params">(ProductParam param)</span> {
    <span class="hljs-comment">// æ’å…¥8å¼ è¡¨...</span>
}
</code></pre>
<p>æˆ‘ä¹‹å‰éƒ½æ˜¯ç›´æ¥<code>@Transactional</code>ï¼Œä»æ¥ä¸åŠ å‚æ•°ã€‚åæ¥è¸©äº†å‡ æ¬¡å‘æ‰çŸ¥é“è¿™äº›å‚æ•°çš„ç”¨å¤„ã€‚</p>
<h4 data-id="heading-9">isolationè¿™ä¸ªå‚æ•°è¦æ³¨æ„</h4>
<p>æœ‰æ¬¡æ•°æ®åº“ä»MySQLæ¢æˆPostgreSQLï¼Œçªç„¶å‡ºç°äº†å¹»è¯»é—®é¢˜ã€‚</p>
<p>åŸå› æ˜¯ï¼š</p>
<ul>
<li>MySQLé»˜è®¤ <code>REPEATABLE_READ</code>ï¼ˆå¯é‡å¤è¯»ï¼‰</li>
<li>PostgreSQLé»˜è®¤ <code>READ_COMMITTED</code>ï¼ˆè¯»å·²æäº¤ï¼‰</li>
</ul>
<p><strong>å¦‚æœä»£ç é‡Œæ²¡æ˜¾å¼æŒ‡å®šéš”ç¦»çº§åˆ«ï¼Œæ¢æ•°æ®åº“å°±å¯èƒ½å‡ºé—®é¢˜ã€‚</strong></p>
<p>æ‰€ä»¥å»ºè®®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ˜ç¡®æŒ‡å®šéš”ç¦»çº§åˆ«ï¼Œä¸ä¾èµ–æ•°æ®åº“é»˜è®¤å€¼</span>
<span class="hljs-meta">@Transactional(isolation = Isolation.REPEATABLE_READ)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">someMethod</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é¿å…ç¯å¢ƒåˆ‡æ¢å¯¼è‡´è¡Œä¸ºå˜åŒ–</span>
}
</code></pre>
<h4 data-id="heading-10">timeoutå’ŒrollbackForç®€å•è¯´ä¸¤å¥</h4>
<p><strong>timeout</strong>ï¼šé˜²æ­¢é•¿äº‹åŠ¡é”è¡¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(timeout = 30)</span>  <span class="hljs-comment">// 30ç§’è¶…æ—¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">complexTask</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>rollbackFor</strong>ï¼šSpringé»˜è®¤åªæœ‰RuntimeExceptionæ‰å›æ»šï¼ŒChecked Exceptionä¸å›æ»š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>  <span class="hljs-comment">// æ˜ç¡®æŒ‡å®š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>è¿™ä¸¤ä¸ªå‚æ•°è®°å¾—åŠ ä¸Šï¼Œèƒ½é¿å…å¾ˆå¤šå‘ã€‚</p>
<h3 data-id="heading-11">äº‹åŠ¡æäº¤åå‘MQï¼Œæˆ‘ä¹‹å‰éƒ½åšé”™äº†</h3>
<p>è®¢å•åˆ›å»ºæˆåŠŸåï¼Œè¦å‘ä¸ªMQæ¶ˆæ¯ï¼ˆ30åˆ†é’Ÿåè‡ªåŠ¨å–æ¶ˆæœªæ”¯ä»˜è®¢å•ï¼‰ã€‚</p>
<p>æˆ‘ä¹‹å‰æ˜¯è¿™ä¹ˆå†™çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    <span class="hljs-comment">// ç›´æ¥å‘MQ</span>
    mqSender.send(<span class="hljs-string">"order.cancel.delay"</span>, order.getId());
}
</code></pre>
<p>çœ‹èµ·æ¥æ²¡é—®é¢˜å§ï¼Ÿå®é™…ä¸Šæœ‰ä¸ªè‡´å‘½é—®é¢˜ã€‚</p>
<h4 data-id="heading-12">é—®é¢˜å‡ºåœ¨æ—¶æœºä¸Š</h4>
<p>ç”»ä¸ªå›¾å°±æ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as Service
    participant DB as Database
    participant MQ as RabbitMQ
    
    rect rgb(255, 240, 240)
    Note over S,MQ: é”™è¯¯çš„åšæ³•
    S-&gt;&gt;DB: 1. INSERTè®¢å•
    Note over DB: æ•°æ®åœ¨äº‹åŠ¡å†…&lt;br/&gt;è¿˜æ²¡æäº¤
    
    S-&gt;&gt;MQ: 2. å‘é€MQæ¶ˆæ¯
    Note over MQ: æ¶ˆæ¯å·²å‘å‡º
    
    S-&gt;&gt;DB: 3. åé¢æŸæ­¥å¤±è´¥
    DB--&gt;&gt;S: 4. äº‹åŠ¡å›æ»š
    Note over DB: è®¢å•è¢«åˆ é™¤
    
    Note over MQ,DB: é—®é¢˜ï¼šæ¶ˆæ¯å‘äº†&lt;br/&gt;ä½†æ•°æ®æ²¡äº†
    end
</code></pre>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šMQæ¶ˆæ¯å‘å‡ºå»äº†ï¼Œä½†äº‹åŠ¡å›æ»šäº†ï¼Œè®¢å•æ ¹æœ¬ä¸å­˜åœ¨ã€‚30åˆ†é’Ÿåæ¶ˆè´¹è€…å»å–æ¶ˆè®¢å•ï¼Œå‘ç°è®¢å•ä¸å­˜åœ¨ã€‚</p>
<p>è¿™å°±æ˜¯<strong>å‰¯ä½œç”¨çš„æ—¶æœºä¸äº‹åŠ¡ä¸€è‡´æ€§</strong>é—®é¢˜ï¼š</p>
<ul>
<li>è®¢å•æ’å…¥ã€åº“å­˜æ‰£å‡ â†’ åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»š</li>
<li>MQæ¶ˆæ¯ â†’ ä¸åœ¨è¿™ä¸ªäº‹åŠ¡é‡Œï¼Œå‘å‡ºå»å°±æ”¶ä¸å›æ¥äº†</li>
</ul>
<h4 data-id="heading-13">äº‹åŠ¡åŒæ­¥å™¨è§£å†³è¿™ä¸ªé—®é¢˜</h4>
<p>Springæä¾›äº†äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸçš„é’©å­ï¼Œè®©ä½ åœ¨ç‰¹å®šé˜¶æ®µæ‰§è¡Œå›è°ƒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    <span class="hljs-comment">// æ³¨å†Œäº‹åŠ¡åŒæ­¥å™¨</span>
    TransactionSynchronizationManager.registerSynchronization(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronization</span>() {
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// åªæœ‰äº‹åŠ¡æäº¤æˆåŠŸï¼Œè¿™é‡Œæ‰ä¼šæ‰§è¡Œ</span>
                mqSender.send(<span class="hljs-string">"order.cancel.delay"</span>, order.getId());
                log.info(<span class="hljs-string">"MQæ¶ˆæ¯å·²å‘é€"</span>);
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span> {
                <span class="hljs-keyword">if</span> (status == STATUS_ROLLED_BACK) {
                    log.info(<span class="hljs-string">"äº‹åŠ¡å›æ»šï¼ŒMQæ¶ˆæ¯ä¸ä¼šå‘é€"</span>);
                }
            }
        }
    );
}
</code></pre>
<p>ç°åœ¨çš„æ—¶åºæ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as Service
    participant DB as Database
    participant MQ as RabbitMQ
    
    rect rgb(240, 255, 240)
    Note over S,MQ: æ­£ç¡®çš„åšæ³•
    S-&gt;&gt;DB: 1. INSERTè®¢å•
    S-&gt;&gt;S: 2. æ³¨å†ŒafterCommitå›è°ƒ
    
    alt äº‹åŠ¡æˆåŠŸ
        S-&gt;&gt;DB: 3. COMMIT
        Note over DB: æ•°æ®å·²æŒä¹…åŒ–
        S-&gt;&gt;MQ: 4. è§¦å‘afterCommit&lt;br/&gt;å‘é€MQæ¶ˆæ¯
        Note over MQ: æ•°æ®å’Œæ¶ˆæ¯ä¸€è‡´
    else äº‹åŠ¡å¤±è´¥
        S-&gt;&gt;DB: 3. ROLLBACK
        Note over DB: æ•°æ®è¢«åˆ é™¤
        Note over S: afterCommitä¸æ‰§è¡Œ
        Note over MQ: æ¶ˆæ¯ä¸ä¼šå‘é€
    end
    end
</code></pre>
<p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼šåªæœ‰è®¢å•çœŸæ­£æäº¤åˆ°æ•°æ®åº“åï¼Œæ‰å‘MQæ¶ˆæ¯ã€‚äº‹åŠ¡å›æ»šäº†ï¼Œæ¶ˆæ¯å°±ä¸å‘ã€‚</p>
<h4 data-id="heading-14">4ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­</h4>
<p>äº‹åŠ¡åŒæ­¥å™¨æä¾›äº†4ä¸ªå›è°ƒç‚¹ï¼š</p>
<pre><code class="hljs language-java" lang="java">TransactionSynchronizationManager.registerSynchronization(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronization</span>() {
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeCommit</span><span class="hljs-params">(<span class="hljs-type">boolean</span> readOnly)</span> {
            log.info(<span class="hljs-string">"ã€é˜¶æ®µ1-beforeCommitã€‘äº‹åŠ¡å³å°†æäº¤"</span>);
            <span class="hljs-comment">// æœ€åçš„æ•°æ®æ ¡éªŒ</span>
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeCompletion</span><span class="hljs-params">()</span> {
            log.info(<span class="hljs-string">"ã€é˜¶æ®µ2-beforeCompletionã€‘äº‹åŠ¡å³å°†å®Œæˆ"</span>);
            <span class="hljs-comment">// æ¸…ç†ä¸´æ—¶èµ„æº</span>
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
            log.info(<span class="hljs-string">"ã€é˜¶æ®µ3-afterCommitã€‘äº‹åŠ¡å·²æäº¤"</span>);
            <span class="hljs-comment">// å‘MQã€æ¸…ç¼“å­˜ï¼ˆæ•°æ®å·²æŒä¹…åŒ–ï¼‰</span>
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">statusStr</span> <span class="hljs-operator">=</span> (status == STATUS_COMMITTED) ? <span class="hljs-string">"æäº¤"</span> : <span class="hljs-string">"å›æ»š"</span>;
            log.info(<span class="hljs-string">"ã€é˜¶æ®µ4-afterCompletionã€‘äº‹åŠ¡å·²å®Œæˆï¼ŒçŠ¶æ€ï¼š{}"</span>, statusStr);
        }
    }
);
</code></pre>
<p>æ‰§è¡Œé¡ºåºæ˜¯å›ºå®šçš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹äº‹åŠ¡] --&gt; B[ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ]
    B --&gt; C{è¦æäº¤?}
    
    C --&gt;|æ˜¯| D[beforeCommit]
    D --&gt; E[beforeCompletion]
    E --&gt; F[COMMIT]
    F --&gt; G[afterCommit]
    G --&gt; H[afterCompletionçŠ¶æ€COMMITTED]
    
    C --&gt;|å¦| I[beforeCompletion]
    I --&gt; J[ROLLBACK]
    J --&gt; K[afterCompletionçŠ¶æ€ROLLED_BACK]
</code></pre>
<h4 data-id="heading-15">å“ªäº›åœºæ™¯å¿…é¡»ç”¨afterCommit</h4>
<p>æ‰€æœ‰"å¯¹å¤–çš„å‰¯ä½œç”¨"éƒ½åº”è¯¥æ”¾åœ¨afterCommité‡Œï¼š</p>
<p><strong>åœºæ™¯1ï¼šå‘MQæ¶ˆæ¯</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å»¶è¿Ÿå–æ¶ˆè®¢å•</span>
    mqSender.send(<span class="hljs-string">"order.cancel.delay"</span>, orderId);
}
</code></pre>
<p><strong>åœºæ™¯2ï¼šæ¸…ç†ç¼“å­˜</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æ¸…ç†å•†å“ç¼“å­˜</span>
    redisTemplate.delete(<span class="hljs-string">"product:"</span> + productId);
}
</code></pre>
<p><strong>åœºæ™¯3ï¼šè®°å½•æ—¥å¿—åˆ°å¦ä¸€ä¸ªåº“</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å†™åˆ°æ—¥å¿—åº“ï¼ˆä¸åœ¨å½“å‰äº‹åŠ¡ï¼‰</span>
    logMapper.insert(businessLog);
}
</code></pre>
<p><strong>åœºæ™¯4ï¼šè°ƒç”¨å¤–éƒ¨æœåŠ¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é€šçŸ¥ç¬¬ä¸‰æ–¹</span>
    thirdPartyService.notify(order);
}
</code></pre>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šåªæœ‰è®¢å•æ•°æ®çœŸæ­£æŒä¹…åŒ–äº†ï¼Œå¤–éƒ¨ä¸–ç•Œæ‰èƒ½çŸ¥é“ã€‚</p>
<h4 data-id="heading-16">åŒåº“çš„æ—¥å¿—ä¹Ÿè¦ç”¨afterCommitå—ï¼Ÿ</h4>
<p>ç†è®ºä¸Šï¼Œå¦‚æœæ—¥å¿—è¡¨å’Œè®¢å•è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ã€åŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œå†™æ—©äº†ä¼šä¸€èµ·å›æ»šï¼Œä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½†å®é™…ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ï¼š</p>
<ol>
<li><strong>è§£è€¦</strong>ï¼šè®¢å•ä¸šåŠ¡å’Œæ—¥å¿—è®°å½•åˆ†ç¦»</li>
<li><strong>æ€§èƒ½</strong>ï¼šæ—¥å¿—æ“ä½œä¸å½±å“ä¸»äº‹åŠ¡è€—æ—¶</li>
<li><strong>é‡è¯•</strong>ï¼šæ—¥å¿—å¤±è´¥å¯ä»¥ç‹¬ç«‹é‡è¯•ï¼Œä¸å½±å“è®¢å•</li>
</ol>
<p>æ‰€ä»¥å»ºè®®è¿˜æ˜¯æ”¾åœ¨afterCommité‡Œã€‚</p>
<h4 data-id="heading-17">æˆ‘æµ‹è¯•äº†ä¸€ä¸‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
POST /synchronization/phases

<span class="hljs-comment"># æ§åˆ¶å°è¾“å‡º</span>
ã€é˜¶æ®µ1-beforeCommitã€‘äº‹åŠ¡å³å°†æäº¤
ã€é˜¶æ®µ2-beforeCompletionã€‘äº‹åŠ¡å³å°†å®Œæˆ
ã€é˜¶æ®µ3-afterCommitã€‘äº‹åŠ¡å·²æäº¤
ã€é˜¶æ®µ4-afterCompletionã€‘äº‹åŠ¡å·²å®Œæˆï¼ŒçŠ¶æ€ï¼šæäº¤
MQæ¶ˆæ¯å·²å‘é€
</code></pre>
<p>é¡ºåºæ˜¯å›ºå®šçš„ï¼Œéå¸¸å¯é ã€‚</p>
<h3 data-id="heading-18">äº‹åŠ¡äº‹ä»¶ç›‘å¬ï¼šè§£è€¦å‰¯ä½œç”¨æ“ä½œ</h3>
<p>è®¢å•åˆ›å»ºæˆåŠŸåï¼Œè¦åš3ä»¶äº‹ï¼šå‘MQã€è®°å½•æ—¥å¿—ã€å‘é€šçŸ¥ã€‚</p>
<p>å¦‚æœéƒ½å†™åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œï¼Œä»£ç ä¼šå¾ˆè‡ƒè‚¿ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤š</span>
    mqSender.send(...);
    logService.save(...);
    notifyService.send(...);
}
</code></pre>
<p>è€Œä¸”äº‹åŠ¡èŒƒå›´å¤ªå¤§äº†ï¼Œå‘çŸ­ä¿¡ä¹Ÿåœ¨äº‹åŠ¡é‡Œï¼Ÿ</p>
<h4 data-id="heading-19">äº‹åŠ¡äº‹ä»¶ç›‘å¬å¯ä»¥è§£è€¦</h4>
<p><strong>ç¬¬1æ­¥ï¼šå®šä¹‰äº‹ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> {
    <span class="hljs-keyword">private</span> String orderSn;
    <span class="hljs-keyword">private</span> Long memberId;
    <span class="hljs-keyword">private</span> BigDecimal amount;
}
</code></pre>
<p><strong>ç¬¬2æ­¥ï¼šå‘å¸ƒäº‹ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ApplicationEventPublisher eventPublisher;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderParam param)</span> {
        <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
        orderMapper.insert(order);
        
        <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ï¼ˆç«‹å³å‘å¸ƒï¼Œä½†ç›‘å¬å™¨ä½•æ—¶å¤„ç†å–å†³äºç›‘å¬æ–¹å¼ï¼‰</span>
        <span class="hljs-type">OrderCreatedEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(
            order.getOrderSn(),
            order.getMemberId(),
            order.getTotalAmount()
        );
        eventPublisher.publishEvent(event);
        
        log.info(<span class="hljs-string">"äº‹ä»¶å·²å‘å¸ƒ"</span>);
    }
}
</code></pre>
<p><strong>ç¬¬3æ­¥ï¼šç›‘å¬äº‹ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {
    
    <span class="hljs-comment">// å…³é”®ï¼š@TransactionalEventListener + AFTER_COMMIT</span>
    <span class="hljs-comment">// äº‹ä»¶ä¼šè¢«"æŒ‚èµ·"ï¼Œç­‰äº‹åŠ¡æäº¤æˆåŠŸåæ‰å¤„ç†</span>
    <span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        log.info(<span class="hljs-string">"ç›‘å¬åˆ°è®¢å•åˆ›å»ºï¼š{}"</span>, event.getOrderSn());
        
        <span class="hljs-comment">// è¿™äº›æ“ä½œåœ¨äº‹åŠ¡æäº¤åæ‰æ‰§è¡Œ</span>
        mqSender.send(<span class="hljs-string">"order.cancel"</span>, event.getOrderSn());
        logMapper.insert(log);
        notifyService.send(event.getMemberId());
    }
    
    <span class="hljs-comment">// äº‹åŠ¡å›æ»šåæ‰§è¡Œ</span>
    <span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_ROLLBACK)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderFailed</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        log.info(<span class="hljs-string">"è®¢å•åˆ›å»ºå¤±è´¥ï¼š{}"</span>, event.getOrderSn());
    }
}
</code></pre>
<h4 data-id="heading-20">äº‹ä»¶å‘å¸ƒä¸äº‹åŠ¡çš„å…³ç³»</h4>
<p>è¿™é‡Œå®¹æ˜“æ··æ·†çš„ç‚¹ï¼š<strong><code>publishEvent</code>æœ¬èº«ä¸äº‹åŠ¡æ— å…³ï¼Œä½†ç›‘å¬å™¨çš„æ‰§è¡Œæ—¶æœºå–å†³äºç›‘å¬æ–¹å¼ã€‚</strong></p>
<p>ç”»ä¸ªå›¾è¯´æ˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as OrderService
    participant E as EventPublisher
    participant L1 as @EventListener&lt;br/&gt;æ™®é€šç›‘å¬å™¨
    participant L2 as @TransactionalEventListener&lt;br/&gt;AFTER_COMMIT
    participant DB as Database
    
    rect rgb(255, 245, 240)
    Note over S,DB: æ–¹æ³•æœ‰ @Transactional
    S-&gt;&gt;DB: 1. INSERTè®¢å•
    S-&gt;&gt;E: 2. publishEvent(event)
    
    E-&gt;&gt;L1: 3. ç«‹å³åŒæ­¥è°ƒç”¨
    Note over L1: æ™®é€šç›‘å¬å™¨ç«‹å³æ‰§è¡Œ&lt;br/&gt;æ­¤æ—¶äº‹åŠ¡è¿˜æ²¡æäº¤
    
    E-&gt;&gt;L2: 4. äº‹ä»¶æŒ‚èµ·
    Note over L2: AFTER_COMMITç›‘å¬å™¨ä¸æ‰§è¡Œ&lt;br/&gt;ç­‰å¾…äº‹åŠ¡æäº¤
    
    alt äº‹åŠ¡æäº¤æˆåŠŸ
        S-&gt;&gt;DB: 5. COMMIT
        DB-&gt;&gt;L2: 6. è§¦å‘AFTER_COMMIT
        Note over L2: ç›‘å¬å™¨æ‰§è¡Œ&lt;br/&gt;æ•°æ®å·²æŒä¹…åŒ–
    else äº‹åŠ¡å›æ»š
        S-&gt;&gt;DB: 5. ROLLBACK
        Note over L2: AFTER_COMMITä¸æ‰§è¡Œ
    end
    end
</code></pre>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>

























<table><thead><tr><th>ç›‘å¬æ–¹å¼</th><th>æ‰§è¡Œæ—¶æœº</th><th>äº‹åŠ¡å›æ»šå½±å“</th></tr></thead><tbody><tr><td>@EventListener</td><td>ç«‹å³æ‰§è¡Œ</td><td>å·²æ‰§è¡Œçš„å‰¯ä½œç”¨æ— æ³•æ’¤é”€</td></tr><tr><td>@TransactionalEventListener(AFTER_COMMIT)</td><td>äº‹åŠ¡æäº¤å</td><td>äº‹åŠ¡å›æ»šåˆ™ä¸æ‰§è¡Œ</td></tr><tr><td>@TransactionalEventListener(AFTER_ROLLBACK)</td><td>äº‹åŠ¡å›æ»šå</td><td>åªæœ‰å›æ»šæ‰æ‰§è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-21">4ä¸ªäº‹åŠ¡é˜¶æ®µ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æäº¤å‰ï¼ˆåšæœ€åæ ¡éªŒï¼‰</span>
<span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.BEFORE_COMMIT)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeCommit</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
    <span class="hljs-comment">// äº‹åŠ¡å³å°†æäº¤ï¼Œå¯ä»¥åšæœ€åæ ¡éªŒ</span>
}

<span class="hljs-comment">// æäº¤åï¼ˆå‘å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCommit</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
    <span class="hljs-comment">// æ•°æ®å·²æŒä¹…åŒ–ï¼Œå¯ä»¥å®‰å…¨åœ°å‘MQã€æ¸…ç¼“å­˜</span>
}

<span class="hljs-comment">// å›æ»šåï¼ˆè®°å½•å¤±è´¥ï¼‰</span>
<span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_ROLLBACK)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterRollback</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
    <span class="hljs-comment">// äº‹åŠ¡å¤±è´¥äº†ï¼Œè®°å½•å¤±è´¥æ—¥å¿—</span>
}

<span class="hljs-comment">// å®Œæˆåï¼ˆæ¸…ç†èµ„æºï¼‰</span>
<span class="hljs-meta">@TransactionalEventListener(phase = TransactionPhase.AFTER_COMPLETION)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
    <span class="hljs-comment">// æ— è®ºæˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œ</span>
}
</code></pre>
<h4 data-id="heading-22">å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹</h4>
<p><strong>1. å¿…é¡»åœ¨äº‹åŠ¡æ–¹æ³•é‡Œå‘å¸ƒ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šæ–¹æ³•æ²¡æœ‰ @Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    eventPublisher.publishEvent(event);  <span class="hljs-comment">// AFTER_COMMITç›‘å¬å™¨ä¸ä¼šè§¦å‘ï¼</span>
}

<span class="hljs-comment">// æ­£ç¡®ï¼šæ–¹æ³•æœ‰ @Transactional</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    eventPublisher.publishEvent(event);  <span class="hljs-comment">// ç›‘å¬å™¨ä¼šåœ¨æäº¤åè§¦å‘</span>
}
</code></pre>
<p><strong>2. å­äº‹åŠ¡çš„äº‹ä»¶è·Ÿéšå­äº‹åŠ¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parentMethod</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// çˆ¶äº‹åŠ¡</span>
    
    childMethod();  <span class="hljs-comment">// å­äº‹åŠ¡ï¼ˆREQUIRES_NEWï¼‰</span>
}

<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">childMethod</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    eventPublisher.publishEvent(event);  <span class="hljs-comment">// ç›‘å¬å™¨è·Ÿéšå­äº‹åŠ¡çš„æäº¤</span>
}
</code></pre>
<p><strong>3. å¦‚æœæ²¡æœ‰äº‹åŠ¡æ€ä¹ˆåŠ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç›‘å¬å™¨é»˜è®¤ä¸æ‰§è¡Œï¼Œé™¤éåŠ  fallbackExecution=true</span>
<span class="hljs-meta">@TransactionalEventListener(
    phase = TransactionPhase.AFTER_COMMIT,
    fallbackExecution = true  // æ²¡æœ‰äº‹åŠ¡ä¹Ÿä¼šæ‰§è¡Œ
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleEvent</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-23">å¯¹æ¯”äº‹åŠ¡åŒæ­¥å™¨</h4>























<table><thead><tr><th>æ–¹å¼</th><th>ä»£ç è€¦åˆåº¦</th><th>æ‰©å±•æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>TransactionSynchronization</td><td>é«˜ï¼ˆåœ¨æ–¹æ³•é‡Œæ³¨å†Œï¼‰</td><td>ä½</td><td>ç®€å•åœºæ™¯ï¼Œ1-2ä¸ªæ“ä½œ</td></tr><tr><td>@TransactionalEventListener</td><td>ä½ï¼ˆå‘å¸ƒè®¢é˜…ï¼‰</td><td>é«˜</td><td>å¤æ‚åœºæ™¯ï¼Œå¤šä¸ªæ“ä½œ</td></tr></tbody></table>
<p><strong>æˆ‘çš„å»ºè®®</strong>ï¼š</p>
<ul>
<li>åªæœ‰1-2ä¸ªæ“ä½œï¼Œç”¨TransactionSynchronization</li>
<li>æœ‰å¤šä¸ªæ“ä½œï¼Œæˆ–è€…å¯èƒ½æ‰©å±•ï¼Œç”¨@TransactionalEventListener</li>
</ul>
<p>å¥½å¤„æ˜¯ä»£ç è§£è€¦äº†ï¼Œè¦åŠ æ–°åŠŸèƒ½ï¼Œå†™ä¸ªç›‘å¬å™¨å°±è¡Œï¼Œä¸ç”¨æ”¹åŸæ–¹æ³•ã€‚</p>
<h3 data-id="heading-24">æ‰¹é‡æ“ä½œå¿…é¡»ç”¨æ‰‹åŠ¨äº‹åŠ¡</h3>
<p>æ‰¹é‡å‘è´§100ä¸ªè®¢å•ï¼Œå…¶ä¸­1ä¸ªå¤±è´¥äº†å’‹åŠï¼Ÿ</p>
<p>å¦‚æœç”¨<code>@Transactional</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchDelivery</span><span class="hljs-params">(List&lt;Long&gt; orderIds)</span> {
    <span class="hljs-keyword">for</span> (Long orderId : orderIds) {
        <span class="hljs-comment">// å‘è´§é€»è¾‘</span>
    }
}
</code></pre>
<p>é—®é¢˜ï¼š100ä¸ªè®¢å•åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œ1ä¸ªå¤±è´¥å…¨éƒ¨å›æ»šã€‚</p>
<p>ä½†å®é™…éœ€æ±‚æ˜¯ï¼š<strong>æˆåŠŸçš„æ­£å¸¸å‘è´§ï¼Œå¤±è´¥çš„è®°å½•ä¸‹æ¥ã€‚</strong></p>
<h4 data-id="heading-25">ç”¨PlatformTransactionManageræ‰‹åŠ¨æ§åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderBatchService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PlatformTransactionManager transactionManager;
    
    <span class="hljs-keyword">public</span> BatchResult <span class="hljs-title function_">batchDelivery</span><span class="hljs-params">(List&lt;Long&gt; orderIds)</span> {
        
        List&lt;Long&gt; success = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        List&lt;String&gt; failed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">for</span> (Long orderId : orderIds) {
            <span class="hljs-comment">// æ¯ä¸ªè®¢å•ä¸€ä¸ªç‹¬ç«‹äº‹åŠ¡</span>
            <span class="hljs-type">DefaultTransactionDefinition</span> <span class="hljs-variable">def</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultTransactionDefinition</span>();
            <span class="hljs-type">TransactionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> transactionManager.getTransaction(def);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// å‘è´§é€»è¾‘</span>
                <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);
                order.setStatus(<span class="hljs-number">2</span>);  <span class="hljs-comment">// å·²å‘è´§</span>
                orderMapper.updateById(order);
                reduceStock(order);
                
                <span class="hljs-comment">// æ‰‹åŠ¨æäº¤</span>
                transactionManager.commit(status);
                success.add(orderId);
                
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-comment">// æ‰‹åŠ¨å›æ»š</span>
                transactionManager.rollback(status);
                failed.add(<span class="hljs-string">"è®¢å•"</span> + orderId + <span class="hljs-string">"ï¼š"</span> + e.getMessage());
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BatchResult</span>(success, failed);
    }
}
</code></pre>
<h4 data-id="heading-26">é«˜çº§ç”¨æ³•ï¼šè®¾ç½®äº‹åŠ¡å±æ€§</h4>
<p>å¯¹äºå®šæ—¶ä»»åŠ¡ã€åå°æ‰¹å¤„ç†è¿™ç§åœºæ™¯ï¼Œå¯ä»¥æ˜¾å¼æ§åˆ¶äº‹åŠ¡å±æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> BatchResult <span class="hljs-title function_">batchCloseOrder</span><span class="hljs-params">(List&lt;Long&gt; orderIds)</span> {
    
    <span class="hljs-keyword">for</span> (Long orderId : orderIds) {
        <span class="hljs-type">DefaultTransactionDefinition</span> <span class="hljs-variable">def</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultTransactionDefinition</span>();
        
        <span class="hljs-comment">// å¼ºåˆ¶æ–°äº‹åŠ¡ï¼ˆæ— è®ºå¤–å±‚æ˜¯å¦æœ‰äº‹åŠ¡ï¼‰</span>
        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
        
        <span class="hljs-comment">// é™ä½éš”ç¦»çº§åˆ«ï¼Œå‡å°‘é”äº‰ç”¨</span>
        def.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);
        
        <span class="hljs-comment">// è®¾ç½®è¶…æ—¶ï¼Œé¿å…é•¿äº‹åŠ¡é˜»å¡</span>
        def.setTimeout(<span class="hljs-number">10</span>);
        
        <span class="hljs-type">TransactionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> transactionManager.getTransaction(def);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);
            order.setStatus(<span class="hljs-number">4</span>);  <span class="hljs-comment">// å·²å…³é—­</span>
            orderMapper.updateById(order);
            
            transactionManager.commit(status);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            transactionManager.rollback(status);
        }
    }
}
</code></pre>
<h4 data-id="heading-27">ä¸‰ç§æ–¹å¼å¯¹æ¯”</h4>





























<table><thead><tr><th>æ–¹å¼</th><th>äº‹åŠ¡èŒƒå›´</th><th>ä¸€æ¡å¤±è´¥å½±å“</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>@Transactional</td><td>æ•´ä¸ªæ‰¹æ¬¡</td><td>å…¨éƒ¨å›æ»š</td><td>ä¸é€‚åˆæ‰¹é‡</td></tr><tr><td>æ‰‹åŠ¨äº‹åŠ¡ï¼ˆé»˜è®¤å±æ€§ï¼‰</td><td>æ¯æ¡ç‹¬ç«‹</td><td>åªå›æ»šè¿™æ¡</td><td>æ™®é€šæ‰¹å¤„ç†</td></tr><tr><td>æ‰‹åŠ¨äº‹åŠ¡ï¼ˆå®šåˆ¶å±æ€§ï¼‰</td><td>æ¯æ¡ç‹¬ç«‹</td><td>åªå›æ»šè¿™æ¡</td><td>é«˜å¹¶å‘æ‰¹å¤„ç†</td></tr></tbody></table>
<p>æˆ‘æµ‹è¯•äº†100ä¸ªè®¢å•ï¼Œ97ä¸ªæˆåŠŸï¼Œ3ä¸ªå¤±è´¥ã€‚æˆåŠŸçš„éƒ½å‘è´§äº†ï¼Œå¤±è´¥çš„è®°å½•ä¸‹æ¥äº†ã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šæ¯æ¡æ•°æ®ç‹¬ç«‹äº‹åŠ¡ï¼Œéƒ¨åˆ†å¤±è´¥ä¸å½±å“å…¶ä»–ã€‚</p>
<h3 data-id="heading-28">äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼š3ç§å¸¸ç”¨åœºæ™¯</h3>
<p>åˆ›å»ºè®¢å•æ—¶ï¼Œè¦è°ƒå¦ä¸€ä¸ªæ–¹æ³•æ’å…¥è®¢å•å•†å“ã€‚ä¸¤ä¸ªæ–¹æ³•éƒ½æœ‰<code>@Transactional</code>ï¼Œä¼šå’‹æ ·ï¼Ÿ</p>
<p><strong>7ç§ä¼ æ’­æœºåˆ¶</strong>ï¼Œå¸¸ç”¨çš„æ˜¯3ç§ï¼šREQUIREDã€REQUIRES_NEWã€NESTEDã€‚</p>
<h4 data-id="heading-29">REQUIREDï¼ˆé»˜è®¤ï¼‰ï¼šåŒæˆåŒè´¥</h4>
<p><strong>è¡Œä¸º</strong>ï¼šæœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æ–°å»ºã€‚çˆ¶å­æ–¹æ³•å…±äº«åŒä¸€ä¸ªäº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çˆ¶æ–¹æ³•</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    createOrderItems(order.getId());  <span class="hljs-comment">// åŠ å…¥å½“å‰äº‹åŠ¡</span>
}

<span class="hljs-comment">// å­æ–¹æ³•</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrderItems</span><span class="hljs-params">(Long orderId)</span> {
    itemMapper.batchInsert(items);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>çˆ¶å­æ–¹æ³•åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œ</li>
<li>å­æ–¹æ³•æŠ›å¼‚å¸¸ â†’ æ•´ä¸ªäº‹åŠ¡å›æ»šï¼ˆçˆ¶ä¹Ÿä¸€èµ·å›æ»šï¼‰</li>
<li>è®¢å•å’Œè®¢å•å•†å“"åŒæˆåŒè´¥"</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[createOrderå¼€å¯äº‹åŠ¡] --&gt; B[insert order]
    B --&gt; C[createOrderItemsåŠ å…¥äº‹åŠ¡]
    C --&gt; D[insert items]
    D --&gt; E{å­æ–¹æ³•å¼‚å¸¸?}
    E --&gt;|æ˜¯| F[æ•´ä¸ªäº‹åŠ¡å›æ»š]
    E --&gt;|å¦| G[äº‹åŠ¡æäº¤]
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸€ä¸ªä¸šåŠ¡æµç¨‹å†…çš„å¤šæ­¥éª¤éœ€è¦"åŒæˆåŒè´¥"ã€‚80%çš„åœºæ™¯éƒ½ç”¨è¿™ä¸ªã€‚</p>
<h4 data-id="heading-30">REQUIRES_NEWï¼šç‹¬ç«‹äº‹åŠ¡</h4>
<p><strong>è¡Œä¸º</strong>ï¼šæŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œå¼€å¯ä¸€ä¸ªå…¨æ–°çš„äº‹åŠ¡ï¼Œç‹¬ç«‹æäº¤/å›æ»šã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çˆ¶æ–¹æ³•</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    logService.saveLog(log);  <span class="hljs-comment">// æ–°äº‹åŠ¡ï¼Œç‹¬ç«‹æäº¤</span>
    
    <span class="hljs-comment">// åé¢çš„ä»£ç å¯èƒ½å¤±è´¥</span>
}

<span class="hljs-comment">// å­æ–¹æ³•</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveLog</span><span class="hljs-params">(Log log)</span> {
    logMapper.insert(log);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>å­æ–¹æ³•å¤±è´¥åªå½±å“å­äº‹åŠ¡ï¼Œçˆ¶äº‹åŠ¡ä¸å—å½±å“</li>
<li>çˆ¶äº‹åŠ¡åç»­å›æ»šï¼Œå­äº‹åŠ¡å·²æäº¤çš„ç»“æœä¹Ÿä¿ç•™</li>
<li>æ—¥å¿—ä¸€å®šä¼šä¿å­˜ï¼Œå³ä½¿è®¢å•åˆ›å»ºå¤±è´¥</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[createOrderäº‹åŠ¡1] --&gt; B[insert order]
    B --&gt; C[æŒ‚èµ·äº‹åŠ¡1]
    C --&gt; D[saveLogå¼€å¯äº‹åŠ¡2]
    D --&gt; E[insert log]
    E --&gt; F[äº‹åŠ¡2æäº¤-æ—¥å¿—å·²ä¿å­˜]
    F --&gt; G[æ¢å¤äº‹åŠ¡1]
    G --&gt; H{äº‹åŠ¡1ç»§ç»­æ‰§è¡Œ}
    H --&gt;|æˆåŠŸ| I[äº‹åŠ¡1æäº¤]
    H --&gt;|å¤±è´¥| J[äº‹åŠ¡1å›æ»š-ä½†æ—¥å¿—ä¿ç•™]
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¿…é¡»ç‹¬ç«‹æŒä¹…åŒ–çš„åŠ¨ä½œï¼Œå¦‚ï¼š</p>
<ul>
<li>è®°å½•å®¡è®¡æ—¥å¿—</li>
<li>å†™æ¶ˆæ¯è¡¨</li>
<li>å‘é€é€šçŸ¥è®°å½•</li>
</ul>
<p>å³ä½¿ä¸»æµç¨‹å¤±è´¥ä¹Ÿä¸èƒ½ä¸¢ã€‚</p>
<h4 data-id="heading-31">NESTEDï¼šå±€éƒ¨å›æ»š</h4>
<p><strong>è¡Œä¸º</strong>ï¼šåœ¨åŒä¸€ç‰©ç†äº‹åŠ¡å†…ä½¿ç”¨"ä¿å­˜ç‚¹"ï¼ˆSavepointï¼‰ï¼Œå­æ–¹æ³•ç›¸å½“äºå­äº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çˆ¶æ–¹æ³•</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
    orderMapper.insert(order);
    
    <span class="hljs-keyword">try</span> {
        createGift(order.getId());  <span class="hljs-comment">// åµŒå¥—äº‹åŠ¡</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-comment">// èµ å“åˆ›å»ºå¤±è´¥ï¼Œä½†è®¢å•ç»§ç»­</span>
        log.warn(<span class="hljs-string">"èµ å“åˆ›å»ºå¤±è´¥ï¼Œç»§ç»­å¤„ç†è®¢å•"</span>);
    }
    
    <span class="hljs-comment">// è®¢å•æ­£å¸¸æäº¤</span>
}

<span class="hljs-comment">// å­æ–¹æ³•</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.NESTED)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createGift</span><span class="hljs-params">(Long orderId)</span> {
    giftMapper.insert(gift);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>å­æ–¹æ³•å›æ»šåªå›æ»šåˆ°ä¿å­˜ç‚¹ï¼Œä¸å½±å“çˆ¶æ–¹æ³•å·²åšçš„æ“ä½œ</li>
<li>çˆ¶æ–¹æ³•å›æ»šä¼šè¿åŒå­æ–¹æ³•ä¸€èµ·å›æ»š</li>
<li>éœ€è¦æ•°æ®åº“æ”¯æŒä¿å­˜ç‚¹ï¼ˆInnoDBæ”¯æŒï¼‰</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[createOrderäº‹åŠ¡å¼€å¯] --&gt; B[insert order]
    B --&gt; C[åˆ›å»ºä¿å­˜ç‚¹]
    C --&gt; D[createGiftåµŒå¥—äº‹åŠ¡]
    D --&gt; E{èµ å“åˆ›å»º}
    
    E --&gt;|å¤±è´¥| F[å›æ»šåˆ°ä¿å­˜ç‚¹]
    F --&gt; G[è®¢å•ä¿ç•™]
    G --&gt; H[äº‹åŠ¡æäº¤]
    
    E --&gt;|æˆåŠŸ| I[ç»§ç»­æ‰§è¡Œ]
    I --&gt; H
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸»æµç¨‹å¯ç»§ç»­ï¼Œä½†æŸä¸ªå­æ­¥éª¤å…è®¸"å±€éƒ¨å¤±è´¥å›æ»š"ã€‚</p>
<ul>
<li>æ‰¹å¤„ç†ä¸­æŸæ¡å¤±è´¥ä¸å½±å“å‰é¢å·²å†™å…¥çš„æ­¥éª¤</li>
<li>èµ å“ã€ä¼˜æƒ åˆ¸ç­‰å¯é€‰åŠŸèƒ½</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>éœ€è¦ä½¿ç”¨<code>DataSourceTransactionManager</code>ï¼ˆJPAçš„ä¸æ”¯æŒï¼‰</li>
<li>æ•°æ®åº“å¿…é¡»æ”¯æŒä¿å­˜ç‚¹ï¼ˆInnoDBæ”¯æŒï¼ŒMyISAMä¸æ”¯æŒï¼‰</li>
</ul>
<h4 data-id="heading-32">ä¸‰ç§ä¼ æ’­è¡Œä¸ºå¯¹æ¯”</h4>

































<table><thead><tr><th>ä¼ æ’­è¡Œä¸º</th><th>äº‹åŠ¡å…³ç³»</th><th>å­æ–¹æ³•å¤±è´¥å½±å“</th><th>çˆ¶æ–¹æ³•å¤±è´¥å½±å“</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>REQUIRED</td><td>å…±äº«äº‹åŠ¡</td><td>æ•´ä¸ªäº‹åŠ¡å›æ»š</td><td>æ•´ä¸ªäº‹åŠ¡å›æ»š</td><td>è®¢å•+è®¢å•å•†å“</td></tr><tr><td>REQUIRES_NEW</td><td>ç‹¬ç«‹äº‹åŠ¡</td><td>åªå›æ»šå­äº‹åŠ¡</td><td>å­äº‹åŠ¡å·²æäº¤</td><td>å®¡è®¡æ—¥å¿—</td></tr><tr><td>NESTED</td><td>ä¿å­˜ç‚¹</td><td>å›æ»šåˆ°ä¿å­˜ç‚¹</td><td>æ•´ä¸ªäº‹åŠ¡å›æ»š</td><td>èµ å“ã€ä¼˜æƒ åˆ¸</td></tr></tbody></table>
<h4 data-id="heading-33">é€‰å‹å»ºè®®</h4>
<ul>
<li><strong>é»˜è®¤ç”¨REQUIRED</strong>ï¼š80%çš„åœºæ™¯éƒ½æ˜¯"åŒæˆåŒè´¥"</li>
<li><strong>éœ€è¦ç‹¬ç«‹è½ç›˜çš„ç”¨REQUIRES_NEW</strong>ï¼šå®¡è®¡æ—¥å¿—ã€æ¶ˆæ¯è¡¨</li>
<li><strong>éœ€è¦å±€éƒ¨å›æ»šçš„ç”¨NESTED</strong>ï¼šå¯é€‰åŠŸèƒ½ã€æ‰¹å¤„ç†</li>
</ul>
<p>æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè¿™3ç§ä¼ æ’­è¡Œä¸ºéƒ½ç¬¦åˆé¢„æœŸã€‚</p>
<h3 data-id="heading-34">å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹</h3>
<h4 data-id="heading-35">äº‹åŠ¡èŒƒå›´è¦å°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸å¥½çš„å†™æ³•</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">process</span><span class="hljs-params">()</span> {
    List&lt;Data&gt; data = queryBigData();   <span class="hljs-comment">// æ…¢æŸ¥è¯¢ï¼Œä¸éœ€è¦äº‹åŠ¡</span>
    <span class="hljs-type">Data</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> calculate(data);      <span class="hljs-comment">// è®¡ç®—ï¼Œä¸éœ€è¦äº‹åŠ¡</span>
    mapper.save(result);                <span class="hljs-comment">// çœŸæ­£éœ€è¦äº‹åŠ¡</span>
}

<span class="hljs-comment">// æ”¹æˆè¿™æ ·</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">process</span><span class="hljs-params">()</span> {
    List&lt;Data&gt; data = queryBigData();
    <span class="hljs-type">Data</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> calculate(data);
    saveInTransaction(result);
}

<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveInTransaction</span><span class="hljs-params">(Data data)</span> {
    mapper.save(data);
}
</code></pre>
<p>åªæŠŠå†™æ“ä½œæ”¾äº‹åŠ¡é‡Œã€‚</p>
<h4 data-id="heading-36">æ‰¹é‡æ’å…¥è¦ç”¨batchInsert</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ…¢</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(List&lt;Item&gt; items)</span> {
    <span class="hljs-keyword">for</span> (Item item : items) {
        mapper.insert(item);  <span class="hljs-comment">// Næ¬¡æ•°æ®åº“è®¿é—®</span>
    }
}

<span class="hljs-comment">// å¿«</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(List&lt;Item&gt; items)</span> {
    mapper.batchInsert(items);  <span class="hljs-comment">// 1æ¬¡æ•°æ®åº“è®¿é—®</span>
}
</code></pre>
<p>æˆ‘ä¹‹å‰ä¸çŸ¥é“è¿™ä¸ªï¼Œè¸©è¿‡å‘ã€‚1000æ¡æ•°æ®ï¼Œå¾ªç¯æ’å…¥è¦10ç§’ï¼Œæ‰¹é‡æ’å…¥åªè¦0.5ç§’ã€‚</p>
<h4 data-id="heading-37">é•¿äº‹åŠ¡è¦è®¾ç½®è¶…æ—¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(timeout = 30)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">longTask</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é˜²æ­¢é”è¡¨</span>
}
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒä¸€å®šè¦åŠ è¿™ä¸ªã€‚</p>
<h3 data-id="heading-38">æ€»ç»“ä¸€ä¸‹</h3>
<p>è¿™6ç§ç©æ³•ï¼Œæ¯ä¸ªéƒ½èƒ½è§£å†³å®é™…é—®é¢˜ï¼š</p>
<ol>
<li><strong>ç¼–ç¨‹å¼äº‹åŠ¡</strong> â†’ åº“å­˜ä¸è¶³ä¿ç•™è®¢å•</li>
<li><strong>@Transactionalå‚æ•°</strong> â†’ éš”ç¦»çº§åˆ«ã€è¶…æ—¶ã€å›æ»šè§„åˆ™</li>
<li><strong>äº‹åŠ¡åŒæ­¥å™¨</strong> â†’ äº‹åŠ¡æäº¤åå‘MQ</li>
<li><strong>äº‹åŠ¡äº‹ä»¶ç›‘å¬</strong> â†’ è§£è€¦ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡</strong> â†’ æ‰¹é‡æ“ä½œ</li>
<li><strong>äº‹åŠ¡ä¼ æ’­æœºåˆ¶</strong> â†’ æ—¥å¿—è®°å½•ã€èµ å“åˆ›å»º</li>
</ol>
<p>80%çš„åœºæ™¯ï¼Œ<code>@Transactional</code>å°±å¤Ÿäº†ã€‚é‡åˆ°ç‰¹æ®Šæƒ…å†µï¼Œå†ç”¨å¯¹åº”çš„é«˜çº§ç”¨æ³•ã€‚</p>
<p>åˆ«è¿‡åº¦è®¾è®¡ï¼Œå¤Ÿç”¨å°±è¡Œã€‚</p>
<h3 data-id="heading-39">ä»£ç åœ¨è¿™é‡Œ</h3>
<p>æ‰€æœ‰ä»£ç éƒ½æ˜¯å¯ä»¥è·‘çš„ï¼Œæœ‰å®Œæ•´æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>æ•°æ®åº“è„šæœ¬åœ¨ doc/simple-transactional-init.sqlï¼Œå¯¼å…¥å°±èƒ½ç”¨ã€‚</p>
<hr/>
<p><strong>ä½ ä»¬å¹³æ—¶ç”¨Springäº‹åŠ¡éƒ½é‡åˆ°è¿‡ä»€ä¹ˆå‘ï¼Ÿ</strong></p>
<p><strong>æˆ–è€…æœ‰ä»€ä¹ˆå¥½çš„å®è·µç»éªŒï¼Ÿ</strong></p>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºèŠèŠï¼Œæˆ‘ä¹Ÿæƒ³å­¦ä¹ å­¦ä¹ ã€‚</strong></p>
<p>ç‰¹åˆ«æ˜¯äº‹åŠ¡ä¼ æ’­æœºåˆ¶é‚£å—ï¼Œæˆ‘è‡ªå·±è¿˜æ²¡å®Œå…¨æé€ã€‚å¦‚æœæœ‰å¤§ä½¬æ„¿æ„æŒ‡ç‚¹ä¸€ä¸‹ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚</p>
<hr/>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ç‚¹ä¸ªèµğŸ‘ï¼Œè®©æ›´å¤šäººçœ‹åˆ°ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« ä»ç ”ç©¶Mallæºç åˆ°å†™demoï¼Œå†åˆ°å†™æ–‡ç« ã€ç”»å›¾ã€æµ‹è¯•ï¼Œå‰åèŠ±äº†ä¸¤å¤©æ—¶é—´ã€‚</p>
<p>å¸Œæœ›èƒ½å¸®ä½ è§£å†³å®é™…é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PandaCoder çš„è§£æ„ä¸æ–°ç”Ÿï¼šä¸ºä¸­æ–‡å¼€å‘è€…é€ ä¸€æŸä¸“æ³¨çš„å…‰]]></title>    <link>https://juejin.cn/post/7575104251866775562</link>    <guid>https://juejin.cn/post/7575104251866775562</guid>    <pubDate>2025-11-23T05:38:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251866775562" data-draft-id="7575182522410926118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PandaCoder çš„è§£æ„ä¸æ–°ç”Ÿï¼šä¸ºä¸­æ–‡å¼€å‘è€…é€ ä¸€æŸä¸“æ³¨çš„å…‰"/> <meta itemprop="keywords" content="IntelliJ IDEA,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-23T05:38:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PandaCoder çš„è§£æ„ä¸æ–°ç”Ÿï¼šä¸ºä¸­æ–‡å¼€å‘è€…é€ ä¸€æŸä¸“æ³¨çš„å…‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T05:38:07.000Z" title="Sun Nov 23 2025 05:38:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€œæˆ‘ä¸æ˜¯åœ¨åšå·¥å…·ï¼Œæˆ‘æ˜¯åœ¨ä¸ºå¼€å‘è€…é€ å…‰ï¼›çœŸæ­£çš„åˆ›é€ ï¼Œæœ‰æ—¶å§‹äºå‹‡æ•¢çš„æ‹†è§£ã€‚â€</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b58793b53eb4803b2cf9677750b19da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=K7zAXMrm4fwJrV80JCnI1Ue3mW0%3D" alt="" loading="lazy"/></p>
<p>å†™ä¸‹è¿™ä¸¤å¥è¯æ—¶ï¼Œâ€œæ·±åœ³çš„é›¨â€åˆšåˆšåœæ­‡ï¼Œçª—å¤–çš„ç©ºæ°”æ¹¿æ¶¦è€Œæ¸…å†½ï¼Œåƒæäº†æˆ‘æ­¤åˆ»çš„å¿ƒæƒ…â€”â€”å¹³é™ä¸­å¸¦ç€å†³æ–­ã€‚</p>
<p>PandaCoderï¼Œè¿™ä¸ªä»¥å›½å®ç†ŠçŒ«ä¸ºåã€ä¸ºä¸­æ–‡å¼€å‘è€…è€Œç”Ÿçš„å°æ’ä»¶ï¼Œå·²ç»æ‚„ç„¶èµ°è¿‡äº†ä¸€æ®µå–§åš£ä¸é™é»˜äº¤ç»‡çš„æ—…ç¨‹ã€‚å®ƒæœ€åˆçš„æ¨¡æ ·ï¼Œæ˜¯æˆ‘å¯¹â€œé«˜æ•ˆç¼–ç¨‹â€æœ€æœ´ç´ çš„æƒ³è±¡ï¼šä¸€ä¸ªèƒ½ç†è§£ä¸­æ–‡æ€ç»´ã€è¾…åŠ©è‹±æ–‡ç¼–ç ã€å‡è½»ä¸Šä¸‹æ–‡åˆ‡æ¢è´Ÿæ‹…çš„æ™ºèƒ½ä¼™ä¼´ã€‚å®ƒå…è´¹ã€å¼€æºï¼Œåƒä¸€å¶è½»èˆŸï¼Œé©¶å…¥ä¸‡åƒå¼€å‘è€…çš„ IDE ä¸–ç•Œã€‚</p>
<p>ç„¶è€Œï¼ŒèˆŸè¡Œæ°´ä¸Šï¼Œäº¦æœ‰é£æµªã€‚</p>
<p>éšç€ç”¨æˆ·åé¦ˆçš„ç§¯ç´¯ï¼Œæˆ‘ä¸æ–­ä¸ºå…¶æ·»ç –åŠ ç“¦ï¼šæ”¯æŒ Jenkins Pipeline çš„è¯­æ³•é«˜äº®ã€SpringBoot é…ç½®æ–‡ä»¶çš„å›¾æ ‡è¯†åˆ«ã€AI é©±åŠ¨çš„æ³¨é‡Šç¿»è¯‘ã€è‡ªåŠ¨ç”Ÿæˆç±»åä¸å˜é‡åâ€¦â€¦åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼ŒPandaCoder é€æ¸ä»ä¸€æŠŠè½»ç›ˆçš„ç‘å£«å†›åˆ€ï¼Œå˜æˆä¸€ä¸ªå¡æ»¡å·¥å…·çš„ç™¾å®ç®±ã€‚è¡¨é¢çœ‹ï¼Œå®ƒâ€œæ›´å¼ºå¤§â€äº†ï¼›å®åˆ™ï¼Œå®ƒå¼€å§‹è¿·å¤±ç„¦ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bcc42f13cdd475684758263c39a76bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=EVSxF6fyCbPHGD1ySuwnDqosnpc%3D" alt="" loading="lazy"/></p>
<p>æ›´ä»¤äººæ·±æ€çš„æ˜¯ï¼Œåœ¨å¼€æºä¸–ç•Œçš„å¼€æ”¾ä¸å…±äº«ä¹‹å¤–ï¼Œæˆ‘ä¹Ÿé­é‡äº†æ„æ–™ä¹‹å¤–çš„å¯’æµâ€”â€”ä¸€äº›æ¶æ„è¯„è®ºã€æ— ç«¯æŒ‡è´£ï¼Œç”šè‡³å¯¹åŠ¨æœºçš„æ£æµ‹ã€‚è¿™äº›å™ªéŸ³è™½ä¸è‡³äºå‡»å®æˆ‘ï¼Œå´æ‚„ç„¶æ¶ˆè€—ç€åˆ›é€ çš„çƒ­å¿±ã€‚æˆ‘å¼€å§‹åå¤è¿½é—®è‡ªå·±ï¼šä¸€ä¸ªå¼€å‘è€…å·¥å…·çš„ç»ˆæä»·å€¼ï¼Œç©¶ç«Ÿæ˜¯åŠŸèƒ½çš„å¤šå¯¡ï¼Œè¿˜æ˜¯å®ƒèƒ½å¦åœ¨æŸä¸ªæ·±å¤œï¼Œè®©ä¸€ä½ç–²æƒ«çš„ç¨‹åºå‘˜ä¼šå¿ƒä¸€ç¬‘ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfa769b0d1c34098a066aba89f64bcd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=fSfJMP9ui03bvlwjxY%2BSx1R0PTI%3D" alt="" loading="lazy"/></p>
<p>çº³ç“¦å°”Â·æ‹‰ç»´åç‰¹æ›¾è¯´ï¼šâ€œæŠŠè‡ªå·±äº§å“åŒ–ã€‚â€è¿™å¥è¯æ›¾è¢«ç®€åŒ–ä¸ºä¸€å¥åˆ›ä¸šå£å·ï¼Œä½†æˆ‘è¶Šæ¥è¶Šä½“ä¼šåˆ°å®ƒçš„æ·±æ„â€”â€”å®ƒæ˜¯ä¸€ç§æ‰¿è¯ºï¼šå°†ä½ ç‹¬ç‰¹çš„æ´å¯Ÿã€åå¤æ‰“ç£¨çš„æŠ€è‰ºï¼Œä¸å¯¹ç”¨æˆ·æ·±æ²‰çš„è´£ä»»æ„Ÿï¼Œå°è£…æˆä¸€ä¸ªå¯æŒç»­ã€å¯å¤åˆ¶ã€èƒ½æŒç»­åˆ›é€ ä»·å€¼çš„äº§å“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/011046c2ef15463db675a8dcbf9c7800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=FW60wavw%2B5w14zCalnxET5fHeas%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯ï¼Œæˆ‘åšå‡ºä¸€ä¸ªè‰°éš¾ä½†åšå®šçš„å†³å®šï¼š<strong>è§£æ„ PandaCoderï¼Œé‡å¯äº§å“å“²å­¦</strong>ã€‚</p>
<p>æœªæ¥çš„ PandaCoderï¼Œå°†ä¸å†æ˜¯ä¸€ä¸ªâ€œå¤§è€Œå…¨â€çš„æ’ä»¶ï¼Œè€Œæ˜¯æ‹†è§£ä¸ºä¸€ç»„<strong>ä¸“æ³¨ã€ç‹¬ç«‹ã€å¯ç»„åˆ</strong>çš„å¾®å‹äº§å“ã€‚æ¯ä¸€éƒ¨åˆ†éƒ½å°†å›å½’å…¶æœ€æœ¬çœŸçš„ä»·å€¼ï¼š</p>
<ul>
<li><strong>ä¸­æ–‡å‘½ååŠ©æ‰‹</strong>ï¼šä¸“æ³¨è§£å†³â€œä¸­æ–‡æƒ³æ³•å¦‚ä½•ä¼˜é›…è½¬åŒ–ä¸ºè‹±æ–‡æ ‡è¯†ç¬¦â€çš„æ ¸å¿ƒç—›ç‚¹ã€‚å®ƒä¸æ˜¯ç¿»è¯‘å™¨ï¼Œè€Œæ˜¯ä½ çš„å‘½ååä½œè€…ï¼Œè®©ç±»åã€å˜é‡ã€æ–¹æ³•åå¦‚è¯—èˆ¬è‡ªç„¶æµæ·Œã€‚</li>
<li><strong>Jenkins Pipeline å¢å¼ºæ¨¡å—</strong>ï¼šä¸º CI/CD è„šæœ¬å¼€å‘è€…æä¾›ç±» VS Code çš„è¯­æ³•é«˜äº®ã€æ™ºèƒ½è¡¥å…¨ä¸é”™è¯¯æç¤ºï¼Œè®© Groovy è„šæœ¬ä¸å†æ˜¯ä¸€æ®µâ€œé»‘ç›’â€ã€‚</li>
<li><strong>SpringBoot é…ç½®å¯è§†åŒ–å™¨</strong>ï¼šåœ¨ <code>application.yml</code> æ—è‡ªåŠ¨æ¸²æŸ“æ•°æ®åº“ã€Redisã€MQ ç­‰ç»„ä»¶å›¾æ ‡ï¼Œè®©é…ç½®ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œå‘Šåˆ«â€œçŒœé…ç½®â€çš„æ—¶ä»£ã€‚</li>
</ul>
<p>è¿™äº›æ¨¡å—æˆ–å°†æ‹¥æœ‰æ–°çš„åå­—ï¼Œä½†å®ƒä»¬å…±äº«åŒä¸€ä¸ªçµé­‚ï¼š<strong>å°‘å³æ˜¯å¤šï¼Œä¸“æ³¨å³åŠ›é‡</strong>ã€‚å®ƒä»¬å¯ä»¥ç‹¬ç«‹å®‰è£…ã€æŒ‰éœ€å¯ç”¨ï¼Œä¸å†å¼ºè¿«ç”¨æˆ·ä¸ºç”¨ä¸åˆ°çš„åŠŸèƒ½ä¹°å•ï¼ˆæ— è®ºæ˜¯æ€§èƒ½è¿˜æ˜¯å¿ƒç†æˆæœ¬ï¼‰ã€‚</p>
<p>ä¼´éšè¿™æ¬¡äº§å“å½¢æ€çš„é‡å¡‘ï¼ŒPandaCoder ä¹Ÿå°†ä»å®Œå…¨å…è´¹å¼€æºï¼Œè½¬å‘<strong>è½»é‡ä»˜è´¹æ¨¡å¼</strong>ã€‚è¿™ç»éç­‘èµ·é«˜å¢™ï¼Œè€Œæ˜¯å¸Œæœ›å»ºç«‹ä¸€ç§æ›´å¥åº·ã€æ›´éƒ‘é‡çš„åˆ›é€ è€…ä¸ä½¿ç”¨è€…å…³ç³»ã€‚</p>
<p>ä»˜è´¹ï¼Œæ˜¯ä»·å€¼çš„é”šç‚¹ã€‚<br/>
å®ƒè¿‡æ»¤æ‰å™ªéŸ³ï¼Œå¸å¼•çœŸæ­£éœ€è¦å¹¶çè§†è¿™ä»½ä»·å€¼çš„åŒè·¯äººï¼›<br/>
å®ƒä¹Ÿæ˜¯æˆ‘æŒç»­æŠ•å…¥ã€æ·±åº¦æ‰“ç£¨äº§å“çš„åŸºçŸ³ã€‚<br/>
åœ¨å¼€æºç²¾ç¥ä¸å¯æŒç»­åˆ›é€ ä¹‹é—´ï¼Œæˆ‘é€‰æ‹©ä¸€æ¡ä¸­é—´è·¯å¾„ï¼šæ ¸å¿ƒé€»è¾‘é€æ˜ã€å…³é”®ä½“éªŒä»˜è´¹ã€‚æœªæ¥ï¼Œéƒ¨åˆ†æ¨¡å—ä»ä¼šä¿ç•™å¼€æºç‰ˆæœ¬ï¼Œä½†å®Œæ•´ä½“éªŒå°†é€šè¿‡è®¢é˜…æ”¯æŒé•¿æœŸè¿­ä»£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4512af03120945ebb380c952f36d44b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=FVR5ox%2BLVUllgEwhj3wiM4cs40I%3D" alt="" loading="lazy"/></p>
<p>æˆ‘çŸ¥é“ï¼Œè¿™æˆ–è®¸ä¼šè®©ä¸€äº›äººé—æ†¾ã€‚ä½†æˆ‘ä¹Ÿç›¸ä¿¡ï¼ŒçœŸæ­£çš„ç”¨æˆ·ï¼Œä¸ä¼šå› ä¸ºä»·æ ¼ç¦»å¼€ï¼Œè€Œä¼šå› ä¸ºä»·å€¼ç•™ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1bc0d29215e497fa523470cbe9584ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481087&amp;x-signature=wx5JWvWPvWFszlYUvc1wugfd%2FbE%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¡è·¯æˆ–è®¸å­¤ç‹¬ï¼Œä½†æˆ‘å§‹ç»ˆä¿¡å¥‰ï¼šâ€œ<strong>æ…¢å³æ˜¯å¿«</strong>â€ã€‚åœ¨è¿½é€é£å£ä¸æµé‡çš„æ—¶ä»£ï¼Œæˆ‘æ„¿åšé‚£ä¸ªæ„¿æ„è¹²ä¸‹æ¥ï¼Œåå¤æ‰“ç£¨ä¸€æŠŠå°åˆ€çš„äººã€‚å› ä¸ºæˆ‘çŸ¥é“ï¼ŒçœŸæ­£æ”¹å˜ç¼–ç¨‹ä½“éªŒçš„ï¼Œå¾€å¾€ä¸æ˜¯å®å¤§çš„æ¡†æ¶ï¼Œè€Œæ˜¯é‚£äº›åœ¨å…³é”®æ—¶åˆ»â€œåˆšåˆšå¥½â€çš„å¾®å°å·¥å…·ã€‚</p>
<p>PandaCoder çš„é‡ç”Ÿï¼Œä¸æ˜¯ä¸€æ¬¡å•†ä¸šè½¬å‹ï¼Œè€Œæ˜¯ä¸€æ¬¡äº§å“åˆå¿ƒçš„å›å½’ã€‚<br/>
æˆ‘ä¸å†è¿½æ±‚â€œæ‰€æœ‰äººéƒ½ç”¨â€ï¼Œè€Œæ˜¯æ¸´æœ›â€œå¯¹çš„äººç¦»ä¸å¼€â€ã€‚</p>
<p>æœ€åï¼Œæˆ‘æƒ³å¯¹æ¯ä¸€ä½æ›¾ä½¿ç”¨ã€åé¦ˆã€ç”šè‡³æ‰¹è¯„è¿‡ PandaCoder çš„ä½ è¯´ä¸€å£°ï¼šè°¢è°¢ã€‚æ­£æ˜¯ä½ ä»¬çš„å­˜åœ¨ï¼Œè®©æˆ‘ä¸æ–­åæ€ã€è¿›åŒ–ã€å‰è¡Œã€‚æœªæ¥çš„è·¯ï¼Œæˆ–è®¸ä¸å†å–§åš£ï¼Œä½†ä¼šæ›´åŠ åšå®šã€‚</p>
<p>å› ä¸ºæœ€ç»ˆï¼Œæˆ‘ä»¬å…±å»ºçš„ä¸æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè€Œæ˜¯ä¸€ç§æ›´ä¼˜é›…ã€æ›´ä»å®¹ã€æ›´å±äºä¸­æ–‡å¼€å‘è€…çš„ç¼–ç¨‹ç”Ÿæ´»æ–¹å¼ã€‚</p>
<p>ä¼—è¡Œè€…è¿œã€‚æ„¿è¿™æŸå¾®å…‰ï¼Œèƒ½ç…§äº®æˆ‘ä»¬å…±åŒçš„ä»£ç å‰è·¯ã€‚å±±æµ·è‡ªæœ‰å½’æœŸï¼ŒæœŸå¾…æˆ‘ä»¬ä¸‹ä¸€æ¬¡æ›´å¥½çš„ç›¸é‡~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Vite + Vue 3 æ­å»ºé¡¹ç›®å¹¶é…ç½®è·¯ç”±çš„å…¨æµç¨‹ï¼ˆå«å›½å†…é•œåƒåŠ é€Ÿï¼‰]]></title>    <link>https://juejin.cn/post/7575090551357128756</link>    <guid>https://juejin.cn/post/7575090551357128756</guid>    <pubDate>2025-11-22T16:08:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357128756" data-draft-id="7574251313884020751" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Vite + Vue 3 æ­å»ºé¡¹ç›®å¹¶é…ç½®è·¯ç”±çš„å…¨æµç¨‹ï¼ˆå«å›½å†…é•œåƒåŠ é€Ÿï¼‰"/> <meta itemprop="keywords" content="Vue.js,Node.js,Vite"/> <meta itemprop="datePublished" content="2025-11-22T16:08:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Vite + Vue 3 æ­å»ºé¡¹ç›®å¹¶é…ç½®è·¯ç”±çš„å…¨æµç¨‹ï¼ˆå«å›½å†…é•œåƒåŠ é€Ÿï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T16:08:01.000Z" title="Sat Nov 22 2025 16:08:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>é€‚ç”¨äº Windows / macOS / Linux ç”¨æˆ· | åŒ…å« NVM å®‰è£…ã€Node ç¯å¢ƒé…ç½®ã€Vite é¡¹ç›®åˆ›å»ºã€Vue Router é›†æˆ</strong></p>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>Vite</strong> å‡­å€Ÿå…¶æé€Ÿçš„å†·å¯åŠ¨å’Œçƒ­æ›´æ–°èƒ½åŠ›ï¼Œå·²æˆä¸ºæ„å»º Vueã€React ç­‰åº”ç”¨çš„é¦–é€‰å·¥å…·ã€‚æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œ<strong>ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ</strong>ï¼Œé€šè¿‡ <strong>NVM ç®¡ç† Node.js ç‰ˆæœ¬</strong>ï¼Œåˆ›å»ºä¸€ä¸ªåŸºäº <strong>Vite + Vue 3</strong> çš„é¡¹ç›®ï¼Œå¹¶é›†æˆ <strong>Vue Router</strong> å®ç°å‰ç«¯è·¯ç”±åŠŸèƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šå®‰è£… NVMï¼ˆNode Version Managerï¼‰</h2>
<p>NVM æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å¤šä¸ª Node.js ç‰ˆæœ¬çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦åœ¨ä¸åŒé¡¹ç›®ä¸­åˆ‡æ¢ Node ç‰ˆæœ¬çš„å¼€å‘è€…ã€‚</p>
<h3 data-id="heading-1">Windows ç”¨æˆ·</h3>
<p>æ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows" title="https://github.com/coreybutler/nvm-windows" target="_blank" ref="nofollow noopener noreferrer">nvm-windows</a>ï¼š</p>
<ol>
<li>
<p>å¸è½½å·²å®‰è£…çš„ Node.jsï¼ˆå¦‚æœ‰ï¼‰</p>
</li>
<li>
<p>ä¸‹è½½å®‰è£…åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows%2Freleases" title="https://github.com/coreybutler/nvm-windows/releases" target="_blank" ref="nofollow noopener noreferrer">github.com/coreybutlerâ€¦</a></p>
</li>
<li>
<p>å®‰è£…æ—¶æ³¨æ„ï¼š</p>
<ul>
<li>å®‰è£…è·¯å¾„ä¸è¦åŒ…å«ç©ºæ ¼ï¼ˆå¦‚ <code>C:\nvm</code>ï¼‰</li>
<li>è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå‹¾é€‰ç›¸å…³é€‰é¡¹ï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">macOS / Linux ç”¨æˆ·</h3>
<p>ä½¿ç”¨ curl å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
</code></pre>
<p>ç„¶åé‡å¯ç»ˆç«¯æˆ–æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.bashrc  <span class="hljs-comment"># æˆ– ~/.zshrc</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šé…ç½®å›½å†…é•œåƒæºï¼ˆåŠ é€Ÿä¸‹è½½ï¼‰</h2>
<p>ç”±äºç½‘ç»œåŸå› ï¼Œä»å®˜æ–¹æºä¸‹è½½ Node.js å’Œ npm åŒ…å¯èƒ½éå¸¸æ…¢ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®é•œåƒåœ°å€è§£å†³ã€‚</p>
<h3 data-id="heading-4">è®¾ç½® NVM çš„ Node å’Œ npm é•œåƒï¼ˆWindowsï¼‰</h3>
<p>åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆéœ€ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell æˆ– CMDï¼‰ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">nvm npm_mirror <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/npmmirror.com/mirrors</span><span class="hljs-regexp">/npm/</span>
nvm node_mirror <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/npmmirror.com/mirrors</span><span class="hljs-regexp">/node/</span>
</code></pre>
<blockquote>
<p>è¿™ä¸¤è¡Œå‘½ä»¤ä¼šä¿®æ”¹ NVM çš„é»˜è®¤ä¸‹è½½æºä¸º <strong>æ·˜å® NPM é•œåƒï¼ˆnpmmirror.comï¼‰</strong> ï¼Œå¤§å¹…æå‡ä¸‹è½½é€Ÿåº¦ã€‚</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼š<code>npmmirror.com</code> æ˜¯åŸ <code>npm.taobao.org</code> çš„æ–°åŸŸåï¼Œç”±é˜¿é‡Œäº‘ç»´æŠ¤ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šå®‰è£…å¹¶ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„ Node.js</h2>
<h3 data-id="heading-6">1. æŸ¥çœ‹å¯ç”¨çš„ Node.js ç‰ˆæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash">nvm list available  <span class="hljs-comment"># Windows</span>
nvm ls-remote       <span class="hljs-comment"># macOS / Linux</span>
</code></pre>
<h3 data-id="heading-7">2. å®‰è£…æ¨èç‰ˆæœ¬ï¼ˆå¦‚ LTS ç‰ˆæœ¬ v18.18.2ï¼‰</h3>
<pre><code class="hljs">nvm install 18.18.2
</code></pre>
<blockquote>
<p>æ¨èä½¿ç”¨ <strong>LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬</strong>ï¼Œç¨³å®šä¸”å…¼å®¹æ€§å¥½ã€‚</p>
</blockquote>
<h3 data-id="heading-8">3. åˆ‡æ¢å¹¶ä½¿ç”¨è¯¥ç‰ˆæœ¬</h3>
<pre><code class="hljs language-perl" lang="perl">nvm <span class="hljs-keyword">use</span> <span class="hljs-number">18.18</span>.<span class="hljs-number">2</span>
</code></pre>
<p>éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node -v  <span class="hljs-comment"># åº”è¾“å‡º v18.18.2</span>
npm -v   <span class="hljs-comment"># æ˜¾ç¤ºå¯¹åº” npm ç‰ˆæœ¬</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">ç¬¬å››æ­¥ï¼šåˆ›å»º Node.js å…¨å±€ç›®å½•ï¼ˆå¯é€‰ä½†æ¨èï¼‰</h2>
<p>ä¸ºé¿å…æƒé™é—®é¢˜å’Œè·¯å¾„æ··ä¹±ï¼Œå»ºè®®æ‰‹åŠ¨åˆ›å»ºå…¨å±€æ¨¡å—å’Œç¼“å­˜ç›®å½•ã€‚</p>
<h3 data-id="heading-10">Windows ç¤ºä¾‹ï¼ˆä»¥ C ç›˜ä¸ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">mkdir C:\nodejs\node_global
mkdir C:\nodejs\node_cache
</code></pre>
<p>ç„¶åé…ç½® npmï¼š</p>
<pre><code class="hljs language-swift" lang="swift">npm config <span class="hljs-keyword">set</span> <span class="hljs-keyword">prefix</span> <span class="hljs-string">"C:<span class="hljs-subst">\n</span>odejs<span class="hljs-subst">\n</span>ode_global"</span>
npm config <span class="hljs-keyword">set</span> cache <span class="hljs-string">"C:<span class="hljs-subst">\n</span>odejs<span class="hljs-subst">\n</span>ode_cache"</span>
</code></pre>
<h3 data-id="heading-11">å°†å…¨å±€ç›®å½•åŠ å…¥ç³»ç»Ÿ PATHï¼ˆWindowsï¼‰</h3>
<ul>
<li>æ‰“å¼€â€œç³»ç»Ÿå±æ€§â€ â†’ â€œç¯å¢ƒå˜é‡â€</li>
<li>åœ¨ <strong>ç”¨æˆ·å˜é‡</strong> çš„ <code>Path</code> ä¸­æ·»åŠ ï¼š<code>C:\nodejs\node_global</code></li>
</ul>
<blockquote>
<p>è¿™æ ·ä½ å°±å¯ä»¥å…¨å±€ä½¿ç”¨ <code>vue</code>ã€<code>vite</code> ç­‰å‘½ä»¤äº†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ç¬¬äº”æ­¥ï¼šé…ç½® .npmrc æ–‡ä»¶ï¼ˆæå‡åç»­å®‰è£…é€Ÿåº¦ï¼‰</h2>
<p>åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆWindows é€šå¸¸æ˜¯ <code>C:\Users&lt;ä½ çš„ç”¨æˆ·å&gt;</code>ï¼‰åˆ›å»ºæˆ–ç¼–è¾‘ <code>.npmrc</code> æ–‡ä»¶</p>
<p>.npmrc æ–‡ä»¶åœ¨æ–‡ç« é¡¶éƒ¨ä¸‹è½½</p>
<blockquote>
<p>âœ… æ­¤é…ç½®ç¡®ä¿æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ sassã€puppeteer ç­‰ï¼‰éƒ½ä»å›½å†…é•œåƒä¸‹è½½ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ’¡ å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ° <code>C:\Users&lt;ä½ çš„ç”¨æˆ·å&gt;.npmrc</code>ï¼ˆWindowsï¼‰æˆ– <code>~/.npmrc</code>ï¼ˆmacOS/Linuxï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">ç¬¬å…­æ­¥ï¼šä½¿ç”¨ Vite åˆ›å»º Vue 3 é¡¹ç›®</h2>
<p>ç°åœ¨ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹åˆ›å»ºé¡¹ç›®ï¼</p>
<h3 data-id="heading-14">æ‰§è¡Œåˆ›å»ºå‘½ä»¤</h3>
<pre><code class="hljs language-sql" lang="sql">npm <span class="hljs-keyword">create</span> vite<span class="hljs-variable">@latest</span> my<span class="hljs-operator">-</span>app <span class="hljs-comment">-- --template vue</span>
</code></pre>
<blockquote>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>my-app</code>ï¼šé¡¹ç›®æ–‡ä»¶å¤¹åç§°</li>
<li><code>--template vue</code>ï¼šæŒ‡å®šä½¿ç”¨ Vue æ¨¡æ¿ï¼ˆçº¯ Vue 3ï¼Œæ—  TypeScriptã€Router ç­‰ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-15">è¿›å…¥é¡¹ç›®å¹¶å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> my-app
npm install
</code></pre>
<blockquote>
<p>æ­¤æ—¶ä¼šä» <code>registry.npmmirror.com</code> å®‰è£…ä¾èµ–ï¼Œé€Ÿåº¦é£å¿«ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨</h2>
<pre><code class="hljs language-arduino" lang="arduino">npm run dev
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  VITE v5<span class="hljs-number">.0</span><span class="hljs-number">.0</span>  ready in <span class="hljs-number">400</span> ms

  âœ  Local:   http:<span class="hljs-comment">//localhost:5173/</span>
  âœ  Network: http:<span class="hljs-comment">//192.168.x.x:5173/</span>
</code></pre>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://localhost:5173</code>ï¼Œå³å¯çœ‹åˆ° Vue çš„æ¬¢è¿é¡µé¢ã€‚</p>
<hr/>
<h2 data-id="heading-17">ç¬¬å…«æ­¥ï¼šé›†æˆ Vue Routerï¼ˆå®ç°é¡µé¢è·¯ç”±ï¼‰</h2>
<p>Vite é»˜è®¤æ¨¡æ¿ä¸åŒ…å«è·¯ç”±ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®‰è£…å¹¶é…ç½®ã€‚</p>
<h3 data-id="heading-18">1. å®‰è£… Vue Router</h3>
<pre><code class="hljs language-css" lang="css">npm install vue-router<span class="hljs-keyword">@4</span>
</code></pre>
<blockquote>
<p>Vue 3 å¿…é¡»ä½¿ç”¨ <strong>vue-router 4.x</strong></p>
</blockquote>
<h3 data-id="heading-19">2. åˆ›å»ºè·¯ç”±é…ç½®æ–‡ä»¶</h3>
<p>åœ¨ <code>src</code> ç›®å½•ä¸‹æ–°å»º <code>router/index.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®¡ç†è·¯ç”±çš„æ–‡ä»¶ </span>
<span class="hljs-comment">// å¯¼å…¥ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/user/login.vue'</span>  <span class="hljs-comment">// ç™»å½•ç»„ä»¶</span>


<span class="hljs-comment">// å¯¼å…¥è·¯ç”±ä¸­çš„æ–¹æ³•</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-comment">// é…ç½®ç»„ä»¶å’Œè®¿é—®è·¯å¾„</span>
<span class="hljs-keyword">const</span> routes = [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span> }, <span class="hljs-comment">// /loginæ˜¯ç™»å½•ç»„ä»¶çš„è®¿é—®è·¯å¾„ï¼Œcomponentè¡¨ç¤ºç»„ä»¶çš„åç§°</span>

]
<span class="hljs-comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-comment">// è·¯ç”±çš„æ•°æ®</span>
    routes,
    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(), <span class="hljs-comment">// è·¯ç”±æ¨¡å¼ï¼ŒcreateWebHashHistoryè¡¨ç¤ºä½¿ç”¨å“ˆå¸Œæ¨¡å¼</span>
})
<span class="hljs-comment">// å¯¼å‡ºè·¯ç”±å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<blockquote>
<p>ä¸ºä»€ä¹ˆç”¨ <code>createWebHashHistory()</code>ï¼Ÿ</p>
<ul>
<li>å®ƒä½¿ç”¨ URL çš„ <code>#</code> éƒ¨åˆ†ï¼ˆå¦‚ <code>http://localhost:5173/#/about</code>ï¼‰</li>
<li>ä¸éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆé™æ€éƒ¨ç½²ï¼ˆå¦‚ GitHub Pagesã€Vercelã€Netlifyï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-20">3. åœ¨ main.js ä¸­æŒ‚è½½è·¯ç”±</h3>
<p>ä¿®æ”¹ <code>src/main.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-comment">// å¯¼å…¥è·¯ç”±å¯¹è±¡</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
<span class="hljs-comment">// åˆ›å»ºé¡¹ç›®å¯¹è±¡</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
<span class="hljs-comment">// æŒ‚è½½è·¯ç”±å¯¹è±¡</span>
app.<span class="hljs-title function_">use</span>(router)
<span class="hljs-comment">// æŒ‚è½½ç»„ä»¶</span>
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-21">4. åœ¨ App.vue ä¸­æ·»åŠ å¯¼èˆªå’Œè·¯ç”±å‡ºå£</h3>
<p>ä¿®æ”¹ <code>src/App.vue</code>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">RouterView</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-22">5. é‡æ–°è¿è¡Œé¡¹ç›®</h3>
<pre><code class="hljs language-arduino" lang="arduino">npm run dev
</code></pre>
<p>ç°åœ¨ç‚¹å‡»â€œé¦–é¡µâ€å’Œâ€œå…³äºâ€ï¼Œé¡µé¢å†…å®¹ä¼šåŠ¨æ€åˆ‡æ¢ï¼Œè¯´æ˜è·¯ç”±å·²ç”Ÿæ•ˆï¼</p>
<hr/>
<h2 data-id="heading-23">ç¬¬ä¹æ­¥ï¼šæ„å»ºä¸éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰</h2>
<p>å¼€å‘å®Œæˆåï¼Œæ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm run build
</code></pre>
<p>ç”Ÿæˆçš„ <code>dist/</code> æ–‡ä»¶å¤¹å¯ç›´æ¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æœåŠ¡å™¨ï¼ˆå¦‚ Nginxã€GitHub Pagesã€Vercel ç­‰ï¼‰ã€‚</p>
<p>é¢„è§ˆæ„å»ºç»“æœï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm run preview
</code></pre>
<hr/>
<h2 data-id="heading-24">æ€»ç»“ï¼šå®Œæ•´æµç¨‹å›é¡¾</h2>













































<table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th></tr></thead><tbody><tr><td>1</td><td>å®‰è£… NVMï¼ˆå¤šç‰ˆæœ¬ Node ç®¡ç†ï¼‰</td></tr><tr><td>2</td><td>é…ç½®å›½å†…é•œåƒï¼š<code>nvm node_mirror</code> å’Œ <code>nvm npm_mirror</code></td></tr><tr><td>3</td><td><code>nvm install 18.18.2</code> + <code>nvm use 18.18.2</code></td></tr><tr><td>4</td><td>åˆ›å»ºå…¨å±€ç›®å½•å¹¶é…ç½® PATH</td></tr><tr><td>5</td><td>å¤åˆ¶ <code>.npmrc</code> åˆ°ç”¨æˆ·ç›®å½•ï¼Œå¯ç”¨å…¨é‡é•œåƒ</td></tr><tr><td>6</td><td><code>npm create vite@latest my-app -- --template vue</code></td></tr><tr><td>7</td><td><code>npm install</code> + <code>npm run dev</code></td></tr><tr><td>8</td><td>å®‰è£… <code>vue-router@4</code>ï¼Œé…ç½® <code>createWebHashHistory()</code></td></tr><tr><td>9</td><td>ä¿®æ”¹ <code>main.js</code> å’Œ <code>App.vue</code>ï¼Œå¯ç”¨è·¯ç”±</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-25">å°è´´å£«</h2>
<ul>
<li>
<p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ <strong>Vue å®˜æ–¹è„šæ‰‹æ¶ï¼ˆå¸¦ Router/Piniaï¼‰</strong> ï¼Œä¹Ÿå¯ä»¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">npm <span class="hljs-keyword">create</span> vue<span class="hljs-variable">@latest</span>
</code></pre>
<p>å®ƒä¼šäº¤äº’å¼è®©ä½ é€‰æ‹©æ˜¯å¦é›†æˆ Routerã€Piniaã€ESLint ç­‰ã€‚</p>
</li>
<li>
<p>å¼€å‘ä¸­é‡åˆ°ä¾èµ–å®‰è£…æ…¢ï¼Ÿå§‹ç»ˆæ£€æŸ¥ <code>.npmrc</code> æ˜¯å¦ç”Ÿæ•ˆï¼š<code>npm config get registry</code></p>
</li>
<li>
<p>Vite æ”¯æŒ TypeScriptã€JSXã€CSS é¢„å¤„ç†å™¨ç­‰ï¼ŒæŒ‰éœ€æ‰©å±•å³å¯ã€‚</p>
</li>
</ul>
<hr/>
<p>è‡³æ­¤ï¼Œä½ å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ª<strong>é«˜æ€§èƒ½ã€å¯è·¯ç”±ã€å›½å†…åŠ é€Ÿä¼˜åŒ–</strong>çš„ Vue 3 é¡¹ç›®ï¼æ¥ä¸‹æ¥å°±å¯ä»¥è‡ªç”±å¼€å‘ä½ çš„åº”ç”¨äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mini-react å®ç°function ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7575104251865956362</link>    <guid>https://juejin.cn/post/7575104251865956362</guid>    <pubDate>2025-11-22T16:47:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251865956362" data-draft-id="7575083657994289179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mini-react å®ç°function ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T16:47:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Holin_æµ©éœ–"/> <meta itemprop="url" content="https://juejin.cn/user/3984285872438743"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mini-react å®ç°function ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285872438743/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Holin_æµ©éœ–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T16:47:08.000Z" title="Sat Nov 22 2025 16:47:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/027b9628a3a048f08c14e391a4f886e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9saW5f5rWp6ZyW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764434828&amp;x-signature=kGA8ItAe5cKa6X2XtXkuaJGuegU%3D" alt="" loading="lazy"/></p>
<ol>
<li>React.js ä½œç”¨</li>
</ol>
<ul>
<li><strong>render()</strong> : æ¸²æŸ“å…¥å£ï¼Œåˆå§‹åŒ–æ ¹ Fiber å¹¶å¯åŠ¨è°ƒåº¦</li>
</ul>

<ul>
<li><strong>createElement()</strong> : å°† JSX è½¬æ¢ä¸ºè™šæ‹Ÿ DOM å¯¹è±¡</li>
</ul>

<ul>
<li><strong>workLoop()</strong> : è°ƒåº¦å™¨ï¼Œåˆ©ç”¨ requestIdleCallback è¿›è¡Œæ—¶é—´åˆ‡ç‰‡</li>
</ul>

<ul>
<li><strong>performUnitOfWork()</strong> : å¤„ç†å•ä¸ª Fiber å·¥ä½œå•å…ƒ</li>
</ul>

<ul>
<li><strong>commitRoot()</strong> : æäº¤é˜¶æ®µå…¥å£</li>
</ul>

<pre><code class="hljs language-diff" lang="diff">ä½œç”¨ï¼šå®ç°ä¸€ä¸ªéå¸¸ç²¾ç®€çš„ Fiber æ¸²æŸ“å™¨çš„æ ¸å¿ƒé€»è¾‘ï¼ˆéå®Œæ•´å®ç°ï¼Œåæ•™å­¦/æ¢ç´¢ç”¨é€”ï¼‰ã€‚
ç›®æ ‡ä¸åˆ†å±‚ï¼š
<span class="hljs-deletion">- render(): æ¥æ”¶è™šæ‹Ÿ DOMï¼ˆç”± JSX æˆ– createElement åˆ›å»ºï¼‰ï¼Œå°†æ•´ä½“æ¸²æŸ“ä»»åŠ¡æ‹†åˆ†ä¸º fiber å·¥ä½œå•å…ƒå¹¶å¯åŠ¨æ—¶é—´åˆ‡ç‰‡è°ƒåº¦ã€‚</span>
<span class="hljs-deletion">- performUnitOfWork(): åœ¨ render é˜¶æ®µæ„å»º/é“¾æ¥ fiber èŠ‚ç‚¹å¹¶åˆ›å»ºçœŸå® DOMï¼ˆä½†ä¸ç«‹å³æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼ŒæŒ‚è½½åœ¨ commit é˜¶æ®µç»Ÿä¸€å¤„ç†ä»¥ä¼˜åŒ–æ€§èƒ½ï¼‰ã€‚</span>
<span class="hljs-deletion">- commitRoot()/commitWork(): å°†è®¡ç®—å®Œæˆçš„ DOM æ ‘ç»Ÿä¸€æäº¤åˆ°çœŸå® DOMï¼ˆé¿å… render é˜¶æ®µé¢‘ç¹ DOM æ“ä½œï¼‰ã€‚</span>
é‡è¦çº¦å®šï¼ˆfiber ç»“æ„ï¼‰ï¼š
<span class="hljs-deletion">- fiber.type: èŠ‚ç‚¹ç±»å‹ï¼ˆå­—ç¬¦ä¸²æ ‡ç­¾æˆ– 'TEXT_ELEMENT'ï¼‰ã€‚</span>
<span class="hljs-deletion">- fiber.props: å±æ€§å¯¹è±¡ï¼ˆåŒ…å« children æ•°ç»„ï¼‰ã€‚</span>
<span class="hljs-deletion">- fiber.dom: å¯¹åº”çš„çœŸå® DOM èŠ‚ç‚¹ï¼ˆåœ¨ render é˜¶æ®µ createDom ååˆ›å»ºï¼‰ã€‚</span>
<span class="hljs-deletion">- fiber.parent: çˆ¶ fiber å¼•ç”¨ï¼ˆç”¨äº commit æ—¶æŒ‚è½½ï¼‰ã€‚</span>
<span class="hljs-deletion">- fiber.child: ç¬¬ä¸€ä¸ªå­ fiber é“¾æ¥ï¼ˆæ·±åº¦ä¼˜å…ˆå¤„ç†é¡ºåºï¼‰ã€‚</span>
<span class="hljs-deletion">- fiber.sibling: å…„å¼Ÿ fiber é“¾æ¥ï¼ˆä»¥æ”¯æŒå¹¿åº¦ä¸Šçš„é¡ºåºå¤„ç†ï¼‰ã€‚</span>
è®¾è®¡è¯´æ˜ï¼ˆç®€è¦ï¼‰ï¼š
<span class="hljs-deletion">- ä¸ºæ”¯æŒé¡µé¢å“åº”æ€§ï¼Œæ¸²æŸ“ä»»åŠ¡è¢«æ‹†åˆ†ä¸ºå¤šä¸ªå°çš„å·¥ä½œå•å…ƒï¼ˆfiberï¼‰ï¼Œå¹¶é€šè¿‡ requestIdleCallback çš„ç©ºé—²æ—¶é—´ç‰‡æ‰§è¡Œã€‚</span>
<span class="hljs-deletion">- render é˜¶æ®µåªè´Ÿè´£æ„å»º DOM èŠ‚ç‚¹å¹¶å»ºç«‹ fiber é“¾è¡¨ï¼ˆdepth-first æ„å»ºï¼‰ï¼ŒçœŸæ­£çš„ DOM æ’å…¥åœ¨ commit é˜¶æ®µä¸€æ¬¡æ€§å®Œæˆã€‚</span>
<span class="hljs-deletion">- ç›®å‰æœª</span>
</code></pre>
<p>JavaScript</p>
<ol start="2">
<li>ReactDom.js ä½œç”¨ï¼šåˆ›å»ºæ ¹èŠ‚ç‚¹</li>
</ol>
<ul>
<li><strong>createRoot()</strong> : åˆ›å»ºæ ¹èŠ‚ç‚¹ï¼Œæä¾›æ¸²æŸ“æ¥å£</li>
</ul>
<ol start="3">
<li>fiberUtils.js ä½œç”¨</li>
</ol>
<ul>
<li><strong>commitWork()</strong> : é€’å½’æŒ‚è½½ Fiber æ ‘åˆ°çœŸå® DOM</li>
</ul>

<pre><code class="hljs language-sql" lang="sql">åŠŸèƒ½ï¼šå®ç° Fiber æäº¤é˜¶æ®µçš„æ“ä½œï¼ˆ<span class="hljs-keyword">commit</span>ï¼‰ï¼ŒæŠŠ render é˜¶æ®µæ„å»ºçš„ fiber æ ‘è½¬ä¸ºçœŸå® DOM ç»“æ„ã€‚
è¯´æ˜ï¼š<span class="hljs-keyword">commit</span> é˜¶æ®µçš„æ ¸å¿ƒæ˜¯æŠŠå·²å­˜åœ¨ä¸”æ­£ç¡®è®¾ç½® props<span class="hljs-operator">/</span>dom çš„ fiber èŠ‚ç‚¹æ’å…¥æ–‡æ¡£ä¸­ã€‚è¯¥æ¨¡å—å°†æäº¤é€»è¾‘å•ç‹¬æŠ½ç¦»ï¼Œ
ä»¥ä¾¿è®©æ¸²æŸ“é€»è¾‘å’Œæäº¤é€»è¾‘èŒè´£åˆ†ç¦»ï¼Œä¸”æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚
</code></pre>
<p>JavaScript</p>
<ol start="4">
<li>domUtils.js</li>
</ol>
<ul>
<li><strong>createDom()</strong> : åˆ›å»ºçœŸå® DOM èŠ‚ç‚¹</li>
</ul>

<ul>
<li><strong>updateProperties()</strong> : æ›´æ–° DOM å±æ€§</li>
</ul>

<ul>
<li><strong>appendDomToRootContainer()</strong> : DOM æŒ‚è½½é€»è¾‘</li>
</ul>

<pre><code class="hljs language-diff" lang="diff">åŠŸèƒ½æ¦‚è§ˆï¼š
<span class="hljs-deletion">- æœ¬æ–‡ä»¶åŒ…å«ä¸çœŸå® DOM æ“ä½œç›¸å…³çš„çº¯å·¥å…·å‡½æ•°ï¼Œè´Ÿè´£åœ¨ render/commit é˜¶æ®µå¤„ç† DOM çš„åˆ›å»ºã€å±æ€§æ›´æ–°ä¸çˆ¶å®¹å™¨æŒ‚è½½é€»è¾‘ã€‚</span>
<span class="hljs-deletion">- æŠŠè¿™äº›ä¸å‰¯ä½œç”¨ç›¸å…³çš„ç»†èŠ‚æŠ½è±¡åˆ°ç‹¬ç«‹æ¨¡å—ï¼Œèƒ½ä½¿ä¸»æ¸²æŸ“é€»è¾‘æ›´ç®€æ´ä¸”æ›´å®¹æ˜“æµ‹è¯•ã€‚</span>
çº¦æŸä¸è¯´æ˜ï¼š
<span class="hljs-deletion">- è¿™äº›å‡½æ•°ä¼šç›´æ¥æ“ä½œæµè§ˆå™¨ DOMï¼Œå› æ­¤å®ƒä»¬çš„å‰¯ä½œç”¨åº”åªåœ¨ commit é˜¶æ®µæ‰§è¡Œã€‚</span>
<span class="hljs-deletion">- updateProperties éå¸¸åŸºç¡€ï¼šä»…ç›´æ¥æŠŠ props çš„å­—æ®µï¼ˆé childrenï¼‰èµ‹å€¼åˆ°å…ƒç´ ä¸Šï¼Œæœªåšå·®åˆ†ã€äº‹ä»¶ç»‘å®šå¤„ç†æˆ–æ ·å¼åˆå¹¶ï¼ˆè¿™äº›ä¸ºåç»­åŠŸèƒ½ï¼‰ã€‚</span>
</code></pre>
<p>JavaScript</p>
<ol start="5">
<li>childrenUtils.js</li>
</ol>
<ul>
<li><strong>normalizeChildren()</strong> : è§„èŒƒåŒ– children æ•°ç»„</li>
</ul>

<ul>
<li>å¤„ç†å„ç§è¾“å…¥ç±»å‹ï¼ˆundefinedã€å•å€¼ã€æ•°ç»„ï¼‰</li>
</ul>

<ul>
<li>æ‰å¹³åŒ–åµŒå¥—æ•°ç»„</li>
</ul>

<ul>
<li>å°†æ–‡æœ¬èŠ‚ç‚¹è½¬æ¢ä¸º TEXT_ELEMENT ç»“æ„</li>
</ul>

<pre><code class="hljs language-typescript" lang="typescript">åŠŸèƒ½ï¼šè§„èŒƒåŒ– children åˆ—è¡¨ï¼Œè¿”å›ä¸€ä¸ªæ‰å¹³åŒ–ä¸”ç»Ÿä¸€ç»“æ„çš„ children æ•°ç»„ï¼ˆä¾¿äºåç»­æ„å»º fiberï¼‰
è¿™ä¸ªå·¥å…·åšäº†ä¸‹åˆ—å·¥ä½œï¼š
<span class="hljs-number">1</span>) æ¥å—å„ç§å¯èƒ½çš„ children è¾“å…¥å½¢æ€ï¼š
   - <span class="hljs-literal">undefined</span> / <span class="hljs-literal">null</span>
   - å•ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆ<span class="hljs-title class_">VNode</span>ï¼‰
   - å•ä¸ªåŸå§‹å€¼ï¼ˆ<span class="hljs-built_in">string</span> / <span class="hljs-built_in">number</span>ï¼‰
   - æ•°ç»„ï¼ˆå¯èƒ½åµŒå¥—ï¼‰
<span class="hljs-number">2</span>) å°† children è§„èŒƒæˆä¸€ä¸ªæ‰å¹³æ•°ç»„ï¼Œç§»é™¤ <span class="hljs-literal">null</span>/<span class="hljs-literal">undefined</span>
<span class="hljs-number">3</span>) å°†åŸå§‹æ–‡æœ¬ï¼ˆ<span class="hljs-built_in">string</span> / <span class="hljs-built_in">number</span>ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªç»Ÿä¸€çš„ <span class="hljs-variable constant_">TEXT_ELEMENT</span> è™šæ‹ŸèŠ‚ç‚¹ï¼Œ
   ä»¥ä¾¿åç»­çš„ createDom / props å¤„ç†ä¸€è‡´
è¿”å›å€¼ï¼šä¸€ä¸ªæ ‡å‡†åŒ–çš„ children æ•°ç»„ï¼ˆæ‰€æœ‰é¡¹éƒ½ä¸º <span class="hljs-title class_">VNode</span> æ ·å¼å¯¹è±¡ï¼Œæˆ–æ•´ä½“ä¸ºç©ºæ•°ç»„ï¼‰
è®¾è®¡æ³¨æ„ç‚¹ï¼š
- æ­¤å¤„æ²¡æœ‰æ·±åº¦æ‹·è´ children å¯¹è±¡ï¼Œå› æ­¤ä¼ å…¥çš„å¯¹è±¡å¼•ç”¨ä¼šä¿ç•™ã€‚
- å¯¹äºéå¸¸æ·±/å¤§çš„ children æ•°ç»„ï¼Œ<span class="hljs-title function_">flat</span>(<span class="hljs-title class_">Infinity</span>) å¯èƒ½å¼•å‘æ€§èƒ½é—®é¢˜ï¼Œç”Ÿäº§ä»£ç ä¸­åº”ä½¿ç”¨æ›´é«˜æ•ˆçš„è¿­ä»£å™¨æˆ–é™åˆ¶å±‚çº§ã€‚
</code></pre>
<p>JavaScript</p>
<h3 data-id="heading-0">æ•´ä½“æ¸²æŸ“æµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13abf7b537fd4e96b125f0433b927f66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9saW5f5rWp6ZyW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764434828&amp;x-signature=CNm4qsiK8xN59GOg6Kh7ZB%2BPdW4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">performUnitOfWork è¯¦ç»†æµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7340e0c8a65c42b2a6dd1247318ad2a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9saW5f5rWp6ZyW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764434828&amp;x-signature=KIP70%2FXAWzqhW3JuOZR6MVQklig%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">commitWork æäº¤æµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f8de6f7e4e8495394a12eac66fbe655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9saW5f5rWp6ZyW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764434828&amp;x-signature=wAuGacAzcZZZ3oAHyIeSYDzM%2Fro%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">childrenè§„èŒƒåŒ–æµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f34ddf26b1f4e22abbbcf76342a30f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9saW5f5rWp6ZyW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764434828&amp;x-signature=FFEVsapS0i27Eh3N0%2B1AJu0Bzkg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">è¯¦ç»†æ‰§è¡Œæµç¨‹</h2>
<h3 data-id="heading-5">é˜¶æ®µä¸€ï¼šåˆå§‹åŒ–é˜¶æ®µ</h3>
<ol>
<li><strong>åº”ç”¨å¯åŠ¨</strong></li>
</ol>
<ul>
<li>main.jsx è°ƒç”¨ ReactDom.createRoot(document.getElementById('root'))</li>
</ul>

<ul>
<li>åˆ›å»ºæ ¹å®¹å™¨ï¼Œè¿”å›åŒ…å« render æ–¹æ³•çš„å¯¹è±¡</li>
</ul>
<ol start="2">
<li><strong>å¼€å§‹æ¸²æŸ“</strong></li>
</ol>
<ul>
<li>è°ƒç”¨ root.render(App)</li>
</ul>

<ul>
<li>è§¦å‘ React.render(node, container)</li>
</ul>
<ol start="3">
<li><strong>è®¾ç½®æ ¹ Fiber</strong></li>
</ol>
<ul>
<li>åˆ›å»ºæ ¹ Fiber å¯¹è±¡ï¼Œè®¾ç½® dom ä¸ºå®¹å™¨èŠ‚ç‚¹</li>
</ul>

<ul>
<li>props.children åŒ…å«è¦æ¸²æŸ“çš„ App ç»„ä»¶</li>
</ul>

<ul>
<li>è®¾ç½® nextWorkOfUnit ä¸ºæ ¹ Fiber</li>
</ul>

<ul>
<li>ä¿å­˜ root å¼•ç”¨ç”¨äºåç»­æäº¤</li>
</ul>
<h3 data-id="heading-6">é˜¶æ®µäºŒï¼šè°ƒåº¦å™¨å¯åŠ¨</h3>
<ol>
<li><strong>å·¥ä½œå¾ªç¯åˆå§‹åŒ–</strong></li>
</ol>
<ul>
<li>window.requestIdleCallback(workLoop) å¯åŠ¨è°ƒåº¦</li>
</ul>

<ul>
<li>workLoop æ£€æŸ¥æµè§ˆå™¨ç©ºé—²æ—¶é—´</li>
</ul>
<ol start="2">
<li><strong>æ—¶é—´åˆ‡ç‰‡å¤„ç†</strong></li>
</ol>
<ul>
<li>åœ¨ deadline.timeRemaining() &gt; 1ms æ—¶æŒç»­å¤„ç†</li>
</ul>

<ul>
<li>æ¯æ¬¡å¾ªç¯è°ƒç”¨ performUnitOfWork(nextWorkOfUnit)</li>
</ul>

<ul>
<li>å¤„ç†å®Œæˆåæ›´æ–° nextWorkOfUnit ä¸ºè¿”å›çš„ä¸‹ä¸€ä¸ª Fiber</li>
</ul>
<h3 data-id="heading-7">é˜¶æ®µä¸‰ï¼šRender é˜¶æ®µï¼ˆFiber æ ‘æ„å»ºï¼‰</h3>
<h4 data-id="heading-8">3.1 å¤„ç†å•ä¸ª Fiber å•å…ƒ</h4>
<ol>
<li><strong>Fiber ç±»å‹åˆ¤æ–­</strong></li>
</ol>
<ul>
<li>æ£€æŸ¥æ˜¯å¦ä¸ºå‡½æ•°ç»„ä»¶ï¼ˆtypeof fiber.type === 'function'ï¼‰</li>
</ul>

<ul>
<li>å‡½æ•°ç»„ä»¶ï¼šæ‰§è¡Œå‡½æ•°è·å–è¿”å›çš„ VNodeï¼Œæ›´æ–° fiber.props.children</li>
</ul>

<ul>
<li>æ™®é€šç»„ä»¶ï¼šåˆ›å»º DOM èŠ‚ç‚¹å¹¶è®¾ç½®å±æ€§</li>
</ul>
<ol start="2">
<li><strong>DOM èŠ‚ç‚¹åˆ›å»º</strong></li>
</ol>
<ul>
<li>è°ƒç”¨ createDom(fiber) åˆ›å»ºå¯¹åº”èŠ‚ç‚¹</li>
</ul>

<ul>
<li>TEXT_ELEMENT åˆ›å»º TextNodeï¼Œå…¶ä»–åˆ›å»º Element</li>
</ul>

<ul>
<li>è°ƒç”¨ updateProperties è®¾ç½® DOM å±æ€§</li>
</ul>
<ol start="3">
<li><strong>å­èŠ‚ç‚¹è§„èŒƒåŒ–</strong></li>
</ol>
<ul>
<li>è°ƒç”¨ normalizeChildren(fiber.props.children)</li>
</ul>

<ul>
<li>å¤„ç†å„ç§ children è¾“å…¥æƒ…å†µ</li>
</ul>

<ul>
<li>æ‰å¹³åŒ–æ•°ç»„ï¼Œè½¬æ¢æ–‡æœ¬èŠ‚ç‚¹ä¸º TEXT_ELEMENT</li>
</ul>

<ul>
<li>è¿‡æ»¤ null/undefined èŠ‚ç‚¹</li>
</ul>
<ol start="4">
<li><strong>æ„å»ºå­ Fiber é“¾è¡¨</strong></li>
</ol>
<ul>
<li>éå†è§„èŒƒåŒ–åçš„ children æ•°ç»„</li>
</ul>

<ul>
<li>ä¸ºæ¯ä¸ªå­èŠ‚ç‚¹åˆ›å»ºå¯¹åº”çš„ Fiber</li>
</ul>
<ol start="5">
<li/>
</ol>
<ul>
<li>å»ºç«‹ parent-child-sibling é“¾æ¥å…³ç³»</li>
</ul>

<ul>
<li>ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼šfiber.child = newFiber</li>
</ul>

<ul>
<li>åç»­å­èŠ‚ç‚¹ï¼šprevSibling.sibling = newFiber</li>
</ul>
<h4 data-id="heading-9">3.2 æ·±åº¦ä¼˜å…ˆéå†</h4>
<ol>
<li><strong>è¿”å›ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒ</strong></li>
</ol>
<ul>
<li>ä¼˜å…ˆè¿”å›å­èŠ‚ç‚¹ï¼šif (fiber.child) return fiber.child</li>
</ul>

<ul>
<li>å…¶æ¬¡è¿”å›å…„å¼ŸèŠ‚ç‚¹ï¼šif (fiber.sibling) return fiber.sibling</li>
</ul>

<ul>
<li>å‘ä¸Šå›æº¯æŸ¥æ‰¾çˆ¶çº§çš„å…„å¼ŸèŠ‚ç‚¹</li>
</ul>

<ul>
<li>éå†å®Œæˆè¿”å› null</li>
</ul>
<h3 data-id="heading-10">é˜¶æ®µå››ï¼šCommit é˜¶æ®µï¼ˆDOM æŒ‚è½½ï¼‰</h3>
<h4 data-id="heading-11">4.1 æäº¤å‡†å¤‡</h4>
<ul>
<li>å½“ nextWorkOfUnit ä¸º null ä¸” root å­˜åœ¨æ—¶</li>
</ul>

<ul>
<li>è°ƒç”¨ commitRoot() è¿›å…¥æäº¤é˜¶æ®µ</li>
</ul>
<h4 data-id="heading-12">4.2 é€’å½’æŒ‚è½½ DOM</h4>
<ol>
<li><strong>commitWork æ‰§è¡Œ</strong></li>
</ol>
<ul>
<li>æ£€æŸ¥å½“å‰ Fiber æ˜¯å¦æœ‰ DOM èŠ‚ç‚¹</li>
</ul>

<ul>
<li>æŸ¥æ‰¾æœ€è¿‘çš„æœ‰ DOM çš„çˆ¶èŠ‚ç‚¹ï¼ˆè·³è¿‡å‡½æ•°ç»„ä»¶ï¼‰</li>
</ul>

<ul>
<li>æ‰§è¡Œ parentFiber.dom.appendChild(fiber.dom)</li>
</ul>
<ol start="2">
<li><strong>æ·±åº¦ä¼˜å…ˆæŒ‚è½½</strong></li>
</ol>
<ul>
<li>å…ˆé€’å½’æŒ‚è½½å­èŠ‚ç‚¹ï¼šcommitWork(fiber.child)</li>
</ul>

<ul>
<li>å†é€’å½’æŒ‚è½½å…„å¼ŸèŠ‚ç‚¹ï¼šcommitWork(fiber.sibling)</li>
</ul>
<h4 data-id="heading-13">4.3 å®Œæˆæ¸²æŸ“</h4>
<ul>
<li>æ‰€æœ‰ DOM èŠ‚ç‚¹æŒ‚è½½å®Œæˆ</li>
</ul>

<ul>
<li>æ¸…ç©º root å¼•ç”¨</li>
</ul>

<ul>
<li>æ¸²æŸ“æµç¨‹ç»“æŸ</li>
</ul>
<h2 data-id="heading-14">å››ã€å…³é”®æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-15">Fiber èŠ‚ç‚¹ç»“æ„ï¼š</h3>
<p>javascript</p>
<pre><code class="hljs language-yaml" lang="yaml">{
  <span class="hljs-attr">type:</span> <span class="hljs-string">'div'</span> <span class="hljs-string">|</span> <span class="hljs-string">'TEXT_ELEMENT'</span> <span class="hljs-string">|</span> <span class="hljs-string">Function</span>,
  <span class="hljs-attr">props:</span> { <span class="hljs-attr">children:</span> [], <span class="hljs-string">...attributes</span> },
  <span class="hljs-attr">dom:</span> <span class="hljs-string">HTMLElement</span> <span class="hljs-string">|</span> <span class="hljs-string">Text</span>,
  <span class="hljs-attr">parent:</span> <span class="hljs-string">Fiber</span>,
  <span class="hljs-attr">child:</span> <span class="hljs-string">Fiber</span>,
  <span class="hljs-attr">sibling:</span> <span class="hljs-string">Fiber</span>
}
</code></pre>
<p>Plain Text</p>
<h3 data-id="heading-16">è™šæ‹Ÿ DOM ç»“æ„ï¼š</h3>
<p>javascript</p>
<pre><code class="hljs language-css" lang="css">// å…ƒç´ èŠ‚ç‚¹
{ type: <span class="hljs-string">'div'</span>, props: { id: <span class="hljs-string">'app'</span>, children: [...] } }


// æ–‡æœ¬èŠ‚ç‚¹  
{ type: <span class="hljs-string">'TEXT_ELEMENT'</span>, props: { nodeValue: <span class="hljs-string">'text'</span>, children: [] } }
</code></pre>
<p>Plain Text</p>
<h2 data-id="heading-17">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-18">1. æ—¶é—´åˆ‡ç‰‡è°ƒåº¦</h3>
<ul>
<li>ä½¿ç”¨ requestIdleCallback é¿å…é˜»å¡ä¸»çº¿ç¨‹</li>
</ul>

<ul>
<li>å°†æ¸²æŸ“ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå·¥ä½œå•å…ƒ</li>
</ul>

<ul>
<li>åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ®µæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-19">2. é˜¶æ®µåˆ†ç¦»è®¾è®¡</h3>
<ul>
<li><strong>Render é˜¶æ®µ</strong>ï¼šçº¯è®¡ç®—ï¼Œæ„å»º Fiber æ ‘ï¼Œä¸æ“ä½œ DOM</li>
</ul>

<ul>
<li><strong>Commit é˜¶æ®µ</strong>ï¼šæ‰¹é‡ DOM æ“ä½œï¼Œé¿å…é¢‘ç¹é‡æ’é‡ç»˜</li>
</ul>
<h3 data-id="heading-20">3. é“¾è¡¨æ•°æ®ç»“æ„</h3>
<ul>
<li>ä½¿ç”¨ childã€sibling æŒ‡é’ˆæ„å»ºæ ‘å½¢ç»“æ„</li>
</ul>

<ul>
<li>æ”¯æŒé«˜æ•ˆçš„æ·±åº¦ä¼˜å…ˆéå†</li>
</ul>

<ul>
<li>ä¾¿äºæš‚åœå’Œæ¢å¤æ¸²æŸ“ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-21">4. ç»Ÿä¸€èŠ‚ç‚¹å¤„ç†</h3>
<ul>
<li>æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬æ–‡æœ¬ï¼‰éƒ½è½¬æ¢ä¸ºç»Ÿä¸€ç»“æ„</li>
</ul>

<ul>
<li>ç®€åŒ–åç»­å¤„ç†é€»è¾‘</li>
</ul>

<ul>
<li>æ”¯æŒå‡½æ•°ç»„ä»¶å’Œæ™®é€šç»„ä»¶</li>
</ul>
<h3 data-id="heading-22">5. æ¨¡å—åŒ–è®¾è®¡</h3>
<ul>
<li>æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€æ˜ç¡®</li>
</ul>

<ul>
<li>å·¥å…·å‡½æ•°ç‹¬ç«‹ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤</li>
</ul>

<ul>
<li>æ¸…æ™°çš„ä¾èµ–å…³ç³»å’Œæ•°æ®æµå‘</li>
</ul>
<h2 data-id="heading-23">å…­ã€æ‰©å±•æ€§è€ƒè™‘</h2>
<p>å½“å‰æ¶æ„ä¸ºåç»­åŠŸèƒ½æ‰©å±•æä¾›äº†è‰¯å¥½åŸºç¡€ï¼Œåç»­éœ€è¦åšè¿™äº›ï¼š</p>
<ul>
<li><strong>Diff ç®—æ³•</strong>ï¼šå¯åœ¨ performUnitOfWork ä¸­å®ç°èŠ‚ç‚¹æ¯”è¾ƒ</li>
</ul>

<ul>
<li><strong>äº‹ä»¶ç³»ç»Ÿ</strong>ï¼šåœ¨ updateProperties ä¸­æ·»åŠ äº‹ä»¶å¤„ç†</li>
</ul>

<ul>
<li><strong>Hooks æ”¯æŒ</strong>ï¼šåœ¨å‡½æ•°ç»„ä»¶å¤„ç†æ—¶ç»´æŠ¤çŠ¶æ€</li>
</ul>

<ul>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong>ï¼šæ·»åŠ å¼‚å¸¸æ•è·å’Œå¤„ç†æœºåˆ¶React Fiber æ¸²æŸ“å™¨æ ¸å¿ƒé€»è¾‘è¯¦è§£</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0 åˆ° 1 å®ç° LocalStorage å¾…åŠæ¸…å•ï¼šCSS è¿›é˜¶ + å‰ç«¯å·¥ç¨‹åŒ–æ€æƒ³å®è·µ]]></title>    <link>https://juejin.cn/post/7575133880435687475</link>    <guid>https://juejin.cn/post/7575133880435687475</guid>    <pubDate>2025-11-23T02:21:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435687475" data-draft-id="7575083657993732123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0 åˆ° 1 å®ç° LocalStorage å¾…åŠæ¸…å•ï¼šCSS è¿›é˜¶ + å‰ç«¯å·¥ç¨‹åŒ–æ€æƒ³å®è·µ"/> <meta itemprop="keywords" content="CSS,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-11-23T02:21:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0 åˆ° 1 å®ç° LocalStorage å¾…åŠæ¸…å•ï¼šCSS è¿›é˜¶ + å‰ç«¯å·¥ç¨‹åŒ–æ€æƒ³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:21:10.000Z" title="Sun Nov 23 2025 02:21:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒLocalStorage æ˜¯æµè§ˆå™¨æä¾›çš„æ ¸å¿ƒæœ¬åœ°å­˜å‚¨æ–¹æ¡ˆï¼Œè€Œ CSS å¸ƒå±€ä¸å·¥ç¨‹åŒ–ç¼–ç åˆ™æ˜¯æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡çš„å…³é”®ã€‚æœ¬æ–‡å°†ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œå¸¦å¤§å®¶ä»é›¶å®ç°ä¸€ä¸ªå¯æŒä¹…åŒ–çš„å¾…åŠæ¸…å•ï¼ŒåŒæ—¶æ‹†è§£ CSS ç»§æ‰¿ / å¼¹æ€§å¸ƒå±€çš„æ ¸å¿ƒç”¨æ³•ï¼Œä»¥åŠå‰ç«¯å‡½æ•°å¼å°è£…çš„å·¥ç¨‹åŒ–æ€æƒ³ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹é¢„çƒ­ï¼šå…ˆææ‡‚è¿™ 3 ä¸ªå…³é”®æŠ€æœ¯</h2>
<p>åœ¨åŠ¨æ‰‹å†™ä»£ç å‰ï¼Œæˆ‘ä»¬å…ˆæ¢³ç†æ¡ˆä¾‹ä¸­æ¶‰åŠçš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼Œå¸®å¤§å®¶æ‰“é€šçŸ¥è¯†ç›²åŒºï¼š</p>
<h3 data-id="heading-1">1. LocalStorageï¼šæµè§ˆå™¨çš„ã€Œæ°¸ä¹…å‚¨ç‰©æŸœã€</h3>
<ul>
<li>
<p><strong>å­˜å‚¨ä½ç½®</strong>ï¼šæµè§ˆå™¨æœ¬åœ°ï¼Œä¸æœåŠ¡å™¨æ— å…³</p>
</li>
<li>
<p><strong>å­˜å‚¨ç‰¹æ€§</strong>ï¼šæ°¸ä¹…å­˜å‚¨ï¼ˆé™¤éæ‰‹åŠ¨æ¸…é™¤æˆ–ä»£ç åˆ é™¤ï¼‰ï¼Œé¡µé¢åˆ·æ–° / å…³é—­åæ•°æ®ä¸ä¸¢å¤±</p>
</li>
<li>
<p><strong>å­˜å‚¨è§„åˆ™</strong>ï¼šä»…æ”¯æŒÂ <code>key-value</code>Â é”®å€¼å¯¹ï¼Œä¸”å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ˆå¯¹è±¡ / æ•°ç»„éœ€ç”¨Â <code>JSON.stringify()</code>Â åºåˆ—åŒ–ï¼‰</p>
</li>
<li>
<p><strong>æ ¸å¿ƒ API</strong>ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜æ•°æ®</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'key'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(æ•°æ®));
<span class="hljs-comment">// å–æ•°æ®ï¼ˆéœ€ååºåˆ—åŒ–ï¼‰</span>
<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'key'</span>));
<span class="hljs-comment">// åˆ æ•°æ®ï¼ˆå•ä¸ª/å…¨éƒ¨ï¼‰</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'key'</span>);
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
</code></pre>
</li>
</ul>
<h3 data-id="heading-2">2. CSS å…³é”®ç‰¹æ€§ï¼šè¿™äº›ç»†èŠ‚èƒ½å°‘å†™ 80% å†—ä½™ä»£ç </h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰ç»§æ‰¿æ€§ï¼šä¸æ˜¯æ‰€æœ‰å±æ€§éƒ½èƒ½ã€Œå­æ‰¿çˆ¶ä¸šã€</h4>
<ul>
<li>
<p><strong>å¯ç»§æ‰¿å±æ€§</strong>ï¼š<code>font-size</code>ã€<code>color</code>ã€<code>text-align</code>Â ç­‰æ–‡æœ¬ç›¸å…³å±æ€§ï¼ˆå­å…ƒç´ è‡ªåŠ¨ç»§æ‰¿çˆ¶å…ƒç´ æ ·å¼ï¼‰</p>
</li>
<li>
<p><strong>ä¸å¯ç»§æ‰¿å±æ€§</strong>ï¼š<code>background</code>ã€<code>width</code>ã€<code>height</code>ã€<code>border</code>Â ç­‰å¸ƒå±€ / ç›’æ¨¡å‹ç›¸å…³å±æ€§ï¼ˆéœ€æ‰‹åŠ¨è®¾ç½®ï¼‰</p>
</li>
<li>
<p><strong>å®ç”¨æŠ€å·§</strong>ï¼šç”¨Â <code>inherit</code>Â å¼ºåˆ¶ç»§æ‰¿çˆ¶å±æ€§ï¼Œæ¯”å¦‚è®©å­å…ƒç´ é«˜åº¦è·Ÿéšçˆ¶å…ƒç´ ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">height</span>: inherit; <span class="hljs-comment">/* ç»§æ‰¿çˆ¶å…ƒç´  height */</span>
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰outline ä¸ overflowï¼šç»†èŠ‚ä¼˜åŒ–ç¥å™¨</h4>
<ul>
<li><strong>outline</strong>ï¼šå…ƒç´ è½®å»“ï¼Œç±»ä¼¼Â <code>border</code>Â ä½†ä¸å æ®ç›’æ¨¡å‹ç©ºé—´ï¼ˆé€‚åˆè¡¨å•èšç„¦æ ·å¼ï¼‰</li>
<li><strong>overflow</strong>ï¼šæ§åˆ¶å­å…ƒç´ è¶…å‡ºçˆ¶å…ƒç´ æ—¶çš„è¡¨ç°ï¼ˆ<code>hidden</code>Â éšè—æº¢å‡ºã€<code>auto</code>Â è‡ªåŠ¨æ»šåŠ¨ï¼‰</li>
</ul>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰Flex å¸ƒå±€ï¼šå¿«é€Ÿå®ç°å±…ä¸­ä¸å¯¹é½</h4>
<p>Flex æ˜¯ç°ä»£å¸ƒå±€æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ˜¯ã€Œæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€ï¼Œåªéœ€ 3 è¡Œä»£ç å®ç°å…ƒç´ å±…ä¸­ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* å¼€å¯ Flex å¸ƒå±€ */</span>
  <span class="hljs-attribute">justify-content</span>: center; <span class="hljs-comment">/* ä¸»è½´ï¼ˆæ°´å¹³ï¼‰å±…ä¸­ */</span>
  <span class="hljs-attribute">align-items</span>: center; <span class="hljs-comment">/* äº¤å‰è½´ï¼ˆå‚ç›´ï¼‰å±…ä¸­ */</span>
}
</code></pre>
<h3 data-id="heading-6">3. å‰ç«¯å·¥ç¨‹åŒ–ï¼šæ‹’ç»æµç¨‹å¼ä»£ç ï¼Œæ‹¥æŠ±å‡½æ•°å°è£…</h3>
<p>å½“ä»£ç è¶…è¿‡ 10 è¡Œï¼Œå°±è¯¥è€ƒè™‘å°è£…å‡½æ•°ï¼æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>å¤ç”¨æ€§ï¼šåŒä¸€é€»è¾‘å¤šå¤„è°ƒç”¨ï¼Œå‡å°‘å†—ä½™</li>
<li>å¯ç»´æŠ¤æ€§ï¼šéšè—å®ç°ç»†èŠ‚ï¼Œä¿®æ”¹æ—¶åªéœ€æ”¹å‡½æ•°å†…éƒ¨</li>
<li>å¯è¯»æ€§ï¼šå‡½æ•°åå³åŠŸèƒ½ï¼Œä»£ç é€»è¾‘æ›´æ¸…æ™°</li>
</ul>
<h2 data-id="heading-7">äºŒã€å®æˆ˜ï¼šå®ç° LocalStorage å¾…åŠæ¸…å•</h2>
<h3 data-id="heading-8">1. é¡¹ç›®ç»“æ„</h3>
<p>plaintext</p>
<pre><code class="hljs language-bash" lang="bash">todo-list/
â”œâ”€â”€ common.css  <span class="hljs-comment"># æ ·å¼æ–‡ä»¶</span>
â””â”€â”€ index.html  <span class="hljs-comment"># ç»“æ„+é€»è¾‘æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-9">2. æ ·å¼æ–‡ä»¶ï¼šcommon.css</h3>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€é‡ç½®ï¼šç»Ÿä¸€ç›’æ¨¡å‹ */</span>
<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">box-sizing</span>: border-box;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>; <span class="hljs-comment">/* å æ»¡è§†å£é«˜åº¦ */</span>
  <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* é¡µé¢æ•´ä½“å±…ä¸­ */</span>
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">text-align</span>: center; <span class="hljs-comment">/* æ–‡æœ¬å±…ä¸­ */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}

*,
*<span class="hljs-selector-pseudo">::before</span>,
*<span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">box-sizing</span>: inherit; <span class="hljs-comment">/* ç»§æ‰¿ç›’æ¨¡å‹ */</span>
}

<span class="hljs-comment">/* å®¹å™¨æ ·å¼ */</span>
<span class="hljs-selector-class">.wrapper</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">350px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>); <span class="hljs-comment">/* å¤–å‘å…‰æ•ˆæœ */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-tag">h2</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">200</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}

<span class="hljs-comment">/* å¾…åŠåˆ—è¡¨æ ·å¼ */</span>
<span class="hljs-selector-class">.plates</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">text-align</span>: left;
  <span class="hljs-attribute">list-style</span>: none;
}

<span class="hljs-selector-class">.plates</span> <span class="hljs-selector-tag">li</span> {
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">100</span>;
  <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* å¤é€‰æ¡†ä¸æ–‡æœ¬åŒè¡Œ */</span>
  <span class="hljs-attribute">align-items</span>: center;
}

<span class="hljs-selector-class">.plates</span> <span class="hljs-selector-tag">label</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* æ–‡æœ¬å æ»¡å‰©ä½™ç©ºé—´ */</span>
  <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-comment">/* é¼ æ ‡æ‚¬æµ®å˜æŒ‡é’ˆ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#444</span>;
}

<span class="hljs-comment">/* è‡ªå®šä¹‰å¤é€‰æ¡†æ ·å¼ */</span>
<span class="hljs-selector-class">.plates</span> <span class="hljs-selector-tag">input</span> {
  <span class="hljs-attribute">display</span>: none; <span class="hljs-comment">/* éšè—åŸç”Ÿå¤é€‰æ¡† */</span>
}

<span class="hljs-selector-class">.plates</span> <span class="hljs-selector-tag">input</span> + <span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">"â¬œï¸"</span>;
  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
}

<span class="hljs-selector-class">.plates</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span> + <span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">"âœ…"</span>; <span class="hljs-comment">/* é€‰ä¸­æ—¶åˆ‡æ¢å›¾æ ‡ */</span>
}

<span class="hljs-comment">/* è¡¨å•æ ·å¼ */</span>
<span class="hljs-selector-class">.add-items</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-comment">/* è¾“å…¥æ¡†ä¸æŒ‰é’®é—´è· */</span>
}

<span class="hljs-selector-class">.add-items</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"text"</span>]</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">outline</span>: <span class="hljs-number">3px</span> solid transparent;
  <span class="hljs-attribute">transition</span>: outline <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.add-items</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"text"</span>]</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">outline</span>: <span class="hljs-number">3px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>, <span class="hljs-number">211</span>, <span class="hljs-number">0.8</span>); <span class="hljs-comment">/* èšç„¦é«˜äº® */</span>
}

<span class="hljs-selector-class">.add-items</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"submit"</span>]</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>, <span class="hljs-number">211</span>, <span class="hljs-number">0.8</span>);
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.add-items</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"submit"</span>]</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">14</span>, <span class="hljs-number">14</span>, <span class="hljs-number">211</span>, <span class="hljs-number">1</span>);
}
</code></pre>
<h3 data-id="heading-10">3. æ ¸å¿ƒæ–‡ä»¶ï¼šindex.html</h3>
<p>html</p>
<p>é¢„è§ˆ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>LocalStorage å¾…åŠæ¸…å•<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"./common.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>LOCAL TAPAS<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"plates"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Loading Tapas...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"add-items"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥å¾…åŠäº‹é¡¹"</span> 
        <span class="hljs-attr">required</span>
        <span class="hljs-attr">name</span>=<span class="hljs-string">"item"</span>
      &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"+ æ·»åŠ äº‹é¡¹"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// 1. è·å– DOM å…ƒç´ </span>
    <span class="hljs-keyword">const</span> addItemsForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.add-items'</span>);
    <span class="hljs-keyword">const</span> itemsList = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.plates'</span>);
    <span class="hljs-comment">// 2. ä» LocalStorage å–æ•°æ®ï¼ˆæ— åˆ™åˆå§‹åŒ–ç©ºæ•°ç»„ï¼‰</span>
    <span class="hljs-keyword">const</span> items = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>)) || [];

    <span class="hljs-comment">/**
     * æ¸²æŸ“å¾…åŠåˆ—è¡¨
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">plates</span> - å¾…åŠæ•°ç»„
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Element</span>} <span class="hljs-variable">platesList</span> - åˆ—è¡¨ DOM å…ƒç´ 
     */</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">populateList</span>(<span class="hljs-params">plates = [], platesList</span>) {
      <span class="hljs-comment">// æ•°ç»„ map ç”Ÿæˆ DOM å­—ç¬¦ä¸²ï¼Œjoin æ‹¼æ¥ï¼ˆé¿å…é€—å·åˆ†éš”ï¼‰</span>
      platesList.<span class="hljs-property">innerHTML</span> = plates.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">plate, index</span>) =&gt;</span> <span class="hljs-string">`
        &lt;li&gt;
          &lt;input 
            type="checkbox" 
            data-index="<span class="hljs-subst">${index}</span>" 
            id="item<span class="hljs-subst">${index}</span>"
            <span class="hljs-subst">${plate.done ? <span class="hljs-string">'checked'</span> : <span class="hljs-string">''</span>}</span>
          /&gt;
          &lt;label for="item<span class="hljs-subst">${index}</span>"&gt;<span class="hljs-subst">${plate.text}</span>&lt;/label&gt;
        &lt;/li&gt;
      `</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
    }

    <span class="hljs-comment">/**
     * æ·»åŠ å¾…åŠäº‹é¡¹
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Event</span>} <span class="hljs-variable">event</span> - è¡¨å•æäº¤äº‹ä»¶
     */</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params">event</span>) {
      event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º</span>
      <span class="hljs-comment">// è·å–è¾“å…¥æ¡†å€¼ï¼ˆå»ç©ºæ ¼ï¼‰</span>
      <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'[name=item]'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
      <span class="hljs-keyword">if</span> (!text) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ç©ºå€¼ä¸æ·»åŠ </span>

      <span class="hljs-comment">// æ–°å¢å¾…åŠå¯¹è±¡</span>
      <span class="hljs-keyword">const</span> newItem = {
        text,
        <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// é»˜è®¤æœªå®Œæˆ</span>
      };

      items.<span class="hljs-title function_">push</span>(newItem);
      <span class="hljs-comment">// å­˜å…¥ LocalStorageï¼ˆåºåˆ—åŒ–æ•°ç»„ï¼‰</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(items));
      <span class="hljs-comment">// é‡æ–°æ¸²æŸ“åˆ—è¡¨</span>
      <span class="hljs-title function_">populateList</span>(items, itemsList);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>(); <span class="hljs-comment">// é‡ç½®è¡¨å•</span>
    }

    <span class="hljs-comment">/**
     * åˆ‡æ¢å¾…åŠå®ŒæˆçŠ¶æ€
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Event</span>} <span class="hljs-variable">event</span> - ç‚¹å‡»äº‹ä»¶
     */</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleDone</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;
      <span class="hljs-comment">// åªå¤„ç†å¤é€‰æ¡†çš„ç‚¹å‡»</span>
      <span class="hljs-keyword">if</span> (target.<span class="hljs-property">tagName</span> !== <span class="hljs-string">'INPUT'</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// è·å–æ•°æ®ç´¢å¼•ï¼ˆä» data-index å±æ€§ï¼‰</span>
      <span class="hljs-keyword">const</span> index = target.<span class="hljs-property">dataset</span>.<span class="hljs-property">index</span>;
      <span class="hljs-comment">// åˆ‡æ¢å®ŒæˆçŠ¶æ€</span>
      items[index].<span class="hljs-property">done</span> = !items[index].<span class="hljs-property">done</span>;
      <span class="hljs-comment">// æ›´æ–° LocalStorage</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(items));
      <span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
      <span class="hljs-title function_">populateList</span>(items, itemsList);
    }

    <span class="hljs-comment">// 3. ç»‘å®šäº‹ä»¶ç›‘å¬</span>
    addItemsForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, addItem);
    itemsList.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, toggleDone);

    <span class="hljs-comment">// 4. é¡µé¢åŠ è½½æ—¶æ¸²æŸ“åˆ—è¡¨</span>
    <span class="hljs-title function_">populateList</span>(items, itemsList);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€å…³é”®æŠ€æœ¯æ‹†è§£ï¼šä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Ÿ</h2>
<h3 data-id="heading-12">1. LocalStorage æŒä¹…åŒ–é€»è¾‘</h3>
<ul>
<li><strong>åˆå§‹åŒ–</strong>ï¼šé¡µé¢åŠ è½½æ—¶ä»Â <code>localStorage</code>Â è¯»å–Â <code>todos</code>Â æ•°æ®ï¼Œè‹¥ä¸å­˜åœ¨åˆ™åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„</li>
<li><strong>æ–°å¢å¾…åŠ</strong>ï¼šæ·»åŠ åç«‹å³ç”¨Â <code>JSON.stringify()</code>Â åºåˆ—åŒ–æ•°ç»„ï¼Œå­˜å…¥Â <code>localStorage</code></li>
<li><strong>çŠ¶æ€åˆ‡æ¢</strong>ï¼šä¿®æ”¹å¾…åŠå®ŒæˆçŠ¶æ€åï¼ŒåŒæ­¥æ›´æ–°Â <code>localStorage</code>ï¼Œç¡®ä¿åˆ·æ–°åçŠ¶æ€ä¸ä¸¢å¤±</li>
</ul>
<h3 data-id="heading-13">2. CSS è¿›é˜¶æŠ€å·§</h3>
<ul>
<li><strong>ç›’æ¨¡å‹ç»§æ‰¿</strong>ï¼šé€šè¿‡Â <code>box-sizing: inherit</code>Â è®©æ‰€æœ‰å…ƒç´ ï¼ˆåŒ…æ‹¬ä¼ªå…ƒç´ ï¼‰ç»§æ‰¿Â <code>border-box</code>ï¼Œé¿å…è®¡ç®—å®½åº¦æ—¶çš„éº»çƒ¦</li>
<li><strong>Flex å¸ƒå±€å¦™ç”¨</strong>ï¼šé¡µé¢æ•´ä½“å±…ä¸­ã€å¾…åŠé¡¹å¤é€‰æ¡†ä¸æ–‡æœ¬å¯¹é½ã€è¡¨å•è¾“å…¥æ¡†ä¸æŒ‰é’®åŒè¡Œåˆ†å¸ƒï¼Œéƒ½ç”¨ Flex å®ç°ï¼Œç®€æ´é«˜æ•ˆ</li>
<li><strong>è‡ªå®šä¹‰å¤é€‰æ¡†</strong>ï¼šéšè—åŸç”Ÿå¤é€‰æ¡†ï¼Œç”¨Â <code>:before</code>Â ä¼ªå…ƒç´ å®ç°è‡ªå®šä¹‰å›¾æ ‡ï¼Œæå‡è§†è§‰ä½“éªŒ</li>
<li><strong>èšç„¦çŠ¶æ€ä¼˜åŒ–</strong>ï¼šè¾“å…¥æ¡†èšç„¦æ—¶æ·»åŠ è“è‰²è½®å»“ï¼Œæå‡äº¤äº’åé¦ˆ</li>
</ul>
<h3 data-id="heading-14">3. å·¥ç¨‹åŒ–ç¼–ç æ€æƒ³</h3>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰å‡½æ•°å¼å°è£…ï¼šæ‹’ç»æµç¨‹å¼ä»£ç </h4>
<ul>
<li>æŠŠã€Œæ¸²æŸ“åˆ—è¡¨ã€ã€Œæ·»åŠ å¾…åŠã€ã€Œåˆ‡æ¢çŠ¶æ€ã€æ‹†åˆ†ä¸º 3 ä¸ªç‹¬ç«‹å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹</li>
<li>å‡½æ•°å‚æ•°åŒ–ï¼š<code>populateList</code>Â æ¥æ”¶å¾…åŠæ•°ç»„å’Œåˆ—è¡¨ DOM å…ƒç´ ï¼Œå¢å¼ºå¤ç”¨æ€§</li>
<li>é¿å…å…¨å±€å˜é‡æ±¡æŸ“ï¼šæ ¸å¿ƒæ•°æ®Â <code>items</code>Â é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’ï¼Œè€Œéä¾èµ–å…¨å±€å˜é‡</li>
</ul>
<h4 data-id="heading-16">ï¼ˆ2ï¼‰ç»†èŠ‚ä¼˜åŒ–ï¼šæå‡ç”¨æˆ·ä½“éªŒ</h4>
<ul>
<li>è¾“å…¥æ¡†å»ç©ºæ ¼ï¼šç”¨Â <code>trim()</code>Â é¿å…æ·»åŠ ç©ºå¾…åŠ</li>
<li>ç©ºå€¼åˆ¤æ–­ï¼šè¾“å…¥ä¸ºç©ºæ—¶ä¸æ·»åŠ å¾…åŠ</li>
<li>è¡¨å•é‡ç½®ï¼šæ·»åŠ åæ¸…ç©ºè¾“å…¥æ¡†ï¼Œæ–¹ä¾¿è¿ç»­è¾“å…¥</li>
<li>äº‹ä»¶å§”æ‰˜ï¼šç»™åˆ—è¡¨çˆ¶å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè€Œéç»™æ¯ä¸ªå¤é€‰æ¡†ç»‘å®šï¼Œæå‡æ€§èƒ½ï¼ˆå°¤å…¶å¾…åŠè¾ƒå¤šæ—¶ï¼‰</li>
</ul>
<h2 data-id="heading-17">å››ã€æ‰©å±•ä¸ä¼˜åŒ–æ–¹å‘</h2>
<ol>
<li><strong>æ·»åŠ åˆ é™¤åŠŸèƒ½</strong>ï¼šç»™æ¯ä¸ªå¾…åŠé¡¹å¢åŠ åˆ é™¤æŒ‰é’®ï¼Œç‚¹å‡»æ—¶åˆ é™¤å¯¹åº”é¡¹å¹¶æ›´æ–°Â <code>localStorage</code></li>
<li><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šå®ç°ã€Œå…¨é€‰ / å…¨ä¸é€‰ã€ã€Œæ¸…ç©ºå·²å®Œæˆã€åŠŸèƒ½</li>
<li><strong>æ•°æ®æŒä¹…åŒ–ä¼˜åŒ–</strong>ï¼šå°è£…Â <code>localStorage</code>Â æ“ä½œå·¥å…·å‡½æ•°ï¼Œé¿å…é‡å¤å†™Â <code>JSON.stringify</code>Â å’ŒÂ <code>JSON.parse</code></li>
<li><strong>æ ·å¼å‡çº§</strong>ï¼šæ·»åŠ åŠ¨ç”»æ•ˆæœï¼ˆå¦‚å¾…åŠé¡¹æ·»åŠ  / åˆ é™¤æ—¶çš„è¿‡æ¸¡åŠ¨ç”»ï¼‰</li>
<li><strong>å“åº”å¼ä¼˜åŒ–</strong>ï¼šé€‚é…ç§»åŠ¨ç«¯ï¼Œä¼˜åŒ–å°å±å¹•ä¸‹çš„å¸ƒå±€</li>
</ol>
<h2 data-id="heading-18">äº”ã€æ€»ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡ä¸€ä¸ªç®€å•çš„å¾…åŠæ¸…å•æ¡ˆä¾‹ï¼Œä¸²è”äº† LocalStorage æœ¬åœ°å­˜å‚¨ã€CSS è¿›é˜¶ç‰¹æ€§å’Œå‰ç«¯å·¥ç¨‹åŒ–ç¼–ç æ€æƒ³ã€‚æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li>LocalStorage æ˜¯å‰ç«¯æŒä¹…åŒ–å­˜å‚¨çš„åŸºç¡€ï¼Œå…³é”®æ˜¯æŒæ¡ã€Œåºåˆ—åŒ– / ååºåˆ—åŒ–ã€æŠ€å·§</li>
<li>CSS ä¸ä»…æ˜¯æ ·å¼ï¼Œåˆç†è¿ç”¨ç»§æ‰¿ã€Flex å¸ƒå±€å’Œä¼ªå…ƒç´ ï¼Œèƒ½å¤§å¹…æå‡å¼€å‘æ•ˆç‡å’Œè§†è§‰ä½“éªŒ</li>
<li>å·¥ç¨‹åŒ–ç¼–ç çš„æ ¸å¿ƒæ˜¯ã€Œæ‹†åˆ†ä¸å°è£…ã€ï¼Œè®©ä»£ç æ›´æ˜“ç»´æŠ¤ã€å¯å¤ç”¨</li>
</ul>
<p>è¿™ä¸ªæ¡ˆä¾‹è™½ç„¶ç®€å•ï¼Œä½†åŒ…å«äº†å‰ç«¯å¼€å‘çš„æ ¸å¿ƒæ€æƒ³ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨ç»ƒä¹ ï¼Œä¹Ÿèƒ½å¸®åŠ©æœ‰ç»éªŒçš„å¼€å‘è€…å·©å›ºåŸºç¡€ã€‚åŠ¨æ‰‹è¯•è¯•æ‰©å±•åŠŸèƒ½ï¼Œè®©å®ƒå˜å¾—æ›´å¼ºå¤§å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°ˆè°ˆæœ€è¿›å­¦ä¹ ï¼ˆä½å»¶è¿Ÿï¼‰ç›´æ’­é¡¹ç›®çš„åå·ä¸æ”¶è·]]></title>    <link>https://juejin.cn/post/7575152891955314688</link>    <guid>https://juejin.cn/post/7575152891955314688</guid>    <pubDate>2025-11-23T02:51:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955314688" data-draft-id="7575152891955298304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°ˆè°ˆæœ€è¿›å­¦ä¹ ï¼ˆä½å»¶è¿Ÿï¼‰ç›´æ’­é¡¹ç›®çš„åå·ä¸æ”¶è·"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T02:51:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç†Šå“¥722"/> <meta itemprop="url" content="https://juejin.cn/user/758013551998826"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°ˆè°ˆæœ€è¿›å­¦ä¹ ï¼ˆä½å»¶è¿Ÿï¼‰ç›´æ’­é¡¹ç›®çš„åå·ä¸æ”¶è·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/758013551998826/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç†Šå“¥722
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:51:03.000Z" title="Sun Nov 23 2025 02:51:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä¸€ç›´åœ¨å­¦ä¹ ä½å»¶è¿Ÿç›´æ’­ç³»ç»Ÿçš„å¼€å‘ï¼Œä»åè®®é€‰å‹åˆ°å…·ä½“å®ç°ï¼Œè¸©è¿‡ä¸å°‘å‘ï¼Œä¹Ÿç§¯ç´¯äº†å¾ˆå¤šç»éªŒã€‚åˆ†äº«ä¸€ä¸‹è¿™æ®µæ—…ç¨‹ä¸­çš„æ€è€ƒå’Œæ”¶è·ï½</p>
<h2 data-id="heading-0">ä¸€ã€ç›´æ’­æ ¸å¿ƒåè®®é€‰å‹ï¼šä»è®¤çŸ¥åˆ°å†³ç­–</h2>
<p>å¼€å‘çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯ç†æ¸…ä¸»æµç›´æ’­åè®®çš„ç‰¹æ€§ï¼Œæ‰¾åˆ°é€‚é…åœºæ™¯çš„æŠ€æœ¯æ–¹å‘ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¯¹æ ¸å¿ƒåè®®çš„æ•´ç†ä¸åˆ†æï¼š</p>
<h3 data-id="heading-1">1. HTTP-FLVï¼šå…¼å®¹æ€§ä¹‹ç‹</h3>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šåŸºäº HTTP åˆ†å—ç¼–ç ä¼ è¾“ FLV å®¹å™¨æ ¼å¼ï¼Œè½»é‡åŒ–ã€æ˜“éƒ¨ç½²ã€‚</p>
<ul>
<li>
<p><strong>å°è£…ä¸ä¼ è¾“</strong>ï¼šFLV ä»…æ”¯æŒ H.264/H.265ï¼ˆè§†é¢‘ï¼‰ã€AAC/MP3ï¼ˆéŸ³é¢‘ï¼‰ï¼Œå°è£…ç®€å•ï¼ˆå¤´éƒ¨ + éŸ³è§†é¢‘ Tagï¼‰ï¼Œè§£ç å»¶è¿Ÿä½ï¼›å€ŸåŠ© HTTP åˆ†å—ç¼–ç å®ç° â€œè¾¹ä¼ è¾¹æ’­â€ï¼Œé»˜è®¤ 80/443 ç«¯å£å¯ç©¿é€é˜²ç«å¢™ã€‚</p>
</li>
<li>
<p><strong>ä¼ è¾“æµç¨‹</strong>ï¼š</p>
<ol>
<li>æ’­æ”¾ç«¯å‘é€<code>GET /live/stream.flv</code>è¯·æ±‚ï¼Œæºå¸¦<code>Accept: */*</code>ï¼›</li>
<li>æœåŠ¡ç«¯å“åº”<code>Transfer-Encoding: chunked</code>ï¼ŒæŒ‰ 1-8KB æ‹†åˆ† FLV æµå¹¶å®æ—¶æ¨é€ã€‚</li>
</ol>
</li>
<li>
<p><strong>å»¶è¿Ÿæ„æˆ</strong>ï¼š</p>
<ul>
<li>ç¼–ç å»¶è¿Ÿï¼ˆ50ms-300msï¼‰ï¼šä¾èµ–æ¨æµç«¯ä½å»¶è¿Ÿé…ç½®ï¼ˆæ—  B å¸§ã€çŸ­ GOPï¼‰ï¼›</li>
<li>æœåŠ¡ç«¯å»¶è¿Ÿï¼ˆ300ms-2sï¼‰ï¼šGOP ç¼“å­˜ / è½¬ç æ˜¯ä¸»å› ï¼ˆä¼˜åŒ–åå¯å‹è‡³ 300ms å†…ï¼‰ï¼›</li>
<li>ä¼ è¾“ + æ’­æ”¾ç«¯å»¶è¿Ÿï¼ˆ400ms-1.9sï¼‰ï¼šHTTP å°è£…å¼€é”€ + æ’­æ”¾å™¨ç¼“å†²ï¼ˆä¼˜åŒ–åå¯è‡³ 0.3-1sï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šâœ… å…¼å®¹æ€§æå¼ºï¼ˆæµè§ˆå™¨ / APP / æœºé¡¶ç›’ï¼‰ã€é…ç½®ç®€å•ã€æ”¯æŒ HTTPSï¼›âŒ åè®®å¼€é”€ç•¥é«˜ã€ä¾èµ– GOP ç¼“å­˜ã€Web ç«¯éœ€ FLV.js è§£æã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. RTMPï¼šä½å»¶è¿Ÿç›´æ’­è€å°†</h3>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šåŸºäº TCP çš„å®æ—¶æ¶ˆæ¯ä¼ è¾“åè®®ï¼Œä¸“ä¸ºéŸ³è§†é¢‘è®¾è®¡ã€‚</p>
<ul>
<li><strong>ä¼ è¾“æœºåˆ¶</strong>ï¼šåˆ†å±‚ç»“æ„ï¼ˆåº”ç”¨å±‚ / æ¶ˆæ¯å±‚ / åè®®å±‚ï¼‰ï¼ŒChunk åˆ†å—ä¼ è¾“å¤§å¸§ï¼Œæ»‘åŠ¨çª—å£æ§æµã€‚</li>
<li><strong>å»¶è¿Ÿä¼˜åŠ¿</strong>ï¼šä¼˜åŒ–åå…¨é“¾è·¯å»¶è¿Ÿ 0.8-2sï¼Œæ¯” HTTP-FLV ä½ 20%-30%ï¼ŒæœåŠ¡ç«¯æ— è½¬ç æ—¶å»¶è¿Ÿå¯å¿½ç•¥ã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šâœ… å»¶è¿Ÿä½ã€é…ç½®ç›´æ¥ã€å…¼å®¹æ€§å¹¿ï¼›âŒ å¼±ç½‘ TCP é‡ä¼ æ˜“å¡é¡¿ã€æ— é»˜è®¤åŠ å¯†ã€Web ç«¯éœ€ Flash æ›¿ä»£æ–¹æ¡ˆã€‚</li>
</ul>
<h3 data-id="heading-3">3. HLS/LL-HLSï¼šè·¨å¹³å°å…¼å®¹é¦–é€‰</h3>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šåˆ‡ç‰‡ä¼ è¾“ + è‡ªé€‚åº”ç ç‡ï¼ŒåŸç”Ÿæ”¯æŒå…¨å¹³å°ã€‚</p>
<ul>
<li><strong>åŸç”Ÿç—›ç‚¹</strong>ï¼šåˆ‡ç‰‡æœºåˆ¶å¯¼è‡´å»¶è¿Ÿ 10-30sï¼ˆåˆ‡ç‰‡ç”Ÿæˆ + ç¼“å­˜ + æ’­æ”¾ç¼“å†²ï¼‰ï¼›</li>
<li><strong>LL-HLS ä¼˜åŒ–</strong>ï¼šç¼©çŸ­åˆ‡ç‰‡è‡³ 0.5-2sã€åˆ†ç‰‡ä¼ è¾“ Chunkã€å®æ—¶æ›´æ–° m3u8ï¼Œå»¶è¿Ÿé™è‡³ 3-5sã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šâœ… æè‡´å…¼å®¹ã€è‡ªé€‚åº”ç ç‡ã€æ˜“éƒ¨ç½²ï¼›âŒ åŸç”Ÿå»¶è¿Ÿé«˜ã€åˆ‡ç‰‡å¼€é”€å¤§ã€å®æ—¶æ€§å·®ã€‚</li>
</ul>
<h3 data-id="heading-4">4. WebRTCï¼šå®æ—¶äº’åŠ¨åˆ©å™¨</h3>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šæµè§ˆå™¨åŸç”Ÿå®æ—¶é€šä¿¡ï¼Œæ¯«ç§’çº§å»¶è¿Ÿï¼ˆ50-300msï¼‰ã€‚</p>
<ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šé›†æˆé‡‡é›† / ç¼–ç  / ä¼ è¾“ / æ¸²æŸ“ï¼ŒUDP ä¼ è¾“ + P2P ç›´è¿ï¼Œå†…ç½®å›å£°æ¶ˆé™¤ç­‰äº’åŠ¨åŠŸèƒ½ã€‚</li>
<li><strong>å»¶è¿Ÿæ„æˆ</strong>ï¼šé‡‡é›†ç¼–ç ï¼ˆ30-80msï¼‰+ ä¼ è¾“ï¼ˆ20-150msï¼‰+ è§£ç æ¸²æŸ“ï¼ˆ10-30msï¼‰ã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šâœ… å»¶è¿Ÿæœ€ä½ã€äº’åŠ¨æ€§å¼ºã€æ— æ’ä»¶ä¾èµ–ï¼›âŒ éƒ¨ç½²å¤æ‚ï¼ˆéœ€ STUN/TURN/SFUï¼‰ã€å¸¦å®½å ç”¨é«˜ã€‚</li>
</ul>
<h3 data-id="heading-5">5. SRTï¼šä¸“ä¸šçº§ä½å»¶è¿Ÿä¼ è¾“</h3>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šUDP å¯é ä¼ è¾“ + åŠ å¯†ï¼Œå»¶è¿Ÿ 10-150msï¼ŒæŠ—ä¸¢åŒ…ï¼ˆ10% ä¸¢åŒ…ä»ç¨³å®šï¼‰ã€‚</p>
<ul>
<li><strong>æŠ€æœ¯ä¼˜åŠ¿</strong>ï¼šARQ é‡ä¼  + FEC çº é”™ï¼ŒåŸç”Ÿ AES åŠ å¯†ï¼Œé€‚é… 4K/8K é«˜ç ç‡ä¼ è¾“ã€‚</li>
<li><strong>ä¼˜ç¼ºç‚¹</strong>ï¼šâœ… å»¶è¿Ÿæä½ã€å¯é æ€§å¼ºã€åŠ å¯†å®‰å…¨ï¼›âŒ Web ç«¯å…¼å®¹æ€§å·®ã€CDN æ”¯æŒæœ‰é™ã€é…ç½®ç²¾ç»†ã€‚</li>
</ul>
<h3 data-id="heading-6">åè®®ç‰¹æ€§å¯¹æ¯”è¡¨</h3>






















































<table><thead><tr><th>ç‰¹æ€§</th><th>SRT</th><th>WebRTC</th><th>HTTP-FLVï¼ˆä¼˜åŒ–åï¼‰</th><th>RTMPï¼ˆä¼˜åŒ–åï¼‰</th></tr></thead><tbody><tr><td>åŸç”Ÿå»¶è¿Ÿ</td><td>10-150ms</td><td>50-300ms</td><td>1-2.5s</td><td>0.8-2s</td></tr><tr><td>ä¼ è¾“åè®®</td><td>UDPï¼ˆå¯é ä¼ è¾“ï¼‰</td><td>UDPï¼ˆä¸ºä¸»ï¼‰</td><td>TCPï¼ˆHTTP/HTTP3ï¼‰</td><td>TCP</td></tr><tr><td>ä¸¢åŒ…å®¹å¿æ€§</td><td>å¼ºï¼ˆ10% ä¸¢åŒ…ï¼‰</td><td>ä¸­ï¼ˆ5% ä¸¢åŒ…ï¼‰</td><td>å¼ºï¼ˆTCP é‡ä¼ ï¼‰</td><td>ä¸­ï¼ˆTCP é‡ä¼ é˜»å¡ï¼‰</td></tr><tr><td>åŠ å¯†æ”¯æŒ</td><td>åŸç”Ÿ AES</td><td>éœ€ DTLS</td><td>ä¾èµ– HTTPS</td><td>éœ€ RTMPS</td></tr><tr><td>é«˜å¹¶å‘æ”¯æŒ</td><td>ä¸­ï¼ˆéœ€åª’ä½“æœåŠ¡å™¨ï¼‰</td><td>ä½ï¼ˆP2P å¸¦å®½å—é™ï¼‰</td><td>é«˜ï¼ˆCDN åˆ†å‘ï¼‰</td><td>ä¸­ï¼ˆCDN æ”¯æŒï¼‰</td></tr><tr><td>éƒ¨ç½²å¤æ‚åº¦</td><td>ä¸­</td><td>é«˜</td><td>ä½</td><td>ä¸­</td></tr></tbody></table>
<h2 data-id="heading-7">äºŒã€å¼€å‘å®è·µï¼šä»é€‰å‹åˆ°è½åœ°çš„åå·</h2>
<h3 data-id="heading-8">1. åˆæœŸé€‰å‹ï¼šWebRTC çš„å°è¯•ä¸ç¢°å£</h3>
<p>æœ€å¼€å§‹é€‰æ‹© WebRTC ä½œä¸ºæ ¸å¿ƒåè®®ï¼ˆä¸€æ˜¯åˆæœŸå¯¹ SRT è®¤çŸ¥ä¸è¶³ï¼ŒäºŒæ˜¯çœ‹ä¸­å…¶æµè§ˆå™¨åŸç”Ÿå…¼å®¹æ€§ï¼‰ï¼š</p>
<ul>
<li>æ‰‹åŠ¨å°è£…ä¿¡ä»¤æœåŠ¡å™¨ + WebRTC æ¨æ‹‰æµç»„ä»¶ï¼Œå®ç°åŸºç¡€åŠŸèƒ½åå‘ç°<strong>å¹¶å‘æä½</strong>ï¼›</li>
<li>è½¬å‘ MediaSoupï¼ˆSFU æ¡†æ¶ï¼‰ä¼˜åŒ–å¹¶å‘ï¼Œä½†å…¨è‹±æ–‡æ–‡æ¡£ + æ‹“å±•å¤æ‚åº¦é«˜ï¼Œæœ€ç»ˆæ”¾å¼ƒã€‚</li>
</ul>
<p>è¿™æ®µç»å†è™½æœªè½åœ°ï¼Œä½†åƒé€äº† WebRTC çš„ä¿¡ä»¤äº¤äº’ã€NAT ç©¿é€ã€åª’ä½“æµå¤„ç†é€»è¾‘ã€‚</p>
<h3 data-id="heading-9">2. æœ€ç»ˆé€‰å‹ï¼šSRS çš„æ•‘èµ</h3>
<p>SRSï¼ˆSimple Real-Time Serverï¼‰æ˜¯å¼€æºå®æ—¶è§†é¢‘æœåŠ¡å™¨ï¼Œæ”¯æŒå¤šåè®®è½¬æ¢ï¼Œæˆä¸ºæˆ‘çš„æœ€ç»ˆé€‰æ‹©ï¼š</p>
<ul>
<li>æ”¯æŒ RTMP/WebRTC/HTTP-FLV/SRT ç­‰åè®®ï¼Œå¼€ç®±å³ç”¨ï¼›</li>
<li>è§£å†³äº† WebRTC å¹¶å‘é—®é¢˜ï¼Œä¸”æ”¯æŒåè®®è½¬æ¢ï¼ˆå¦‚ RTMP è½¬ WebRTCï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">SRS é…ç½®ï¼ˆ6.0 ç‰ˆæœ¬ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># main config for srs.</span>
listen              1935<span class="hljs-comment">;          # RTMPç«¯å£</span>
max_connections     1000<span class="hljs-comment">;          # æœ€å¤§è¿æ¥æ•°</span>
daemon              on<span class="hljs-comment">;            # å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼</span>

<span class="hljs-comment"># HTTP APIï¼šç”¨äºæ§åˆ¶å’ŒæŸ¥è¯¢SRSçŠ¶æ€</span>
http_api {
    enabled         on<span class="hljs-comment">;</span>
    listen          1985<span class="hljs-comment">;</span>
}

<span class="hljs-comment"># HTTPæœåŠ¡å™¨ï¼šæä¾›HLS/HTTP-FLVè®¿é—®</span>
http_server {
    enabled         on<span class="hljs-comment">;</span>
    listen          8080<span class="hljs-comment">;</span>
    dir             ./objs/nginx/html<span class="hljs-comment">; # é™æ€æ–‡ä»¶ç›®å½•</span>
}

<span class="hljs-comment"># WebRTCé…ç½®ï¼šUDPç«¯å£+å…¬ç½‘å€™é€‰åœ°å€</span>
rtc_server {
    enabled on<span class="hljs-comment">;</span>
    listen  8000<span class="hljs-comment">; # WebRTCçš„UDPç«¯å£</span>
    candidate 0.0.0.0<span class="hljs-comment">; # å…¬ç½‘æœåŠ¡å™¨éœ€æ›¿æ¢ä¸ºå®é™…IP</span>
}

vhost __defaultVhost__ {
    <span class="hljs-comment"># HLSé…ç½®ï¼šä½å»¶è¿Ÿåˆ‡ç‰‡</span>
    hls {
        enabled         on<span class="hljs-comment">;</span>
        hls_path        ./objs/nginx/html/hls<span class="hljs-comment">;</span>
        hls_m3u8_file   <span class="hljs-section">[app]</span>/<span class="hljs-section">[stream]</span>.m3u8<span class="hljs-comment">;</span>
        hls_ts_file     <span class="hljs-section">[app]</span>/<span class="hljs-section">[stream]</span>-<span class="hljs-section">[seq]</span>.ts<span class="hljs-comment">;</span>
        hls_fragment    1<span class="hljs-comment">; # 1ç§’åˆ‡ç‰‡ï¼Œé™ä½å»¶è¿Ÿ</span>
    }

    <span class="hljs-comment"># HTTP-FLVæŒ‚è½½</span>
    http_remux {
        enabled     on<span class="hljs-comment">;</span>
        mount       <span class="hljs-section">[vhost]</span>/<span class="hljs-section">[app]</span>/<span class="hljs-section">[stream]</span>.flv<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment"># WebRTCä¸RTMPäº’è½¬</span>
    rtc {
        enabled     on<span class="hljs-comment">;</span>
        rtmp_to_rtc on<span class="hljs-comment">; # RTMPæ¨æµè½¬WebRTCæ’­æ”¾</span>
        rtc_to_rtmp on<span class="hljs-comment">; # WebRTCæ¨æµè½¬RTMPæ’­æ”¾</span>
    }

    <span class="hljs-comment"># æ’­æ”¾ä¼˜åŒ–ï¼šGOPç¼“å­˜+é˜Ÿåˆ—æ§åˆ¶</span>
    play {
        gop_cache_max_frames 2500<span class="hljs-comment">;</span>
        gop_cache on<span class="hljs-comment">; # ç¼“å­˜GOPå®ç°ç§’å¼€</span>
        queue_length 10<span class="hljs-comment">; # æ’­æ”¾é˜Ÿåˆ—é•¿åº¦ï¼ˆç¼“å­˜10å¸§ï¼‰</span>
    }
}
</code></pre>
<h4 data-id="heading-11">è¸©å‘ä¸è§£å†³</h4>
<ul>
<li>AI æä¾›çš„é…ç½®å¸¸å‡ºç°è¯­æ³•é”™è¯¯ï¼ˆå¦‚è·¯å¾„æ ¼å¼ã€å‚æ•°å†²çªï¼‰ï¼Œéœ€ç»“åˆå®˜æ–¹æ–‡æ¡£é€è¡Œæ ¡éªŒï¼›</li>
<li>WebRTC æ¨æµéœ€ç¡®ä¿<code>candidate</code>é…ç½®æ­£ç¡®ï¼ˆå…¬ç½‘ IP / ç«¯å£æ˜ å°„ï¼‰ï¼Œå¦åˆ™æ— æ³•å»ºç«‹è¿æ¥ï¼›</li>
<li>ä½å»¶è¿Ÿä¼˜åŒ–éœ€å…³é—­ GOP ç¼“å­˜ã€ç¼©çŸ­ HLS åˆ‡ç‰‡ã€å‡å°æ’­æ”¾å™¨ç¼“å†²ã€‚</li>
</ul>
<h2 data-id="heading-12">ä¸‰ã€æ”¶è·ä¸æ€»ç»“</h2>
<ol>
<li>
<p><strong>åè®®é€‰å‹æ— ä¼˜åŠ£ï¼Œé€‚é…åœºæ™¯æ˜¯å…³é”®</strong>ï¼š
äº’åŠ¨åœºæ™¯é€‰ WebRTCï¼Œä½å»¶è¿Ÿç›´æ’­é€‰ SRT/RTMPï¼Œè·¨å¹³å°å…¼å®¹é€‰ LL-HLSï¼›</p>
</li>
<li>
<p><strong>å¼€æºå·¥å…·çš„åŠ›é‡</strong>ï¼šSRS è¿™ç±»æˆç†Ÿæ¡†æ¶èŠ‚çœäº†åº•å±‚å¼€å‘æˆæœ¬ï¼Œèšç„¦ä¸šåŠ¡é€»è¾‘å³å¯å¿«é€Ÿè½åœ°ï¼›</p>
</li>
<li>
<p><strong>å®è·µå‡ºçœŸçŸ¥</strong>ï¼šä»æ‰‹åŠ¨å°è£…ç»„ä»¶åˆ°è¸©å‘ SRS é…ç½®ï¼Œæ¯ä¸€æ­¥è¯•é”™éƒ½åŠ æ·±äº†å¯¹ç›´æ’­æŠ€æœ¯æ ˆçš„ç†è§£ã€‚</p>
</li>
</ol>
<p>ç›®å‰å·²å®ç° OBSï¼ˆWebRTCï¼‰æ¨æµã€å‰ç«¯ / VLC æ‹‰æµçš„ä½å»¶è¿Ÿç›´æ’­ï¼Œåç»­è®¡åˆ’æ¢ç´¢ SRT åè®®é›†æˆã€é«˜å¹¶å‘ä¼˜åŒ–ã€‚<strong>ä¸‡äº‹å¼€å¤´éš¾ï¼ŒæŠ€æœ¯æ²‰æ·€åœ¨äºæŒç»­è¸©å‘ä¸å¤ç›˜</strong>~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½“éªŒGemini 3 Proçš„Nå¤šç§æ–¹å¼]]></title>    <link>https://juejin.cn/post/7575106644498989090</link>    <guid>https://juejin.cn/post/7575106644498989090</guid>    <pubDate>2025-11-23T05:43:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498989090" data-draft-id="7575015480198627380" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½“éªŒGemini 3 Proçš„Nå¤šç§æ–¹å¼"/> <meta itemprop="keywords" content="Gemini,AIGC"/> <meta itemprop="datePublished" content="2025-11-23T05:43:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½“éªŒGemini 3 Proçš„Nå¤šç§æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T05:43:14.000Z" title="Sun Nov 23 2025 05:43:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å°ä¼™ä¼´ä»¬å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æºªï¼Œè§å­—å¦‚é¢ã€‚è¿™ä¸¤å¤©è¢«Gemini 3 Proæ¨¡å‹çš„å‘å¸ƒåˆ·å±äº†ï¼Œå„ç§æ¨¡å‹æ’è¡Œç¬¬ä¸€ï¼Œå„ç§ç‚¸è£‚äº†ï¼Œçœ‹çš„çœ¼èŠ±ç¼­ä¹±çš„ï¼Œæœ¬äººå°±ä¸å‡‘çƒ­é—¹å»ç‚¸è£‚äº†ï¼ˆæœ¬äººä¸€ç›´è§‰å¾—èƒ½å¸®åŠ©è‡ªå·±è§£å†³é—®é¢˜çš„æ¨¡å‹å°±æ˜¯å¼ºçš„ï¼Œåˆ†æ•°å°±åƒè¥¿åŒ»åˆ¶å®šçš„å„ç§åˆ¤å®šä¸€ä¸ªäººæ˜¯å¦æ­£å¸¸çš„æŒ‡æ ‡ï¼Œåªèƒ½ä½œä¸ºä¸€ä¸ªå‚è€ƒï¼Œæ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼‰ï¼Œåœ¨è¿™é‡Œæ•´ç†ä¸€ä¸‹ä½“éªŒGemini 3 Proçš„ä½“éªŒæ–¹å¼å’Œç®€å•Demoçœ‹ä¸€ä¸‹Gemini 3 Proçš„å®åŠ›ï¼Œçº¯ä¸ªäººæŠŠç©ä»…ä¾›å‚è€ƒã€‚</p>
<p>è¿™é‡Œè´´ä¸€ä¸‹å®˜æ–¹å’ŒçŸ¥åæ¨¡å‹æµ‹è¯„å¹³å°çš„æµ‹è¯„ç»“æœï¼Œåœ¨å…¨çƒæƒå¨çš„æ¨¡å‹è¯„æµ‹æ¦œå•Artificial Analysisé‡Œï¼ŒGemini 3 æ’åç¬¬ä¸€ã€‚</p>
<p>Artificial Analysiså®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fartificialanalysis.ai%2Fmodels%2Fgpt-5%3Fintelligence%3Dartificial-analysis-intelligence-index" target="_blank" title="https://artificialanalysis.ai/models/gpt-5?intelligence=artificial-analysis-intelligence-index" ref="nofollow noopener noreferrer">artificialanalysis.ai/models/gpt-â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afce0e406bd346a3849fdd07cc1bc2b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=eqIJEE1erGbV25qLaWhMYEX2E2M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3 Proçš„è·‘åˆ†ä¹Ÿå¼ºçš„ç¦»è°±ï¼Œé™¤äº†è½¯ä»¶å·¥ç¨‹èƒ½åŠ›æ¯”GPT-5.1ã€CLaude Sonnet 4.5ç•¥ä½ï¼Œå…¶ä»–èƒ½åŠ›æ–¹é¢åŸºæœ¬ä¸Šéƒ½æ˜¯é¥é¥é¢†å…ˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/772946b38d9645c1a9bd4e1f48ef5f81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=WvZ3k09QeWQR%2BlBjH%2Bp4d4aALiw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">Google Gemini</h2>
<h3 data-id="heading-2">ä¼˜åŠ¿</h3>
<ul>
<li>å®˜æ–¹æ”¯æŒï¼Œå…è´¹ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-3">é™åˆ¶</h3>
<ul>
<li>éœ€è¦Googleè´¦å·</li>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-4">ä½¿ç”¨</h3>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google.com" target="_blank" title="https://gemini.google.com" ref="nofollow noopener noreferrer">gemini.google.com</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3826d4f73fad4268ab40b843f211206c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=qja50mBjLSVNSTMEyviwXaab80w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Geminiå®˜ç½‘å·²é»˜è®¤ä½¿ç”¨äº†Gemini 3 Proæ¨¡å‹ï¼Œç›´æ¥åœ¨å¯¹è¯æ¡†è¾“å…¥æç¤ºè¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ec3474b4449436f939902fe431595dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=ndmetUk3ONaVmbqftcUTQHtRuQ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»»åŠ¡å®Œæˆåï¼Œå¤åˆ¶ä»£ç ä¿å­˜åˆ°æœ¬åœ° index.html æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ•ˆæœå¦‚ä¸‹ï¼Œå°±ä¸åšè¯„ä»·äº†ï¼Œæ¯•ç«Ÿåƒäººåƒé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/470544273da2488c8df54f16f5ad475c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=s%2FXe2%2BFvoT7rBgw%2B5pk9pBzXHcw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆªæ­¢å¤åˆ»ä¸€ä¸‹MiniMaxçš„å®˜ç½‘ï¼ŒMiniMaxçš„å®˜ç½‘è¿˜æ˜¯æœ‰æŠ€æœ¯å«é‡çš„ï¼Œä¹‹å‰ä½¿ç”¨MiniMax-M2ä¹Ÿæ— æ³•å¤ç°ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493520%26idx%3D1%26sn%3Da927c6291984349476945d1437794b60%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493520&amp;idx=1&amp;sn=a927c6291984349476945d1437794b60&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è¿½èµ¶ä¸€è¶ŸMinimax M2é™æ—¶å…è´¹æœ«ç­è½¦</a></p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//www.minimaxi.com å¤åˆ»MiniMaxå®˜ç½‘é¦–é¡µ</span>
</code></pre>
<p>å¤åˆ»å®Œæˆåï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/377dc3dc546744af957dfff926004c39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=PKefdzjVoBKCRT4Cgxz67a0BiHk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">Google AI Studio</h2>
<h3 data-id="heading-6">ä¼˜åŠ¿</h3>
<ul>
<li>å®˜æ–¹æ”¯æŒï¼Œå…è´¹ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-7">é™åˆ¶</h3>
<ul>
<li>éœ€è¦Googleè´¦å·</li>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨</h3>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com" target="_blank" title="https://aistudio.google.com" ref="nofollow noopener noreferrer">aistudio.google.com</a></p>
<p>åœ¨Google AI Studioé¦–é¡µï¼Œç‚¹å‡»ã€Gemini 3 Pro Previewã€‘å³å¯ä½¿ç”¨Gemini 3 Proæ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd9755a534f340b6ab78680a9d2d4fa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=Lqhq50D%2Fc8P5inFZV5rzGIk9uzA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ¨¡å‹åˆ—è¡¨å¯ä»¥çœ‹åˆ°Gemini 3 Proçš„ è®¡è´¹æ–¹å¼ å’Œ çŸ¥è¯†åº“æˆªæ­¢æ—¶é—´</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a783e21132f7400f92f772e909052974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=3GTWKXKMWUqjPuFh0UOBumVMnCo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨åŒæ ·çš„æç¤ºè¯ï¼Œåœ¨Google AI Studioä¸Šå¤åˆ»çš„bilibiliå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99a3cb4c9980461a88a226102f74e62e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=XDxev8rmjcVhON%2BSensqOvY0t%2Fc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤åˆ»çš„MiniMaxå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/513fea0e979649779a0ee4bc8f1110af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=ieeMBzAio4prMkhYQL1LEOsfpQU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-9">Google Antigravity IDE</h2>
<h3 data-id="heading-10">ä¼˜åŠ¿</h3>
<ul>
<li>é¢„è§ˆé˜¶æ®µå…è´¹ä½¿ç”¨</li>
<li>æ”¯æŒ Gemini 3 Proã€Claude Sonnet 4.5</li>
</ul>
<h3 data-id="heading-11">é™åˆ¶</h3>
<ul>
<li>éœ€è¦Googleè´¦æˆ·ï¼Œå¯¹è´¦å·æœ‰ä¸€å®šçš„è¦æ±‚</li>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
<li>Gemini 3 Proï¼ˆHighï¼‰æ¯å¤©æœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶</li>
</ul>
<h3 data-id="heading-12">ä½¿ç”¨</h3>
<p>Antigravityæ˜¯Googleéšç€Gemini 3 Proæ¨¡å‹ä¸Šçº¿ä¸€èµ·å‘å¸ƒçš„Agent IDEï¼Œå·²é»˜è®¤æ”¯æŒGemini 3 Proæ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1176a01489443738bac5cd68e19d37d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=Idwt8gOnZkrQ2XOb2Q0nd3ROnaE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨Antigravity IDEä¸Šä½¿ç”¨ Gemini 3 Proï¼ˆLowï¼‰ï¼ˆä¸ºä»€ä¹ˆä¸ä½¿ç”¨Highï¼Œå› ä¸ºHighæ¯å¤©æœ‰ä½¿ç”¨é¢åº¦é™åˆ¶ï¼‰ï¼ŒAntigravityç›´æ¥ä½¿ç”¨Next.jså®ç°äº†ï¼Œå®ç°bilibiliå®˜ç½‘é¦–é¡µçš„å¤åˆ»æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f87506b6f364222b4fc9a00f9e13cca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=AhU7Mfq25svlHX9eGvhBIl7Ri98%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤åˆ»çš„MiniMaxå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccf4c55e21d04c55af7b3934c692e743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=l031BGlS5KhMgCkeQwi1%2BBXgRvg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-13">Gemini CLI</h2>
<p>å¯¹Gemini CLIæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492558%26idx%3D1%26sn%3De762047c93c4361f63744ec3c70a434f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492558&amp;idx=1&amp;sn=e762047c93c4361f63744ec3c70a434f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Googleç™¾ä¸‡Tokenä¸Šä¸‹æ–‡Gemini CLIï¼Œç¦»AIè‡ªç”±æ›´è¿‘ä¸€æ­¥</a></p>
<h3 data-id="heading-14">ä¼˜åŠ¿</h3>
<ul>
<li>Google AI Ultraã€Gemini APIå¯†é’¥ã€Vertex APIå¯†é’¥ä»˜è´¹ç”¨æˆ·è‡ªåŠ¨å¼€å¯æƒé™</li>
</ul>
<h3 data-id="heading-15">é™åˆ¶</h3>
<ul>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
<li>å…è´¹ç”¨æˆ·éœ€è¦åŠ å…¥å€™è¡¥åå•</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4565396fae614b2f8aa27160badbc568~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=ThpLs1vSSCaulJv9satqqSU2HwU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®˜æ–¹å€™è¡¥åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fforms%2Fd%2Fe%2F1FAIpQLScQBMmnXxIYDnZhPtTP3xr5IwHNzKW4nLomuQ1tGOO-UldMdQ%2Fviewform%3Fpli%3D1" target="_blank" title="https://docs.google.com/forms/d/e/1FAIpQLScQBMmnXxIYDnZhPtTP3xr5IwHNzKW4nLomuQ1tGOO-UldMdQ/viewform?pli=1" ref="nofollow noopener noreferrer">docs.google.com/forms/d/e/1â€¦</a></p>
<h3 data-id="heading-16">ä½¿ç”¨</h3>
<blockquote>
<p>åœ¨Gemini CLIä¸­ä½¿ç”¨Gemini 3 Proéœ€è¦å…ˆåˆ°è®¾ç½®ä¸­å¼€å¯ã€Preview Featuresã€‘</p>
</blockquote>
<p>æ›´æ–°åˆ°Gemini CLIæœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$Â </span>npm install -g <span class="hljs-variable">@google</span>/gemini-cli<span class="hljs-variable">@latest</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b389cd659bf44fd7be813dec1af9c5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=%2BshVfw%2Fm36hap9ZTSDsAHaIhUqQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœæ˜¯Googleè´¦å·ç™»å½•çš„ä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼Œä½¿ç”¨Gemini 3 Proéœ€è¦å…ˆåŠ å…¥å€™è¡¥åå•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/136e5eb2042a45fab1820d566d8c3533~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=ElVCsgjPr19KTwjuOFmdf8gq%2By8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Gemini API Keyç™»å½•ï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /auth æ‰“å¼€ç™»å½•æˆæƒé¡µé¢ï¼Œé€‰æ‹©ã€Use Gemini API Keyã€‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d39776ad1b46436c875137d271bf827c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=0NNfDBWgLJV1FGwW4qGgh8oOATU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥Gemini API Key</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ce5819e651546cbb169cc980a2af612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=cWerSb0tvq7%2FWhLsv%2BtBVbQ99k8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /settings æ‰“å¼€è®¾ç½®ï¼Œæ‰¾åˆ°ã€Preview Featuresã€‘å¼€å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/926a3a910503493588e2566e4d922393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=lWZ9Yk06BITuz%2FFAXQTCesmljmM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼€å¯æˆåŠŸåï¼Œé‡å¯Gemini CLIï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /model å°±å¯ä»¥çœ‹åˆ° gemini-3-pro-preview æ¨¡å‹äº†ï¼Œç„¶åé€‰æ‹©Proæ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3740ecd6e6d043c7ad4e4087e8faf48a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=kMHtoj5jRVssE1cxRftaajuhKmM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ‡æ¢æˆåŠŸåï¼Œå¯¹è¯æ¡†å³ä¾§ä¼šæ˜¾ç¤ºã€Proã€‘ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨Gemini 3 Proæ¨¡å‹äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f10e1734309f4cc3beb09f4800f4468f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=XYBc4i3udmFCuQ3aBvJ6EK6NwE8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…è´¹ç”¨æˆ·æ— æ³•ä½¿ç”¨ä¼šæç¤ºé”™è¯¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfdcc599329b4da4a6f3c70fb51c70b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=nTBU4Y8CAx%2BtwInrj7m%2FtSH9zE4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-17">Cursor</h2>
<h3 data-id="heading-18">ä¼˜åŠ¿</h3>
<ul>
<li>å¯ä»¥ä½¿ç”¨Cursorç‰¹æ€§åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-19">é™åˆ¶</h3>
<ul>
<li>
<p>éœ€è¦è®¢é˜…Cursor</p>
</li>
<li>
<p>éœ€è¦é…ç½®ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</p>
</li>
</ul>
<h3 data-id="heading-20">ä½¿ç”¨</h3>
<p>Cursorä¸­å·²ç»æ”¯æŒäº†Gemin 3 Proæ¨¡å‹ï¼Œå¼€é€šCursorè®¢é˜…çš„å°ä¼™ä¼´é€‰æ‹©æ¨¡å‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæœ¬äººCursorä¼šå‘˜åˆ°æœŸäº†è¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/278b20dd6935466ba3f9bf783b0a50cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=Kb81Re%2FszKKzSZMVeOvtC2dAWDQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-21">LMArena</h2>
<p>LMArena ç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„ç ”ç©¶äººå‘˜åˆ›å»ºï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥è½»æ¾è®¿é—®ã€æ¢ç´¢ä¸–ç•Œé¢†å…ˆçš„äººå·¥æ™ºèƒ½æ¨¡å‹å¹¶ä¸ä¹‹äº¤äº’ã€‚é€šè¿‡å¹¶æ’æ¯”è¾ƒå®ƒä»¬å¹¶æŠ•ç¥¨ä»¥è·å¾—æ›´å¥½çš„å›åº”ï¼Œç¤¾åŒºæœ‰åŠ©äºå¡‘é€ å…¬å…±æ’è¡Œæ¦œï¼Œä½¿äººå·¥æ™ºèƒ½è¿›æ­¥æ›´åŠ é€æ˜ï¼Œå¹¶ç«‹è¶³äºç°å®ä¸–ç•Œçš„ä½¿ç”¨ã€‚</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flmarena.ai%2F" target="_blank" title="https://lmarena.ai/" ref="nofollow noopener noreferrer">lmarena.ai/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/721ba27542fe48458ed0d0f2f2d8c2b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=RurNDD6JWQzF1dvwRpueCTDQolE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-22">ä¼˜åŠ¿</h3>
<ul>
<li>å…è´¹ä½¿ç”¨ï¼Œæä¾›æ¨¡å‹å¯¹æ¯”</li>
<li>æä¾›æ‰€æœ‰ä¸»æµæ¨¡å‹</li>
</ul>
<h3 data-id="heading-23">é™åˆ¶</h3>
<ul>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-24">ä½¿ç”¨</h3>
<p>åœ¨LMArenaé¦–é¡µé€‰æ‹©ã€gemini-3-proã€‘æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e22f1ab995746268f4c93658058ff9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=tor%2BIm8TmyzxcepPR%2F%2FBT%2FFR5Sg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥åŒæ ·çš„æç¤ºè¯ï¼Œåœ¨LMArenaä¸Šå¤åˆ»çš„bilibiliå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼ˆæ„Ÿè§‰è¿™ä¸ªæ˜¯ç›®å‰å¤åˆ»æ•ˆæœæœ€å¥½çš„ä¸€æ¬¡ï¼Œéš¾é“å®˜æ–¹é™æ™ºäº†ï¼ŸğŸ¤£ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbf7541758f7480182558141161b573c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=K96PKRu0FCA3A7eBdASQyMqDrVI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤åˆ»çš„MiniMaxå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼ˆMiniMaxå®˜ç½‘å«é‡‘é‡è¿˜åœ¨ä¸Šå‡ğŸ˜‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1743377cd904229b1c3165ae6d22c68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=0p1xoz2nfoigomtHNXOXVO87mBc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-25">OpenRouter</h2>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenrouter.ai" target="_blank" title="https://openrouter.ai" ref="nofollow noopener noreferrer">openrouter.ai</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81825fc04e9b4a218f3ff38680fddccf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=nrlSeKWDmbOMxzjLiehcp%2BIDJOk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-26">ä¼˜åŠ¿</h3>
<ul>
<li>å›½å†…å¯ç”¨</li>
<li>æä¾›æ‰€æœ‰ä¸»æµæ¨¡å‹</li>
</ul>
<h3 data-id="heading-27">é™åˆ¶</h3>
<ul>
<li>Gemini 3 Proéœ€è¦ä»˜è´¹ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-28">ä½¿ç”¨</h3>
<p>åœ¨æ¨¡å‹å¯¹è¯é¡µé¢é€‰æ‹©ã€Gemini 3 Pro Previewã€‘æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9d92aa6e2654b84b59628198ce25dbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=bmb%2BqabhFojVHES54IVUqFp9jJA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ¬äººOpenRouteræ¬ è´¹äº†ï¼Œè¿™é‡Œå°±ä¸åšdemoäº†</p>
<h2 data-id="heading-29">ZenMux</h2>
<p>ZenMuxæ˜¯ä¸€ä¸ªç±»ä¼¼OpenRouterçš„æ¨¡å‹èšåˆå¹³å°</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzenmux.ai" target="_blank" title="https://zenmux.ai" ref="nofollow noopener noreferrer">zenmux.ai</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a635a4cdc7b1497684b018e93f75e32f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=4T6RleFCx5gUi%2Ft7wW8HcOvxyxk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-30">ä¼˜åŠ¿</h3>
<ul>
<li>å›½å†…å¯ç”¨</li>
<li>æä¾›Gemini 3 Proä»˜è´¹å’Œå…è´¹æ¨¡å‹</li>
<li>æä¾›æ‰€æœ‰ä¸»æµæ¨¡å‹</li>
</ul>
<h3 data-id="heading-31">é™åˆ¶</h3>
<ul>
<li>éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-32">ä½¿ç”¨</h3>
<p>åœ¨ZenMuxé¦–é¡µé€‰æ‹©ã€Gemini 3 Pro Preview Freeã€‘æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb70f2dd7f7e41bd8848cf156fabc185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=voNPPAe22UFaPM0AMqSJQD8WFJ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥æç¤ºè¯ï¼Œå¤åˆ»çš„bilibiliå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f043d908b494c9fa5d80e0a3ee24c15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=%2FeBzY2eYlABMKDAa5enEYBWl1%2FQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤åˆ»çš„MiniMaxå®˜ç½‘é¦–é¡µæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e52a62e2449b4c08b4ffc5d97afaa4a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=5ktiwE7iDcUKeG%2BNMyZqY2Gc%2FEk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-33">ä¸­è½¬ç«™</h2>
<p>ä»¥ä¸Šå¹³å°å¯¹å›½å†…ä½¿ç”¨éƒ½ä¸æ˜¯å¾ˆå‹å¥½ï¼Œè§£å†³ä¸äº†ç½‘ç»œé—®é¢˜çš„å°ä¼™ä¼´å¯ä»¥è€ƒè™‘ä½¿ç”¨å›½å†…ä¸­è½¬ç«™ï¼Œå¾ˆå¤šä¸­è½¬ç«™å·²ç»æ¥å…¥Gemini 3 Proæ¨¡å‹äº†ã€‚å¯¹ä¸­è½¬ç«™æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493035%26idx%3D1%26sn%3D9ccc174a34a0ee59e6a609e409b09908%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493035&amp;idx=1&amp;sn=9ccc174a34a0ee59e6a609e409b09908&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Code CLIå¹³å°ä¸ä¸­è½¬ç«™æ¥å…¥æ±‡æ€»åŠé¿å‘</a></p>
<p>è¿™é‡Œå‹æƒ…æä¾›ä¸¤ä¸ªæ¯”è¾ƒç¨³å®šçš„ï¼ˆéå¹¿å‘Šï¼Œæˆ‘åªæƒ³è¦ä¸ªé‚€è¯·å¥–åŠ±ğŸ˜ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8998bdffa12498d9e7a7b6141fd9281~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=YmZ%2FI5ZuQ4rp%2F5kagMnjWv1uLDM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-34">ä¼˜åŠ¿</h3>
<ul>
<li>å›½å†…å¯ç”¨</li>
<li>å¯è”ç³»ç«™ä¸»è·å–ä½“éªŒé¢åº¦</li>
</ul>
<h3 data-id="heading-35">é™åˆ¶</h3>
<ul>
<li>ä»˜è´¹ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-36">PackyCode</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e72f1b699b942afbcff367ab3cdda51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=8NXFRxm7jwwX9fUXn%2FgiZDJTpHw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20aa22c35fea4bb8bfba9154de91d593~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=NY9pvjLi0IZHOaNkaDWWoLjY7ZQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‚€è¯·é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.packyapi.com%2Fregister%3Faff%3DzLOw" target="_blank" title="https://www.packyapi.com/register?aff=zLOw" ref="nofollow noopener noreferrer">www.packyapi.com/register?afâ€¦</a></p>
<h3 data-id="heading-37">IKunCode</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ddd27b7ec06485c91443bf067ced516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=y%2BFBPrcQadARlfYFJod96Q7QIy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c78e709e5a34528855ac427254057be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764481394&amp;x-signature=FxiM6XSh8T9QYQFIjtSlsSTN%2B0s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‚€è¯·é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.ikuncode.cc%2Fregister%3Faff%3DkD2Q" target="_blank" title="https://api.ikuncode.cc/register?aff=kD2Q" ref="nofollow noopener noreferrer">api.ikuncode.cc/register?afâ€¦</a></p>
<h2 data-id="heading-38">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhiV51BPYiS5YQZS02esPoA" target="_blank" title="https://mp.weixin.qq.com/s/hiV51BPYiS5YQZS02esPoA" ref="nofollow noopener noreferrer">ä½“éªŒGemini 3 Proçš„Nå¤šç§æ–¹å¼</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhiV51BPYiS5YQZS02esPoA" target="_blank" title="https://mp.weixin.qq.com/s/hiV51BPYiS5YQZS02esPoA" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¯Monorepo vs æ··åˆå¼Monorepo]]></title>    <link>https://juejin.cn/post/7575655132747907108</link>    <guid>https://juejin.cn/post/7575655132747907108</guid>    <pubDate>2025-11-23T03:00:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132747907108" data-draft-id="7575159361904279593" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯Monorepo vs æ··åˆå¼Monorepo"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-23T03:00:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¬§é˜³çš„æ£‰èŠ±ç³–"/> <meta itemprop="url" content="https://juejin.cn/user/958429872784541"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯Monorepo vs æ··åˆå¼Monorepo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872784541/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¬§é˜³çš„æ£‰èŠ±ç³–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:00:43.000Z" title="Sun Nov 23 2025 03:00:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šç”¨ç”Ÿæ´»åœºæ™¯ç†è§£ä¸¤ç§æ¨¡å¼</h3>
<p>å¦‚æœè¦åŒæ—¶ç®¡ç† â€œä¸ªäººåšå®¢â€â€œé€šç”¨å·¥å…·åº“â€â€œå…¬å¸ä¸šåŠ¡ç³»ç»Ÿâ€ ä¸‰ä¸ªé¡¹ç›®ï¼Œä¸¤ç§æ¨¡å¼ç»™å‡ºäº†ä¸åŒçš„ â€œç®¡ç†æ–¹æ¡ˆâ€â€”â€”</p>
<h4 data-id="heading-1">çº¯ Monorepoï¼šâ€œä¸€å®¶äººä½åŒä¸€å¥—å¤§å…¬å¯“â€</h4>
<p>æ‰€æœ‰é¡¹ç›®éƒ½æ”¾è¿›<strong>ä¸€ä¸ª Git ä»“åº“</strong>ï¼ˆç›¸å½“äºä¸€å¥—å¤§å…¬å¯“ï¼‰ï¼Œå…±ç”¨ â€œæ°´ç”µç‡ƒæ°”â€ï¼ˆå·¥ç¨‹åŒ–é…ç½®ï¼Œå¦‚ ESLintã€æ„å»ºå·¥å…·ï¼‰å’Œ â€œå®¶å…·å®¶ç”µâ€ï¼ˆä¾èµ–åŒ…ï¼Œå¦‚ Reactã€Vueï¼‰ã€‚æ”¹å·¥å…·åº“çš„ä»£ç ï¼Œåšå®¢é¡¹ç›®ç«‹åˆ»èƒ½ç”¨ä¸Šï¼Œä¸ç”¨ â€œæ¬ä¸œè¥¿â€ï¼ˆå‘ç‰ˆã€å‡çº§ï¼‰ã€‚</p>
<h4 data-id="heading-2">æ··åˆå¼ Monorepoï¼šâ€œé‚»å±…ä½åŒä¸€å°åŒºï¼Œå…±ç”¨å¥èº«æˆ¿ + å¶å°”ä¸²é—¨å€Ÿä¸œè¥¿â€</h4>
<p>æ¯ä¸ªé¡¹ç›®è¿˜æ˜¯<strong>ç‹¬ç«‹çš„ Git ä»“åº“</strong>ï¼ˆç›¸å½“äºå°åŒºé‡Œçš„ä¸åŒä½æˆ·ï¼‰ï¼Œä½†éƒ½æ”¾è¿›åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚ <code>apps/</code>ï¼Œç›¸å½“äºå°åŒºï¼‰ï¼Œå…±ç”¨ â€œå…¬å…±è®¾æ–½â€ï¼ˆpnpm ä¾èµ–ç¼“å­˜ã€turbo æ„å»ºåŠ é€Ÿï¼‰ï¼›é‡åˆ°éœ€è¦æ”¹å·¥å…·åº“çš„æƒ…å†µï¼Œèƒ½ä¸´æ—¶ â€œä¸²é—¨å€Ÿä¸œè¥¿â€ï¼ˆæœ¬åœ°å…³è”å…¬å…±åº“ä»£ç ï¼‰ï¼Œæ”¹å®Œåå† â€œå½’ä½â€ï¼ˆå…¬å…±åº“å‘ç‰ˆã€ä¸šåŠ¡é¡¹ç›®å‡çº§ï¼‰ã€‚</p>
<h3 data-id="heading-3">äºŒã€æ ¸å¿ƒå¯¹æ¯”ï¼š8 ä¸ªç»´åº¦è®²é€å·®å¼‚</h3>


















































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>çº¯ Monorepo</th><th>æ··åˆå¼ Monorepo</th></tr></thead><tbody><tr><td><strong>1. ä»“åº“ç»“æ„</strong></td><td>1 ä¸ª Git ä»“åº“ï¼Œæ‰€æœ‰é¡¹ç›®æ˜¯ä»“åº“å†…çš„å­ç›®å½•ï¼ˆå¦‚ <code>packages/å·¥å…·åº“</code>ã€<code>apps/åšå®¢</code>ï¼‰</td><td>N ä¸ªç‹¬ç«‹ Git ä»“åº“ï¼Œæ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼ˆå¦‚ <code>apps/åšå®¢</code> å†…æœ‰è‡ªå·±çš„ <code>.git</code> æ–‡ä»¶å¤¹ï¼‰</td></tr><tr><td><strong>2. é¡¹ç›®è”åŠ¨</strong></td><td>æ”¹å…¬å…±åº“åï¼Œä¸šåŠ¡é¡¹ç›®å®æ—¶ç”Ÿæ•ˆï¼Œ1 æ¬¡æäº¤åŒæ­¥æ‰€æœ‰å˜æ›´</td><td>æ—¥å¸¸ï¼šå…¬å…±åº“å‘ç‰ˆ + ä¸šåŠ¡é¡¹ç›®å‡çº§ï¼›ç‰¹æ®Šåœºæ™¯ï¼šæœ¬åœ°å…³è”å…¬å…±åº“ï¼Œæ”¹å®Œååˆ†åˆ«æäº¤</td></tr><tr><td><strong>3. ä¾èµ–ç®¡ç†</strong></td><td>å…¨ä»“åº“ä¾èµ–ç»Ÿä¸€åœ¨æ ¹ç›®å½• <code>package.json</code> ç®¡ç†ï¼Œå­é¡¹ç›®ç›´æ¥å¼•ç”¨æœ¬åœ°ç›®å½•</td><td>æ—¥å¸¸ï¼šå„é¡¹ç›®ç‹¬ç«‹ <code>package.json</code>ï¼Œå…±ç”¨ pnpm ç¼“å­˜ï¼›ç‰¹æ®Šåœºæ™¯ï¼š<code>pnpm link</code> æœ¬åœ°å…³è”å…¬å…±åº“</td></tr><tr><td><strong>4. å‡†å¤‡å·¥ä½œ</strong></td><td>éœ€é…ç½® â€œå·¥ä½œåŒºâ€ï¼ˆå¦‚ pnpm workspacesï¼‰ï¼ŒæŒ‡å®šå­é¡¹ç›®ç›®å½•</td><td>é›¶é…ç½®é—¨æ§›ï¼šå…‹éš†ç‹¬ç«‹ä»“åº“åˆ°åŒä¸€æ–‡ä»¶å¤¹ï¼Œç‰¹æ®Šåœºæ™¯åŠ  <code>pnpm link</code> å³å¯</td></tr><tr><td><strong>5. å…¸å‹å·¥å…·</strong></td><td>å·¥ä½œåŒºå·¥å…·ï¼špnpm workspacesã€Lernaã€Turborepoï¼ˆå…¨ä»“åº“æ„å»ºï¼‰</td><td>ç¼“å­˜å·¥å…· + å…³è”å·¥å…·ï¼špnpmï¼ˆç¼“å­˜ + linkï¼‰ã€turboï¼ˆå•é¡¹ç›®åŠ é€Ÿï¼‰ã€Verdaccioï¼ˆç§æœ‰åŒ…ä»“åº“ï¼‰</td></tr><tr><td><strong>6. ç‰ˆæœ¬æ§åˆ¶</strong></td><td>æ‰€æœ‰é¡¹ç›®å…±ç”¨ä¸€å¥—ç‰ˆæœ¬è®°å½•ï¼Œå·¥å…·åº“å‡çº§ = ä»“åº“æ•´ä½“æäº¤</td><td>æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç‰ˆæœ¬ï¼Œå…¬å…±åº“ç‰ˆæœ¬å’Œä¸šåŠ¡é¡¹ç›®ç‰ˆæœ¬åˆ†å¼€ç®¡ç†</td></tr><tr><td><strong>7. å›¢é˜Ÿåä½œ</strong></td><td>é€‚åˆ â€œå…¨æ ˆå¼åä½œâ€ï¼šåŒä¸€æ‰¹äººæ—¢æ”¹ä¸šåŠ¡åˆç»´æŠ¤å·¥å…·åº“</td><td>é€‚åˆ â€œåˆ†å·¥ + çµæ´»åä½œâ€ï¼šåŸºå»ºç»„ç®¡å…¬å…±åº“ï¼Œä¸šåŠ¡ç»„ç®¡é¡¹ç›®ï¼Œç‰¹æ®Šåœºæ™¯ä¸´æ—¶è”åŠ¨</td></tr><tr><td><strong>8. è¿ç§»æˆæœ¬</strong></td><td>éœ€åˆå¹¶å¤šä¸ªç‹¬ç«‹ä»“åº“ä»£ç ï¼Œæ•´ç†å†å²æäº¤</td><td>ç›´æ¥æŠŠç°æœ‰ä»“åº“æ”¾è¿›åŒä¸€ç›®å½•ï¼Œç‰¹æ®Šåœºæ™¯åŠ æœ¬åœ°å…³è”é…ç½®</td></tr></tbody></table>
<h3 data-id="heading-4">ä¸‰ã€å…³é”®åœºæ™¯ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦é«˜é¢‘è”åŠ¨ï¼Ÿ</h3>
<p>è™½ç„¶å¤§éƒ¨åˆ†æ—¶å€™å…¬å…±åº“å¾ˆç¨³å®šï¼Œä½†ä»¥ä¸‹ 4 ç§æƒ…å†µï¼Œçº¯ Monorepo çš„ â€œä¸€é”®è”åŠ¨â€ ä¼šæ›´é«˜æ•ˆï¼š</p>
<ol>
<li>
<p><strong>å°å›¢é˜Ÿ / åˆåˆ›å›¢é˜Ÿ</strong>ï¼šæ²¡äººä¸“èŒç»´æŠ¤å…¬å…±åº“ï¼Œå¼€å‘åšå®¢æ—¶å‘ç°å·¥å…·åº“ç¼ºåŠŸèƒ½ï¼Œå¾—è‡ªå·±æ”¹å·¥å…·åº“å†åŒæ­¥ä¸šåŠ¡ï¼›</p>
</li>
<li>
<p><strong>å…¬å…±åº“é‡å¤§æ›´æ–°</strong>ï¼šæ¯”å¦‚ç»„ä»¶åº“ä» Vue2 å‡åˆ° Vue3ï¼Œä¸šåŠ¡é¡¹ç›®è¦è·Ÿç€æ”¹å¼•ç”¨æ–¹å¼ï¼Œå¤©å¤©éœ€è¦è”è°ƒï¼›</p>
</li>
<li>
<p><strong>ä¸šåŠ¡ä¸“å±å…¬å…±åº“</strong>ï¼šæ¯”å¦‚ç”µå•†å›¢é˜Ÿçš„ â€œè®¢å•å·¥å…·åº“â€ï¼ŒåªæœåŠ¡è®¢å•ä¸šåŠ¡ï¼Œä¸šåŠ¡æ”¹éœ€æ±‚å°±å¾—åŒæ­¥æ”¹å·¥å…·åº“ï¼›</p>
</li>
<li>
<p><strong>ToB å®šåˆ¶éœ€æ±‚</strong>ï¼šå®¢æˆ·è¦åœ¨æŠ¥è¡¨é¡µåŠ ç‰¹æ®Šç­›é€‰ï¼Œå¾—æ”¹å…¬å…±è¡¨æ ¼ç»„ä»¶ï¼Œå†åŒæ­¥åˆ°ä¸šåŠ¡é¡¹ç›®ï¼Œå‘¨æœŸçŸ­è¦æ±‚å¿«ã€‚</p>
</li>
</ol>
<p>è€Œæ··åˆå¼ Monorepo èƒ½å…¼é¡¾ï¼šæ—¥å¸¸ç”¨ â€œç‹¬ç«‹ä»“åº“ + å‘ç‰ˆâ€ ä¿è¯ç¨³å®šï¼Œé‡åˆ°ä»¥ä¸Šåœºæ™¯ç”¨ â€œæœ¬åœ°å…³è”â€ ä¸´æ—¶è”åŠ¨ï¼Œä¸ç”¨å¼ºè¡Œåˆå¹¶ä»“åº“ã€‚</p>
<h3 data-id="heading-5">å››ã€å®é™…æ“ä½œï¼šä¸¤ç§æ¨¡å¼æ€ä¹ˆç”¨ï¼Ÿ</h3>
<h4 data-id="heading-6">æ¡ˆä¾‹ 1ï¼šæ–°å¢ â€œæ—¥å†ç»„ä»¶åº“â€</h4>
<ul>
<li><strong>çº¯ Monorepo</strong>ï¼š</li>
</ul>
<ol>
<li>
<p>æ ¹ä»“åº“æ–°å»º <code>packages/æ—¥å†ç»„ä»¶</code>ï¼›</p>
</li>
<li>
<p>åšå®¢é¡¹ç›®ç›´æ¥å¼•ç”¨ <code>import æ—¥å† from '@æˆ‘çš„ä»“åº“/æ—¥å†ç»„ä»¶'</code>ï¼›</p>
</li>
<li>
<p>ä¸€æ¬¡æäº¤ï¼š<code>git commit -m "æ–°å¢æ—¥å†ç»„ä»¶+åšå®¢æ¥å…¥"</code>ã€‚</p>
</li>
</ol>
<ul>
<li><strong>æ··åˆå¼ Monorepo</strong>ï¼š</li>
</ul>
<ol>
<li>
<p>å•ç‹¬å»º â€œæ—¥å†ç»„ä»¶â€ ä»“åº“ï¼Œå¼€å‘å®Œå‘ç§æœ‰ npm åŒ…ï¼ˆç”¨ Verdaccioï¼‰ï¼›</p>
</li>
<li>
<p>åšå®¢é¡¹ç›®æ‰§è¡Œ <code>pnpm install @æˆ‘çš„è´¦å·/æ—¥å†ç»„ä»¶</code>ï¼›</p>
</li>
<li>
<p>ä¸¤æ¬¡æäº¤ï¼šå…ˆæäº¤ç»„ä»¶åº“ï¼Œå†æäº¤åšå®¢é¡¹ç›®ã€‚</p>
</li>
</ol>
<h4 data-id="heading-7">æ¡ˆä¾‹ 2ï¼šä¿®å¤å·¥å…·åº“ bugï¼ˆé«˜é¢‘è”åŠ¨åœºæ™¯ï¼‰</h4>
<ul>
<li><strong>çº¯ Monorepo</strong>ï¼š</li>
</ul>
<ol>
<li>
<p>æ”¹ <code>packages/å·¥å…·åº“</code> çš„ bugï¼›</p>
</li>
<li>
<p>åˆ‡æ¢åˆ°åšå®¢é¡¹ç›®éªŒè¯ï¼›</p>
</li>
<li>
<p>ä¸€æ¬¡æäº¤æå®šã€‚</p>
</li>
</ol>
<ul>
<li><strong>æ··åˆå¼ Monorepo</strong>ï¼š</li>
</ul>
<ol>
<li>
<p>æ—¥å¸¸ï¼šæ”¹å·¥å…·åº“â†’å‘ç‰ˆ v1.0.1â†’åšå®¢é¡¹ç›® <code>pnpm update</code>â†’æäº¤ï¼›</p>
</li>
<li>
<p>ç´§æ€¥è”åŠ¨ï¼šç”¨ <code>pnpm link ../å·¥å…·åº“</code> æœ¬åœ°å…³è”â†’æ”¹å®Œå·¥å…·åº“ç›´æ¥éªŒè¯â†’å·¥å…·åº“å‘ç‰ˆ + åšå®¢é¡¹ç›®å‡çº§â†’åˆ†åˆ«æäº¤ã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">å››ã€å·¥å…·é€‰å‹ï¼šä¸¤ç§æ¨¡å¼çš„ â€œå¥½æ­æ¡£â€</h3>
<h4 data-id="heading-9">çº¯ Monorepo å¿…å¤‡å·¥å…·</h4>

























<table><thead><tr><th>å·¥å…·åç§°</th><th>ä½œç”¨</th><th>ç®€å•ç”¨æ³•</th></tr></thead><tbody><tr><td>pnpm workspaces</td><td>ç®¡ç†å…¨ä»“åº“ä¾èµ–å’Œå­é¡¹ç›®ç›®å½•</td><td>æ ¹ç›®å½•å†™ <code>packages: ['packages/*', 'apps/*']</code></td></tr><tr><td>Turborepo</td><td>å…¨ä»“åº“å¢é‡æ„å»ºï¼Œä¸€æ¬¡å¯åŠ¨æ‰€æœ‰é¡¹ç›®</td><td><code>turbo run dev</code> æ ¹ç›®å½•æ‰§è¡Œ</td></tr><tr><td>Lerna</td><td>æ‰¹é‡ç»™å­é¡¹ç›®å‘ç‰ˆ</td><td><code>lerna publish</code> ä¸€é”®å‡ç‰ˆæœ¬</td></tr></tbody></table>
<h4 data-id="heading-10">æ··åˆå¼ Monorepo å¸¸ç”¨å·¥å…·</h4>

























<table><thead><tr><th>å·¥å…·åç§°</th><th>ä½œç”¨</th><th>ç®€å•ç”¨æ³•</th></tr></thead><tbody><tr><td>pnpm</td><td>ä¾èµ–ç¼“å­˜ + æœ¬åœ°å…³è”å…¬å…±åº“</td><td><code>pnpm link ../å·¥å…·åº“</code> å…³è”ï¼›<code>pnpm install</code> ç”¨ç¼“å­˜</td></tr><tr><td>Verdaccio</td><td>æ­ç§æœ‰ npm ä»“åº“ï¼Œå­˜å…¬å…±åº“åŒ…</td><td>å¯åŠ¨å <code>npm publish --registry æœ¬åœ°åœ°å€</code></td></tr><tr><td>turbo</td><td>åŠ é€Ÿå•ä¸ªé¡¹ç›®æ„å»ºå¯åŠ¨</td><td>è¿›å…¥åšå®¢ç›®å½• <code>turbo dev</code></td></tr></tbody></table>
<h3 data-id="heading-11">äº”ã€å¸¸è§é—®é¢˜è§£ç­”</h3>
<h4 data-id="heading-12">Q1ï¼šçº¯ Monorepo ä»“åº“ä¼šè¶Šæ¥è¶Šå¤§å—ï¼Ÿ</h4>
<p>ä¸ä¼šï¼æ ¹ç›®å½• <code>.gitignore</code> æ’é™¤ <code>node_modules/</code>ï¼ˆä¾èµ–ä¸è¿›ä»“åº“ï¼‰ã€<code>dist/</code>ï¼ˆæ„å»ºäº§ç‰©ä¸è¿›ä»“åº“ï¼‰ï¼Œå¤§æ–‡ä»¶ç”¨ Git LFS å­˜ï¼Œä½“ç§¯å¯æ§ã€‚</p>
<h4 data-id="heading-13">Q2ï¼šæ··åˆå¼ Monorepo èƒ½å¤ç”¨å·¥å…·åº“ä»£ç å—ï¼Ÿ</h4>
<p>å½“ç„¶ï¼æ—¥å¸¸ç”¨ç§æœ‰ npm åŒ…ï¼ˆVerdaccioï¼‰å®‰è£…å¼•ç”¨ï¼Œç´§æ€¥æƒ…å†µç”¨ <code>pnpm link</code> æœ¬åœ°å…³è”ï¼Œä¸¤ç§æ–¹å¼éƒ½èƒ½å¤ç”¨ã€‚</p>
<h4 data-id="heading-14">Q3ï¼šå›¢é˜Ÿå˜å¤§åèƒ½åˆ‡æ¢æ¨¡å¼å—ï¼Ÿ</h4>
<ul>
<li>
<p>æ··åˆå¼â†’çº¯ Monorepoï¼šæŠŠæ‰€æœ‰ä»“åº“ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªæ–°ä»“åº“ï¼Œé…å¥½å·¥ä½œåŒºå³å¯ï¼›</p>
</li>
<li>
<p>çº¯ Monorepoâ†’æ··åˆå¼ï¼šæ‹†åˆ†éœ€è¦ç‹¬ç«‹çš„é¡¹ç›®ï¼Œåˆå§‹åŒ–æ–°ä»“åº“å‘ç§æœ‰åŒ…ï¼Œå…¶ä»–é¡¹ç›®å®‰è£…å¼•ç”¨ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å…­ã€é€‰å‹æŒ‡å—ï¼š3 æ­¥é€‰å¯¹æ¨¡å¼</h3>
<h4 data-id="heading-16">ç¬¬ä¸€æ­¥ï¼šçœ‹ â€œè”åŠ¨é¢‘ç‡â€</h4>
<ul>
<li>
<p>æ¯å‘¨éƒ½è¦æ”¹å…¬å…±åº“ + ä¸šåŠ¡ä»£ç â†’çº¯ Monorepoï¼›</p>
</li>
<li>
<p>åŠå¹´æ”¹ä¸€æ¬¡å…¬å…±åº“ï¼Œæ—¥å¸¸åªå¼€å‘ä¸šåŠ¡â†’æ··åˆå¼ Monorepoã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">ç¬¬äºŒæ­¥ï¼šçœ‹ â€œå›¢é˜Ÿåˆ†å·¥â€</h4>
<ul>
<li>
<p>3-5 äººå°å›¢é˜Ÿï¼Œä¸€äººå¤šå²—â†’çº¯ Monorepoï¼›</p>
</li>
<li>
<p>10 äººä»¥ä¸Šï¼ŒåŸºå»ºç»„å’Œä¸šåŠ¡ç»„åˆ†å·¥æ˜ç¡®â†’æ··åˆå¼ Monorepoã€‚</p>
</li>
</ul>
<h4 data-id="heading-18">ç¬¬ä¸‰æ­¥ï¼šçœ‹ â€œçµæ´»åº¦éœ€æ±‚â€</h4>
<ul>
<li>
<p>æƒ³å°‘é…ç½®ï¼Œå¿«é€Ÿå¯åŠ¨â†’æ··åˆå¼ Monorepoï¼ˆå…‹éš†ä»“åº“å°±èƒ½ç”¨ï¼‰ï¼›</p>
</li>
<li>
<p>æ„¿æ„èŠ± 10 åˆ†é’Ÿé…å·¥ä½œåŒºï¼Œæ¢é•¿æœŸé«˜æ•ˆâ†’çº¯ Monorepoã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">ä¸ƒã€æ€»ç»“ï¼šæ²¡æœ‰ â€œæœ€ä¼˜â€ï¼Œåªæœ‰ â€œé€‚é…â€</h3>
<ul>
<li>
<p>çº¯ Monorepo æ˜¯ â€œé«˜æ•ˆè”åŠ¨æ´¾â€ï¼šé€‚åˆé«˜é¢‘æ”¹å…¬å…±åº“ã€å°å›¢é˜Ÿåä½œï¼Œç”¨ â€œä¸€æ¬¡æäº¤â€ çœæ—¶é—´ï¼›</p>
</li>
<li>
<p>æ··åˆå¼ Monorepo æ˜¯ â€œç¨³å®šçµæ´»æ´¾â€ï¼šé€‚åˆåˆ†å·¥æ˜ç¡®ã€å…¬å…±åº“ç¨³å®šçš„åœºæ™¯ï¼Œæ—¥å¸¸ç¨³å®š + ç´§æ€¥è”åŠ¨ä¸¤ä¸è¯¯ã€‚</p>
</li>
</ul>
<p>ä¸ç”¨çº ç»“ â€œå¿…é¡»é€‰å“ªç§â€ï¼Œå°å›¢é˜Ÿå¯ä»¥å…ˆä»çº¯ Monorepo èµ·æ­¥ï¼Œå›¢é˜Ÿå˜å¤§åˆ†å·¥æ˜ç¡®åï¼Œè¿‡æ¸¡åˆ°æ··åˆå¼ï¼›ä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ··åˆå¼ï¼Œå…¼é¡¾ç¨³å®šå’Œçµæ´» â€”â€” æ ¸å¿ƒæ˜¯è®©æ¨¡å¼é€‚é…ä½ çš„å¼€å‘èŠ‚å¥ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS å¼•æ“èµ›é“ä¸­çš„ Rust è§’è‰²]]></title>    <link>https://juejin.cn/post/7575102474639736883</link>    <guid>https://juejin.cn/post/7575102474639736883</guid>    <pubDate>2025-11-23T03:10:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102474639736883" data-draft-id="7575133880435654707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS å¼•æ“èµ›é“ä¸­çš„ Rust è§’è‰²"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-23T03:10:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yanni4Night"/> <meta itemprop="url" content="https://juejin.cn/user/4089838983724520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS å¼•æ“èµ›é“ä¸­çš„ Rust è§’è‰²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838983724520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yanni4Night
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:10:51.000Z" title="Sun Nov 23 2025 03:10:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>JavaScript å¼•æ“ä½œä¸ºç°ä»£ Web å¼€å‘çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œä¸€ç›´åœ¨æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨æ€§ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚éšç€ Rust è¯­è¨€çš„å´›èµ·ï¼Œè¿™ä¸ªä»¥å†…å­˜å®‰å…¨å’Œé«˜æ€§èƒ½è‘—ç§°çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€æ­£åœ¨ä¸º JavaScript å¼•æ“å¸¦æ¥æ–°çš„å¯èƒ½æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Rust åœ¨ JavaScript å¼•æ“èµ›é“ä¸­çš„è§’è‰²ï¼Œåˆ†æå½“å‰ä¸»è¦çš„ Rust å®ç°çš„ JavaScript å¼•æ“ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•å½±å“æœªæ¥ JavaScript çš„æ‰§è¡Œæ•ˆç‡å’Œå®‰å…¨æ€§ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€JavaScript å¼•æ“çš„æ¼”è¿›ä¸ Rust çš„æœºé‡</h2>
<p>JavaScript å¼•æ“ä»æœ€åˆçš„ç®€å•è§£é‡Šå™¨ï¼Œå‘å±•åˆ°å¦‚ä»Šå¤æ‚çš„ JIT ç¼–è¯‘æ‰§è¡Œç³»ç»Ÿï¼Œç»å†äº†æ˜¾è‘—çš„æŠ€æœ¯å˜é©ã€‚ä¼ ç»Ÿçš„ JavaScript å¼•æ“å¦‚ V8ï¼ˆChrome/Node.jsï¼‰ã€SpiderMonkeyï¼ˆFirefoxï¼‰å’Œ JavaScriptCoreï¼ˆSafariï¼‰ä¸»è¦ç”± C++ å®ç°ï¼Œè™½ç„¶æ€§èƒ½å“è¶Šï¼Œä½†åœ¨å†…å­˜å®‰å…¨æ€§å’Œå¹¶å‘æ§åˆ¶æ–¹é¢ä»é¢ä¸´æŒ‘æˆ˜ã€‚</p>
<p>Rust è¯­è¨€çš„å‡ºç°ä¸ºè¿™ä¸€é¢†åŸŸå¸¦æ¥äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚Rust å‡­å€Ÿå…¶æ‰€æœ‰æƒç³»ç»Ÿã€å€Ÿç”¨æ£€æŸ¥å™¨å’Œé›¶æˆæœ¬æŠ½è±¡ç­‰ç‰¹æ€§ï¼Œèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶æ•è·å†…å­˜é”™è¯¯ï¼ŒåŒæ—¶ä¿æŒä¸ C++ ç›¸å½“çš„æ€§èƒ½ã€‚è¿™ä½¿å¾— Rust æˆä¸ºæ„å»ºæ–°ä¸€ä»£ JavaScript å¼•æ“çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h2 data-id="heading-2">äºŒã€ä¸»è¦çš„ Rust å®ç°çš„ JavaScript å¼•æ“</h2>
<h3 data-id="heading-3">2.1 Boaï¼šçº¯ Rust å®ç°çš„å®éªŒæ€§å¼•æ“</h3>
<p>Boa æ˜¯ç›®å‰æœ€çŸ¥åçš„çº¯ Rust å®ç°çš„ JavaScript å¼•æ“ä¹‹ä¸€ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°ï¼Œä»£ç ä»“åº“çº¦ 6.1K Starsï¼Œ208 è´¡çŒ®è€…</li>
<li>æœ€å°ç¼–è¯‘åä½“ç§¯çº¦ 1MBï¼Œå†…å­˜å ç”¨é€šå¸¸ä½äº 5MB</li>
<li>æä¾›å®Œæ•´çš„è¯æ³•åˆ†æå™¨ã€è§£æå™¨å’Œè§£é‡Šå™¨å®ç°</li>
<li>æ”¯æŒ ES5 å®Œæ•´ç‰¹æ€§ï¼ŒES6+ éƒ¨åˆ†ç‰¹æ€§ï¼Œå…¼å®¹æ€§çº¦ 85%</li>
<li>æä¾› C API å’Œ WebAssembly æ„å»ºç›®æ ‡</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>Rust åµŒå…¥å¼é¡¹ç›®ä¸­çš„è„šæœ¬æ‰©å±•</li>
<li>Boa å¼•æ“è‡ªèº«çš„æµ‹è¯•å’Œç¤ºä¾‹åº”ç”¨</li>
<li>æ•™è‚²é¢†åŸŸç”¨äºæ•™å­¦ JavaScript å¼•æ“å†…éƒ¨å·¥ä½œåŸç†</li>
</ul>
<p><strong>è¯„åˆ†ï¼š3.5/5</strong> - ä½œä¸ºçº¯ Rust å¼•æ“çš„å…ˆé©±è€…ï¼Œåœ¨å®‰å…¨æ€§å’Œè½»é‡çº§æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨åŠŸèƒ½å®Œæ•´æ€§å’Œæ€§èƒ½æ–¹é¢ä»æœ‰æå‡ç©ºé—´ã€‚</p>
<h3 data-id="heading-4">2.2 Yavasharkï¼šè½»é‡çº§ Rust JavaScript å¼•æ“</h3>
<p>Yavashark æ˜¯ä¸€ä¸ªæ–°å…´çš„ Rust å®ç°çš„ JavaScript å¼•æ“ï¼Œä¸“æ³¨äºè½»é‡çº§åº”ç”¨åœºæ™¯ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°ï¼Œä»£ç åº“çº¦ 1225 Stars</li>
<li>ç¼–è¯‘åä½“ç§¯çº¦ 5.6MBï¼Œå¯åŠ¨æ—¶é—´å°äº 10ms</li>
<li>æ”¯æŒ ES2023 å®Œæ•´æ ‡å‡†ï¼ŒES2025 å…¼å®¹æ€§è¾¾ 98%</li>
<li>åŸºäºæ ‡è®°-æ¸…é™¤åƒåœ¾æ”¶é›†å™¨ï¼Œå†…å­˜å ç”¨å³°å€¼é€šå¸¸ä½äº 20MB</li>
<li>æä¾›å¤šçº¿ç¨‹æ‰§è¡Œæ”¯æŒï¼Œåˆ©ç”¨ Rust çš„å®‰å…¨å¹¶å‘ç‰¹æ€§</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>èµ„æºå—é™çš„åµŒå…¥å¼è®¾å¤‡</li>
<li>éœ€è¦å¿«é€Ÿå¯åŠ¨çš„è¾¹ç¼˜è®¡ç®—åº”ç”¨</li>
<li>éƒ¨åˆ†å®éªŒæ€§ WebAssembly è¿è¡Œæ—¶çš„ JavaScript æ”¯æŒ</li>
</ul>
<p><strong>è¯„åˆ†ï¼š4.0/5</strong> - åœ¨æ ‡å‡†å…¼å®¹æ€§æ–¹é¢è¡¨ç°çªå‡ºï¼Œè½»é‡çº§è®¾è®¡ä½¿å…¶é€‚åˆåµŒå…¥å¼åœºæ™¯ï¼Œä½†ç¤¾åŒºè§„æ¨¡ç›¸å¯¹è¾ƒå°å½±å“å…¶ç”Ÿæ€å»ºè®¾ã€‚</p>
<h3 data-id="heading-5">2.3 Novaï¼šæ–°ä¸€ä»£ Rust JavaScript å¼•æ“</h3>
<p>Nova æ˜¯å¦ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„ Rust å®ç°çš„ JavaScript å¼•æ“ï¼Œåœ¨æ€§èƒ½å’Œæ ‡å‡†æ”¯æŒæ–¹é¢éƒ½æœ‰ä¸ä¿—è¡¨ç°ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°ï¼Œé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡</li>
<li>å­—èŠ‚ç è§£é‡Šå™¨é’ˆå¯¹çƒ­ç‚¹è·¯å¾„ä¼˜åŒ–ï¼Œæ¯”åŒç±»è§£é‡Šå™¨å¿«çº¦ 15-20%</li>
<li>å†…å­˜å ç”¨åŸºå‡†æµ‹è¯•æ˜¾ç¤ºæ¯” Boa ä½çº¦ 30%</li>
<li>æä¾›æ’ä»¶ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰å†…ç½®å¯¹è±¡å’Œå‡½æ•°</li>
<li>å¯åŠ¨æ—¶é—´å¹³å‡ä½äº 5msï¼Œé€‚åˆå¿«é€Ÿå¯åŠ¨åœºæ™¯</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>éƒ¨åˆ†å®æ—¶åº”ç”¨çš„è„šæœ¬å¼•æ“</li>
<li>éœ€è¦é«˜æ€§èƒ½å“åº”çš„æ¡Œé¢åº”ç”¨æ’ä»¶ç³»ç»Ÿ</li>
<li>æŸäº›å®éªŒæ€§çš„å¾®å‰ç«¯æ¡†æ¶</li>
</ul>
<p><strong>è¯„åˆ†ï¼š3.8/5</strong> - åœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢æœ‰äº®ç‚¹ï¼Œæ¨¡å—åŒ–è®¾è®¡æå‡äº†æ‰©å±•æ€§ï¼Œä½†é¡¹ç›®æˆç†Ÿåº¦å’Œç”Ÿæ€ç³»ç»Ÿä»åœ¨å‘å±•ä¸­ã€‚</p>
<h3 data-id="heading-6">2.4 Brimstoneï¼šä¸“æ³¨æ€§èƒ½çš„ Rust JavaScript å¼•æ“</h3>
<p>Brimstone æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ€§èƒ½ä¼˜åŒ–çš„ Rust å®ç°çš„ JavaScript å¼•æ“ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°ï¼ŒåŒ…å«åŸºç¡€çš„ JIT ç¼–è¯‘èƒ½åŠ›</li>
<li>çƒ­ç‚¹è·¯å¾„æ‰§è¡Œé€Ÿåº¦æ¯”çº¯è§£é‡Šå™¨å¿« 2-3 å€</li>
<li>æä¾› WebAssembly æ¨¡å—åŠ è½½å’Œé€šä¿¡æ¥å£</li>
<li>å†…å­˜å ç”¨çº¦ 7-15MBï¼Œå–å†³äºæ‰§è¡Œçš„ JavaScript å¤æ‚åº¦</li>
<li>æ”¯æŒ SIMD æŒ‡ä»¤é›†ä¼˜åŒ–æ•°å€¼è®¡ç®—å¯†é›†å‹æ“ä½œ</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>éœ€è¦é«˜æ€§èƒ½æ•°å€¼è®¡ç®—çš„ç§‘å­¦è®¡ç®—åº”ç”¨</li>
<li>æ¸¸æˆå¼•æ“ä¸­çš„è„šæœ¬ç³»ç»Ÿ</li>
<li>WebAssembly è¿è¡Œæ—¶ä¸­çš„ JavaScript äº’æ“ä½œå±‚</li>
</ul>
<p><strong>è¯„åˆ†ï¼š4.2/5</strong> - åœ¨æ€§èƒ½æ–¹é¢è¡¨ç°çªå‡ºï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°å€¼è®¡ç®—é¢†åŸŸï¼Œä¸ WebAssembly çš„é›†æˆä¹Ÿå¾ˆæœ‰ä¼˜åŠ¿ï¼Œä½†åŠŸèƒ½è¦†ç›–èŒƒå›´ä»éœ€æ‰©å±•ã€‚</p>
<h3 data-id="heading-7">2.5 SpiderMonkey ç”Ÿæ€ä¸­çš„ Rust é¡¹ç›®</h3>
<p>Mozilla çš„ SpiderMonkey å¼•æ“è™½ç„¶ä¸»è¦ç”¨ C++ å®ç°ï¼Œä½†åœ¨å…¶ç”Ÿæ€ç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„ Rust é¡¹ç›®ï¼š</p>
<h4 data-id="heading-8">2.5.1 Mozjsï¼šSpiderMonkey ä¸ Rust çš„ç»“åˆ</h4>
<p>Mozjs æä¾›äº† SpiderMonkey å¼•æ“çš„å®Œæ•´ Rust ç»‘å®šï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨ Rust é¡¹ç›®ä¸­æ— ç¼é›†æˆæˆç†Ÿçš„ SpiderMonkey å¼•æ“ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å®Œæ•´å°è£… SpiderMonkey C++ APIï¼Œæä¾›çº¦ 200 ä¸ª Rust ç»“æ„ä½“å’Œç‰¹å¾</li>
<li>æ”¯æŒ ECMAScript 2023 å®Œæ•´æ ‡å‡†</li>
<li>å†…å­˜å ç”¨çº¦ 50-150MBï¼Œå–å†³äºæ‰§è¡Œçš„ JavaScript å¤æ‚åº¦</li>
<li>æä¾›å®Œæ•´çš„ JIT ç¼–è¯‘ã€åƒåœ¾å›æ”¶å’Œå¹¶å‘æ”¯æŒ</li>
<li>æ„å»ºå¤§å°çº¦ 20-30MBï¼Œå–å†³äºç¼–è¯‘é€‰é¡¹</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>Mozilla Firefox çš„éƒ¨åˆ† Rust ç»„ä»¶ä¸ SpiderMonkey çš„äº¤äº’</li>
<li>ä¸€äº›ä½¿ç”¨ Rust æ„å»ºçš„éœ€è¦å®Œæ•´ JavaScript æ”¯æŒçš„æ¡Œé¢åº”ç”¨</li>
<li>æœåŠ¡ç«¯åº”ç”¨ä¸­çš„ JavaScript æ’ä»¶ç³»ç»Ÿ</li>
</ul>
<p><strong>è¯„åˆ†ï¼š4.5/5</strong> - åœ¨åŠŸèƒ½å®Œæ•´æ€§å’Œæ€§èƒ½æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä¾æ‰˜æˆç†Ÿçš„ SpiderMonkey å¼•æ“ï¼Œä½†é›†æˆå¤æ‚åº¦è¾ƒé«˜ï¼Œä¸”å¹¶éçº¯ Rust å®ç°ã€‚</p>
<h4 data-id="heading-9">2.5.2 Jsparagusï¼šRust æ„å»ºçš„ JavaScript è§£æå™¨</h4>
<p>Jsparagus æ˜¯ä¸€ä¸ªç”± Mozilla å¼€å‘çš„ä½¿ç”¨ Rust æ„å»ºçš„ JavaScript è§£æå™¨ï¼Œå®ƒçš„ç›®æ ‡æ˜¯é€æ­¥æ›¿æ¢ SpiderMonkey ä¸­çš„ç°æœ‰è§£æå™¨ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°ï¼ŒåŸºäº PEG (Parsing Expression Grammar) è§£æå™¨ç”Ÿæˆå™¨</li>
<li>è§£æé€Ÿåº¦æ¯”ä¼ ç»Ÿé€’å½’ä¸‹é™è§£æå™¨å¿«çº¦ 10-15%</li>
<li>å†…å­˜å ç”¨å³°å€¼é€šå¸¸ä½äº 5MB</li>
<li>ç”Ÿæˆçš„è§£ææ ‘æ”¯æŒå¢é‡æ›´æ–°ï¼Œé€‚åˆç¼–è¾‘å™¨å®æ—¶è§£æåœºæ™¯</li>
<li>ä»£ç è¦†ç›–ç‡è¾¾ 95% ä»¥ä¸Š</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>Mozilla Firefox çš„ JavaScript è§£æå™¨ç»„ä»¶</li>
<li>ä¸€äº›éœ€è¦é«˜æ€§èƒ½ JavaScript è§£æçš„å¼€å‘å·¥å…·</li>
<li>éƒ¨åˆ† IDE çš„ JavaScript ä»£ç åˆ†æåŠŸèƒ½</li>
</ul>
<p><strong>è¯„åˆ†ï¼š4.3/5</strong> - åœ¨è§£ææ€§èƒ½å’Œå‡†ç¡®æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½œä¸ºä¸“ä¸šè§£æå™¨æœ‰å¾ˆé«˜çš„æŠ€æœ¯æ°´å‡†ï¼Œä½†åŠŸèƒ½ä»…é™äºè§£æé˜¶æ®µï¼Œä¸åŒ…å«æ‰§è¡Œç¯å¢ƒã€‚</p>
<h3 data-id="heading-10">2.6 å…¶ä»– Rust ç›¸å…³çš„ JavaScript å¼•æ“é¡¹ç›®</h3>
<h4 data-id="heading-11">2.6.1 Rustyscript</h4>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>çº¯ Rust å®ç°çš„è½»é‡çº§ JavaScript æ‰§è¡Œç¯å¢ƒ</li>
<li>æä¾›ç®€åŒ–çš„ APIï¼Œæœ€å°åŒ–é›†æˆå¤æ‚åº¦</li>
<li>å†…å­˜å ç”¨é€šå¸¸åœ¨ 3-8MB èŒƒå›´å†…</li>
<li>æ”¯æŒåŸºç¡€çš„ ES5 ç‰¹æ€§å’Œéƒ¨åˆ† ES6 ç‰¹æ€§</li>
<li>ç¼–è¯‘åä½“ç§¯çº¦ 3.5MB</li>
</ul>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>ç®€å•çš„è„šæœ¬è‡ªåŠ¨åŒ–ä»»åŠ¡</li>
<li>é…ç½®æ–‡ä»¶è§£æå’Œæ‰§è¡Œ</li>
<li>å°å‹åº”ç”¨çš„æ’ä»¶ç³»ç»Ÿ</li>
</ul>
<p><strong>è¯„åˆ†ï¼š3.0/5</strong> - ä½œä¸ºè½»é‡çº§è§£å†³æ–¹æ¡ˆå…·æœ‰ä¸€å®šä¼˜åŠ¿ï¼Œä½†åŠŸèƒ½è¦†ç›–èŒƒå›´æœ‰é™ï¼Œé€‚åˆç®€å•åœºæ™¯ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-12">2.6.2 å…¶ä»–ç›¸å…³é¡¹ç›®</h4>
<ul>
<li><strong>Wasmer çš„ JavaScript æ”¯æŒ</strong>ï¼šWebAssembly è¿è¡Œæ—¶å¯¹ JavaScript çš„é›†æˆæ”¯æŒï¼Œå…è®¸åœ¨ WebAssembly ç¯å¢ƒä¸­åµŒå…¥ JavaScript ä»£ç </li>
<li><strong>js2rust</strong>ï¼šæ¢ç´¢ JavaScript åˆ° Rust çš„ç¼–è¯‘è½¬æ¢ï¼Œè¯•å›¾å°† JavaScript ä»£ç è‡ªåŠ¨è½¬æ¢ä¸º Rust ä»£ç ä»¥æé«˜æ€§èƒ½å’Œå®‰å…¨æ€§</li>
</ul>
<h2 data-id="heading-13">ä¸‰ã€Rust ä¸º JavaScript å¼•æ“å¸¦æ¥çš„æŠ€æœ¯ä¼˜åŠ¿</h2>
<h3 data-id="heading-14">3.1 å†…å­˜å®‰å…¨ä¸æ¼æ´å‡å°‘</h3>
<p>Rust çš„æ‰€æœ‰æƒç³»ç»Ÿå’Œå€Ÿç”¨æ£€æŸ¥å™¨èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶æ•è·å¤§é‡å†…å­˜ç›¸å…³çš„é”™è¯¯ï¼Œè¿™å¯¹äº JavaScript å¼•æ“è¿™ç±»å¤æ‚ç³»ç»Ÿå°¤ä¸ºé‡è¦ã€‚æ ¹æ®ç ”ç©¶æ•°æ®ï¼Œä½¿ç”¨ Rust å¯ä»¥æ˜¾è‘—å‡å°‘å†…å­˜å®‰å…¨æ¼æ´ã€‚ä¾‹å¦‚ï¼Œåä¸ºå°† OpenEuler å†…æ ¸é©±åŠ¨ Rust åŒ–åï¼Œå‡å°‘äº† 67% çš„å†…å­˜å®‰å…¨æ¼æ´ 1ã€‚</p>
<h3 data-id="heading-15">3.2 å¹¶å‘æ€§èƒ½çš„æå‡</h3>
<p>Rust çš„æ— æ•°æ®ç«äº‰ä¿è¯ä½¿å¾— JavaScript å¼•æ“èƒ½å¤Ÿæ›´å®‰å…¨åœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ã€‚ä¸ä¼ ç»Ÿçš„åŸºäºé”çš„å¹¶å‘æ¨¡å‹ç›¸æ¯”ï¼ŒRust çš„æ‰€æœ‰æƒç³»ç»Ÿæä¾›äº†æ›´ç»†ç²’åº¦çš„å¹¶å‘æ§åˆ¶ï¼Œå‡å°‘äº†æ­»é”å’Œèµ„æºäº‰ç”¨çš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-16">3.3 èµ„æºå ç”¨ä¼˜åŒ–</h3>
<p>Rust ç¨‹åºé€šå¸¸å…·æœ‰è¾ƒå°çš„å†…å­˜å ç”¨å’Œå¯åŠ¨æ—¶é—´ã€‚è¿™ä½¿å¾— Rust å®ç°çš„ JavaScript å¼•æ“åœ¨åµŒå…¥å¼ç¯å¢ƒå’Œèµ„æºå—é™è®¾å¤‡ä¸Šå…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚ä¾‹å¦‚ï¼Œç±»ä¼¼ Tauri è¿™æ ·çš„åŸºäº Rust çš„æ¡Œé¢åº”ç”¨æ¡†æ¶ï¼Œé€šè¿‡ä½¿ç”¨ Rust å’Œ Webview2ï¼ŒæˆåŠŸè§£å†³äº† Electron çš„åŒ…ä½“ç§¯å¤§ã€å†…å­˜å ç”¨é«˜çš„é—®é¢˜ 4ã€‚</p>
<h2 data-id="heading-17">å››ã€ä»£ç ç¤ºä¾‹ï¼šRust ä¸ JavaScript å¼•æ“çš„é›†æˆ</h2>
<p>æœ¬èŠ‚æä¾›å‡ ä¸ªå®ç”¨çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ Rust é¡¹ç›®ä¸­é›†æˆå’Œä½¿ç”¨ä¸åŒçš„ JavaScript å¼•æ“ã€‚</p>
<h3 data-id="heading-18">4.1 ä½¿ç”¨ Boa å¼•æ“æ‰§è¡Œè¡¨è¾¾å¼å’Œå‡½æ•°</h3>
<p>Boa æä¾›äº†ç®€æ´çš„ API æ¥æ‰§è¡Œ JavaScript ä»£ç ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å…¨é¢çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ï¼šåˆå§‹åŒ–å¼•æ“ã€æ‰§è¡Œè¡¨è¾¾å¼ã€è°ƒç”¨å‡½æ•°ã€å¤„ç†é”™è¯¯ï¼Œä»¥åŠåœ¨ Rust å’Œ JavaScript ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> boa_engine::{Context, Source, js_string};
<span class="hljs-keyword">use</span> boa_engine::property::Attribute;
<span class="hljs-keyword">use</span> boa_engine::value::StringOrSymbol;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
    <span class="hljs-comment">// åˆ›å»º JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">context</span> = Context::<span class="hljs-title function_ invoke__">default</span>();
    
    <span class="hljs-comment">// 1. æ‰§è¡Œç®€å•è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = context.<span class="hljs-title function_ invoke__">eval</span>(Source::<span class="hljs-title function_ invoke__">from_bytes</span>(<span class="hljs-string">"2 + 2 * 10"</span>))?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ•°å­¦è¡¨è¾¾å¼ç»“æœ: {}"</span>, result);
    
    <span class="hljs-comment">// 2. å®šä¹‰å’Œè°ƒç”¨å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">js_code</span> = <span class="hljs-string">r#"
        function calculateFactorial(n) {
            if (n &lt;= 1) return 1;
            return n * calculateFactorial(n - 1);
        }
        
        // è¿”å›ä¸€ä¸ªå¯¹è±¡
        {
            factorial: calculateFactorial,
            version: "1.0.0",
            processData: function(data) {
                return data.map(item =&gt; item * 2).filter(item =&gt; item &gt; 10);
            }
        }
    "#</span>;
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">js_module</span> = context.<span class="hljs-title function_ invoke__">eval</span>(Source::<span class="hljs-title function_ invoke__">from_bytes</span>(js_code))?;
    
    <span class="hljs-comment">// 3. è°ƒç”¨ JavaScript å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">args</span> = [<span class="hljs-number">20</span>.<span class="hljs-title function_ invoke__">into</span>()]; <span class="hljs-comment">// è®¡ç®— 20 çš„é˜¶ä¹˜</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">factorial_result</span> = context.<span class="hljs-title function_ invoke__">call_property</span>(
        &amp;js_module, 
        js_string!(<span class="hljs-string">"factorial"</span>), 
        &amp;args
    )?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"20 çš„é˜¶ä¹˜: {}"</span>, factorial_result);
    
    <span class="hljs-comment">// 4. ä» Rust å‘ JavaScript ä¼ é€’æ•°æ®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">12</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">js_array</span> = context.<span class="hljs-title function_ invoke__">construct_array</span>(data.<span class="hljs-title function_ invoke__">into_iter</span>())?;
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">process_args</span> = [js_array];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">processed_data</span> = context.<span class="hljs-title function_ invoke__">call_property</span>(
        &amp;js_module, 
        js_string!(<span class="hljs-string">"processData"</span>), 
        &amp;process_args
    )?;
    
    <span class="hljs-comment">// 5. è·å– JavaScript å¯¹è±¡çš„å±æ€§</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">version</span> = context.<span class="hljs-title function_ invoke__">get_property</span>(
        &amp;js_module, 
        StringOrSymbol::<span class="hljs-title function_ invoke__">String</span>(js_string!(<span class="hljs-string">"version"</span>))
    )?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ¨¡å—ç‰ˆæœ¬: {}"</span>, version);
    
    <span class="hljs-comment">// 6. æ³¨å†Œ Rust å‡½æ•°åˆ° JavaScript ç¯å¢ƒ</span>
    context.<span class="hljs-title function_ invoke__">register_global_function</span>(
        <span class="hljs-string">"logFromRust"</span>, 
        <span class="hljs-number">1</span>, 
        |_, args, _| {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(arg) = args.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>) {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">"JavaScript è°ƒç”¨ Rust å‡½æ•°: {}"</span>, arg);
            }
            <span class="hljs-title function_ invoke__">Ok</span>(().<span class="hljs-title function_ invoke__">into</span>())
        }
    )?;
    
    context.<span class="hljs-title function_ invoke__">eval</span>(Source::<span class="hljs-title function_ invoke__">from_bytes</span>(<span class="hljs-string">"logFromRust('Hello from JavaScript!')"</span>))?;
    
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h3 data-id="heading-19">4.2 ä½¿ç”¨ Mozjs (SpiderMonkey çš„ Rust ç»‘å®š)</h3>
<p>Mozjs æä¾›äº† SpiderMonkey å¼•æ“çš„å®Œæ•´ Rust ç»‘å®šï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å®ç”¨çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ‰§è¡Œ JavaScript ä»£ç ã€å¤„ç†å€¼å’Œé”™è¯¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> mozjs::jsapi::{JSContext, JS_NewRuntime, JS_EnterCompartment, JS_Init, JS::RootedValue, JS::RootedObject};
<span class="hljs-keyword">use</span> mozjs::jsval::UndefinedValue;
<span class="hljs-keyword">use</span> mozjs::rust::{Runtime, Context, JSEngine};
<span class="hljs-keyword">use</span> std::ptr;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆå§‹åŒ– SpiderMonkey å¼•æ“</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">engine</span> = JSEngine::<span class="hljs-title function_ invoke__">init</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-comment">// åˆ›å»ºè¿è¡Œæ—¶ç¯å¢ƒï¼ˆè®¾ç½® 8MB å †å¤§å°ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">runtime</span> = Runtime::<span class="hljs-title function_ invoke__">new</span>(engine.<span class="hljs-title function_ invoke__">handle</span>(), <span class="hljs-number">8</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-comment">// åˆ›å»º JavaScript ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">context</span> = Context::<span class="hljs-title function_ invoke__">new</span>(&amp;runtime).<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-comment">// è¿›å…¥ JavaScript ä¸Šä¸‹æ–‡çš„æ‰§è¡ŒåŒºåŸŸ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_ac</span> = context.<span class="hljs-title function_ invoke__">acquire</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-comment">// è·å–å…¨å±€å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">global</span> = context.<span class="hljs-title function_ invoke__">global_object</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª JavaScript å€¼ç”¨äºå­˜å‚¨æ‰§è¡Œç»“æœ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = RootedValue::<span class="hljs-title function_ invoke__">new</span>(context.<span class="hljs-title function_ invoke__">as_ptr</span>());
    
    <span class="hljs-comment">// 1. æ‰§è¡Œç®€å•çš„ JavaScript è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">js_code</span> = <span class="hljs-string">"2 + 3 * 4"</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰§è¡Œè¡¨è¾¾å¼: {}"</span>, js_code);
    
    <span class="hljs-keyword">match</span> context.<span class="hljs-title function_ invoke__">evaluate_script</span>(js_code, <span class="hljs-string">"&lt;test&gt;"</span>, <span class="hljs-number">1</span>, &amp;<span class="hljs-keyword">mut</span> result) {
        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰§è¡Œç»“æœ: {}"</span>, result);
        },
        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰§è¡Œé”™è¯¯: {}"</span>, e);
        }
    }
    
    <span class="hljs-comment">// 2. å®šä¹‰å’Œè°ƒç”¨ JavaScript å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_code</span> = <span class="hljs-string">r#"
        function greet(name) {
            return 'Hello, ' + name + '! Welcome to SpiderMonkey via Rust!';
        }
        
        // å¯¼å‡ºå‡½æ•°åˆ°å…¨å±€å¯¹è±¡
        this.greet = greet;
        true; // è¡¨è¾¾å¼è¿”å›å€¼
    "#</span>;
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\næ³¨å†Œ JavaScript å‡½æ•°"</span>);
    <span class="hljs-keyword">if</span> context.<span class="hljs-title function_ invoke__">evaluate_script</span>(function_code, <span class="hljs-string">"&lt;functions&gt;"</span>, <span class="hljs-number">1</span>, &amp;<span class="hljs-keyword">mut</span> result).<span class="hljs-title function_ invoke__">is_ok</span>() {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‡½æ•°æ³¨å†ŒæˆåŠŸ"</span>);
        
        <span class="hljs-comment">// 3. å‡†å¤‡è°ƒç”¨å‡½æ•°çš„å‚æ•°</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">name_value</span> = context.<span class="hljs-title function_ invoke__">string_value</span>(<span class="hljs-string">"Rust Developer"</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">args</span> = [name_value];
        
        <span class="hljs-comment">// 4. è°ƒç”¨å…¨å±€å‡½æ•°</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(greet_func) = context.<span class="hljs-title function_ invoke__">get_property</span>(&amp;global, <span class="hljs-string">"greet"</span>) {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\nè°ƒç”¨ greet å‡½æ•°"</span>);
            <span class="hljs-keyword">if</span> context.<span class="hljs-title function_ invoke__">call_function</span>(<span class="hljs-literal">None</span>, &amp;greet_func, &amp;<span class="hljs-keyword">mut</span> args, &amp;<span class="hljs-keyword">mut</span> result).<span class="hljs-title function_ invoke__">is_ok</span>() {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‡½æ•°è¿”å›: {}"</span>, result);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‡½æ•°è°ƒç”¨å¤±è´¥"</span>);
            }
        }
    }
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\nSpiderMonkey å¼•æ“ä½¿ç”¨å®Œæˆ"</span>);
}
</code></pre>
<h3 data-id="heading-20">4.3 ä½¿ç”¨ Rustyscript æ‰§è¡Œç®€å•è„šæœ¬</h3>
<p>Rustyscript æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript æ‰§è¡Œç¯å¢ƒï¼Œä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒçš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> rustyscript::{json_args, Runtime, Script, Module, Error};
<span class="hljs-keyword">use</span> std::collections::HashMap;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), Error&gt; {
    <span class="hljs-comment">// 1. åˆ›å»ºåŸºæœ¬è¿è¡Œæ—¶</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"=== åˆ›å»ºåŸºæœ¬è¿è¡Œæ—¶ ==="</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">runtime</span> = Runtime::<span class="hljs-title function_ invoke__">new</span>()?;
    
    <span class="hljs-comment">// æ‰§è¡Œç®€å•è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span>: <span class="hljs-type">i64</span> = runtime.<span class="hljs-title function_ invoke__">execute_expression</span>(<span class="hljs-string">"5 + 5 * 2"</span>)?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¡¨è¾¾å¼ç»“æœ: {}"</span>, result);
    
    <span class="hljs-comment">// 2. åˆ›å»ºåŒ…å«è‡ªå®šä¹‰å‡½æ•°çš„è„šæœ¬</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\n=== æ‰§è¡ŒåŒ…å«å‡½æ•°çš„è„šæœ¬ ==="</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">script</span> = Script::<span class="hljs-title function_ invoke__">from_string</span>(<span class="hljs-string">r#"
        function calculateDiscount(price, rate) {
            return price * (1 - rate / 100);
        }
        
        function formatCurrency(amount) {
            return '$' + amount.toFixed(2);
        }
        
        // è¿”å›å¯ç”¨å‡½æ•°çš„å¯¹è±¡
        {
            calculateDiscount,
            formatCurrency
        }
    "#</span>);
    
    <span class="hljs-comment">// 3. æ‰§è¡Œè„šæœ¬å¹¶è·å–å¯¼å‡ºçš„å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">module</span>: Module = runtime.<span class="hljs-title function_ invoke__">execute_module</span>(script)?;
    
    <span class="hljs-comment">// 4. è°ƒç”¨å¯¼å‡ºçš„å‡½æ•°</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\n=== è°ƒç”¨ JavaScript å‡½æ•° ==="</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">price</span> = <span class="hljs-number">100.0</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">discount_rate</span> = <span class="hljs-number">20.0</span>;
    
    <span class="hljs-comment">// è°ƒç”¨è®¡ç®—æŠ˜æ‰£çš„å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">discounted_price</span>: <span class="hljs-type">f64</span> = module.<span class="hljs-title function_ invoke__">call</span>(<span class="hljs-string">"calculateDiscount"</span>, json_args!(price, discount_rate))?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åŸä»· ${}, æŠ˜æ‰£ {}%, æŠ˜åä»·: ${:.2}"</span>, 
             price, discount_rate, discounted_price);
    
    <span class="hljs-comment">// è°ƒç”¨æ ¼å¼åŒ–è´§å¸çš„å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">formatted</span>: <span class="hljs-type">String</span> = module.<span class="hljs-title function_ invoke__">call</span>(<span class="hljs-string">"formatCurrency"</span>, json_args!(discounted_price))?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ ¼å¼åŒ–åçš„ä»·æ ¼: {}"</span>, formatted);
    
    <span class="hljs-comment">// 5. æ³¨å†Œ Rust å‡½æ•°åˆ° JavaScript ç¯å¢ƒ</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\n=== æ³¨å†Œ Rust å‡½æ•°åˆ° JavaScript ==="</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">runtime_with_functions</span> = Runtime::<span class="hljs-title function_ invoke__">new</span>()?;
    
    <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªæ—¥å¿—å‡½æ•°</span>
    runtime_with_functions.<span class="hljs-title function_ invoke__">register_function</span>(<span class="hljs-string">"logMessage"</span>, <span class="hljs-keyword">move</span> |args: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;| <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, Error&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">message</span> = args.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap_or</span>(&amp;<span class="hljs-string">"No message"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"[Rust] JavaScript è°ƒç”¨: {}"</span>, message);
        <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"Rust æ”¶åˆ°: {}"</span>, message))
    })?;
    
    <span class="hljs-comment">// åœ¨ JavaScript ä¸­è°ƒç”¨ Rust å‡½æ•°</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">js_result</span>: <span class="hljs-type">String</span> = runtime_with_functions.<span class="hljs-title function_ invoke__">execute_expression</span>(<span class="hljs-string">r#"
        logMessage('Hello from JavaScript to Rust!')
    "#</span>)?;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"JavaScript æ”¶åˆ° Rust å‡½æ•°è¿”å›: {}"</span>, js_result);
    
    <span class="hljs-comment">// 6. ä½¿ç”¨ Rust çš„ç±»å‹ç³»ç»Ÿä¸ JavaScript äº¤äº’</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\n=== ç±»å‹äº¤äº’ç¤ºä¾‹ ==="</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">type_runtime</span> = Runtime::<span class="hljs-title function_ invoke__">new</span>()?;
    
    <span class="hljs-comment">// åˆ›å»ºåŒ…å«æ•°æ®çš„ JavaScript å¯¹è±¡</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = HashMap::<span class="hljs-title function_ invoke__">from</span>([
        (<span class="hljs-string">"name"</span>, <span class="hljs-string">"Product A"</span>),
        (<span class="hljs-string">"price"</span>, <span class="hljs-string">"29.99"</span>),
        (<span class="hljs-string">"inStock"</span>, <span class="hljs-string">"true"</span>)
    ]);
    
    <span class="hljs-comment">// å°†æ•°æ®æ³¨å…¥åˆ° JavaScript ç¯å¢ƒ</span>
    type_runtime.<span class="hljs-title function_ invoke__">insert_values</span>(data)?;
    
    <span class="hljs-comment">// åœ¨ JavaScript ä¸­ä½¿ç”¨è¿™äº›å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">total_price</span>: <span class="hljs-type">String</span> = type_runtime.<span class="hljs-title function_ invoke__">execute_expression</span>(<span class="hljs-string">r#"
        const taxRate = 0.1;
        const price = parseFloat(price);
        const tax = price * taxRate;
        
        `${name} - å«ç¨æ€»ä»·: $${(price + tax).toFixed(2)}`
    "#</span>)?;
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç±»å‹äº¤äº’ç»“æœ: {}"</span>, total_price);
    
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h2 data-id="heading-21">äº”ã€JavaScript å¼•æ“æŠ€æœ¯å¯¹æ¯”</h2>
<h3 data-id="heading-22">5.1 è¯­è¨€å®ç°å¯¹æ¯”</h3>















































<table><thead><tr><th>ç‰¹æ€§</th><th>Rust å®ç° (å¦‚ Boa)</th><th>C++ å®ç° (å¦‚ V8)</th><th>C å®ç° (å¦‚ QuickJS)</th></tr></thead><tbody><tr><td>å†…å­˜å®‰å…¨</td><td>ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œå‡ ä¹æ— å†…å­˜é”™è¯¯</td><td>ä¾èµ–æ‰‹åŠ¨å†…å­˜ç®¡ç†ï¼Œå­˜åœ¨æ½œåœ¨é£é™©</td><td>æœ‰é™çš„å†…å­˜å®‰å…¨ä¿è¯</td></tr><tr><td>æ€§èƒ½</td><td>è‰¯å¥½ï¼Œä½†å°šæœªå®Œå…¨ä¼˜åŒ–</td><td>ä¼˜å¼‚ï¼Œé«˜åº¦ä¼˜åŒ–</td><td>è½»é‡çº§ä½†æ€§èƒ½ç›¸å¯¹è¾ƒå¼±</td></tr><tr><td>ç”Ÿæ€ç³»ç»Ÿ</td><td>æ–°å…´ï¼Œæ­£åœ¨å‘å±•</td><td>æˆç†Ÿï¼Œå·¥å…·ä¸°å¯Œ</td><td>ç¨³å®šä½†æ‰©å±•æœ‰é™</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>é™¡å³­</td><td>è¾ƒé™¡</td><td>ä¸­ç­‰</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä½</td><td>ä¸­é«˜</td><td>æä½</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>å†…ç½®ä¿è¯</td><td>éœ€é¢å¤–æœºåˆ¶</td><td>æœ‰é™æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-23">5.2 ä¸»è¦ Rust JS å¼•æ“é¡¹ç›®å¯¹æ¯”</h3>





























































<table><thead><tr><th>å¼•æ“/é¡¹ç›®</th><th>ç±»å‹</th><th>æŠ€æœ¯ç‰¹ç‚¹</th><th>ä½¿ç”¨æ¡ˆä¾‹</th><th>è¯„åˆ† (5åˆ†åˆ¶)</th></tr></thead><tbody><tr><td>Boa</td><td>å®Œæ•´å¼•æ“</td><td>çº¯ Rustå®ç°ï¼Œä»£ç åº“6.1K Starsï¼Œç¼–è¯‘åä½“ç§¯çº¦1MBï¼ŒES5å®Œæ•´æ”¯æŒï¼ŒES6+å…¼å®¹æ€§85%</td><td>åµŒå…¥å¼é¡¹ç›®è„šæœ¬æ‰©å±•ï¼Œæ•™è‚²å·¥å…·</td><td>3.5</td></tr><tr><td>Yavashark</td><td>å®Œæ•´å¼•æ“</td><td>çº¯ Rustå®ç°ï¼Œ1225 Starsï¼Œç¼–è¯‘å5.6MBï¼Œå¯åŠ¨&lt;10msï¼ŒES2023å®Œæ•´æ”¯æŒï¼ŒES2025å…¼å®¹æ€§98%</td><td>åµŒå…¥å¼è®¾å¤‡ï¼Œè¾¹ç¼˜è®¡ç®—ï¼ŒWebAssemblyè¿è¡Œæ—¶</td><td>4.0</td></tr><tr><td>Nova</td><td>å®Œæ•´å¼•æ“</td><td>çº¯ Rustå®ç°ï¼Œåˆ†å±‚æ¶æ„ï¼Œçƒ­ç‚¹è·¯å¾„æ¯”åŒç±»å¿«15-20%ï¼Œå†…å­˜æ¯”Boaä½30%ï¼Œå¯åŠ¨&lt;5ms</td><td>å®æ—¶åº”ç”¨è„šæœ¬å¼•æ“ï¼Œæ¡Œé¢åº”ç”¨æ’ä»¶ç³»ç»Ÿ</td><td>3.8</td></tr><tr><td>Brimstone</td><td>å®Œæ•´å¼•æ“</td><td>çº¯ Rustå®ç°ï¼ŒåŸºç¡€JITç¼–è¯‘ï¼Œçƒ­ç‚¹è·¯å¾„æ¯”çº¯è§£é‡Šå™¨å¿«2-3å€ï¼Œæ”¯æŒSIMDæŒ‡ä»¤é›†</td><td>ç§‘å­¦è®¡ç®—ï¼Œæ¸¸æˆå¼•æ“è„šæœ¬ç³»ç»Ÿï¼ŒWASMäº’æ“ä½œå±‚</td><td>4.2</td></tr><tr><td>Mozjs</td><td>ç»‘å®šåº“</td><td>SpiderMonkeyçš„Rustç»‘å®šï¼Œçº¦200ä¸ªRustç»“æ„ä½“å’Œç‰¹å¾ï¼ŒES2023å®Œæ•´æ”¯æŒ</td><td>Firefoxç»„ä»¶ï¼Œéœ€è¦å®Œæ•´JSæ”¯æŒçš„æ¡Œé¢åº”ç”¨</td><td>4.5</td></tr><tr><td>Jsparagus</td><td>è§£æå™¨</td><td>çº¯ Rustå®ç°ï¼ŒåŸºäºPEGç”Ÿæˆå™¨ï¼Œè§£ææ¯”ä¼ ç»Ÿå¿«10-15%ï¼Œä»£ç è¦†ç›–ç‡&gt;95%</td><td>Firefoxè§£æå™¨ç»„ä»¶ï¼Œå¼€å‘å·¥å…·ï¼ŒIDEä»£ç åˆ†æ</td><td>4.3</td></tr><tr><td>Rustyscript</td><td>æ‰§è¡Œç¯å¢ƒ</td><td>è½»é‡çº§JSæ‰§è¡Œç¯å¢ƒï¼Œç®€åŒ–API</td><td>ç®€å•è„šæœ¬æ‰§è¡Œéœ€æ±‚</td><td>3.0</td></tr></tbody></table>
<h3 data-id="heading-24">5.3 å†…å­˜å ç”¨ä¸å¯åŠ¨æ€§èƒ½å¯¹æ¯”</h3>



































<table><thead><tr><th>å¼•æ“ç±»å‹</th><th>å…¸å‹å†…å­˜å ç”¨</th><th>å¯åŠ¨æ—¶é—´</th><th>é€‚ç”¨ç¯å¢ƒ</th></tr></thead><tbody><tr><td>Rust è½»é‡å¼•æ“</td><td>&lt; 10MB</td><td>æ¯«ç§’çº§</td><td>åµŒå…¥å¼è®¾å¤‡ã€å¾®æ§åˆ¶å™¨</td></tr><tr><td>Rust å®Œæ•´å¼•æ“</td><td>10-50MB</td><td>äºšç§’çº§</td><td>æ¡Œé¢åº”ç”¨ã€æœåŠ¡ç«¯</td></tr><tr><td>C++ ä¸»æµå¼•æ“</td><td>50-200MB</td><td>ç§’çº§</td><td>æµè§ˆå™¨ã€Node.js</td></tr><tr><td>C è½»é‡å¼•æ“</td><td>&lt; 5MB</td><td>å¾®ç§’çº§</td><td>æèµ„æºå—é™ç¯å¢ƒ</td></tr></tbody></table>
<h2 data-id="heading-25">å…­ã€JS å¼•æ“å‘å±•è¶‹åŠ¿ä¸ Rust çš„æœªæ¥è§’è‰²</h2>
<h3 data-id="heading-26">6.1 å®‰å…¨æ€§ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ</h3>
<p>éšç€ç½‘ç»œå®‰å…¨å¨èƒçš„æ—¥ç›Šå¤æ‚ï¼ŒJavaScript å¼•æ“çš„å®‰å…¨æ€§å°†æˆä¸ºé¦–è¦è€ƒé‡ã€‚æ ¹æ®è¡Œä¸šè¶‹åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥é¢„è§ï¼š</p>
<ul>
<li><strong>å†…å­˜å®‰å…¨æ¼æ´å‡å°‘</strong>ï¼šå¦‚åä¸ºçš„å®è·µæ‰€ç¤ºï¼Œå°†æ ¸å¿ƒç»„ä»¶ Rust åŒ–å¯å‡å°‘é«˜è¾¾ 67% çš„å†…å­˜å®‰å…¨æ¼æ´ 1ï¼Œè¿™ä¸€æ•°æ®å°†æ¨åŠ¨æ›´å¤šå¼•æ“å¼€å‘è€…é‡‡ç”¨ Rust</li>
<li><strong>å½¢å¼åŒ–éªŒè¯å¢åŠ </strong>ï¼šRust çš„ç±»å‹ç³»ç»Ÿä¸ºå½¢å¼åŒ–éªŒè¯æä¾›äº†åŸºç¡€ï¼Œæœªæ¥å¯èƒ½ä¼šçœ‹åˆ°æ›´å¤šç»è¿‡å½¢å¼åŒ–éªŒè¯çš„ JS å¼•æ“ç»„ä»¶</li>
<li><strong>é›¶ä¿¡ä»»æ¶æ„èåˆ</strong>ï¼šJavaScript å¼•æ“å°†æ›´æ·±å…¥åœ°èå…¥é›¶ä¿¡ä»»å®‰å…¨æ¶æ„ï¼ŒRust çš„ä¸å¯å˜æ€§å’Œæ‰€æœ‰æƒç‰¹æ€§ä½¿å…¶æˆä¸ºå®ç°è¿™ä¸€ç›®æ ‡çš„ç†æƒ³è¯­è¨€</li>
</ul>
<h3 data-id="heading-27">6.2 å¤šæ ·åŒ–éƒ¨ç½²ç¯å¢ƒçš„é€‚åº”</h3>
<p>JavaScript å¼•æ“æ­£ä»æµè§ˆå™¨å’ŒæœåŠ¡å™¨æ‰©å±•åˆ°æ›´å¹¿æ³›çš„é¢†åŸŸï¼š</p>
<ul>
<li><strong>åµŒå…¥å¼ä¸ç‰©è”ç½‘</strong>ï¼šRust å®ç°çš„è½»é‡çº§ JS å¼•æ“å°†æˆä¸º IoT è®¾å¤‡çš„ç†æƒ³é€‰æ‹©ï¼Œæ”¯æŒåœ¨èµ„æºå—é™ç¯å¢ƒä¸­è¿è¡Œ JS ä»£ç </li>
<li><strong>è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹</strong>ï¼šåœ¨ 5G/6G ç½‘ç»œæ¨åŠ¨ä¸‹ï¼Œè¾¹ç¼˜èŠ‚ç‚¹éœ€è¦é«˜æ•ˆæ‰§è¡Œ JS ä»£ç ï¼ŒRust å¼•æ“å¯æä¾›ä½å»¶è¿Ÿã€é«˜ååé‡çš„è§£å†³æ–¹æ¡ˆ</li>
<li><strong>æ™ºèƒ½æ±½è½¦ä¸å·¥ä¸šç³»ç»Ÿ</strong>ï¼šè¿™äº›å¯¹å®‰å…¨æ€§å’Œå®æ—¶æ€§è¦æ±‚æé«˜çš„é¢†åŸŸï¼Œå°†ä» Rust å®ç°çš„ JS å¼•æ“ä¸­è·ç›Šè‰¯å¤š</li>
</ul>
<h3 data-id="heading-28">6.3 WebAssembly ä¸ JavaScript çš„æ·±åº¦èåˆ</h3>
<p>WebAssembly çš„æ™®åŠæ­£åœ¨æ”¹å˜ JavaScript å¼•æ“çš„æ¶æ„è®¾è®¡ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€æ‰§è¡Œæ¨¡å‹</strong>ï¼šæœªæ¥ JS å¼•æ“å¯èƒ½é‡‡ç”¨æ›´ç»Ÿä¸€çš„æ‰§è¡Œæ¨¡å‹ï¼Œæ— ç¼åˆ‡æ¢ JavaScript å’Œ WebAssembly ä»£ç </li>
<li><strong>æ··åˆä¼˜åŒ–ç­–ç•¥</strong>ï¼šRust ä½œä¸º WebAssembly çš„ä¸»è¦å¼€å‘è¯­è¨€ï¼Œå°†åœ¨ä¼˜åŒ–æ··åˆæ‰§è¡Œç¯å¢ƒæ–¹é¢å‘æŒ¥å…³é”®ä½œç”¨</li>
<li><strong>å…±äº«å†…å­˜ä¸åä½œ</strong>ï¼šJavaScript å’Œ WebAssembly æ¨¡å—ä¹‹é—´çš„å†…å­˜å…±äº«å’Œåä½œå°†æ›´åŠ é«˜æ•ˆï¼ŒRust çš„å®‰å…¨å¹¶å‘ç‰¹æ€§å°†ä¿ƒè¿›è¿™ä¸€å‘å±•</li>
</ul>
<h3 data-id="heading-29">6.4 äº‘åŸç”Ÿä¸æœåŠ¡å™¨ç«¯åº”ç”¨</h3>
<p>JavaScript åœ¨æœåŠ¡å™¨ç«¯çš„åº”ç”¨æ­£åœ¨æ‰©å±•ï¼ŒRust å®ç°çš„å¼•æ“å°†åœ¨ä»¥ä¸‹æ–¹é¢æä¾›ä»·å€¼ï¼š</p>
<ul>
<li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šè½»é‡çº§ Rust JS å¼•æ“é€‚åˆæ„å»ºé«˜æ•ˆçš„å¾®æœåŠ¡ï¼Œå‡å°‘èµ„æºå ç”¨</li>
<li><strong>æ— æœåŠ¡å™¨è®¡ç®—</strong>ï¼šæ›´å¿«çš„å¯åŠ¨æ—¶é—´å’Œæ›´ä½çš„å†…å­˜å ç”¨ï¼Œä½¿ Rust JS å¼•æ“æˆä¸º FaaS åœºæ™¯çš„ç†æƒ³é€‰æ‹©</li>
<li><strong>å®æ—¶æ•°æ®å¤„ç†</strong>ï¼šåˆ©ç”¨ Rust çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå¤„ç†é«˜ååé‡çš„å®æ—¶æ•°æ®æµ</li>
</ul>
<h3 data-id="heading-30">6.5 ç”Ÿæ€ç³»ç»Ÿæ•´åˆä¸æ ‡å‡†æ¼”è¿›</h3>
<p>Rust ä¸ JavaScript ç”Ÿæ€ç³»ç»Ÿçš„æ•´åˆå°†åŠ æ·±ï¼š</p>
<ul>
<li><strong>å·¥å…·é“¾å…±äº«</strong>ï¼šæ›´å¤šæ„å»ºå·¥å…·ã€è°ƒè¯•å™¨å’Œæ€§èƒ½åˆ†æå·¥å…·å°†åŒæ—¶æ”¯æŒ Rust å’Œ JavaScript</li>
<li><strong>æ ‡å‡†åº“äº’æ“ä½œ</strong>ï¼šJavaScript æ ‡å‡†åº“å¯èƒ½ä¼šå€Ÿé‰´ Rust çš„æŸäº›è®¾è®¡ç†å¿µï¼Œå¦‚æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥</li>
<li><strong>è·¨è¯­è¨€æ¡†æ¶</strong>ï¼šæ›´å¤šæ¡†æ¶å°†æ”¯æŒ Rust å’Œ JavaScript çš„æ— ç¼åä½œï¼Œå¦‚ Tauri ç­‰æ¡Œé¢åº”ç”¨æ¡†æ¶</li>
</ul>
<h3 data-id="heading-31">6.6 é‡åŒ–çš„æœªæ¥å±•æœ›ï¼š2025-2030</h3>
<p>åŸºäºå½“å‰æŠ€æœ¯å‘å±•è¶‹åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ Rust åœ¨ JS å¼•æ“é¢†åŸŸçš„æœªæ¥åšå‡ºä»¥ä¸‹é¢„æµ‹ï¼š</p>
<ul>
<li><strong>2025 å¹´</strong>ï¼šè‡³å°‘æœ‰ä¸€ä¸ªä¸»æµæµè§ˆå™¨å¼•æ“å°†æœ‰ 20% ä»¥ä¸Šçš„ç»„ä»¶ä½¿ç”¨ Rust å®ç°</li>
<li><strong>2026 å¹´</strong>ï¼šé¦–ä¸ªå®Œå…¨ä½¿ç”¨ Rust å®ç°çš„ç”Ÿäº§çº§ JS å¼•æ“å°†é—®ä¸–</li>
<li><strong>2028 å¹´</strong>ï¼šRust å®ç°çš„ JS å¼•æ“åœ¨åµŒå…¥å¼å’Œè¾¹ç¼˜è®¡ç®—é¢†åŸŸçš„å¸‚åœºä»½é¢å°†è¶…è¿‡ 30%</li>
<li><strong>2030 å¹´</strong>ï¼šJavaScript å¼•æ“çš„å®‰å…¨æ¼æ´å°†æ¯” 2023 å¹´å‡å°‘ 50%ï¼Œä¸»è¦å½’åŠŸäº Rust ç­‰å†…å­˜å®‰å…¨è¯­è¨€çš„é‡‡ç”¨</li>
</ul>
<h2 data-id="heading-32">ä¸ƒã€ç»“è®º</h2>
<p>Rust åœ¨ JavaScript å¼•æ“èµ›é“ä¸­æ­£åœ¨æ‰®æ¼”è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚ä»çº¯ Rust å®ç°çš„ Boa å¼•æ“ï¼Œåˆ° Mozilla çš„ Jsparagus è§£æå™¨ï¼Œå†åˆ°ä¸ç°æœ‰ C++ å¼•æ“çš„é›†æˆæ–¹æ¡ˆï¼ŒRust æ­£åœ¨ä¸º JavaScript å¼•æ“å¸¦æ¥æ–°çš„æŠ€æœ¯å¯èƒ½æ€§ã€‚</p>
<p>éšç€ Rust ç”Ÿæ€ç³»ç»Ÿçš„ä¸æ–­æˆç†Ÿå’Œæ€§èƒ½ä¼˜åŒ–å·¥ä½œçš„æŒç»­æ¨è¿›ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼Œæœªæ¥å°†ä¼šçœ‹åˆ°æ›´å¤šæ€§èƒ½å“è¶Šã€å®‰å…¨å¯é çš„ JavaScript å¼•æ“é‡‡ç”¨ Rust å®ç°æˆ–éƒ¨åˆ†ç»„ä»¶ Rust åŒ–ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œäº†è§£ Rust åœ¨ JavaScript å¼•æ“ä¸­çš„åº”ç”¨ï¼Œä¸ä»…æœ‰åŠ©äºé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆï¼Œä¹Ÿèƒ½æ›´å¥½åœ°ç†è§£ç°ä»£ Web æŠ€æœ¯çš„å‘å±•æ–¹å‘ã€‚</p>
<p>åœ¨è¿™ä¸ªæ€§èƒ½ä¸å®‰å…¨å¹¶é‡çš„æ—¶ä»£ï¼ŒRust æ­£åœ¨ä¸º JavaScript å¼•æ“çš„å‘å±•å¼€è¾Ÿä¸€æ¡æ–°çš„é“è·¯ï¼Œè€Œè¿™æ¡é“è·¯ï¼Œå€¼å¾—æˆ‘ä»¬æŒç»­å…³æ³¨å’Œæ¢ç´¢ã€‚</p>
<hr/>
 <p/>
<table>
    <tbody><tr>
        <td>
            <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f67cd30497a34f66ae5547c02192f59b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=1820&amp;s=574996&amp;e=jpg&amp;b=81dd6b" width="150" loading="lazy"/>
        </td>
        <td> 
<p>æ›´å¤š JavaScript åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ï¼Œå¯ä»¥å­¦ä¹ æˆ‘å†™çš„è¿™æœ¬ <a href="https://juejin.cn/book/7226969813581889575" target="_blank" title="https://juejin.cn/book/7226969813581889575">ã€ŠJavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶ã€‹</a>  å°å†Œã€‚ </p></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å¼‚æ­¥ç»„ä»¶æ·±åº¦è§£æï¼šæå‡å¤§å‹åº”ç”¨æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575320672572194858</link>    <guid>https://juejin.cn/post/7575320672572194858</guid>    <pubDate>2025-11-23T03:12:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575320672572194858" data-draft-id="7575159361904377897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å¼‚æ­¥ç»„ä»¶æ·±åº¦è§£æï¼šæå‡å¤§å‹åº”ç”¨æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-23T03:12:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å¼‚æ­¥ç»„ä»¶æ·±åº¦è§£æï¼šæå‡å¤§å‹åº”ç”¨æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:12:37.000Z" title="Sun Nov 23 2025 03:12:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3 å¼‚æ­¥ç»„ä»¶æ·±åº¦è§£æï¼šæå‡å¤§å‹åº”ç”¨æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æŒ‡å—</strong></h2>
<h3 data-id="heading-1"><strong>æ‘˜è¦</strong></h3>
<p>åœ¨å¤§å‹ Vue.js åº”ç”¨ä¸­ï¼Œç»„ä»¶å¼‚æ­¥åŠ è½½æ˜¯ä¼˜åŒ–æ€§èƒ½ã€æå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€æœ¯ã€‚Vue3 æä¾›äº†å…¨æ–°ä¸”æ›´å¼ºå¤§çš„å¼‚æ­¥ç»„ä»¶æœºåˆ¶ï¼Œæ”¯æŒ <code>defineAsyncComponent</code>ã€ç»„åˆå¼ API ä¸ Suspense é…åˆç­‰ç°ä»£åŒ–æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue3 ä¸­å¼‚æ­¥ç»„ä»¶çš„å„ç§å®ç°æ–¹å¼ï¼Œé€šè¿‡è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ã€æ‰§è¡Œæµç¨‹åˆ†æå’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ å½»åº•æŒæ¡è¿™ä¸€é‡è¦ç‰¹æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>ä¸€ã€ ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ç»„ä»¶ï¼Ÿ</strong></h3>
<h4 data-id="heading-3"><strong>1.1 æ€§èƒ½ç“¶é¢ˆä¸è§£å†³æ–¹æ¡ˆ</strong></h4>
<p>åœ¨ä¼ ç»Ÿå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼Œæ‰€æœ‰ç»„ä»¶é€šå¸¸è¢«æ‰“åŒ…åˆ°ä¸€ä¸ª JavaScript æ–‡ä»¶ä¸­ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li><strong>é¦–å±åŠ è½½ç¼“æ…¢</strong>ï¼šç”¨æˆ·éœ€è¦ç­‰å¾…æ•´ä¸ªåº”ç”¨ä¸‹è½½å®Œæˆæ‰èƒ½çœ‹åˆ°å†…å®¹</li>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šè®¿é—®æŸäº›é¡µé¢ï¼Œä½†ä¾ç„¶åŠ è½½äº†å¯¹åº”çš„ä»£ç </li>
<li><strong>ç”¨æˆ·ä½“éªŒå·®</strong>ï¼šç‰¹åˆ«æ˜¯å¯¹äºç§»åŠ¨ç«¯ç”¨æˆ·å’Œç½‘ç»œæ¡ä»¶è¾ƒå·®çš„åœºæ™¯</li>
</ul>
<p><strong>å¼‚æ­¥ç»„ä»¶</strong>é€šè¿‡ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåªåœ¨éœ€è¦æ—¶åŠ è½½ç»„ä»¶ä»£ç </li>
<li><strong>å‡å°åˆå§‹åŒ…ä½“ç§¯</strong>ï¼šæ˜¾è‘—é™ä½é¦–å±åŠ è½½æ—¶é—´</li>
<li><strong>ä¼˜åŒ–ç¼“å­˜</strong>ï¼šç‹¬ç«‹ chunk å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</li>
</ul>
<h4 data-id="heading-4"><strong>1.2 Vue3 å¼‚æ­¥ç»„ä»¶çš„æ–°ç‰¹æ€§</strong></h4>
<p>Vue3 åœ¨å¼‚æ­¥ç»„ä»¶æ–¹é¢è¿›è¡Œäº†é‡è¦æ”¹è¿›ï¼š</p>
<ul>
<li><strong>æ›´ç®€æ´çš„ API</strong>ï¼š<code>defineAsyncComponent</code> æ›¿ä»£ Vue2 çš„å¤æ‚é…ç½®</li>
<li><strong>æ›´å¥½çš„ TypeScript æ”¯æŒ</strong>ï¼šå®Œæ•´çš„ç±»å‹æ¨æ–­</li>
<li><strong>ä¸ Suspense é›†æˆ</strong>ï¼šæ›´ä¼˜é›…çš„åŠ è½½çŠ¶æ€å¤„ç†</li>
<li><strong>ç»„åˆå¼ API é…åˆ</strong>ï¼šæ›´çµæ´»çš„å¼‚æ­¥é€»è¾‘ç»„ç»‡</li>
</ul>
<hr/>
<h3 data-id="heading-5"><strong>äºŒã€ åŸºç¡€å¼‚æ­¥ç»„ä»¶åŠ è½½</strong></h3>
<h4 data-id="heading-6"><strong>2.1 ä½¿ç”¨ <code>defineAsyncComponent</code></strong></h4>
<p>Vue3 å¼•å…¥äº† <code>defineAsyncComponent</code> å‡½æ•°æ¥åˆ›å»ºå¼‚æ­¥ç»„ä»¶ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„ç”¨æ³•ã€‚</p>
<p><strong>æµç¨‹å›¾ï¼šåŸºç¡€å¼‚æ­¥ç»„ä»¶åŠ è½½æµç¨‹</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[çˆ¶ç»„ä»¶æ¸²æŸ“] --&gt; B{é‡åˆ°å¼‚æ­¥ç»„ä»¶}
    B --&gt; C[æ˜¾ç¤ºLoadingå ä½]
    C --&gt; D[å¼€å§‹åŠ è½½ç»„ä»¶]
    D --&gt; E{åŠ è½½æˆåŠŸ?}
    E -- æ˜¯ --&gt; F[æ¸²æŸ“å¼‚æ­¥ç»„ä»¶]
    E -- å¦ --&gt; G[æ˜¾ç¤ºErrorç»„ä»¶]
    F --&gt; H[ç»„ä»¶å®Œå…¨æ¿€æ´»]
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šåŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;h2&gt;å¼‚æ­¥ç»„ä»¶åŸºç¡€ç¤ºä¾‹&lt;/h2&gt;
    &lt;button @click="showAsyncComponent = true"&gt;åŠ è½½å¼‚æ­¥ç»„ä»¶&lt;/button&gt;
    
    &lt;div v-if="showAsyncComponent"&gt;
      &lt;!-- å¼‚æ­¥ç»„ä»¶åœ¨è¿™é‡Œæ¸²æŸ“ --&gt;
      &lt;AsyncUserProfile /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { defineAsyncComponent, ref } from 'vue'

// åŸºç¡€å¼‚æ­¥ç»„ä»¶å®šä¹‰
const AsyncUserProfile = defineAsyncComponent(() =&gt;
  import('./components/UserProfile.vue')
)

const showAsyncComponent = ref(false)
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-7"><strong>2.2 æ¨¡æ‹Ÿå¼‚æ­¥ç»„ä»¶å†…å®¹</strong></h4>
<p><strong>UserProfile.vue</strong>ï¼ˆè¢«å¼‚æ­¥åŠ è½½çš„ç»„ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="user-profile" style="border: 2px solid #42b983; padding: 20px; margin: 10px 0;"&gt;
    &lt;h3&gt;ç”¨æˆ·ä¿¡æ¯ç»„ä»¶ (å¼‚æ­¥åŠ è½½)&lt;/h3&gt;
    &lt;div&gt;å§“å: å¼ ä¸‰&lt;/div&gt;
    &lt;div&gt;é‚®ç®±: zhangsan@example.com&lt;/div&gt;
    &lt;div&gt;è§’è‰²: ç®¡ç†å‘˜&lt;/div&gt;
    &lt;div&gt;ç»„ä»¶åŠ è½½æ—¶é—´: {{ new Date().toLocaleTimeString() }}&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { onMounted, onUnmounted } from 'vue'

console.log('UserProfile ç»„ä»¶è¢«åŠ è½½äº†')

onMounted(() =&gt; {
  console.log('UserProfile ç»„ä»¶æŒ‚è½½å®Œæˆ')
})

onUnmounted(() =&gt; {
  console.log('UserProfile ç»„ä»¶å·²å¸è½½')
})
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-8"><strong>ä¸‰ã€ é«˜çº§é…ç½®ï¼šåŠ è½½ä¸é”™è¯¯å¤„ç†</strong></h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†åŠ è½½çŠ¶æ€å’Œé”™è¯¯æƒ…å†µï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-9"><strong>3.1 å®Œæ•´çš„é…ç½®é€‰é¡¹</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;h2&gt;é«˜çº§å¼‚æ­¥ç»„ä»¶ç¤ºä¾‹&lt;/h2&gt;
    
    &lt;!-- åŠ è½½çŠ¶æ€æ§åˆ¶æŒ‰é’® --&gt;
    &lt;div style="margin-bottom: 20px;"&gt;
      &lt;button @click="loadComponent"&gt;åŠ è½½é«˜çº§ç»„ä»¶&lt;/button&gt;
      &lt;button @click="unloadComponent" style="margin-left: 10px;"&gt;å¸è½½ç»„ä»¶&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;!-- å¼‚æ­¥ç»„ä»¶æ¸²æŸ“åŒºåŸŸ --&gt;
    &lt;AdvancedAsyncComponent 
      v-if="showAdvancedComponent" 
      :user-id="currentUserId" 
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { defineAsyncComponent, ref } from 'vue'

// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
const delay = (ms) =&gt; new Promise(resolve =&gt; setTimeout(resolve, ms))

// åŠ è½½çŠ¶æ€
const isLoading = ref(false)
const loadError = ref(null)

// å®Œæ•´é…ç½®çš„å¼‚æ­¥ç»„ä»¶
const AdvancedAsyncComponent = defineAsyncComponent({
  // åŠ è½½å™¨å‡½æ•°
  loader: async () =&gt; {
    console.log('å¼€å§‹åŠ è½½é«˜çº§ç»„ä»¶...')
    isLoading.value = true
    loadError.value = null
    
    try {
      // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
      await delay(2000)
      
      // åŠ¨æ€å¯¼å…¥ç»„ä»¶
      const component = await import('./components/AdvancedFeatures.vue')
      console.log('é«˜çº§ç»„ä»¶åŠ è½½æˆåŠŸ')
      return component
    } catch (error) {
      console.error('ç»„ä»¶åŠ è½½å¤±è´¥:', error)
      loadError.value = error
      throw error
    } finally {
      isLoading.value = false
    }
  },
  
  // åŠ è½½ä¸­æ˜¾ç¤ºçš„ç»„ä»¶
  loadingComponent: {
    template: `
      &lt;div class="loading-container" style="padding: 40px; text-align: center; border: 2px dashed #ccc;"&gt;
        &lt;div class="spinner" style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #42b983; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"&gt;&lt;/div&gt;
        &lt;p style="margin-top: 16px; color: #666;"&gt;ç»„ä»¶åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...&lt;/p&gt;
        &lt;p style="font-size: 12px; color: #999;"&gt;è¿™é€šå¸¸éœ€è¦ 2-3 ç§’&lt;/p&gt;
      &lt;/div&gt;
    `
  },
  
  // åŠ è½½å¤±è´¥æ˜¾ç¤ºçš„ç»„ä»¶
  errorComponent: {
    props: ['error'],
    template: `
      &lt;div class="error-container" style="padding: 40px; text-align: center; border: 2px solid #f56c6c; background: #fef0f0;"&gt;
        &lt;div style="font-size: 48px; color: #f56c6c;"&gt;âŒ&lt;/div&gt;
        &lt;h3 style="color: #f56c6c;"&gt;ç»„ä»¶åŠ è½½å¤±è´¥&lt;/h3&gt;
        &lt;p style="color: #666;"&gt;æŠ±æ­‰ï¼Œæ— æ³•åŠ è½½è¯·æ±‚çš„ç»„ä»¶&lt;/p&gt;
        &lt;p style="font-size: 12px; color: #999; margin-top: 10px;"&gt;é”™è¯¯ä¿¡æ¯: {{ error.message }}&lt;/p&gt;
        &lt;button @click="$emit('retry')" style="margin-top: 16px; padding: 8px 16px; background: #42b983; color: white; border: none; border-radius: 4px;"&gt;é‡è¯•åŠ è½½&lt;/button&gt;
      &lt;/div&gt;
    `,
    emits: ['retry']
  },
  
  // å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆé¿å…é—ªçƒï¼‰
  delay: 200,
  
  // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  timeout: 5000,
  
  // æ˜¯å¦å¯æŒ‚èµ·ï¼ˆSuspense ç›¸å…³ï¼‰
  suspensible: false
})

// ç»„ä»¶çŠ¶æ€æ§åˆ¶
const showAdvancedComponent = ref(false)
const currentUserId = ref('12345')

const loadComponent = () =&gt; {
  showAdvancedComponent.value = true
}

const unloadComponent = () =&gt; {
  showAdvancedComponent.value = false
}
&lt;/script&gt;

&lt;style&gt;
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-10"><strong>3.2 é«˜çº§åŠŸèƒ½ç»„ä»¶ç¤ºä¾‹</strong></h4>
<p><strong>AdvancedFeatures.vue</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="advanced-features" style="border: 2px solid #e6a23c; padding: 20px; margin: 10px 0; background: #fdf6ec;"&gt;
    &lt;h3&gt;é«˜çº§åŠŸèƒ½ç»„ä»¶ (å¼‚æ­¥åŠ è½½)&lt;/h3&gt;
    &lt;p&gt;ç»„ä»¶ID: {{ props.userId }}&lt;/p&gt;
    
    &lt;div class="features"&gt;
      &lt;div v-for="feature in features" :key="feature.id" class="feature-item"&gt;
        &lt;strong&gt;{{ feature.name }}&lt;/strong&gt;: {{ feature.description }}
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div style="margin-top: 20px;"&gt;
      &lt;button @click="simulateAction" style="padding: 8px 16px; background: #e6a23c; color: white; border: none; border-radius: 4px;"&gt;æ¨¡æ‹Ÿæ“ä½œ&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const props = defineProps({
  userId: {
    type: String,
    required: true
  }
})

const features = ref([
  { id: 1, name: 'æ•°æ®åˆ†æ', description: 'å®æ—¶æ•°æ®å¯è§†åŒ–åˆ†æ' },
  { id: 2, name: 'æŠ¥è¡¨ç”Ÿæˆ', description: 'è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†ä¸šåŠ¡æŠ¥è¡¨' },
  { id: 3, name: 'æƒé™ç®¡ç†', description: 'ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ç³»ç»Ÿ' }
])

const simulateAction = () =&gt; {
  console.log('æ‰§è¡Œé«˜çº§æ“ä½œï¼Œç”¨æˆ·ID:', props.userId)
}

onMounted(() =&gt; {
  console.log('é«˜çº§åŠŸèƒ½ç»„ä»¶å·²æŒ‚è½½ï¼Œç”¨æˆ·ID:', props.userId)
})
&lt;/script&gt;

&lt;style scoped&gt;
.feature-item {
  padding: 8px;
  margin: 4px 0;
  background: white;
  border-radius: 4px;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h3 data-id="heading-11"><strong>å››ã€ ç»“åˆ Suspense çš„ç°ä»£æ–¹æ¡ˆ</strong></h3>
<p>Vue3 çš„ <code>&lt;Suspense&gt;</code> ç»„ä»¶æä¾›äº†æ›´å£°æ˜å¼çš„å¼‚æ­¥å¤„ç†æ–¹å¼ã€‚</p>
<h4 data-id="heading-12"><strong>4.1 Suspense åŸºç¡€ç”¨æ³•</strong></h4>
<p><strong>æµç¨‹å›¾ï¼šSuspense å¼‚æ­¥åŠ è½½æµç¨‹</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[Suspenseç»„ä»¶] --&gt; B[æ¸²æŸ“defaultæ’æ§½]
    B --&gt; C{å¼‚æ­¥ä¾èµ–&lt;br&gt;æ˜¯å¦è§£æ?}
    C -- å¦ --&gt; D[æ˜¾ç¤ºfallbackå†…å®¹]
    C -- æ˜¯ --&gt; E[æ˜¾ç¤ºå¼‚æ­¥å†…å®¹]
    D --&gt; F[å¼‚æ­¥ä¾èµ–è§£æå®Œæˆ]
    F --&gt; E
    E --&gt; G[å¯è§¦å‘resolvedäº‹ä»¶]
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;h2&gt;Suspense å¼‚æ­¥ç»„ä»¶ç¤ºä¾‹&lt;/h2&gt;
    
    &lt;Suspense&gt;
      &lt;!-- ä¸»è¦å†…å®¹ --&gt;
      &lt;template #default&gt;
        &lt;SuspenseUserDashboard :user-id="userId" /&gt;
      &lt;/template&gt;
      
      &lt;!-- åŠ è½½çŠ¶æ€ --&gt;
      &lt;template #fallback&gt;
        &lt;div class="suspense-loading" style="padding: 60px; text-align: center;"&gt;
          &lt;div class="loading-indicator" style="display: inline-block;"&gt;
            &lt;div style="display: flex; align-items: center; gap: 12px;"&gt;
              &lt;div class="spinner" style="width: 32px; height: 32px; border: 3px solid #e0e0e0; border-top: 3px solid #42b983; border-radius: 50%; animation: spin 1s linear infinite;"&gt;&lt;/div&gt;
              &lt;div&gt;
                &lt;p style="margin: 0; font-weight: bold;"&gt;ä»ªè¡¨æ¿åŠ è½½ä¸­&lt;/p&gt;
                &lt;p style="margin: 4px 0 0 0; font-size: 12px; color: #666;"&gt;æ­£åœ¨å‡†å¤‡æ‚¨çš„æ•°æ®...&lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/template&gt;
    &lt;/Suspense&gt;
    
    &lt;button @click="reloadDashboard" style="margin-top: 20px;"&gt;é‡æ–°åŠ è½½&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

// å¼‚æ­¥ç»„ä»¶ï¼ˆæ³¨æ„ï¼šéœ€è¦è®¾ç½® suspensible: trueï¼‰
const SuspenseUserDashboard = defineAsyncComponent(() =&gt;
  import('./components/UserDashboard.vue')
)

const userId = ref('user-001')

const reloadDashboard = () =&gt; {
  // é€šè¿‡æ”¹å˜ key å¼ºåˆ¶é‡æ–°åŠ è½½ç»„ä»¶
  userId.value = 'user-' + Date.now()
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-13"><strong>4.2 æ”¯æŒå¼‚æ­¥è®¾ç½®çš„ç»„ä»¶</strong></h4>
<p><strong>UserDashboard.vue</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="user-dashboard" style="border: 2px solid #409eff; padding: 20px; margin: 10px 0; background: #ecf5ff;"&gt;
    &lt;h3&gt;ç”¨æˆ·ä»ªè¡¨æ¿ (Suspense åŠ è½½)&lt;/h3&gt;
    
    &lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt;
    &lt;div class="user-info" style="margin-bottom: 20px;"&gt;
      &lt;h4&gt;ç”¨æˆ·ä¿¡æ¯&lt;/h4&gt;
      &lt;div v-if="userData"&gt;å§“å: {{ userData.name }}&lt;/div&gt;
      &lt;div v-if="userData"&gt;ç­‰çº§: {{ userData.level }}&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- ç»Ÿè®¡å¡ç‰‡ --&gt;
    &lt;div class="stats" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px;"&gt;
      &lt;div v-for="stat in stats" :key="stat.name" class="stat-card" style="padding: 16px; background: white; border-radius: 8px; text-align: center;"&gt;
        &lt;div style="font-size: 24px; font-weight: bold; color: #409eff;"&gt;{{ stat.value }}&lt;/div&gt;
        &lt;div style="font-size: 12px; color: #666;"&gt;{{ stat.name }}&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- æœ€è¿‘æ´»åŠ¨ --&gt;
    &lt;div class="recent-activity"&gt;
      &lt;h4&gt;æœ€è¿‘æ´»åŠ¨&lt;/h4&gt;
      &lt;ul&gt;
        &lt;li v-for="activity in activities" :key="activity.id" style="margin: 8px 0;"&gt;
          {{ activity.action }} - {{ activity.time }}
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const props = defineProps({
  userId: {
    type: String,
    required: true
  }
})

// æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®è·å–
const userData = ref(null)
const stats = ref([])
const activities = ref([])

// æ¨¡æ‹Ÿ API è°ƒç”¨
const fetchUserData = () =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve({
        name: 'æå››',
        level: 'VIP',
        joinDate: '2023-01-15'
      })
    }, 1500)
  })
}

const fetchStats = () =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve([
        { name: 'é¡¹ç›®æ•°é‡', value: 24 },
        { name: 'å®Œæˆä»»åŠ¡', value: 89 },
        { name: 'å›¢é˜Ÿæ’å', value: 'å‰ 5%' }
      ])
    }, 1000)
  })
}

const fetchActivities = () =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve([
        { id: 1, action: 'åˆ›å»ºäº†æ–°é¡¹ç›®', time: '2å°æ—¶å‰' },
        { id: 2, action: 'å®Œæˆäº†ä»»åŠ¡', time: '5å°æ—¶å‰' },
        { id: 3, action: 'åŠ å…¥äº†å›¢é˜Ÿ', time: '1å¤©å‰' }
      ])
    }, 800)
  })
}

// ä½¿ç”¨ async setupï¼ˆSuspense ä¼šè‡ªåŠ¨ç­‰å¾…ï¼‰
const setupData = async () =&gt; {
  console.log('å¼€å§‹åŠ è½½ä»ªè¡¨æ¿æ•°æ®...')
  
  // å¹¶è¡ŒåŠ è½½æ‰€æœ‰æ•°æ®
  const [user, statistics, recentActivities] = await Promise.all([
    fetchUserData(),
    fetchStats(),
    fetchActivities()
  ])
  
  userData.value = user
  stats.value = statistics
  activities.value = recentActivities
  
  console.log('ä»ªè¡¨æ¿æ•°æ®åŠ è½½å®Œæˆ')
}

// æ‰§è¡Œå¼‚æ­¥è®¾ç½®
await setupData()

onMounted(() =&gt; {
  console.log('UserDashboard ç»„ä»¶å·²æŒ‚è½½ï¼Œç”¨æˆ·ID:', props.userId)
})
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-14"><strong>äº”ã€ è·¯ç”±çº§åˆ«çš„å¼‚æ­¥åŠ è½½</strong></h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨è·¯ç”±çº§åˆ«è¿›è¡Œä»£ç åˆ†å‰²ã€‚</p>
<h4 data-id="heading-15"><strong>5.1 Vue Router 4 ä¸­çš„å¼‚æ­¥è·¯ç”±</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router/index.js</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>,
    <span class="hljs-comment">// è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²</span>
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/About.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>,
    <span class="hljs-comment">// å¸¦æœ‰åŠ è½½çŠ¶æ€çš„å¼‚æ­¥è·¯ç”±</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title function_">defineAsyncComponent</span>({
      <span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/UserProfile.vue'</span>),
      <span class="hljs-attr">loadingComponent</span>: <span class="hljs-title class_">LoadingSpinner</span>,
      <span class="hljs-attr">errorComponent</span>: <span class="hljs-title class_">ErrorDisplay</span>,
      <span class="hljs-attr">delay</span>: <span class="hljs-number">200</span>,
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>
    })
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Admin'</span>,
    <span class="hljs-comment">// æ¡ä»¶æ€§å¼‚æ­¥åŠ è½½ï¼ˆåŸºäºç”¨æˆ·æƒé™ï¼‰</span>
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> user = store.<span class="hljs-property">getters</span>.<span class="hljs-property">currentUser</span>
      <span class="hljs-keyword">if</span> (user?.<span class="hljs-property">isAdmin</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/AdminDashboard.vue'</span>)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/AccessDenied.vue'</span>)
      }
    }
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<h4 data-id="heading-16"><strong>5.2 è·¯ç”±ç»„ä»¶ç¤ºä¾‹</strong></h4>
<p><strong>views/UserProfile.vue</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="user-profile-page"&gt;
    &lt;div class="header"&gt;
      &lt;h1&gt;ç”¨æˆ·è¯¦æƒ…&lt;/h1&gt;
      &lt;p&gt;ç”¨æˆ·ID: {{ $route.params.id }}&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;Suspense&gt;
      &lt;template #default&gt;
        &lt;UserDetailContent :user-id="$route.params.id" /&gt;
      &lt;/template&gt;
      &lt;template #fallback&gt;
        &lt;div class="page-loading"&gt;
          &lt;h3&gt;åŠ è½½ç”¨æˆ·ä¿¡æ¯...&lt;/h3&gt;
        &lt;/div&gt;
      &lt;/template&gt;
    &lt;/Suspense&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { defineAsyncComponent } from 'vue'

// å¼‚æ­¥åŠ è½½ç”¨æˆ·è¯¦æƒ…å†…å®¹
const UserDetailContent = defineAsyncComponent({
  loader: () =&gt; import('../components/UserDetailContent.vue'),
  loadingComponent: {
    template: '&lt;div&gt;åŠ è½½ç”¨æˆ·è¯¦æƒ…...&lt;/div&gt;'
  }
})
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-17"><strong>å…­ã€ é«˜çº§æ¨¡å¼ä¸æœ€ä½³å®è·µ</strong></h3>
<h4 data-id="heading-18"><strong>6.1 é¢„åŠ è½½ç­–ç•¥</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="app"&gt;
    &lt;nav&gt;
      &lt;router-link to="/"&gt;é¦–é¡µ&lt;/router-link&gt;
      &lt;router-link to="/about" @mouseenter="preloadAbout"&gt;å…³äº&lt;/router-link&gt;
      &lt;router-link to="/contact" @touchstart="preloadContact"&gt;è”ç³»&lt;/router-link&gt;
    &lt;/nav&gt;
    &lt;router-view /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { defineAsyncComponent } from 'vue'

// é¢„åŠ è½½å‡½æ•°
const preloadAbout = () =&gt; {
  // é¢„åŠ è½½å…³äºé¡µé¢
  import('./views/About.vue').then(module =&gt; {
    console.log('å…³äºé¡µé¢é¢„åŠ è½½å®Œæˆ')
  })
}

const preloadContact = () =&gt; {
  // é¢„åŠ è½½è”ç³»é¡µé¢ï¼ˆç§»åŠ¨ç«¯ touchstart äº‹ä»¶ï¼‰
  import('./views/Contact.vue')
}

// å…³é”®ç»„ä»¶é¢„åŠ è½½ï¼ˆåœ¨ç©ºé—²æ—¶é—´ï¼‰
const preloadCriticalComponents = () =&gt; {
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() =&gt; {
      import('./components/CriticalComponent.vue')
    })
  }
}

// åº”ç”¨å¯åŠ¨åé¢„åŠ è½½å…³é”®ç»„ä»¶
onMounted(() =&gt; {
  preloadCriticalComponents()
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-19"><strong>6.2 é”™è¯¯è¾¹ç•Œä¸é‡è¯•æœºåˆ¶</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;ErrorBoundary&gt;
      &lt;template #default&gt;
        &lt;UnstableAsyncComponent /&gt;
      &lt;/template&gt;
      &lt;template #fallback="{ error, reset }"&gt;
        &lt;div class="error-boundary"&gt;
          &lt;h3&gt;ç»„ä»¶åŠ è½½å¤±è´¥&lt;/h3&gt;
          &lt;p&gt;{{ error.message }}&lt;/p&gt;
          &lt;button @click="reset"&gt;é‡è¯•&lt;/button&gt;
        &lt;/div&gt;
      &lt;/template&gt;
    &lt;/ErrorBoundary&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { defineAsyncComponent, ref, onErrorCaptured } from 'vue'

// é”™è¯¯è¾¹ç•Œç»„ä»¶
const ErrorBoundary = {
  setup(props, { slots }) {
    const error = ref(null)
    
    const reset = () =&gt; {
      error.value = null
    }
    
    onErrorCaptured((err) =&gt; {
      error.value = err
      return false // é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­
    })
    
    return () =&gt; {
      if (error.value) {
        return slots.fallback?.({ error: error.value, reset })
      }
      return slots.default?.()
    }
  }
}

// ä¸ç¨³å®šçš„å¼‚æ­¥ç»„ä»¶ï¼ˆæ¨¡æ‹Ÿå¯èƒ½å¤±è´¥ï¼‰
const UnstableAsyncComponent = defineAsyncComponent({
  loader: async () =&gt; {
    // æ¨¡æ‹Ÿéšæœºå¤±è´¥
    if (Math.random() &gt; 0.5) {
      throw new Error('éšæœºåŠ è½½å¤±è´¥')
    }
    await new Promise(resolve =&gt; setTimeout(resolve, 1000))
    return import('./components/UnstableComponent.vue')
  },
  onError: (error, retry, fail, attempts) =&gt; {
    if (attempts &lt;= 3) {
      // é‡è¯•æœ€å¤š3æ¬¡
      console.log(`é‡è¯•åŠ è½½ï¼Œå°è¯•æ¬¡æ•°: ${attempts}`)
      retry()
    } else {
      fail()
    }
  }
})
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-20"><strong>ä¸ƒã€ æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•æŠ€å·§</strong></h3>
<h4 data-id="heading-21"><strong>7.1 Webpack Bundle Analyzer</strong></h4>
<p>åˆ†ææ‰“åŒ…ç»“æœï¼Œä¼˜åŒ–ä»£ç åˆ†å‰²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install --save-dev webpack-bundle-analyzer
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-keyword">const</span> { defineConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@vue/cli-service'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">transpileDependencies</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">configureWebpack</span>: {
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({
        <span class="hljs-attr">analyzerMode</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'static'</span> : <span class="hljs-string">'disabled'</span>,
        <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">false</span>
      })
    ],
    <span class="hljs-attr">optimization</span>: {
      <span class="hljs-attr">splitChunks</span>: {
        <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
        <span class="hljs-attr">cacheGroups</span>: {
          <span class="hljs-attr">vendor</span>: {
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
          }
        }
      }
    }
  }
})
</code></pre>
<h4 data-id="heading-22"><strong>7.2 æ€§èƒ½ç›‘æ§</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/performance.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">trackComponentLoad</span> = (<span class="hljs-params">componentName, startTime</span>) =&gt; {
  <span class="hljs-keyword">const</span> loadTime = performance.<span class="hljs-title function_">now</span>() - startTime
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ <span class="hljs-subst">${componentName}</span> åŠ è½½è€—æ—¶: <span class="hljs-subst">${loadTime.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>)
  
  <span class="hljs-comment">// å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ</span>
  <span class="hljs-keyword">if</span> (loadTime &gt; <span class="hljs-number">2000</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`âš ï¸ <span class="hljs-subst">${componentName}</span> åŠ è½½è¾ƒæ…¢`</span>)
  }
}

<span class="hljs-comment">// åœ¨å¼‚æ­¥ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>()
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>({
  <span class="hljs-attr">loader</span>: <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> component = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/HeavyComponent.vue'</span>)
    <span class="hljs-title function_">trackComponentLoad</span>(<span class="hljs-string">'HeavyComponent'</span>, startTime)
    <span class="hljs-keyword">return</span> component
  }
})
</code></pre>
<hr/>
<h3 data-id="heading-23"><strong>å…«ã€ æ€»ç»“</strong></h3>
<p>Vue3 çš„å¼‚æ­¥ç»„ä»¶ç³»ç»Ÿæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å·¥å…·æ¥ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼š</p>
<h4 data-id="heading-24"><strong>æ ¸å¿ƒä¼˜åŠ¿</strong></h4>
<ol>
<li><strong>å‡å°åˆå§‹åŒ…ä½“ç§¯</strong>ï¼šæ˜¾è‘—æå‡é¦–å±åŠ è½½é€Ÿåº¦</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåªåœ¨éœ€è¦æ—¶åŠ è½½ä»£ç ï¼ŒèŠ‚çœå¸¦å®½</li>
<li><strong>æ›´å¥½çš„ç¼“å­˜</strong>ï¼šç‹¬ç«‹ chunk å¯ç‹¬ç«‹ç¼“å­˜</li>
<li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼šåˆç†çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†</li>
</ol>
<h4 data-id="heading-25"><strong>æŠ€æœ¯é€‰æ‹©æŒ‡å—</strong></h4>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th></tr></thead><tbody><tr><td>ç®€å•å¼‚æ­¥åŠ è½½</td><td><code>defineAsyncComponent(() =&gt; import())</code></td><td>ç®€æ´ç›´è§‚</td></tr><tr><td>éœ€è¦åŠ è½½çŠ¶æ€</td><td><code>defineAsyncComponent</code> å®Œæ•´é…ç½®</td><td>å®Œæ•´çš„çŠ¶æ€ç®¡ç†</td></tr><tr><td>ç°ä»£åº”ç”¨</td><td><code>&lt;Suspense&gt;</code> + å¼‚æ­¥ç»„ä»¶</td><td>å£°æ˜å¼ã€æ›´ä¼˜é›…</td></tr><tr><td>è·¯ç”±çº§åˆ«</td><td>Vue Router åŠ¨æ€å¯¼å…¥</td><td>å¤©ç„¶çš„è·¯ç”±åˆ†å‰²</td></tr><tr><td>å¤æ‚å¼‚æ­¥é€»è¾‘</td><td>ç»„åˆå¼å‡½æ•° + å¼‚æ­¥ç»„ä»¶</td><td>æœ€å¤§çµæ´»æ€§</td></tr></tbody></table>
<h4 data-id="heading-26"><strong>æœ€ä½³å®è·µæé†’</strong></h4>
<ul>
<li>åˆç†è®¾ç½® <code>delay</code> é¿å…åŠ è½½é—ªçƒ</li>
<li>å§‹ç»ˆå¤„ç†åŠ è½½é”™è¯¯æƒ…å†µ</li>
<li>ä½¿ç”¨é¢„åŠ è½½æå‡å…³é”®è·¯å¾„æ€§èƒ½</li>
<li>ç›‘æ§ç»„ä»¶åŠ è½½æ€§èƒ½</li>
<li>åˆç†åˆ’åˆ†ä»£ç åˆ†å‰²ç‚¹</li>
</ul>
<p>é€šè¿‡åˆç†è¿ç”¨ Vue3 çš„å¼‚æ­¥ç»„ä»¶ç‰¹æ€§ï¼Œä½ å¯ä»¥æ„å»ºå‡ºæ—¢å¿«é€Ÿåˆç”¨æˆ·ä½“éªŒè‰¯å¥½çš„ç°ä»£ Web åº”ç”¨ã€‚</p>
<hr/>
<p><strong>å¸Œæœ›è¿™ç¯‡æ·±åº¦è§£æèƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ Vue3 çš„å¼‚æ­¥ç»„ä»¶åŠ è½½ï¼å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 è‡ªå®šä¹‰æŒ‡ä»¤æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575655132748005412</link>    <guid>https://juejin.cn/post/7575655132748005412</guid>    <pubDate>2025-11-23T03:31:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132748005412" data-draft-id="7575320672572244010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 è‡ªå®šä¹‰æŒ‡ä»¤æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T03:31:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 è‡ªå®šä¹‰æŒ‡ä»¤æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:31:20.000Z" title="Sun Nov 23 2025 03:31:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>æ‘˜è¦</strong></h2>
<p>è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ Vue.js ä¸­ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸å¼€å‘è€…ç›´æ¥å¯¹ DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œã€‚Vue3 åœ¨ä¿ç•™è‡ªå®šä¹‰æŒ‡ä»¤æ ¸å¿ƒæ¦‚å¿µçš„åŒæ—¶ï¼Œå¯¹å…¶ API è¿›è¡Œäº†è°ƒæ•´å’Œä¼˜åŒ–ï¼Œä½¿å…¶æ›´ç¬¦åˆç»„åˆå¼ API çš„è®¾è®¡ç†å¿µã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue3 ä¸­è‡ªå®šä¹‰æŒ‡ä»¤çš„å®šä¹‰æ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸé’©å­ã€ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µï¼Œé€šè¿‡ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹å’Œæ¸…æ™°çš„æµç¨‹å›¾ï¼Œå¸®åŠ©ä½ å½»åº•æŒæ¡è¿™ä¸€é‡è¦ç‰¹æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€ ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰æŒ‡ä»¤ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong></h2>
<h3 data-id="heading-2"><strong>1.1 è‡ªå®šä¹‰æŒ‡ä»¤çš„æ¦‚å¿µ</strong></h3>
<p>åœ¨ Vue.js ä¸­ï¼ŒæŒ‡ä»¤æ˜¯å¸¦æœ‰ <code>v-</code> å‰ç¼€çš„ç‰¹æ®Šå±æ€§ã€‚é™¤äº† Vue å†…ç½®çš„æŒ‡ä»¤ï¼ˆå¦‚ <code>v-model</code>ã€<code>v-show</code>ã€<code>v-if</code> ç­‰ï¼‰ï¼ŒVue è¿˜å…è®¸æˆ‘ä»¬æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨äºå¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œã€‚</p>
<h3 data-id="heading-3"><strong>1.2 ä½¿ç”¨åœºæ™¯</strong></h3>
<p>è‡ªå®šä¹‰æŒ‡ä»¤åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<ol>
<li><strong>DOM æ“ä½œ</strong>ï¼šç„¦ç‚¹ç®¡ç†ã€æ–‡æœ¬é€‰æ‹©ã€å…ƒç´ æ‹–æ‹½</li>
<li><strong>è¾“å…¥é™åˆ¶</strong>ï¼šæ ¼å¼åŒ–è¾“å…¥å†…å®¹ã€é˜»æ­¢æ— æ•ˆå­—ç¬¦</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šæ ¹æ®æƒé™æ˜¾ç¤º/éšè—å…ƒç´ </li>
<li><strong>é›†æˆç¬¬ä¸‰æ–¹åº“</strong>ï¼šä¸ jQuery æ’ä»¶ã€å›¾è¡¨åº“ç­‰é›†æˆ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå›¾ç‰‡æ‡’åŠ è½½ã€æ— é™æ»šåŠ¨</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šç‚¹å‡»å¤–éƒ¨å…³é—­ã€æ»šåŠ¨åŠ è½½æ›´å¤š</li>
</ol>
<h3 data-id="heading-4"><strong>1.3 Vue2 ä¸ Vue3 è‡ªå®šä¹‰æŒ‡ä»¤çš„åŒºåˆ«</strong></h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Vue2</th><th>Vue3</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong></td><td><code>bind</code>, <code>inserted</code>, <code>update</code>, <code>componentUpdated</code>, <code>unbind</code></td><td><code>created</code>, <code>beforeMount</code>, <code>mounted</code>, <code>beforeUpdate</code>, <code>updated</code>, <code>beforeUnmount</code>, <code>unmounted</code></td></tr><tr><td><strong>å‚æ•°ä¼ é€’</strong></td><td><code>el</code>, <code>binding</code>, <code>vnode</code>, <code>oldVnode</code></td><td><code>el</code>, <code>binding</code>, <code>vnode</code>, <code>prevVnode</code></td></tr><tr><td><strong>æ³¨å†Œæ–¹å¼</strong></td><td>å…¨å±€ <code>Vue.directive()</code>ï¼Œå±€éƒ¨ <code>directives</code> é€‰é¡¹</td><td>å…¨å±€ <code>app.directive()</code>ï¼Œå±€éƒ¨ <code>directives</code> é€‰é¡¹</td></tr><tr><td><strong>ä¸ç»„åˆå¼APIé›†æˆ</strong></td><td>æœ‰é™</td><td>æ›´å¥½ï¼Œå¯åœ¨ setup ä¸­ä½¿ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5"><strong>äºŒã€ è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºæœ¬ç»“æ„</strong></h2>
<h3 data-id="heading-6"><strong>2.1 æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸé’©å­</strong></h3>
<p>Vue3 ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤åŒ…å«ä¸€ç³»åˆ—ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™äº›é’©å­åœ¨æŒ‡ä»¤çš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼š</p>
<p><strong>æµç¨‹å›¾ï¼šè‡ªå®šä¹‰æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸ</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[æŒ‡ä»¤åˆ›å»º] --&gt; B[created&lt;br&gt;å…ƒç´ å±æ€§/äº‹ä»¶ç›‘å¬å™¨åº”ç”¨ä¹‹å‰]
    B --&gt; C[beforeMount&lt;br&gt;å…ƒç´ æŒ‚è½½åˆ°DOMä¹‹å‰]
    C --&gt; D[mounted&lt;br&gt;å…ƒç´ æŒ‚è½½åˆ°DOMä¹‹å]
    D --&gt; E{æŒ‡ä»¤ç»‘å®šå€¼å˜åŒ–?}
    E -- æ˜¯ --&gt; F[beforeUpdate&lt;br&gt;å…ƒç´ æ›´æ–°ä¹‹å‰]
    F --&gt; G[updated&lt;br&gt;å…ƒç´ æ›´æ–°ä¹‹å]
    E -- å¦ --&gt; H[å…ƒç´ å¸è½½]
    H --&gt; I[beforeUnmount&lt;br&gt;å…ƒç´ å¸è½½ä¹‹å‰]
    I --&gt; J[unmounted&lt;br&gt;å…ƒç´ å¸è½½ä¹‹å]
</code></pre>
<h3 data-id="heading-7"><strong>2.2 é’©å­å‡½æ•°å‚æ•°</strong></h3>
<p>æ¯ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°éƒ½ä¼šæ¥æ”¶ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li><strong><code>el</code></strong>ï¼šæŒ‡ä»¤ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ“ä½œ DOM</li>
<li><strong><code>binding</code></strong>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æŒ‡ä»¤çš„ç›¸å…³ä¿¡æ¯</li>
<li><strong><code>vnode</code></strong>ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹</li>
<li><strong><code>prevVnode</code></strong>ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆä»…åœ¨ <code>beforeUpdate</code> å’Œ <code>updated</code> ä¸­å¯ç”¨ï¼‰</li>
</ul>
<p><strong>binding å¯¹è±¡ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">value</span>:        any,        <span class="hljs-comment">// æŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œå¦‚ v-my-directive="value"</span>
  <span class="hljs-attr">oldValue</span>:     any,        <span class="hljs-comment">// æŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼</span>
  <span class="hljs-attr">arg</span>:          string,     <span class="hljs-comment">// æŒ‡ä»¤çš„å‚æ•°ï¼Œå¦‚ v-my-directive:arg</span>
  <span class="hljs-attr">modifiers</span>:    object,     <span class="hljs-comment">// æŒ‡ä»¤çš„ä¿®é¥°ç¬¦å¯¹è±¡ï¼Œå¦‚ v-my-directive.modifier</span>
  <span class="hljs-attr">instance</span>:     <span class="hljs-title class_">Component</span>,  <span class="hljs-comment">// ä½¿ç”¨æŒ‡ä»¤çš„ç»„ä»¶å®ä¾‹</span>
  <span class="hljs-attr">dir</span>:          object      <span class="hljs-comment">// æŒ‡ä»¤çš„å®šä¹‰å¯¹è±¡</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-8"><strong>ä¸‰ã€ å®šä¹‰è‡ªå®šä¹‰æŒ‡ä»¤çš„å¤šç§æ–¹å¼</strong></h2>
<h3 data-id="heading-9"><strong>3.1 å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤</strong></h3>
<p>å…¨å±€æŒ‡ä»¤åœ¨æ•´ä¸ª Vue åº”ç”¨ä¸­éƒ½å¯ç”¨ã€‚</p>
<h4 data-id="heading-10"><strong>æ–¹å¼ä¸€ï¼šä½¿ç”¨ <code>app.directive()</code></strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)

<span class="hljs-comment">// å®šä¹‰å…¨å±€ç„¦ç‚¹æŒ‡ä»¤</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-title function_">focus</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ è·å¾—ç„¦ç‚¹'</span>)
  }
})

<span class="hljs-comment">// å®šä¹‰å…¨å±€é¢œè‰²æŒ‡ä»¤ï¼ˆå¸¦å‚æ•°å’Œå€¼ï¼‰</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'color'</span>, {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span>
  },
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span>
  }
})

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-11"><strong>æ–¹å¼äºŒï¼šä½¿ç”¨æ’ä»¶å½¢å¼</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// directives/index.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> focusDirective = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-title function_">focus</span>()
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> colorDirective = {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span>
  },
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span>
  }
}

<span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰æŒ‡ä»¤</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">registerDirectives</span>(<span class="hljs-params">app</span>) {
  app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, focusDirective)
  app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'color'</span>, colorDirective)
}

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> { registerDirectives } <span class="hljs-keyword">from</span> <span class="hljs-string">'./directives'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
<span class="hljs-title function_">registerDirectives</span>(app)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-12"><strong>3.2 å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤</strong></h3>
<p>å±€éƒ¨æŒ‡ä»¤åªåœ¨ç‰¹å®šç»„ä»¶ä¸­å¯ç”¨ã€‚</p>
<h4 data-id="heading-13"><strong>é€‰é¡¹å¼ API</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;input v-focus-local placeholder="å±€éƒ¨ç„¦ç‚¹æŒ‡ä»¤" /&gt;
    &lt;p v-color-local="textColor"&gt;è¿™ä¸ªæ–‡æœ¬é¢œè‰²ä¼šå˜åŒ–&lt;/p&gt;
    &lt;button @click="changeColor"&gt;æ”¹å˜é¢œè‰²&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      textColor: 'red'
    }
  },
  methods: {
    changeColor() {
      this.textColor = this.textColor === 'red' ? 'blue' : 'red'
    }
  },
  directives: {
    // å±€éƒ¨ç„¦ç‚¹æŒ‡ä»¤
    'focus-local': {
      mounted(el) {
        el.focus()
      }
    },
    // å±€éƒ¨é¢œè‰²æŒ‡ä»¤
    'color-local': {
      beforeMount(el, binding) {
        el.style.color = binding.value
      },
      updated(el, binding) {
        el.style.color = binding.value
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-14"><strong>ç»„åˆå¼ API</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;input v-focus-local placeholder="å±€éƒ¨ç„¦ç‚¹æŒ‡ä»¤" /&gt;
    &lt;p v-color-local="textColor"&gt;è¿™ä¸ªæ–‡æœ¬é¢œè‰²ä¼šå˜åŒ–&lt;/p&gt;
    &lt;button @click="changeColor"&gt;æ”¹å˜é¢œè‰²&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const textColor = ref('red')

const changeColor = () =&gt; {
  textColor.value = textColor.value === 'red' ? 'blue' : 'red'
}

// å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤
const vFocusLocal = {
  mounted(el) {
    el.focus()
  }
}

const vColorLocal = {
  beforeMount(el, binding) {
    el.style.color = binding.value
  },
  updated(el, binding) {
    el.style.color = binding.value
  }
}
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-15"><strong>å››ã€ å®Œæ•´ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹</strong></h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹æ¥æ¼”ç¤ºæ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="demo-container"&gt;
    &lt;h2&gt;è‡ªå®šä¹‰æŒ‡ä»¤å®Œæ•´ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º&lt;/h2&gt;
    
    &lt;div&gt;
      &lt;button @click="toggleDisplay"&gt;{{ isVisible ? 'éšè—' : 'æ˜¾ç¤º' }}å…ƒç´ &lt;/button&gt;
      &lt;button @click="changeMessage"&gt;æ”¹å˜æ¶ˆæ¯&lt;/button&gt;
      &lt;button @click="changeColor"&gt;æ”¹å˜é¢œè‰²&lt;/button&gt;
    &lt;/div&gt;

    &lt;div v-if="isVisible" v-lifecycle-demo:arg.modifier="directiveValue" 
         class="demo-element" :style="{ color: elementColor }"&gt;
      {{ message }}
    &lt;/div&gt;

    &lt;div class="log-container"&gt;
      &lt;h3&gt;ç”Ÿå‘½å‘¨æœŸæ—¥å¿—ï¼š&lt;/h3&gt;
      &lt;div v-for="(log, index) in logs" :key="index" class="log-item"&gt;
        {{ log }}
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive } from 'vue'

const isVisible = ref(false)
const message = ref('Hello, Custom Directive!')
const elementColor = ref('#333')
const logs = ref([])

const directiveValue = reactive({
  text: 'æŒ‡ä»¤å€¼å¯¹è±¡',
  count: 0
})

// æ·»åŠ æ—¥å¿—å‡½æ•°
const addLog = (hookName, el, binding) =&gt; {
  const log = `[${new Date().toLocaleTimeString()}] ${hookName}: value=${JSON.stringify(binding.value)}, arg=${binding.arg}`
  logs.value.push(log)
  // ä¿æŒæ—¥å¿—æ•°é‡ä¸è¶…è¿‡20æ¡
  if (logs.value.length &gt; 20) {
    logs.value.shift()
  }
}

// å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæŒ‡ä»¤
const vLifecycleDemo = {
  created(el, binding) {
    addLog('created', el, binding)
    console.log('created - æŒ‡ä»¤åˆ›å»ºï¼Œå…ƒç´ è¿˜æœªæŒ‚è½½')
  },
  
  beforeMount(el, binding) {
    addLog('beforeMount', el, binding)
    console.log('beforeMount - å…ƒç´ æŒ‚è½½å‰')
    el.style.transition = 'all 0.3s ease'
  },
  
  mounted(el, binding) {
    addLog('mounted', el, binding)
    console.log('mounted - å…ƒç´ æŒ‚è½½å®Œæˆ')
    console.log('ä¿®é¥°ç¬¦:', binding.modifiers)
    console.log('å‚æ•°:', binding.arg)
    
    // æ·»åŠ åŠ¨ç”»æ•ˆæœ
    el.style.opacity = '0'
    el.style.transform = 'translateY(-20px)'
    
    setTimeout(() =&gt; {
      el.style.opacity = '1'
      el.style.transform = 'translateY(0)'
    }, 100)
  },
  
  beforeUpdate(el, binding) {
    addLog('beforeUpdate', el, binding)
    console.log('beforeUpdate - å…ƒç´ æ›´æ–°å‰')
  },
  
  updated(el, binding) {
    addLog('updated', el, binding)
    console.log('updated - å…ƒç´ æ›´æ–°å®Œæˆ')
    
    // æ›´æ–°æ—¶çš„åŠ¨ç”»
    el.style.backgroundColor = '#e3f2fd'
    setTimeout(() =&gt; {
      el.style.backgroundColor = ''
    }, 500)
  },
  
  beforeUnmount(el, binding) {
    addLog('beforeUnmount', el, binding)
    console.log('beforeUnmount - å…ƒç´ å¸è½½å‰')
    
    // å¸è½½åŠ¨ç”»
    el.style.opacity = '1'
    el.style.transform = 'translateY(0)'
    el.style.opacity = '0'
    el.style.transform = 'translateY(-20px)'
  },
  
  unmounted(el, binding) {
    addLog('unmounted', el, binding)
    console.log('unmounted - å…ƒç´ å¸è½½å®Œæˆ')
  }
}

const toggleDisplay = () =&gt; {
  isVisible.value = !isVisible.value
}

const changeMessage = () =&gt; {
  message.value = `æ¶ˆæ¯å·²æ›´æ–° ${Date.now()}`
  directiveValue.count++
}

const changeColor = () =&gt; {
  const colors = ['#ff4444', '#44ff44', '#4444ff', '#ff44ff', '#ffff44']
  elementColor.value = colors[Math.floor(Math.random() * colors.length)]
}
&lt;/script&gt;

&lt;style scoped&gt;
.demo-container {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.demo-element {
  padding: 20px;
  margin: 20px 0;
  border: 2px solid #42b983;
  border-radius: 8px;
  background: #f9f9f9;
}

.log-container {
  margin-top: 20px;
  padding: 15px;
  background: #f5f5f5;
  border-radius: 8px;
  max-height: 400px;
  overflow-y: auto;
}

.log-item {
  padding: 5px 10px;
  margin: 2px 0;
  background: white;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 12px;
}

button {
  margin: 5px;
  padding: 8px 16px;
  background: #42b983;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background: #369870;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-16"><strong>äº”ã€ å®ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ç¤ºä¾‹</strong></h2>
<h3 data-id="heading-17"><strong>5.1 ç‚¹å‡»å¤–éƒ¨å…³é—­æŒ‡ä»¤</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="click-outside-demo"&gt;
    &lt;h2&gt;ç‚¹å‡»å¤–éƒ¨å…³é—­æ¼”ç¤º&lt;/h2&gt;
    
    &lt;button @click="showDropdown = !showDropdown"&gt;
      åˆ‡æ¢ä¸‹æ‹‰èœå• {{ showDropdown ? 'â–²' : 'â–¼' }}
    &lt;/button&gt;

    &lt;div v-if="showDropdown" v-click-outside="closeDropdown" class="dropdown"&gt;
      &lt;div class="dropdown-item"&gt;èœå•é¡¹ 1&lt;/div&gt;
      &lt;div class="dropdown-item"&gt;èœå•é¡¹ 2&lt;/div&gt;
      &lt;div class="dropdown-item"&gt;èœå•é¡¹ 3&lt;/div&gt;
    &lt;/div&gt;

    &lt;div v-if="showModal" v-click-outside="closeModal" class="modal"&gt;
      &lt;div class="modal-content"&gt;
        &lt;h3&gt;æ¨¡æ€æ¡†&lt;/h3&gt;
        &lt;p&gt;ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å¯ä»¥å…³é—­&lt;/p&gt;
        &lt;button @click="showModal = false"&gt;å…³é—­&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;button @click="showModal = true" style="margin-left: 10px;"&gt;
      æ‰“å¼€æ¨¡æ€æ¡†
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const showDropdown = ref(false)
const showModal = ref(false)

// ç‚¹å‡»å¤–éƒ¨å…³é—­æŒ‡ä»¤
const vClickOutside = {
  mounted(el, binding) {
    el._clickOutsideHandler = (event) =&gt; {
      // æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨å…ƒç´ å¤–éƒ¨
      if (!(el === event.target || el.contains(event.target))) {
        binding.value(event)
      }
    }
    document.addEventListener('click', el._clickOutsideHandler)
  },
  unmounted(el) {
    document.removeEventListener('click', el._clickOutsideHandler)
  }
}

const closeDropdown = () =&gt; {
  showDropdown.value = false
}

const closeModal = () =&gt; {
  showModal.value = false
}
&lt;/script&gt;

&lt;style scoped&gt;
.dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  z-index: 1000;
  margin-top: 5px;
}

.dropdown-item {
  padding: 10px 20px;
  cursor: pointer;
  border-bottom: 1px solid #eee;
}

.dropdown-item:hover {
  background: #f5f5f5;
}

.dropdown-item:last-child {
  border-bottom: none;
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.modal-content {
  background: white;
  padding: 30px;
  border-radius: 8px;
  max-width: 400px;
  width: 90%;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-18"><strong>5.2 è¾“å…¥é™åˆ¶æŒ‡ä»¤</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="input-restriction-demo"&gt;
    &lt;h2&gt;è¾“å…¥é™åˆ¶æŒ‡ä»¤æ¼”ç¤º&lt;/h2&gt;
    
    &lt;div class="input-group"&gt;
      &lt;label&gt;ä»…æ•°å­—è¾“å…¥ï¼š&lt;/label&gt;
      &lt;input v-number-only v-model="numberInput" placeholder="åªèƒ½è¾“å…¥æ•°å­—" /&gt;
      &lt;span&gt;å€¼: {{ numberInput }}&lt;/span&gt;
    &lt;/div&gt;

    &lt;div class="input-group"&gt;
      &lt;label&gt;æœ€å¤§é•¿åº¦é™åˆ¶ï¼š&lt;/label&gt;
      &lt;input v-limit-length="10" v-model="limitedInput" placeholder="æœ€å¤š10ä¸ªå­—ç¬¦" /&gt;
      &lt;span&gt;å€¼: {{ limitedInput }}&lt;/span&gt;
    &lt;/div&gt;

    &lt;div class="input-group"&gt;
      &lt;label&gt;ç¦æ­¢ç‰¹æ®Šå­—ç¬¦ï¼š&lt;/label&gt;
      &lt;input v-no-special-chars v-model="noSpecialInput" placeholder="ä¸èƒ½è¾“å…¥ç‰¹æ®Šå­—ç¬¦" /&gt;
      &lt;span&gt;å€¼: {{ noSpecialInput }}&lt;/span&gt;
    &lt;/div&gt;

    &lt;div class="input-group"&gt;
      &lt;label&gt;è‡ªåŠ¨æ ¼å¼åŒ–æ‰‹æœºå·ï¼š&lt;/label&gt;
      &lt;input v-phone-format v-model="phoneInput" placeholder="è¾“å…¥æ‰‹æœºå·" /&gt;
      &lt;span&gt;å€¼: {{ phoneInput }}&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const numberInput = ref('')
const limitedInput = ref('')
const noSpecialInput = ref('')
const phoneInput = ref('')

// ä»…æ•°å­—è¾“å…¥æŒ‡ä»¤
const vNumberOnly = {
  mounted(el) {
    el.addEventListener('input', (e) =&gt; {
      e.target.value = e.target.value.replace(/[^\d]/g, '')
      // è§¦å‘ v-model æ›´æ–°
      e.dispatchEvent(new Event('input'))
    })
  }
}

// é•¿åº¦é™åˆ¶æŒ‡ä»¤
const vLimitLength = {
  mounted(el, binding) {
    const maxLength = binding.value
    el.setAttribute('maxlength', maxLength)
    
    el.addEventListener('input', (e) =&gt; {
      if (e.target.value.length &gt; maxLength) {
        e.target.value = e.target.value.slice(0, maxLength)
        e.dispatchEvent(new Event('input'))
      }
    })
  }
}

// ç¦æ­¢ç‰¹æ®Šå­—ç¬¦æŒ‡ä»¤
const vNoSpecialChars = {
  mounted(el) {
    el.addEventListener('input', (e) =&gt; {
      e.target.value = e.target.value.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g, '')
      e.dispatchEvent(new Event('input'))
    })
  }
}

// æ‰‹æœºå·æ ¼å¼åŒ–æŒ‡ä»¤
const vPhoneFormat = {
  mounted(el) {
    el.addEventListener('input', (e) =&gt; {
      let value = e.target.value.replace(/\D/g, '')
      
      if (value.length &gt; 3 &amp;&amp; value.length &lt;= 7) {
        value = value.replace(/(\d{3})(\d+)/, '$1-$2')
      } else if (value.length &gt; 7) {
        value = value.replace(/(\d{3})(\d{4})(\d+)/, '$1-$2-$3')
      }
      
      e.target.value = value
      e.dispatchEvent(new Event('input'))
    })
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.input-restriction-demo {
  padding: 20px;
}

.input-group {
  margin: 15px 0;
}

label {
  display: inline-block;
  width: 150px;
  font-weight: bold;
}

input {
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin: 0 10px;
  width: 200px;
}

span {
  color: #666;
  font-size: 14px;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-19"><strong>5.3 æƒé™æ§åˆ¶æŒ‡ä»¤</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="permission-demo"&gt;
    &lt;h2&gt;æƒé™æ§åˆ¶æŒ‡ä»¤æ¼”ç¤º&lt;/h2&gt;
    
    &lt;div class="user-info"&gt;
      &lt;label&gt;å½“å‰ç”¨æˆ·è§’è‰²ï¼š&lt;/label&gt;
      &lt;select v-model="currentRole" @change="updatePermissions"&gt;
        &lt;option value="guest"&gt;æ¸¸å®¢&lt;/option&gt;
        &lt;option value="user"&gt;æ™®é€šç”¨æˆ·&lt;/option&gt;
        &lt;option value="editor"&gt;ç¼–è¾‘è€…&lt;/option&gt;
        &lt;option value="admin"&gt;ç®¡ç†å‘˜&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;

    &lt;div class="permission-list"&gt;
      &lt;h3&gt;å¯ç”¨åŠŸèƒ½ï¼š&lt;/h3&gt;
      
      &lt;button v-permission="'view'" class="feature-btn"&gt;
        ğŸ” æŸ¥çœ‹å†…å®¹
      &lt;/button&gt;
      
      &lt;button v-permission="'edit'" class="feature-btn"&gt;
        âœï¸ ç¼–è¾‘å†…å®¹
      &lt;/button&gt;
      
      &lt;button v-permission="'delete'" class="feature-btn"&gt;
        ğŸ—‘ï¸ åˆ é™¤å†…å®¹
      &lt;/button&gt;
      
      &lt;button v-permission="'admin'" class="feature-btn"&gt;
        âš™ï¸ ç³»ç»Ÿç®¡ç†
      &lt;/button&gt;
      
      &lt;button v-permission="['edit', 'delete']" class="feature-btn"&gt;
        ğŸ”„ æ‰¹é‡æ“ä½œ
      &lt;/button&gt;
    &lt;/div&gt;

    &lt;div class="current-permissions"&gt;
      &lt;h3&gt;å½“å‰æƒé™ï¼š&lt;/h3&gt;
      &lt;ul&gt;
        &lt;li v-for="permission in currentPermissions" :key="permission"&gt;
          {{ permission }}
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive } from 'vue'

// è§’è‰²æƒé™æ˜ å°„
const rolePermissions = {
  guest: ['view'],
  user: ['view', 'edit'],
  editor: ['view', 'edit', 'delete'],
  admin: ['view', 'edit', 'delete', 'admin']
}

const currentRole = ref('user')
const currentPermissions = ref(['view', 'edit'])

// æƒé™æ§åˆ¶æŒ‡ä»¤
const vPermission = {
  mounted(el, binding) {
    checkPermission(el, binding)
  },
  updated(el, binding) {
    checkPermission(el, binding)
  }
}

// æ£€æŸ¥æƒé™å‡½æ•°
const checkPermission = (el, binding) =&gt; {
  const requiredPermissions = Array.isArray(binding.value) 
    ? binding.value 
    : [binding.value]
  
  const hasPermission = requiredPermissions.some(permission =&gt; 
    currentPermissions.value.includes(permission)
  )
  
  if (!hasPermission) {
    el.style.display = 'none'
  } else {
    el.style.display = 'inline-block'
  }
}

// æ›´æ–°æƒé™
const updatePermissions = () =&gt; {
  currentPermissions.value = rolePermissions[currentRole.value] || []
}
&lt;/script&gt;

&lt;style scoped&gt;
.permission-demo {
  padding: 20px;
  max-width: 600px;
  margin: 0 auto;
}

.user-info {
  margin: 20px 0;
}

select {
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-left: 10px;
}

.permission-list {
  margin: 30px 0;
}

.feature-btn {
  display: inline-block;
  padding: 12px 20px;
  margin: 5px;
  background: #42b983;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s;
}

.feature-btn:hover {
  background: #369870;
}

.current-permissions {
  margin-top: 30px;
  padding: 15px;
  background: #f5f5f5;
  border-radius: 8px;
}

.current-permissions ul {
  list-style: none;
  padding: 0;
}

.current-permissions li {
  padding: 5px 10px;
  background: white;
  margin: 5px 0;
  border-radius: 4px;
  border-left: 4px solid #42b983;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-20"><strong>å…­ã€ é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ</strong></h2>
<h3 data-id="heading-21"><strong>6.1 æŒ‡ä»¤å‚æ•°åŠ¨æ€åŒ–</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;input v-tooltip="tooltipConfig" placeholder="æ‚¬æµ®æ˜¾ç¤ºæç¤º" /&gt;
    
    &lt;div v-pin="pinConfig" class="pinned-element"&gt;
      å¯åŠ¨æ€é…ç½®çš„å›ºå®šå…ƒç´ 
    &lt;/div&gt;
    
    &lt;button @click="updateConfig"&gt;æ›´æ–°é…ç½®&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, reactive } from 'vue'

// åŠ¨æ€æç¤ºæŒ‡ä»¤
const vTooltip = {
  mounted(el, binding) {
    const config = binding.value
    el.title = config.text
    el.style.cursor = config.cursor || 'help'
    
    if (config.position) {
      el.dataset.position = config.position
    }
  },
  updated(el, binding) {
    const config = binding.value
    el.title = config.text
  }
}

// åŠ¨æ€å›ºå®šæŒ‡ä»¤
const vPin = {
  mounted(el, binding) {
    updatePinPosition(el, binding)
  },
  updated(el, binding) {
    updatePinPosition(el, binding)
  }
}

const updatePinPosition = (el, binding) =&gt; {
  const config = binding.value
  el.style.position = 'fixed'
  el.style[config.side] = config.distance + 'px'
  el.style.zIndex = config.zIndex || 1000
}

const tooltipConfig = reactive({
  text: 'è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æç¤º',
  cursor: 'help',
  position: 'top'
})

const pinConfig = reactive({
  side: 'top',
  distance: 20,
  zIndex: 1000
})

const updateConfig = () =&gt; {
  tooltipConfig.text = `æ›´æ–°åçš„æç¤º ${Date.now()}`
  pinConfig.side = pinConfig.side === 'top' ? 'bottom' : 'top'
  pinConfig.distance = Math.random() * 100 + 20
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-22"><strong>6.2 æŒ‡ä»¤ç»„åˆä¸å¤ç”¨</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// directives/composable.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useClickHandlers</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      el.<span class="hljs-property">_clickHandler</span> = binding.<span class="hljs-property">value</span>
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_clickHandler</span>)
    },
    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_clickHandler</span>)
    }
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useHoverHandlers</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      el.<span class="hljs-property">_mouseenterHandler</span> = binding.<span class="hljs-property">value</span>.<span class="hljs-property">enter</span>
      el.<span class="hljs-property">_mouseleaveHandler</span> = binding.<span class="hljs-property">value</span>.<span class="hljs-property">leave</span>
      
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_mouseenterHandler</span>) {
        el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseenter'</span>, el.<span class="hljs-property">_mouseenterHandler</span>)
      }
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_mouseleaveHandler</span>) {
        el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseleave'</span>, el.<span class="hljs-property">_mouseleaveHandler</span>)
      }
    },
    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_mouseenterHandler</span>) {
        el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseenter'</span>, el.<span class="hljs-property">_mouseenterHandler</span>)
      }
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_mouseleaveHandler</span>) {
        el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseleave'</span>, el.<span class="hljs-property">_mouseleaveHandler</span>)
      }
    }
  }
}

<span class="hljs-comment">// ç»„åˆæŒ‡ä»¤</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> vInteractive = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { click, hover } = binding.<span class="hljs-property">value</span>
    
    <span class="hljs-keyword">if</span> (click) {
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, click)
      el.<span class="hljs-property">_clickHandler</span> = click
    }
    
    <span class="hljs-keyword">if</span> (hover) {
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseenter'</span>, hover.<span class="hljs-property">enter</span>)
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseleave'</span>, hover.<span class="hljs-property">leave</span>)
      el.<span class="hljs-property">_hoverHandlers</span> = hover
    }
  },
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_clickHandler</span>) {
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_clickHandler</span>)
    }
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_hoverHandlers</span>) {
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseenter'</span>, el.<span class="hljs-property">_hoverHandlers</span>.<span class="hljs-property">enter</span>)
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseleave'</span>, el.<span class="hljs-property">_hoverHandlers</span>.<span class="hljs-property">leave</span>)
    }
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-23"><strong>ä¸ƒã€ æ€»ç»“</strong></h2>
<h3 data-id="heading-24"><strong>7.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</strong></h3>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong>ï¼šVue3 æä¾›äº† 7 ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¦†ç›–äº†æŒ‡ä»¤çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>å‚æ•°ä¼ é€’</strong>ï¼šé€šè¿‡ <code>binding</code> å¯¹è±¡å¯ä»¥è®¿é—®æŒ‡ä»¤çš„å€¼ã€å‚æ•°ã€ä¿®é¥°ç¬¦ç­‰ä¿¡æ¯</li>
<li><strong>å¤šç§å®šä¹‰æ–¹å¼</strong>ï¼šæ”¯æŒå…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œï¼Œå…¼å®¹é€‰é¡¹å¼ API å’Œç»„åˆå¼ API</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæŒ‡ä»¤å¯ä»¥æ¥æ”¶åŠ¨æ€å‚æ•°ã€å¯¹è±¡å€¼ï¼Œæ”¯æŒå¤æ‚çš„äº¤äº’é€»è¾‘</li>
</ol>
<h3 data-id="heading-25"><strong>7.2 æœ€ä½³å®è·µ</strong></h3>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦å‘½åæŒ‡ä»¤</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šåœ¨ <code>unmounted</code> é’©å­ä¸­æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œå®šæ—¶å™¨</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…åœ¨æŒ‡ä»¤ä¸­è¿›è¡Œæ˜‚è´µçš„ DOM æ“ä½œ</li>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šå°†é€šç”¨æŒ‡ä»¤æå–ä¸ºç‹¬ç«‹æ¨¡å—</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šä¸ºæŒ‡ä»¤æä¾› TypeScript ç±»å‹å®šä¹‰</li>
</ol>
<h3 data-id="heading-26"><strong>7.3 é€‚ç”¨åœºæ™¯</strong></h3>
<ul>
<li><strong>DOM æ“ä½œ</strong>ï¼šç„¦ç‚¹ç®¡ç†ã€å…ƒç´ å®šä½ã€åŠ¨ç”»æ§åˆ¶</li>
<li><strong>è¾“å…¥å¤„ç†</strong>ï¼šæ ¼å¼åŒ–ã€éªŒè¯ã€é™åˆ¶</li>
<li><strong>ç”¨æˆ·äº¤äº’</strong>ï¼šç‚¹å‡»å¤–éƒ¨ã€æ»šåŠ¨åŠ è½½ã€æ‹–æ‹½</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šåŸºäºè§’è‰²çš„å…ƒç´ æ˜¾ç¤º/éšè—</li>
<li><strong>ç¬¬ä¸‰æ–¹é›†æˆ</strong>ï¼šåŒ…è£…ç°æœ‰çš„ JavaScript åº“</li>
</ul>
<p>è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ Vue.js ç”Ÿæ€ä¸­ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç‰¹æ€§ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æå¤§åœ°æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ Vue3 ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼</p>
<hr/>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—å’Œè¯„è®ºï¼æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¸¸æˆæ¡†æ¶æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7575655132748120100</link>    <guid>https://juejin.cn/post/7575655132748120100</guid>    <pubDate>2025-11-23T05:31:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132748120100" data-draft-id="7575313772988104745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¸¸æˆæ¡†æ¶æ–‡æ¡£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T05:31:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·8922541182901"/> <meta itemprop="url" content="https://juejin.cn/user/1179135862128471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¸¸æˆæ¡†æ¶æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1179135862128471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·8922541182901
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T05:31:32.000Z" title="Sun Nov 23 2025 05:31:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¡†æ¶å¯ç”¨å’ŒåŠŸèƒ½ä»‹ç»</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95d678904af14e5bb1c005c050428fff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=3w0pQYTYh4C7nsGc6I%2Fo1sfJbhs%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å°†æ¡†æ¶é¢„åˆ¶ä½“æ‹–å…¥Hierarchyä¸­å³å¯ï¼Œè„šæœ¬ä¸­ä½¿ç”¨æ—¶using JKframeå‘½åç©ºé—´ï¼Œæ¡†æ¶çš„githubåœ°å€,ä¸ºäº†é¿å…æ¡†æ¶ä¸­UIéƒ¨åˆ†å¯¹Sceneåœºæ™¯ä¸­äº¤äº’äº§ç”Ÿå¹²æ‰°ï¼Œå»ºè®®æŠŠæ¡†æ¶äº¤äº’å±è”½æ‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94e08ccc0bd047ac8f56ace927a980b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=9YogGAsKgrHRD1ZaaVLHjlBhMt4%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>æ¡†æ¶ç±»ä¼¼å·¥å…·ç®±å’Œæ’ä»¶ï¼Œé™¤äº†UIçª—å£å¤–çš„å¤§å¤šæƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦ç»§æ‰¿ä»€ä¹ˆç±»æˆ–æ¥å£ï¼Œç›´æ¥é€šè¿‡XXXSystemè°ƒç”¨å³å¯ã€‚ä¸»è¦åŠŸèƒ½ç³»ç»Ÿï¼š</p>
<ol start="0">
<li>
<p>å¯¹è±¡æ± ç³»ç»Ÿï¼šé‡å¤åˆ©ç”¨GameObjectæˆ–æ™®é€šclasså®ä¾‹ï¼Œå¹¶ä¸”æ”¯æŒè®¾ç½®å¯¹è±¡æ± å®¹é‡</p>
</li>
<li>
<p>äº‹ä»¶ç³»ç»Ÿï¼šè§£è€¦å·¥å…·ï¼Œä¸éœ€è¦æŒæœ‰å¼•ç”¨æ¥è¿›è¡Œå‡½æ•°çš„è°ƒç”¨</p>
</li>
<li>
<p>èµ„æºç³»ç»Ÿ</p>
<ul>
<li>Resourcesç‰ˆæœ¬ï¼šå…³è”å¯¹è±¡æ± è¿›è¡Œèµ„æºçš„åŠ è½½å¸è½½</li>
<li>Addressablesç‰ˆæœ¬ï¼šå…³è”å¯¹è±¡æ± è¿›è¡Œèµ„æºçš„åŠ è½½å¸è½½ï¼Œå¯ç»“åˆäº‹ä»¶å·¥å…·åšåˆ°é”€æ¯æ—¶è‡ªåŠ¨ä»Addressables Unload</li>
</ul>
</li>
<li>
<p>MonoSystemï¼šä¸ºä¸ç»§æ‰¿MonoBehaviourçš„å¯¹è±¡æä¾›Updateã€FixedUpdateã€åç¨‹ç­‰åŠŸèƒ½</p>
</li>
<li>
<p>éŸ³æ•ˆç³»ç»Ÿï¼šèƒŒæ™¯éŸ³ä¹ã€èƒŒæ™¯éŸ³ä¹è½®æ’­ã€ç‰¹æ•ˆéŸ³ä¹ã€éŸ³é‡å…¨å±€æ§åˆ¶ç­‰</p>
</li>
<li>
<p>å­˜æ¡£ç³»ç»Ÿï¼š</p>
<ul>
<li>æ”¯æŒå¤šå­˜æ¡£</li>
<li>è‡ªåŠ¨ç¼“å­˜ï¼Œé¿å…é¢‘ç¹è¯»ç£ç›˜</li>
<li>å­˜ç©å®¶è®¾ç½®ç±»æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸å…³è”ä»»ä½•ä¸€ä¸ªå­˜æ¡£</li>
<li>æ”¯æŒäºŒè¿›åˆ¶å’ŒJsonå­˜æ¡£ï¼Œå¼€å‘æ—¶ä½¿ç”¨Jsonè°ƒè¯•ï¼Œä¸Šçº¿åä½¿ç”¨äºŒè¿›åˆ¶åŠ å¯†ä¸å‡å°‘æ–‡ä»¶ä½“ç§¯</li>
</ul>
</li>
<li>
<p>æ—¥å¿—ç³»ç»Ÿï¼šæ—¥å¿—æ§åˆ¶ã€ä¿å­˜ç­‰</p>
</li>
<li>
<p>UIç³»ç»Ÿï¼šUIçª—å£çš„å±‚çº§ç®¡ç†ã€TipsåŠŸèƒ½</p>
</li>
<li>
<p>åœºæ™¯ç³»ç»Ÿï¼šå¯¹Unityåœºæ™¯åŠ è½½å°è£…äº†ä¸€å±‚ï¼Œä¸»è¦ç”¨äºç›‘å¬åœºæ™¯åŠ è½½è¿›åº¦</p>
</li>
<li>
<p>æœ¬åœ°åŒ–ç³»ç»Ÿï¼šåˆ†ä¸ºå…¨å±€é…ç½®å’Œå±€éƒ¨é…ç½®ï¼ˆéšGameObjectåŠ è½½ï¼‰ã€UIè‡ªåŠ¨æœ¬åœ°åŒ–æ”¶é›†å™¨ï¼ˆTextã€Imageç»„ä»¶æ— éœ€ä»£ç å³å¯è‡ªåŠ¨æœ¬åœ°åŒ–ï¼‰</p>
</li>
</ol>
<p>å…¶ä»–åŠŸèƒ½ï¼š</p>
<ol start="0">
<li>çŠ¶æ€æœºï¼šè„šæœ¬é€»è¾‘çŠ¶æ€æœºã€‚</li>
<li>äº‹ä»¶å·¥å…·ï¼š ç»™ç‰©ä½“æ·»åŠ ç‚¹å‡»ã€é¼ æ ‡è¿›å…¥ã€é¼ æ ‡æ‹–æ‹½ã€ç¢°æ’ã€è§¦å‘ã€é”€æ¯ç­‰äº‹ä»¶ï¼Œè€Œä¸éœ€è¦é¢å¤–åœ¨è¯¥ç‰©ä½“ä¸Šæ·»åŠ è„šæœ¬ç­‰ã€‚</li>
<li>åç¨‹å·¥å…·ï¼šåç¨‹é¿å…GCã€‚</li>
</ol>
<h2 data-id="heading-1">å¯¹è±¡æ± </h2>
<p>åœ¨Unityä¸­ï¼Œå¯¹è±¡çš„ç”Ÿæˆã€é”€æ¯éƒ½éœ€è¦æ€§èƒ½å¼€é”€ï¼Œåœ¨ä¸€äº›ç‰¹å®šçš„åº”ç”¨åœºæ™¯ä¸‹éœ€è¦è¿›è¡Œå¤§é‡é‡å¤ç‰©ä½“çš„å…‹éš†ï¼Œå› æ­¤éœ€è¦é€šè¿‡è®¾è®¡å¯¹è±¡æ± æ¥å®ç°é‡å¤åˆ©ç”¨å¯¹è±¡å®ä¾‹ï¼Œå‡å°‘è§¦å‘åƒåœ¾å›æ”¶ã€‚å¸¸ç”¨åœ¨é¢‘ç¹åˆ›å»ºã€é”€æ¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚å­å¼¹ã€AIç”Ÿæˆç­‰ç­‰ã€èƒŒåŒ…æ ¼å­ã€‚</p>
<p>æœ¬æ¡†æ¶çš„å¯¹è±¡æ± ç³»ç»Ÿæœ‰ä¸¤ç±»å¯¹è±¡æ± ï¼ˆGameObjectå¯¹è±¡æ± å’ŒObjectå¯¹è±¡æ± ï¼‰åˆ†åˆ«è´Ÿè´£å¯¹éœ€è¦åœ¨åœºæ™¯ä¸­å®é™…æ¿€æ´»/éšè—çš„GameObjectå’Œä¸éœ€è¦æ˜¾ç¤ºåœ¨åœºæ™¯é‡Œçš„å¯¹è±¡ï¼ˆè„šæœ¬ç±»ã€æè´¨èµ„æºï¼‰è¿›è¡Œç®¡ç†ã€‚</p>
<p>æœ¬æ¡†æ¶æä¾›å¯¹è±¡æ± å®¹é‡çš„é™åˆ¶ï¼Œä¸”åˆå§‹åŒ–æ—¶ï¼Œå¯ä»¥é¢„å…ˆä¼ å…¥è¦æ”¾å…¥çš„å¯¹è±¡æ ¹æ®é»˜è®¤å®¹é‡å®ä¾‹åŒ–æ”¾å…¥å¯¹è±¡æ± ï¼Œæ¯”å¦‚åœºæ™¯ä¸­é»˜è®¤ä½¿ç”¨20å‘å­å¼¹ï¼Œå¯ä»¥åœ¨å¯¹è±¡æ± åˆå§‹åŒ–æ—¶å°±å®ä¾‹åŒ–å¥½20æšå­å¼¹æ”¾å…¥å¯¹è±¡æ± ã€‚</p>
<p>å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡æŒæœ‰PoolMoudleå±‚æ¥å•ç‹¬æ„å»ºä¸€ä¸ªä¸åŒäºå…¨å±€å¯¹è±¡æ± PoolSystemçš„Poolï¼Œé»˜è®¤æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨å…¨å±€å¯¹è±¡æ± PoolSystemå³å¯ã€‚</p>
<h3 data-id="heading-2">GameObjectå¯¹è±¡æ± ï¼ˆGOPï¼‰</h3>
<p>ç”¨äºç®¡ç†å®é™…å­˜åœ¨åœºæ™¯ä¸­å¹¶å‡ºç°åœ¨Hierarchyçª—å£ä¸Šçš„GameObjectå¯¹è±¡ã€‚</p>
<h4 data-id="heading-3">åˆå§‹åŒ–GOP</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1,GameObject prefab = null,int defaultQuantity = 0)</span>
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName, maxCapacity, prefab, defaultQuanity);
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName, maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName);
<span class="hljs-comment">//æ ¹æ®prefab.nameåˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//  //(GameObject prefab = null, int maxCapacity = -1,GameObject prefab = null,int defaultQuantity = 0)</span>
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(prefab, maxCapacity, defaultQuanity);
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(prefab, maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(prefab);
<span class="hljs-comment">//æ ¹æ®GameObjectæ•°ç»„å¤§å°è¿›è¡Œé»˜è®¤å®¹é‡è®¾ç½®ï¼Œå¹¶å°†æ•°ç»„å¯¹è±¡ä½œä¸ºé»˜è®¤å¯¹è±¡å…¨éƒ¨ç½®å…¥å¯¹è±¡æ± </span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, GameObject[] gameObjects = null)</span>
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName, maxCapacity, gameObject);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªå­å¼¹Bulletå¯¹è±¡æ± ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
Gameobject bullet = GameObject<span class="hljs-selector-class">.Find</span>("bullet");
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>("Bullet", <span class="hljs-number">30</span>, bullet, <span class="hljs-number">30</span>);
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(bullet, <span class="hljs-number">30</span>, <span class="hljs-number">30</span>);


<span class="hljs-comment">//æœ€ç®€å½¢å¼</span>
PoolSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(â€œå¯¹è±¡æ± åå­—â€);
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥prefabæ ¹æ®prefab.name æŒ‡å®šå¯¹è±¡æ± çš„åå­—ã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>åˆå§‹åŒ–å¹¶ä¸å‘æ„å»ºå‡ºçš„ç©ºå¯¹è±¡æ± å¡«å…¥å†…å®¹ï¼Œä½†å¯é€šè¿‡prefabå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡å¡«å……ç©ºå¯¹è±¡æ± ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨ç”ŸæˆGameObjectæ”¾å…¥å¯¹è±¡æ± ï¼‰ã€‚</li>
<li>å¯é€šè¿‡ä¼ å…¥GameObjectæ•°ç»„åˆå§‹åŒ–å¯¹è±¡æ± çš„é»˜è®¤å®¹é‡å¹¶æ”¾å…¥å¯¹è±¡å¡«å……ç©ºå¯¹è±¡æ± ã€‚</li>
<li>maxCapacity, prefab, defaultQuantityå¯ä¸å¡«ï¼Œé»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼Œprefab = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
</ul>
<h4 data-id="heading-4">å°†å¯¹è±¡æ”¾å…¥GOP</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyName/obj.nameæ”¾å…¥å¯¹è±¡æ± </span>
<span class="hljs-comment">//(string assetName, GameObject obj)</span>
PoolSystem<span class="hljs-selector-class">.PushGameObject</span>(keyName, obj);
PoolSystem<span class="hljs-selector-class">.PushGameObject</span>(obj);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">//å°†ä¸€ä¸ªå­å¼¹å¯¹è±¡bulletæ”¾å…¥Bulletå¯¹è±¡æ± </span>
PoolSystem<span class="hljs-selector-class">.PushGameObject</span>("Bullet", bullet);


<span class="hljs-comment">// æ‰©å±•æ–¹æ³•</span>
bullet<span class="hljs-selector-class">.GameObjectPushPool</span>();
</code></pre>
<ul>
<li>é€šè¿‡keyNameæŒ‡å®šå¯¹è±¡æ± åå­—æ”¾å…¥å¯¹è±¡objï¼ŒkeyNameä¸å¡«åˆ™é»˜è®¤å¯¹è±¡æ± åå­—ä¸ºobj.nameã€‚</li>
<li>å°è£…äº†æ‹“å±•æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡.GameObjectPushPool()ç®€ä¾¿åœ°å°†GameObjectæ”¾å…¥å¯¹è±¡æ± ã€‚</li>
</ul>

<ul>
<li>å¯ä»¥ä½¿ç”¨æ‹“å±•æ–¹æ³•ç›´æ¥å°†å¯¹è±¡æ”¾å…¥åŒåå¯¹è±¡æ± å†…ã€‚</li>
<li>å¦‚æœä¼ å…¥çš„keyName/prefabæ‰¾ä¸åˆ°å¯¹åº”çš„å¯¹è±¡æ± ï¼ˆæœªInitï¼‰ï¼Œåˆ™ä¼šç›´æ¥åˆå§‹åŒ–ç”Ÿæˆä¸€ä¸ªåŒåçš„ï¼Œæ— é™å®¹é‡çš„å¯¹è±¡æ± å¹¶æ”¾å…¥æœ¬æ¬¡å¯¹è±¡ã€‚</li>
<li>objä¸ºnullæ—¶æœ¬æ¬¡æ”¾å…¥æ“ä½œæ— æ•ˆï¼Œä¼šè¿›è¡ŒæŠ¥é”™æç¤ºã€‚</li>
</ul>
<h4 data-id="heading-5">å°†å¯¹è±¡ä»GOPä¸­å–å‡º</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåŠ è½½GameObject</span>
<span class="hljs-comment">//(string keyName, Transform parent)</span>
PoolSystem<span class="hljs-selector-class">.GetGameObject</span>(keyName, parent);
PoolSystem<span class="hljs-selector-class">.GetGameObject</span>(keyName);
<span class="hljs-comment">//æ ¹æ®keyNameå’ŒTåŠ è½½GameObjectå¹¶è·å–ç»„ä»¶ï¼Œè¿”å›å€¼ç±»å‹ä¸ºT</span>
PoolSystem<span class="hljs-selector-class">.GetGameObject</span>&lt;T&gt;(keyName, parent);
PoolSystem<span class="hljs-selector-class">.GetGameObject</span>&lt;T&gt;(keyName);


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-comment">//å°†ä¸€ä¸ªå­å¼¹å¯¹è±¡ä»å¯¹è±¡æ± ä¸­å–å‡º</span>
GameObject bullet = PoolSystem<span class="hljs-selector-class">.GetGameObject</span>("Bullet");
<span class="hljs-comment">//å°†ä¸€ä¸ªå­å¼¹å¯¹è±¡ä»å¯¹è±¡æ± ä¸­å–å‡ºå¹¶è·å–å…¶åˆšä½“ç»„ä»¶</span>
GameObject bullet = PoolSystem<span class="hljs-selector-class">.GetGameOjbect</span>&lt;Rigidbody&gt;("Bullet");
</code></pre>
<ul>
<li>é€šè¿‡keyNameæŒ‡å®šå¯¹è±¡æ± åå­—å–å‡ºGameObjectå¯¹è±¡å¹¶è®¾ç½®çˆ¶ç‰©ä½“ä¸ºparentï¼Œparentä¸å¡«åˆ™é»˜è®¤æ— çˆ¶ç‰©ä½“åœ¨æœ€é¡¶å±‚ã€‚</li>
<li>å¯ä»¥é€šè¿‡ä¼ å‚è·å–å¯¹è±¡ä¸Šçš„æŸä¸ªç»„ä»¶ï¼Œç»„ä»¶ä¾æ‰˜äºGameObjectå­˜åœ¨ï¼Œå› æ­¤ç‰©ä½“æ­¤æ—¶ä¹Ÿå·²è¢«ä»å¯¹è±¡æ± ä¸­å–å‡ºã€‚</li>
</ul>

<ul>
<li>å½“æŸä¸ªå¯¹è±¡æ± å†…æ— å¯¹è±¡æ—¶ï¼Œå…¶å¯¹è±¡æ± ä»ä¼šè¢«ä¿å­˜ï¼Œåªæœ‰é€šè¿‡Clearæ‰èƒ½å½»åº•æ¸…ç©ºå¯¹è±¡æ± ã€‚</li>
<li>å½“å¯¹è±¡æ± ä¸­æ— å¯¹è±¡ä»è¦å–å‡ºæ—¶ï¼Œä¼šè¿”å›nullã€‚</li>
</ul>
<h4 data-id="heading-6">æ¸…ç©ºGOPå¯¹è±¡æ± </h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ¸…ç©ºï¼ˆGameObject/Objectï¼‰å¯¹è±¡æ± </span>
<span class="hljs-comment">//(bool clearGameObject = true, bool clearCSharpObject = true)</span>
PoolSystem.<span class="hljs-built_in">ClearAll</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
<span class="hljs-comment">//æ¸…ç©ºGameObjectç±»å¯¹è±¡æ± ä¸­keyNameç´¢å¼•çš„å¯¹è±¡æ± </span>
<span class="hljs-comment">//(string assetName)</span>
PoolSystem.<span class="hljs-built_in">ClearGameObject</span>(keyName);


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-comment">//æ¸…ç©ºæ‰€æœ‰GOPå¯¹è±¡æ± </span>
PoolSystem.<span class="hljs-built_in">ClearAll</span>(<span class="hljs-literal">true</span>,<span class="hljs-literal">false</span>);
<span class="hljs-comment">//æ¸…ç©ºBulletå¯¹è±¡æ± </span>
PoolSystem.<span class="hljs-built_in">ClearGameObject</span>(<span class="hljs-string">"Bullet"</span>);
</code></pre>
<ul>
<li>ClearAllæ–¹æ³•ç”¨äºæ¸…ç©ºæ‰€æœ‰GOP/OPå¯¹è±¡æ± ï¼Œä¸¤ä¸ªboolå‚æ•°æ˜¯å¦æ¸…ç©ºGOPã€æ˜¯å¦æ¸…ç©ºOPã€‚</li>
<li>æ¸…ç©ºæŸä¸€ç±»GOPé€šè¿‡ä¼ å…¥keyNameå¯¹è±¡æ± åç´¢å¼•ã€‚</li>
</ul>

<ul>
<li>æ¸…ç©ºæ‰€æœ‰å¯¹è±¡æ± æ—¶ï¼ˆClearAllï¼‰ï¼Œæ‰€æœ‰èµ„æºéƒ½ä¼šè¢«é‡Šæ”¾ã€‚</li>
<li>æ¸…ç©ºæŸä¸€ç±»å¯¹è±¡æ± æ—¶,GameObjectä¸­çš„æ•°æ®è½½ä½“å’Œæ ¹èŠ‚ç‚¹ä¼šè¢«æ”¾å›å¯¹è±¡æ± é‡å¤åˆ©ç”¨ï¼ˆä½¿ç”¨æ—¶æ— éœ€å…³å¿ƒï¼Œåº•å±‚å®ç°ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">Objectå¯¹è±¡æ± ï¼ˆOPï¼‰</h3>
<p>ç”¨äºç®¡ç†è„šæœ¬ç±»å¯¹è±¡ç­‰éæ¸¸æˆç‰©ä½“å¯¹è±¡ï¼ŒOPçš„APIå’ŒGOPç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨ä¼ å‚éƒ¨åˆ†OPæ”¯æŒæ›´å¤šæ–¹å¼</p>
<h4 data-id="heading-8">åˆå§‹åŒ–OP</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, int defaultQuantity = 0)</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity, defaultQuanity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tçš„ç±»å‹ååˆå§‹åŒ–OP</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity, defaultQuanity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;();
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OPï¼Œä¸è€ƒè™‘é»˜è®¤å®¹é‡ï¼Œæ— éœ€ä¼ T</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName, maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName);
<span class="hljs-comment">//æ ¹æ®typeç±»å‹ååˆå§‹åŒ–OP</span>
<span class="hljs-comment">//System.Type type, int maxCapacity = -1</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>(type, maxCapacity);
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>(type);




<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªDataæ•°æ®ç±»å¯¹è±¡æ± ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;("myData",<span class="hljs-number">30</span>,<span class="hljs-number">30</span>); <span class="hljs-comment">//å¯¹è±¡æ± åä¸ºmyData</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;(<span class="hljs-number">30</span>, <span class="hljs-number">30</span>); <span class="hljs-comment">//å¯¹è±¡æ± æ± åä¸ºData</span>
PoolSystem<span class="hljs-selector-class">.InitObjectPool</span>(xx.GetType()); <span class="hljs-comment">//å¯¹è±¡æ± åä¸ºxxçš„ç±»å‹å</span>
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥Tæ ¹æ®Tçš„ç±»å‹åæŒ‡å®šå¯¹è±¡æ± çš„åå­—ï¼Œä¼˜å…ˆä½¿ç”¨keyNameï¼Œåœ¨æ²¡æœ‰keyNameçš„æƒ…å†µä¸‹ä»¥Tç±»å‹åä½œä¸ºå¯¹è±¡æ± åç§°ã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>å¯é€šè¿‡Tå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨ç”ŸæˆObjectæ”¾å…¥å¯¹è±¡æ± ï¼‰ï¼Œå¯¹åº”GameObjecté€šè¿‡prefabå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ã€‚</li>
<li>æ³›å‹Tèµ·ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯ä¸æŒ‡å®škeyNameæ—¶ç”¨äºå……å½“typeåç§°ï¼Œå¦ä¸€ä¸ªæ˜¯è¿›è¡Œé»˜è®¤å®¹é‡è®¾ç½®æ—¶æŒ‡å®šé¢„å…ˆæ”¾å…¥å¯¹è±¡æ± çš„å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å¦‚æœä¸æƒ³ç”¨é»˜è®¤å®¹é‡åŠŸèƒ½å¯ä»¥ä½¿ç”¨ä¸ä¼ Tçš„APIã€‚</li>
<li>maxCapacity, prefab, defaultQuantityå¯ä¸å¡«ï¼Œé»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼Œprefab = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
<li>OPçš„åˆå§‹åŒ–å’ŒGOPç•¥æœ‰ä¸åŒï¼Œä½¿ç”¨äº†æ³›å‹Tä¼ é€’ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨æ›´åŠ ç²¾ç®€ï¼Œä½†åªæœ‰æœ‰æ³›å‹å‚æ•°çš„é‡è½½æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤å®¹é‡çš„åˆå§‹åŒ–ï¼ˆéœ€è¦æŒ‡å®šæ³›å‹Tè¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</li>
<li>å¯ä»¥é€‰æ‹©é€šè¿‡ä¼ å…¥æŸä¸ªå®ä¾‹çš„typeç±»å‹ï¼Œåˆå§‹åŒ–åŒåçš„æ— é™å®¹é‡OPã€‚</li>
</ul>
<h4 data-id="heading-9">å°†å¯¹è±¡æ”¾å…¥OP</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyName/obj.getType().FullNameå³objå¯¹åº”çš„ç±»å‹åæ”¾å…¥å¯¹è±¡æ± </span>
<span class="hljs-comment">//(object obj, string keyName)</span>
PoolSystem<span class="hljs-selector-class">.PushObject</span>(obj, keyName);
PoolSystem<span class="hljs-selector-class">.PushObject</span>(obj);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">//å°†ä¸€ä¸ªDataæ•°æ®ç±»å¯¹è±¡dataæ”¾å…¥Dataå¯¹è±¡æ± </span>
PoolSystem<span class="hljs-selector-class">.PushObject</span>(data, "Data";
PoolSystem.PushObject(data);


<span class="hljs-comment">// æ‰©å±•æ–¹æ³•</span>
bullet<span class="hljs-selector-class">.ObjectPushPool</span>();
</code></pre>
<ul>
<li>é€šè¿‡keyNameæŒ‡å®šå¯¹è±¡æ± åå­—æ”¾å…¥å¯¹è±¡objï¼ŒkeyNameä¸å¡«åˆ™é»˜è®¤å¯¹è±¡æ± åå­—ä¸ºobj.nameã€‚</li>
<li>å°è£…äº†æ‹“å±•æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡.GameObjectPushPool()ç®€ä¾¿åœ°å°†GameObjectæ”¾å…¥å¯¹è±¡æ± ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨æ‹“å±•æ–¹æ³•ç›´æ¥å°†å¯¹è±¡æ”¾å…¥åŒåå¯¹è±¡æ± å†…ã€‚</li>
<li>å¦‚æœä¼ å…¥çš„keyName/objæ‰¾ä¸åˆ°å¯¹åº”çš„å¯¹è±¡æ± ï¼ˆæœªInitï¼‰ï¼Œåˆ™ä¼šç›´æ¥åˆå§‹åŒ–ç”Ÿæˆä¸€ä¸ªåŒåçš„ï¼Œæ— é™å®¹é‡çš„å¯¹è±¡æ± å¹¶æ”¾å…¥æœ¬æ¬¡å¯¹è±¡ã€‚</li>
<li>objä¸ºnullæ—¶æœ¬æ¬¡æ”¾å…¥æ“ä½œæ— æ•ˆ,ä¼šè¿›è¡ŒæŠ¥é”™æç¤ºã€‚</li>
</ul>
<h4 data-id="heading-10">å°†å¯¹è±¡ä»OPä¸­å–å‡º</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameè¿”å›System.objectç±»å‹å¯¹è±¡</span>
<span class="hljs-comment">//(string keyName)</span>
PoolSystem<span class="hljs-selector-class">.GetObject</span>(keyName);
<span class="hljs-comment">//æ ¹æ®keyNameè¿”å›Tç±»å‹çš„å¯¹è±¡</span>
PoolSystem<span class="hljs-selector-class">.GetObject</span>&lt;T&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tç±»å‹åç§°è¿”å›å¯¹è±¡</span>
PoolSystem<span class="hljs-selector-class">.GetObject</span>&lt;T&gt;();
<span class="hljs-comment">//æ ¹æ®typeç±»å‹åè¿”å›å¯¹è±¡</span>
<span class="hljs-comment">//(System.Type type)</span>
PoolSystem<span class="hljs-selector-class">.GetObject</span>(xx.getType());




<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-comment">//å°†ä¸€ä¸ªDataæ•°æ®ç±»å¯¹è±¡dataä»å¯¹è±¡æ± ä¸­å–å‡º</span>
Data data = PoolSystem<span class="hljs-selector-class">.GetObject</span>("Data");
Data data = PoolSystem<span class="hljs-selector-class">.GetObject</span>&lt;Data&gt;();
</code></pre>
<ul>
<li>é€šè¿‡keyNameï¼Œæ³›å‹Tï¼Œtypeç±»å‹æŒ‡å®šå¯¹è±¡æ± åå­—å–å‡ºObjectå¯¹è±¡ã€‚</li>
<li>ä¼˜å…ˆæ ¹æ®keyNameç´¢å¼•ï¼Œä¸å­˜åœ¨keyNameæ—¶ï¼Œåˆ™é€šè¿‡æ³›å‹Tçš„åå°„ç±»å‹å’Œtypeç±»å‹åç´¢å¼•</li>
</ul>

<ul>
<li>æ¨èä½¿ç”¨æ³›å‹æ–¹æ³•ï¼Œå¦åˆ™è¿”å›å€¼æ˜¯objectç±»å‹è¿˜éœ€è¦æ‰‹åŠ¨è¿›è¡Œè½¬æ¢ã€‚</li>
</ul>
<h4 data-id="heading-11">æ¸…ç©ºOPå¯¹è±¡æ± </h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ¸…ç©ºï¼ˆGameObject/Objectï¼‰å¯¹è±¡æ± </span>
<span class="hljs-comment">//(bool clearGameObject = true, bool clearCSharpObject = true)</span>
PoolSystem<span class="hljs-selector-class">.ClearAll</span>(false, true);
<span class="hljs-comment">//æ¸…ç©ºObjectç±»å¯¹è±¡æ± ä¸‹keyName/Tç±»å‹å/typeç±»å‹åå¯¹è±¡æ± </span>
<span class="hljs-comment">//(string keyName)</span>
PoolSystem<span class="hljs-selector-class">.ClearObject</span>(keyName);
PoolSystem<span class="hljs-selector-class">.ClearObject</span>&lt;T&gt;();
<span class="hljs-comment">//(System.Type type)</span>
PoolSystem<span class="hljs-selector-class">.ClearObject</span>(xx.getType());


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-comment">//æ¸…ç©ºæ‰€æœ‰OPå¯¹è±¡æ± </span>
PoolSystem<span class="hljs-selector-class">.ClearAll</span>(false,true);
<span class="hljs-comment">//æ¸…ç©ºDataå¯¹è±¡æ± </span>
PoolSystem<span class="hljs-selector-class">.ClearObject</span>("Data");
PoolSystem<span class="hljs-selector-class">.ClearObject</span>&lt;Data&gt;();
</code></pre>
<ul>
<li>ClearAllæ–¹æ³•ç”¨äºæ¸…ç©ºæ‰€æœ‰GOP/OPå¯¹è±¡æ± ï¼Œä¸¤ä¸ªboolå‚æ•°æ˜¯å¦æ¸…ç©ºGOPã€æ˜¯å¦æ¸…ç©ºOPã€‚</li>
<li>æ¸…ç©ºæŸä¸€ç±»OPé€šè¿‡ä¼ å…¥keyName/æ³›å‹Tçš„åå°„ç±»å‹å/typeç±»å‹åç´¢å¼•ã€‚</li>
</ul>

<ul>
<li>æ¸…ç©ºæ‰€æœ‰å¯¹è±¡æ± æ—¶ï¼ˆClearAllï¼‰ï¼Œæ‰€æœ‰èµ„æºéƒ½ä¼šè¢«é‡Šæ”¾ã€‚</li>
<li>æ¸…ç©ºæŸä¸€ç±»å¯¹è±¡æ± æ—¶,Objectä¸­çš„æ•°æ®è½½ä½“ä¼šè¢«æ”¾å›å¯¹è±¡æ± é‡å¤åˆ©ç”¨ï¼ˆä½¿ç”¨æ—¶æ— éœ€å…³å¿ƒï¼Œåº•å±‚å®ç°ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">å¯¹è±¡æ± å¯è§†åŒ–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1bd578e2ace4f2caa8168991bff5f07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=MI1i3WXu02d4bjEqZ8Vnmki5%2F%2F4%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å¯ä»¥é€šè¿‡PoolSystemViewerè§‚å¯ŸOPå’ŒGOPã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbc55580ce2042dcb64e6b9962e57205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=vlRib8HjvMJGorzzS6eUgGeGK5k%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-13">æ³¨æ„</h3>
<ul>
<li>å¯¹è±¡æ± çš„åå­—å¯ä»¥å’Œæ”¾å…¥çš„å¯¹è±¡åå­—ä¸åŒï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªæ”¾å…¥å¯¹è±¡æ± çš„å¯¹è±¡åè¯ä¹Ÿå¯ä»¥ä¸åŒï¼ˆåªè¦ç±»å‹ä¸€è‡´ï¼‰ï¼Œä½†ä¸ºäº†é¿å…æ··æ·†ï¼Œæˆ‘ä»¬æ¨èåŒåï¼ˆåŒç±»åæˆ–è€…åŒGameObjectåï¼‰æˆ–è€…ä½¿ç”¨é…ç½®ã€æšä¸¾æ¥è®°å½•å¯¹è±¡æ± åã€‚</li>
<li>PoolSystemå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†å¤§å¤šæƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ResSystemæ¥è·å–GameObject/Objectå¯¹è±¡æ¥ä¿è¯è¿”å›å€¼ä¸ä¸ºnullã€‚</li>
</ul>
<h2 data-id="heading-14">èµ„æºç³»ç»Ÿ</h2>
<p>èµ„æºç³»ç»Ÿå®ç°äº†Unityèµ„æºã€æ¸¸æˆå¯¹è±¡ã€ç±»å¯¹è±¡çš„è·å–ã€å¼‚æ­¥åŠ è½½ï¼Œå¹¶åœ¨åŠ è½½æ¸¸æˆå¯¹è±¡å’Œç±»å¯¹è±¡èµ„æºæ—¶ä¼˜å…ˆä»å¯¹è±¡æ± ä¸­è·å–èµ„æºæ¥ä¼˜åŒ–æ€§èƒ½ï¼Œè‹¥å¯¹è±¡æ± ä¸å­˜åœ¨å¯¹åº”èµ„æºå†é€šè¿‡èµ„æºåŠ è½½æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ï¼ˆå› ä¸ºåœ¨ç›´æ¥ä½¿ç”¨å¯¹è±¡æ± æ—¶ï¼Œè¿”å›å€¼å…è®¸ä¸ºnullï¼Œä½†ï¼‰ã€‚æä¾›Resourceså’ŒAddressablesä¸¤ç§ç‰ˆæœ¬:</p>
<ul>
<li>Resourcesç‰ˆæœ¬ï¼Œå…³è”å¯¹è±¡æ± è¿›è¡Œèµ„æºçš„åŠ è½½ã€å¸è½½ã€‚</li>
<li>Addressablesç‰ˆæœ¬ï¼Œé™¤å…³è”å¯¹è±¡æ± è¿›è¡Œèµ„æºçš„åŠ è½½ã€å¸è½½å¤–ï¼Œç»“åˆäº‹ä»¶å·¥å…·å®ç°å¯¹è±¡Destroyæ—¶Adressablesè‡ªåŠ¨unloadã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de5b2be94089408ab014b0b065ede8b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=80JL9YOMV6T2WzZc6vbDbixOZoo%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>ä¸¤ç§ç‰ˆæœ¬åœ¨æ¡†æ¶è®¾ç½®é‡Œè¿›è¡Œåˆ‡æ¢ï¼Œã€‚</p>
<h3 data-id="heading-15">Resourcesç‰ˆæœ¬</h3>
<h4 data-id="heading-16">æ™®é€šç±»å¯¹è±¡(obj)</h4>
<p>ç±»å¯¹è±¡èµ„æºä¸æ¶‰åŠå¼‚æ­¥åŠ è½½ã€Resourceså’ŒAddressablesçš„åŒºåˆ«ï¼Œç›´æ¥èµ°å¯¹è±¡æ± ç³»ç»Ÿã€‚</p>
<h5 data-id="heading-17">åˆå§‹åŒ–</h5>
<p>èµ„æºç³»ç»Ÿçš„åº•å±‚åŸºäºå¯¹è±¡æ± ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨èµ„æºç³»ç»Ÿå±‚é¢ä¹Ÿå¼€æ”¾å¯¹å¯¹è±¡æ± çš„åˆå§‹åŒ–è®¾ç½®ï¼ŒAPIå’ŒPoolSystemä¸€è‡´ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity, defaultQuanity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tçš„ç±»å‹ååˆå§‹åŒ–OP</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity, defaultQuanity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;();
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OPï¼Œä¸è€ƒè™‘é»˜è®¤å®¹é‡ï¼Œæ— éœ€ä¼ T</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName);
<span class="hljs-comment">//æ ¹æ®typeç±»å‹ååˆå§‹åŒ–OP</span>
<span class="hljs-comment">//System.Type type, int maxCapacity = -1</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(type, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(type);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªDataæ•°æ®ç±»å¯¹è±¡æ± ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;("myData",<span class="hljs-number">30</span>,<span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;(<span class="hljs-number">30</span>, <span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(xx.GetType());
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥Tæ ¹æ®Tçš„ç±»å‹åæŒ‡å®šå¯¹è±¡æ± çš„åå­—ã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>å¯é€šè¿‡Tå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨ç”ŸæˆTç±»å‹çš„å¯¹è±¡æ”¾å…¥å¯¹è±¡æ± ï¼‰ã€‚</li>
<li>æ³›å‹Tèµ·ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯ä¸æŒ‡å®škeyNameæ—¶ç”¨äºå……å½“typeåç§°ï¼Œå¦ä¸€ä¸ªæ˜¯è¿›è¡Œé»˜è®¤å®¹é‡è®¾ç½®æ—¶æŒ‡å®šé¢„å…ˆæ”¾å…¥å¯¹è±¡æ± çš„å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å¦‚æœä¸æƒ³ç”¨é»˜è®¤å®¹é‡åŠŸèƒ½å¯ä»¥ä½¿ç”¨ä¸ä¼ Tçš„APIã€‚</li>
<li>maxCapacity, prefab, defaultQuantityå¯ä¸å¡«ï¼Œé»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼Œprefab = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
<li>åªæœ‰æœ‰æ³›å‹å‚æ•°çš„é‡è½½æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤å®¹é‡çš„åˆå§‹åŒ–ï¼ˆéœ€è¦æŒ‡å®šæ³›å‹Tè¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</li>
<li>å¯ä»¥é€‰æ‹©é€šè¿‡ä¼ å…¥æŸä¸ªå®ä¾‹çš„typeç±»å‹ï¼Œåˆå§‹åŒ–åŒåçš„æ— é™å®¹é‡OPã€‚</li>
</ul>
<h5 data-id="heading-18">objåŠ è½½</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameä»å¯¹è±¡æ± ä¸­è·å–ä¸€ä¸ªTç±»å‹å¯¹è±¡ï¼Œæ²¡æœ‰åˆ™new</span>
<span class="hljs-comment">//string keyName</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">T</span>&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tç±»å‹åä»å¯¹è±¡æ± ä¸­è·å–ä¸€ä¸ªTç±»å‹å¯¹è±¡ï¼Œæ²¡æœ‰åˆ™new</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">T</span>&gt;();


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹,è·å–Dataæ•°æ®ç±»çš„ä¸€ä¸ªå¯¹è±¡</span>
<span class="hljs-type">GameObject</span> go1 <span class="hljs-operator">=</span> <span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">Data</span>&gt;(<span class="hljs-string">"Data"</span>);
</code></pre>
<ul>
<li>é€šè¿‡keyNameæŒ‡å®šåŠ è½½çš„ç±»å¯¹è±¡åï¼Œä¸å¡«keyNameåˆ™æŒ‰ç…§Tçš„ç±»å‹ååŠ è½½ã€‚</li>
</ul>

<ul>
<li>åŠ è½½æ—¶ä¼˜å…ˆé€šè¿‡å¯¹è±¡æ± è·å–ï¼Œå¦‚æœå¯¹è±¡æ± ä¸­æ— å¯¹åº”èµ„æºï¼Œè‡ªåŠ¨newä¸€ä¸ªç±»å¯¹è±¡è¿”å›ï¼Œä¿è¯è¿”å›å€¼ä¸ä¸ºnull,è¿™ç‚¹ä½“ç°äº†èµ„æºç³»ç»Ÿæ¯”å¯¹è±¡æ± æ›´å®Œå–„ï¼Œå¯¹è±¡æ± getä¸å­˜åœ¨çš„objèµ„æºè¿”å›Nullã€‚</li>
</ul>
<h5 data-id="heading-19">objå¸è½½</h5>
<p>å¸è½½objå³å°†objæ”¾å›å¯¹è±¡æ± è¿›è¡Œèµ„æºå›æ”¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyName/objç±»å‹åå°†objæ”¾å›å¯¹è±¡æ± </span>
<span class="hljs-comment">//object obj, string keyName</span>
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(obj);
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(obj, string keyName);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼Œå¸è½½Dataç±»çš„å¯¹è±¡data</span>
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(data, "Data");
</code></pre>
<ul>
<li>é€šè¿‡objæŒ‡å®šå¸è½½çš„å¯¹è±¡ï¼ŒkeyNameæŒ‡å®šå¯¹è±¡æ± åï¼Œä¸å¡«åˆ™æŒ‰ç…§objçš„ç±»å‹åå¸è½½ã€‚</li>
</ul>

<ul>
<li>å¸è½½å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰åˆå§‹åŒ–è¿‡å¯¹è±¡æ± ï¼Œåˆ™å¯¹åº”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåæ— é™é‡å¯¹è±¡æ± å¹¶å°†objæ”¾å…¥ï¼Œä¿è¯å¯¹è±¡å¸è½½æˆåŠŸ,è¿™ç‚¹ä½“ç°äº†èµ„æºç³»ç»Ÿæ¯”å¯¹è±¡æ± æ›´å®Œå–„ï¼Œå¯¹è±¡æ± pushæœªåˆå§‹åŒ–çš„å¯¹è±¡æ± èµ„æºä¼šæŠ¥é”™ã€‚</li>
</ul>
<h4 data-id="heading-20">æ¸¸æˆå¯¹è±¡ï¼ˆGameObjectï¼‰</h4>
<h5 data-id="heading-21">åˆå§‹åŒ–</h5>
<p>èµ„æºç³»ç»Ÿçš„åº•å±‚åŸºäºå¯¹è±¡æ± ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨èµ„æºç³»ç»Ÿå±‚é¢ä¹Ÿå¼€æ”¾å¯¹å¯¹è±¡æ± çš„åˆå§‹åŒ–è®¾ç½®ï¼ŒAPIå’ŒPoolSystemå¤§ä½“ä¸€è‡´ï¼Œåœ¨prefabéƒ¨åˆ†ä¼ å‚ç•¥æœ‰ä¸åŒï¼Œé€šè¿‡ä¼ Resourcesä¸‹å¯¹åº”çš„è·¯å¾„ç”±èµ„æºç³»ç»Ÿè·å¾—é¢„åˆ¶ä½“ï¼Œå¹¶å…‹éš†å‡ºæ¥æ”¾å…¥å¯¹è±¡æ± ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, string assetPath = null, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName, maxCapacity, assetPath, defaultQuantity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(keyName);
<span class="hljs-comment">//æ ¹æ®assetPathåˆ‡å‰²çš„èµ„æºååˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//(string assetPath, int maxCapacity = -1, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(string assetPath, maxCapacity, defaultQuantity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(string assetPath, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(string assetPath);




<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªå­å¼¹Bulletå¯¹è±¡æ± ï¼ˆå‡è®¾Bulletçš„è·¯å¾„åœ¨Resourcesæ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
Gameobject bullet = GameObject<span class="hljs-selector-class">.Find</span>("bullet");
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>("Bullet", <span class="hljs-number">30</span>, bullet, <span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(bullet, <span class="hljs-number">30</span>, <span class="hljs-number">30</span>);


<span class="hljs-comment">//æœ€ç®€å½¢å¼</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(â€œå¯¹è±¡æ± åå­—â€);
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥assetPath(å®Œæ•´èµ„æºè·¯å¾„)æ ¹æ®åˆ‡å‰²çš„èµ„æºåæŒ‡å®šå¯¹è±¡æ± çš„åå­—ã€‚</li>
<li>ä¼ å…¥çš„assetPathä¼šè‡ªåŠ¨åˆ‡å‰²è·å¾—èµ„æºåã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>å¯é€šè¿‡assetPathè·å–çš„èµ„æºå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨ç”ŸæˆGameObjectæ”¾å…¥å¯¹è±¡æ± ï¼‰ã€‚</li>
<li>é»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼ŒassetPath = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
<li>æ³¨æ„åŠ è½½åˆ°å†…å­˜çš„å¯¹è±¡åœ¨è¢«å®ä¾‹åŒ–ä¹‹åä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ul>
<h5 data-id="heading-22">GameObjectåŠ è½½å¹¶å®ä¾‹åŒ–</h5>
<pre><code class="hljs language-ini" lang="ini">//API
//åŠ è½½æ¸¸æˆç‰©ä½“
//(string assetPath, Transform <span class="hljs-attr">parent</span> = null,string keyName=null)
ResSystem.InstantiateGameObject(assetPath, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(assetPath, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(assetPath)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(parent, keyName)<span class="hljs-comment">;</span>
//åŠ è½½æ¸¸æˆç‰©ä½“å¹¶è·å–ç»„ä»¶T
ResSystem.InstantiateGameObject&lt;T&gt;(assetPath, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(assetPath, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(assetPath)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(parent, keyName)<span class="hljs-comment">;</span>
//å¼‚æ­¥åŠ è½½(void)æ¸¸æˆç‰©ä½“
//(string path, Action&lt;GameObject&gt; <span class="hljs-attr">callBack</span> = null, Transform parent = null, string keyName = null)
ResSystem.InstantiateGameObjectAsync(assetPath, Action&lt;GameObject&gt; callBack, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetPath, Action&lt;GameObject&gt; callBack, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetPath, Action&lt;GameObject&gt; callBack)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetPath)<span class="hljs-comment">;</span>
//å¼‚æ­¥åŠ è½½(void)æ¸¸æˆç‰©ä½“å¹¶è·å–ç»„ä»¶T
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetPath, Action&lt;GameObject&gt; callBack, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetPath, Action&lt;GameObject&gt; callBack, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetPath, Action&lt;GameObject&gt; callBack)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetPath)<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
//å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡ï¼ˆå‡è®¾Bulletè·¯å¾„åœ¨Resourcesä¸‹ï¼‰
GameObject <span class="hljs-attr">bullet</span> = ResSystem.InstantiateGameObject(<span class="hljs-string">"Bullet"</span>)<span class="hljs-comment">;</span>
//å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡å–å‡ºå¹¶è·å–å…¶åˆšä½“ç»„ä»¶
Rigidbody <span class="hljs-attr">rb</span> = ResSystem.InstantiateGameObject&lt;Rigidbody&gt;(<span class="hljs-string">"Bullet"</span>)<span class="hljs-comment">;</span>
//å¼‚æ­¥å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡,å¹¶åœ¨å…¶åŠ è½½å®Œååæ ‡å½’é›¶
void getBullet(GameObject bullet)
{
 Â  Â <span class="hljs-attr">bullet.transform.position</span> = Vector3.zero<span class="hljs-comment">;</span>
 Â   }
ResSystem.InstantiateGameObjectAsync("Bullet", getBullet)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>é€šè¿‡assetPathåŠ è½½æ¸¸æˆç‰©ä½“å¹¶å®ä¾‹åŒ–è¿”å›ã€‚</li>
<li>å®ä¾‹åŒ–çš„æ¸¸æˆç‰©ä½“ä¼šè®¾ç½®çˆ¶ç‰©ä½“ä¸ºparentï¼Œä¸å¡«åˆ™é»˜è®¤ä¸ºnullæ— çˆ¶ç‰©ä½“åœ¨æœ€é¡¶å±‚ã€‚</li>
<li>å®ä¾‹åŒ–çš„ç‰©ä½“åç§°ä¼˜å…ˆä¸ºkeyNameï¼ŒkeyNameä¸ºnullæ—¶åˆ™ä¸ºassetNameã€‚</li>
<li>ä¼˜å…ˆæ ¹æ®keyNameä»å¯¹è±¡æ± è·å–ï¼Œä¸å¡«keyNameåˆ™æ ¹æ®pathåŠ è½½çš„èµ„æºååœ¨å¯¹è±¡æ± ä¸­æŸ¥æ‰¾ã€‚</li>
<li>å¯¹è±¡æ± ä¸­æ‰¾ä¸åˆ°æ ¹æ®assetpathèµ°ResourcesåŠ è½½å‡ºå¯¹è±¡ï¼Œä¸å¡«assetPathæ—¶åˆ™é€šè¿‡keyNameæŸ¥è¯¢è·¯å¾„åŠ è½½å¯¹è±¡ã€‚</li>
<li>å¯ä»¥é€šè¿‡ä¼ å‚è·å–å¯¹è±¡ä¸Šçš„æŸä¸ªç»„ä»¶ï¼Œç»„ä»¶ä¾æ‰˜äºGameObjectå­˜åœ¨ï¼Œå› æ­¤ç‰©ä½“æ­¤æ—¶ä¹Ÿå·²è¢«ä»å¯¹è±¡æ± ä¸­å–å‡ºã€‚</li>
<li>å¼‚æ­¥åŠ è½½æ¸¸æˆç‰©ä½“åŠå…¶ç»„ä»¶çš„æ–¹æ³•è¿”å›å€¼ä¸ºvoidç±»å‹ï¼Œæ— æ³•å³æ—¶å¿«é€ŸåŠ è½½çš„æ¸¸æˆç‰©ä½“ï¼Œéœ€è¦é€šè¿‡callbackå›è°ƒå‡½æ•°è·å–åŠ è½½çš„GameObjectå¯¹è±¡å¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
</ul>

<ul>
<li>èµ„æºç³»ç»Ÿå¦‚æœèµ„æºè·¯å¾„æ­£ç¡®ï¼Œåˆ™è¿”å›å€¼å¿…ä¸ä¸ºç©ºï¼Œä¼˜å…ˆä»å¯¹è±¡æ± ä¸­è·å–ï¼Œå¯¹è±¡æ± ä¸­ä¸å­˜åœ¨åˆ™æ ¹æ®Loadçš„å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–è¿”å›ã€‚</li>
</ul>
<h5 data-id="heading-23">GameObjectå¸è½½</h5>
<p>å¸è½½GameObjectå³å°†GameObjectæ”¾å›å¯¹è±¡æ± è¿›è¡Œèµ„æºå›æ”¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyName/gameObject.nameå›æ”¶gameObject</span>
<span class="hljs-comment">//string keyName, GameObject gameObject</span>
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(string keyName, gameObject);
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(gameObject);




<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼Œå¸è½½å­å¼¹å¯¹è±¡bullet</span>
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(bullet, "Bullet");
</code></pre>
<ul>
<li>é€šè¿‡gameObjectæŒ‡å®šå¸è½½çš„å¯¹è±¡ï¼ŒkeyNameæŒ‡å®šå¯¹è±¡æ± åï¼Œä¸å¡«åˆ™æŒ‰ç…§gameObjectçš„å¯¹è±¡åå¸è½½ã€‚</li>
</ul>

<ul>
<li>å¸è½½å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰åˆå§‹åŒ–è¿‡å¯¹è±¡æ± ï¼Œåˆ™å¯¹åº”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåæ— é™é‡å¯¹è±¡æ± å¹¶å°†gameObjectæ”¾å…¥ã€‚</li>
</ul>
<h4 data-id="heading-24">Unityèµ„æº</h4>
<p>è¿™ç±»èµ„æºä¸éœ€è¦è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿‡å¯¹è±¡æ± ï¼Œåªéœ€è¦ç›´æ¥ä½¿ç”¨æ•°æ®æˆ–è€…å¼•ç”¨ï¼Œæ¯”å¦‚AudioClipï¼ŒSpriteï¼Œprefabã€‚</p>
<h5 data-id="heading-25">åŠ è½½Asset</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®assetPathå¼‚æ­¥åŠ è½½Tç±»å‹èµ„æº</span>
<span class="hljs-comment">//(string assetPath, Action&lt;T&gt; callBack)</span>
ResSystem<span class="hljs-selector-class">.LoadAssetAsync</span>&lt;T&gt;(assetPath, callBack);
<span class="hljs-comment">//æ ¹æ®assetPathåŠ è½½Tç±»å‹èµ„æº</span>
ResSystem<span class="hljs-selector-class">.LoadAsset</span>&lt;T&gt;(assetPath);
<span class="hljs-comment">//åŠ è½½æŒ‡å®šè·¯å¾„çš„æ‰€æœ‰èµ„æºï¼Œè¿”å›objectæ•°ç»„</span>
ResSystem<span class="hljs-selector-class">.LoadAssets</span>(assetPath);
<span class="hljs-comment">//åŠ è½½æŒ‡å®šè·¯å¾„çš„æ‰€æœ‰èµ„æºè¿”å›Tç±»å‹</span>
ResSystem<span class="hljs-selector-class">.LoadAssets</span>&lt;T&gt;(assetPath);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼ŒåŠ è½½Resourcesä¸‹çš„clipéŸ³é¢‘èµ„æº</span>
ResSystem<span class="hljs-selector-class">.LoadAssets</span>&lt;AudioClip&gt;("Resources/clip");
</code></pre>
<ul>
<li>é€šè¿‡assetPathè·¯å¾„åŠ è½½èµ„æºï¼ŒTç”¨æ¥æŒ‡æ˜åŠ è½½çš„èµ„æºç±»å‹ã€‚</li>
<li>å¼‚æ­¥åŠ è½½èµ„æºéœ€è¦é€šè¿‡ä¼ å…¥callbackå›è°ƒè·å–åŠ è½½çš„èµ„æºå¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
<li>åŠ è½½æ‰€æœ‰èµ„æºæ—¶ä¸æŒ‡å®šTåˆ™è¿”å›objectæ•°ç»„ã€‚</li>
<li>æ³¨æ„åŠ è½½çš„èµ„æºä¸ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ul>
<h5 data-id="heading-26">å¸è½½Asset</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//å¸è½½æŸä¸ªèµ„æº</span>
<span class="hljs-comment">//ï¼ˆUnityEngine.Object assetToUnloadï¼‰</span>
ResSystem<span class="hljs-selector-class">.UnloadAsset</span>(assetToUnload);
<span class="hljs-comment">//å¸è½½æ‰€æœ‰èµ„æº</span>
ResSystem<span class="hljs-selector-class">.UnloadUnusedAssets</span>();
</code></pre>
<p>å¸è½½èµ„æºå®é™…æŒ‡é‡Šæ”¾å†…å­˜ä¸­çš„assetã€‚</p>
<p>å¯¹è±¡æ± æ˜¯å¸®åšèµ„æºå›æ”¶åˆ©ç”¨çš„ï¼Œé¿å…é¢‘ç¹GCï¼Œå¯¹è±¡æ± ç®¡ç†ä¸äº†Assetèµ„æºã€‚è€Œé‡Šæ”¾æ˜¯èµ„æºä¸ç”¨äº†ä¹Ÿä¸éœ€è¦å›æ”¶å¸è½½æ‰å°±è¡Œäº†ï¼ŒGOçš„è‡ªåŠ¨é‡Šæ”¾èµ„æºç³»ç»Ÿå·²ç»åšå¥½äº†ï¼ŒAssetéœ€è¦ä½ æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥é‡Šæ”¾ï¼Œå› ä¸ºAssetä¹Ÿæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œåªèƒ½è‡ªå·±é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-27">Addressablesç‰ˆæœ¬</h3>
<h4 data-id="heading-28">æ™®é€šç±»å¯¹è±¡(obj)</h4>
<p>ç±»å¯¹è±¡èµ„æºä¸æ¶‰åŠå¼‚æ­¥åŠ è½½ã€Resourceså’ŒAddressablesçš„åŒºåˆ«ï¼Œç›´æ¥èµ°å¯¹è±¡æ± ç³»ç»Ÿï¼Œã€‚</p>
<h5 data-id="heading-29">åˆå§‹åŒ–</h5>
<p>èµ„æºç³»ç»Ÿçš„åº•å±‚åŸºäºå¯¹è±¡æ± ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨èµ„æºç³»ç»Ÿå±‚é¢ä¹Ÿå¼€æ”¾å¯¹å¯¹è±¡æ± çš„åˆå§‹åŒ–è®¾ç½®ï¼ŒAPIå’ŒPoolSystemä¸€è‡´ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity, defaultQuanity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tçš„ç±»å‹ååˆå§‹åŒ–OP</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity, defaultQuanity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;(maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;T&gt;();
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–OPï¼Œä¸è€ƒè™‘é»˜è®¤å®¹é‡ï¼Œæ— éœ€ä¼ T</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(keyName);
<span class="hljs-comment">//æ ¹æ®typeç±»å‹ååˆå§‹åŒ–OP</span>
<span class="hljs-comment">//System.Type type, int maxCapacity = -1</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(type, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(type);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªDataæ•°æ®ç±»å¯¹è±¡æ± ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;("myData",<span class="hljs-number">30</span>,<span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>&lt;Data&gt;(<span class="hljs-number">30</span>, <span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitObjectPool</span>(xx.GetType());
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥Tæ ¹æ®Tçš„ç±»å‹åæŒ‡å®šå¯¹è±¡æ± çš„åå­—ã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>å¯é€šè¿‡Tå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨ç”ŸæˆTç±»å‹çš„å¯¹è±¡æ”¾å…¥å¯¹è±¡æ± ï¼‰ã€‚</li>
<li>æ³›å‹Tèµ·ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯ä¸æŒ‡å®škeyNameæ—¶ç”¨äºå……å½“typeåç§°ï¼Œå¦ä¸€ä¸ªæ˜¯è¿›è¡Œé»˜è®¤å®¹é‡è®¾ç½®æ—¶æŒ‡å®šé¢„å…ˆæ”¾å…¥å¯¹è±¡æ± çš„å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å¦‚æœä¸æƒ³ç”¨é»˜è®¤å®¹é‡åŠŸèƒ½å¯ä»¥ä½¿ç”¨ä¸ä¼ Tçš„APIã€‚</li>
<li>maxCapacity, prefab, defaultQuantityå¯ä¸å¡«ï¼Œé»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼Œprefab = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
<li>åªæœ‰æœ‰æ³›å‹å‚æ•°çš„é‡è½½æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤å®¹é‡çš„åˆå§‹åŒ–ï¼ˆéœ€è¦æŒ‡å®šæ³›å‹Tè¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</li>
<li>å¯ä»¥é€‰æ‹©é€šè¿‡ä¼ å…¥æŸä¸ªå®ä¾‹çš„typeç±»å‹ï¼Œåˆå§‹åŒ–åŒåçš„æ— é™å®¹é‡OPã€‚</li>
</ul>
<h5 data-id="heading-30">objåŠ è½½</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// API</span>
<span class="hljs-comment">//æ ¹æ®keyNameä»å¯¹è±¡æ± ä¸­è·å–ä¸€ä¸ªTç±»å‹å¯¹è±¡ï¼Œæ²¡æœ‰åˆ™new</span>
<span class="hljs-comment">//string keyName</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">T</span>&gt;(keyName);
<span class="hljs-comment">//æ ¹æ®Tç±»å‹åä»å¯¹è±¡æ± ä¸­è·å–ä¸€ä¸ªTç±»å‹å¯¹è±¡ï¼Œæ²¡æœ‰åˆ™new</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">T</span>&gt;();


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹,è·å–Dataæ•°æ®ç±»çš„ä¸€ä¸ªå¯¹è±¡</span>
<span class="hljs-type">GameObject</span> go1 <span class="hljs-operator">=</span> <span class="hljs-type">ResSystem</span>.<span class="hljs-type">GetOrNew</span>&lt;<span class="hljs-type">Data</span>&gt;(<span class="hljs-string">"Data"</span>);
</code></pre>
<ul>
<li>é€šè¿‡keyNameæŒ‡å®šåŠ è½½çš„ç±»å¯¹è±¡åï¼Œä¸å¡«keyNameåˆ™æŒ‰ç…§Tçš„ç±»å‹ååŠ è½½ã€‚</li>
</ul>

<ul>
<li>åŠ è½½æ—¶ä¼˜å…ˆé€šè¿‡å¯¹è±¡æ± è·å–ï¼Œå¦‚æœå¯¹è±¡æ± ä¸­æ— å¯¹åº”èµ„æºï¼Œè‡ªåŠ¨newä¸€ä¸ªç±»å¯¹è±¡è¿”å›ï¼Œä¿è¯è¿”å›å€¼ä¸ä¸ºnullã€‚</li>
</ul>
<h5 data-id="heading-31">objå¸è½½</h5>
<p>å¸è½½objå³å°†objæ”¾å›å¯¹è±¡æ± è¿›è¡Œèµ„æºå›æ”¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyName/objç±»å‹åå°†objæ”¾å›å¯¹è±¡æ± </span>
<span class="hljs-comment">//object obj, string keyName</span>
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(obj);
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(obj, string keyName);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼Œå¸è½½Dataç±»çš„å¯¹è±¡data</span>
ResSystem<span class="hljs-selector-class">.PushObjectInPool</span>(data, "Data");
</code></pre>
<ul>
<li>é€šè¿‡objæŒ‡å®šå¸è½½çš„å¯¹è±¡ï¼ŒkeyNameæŒ‡å®šå¯¹è±¡æ± åï¼Œä¸å¡«åˆ™æŒ‰ç…§objçš„ç±»å‹åå¸è½½ã€‚</li>
</ul>

<ul>
<li>å¸è½½å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰åˆå§‹åŒ–è¿‡å¯¹è±¡æ± ï¼Œåˆ™å¯¹åº”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåæ— é™é‡å¯¹è±¡æ± å¹¶å°†objæ”¾å…¥ã€‚</li>
</ul>
<h4 data-id="heading-32">æ¸¸æˆå¯¹è±¡ï¼ˆGameObjectï¼‰</h4>
<h5 data-id="heading-33">åˆå§‹åŒ–</h5>
<p>èµ„æºç³»ç»Ÿçš„åº•å±‚åŸºäºå¯¹è±¡æ± ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨èµ„æºç³»ç»Ÿå±‚é¢ä¹Ÿå¼€æ”¾å¯¹å¯¹è±¡æ± çš„åˆå§‹åŒ–è®¾ç½®ï¼ŒAPIå’ŒPoolSystemæœ‰åŒºåˆ«ï¼ŒAddressablesç‰ˆæœ¬é€šè¿‡Addressables nameæ¥è·å–prefabï¼ˆå‚è€ƒå‰¯æœ¬ï¼‰ï¼ŒReséœ€è¦ä¼ è·¯å¾„æ¥è·å–prefabï¼ˆå‚è€ƒå‰¯æœ¬ï¼‰ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyNameåˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//(string keyName, int maxCapacity = -1, string assetName = null, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForKeyName</span>(keyName, maxCapacity,assetName, defaultQuantity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForKeyName</span>(keyName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForKeyName</span>(keyName);
<span class="hljs-comment">//æ ¹æ®assetNameåœ¨Addressablesä¸­çš„èµ„æºååˆå§‹åŒ–GOP</span>
<span class="hljs-comment">//(string assetName, int maxCapacity = -1, int defaultQuantity = 0)</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForAssetName</span>(assetName, maxCapacity, defaultQuantity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForAssetName</span>(assetName, maxCapacity);
ResSystem<span class="hljs-selector-class">.InitGameObjectPoolForAssetName</span>(assetName);




<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">// è®¾å®šä¸€ä¸ªå­å¼¹Bulletå¯¹è±¡æ± ï¼ˆå‡è®¾Addressableèµ„æºåç§°ä¸ºBulletï¼‰ï¼Œæœ€å¤§å®¹é‡30,é»˜è®¤å¡«æ»¡</span>
Gameobject bullet = GameObject<span class="hljs-selector-class">.Find</span>("bullet");
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>("Bullet", <span class="hljs-number">30</span>, bullet, <span class="hljs-number">30</span>);
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(bullet, <span class="hljs-number">30</span>, <span class="hljs-number">30</span>);


<span class="hljs-comment">//æœ€ç®€å½¢å¼</span>
ResSystem<span class="hljs-selector-class">.InitGameObjectPool</span>(â€œå¯¹è±¡æ± åå­—â€);
</code></pre>
<ul>
<li>é€šè¿‡keyNameæˆ–è€…ç›´æ¥ä¼ å…¥assetNameï¼ˆAddressableèµ„æºçš„åç§°ï¼‰æ ¹æ®è·å–çš„èµ„æºåæŒ‡å®šå¯¹è±¡æ± çš„åå­—ï¼Œä¼˜å…ˆkeyNameï¼Œæ²¡æœ‰keyNameåˆ™ä½¿ç”¨assetNameã€‚</li>
<li>å¯è®¾ç½®å¯¹è±¡æ± æœ€å¤§å®¹é‡maxCapacityï¼ˆè¶…è¿‡maxCapacityå†æ”¾å…¥å¯¹è±¡ä¼šè¢«Destroyæ‰ï¼‰ã€‚</li>
<li>å¯é€šè¿‡assetNameå’ŒdefaultQuanityè®¾ç½®é»˜è®¤å®¹é‡ï¼ˆåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æŒ‰é»˜è®¤å®¹é‡å’Œæœ€å¤§å®¹é‡çš„æœ€å°å€¼è‡ªåŠ¨åŠ è½½GameObjectæ”¾å…¥å¯¹è±¡æ± ï¼‰ã€‚</li>
<li>é»˜è®¤æ— é™å®¹é‡maxCapacity = -1ï¼Œä¸é¢„å…ˆæ”¾å…¥å¯¹è±¡ï¼Œprefab = nullï¼Œ defaultQuantity = 0ã€‚</li>
<li>defaultQuantityå¿…é¡»å°äºmaxCapacityä¸”å¦‚æœæƒ³ä½¿ç”¨defaultQuantityåˆ™å¿…é¡»å¡«å…¥maxCapacityã€‚</li>
</ul>

<ul>
<li>å¯ä»¥é€šè¿‡é‡å¤åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡æ± çš„maxCapacityå®ç°å®¹é‡çš„æ›´æ”¹ï¼Œæ­¤æ—¶å¦‚æœé‡æ–°æŒ‡å®šäº†defaultQuanityï¼Œåˆ™ä¼šè¡¥é½å·®é‡ä¸ªæ•°çš„å¯¹è±¡è¿›å¯¹è±¡æ± ã€‚</li>
</ul>
<h5 data-id="heading-34">GameObjectåŠ è½½å¹¶å®ä¾‹åŒ–</h5>
<p>Addressableç‰ˆæœ¬ä¸­æ¸¸æˆç‰©ä½“å‚æ•°é€šè¿‡Addressableèµ„æºåassetNameï¼ˆResæ˜¯èµ„æºè·¯å¾„assetPathï¼‰æŒ‡å®šï¼Œæ”¯æŒåŠ è½½å‡ºçš„å¯¹è±¡Destroyæ—¶åœ¨Addressablesä¸­è‡ªåŠ¨é‡Šæ”¾ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">//API
//åŠ è½½æ¸¸æˆç‰©ä½“
//(string assetName, Transform <span class="hljs-attr">parent</span> = null, string keyName = null, bool autoRelease = <span class="hljs-literal">true</span>)
ResSystem.InstantiateGameObject(assetName, parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(assetName, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(assetName, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(assetName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject(parent, keyName)<span class="hljs-comment">;</span>
//åŠ è½½æ¸¸æˆç‰©ä½“å¹¶è·å–ç»„ä»¶T
ResSystem.InstantiateGameObject&lt;T&gt;(assetName, parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(assetName, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(assetName, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(assetName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObject&lt;T&gt;(parent, keyName)<span class="hljs-comment">;</span>
//å¼‚æ­¥åŠ è½½(void)æ¸¸æˆç‰©ä½“
//(string assetName, Action&lt;GameObject&gt; <span class="hljs-attr">callBack</span> = null, Transform parent = null, string keyName = null, bool autoRelease = <span class="hljs-literal">true</span>)
ResSystem.InstantiateGameObjectAsync(assetName, callBack, parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetName, callBack, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetName, callBack, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetName, callBack)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync(assetName)<span class="hljs-comment">;</span>
//å¼‚æ­¥åŠ è½½(void)æ¸¸æˆç‰©ä½“å¹¶è·å–ç»„ä»¶T
//(string assetName, Action&lt;T&gt; <span class="hljs-attr">callBack</span> = null, Transform parent = null, string keyName = null, bool autoRelease = <span class="hljs-literal">true</span>)
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName, callBack, parent, keyName, autoRelease)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName, callBack, parent, keyName)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName, callBack, parent)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName, callBack)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName, callBack)<span class="hljs-comment">;</span>
ResSystem.InstantiateGameObjectAsync&lt;T&gt;(assetName)<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
//å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡ï¼ˆå‡è®¾ABèµ„æºåç§°ä¸ºBulletï¼‰
GameObject <span class="hljs-attr">bullet</span> = ResSystem.InstantiateGameObject(<span class="hljs-string">"Bullet"</span>)<span class="hljs-comment">;</span>
//å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡å–å‡ºå¹¶è·å–å…¶åˆšä½“ç»„ä»¶
Rigbody <span class="hljs-attr">rb</span> = ResSystem.InstantiateGameObject&lt;Rigbody&gt;(<span class="hljs-string">"Bullet"</span>)<span class="hljs-comment">;</span>
//å¼‚æ­¥å®ä¾‹åŒ–ä¸€ä¸ªå­å¼¹å¯¹è±¡,å¹¶åœ¨å…¶åŠ è½½å®Œååæ ‡å½’é›¶
void getBullet(GameObject bullet)
{
 Â  Â <span class="hljs-attr">bullet.transform.position</span> = Vector3.zero<span class="hljs-comment">;</span>
 Â   }
ResSystem.InstantiateGameObjectAsync("Bullet", getBullet)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>é€šè¿‡assetNameåŠ è½½æ¸¸æˆç‰©ä½“å¹¶å®ä¾‹åŒ–è¿”å›</li>
<li>å®ä¾‹åŒ–çš„æ¸¸æˆç‰©ä½“ä¼šè®¾ç½®çˆ¶ç‰©ä½“ä¸ºparentï¼Œä¸å¡«åˆ™é»˜è®¤ä¸ºnullæ— çˆ¶ç‰©ä½“åœ¨æœ€é¡¶å±‚ã€‚</li>
<li>å®ä¾‹åŒ–çš„ç‰©ä½“åç§°ä¼˜å…ˆä¸ºkeyNameï¼ŒkeyNameä¸ºnullæ—¶åˆ™ä¸ºassetNameã€‚</li>
<li>ä¼˜å…ˆæ ¹æ®keyNameä»å¯¹è±¡æ± è·å–ï¼Œä¸å¡«keyNameåˆ™æ ¹æ®assetNameåœ¨å¯¹è±¡æ± ä¸­æŸ¥æ‰¾ã€‚</li>
<li>å¯¹è±¡æ± ä¸­æ— ç¼“å­˜ï¼Œåˆ™æ ¹æ®assetNameä»Addressableä¸­è·å–èµ„æº,ä¸å¡«assetNameåˆ™æ ¹æ®keyNameä»Addressableä¸­è·å–èµ„æºã€‚</li>
<li>å¯ä»¥é€šè¿‡ä¼ å‚è·å–å¯¹è±¡ä¸Šçš„æŸä¸ªç»„ä»¶ï¼Œç»„ä»¶ä¾æ‰˜äºGameObjectå­˜åœ¨ï¼Œå› æ­¤ç‰©ä½“æ­¤æ—¶ä¹Ÿå·²è¢«ä»å¯¹è±¡æ± ä¸­å–å‡ºã€‚</li>
<li>autoReleaseä¸ºtrueåˆ™é€šè¿‡äº‹ä»¶å·¥å…·ä¸ºåŠ è½½å‡ºçš„å¯¹è±¡æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œä¼šåœ¨å…¶Destroyæ—¶è‡ªåŠ¨è°ƒç”¨Addressablesçš„Release APIã€‚</li>
<li>å¼‚æ­¥åŠ è½½æ¸¸æˆç‰©ä½“åŠå…¶ç»„ä»¶çš„æ–¹æ³•è¿”å›å€¼ä¸ºvoidç±»å‹ï¼Œæ— æ³•å³æ—¶ç›´æ¥åŠ è½½çš„æ¸¸æˆç‰©ä½“ï¼Œéœ€è¦é€šè¿‡callbackå›è°ƒè·å–åŠ è½½çš„GameObjectå¯¹è±¡å¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
</ul>

<ul>
<li>å¦‚æœèµ„æºè·¯å¾„æ­£ç¡®ï¼Œåˆ™è¿”å›å€¼å¿…ä¸ä¸ºç©ºï¼Œä¼˜å…ˆä»å¯¹è±¡æ± ä¸­è·å–ï¼Œå¯¹è±¡æ± ä¸­ä¸å­˜åœ¨åˆ™æ ¹æ®Loadçš„å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–è¿”å›ã€‚</li>
</ul>
<h5 data-id="heading-35">GameObjectå¸è½½</h5>
<p>å¸è½½GameObjectå³å°†GameObjectæ”¾å›å¯¹è±¡æ± è¿›è¡Œèµ„æºå›æ”¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ ¹æ®keyName/gameObject.nameå¸è½½gameObject</span>
<span class="hljs-comment">//(string keyName, GameObject gameObject)</span>
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(keyName, gameObject);
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(gameObject);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼Œå¸è½½å­å¼¹å¯¹è±¡bullet</span>
ResSystem<span class="hljs-selector-class">.PushGameObjectInPool</span>(bullet, "Bullet");
</code></pre>
<ul>
<li>é€šè¿‡gameObjectæŒ‡å®šå¸è½½çš„å¯¹è±¡ï¼ŒkeyNameæŒ‡å®šå¯¹è±¡æ± åï¼Œä¸å¡«åˆ™æŒ‰ç…§gameObjectçš„å¯¹è±¡åå¸è½½ã€‚</li>
</ul>

<ul>
<li>å¸è½½å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰åˆå§‹åŒ–è¿‡å¯¹è±¡æ± ï¼Œåˆ™å¯¹åº”è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåæ— é™é‡å¯¹è±¡æ± å¹¶å°†gameObjectæ”¾å…¥ã€‚</li>
</ul>
<p>â€</p>
<h4 data-id="heading-36">Unityèµ„æº</h4>
<p>è¿™ç±»èµ„æºä¸éœ€è¦è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿‡å¯¹è±¡æ± ï¼Œåªéœ€è¦ä½¿ç”¨æ•°æ®æˆ–è€…å¼•ç”¨ï¼Œæ¯”å¦‚AudioClipï¼ŒSpriteï¼Œprefab(æ²¡æœ‰ç»è¿‡å®ä¾‹åŒ–çš„GameObjectåŸæœ¬)ã€‚</p>
<h5 data-id="heading-37">åŠ è½½Asset</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//API</span>


<span class="hljs-comment">//æ ¹æ®assetNameåŠ è½½Tç±»å‹èµ„æº</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">LoadAsset</span>&lt;<span class="hljs-type">T</span>&gt;(assetName);
<span class="hljs-comment">//æ ¹æ®keyNameæ‰¹é‡åŠ è½½æ‰€æœ‰èµ„æº(IList&lt;T&gt;)</span>
<span class="hljs-comment">//(string keyName, out AsyncOperationHandle&lt;IList&lt;T&gt;&gt; handle, Action&lt;T&gt; callBackOnEveryOne = null)</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">LoadAssets</span>&lt;<span class="hljs-type">T</span>&gt;(keyName, handle, callBackOnEveryOne);


<span class="hljs-comment">//æ ¹æ®assetNameå¼‚æ­¥åŠ è½½Tç±»å‹èµ„æºï¼ˆvoidï¼‰</span>
<span class="hljs-comment">//(string assetName, Action&lt;T&gt; callBack)</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">LoadAssetAsync</span>&lt;<span class="hljs-type">T</span>&gt;(string assetName, <span class="hljs-type">Action</span>&lt;<span class="hljs-type">T</span>&gt; callBack);
<span class="hljs-comment">//æ ¹æ®keyNameæ‰¹é‡å¼‚æ­¥åŠ è½½æ‰€æœ‰èµ„æºï¼ˆvoidï¼‰</span>
<span class="hljs-comment">//(string keyName, Action&lt;AsyncOperationHandle&lt;IList&lt;T&gt;&gt;&gt; callBack, Action&lt;T&gt; callBackOnEveryOne = null)</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">LoadAssetsAsync</span>&lt;<span class="hljs-type">T</span>&gt;(keyName, callBack, callBackOnEveryOne);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼ŒåŠ è½½Addressable clipéŸ³é¢‘èµ„æº</span>
<span class="hljs-type">ResSystem</span>.<span class="hljs-type">LoadAssets</span>&lt;<span class="hljs-type">AudioClip</span>&gt;(<span class="hljs-string">"clip"</span>);
</code></pre>
<ul>
<li>é€šè¿‡pathè·¯å¾„åŠ è½½èµ„æºï¼ŒTç”¨æ¥æŒ‡æ˜åŠ è½½çš„èµ„æºç±»å‹ã€‚</li>
<li>å¼‚æ­¥åŠ è½½å•ä¸ªèµ„æºéœ€è¦é€šè¿‡ä¼ å…¥callbackå›è°ƒè·å–åŠ è½½çš„èµ„æºå¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
<li>æ‰¹é‡åŠ è½½èµ„æºæ—¶keyNameæ˜¯Addressableä¸­çš„Labelsã€‚</li>
<li>handleç”¨äºé‡Šæ”¾èµ„æº,æ‰¹é‡åŠ è½½æ—¶ï¼Œå¦‚æœé‡Šæ”¾èµ„æºè¦é‡Šæ”¾æ‰handleï¼Œç›´æ¥å»é‡Šæ”¾èµ„æºæ˜¯æ— æ•ˆçš„.</li>
<li>AddressableåŠ è½½æŒ‡å®škeyNameçš„æ‰€æœ‰èµ„æºæ—¶ï¼Œæ”¯æŒæ¯åŠ è½½ä¸€ä¸ªèµ„æºè°ƒç”¨ä¸€æ¬¡callBackOnEveryOneã€‚</li>
<li>å¼‚æ­¥åŠ è½½å®ŒæŒ‡å®škeyNameæ‰€æœ‰èµ„æºæ—¶ï¼Œè°ƒç”¨callbackè·å–åŠ è½½çš„èµ„æºé›†åˆå¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
<li>æ³¨æ„åŠ è½½çš„èµ„æºä¸ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ul>
<h5 data-id="heading-38">å¸è½½Asset</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//é‡Šæ”¾æŸä¸ªèµ„æº</span>
<span class="hljs-comment">//ï¼ˆT objï¼‰</span>
ResSystem<span class="hljs-selector-class">.UnloadAsset</span>&lt;T&gt;(T obj);
<span class="hljs-comment">//é”€æ¯å¯¹è±¡å¹¶é‡Šæ”¾èµ„æº</span>
<span class="hljs-comment">//(GameObject obj)</span>
ResSystem<span class="hljs-selector-class">.UnloadInstance</span>(obj);
<span class="hljs-comment">//å¸è½½å› ä¸ºæ‰¹é‡åŠ è½½è€Œäº§ç”Ÿçš„handle</span>
<span class="hljs-comment">//(AsyncOperationHandle&lt;TObject&gt; handle)</span>
UnLoadAssetsHandle&lt;TObject&gt;(handle);
</code></pre>
<p>å¸è½½Assetå³é‡Šæ”¾èµ„æº,å¯ä»¥åœ¨Destroyæ¸¸æˆå¯¹è±¡çš„åŒæ—¶é‡Šæ”¾Addressableèµ„æºã€‚</p>
<h3 data-id="heading-39">èµ„æºç³»ç»Ÿ-è‡ªåŠ¨ç”Ÿæˆèµ„æºå¼•ç”¨ä»£ç </h3>
<p>é’ˆå¯¹Addressablesç‰ˆæœ¬ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¥åŠ è½½èµ„æºæ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“è¾“é”™ï¼Œæ¡†æ¶æä¾›ä¸€ç§åŸºäºå¼•ç”¨åŠ è½½çš„æ–¹å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bab11f7f3e5c42f1aaad7325eea63c0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=fN58fhRyZsauxE4k5DOeBD7pk14%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>é€šè¿‡Editorå·¥å…·ä¼šåœ¨æŒ‡å®šè·¯å¾„ä¸‹ç”Ÿæˆèµ„æºå¼•ç”¨ä»£ç Rã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bc542d6844e459ab2a85b57e7254597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=iXbOuV6ttrAaepIur0WIMFsfImU%3D" alt="alt" loading="lazy"/>â€‹</p>
<pre><code class="hljs language-ini" lang="ini">// API
//è¿”å›ä¸€ä¸ªèµ„æº
R.GroupName.AddressableName<span class="hljs-comment">;</span>
//è¿”å›ä¸€ä¸ªèµ„æºçš„å®ä¾‹
//(Transform <span class="hljs-attr">parent</span> = null,string keyName=null,bool autoRelease = <span class="hljs-literal">true</span>)
R.GroupName.AddressableName(parent, keyName, autoRelease)<span class="hljs-comment">;</span>
R.GroupName.AddressableName(parent, keyName)<span class="hljs-comment">;</span>
R.GroupName.AddressableName(parent)<span class="hljs-comment">;</span>


//ä½¿ç”¨ç¤ºä¾‹
//è·å–ä¸€ä¸ªBulleté¢„åˆ¶ä½“èµ„æºï¼ˆä¸å®ä¾‹åŒ–ï¼‰
Gameobject <span class="hljs-attr">bullet</span> = R.DefaultLocalGroup.Bullet<span class="hljs-comment">;</span>
//è·å–ä¸€ä¸ªBulletå®ä¾‹
Gameobject <span class="hljs-attr">bullet</span> = R.DefaultLocalGroup.Bullet(x.transform)<span class="hljs-comment">;</span>


//é‡Šæ”¾
ResSystem.UnloadAsset&lt;GameObject&gt;(bullet)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>Ræ˜¯èµ„æºè„šæœ¬çš„å‘½åç©ºé—´ï¼Œå›ºå®šã€‚</li>
<li>GroupNameæ˜¯Addressableçš„ç»„åã€‚</li>
<li>AddressableNameæ˜¯èµ„æºåã€‚</li>
<li>å¦‚æœå¡«å†™keyNameï¼Œåˆ™å…ˆå»å¯¹è±¡æ± ä¸­æ‰¾èµ„æºå®ä¾‹ï¼Œæ‰¾ä¸ç€å†é€šè¿‡Addressableè·å–èµ„æºå¹¶å®ä¾‹åŒ–ã€‚</li>
<li>parentä¸ºå®ä¾‹çš„çˆ¶ç‰©ä½“ã€‚</li>
<li>autoReleaseä¸ºtrueåˆ™å®ä¾‹ä¼šåœ¨Destroyæ—¶è‡ªåŠ¨é‡Šæ”¾Addressableä¸­å¯¹åº”çš„èµ„æºã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad41d5d404cc4a3ab4fcad22fc96e27e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=GiU2cfnk1Kny%2B2NZSBQ1einzv4A%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å¯¹äºSpriteçš„å­å›¾ï¼Œä¹Ÿæ”¯æŒç›´æ¥å¼•ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/143b3a4bc26140dda4d9a66fee56ce80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=k6KcNqYYuf2Z1lsi8WchOS%2BsnTc%3D" alt="alt" loading="lazy"/>â€‹</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//å­å›¾</span>
R.LV2.Img_Img_0;
<span class="hljs-comment">//æ€»å›¾</span>
R.Lv2.Img;
</code></pre>
<h2 data-id="heading-40">äº‹ä»¶ç³»ç»Ÿ</h2>
<p>æ¡†æ¶çš„äº‹ä»¶ç³»ç»Ÿä¸»è¦è´Ÿè´£é«˜æ•ˆçš„æ–¹æ³•è°ƒç”¨ä¸æ•°æ®ä¼ é€’ï¼Œå®ç°å„åŠŸèƒ½ä¹‹é—´çš„è§£è€¦ï¼Œé€šå¸¸åœ¨è°ƒç”¨æŸä¸ªå®ä¾‹çš„æ–¹æ³•æ—¶ï¼Œå¿…é¡»å…ˆè·å¾—è¿™ä¸ªå®ä¾‹çš„å¼•ç”¨æˆ–è€…æ–°å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œä½è€¦åˆåº¦çš„æ¡†æ¶ç»“æ„å¸Œæœ›ç¨‹åºæœ¬èº«ä¸å»å…³æ³¨è¢«è°ƒç”¨çš„æ–¹æ³•æ‰€ä¾æ‰˜çš„å®ä¾‹å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œé€šè¿‡äº‹ä»¶ç³»ç»Ÿåšä¸­è½¬å°†åŠŸèƒ½çš„è°ƒç”¨å°è£…æˆäº‹ä»¶ï¼Œä½¿ç”¨äº‹ä»¶ç›‘å¬æ³¨å†Œã€ç§»é™¤å’Œäº‹ä»¶è§¦å‘å®Œæˆæ¨¡å—é—´çš„åŠŸèƒ½è°ƒç”¨ç®¡ç†ã€‚å¸¸ç”¨åœ¨UIäº‹ä»¶ã€è·¨æ¨¡å—äº‹ä»¶ä¸Šã€‚</p>
<p>äº‹ä»¶ç³»ç»Ÿæ”¯æŒæ— è¿”å›å€¼çš„Actionï¼ŒFuncå®é™…åº”ç”¨æ„ä¹‰ä¸å¤§ã€‚</p>
<h3 data-id="heading-41">äº‹ä»¶ç›‘å¬æ·»åŠ </h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ·»åŠ æ— å‚æ•°çš„äº‹ä»¶ç›‘å¬</span>
<span class="hljs-comment">//string eventName, Action action</span>
EventSystem<span class="hljs-selector-class">.AddEventListener</span>(eventName, action); 
<span class="hljs-comment">//æ·»åŠ å¤šä¸ªå‚æ•°çš„äº‹ä»¶ç›‘å¬</span>
<span class="hljs-comment">//string eventName</span>
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;T&gt;(eventName, action);
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;T0, T1&gt;(eventName, action);
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;T0, T1, T2&gt;(eventName, action);
...
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;T0, T1, ..., T15&gt;(eventName, action);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">//æ·»åŠ æ— å‚æ•°çš„äº‹ä»¶ç›‘å¬,Doitæ–¹æ³•å¯¹åº”åç§°ä¸ºTestçš„äº‹ä»¶</span>
EventSystem<span class="hljs-selector-class">.AddEventListener</span>("Test", Doit);
void <span class="hljs-built_in">Doit</span>()
{
    Debug<span class="hljs-selector-class">.Log</span>("Doit");
}
<span class="hljs-comment">//æ·»åŠ å¤šä¸ªå‚æ•°çš„äº‹ä»¶ç›‘å¬ï¼ŒDoit2å¯¹åº”åç§°ä¸ºTestMçš„äº‹ä»¶ï¼Œå‚æ•°ä¸ºintï¼Œstring</span>
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;int, string&gt;("TestM", Doit2);
void <span class="hljs-built_in">Doit2</span>(int a, string b)
{
    Debug<span class="hljs-selector-class">.Log</span>(a);
    Debug<span class="hljs-selector-class">.Log</span>(b); 
}
</code></pre>
<ul>
<li>eventNameæ˜¯è§£è€¦æ‰§è¡Œçš„æ–¹æ³•çš„æ ‡è®°ï¼Œå³äº‹ä»¶åï¼Œæ˜¯è§¦å‘äº‹ä»¶æ—¶çš„å”¯ä¸€ä¾æ®ã€‚</li>
<li>actionä¼ æ— è¿”å›å€¼æ–¹æ³•ã€‚</li>
<li>T0~T15æ˜¯æ³›å‹ï¼Œç”¨äºæŒ‡å®šå‚æ•°è¡¨,æ”¯æŒæœ€å¤š16ä¸ªå‚æ•°çš„actionã€‚</li>
</ul>
<h3 data-id="heading-42">äº‹ä»¶ç›‘å¬ç§»é™¤</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ·»åŠ æ— å‚æ•°çš„äº‹ä»¶ç›‘å¬</span>
<span class="hljs-comment">//string eventName, Action action</span>
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>(eventName, action); 
<span class="hljs-comment">//æ·»åŠ å¤šä¸ªå‚æ•°çš„äº‹ä»¶ç›‘å¬</span>
<span class="hljs-comment">//string eventName</span>
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>&lt;T&gt;(eventName, action);
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>&lt;T0, T1&gt;(eventName, action);
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>&lt;T0, T1, T2&gt;(eventName, action);
...
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>&lt;T0, T1, ..., T15&gt;(eventName, action);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">//ç§»é™¤æ— å‚æ•°çš„äº‹ä»¶ç›‘å¬,Doitæ–¹æ³•å¯¹åº”åç§°ä¸ºTestçš„äº‹ä»¶</span>
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>("Test", Doit);
void <span class="hljs-built_in">Doit</span>()
{
    Debug<span class="hljs-selector-class">.Log</span>("Doit");
}
<span class="hljs-comment">//ç§»é™¤å¤šä¸ªå‚æ•°çš„äº‹ä»¶ç›‘å¬ï¼ŒDoit2å¯¹åº”åç§°ä¸ºTestMçš„äº‹ä»¶ï¼Œå‚æ•°ä¸ºintï¼Œstring</span>
EventSystem<span class="hljs-selector-class">.RemoveEventListener</span>&lt;int, string&gt;("TestM", Doit2);
void <span class="hljs-built_in">Doit2</span>(int a, string b)
{
    Debug<span class="hljs-selector-class">.Log</span>(a);
    Debug<span class="hljs-selector-class">.Log</span>(b); 
}
</code></pre>
<ul>
<li>eventNameæ˜¯è§£è€¦æ‰§è¡Œçš„æ–¹æ³•çš„æ ‡è®°ï¼Œå³äº‹ä»¶åï¼Œæ˜¯è§¦å‘äº‹ä»¶æ—¶çš„å”¯ä¸€ä¾æ®ã€‚</li>
<li>actionä¼ æ— è¿”å›å€¼æ–¹æ³•ã€‚</li>
<li>T0~T15æ˜¯æ³›å‹ï¼Œç”¨äºæŒ‡å®šå‚æ•°è¡¨,æ”¯æŒæœ€å¤š16ä¸ªå‚æ•°çš„actionã€‚</li>
</ul>
<h3 data-id="heading-43">äº‹ä»¶è§¦å‘</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//è§¦å‘æ— å‚æ•°äº‹ä»¶</span>
EventSystem.EventTrigger(<span class="hljs-built_in">string</span> eventName);
<span class="hljs-comment">//è§¦å‘å¤šä¸ªå‚æ•°äº‹ä»¶</span>
EventSystem.EventTrigger&lt;T&gt;(<span class="hljs-built_in">string</span> eventName, T arg);
EventSystem.EventTrigger&lt;T0, T1&gt;(<span class="hljs-built_in">string</span> eventName, T0 arg0, T1 arg1);
EventSystem.EventTrigger&lt;T0, T1,..., T15&gt;(<span class="hljs-built_in">string</span> eventName, T0 arg0, T1 arg1, ..., T15 arg15);
 
<span class="hljs-comment">//ç®€å•ç¤ºä¾‹ï¼Œä½¿ç”¨æ·»åŠ ç›‘å¬çš„æ–¹æ³•ä¾‹å­</span>
EventSystem.EventTrigger(<span class="hljs-string">"Test"</span>);
EventSystem.EventTrigger&lt;<span class="hljs-type">int</span>,<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"TestM"</span>,<span class="hljs-number">1</span>,<span class="hljs-string">"test"</span>);
</code></pre>
<ul>
<li>eventNameæ˜¯è§£è€¦æ‰§è¡Œçš„æ–¹æ³•çš„æ ‡è®°ï¼Œå³äº‹ä»¶åï¼Œæ˜¯è§¦å‘äº‹ä»¶æ—¶çš„å”¯ä¸€ä¾æ®ã€‚</li>
<li>T0~T15æ˜¯æ³›å‹ï¼Œç”¨äºæŒ‡å®šå‚æ•°è¡¨,æ”¯æŒæœ€å¤š16ä¸ªå‚æ•°çš„actionã€‚</li>
<li>äº‹ä»¶çš„æŸ¥è¯¢åº•å±‚ä½¿ç”¨TryGetValueæ‰€ä»¥è§¦å‘ä¸å­˜åœ¨çš„äº‹ä»¶å¹¶ä¸ä¼šæŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-44">äº‹ä»¶ç§»é™¤</h3>
<p>äº‹ä»¶ç§»é™¤å’Œäº‹ä»¶ç›‘å¬ç§»é™¤çš„åŒºåˆ«å‚ä¸ï¼š</p>
<ul>
<li>äº‹ä»¶ç›‘å¬ç§»é™¤åªç§»é™¤ä¸€æ¡Actionï¼Œæ¯”å¦‚æ·»åŠ äº†3æ¬¡åŒåäº‹ä»¶ç›‘å¬ï¼Œåˆ™ç§»é™¤ä¸€æ¬¡åè§¦å‘è¿˜æ˜¯ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œä¸”eventNameè®°å½•ä¸ä¼šè¢«ç§»é™¤ã€‚</li>
<li>äº‹ä»¶ç§»é™¤ä¼šå°†äº‹ä»¶ä¸­å¿ƒå­—å…¸ä¸­æœ‰å…³eventNameçš„è®°å½•è¿å¸¦å­˜å‚¨çš„Actionä¸€åŒæ¸…ç©ºã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//ç§»é™¤ä¸€ç±»äº‹ä»¶</span>
<span class="hljs-comment">//(string eventName)</span>
EventSystem<span class="hljs-selector-class">.RemoveEvent</span>(eventName);
<span class="hljs-comment">//ç§»é™¤äº‹ä»¶ä¸­å¿ƒä¸­æ‰€æœ‰äº‹ä»¶</span>
EventSystem<span class="hljs-selector-class">.Clear</span>();
</code></pre>
<ul>
<li>eventNameæ˜¯è§£è€¦æ‰§è¡Œçš„æ–¹æ³•çš„æ ‡è®°ï¼Œå³äº‹ä»¶åï¼Œæ˜¯è§¦å‘äº‹ä»¶æ—¶çš„å”¯ä¸€ä¾æ®ã€‚</li>
</ul>
<h3 data-id="heading-45">ç±»å‹äº‹ä»¶</h3>
<p>æ”¯æŒå¯¹å‚æ•°è¿›è¡Œå°è£…ä¸ºä¸€ä¸ªstructä¼ é€’ï¼Œç®€åŒ–å‚æ•°åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ·»åŠ ç±»å‹äº‹ä»¶çš„ç›‘å¬</span>
<span class="hljs-comment">//Action&lt;T&gt; action</span>
AddTypeEventListener&lt;T&gt;(action);
<span class="hljs-comment">//ç§»é™¤ç±»å‹äº‹ä»¶çš„ç›‘å¬</span>
RemoveTypeEventListener&lt;T&gt;(action);
<span class="hljs-comment">//ç§»é™¤/åˆ é™¤ä¸€ä¸ªç±»å‹äº‹ä»¶</span>
RemoveTypeEvent&lt;T&gt;();
<span class="hljs-comment">//è§¦å‘ç±»å‹äº‹ä»¶</span>
<span class="hljs-comment">// (T arg)</span>
TypeEventTrigger&lt;T&gt;(arg);
</code></pre>
<ul>
<li>Tæ˜¯å°è£…çš„å‚æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ä¸ºstructç±»å‹ã€‚</li>
<li>actionè®¾è®¡ä½¿ç”¨å°è£…å‚æ•°Tçš„äº‹ä»¶ã€‚</li>
<li>argæ˜¯å°è£…çš„å‚æ•°ã€‚</li>
</ul>
<h3 data-id="heading-46">æ³¨æ„</h3>
<p>äº‹ä»¶ç³»ç»Ÿçš„è¿è¡Œé€»è¾‘æ˜¯ï¼Œé¢„å…ˆæ·»åŠ /ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œå†åœ¨èƒ½å¤Ÿè·å–ç›¸åº”å‚æ•°çš„ç±»å†…è§¦å‘äº‹ä»¶ã€‚</p>
<h2 data-id="heading-47">éŸ³æ•ˆç³»ç»Ÿ</h2>
<p>éŸ³æ•ˆæœåŠ¡é›†æˆäº†èƒŒæ™¯ã€ç‰¹æ•ˆéŸ³ä¹æ’­æ”¾ï¼ŒéŸ³é‡ã€æ’­æ”¾æ§åˆ¶åŠŸèƒ½ã€‚åŒ…å«äº†å…¨å±€éŸ³é‡globalVolumeã€èƒŒæ™¯éŸ³é‡bgVolumeã€ç‰¹æ•ˆéŸ³é‡effectVolumeã€é™éŸ³å¸ƒå°”é‡isMuteã€æš‚åœå¸ƒå°”é‡isPauseç­‰éŸ³é‡ç›¸å…³çš„å±æ€§ï¼Œæ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„PlayBGAudioæ–¹æ³•ä¸”ï¼Œæ’­æ”¾ç‰¹æ•ˆéŸ³ä¹PlayOnShotæ–¹æ³•ä¸”é‡è½½åæ”¯æŒåœ¨æŒ‡å®šä½ç½®æˆ–ç»‘å®šæ¸¸æˆå¯¹è±¡æ’­æ”¾ç‰¹å®šçš„éŸ³ä¹ï¼Œç‰¹æ•ˆéŸ³ä¹ç”±äºè¦é‡å¤ä½¿ç”¨ï¼Œå¯ä»¥ä»å¯¹è±¡æ± ä¸­è·å–æ’­æ”¾å™¨å¹¶è‡ªåŠ¨å›æ”¶ï¼Œæ”¯æŒæ’­æ”¾åæ‰§è¡Œå›è°ƒäº‹ä»¶ã€‚</p>
<h3 data-id="heading-48">æ’­æ”¾èƒŒæ™¯éŸ³ä¹</h3>
<h3 data-id="heading-49">éŸ³é‡ã€æ’­æ”¾å±æ€§æ§åˆ¶</h3>
<p>éŸ³æ•ˆæœåŠ¡æ”¯æŒåœ¨Inspectoré¢æ¿ä¸Šçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„æ–¹æ³•æ›´æ–°éŸ³é‡å±æ€§,ä¹Ÿå¯ä»¥åœ¨å±æ€§å€¼å˜åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„æ›´æ–°æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">//API &amp; ç¤ºä¾‹
//å…¨å±€éŸ³é‡(float,0~1),éŸ³é‡è®¾å®šä¸º50%
<span class="hljs-attr">AudioSystem.GlobalVolume</span> = <span class="hljs-number">0.5</span>f<span class="hljs-comment">;</span>
//èƒŒæ™¯éŸ³ä¹éŸ³é‡(float,0~1)ï¼ŒéŸ³é‡è®¾å®šä¸º50%
<span class="hljs-attr">AudioSystem.BGVolume</span> = <span class="hljs-number">0.5</span>f<span class="hljs-comment">;</span>
//ç‰¹æ•ˆéŸ³ä¹éŸ³é‡(flaot,0~1)
<span class="hljs-attr">AudioStystem.EffectVolume</span> = <span class="hljs-number">0.5</span>f<span class="hljs-comment">;</span>
//æ˜¯å¦å…¨å±€é™éŸ³(bool),trueåˆ™é™éŸ³
<span class="hljs-attr">AudioSystem.IsMute</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
//èƒŒæ™¯éŸ³ä¹æ˜¯å¦å¾ªç¯,trueåˆ™å¾ªç¯
<span class="hljs-attr">AudioSystem.IsLoop</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
//èƒŒæ™¯éŸ³ä¹æ˜¯å¦æš‚åœï¼Œtrueåˆ™æš‚åœ
<span class="hljs-attr">AudioSystem.IsPause</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>GlobalVolumeæ˜¯å…¨å±€éŸ³é‡ï¼ŒåŒæ—¶å½±å“èƒŒæ™¯ã€ç‰¹æ•ˆéŸ³ä¹éŸ³é‡ã€‚</li>
<li>BGVolumeæ˜¯èƒŒæ™¯éŸ³ä¹éŸ³é‡</li>
<li>EffectVolumeæ˜¯ç‰¹æ•ˆéŸ³ä¹éŸ³é‡ã€‚</li>
<li>IsMuteæ§åˆ¶å…¨å±€éŸ³é‡æ˜¯å¦é™éŸ³ã€‚</li>
<li>IsLoopæ§åˆ¶èƒŒæ™¯éŸ³ä¹æ˜¯å¦å¾ªç¯ã€‚</li>
<li>IsPauseæ§åˆ¶èƒŒæ™¯éŸ³ä¹æ˜¯å¦æš‚åœã€‚</li>
</ul>
<p>æ”¯æŒé€šè¿‡é¢æ¿æ›´æ–°éŸ³é‡å±æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a71a23e9bd8742c895db54508fe20d37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=gXpum3ViFvKvcAi%2Fs5g7SWZkY0M%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-50">æ’­æ”¾èƒŒæ™¯éŸ³ä¹</h3>
<pre><code class="hljs language-ini" lang="ini">//API
//æ’­æ”¾èƒŒæ™¯éŸ³ä¹
//(AudioClip clip, bool <span class="hljs-attr">loop</span> = <span class="hljs-literal">true</span>, float volume = -<span class="hljs-number">1</span>, float fadeOutTime = <span class="hljs-number">0</span>, float fadeInTime = <span class="hljs-number">0</span>)
AudioSystem.PlayBGAudio(clip, loop, volume, fadeOutTime, fadeInTime)<span class="hljs-comment">;</span>
//è½®æ’­å¤šä¸ªèƒŒæ™¯éŸ³ä¹
//(AudioClip<span class="hljs-section">[]</span> clips, float <span class="hljs-attr">volume</span> = -<span class="hljs-number">1</span>, float fadeOutTime = <span class="hljs-number">0</span>, float fadeInTime = <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
AudioSystem.PlayBGAudioWithClips(clips, volume, fadeOutTime, fadeInTime)<span class="hljs-comment">;</span>
//åœæ­¢å½“å‰èƒŒæ™¯éŸ³ä¹
AudioSystem.StopBGAudio()<span class="hljs-comment">;</span>
//æš‚åœå½“å‰èƒŒæ™¯éŸ³ä¹
AudioSystem.PauseBGAudio()<span class="hljs-comment">;</span>
//å–æ¶ˆæš‚åœå½“å‰éŸ³ä¹
AudioSystem.UnPauseBGAudio()<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
AudioClip <span class="hljs-attr">clip</span> = ResSystem.LoadAsset&lt;AudioClip&gt;(<span class="hljs-string">"music"</span>)<span class="hljs-comment">;</span>
AudioSystem.PlayBGAudio(clip)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>clipæ˜¯éŸ³ä¹ç‰‡æ®µï¼Œå¯ä»¥ä¼ clipæ•°ç»„æ¥è½®æ’­éŸ³ä¹ã€‚</li>
<li>volumeæ˜¯éŸ³ä¹çš„éŸ³é‡ï¼Œä¸æŒ‡å®šåˆ™æŒ‰åŸæ¥çš„èƒŒæ™¯éŸ³é‡ã€‚</li>
<li>fadeOutTimeæ˜¯æ¸å‡ºéŸ³ä¹çš„æ—¶é—´ã€‚</li>
<li>fadeInTimeæ˜¯æ¸å…¥éŸ³ä¹çš„æ—¶é—´ã€‚</li>
<li>åœæ­¢å½“å‰èƒŒæ™¯éŸ³ä¹ä¼šå°†å½“å‰èƒŒæ™¯éŸ³ä¹ç½®ç©ºã€‚</li>
<li>æš‚åœéŸ³ä¹å¯å–æ¶ˆæš‚åœæ¢å¤ã€‚</li>
</ul>
<h3 data-id="heading-51">æ’­æ”¾ç‰¹æ•ˆéŸ³ä¹</h3>
<pre><code class="hljs language-ini" lang="ini">//API
//æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆå¹¶ç»‘å®šåˆ°æ¸¸æˆç‰©ä½“ä¸Šï¼Œä½ç½®éšç‰©ä½“å˜åŒ–
//(AudioClip clip, Component <span class="hljs-attr">component</span> = null, bool autoReleaseClip = <span class="hljs-literal">false</span>, float volumeScale = <span class="hljs-number">1</span>, bool is3d = <span class="hljs-literal">true</span>, Action callBack = null)
audioSystem.PlayOneShot(clip, component, autoReleaseClip, volumeScale, is3d, callBack)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, component, autoReleaseClip, volumeScale, is3d)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, component, autoReleaseClip, volumeScale)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, component, autoReleaseClip)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, component)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip)<span class="hljs-comment">;</span>
//åœ¨æŒ‡å®šä½ç½®ä¸Šæ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆ
//(AudioClip clip, Vector3 position, bool <span class="hljs-attr">autoReleaseClip</span> = <span class="hljs-literal">false</span>, float volumeScale = <span class="hljs-number">1</span>, bool is3d = <span class="hljs-literal">true</span>, Action callBack = null)
audioSystem.PlayOneShot(clip, position, autoReleaseClip, volumeScale, is3d, callBack)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, position, autoReleaseClip, volumeScale, is3d)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, position, autoReleaseClip, volumeScale)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, position, autoReleaseClip)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip, position)<span class="hljs-comment">;</span>
//ç®€å•ç¤ºä¾‹
//åœ¨ç©å®¶ä½ç½®æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆ
AudioClip <span class="hljs-attr">clip</span> = ResSystem.LoadAsset&lt;AudioClip&gt;(<span class="hljs-string">"music"</span>)<span class="hljs-comment">;</span>
audioSystem.PlayOneShot(clip,player.transform.position)<span class="hljs-comment">;</span>
//ç»‘å®šç©å®¶ç»„ä»¶æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆï¼ˆç­‰åŒäºç©å®¶ä½ç½®ï¼‰
audioSystem.PlayOneShot(clip,player.transform)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>clipæ˜¯éŸ³ä¹ç‰‡æ®µï¼ŒéŸ³æ•ˆç³»ç»Ÿä¸­ç‰¹æ•ˆéŸ³ä¹åœ¨æ¯æ¬¡æ’­æ”¾æ—¶ä¼˜å…ˆä»å¯¹è±¡æ± ä¸­å–å‡ºæŒ‚è½½äº†AudioSourceçš„GameObjectå®ä¾‹ç”Ÿæˆå¹¶ä¼šåœ¨éŸ³æ•ˆæ’­æ”¾å®Œæˆåè‡ªåŠ¨å›æ”¶ã€‚</li>
<li>postionæ˜¯æ’­æ”¾çš„ä½ç½®ï¼Œå¿…å¡«ã€‚</li>
<li>componentæ˜¯ç»‘å®šçš„ç»„ä»¶ï¼Œè¿™ä¸ªAPIçš„ç›®çš„æ˜¯è®©éŸ³æ•ˆéšç€ç‰©ä½“ç§»åŠ¨ä¸€èµ·ç§»åŠ¨ï¼Œä¸å¡«åˆ™é»˜è®¤ä¸ç»‘å®šã€‚</li>
<li>autoReleaseClipä»£è¡¨æ˜¯å¦éœ€è¦åœ¨éŸ³ä¹æ’­æ”¾ç»“æŸåè‡ªåŠ¨é‡Šæ”¾clipèµ„æºï¼ŒReså’ŒAddressableå‡å¯ã€‚</li>
<li>volumeScleæ˜¯éŸ³ä¹çš„éŸ³é‡ï¼Œä¸æŒ‡å®šé»˜è®¤æŒ‰æœ€å¤§éŸ³é‡ã€‚</li>
<li>is3Dæ˜¯å¯ç”¨ç©ºé—´éŸ³æ•ˆï¼Œé»˜è®¤å¼€å¯ã€‚</li>
<li>callBackæ˜¯å›è°ƒäº‹ä»¶ï¼Œä¼šåœ¨éŸ³æ•ˆæ’­æ”¾å®Œæ‰§è¡Œä¸€ä¸ªæ— å‚æ— è¿”å›å€¼æ–¹æ³•ã€‚</li>
</ul>
<p>ä½¿ç”¨Compoentç»‘å®šæ’­æ”¾éŸ³æ•ˆæ—¶ï¼Œå¦‚æœç»‘å®šç‰©ä½“å¦‚æœåœ¨æ’­æ”¾ä¸­è¢«é”€æ¯äº†ï¼Œé‚£ä¹ˆAudioSourceä¼šæå‰è§£ç»‘é¿å…ä¸€åŒè¢«é”€æ¯ï¼ˆé€šè¿‡äº‹ä»¶å·¥å…·æå‰æ·»åŠ ç›‘å¬ï¼‰ï¼Œä¹‹åæ’­æ”¾å®Œæ¯•ä¼šè‡ªåŠ¨å›æ”¶ã€‚</p>
<h2 data-id="heading-52">å­˜æ¡£ç³»ç»Ÿ</h2>
<p>å®Œæˆå¯¹å­˜æ¡£çš„åˆ›å»ºï¼Œè·å–ï¼Œä¿å­˜ï¼ŒåŠ è½½ï¼Œåˆ é™¤ï¼Œç¼“å­˜ï¼Œæ”¯æŒå¤šå­˜æ¡£ã€‚å­˜æ¡£æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ç”¨æˆ·å‹å­˜æ¡£ï¼Œå­˜å‚¨ç€æŸä¸ªæ¸¸æˆç”¨æˆ·å…·ä½“çš„ä¿¡æ¯ï¼Œå¦‚è¡€é‡ï¼Œæ­¦å™¨ï¼Œæ¸¸æˆè¿›åº¦ï¼Œä¸€ç±»æ˜¯è®¾ç½®å‹å­˜æ¡£ï¼Œä¸ä»»ä½•ç”¨æˆ·å­˜æ¡£éƒ½æ— å…³ï¼Œæ˜¯é€šç”¨çš„å­˜å‚¨ä¿¡æ¯ï¼Œæ¯”å¦‚å±å¹•åˆ†è¾¨ç‡ã€éŸ³é‡è®¾ç½®ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caa95c4bc8454184a223045a0b16c964~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=prHLWTjLI8J3E3PTTI3lnjYqdPA%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å­˜æ¡£ç³»ç»Ÿæ”¯æŒä¸¤ç±»æœ¬åœ°æ–‡ä»¶ï¼šï¼Œä¸¤è€…é€šè¿‡æ¡†æ¶è®¾ç½®é¢æ¿è¿›è¡Œåˆ‡æ¢ï¼Œåˆ‡æ¢æ—¶ï¼ŒåŸæœ¬åœ°æ–‡ä»¶å­˜æ¡£ä¼šæ¸…ç©ºï¼äºŒè¿›åˆ¶æµæ–‡ä»¶å¯è¯»æ€§è¾ƒå·®ä¸æ˜“ä¿®æ”¹ï¼ŒJsonå¯è¯»æ€§è¾ƒå¼ºï¼Œæ˜“ä¿®æ”¹ï¼Œå­˜æ¡£çš„æ•°æ®å­˜åœ¨Application.persistentDataPathä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa0107b375cd4eea85de63e6e2430a87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=c1TkfekCJSuK%2Bn8o7DSU2BqfW1Y%3D" alt="alt" loading="lazy"/>â€‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58bd332ddec34c6c8511e0bc87defbe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=5Qtm8amFhOUN9DZYaIGsikBbyV8%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>SaveDataå’Œsettingåˆ†åˆ«å­˜å‚¨ç”¨æˆ·å­˜æ¡£å’Œè®¾ç½®å‹å­˜æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac3530badaf54138a327438b2b123a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=M5QKah7CPB%2FEJwN6a3Q%2B1xZhELE%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>ç”¨æˆ·å­˜æ¡£ä¸‹æ ¹æ®saveIDåˆ†æˆè‹¥å¹²æ–‡ä»¶å¤¹ç”¨äºå­˜å‚¨å…·ä½“çš„å¯¹è±¡ã€‚</p>
<h3 data-id="heading-53">è®¾ç½®å‹å­˜æ¡£</h3>
<p>è®¾ç½®å­˜æ¡£å®é™…å°±æ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å­˜æ¡£ï¼Œå¯ä»¥å‘å…¶ä¸­å­˜å‚¨å…¨å±€é€šç”¨æ•°æ®ã€‚</p>
<h4 data-id="heading-54">ä¿å­˜è®¾ç½®</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//ä¿å­˜è®¾ç½®åˆ°å…¨å±€å­˜æ¡£</span>
<span class="hljs-comment">//(object saveObject, string fileName)</span>
SaveSystem<span class="hljs-selector-class">.SaveSetting</span>(saveObject, fileName);
SaveSystem<span class="hljs-selector-class">.SaveSetting</span>(saveObject)
<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
<span class="hljs-comment">//è§ä¸‹ä¸€å°èŠ‚ç»“åˆåŠ è½½è¯´æ˜</span>
</code></pre>
<ul>
<li>saveObjectæ˜¯è¦ä¿å­˜çš„å¯¹è±¡ï¼ŒSystem.Objectç±»å‹ã€‚</li>
<li>fileNameæ˜¯ä¿å­˜çš„æ–‡ä»¶åç§°ï¼Œä¸å¡«é»˜è®¤å–saveObjectçš„ç±»å‹åã€‚</li>
</ul>
<h4 data-id="heading-55">åŠ è½½è®¾ç½®</h4>
<pre><code class="hljs language-ini" lang="ini">///API
//ä»è®¾ç½®å­˜æ¡£ä¸­åŠ è½½è®¾ç½®
// string fileName
SaveSystem.LoadSetting&lt;T&gt;(fileName)<span class="hljs-comment">;</span>
SaveSystem.LoadSetting&lt;T&gt;()<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
// GameSettingç±»ä¸­å­˜å‚¨ç€æ¸¸æˆåç§°ï¼Œä½œä¸ºå…¨å±€æ•°æ®
<span class="hljs-section">[Serializable]</span>
public class GameSetting
{
 Â  Â public string gameName<span class="hljs-comment">;</span>
}
GameSetting <span class="hljs-attr">gameSetting</span> = new GameSetting()<span class="hljs-comment">;</span>
<span class="hljs-attr">gameSetting.gameName</span> = <span class="hljs-string">"æµ‹è¯•"</span><span class="hljs-comment">;</span>
//ä¿å­˜è®¾ç½®
SaveSystem.SaveSetting(gameSetting)<span class="hljs-comment">;</span>
//å–å‡ºæ¥ç”¨
String <span class="hljs-attr">gameName</span> = SaveSystem.LoadSetting&lt;gameSetting&gt;().gameName<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-56">åˆ é™¤è®¾ç½®</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//åˆ é™¤ç”¨æˆ·å­˜æ¡£å’Œè®¾ç½®å­˜æ¡£</span>
SaveSystem<span class="hljs-selector-class">.DeleteAll</span>();
</code></pre>
<ul>
<li>fileNameæ˜¯åŠ è½½è®¾ç½®å­˜æ¡£çš„æ–‡ä»¶åï¼ŒTé™å®šäº†æ‰€å­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œä¸å¡«fileNameåˆ™é»˜è®¤ä»¥Tçš„ç±»å‹åä½œä¸ºæ–‡ä»¶ååŠ è½½ã€‚</li>
</ul>
<h3 data-id="heading-57">ç”¨æˆ·å­˜æ¡£</h3>
<p>ç”¨æˆ·å­˜æ¡£ä¸å…·ä½“çš„ç”¨æˆ·ç›¸å…³ï¼Œä¸åŒç”¨æˆ·å­˜æ¡£ä½ç½®ä¸åŒï¼Œæ•°æ®ä¹Ÿä¸åŒï¼Œç´¢å¼•ä¸ºSaveIDã€‚</p>
<h4 data-id="heading-58">åˆ›å»ºç”¨æˆ·å­˜æ¡£</h4>
<p>åˆ›å»ºçš„å­˜æ¡£ç´¢å¼•é»˜è®¤è‡ªå¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">//API
SaveSystem.CreateSaveItem()<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
SaveItem <span class="hljs-attr">saveItem</span> = SaveSystem.CreateSaveItem()<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-59">è·å–ç”¨æˆ·å­˜æ¡£</h4>
<h5 data-id="heading-60">å­˜æ¡£å±‚é¢</h5>
<h6 data-id="heading-61">è·å–æ‰€æœ‰ç”¨æˆ·å­˜æ¡£</h6>
<p>æ ¹æ®ä¸€å®šè§„åˆ™è·å–æ‰€æœ‰ç”¨æˆ·å­˜æ¡£ï¼Œè¿”å›Listã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æœ€æ–°çš„åœ¨æœ€åé¢</span>
SaveSystem<span class="hljs-selector-class">.GetAllSaveItem</span>();
<span class="hljs-comment">//æœ€è¿‘åˆ›å»ºçš„åœ¨æœ€å‰é¢</span>
SaveSystem<span class="hljs-selector-class">.GetAllSaveItemByCreatTime</span>();
<span class="hljs-comment">//æœ€è¿‘æ›´æ–°çš„åœ¨æœ€å‰é¢</span>
SaveSystem<span class="hljs-selector-class">.GetAllSaveItemByUpdateTime</span>();
<span class="hljs-comment">//ä¸‡èƒ½è§£å†³æ–¹æ¡ˆï¼Œè‡ªå®šä¹‰è§„åˆ™</span>
GetAllSaveItem&lt;T&gt;(Func&lt;SaveItem, T&gt; orderFunc, bool isDescending = false)


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹,ä¸‡èƒ½æ–¹æ¡ˆï¼ŒæŒ‰ç…§SaveIDå€’åºè·å¾—å­˜æ¡£</span>
GameSetting gameSetting = new <span class="hljs-built_in">GameSetting</span>();
List&lt;SaveItem&gt; testList = SaveSystem<span class="hljs-selector-class">.GetAllSaveItem</span>&lt;int&gt;(oderFunc, true);
<span class="hljs-comment">//List&lt;SaveItem&gt; testList = SaveSystem.GetAllSaveItem();</span>
foreach (var item in testList)
{
    Debug<span class="hljs-selector-class">.Log</span>(item.saveID);
}
<span class="hljs-comment">//æ’åºä¾æ®Func</span>
int <span class="hljs-built_in">oderFunc</span>(SaveItem item)
{
    return item<span class="hljs-selector-class">.saveID</span>;
}
</code></pre>
<ul>
<li>æä¾›å¤šç§é‡è½½æ–¹æ³•è·å–å­˜æ¡£Listã€‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰æ’åºä¾æ®çš„ä¸‡è§£å†³æ–¹æ¡ˆï¼ŒTä¼ æ¯”è¾ƒå‚æ•°ç±»å‹ï¼ŒorderFuncä¼ æ¯”è¾ƒæ–¹æ³•ã€‚</li>
</ul>
<h6 data-id="heading-62">è·å–æŸä¸€é¡¹ç”¨æˆ·å­˜æ¡£</h6>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(int id, SaveItem saveItem)</span>
SaveSystem<span class="hljs-selector-class">.GetSaveItem</span>(id);
SaveSystem<span class="hljs-selector-class">.GetSaveItem</span>(saveItem);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
SaveItem saveItem = SaveSystem<span class="hljs-selector-class">.CreateSaveItem</span>();
SaveSystem<span class="hljs-selector-class">.GetSaveItem</span>(saveItem);
</code></pre>
<ul>
<li>idæ˜¯ç”¨æˆ·å­˜æ¡£çš„ç¼–å·ï¼Œå­˜æ¡£ç³»ç»Ÿä¼šåœ¨åˆ›å»ºæ—¶æŒ‡å®šé»˜è®¤IDï¼Œä½¿ç”¨æ—¶é€æ˜ï¼Œå› æ­¤æ¨èä½¿ç”¨saveItemä¼ å‚ï¼ŒsaveItemæ˜¯å¯ç»´æŠ¤çš„ã€‚</li>
</ul>
<h5 data-id="heading-63">åˆ é™¤ç”¨æˆ·å­˜æ¡£</h5>
<h6 data-id="heading-64">åˆ é™¤æ‰€æœ‰ç”¨æˆ·å­˜æ¡£</h6>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//åˆ é™¤æ‰€æœ‰ç”¨æˆ·å­˜æ¡£</span>
SaveSystem<span class="hljs-selector-class">.DeleteAllSaveItem</span>();
</code></pre>
<h6 data-id="heading-65">åˆ é™¤æŸä¸€é¡¹ç”¨æˆ·å­˜æ¡£</h6>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(int id, SaveItem saveItem)</span>
SaveSystem<span class="hljs-selector-class">.DeleteSaveItem</span>(id);
SaveSystem<span class="hljs-selector-class">.DeleteSaveItem</span>(saveItem);


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
SaveItem saveItem = SaveSystem<span class="hljs-selector-class">.CreateSaveItem</span>();
SaveSystem<span class="hljs-selector-class">.DeleteSaveItem</span>(saveItem);
</code></pre>
<ul>
<li>idæ˜¯ç”¨æˆ·å­˜æ¡£çš„ç¼–å·ï¼Œå­˜æ¡£ç³»ç»Ÿä¼šåœ¨åˆ›å»ºæ—¶æŒ‡å®šé»˜è®¤IDï¼Œä½¿ç”¨æ—¶é€æ˜ï¼Œå› æ­¤æ¨èä½¿ç”¨saveItemä¼ å‚ï¼ŒsaveItemæ˜¯å¯ç»´æŠ¤çš„ã€‚</li>
</ul>
<h4 data-id="heading-66">å­˜æ¡£å¯¹è±¡å±‚é¢</h4>
<h5 data-id="heading-67">ä¿å­˜ç”¨æˆ·å­˜æ¡£ä¸­æŸä¸€å¯¹è±¡</h5>
<pre><code class="hljs language-ini" lang="ini">//API
//(object saveObject, string saveFileName, SaveItem saveItemint, <span class="hljs-attr">saveID</span> = <span class="hljs-number">0</span>)
SaveSystem.SaveObject(saveObject, saveFileName, saveID)<span class="hljs-comment">;</span>
SaveSystem.SaveObject(saveObject, saveFileName, saveItem)<span class="hljs-comment">;</span>
SaveSystem.SaveObject(saveObject, saveID)<span class="hljs-comment">;</span>
SaveSystem.SaveObject(saveObject, saveItem)<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
SaveItem <span class="hljs-attr">saveItem</span> = SaveSystem.CreateSaveItem()<span class="hljs-comment">;</span>
GameSetting <span class="hljs-attr">gameSetting</span> = new GameSetting()<span class="hljs-comment">;</span>
SaveSystem.SaveObject(gameSetting, saveItem)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>saveObjectæ˜¯è¦ä¿å­˜çš„å¯¹è±¡ã€‚</li>
<li>saveFileNameæ˜¯ä¿å­˜åç”Ÿæˆçš„æœ¬åœ°æ–‡ä»¶åï¼ˆå¯¹è±¡ä¼šå•ç‹¬ä½œä¸ºä¸€ä¸ªæ–‡ä»¶å­˜å‚¨åœ¨å¯¹åº”saveIDçš„æ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼Œä¸å¡«åˆ™ä»¥å¯¹è±¡çš„ç±»å‹åä¸ºæ–‡ä»¶åã€‚</li>
<li>saveID/SaveItemæ˜¯å¯¹è±¡å­˜å‚¨çš„å­˜æ¡£ã€‚</li>
<li>ä¿å­˜å¯¹è±¡æ—¶ä¼šæ›´æ–°ç”¨æˆ·å­˜æ¡£ç¼“å­˜ã€‚</li>
</ul>
<h5 data-id="heading-68">è·å–ç”¨æˆ·å­˜æ¡£ä¸­æŸä¸€å¯¹è±¡</h5>
<pre><code class="hljs language-ini" lang="ini">//API
//(string saveFileName, SaveItem saveItem, int <span class="hljs-attr">saveID</span> = <span class="hljs-number">0</span>)
SaveSystem.LoadObject&lt;T&gt;(saveFileName, saveID)<span class="hljs-comment">;</span>
SaveSystem.LoadObject&lt;T&gt;(saveFileName, saveItem)<span class="hljs-comment">;</span>
SaveSystem.LoadObject&lt;T&gt;(saveID)<span class="hljs-comment">;</span>
SaveSystem.LoadObject&lt;T&gt;(saveItem)<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
SaveItem <span class="hljs-attr">saveItem</span> = SaveSystem.CreateSaveItem()<span class="hljs-comment">;</span>
GameSetting <span class="hljs-attr">gameSetting</span> = new GameSetting()<span class="hljs-comment">;</span>
SaveSystem.SaveObject(gameSetting, saveItem)<span class="hljs-comment">;</span>
GameSetting <span class="hljs-attr">gameSetting</span> = SaveSystem.LoadObject&lt;GameSetting&gt;(saveItem)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>TæŒ‡å®šè·å–å¯¹è±¡ç±»å‹ã€‚</li>
<li>saveFileNameæ˜¯è·å–å¯¹è±¡çš„æ–‡ä»¶åï¼Œä¸å¡«åˆ™é»˜è®¤ä»¥Tçš„ç±»å‹åä½œä¸ºæ–‡ä»¶åã€‚</li>
<li>saveID/SaveItemæ˜¯å¯¹è±¡å­˜å‚¨çš„å­˜æ¡£ã€‚</li>
<li>è·å–å¯¹è±¡ä¼˜å…ˆä»ç¼“å­˜ä¸­è¯»å–ï¼Œä¸å­˜åœ¨åˆ™IOè¯»æ–‡ä»¶è·å–ï¼Œå¹¶åŠ å…¥ç¼“å­˜ã€‚</li>
</ul>
<h5 data-id="heading-69">åˆ é™¤ç”¨æˆ·å­˜æ¡£ä¸­æŸä¸€å¯¹è±¡</h5>
<pre><code class="hljs language-ini" lang="ini">//API
//(string saveFileName, SaveItem saveItem, int <span class="hljs-attr">saveID</span> = <span class="hljs-number">0</span>)
SaveSystem.DeleteObject&lt;T&gt;(saveFileName, saveID)<span class="hljs-comment">;</span>
SaveSystem.DeleteObject&lt;T&gt;(saveFileName, saveItem)<span class="hljs-comment">;</span>
SaveSystem.DeleteObject&lt;T&gt;(saveID)<span class="hljs-comment">;</span>
SaveSystem.DeleteObject&lt;T&gt;(saveItem)<span class="hljs-comment">;</span>


//ç®€å•ç¤ºä¾‹
SaveItem <span class="hljs-attr">saveItem</span> = SaveSystem.CreateSaveItem()<span class="hljs-comment">;</span>
GameSetting <span class="hljs-attr">gameSetting</span> = new GameSetting()<span class="hljs-comment">;</span>
SaveSystem.DeleteObject(gameSetting, saveItem)<span class="hljs-comment">;</span>
GameSetting <span class="hljs-attr">gameSetting</span> = SaveSystem.DeleteObject&lt;GameSetting&gt;(saveItem)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>TæŒ‡å®šè·å–å¯¹è±¡ç±»å‹ã€‚</li>
<li>saveFileNameæ˜¯è·å–å¯¹è±¡çš„æ–‡ä»¶åï¼Œä¸å¡«åˆ™é»˜è®¤ä»¥Tçš„ç±»å‹åä½œä¸ºæ–‡ä»¶åã€‚</li>
<li>saveID/SaveItemæ˜¯å¯¹è±¡å­˜å‚¨çš„å­˜æ¡£ã€‚</li>
<li>åˆ é™¤æŸä¸€å¯¹è±¡æ—¶ï¼Œå¦‚æœå­˜åœ¨å¯¹åº”çš„ç¼“å­˜ï¼Œåˆ™ä¸€å¹¶åˆ é™¤ã€‚</li>
</ul>
<h5 data-id="heading-70">æ³¨æ„</h5>
<p>åœ¨ä»ç”¨æˆ·å­˜æ¡£ä¸­å–å‡ºå¯¹è±¡æ—¶ï¼Œåº•å±‚ä¼˜å…ˆä»ç¼“å­˜ä¸­è¯»å–ï¼Œé¿å…è¯»æ—¶IOï¼Œä½¿ç”¨æ—¶æ— éœ€å…³æ³¨ã€‚</p>
<h3 data-id="heading-71">åºåˆ—åŒ–å­—å…¸ï¼Œvectorï¼Œcolor</h3>
<p>æ¡†æ¶æä¾›äº†å­—å…¸çš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ–¹æ³•ä»¥è¿›è¡Œå­˜æ¡£ï¼Œç»™å­—å…¸åŒ…äº†ä¸€å±‚å£³ï¼Œåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶è‡ªåŠ¨æ‹†åˆ†æˆListå­˜å‚¨ã€ç»„åˆæˆDictionaryä½¿ç”¨ã€‚åŒæ—¶å°†Colorï¼Œvector2ï¼Œvector3å•ç‹¬å°è£…æˆç»“æ„ä½“è¿›è¡Œå­˜å‚¨ï¼Œèˆå¼ƒæ‰Unityæ•°æ®ç±»å‹ä¸­è‡ªå¸¦çš„é¢å¤–æ–¹æ³•å’Œå±æ€§ï¼Œåªä¿ç•™rgbaå’Œxyzåæ ‡ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">//API</span>
Vector3 <span class="hljs-punctuation">-&gt;</span> Serialized_Vector3
Vector2 <span class="hljs-punctuation">-&gt;</span> Serialized_Vector2
Color <span class="hljs-punctuation">-&gt;</span> Serialized_Color
Dictionary<span class="hljs-punctuation">-&gt;</span>Serialized_Dic
</code></pre>
<p>åœ¨ä½¿ç”¨æ—¶ï¼Œå°†åŸå…ˆå®šä¹‰å­—å…¸ç­‰æ•°æ®çš„è¯­å¥å…³é”®å­—è¿›è¡Œæ›¿æ¢å³å¯ï¼Œæ¡†æ¶é‡è½½äº†èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ„é€ å‡½æ•°ä»¥åŠç±»å‹è½¬æ¢æ–¹æ³•ï¼Œä½¿å¾—åºåˆ—åŒ–çš„æ•°æ®ç±»å‹å¯ä»¥è‡ªåŠ¨è·ŸåŸç”Ÿçš„Vector2ï¼ŒVector3ï¼ŒVector2Intï¼ŒVector3Intï¼ŒColoräº’è½¬ï¼Œåœ¨ä½¿ç”¨ä½“éªŒä¸Šä¸åŸç”Ÿçš„å…³é”®è¯æ— å¼‚ã€‚</p>
<h2 data-id="heading-72">UIæ¡†æ¶</h2>
<p>UIæ¡†æ¶å®ç°å¯¹çª—å£çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå±‚çº§é®ç½©ç®¡ç†ï¼ŒæŒ‰é”®ç‰©ç†å“åº”ç­‰åŠŸèƒ½ï¼Œå¯¹å¤–æä¾›çª—å£çš„æ‰“å¼€ã€å…³é—­ã€çª—å£å¤ç”¨APIï¼Œå¯¹å†…ä¼˜åŒ–å¥½çª—å£çš„ç¼“å­˜ã€å±‚çº§é—®é¢˜ï¼Œèƒ½å¤Ÿå’Œåœºæ™¯åŠ è½½ã€äº‹ä»¶ç³»ç»Ÿè”åŠ¨ï¼Œå°†Modelã€Viewã€Controllerå®Œå…¨è§£è€¦ã€‚é€šè¿‡ä¸é…ç½®ç³»ç»Ÿã€è„šæœ¬å¯è§†åŒ–åˆä½œï¼Œå®ç°æ–°UIçª—å£å¯¹è±¡çš„å¿«é€Ÿå¼€å‘å’Œå·²æœ‰UIçª—å£çš„æ–¹ä¾¿æ¥å…¥ã€‚</p>
<h3 data-id="heading-73">æ•°æ®ç»“æ„</h3>
<p>è™½ç„¶æœ¬æ–‡æ¡£ä½¿ç”¨æ‰‹å†Œï¼Œä½†ä¸ºäº†ä¾¿äºä¸Šæ‰‹ç†è§£ï¼Œç®€å•å¯¹UIæ¡†æ¶çš„æ•°æ®ç»“æ„è¿›è¡Œè§£é‡Šã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-comment">//UIçª—å£æ•°æ®å­—å…¸</span>
    Dictionary&lt;<span class="hljs-built_in">string</span>, UIWindowData&gt; UIWindowDataDic;


    <span class="hljs-comment">//UIçª—å£æ•°æ®ç±»</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIWindowData</span>
 Â   {
 Â  Â  Â   [<span class="hljs-meta">LabelText(<span class="hljs-string">"æ˜¯å¦éœ€è¦ç¼“å­˜"</span>)</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> isCache;
 Â  Â  Â   [<span class="hljs-meta">LabelText(<span class="hljs-string">"é¢„åˆ¶ä½“Pathæˆ–AssetKey"</span>)</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> assetPath;
 Â  Â  Â   [<span class="hljs-meta">LabelText(<span class="hljs-string">"UIå±‚çº§"</span>)</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> layerNum;
 Â  Â  Â  Â <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
 Â  Â  Â  Â <span class="hljs-comment"><span class="hljs-doctag">///</span> è¿™ä¸ªå…ƒç´ çš„çª—å£å¯¹è±¡</span>
 Â  Â  Â  Â <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
 Â  Â  Â   [<span class="hljs-meta">LabelText(<span class="hljs-string">"çª—å£å®ä¾‹"</span>)</span>] <span class="hljs-keyword">public</span> UI_WindowBase instance;


 Â  Â  Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UIWindowData</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> isCache, <span class="hljs-built_in">string</span> assetPath, <span class="hljs-built_in">int</span> layerNum</span>)</span>
 Â  Â  Â   {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.isCache = isCache;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.assetPath = assetPath;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.layerNum = layerNum;
 Â  Â  Â  Â  Â  Â instance = <span class="hljs-literal">null</span>;
 Â  Â  Â   }
 Â   }
</code></pre>
<p>UIæ¡†æ¶çš„æ ¸å¿ƒåœ¨äºç»´æŠ¤å­—å…¸UIWindowDataDicï¼Œé€šè¿‡windowKeyç´¢å¼•äº†ä¸åŒçš„UIçª—å£æ•°æ®UiWindowDataï¼Œå…¶ä¸­åŒ…å«äº†çª—å£æ˜¯å¦è¦ç¼“å­˜ï¼Œèµ„æºè·¯å¾„ï¼ŒUIå±‚çº§ï¼Œä»¥åŠçª—å£ç±»å®ä¾‹ï¼ˆè„šæœ¬ä½œä¸ºçª—å£å¯¹è±¡çš„ç»„ä»¶ï¼ŒæŒæœ‰ä»–å°±ç›¸å½“äºæŒæœ‰äº†çª—å£gameObjectï¼‰ï¼ŒUIWindowDataå¯ä»¥é€šè¿‡è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ä¹Ÿå¯ä»¥åœ¨Editoræ—¶é€šè¿‡ç‰¹æ€§é™æ€åŠ è½½ï¼Œè®¾è®¡windowKeyçš„åŸå› æ˜¯å¦‚æœä¸é¢å¤–æ ‡å®šwindowKeyç›´æ¥ç”¨èµ„æºè·¯å¾„ä½œä¸ºç´¢å¼•ï¼Œåˆ™åŒä¸€ä¸ªçª—å£èµ„æºæ— æ³•å¤ç”¨ï¼Œæ¢å¥è¯è¯´ï¼ŒåŒä¸€ä¸ªUIçª—å£æ¸¸æˆå¯¹è±¡åŠçª—å£ç±»ï¼Œé€šè¿‡ä¸åŒçš„windowKeyå’Œå®ä¾‹å¯ä»¥è¿›è¡Œé‡ç”¨ã€‚</p>
<h3 data-id="heading-74">UIçª—å£å¯¹è±¡åŠç±»é…ç½®</h3>
<p>ä½¿ç”¨UIæ¡†æ¶éœ€è¦å…ˆä¸ºUIçª—å£æ¸¸æˆå¯¹è±¡æ·»åŠ æ§åˆ¶ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªUI_WindowBase,å¹¶å°†UIçª—å£æ¸¸æˆå¯¹è±¡åŠ å…¥Addressableåˆ—è¡¨/Resourcesæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<h3 data-id="heading-75">UIçª—å£ç‰¹æ€§-Editoré™æ€åŠ è½½</h3>
<p>å¯ä»¥é€‰æ‹©ä¸ºUIçª—å£ç±»æ‰“ä¸ŠUIWindowDataç‰¹æ€§ï¼ˆAttributeå¯çœç•¥ï¼‰ç”¨äºé…ç½®æ•°æ®ã€‚<br/>
â€‹<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c86b28037904f318f29cc1edcf6c9a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=bOCfAd7i3%2FPTvBshU9yShSN9s6o%3D" alt="alt" loading="lazy"/>â€‹</p>
<pre><code class="hljs language-go" lang="go">UIWindowDataAttribute(<span class="hljs-type">string</span> windowKey, <span class="hljs-type">bool</span> isCache, <span class="hljs-type">string</span> assetPath, <span class="hljs-type">int</span> layerNum){}
UIWindowDataAttribute(Type <span class="hljs-keyword">type</span>,<span class="hljs-type">bool</span> isCache, <span class="hljs-type">string</span> assetPath, <span class="hljs-type">int</span> layerNum){}
</code></pre>
<ul>
<li>ç‰¹æ€§ä¸­windowKeyæ˜¯UIçª—å£çš„åå­—å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥ç›´æ¥ä¼ stringä¹Ÿå¯ä»¥ä¼ Typeä½¿ç”¨å…¶FullNameã€‚</li>
<li>isCacheæŒ‡æ˜UIçª—å£æ¸¸æˆå¯¹è±¡æ˜¯å¦éœ€è¦ç¼“å­˜é‡ç”¨ï¼Œtrueåˆ™åœ¨çª—å£å…³é—­æ—¶ä¸ä¼šè¢«é”€æ¯ï¼Œä¸‹æ¬¡ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡windowKeyè°ƒç”¨ä¸”ä¸éœ€è¦å®ä¾‹åŒ–ã€‚</li>
<li>assetPathæ˜¯èµ„æºçš„è·¯å¾„ï¼Œåœ¨Resourcesä¸­æ˜¯UIçª—å£å¯¹è±¡åœ¨Resourcesæ–‡ä»¶å¤¹ä¸‹çš„è·¯å¾„ï¼ŒAddressableä¸­æ˜¯UIçª—å£å¯¹è±¡çš„Addressable Nameã€‚</li>
<li>layerNumæ˜¯UIçª—å£å¯¹è±¡çš„å±‚çº§ï¼Œä»0å¼€å§‹ï¼Œè¶Šå¤§åˆ™è¶Šæ¥è¿‘é¡¶å±‚ã€‚</li>
<li>æ”¯æŒä¸€ä¸ªçª—å£ç±»å¤šç‰¹æ€§ï¼Œå¤ç”¨åŒä¸€ä»½çª—å£ç±»èµ„æºï¼Œnä¸ªç‰¹æ€§ï¼Œåˆ™æœ‰nä»½UIçª—å£æ•°æ®ï¼Œæœ¬è´¨ä¸Šå¯¹åº”äº†å¤šä¸ªwindowKeyï¼Œå› æ­¤windowKeyå¿…é¡»ä¸åŒã€‚</li>
</ul>
<p>ç»è¿‡é…ç½®åï¼Œåœ¨Editoræ¨¡å¼ä¸‹è¯¥UIç±»ç‰¹æ€§æ•°æ®åŠUIçª—å£æ¸¸æˆå¯¹è±¡ï¼ˆæ­¤æ—¶è¿˜æ²¡æœ‰å®ä¾‹åŒ–ä¸ºç©ºï¼‰ä¼šè‡ªåŠ¨ä¿å­˜åˆ°GameRootçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå³é™æ€åŠ è½½ã€‚</p>
<h3 data-id="heading-76">UIçª—å£è¿è¡Œæ—¶åŠ¨æ€åŠ è½½</h3>
<p>åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½UIçª—å£ï¼Œä¸éœ€è¦ç»™çª—å£ç±»æ‰“ç‰¹æ€§ï¼Œçª—å£æ•°æ®ç›´æ¥ç»™å‡ºï¼Œä¸Onshow/OnCloseä¸åŒï¼Œå…¶ä¸åŒ…å«çª—å£æ¸¸æˆç‰©ä½“å¯¹è±¡çš„æ˜¾ç¤º/éšè—/é”€æ¯é€»è¾‘ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(string windowKey, UIWindowData windowData, bool instantiateAtOnce = false)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>(windowKey, windowData, instantiateAtOnce);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>(windowKey, windowData, instantiateAtOnce);
<span class="hljs-comment">//(Type type, UIWindowData windowData, bool instantiateAtOnce = false)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>(type, windowData, instantiateAtOnce);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>(type, windowData);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>&lt;<span class="hljs-type">T</span>&gt;(windowData, instantiateAtOnce);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>&lt;<span class="hljs-type">T</span>&gt;(windowData);


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">AddUIWindowData</span>(<span class="hljs-string">"Test1"</span>, new <span class="hljs-type">UIWindowData</span>(<span class="hljs-literal">true</span>, <span class="hljs-string">"TestWindow"</span>, <span class="hljs-number">1</span>));
<span class="hljs-comment">//ä¸Šä¸€æ­¥åªæ·»åŠ äº†æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨é¢æ¿ä¸Šè¿˜éœ€è¦æ¿€æ´»</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">TestWindow</span>&gt;(<span class="hljs-string">"Test1"</span>);
</code></pre>
<ul>
<li>é€šè¿‡æ³›å‹TæŒ‡å®šUIçª—å£å­ç±»ç±»å‹ï¼ŒwindowKeyä¸ºUIçª—å£ç±»çš„ç´¢å¼•ï¼Œå¯¹åº”UIWindowDataä¸­çš„windowKeyï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨Tçš„ç±»å‹åä½œä¸ºç´¢å¼•ã€‚</li>
<li>instantiateAtOnceæŒ‡æ˜çª—å£å¯¹è±¡åŠå…¶ç±»æ˜¯å¦è¦è¿›è¡Œå®ä¾‹åŒ–ï¼Œé»˜è®¤ä¸ºnullï¼Œä¼šåœ¨çª—å£æ‰“å¼€æ—¶åŠ è½½èµ„æºè¿›è¡Œå®ä¾‹åŒ–ä¸”è®¾ç½®ä¸ºä¸æ¿€æ´»ï¼Œè‹¥çª—å£èµ„æºè¾ƒå¤§ï¼Œå¯ä»¥æå‰åœ¨åŠ¨æ€åŠ è½½æ—¶å°±è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¦‚å›¾ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06a22898ef064ab0a2598e4775be4864~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=5uAP%2FtuM1G5QJ6GmnZ7GqFjFp0U%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-77">UIçª—å£æ•°æ®ç®¡ç†</h3>
<p>è·å–UIçª—å£æ•°æ®ï¼Œå…¶ä¸­åŒ…å«UIçš„windowKeyï¼Œå±‚çº§ï¼Œèµ„æºè·¯å¾„ï¼Œä»¥åŠå¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//è·å–UIçª—å£æ•°æ®</span>
<span class="hljs-comment">//(string windowKey) (Type windowType)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetUIWindowData</span>(windowKey);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetUIWindowData</span>&lt;<span class="hljs-type">T</span>&gt;();
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetUIWindowData</span>(windowType);
<span class="hljs-comment">//å°è¯•è·å–UIçª—å£æ•°æ®ï¼Œè¿”å›bool</span>
<span class="hljs-comment">//(string windowKey, out UIWindowData windowData</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">TryGetUIWindowData</span>(windowKey, windowData);
<span class="hljs-comment">//ç§»é™¤æŸæ¡UIçª—å£æ•°æ®</span>
<span class="hljs-comment">//(string windowKey, bool destoryWidnow = false)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">RemoveUIWindowData</span>(windowKey, destoryWidnow);
<span class="hljs-comment">//æ¸…é™¤æ‰€æœ‰UIçª—å£æ•°æ®</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">ClearUIWindowData</span>();


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-comment">//è·å–testWindowçš„å±‚çº§</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetUIWindowData</span>&lt;testWindow&gt;().layerNum;
</code></pre>
<ul>
<li>é€šè¿‡windowKey/æ³›å‹ç±»å‹å/çª—å£å¯¹è±¡ç±»å‹ä¼ ç´¢å¼•ã€‚</li>
<li>æ”¯æŒTryæ–¹å¼è·å–çª—å£æ•°æ®ï¼ŒæˆåŠŸè¿”å›trueå¹¶å°†æ•°æ®èµ‹ç»™è¾“å‡ºå‚æ•°ã€‚</li>
<li>ç§»é™¤UIçª—å£æ•°æ®,å·²å­˜åœ¨çš„çª—å£å¯¹è±¡å®ä¾‹ä¼šè¢«å¼ºè¡Œåˆ é™¤ã€‚</li>
</ul>
<h3 data-id="heading-78">UIçª—å£å¯¹è±¡ç®¡ç†</h3>
<p>è¿™é‡Œçš„UIçª—å£å¯¹è±¡åªUIçª—å£æ•°æ®UIWIndowDataæŒæœ‰çš„é‚£ä¸€ä»½çª—å£è„šæœ¬å¯¹è±¡å®ä¾‹ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç”±æ¡†æ¶ç®¡ç†ï¼Œæ•´ä½“åˆ†ä¸ºæ‰“å¼€å’Œå…³é—­ã€‚</p>
<h4 data-id="heading-79">UIçª—å£æ‰“å¼€</h4>
<p>åŠ è½½UIçª—å£å¯¹è±¡å¹¶æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//è¿”å›å€¼ä¸ºUIçª—å£ç±»Tï¼ŒTå—æ³›å‹çº¦æŸå¿…é¡»ä¸ºUIçª—å£åŸºç±»å­ç±»</span>
<span class="hljs-comment">//(string windowKey, int layer = -1)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">T</span>&gt;(windowKey, layer);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">T</span>&gt;(windowKey);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">T</span>&gt;(layer);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">T</span>&gt;();
<span class="hljs-comment">//è¿”å›å€¼ä¸ºUI_WindowBaseç±»ï¼Œå¯¹åº”ä¸èƒ½ç¡®å®šçª—å£ç±»å‹çš„æƒ…å†µ, xxæ˜¯çª—å£ç±»çš„å¯¹è±¡</span>
<span class="hljs-comment">//(Type type, int layer = -1)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>(xx.getType(), layer);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>(xx.getType());
<span class="hljs-comment">//(string windowKey, int layer = -1)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>(windowKey, layer);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>(windowKey);


<span class="hljs-comment">//ç®€å•å®ä¾‹ï¼Œæ‰“å¼€çª—å£UI_WindowTestå¹¶ç½®äºç¬¬ä¸‰å±‚</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Show</span>&lt;<span class="hljs-type">UI_WindowTest</span>&gt;(<span class="hljs-number">2</span>);
</code></pre>
<ul>
<li>é€šè¿‡æ³›å‹TæŒ‡å®šUIçª—å£å­ç±»ç±»å‹ï¼ŒwindowKeyä¸ºUIçª—å£ç±»çš„ç´¢å¼•ï¼Œå¯¹åº”UIWindowDataä¸­çš„windowKeyï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨Tçš„ç±»å‹åä½œä¸ºç´¢å¼•ï¼Œlayerä»£è¡¨UIçš„å±‚çº§ï¼Œä¸å¡«åˆ™é»˜è®¤-1è¡¨ç¤ºä½¿ç”¨æ•°æ®ä¸­åŸæœ‰çš„å±‚çº§ï¼ˆé€šè¿‡é™æ€é…ç½®æˆ–è€…åŠ¨æ€åŠ è½½æŒ‡å®šï¼‰ã€‚</li>
<li>åœ¨æ˜ç¡®UIçª—å£ç±»å‹çš„æ—¶å€™å¯ä»¥ç›´æ¥é€šè¿‡æ³›å‹TæŒ‡å®šï¼Œä¸æ˜ç¡®åˆ™å¯ä»¥é€šè¿‡ä¼ å¯¹è±¡åå°„æ¥è·å–ç±»å‹ã€‚</li>
<li>ç®€å•è§£é‡Šé€»è¾‘ä¸ºæ ¹æ®windowKeyæ‰¾åˆ°å¯¹åº”çš„çª—å£æ•°æ®UIWindowDataï¼Œæ ¹æ®æ•°æ®ä¸­çš„assetPathåŠ è½½UIçª—å£å¯¹è±¡å¹¶æ ¹æ®Tè¿”å›çª—å£ç±»ï¼Œæ— Tåˆ™è¿”å›UI_WindowBaseç±»ã€‚</li>
</ul>
<p>ç”±äºUIçª—å£ç±»ç»§æ‰¿äº†UIWIndowBaseï¼Œå…¶ä¸­æä¾›äº†ä¸€äº›å¯ä¾›é‡å†™çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹***åœ¨UIçª—å£æ‰“å¼€æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-comment">//åˆå§‹åŒ–ç›¸å…³æ–¹æ³•ï¼Œåªæœ‰åœ¨çª—å£ç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶æ‰§è¡Œ</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.Init();
 Â   }


    <span class="hljs-comment">//çª—å£æ¯æ¬¡æ‰“å¼€æ—¶æ‰§è¡Œï¼Œå¯ç”¨äºæ•°åˆå§‹åŒ–ï¼Œå¹¶ä¼šè‡ªåŠ¨è°ƒç”¨äº‹ä»¶ç›‘å¬æ³¨å†Œæ–¹æ³•</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnShow</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.OnShow();
 Â   }
    <span class="hljs-comment">//äº‹ä»¶ç›‘å¬æ³¨å†Œ</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RegisterEventListener</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.RegisterEventListener();
 Â   }
</code></pre>
<h4 data-id="heading-80">UIçª—å£å…³é—­</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(Type type) (string windowKey)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Close</span>&lt;<span class="hljs-type">T</span>&gt;();
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Close</span>(type);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Close</span>(windowKey);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">TryClose</span>(windowKey);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">CloseAllWindow</span>();


<span class="hljs-comment">//ç®€å•å®ä¾‹ï¼Œå…³é—­çª—å£UI_WindowTest</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">Close</span>&lt;<span class="hljs-type">UI_WindowTest</span>&gt;();
</code></pre>
<ul>
<li>ç›¸æ¯”æ‰“å¼€ï¼Œå…³é—­ä¸éœ€è¦è¿”å›å€¼ä¹Ÿä¸éœ€è¦ç®¡ç†å±‚çº§ï¼Œé€šè¿‡T/Type/windowKeyä¼ å…¥çª—å£çš„ç´¢å¼•å³å¯ã€‚</li>
<li>
<ul>
<li>TryClose APIåœ¨é‡åˆ°çª—å£å·²å…³é—­æˆ–ä¸å­˜åœ¨æ—¶å¹¶ä¸ä¼šwarningï¼Œè€Œå…¶ä»–APIä¼šæŠ¥warningã€‚</li>
</ul>
</li>
</ul>
<p>ç”±äºUIçª—å£ç±»ç»§æ‰¿äº†UIWIndowBaseï¼Œå…¶ä¸­æä¾›äº†ä¸€äº›å¯ä¾›é‡å†™çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨UIçª—å£å…³é—­æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-comment">//çª—å£æ¯æ¬¡å…³é—­æ—¶æ‰§è¡Œï¼Œä¼šåŠ¨è°ƒç”¨äº‹ä»¶ç›‘å¬æ³¨é”€æ–¹æ³•</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnClose</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.OnClose();
 Â   }


    <span class="hljs-comment">//äº‹ä»¶ç›‘å¬æ³¨é”€</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RegisterEventListener</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.RegisterEventListener();
 Â   }
</code></pre>
<h4 data-id="heading-81">è·å–/é”€æ¯UIçª—å£å¯¹è±¡</h4>
<p>è·å–/é”€æ¯UIWindowDataæŒæœ‰çš„UIçª—å£å¯¹è±¡å®ä¾‹ï¼Œä¸Onshow/OnCloseä¸åŒï¼Œå…¶åªè·å–å®ä¾‹ï¼Œä¸åŒ…å«çª—å£æ¸¸æˆç‰©ä½“å¯¹è±¡çš„æ˜¾ç¤º/éšè—/é”€æ¯é€»è¾‘ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//è¿”å›å€¼ä¸ºUIçª—å£ç±»Tï¼ŒTå—æ³›å‹çº¦æŸå¿…é¡»ä¸ºUIçª—å£åŸºç±»å­ç±»</span>
<span class="hljs-comment">//(string windowKey)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetWindow</span>&lt;<span class="hljs-type">T</span>&gt;(windowKey);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetWindow</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-type">Type</span> windowType);
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetWindow</span>&lt;<span class="hljs-type">T</span>&gt;();
<span class="hljs-comment">//è¿”å›å€¼ä¸ºUI_WindowBaseç±»ï¼Œå¯¹åº”ä¸èƒ½ç¡®å®šçª—å£ç±»å‹çš„æƒ…å†µ</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">GetWindow</span>(windowKey);
<span class="hljs-comment">//è¿”å›å€¼ä¸ºbool,è¡¨ç¤ºçª—å£å¯¹æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-comment">//(string windowKey, out T window)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">TryGetWindow</span>(windowKey, window);
<span class="hljs-comment">//(string windowKey, out T window)</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">TryGetWindow</span>&lt;<span class="hljs-type">T</span>&gt;(windowKey, window);
<span class="hljs-comment">//é”€æ¯çª—å£å¯¹è±¡</span>
<span class="hljs-type">UISystem</span>.<span class="hljs-type">DestroyWindow</span>(windowKey);


<span class="hljs-comment">//ç®€å•å®ä¾‹ï¼Œè·å–TestWindowä¸Šçš„UI Textç»„ä»¶Name</span>
<span class="hljs-type">Text</span> name <span class="hljs-operator">=</span> <span class="hljs-type">UISystem</span>.<span class="hljs-type">GetWindow</span>&lt;<span class="hljs-type">TestWindow</span>&gt;().<span class="hljs-type">Name</span>;
</code></pre>
<ul>
<li>é€šè¿‡windowKey/type Name/Tç±»å‹åæŸ¥æ‰¾çª—å£å¯¹è±¡ã€‚</li>
<li>æ”¯æŒTryæ–¹å¼ï¼ŒæŸ¥è¯¢æˆåŠŸåˆ™å¯¹è±¡ä¼ é€’åˆ°è¾“å‡ºå‚æ•°outä¸Šï¼Œå¹¶è¿”å›boolä¸ºtrueï¼Œå¦åˆ™è¾“å‡ºå‚æ•°ä¸ºnullå¹¶è¿”å›falseã€‚</li>
<li>é”€æ¯çª—å£å¯¹è±¡APIä¼šç›´æ¥é”€æ¯æ¸¸æˆå†…çš„çª—å£gameObjectã€æ§åˆ¶ç±»ï¼Œä½†UIWindowDataè¿˜å­˜åœ¨ã€‚</li>
</ul>
<h3 data-id="heading-82">UIå±‚çº§ç®¡ç†</h3>
<p>æ¡†æ¶å†…éƒ¨å®ç°äº†å¯¹UIçš„å±‚çº§ç®¡ç†ï¼Œå¯ä»¥åœ¨é¢æ¿çš„UISystemä¸Šæ¯ä¸€å±‚æ˜¯å¦å¯ç”¨é®ç½©ï¼Œé»˜è®¤æ¯ä¸€å±‚UIæ˜¯å±‚å±‚å †å è¦†ç›–çš„ï¼Œä¸€æ—¦æŸä¸€å±‚ä¸­æœ‰UIçª—å£å¯¹è±¡ï¼Œåˆ™å±‚çº§æ¯”å®ƒä½çš„å±‚çº§éƒ½ä¸å¯ä»¥äº¤äº’ï¼ŒåŒä¸€å±‚çº§ä¸­æ¯”å®ƒæ—©æ‰“å¼€çš„UIçª—å£ä¸å¯ä»¥äº¤äº’ï¼ˆä¿è¯æ¯ä¸€å±‚å†…æœ€é¡¶å±‚åªæœ‰ä¸€ä¸ªçª—å£ï¼‰ï¼Œå¯ä»¥å‹¾é€‰ä¸å¯ç”¨é®ç½©ï¼Œåˆ™è¿™ä¸€å±‚å±‚å†…å’Œå±‚å¤–éƒ½ä¸å­˜åœ¨é®ç½©å…³ç³»ã€‚</p>
<p>å¯ç”¨é®ç½©å¦‚ä¸‹å›¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5ca4656bb6c4fe2bf11e88d72afd149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=iBaEFmZck5f0KakQNDbmgsvgMN0%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>Maskä¿è¯äº†æ¯ä¸€å±‚å†…æœ€é¡¶å±‚åªæœ‰ä¸€ä¸ªçª—å£è¿›è¡Œäº¤äº’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1444d6d5f24b4c2dbbe44406b1f8471c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=iBK2C2TNFa7N9BRKwkdET7%2Fhjas%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å¦å¤–æ¡†æ¶å•ç‹¬æä¾›äº†æœ€é¡¶å±‚dragLayerï¼Œç”¨äºæ‹–æ‹½æ—¶ä¸´æ—¶éœ€è¦æŠŠæŸä¸ªUIçª—å£ç½®äºæœ€ä¸Šå±‚ï¼Œå¯ä»¥é€šè¿‡UISystem.dragLayerè·å–ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">UISystem.dragLayer<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-83">UI Tips</h3>
<p>å¼¹çª—å·¥å…·ã€‚</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">//API</span>
<span class="hljs-comment">// åœ¨çª—å£å³ä¸‹è§’å¼¹å‡ºå­—ç¬¦ä¸²tipsæé†’ã€‚</span>
<span class="hljs-comment">//(string tips)</span>
<span class="hljs-built_in">UISystem</span>.AddTips(tips)
</code></pre>
<h3 data-id="heading-84">åˆ¤æ–­é¼ æ ‡æ˜¯å¦åœ¨UIä¸Š</h3>
<p>è¿”å›å½“å‰é¼ æ ‡ä½ç½®æ˜¯å¦åœ¨UIä¸Šï¼Œï¼ˆç”¨äºæ›¿æ¢EventSystem.current.IsPointerOverGameObject()ï¼Œé¿å…å½“å‰çª—å£å› å¯ç”¨äº¤äº’æˆ–åŒæ—¶éœ€è¦è€ƒè™‘å¤šå±‚UIçš„å±‚çº§å…³ç³»ï¼Œè€Œå¯ç”¨è¦†ç›–å…¨å±å¹•çš„é®ç½©Maskçš„RaycastTaretï¼Œä½¿å¾—é¼ æ ‡å¤„äºUIçª—å£å¤–æ—¶ï¼ŒUnity APIä¸€ç›´é”™è¯¯çš„è¿”å›åœ¨UIä¸Šï¼‰ã€‚</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">//bool</span>
<span class="hljs-built_in">UISystem</span>.CheckMouseOnUI();
</code></pre>
<h2 data-id="heading-85">æ—¥å¿—ç³»ç»Ÿ</h2>
<p>æ—¥å¿—ç³»ç»Ÿç”¨äºåœ¨æ§åˆ¶å°è¾“å‡ºLogã€Successã€Errorã€Warningçš„æç¤ºä¿¡æ¯ï¼ˆç”¨ç™½è‰²ã€ç»¿è‰²ã€çº¢è‰²ã€é»„è‰²åŠ ä»¥åŒºåˆ†ï¼‰ï¼Œå¹¶å¯ä»¥è¿›è¡Œæœ¬åœ°è‡ªå®šä¹‰å‘½åä¿å­˜ï¼Œå¯ä»¥åœ¨é¢æ¿ä¸Šå‹¾é€‰æ˜¯å¦å¯ç”¨æ—¥å¿—è¾“å‡ºã€å†™å…¥æ—¶é—´ï¼ˆæ¯«ç§’çº§å®šä½ï¼‰ã€çº¿ç¨‹IDã€å †æ ˆ(å®šä½æç¤ºä»£ç è¡Œ)ã€æœ¬åœ°ä¿å­˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9df5536ba56846b3bd9b928113195bd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=9Ii1ldyYje2ocQSbRyMeViTlbzM%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>ä¿ç•™Unityæç¤ºè‡ªå¸¦çš„ä»£ç è¿æ¥è·³è½¬åŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7dd67384f634ee086873dc065a67ec7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=iOyemRJT53uLuVS%2Fc1EefNKvang%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>æœ¬åœ°ä¿å­˜çš„æ—¥å¿—å¯ä»¥ç”¨äºåœ¨æ‰“åŒ…åè¿›è¡Œè°ƒè¯•è¾“å‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51121d6f98714a46baf263988dbb2e92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=BYH8nU2G4mDxF1zY2xsVrV55Ths%3D" alt="alt" loading="lazy"/>â€‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//è¾“å‡ºæ—¥å¿—æµ‹è¯•ä¿¡æ¯ï¼Œç­‰åŒäºDebug.Log</span>
<span class="hljs-title class_">JKLog</span>.<span class="hljs-title class_">Log</span>(<span class="hljs-string">"æµ‹è¯•Log"</span>);
<span class="hljs-comment">//è¾“å‡ºWarningç±»å‹çš„æç¤ºä¿¡æ¯</span>
<span class="hljs-title class_">JKLog</span>.<span class="hljs-title class_">Warning</span>(<span class="hljs-string">"æµ‹è¯•Warning"</span>);
<span class="hljs-comment">//è¾“å‡ºErrorç±»å‹çš„æç¤ºä¿¡æ¯</span>
<span class="hljs-title class_">JKLog</span>.<span class="hljs-title class_">Error</span>(<span class="hljs-string">"æµ‹è¯•Error"</span>);
<span class="hljs-comment">//è¾“å‡ºSucceedç±»å‹çš„è¾“å‡ºä¿¡æ¯</span>
<span class="hljs-title class_">JKLog</span>.<span class="hljs-title class_">Succeed</span>(<span class="hljs-string">"æµ‹è¯•Succeed"</span>);
</code></pre>
<ul>
<li>åœ¨æ–¹æ³•å‚æ•°éƒ¨åˆ†ä¼ å…¥è¦è¾“å‡ºçš„å­—ç¬¦ä¸²ä¿¡æ¯å³å¯ã€‚</li>
</ul>
<h2 data-id="heading-86">äº‹ä»¶å·¥å…·</h2>
<p>ç”¨äºç»™æ¸¸æˆå¯¹è±¡å¿«é€Ÿç»‘å®šäº‹ä»¶ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç»™æ¸¸æˆå¯¹è±¡æŒ‚è½½è„šæœ¬ï¼ŒåŠŸèƒ½é€»è¾‘åœ¨å½“å‰è„šæœ¬å®ç°ã€‚ä¸äº‹ä»¶ç³»ç»ŸåŒºåˆ†ï¼šäº‹ä»¶ç³»ç»Ÿé‡ç‚¹åœ¨äºæä¾›äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬æ·»åŠ å’Œäº‹ä»¶è§¦å‘è§£è€¦çš„ä¸­é—´æ¨¡å—ï¼Œä½¿å¾—äº‹ä»¶çš„è§¦å‘æ— éœ€å…³æ³¨ä¾èµ–çš„å¯¹è±¡ï¼Œä½†äº‹ä»¶æ‰§è¡Œçš„åŠŸèƒ½é€»è¾‘è¿˜æ˜¯è¦å®ç°åœ¨å¯¹è±¡æŒ‚è½½çš„è„šæœ¬ä¸Šçš„ã€‚è€Œäº‹ä»¶å·¥å…·é‡ç‚¹åœ¨äºå¿«é€Ÿä¸ºæ¸¸æˆå¯¹è±¡ç»‘å®šå¸¸è§çš„å“åº”äº‹ä»¶ï¼Œè¿™ç±»äº‹ä»¶ä¸ç”±è„šæœ¬è§¦å‘ï¼ˆåç»­æ”¯æŒè‡ªå®šä¹‰è„šæœ¬è§¦å‘æ¡ä»¶ï¼‰ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„æ—¶æœºå¦‚ç¢°æ’ã€é¼ æ ‡ç‚¹å‡»ã€å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è§¦å‘ï¼Œå› æ­¤é‡ç‚¹å…³æ³¨äº‹ä»¶ç›‘å¬æ·»åŠ çš„ç®€åŒ–ï¼Œæ‰€æœ‰é€»è¾‘åœ¨å½“å‰è„šæœ¬å®Œæˆã€‚</p>
<h3 data-id="heading-87">æ¡†æ¶å†…ç½®äº‹ä»¶ç»‘å®šä¸ç§»é™¤</h3>
<h4 data-id="heading-88">é¼ æ ‡ç›¸å…³äº‹ä»¶</h4>
<p>é¼ æ ‡è¿›å…¥ã€é¼ æ ‡ç§»å‡ºã€é¼ æ ‡ç‚¹å‡»ã€é¼ æ ‡æŒ‰ä¸‹ã€é¼ æ ‡æŠ¬èµ·ã€é¼ æ ‡æ‹–æ‹½ã€é¼ æ ‡æ‹–æ‹½å¼€å§‹ã€é¼ æ ‡æ‹–æ‹½ç»“æŸäº‹ä»¶çš„ç»‘å®šä¸ç§»é™¤ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//é¼ æ ‡è¿›å…¥</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnMouseEnter</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnMouseEnter</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnMouseEnter</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnMouseEnter</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡ç§»å‡º</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnMouseExit</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnMouseExit</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnMouseExit</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnMouseExit</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡ç‚¹å‡»</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnClick</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnClick</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnClick</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnClick</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡æŒ‰ä¸‹</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnClickDown</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnClickDown</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnClickDown</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnClickDown</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡æŠ¬èµ·</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnClickUp</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnClickUp</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnClickUp</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnClickUp</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡æ‹–æ‹½</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnDrag</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnDrag</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnDrag</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnDrag</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡æ‹–æ‹½å¼€å§‹</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnBeginDrag</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnBeginDrag</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnBeginDrag</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnBeginDrag</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//é¼ æ ‡æ‹–æ‹½ç»“æŸ</span>
<span class="hljs-comment">//(this Component com, Action&lt;PointerEventData, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnEndDrag</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnEndDrag</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnEndDrag</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnEndDrag</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attribute">Transform</span> cube;
void <span class="hljs-built_in">Start</span>()
{
    cube<span class="hljs-selector-class">.OnClick</span>&lt;int&gt;(Test1,<span class="hljs-number">1</span>);
}
private void <span class="hljs-built_in">Test1</span>(PointerEventData arg1, int arg2)
{
    Debug<span class="hljs-selector-class">.Log</span>(<span class="hljs-number">1</span>);
 Â  Â cube<span class="hljs-selector-class">.RemoveOnClick</span>&lt;int&gt;(Test1);
}
</code></pre>
<ul>
<li>xxä¸ºç»‘å®šäº‹ä»¶çš„å¯¹è±¡ç»„ä»¶ï¼Œäº‹ä»¶å·¥å…·åŸºäºæ‹“å±•æ–¹æ³•è°ƒç”¨ï¼Œxxä½¿ç”¨æ¸¸æˆå¯¹è±¡çš„transformå³å¯ã€‚</li>
<li>TEventArgæŒ‡å®šäº‹ä»¶çš„å‚æ•°ç±»å‹ï¼Œæ·»åŠ ç›‘å¬æ—¶å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°argsæ¨æ–­å‡ºï¼Œç§»é™¤ç›‘å¬æ—¶åˆ™å¿…é¡»æ˜¾ç¤ºæŒ‡å‡ºã€‚</li>
<li>actionæ˜¯ç»‘å®šçš„äº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶ç±»å‹ï¼ˆé¼ æ ‡ã€ç¢°æ’ã€è‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œå…¶æ–¹æ³•çš„å‚æ•°åˆ—è¡¨åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯äº‹ä»¶æœ¬èº«çš„å‚æ•°ï¼ˆPointerEventDataã€Collisionï¼‰ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å‚æ•°åˆ—è¡¨TEventArgï¼Œå¯ä»¥é€šè¿‡å€¼å…ƒç»„ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-89">ç¢°æ’ç›¸å…³äº‹ä»¶</h4>
<p>2Dã€3Dç›¸å…³çš„ç¢°æ’äº‹ä»¶ç»‘å®šä¸ç§»é™¤ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//3Dç¢°æ’è¿›å…¥</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionEnter</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionEnter</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionEnter</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionEnter</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//3Dç¢°æ’æŒç»­</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionStay</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionStay</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionStay</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionStay</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//3Dç¢°æ’è„±ç¦»</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionExit</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionExit</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionExit</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionExit</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dç¢°æ’è¿›å…¥</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionEnter2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionEnter2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionEnter2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionEnter2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dç¢°æ’æŒç»­</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionStay2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionStay2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionStay2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionStay2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dç¢°æ’è„±ç¦»</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collision2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnCollisionExit2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnCollisionExit2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnCollisionExit2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnCollisionExit2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>
void <span class="hljs-built_in">Start</span>()
{
    cube<span class="hljs-selector-class">.OnCollisionEnter</span>(Test2, <span class="hljs-number">2</span>);
}


private void <span class="hljs-built_in">Test2</span>(Collision arg1, int arg2)
{
    Debug<span class="hljs-selector-class">.Log</span>(arg2);
    cube<span class="hljs-selector-class">.RemoveOnCollisionEnter</span>&lt;int&gt;(Test2);
}
</code></pre>
<ul>
<li>ç¢°æ’äº‹ä»¶å’Œé¼ æ ‡äº‹ä»¶çš„APIç±»ä¼¼ï¼ŒåŒºåˆ«å‚ä¸actionçš„ç¬¬ä¸€ä¸ªäº‹ä»¶æœ¬èº«å‚æ•°ä¸åŒï¼Œä¸ºCollision/Collision2Dã€‚</li>
<li>xxä¸ºç»‘å®šäº‹ä»¶çš„å¯¹è±¡ç»„ä»¶ï¼Œä½¿ç”¨æ¸¸æˆå¯¹è±¡çš„transformå³å¯ã€‚</li>
<li>TEventArgæŒ‡å®šäº‹ä»¶çš„å‚æ•°ç±»å‹ï¼Œæ·»åŠ ç›‘å¬æ—¶å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°argsæ¨æ–­å‡ºï¼Œç§»é™¤ç›‘å¬æ—¶åˆ™å¿…é¡»æ˜¾ç¤ºæŒ‡å‡ºã€‚</li>
<li>actionæ˜¯ç»‘å®šçš„äº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶ç±»å‹ï¼ˆé¼ æ ‡ã€ç¢°æ’ã€è‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œå…¶æ–¹æ³•çš„å‚æ•°åˆ—è¡¨åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯äº‹ä»¶æœ¬èº«çš„å‚æ•°ï¼ˆPointerEventDataã€Collisionï¼‰ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å‚æ•°åˆ—è¡¨TEventArgï¼Œå¯ä»¥é€šè¿‡å€¼å…ƒç»„ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-90">è§¦å‘ç›¸å…³äº‹ä»¶</h4>
<p>2Dã€3Dç›¸å…³çš„è§¦å‘äº‹ä»¶ç»‘å®šã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//3Dè§¦å‘è¿›å…¥</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerEnter</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerEnter</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerEnter</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerEnter</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//3Dè§¦å‘æŒç»­</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerStay</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerStay</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerStay</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerStay</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//3Dè§¦å‘è„±ç¦»</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerExit</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerExit</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerExit</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerExit</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dè§¦å‘è¿›å…¥</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerEnter2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerEnter2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerEnter2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerEnter2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dç¢°æ’æŒç»­</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerStay2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerStay2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerStay2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerStay2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//2Dè§¦å‘è„±ç¦»</span>
<span class="hljs-comment">//(this Component com, Action&lt;Collider2D, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnTriggerExit2D</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnTriggerExit2D</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnTriggerExit2D</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnTriggerExit2D</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//ç®€å•ç¤ºä¾‹</span>


void <span class="hljs-built_in">Start</span>()
{
    cube<span class="hljs-selector-class">.OnTriggerEnter</span>(Test3, <span class="hljs-number">2</span>);
}


private void <span class="hljs-built_in">Test3</span>(Collider arg1, int arg3)
{
    Debug<span class="hljs-selector-class">.Log</span>(arg3);
    cube<span class="hljs-selector-class">.RemoveOnTriggerEnter</span>&lt;int&gt;(Test3);
}
</code></pre>
<ul>
<li>è§¦å‘äº‹ä»¶å’Œç¢°æ’äº‹ä»¶çš„APIç±»ä¼¼ï¼ŒåŒºåˆ«å‚ä¸actionçš„ç¬¬ä¸€ä¸ªäº‹ä»¶æœ¬èº«å‚æ•°ä¸åŒï¼Œä¸ºCollider/Collider2Dã€‚</li>
<li>xxä¸ºç»‘å®šäº‹ä»¶çš„å¯¹è±¡ç»„ä»¶ï¼Œä½¿ç”¨æ¸¸æˆå¯¹è±¡çš„transformå³å¯ã€‚</li>
<li>TEventArgæŒ‡å®šäº‹ä»¶çš„å‚æ•°ç±»å‹ï¼Œæ·»åŠ ç›‘å¬æ—¶å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°argsæ¨æ–­å‡ºï¼Œç§»é™¤ç›‘å¬æ—¶åˆ™å¿…é¡»æ˜¾ç¤ºæŒ‡å‡ºã€‚</li>
<li>actionæ˜¯ç»‘å®šçš„äº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶ç±»å‹ï¼ˆé¼ æ ‡ã€ç¢°æ’ã€è‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œå…¶æ–¹æ³•çš„å‚æ•°åˆ—è¡¨åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯äº‹ä»¶æœ¬èº«çš„å‚æ•°ï¼ˆPointerEventDataã€Collisionï¼‰ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å‚æ•°åˆ—è¡¨TEventArgï¼Œå¯ä»¥é€šè¿‡å€¼å…ƒç»„ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-91">èµ„æºç›¸å…³äº‹ä»¶</h4>
<p>èµ„æºé‡Šæ”¾ï¼Œå¯¹è±¡é”€æ¯æ—¶ç»‘å®šçš„äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//èµ„æºé‡Šæ”¾ï¼ˆAddressableï¼‰</span>
<span class="hljs-comment">//(this Component com, Action&lt;GameObject, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnReleaseAddressableAsset</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnReleaseAddressableAsset</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnReleaseAddressableAssetOnReleaseAddressableAsset</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnReleaseAddressableAsset</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//å¯¹è±¡é”€æ¯</span>
<span class="hljs-comment">//(this Component com, Action&lt;GameObject, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.OnDestroy</span>&lt;TEventArg&gt;(action, args);
xx<span class="hljs-selector-class">.OnDestroy</span>(action, args); <span class="hljs-comment">//æŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ¨æ–­å‡º</span>
xx<span class="hljs-selector-class">.OnDestroy</span>(action); <span class="hljs-comment">//æ— å‚Action</span>
xx<span class="hljs-selector-class">.RemoveOnDestroy</span>&lt;TEventArg&gt;(action) <span class="hljs-comment">//Removeæ—¶ä¸ä¼ å‚ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¼ ï¼Œæ— æ³•æ¨æ–­</span>


<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
void <span class="hljs-built_in">Start</span>()
{
    cube<span class="hljs-selector-class">.OnDestroy</span>(Test4, <span class="hljs-number">4</span>);
}
private void <span class="hljs-built_in">Test4</span>(GameObject arg1, int arg4)
{
    Debug<span class="hljs-selector-class">.Log</span>(arg4);
    cube<span class="hljs-selector-class">.RemoveOnDestroy</span>&lt;int&gt;(Test4);
}
</code></pre>
<ul>
<li>xxä¸ºç»‘å®šäº‹ä»¶çš„å¯¹è±¡ç»„ä»¶ï¼Œä½¿ç”¨æ¸¸æˆå¯¹è±¡çš„transformå³å¯ã€‚</li>
<li>TEventArgæŒ‡å®šäº‹ä»¶çš„å‚æ•°ç±»å‹ï¼Œæ·»åŠ ç›‘å¬æ—¶å¯ä»¥ä¸å¡«ï¼Œå¯ä»¥é€šè¿‡å‚æ•°argsæ¨æ–­å‡ºï¼Œç§»é™¤ç›‘å¬æ—¶åˆ™å¿…é¡»æ˜¾ç¤ºæŒ‡å‡ºã€‚</li>
<li>actionæ˜¯ç»‘å®šçš„äº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶ç±»å‹ï¼ˆé¼ æ ‡ã€ç¢°æ’ã€è‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼Œå…¶æ–¹æ³•çš„å‚æ•°åˆ—è¡¨åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯äº‹ä»¶æœ¬èº«çš„å‚æ•°ï¼ˆPointerEventDataã€Collisionï¼‰ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å‚æ•°åˆ—è¡¨TEventArgï¼Œå¯ä»¥é€šè¿‡å€¼å…ƒç»„ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚</li>
</ul>
<h4 data-id="heading-92">ç§»é™¤ä¸€ç±»äº‹ä»¶</h4>
<p>ç§»é™¤é¼ æ ‡/ç¢°æ’/è§¦å‘/èµ„æºçš„ä¸€ç±»æ‰€æœ‰äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//int customEventTypeInt, JKEventType eventType</span>
<span class="hljs-built_in">RemoveAllListener</span>(customEventTypeInt);
<span class="hljs-built_in">RemoveAllListener</span>(eventType);
<span class="hljs-built_in">RemoveAllListener</span>();
</code></pre>
<ul>
<li>customEventTypeInt/eventTypeä¸ºäº‹ä»¶çš„ç±»å‹ï¼Œå¯¹åº”ç¢°æ’ã€é¼ æ ‡äº‹ä»¶å¯¹åº”çš„æšä¸¾ç±»å‹æˆ–è‡ªå®šä¹‰äº‹ä»¶çš„ç±»å‹intå€¼ã€‚</li>
<li>ä¸å¡«åˆ™ç§»é™¤æ‰€æœ‰äº‹ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-93">ä½¿ç”¨å€¼å…ƒç»„ä¼ é€’å¤šä¸ªäº‹ä»¶å‚æ•°</h3>
<p>é€šè¿‡ValueTupleå°è£…ä¸€ä¸ªç®€å•çš„å‚æ•°åˆ—è¡¨ç»“æ„ä½“ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"> Â  Â <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span>
 Â   {
 Â  Â  Â  Â cube.OnClick(Test5, (arg1: <span class="hljs-number">2</span>, arg2: <span class="hljs-string">"test"</span>, arg3: <span class="hljs-literal">true</span>));
 Â  Â     <span class="hljs-comment">//ç­‰åŒäºä¸‹ä¸€è¡Œä»£ç ï¼Œä¸Šä¸€è¡Œæ›´ç®€ä¾¿ï¼Œå‚æ•°ç±»å‹å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡º</span>
 Â  Â  Â  Â cube.OnClick(Test5, ValueTuple.Create&lt;<span class="hljs-built_in">int</span>,<span class="hljs-built_in">string</span>,<span class="hljs-built_in">bool</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-string">"test"</span>,<span class="hljs-literal">true</span>));
 Â   }


 Â  Â <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Test5</span>(<span class="hljs-params">PointerEventData arg1, (<span class="hljs-built_in">int</span> arg1, <span class="hljs-built_in">string</span> arg2, <span class="hljs-built_in">bool</span> arg3</span>) args)</span>
 Â   {
 Â  Â  Â  Â Debug.Log(<span class="hljs-string">$"<span class="hljs-subst">{args.arg1}</span>,<span class="hljs-subst">{args.arg2}</span>,<span class="hljs-subst">{args.arg3}</span>"</span>);
 Â  Â  Â  Â cube.RemoveOnClick&lt;(<span class="hljs-built_in">int</span> arg1, <span class="hljs-built_in">string</span> arg2, <span class="hljs-built_in">bool</span> arg3)&gt;(Test5);
 Â   }
</code></pre>
<h3 data-id="heading-94">è‡ªå®šä¹‰äº‹ä»¶ç±»å‹</h3>
<p>ä»¥ä¸Šé¼ æ ‡ã€ç¢°æ’ç­‰äº‹ä»¶çš„è§¦å‘ç”±äº‹ä»¶å·¥å…·ç»“åˆç‰¹å®šçš„æ—¶æœºè‡ªåŠ¨å®Œæˆï¼Œå¦‚æœå¸Œæœ›è‡ªå®šä¹‰äº‹ä»¶çš„è§¦å‘é€»è¾‘ï¼Œåˆ™éœ€è¦æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹,å¯¹åº”åœ¨é€‚åˆçš„åœ°æ–¹è§¦å‘äº‹ä»¶ï¼Œæ­¤æ—¶äº‹ä»¶å·¥å…·çš„ä½œç”¨ä¸äº‹ä»¶ç³»ç»Ÿç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºä¸éœ€è¦ä¸ºå¯¹è±¡æŒ‚è½½è„šæœ¬ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(this Component com, int customEventTypeInt, Action&lt;T, TEventArg&gt; action, TEventArg args = default(TEventArg))</span>
xx<span class="hljs-selector-class">.AddEventListener</span>&lt;T, TEventArg&gt;(customEventTypeInt, action, args);
xx<span class="hljs-selector-class">.RemoveEventListener</span>&lt;T, TEventArg&gt;(customEventTypeInt, action);
cube<span class="hljs-selector-class">.TriggerCustomEvent</span>&lt;<span class="hljs-attribute">Transform</span>&gt;((int)myType<span class="hljs-selector-class">.CustomType</span>, <span class="hljs-attribute">transform</span>);


<span class="hljs-comment">//ä½¿ç”¨ç¤ºä¾‹</span>
 Â  Â void <span class="hljs-built_in">Start</span>()
 Â   {
 Â  Â  Â  Â cube<span class="hljs-selector-class">.AddEventListener</span>&lt;<span class="hljs-attribute">Transform</span>, int&gt;((int)myType<span class="hljs-selector-class">.CustomType</span>, Test6, <span class="hljs-number">1</span>);
 Â   }


 Â  Â private void <span class="hljs-built_in">Test6</span>(Transform arg1, int arg2)
 Â   {
 Â  Â  Â  Â Debug<span class="hljs-selector-class">.Log</span>(arg1.position = Vector3.zero);
 Â  Â  Â  Â cube<span class="hljs-selector-class">.RemoveEventListener</span>&lt;<span class="hljs-attribute">Transform</span>, int&gt;((int)myType<span class="hljs-selector-class">.CustomType</span>, Test6);
 Â   }
 Â  Â enum myType
 Â   {
 Â  Â  Â  Â CustomType = <span class="hljs-number">0</span>,
 Â   }
</code></pre>
<ul>
<li>customEventTypeIntæ˜¯è‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªintå€¼ï¼Œå¯ä»¥ä½¿ç”¨æšä¸¾å¯¹åº”äº‹ä»¶çš„ç±»å‹ã€‚</li>
<li>TæŒ‡æ˜äº†è‡ªå®šä¹‰äº‹ä»¶æ‰€ä½¿ç”¨çš„eventDataï¼Œå¯ä»¥åœ¨è§¦å‘çš„æ—¶å€™ä¼ å…¥Tä»¥ä¾›ä½¿ç”¨ï¼Œç­‰åŒäºCollision/Collider/PointerEventDataã€‚</li>
<li>argsæ˜¯å‚æ•°åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-95">è¡¥å……è¯´æ˜</h3>
<ul>
<li>äº‹ä»¶å·¥å…·é’ˆå¯¹çš„äº‹ä»¶è§¦å‘æ—¶éƒ½ä¼šæä¾›eventDataç”¨äºè·å–è§¦å‘æ—¶çš„ç‰¹å®šæ•°æ®ç”¨äºæ“ä½œï¼ˆæœ‰ç‚¹ç±»ä¼¼äºå¼‚æ­¥callbackå›è°ƒæ—¶ä¼ çš„é‚£ä¸ªå‚æ•°ï¼‰ï¼Œæ¯”å¦‚PointerEventDataï¼Œå› æ­¤ä»–ä»¬ä¸å¯¹è±¡ç»‘å®šï¼Œå°±ç®—ä¸ä¼ ä»»ä½•å‚æ•°ï¼Œè§¦å‘æ—¶è¿˜æ˜¯å¯ä»¥æ ¹æ®eventDataå»è·å–ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ç¢°æ’å‘ç”Ÿçš„ä½ç½®ã€‚</li>
<li>å¼€å‘äº‹ä»¶å·¥å…·çš„ç›®çš„åœ¨äºå¿«é€Ÿä¸ºæ¸¸æˆå¯¹è±¡æ·»åŠ ä¸€ç±»äº‹ä»¶çš„ç›‘å¬ï¼Œè€Œä¸éœ€è¦ä¸ºå…¶æ‰‹åŠ¨æŒ‚è½½è„šæœ¬ï¼ˆç±»ä¼¼äºbutton.OnClick.AddEventListener,ä½†Unityåªæ”¯æŒæŒ‰é’®çš„è‡ªåŠ¨æ·»åŠ ï¼Œè€Œäº‹ä»¶å·¥å…·æ”¯æŒå¸¸è§çš„æ‰€æœ‰äº‹ä»¶ç±»å‹ï¼‰ï¼Œå®é™…ä¸Šä¼šè‡ªåŠ¨ä¸ºå…¶è‡ªåŠ¨æŒ‚è½½JKEventListenerè„šæœ¬ï¼Œå…¶ä¸­æœ‰å¯¹åº”äº‹ä»¶çš„ç›‘å¬æ–¹æ³•ä»¥åŠå†…ç½®ç¢°æ’/é¼ æ ‡ç­‰äº‹ä»¶çš„è§¦å‘æ–¹æ³•ã€‚</li>
<li>è‡ªå®šä¹‰äº‹ä»¶ç±»å‹æ˜¯æ”¯æŒçš„ï¼Œä½†æ­¤æ—¶äº‹ä»¶çš„ç±»å‹ï¼Œè§¦å‘éœ€è¦è‡ªå·±å®ç°ã€‚</li>
<li>äº‹ä»¶ç³»ç»Ÿä½œç”¨åœ¨äºè§£è€¦å¯¹è±¡å’Œäº‹ä»¶è§¦å‘çš„é€»è¾‘ï¼Œè®©äº‹ä»¶ä¸­å¿ƒä¿å­˜ç›‘å¬çš„æ–¹æ³•ï¼Œè§¦å‘æ—¶ä¸éœ€è¦è®¿é—®å¯¹è±¡ã€‚è€Œäº‹ä»¶å·¥å…·æ‰€è´Ÿè´£çš„æ˜¯ä¸€ç±»ä¸å¯¹è±¡å¼ºå…³è”çš„äº‹ä»¶ï¼Œç”¨äºè§£è€¦å¯¹è±¡å’Œäº‹ä»¶ç›‘å¬æ·»åŠ çš„é€»è¾‘ï¼Œä¸éœ€è¦æ‰‹åŠ¨æŒ‚è½½è„šæœ¬ã€‚äºŒè€…è”åŠ¨çš„æ•ˆæœå°±æ˜¯Aä½¿ç”¨äº‹ä»¶å·¥å…·ç›´æ¥ä¸ºBæ·»åŠ äº‹ä»¶ç›‘å¬Cï¼ŒCå†…éƒ¨å†é€šè¿‡äº‹ä»¶ç³»ç»ŸåŒ…ä¸€å±‚æ·»åŠ äº‹ä»¶ç›‘å¬Dï¼Œè¿™æ ·å¤–ç•Œå°±å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®äº‹ä»¶ä¸­å¿ƒè§¦å‘Dï¼ˆå¯èƒ½çš„åº”ç”¨åœºæ™¯æ¯”å¦‚è¦ç»™æ‰€æœ‰å­å¼¹æ·»åŠ ç¢°æ’åˆ†è§£æ•ˆæœï¼Œè¿™æ ·æ— è®ºæ˜¯äº‹ä»¶ç›‘å¬æ·»åŠ è¿˜æ˜¯äº‹ä»¶çš„è§¦å‘éƒ½å¯ä»¥åœ¨ä¸€ä¸ªè„šæœ¬ä¸­å®Œæˆï¼Œä¸éœ€è¦æ‰‹åŠ¨ç»™æ‰€æœ‰å­å¼¹åº¦æŒ‚è½½è„šæœ¬ï¼Œä¹Ÿä¸éœ€è¦è§¦å‘æ—¶è®¿é—®æ‰€æœ‰å­å¼¹å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-96">çŠ¶æ€æœº</h2>
<p>æ¸¸æˆä¸­çš„çŠ¶æ€æœºï¼ˆstate machineï¼‰æ˜¯ä¸€ç§åœ¨ç¼–ç¨‹ä¸­å¸¸ç”¨çš„æ¦‚å¿µï¼Œå®ƒç”¨äºè¡¨ç¤ºå¯¹è±¡æˆ–ç³»ç»Ÿçš„çŠ¶æ€ä»¥åŠä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è½¬æ¢ã€‚åœ¨æ¸¸æˆä¸­ï¼ŒçŠ¶æ€æœºé€šå¸¸è¢«ç”¨äºè¡¨ç¤ºæ¸¸æˆå¯¹è±¡çš„çŠ¶æ€ï¼Œä¾‹å¦‚ç©å®¶è§’è‰²çš„è¡ŒåŠ¨çŠ¶æ€ï¼Œæˆ–è€…æ•Œäººçš„æ”»å‡»çŠ¶æ€ã€‚æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºæˆ–å±æ€§ï¼Œè€ŒçŠ¶æ€ä¹‹é—´çš„è½¬æ¢é€šå¸¸æ˜¯ç”±ç‰¹å®šçš„äº‹ä»¶è§¦å‘çš„ï¼Œä¾‹å¦‚æŒ‰ä¸‹æŸä¸ªæŒ‰é’®æˆ–è¾¾åˆ°æŸä¸ªæ¡ä»¶ã€‚æ¡†æ¶ä¸­æä¾›äº†çŠ¶æ€åŸºç±»å’Œè½¬æ¢åŠŸèƒ½é€»è¾‘ã€‚</p>
<h3 data-id="heading-97">çŠ¶æ€æœºçš„åˆå§‹åŒ–</h3>
<p>ä½¿ç”¨çŠ¶æ€æœºï¼Œæœ¬è´¨å°±æ˜¯æŒæœ‰çŠ¶æ€æœºè„šæœ¬çš„å¼•ç”¨ä¸å…¶ç»‘å®šï¼Œä¸ºæ­¤æ§åˆ¶è„šæœ¬ï¼ˆæ¯”å¦‚è§’è‰²æ§åˆ¶å™¨PlayerControllerï¼‰éœ€è¦æŒæœ‰çŠ¶æ€æœºå¯¹è±¡,å…¶ä¹Ÿæ˜¯ä¸€ç±»è„šæœ¬èµ„æºï¼Œå¯ä»¥é€šè¿‡èµ„æºç³»ç»Ÿè¿›è¡Œå›æ”¶ç®¡ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//API</span>
stateMachine.Init&lt;T&gt;(owner);
stateMachine.Init(owner);
<span class="hljs-comment">//ç®€å•å®ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PlayerController</span> : <span class="hljs-type">MonoBehaviour</span>, <span class="hljs-type">IStateMachineOwner</span>
{
 Â  Â StateMachine stateMachine;
 Â  Â <span class="hljs-keyword">private</span> void Start()
 Â   {
 Â  Â  Â  Â stateMachine = ResSystem.GetOrNew&lt;StateMachine&gt;();
 Â  Â     <span class="hljs-comment">//åˆå§‹åŒ–æ—¶è¿›å…¥é»˜è®¤çŠ¶æ€Idle</span>
 Â  Â  Â  Â stateMachine.Init&lt;PlayerIdleState&gt;(<span class="hljs-keyword">this</span>);
 Â 
 Â  Â     <span class="hljs-comment">//åˆå§‹åŒ–æ—¶ä¸è¿›å…¥é»˜è®¤çŠ¶æ€</span>
 Â  Â     stateMachine.Init(<span class="hljs-keyword">this</span>);
 Â   }
}
</code></pre>
<ul>
<li>PlayerControlleréœ€è¦ç»§æ‰¿IStateMachineOwneræ¥å£ï¼Œç›®çš„æ˜¯é™åˆ¶Initä¸­å¡«å…¥çš„å¯¹è±¡å¿…é¡»ä¸ºæ¥å£å­ç±»;</li>
<li>å®¿ä¸»ownerç”¨äºå°†PlayerControllerä½œä¸ºå¼•ç”¨ä¼ é€’ç»™stateMachineï¼Œå› ä¸ºstateMachineä¸ç»§æ‰¿MonoBehaviorï¼Œæƒ³è¦è·å–PlayerControllerçš„å¼•ç”¨ç›¸å¯¹éº»çƒ¦ï¼Œæ‰€ä»¥ç›´æ¥ä¼ é€’å¼•ç”¨ã€‚</li>
<li>Tï¼ˆPlayerIdleStateï¼‰æ˜¯åˆå§‹çš„çŠ¶æ€ç±»ï¼Œä½¿ç”¨å‚æ•°æ—¶ä¼šè‡ªåŠ¨è¿›å…¥TçŠ¶æ€ï¼Œä¸å¡«åˆ™çŠ¶æ€æœºå¾…æœºï¼Œç­‰å¾…è¿›å…¥æ–°çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-98">çŠ¶æ€ç±»</h3>
<p>æ¯ä¸€ä¸ªçŠ¶æ€å®é™…éƒ½æ˜¯ä¸€ä¸ªçŠ¶æ€ç±»è„šæœ¬ï¼ŒçŠ¶æ€æœºé€šè¿‡åˆ‡æ¢è°ƒç”¨å…¶ä¸­çš„æ–¹æ³•å®ŒæˆçŠ¶æ€é€»è¾‘çš„åˆ‡æ¢ï¼ŒçŠ¶æ€ç±»è„šæœ¬ç»§æ‰¿è‡ªçŠ¶æ€åŸºç±»StateBaseï¼ŒåŒ…å«çŠ¶æ€çš„åˆå§‹åŒ–ã€è¿›å…¥ã€é€€å‡ºã€Unityç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆè™½ç„¶ä¸ç»§æ‰¿MonoBehaviourï¼Œé€šè¿‡æ‰˜ç®¡ç³»ç»Ÿå¯ä»¥å®ç°ï¼‰ï¼Œåˆå§‹åŒ–åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥é€šè¿‡StateMachineè°ƒç”¨stateçš„Initæ–¹æ³•ä¼ é€’è¿‡æ¥çš„ownerè·å–å®¿ä¸»çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨è§’è‰²ç§»åŠ¨çš„ç›¸å…³çŠ¶æ€ä¸­å°±å¯ä»¥è·å–Playerçš„Transformç»„ä»¶ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayerIdleState</span>:<span class="hljs-title">StateBase</span>
{
 Â  Â Transform transform;
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Init</span>(<span class="hljs-params">IStateMachineOwner owner</span>)</span>
 Â   {
 Â  Â  Â  Â transform = ((PlayerController)owner).transform;
 Â   }


 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Enter</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.Enter();
 Â   }
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Exit</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.Exit();
 Â   }
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.Update();
 Â   }
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">FixedUpdate</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.FixedUpdate();
 Â   }


 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LateUpdate</span>()</span>
 Â   {
 Â  Â  Â  Â <span class="hljs-keyword">base</span>.LateUpdate();
 Â   }
}
</code></pre>
<h3 data-id="heading-99">çŠ¶æ€çš„åˆ‡æ¢</h3>
<p>åœ¨åˆ‡æ¢çŠ¶æ€æ—¶ï¼ŒçŠ¶æ€ç±»ä¼šå…ˆè¢«è·å–å¹¶å­˜å‚¨èµ·æ¥ä¾›ä¸‹æ¬¡é‡å¤ä½¿ç”¨ï¼Œå½“å‰çŠ¶æ€çš„æ‰€æœ‰æ–¹æ³•åœæ­¢å·¥ä½œï¼Œåˆ‡æ¢åˆ°æ–°çŠ¶æ€çš„æ–¹æ³•æ‰§è¡Œ,åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å†å°è£…ä¸€å±‚ChangeStateé€»è¾‘ä½¿ç”¨æšä¸¾ä¸ä¸åŒçš„çŠ¶æ€ç±»å¯¹åº”ï¼Œç®€åŒ–ä»£ç ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">//API
//(bool <span class="hljs-attr">reCurrstate</span> = <span class="hljs-literal">false</span>)
stateMachine.ChangeState&lt;T&gt;(reCurrstate)
</code></pre>
<ul>
<li>reCurrstateæŒ‡å½“å‰çŠ¶æ€å’Œè¦åˆ‡æ¢çš„çŠ¶æ€ç›¸åŒæ—¶æ˜¯å¦è¿˜è¦åˆ‡æ¢ï¼Œé»˜è®¤ä¸ºFalseç›¸åŒçŠ¶æ€ä¸æ‰§è¡Œåˆ‡æ¢ã€‚</li>
</ul>
<h3 data-id="heading-100">çŠ¶æ€å…±äº«æ•°æ®</h3>
<p>ä¸ºowner-stateMachineä¸‹çš„æ‰€æœ‰çŠ¶æ€æä¾›å…±äº«å­—å…¸ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public void <span class="hljs-built_in">ShareData</span>()<span class="hljs-comment">//çŠ¶æ€ç±»å†…</span>
{
 Â  Â <span class="hljs-comment">//(string key, object data)</span>
 Â  Â <span class="hljs-built_in">RemoveShareData</span>("test");
 Â  Â <span class="hljs-built_in">ContainsShareData</span>("test");
 Â  Â <span class="hljs-built_in">AddShareData</span>("test",<span class="hljs-number">1</span>);
 Â  Â int result = <span class="hljs-number">0</span>;
 Â  Â TryGetShareData&lt;int&gt;("test", out result);
 Â  Â <span class="hljs-built_in">UpdateShareData</span>("test", <span class="hljs-number">1</span>);
 Â  Â <span class="hljs-built_in">CleanShareData</span>();
 Â 
 Â  Â stateMachine<span class="hljs-selector-class">.CleanShareData</span>();
 Â 
}
</code></pre>
<ul>
<li>key,dataæ˜¯éœ€è¦å…±äº«çš„å­—å…¸æ•°æ®ï¼Œæä¾›CRUDçš„APIï¼Œå…±äº«æ•°æ®å¯ä»¥åœ¨çŠ¶æ€ç±»å†…ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡stateMachineè°ƒç”¨APIè¿›è¡ŒCRUDã€‚</li>
</ul>
<h3 data-id="heading-101">çŠ¶æ€æœºçŠ¶æ€æ¸…ç©ºä¸é”€æ¯</h3>
<ul>
<li>çŠ¶æ€æœºåœæ­¢å·¥ä½œStopæ—¶ä¼šæ¸…ç©ºæ‰€ä¿å­˜çš„æ‰€æœ‰çŠ¶æ€ç±»æ”¾å…¥å¯¹è±¡æ± ï¼ŒçŠ¶æ€æœºæœ¬èº«ä¸å®¿ä¸»çš„å¼•ç”¨ä»æ—§ä¿ç•™ï¼Œå¯ä¾›ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨ã€‚</li>
<li>çŠ¶æ€æœºé”€æ¯æ—¶Destroyé™¤åœæ­¢å·¥ä½œå¤–ä¼šé‡Šæ”¾ä¸å®¿ä¸»çš„å¼•ç”¨å…³ç³»ï¼Œå¹¶å°†è‡ªå·±æ”¾å›å¯¹è±¡æ± å›æ”¶åˆ©ç”¨ã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">stateMachine.Stop()<span class="hljs-comment">;</span>
stateMachine.Destroy()<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-102">åœºæ™¯ç³»ç»Ÿ</h2>
<p>åœºæ™¯ç³»ç»Ÿæä¾›äº†æ­£å¸¸åŠ è½½åœºæ™¯å’Œå¼‚æ­¥åŠ è½½çš„è‹¥å¹²APIã€‚</p>
<h3 data-id="heading-103">æ­£å¸¸åŠ è½½åœºæ™¯</h3>
<pre><code class="hljs language-ini" lang="ini">//API
//(string sceneName, LoadSceneMode <span class="hljs-attr">mode</span> = LoadSceneMode.Single)
SceneSystem.LoadScene(sceneName, LoadSceneMode <span class="hljs-attr">mode</span> = LoadSceneMode.Single)<span class="hljs-comment">;</span>
//(int sceneBuildIndex, LoadSceneMode <span class="hljs-attr">mode</span> = LoadSceneMode.Single)
SceneSystem.LoadScene(sceneBuildIndex, LoadSceneMode <span class="hljs-attr">mode</span> = LoadSceneMode.Single)<span class="hljs-comment">;</span>
//(string sceneName, LoadSceneParameters loadSceneParameters)
SceneSystem.LoadScene(sceneName, loadSceneParameters)<span class="hljs-comment">;</span>
//(int sceneBuildIndex, LoadSceneParameters loadSceneParameters)
SceneSystem.LoadScene(sceneBuildIndex, loadSceneParameters)<span class="hljs-comment">;</span>


//ä½¿ç”¨å®ä¾‹ åŠ è½½SampleSceneåœºæ™¯å¹¶Destroyå½“å‰åœºæ™¯
SceneSystem.LoadScene("SampleScene",LoadSceneMode.Single)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>sceneNameå¯¹åº”BuildSettingä¸­çš„åœºæ™¯åã€‚</li>
<li>sceneBuildIndexå¯¹åº”BuildSettingä¸­çš„åœºæ™¯ç´¢å¼•å·ã€‚</li>
<li>modeæ˜¯åœºæ™¯çš„åŠ è½½æ¨¡å¼ï¼Œé»˜è®¤ä¸ºSingleè¡¨ç¤ºåŠ è½½æ–°åœºæ™¯ä¼šé”€æ¯å½“å‰åœºæ™¯ï¼ŒAdditiveåˆ™ä¿ç•™å½“å‰åœºæ™¯ï¼Œå°†æ–°åœºæ™¯åŠ å…¥åˆ°å½“å‰åœºæ™¯ä¸­ã€‚</li>
<li>loadSceneParametersæ˜¯åœºæ™¯åŠ è½½çš„å‚æ•°ï¼Œé™¤å¯æŒ‡å®šåŠ è½½æ¨¡å¼å¤–ï¼Œè¿˜å¯æŒ‡å®šä¼˜å…ˆçº§ç­‰ï¼Œå…·ä½“å¦‚å›¾ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6b5b8f9bbfc4dab84262005d24e4078~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=G8y3ir5iNkqLV65VznxkcYeFR%2Bg%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-104">å¼‚æ­¥åŠ è½½åœºæ™¯</h3>
<p>å¼‚æ­¥åŠ è½½åœºæ™¯å¯åœ¨åŠ è½½å¤§è§„æ¨¡åœºæ™¯æ—¶ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œè€Œæ˜¯é€šè¿‡åç¨‹æˆ–å›è°ƒç­‰æ–¹å¼åœ¨åå°åŠ è½½åœºæ™¯èµ„æºï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåé€šçŸ¥æ¸¸æˆä¸»çº¿ç¨‹ã€‚</p>
<p>å¼‚æ­¥åŠ è½½è¿‡ç¨‹ä¸­ä¸»çº¿ç¨‹è·å–è¿›åº¦çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>åœºæ™¯ç³»ç»Ÿå¼‚æ­¥åŠ è½½æ—¶ä¼šå°†åŠ è½½è¿›åº¦ä¼ é€’åˆ°äº‹ä»¶ä¸­å¿ƒä¸­ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬"LoadingSceneProgress"ã€"LoadSceneSucceed"äº‹ä»¶è·å–åŠ è½½è¿›åº¦ã€‚</li>
<li>å¼‚æ­¥åŠ è½½æä¾›äº†å›è°ƒäº‹ä»¶å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥å›è°ƒå‡½æ•°è·å–åŠ è½½è¿›åº¦ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//(string sceneName, Action&lt;float&gt; callBack = null, LoadSceneMode mode = LoadSceneMode.Single)</span>
SceneSystem<span class="hljs-selector-class">.LoadSceneAsync</span>(sceneName, callBack, mode);
<span class="hljs-comment">//(int sceneBuildIndex, Action&lt;float&gt; callBack = null, LoadSceneMode mode = LoadSceneMode.Single)</span>
SceneSystem<span class="hljs-selector-class">.LoadSceneAsync</span>(sceneBuildIndex, callBack, mode);


<span class="hljs-comment">//ç®€å•å®ä¾‹ å¼‚æ­¥åŠ è½½åœºæ™¯SampleSceneå¹¶å®æ—¶è¾“å‡ºåŠ è½½è¿›åº¦ï¼Œåœ¨åŠ è½½å®Œæˆæ—¶è¾“å‡ºSuccess</span>
<span class="hljs-comment">//æ–¹å¼1 ç›‘å¬äº‹ä»¶è·å–åŠ è½½è¿›åº¦</span>
SceneSystem<span class="hljs-selector-class">.LoadSceneAsync</span>("SampleScene");
<span class="hljs-comment">//(floatä¸å†™ä¹Ÿè¡Œ,"LoadingSceneProgress"ã€"LoadSceneSucceed"ä¸ºå›ºå®šåç§°)</span>
EventSystem<span class="hljs-selector-class">.AddEventListener</span>&lt;<span class="hljs-attribute">float</span>&gt;("LoadingSceneProgress", LoadProgress);
EventSystem<span class="hljs-selector-class">.AddEventListener</span>("LoadSceneSucceed");


<span class="hljs-comment">//æ–¹å¼2 ä¼ å…¥å›è°ƒäº‹ä»¶callBack</span>
SceneSystem<span class="hljs-selector-class">.LoadSceneAsync</span>("SampleScene", LoadProgress);
EventSystem<span class="hljs-selector-class">.AddEventListener</span>("LoadSceneSucceed");


void <span class="hljs-built_in">LoadProgress</span>(float progress)
{
    Debug<span class="hljs-selector-class">.Log</span>(progress);
}
void <span class="hljs-built_in">LoadSceneSucceed</span>()
{
    Debug<span class="hljs-selector-class">.Log</span>("Success");
}
</code></pre>
<ul>
<li>sceneNameå¯¹åº”BuildSettingä¸­çš„åœºæ™¯åã€‚</li>
<li>sceneBuildIndexå¯¹åº”BuildSettingä¸­çš„åœºæ™¯ç´¢å¼•å·ã€‚</li>
<li>modeæ˜¯åœºæ™¯çš„åŠ è½½æ¨¡å¼ï¼Œé»˜è®¤ä¸ºSingleè¡¨ç¤ºåŠ è½½æ–°åœºæ™¯ä¼šé”€æ¯å½“å‰åœºæ™¯ï¼ŒAdditiveåˆ™ä¿ç•™å½“å‰åœºæ™¯ï¼Œå°†æ–°åœºæ™¯åŠ å…¥åˆ°å½“å‰åœºæ™¯ä¸­ã€‚</li>
<li>callBackæ˜¯floatå‚æ•°æ— è¿”å›å€¼å›è°ƒäº‹ä»¶ï¼Œç”¨äºè·å–åŠ è½½è¿›åº¦ã€‚</li>
</ul>
<h2 data-id="heading-105">Monoä»£ç†ç³»ç»Ÿ</h2>
<p>Monoä»£ç†ç³»ç»Ÿç”¨äºä¸ç»§æ‰¿MonoBehaviorçš„è„šæœ¬å¯ç”¨monoç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œåç¨‹ï¼Œæ¯”å¦‚çŠ¶æ€æœºé‡Œçš„çŠ¶æ€ç±»ï¼Œåœºæ™¯ç³»ç»Ÿå¼‚æ­¥åŠ è½½æ—¶çš„åç¨‹ï¼Œé™¤ä»£ç†ç³»ç»Ÿå¤–æ¡†æ¶ä¸­çš„å„ç³»ç»Ÿéƒ½æ˜¯é™æ€å·¥å…·ç±»ï¼Œéœ€è¦ä½¿ç”¨Monoçš„ç›¸å…³æ–¹æ³•åˆ™é€šè¿‡ä»£ç†ç³»ç»Ÿå®Œæˆï¼Œå› æ­¤ä¹Ÿåªæœ‰MonoSystemæŒ‚è½½åœ¨é¢æ¿ä¸Šï¼Œå…¶å†…éƒ¨å®ç°æ˜¯å•ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d08b0bf0c7694e40b145f8440c2771e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=ikcwiF5cIGX7nDRN%2B0PhL9q%2FSKU%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-106">Monoç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<p>å°†éœ€è¦åœ¨Updateã€LateUpdateã€‚FixedUpdateå®é™…æ‰§è¡Œçš„é€»è¾‘æ‰˜ç®¡ç»™MonoSystemã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//(Action action)</span>
MonoSystem<span class="hljs-selector-class">.AddUpdateListener</span>(action);
MonoSystem<span class="hljs-selector-class">.RemoveUpdateListener</span>(action);
MonoSystem<span class="hljs-selector-class">.AddLateUpdateListener</span>(action);
MonoSystem<span class="hljs-selector-class">.RemoveLateUpdateListener</span>(action);
MonoSystem<span class="hljs-selector-class">.AddFixedUpdateListener</span>(action);
MonoSystem<span class="hljs-selector-class">.RemoveFixedUpdateListener</span>(action);
</code></pre>
<ul>
<li>actionæ˜¯è¦åœ¨ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œçš„æ— å‚æ— è¿”å›å€¼æ–¹æ³•ã€‚</li>
</ul>
<h3 data-id="heading-107">åç¨‹</h3>
<p>å¯åŠ¨/åœæ­¢åç¨‹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//å¯åŠ¨/åœæ­¢ä¸€ä¸ªåç¨‹</span>
<span class="hljs-comment">//(IEnumerator coroutine)</span>
MonoSystem<span class="hljs-selector-class">.Start_Coroutine</span>(coroutine);
<span class="hljs-comment">//(Coroutine routine)</span>
MonoSystem<span class="hljs-selector-class">.Stop_Coroutine</span>(routine);


<span class="hljs-comment">//å¯åŠ¨/åœæ­¢ä¸€ä¸ªåç¨‹åºå¹¶ä¸”ç»‘å®šæŸä¸ªå¯¹è±¡</span>
<span class="hljs-comment">//(object obj,IEnumerator coroutine)</span>
MonoSystem<span class="hljs-selector-class">.Start_Coroutine</span>(obj, coroutine);
<span class="hljs-comment">//(object obj,Coroutine routine)</span>
MonoSystem<span class="hljs-selector-class">.Stop_Coroutine</span>(obj, routine);


<span class="hljs-comment">//åœæ­¢æŸä¸ªå¯¹è±¡ç»‘å®šçš„æ‰€æœ‰åç¨‹</span>
MonoSystem<span class="hljs-selector-class">.StopAllCoroutine</span>(obj);


<span class="hljs-comment">//åœæ­¢æ‰€æœ‰åç¨‹</span>
MonoSystem<span class="hljs-selector-class">.StopAllCoroutine</span>();
</code></pre>
<ul>
<li>coroutineæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®šä¹‰äº†åç¨‹ã€‚</li>
<li>routineæ˜¯è¦åœæ­¢çš„åç¨‹ã€‚</li>
<li>objæ˜¯ä¸åç¨‹ç»‘å®šçš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨äºåŒºåˆ†ä¸åŒå¯¹è±¡ä¸Šçš„ç›¸åŒåç¨‹ã€‚</li>
</ul>
<h2 data-id="heading-108">åç¨‹å·¥å…·</h2>
<p>æå‰newå¥½åç¨‹æ‰€éœ€è¦çš„WaitForEndOfFrameã€WaitForFixedUpdateã€YieldInstructionç±»çš„å¯¹è±¡,é¿å…GCã€‚</p>
<pre><code class="hljs language-scss" lang="scss">CoroutineTool<span class="hljs-selector-class">.WaitForEndOfFrame</span>();
CoroutineTool<span class="hljs-selector-class">.WaitForFixedUpdate</span>();
<span class="hljs-comment">//(float time)</span>
CoroutineTool<span class="hljs-selector-class">.WaitForSeconds</span>(time);
<span class="hljs-comment">//(float time)ä¸å—TimeScaleå½±å“</span>
CoroutineTool<span class="hljs-selector-class">.WaitForSecondsRealtime</span>(time);
<span class="hljs-comment">//(int count=1)</span>
CoroutineTool<span class="hljs-selector-class">.WaitForFrames</span>(count);
CoroutineTool<span class="hljs-selector-class">.WaitForFrame</span>();


<span class="hljs-comment">//ä½¿ç”¨ç¤ºä¾‹</span>
private static IEnumerator <span class="hljs-built_in">DoLoadSceneAsync</span>(...)
{
    yield return CoroutineTool<span class="hljs-selector-class">.WaitForFrame</span>();
}
</code></pre>
<h2 data-id="heading-109">æ‰©å±•æ–¹æ³•</h2>
<p>æ¡†æ¶æä¾›äº†è‹¥å¹²æ‰©å±•æ–¹æ³•ç”¨äºå¿«é€Ÿè°ƒç”¨ä¸å¯¹è±¡å¼ºå…³è”çš„ç³»ç»Ÿæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//API</span>
<span class="hljs-comment">//æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ•°ç»„,è¿”å›bool</span>
<span class="hljs-comment">//(this object[] objs, object[] other)</span>
xx<span class="hljs-selector-class">.ArraryEquals</span>(other);


<span class="hljs-comment">//è°ƒç”¨MonoSystemæ·»åŠ /ç§»é™¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span>
<span class="hljs-comment">//(this object obj, Action action)</span>
xx<span class="hljs-selector-class">.AddUpdate</span>(action);
xx<span class="hljs-selector-class">.removeUpdate</span>(action);
xx<span class="hljs-selector-class">.AddLateUpdate</span>(action);
xx<span class="hljs-selector-class">.RemoveLateUpdate</span>(action);
xx<span class="hljs-selector-class">.AddFixedUpdate</span>(action);
xx<span class="hljs-selector-class">.RemoveLateUpdate</span>(action);


<span class="hljs-comment">//è°ƒç”¨MonoSystemå¯åŠ¨/åœæ­¢åç¨‹ï¼ˆç»‘å®šæ­¤å¯¹è±¡ï¼‰</span>
<span class="hljs-comment">//(this object obj, IEnumerator routine)</span>
xx<span class="hljs-selector-class">.StartCoroutine</span>(routine);
<span class="hljs-comment">//(this object obj, Coroutine routine)</span>
xx<span class="hljs-selector-class">.StopCoroutine</span>(routine);
xx<span class="hljs-selector-class">.StopAllCoroutine</span>();


<span class="hljs-comment">//åˆ¤æ–­GameObjectæ˜¯å¦ä¸ºç©ºï¼Œè¿”å›bool</span>
xx<span class="hljs-selector-class">.IsNull</span>();


<span class="hljs-comment">//å½“å‰å¯¹è±¡æ”¾å…¥å¯¹è±¡æ± </span>
<span class="hljs-comment">//(this GameObject go)</span>
xx<span class="hljs-selector-class">.GameObjectPushPool</span>();
<span class="hljs-comment">//(this Component com)</span>
xx<span class="hljs-selector-class">.GameObjectPushPool</span>();
<span class="hljs-comment">//(this object obj)</span>
xx<span class="hljs-selector-class">.ObjectPushPool</span>();
</code></pre>
<h2 data-id="heading-110">æœ¬åœ°åŒ–ç³»ç»Ÿ</h2>
<p>ç”¨äºåˆ‡æ¢ä¸åŒè¯­è¨€å¯¹åº”çš„æ–‡å­—ç´ æå’Œå›¾ç‰‡ç´ æï¼Œä¸»è¦ç”¨äºUIã€‚</p>
<h3 data-id="heading-111">æœ¬åœ°åŒ–é…ç½®æ–‡ä»¶çš„åˆ›å»º</h3>
<p>projecté¢æ¿å³é”®åˆ›å»ºLocalzation Configï¼Œé€šè¿‡SOçš„æ–¹å¼è®°å½•è¯­è¨€é…ç½®ï¼Œçº¢è‰²æ¡†ä¸ºä¸€ç±»ç´ æçš„keyï¼Œå¯¹åº”ä¸‹å±è‹¥å¹²ä¸åŒè¯­è¨€çš„ç´ æï¼Œæ”¯æŒæ–‡å­—stringæˆ–è€…å›¾ç‰‡Spriteå†…å®¹ï¼Œä½¿ç”¨æ—¶é€šè¿‡è°ƒç”¨è¿™é‡Œçš„èµ„æºè¿›è¡Œåˆ‡æ¢ï¼Œå¯ä»¥ä½œä¸ºå…¨å±€æˆ–è€…ä¸“å±äºæŸä¸€UIå¯¹è±¡çš„æœ¬åœ°åŒ–é…ç½®æ–‡ä»¶ï¼ˆå³æŒæœ‰æ­¤configçš„SOå¹¶é€šè¿‡keyå’Œlanguagetypeè·å–æœ¬åœ°åŒ–å†…å®¹ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/228c85809a5540029cd1c8909adc18a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=%2FpdToizbWdXcuYniBUaIvi485PU%3D" alt="alt" loading="lazy"/>â€‹</p>
<h3 data-id="heading-112">å…¨å±€é…ç½®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47ea27bb38254acd90a6f296ed9f30be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=%2Fi7Um6nb4ApYNF4aL4iKFnZFctI%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>å°†åˆ›å»ºçš„Configæ‹–æ‹½ç»™JKFrameä¸‹çš„LocalizationSystemç»„ä»¶ï¼Œå…¨å±€çš„æœ¬åœ°åŒ–é…ç½®ç»‘å®šå®Œæˆï¼Œé€šè¿‡ä¿®æ”¹LocalizationSystemçš„LanguageTypeä¿®æ”¹è¯­è¨€ã€‚ï¼ˆå¯ä»¥åœ¨è¿è¡Œæ—¶ä¸‹ä¿®æ”¹å…¨å±€é…ç½®ï¼‰</p>
<h3 data-id="heading-113">API</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">//åˆ‡æ¢å…¨å±€é…ç½®çš„å½“å‰è¯­è¨€ç±»å‹ï¼ˆé¢æ¿ä¸Šæ˜¾ç¤ºçš„é‚£ä¸ªï¼‰</span>
<span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">LanguageType</span> <span class="hljs-operator">=</span> <span class="hljs-type">LanguageType</span>.<span class="hljs-type">SimplifiedChinese</span>;
<span class="hljs-comment">//æ³¨å†Œ/æ³¨é”€è¯­è¨€æ›´æ–°æ—¶è§¦å‘çš„äº‹ä»¶ï¼ˆå«æœ‰LanguageTypeå‚æ•°çš„æ— è¿”å›å€¼æ–¹æ³•ï¼‰</span>
<span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">RegisterLanguageEvent</span>(<span class="hljs-type">Action</span>&lt;<span class="hljs-type">LanguageType</span>&gt; action)
<span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">UnregisterLanguageEvent</span>(<span class="hljs-type">Action</span>&lt;<span class="hljs-type">LanguageType</span>&gt; action)
<span class="hljs-comment">//è·å–å…¨å±€é…ç½®æ–‡ä»¶çš„æŸä¸€è¯­è¨€ä¸‹çš„æ•°æ®ï¼ˆæ–‡æœ¬/å›¾ç‰‡ï¼‰</span>
<span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">GetContent</span>&lt;<span class="hljs-type">T</span>&gt;(string key, <span class="hljs-type">LanguageType</span> languageType)
<span class="hljs-comment">//ç»§æ‰¿UIWindowBaseçš„çª—å£è„šæœ¬å¯ä»¥é‡å†™è¯­è¨€æ›´æ–°äº‹ä»¶</span>
<span class="hljs-keyword">override</span> void <span class="hljs-type">OnUpdateLanguage</span>(<span class="hljs-type">LanguageType</span> languageType)


<span class="hljs-comment">//ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-comment">//1.é€šè¿‡è„šæœ¬ç›´æ¥è·å¾—å…¨å±€æœ¬åœ°åŒ–é…ç½®çš„æ•°æ®å†…å®¹</span>
<span class="hljs-comment">//æ–‡æœ¬string</span>
string info <span class="hljs-operator">=</span> <span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">GetContent</span>&lt;<span class="hljs-type">LocalizationStringData</span>&gt;(<span class="hljs-string">"æ ‡é¢˜"</span>, <span class="hljs-type">LanguageType</span>.<span class="hljs-type">SimplifiedChinese</span>).content;<span class="hljs-comment">//æŒ‡å®šä¸­æ–‡</span>
string info <span class="hljs-operator">=</span> <span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">GetContent</span>&lt;<span class="hljs-type">LocalizationStringData</span>&gt;(<span class="hljs-string">"æ ‡é¢˜"</span>, <span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">LanguageType</span>).content;<span class="hljs-comment">//å½“å‰å…¨å±€æœ¬åœ°åŒ–é…ç½®çš„è¯­è¨€</span>
<span class="hljs-comment">//Spriteå›¾ç‰‡</span>
<span class="hljs-type">Sprite</span> image <span class="hljs-operator">=</span> <span class="hljs-type">LocalizationSystem</span>.<span class="hljs-type">GetContent</span>&lt;<span class="hljs-type">LocalizationImageData</span>&gt;(<span class="hljs-string">"æ ‡é¢˜å›¾ç‰‡"</span>, <span class="hljs-type">LanguageType</span>.<span class="hljs-type">SimplifiedChinese</span>).content;


<span class="hljs-comment">//2.é€šè¿‡Collecterç”±æ‹–æ‹½çš„æ–¹å¼ç»‘å®šUIç»„ä»¶å’Œè¯­è¨€é…ç½®ï¼ˆè§ä¸‹ä¸€å°èŠ‚ï¼‰</span>
<span class="hljs-comment">//3.é€šè¿‡é‡å†™OnUpdateLanguageå®šåˆ¶è¯­è¨€æ›´æ–°æ—¶çš„äº‹ä»¶è§¦å‘ï¼ˆè§ä¸‹ä¸€å°èŠ‚ï¼‰</span>
 Â  
</code></pre>
<ul>
<li>actionæ˜¯ä¸€ä¸ªå«æœ‰languageTypeçš„å•å‚æ•°æ— è¿”å›å€¼æ–¹æ³•ï¼Œç”¨äºç»“åˆä¼ å…¥çš„è¯­è¨€ç±»å‹å®šåˆ¶è§¦å‘äº‹ä»¶é€»è¾‘ã€‚</li>
<li>æ³›å‹Tï¼ˆLocalizationStringData/LocalizationImageDataï¼‰ç”¨äºé™å®šGetContentè¿”å›çš„æ•°æ®ç±»å‹ï¼Œç›®å‰æ”¯æŒstringå’ŒSpriteï¼Œå¯ä»¥è¿›è¡Œæ‹“å±•ã€‚</li>
<li>keyæ˜¯æœ¬åœ°åŒ–é…ç½®æ–‡ä»¶SOä¸­çš„æ•°æ®keyã€‚</li>
<li>LocalizationSystem.LanguageTypeæ˜¯å½“å‰æ¸¸æˆçš„è¯­è¨€ç±»å‹ï¼Œä¿®æ”¹ä¼šè§¦å‘ç´¢å¼•ä¸­çš„è¯­è¨€æ›´æ–°æ–¹æ³•ï¼Œè¿›è€Œè§¦å‘æ‰€æœ‰çª—å£çš„è¯­è¨€æ›´æ–°äº‹ä»¶ä¿®æ”¹è¯­è¨€ç±»å‹ã€‚</li>
</ul>
<h3 data-id="heading-114">UIç‰¹åŒ–å·¥å…·åŠå±€éƒ¨é…ç½®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2c41502382f49a08204dfa426836112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=kSB0YjugRXTn%2B1M3jefVcAFdBhM%3D" alt="alt" loading="lazy"/>â€‹</p>
<ul>
<li>åœ¨UIæ¡†æ¶ä¸­ç»§æ‰¿UIWindowBaseçš„çª—å£ç±»ä¼šè‡ªåŠ¨æŒæœ‰ä¸€ä¸ªæœ¬åœ°åŒ–é…ç½®Aç”¨äºçª—å£çš„å±€éƒ¨é…ç½®ï¼ˆå¯ç”¨å¯ä¸ç”¨ï¼Œåªæ˜¯æä¾›äº†ä¸€ä¸ªæ•°æ®ä¼ å…¥çš„æ¥å£ï¼‰ã€‚</li>
<li>æ–¹ä¾¿èµ·è§ï¼Œï¼Œç›´æ¥é€šè¿‡é¢æ¿æ‹–æ‹½çš„æ–¹å¼è½¬é€’å¯¹è±¡å’Œå…¶å¯¹åº”çš„é…ç½®æ•°æ®keyï¼ˆä»»ä¸€è¯­è¨€å³å¯ï¼‰ï¼Œå³å®Œæˆäº†æœ¬åœ°åŒ–é…ç½®ï¼Œæ— éœ€é€šè¿‡è„šæœ¬è®¿é—®ï¼ˆæ¯”å¦‚Titleæ–‡æœ¬ç»„ä»¶å¯¹åº”é…ç½®ä¸­çš„æ ‡é¢˜keyï¼‰ã€‚æ³¨æ„ï¼Œæ­¤æ—¶çš„Localization Configæ˜¯ä¸€ä¸ªä¸“å±äºæ­¤UIçš„å±€éƒ¨é…ç½®æ–‡ä»¶ï¼ˆä¸”ä¸æŒæœ‰çš„æœ¬åœ°åŒ–é…ç½®Aå¯ä»¥ä¸åŒï¼‰ã€‚</li>
</ul>
<p>PS:å½“å±€éƒ¨é…ç½®æ‰¾ä¸åˆ°å¯¹åº”çš„keyæ—¶ï¼Œåº•å±‚è§„å®šä¼šå»å…¨å±€æœ¬åœ°åŒ–é…ç½®è¡¨é‡Œå¯»æ‰¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f2b934c78274f5281b4c920d0f867aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODkyMjU0MTE4MjkwMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764480691&amp;x-signature=OL5Gnj72FCqHeyin%2BDREPaJy9Pw%3D" alt="alt" loading="lazy"/>â€‹</p>
<p>é›†æˆäº†UI_WindowBaseçš„UIçª—å£ç±»å¯ä»¥é€šè¿‡é‡å†™OnUpdateLanguageæ–¹æ³•å®šåˆ¶è¯­è¨€æ›´æ–°æ—¶çš„äº‹ä»¶è§¦å‘ï¼Œæ¯”å¦‚æ–‡å­—æ‹¼æ¥éƒ¨åˆ†æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â public Text test<span class="hljs-comment">;</span>
 Â  Â protected override void OnUpdateLanguage(LanguageType languageType) {
 Â  Â  Â  Â string <span class="hljs-attr">info</span> = LocalizationSystem.GetContent&lt;LocalizationStringData&gt;(<span class="hljs-string">"æ ‡é¢˜"</span>, languageType).content<span class="hljs-comment">;</span>
 Â  Â  Â  Â info += "test"<span class="hljs-comment">;</span>
 Â  Â  Â  Â <span class="hljs-attr">test.text</span> = info<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<h3 data-id="heading-115">æ‹“å±•</h3>
<p>å°½ç®¡æœ¬åœ°åŒ–ç³»ç»Ÿç›®å‰ä»…æ”¯æŒæ–‡å­—å’ŒSpriteçš„åˆ‡æ¢ï¼Œä½†æ˜¯å¯¹äºéŸ³æ•ˆï¼Œé…éŸ³ç­‰èµ„æºçš„åˆ‡æ¢ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿æ‹“å±•ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½å°±ä¸åšé¢„åˆ¶äº†ï¼Œç”±å¼€å‘è€…è‡ªè¡Œæ‹“å±•ï¼Œä»¥ä¸‹æ˜¯æ‹“å±•æ€è·¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//æ‹“å±•API</span>
<span class="hljs-comment">//è·å–å…¨å±€é…ç½®æ–‡ä»¶çš„æŸä¸€è¯­è¨€ä¸‹çš„æ•°æ®ï¼ˆæ–‡æœ¬/å›¾ç‰‡ï¼‰</span>
LocalizationSystem.GetContent&lt;T&gt;(string key, LanguageType languageType)


<span class="hljs-comment">//æ‹“å±•ä½ç½®  LocalizationData.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalizationDataBase</span>
{
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalizationStringData</span> : <span class="hljs-type">LocalizationDataBase</span>
{
 Â  Â <span class="hljs-keyword">public</span> string content;
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalizationImageData</span> : <span class="hljs-type">LocalizationDataBase</span>
{
 Â  Â <span class="hljs-keyword">public</span> Sprite content;
}
</code></pre>
<ul>
<li>åœ¨æœ¬åœ°åŒ–ç³»ç»Ÿçš„å†…éƒ¨å®ç°ä¸­ï¼ŒGetContentçš„æ³›å‹å‚æ•°TæŒ‡å®šäº†æœ¬åœ°åŒ–ä¿å­˜çš„æ•°æ®ç±»å‹ï¼Œå†…ç½®äº†LocalizationStringDataå’ŒLocalIzationImageDataä¸¤ç§æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æŒæœ‰stringæˆå‘˜å’ŒSpriteæˆå‘˜ï¼Œå¯¹åº”æ–‡æœ¬å’Œå›¾ç‰‡æ•°æ®ã€‚</li>
<li>æœ‰ä¸¤ç§ä¿®æ”¹æ€è·¯ï¼Œä¸€ç§æ˜¯åœ¨å·²æœ‰çš„ä¸¤ä¸ªä¸ªæ•°æ®ç±»å‹æ·»åŠ é¢å¤–çš„æ•°æ®æˆå‘˜,æ¯”å¦‚ä¸€ä¸ªæ­¦å™¨åœ¨UIä¸Šçš„æ˜¾ç¤ºé™¤äº†æœ‰æè¿°å†…å®¹è¿˜æœ‰æ­¦å™¨çš„ç±»å‹stringã€‚</li>
</ul>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalizationStringData</span> : <span class="hljs-title class_">LocalizationDataBase</span>
{
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> content;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-keyword">type</span>;
}
</code></pre>
<ul>
<li>å¦å¤–ä¸€ç§æ˜¯ç›´æ¥ç»§æ‰¿æŠ½è±¡ç±»LocalizationDataBaseå†™ä¸€ä¸ªæ–°ç±»ï¼Œæ¯”å¦‚è¿˜æ˜¯æ­¦å™¨ç±»å‹å’Œæ­¦å™¨æè¿°çš„UIæœ¬åœ°åŒ–æ•°æ®,å…¶å®ä¸¤ç§æ–¹å¼æœ¬è´¨ä¹Ÿæ²¡å•¥åŒºåˆ«ï¼Œåªæ˜¯è¯´æ˜æ•°æ®ç±»æ•°é‡å’Œç±»å†…çš„æ•°æ®æˆå‘˜éƒ½å¯ä»¥æ‰©å±•æ»¡è¶³å¼€å‘è€…æƒ³è¦çš„éœ€æ±‚ã€‚</li>
</ul>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalizationWeaponData</span> : <span class="hljs-title class_">LocalizationDataBase</span>
{
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> content;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-keyword">type</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ é˜¿é‡Œäº‘ Linux æœåŠ¡å™¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦å®Œæ•´éƒ¨ç½²æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575102209605877786</link>    <guid>https://juejin.cn/post/7575102209605877786</guid>    <pubDate>2025-11-23T05:36:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605877786" data-draft-id="7575182522410909734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ é˜¿é‡Œäº‘ Linux æœåŠ¡å™¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦å®Œæ•´éƒ¨ç½²æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T05:36:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¯ç²¹çš„çƒ­çˆ±"/> <meta itemprop="url" content="https://juejin.cn/user/3540880762088056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ é˜¿é‡Œäº‘ Linux æœåŠ¡å™¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦å®Œæ•´éƒ¨ç½²æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3540880762088056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¯ç²¹çš„çƒ­çˆ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T05:36:14.000Z" title="Sun Nov 23 2025 05:36:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ é˜¿é‡Œäº‘ Linux æœåŠ¡å™¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦å®Œæ•´éƒ¨ç½²æŒ‡å—</h2>
<blockquote>
<p><strong>é€‚ç”¨ç³»ç»Ÿ</strong>ï¼šAlibaba Cloud Linux 3ï¼ˆå…¼å®¹ CentOS/RHELï¼‰<br/>
<strong>Web æœåŠ¡å™¨</strong>ï¼šNginx<br/>
<strong>æ›´æ–°æ—¶é—´</strong>ï¼š2025 å¹´ 11 æœˆ<br/>
<strong>ä½œè€…</strong>ï¼šDevOps Guide</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">âœ… ä¸€ã€å‰ææ¡ä»¶</h3>
<p>åœ¨å¼€å§‹å‰ï¼Œè¯·ç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>





























<table><thead><tr><th>è¦æ±‚</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. é˜¿é‡Œäº‘ ECS å®ä¾‹</strong></td><td>å·²åˆ›å»ºï¼Œæ“ä½œç³»ç»Ÿä¸º Alibaba Cloud Linux 3</td></tr><tr><td><strong>2. åŸŸåå·²è§£æ</strong></td><td><code>yourdomain.com</code> çš„ A è®°å½•æŒ‡å‘ ECS <strong>å…¬ç½‘ IP</strong></td></tr><tr><td><strong>3. å®‰å…¨ç»„å¼€æ”¾ç«¯å£</strong></td><td>å…¥æ–¹å‘å…è®¸ <code>80 (HTTP)</code> å’Œ <code>443 (HTTPS)</code>ï¼ˆæ¥æºï¼š<code>0.0.0.0/0</code>ï¼‰</td></tr><tr><td><strong>4. åŸŸåå¤‡æ¡ˆï¼ˆä¸­å›½å¤§é™†åœ°åŸŸï¼‰</strong></td><td>è‹¥ ECS ä½äºä¸­å›½å†…åœ°ï¼ˆå¦‚æ­å·ã€åŒ—äº¬ï¼‰ï¼Œ<strong>å¿…é¡»å®Œæˆ ICP å¤‡æ¡ˆ</strong></td></tr><tr><td><strong>5. å·²å®‰è£… Nginx</strong></td><td>ä¸”èƒ½é€šè¿‡ <code>http://yourdomain.com</code> è®¿é—®</td></tr></tbody></table>
<blockquote>
<p>ğŸ” éªŒè¯åŸŸåè§£æï¼š</p>
<pre><code class="hljs language-bash" lang="bash">dig yourdomain.com +short
<span class="hljs-comment"># åº”è¿”å›ä½ çš„ ECS å…¬ç½‘ IP</span>
</code></pre>
</blockquote>
<hr/>
<h3 data-id="heading-2">ğŸš€ äºŒã€å®Œæ•´æ“ä½œæµç¨‹</h3>
<h4 data-id="heading-3">æ­¥éª¤ 1ï¼šå®‰è£… Nginxï¼ˆå¦‚æœªå®‰è£…ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… Nginx</span>
sudo dnf install -y nginx

<span class="hljs-comment"># å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo systemctl start nginx
sudo systemctl <span class="hljs-built_in">enable</span> nginx
</code></pre>
<hr/>
<h4 data-id="heading-4">æ­¥éª¤ 2ï¼šé…ç½® Nginx ç«™ç‚¹ï¼ˆæ·»åŠ  server_nameï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">sudo vim /etc/nginx/conf.d/yourdomain.com.conf
</code></pre>
<p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen 80;
    server_name yourdomain.com;  # â† å¿…é¡»åŒ…å«ä½ è¦ç”³è¯·è¯ä¹¦çš„åŸŸå
    root /usr/share/nginx/html;
    index index.html;
}
</code></pre>
<p>æµ‹è¯•å¹¶é‡è½½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo nginx -t
sudo systemctl reload nginx
</code></pre>
<blockquote>
<p>âœ… æ­¤æ—¶åº”èƒ½é€šè¿‡æµè§ˆå™¨è®¿é—® <code>http://yourdomain.com</code></p>
</blockquote>
<hr/>
<h4 data-id="heading-5">æ­¥éª¤ 3ï¼šå®‰è£… Certbot</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… EPEL ä»“åº“</span>
sudo dnf install -y epel-release

<span class="hljs-comment"># å®‰è£… Certbot åŠ Nginx æ’ä»¶</span>
sudo dnf install -y certbot python3-certbot-nginx
</code></pre>
<hr/>
<h4 data-id="heading-6">æ­¥éª¤ 4ï¼šç”³è¯·å¹¶å®‰è£… SSL è¯ä¹¦</h4>
<pre><code class="hljs language-bash" lang="bash">sudo certbot --nginx -d yourdomain.com
</code></pre>
<p>æ‰§è¡Œæ—¶ä¼šæç¤ºï¼š</p>
<ul>
<li>è¾“å…¥é‚®ç®±ï¼ˆç”¨äºè¿‡æœŸæé†’ï¼‰</li>
<li>åŒæ„æœåŠ¡æ¡æ¬¾ï¼ˆæŒ‰ <code>A</code>ï¼‰</li>
<li>æ˜¯å¦é‡å®šå‘ HTTP â†’ HTTPSï¼ˆå»ºè®®é€‰ <strong>Yes</strong>ï¼‰</li>
</ul>
<blockquote>
<p>âœ… æˆåŠŸåï¼ŒNginx ä¼šè‡ªåŠ¨å¯ç”¨ HTTPSï¼Œè®¿é—® <code>https://yourdomain.com</code> åº”æ˜¾ç¤ºå®‰å…¨é”å›¾æ ‡ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">æ­¥éª¤ 5ï¼šéªŒè¯è¯ä¹¦ä¿¡æ¯</h4>
<pre><code class="hljs language-bash" lang="bash">sudo certbot certificates
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Certificate</span> <span class="hljs-title class_">Name</span>: yourdomain.<span class="hljs-property">com</span>
    <span class="hljs-title class_">Expiry</span> <span class="hljs-title class_">Date</span>: <span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">20</span> <span class="hljs-number">12</span>:<span class="hljs-number">34</span>:<span class="hljs-number">56</span>+<span class="hljs-number">00</span>:<span class="hljs-number">00</span> (<span class="hljs-attr">VALID</span>: <span class="hljs-number">89</span> days)
    <span class="hljs-title class_">Certificate</span> <span class="hljs-title class_">Path</span>: <span class="hljs-regexp">/etc/</span>letsencrypt/live/yourdomain.<span class="hljs-property">com</span>/fullchain.<span class="hljs-property">pem</span>
    <span class="hljs-title class_">Private</span> <span class="hljs-title class_">Key</span> <span class="hljs-title class_">Path</span>: <span class="hljs-regexp">/etc/</span>letsencrypt/live/yourdomain.<span class="hljs-property">com</span>/privkey.<span class="hljs-property">pem</span>
</code></pre>
<hr/>
<h4 data-id="heading-8">æ­¥éª¤ 6ï¼šé…ç½®è‡ªåŠ¨ç»­æœŸï¼ˆå…³é”®ï¼ï¼‰</h4>
<h5 data-id="heading-9">6.1 æµ‹è¯•ç»­æœŸæµç¨‹ï¼ˆå®‰å…¨ï¼Œä¸ä¼šçœŸç»­ï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash">sudo certbot renew --dry-run
</code></pre>
<p>âœ… åº”çœ‹åˆ°ï¼š<code>Congratulations, all simulated renewals succeeded.</code></p>
<h5 data-id="heading-10">6.2 è®¾ç½®å®šæ—¶ä»»åŠ¡</h5>
<pre><code class="hljs language-bash" lang="bash">sudo crontab -e
</code></pre>
<p>åœ¨æ‰“å¼€çš„ç¼–è¾‘å™¨ä¸­<strong>æŒ‰ <code>i</code> è¿›å…¥æ’å…¥æ¨¡å¼</strong>ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-cron" lang="cron">0 2 * * * /usr/bin/certbot renew --quiet --post-hook "systemctl reload nginx"
</code></pre>
<p>ä¿å­˜é€€å‡ºï¼š</p>
<ul>
<li>æŒ‰ <code>ESC</code></li>
<li>è¾“å…¥ <code>:wq</code> å¹¶å›è½¦</li>
</ul>
<h5 data-id="heading-11">6.3 éªŒè¯ cron æ˜¯å¦è®¾ç½®æˆåŠŸ</h5>
<pre><code class="hljs language-bash" lang="bash">sudo crontab -l
</code></pre>
<p>åº”è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">0 2 * * * /usr/bin/certbot renew --quiet --post-hook <span class="hljs-string">"systemctl reload nginx"</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">ğŸ” ä¸‰ã€å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-13">âŒ é—®é¢˜ 1ï¼šç”³è¯·è¯ä¹¦æ—¶è¶…æ—¶ï¼ˆTimeout during connectï¼‰</h4>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Fetching http:<span class="hljs-comment">//yourdomain.com/.well-known/acme-challenge/...: Timeout</span>
</code></pre>
<p><strong>åŸå› ä¸è§£å†³</strong>ï¼š</p>

























<table><thead><tr><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>é˜¿é‡Œäº‘å®‰å…¨ç»„æœªå¼€ 80 ç«¯å£</td><td>æ§åˆ¶å° â†’ å®‰å…¨ç»„ â†’ æ·»åŠ  80 å…¥ç«™è§„åˆ™</td></tr><tr><td>åŸŸåæœªå¤‡æ¡ˆï¼ˆä¸­å›½å†…åœ° ECSï¼‰</td><td>å¤‡æ¡ˆåŸŸåï¼Œæˆ–æ”¹ç”¨ <strong>DNS éªŒè¯</strong>ï¼ˆè§é™„å½•ï¼‰</td></tr><tr><td>DNS æœªè§£æåˆ°å…¬ç½‘ IP</td><td>æ£€æŸ¥ A è®°å½•ï¼š<code>dig yourdomain.com</code></td></tr><tr><td>æœ¬åœ°é˜²ç«å¢™é˜»æ­¢</td><td>æ£€æŸ¥ï¼š<code>sudo firewall-cmd --list-ports</code>ï¼ˆAlibaba Cloud Linux é»˜è®¤å…³é—­ï¼‰</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-14">âŒ é—®é¢˜ 2ï¼šCertbot æ‰¾ä¸åˆ° server_name</h4>
<p><strong>é”™è¯¯</strong>ï¼š<code>No matching server blocks located</code></p>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿ Nginx é…ç½®ä¸­ <code>server_name</code> <strong>ç²¾ç¡®åŒ…å«</strong> <code>yourdomain.com</code></li>
<li>é…ç½®æ–‡ä»¶å¿…é¡»åœ¨ <code>/etc/nginx/conf.d/</code> æˆ–è¢« <code>nginx.conf</code> çš„ <code>include</code> åŒ…å«</li>
</ul>
<hr/>
<h4 data-id="heading-15">âŒ é—®é¢˜ 3ï¼šè‡ªåŠ¨ç»­æœŸå¤±è´¥</h4>
<p><strong>æ’æŸ¥æ­¥éª¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ cron æ‰§è¡Œæ—¥å¿—</span>
sudo grep CRON /var/log/cron

<span class="hljs-comment"># æŸ¥çœ‹ certbot æ—¥å¿—</span>
sudo <span class="hljs-built_in">tail</span> -n 20 /var/log/letsencrypt/letsencrypt.log

<span class="hljs-comment"># æ‰‹åŠ¨è¿è¡Œç»­æœŸï¼ˆä¸é™é»˜ï¼‰</span>
sudo certbot renew
</code></pre>
<hr/>
<h3 data-id="heading-16">ğŸ“ é™„å½•ï¼šæ›¿ä»£æ–¹æ¡ˆ â€”â€” DNS éªŒè¯ï¼ˆæ— éœ€ 80 ç«¯å£ï¼‰</h3>
<blockquote>
<p>é€‚ç”¨äºï¼š<strong>æœªå¤‡æ¡ˆåŸŸå</strong> æˆ– <strong>æ— æ³•å¼€æ”¾ 80 ç«¯å£</strong> çš„åœºæ™¯</p>
</blockquote>
<h4 data-id="heading-17">æ­¥éª¤ Aï¼šè·å–é˜¿é‡Œäº‘ AccessKey</h4>
<ol>
<li>è¿›å…¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fram.console.aliyun.com%2F" target="_blank" title="https://ram.console.aliyun.com/" ref="nofollow noopener noreferrer">RAM æ§åˆ¶å°</a></li>
<li>åˆ›å»ºç”¨æˆ·ï¼Œæˆæƒ <code>AliyunDNSFullAccess</code></li>
<li>è·å– <code>AccessKey ID</code> å’Œ <code>AccessKey Secret</code></li>
</ol>
<h4 data-id="heading-18">æ­¥éª¤ Bï¼šé…ç½® DNS æ’ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ’ä»¶</span>
sudo dnf install -y certbot-dns-alidns

<span class="hljs-comment"># åˆ›å»ºå‡­è¯æ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> -p ~/.secrets
<span class="hljs-built_in">cat</span> &gt; ~/.secrets/alidns.ini &lt;&lt;<span class="hljs-string">EOF
dns_alidns_access_key = YOUR_ACCESS_KEY_ID
dns_alidns_secret_key = YOUR_ACCESS_KEY_SECRET
EOF</span>

<span class="hljs-built_in">chmod</span> 600 ~/.secrets/alidns.ini
</code></pre>
<h4 data-id="heading-19">æ­¥éª¤ Cï¼šç”³è¯·è¯ä¹¦</h4>
<pre><code class="hljs language-bash" lang="bash">sudo certbot certonly \
  --dns-alidns \
  --dns-alidns-credentials ~/.secrets/alidns.ini \
  -d yourdomain.com
</code></pre>
<h4 data-id="heading-20">æ­¥éª¤ Dï¼šæ‰‹åŠ¨é…ç½® Nginx HTTPS</h4>
<p>ç¼–è¾‘ <code>/etc/nginx/conf.d/yourdomain.com.conf</code>ï¼Œæ·»åŠ ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen 443 ssl;
    server_name yourdomain.com;
    root /usr/share/nginx/html;

    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;
}
</code></pre>
<p>é‡è½½ Nginxï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo nginx -t &amp;&amp; sudo systemctl reload nginx
</code></pre>
<blockquote>
<p>âš ï¸ DNS éªŒè¯æ–¹å¼ <strong>ä»éœ€é…ç½®è‡ªåŠ¨ç»­æœŸ cron</strong>ï¼ˆåŒä¸Šï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-21">âœ… å››ã€æ€»ç»“</h3>








































<table><thead><tr><th>æ­¥éª¤</th><th>å‘½ä»¤/æ“ä½œ</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>1. å®‰è£… Nginx</td><td><code>sudo dnf install nginx</code></td><td>âœ…</td></tr><tr><td>2. é…ç½®ç«™ç‚¹</td><td>åˆ›å»º <code>/etc/nginx/conf.d/*.conf</code></td><td>âœ…</td></tr><tr><td>3. å®‰è£… Certbot</td><td><code>sudo dnf install certbot...</code></td><td>âœ…</td></tr><tr><td>4. ç”³è¯·è¯ä¹¦</td><td><code>sudo certbot --nginx -d yourdomain.com</code></td><td>âœ…</td></tr><tr><td>5. è®¾ç½®è‡ªåŠ¨ç»­æœŸ</td><td><code>sudo crontab -e</code> + æ·»åŠ ä»»åŠ¡</td><td>âœ…</td></tr><tr><td>6. æµ‹è¯•ç»­æœŸ</td><td><code>sudo certbot renew --dry-run</code></td><td>âœ…</td></tr></tbody></table>
<blockquote>
<p>ğŸ‰ <strong>å®Œæˆï¼ä½ çš„ç½‘ç«™ç°åœ¨æ‹¥æœ‰å…è´¹ã€è‡ªåŠ¨æ›´æ–°çš„ HTTPS åŠ å¯†ã€‚</strong></p>
</blockquote>
<hr/>
<p>ğŸ”— <strong>å®˜æ–¹å‚è€ƒ</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcertbot.eff.org%2F" target="_blank" title="https://certbot.eff.org/" ref="nofollow noopener noreferrer">Certbot å®˜ç½‘</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fletsencrypt.org%2Fdocs%2F" target="_blank" title="https://letsencrypt.org/docs/" ref="nofollow noopener noreferrer">Let's Encrypt æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F25471.html" target="_blank" title="https://help.aliyun.com/document_detail/25471.html" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®</a></li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæ¯ 3 ä¸ªæœˆæ‰‹åŠ¨è¿è¡Œä¸€æ¬¡ <code>sudo certbot certificates</code> æ£€æŸ¥åˆ°æœŸæ—¶é—´ï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™etså®ç°å¼ºåˆ¶èœ‚çªç½‘ç»œ]]></title>    <link>https://juejin.cn/post/7575090551357472820</link>    <guid>https://juejin.cn/post/7575090551357472820</guid>    <pubDate>2025-11-23T05:56:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357472820" data-draft-id="7575090551357456436" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™etså®ç°å¼ºåˆ¶èœ‚çªç½‘ç»œ"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-23T05:56:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³¢å„¿èœ"/> <meta itemprop="url" content="https://juejin.cn/user/2735240659351112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™etså®ç°å¼ºåˆ¶èœ‚çªç½‘ç»œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240659351112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³¢å„¿èœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T05:56:13.000Z" title="Sun Nov 23 2025 05:56:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç”¨æˆ·åŒæ—¶å¼€å¯ wifi/cellular æ—¶ï¼ŒæœŸæœ›å¼ºè¡Œä½¿ç”¨ cellular è®¿é—®ç½‘ç»œï¼Œè¿™æ˜¯ä¸ªæ¯”è¾ƒå¸¸è§„çš„è¯‰æ±‚ã€‚
é¸¿è’™æä¾›äº†å¤§é‡çš„ ets ç½‘ç»œåŸºç¡€åº“ï¼Œæœ¬æ¥ä»¥ä¸ºèƒ½ç®€å•å®ç°è¿™ä¸ªèƒ½åŠ›ï¼Œå´æœ‰äº›ä»¤äººä¸è§£çš„å‘ã€‚
ä½œä¸ºåŸºå»ºæ¥è¯´ï¼Œè§„é¿ ets è€Œç›´æ¥ä½¿ç”¨ C++ å¯èƒ½æ‰æ˜¯æœ€ä¼˜è§£ã€‚</p>
<h3 data-id="heading-0">è·å–èœ‚çªç½‘ç»œ IP</h3>
<p>ç¬¬ä¸€ä¸ªå‘å°±æ˜¯<code>connection.getAllNets()</code>æ¥å£åœ¨ wifi/cellular åŒæ—¶å¼€å¯æ—¶å¹¶ä¸ä¼šè¿”å› cellular çš„<code>NetHandle</code>ï¼Œä»…å¼€å¯ cellular æ‰èƒ½æ‹¿åˆ°å…¶<code>NetHandle</code>ã€‚</p>
<p>ä½†å‘ç°ç›‘å¬<code>NetConnection</code>çš„<code>netConnectionPropertiesChange</code>äº‹ä»¶åï¼Œåœ¨ç½‘ç»œä¸å˜åŒ–æ—¶ï¼Œä»…å¼€å¯ wifi ä¼šå›è°ƒã€ä»…å¼€å¯ cellular ä¸å›è°ƒã€wifi/cellular åŒæ—¶å¼€å¯æ—¶ä¼šå›è°ƒä¸¤ä¸ªç½‘å¡çš„<code>NetHandle</code>ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ¥å£è¯¡å¼‚çš„è¡¨ç°ï¼Œç»“åˆèµ·æ¥å´æ°æ°èƒ½æ‹¿åˆ° cellular çš„ <code>NetHandle</code>ã€‚</p>
<h3 data-id="heading-1">Socket æŒ‡å®šæœ¬åœ° IP</h3>
<p>ç¬¬äºŒä¸ªå‘æ˜¯<code>socket.TCPSocket</code>çš„<code>bind</code>æ“ä½œæ˜¯ä¸ªè™šå‡æ¥å£ï¼Œæ„å‘³ç€å®ƒå¹¶ä¸ä¼šä½¿ç”¨ä½ ä¼ å…¥çš„ IP å»ç»‘å®šï¼Œéš¾ä»¥ç†è§£è®¾è®¡è€…çš„åˆè¡·ï¼Œç»è¿‡ä¸é¸¿è’™ä¾§çš„æ²Ÿé€šï¼Œè¿™ä¼¼ä¹ä¸æ˜¯å¿…é¡»è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿç»™ä¸å‡ºæœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚</p>
<p>çœ‹é ets ç½‘ç»œæ–‡æ¡£ï¼Œå‘ç°ä¸€äº›å¯è¡Œæ€§ã€‚</p>
<p><code>socket.TLSSocket</code>æ˜¯æ”¯æŒ<code>bind</code>æŒ‡å®š IP çš„ï¼Œå½“å®ƒå´ä¸æ”¯æŒæŒ‡å®šç½‘å¡ï¼ˆä¹Ÿå°±æ˜¯<code>NetHandle</code>ï¼‰ï¼Œæ— æ³•æ„å»ºæˆåŠŸã€‚
è€Œ<code>socket.TCPSocket</code>æ˜¯æ”¯æŒæŒ‡å®šç½‘å¡çš„ï¼Œä¸”æä¾›äº†ä¸€ä¸ªå°† TCP å‡çº§åˆ° TLS çš„æ¥å£ï¼š<code>constructTLSSocketInstance(tcpSocket: TCPSocket)</code>ã€‚</p>
<p>æ˜¯çš„ï¼Œåˆæ˜¯ä¸€äº›è¯¡å¼‚çš„è®¾è®¡å’Œè¡¨ç°ï¼Œä½†æ°å¥½èƒ½ç»“åˆä»¥å®ç°æˆ‘ä»¬çš„è¯‰æ±‚ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">    <span class="hljs-comment">// åˆ›å»º TCP</span>
    let tcp: socket.TCPSocket = socket.<span class="hljs-built_in">constructTCPSocketInstance</span>();
    <span class="hljs-comment">// TCP bind ç›®æ ‡ç½‘å¡ IPï¼ˆè™½ç„¶ bind åœ¨åº•å±‚ä»€ä¹ˆéƒ½æ²¡åšï¼Œä½†è¿™ä¸€æ­¥ä»ç„¶è¦åšï¼Œä¸ç„¶åé¢ NetHandle bind ä¹Ÿå¯èƒ½å‡ºé—®é¢˜ï¼‰</span>
    await tcp<span class="hljs-selector-class">.bind</span>({ address: cellular_ip });
    <span class="hljs-comment">// æŠŠ TCP bind åˆ°ç›®æ ‡ç½‘å¡ï¼ˆè®© TCP è¯·æ±‚æ—¶ä½¿ç”¨ç›®æ ‡ç½‘å¡ï¼‰</span>
    await handle<span class="hljs-selector-class">.bindSocket</span>(tcp);
    <span class="hljs-comment">// TCP è¿›è¡Œè¿æ¥ï¼ˆä¸è¿æ¥æ— æ³•å‡çº§åˆ° TLSï¼‰</span>
    await tcp<span class="hljs-selector-class">.connect</span>(options);
    <span class="hljs-comment">// TCP å‡çº§åˆ° TLS</span>
    let tlsSocket = socket<span class="hljs-selector-class">.constructTLSSocketInstance</span>(tcp);
    <span class="hljs-comment">// TLS å‘èµ·è¿æ¥</span>
    await tlsSocket<span class="hljs-selector-class">.connect</span>(this.attr.connectOptions);
    <span class="hljs-comment">// ç›‘å¬ç«¯å£ï¼ˆå¿…é¡»åœ¨è¿æ¥æˆåŠŸä¹‹åï¼‰</span>
    <span class="hljs-built_in">listenSocket</span>(tlsSocket);
    <span class="hljs-comment">// å‘é€æ•°æ®</span>
    await tlsSocket<span class="hljs-selector-class">.send</span>(data);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºLangGraphçš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ï¼šReflectionä¸ReflexionæŠ€æœ¯è¯¦è§£ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7575159361904525353</link>    <guid>https://juejin.cn/post/7575159361904525353</guid>    <pubDate>2025-11-23T04:40:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575159361904525353" data-draft-id="7575442779038384170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºLangGraphçš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ï¼šReflectionä¸ReflexionæŠ€æœ¯è¯¦è§£ä¸å®ç°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T04:40:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œè€…å¸¸è‡³ä¸ºè€…å¸¸æˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2068602958385020"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºLangGraphçš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ï¼šReflectionä¸ReflexionæŠ€æœ¯è¯¦è§£ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2068602958385020/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œè€…å¸¸è‡³ä¸ºè€…å¸¸æˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T04:40:39.000Z" title="Sun Nov 23 2025 04:40:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç›®å½•</h2>
<p>å¼•è¨€ï¼šä»€ä¹ˆæ˜¯è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ï¼Ÿ</p>
<p>ä¸€. Reflectionæ™ºèƒ½ä½“ï¼šè‡ªæˆ‘æ‰¹è¯„çš„è‰ºæœ¯</p>
<ul>
<li>æ ¸å¿ƒæ¦‚å¿µ</li>
<li>å·¥ä½œåŸç†</li>
<li>Reflectionæ¨¡å¼å·¥ä½œæµç¨‹</li>
<li>å…³é”®æŠ€æœ¯ç‰¹å¾</li>
<li>LangGraphå®ç°æ¶æ„</li>
<li>ä»£ç å®ç°æ ¸å¿ƒ</li>
<li>ä¼˜åŠ¿ä¸ç‰¹ç‚¹</li>
</ul>
<p>äºŒ. Reflexionæ™ºèƒ½ä½“ï¼šçŸ¥è¯†æ£€ç´¢çš„æ™ºæ…§</p>
<ul>
<li>æ ¸å¿ƒæ¦‚å¿µ</li>
<li>å·¥ä½œåŸç†</li>
<li>Reflexionæ¨¡å¼å·¥ä½œæµç¨‹</li>
<li>å…³é”®æŠ€æœ¯ç‰¹å¾</li>
<li>LangGraphå®ç°æ¶æ„</li>
<li>ä»£ç å®ç°æ ¸å¿ƒ</li>
<li>ä¼˜åŠ¿ä¸ç‰¹ç‚¹</li>
</ul>
<p>ä¸‰.ä¸¤ç§æ™ºèƒ½ä½“æ¨¡å¼å¯¹æ¯”</p>
<ul>
<li>æ¶æ„å¯¹æ¯”</li>
<li>æ€§èƒ½å¯¹æ¯”è¡¨</li>
<li>é€‰æ‹©ç­–ç•¥</li>
</ul>
<p>å››. ç³»ç»Ÿæ•´ä½“æ¶æ„</p>
<p>äº”. å…³é”®æŠ€æœ¯å®ç°</p>
<ul>
<li>çœŸæ­£çš„æµå¼è¾“å‡ºæ¶æ„</li>
<li>é…ç½®å‚æ•°åŠ¨æ€åŒ–</li>
<li>LangGraphå·¥ä½œæµçŠ¶æ€ç®¡ç†</li>
<li>Ollamaæœ¬åœ°æ¨¡å‹é›†æˆ</li>
</ul>
<p>å…­.æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</p>
<ul>
<li>æµå¼è¾“å‡ºæ€§èƒ½ä¼˜åŒ–</li>
<li>æ¨¡å‹è°ƒç”¨ä¼˜åŒ–</li>
</ul>
<p>ä¸ƒ.æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</p>
<p>å…«.åº”ç”¨è¾“å‡ºç¤ºä¾‹</p>
<p>æ€»ç»“</p>
<p>æºä»£ç </p>
<h2 data-id="heading-1">å¼•è¨€ï¼šä»€ä¹ˆæ˜¯è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ï¼Ÿ</h2>
<p>åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ™ºèƒ½ä½“ç³»ç»Ÿå·²ç»ä»ç®€å•çš„æŒ‡ä»¤å“åº”æ¼”è¿›ä¸ºå…·å¤‡è‡ªæˆ‘æ”¹è¿›å’Œå­¦ä¹ èƒ½åŠ›çš„å¤æ‚ç³»ç»Ÿã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸¤ç§æ ¸å¿ƒçš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“æ¨¡å¼ï¼š<strong>Reflectionï¼ˆåæ€å‹ï¼‰<strong>å’Œ</strong>Reflexionï¼ˆé€’è¿›å¼ï¼‰</strong>ï¼Œå¹¶è¯¦ç»†ä»‹ç»åŸºäºLangGraphæ¡†æ¶çš„å·¥ç¨‹å®ç°ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¶æ„è®¾è®¡ã€å…³é”®æŠ€æœ¯å®ç°å’Œæ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>ä¼ ç»Ÿçš„AIç³»ç»Ÿé€šå¸¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆç­”æ¡ˆçš„æ¨¡å¼ï¼š"è¾“å…¥ â†’ å¤„ç† â†’ è¾“å‡º"ã€‚è€Œè‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“é‡‡ç”¨å¾ªç¯ä¼˜åŒ–çš„æ€è·¯ï¼š"ç”Ÿæˆ â†’ è¯„ä¼° â†’ æ”¹è¿› â†’ å†è¯„ä¼°"ï¼Œç›´åˆ°è¾¾åˆ°æ»¡æ„çš„ç»“æœã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µæ¥æºäºäººç±»çš„å­¦ä¹ è¿‡ç¨‹ï¼š</p>
<ul>
<li>æˆ‘ä»¬ä¸æ˜¯ç¬¬ä¸€æ¬¡å°±å†™å‡ºå®Œç¾çš„æ–‡ç« </li>
<li>æˆ‘ä»¬ä¼šå…ˆå†™ä¸ªè‰ç¨¿ï¼Œç„¶åå›é¡¾ã€ä¿®æ”¹ã€å†å®Œå–„</li>
<li>æœ‰æ—¶ä¼šæŸ¥é˜…èµ„æ–™ã€å¯»æ±‚å»ºè®®ï¼Œç„¶åé‡æ–°ç»„ç»‡æ€è·¯</li>
</ul>
<p>è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“æ­£æ˜¯å°†è¿™ç§äººç±»æ€ç»´è¿‡ç¨‹æŠ½è±¡ä¸ºç®—æ³•ï¼Œè®©AIç³»ç»Ÿå…·å¤‡äº†æŒç»­æ”¹è¿›çš„èƒ½åŠ›ã€‚</p>
<p><strong>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹ç³»ç»Ÿå®ç°çš„ç•Œé¢ï¼Œå¯¹è¿™ä¸¤ä¸ªæ¨¡å¼çš„Agentï¼Œæœ‰ä¸ªæ„Ÿæ€§è®¤è¯†ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88938b4703214b0093248ada041ca2b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=8BF1epKcWnRit1CWwPbnBXMdbSU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebb53c0e643548e390854f7f90c76dc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=dqdJbr%2BrW7tJu0yTnDZrIGNB%2B0U%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e1845e874be4b10bd4ecfed84d098c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=8JUrkXHAWheIadmsz2tbRAlpkXw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8733058e5fd491db88fb96abce8f863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=23ZvbW0qt8zeUj8Je%2FVHWnMETfU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083beefaa38f445d94bccb9737325b97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=NLgG0Z%2FGAOhN8LmNWfPdAaVYpM0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea8adaf47fb4bc0a10c6b3cf3132329~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=cld9cyWiu%2FXS6iL5AcU1724%2B20U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€. Reflectionæ™ºèƒ½ä½“ï¼šè‡ªæˆ‘æ‰¹è¯„çš„è‰ºæœ¯</h2>
<h3 data-id="heading-3">æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Reflectionæ™ºèƒ½ä½“æ¨¡æ‹Ÿäº†äººç±»çš„è‡ªæˆ‘æ‰¹è¯„è¿‡ç¨‹ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>è®©AIç”Ÿæˆå†…å®¹ï¼Œç„¶åè®©AIè‡ªå·±æ‰¹è¯„å’Œæ”¹è¿›è¿™äº›å†…å®¹</strong>ã€‚</p>
<h3 data-id="heading-4">å·¥ä½œåŸç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/736d226553e04deb8d949b0b6bd8049c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=6jc9wjM5XM8CS6hjvRkJXD6wx9k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">Reflectionæ¨¡å¼å·¥ä½œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7755e29d44ed4fa2b2d858ce4f43d786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=RMhyc1pT3fDoZl91H%2F01wW5MwVc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">å…³é”®æŠ€æœ¯ç‰¹å¾</h3>
<ol>
<li><strong>åŒé‡èº«ä»½æ¨¡å¼</strong>
<ul>
<li>ç”Ÿæˆè€…ï¼šè´Ÿè´£åˆ›å»ºåˆå§‹å†…å®¹</li>
<li>æ‰¹è¯„è€…ï¼šè´Ÿè´£è¯„ä¼°å’Œæ”¹è¿›å†…å®¹</li>
</ul>
</li>
<li><strong>è¿­ä»£æ”¹è¿›å¾ªç¯</strong>
<ul>
<li>æ¯æ¬¡è¿­ä»£éƒ½ä¼šäº§ç”Ÿæ‰¹è¯„æ„è§</li>
<li>åŸºäºæ‰¹è¯„è¿›è¡Œé’ˆå¯¹æ€§æ”¹è¿›</li>
<li>æŒç»­ä¼˜åŒ–ç›´åˆ°æ”¶æ•›</li>
</ul>
</li>
<li><strong>è´¨é‡è¯„ä¼°æœºåˆ¶</strong>
<ul>
<li>è®¾ç½®æ”¶æ•›æ ‡å‡†ï¼ˆå¦‚è¿­ä»£æ¬¡æ•°ã€è´¨é‡åˆ†æ•°ï¼‰</li>
<li>æ™ºèƒ½ä½“è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­æ”¹è¿›</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">LangGraphå®ç°æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4abf8c73a35d4174a872a918b253e79b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=xTuB04ge%2FDgEY6p6R%2BBpZ5c7Nxo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">ä»£ç å®ç°æ ¸å¿ƒ</h3>
<p>ä»é¡¹ç›®æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒReflectionæ™ºèƒ½ä½“çš„æ ¸å¿ƒå®ç°åŒ…å«ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">    @dataclass</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflectionState</span>:
        <span class="hljs-string">"""Reflectionæ™ºèƒ½ä½“çŠ¶æ€"""</span>
        messages: <span class="hljs-type">List</span>[BaseMessage]          <span class="hljs-comment"># æ¶ˆæ¯å†å²</span>
        original_input: <span class="hljs-built_in">str</span>                  <span class="hljs-comment"># åŸå§‹è¾“å…¥</span>
        iteration_count: <span class="hljs-built_in">int</span>                 <span class="hljs-comment"># è¿­ä»£æ¬¡æ•°</span>
        final_output: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]          <span class="hljs-comment"># æœ€ç»ˆè¾“å‡º</span>
        critique_history: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]          <span class="hljs-comment"># æ‰¹è¯„å†å²</span>
        improvement_history: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]       <span class="hljs-comment"># æ”¹è¿›å†å²</span>
        is_converged: <span class="hljs-built_in">bool</span>                   <span class="hljs-comment"># æ˜¯å¦æ”¶æ•›</span>
        error_message: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]         <span class="hljs-comment"># é”™è¯¯ä¿¡æ¯</span>
</code></pre>
<p>å…³é”®å·¥ä½œæµç¨‹èŠ‚ç‚¹ï¼š</p>
<p><strong>1. ç”ŸæˆèŠ‚ç‚¹ï¼ˆgenerate_contentï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_generate_content_node</span>(<span class="hljs-params">self, state: ReflectionState</span>) -&gt; ReflectionState:
        <span class="hljs-string">"""å†…å®¹ç”ŸæˆèŠ‚ç‚¹"""</span>
        messages = [
            SystemMessage(content=self.generation_prompt),
            HumanMessage(content=state.original_input)
        ]
        
        response = <span class="hljs-keyword">await</span> self.llm_manager.generate(
            LLMRequest(messages=messages, **self.config.get(<span class="hljs-string">"generation"</span>, {}))
        )
        
        state.messages.append(AIMessage(content=response.content))
        <span class="hljs-keyword">return</span> state
</code></pre>
<p><strong>2. æ‰¹è¯„èŠ‚ç‚¹ï¼ˆcritique_contentï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_critique_content_node</span>(<span class="hljs-params">self, state: ReflectionState</span>) -&gt; ReflectionState:
        <span class="hljs-string">"""è‡ªæˆ‘æ‰¹è¯„èŠ‚ç‚¹"""</span>
        critique_prompt = self._build_critique_prompt(state)
        
        response = <span class="hljs-keyword">await</span> self.llm_manager.generate(
            LLMRequest(messages=[HumanMessage(content=critique_prompt)])
        )
        
        state.critique_history.append(response.content)
        <span class="hljs-keyword">return</span> state
</code></pre>
<p><strong>3. æ”¹è¿›èŠ‚ç‚¹ï¼ˆimprove_contentï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_improve_content_node</span>(<span class="hljs-params">self, state: ReflectionState</span>) -&gt; ReflectionState:
        <span class="hljs-string">"""å†…å®¹æ”¹è¿›èŠ‚ç‚¹"""</span>
        improvement_prompt = self._build_improvement_prompt(state)
        
        response = <span class="hljs-keyword">await</span> self.llm_manager.generate(
            LLMRequest(messages=[HumanMessage(content=improvement_prompt)])
        )
        
        state.improvement_history.append(response.content)
        state.messages.append(AIMessage(content=response.content))
        state.iteration_count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> state
</code></pre>
<h3 data-id="heading-9">ä¼˜åŠ¿ä¸ç‰¹ç‚¹</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ç®€å•ç›´æ¥ï¼Œæ— éœ€å¤–éƒ¨æ•°æ®æº</li>
<li>è¿­ä»£é€Ÿåº¦è¾ƒå¿«ï¼Œèµ„æºæ¶ˆè€—ç›¸å¯¹è¾ƒä½</li>
<li>é€‚åˆå†…å®¹ç”Ÿæˆå’Œä¼˜åŒ–ä»»åŠ¡</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ–‡ç« å†™ä½œå’Œç¼–è¾‘</li>
<li>ä»£ç ç”Ÿæˆå’Œä¼˜åŒ–</li>
<li>åˆ›æ„å†…å®¹äº§å‡º</li>
<li>ç®€å•çš„é—®é¢˜è§£ç­”</li>
</ul>
<h2 data-id="heading-10">äºŒ. Reflexionæ™ºèƒ½ä½“ï¼šçŸ¥è¯†æ£€ç´¢çš„æ™ºæ…§</h2>
<h3 data-id="heading-11">æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Reflexionæ™ºèƒ½ä½“åœ¨ReflectionåŸºç¡€ä¸Šå¢åŠ äº†å¤–éƒ¨çŸ¥è¯†æ£€ç´¢èƒ½åŠ›ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ä¸ä»…è‡ªæˆ‘æ‰¹è¯„ï¼Œè¿˜è¦ä¸»åŠ¨å¯»æ±‚å¤–éƒ¨çŸ¥è¯†å’Œä¸“ä¸šå»ºè®®</strong>ã€‚</p>
<h3 data-id="heading-12">å·¥ä½œåŸç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37cdfa7059344743bab78abc453b64a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=OIsJRX9t80UC8eZiObqp9Ql9hKg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">Reflexionæ¨¡å¼å·¥ä½œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf34f0be7e1c44e1896ae38781a8ceea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=5jzOjRKdlMTnsau%2FfAX59BMhPSA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">å…³é”®æŠ€æœ¯ç‰¹å¾</h3>
<ol>
<li><strong>ä¸‰å…ƒè§’è‰²æ¨¡å¼</strong>
<ul>
<li>ç”Ÿæˆè€…ï¼šåˆ›å»ºåˆå§‹å“åº”</li>
<li>è‡ªæˆ‘åæ€è€…ï¼šè¯†åˆ«çŸ¥è¯†ç¼ºå£</li>
<li>å¤–éƒ¨çŸ¥è¯†æ•´åˆè€…ï¼šæœé›†å’Œæ•´åˆå¤–éƒ¨ä¿¡æ¯</li>
</ul>
</li>
<li><strong>çŸ¥è¯†æ£€ç´¢å¾ªç¯</strong>
<ul>
<li>è‡ªåŠ¨è¯†åˆ«éœ€è¦è¡¥å……çš„çŸ¥è¯†ç‚¹</li>
<li>ä¸»åŠ¨æœç´¢ç›¸å…³èµ„æ–™</li>
<li>å°†å¤–éƒ¨çŸ¥è¯†æ•´åˆåˆ°å“åº”ä¸­</li>
</ul>
</li>
<li><strong>æ™ºèƒ½æŸ¥è¯¢ç”Ÿæˆ</strong>
<ul>
<li>åˆ†æå½“å‰å“åº”çš„ä¸è¶³</li>
<li>ç”Ÿæˆç²¾å‡†çš„æœç´¢æŸ¥è¯¢</li>
<li>è¯„ä¼°çŸ¥è¯†æºçš„å¯é æ€§</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">LangGraphå®ç°æ¶æ„</h3>
<p>Reflexionæ™ºèƒ½ä½“çš„LangGraphå®ç°æ›´åŠ å¤æ‚ï¼ŒåŒ…å«çŸ¥è¯†æ£€ç´¢å­å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c11e99f22de481f808afbf2b68b3d18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=3OI2YASL6vMnnftmGStmG0ZOr1Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">ä»£ç å®ç°æ ¸å¿ƒ</h3>
<p>Reflexionæ™ºèƒ½ä½“çš„çŠ¶æ€ç®¡ç†æ›´åŠ å¤æ‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">    @dataclass</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflexionState</span>:
        <span class="hljs-string">"""Reflexionæ™ºèƒ½ä½“çŠ¶æ€"""</span>
        messages: <span class="hljs-type">List</span>[BaseMessage]           <span class="hljs-comment"># æ¶ˆæ¯å†å²</span>
        original_input: <span class="hljs-built_in">str</span>                   <span class="hljs-comment"># åŸå§‹è¾“å…¥</span>
        current_iteration: <span class="hljs-built_in">int</span>               <span class="hljs-comment"># å½“å‰è¿­ä»£æ¬¡æ•°</span>
        initial_response: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]      <span class="hljs-comment"># åˆå§‹å“åº”</span>
        self_reflection: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]       <span class="hljs-comment"># è‡ªçœå†…å®¹</span>
        search_queries: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]            <span class="hljs-comment"># æœç´¢æŸ¥è¯¢</span>
        external_knowledge: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]       <span class="hljs-comment"># å¤–éƒ¨çŸ¥è¯†</span>
        final_response: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]        <span class="hljs-comment"># æœ€ç»ˆå“åº”</span>
        knowledge_sources: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]         <span class="hljs-comment"># çŸ¥è¯†æ¥æº</span>
        is_converged: <span class="hljs-built_in">bool</span>                   <span class="hljs-comment"># æ˜¯å¦æ”¶æ•›</span>
        error_message: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]         <span class="hljs-comment"># é”™è¯¯ä¿¡æ¯</span>
</code></pre>
<p>æ ¸å¿ƒå·¥ä½œèŠ‚ç‚¹åŒ…æ‹¬ï¼š</p>
<p><strong>1. è‡ªçœåˆ†æèŠ‚ç‚¹ï¼ˆself_reflectï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_self_reflect_node</span>(<span class="hljs-params">self, state: ReflexionState</span>) -&gt; ReflexionState:
        <span class="hljs-string">"""è‡ªçœåˆ†æèŠ‚ç‚¹"""</span>
        reflection_prompt = <span class="hljs-string">f"""
        è¯·åˆ†æä»¥ä¸‹å“åº”çš„ä¸è¶³ä¹‹å¤„ï¼š
        
        ç”¨æˆ·è¾“å…¥ï¼š<span class="hljs-subst">{state.original_input}</span>
        å½“å‰å“åº”ï¼š<span class="hljs-subst">{state.initial_response}</span>
        
        è¯·è¯†åˆ«ï¼š
        1. å“åº”ä¸­çš„çŸ¥è¯†ç¼ºå£
        2. éœ€è¦è¿›ä¸€æ­¥æŸ¥è¯çš„ç»†èŠ‚
        3. å¯ä»¥æ”¹è¿›çš„å…·ä½“æ–¹é¢
        """</span>
        
        response = <span class="hljs-keyword">await</span> self.llm_manager.generate(
            LLMRequest(messages=[HumanMessage(content=reflection_prompt)])
        )
        
        state.self_reflection = response.content
        <span class="hljs-keyword">return</span> state
</code></pre>
<p><strong>2. çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹ï¼ˆsearch_knowledgeï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_search_knowledge_node</span>(<span class="hljs-params">self, state: ReflexionState</span>) -&gt; ReflexionState:
        <span class="hljs-string">"""çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> state.search_queries:
            <span class="hljs-keyword">return</span> state
        
        <span class="hljs-comment"># ä½¿ç”¨çŸ¥è¯†æ£€ç´¢å™¨æœç´¢å¤–éƒ¨ä¿¡æ¯</span>
        knowledge_results = <span class="hljs-keyword">await</span> self.knowledge_retriever.search_external_knowledge(
            state.search_queries
        )
        
        state.external_knowledge.extend(knowledge_results)
        <span class="hljs-keyword">return</span> state
</code></pre>
<p><strong>3. çŸ¥è¯†æ•´åˆèŠ‚ç‚¹ï¼ˆintegrate_knowledgeï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_integrate_knowledge_node</span>(<span class="hljs-params">self, state: ReflexionState</span>) -&gt; ReflexionState:
        <span class="hljs-string">"""çŸ¥è¯†æ•´åˆèŠ‚ç‚¹"""</span>
        integration_prompt = self._build_integration_prompt(state)
        
        response = <span class="hljs-keyword">await</span> self.llm_manager.generate(
            LLMRequest(messages=[HumanMessage(content=integration_prompt)])
        )
        
        state.final_response = response.content
        <span class="hljs-keyword">return</span> state
</code></pre>
<h3 data-id="heading-17">ä¼˜åŠ¿ä¸ç‰¹ç‚¹</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>èƒ½å¤Ÿè·å–æœ€æ–°çš„å¤–éƒ¨çŸ¥è¯†</li>
<li>å“åº”æ›´åŠ å‡†ç¡®å’Œå…¨é¢</li>
<li>é€‚åˆå¤æ‚å’Œä¸“ä¸šåŒ–çš„é—®é¢˜</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æŠ€æœ¯é—®é¢˜è§£ç­”</li>
<li>å­¦æœ¯ç ”ç©¶å’Œåˆ†æ</li>
<li>ä¸“ä¸šé¢†åŸŸå’¨è¯¢</li>
<li>äº‹å®æ€§é—®é¢˜çš„å›ç­”</li>
</ul>
<h2 data-id="heading-18">ä¸¤ç§æ™ºèƒ½ä½“æ¨¡å¼å¯¹æ¯”</h2>
<h3 data-id="heading-19">æ¶æ„å¯¹æ¯”</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c50d1cc3d5af4dd7b0c2ef2068beeaaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=xHi%2Ft1TtECDG8O38v4o5tgR%2BPgo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">æ€§èƒ½å¯¹æ¯”è¡¨</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Reflection</th><th>Reflexion</th></tr></thead><tbody><tr><td><strong>å“åº”é€Ÿåº¦</strong></td><td>è¾ƒå¿«</td><td>è¾ƒæ…¢</td></tr><tr><td><strong>å‡†ç¡®æ€§</strong></td><td>è¾ƒé«˜</td><td>é«˜</td></tr><tr><td><strong>çŸ¥è¯†æ·±åº¦</strong></td><td>åŸºç¡€</td><td>æ·±åº¦</td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>è¾ƒä½</td><td>è¾ƒé«˜</td></tr><tr><td><strong>é€‚ç”¨èŒƒå›´</strong></td><td>é€šç”¨</td><td>ä¸“ä¸š</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>é«˜</td><td>ä¸­ç­‰</td></tr></tbody></table>
<h3 data-id="heading-21">é€‰æ‹©ç­–ç•¥</h3>
<p><strong>é€‰æ‹©Reflectionçš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>å†…å®¹åˆ›ä½œå’Œç¼–è¾‘</li>
<li>åˆ›æ„æ€§å·¥ä½œ</li>
<li>å¿«é€Ÿå“åº”éœ€æ±‚</li>
<li>èµ„æºå—é™ç¯å¢ƒ</li>
</ul>
<p><strong>é€‰æ‹©Reflexionçš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸“ä¸šæŠ€æœ¯é—®é¢˜</li>
<li>éœ€è¦æœ€æ–°ä¿¡æ¯çš„æŸ¥è¯¢</li>
<li>å­¦æœ¯ç ”ç©¶æ”¯æŒ</li>
<li>å‡†ç¡®æ€§è¦æ±‚æé«˜çš„åœºæ™¯</li>
</ul>
<h2 data-id="heading-22">ä¸‰. ç³»ç»Ÿæ•´ä½“æ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a67fb2d50940dc9e88a2e73e7f4c37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=jhLKxh0z0t9uqKXZtRwaVL%2BDlGo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23">å››. å…³é”®æŠ€æœ¯å®ç°</h2>
<h3 data-id="heading-24">1. çœŸæ­£çš„æµå¼è¾“å‡ºæ¶æ„</h3>
<p>æˆ‘ä»¬å®ç°äº†é€tokençš„å®æ—¶æµå¼è¾“å‡ºï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åˆ†æ®µå¼ä¼ªæµå¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2598b4de33f2474ab877a0e979cb564a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=9rZh2FMRlabF9nZo9n9Ui8V%2F%2FRo%3D" alt="" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-comment"># backend/src/agents/reflection_agent.py</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_stream</span>(<span class="hljs-params">self, input_text: <span class="hljs-built_in">str</span>, domain: <span class="hljs-built_in">str</span> = <span class="hljs-string">"general"</span></span>) -&gt; AsyncGenerator[<span class="hljs-built_in">str</span>, <span class="hljs-literal">None</span>]:
        <span class="hljs-comment"># æµå¼ç”Ÿæˆå†…å®¹</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> self.llm_manager.generate_stream(request):
            generated_content += chunk
            <span class="hljs-keyword">yield</span> json.dumps({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"generate_chunk"</span>,
                <span class="hljs-string">"iteration"</span>: current_iteration,
                <span class="hljs-string">"chunk"</span>: chunk
            }) + <span class="hljs-string">"\n"</span>
</code></pre>
<h3 data-id="heading-25">2. é…ç½®å‚æ•°åŠ¨æ€åŒ–</h3>
<p>ç³»ç»Ÿä»é…ç½®æ–‡ä»¶åŠ¨æ€è¯»å–æ‰€æœ‰LLMå‚æ•°ï¼Œé¿å…ç¡¬ç¼–ç ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46ebf67c9b2744268d7a19785c17a9a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=e2JI%2BGt9RBuD1QyMLzMRSsD58xY%3D" alt="" loading="lazy"/></p>
<p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml">    <span class="hljs-comment"># configs/config.yaml</span>
    <span class="hljs-attr">llm:</span>
      <span class="hljs-attr">ollama:</span>
        <span class="hljs-attr">model:</span> <span class="hljs-string">"qwen3:8b"</span>
        <span class="hljs-attr">temperature:</span> <span class="hljs-number">0.7</span>
        <span class="hljs-attr">max_tokens:</span> <span class="hljs-number">5000</span>

    <span class="hljs-attr">agents:</span>
      <span class="hljs-attr">reflection:</span>
        <span class="hljs-attr">max_iterations:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">reflexion:</span>
        <span class="hljs-attr">max_iterations:</span> <span class="hljs-number">5</span>
</code></pre>
<h3 data-id="heading-26">3. LangGraphå·¥ä½œæµçŠ¶æ€ç®¡ç†</h3>
<p>ä½¿ç”¨LangGraphçš„StateGraphç®¡ç†å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59b7a7b3810c47a6a0f3d2eb904fda8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=R7F5Lgp4DQKXMC7hnLvY8gOfM48%3D" alt="" loading="lazy"/></p>
<p><strong>LangGraphå·¥ä½œæµæ„å»º</strong></p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_reflection_graph</span>(<span class="hljs-params">self</span>) -&gt; StateGraph:
        <span class="hljs-string">"""æ„å»ºReflectionæ™ºèƒ½ä½“å·¥ä½œæµå›¾"""</span>
        workflow = StateGraph(ReflectionState)
        
        <span class="hljs-comment"># æ·»åŠ èŠ‚ç‚¹</span>
        workflow.add_node(<span class="hljs-string">"generate"</span>, self._generate_content_node)
        workflow.add_node(<span class="hljs-string">"critique"</span>, self._critique_content_node)
        workflow.add_node(<span class="hljs-string">"improve"</span>, self._improve_content_node)
        workflow.add_node(<span class="hljs-string">"finalize"</span>, self._finalize_node)
        
        <span class="hljs-comment"># å®šä¹‰è¾¹å’Œæ¡ä»¶</span>
        workflow.add_edge(START, <span class="hljs-string">"generate"</span>)
        workflow.add_edge(<span class="hljs-string">"generate"</span>, <span class="hljs-string">"critique"</span>)
        
        workflow.add_conditional_edges(
            <span class="hljs-string">"critique"</span>,
            self._should_continue,
            {
                <span class="hljs-string">"continue"</span>: <span class="hljs-string">"improve"</span>,
                <span class="hljs-string">"finish"</span>: <span class="hljs-string">"finalize"</span>
            }
        )
        
        workflow.add_conditional_edges(
            <span class="hljs-string">"improve"</span>,
            self._check_iteration_limit,
            {
                <span class="hljs-string">"continue"</span>: <span class="hljs-string">"critique"</span>,
                <span class="hljs-string">"finish"</span>: <span class="hljs-string">"finalize"</span>
            }
        )
        
        workflow.add_edge(<span class="hljs-string">"finalize"</span>, END)
        
        <span class="hljs-keyword">return</span> workflow
</code></pre>
<h3 data-id="heading-27">4. Ollamaæœ¬åœ°æ¨¡å‹é›†æˆ</h3>
<p>å®Œæ•´æ”¯æŒOllamaæœ¬åœ°æ¨¡å‹ï¼Œæ— éœ€APIå¯†é’¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47bd0ceedaf046d48b76422a13b2dbf4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=iD%2Bs52yI3dYe0vHfNcaM4sUS3ec%3D" alt="" loading="lazy"/></p>
<p><strong>Ollamaå®¢æˆ·ç«¯å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-comment"># backend/src/utils/llm_manager.py</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">OllamaClient</span>:
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, base_url: <span class="hljs-built_in">str</span>, model: <span class="hljs-built_in">str</span>, **kwargs</span>):
            self.base_url = base_url
            self.model = model
            self.temperature = kwargs.get(<span class="hljs-string">'temperature'</span>, <span class="hljs-number">0.7</span>)
            self.max_tokens = kwargs.get(<span class="hljs-string">'max_tokens'</span>, <span class="hljs-number">4000</span>)

        <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_stream</span>(<span class="hljs-params">self, prompt: <span class="hljs-built_in">str</span></span>) -&gt; AsyncGenerator[<span class="hljs-built_in">str</span>, <span class="hljs-literal">None</span>]:
            <span class="hljs-comment"># å®ç°çœŸæ­£çš„æµå¼ç”Ÿæˆ</span>
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.post(<span class="hljs-string">f"<span class="hljs-subst">{self.base_url}</span>/api/generate"</span>,
                                      json={<span class="hljs-string">"model"</span>: self.model, <span class="hljs-string">"prompt"</span>: prompt,
                                            <span class="hljs-string">"stream"</span>: <span class="hljs-literal">True</span>}, timeout=<span class="hljs-literal">None</span>) <span class="hljs-keyword">as</span> response:
                    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> response.content:
                        <span class="hljs-keyword">if</span> line:
                            <span class="hljs-keyword">yield</span> json.loads(line)[<span class="hljs-string">"response"</span>]
</code></pre>
<h2 data-id="heading-28">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-29">1. æµå¼è¾“å‡ºæ€§èƒ½ä¼˜åŒ–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbd138869b364f3cbc9287d707d8e603~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6KGM6ICF5bi46Iez5Li66ICF5bi45oiQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764478439&amp;x-signature=xyEjh5pkJuVrTOsjZZTjwx9fCuw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-30">2. æ¨¡å‹è°ƒç”¨ä¼˜åŒ–</h3>
<ul>
<li><strong>æ¸©åº¦å‚æ•°åˆ†å±‚</strong>ï¼šç”Ÿæˆé˜¶æ®µä½¿ç”¨è¾ƒé«˜æ¸©åº¦(0.7)ï¼Œæ‰¹è¯„é˜¶æ®µä½¿ç”¨è¾ƒä½æ¸©åº¦(0.3)</li>
<li><strong>Tokenåˆ†é…ç­–ç•¥</strong>ï¼š
<ul>
<li>å†…å®¹ç”Ÿæˆï¼š100% max_tokens</li>
<li>è‡ªæˆ‘æ‰¹è¯„ï¼š75% max_tokens</li>
<li>å†…å®¹æ”¹è¿›ï¼š100% max_tokens</li>
</ul>
</li>
</ul>
<h2 data-id="heading-31">æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-32">æŒ‘æˆ˜1ï¼šçœŸæ­£çš„æµå¼è¾“å‡ºå®ç°</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¼ ç»Ÿå®ç°æ˜¯ç­‰å¾…å®Œæ•´å“åº”ååˆ†æ®µå‘é€ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Pythonçš„å¼‚æ­¥ç”Ÿæˆå™¨(AsyncGenerator)</li>
<li>å®ç°Server-Sent Events(SSE)é•¿è¿æ¥</li>
<li>å‰ç«¯ä½¿ç”¨ReadableStreamå¤„ç†æµå¼æ•°æ®</li>
</ul>
<h3 data-id="heading-33">æŒ‘æˆ˜2ï¼šLangGraphçŠ¶æ€ç®¡ç†</h3>
<p><strong>é—®é¢˜</strong>ï¼šå¤æ‚çš„çŠ¶æ€è½¬æ¢å’Œæ¡ä»¶åˆ¤æ–­ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨TypedDictå®šä¹‰ä¸¥æ ¼çš„çŠ¶æ€ç»“æ„</li>
<li>å®ç°æ¡ä»¶è¾¹(conditional edges)å¤„ç†åˆ†æ”¯é€»è¾‘</li>
<li>é‡‡ç”¨dataclassè¿›è¡ŒçŠ¶æ€å°è£…</li>
</ul>
<h3 data-id="heading-34">æŒ‘æˆ˜3ï¼šOllamaé›†æˆç¨³å®šæ€§</h3>
<p><strong>é—®é¢˜</strong>ï¼šæœ¬åœ°æ¨¡å‹åŠ è½½ã€è¶…æ—¶å¤„ç†ã€é”™è¯¯æ¢å¤ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å®ç°è¿æ¥æ± å’Œé‡è¯•æœºåˆ¶</li>
<li>æ·»åŠ å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯</li>
<li>æ”¯æŒå¤šæ¨¡å‹fallbackç­–ç•¥</li>
</ul>
<h2 data-id="heading-35">åº”ç”¨è¾“å‡ºç¤ºä¾‹</h2>
<h3 data-id="heading-36">ç¤ºä¾‹1ï¼šå†™ä½œä»»åŠ¡</h3>
<p>**ä»»åŠ¡ï¼š**å†™ä¸€ç¯‡å…³äºäººå·¥æ™ºèƒ½çš„ç®€çŸ­ä»‹ç»</p>
<p><strong>Reflectionæ™ºèƒ½ä½“è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs">ç¬¬ä¸€æ¬¡ç”Ÿæˆï¼šAIæ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ã€‚

è‡ªæˆ‘æ‰¹è¯„ï¼šè¿™å¤ªç®€å•äº†ï¼Œæ²¡æœ‰æä¾›å…·ä½“ä¿¡æ¯ã€‚

æ”¹è¿›åï¼šäººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè‡´åŠ›äºåˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œé€šå¸¸éœ€è¦äººç±»æ™ºèƒ½çš„ä»»åŠ¡çš„æœºå™¨ã€‚

è‡ªæˆ‘æ‰¹è¯„ï¼šè¿˜æ˜¯æ²¡æœ‰æ·±å…¥è¯´æ˜AIçš„å…·ä½“åº”ç”¨ã€‚

æœ€ç»ˆè¾“å‡ºï¼šäººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè‡´åŠ›äºåˆ›å»ºèƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»æ™ºèƒ½è¡Œä¸ºçš„æœºå™¨ç³»ç»Ÿã€‚AIæŠ€æœ¯åŒ…æ‹¬æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰ï¼Œå¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ã€è¯­éŸ³åŠ©æ‰‹ã€è‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸï¼Œä¸ºç°ä»£ç¤¾ä¼šå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ã€‚
</code></pre>
<h3 data-id="heading-37">ç¤ºä¾‹2ï¼šæŠ€æœ¯é—®é¢˜è§£ç­”</h3>
<p>**ä»»åŠ¡ï¼š**è§£é‡ŠåŒºå—é“¾æŠ€æœ¯çš„å·¥ä½œåŸç†</p>
<p><strong>Reflexionæ™ºèƒ½ä½“è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">åˆå§‹å“åº”ï¼šåŒºå—é“¾æ˜¯ä¸€ç§åˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯...

è‡ªçœåˆ†æï¼šéœ€è¦æ›´è¯¦ç»†çš„æŠ€æœ¯ç»†èŠ‚å’Œå®é™…åº”ç”¨æ¡ˆä¾‹

çŸ¥è¯†ç¼ºå£ï¼šåˆ†å¸ƒå¼å…±è¯†æœºåˆ¶ã€å…·ä½“å®ç°åŸç†

å¤–éƒ¨æœç´¢ï¼š
<span class="hljs-bullet">-</span> "åŒºå—é“¾åˆ†å¸ƒå¼å…±è¯†ç®—æ³•"
<span class="hljs-bullet">-</span> "åŒºå—é“¾å·¥ä½œåŸç†è¯¦è§£"

æ•´åˆåå“åº”ï¼šåŒºå—é“¾æ˜¯ä¸€ç§åˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒå·¥ä½œåŸç†åŒ…æ‹¬ï¼š
<span class="hljs-bullet">1.</span> æ•°æ®ç»“æ„ï¼šåŒºå—æŒ‰æ—¶é—´é¡ºåºé“¾æ¥ï¼Œå½¢æˆé“¾å¼ç»“æ„
<span class="hljs-bullet">2.</span> åˆ†å¸ƒå¼å…±è¯†ï¼šé€šè¿‡Proof of Workæˆ–Proof of Stakeç­‰ç®—æ³•è¾¾æˆç½‘ç»œå…±è¯†
<span class="hljs-bullet">3.</span> å¯†ç å­¦å®‰å…¨ï¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°å’Œéå¯¹ç§°åŠ å¯†ç¡®ä¿æ•°æ®å®‰å…¨
<span class="hljs-bullet">4.</span> å»ä¸­å¿ƒåŒ–ï¼šæ— å•ä¸€æ§åˆ¶ç‚¹ï¼Œå¢å¼ºç³»ç»Ÿå¯é æ€§

å®é™…åº”ç”¨åŒ…æ‹¬æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠã€æ™ºèƒ½åˆçº¦ç­‰...
</code></pre>
<h2 data-id="heading-38">æ€»ç»“</h2>
<p>æœ¬é¡¹ç›®æˆåŠŸæ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œé€šè¿‡LangGraphå®ç°äº†Reflectionå’ŒReflexionä¸¤ç§æ ¸å¿ƒæ¨¡å¼ã€‚ç³»ç»Ÿçš„çœŸæ­£æµå¼è¾“å‡ºã€å‚æ•°åŠ¨æ€åŒ–å’ŒOllamaé›†æˆç­‰ç‰¹æ€§ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¼˜ç§€çš„ä½¿ç”¨ä½“éªŒã€‚</p>
<h2 data-id="heading-39">æºä»£ç </h2>
<p>å®Œæ•´çš„é¡¹ç›®ä»£ç å’Œæ›´è¯¦ç»†çš„å®ç°ï¼Œè¯·è®¿é—®æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ft.zsxq.com%2FCCi0k" target="_blank" title="https://t.zsxq.com/CCi0k" ref="nofollow noopener noreferrer">t.zsxq.com/CCi0k</a> ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹]]></title>    <link>https://juejin.cn/post/7575031395862855726</link>    <guid>https://juejin.cn/post/7575031395862855726</guid>    <pubDate>2025-11-22T11:36:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575031395862855726" data-draft-id="7575065042158698546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-11-22T11:36:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰ä¹‹æ¢¦"/> <meta itemprop="url" content="https://juejin.cn/user/1579348606325623"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1579348606325623/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰ä¹‹æ¢¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:36:34.000Z" title="Sat Nov 22 2025 11:36:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>openGauss æ¨å‡º <strong>å…¨å¯†æ€è®¡ç®—ï¼ˆFully Encrypted Databaseï¼‰</strong> Â ä¸ <strong>é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼ˆLedger DBï¼‰</strong> ï¼Œä»¥â€œå¯ä¿¡æ‰§è¡Œç¯å¢ƒ + åˆ†å¸ƒå¼æ ¡éªŒè´¦æœ¬â€ä¸ºæ ¸å¿ƒï¼Œå®ç°äº†ä»â€œæ•°æ®å®‰å…¨â€åˆ°â€œæ•°æ®å¯ä¿¡â€çš„è·¨è¶Šã€‚</p>
<h2 data-id="heading-0"><strong>å…¨å¯†æ€è®¡ç®—ï¼šæ•°æ®ä¸è§£å¯†ä¹Ÿèƒ½ç®—</strong></h2>
<p>å…¨å¯†æ€è®¡ç®—çš„ç›®æ ‡æ˜¯ï¼š</p>
<p>â€œè®©æ•°æ®åœ¨åŠ å¯†çŠ¶æ€ä¸‹å®Œæˆè¯»å†™ã€æŸ¥è¯¢ä¸è®¡ç®—ï¼Œè®©æ•°æ®åº“ç®¡ç†å‘˜ä¹Ÿæ— æ³•çª¥è§†æ˜æ–‡ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9388862e404221a08df2905bf247f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=asvUy77qhj%2F8bpEmOcFO%2BbEF414%3D" alt="" loading="lazy"/>Â </p>
<p>è¯¥å›¾å±•ç¤ºäº† openGauss åœ¨<strong>åŠ å¯†é©±åŠ¨å±‚ã€æ•°æ®åº“å†…æ ¸å±‚ã€å¯ä¿¡æ‰§è¡Œç¯å¢ƒ</strong>ä¸‰å±‚ç»“æ„ä¸‹çš„æ•°æ®æµåŠ¨è·¯å¾„ï¼š</p>
<p>1.Â Â <strong>Application API</strong>ï¼šä¸Šå±‚ä¸šåŠ¡ä»¥æ˜æ–‡å½¢å¼æäº¤ SQLï¼›</p>
<p>2.Â Â <strong>ODBC/JDBC é©±åŠ¨</strong>ï¼šè´Ÿè´£å°†æ˜æ–‡è½¬ä¸ºå¯†æ–‡ï¼›</p>
<p>3.Â Â <strong>User-Side åŠ å¯†æ¨¡å—</strong>ï¼šåœ¨å®¢æˆ·ç«¯å®ŒæˆåŠ å¯†ï¼Œä¸ä¼ è¾“æ˜æ–‡ï¼›</p>
<p>4.Â Â <strong>GaussDB Kernel</strong>ï¼šåœ¨å¯†æ–‡çŠ¶æ€ä¸‹æ‰§è¡ŒæŸ¥è¯¢ï¼›</p>
<p>5.Â Â <strong>TEEï¼ˆå¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼‰</strong> ï¼šåœ¨éš”ç¦»ç¡¬ä»¶åŒºåŸŸä¸­è¿›è¡Œæ˜æ–‡è®¡ç®—ï¼›</p>
<p>6.Â Â <strong>REEï¼ˆRich Execution Environmentï¼‰</strong> ï¼šå¤„ç†å¯†æ–‡æ“ä½œï¼Œä¿éšœæ€§èƒ½ã€‚</p>
<p>æ•°æ®å…¨ç¨‹å¯†æ–‡ä¼ è¾“ä¸è®¡ç®—ï¼ŒæœåŠ¡å™¨ç«¯ä¸ä¿å­˜ä»»ä½•æ˜æ–‡å¯†é’¥ã€‚</p>
<p>Â </p>
<h2 data-id="heading-1"><strong>ä¸‰å±‚å¯†é’¥æœºåˆ¶ä¸åŠ å¯†æµç¨‹</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/780981a874344bf98a60aa8a11adc21d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=mdsb8mBpVAfRwfPZtDRCQL3GpPI%3D" alt="" loading="lazy"/>Â </p>
<p>å¯†é’¥ä½“ç³»åŒ…æ‹¬ä¸‰ç±»ï¼š</p>
<p>1.Â Â <strong>æ ¹å¯†é’¥ï¼ˆRoot Keyï¼‰</strong></p>
<p>2.Â Â å­˜å‚¨äºæ“ä½œç³»ç»Ÿå¯†é’¥ç®¡ç†æ¨¡å—ï¼ˆå¦‚ secGearã€EulerOS KMSï¼‰ï¼›<strong>ä¸»å¯†é’¥ï¼ˆMaster Keyï¼‰</strong></p>
<p>3.Â Â ç”±å®¢æˆ·ç«¯ç”Ÿæˆå¹¶é€šè¿‡å¯ä¿¡é€šé“ä¼ è¾“ç»™æ•°æ®åº“å†…æ ¸ï¼›<strong>åˆ—åŠ å¯†å¯†é’¥ï¼ˆColumn Encryption Key, CEKï¼‰</strong> Â ç»‘å®šç‰¹å®šåˆ—æˆ–å­—æ®µï¼Œå®ç°ç»†ç²’åº¦æ•°æ®åŠ å¯†ã€‚</p>
<p>Â </p>
<p>åŠ å¯†æµç¨‹å¦‚ä¸‹ï¼š</p>
<p>1.Â Â <strong>å®¢æˆ·ç«¯å±‚åŠ å¯†</strong>ï¼šæ•°æ®åœ¨æœ¬åœ°é€šè¿‡ CEK åŠ å¯†ï¼›</p>
<p>2.Â Â <strong>ä¼ è¾“å±‚ä¿æŠ¤</strong>ï¼šé€šè¿‡ SSL / TEE é€šé“åŠ å¯†ä¼ è¾“ï¼›</p>
<p>3.Â Â <strong>æ•°æ®åº“å±‚è®¡ç®—</strong>ï¼šåœ¨å¯†æ–‡çŠ¶æ€ä¸‹å®Œæˆç­‰å€¼æˆ–èŒƒå›´æŸ¥è¯¢ã€‚</p>
<p>Â </p>
<h2 data-id="heading-2"><strong>å¯†æ€è®¡ç®—æ•°æ®æµï¼šä»åŠ å¯†åˆ°æŸ¥è¯¢çš„å…¨è¿‡ç¨‹</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4c882fe913d43d089a7f7f65c420c21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=m%2FjJEn3r7Z7ePq2RDCGegTdqx4Q%3D" alt="" loading="lazy"/>Â </p>
<p>å®ä¾‹æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> c1 <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> c1 <span class="hljs-operator">&gt;</span> <span class="hljs-number">123</span>;
</code></pre>
<p>1 å®¢æˆ·ç«¯ä½¿ç”¨ CEK åŠ å¯†å¸¸é‡ 123 â†’ 0xfe31da05ï¼›</p>
<p>2 åŠ å¯†è¯·æ±‚é€šè¿‡ SSL é€šé“å‘é€è‡³ openGaussï¼›</p>
<p>3 GaussDB åœ¨ <strong>REE ç¯å¢ƒ</strong>æ‰§è¡Œå¯†æ–‡æ¯”è¾ƒï¼›</p>
<p>4 è‹¥å¯ç”¨ç¡¬ä»¶ TEEï¼Œåˆ™åœ¨å®‰å…¨ enclave ä¸­æ‰§è¡Œæ˜æ–‡è¿ç®—ï¼›</p>
<p>5 è¿”å›ç»“æœæ—¶å†ç”±å®¢æˆ·ç«¯è§£å¯†å±•ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eae84af9597411b8b474bb5d48f935f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=ws9K9pg8%2FyFCH0Wvmh%2FFx5oBIyM%3D" alt="" loading="lazy"/>Â 
è¿™æ ·ï¼ŒæœåŠ¡å™¨ç«¯å³ä½¿è¢«æ”»ç ´ï¼Œä¹Ÿæ— æ³•æ¨å¯¼å‡ºçœŸå®ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>Â </p>
<h2 data-id="heading-3"><strong>é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šå¯ä¿¡å¯è¿½æº¯çš„äº‹åŠ¡é“¾</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b45b6249a1d34a8e92f6fffe3f0fa475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=sd5In60oF2nxs6mKFgh%2Flpk8pEg%3D" alt="" loading="lazy"/>Â </p>
<p>è´¦æœ¬æ•°æ®åº“æ˜¯åœ¨ä¼ ç»Ÿäº‹åŠ¡æ•°æ®åº“ï¼ˆACIDï¼‰åŸºç¡€ä¸Šæ‰©å±•çš„<strong>åŠ å¯†æ—¶é—´é“¾ç³»ç»Ÿ</strong>ï¼Œ</p>
<p>å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<p>1.Â Â <strong>å¢é‡æ ¡éªŒç®—æ³•</strong>ï¼šæ¯ä¸ª Checkpoint å‡è®°å½•å¢é‡å˜æ›´å“ˆå¸Œï¼›</p>
<p>2.Â Â <strong>ä¸€è‡´æ€§éªŒè¯</strong>ï¼šä»»æ„èŠ‚ç‚¹å¯å¿«é€Ÿæ ¡éªŒè´¦æœ¬ä¸€è‡´æ€§ï¼›</p>
<p>3.Â Â <strong>åˆ†å¸ƒå¼å­˜å‚¨</strong>ï¼šè´¦æœ¬åˆ‡ç‰‡ï¼ˆslice1, slice2, â€¦ï¼‰æ”¯æŒè·¨èŠ‚ç‚¹äº’å®¡ã€‚</p>
<p>è´¦æœ¬è¡¨ç»“æ„demoï¼š
Â </p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> audit_ledger (  
Â Â Â Â tx_id <span class="hljs-type">BIGINT</span>,  
Â Â Â Â operator TEXT,  
Â Â Â Â action TEXT,  
Â Â Â Â ts <span class="hljs-type">TIMESTAMP</span>  
) <span class="hljs-keyword">WITH</span> (ledger <span class="hljs-operator">=</span> <span class="hljs-string">'on'</span>);  
</code></pre>
<p>æ•°æ®å†™å…¥æ—¶è‡ªåŠ¨ç”Ÿæˆé“¾å¼å“ˆå¸Œï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL">TX_HASH: <span class="hljs-number">8</span>fe91ac9cde0...  
PREV_HASH: <span class="hljs-number">3</span>ae15f477b81...  
</code></pre>
<p>ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤è´¦æœ¬é“¾å…³ç³»ï¼Œæ”¯æŒâ€œä¸å¯ç¯¡æ”¹ã€å¯è¿½æº¯â€çš„å†å²æŸ¥è¯¢ã€‚</p>
<p>Â </p>
<h3 data-id="heading-4"><strong>æ ¡éªŒä¸æ¢å¤</strong></h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- éªŒè¯è´¦æœ¬å®Œæ•´æ€§  </span>
<span class="hljs-keyword">SELECT</span> ledger_verify(<span class="hljs-string">'audit_ledger'</span>);  
</code></pre>
<p>Â 
è¾“å‡ºï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL">Ledger verified: OK (<span class="hljs-keyword">no</span> tampering detected)  
</code></pre>
<p>å³ä½¿ä¸»æœºé­åˆ°ç ´åï¼Œå¤‡æœºè´¦æœ¬é“¾ä»èƒ½å®Œæ•´æ¢å¤</p>
<p>Â </p>
<h2 data-id="heading-5"><strong>å¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼ˆTEEï¼‰ä¸å¯†æ€è®¡ç®—ååŒ</strong></h2>
<p>openGauss çš„å…¨å¯†æ€èƒ½åŠ›ä¸ <strong>secGear + Kunpeng + EulerOS</strong>Â æ·±åº¦é›†æˆï¼Œå½¢æˆâ€œè½¯ç¡¬ä¸€ä½“åŒ–å¯ä¿¡æ‰§è¡Œç¯å¢ƒâ€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52db432c88464cf6849f28ebc47830a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=hRbDBeo4Qv4QrCq7ZsVFcChaHC4%3D" alt="" loading="lazy"/>Â </p>
<p>è¿™ç§â€œTEE + æ•°æ®åº“â€çš„è®¾è®¡ä½¿å¾—å¯†æ–‡è®¡ç®—åœ¨ç¡¬ä»¶éš”ç¦»ç©ºé—´æ‰§è¡Œï¼Œä»è€Œå®ç°<strong>åŠ å¯†è®¡ç®—æ€§èƒ½æå‡ 2.3Ã—ï¼Œæ³„éœ²é£é™©è¶‹è¿‘äºé›¶</strong>ã€‚</p>
<p>Â </p>
<h2 data-id="heading-6"><strong>è½åœ°å®è·µï¼š</strong> <strong>å¯†æ€è®¡ç®— + è´¦æœ¬å®¡è®¡ä¸€ä½“åŒ–æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-7">ä¸€ã€Â  <strong><strong><strong>ç¯å¢ƒä¸åº“åˆå§‹åŒ–ï¼ˆopenGaussï¼‰</strong></strong></strong></h3>
<p>ä½ å·²æœ‰å¯ç”¨çš„ openGauss é›†ç¾¤å³å¯ï¼Œä»¥ä¸‹å‘½ä»¤å‡åœ¨ <strong>gsql</strong>Â å®¢æˆ·ç«¯æ‰§è¡Œã€‚è‹¥æ˜¯å®¹å™¨/å•æœºç‰ˆï¼Œåªè¦èƒ½ gsql -d postgres -p 5432 -r è¿›åº“å³å¯ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"># è¿æ¥ï¼ˆè¯·æ›¿æ¢ç«¯å£<span class="hljs-operator">/</span>ç”¨æˆ·<span class="hljs-operator">/</span>å¯†ç ï¼‰  
gsql <span class="hljs-operator">-</span>d postgres <span class="hljs-operator">-</span>p <span class="hljs-number">5432</span> <span class="hljs-operator">-</span>U omm <span class="hljs-operator">-</span>r  
</code></pre>
<h4 data-id="heading-8">1)Â  <strong><strong><strong>å»ºä¸šåŠ¡åº“ä¸ä¸“ç”¨ schemaã€è§’è‰²</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ä¸šåŠ¡æ•°æ®åº“  </span>
<span class="hljs-keyword">CREATE</span> DATABASE secure_demo;  
\c secure_demo;  
Â   
<span class="hljs-comment">-- åº”ç”¨ä¸“ç”¨ schema ä¸è§’è‰²  </span>
<span class="hljs-keyword">CREATE</span> SCHEMA IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> secure <span class="hljs-keyword">AUTHORIZATION</span> <span class="hljs-built_in">CURRENT_USER</span>;  
<span class="hljs-keyword">CREATE</span> ROLE app_rw LOGIN PASSWORD <span class="hljs-string">'AppSecret!123'</span>;  
<span class="hljs-keyword">GRANT</span> USAGE <span class="hljs-keyword">ON</span> SCHEMA secure <span class="hljs-keyword">TO</span> app_rw;  
</code></pre>
<h3 data-id="heading-9"><strong>äºŒã€</strong> <strong><strong><strong>è¡¨ç»“æ„è®¾è®¡ï¼šå¯†æ€å­˜å‚¨ + ç­‰å€¼ç´¢å¼• + è´¦æœ¬è¡¨</strong></strong></strong></h3>
<p>æˆ‘ä»¬é‡‡ç”¨<strong>åº”ç”¨ä¾§ AES-GCM åŠ å¯†</strong>ï¼Œæ•°æ®åº“é‡Œåªå­˜<strong>å¯†æ–‡</strong>ï¼›ä¸ºäº†æ”¯æŒ<strong>ç­‰å€¼æŸ¥è¯¢</strong>ï¼Œé¢å¤–å­˜ä¸€åˆ—<strong>ä¸å¯é€†çš„ç­‰å€¼æ£€ç´¢é”®</strong>ï¼ˆHMAC/Hashï¼‰ï¼Œå¹¶åœ¨è¯¥åˆ—ä¸Šå»ºç´¢å¼•ã€‚å®¡è®¡æ–¹é¢ï¼Œç”¨ä¸€å¼ <strong>é“¾å¼è´¦æœ¬è¡¨</strong>è®°å½•æ¯æ¬¡æ“ä½œçš„æ‘˜è¦å“ˆå¸Œï¼Œè§¦å‘å™¨è‡ªåŠ¨å†™å…¥ï¼Œæ”¯æŒä¹‹åçš„<strong>é“¾å¼æ ¡éªŒ</strong>ã€‚</p>
<h4 data-id="heading-10">1)Â  <strong><strong><strong>ä¸šåŠ¡æ•°æ®è¡¨ï¼ˆåªå­˜å¯†æ–‡ï¼Œä¸è½æ˜æ–‡ï¼‰</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> secure;  
Â   
<span class="hljs-comment">-- ç”¨æˆ·ä¿¡æ¯å¯†æ€è¡¨ï¼šä¸ä¿å­˜æ˜æ–‡  </span>
<span class="hljs-comment">-- name_hashï¼šç­‰å€¼æ£€ç´¢é”®ï¼ˆHMAC/MD5/å…¶ä»–ä¸å¯é€†æ‘˜è¦ï¼‰ï¼Œç”¨äº WHERE ç­‰å€¼æŸ¥è¯¢  </span>
<span class="hljs-comment">-- name_ct/phone_ctï¼šAES-GCM å¯†æ–‡ï¼ˆå¯†é’¥/nonce åœ¨å®¢æˆ·ç«¯ç®¡ç†ï¼Œä¸å…¥åº“ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.user_info_secure (  
Â Â Â Â id Â Â Â Â Â Â Â Â Â BIGSERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â name_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">64</span>) Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- 64ä½åå…­è¿›åˆ¶ä¸²ï¼ˆç¤ºä¾‹ç”¨ SHA-256 çš„ hexï¼‰  </span>
Â Â Â Â name_ct Â Â Â Â BYTEA Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- å§“åå¯†æ–‡  </span>
Â Â Â Â phone_ct Â Â Â BYTEA Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- æ‰‹æœºå¯†æ–‡  </span>
Â Â Â Â created_at Â <span class="hljs-type">TIMESTAMP</span> Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now()  
);  
Â   
<span class="hljs-comment">-- ç­‰å€¼æŸ¥è¯¢ç´¢å¼•ï¼ˆå‘½ä¸­ name_hashï¼‰  </span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_info_name_hash <span class="hljs-keyword">ON</span> secure.user_info_secure (name_hash);  
</code></pre>
<h4 data-id="heading-11">2)Â  <strong><strong><strong>è´¦æœ¬è¡¨ï¼ˆé“¾å¼å“ˆå¸Œï¼Œé˜²ç¯¡æ”¹ï¼‰</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ç®€æ´çš„è´¦æœ¬è¡¨ï¼šæ¯æ¡ä¸šåŠ¡å˜æ›´éƒ½ä¼šè®°ä¸€æ¡ â€œåŒºå—â€  </span>
<span class="hljs-comment">-- prev_hash ä¸²èµ·é“¾è·¯ï¼Œcurr_hash ä¸ºæœ¬æ¬¡åŒºå—å“ˆå¸Œï¼ˆå«å‰ä¸€ä¸ªåŒºå—å“ˆå¸Œã€å½“å‰è¡Œæ‘˜è¦ã€æ—¶é—´æˆ³ç­‰ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.audit_ledger (  
Â Â Â Â block_id Â Â Â BIGSERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â table_name Â TEXT Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â op Â Â Â Â Â Â Â Â Â TEXT Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- INSERT / UPDATE / DELETE  </span>
Â Â Â Â row_pk Â Â Â Â Â <span class="hljs-type">BIGINT</span> Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- ç›®æ ‡è¡Œä¸»é”®ï¼ˆuser_info_secure.idï¼‰  </span>
Â Â Â Â row_digest Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- è¯¥è¡Œæ‘˜è¦ï¼ˆä½¿ç”¨ md5 ä»¥é¿å…æ‰©å±•ä¾èµ–ï¼‰  </span>
Â Â Â Â prev_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â curr_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â op_at Â Â Â Â Â Â <span class="hljs-type">TIMESTAMP</span> Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now()  
);  
Â   
<span class="hljs-comment">-- ä¿å­˜å…¨å±€â€œä¸Šä¸€ä¸ªåŒºå—å“ˆå¸Œâ€ï¼›æˆ‘ä»¬ç”¨ä¸€å¼ ä»… 1 è¡Œçš„å°è¡¨åšâ€œé“¾å¤´æŒ‡é’ˆâ€  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.audit_head (  
Â Â Â Â id Â Â Â Â Â <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â tip Â Â Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> Â Â Â Â Â Â Â <span class="hljs-comment">-- æœ€æ–°åŒºå—å“ˆå¸Œ  </span>
);  
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> secure.audit_head (id, tip) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, md5(<span class="hljs-string">'genesis'</span>)); Â <span class="hljs-comment">-- åˆ›ä¸– tip </span>
</code></pre>
<h4 data-id="heading-12">3)Â  <strong><strong><strong>è§¦å‘å™¨ï¼šè‡ªåŠ¨å†™è´¦æœ¬åŒºå—</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ç”Ÿæˆå½“å‰è¡Œçš„æ‘˜è¦ï¼ˆæŠŠå…³é”®å­—æ®µåºåˆ—åŒ–å md5ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.digest_user_row(_id <span class="hljs-type">BIGINT</span>, _name_ct BYTEA, _phone_ct BYTEA)  
<span class="hljs-keyword">RETURNS</span> <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>)  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â s TEXT;  
<span class="hljs-keyword">BEGIN</span>  
Â Â <span class="hljs-comment">-- æ³¨æ„ï¼šæˆ‘ä»¬ä¸æŠŠå¯†é’¥ç›¸å…³ä¿¡æ¯è½åº“ï¼›ä»…å¯¹å¯†æ–‡è¿›è¡Œæ‘˜è¦  </span>
Â Â s :<span class="hljs-operator">=</span> _id <span class="hljs-operator">||</span> <span class="hljs-string">':'</span> <span class="hljs-operator">||</span> encode(_name_ct, <span class="hljs-string">'hex'</span>) <span class="hljs-operator">||</span> <span class="hljs-string">':'</span> <span class="hljs-operator">||</span> encode(_phone_ct, <span class="hljs-string">'hex'</span>);  
Â Â <span class="hljs-keyword">RETURN</span> md5(s);  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-comment">-- å†™å…¥è´¦æœ¬åŒºå—ï¼šprev_hash = audit_head.tipï¼›curr_hash = md5(prev_hash || row_digest || op || now)  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.append_ledger(_tbl TEXT, _op TEXT, _pk <span class="hljs-type">BIGINT</span>, _row_digest <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>))  
<span class="hljs-keyword">RETURNS</span> VOID  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â prev <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
Â Â now_hash <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
<span class="hljs-keyword">BEGIN</span>  
Â Â <span class="hljs-keyword">SELECT</span> tip <span class="hljs-keyword">INTO</span> prev <span class="hljs-keyword">FROM</span> secure.audit_head <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;  
Â Â now_hash :<span class="hljs-operator">=</span> md5(prev <span class="hljs-operator">||</span> _row_digest <span class="hljs-operator">||</span> _op <span class="hljs-operator">||</span> now()::text);  
Â   
Â Â <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> secure.audit_ledger(table_name,op,row_pk,row_digest,prev_hash,curr_hash)  
Â Â <span class="hljs-keyword">VALUES</span>(_tbl,_op,_pk,_row_digest,prev,now_hash);  
Â   
Â Â <span class="hljs-keyword">UPDATE</span> secure.audit_head <span class="hljs-keyword">SET</span> tip <span class="hljs-operator">=</span> now_hash <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-comment">-- ä¸‰ç±» DML çš„è¡Œçº§è§¦å‘å™¨  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.tg_user_info_ledger()  
<span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">TRIGGER</span>  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â d <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
<span class="hljs-keyword">BEGIN</span>  
Â Â IF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'INSERT'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(NEW.id, NEW.name_ct, NEW.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'INSERT'</span>,NEW.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;  
Â Â ELSIF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'UPDATE'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(NEW.id, NEW.name_ct, NEW.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'UPDATE'</span>,NEW.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;  
Â Â ELSIF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'DELETE'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(OLD.id, OLD.name_ct, OLD.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'DELETE'</span>,OLD.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">OLD</span>;  
Â Â <span class="hljs-keyword">END</span> IF;  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trg_user_info_ledger  
AFTER <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> secure.user_info_secure  
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> secure.tg_user_info_ledger();  
</code></pre>
<h3 data-id="heading-13"><strong>ä¸‰ã€</strong> <strong><strong><strong>éªŒè¯/å®¡è®¡å·¥å…· SQLï¼ˆé“¾å¼è‡ªæ ¡éªŒï¼‰</strong></strong></strong></h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- 1) æ£€æŸ¥é“¾è·¯æ˜¯å¦è¿ç»­ï¼ˆcurr_hash-&gt;prev_hashï¼‰  </span>
<span class="hljs-keyword">WITH</span> <span class="hljs-keyword">RECURSIVE</span> chain <span class="hljs-keyword">AS</span> (  
Â Â <span class="hljs-keyword">SELECT</span> block_id, prev_hash, curr_hash  
Â Â <span class="hljs-keyword">FROM</span> secure.audit_ledger  
Â Â <span class="hljs-keyword">WHERE</span> block_id <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">min</span>(block_id) <span class="hljs-keyword">FROM</span> secure.audit_ledger)  
Â Â <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>  
Â Â <span class="hljs-keyword">SELECT</span> l.block_id, l.prev_hash, l.curr_hash  
Â Â <span class="hljs-keyword">FROM</span> secure.audit_ledger l  
Â Â <span class="hljs-keyword">JOIN</span> chain c <span class="hljs-keyword">ON</span> l.prev_hash <span class="hljs-operator">=</span> c.curr_hash  
)  
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> blocks_on_chain, (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> secure.audit_ledger) <span class="hljs-keyword">AS</span> total_blocks  
<span class="hljs-keyword">FROM</span> chain;  
Â   
<span class="hljs-comment">-- 2) é‡ç®—æ¯ä¸ªåŒºå—çš„ curr_hash å¹¶æ¯”å¯¹ï¼Œæ£€æµ‹æ˜¯å¦è¢«ç¯¡æ”¹  </span>
<span class="hljs-keyword">SELECT</span> block_id,  
Â Â Â Â Â Â Â curr_hash <span class="hljs-keyword">AS</span> stored,  
Â Â Â Â Â Â Â md5(prev_hash <span class="hljs-operator">||</span> row_digest <span class="hljs-operator">||</span> op <span class="hljs-operator">||</span> op_at::text) <span class="hljs-keyword">AS</span> recomputed,  
Â Â Â Â Â Â Â (curr_hash <span class="hljs-operator">=</span> md5(prev_hash <span class="hljs-operator">||</span> row_digest <span class="hljs-operator">||</span> op <span class="hljs-operator">||</span> op_at::text)) <span class="hljs-keyword">AS</span> ok  
<span class="hljs-keyword">FROM</span> secure.audit_ledger  
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> block_id;  
</code></pre>
<h3 data-id="heading-14">å››ã€Â <strong>ä¸šåŠ¡ä¾§å¯†æ€ç­‰å€¼æŸ¥è¯¢ï¼šPython ç«¯å®Œæ•´ä»£ç </strong></h3>
<p>é‡‡ç”¨ cryptography å®ç° <strong>AES-256-GCM</strong>ï¼›</p>
<p><strong>HMAC-SHA256</strong>Â ç”Ÿæˆ name_hashï¼ˆç­‰å€¼æ£€ç´¢é”®ï¼Œå¯é‡å¤ã€ä¸å¯é€†ï¼Œç”¨äº WHERE åŒ¹é…ï¼‰ï¼›</p>
<p>æ˜æ–‡<strong>åªåœ¨å®¢æˆ·ç«¯å†…å­˜</strong>å‡ºç°ï¼ŒopenGauss <strong>ä»…ä¿å­˜å¯†æ–‡</strong>ä¸ hashã€‚
Â </p>
<pre><code class="hljs language-sql" lang="sql"># requirements:  
# Â Â pip install psycopg2<span class="hljs-operator">-</span><span class="hljs-type">binary</span> cryptography  
Â   
import os  
import hmac  
import hashlib  
import secrets  
import psycopg2  
<span class="hljs-keyword">from</span> cryptography.hazmat.primitives.ciphers.aead import AESGCM  
Â   
DSN <span class="hljs-operator">=</span> "dbname=secure_demo user=omm password=YourPass host=127.0.0.1 port=5432"  
Â   
# <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> å®¢æˆ·ç«¯å¯†é’¥ï¼ˆDemoï¼šæœ¬åœ°ç¯å¢ƒå˜é‡<span class="hljs-operator">/</span>æ–‡ä»¶ï¼›ç”Ÿäº§ç¯å¢ƒè¯·æ¥å…¥ KMS<span class="hljs-operator">/</span>TEEï¼‰ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>  
# æ•°æ®åŠ å¯†å¯†é’¥ï¼ˆDEKï¼‰ <span class="hljs-operator">&amp;</span> HMAC å¯†é’¥  
DEK <span class="hljs-operator">=</span> os.environ.get("DEK_HEX") <span class="hljs-keyword">or</span> secrets.token_hex(<span class="hljs-number">32</span>) Â Â # <span class="hljs-number">32</span> bytes <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> AES<span class="hljs-number">-256</span>  
HMK <span class="hljs-operator">=</span> os.environ.get("HMK_HEX") <span class="hljs-keyword">or</span> secrets.token_hex(<span class="hljs-number">32</span>) Â Â # <span class="hljs-number">32</span> bytes <span class="hljs-keyword">for</span> HMAC<span class="hljs-operator">-</span>SHA256  
Â   
aesgcm <span class="hljs-operator">=</span> AESGCM(bytes.fromhex(DEK))  
hmac_key <span class="hljs-operator">=</span> bytes.fromhex(HMK)  
Â   
def hmac_sha256_hex(msg: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> str:  
Â Â Â Â <span class="hljs-keyword">return</span> hmac.new(hmac_key, msg, hashlib.sha256).hexdigest()  
Â   
def aes_gcm_encrypt(plaintext: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> bytes:  
Â Â Â Â nonce <span class="hljs-operator">=</span> secrets.token_bytes(<span class="hljs-number">12</span>) Â # GCM æ ‡å‡† <span class="hljs-number">96</span><span class="hljs-operator">-</span>bit nonce  
Â Â Â Â ct <span class="hljs-operator">=</span> aesgcm.encrypt(nonce, plaintext, associated_data<span class="hljs-operator">=</span><span class="hljs-keyword">None</span>)  
Â Â Â Â <span class="hljs-keyword">return</span> nonce <span class="hljs-operator">+</span> ct Â # æ‹¼æ¥å­˜åº“ï¼šnonce<span class="hljs-operator">|</span>ciphertext<span class="hljs-operator">|</span>tag  
Â   
def aes_gcm_decrypt(<span class="hljs-type">blob</span>: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> bytes:  
Â Â Â Â nonce, ct <span class="hljs-operator">=</span> <span class="hljs-type">blob</span>[:<span class="hljs-number">12</span>], <span class="hljs-type">blob</span>[<span class="hljs-number">12</span>:]  
Â Â Â Â <span class="hljs-keyword">return</span> aesgcm.decrypt(nonce, ct, associated_data<span class="hljs-operator">=</span><span class="hljs-keyword">None</span>)  
Â   
def insert_user(name: str, phone: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â name_ct Â Â <span class="hljs-operator">=</span> aes_gcm_encrypt(name.encode("utf-8"))  
Â Â Â Â phone_ct Â <span class="hljs-operator">=</span> aes_gcm_encrypt(phone.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â INSERT INTO secure.user_info_secure (name_hash, name_ct, phone_ct)  
Â Â Â Â Â Â Â Â Â Â Â Â VALUES (%s, %s, %s)  
Â Â Â Â Â Â Â Â Â Â Â Â RETURNING id;  
Â Â Â Â Â Â Â Â """, (name_hash, psycopg2.Binary(name_ct), psycopg2.Binary(phone_ct)))  
Â Â Â Â Â Â Â Â uid <span class="hljs-operator">=</span> cur.fetchone()[<span class="hljs-number">0</span>]  
Â Â Â Â Â Â Â Â print(f"insert ok, id={uid}")  
Â   
def query_user_by_name(name: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â SELECT id, name_ct, phone_ct, created_at  
Â Â Â Â Â Â Â Â Â Â Â Â FROM secure.user_info_secure  
Â Â Â Â Â Â Â Â Â Â Â Â WHERE name_hash = %s  
Â Â Â Â Â Â Â Â Â Â Â Â ORDER BY id;  
Â Â Â Â Â Â Â Â """, (name_hash,))  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> cur.fetchall()  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">result</span> <span class="hljs-operator">=</span> []  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span> uid, name_ct, phone_ct, ts <span class="hljs-keyword">in</span> <span class="hljs-keyword">rows</span>:  
Â Â Â Â Â Â Â Â Â Â Â Â name_pt Â <span class="hljs-operator">=</span> aes_gcm_decrypt(bytes(name_ct)).decode("utf-8")  
Â Â Â Â Â Â Â Â Â Â Â Â phone_pt <span class="hljs-operator">=</span> aes_gcm_decrypt(bytes(phone_ct)).decode("utf-8")  
Â Â Â Â Â Â Â Â Â Â Â Â result.append((uid, name_pt, phone_pt, ts))  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">result</span>  
Â   
def update_phone(name: str, new_phone: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â phone_ct Â <span class="hljs-operator">=</span> aes_gcm_encrypt(new_phone.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â UPDATE secure.user_info_secure  
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â SET phone_ct = %s  
Â Â Â Â Â Â Â Â Â Â Â Â Â WHERE name_hash = %s;  
Â Â Â Â Â Â Â Â """, (psycopg2.Binary(phone_ct), name_hash))  
Â Â Â Â Â Â Â Â print(f"update rows = {cur.rowcount}")  
Â   
def delete_user(name: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("DELETE FROM secure.user_info_secure WHERE name_hash=%s;", (name_hash,))  
Â Â Â Â Â Â Â Â print(f"delete rows = {cur.rowcount}")  
Â   
if __name__ <span class="hljs-operator">=</span><span class="hljs-operator">=</span> "__main__":  
Â Â Â Â # å†™å…¥ä¸¤æ¡å¯†æ€æ•°æ®  
Â Â Â Â insert_user("å¼ ä¸‰", "13800000001")  
Â Â Â Â insert_user("æå››", "13800000002")  
Â   
Â Â Â Â # ç­‰å€¼æŸ¥è¯¢ï¼ˆåº“ç«¯åŒ¹é… hashï¼Œå®¢æˆ·ç«¯è§£å¯†å±•ç¤ºï¼‰  
Â Â Â Â print("æŸ¥è¯¢ å¼ ä¸‰ï¼š", query_user_by_name("å¼ ä¸‰"))  
Â   
Â Â Â Â # æ›´æ–°ä¸åˆ é™¤ï¼ˆè§¦å‘å™¨ä¼šè‡ªåŠ¨å†™è´¦æœ¬åŒºå—ï¼‰  
Â Â Â Â update_phone("å¼ ä¸‰", "13912345678")  
Â Â Â Â print("æŸ¥è¯¢ å¼ ä¸‰ï¼š", query_user_by_name("å¼ ä¸‰"))  
Â   
Â Â Â Â delete_user("æå››")  
</code></pre>
<h4 data-id="heading-15"><strong>è¿è¡Œç»“æœ</strong></h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">insert</span> ok, id<span class="hljs-operator">=</span><span class="hljs-number">1</span>  
<span class="hljs-keyword">insert</span> ok, id<span class="hljs-operator">=</span><span class="hljs-number">2</span>  
æŸ¥è¯¢ å¼ ä¸‰ï¼š [(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13800000001'</span>, datetime.datetime(<span class="hljs-number">2025</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">33</span>, <span class="hljs-number">47</span>, ...))]  
<span class="hljs-keyword">update</span> <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  
æŸ¥è¯¢ å¼ ä¸‰ï¼š [(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13912345678'</span>, datetime.datetime(<span class="hljs-number">2025</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">33</span>, <span class="hljs-number">47</span>, ...))]  
<span class="hljs-keyword">delete</span> <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  
</code></pre>
<h2 data-id="heading-16"><strong>ç»“è¯­</strong></h2>
<p>openGauss é€šè¿‡ <strong>å…¨å¯†æ€è®¡ç®— + è´¦æœ¬æ•°æ®åº“ + TEE ç¡¬ä»¶å®‰å…¨ï¼Œ</strong> æ„å»ºäº†å¯å®ç°â€œ<strong>æ•°æ®ä¸è§£å¯†å¯è®¡ç®—ï¼Œäº¤æ˜“å…¨ç¨‹å¯è¿½æº¯</strong>â€çš„æ•°æ®åº“å®‰å…¨ä½“ç³»ã€‚å®ƒä¸ä»…æ»¡è¶³æ”¿åŠ¡ã€é‡‘èã€èƒ½æºç­‰è¡Œä¸šçš„é«˜å®‰å…¨éœ€æ±‚ï¼Œæ›´ä¸º AI å¤§æ¨¡å‹æä¾›äº†å®‰å…¨å¯ä¿¡çš„æ•°æ®åº•åº§ã€‚æœªæ¥ï¼ŒopenGauss å°†æˆä¸ºäº‘ä¸Šâ€œå¯ä¿¡è®¡ç®— + æ•°æ®æ™ºèƒ½â€èåˆçš„å…³é”®å¼•æ“ï¼Œè®©æ•°æ®çœŸæ­£åšåˆ°ï¼šâ€œ<strong>å¯ç”¨ä¸å¯è§ï¼Œå¯æŸ¥å¯è¯ï¼Œå¯æ§å¯å®¡ã€‚</strong> â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£]]></title>    <link>https://juejin.cn/post/7575230119104299049</link>    <guid>https://juejin.cn/post/7575230119104299049</guid>    <pubDate>2025-11-22T15:20:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575230119104299049" data-draft-id="7575320672570851370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£"/> <meta itemprop="keywords" content="ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-22T15:20:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›´å·¾å“¥è§å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/1222312659548446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312659548446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›´å·¾å“¥è§å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:20:13.000Z" title="Sat Nov 22 2025 15:20:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae0162f86a6748dc9aac6e114d771e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=G1d%2BxE8wRHYZXiPGPZ4cY8joewk%3D" alt="æˆªå±2025-11-22 23.18.48.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1P7U4BiED2%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1P7U4BiED2/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šæ–¹å‘1-å·¥å…·ææ•ˆ-å±å¹•æ ‡æ³¨å·¥å…· | å›´å·¾å“¥è§å°˜ğŸ§£</a></p>
<p><strong>ä½œè€…ï¼š</strong> å›´å·¾å“¥è§å°˜</p>
<p><strong>æ‘˜è¦ï¼š</strong> æœ¬æ–‡è®°å½•äº†åˆ©ç”¨ç™¾åº¦æ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰å‚ä¸ CCCF å¤§ä¼šâ€œé©¬åŠ›å…¨å¼€ AI åŠ é€Ÿâ€æ´»åŠ¨çš„ä½œå“å¼€å‘è¿‡ç¨‹ã€‚è¯¥é¡¹ç›®ç›®æ ‡æ˜¯è§£å†³æ—¥å¸¸å·¥ä½œä¸­çš„ä¿¡æ¯åé¦ˆæ•ˆç‡é—®é¢˜ï¼Œèšç„¦äº<strong>å·¥å…·ææ•ˆ</strong>æ–¹å‘ã€‚é€šè¿‡ AI åŠ é€Ÿå¼€å‘ï¼Œåœ¨<strong>å¤§çº¦ä¸¤å¤©çš„æ—¶é—´</strong>å†…ï¼ŒæˆåŠŸå®Œæˆäº†ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Google Chrome å±å¹•æ ‡æ³¨æ‰©å±•æ’ä»¶çš„å¼€å‘ä¸è¿­ä»£ã€‚æœ¬æ–‡é‡ç‚¹é˜è¿°äº†ä»ç®€æ´æç¤ºè¯åˆ°åŠŸèƒ½å®ç°çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä»¥åŠåœ¨è°ƒè¯•å’Œä¼˜åŒ–ä¸­é‡åˆ°çš„æ ¸å¿ƒæŠ€æœ¯é—®é¢˜åŠå…¶è§£å†³åŠæ³•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a7b42f8aacb4b3d940da85632bfce19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=MTp3djQ7pzohPSwtIlWM4wIJOxw%3D" alt="æˆªå±2025-11-22 23.12.18.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-1">ä¸€ã€ å¼•è¨€ï¼ˆIntroductionï¼‰</h4>
<p>ä¸ºå“åº”ç™¾åº¦æ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰CCF å¤§ä¼šçš„å·å¬ï¼Œå³åœ¨â€œæœ€ä½³ææ•ˆâ€ã€â€œæœ€ä½³åˆ›æ„â€ç­‰æ–¹å‘åˆ©ç”¨ AI æé€Ÿå¼€å‘ï¼Œæˆ‘ä»¬é€‰å®šäº†å¼€å‘ä¸€æ¬¾å®ç”¨çš„å±å¹•æ ‡æ³¨æ‰©å±•æ’ä»¶ã€‚è¯¥æ’ä»¶æ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å¿«é€Ÿçš„ç½‘é¡µæ ‡è®°èƒ½åŠ›ï¼Œæ”¯æŒç”»ç¬”ã€çŸ©å½¢ã€ç®­å¤´ä»¥åŠå¯ç§»åŠ¨çš„æ–‡å­—æ ‡æ³¨ç­‰åŠŸèƒ½ã€‚æœ¬æ¬¡å¼€å‘çš„æ ¸å¿ƒä»·å€¼åœ¨äºéªŒè¯å’Œå±•ç¤º AI å·¥å…·åœ¨å¤æ‚åº”ç”¨å¼€å‘ï¼Œç‰¹åˆ«æ˜¯ Chrome æ‰©å±•å¼€å‘é¢†åŸŸçš„åŠ é€Ÿèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-2">äºŒã€ å¼€å‘æ–¹æ³•ä¸ AI åŠ é€Ÿå®æ–½ï¼ˆMethodology and Implementationï¼‰</h4>
<p>æ•´ä¸ªé¡¹ç›®å¯åŠ¨åï¼Œå¼€å‘é€Ÿåº¦çš„å…³é”®ä¾èµ–äºæ–‡å¿ƒå¿«ç çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚</p>
<p><strong>1. åˆå§‹ä»£ç ç”Ÿæˆï¼š</strong> é¡¹ç›®æ²¡æœ‰ä»é›¶å¼€å§‹ç¼–å†™åŸºç¡€æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥å‘æ–‡å¿ƒå¿«ç è¾“å…¥äº†ä¸€ä¸ªç®€æ´çš„æ ¸å¿ƒæç¤ºè¯ï¼Œè¦æ±‚å…¶ç”Ÿæˆæ’ä»¶çš„æ¡†æ¶å’ŒåŠŸèƒ½ã€‚</p>
<ul>
<li><strong>ä½¿ç”¨çš„æç¤ºè¯ä¸ºï¼š</strong> â€œä½ æ˜¯ä¸€ä¸ªè°·æ­Œæ‰©å±•æ’ä»¶å¼€å‘ä¸“å®¶ï¼Œå¼€å‘ä¸€ä¸ªå±å¹•æ ‡æ³¨çš„è°·æ­Œæ’ä»¶â€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ce327c86dd843eca802b4f08367ffdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=5gH16iMIiGoR0pJTOzZGqbQzUOE%3D" alt="æˆªå±2025-11-22 23.11.24.png" loading="lazy"/>
æ–‡å¿ƒå¿«ç åœ¨æ”¶åˆ°æç¤ºåï¼Œ<strong>å¼€å‘é€Ÿåº¦ç›¸å½“å¿«</strong>ï¼Œè¿…é€Ÿå®Œæˆäº†æ’ä»¶çš„åˆæ­¥å¼€å‘ã€‚è¿™ä½¿å¾—å¼€å‘è€…çš„ä¸»è¦å·¥ä½œé‡ç‚¹ä»æ¶æ„æ­å»ºå’ŒåŠŸèƒ½å®ç°ï¼Œè½¬ç§»åˆ°äº†åç»­çš„è°ƒè¯•å’Œä¼˜åŒ–ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb4dbfac00ff4832a2fc0c7337183422~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=8bZUATudiDUC3X92EreP9GilbOg%3D" alt="æˆªå±2025-11-22 23.23.09.png" loading="lazy"/></p>
<p><strong>2. å¼€å‘è€…ä¸»è¦å·¥ä½œé‡å¿ƒï¼š</strong> åœ¨ AI å®Œæˆåˆæ­¥å¼€å‘åï¼Œå¼€å‘è¿‡ç¨‹çš„ä¸»è¦ç²¾åŠ›è¢«æŠ•å…¥åˆ°**ä¿® bugï¼ˆä¿®æ­£ç¨‹åºé”™è¯¯ï¼‰**ä¸Šï¼Œè¿™ä¸€ç¯èŠ‚èŠ±è´¹äº†ä¸»è¦çš„æ—¶é—´ã€‚æ­¤å¤–ï¼Œè¿˜æ¶‰åŠåˆ°æ’ä»¶å›¾æ ‡çš„è®¾è®¡å’Œåˆ¶ä½œã€‚å›¾æ ‡æ˜¯ä½¿ç”¨â€œè±†åŒ…â€è®¾è®¡å·¥å…·å®Œæˆçš„ï¼Œéšååˆ©ç”¨å¼€å‘è€…æ­¤å‰å¼€å‘çš„ <code>Smart Icon Converter</code> å·¥å…·å®Œæˆäº†å›¾æ ‡å°ºå¯¸çš„åˆ¶ä½œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsmart-icon-converter.vercel.app%2F" target="_blank" title="https://smart-icon-converter.vercel.app/" ref="nofollow noopener noreferrer">smart-icon-converter.vercel.app/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5357ac1e46fb4df1b076ad47849ca0d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=YYoG4Vdv6kWH9eJgX2A3SJQyzrk%3D" alt="æˆªå±2025-11-22 23.24.07.png" loading="lazy"/></p>
<h4 data-id="heading-3">ä¸‰ã€ è°ƒè¯•ã€é—®é¢˜ä¸è§£å†³ï¼ˆDebugging, Problems, and Solutionsï¼‰</h4>
<p>è™½ç„¶ AI å®ç°äº†å¿«é€Ÿç”Ÿæˆï¼Œä½†åœ¨å®é™…åº”ç”¨å’Œç”¨æˆ·ä½“éªŒæ–¹é¢ï¼Œä»éœ€è¦äººå·¥ä»‹å…¥è§£å†³ä¸€ç³»åˆ—é—®é¢˜ã€‚</p>






























<table><thead><tr><th align="left">é‡åˆ°çš„é—®é¢˜ (Problem)</th><th align="left">è§£å†³åŠæ³• (Solution)</th><th align="left">æ¥æº</th></tr></thead><tbody><tr><td align="left"><strong>P1ï¼šç¼–ç ä¸ä¹±ç é—®é¢˜</strong></td><td align="left">åˆå§‹ç”Ÿæˆçš„ä»£ç å­˜åœ¨åŠŸèƒ½ä¸å¯ç”¨çš„ç°è±¡ã€‚</td><td align="left">è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ <strong>bug ä¿®å¤ï¼ˆä¿®æ‰ bugï¼‰</strong> ã€‚</td></tr><tr><td align="left"><strong>P2ï¼šç•Œé¢æœ¬åœ°åŒ–ç¼ºå¤±</strong></td><td align="left">æ’ä»¶åˆå§‹ç•Œé¢å…¨éƒ¨æ˜¯<strong>è‹±æ–‡çš„</strong>ï¼Œæ²¡æœ‰ä¸­æ–‡æ”¯æŒã€‚</td><td align="left">æ‰‹åŠ¨è°ƒæ•´ï¼Œä½¿å…¶å®Œæˆä¸­æ–‡æ ‡æ³¨çš„é€‚é…ã€‚</td></tr><tr><td align="left"><strong>P3ï¼šå·¥å…·äº¤äº’æ€§ä¸è¶³</strong></td><td align="left">å¤šä¸ªæ ‡æ³¨å·¥å…·çš„ç»†èŠ‚å­˜åœ¨ç¼ºé™·ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼ša. ç®­å¤´å°ºå¯¸è¿‡å°ã€‚b. ç”»ç¬”å·¥å…·ä¸æ˜¯æ‰€éœ€çš„æ–¹å—å½¢çŠ¶ã€‚c. æ–‡å­—æ ‡æ³¨å®Œæˆå<strong>æ— æ³•å¾ˆå¥½åœ°ç§»åŠ¨</strong>ã€‚</td><td align="left">é’ˆå¯¹æ€§åœ°å®Œæˆäº†ä¿®æ”¹ï¼Œä¿®å¤äº†ç®­å¤´å’Œç”»ç¬”çš„å°ºå¯¸å’Œå½¢çŠ¶é—®é¢˜ï¼Œå¹¶è§£å†³äº†æ–‡å­—æ ‡æ³¨çš„ç§»åŠ¨åŠŸèƒ½ã€‚</td></tr><tr><td align="left"><strong>P4ï¼šåŠŸèƒ½å–èˆä¸å®Œæˆåº¦</strong></td><td align="left">æ’ä»¶ä¸­çš„<strong>æˆªå±åŠŸèƒ½ä¸€ç›´æœªèƒ½å¾ˆå¥½åœ°å®ç°</strong>ï¼Œå½±å“äº†äº§å“çš„æ•´ä½“å®Œæˆåº¦ã€‚</td><td align="left">ä¸ºç¡®ä¿äº§å“æ•´ä½“çš„<strong>å®Œæˆåº¦æ›´å¼º</strong>ï¼Œå†³å®šå°†è¯¥æœªèƒ½è‰¯å¥½å®ç°çš„åŠŸèƒ½å»é™¤ã€‚</td></tr></tbody></table>
<h4 data-id="heading-4">å››ã€ ç»“è®ºï¼ˆConclusionï¼‰</h4>
<p>é€šè¿‡æœ¬æ¬¡å±å¹•æ ‡æ³¨ Chrome æ‰©å±•çš„å¼€å‘å®è·µï¼Œæˆ‘ä»¬æˆåŠŸå±•ç¤ºäº†æ–‡å¿ƒå¿«ç åœ¨æå‡å¼€å‘æ•ˆç‡æ–¹é¢çš„å·¨å¤§æ½œåŠ›ã€‚å€ŸåŠ© AI å¿«é€Ÿç”Ÿæˆä¸»ä½“ä»£ç ï¼Œå¼€å‘äººå‘˜å¾—ä»¥å°†ç²¾åŠ›é›†ä¸­åœ¨è§£å†³ç»†èŠ‚ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œä¿®å¤å…·ä½“ Bug ä¸Šï¼Œä»è€Œåœ¨**æçŸ­çš„æ—¶é—´å†…ï¼ˆçº¦ä¸¤å¤©ï¼‰**äº¤ä»˜äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å·¥å…·ã€‚è¿™ä¸€è¿‡ç¨‹æœ‰åŠ›åœ°å°è¯äº†â€œç åŠ›å…¨å¼€ AI åŠ é€Ÿâ€çš„ä¸»é¢˜ï¼Œå¹¶æœŸæœ›åœ¨æœ¬æ¬¡å¾æ–‡ä¸­èƒ½äº‰å–åˆ°â€œæœ€ä½³ææ•ˆâ€çš„å¥–é¡¹ã€‚</p>
<p>é¡¹ç›®æœ€ç»ˆå®ç°äº†é¢œè‰²é€‰æ‹©ã€ç”»ç¬”ã€çŸ©å½¢ã€ç®­å¤´å’Œå¯ç§»åŠ¨æ–‡å­—æ ‡æ³¨ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<hr/>
<p><strong>ç±»æ¯”æ€»ç»“ï¼š</strong></p>
<p>å¦‚æœå°†ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘æ¯”ä½œä»é›¶å¼€å§‹å»ºé€ ä¸€åº§å¤æ‚çš„å»ºç­‘ï¼Œé‚£ä¹ˆæœ¬æ¬¡åˆ©ç”¨æ–‡å¿ƒå¿«ç çš„ AI åŠ é€Ÿå¼€å‘è¿‡ç¨‹ï¼Œå°±åƒæ˜¯ AI å¿«é€Ÿæä¾›äº†ä¸€ä¸ªé«˜åº¦ç²¾å¯†çš„é¢„åˆ¶æ¡†æ¶ã€‚å¼€å‘è€…æ— éœ€åœ¨åŸºç¡€ç»“æ„ä¸Šè€—è´¹æ—¶é—´ï¼Œè€Œæ˜¯å¯ä»¥ç«‹å³è·³åˆ°å†…é¥°è£…ä¿®ã€ç»†èŠ‚è°ƒæ•´å’Œè§£å†³ç»“æ„å°ç¼ºé™·çš„ç¯èŠ‚ï¼Œæå¤§ç¼©çŸ­äº†ä»æ¦‚å¿µåˆ°äº¤ä»˜çš„å‘¨æœŸã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575104251865726986</link>    <guid>https://juejin.cn/post/7575104251865726986</guid>    <pubDate>2025-11-22T14:00:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251865726986" data-draft-id="7575083657994076187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T14:00:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éª‘ç€bugçš„coder"/> <meta itemprop="url" content="https://juejin.cn/user/1922418579089566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922418579089566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éª‘ç€bugçš„coder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:00:13.000Z" title="Sat Nov 22 2025 14:00:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©å»åƒçƒ¤é±¼ï¼Œæ’é˜Ÿçš„æ—¶å€™æˆ‘çªç„¶é™·å…¥äº†æ€è€ƒã€‚</p>
<p>åœºæ™¯å¤ç°ï¼šè¿™å®¶åº—ç”Ÿæ„å¾ˆç«ã€‚</p>
<ol>
<li>åº—é‡ŒåŸæœ¬æœ‰ 10 å¼ æ¡Œå­ï¼ˆæ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œå…¨åæ»¡äº†ã€‚</li>
<li>è€æ¿çœ‹åˆ°è¿˜æœ‰äººæ¥ï¼Œç«‹é©¬æŠŠé—¨å£éœ²å¤©çš„ 5 å¼ æŠ˜å æ¡Œä¹Ÿæ”¯æ£±èµ·æ¥äº†ï¼ˆæœ€å¤§çº¿ç¨‹ï¼‰ã€‚</li>
<li>æŠ˜å æ¡Œä¹Ÿåæ»¡äº†ï¼Œè€æ¿æ‰å¼€å§‹å‘å·ï¼Œè®©å¤§å®¶åœ¨é—¨å£åå°æ¿å‡³æ’é˜Ÿï¼ˆé˜Ÿåˆ—ï¼‰ã€‚</li>
<li>æ’é˜Ÿçš„äººå®åœ¨å¤ªå¤šï¼Œè€æ¿åªèƒ½å‡ºæ¥æŒ¥æ‰‹ï¼šâ€œåˆ«æ’äº†ï¼Œä»Šå¤©çš„é±¼å–å®Œäº†â€ï¼ˆæ‹’ç»ç­–ç•¥ï¼‰ã€‚</li>
</ol>
<p>è¿™é€»è¾‘å¾ˆé¡ºå§ï¼Ÿ<br/>
<strong>å…ˆå°½å…¨åŠ›æ¥å¾…ï¼ˆæ‰©å®¹ï¼‰ï¼Œå®åœ¨ä¸è¡Œäº†å†è®©äººç­‰ï¼ˆæ’é˜Ÿï¼‰ã€‚</strong></p>
<p>å¯æˆ‘è½¬å¿µä¸€æƒ³â€”â€”</p>
<p><strong>Java åŸç”Ÿçº¿ç¨‹æ± ï¼ˆThreadPoolExecutorï¼‰çš„é€»è¾‘æ€ä¹ˆæ˜¯åç€æ¥çš„ï¼Ÿ</strong></p>
<p>å®ƒçš„æµç¨‹æ˜¯ï¼š<br/>
<strong>æ ¸å¿ƒçº¿ç¨‹æ»¡ â†’ è¿›é˜Ÿåˆ—æ’é˜Ÿ â†’ é˜Ÿåˆ—æ»¡äº†æ‰å»æ‰©å®¹ï¼ˆåˆ›å»ºæœ€å¤§çº¿ç¨‹ï¼‰</strong></p>
<p>è¿™å°±å¥½æ¯”ï¼šåº—é‡Œ 10 å¼ æ¡Œå­åæ»¡äº†ï¼Œè€æ¿ä¸å…ˆæ”¯æŠ˜å æ¡Œï¼Œè€Œæ˜¯éè¦è®©å®¢äººåœ¨é—¨å£æ’é˜Ÿã€‚<br/>
ç›´åˆ°é—¨å£å°æ¿å‡³éƒ½åä¸ä¸‹äº†ï¼Œæ‰ä¸æƒ…ä¸æ„¿åœ°å»æ”¯æŠ˜å æ¡Œã€‚</p>
<p>è¿™ä¸æ˜¯åäººç±»å—ï¼Ÿ</p>
<p>å›æ¥åæˆ‘ç¿»äº†æºç ï¼Œç»ˆäºæƒ³é€šäº†å…¶ä¸­çš„åšå¼ˆã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒçŸ›ç›¾ï¼šèµ„æºè§†è§’çš„å·®å¼‚</h2>
<p><strong>çƒ¤é±¼åº—è§†è§’ï¼ˆIO å¯†é›†å‹ / å“åº”ä¼˜å…ˆï¼‰</strong></p>
<ul>
<li>ç›®æ ‡ï¼šèµšé’±ï¼Œä¸è®©å®¢äººè·‘äº†</li>
<li>æˆæœ¬ï¼šæŠ˜å æ¡Œï¼ˆçº¿ç¨‹ï¼‰å¾ˆä¾¿å®œï¼Œå®¢äººç­‰ä¹…äº†ä¼šèµ°</li>
<li>ç­–ç•¥ï¼šä¿å“åº”ï¼Œåªè¦æœ‰ç©ºåœ°ï¼Œèµ¶ç´§æŠŠæ¡Œå­æ”¯èµ·æ¥ï¼Œåˆ«è®©å®¢äººå¹²ç­‰</li>
</ul>
<p><strong>Java JDK è§†è§’ï¼ˆè®¡ç®—å¯†é›†å‹ / èµ„æºä¼˜å…ˆï¼‰</strong></p>
<ul>
<li>ç›®æ ‡ï¼šä¿æŠ¤ CPUï¼Œé˜²æ­¢ç³»ç»Ÿå´©ç›˜</li>
<li>æˆæœ¬ï¼šçº¿ç¨‹æ˜¯æ˜‚è´µèµ„æº
<ul>
<li>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹é»˜è®¤å  1MB æ ˆç©ºé—´ï¼ˆæ ˆï¼‰</li>
<li>çº¿ç¨‹å¤ªå¤šï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæŠŠ CPU æ‹–æ­»</li>
</ul>
</li>
<li>é˜Ÿåˆ—æ˜¯å»‰ä»·èµ„æºï¼šä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ‰”å †é‡Œï¼Œå‡ ä¹ä¸èŠ±é’±</li>
<li>ç­–ç•¥ï¼šçœèµ„æºï¼Œåªè¦æ ¸å¿ƒçº¿ç¨‹èƒ½æ‰›ï¼Œå°±ç»ä¸è½»æ˜“åŠ äºº<br/>
â€œå…ˆè®©ä»»åŠ¡åœ¨å†…å­˜é‡Œæ’ä¼šå„¿é˜Ÿå§ï¼Œå®åœ¨æ‰›ä¸ä½æˆ‘å†åŠ äººã€‚â€</li>
</ul>
<h2 data-id="heading-1">2. ç ´å±€ï¼šTomcat çš„â€œçƒ¤é±¼æµâ€çº¿ç¨‹æ± </h2>
<p>éš¾é“ Java å°±ä¸èƒ½åƒçƒ¤é±¼åº—ä¸€æ ·å·¥ä½œå—ï¼Ÿ</p>
<p><strong>èƒ½ï¼Œè€Œä¸” Tomcat/Jetty å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚</strong></p>
<p>Web è¯·æ±‚æ˜¯å…¸å‹çš„ IO å¯†é›†å‹ä»»åŠ¡ï¼ˆè¯» DBã€è°ƒæ¥å£ï¼ŒCPU ç»å¸¸ç©ºé—²ï¼‰ã€‚<br/>
å¦‚æœæŒ‰ JDK é»˜è®¤é€»è¾‘ï¼ˆå…ˆæ’é˜Ÿï¼‰ï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨å‰å°±ç­‰åˆ°æ­»ã€‚</p>
<p>Tomcat çš„éªšæ“ä½œï¼š</p>
<p>å®ƒç»§æ‰¿äº† ThreadPoolExecutorï¼Œä½†é­”æ”¹äº†é˜Ÿåˆ—ï¼ˆTaskQueueï¼‰ã€‚</p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ»¡äº†ï¼Œä»»åŠ¡æƒ³å…¥é˜Ÿæ—¶ï¼Œé˜Ÿåˆ—ä¼š<strong>ä¼ªé€ â€œæˆ‘å·²æ»¡â€çš„å‡è±¡</strong>ï¼ˆoffer è¿”å› falseï¼‰</li>
<li>çº¿ç¨‹æ± ä¸€å¬â€œé˜Ÿåˆ—æ»¡äº†â€ï¼Œç«‹åˆ»åˆ›å»ºæ–°çº¿ç¨‹ï¼ˆæ”¯æŠ˜å æ¡Œï¼‰</li>
<li>åªæœ‰å½“çº¿ç¨‹æ•°çœŸçš„è¾¾åˆ° maximumPoolSizeï¼Œé˜Ÿåˆ—æ‰ä¼šçœŸæ­£æ¥æ”¶ä»»åŠ¡å¼€å§‹æ’é˜Ÿ</li>
</ul>
<h2 data-id="heading-2">3. JDK é»˜è®¤çº¿ç¨‹æ± çš„ä¸–çºªå¤§å‘</h2>
<p>åˆå­¦è€…å–œæ¬¢è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-java" lang="java">Executors.newFixedThreadPool(<span class="hljs-number">10</span>)
</code></pre>
<p>å±•å¼€å…¶å®æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">newFixedThreadPool</span><span class="hljs-params">(<span class="hljs-type">int</span> nThreads)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(nThreads, nThreads,
                                  <span class="hljs-number">0L</span>, TimeUnit.MILLISECONDS,
                                  <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;()); <span class="hljs-comment">// âš ï¸ å‘åœ¨è¿™é‡Œ</span>
}
</code></pre>
<p><strong>LinkedBlockingQueue æ˜¯æ— ç•Œé˜Ÿåˆ—ï¼ˆé»˜è®¤ Integer.MAX_VALUEï¼‰</strong></p>
<p>åæœï¼š</p>
<ol>
<li>é˜Ÿåˆ—æ°¸è¿œè£…ä¸æ»¡ â†’ <code>maximumPoolSize</code> å‚æ•°ç›´æ¥å¤±æ•ˆï¼ˆæ°¸è¿œè½®ä¸åˆ°å®ƒå‡ºåœºï¼‰</li>
<li>ä»»åŠ¡å¤„ç†ä¸è¿‡æ¥æ—¶ï¼Œé˜Ÿåˆ—æ— é™è†¨èƒ€ â†’ OOM â†’ æœåŠ¡ç›´æ¥æŒ‚æ‰</li>
</ol>
<p>è¿™æ‰æ˜¯çœŸæ­£çš„ç”Ÿäº§äº‹æ•…ä¹‹ç‹ã€‚</p>
<h2 data-id="heading-3">4. æ€»ç»“ä¸é¿å‘æŒ‡å—</h2>
<p><strong>ä¸¤ç§é€»è¾‘å¯¹æ¯”ï¼š</strong></p>




















<table><thead><tr><th>åœºæ™¯</th><th>æ‰§è¡Œé¡ºåº</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>JDK é»˜è®¤</td><td>æ ¸å¿ƒ â†’ é˜Ÿåˆ— â†’ æœ€å¤§ â†’ æ‹’ç»</td><td>åå°è®¡ç®—ä»»åŠ¡ã€ä¿æŠ¤ CPU</td></tr><tr><td>çƒ¤é±¼åº—/Tomcat</td><td>æ ¸å¿ƒ â†’ æœ€å¤§ â†’ é˜Ÿåˆ— â†’ æ‹’ç»</td><td>é«˜å¹¶å‘ Webã€è¿½æ±‚ä½å»¶è¿Ÿ</td></tr></tbody></table>
<p><strong>ç”Ÿäº§ç¯å¢ƒé“å¾‹ï¼š</strong></p>
<ol>
<li>ç¦æ­¢ä½¿ç”¨ <code>Executors</code> çš„å¿«æ·æ–¹æ³•åˆ›å»ºçº¿ç¨‹æ± </li>
<li>å¿…é¡»æ‰‹åŠ¨ <code>new ThreadPoolExecutor(...)</code></li>
<li>å¿…é¡»ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼ˆæ¨è <code>ArrayBlockingQueue</code>ï¼‰</li>
<li>æ‹’ç»ç­–ç•¥æ¨è <code>CallerRunsPolicy</code>ï¼ˆè®©è°ƒç”¨è€…çº¿ç¨‹è‡ªå·±å¹²æ´»ï¼Œå®ç°å¤©ç„¶èƒŒå‹ï¼‰</li>
</ol>
<p>ä¸‹æ¬¡ä½ å»åƒçƒ¤é±¼æ’é˜Ÿæ—¶ï¼Œæ³¨æ„çœ‹è€æ¿æ˜¯å…ˆæ”¯æŠ˜å æ¡Œï¼Œè¿˜æ˜¯å…ˆè®©ä½ ä»¬æ’é˜Ÿã€‚</p>
<p>å¦‚æœä»–å…ˆæ”¯æŠ˜å æ¡Œâ€”â€”<br/>
æ­å–œä½ ï¼Œè¿™è€æ¿æ‡‚é«˜å¹¶å‘ï¼Œæ¯”å¾ˆå¤šå†™ Java çš„éƒ½å¼ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£]]></title>    <link>https://juejin.cn/post/7575103881422078006</link>    <guid>https://juejin.cn/post/7575103881422078006</guid>    <pubDate>2025-11-22T15:36:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881422078006" data-draft-id="7575230119104036905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£"/> <meta itemprop="keywords" content="Cè¯­è¨€"/> <meta itemprop="datePublished" content="2025-11-22T15:36:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·04354377195"/> <meta itemprop="url" content="https://juejin.cn/user/1118624308269680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1118624308269680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·04354377195
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:36:57.000Z" title="Sat Nov 22 2025 15:36:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</h2>
<blockquote>
<p>æœ¬ç¯‡æ–‡ç« æˆ‘ä¼šç”¨æˆ‘çš„ç†è§£ä»‹ç»ä»€ä¹ˆæ˜¯æ•°ç»„ï¼Œä»¥åŠæ•°ç»„çš„ä¸€äº›åŸºç¡€ç®—æ³•ï¼ŒåŒ…å«é¡ºåºæŸ¥æ‰¾ï¼Œå¯»æ‰¾æœ€å¤§å€¼/æœ€å°å€¼ï¼Œæ•°æ®æ’å…¥ï¼Œæ•°æ®åˆ é™¤ï¼Œæ•°æ®å€’ç½®ï¼Œå†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åºï¼ŒäºŒåˆ†æŸ¥æ‰¾å…±å…«ä¸ªç®—æ³•è®²è§£åŠç¤ºä¾‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€.ä»€ä¹ˆæ˜¯æ•°ç»„?</h3>
<p>æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹æ˜¯ç®—æ³•è¯¦è§£ï¼ŒåŸºæœ¬æ¦‚å¿µç®€å•æä¸€ä¸‹ã€‚</p>
<h4 data-id="heading-2">å®šä¹‰</h4>
<p>ä½ å¯ä»¥æŠŠæ•°ç»„æƒ³è±¡æˆä¸€ä¸ª<strong>æœ‰å¾ˆå¤šä¸ªæ ¼å­çš„å‚¨ç‰©æŸœ</strong>ï¼Œå…¶æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>åŒä¸€æ•°æ®ç±»å‹ï¼š</strong> å‚¨ç‰©æŸœæ¯ä¸ªæ ¼å­éƒ½åªèƒ½å­˜æ”¾<strong>åŒç§ç±»å‹</strong>çš„ç‰©å“ï¼ˆæ¯”å¦‚å…¨æ˜¯ä¹¦æˆ–è€…å…¨æ˜¯è¡£æœï¼‰ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œå³å…ƒç´ å‡ä¸º<strong>åŒç§æ•°æ®ç±»å‹</strong>ï¼ˆå…¨æ˜¯æ•´å‹intæˆ–å…¨æ˜¯å­—ç¬¦å‹char)</li>
<li><strong>è¿ç»­å†…å­˜ç©ºé—´ï¼š</strong> è¿™äº›æ ¼å­æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œè¿ç»­æ’åˆ—çš„</li>
<li><strong>ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰è®¿é—®ï¼š</strong> æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œæˆ‘ä»¬ç§°ä½œä¸‹æ ‡æˆ–ç´¢å¼•ï¼Œä¸”<strong>ç¼–å·ä»0å¼€å§‹</strong></li>
</ul>
<h4 data-id="heading-3">è¡¨ç¤º</h4>
<p>åŸºæœ¬æ ¼å¼ï¼š</p>
<ul>
<li>æ•°ç»„æ•°æ®ç±»å‹ æ•°ç»„åç§°[å…ƒç´ ä¸ªæ•°];</li>
<li>æ•°ç»„æ•°æ®ç±»å‹ æ•°ç»„åç§°[ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰]={å…ƒç´ 1ï¼Œå…ƒç´ 2...å…ƒç´ n};</li>
</ul>
<p>ç¬¬äºŒç§å½¢å¼ä¸‹çš„å…ƒç´ ä¸ªæ•°å¯ä¸å†™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—åé¢{}ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œè‹¥å¡«å†™ï¼Œæ­¤å½¢å¼ä¸‹çš„"å…ƒç´ ä¸ªæ•°"åº”â‰¥n</p>
<p><strong>eg</strong>:int num[5] ={1,2,3,4,5};  å…¶ä¸­ï¼Œnum[0] = 1;num[3] = 4ï¼›</p>
<h3 data-id="heading-4">å¸¸ç”¨åŸºç¡€ç®—æ³•(ï½¡â€¢Ì€á´—-)âœ§</h3>
<p>ä»¥ä¸‹ç®—æ³•å…¨éƒ¨åŸºäº int num[5] = {1,2,3,4,5};è¿›è¡Œ</p>
<h4 data-id="heading-5">1.é¡ºåºæŸ¥æ‰¾</h4>
<h5 data-id="heading-6">å°±åƒåœ¨ä¸€æ’æˆ¿å­é‡Œæ‰¾äººï¼Œä»ç¬¬ä¸€å®¶å¼€å§‹é—®</h5>
<p>eg : æŸ¥æ‰¾æ•°ç»„ num ä¸­å€¼ä¸º 4 çš„å…ƒç´ åŠå…¶ä½ç½®</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">4</span>;<span class="hljs-comment">//è¦æ‰¾çš„å…ƒç´ </span>
    <span class="hljs-type">int</span> found = <span class="hljs-number">0</span>;<span class="hljs-comment">//0è¡¨ç¤ºæ²¡æ‰¾åˆ°ï¼Œ1è¡¨ç¤ºæ‰¾åˆ°äº†ï¼Œå…ˆå‡è®¾æ²¡æ‰¾åˆ°</span>
    
    <span class="hljs-type">int</span> i;
    <span class="hljs-comment">//ä»ç¬¬ä¸€ä¸ªå¼€å§‹é€ä¸ªå¯»æ‰¾ï¼ˆä¹Ÿç§°éå†æ•°ç»„ï¼‰</span>
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-keyword">if</span>(num[i]==n){ <span class="hljs-comment">//å¦‚æœç¬¬iä½æ•°å­—ç­‰äºnï¼Œä»£è¡¨æ‰¾åˆ°</span>
    		found = <span class="hljs-number">1</span>;
    		<span class="hljs-keyword">break</span>;<span class="hljs-comment">//æ‰¾åˆ°å°±åœæ­¢å¾ªç¯</span>
		}
	}
	<span class="hljs-keyword">if</span>(found==<span class="hljs-number">1</span>){
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ‰¾åˆ°äº†ï¼%dåœ¨æ•°ç»„ç¬¬%dä½"</span>,n,i+<span class="hljs-number">1</span>); <span class="hljs-comment">//æ³¨æ„ï¼šæ•°ç»„ä»0å¼€å§‹è®¡æ•°ï¼Œå› æ­¤æ­¤å¤„ä¸ºi+1</span>
	}
	<span class="hljs-keyword">else</span>{
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ²¡æ‰¾åˆ°ï¼"</span>);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//æ‰¾åˆ°äº†ï¼4åœ¨æ•°ç»„ç¬¬4ä½</span>
</code></pre>
<h4 data-id="heading-7">2.å¯»æ‰¾æœ€å¤§å€¼/æœ€å°å€¼</h4>
<h5 data-id="heading-8">å°±åƒé€‰ç­é•¿ï¼Œå…ˆå®šä¸‹ä¸€ä¸ªäººï¼Œå†è·Ÿå…¶ä»–äººè¿›è¡Œæ¯”è¾ƒ</h5>
<p>eg : å¯»æ‰¾å¹¶è¾“å‡ºæ•°ç»„ num ä¸­çš„æœ€å¤§å€¼</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">4</span>;
    <span class="hljs-type">int</span> max = num[<span class="hljs-number">0</span>];<span class="hljs-comment">//å…ˆå‡è®¾æœ€å¤§å€¼ä¸ºnum[0],å³1</span>
    
    <span class="hljs-type">int</span> i;
    <span class="hljs-comment">//éå†æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>;i &lt; <span class="hljs-number">5</span>;i++){<span class="hljs-comment">//æ­¤å¤„iä»1å¼€å§‹ï¼Œå› ä¸ºnum[0]å·²ç»è¢«å‡è®¾ä¸ºæœ€å¤§å€¼ï¼Œä¸éœ€è¦å†å’Œè‡ªå·±æ¯”è¾ƒä¸€æ¬¡</span>
    	<span class="hljs-keyword">if</span>(num[i]&gt;max){
    		max = num[i];<span class="hljs-comment">//æ‰¾åˆ°æ›´å¤§çš„å°±æ›´æ–°</span>
		}
	}
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœ€å¤§å€¼ä¸º%d"</span>,max);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//æœ€å¤§å€¼ä¸º5</span>
</code></pre>
<h4 data-id="heading-9">3.æ•°æ®æ’å…¥</h4>
<h5 data-id="heading-10">å°±åƒæ’é˜Ÿæ’é˜Ÿï¼Œåé¢çš„äººéƒ½è¦å¾€åæŒªä¸€ä½</h5>
<p>eg ï¼šå…ˆè¾“å‡ºæ’å…¥å‰çš„æ•°ç»„ num ,å†åœ¨æ•°ç»„ num ä¸­ç¬¬2ä½å’Œç¬¬3ä½æ•°å­—ä¸­é—´æ’å…¥ä¸€ä¸ªæ•°å­—10å¹¶è¾“å‡ºæ’å…¥åçš„æ–°æ•°ç»„</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">6</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">10</span>;<span class="hljs-comment">//è¦æ’å…¥çš„æ•°å­—</span>
    <span class="hljs-type">int</span> position = <span class="hljs-number">2</span>;<span class="hljs-comment">//è¦æ’å…¥çš„ä½ç½®ï¼ˆç¬¬3ä½ï¼‰ï¼ˆæ•°ç»„ä»0å¼€å§‹è®¡æ•°ï¼Œå› æ­¤æ­¤å¤„æ˜¯2ï¼‰</span>
    
    <span class="hljs-comment">//æ‰“å°æ’å…¥å‰æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
   
   <span class="hljs-comment">//å¼€å§‹æ’å…¥æ“ä½œ</span>
   <span class="hljs-comment">//ä»åå¾€å‰ï¼Œå°†æ’å…¥ä½ç½®åŠå…¶ä¹‹åçš„å…ƒç´ å¾€åç§»ä¸€ä½</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>;i&gt;=position;i--){
        <span class="hljs-comment">//æ€è€ƒæ­¤å¤„iä¸ºä»€ä¹ˆä¸èƒ½ç­‰äº5ï¼Ÿå› ä¸ºæ­¤æ—¶æ•°ç»„è®¡æ•°èŒƒå›´ä¸º0~5å…±6ä¸ªæ•°å­—ï¼Œè‹¥i=5ï¼Œåœ¨æ‰§è¡Œä¸‹è¡Œæ“ä½œæ—¶ï¼Œä¼šå˜æˆnum[6]=num[5],num[6]è¶…è¿‡è®¡æ•°èŒƒå›´ï¼ˆä¹Ÿç§°è¶Šç•Œï¼‰ï¼Œç¨‹åºé”™è¯¯</span>
		num[i+<span class="hljs-number">1</span>] = num[i];
	}
        
   <span class="hljs-comment">//æ’å…¥æ–°å€¼n</span>
	num[position] = n;
        
   <span class="hljs-comment">//æ‰“å°æ’å…¥åçš„æ–°æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">6</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5</span>
<span class="hljs-comment">//1 2 10 3 4 5</span>
</code></pre>
<h4 data-id="heading-11">4.æ•°æ®åˆ é™¤</h4>
<h5 data-id="heading-12">å°±åƒæœ‰äººç¦»å¼€é˜Ÿä¼ï¼Œåé¢çš„äººå¾€å‰è¡¥ä¸Š</h5>
<p>eg : å…ˆè¾“åˆ é™¤å‰çš„æ•°ç»„ï¼Œå†å°†æ•°ç»„ä¸­å€¼ä¸º3çš„å…ƒç´ åˆ é™¤å¹¶è¾“å‡ºåˆ é™¤åçš„æ–°æ•°ç»„</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> position = <span class="hljs-number">2</span>;<span class="hljs-comment">//è¦åˆ é™¤çš„ä½ç½®ï¼ˆç¬¬ä¸‰ä½ï¼‰</span>
    
    <span class="hljs-comment">//æ‰“å°åˆ é™¤å‰çš„æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);

    <span class="hljs-comment">//å¼€å§‹åˆ é™¤æ“ä½œ</span>
    <span class="hljs-comment">//ä»å‰å¾€åï¼Œå°†åˆ é™¤ä½ç½®ä¹‹åçš„ä½ç½®å¾€å‰è¿›ä¸€ä½</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = position+<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">5</span>;i++){<span class="hljs-comment">//æ³¨æ„è¿™é‡Œåˆ é™¤ä½ç½®ä¸å‚ä¸å¾ªç¯ï¼Œæ‰€ä»¥i=position+1</span>
		num[i<span class="hljs-number">-1</span>] = num[i];
	}
	
    <span class="hljs-comment">//æ‰“å°åˆ é™¤åçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">4</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5 </span>
<span class="hljs-comment">//1 2 4 5 </span>
</code></pre>
<h4 data-id="heading-13">5.æ•°æ®å€’ç½®</h4>
<h5 data-id="heading-14">å°±åƒæŠŠä¸€æœ¬ä¹¦å€’è¿‡æ¥è¯»</h5>
<p>eg : å…ˆå°†åŸæ•°ç»„æ‰“å°ï¼Œå†å°†æ•°ç»„ num æŒ‰ç›¸åé¡ºåºæ‰“å°</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
  
   <span class="hljs-comment">//å¼€å§‹å€’ç½®æ“ä½œ</span>
   <span class="hljs-comment">//äº¤æ¢ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªï¼Œäº¤æ¢ç¬¬äºŒä¸ªå’Œå€’æ•°ç¬¬äºŒä¸ª</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++){<span class="hljs-comment">//åªéœ€è¦æ‰§è¡Œ äº¤æ¢å‰ä¸€åŠ çš„æ“ä½œï¼Œå› æ­¤i&lt;2</span>
		<span class="hljs-type">int</span> temp = num[i];
		num[i] = num[<span class="hljs-number">4</span>-i];
		num[<span class="hljs-number">4</span>-i] = temp;
	}
   
   <span class="hljs-comment">//æ‰“å°å€’ç½®åçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5</span>
<span class="hljs-comment">//5 4 3 2 1</span>
</code></pre>
<p>å¦‚æœè§‰å¾—è¿™ç§æ–¹æ³•ä¸å¥½ç†è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦ä¸€ç§ï¼ˆä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ç”¨çš„ä¸€ç§ï¼‰ï¼šå®šä¹‰ä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„ï¼Œå°†æ•°ç»„ num ä»åå¾€å‰éå†ï¼Œå¹¶ä¾æ¬¡ä»å‰å¾€åå¡«å…¥æ–°æ•°ç»„ï¼Œæ–°æ•°ç»„å³ä¸ºå€’ç½®åçš„æ•°ç»„num.ï¼ˆå¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œå°±ä¸å†™å‡ºæ¥äº†ï¼Œæˆ‘è§‰å¾—å¾ˆå¥½ç†è§£(ï½ï¿£â–½ï¿£)ï½</p>
<h4 data-id="heading-15">6.å†’æ³¡æ’åºï¼ˆæ¯è½®æ’å‡ºæœ€å¤§çš„æ•°ï¼‰</h4>
<h5 data-id="heading-16">å°±åƒæ°´ä¸­çš„æ°”æ³¡ï¼Œå¤§çš„å¾€ä¸Šå†’ï¼ˆè™½ç„¶è¿™ä¹ˆå–åï¼Œä½†ä»å°åˆ°å¤§æ’åˆ—å’Œä»å¤§åˆ°å°æ’åˆ—å‡å¯ç”¨æ­¤æ–¹æ³•ï¼‰</h5>
<p><strong>è¿™ä¸ªç®—æ³•æˆ‘è®¤ä¸ºç›´æ¥çœ‹ä»£ç å’Œæ³¨é‡Šå¾ˆæŠ½è±¡ï¼Œå¾ˆéš¾ç†è§£ï¼Œå»ºè®®å…ˆä¸Šç½‘æœç´¢â€œå†’æ³¡æ’åºç®—æ³•åŠ¨ç”»æ¼”ç¤ºâ€å…ˆçœ‹è§†é¢‘ç†è§£ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—å¸®åŠ©å¾ˆå¤§(=ï½€Ï‰Â´=)</strong></p>
<p>eg : å…ˆå°†æ•°ç»„ int num[5] = {2,5,4,1,3}; æ‰“å°ï¼Œå†å°†å…¶å†…å…ƒç´ æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡º</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
    <span class="hljs-comment">//å¼€å§‹å†’æ³¡æ’åº</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++){ <span class="hljs-comment">//éœ€è¦æ¯”è¾ƒ4è½®ï¼Œå³ï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°-1ï¼‰è½®</span>
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>-i;j++){ <span class="hljs-comment">//æ¯è½®æ¯”è¾ƒæ¬¡æ•°å‡å°</span>
			<span class="hljs-keyword">if</span>(num[j]&gt;num[j+<span class="hljs-number">1</span>]){ <span class="hljs-comment">//å¦‚æœå‰é¢çš„æ¯”åé¢çš„å¤§</span>
                        <span class="hljs-comment">//äº¤æ¢ä¸¤ä¸ªæ•°</span>
				<span class="hljs-type">int</span> temp = num[j+<span class="hljs-number">1</span>];
				num[j+<span class="hljs-number">1</span>] = num[j];
				num[j] = temp;
			}
		}
	}

    <span class="hljs-comment">//æ‰“å°æ’åºåçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//2 5 4 1 3</span>
<span class="hljs-comment">//1 2 3 4 5</span>
</code></pre>
<h4 data-id="heading-17">7.ç®€å•é€‰æ‹©æ’åºï¼ˆæ¯è½®æ’å‡ºæœ€å°çš„æ•°ï¼‰</h4>
<h5 data-id="heading-18">å°±åƒé€‰æœ€å°çš„è‹¹æœæ”¾åˆ°æœ€å‰é¢ï¼ˆåŒ6.æ­¤æ–¹æ³•å¯ç”¨äºä»å°åˆ°å¤§å’Œä»å¤§åˆ°å°æ’åºï¼‰</h5>
<p><strong>å’Œå†’æ³¡æ’åºä¸€æ ·ï¼Œå»ºè®®é…åˆç½‘ä¸Šçš„æ‰§è¡ŒåŠ¨ç”»ä¸€èµ·çœ‹( Ë™ê’³Ë™ )</strong></p>
<p>eg : å…ˆå°†æ•°ç»„ int num[5] = {2,5,4,1,3}; æ‰“å°ï¼Œå†å°†å…¶å†…å…ƒç´ æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡º</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
    <span class="hljs-comment">//å¼€å§‹é€‰æ‹©æ’åº</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++){ <span class="hljs-comment">//éœ€è¦é€‰æ‹©4æ¬¡ï¼Œå³ï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°-1ï¼‰æ¬¡</span>
		<span class="hljs-type">int</span> min = i;<span class="hljs-comment">//å‡è®¾æœ€å°çš„æ•°æ˜¯æ•°ç»„ç¬¬iä½å…ƒç´ </span>
		
                
                <span class="hljs-comment">//åœ¨å‰©ä¸‹çš„é‡Œé¢æ‰¾çœŸæ­£çš„æœ€å°å€¼</span>
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = i+<span class="hljs-number">1</span>;j&lt;<span class="hljs-number">5</span>;j++){
			<span class="hljs-keyword">if</span>(num[j]&lt;num[min]){ <span class="hljs-comment">//ä¾æ¬¡æ¯”è¾ƒï¼Œæ‰¾å‡ºæœ€å°å€¼</span>
				min = j;
			}
		}
		
                <span class="hljs-comment">//è‹¥å‡è®¾çš„æœ€å°å€¼ä¸æ˜¯çœŸæ­£çš„æœ€å°å€¼ï¼Œåˆ™å°†è¿™ä¸¤ä¸ªå…ƒç´ äº’æ¢ä½ç½®</span>
		<span class="hljs-keyword">if</span>(min != i){
			<span class="hljs-type">int</span> temp = num[i];
			num[i] = num[min];
			num[min] = temp;
		}
	}
       
     <span class="hljs-comment">//æ‰“å°æ’åºåçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//2 5 4 1 3</span>
<span class="hljs-comment">//1 2 3 4 5</span>
</code></pre>
<h4 data-id="heading-19">8.äºŒåˆ†æŸ¥æ‰¾(!!!è¦æ±‚æ•°ç»„å¿…é¡»æ˜¯æœ‰åºçš„ï¼‰</h4>
<h5 data-id="heading-20">å°±åƒçŒœæ•°å­—æ¸¸æˆï¼Œæ¯æ¬¡éƒ½çŒœä¸­é—´å€¼</h5>
<p>eg : æŸ¥æ‰¾ num æ•°åˆ—ä¸­å€¼ä¸º30çš„å…ƒç´ å¹¶æ‰“å°å…¶ä½ç½®</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">3</span>; <span class="hljs-comment">//è¦æ‰¾çš„æ•°</span>
    
    <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>; <span class="hljs-comment">//å·¦è¾¹èµ·ç‚¹</span>
    <span class="hljs-type">int</span> right = <span class="hljs-number">4</span>; <span class="hljs-comment">//å³è¾¹èµ·ç‚¹</span>
    <span class="hljs-type">int</span> found = <span class="hljs-number">0</span>; <span class="hljs-comment">//æ˜¯å¦æ‰¾åˆ°</span>
    
    <span class="hljs-keyword">while</span>(left&lt;=right){
    	<span class="hljs-type">int</span> mid = (left+right)/<span class="hljs-number">2</span>; <span class="hljs-comment">//ä¸­é—´ä½ç½®</span>
    	
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"åœ¨%dåˆ°%dä¹‹é—´æŸ¥æ‰¾ï¼Œä¸­é—´æ˜¯%d\n"</span>,left,right,mid);
    	
    	<span class="hljs-keyword">if</span>(num[mid]==n){
    		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ‰¾åˆ°äº†ï¼åœ¨ç¬¬%dä¸ªä½ç½®(ä¸‹æ ‡%d)\n"</span>,mid+<span class="hljs-number">1</span>,mid);
    		found = <span class="hljs-number">1</span>;
    		<span class="hljs-keyword">break</span>;<span class="hljs-comment">//æ‰¾åˆ°è¾“å‡ºï¼Œå¹¶åœæ­¢å¾ªç¯</span>
		}
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(num[mid]&lt;n){ <span class="hljs-comment">//ä¸­é—´çš„æ•°å°äºè¦æ‰¾çš„æ•°</span>
			left = mid+<span class="hljs-number">1</span>; <span class="hljs-comment">//åœ¨å³åŠè¾¹æ‰¾</span>
		}
		<span class="hljs-keyword">else</span>{ <span class="hljs-comment">//ä¸­é—´çš„æ•°å¤§äºè¦æ‰¾çš„æ•°</span>
			right = mid<span class="hljs-number">-1</span>; <span class="hljs-comment">//åœ¨å·¦åŠè¾¹æ‰¾</span>
		}
	}
	
	<span class="hljs-keyword">if</span>(!found){
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ²¡æ‰¾åˆ°"</span>);
	}
    
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//åœ¨0åˆ°4ä¹‹é—´æŸ¥æ‰¾ï¼Œä¸­é—´æ˜¯2</span>
<span class="hljs-comment">//æ‰¾åˆ°äº†ï¼åœ¨ç¬¬3ä¸ªä½ç½®ï¼ˆä¸‹æ ‡2ï¼‰</span>
</code></pre>
<h2 data-id="heading-21">ä»¥ä¸Šä¸ºæœ¬ç¯‡æ–‡ç« å…¨éƒ¨å†…å®¹ï¼Œç´¯æ­»æˆ‘äº†ï¼Œç»“æŸï¼¼(ï¿£ï¸¶ï¿£)ï¼ï¼</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°]]></title>    <link>https://juejin.cn/post/7575106644498661410</link>    <guid>https://juejin.cn/post/7575106644498661410</guid>    <pubDate>2025-11-22T15:51:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498661410" data-draft-id="7575062687627149312" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°"/> <meta itemprop="keywords" content="Electron,Vue.js"/> <meta itemprop="datePublished" content="2025-11-22T15:51:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™å›½æµªå­"/> <meta itemprop="url" content="https://juejin.cn/user/1943592291275886"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592291275886/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™å›½æµªå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:51:46.000Z" title="Sat Nov 22 2025 15:51:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¨ å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°</h2>
<blockquote>
<p>ğŸ’¡ æœ¬æ–‡æ·±å…¥æ¢è®¨äº†åœ¨å°è¯´å†™ä½œè½¯ä»¶çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­å®ç°æ–‡æœ¬é«˜äº®åŠŸèƒ½çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å¤šé¢œè‰²é«˜äº®ã€æœç´¢é«˜äº®ã€çŠ¶æ€ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´å®ç°ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€å¥—å®Œæ•´çš„æ–‡æœ¬æ ‡è®°è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“‹ ç›®å½•</h3>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF" title="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF">é¡¹ç›®èƒŒæ™¯</a></li>
<li><a href="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" title="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">æŠ€æœ¯æ¶æ„è®¾è®¡</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" title="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0">æ ¸å¿ƒåŠŸèƒ½å®ç°</a></li>
<li><a href="#%E9%AB%98%E4%BA%AE%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8" title="#%E9%AB%98%E4%BA%AE%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8">é«˜äº®é¢œè‰²é€‰æ‹©å™¨</a></li>
<li><a href="#%E6%90%9C%E7%B4%A2%E9%AB%98%E4%BA%AE%E9%9B%86%E6%88%90" title="#%E6%90%9C%E7%B4%A2%E9%AB%98%E4%BA%AE%E9%9B%86%E6%88%90">æœç´¢é«˜äº®é›†æˆ</a></li>
<li><a href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BA%A4%E4%BA%92" title="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BA%A4%E4%BA%92">çŠ¶æ€ç®¡ç†ä¸äº¤äº’</a></li>
<li><a href="#%E6%A0%B7%E5%BC%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E4%BC%98%E5%8C%96" title="#%E6%A0%B7%E5%BC%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E4%BC%98%E5%8C%96">æ ·å¼æ¸²æŸ“ä¸ä¼˜åŒ–</a></li>
<li><a href="#%E6%8A%80%E6%9C%AF%E4%BA%AE%E7%82%B9%E6%80%BB%E7%BB%93" title="#%E6%8A%80%E6%9C%AF%E4%BA%AE%E7%82%B9%E6%80%BB%E7%BB%93">æŠ€æœ¯äº®ç‚¹æ€»ç»“</a></li>
<li><a href="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B" title="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B">æ€»ç»“ä¸å±•æœ›</a></li>
</ul>
<h3 data-id="heading-2">ğŸ¯ é¡¹ç›®èƒŒæ™¯</h3>
<p>åœ¨å°è¯´åˆ›ä½œè¿‡ç¨‹ä¸­ï¼Œä½œè€…ç»å¸¸éœ€è¦å¯¹ç¬”è®°ä¸­çš„å…³é”®ä¿¡æ¯è¿›è¡Œæ ‡è®°å’Œåˆ†ç±»ï¼Œæ¯”å¦‚é‡è¦äººç‰©ã€åœ°ç‚¹ã€è®¾å®šç­‰ã€‚ä¼ ç»Ÿçš„æ–‡æœ¬ç¼–è¾‘å™¨å¾€å¾€åªæ”¯æŒå•ä¸€é¢œè‰²çš„é«˜äº®ï¼Œæ— æ³•æ»¡è¶³å¤æ‚çš„ä¸–ç•Œè§‚ç®¡ç†éœ€æ±‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ 51mazi çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­è®¾è®¡äº†ä¸€ä¸ªå¤šé¢œè‰²æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼Œè®©ä½œè€…èƒ½å¤Ÿç”¨ä¸åŒé¢œè‰²æ ‡è®°ä¸åŒç±»å‹çš„å†…å®¹ã€‚</p>
<h4 data-id="heading-3">ğŸ¨ é«˜äº®åŠŸèƒ½å±•ç¤º</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0701007ddf7a4c6a895fdf563bdf7a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zu95rWq5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764431506&amp;x-signature=x4oTcWzjvMQp65C3fKBDfGeACw8%3D" alt="ç¬”è®°ç¼–è¾‘å™¨" loading="lazy"/></p>
<p><em>å¤šå½©æ–‡æœ¬é«˜äº®åŠŸèƒ½ - æ”¯æŒ5ç§é¢œè‰²æ ‡è®°ä¸åŒç±»å‹çš„å†…å®¹</em></p>
<h4 data-id="heading-4">âœ¨ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</h4>
<ul>
<li>ğŸ¨ <strong>å¤šé¢œè‰²é«˜äº®</strong>: æ”¯æŒ5ç§é¢œè‰²ï¼ˆé»„è‰²ã€ç»¿è‰²ã€è“è‰²ã€ç²‰è‰²ã€ç´«è‰²ï¼‰è¿›è¡Œæ–‡æœ¬æ ‡è®°</li>
<li>ğŸ” <strong>æœç´¢é«˜äº®</strong>: æœç´¢åŠŸèƒ½è‡ªåŠ¨é«˜äº®åŒ¹é…é¡¹ï¼Œå½“å‰åŒ¹é…é¡¹ç‰¹æ®Šæ ‡è®°</li>
<li>ğŸ¯ <strong>ç²¾ç¡®æ§åˆ¶</strong>: æ”¯æŒå¯¹é€‰ä¸­æ–‡æœ¬åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
<li>ğŸ’¾ <strong>æ•°æ®æŒä¹…åŒ–</strong>: é«˜äº®ä¿¡æ¯éšå†…å®¹ä¸€èµ·ä¿å­˜å’ŒåŠ è½½</li>
<li>ğŸ­ <strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€</li>
</ul>
<h3 data-id="heading-5">ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-6">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h4>
<ul>
<li><strong>TipTap 2.12.0</strong>: åŸºäº ProseMirror çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>@tiptap/extension-highlight</strong>: TipTap å®˜æ–¹é«˜äº®æ‰©å±•</li>
<li><strong>Vue 3.5.13</strong>: æ¸è¿›å¼ JavaScript æ¡†æ¶</li>
<li><strong>Element Plus 2.10.1</strong>: ä¼ä¸šçº§ UI ç»„ä»¶åº“</li>
</ul>
<h4 data-id="heading-7">ç³»ç»Ÿæ¶æ„è®¾è®¡</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å·¥å…·æ ç»„ä»¶     â”‚    â”‚   ç¼–è¾‘å™¨ç»„ä»¶     â”‚    â”‚   TipTapæ‰©å±•    â”‚
â”‚ EditorMenubar   â”‚â—„â”€â”€â–ºâ”‚ EditorPanel     â”‚â—„â”€â”€â–ºâ”‚ Highlight       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              é«˜äº®çŠ¶æ€ç®¡ç†ä¸å‘½ä»¤æ‰§è¡Œ                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-8">ğŸ“ ç»„ä»¶ç»“æ„è®¾è®¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"editor-menubar"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é«˜äº®æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-popover</span> <span class="hljs-attr">v-model:visible</span>=<span class="hljs-string">"highlightPopoverVisible"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">reference</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">:type</span>=<span class="hljs-string">"isHighlight ? 'primary' : 'default'"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SvgIcon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"highlight"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- é¢œè‰²é€‰æ‹©å™¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight-color-picker"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 5ç§é¢œè‰²é€‰é¡¹ --&gt;</span>
        <span class="hljs-comment">&lt;!-- ç§»é™¤é«˜äº®é€‰é¡¹ --&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-popover</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-9">ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-10">1. TipTap Highlight æ‰©å±•é…ç½®</h4>
<p>TipTap çš„ Highlight æ‰©å±•æ”¯æŒå¤šé¢œè‰²é«˜äº®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¼–è¾‘å™¨åˆå§‹åŒ–æ—¶è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/NoteEditorContent.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Highlight</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/extension-highlight'</span>

<span class="hljs-comment">// è·å–ç¬”è®°ç¼–è¾‘å™¨çš„æ‰©å±•é…ç½®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getNoteExtensions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ... å…¶ä»–æ‰©å±•</span>
    <span class="hljs-title class_">Highlight</span>.<span class="hljs-title function_">configure</span>({
      <span class="hljs-attr">multicolor</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨å¤šé¢œè‰²æ”¯æŒ</span>
      <span class="hljs-title class_">HTMLAttributes</span>: {
        <span class="hljs-attr">class</span>: <span class="hljs-string">'search-highlight'</span>  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰ç±»å</span>
      }
    })
  ]
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/ChapterEditorContent.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Highlight</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/extension-highlight'</span>

<span class="hljs-comment">// è·å–ç« èŠ‚ç¼–è¾‘å™¨çš„æ‰©å±•é…ç½®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getChapterExtensions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> [
    <span class="hljs-title class_">StarterKit</span>,
    <span class="hljs-comment">// ... å…¶ä»–æ‰©å±•</span>
    <span class="hljs-title class_">Highlight</span>.<span class="hljs-title function_">configure</span>({
      <span class="hljs-attr">multicolor</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨å¤šé¢œè‰²æ”¯æŒ</span>
      <span class="hljs-title class_">HTMLAttributes</span>: {
        <span class="hljs-attr">class</span>: <span class="hljs-string">'search-highlight'</span>  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰ç±»å</span>
      }
    })
  ]
}
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>multicolor: true</code>: å¯ç”¨å¤šé¢œè‰²æ”¯æŒï¼Œå…è®¸ä¸ºä¸åŒçš„é«˜äº®è®¾ç½®ä¸åŒçš„é¢œè‰²</li>
<li><code>HTMLAttributes</code>: ä¸ºé«˜äº®å…ƒç´ æ·»åŠ è‡ªå®šä¹‰ HTML å±æ€§ï¼Œè¿™é‡Œæ·»åŠ äº† <code>search-highlight</code> ç±»åï¼Œæ–¹ä¾¿æ ·å¼æ§åˆ¶</li>
</ul>
<h4 data-id="heading-11">2. é«˜äº®é¢œè‰²å®šä¹‰</h4>
<p>åœ¨å·¥å…·æ ç»„ä»¶ä¸­å®šä¹‰å¯ç”¨çš„é«˜äº®é¢œè‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®é¢œè‰²é€‰é¡¹ï¼ˆ5ä¸ªæµ…è‰²ã€äº®è‰²ï¼‰</span>
<span class="hljs-keyword">const</span> highlightColors = [
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#ffeb3b'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'é»„è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#a8e6cf'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç»¿è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#a8c8ec'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'è“è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#ffb3ba'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç²‰è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#dda0dd'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç´«è‰²'</span> }
]
</code></pre>
<p><strong>é¢œè‰²é€‰æ‹©åŸåˆ™</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æµ…è‰²ã€äº®è‰²ï¼Œç¡®ä¿åœ¨ç™½è‰²èƒŒæ™¯ä¸Šæ¸…æ™°å¯è§</li>
<li>é¢œè‰²åŒºåˆ†åº¦è¶³å¤Ÿï¼Œä¾¿äºå¿«é€Ÿè¯†åˆ«ä¸åŒç±»å‹çš„å†…å®¹</li>
<li>ç¬¦åˆè§†è§‰è®¾è®¡è§„èŒƒï¼Œä¸ä¼šè¿‡äºåˆºçœ¼</li>
</ul>
<h4 data-id="heading-12">3. é«˜äº®çŠ¶æ€æ£€æµ‹</h4>
<p>æ£€æµ‹å½“å‰é€‰ä¸­æ–‡æœ¬æ˜¯å¦å·²åº”ç”¨é«˜äº®ï¼Œä»¥åŠä½¿ç”¨çš„é¢œè‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®çŠ¶æ€ï¼ˆä»…ç¬”è®°ç¼–è¾‘å™¨ï¼‰</span>
<span class="hljs-keyword">const</span> isHighlight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ç¬”è®°ç¼–è¾‘å™¨ï¼šæ ¹æ®å½“å‰é€‰ä¸­æ–‡æœ¬çš„æ ¼å¼</span>
    <span class="hljs-keyword">return</span> props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">isActive</span>(<span class="hljs-string">'highlight'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
})

<span class="hljs-comment">// æ£€æŸ¥å½“å‰é«˜äº®æ˜¯å¦ä½¿ç”¨æŒ‡å®šé¢œè‰²</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isHighlightColorActive</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span> || !isHighlight.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> attrs = props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">getAttributes</span>(<span class="hljs-string">'highlight'</span>)
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ color å±æ€§ï¼Œé»˜è®¤æ˜¯é»„è‰²</span>
  <span class="hljs-keyword">const</span> currentColor = attrs.<span class="hljs-property">color</span> || <span class="hljs-string">'#ffeb3b'</span>
  <span class="hljs-keyword">return</span> currentColor === color
}
</code></pre>
<p><strong>çŠ¶æ€æ£€æµ‹é€»è¾‘</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>editor.isActive('highlight')</code> æ£€æµ‹å½“å‰é€‰ä¸­æ–‡æœ¬æ˜¯å¦å·²åº”ç”¨é«˜äº®</li>
<li>ä½¿ç”¨ <code>editor.getAttributes('highlight')</code> è·å–é«˜äº®çš„å±æ€§ï¼ŒåŒ…æ‹¬é¢œè‰²</li>
<li>å¦‚æœæ²¡æœ‰é¢œè‰²å±æ€§ï¼Œé»˜è®¤ä½¿ç”¨é»„è‰²ï¼ˆ<code>#ffeb3b</code>ï¼‰</li>
</ul>
<h3 data-id="heading-13">ğŸ¨ é«˜äº®é¢œè‰²é€‰æ‹©å™¨</h3>
<h4 data-id="heading-14">1. é¢œè‰²é€‰æ‹©å™¨ UI å®ç°</h4>
<p>ä½¿ç”¨ Element Plus çš„ Popover ç»„ä»¶å®ç°é¢œè‰²é€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/renderer/src/components/EditorMenubar.vue --&gt;
&lt;el-popover
  v-if="isNoteEditor"
  v-model:visible="highlightPopoverVisible"
  placement="bottom"
  :width="230"
  trigger="click"
  popper-style="padding: 6px;"
&gt;
  &lt;template #reference&gt;
    &lt;el-button
      size="small"
      class="toolbar-item"
      :type="isHighlight ? 'primary' : 'default'"
      title="é«˜äº®"
    &gt;
      &lt;SvgIcon name="highlight" :size="12" /&gt;
    &lt;/el-button&gt;
  &lt;/template&gt;
  &lt;div class="highlight-color-picker"&gt;
    &lt;div class="highlight-colors"&gt;
      &lt;!-- é¢œè‰²é€‰é¡¹ --&gt;
      &lt;div
        v-for="color in highlightColors"
        :key="color.value"
        class="highlight-color-item"
        :class="{ active: isHighlightColorActive(color.value) }"
        :title="color.label"
        @click="applyHighlight(color.value)"
      &gt;
        &lt;div
          :style="{ backgroundColor: color.value }"
          class="hightlight-color-item-main"
        &gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- åˆ†éš”çº¿ --&gt;
      &lt;div class="highlight-color-split"&gt;&lt;/div&gt;
      &lt;!-- ç§»é™¤é«˜äº®é€‰é¡¹ --&gt;
      &lt;div
        :class="{ active: !isHighlight }"
        class="highlight-color-item highlight-color-none"
        title="æ— é«˜äº®"
      &gt;
        &lt;SvgIcon
          class="hightlight-color-item-main"
          :size="20"
          name="ban"
          @click="removeHighlight"
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/el-popover&gt;
</code></pre>
<h4 data-id="heading-15">2. é¢œè‰²é€‰æ‹©å™¨æ ·å¼</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-selector-class">.highlight-colors</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-wrap</span>: wrap;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.highlight-color-item</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;

  <span class="hljs-selector-class">.hightlight-color-item-main</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid transparent;
  }

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.15</span>);
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3e3e3</span>;
    <span class="hljs-selector-class">.hightlight-color-item-main</span> {
      <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--el-color-primary);
    }
  }

  &amp;<span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3e3e3</span>;
    <span class="hljs-selector-class">.hightlight-color-item-main</span> {
      <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--el-color-primary);
    }
  }
}

<span class="hljs-selector-class">.highlight-color-split</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#999</span>;
}
</code></pre>
<p><strong>æ ·å¼è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ†å½¢é¢œè‰²å—ï¼Œè§†è§‰æ¸…æ™°</li>
<li>æ‚¬åœå’Œæ¿€æ´»çŠ¶æ€çš„è§†è§‰åé¦ˆ</li>
<li>å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»</li>
<li>å“åº”å¼å¸ƒå±€ï¼Œé€‚é…ä¸åŒå±å¹•</li>
</ul>
<h4 data-id="heading-16">3. åº”ç”¨é«˜äº®é¢œè‰²</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// åº”ç”¨é«˜äº®é¢œè‰²</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlight</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ä½¿ç”¨ setHighlight ç¡®ä¿åº”ç”¨æ­£ç¡®çš„é¢œè‰²</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">chain</span>().<span class="hljs-title function_">focus</span>().<span class="hljs-title function_">setHighlight</span>({ color }).<span class="hljs-title function_">run</span>()
    highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}

<span class="hljs-comment">// ç§»é™¤é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">removeHighlight</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">chain</span>().<span class="hljs-title function_">focus</span>().<span class="hljs-title function_">unsetHighlight</span>().<span class="hljs-title function_">run</span>()
    highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
</code></pre>
<p><strong>å‘½ä»¤æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ul>
<li><code>editor.chain().focus()</code>: ç¡®ä¿ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹</li>
<li><code>.setHighlight({ color })</code>: ä¸ºé€‰ä¸­æ–‡æœ¬åº”ç”¨æŒ‡å®šé¢œè‰²çš„é«˜äº®</li>
<li><code>.unsetHighlight()</code>: ç§»é™¤é€‰ä¸­æ–‡æœ¬çš„é«˜äº®</li>
<li><code>.run()</code>: æ‰§è¡Œå‘½ä»¤é“¾</li>
</ul>
<h3 data-id="heading-17">ğŸ” æœç´¢é«˜äº®é›†æˆ</h3>
<h4 data-id="heading-18">1. æœç´¢é«˜äº®å®ç°</h4>
<p>æœç´¢åŠŸèƒ½ä¹Ÿä½¿ç”¨ Highlight æ‰©å±•æ¥é«˜äº®åŒ¹é…é¡¹ï¼Œå½“å‰åŒ¹é…é¡¹ä½¿ç”¨è“è‰²ï¼Œå…¶ä»–åŒ¹é…é¡¹ä½¿ç”¨é»„è‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/SearchPanel.vue</span>
<span class="hljs-comment">// ä¸ºæ‰€æœ‰åŒ¹é…é¡¹æ·»åŠ è§†è§‰é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addVisualHighlights</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span> || matches.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„é«˜äº®</span>
  <span class="hljs-title function_">clearVisualHighlights</span>()

  <span class="hljs-comment">// ä¸ºæ¯ä¸ªåŒ¹é…é¡¹æ·»åŠ é«˜äº®æ ‡è®°</span>
  matches.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">match, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> isCurrent = index === currentMatchIndex.<span class="hljs-property">value</span>

    <span class="hljs-comment">// ä½¿ç”¨Tiptapçš„setMarkå‘½ä»¤æ·»åŠ é«˜äº®</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setTextSelection</span>({
      <span class="hljs-attr">from</span>: match.<span class="hljs-property">from</span>,
      <span class="hljs-attr">to</span>: match.<span class="hljs-property">to</span>
    })

    <span class="hljs-comment">// æ·»åŠ é«˜äº®æ ‡è®°ï¼Œä½¿ç”¨highlightæ‰©å±•</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setHighlight</span>({
      <span class="hljs-attr">color</span>: isCurrent ? <span class="hljs-string">'#409eff'</span> : <span class="hljs-string">'#ffeb3b'</span>
    })
  })

  <span class="hljs-comment">// æ¢å¤å½“å‰åŒ¹é…é¡¹çš„é€‰æ‹©</span>
  <span class="hljs-keyword">if</span> (currentMatchIndex.<span class="hljs-property">value</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; currentMatchIndex.<span class="hljs-property">value</span> &lt; matches.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>) {
    <span class="hljs-title function_">highlightMatch</span>(matches.<span class="hljs-property">value</span>[currentMatchIndex.<span class="hljs-property">value</span>])
  }
}

<span class="hljs-comment">// æ¸…é™¤è§†è§‰é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearVisualHighlights</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// é€‰æ‹©æ•´ä¸ªæ–‡æ¡£</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">selectAll</span>()

  <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰é«˜äº®æ ‡è®°</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">unsetHighlight</span>()

  <span class="hljs-comment">// æ¸…é™¤é€‰æ‹©</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setTextSelection</span>(<span class="hljs-number">0</span>)
}
</code></pre>
<p><strong>æœç´¢é«˜äº®ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å½“å‰åŒ¹é…é¡¹ä½¿ç”¨è“è‰²ï¼ˆ<code>#409eff</code>ï¼‰ï¼Œçªå‡ºæ˜¾ç¤º</li>
<li>å…¶ä»–åŒ¹é…é¡¹ä½¿ç”¨é»„è‰²ï¼ˆ<code>#409eff</code>ï¼‰ï¼Œç»Ÿä¸€æ ‡è®°</li>
<li>åˆ‡æ¢åŒ¹é…é¡¹æ—¶ï¼Œé‡æ–°åº”ç”¨æ‰€æœ‰é«˜äº®ä»¥æ›´æ–°é¢œè‰²</li>
</ul>
<h4 data-id="heading-19">2. æœç´¢é«˜äº®ä¸æ‰‹åŠ¨é«˜äº®çš„åè°ƒ</h4>
<p>æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®ä½¿ç”¨ç›¸åŒçš„ Highlight æ‰©å±•ï¼Œä½†é€šè¿‡ä¸åŒçš„é¢œè‰²è¿›è¡ŒåŒºåˆ†ï¼š</p>
<ul>
<li>æœç´¢é«˜äº®ï¼šä¸´æ—¶æ€§ï¼Œä»…åœ¨æœç´¢æ—¶æ˜¾ç¤ºï¼Œä½¿ç”¨è“è‰²å’Œé»„è‰²</li>
<li>æ‰‹åŠ¨é«˜äº®ï¼šæŒä¹…æ€§ï¼Œéšå†…å®¹ä¿å­˜ï¼Œä½¿ç”¨5ç§è‡ªå®šä¹‰é¢œè‰²</li>
</ul>
<h3 data-id="heading-20">ğŸ­ çŠ¶æ€ç®¡ç†ä¸äº¤äº’</h3>
<h4 data-id="heading-21">1. é«˜äº®çŠ¶æ€åŒæ­¥</h4>
<p>å·¥å…·æ æŒ‰é’®çš„çŠ¶æ€éœ€è¦å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®çŠ¶æ€ï¼ˆä»…ç¬”è®°ç¼–è¾‘å™¨ï¼‰</span>
<span class="hljs-keyword">const</span> isHighlight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ç¬”è®°ç¼–è¾‘å™¨ï¼šæ ¹æ®å½“å‰é€‰ä¸­æ–‡æœ¬çš„æ ¼å¼</span>
    <span class="hljs-keyword">return</span> props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">isActive</span>(<span class="hljs-string">'highlight'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
})
</code></pre>
<p><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ Vue 3 çš„ <code>computed</code> å“åº”å¼è®¡ç®—å±æ€§</li>
<li>åŸºäº TipTap ç¼–è¾‘å™¨çš„ <code>isActive()</code> æ–¹æ³•æ£€æµ‹çŠ¶æ€</li>
<li>å½“ç”¨æˆ·é€‰æ‹©ä¸åŒæ–‡æœ¬æ—¶ï¼ŒçŠ¶æ€è‡ªåŠ¨æ›´æ–°</li>
</ul>
<h4 data-id="heading-22">2. äº¤äº’ä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åº”ç”¨é«˜äº®åè‡ªåŠ¨å…³é—­é¢œè‰²é€‰æ‹©å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlight</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-comment">// ... åº”ç”¨é«˜äº®é€»è¾‘</span>
  highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>  <span class="hljs-comment">// å…³é—­å¼¹çª—</span>
}

<span class="hljs-comment">// ç§»é™¤é«˜äº®åè‡ªåŠ¨å…³é—­é¢œè‰²é€‰æ‹©å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">removeHighlight</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ... ç§»é™¤é«˜äº®é€»è¾‘</span>
  highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>  <span class="hljs-comment">// å…³é—­å¼¹çª—</span>
}
</code></pre>
<p><strong>äº¤äº’ä¼˜åŒ–è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>é€‰æ‹©é¢œè‰²åè‡ªåŠ¨å…³é—­å¼¹çª—ï¼Œå‡å°‘æ“ä½œæ­¥éª¤</li>
<li>æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€</li>
<li>é¢œè‰²é€‰æ‹©å™¨ä¸­çš„å½“å‰é¢œè‰²é«˜äº®æ˜¾ç¤º</li>
</ul>
<h3 data-id="heading-23">ğŸ¨ æ ·å¼æ¸²æŸ“ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-24">1. TipTap Highlight æ‰©å±•çš„æ ·å¼æ¸²æŸ“</h4>
<p>TipTap çš„ Highlight æ‰©å±•é€šè¿‡å†…è”æ ·å¼è®¾ç½®èƒŒæ™¯è‰²ï¼Œç¡®ä¿é¢œè‰²æ­£ç¡®æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/renderer/src/components/EditorPanel.vue</span>
<span class="hljs-comment">// Tiptap highlightæ‰©å±•çš„æ ·å¼ï¼ˆæ”¯æŒå¤šé¢œè‰²ï¼‰</span>
<span class="hljs-comment">// ç¡®ä¿æœ‰ data-color å±æ€§çš„ mark å…ƒç´ ä½¿ç”¨ TipTap æ‰©å±•è®¾ç½®çš„é¢œè‰²</span>
<span class="hljs-comment">// TipTap æ‰©å±•ä¼šé€šè¿‡å†…è” style è®¾ç½® background-colorï¼Œä¼˜å…ˆçº§é«˜äºç±»é€‰æ‹©å™¨</span>
</code></pre>
<p><strong>æ ·å¼æ¸²æŸ“æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>TipTap æ‰©å±•é€šè¿‡å†…è” <code>style</code> å±æ€§è®¾ç½® <code>background-color</code></li>
<li>å†…è”æ ·å¼ä¼˜å…ˆçº§é«˜äº CSS ç±»é€‰æ‹©å™¨</li>
<li>æ”¯æŒå¤šé¢œè‰²ï¼Œæ¯ç§é¢œè‰²ç‹¬ç«‹æ¸²æŸ“</li>
</ul>
<h4 data-id="heading-25">2. é«˜äº®æ ·å¼ä¼˜åŒ–</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æœç´¢é«˜äº®æ ·å¼ - ä½¿ç”¨é€‰æ‹©é«˜äº®</span>
<span class="hljs-selector-pseudo">::selection</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attribute">color</span>: white;
}
</code></pre>
<p><strong>æ ·å¼ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å†…è”æ ·å¼ç¡®ä¿é¢œè‰²å‡†ç¡®æ˜¾ç¤º</li>
<li>ä¿æŒé«˜äº®é¢œè‰²ä¸æ–‡æœ¬é¢œè‰²çš„è‰¯å¥½å¯¹æ¯”åº¦</li>
<li>é¿å…è¿‡åº¦è£…é¥°ï¼Œä¿æŒç®€æ´ç¾è§‚</li>
</ul>
<h3 data-id="heading-26">ğŸ¯ æŠ€æœ¯äº®ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-27">1. å¤šé¢œè‰²é«˜äº®æ”¯æŒ</h4>
<ul>
<li><strong>çµæ´»çš„é¢œè‰²ç³»ç»Ÿ</strong>: æ”¯æŒ5ç§é¢œè‰²ï¼Œæ»¡è¶³ä¸åŒåˆ†ç±»éœ€æ±‚</li>
<li><strong>é¢œè‰²æŒä¹…åŒ–</strong>: é«˜äº®é¢œè‰²éšå†…å®¹ä¸€èµ·ä¿å­˜å’ŒåŠ è½½</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é«˜äº®çŠ¶æ€</li>
</ul>
<h4 data-id="heading-28">2. æœç´¢ä¸é«˜äº®é›†æˆ</h4>
<ul>
<li><strong>ç»Ÿä¸€æŠ€æœ¯æ–¹æ¡ˆ</strong>: æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®ä½¿ç”¨ç›¸åŒçš„æ‰©å±•</li>
<li><strong>é¢œè‰²åŒºåˆ†</strong>: é€šè¿‡ä¸åŒé¢œè‰²åŒºåˆ†æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®</li>
<li><strong>åŠ¨æ€æ›´æ–°</strong>: æœç´¢åŒ¹é…é¡¹åˆ‡æ¢æ—¶ï¼Œé«˜äº®é¢œè‰²è‡ªåŠ¨æ›´æ–°</li>
</ul>
<h4 data-id="heading-29">3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h4>
<ul>
<li><strong>ç›´è§‚çš„é¢œè‰²é€‰æ‹©å™¨</strong>: åœ†å½¢é¢œè‰²å—ï¼Œè§†è§‰æ¸…æ™°</li>
<li><strong>å³æ—¶åé¦ˆ</strong>: åº”ç”¨é«˜äº®åç«‹å³æ˜¾ç¤ºæ•ˆæœ</li>
<li><strong>æ“ä½œä¾¿æ·</strong>: ä¸€é”®åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
</ul>
<h4 data-id="heading-30">4. æŠ€æœ¯æ¶æ„ä¼˜åŠ¿</h4>
<ul>
<li><strong>åŸºäº TipTap æ‰©å±•</strong>: åˆ©ç”¨æˆç†Ÿçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>å“åº”å¼çŠ¶æ€ç®¡ç†</strong>: åŸºäº Vue 3 çš„å“åº”å¼ç³»ç»Ÿ</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>: é«˜äº®åŠŸèƒ½ç‹¬ç«‹å°è£…ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<h3 data-id="heading-31">ğŸ”® æ€»ç»“ä¸å±•æœ›</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åœ¨å°è¯´å†™ä½œè½¯ä»¶çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­å®ç°æ–‡æœ¬é«˜äº®åŠŸèƒ½çš„æŠ€æœ¯æ–¹æ¡ˆã€‚é€šè¿‡ TipTap çš„ Highlight æ‰©å±•ã€Vue 3 çš„å“åº”å¼ç³»ç»Ÿä»¥åŠç²¾å¿ƒè®¾è®¡çš„äº¤äº’é€»è¾‘ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç”¨æˆ·ä½“éªŒä¼˜ç§€çš„å¤šé¢œè‰²æ–‡æœ¬é«˜äº®åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-32">æŠ€æœ¯ä¼˜åŠ¿</h4>
<ul>
<li>âœ… <strong>å¤šé¢œè‰²æ”¯æŒ</strong>: 5ç§é¢œè‰²æ»¡è¶³ä¸åŒåˆ†ç±»éœ€æ±‚</li>
<li>âœ… <strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ çŠ¶æ€å®æ—¶åæ˜ é«˜äº®çŠ¶æ€</li>
<li>âœ… <strong>æœç´¢é›†æˆ</strong>: æœç´¢åŠŸèƒ½ä¸é«˜äº®åŠŸèƒ½æ— ç¼é›†æˆ</li>
<li>âœ… <strong>ç”¨æˆ·å‹å¥½</strong>: ç›´è§‚çš„é¢œè‰²é€‰æ‹©å™¨ï¼Œæ“ä½œä¾¿æ·</li>
</ul>
<h4 data-id="heading-33">æœªæ¥ä¼˜åŒ–æ–¹å‘</h4>
<ul>
<li>ğŸ”® <strong>æ›´å¤šé¢œè‰²</strong>: æ”¯æŒè‡ªå®šä¹‰é¢œè‰²é€‰æ‹©å™¨</li>
<li>ğŸ”® <strong>é«˜äº®åˆ†ç±»</strong>: ä¸ºä¸åŒé¢œè‰²æ·»åŠ æ ‡ç­¾å’Œè¯´æ˜</li>
<li>ğŸ”® <strong>æ‰¹é‡æ“ä½œ</strong>: æ”¯æŒæ‰¹é‡åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
<li>ğŸ”® <strong>å¯¼å‡ºæ”¯æŒ</strong>: å¯¼å‡ºæ—¶ä¿ç•™é«˜äº®ä¿¡æ¯</li>
</ul>
<p>é€šè¿‡è¿™å¥—æŠ€æœ¯æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¸ºå°è¯´åˆ›ä½œè€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œç›´è§‚çš„æ–‡æœ¬æ ‡è®°å·¥å…·ï¼Œå¤§å¤§æå‡äº†ç¬”è®°ç®¡ç†å’Œä¸–ç•Œè§‚æ„å»ºçš„æ•ˆç‡ã€‚</p>
<hr/>
<h4 data-id="heading-34">ğŸ“š ç›¸å…³é“¾æ¥</h4>
<ul>
<li><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi" ref="nofollow noopener noreferrer">GitHub - 51mazi</a>ï¼Œç»™ä¸ª Star å“¦~</li>
<li><strong>TipTap å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Ftiptap.dev" target="_blank" title="https://tiptap.dev" ref="nofollow noopener noreferrer">tiptap.dev</a></li>
<li><strong>æŠ€æœ¯æ ˆ</strong>: TipTap + Vue 3 + Electron + Element Plus</li>
</ul>
<h4 data-id="heading-35">ğŸ·ï¸ æ ‡ç­¾</h4>
<p><code>#TipTap</code> <code>#æ–‡æœ¬é«˜äº®</code> <code>#Vue3</code> <code>#Electron</code> <code>#å°è¯´å†™ä½œ</code> <code>#å¯Œæ–‡æœ¬ç¼–è¾‘</code> <code>#å‰ç«¯å¼€å‘</code> <code>#ç”¨æˆ·ä½“éªŒ</code></p>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7575102209605353498</link>    <guid>https://juejin.cn/post/7575102209605353498</guid>    <pubDate>2025-11-22T19:14:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605353498" data-draft-id="7575104251866038282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-22T19:14:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeekPMAlex"/> <meta itemprop="url" content="https://juejin.cn/user/2326992765334446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2326992765334446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeekPMAlex
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T19:14:50.000Z" title="Sat Nov 22 2025 19:14:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨Pythonå¼€å‘ä¸­ï¼Œæœ‰ä¸€äº›æ ¸å¿ƒæ¦‚å¿µ</p>
<ul>
<li>SQLiteæ•°æ®åº“æ“ä½œ</li>
<li>ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆéå¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯é“¾æ¥å…³é—­æ•°æ®åº“ï¼‰</li>
<li>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</li>
</ul>
<p>æœ¬æ–‡é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹ï¼Œè¯¦ç»†è®²è§£è¿™äº›æŠ€æœ¯çš„åŸç†å’Œåº”ç”¨ã€‚</p>
<h2 data-id="heading-1">1. SQLiteå¤šçº¿ç¨‹æ”¯æŒ</h2>
<h3 data-id="heading-2">æ£€æŸ¥SQLiteçº¿ç¨‹å®‰å…¨æ¨¡å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3

<span class="hljs-comment"># æ–¹æ³•1ï¼šæ£€æŸ¥ç¼–è¯‘é€‰é¡¹</span>
conn = sqlite3.connect(<span class="hljs-string">':memory:'</span>)
cursor = conn.cursor()
cursor.execute(<span class="hljs-string">'PRAGMA compile_options;'</span>)
options = [row[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cursor.fetchall()]
thread_options = [opt <span class="hljs-keyword">for</span> opt <span class="hljs-keyword">in</span> options <span class="hljs-keyword">if</span> <span class="hljs-string">'THREAD'</span> <span class="hljs-keyword">in</span> opt.upper()]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"çº¿ç¨‹å®‰å…¨é€‰é¡¹:"</span>, thread_options)

<span class="hljs-comment"># æ–¹æ³•2ï¼šå®é™…å¤šçº¿ç¨‹æµ‹è¯•</span>
<span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_thread_safety</span>():
    results = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">thread_id, db_path, results</span>):
        <span class="hljs-keyword">try</span>:
            conn = sqlite3.connect(db_path, check_same_thread=<span class="hljs-literal">False</span>)
            cursor = conn.cursor()
            cursor.execute(<span class="hljs-string">'''
                CREATE TABLE IF NOT EXISTS test (id INTEGER, data TEXT)
            '''</span>)
            cursor.execute(
                <span class="hljs-string">"INSERT INTO test VALUES (?, ?)"</span>, 
                (thread_id, <span class="hljs-string">f"Data from <span class="hljs-subst">{thread_id}</span>"</span>)
            )
            conn.commit()
            conn.close()
            results[thread_id] = <span class="hljs-string">"æˆåŠŸ"</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            results[thread_id] = <span class="hljs-string">f"å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>

    threads = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
        thread = threading.Thread(target=worker, args=(i, <span class="hljs-string">':memory:'</span>, results))
        threads.append(thread)
        thread.start()
    
    <span class="hljs-keyword">for</span> thread <span class="hljs-keyword">in</span> threads:
        thread.join()
    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">all</span>(<span class="hljs-string">"æˆåŠŸ"</span> <span class="hljs-keyword">in</span> result <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results.values())

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤šçº¿ç¨‹æ”¯æŒ:"</span>, test_thread_safety())
</code></pre>
<h3 data-id="heading-3">SQLiteå¤šçº¿ç¨‹æœ€ä½³å®è·µ(WMLæ¨¡å¼)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeDatabase</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_path</span>):
        self.db_path = db_path
        self.local = threading.local()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_connection</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self.local, <span class="hljs-string">'conn'</span>):
            self.local.conn = sqlite3.connect(
                self.db_path, 
                check_same_thread=<span class="hljs-literal">False</span>
            )
            <span class="hljs-comment"># å¯ç”¨WALæ¨¡å¼æå‡å¹¶å‘æ€§èƒ½</span>
            self.local.conn.execute(<span class="hljs-string">"PRAGMA journal_mode=WAL;"</span>)
        <span class="hljs-keyword">return</span> self.local.conn

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
db_manager = ThreadSafeDatabase(<span class="hljs-string">'test.db'</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker_thread</span>(<span class="hljs-params">thread_id</span>):
    conn = db_manager.get_connection()
    cursor = conn.cursor()
    cursor.execute(<span class="hljs-string">"INSERT INTO data VALUES (?, ?)"</span>, (thread_id, <span class="hljs-string">f"Message"</span>))
    conn.commit()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"çº¿ç¨‹<span class="hljs-subst">{thread_id}</span>æ“ä½œå®Œæˆ"</span>)
</code></pre>
<h2 data-id="heading-4">2. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸@contextmanager</h2>
<h3 data-id="heading-5">åŸºç¡€ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»Ÿæ–‡ä»¶æ“ä½œ</span>
file = <span class="hljs-built_in">open</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'w'</span>)
<span class="hljs-keyword">try</span>:
    file.write(<span class="hljs-string">'Hello'</span>)
<span class="hljs-keyword">finally</span>:
    file.close()  <span class="hljs-comment"># å¿…é¡»æ‰‹åŠ¨å…³é—­</span>

<span class="hljs-comment"># ä½¿ç”¨withè¯­å¥</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> file:
    file.write(<span class="hljs-string">'Hello'</span>)
<span class="hljs-comment"># æ–‡ä»¶è‡ªåŠ¨å…³é—­</span>
</code></pre>
<h3 data-id="heading-6">è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">import</span> time
        self.start = time.time()
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):
        self.end = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è€—æ—¶: <span class="hljs-subst">{self.end - self.start:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)

<span class="hljs-keyword">with</span> Timer():
    <span class="hljs-keyword">import</span> time
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ“ä½œå®Œæˆ"</span>)
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨@contextmanagerç®€åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">import</span> time

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">timer</span>(<span class="hljs-params">description=<span class="hljs-string">"æ“ä½œ"</span></span>):
    start = time.time()
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span>  <span class="hljs-comment"># æš‚åœç‚¹ï¼Œæ‰§è¡Œwithå—å†…çš„ä»£ç </span>
    <span class="hljs-keyword">finally</span>:
        end = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{description}</span>è€—æ—¶: <span class="hljs-subst">{end - start:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)

<span class="hljs-keyword">with</span> timer(<span class="hljs-string">"æ•°æ®åº“æŸ¥è¯¢"</span>):
    time.sleep(<span class="hljs-number">0.5</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æŸ¥è¯¢å®Œæˆ"</span>)
</code></pre>
<h3 data-id="heading-8">æ•°æ®åº“äº‹åŠ¡ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">import</span> sqlite3

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">database_transaction</span>(<span class="hljs-params">db_path</span>):
    <span class="hljs-string">"""è‡ªåŠ¨ç®¡ç†æ•°æ®åº“äº‹åŠ¡çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> cursor  <span class="hljs-comment"># å°†cursoräº¤ç»™withå—ä½¿ç”¨</span>
        conn.commit()  <span class="hljs-comment"># æ²¡æœ‰å¼‚å¸¸æ—¶æäº¤</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… äº‹åŠ¡æäº¤æˆåŠŸ"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        conn.rollback()  <span class="hljs-comment"># æœ‰å¼‚å¸¸æ—¶å›æ»š</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ äº‹åŠ¡å›æ»š: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">raise</span> e
    <span class="hljs-keyword">finally</span>:
        conn.close()  <span class="hljs-comment"># æ€»æ˜¯å…³é—­è¿æ¥</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">with</span> database_transaction(<span class="hljs-string">':memory:'</span>) <span class="hljs-keyword">as</span> cursor:
    cursor.execute(<span class="hljs-string">"CREATE TABLE users (id INTEGER, name TEXT)"</span>)
    cursor.execute(<span class="hljs-string">"INSERT INTO users VALUES (1, 'Alice')"</span>)
</code></pre>
<h2 data-id="heading-9">3. è¿­ä»£å™¨è¯¦è§£</h2>
<h3 data-id="heading-10">åŸºç¡€è¿­ä»£å™¨ä½¿ç”¨</h3>
<p>inter()çš„ç”¨æ³•ï¼šæ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ—è¡¨æ˜¯å¯è¿­ä»£å¯¹è±¡</span>
my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]

<span class="hljs-comment"># æ‰‹åŠ¨ä½¿ç”¨è¿­ä»£å™¨</span>
iterator = <span class="hljs-built_in">iter</span>(my_list)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 3</span>

<span class="hljs-comment"># forå¾ªç¯èƒŒåå°±æ˜¯è¿­ä»£å™¨</span>
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> my_list:
    <span class="hljs-built_in">print</span>(item)
</code></pre>
<h3 data-id="heading-11">è‡ªå®šä¹‰è¿­ä»£å™¨ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end</span>):
        self.current = start
        self.end = end
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self.current &lt;= self.end:
            result = self.current
            self.current += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">raise</span> StopIteration()

<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰è¿­ä»£å™¨</span>
counter = Counter(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> counter:
    <span class="hljs-built_in">print</span>(num)  <span class="hljs-comment"># 1, 2, 3</span>
</code></pre>
<h2 data-id="heading-12">4. ç”Ÿæˆå™¨æ·±åº¦è§£æ</h2>
<p>åªè¦æœ‰yield å°±æ˜¯ç”Ÿæˆå™¨</p>
<h3 data-id="heading-13">ç”Ÿæˆå™¨å‡½æ•°åŸºç¡€</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_generator</span>():
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>

<span class="hljs-comment"># ç”Ÿæˆå™¨å‡½æ•°è¿”å›ç”Ÿæˆå™¨å¯¹è±¡</span>
gen = simple_generator()
<span class="hljs-built_in">print</span>(gen)  <span class="hljs-comment"># &lt;generator object simple_generator at 0x...&gt;</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 3</span>
</code></pre>
<h3 data-id="heading-14">ç”Ÿæˆå™¨ vs æ™®é€šå‡½æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">normal_function</span>():
    result = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
        result.append(i)
    <span class="hljs-keyword">return</span> result  <span class="hljs-comment"># ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ•°æ®ï¼Œå ç”¨å¤§é‡å†…å­˜</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generator_function</span>():
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
        <span class="hljs-keyword">yield</span> i  <span class="hljs-comment"># æ¯æ¬¡åªç”Ÿæˆä¸€ä¸ªæ•°æ®ï¼ŒèŠ‚çœå†…å­˜</span>

<span class="hljs-comment"># å†…å­˜å ç”¨å¯¹æ¯”</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨å†…å­˜: <span class="hljs-subst">{sys.getsizeof(normal_function())}</span> å­—èŠ‚"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨å†…å­˜: <span class="hljs-subst">{sys.getsizeof(generator_function())}</span> å­—èŠ‚"</span>)
</code></pre>
<h3 data-id="heading-15">ç”Ÿæˆå™¨è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ—è¡¨æ¨å¯¼å¼ - ç«‹å³åˆ›å»ºå®Œæ•´åˆ—è¡¨</span>
squares_list = [x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)]
<span class="hljs-built_in">print</span>(squares_list)  <span class="hljs-comment"># [0, 1, 4, 9, 16]</span>

<span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ - æŒ‰éœ€ç”Ÿæˆ</span>
squares_gen = (x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))
<span class="hljs-built_in">print</span>(squares_gen)  <span class="hljs-comment"># &lt;generator object &lt;genexpr&gt; at 0x...&gt;</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(squares_gen))  <span class="hljs-comment"># [0, 1, 4, 9, 16]</span>
</code></pre>
<h3 data-id="heading-16">å®ç”¨ç”Ÿæˆå™¨æ¡ˆä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¯»å–å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_large_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:
            <span class="hljs-keyword">yield</span> line.strip()  <span class="hljs-comment"># æ¯æ¬¡åªè¯»ä¸€è¡Œåˆ°å†…å­˜</span>

<span class="hljs-comment"># æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">limit</span>):
    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
    count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> count &lt; limit:
        <span class="hljs-keyword">yield</span> a
        a, b = b, a + b
        count += <span class="hljs-number">1</span>

<span class="hljs-keyword">for</span> i, fib <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fibonacci(<span class="hljs-number">10</span>)):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"F(<span class="hljs-subst">{i}</span>) = <span class="hljs-subst">{fib}</span>"</span>)
</code></pre>
<h3 data-id="heading-17">ç”Ÿæˆå™¨çŠ¶æ€ä¿æŒ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">interactive_generator</span>():
    total = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = <span class="hljs-keyword">yield</span> total  <span class="hljs-comment"># å¯ä»¥æ¥æ”¶å¤–éƒ¨å‘é€çš„å€¼</span>
        <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            total += value
        <span class="hljs-keyword">else</span>:
            total += <span class="hljs-number">1</span>

gen = interactive_generator()
<span class="hljs-built_in">next</span>(gen)  <span class="hljs-comment"># å¯åŠ¨ç”Ÿæˆå™¨ï¼Œè¿”å›0</span>
<span class="hljs-built_in">print</span>(gen.send(<span class="hljs-number">10</span>))  <span class="hljs-comment"># å‘é€10ï¼Œè¿”å›10</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))     <span class="hljs-comment"># åŠ 1ï¼Œè¿”å›11</span>
<span class="hljs-built_in">print</span>(gen.send(<span class="hljs-number">5</span>))   <span class="hljs-comment"># å‘é€5ï¼Œè¿”å›16</span>
</code></pre>
<h2 data-id="heading-18">5. å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-19">SQLiteå¤šçº¿ç¨‹è¦ç‚¹</h3>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥</li>
<li>å¯ç”¨WALæ¨¡å¼æå‡å¹¶å‘æ€§èƒ½</li>
<li>ä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥</li>
<li>è®¾ç½®é€‚å½“çš„è¶…æ—¶æ—¶é—´å¤„ç†é”ç«äº‰</li>
</ul>
<h3 data-id="heading-20">ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ ¸å¿ƒæ¦‚å¿µ</h3>
<ul>
<li><code>with</code>è¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ</li>
<li><code>@contextmanager</code>è£…é¥°å™¨ç®€åŒ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨åˆ›å»º</li>
<li>SETUPä»£ç åœ¨<code>yield</code>ä¹‹å‰æ‰§è¡Œ</li>
<li>CLEANUPä»£ç åœ¨<code>yield</code>ä¹‹åæ‰§è¡Œ</li>
<li>ä½¿ç”¨<code>try-finally</code>ç¡®ä¿æ¸…ç†ä»£ç æ€»æ˜¯æ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-21">è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨åŒºåˆ«</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>è¿­ä»£å™¨</th><th>ç”Ÿæˆå™¨</th></tr></thead><tbody><tr><td>åˆ›å»ºæ–¹å¼</td><td>å®ç°<code>__iter__</code>å’Œ<code>__next__</code></td><td>ä½¿ç”¨<code>yield</code>å…³é”®å­—</td></tr><tr><td>ä»£ç å¤æ‚åº¦</td><td>ç›¸å¯¹å¤æ‚</td><td>ç®€å•ç›´è§‚</td></tr><tr><td>å†…å­˜æ•ˆç‡</td><td>æŒ‰éœ€åŠ è½½</td><td>æŒ‰éœ€åŠ è½½</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>æ‰‹åŠ¨ç»´æŠ¤</td><td>è‡ªåŠ¨ä¿æŒ</td></tr></tbody></table>
<h3 data-id="heading-22">é‡è¦è§„åˆ™</h3>
<ol>
<li><strong>ä»»ä½•åŒ…å«<code>yield</code>å…³é”®å­—çš„å‡½æ•°éƒ½æ˜¯ç”Ÿæˆå™¨å‡½æ•°</strong></li>
<li><strong>ç”Ÿæˆå™¨å‡½æ•°è°ƒç”¨æ—¶è¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼Œä¸ç«‹å³æ‰§è¡Œå‡½æ•°ä½“</strong></li>
<li><strong>éœ€è¦è°ƒç”¨<code>next()</code>æˆ–ç”¨äºå¾ªç¯æ‰ä¼šæ‰§è¡Œç”Ÿæˆå™¨ä»£ç </strong></li>
<li><strong>ç”Ÿæˆå™¨åœ¨<code>yield</code>å¤„æš‚åœï¼Œä¿æŒå½“å‰çŠ¶æ€</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§]]></title>    <link>https://juejin.cn/post/7575133880435277875</link>    <guid>https://juejin.cn/post/7575133880435277875</guid>    <pubDate>2025-11-22T20:21:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435277875" data-draft-id="7575031395861463086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§"/> <meta itemprop="keywords" content="Go,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-11-22T20:21:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ›²æ°´æµå•†åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/26814017181144"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26814017181144/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ›²æ°´æµå•†åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T20:21:23.000Z" title="Sat Nov 22 2025 20:21:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å¹¶å‘ç¼–ç¨‹çš„ä¸–ç•Œä¸­ï¼Œäº’æ–¥é”æ˜¯å®ˆæŠ¤å…±äº«èµ„æºçš„åŸºçŸ³ã€‚Goè¯­è¨€çš„<code>sync.Mutex</code>ä»¥å…¶ç®€æ´çš„APIèƒŒåï¼Œéšè—ç€ç²¾å·§è€Œé«˜æ•ˆçš„è®¾è®¡ã€‚ä»å¿«é€Ÿè·¯å¾„çš„æè‡´ä¼˜åŒ–åˆ°æ…¢é€Ÿè·¯å¾„çš„æ™ºèƒ½è‡ªé€‚åº”ï¼Œä»æ­£å¸¸æ¨¡å¼çš„é«˜æ€§èƒ½åˆ°é¥¥é¥¿æ¨¡å¼çš„å¼ºå…¬å¹³ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚éƒ½å‡èšç€Goå›¢é˜Ÿå¯¹å¹¶å‘ç¼–ç¨‹çš„æ·±åˆ»ç†è§£ã€‚æœ¬æ–‡å°†æ·±å…¥<code>sync.Mutex</code>çš„æºç ä¸–ç•Œï¼Œæ¢å¯»å…¶èƒŒåçš„è®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„ã€çŠ¶æ€æ ‡å¿—å’Œæ–¹æ³•</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Mutex <span class="hljs-keyword">struct</span> {
    state <span class="hljs-type">int32</span>
    sema  <span class="hljs-type">uint32</span>
}
</code></pre>
<ul>
<li><code>state</code>ï¼šè¡¨ç¤ºé”çš„çŠ¶æ€ï¼ŒåŒ…å«å¤šä¸ªä¿¡æ¯ï¼ˆæ˜¯å¦é”å®šã€æ˜¯å¦å”¤é†’ã€æ˜¯å¦é¥¥é¥¿ã€ç­‰å¾…è€…æ•°é‡ï¼‰ã€‚</li>
<li><code>sema</code>ï¼šä¿¡å·é‡ï¼Œç”¨äºé˜»å¡å’Œå”¤é†’goroutineã€‚</li>
</ul>
<p>çŠ¶æ€æ ‡å¿—</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> (
    mutexLocked = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-literal">iota</span> <span class="hljs-comment">// mutex is locked</span>
    mutexWoken
    mutexStarving
    mutexWaiterShift = <span class="hljs-literal">iota</span>

    starvationThresholdNs = <span class="hljs-number">1e6</span>
)
</code></pre>
<ul>
<li>ä½¿ç”¨ä½æ“ä½œæ¥åœ¨ä¸€ä¸ª32ä½çš„æ•´æ•°ä¸­å­˜å‚¨å¤šä¸ªçŠ¶æ€ã€‚</li>
<li>å¸¸é‡å®šä¹‰ï¼š
<ul>
<li><code>mutexLocked</code>ï¼šæœ€ä½ä½ï¼Œè¡¨ç¤ºé”æ˜¯å¦è¢«æŒæœ‰ã€‚</li>
<li><code>mutexWoken</code>ï¼šç¬¬äºŒä½ï¼Œè¡¨ç¤ºæœ‰goroutineè¢«å”¤é†’ã€‚</li>
<li><code>mutexStarving</code>ï¼šç¬¬ä¸‰ä½ï¼Œè¡¨ç¤ºå½“å‰å¤„äºé¥¥é¥¿æ¨¡å¼ã€‚</li>
<li><code>mutexWaiterShift</code>ï¼š<code>mutexWaiterShift = 3</code>ï¼Œç­‰å¾…è€…æ•°é‡å ç”¨ç¬¬3-31ä½ã€‚</li>
</ul>
</li>
<li>è§£é‡ŠçŠ¶æ€ç»„åˆï¼Œä¾‹å¦‚ï¼š<code>state</code>ä¸º<code>0001</code>ï¼ˆäºŒè¿›åˆ¶ï¼‰è¡¨ç¤ºé”è¢«æŒæœ‰ï¼Œæ— ç­‰å¾…è€…ã€‚</li>
</ul>
<pre><code class="hljs language-text" lang="text">|   31..3  |     2    |   1   |   0   |
|----------|----------|-------|-------|
| ç­‰å¾…è€…æ•°é‡ | starving | woken |locked |
</code></pre>
<p>æ–¹æ³•</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Lock() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> TryLock() <span class="hljs-type">bool</span> {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> lockSlow() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Unlock() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> unlockSlow(<span class="hljs-built_in">new</span> <span class="hljs-type">int32</span>) {}
</code></pre>
<h2 data-id="heading-2">äºŒã€æ¨¡å¼ä»‹ç»</h2>
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé”çš„è®¾è®¡æ°¸è¿œé¢ä¸´ä¸€ä¸ªæ ¹æœ¬æ€§çŸ›ç›¾ï¼šå¦‚ä½•åœ¨<strong>æ€§èƒ½</strong>å’Œ<strong>å…¬å¹³æ€§</strong>ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚Go è¯­è¨€çš„Â <code>sync.Mutex</code>Â é€šè¿‡åˆ›æ–°çš„<strong>åŒæ¨¡å¼è®¾è®¡</strong>ä¼˜é›…åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">2.1 æ­£å¸¸æ¨¡å¼ï¼ˆNormal Modeï¼‰ï¼š</h3>
<ul>
<li>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œç­‰å¾…çš„goroutinesä¼šæŒ‰ç…§FIFOçš„é¡ºåºæ’é˜Ÿï¼Œä½†æ˜¯è¢«å”¤é†’çš„ç­‰å¾…è€…ï¼ˆåˆšåˆšè¢«å”¤é†’çš„goroutineï¼‰å¹¶ä¸ä¼šç«‹å³è·å¾—é”ï¼Œè€Œæ˜¯éœ€è¦å’Œ newly arriving goroutinesï¼ˆæ–°åˆ°è¾¾çš„goroutineï¼‰ç«äº‰ã€‚æ–°åˆ°è¾¾çš„goroutineæœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åœ¨CPUä¸Šè¿è¡Œäº†ï¼Œæ‰€ä»¥å¯èƒ½æ¯”åˆšè¢«å”¤é†’çš„goroutineæ›´æœ‰ç«äº‰åŠ›ã€‚å› æ­¤ï¼Œåˆšè¢«å”¤é†’çš„goroutineå¾ˆå¯èƒ½ç«äº‰å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¢«å”¤é†’çš„goroutineä¼šåŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å‰é¢ã€‚å¦‚æœå®ƒç«äº‰å¤±è´¥è¶…è¿‡1msï¼Œé‚£ä¹ˆmutexå°±ä¼šåˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</p>
</li>
<li>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæ€§èƒ½è¾ƒé«˜ï¼Œå› ä¸ºæ–°åˆ°è¾¾çš„goroutineå¯ä»¥æœ‰æœºä¼šç›´æ¥è·å–é”ï¼Œè€Œä¸éœ€è¦ç­‰å¾…ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">2.2 é¥¥é¥¿æ¨¡å¼ï¼ˆStarvation Modeï¼‰ï¼š</h3>
<ul>
<li>
<p>åœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œmutexçš„æ‰€æœ‰æƒç›´æ¥ä»è§£é”çš„goroutineç§»äº¤ç»™ç­‰å¾…é˜Ÿåˆ—æœ€å‰ç«¯çš„goroutineã€‚æ–°åˆ°è¾¾çš„goroutinesä¸ä¼šå°è¯•å»è·å–é”ï¼Œå³ä½¿mutexçœ‹èµ·æ¥æ˜¯è§£é”çŠ¶æ€ã€‚å®ƒä»¬ä¹Ÿä¸ä¼šè‡ªæ—‹ã€‚ç›¸åï¼Œå®ƒä»¬ä¼šæŠŠè‡ªå·±åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚</p>
</li>
<li>
<p>é¥¥é¥¿æ¨¡å¼æ˜¯ä¸ºäº†é˜²æ­¢ç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutinesé•¿æ—¶é—´è·å–ä¸åˆ°é”ï¼Œå³é˜²æ­¢â€œå°¾å»¶è¿Ÿâ€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">2.3 æ¨¡å¼åˆ‡æ¢çš„æ—¶æœºï¼š</h3>
<ul>
<li>æ­£å¸¸æ¨¡å¼ -&gt; é¥¥é¥¿æ¨¡å¼ï¼šå½“ä¸€ä¸ªgoroutineç­‰å¾…é”çš„æ—¶é—´è¶…è¿‡1msæ—¶ï¼Œmutexåˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</li>
<li>é¥¥é¥¿æ¨¡å¼ -&gt; æ­£å¸¸æ¨¡å¼ï¼šå½“è·å–åˆ°é”çš„goroutineæ˜¯ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªç­‰å¾…è€…ï¼Œæˆ–è€…å®ƒç­‰å¾…çš„æ—¶é—´å°äº1msæ—¶ï¼Œmutexåˆ‡æ¢å›æ­£å¸¸æ¨¡å¼ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†æ–°åˆ°è¾¾goroutineçš„ç«äº‰æœºä¼šï¼ˆæé«˜æ€§èƒ½ï¼‰ï¼Œåˆé¿å…äº†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutineæ°¸è¿œæ— æ³•è·å–é”ï¼ˆä¿è¯å…¬å¹³æ€§ï¼‰ã€‚</p>
<p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>state</code>å­—æ®µçš„<code>mutexStarving</code>ä½æ¥è¡¨ç¤ºé¥¥é¥¿æ¨¡å¼ï¼Œé€šè¿‡ç­‰å¾…æ—¶é—´ï¼ˆ<code>waitStartTime</code>ï¼‰å’Œ<code>starvationThresholdNs</code>ï¼ˆ1e6çº³ç§’ï¼Œå³1msï¼‰æ¥è§¦å‘æ¨¡å¼åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€æ‚²è§‚é”ä¸ä¹è§‚é”æ€æƒ³</h2>
<p>åœ¨ä¸€èˆ¬çš„è®¾è®¡é”è®¾è®¡ä¸­ï¼Œæœ‰2ç§åŸºæœ¬æ€æƒ³â€”â€”<code>æ‚²è§‚é”</code>å’Œ<code>ä¹è§‚é”</code>ï¼Œç”±æ­¤äº§ç”Ÿäº†åŠ é”å¤±è´¥åçš„2ç§åŸºæœ¬ç­–ç•¥ï¼š<code>é˜»å¡ï¼ˆBlockingï¼‰</code>å’Œ<code>è‡ªæ—‹ï¼ˆSpinningï¼‰</code>ã€‚</p>
<h3 data-id="heading-7">3.1 ä¹è§‚é”æ€æƒ³ä¸è‡ªæ—‹ï¼ˆSpinningï¼‰ï¼š</h3>
<p><strong>ä¹è§‚é”æ€æƒ³</strong>ï¼šæ€»æ˜¯å‡è®¾æœ€å¥½çš„æƒ…å†µï¼Œæ¯æ¬¡è®¿é—®å…±äº«èµ„æºæ—¶éƒ½è®¤ä¸ºæ²¡æœ‰å…¶ä»–çº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œå› æ­¤ä¸ä¼šåŠ é”ã€‚åœ¨äº’æ–¥é”ä¸­ï¼Œå¦‚æœåŠ é”å¤±è´¥ï¼Œçº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¸æ–­é‡è¯•ï¼ˆè‡ªæ—‹ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == mutexLocked &amp;&amp; runtime_canSpin(iter) {
    <span class="hljs-comment">// ä¹è§‚å‡è®¾ï¼šé”å¾ˆå¿«ä¼šé‡Šæ”¾ï¼Œè‡ªæ—‹ç­‰å¾…</span>
    runtime_doSpin()
    iter++
    old = m.state
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<ul>
<li>æ“ä½œï¼šçº¿ç¨‹ä¸æ–­å¾ªç¯æ£€æŸ¥é”æ˜¯å¦è¢«é‡Šæ”¾ï¼Œåœ¨æ­¤æœŸé—´ä¸ä¼šè®©å‡ºCPUã€‚</li>
<li>ä¼˜ç‚¹ï¼šé¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¦‚æœé”çš„æŒæœ‰æ—¶é—´å¾ˆçŸ­ï¼Œåˆ™èƒ½å¾ˆå¿«è·å–åˆ°é”ã€‚</li>
<li>ç¼ºç‚¹ï¼šæ¶ˆè€—CPUï¼Œå¦‚æœé”æŒæœ‰æ—¶é—´è¾ƒé•¿ï¼Œåˆ™ä¼šæµªè´¹å¤§é‡CPUå‘¨æœŸã€‚</li>
</ul>
<p><em>æ³¨æ„ï¼Œåœ¨æ•°æ®åº“æˆ–CASï¼ˆCompare-And-Swapï¼‰æ“ä½œä¸­ï¼Œä¹è§‚é”é€šå¸¸é€šè¿‡ç‰ˆæœ¬å·æˆ–CASæ“ä½œæ¥å®ç°ï¼Œè€Œä¸ä½¿ç”¨äº’æ–¥é”ã€‚</em></p>
<h3 data-id="heading-8">3.2 æ‚²è§‚é”æ€æƒ³ä¸é˜»å¡ï¼ˆBlockingï¼‰ï¼š</h3>
<p><strong>æ‚²è§‚é”æ€æƒ³</strong>ï¼šæ€»æ˜¯å‡è®¾æœ€åæƒ…å†µï¼Œè®¤ä¸ºå…±äº«èµ„æºæ¯æ¬¡è¢«è®¿é—®æ—¶éƒ½ä¼šå‘ç”Ÿå†²çªï¼Œå› æ­¤æ¯æ¬¡è®¿é—®æ—¶éƒ½ä¼šå…ˆåŠ é”ï¼Œé˜²æ­¢å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, old, <span class="hljs-built_in">new</span>) {
    <span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == <span class="hljs-number">0</span> {
            <span class="hljs-keyword">break</span> <span class="hljs-comment">// locked the mutex with CAS</span>
    }
    queueLifo := waitStartTime != <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> waitStartTime == <span class="hljs-number">0</span> {
        waitStartTime = runtime_nanotime()
    }
    <span class="hljs-comment">// æ‚²è§‚ç°å®ï¼šè¿›å…¥é˜»å¡</span>
    runtime_SemacquireMutex(&amp;m.sema, queueLifo, <span class="hljs-number">2</span>)
}
</code></pre>
<ul>
<li>æ“ä½œï¼šå°†å½“å‰çº¿ç¨‹ï¼ˆæˆ–goroutineï¼‰æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶è®©å‡ºCPUï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ã€‚</li>
<li>ä¼˜ç‚¹ï¼šä¸æ¶ˆè€—CPUå‘¨æœŸï¼Œé€‚åˆé•¿æ—¶é—´ç­‰å¾…æˆ–é«˜ç«äº‰åœºæ™¯ã€‚</li>
<li>ç¼ºç‚¹ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆç”¨æˆ·æ€åˆ°å†…æ ¸æ€ï¼‰çš„å¼€é”€è¾ƒå¤§ï¼Œå¦‚æœé”çš„æŒæœ‰æ—¶é—´å¾ˆçŸ­ï¼Œé‚£ä¹ˆå”¤é†’çº¿ç¨‹çš„å¼€é”€å¯èƒ½æ¯”é”æŒæœ‰æ—¶é—´è¿˜é•¿ã€‚</li>
</ul>
<p>Go sync.Mutex çš„è®¾è®¡æ²¡æœ‰ç®€å•åœ°äºŒé€‰ä¸€ï¼Œè€Œæ˜¯è®¾è®¡äº†ä¸€ä¸ª<strong>è‡ªé€‚åº”çš„æ··åˆç­–ç•¥</strong></p>
<h2 data-id="heading-9">å››ã€åŠ é”è¿‡ç¨‹ï¼ˆLockï¼‰</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Lock() {
    <span class="hljs-comment">// å¿«é€Ÿè·¯å¾„ï¼šå½“é”å®Œå…¨ç©ºé—²æ—¶ï¼Œé€šè¿‡ä¸€æ¬¡åŸå­æ“ä½œç›´æ¥è·å–é”</span>
    <span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, <span class="hljs-number">0</span>, mutexLocked) {
        <span class="hljs-keyword">if</span> race.Enabled {
            race.Acquire(unsafe.Pointer(m))
        }
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// æ…¢é€Ÿè·¯å¾„</span>
    m.lockSlow()
}
</code></pre>
<p><em>æ³¨æ„ï¼šm.lockSlow()è¢«å•ç‹¬æ‹¿å‡ºæ¥ï¼Œè¿™æ ·å¿«é€Ÿè·¯å¾„å°±å¯ä»¥è¢«Goç¼–è¯‘å™¨å†…è”ä¼˜åŒ–ã€‚</em></p>
<h3 data-id="heading-10">å¿«é€Ÿè·¯å¾„</h3>
<ul>
<li>é€šè¿‡CASå°è¯•å°†<code>state</code>ä»0è®¾ç½®ä¸º<code>mutexLocked</code>ï¼ŒæˆåŠŸåˆ™è¿”å›ã€‚</li>
</ul>
<h3 data-id="heading-11">æ…¢é€Ÿè·¯å¾„ï¼ˆlockSlowï¼‰</h3>
<ul>
<li>åˆå§‹åŒ–ä¸€äº›å˜é‡ï¼š<code>waitStartTime</code>ï¼ˆå¼€å§‹ç­‰å¾…çš„æ—¶é—´ï¼‰ã€<code>starving</code>ï¼ˆæ˜¯å¦é¥¥é¥¿ï¼‰ã€<code>awoke</code>ï¼ˆæ˜¯å¦è¢«å”¤é†’ï¼‰ã€<code>iter</code>ï¼ˆè‡ªæ—‹è®¡æ•°å™¨ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> waitStartTime <span class="hljs-type">int64</span>
starving := <span class="hljs-literal">false</span>
awoke := <span class="hljs-literal">false</span>
iter := <span class="hljs-number">0</span>
old := m.state
</code></pre>
<ul>
<li>
<p>å¾ªç¯å°è¯•è·å–é”ï¼š</p>
<ul>
<li><strong>è‡ªæ—‹æ¡ä»¶</strong>ï¼šæ­£å¸¸æ¨¡å¼ã€é”è¢«æŒæœ‰ã€è‡ªæ—‹æ¬¡æ•°æœªè¶…è¿‡ä¸Šé™ï¼ˆç”±goè¿è¡Œæ—¶åˆ¤æ–­ï¼‰ï¼Œåˆ™è¿›è¡Œè‡ªæ—‹ã€‚
<ul>
<li>è‡ªæ—‹ä¸­å°è¯•è®¾ç½®<code>mutexWoken</code>ï¼Œä»¥é€šçŸ¥è§£é”è€…ä¸è¦å”¤é†’å…¶ä»–goroutineã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == mutexLocked &amp;&amp; runtime_canSpin(iter) {
    <span class="hljs-keyword">if</span> !awoke &amp;&amp; old&amp;mutexWoken == <span class="hljs-number">0</span> &amp;&amp; old&gt;&gt;mutexWaiterShift != <span class="hljs-number">0</span> &amp;&amp;
        atomic.CompareAndSwapInt32(&amp;m.state, old, old|mutexWoken) {
        awoke = <span class="hljs-literal">true</span>
    }
    runtime_doSpin()
    iter++
    old = m.state
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<pre><code class="hljs language-text" lang="text">|   31..3  |     2    |   1   |   0   |
|----------|----------|-------|-------|
| ç­‰å¾…è€…æ•°é‡ | starving | woken |locked |
|   x      |     0    |   y   |   0   |
</code></pre>
<p>ä¸Šè¿°æ¡ä»¶ï¼š</p>
<ul>
<li>
<p><code>mutexWoken == 0</code>Â å¯¹åº”çš„æ˜¯è¡¨æ ¼ä¸­çš„Â <code>y = 0</code>ï¼ˆå³ woken ä½ä¸º 0ï¼‰ã€‚</p>
</li>
<li>
<p><code>old&gt;&gt;mutexWaiterShift != 0</code>Â å¯¹åº”çš„æ˜¯è¡¨æ ¼ä¸­çš„Â <code>x &gt; 0</code>ï¼ˆå³ç­‰å¾…è€…æ•°é‡å¤§äº 0ï¼‰ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€è®¡ç®—</strong>ï¼š</p>
<ul>
<li>å¦‚æœä¸åœ¨é¥¥é¥¿æ¨¡å¼ï¼Œåˆ™å°è¯•è®¾ç½®é”æ ‡å¿—ã€‚</li>
<li>å¦‚æœé”è¢«æŒæœ‰æˆ–é¥¥é¥¿ï¼Œåˆ™å¢åŠ ç­‰å¾…è€…è®¡æ•°ã€‚</li>
<li>å¦‚æœå½“å‰goroutineå·²ç»æ ‡è®°ä¸ºé¥¥é¥¿ä¸”é”è¢«æŒæœ‰ï¼Œåˆ™è®¾ç½®é¥¥é¥¿æ¨¡å¼ã€‚</li>
<li>å¦‚æœå½“å‰goroutineæ˜¯è¢«å”¤é†’çš„ï¼Œéœ€è¦æ¸…é™¤<code>mutexWoken</code>æ ‡å¿—ï¼Œå³å°†yè®¾ç½®ä¸º0ã€‚</li>
</ul>
</li>
<li>
<p><strong>CASæ›´æ–°çŠ¶æ€</strong>ï¼šå¦‚æœæˆåŠŸï¼Œåˆ™æ ¹æ®æ—§çŠ¶æ€åˆ¤æ–­ï¼š</p>
<ul>
<li>å¦‚æœæ—§çŠ¶æ€æœªé”å®šä¸”éé¥¥é¥¿ï¼Œåˆ™æˆåŠŸè·å–é”ï¼Œé€€å‡ºå¾ªç¯ã€‚</li>
<li>å¦åˆ™ï¼Œæ’é˜Ÿç­‰å¾…ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç­‰å¾…ï¼Œè®°å½•å¼€å§‹æ—¶é—´ï¼Œå¹¶æ’é˜Ÿåˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼›å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œåˆ™æ’é˜Ÿåˆ°é˜Ÿåˆ—å¤´éƒ¨ï¼‰ã€‚</li>
<li>é€šè¿‡ä¿¡å·é‡é˜»å¡ç­‰å¾…ã€‚</li>
<li>è¢«å”¤é†’åï¼Œæ£€æŸ¥ç­‰å¾…æ—¶é—´æ˜¯å¦è¶…è¿‡1msï¼Œæ›´æ–°é¥¥é¥¿æ ‡å¿—ã€‚</li>
<li>å¦‚æœå¤„äºé¥¥é¥¿æ¨¡å¼ï¼Œåˆ™è°ƒæ•´çŠ¶æ€ï¼ˆå‡å°‘ç­‰å¾…è€…è®¡æ•°ï¼Œå¹¶è®¾ç½®é”æ ‡å¿—ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™é€€å‡ºé¥¥é¥¿æ¨¡å¼ï¼‰ã€‚
<ul>
<li>é€€å‡ºé¥¥é¥¿æ¨¡å¼çš„æ¡ä»¶ï¼ˆäºŒè€…æ»¡è¶³å…¶ä¸€å³å¯ï¼‰ï¼ša. ç«äº‰ä¸æ¿€çƒˆï¼ˆé˜»å¡å°é›¨1msï¼‰ï¼Œb. å½“å‰ä¸ºæœ€åä¸€ä¸ªç­‰å¾…è€…ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¦‚æœCASå¤±è´¥ï¼Œåˆ™é‡æ–°è¯»å–çŠ¶æ€ï¼Œç»§ç»­å¾ªç¯ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">æ€è€ƒï¼šä¸ºä»€ä¹ˆè¢«å”¤é†’åå¤„äºé¥¥é¥¿æ¨¡å¼å¯ä»¥ç›´æ¥è°ƒæ•´çŠ¶æ€å¹¶è¿”å›ï¼ˆå³è·å–é”ï¼‰ï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go">runtime_SemacquireMutex(&amp;m.sema, queueLifo, <span class="hljs-number">2</span>)
starving = starving || runtime_nanotime()-waitStartTime &gt; starvationThresholdNs
old = m.state
<span class="hljs-keyword">if</span> old&amp;mutexStarving != <span class="hljs-number">0</span> {
    <span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexWoken) != <span class="hljs-number">0</span> || old&gt;&gt;mutexWaiterShift == <span class="hljs-number">0</span> {
        throw(<span class="hljs-string">"sync: inconsistent mutex state"</span>)
    }
    delta := <span class="hljs-type">int32</span>(mutexLocked - <span class="hljs-number">1</span>&lt;&lt;mutexWaiterShift)
    <span class="hljs-keyword">if</span> !starving || old&gt;&gt;mutexWaiterShift == <span class="hljs-number">1</span> {
        delta -= mutexStarving
    }
    atomic.AddInt32(&amp;m.state, delta)
    <span class="hljs-keyword">break</span>
}
</code></pre>
<p>å› ä¸ºåœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œé”çš„æ‰€æœ‰æƒé€šè¿‡<strong>ç›´æ¥ç§»äº¤</strong>æœºåˆ¶ä¿è¯â€”â€”è§£é”æ“ä½œä¼šç›´æ¥å°†é”äº¤ç»™ç­‰å¾…é˜Ÿåˆ—å¤´éƒ¨çš„ goroutineã€‚å½“å‰ goroutine è¢«å”¤é†’æ—¶ï¼Œå®ƒå·²ç»è¢«é€‰å®šä¸ºé”çš„ä¸‹ä¸€ä¸ªæŒæœ‰è€…ï¼Œæ— éœ€å†å‚ä¸ç«äº‰ã€‚åŒæ—¶ï¼Œæ–°æ¥çš„ goroutine è¢«å¼ºåˆ¶æ’åˆ°é˜Ÿå°¾ï¼Œç¡®ä¿äº†ä¸¥æ ¼çš„ FIFO é¡ºåºï¼Œä»æ ¹æœ¬ä¸Šé˜²æ­¢äº†<strong>é¥¥é¥¿ç°è±¡</strong>ã€‚</p>
<h2 data-id="heading-13">äº”. è§£é”è¿‡ç¨‹ï¼ˆUnlockï¼‰</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Unlock() {
    <span class="hljs-keyword">if</span> race.Enabled {
        _ = m.state
        race.Release(unsafe.Pointer(m))
    }
    <span class="hljs-built_in">new</span> := atomic.AddInt32(&amp;m.state, -mutexLocked)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">new</span> != <span class="hljs-number">0</span> {
        m.unlockSlow(<span class="hljs-built_in">new</span>)
    }
}
</code></pre>
<h3 data-id="heading-14">å¿«é€Ÿè·¯å¾„</h3>
<ul>
<li>å°†<code>state</code>å‡å»<code>mutexLocked</code>ï¼Œå¦‚æœç»“æœä¸º0ï¼Œåˆ™æ²¡æœ‰ç­‰å¾…è€…ï¼Œç›´æ¥è¿”å›ã€‚</li>
</ul>
<h3 data-id="heading-15">æ…¢é€Ÿè·¯å¾„ï¼ˆunlockSlowï¼‰</h3>
<ul>
<li>
<p>æ£€æŸ¥è§£é”çŠ¶æ€ï¼šå¦‚æœå¯¹æœªé”å®šçš„é”è§£é”ï¼Œåˆ™panicã€‚</p>
</li>
<li>
<p>æ ¹æ®æ˜¯å¦å¤„äºé¥¥é¥¿æ¨¡å¼åˆ†åˆ«å¤„ç†ï¼š</p>
<ul>
<li>
<p><strong>æ­£å¸¸æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æœ‰ç­‰å¾…è€…ï¼Œæˆ–è€…å·²ç»æœ‰goroutineè¢«å”¤é†’æˆ–è·å–é”ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚</li>
<li>å¦åˆ™ï¼Œå°è¯•å‡å°‘ä¸€ä¸ªç­‰å¾…è€…å¹¶è®¾ç½®å”¤é†’æ ‡å¿—ä¸º1ï¼Œç„¶åå”¤é†’ä¸€ä¸ªgoroutineã€‚</li>
</ul>
</li>
<li>
<p><strong>é¥¥é¥¿æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ç›´æ¥é€šè¿‡ä¿¡å·é‡å”¤é†’é˜Ÿåˆ—å¤´éƒ¨çš„goroutineï¼ˆç§»äº¤é”çš„æ‰€æœ‰æƒï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åœ¨è§£é”è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Â <code>runtime_Semrelease</code>Â çš„Â <code>handoff</code>Â å‚æ•°æ§åˆ¶é”çš„ç§»äº¤æ–¹å¼ï¼š</p>
<ul>
<li><strong>æ­£å¸¸æ¨¡å¼</strong>Â (<code>handoff=false</code>)ï¼šå”¤é†’é˜Ÿå¤´ç­‰å¾…è€…<strong>å‚ä¸é”ç«äº‰</strong></li>
<li><strong>é¥¥é¥¿æ¨¡å¼</strong>Â (<code>handoff=true</code>)ï¼šç›´æ¥å°†é”<strong>ç§»äº¤ç»™é˜Ÿå¤´ç­‰å¾…è€…</strong>ï¼Œæ–°æ¥çš„ goroutine åªèƒ½æ’é˜Ÿã€‚</li>
</ul>
<p>ç›´æ¥ç§»äº¤çš„å®ç°æ¶‰åŠåˆ°GMPæ¨¡å‹çš„è°ƒåº¦ï¼Œå¯ä»¥é˜…è¯»åšå®¢<a href="https://juejin.cn/editor/drafts/7572515402795499570" target="_blank" title="https://juejin.cn/editor/drafts/7572515402795499570">Goè¯­è¨€GMPè°ƒåº¦æ¨¡å‹è§£æ</a></p>
<p>å…¶æ ¸å¿ƒä»£ç å®ç° <code>runtime/sema.go</code> ä¸­</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> handoff &amp;&amp; cansemacquire(addr) {
    s.ticket = <span class="hljs-number">1</span>
}
readyWithTime(s, <span class="hljs-number">5</span>+skipframes)
<span class="hljs-keyword">if</span> s.ticket == <span class="hljs-number">1</span> &amp;&amp; getg().m.locks == <span class="hljs-number">0</span> &amp;&amp; getg() != getg().m.g0 {
    goyield()
}
</code></pre>
<p>ç®€å•æ¥è¯´ï¼Œåœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œè§£é”æ“ä½œä¼šé€šè¿‡è¿è¡Œæ—¶ä¿¡å·é‡çš„ç‰¹æ®Šæœºåˆ¶ï¼Œå°†é”çš„æ‰€æœ‰æƒç›´æ¥ç§»äº¤ç»™ç­‰å¾…é˜Ÿåˆ—æœ€å‰ç«¯çš„goroutineï¼Œå¹¶é€šè¿‡<code>goyield()</code>ç«‹å³è®©å‡ºCPUï¼Œä½¿è¢«å”¤é†’çš„goroutineèƒ½é©¬ä¸Šå¼€å§‹æ‰§è¡Œã€‚</p>
<h4 data-id="heading-16">æ€è€ƒï¼šä¸ºä»€ä¹ˆåœ¨æ­£å¸¸æ¨¡å¼ä¸‹è§£é”ï¼Œéœ€è¦å°†å”¤é†’æ ‡å¿—ç½®ä¸º1ï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-built_in">new</span> = (old - <span class="hljs-number">1</span>&lt;&lt;mutexWaiterShift) | mutexWoken
<span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, old, <span class="hljs-built_in">new</span>) {
    runtime_Semrelease(&amp;m.sema, <span class="hljs-literal">false</span>, <span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span>
}
</code></pre>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œè§£é”æ“ä½œä¸­è®¾ç½®mutexWokenä¸ºäº†åè°ƒå¤šä¸ªè§£é”è€…å¹¶å‘è§£é”å”¤é†’å¤šä¸ªç­‰å¾…è€…ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªç­‰å¾…çš„gorutineè¢«å”¤é†’ï¼Œä»è€Œé¿å…æƒŠç¾¤æ•ˆåº”å’Œä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-17">å…­ã€TryLockæ–¹æ³•</h2>
<ul>
<li>æ£€æŸ¥é”çš„çŠ¶æ€ï¼Œå¦‚æœå·²é”å®šæˆ–å¤„äºé¥¥é¥¿æ¨¡å¼ï¼Œåˆ™è¿”å›falseã€‚</li>
<li>å¦åˆ™ï¼Œå°è¯•é€šè¿‡CASè·å–é”ã€‚</li>
</ul>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>Goè¯­è¨€çš„<code>sync.Mutex</code>æ˜¯ä¸€ä¸ªå·¥ç¨‹å®è·µçš„å…¸èŒƒï¼Œå®ƒé€šè¿‡ç²¾å·§çš„è®¾è®¡åœ¨æ€§èƒ½ã€å…¬å¹³æ€§å’Œå¤æ‚åº¦ä¹‹é—´æ‰¾åˆ°äº†æœ€ä½³å¹³è¡¡ç‚¹ï¼š</p>
<p><strong>è®¾è®¡æ™ºæ…§ä½“ç°åœ¨</strong>ï¼š</p>
<ul>
<li><strong>åˆ†å±‚ä¼˜åŒ–</strong>ï¼šå¿«é€Ÿè·¯å¾„ä¸æ…¢é€Ÿè·¯å¾„åˆ†ç¦»ï¼Œä¸ºæ— ç«äº‰åœºæ™¯æä¾›æè‡´æ€§èƒ½</li>
<li><strong>æ™ºèƒ½è‡ªé€‚åº”</strong>ï¼šæ ¹æ®è¿è¡Œæ—¶æƒ…å†µåœ¨æ­£å¸¸æ¨¡å¼ä¸é¥¥é¥¿æ¨¡å¼é—´åŠ¨æ€åˆ‡æ¢</li>
<li><strong>æ··åˆç­–ç•¥</strong>ï¼šç»“åˆè‡ªæ—‹ä¸é˜»å¡ï¼Œåœ¨çŸ­ç­‰å¾…ä¸é•¿ç­‰å¾…åœºæ™¯ä¸‹éƒ½èƒ½è¡¨ç°ä¼˜å¼‚</li>
<li><strong>çŠ¶æ€é©±åŠ¨</strong>ï¼šé€šè¿‡ä½æ“ä½œå®ç°ç´§å‡‘çš„çŠ¶æ€ç®¡ç†ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§</li>
</ul>
<p><strong>å·¥ç¨‹ä»·å€¼åœ¨äº</strong>ï¼š</p>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šå¯¹å¤–æä¾›ç®€æ´çš„<code>Lock()/Unlock()</code>æ¥å£</li>
<li><strong>è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šå†…éƒ¨è‡ªé€‚åº”å„ç§ç«äº‰å¼ºåº¦ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒä¼˜</li>
<li><strong>å¥å£®å¯é </strong>ï¼šä¸¥æ ¼çš„çŠ¶æ€æ£€æŸ¥ç¡®ä¿åœ¨å„ç§è¾¹ç•Œæƒ…å†µä¸‹æ­£ç¡®å·¥ä½œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7575152891955216384</link>    <guid>https://juejin.cn/post/7575152891955216384</guid>    <pubDate>2025-11-23T00:30:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955216384" data-draft-id="7575112613777571874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ"/> <meta itemprop="keywords" content="é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-11-23T00:30:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Webå¤©æ¢¯ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/2825061103052843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2825061103052843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Webå¤©æ¢¯ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T00:30:40.000Z" title="Sun Nov 23 2025 00:30:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†7ä¸­åŸºæœ¬æ•°æ®ç±»å‹çš„å‘ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥æ¢ç©¶ä¸‹è¿™äº›å‘èƒŒåçš„é‚£äº›äº‹ï¼ŒçŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‘1:éšå¼ç±»å‹è½¬æ¢ï¼ˆå°è½¬å¤§ï¼‰çš„æ„å¤–</h2>
<p>å°èŒƒå›´å‘å¤§èŒƒå›´è½¬æ¢æ—¶ï¼Œå¯èƒ½å› ä¸­é—´è®¡ç®—æº¢å‡ºå¯¼è‡´ç»“æœé”™è¯¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-built_in">int</span> a1 = Integer.MAX_VALUE; <span class="hljs-comment">// 2147483647</span>
 <span class="hljs-built_in">int</span> b1 = a1 + <span class="hljs-number">1</span>; 
 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"b1="</span>+b1);<span class="hljs-comment">// æº¢å‡ºå˜ä¸º b1=-2147483648ï¼ˆæ•´æ•°æº¢å‡ºå›ç»•ï¼‰</span>
 <span class="hljs-built_in">long</span> c1 = b1; 
 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"c1="</span>+c1);<span class="hljs-comment">// ç»“æœä¸º c1=-2147483648ï¼ˆé”™è¯¯ï¼Œå›  b å·²æº¢å‡ºï¼‰</span>
</code></pre>
<p>æˆ‘é—¨æ¥æ¢ç©¶ä¸‹<code>b1</code>ä¸ºä»€ä¹ˆç­‰äº<code>-2147483648</code>:</p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†</strong>ï¼š</p>
<p>é¦–é€‰Â <code>int</code>Â æ˜¯Â <strong>32ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰ ä½æœ‰ç¬¦å·æ•´æ•°</strong>ï¼Œé‡‡ç”¨Â äºŒè¿›åˆ¶è¡¥ç æ¥è¡¨ç¤ºï¼Œæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œ0ä»£è¡¨éè´Ÿæ•°ï¼ˆ0å’Œè¯ä¹¦ï¼‰ï¼Œ1ä»£è¡¨è´Ÿæ•°ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1089adb0b7ce4addacc149b7e2666727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2Vi5aSp5qKv5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764462640&amp;x-signature=onU1zSdhbDrEU9i2RHcK9ghcQI4%3D" alt="image.png" loading="lazy"/></p>
<p><code>æœ€å°å€¼ï¼š</code>-2^31 = -2147483648<code>ï¼Œæœ€å¤§å€¼ï¼š</code>2^31 - 1 = 2147483647`</p>
<p><strong>2ã€äºŒè¿›åˆ¶è¡¨ç¤º</strong>ï¼š</p>
<p><code>Integer.MAX_VALUE = 2147483647</code> çš„äºŒè¿›åˆ¶æ˜¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111</span>
</code></pre>
<p>åŠ  1 åå˜æˆï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬æ¢ä¸º10è¿›åˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">=-1*2^31+0*2^30+0*2^29+...+0*2^<span class="hljs-attr">0</span> 
=-1*2^<span class="hljs-attr">31</span>
=-2^<span class="hljs-attr">31</span>
=-2147483648
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼šJava çš„ int ä½¿ç”¨ 32 ä½äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºï¼Œå½“ <code>2147483647 + 1</code> è¶…å‡ºæœ€å¤§å€¼æ—¶ï¼ŒäºŒè¿›åˆ¶è¿›ä½ä½¿ç¬¦å·ä½å˜ä¸º 1ï¼Œç»“æœè¢«è§£é‡Šä¸ºè¡¥ç ä¸‹çš„æœ€å°è´Ÿæ•° <code>-2147483648</code>ï¼Œå³å‘ç”Ÿâ€œæ•´æ•°æº¢å‡ºå›ç»•â€</p>
<h2 data-id="heading-1">äºŒã€å‘2:æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆå¤§è½¬å°ï¼‰çš„ç²¾åº¦ä¸¢å¤±</h2>
<p>å¤§èŒƒå›´ç±»å‹å¼ºåˆ¶è½¬ä¸ºå°èŒƒå›´ç±»å‹æ—¶ï¼Œç›´æ¥ä¸¢å¼ƒé«˜ä½å­—èŠ‚ï¼Œå¯¼è‡´æ•°æ®å¤±çœŸã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">long</span> a2 = <span class="hljs-number">2147483648L</span>; <span class="hljs-comment">// è¶…å‡º int æœ€å¤§å€¼</span>
<span class="hljs-built_in">int</span> b2 = (<span class="hljs-built_in">int</span>)a2;
System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"b2="</span>+b2);<span class="hljs-comment">// ç»“æœä¸º -2147483648ï¼ˆé«˜ä½ä¸¢å¤±ï¼Œæº¢å‡ºå›ç»•ï¼‰</span>
</code></pre>
<p><strong>1ã€äºŒè¿›åˆ¶è¡¨ç¤ºï¼š</strong></p>
<p>èƒŒæ™¯çŸ¥è¯†å‚è€ƒå‘1ï¼Œlongä¸º8å­—èŠ‚ï¼Œ<code>2147483648L</code>åœ¨äºŒè¿›åˆ¶ä¸­è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>2ã€å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</strong></p>
<p>longè½¬æ¢ä¸ºintæ—¶ï¼Œé«˜ä½æˆªæ–­ä¸¢å¼ƒå˜ä¸ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬æ¢ä¸ºåè¿›åˆ¶ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">=-1*2^31+0*2^30+0*2^29+...+0*2^<span class="hljs-attr">0</span> 
=-1*2^<span class="hljs-attr">31</span>
=-2^<span class="hljs-attr">31</span>
=-2147483648
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€å‘3:æ•´æ•°è¿ç®—æº¢å‡º</h2>
<p><strong>å‘</strong>ï¼š<code>int</code>/<code>long</code>Â è¿ç®—ç»“æœè¶…å‡ºèŒƒå›´æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æŒ‰ â€œæ¨¡ 2^nâ€ å›ç»•ï¼ˆè´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">int <span class="hljs-attr">a3</span> = <span class="hljs-number">1100000000</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">b3</span> = <span class="hljs-number">1100000000</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">c3</span> = a3 + b3<span class="hljs-comment">;</span>
System.out.println("<span class="hljs-attr">c3</span>=<span class="hljs-string">"+c3);// ç»“æœä¸º c3=-2094967296ï¼ˆæº¢å‡ºï¼‰
</span></code></pre>
<p><strong>1ã€è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼š</strong></p>
<p>åè¿›åˆ¶<code>1100000000</code>è½¬ä¸ºäºŒè¿›åˆ¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>

<pre><code class="hljs language-yaml" lang="yaml">  <span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
<span class="hljs-string">+</span>
  <span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
<span class="hljs-string">=</span> 
  <span class="hljs-number">1000 </span><span class="hljs-number">0011 </span><span class="hljs-number">0010 </span><span class="hljs-number">0001 </span><span class="hljs-number">0101 </span><span class="hljs-number">0110 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬ä¸º10è¿›åˆ¶</strong></p>
<p>å¥—ç”¨è®¡ç®—å…¬å¼<code>1000 0011 0010 0001 0101 0110 0000 0000</code> è½¬æ¢ä¸º10è¿›åˆ¶ä¸º-2094967296</p>
<h2 data-id="heading-3">å››ã€å‘4ï¼šæµ®ç‚¹æ•°ç›¸åŠ ï¼Œç»“æœä¸å¯é¢„æµ‹ï¼</h2>
<pre><code class="hljs language-ini" lang="ini">double <span class="hljs-attr">a4</span> = <span class="hljs-number">0.1</span><span class="hljs-comment">;</span>
double <span class="hljs-attr">b4</span> = <span class="hljs-number">0.2</span><span class="hljs-comment">;</span>
System.out.println(a4 + <span class="hljs-attr">b4</span> == <span class="hljs-number">0.3</span>)<span class="hljs-comment">; // falseï¼</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šä¸ºä»€ä¹ˆ0.1å’Œ0.2åœ¨äºŒè¿›åˆ¶ä¸­æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼ˆç±»ä¼¼ 1/3 åœ¨åè¿›åˆ¶ä¸­æ˜¯ 0.333...ï¼‰ï¼Ÿ</p>
<p><strong>å…·ä½“åˆ†æï¼š</strong></p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†ï¼š</strong></p>
<p>10è¿›åˆ¶å°æ•°ä½è½¬2è¿›åˆ¶è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å°†å°æ•°éƒ¨åˆ†ä¸æ–­ Ã— 2ï¼›</li>
<li>è‹¥ç»“æœ â‰¥ 1 â†’ è®°Â <strong>1</strong>ï¼Œå–å°æ•°éƒ¨åˆ†ç»§ç»­ï¼›</li>
<li>è‹¥ç»“æœ &lt; 1 â†’ è®°Â <strong>0</strong>ï¼Œç”¨æ•´ä¸ªç»“æœç»§ç»­ï¼›</li>
<li>é‡å¤ç›´åˆ°å°æ•°éƒ¨åˆ†ä¸º 0ï¼ˆæœ‰é™ï¼‰æˆ–å‡ºç°å¾ªç¯ï¼ˆæ— é™ï¼‰ã€‚</li>
</ul>
<p><strong>2ã€è®¡ç®—è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">0.1 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.2</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.2 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.4</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.4 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.8</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.8 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">1.6</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">1</span>ï¼Œå°æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0.6</span>
0.6 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">1.2</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">1</span>ï¼Œå°æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0.2</span>
0.2 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.4</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span> ï¼ˆå¼€å§‹é‡å¤ï¼‰
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä»ç¬¬äºŒæ­¥è¿›å…¥å¾ªç¯ï¼š0.2 â†’ 0.4 â†’ 0.8 â†’ 0.6 â†’ 0.2...</p>
<p>å› æ­¤0.1çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0.0</span> <span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011</span><span class="hljs-string">...ï¼ˆæ— é™ä¸ª0011ï¼‰</span>
</code></pre>
<h2 data-id="heading-4">äº”ã€å‘5ï¼šåŒ…è£…ç±»ä¸º<code>null</code>Â æ‹†ç®±ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼</h2>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">x</span> = null<span class="hljs-comment">;</span>
int <span class="hljs-attr">y</span> = x<span class="hljs-comment">; //  NullPointerException!</span>
</code></pre>
<p>åŸå› åˆ†æï¼š</p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†ï¼š</strong></p>
<p>javaè‡ªåŠ¨è£…æ‹†ç®±ç¼–è¯‘å™¨å¤„ç†ï¼šä»¥intä¸ºä¾‹ï¼Œè£…ç®±ä¼šé»˜è®¤è°ƒç”¨<code>valueOf</code>æ–¹æ³•,æ‹†ç®±ä¼šè°ƒç”¨x.intValue()æ–¹æ³•ï¼Œå…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹è£…æ‹†ç®±ç±»ä¼¼ã€‚</p>
<p><strong>2ã€åŸå› åˆ†æ</strong></p>
<p>å›åˆ°é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">x</span> = null<span class="hljs-comment">;</span>

int <span class="hljs-attr">y</span> = x<span class="hljs-comment">;</span>
ç›¸å½“äº
int <span class="hljs-attr">y</span>=x.intValue()<span class="hljs-comment">;</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›¸å½“äºå¯¹<code>null</code>å€¼è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼Œå½“ç„¶æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 data-id="heading-5">å…­ã€å‘6ï¼š<code>==</code>Â æ¯”è¾ƒåŒ…è£…ç±»ï¼Œç»“æœä¸å¯é¢„æµ‹ï¼</h2>
<p>ä¸Šç¯‡æ–‡ç« å·²ç»è®²çš„æ¯”è¾ƒè¯¦ç»†ï¼Œæˆ‘ä»¬å†æ¥å›é¡¾ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">a6</span> = <span class="hljs-number">127</span><span class="hljs-comment">;</span>
Integer <span class="hljs-attr">b6</span> = <span class="hljs-number">127</span><span class="hljs-comment">;</span>
System.out.println(<span class="hljs-attr">a6</span> == b6)<span class="hljs-comment">; // true</span>

Integer <span class="hljs-attr">a66</span> = <span class="hljs-number">128</span><span class="hljs-comment">;</span>
Integer <span class="hljs-attr">b66</span> = <span class="hljs-number">128</span><span class="hljs-comment">;</span>
System.out.println(<span class="hljs-attr">a66</span> == b66)<span class="hljs-comment">; // false</span>
</code></pre>
<p><strong>åŸå› åˆ†æ</strong>ï¼šJava å¯¹ <code>-128 ~ 127</code> çš„ <code>Integer</code> åšäº†<strong>ç¼“å­˜</strong>ã€‚ç¼–è¯‘å™¨ä¼šåœ¨<strong>åŸºæœ¬ç±»å‹</strong>è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ã€‚</p>
<ul>
<li>ç¼“å­˜æ± èŒƒå›´å†…ä»ç¼“å­˜ä¸­å–ï¼Œè¿”å›çš„æ˜¯ç›¸åŒå¯¹è±¡ã€‚</li>
<li>è¶…å‡ºèŒƒå›´åˆ™æ¯æ¬¡æ–°å»ºå¯¹è±¡ï¼Œè¿”å›çš„æ˜¯ä¸åŒå¯¹è±¡ã€‚</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> Integer <span class="hljs-title">valueOf</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> </span>{
    <span class="hljs-comment">//-128 ~ 127å‡å–è‡ªIntegerCacheï¼Œå³åŒä¸€ä¸ªå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];

    <span class="hljs-comment">//è¶…å‡ºèŒƒå›´ï¼Œnewä¸€ä¸ªæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Integer</span>(i);
}
</code></pre>
<h2 data-id="heading-6">ä¸ƒã€å‘7:å¸ƒå°”ç±»å‹çš„éšå¼è½¬æ¢è¯¯åŒº</h2>
<p>Java ä¸å…è®¸Â <code>boolean</code>Â ä¸å…¶ä»–åŸºæœ¬ç±»å‹ï¼ˆå¦‚Â <code>int</code>ï¼‰ç›¸äº’è½¬æ¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">boolean <span class="hljs-attr">a7</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">b7</span> = (int)a7<span class="hljs-comment">; // ç¼–è¯‘æŠ¥é”™ï¼ˆæ— æ³•å¼ºåˆ¶è½¬æ¢ï¼‰</span>
</code></pre>
<p>è¿™æ›´å¤šçš„æ˜¯è¯­è¨€è®¾è®¡ç†å¿µä¸Šçš„é—®é¢˜ï¼Œæˆ‘å°±ä¸å»ç­é—¨å¼„æ–§äº†ã€‚</p>
<blockquote>
<p>è§‰å¾—å†™çš„ä¸é”™çš„å°ä¼™ä¼´ ï¼Œç‚¹ä¸ªå…³æ³¨ï¼Œæ›´æ–°ä¸è¿·è·¯</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€]]></title>    <link>https://juejin.cn/post/7575083657994551323</link>    <guid>https://juejin.cn/post/7575083657994551323</guid>    <pubDate>2025-11-23T01:36:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994551323" data-draft-id="7575102474639425587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T01:36:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T01:36:38.000Z" title="Sun Nov 23 2025 01:36:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>Protocol Buffers æ˜¯GRpcçš„åºåˆ—åŒ–å±‚ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µæºäºã€Œåè®®å®šä¹‰+äºŒè¿›åˆ¶å®¹å™¨ã€çš„é«˜æ•ˆæ•°æ®äº¤æ¢æ¨¡å¼ã€‚</p>
<p>é€šè¿‡é¢„å®šä¹‰æ•°æ®ç»“æ„ä½œä¸ºåè®®çº¦å®šï¼Œåºåˆ—åŒ–æ—¶å°†å­—æ®µåæ›¿æ¢ä¸ºæ•°å­—ç¼–å·ï¼Œç»“åˆäºŒè¿›åˆ¶ç¼–ç ã€Varintå‹ç¼©ã€çœç•¥é»˜è®¤å€¼ç­‰å¤šé‡ä¼˜åŒ–ï¼Œå®ç°è¿œè¶…JSON/XMLçš„ä¼ è¾“æ•ˆç‡ã€‚</p>
<p>è¿™ç§ç»“æ„åŒ–äºŒè¿›åˆ¶å®¹å™¨çš„æ€æƒ³åœ¨ç½‘ç»œåè®®ã€æ•°æ®åº“å­˜å‚¨ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»äº†Protobufçš„åŸç†ï¼ŒGRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„ï¼Œ ä»¥åŠvarintæŠ€æœ¯ã€‚</p>
<h3 data-id="heading-2">ç›®å½•</h3>
<ul>
<li><a href="#1-%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90protocol-buffers%E7%9A%84%E7%94%B1%E6%9D%A5" title="#1-%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90protocol-buffers%E7%9A%84%E7%94%B1%E6%9D%A5">1. åç§°è§£æï¼šProtocol Buffers çš„ç”±æ¥</a></li>
<li><a href="#2-%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8C%96%E6%9C%BA%E5%88%B6" title="#2-%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8C%96%E6%9C%BA%E5%88%B6">2. æ ¸å¿ƒä¼˜åŒ–æœºåˆ¶</a></li>
<li><a href="#3-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3" title="#3-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3">3. äºŒè¿›åˆ¶ç¼–ç è¯¦è§£</a></li>
<li><a href="#4-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AF%B9%E6%AF%94" title="#4-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AF%B9%E6%AF%94">4. ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</a></li>
<li><a href="#5-%E7%B1%BB%E4%BC%BC%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5" title="#5-%E7%B1%BB%E4%BC%BC%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5">5. ç±»ä¼¼æ¨¡å¼çš„æŠ€æœ¯å®è·µ</a></li>
<li><a href="#6-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E6%80%BB%E7%BB%93" title="#6-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E6%80%BB%E7%BB%93">6. è®¾è®¡å“²å­¦æ€»ç»“</a></li>
<li>é™„1 GRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„</li>
<li>é™„2 Varintå‹ç¼©</li>
</ul>
<h3 data-id="heading-3">1. åç§°è§£æï¼šProtocol Buffers çš„ç”±æ¥</h3>
<p>gRpcæ¡†æ¶çš„åºåˆ—åŒ–å·¥å…·æœ‰ä¸€ä¸ªåå­—ï¼Œå«åšprotobuf, åˆå« protocol bufferï¼Œ æˆ‘å¯¹è¿™ä¸ªåå­—ä¸€ç›´è§‰å¾—å¾ˆå¥‡æ€ªï¼Œå› æ­¤åœ¨è¿™é‡Œæ‹†è§£ä¸€ä¸‹ã€‚</p>
<p>Protobuffer å°±æ˜¯ Protocol Buffer çš„å¸¸ç”¨ç®€ç§°å’Œæ˜µç§°ã€‚</p>
<p>ç±»ä¼¼äºï¼š</p>
<p>JavaScript â†’ JS</p>
<p>HyperText Markup Language â†’ HTML</p>
<p>Portable Network Graphics â†’ PNG</p>
<h4 data-id="heading-4">1.1 Protocolï¼ˆåè®®ï¼‰çš„å«ä¹‰</h4>
<p>Protocol æŒ‡æ•°æ®äº¤æ¢çš„é¢„å…ˆçº¦å®šï¼Œä½“ç°åœ¨ <code>.proto</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„åŒ–æ•°æ®å¥‘çº¦ï¼š</p>
<pre><code class="hljs language-protobuf" lang="protobuf">message Person {
  string name = 1;    // å­—æ®µç¼–å·1
  int32 id = 2;       // å­—æ®µç¼–å·2
  string email = 3;   // å­—æ®µç¼–å·3
}
</code></pre>
<p>è¿™ç§å®šä¹‰æ˜ç¡®äº†æ•°æ®æ ¼å¼ã€å­—æ®µç±»å‹å’Œç¼–å·è§„åˆ™ï¼Œæ„æˆäº†é€šä¿¡åŒæ–¹å¿…é¡»éµå®ˆçš„åè®®è§„èŒƒã€‚</p>
<h4 data-id="heading-5">1.2 Bufferï¼ˆç¼“å†²åŒºï¼‰çš„å«ä¹‰</h4>
<p>Buffer å¹¶éä¼ ç»Ÿæ„ä¹‰çš„ä¸´æ—¶ç¼“å†²åŒºï¼Œè€Œæ˜¯æŒ‡<strong>åºåˆ—åŒ–åçš„ç»“æ„åŒ–äºŒè¿›åˆ¶æ•°æ®å®¹å™¨</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å­—èŠ‚åºåˆ—ï¼Œæ‰¿è½½ç€æŒ‰ç…§åè®®è§„èŒƒç¼–ç çš„å®Œæ•´æ•°æ®å•å…ƒã€‚</p>
<h3 data-id="heading-6">2. æ ¸å¿ƒä¼˜åŒ–æœºåˆ¶</h3>
<h4 data-id="heading-7">2.1 å­—æ®µç¼–å·æ›¿ä»£å­—æ®µå</h4>
<p>é€šè¿‡ç”¨æ•°å­—ç¼–å·æ›¿æ¢å­—ç¬¦ä¸²å­—æ®µåï¼Œå¤§å¹…å‡å°‘æ•°æ®ä¼ è¾“é‡ï¼š</p>
<ul>
<li>å­—æ®µå <code>"name"</code>ï¼ˆ4å­—èŠ‚ï¼‰â†’ ç¼–å· <code>1</code>ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰</li>
<li>å­—æ®µå <code>"email"</code>ï¼ˆ5å­—èŠ‚ï¼‰â†’ ç¼–å· <code>3</code>ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰</li>
</ul>
<p>nameå’Œemailæœ¬èº«ï¼Œå› ä¸ºprotoå®šä¹‰å·²ç»æ˜¯å…¨å±€çŸ¥æ™“è¿™ä¸ªç»“æ„çš„å®šä¹‰ï¼Œæ‰€ä»¥</p>
<h4 data-id="heading-8">2.2 äºŒè¿›åˆ¶ç¼–ç ä¼˜åŠ¿</h4>
<ul>
<li>æ— å†—ä½™å­—ç¬¦ï¼šçœç•¥å¼•å·ã€æ‹¬å·ã€é€—å·ç­‰æ ¼å¼ç¬¦å·</li>
<li>ç´§å‡‘å¸ƒå±€ï¼šæ•°æ®è¿ç»­æ’åˆ—ï¼Œæ— å¡«å……å¯¹é½å¼€é”€</li>
<li>ç±»å‹é›†æˆï¼šå­—æ®µç¼–å·ä¸ç±»å‹ä¿¡æ¯åˆå¹¶ç¼–ç </li>
</ul>
<h4 data-id="heading-9">2.3 Varint å¯å˜é•¿åº¦æ•´æ•°</h4>
<p>å°æ•°å€¼å ç”¨æ›´å°‘å­—èŠ‚ï¼š</p>
<ul>
<li>å€¼ <code>1</code> â†’ <code>01</code>ï¼ˆ1å­—èŠ‚ï¼‰</li>
<li>å€¼ <code>300</code> â†’ <code>AC 02</code>ï¼ˆ2å­—èŠ‚ï¼‰</li>
<li>è€Œéå›ºå®š4å­—èŠ‚å­˜å‚¨</li>
</ul>
<h4 data-id="heading-10">2.4 é»˜è®¤å€¼çœç•¥</h4>
<p>å¦‚æœå­—æ®µå€¼ä¸ºç±»å‹é»˜è®¤å€¼ï¼ˆ0ã€falseã€ç©ºå­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œç›´æ¥ä¸ä¼ è¾“è¯¥å­—æ®µã€‚</p>
<h3 data-id="heading-11">3. äºŒè¿›åˆ¶ç¼–ç è¯¦è§£</h3>
<h4 data-id="heading-12">3.1 å®é™…ç¼–ç ç¤ºä¾‹</h4>
<p>å¯¹äºæ•°æ®ï¼š<code>{name: "Alice", id: 123}</code></p>
<p>Protocol Buffers ç¼–ç ç»“æœï¼š</p>
<pre><code class="hljs">0A 05 41 6C 69 63 65 10 7B
</code></pre>
<p>9ä¸ªå­—èŠ‚ã€‚</p>
<h4 data-id="heading-13">3.2 ç¼–ç æ‹†è§£åˆ†æ</h4>
<p><strong>nameå­—æ®µéƒ¨åˆ†</strong> <code>0A 05 41 6C 69 63 65</code>ï¼š</p>
<ul>
<li><code>0A</code> = <code>00001010</code>ï¼šå‰5ä½<code>00001</code>ï¼ˆå­—æ®µç¼–å·1ï¼‰ï¼Œå3ä½<code>010</code>ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ï¼Œ</li>
<li><code>05</code>ï¼šå­—ç¬¦ä¸²é•¿åº¦5å­—èŠ‚</li>
<li><code>41 6C 69 63 65</code>ï¼š"Alice"çš„ASCIIç </li>
</ul>
<p><strong>idå­—æ®µéƒ¨åˆ†</strong> <code>10 7B</code>ï¼š</p>
<ul>
<li><code>10</code> = <code>00010000</code>ï¼šå3ä½<code>000</code>ï¼ˆVarintç±»å‹ï¼‰ï¼Œå‰5ä½<code>00010</code>ï¼ˆå­—æ®µç¼–å·2ï¼‰</li>
<li><code>7B</code>ï¼šåè¿›åˆ¶123çš„Varintç¼–ç </li>
</ul>
<h4 data-id="heading-14">3.3 æ•ˆç‡å¯¹æ¯”</h4>
<p>ç›¸åŒæ•°æ®çš„JSONéœ€è¦çº¦40å­—èŠ‚ï¼Œè€ŒProtocol Buffersä»…éœ€9å­—èŠ‚ï¼Œå‹ç¼©æ¯”è¶…è¿‡4:1ã€‚</p>
<h3 data-id="heading-15">4. ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>JSON/XML</th><th>Protocol Buffers</th></tr></thead><tbody><tr><td>æ•°æ®æ ¼å¼</td><td>æ–‡æœ¬</td><td>äºŒè¿›åˆ¶</td></tr><tr><td>å­—æ®µä¼ è¾“</td><td>å®Œæ•´å­—æ®µå</td><td>æ•°å­—ç¼–å·</td></tr><tr><td>å…ƒæ•°æ®</td><td>å¼•å·ã€æ‹¬å·ç­‰</td><td>æ— </td></tr><tr><td>åºåˆ—åŒ–å¤§å°</td><td>å¤§</td><td>å°</td></tr><tr><td>è§£ææ€§èƒ½</td><td>æ…¢</td><td>å¿«</td></tr><tr><td>å¯è¯»æ€§</td><td>å¥½</td><td>å·®</td></tr></tbody></table>
<h3 data-id="heading-16">5. ç±»ä¼¼æ¨¡å¼çš„æŠ€æœ¯å®è·µ</h3>
<h4 data-id="heading-17">5.1 Apache Thrift</h4>
<p>å‡ ä¹ç›¸åŒçš„è®¾è®¡ç†å¿µï¼š</p>
<pre><code class="hljs language-thrift" lang="thrift">struct Person {
  1: string name,
  2: i32 id,
  3: string email
}
</code></pre>
<h4 data-id="heading-18">5.2 ç½‘ç»œåè®®è®¾è®¡</h4>
<p>TCP/IPåŒ…å¤´ã€HTTP/2å¸§ç»“æ„ç­‰éƒ½é‡‡ç”¨ç±»ä¼¼çš„ã€Œå›ºå®šæ ¼å¼äºŒè¿›åˆ¶å®¹å™¨ã€è®¾è®¡ã€‚</p>
<h4 data-id="heading-19">5.3 æ•°æ®åº“å­˜å‚¨æ ¼å¼</h4>
<p>MySQLè¡Œæ ¼å¼ã€åˆ—å¼å­˜å‚¨ç­‰éƒ½ä½¿ç”¨é¢„å®šä¹‰ç»“æ„+äºŒè¿›åˆ¶ç¼–ç çš„æ¨¡å¼ã€‚</p>
<h4 data-id="heading-20">5.4 å¤šåª’ä½“å®¹å™¨</h4>
<p>MP4ã€AVIç­‰åª’ä½“æ ¼å¼ä½¿ç”¨ç±»ä¼¼çš„box/chunkç»“æ„æ‰¿è½½ç¼–ç æ•°æ®ã€‚</p>
<h3 data-id="heading-21">6. è®¾è®¡å“²å­¦æ€»ç»“</h3>
<p>Protocol Buffers çš„æˆåŠŸæºäºä»¥ä¸‹å‡ ä¸ªå…³é”®è®¾è®¡ç†å¿µï¼š</p>
<ol>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šåè®®å®šä¹‰ä¸å…·ä½“å®ç°è§£è€¦</li>
<li><strong>æ•ˆç‡ä¼˜å…ˆ</strong>ï¼šä»ç¼–ç å±‚åˆ°ä¼ è¾“å±‚çš„å…¨æ–¹ä½ä¼˜åŒ–</li>
<li><strong>å…¼å®¹æ€§è®¾è®¡</strong>ï¼šé€šè¿‡å­—æ®µç¼–å·æœºåˆ¶æ”¯æŒå‘å‰å‘åå…¼å®¹</li>
<li><strong>é€šç”¨æ€§</strong>ï¼šè·¨è¯­è¨€ã€è·¨å¹³å°çš„ç»Ÿä¸€è§£å†³æ–¹æ¡ˆ</li>
<li><strong>å·¥å…·é“¾æ”¯æŒ</strong>ï¼šä»£ç ç”Ÿæˆã€éªŒè¯ç­‰å®Œæ•´ç”Ÿæ€</li>
</ol>
<p>è¿™ç§ã€Œåè®®å®šä¹‰+äºŒè¿›åˆ¶å®¹å™¨ã€çš„æ¨¡å¼ä¹‹æ‰€ä»¥åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å¹¿æ³›å­˜åœ¨ï¼Œæ˜¯å› ä¸ºå®ƒå®Œç¾å¹³è¡¡äº†æ•ˆç‡ã€å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³æŠ€æœ¯ã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šProtocol Buffers ä¸æ˜¯å‘æ˜äº†æ–°æ¦‚å¿µï¼Œè€Œæ˜¯å°†ä¹…ç»è€ƒéªŒçš„äºŒè¿›åˆ¶æ•°æ®äº¤æ¢æ¨¡å¼æ ‡å‡†åŒ–ã€å·¥å…·åŒ–ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéæ•°æ®ä¼ è¾“ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-22">é™„1 GRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„</h2>
<p>protobufferæœ¬èº«å¯¹å­—æ®µåè¿›è¡Œäº†å‹ç¼©ï¼Œå®ƒæ€ä¹ˆçŸ¥é“ä¸€ä¸ªç»“æ„ä½“æ˜¯è¿™ä¸ªç»“æ„ä½“ï¼Ÿ</p>
<p>Protobuf åœ¨ç¼–ç æ—¶<strong>å»æ‰äº†å­—æ®µå</strong>ï¼ˆæ¯”å¦‚ <code>username</code>, <code>user_id</code>ï¼‰ï¼Œè¿™ç¡®å®æå¤§åœ°å‹ç¼©äº†æ•°æ®ã€‚ä½†å®ƒä¹‹æ‰€ä»¥èƒ½â€œçŸ¥é“â€ä¸€ä¸ªç»“æ„ä½“æ˜¯å“ªä¸ªç»“æ„ä½“ï¼Œå…³é”®åœ¨äºå®ƒä¾èµ–çš„æ˜¯ä¸€å¥—<strong>é¢„å…ˆä¸¥æ ¼å®šä¹‰å¥½çš„â€œå¥‘çº¦â€</strong>â€”â€”ä¹Ÿå°±æ˜¯ <code>.proto</code> æ–‡ä»¶ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<h4 data-id="heading-23">1. å¥‘çº¦å…ˆè¡Œï¼š.proto æ–‡ä»¶æ˜¯æ ¸å¿ƒ</h4>
<p>æ‰€æœ‰ä½¿ç”¨ Protobuf çš„é€šä¿¡åŒæ–¹ï¼ˆå‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼‰<strong>å¿…é¡»</strong>åœ¨é€šä¿¡ä¹‹å‰å°±æ‹¥æœ‰<strong>å®Œå…¨ç›¸åŒ</strong>çš„ <code>.proto</code> æ–‡ä»¶å®šä¹‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-protobuf" lang="protobuf">// user.proto
message User {
  string user_name = 1;
  int64 favorite_number = 2;
}
</code></pre>
<p>è¿™ä¸ª <code>.proto</code> æ–‡ä»¶å°±æ˜¯â€œå¥‘çº¦â€ã€‚å®ƒè§„å®šäº†ï¼š</p>
<ul>
<li>æœ‰ä¸€ä¸ªå«åš <code>User</code> çš„æ¶ˆæ¯ç±»å‹ã€‚</li>
<li>è¿™ä¸ªç±»å‹æœ‰ä¸¤ä¸ªå­—æ®µã€‚</li>
<li>æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ª<strong>å”¯ä¸€çš„æ•°å­—æ ‡ç­¾</strong>ï¼ˆ1 å’Œ 2ï¼‰å’Œä¸€ä¸ª<strong>æ•°æ®ç±»å‹</strong>ï¼ˆ<code>string</code>, <code>int64</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-24">2. ç¼–ç ï¼šç”¨æ•°å­—æ ‡ç­¾ä»£æ›¿å­—æ®µå</h4>
<p>å½“ä½ çš„ç¨‹åºè¦åºåˆ—åŒ–ä¸€ä¸ª <code>User</code> å¯¹è±¡æ—¶ï¼ˆæ¯”å¦‚ <code>user_name="Alice"</code>, <code>favorite_number=42</code>ï¼‰ï¼ŒProtobuf ç¼–ç å™¨ä¸ä¼šæŠŠå­—ç¬¦ä¸² <code>"user_name"</code> å’Œ <code>"favorite_number"</code> å†™å…¥äºŒè¿›åˆ¶æµã€‚</p>
<p>å®ƒå†™å…¥çš„æ˜¯ï¼š</p>
<ul>
<li><strong>å­—æ®µ1</strong>ï¼šæ ‡ç­¾ <code>1</code> + å€¼ <code>"Alice"</code></li>
<li><strong>å­—æ®µ2</strong>ï¼šæ ‡ç­¾ <code>2</code> + å€¼ <code>42</code></li>
</ul>
<p>è¿™äº›æ ‡ç­¾ï¼ˆ1, 2ï¼‰å°±æ˜¯äºŒè¿›åˆ¶æ•°æ®ä¸­<strong>å”¯ä¸€æ ‡è¯†å­—æ®µçš„å¯†é’¥</strong>ã€‚</p>
<h4 data-id="heading-25">3. è§£ç ï¼šæŒ‰å›¾ç´¢éª¥</h4>
<p>æ¥æ”¶æ–¹æ‹¿åˆ°äºŒè¿›åˆ¶æ•°æ®åï¼Œç”¨è‡ªå·±çš„ <code>User</code> æ¶ˆæ¯å®šä¹‰ï¼ˆå³åŒä¸€ä¸ª <code>.proto</code> æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆçš„ä»£ç ï¼‰æ¥è§£ç ã€‚</p>
<p>è§£ç è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>è¯»å–ä¸€ä¸ªå­—æ®µçš„æ ‡ç­¾ï¼ˆæ¯”å¦‚ <code>1</code>ï¼‰å’Œå®ƒçš„æ•°æ®ç±»å‹ã€‚</li>
<li>åœ¨æœ¬åœ°çš„ <code>User</code> æ¶ˆæ¯å®šä¹‰ä¸­æŸ¥æ‰¾ï¼šâ€œå“ªä¸ªå­—æ®µçš„æ ‡ç­¾æ˜¯ <code>1</code>ï¼Ÿâ€</li>
<li>æ‰¾åˆ°äº†ï¼æ ‡ç­¾ <code>1</code> å¯¹åº”ç€ <code>user_name</code> å­—æ®µï¼Œç±»å‹æ˜¯ <code>string</code>ã€‚</li>
<li>äºæ˜¯ï¼Œå®ƒæ­£ç¡®åœ°åˆ›å»ºä¸€ä¸ª <code>User</code> å¯¹è±¡ï¼Œå¹¶å°†è§£ç å‡ºçš„å­—ç¬¦ä¸² <code>"Alice"</code> å¡«å…¥è¯¥å¯¹è±¡çš„ <code>user_name</code> å±æ€§ã€‚</li>
<li>ç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªå­—æ®µï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚</li>
</ol>
<h4 data-id="heading-26">å…³é”®ç‰¹æ€§ï¼šçµæ´»æ€§ã€å…¼å®¹æ€§ä¸æœªçŸ¥å­—æ®µ</h4>
<p>è¿™ç§åŸºäºæ•°å­—æ ‡ç­¾çš„æœºåˆ¶å¸¦æ¥äº†å·¨å¤§çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>å‘å/å‘å‰å…¼å®¹</strong>ï¼šå¦‚æœæ¥æ”¶æ–¹çš„ <code>.proto</code> ç‰ˆæœ¬æ¯”è¾ƒè€ï¼Œç¼ºå°‘å‘é€æ–¹æ•°æ®ä¸­çš„æŸäº›æ–°å­—æ®µï¼ˆæ¯”å¦‚å‘é€æ–¹ç”¨äº† <code>email = 3;</code>ï¼‰ï¼Œæ¥æ”¶æœºåœ¨è§£ç æ—¶çœ‹åˆ°ä¸è®¤è¯†çš„æ ‡ç­¾ï¼ˆå¦‚ <code>3</code>ï¼‰ï¼Œå®ƒä¼šç®€å•åœ°<strong>å¿½ç•¥è¿™ä¸ªå­—æ®µ</strong>ï¼Œè€Œä¸ä¼šæŠ¥é”™ã€‚è¿™å°±æ˜¯å‘å‰å…¼å®¹ã€‚åŒæ ·ï¼Œè€ç‰ˆæœ¬çš„å®¢æˆ·ç«¯å‘é€ç¼ºå°‘æ–°å­—æ®µçš„æ•°æ®ç»™æ–°ç‰ˆæœ¬çš„æœåŠ¡ç«¯ï¼Œæ–°æœåŠ¡ç«¯ä¹Ÿèƒ½æ­£å¸¸å¤„ç†ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç»“æ„ä½“ç±»å‹çš„è¯†åˆ«</strong>ï¼šProtobuf æ¶ˆæ¯æœ¬èº«æ˜¯<strong>è‡ªæè¿°</strong>çš„ï¼Œä½†åªæè¿°åˆ°å­—æ®µçº§åˆ«ï¼Œä¸æè¿°æ¶ˆæ¯ç±»å‹ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªæ›´æ ¹æœ¬çš„é—®é¢˜æ˜¯ï¼š<strong>æ¥æ”¶æ–¹å¦‚ä½•çŸ¥é“è¿™æ®µäºŒè¿›åˆ¶æ•°æ®åº”è¯¥è¢«è§£ç æˆ <code>User</code> æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯ <code>Product</code> æ¶ˆæ¯ï¼Ÿ</strong></p>
<p><strong>ç­”æ¡ˆåœ¨äºä¸Šå±‚çš„åº”ç”¨ç¨‹åºåè®®ã€‚</strong> Protobuf é€šå¸¸è¢«ç”¨ä½œæ›´é«˜çº§åˆ«åè®®çš„æ•°æ®è½½ä½“ã€‚è¯†åˆ«æ¶ˆæ¯ç±»å‹çš„æ–¹æ³•é€šå¸¸æœ‰ï¼š</p>
<ul>
<li><strong>åŒ…è£…åœ¨ä¸€ä¸ªå¤–å±‚æ¶ˆæ¯ä¸­</strong>ï¼šå®šä¹‰ä¸€ä¸ªé¡¶çº§çš„ã€åŒ…å«æ‰€æœ‰å¯èƒ½æ¶ˆæ¯ç±»å‹çš„åŒ…è£…æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-protobuf" lang="protobuf">message TopLevelMessage {
  oneof message_type {
    User user = 1;
    Product product = 2;
    // ...
  }
}
</code></pre>
<p>è§£ç æ—¶å…ˆè§£ç  <code>TopLevelMessage</code>ï¼Œæ ¹æ®å…¶ä¸­çš„ <code>oneof</code> å­—æ®µåˆ¤æ–­å…·ä½“ç±»å‹ã€‚</p>
<ul>
<li><strong>åœ¨åè®®å¤´ä¸­æŒ‡å®š</strong>ï¼šæ¯”å¦‚ï¼Œåœ¨ gRPC ä¸­ï¼ŒHTTP è¯·æ±‚è·¯å¾„å°±éšå«äº†è¦è°ƒç”¨çš„æœåŠ¡å’Œæ–¹æ³•ï¼Œä»è€Œç¡®å®šäº†æ¶ˆæ¯ç±»å‹ã€‚</li>
<li><strong>é¢„å…ˆçº¦å®š</strong>ï¼šåœ¨ç®€å•çš„ç‚¹å¯¹ç‚¹é€šä¿¡ä¸­ï¼ŒåŒæ–¹å¯èƒ½å°±çº¦å®šå¥½â€œè¿™ä¸ªSocketè¿æ¥ä¸Šåªå‘é€ <code>User</code> æ¶ˆæ¯â€ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">æ€»ç»“</h4>
<p>Protobuf èƒ½çŸ¥é“ä¸€ä¸ªç»“æ„ä½“æ˜¯å“ªä¸ªç»“æ„ä½“ï¼Œ<strong>å¹¶ä¸æ˜¯é äºŒè¿›åˆ¶æ•°æ®æœ¬èº«æºå¸¦äº†ç±»å‹å</strong>ï¼Œè€Œæ˜¯ä¾èµ–äºï¼š</p>
<ol>
<li><strong>é€šä¿¡åŒæ–¹å…±äº«çš„ <code>.proto</code> å¥‘çº¦</strong>ï¼šè¿™æ˜¯è§£ç çš„â€œå¯†ç æœ¬â€ã€‚</li>
<li><strong>å”¯ä¸€çš„æ•°å­—æ ‡ç­¾</strong>ï¼šè¿™æ˜¯äºŒè¿›åˆ¶æµä¸­è¯†åˆ«å­—æ®µçš„â€œé’¥åŒ™â€ã€‚</li>
<li><strong>ä¸Šå±‚çš„åº”ç”¨ç¨‹åºåè®®</strong>ï¼šè¿™è´Ÿè´£å‘Šè¯‰æ¥æ”¶æ–¹â€œè¯·ä½¿ç”¨ <code>User.proto</code> è¿™ä¸ªå¯†ç æœ¬æ¥è§£ç æ¥ä¸‹æ¥çš„æ•°æ®â€ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡å®ç°äº†æ•°æ®çš„é«˜åº¦å‹ç¼©ï¼ŒåŒæ—¶æä¾›äº†å‡ºè‰²çš„ç‰ˆæœ¬å…¼å®¹æ€§ã€‚</p>
<h2 data-id="heading-28">é™„2 Varint å‹ç¼©ï¼šå°æ•°å­—å ç”¨æ›´å°‘å­—èŠ‚çš„ç¼–ç è‰ºæœ¯</h2>
<p>åœ¨Proto Bufferä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡ Varint, è¿™é‡Œæˆ‘åšä¸€ä¸ªè¡¥å……ã€‚</p>
<h3 data-id="heading-29">ä»€ä¹ˆæ˜¯ Varintï¼Ÿ</h3>
<p><strong>Varint</strong>ï¼ˆVariable-length Integerï¼Œå¯å˜é•¿åº¦æ•´æ•°ï¼‰æ˜¯ä¸€ç§æ™ºèƒ½çš„æ•´æ•°ç¼–ç æŠ€æœ¯ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°æ•°å€¼å ç”¨æ›´å°‘å­—èŠ‚ï¼Œå¤§æ•°å€¼æ‰å ç”¨æ›´å¤šå­—èŠ‚</strong>ã€‚</p>
<p>æ€æƒ³ç±»ä¼¼äºå“ˆå¤«æ›¼ç¼–ç ï¼Œä½†æ˜¯ä¸å®Œå…¨ç›¸ç­‰ï¼Œå“ˆå¤«æ›¼ç¼–ç åŸºäºé¢‘ç‡ï¼Œè€ŒVarintåŸºäºæ•°å­—æœ¬èº«çš„å¤§å°ã€‚</p>
<h3 data-id="heading-30">ä¼ ç»Ÿæ•´æ•°çš„å±€é™</h3>
<p>åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œæ•´æ•°ç±»å‹æœ‰å›ºå®šé•¿åº¦ï¼š</p>
<ul>
<li><code>int32</code>ï¼šå›ºå®š 4 å­—èŠ‚ï¼ˆ32ä½ï¼‰</li>
<li><code>int64</code>ï¼šå›ºå®š 8 å­—èŠ‚ï¼ˆ64ä½ï¼‰</li>
</ul>
<p>è¿™æ„å‘³ç€å³ä½¿æ•°å€¼å¾ˆå°ï¼ˆæ¯”å¦‚æ•°å­— <code>1</code>ï¼‰ï¼Œä¹Ÿè¦å ç”¨å®Œæ•´çš„ 4 ä¸ªå­—èŠ‚ï¼Œé€ æˆç©ºé—´æµªè´¹ã€‚</p>
<h3 data-id="heading-31">Varint ç¼–ç åŸç†</h3>
<h4 data-id="heading-32">åŸºæœ¬è§„åˆ™</h4>
<ol>
<li>
<p><strong>æ¯ä¸ªå­—èŠ‚åªç”¨ 7 ä½å­˜å‚¨æ•°æ®</strong>ï¼Œæœ€é«˜ä½ï¼ˆMSBï¼‰ä½œä¸ºç»§ç»­æ ‡å¿—ï¼š</p>
<ul>
<li><code>0</code>ï¼šè¡¨ç¤ºè¿™æ˜¯æœ€åä¸€ä¸ªå­—èŠ‚</li>
<li><code>1</code>ï¼šè¡¨ç¤ºåé¢è¿˜æœ‰æ›´å¤šå­—èŠ‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æŒ‰å°ç«¯åºæ’åˆ—</strong>ï¼šä½ä½å­—èŠ‚åœ¨å‰</p>
</li>
</ol>
<h4 data-id="heading-33">ç¼–ç è¿‡ç¨‹ç¤ºä¾‹</h4>
<p><strong>ä¾‹1ï¼šæ•°å­— <code>1</code> çš„ç¼–ç </strong></p>
<pre><code class="hljs language-scss" lang="scss">äºŒè¿›åˆ¶ï¼š<span class="hljs-number">00000001</span>
Varintï¼š<span class="hljs-number">00000001</span>  (<span class="hljs-number">1</span>å­—èŠ‚)
</code></pre>
<ul>
<li>åªæœ‰1ä¸ªå­—èŠ‚ï¼Œæœ€é«˜ä½ä¸º <code>0</code></li>
</ul>
<p><strong>ä¾‹2ï¼šæ•°å­— <code>300</code> çš„ç¼–ç </strong></p>
<pre><code class="hljs language-scss" lang="scss">äºŒè¿›åˆ¶ï¼š<span class="hljs-number">100101100</span> (<span class="hljs-number">300</span>çš„äºŒè¿›åˆ¶)
åˆ†ç»„ï¼š  <span class="hljs-number">0000010</span>   <span class="hljs-number">0101100</span>  (æŒ‰<span class="hljs-number">7</span>ä½åˆ†ç»„)
åè½¬ï¼š  <span class="hljs-number">0101100</span>   <span class="hljs-number">0000010</span>  (å°ç«¯åº)
åŠ æ ‡å¿—ï¼š<span class="hljs-number">10101100</span>  <span class="hljs-number">00000010</span> (æœ€é«˜ä½ï¼š<span class="hljs-number">1</span>-ç»§ç»­, <span class="hljs-number">0</span>-ç»“æŸ)
åå…­è¿›åˆ¶ï¼šAC <span class="hljs-number">02</span>
</code></pre>
<ul>
<li>å ç”¨ 2 å­—èŠ‚ï¼š<code>0xAC 0x02</code></li>
</ul>
<p><strong>ä¾‹3ï¼šæ•°å­— <code>1</code> çš„ä¼ ç»Ÿ vs Varint å¯¹æ¯”</strong></p>
<pre><code class="hljs language-protobuf" lang="protobuf">int32 value = 1;
</code></pre>
<ul>
<li>ä¼ ç»Ÿå›ºå®šé•¿åº¦ï¼š<code>00 00 00 01</code>ï¼ˆ4å­—èŠ‚ï¼‰</li>
<li>Varint ç¼–ç ï¼š<code>01</code>ï¼ˆ1å­—èŠ‚ï¼‰</li>
<li><strong>èŠ‚çœ 75% ç©ºé—´ï¼</strong></li>
</ul>
<h3 data-id="heading-34">Protocol Buffers ä¸­çš„ Varint åº”ç”¨</h3>
<h4 data-id="heading-35">å®é™…ç¼–ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-protobuf" lang="protobuf">message Test {
  int32 id = 1; // å«ä¹‰ï¼šå­—æ®µåä¸ºidçš„å€¼ä¸º1
  ...
}
</code></pre>
<p>ä¸åŒå–å€¼çš„ç¼–ç ç»“æœï¼š</p>
<pre><code class="hljs language-python" lang="python">int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">1</span>      â†’ ç¼–ç : 08 01          (<span class="hljs-number">2</span>å­—èŠ‚)
int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">300</span>    â†’ ç¼–ç : 08 AC 02       (<span class="hljs-number">3</span>å­—èŠ‚)  
int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">65536</span>  â†’ ç¼–ç : 08 <span class="hljs-number">80</span> <span class="hljs-number">80</span> 04    (<span class="hljs-number">4</span>å­—èŠ‚)
</code></pre>
<p>08 01 = 0000 1000 0000 0001</p>
<p>0000 1000 å‰5ä½è¡¨ç¤º å­—æ®µåºå·ï¼Œå3ä½è¡¨ç¤ºå­—æ®µç±»å‹ï¼Œè¡¨ç¤ºå­—æ®µå¤´ï¼Œç¬¬ä¸€ä¸ªå­—æ®µï¼Œintç±»å‹</p>
<p>0000 0001 è¡¨ç¤ºå€¼ä¸º1ã€‚</p>
<h4 data-id="heading-36">å­—æ®µå¤´ä¹Ÿæ˜¯ Varint</h4>
<p>å­—æ®µç¼–å·å’Œç±»å‹çš„ç»„åˆä¹Ÿä½¿ç”¨ Varint ç¼–ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">08 = <span class="hljs-number">0000</span>1000  <span class="hljs-comment"># å­—æ®µ1ï¼ŒVarintç±»å‹</span>
</code></pre>
<h3 data-id="heading-37">ä¼˜åŠ¿ä¸å±€é™</h3>
<h4 data-id="heading-38">âœ… ä¼˜åŠ¿</h4>
<ol>
<li><strong>ç©ºé—´é«˜æ•ˆ</strong>ï¼šå°æ•°å­—å ç”¨æå°‘ç©ºé—´</li>
<li><strong>è‡ªæè¿°</strong>ï¼šä»æ•°æ®æœ¬èº«å¯çŸ¥é•¿åº¦</li>
<li><strong>é€šç”¨æ€§å¼º</strong>ï¼šé€‚åˆå„ç§æ•´æ•°ç±»å‹</li>
</ol>
<h4 data-id="heading-39">âŒ å±€é™</h4>
<ol>
<li><strong>å¤§æ•°ä»£ä»·</strong>ï¼šæå¤§æ•°å­—å¯èƒ½æ¯”å›ºå®šé•¿åº¦æ›´å ç©ºé—´</li>
<li><strong>è§£æå¼€é”€</strong>ï¼šéœ€è¦åŠ¨æ€è§£æå­—èŠ‚æ•°</li>
</ol>
<p>è¿™æ ·å°†å°è´Ÿæ•°è½¬æ¢ä¸ºå°æ­£æ•°ï¼Œå†åˆ©ç”¨ Varint çš„é«˜æ•ˆç¼–ç ã€‚</p>
<h3 data-id="heading-40">å®é™…å½±å“</h3>
<p>åœ¨çœŸå®ä¸šåŠ¡æ•°æ®ä¸­ï¼š</p>
<ul>
<li>å¤§å¤šæ•° IDã€çŠ¶æ€ç ã€æ•°é‡éƒ½æ˜¯å°æ•°å€¼</li>
<li>90% çš„æ•´æ•°å¯ä»¥ç”¨ 1-2 ä¸ªå­—èŠ‚è¡¨ç¤º</li>
<li>æ•´ä½“æ•°æ®å¤§å°å‡å°‘ 30-50% å¾ˆå¸¸è§</li>
</ul>
<h3 data-id="heading-41">æ€»ç»“</h3>
<p>Varint å‹ç¼©æ˜¯ Protocol Buffers é«˜æ•ˆæ€§çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ã€ŒæŒ‰éœ€åˆ†é…ã€çš„æ™ºèƒ½ç¼–ç æ–¹å¼ï¼Œåœ¨äºŒè¿›åˆ¶çº§åˆ«å®ç°äº†æ•°æ®çš„æœ€å°åŒ–è¡¨ç¤ºï¼Œç‰¹åˆ«é€‚åˆç½‘ç»œä¼ è¾“å’Œå­˜å‚¨ä¼˜åŒ–åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7575112613777653794</link>    <guid>https://juejin.cn/post/7575112613777653794</guid>    <pubDate>2025-11-23T01:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613777653794" data-draft-id="7575112613777637410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²"/> <meta itemprop="keywords" content="åç«¯,Java,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-11-23T01:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T01:58:21.000Z" title="Sun Nov 23 2025 01:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾®æœåŠ¡æ¶æ„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…³äº"è¾¹ç•Œ"çš„å“²å­¦é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<p>æ¯ä¸ªæœåŠ¡è¾¹ç•Œçš„ç¡®ç«‹ï¼Œéƒ½æ˜¯åœ¨å›ç­”ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼š"ä»€ä¹ˆåº”è¯¥åœ¨ä¸€èµ·ï¼Œä»€ä¹ˆåº”è¯¥åˆ†ç¦»ï¼Ÿ"è¿™ä¸æˆ‘ä»¬äººç”Ÿä¸­å…³äºäººé™…å…³ç³»ã€èŒä¸šå‘å±•çš„å†³ç­–ä½•å…¶ç›¸ä¼¼ã€‚è¿‡åº¦çš„è€¦åˆå¦‚åŒè¿‡åº¦ä¾èµ–çš„äººé™…å…³ç³»ï¼Œè®©äººå¤±å»ç‹¬ç«‹æ€§ï¼›è€Œè¿‡åº¦çš„æ‹†åˆ†åˆ™åƒæç«¯ä¸ªäººä¸»ä¹‰ï¼Œå¯¼è‡´åä½œæˆæœ¬æ¿€å¢ã€‚</p>
<p>å¦‚ä½•ä½¿ç”¨ Java æ­å»ºå¾®æœåŠ¡ç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„æ­å»ºæ–¹æ¡ˆï¼š</p>
<h2 data-id="heading-0">1. æŠ€æœ¯æ ˆé€‰æ‹©</h2>
<h3 data-id="heading-1">æ ¸å¿ƒæ¡†æ¶</h3>
<ul>
<li><strong>Spring Boot</strong> - å¿«é€Ÿå¼€å‘æ¡†æ¶</li>
<li><strong>Spring Cloud</strong> - å¾®æœåŠ¡å…¨å®¶æ¡¶</li>
<li><strong>Spring Cloud Alibaba</strong> - é˜¿é‡Œå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-2">æœåŠ¡æ²»ç†</h3>
<ul>
<li><strong>Nacos</strong> - æœåŠ¡æ³¨å†Œä¸é…ç½®ä¸­å¿ƒ</li>
<li><strong>Spring Cloud Gateway</strong> - APIç½‘å…³</li>
<li><strong>OpenFeign</strong> - æœåŠ¡é—´è°ƒç”¨</li>
<li><strong>LoadBalancer</strong> - è´Ÿè½½å‡è¡¡</li>
</ul>
<h3 data-id="heading-3">å®¹é”™ä¸ç›‘æ§</h3>
<ul>
<li><strong>Sentinel</strong> - æµé‡æ§åˆ¶ä¸ç†”æ–­é™çº§</li>
<li><strong>Sleuth + Zipkin</strong> - åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</li>
</ul>
<h2 data-id="heading-4">2. é¡¹ç›®ç»“æ„è®¾è®¡</h2>
<pre><code class="hljs language-perl" lang="perl">microservices-<span class="hljs-keyword">system</span>/
â”œâ”€â”€ gateway-service/          <span class="hljs-comment"># APIç½‘å…³</span>
â”œâ”€â”€ user-service/            <span class="hljs-comment"># ç”¨æˆ·æœåŠ¡</span>
â”œâ”€â”€ order-service/           <span class="hljs-comment"># è®¢å•æœåŠ¡</span>
â”œâ”€â”€ product-service/         <span class="hljs-comment"># å•†å“æœåŠ¡</span>
â”œâ”€â”€ common/                  <span class="hljs-comment"># å…¬å…±æ¨¡å—</span>
â””â”€â”€ pom.xml                  <span class="hljs-comment"># çˆ¶POM</span>
</code></pre>
<h2 data-id="heading-5">3. å…·ä½“å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-6">3.1 çˆ¶å·¥ç¨‹é…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>microservices-system<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>gateway-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>user-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>order-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>product-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>2021.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- Spring Cloud --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- Spring Cloud Alibaba --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud-alibaba.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3.2 å…¬å…±æ¨¡å— (common)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç»Ÿä¸€å“åº”å¯¹è±¡</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Integer</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> message;
    <span class="hljs-keyword">private</span> T data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params">T data</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">200</span>, <span class="hljs-string">"success"</span>, data);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">500</span>, message, <span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// å…¨å±€å¼‚å¸¸å¤„ç†</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">handleException</span>(<span class="hljs-params">Exception e</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">error</span>(e.<span class="hljs-title function_">getMessage</span>());
    }
}
</code></pre>
<h3 data-id="heading-8">3.3 ç”¨æˆ·æœåŠ¡ (user-service)</h3>
<p><strong>pom.xml</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><strong>application.yml</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">user-service</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/user_db?useSSL=false</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">password</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>

<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</code></pre>
<p><strong>UserController.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/users"</span>)
public class UserController {
    
    <span class="hljs-variable">@Autowired</span>
    private UserService userService;
    
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    public Result&lt;User&gt; <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">user</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.getById</span>(id);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(user);
    }
    
    @<span class="hljs-selector-tag">PostMapping</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">User</span>&gt; <span class="hljs-selector-tag">createUser</span>(<span class="hljs-variable">@RequestBody</span> User user) {
        <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.save</span>(user);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(user);
    }
    
    @<span class="hljs-selector-tag">GetMapping</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">User</span>&gt;&gt; <span class="hljs-selector-tag">getAllUsers</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(userService.<span class="hljs-built_in">list</span>());
    }
}
</code></pre>
<p><strong>User.java</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName</span>(<span class="hljs-string">"users"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@TableId</span>(<span class="hljs-keyword">type</span> = <span class="hljs-title class_">IdType</span>.<span class="hljs-property">AUTO</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> username;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> email;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> phone;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> createTime;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> updateTime;
}
</code></pre>
<h3 data-id="heading-9">3.4 è®¢å•æœåŠ¡ (order-service)</h3>
<p><strong>OrderController.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/orders"</span>)
public class OrderController {
    
    <span class="hljs-variable">@Autowired</span>
    private OrderService orderService;
    
    <span class="hljs-variable">@Autowired</span>
    private UserFeignClient userFeignClient;
    
    <span class="hljs-variable">@PostMapping</span>
    public Result&lt;Order&gt; <span class="hljs-built_in">createOrder</span>(<span class="hljs-variable">@RequestBody</span> Order order) {
        <span class="hljs-comment">// è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·</span>
        <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">User</span>&gt; <span class="hljs-selector-tag">userResult</span> = <span class="hljs-selector-tag">userFeignClient</span><span class="hljs-selector-class">.getUserById</span>(order.<span class="hljs-built_in">getUserId</span>());
        <span class="hljs-selector-tag">if</span> (userResult.<span class="hljs-built_in">getCode</span>() != <span class="hljs-number">200</span>) {
            <span class="hljs-selector-tag">throw</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        }
        
        <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.save</span>(order);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(order);
    }
    
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">Order</span>&gt; <span class="hljs-selector-tag">getOrderById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">Order</span> <span class="hljs-selector-tag">order</span> = <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.getById</span>(id);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(order);
    }
}
</code></pre>
<p><strong>UserFeignClient.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"user-service"</span>, path = <span class="hljs-string">"/users"</span>)
public interface UserFeignClient {
    
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    Result&lt;User&gt; <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id);
}
</code></pre>
<h3 data-id="heading-10">3.5 APIç½‘å…³ (gateway-service)</h3>
<p><strong>pom.xml</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><strong>application.yml</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">gateway-service</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
    <span class="hljs-attr">gateway:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">locator:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">routes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://user-service</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/users/**</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=1</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">order-service</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://order-service</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/orders/**</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=1</span>
</code></pre>
<h3 data-id="heading-11">3.6 é…ç½®ä¸­å¿ƒä½¿ç”¨</h3>
<p>åœ¨Nacosä¸­åˆ›å»º <code>user-service.yaml</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># user-service ç‰¹å®šé…ç½®</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.example:</span> <span class="hljs-string">debug</span>

<span class="hljs-attr">custom:</span>
  <span class="hljs-attr">config:</span> <span class="hljs-string">user-service-config</span>
</code></pre>
<h2 data-id="heading-12">4. æœåŠ¡æ³¨å†Œä¸å‘ç°</h2>
<h3 data-id="heading-13">å¯åŠ¨Nacos</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½Nacoså¹¶å¯åŠ¨</span>
sh startup.sh -m standalone
</code></pre>
<h3 data-id="heading-14">æœåŠ¡æ³¨å†Œ</h3>
<p>æ¯ä¸ªå¾®æœåŠ¡é€šè¿‡ <code>@EnableDiscoveryClient</code> è‡ªåŠ¨æ³¨å†Œï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableDiscoveryClient</span>
<span class="hljs-variable">@EnableFeignClients</span>
public class UserServiceApplication {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(UserServiceApplication.class, args);
    }
}
</code></pre>
<h2 data-id="heading-15">5. ç†”æ–­ä¸é™çº§</h2>
<h3 data-id="heading-16">ä½¿ç”¨Sentinel</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"user-service"</span>, fallback = UserFeignClientFallback.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFeignClient</span> {
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserFeignClientFallback</span> <span class="hljs-title">implements</span> <span class="hljs-title">UserFeignClient</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Result&lt;User&gt; getUserById(<span class="hljs-built_in">Long</span> id) {
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>);
    }
}
</code></pre>
<h2 data-id="heading-17">6. éƒ¨ç½²ä¸è¿è¡Œ</h2>
<h3 data-id="heading-18">ä½¿ç”¨Docker Compose</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nacos:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nacos/nacos-server:latest</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MODE=standalone</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8848:8848"</span>
  
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=password</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
</code></pre>
<h2 data-id="heading-19">7. ç›‘æ§ä¸è¿ç»´</h2>
<h3 data-id="heading-20">é“¾è·¯è¿½è¸ªé…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">sleuth:</span>
    <span class="hljs-attr">sampler:</span>
      <span class="hljs-attr">probability:</span> <span class="hljs-number">1.0</span>
  <span class="hljs-attr">zipkin:</span>
    <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:9411</span>
</code></pre>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>è¿™ä¸ªå¾®æœåŠ¡ç³»ç»Ÿæä¾›äº†ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ³¨å†Œå‘ç°</strong> - åŸºäºNacos</li>
<li><strong>APIç½‘å…³</strong> - ç»Ÿä¸€å…¥å£å’Œè·¯ç”±</li>
<li><strong>æœåŠ¡é—´è°ƒç”¨</strong> - åŸºäºOpenFeign</li>
<li><strong>é…ç½®ç®¡ç†</strong> - é›†ä¸­å¼é…ç½®</li>
<li><strong>ç†”æ–­é™çº§</strong> - åŸºäºSentinel</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong> - åŸºäºLoadBalancer</li>
</ol>
<p>æ ¹æ®å®é™…éœ€æ±‚æ‰©å±•æ›´å¤šåŠŸèƒ½ï¼Œå¦‚åˆ†å¸ƒå¼äº‹åŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç›‘æ§å‘Šè­¦ç­‰ã€‚</p>
<p>å¾®æœåŠ¡æŠ€æœ¯æ ˆçš„æ›´æ–°é€Ÿåº¦å·²ç»è¶…è¿‡äº†å¤§å¤šæ•°å›¢é˜Ÿçš„å®é™…éœ€æ±‚ï¼Œå½¢æˆäº†ä¸€ç§æŠ€æœ¯çš„"æ—¶å°šç«èµ›"ã€‚</p>
<p>å¾ˆå¤šå›¢é˜Ÿåœ¨Spring Cloudã€Dubboã€Kubernetes + Istioä¹‹é—´åå¤æ¨ªè·³ï¼Œå´å¿½ç•¥äº†æœ€æ ¹æœ¬çš„é—®é¢˜ï¼šè¿™äº›æŠ€æœ¯å˜é©æ˜¯å¦çœŸçš„ä¸ºä¸šåŠ¡åˆ›é€ äº†ä»·å€¼ï¼Ÿè¿˜æ˜¯ä»…ä»…ä¸ºäº†æŠ€æœ¯äººçš„"ç®€å†å·¥ç¨‹"ï¼Ÿ</p>
<p>æœ€æˆåŠŸçš„å¾®æœåŠ¡æ¶æ„ï¼Œå¾€å¾€ä¸æ˜¯æŠ€æœ¯æœ€è¶…å‰çš„ï¼Œè€Œæ˜¯ä¸å›¢é˜Ÿèƒ½åŠ›ã€ä¸šåŠ¡å‘å±•é˜¶æ®µæœ€åŒ¹é…çš„ã€‚æŠ€æœ¯å†³ç­–åº”è¯¥æ˜¯ä¸€åœºç†æ€§çš„ä»·å€¼æŠ•èµ„ï¼Œè€Œä¸æ˜¯æ„Ÿæ€§çš„æ—¶å°šè¿½é€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83ac37f1a22643a788a7461753e60610~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764467901&amp;x-signature=FqGy0BtlB0dlo6%2BhlbEjuvzKpaE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)]]></title>    <link>https://juejin.cn/post/7575655132747726884</link>    <guid>https://juejin.cn/post/7575655132747726884</guid>    <pubDate>2025-11-23T02:32:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132747726884" data-draft-id="7575655132747710500" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®,C++"/> <meta itemprop="datePublished" content="2025-11-23T02:32:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å¯çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/3590319025687584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3590319025687584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å¯çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:32:48.000Z" title="Sun Nov 23 2025 02:32:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ ENet ä¸­ï¼Œæˆ‘ä»¬ä¸ç›´æ¥å‘é€æ•£ä¹±çš„å­—èŠ‚æµï¼Œè€Œæ˜¯å°†æ•°æ®å°è£…åœ¨<strong>æ•°æ®åŒ… (ENetPacket)</strong> ä¸­ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦ ENetPacketï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨ç©ä¸€ä¸ªå¿«èŠ‚å¥çš„å°„å‡»æ¸¸æˆï¼š</p>
<ol>
<li><strong>åœºæ™¯ A</strong>ï¼šä½ å¼€äº†ä¸€æªã€‚è¿™ä¸ªä¿¡æ¯<strong>å¿…é¡»</strong>åˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦åˆ™ä½ æ‰“ä¸­äººéƒ½æ²¡ä¼¤å®³ã€‚</li>
<li><strong>åœºæ™¯ B</strong>ï¼šä½ çš„è§’è‰²åœ¨ç§»åŠ¨ã€‚å¦‚æœä¸¢å¤±äº†ä¸€ä¸¤ä¸ªä½ç½®æ›´æ–°åŒ…ï¼ŒæœåŠ¡å™¨å¯ä»¥ç”¨ä¸‹ä¸€ä¸ªåŒ…ä¿®æ­£ä½ç½®ï¼Œé—®é¢˜ä¸å¤§ã€‚</li>
</ol>
<p>å¦‚æœç›´æ¥ä½¿ç”¨åŸå§‹çš„ UDP åè®®ï¼Œå®ƒå°±åƒå¯„å¹³ä¿¡ï¼Œæ—¢å®¹æ˜“ä¸¢ï¼Œä¹Ÿä¸ä¿è¯é¡ºåºã€‚
<code>ENetPacket</code> çš„å‡ºç°å°±æ˜¯ä¸ºäº†ç»™è¿™äº›æ•°æ®è´´ä¸Šâ€œæ ‡ç­¾â€ã€‚å®ƒå…è®¸ä½ å‘Šè¯‰ ENetï¼šâ€œè¿™å°ä¿¡éå¸¸é‡è¦ï¼Œå¿…é¡»é€åˆ°ï¼ˆReliableï¼‰â€æˆ–è€…â€œè¿™å°ä¿¡ä¸¢äº†ä¹Ÿæ²¡å…³ç³»ï¼ˆUnreliableï¼‰â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ¦‚å¿µï¼šå¯é æ€§ä¸æ ‡å¿—</h2>
<p>åœ¨åˆ›å»ºæ•°æ®åŒ…æ—¶ï¼Œæœ€é‡è¦çš„å‚æ•°æ˜¯ <code>flags</code>ï¼ˆæ ‡å¿—ä½ï¼‰ã€‚å®ƒå†³å®šäº†æ•°æ®åŒ…çš„ä¼ è¾“è¡Œä¸ºã€‚</p>
<h3 data-id="heading-2">2.1 å¯é æ•°æ®åŒ… (Reliable)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>ENET_PACKET_FLAG_RELIABLE</code></li>
<li><strong>è¡Œä¸º</strong>ï¼šå°±åƒ TCP åè®®ã€‚å¦‚æœæ•°æ®åŒ…ä¸¢å¤±ï¼ŒENet ä¼šè‡ªåŠ¨é‡ä¼ ï¼Œç›´åˆ°å¯¹æ–¹ç¡®è®¤æ”¶åˆ°ã€‚ä¸”ä¿è¯æŒ‰å‘é€é¡ºåºåˆ°è¾¾ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šèŠå¤©ä¿¡æ¯ã€è´­ä¹°ç‰©å“ã€é‡Šæ”¾æŠ€èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-3">2.2 ä¸å¯é æ•°æ®åŒ… (Unreliable)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>0</code> (æ— æ ‡å¿—)</li>
<li><strong>è¡Œä¸º</strong>ï¼šå°±åƒåŸå§‹ UDPã€‚å‘å‡ºå»å°±ä¸ç®¡äº†ï¼Œä¸¢äº†å°±ä¸¢äº†ã€‚ä½† ENet ä¾ç„¶ä¼šå¸®ä½ è¿›è¡ŒåŸºæœ¬çš„å®Œæ•´æ€§æ ¡éªŒï¼ˆCRCï¼‰ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šé¢‘ç¹çš„ä½ç½®æ›´æ–°ã€è¯­éŸ³æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 æ— åºæ•°æ®åŒ… (Unsequenced)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>ENET_PACKET_FLAG_UNSEQUENCED</code></li>
<li><strong>è¡Œä¸º</strong>ï¼šæ•°æ®åŒ…ä¸ä»…ä¸å¯é ï¼Œè€Œä¸”ä¸ä¿è¯é¡ºåºã€‚åé¢çš„åŒ…å¯èƒ½æ¯”å‰é¢çš„å…ˆåˆ°ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šæç«¯è¿½æ±‚ä½å»¶è¿Ÿä¸”å¯¹æ—§æ•°æ®å®Œå…¨ä¸æ„Ÿå…´è¶£çš„åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">3. å®æˆ˜ï¼šåˆ›å»ºä¸å‘é€</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç æ¥çœ‹çœ‹å¦‚ä½•å°è£…å¹¶å‘é€ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®ä¸åˆ›å»ºåŒ…</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç ç•¥ ...</span>

<span class="hljs-type">const</span> <span class="hljs-type">char</span> * message = <span class="hljs-string">"Hello, ENet!"</span>;

<span class="hljs-comment">// åˆ›å»ºæ•°æ®åŒ…</span>
<span class="hljs-comment">// å‚æ•°1: æ•°æ®å†…å®¹æŒ‡é’ˆ</span>
<span class="hljs-comment">// å‚æ•°2: æ•°æ®é•¿åº¦ (è®°å¾—åŒ…å«å­—ç¬¦ä¸²ç»“å°¾çš„ \0)</span>
<span class="hljs-comment">// å‚æ•°3: æ ‡å¿—ä½ (è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å¯é ä¼ è¾“)</span>
ENetPacket * packet = enet_packet_create(message, 
                                         <span class="hljs-built_in">strlen</span>(message) + <span class="hljs-number">1</span>, 
                                         ENET_PACKET_FLAG_RELIABLE);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š
å½“ä½ è°ƒç”¨ <code>enet_packet_create</code> æ—¶ï¼ŒENet ä¼šåœ¨å†…éƒ¨ç”³è¯·ä¸€å—æ–°çš„å†…å­˜ï¼Œå¹¶å°†ä½ çš„ <code>message</code> <strong>å¤åˆ¶</strong> è¿›å»ã€‚è¿™æ„å‘³ç€åœ¨è¿™ä¸ªå‡½æ•°è¿”å›åï¼Œä½ å¯ä»¥éšæ„ä¿®æ”¹æˆ–é”€æ¯åŸæ¥çš„ <code>message</code> å˜é‡ï¼Œä¸ä¼šå½±å“æ•°æ®åŒ…ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šå‘é€ç»™å¯¹ç­‰èŠ‚ç‚¹</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‘é€æ•°æ®åŒ…</span>
<span class="hljs-comment">// å‚æ•°1: ç›®æ ‡èŠ‚ç‚¹ (peer)</span>
<span class="hljs-comment">// å‚æ•°2: é€šé“ ID (0) - ç¨ååœ¨ä¸‹ä¸€ç« è¯¦ç»†è®²è§£</span>
<span class="hljs-comment">// å‚æ•°3: æ•°æ®åŒ…å¯¹è±¡</span>
<span class="hljs-type">int</span> result = enet_peer_send(peer, <span class="hljs-number">0</span>, packet);

<span class="hljs-keyword">if</span> (result &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"å‘é€å¤±è´¥ï¼\n"</span>);
    <span class="hljs-comment">// å¦‚æœå‘é€å¤±è´¥ï¼Œä½ éœ€è¦è‡ªå·±é”€æ¯è¿™ä¸ªåŒ…</span>
    enet_packet_destroy(packet); 
}
</code></pre>
<ul>
<li>å…³äºé€šé“çš„çŸ¥è¯†ï¼Œè¯·å‚è€ƒ <a href="https://link.juejin.cn?target=04_%25E5%25A4%259A%25E9%2580%259A%25E9%2581%2593%25E6%259C%25BA%25E5%2588%25B6__channels__.md" target="_blank" title="04_%E5%A4%9A%E9%80%9A%E9%81%93%E6%9C%BA%E5%88%B6__channels__.md" ref="nofollow noopener noreferrer">å¤šé€šé“æœºåˆ¶ (Channels)</a>ã€‚</li>
</ul>
<p><strong>é‡è¦è§„åˆ™</strong>ï¼š</p>
<ul>
<li>å¦‚æœ <code>enet_peer_send</code> æˆåŠŸï¼ˆè¿”å› 0ï¼‰ï¼Œ<strong>ENet æ¥ç®¡äº†æ•°æ®åŒ…çš„æ‰€æœ‰æƒ</strong>ã€‚ä½ <strong>åƒä¸‡ä¸è¦</strong>å†è°ƒç”¨ destroyï¼ŒENet ä¼šåœ¨å‘å®Œåè‡ªåŠ¨é”€æ¯å®ƒã€‚</li>
<li>å¦‚æœå‘é€å¤±è´¥ï¼Œä½ éœ€è¦æ‰‹åŠ¨é”€æ¯å®ƒä»¥é˜²å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šæ¥æ”¶æ•°æ®åŒ…</h3>
<p>åœ¨æ¥æ”¶ç«¯ï¼ˆEvent Loop ä¸­ï¼‰ï¼Œæˆ‘ä»¬è§£åŒ…æ•°æ®ã€‚</p>
<pre><code class="hljs language-c" lang="c">ENetEvent event;
<span class="hljs-keyword">while</span> (enet_host_service(host, &amp;event, <span class="hljs-number">1000</span>) &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">switch</span> (event.type) {
        <span class="hljs-keyword">case</span> ENET_EVENT_TYPE_RECEIVE:
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯: %s\n"</span>, (<span class="hljs-type">char</span>*)event.packet-&gt;data);
            
            <span class="hljs-comment">// é‡è¦ï¼šæ¥æ”¶åˆ°çš„åŒ…å¿…é¡»ç”±ç”¨æˆ·è´Ÿè´£é”€æ¯ï¼</span>
            enet_packet_destroy(event.packet);
            <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šENet ä¸çŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™ç”¨å®Œæ•°æ®ï¼Œæ‰€ä»¥åœ¨ <code>ENET_EVENT_TYPE_RECEIVE</code> äº‹ä»¶å¤„ç†å®Œæ¯•åï¼Œä½ <strong>å¿…é¡»</strong>è°ƒç”¨ <code>enet_packet_destroy</code>ï¼Œå¦åˆ™å†…å­˜ä¼šä¸€ç›´è¢«å ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-9">4. å†…éƒ¨åŸç†è§£æ</h2>
<p>å½“ä½ åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…æ—¶ï¼Œå†…å­˜é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant API as enet_packet_create
    participant Mem as å †å†…å­˜ (Heap)

    User-&gt;&gt;API: è¯·æ±‚åˆ›å»ºåŒ… ("Hello", é•¿åº¦ 6)
    API-&gt;&gt;Mem: malloc(sizeof(ENetPacket))
    Note right of Mem: åˆ†é…ç»“æ„ä½“å¤´ä¿¡æ¯
    API-&gt;&gt;Mem: malloc(6 bytes)
    Note right of Mem: åˆ†é…æ•°æ®è½½è·ç©ºé—´
    API-&gt;&gt;Mem: memcpy("Hello" -&gt; buffer)
    Note right of Mem: å¤åˆ¶ç”¨æˆ·æ•°æ®åˆ°æ–°ç©ºé—´
    API--&gt;&gt;User: è¿”å› Packet æŒ‡é’ˆ
</code></pre>
<h3 data-id="heading-10">4.1 æ·±å…¥ä»£ç  (packet.c)</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>enet_packet_create</code> çš„ç®€åŒ–ç‰ˆå®ç°ï¼Œç†è§£å®ƒæ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ã€‚</p>
<p><strong>1. åˆ†é…å¤´éƒ¨</strong>
é¦–å…ˆï¼Œåˆ†é… <code>ENetPacket</code> ç»“æ„ä½“æœ¬èº«çš„å†…å­˜ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
ENetPacket * <span class="hljs-title function_">enet_packet_create</span> <span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span> * data, <span class="hljs-type">size_t</span> dataLength, enet_uint32 flags)</span>
{
    <span class="hljs-comment">// 1. åˆ†é…ç»“æ„ä½“</span>
    ENetPacket * packet = (ENetPacket *) enet_malloc (<span class="hljs-keyword">sizeof</span> (ENetPacket));
    <span class="hljs-keyword">if</span> (packet == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// å†…å­˜ä¸è¶³</span>
</code></pre>
<p><strong>2. åˆ†é…ä¸å¤åˆ¶æ•°æ®</strong>
è¿™æ˜¯å…³é”®ç‚¹ã€‚é™¤éä½ æŒ‡å®šäº† <code>ENET_PACKET_FLAG_NO_ALLOCATE</code>ï¼ˆé«˜çº§ç”¨æ³•ï¼‰ï¼Œå¦åˆ™ ENet æ€»æ˜¯ä¼šå¤åˆ¶æ•°æ®ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
    <span class="hljs-comment">// 2. åˆ†é…æ•°æ®ç¼“å†²åŒº</span>
    packet -&gt; data = (enet_uint8 *) enet_malloc (dataLength);

    <span class="hljs-comment">// 3. å¤åˆ¶ç”¨æˆ·æ•°æ®</span>
    <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">NULL</span>)
        <span class="hljs-built_in">memcpy</span> (packet -&gt; data, data, dataLength);
</code></pre>
<p><strong>3. è®¾ç½®å±æ€§</strong>
æœ€åï¼Œåˆå§‹åŒ–æ ‡å¿—ä½å’Œå¼•ç”¨è®¡æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
    packet -&gt; flags = flags;
    packet -&gt; dataLength = dataLength;
    packet -&gt; referenceCount = <span class="hljs-number">0</span>; <span class="hljs-comment">// å¼•ç”¨è®¡æ•°ç”¨äºå¤šæ’­ç­‰åœºæ™¯</span>
    
    <span class="hljs-keyword">return</span> packet;
}
</code></pre>
<h3 data-id="heading-11">4.2 æ ¡éªŒå’Œ (CRC32)</h3>
<p>è™½ç„¶åœ¨ç®€å•çš„åˆ›å»ºå‡½æ•°ä¸­çœ‹ä¸åˆ°ï¼Œä½†åœ¨å‘é€å‰ï¼ŒENet è¿˜ä¼šè®¡ç®—æ•°æ®çš„ CRC32 æ ¡éªŒå’Œã€‚è¿™ä¿è¯äº†å¦‚æœç½‘ç»œä¼ è¾“ä¸­æ•°æ®ä½å‘ç”Ÿäº†ç¿»è½¬ï¼ˆæ¯”å¦‚æ¯”ç‰¹æµå¹²æ‰°ï¼‰ï¼ŒENet èƒ½å¤Ÿè¯†åˆ«å‡ºæ¥å¹¶ä¸¢å¼ƒååŒ…ï¼Œè€Œä¸ä¼šæŠŠä¹±ç äº¤ç»™ä½ çš„ç¨‹åºã€‚</p>
<hr/>
<h2 data-id="heading-12">5. é«˜çº§æŠ€å·§ï¼šé¿å…å†…å­˜å¤åˆ¶</h2>
<p>å¯¹äºæå…¶è¿½æ±‚æ€§èƒ½çš„åœºæ™¯ï¼Œä½ å¯èƒ½å¸Œæœ›é¿å… <code>memcpy</code> çš„å¼€é”€ã€‚
ä½ å¯ä»¥ä½¿ç”¨ <code>ENET_PACKET_FLAG_NO_ALLOCATE</code> æ ‡å¿—ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‡è®¾ my_data æ˜¯ä½ è‡ªå·±ç®¡ç†çš„ä¸€å—æŒä¹…å†…å­˜</span>
ENetPacket * packet = enet_packet_create(my_data, len, 
    ENET_PACKET_FLAG_RELIABLE | ENET_PACKET_FLAG_NO_ALLOCATE);
</code></pre>
<p><strong>è­¦å‘Š</strong>ï¼šä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼ŒENet åªä¼šä¿å­˜æŒ‡é’ˆ <code>my_data</code>ã€‚ä½ å¿…é¡»ç¡®ä¿åœ¨ ENet å‘é€å®Œæ¯•å¹¶é”€æ¯ packet ä¹‹å‰ï¼Œè¿™å—å†…å­˜<strong>ä¸€ç›´æœ‰æ•ˆ</strong>ã€‚è¿™é€šå¸¸ç”¨äºå‘é€é™æ€å¸¸é‡æ•°æ®æˆ–é€šè¿‡è‡ªå®šä¹‰å†…å­˜æ± ç®¡ç†çš„æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-13">6. æ€»ç»“</h2>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† ENet é€šä¿¡çš„åŸºæœ¬å•å…ƒï¼š</p>
<ol>
<li><strong>ENetPacket</strong> æ˜¯æ•°æ®çš„è½½ä½“ï¼ŒåŒ…å«æ•°æ®å†…å®¹å’Œä¼ è¾“æ ‡å¿—ã€‚</li>
<li>é€šè¿‡ <strong>Flags</strong>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ‡æ¢ TCP é£æ ¼çš„å¯é ä¼ è¾“å’Œ UDP é£æ ¼çš„å¿«é€Ÿä¼ è¾“ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>è‡³å…³é‡è¦ï¼š
<ul>
<li>åˆ›å»ºæ—¶ï¼šæ•°æ®è¢«å¤åˆ¶ã€‚</li>
<li>å‘é€æˆåŠŸåï¼šENet è´Ÿè´£é”€æ¯ã€‚</li>
<li>æ¥æ”¶åï¼šç”¨æˆ·è´Ÿè´£é”€æ¯ã€‚</li>
</ul>
</li>
</ol>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»èƒ½å‘åŒ…äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬éœ€è¦åŒæ—¶å¤„ç†èŠå¤©ä¿¡æ¯å’Œé«˜é¢‘çš„ä½ç½®åŒæ­¥ï¼Œå¦‚ä½•é¿å…èŠå¤©ä¿¡æ¯é˜»å¡äº†ä½ç½®æ›´æ–°å‘¢ï¼Ÿè¿™å°±å¼•å…¥äº† ENet çš„å¦ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§â€”â€”<strong>é€šé“</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)]]></title>    <link>https://juejin.cn/post/7575655132747759652</link>    <guid>https://juejin.cn/post/7575655132747759652</guid>    <pubDate>2025-11-23T02:36:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132747759652" data-draft-id="7575655132747743268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®,C++"/> <meta itemprop="datePublished" content="2025-11-23T02:36:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å¯çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/3590319025687584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3590319025687584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å¯çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:36:09.000Z" title="Sun Nov 23 2025 02:36:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç«  æ•°æ®åŒ…å°è£… (ENetPacket) ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•åˆ›å»ºåŒ…è£¹ï¼ˆæ•°æ®åŒ…ï¼‰å¹¶ç»™å®ƒä»¬è´´ä¸Šâ€œå¿…é¡»é€è¾¾â€æˆ–â€œæ— æ‰€è°“â€çš„æ ‡ç­¾ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‰€æœ‰çš„åŒ…è£¹éƒ½æŒ¤åœ¨ä¸€æ¡çª„çª„çš„å°è·¯ä¸Šæ’é˜Ÿï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å°±å¼•å‡ºäº†ç½‘ç»œç¼–ç¨‹ä¸­ä¸€ä¸ªç»å…¸çš„é—®é¢˜ï¼Œä»¥åŠ ENet çš„æ€æ‰‹çº§ç‰¹æ€§â€”â€”<strong>å¤šé€šé“ (Channels)</strong>ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦é€šé“ï¼Ÿ</h2>
<p>æƒ³è±¡ä½ åœ¨ç©ä¸€æ¬¾ç½‘ç»œæ¸¸æˆï¼Œå‘ç”Ÿäº†ä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>ä½ æ‰“å­—å‘äº†ä¸€å¥èŠå¤©ä¿¡æ¯ï¼šâ€œæ•‘å‘½ï¼â€ï¼ˆè¿™æ˜¯ä¸€ä¸ª<strong>å¯é åŒ…</strong>ï¼Œå¿…é¡»é€è¾¾ï¼Œä¸èƒ½ä¹±åºï¼‰ã€‚</li>
<li>ä½ çš„è§’è‰²æ­£åœ¨ç–¯ç‹‚è·‘è·¯ï¼Œæ¯ç§’å‘é€ 20 æ¬¡ä½ç½®æ›´æ–°ï¼ˆè¿™æ˜¯<strong>ä¸å¯é åŒ…</strong>ï¼Œä¸¢äº†å°±ä¸¢äº†ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-1">å¦‚æœæ²¡æœ‰é€šé“ï¼ˆTCP çš„åšæ³•ï¼‰</h3>
<p>æ‰€æœ‰çš„åŒ…è£¹éƒ½åœ¨ä¸€æ¡ç®¡é“é‡Œæ’é˜Ÿã€‚å‡è®¾ä½ å‘çš„â€œæ•‘å‘½ï¼â€è¿™ä¸ªåŒ…åœ¨ç½‘ç»œä¸Šä¸¢äº†ï¼š</p>
<ol>
<li>æ¥æ”¶ç«¯å‘ç°â€œæ•‘å‘½ï¼â€æ²¡æ”¶åˆ°ï¼Œäºæ˜¯å®ƒ<strong>æš‚åœæ¥æ”¶æ‰€æœ‰åç»­æ•°æ®</strong>ã€‚</li>
<li>å®ƒç­‰å¾…ä½ é‡ä¼ â€œæ•‘å‘½ï¼â€ã€‚</li>
<li>åœ¨è¿™æœŸé—´ï¼Œä½ å‘é€çš„é‚£äº›æœ€æ–°çš„è·‘è·¯ä½ç½®æ•°æ®ï¼ˆæœ¬æ¥åº”è¯¥å¾ˆæµç•…ï¼‰å…¨éƒ¨è¢«å µåœ¨äº†åé¢ã€‚</li>
<li>ä½ çš„æ¸¸æˆç”»é¢ç¬é—´å¡ä½ï¼ˆLagï¼‰ï¼Œç›´åˆ°â€œæ•‘å‘½ï¼â€é‡ä¼ æˆåŠŸï¼Œæ‰€æœ‰ç§¯å‹çš„ä½ç½®æ•°æ®æ‰çªç„¶æ¶Œå…¥ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯è‘—åçš„<strong>é˜Ÿå¤´é˜»å¡ (Head-of-Line Blocking)</strong>ã€‚</p>
<h3 data-id="heading-2">ENet çš„åšæ³•ï¼ˆå¤šé€šé“ï¼‰</h3>
<p>ENet å…è®¸ä½ åœ¨åŒä¸€ä¸ªè¿æ¥é‡Œå¼€è¾Ÿå¤šæ¡â€œè½¦é“â€ã€‚</p>
<ul>
<li><strong>é€šé“ 0</strong>ï¼šä¸“é—¨ç”¨æ¥å‘èŠå¤©ã€è£…å¤‡è´­ä¹°ç­‰é‡è¦ä¿¡æ¯ã€‚</li>
<li><strong>é€šé“ 1</strong>ï¼šä¸“é—¨ç”¨æ¥å‘ç©å®¶ä½ç½®ã€æœå‘ç­‰å®æ—¶ä¿¡æ¯ã€‚</li>
</ul>
<p>å³ä½¿é€šé“ 0 ä¸Šçš„â€œæ•‘å‘½ï¼â€ä¸¢åŒ…äº†æ­£åœ¨ç­‰å¾…é‡ä¼ ï¼Œé€šé“ 1 ä¸Šçš„ä½ç½®æ›´æ–°ä¾ç„¶ç•…é€šæ— é˜»ã€‚è¿™å°±æ˜¯å¤šé€šé“æœºåˆ¶çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<hr/>
<h2 data-id="heading-3">2. æ ¸å¿ƒæ¦‚å¿µï¼šé€šé“ ID</h2>
<p>åœ¨ ENet ä¸­ï¼Œé€šé“éå¸¸ç®€å•ï¼Œå®ƒä»¬åªæ˜¯ç”¨æ•°å­—ç¼–å·ï¼ˆ0, 1, 2...ï¼‰ã€‚</p>
<ul>
<li><strong>æ•°é‡é™åˆ¶</strong>ï¼šå½“ä½ åˆ›å»º Host æˆ–å‘èµ·è¿æ¥æ—¶ï¼Œä½ å·²ç»æŒ‡å®šäº†æœ€å¤§é€šé“æ•°ï¼ˆé€šå¸¸ 2 ä¸ªå°±å¤Ÿç”¨äº†ï¼Œä¸€ä¸ªæ˜¯å…³é”®é€»è¾‘ï¼Œä¸€ä¸ªæ˜¯å®æ—¶æ•°æ®ï¼‰ã€‚</li>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šé€šé“ 0 ä¸Šçš„åºåˆ—å·å’Œé€šé“ 1 ä¸Šçš„åºåˆ—å·æ˜¯äº’ä¸å¹²æ‰°çš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">3. å®æˆ˜ï¼šä½¿ç”¨å¤šé€šé“</h2>
<p>ä½¿ç”¨é€šé“éå¸¸ç®€å•ï¼Œå®ƒä½“ç°åœ¨å‘é€å’Œæ¥æ”¶çš„ä¸¤ä¸ªç¯èŠ‚ã€‚</p>
<h3 data-id="heading-5">3.1 ç¡®ä¿é€šé“å­˜åœ¨</h3>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬åœ¨ ä¸»æœºç®¡ç† (ENetHost) æˆ– å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer) ä¸­æåˆ°çš„åˆå§‹åŒ–ä»£ç ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è¿™é‡Œçš„ '2' è¡¨ç¤ºæˆ‘ä»¬è¦åœ¨è¿™ä¸ªè¿æ¥ä¸Šåˆ†é… 2 ä¸ªé€šé“ (Channel 0 å’Œ Channel 1)</span>
ENetHost * client = enet_host_create(<span class="hljs-literal">NULL</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<h3 data-id="heading-6">3.2 åœ¨ç‰¹å®šé€šé“å‘é€æ•°æ®</h3>
<p>åœ¨è°ƒç”¨å‘é€å‡½æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ <code>channelID</code>ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// åœºæ™¯ 1ï¼šå‘é€èŠå¤©ä¿¡æ¯ (èµ°é€šé“ 0ï¼Œè¦æ±‚å¯é )</span>
ENetPacket * chatPacket = enet_packet_create(<span class="hljs-string">"Help!"</span>, <span class="hljs-number">6</span>, ENET_PACKET_FLAG_RELIABLE);

<span class="hljs-comment">// å‘é€åˆ°é€šé“ 0</span>
enet_peer_send(peer, <span class="hljs-number">0</span>, chatPacket);
</code></pre>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// åœºæ™¯ 2ï¼šå‘é€ä½ç½®ä¿¡æ¯ (èµ°é€šé“ 1ï¼Œä¸è¦æ±‚å¯é )</span>
<span class="hljs-comment">// å‡è®¾ Position æ˜¯ä¸ªç»“æ„ä½“</span>
ENetPacket * posPacket = enet_packet_create(&amp;myPos, <span class="hljs-keyword">sizeof</span>(myPos), <span class="hljs-number">0</span>);

<span class="hljs-comment">// å‘é€åˆ°é€šé“ 1</span>
enet_peer_send(peer, <span class="hljs-number">1</span>, posPacket);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š
è¿™å°±å¥½æ¯”ä½ åœ¨é‚®å±€å¯„ä¿¡æ—¶ï¼Œå‘Šè¯‰å·¥ä½œäººå‘˜ï¼šâ€œè¿™å°æ€¥ä»¶èµ° VIP çª—å£ï¼ˆé€šé“ 0ï¼‰ï¼Œè¿™å°å¹³ä¿¡èµ°æ™®é€šçª—å£ï¼ˆé€šé“ 1ï¼‰â€ã€‚</p>
<h3 data-id="heading-7">3.3 åœ¨æ¥æ”¶ç«¯åŒºåˆ†é€šé“</h3>
<p>å½“ä½ åœ¨äº‹ä»¶å¾ªç¯ä¸­æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯ä»å“ªä¸ªé€šé“æ¥çš„ï¼Œä»¥ä¾¿å†³å®šå¦‚ä½•å¤„ç†å®ƒã€‚</p>
<pre><code class="hljs language-c" lang="c">ENetEvent event;
<span class="hljs-keyword">while</span> (enet_host_service(host, &amp;event, <span class="hljs-number">1000</span>) &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (event.type == ENET_EVENT_TYPE_RECEIVE) {
        
        <span class="hljs-comment">// æ£€æŸ¥ channelID å­—æ®µ</span>
        <span class="hljs-keyword">if</span> (event.channelID == <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°èŠå¤©ä¿¡æ¯: %s\n"</span>, (<span class="hljs-type">char</span>*)event.packet-&gt;data);
        } 
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.channelID == <span class="hljs-number">1</span>) {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°ä½ç½®æ›´æ–°æ•°æ® (å¤„ç†é€»è¾‘ç•¥)\n"</span>);
        }

        enet_packet_destroy(event.packet);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-8">4. å†…éƒ¨åŸç†è§£æ</h2>
<p>é€šé“åœ¨å†…å­˜ä¸­é•¿ä»€ä¹ˆæ ·ï¼Ÿå‘é€å‡½æ•°åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-9">4.1 é€»è¾‘æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant Peer as ENetPeer
    participant Ch0 as é€šé“ 0 (Chat)
    participant Ch1 as é€šé“ 1 (Pos)
    participant Net as ç½‘ç»œå±‚

    Note over User: ç”¨æˆ·å‘é€ä¸¤ä¸ªåŒ…
    User-&gt;&gt;Peer: enet_peer_send(..., 0, ChatPacket)
    User-&gt;&gt;Peer: enet_peer_send(..., 1, PosPacket)
    
    Peer-&gt;&gt;Ch0: åˆ†é…åºåˆ—å· #5
    Peer-&gt;&gt;Ch1: åˆ†é…åºåˆ—å· #99
    Note right of Peer: åºåˆ—å·æ˜¯ç‹¬ç«‹è®¡æ•°çš„

    Ch0-&gt;&gt;Net: å‘é€ ChatPacket (#5)
    Ch1-&gt;&gt;Net: å‘é€ PosPacket (#99)
    
    Note over Net: å‡è®¾ ChatPacket ä¸¢åŒ…äº†
    
    Net--&gt;&gt;User: PosPacket åˆ°è¾¾å¯¹æ–¹
    Note right of User: å¯¹æ–¹ç«‹å³å¤„ç† PosPacket (#99)&lt;br/&gt;ä¸éœ€è¦ç­‰ ChatPacket (#5)
</code></pre>
<h3 data-id="heading-10">4.2 æ·±å…¥ä»£ç  (enet.h &amp; peer.c)</h3>
<p><strong>1. ENetChannel ç»“æ„ä½“</strong>
åœ¨ <code>enet.h</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>ENetChannel</code> çš„å®šä¹‰ã€‚æ¯ä¸ªé€šé“ä¸»è¦ç»´æŠ¤è‡ªå·±çš„åºåˆ—å·ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: enet/enet.h (ç®€åŒ–)</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">ENetChannel</span>
{</span>
   <span class="hljs-comment">// å‘é€å‡ºå»çš„ä¸‹ä¸€ä¸ªå¯é åŒ…åºå·</span>
   enet_uint16  outgoingReliableSequenceNumber;
   <span class="hljs-comment">// å‘é€å‡ºå»çš„ä¸‹ä¸€ä¸ªä¸å¯é åŒ…åºå·</span>
   enet_uint16  outgoingUnreliableSequenceNumber;
   
   <span class="hljs-comment">// æ¥æ”¶åˆ°çš„åºå·è®°å½•</span>
   enet_uint16  incomingReliableSequenceNumber;
   <span class="hljs-comment">// ... è¿˜æœ‰æ¥æ”¶é˜Ÿåˆ— ...</span>
} ENetChannel;
</code></pre>
<p><strong>2. å¯¹ç­‰èŠ‚ç‚¹ä¸­çš„æ•°ç»„</strong>
<code>ENetPeer</code> ç»“æ„ä½“ä¸­æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„é€šé“æ•°ç»„ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: enet/enet.h (ç®€åŒ–)</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">ENetPeer</span>
{</span> 
   <span class="hljs-comment">// ...</span>
   ENetChannel * channels; <span class="hljs-comment">// é€šé“æ•°ç»„</span>
   <span class="hljs-type">size_t</span>        channelCount; <span class="hljs-comment">// é€šé“æ•°é‡ (ä¾‹å¦‚ 2)</span>
   <span class="hljs-comment">// ...</span>
} ENetPeer;
</code></pre>
<p><strong>3. å‘é€æ—¶çš„é€»è¾‘</strong>
å½“ä½ è°ƒç”¨ <code>enet_peer_send</code> æ—¶ï¼ŒENet ä¼šæ ¹æ®ä½ ä¼ å…¥çš„ <code>channelID</code> æ‰¾åˆ°å¯¹åº”çš„ç»“æ„ä½“ï¼Œå¹¶å¢åŠ <strong>è¯¥é€šé“</strong>çš„è®¡æ•°å™¨ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: peer.c (ç®€åŒ–é€»è¾‘ç¤ºæ„)</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">enet_peer_send</span> <span class="hljs-params">(ENetPeer * peer, enet_uint8 channelID, ENetPacket * packet)</span>
{
   <span class="hljs-comment">// 1. è·å–å¯¹åº”çš„é€šé“å¯¹è±¡</span>
   ENetChannel * channel = &amp; peer -&gt; channels [channelID];

   <span class="hljs-comment">// 2. åˆ›å»ºå‘é€å‘½ä»¤</span>
   ENetOutgoingCommand * command = ...;

   <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šåˆ†é…åºåˆ—å·</span>
   <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯ channel-&gt;... è€Œä¸æ˜¯ peer-&gt;...</span>
   <span class="hljs-comment">// è¿™ä¿è¯äº†ä¸åŒé€šé“çš„åºåˆ—å·äº’ä¸å½±å“</span>
   <span class="hljs-keyword">if</span> (packet-&gt;flags &amp; ENET_PACKET_FLAG_RELIABLE) {
       channel -&gt; outgoingReliableSequenceNumber++;
       command -&gt; reliableSequenceNumber = channel -&gt; outgoingReliableSequenceNumber;
   }
   
   <span class="hljs-comment">// ... å°†å‘½ä»¤æ”¾å…¥å‘é€é˜Ÿåˆ— ...</span>
}
</code></pre>
<h3 data-id="heading-11">4.3 ä¸ºä»€ä¹ˆè¿™èƒ½é˜²æ­¢é˜»å¡ï¼Ÿ</h3>
<p>åœ¨æ¥æ”¶ç«¯ï¼ŒENet åœ¨æ”¶åˆ°åŒ…æ—¶ä¼šæ£€æŸ¥åºåˆ—å·ï¼š</p>
<ul>
<li><strong>å¯¹äºé€šé“ 0</strong>ï¼šå¦‚æœæ”¶åˆ°äº†åºå· #6ï¼Œä½†è¿˜æ²¡æ”¶åˆ° #5ï¼ŒENet ä¼šæŠŠ #6 å…ˆå­˜èµ·æ¥ï¼Œç›´åˆ° #5 åˆ°è¾¾ã€‚è¿™å«<strong>æœ‰åº (Sequenced)</strong>ã€‚</li>
<li><strong>å¯¹äºé€šé“ 1</strong>ï¼šå¦‚æœæ”¶åˆ°äº†åºå· #100ï¼Œå®ƒå®Œå…¨ä¸å…³å¿ƒé€šé“ 0 ç¼ºäº†ä»€ä¹ˆã€‚åªè¦é€šé“ 1 è‡ªå·±çš„åºå·æ˜¯å¯¹çš„ï¼ˆæˆ–è€…å¯¹äºä¸å¯é åŒ…ï¼Œç›´æ¥ä¸¢ç»™ç”¨æˆ·ï¼‰ï¼Œå®ƒå°±ä¼šç«‹å³è§¦å‘ <code>ENET_EVENT_TYPE_RECEIVE</code>ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å¤šé€šé“æœºåˆ¶å®ç°â€œå¹¶è¡Œä¼ è¾“â€çš„ç§˜å¯†ã€‚</p>
<hr/>
<h2 data-id="heading-12">5. æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¸è¦å¼€å¤ªå¤šé€šé“</strong>ï¼šè™½ç„¶ä½ å¯ä»¥å¼€ 255 ä¸ªé€šé“ï¼Œä½†é€šå¸¸ 2 åˆ° 4 ä¸ªå°±è¶³å¤Ÿäº†ã€‚é€šé“è¶Šå¤šï¼Œå†…å­˜å¼€é”€ï¼ˆè™½ç„¶å¾ˆå°ï¼‰å’Œç®¡ç†å¤æ‚åº¦ä¹Ÿä¼šå¢åŠ ã€‚</li>
<li><strong>åˆ†ç±»ç®¡ç†</strong>ï¼š
<ul>
<li><strong>Channel 0</strong>: å…³é”®ç³»ç»Ÿæ¶ˆæ¯ï¼ˆç™»å½•ã€æ–­çº¿ã€èŠå¤©ã€äº¤æ˜“ï¼‰ã€‚å¿…é¡»å¯é ã€‚</li>
<li><strong>Channel 1</strong>: çŠ¶æ€åŒæ­¥ï¼ˆç§»åŠ¨ã€æ—‹è½¬ï¼‰ã€‚ä¸å¯é ï¼Œè¿½æ±‚å®æ—¶ã€‚</li>
<li><strong>Channel 2</strong>: å¤§æ–‡ä»¶ä¼ è¾“ï¼ˆå¦‚åœ°å›¾ä¸‹è½½ï¼‰ã€‚å¯é ï¼Œä½†ä¼˜å…ˆçº§ä½ï¼ˆè¿™æ˜¯è¿›é˜¶ç”¨æ³•ï¼Œç»“åˆå¸¦å®½é™åˆ¶ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä¸¤ç«¯ä¸€è‡´</strong>ï¼šç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶ï¼Œåˆ†é…çš„ <code>channelCount</code> æ˜¯ä¸€è‡´çš„ï¼Œæˆ–è€…è‡³å°‘å‘é€æ–¹çš„ ID ä¸è¦è¶…è¿‡æ¥æ”¶æ–¹çš„æœ€å¤§ IDï¼Œå¦åˆ™å‘é€ä¼šå¤±è´¥ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-13">6. æ€»ç»“</h2>
<p>åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š</p>
<ul>
<li><strong>å¤šé€šé“ (Channels)</strong> æ˜¯ä¸ºäº†è§£å†³â€œé˜Ÿå¤´é˜»å¡â€é—®é¢˜ï¼Œè®©ä¸åŒç±»å‹çš„æ•°æ®äº’ä¸å¹²æ‰°ã€‚</li>
<li>é€šé“æœ¬è´¨ä¸Šæ˜¯ç‹¬ç«‹è®¡æ•°çš„<strong>åºåˆ—å·ç®¡ç†å™¨</strong>ã€‚</li>
<li>ä½¿ç”¨ <code>enet_peer_send</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡å®šæ•°æ®èµ°å“ªæ¡â€œè½¦é“â€ã€‚</li>
<li>åœ¨æ¥æ”¶ç«¯çš„ <code>event.channelID</code> ä¸­åŒºåˆ†æ•°æ®æ¥æºã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ•°æ®åŒ…å·²ç»å¯ä»¥é«˜æ•ˆã€æœ‰åºï¼ˆæˆ–æ— åºï¼‰åœ°åœ¨ç½‘ç»œä¸­ç©¿æ¢­äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå»ä¸æ–­åœ°ä»ç½‘ç»œä¸­â€œæâ€å‡ºè¿™äº›æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬çš„ç¨‹åºæ€ä¹ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥è¯»æ•°æ®ï¼Œä»€ä¹ˆæ—¶å€™è¯¥å‘æ•°æ®ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„]]></title>    <link>https://juejin.cn/post/7575083657994649627</link>    <guid>https://juejin.cn/post/7575083657994649627</guid>    <pubDate>2025-11-23T02:36:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994649627" data-draft-id="7575102209605615642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„"/> <!----> <meta itemprop="datePublished" content="2025-11-23T02:36:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:36:58.000Z" title="Sun Nov 23 2025 02:36:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„</h2>
<blockquote>
<p>2025å¹´ï¼Œäº‘åŸç”Ÿå­˜å‚¨é¢†åŸŸè¿æ¥é‡å¤§çªç ´ã€‚åŸºäºRustè¯­è¨€æ„å»ºçš„<strong>RustFS</strong>å‡­å€Ÿå…¶â€‹<strong>4Kéšæœºè¯»1,580K IOPS</strong>â€‹ï¼ˆæ¯”MinIOå¿«â€‹<strong>42%</strong> ï¼‰çš„æ€§èƒ½è¡¨ç°ï¼Œä¸Kubernetesæ·±åº¦é›†æˆï¼Œä¸ºä¼ä¸šæä¾›äº†ä¸€å¥—é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„äº‘åŸç”Ÿå­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€RustFSæ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä½•æ˜¯äº‘åŸç”Ÿå­˜å‚¨çš„ç†æƒ³é€‰æ‹©ï¼Ÿ</h3>
<p>åœ¨å¼€å§‹å®æˆ˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£RustFSåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­çš„ç‹¬ç‰¹ä»·å€¼ã€‚ä¸ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆç›¸æ¯”ï¼ŒRustFSåœ¨æ€§èƒ½ã€èµ„æºå ç”¨å’Œå…¼å®¹æ€§æ–¹é¢å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-2">1.1 æ€§èƒ½æŒ‡æ ‡å…¨é¢é¢†å…ˆ</h4>
<p>æ ¹æ®åŸºå‡†æµ‹è¯•æ•°æ®ï¼ŒRustFSåœ¨å…³é”®æ€§èƒ½æŒ‡æ ‡ä¸Šå®ç°å…¨é¢çªç ´ï¼š</p>









































<table><thead><tr><th><strong>æ€§èƒ½ç»´åº¦</strong></th><th><strong>RustFS</strong></th><th><strong>ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆ</strong></th><th><strong>ä¼˜åŠ¿å¹…åº¦</strong></th></tr></thead><tbody><tr><td>4Kéšæœºè¯»IOPS(QD128)</td><td>1,580K</td><td>1,112K</td><td><strong>+42%</strong></td></tr><tr><td>å†…å­˜å ç”¨(ç©ºé—²çŠ¶æ€)</td><td>&lt;100MB</td><td>~300MB</td><td><strong>å‡å°‘67%</strong></td></tr><tr><td>å¯åŠ¨æ—¶é—´(å•èŠ‚ç‚¹)</td><td>8ç§’</td><td>45ç§’+</td><td><strong>å¿«5.6å€</strong></td></tr><tr><td>S3åè®®å…¼å®¹æ€§</td><td>100%å…¼å®¹</td><td>éƒ¨åˆ†å…¼å®¹</td><td><strong>æ— ç¼è¿ç§»</strong></td></tr><tr><td>è®¸å¯è¯å‹å¥½åº¦</td><td>Apache 2.0</td><td>AGPLv3ç­‰</td><td><strong>å•†ä¸šå‹å¥½</strong></td></tr></tbody></table>
<p>RustFSçš„å“è¶Šæ€§èƒ½æºäºRustè¯­è¨€çš„<strong>é›¶æˆæœ¬æŠ½è±¡</strong>å’Œ<strong>å†…å­˜å®‰å…¨</strong>ç‰¹æ€§ã€‚å…¶æ‰€æœ‰æƒæ¨¡å‹åœ¨ç¼–è¯‘æœŸæ¶ˆé™¤å†…å­˜å®‰å…¨é—®é¢˜ï¼Œæ— éœ€åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå½»åº•é¿å…äº†æ€§èƒ½æŠ–åŠ¨ã€‚</p>
<h4 data-id="heading-3">1.2 äº‘åŸç”Ÿé€‚é…ä¼˜åŠ¿</h4>
<p>RustFSåœ¨è®¾è®¡ä¹‹åˆå°±å……åˆ†è€ƒè™‘äº‘åŸç”Ÿç¯å¢ƒéœ€æ±‚ï¼š</p>
<ul>
<li>â€‹<strong>è½»é‡çº§è®¾è®¡</strong>â€‹ï¼šäºŒè¿›åˆ¶æ–‡ä»¶&lt;100MBï¼Œé€‚åˆè¾¹ç¼˜è®¡ç®—å’Œèµ„æºå—é™ç¯å¢ƒ</li>
<li>â€‹<strong>ARM/x86åŒæ¶æ„æ”¯æŒ</strong>ï¼šå®Œç¾é€‚é…å¤šæ¶æ„K8sé›†ç¾¤</li>
<li>â€‹<strong>å®¹å™¨åŒ–ä¼˜å…ˆ</strong>ï¼šæä¾›å®˜æ–¹Dockeré•œåƒï¼Œæ”¯æŒå¤šç§ç¼–æ’å·¥å…·</li>
<li>â€‹<strong>å£°æ˜å¼API</strong>ï¼šä¸K8sçš„å£°æ˜å¼ç®¡ç†ç†å¿µé«˜åº¦å¥‘åˆ</li>
</ul>
<p>æŸå¤§å‹ç”µå•†å¹³å°å®æµ‹æ•°æ®æ˜¾ç¤ºï¼Œå°†ç”Ÿäº§ç¯å¢ƒä»ä¼ ç»Ÿå­˜å‚¨è¿ç§»åˆ°RustFSåï¼ŒAIæ¨¡å‹è®­ç»ƒæ—¶é—´ç¼©çŸ­â€‹<strong>30%</strong> â€‹ï¼Œèµ„æºæˆæœ¬é™ä½â€‹<strong>40%</strong> ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç¯å¢ƒå‡†å¤‡ä¸é›†ç¾¤è§„åˆ’</h3>
<h4 data-id="heading-5">2.1 ç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚</h4>
<p>æ„å»ºé«˜å¯ç”¨RustFSé›†ç¾¤éœ€è¦æ»¡è¶³ä»¥ä¸‹åŸºç¡€è¦æ±‚ï¼š</p>
<p>â€‹<strong>ç¡¬ä»¶é…ç½®æ¨è</strong>ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒï¼š4æ ¸CPUï¼Œ8GBå†…å­˜ï¼Œ50GB SSDå­˜å‚¨</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼š8+æ ¸CPUï¼Œ16+GBå†…å­˜ï¼Œ100+GB NVMe SSDå­˜å‚¨</li>
<li>ç½‘ç»œï¼šèŠ‚ç‚¹é—´å»¶è¿Ÿ&lt;5msï¼Œä¸‡å…†ç½‘ç»œæ¨è</li>
</ul>
<p>â€‹<strong>è½¯ä»¶ä¾èµ–</strong>ï¼š</p>
<ul>
<li>Kubernetesï¼šv1.20+ï¼ˆæ¨èv1.24+ï¼‰</li>
<li>å®¹å™¨è¿è¡Œæ—¶ï¼šDocker 20.10+æˆ–containerd 1.4+</li>
<li>ç½‘ç»œæ’ä»¶ï¼šCalicoã€Flannelç­‰ï¼ˆéœ€æ”¯æŒNetworkPolicyï¼‰</li>
<li>è´Ÿè½½å‡è¡¡ï¼šMetalLBã€äº‘å‚å•†LBæˆ–HAProxy</li>
</ul>
<h4 data-id="heading-6">2.2 é›†ç¾¤æ¶æ„è®¾è®¡</h4>
<p>é«˜å¯ç”¨RustFSé›†ç¾¤æ¨èé‡‡ç”¨å¤šèŠ‚ç‚¹éƒ¨ç½²æ¶æ„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Master Node   â”‚    â”‚   Master Node   â”‚    â”‚   Master Node   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚    â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚    â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                         â”‚
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Load       â”‚
                          â”‚ Balancer    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RustFS      â”‚    â”‚ RustFS      â”‚    â”‚ RustFS      â”‚
    â”‚ Node <span class="hljs-number">1</span>     â”‚    â”‚ Node <span class="hljs-number">2</span>     â”‚    â”‚ Node <span class="hljs-number">3</span>     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™ç§æ¶æ„ç¡®ä¿æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢å‡å®ç°é«˜å¯ç”¨ï¼Œå•ç‚¹æ•…éšœä¸ä¼šå½±å“é›†ç¾¤æ•´ä½“æœåŠ¡èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-7">ä¸‰ã€Kubernetesé›†ç¾¤éƒ¨ç½²å®æˆ˜</h3>
<h4 data-id="heading-8">3.1 åŸºç¡€ç¯å¢ƒé…ç½®</h4>
<p>é¦–å…ˆç¡®ä¿Kubernetesé›†ç¾¤å°±ç»ªï¼Œå¹¶é…ç½®å¿…è¦çš„å­˜å‚¨ç±»ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># rustfs-storageclass.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">storage.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">StorageClass</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-local-storage</span>
<span class="hljs-attr">provisioner:</span> <span class="hljs-string">kubernetes.io/no-provisioner</span>
<span class="hljs-attr">volumeBindingMode:</span> <span class="hljs-string">WaitForFirstConsumer</span>
<span class="hljs-attr">allowVolumeExpansion:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>åº”ç”¨é…ç½®ï¼š</p>
<pre><code class="hljs">kubectl apply -f rustfs-storageclass.yaml
</code></pre>
<h4 data-id="heading-9">3.2 Helmå›¾è¡¨éƒ¨ç½²RustFSé›†ç¾¤</h4>
<p>Helmæ˜¯éƒ¨ç½²RustFSåˆ°K8sé›†ç¾¤çš„æ¨èæ–¹å¼ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†éƒ¨ç½²æµç¨‹ï¼š</p>
<p>â€‹<strong>æ·»åŠ Helmä»“åº“å¹¶åˆ›å»ºé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ·»åŠ Helmä»“åº“ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
helm repo <span class="hljs-keyword">add</span> rustfs https:<span class="hljs-comment">//charts.rustfs.io</span>
helm repo update
</code></pre>
<p>åˆ›å»ºè‡ªå®šä¹‰values.yamlé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># values.yaml</span>
<span class="hljs-attr">global:</span>
  <span class="hljs-attr">storageClass:</span> <span class="hljs-string">"rustfs-local-storage"</span>
  
<span class="hljs-attr">replicaCount:</span> <span class="hljs-number">3</span>

<span class="hljs-attr">image:</span>
  <span class="hljs-attr">repository:</span> <span class="hljs-string">rustfs/rustfs</span>
  <span class="hljs-attr">tag:</span> <span class="hljs-string">latest</span>
  <span class="hljs-attr">pullPolicy:</span> <span class="hljs-string">IfNotPresent</span>

<span class="hljs-attr">resources:</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"2"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"4Gi"</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"1"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"2Gi"</span>

<span class="hljs-attr">persistence:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">size:</span> <span class="hljs-string">"100Gi"</span>
  <span class="hljs-attr">accessMode:</span> <span class="hljs-string">ReadWriteOnce</span>

<span class="hljs-attr">configuration:</span>
  <span class="hljs-attr">accessKey:</span> <span class="hljs-string">"admin"</span>
  <span class="hljs-attr">secretKey:</span> <span class="hljs-string">"your_strong_password_here"</span>
  <span class="hljs-attr">consoleEnable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">regions:</span> [<span class="hljs-string">"us-east-1"</span>]

<span class="hljs-attr">service:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span>
  <span class="hljs-attr">apiPort:</span> <span class="hljs-number">9000</span>
  <span class="hljs-attr">consolePort:</span> <span class="hljs-number">9001</span>

<span class="hljs-attr">ingress:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">nginx.ingress.kubernetes.io/proxy-body-size:</span> <span class="hljs-string">"1024m"</span>
  <span class="hljs-attr">hosts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">host:</span> <span class="hljs-string">rustfs.example.com</span>
      <span class="hljs-attr">paths:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/</span>
          <span class="hljs-attr">pathType:</span> <span class="hljs-string">Prefix</span>

<span class="hljs-comment"># é«˜å¯ç”¨é…ç½®</span>
<span class="hljs-attr">topologySpreadConstraints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">maxSkew:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
    <span class="hljs-attr">whenUnsatisfiable:</span> <span class="hljs-string">DoNotSchedule</span>

<span class="hljs-attr">affinity:</span>
  <span class="hljs-attr">podAntiAffinity:</span>
    <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">podAffinityTerm:</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchExpressions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span>
            <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
            <span class="hljs-attr">values:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"kubernetes.io/hostname"</span>
</code></pre>
<p>â€‹<strong>å®‰è£…RustFSé›†ç¾¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå‘½åç©ºé—´</span>
kubectl create namespace rustfs

<span class="hljs-comment"># å®‰è£…RustFSé›†ç¾¤</span>
helm install rustfs-cluster rustfs/rustfs \
  --namespace rustfs \
  --values values.yaml \
  --<span class="hljs-built_in">wait</span> \
  --<span class="hljs-built_in">timeout</span> 10m
</code></pre>
<h4 data-id="heading-10">3.3 éªŒè¯éƒ¨ç½²çŠ¶æ€</h4>
<p>éƒ¨ç½²å®Œæˆåï¼Œéœ€è¦å…¨é¢éªŒè¯é›†ç¾¤çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹PodçŠ¶æ€</span>
kubectl get pods -n rustfs -o wide -w

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
kubectl get svc -n rustfs

<span class="hljs-comment"># æŸ¥çœ‹æŒä¹…å·å£°æ˜</span>
kubectl get pvc -n rustfs

<span class="hljs-comment"># æ£€æŸ¥é›†ç¾¤æ—¥å¿—</span>
kubectl logs -n rustfs deployment/rustfs-cluster --<span class="hljs-built_in">tail</span>=100

<span class="hljs-comment"># éªŒè¯èŠ‚ç‚¹å¥åº·çŠ¶æ€</span>
kubectl <span class="hljs-built_in">exec</span> -n rustfs deployment/rustfs-cluster -- rustfs-admin cluster info
</code></pre>
<p>é¢„æœŸè¾“å‡ºåº”æ˜¾ç¤ºæ‰€æœ‰Podå¤„äºRunningçŠ¶æ€ï¼ŒæœåŠ¡æ­£å¸¸æš´éœ²ï¼Œå­˜å‚¨å·æ­£ç¡®æŒ‚è½½ã€‚</p>
<h3 data-id="heading-11">å››ã€é«˜å¯ç”¨ä¸æ€§èƒ½ä¼˜åŒ–é…ç½®</h3>
<h4 data-id="heading-12">4.1 æ‹“æ‰‘åˆ†å¸ƒçº¦æŸé…ç½®</h4>
<p>ä¸ºç¡®ä¿RustFS Podåœ¨é›†ç¾¤ä¸­å‡åŒ€åˆ†å¸ƒï¼Œéœ€è¦é…ç½®æ‹“æ‰‘åˆ†å¸ƒçº¦æŸï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># topology-spread.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">topologySpreadConstraints:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">maxSkew:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
        <span class="hljs-attr">whenUnsatisfiable:</span> <span class="hljs-string">DoNotSchedule</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchLabels:</span>
            <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
</code></pre>
<p>è¿™ç§é…ç½®ç¡®ä¿RustFSå®ä¾‹åœ¨ä¸åŒæ•…éšœåŸŸï¼ˆå¦‚å¯ç”¨åŒºï¼‰é—´å‡åŒ€åˆ†å¸ƒï¼Œæé«˜é›†ç¾¤å®¹é”™èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-13">4.2 èµ„æºé…é¢ä¸é™åˆ¶</h4>
<p>ä¸ºé˜²æ­¢èµ„æºç«äº‰ï¼Œéœ€è¦è®¾ç½®åˆç†çš„èµ„æºé…é¢ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># resource-quota.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ResourceQuota</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-resource-quota</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">hard:</span>
    <span class="hljs-attr">requests.cpu:</span> <span class="hljs-string">"8"</span>
    <span class="hljs-attr">requests.memory:</span> <span class="hljs-string">"16Gi"</span>
    <span class="hljs-attr">limits.cpu:</span> <span class="hljs-string">"16"</span>
    <span class="hljs-attr">limits.memory:</span> <span class="hljs-string">"32Gi"</span>
    <span class="hljs-attr">persistentvolumeclaims:</span> <span class="hljs-string">"10"</span>
    <span class="hljs-attr">requests.storage:</span> <span class="hljs-string">"1Ti"</span>
</code></pre>
<h4 data-id="heading-14">4.3 è‡ªåŠ¨ä¼¸ç¼©é…ç½®</h4>
<p>æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´RustFSå®ä¾‹æ•°é‡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># hpa.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">autoscaling/v2</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">HorizontalPodAutoscaler</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-hpa</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">scaleTargetRef:</span>
    <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">minReplicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">maxReplicas:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">metrics:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Resource</span>
    <span class="hljs-attr">resource:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">cpu</span>
      <span class="hljs-attr">target:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">Utilization</span>
        <span class="hljs-attr">averageUtilization:</span> <span class="hljs-number">70</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Resource</span>
    <span class="hljs-attr">resource:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">memory</span>
      <span class="hljs-attr">target:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">Utilization</span>
        <span class="hljs-attr">averageUtilization:</span> <span class="hljs-number">80</span>
  <span class="hljs-attr">behavior:</span>
    <span class="hljs-attr">scaleDown:</span>
      <span class="hljs-attr">stabilizationWindowSeconds:</span> <span class="hljs-number">300</span>
      <span class="hljs-attr">policies:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Percent</span>
        <span class="hljs-attr">value:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">60</span>
</code></pre>
<h3 data-id="heading-15">äº”ã€ç½‘ç»œä¸å®‰å…¨é…ç½®</h3>
<h4 data-id="heading-16">5.1 ç½‘ç»œç­–ç•¥é…ç½®</h4>
<p>é™åˆ¶ä¸å¿…è¦çš„ç½‘ç»œè®¿é—®ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># network-policy.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">NetworkPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-network-policy</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">podSelector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">policyTypes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Ingress</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Egress</span>
  <span class="hljs-attr">ingress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span>
    <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span> {}
  <span class="hljs-attr">egress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">ipBlock:</span>
        <span class="hljs-attr">cidr:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/0</span>
</code></pre>
<h4 data-id="heading-17">5.2 TLSè¯ä¹¦é…ç½®</h4>
<p>ä¸ºRustFSæœåŠ¡é…ç½®HTTPSåŠ å¯†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Let's Encryptæˆ–å†…éƒ¨CAï¼‰</span>
<span class="hljs-string">openssl</span> <span class="hljs-string">req</span> <span class="hljs-string">-x509</span> <span class="hljs-string">-nodes</span> <span class="hljs-string">-days</span> <span class="hljs-number">365</span> <span class="hljs-string">-newkey</span> <span class="hljs-string">rsa:2048</span> <span class="hljs-string">\</span>
  <span class="hljs-string">-keyout</span> <span class="hljs-string">tls.key</span> <span class="hljs-string">-out</span> <span class="hljs-string">tls.crt</span> <span class="hljs-string">-subj</span> <span class="hljs-string">"/CN=rustfs.example.com"</span>

<span class="hljs-comment"># åˆ›å»ºK8s Secret</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">create</span> <span class="hljs-string">secret</span> <span class="hljs-string">tls</span> <span class="hljs-string">rustfs-tls</span> <span class="hljs-string">\</span>
  <span class="hljs-string">--key</span> <span class="hljs-string">tls.key</span> <span class="hljs-string">\</span>
  <span class="hljs-string">--cert</span> <span class="hljs-string">tls.crt</span> <span class="hljs-string">\</span>
  <span class="hljs-string">-n</span> <span class="hljs-string">rustfs</span>
</code></pre>
<h3 data-id="heading-18">å…­ã€å­˜å‚¨ä¼˜åŒ–ä¸å®è·µ</h3>
<h4 data-id="heading-19">6.1 æŒä¹…åŒ–å­˜å‚¨é…ç½®</h4>
<p>RustFSéœ€è¦å¯é çš„æŒä¹…åŒ–å­˜å‚¨ä¿éšœæ•°æ®å®‰å…¨ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># pv-local-ssd.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-pv-01</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">local</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">capacity:</span>
    <span class="hljs-attr">storage:</span> <span class="hljs-string">100Gi</span>
  <span class="hljs-attr">accessModes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">persistentVolumeReclaimPolicy:</span> <span class="hljs-string">Retain</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">rustfs-local-storage</span>
  <span class="hljs-attr">local:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/mnt/ssd/rustfs01</span>
  <span class="hljs-attr">nodeAffinity:</span>
    <span class="hljs-attr">required:</span>
      <span class="hljs-attr">nodeSelectorTerms:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">matchExpressions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">kubernetes.io/hostname</span>
          <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
          <span class="hljs-attr">values:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">node-01</span>
</code></pre>
<h4 data-id="heading-20">6.2 æ•°æ®å¤‡ä»½ç­–ç•¥</h4>
<p>å®ç°è‡ªåŠ¨åŒ–çš„æ•°æ®å¤‡ä»½æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># backup-cronjob.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">CronJob</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-backup</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">schedule:</span> <span class="hljs-string">"0 2 * * *"</span>
  <span class="hljs-attr">jobTemplate:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">spec:</span>
          <span class="hljs-attr">containers:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup</span>
            <span class="hljs-attr">image:</span> <span class="hljs-string">alpine/aws-cli</span>
            <span class="hljs-attr">command:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">/bin/sh</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">-c</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">|
              # å¤‡ä»½å…ƒæ•°æ®
              aws s3 sync s3://metadata-bucket /backup-metadata \
                --endpoint-url http://rustfs-cluster:9000
</span>              
              <span class="hljs-comment"># åˆ›å»ºæ—¶é—´æˆ³æ ‡è®°</span>
              <span class="hljs-string">echo</span> <span class="hljs-string">"Backup completed at $(date)"</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/backup-status/status.txt</span>
            <span class="hljs-attr">volumeMounts:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup-storage</span>
              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/backup-metadata</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">status-storage</span>
              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/backup-status</span>
          <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">OnFailure</span>
          <span class="hljs-attr">volumes:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup-storage</span>
            <span class="hljs-attr">persistentVolumeClaim:</span>
              <span class="hljs-attr">claimName:</span> <span class="hljs-string">rustfs-backup-pvc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">status-storage</span>
            <span class="hljs-attr">persistentVolumeClaim:</span>
              <span class="hljs-attr">claimName:</span> <span class="hljs-string">backup-status-pvc</span>
</code></pre>
<h3 data-id="heading-21">ä¸ƒã€ç›‘æ§ä¸è¿ç»´</h3>
<h4 data-id="heading-22">7.1 ç›‘æ§ä½“ç³»æ­å»º</h4>
<p>é›†æˆPrometheuså’ŒGrafanaå®ç°å…¨æ–¹ä½ç›‘æ§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># service-monitor.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">monitoring.coreos.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceMonitor</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-monitor</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">endpoints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">api</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">scrapeTimeout:</span> <span class="hljs-string">25s</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/metrics</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">console</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">scrapeTimeout:</span> <span class="hljs-string">25s</span>
</code></pre>
<h4 data-id="heading-23">7.2 æ—¥å¿—æ”¶é›†é…ç½®</h4>
<p>å®ç°é›†ä¸­å¼æ—¥å¿—ç®¡ç†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># logging-sidecar.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/rustfs:latest</span>
        <span class="hljs-comment"># ... ä¸»å®¹å™¨é…ç½®</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">log-sidecar</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">fluent/fluentd:latest</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-logs</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/log/rustfs</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">FLUENTD_CONF</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">|
            &lt;source&gt;
              @type tail
              path /var/log/rustfs/rustfs.log
              pos_file /var/log/rustfs/rustfs.log.pos
              tag rustfs
              format none
            &lt;/source&gt;
            &lt;match rustfs&gt;
              @type forward
              &lt;server&gt;
                host elasticsearch-logging
                port 9200
              &lt;/server&gt;
            &lt;/match&gt;
</span>      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-logs</span>
        <span class="hljs-attr">emptyDir:</span> {}
</code></pre>
<h3 data-id="heading-24">å…«ã€æ•…éšœæ’æŸ¥ä¸æ€§èƒ½è°ƒä¼˜</h3>
<h4 data-id="heading-25">8.1 å¸¸è§é—®é¢˜è¯Šæ–­</h4>
<p>â€‹<strong>Podå¯åŠ¨å¤±è´¥æ’æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†äº‹ä»¶ä¿¡æ¯</span>
kubectl describe pod -n rustfs &lt;pod-name&gt;

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
kubectl logs -n rustfs &lt;pod-name&gt; -c rustfs

<span class="hljs-comment"># æ£€æŸ¥èµ„æºä½¿ç”¨æƒ…å†µ</span>
kubectl top pods -n rustfs
</code></pre>
<p>â€‹<strong>æŒä¹…å·é—®é¢˜æ’æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å­˜å‚¨ç±»</span>
kubectl get storageclass

<span class="hljs-comment"># æ£€æŸ¥æŒä¹…å·å£°æ˜çŠ¶æ€</span>
kubectl get pvc -n rustfs

<span class="hljs-comment"># æŸ¥çœ‹æŒä¹…å·è¯¦æƒ…</span>
kubectl get pv
</code></pre>
<h4 data-id="heading-26">8.2 æ€§èƒ½è°ƒä¼˜å»ºè®®</h4>
<p>æ ¹æ®å®é™…è´Ÿè½½ä¼˜åŒ–RustFSé…ç½®ï¼š</p>
<p>â€‹<strong>é«˜æ€§èƒ½é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">configuration:</span>
  <span class="hljs-attr">cacheSize:</span> <span class="hljs-string">"2Gi"</span>
  <span class="hljs-attr">poolSize:</span> <span class="hljs-number">16</span>
  <span class="hljs-attr">compression:</span> <span class="hljs-string">"lz4"</span>
  <span class="hljs-attr">maxConcurrentUploads:</span> <span class="hljs-number">100</span>
  <span class="hljs-attr">multipartThreshold:</span> <span class="hljs-string">"64MB"</span>
</code></pre>
<p>â€‹<strong>ç½‘ç»œä¼˜åŒ–å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># é’ˆå¯¹é«˜é€Ÿç½‘ç»œç¯å¢ƒä¼˜åŒ–</span>
<span class="hljs-attr">env:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_NETWORK_THREADS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"16"</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_IO_THREADS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"32"</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_MAX_CONNECTIONS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"1000"</span>
</code></pre>
<h3 data-id="heading-27">ä¹ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-28">9.1 å®‰å…¨åŠ å›ºå»ºè®®</h4>
<ul>
<li>â€‹<strong>å®šæœŸè½®æ¢å¯†é’¥</strong>ï¼šæ¯æœˆæ›´æ–°è®¿é—®å¯†é’¥</li>
<li>â€‹<strong>å¯ç”¨TLSåŠ å¯†</strong>ï¼šä¸ºæ‰€æœ‰æµé‡å¯ç”¨HTTPS</li>
<li>â€‹<strong>ç½‘ç»œéš”ç¦»</strong>ï¼šä½¿ç”¨ç½‘ç»œç­–ç•¥é™åˆ¶è®¿é—®æ¥æº</li>
<li>â€‹<strong>å®¡è®¡æ—¥å¿—</strong>ï¼šå¯ç”¨å¹¶å®šæœŸæ£€æŸ¥å®¡è®¡æ—¥å¿—</li>
<li>â€‹<strong>å®šæœŸå¤‡ä»½</strong>ï¼šå®æ–½3-2-1å¤‡ä»½ç­–ç•¥ï¼ˆ3ä¸ªå‰¯æœ¬ï¼Œ2ç§ä»‹è´¨ï¼Œ1ä¸ªç¦»çº¿ï¼‰</li>
</ul>
<h4 data-id="heading-29">9.2 é«˜å¯ç”¨æ¶æ„å»ºè®®</h4>
<p>å¯¹äºå…³é”®ä¸šåŠ¡åœºæ™¯ï¼Œæ¨èé‡‡ç”¨å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¤šå¯ç”¨åŒºäº²å’Œæ€§é…ç½®</span>
<span class="hljs-attr">affinity:</span>
  <span class="hljs-attr">podAntiAffinity:</span>
    <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">podAffinityTerm:</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchExpressions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span>
            <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
            <span class="hljs-attr">values:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
</code></pre>
<h4 data-id="heading-30">9.3 å®¹é‡è§„åˆ’ä¸æ‰©å±•</h4>
<p>â€‹<strong>å®¹é‡è§„åˆ’å»ºè®®</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®èŠ‚ç‚¹ï¼šæ¯100ä¸‡å¯¹è±¡éœ€è¦1GBå†…å­˜</li>
<li>æ•°æ®èŠ‚ç‚¹ï¼šæ ¹æ®å®é™…å­˜å‚¨éœ€æ±‚é…ç½®ï¼Œé¢„ç•™20%æ‰©å±•ç©ºé—´</li>
<li>ç½‘ç»œå¸¦å®½ï¼šç¡®ä¿å†…ç½‘å¸¦å®½æ»¡è¶³å³°å€¼ä¼ è¾“éœ€æ±‚</li>
</ul>
<p>â€‹<strong>æ°´å¹³æ‰©å±•æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>æ‰©å±•å…ƒæ•°æ®é›†ç¾¤ï¼šå¢åŠ å…ƒæ•°æ®èŠ‚ç‚¹æå‡å…ƒæ•°æ®å¤„ç†èƒ½åŠ›</li>
<li>å¢åŠ æ•°æ®èŠ‚ç‚¹ï¼šæ‰©å±•å­˜å‚¨å®¹é‡å’ŒIOPSæ€§èƒ½</li>
<li>è°ƒæ•´åˆ†ç‰‡ç­–ç•¥ï¼šæ ¹æ®æ•°æ®è®¿é—®æ¨¡å¼ä¼˜åŒ–æ•°æ®åˆ†å¸ƒ</li>
</ol>
<h3 data-id="heading-31">åã€æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å®æˆ˜æŒ‡å—ï¼Œæˆ‘ä»¬å®Œæ•´å±•ç¤ºäº†åŸºäºRustFSå’ŒKubernetesæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„çš„å…¨è¿‡ç¨‹ã€‚RustFSå‡­å€Ÿå…¶â€‹<strong>å“è¶Šçš„æ€§èƒ½</strong>â€‹ã€<strong>äº‘åŸç”Ÿå‹å¥½æ¶æ„</strong>å’Œâ€‹<strong>å®Œå–„çš„S3å…¼å®¹æ€§</strong>ï¼Œæˆä¸ºç°ä»£äº‘åŸç”Ÿåº”ç”¨çš„ç†æƒ³å­˜å‚¨é€‰æ‹©ã€‚</p>
<p>â€‹<strong>å…³é”®æ”¶è·</strong>ï¼š</p>
<ol>
<li>â€‹<strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šä½¿ç”¨Helmå¯åœ¨10åˆ†é’Ÿå†…å®Œæˆç”Ÿäº§çº§é›†ç¾¤éƒ¨ç½²</li>
<li>â€‹<strong>é«˜å¯ç”¨ä¿éšœ</strong>ï¼šé€šè¿‡å¤šèŠ‚ç‚¹éƒ¨ç½²å’Œæ‹“æ‰‘åˆ†å¸ƒçº¦æŸå®ç°æ•…éšœè‡ªåŠ¨æ¢å¤</li>
<li>â€‹<strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆç†çš„èµ„æºé…ç½®å’Œå‚æ•°è°ƒä¼˜å¯å……åˆ†å‘æŒ¥RustFSæ€§èƒ½ä¼˜åŠ¿</li>
<li>â€‹<strong>è¿ç»´ä¾¿æ·</strong>ï¼šä¸°å¯Œçš„ç›‘æ§å’Œç®¡ç†å·¥å…·ç®€åŒ–æ—¥å¸¸è¿ç»´å¤æ‚åº¦</li>
</ol>
<p>éšç€äº‘åŸç”ŸæŠ€æœ¯çš„æ™®åŠï¼ŒRustFSä¸Kubernetesçš„æ·±åº¦é›†æˆå°†ä¸ºä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹ä¸­æä¾›å¼ºæœ‰åŠ›çš„å­˜å‚¨åŸºç¡€è®¾æ–½æ”¯æ’‘ã€‚å…¶å¼€æºç‰¹æ€§å’Œæ´»è·ƒçš„ç¤¾åŒºç”Ÿæ€ï¼Œç¡®ä¿äº†æŠ€æœ¯çš„æŒç»­æ¼”è¿›å’Œæ”¯æŒä¿éšœã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®]]></title>    <link>https://juejin.cn/post/7575313772987957289</link>    <guid>https://juejin.cn/post/7575313772987957289</guid>    <pubDate>2025-11-23T03:29:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575313772987957289" data-draft-id="7575655132747890724" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,Vite,Vue.js"/> <meta itemprop="datePublished" content="2025-11-23T03:29:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¬¨ç¬¨ç‹—åå™¬è€…"/> <meta itemprop="url" content="https://juejin.cn/user/245921884145240"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/245921884145240/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¬¨ç¬¨ç‹—åå™¬è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:29:51.000Z" title="Sun Nov 23 2025 03:29:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨ <code>uniapp askç¤¾åŒº</code> å›ç­”é—®é¢˜ï¼Œä¸å°‘å¼€å‘è€…éƒ½å’¨è¯¢åˆ°äº†å¦‚ä½•é…ç½® <code>ç»„ä»¶</code> ç”Ÿæˆçš„ <code>jsonæ–‡ä»¶</code> è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ç»è¿‡è·ŸåŒäº‹çš„äº¤æµã€è‡ªå·±çš„å®è·µä»¥åŠå¼€å‘è€…çš„åé¦ˆåï¼Œæˆ‘æ•´ç†äº†ä¸‹é¢çš„è§£å†³æ€è·¯å’Œæ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">å‰ç½®çŸ¥è¯†</h2>
<p><code>uniapp</code> ç¼–è¯‘åˆ° <code>å°ç¨‹åº</code>ï¼Œä¸€ä¸ª vue ç»„ä»¶ç¼–è¯‘ç»“æŸä¹‹åä¼šç”Ÿæˆå››ä¸ªæ–‡ä»¶ï¼Œä»¥å¾®ä¿¡å°ç¨‹åºä¸¾ä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c10a82ad85941b39552f5732b30e494~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56yo56yo54uX5ZCe5Zms6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473510&amp;x-signature=Y5szfus3bxDvYw%2Ba1EWuxaDKZTE%3D" alt="image.png" loading="lazy"/></p>
<p>ç”Ÿæˆçš„ <code>jsonæ–‡ä»¶</code> çš„å†…å®¹å­˜å‚¨ç€å°ç¨‹åºé¡µé¢æˆ–ç»„ä»¶ç›¸å…³çš„é…ç½®ï¼Œå¿…ä¸å¯å°‘</p>
<h2 data-id="heading-2">æ–¹æ¡ˆä¸€ è„šæœ¬</h2>
<p>è¿™ä¸ªæ€è·¯æ˜¯åœ¨æ¡†æ¶æ‰“åŒ…ç»“æŸä¹‹åé€šè¿‡ <code>nodejs</code> æˆ–è€… <code>shell</code> å»ä¿®æ”¹äº§ç‰©</p>
<p>ä»¥å ä½ç»„ä»¶ä¸ºä¾‹ï¼Œåšåˆ†åŒ…å¼‚æ­¥åŒ–é™ä½ä¸»åŒ…ä½“ç§¯ä¸å¯æˆ–ç¼ºçš„ä¸€ä¸ªé…ç½®é¡¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbbdf5ea54145d8a5657264b37f9cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56yo56yo54uX5ZCe5Zms6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473510&amp;x-signature=b2i2DxWEjYcBB0pLG5Wf1l2kPKU%3D" alt="image.png" loading="lazy"/></p>
<p>å¼€å‘è€…åªéœ€è¦äº‹å…ˆç»Ÿè®¡å¥½éœ€è¦é…ç½®çš„ <code>componentPlaceholder</code> å’Œ äº§ç‰©è·¯å¾„ï¼Œåœ¨æ‰“åŒ…ç»“æŸä¹‹åé€šè¿‡è„šæœ¬æŠŠå†…å®¹å†™å…¥åˆ°å¯¹åº”çš„ <code>jsonæ–‡ä»¶</code> å°±å¯ä»¥äº†</p>
<p>è¿™ç§æ€è·¯é€‚åˆ <code>clié¡¹ç›®</code>ï¼Œå¯ä»¥å¾ˆè½»æ¾æŠŠè„šæœ¬æ·»åŠ åˆ° <code>package.json</code> ä¸­çš„ <code>scripts</code> ä¸­ï¼Œå¹¶ä¸”ä¸å— <code>nodejs</code> ç‰ˆæœ¬é™åˆ¶ï¼›ä½†æ˜¯æœ‰äº›å¼€å‘è€…çš„é¡¹ç›®æ˜¯ <code>hxé¡¹ç›®</code>ï¼Œå°±ä¸èƒ½é€šè¿‡è„šæœ¬çš„å½¢å¼æ¥æ“ä½œäº†ã€‚</p>
<h2 data-id="heading-3">æ–¹æ¡ˆäºŒ æ’ä»¶</h2>
<p>è¿™ä¸ªæ€è·¯æ˜¯é€šè¿‡ <code>webpack</code> æˆ–è€… <code>vite</code> æ’ä»¶æ¥è§£å†³ç›¸å…³é—®é¢˜</p>
<p>æˆ‘ä»¬ä»¥æˆ‘å†™çš„ <code>vite æ’ä»¶</code> ä¸ºä¾‹ ï¼ˆ<code>github åœ°å€</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit%2Fblob%2Fmain%2Fpackages%2Fvite-plugin-component-config%2FREADME.md" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit/blob/main/packages/vite-plugin-component-config/README.md" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a>ï¼‰</p>
<p>æ’ä»¶æºç å¾ˆç®€å•ï¼Œäº”åå¤šè¡Œä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { getOutputJsonPath, isMiniProgram } <span class="hljs-keyword">from</span> <span class="hljs-string">'@uni_toolkit/shared'</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">PluginOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> { createFilter, type <span class="hljs-title class_">FilterPattern</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/pluginutils'</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs'</span>;
<span class="hljs-keyword">import</span> { parseJson } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dcloudio/uni-cli-shared'</span>;
<span class="hljs-keyword">import</span> { merge } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash-es'</span>;

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">ComponentConfigPluginOptions</span> {
  include?: <span class="hljs-title class_">FilterPattern</span>;
  exclude?: <span class="hljs-title class_">FilterPattern</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">vitePluginComponentConfig</span>(<span class="hljs-params">
  options: ComponentConfigPluginOptions = {
    include: [<span class="hljs-string">'**/*.{vue,nvue,uvue}'</span>],
    exclude: [],
  },
</span>): <span class="hljs-title class_">PluginOption</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">map</span>: <span class="hljs-title class_">Map</span>&lt;string, <span class="hljs-title class_">Record</span>&lt;string, any&gt;&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-component-config'</span>,
    <span class="hljs-attr">enforce</span>: <span class="hljs-string">'pre'</span>,
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isMiniProgram</span>()) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">createFilter</span>(options.<span class="hljs-property">include</span>, options.<span class="hljs-property">exclude</span>)(id)) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">const</span> matches = code.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&lt;component-config&gt;([\s\S]*?)&lt;\/component-config&gt;/g</span>);
      <span class="hljs-keyword">if</span> (!matches) {
        <span class="hljs-keyword">return</span>;
      }

      matches.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">match</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> content = match.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;component-config&gt;|&lt;\/component-config&gt;/g</span>, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">const</span> componentConfig = <span class="hljs-title function_">parseJson</span>(content.<span class="hljs-title function_">toString</span>(), <span class="hljs-literal">true</span>, path.<span class="hljs-title function_">basename</span>(id));
        map.<span class="hljs-title function_">set</span>(<span class="hljs-title function_">getOutputJsonPath</span>(id), componentConfig);
      });

      <span class="hljs-keyword">return</span> code.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;component-config&gt;[\s\S]*?&lt;\/component-config&gt;/g</span>, <span class="hljs-string">''</span>);
    },
    <span class="hljs-title function_">closeBundle</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (map.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [outputPath, config] <span class="hljs-keyword">of</span> map) {
        <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(outputPath)) {
          <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(outputPath, <span class="hljs-string">'utf-8'</span>);
        <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(content);
        fs.<span class="hljs-title function_">writeFileSync</span>(outputPath, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">merge</span>(json, config), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
      }
    },
  };
}
</code></pre>
<p>æ€è·¯å°±æ˜¯éœ€è¦å¼€å‘è€…åœ¨å…·ä½“çš„ <code>vueæ–‡ä»¶</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>component-config</code> ä»£ç å—ï¼Œç±»å¦‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// #ifdef MP</span>
&lt;component-config&gt;
{
  <span class="hljs-string">"usingComponents"</span>: {
    <span class="hljs-string">"custom-button"</span>: <span class="hljs-string">"/components/custom-button"</span>
  },
  <span class="hljs-string">"styleIsolation"</span>: <span class="hljs-string">"apply-shared"</span>,
  <span class="hljs-string">"componentPlaceholder"</span>: {  
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"view"</span>,  
  }  
}
&lt;/component-config&gt;
<span class="hljs-comment">// #endif</span>
</code></pre>
<p>åœ¨ç¼–è¯‘æœŸé—´ï¼Œä¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æå– <code>component-config</code> ä»£ç å—ä¸­çš„é…ç½®ï¼Œå­˜å‚¨åˆ° <code>hashMap</code> ä¸­ï¼Œåœ¨ <code>bundle</code> ç”Ÿæˆç»“æŸåéå† <code>hashMap</code> ä¸­çš„æ•°æ®ï¼Œç„¶åä¿®æ”¹å¯¹åº”è·¯å¾„çš„ <code>jsonæ–‡ä»¶</code>ã€‚</p>
<p>åŒæ—¶è¿˜è€ƒè™‘åˆ°æœ‰äº›å¼€å‘è€…ä¼šé’ˆå¯¹ä¸åŒçš„å°ç¨‹åºå¹³å°æ·»åŠ ä¸åŒçš„é…ç½®ï¼Œ<code>component-config</code> ä»£ç å—ä¸­çš„å†…å®¹ä¹Ÿæ”¯æŒ <code>æ¡ä»¶ç¼–è¯‘</code></p>
<p>å¦‚æœä½ æ˜¯ <code>vue2 é¡¹ç›®</code>ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶ <code>github åœ°å€</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit%2Fblob%2Fmain%2Fpackages%2Fwebpack-plugin-component-config%2FREADME.md" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit/blob/main/packages/webpack-plugin-component-config/README.md" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a></p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å¦‚æœè¿™äº›æ’ä»¶å¸®åŠ©åˆ°äº†ä½ ï¼Œå¯ä»¥ç‚¹ä¸ª starâœ¨ æ”¯æŒä¸€ä¸‹å¼€æºå·¥ä½œã€‚</p>
<p>å¦‚æœä½ æœ‰ä»€ä¹ˆå¥½çš„æƒ³æ³•æˆ–è€…å»ºè®®ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a> æ issue æˆ–è€… prï¼›ä¹Ÿå¯ä»¥åŠ æˆ‘çš„ å¾®ä¿¡ 13460036576 æ²Ÿé€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠåŠ¨æ€æ•°æ®æº]]></title>    <link>https://juejin.cn/post/7575102209605763098</link>    <guid>https://juejin.cn/post/7575102209605763098</guid>    <pubDate>2025-11-23T03:27:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605763098" data-draft-id="7575104251866611722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠåŠ¨æ€æ•°æ®æº"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T03:27:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠåŠ¨æ€æ•°æ®æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:27:19.000Z" title="Sun Nov 23 2025 03:27:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å’±ä»¬æ˜Ÿçƒä¸­çš„å•†åŸç³»ç»Ÿä¸­ä½¿ç”¨äº†åŠ¨æ€æ•°æ®æºçš„åŠŸèƒ½ï¼Œå®ç°äº†åˆ†åº“åˆ†è¡¨çš„è®¢å•åº“çš„è¯»åº“å’Œå†™åº“çš„è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<p>æœ‰çƒå‹åé¦ˆè¯´ï¼Œå¯¹åŠ¨æ€æ•°æ®æºä¸å¤ªç†Ÿæ‚‰ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±ä¸“é—¨è·Ÿå¤§å®¶ä¸€èµ·èŠèŠåŠ¨æ€æ•°æ®æºï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" title="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€é¢è¯•çœŸé¢˜ã€7ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€æ•°æ®æºï¼Ÿ</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šä¸€ä¸ªç³»ç»Ÿéœ€è¦åŒæ—¶è®¿é—®å¤šä¸ªæ•°æ®åº“ï¼Œæˆ–è€…éœ€è¦æ ¹æ®ä¸šåŠ¡å‚æ•°åŠ¨æ€é€‰æ‹©æ•°æ®æºã€‚è¿™</p>
<p>æ—¶å€™ï¼Œä¼ ç»Ÿçš„å•æ•°æ®æºé…ç½®å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå¤šæ•°æ®æºçš„é—®é¢˜</h3>
<p>ä¼ ç»Ÿæ–¹å¼çš„å¤šä¸ªæ•°æ®æºé…ç½®ï¼Œç¡¬ç¼–ç ï¼Œä¸çµæ´»ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalDataSourceConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">primaryDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/db1"</span>);
        dataSource.setUsername(<span class="hljs-string">"user1"</span>);
        dataSource.setPassword(<span class="hljs-string">"pass1"</span>);
        <span class="hljs-keyword">return</span> dataSource;
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">secondaryDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/db2"</span>);
        dataSource.setUsername(<span class="hljs-string">"user2"</span>);
        dataSource.setPassword(<span class="hljs-string">"pass2"</span>);
        <span class="hljs-keyword">return</span> dataSource;
    }
}
</code></pre>
<p>ä½¿ç”¨æ—¶éœ€è¦æ‰‹åŠ¨ç®¡ç†æ•°æ®æºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalUserDao</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier("primaryDataSource")</span>
    <span class="hljs-keyword">private</span> DataSource primaryDataSource;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier("secondaryDataSource")</span>
    <span class="hljs-keyword">private</span> DataSource secondaryDataSource;
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUserFromPrimary</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è·å–è¿æ¥ã€å¤„ç†å¼‚å¸¸ã€å…³é—­è¿æ¥</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> primaryDataSource.getConnection();
             <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"SELECT * FROM users WHERE id = ?"</span>)) {
            stmt.setLong(<span class="hljs-number">1</span>, id);
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery();
            <span class="hljs-comment">// å¤„ç†ç»“æœé›†...</span>
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>, e);
        }
    }
  
}
</code></pre>
<p>æ¯ä¸ªæ–¹æ³•éƒ½è¦é‡å¤è¿™æ ·çš„æ¨¡æ¿ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ•°æ®æºï¼Œå¾ˆéº»çƒ¦ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•åšä¼˜åŒ–å‘¢ï¼Ÿ</p>
<h3 data-id="heading-3">1.2 åŠ¨æ€æ•°æ®æºçš„ä¼˜åŠ¿</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ä½¿ç”¨åŠ¨æ€æ•°æ®æºåçš„ä¼˜é›…ä»£ç ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-comment">// æ ¹æ®ç§Ÿæˆ·IDè‡ªåŠ¨é€‰æ‹©æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUserByTenant</span><span class="hljs-params">(Long userId, String tenantId)</span> {
        <span class="hljs-comment">// è®¾ç½®æ•°æ®æºä¸Šä¸‹æ–‡</span>
        DataSourceContextHolder.setDataSource(tenantId);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> userMapper.selectById(userId);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ¸…ç†ä¸Šä¸‹æ–‡</span>
            DataSourceContextHolder.clear();
        }
    }
    
    <span class="hljs-comment">// å¤šç§Ÿæˆ·æ•°æ®èšåˆæŸ¥è¯¢</span>
    <span class="hljs-keyword">public</span> UserAggregateInfo <span class="hljs-title function_">getUserAggregateInfo</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">UserAggregateInfo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserAggregateInfo</span>();
        
        <span class="hljs-comment">// æŸ¥è¯¢ä¸»åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"master"</span>);
        result.setBaseInfo(userMapper.selectById(userId));
        
        <span class="hljs-comment">// æŸ¥è¯¢å½’æ¡£åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"archive"</span>);
        result.setHistory(userMapper.selectHistory(userId));
        
        <span class="hljs-comment">// æŸ¥è¯¢ç»Ÿè®¡åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"stats"</span>);
        result.setStatistics(userMapper.selectStats(userId));
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>ä»£ç ä¸­èƒ½æ ¹æ®ç§Ÿæˆ·IDè‡ªåŠ¨é€‰æ‹©æ•°æ®æºã€‚</p>
<p>ä»£ç ä¸€ä¸‹å­å˜å¾—æ›´ä¼˜é›…äº†ã€‚</p>
<h2 data-id="heading-4">äºŒã€åŠ¨æ€æ•°æ®æºçš„åŸç†</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨ä½¿ç”¨åŠ¨æ€æ•°æ®æºæ—¶ï¼Œå¯èƒ½åªæ˜¯ç®€å•é…ç½®ä½¿ç”¨ï¼Œå¹¶ä¸æ¸…æ¥šå…¶åº•å±‚å·¥ä½œåŸç†ã€‚</p>
<p>ç†è§£æ ¸å¿ƒåŸç†å¯¹äºæ’æŸ¥é—®é¢˜å’Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚</p>
<p>ä¸‹é¢è·Ÿå¤§å®¶ä¸€èµ·èŠèŠåŠ¨æ€æ•°æ®æºçš„æ ¸å¿ƒåŸç†ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h3 data-id="heading-5">æ•°æ®æºè·¯ç”±çš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>åŠ¨æ€æ•°æ®æºçš„æ ¸å¿ƒåœ¨äº<code>AbstractRoutingDataSource</code>ï¼Œå®ƒæ˜¯Springæ¡†æ¶æä¾›çš„æŠ½è±¡ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring AbstractRoutingDataSource æºç åˆ†æ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span> {
    
    <span class="hljs-comment">// ç›®æ ‡æ•°æ®æºæ˜ å°„è¡¨</span>
    <span class="hljs-keyword">private</span> Map&lt;Object, Object&gt; targetDataSources;
    
    <span class="hljs-comment">// é»˜è®¤æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> Object defaultTargetDataSource;
    
    <span class="hljs-comment">// è§£æåçš„æ•°æ®æºæ˜ å°„</span>
    <span class="hljs-keyword">private</span> Map&lt;Object, DataSource&gt; resolvedDataSources;
    
    <span class="hljs-comment">// è§£æåçš„é»˜è®¤æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> DataSource resolvedDefaultDataSource;
    
    <span class="hljs-comment">// å…³é”®æ–¹æ³•ï¼šç¡®å®šå½“å‰æŸ¥æ‰¾é”®</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Object <span class="hljs-title function_">determineCurrentLookupKey</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// è·å–è¿æ¥æ—¶é€‰æ‹©æ•°æ®æº</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> determineTargetDataSource().getConnection();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">(String username, String password)</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> determineTargetDataSource().getConnection(username, password);
    }
    
    <span class="hljs-comment">// ç¡®å®šç›®æ ‡æ•°æ®æº</span>
    <span class="hljs-keyword">protected</span> DataSource <span class="hljs-title function_">determineTargetDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–æŸ¥æ‰¾é”®</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">lookupKey</span> <span class="hljs-operator">=</span> determineCurrentLookupKey();
        
        <span class="hljs-comment">// æ ¹æ®æŸ¥æ‰¾é”®è·å–æ•°æ®æº</span>
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.resolvedDataSources.get(lookupKey);
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-built_in">this</span>.resolvedDefaultDataSource != <span class="hljs-literal">null</span> || lookupKey == <span class="hljs-literal">null</span>)) {
            dataSource = <span class="hljs-built_in">this</span>.resolvedDefaultDataSource;
        }
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Cannot determine target DataSource for lookup key ["</span> + lookupKey + <span class="hljs-string">"]"</span>);
        }
        <span class="hljs-keyword">return</span> dataSource;
    }
}
</code></pre>
<h3 data-id="heading-6">çº¿ç¨‹å®‰å…¨çš„æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†å™¨ - æ ¸å¿ƒç»„ä»¶
 * ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹å®‰å…¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceContextHolder</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹éš”ç¦»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; CONTEXT_HOLDER = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ”¯æŒåµŒå¥—æ•°æ®æºåˆ‡æ¢çš„æ ˆ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Deque&lt;String&gt;&gt; DATASOURCE_STACK = ThreadLocal.withInitial(ArrayDeque::<span class="hljs-keyword">new</span>);
    
    <span class="hljs-comment">// è®¾ç½®æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDataSource</span><span class="hljs-params">(String dataSource)</span> {
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ•°æ®æºä¸èƒ½ä¸ºnull"</span>);
        }
        CONTEXT_HOLDER.set(dataSource);
        
        <span class="hljs-comment">// åŒæ—¶å‹å…¥æ ˆï¼Œæ”¯æŒåµŒå¥—è°ƒç”¨</span>
        DATASOURCE_STACK.get().push(dataSource);
    }
    
    <span class="hljs-comment">// è·å–å½“å‰æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.get();
    }
    
    <span class="hljs-comment">// æ¸…é™¤æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        CONTEXT_HOLDER.remove();
        Deque&lt;String&gt; stack = DATASOURCE_STACK.get();
        <span class="hljs-keyword">if</span> (!stack.isEmpty()) {
            stack.pop();
            <span class="hljs-comment">// å¦‚æœæ ˆä¸­è¿˜æœ‰å…ƒç´ ï¼Œæ¢å¤åˆ°ä¸Šä¸€ä¸ªæ•°æ®æº</span>
            <span class="hljs-keyword">if</span> (!stack.isEmpty()) {
                CONTEXT_HOLDER.set(stack.peek());
            }
        }
    }
    
    <span class="hljs-comment">// å¼ºåˆ¶æ¸…é™¤æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼ˆç”¨äºçº¿ç¨‹æ± åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearCompletely</span><span class="hljs-params">()</span> {
        CONTEXT_HOLDER.remove();
        DATASOURCE_STACK.get().clear();
    }
    
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å·²è®¾ç½®æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.get() != <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰è·¯ç”±æ•°æ®æº
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractRoutingDataSource</span> {
    
    <span class="hljs-comment">// æ‰€æœ‰å¯ç”¨çš„æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Object, Object&gt; targetDataSources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">determineCurrentLookupKey</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> DataSourceContextHolder.getDataSource();
        
        <span class="hljs-keyword">if</span> (dataSourceKey == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è¿”å›é»˜è®¤æ•°æ®æº</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>;
        }
        
        <span class="hljs-comment">// éªŒè¯æ•°æ®æºæ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (!targetDataSources.containsKey(dataSourceKey)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ•°æ®æº "</span> + dataSourceKey + <span class="hljs-string">" ä¸å­˜åœ¨"</span>);
        }
        
        logger.debug(<span class="hljs-string">"å½“å‰ä½¿ç”¨æ•°æ®æº: {}"</span>, dataSourceKey);
        <span class="hljs-keyword">return</span> dataSourceKey;
    }
    
    <span class="hljs-comment">// æ·»åŠ æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDataSource</span><span class="hljs-params">(String key, DataSource dataSource)</span> {
        <span class="hljs-built_in">this</span>.targetDataSources.put(key, dataSource);
        <span class="hljs-comment">// æ›´æ–°ç›®æ ‡æ•°æ®æºæ˜ å°„</span>
        setTargetDataSources(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-built_in">this</span>.targetDataSources));
        <span class="hljs-comment">// é‡æ–°åˆå§‹åŒ–</span>
        afterPropertiesSet();
    }
    
    <span class="hljs-comment">// ç§»é™¤æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeDataSource</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.targetDataSources.containsKey(key)) {
            <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) <span class="hljs-built_in">this</span>.targetDataSources.remove(key);
            <span class="hljs-comment">// å…³é—­æ•°æ®æºè¿æ¥æ± </span>
            closeDataSource(dataSource);
            <span class="hljs-comment">// æ›´æ–°ç›®æ ‡æ•°æ®æºæ˜ å°„</span>
            setTargetDataSources(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-built_in">this</span>.targetDataSources));
            afterPropertiesSet();
        }
    }
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> Map&lt;Object, Object&gt; <span class="hljs-title function_">getTargetDataSources</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Collections.unmodifiableMap(targetDataSources);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeDataSource</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-keyword">if</span> (dataSource <span class="hljs-keyword">instanceof</span> HikariDataSource) {
            ((HikariDataSource) dataSource).close();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dataSource <span class="hljs-keyword">instanceof</span> org.apache.tomcat.jdbc.pool.DataSource) {
            ((org.apache.tomcat.jdbc.pool.DataSource) dataSource).close();
        }
        <span class="hljs-comment">// å…¶ä»–ç±»å‹çš„æ•°æ®æºå…³é—­é€»è¾‘...</span>
    }
}
</code></pre>
<h3 data-id="heading-7">åŠ¨æ€æ•°æ®æºæ‰§è¡Œæµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/081c3361ead644e5ae5f68390279086d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473239&amp;x-signature=V6dVx6G47lh7ytRTcxZ05U3lRLA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€åŸºäºSpring Bootçš„å®Œæ•´å®ç°</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨é…ç½®åŠ¨æ€æ•°æ®æºæ—¶å¯èƒ½ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä¸‹é¢æˆ‘æä¾›ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®Œæ•´å®ç°ã€‚</p>
<h3 data-id="heading-9">å®Œæ•´é…ç½®å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŠ¨æ€æ•°æ®æºé…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span>
<span class="hljs-meta">@EnableConfigurationProperties(DynamicDataSourceProperties.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSourceConfig</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicDataSourceProperties properties;
    
    <span class="hljs-comment">/**
     * ä¸»æ•°æ®æºï¼ˆé»˜è®¤æ•°æ®æºï¼‰
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.master")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">masterDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº1
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.slave1")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">slave1DataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº2
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.slave2")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">slave2DataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€æ•°æ®æº
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dynamicDataSource</span><span class="hljs-params">(DataSource masterDataSource, 
                                       DataSource slave1DataSource, 
                                       DataSource slave2DataSource)</span> {
        
        Map&lt;Object, Object&gt; targetDataSources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">8</span>);
        targetDataSources.put(<span class="hljs-string">"master"</span>, masterDataSource);
        targetDataSources.put(<span class="hljs-string">"slave1"</span>, slave1DataSource);
        targetDataSources.put(<span class="hljs-string">"slave2"</span>, slave2DataSource);
        
        <span class="hljs-type">DynamicRoutingDataSource</span> <span class="hljs-variable">dynamicDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicRoutingDataSource</span>();
        <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ•°æ®æº</span>
        dynamicDataSource.setDefaultTargetDataSource(masterDataSource);
        <span class="hljs-comment">// è®¾ç½®ç›®æ ‡æ•°æ®æº</span>
        dynamicDataSource.setTargetDataSources(targetDataSources);
        
        <span class="hljs-keyword">return</span> dynamicDataSource;
    }
    
    <span class="hljs-comment">/**
     * äº‹åŠ¡ç®¡ç†å™¨
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dynamicDataSource)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dynamicDataSource);
    }
    
    <span class="hljs-comment">/**
     * MyBatisé…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SqlSessionFactory <span class="hljs-title function_">sqlSessionFactory</span><span class="hljs-params">(DataSource dynamicDataSource)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">SqlSessionFactoryBean</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBean</span>();
        sessionFactory.setDataSource(dynamicDataSource);
        
        <span class="hljs-comment">// é…ç½®MyBatis</span>
        org.apache.ibatis.session.<span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">org</span>.apache.ibatis.session.Configuration();
        configuration.setMapUnderscoreToCamelCase(<span class="hljs-literal">true</span>);
        configuration.setCacheEnabled(<span class="hljs-literal">true</span>);
        configuration.setLazyLoadingEnabled(<span class="hljs-literal">false</span>);
        configuration.setAggressiveLazyLoading(<span class="hljs-literal">false</span>);
        sessionFactory.setConfiguration(configuration);
        
        <span class="hljs-keyword">return</span> sessionFactory.getObject();
    }
}

<span class="hljs-comment">/**
 * æ•°æ®æºé…ç½®å±æ€§ç±»
 */</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSourceProperties</span> {
    
    <span class="hljs-comment">/**
     * ä¸»æ•°æ®æºé…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">master</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº1é…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">slave1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº2é…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">slave2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * åŠ¨æ€æ•°æ®æºé…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">DynamicConfig</span> <span class="hljs-variable">dynamic</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicConfig</span>();
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicConfig</span> {
        <span class="hljs-comment">/**
         * é»˜è®¤æ•°æ®æº
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">primary</span> <span class="hljs-operator">=</span> <span class="hljs-string">"master"</span>;
        
        <span class="hljs-comment">/**
         * æ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">strict</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">/**
         * æ•°æ®æºå¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">healthCheckInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">åº”ç”¨é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># åŠ¨æ€æ•°æ®æºé…ç½®</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>
      <span class="hljs-attr">strict:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">health-check-interval:</span> <span class="hljs-number">30</span>
    
    <span class="hljs-comment"># ä¸»æ•°æ®æº</span>
    <span class="hljs-attr">master:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/master_db?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">master_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">MasterHikariPool</span>
    
    <span class="hljs-comment"># ä»æ•°æ®æº1</span>
    <span class="hljs-attr">slave1:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://slave1:3306/slave_db?useUnicode=true&amp;characterEncoding=utf8</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">slave1_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">Slave1HikariPool</span>
    
    <span class="hljs-comment"># ä»æ•°æ®æº2</span>
    <span class="hljs-attr">slave2:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://slave2:3306/slave_db?useUnicode=true&amp;characterEncoding=utf8</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">slave2_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">Slave2HikariPool</span>

<span class="hljs-comment"># MyBatisé…ç½®</span>
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">cache-enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">lazy-loading-enabled:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">aggressive-lazy-loading:</span> <span class="hljs-literal">false</span>
</code></pre>
<h3 data-id="heading-11">æ³¨è§£å¼æ•°æ®æºåˆ‡æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºæ³¨è§£
 */</span>
<span class="hljs-meta">@Target({ElementType.METHOD, ElementType.TYPE})</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DataSource {
    
    <span class="hljs-comment">/**
     * æ•°æ®æºåç§°
     */</span>
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"master"</span>;
    
    <span class="hljs-comment">/**
     * æ˜¯å¦åœ¨æ–¹æ³•æ‰§è¡Œåæ¸…é™¤æ•°æ®æºï¼ˆé»˜è®¤æ¸…é™¤ï¼‰
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">/**
 * æ•°æ®æºåˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
    
    <span class="hljs-comment">/**
     * å®šä¹‰åˆ‡ç‚¹ï¼šæ‰€æœ‰æ ‡æ³¨<span class="hljs-doctag">@DataSource</span>æ³¨è§£çš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Pointcut("@annotation(com.example.annotation.DataSource)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataSourcePointCut</span><span class="hljs-params">()</span> {}
    
    <span class="hljs-comment">/**
     * ç¯ç»•é€šçŸ¥ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰ååˆ‡æ¢æ•°æ®æº
     */</span>
    <span class="hljs-meta">@Around("dataSourcePointCut()")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint point)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) point.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSourceAnnotation</span> <span class="hljs-operator">=</span> method.getAnnotation(DataSource.class);
        <span class="hljs-keyword">if</span> (dataSourceAnnotation == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ç±»çº§åˆ«æ³¨è§£</span>
            dataSourceAnnotation = point.getTarget().getClass().getAnnotation(DataSource.class);
        }
        
        <span class="hljs-keyword">if</span> (dataSourceAnnotation != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> dataSourceAnnotation.value();
            <span class="hljs-type">boolean</span> <span class="hljs-variable">clearAfter</span> <span class="hljs-operator">=</span> dataSourceAnnotation.clear();
            
            <span class="hljs-keyword">try</span> {
                log.debug(<span class="hljs-string">"åˆ‡æ¢æ•°æ®æºåˆ°: {}"</span>, dataSourceKey);
                DataSourceContextHolder.setDataSource(dataSourceKey);
                
                <span class="hljs-comment">// æ‰§è¡ŒåŸæ–¹æ³•</span>
                <span class="hljs-keyword">return</span> point.proceed();
                
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (clearAfter) {
                    DataSourceContextHolder.clear();
                    log.debug(<span class="hljs-string">"æ¸…é™¤æ•°æ®æºä¸Šä¸‹æ–‡"</span>);
                }
            }
        }
        
        <span class="hljs-comment">// æ²¡æœ‰æ³¨è§£ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®æº</span>
        <span class="hljs-keyword">return</span> point.proceed();
    }
}
</code></pre>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†ä¸å°‘çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-12">å››ã€é«˜çº§ç‰¹æ€§</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨åŸºç¡€åŠŸèƒ½å®ç°åï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é«˜çº§åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<p>ä¸‹é¢ä»‹ç»å‡ ä¸ªç”Ÿäº§ç¯å¢ƒä¸­å¸¸ç”¨çš„é«˜çº§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-13">è¯»å†™åˆ†ç¦»è‡ªåŠ¨è·¯ç”±</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¯»å†™åˆ†ç¦»æ•°æ®æºè·¯ç”±å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadWriteDataSourceRouter</span> {
    
    <span class="hljs-comment">// è¯»æ•°æ®æºåˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; readDataSources = Arrays.asList(<span class="hljs-string">"slave1"</span>, <span class="hljs-string">"slave2"</span>);
    
    <span class="hljs-comment">// è½®è¯¢è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">/**
     * æ ¹æ®SQLè‡ªåŠ¨é€‰æ‹©æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">determineDataSource</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isReadOperation)</span> {
        <span class="hljs-keyword">if</span> (isReadOperation &amp;&amp; !readDataSources.isEmpty()) {
            <span class="hljs-comment">// è¯»æ“ä½œï¼šè½®è¯¢é€‰æ‹©ä»åº“</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> counter.getAndIncrement() % readDataSources.size();
            <span class="hljs-keyword">if</span> (counter.get() &gt; <span class="hljs-number">9999</span>) {
                counter.set(<span class="hljs-number">0</span>); <span class="hljs-comment">// é˜²æ­¢æº¢å‡º</span>
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">readDataSource</span> <span class="hljs-operator">=</span> readDataSources.get(index);
            log.debug(<span class="hljs-string">"è¯»æ“ä½œé€‰æ‹©æ•°æ®æº: {}"</span>, readDataSource);
            <span class="hljs-keyword">return</span> readDataSource;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å†™æ“ä½œï¼šé€‰æ‹©ä¸»åº“</span>
            log.debug(<span class="hljs-string">"å†™æ“ä½œé€‰æ‹©æ•°æ®æº: master"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"master"</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ ¹æ®SQLè¯­å¥åˆ¤æ–­æ˜¯å¦ä¸ºè¯»æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isReadOperation</span><span class="hljs-params">(String sql)</span> {
        <span class="hljs-keyword">if</span> (sql == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// é»˜è®¤ä¸ºè¯»æ“ä½œ</span>
        }
        
        <span class="hljs-type">String</span> <span class="hljs-variable">trimmedSql</span> <span class="hljs-operator">=</span> sql.trim().toLowerCase();
        <span class="hljs-keyword">return</span> trimmedSql.startsWith(<span class="hljs-string">"select"</span>) || 
               trimmedSql.startsWith(<span class="hljs-string">"show"</span>) ||
               trimmedSql.startsWith(<span class="hljs-string">"explain"</span>);
    }
}

<span class="hljs-comment">/**
 * MyBatisæ‹¦æˆªå™¨ - è‡ªåŠ¨è¯»å†™åˆ†ç¦»
 */</span>
<span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class, method = "update", args = {MappedStatement.class, Object.class}),
    @Signature(type = Executor.class, method = "query", args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadWriteInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReadWriteDataSourceRouter dataSourceRouter;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> invocation.getMethod().getName();
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isReadOperation</span> <span class="hljs-operator">=</span> <span class="hljs-string">"query"</span>.equals(methodName);
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> getSql(ms, invocation.getArgs()[<span class="hljs-number">1</span>]);
        
        <span class="hljs-comment">// å¦‚æœå½“å‰æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®æ•°æ®æºï¼Œåˆ™è‡ªåŠ¨é€‰æ‹©</span>
        <span class="hljs-keyword">if</span> (!DataSourceContextHolder.hasDataSource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> dataSourceRouter.determineDataSource(isReadOperation);
            DataSourceContextHolder.setDataSource(dataSource);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> invocation.proceed();
            } <span class="hljs-keyword">finally</span> {
                DataSourceContextHolder.clear();
            }
        }
        
        <span class="hljs-keyword">return</span> invocation.proceed();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getSql</span><span class="hljs-params">(MappedStatement ms, Object parameter)</span> {
        <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> ms.getBoundSql(parameter);
        <span class="hljs-keyword">return</span> boundSql.getSql();
    }
}
</code></pre>
<h3 data-id="heading-14">å¤šç§Ÿæˆ·æ•°æ®æºç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤šç§Ÿæˆ·æ•°æ®æºç®¡ç†å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TenantDataSourceManager</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicRoutingDataSource dynamicRoutingDataSource;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DataSourceProperties dataSourceProperties;
    
    <span class="hljs-comment">// ç§Ÿæˆ·æ•°æ®æºé…ç½®ç¼“å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, TenantDataSourceConfig&gt; tenantConfigCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">/**
     * æ ¹æ®ç§Ÿæˆ·IDè·å–æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">getDataSourceForTenant</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"tenant_"</span> + tenantId;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨æ•°æ®æº</span>
        <span class="hljs-keyword">if</span> (dynamicRoutingDataSource.getTargetDataSources().containsKey(dataSourceKey)) {
            <span class="hljs-keyword">return</span> (DataSource) dynamicRoutingDataSource.getTargetDataSources().get(dataSourceKey);
        }
        
        <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºæ•°æ®æº</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            <span class="hljs-keyword">if</span> (!dynamicRoutingDataSource.getTargetDataSources().containsKey(dataSourceKey)) {
                <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> createTenantDataSource(tenantId);
                dynamicRoutingDataSource.addDataSource(dataSourceKey, dataSource);
                log.info(<span class="hljs-string">"ä¸ºç§Ÿæˆ· {} åˆ›å»ºæ•°æ®æº: {}"</span>, tenantId, dataSourceKey);
            }
        }
        
        <span class="hljs-keyword">return</span> (DataSource) dynamicRoutingDataSource.getTargetDataSources().get(dataSourceKey);
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€åˆ›å»ºç§Ÿæˆ·æ•°æ®æº
     */</span>
    <span class="hljs-keyword">private</span> DataSource <span class="hljs-title function_">createTenantDataSource</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-type">TenantDataSourceConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> getTenantConfig(tenantId);
        
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(buildJdbcUrl(config));
        dataSource.setUsername(config.getUsername());
        dataSource.setPassword(config.getPassword());
        dataSource.setDriverClassName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);
        dataSource.setMaximumPoolSize(<span class="hljs-number">10</span>);
        dataSource.setMinimumIdle(<span class="hljs-number">2</span>);
        dataSource.setConnectionTimeout(<span class="hljs-number">30000</span>);
        dataSource.setIdleTimeout(<span class="hljs-number">600000</span>);
        dataSource.setMaxLifetime(<span class="hljs-number">1800000</span>);
        dataSource.setPoolName(<span class="hljs-string">"TenantPool_"</span> + tenantId);
        
        <span class="hljs-keyword">return</span> dataSource;
    }
    
    <span class="hljs-comment">/**
     * è·å–ç§Ÿæˆ·æ•°æ®æºé…ç½®ï¼ˆå¯ä»é…ç½®ä¸­å¿ƒæˆ–æ•°æ®åº“è·å–ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> TenantDataSourceConfig <span class="hljs-title function_">getTenantConfig</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-keyword">return</span> tenantConfigCache.computeIfAbsent(tenantId, key -&gt; {
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥ä»é…ç½®ä¸­å¿ƒã€æ•°æ®åº“æˆ–ç¼“å­˜ä¸­è·å–ç§Ÿæˆ·é…ç½®</span>
            <span class="hljs-comment">// ç®€åŒ–å®ç°ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦å®Œå–„</span>
            <span class="hljs-type">TenantDataSourceConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantDataSourceConfig</span>();
            config.setHost(<span class="hljs-string">"tenant-"</span> + tenantId + <span class="hljs-string">".db.example.com"</span>);
            config.setPort(<span class="hljs-number">3306</span>);
            config.setDatabase(<span class="hljs-string">"tenant_"</span> + tenantId);
            config.setUsername(<span class="hljs-string">"tenant_"</span> + tenantId);
            config.setPassword(<span class="hljs-string">"password_"</span> + tenantId);
            <span class="hljs-keyword">return</span> config;
        });
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildJdbcUrl</span><span class="hljs-params">(TenantDataSourceConfig config)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"jdbc:mysql://%s:%d/%s?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true"</span>,
                config.getHost(), config.getPort(), config.getDatabase());
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TenantDataSourceConfig</span> {
        <span class="hljs-keyword">private</span> String host;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
        <span class="hljs-keyword">private</span> String database;
        <span class="hljs-keyword">private</span> String username;
        <span class="hljs-keyword">private</span> String password;
    }
}
</code></pre>
<h3 data-id="heading-15">æ•°æ®æºå¥åº·ç›‘æ§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºå¥åº·ç›‘æ§å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceHealthMonitor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicRoutingDataSource dynamicRoutingDataSource;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduler</span> <span class="hljs-operator">=</span> Executors.newScheduledThreadPool(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// å¥åº·çŠ¶æ€ç¼“å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Boolean&gt; healthStatus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯åŠ¨å¥åº·æ£€æŸ¥ä»»åŠ¡</span>
        scheduler.scheduleAtFixedRate(<span class="hljs-built_in">this</span>::checkAllDataSources, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥æ‰€æœ‰æ•°æ®æºçš„å¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAllDataSources</span><span class="hljs-params">()</span> {
        Map&lt;Object, Object&gt; dataSources = dynamicRoutingDataSource.getTargetDataSources();
        
        <span class="hljs-keyword">for</span> (Map.Entry&lt;Object, Object&gt; entry : dataSources.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> (String) entry.getKey();
            <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) entry.getValue();
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isHealthy</span> <span class="hljs-operator">=</span> checkDataSourceHealth(dataSource);
            healthStatus.put(dataSourceKey, isHealthy);
            
            <span class="hljs-keyword">if</span> (!isHealthy) {
                log.warn(<span class="hljs-string">"æ•°æ®æº {} å¥åº·æ£€æŸ¥å¤±è´¥"</span>, dataSourceKey);
                <span class="hljs-comment">// å¯ä»¥å‘é€å‘Šè­¦é€šçŸ¥</span>
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å•ä¸ªæ•°æ®æºå¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkDataSourceHealth</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection();
             <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement()) {
            
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-string">"SELECT 1"</span>);
            <span class="hljs-keyword">return</span> rs.next() &amp;&amp; rs.getInt(<span class="hljs-number">1</span>) == <span class="hljs-number">1</span>;
            
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            log.error(<span class="hljs-string">"æ•°æ®æºå¥åº·æ£€æŸ¥å¼‚å¸¸"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æ•°æ®æºå¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDataSourceHealthy</span><span class="hljs-params">(String dataSourceKey)</span> {
        <span class="hljs-keyword">return</span> healthStatus.getOrDefault(dataSourceKey, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-comment">/**
     * è·å–å¥åº·çš„æ•°æ®æºåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getHealthyDataSources</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> healthStatus.entrySet().stream()
                .filter(Map.Entry::getValue)
                .map(Map.Entry::getKey)
                .collect(Collectors.toList());
    }
    
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
        scheduler.shutdown();
    }
}
</code></pre>
<h2 data-id="heading-16">äº”ã€åŠ¨æ€æ•°æ®æºçš„åº”ç”¨åœºæ™¯</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡æ¶æ„å›¾æ¥ç†è§£åŠ¨æ€æ•°æ®æºçš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c5d9765900343a4ae09e1f22964e808~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473239&amp;x-signature=31vVt3z3owBI7CTOge7hTc4LtBQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">å…­ã€ä¼˜ç¼ºç‚¹</h2>
<h3 data-id="heading-18">ä¼˜ç‚¹</h3>
<ol>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ·»åŠ ã€ç§»é™¤æ•°æ®æº</li>
<li><strong>è§£è€¦æ€§å¥½</strong>ï¼šä¸šåŠ¡ä»£ç ä¸å…·ä½“æ•°æ®æºè§£è€¦</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šæ˜“äºå®ç°è¯»å†™åˆ†ç¦»ã€å¤šç§Ÿæˆ·ç­‰å¤æ‚åœºæ™¯</li>
<li><strong>ç»´æŠ¤æ–¹ä¾¿</strong>ï¼šæ•°æ®æºé…ç½®é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤</li>
</ol>
<h3 data-id="heading-19">ç¼ºç‚¹</h3>
<ol>
<li><strong>å¤æ‚åº¦å¢åŠ </strong>ï¼šç³»ç»Ÿæ¶æ„å˜å¾—æ›´åŠ å¤æ‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†å¤æ‚</strong>ï¼šè·¨æ•°æ®æºäº‹åŠ¡éœ€è¦ç‰¹æ®Šå¤„ç†</li>
<li><strong>è¿æ¥æ± å¼€é”€</strong>ï¼šæ¯ä¸ªæ•°æ®æºéƒ½éœ€è¦ç‹¬ç«‹çš„è¿æ¥æ± </li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šæ•°æ®æºåˆ‡æ¢å¢åŠ äº†è°ƒè¯•å¤æ‚åº¦</li>
</ol>
<h2 data-id="heading-20">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-21">äº‹åŠ¡ç®¡ç†ç­–ç•¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤šæ•°æ®æºäº‹åŠ¡ç®¡ç†å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiDataSourceTransactionManager</span> {
    
    <span class="hljs-comment">/**
     * åœ¨å¤šä¸ªæ•°æ®æºä¸Šæ‰§è¡Œäº‹åŠ¡æ€§æ“ä½œ
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeInTransaction</span><span class="hljs-params">(Runnable task, String... dataSources)</span> {
        <span class="hljs-keyword">if</span> (dataSources.length == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å•æ•°æ®æºäº‹åŠ¡</span>
            DataSourceContextHolder.setDataSource(dataSources[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">try</span> {
                task.run();
            } <span class="hljs-keyword">finally</span> {
                DataSourceContextHolder.clear();
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¤šæ•°æ®æºä¼ªäº‹åŠ¡ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</span>
            executeWithCompensation(task, dataSources);
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨è¡¥å¿æœºåˆ¶å®ç°å¤šæ•°æ®æº"äº‹åŠ¡"
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeWithCompensation</span><span class="hljs-params">(Runnable task, String[] dataSources)</span> {
        List&lt;Runnable&gt; compensationTasks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ªæ•°æ®æºçš„æ“ä½œ</span>
            <span class="hljs-keyword">for</span> (String dataSource : dataSources) {
                DataSourceContextHolder.setDataSource(dataSource);
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ‰§è¡Œå®é™…ä¸šåŠ¡æ“ä½œ</span>
                    task.run();
                    
                    <span class="hljs-comment">// è®°å½•è¡¥å¿æ“ä½œ</span>
                    compensationTasks.add(<span class="hljs-number">0</span>, createCompensationTask(dataSource));
                    
                } <span class="hljs-keyword">finally</span> {
                    DataSourceContextHolder.clear();
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ‰§è¡Œè¡¥å¿æ“ä½œ</span>
            log.error(<span class="hljs-string">"å¤šæ•°æ®æºæ“ä½œå¤±è´¥ï¼Œæ‰§è¡Œè¡¥å¿æ“ä½œ"</span>, e);
            executeCompensation(compensationTasks);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeCompensation</span><span class="hljs-params">(List&lt;Runnable&gt; compensationTasks)</span> {
        <span class="hljs-keyword">for</span> (Runnable compensation : compensationTasks) {
            <span class="hljs-keyword">try</span> {
                compensation.run();
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                log.error(<span class="hljs-string">"è¡¥å¿æ“ä½œæ‰§è¡Œå¤±è´¥"</span>, ex);
                <span class="hljs-comment">// è®°å½•è¡¥å¿å¤±è´¥ï¼Œéœ€è¦äººå·¥ä»‹å…¥</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-22">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>è¿æ¥æ± ä¼˜åŒ–</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´å„æ•°æ®æºè¿æ¥æ± å‚æ•°</li>
<li><strong>æ•°æ®æºé¢„çƒ­</strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶é¢„çƒ­å¸¸ç”¨æ•°æ®æº</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šç¼“å­˜æ•°æ®æºé…ç½®å’Œè·¯ç”±ä¿¡æ¯</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„æ•°æ®æºç›‘æ§ä½“ç³»</li>
</ol>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>åŠ¨æ€æ•°æ®æºæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³å¤šæ•°æ®æºç®¡ç†çš„å¤æ‚æ€§ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è§£æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šåŸºäº<code>AbstractRoutingDataSource</code>å’Œ<code>ThreadLocal</code>çš„ä¸Šä¸‹æ–‡ç®¡ç†</li>
<li><strong>å®ç°æ–¹å¼</strong>ï¼šæ³¨è§£+AOPçš„å£°æ˜å¼æ•°æ®æºåˆ‡æ¢</li>
<li><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šè¯»å†™åˆ†ç¦»ã€å¤šç§Ÿæˆ·ã€å¥åº·ç›‘æ§ç­‰ç”Ÿäº§çº§åŠŸèƒ½</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤šç§Ÿæˆ·ã€è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ç­‰å¤æ‚æ•°æ®æ¶æ„</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®ç°æ–¹æ¡ˆï¼Œä¸è¦è¿‡åº¦è®¾è®¡ã€‚</p>
<p>åŒæ—¶ï¼Œè¦å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œè¿ç»´ä½“ç³»ï¼Œç¡®ä¿åŠ¨æ€æ•°æ®æºçš„ç¨³å®šè¿è¡Œã€‚</p>
<h2 data-id="heading-24">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575083657994633243</link>    <guid>https://juejin.cn/post/7575083657994633243</guid>    <pubDate>2025-11-23T02:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994633243" data-draft-id="7575119254313238554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Python,Trae"/> <meta itemprop="datePublished" content="2025-11-23T02:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:21:39.000Z" title="Sun Nov 23 2025 02:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Python ä»¥å…¶ç®€æ´ä¼˜é›…çš„è¯­æ³•ã€å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿå’Œå¹¿æ³›çš„åº”ç”¨é¢†åŸŸï¼Œæˆä¸ºå½“ä»Šæœ€å…·èŒä¸šç«äº‰åŠ›çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚æ— è®ºä½ å¸Œæœ›æˆä¸ºåç«¯å·¥ç¨‹å¸ˆã€æ•°æ®åˆ†æå¸ˆã€è‡ªåŠ¨åŒ–å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯ AI é¢†åŸŸçš„ä¸“å®¶ï¼ŒPython éƒ½èƒ½æä¾›æ¸…æ™°çš„è·¯å¾„ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡æ–‡ç« å°†ä»èŒä¸šæ–¹å‘ã€æŠ€èƒ½æˆé•¿è·¯çº¿ã€å¿…å¤‡å·¥å…·é“¾ã€è¿›é˜¶å­¦ä¹ å»ºè®®å’Œå°±ä¸šè§„åˆ’å‡ ä¸ªç»´åº¦ï¼Œæ„å»ºä¸€å¥—å®Œæ•´çš„ Python èŒä¸šå‘å±•è·¯çº¿å›¾ï¼Œå¸®åŠ©è¯»è€…å®ç°ä»å…¥é—¨åˆ°ä¸“ä¸šçº§å¼€å‘è€…çš„æˆé•¿ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Pythonçš„ä¸»æµèŒä¸šæ–¹å‘</h2>
<p>Python çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶é€‚ç”¨çš„å²—ä½éå¸¸å¹¿æ³›ï¼Œç›®å‰æœ€çƒ­é—¨çš„æ–¹å‘åŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-1">1. åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆDjango / Flask / FastAPIï¼‰</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ„å»º Web API</li>
<li>ä¸šåŠ¡é€»è¾‘å¼€å‘</li>
<li>æ•°æ®åº“ä¸ç¼“å­˜è®¾è®¡</li>
<li>é«˜å¹¶å‘ä¸åˆ†å¸ƒå¼ç³»ç»Ÿä¼˜åŒ–</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Djangoã€FastAPIã€Flaskã€MySQLã€Redisã€Celeryã€Nginxã€Docker</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢å·¥ç¨‹æ¶æ„ã€ä¸šåŠ¡å¼€å‘ã€ç³»ç»Ÿè®¾è®¡çš„äººã€‚</p>
<hr/>
<h3 data-id="heading-2">2. æ•°æ®åˆ†æå¸ˆ / æ•°æ®å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ•°æ®æ¸…æ´—å’Œç»Ÿè®¡åˆ†æ</li>
<li>æ„å»ºæŠ¥è¡¨å’Œå¯è§†åŒ–</li>
<li>æ•°æ®ä»“åº“æ„å»º</li>
<li>ETL æµç¨‹æ­å»º</li>
</ul>
<p>å¸¸ç”¨å·¥å…·ï¼š
Pandasã€NumPyã€Matplotlibã€PySparkã€SQLã€Tableau</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æ•°æ®ã€é€»è¾‘åˆ†æã€å•†ä¸šæ´å¯Ÿçš„äººã€‚</p>
<hr/>
<h3 data-id="heading-3">3. äººå·¥æ™ºèƒ½ä¸æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>è®­ç»ƒ ML/DL æ¨¡å‹</li>
<li>ç‰¹å¾å·¥ç¨‹</li>
<li>AI åº”ç”¨éƒ¨ç½²ï¼ˆæ¨¡å‹æœåŠ¡åŒ–ï¼‰</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Scikit-Learnã€TensorFlowã€PyTorchã€FastAPIã€ONNX</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æ•°å­¦ã€ç®—æ³•ã€æ¨¡å‹è®­ç»ƒä¸ç ”ç©¶ã€‚</p>
<hr/>
<h3 data-id="heading-4">4. è‡ªåŠ¨åŒ–è¿ç»´ / DevOps å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ‰¹é‡è¿ç»´è„šæœ¬å¼€å‘</li>
<li>è‡ªåŠ¨éƒ¨ç½²ä¸ CICD</li>
<li>ç³»ç»Ÿç›‘æ§ä¸ç®¡ç†</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Ansibleã€Fabricã€Shellã€Dockerã€Kubernetes</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢è‡ªåŠ¨åŒ–ã€ç³»ç»Ÿç®¡ç†ã€æ•ˆç‡æå‡çš„äººã€‚</p>
<hr/>
<h3 data-id="heading-5">5. æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆï¼ˆTest Developmentï¼‰</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</li>
<li>æ¥å£æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•</li>
<li>æŒç»­é›†æˆæµ‹è¯•ä½“ç³»</li>
</ul>
<p>å¸¸ç”¨å·¥å…·ï¼š
pytestã€unittestã€Seleniumã€JMeterã€Allure</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æµç¨‹ä¸¥è°¨ã€å…³æ³¨ç»†èŠ‚ã€çƒ­çˆ±è´¨é‡å·¥ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-6">6. çˆ¬è™«å·¥ç¨‹å¸ˆ / ä¿¡æ¯é‡‡é›†å¼€å‘</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>é«˜æ€§èƒ½çˆ¬è™«ç¼–å†™</li>
<li>æ•°æ®æŠ“å–ä¸å»é‡</li>
<li>åçˆ¬çªç ´ä¸ä»£ç†æ± æ„å»º</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯ï¼š
requestsã€BeautifulSoupã€Scrapyã€Selenium</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢åˆ†æç½‘é¡µç»“æ„ã€è§£å†³åçˆ¬æŒ‘æˆ˜ã€‚</p>
<hr/>
<h2 data-id="heading-7">äºŒã€æˆé•¿è·¯çº¿å›¾ï¼šä»æ–°æ‰‹åˆ°é«˜çº§å¼€å‘è€…</h2>
<p>ä¸‹é¢æ˜¯ä¸€æ¡é€šç”¨çš„ Python ç¨‹åºå‘˜æˆé•¿è·¯å¾„ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>é˜¶æ®µä¸€ï¼šåŸºç¡€è¯­æ³•ï¼ˆ0â€“2ä¸ªæœˆï¼‰</strong></h3>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>Python åŸºç¡€è¯­æ³•ã€æ•°æ®ç±»å‹ã€æ§åˆ¶æµ</li>
<li>å‡½æ•°ã€æ¨¡å—ã€åŒ…</li>
<li>æ–‡ä»¶ä¸ JSON å¤„ç†</li>
<li>é¢å‘å¯¹è±¡åŸºç¡€</li>
</ul>
<p>ç›®æ ‡æˆæœï¼š
èƒ½è¯»æ‡‚å¹¶ç¼–å†™ç®€å•è„šæœ¬ï¼Œå®Œæˆå°å‹ç¨‹åºã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>é˜¶æ®µäºŒï¼šå®æˆ˜èƒ½åŠ›æå‡ï¼ˆ2â€“6ä¸ªæœˆï¼‰</strong></h3>
<p>éœ€è¦æŒæ¡ï¼š</p>
<ul>
<li>requestsã€pandasã€openpyxl ç­‰å·¥å…·åº“</li>
<li>loggingã€pytestã€venv çš„ä½¿ç”¨</li>
<li>Flask/Django å…¥é—¨</li>
<li>Git ç‰ˆæœ¬ç®¡ç†</li>
</ul>
<p>å¯å®Œæˆï¼š</p>
<ul>
<li>å®ç”¨å·¥å…·å¼€å‘ï¼ˆExcel æ‰¹å¤„ç†ã€çˆ¬è™«è„šæœ¬ï¼‰</li>
<li>å°å‹ Web æœåŠ¡ API</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>é˜¶æ®µä¸‰ï¼šèŒä¸šæ–¹å‘ä¸“ç²¾ï¼ˆ6â€“18ä¸ªæœˆï¼‰</strong></h3>
<p>æ ¹æ®ç›®æ ‡æ–¹å‘å­¦ä¹ ä¸åŒæŠ€èƒ½ï¼š</p>
<h4 data-id="heading-11">åç«¯æ–¹å‘</h4>
<ul>
<li>Django æ·±å…¥ï¼šORMã€MiddleWareã€RestFramework</li>
<li>FastAPI å¼‚æ­¥å¼€å‘</li>
<li>æ•°æ®åº“ä¼˜åŒ–</li>
<li>Dockerã€CI/CD</li>
</ul>
<h4 data-id="heading-12">æ•°æ®åˆ†ææ–¹å‘</h4>
<ul>
<li>Pandas ç†Ÿç»ƒæŒæ¡</li>
<li>æ•°æ®å¯è§†åŒ–ï¼ˆMatplotlibã€Seabornï¼‰</li>
<li>æœºå™¨å­¦ä¹ åŸºç¡€ï¼ˆScikit-learnï¼‰</li>
<li>SQL ç²¾é€š</li>
</ul>
<h4 data-id="heading-13">AI æ–¹å‘</h4>
<ul>
<li>æœºå™¨å­¦ä¹ </li>
<li>æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆPyTorchï¼‰</li>
<li>æ¨¡å‹éƒ¨ç½²</li>
</ul>
<h4 data-id="heading-14">è¿ç»´æ–¹å‘</h4>
<ul>
<li>Linuxã€Shell</li>
<li>Ansibleã€Fabric è‡ªåŠ¨åŒ–è„šæœ¬</li>
<li>Kubernetes</li>
</ul>
<hr/>
<h3 data-id="heading-15"><strong>é˜¶æ®µå››ï¼šé«˜çº§æŠ€èƒ½å¼ºåŒ–ï¼ˆ18â€“36ä¸ªæœˆï¼‰</strong></h3>
<p>æå‡å†…å®¹ï¼š</p>
<ul>
<li>ä»£ç è§„èŒƒä¸æ¶æ„èƒ½åŠ›</li>
<li>é«˜æ€§èƒ½ä¼˜åŒ–ä¸å¹¶å‘ç¼–ç¨‹</li>
<li>å¤§å‹é¡¹ç›®çš„æ¨¡å—åŒ–è®¾è®¡</li>
<li>ä¸šåŠ¡æ¶æ„ç†è§£ä¸ç³»ç»Ÿè®¾è®¡</li>
</ul>
<p>ç›®æ ‡ï¼š
å¯ä»¥æ‰¿æ‹…ä¸­å¤§å‹é¡¹ç›®è®¾è®¡ï¼Œæˆä¸ºå›¢é˜Ÿæ ¸å¿ƒå¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¸‰ã€å¿…å¤‡å·¥å…·é“¾</h2>
<p>æ— è®ºèµ°å“ªä¸ªæ–¹å‘ï¼ŒPython å¼€å‘è€…éƒ½éœ€è¦æŒæ¡ä»¥ä¸‹å·¥å…·ç”Ÿæ€ï¼š</p>
<h3 data-id="heading-17">ä»£ç ä¸ç¯å¢ƒå·¥å…·</h3>
<ul>
<li>Git / GitHub</li>
<li>venvã€condaã€poetry</li>
<li>Docker å®¹å™¨</li>
</ul>
<h3 data-id="heading-18">è°ƒè¯•ä¸æµ‹è¯•å·¥å…·</h3>
<ul>
<li>pdbã€logging</li>
<li>pytestã€coverage</li>
</ul>
<h3 data-id="heading-19">æ€§èƒ½åˆ†æå·¥å…·</h3>
<ul>
<li>timeit</li>
<li>cProfile</li>
<li>memory-profiler</li>
</ul>
<h3 data-id="heading-20">éƒ¨ç½²å·¥å…·</h3>
<ul>
<li>Gunicorn + Nginx</li>
<li>Docker Compose</li>
<li>CI/CDï¼ˆGitHub Actionsï¼‰</li>
</ul>
<p>è¿™äº›å·¥å…·å°†ä¼´éšä½ æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ã€‚</p>
<hr/>
<h2 data-id="heading-21">å››ã€å¦‚ä½•é€‰æ‹©é€‚åˆè‡ªå·±çš„æ–¹å‘ï¼Ÿ</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„é€‰æ‹©å‚è€ƒï¼š</p>

































<table><thead><tr><th>å…´è¶£ç±»å‹</th><th>æ¨èæ–¹å‘</th></tr></thead><tbody><tr><td>å–œæ¬¢ä¸šåŠ¡å¼€å‘ã€æ¶æ„è®¾è®¡</td><td>åç«¯å¼€å‘</td></tr><tr><td>å–œæ¬¢æ•°æ®å’Œåˆ†æ</td><td>æ•°æ®åˆ†æå¸ˆ</td></tr><tr><td>å–œæ¬¢æ•°å­¦å’Œç®—æ³•</td><td>AI å·¥ç¨‹å¸ˆ</td></tr><tr><td>å–œæ¬¢ç³»ç»Ÿç®¡ç†</td><td>è‡ªåŠ¨åŒ–è¿ç»´</td></tr><tr><td>å–œæ¬¢æµ‹è¯•ä¸è´¨é‡å·¥ç¨‹</td><td>æµ‹è¯•å¼€å‘</td></tr><tr><td>å–œæ¬¢ç ”ç©¶ç½‘é¡µç»“æ„ä¸çªç ´åçˆ¬</td><td>çˆ¬è™«å·¥ç¨‹å¸ˆ</td></tr></tbody></table>
<p>æ²¡æœ‰æœ€å¥½çš„æ–¹å‘ï¼Œåªæœ‰æœ€é€‚åˆä½ çš„æ–¹å‘ã€‚</p>
<hr/>
<h2 data-id="heading-22">äº”ã€æ±‚èŒå‡†å¤‡ï¼šä»é¡¹ç›®åˆ°é¢è¯•</h2>
<h3 data-id="heading-23">1. é¡¹ç›®å‡†å¤‡</h3>
<p>æ ¹æ®æ–¹å‘å‡†å¤‡è‡³å°‘ 2â€“4 ä¸ªå¯å±•ç¤ºçš„å®æˆ˜é¡¹ç›®ï¼š</p>
<p>åç«¯æ–¹å‘ï¼š</p>
<ul>
<li>Django/Flask ç®¡ç†ç³»ç»Ÿ</li>
<li>FastAPI + Vue å…¨æ ˆé¡¹ç›®</li>
</ul>
<p>æ•°æ®æ–¹å‘ï¼š</p>
<ul>
<li>æ•°æ®åˆ†ææŠ¥å‘Š</li>
<li>æ•°æ®å¯è§†åŒ– dashboard</li>
</ul>
<p>AI æ–¹å‘ï¼š</p>
<ul>
<li>å›å½’/åˆ†ç±»æ¨¡å‹</li>
<li>æ·±åº¦å­¦ä¹ å°é¡¹ç›®</li>
</ul>
<p>è‡ªåŠ¨åŒ–è¿ç»´æ–¹å‘ï¼š</p>
<ul>
<li>è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿ</li>
<li>æ‰¹é‡æ—¥å¿—é‡‡é›†è„šæœ¬</li>
</ul>
<hr/>
<h3 data-id="heading-24">2. ç®€å†å»ºè®®</h3>
<ul>
<li>ç”¨é¡¹ç›®ä½“ç°èƒ½åŠ›ï¼Œä¸å †æŠ€èƒ½å…³é”®è¯</li>
<li>é‡åŒ–æˆæœï¼ˆå¦‚â€œæ¥å£å“åº”é€Ÿåº¦é™ä½30ï¼…â€ï¼‰</li>
<li>å±•ç¤º GitHub é“¾æ¥</li>
</ul>
<hr/>
<h3 data-id="heading-25">3. é¢è¯•å‡†å¤‡</h3>
<ul>
<li>Python åŸºç¡€ä¸ç®—æ³•</li>
<li>æ•°æ®ç»“æ„ä¸ 15 ä¸ªå¸¸è§é¢è¯•æ¨¡å—</li>
<li>æ–¹å‘ç›¸å…³æ¡†æ¶åŸç†</li>
</ul>
<hr/>
<h2 data-id="heading-26">å…­ã€æ€»ç»“ï¼šPython æ˜¯ä¸€æ¡å¯é•¿ä¹…æ·±è€•çš„èŒä¸šä¹‹è·¯</h2>
<p>Python çš„ç”Ÿæ€è¦†ç›–è½¯ä»¶å·¥ç¨‹æœ€ä¸»æµçš„æ‰€æœ‰é¢†åŸŸï¼Œå› æ­¤æ— è®ºä½ æƒ³èµ°å“ªæ¡èŒä¸šè·¯çº¿ï¼Œéƒ½èƒ½åœ¨ Python è¯­è¨€ä½“ç³»ä¸­æ‰¾åˆ°æ¸…æ™°çš„æˆé•¿è·¯å¾„ã€‚</p>
<p>ä»åŸºç¡€è¯­æ³•å¼€å§‹ï¼Œé€æ¸æ·±å…¥æ¡†æ¶ä¸å·¥å…·ï¼Œå†è¿›è¡Œæ–¹å‘åŒ–ä¸“ç²¾ï¼Œæœ€ç»ˆä½ å¯ä»¥æˆé•¿ä¸ºå…¨æ ˆå¼€å‘ã€æ•°æ®ä¸“å®¶ï¼Œæˆ– AI é«˜çº§å·¥ç¨‹å¸ˆã€‚</p>
<p>çœŸæ­£çš„æˆé•¿å…³é”®åªæœ‰ä¸¤ä¸ªï¼š
æŒç»­å­¦ä¹ 
æŒç»­å®è·µ</p>
<p>æ— è®ºä½ ç°åœ¨å¤„äºå“ªä¸ªé˜¶æ®µï¼Œéƒ½å¯ä»¥ä»ä»Šå¤©å¼€å§‹æ„å»ºè‡ªå·±çš„ Python èŒä¸šè·¯çº¿å›¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575103881421717558</link>    <guid>https://juejin.cn/post/7575103881421717558</guid>    <pubDate>2025-11-22T11:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881421717558" data-draft-id="7575230119103922217" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-22T11:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:07:21.000Z" title="Sat Nov 22 2025 11:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è½®æ’­å›¾ï¼ˆCarouselï¼‰æ˜¯ç°ä»£ç½‘é¡µè®¾è®¡ä¸­ä¸å¯æˆ–ç¼ºçš„äº¤äº’å…ƒç´ ï¼Œæ— è®ºæ˜¯å•†å“å±•ç¤ºã€ç„¦ç‚¹å›¾è¿˜æ˜¯å†…å®¹æ¨èï¼Œéƒ½èƒ½çœ‹åˆ°å®ƒçš„èº«å½±ã€‚ä»Šå¤©æˆ‘è¦å‘å¤§å®¶æ¨èä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€ç®€å•æ˜“ç”¨çš„è½®æ’­å›¾æ’ä»¶â€”â€”<strong>Swiper</strong>ï¼</p>
<h2 data-id="heading-0">Swiper</h2>
<p>Swiperæ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æºçš„ç°ä»£åŒ–è§¦æ‘¸æ»‘åŠ¨æ’ä»¶ï¼Œä¸“é—¨ä¸ºç§»åŠ¨è®¾å¤‡è®¾è®¡ï¼ŒåŒæ—¶ä¹Ÿå®Œç¾æ”¯æŒæ¡Œé¢ç«¯ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„APIå’Œçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åˆ›å»ºå„ç§ç‚«é…·çš„æ»‘åŠ¨æ•ˆæœã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h3>
<ul>
<li>ğŸš€ çº¯JavaScriptå®ç°ï¼Œæ— ä»»ä½•ä¾èµ–</li>
<li>ğŸ“± å®Œç¾æ”¯æŒç§»åŠ¨ç«¯è§¦æ‘¸æ»‘åŠ¨</li>
<li>ğŸ¨ ä¸°å¯Œçš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ</li>
<li>âš¡ é«˜æ€§èƒ½ï¼Œæµç•…ä½“éªŒ</li>
<li>ğŸ”§ é«˜åº¦å¯å®šåˆ¶åŒ–</li>
</ul>
<h2 data-id="heading-2">åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-3">1. å®‰è£…å’Œå¼•å…¥</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥Swiperï¼š</p>
<h4 data-id="heading-4"><strong>CDNæ–¹å¼ï¼š</strong></h4>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼•å…¥Swiper CSS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- HTMLç»“æ„ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥Swiper JS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5"><strong>npmå®‰è£…ï¼š</strong></h4>
<pre><code class="hljs language-bash" lang="bash">npm install swiper
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨é¡¹ç›®ä¸­å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Swiper</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'swiper'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'swiper/css/bundle'</span>;
</code></pre>
<h3 data-id="heading-6">2. åŸºç¡€HTMLç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.css"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.swiper</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">align-items</span>: center;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f44336</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4CAF50</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2196F3</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Swiperå®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper mySwiper"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è½®æ’­é¡¹åŒ…è£¹å™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-wrapper"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•ä¸ªè½®æ’­é¡¹ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- åˆ†é¡µå™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-pagination"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- å¯¼èˆªæŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-button-next"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-button-prev"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ»šåŠ¨æ¡ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-scrollbar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// åˆå§‹åŒ–Swiper</span>
        <span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">".mySwiper"</span>, {
            <span class="hljs-comment">// å¾ªç¯æ’­æ”¾</span>
            <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-comment">// åˆ†é¡µå™¨</span>
            <span class="hljs-attr">pagination</span>: {
                <span class="hljs-attr">el</span>: <span class="hljs-string">".swiper-pagination"</span>,
                <span class="hljs-attr">clickable</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-comment">// å¯¼èˆªæŒ‰é’®</span>
            <span class="hljs-attr">navigation</span>: {
                <span class="hljs-attr">nextEl</span>: <span class="hljs-string">".swiper-button-next"</span>,
                <span class="hljs-attr">prevEl</span>: <span class="hljs-string">".swiper-button-prev"</span>,
            },
            <span class="hljs-comment">// è‡ªåŠ¨æ’­æ”¾</span>
            <span class="hljs-attr">autoplay</span>: {
                <span class="hljs-attr">delay</span>: <span class="hljs-number">3000</span>,
            },
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3. å¸¸ç”¨é…ç½®é€‰é¡¹è¯¦è§£</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-comment">// æ–¹å‘ï¼šhorizontal(æ°´å¹³) æˆ– vertical(å‚ç›´)</span>
    <span class="hljs-attr">direction</span>: <span class="hljs-string">'horizontal'</span>,
    
    <span class="hljs-comment">// å¾ªç¯æ¨¡å¼</span>
    <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span>,
    
    <span class="hljs-comment">// è‡ªåŠ¨æ’­æ”¾</span>
    <span class="hljs-attr">autoplay</span>: {
        <span class="hljs-attr">delay</span>: <span class="hljs-number">3000</span>,        <span class="hljs-comment">// å»¶è¿Ÿ3ç§’</span>
        <span class="hljs-attr">disableOnInteraction</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç”¨æˆ·æ“ä½œåç»§ç»­è‡ªåŠ¨æ’­æ”¾</span>
    },
    
    <span class="hljs-comment">// åˆ†é¡µå™¨é…ç½®</span>
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'bullets'</span>,    <span class="hljs-comment">// bullets(åœ†ç‚¹) | fraction(åˆ†æ•°) | progressbar(è¿›åº¦æ¡)</span>
        <span class="hljs-attr">clickable</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç‚¹å‡»</span>
    },
    
    <span class="hljs-comment">// å¯¼èˆªæŒ‰é’®</span>
    <span class="hljs-attr">navigation</span>: {
        <span class="hljs-attr">nextEl</span>: <span class="hljs-string">'.swiper-button-next'</span>,
        <span class="hljs-attr">prevEl</span>: <span class="hljs-string">'.swiper-button-prev'</span>,
    },
    
    <span class="hljs-comment">// æ»šåŠ¨æ¡</span>
    <span class="hljs-attr">scrollbar</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-scrollbar'</span>,
        <span class="hljs-attr">draggable</span>: <span class="hljs-literal">true</span>,
    },
    
    <span class="hljs-comment">// åˆ‡æ¢æ•ˆæœ</span>
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'slide'</span>, <span class="hljs-comment">// slide(é»˜è®¤) | fade | cube | coverflow | flip</span>
    
    <span class="hljs-comment">//  slidesPerViewï¼šåŒæ—¶æ˜¾ç¤ºçš„slideæ•°é‡</span>
    <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">1</span>,
    
    <span class="hljs-comment">// é—´è·</span>
    <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">30</span>,
    
    <span class="hljs-comment">// æ–­ç‚¹å“åº”å¼é…ç½®</span>
    <span class="hljs-attr">breakpoints</span>: {
        <span class="hljs-comment">// å½“å±å¹•å®½åº¦ &gt;= 640px</span>
        <span class="hljs-number">640</span>: {
            <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">20</span>,
        },
        <span class="hljs-comment">// å½“å±å¹•å®½åº¦ &gt;= 1024px</span>
        <span class="hljs-number">1024</span>: {
            <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">3</span>,
            <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">30</span>,
        },
    }
});
</code></pre>
<h3 data-id="heading-8">4. é«˜çº§æ•ˆæœç¤ºä¾‹</h3>
<p><strong>Coverflowæ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'coverflow'</span>,
    <span class="hljs-attr">grabCursor</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">centeredSlides</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">slidesPerView</span>: <span class="hljs-string">'auto'</span>,
    <span class="hljs-attr">coverflowEffect</span>: {
        <span class="hljs-attr">rotate</span>: <span class="hljs-number">50</span>,
        <span class="hljs-attr">stretch</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">depth</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">modifier</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">slideShadows</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
    },
});
</code></pre>
<p><strong>3Dç«‹æ–¹ä½“æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'cube'</span>,
    <span class="hljs-attr">grabCursor</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cubeEffect</span>: {
        <span class="hljs-attr">shadow</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">slideShadows</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">shadowOffset</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">shadowScale</span>: <span class="hljs-number">0.94</span>,
    },
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
    },
});
</code></pre>
<h2 data-id="heading-9">ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-10">1. å®¹å™¨é«˜åº¦é—®é¢˜</h3>
<p>ç¡®ä¿ä¸ºSwiperå®¹å™¨è®¾ç½®æ˜ç¡®çš„é«˜åº¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ˜¾ç¤ºå¼‚å¸¸ã€‚</p>
<h3 data-id="heading-11">2. å›¾ç‰‡æ‡’åŠ è½½</h3>
<p>å¯¹äºåŒ…å«å›¾ç‰‡çš„è½®æ’­å›¾ï¼Œå»ºè®®å¯ç”¨æ‡’åŠ è½½åŠŸèƒ½ä»¥æé«˜é¡µé¢åŠ è½½æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">lazy</span>: {
    <span class="hljs-attr">loadPrevNext</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">loadOnTransitionStart</span>: <span class="hljs-literal">true</span>,
}
</code></pre>
<h3 data-id="heading-12">3. åŠ¨æ€å†…å®¹å¤„ç†</h3>
<p>å¦‚æœé€šè¿‡AjaxåŠ¨æ€æ·»åŠ slideï¼Œéœ€è¦è°ƒç”¨Swiperå®ä¾‹çš„<code>update()</code>æ–¹æ³•æ¥æ›´æ–°ï¼š</p>
<pre><code class="hljs language-js" lang="js">swiper.<span class="hljs-title function_">update</span>();
</code></pre>
<h3 data-id="heading-13">4. å“åº”å¼é€‚é…</h3>
<p>ä½¿ç”¨<code>breakpoints</code>é…ç½®æ¥ç¡®ä¿åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„è‰¯å¥½æ˜¾ç¤ºæ•ˆæœã€‚</p>
<h3 data-id="heading-14">5. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>é¿å…åœ¨å•ä¸ªé¡µé¢ä¸­åˆ›å»ºè¿‡å¤šSwiperå®ä¾‹</li>
<li>åŠæ—¶é”€æ¯ä¸éœ€è¦çš„Swiperå®ä¾‹ï¼š<code>swiper.destroy()</code></li>
<li>å¯¹äºéšè—çš„è½®æ’­å›¾ï¼Œä½¿ç”¨<code>observer</code>å’Œ<code>observeParents</code>å‚æ•°</li>
</ul>
<h2 data-id="heading-15">æ€»ç»“</h2>
<ol>
<li><strong>ç»“æ„æ¸…æ™°</strong>ï¼šè®°ä½Swiperçš„åŸºç¡€HTMLç»“æ„ - å®¹å™¨(<code>.swiper</code>) &gt; åŒ…è£¹å™¨(<code>.swiper-wrapper</code>) &gt; è½®æ’­é¡¹(<code>.swiper-slide</code>)</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šé€šè¿‡åˆç†çš„é…ç½®é€‰é¡¹ç»„åˆï¼Œå¯ä»¥åˆ›å»ºä»ç®€å•åˆ°å¤æ‚çš„å„ç§è½®æ’­æ•ˆæœ</li>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šåˆç†ä½¿ç”¨æ‡’åŠ è½½ã€åŠæ—¶é”€æ¯å®ä¾‹ã€åšå¥½å“åº”å¼é€‚é…ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒæµç•…</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7575107094801203206</link>    <guid>https://juejin.cn/post/7575107094801203206</guid>    <pubDate>2025-11-22T11:15:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575107094801203206" data-draft-id="7575230119103938601" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-22T11:15:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:15:20.000Z" title="Sat Nov 22 2025 11:15:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒWeb Appå·²ç»æˆä¸ºè¿æ¥ç”¨æˆ·ä¸æœåŠ¡çš„é‡è¦æ¡¥æ¢ã€‚æ— è®ºæ˜¯ç”µå•†å¹³å°ã€ç¤¾äº¤åº”ç”¨è¿˜æ˜¯ä¼ä¸šå·¥å…·ï¼ŒWeb Appéƒ½ä»¥å…¶è·¨å¹³å°ã€æ˜“ç»´æŠ¤çš„ç‰¹æ€§å—åˆ°å¹¿æ³›é’çã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨Web Appå¼€å‘çš„ç¬¬ä¸€æ­¥â€”â€”é¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡ã€‚</p>
<h2 data-id="heading-0">Web App</h2>
<p>Web Appï¼ˆWeb Applicationï¼‰æ˜¯æŒ‡é€šè¿‡æµè§ˆå™¨è®¿é—®çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå…·å¤‡ä¸åŸç”ŸAppç›¸ä¼¼çš„ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½ç‰¹æ€§ã€‚ä¸ä¼ ç»Ÿçš„å“åº”å¼ç½‘ç«™ä¸åŒï¼ŒWeb Appæ›´æ³¨é‡äº¤äº’æ€§å’ŒåŠŸèƒ½æ€§ã€‚</p>
<h3 data-id="heading-1">Web Appçš„æ ¸å¿ƒç‰¹å¾ï¼š</h3>
<ul>
<li>ğŸŒ è·¨å¹³å°å…¼å®¹ï¼ˆä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯è¿è¡Œï¼‰</li>
<li>ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ</li>
<li>âš¡ ç±»åŸç”Ÿçš„ç”¨æˆ·ä½“éªŒ</li>
<li>ğŸ”„ æ”¯æŒç¦»çº¿åŠŸèƒ½ï¼ˆPWAï¼‰</li>
<li>ğŸ” æ— éœ€å®‰è£…ï¼Œå³æ—¶è®¿é—®</li>
</ul>
<h2 data-id="heading-2">é¡µé¢åˆ†æï¼šä»éœ€æ±‚åˆ°ç»“æ„</h2>
<h3 data-id="heading-3">1. é¡µé¢ç»“æ„åˆ†æ</h3>
<p>åœ¨å¼€å§‹ç¼–ç å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹Web Appçš„é¡µé¢ç»“æ„è¿›è¡Œè¯¦ç»†åˆ†æã€‚é€šå¸¸ä¸€ä¸ªWeb AppåŒ…å«ä»¥ä¸‹å…¸å‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç§»åŠ¨ç«¯å¿…å¤‡metaæ ‡ç­¾ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- PWAç›¸å…³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"theme-color"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"#2196f3"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"apple-mobile-web-app-capable"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"yes"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"apple-mobile-web-app-status-bar-style"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"default"</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æˆ‘çš„Web App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/app.css"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥Manifest --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"manifest"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"manifest.json"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- iOSå›¾æ ‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"apple-touch-icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"images/icon-192.png"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åº”ç”¨å¤–å£³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆªæ  --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-toggle"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"èœå•"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-title"</span>&gt;</span>åº”ç”¨åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-button"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"æ“ä½œ"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-more"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹åŒºåŸŸ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-container"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hero-section"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¬¢è¿ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„Web App<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cta-button"</span>&gt;</span>å¼€å§‹ä½“éªŒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- åº•éƒ¨å¯¼èˆª --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-tabbar"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#home"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item active"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-home"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#explore"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-explore"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å‘ç°<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#profile"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-profile"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æˆ‘çš„<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å¼•å…¥JavaScript --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">2. ç§»åŠ¨ç«¯æ ·å¼åŸºç¡€</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é‡ç½®æ ·å¼å’ŒåŸºç¡€è®¾ç½® */</span>
* {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    -webkit-text-size-adjust: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, sans-serif;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">overflow-x</span>: hidden;
}

<span class="hljs-comment">/* åº”ç”¨å®¹å™¨ */</span>
<span class="hljs-selector-id">#app</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100vw</span>;
    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}

<span class="hljs-comment">/* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */</span>
<span class="hljs-selector-class">.app-header</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">44px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
}

<span class="hljs-selector-class">.app-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">17px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;
}

<span class="hljs-comment">/* ä¸»è¦å†…å®¹åŒºåŸŸ */</span>
<span class="hljs-selector-class">.app-main</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">44px</span>; <span class="hljs-comment">/* ä¸ºé¡¶éƒ¨å¯¼èˆªç•™å‡ºç©ºé—´ */</span>
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">50px</span>; <span class="hljs-comment">/* ä¸ºåº•éƒ¨å¯¼èˆªç•™å‡ºç©ºé—´ */</span>
    <span class="hljs-attribute">overflow-y</span>: auto;
    -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch; <span class="hljs-comment">/* iOSå¹³æ»‘æ»šåŠ¨ */</span>
}

<span class="hljs-comment">/* åº•éƒ¨å¯¼èˆªæ  */</span>
<span class="hljs-selector-class">.app-tabbar</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-around;
    <span class="hljs-attribute">align-items</span>: center;
}

<span class="hljs-selector-class">.tab-item</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.tab-item</span><span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#2196f3</span>;
}

<span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-selector-tag">html</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }
}

<span class="hljs-comment">/* æ·±è‰²æ¨¡å¼æ”¯æŒ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
    <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#121212</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    }
    
    <span class="hljs-selector-class">.app-header</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#1e1e1e</span>;
        <span class="hljs-attribute">border-bottom-color</span>: <span class="hljs-number">#333</span>;
    }
}
</code></pre>
<h3 data-id="heading-5">3. åŸºç¡€JavaScriptç»“æ„</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app.js - Web Appä¸»é€»è¾‘</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebApp</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> = <span class="hljs-string">'home'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
    }

    <span class="hljs-comment">// åˆå§‹åŒ–åº”ç”¨</span>
    <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupViewport</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupNavigation</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupServiceWorker</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadInitialData</span>();
    }

    <span class="hljs-comment">// è®¾ç½®è§†å£</span>
    <span class="hljs-title function_">setupViewport</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ç¡®ä¿è§†å£è®¾ç½®æ­£ç¡®</span>
        <span class="hljs-keyword">const</span> viewport = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'meta[name="viewport"]'</span>);
        <span class="hljs-keyword">if</span> (!viewport) {
            <span class="hljs-keyword">const</span> meta = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'meta'</span>);
            meta.<span class="hljs-property">name</span> = <span class="hljs-string">'viewport'</span>;
            meta.<span class="hljs-property">content</span> = <span class="hljs-string">'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(meta);
        }
    }

    <span class="hljs-comment">// è®¾ç½®å¯¼èˆª</span>
    <span class="hljs-title function_">setupNavigation</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.tab-item'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainContent</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.app-main'</span>);
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tab</span> =&gt;</span> {
            tab.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
                e.<span class="hljs-title function_">preventDefault</span>();
                <span class="hljs-keyword">const</span> target = tab.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'href'</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">switchPage</span>(target);
            });
        });
    }

    <span class="hljs-comment">// é¡µé¢åˆ‡æ¢</span>
    <span class="hljs-title function_">switchPage</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-comment">// æ›´æ–°æ´»åŠ¨çŠ¶æ€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tab</span> =&gt;</span> tab.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>));
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`[href="#<span class="hljs-subst">${pageName}</span>"]`</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
        
        <span class="hljs-comment">// æ›´æ–°å½“å‰é¡µé¢</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> = pageName;
        
        <span class="hljs-comment">// åŠ è½½é¡µé¢å†…å®¹</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPageContent</span>(pageName);
    }

    <span class="hljs-comment">// åŠ è½½é¡µé¢å†…å®¹</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadPageContent</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½çŠ¶æ€</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showLoading</span>();
            
            <span class="hljs-comment">// æ¨¡æ‹ŸAPIè°ƒç”¨</span>
            <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchPageData</span>(pageName);
            
            <span class="hljs-comment">// æ›´æ–°DOM</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updatePageContent</span>(content);
            
            <span class="hljs-comment">// éšè—åŠ è½½çŠ¶æ€</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hideLoading</span>();
            
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å¤±è´¥:'</span>, error);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showError</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
        }
    }

    <span class="hljs-comment">// è·å–é¡µé¢æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchPageData</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥æ˜¯APIè°ƒç”¨</span>
        <span class="hljs-keyword">const</span> mockData = {
            <span class="hljs-attr">home</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;é¦–é¡µå†…å®¹&lt;/h2&gt;&lt;p&gt;æ¬¢è¿æ¥åˆ°é¦–é¡µ&lt;/p&gt;&lt;/section&gt;'</span>,
            <span class="hljs-attr">explore</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;å‘ç°é¡µé¢&lt;/h2&gt;&lt;p&gt;æ¢ç´¢ç²¾å½©å†…å®¹&lt;/p&gt;&lt;/section&gt;'</span>,
            <span class="hljs-attr">profile</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;ä¸ªäººä¸­å¿ƒ&lt;/h2&gt;&lt;p&gt;è¿™é‡Œæ˜¯ä¸ªäººèµ„æ–™&lt;/p&gt;&lt;/section&gt;'</span>
        };
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(mockData[pageName]), <span class="hljs-number">500</span>);
        });
    }

    <span class="hljs-comment">// æ›´æ–°é¡µé¢å†…å®¹</span>
    <span class="hljs-title function_">updatePageContent</span>(<span class="hljs-params">content</span>) {
        <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainContent</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.page-container'</span>);
        container.<span class="hljs-property">innerHTML</span> = content;
        
        <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œç”¨äºç»„ä»¶åˆå§‹åŒ–</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerPageChange</span>();
    }

    <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½çŠ¶æ€</span>
    <span class="hljs-title function_">showLoading</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å®ç°åŠ è½½æŒ‡ç¤ºå™¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¾ç¤ºåŠ è½½çŠ¶æ€'</span>);
    }

    <span class="hljs-comment">// éšè—åŠ è½½çŠ¶æ€</span>
    <span class="hljs-title function_">hideLoading</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// éšè—åŠ è½½æŒ‡ç¤ºå™¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éšè—åŠ è½½çŠ¶æ€'</span>);
    }

    <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">showError</span>(<span class="hljs-params">message</span>) {
        <span class="hljs-comment">// å®ç°é”™è¯¯æç¤º</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, message);
    }

    <span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
    <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¤„ç†åé€€æŒ‰é’®</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
        
        <span class="hljs-comment">// é˜²æ­¢æ©¡çš®ç­‹æ•ˆæœ</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchmove'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (e.<span class="hljs-property">scale</span> !== <span class="hljs-number">1</span>) {
                e.<span class="hljs-title function_">preventDefault</span>();
            }
        }, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">false</span> });
    }

    <span class="hljs-comment">// å¤„ç†æµè§ˆå™¨å†å²</span>
    <span class="hljs-title function_">handlePopState</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-comment">// å¤„ç†æµè§ˆå™¨åé€€/å‰è¿›</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å†å²çŠ¶æ€å˜åŒ–'</span>, event.<span class="hljs-property">state</span>);
    }

    <span class="hljs-comment">// æ³¨å†ŒService Worker</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">setupServiceWorker</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> registration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">workbox</span>.<span class="hljs-title function_">register</span>();
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸ:'</span>, registration);
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†Œå¤±è´¥:'</span>, error);
            }
        }
    }

    <span class="hljs-comment">// åŠ è½½åˆå§‹æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadInitialData</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// åº”ç”¨å¯åŠ¨æ—¶çš„æ•°æ®åˆå§‹åŒ–</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŠ è½½åˆå§‹æ•°æ®'</span>);
    }

    <span class="hljs-comment">// è§¦å‘é¡µé¢å˜åŒ–äº‹ä»¶</span>
    <span class="hljs-title function_">triggerPageChange</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'pageChanged'</span>, {
            <span class="hljs-attr">detail</span>: { <span class="hljs-attr">page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> }
        }));
    }
}

<span class="hljs-comment">// åº”ç”¨å¯åŠ¨</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">app</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebApp</span>();
});
</code></pre>
<h3 data-id="heading-6">4. PWAé…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// manifest.json</span>
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„Web App"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"short_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyApp"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€ä¸ªç°ä»£åŒ–çš„Webåº”ç”¨ç¨‹åº"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"display"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standalone"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"background_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#2196f3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"orientation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"portrait"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"scope"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-72x72.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"72x72"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-96x96.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"96x96"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-128x128.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"128x128"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-144x144.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"144x144"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-152x152.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"152x152"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-192x192.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192x192"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-384x384.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"384x384"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-512x512.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"512x512"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-7">å¼€å‘ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-8">1. ç°ä»£å‰ç«¯å¼€å‘ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// package.json ç¤ºä¾‹</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"web-app-project"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç°ä»£åŒ–Web Appé¡¹ç›®"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"module"</span>,
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"vite"</span>,
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>,
    <span class="hljs-string">"preview"</span>: <span class="hljs-string">"vite preview"</span>,
    <span class="hljs-string">"serve"</span>: <span class="hljs-string">"serve dist -s"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"vite"</span>: <span class="hljs-string">"^4.0.0"</span>,
    <span class="hljs-string">"@vitejs/plugin-legacy"</span>: <span class="hljs-string">"^4.0.0"</span>,
    <span class="hljs-string">"serve"</span>: <span class="hljs-string">"^14.0.0"</span>
  },
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"workbox-build"</span>: <span class="hljs-string">"^6.0.0"</span>
  }
}
</code></pre>
<h3 data-id="heading-9">2. Viteæ„å»ºé…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> legacy <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-legacy'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">legacy</span>({
            <span class="hljs-attr">targets</span>: [<span class="hljs-string">'defaults'</span>, <span class="hljs-string">'not IE 11'</span>]
        })
    ],
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">outDir</span>: <span class="hljs-string">'dist'</span>,
        <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">'assets'</span>,
        <span class="hljs-attr">rollupOptions</span>: {
            <span class="hljs-attr">input</span>: {
                <span class="hljs-attr">main</span>: <span class="hljs-string">'./index.html'</span>
            }
        }
    },
    <span class="hljs-attr">server</span>: {
        <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>
    }
});
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<ol>
<li><strong>ç§»åŠ¨ä¼˜å…ˆè®¾è®¡</strong>ï¼šä»ç§»åŠ¨ç«¯ä½“éªŒå‡ºå‘ï¼Œç¡®ä¿åœ¨å°å±å¹•ä¸Šçš„å¯ç”¨æ€§å’Œç¾è§‚æ€§</li>
<li><strong>æ¸è¿›å¼å¢å¼º</strong>ï¼šåŸºç¡€åŠŸèƒ½æ‰€æœ‰è®¾å¤‡å¯ç”¨ï¼Œé«˜çº§åŠŸèƒ½é€æ­¥å¢å¼º</li>
<li><strong>æ€§èƒ½å³ä½“éªŒ</strong>ï¼šåŠ è½½é€Ÿåº¦ã€æµç•…åº¦ç›´æ¥å½±å“ç”¨æˆ·ç•™å­˜ï¼Œå¿…é¡»é‡è§†æ€§èƒ½ä¼˜åŒ–</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡]]></title>    <link>https://juejin.cn/post/7575093624902516777</link>    <guid>https://juejin.cn/post/7575093624902516777</guid>    <pubDate>2025-11-22T12:33:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575093624902516777" data-draft-id="7575230119103954985" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T12:33:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaterFly"/> <meta itemprop="url" content="https://juejin.cn/user/1204720474535063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1204720474535063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaterFly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T12:33:17.000Z" title="Sat Nov 22 2025 12:33:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™åº”ç”¨æœ€é‡è¦çš„æ˜¯UIï¼Œè¿™é‡Œä»‹ç»ä¸‹å¸¸ç”¨çš„UIç»„ä»¶ã€å¸ƒå±€æ¦‚å¿µã€çº¦æŸæ¦‚å¿µç­‰ã€‚
è¿™æ˜¯Flutterå››éƒ¨æ›²çš„æœ€åä¸€ç¯‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Flutter UWidget</h2>
<h3 data-id="heading-1">1.1 åŸºç¡€ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f72154440ed04032ba46afbb273dff14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Rd%2BB8cZRb8ttCKK%2FxBGzpC5LtDw%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-2">1.1.1 Text</h4>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-comment">// è®¡æ•°å™¨ï¼Œæ˜¾ç¤ºå˜é‡</span>
  <span class="hljs-selector-tag">Text</span>(
    <span class="hljs-string">'$_counter'</span>,
    <span class="hljs-attribute">style</span>: const <span class="hljs-built_in">TextStyle</span>(
      <span class="hljs-attribute">color</span>: Colors.red,
      <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">32</span>,
      <span class="hljs-attribute">fontWeight</span>: FontWeight.bold,
    ),
  ),
  
  <span class="hljs-comment">// å¯Œæ–‡æœ¬ Text.richã€RichText</span>
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">Text</span><span class="hljs-selector-class">.rich</span>(<span class="hljs-built_in">TextSpan</span>(
    <span class="hljs-attribute">text</span>: <span class="hljs-string">'This is a '</span>,
    <span class="hljs-attribute">children</span>: &lt;TextSpan&gt;[
      <span class="hljs-built_in">TextSpan</span>(
        <span class="hljs-attribute">text</span>: <span class="hljs-string">'rich'</span>,
        <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(
            <span class="hljs-attribute">fontWeight</span>: FontWeight.bold, <span class="hljs-attribute">color</span>: Colors.blue),
      ),
      <span class="hljs-built_in">TextSpan</span>(
          <span class="hljs-attribute">text</span>: <span class="hljs-string">' text example.'</span>,
          <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.green)),
    ],
  )),
</code></pre>
<p>Â </p>
<ul>
<li>Text</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff2bd4cdbeb43f981ba8720c352cf8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=AgOpFh%2Fs%2B0vbFaGncdV5r%2FxggyY%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<ul>
<li>TextStyle</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9cf434882647f39eb080eb5088df6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=e0hBkags3gsmQraahl7yrIjqLCw%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-3">1.1.2 Color</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// `FF` for the alpha</span>
const <span class="hljs-attribute">Color</span>(<span class="hljs-number">0</span>xFFE4E4E4)
Â 
Colors<span class="hljs-selector-class">.red</span>
Colors<span class="hljs-selector-class">.blue</span>
Colors<span class="hljs-selector-class">.green</span>
</code></pre>
<p>Â </p>
<h4 data-id="heading-4">1.1.3 Button</h4>
<ul>
<li>ElevatedButtonï¼Œå‡¸èµ·æŒ‰é’®ï¼Œå³"æ¼‚æµ®"æŒ‰é’®ï¼Œå®ƒé»˜è®¤å¸¦æœ‰é˜´å½±å’Œç°è‰²èƒŒæ™¯ã€‚æŒ‰ä¸‹åï¼Œé˜´å½±ä¼šå˜å¤§</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ElevatedButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
);
Â 
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aa643247b634e5a9c4ef487a60a41b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=emYGr%2BUruIRx4ra%2FJbGEJbWRZSg%3D" alt="" loading="lazy"/></p>
<ul>
<li>TextButtonï¼Œæ–‡æœ¬æŒ‰é’®ï¼Œé»˜è®¤èƒŒæ™¯é€æ˜å¹¶ä¸å¸¦é˜´å½±ã€‚æŒ‰ä¸‹åï¼Œä¼šæœ‰èƒŒæ™¯è‰²</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">TextButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb34e58f6a67434483a85abfb56db249~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=jTuJLasyK7Tq4R3daSb7oSYqs%2BU%3D" alt="" loading="lazy"/></p>
<ul>
<li>OutlinedButtonï¼Œè½®å»“æŒ‰é’®ï¼Œé»˜è®¤æœ‰ä¸€ä¸ªè¾¹æ¡†ï¼Œä¸å¸¦é˜´å½±ä¸”èƒŒæ™¯é€æ˜ã€‚æŒ‰ä¸‹åï¼Œè¾¹æ¡†é¢œè‰²ä¼šå˜äº®ã€åŒæ—¶å‡ºç°èƒŒæ™¯å’Œé˜´å½±(è¾ƒå¼±)</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">OutlinedButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7366eb4306c84bd7beffbfc6c51c2ac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=ycDL2t1Qxkp%2FEgPwYggXgsceJo4%3D" alt="" loading="lazy"/></p>
<ul>
<li>IconButtonï¼Œå›¾æ ‡æŒ‰é’®ï¼Œæ˜¯ä¸€ä¸ªå¯ç‚¹å‡»çš„Iconï¼Œä¸åŒ…æ‹¬æ–‡å­—ï¼Œé»˜è®¤æ²¡æœ‰èƒŒæ™¯ï¼Œç‚¹å‡»åä¼šå‡ºç°èƒŒæ™¯</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">IconButton</span>(
  <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.thumb_up),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/245b832407bf41c8aab460fee8dbd338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oSO1PxMDrbAjH%2FdnufBQR%2F%2Bqu%2F0%3D" alt="" loading="lazy"/></p>
<ul>
<li>FloatingActionButtonï¼Œæ‚¬æµ®æŒ‰é’®ï¼Œåœ†å½¢æ‚¬æµ®æŒ‰é’®ï¼Œç”¨äºæ ¸å¿ƒå…¨å±€æ“ä½œï¼ˆå¦‚â€œæ–°å»ºâ€ï¼‰</li>
</ul>

<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">FloatingActionButton</span>(
    <span class="hljs-attribute">onPressed</span>: _incrementCounter,
    <span class="hljs-attribute">tooltip</span>: <span class="hljs-string">'Increment'</span>,
    <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Icon</span>(Icons.add),
  ),
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/503b0b03d817481187ecb9fd2a3bb554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Fvy5QKFjFdOfWCIdw0gPYaVxqJs%3D" alt="" loading="lazy"/></p>
<p>Â </p>



































<table><thead><tr><th>æŒ‰é’®ç±»å‹</th><th>è®¾è®¡ç‰¹ç‚¹</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>ElevatedButton</td><td>å‡¸èµ·é˜´å½±+èƒŒæ™¯è‰²</td><td>ä¸»è¦æ“ä½œï¼ˆæäº¤ã€ç¡®è®¤ï¼‰</td></tr><tr><td>TextButton</td><td>æ‰å¹³æ— è¾¹æ¡†</td><td>æ¬¡è¦æ“ä½œï¼ˆå–æ¶ˆã€è·³è¿‡ï¼‰</td></tr><tr><td>OutlinedButton</td><td>è¾¹æ¡†+æ— å¡«å……</td><td>ä¸­æ€§æ“ä½œï¼ˆç­›é€‰ã€å¯¼å‡ºï¼‰</td></tr><tr><td>IconButton</td><td>çº¯å›¾æ ‡</td><td>å·¥å…·æ åŠ¨ä½œï¼ˆåˆ é™¤ã€æœç´¢ï¼‰</td></tr><tr><td>FloatingActionButton</td><td>åœ†å½¢æ‚¬æµ®</td><td>å…¨å±€æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ–°å¢ã€åˆ·æ–°ï¼‰</td></tr></tbody></table>
<p>Â </p>
<h4 data-id="heading-5">1.1.4 Image</h4>
<p>æ³¨ï¼šé…ç½®æœ¬åœ°å›¾ç‰‡éœ€è¦åœ¨pubspec.yamlä¸­è®¾ç½®</p>
<pre><code class="hljs language-php" lang="php">flutter:
  <span class="hljs-comment"># é…ç½®è·¯å¾„åæ‰èƒ½ä½¿ç”¨</span>
  assets:
    - assets/images/
Â 
  <span class="hljs-comment">// æœ¬åœ°å›¾ç‰‡</span>
  Image.<span class="hljs-title function_ invoke__">asset</span>(
    <span class="hljs-string">'assets/images/icon_arrow_right.png'</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">14</span>,
  )
  
  <span class="hljs-comment">// ç½‘ç»œå›¾ç‰‡</span>
  Image.<span class="hljs-title function_ invoke__">network</span>(item.bankLogo!)
  
</code></pre>
<p>Â </p>
<h4 data-id="heading-6">1.1.5 Icon</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-title">Icon</span>(<span class="hljs-params">Icons.<span class="hljs-keyword">add</span></span>)
</span></code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fstyles%2Ficons%2Foverview" target="_blank" title="https://m3.material.io/styles/icons/overview" ref="nofollow noopener noreferrer">Icons â€“ Material Design 3</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffonts.google.com%2Ficons" target="_blank" title="https://fonts.google.com/icons" ref="nofollow noopener noreferrer">Google fonts</a>ï¼ŒæŸ¥çœ‹æ‰€æœ‰Material icons</li>
</ul>
<p>Â </p>
<h4 data-id="heading-7">1.1.6 TextField</h4>
<ul>
<li>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.flutterchina.club%2Fchapter3%2Finput_and_form.html%23_3-5-1-textfield" target="_blank" title="https://book.flutterchina.club/chapter3/input_and_form.html#_3-5-1-textfield" ref="nofollow noopener noreferrer">è¾“å…¥æ¡†åŠè¡¨å•</a></li>
</ul>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a98eed88ad44401816da14ca5f4d916~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oamS26n7vn%2FinrNjRZTg7%2FqeMlw%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Column</span>(
  <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
    <span class="hljs-built_in">TextField</span>(
      <span class="hljs-attribute">autofocus</span>: true,
      <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">InputDecoration</span>(
        <span class="hljs-attribute">labelText</span>: <span class="hljs-string">"ç”¨æˆ·å"</span>,
        <span class="hljs-attribute">hintText</span>: <span class="hljs-string">"ç”¨æˆ·åæˆ–é‚®ç®±"</span>,
        <span class="hljs-attribute">prefixIcon</span>: <span class="hljs-built_in">Icon</span>(Icons.person)
      ),
    ),
    <span class="hljs-built_in">TextField</span>(
      <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">InputDecoration</span>(
        <span class="hljs-attribute">labelText</span>: <span class="hljs-string">"å¯†ç "</span>,
        <span class="hljs-attribute">hintText</span>: <span class="hljs-string">"æ‚¨çš„ç™»å½•å¯†ç "</span>,
        <span class="hljs-attribute">prefixIcon</span>: <span class="hljs-built_in">Icon</span>(Icons.lock)
      ),
      <span class="hljs-attribute">obscureText</span>: true,
    ),
  ],
);
</code></pre>
<p>Â </p>
<h3 data-id="heading-8">1.2 å®¹å™¨è£…é¥°ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/523a5152d5e643ca97fea0d95767b261~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=nHvuyY2DZ%2BdwTK34Cp%2FQOGXfjxo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-9">1.2.1 Padding</h4>
<p>Paddingå¯ä»¥ç»™å…¶å­èŠ‚ç‚¹æ·»åŠ å¡«å……ï¼ˆç•™ç™½ï¼‰ï¼Œå’Œè¾¹è·æ•ˆæœç±»ä¼¼ã€‚æˆ‘ä»¬åœ¨å‰é¢å¾ˆå¤šç¤ºä¾‹ä¸­éƒ½å·²ç»ä½¿ç”¨è¿‡å®ƒäº†ï¼Œç°åœ¨æ¥çœ‹çœ‹å®ƒçš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">Padding</span>({
  ...
  EdgeInsetsGeometry <span class="hljs-attribute">padding</span>,
  Widget child,
})
</code></pre>
<p>Â </p>
<p>EdgeInsets</p>
<p>EdgeInsetsæ˜¯EdgeInsetsGeometryçš„å­ç±»ï¼Œä¸€èˆ¬ç›´æ¥ä½¿ç”¨EdgeInsetsã€‚</p>
<p>EdgeInsetsæä¾›çš„ä¾¿æ·æ–¹æ³•ï¼š</p>
<ul>
<li>fromLTRB(double left, double top, double right, double bottom)ï¼šåˆ†åˆ«æŒ‡å®šå››ä¸ªæ–¹å‘çš„å¡«å……ã€‚</li>
<li>all(double value) : æ‰€æœ‰æ–¹å‘å‡ä½¿ç”¨ç›¸åŒæ•°å€¼çš„å¡«å……ã€‚</li>
<li>only({left, top, right ,bottom })ï¼šå¯ä»¥è®¾ç½®å…·ä½“æŸä¸ªæ–¹å‘çš„å¡«å……(å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªæ–¹å‘)ã€‚</li>
<li>symmetric({ vertical, horizontal })ï¼šç”¨äºè®¾ç½®å¯¹ç§°æ–¹å‘çš„å¡«å……ï¼ŒverticalæŒ‡topå’Œbottomï¼ŒhorizontalæŒ‡leftå’Œrightã€‚</li>
</ul>
<p>Â </p>
<p>Paddingç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fff3c77aa3f0448a8da7ee3710a87d8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=y0whGv3yPLvyZaWBm8MRHowGKM0%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">PaddingTestRoute</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatelessWidget</span> {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">PaddingTestRoute</span>({<span class="hljs-selector-tag">Key</span>? <span class="hljs-selector-tag">key</span>}) : <span class="hljs-selector-tag">super</span>(<span class="hljs-attribute">key</span>: key);
Â 
  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Padding</span>(
      <span class="hljs-comment">//ä¸Šä¸‹å·¦å³å„æ·»åŠ 16åƒç´ è¡¥ç™½</span>
      <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">16</span>),
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
        <span class="hljs-comment">//æ˜¾å¼æŒ‡å®šå¯¹é½æ–¹å¼ä¸ºå·¦å¯¹é½ï¼Œæ’é™¤å¯¹é½å¹²æ‰°</span>
        <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.start,
        <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
        <span class="hljs-attribute">children</span>: const &lt;Widget&gt;[
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">//å·¦è¾¹æ·»åŠ 8åƒç´ è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">left</span>: <span class="hljs-number">8</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Hello world"</span>),
          ),
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">//ä¸Šä¸‹å„æ·»åŠ 8åƒç´ è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">vertical</span>: <span class="hljs-number">8</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"I am Jack"</span>),
          ),
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">// åˆ†åˆ«æŒ‡å®šå››ä¸ªæ–¹å‘çš„è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">fromLTRB</span>(<span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">20</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Your friend"</span>),
          )
        ],
      ),
    );
  }
}
</code></pre>
<p>Â </p>
<h4 data-id="heading-10">1.2.2 DecoratedBox</h4>
<p>DecoratedBoxå¯ä»¥åœ¨å…¶å­ç»„ä»¶ç»˜åˆ¶å‰(æˆ–å)ç»˜åˆ¶ä¸€äº›è£…é¥°ï¼ˆDecorationï¼‰ï¼Œå¦‚èƒŒæ™¯ã€è¾¹æ¡†ã€æ¸å˜ç­‰ã€‚DecoratedBoxå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">DecoratedBox</span>({
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">decoration</span>,
  <span class="hljs-selector-tag">DecorationPosition</span> <span class="hljs-selector-tag">position</span> = <span class="hljs-selector-tag">DecorationPosition</span><span class="hljs-selector-class">.background</span>,
  <span class="hljs-selector-tag">Widget</span>? <span class="hljs-selector-tag">child</span>
})
Â 
<span class="hljs-selector-tag">BoxDecoration</span>({
  <span class="hljs-selector-tag">Color</span> <span class="hljs-selector-tag">color</span>, <span class="hljs-comment">//é¢œè‰²</span>
  <span class="hljs-selector-tag">DecorationImage</span> <span class="hljs-selector-tag">image</span>,<span class="hljs-comment">//å›¾ç‰‡</span>
  <span class="hljs-selector-tag">BoxBorder</span> <span class="hljs-selector-tag">border</span>, <span class="hljs-comment">//è¾¹æ¡†</span>
  <span class="hljs-selector-tag">BorderRadiusGeometry</span> <span class="hljs-selector-tag">borderRadius</span>, <span class="hljs-comment">//åœ†è§’</span>
  <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">BoxShadow</span>&gt; <span class="hljs-selector-tag">boxShadow</span>, <span class="hljs-comment">//é˜´å½±,å¯ä»¥æŒ‡å®šå¤šä¸ª</span>
  <span class="hljs-selector-tag">Gradient</span> <span class="hljs-selector-tag">gradient</span>, <span class="hljs-comment">//æ¸å˜</span>
  <span class="hljs-selector-tag">BlendMode</span> <span class="hljs-selector-tag">backgroundBlendMode</span>, <span class="hljs-comment">//èƒŒæ™¯æ··åˆæ¨¡å¼</span>
  <span class="hljs-selector-tag">BoxShape</span> <span class="hljs-selector-tag">shape</span> = <span class="hljs-selector-tag">BoxShape</span><span class="hljs-selector-class">.rectangle</span>, <span class="hljs-comment">//å½¢çŠ¶</span>
})
Â 
            <span class="hljs-selector-tag">DecoratedBox</span>(
                <span class="hljs-comment">// position: DecorationPosition.foreground,</span>
                <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(
                  <span class="hljs-attribute">color</span>: Colors.blue,
                  <span class="hljs-attribute">border</span>: Border.<span class="hljs-built_in">all</span>(<span class="hljs-attribute">color</span>: Colors.red, <span class="hljs-attribute">width</span>: <span class="hljs-number">2</span>),
                  <span class="hljs-attribute">borderRadius</span>: const BorderRadius.<span class="hljs-built_in">all</span>(Radius.<span class="hljs-built_in">circular</span>(<span class="hljs-number">16</span>)),
                ),
                <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Padding</span>(
                  <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">8.0</span>),
                  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
                    <span class="hljs-string">'This is a decorated box with padding.'</span>,
                    <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.white),
                  ),
                )),
          ],
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe9a2f916744078a1924744ddf83adb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=v7wP2L7yFMV%2Fr5Xca3favxhkUU4%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-11">1.2.3 Container</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c99498244d840f58cc2d3a63ce4a14c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=z1fN47QOtH0TtvCxVKgoQIPIMYM%3D" alt="" loading="lazy"/></p>
<p>Containeræ˜¯ä¸€ä¸ªç»„åˆç±»å®¹å™¨ï¼Œå®ƒæœ¬èº«ä¸å¯¹åº”å…·ä½“çš„RenderObjectï¼Œå®ƒæ˜¯DecoratedBoxã€ConstrainedBoxã€Transformã€Paddingã€Alignç­‰ç»„ä»¶ç»„åˆçš„ä¸€ä¸ªå¤šåŠŸèƒ½å®¹å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€é€šè¿‡ä¸€ä¸ªContainerç»„ä»¶å¯ä»¥å®ç°åŒæ—¶éœ€è¦è£…é¥°ã€å˜æ¢ã€é™åˆ¶çš„åœºæ™¯ã€‚ä¸‹é¢æ˜¯Containerçš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Container</span>({
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.alignment</span>,
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.padding</span>, <span class="hljs-comment">//å®¹å™¨å†…è¡¥ç™½ï¼Œå±äºdecorationçš„è£…é¥°èŒƒå›´</span>
  <span class="hljs-selector-tag">Color</span> <span class="hljs-selector-tag">color</span>, <span class="hljs-comment">// èƒŒæ™¯è‰²</span>
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">decoration</span>, <span class="hljs-comment">// èƒŒæ™¯è£…é¥°</span>
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">foregroundDecoration</span>, <span class="hljs-comment">//å‰æ™¯è£…é¥°</span>
  <span class="hljs-selector-tag">double</span> <span class="hljs-selector-tag">width</span>,<span class="hljs-comment">//å®¹å™¨çš„å®½åº¦</span>
  <span class="hljs-selector-tag">double</span> <span class="hljs-selector-tag">height</span>, <span class="hljs-comment">//å®¹å™¨çš„é«˜åº¦</span>
  <span class="hljs-selector-tag">BoxConstraints</span> <span class="hljs-selector-tag">constraints</span>, <span class="hljs-comment">//å®¹å™¨å¤§å°çš„é™åˆ¶æ¡ä»¶</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.margin</span>,<span class="hljs-comment">//å®¹å™¨å¤–è¡¥ç™½ï¼Œä¸å±äºdecorationçš„è£…é¥°èŒƒå›´</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.transform</span>, <span class="hljs-comment">//å˜æ¢</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.child</span>,
  ...
})
Â 
Â 
Â 
<span class="hljs-selector-tag">Container</span>(
  <span class="hljs-attribute">margin</span>: EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">top</span>: <span class="hljs-number">50.0</span>, <span class="hljs-attribute">left</span>: <span class="hljs-number">120.0</span>),
  <span class="hljs-attribute">constraints</span>: BoxConstraints.<span class="hljs-built_in">tightFor</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">200.0</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">150.0</span>),<span class="hljs-comment">//å¡ç‰‡å¤§å°</span>
  <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(  <span class="hljs-comment">//èƒŒæ™¯è£…é¥°</span>
    <span class="hljs-attribute">gradient</span>: <span class="hljs-built_in">RadialGradient</span>( <span class="hljs-comment">//èƒŒæ™¯å¾„å‘æ¸å˜</span>
      <span class="hljs-attribute">colors</span>: [Colors.red, Colors.orange],
      <span class="hljs-attribute">center</span>: Alignment.topLeft,
      <span class="hljs-attribute">radius</span>: .<span class="hljs-number">98</span>,
    ),
    <span class="hljs-attribute">boxShadow</span>: [
      <span class="hljs-comment">//å¡ç‰‡é˜´å½±</span>
      <span class="hljs-built_in">BoxShadow</span>(
        <span class="hljs-attribute">color</span>: Colors.black54,
        <span class="hljs-attribute">offset</span>: <span class="hljs-built_in">Offset</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">2.0</span>),
        <span class="hljs-attribute">blurRadius</span>: <span class="hljs-number">4.0</span>,
      )
    ],
  ),
  <span class="hljs-attribute">transform</span>: Matrix4.<span class="hljs-built_in">rotationZ</span>(.<span class="hljs-number">2</span>),<span class="hljs-comment">//å¡ç‰‡å€¾æ–œå˜æ¢</span>
  <span class="hljs-attribute">alignment</span>: Alignment.center, <span class="hljs-comment">//å¡ç‰‡å†…æ–‡å­—å±…ä¸­</span>
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
    <span class="hljs-comment">//å¡ç‰‡æ–‡å­—</span>
    <span class="hljs-string">"5.20"</span>, <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.white, <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">40.0</span>),
  ),
 )
</code></pre>
<p>Â </p>
<h4 data-id="heading-12">1.2.4 SizedBox</h4>
<p>è®¾ç½®å®½é«˜</p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">SizedBox</span>(
    <span class="hljs-attribute">width</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(
      <span class="hljs-attribute">margin</span>: const EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">top</span>: <span class="hljs-number">8.0</span>),
      <span class="hljs-attribute">color</span>: Colors.green,
    ),
  ),
</code></pre>
<p>Â </p>
<h4 data-id="heading-13">1.2.5 Scaffold</h4>
<p>Scaffold æ˜¯ä¸€ä¸ªè·¯ç”±é¡µçš„éª¨æ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‹¼è£…å‡ºä¸€ä¸ªå®Œæ•´çš„é¡µé¢ã€‚åŒ…å«ï¼šå¯¼èˆªæ ã€åº•éƒ¨å¯¼èˆªã€æ‚¬æµ®æ¡†ã€æŠ½å±‰èœå•ç­‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b5bb9a077a040aa9858d520f7d096bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=yeqps6Z%2Fk7U2PvT9A1OkHLZBRSQ%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c6aa4b38a14ecd9387ff97c05a259e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=z5hG1WdyUTuqEcYDdb13hTOdmeo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ScaffoldRoute</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatefulWidget</span> {
  <span class="hljs-variable">@override</span>
  _ScaffoldRouteState <span class="hljs-built_in">createState</span>() =&gt; <span class="hljs-built_in">_ScaffoldRouteState</span>();
}
Â 
<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">_ScaffoldRouteState</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">ScaffoldRoute</span>&gt; {
  <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">_selectedIndex</span> = <span class="hljs-number">1</span>;
Â 
  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scaffold</span>(
      <span class="hljs-attribute">appBar</span>: <span class="hljs-built_in">AppBar</span>( <span class="hljs-comment">//å¯¼èˆªæ </span>
        <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"App Name"</span>), 
        <span class="hljs-attribute">actions</span>: &lt;Widget&gt;[ <span class="hljs-comment">//å¯¼èˆªæ å³ä¾§èœå•</span>
          <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.share), <span class="hljs-attribute">onPressed</span>: () {}),
        ],
      ),
      <span class="hljs-attribute">drawer</span>: <span class="hljs-built_in">MyDrawer</span>(), <span class="hljs-comment">//æŠ½å±‰</span>
      <span class="hljs-attribute">bottomNavigationBar</span>: <span class="hljs-built_in">BottomNavigationBar</span>( <span class="hljs-comment">// åº•éƒ¨å¯¼èˆª</span>
        <span class="hljs-attribute">items</span>: &lt;BottomNavigationBarItem&gt;[
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.home), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Home'</span>)),
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.business), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Business'</span>)),
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.school), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'School'</span>)),
        ],
        <span class="hljs-attribute">currentIndex</span>: _selectedIndex,
        <span class="hljs-attribute">fixedColor</span>: Colors.blue,
        <span class="hljs-attribute">onTap</span>: _onItemTapped,
      ),
      <span class="hljs-attribute">floatingActionButton</span>: <span class="hljs-built_in">FloatingActionButton</span>( <span class="hljs-comment">//æ‚¬æµ®æŒ‰é’®</span>
          <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Icon</span>(Icons.add),
          <span class="hljs-attribute">onPressed</span>:_onAdd
      ),
    );
  }
  <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">_onItemTapped</span>(int index) {
    <span class="hljs-selector-tag">setState</span>(() {
      <span class="hljs-selector-tag">_selectedIndex</span> = <span class="hljs-selector-tag">index</span>;
    });
  }
  <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">_onAdd</span>(){
  }
}
</code></pre>
<p>Â </p>
<h3 data-id="heading-14">1.3 æ»šåŠ¨ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4195c854fe4b90bc7e85e70ac2fedb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oYlbFALl9XCOuKJOpECrFMZ9Vwg%3D" alt="" loading="lazy"/></p>
<p>é¡µé¢æ»šåŠ¨éœ€è¦ä½¿ç”¨æ»šåŠ¨ç±»ç»„ä»¶ã€‚</p>
<p>Â </p>
<h4 data-id="heading-15">1.4.1 SingleChildScrollView</h4>
<p>æ»šåŠ¨ç»„ä»¶ï¼Œä¸æ”¯æŒå»¶è¿ŸåŠ è½½æ¨¡å‹ï¼Œå†…å®¹ä¸è¶…å‡ºå±å¹•å¤ªå¤šæ—¶ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">SingleChildScrollView({
  <span class="hljs-keyword">this</span>.scrollDirection = Axis.vertical, <span class="hljs-comment">//æ»šåŠ¨æ–¹å‘ï¼Œé»˜è®¤æ˜¯å‚ç›´æ–¹å‘</span>
  <span class="hljs-keyword">this</span>.reverse = <span class="hljs-literal">false</span>, 
  <span class="hljs-keyword">this</span>.padding, 
  bool primary, 
  <span class="hljs-keyword">this</span>.physics, 
  <span class="hljs-keyword">this</span>.controller,
  <span class="hljs-keyword">this</span>.child,
})
</code></pre>
<p>Â </p>
<h4 data-id="heading-16">1.4.2 ListVew</h4>
<p>ListViewæ˜¯æœ€å¸¸ç”¨çš„å¯æ»šåŠ¨ç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥æ²¿ä¸€ä¸ªæ–¹å‘çº¿æ€§æ’å¸ƒæ‰€æœ‰å­ç»„ä»¶ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ”¯æŒåˆ—è¡¨é¡¹æ‡’åŠ è½½ï¼ˆåœ¨éœ€è¦æ—¶æ‰ä¼šåˆ›å»ºï¼‰ã€‚</p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-selector-tag">ListView</span>(
  <span class="hljs-attribute">shrinkWrap</span>: true, 
  <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">20.0</span>),
  <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'I'</span>m dedicating every day to you'),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Domestic life was never quite my style'</span>),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'When you smile, you knock me out, I fall apart'</span>),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'And I thought I was so smart'</span>),
  ],
);
Â 
<span class="hljs-comment">// ListView.builderï¼ŒListView.builderé€‚åˆåˆ—è¡¨é¡¹æ¯”è¾ƒå¤šæˆ–è€…åˆ—è¡¨é¡¹ä¸ç¡®å®šçš„æƒ…å†µï¼Œä¸‹é¢çœ‹ä¸€ä¸‹ListView.builderçš„æ ¸å¿ƒå‚æ•°åˆ—è¡¨ã€‚</span>
Â 
<span class="hljs-selector-tag">ListView</span><span class="hljs-selector-class">.builder</span>(
  <span class="hljs-attribute">itemCount</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attribute">itemExtent</span>: <span class="hljs-number">50.0</span>, <span class="hljs-comment">//å¼ºåˆ¶é«˜åº¦ä¸º50.0</span>
  <span class="hljs-attribute">itemBuilder</span>: (BuildContext context, int index) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListTile</span>(<span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"$index"</span>));
  }
);
</code></pre>
<p>Â </p>
<h4 data-id="heading-17">1.4.3 GridView</h4>
<p>ç½‘æ ¼å¸ƒå±€æ˜¯ä¸€ç§å¸¸è§çš„å¸ƒå±€ç±»å‹ï¼ŒGridView ç»„ä»¶æ­£æ˜¯å®ç°äº†ç½‘æ ¼å¸ƒå±€çš„ç»„ä»¶ã€‚GridViewå’ŒListViewçš„å¤§å¤šæ•°å‚æ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬çš„å«ä¹‰ä¹Ÿéƒ½ç›¸åŒçš„ã€‚</p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">GridView</span>(
  <span class="hljs-attribute">gridDelegate</span>: <span class="hljs-built_in">SliverGridDelegateWithFixedCrossAxisCount</span>(
      <span class="hljs-attribute">crossAxisCount</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">//æ¨ªè½´ä¸‰ä¸ªå­widget</span>
      <span class="hljs-attribute">childAspectRatio</span>: <span class="hljs-number">1.0</span> <span class="hljs-comment">//å®½é«˜æ¯”ä¸º1æ—¶ï¼Œå­widget</span>
  ),
  <span class="hljs-attribute">children</span>:&lt;Widget&gt;[
    <span class="hljs-built_in">Icon</span>(Icons.ac_unit),
    <span class="hljs-built_in">Icon</span>(Icons.airport_shuttle),
    <span class="hljs-built_in">Icon</span>(Icons.all_inclusive),
    <span class="hljs-built_in">Icon</span>(Icons.beach_access),
    <span class="hljs-built_in">Icon</span>(Icons.cake),
    <span class="hljs-built_in">Icon</span>(Icons.free_breakfast)
  ]
);
</code></pre>
<p>Â </p>
<p>Â </p>
<p>Â </p>
<h3 data-id="heading-18">1.4 å¼¹çª—ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1517e020727f452cb7a61e7a78a64a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Mz83WnRRPc6eTAUAT8%2FdqfgQSbk%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-19">3.4.1 AlertDialog</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3ffd2f13ca453783e32b8af0e99f59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=4zw91wfrrqFPayz3eYq6Bl4NJgs%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showDialog</span>(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">AlertDialog</span>(
        <span class="hljs-attribute">title</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"AlertDialog"</span>),
        <span class="hljs-attribute">content</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"This is an AlertDialog"</span>),
        <span class="hljs-attribute">actions</span>: &lt;Widget&gt;[
          <span class="hljs-built_in">TextButton</span>(
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"OK"</span>),
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
          ),
        ],
      );
    },
  );
</code></pre>
<p>Â </p>
<h4 data-id="heading-20">3.4.2 SimpleDialog</h4>
<p>SimpleDialogä¹Ÿæ˜¯Materialç»„ä»¶åº“æä¾›çš„å¯¹è¯æ¡†ï¼Œå®ƒä¼šå±•ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºåˆ—è¡¨é€‰æ‹©çš„åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b3e38b8c90544c8adf8074fc121e0bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=4WDASHzJg46j1tgmgG5iDKSVDRY%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showDialog</span>(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">SimpleDialog</span>(
        <span class="hljs-attribute">title</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"SimpleDialog"</span>),
        <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
          <span class="hljs-built_in">SimpleDialogOption</span>(
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Option 1"</span>),
          ),
          <span class="hljs-built_in">SimpleDialogOption</span>(
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Option 2"</span>),
          ),
        ],
      );
    },
  );
</code></pre>
<p>Â </p>
<h4 data-id="heading-21">3.4.3 showModalBottomSheet</h4>
<p>åº•éƒ¨å¼¹çª—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42be83ed6a7e4e9dadb2dcb6de58d4d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=vLdXDTSDBWXk8ZG39OHekWDDfH8%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showModalBottomSheet</span>&lt;<span class="hljs-selector-tag">int</span>&gt;(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (BuildContext context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListView</span><span class="hljs-selector-class">.builder</span>(
        <span class="hljs-attribute">itemCount</span>: <span class="hljs-number">30</span>,
        <span class="hljs-attribute">itemBuilder</span>: (BuildContext context, int index) {
          <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListTile</span>(
            <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"$index"</span>),
            <span class="hljs-attribute">onTap</span>: () =&gt; Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>(index),
          );
        },
      );
    },
  );
</code></pre>
<p>Â </p>
<h2 data-id="heading-22">äºŒã€å¸ƒå±€å¸¸ç”¨Widget</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e9d41a1b694cddb7f3f31efab856f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Gje1sF%2FD%2BwcyBLA%2FkOMMmPhVayw%3D" alt="" loading="lazy"/></p>
<p>é‡ç‚¹é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout" target="_blank" title="https://docs.flutter.cn/ui/layout" ref="nofollow noopener noreferrer">Flutterä¸­çš„å¸ƒå±€</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout%2Fconstraints" target="_blank" title="https://docs.flutter.cn/ui/layout/constraints" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£ Flutter å¸ƒå±€çº¦æŸ</a></li>
</ul>
<p>Â </p>
<h3 data-id="heading-23">2.1 å¸ƒå±€ç»„ä»¶</h3>
<ul>
<li>Centerï¼Œå±…ä¸­</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55c977881c3a4ea19e970a22f14049e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=MWumN5SrrIQ1TM4zM%2F1hv1Q2IVA%3D" alt="" loading="lazy"/></p>
<ul>
<li>Rowï¼Œæ¨ªå‘æ’åˆ—ï¼Œä¸èƒ½æ¢è¡Œ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7c47e2bd1994f47bfe02bce014e83cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=24lt925aJ74HWeDwi6B5c6WbWf8%3D" alt="" loading="lazy"/></p>
<ul>
<li>Columnï¼Œç«–å‘æ’åˆ—ï¼Œä¸èƒ½æ¢åˆ—</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aaf8bfededb408f9459fce57a216511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=gnDyqcppdg7KbfvO6vPZbY%2FAhfo%3D" alt="" loading="lazy"/></p>
<ul>
<li>Flexã€Expandedï¼Œå®ç° flex: 1çš„æ•ˆæœï¼Œæ³¨æ„Row/Columnéƒ½é›†æˆè‡ªFlex</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/080e12ea9d08455eb1d90c97e43bb1d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=PVR0VWv1JCxZfPT5Ql7ES4GiYQc%3D" alt="" loading="lazy"/></p>
<ul>
<li>Wrapï¼Œè‡ªåŠ¨æ¢è¡Œ</li>
<li>Flowï¼Œæ¯”è¾ƒå¤æ‚ï¼Œä½¿ç”¨åœºæ™¯è¾ƒå°‘</li>
<li>Stackã€Postionedï¼Œå®ç°ç»å¯¹å¸ƒå±€çš„æ•ˆæœ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79f892961abb45f49b3e6c6d1a91e3b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=btYf9dQcwlip0xna6pi%2F1dr7Fic%3D" alt="" loading="lazy"/></p>
<ul>
<li>Alignã€Alignmentï¼Œå®ç°å¯¹é½å’Œç›¸å¯¹å®šä½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8717e97ec1e4f878c1c594c44cfce2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=wSssKQ1IFB0AXkotjnH%2BjSNatOo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faca4ac8bab949ed9d9169701c78b35c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=q6nkMj2fGVaDOd3R1wsCsKki6Fg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5ab527a1504901a1bf43e54b455031~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=6A4hH%2ByqSaV3XsSI4MS7rrdhLe0%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-24">2.1.1 ç¤ºä¾‹1ï¼š</h4>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9dfe4713cc1466c843b36f7090d5e5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=lvPj8Sgk6LyGMt4hERhQlPXUXhM%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91eccb34b4fc4a1087f6d32864bfb5b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=3oCQCbyTJaqIh5hG95i3e9zLVP8%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-25">2.1.2 ç¤ºä¾‹2ï¼š</h4>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b20ff93b9ea54ceabb3530afc64647c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Z5sCpgZ2A9rAj8x9nU60x3bvz2o%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abfbf0b4bf91458b8728820cfa37d354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=pRZfbz2606AjOPUFuq86MV30AB4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26">2.2 å¸ƒå±€çº¦æŸ</h3>
<p>é‡ç‚¹é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout%2Fconstraints" target="_blank" title="https://docs.flutter.cn/ui/layout/constraints" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£ Flutter å¸ƒå±€çº¦æŸ</a></p>
<p>Â </p>
<h4 data-id="heading-27">2.2.1 çº¦æŸåŸºæœ¬ä»‹ç»</h4>
<p>çº¦æŸæ˜¯çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„å°ºå¯¸é™åˆ¶ï¼Œé€šè¿‡ BoxConstraints å¯¹è±¡å®šä¹‰ï¼ŒåŒ…å«å››ä¸ªå…³é”®å±æ€§ï¼š</p>
<ul>
<li>minWidth / maxWidth ï¼šå®½åº¦å…è®¸çš„æœ€å°/æœ€å¤§å€¼ï¼›</li>
<li>minHeight / maxHeight ï¼šé«˜åº¦å…è®¸çš„æœ€å°/æœ€å¤§å€¼ã€‚</li>
</ul>
<p>Â </p>
<p>çº¦æŸç±»å‹ï¼š</p>
<ul>
<li>ä¸¥çº¦æŸï¼ˆTight Constraintsï¼‰ï¼ŒminWidth = maxWidth ä¸” minHeight = maxHeightï¼Œå­ç»„ä»¶å¿…é¡»ä½¿ç”¨çˆ¶ç»„ä»¶æŒ‡å®šçš„ å›ºå®šå°ºå¯¸ã€‚</li>
<li>æ¾çº¦æŸï¼ˆLoose Constraintsï¼‰ï¼ŒminWidth = 0, minHeight = 0ï¼Œå­ç»„ä»¶å¯åœ¨æœ€å¤§èŒƒå›´å†…<strong>è‡ªç”±é€‰æ‹©å°ºå¯¸</strong>ã€‚</li>
</ul>
<p>Â </p>
<p>Â </p>
<p>æœ‰ä¸‰ä¸ªæ ¸å¿ƒWidgetï¼š</p>
<ul>
<li>BoxConstraintsï¼ŒåŸºç¡€çº¦æŸä¿¡æ¯ï¼Œå­˜æ”¾ï¼šæœ€å¤§å®½åº¦ã€æœ€å°å®½åº¦ã€æœ€å¤§é«˜åº¦ã€æœ€å°é«˜åº¦ã€‚</li>
<li>ConstrainedBoxï¼Œç”¨äºç»™å­ç»„ä»¶æ·»åŠ çº¦æŸä¿¡æ¯ã€‚</li>
<li>UnconstrainedBoxï¼Œå­ç»„ä»¶ä¸å—çº¦æŸé™åˆ¶ã€‚</li>
</ul>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// BoxConstraints</span>
<span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">BoxConstraints</span>({
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.minWidth</span> = <span class="hljs-number">0.0</span>, <span class="hljs-comment">//æœ€å°å®½åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.maxWidth</span> = <span class="hljs-selector-tag">double</span><span class="hljs-selector-class">.infinity</span>, <span class="hljs-comment">//æœ€å¤§å®½åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.minHeight</span> = <span class="hljs-number">0.0</span>, <span class="hljs-comment">//æœ€å°é«˜åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.maxHeight</span> = <span class="hljs-selector-tag">double</span><span class="hljs-selector-class">.infinity</span> <span class="hljs-comment">//æœ€å¤§é«˜åº¦</span>
})
Â 
<span class="hljs-comment">// ConstrainedBox</span>
<span class="hljs-selector-tag">ConstrainedBox</span>(
  <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(
    <span class="hljs-attribute">minWidth</span>: double.infinity, <span class="hljs-comment">//å®½åº¦å°½å¯èƒ½å¤§</span>
    <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">50.0</span> <span class="hljs-comment">//æœ€å°é«˜åº¦ä¸º50åƒç´ </span>
  ),
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(
    <span class="hljs-attribute">height</span>: <span class="hljs-number">5.0</span>, 
    <span class="hljs-attribute">child</span>: redBox ,
  ),
)
Â 
<span class="hljs-comment">// ConstrainedBox</span>
<span class="hljs-selector-tag">ConstrainedBox</span>(
  <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(<span class="hljs-attribute">minWidth</span>: <span class="hljs-number">60.0</span>, <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">100.0</span>),  <span class="hljs-comment">//çˆ¶</span>
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">UnconstrainedBox</span>( <span class="hljs-comment">//â€œå»é™¤â€çˆ¶çº§é™åˆ¶</span>
    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">ConstrainedBox</span>(
      <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(<span class="hljs-attribute">minWidth</span>: <span class="hljs-number">90.0</span>, <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">20.0</span>),<span class="hljs-comment">//å­</span>
      <span class="hljs-attribute">child</span>: redBox,
    ),
  )
)
</code></pre>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-28">2.2.2 çº¦æŸçš„åŸºæœ¬åŸç†</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4ef4c387579498ab01752571dec7fc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=0cfztoXOwNOTbqIHiggKWeWdhnM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c807921edb7d41bdbd5cbad20739ca7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=fsriJoo6sMDhn344ahVuf6VCjDg%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>å¸ƒå±€è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>1.Â  å‘ä¸‹ä¼ é€’çº¦æŸâ€‹ï¼Œçˆ¶ç»„ä»¶æ ¹æ®è‡ªèº«çº¦æŸå’Œå¸ƒå±€é€»è¾‘ï¼Œç”Ÿæˆå­ç»„ä»¶çš„çº¦æŸå¹¶ä¼ é€’ã€‚</p>
<p>2.Â  å­ç»„ä»¶ç¡®å®šå°ºå¯¸ï¼Œå­ç»„ä»¶åœ¨çº¦æŸèŒƒå›´å†…è®¡ç®—è‡ªèº«å°ºå¯¸ï¼Œå¹¶å‘ä¸Šè¿”å›ç»“æœï¼ˆå¦‚ Text æ ¹æ®æ–‡å­—å†…å®¹è®¡ç®—å¤§å°ï¼‰ã€‚</p>
<p>3.Â  â€‹â€‹çˆ¶ç»„ä»¶å®šä½â€‹ï¼Œçˆ¶ç»„ä»¶æ ¹æ®å­ç»„ä»¶å°ºå¯¸å’Œå¸ƒå±€è§„åˆ™ï¼ˆå¦‚ Row çš„æ°´å¹³æ’åˆ—ã€Stack çš„å †å ï¼‰ç¡®å®šå­ç»„ä»¶çš„åæ ‡ã€‚</p>
<p>Â </p>
<p>Flutterå®¹å™¨ç»„ä»¶çº¦æŸç±»å‹æ±‡æ€»ï¼š</p>



















































































<table><thead><tr><th>å®¹å™¨ç»„ä»¶</th><th>çº¦æŸç±»å‹</th><th>å…·ä½“çº¦æŸè¡Œä¸º</th><th>å…¸å‹ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å±å¹•ï¼ˆScreen/RenderViewï¼‰</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶æœ€å¤–å±‚ç»„ä»¶å¡«æ»¡æ•´ä¸ªå±å¹•ï¼ˆBoxConstraints.tight(å±å¹•å°ºå¯¸)ï¼‰</td><td>åº”ç”¨æ ¹å¸ƒå±€ï¼Œç¡®ä¿å†…å®¹å…¨å±æ˜¾ç¤º</td></tr><tr><td>Scaffold.body</td><td>å®½çº¦æŸ</td><td>æ°´å¹³è½´ï¼š[0, å±å¹•å®½åº¦]<br/>å‚ç›´è½´ï¼š[0, å±å¹•é«˜åº¦-AppBaré«˜åº¦ç­‰]ï¼ˆå…è®¸å­ç»„ä»¶è‡ªç”±é€‰æ‹©å°ºå¯¸ï¼‰</td><td>é¡µé¢ä¸»ä½“å†…å®¹åŒºåŸŸï¼Œæ”¯æŒçµæ´»å°ºå¯¸</td></tr><tr><td>Container</td><td>åŠ¨æ€çº¦æŸ</td><td>è‹¥è®¾ç½®å®½é«˜åˆ™æ–½åŠ ç´§çº¦æŸï¼›<br/>æœªè®¾ç½®å°ºå¯¸æ—¶ä¼ é€’çˆ¶çº§çº¦æŸï¼ˆé€šå¸¸ä¸ºå®½çº¦æŸï¼‰</td><td>è‡ªå®šä¹‰å°ºå¯¸ã€èƒŒæ™¯è‰²ã€è¾¹è·çš„å®¹å™¨</td></tr><tr><td>Align</td><td>å®½çº¦æŸ</td><td>å°†çˆ¶çº§çº¦æŸè½¬æ¢ä¸ºæœ€å°å€¼ä¸º 0 çš„å®½æ¾çº¦æŸ <br/>ï¼ˆå…è®¸å­ç»„ä»¶è‡ªç”±é€‰æ‹©å°ºå¯¸ï¼Œä¸è¶…è¿‡çˆ¶å®¹å™¨èŒƒå›´ï¼‰</td><td>å­ç»„ä»¶åœ¨çˆ¶å®¹å™¨å†…è‡ªå®šä¹‰å¯¹é½ä½ç½®</td></tr><tr><td>Padding</td><td>å®½çº¦æŸ</td><td>ä¿ç•™çˆ¶çº§çº¦æŸï¼Œå­ç»„ä»¶å°ºå¯¸é™åˆ¶åœ¨çˆ¶çº¦æŸ - å†…è¾¹è·èŒƒå›´å†…1</td><td>å¢åŠ å†…è¾¹è·</td></tr><tr><td>Center</td><td>å®½çº¦æŸ</td><td>å°†çˆ¶çº§ç´§çº¦æŸè½¬ä¸ºæœ€å°å€¼ä¸º0çš„å®½çº¦æŸï¼ˆå¦‚ BoxConstraints.loose()ï¼‰</td><td>å­ç»„ä»¶å±…ä¸­ä¸”å¯å°äºçˆ¶å®¹å™¨</td></tr><tr><td>ConstrainedBox</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶æ»¡è¶³é¢å¤–çš„æœ€å°/æœ€å¤§å®½é«˜é™åˆ¶ï¼ˆä¸çˆ¶çº¦æŸå–äº¤é›†ï¼‰</td><td>ç²¾ç¡®æ§åˆ¶å­ç»„ä»¶å°ºå¯¸èŒƒå›´</td></tr><tr><td>SizedBox</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶é‡‡ç”¨æŒ‡å®šå®½é«˜ï¼ˆå¿½ç•¥çˆ¶çº§çº¦æŸï¼‰</td><td>å›ºå®šå°ºå¯¸å ä½æˆ–å¼ºåˆ¶å­ç»„ä»¶å°ºå¯¸</td></tr><tr><td>UnconstrainedBox</td><td>æ— çº¦æŸ</td><td>ç§»é™¤çˆ¶çº§çº¦æŸï¼ˆä½†è‡ªèº«å°ºå¯¸ä»å—çˆ¶çº§é™åˆ¶ï¼Œè¶…å‡ºçš„éƒ¨åˆ†ä¼šè¢«è£å‰ªï¼‰</td><td>éœ€è¦å­ç»„ä»¶å®Œå…¨è‡ªä¸»å†³å®šå°ºå¯¸çš„åœºæ™¯</td></tr><tr><td>AspectRatio</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶æ»¡è¶³ç‰¹å®šå®½é«˜æ¯”ï¼ˆåœ¨çˆ¶çº§çº¦æŸèŒƒå›´å†…è®¡ç®—ï¼‰</td><td>ä¿æŒå›ºå®šå®½é«˜æ¯”çš„å…ƒç´ ï¼ˆå¦‚æ–¹å½¢å›¾ç‰‡ï¼‰</td></tr><tr><td>FractionallySizedBox</td><td>å®½çº¦æŸ</td><td>æŒ‰æ¯”ä¾‹å ç”¨çˆ¶ç»„ä»¶ç©ºé—´ï¼ˆwidthFactor/heightFactoræ§åˆ¶å æ¯”ï¼‰</td><td>å“åº”å¼å¸ƒå±€ï¼ˆå¦‚æŒ‰é’®å®½åº¦å çˆ¶å®¹å™¨70%ï¼‰</td></tr><tr><td>ListView/ScrollView</td><td>æ— ç•Œçº¦æŸ</td><td>å‚ç›´è½´ï¼š[0, Infinity]<br/>æ°´å¹³è½´ï¼š[0, å±å¹•å®½åº¦]</td><td>å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ</td></tr></tbody></table>
<h5 data-id="heading-29">ç¤ºä¾‹1ï¼š</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Container</span>(color: red)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9ad216044ef454ebd2a40ee26b1b003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=%2FEtS6KTlIeXcw9lqMjIjr3JRICs%3D" alt="" loading="lazy"/></p>
<p>Container å……æ»¡äº†æ•´ä¸ªå±å¹•</p>
<p>Â </p>
<h5 data-id="heading-30">ç¤ºä¾‹2ï¼š</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58d37534347a401e8714ec786d607cee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=BNR8%2FitViauuA7F9DQe53JHzj3s%3D" alt="" loading="lazy"/></p>
<p>Container å……æ»¡äº†æ•´ä¸ªå±å¹•</p>
<p>Â </p>
<h5 data-id="heading-31">ç¤ºä¾‹3ï¼šCenter</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Center</span>(<span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red))
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15c7b1c848664159b71a6a4f25102e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=GWliHiOzrunmqE3i4g5ZT6svHMI%3D" alt="" loading="lazy"/></p>
<p>Center å……æ»¡äº†å±å¹•ï¼ŒContainer å˜æˆ 100 Ã— 100ã€‚</p>
<p>Â </p>
<h5 data-id="heading-32">ç¤ºä¾‹4ï¼šAlign</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Align</span>(
  <span class="hljs-attribute">alignment</span>: Alignment.bottomRight,
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red),
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c46085cafc4d809024898218f2f3c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=N%2F1gPprwyG077HjyDqF14o%2BM9I8%3D" alt="" loading="lazy"/></p>
<p>Containerå¤§å°100*100ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7575102474639196211</link>    <guid>https://juejin.cn/post/7575102474639196211</guid>    <pubDate>2025-11-22T13:31:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102474639196211" data-draft-id="7575102209605140506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Rust,iOS"/> <meta itemprop="datePublished" content="2025-11-22T13:31:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¸“ä¸šç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1968539883540688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1968539883540688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¸“ä¸šç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:31:19.000Z" title="Sat Nov 22 2025 13:31:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç®€ä»‹</h2>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fservo%2Fservo" target="_blank" title="https://github.com/servo/servo" ref="nofollow noopener noreferrer">github.com/servo/servo</a></p>
</blockquote>
<p>è¿™ä¸€æœŸçš„ç²¾è¯» GitHub ç³»åˆ—æ˜¯ servo æµè§ˆå™¨ï¼Œæˆ‘ä»¬å°†ä»æºç çš„è§’åº¦å»æ‹†è§£ servo æµè§ˆå™¨ï¼Œé€æ­¥å˜æ¸…æ•´ä¸ªæµè§ˆå™¨çš„å·¥ä½œåŸç†ã€‚</p>
<p>servo æ˜¯ä¸€æ¬¾å®éªŒæ€§è´¨çš„ç°ä»£æµè§ˆå™¨å¼•æ“ï¼Œé‡‡ç”¨ Rust è¯­è¨€ç¼–å†™ï¼ˆå…¶å®æ˜¯ä¸ºäº†å†™ servo åˆ›å»ºäº† Rust è¿™é—¨è¯­è¨€ï¼Œä½† servo æ²¡ç«ï¼ŒRust å…ˆç«èµ·æ¥äº†ï¼ï¼‰ï¼Œservo ç›®å‰è¿˜æ²¡æœ‰ç‹¬ç«‹çš„ Appï¼Œéœ€è¦ä½¿ç”¨ servoshell æ¥è¿è¡Œç½‘é¡µï¼›servo ä¸ä»…å±•ç¤ºäº† Rust è¯­è¨€åœ¨ç³»ç»Ÿç¼–ç¨‹ä¸­çš„å¼ºå¤§èƒ½åŠ›ï¼Œè¿˜å¼€åˆ›äº†<strong>å¹¶è¡ŒåŒ–å¸ƒå±€å’Œæ¸²æŸ“</strong>çš„å…¨æ–°ç†å¿µï¼ˆå…¶ä¸­å¾ˆå¤šå·²ç»è¢« Firefox å¸æ”¶ï¼‰ï¼Œæ˜¯ä¸€ä¸ªå­¦ä¹ æµè§ˆå™¨åŸç†ä¸ Rust è¯­è¨€éå¸¸æ£’çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>è‡ª 2012 å¹´ä»¥æ¥ï¼Œç›®å‰å·²æ”¶è· 30K+çš„ starï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ad69e2602424a4fba09f99921e0cbc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=VeSNzxtdqdf7B074mHNIn7qXSbM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€å®‰è£…ä½¿ç”¨</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ macOS ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•åœ¨ç¼–è¯‘ servoï¼Œä»¥åŠåœ¨ servo ä¸Šè¿è¡Œä¸€ä¸ªç½‘é¡µï¼Œå…¶ä»–æ“ä½œç³»ç»ŸæŒ‰ç…§å®˜æ–¹ README æ­¥éª¤æ“ä½œå³å¯ã€‚</p>
<p>macOS ä¸Šç¼–è¯‘ servo æ­¥éª¤ï¼š</p>
<p>1ï¼‰ä¸‹è½½ servo æºç ï¼š</p>
<pre><code class="hljs language-Shell" lang="Shell">git clone https://github.com/servo/servo
</code></pre>
<p>2ï¼‰å®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fxcode%2F" target="_blank" title="https://developer.apple.com/xcode/" ref="nofollow noopener noreferrer"> Xcode </a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fbrew.sh%2F" target="_blank" title="https://brew.sh/" ref="nofollow noopener noreferrer"> brew</a></p>
<p>3ï¼‰å®‰è£…<code>uv</code></p>
<pre><code class="hljs language-Shell" lang="Shell">curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p>4ï¼‰å®‰è£… rustup</p>
<pre><code class="hljs language-Shell" lang="Shell">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<p>5ï¼‰é‡å¯å‘½ä»¤è¡Œä¿è¯å®‰è£…çš„å·¥å…·ç”Ÿæ•ˆï¼Œåœ¨ servo æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>./mach bootstrap</code>å®‰è£…ä¾èµ–</p>
<p>6ï¼‰åœ¨ servo æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>./mach build</code>è¿›è¡Œç¼–è¯‘ï¼šmach æ˜¯ servo çš„æ„å»ºå’Œç®¡ç†å·¥å…·</p>
<p>ç¼–è¯‘æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿è¡Œä¸€ä¸ªç½‘é¡µï¼š</p>
<pre><code class="hljs language-Shell" lang="Shell"><span class="hljs-meta prompt_"># </span><span class="bash">è¿è¡Œç½‘é¡µ</span>
./mach run https://example.com
<span class="hljs-meta prompt_">
# </span><span class="bash">æ— å¤´æµè§ˆå™¨æ¨¡å¼è¿è¡Œï¼šä¸å¯åŠ¨å›¾å½¢ç•Œé¢</span>
./mach run --headless https://example.com
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8511b504847c4f9694da3dda97e57a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=8ch5QrwNVDzYISr25tBI0rLjFSU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ¶æ„ä»‹ç»</h2>
<h3 data-id="heading-3">3.1 ç›®å½•ç»“æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3540d74c810542e39a7bc9d3ceed6975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=fhiHJ2Tud7Z1NC%2FLCAUi%2Bt%2BEBkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»¥<code>./mach run </code>â€‹<code>https://baidu.com</code>å‘½ä»¤è¿è¡Œä¸ºä¾‹ï¼Œæ¥æ·±å…¥ç†è§£è¿™äº›<strong>ç›®å½•ä¹‹é—´æ˜¯å¦‚ä½•ååŒå·¥ä½œ</strong>çš„ï¼š</p>
<p>1ï¼‰<code>ports/servoshell</code> å¯åŠ¨ç¨‹åºï¼Œè°ƒç”¨ <code>components/constellation</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ Tab</p>
<p>2ï¼‰<code>constellation</code> æŒ‡æŒ¥ <code>components/net</code> å»ä¸‹è½½ç½‘é¡µ</p>
<p>3ï¼‰ä¸‹è½½çš„ HTML ä¼ ç»™ <code>components/script</code> è§£ææˆ DOM æ ‘</p>
<p>4ï¼‰<code>components/style</code> å¹¶è¡Œè®¡ç®—æ ·å¼ï¼Œé™„ç€åœ¨ DOM ä¸Š</p>
<p>5ï¼‰<code>components/layout</code> è¯»å– DOM å’Œæ ·å¼ï¼Œè®¡ç®—ä½ç½®ï¼Œç”Ÿæˆå¸ƒå±€æ ‘ï¼ˆLayout Treeï¼‰</p>
<p>6ï¼‰æœ€åï¼Œç»“æœè¢«é€åˆ° <code>components/compositing</code> æ˜¾ç¤ºåˆ°å±å¹•ä¸Š</p>
<h3 data-id="heading-4">3.2 æ¶æ„å›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68f6378a3c424b72927cabc62e4ba2a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=bqDFLGDWEdxrrd71vxnrBxAHB5k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸Šå›¾æ˜¯å•å†…å®¹è¿›ç¨‹æ—¶çš„æ¶æ„å›¾ï¼Œå®é™…ä¸Šæ¯ä¸ª tab éƒ½å¯ä»¥è§†ä¸ºä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<p><strong>1) Constellation</strong></p>
<p>æ ¸å¿ƒåè°ƒè€…ï¼Œå¯ä»¥ç†è§£ä¸º tab ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†å¤šä¸ªä»»åŠ¡ç®¡çº¿ï¼ˆPipelineï¼‰</p>
<p><strong>2ï¼‰å¤š Pipeline å¹¶è¡Œ</strong></p>
<p>å›¾ä¸­å±•ç¤ºäº† A å’Œ B ä¸¤ä¸ª Script çº¿ç¨‹ï¼Œservo åœ¨è®¾è®¡ä¸Šæ”¯æŒä¸€ä¸ªè¿›ç¨‹å†…è¿è¡Œå¤šä¸ªç‹¬ç«‹çš„æ¸²æŸ“ç®¡çº¿ï¼Œæ¯”å¦‚ iframe å¯ä»¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ç®¡çº¿</p>
<p><strong>3ï¼‰Script ä¸ Layout åˆ†ç¦»</strong></p>
<p>æ¯ä¸ª Script çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸“å±çš„ Layout çº¿ç¨‹</p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œç½‘é¡µå¤„ç†ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>

























<table><thead><tr><th><strong>é˜¶æ®µ</strong></th><th>æ ¸å¿ƒèŒè´£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Script</strong></td><td>æ‰€æœ‰æƒ DOM æ ‘ï¼Œæ‰§è¡Œ JavaScriptï¼Œå¤„ç†å¯¼èˆªäº‹ä»¶ç­‰</td><td>å½“éœ€è¦çŸ¥é“å…ƒç´ ä½ç½®ï¼ˆå¦‚ offsetWidthï¼‰æ—¶ï¼Œå¿…é¡»å‘æ¶ˆæ¯è¯¢é—® Layout</td></tr><tr><td><strong>Layout</strong></td><td>å¿«ç…§ DOM æ ‘ï¼Œè®¡ç®—æ ·å¼ï¼Œæ„å»º Box Tree å’Œ Fragment Tree</td><td>æœ€ç»ˆç”Ÿæˆ Display List å¹¶å‘é€ç»™ Compositor</td></tr><tr><td><strong>Compositor</strong></td><td>UI çº¿ç¨‹ï¼Œæ¥æ”¶æ˜¾ç¤ºåˆ—è¡¨ï¼Œè½¬å‘ç»™ WebRender è¿›è¡Œ GPU æ¸²æŸ“</td><td>UI äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€æ»šåŠ¨ï¼‰çš„ç¬¬ä¸€æ¥æ”¶è€…ï¼Œé€šå¸¸ä¼šå°†äº‹ä»¶è½¬å‘ç»™ Script å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-5">3.3 servo çš„åŠ é€Ÿç§˜ç±</h3>
<p>servo åœ¨å“ªäº›åœ°æ–¹å˜å¿«äº†ï¼Œåˆæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p>
<p>å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f34b451a36c54ff98b799c9788fbfcf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=NTy482n9wOJJQdQ0fF86NcYU6xk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-6">å››ã€æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å¯¹ servo æœ‰äº†æ•´ä½“çš„äº†è§£ï¼Œåç»­ï¼Œæˆ‘ä»¬å°†ä»æºç è§’åº¦é€æ­¥æ‹†è§£å„éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>æ›´å¤šç²¾å½©å†…å®¹åœ¨å…¬ä¼—å· <strong>ã€Œéä¸“ä¸šç¨‹åºå‘˜Pingã€</strong>ï¼Œæ¬¢è¿è®¢é˜…äº¤æµï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬]]></title>    <link>https://juejin.cn/post/7575054113924907023</link>    <guid>https://juejin.cn/post/7575054113924907023</guid>    <pubDate>2025-11-22T13:40:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575054113924907023" data-draft-id="7575106644498284578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Nuxt.js"/> <meta itemprop="datePublished" content="2025-11-22T13:40:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Account_Ray"/> <meta itemprop="url" content="https://juejin.cn/user/3573837575226061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3573837575226061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Account_Ray
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:40:25.000Z" title="Sat Nov 22 2025 13:40:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vue3-next-qrcodeï¼šä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨å¼€å‘ä¸­ï¼ŒäºŒç»´ç å·²ç»æˆä¸ºä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ä¹‹ä¸€ã€‚æ— è®ºæ˜¯åˆ†äº«é“¾æ¥ã€æ”¯ä»˜åœºæ™¯è¿˜æ˜¯èº«ä»½éªŒè¯ï¼ŒäºŒç»´ç éƒ½æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“ â€”â€” <strong>vue3-next-qrcode</strong>ï¼Œå®ƒä¸ä»…æ”¯æŒåŸºç¡€çš„äºŒç»´ç ç”Ÿæˆï¼Œè¿˜æä¾›äº† LOGOã€GIF èƒŒæ™¯ã€SSR ç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2">é¡¹ç›®äº®ç‚¹</h3>
<h4 data-id="heading-3">ğŸ¯ æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>ğŸ„ğŸ¼â€â™‚ï¸ åŸºäº Vue 3 Composition API</strong>ï¼šå®Œå…¨æ‹¥æŠ± Vue 3 ç”Ÿæ€ï¼Œæ˜“äºä½¿ç”¨å’Œé›†æˆ</li>
<li><strong>ğŸ¯ TypeScript æ”¯æŒ</strong>ï¼šä½¿ç”¨ TypeScript æ„å»ºï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰</li>
<li><strong>ğŸš€ SSR æ”¯æŒ</strong>ï¼šå®Œç¾æ”¯æŒ Nuxt 3 å’Œ Nuxt 2 æœåŠ¡ç«¯æ¸²æŸ“</li>
<li><strong>ğŸ¨ Composable API</strong>ï¼šæä¾› <code>useQRCode</code> Hookï¼Œçµæ´»ç”ŸæˆäºŒç»´ç </li>
<li><strong>â™¿ æ— éšœç¢æ”¯æŒ</strong>ï¼šå†…ç½® ARIA æ ‡ç­¾å’Œé”®ç›˜å¯¼èˆª</li>
<li><strong>ğŸ­ GIF èƒŒæ™¯</strong>ï¼šæ”¯æŒåŠ¨æ€ GIF èƒŒæ™¯ï¼Œå¹¶è‡ªåŠ¨ç¼“å­˜ä¼˜åŒ–æ€§èƒ½</li>
<li><strong>ğŸ“¦ Tree-shaking</strong>ï¼šä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼ŒæŒ‰éœ€åŠ è½½</li>
<li><strong>ğŸ”„ è‡ªåŠ¨åˆ·æ–°</strong>ï¼šæ–‡æœ¬å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°ç”ŸæˆäºŒç»´ç </li>
<li><strong>ğŸ’¾ å†…ç½®ä¸‹è½½</strong>ï¼šä¸€é”®ä¸‹è½½ç”Ÿæˆçš„äºŒç»´ç </li>
</ul>
<h3 data-id="heading-4">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-5">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm</span>
npm install vue3-next-qrcode

<span class="hljs-comment"># yarn</span>
yarn add vue3-next-qrcode

<span class="hljs-comment"># pnpm</span>
pnpm add vue3-next-qrcode
</code></pre>
<h4 data-id="heading-6">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { Vue3NextQrcode } from 'vue3-next-qrcode'
import 'vue3-next-qrcode/es/style.css'
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode text="https://github.com/XiaoDaiGua-Ray/vue3-next-qrcode" /&gt;
&lt;/template&gt;
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼ä¸€ä¸ªåŸºç¡€çš„äºŒç»´ç å°±ç”Ÿæˆäº†ã€‚</p>
<h3 data-id="heading-7">è¿›é˜¶åŠŸèƒ½</h3>
<h4 data-id="heading-8">1. è‡ªå®šä¹‰æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="ä½ å¥½ä¸–ç•Œ"
    :size="300"
    :margin="20"
    colorDark="#000000"
    colorLight="#ffffff"
    :correctLevel="3"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-9">2. æ·»åŠ  Logo</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="https://example.com"
    logoImage="https://example.com/logo.png"
    :logoScale="0.3"
    :logoMargin="10"
    :logoCornerRadius="8"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-10">3. ä½¿ç”¨ GIF èƒŒæ™¯ï¼ˆäº®ç‚¹åŠŸèƒ½ï¼ï¼‰</h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸é…·çš„åŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ çš„äºŒç»´ç åŠ¨èµ·æ¥ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="åŠ¨æ€äºŒç»´ç "
    :gifBackgroundURL="gifUrl"
    :dotScale="0.5"
    colorDark="#64d9d6"
  /&gt;
&lt;/template&gt;

&lt;script setup&gt;
const gifUrl = 'https://example.com/background.gif'
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-11">4. çŠ¶æ€ç®¡ç†</h4>
<p>æ”¯æŒåŠ è½½ä¸­ã€é”™è¯¯ç­‰çŠ¶æ€ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åŠ è½½çŠ¶æ€ --&gt;
    &lt;Vue3NextQrcode text="åŠ è½½ä¸­..." status="loading" /&gt;

    &lt;!-- é”™è¯¯çŠ¶æ€ --&gt;
    &lt;Vue3NextQrcode
      text="é”™è¯¯"
      status="error"
      errorDescription="äºŒç»´ç å·²è¿‡æœŸ"
      errorActionDescription="é‡æ–°åŠ è½½"
      :onReload="handleReload"
    /&gt;

    &lt;!-- è‡ªå®šä¹‰åŠ è½½æ’æ§½ --&gt;
    &lt;Vue3NextQrcode text="è‡ªå®šä¹‰åŠ è½½" status="loading"&gt;
      &lt;template #loading&gt;
        &lt;div class="custom-spinner"&gt;åŠ è½½ä¸­...&lt;/div&gt;
      &lt;/template&gt;
    &lt;/Vue3NextQrcode&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-12">5. ä¸‹è½½äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;Vue3NextQrcode ref="qrcodeRef" text="ä¸‹è½½æˆ‘ï¼" /&gt;
    &lt;button @click="handleDownload"&gt;ä¸‹è½½äºŒç»´ç &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const qrcodeRef = ref()

const handleDownload = async () =&gt; {
  try {
    await qrcodeRef.value?.downloadQRCode('my-qrcode.png')
    console.log('ä¸‹è½½æˆåŠŸï¼')
  } catch (error) {
    console.error('ä¸‹è½½å¤±è´¥ï¼š', error)
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13">ğŸ¨ Composable APIï¼ˆv4.0.0 æ–°ç‰¹æ€§ï¼‰</h3>
<p>v4.0.0 ç‰ˆæœ¬å¼•å…¥äº† <code>useQRCode</code> Composableï¼Œæä¾›äº†æ›´çµæ´»çš„ç¼–ç¨‹å¼äºŒç»´ç ç”Ÿæˆæ–¹å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { ref } from 'vue'
import { useQRCode } from 'vue3-next-qrcode'

const { qrcodeURL, isLoading, error, generate, clear } = useQRCode()

const text = ref('ä½ å¥½ä¸–ç•Œ')

const handleGenerate = async () =&gt; {
  await generate({
    text: text.value,
    size: 300,
    margin: 20,
    colorDark: '#000000',
    colorLight: '#ffffff',
  })
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;input v-model="text" placeholder="è¾“å…¥æ–‡æœ¬" /&gt;
    &lt;button @click="handleGenerate" :disabled="isLoading"&gt;
      {{ isLoading ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆ' }}
    &lt;/button&gt;
    &lt;button @click="clear"&gt;æ¸…é™¤&lt;/button&gt;

    &lt;div v-if="error" class="error"&gt;{{ error.message }}&lt;/div&gt;
    &lt;img v-if="qrcodeURL" :src="qrcodeURL" alt="äºŒç»´ç " /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚åˆéœ€è¦åŠ¨æ€æ§åˆ¶äºŒç»´ç ç”Ÿæˆæ—¶æœºçš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-14">ğŸŒ SSR æ”¯æŒï¼ˆNuxtï¼‰</h3>
<p>å¯¹äºä½¿ç”¨ Nuxt çš„å¼€å‘è€…ï¼Œvue3-next-qrcode æä¾›äº†å®Œå–„çš„ SSR æ”¯æŒæ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-15">æ–¹æ³• 1ï¼šä½¿ç”¨ ClientOnlyï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;ClientOnly&gt;
    &lt;QRCodeClient text="ä½ å¥½ Nuxt 3" /&gt;
    &lt;template #fallback&gt;
      &lt;div&gt;åŠ è½½äºŒç»´ç ä¸­...&lt;/div&gt;
    &lt;/template&gt;
  &lt;/ClientOnly&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { QRCodeClient } from 'vue3-next-qrcode'
import 'vue3-next-qrcode/es/style.css'
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">æ–¹æ³• 2ï¼šåŠ¨æ€å¯¼å…¥</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;LazyQRCode v-if="mounted" text="ä½ å¥½ Nuxt" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const LazyQRCode = defineAsyncComponent(() =&gt;
  import('vue3-next-qrcode').then((m) =&gt; m.Vue3NextQrcode),
)

const mounted = ref(false)

onMounted(() =&gt; {
  mounted.value = true
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-17">Nuxt é…ç½®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">transpile</span>: [<span class="hljs-string">'vue3-next-qrcode'</span>],
  },

  <span class="hljs-attr">vite</span>: {
    <span class="hljs-attr">optimizeDeps</span>: {
      <span class="hljs-attr">include</span>: [<span class="hljs-string">'vue3-next-qrcode'</span>],
    },
  },
})
</code></pre>
<h3 data-id="heading-18">ğŸ¨ CSS å˜é‡è‡ªå®šä¹‰æ ·å¼</h3>
<p>æ”¯æŒé€šè¿‡ CSS å˜é‡è¿›è¡Œæ·±åº¦æ ·å¼å®šåˆ¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="æ ·å¼åŒ–äºŒç»´ç "
    :defineProvider="{
      '--r-qrcode-primary-color': '#1677ff',
      '--r-qrcode-primary-color-2': '#69b1ff',
      '--r-qrcode-spin-size': '4px',
    }"
  /&gt;
&lt;/template&gt;
</code></pre>
<p>å¯ç”¨çš„ CSS å˜é‡åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>--r-qrcode-width</code>ï¼šäºŒç»´ç å®½åº¦</li>
<li><code>--r-qrcode-height</code>ï¼šäºŒç»´ç é«˜åº¦</li>
<li><code>--r-qrcode-border-radius</code>ï¼šè¾¹æ¡†åœ†è§’</li>
<li><code>--r-qrcode-mask-color</code>ï¼šé®ç½©å±‚é¢œè‰²</li>
<li><code>--r-qrcode-primary-color</code>ï¼šä¸»é¢˜è‰²</li>
<li><code>--r-qrcode-primary-color-2</code>ï¼šæ¬¡è¦ä¸»é¢˜è‰²</li>
<li><code>--r-qrcode-spin-size</code>ï¼šåŠ è½½åŠ¨ç”»å¤§å°</li>
</ul>
<h3 data-id="heading-19">v4.0.0 é‡å¤§æ›´æ–°</h3>
<p>æœ€æ–°çš„ v4.0.0 ç‰ˆæœ¬å¸¦æ¥äº†è®¸å¤šé‡è¦æ”¹è¿›ï¼š</p>
<h4 data-id="heading-20">ç ´åæ€§å˜æ›´</h4>
<ul>
<li>CSS ç±»åå‰ç¼€ä» <code>ray-qrcode</code> ç»Ÿä¸€æ”¹ä¸º <code>r-qrcode</code></li>
<li><code>img_tag</code> å±æ€§æ”¹ä¸º <code>data-component</code></li>
</ul>
<h4 data-id="heading-21">æ–°å¢ç‰¹æ€§</h4>
<ol>
<li><strong>useQRCode Composable</strong>ï¼šæä¾›æ›´çµæ´»çš„äºŒç»´ç ç”Ÿæˆèƒ½åŠ›</li>
<li><strong>QRCodeClient ç»„ä»¶</strong>ï¼šä¸“ä¸º Nuxt SSR ç¯å¢ƒä¼˜åŒ–</li>
<li><strong>GIF èƒŒæ™¯ç¼“å­˜æœºåˆ¶</strong>ï¼šé¿å…é‡å¤åŠ è½½ç›¸åŒçš„ GIFï¼Œæå‡æ€§èƒ½</li>
<li><strong>å®Œæ•´çš„ ARIA æ— éšœç¢æ”¯æŒ</strong>ï¼šåŒ…æ‹¬ roleã€aria-labelã€é”®ç›˜å¯¼èˆª</li>
<li><strong>ä¼˜åŒ–çš„ TypeScript ç±»å‹å®šä¹‰</strong>ï¼šæä¾›æ›´å¥½çš„ç±»å‹æ¨å¯¼</li>
</ol>
<h4 data-id="heading-22">æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>ä½¿ç”¨ Composition API é‡æ„ç»„ä»¶å†…éƒ¨å®ç°</li>
<li>ä½¿ç”¨ <code>shallowRef</code> ä¼˜åŒ–å¤§å¯¹è±¡æ€§èƒ½</li>
<li>ä¼˜åŒ– watcher ç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li>ä½¿ç”¨ <code>fetch</code> API æ›¿ä»£ <code>XMLHttpRequest</code>ï¼Œæ›´å¥½åœ°æ”¯æŒ SSR</li>
<li>æ·»åŠ é˜²æ­¢å¹¶å‘æ¸²æŸ“çš„é”æœºåˆ¶ï¼Œæå‡ç¨³å®šæ€§</li>
</ul>
<h4 data-id="heading-23">å¼€å‘ä½“éªŒ</h4>
<ul>
<li>æ·»åŠ  ESLint å’Œ Prettier é…ç½®</li>
<li>æ·»åŠ  GitHub Actions CI å·¥ä½œæµ</li>
<li>ä¼˜åŒ– <code>package.json</code> çš„ <code>exports</code> å­—æ®µ</li>
<li>æ·»åŠ  <code>sideEffects</code> é…ç½®ï¼Œä¼˜åŒ– tree-shaking</li>
</ul>
<h3 data-id="heading-24">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-25">1. åŠ¨æ€é“¾æ¥åˆ†äº«</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, computed } from 'vue'

const baseUrl = 'https://example.com/share'
const userId = ref('12345')
const shareUrl = computed(() =&gt; `${baseUrl}?user=${userId.value}`)
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode :text="shareUrl" :watchText="true" :size="200" /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-26">2. æ”¯ä»˜äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const paymentInfo = ref({
  amount: 100,
  orderId: 'ORDER123',
})

const paymentUrl = computed(
  () =&gt;
    `payment://pay?amount=${paymentInfo.value.amount}&amp;order=${paymentInfo.value.orderId}`,
)

const handlePaymentSuccess = (dataURL) =&gt; {
  console.log('æ”¯ä»˜äºŒç»´ç ç”ŸæˆæˆåŠŸ')
  // å¯ä»¥å°† dataURL å‘é€åˆ°åç«¯ä¿å­˜
}
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode
    :text="paymentUrl"
    :size="300"
    logoImage="/logo.png"
    :logoScale="0.2"
    :onSuccess="handlePaymentSuccess"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-27">3. å¸¦çŠ¶æ€çš„äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const qrStatus = ref('loading')
const qrText = ref('')

onMounted(async () =&gt; {
  try {
    // æ¨¡æ‹Ÿä»åç«¯è·å–äºŒç»´ç å†…å®¹
    const response = await fetch('/api/qrcode')
    const data = await response.json()
    qrText.value = data.url
    qrStatus.value = undefined
  } catch (error) {
    qrStatus.value = 'error'
  }
})

const handleReload = async () =&gt; {
  qrStatus.value = 'loading'
  // é‡æ–°åŠ è½½é€»è¾‘
}
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode
    :text="qrText"
    :status="qrStatus"
    errorDescription="äºŒç»´ç åŠ è½½å¤±è´¥"
    :onReload="handleReload"
  /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-28">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li>
<p><strong>ä½¿ç”¨ watchText æ§åˆ¶æ›´æ–°</strong>ï¼šå¦‚æœäºŒç»´ç å†…å®¹ä¸éœ€è¦å®æ—¶æ›´æ–°ï¼Œå¯ä»¥è®¾ç½® <code>:watchText="false"</code> æ¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</p>
</li>
<li>
<p><strong>GIF èƒŒæ™¯ç¼“å­˜</strong>ï¼šv4.0.0 å·²ç»å†…ç½®äº† GIF ç¼“å­˜æœºåˆ¶ï¼Œç›¸åŒçš„ GIF URL åªä¼šåŠ è½½ä¸€æ¬¡</p>
</li>
<li>
<p><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåœ¨ Nuxt æˆ–å¤§å‹åº”ç”¨ä¸­ï¼Œä½¿ç”¨åŠ¨æ€å¯¼å…¥æ¥å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯</p>
</li>
<li>
<p><strong>åˆç†è®¾ç½®å°ºå¯¸</strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚è®¾ç½®åˆé€‚çš„äºŒç»´ç å°ºå¯¸ï¼Œé¿å…ç”Ÿæˆè¿‡å¤§çš„å›¾ç‰‡</p>
</li>
</ol>
<h3 data-id="heading-29">æ€»ç»“</h3>
<p>vue3-next-qrcode æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½ä¼˜ç§€çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“ã€‚æ— è®ºæ˜¯ç®€å•çš„äºŒç»´ç ç”Ÿæˆï¼Œè¿˜æ˜¯å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¸¦ Logoã€GIF èƒŒæ™¯ã€çŠ¶æ€ç®¡ç†ç­‰ï¼‰ï¼Œå®ƒéƒ½èƒ½è½»æ¾åº”å¯¹ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ v4.0.0 ç‰ˆæœ¬å¸¦æ¥çš„ Composable API å’Œ SSR ä¼˜åŒ–ï¼Œè®©å®ƒåœ¨ç°ä»£ Vue 3 åº”ç”¨ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå¼ºå¤§çš„ Vue 3 äºŒç»´ç è§£å†³æ–¹æ¡ˆï¼Œä¸å¦¨è¯•è¯• vue3-next-qrcodeï¼</p>
<h3 data-id="heading-30">ç›¸å…³é“¾æ¥</h3>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FXiaoDaiGua-Ray%2Fvue3-next-qrcode" target="_blank" title="https://github.com/XiaoDaiGua-Ray/vue3-next-qrcode" ref="nofollow noopener noreferrer">github.com/XiaoDaiGua-â€¦</a></li>
<li>NPMï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvue3-next-qrcode" target="_blank" title="https://www.npmjs.com/package/vue3-next-qrcode" ref="nofollow noopener noreferrer">www.npmjs.com/package/vueâ€¦</a></li>
<li>åœ¨çº¿ç¤ºä¾‹ï¼šæŸ¥çœ‹é¡¹ç›® README ä¸­çš„ç¤ºä¾‹å›¾ç‰‡</li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨ GitHub æ Issue æˆ– PRã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆTree Shaking]]></title>    <link>https://juejin.cn/post/7575103881421930550</link>    <guid>https://juejin.cn/post/7575103881421930550</guid>    <pubDate>2025-11-22T13:50:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881421930550" data-draft-id="7575320672570720298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆTree Shaking"/> <meta itemprop="keywords" content="å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-11-22T13:50:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaterFly"/> <meta itemprop="url" content="https://juejin.cn/user/1204720474535063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆTree Shaking
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1204720474535063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaterFly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:50:53.000Z" title="Sat Nov 22 2025 13:50:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Tree Shaking åŸºç¡€çŸ¥è¯†</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Tree Shakingï¼Ÿ</h3>
<p><strong>Tree Shaking</strong>ï¼ˆæ‘‡æ ‘ä¼˜åŒ–ï¼‰æ˜¯ä¸€ç§é€šè¿‡<strong>é™æ€åˆ†æ</strong>æ¶ˆé™¤ JavaScript ä¸­æœªä½¿ç”¨ä»£ç ï¼ˆDead Codeï¼‰çš„ä¼˜åŒ–æŠ€æœ¯ã€‚</p>
<p><strong>å½¢è±¡æ¯”å–»ï¼š</strong></p>
<pre><code class="hljs">æƒ³è±¡ä¸€æ£µæ ‘ï¼ˆä»£ç åº“ï¼‰ï¼š
ğŸŒ³ æ•´æ£µæ ‘ = å®Œæ•´çš„ä»£ç åº“
ğŸ‚ æ¯å¶ = æœªä½¿ç”¨çš„ä»£ç 
ğŸ¤ æ‘‡æ ‘ = æ„å»ºå·¥å…·åˆ†æ
âœ¨ ç»“æœ = åªä¿ç•™éœ€è¦çš„ä»£ç 
</code></pre>
<hr/>
<h3 data-id="heading-2">å·¥ä½œåŸç†</h3>
<h4 data-id="heading-3">1. é™æ€åˆ†æï¼ˆç¼–è¯‘æ—¶ï¼‰</h4>
<p>Tree Shaking ä¾èµ–äº <strong>ES Module (ESM)</strong> çš„é™æ€ç»“æ„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ESM - æ”¯æŒ Tree Shakingï¼ˆé™æ€å¯¼å…¥ï¼‰</span>
<span class="hljs-keyword">import</span> { funcA } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// ç¼–è¯‘æ—¶ç¡®å®š</span>

<span class="hljs-comment">// âŒ CommonJS - ä¸æ”¯æŒ Tree Shakingï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</span>
<span class="hljs-keyword">const</span> { funcA } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./utils'</span>);  <span class="hljs-comment">// è¿è¡Œæ—¶ç¡®å®š</span>
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>ESM</th><th>CommonJS</th></tr></thead><tbody><tr><td><strong>å¯¼å…¥æ—¶æœº</strong></td><td>ç¼–è¯‘æ—¶ï¼ˆé™æ€ï¼‰</td><td>è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰</td></tr><tr><td><strong>ç»“æ„åˆ†æ</strong></td><td>âœ… å¯åˆ†æ</td><td>âŒ ä¸å¯åˆ†æ</td></tr><tr><td><strong>Tree Shaking</strong></td><td>âœ… æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td></tr><tr><td><strong>è¯­æ³•</strong></td><td><code>import/export</code></td><td><code>require/module.exports</code></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-4">2. ä¾èµ–å›¾åˆ†æ</h4>
<p><strong>æ„å»ºå·¥å…·å¦‚ä½•å·¥ä½œï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }      <span class="hljs-comment">// è¢«ä½¿ç”¨ âœ…</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; } <span class="hljs-comment">// æœªä½¿ç”¨ âŒ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a * b; } <span class="hljs-comment">// æœªä½¿ç”¨ âŒ</span>

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// åªå¯¼å…¥ add</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<p><strong>åˆ†æè¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">1.</span> å…¥å£åˆ†æï¼šmain.js å¯¼å…¥äº†ä»€ä¹ˆï¼Ÿ
   â†’ { <span class="hljs-keyword">add</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>

<span class="hljs-number">2.</span> ä¾èµ–è¿½è¸ªï¼š<span class="hljs-keyword">add</span> å‡½æ•°ä¾èµ–ä»€ä¹ˆï¼Ÿ
   â†’ æ— å…¶ä»–ä¾èµ–

<span class="hljs-number">3.</span> æ ‡è®°æ¸…é™¤ï¼š
   âœ… <span class="hljs-keyword">add</span>       â†’ ä¿ç•™ï¼ˆè¢«ä½¿ç”¨ï¼‰
   âŒ subtract  â†’ åˆ é™¤ï¼ˆæœªä½¿ç”¨ï¼‰
   âŒ multiply  â†’ åˆ é™¤ï¼ˆæœªä½¿ç”¨ï¼‰

<span class="hljs-number">4.</span> æœ€ç»ˆäº§ç‰©ï¼š
   åªåŒ…å« <span class="hljs-keyword">add</span> å‡½æ•°
</code></pre>
<hr/>
<h4 data-id="heading-5">3. å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰å¤„ç†</h4>
<p><strong>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ</strong></p>
<p>å‰¯ä½œç”¨æ˜¯æŒ‡<strong>é™¤äº†è¿”å›å€¼ä¹‹å¤–ï¼Œè¿˜ä¼šå½±å“å¤–éƒ¨çŠ¶æ€çš„æ“ä½œ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æœ‰å‰¯ä½œç”¨çš„ä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;           <span class="hljs-comment">// ä¿®æ”¹å…¨å±€å¯¹è±¡</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;         <span class="hljs-comment">// æ³¨å…¥æ ·å¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Module loaded'</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡º</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">myGlobal</span> = <span class="hljs-number">123</span>;         <span class="hljs-comment">// ä¿®æ”¹ window</span>

<span class="hljs-comment">// âœ… æ— å‰¯ä½œç”¨çš„ä»£ç ï¼ˆçº¯å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;  <span class="hljs-comment">// åªè¿”å›å€¼ï¼Œä¸å½±å“å¤–éƒ¨</span>
}
</code></pre>
<p>å¸¸è§çš„å‰¯ä½œç”¨ï¼š</p>
<ul>
<li>ä¿®æ”¹å…¨å±€å˜é‡æˆ–å¯¹è±¡</li>
<li>ä¿®æ”¹å‡½æ•°å‚æ•°</li>
<li>å‘èµ·ç½‘ç»œè¯·æ±‚</li>
<li>DOM æ“ä½œ</li>
<li>åŸå‹é“¾ä¿®æ”¹</li>
<li>å¯¼å…¥ CSS æ–‡ä»¶</li>
<li><strong>æ‰§è¡Œ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</strong></li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å…¨å±€å˜é‡æˆ–å¯¹è±¡</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">myGlobalVar</span> = <span class="hljs-string">'value'</span>;
<span class="hljs-variable language_">global</span>.<span class="hljs-property">config</span> = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span> };

<span class="hljs-comment">// ä¿®æ”¹å‡½æ•°å‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addProperty</span>(<span class="hljs-params">obj</span>) {
  obj.<span class="hljs-property">newProp</span> = <span class="hljs-string">'value'</span>;
}

<span class="hljs-comment">// å‘èµ·ç½‘ç»œè¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);

<span class="hljs-comment">// DOM æ“ä½œ</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>);

<span class="hljs-comment">// åŸå‹é“¾ä¿®æ”¹</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};

<span class="hljs-comment">// å¯¼å…¥ CSS æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;

<span class="hljs-comment">// æ‰§è¡Œ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</span>
(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹åŒ–'</span>);
})();
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ ‡è®°å‰¯ä½œç”¨ï¼Ÿ</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>  <span class="hljs-comment">// å‘Šè¯‰æ‰“åŒ…å·¥å…·ï¼š"æ‰€æœ‰ä»£ç éƒ½æ— å‰¯ä½œç”¨"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }

<span class="hljs-comment">// polyfill.js</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">includes</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { ... };  <span class="hljs-comment">// æœ‰å‰¯ä½œç”¨ï¼</span>

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// ä½¿ç”¨ utils</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;            <span class="hljs-comment">// ä¸ä½¿ç”¨ï¼Œä½†æœ‰å‰¯ä½œç”¨</span>

<span class="hljs-comment">// âŒ å¦‚æœ sideEffects: false</span>
<span class="hljs-comment">// â†’ polyfill.js è¢«åˆ é™¤ï¼ˆè®¤ä¸ºæ— å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-comment">// â†’ å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼</span>

<span class="hljs-comment">// âœ… å¦‚æœ sideEffects: ["**/polyfill.js"]</span>
<span class="hljs-comment">// â†’ polyfill.js è¢«ä¿ç•™ï¼ˆæ ‡è®°ä¸ºæœ‰å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-comment">// â†’ è¿è¡Œæ­£å¸¸</span>
</code></pre>
<hr/>
<p>å‰¯ä½œç”¨ä»£ç ä¸sideEffectsé…ç½®çš„å…³ç³»</p>
<ul>
<li>
<p>å‰¯ä½œç”¨ä»£ç ï¼Œè¿™æ˜¯å®¢è§‚äº‹å®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ®µä»£ç æ˜¯å¦æ˜¯å‰¯ä½œç”¨ä»£ç ï¼Œå·²ç»æ˜¯ç¡®å®šçš„ã€‚</p>
</li>
<li>
<p><code>package.json sideEffectsï¼Œ</code>æ–‡ä»¶çº§åˆ«é…ç½®ï¼Œç”¨æ¥äººä¸ºå£°æ˜æ–‡ä»¶æ˜¯å¦â€œå¯èƒ½æœ‰å‰¯ä½œç”¨â€ï¼Œä»è€Œå†³å®šæœªå¼•ç”¨çš„æ–‡ä»¶èƒ½å¦è¢«æ•´ä½“åˆ é™¤ã€‚</p>
<ul>
<li>é»˜è®¤ä¸º<code>true</code>ï¼Œåˆ™ç¼–è¯‘å™¨ä¸æ•¢å‡è®¾æ–‡ä»¶æ— å‰¯ä½œç”¨ï¼Œæ‰€ä»¥ä¸ä¼šåˆ é™¤æœªå¼•ç”¨çš„æ–‡ä»¶ã€‚å±äºä¿å®ˆç­–ç•¥ã€‚</li>
<li>å¦‚æœé…ç½®ä¸º<code>false</code>ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶éƒ½è§†ä¸ºæ— å‰¯ä½œç”¨æ–‡ä»¶ï¼Œåªè¦æ–‡ä»¶æ²¡æœ‰è¢«importï¼Œå°±å¯ä»¥è¢«æ•´ä¸ªåˆ é™¤ã€‚å±äºæ¿€è¿›ç­–ç•¥</li>
<li>å¦‚æœé…ç½®ä¸ºæ–‡ä»¶æ•°ç»„ï¼Œåˆ™é…ç½®çš„æ–‡ä»¶ä¼šè®¤ä¸ºæœ‰å‰¯ä½œç”¨ï¼Œå³ä½¿æ–‡ä»¶æ²¡è¢«å¼•ç”¨ä¹Ÿä¼šè¢«ä¿ç•™å’Œæ‰“åŒ…ï¼›å…¶ä»–æ–‡ä»¶è®¤ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ä»£ç ï¼Œå¦‚æœæ–‡ä»¶æ²¡è¢«å¼•ç”¨åˆ™ç¼–è¯‘ä¼šè¢«ç§»é™¤ä¸ä¼šè¢«æ‰“åŒ…ã€‚æ¯”å¦‚åœ¨åº“ä¸­ï¼Œä¸€èˆ¬CSSæ–‡ä»¶å’Œpolyfillæ–‡ä»¶å°±è¦è¢«åŒ…å«åœ¨å†…ï¼Œæ¯”å¦‚ï¼š<code>["*.css", "src/polyfill.js"]</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">Tree Shaking çš„å‰ææ¡ä»¶</h3>
<h4 data-id="heading-7">âœ… å¿…é¡»æ»¡è¶³çš„æ¡ä»¶</h4>
<ol>
<li><strong>ä½¿ç”¨ ESM æ¨¡å—æ ¼å¼</strong></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/esm/index.js"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>
<p><strong>æ„å»ºå·¥å…·æ”¯æŒ</strong></p>
<ul>
<li>Webpack 4+</li>
<li>Rollupï¼ˆåŸç”Ÿæ”¯æŒï¼‰</li>
<li>Viteï¼ˆåŸºäº Rollupï¼‰</li>
<li>esbuild</li>
</ul>
</li>
<li>
<p><strong>æ­£ç¡®é…ç½® sideEffects</strong></p>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// æ— å‰¯ä½œç”¨</span>
  <span class="hljs-comment">// æˆ–</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"**/*.css"</span><span class="hljs-punctuation">]</span>     <span class="hljs-comment">// åªæœ‰ CSS æœ‰å‰¯ä½œç”¨</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="4">
<li><strong>é¿å…åŠ¨æ€å¯¼å…¥ï¼ˆåœ¨éœ€è¦ Tree Shaking çš„åœ°æ–¹ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åŠ¨æ€å¯¼å…¥ - æ— æ³• Tree Shaking</span>
<span class="hljs-keyword">const</span> moduleName = <span class="hljs-string">'utils'</span>;
<span class="hljs-keyword">import</span>(<span class="hljs-string">`./<span class="hljs-subst">${moduleName}</span>`</span>);

<span class="hljs-comment">// âœ… é™æ€å¯¼å…¥ - å¯ä»¥ Tree Shaking</span>
<span class="hljs-keyword">import</span> { func } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
</code></pre>
<hr/>
<h3 data-id="heading-8">å¸¸è§é˜»ç¢ Tree Shaking çš„æƒ…å†µ</h3>
<h4 data-id="heading-9">1. ä½¿ç”¨ CommonJS</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸æ”¯æŒ Tree Shaking</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
  <span class="hljs-attr">subtract</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b,
};

<span class="hljs-comment">// âœ… æ”¯æŒ Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">subtract</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b;
</code></pre>
<hr/>
<h4 data-id="heading-10">2. é»˜è®¤å¯¼å‡ºæ•´ä¸ªå¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ éš¾ä»¥ Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
  <span class="hljs-attr">subtract</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b,
};

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> utils <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
utils.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ•´ä¸ªå¯¹è±¡éƒ½è¢«å¯¼å…¥</span>

<span class="hljs-comment">// âœ… æ˜“äº Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">subtract</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b;

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// åªå¯¼å…¥éœ€è¦çš„</span>
</code></pre>
<hr/>
<h4 data-id="heading-11">3. å‰¯ä½œç”¨æœªæ­£ç¡®æ ‡è®°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// styles.css</span>
.<span class="hljs-property">button</span> { <span class="hljs-attr">color</span>: red; }

<span class="hljs-comment">// Component.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;  <span class="hljs-comment">// å‰¯ä½œç”¨ï¼šæ³¨å…¥æ ·å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) { ... }

<span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"sideEffects"</span>: <span class="hljs-literal">false</span>  <span class="hljs-comment">// âŒ é”™è¯¯ï¼CSS ä¼šè¢«åˆ é™¤</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®é…ç½®</span>
{
  <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/*.css"</span>]  <span class="hljs-comment">// CSS ä¸ä¼šè¢«åˆ é™¤</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-12">4. ç±»å’Œæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ç±»çš„æ–¹æ³•å¯èƒ½æ— æ³• Tree Shaking</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Utils</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
  <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
}

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Utils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-keyword">const</span> u = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Utils</span>();
u.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ•´ä¸ªç±»éƒ½è¢«å¯¼å…¥</span>

<span class="hljs-comment">// âœ… æ›´å¥½çš„æ–¹å¼ï¼ˆçº¯å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
</code></pre>
<hr/>
<h3 data-id="heading-13">Tree Shaking å®æˆ˜ç¤ºä¾‹</h3>
<h4 data-id="heading-14">ç¤ºä¾‹ 1ï¼šåŸºç¡€ Tree Shaking</h4>
<p><strong>åº“ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// math-lib/index.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a * b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a / b; }
</code></pre>
<p><strong>ç”¨æˆ·ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// app.js</span>
import { <span class="hljs-keyword">add</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'math-lib'</span>;

console.log(<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<p><strong>æ‰“åŒ…ç»“æœï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// bundle.jsï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));

<span class="hljs-comment">// âœ… subtractã€multiplyã€divide è¢«åˆ é™¤</span>
</code></pre>
<hr/>
<h4 data-id="heading-15">ç¤ºä¾‹ 2ï¼šç»„ä»¶åº“ Tree Shaking</h4>
<p><strong>åº“ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ui-lib/index.js</span>
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Input'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Select</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Select'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Modal'</span>;

<span class="hljs-comment">// ui-lib/Button.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./Button.css'</span>;  <span class="hljs-comment">// å‰¯ä½œç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) { ... }

<span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/*.css"</span>]  <span class="hljs-comment">// ä¿æŠ¤ CSS</span>
}
</code></pre>
<p><strong>ç”¨æˆ·ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ui-lib'</span>;

<span class="hljs-title class_">Button</span>();
</code></pre>
<p><strong>æ‰“åŒ…ç»“æœï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// bundle.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./Button.css'</span>;  <span class="hljs-comment">// âœ… CSS è¢«ä¿ç•™ï¼ˆæ ‡è®°ä¸ºå‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) { ... }
<span class="hljs-title class_">Button</span>();

<span class="hljs-comment">// âœ… Inputã€Selectã€Modal åŠå…¶ CSS éƒ½è¢«åˆ é™¤</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">Tree Shaking æ•ˆæœéªŒè¯</h3>
<h4 data-id="heading-17">æ–¹æ³• 1ï¼šåˆ†ææ‰“åŒ…ç»“æœ</h4>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># Webpack</span>
npm run build <span class="hljs-operator">-</span><span class="hljs-operator">-</span> <span class="hljs-operator">-</span><span class="hljs-operator">-</span>analyze

<span class="hljs-comment"># Rollup</span>
rollup <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-operator">-</span><span class="hljs-operator">-</span>plugin visualizer

<span class="hljs-comment"># Vite</span>
vite build <span class="hljs-operator">-</span><span class="hljs-operator">-</span>mode production
<span class="hljs-comment"># æŸ¥çœ‹ dist/stats.html</span>
</code></pre>
<hr/>
<h4 data-id="heading-18">æ–¹æ³• 2ï¼šæ‰‹åŠ¨æ£€æŸ¥</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// 1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬</span>
npm run build

<span class="hljs-comment">// 2. æœç´¢æœªä½¿ç”¨çš„ä»£ç </span>
grep -r <span class="hljs-string">"unusedFunction"</span> dist/

<span class="hljs-comment">// 3. å¦‚æœæ‰¾åˆ° â†’ Tree Shaking å¤±è´¥</span>
<span class="hljs-comment">// å¦‚æœæœªæ‰¾åˆ° â†’ Tree Shaking æˆåŠŸ</span>
</code></pre>
<hr/>
<h4 data-id="heading-19">æ–¹æ³• 3ï¼šå¯¹æ¯”ä½“ç§¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµ‹è¯• 1ï¼šå¼•å…¥æ‰€æœ‰</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">All</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
<span class="hljs-comment">// æ‰“åŒ…ä½“ç§¯ï¼š100 KB</span>

<span class="hljs-comment">// æµ‹è¯• 2ï¼šåªå¼•å…¥ä¸€ä¸ª</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
<span class="hljs-comment">// æ‰“åŒ…ä½“ç§¯ï¼š20 KB</span>

<span class="hljs-comment">// âœ… Tree Shaking æœ‰æ•ˆï¼šå‡å°‘ 80%</span>
</code></pre>
<hr/>
<h3 data-id="heading-20">ä¸ºåº“å¼€å‘è€…çš„ Tree Shaking æ£€æŸ¥æ¸…å•</h3>
<h4 data-id="heading-21">âœ… æ„å»ºé…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ ESM è¾“å‡ºæ ¼å¼ï¼ˆ<code>format: 'es'</code>ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é…ç½® <code>preserveModules: true</code>ï¼ˆä¿ç•™æ¨¡å—ç»“æ„ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è®¾ç½® <code>package.json</code> çš„ <code>module</code> å­—æ®µ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è®¾ç½® <code>package.json</code> çš„ <code>sideEffects</code> å­—æ®µ</li>
</ul>
<h4 data-id="heading-22">âœ… ä»£ç è§„èŒƒ</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ <code>export</code> è€Œé <code>export default {}</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¿å…åœ¨æ¨¡å—é¡¶å±‚æ‰§è¡Œå‰¯ä½œç”¨ä»£ç </li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> çº¯å‡½æ•°ä¼˜äºç±»ï¼ˆå‡½æ•°æ›´å®¹æ˜“ Tree Shakingï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å°† CSS å¯¼å…¥æ ‡è®°ä¸ºå‰¯ä½œç”¨</li>
</ul>
<h4 data-id="heading-23">âœ… æ–‡æ¡£è¯´æ˜</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨ README ä¸­è¯´æ˜æ”¯æŒ Tree Shaking</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æä¾›æŒ‰éœ€å¼•å…¥çš„ç¤ºä¾‹</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ ‡æ³¨å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-24">å¸¸è§è¯¯åŒº</h3>
<h4 data-id="heading-25">âŒ è¯¯åŒº 1ï¼š"å‹ç¼© = Tree Shaking"</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‹ç¼©ï¼ˆMinifyï¼‰ï¼šç¼©çŸ­å˜é‡åã€åˆ é™¤ç©ºæ ¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a,b</span>){<span class="hljs-keyword">return</span> a+b}

<span class="hljs-comment">// Tree Shakingï¼šåˆ é™¤æœªä½¿ç”¨çš„ä»£ç </span>
<span class="hljs-comment">// å¦‚æœ add æ²¡è¢«ç”¨ï¼Œæ•´ä¸ªå‡½æ•°è¢«åˆ é™¤</span>

<span class="hljs-comment">// ä¸¤è€…ä¸åŒï¼</span>
</code></pre>
<hr/>
<h4 data-id="heading-26">âŒ è¯¯åŒº 2ï¼š"webpack è‡ªåŠ¨ Tree Shaking"</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸ä¼šè‡ªåŠ¨ Tree Shakingï¼ˆCommonJSï¼‰</span>
<span class="hljs-keyword">const</span> lib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'my-lib'</span>);

<span class="hljs-comment">// âœ… æ‰èƒ½ Tree Shakingï¼ˆESMï¼‰</span>
<span class="hljs-keyword">import</span> { func } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
</code></pre>
<hr/>
<h4 data-id="heading-27">âŒ è¯¯åŒº 3ï¼š"è®¾ç½® sideEffects: false å°±å¤Ÿäº†"</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// package.json</span>
{ <span class="hljs-string">"sideEffects"</span>: <span class="hljs-literal">false</span> }

<span class="hljs-comment">// âŒ ä½†ä»£ç ä¸­æœ‰å‰¯ä½œç”¨</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;  <span class="hljs-comment">// ä¼šè¢«åˆ é™¤ï¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>; <span class="hljs-comment">// ä¼šè¢«åˆ é™¤ï¼</span>

<span class="hljs-comment">// âœ… æ­£ç¡®é…ç½®</span>
{ <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/polyfill.js"</span>, <span class="hljs-string">"**/*.css"</span>] }
</code></pre>
<hr/>
<h3 data-id="heading-28">å°ç»“</h3>
<p><strong>Tree Shaking æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>åŸºäº ESM</strong> çš„é™æ€åˆ†æ</li>
<li><strong>ç¼–è¯‘æ—¶</strong> ç¡®å®šä¾èµ–å…³ç³»</li>
<li><strong>åˆ é™¤</strong> æœªä½¿ç”¨çš„ä»£ç </li>
<li><strong>ä¿ç•™</strong> æœ‰å‰¯ä½œç”¨çš„ä»£ç </li>
<li><strong>éœ€è¦</strong> æ„å»ºå·¥å…·ã€æ¨¡å—æ ¼å¼ã€é…ç½®ä¸‰è€…é…åˆ</li>
</ol>
<p><strong>è®°å¿†å£è¯€ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ESM æ˜¯å‰æï¼ˆ<span class="hljs-keyword">import</span>/<span class="hljs-keyword">export</span>ï¼‰
é™æ€åˆ†æä¸ºåŸºç¡€ï¼ˆç¼–è¯‘æ—¶ç¡®å®šï¼‰
æ ‡è®°å‰¯ä½œç”¨è¦æ¸…æ¥šï¼ˆsideEffectsï¼‰
ä¿ç•™ç»“æ„æ‰æœ‰æ•ˆï¼ˆpreserveModulesï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-29">é™„å½•</h3>
<ul>
<li>Webpack-Tree Shakingï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2Fguides%2Ftree-shaking%2F" target="_blank" title="https://webpack.docschina.org/guides/tree-shaking/" ref="nofollow noopener noreferrer">CN</a> / <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fguides%2Ftree-shaking%2F" target="_blank" title="https://webpack.js.org/guides/tree-shaking/" ref="nofollow noopener noreferrer">EN</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2Ffaqs%2F%23what-is-tree-shaking" target="_blank" title="https://rollupjs.org/faqs/#what-is-tree-shaking" ref="nofollow noopener noreferrer">Rollup tree-shaking</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freeli.github.io%2Fblog%2Fbuild_webpack-tree-shaking.html%23%25E4%25B8%25BA%25E4%25BB%2580%25E4%25B9%2588%25E9%259C%2580%25E8%25A6%2581-tree-shaking" target="_blank" title="https://reeli.github.io/blog/build_webpack-tree-shaking.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-tree-shaking" ref="nofollow noopener noreferrer">èŠèŠ Webpack Tree shaking - æ©˜å­çš„å‰ç«¯æ‚è®°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F32554436" target="_blank" title="https://zhuanlan.zhihu.com/p/32554436" ref="nofollow noopener noreferrer">Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - åŸç†ç¯‡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkettanaito.com%2Fblog%2Fbuilding-a-treeshakable-library-with-rollup" target="_blank" title="https://kettanaito.com/blog/building-a-treeshakable-library-with-rollup" ref="nofollow noopener noreferrer">Building a Tree-shakable Library with Rollup - Rollupä½œè€…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbluepnume.medium.com%2Fjavascript-tree-shaking-like-a-pro-7bf96e139eb7" target="_blank" title="https://bluepnume.medium.com/javascript-tree-shaking-like-a-pro-7bf96e139eb7" ref="nofollow noopener noreferrer">JavaScript tree shaking, like a pro</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FTree_shaking" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Glossary/Tree_shaking" ref="nofollow noopener noreferrer">MDN-æ‘‡æ ‘ä¼˜åŒ–</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7575102474639245363</link>    <guid>https://juejin.cn/post/7575102474639245363</guid>    <pubDate>2025-11-22T14:09:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102474639245363" data-draft-id="7575065042158977074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:09:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yanni4Night"/> <meta itemprop="url" content="https://juejin.cn/user/4089838983724520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838983724520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yanni4Night
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:09:42.000Z" title="Sat Nov 22 2025 14:09:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸¤ä¸ªææ¡ˆ</h2>
<p>åœ¨ ECMAScript ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„è¿­ä»£å™¨ç›¸å…³ææ¡ˆï¼Œå®ƒä»¬æä¾›ä¸åŒçš„åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>Iterator Helpers</strong> ææ¡ˆä¸º <strong>Iterator.prototype</strong> æ·»åŠ çš„åŸå‹æ–¹æ³•ï¼ˆå¦‚ <strong>map</strong>ã€<strong>filter</strong> ç­‰ï¼‰ï¼Œå…è®¸ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ“ä½œæ–¹æ³•</li>
<li><strong>Iterator Sequencing</strong>ï¼šæä¾› <strong>Iterator</strong> å¯¹è±¡ä¸Šçš„é™æ€æ–¹æ³•ï¼ˆå¦‚ <strong>Iterator.concat</strong>ï¼‰ï¼Œç”¨äºåˆ›å»ºå’Œæ“ä½œè¿­ä»£åºåˆ—</li>
</ol>
<p>æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»è¿™ä¸¤ä¸ªææ¡ˆçš„æ ¸å¿ƒåŠŸèƒ½å’Œç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">1. Iterator Helpersï¼ˆåŸå‹æ–¹æ³•ï¼‰</h2>
<p>Iterator Helpers ææ¡ˆä¸º Iterator.prototype æ·»åŠ äº†ä¸€ç³»åˆ—ç±»ä¼¼äºæ•°ç»„çš„æ–¹æ³•ï¼Œè®©å¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ“ä½œæ–¹æ³•ã€‚</p>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Iterator Helpersï¼Ÿ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ¦‚å¿µï¼Œå®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿéå†å„ç§æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ï¼Œåœ¨ <strong>Iterator Helpers</strong> ææ¡ˆä¹‹å‰ï¼Œå¦‚æœä½ æƒ³å¯¹è¿­ä»£å™¨è¿›è¡Œä¸€äº›å¸¸è§æ“ä½œï¼ˆæ¯”å¦‚æ˜ å°„ã€è¿‡æ»¤ç­‰ï¼‰ï¼Œé€šå¸¸éœ€è¦å…ˆå°†å…¶è½¬æ¢ä¸ºæ•°ç»„ï¼Œè¿™åœ¨å¤„ç†å¤§æ•°æ®é›†æ—¶å¯èƒ½ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä»¥å‰ä½ å¯èƒ½éœ€è¦è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">generateValues</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">4</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">5</span>;
}

<span class="hljs-keyword">const</span> iterator = <span class="hljs-title function_">generateValues</span>();

<span class="hljs-comment">// æƒ³è¦è¿‡æ»¤å‡ºå¶æ•°å¹¶ä¹˜ä»¥2ï¼Œéœ€è¦å…ˆè½¬æˆæ•°ç»„</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterator)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// [4, 8]</span>
</code></pre>
<p>è€Œæœ‰äº† <strong>Iterator Helpers</strong> åŸå‹æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿­ä»£å™¨ä¸Šæ“ä½œï¼Œé¿å…ä¸­é—´æ•°ç»„çš„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Iterator Sequencingï¼ˆææ¡ˆå®ç°ï¼‰</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">generateValues</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-comment">// è¿­ä»£ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> value <span class="hljs-keyword">of</span> result) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value); <span class="hljs-comment">// è¾“å‡º 4, 8</span>
}
</code></pre>
<h3 data-id="heading-3">1.2 Iterator Helpers æä¾›çš„ä¸»è¦åŸå‹æ–¹æ³•</h3>
<p>Iterator Helpers ææ¡ˆä¸º Iterator.prototype æ·»åŠ äº†ä»¥ä¸‹æ ¸å¿ƒæ–¹æ³•ï¼š</p>
<h4 data-id="heading-4">1.2.1 map()</h4>
<p>ç±»ä¼¼äºæ•°ç»„çš„ <code>map</code> æ–¹æ³•ï¼Œ<code>Iterator.prototype.map()</code> å¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå€¼åº”ç”¨ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è½¬æ¢åå€¼çš„æ–°è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šå°†æ•°å­—ä¹˜ä»¥2</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> doubled = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> doubled) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 2, 4, 6, 8, 10</span>
}
</code></pre>
<h4 data-id="heading-5">1.2.2 filter()</h4>
<p><code>Iterator.prototype.filter()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼ŒåŒ…å«æ‰€æœ‰é€šè¿‡æŒ‡å®šæµ‹è¯•å‡½æ•°çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šç­›é€‰å‡ºå¶æ•°</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> evenNumbers = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> evenNumbers) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 2, 4, 6</span>
}
</code></pre>
<h4 data-id="heading-6">1.2.3 take()</h4>
<p><code>Iterator.prototype.take()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼Œæœ€å¤šåŒ…å«åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šåªå–å‰3ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> firstThree = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">take</span>(<span class="hljs-number">3</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> firstThree) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 1, 2, 3</span>
}
</code></pre>
<h4 data-id="heading-7">1.2.4 drop()</h4>
<p><code>Iterator.prototype.drop()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼Œè·³è¿‡åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè·³è¿‡å‰2ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> afterFirstTwo = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">drop</span>(<span class="hljs-number">2</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> afterFirstTwo) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 3, 4, 5</span>
}
</code></pre>
<h4 data-id="heading-8">1.2.5 flatMap()</h4>
<p><code>Iterator.prototype.flatMap()</code> æ–¹æ³•å…ˆå¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œç„¶åå°†ç»“æœæ‰å¹³åŒ–ä¸ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šå°†æ¯ä¸ªæ•°å­—æ‰©å±•ä¸ºåŒ…å«è¯¥æ•°å­—çš„æ•°ç»„</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> expanded = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> [num, num * <span class="hljs-number">2</span>]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> expanded) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 1, 2, 2, 4, 3, 6</span>
}
</code></pre>
<h4 data-id="heading-9">1.2.6 some() å’Œ every()</h4>
<p><strong>Iterator.prototype.some()</strong> å’Œ <strong>Iterator.prototype.every()</strong> æ–¹æ³•æµ‹è¯•è¿­ä»£å™¨çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¶æ•°</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>];
  <span class="hljs-keyword">const</span> hasEven = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hasEven); <span class="hljs-comment">// true</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"some() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ­£æ•°</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
  <span class="hljs-keyword">const</span> allPositive = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num &gt; <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(allPositive); <span class="hljs-comment">// true</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"every() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}
</code></pre>
<h4 data-id="heading-10">1.2.7 reduce()</h4>
<p><code>Iterator.prototype.reduce()</code> æ–¹æ³•å¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªreducerå‡½æ•°ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¡ç®—æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
  <span class="hljs-keyword">const</span> sum = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, num</span>) =&gt;</span> acc + num, <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sum); <span class="hljs-comment">// 15</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"reduce() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}
</code></pre>
<h3 data-id="heading-11">1.3 å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-12">1.3.1 åœºæ™¯ä¸€ï¼šå¤„ç†å¤§å‹æ•°æ®é›†</h4>
<p>å½“å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ï¼ŒIterator Helpers å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…ä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾æœ‰ä¸€ä¸ªç”Ÿæˆå¤§é‡æ•°æ®çš„ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">generateLargeDataset</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆå¤§é‡æ•°æ®</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
    <span class="hljs-keyword">yield</span> { <span class="hljs-attr">id</span>: i, <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ Iterator Helpers å¤„ç†æ•°æ®ï¼Œæ— éœ€ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨åˆ°å†…å­˜</span>
<span class="hljs-keyword">const</span> processedData = <span class="hljs-title function_">generateLargeDataset</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0.5</span>)  <span class="hljs-comment">// åªä¿ç•™å€¼å¤§äº0.5çš„é¡¹</span>
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: item.<span class="hljs-property">id</span>, <span class="hljs-attr">value</span>: item.<span class="hljs-property">value</span> * <span class="hljs-number">100</span> }))  <span class="hljs-comment">// å€¼ä¹˜ä»¥100</span>
  .<span class="hljs-title function_">take</span>(<span class="hljs-number">10</span>);  <span class="hljs-comment">// åªå–å‰10ä¸ªç»“æœ</span>

<span class="hljs-comment">// é€ä¸€å¤„ç†ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> processedData) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item);
}
</code></pre>
<h4 data-id="heading-13">1.3.2 åœºæ™¯äºŒï¼šå¼‚æ­¥æ•°æ®æµå¤„ç†</h4>
<p>ç»“åˆå¼‚æ­¥è¿­ä»£å™¨ï¼ŒIterator Helpers å¯ä»¥ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥æ•°æ®æµï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œå±•ç¤ºçš„æ˜¯ç»“åˆå¼‚æ­¥è¿­ä»£å™¨çš„ç”¨æ³•ï¼Œ</span>
<span class="hljs-comment">// å®é™…çš„å¼‚æ­¥Iterator Helperså¯èƒ½åœ¨å…¶ä»–ææ¡ˆä¸­</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processAsyncData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ•°æ®æº</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">fetchDataInChunks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100</span>));
      <span class="hljs-keyword">yield</span> [i * <span class="hljs-number">10</span>, i * <span class="hljs-number">10</span> + <span class="hljs-number">1</span>, i * <span class="hljs-number">10</span> + <span class="hljs-number">2</span>];
    }
  }

  <span class="hljs-comment">// å¤„ç†å¼‚æ­¥æ•°æ®</span>
  <span class="hljs-keyword">const</span> asyncIterator = <span class="hljs-title function_">fetchDataInChunks</span>();
  
  <span class="hljs-comment">// åœ¨æ”¯æŒå¼‚æ­¥Iterator Helpersçš„ç¯å¢ƒä¸­</span>
  <span class="hljs-comment">// å¯ä»¥è¿™æ ·é“¾å¼å¤„ç†ï¼š</span>
  <span class="hljs-comment">/*
  for await (const item of asyncIterator
    .flatMap(chunk =&gt; chunk)
    .filter(num =&gt; num % 2 === 0)
    .map(num =&gt; num * 2)) {
    console.log(item);
  }
  */</span>
  
  <span class="hljs-comment">// å½“å‰ç¯å¢ƒçš„æ›¿ä»£å®ç°</span>
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> asyncIterator) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> chunk) {
      <span class="hljs-keyword">if</span> (num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num * <span class="hljs-number">2</span>);
      }
    }
  }
}

<span class="hljs-comment">// processAsyncData();</span>
</code></pre>
<h2 data-id="heading-14">2. Iterator Sequencingï¼ˆé™æ€æ–¹æ³•ï¼‰</h2>
<p><strong>Iterator Sequencing</strong> ææ¡ˆæä¾›äº† <strong>Iterator</strong> å¯¹è±¡ä¸Šçš„é™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå’Œæ“ä½œè¿­ä»£åºåˆ—ã€‚</p>
<h3 data-id="heading-15">2.1 <strong>Iterator.concat(...items)</strong></h3>
<p>å°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡è¿æ¥æˆä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè¿æ¥å¤šä¸ªæ•°ç»„çš„è¿­ä»£å™¨</span>
<span class="hljs-keyword">const</span> iter1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> iter2 = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> concatenated = <span class="hljs-title class_">Iterator</span>.<span class="hljs-title function_">concat</span>(iter1, iter2);

<span class="hljs-comment">// éå†è¿æ¥åçš„è¿­ä»£å™¨</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> concatenated) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item); <span class="hljs-comment">// è¾“å‡º: 1, 2, 3, 4, 5, 6</span>
}
</code></pre>
<h2 data-id="heading-16">ææ¡ˆçŠ¶æ€å’Œå…¼å®¹æ€§</h2>
<p>ä¸¤ä¸ªææ¡ˆç›®å‰çš„çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>Iterator Helpers</strong> ææ¡ˆå·²ç»è¢«çº³å…¥ <strong>ECMAScript 2025</strong> æ ‡å‡†ï¼Œåœ¨æ”¯æŒ <strong>ES2025</strong> çš„ç¯å¢ƒä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
<li><strong>Iterator Sequencing</strong> ææ¡ˆç›®å‰å¤„äº <strong>Stage 3</strong> é˜¶æ®µï¼ˆæˆªè‡³ 2025 å¹´ 11 æœˆï¼‰ï¼Œæœ‰æœ›åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ ‡å‡†åŒ–</li>
</ul>
<p>è¦æ£€æŸ¥ä½ çš„ç¯å¢ƒæ˜¯å¦æ”¯æŒè¿™äº›ç‰¹æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥ Iterator Helpers æ”¯æŒ</span>
<span class="hljs-keyword">const</span> supportsIteratorHelpers = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
                                <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">map</span> === <span class="hljs-string">'function'</span>;

<span class="hljs-comment">// æ£€æŸ¥ Iterator Sequencing æ”¯æŒ</span>
<span class="hljs-keyword">const</span> supportsIteratorSequencing = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
                                    <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span>.<span class="hljs-property">concat</span> === <span class="hljs-string">'function'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Iterator Helpers æ”¯æŒ:'</span>, supportsIteratorHelpers);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Iterator Sequencing æ”¯æŒ:'</span>, supportsIteratorSequencing);
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œå¯¹äºå°šæœªå®Œå…¨æ”¯æŒçš„ç¯å¢ƒï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ <strong>polyfill</strong> æˆ–è½¬è¯‘å·¥å…·æ¥ç¡®ä¿ä»£ç çš„å…¼å®¹æ€§ã€‚</p>
<p>å¦ä¸€ç§æ›´è¯¦ç»†çš„æ£€æµ‹æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// æµ‹è¯•åŸºæœ¬æ”¯æŒ</span>
  <span class="hljs-keyword">const</span> test = [<span class="hljs-number">1</span>].<span class="hljs-title function_">values</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Iterator Helpers åŸºæœ¬æ”¯æŒ"</span>);
  
  <span class="hljs-comment">// æµ‹è¯•å…·ä½“æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> methods = [<span class="hljs-string">'map'</span>, <span class="hljs-string">'filter'</span>, <span class="hljs-string">'take'</span>, <span class="hljs-string">'drop'</span>, <span class="hljs-string">'flatMap'</span>, <span class="hljs-string">'some'</span>, <span class="hljs-string">'every'</span>, <span class="hljs-string">'reduce'</span>];
  methods.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">method</span> =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = [<span class="hljs-number">1</span>].<span class="hljs-title function_">values</span>()[method] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${method}</span>: æ”¯æŒ`</span>);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${method}</span>: ä¸æ”¯æŒ`</span>);
    }
  });
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Iterator Helpers ä¸æ”¯æŒ"</span>);
}
</code></pre>
<p>å¦‚æœä½ éœ€è¦åœ¨ä¸æ”¯æŒçš„ç¯å¢ƒä¸­ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <strong>polyfill</strong> åº“ï¼Œå¦‚ core-jsã€‚</p>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>Iterator ç›¸å…³çš„è¿™ä¸¤ä¸ªææ¡ˆä¸º JavaScript å¸¦æ¥äº†å¼ºå¤§çš„è¿­ä»£å™¨æ“ä½œèƒ½åŠ›ï¼š</p>
<ol>
<li><strong>Iterator Helpers</strong>ï¼ˆåŸå‹æ–¹æ³•ï¼‰ï¼šè®©å¼€å‘è€…å¯ä»¥åƒæ“ä½œæ•°ç»„ä¸€æ ·ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ–¹æ³•ï¼Œæé«˜ä»£ç ç®€æ´æ€§å’Œå†…å­˜æ•ˆç‡</li>
<li><strong>Iterator Sequencing</strong>ï¼ˆé™æ€æ–¹æ³•ï¼‰ï¼šæä¾›äº†åˆ›å»ºå’Œç»„åˆè¿­ä»£åºåˆ—çš„å·¥å…·æ–¹æ³•ï¼Œå¢å¼ºäº†è¿­ä»£å™¨çš„åˆ›å»ºå’Œæ“ä½œèƒ½åŠ›</li>
</ol>
<p>è¿™äº›ææ¡ˆå…±åŒä¸°å¯Œäº† JavaScript çš„è¿­ä»£å™¨ç”Ÿæ€ï¼Œä½¿å¾—å¤„ç†å„ç§æ•°æ®ç»“æ„å’Œæ•°æ®æµå˜å¾—æ›´åŠ é«˜æ•ˆå’Œä¾¿æ·ã€‚</p>
<ol>
<li><strong>ä»£ç æ›´ç®€æ´</strong>ï¼šç›´æ¥åœ¨è¿­ä»£å™¨ä¸Šé“¾å¼è°ƒç”¨æ–¹æ³•ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°æ˜“è¯»</li>
<li><strong>å†…å­˜æ•ˆç‡æ›´é«˜</strong>ï¼šé¿å…äº†ä¸å¿…è¦çš„æ•°ç»„è½¬æ¢ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§å‹æ•°æ®é›†</li>
<li><strong>è¿­ä»£å™¨ API æ ‡å‡†åŒ–</strong>ï¼šæä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„ API æ¥æ“ä½œå„ç§è¿­ä»£å™¨</li>
<li><strong>ä¸å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼æ›´å¥‘åˆ</strong>ï¼šé¼“åŠ±ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¤„ç†æ•°æ®</li>
</ol>
<p>éšç€ <strong>Iterator Helpers</strong> ææ¡ˆè¢«çº³å…¥ <strong>ECMAScript 2025</strong> æ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…åœ¨æœªæ¥çš„ JavaScript ç‰ˆæœ¬ä¸­æ›´å¹¿æ³›åœ°ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<hr/>
 <p/>
<table>
    <tbody><tr>
        <td>
            <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f67cd30497a34f66ae5547c02192f59b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=1820&amp;s=574996&amp;e=jpg&amp;b=81dd6b" width="150" loading="lazy"/>
        </td>
        <td> 
<p>æ›´å¤š JavaScript åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ï¼Œå¯ä»¥å­¦ä¹ æˆ‘å†™çš„è¿™æœ¬ <a href="https://juejin.cn/book/7226969813581889575" target="_blank" title="https://juejin.cn/book/7226969813581889575">ã€ŠJavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶ã€‹</a>  å°å†Œã€‚ </p></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨]]></title>    <link>https://juejin.cn/post/7575133880435015731</link>    <guid>https://juejin.cn/post/7575133880435015731</guid>    <pubDate>2025-11-22T14:29:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435015731" data-draft-id="7575133880434933811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:29:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:29:26.000Z" title="Sat Nov 22 2025 14:29:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå‰ç«¯å¼€å‘è€…å¸¸å¸¸éœ€è¦åœ¨æµè§ˆå™¨ä¸­æŒä¹…åŒ–å­˜å‚¨ä¸€äº›ç”¨æˆ·æ•°æ®ã€‚æ¯”å¦‚ç”¨æˆ·çš„åå¥½è®¾ç½®ã€è¡¨å•è‰ç¨¿ã€æˆ–è€…åƒæœ¬æ–‡è¦å®ç°çš„â€”â€”ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹ï¼ˆTo-Do Listï¼‰åº”ç”¨ã€‚HTML5 æä¾›äº†ä¸€ä¸ªéå¸¸å®ç”¨çš„ APIï¼š<strong><code>localStorage</code></strong>ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ä»¥é”®å€¼å¯¹çš„å½¢å¼æ°¸ä¹…ä¿å­˜æ•°æ®ã€‚</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå¸¦ä½ äº†è§£å¦‚ä½•ä½¿ç”¨ <code>localStorage</code> å®ç°ä¸€ä¸ªå¯æŒä¹…åŒ–å­˜å‚¨çš„ To-Do åˆ—è¡¨ï¼Œå¹¶ç»“åˆ JavaScript çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³å’Œäº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼Œå†™å‡ºç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ localStorageï¼Ÿ</h2>
<p><code>localStorage</code> æ˜¯ Web Storage API çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­é•¿æœŸå­˜å‚¨æ•°æ®ã€‚å®ƒçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æŒä¹…æ€§</strong>ï¼šé™¤éç”¨æˆ·æ‰‹åŠ¨æ¸…é™¤ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šè¿‡æœŸã€‚</li>
<li><strong>é”®å€¼å¯¹å­˜å‚¨</strong>ï¼šåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼ˆkey å’Œ value éƒ½æ˜¯å­—ç¬¦ä¸²ï¼‰ã€‚</li>
<li><strong>åŒæºç­–ç•¥</strong>ï¼šåªæœ‰åŒåè®®ã€åŒåŸŸåã€åŒç«¯å£çš„é¡µé¢æ‰èƒ½å…±äº«åŒä¸€ä¸ª <code>localStorage</code>ã€‚</li>
</ul>
<p>ç”±äº <code>localStorage</code> åªèƒ½å­˜å­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šé…åˆ <code>JSON.stringify()</code> å’Œ <code>JSON.parse()</code> æ¥å­˜å‚¨å’Œè¯»å–å¯¹è±¡æˆ–æ•°ç»„ã€‚</p>
<hr/>
<h2 data-id="heading-1">é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h2>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„â€œTapasâ€ï¼ˆå°é£Ÿï¼‰æ¸…å•ï¼Œç”¨æˆ·å¯ä»¥ï¼š</p>
<ul>
<li>æ·»åŠ æ–°çš„ Tapas é¡¹ï¼›</li>
<li>å‹¾é€‰å·²å®Œæˆçš„é¡¹ï¼›</li>
<li>é¡µé¢åˆ·æ–°åæ•°æ®ä¾ç„¶ä¿ç•™ã€‚</li>
</ul>
<p>HTML ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"wrapper"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>LOCAL TAPAS<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"plates"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Loading Tapas...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"add-items"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Item Name"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"item"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"+ Add Item"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>
<p>æ ¸å¿ƒé€»è¾‘é›†ä¸­åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬é€æ­¥æ‹†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-2">åˆå§‹åŒ–æ•°æ®ä¸æ¸²æŸ“åˆ—è¡¨</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä» <code>localStorage</code> ä¸­è¯»å–å·²æœ‰çš„å¾…åŠäº‹é¡¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">items</span> = JSON.parse(localStorage.getItem(<span class="hljs-string">'todos'</span>)) || []<span class="hljs-comment">;</span>
</code></pre>
<p>å¦‚æœ <code>localStorage</code> ä¸­æ²¡æœ‰ <code>'todos'</code> è¿™ä¸ª keyï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºé»˜è®¤å€¼ã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ª <code>populateList</code> å‡½æ•°ï¼Œç”¨äºå°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function populateList(<span class="hljs-attr">plates</span> = [], platesList) {
  <span class="hljs-attr">platesList.innerHTML</span> = plates.map((plate, i) =&gt; {
    return `
      &lt;li&gt;
        &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> data-index=<span class="hljs-variable">${i}</span> id=<span class="hljs-string">"item${i}"</span> <span class="hljs-variable">${plate.done ? 'checked' : ''}</span> /&gt;
        &lt;label <span class="hljs-attr">for</span>=<span class="hljs-string">"item${i}"</span>&gt;<span class="hljs-variable">${plate.text}</span>&lt;/label&gt;
      &lt;/li&gt;
    `<span class="hljs-comment">;</span>
  }).join('')<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>plates</code>ï¼šå¾…åŠäº‹é¡¹æ•°ç»„ï¼›</li>
<li><code>platesList</code>ï¼šè¦æ¸²æŸ“åˆ°çš„ DOM å…ƒç´ ï¼ˆå³ <code>&lt;ul class="plates"&gt;</code>ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡ <code>map</code> æ–¹æ³•ç”Ÿæˆæ¯ä¸ªåˆ—è¡¨é¡¹çš„ HTML å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨ <code>join('')</code> æ‹¼æ¥æˆå®Œæ•´å†…å®¹ï¼Œæœ€åèµ‹å€¼ç»™ <code>innerHTML</code>ã€‚è¿™ç§æ–¹å¼é¿å…äº†é¢‘ç¹æ“ä½œ DOMï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</p>
<p>è°ƒç”¨ä¸€æ¬¡å³å¯å®Œæˆåˆå§‹æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">populateList</span>(items, itemsList);
</code></pre>
<hr/>
<h2 data-id="heading-3">æ·»åŠ æ–°äº‹é¡¹</h2>
<p>å½“ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥å†…å®¹å¹¶ç‚¹å‡»â€œ+ Add Itemâ€æ—¶ï¼Œä¼šè§¦å‘ <code>submit</code> äº‹ä»¶ã€‚æˆ‘ä»¬é€šè¿‡äº‹ä»¶ç›‘å¬å™¨å¤„ç†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">addItems.<span class="hljs-built_in">addEventListener</span>(<span class="hljs-string">'submit'</span>, addItem);
</code></pre>
<p><code>addItem</code> å‡½æ•°çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤ï¼ˆé¡µé¢è·³è½¬ï¼‰</span>
  <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'[name=item]'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
  <span class="hljs-comment">//é€šè¿‡å±æ€§é€‰æ‹©å™¨ æ‹¿åˆ°è¡¨å•ä¸­nameä¸ºitemçš„inputä¸­çš„å€¼ å¹¶å»é™¤å·¦å³ç©ºæ ¼ è¿™é‡Œå…¶å®ä¹Ÿè¿ç”¨åˆ°åŒ…è£…ç±»çš„æ¦‚å¿µ</span>
  <span class="hljs-comment">//å› ä¸ºæ‹¿åˆ°çš„valueæ˜¯å­—ç¬¦ä¸² ç®€å•æ•°æ®ç±»å‹ ä½†æ˜¯å¯ä»¥è°ƒç”¨æ–¹æ³•.trim()</span>
  <span class="hljs-keyword">const</span> item = {
    text,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
    <span class="hljs-comment">//é€šè¿‡doneæ¥æ§åˆ¶å‹¾é€‰æ¡†çš„é€‰ä¸­ ä¸€å¼€å§‹è®¾ç½®ä¸ºfalse</span>
  };
  
  items.<span class="hljs-title function_">push</span>(item);<span class="hljs-comment">//æŠŠè¾“å…¥çš„itemæ·»åŠ åˆ°items</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(items)); <span class="hljs-comment">// æŒä¹…åŒ–å­˜å‚¨</span>
  <span class="hljs-title function_">populateList</span>(items, itemsList); <span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>(); <span class="hljs-comment">// æ¸…ç©ºè¡¨å•å†…å®¹ ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</span>
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>e.preventDefault()</code> é˜²æ­¢é¡µé¢åˆ·æ–°ï¼›</li>
<li>é€šè¿‡ <code>this</code>ï¼ˆæŒ‡å‘è¡¨å•å…ƒç´ ï¼‰è·å–è¾“å…¥æ¡†çš„å€¼ï¼›</li>
<li>æ„é€ æ–°å¯¹è±¡ <code>{ text, done: false }</code> å¹¶åŠ å…¥æ•°ç»„ï¼›</li>
<li>è°ƒç”¨ <code>localStorage.setItem()</code> å°†æ•´ä¸ªæ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²åä¿å­˜ï¼›</li>
<li>é‡æ–°æ¸²æŸ“åˆ—è¡¨å¹¶æ¸…ç©ºè¡¨å•ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">å‹¾é€‰/å–æ¶ˆå‹¾é€‰äº‹é¡¹ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰</h2>
<p>å¦‚æœä¸ºæ¯ä¸ªå¤é€‰æ¡†å•ç‹¬ç»‘å®šäº‹ä»¶ï¼Œæ•ˆç‡ä½ä¸‹ä¸”éš¾ä»¥ç»´æŠ¤ã€‚å› æ­¤æˆ‘ä»¬é‡‡ç”¨<strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šå°†ç‚¹å‡»äº‹ä»¶ç»‘å®šåœ¨çˆ¶å®¹å™¨ <code>&lt;ul class="plates"&gt;</code> ä¸Šï¼Œé€šè¿‡åˆ¤æ–­ç‚¹å‡»ç›®æ ‡æ˜¯å¦ä¸º <code>input</code> æ¥å†³å®šæ˜¯å¦å¤„ç†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">itemsList.addEventListener('click', toggleDone)<span class="hljs-comment">;</span>

function toggleDone(e) {
  const <span class="hljs-attr">el</span> = e.target<span class="hljs-comment">;</span>
  //æŒ‡å®š  å½“ç‚¹å‡»çš„ä¸ºinputæ—¶ æ‰è¿›è¡Œä¸‹é¢æ“ä½œ
  if (<span class="hljs-attr">el</span> === <span class="hljs-string">'INPUT'</span>) {
    const <span class="hljs-attr">index</span> = el.dataset.index<span class="hljs-comment">;</span>
    items<span class="hljs-section">[index]</span>.<span class="hljs-attr">done</span> = !items[index].done<span class="hljs-comment">;</span>
    //é€šè¿‡doneæ¥æ§åˆ¶å‹¾é€‰ ç‚¹å‡»å–å
    localStorage.setItem('todos', JSON.stringify(items))<span class="hljs-comment">;</span>
    //ç‚¹å‡»åä¿®æ”¹äº†itemä¸­çš„doneå€¼ å†æ¬¡è¿›è¡Œæœ¬åœ°å­˜å‚¨
    populateList(items, itemsList)<span class="hljs-comment">;//å†æ¬¡æ¸²æŸ“</span>
  }
}
</code></pre>
<p>æ¯æ¬¡åˆ‡æ¢çŠ¶æ€åï¼Œæˆ‘ä»¬åŒæ ·æ›´æ–° <code>localStorage</code> å¹¶é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œç¡®ä¿è§†å›¾ä¸æ•°æ®ä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°å¼å°è£…ï¼Ÿ</h2>
<p>æ–‡ä¸­æåˆ°ï¼šâ€œ<strong>æ‹’ç»æµç¨‹å¼ä»£ç ï¼Œè¶…è¿‡10è¡Œå°±å°è£…å‡½æ•°</strong>â€ã€‚è¿™å…¶å®æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼š</p>
<ul>
<li><strong>æé«˜å¯è¯»æ€§</strong>ï¼š<code>populateList</code>ã€<code>addItem</code> ç­‰å‡½æ•°åæ¸…æ™°è¡¨è¾¾äº†æ„å›¾ï¼›</li>
<li><strong>ä¾¿äºå¤ç”¨</strong>ï¼šæ¸²æŸ“é€»è¾‘è¢«æŠ½ç¦»ï¼Œå¯åœ¨å¤šå¤„è°ƒç”¨ï¼›</li>
<li><strong>é™ä½è€¦åˆ</strong>ï¼šæ•°æ®æ“ä½œä¸ DOM æ“ä½œåˆ†ç¦»ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼›</li>
<li><strong>æ˜“äºæµ‹è¯•ä¸è°ƒè¯•</strong>ï¼šæ¯ä¸ªå‡½æ•°èŒè´£å•ä¸€ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œé»˜è®¤å‚æ•°ï¼ˆå¦‚ <code>plates = []</code>ï¼‰å’Œè§£æ„èµ‹å€¼ï¼ˆå¦‚ <code>{ text, done }</code>ï¼‰ä¹Ÿä½“ç°äº† ES6 çš„ç®€æ´è¯­æ³•ä¼˜åŠ¿ã€‚</p>
<hr/>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªå°å°çš„â€œLocal Tapasâ€é¡¹ç›®ï¼Œæˆ‘ä»¬ä¸ä»…å®ç°äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰åŠŸèƒ½ï¼Œæ›´é‡è¦çš„æ˜¯æŒæ¡äº†ä»¥ä¸‹æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li><strong><code>localStorage</code> çš„åŸºæœ¬ç”¨æ³•</strong>ï¼šå­˜å‚¨å­—ç¬¦ä¸²ã€é…åˆ <code>JSON</code> å¤„ç†å¤æ‚æ•°æ®ï¼›</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šé«˜æ•ˆå¤„ç†åŠ¨æ€ç”Ÿæˆå…ƒç´ çš„äº¤äº’ï¼›</li>
<li><strong>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</strong>ï¼šå°è£…ç»†èŠ‚ã€å…³æ³¨è¾“å…¥è¾“å‡ºï¼›</li>
<li><strong>DOM æ“ä½œä¼˜åŒ–</strong>ï¼šæ‰¹é‡æ›´æ–°è€Œéé€ä¸ªæ“ä½œã€‚</li>
</ol>
<p>è™½ç„¶è¿™ä¸ªåº”ç”¨å¾ˆç®€å•ï¼Œä½†å®ƒå±•ç¤ºäº†ç°ä»£å‰ç«¯å¼€å‘ä¸­â€œæ•°æ®é©±åŠ¨è§†å›¾â€çš„å…¸å‹æ¨¡å¼ï¼š<strong>æ•°æ®å˜åŒ– â†’ æ›´æ–°å­˜å‚¨ â†’ é‡æ–°æ¸²æŸ“</strong>ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯ Reactã€Vue ç­‰æ¡†æ¶çš„æ€æƒ³åŸºç¡€ã€‚</p>
<p>ä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­æ‰©å±•ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ·»åŠ åˆ é™¤æŒ‰é’®ï¼›</li>
<li>æ”¯æŒç¼–è¾‘äº‹é¡¹ï¼›</li>
<li>æŒ‰å®ŒæˆçŠ¶æ€è¿‡æ»¤ï¼›</li>
<li>åŠ å…¥åŠ¨ç”»æ•ˆæœç­‰ã€‚</li>
</ul>
<p>ä½†æ— è®ºå¦‚ä½•ï¼Œè®°ä½ï¼š<strong>å¥½çš„ä»£ç å§‹äºæ¸…æ™°çš„ç»“æ„å’Œåˆç†çš„æŠ½è±¡</strong>ã€‚è€Œ <code>localStorage</code>ï¼Œæ­£æ˜¯ä½ æ„å»ºç¦»çº¿ä¼˜å…ˆï¼ˆOffline-Firstï¼‰åº”ç”¨çš„ç¬¬ä¸€æ­¥ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ–‡ä»£ç å·²é€šè¿‡å®é™…æµ‹è¯•ï¼Œå¯ç›´æ¥è¿è¡Œã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµä½ çš„æ”¹è¿›æƒ³æ³•ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ]]></title>    <link>https://juejin.cn/post/7575104251865792522</link>    <guid>https://juejin.cn/post/7575104251865792522</guid>    <pubDate>2025-11-22T14:51:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251865792522" data-draft-id="7575133880435048499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:51:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:51:28.000Z" title="Sat Nov 22 2025 14:51:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸŒˆåœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ„å»ºä¸€ä¸ªç¾è§‚ã€äº¤äº’æ€§å¼ºä¸”é€‚é…å¤šç«¯è®¾å¤‡çš„ç½‘é¡µï¼Œç¦»ä¸å¼€ <strong>HTML</strong>ã€<strong>CSSï¼ˆæˆ–å…¶é¢„å¤„ç†å™¨ï¼‰</strong> å’Œ <strong>JavaScript</strong> çš„ç´§å¯†åä½œã€‚æœ¬æ–‡å°†å…¨é¢æ·±å…¥åœ°å‰–æå¦‚ä½•ä½¿ç”¨è¿™äº›æŠ€æœ¯æ‰“é€ ä¸€ä¸ªå…·æœ‰åŠ¨æ€é¢æ¿æ•ˆæœçš„å“åº”å¼ç½‘é¡µï¼Œå¹¶è¯¦ç»†è¡¥å……ç›¸å…³çŸ¥è¯†ä½“ç³»ï¼Œæ¶µç›– <strong>è¯­ä¹‰ç»“æ„ã€å¼¹æ€§å¸ƒå±€ï¼ˆFlexboxï¼‰ã€CSS è¿‡æ¸¡åŠ¨ç”»ã€åª’ä½“æŸ¥è¯¢ã€Stylus é¢„å¤„ç†å™¨åŸç†ã€DOM æ“ä½œä¸äº‹ä»¶ç›‘å¬</strong> ç­‰æ ¸å¿ƒå†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“„ ä¸€ã€HTML ç»“æ„ï¼šè¯­ä¹‰åŒ–é¡µé¢éª¨æ¶</h2>
<p>é¦–å…ˆçœ‹ <code>index.html</code> æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html">DocumentExplore The WorldWild ForestSunny BeachCity on WinterMountains - Clouds
</code></pre>
<p>è™½ç„¶è¿™ä¸ª HTML ç‰‡æ®µç¼ºå°‘å®Œæ•´çš„ <code>&lt;html&gt;</code>ã€<code>&lt;head&gt;</code> å’Œ <code>&lt;body&gt;</code> æ ‡ç­¾ï¼Œä½†ä»ä¸Šä¸‹æ–‡å¯ä»¥æ¨æ–­å‡ºå…¶çœŸå®ç»“æ„åº”ç±»ä¼¼å¦‚ä¸‹ï¼ˆè¿™æ˜¯ç°ä»£ Web å¼€å‘çš„æ ‡å‡†å†™æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Explore The World<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Wild Forest<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Sunny Beach<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>City on Winter<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Mountains - Clouds<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"common.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">âœ… å…³é”®ç‚¹è§£æï¼š</h3>
<ul>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šæ¯ä¸ª <code>.panel</code> ä»£è¡¨ä¸€ä¸ªå¯ç‚¹å‡»çš„â€œæ¢ç´¢åŒºåŸŸâ€ï¼Œæ ‡é¢˜ç”¨ <code>&lt;h3&gt;</code> è¡¨ç¤ºå±‚çº§ã€‚</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šæ‰€æœ‰é¢æ¿åŒ…è£¹åœ¨ <code>.container</code> ä¸­ï¼Œä¾¿äºç»Ÿä¸€å¸ƒå±€æ§åˆ¶ã€‚</li>
<li><strong>å¤–éƒ¨èµ„æºå¼•å…¥</strong>ï¼šé€šè¿‡ <code>&lt;link&gt;</code> å¼•å…¥ CSSï¼Œé€šè¿‡ <code>&lt;script&gt;</code> å¼•å…¥ JSï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¨ äºŒã€CSS æ ·å¼ï¼šå¼¹æ€§å¸ƒå±€ + åŠ¨ç”» + å“åº”å¼</h2>
<p><code>style.css</code> æ˜¯æ•´ä¸ªè§†è§‰è¡¨ç°çš„æ ¸å¿ƒã€‚æˆ‘ä»¬é€è¡Œè§£è¯»å¹¶æ‰©å±•å…¶èƒŒåçš„åŸç†ã€‚</p>
<h3 data-id="heading-3">ğŸ”§ å…¨å±€é‡ç½®ä¸åŸºç¡€å¸ƒå±€</h3>
<pre><code class="hljs language-css" lang="css">* { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; }
</code></pre>
<ul>
<li><strong>é€šé…ç¬¦é€‰æ‹©å™¨</strong>ï¼šæ¸…é™¤æ‰€æœ‰å…ƒç´ é»˜è®¤å†…å¤–è¾¹è·ï¼Œé¿å…æµè§ˆå™¨æ ·å¼å·®å¼‚ï¼ˆä½†ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ›´ç²¾ç»†çš„ reset æˆ– normalize.cssï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}
</code></pre>
<ul>
<li><strong><code>display: flex</code></strong>ï¼šå¼€å¯å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰ï¼Œä½¿å­å…ƒç´ æŒ‰å¼¹æ€§è§„åˆ™æ’åˆ—ã€‚</li>
<li><strong><code>justify-content: center</code></strong>ï¼šä¸»è½´ï¼ˆæ°´å¹³æ–¹å‘ï¼‰å±…ä¸­å¯¹é½ã€‚</li>
<li><strong><code>align-items: center</code></strong>ï¼šäº¤å‰è½´ï¼ˆå‚ç›´æ–¹å‘ï¼‰å±…ä¸­å¯¹é½ã€‚</li>
<li><strong><code>height: 100vh</code></strong>ï¼šè§†å£é«˜åº¦ 100%ï¼Œç¡®ä¿ body å æ»¡å±å¹•ã€‚</li>
<li><strong><code>overflow: hidden</code></strong>ï¼šéšè—æ»šåŠ¨æ¡ï¼Œé˜²æ­¢å†…å®¹æº¢å‡ºå¯¼è‡´æ»šåŠ¨ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>Flexbox å°è¯¾å ‚</strong>ï¼š</p>
<ul>
<li><strong>ä¸»è½´ï¼ˆmain axisï¼‰</strong>ï¼šç”± <code>flex-direction</code> å†³å®šï¼Œé»˜è®¤ä¸º <code>row</code>ï¼ˆæ°´å¹³ï¼‰ã€‚</li>
<li><strong>äº¤å‰è½´ï¼ˆcross axisï¼‰</strong>ï¼šå‚ç›´äºä¸»è½´ã€‚</li>
<li>å­å…ƒç´ ç§°ä¸º <strong>flex items</strong>ï¼Œçˆ¶å®¹å™¨ç§°ä¸º <strong>flex container</strong>ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-4">ğŸ–¼ï¸ é¢æ¿å®¹å™¨ä¸é¢æ¿é¡¹</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">90vw</span>;
}
</code></pre>
<ul>
<li>å®¹å™¨æœ¬èº«ä¹Ÿæ˜¯ flex å®¹å™¨ï¼Œå†…éƒ¨ <code>.panel</code> å¹¶æ’æ˜¾ç¤ºã€‚</li>
<li><code>90vw</code>ï¼šå®½åº¦ä¸ºè§†å£å®½åº¦çš„ 90%ï¼Œç•™ç™½ç¾è§‚ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80vh</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background-size</span>: cover;
  <span class="hljs-attribute">background-position</span>: center;
  <span class="hljs-attribute">background-repeat</span>: no-repeat;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">700ms</span> ease-in;
}
</code></pre>
<h4 data-id="heading-5">ğŸ” å±æ€§è¯¦è§£ï¼š</h4>
<ul>
<li><strong><code>flex: 0.5</code></strong>ï¼šç­‰ä»·äº <code>flex: 0 1 0.5</code>ï¼Œè¡¨ç¤ºä¸æ”¾å¤§ï¼ˆflex-grow=0ï¼‰ã€å¯æ”¶ç¼©ï¼ˆflex-shrink=1ï¼‰ã€åŸºå‡†å°ºå¯¸ä¸º 0.5 ä»½ã€‚å¤šä¸ª panel ä¼šæŒ‰æ¯”ä¾‹åˆ†é…ç©ºé—´ã€‚</li>
<li><strong><code>background-*</code></strong>ï¼šè®¾ç½®èƒŒæ™¯å›¾å…¨å±è¦†ç›–ã€å±…ä¸­ã€ä¸é‡å¤ï¼Œå¸¸ç”¨äº hero imageã€‚</li>
<li><strong><code>transition: all 700ms ease-in</code></strong>ï¼š
<ul>
<li><code>all</code>ï¼šç›‘å¬æ‰€æœ‰å¯è¿‡æ¸¡å±æ€§çš„å˜åŒ–ï¼ˆå¦‚ widthã€flexã€opacityï¼‰ã€‚</li>
<li><code>700ms</code>ï¼šåŠ¨ç”»æŒç»­æ—¶é—´ã€‚</li>
<li><code>ease-in</code>ï¼šç¼“åŠ¨å‡½æ•°ï¼Œå¼€å§‹æ…¢ï¼Œç»“æŸå¿«ã€‚</li>
<li>âš ï¸ æ³¨æ„ï¼š<code>transition</code> åªå¯¹ <strong>å·²æœ‰å±æ€§å€¼å˜åŒ–</strong> èµ·ä½œç”¨ï¼Œä¸èƒ½ç”¨äº <code>display: none â†” block</code>ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">300ms</span> ease-in <span class="hljs-number">400ms</span>;
}
</code></pre>
<ul>
<li>æ–‡å­—ç»å¯¹å®šä½åœ¨å·¦ä¸‹è§’ã€‚</li>
<li>åˆå§‹ <code>opacity: 0</code>ï¼ˆå®Œå…¨é€æ˜ï¼‰ã€‚</li>
<li><code>transition-delay: 400ms</code>ï¼šç‚¹å‡»åå»¶è¿Ÿ 0.4 ç§’æ‰å¼€å§‹æ·¡å…¥ï¼Œåˆ¶é€ â€œå…ˆå±•å¼€å†æ˜¾å­—â€çš„å±‚æ¬¡æ„Ÿã€‚</li>
</ul>
<h3 data-id="heading-6">ğŸŒŸ æ¿€æ´»çŠ¶æ€ï¼šåŠ¨æ€æ”¾å¤§ä¸æ–‡å­—æ˜¾ç°</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">5</span>;
}
<span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<ul>
<li>å½“æŸä¸ª panel æ·»åŠ  <code>.active</code> ç±»æ—¶ï¼š
<ul>
<li><code>flex: 5</code> â†’ å æ®ç»å¤§éƒ¨åˆ†å®¹å™¨å®½åº¦ï¼ˆå› ä¸ºå…¶ä»–æ˜¯ 0.5ï¼Œæ€»å’Œçº¦ 2ï¼Œ5 è¿œå¤§äºå®ƒä»¬ï¼‰ã€‚</li>
<li><code>opacity: 1</code> â†’ æ ‡é¢˜æ·¡å…¥å¯è§ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ¯ <strong>è®¾è®¡æ„å›¾</strong>ï¼šç”¨æˆ·ç‚¹å‡»æŸå¼ é£æ™¯å›¾ï¼Œè¯¥å›¾æ”¾å¤§çªå‡ºï¼ŒåŒæ—¶æ˜¾ç¤ºæ ‡é¢˜ï¼Œå½¢æˆç„¦ç‚¹å¼•å¯¼ã€‚</p>
</blockquote>
<h3 data-id="heading-7">ğŸ“± å“åº”å¼é€‚é…ï¼šç§»åŠ¨ç«¯ä¼˜åŒ–</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
  <span class="hljs-selector-class">.container</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>; }
  <span class="hljs-selector-class">.panel</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">4</span>),
  <span class="hljs-selector-class">.panel</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">5</span>) { <span class="hljs-attribute">display</span>: none; }
}
</code></pre>
<ul>
<li><strong>åª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰</strong>ï¼šå½“å±å¹•å®½åº¦ â‰¤ 480pxï¼ˆå…¸å‹æ‰‹æœºå°ºå¯¸ï¼‰æ—¶ç”Ÿæ•ˆã€‚</li>
<li>å®¹å™¨å æ»¡å…¨å®½ã€‚</li>
<li>éšè—ç¬¬ 4ã€5 ä¸ªé¢æ¿ï¼ˆä½†ä½ çš„ HTML åªæœ‰ 4 ä¸ªï¼Œå¯èƒ½æ˜¯é¢„ç•™æ‰©å±•ï¼Ÿï¼‰ã€‚æ­¤ä¸¾å‡å°‘ä¿¡æ¯å¯†åº¦ï¼Œæå‡å°å±ä½“éªŒã€‚</li>
</ul>
<blockquote>
<p>ğŸ“ <strong>å¸¸è§æ–­ç‚¹å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>æ‰‹æœºï¼š&lt;576px</li>
<li>å¹³æ¿ï¼šâ‰¥576px</li>
<li>æ¡Œé¢ï¼šâ‰¥992px</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-8">âš™ï¸ ä¸‰ã€JavaScript äº¤äº’ï¼šDOM æ“ä½œä¸äº‹ä»¶é©±åŠ¨</h2>
<p><code>common.js</code> å®ç°äº†ç‚¹å‡»åˆ‡æ¢æ¿€æ´»é¢æ¿çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> panels = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.panel'</span>);

panels.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">panel</span>) {
  panel.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cur = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.active'</span>);
    <span class="hljs-keyword">if</span> (cur) {
      cur.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
    }
    panel.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
  });
});
</code></pre>
<h3 data-id="heading-9">ğŸ§  ä»£ç é€»è¾‘æ‹†è§£ï¼š</h3>
<ol>
<li><strong>è·å–æ‰€æœ‰é¢æ¿</strong>ï¼š<code>querySelectorAll</code> è¿”å› NodeListï¼ˆç±»æ•°ç»„å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>éå†ç»‘å®šç‚¹å‡»äº‹ä»¶</strong>ï¼šæ¯ä¸ª panel ç›‘å¬ <code>click</code>ã€‚</li>
<li><strong>ç§»é™¤æ—§æ¿€æ´»é¡¹</strong>ï¼šæŸ¥æ‰¾å½“å‰ <code>.active</code> å…ƒç´ å¹¶ç§»é™¤ç±»ã€‚</li>
<li><strong>æ¿€æ´»å½“å‰é¡¹</strong>ï¼šç»™è¢«ç‚¹å‡»çš„ panel æ·»åŠ  <code>.active</code>ã€‚</li>
</ol>
<h3 data-id="heading-10">ğŸ› ï¸ æŠ€æœ¯è¦ç‚¹ï¼š</h3>
<ul>
<li><strong>äº‹ä»¶å§”æ‰˜ vs ç›´æ¥ç»‘å®š</strong>ï¼šæ­¤å¤„ç›´æ¥ç»‘å®šï¼Œå› é¢æ¿æ•°é‡å›ºå®šä¸”å°‘ã€‚è‹¥åŠ¨æ€å¢åˆ ï¼Œå»ºè®®ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆç›‘å¬ containerï¼‰ã€‚</li>
<li><strong>classList API</strong>ï¼šç°ä»£æ“ä½œ class çš„æ ‡å‡†æ–¹å¼ï¼Œæ¯” <code>className</code> æ›´å®‰å…¨ã€‚</li>
<li><strong>æ’ä»–æ€§è®¾è®¡</strong>ï¼šåŒä¸€æ—¶é—´ä»…ä¸€ä¸ª panel æ¿€æ´»ï¼Œç¬¦åˆ UX åŸåˆ™ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è¿›é˜¶æ€è€ƒ</strong>ï¼š</p>
<ul>
<li>å¯æ·»åŠ é”®ç›˜å¯¼èˆªï¼ˆArrow Keysï¼‰ã€‚</li>
<li>æ”¯æŒè‡ªåŠ¨è½®æ’­ï¼ˆsetInterval + æ¨¡æ‹Ÿç‚¹å‡»ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>requestAnimationFrame</code> ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-11">ğŸ§ª å››ã€Stylus é¢„å¤„ç†å™¨ï¼šæå‡ CSS å¼€å‘æ•ˆç‡ï¼ˆæ¥è‡ª readme.mdï¼‰</h2>
<p><code>readme.md</code> ä»‹ç»äº† <strong>Stylus</strong> â€”â€” ä¸€ç§å¼ºå¤§çš„ CSS é¢„å¤„ç†å™¨ã€‚</p>
<h3 data-id="heading-12">ğŸŒ± ä»€ä¹ˆæ˜¯ CSS é¢„å¤„ç†å™¨ï¼Ÿ</h3>
<p>æµè§ˆå™¨åªèƒ½è§£ææ ‡å‡† CSSã€‚é¢„å¤„ç†å™¨ï¼ˆå¦‚ Stylusã€Sassã€Lessï¼‰å…è®¸ä½ ç”¨æ›´ç®€æ´ã€å¯ç¼–ç¨‹çš„è¯­æ³•ç¼–å†™æ ·å¼ï¼Œå†<strong>ç¼–è¯‘</strong>æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„ CSSã€‚</p>
<h3 data-id="heading-13">ğŸ“¦ Stylus æ ¸å¿ƒç‰¹æ€§ï¼ˆå¯¹æ¯” CSSï¼‰ï¼š</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>CSS å†™æ³•</th><th>Stylus å†™æ³•</th></tr></thead><tbody><tr><td><strong>åµŒå¥—</strong></td><td>é‡å¤å†™é€‰æ‹©å™¨</td><td>ç›´æ¥åµŒå¥—ï¼Œç»“æ„æ¸…æ™°</td></tr><tr><td><strong>å˜é‡</strong></td><td>ä¸æ”¯æŒï¼ˆéœ€ CSS è‡ªå®šä¹‰å±æ€§ï¼‰</td><td><code>primary-color = #333</code></td></tr><tr><td><strong>æ··åˆï¼ˆMixinsï¼‰</strong></td><td>æ— </td><td>å¯å¤ç”¨ä»£ç å—</td></tr><tr><td><strong>å‡½æ•°</strong></td><td>æœ‰é™</td><td>è‡ªå®šä¹‰é€»è¾‘</td></tr><tr><td><strong>çœç•¥ç¬¦å·</strong></td><td>å¿…é¡»å†™ <code>{}</code> <code>:</code> <code>;</code></td><td>å¯çœç•¥ï¼Œé ç¼©è¿›</td></tr></tbody></table>
<p>ä¾‹å¦‚ï¼Œä½ çš„ CSS ä¸­è¿™æ®µï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">h3</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
</code></pre>
<p>åœ¨ Stylus ä¸­å¯å†™ä½œï¼š</p>
<pre><code class="hljs language-stylus" lang="stylus">.container
  .panel
    &amp;.active
      h3
        opacity: 1
</code></pre>
<h3 data-id="heading-14">ğŸ”§ ç¼–è¯‘æµç¨‹ï¼ˆreadme.md æç¤ºï¼‰ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… Stylus</span>
npm i -g stylus

<span class="hljs-comment"># ç¼–è¯‘å•æ¬¡</span>
stylus style.styl -o style.css

<span class="hljs-comment"># ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç¼–è¯‘ï¼ˆå¼€å‘æ¨èï¼‰</span>
stylus style.styl -o style.css -w
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿æ€»ç»“</strong>ï¼š</p>
<ul>
<li>å‡å°‘é‡å¤ä»£ç </li>
<li>æé«˜å¯ç»´æŠ¤æ€§</li>
<li>æ”¯æŒé€»è¾‘è¿ç®—ï¼ˆå¦‚é¢œè‰²å˜æš— <code>darken(color, 10%)</code>ï¼‰</li>
<li>è‡ªåŠ¨ç”Ÿæˆå‚å•†å‰ç¼€ï¼ˆautoprefixer é…åˆï¼‰</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-15">ğŸ§© äº”ã€æ•´åˆä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">ğŸ”„ å¼€å‘å·¥ä½œæµå»ºè®®ï¼š</h3>
<ol>
<li>ç”¨ <strong>Stylus</strong> ç¼–å†™ <code>style.styl</code></li>
<li>å¯åŠ¨ç›‘å¬ï¼š<code>stylus style.styl -o style.css -w</code></li>
<li>ç¼–å†™ HTML ç»“æ„</li>
<li>ç”¨ JS å®ç°äº¤äº’é€»è¾‘</li>
<li>åœ¨ä¸åŒè®¾å¤‡æµ‹è¯•å“åº”å¼æ•ˆæœ</li>
</ol>
<h3 data-id="heading-17">ğŸ§ª æ€§èƒ½ä¸å…¼å®¹æ€§ï¼š</h3>
<ul>
<li><strong>Flexbox å…¼å®¹æ€§</strong>ï¼šIE10+ æ”¯æŒï¼ˆéœ€ <code>-ms-</code> å‰ç¼€ï¼‰ï¼Œç°ä»£æµè§ˆå™¨å®Œç¾æ”¯æŒã€‚</li>
<li><strong>Transition å…¼å®¹æ€§</strong>ï¼šIE10+ï¼Œæ³¨æ„ Safari æ—©æœŸç‰ˆæœ¬éœ€ <code>-webkit-</code>ã€‚</li>
<li><strong>JS é™çº§</strong>ï¼šè‹¥ JS ç¦ç”¨ï¼Œè‡³å°‘ä¿è¯åŸºç¡€æ ·å¼å¯ç”¨ï¼ˆæ¸è¿›å¢å¼ºï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-18">ğŸ¨ è®¾è®¡æ‰©å±•å»ºè®®ï¼š</h3>
<ul>
<li>ä¸ºæ¯ä¸ª panel è®¾ç½®ä¸åŒ <code>background-image</code>ï¼ˆé€šè¿‡å†…è”æ ·å¼æˆ–é¢å¤– classï¼‰</li>
<li>æ·»åŠ  hover æ•ˆæœï¼ˆæ¡Œé¢ç«¯ï¼‰</li>
<li>ä½¿ç”¨ CSS <code>:focus</code> æå‡æ— éšœç¢è®¿é—®ï¼ˆa11yï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-19">ğŸ ç»“è¯­ï¼šç°ä»£å‰ç«¯å¼€å‘çš„ç¼©å½±</h2>
<p>ä½ æä¾›çš„è¿™ç»„æ–‡ä»¶ï¼Œè™½å°å´äº”è„ä¿±å…¨ï¼Œå®Œç¾ä½“ç°äº† <strong>ç°ä»£ Web å¼€å‘çš„æ ¸å¿ƒèŒƒå¼</strong>ï¼š</p>
<ul>
<li><strong>ç»“æ„ï¼ˆHTMLï¼‰</strong>ï¼šæ¸…æ™°ã€è¯­ä¹‰åŒ–</li>
<li><strong>æ ·å¼ï¼ˆCSS/Stylusï¼‰</strong>ï¼šå“åº”å¼ã€åŠ¨ç”»åŒ–ã€æ¨¡å—åŒ–</li>
<li><strong>è¡Œä¸ºï¼ˆJavaScriptï¼‰</strong>ï¼šäº¤äº’é©±åŠ¨ã€DOM æ“ä½œ</li>
<li><strong>å·¥å…·é“¾ï¼ˆStylusï¼‰</strong>ï¼šæå‡æ•ˆç‡ã€å·¥ç¨‹åŒ–æ€ç»´</li>
</ul>
<p>é€šè¿‡æ·±å…¥ç†è§£æ¯ä¸€è¡Œä»£ç èƒŒåçš„åŸç†ï¼Œä½ ä¸ä»…èƒ½å¤ç°è¿™ä¸ªâ€œæ¢ç´¢ä¸–ç•Œâ€é¢æ¿ï¼Œæ›´èƒ½ä¸¾ä¸€åä¸‰ï¼Œæ„å»ºæ›´å¤æ‚çš„äº¤äº’å¼åº”ç”¨ã€‚ğŸš€</p>
<blockquote>
<p>ğŸŒ <strong>Keep exploring. Keep coding.</strong><br/>
â€”â€” ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ–è®¸å°±ä»è¿™é‡Œå¯èˆªï¼âœ¨</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚]]></title>    <link>https://juejin.cn/post/7575159361900265513</link>    <guid>https://juejin.cn/post/7575159361900265513</guid>    <pubDate>2025-11-22T15:13:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575159361900265513" data-draft-id="7575230119104217129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-22T15:13:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æ©˜å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1989458366301708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1989458366301708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æ©˜å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:13:15.000Z" title="Sat Nov 22 2025 15:13:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡ææ‡‚ JavaScript åŸå‹ï¼šä»ã€Œè’™åœˆã€åˆ°ã€Œé€šé€ã€</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒJavaScript çš„åŸå‹æœºåˆ¶å¯èƒ½æ˜¯ä½ å…¥é—¨æ—¶çš„ç¬¬ä¸€ä¸ªã€Œå°åã€ã€‚æ˜æ˜çœ‹ç€ç®€å•ï¼Œå¯ä¸€åˆ°å®é™…åº”ç”¨å°±å®¹æ˜“æ™•å¤´è½¬å‘ â€”â€” <code>åŸå‹</code>ã€<code>åŸå‹é“¾</code>ã€<code>prototype</code>ã€<code>__proto__</code> è¿™äº›æ¦‚å¿µæ€»åƒç»•å£ä»¤ä¸€æ ·è®©äººè¿·ç³Šã€‚ä»Šå¤©å’±ä»¬å°±ç”¨æœ€æ¥åœ°æ°”çš„æ–¹å¼ï¼ŒæŠŠåŸå‹è¿™ç‚¹äº‹å„¿å½»åº•è¯´æ¸…æ¥šã€‚</p>
<h3 data-id="heading-1">å…ˆä»ä¸€ä¸ªã€Œåå¸¸è¯†ã€çš„é—®é¢˜è¯´èµ·</h3>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šä¸ºä»€ä¹ˆæ•°ç»„èƒ½ç›´æ¥è°ƒç”¨ <code>push()</code> æ–¹æ³•ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [];

arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// è¿™ç©æ„å„¿ä»å“ªæ¥çš„ï¼Ÿ</span>
</code></pre>
<p>æˆ‘ä»¬æ˜æ˜æ²¡ç»™æ•°ç»„ <code>arr</code> å®šä¹‰ <code>push</code> æ–¹æ³•ï¼Œå®ƒå´èƒ½ç›´æ¥ç”¨ã€‚è¿™å°±åƒä½ å»æœ‹å‹å®¶ä¸²é—¨ï¼Œæ²¡æå‰æ‰“æ‹›å‘¼å´èƒ½ç›´æ¥æ¨é—¨è€Œå…¥ â€”â€” å› ä¸ºæœ‹å‹å®¶çš„ã€Œé’¥åŒ™ã€æ—©å°±æ”¾åœ¨äº†ä¸€ä¸ªå¤§å®¶éƒ½çŸ¥é“çš„åœ°æ–¹ã€‚åœ¨ JavaScript é‡Œï¼Œè¿™ä¸ªã€Œæ”¾é’¥åŒ™çš„åœ°æ–¹ã€å°±æ˜¯ <strong>åŸå‹</strong>ã€‚</p>
<h3 data-id="heading-2">åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿå…ˆè®¤è¯† <code>prototype</code>ï¼ˆæ˜¾ç¤ºåŸå‹ï¼‰</h3>
<h4 data-id="heading-3">å‡½æ•°å¤©ç”Ÿå¸¦ã€Œä»“åº“ã€</h4>
<p>åœ¨ JavaScript é‡Œï¼Œ<strong>æ‰€æœ‰å‡½æ•°å¤©ç”Ÿå°±æœ‰ä¸€ä¸ª <strong><code>prototype</code></strong> å±æ€§</strong>ï¼Œå®ƒå°±åƒä¸€ä¸ª<code>ã€Œå…¬å…±ä»“åº“ã€</code>ã€‚è¿™ä¸ªä»“åº“é‡Œçš„ä¸œè¥¿ï¼ˆå±æ€§æˆ–æ–¹æ³•ï¼‰ï¼Œèƒ½è¢«å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>Car</code> æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ„é€ å‡½æ•°</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">color</span>) {

 <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color; <span class="hljs-comment">// æ¯ä¸ªè½¦çš„é¢œè‰²å¯èƒ½ä¸åŒï¼Œæ”¾åœ¨å®ä¾‹é‡Œ</span>

}

<span class="hljs-comment">// ç»™æ„é€ å‡½æ•°çš„ prototype åŠ ä¸œè¥¿ï¼ˆå…¬å…±å±æ€§ï¼‰</span>

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7-Ultra'</span>;

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">length</span> = <span class="hljs-number">4800</span>; <span class="hljs-comment">// å‡è®¾æ‰€æœ‰è½¦é•¿åº¦ç›¸åŒ</span>

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è½¦åœ¨è·‘ï½'</span>);

};
</code></pre>
<p>è¿™é‡Œçš„ <code>Car.prototype</code> å°±æ˜¯ã€Œå…¬å…±ä»“åº“ã€ã€‚å½“æˆ‘ä»¬ç”¨ <code>new</code> åˆ›å»ºå®ä¾‹æ—¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> car1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'pink'</span>);

<span class="hljs-keyword">const</span> car2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'blue'</span>);
</code></pre>
<p><code>car1</code> å’Œ <code>car2</code> éƒ½ä¼šã€Œå…±äº«ã€<code>prototype</code> é‡Œçš„ <code>name</code>ã€<code>length</code> å’Œ <code>run</code> æ–¹æ³•ã€‚ä½ å¯ä»¥ç›´æ¥è®¿é—®å®ƒä»¬ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car1.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'su7-Ultra'ï¼ˆæ¥è‡ªåŸå‹ï¼‰</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car2.<span class="hljs-title function_">run</span>()); <span class="hljs-comment">// 'è½¦åœ¨è·‘ï½'ï¼ˆæ¥è‡ªåŸå‹ï¼‰</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99eff965dd7e47d6b289590f53358397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=u7GAsRNsiwqZm%2FptHnjGxVvY2PI%3D" alt="ScreenShot_2025-11-22_223220_862.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ</h4>
<p>å¦‚æœæŠŠ <code>name</code>ã€<code>run</code> è¿™äº›å…¬å…±å±æ€§ç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šé‡å¤åˆ›å»ºä¸€éï¼Œå°±åƒæ¯ä¸ªå°åŒºéƒ½è‡ªå·±é€ ä¸€å¥—å…±äº«å¥èº«å™¨æï¼Œçº¯å±æµªè´¹å†…å­˜ã€‚åŸå‹å°±åƒå°åŒºçš„ã€Œå…¬å…±å¥èº«åŒºã€ï¼Œå¤§å®¶å…±ç”¨ä¸€å¥—ï¼Œæ—¢çœç©ºé—´åˆå¥½ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-5">å¯¹è±¡çš„ã€Œéšå½¢è¿æ¥ã€ï¼š<code>__proto__</code>ï¼ˆéšå¼åŸå‹ï¼‰</h3>
<p>æ¯ä¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°åˆ›å»ºçš„å®ä¾‹ï¼‰éƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> å±æ€§ï¼Œå®ƒ<code>æŒ‡å‘</code>åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°çš„ <code>prototype</code>ã€‚ç®€å•è¯´å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">å®ä¾‹å¯¹è±¡.<span class="hljs-property">__proto__</span> === æ„é€ å‡½æ•°.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
</code></pre>
<p>è¿˜æ˜¯ç”¨ä¸Šé¢çš„ <code>Car</code> ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car1.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>è¿™å°±åƒæ¯ä¸ªå°åŒºå±…æ°‘éƒ½çŸ¥é“ã€Œå…¬å…±å¥èº«åŒºã€åœ¨å“ª â€”â€”<code>__proto__</code> å°±æ˜¯å®ä¾‹å¯¹è±¡æ‰¾åˆ°ã€Œå…¬å…±ä»“åº“ã€çš„åœ°å›¾ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7'</span>
}
<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>()<span class="hljs-comment">// {name: 'su7'}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car.<span class="hljs-property">constructor</span>); <span class="hljs-comment">// è¾“å‡º Carå‡½æ•°ï¼Œä»åŸå‹ä¸Šç»§æ‰¿æ¥çš„</span>
<span class="hljs-comment">// è®©æ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡éƒ½èƒ½çŸ¥é“è‡ªå·±æ˜¯ç”±è°åˆ›å»ºå‡ºæ¥çš„</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d5f9ce2f6bd46c5a55fc693621a8ff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=ENHnepcF13%2Bg5lO9dEpZFNtz81o%3D" alt="ScreenShot_2025-11-22_230441_641.png" loading="lazy"/></p>
<h3 data-id="heading-6"><code>new</code> å…³é”®å­—åˆ°åº•å¹²äº†å•¥ï¼Ÿ</h3>
<p>å½“ä½ ç”¨ <code>new</code> åˆ›å»ºå®ä¾‹æ—¶ï¼ŒJavaScript æ‚„æ‚„åšäº† 5 ä»¶äº‹ï¼ˆå ªç§°ã€Œå¹•åé»‘æ‰‹ã€ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºç©ºå¯¹è±¡</strong>ï¼š<code>const obj = {}</code>ï¼ˆå…ˆæ­ä¸ªç©ºæ¶å­ï¼‰</p>
</li>
<li>
<p><strong>ç»‘å®š this</strong>ï¼šè®©æ„é€ å‡½æ•°é‡Œçš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼ˆ<code>Car.call(obj)</code>ï¼‰</p>
</li>
<li>
<p><strong>æ‰§è¡Œæ„é€ å‡½æ•°</strong>ï¼šç»™ç©ºå¯¹è±¡åŠ å±æ€§ï¼ˆæ¯”å¦‚ <code>obj.color = color</code>ï¼‰</p>
</li>
<li>
<p><strong>è¿æ¥åŸå‹</strong>ï¼š<code>obj.__proto__ = Car.prototype</code> å°†è¿™ä¸ªç©ºå¯¹è±¡çš„éšå¼åŸå‹(proto) èµ‹å€¼æˆ æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹(prototype)ï¼ˆç»™ç©ºå¯¹è±¡ä¸€å¼ ã€Œåœ°å›¾ã€ï¼‰</p>
</li>
<li>
<p><strong>è¿”å›å¯¹è±¡</strong>ï¼šæŠŠè¿™ä¸ªæ‰“æ‰®å¥½çš„å¯¹è±¡ return å‡ºå»</p>
</li>
</ol>
<p>æ‰€ä»¥ <code>const car1 = new Car('pink')</code> å…¶å®æ˜¯ JavaScript å¸®ä½ å®Œæˆäº†ä¸€ç³»åˆ—æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¸¦å±æ€§ã€è¿åŸå‹çš„å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'running'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params"/>) {   <span class="hljs-comment">// new Function()</span>
  <span class="hljs-comment">// const obj = {}  //// æ­¥éª¤1ï¼šåˆ›å»ºç©ºå¯¹è±¡</span>
  <span class="hljs-comment">// Car.call(obj)  // æ­¥éª¤2   call æ–¹æ³•å°† Car å‡½æ•°ä¸­çš„ this = obj</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7'</span>  <span class="hljs-comment">// æ­¥éª¤3</span>
  <span class="hljs-comment">// obj.__proto__ = Car.prototype  // æ­¥éª¤4ï¼šè¿æ¥åŸå‹</span>
  <span class="hljs-comment">// return obj  //æ­¥éª¤5ï¼šè¿”å›å¯¹è±¡</span>
}
<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>() <span class="hljs-comment">// {name: 'su7'}.__proto__  == Car.prototype</span>

car.<span class="hljs-title function_">run</span>()
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d69ea4ba63b84c0db1d35f3d91b9bf70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=bS5nZB6135NYNZEmbcJoFwgt6D4%3D" alt="ScreenShot_2025-11-22_230945_260.png" loading="lazy"/></p>
<h3 data-id="heading-7">å®ä¾‹ä¸åŸå‹çš„çˆ±æ¨æƒ…ä»‡</h3>
<p>å®ä¾‹å¯ä»¥è®¿é—®åŸå‹ä¸Šçš„å±æ€§ï¼Œä½†æƒ³<code>ä¿®æ”¹</code>åŸå‹ä¸Šçš„å±æ€§å¯æ²¡é‚£ä¹ˆå®¹æ˜“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">say</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æƒ³åƒæ¼‚äº®é¥­'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'å°æ©˜'</span>
}
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()<span class="hljs-comment">// p é‡Œé¢æ˜¾ç¤ºæ‹¥æœ‰ä¸€ä¸ªå±æ€§ name éšå¼æ‹¥æœ‰ä¸€ä¸ªå±æ€§ say</span>
p.<span class="hljs-property">say</span> = <span class="hljs-string">'hello'</span> <span class="hljs-comment">// è¿™åªæ˜¯ç»™påŠ äº†ä¸ªsayå±æ€§ï¼Œä¸æ˜¯ä¿®æ”¹åŸå‹ä¸Šçš„</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p); <span class="hljs-comment">// {name: 'å°æ©˜', say: 'hello'}</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57a8775d7d404a90b680d070e0d04fd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=DiJ3%2BqoBWf4e2thLPsLXc9w9M7c%3D" alt="ScreenShot_2025-11-22_225901_629.png" loading="lazy"/></p>
<p>è¿™å°±åƒä½ å¯ä»¥ç”¨å…¬å¸çš„æ‰“å°æœºï¼ˆåŸå‹ä¸Šçš„æ–¹æ³•ï¼‰ï¼Œä½†ä½ è‡ªå·±ä¹°äº†å°æ–°æ‰“å°æœºï¼ˆå®ä¾‹ä¸Šçš„å±æ€§ï¼‰ï¼Œå¹¶ä¸ä¼šå½±å“å…¬å¸é‚£å°ã€‚</p>
<h3 data-id="heading-8">åŸå‹é“¾ï¼šå¯¹è±¡çš„ã€Œå‘ä¸ŠæŸ¥æ‰¾ã€ç¥åŠŸ</h3>
<p>v8 åœ¨è®¿é—®å¯¹è±¡ä¸­çš„å±æ€§æ—¶ï¼Œä¼šå…ˆè®¿é—®è¯¥å¯¹è±¡ä¸­çš„æ˜¾ç¤ºå±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å»å¯¹è±¡çš„<code>éšå¼åŸå‹__proto__</code> ä¸Šæ‰¾ï¼Œå¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼Œå°±å»<code>__proto__.proto </code>ä¸Šæ‰¾ï¼Œå±‚å±‚å¾€ä¸Šï¼Œç›´åˆ°æ‰¾åˆ°<code>null</code>ä¸ºæ­¢ã€‚è¿™ç§æŸ¥æ‰¾å…³ç³»è¢«ç§°ä¸º <strong>åŸå‹é“¾</strong>.</p>
<h4 data-id="heading-9">ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼š</h4>
<p>ä½ æƒ³åƒè¥¿ç“œï¼ˆè®¿é—® <code>xigua</code> å±æ€§ï¼‰ï¼š</p>
<ul>
<li>
<p>å…ˆç¿»è‡ªå·±çš„å†°ç®±ï¼ˆå¯¹è±¡æœ¬èº«ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>å»å®¢å…çš„å…¬å…±å†°ç®±ï¼ˆ<code>__proto__</code> æŒ‡å‘çš„åŸå‹ï¼‰ï¼Œè¿˜æ²¡æœ‰ï¼›</p>
</li>
<li>
<p>å»å°åŒºä¾¿åˆ©åº—ï¼ˆ<code>__proto__.__proto__</code>ï¼‰ï¼Œæ‰¾åˆ°äº†ï¼</p>
</li>
</ul>
<h4 data-id="heading-10">ä»£ç æ¼”ç¤ºï¼š</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Grand</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">house</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å››åˆé™¢'</span>);
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Grand</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">card</span> = <span class="hljs-number">10000</span>
}
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Grand</span>()  <span class="hljs-comment">// {card: 10000}.__proto__ =Grand.prototype= Grand.prototype.__proto__ = Object.prototype.__proto__ = null</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = <span class="hljs-string">'å¼ '</span>
}
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>()  <span class="hljs-comment">// {lastName: 'å¼ '}.__proto__ = Parent.prototype</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>
}
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>()  <span class="hljs-comment">// {age: 18}.__proto__ = Child.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">card</span>);
c.<span class="hljs-title function_">house</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-title function_">toString</span>());
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1e5708c530e4721a94ffe0e87fa07a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=dyovhh31X9J24PPFT4lMEBNZCCY%3D" alt="ScreenShot_2025-11-22_224922_990.png" loading="lazy"/>
ç°åœ¨è®¿é—® <code>child.house()</code>ï¼š</p>
<ul>
<li>
<p><code>child</code> è‡ªèº«æ²¡æœ‰ <code>house</code> æ–¹æ³•ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__</code>ï¼ˆçˆ¸çˆ¸çš„å®ä¾‹ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__.__proto__</code>ï¼ˆçˆ·çˆ·çš„å®ä¾‹ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__.__proto__.__proto__</code>ï¼ˆçˆ·çˆ·çš„ <code>prototype</code>ï¼‰ï¼Œæ‰¾åˆ°äº†ï¼æ‰§è¡Œ <code>house()</code> æ–¹æ³•ã€‚</p>
</li>
</ul>
<p>è¿™å°±æ˜¯åŸå‹é“¾çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼Œæ˜¯ä¸æ˜¯åƒã€Œåˆ¨æ ¹é—®åº•ã€ä¸€æ ·ï¼Ÿ</p>
<h3 data-id="heading-11">å®æˆ˜æŠ€å·§ï¼šç»™å†…ç½®å¯¹è±¡åŠ æ–¹æ³•</h3>
<p>JavaScript çš„å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚ <code>Array</code>ã€<code>Object</code>ï¼‰ä¹Ÿæœ‰åŸå‹ã€‚æˆ‘ä»¬å¯ä»¥ç»™å®ƒä»¬çš„åŸå‹åŠ æ–¹æ³•ï¼Œè®©æ‰€æœ‰å®ä¾‹éƒ½èƒ½ç”¨ã€‚</p>
<p>æ¯”å¦‚ç»™æ•°ç»„åŠ ä¸€ä¸ª <code>abc</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»™ Array çš„åŸå‹åŠ æ–¹æ³•</span>

<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">abc</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

 <span class="hljs-keyword">return</span> <span class="hljs-string">'æˆ‘æ˜¯æ•°ç»„çš„æ–°æ–¹æ³•ï½'</span>;

};

<span class="hljs-comment">// æ‰€æœ‰æ•°ç»„éƒ½èƒ½ç”¨</span>

<span class="hljs-keyword">const</span> arr = [];

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">abc</span>()); <span class="hljs-comment">// è¾“å‡º'æˆ‘æ˜¯æ•°ç»„çš„æ–°æ–¹æ³•ï½'</span>
</code></pre>
<p>ä¸è¿‡è¦æ³¨æ„ï¼š<strong>åˆ«éšä¾¿ä¿®æ”¹å†…ç½®å¯¹è±¡çš„åŸå‹</strong>ï¼Œå¯èƒ½ä¼šå’Œå…¶ä»–ä»£ç å†²çªï¼ˆæ¯”å¦‚åˆ«äººä¹ŸåŠ äº†åŒåæ–¹æ³•ï¼‰ã€‚</p>
<h3 data-id="heading-12">æ€»ç»“ï¼šåŸå‹å®¶æ—å…³ç³»å›¾</h3>
<p>æœ€åç”¨ä¸€å¼ ã€Œå…³ç³»å›¾ã€å¸®ä½ ç†æ¸…ï¼š</p>
<pre><code class="hljs language-js" lang="js">æ„é€ å‡½æ•°ï¼ˆ<span class="hljs-title class_">Car</span>ï¼‰

 â†“ æ‹¥æœ‰

prototypeï¼ˆä»“åº“ï¼‰

 â†“ è¢«æŒ‡å‘

å®ä¾‹å¯¹è±¡ï¼ˆcar1ï¼‰çš„ __proto__

 â†“ å‘ä¸Šæ‰¾

prototype çš„ __proto__ï¼ˆæ¯”å¦‚ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>ï¼‰

 â†“ ç›´åˆ°

<span class="hljs-literal">null</span>ï¼ˆåŸå‹é“¾çš„ç»ˆç‚¹ï¼‰
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417729d35cf843d7808f4d2bcc4867a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=1i1IBnu9cecZ7Pfrs1AVHd%2BUGd0%3D" alt="28031b9733ee49618e82928f8dc762be~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.jpg" loading="lazy"/></p>
<p>è®°ä½è¿™å‡ ç‚¹ï¼ŒåŸå‹å°±éš¾ä¸å€’ä½ äº†ï¼š</p>
<ol>
<li>
<p>å‡½æ•°æœ‰ <code>prototype</code>ï¼ˆå…¬å…±ä»“åº“ï¼‰ï¼›</p>
</li>
<li>
<p>å¯¹è±¡æœ‰ <code>__proto__</code>ï¼ˆæŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>new</code> ä¼šå¸®ä½ ç»‘å®šåŸå‹å…³ç³»ï¼›</p>
</li>
<li>
<p>å±æ€§æŸ¥æ‰¾é¡ºç€åŸå‹é“¾å¾€ä¸Šèµ°ã€‚</p>
</li>
</ol>
<p>åŸå‹æœºåˆ¶æ˜¯ JavaScript çš„æ ¸å¿ƒï¼Œç†è§£å®ƒèƒ½è®©ä½ åœ¨å†™ä»£ç æ—¶æ›´å¾—å¿ƒåº”æ‰‹ã€‚ä¸‹æ¬¡å†é‡åˆ°åŸå‹ç›¸å…³çš„é—®é¢˜ï¼Œä¸å¦¨å›å¤´çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¯´ä¸å®šä¼šæœ‰æ–°æ”¶è·ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘]]></title>    <link>https://juejin.cn/post/7575065042158764082</link>    <guid>https://juejin.cn/post/7575065042158764082</guid>    <pubDate>2025-11-22T11:22:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065042158764082" data-draft-id="7575065042158747698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘"/> <meta itemprop="keywords" content="æ¶æ„,Android"/> <meta itemprop="datePublished" content="2025-11-22T11:22:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Propeller"/> <meta itemprop="url" content="https://juejin.cn/user/4311645702612554"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4311645702612554/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Propeller
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:22:18.000Z" title="Sat Nov 22 2025 11:22:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸­å‹ç›´æ’­ APP æƒ³è¦è¿›è¡Œä¸šåŠ¡è§£è€¦åˆ†å±‚çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸ºç›´æ’­åŠŸèƒ½ã€ç™»å½•åŠŸèƒ½å’Œæ”¯ä»˜åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æœ¬èº«åœ¨å°å‹é¡¹ç›®ä¸­å¯ä»¥é€šè¿‡åˆ†åŒ…è§£å†³ï¼Œä½†å½“ä¸šåŠ¡é‡ä¸Šå‡æ—¶ï¼Œå› åä½œå’Œç¼–è¯‘éš¾åº¦å¢åŠ ï¼Œåˆ†åŒ…ä»ç„¶ä¼šä½¿å¾—é¡¹ç›®ç»“æ„æ··ä¹±å¤æ‚ï¼Œè®©å¼€å‘è€…æ‰è¥Ÿè§è‚˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æœ‰æ›´è§£è€¦çš„åˆ†ç¦»æ¨¡å¼æ¥åˆ’åˆ†ä¸šåŠ¡å±‚ï¼Œäºæ˜¯å°±æœ‰æœ¬ç¯‡åšå®¢çš„ä¸»é¢˜â€”â€”<strong>ç»„ä»¶åŒ–å¼€å‘</strong>ï¼Œé€šè¿‡ç»„ä»¶åŒ–å¼€å‘å¯ä»¥å®ç°ä¸šåŠ¡æ¨¡å—é—´äº’ä¸å½±å“ï¼Œå„æ¨¡å—æŒ‰éœ€åŠ è½½ï¼Œç¼–è¯‘é€Ÿåº¦æå‡çš„åŒæ—¶ï¼Œé¡¹ç›®ä¸ä¼šè¶Šå†™è¶Šæ·±ã€‚</p>
<p>å…³äºç»„ä»¶åŒ–å¼€å‘æˆ‘ä»¬åªè¦ææ¸…æ¥šä¸‰ä»¶äº‹ï¼šæ¨¡å—ä¹‹é—´å¦‚ä½•ç›¸äº’çŸ¥æ™“ã€æ¨¡å—ä¹‹é—´å¦‚ä½•ç›¸äº’è·³è½¬å’Œå¦‚ä½•ç‹¬ç«‹ç¼–è¯‘æ¨¡å—ï¼Œå³<strong>ä¾èµ–ç®¡ç†</strong>ã€<strong>è·¯ç”±é€šä¿¡</strong>å’Œ<strong>å£³å·¥ç¨‹</strong>ã€‚</p>
<h2 data-id="heading-0">æ¨¡å—åˆ’åˆ†</h2>
<p>å°†æ¨¡å—æŒ‰ç…§èŒè´£åˆ†å±‚ï¼Œå¯ä»¥åˆ†ä¸ºä¸»å±‚ã€ä¸šåŠ¡æ¨¡å—å±‚å’ŒåŸºç¡€åº“å±‚ï¼Œå»¶ç»­ç›´æ’­ APP çš„æ€è·¯å¯ä»¥åˆ†ä¸º appã€loginã€liveã€pay å’Œ common æ¨¡å—ã€‚</p>
<p>Android Studio æœ‰ä¸¤ç§æ¨¡å— application å’Œ libraryï¼Œå‰è€…å¯ä»¥ç¼–è¯‘æˆ apk ç›´æ¥åœ¨è®¾å¤‡å®‰è£…è¿è¡Œï¼Œåè€…ä¼šç¼–è¯‘æˆ arr æ–‡ä»¶ï¼Œä¸èƒ½å•ç‹¬è¿è¡Œï¼Œå¿…é¡»è¢« application æˆ–å…¶ä»– library æ‰€ä½¿ç”¨ã€‚æ‰€ä»¥ Android å¼€å‘çš„ä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“å¯ä»¥ä½œä¸º library æ¨¡å—ï¼Œapp ä½œä¸ºå®¿ä¸»æŠŠä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“é›†æˆç¼–è¯‘è¿è¡Œã€‚</p>
<p>å› ä¸º library æ¨¡å—ç‹¬ç«‹ç¼–è¯‘å¾—åˆ°çš„ arr æ–‡ä»¶ä¸èƒ½å•ç‹¬è¿è¡Œï¼Œä¸”åœ¨åä½œå¼€å‘é‡Œï¼Œå„å¼€å‘è€…å¾€å¾€è´Ÿè´£å•ä¸šåŠ¡æ¨¡å—çš„å¼€å‘å’Œè°ƒè¯•ï¼Œè¿™è®©è°ƒè¯•æˆä¸ºéš¾é¢˜ï¼Œæ‰€ä»¥æ‰æœ‰<strong>å£³å·¥ç¨‹</strong>çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç‹¬ç«‹ç¼–è¯‘ library æ¨¡å—ã€‚</p>
<p><strong>ä¾èµ–ç®¡ç†</strong>æŒ‡æ¨¡å—æŒæœ‰å¦ä¸€æ¨¡å—çš„ä¾èµ–ï¼Œè¿™ç§æŒæœ‰å…³ç³»å’Œæˆ‘ä»¬å¼€å‘å•æ¨¡å—é¡¹ç›®æ—¶å¼•å…¥ material åº“ç­‰å„ç§å®˜æ–¹æˆ–ç¬¬ä¸‰åº“çš„å½¢å¼ç›¸åŒï¼Œéƒ½æ˜¯ä½¿ç”¨æ¨¡å— build.gradle æ–‡ä»¶çš„ dependencies å—è¿›è¡Œå¼•å…¥ï¼Œè¿™ç§ä¾èµ–æ˜¯é™æ€ä¾èµ–ï¼Œä¸»å±‚ã€ä¸šåŠ¡æ¨¡å—å±‚å’ŒåŸºç¡€åº“å±‚çš„ä¾èµ–å…³ç³»é€šå¸¸ä¸ºï¼š<strong>ä¸»å±‚</strong>ä¾èµ–ä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“ï¼Œå°†å„æ¨¡å—é›†æˆè¿è¡Œï¼›<strong>ä¸šåŠ¡æ¨¡å—å±‚</strong>åªä¾èµ–åŸºç¡€åº“å±‚ï¼Œä¸šåŠ¡æ¨¡å—é—´å°½é‡ä¸äº’ç›¸ä¾èµ–ï¼Œè‹¥ä¸šåŠ¡æ¨¡å—æœ‰é€»è¾‘é‡åˆï¼Œåˆ™å°½é‡å°†é‡åˆé€»è¾‘ç§»äº¤è‡³åŸºç¡€åº“å±‚ã€‚</p>
<p>ä½†è¿™æ ·åˆå¼•å‡ºæ–°çš„é—®é¢˜ï¼šä¸šåŠ¡æ¨¡å—é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„<strong>è·¯ç”±é€šä¿¡</strong>æ¦‚å¿µï¼Œè·¯ç”±é€šä¿¡æˆ‘ä»¬ä¼šä¾‹ç”¨ ARouter å®ç°ã€‚å‰é¢æåˆ°ä¾èµ–æ˜¯é™æ€ä¾èµ–ï¼Œåœ¨ç¼–è¯‘æœŸå°±ä¼šç¡®å®šä¾èµ–å…³ç³»ï¼Œè¢«ä¾èµ–æ¨¡å—çš„å˜åŠ¨ä¼šå¯¼è‡´ä¾èµ–æ¨¡å—é‡æ–°ç¼–è¯‘ï¼Œæ‰€ä»¥è·¯ç”±é€šä¿¡çš„ç›®çš„æ˜¯ä¸ºè§£è€¦æ¨¡å—ï¼Œè§£å†³åœ¨é¿å…å„ä¸šåŠ¡æ¨¡å—ç›¸äº’ä¾èµ–çš„æƒ…å†µæ— æ³•è¿›è¡Œé€šä¿¡çš„é—®é¢˜ï¼Œæ¨¡å—é—´å¯ä»¥åªä¾èµ–è·¯ç”±æ¥å£æˆ–ç»Ÿä¸€åè®®ï¼Œå®ç°åŠ¨æ€ä¾èµ–ã€‚</p>
<p>å›åˆ°æ¨¡å—åˆ’åˆ†ï¼Œæˆ‘ä»¬åœ¨ Android Studio è®¾è®¡é¡¹ç›®çš„æ¨¡å—ç»“æ„å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°é™¤ app æ¨¡å—å¤–ï¼Œä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“éƒ½æ˜¯ libraryï¼Œè¿™æ ·å°±å®ŒæˆåŸºæœ¬çš„æ¨¡å—åˆ’åˆ†æ“ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f47a6155fd44d0aadd878b0b2faba2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=VcVTkvkkWIjNVfcezj1FvFmPom0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ä¾èµ–ç®¡ç†</h2>
<p>ä¾èµ–ç®¡ç†çš„æ­¥éª¤æˆ‘ä»¬å‰é¢æœ‰æåˆ°ï¼Œå…·ä½“æ–¹æ³•æ˜¯æ‰¾åˆ°å„æ¨¡å— build.gradle çš„ dependencies ä¾èµ–å—ï¼Œæ·»åŠ  <code>implementation project(":common")</code> å½¢å¼çš„è¯­å¥æ¥å¼•ä¾èµ–ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé¡¹ç›®æ¨¡å—é—´çš„ä¾èµ–å…³ç³»è¦é¿å…å¾ªç¯ä¾èµ–ï¼Œç›´è§‚åŸå› æ˜¯ Gradle ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼Œå…¶æ¬¡è‹¥æœ‰å¾ªç¯ä¾èµ–åˆ™æ¯æ¬¡ä¿®æ”¹éƒ½å¯èƒ½è§¦å‘å®Œæ•´ä¾èµ–é“¾çš„é‡æ–°ç¼–è¯‘ï¼Œæœ€åæ˜¯å› ä¸ºå¯èƒ½å¼•å‘è¿è¡Œæ—¶é—®é¢˜ï¼šå¦‚ A æ¨¡å—è°ƒç”¨ B æ¨¡å—çš„é™æ€æ–¹æ³•ï¼Œä½† B æ¨¡å—çš„é™æ€å—åˆå¼•ç”¨ A æ¨¡å—çš„ç±»ï¼Œè¯¥ç±»å¯èƒ½åœ¨åˆå§‹åŒ–è¿˜æ²¡å®Œæˆæ—¶å°±è¢«è®¿é—®ã€‚</p>
<p>åœ¨ç»“æ„å¤æ‚ä¸šåŠ¡ç¹å¤šçš„è¶…å¤§å‹é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨åŠ¨æ€åŒ–ä¾èµ–æ–¹æ¡ˆï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒç”¨å…¶ä»–æ¨¡å—ï¼Œå®ç°æ–¹æ³•æ˜¯ Dynamic Feature Moduleï¼Œè¿™ç§æ–¹å¼ç¼–å†™ä»£ç çš„éš¾åº¦è¾ƒé«˜ï¼Œæˆ‘ä»¬åœ¨ä¸­å‹é¡¹ç›®åªè¦ä½¿ç”¨ ARouter å³å¯ã€‚</p>
<h2 data-id="heading-2">è·¯ç”±é€šä¿¡</h2>
<p>ä¾èµ–å¯ä»¥å°†æ¨¡å— A å¼•ç”¨æ¨¡å— B çš„ç±»ä¿¡æ¯ï¼Œè‹¥ A å’Œ B ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨æ˜¾å¼ Intent è¿›è¡Œè·³è½¬ï¼Œéšå¼ Intent èƒ½å¤Ÿè·³è½¬ä½†ä¸æ¨èè¿™æ ·åšã€‚æ¯”è¾ƒä¸»æµçš„æ–¹æ³•æ˜¯ä½¿ç”¨è·¯ç”±é€šä¿¡æŠ€æœ¯ï¼Œè·¯ç”±é€šä¿¡çš„åŸç†æ˜¯åœ¨ç¼–è¯‘æœŸæ”¶é›†è·¯å¾„åˆ°ç›®æ ‡ç±»çš„æ˜ å°„è¡¨ï¼Œè¿è¡Œæ—¶æŒ‰è·¯å¾„æŸ¥è¡¨ä»¥è¿›è¡Œè·³è½¬æˆ–æœåŠ¡è°ƒç”¨ï¼Œæ˜ å°„è¡¨çš„å®ç°è¦å€ŸåŠ© APT æ³¨è§£ç”Ÿæˆå™¨ã€‚æˆ‘ä»¬ä»¥ ARouter å¼€æºå·¥å…·ä¸ºä¾‹çœ‹å¦‚ä½•ä½¿ç”¨è·¯ç”±é€šä¿¡å®ç°ç‹¬ç«‹æ¨¡å—é—´é€šä¿¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FARouter%2Fblob%2Fmaster%2FREADME_CN.md" target="_blank" title="https://github.com/alibaba/ARouter/blob/master/README_CN.md" ref="nofollow noopener noreferrer">ARouter API æ–‡æ¡£</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32362d6fb84648c789e46bd0891a3a41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=lXnF7vLWND7%2FdkKlagDVJ7Hk6xA%3D" alt="" loading="lazy"/></p>
<p>ARouter åˆ†æœ‰ 4 ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯ ARouter çš„æ ¸å¿ƒ APIã€æ³¨è§£ç”Ÿæˆå™¨ã€ASM æ’æ¡©å·¥å…·ï¼ˆä½œç”¨æ˜¯åŠ é€Ÿ ARouter åŠ è½½è·¯ç”±è¡¨ï¼‰å’Œè‡ªåŠ¨ç”Ÿæˆæ¨¡æ¿çš„å¼€å‘æ’ä»¶ã€‚æœ‰é€šä¿¡éœ€æ±‚çš„æ¨¡å—åˆ†æœ‰ä¸¤ç§æƒ…å†µï¼š<strong>è·³è½¬åˆ°å…¶ä»–æ¨¡å—çš„ UI ç•Œé¢</strong>å’Œ<strong>è·¨æ¨¡å—æä¾›æœåŠ¡</strong>ï¼Œå‰è€…æƒ…å†µçš„å‘èµ·è·³è½¬æ–¹è¦æœ‰ api æ¨¡å—ä¾èµ–ï¼Œç›®æ ‡æ–¹å¯ä»¥åªæš´éœ²è·¯å¾„æ¥è®©æ³¨è§£ç”Ÿæˆå™¨ç”Ÿæˆè·¯ç”±è¡¨ï¼Œæ‰€ä»¥åªè¦æœ‰ compiler çš„ä¾èµ–å³å¯ï¼›åè€…æƒ…å†µçš„åŒæ–¹éƒ½è¦ä¾èµ– api æ¨¡å—ï¼Œå› ä¸ºæ­¤æ—¶çš„æœåŠ¡æä¾›æ–¹ä¸ä»…è¦æ³¨å†Œè·¯ç”±è¡¨ï¼Œè¿˜è¦åœ¨è¿è¡Œæ—¶åŠ è½½å®ä¾‹ï¼ŒæœåŠ¡è°ƒç”¨æ–¹è¦é€šè¿‡ ARouter è·å–æä¾›æ–¹å®ä¾‹ã€‚</p>
<p>é¦–å…ˆåœ¨æ¨¡å—å¯¹åº” build.gradle æ–‡ä»¶çš„ android - defaultConfig å—åŠ å…¥ä»£ç ï¼Œå› ä¸ºæ³¨è§£ç”Ÿæˆå™¨ç”Ÿæˆè·¯ç”±è¡¨ä¼šæŒ‰æ¨¡å—åˆ†ç»„ï¼Œæ‰€ä»¥è¦ä¼ å…¥å„æ¨¡å—åé¿å…æ··æ·†å’Œè¦†ç›–ï¼ŒjavaCompileOptions è¡¨ç¤º Java ä»£ç è¿è¡Œä¼ å…¥çš„å‚æ•°ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">javaCompileOptions {
    annotationProcessorOptions {
        arguments = [AROUTER_MODULE_NAME: project.getName()]
    }
}
</code></pre>
<p>æ¥ç€åœ¨ dependencies å—åŠ å…¥ <code>implementation "com.alibaba:arouter-api:1.5.2"</code> æˆ– <code>annotationProcessor "com.alibaba:arouter-compiler:1.5.2"</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆ ARouter çš„ä¾èµ–é…ç½®æ“ä½œã€‚</p>
<p>åœ¨æ”¯æŒè·¯ç”±çš„ç±»åŠ å…¥æ³¨è§£å’Œè·¯å¾„å‚æ•°ï¼Œè·¯å¾„å‚æ•°è‡³å°‘ä¸ºä¸¤çº§ï¼Œå¦‚æœè·¯ç”±ç±»é Activity æˆ– Fragmentï¼Œä¹Ÿå°±æ˜¯ç±»æƒ³è¦æä¾›æœåŠ¡ï¼Œåˆ™è¦å®ç° IProvider æ¥å£ï¼Œæ­¤æ—¶é€šè¿‡è·¯ç”±è¿”å›çš„æ˜¯æä¾›åŠŸèƒ½çš„æœåŠ¡å®ä¾‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Route(path = "/test/activity")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YourActivity</span> extend Activity {
    ...
}
</code></pre>
<p>ç„¶åè¦è¿›è¡Œè°ƒè¯•å’Œåˆå§‹åŒ–ï¼Œinit æ–¹æ³•æœ‰ Context å‚æ•°å’Œæ— å‚ä¸¤ç§é‡è½½å½¢å¼ï¼Œæ— å‚åˆå§‹åŒ–åªå®ŒæˆåŸºæœ¬çš„æ¡†æ¶åˆå§‹åŒ–ï¼Œå†…éƒ¨æ²¡æœ‰ Context å®ä¾‹ï¼Œå› ä¸º IProvider è¦é€šè¿‡ Context è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥æ— å‚åˆå§‹åŒ–çš„ ARouter ä¸å…·å¤‡æä¾›æœåŠ¡çš„åŠŸèƒ½ï¼Œä¸”åç»­çš„ navigation åŠŸèƒ½å¦‚æœå¯¹ Activity ä½¿ç”¨ç›¸å½“äºè°ƒç”¨ startActivity æ–¹æ³•ï¼ŒåŒæ ·ä¹Ÿè¦æœ‰ Context çš„å‚ä¸ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (isDebug()) {
    ARouter.openLog();     <span class="hljs-comment">// æ‰“å°æ—¥å¿—</span>
    ARouter.openDebug();   <span class="hljs-comment">// å¼€å¯è°ƒè¯•æ¨¡å¼(å¦‚æœåœ¨InstantRunæ¨¡å¼ä¸‹è¿è¡Œï¼Œå¿…é¡»å¼€å¯è°ƒè¯•æ¨¡å¼ï¼çº¿ä¸Šç‰ˆæœ¬éœ€è¦å…³é—­,å¦åˆ™æœ‰å®‰å…¨é£é™©)</span>
}
ARouter.init(mApplication); <span class="hljs-comment">// å°½å¯èƒ½æ—©ï¼Œæ¨èåœ¨Applicationä¸­åˆå§‹åŒ–</span>
</code></pre>
<p>å‘èµ·è·¯ç”±æ“ä½œçš„ navigation æ–¹æ³•åŒæ ·æœ‰ Context å‚æ•°å’Œæ— å‚å½¢å¼çš„é‡è½½ï¼Œæ— å‚å½¢å¼å¯¹ IProvider ä¼šè¿”å›å•ä¾‹æœåŠ¡å®ä¾‹ï¼Œå¯¹ Fragment ä¼šè¿”å›æ–°å»ºçš„ Fragment å®ä¾‹ï¼Œå¯¹ Activity ä¼šç›´æ¥è°ƒç”¨ startActivity æ–¹æ³•ï¼›Context å‚æ•°è°ƒç”¨åˆ™ä¿è¯ Activity è·³è½¬åœºæ™¯å’Œé¦–æ¬¡è·å¾— IProvider åœºæ™¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java">ARouter.getInstance().build(<span class="hljs-string">"/test/activity"</span>).navigation();

ARouter.getInstance().build(<span class="hljs-string">"/test/activity"</span>)
            .with(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>()) <span class="hljs-comment">// æºå¸¦å‚æ•°</span>
            .navigation();
</code></pre>
<h2 data-id="heading-3">å£³å·¥ç¨‹</h2>
<p>é…ç½®å£³å·¥ç¨‹å‰æˆ‘ä»¬è¦äº†è§£å¸¸è§ gradle æ–‡ä»¶çš„ä½œç”¨ï¼Œè¿˜æ˜¯ä»¥æˆ‘ä»¬åœ¨å¼€å§‹æåˆ°çš„ LiveDemo åˆ†åŒ…ä¸ºä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f47a6155fd44d0aadd878b0b2faba2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=VcVTkvkkWIjNVfcezj1FvFmPom0%3D" alt="" loading="lazy"/></p>
<ol>
<li>é¡¹ç›® build.gradleï¼šæ§åˆ¶é¡¹ç›®çš„å…¨å±€æ’ä»¶ã€ä»“åº“åœ°å€å’Œè„šæœ¬ï¼›</li>
<li>settings.gradleï¼šé¦–è¦ä½œç”¨æ˜¯å£°æ˜é¡¹ç›®åå’Œæ¨¡å—åï¼Œè§„å®š gradle æŸ¥æ‰¾å’Œä¸‹è½½æ’ä»¶çš„è·¯å¾„ï¼›</li>
<li>æ¨¡å— build.gradleï¼šæœ€å¸¸ç”¨çš„ gradle æ–‡ä»¶ï¼Œå†…éƒ¨çš„ plugin å—è¡¨æ˜è¯¥æ¨¡å—æ˜¯ application è¿˜æ˜¯ libraryï¼Œdependencies å—å£°æ˜è¯¥æ¨¡å—åŠ è½½çš„å„é¡¹ä¾èµ–ï¼›</li>
<li>gradle.propertiesï¼šåŠ è½½é¡¹ç›®æ‰€æœ‰ gradle æ–‡ä»¶éƒ½å¯ä»¥è®¿é—®çš„å…¨å±€å˜é‡ã€‚</li>
</ol>
<p>ä¸ºå®ç° library æ¨¡å—ç‹¬ç«‹ç¼–è¯‘è¿è¡Œè°ƒè¯•ï¼Œæˆ‘ä»¬è¦åš application æ¨¡æ‹Ÿï¼ŒåŒæ—¶è¦ä¿è¯ debug å’Œ release è¦è½»æ¾åˆ‡æ¢ï¼Œå®ç°æ–¹æ³•æ˜¯åœ¨ gradle.properties æ·»åŠ å­—æ®µ <code>isDebug = false</code>ï¼Œtrue è¡¨ç¤ºç‹¬ç«‹æµ‹è¯•ï¼Œfalse è¡¨ç¤ºé›†æˆæµ‹è¯•ï¼Œæ¥ç€å¯¹ä¸šåŠ¡æ¨¡å— build.gradle çš„ plugin å—è¿›è¡Œä¿®æ”¹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ gradle.properties å£°æ˜çš„å…¨å±€å˜é‡æ˜¯ String ç±»å‹ï¼Œåœ¨ build.gradle è¦è½¬æ¢æˆå¸ƒæ°å€¼ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">/* gradle.properties */
isDebug = false

/* build.gradle */
plugins {
alias(libs.plugins.android.library)
}

/* æ”¹ä¸º */
def isDebugApp = isDebug.toBoolean()
if (isDebugApp) {
    apply plugin: 'com.android.application'
} else {
    apply plugin: 'com.android.library'
}
</code></pre>
<p>æ­¤å¤–æ³¨æ„ library å¯èƒ½åœ¨ defaultConfig å—å£°æ˜ä¸“æœ‰æ–‡ä»¶ consumer-rules.proï¼Œè¦åŠ æ¡ä»¶åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">if (!isDebugApp) {
    consumerProguardFiles "consumer-rules.pro"
}
</code></pre>
<p>æ¥ç€æˆ‘ä»¬è¦è®¾ç½®æµ‹è¯•ç”¨çš„å¯åŠ¨é¡µå’Œ ApplicationIdï¼ŒåŒæ ·åœ¨æ¨¡å— build.gradle çš„ defaultConfig å—åŠ å…¥æ¡ä»¶åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">if (isDebugApp) {
    applicationId "com.example.live.debug"
}
</code></pre>
<p>ç„¶ååœ¨æ¨¡å— src ç›®å½•åˆ›å»º debug Directoryï¼Œåˆ›å»ºååœ¨å†…éƒ¨åˆ›å»º java Directory å’Œ AndroidManifest.xmlã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e93865f4404a4887a023eebc1c294fcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=9yeiYm%2BSu8F1Ipq651LvbG0Faos%3D" alt="" loading="lazy"/></p>
<p>ç¼–è¾‘ src/debug æ–°åˆ›å»ºçš„ AndroidManifest è®¾ç½®ç‹¬ç«‹æµ‹è¯•çš„å¯åŠ¨é¡µï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯ MainActivityï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬åœ¨ src/debug åˆ›å»ºçš„ java æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ä»…åœ¨ç‹¬ç«‹æµ‹è¯•æ—¶ç¼–è¯‘å’Œè¿è¡Œç”Ÿæ•ˆçš„ java ä»£ç ï¼Œå¯ä»¥åŒ…å«æ—¥å¿—æˆ–æ•°æ®æ‹ŸçœŸç­‰åŠŸèƒ½ï¼Œé›†æˆæµ‹è¯•æ—¶ä¸ä¼šåŒ…å«è¿™äº›ç±»ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">application</span>
        <span class="hljs-attr">android:allowBackup</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">android:label</span>=<span class="hljs-string">"LiveDemo"</span>
        <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.AppCompat"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
</code></pre>
<p>å®Œæˆæ“ä½œåå†å›åˆ°æ¨¡å—çš„ build.gradleï¼Œåœ¨ android å—åŠ å…¥ sourceSets æ¥åŒºåˆ†åŠ è½½ä¸åŒçš„ AndroidManifest æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">sourceSets {
    main {
        // ç‹¬ç«‹è°ƒè¯•ä¸é›†æˆè°ƒè¯•æ—¶ä½¿ç”¨ä¸åŒçš„ AndroidManifest.xml æ–‡ä»¶
        if (isDebugApp) {
            manifest.srcFile 'src/debug/AndroidManifest.xml'
        } else {
            manifest.srcFile 'src/main/AndroidManifest.xml'
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬æ³¨æ„åˆ°æœ€å¼€å§‹è®¾ç½®çš„ isDebug å­—æ®µåªæœ‰åˆå§‹å€¼ï¼Œè€Œæ²¡æœ‰å†³å®šä½•æ—¶ä½•å€¼çš„é€»è¾‘ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ¬¡ä»‹ç»å£³å·¥ç¨‹å®ç°æ–¹å¼çš„æ˜æ˜¾ç¼ºç‚¹ï¼Œåªèƒ½é€šè¿‡åœ¨ gradle.properties æ‰‹åŠ¨ä¿®æ”¹ isDebug å€¼æ¥å®ç°ç‹¬ç«‹ç¼–è¯‘å’Œé›†æˆç¼–è¯‘çš„åˆ‡æ¢ï¼Œå› ä¸ºå•ç‹¬ç¼–è¯‘æœ¬èº«æ˜¯ä¸´æ—¶ç¯å¢ƒï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<h2 data-id="heading-4">å°¾å£°</h2>
<p>æ–‡ç« ä»‹ç»äº†å„æ¨¡å—çš„ä¾èµ–åŸåˆ™ã€ARouter çš„ç®€å•ä½¿ç”¨ä»¥åŠå•å·¥ç¨‹é¡¹ç›®å¦‚ä½•è¿›è¡Œå£³å·¥ç¨‹åŒ–ç­‰å†…å®¹ï¼Œè¿™äº›è¶³å¤Ÿåº”å¯¹ä¸šåŠ¡æ¨¡å—å°‘é‡é¡¹ç›®çš„æƒ…å†µï¼Œå¦‚æœè¯»è€…å¸Œæœ›æ›´åŠ ç†è§£ç»„ä»¶åŒ–åŸç†ï¼Œå¯ä»¥å­¦ä¹  Android åŒ…ç»“æ„ã€Gradle æ„å»ºç³»ç»Ÿå’Œ ARouter æºç ç­‰å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨]]></title>    <link>https://juejin.cn/post/7575054113924874255</link>    <guid>https://juejin.cn/post/7575054113924874255</guid>    <pubDate>2025-11-22T13:34:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575054113924874255" data-draft-id="7575015480199987252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T13:34:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥çŒ«å’ªèŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/1081575169340526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575169340526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥çŒ«å’ªèŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:34:42.000Z" title="Sat Nov 22 2025 13:34:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ Pause æœºåˆ¶ï¼Ÿ</h2>
<p>åœ¨å¼€å‘ Flutter åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›åœºæ™¯ï¼Œé¡µé¢è™½ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œä½†å¯¹ç”¨æˆ·å¹¶ä¸å¯è§ã€‚ä¾‹å¦‚ï¼š</p>
<ol>
<li><strong>è¢«æ–°é¡µé¢è¦†ç›–</strong>ï¼šç”¨æˆ·ä»é¡µé¢ A è·³è½¬åˆ°é¡µé¢ Bï¼Œæ­¤æ—¶é¡µé¢ A ä»ç„¶åœ¨è·¯ç”±æ ˆä¸­ï¼Œä½†è¢« B è¦†ç›–ã€‚</li>
<li><strong>åœ¨ TabBarView ç­‰åœºæ™¯ä¸­</strong>ï¼šå½“ä½¿ç”¨ <code>TabBarView</code> æˆ– <code>PageView</code> æ—¶ï¼Œåªæœ‰å½“å‰é¡µé¢æ˜¯å¯è§çš„ã€‚è¿™æ˜¯ä¸€ä¸ªéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ï¼Œä»¥æš‚åœåå°é¡µé¢æ´»åŠ¨çš„å…¸å‹åœºæ™¯ã€‚</li>
<li><strong>åº”ç”¨åˆ‡æ¢åˆ°åå°</strong>ï¼šç”¨æˆ·æŒ‰ä¸‹ Home é”®æˆ–åˆ‡æ¢åˆ°å…¶ä»– Appï¼Œæ•´ä¸ª Flutter åº”ç”¨è¿›å…¥åå°ã€‚</li>
</ol>
<p>åœ¨è¿™äº›â€œä¸å¯è§â€çš„çŠ¶æ€ä¸‹ï¼Œå¦‚æœé¡µé¢å…³è”çš„ <code>ViewModel</code> ä»åœ¨æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œè½®è¯¢ã€æ•°æ®è®¡ç®—ï¼‰å¹¶é€šè¿‡ <code>notifyListeners()</code> é¢‘ç¹è§¦å‘ <code>setState()</code>ï¼Œå°±ä¼šå¯¼è‡´ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ€§èƒ½æµªè´¹</strong>ï¼šUI é‡å»ºæ˜¯æ˜‚è´µçš„ï¼Œå¯¹ä¸€ä¸ªçœ‹ä¸è§çš„ Widget è¿›è¡Œé‡å»ºï¼Œçº¯å±æµªè´¹ CPU å’Œ GPU èµ„æºã€‚</li>
<li><strong>ç”µé‡æ¶ˆè€—</strong>ï¼šä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ä¼šåŠ é€Ÿç”µé‡æ¶ˆè€—ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>æ½œåœ¨çš„ Bug</strong>ï¼šåœ¨é¡µé¢ä¸å¯è§æ—¶æ›´æ–° UIï¼Œå¯èƒ½ä¼šå¼•å‘æ„æƒ³ä¸åˆ°çš„çŠ¶æ€é”™è¯¯ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒç—›ç‚¹</strong>ï¼šæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿæ™ºèƒ½åœ°è¯†åˆ«é¡µé¢æ˜¯å¦å¯è§ï¼Œå¹¶åœ¨é¡µé¢ä¸å¯è§æ—¶â€œæš‚åœâ€ <code>ViewModel</code> çš„åˆ·æ–°ï¼Œåœ¨é¡µé¢æ¢å¤å¯è§æ—¶å†â€œæ¢å¤â€å¹¶åŒæ­¥æœ€æ–°çš„çŠ¶æ€ã€‚è¿™å°±æ˜¯ <code>view_model</code> åŒ…ä¸­ <code>Pause</code> æœºåˆ¶çš„è®¾è®¡åˆè¡·ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å¦‚ä½•ç›‘æ§é¡µé¢çš„â€œä¸å¯è§â€çŠ¶æ€ï¼Ÿ</h2>
<p>ä¸ºäº†å®ç°æ™ºèƒ½æš‚åœï¼Œé¦–å…ˆè¦èƒ½å‡†ç¡®åœ°ç›‘æ§åˆ°é¡µé¢çš„å¯è§æ€§å˜åŒ–ã€‚Flutter æä¾›äº†å¤šç§æœºåˆ¶æ¥æ•æ‰è¿™äº›å˜åŒ–ï¼Œ<code>view_model</code> å°†å®ƒä»¬å°è£…æˆäº†ä¸åŒçš„ <code>PauseProvider</code>ã€‚</p>
<h3 data-id="heading-2">1. è·¯ç”±äº‹ä»¶ (<code>PageRoutePauseProvider</code>)</h3>
<p>é€šè¿‡ <code>RouteObserver</code> å’Œ <code>RouteAware</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬è·¯ç”±çš„æ¨å…¥ï¼ˆpushï¼‰å’Œå¼¹å‡ºï¼ˆpopï¼‰äº‹ä»¶ã€‚</p>
<ul>
<li><strong><code>didPushNext()</code></strong>ï¼šå½“ä¸€ä¸ªæ–°è·¯ç”±è¢«æ¨åˆ°å½“å‰è·¯ç”±ä¹‹ä¸Šæ—¶è§¦å‘ã€‚è¿™æ„å‘³ç€å½“å‰é¡µé¢è¢«è¦†ç›–äº†ï¼Œåº”è¯¥<strong>æš‚åœ</strong>ã€‚</li>
<li><strong><code>didPopNext()</code></strong>ï¼šå½“é¡¶å±‚è·¯ç”±è¢«å¼¹å‡ºï¼Œä½¿å½“å‰è·¯ç”±é‡æ–°å¯è§æ—¶è§¦å‘ã€‚è¿™æ„å‘³ç€å½“å‰é¡µé¢æ¢å¤å¯è§ï¼Œåº”è¯¥<strong>æ¢å¤</strong>ã€‚</li>
</ul>
<p><code>PageRoutePauseProvider</code> å°±æ˜¯åŸºäºè¿™ä¸ªåŸç†ï¼Œåœ¨é¡µé¢è¢«è¦†ç›–æ—¶å‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<h3 data-id="heading-3">2. åº”ç”¨ç”Ÿå‘½å‘¨æœŸ (<code>AppPauseProvider</code>)</h3>
<p>é€šè¿‡ <code>WidgetsBindingObserver</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬æ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚</p>
<ul>
<li><strong><code>AppLifecycleState.hidden</code></strong> (æˆ– <code>paused</code>, <code>inactive</code>)ï¼šå½“åº”ç”¨åˆ‡æ¢åˆ°åå°æˆ–è¢«ç”µè¯ç­‰ç³»ç»Ÿäº‹ä»¶ä¸­æ–­æ—¶è§¦å‘ã€‚æ­¤æ—¶æ•´ä¸ªåº”ç”¨éƒ½ä¸å¯è§ï¼Œåº”è¯¥<strong>æš‚åœ</strong>ã€‚</li>
<li><strong><code>AppLifecycleState.resumed</code></strong>ï¼šå½“åº”ç”¨é‡æ–°å›åˆ°å‰å°æ—¶è§¦å‘ã€‚æ­¤æ—¶åº”ç”¨æ¢å¤å¯è§ï¼Œåº”è¯¥<strong>æ¢å¤</strong>ã€‚</li>
</ul>
<p><code>AppPauseProvider</code> è´Ÿè´£åœ¨åº”ç”¨è¿›å…¥åå°æ—¶å‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<h3 data-id="heading-4">3. TickerMode (<code>TickerModePauseProvider</code>)</h3>
<p>è¿™æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚<code>TickerMode</code> æ˜¯ Flutter åŠ¨ç”»ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒåŒæ ·å¯ä»¥ç”¨æ¥åˆ¤æ–­ Widget çš„å¯è§æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€é‡ç‚¹ï¼šä¸ºä»€ä¹ˆ TickerMode å¯ä»¥åˆ¤æ–­å¯è§æ€§ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯ Tickerï¼Ÿ</h3>
<p><code>Ticker</code> æ˜¯ Flutter åŠ¨ç”»çš„â€œå¿ƒè·³â€ï¼Œå®ƒä»¥å±å¹•çš„åˆ·æ–°ç‡ï¼ˆé€šå¸¸æ˜¯ 60fpsï¼‰ä¸ºèŠ‚å¥ï¼Œå‘¨æœŸæ€§åœ°è§¦å‘å›è°ƒã€‚<code>AnimationController</code> ç­‰åŠ¨ç”»æ§åˆ¶å™¨å°±æ˜¯ä¾èµ– <code>Ticker</code> æ¥é©±åŠ¨åŠ¨ç”»å€¼çš„å˜åŒ–ã€‚</p>
<h3 data-id="heading-7">ä»€ä¹ˆæ˜¯ TickerModeï¼Ÿ</h3>
<p><code>TickerMode</code> æ˜¯ä¸€ä¸ª <code>InheritedWidget</code>ï¼Œå®ƒå…è®¸ä½ æ˜¾å¼åœ°<strong>å¯ç”¨æˆ–ç¦ç”¨</strong>å…¶å­æ ‘ä¸­æ‰€æœ‰ <code>Ticker</code> çš„æ´»åŠ¨ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">TickerMode(
  enabled: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// or false</span>
  child: MyAnimatedWidget(),
);
</code></pre>
<ul>
<li>å½“ <code>enabled</code> ä¸º <code>true</code> æ—¶ï¼Œå­æ ‘ä¸­çš„ <code>Ticker</code> å¯ä»¥æ­£å¸¸â€œå¿ƒè·³â€ï¼ŒåŠ¨ç”»ä¼šæ’­æ”¾ã€‚</li>
<li>å½“ <code>enabled</code> ä¸º <code>false</code> æ—¶ï¼Œå­æ ‘ä¸­çš„ <code>Ticker</code> ä¼šè¢«â€œé™éŸ³â€ï¼ˆmutedï¼‰ï¼Œå¿ƒè·³åœæ­¢ï¼Œæ‰€æœ‰åŠ¨ç”»éƒ½ä¼šæš‚åœã€‚</li>
</ul>
<h3 data-id="heading-8">TickerMode ä¸å¯è§æ€§çš„å…³ç³»</h3>
<p>åœ¨ <code>TabBarView</code> æˆ– <code>PageView</code> è¿™ç±»åœºæ™¯ä¸­ï¼Œä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code>TickerMode</code> æ¥åŒ…è£¹éå½“å‰æ˜¾ç¤ºçš„é¡µé¢ï¼Œä»¥æš‚åœå®ƒä»¬çš„åŠ¨ç”»è¡Œä¸ºã€‚</p>
<p>å½“ä½ æ»‘åŠ¨ <code>TabBarView</code> æ—¶ï¼Œå®ƒå†…éƒ¨ä¼šåšè¿™æ ·çš„äº‹æƒ…ï¼š</p>
<ul>
<li>å¯¹äº<strong>å½“å‰å¯è§çš„ Tab</strong>ï¼Œå®ƒä¼šç”¨ <code>TickerMode(enabled: true, ...)</code> åŒ…è£¹ã€‚</li>
<li>å¯¹äº<strong>å…¶ä»–ä¸å¯è§çš„ Tab</strong>ï¼Œå®ƒä¼šç”¨ <code>TickerMode(enabled: false, ...)</code> åŒ…è£¹ã€‚</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œä¸å¯è§ Tab ä¸­çš„æ‰€æœ‰åŠ¨ç”»ï¼ˆå¦‚ <code>AnimationController</code>ã€<code>ListView</code> çš„æ»šåŠ¨åŠ¨ç”»ç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨æš‚åœï¼Œä»è€ŒèŠ‚çœäº†å¤§é‡çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p><strong>ç»“è®º</strong>ï¼š<code>TickerMode.of(context)</code> çš„ <code>enabled</code> çŠ¶æ€ï¼Œæˆä¸ºäº†ä¸€ä¸ªåˆ¤æ–­å½“å‰ Widget æ˜¯å¦åœ¨ <code>TabBarView</code> è¿™ç±»ç»„ä»¶ä¸­â€œå¯è§â€çš„ç»ä½³æŒ‡æ ‡ã€‚</p>
<p><code>TickerModePauseProvider</code> æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼šå®ƒä¼šç›‘å¬ <code>TickerMode.getNotifier(context)</code>ï¼Œå½“ <code>TickerMode</code> è¢«ç¦ç”¨æ—¶ï¼Œå®ƒå°±ä¼šå‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ViewModel çš„æ··åˆåˆ¤æ–­æœºåˆ¶ä¸è‡ªå®šä¹‰ Pause</h2>
<h3 data-id="heading-10">æ··åˆåˆ¤æ–­æœºåˆ¶ (<code>PauseAwareController</code>)</h3>
<p><code>view_model</code> çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å•ä¸€çš„å¯è§æ€§åˆ¤æ–­ï¼Œè€Œæ˜¯å°†ä¸Šè¿°æ‰€æœ‰æœºåˆ¶ç»„åˆåœ¨äº†ä¸€èµ·ã€‚</p>
<p><code>ViewModelStateMixin</code> ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>PauseAwareController</code>ï¼Œå¹¶ä¸ºå…¶æ³¨å…¥å¤šä¸ª <code>PauseProvider</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">late</span> <span class="hljs-keyword">final</span> _pauseAwareController = PauseAwareController(
  providers: [
    _appPauseProvider,         <span class="hljs-comment">// åº”ç”¨åˆ‡åå°æ—¶æš‚åœ</span>
    _routePauseProvider,       <span class="hljs-comment">// è·¯ç”±è¢«è¦†ç›–æ—¶æš‚åœ</span>
    _TickerModePauseProvider,    <span class="hljs-comment">// TickerMode = false æ—¶æš‚åœ</span>
  ],
  <span class="hljs-comment">// ...</span>
);
</code></pre>
<p><code>PauseAwareController</code> çš„æ ¸å¿ƒé€»è¾‘éå¸¸æ¸…æ™°ï¼š</p>
<blockquote>
<p><strong>åªè¦æœ‰ä»»æ„ä¸€ä¸ª <code>provider</code> è¦æ±‚æš‚åœï¼Œ<code>ViewModel</code> å°±ä¼šè¿›å…¥æš‚åœçŠ¶æ€ã€‚</strong></p>
</blockquote>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// PauseAwareController å†…éƒ¨é€»è¾‘</span>
<span class="hljs-keyword">final</span> newPauseState = _providerPauseStates.values.any((isPaused) =&gt; isPaused);
</code></pre>
<p>è¿™æ„å‘³ç€ï¼Œæ— è®ºæ˜¯å› ä¸ºé¡µé¢è¢«è¦†ç›–ã€åº”ç”¨åˆ‡åˆ°åå°ï¼Œè¿˜æ˜¯å› ä¸ºæ‰€åœ¨çš„ Tab å˜æˆäº†éå½“å‰é¡¹ï¼Œ<code>ViewModel</code> éƒ½èƒ½å‡†ç¡®åœ°æš‚åœ <code>setState()</code> çš„æ‰§è¡Œã€‚</p>
<h3 data-id="heading-11">å·¥ä½œæµç¨‹</h3>
<ol>
<li>
<p><strong>è¿›å…¥æš‚åœ</strong>ï¼š</p>
<ul>
<li>æŸä¸ª <code>PauseProvider</code>ï¼ˆå¦‚ <code>PageRoutePauseProvider</code>ï¼‰å‘å‡º <code>true</code>ï¼ˆæš‚åœï¼‰ä¿¡å·ã€‚</li>
<li><code>PauseAwareController</code> æ£€æµ‹åˆ°åï¼Œå°† <code>ViewModel</code> æ ‡è®°ä¸º <code>isPaused = true</code>ã€‚</li>
<li>æ­¤åï¼Œå³ä½¿ <code>ViewModel</code> è°ƒç”¨ <code>notifyListeners()</code>ï¼Œ<code>ViewModelAttacher</code> ä¹Ÿä¼šæ‹¦æˆª <code>setState()</code>ï¼Œå¹¶æ ‡è®° <code>hasMissedUpdates = true</code>ã€‚UI ä¸ä¼šé‡å»ºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¢å¤è¿è¡Œ</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰ <code>PauseProvider</code> éƒ½å‘å‡ºäº† <code>false</code>ï¼ˆæ¢å¤ï¼‰ä¿¡å·ã€‚</li>
<li><code>PauseAwareController</code> æ£€æµ‹åˆ°åï¼Œå°† <code>ViewModel</code> æ ‡è®°ä¸º <code>isPaused = false</code>ï¼Œå¹¶è§¦å‘ <code>onResume</code> å›è°ƒã€‚</li>
<li><code>ViewModelAttacher</code> åœ¨ <code>onResume</code> å›è°ƒä¸­æ£€æŸ¥åˆ° <code>hasMissedUpdates</code> ä¸º <code>true</code>ï¼Œäºæ˜¯æ‰§è¡Œä¸€æ¬¡ <code>setState()</code>ï¼Œå°†æ‰€æœ‰è¢«â€œæš‚åœâ€æœŸé—´çš„æ›´æ–°ä¸€æ¬¡æ€§åº”ç”¨åˆ° UI ä¸Šã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">è‡ªå®šä¹‰ PauseProvider</h3>
<p><code>PauseAwareController</code> çš„è®¾è®¡æ˜¯å®Œå…¨å¼€æ”¾çš„ã€‚ä½ å¯ä»¥å®ç°è‡ªå·±çš„ <code>ViewModelPauseProvider</code> æ¥åº”å¯¹ä»»ä½•ç‰¹æ®Šçš„æš‚åœé€»è¾‘ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>ConnectionPauseProvider</code>ï¼Œåœ¨ç½‘ç»œæ–­å¼€æ—¶æš‚åœæ‰€æœ‰ä¾èµ–ç½‘ç»œçš„ <code>ViewModel</code>ã€‚</p>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºè‡ªå®šä¹‰ Provider</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionPauseProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ViewModelPauseProvider</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;<span class="hljs-built_in">bool</span>&gt;.broadcast();
  
  ConnectionPauseProvider() {
    Connectivity().onConnectivityChanged.listen((status) {
      <span class="hljs-keyword">if</span> (status == ConnectivityResult.none) {
        _controller.add(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// ç½‘ç»œæ–­å¼€ï¼Œè¯·æ±‚æš‚åœ</span>
      } <span class="hljs-keyword">else</span> {
        _controller.add(<span class="hljs-keyword">false</span>); <span class="hljs-comment">// ç½‘ç»œæ¢å¤ï¼Œè¯·æ±‚æ¢å¤</span>
      }
    });
  }
  
  <span class="hljs-meta">@override</span>
  Stream&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-keyword">get</span> onPauseStateChanged =&gt; _controller.stream;
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() =&gt; _controller.close();
}
</code></pre>
</li>
<li>
<p><strong>æ·»åŠ åˆ° ViewModel</strong>ï¼š
ä½ å¯ä»¥é€šè¿‡ <code>ViewModelStateMixin</code> çš„ <code>addPauseProvider</code> æ–¹æ³•ï¼Œåœ¨ <code>initState</code> ä¸­åŠ¨æ€æ·»åŠ ä½ çš„è‡ªå®šä¹‰ Providerã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyPage</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">ViewModelStateMixin</span>&lt;<span class="hljs-title">MyPage</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰çš„æš‚åœé€»è¾‘</span>
    addPauseProvider(ConnectionPauseProvider());
  }
  <span class="hljs-comment">// ...</span>
}
</code></pre>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥å°†ä»»ä½•ä¸šåŠ¡é€»è¾‘è½¬åŒ–ä¸º <code>ViewModel</code> çš„æš‚åœ/æ¢å¤æ¡ä»¶ï¼Œå®ç°é«˜åº¦çµæ´»å’Œç²¾-ç»†åŒ–çš„æ€§èƒ½ç®¡ç†ã€‚</p>
<hr/>
<h2 data-id="heading-13">æ€»ç»“ä¸æ¨è</h2>
<p><code>view_model</code> çš„ <code>Pause</code> æœºåˆ¶æä¾›äº†ä¸€å¥—å¼ºå¤§è€Œçµæ´»çš„è§£å†³æ–¹æ¡ˆ
ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªèƒ½å¤Ÿæ™ºèƒ½ç®¡ç† Widget ç”Ÿå‘½å‘¨æœŸã€ä¼˜åŒ–æ€§èƒ½å¹¶ä¿æŒä»£ç æ•´æ´çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼š</p>
<p><strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fview_model" target="_blank" title="https://pub.dev/packages/view_model" ref="nofollow noopener noreferrer">pub.dev/packages/viâ€¦</a> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI]]></title>    <link>https://juejin.cn/post/7575083657993830427</link>    <guid>https://juejin.cn/post/7575083657993830427</guid>    <pubDate>2025-11-22T11:39:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657993830427" data-draft-id="7575031395862872110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T11:39:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿†æ±Ÿå—"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472602845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472602845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿†æ±Ÿå—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:39:32.000Z" title="Sat Nov 22 2025 11:39:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>SNI æ˜¯ TLS æ¡æ‰‹æ—¶ï¼Œå®¢æˆ·ç«¯æå‰å‘Šè¯‰æœåŠ¡å™¨ï¼šâ€æˆ‘æƒ³è®¿é—®çš„æ˜¯å“ªä¸€ä¸ªåŸŸåâ€œã€‚</strong></p>
<p>å®ƒçš„ä½œç”¨æ˜¯è®©æœåŠ¡å™¨åœ¨ <strong>TLS æ¡æ‰‹é˜¶æ®µå°±èƒ½çŸ¥é“è¦ç»™å“ªä¸ªåŸŸåçš„è¯ä¹¦</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ SNIï¼Ÿ</h2>
<p>å› ä¸ºç°åœ¨å¾ˆå¤šç½‘ç«™æ˜¯ <strong>å¤šåŸŸåå…±äº«åŒä¸€ä¸ª IP</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">1.2.3.4 ä¸Šæ‰˜ç®¡äº†ï¼š
<span class="hljs-deletion">- api.a.com</span>
<span class="hljs-deletion">- img.a.com</span>
<span class="hljs-deletion">- pay.a.com</span>
</code></pre>
<p>å¦‚æœæ²¡æœ‰ SNIï¼š</p>
<p>å®¢æˆ·ç«¯è¿æ¥ <code>1.2.3.4:443</code> â†’ TLS æ¡æ‰‹å¼€å§‹<br/>
æœåŠ¡å™¨æ­¤æ—¶ <strong>ä¸çŸ¥é“ä½ æƒ³è®¿é—®å“ªä¸ªåŸŸåçš„è¯ä¹¦</strong><br/>
â†’ å°±æ²¡æ³•é€å¯¹è¯ä¹¦<br/>
â†’ å¯¼è‡´æ¡æ‰‹å¤±è´¥</p>
<p>æ‰€ä»¥ TLS æ‰©å±• â€œSNIâ€ å°±è¯ç”Ÿäº†ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§  SNI åœ¨ TLS æ¡æ‰‹é‡Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>TLS 1.2 / 1.3 éƒ½ä¸€æ ·ï¼ŒåŸºæœ¬æµç¨‹æ˜¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ClientHello:
<span class="hljs-bullet">    -</span> TLS Versions
<span class="hljs-bullet">    -</span> Cipher Suites
<span class="hljs-bullet">    -</span> Extensions:
<span class="hljs-bullet">        -</span> SNI = "api.example.com"   â† å°±æ˜¯è¿™é‡Œï¼
<span class="hljs-bullet">        -</span> ALPN (æ¯”å¦‚ h2/h3)
<span class="hljs-bullet">        -</span> â€¦
</code></pre>
<p>æœåŠ¡å™¨æ”¶åˆ° ClientHello åï¼Œçœ‹åˆ° SNIï¼š</p>
<pre><code class="hljs">å“¦ï¼Œä½ è®¿é—®çš„æ˜¯ api.example.comï¼
é‚£æˆ‘ç»™ä½ å‘ api.example.com çš„è¯ä¹¦
</code></pre>
<p>ç„¶åæ¡æ‰‹ç»§ç»­ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ”¥ SNI ä¸ â€œIP ç›´è¿ï¼ˆDNS Mappingï¼‰â€ æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h2>
<p>è¿™æ˜¯ä½ ç°åœ¨æœ€å…³å¿ƒçš„ä¸€ç‚¹ï¼š</p>
<p>ä½ åš DNS ä¼˜åŒ–æ—¶ä¼šæŠŠåŸŸåæ›¿æ¢æˆ IPï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//api.example.com/user</span>
â†’
https:<span class="hljs-comment">//203.107.1.1/user   ï¼ˆIPç›´è¿ï¼‰</span>
</code></pre>
<p>å¦‚æœä½  <em>ä¸åŠ  Host header</em>ï¼š</p>
<p>æœåŠ¡å™¨ä¼šè®¤ä¸ºï¼š</p>
<pre><code class="hljs">ä½ è¦è®¿é—® 203.107.1.1
é‚£æˆ‘å‘ç»™ä½ â€œ203.107.1.1â€å¯¹åº”çš„è¯ä¹¦ï¼ˆåŸºæœ¬ä¸å­˜åœ¨ï¼‰
â†’ TLS æ¡æ‰‹ç«‹å³å¤±è´¥
</code></pre>
<p>æ‰€ä»¥ä½ å¿…é¡»ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.setValue</span>(<span class="hljs-string">"api.example.com"</span>, <span class="hljs-attribute">forHTTPHeaderField</span>: <span class="hljs-string">"Host"</span>)
</code></pre>
<p>âš ï¸ æ›´é‡è¦çš„æ˜¯ï¼š<br/>
<strong>â€œHostâ€ header ä¼šè¢« URLSession è‡ªåŠ¨ç”¨ä½œ SNI çš„åŸŸå</strong>ã€‚</p>
<p>æ‰€ä»¥ TLS æ¡æ‰‹ä¼šå˜æˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">SNI</span> = <span class="hljs-string">"api.example.com"</span>
</code></pre>
<p>â†’ å³ä½¿ä½ æ˜¯è¿çš„ IPï¼ŒTLS ä»ç„¶èƒ½æ‹¿åˆ°å¯¹åº”çš„åŸŸåè¯ä¹¦<br/>
â†’ æ¡æ‰‹æˆåŠŸ</p>
<p><strong>è¿™å°±æ˜¯ IP ç›´è¿ + HTTPS èƒ½å·¥ä½œçš„åŸå› ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ç”¨ä¸€å¥æ›´å·¥ç¨‹åŒ–çš„è¯æ€»ç»“ï¼š</h2>
<blockquote>
<p><strong>SNI å°±æ˜¯ TLS æ¡æ‰‹é˜¶æ®µçš„ Host headerã€‚</strong><br/>
å®¢æˆ·ç«¯ä¼šåœ¨ ClientHello é‡ŒæŠŠè¿™ä¸ªåŸŸåå‘Šè¯‰æœåŠ¡å™¨ï¼Œè®©æœåŠ¡å™¨çŸ¥é“å‘å“ªä¸€å¥—è¯ä¹¦ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>