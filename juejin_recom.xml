<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Arya - åŠŸèƒ½å¼ºå¤§çš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨]]></title>    <link>https://juejin.cn/post/7571662618055950362</link>    <guid>https://juejin.cn/post/7571662618055950362</guid>    <pubDate>2025-11-12T15:04:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571662618055950362" data-draft-id="7571695634942328859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Arya - åŠŸèƒ½å¼ºå¤§çš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2025-11-12T15:04:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Arya - åŠŸèƒ½å¼ºå¤§çš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T15:04:55.000Z" title="Wed Nov 12 2025 15:04:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼ŒMarkdown å·²æˆä¸ºå†™ä½œã€æ–‡æ¡£ç¼–å†™å’Œå†…å®¹åˆ›ä½œçš„å¿…å¤‡å·¥å…·ã€‚ä»Šå¤©æˆ‘è¦å‘å¤§å®¶æ¨èä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€ç•Œé¢ä¼˜ç¾çš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨â€”â€”<strong>Arya</strong>ï¼ˆäºŒä¸«ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ffbf4be08b840ac940ebc3a49e08e4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763564695&amp;x-signature=Seij8E20SpbJQgZvxuXQHTN1nOk%3D" alt="ScreenShot_2025-11-12_195419_427.png" loading="lazy"/></p>
<p>ScreenShot_2025-11-12_195419_427.png</p>
<h2 data-id="heading-0">é¡¹ç›®ç®€ä»‹</h2>
<p>Arya æ˜¯ä¸€æ¬¾åŸºäº Vue2 å’Œ Vditor æ„å»ºçš„ç°ä»£åŒ–åœ¨çº¿ Markdown ç¼–è¾‘å™¨ã€‚å®ƒä¸ä»…å…·å¤‡äº†ä¼ ç»Ÿ Markdown ç¼–è¾‘å™¨çš„æ‰€æœ‰åŸºç¡€åŠŸèƒ½ï¼Œè¿˜é›†æˆäº†ä¼—å¤šé«˜çº§ç‰¹æ€§ï¼Œè®© Markdown å†™ä½œå˜å¾—æ›´åŠ é«˜æ•ˆå’Œæ„‰æ‚¦ã€‚ è¯¥é¡¹ç›®åœ¨githubä¸Šå·²æœ‰3.3k star.</p>
<p>åœ¨çº¿åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.lovejade.cn%2F" target="_blank" title="https://markdown.lovejade.cn/" ref="nofollow noopener noreferrer">markdown.lovejade.cn/</a></p>
<p>githubåœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnicejade%2Fmarkdown-online-editor" target="_blank" title="https://github.com/nicejade/markdown-online-editor" ref="nofollow noopener noreferrer">github.com/nicejade/maâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/129138b0003e4fe79c6aa2e8b391fafe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763564695&amp;x-signature=a9nIlACc0yeAhMfI69iQiAZBcYo%3D" alt="ScreenShot_2025-11-12_193817_677.png" loading="lazy"/></p>
<p>ScreenShot_2025-11-12_193817_677.png</p>
<h2 data-id="heading-1">æ ¸å¿ƒç‰¹è‰²åŠŸèƒ½</h2>
<h3 data-id="heading-2">ğŸ¯ ä¸°å¯Œçš„å›¾è¡¨æ”¯æŒ</h3>
<ul>
<li><strong>æµç¨‹å›¾</strong>ï¼šè½»æ¾ç»˜åˆ¶ä¸“ä¸šçš„æŠ€æœ¯æµç¨‹å›¾</li>
<li><strong>ç”˜ç‰¹å›¾</strong>ï¼šé¡¹ç›®ç®¡ç†åˆ©å™¨ï¼Œæ¸…æ™°å±•ç¤ºé¡¹ç›®è¿›åº¦</li>
<li><strong>æ—¶åºå›¾</strong>ï¼šç³»ç»Ÿè®¾è®¡å’Œæ¶æ„åˆ†æçš„å¿…å¤‡å·¥å…·</li>
<li><strong>Echarts å›¾è¡¨</strong>ï¼šæ•°æ®å¯è§†åŒ–ï¼Œè®©æ•°æ®è¯´è¯</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0f52ab46aea42f7b3a8708a37e02133~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763564695&amp;x-signature=0iMiosUZF1mJlbWPd6g29xt%2BWSg%3D" alt="_20251112_204434.png" loading="lazy"/></p>
<p>_20251112_204434.png</p>
<h3 data-id="heading-3">ğŸ¨ å¤šåª’ä½“ä¸ç‰¹æ®Šå†…å®¹</h3>
<ul>
<li><strong>PPT é¢„è§ˆ</strong>ï¼šé›†æˆ RevealJsï¼Œæ”¯æŒå°† Markdown è½¬æ¢ä¸ºæ¼”ç¤ºæ–‡ç¨¿</li>
<li><strong>äº”çº¿è°±</strong>ï¼šéŸ³ä¹çˆ±å¥½è€…çš„ç¦éŸ³ï¼Œç›´æ¥ç¼–è¾‘ä¹è°±</li>
<li><strong>è§†é¢‘éŸ³é¢‘è§£æ</strong>ï¼šæ™ºèƒ½è¯†åˆ«å¹¶åµŒå…¥å¤šåª’ä½“å†…å®¹</li>
<li><strong>HTML è‡ªåŠ¨è½¬æ¢</strong>ï¼šå°† HTML å†…å®¹ä¸€é”®è½¬æ¢ä¸º Markdown</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1ad21d74c604018a90024c91ff275da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763564695&amp;x-signature=6zSGtoEhAlRt751Sruhts4RChf8%3D" alt="_20251112_204737.png" loading="lazy"/></p>
<p>_20251112_204737.png</p>
<h3 data-id="heading-4">ğŸ’ª é«˜æ•ˆçš„ç¼–è¾‘ä½“éªŒ</h3>
<ul>
<li>
<p><strong>ä¸‰ç§ç¼–è¾‘æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>æ‰€è§å³æ‰€å¾—æ¨¡å¼</li>
<li>å³æ—¶æ¸²æŸ“æ¨¡å¼</li>
<li>åˆ†å±æ¸²æŸ“æ¨¡å¼</li>
</ul>
</li>
<li>
<p><strong>æœ¬åœ°å­˜å‚¨</strong>ï¼šè‡ªåŠ¨ä¿å­˜ç¼–è¾‘å†…å®¹ï¼Œé˜²æ­¢æ„å¤–ä¸¢å¤±</p>
</li>
<li>
<p><strong>å¿«æ·é”®æ”¯æŒ</strong>ï¼šä¸°å¯Œçš„å¿«æ·é”®æå‡ç¼–è¾‘æ•ˆç‡</p>
</li>
<li>
<p><strong>è¯­æ³•æ£€æŸ¥ä¸æ ¼å¼åŒ–</strong>ï¼šä¿æŒ Markdown ä»£ç çš„ä¸“ä¸šæ€§</p>
</li>
</ul>
<h3 data-id="heading-5">ğŸ“¤ çµæ´»çš„å¯¼å‡ºåŠŸèƒ½</h3>
<ul>
<li>æ”¯æŒå¯¼å‡ºä¸ºå¸¦æ ·å¼çš„ PDFã€PNGã€JPEG ç­‰æ ¼å¼</li>
<li>ä¸€é”®å¤åˆ¶åˆ°å¾®ä¿¡å…¬ä¼—å·ç­‰å¹³å°</li>
<li>æ”¯æŒå¯¼å…¥æœ¬åœ° Markdown æ–‡ä»¶</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6b8629fae2a426a94a22c88ade59300~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763564695&amp;x-signature=9xSM44vbrYHXI8L%2F3Kgxu31goUE%3D" alt="_20251112_204647.png" loading="lazy"/></p>
<p>_20251112_204647.png</p>
<h2 data-id="heading-6">éƒ¨ç½²æŒ‡å—</h2>
<p>Arya æä¾›äº†å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Dockerç§æœ‰åŒ–éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-7">Docker éƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨å®˜æ–¹é•œåƒ</span>
docker run -d -p 8866:80 nicejade/markdown-online-editor:latest
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ Docker Composeï¼š</p>
<p>åˆ›å»º <code>docker-compose.yml</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">markdown-editor:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nicejade/markdown-online-editor:latest</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'8866:80'</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
</code></pre>
<p>å¯åŠ¨æœåŠ¡ï¼š</p>
<pre><code class="hljs">docker-compose up -d
</code></pre>
<p>å¯åŠ¨ä¹‹ååœ¨æµè§ˆå™¨ä¸­è®¿é—®ip:portå°±å¯ä»¥ä½¿ç”¨äº†</p>
<h2 data-id="heading-8">ä½¿ç”¨æŠ€å·§</h2>
<h3 data-id="heading-9">PPT åˆ¶ä½œæŠ€å·§</h3>
<p>Arya æ”¯æŒå°† Markdown è½¬æ¢ä¸º PPTï¼Œä½¿ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>---</code> åˆ†éš”æ°´å¹³å¹»ç¯ç‰‡</li>
<li>ä½¿ç”¨ <code>--</code> åˆ†éš”å‚ç›´å¹»ç¯ç‰‡</li>
<li>åœ¨è®¾ç½®ä¸­å¼€å¯ PPT é¢„è§ˆåŠŸèƒ½</li>
</ul>
<h3 data-id="heading-10">ç¼–è¾‘æ¨¡å¼åˆ‡æ¢</h3>
<ul>
<li>æ‰€è§å³æ‰€å¾—ï¼š<code>âŒ˜-âŒ¥-7</code>ï¼ˆMacï¼‰æˆ– <code>Ctrl-Alt-7</code>ï¼ˆWindowsï¼‰</li>
<li>å³æ—¶æ¸²æŸ“ï¼š<code>âŒ˜-âŒ¥-8</code> æˆ– <code>Ctrl-Alt-8</code></li>
<li>åˆ†å±æ¸²æŸ“ï¼š<code>âŒ˜-âŒ¥-9</code> æˆ– <code>Ctrl-Alt-9</code></li>
</ul>
<h2 data-id="heading-11">é¡¹ç›®æ„ä¹‰</h2>
<p>Arya çš„å‡ºç°è§£å†³äº†å¸‚é¢ä¸Šè®¸å¤š Markdown ç¼–è¾‘å™¨çš„ç—›ç‚¹ï¼š</p>
<ul>
<li>åŠŸèƒ½ä¸å…¨çš„é—®é¢˜</li>
<li>é«˜çº§åŠŸèƒ½æ”¶è´¹çš„é™åˆ¶</li>
<li>ç”¨æˆ·ä½“éªŒä¸ä½³çš„å›°æ‰°</li>
<li>æ— æ³•ç›´æ¥å¤åˆ¶åˆ°å…¬ä¼—å·/çŸ¥ä¹</li>
</ul>
<p>ä½œä¸ºä¸€ä¸ªå®Œå…¨å¼€æºçš„é¡¹ç›®ï¼ŒArya ä¸ºæ‰€æœ‰ç”¨æˆ·æä¾›äº†ä¼ä¸šçº§çš„ Markdown ç¼–è¾‘ä½“éªŒï¼Œæ— è®ºæ˜¯ä¸ªäººå†™ä½œã€å›¢é˜Ÿåä½œè¿˜æ˜¯æŠ€æœ¯æ–‡æ¡£ç¼–å†™ï¼Œéƒ½èƒ½æ‰¾åˆ°åˆé€‚çš„åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>Arya ä¸ä»…ä»…æ˜¯ä¸€ä¸ª Markdown ç¼–è¾‘å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªåŠŸèƒ½å…¨é¢çš„å†…å®¹åˆ›ä½œå¹³å°ã€‚å…¶ä¸°å¯Œçš„åŠŸèƒ½ã€ä¼˜é›…çš„ç•Œé¢å’Œçµæ´»çš„éƒ¨ç½²æ–¹å¼ï¼Œä½¿å…¶æˆä¸ºç›®å‰æœ€å€¼å¾—æ¨èçš„åœ¨çº¿ Markdown ç¼–è¾‘å™¨ä¹‹ä¸€ã€‚</p>
<p>æ— è®ºä½ æ˜¯ Markdown æ–°æ‰‹è¿˜æ˜¯èµ„æ·±ç”¨æˆ·ï¼ŒArya éƒ½èƒ½ä¸ºä½ å¸¦æ¥æƒŠå–œã€‚ç«‹å³å°è¯•éƒ¨ç½²æˆ–è®¿é—®å®˜æ–¹æ¼”ç¤ºç«™ç‚¹ï¼Œä½“éªŒä¸€ä¸‹ Markdown ç¼–è¾‘å™¨çš„å¼ºå¤§åŠŸèƒ½å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ˜ Node.js åº”ç”¨å¤šé˜¶æ®µæ„å»º Dockerfile è¯¦è§£]]></title>    <link>https://juejin.cn/post/7571646669202391082</link>    <guid>https://juejin.cn/post/7571646669202391082</guid>    <pubDate>2025-11-12T15:48:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571646669202391082" data-draft-id="7571648135585890347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ˜ Node.js åº”ç”¨å¤šé˜¶æ®µæ„å»º Dockerfile è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Docker,å®¹å™¨"/> <meta itemprop="datePublished" content="2025-11-12T15:48:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½ çš„äººç±»æœ‹å‹"/> <meta itemprop="url" content="https://juejin.cn/user/4051056254523991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ˜ Node.js åº”ç”¨å¤šé˜¶æ®µæ„å»º Dockerfile è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4051056254523991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½ çš„äººç±»æœ‹å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T15:48:50.000Z" title="Wed Nov 12 2025 15:48:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ğŸƒ ä½ å¥½å•Šï¼Œæˆ‘æ˜¯ä½ çš„äººç±»æœ‹å‹ï¼âœ¨</p>
<p>æœ¬æ–‡ä¸»è¦æ¥ä¸€èµ·é˜…è¯»ä¸€ä¸ªé«˜æ•ˆçš„ Node.js åº”ç”¨ Dockerfileã€‚</p>
<p>åœ¨å¼€å§‹åˆ†æè¿™ä¸ª Dockerfile ä¹‹å‰ï¼Œå…ˆé—®å¤§å®¶ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆè¿™ä¸ª Dockerfile è¦åˆ†ä¸¤ä¸ªé˜¶æ®µæ¥æ„å»ºï¼Œè€Œä¸æ˜¯ç›´æ¥å¤åˆ¶æ‰€æœ‰æ–‡ä»¶ç„¶åå®‰è£…ä¾èµ–ï¼Ÿ</strong> è¯»å®Œæœ¬æ–‡åï¼Œä½ å°±èƒ½æ‰¾åˆ°ç­”æ¡ˆï¼</p>
<blockquote>
<p>ğŸ˜ å°è´´å£«ï¼šå¦‚æœä½ ä¸æ‡‚å•¥æ˜¯ä¸¤æ®µæ„å»ºï¼Œé—®é¢˜ä¸å¤§ï¼Œåé¢æœ‰è§£é‡Šï¼Œå¯ä»¥ç»§ç»­çœ‹ã€‚</p>
</blockquote>
<p>ä¸‹é¢å±•ç¤ºçš„æ˜¯ä¸€ä¸ªç”¨äºéƒ¨ç½² Node.js åº”ç”¨çš„ Dockerfileï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:18-alpine AS builder

WORKDIR /app

# åªå¤åˆ¶ package.json
COPY package.json ./

# å®‰è£…ä¾èµ–
RUN npm install

# è¿è¡Œæ—¶é˜¶æ®µ
FROM node:18-alpine

WORKDIR /app

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶ node_modules
COPY --from=builder /app/node_modules ./node_modules

# å¤åˆ¶æºä»£ç ï¼šæ³¨æ„ï¼Œè¿™è¾¹é»˜è®¤å°ä¼™ä¼´ä»¬é…ç½®äº† .dockerignore æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä¸ä¼šå¤åˆ¶ node_modules ç›®å½•ã€‚å»ºè®®å¤§å®¶éƒ½è¡¥ä¸Š .dockerignore æ–‡ä»¶ï¼Œå¥½å¤„å¤šå¤šï¼
COPY . .

EXPOSE 3000

CMD ["node", "index.js"]
</code></pre>
<p>å¦‚æœä½ æ˜¯ä¸ªæ–°æ‰‹ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ç‚¹å¤´æ™•æ˜¯æ­£å¸¸çš„ï¼Œè«æ…Œï¼Œè®©æˆ‘ä»¬è¿›å…¥æ­£æ–‡ï¼ğŸ˜</p>
<h2 data-id="heading-1">æ­£æ–‡</h2>
<h3 data-id="heading-2">ğŸ¤” å•¥æ˜¯å•æ®µæ„å»ºä¸å¤šæ®µæ„å»ºï¼Ÿ</h3>
<p><strong>å•æ®µæ„å»º</strong>ï¼šæ•´ä¸ªåº”ç”¨åœ¨ä¸€ä¸ª Docker é•œåƒä¸­å®Œæˆæ„å»ºå’Œè¿è¡Œï¼Œé€‚åˆç®€å•åº”ç”¨ã€‚</p>
<p><strong>å¤šæ®µæ„å»º</strong>ï¼šå°†æ„å»ºè¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µè´Ÿè´£ä¸åŒçš„ä»»åŠ¡ï¼Œæœ€ç»ˆåªå°†å¿…è¦çš„æ–‡ä»¶å¤åˆ¶åˆ°æœ€ç»ˆé•œåƒä¸­ã€‚è¿™æ ·åšå¯ä»¥å‡å°é•œåƒå¤§å°ï¼Œæé«˜å®‰å…¨æ€§ã€‚</p>
<p>çœ‹ä¸æ‡‚ï¼Ÿé—®é¢˜ä¸å¤§ï¼Œä¸‹é¢ä½¿ç”¨ dockerfile æ¥ä½œæ¯”è¾ƒï¼š</p>
<h3 data-id="heading-3">âœï¸ å•æ®µæ„å»ºç¤ºä¾‹</h3>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:18-alpine
WORKDIR /app
COPY . .
RUN npm install
EXPOSE 3000
CMD ["node", "index.js"]
</code></pre>
<p>æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œä»–æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿ</p>
<ul>
<li>
<p>æ•´ä¸ª Dockerfile åªæœ‰ä¸€ä¸ª FROM æŒ‡ä»¤</p>
</li>
<li>
<p>æ‰€æœ‰æ“ä½œï¼ˆå®‰è£…ä¾èµ–ã€ç¼–è¯‘ä»£ç ã€è¿è¡Œåº”ç”¨ï¼‰éƒ½åœ¨åŒä¸€ä¸ªé•œåƒä¸­å®Œæˆ</p>
</li>
<li>
<p>æœ€ç»ˆç”Ÿæˆçš„é•œåƒåŒ…å«äº†æ„å»ºè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå·¥å…·</p>
</li>
</ul>
<p>è¿˜çœ‹ä¸æ‡‚çš„è¯ï¼Œç›´æ¥è®°ä½ï¼š<strong>å•æ®µæ„å»ºï¼šåªæœ‰ 1 ä¸ª FROM</strong></p>
<h3 data-id="heading-4">âœï¸ å¤šæ®µæ„å»ºç¤ºä¾‹</h3>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># â—å­©å­ä»¬ï¼Œæˆ‘æ˜¯ç¬¬ä¸€ä¸ªFROMï¼ï¼ï¼
FROM node:18-alpine AS builder

WORKDIR /app

# åªå¤åˆ¶ package.json
COPY package.json ./

# å®‰è£…ä¾èµ–
RUN npm install

# â—å­©å­ä»¬ï¼Œæˆ‘æ˜¯ç¬¬äºŒä¸ªFROMï¼ï¼
# è¿è¡Œæ—¶é˜¶æ®µ
FROM node:18-alpine

WORKDIR /app

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶ node_modules
COPY --from=builder /app/node_modules ./node_modules

# å¤åˆ¶æºä»£ç 
COPY . .

EXPOSE 3000

CMD ["node", "index.js"]
</code></pre>
<p>æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œä»–æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿ</p>
<ul>
<li>
<p>æ•´ä¸ª Dockerfile æœ‰ä¸¤ä¸ª FROM æŒ‡ä»¤</p>
</li>
<li>
<p>æ‰€æœ‰æ“ä½œï¼ˆå®‰è£…ä¾èµ–ã€ç¼–è¯‘ä»£ç ã€è¿è¡Œåº”ç”¨ï¼‰éƒ½åœ¨ä¸åŒçš„é•œåƒä¸­å®Œæˆ</p>
</li>
<li>
<p>æœ€ç»ˆç”Ÿæˆçš„é•œåƒåªåŒ…å«è¿è¡Œæ—¶å¿…è¦çš„æ–‡ä»¶å’Œå·¥å…·</p>
</li>
</ul>
<p>è¿˜çœ‹ä¸æ‡‚çš„è¯ï¼Œç›´æ¥è®°ä½ï¼š<strong>å¤šæ®µæ„å»ºï¼šæœ‰ 2 ä¸ª FROM</strong></p>
<p>å¥—å…¬å¼åšé¢˜å°±æ˜¯å¿«ï¼bro ğŸ˜</p>
<h3 data-id="heading-5">é€è¡Œè§£è¯» Dockerfile</h3>
<p>æˆ‘ä»¬ç°åœ¨çŸ¥é“å•¥æ˜¯å•æ®µæ„å»ºä¸å¤šæ®µæ„å»º</p>
<p>ä¸‹é¢å°±æ¥è¯¦ç»†åº·åº·è¿™ä¸ªæ‰€è°“çš„å¤šæ®µæ„å»ºï¼Œå…¶æ¯ä¸€ä¸ªé˜¶æ®µéƒ½åœ¨åšå•¥ï¼ã€å½“ç„¶ï¼Œå…¶å®æ¯ä¸€æ­¥è¿™è¾¹éƒ½ä¼šè§£é‡Šï¼ã€‘</p>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºé˜¶æ®µ</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:18-alpine AS builder
</code></pre>
<ul>
<li>ä½¿ç”¨ Node.js 18 çš„ Alpine Linux ç‰ˆæœ¬ä½œä¸ºåŸºç¡€é•œåƒ</li>
<li>Alpine ç‰ˆæœ¬éå¸¸è½»é‡ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ</li>
<li><code>AS builder</code> ç»™è¿™ä¸ªé˜¶æ®µå‘½åä¸º "builder"ï¼Œæ–¹ä¾¿åç»­å¼•ç”¨</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">WORKDIR /app
</code></pre>
<ul>
<li>è®¾ç½®å·¥ä½œç›®å½•ä¸º <code>/app</code>ï¼Œåç»­å‘½ä»¤éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œã€‚</li>
</ul>
<blockquote>
<p>è¡¥å……çŸ¥è¯†ï¼šå•¥æ˜¯ WORKDIRï¼ˆå·¥ä½œç›®å½•ï¼‰ï¼Ÿ</p>
<p>æˆ‘ä¸è§£é‡Šä»€ä¹ˆæ˜¯å·¥ä½œç›®å½•ï¼Œä½ åªéœ€è¦çŸ¥é“ï¼Œè®¾ç½® WORKDIR /app å°±ç›¸å½“äºä½ å…ˆè¿›å…¥å®¹å™¨çš„ /app æ–‡ä»¶å¤¹ï¼Œä¹‹åçš„æ‰€æœ‰æ“ä½œéƒ½åœ¨è¿™ä¸ª /app æ–‡ä»¶å¤¹é‡Œå®Œæˆã€‚</p>
<p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å·¥ä½œç›®å½•ï¼Œæ“ä½œä¼šåœ¨æ ¹ç›®å½• / è¿›è¡Œï¼Œæ–‡ä»¶ä¼šæ”¾å¾—ä¹±ä¸ƒå…«ç³Ÿçš„ã€‚</p>
</blockquote>
<pre><code class="hljs language-dockerfile" lang="dockerfile">COPY package.json ./
</code></pre>
<ul>
<li>åªå¤åˆ¶ <code>package.json</code> æ–‡ä»¶åˆ°å½“å‰ç›®å½•</li>
<li>è¿™æ˜¯å…³é”®æ­¥éª¤ï¼šå…ˆåªå¤åˆ¶ä¾èµ–å®šä¹‰æ–‡ä»¶</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">RUN npm install
</code></pre>
<ul>
<li>å®‰è£…é¡¹ç›®ä¾èµ–åŒ…</li>
<li>ç”±äºåªå¤åˆ¶äº† <code>package.json</code>ï¼ŒDocker ä¼šç¼“å­˜è¿™ä¸€å±‚ï¼Œå¦‚æœ <code>package.json</code> æ²¡å˜åŒ–ï¼Œåç»­æ„å»ºä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚æ„å»ºæ˜¯å•¥æ„æ€ï¼Ÿæ„å»ºå°±æ˜¯æŠŠä½ çš„æºä»£ç å’Œé…ç½®æ‰“åŒ…æˆä¸€ä¸ªå¯ä»¥è¿è¡Œçš„ Docker é•œåƒçš„è¿‡ç¨‹ã€‚</li>
</ul>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œæ—¶é˜¶æ®µ</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:18-alpine
</code></pre>
<ul>
<li>å¼€å§‹æ–°çš„æ„å»ºé˜¶æ®µï¼Œå†æ¬¡ä½¿ç”¨ç›¸åŒçš„åŸºç¡€é•œåƒ</li>
<li>è¿™æ ·ç¡®ä¿è¿è¡Œç¯å¢ƒä¸æ„å»ºç¯å¢ƒä¸€è‡´</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">WORKDIR /app
</code></pre>
<ul>
<li>åŒæ ·è®¾ç½®å·¥ä½œç›®å½•ä¸º <code>/app</code></li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">COPY --from=builder /app/node_modules ./node_modules
</code></pre>
<ul>
<li><code>--from=builder</code> ä»ä¹‹å‰çš„æ„å»ºé˜¶æ®µå¤åˆ¶æ–‡ä»¶</li>
<li>åªå¤åˆ¶å·²å®‰è£…çš„ <code>node_modules</code> ç›®å½•åˆ°å½“å‰é•œåƒ</li>
<li>è¿™æ ·é¿å…äº†åœ¨æœ€ç»ˆé•œåƒä¸­åŒ…å«æ„å»ºå·¥å…·å’Œç¼“å­˜æ–‡ä»¶</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">COPY . .
</code></pre>
<ul>
<li>å¤åˆ¶æ‰€æœ‰æºä»£ç åˆ°é•œåƒä¸­</li>
<li>ç”±äºä¾èµ–å·²ç»å®‰è£…å¥½ï¼Œè¿™é‡Œä¸ä¼šè§¦å‘ä¾èµ–é‡æ–°å®‰è£…</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">EXPOSE 3000
</code></pre>
<ul>
<li>å£°æ˜å®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£æ˜¯ 3000</li>
<li>è¿™åªæ˜¯æ–‡æ¡£è¯´æ˜ï¼Œå®é™…ç«¯å£æ˜ å°„éœ€è¦åœ¨è¿è¡Œå®¹å™¨æ—¶è®¾ç½®</li>
</ul>
<pre><code class="hljs language-dockerfile" lang="dockerfile">CMD ["node", "index.js"]
</code></pre>
<ul>
<li>è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤</li>
<li>ä½¿ç”¨æ•°ç»„æ ¼å¼ï¼Œç›´æ¥è¿è¡Œ <code>node index.js</code></li>
</ul>
<blockquote>
<p>ğŸ¤”ã€ç–‘é—®ã€‘ ä½ å¯èƒ½ä¼šæœ‰çš„ç–‘é—®ï¼š</p>
<p>çœ‹åˆ°è¿™ä½ å¯èƒ½ä¸€è„¸æ‡µé€¼ï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µå®‰è£…ä¾èµ–ï¼Œç¬¬äºŒä¸ªé˜¶æ®µç”¨ç¬¬ä¸€é˜¶æ®µçš„ä¾èµ–ï¼Œå°±èƒ½å¤ŸèŠ‚çœèµ„æºï¼Ÿè¿™å°±æ˜¯æ‰€è°“çš„å¤šæ®µæ„å»ºå—ï¼Ÿ</p>
<p>âœï¸ã€å›ç­”ã€‘æ˜¯çš„ï¼Œè¿™å°±æ˜¯å¤šæ®µæ„å»ºçš„ç²¾é«“æ‰€åœ¨ã€‚</p>
<p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼ˆbuilderï¼‰è´Ÿè´£å®‰è£…ä¾èµ–ï¼Œç”Ÿæˆ node_modules æ–‡ä»¶å¤¹ã€‚ç¬¬äºŒä¸ªé˜¶æ®µåªä»è¿™ä¸ªé˜¶æ®µå¤åˆ¶ node_modules æ–‡ä»¶å¤¹ï¼Œè€Œä¸å¤åˆ¶å…¶ä»–æ„å»ºç›¸å…³çš„æ–‡ä»¶ã€‚</p>
<p>é‚£ä¹ˆè¿™æ ·åšä¸ºä»€ä¹ˆå°±èƒ½èŠ‚çœèµ„æºå‘¢ ğŸ˜ï¼š</p>
<p>æœ€ç»ˆé•œåƒåªåŒ…å«è¿è¡Œéœ€è¦çš„æ–‡ä»¶ï¼ˆä½ çš„ä»£ç +node_modulesï¼‰</p>
<p>ä¸åŒ…å« npm å®‰è£…è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç¼“å­˜æ–‡ä»¶å’Œä¸´æ—¶æ–‡ä»¶</p>
<p>ä¸åŒ…å«æ„å»ºå·¥å…·å’Œå¼€å‘ä¾èµ–</p>
<p>ç®€å•æ¥è¯´ï¼š ç¬¬ä¸€ä¸ªé˜¶æ®µå‡†å¤‡ææ–™ï¼Œç¬¬äºŒä¸ªé˜¶æ®µåªæ‹¿éœ€è¦çš„ææ–™æ¥è¿è¡Œï¼ŒæŠŠåƒåœ¾ç•™åœ¨åŸåœ°ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ¤”ã€ç–‘é—®ã€‘ä½ è€æ˜¯è¯´ä»€ä¹ˆç¼“å­˜æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ä¹‹ç±»çš„ï¼Œä¸ºå•¥æˆ‘è‡ªå·±<code>pnpm i</code>æˆ–è€…<code>npm i</code>çš„æ—¶å€™æ²¡çœ‹åˆ°å•¥ç¼“å­˜æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ï¼Ÿ</p>
<p>âœï¸ã€å›ç­”ã€‘å½“ä½ è¿è¡Œ <code>npm install</code> æ—¶ï¼Œnpm å…¶å®ä¼šåœ¨åå°ä¸‹è½½åŒ…åˆ°ç¼“å­˜ç›®å½•ï¼ˆé€šå¸¸åœ¨ç”¨æˆ·ä¸»ç›®å½•çš„ .npm æ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œç„¶åä»ç¼“å­˜å¤åˆ¶åˆ°é¡¹ç›®çš„ node_modulesã€‚è™½ç„¶ä½ åœ¨é¡¹ç›®é‡Œçœ‹ä¸åˆ°è¿™äº›ç¼“å­˜æ–‡ä»¶ï¼Œä½†å®ƒä»¬ç¡®å®å­˜åœ¨äºç³»ç»Ÿå…¶ä»–åœ°æ–¹ã€‚</p>
<p>è€Œå¤šé˜¶æ®µæ„å»ºçš„ä¼˜åŠ¿å°±æ˜¯è¿è¿™äº›éšè—çš„ç³»ç»Ÿçº§ç¼“å­˜æ–‡ä»¶éƒ½ä¸ä¼šå¸¦åˆ°æœ€ç»ˆé•œåƒä¸­ï¼Œä»è€Œå‡å°äº†é•œåƒçš„å¤§å°ï¼Œè¿›è€Œæé«˜äº†é•œåƒçš„åŠ è½½é€Ÿåº¦ã€‚ğŸ˜</p>
</blockquote>
<h2 data-id="heading-6">æœ€å</h2>
<p>OK äº†å…„å¼Ÿä»¬ï¼Œç°åœ¨å…¨ä½“ç›®å…‰å‘æˆ‘çœ‹é½ï¼Œçœ‹æˆ‘çœ‹æˆ‘ï¼Œæˆ‘æ¥æ€»ç»“ä¸‹ï¼</p>
<p>å›åˆ°å¼€å¤´çš„é—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆè¦åˆ†ä¸¤ä¸ªé˜¶æ®µæ„å»ºï¼Ÿ</strong></p>
<p>ç­”æ¡ˆä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li><strong>å‡å°é•œåƒå¤§å°</strong>ï¼šæœ€ç»ˆé•œåƒåªåŒ…å«è¿è¡Œæ‰€éœ€çš„æ–‡ä»¶ï¼Œä¸åŒ…å«æ„å»ºè¿‡ç¨‹ä¸­çš„ã€ä¸­é—´æ–‡ä»¶ã€‘å’Œã€ç¼“å­˜ã€‘</li>
<li><strong>æé«˜æ„å»ºé€Ÿåº¦</strong>ï¼šåˆ©ç”¨ Docker ç¼“å­˜æœºåˆ¶ï¼Œå½“ <code>package.json</code> ä¸å˜æ—¶ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ä¾èµ–å±‚ï¼Œä¹Ÿå°±æ˜¯ <code>npm install</code> è¿™ä¸€å±‚ã€‚å¦‚æœ <code>package.json</code> æ”¹å˜äº†ï¼Œæ‰ä¼šé‡æ–°å®‰è£…ä¾èµ–ã€‚</li>
<li><strong>å¢å¼ºå®‰å…¨æ€§</strong>ï¼šæœ€ç»ˆé•œåƒä¸åŒ…å«æ„å»ºå·¥å…·ï¼Œå‡å°‘äº†æ”»å‡»é¢ã€‚å“ˆæ„æ€ï¼Ÿå°±æ˜¯è¯´ï¼Œå› ä¸ºæœ€ç»ˆé•œåƒä¸åŒ…å«æ„å»ºå·¥å…·ï¼Œæ‰€ä»¥å°±ä¸èƒ½é€šè¿‡æ”»å‡»å·¥å…·æ¥æ”»å‡»åº”ç”¨ï¼Œè¿™æ–¹é¢ç®—ä½œäº†è§£å§ï¼</li>
</ol>
<p>è¿™å°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹äº†ï¼Œç¥ä½ ä»Šå¤©å¼€å¿ƒ~</p>
<p>â˜€ï¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TDesign UniApp ç»„ä»¶åº“æ¥äº†]]></title>    <link>https://juejin.cn/post/7571650164844068898</link>    <guid>https://juejin.cn/post/7571650164844068898</guid>    <pubDate>2025-11-12T14:02:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571650164844068898" data-draft-id="7571678763781603362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TDesign UniApp ç»„ä»¶åº“æ¥äº†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T14:02:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Novlan1"/> <meta itemprop="url" content="https://juejin.cn/user/1987523605435432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TDesign UniApp ç»„ä»¶åº“æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1987523605435432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Novlan1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:02:53.000Z" title="Wed Nov 12 2025 14:02:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯</h2>
<p>è·¨ç«¯å¼€å‘ä¸€ç›´æ˜¯å‰ç«¯é¢†åŸŸçš„é‡è¦éƒ¨åˆ†ï¼Œæ—¨åœ¨å®ç°ä¸€å¥—ä»£ç åœ¨å¤šä¸ªå¹³å°è¿è¡Œã€‚å›½å†…ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2F" target="_blank" title="https://uniapp.dcloud.net.cn/" ref="nofollow noopener noreferrer">uniapp</a> æ¡†æ¶äººæ•°è¾ƒå¤šï¼Œä¸€ç›´æœ‰å¤–éƒ¨å£°éŸ³æƒ³è¦ uniapp ç‰ˆæœ¬çš„ TDesignï¼Œå¦‚ TDesign Miniprogram ä¸‹çš„ä¼—å¤š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Ftdesign-miniprogram%2Fissues%3Fq%3Duniapp" target="_blank" title="https://github.com/Tencent/tdesign-miniprogram/issues?q=uniapp" ref="nofollow noopener noreferrer">issue</a>ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/10/own_mike_z2BC3Qi7FE8DNNWx.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>åŸç”Ÿå°ç¨‹åºå’Œ uniapp æœ‰å·®å¼‚ï¼Œæœ‰äººåœ¨ uniapp é¡¹ç›®é‡Œç”¨äº†åŸç”Ÿå°ç¨‹åºç»„ä»¶ï¼Œéœ€è¦é­”æ”¹å†…éƒ¨ç»„ä»¶ä»£ç ã€‚</p>
<p>åŸºäºä»¥ä¸Šéœ€æ±‚ï¼Œå†™äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnovlan1%2Ftdesign-uniapp" target="_blank" title="https://github.com/novlan1/tdesign-uniapp" ref="nofollow noopener noreferrer">TDesign UniApp</a> é¡¹ç›®ã€‚æ”¯æŒï¼š</p>
<ul>
<li>ğŸŒˆ æš—è‰²æ¨¡å¼</li>
<li>ğŸŒˆ è‡ªå®šä¹‰ä¸»é¢˜</li>
<li>ğŸŒ  å›½é™…åŒ–</li>
<li>ğŸš€ API å¯¹é½å®˜æ–¹</li>
<li>ğŸš€ ç±»å‹æç¤º</li>
<li>...</li>
</ul>
<p>æ¬¢è¿ä½¿ç”¨ï¼Œæ¬¢è¿ starï¼Œæ¬¢è¿åé¦ˆï¼</p>
<ul>
<li>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuwayfly.com%2Ftdesign-uniapp%2F" target="_blank" title="https://uwayfly.com/tdesign-uniapp/" ref="nofollow noopener noreferrer">uwayfly.com/tdesign-uniâ€¦</a></li>
<li>Github åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnovlan1%2Ftdesign-uniapp" target="_blank" title="https://github.com/novlan1/tdesign-uniapp" ref="nofollow noopener noreferrer">github.com/novlan1/tdeâ€¦</a></li>
<li>NPM åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Ftdesign-uniapp" target="_blank" title="https://www.npmjs.com/package/tdesign-uniapp" ref="nofollow noopener noreferrer">www.npmjs.com/package/tdeâ€¦</a></li>
<li>DCloud æ’ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D25431" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=25431" ref="nofollow noopener noreferrer">ext.dcloud.net.cn/plugin?id=2â€¦</a></li>
</ul>
<h2 data-id="heading-1">2. é¢„è§ˆ</h2>
<p>æ‰«ç æŸ¥çœ‹ â†“</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb506ae9ced4410c9e79040d2164b5e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm92bGFuMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562060&amp;x-signature=Ej8vw3E%2B%2BS1AzQuNokt32FmyDIY%3D" width="600" loading="lazy"/>
<p>ï¼ˆæ³¨ï¼šå…¶ä»–å¹³å°åŒæ ·æ”¯æŒï¼Œä»…å› å¹³å°å®¡æ ¸ç­‰åŸå› æœªèƒ½ä¸Šæ¶é¢„è§ˆï¼Œä¸å½±å“ç»„ä»¶åº“æ­£å¸¸ä½¿ç”¨ã€‚ï¼‰</p>
<h2 data-id="heading-2">3. å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-3">3.1. å®‰è£…</h3>
<ol>
<li>NPM æ–¹å¼</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">npm i tdesign-uniapp
</code></pre>
<ol start="2">
<li>UNI_MODULES æ–¹å¼</li>
</ol>
<p>å·²ä¸Šä¼ <a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D25431" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=25431" ref="nofollow noopener noreferrer">æ’ä»¶</a>åˆ° DCloud æ’ä»¶å¸‚åœºï¼Œè¯·æ‰“å¼€æ’ä»¶è¯¦æƒ…é¡µå¹¶ç‚¹å‡»<code>ä½¿ç”¨ HBuilderX å¯¼å…¥æ’ä»¶</code>ã€‚</p>
<h3 data-id="heading-4">3.2. å¼•å…¥å¹¶ä½¿ç”¨</h3>
<ol>
<li><code>main.ts</code> ä¸­å¼•å…¥æ ·å¼æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'tdesign-uniapp/common/style/theme/index.css'</span>;
</code></pre>
<ol start="2">
<li>åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨</li>
</ol>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">t-loading</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TLoading</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'tdesign-uniapp/loading/loading.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">3.3. è‡ªåŠ¨å¯¼å…¥</h3>
<p>åœ¨ <code>pages.json</code> é…ç½® <a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fcollocation%2Fpages.html%23easycom" target="_blank" title="https://uniapp.dcloud.net.cn/collocation/pages.html#easycom" ref="nofollow noopener noreferrer">easycom</a>ï¼Œå¯å®ç°è‡ªåŠ¨å¯¼å…¥ã€‚</p>
<ol>
<li>CLI æ¨¡å¼</li>
</ol>
<p>ä½¿ç”¨ CLI æ¨¡å¼ï¼Œå³ä½¿ç”¨ <code>node_modules</code> ä¸‹çš„ <code>tdesign-uniapp</code> æ—¶ï¼Œé…ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"easycom"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"custom"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"^t-(.*)"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tdesign-uniapp/$1/$1.vue"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>UNI_MODULES æ¨¡å¼</li>
</ol>
<p>ä½¿ç”¨ <code>uni_modules</code> ä¸‹çš„ <code>tdesign-uniapp</code> æ—¶ï¼Œé…ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"easycom"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"custom"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"^t-(.*)"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@/uni_modules/tdesign-uniapp/components/$1/$1.vue"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">3.4. å¹³å°å…¼å®¹æ€§</h3>



























<table><thead><tr><th>å¹³å°</th><th>Vue2</th><th>Vue3</th><th>H5</th><th>Android</th><th>iOS</th><th>App-nvue</th><th>å¾®ä¿¡å°ç¨‹åº</th><th>QQå°ç¨‹åº</th></tr></thead><tbody><tr><td><strong>æ”¯æŒæƒ…å†µ</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âš ï¸</td><td>âœ…</td><td>âœ…</td></tr></tbody></table>























<table><thead><tr><th>å¹³å°</th><th>æ”¯ä»˜å®å°ç¨‹åº</th><th>æŠ–éŸ³å°ç¨‹åº</th><th>ç™¾åº¦å°ç¨‹åº</th><th>å¿«æ‰‹å°ç¨‹åº</th><th>å°çº¢ä¹¦å°ç¨‹åº</th><th>äº¬ä¸œå°ç¨‹åº</th></tr></thead><tbody><tr><td><strong>æ”¯æŒæƒ…å†µ</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr></tbody></table>
<h2 data-id="heading-7">4. æµ…æ€è€ƒ</h2>
<p>æœ‰å‡ ç‚¹æ˜¯åšä¹‹å‰è¦æƒ³æ¸…æ¥šçš„ã€‚</p>
<h3 data-id="heading-8">4.1. ä¸ºä»€ä¹ˆä¸åšè½¬æ¢å·¥å…·</h3>
<ol>
<li>å·¥å…·è½¬å‡ºæ¥çš„å¯è¯»æ€§å·®ï¼Œå¯ç»´æŠ¤æ€§å·®</li>
<li>è½¬æ¢å·¥å…·æ— æ³•åšåˆ°100%ï¼Œæ€»æœ‰äº›è¯­æ³•éœ€è¦æ‰‹åŠ¨è½¬æ¢ã€‚è¿™æ„å‘³ç€ä¸€å®šä¼šæœ‰äººå·¥ä»‹å…¥</li>
<li>ç»´æŠ¤è½¬æ¢å·¥å…·æˆæœ¬æ¯”ç»´æŠ¤ç»„ä»¶åº“é«˜å¥½å‡ å€ï¼Œä¸”å†™å‡ºæ¥çš„è¿˜ä¸ä¸€å®šå°±èƒ½å®Œå…¨æ»¡è¶³</li>
<li>ä¸šåŠ¡çœŸæ­£è¦ç”¨çš„æ˜¯ç»„ä»¶åº“ï¼ŒçœŸæ­£å…³å¿ƒçš„ä¹Ÿæ˜¯ç»„ä»¶åº“</li>
</ol>
<h3 data-id="heading-9">4.2. ä¸ tdesign-miniprogram ç‰ˆæœ¬å…³ç³»</h3>
<p><code>tdesign-uniapp</code> æœ‰ç‹¬ç«‹çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸ä¸ <code>tdesign-miniprogram</code> çš„ç‰ˆæœ¬ç›¸åŒã€‚è¿™æ˜¯å› ä¸ºè½¬æ¢åçš„äº§ç‰©å¾ˆæœ‰å¯èƒ½æœ‰è‡ªå·±çš„ <code>feature/bug</code>ï¼Œå¤„ç†éœ€è¦å‘ç‰ˆï¼Œå¿…ç„¶å¯¼è‡´ç‰ˆæœ¬åˆ†å‰ã€‚</p>
<p>å¤šä¸ª <code>tdesign-uniapp</code> ç‰ˆæœ¬ä¼šå¯¹åº”ä¸€ä¸ª <code>tdesign-miniprogram</code> ç‰ˆæœ¬ï¼Œä¼šå°½é‡æä¾› <code>miniprogram</code>  æœ€æ–°ç‰ˆæœ¬çš„è½¬æ¢äº§ç‰©ã€‚</p>
<h3 data-id="heading-10">4.3. API è®¾è®¡</h3>
<p>API ä¸€å®šè¦ä¸å®˜æ–¹ä¸€è‡´ï¼Œè¿™æ˜¯æœ€ä¸èƒ½å¦¥åçš„ï¼ŒåŒ…æ‹¬ <code>props</code>ã€<code>events</code>ã€äº‹ä»¶å‚æ•°ï¼Œå‚æ•°ç±»å‹ã€æ’æ§½ã€CSSå˜é‡ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¼€å‘è€…æ²¡æœ‰é¢å¤–å¿ƒæ™ºè´Ÿæ‹…ï¼ŒåŒæ—¶é™åˆ¶å¼€å‘äººå‘˜çš„èƒ¡ä¹±å‘æŒ¥ï¼Œä»¥åŠå‡å°‘å¼€å‘è€…çš„å†³ç­–æˆæœ¬ã€‚</p>
<p>API å°½é‡ä¸å°ç¨‹åºå¯¹é½ï¼Œè€Œä¸æ˜¯ <code>mobile-vue/mobile-react</code>ï¼Œå› ä¸º <code>uniapp</code> è¯­æ³•ä¸»è¦æ˜¯å°ç¨‹åºçš„è¯­æ³•ã€‚</p>
<h3 data-id="heading-11">4.4. å¯ç»´æŠ¤æ€§</h3>
<ul>
<li>ç”¨ç»Ÿä¸€çš„è¯­æ³•</li>
<li>ä¸ä½¿ç”¨ç¼–è¯‘åçš„ã€æ··æ·†åçš„å˜é‡</li>
</ul>
<h2 data-id="heading-12">5. è½¬åŒ–è¿‡ç¨‹</h2>
<h3 data-id="heading-13">5.1. æ ¸å¿ƒè½¬æ¢é€»è¾‘</h3>
<p>ä¹‹å‰å†™è¿‡ Press UIï¼Œæ•´ä½“æ€è·¯å·®ä¸å¤šã€‚å°±æ˜¯å°†å°ç¨‹åºçš„ <code>wxml/wxss/js/json</code> è½¬æˆ uniapp çš„ Vueï¼Œå››ä¸ªæ–‡ä»¶åˆæˆä¸€ä¸ªæ–‡ä»¶ã€‚ä»¥åŠå°†å°ç¨‹åºçš„è¯­æ³•è¿›è¡Œè½¬åŒ–ï¼Œä»¥ä¸‹æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ol>
<li>uniComponent åŒ…è£¹ï¼Œå†…éƒ¨æœ‰ä¸€äº›å…¬å…±å¤„ç†</li>
<li>properties =&gt; props</li>
<li>setData =&gt; data æ­£å¸¸èµ‹å€¼</li>
<li>ç”Ÿå‘½å‘¨æœŸæ”¹é€ </li>
<li>äº‹ä»¶æ”¹é€ </li>
<li>props æ–‡ä»¶æ”¹é€ ï¼Œfrom: <code>value: ([^{]+)</code>ï¼Œto: <code>default: $1</code></li>
</ol>
<p>å…¶ä»–éƒ¨åˆ†ï¼Œå¦‚ <code>externalClasses</code>ã€<code>relations</code>ï¼Œä»¥åŠç»„ä»¶åº“ç‰¹æœ‰çš„å—æ§å±æ€§ã€å‘½ä»¤è°ƒç”¨ç­‰éƒ½éœ€è¦è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</p>
<h3 data-id="heading-14">5.2. äº‹ä»¶å‚æ•°</h3>
<p><code>tdesign-miniprogram</code> ä¸­çš„äº‹ä»¶å‚æ•°ï¼Œåœ¨ <code>tdesign-uniapp</code> ä¸­éƒ½è¢«å»æ‰äº† <code>detail</code> ä¸€å±‚ã€‚ä»¥ Picker ç»„ä»¶ä¸ºä¾‹ï¼Œåœ¨ <code>tdesign-miniprogram</code> ä¸­ï¼Œè¿™æ ·è·å–å‚æ•°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">onPickerChange</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">detail</span>.<span class="hljs-property">value</span>);
}
</code></pre>
<p>åœ¨ <code>tdesign-uniapp</code> ä¸­ï¼Œéœ€è¦å»æ‰ <code>.detail</code>ï¼Œå³</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">onPickerChange</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">value</span>);
}
</code></pre>
<p>è¿™æ ·åšæ˜¯ä¸ºäº†ç®€åŒ–ä½¿ç”¨ã€‚<code>tdesign-uniapp</code> ä¸­æ‰€æœ‰ç»„ä»¶éƒ½é‡‡ç”¨äº†è¿™ç§æ–¹å¼ã€‚</p>
<h2 data-id="heading-15">6. ç»†èŠ‚</h2>
<h3 data-id="heading-16">6.1. å‘½ä»¤è°ƒç”¨</h3>
<p>tdesign-uniapp ä¸­æ”¯æŒå‘½ä»¤è°ƒç”¨çš„ç»„ä»¶æœ‰</p>
<ul>
<li>ActionSheet</li>
<li>Dialog</li>
<li>Message</li>
<li>Toast</li>
</ul>
<p>TDesign UniApp ä¸‹ï¼Œå‘½ä»¤è°ƒç”¨çš„æ ¸å¿ƒæ€è·¯æ˜¯æ•°æ®è½¬åŒ–ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰ <code>props</code> éƒ½å£°æ˜æˆ <code>data</code>ï¼Œæ¯”å¦‚ <code>visible</code> =&gt; <code>dataVisible</code>ï¼Œè¿™æ ·ç»„ä»¶è‡ªèº«æ‰èƒ½æ—¢èƒ½ä»æ–¹æ³•ï¼ˆ<code>methods</code>ï¼‰ä¸­å¾—åˆ°å€¼ï¼Œåˆèƒ½ä» <code>props</code> ä¸­å¾—åˆ°å€¼ã€‚è¦æ”¹çš„åœ°æ–¹åŒ…æ‹¬</p>
<ol>
<li><code>data</code> ä¸­åˆå§‹åŒ–</li>
<li><code>watch</code> ä¸­ç›‘å¬</li>
<li><code>setData</code> æ”¶å£ï¼Œè®¾ç½®çš„æ—¶å€™éƒ½åŠ ä¸Šç‰¹æ®Šå¼€å¤´</li>
</ol>
<p>æ¯ä¸ªç»„ä»¶å…·ä½“å®ç°ä¸åŒã€‚</p>
<ul>
<li>Message åµŒå¥—äº†ä¸€å±‚ <code>message-item</code>ï¼Œ<code>message-item</code> æ²¡æœ‰ <code>props</code>ï¼Œéƒ½æ˜¯ <code>setData</code> ç›´æ¥ç»™çš„ <code>data</code>ï¼Œæ‰€ä»¥æ ¹æœ¬ä¸éœ€è¦è½¬æ¢ã€‚
<ul>
<li>è¿™æ˜¯å¦ä¸€ç§è§£å†³æ€è·¯äº†ï¼Œç”¨åµŒå¥—å­ç»„ä»¶ï¼Œè€Œä¸æ˜¯è½¬æ¢æ•°æ®ã€‚å­ç»„ä»¶ä¸€åµŒå¥—ï¼Œä¸”æ•°æ®å…¨éƒ¨ä¸èµ° <code>props</code>ï¼Œè€Œæ˜¯è°ƒç”¨å­ç»„ä»¶å†…éƒ¨æ–¹æ³•ã€‚</li>
<li>å±•ç¤ºæ—¶ï¼Œ <code>setMessage</code>ï¼ˆç»„ä»¶è°ƒç”¨ã€å‘½ä»¤è°ƒç”¨éƒ½èµ°ï¼‰ =&gt; <code>addMessage</code> ( =&gt; <code>showMessageItem</code>) æˆ–è€… <code>updateMessage</code></li>
<li>Message ä¸­çš„ <code>setMessage/addMessage/showMessageItem</code> éƒ½æ˜¯æŒ‡çš„å†…éƒ¨çš„ <code>message-item</code>ï¼Œæ˜¯å¾ªç¯çš„ <code>messageList</code>ï¼Œè€Œä¸æ˜¯é¡µé¢çº§åˆ«çš„ <code>t-message</code></li>
</ul>
</li>
<li>Dialogã€ActionSheet éœ€è¦è½¬æ¢
<ul>
<li>è°ƒç”¨ <code>setData</code>ï¼Œå°†å±æ€§ï¼ˆåŒ…å« <code>visible: true</code>ï¼‰ä¼ è¿›å»ï¼ŒåŒæ—¶å°† <code>instance</code> çš„ <code>_onConfirm</code> è®¾ç½®ä¸º <code>promise</code> çš„ <code>resolve</code></li>
</ul>
</li>
<li>Toast æ²¡æœ‰ç»„ä»¶è°ƒç”¨ï¼Œåªæœ‰å‘½ä»¤å¼ï¼Œæ— éœ€æ•°æ®è½¬æ¢ã€‚
<ul>
<li>è°ƒç”¨ <code>instance.show</code>ï¼Œå†…éƒ¨è¿˜æ˜¯ <code>setData</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-17">6.2. å—æ§å±æ€§</h3>
<p>å­˜åœ¨å—æ§å±æ€§çš„éè¡¨å•ç»„ä»¶æœ‰</p>
<ul>
<li>åé¦ˆç±»ï¼šActionSheetã€DropdownItemã€Guide</li>
<li>å±•ç¤ºç±»ï¼šCheckTagã€Collapseã€Image-viewer</li>
<li>å¯¼èˆªç±»ï¼šIndexesã€Sidebarã€Stepsã€Tabbarã€Tabs</li>
</ul>
<p>TDesign UniApp ä¸­å—æ§å±æ€§çš„å¤„ç†ï¼Œå’Œå°ç¨‹åºç‰ˆæœ¬å·®ä¸å¤šã€‚æ˜¯å°†å…¶è½¬æˆ <code>data</code> å¼€å¤´çš„å†…éƒ¨å±æ€§ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­å—æ§å’Œéå—æ§å€¼ã€‚åŒæ—¶è§¦å‘äº‹ä»¶çš„æ—¶å€™ä¹Ÿè¦åˆ¤æ–­å½“å‰æ˜¯å¦å­˜åœ¨å—æ§å±æ€§ï¼Œéå—æ§çš„æ—¶å€™ç›´æ¥æ”¹å˜å†…éƒ¨å€¼å¹¶æŠ›å‡ºäº‹ä»¶ï¼Œå—æ§çš„æ—¶å€™åªæŠ›å‡ºäº‹ä»¶ã€‚ä»¥åŠï¼Œ<code>props</code> ä¸­å—æ§å±æ€§çš„é»˜è®¤å€¼éœ€æ˜¯ <code>null</code> æˆ– <code>undefined</code>ã€‚</p>
<p>ä¸åŒçš„æ˜¯ï¼Œå°ç¨‹åºå—æ§å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <code>this.setData({ [value]: this.defaultValue })</code>ï¼Œä¹Ÿå°±æ˜¯ <code>data</code> ä¸­å£°æ˜äº†ä¸€ä¸ªå’Œ <code>properties</code> åç§°ä¸€æ ·çš„å˜é‡ï¼ŒVue ä¸­ä¸å¯ä»¥ï¼Œä¼šæŠ¥é”™ <code>'set' on proxy: trap returned falsish for property 'value'</code></p>
<p>æ€»ç»“ä¸‹æ¥ï¼Œå—æ§å±æ€§è¦å¤„ç†çš„ï¼š</p>
<ol>
<li><code>watch</code> ä¸­ç›‘å¬</li>
<li><code>created</code> ä¸­åˆå§‹åŒ–</li>
<li><code>methods</code> ä¸­æ–°å¢ <code>_trigger</code>ï¼Œä½œä¸ºæŠ›å‡ºäº‹ä»¶çš„æ”¶å£</li>
</ol>
<h3 data-id="heading-18">6.3. ä¸‰æ–¹åº“</h3>
<p><code>tdesign-miniprogram</code> æ‰§è¡Œ <code>npm run build</code>ï¼Œåœ¨ <code>miniprogram_dist/node_modules</code> ç›®å½•ä¸‹ æ‹¿åˆ° <code>dayjs</code> å’Œ <code>tinycolor2</code> çš„äº§ç‰©ï¼Œå¤åˆ¶åˆ° <code>tdesign-uniapp</code> çš„ <code>npm</code> ç›®å½•ä¸‹ï¼Œç”¨å•¥æ‹¿å•¥
ã€‚</p>
<p>ä¸€æ¬¡æ€§å·¥ä½œï¼Œä¸€èˆ¬ä¸ä¼šæ”¹ã€‚</p>
<h3 data-id="heading-19">6.4. input å—æ§</h3>
<p>H5 ä¸‹ï¼Œuni-app å°è£…äº† <code>input</code>ï¼Œä¸”ä¸æ”¯æŒå—æ§ã€‚</p>
<p>Input é™åˆ¶ä¸­æ–‡å­—ç¬¦åœ¨ uni-app å®ç°çš„è¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯å…ˆè®¾ç½®ä¸€æ¬¡ï¼Œç„¶ååœ¨ <code>nextTick</code> ä¸­å†è®¾ç½®ä¸€æ¬¡ã€‚</p>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fask.dcloud.net.cn%2Farticle%2F39736" target="_blank" title="https://ask.dcloud.net.cn/article/39736" ref="nofollow noopener noreferrer">ask.dcloud.net.cn/article/397â€¦</a></p>
<p>å…¶ä»–æ–¹æ¡ˆï¼š</p>
<ol>
<li>å¯ä»¥åŠ¨æ€åˆ›å»º <code>input</code> å…ƒç´ ï¼Œä¸ç”¨ uni-app åŒ…è£¹çš„ï¼Œç¼ºç‚¹æ˜¯æ›´æ–°å±æ€§éº»çƒ¦ã€‚</li>
<li>åŠ¨æ€è®¡ç®— <code>maxlength</code>ï¼Œç”¨æµè§ˆå™¨åŸç”Ÿå±æ€§çº¦æŸï¼Œç¼ºç‚¹æ˜¯å®ç°ç¨å¤æ‚ã€ä»£ç é‡ç¨å¤šã€‚</li>
</ol>
<h3 data-id="heading-20">6.5. externalClass</h3>
<p>uni-app ä¸‹ï¼Œ<code>externalClasses</code> æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdcloudio%2Funi-app%2Fissues%2F3275" target="_blank" title="https://github.com/dcloudio/uni-app/issues/3275" ref="nofollow noopener noreferrer">github.com/dcloudio/unâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fask.dcloud.net.cn%2Fquestion%2F163695" target="_blank" title="https://ask.dcloud.net.cn/question/163695" ref="nofollow noopener noreferrer">ask.dcloud.net.cn/question/16â€¦</a></li>
</ul>
<p>æ‰€ä»¥ <code>styleIsolation: apply-shared</code> ä¸å¤Ÿç”¨ï¼Œä»¥åªèƒ½æ”¹æˆ <code>styleIsolation: shared</code>ï¼Œè¿™æ ·å¼€å‘è€…æ‰èƒ½åœ¨ä»»æ„ä½¿ç”¨çš„åœ°æ–¹è¦†ç›–ç»„ä»¶æ ·å¼ã€‚</p>
<p>å¯ä»¥æ”¹ä¸‹ <code>packages/site/node_modules/@dcloudio/uni-mp-compiler/dist/transforms/transformComponent.js</code>ï¼ŒæŠŠ <code>isComponentProp</code> æ–¹æ³•ï¼Œå°† <code>t-class</code> æ’é™¤ï¼Œå°±èƒ½è§£å†³ï¼Œä½†æ˜¯å®˜æ–¹ä¸ä¼šæ¨å‡ºã€‚</p>
<h3 data-id="heading-21">6.6. scoped</h3>
<p>tdesign-uniapp å¿…é¡»åŠ  <code>scoped</code>ï¼Œå¦åˆ™ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶åŠ äº† <code>styleIsolation: shared</code>ï¼ŒåŒä¸€é¡µé¢ä¸‹å…¶ä»–æ²¡åŠ æ­¤å±æ€§çš„è‡ªå®šä¹‰ç»„ä»¶ä¹Ÿä¼šç”Ÿæ•ˆï¼Œåªè¦ <code>class</code> ç›¸åŒï¼</p>
<h3 data-id="heading-22">6.7. t-class</h3>
<p>ç»Ÿä¸€ç”¨ <code>tClass</code>ï¼Œè€Œä¸æ˜¯ <code>class</code>ã€‚</p>
<img src="https://cdn.uwayfly.com/article/2025/10/own_mike_bR3Jm86QaWDeWRdD.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<h3 data-id="heading-23">6.8. distanceTop</h3>
<p>Drawer é¡¶éƒ¨è¿‡é«˜ï¼Œæ˜¯å› ä¸ºå­ç»„ä»¶ <code>popup</code> ä¸­ä½¿ç”¨çš„ <code>--td-popup-distance-top</code> å˜é‡ä¸º <code>0</code>ï¼Œè¿™ä¸ªå˜é‡ç”± <code>distanceTop</code> ç”Ÿæˆï¼Œ<code>distanceTop</code> åˆæ˜¯ç”± <code>using-custom-navbar</code> è¿™ä¸ª <code>mixin</code> ç”Ÿæˆã€‚</p>
<p><code>distanceTop</code> ç”± <code>uni.getMenuButtonBoundingClientRect</code> è®¡ç®—ç”Ÿæˆï¼ŒH5 å’Œ App ä¸‹æ²¡æœ‰è¿™ä¸ªAPIï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥ <code>customNavbarHeight</code>ï¼Œè¿™ä¸ªå€¼ç”±ä¸šåŠ¡è‡ªè¡Œè®¡ç®—å¾—åˆ°ã€‚</p>
<p>ç›®å‰ä½¿ç”¨åˆ° <code>using-custom-navbar</code> è¿™ä¸ª <code>mixin</code> çš„ç»„ä»¶æœ‰</p>
<ul>
<li>Overlayï¼ŒåŸºç¡€ï¼Œä½¿ç”¨åˆ°å®ƒçš„ä¹Ÿä¼šå¼•ç”¨
<ul>
<li>Popup</li>
<li>Picker</li>
<li>ActionSheet</li>
<li>Calendar</li>
<li>Dialog</li>
<li>Drawer</li>
<li>Guide</li>
<li>Toast</li>
</ul>
</li>
<li>Fab</li>
<li>ImageViewer</li>
</ul>
<h3 data-id="heading-24">6.9. page-scroll</h3>
<p>APP-PLUS ä¸‹ï¼ŒåŠ¨æ€ç›‘å¬ <code>onPageScroll</code> ä¸ç”Ÿæ•ˆï¼Œéœ€è¦ä¸šåŠ¡è‡ªå·±åœ¨é¡µé¢ä¸­ç›‘å¬ï¼Œä¸‹é¢ç»™å‡ºæœ€ä½³å®è·µä¹‹ä¸€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¡µé¢ Vue æ–‡ä»¶ä¸‹ï¼Œå¼•å…¥ç»„ä»¶åº“æä¾›çš„ç›‘å¬æ–¹æ³•</span>
<span class="hljs-comment">// è¯¥æ–¹æ³•å†…éƒ¨ä¼šé€šè¿‡ event-busï¼Œä¼ é€’å‚æ•°ç»™å¯¹åº”çš„ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { handlePageScroll } <span class="hljs-keyword">from</span> <span class="hljs-string">'tdesign-uniapp/mixins/page-scroll'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">onPageScroll</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-title function_">handlePageScroll</span>(e);
  },
}
</code></pre>
<p>ç›®å‰ä½¿ç”¨åˆ° <code>page-scroll</code> è¿™ä¸ª <code>mixin</code> çš„ç»„ä»¶æœ‰</p>
<ol>
<li>Sticky</li>
<li>Indexes</li>
<li>Tabs(å¼•å…¥äº† Sticky)</li>
</ol>
<p>ç¤ºä¾‹é¡µé¢æœ‰</p>
<ul>
<li>Fab</li>
<li>PullDownRefresh</li>
</ul>
<h3 data-id="heading-25">6.10. getCustomNavbarHeight æŠ¥é”™</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">Cannot read properties of <span class="hljs-title">null</span> <span class="hljs-params">(reading <span class="hljs-string">'parentElement'</span>)</span>
</span></code></pre>
<img src="https://cdn.uwayfly.com/article/2025/10/own_mike_ycz2zafE5BbMiDDs.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>è¿™ç§å°±æ˜¯ <code>mounted</code> ä¹‹åæ²¡å»¶æ—¶ï¼Œæ²¡è·å–åˆ°å¯¹åº”å…ƒç´ ã€‚</p>
<h3 data-id="heading-26">6.11. site å·¥ç¨‹ä¸­çš„ alias</h3>
<p>tdesign-uniapp åœ¨ H5 ä¸‹ä½¿ç”¨ <code>vite.config</code> ä¸­çš„ <code>alias</code>ï¼Œä¸ä½¿ç”¨ <code>workspace</code>ï¼Œå¯è§£å†³ä¿®æ”¹ç»„ä»¶åå¿…é¡»é‡å¯æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p>å°ç¨‹åºä¸‹ï¼Œè¿™ç§æ–¹å¼éœ€è¦è¿›ä¸€æ­¥æ”¹é€ ï¼Œåªèƒ½å¼•ç”¨åŒä¸€ä¸ªå­å·¥ç¨‹ï¼Œå³ä¸èƒ½è·¨ <code>src</code>ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯ç›‘å¬ç»„ä»¶å˜åŠ¨ï¼ŒåŒæ­¥å¤åˆ¶åˆ° <code>site</code> å·¥ç¨‹ä¸‹ã€‚</p>
<h3 data-id="heading-27">6.12. watch</h3>
<p>å°ç¨‹åºçš„ <code>observers</code> å’Œ <code>vue</code> çš„ <code>watch</code> é€»è¾‘å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå°ç¨‹åºä¸‹ï¼Œå¦‚æœ <code>prop</code> æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å®å‚ä¸è¯¥ <code>prop</code> çš„é»˜è®¤å€¼ä¸ç›¸ç­‰æ—¶ï¼Œä¼šå¯¼è‡´ <code>observer</code> è¢«ç«‹å³è°ƒç”¨ä¸€æ¬¡ï¼ŒVue è€Œä¸æ˜¯ã€‚</p>
<p><code>image</code> ä¸­ <code>calcSize</code> ä¸­å°±ç”¨åˆ°äº†ã€‚</p>
<h3 data-id="heading-28">6.13. auto-import</h3>
<p>å¼€å‘äº† auto-import-resolver æ’ä»¶ï¼Œä½†æ˜¯å‘ç°å¾®ä¿¡å°ç¨‹åºä¸‹ç¼–è¯‘æœ‰é—®é¢˜ï¼ŒH5 ä¸‹æ­£å¸¸ï¼Œæ¨æµ‹æ˜¯ uniapp è‡ªå·±çš„é—®é¢˜ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_PEGTWZzYiQR36r7C.png" width="400" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fcollocation%2Fpages.html%23easycom" target="_blank" title="https://uniapp.dcloud.net.cn/collocation/pages.html#easycom" ref="nofollow noopener noreferrer">easycom</a> æ¨¡å¼ã€‚</p>
<p>âš ï¸ æ³¨æ„ï¼Œ<code>easycom</code> ä¸æ”¯æŒ <code>TIcon</code> è¿™ç§å¤§é©¼å³°ï¼Œåªèƒ½æ˜¯ <code>t-icon</code>ï¼Œè¿™ç§ä¸­åˆ’çº¿å½¢å¼ã€‚</p>
<h3 data-id="heading-29">6.14. visible</h3>
<p>ä¸‹é¢å‡ ä¸ªç»„ä»¶åœ¨å…³é—­æ—¶ï¼Œéœ€è¦çˆ¶ç»„ä»¶ä¸­è®¾ç½® <code>visible</code> ä¸º <code>false</code>ï¼Œå¦åˆ™æ— æ³•å†æ¬¡å¼€å¯ã€‚ä¹Ÿå°±æ˜¯ <code>visible</code> åªèƒ½æ˜¯å—æ§çš„ã€‚å¯ä»¥ç»™ <code>visible</code> å±æ€§å¢åŠ  <code>v-model</code> è¯­æ³•ç³–ã€‚</p>
<ul>
<li>drawer</li>
<li>cascader</li>
<li>calendar</li>
<li>date-time-picker</li>
<li>color-picker</li>
</ul>
<h2 data-id="heading-30">7. æ”¯ä»˜å®å°ç¨‹åº</h2>
<h3 data-id="heading-31">7.1. styleIsolation</h3>
<p>æ”¯ä»˜å®å°ç¨‹åºåªæ”¯æŒåœ¨ <code>json</code> æ–‡ä»¶ä¸­é…ç½® <code>styleIsolation</code>ï¼Œå‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopendocs.alipay.com%2Fmini%2Fframework%2Fcomponent-template%23%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589%25E7%25BB%2584%25E4%25BB%25B6%25E6%25A0%25B7%25E5%25BC%258F%25E9%259A%2594%25E7%25A6%25BB" target="_blank" title="https://opendocs.alipay.com/mini/framework/component-template#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<p>uni-app ä¼šé™æ€åˆ†æç»„ä»¶ä¸­çš„ <code>styleIsolation</code> é…ç½®ï¼Œæ”¾åˆ°ç»„ä»¶å¯¹åº”çš„ <code>json</code> æ–‡ä»¶ä¸­ã€‚æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdcloudio%2Funi-app%2Ftree%2Fnext%2Fpackages%2Funi-mp-vite%2Fsrc%2Fplugins%2Fentry.ts" target="_blank" title="https://github.com/dcloudio/uni-app/tree/next/packages/uni-mp-vite/src/plugins/entry.ts" ref="nofollow noopener noreferrer">packages/uni-mp-vite/src/plugins/entry.ts</a>ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> styleIsolationRE = [
  <span class="hljs-regexp">/defineOptions\s*[\s\S]*?styleIsolation\s*:\s*['"](isolated|apply-shared|shared)['"]/</span>,
  <span class="hljs-regexp">/export\s+default\s+[\s\S]*?styleIsolation\s*:\s*['|"](isolated|apply-shared|shared)['|"]/</span>,
]
</code></pre>
<p>æ‰€ä»¥ï¼Œä¸èƒ½ç”¨ <code>uniComponent</code> åœ¨è¿è¡Œæ—¶æ·»åŠ ï¼Œåªèƒ½åœ¨ Vue ä¸­æ˜¾å¼å£°æ˜ã€‚</p>
<h3 data-id="heading-32">7.2. background</h3>
<p>Stepper ä¸­éœ€æ˜¾å¼å£°æ˜ background å’Œ paddingã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_Hce7tsxzWisb4MXZ.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_J8YPSmdtHBtKPQAs.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>Search ä¸­åŒæ ·é—®é¢˜ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_nPmaDZpdMnwrxGjm.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_bBmbPbAYx7R8abDf.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<h3 data-id="heading-33">7.3. disable-scroll</h3>
<p>æ»šåŠ¨ç©¿é€é—®é¢˜ï¼Œuniapp æœ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Ftutorial%2Fvue3-basics.html%23%25E4%25BA%258B%25E4%25BB%25B6%25E4%25BF%25AE%25E9%25A5%25B0%25E7%25AC%25A6" target="_blank" title="https://uniapp.dcloud.net.cn/tutorial/vue3-basics.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6" ref="nofollow noopener noreferrer">é€šç”¨æ–¹æ¡ˆ</a> <code>@touchmove.stop.prevent="noop"</code>ï¼Œæ”¯ä»˜å®ä¸‹æ— æ•ˆï¼Œéœ€è¦è®¾ç½® <code>disable-scroll</code>ã€‚å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fopendocs.alipay.com%2Fsupport%2F01rb9a" target="_blank" title="https://opendocs.alipay.com/support/01rb9a" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_Rs2z2SHDRnm4a4aa.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>âš ï¸ æ³¨æ„ï¼Œè®¾ç½® <code>disable-scroll</code> ä¸º <code>true</code> åï¼Œæ‰€æœ‰å­å…ƒç´ çš„æ»šåŠ¨éƒ½ä¸èƒ½å†’æ³¡äº†ï¼Œå³ä¾¿å­å…ƒç´ è®¾ç½®çš„ <code>disable-scroll</code> ä¸º <code>false</code>ï¼Œæ‰€ä»¥ä¹Ÿå°½å¯èƒ½å‡å°‘ <code>disable-scroll</code> å±æ€§çš„è¦†ç›–èŒƒå›´ã€‚</p>
<h3 data-id="heading-34">7.4. :deep ç¼–è¯‘é—®é¢˜</h3>
<p>é¿å… <code>less</code> ä¸­ä¸¤ä¸ª <code>:deep</code> åµŒå¥—ï¼Œå…¶ä¸­ä¸€ä¸ªä¸ä¼šè¢«è½¬åŒ–ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_t6jQCkeSjhYc2AYz.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_D643Bm7WjzhQX3jc.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<h3 data-id="heading-35">7.5. scroll-view</h3>
<p>å¾®ä¿¡å°ç¨‹åº <code>scroll-view</code>ï¼Œå®½åº¦ <code>100%</code>ã€‚æ”¯ä»˜å®å°ç¨‹åºä¸æ˜¯ï¼Œéœ€æ‰‹åŠ¨è®¾ç½®ï¼Œä¸è®¾ç½®çš„è¯ï¼Œæ’‘ä¸å¼€ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_RYRrXDTrmrSdmCMh.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_NpK4EZ3p78tsQNda.png" width="500" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<h2 data-id="heading-36">8. æŠ–éŸ³å°ç¨‹åº</h2>
<h3 data-id="heading-37">8.1. virtualHost</h3>
<p>é‡åˆ°ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ä¸èƒ½ä¼ é€’çš„é—®é¢˜ï¼Œæ’æŸ¥ä¸‹æ¥ä»¥ä¸ºæ˜¯ä¸èƒ½ç”¨ <code>uniComponent</code> åŒ…è£¹ï¼ŒçŒœæµ‹å…¶å†…éƒ¨ä¼šé™æ€æ£€æµ‹ <code>js</code> æ–‡ä»¶ã€‚åé¢å‘ç°æ˜¯ä¸èƒ½ä½¿ç”¨ <code>virtualHost: true</code>ï¼Œä¸æ­¢ <code>button</code> ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<h3 data-id="heading-38">8.2. æ ·å¼ç©¿é€</h3>
<p>æŠ–éŸ³å°ç¨‹åºåŸç”Ÿçš„è¯ï¼Œå¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.open-douyin.com%2Fdocs%2Fresource%2Fzh-CN%2Fmini-app%2Fdevelop%2Ftutorial%2Fcustom-component%2Fcomponent-model-and-style%23a6c4373d" target="_blank" title="https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/tutorial/custom-component/component-model-and-style#a6c4373d" ref="nofollow noopener noreferrer">externalClasses</a> æ¥è¿›è¡Œæ ·å¼è¦†ç›–ï¼Œä½†æ˜¯å‰é¢æåˆ°è¿‡ uni-app ä¸æ”¯æŒã€‚</p>
<p>å®ƒä¹Ÿä¸æ”¯æŒæ ‡ç­¾é€‰æ‹©å™¨ï¼ŒåŠ ä¸Šåˆšè¯´çš„ä¸èƒ½ç”¨ <code>virtualHost: true</code>ï¼Œæ‰€ä»¥å®ƒçš„æ ·å¼ç©¿é€æ˜¯æœ€éº»çƒ¦çš„ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæ ¹æ®å…·ä½“æƒ…å†µï¼Œå¯¹ <code>class/t-class/style/custom-style</code> è¿™äº›å±æ€§åŒºåˆ†å¹³å°å¤„ç†ï¼Œæ¯”å¦‚</p>
<ul>
<li>DropdownItem ç»„ä»¶ä¸­ï¼Œ<code>btn</code> ç”¨äº† <code>class/t-class</code> åŒºåˆ†ï¼Œ<code>radio-group/checkbox-group</code> ç”¨äº† <code>custom-style</code></li>
<li>AvatarGroup ç»„ä»¶ä¸­ï¼Œ<code>avatar</code> ç”¨äº† <code>setStyle</code>ï¼ˆ<code>children</code> è·å–ï¼‰ï¼Œå› ä¸º <code>avatar</code> æ˜¯å¤–éƒ¨å®šä¹‰çš„ï¼Œæ— æ³•ç”¨ <code>custom-style</code></li>
<li>æ¶‰åŠåˆ°ä¼ªç±»çš„åªèƒ½ç”¨ <code>class</code>ï¼Œä¸èƒ½ç”¨ <code>custom-style</code></li>
</ul>
<h3 data-id="heading-39">8.3. çˆ¶å­å…³ç³»</h3>
<p>æŠ–éŸ³å°ç¨‹åºç»™ä¸¤ä¸ªç»„ä»¶ç»‘å®šçˆ¶å­å…³ç³»ä¹Ÿæ˜¯æœ€å¤æ‚çš„ï¼Œå…¶ä»–å°ç¨‹åºåŠH5å¯ä»¥é€šè¿‡ <code>provide/inject</code> æ¥æ”¶é›† <code>parent</code>ï¼ŒæŠ–éŸ³å°ç¨‹åºä¸­æ‰¾ä¸åˆ°ï¼ˆä¸‹é¢éƒ¨åˆ†æˆªå›¾æ˜¯æ”¾çš„ PressUI ç»„ä»¶åº“çš„ï¼‰ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_HHa8HeNminHbpC3j.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>è¿™é‡Œæƒ³åˆ°ä¸€ä¸ªåŠæ³•æ˜¯é€’å½’è°ƒç”¨ <code>$parent</code>ï¼Œæ‰¾æœ€è¿‘çš„ä¸€ä¸ªå’Œç›®æ ‡ç»„ä»¶åç§°ç›¸åŒçš„ <code>parent</code>ã€‚æ¯”å¦‚ <code>picker-item</code> ä¸­å°±æ‰¾ç»„ä»¶åç§°ä¸º <code>TPicker</code> æœ€è¿‘çš„çˆ¶ç»„ä»¶ã€‚</p>
<p>ä½†æ˜¯ï¼ŒæŠ–éŸ³å°ç¨‹åºå­å­™ç»„ä»¶çš„ <code>$parent</code> ç«Ÿç„¶å°±æ˜¯é¡µé¢ï¼Œé¡µé¢çš„æ‰€æœ‰ <code>$children</code> éƒ½æ˜¯æ‹‰å¹³çš„ã€‚åŸºäºæ­¤ï¼Œæƒ³åˆ°çš„åŠæ³•æ˜¯ä»ä¸Šå¾€ä¸‹éå†è¿™ä¸ªæ‹‰å¹³çš„ <code>$children</code>ï¼Œæ‰¾è·ç¦»å­ç»„ä»¶æœ€è¿‘çš„ä¸€ä¸ªçˆ¶ç»„ä»¶ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_bmwwwRjGpQYYHhf8.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_XSEkhMDNRdNmXEDp.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>ä½†æ˜¯ï¼Œé¡µé¢çš„ <code>$children</code> å¹¶ä¸æ˜¯"çˆ¶å­çˆ¶å­çˆ¶å­.."è¿™æ ·é¡ºåºæ’åˆ—çš„ï¼Œè€Œæ˜¯"çˆ¶çˆ¶çˆ¶å­å­å­..."ï¼Œå¯¼è‡´ <code>$children</code> æ”¶é›†æœ‰é—®é¢˜ï¼Œè¦ä¹ˆå¤šäºå®é™…ï¼Œè¦ä¹ˆä¸ºç©ºã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_b6aXQpMmPxh3naGG.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>æƒ³åˆ°çš„åŠæ³•æ˜¯çˆ¶å­ç»„ä»¶ä¹‹é—´ä¼ é€’ä¸€ä¸ª <code>relationKey</code>ï¼Œè¿™ä¸ªå€¼æ˜¯å”¯ä¸€çš„ï¼Œæ‰¾ <code>$parent</code> æ—¶å°±ä¸ä¼šæ‰¾é”™äº†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">findNearListParent</span>(<span class="hljs-params">children = [], name</span>) {
  <span class="hljs-keyword">let</span> temp;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> children) {
    <span class="hljs-keyword">const</span> parentRelationKey = item.<span class="hljs-property">$props</span>?.<span class="hljs-property">relationKey</span>;
    <span class="hljs-keyword">const</span> thisRelationKey = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$props</span>?.<span class="hljs-property">relationKey</span>;
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span> === name &amp;&amp; parentRelationKey === thisRelationKey) {
      temp = item;
    }
    <span class="hljs-keyword">if</span> (item === <span class="hljs-variable language_">this</span> &amp;&amp; temp) {
      <span class="hljs-keyword">return</span> temp;
    }
  }

  <span class="hljs-keyword">return</span> temp;
}
</code></pre>
<p>ä¸Šé¢çš„ <code>relationKey</code> åº”è¯¥æ°¸è¿œä»ä¸šåŠ¡ä¼ å…¥ã€‚å†…éƒ¨ç»„ä»¶ï¼Œä¸ç®¡çˆ¶å­ï¼Œéƒ½åªæ¥å— <code>props</code>ï¼Œä¸è‡ªå·±ç”Ÿäº§ï¼Œå‡å°‘å¤æ‚åº¦ã€‚è¿™æ ·çš„è¯ï¼Œä¸ç®¡ç”¨ <code>slot</code>ï¼Œ <code>&lt;x&gt;&lt;x-item&gt;&lt;/x&gt;</code> è¿˜æ˜¯ç”¨ä¸€ä¸ª <code>&lt;x&gt;</code>ï¼Œéƒ½èƒ½ä¿è¯ <code>relationKey</code> åŒä¸€ä¸ªï¼Œä¸”ä¸è®ºç©ºè¿˜æ˜¯ä¸ç©ºï¼Œéƒ½æ˜¯ç›¸ç­‰çš„ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰è¿™ç§æ¸¸ç¦»åœ¨ä¾èµ–æ ‘ä¹‹å¤–çš„ <code>vm</code> å®ä¾‹ï¼Œä¹Ÿæ‹¿ä¸åˆ° <code>provide</code> çš„å€¼ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_DZRyKmZBRZRA2B6k.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>è¿™ç§ä¸»è¦å‘ç”Ÿåœ¨ Popup ç»„ä»¶å†…éƒ¨çš„çˆ¶å­å…³ç³»ï¼Œæ¯”å¦‚ <code>dropdown-menu</code> ç»„ä»¶ä¸­çš„ <code>radio-group/radio</code>ã€ <code>cascader</code> ç»„ä»¶ <code>tab</code> æ¨¡å¼çš„ <code>tabs/tab-panel</code>ã€‚</p>
<p>è¿™ç§é—®é¢˜çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯åœ¨ä½¿ç”¨å®ƒä»¬çš„åœ°æ–¹æ‰‹åŠ¨å…³è”ã€‚</p>
<h3 data-id="heading-40">8.4. ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Vue ä¸­çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ­£å¸¸çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼šçˆ¶ç»„ä»¶å…ˆåˆ›å»ºï¼Œç„¶åå­ç»„ä»¶åˆ›å»ºï¼›å­ç»„ä»¶å…ˆæŒ‚è½½ï¼Œç„¶åçˆ¶ç»„ä»¶æŒ‚è½½ï¼Œå³â€œçˆ¶beforeCreate-&gt; çˆ¶create -&gt; å­beforeCreate-&gt; å­created -&gt; å­mounted -&gt; çˆ¶mountedâ€ã€‚</p>
<p>æŠ–éŸ³å°ç¨‹åºå¹¶ä¸éµå¾ªè¿™æ ·çš„è§„å¾‹ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_8rXrNdH7m6fmAaSd.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>è¿™ä¸ªé—®é¢˜ä¼šå¯¼è‡´çˆ¶å­ç»„ä»¶çš„åˆå§‹åŒ–æ•°æ®å‡ºé—®é¢˜ï¼Œä¹‹å‰åœ¨çˆ¶ç»„ä»¶ <code>mounted</code> ä¸­æ‰§è¡Œçš„åˆå§‹é€»è¾‘ï¼Œéƒ½ä¼šå› ä¸ºè¿˜æ²¡æ”¶é›†å®Œ <code>children</code>ï¼Œè€Œå¤±è´¥ã€‚</p>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/6/own_mike_d3M8XdYzTBxHSRzh.png" width="370" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>è§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼Œå¯ç”¨å»¶æ—¶ï¼Œä¹Ÿå¯ç”¨å›è°ƒã€‚å›è°ƒæ›´å®‰å…¨ï¼Œå»¶æ—¶å¯èƒ½è·Ÿæœºå™¨æ€§èƒ½æœ‰å…³ã€‚å›è°ƒå°±æ˜¯åœ¨å­ç»„ä»¶ <code>mounted</code> çš„æ—¶å€™è°ƒç”¨çˆ¶ç»„ä»¶çš„æ•°æ®åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
<h2 data-id="heading-41">9. å…¶ä»–</h2>
<h3 data-id="heading-42">9.1. æœ€ç®€å•çš„</h3>
<p><code>button</code> ä¸æ˜¯æœ€ç®€å•çš„ï¼Œ<code>loading/icon</code> æ‰æ˜¯æœ€ç®€å•çš„ï¼Œå®ƒä»¬æ˜¯ <code>button</code> çš„å­å…ƒç´ ã€‚</p>
<h3 data-id="heading-43">9.2. ç»„ä»¶å½’ç±»</h3>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_4fNtPMKtDajWBTyW.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>å¯¼èˆªç±»</p>
<ul>
<li>Navbarã€Tabbarã€Sidebarã€Indexes åˆ†åˆ«æ˜¯ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„å¯¼èˆªï¼Œå›ºå®š</li>
<li>Drawerã€BackTop éƒ½æ˜¯å¯éšè—çš„ï¼Œç‚¹å‡»æŸå¤„æˆ–æ»‘åŠ¨åˆ°æŸå¤„æ—¶æ‰æ˜¾ç¤º</li>
<li>Tabs æ˜¯ä¸šåŠ¡ä¸­æœ€å¸¸ç”¨çš„å¯¼èˆªç±»ç»„ä»¶ï¼ŒSteps æ¯” Tabs æ›´è‹›åˆ»ï¼Œæœ‰é¡ºåºï¼Œè¿™ä¸¤éƒ½ä»¥ <code>s</code> ç»“å°¾</li>
</ul>
<p>åé¦ˆç±»</p>
<ul>
<li>Overlayã€Popupã€Loading åŸºç¡€</li>
<li>Messageã€Toastã€Dialogã€NoticeBar æ˜¯ä¸€ç±»ï¼ŒMessage ä¸Š+åŠ¨æ€ï¼ŒToast ä¸­é—´ï¼ŒDialog ä¸­é—´ï¼Œæ›´é‡ï¼ŒNoticeBar ä¸Š+å›ºå®š</li>
<li>DropdownMenuã€ActionSheet ä¸€ä¸ªä»ä¸Šå¾€ä¸‹æ˜¾ç¤ºï¼Œä¸€ä¸ªä»ä¸‹å¾€ä¸Š</li>
<li>SwipeCellï¼ŒPulldownRefresh ä¸€ä¸ªå‘å·¦æ»‘ï¼Œä¸€ä¸ªå‘ä¸‹æ»‘</li>
<li>Guide ç‰¹æ®Šï¼Œå…¨å±€ï¼Œå…¶ä»–çš„éƒ½æ˜¯å±€éƒ¨</li>
</ul>
<p>è¾“å…¥ç±»</p>
<ul>
<li>Inputã€Textareaã€Searchï¼Œæ–‡å­—è¾“å…¥</li>
<li>Radioã€Checkboxã€Switchï¼Œç‚¹å‡»é€‰æ‹©</li>
<li>Stepperã€Sliderï¼Œæ•°å­—é€‰æ‹©ï¼ˆè¾“å…¥ï¼‰ä¸€ä¸ªæ˜¯ç‚¹å‡»ï¼Œä¸€ä¸ªæ˜¯æ»‘åŠ¨</li>
<li>Pickerï¼ŒCascaderã€TreeSelectï¼Œæ»‘åŠ¨é€‰æ‹©</li>
<li>Calendarã€DatetimePickerï¼Œç‰¹æ®Šåœºæ™¯</li>
<li>ColorPickerï¼Œç‰¹æ®Šåœºæ™¯</li>
<li>Rateï¼Œç‰¹æ®Šåœºæ™¯</li>
<li>Uploadï¼Œç‰¹æ®Šåœºæ™¯</li>
</ul>
<h3 data-id="heading-44">9.3. é‡è›®ç”Ÿé•¿</h3>
<p>åªæœ‰æµé‡å¤§çš„ã€ç”¨æˆ·å¤šçš„APPï¼Œæ‰å¯èƒ½æœ‰å°ç¨‹åºã€‚å›½å†…å°ç¨‹åºç”Ÿæ€ç™¾èŠ±é½æ”¾ï¼Œæ²¡æœ‰ä¸¤ä¸ªæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚æ¯ä¸€ç§å°ç¨‹åºæ¡†æ¶ã€æ–‡æ¡£ã€è¿è¥å¹³å°ã€å¼€å‘è€…å·¥å…·ã€å®¡æ ¸ç­‰éƒ½éœ€è¦ä¸å°‘çš„å·¥ä½œé‡ã€ä¸å°‘çš„äººåŠ›ã€‚çœ‹å¾—å‡ºæ¥ä¸­å›½äº’è”ç½‘è¿‡å»å‡ å¹´å‘å±•çš„å¯ä»¥ã€‚</p>
<h3 data-id="heading-45">9.4. å›¾æ ‡</h3>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_4mZKcT6zYQNyJjrB.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>ä¸Šé¢æ˜¯å‡ ä¸ªå°ç¨‹åºå¼€å‘è€…å·¥å…·çš„å›¾æ ‡</p>
<ul>
<li>å¾®ä¿¡/qqã€æ”¯ä»˜å®ã€ç™¾åº¦ï¼ˆBATï¼‰</li>
<li>æŠ–éŸ³ã€å¿«æ‰‹ã€å°çº¢ä¹¦ï¼ˆåˆ†äº«ç¤¾åŒºï¼‰</li>
<li>äº¬ä¸œ</li>
</ul>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œå¤§å®¶æƒ³çš„éƒ½å·®ä¸å¤š</p>
<ol>
<li>ä½“ç°è¿æ¥
<ul>
<li>æŠ–éŸ³ï¼Œå¹³é¢</li>
<li>äº¬ä¸œï¼Œç«‹ä½“</li>
<li>å¿«æ‰‹ï¼Œæ¨ªå‘</li>
<li>ç™¾åº¦ï¼Œä¸­é—´</li>
</ul>
</li>
<li>ä»£ç ç¬¦å·
<ul>
<li>æ”¯ä»˜å®</li>
<li>å°çº¢ä¹¦</li>
<li>å¾®ä¿¡ï¼ˆç»“åˆäº†è‡ªå·±çš„ logoï¼‰</li>
</ul>
</li>
<li>äº§å“ logo å˜å½¢
<ul>
<li>QQ</li>
<li>å¾®ä¿¡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-46">9.5. wxComponent</h3>
<p><code>tdesign-miniprogram</code> ä¸­ <code>wxComponent</code> ç±»çš„ä½œç”¨ï¼š</p>
<ol>
<li>å±æ€§ï¼Œå¤„ç†å—æ§å±æ€§ï¼Œå¢åŠ  <code>default*</code> å±æ€§çš„é»˜è®¤å€¼ï¼Œå¢åŠ  <code>style/customStyle</code> å±æ€§ï¼Œå¢åŠ  <code>aria*</code> ç›¸å…³å±æ€§</li>
<li><code>externalClasses</code>ï¼Œå¢åŠ  <code>class</code></li>
<li>æ–¹æ³•ï¼Œå¢åŠ  <code>_trigger</code>ï¼Œå…¼å®¹å—æ§æƒ…å†µä¸‹çš„æŠ›å‡ºäº‹ä»¶ï¼Œéç”Ÿå‘½å‘¨æœŸå‡½æ•°æŒ‚è½½åœ¨ <code>methods</code> å¯¹è±¡ä¸Š</li>
<li>ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ”¾åˆ° <code>lifetimes</code> ä¸Š</li>
</ol>
<h3 data-id="heading-47">9.6. uni-app</h3>
<p><code>src/core/runtime/mp/polyfill/index.js</code></p>
<p>uni-app ä¸­è¿è¡Œæ—¶å¯¹ <code>vant-weapp</code> çš„ <code>polyfill</code> æ ¸å¿ƒé€»è¾‘</p>
<h3 data-id="heading-48">9.7. data</h3>
<p><strong>åªè¦ä¸åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</strong>ï¼Œ<code>data</code> ä¸ç”¨æå‰å£°æ˜ï¼Œ<code>created</code> ä¸­åŠ¨æ€å£°æ˜å³å¯</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">xxx</span> = <span class="hljs-string">'xxx'</span>;
}
</code></pre>
<h3 data-id="heading-49">9.8. Slider ç»„ä»¶ç»†èŠ‚</h3>
<p>å‰ç½®å˜é‡ï¼š</p>
<ul>
<li><code>initLeft = boxLeft - halfblock</code></li>
<li><code>initRight  = boxRight - halfblock</code></li>
<li><code>maxRange = boxRight - boxLeft - blockSize - 6</code> ( 6 æ˜¯è¾¹æ¡†)</li>
</ul>
<p><code>capsule</code> æ¨¡å¼ä¸‹ï¼š</p>
<ol>
<li>å·¦è¾¹æ»‘å—æ»‘åŠ¨ï¼Œ<code>offset = blockSize + 3</code>ï¼Œ<code>currentLeft = clientLeft - initLeft - offset</code>ï¼Œå°±æ˜¯ <code>clientLeft - boxLeft - halfBlock - 3</code></li>
<li>å³è¾¹æ»‘åŠ¨æ»‘åŠ¨ï¼Œ<code>offset = - 3</code>ï¼Œ<code>currentIRight = -(clientRight - initRight - offset)</code>ï¼Œå°±æ˜¯ <code>boxRight - clientRight - halfBlock - 3</code></li>
</ol>
<p>å‡è®¾ <code>boxLeft = 0</code>ï¼Œ<code>boxRight = 100</code>, <code>halfBlock = 10</code>,</p>
<ul>
<li>å·¦å°±æ˜¯ <code>clientLeft - 13</code>ï¼Œå·¦è¾¹æœ€å°æ˜¯ 13</li>
<li>å³å°±æ˜¯ <code>87 - clientRight</code>ï¼Œå³è¾¹æœ€å¤§æ˜¯ 87</li>
<li><code>maxRange</code> å°±æ˜¯ 74</li>
</ul>
<img src="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/11/own_mike_mDk26PEERn43wxNX.png" width="600" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
<p>å›¾ä¸­åˆ†åˆ«æ˜¯å·¦ã€å³ã€è¾¹æ¡†ã€‚</p>
<h2 data-id="heading-50">10. åé¦ˆ</h2>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œå»ºè®®é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnovlan1%2Ftdesign-uniapp%2Fissues" target="_blank" title="https://github.com/novlan1/tdesign-uniapp/issues" ref="nofollow noopener noreferrer">Github issues</a> åé¦ˆæˆ–æ‰«ç åŠ å…¥ç”¨æˆ·å¾®ä¿¡ç¾¤ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63498e2781ab4e579729750e6b64da03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm92bGFuMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562060&amp;x-signature=j%2F2Hf477esVpaNObMGgj4Qhr%2Ba8%3D" width="200" loading="lazy"/>
<h2 data-id="heading-51">11. æ€»ç»“</h2>
<blockquote>
<p>TDesign is an artwork.</p>
</blockquote>
<p>å‘ TDesign çš„å¼€å‘è€…è‡´æ•¬ğŸ«¡ã€‚</p>
<p>åç»­è§„åˆ’æ˜¯</p>
<ol>
<li>åŒæ­¥ TDesign Miniprogram æ”¹åŠ¨ï¼Œå°½é‡åœ¨å°ç¨‹åºç‰ˆæœ¬å‘å¸ƒåçš„ä¸€å‘¨å†…ï¼ŒåŒæ­¥æ”¹åŠ¨åˆ° uniapp ç‰ˆæœ¬ä¸Š</li>
<li>å…¼å®¹è°ƒè¯•æ›´å¤šå¹³å°</li>
<li>æ¨¡æ¿å·¥ç¨‹ç­‰</li>
</ol>
<hr/>
<p>æ³¨ï¼Œæœ¬æ–‡å‘å¸ƒäºéå·¥ä½œæ—¶é—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯KaLM-Embeddingï¼šAIå¤šè¯­è¨€ç†è§£çš„å…¨çƒæ–°ç¯‡ç« ]]></title>    <link>https://juejin.cn/post/7571657746346475574</link>    <guid>https://juejin.cn/post/7571657746346475574</guid>    <pubDate>2025-11-12T14:22:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571657746346475574" data-draft-id="7571646669202194474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯KaLM-Embeddingï¼šAIå¤šè¯­è¨€ç†è§£çš„å…¨çƒæ–°ç¯‡ç« "/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-12T14:22:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯KaLM-Embeddingï¼šAIå¤šè¯­è¨€ç†è§£çš„å…¨çƒæ–°ç¯‡ç« 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:22:28.000Z" title="Wed Nov 12 2025 14:22:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œè·¨è¯­è¨€çš„æ— ç¼æ²Ÿé€šä¸æ·±åº¦ç†è§£ï¼Œæ— ç–‘æ˜¯é€šå‘çœŸæ­£é€šç”¨æ™ºèƒ½çš„å¿…ç»ä¹‹è·¯ã€‚è€Œæœ€è¿‘ï¼Œæ¥è‡ªè…¾è®¯å¾®ä¿¡å›¢é˜Ÿçš„ä¸€é¡¹çªç ´æ€§æˆæœâ€”â€”KaLM-Embeddingæ¨¡å‹ï¼Œå¦‚åŒåœ¨å¤šè¯­è¨€AIé¢†åŸŸç‚¹äº®äº†ä¸€ç›æ˜ç¯ï¼Œåœ¨æƒå¨çš„MTEBå¤šè¯­è¨€è¯„æµ‹åŸºå‡†ä¸­æ–©è·å…¨çƒç¬¬ä¸€ï¼Œæ ‡å¿—ç€æˆ‘ä»¬åœ¨ç ´è§£è¯­è¨€å£å’çš„é“è·¯ä¸Šåˆè¿ˆå‡ºäº†åšå®çš„ä¸€æ­¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-12_21.41.44-1024x541.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-12_21.41.44-1024x541.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcf8121ba44a46bbb924936e0bf380e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562147&amp;x-signature=%2FkZqvzQRa%2F3RFobQ6DXGrgjruiE%3D" alt="iShot_2025-11-12_21.41.44" loading="lazy"/></a></p>
<p>è¿™ä¸ªåä¸ºKaLM-Embedding-Gemma3-12B-2511çš„æ¨¡å‹ï¼Œå…¶åå­—è™½ç•¥æ˜¾æŠ€æœ¯åŒ–ï¼Œå´æ©ç›–ä¸ä½å…¶èƒŒåæ‰€è•´å«çš„å¼ºå¤§åŠ›é‡ã€‚å®ƒå¹¶éä»…ä»…åœ¨å‡ é¡¹ä»»åŠ¡ä¸­è¡¨ç°çªå‡ºï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªæ¶µç›–äº†å…¨çƒ1038ç§è¯­è¨€ã€131é¡¹å¤æ‚ä»»åŠ¡çš„åºå¤§è¯„æµ‹ä½“ç³»ä¸­ï¼Œä»¥å¹³å‡ä»»åŠ¡å¾—åˆ†72.32ã€å¹³å‡ä»»åŠ¡ç±»å‹å¾—åˆ†62.51çš„æƒŠäººæˆç»©ï¼ŒåŠ›å‹ç¾¤é›„ã€‚è¿™å…¶ä¸­ï¼Œä¸ä»…åŒ…æ‹¬äº†å¤§å®¶è€³ç†Ÿèƒ½è¯¦çš„NVIDIA Llama-Embedã€é˜¿é‡Œå·´å·´é€šä¹‰åƒé—®Qwen3-Embeddingï¼Œç”šè‡³è¿è°·æ­Œçš„Gemini-Embedding-001ä¹Ÿæœªèƒ½è¶…è¶Šã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªæ¨¡å‹èƒ½å¤Ÿå¦‚æ­¤ç²¾å‡†åœ°ç†è§£å’Œå¯¹é½å…¨çƒè¿‘åƒç§è¯­è¨€çš„è¯­ä¹‰ï¼Œè¿™æ— ç–‘æ˜¯ä¸€åœºè¯­è¨€æ™ºèƒ½çš„ç››å®´ï¼Œä¸ºå…¨çƒèŒƒå›´å†…çš„ä¿¡æ¯äº¤äº’å’ŒçŸ¥è¯†ä¼ é€’æ‰“å¼€äº†æ–°çš„å¯èƒ½ã€‚</p>
<p>é‚£ä¹ˆï¼Œè…¾è®¯å›¢é˜Ÿæ˜¯å¦‚ä½•é“¸é€ å‡ºè¿™æŠŠâ€œè¯­è¨€é­”æ³•æ–â€çš„å‘¢ï¼Ÿå…¶æ ¸å¿ƒåœ¨äºå¯¹â€œæ•°æ®è´¨é‡â€å’Œâ€œè®­ç»ƒç­–ç•¥â€çš„æè‡´è¿½æ±‚ã€‚è¿™æ¬¾æ‹¥æœ‰120äº¿å‚æ•°çš„æ¨¡å‹ï¼Œç»éç®€å•åœ°å †ç Œæ•°æ®æˆ–å¢å¤§æ¨¡å‹è§„æ¨¡ã€‚å®ƒé‡‡ç”¨äº†å¤šé˜¶æ®µå¯¹æ¯”å­¦ä¹ çš„ç²¾å¦™è®¾è®¡ï¼Œè®©æ¨¡å‹åœ¨ä¸åŒè¯­å¢ƒä¸‹å­¦ä¹ æ›´é²æ£’çš„è¯­ä¹‰è¡¨ç¤ºï¼›Embeddingè’¸é¦æŠ€æœ¯çš„è¿ç”¨ï¼Œåˆ™è¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ä¸æ•ˆç‡ï¼›è€Œæ¨¡å‹å‚æ•°èåˆçš„ç­–ç•¥ï¼Œæ›´æ˜¯è®©å…¶åœ¨å¤æ‚çš„è¯­ä¹‰ç©ºé—´ä¸­æ‰¾åˆ°äº†æœ€ä½³çš„å¯¹é½æ–¹å¼ã€‚è¿™äº›é«˜é˜¶çš„è®­ç»ƒæŠ€å·§ï¼Œè¾…ä»¥ç»è¿‡æ·±åº¦æ¸…æ´—ä¸ç­›é€‰çš„æµ·é‡é«˜è´¨é‡è¯­æ–™ï¼Œå…±åŒç¡®ä¿äº†KaLM-Embeddingèƒ½å¤Ÿæä¾›é«˜åº¦å¯é ä¸”ä¸€è‡´çš„è¯­ä¹‰è¡¨ç¤ºï¼Œä»è€Œåœ¨å¤šè¯­è¨€ä»»åŠ¡ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-12_21.42.14-962x1024.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-12_21.42.14-962x1024.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c241e63751d840ccbdf82348b9d5deb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562147&amp;x-signature=YOowO9yDwY8ISARx77iKVoON5Ro%3D" alt="iShot_2025-11-12_21.42.14" loading="lazy"/></a></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒKaLM-Embeddingå¹¶éä¸€ä¸ªâ€œä¸€æ‹›é²œâ€çš„æ¨¡å‹ã€‚å®ƒåœ¨åº”ç”¨æ”¯æŒä¸Šçš„çµæ´»æ€§ä»¤äººå°è±¡æ·±åˆ»ã€‚æ¨¡å‹æ”¯æŒä»3840åˆ°64ï¼Œå…±ä¸ƒä¸ªå±‚çº§çš„å‘é‡ç»´åº¦é€‰æ‹©ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œè®¡ç®—èµ„æºé™åˆ¶ï¼Œè‡ªç”±é€‰æ‹©æœ€åˆé€‚çš„å‘é‡ç»´åº¦ã€‚æ— è®ºæ˜¯å¯¹ç²¾åº¦è¦æ±‚æé«˜çš„äº‘ç«¯å¤§å‹æ£€ç´¢ç³»ç»Ÿï¼Œè¿˜æ˜¯å¯¹å“åº”é€Ÿåº¦å’Œå†…å­˜å ç”¨æœ‰ä¸¥æ ¼é™åˆ¶çš„ç§»åŠ¨ç«¯åº”ç”¨ï¼ŒKaLM-Embeddingéƒ½èƒ½æä¾›é«˜æ•ˆä¸”é€‚é…çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç§å…¼é¡¾é«˜æ€§èƒ½ä¸é«˜æ•ˆç‡çš„è®¾è®¡å“²å­¦ï¼Œæ— ç–‘å°†æå¤§åœ°æ‹“å±•å…¶åœ¨äº§ä¸šç•Œçš„å®é™…åº”ç”¨è¾¹ç•Œã€‚</p>
<p>Embeddingæ¨¡å‹ï¼Œä½œä¸ºäººå·¥æ™ºèƒ½ç†è§£éç»“æ„åŒ–æ–‡æœ¬å†…å®¹çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå…¶é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚å®ƒèƒ½å°†å¤æ‚çš„æ–‡æœ¬ä¿¡æ¯è½¬åŒ–ä¸ºè®¡ç®—æœºå¯ç†è§£ã€å¯è®¡ç®—çš„é«˜ç»´å‘é‡ï¼Œè®©â€œæ„ä¹‰â€å˜å¾—å¯åº¦é‡ã€å¯æ£€ç´¢ã€‚åœ¨å½“å‰çš„AIæµªæ½®ä¸­ï¼Œé«˜è´¨é‡çš„Embeddingæ¨¡å‹æ›´æ˜¯æˆä¸ºäº†æŠ‘åˆ¶å¤§å‹è¯­è¨€æ¨¡å‹â€œå¹»è§‰â€ç°è±¡çš„å…³é”®ã€‚åœ¨RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç­‰ä¸»æµåº”ç”¨æ¶æ„ä¸­ï¼ŒKaLM-Embeddingèƒ½å¤Ÿä»æµ·é‡çš„çŸ¥è¯†åº“ä¸­è¿›è¡Œè¶…ç²¾å‡†æ£€ç´¢ï¼Œä¸ºå¤§æ¨¡å‹åŠ¨æ€æ„å»ºé«˜è´¨é‡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™ç§â€œäº‹å®æ ¸æŸ¥å‘˜â€çš„è§’è‰²ï¼Œæå¤§åœ°æå‡äº†å¤§æ¨¡å‹ç”Ÿæˆç»“æœçš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œæœ‰æ•ˆé¿å…äº†å®ƒä»¬â€œä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“â€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-12_21.43.19-1024x351.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-12_21.43.19-1024x351.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2aac950e5d4412aa2e48d2215fefbfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562147&amp;x-signature=Gwc45IJLxwWrog5OY0WCdmGCKTI%3D" alt="iShot_2025-11-12_21.43.19" loading="lazy"/></a></p>
<p>ç„¶è€Œï¼ŒKaLM-Embeddingçš„åº”ç”¨å‰æ™¯è¿œä¸æ­¢äºRAGã€‚å…¶å¼ºå¤§çš„å¤šè¯­è¨€è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿå¹¿æ³›åº”ç”¨äºæ–‡æœ¬åˆ†ç±»ã€è¯­ä¹‰åŒ¹é…ã€ä¿¡æ¯èšç±»ã€æœç´¢æ¨èç­‰å¤šä¸ªé¢†åŸŸã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªèƒ½å¤Ÿç²¾å‡†ç†è§£ä¸åŒå›½å®¶ç”¨æˆ·æŸ¥è¯¢æ„å›¾çš„å…¨çƒç”µå•†å¹³å°ï¼Œæˆ–è€…ä¸€ä¸ªèƒ½å°†ä¸åŒè¯­ç§æ–°é—»è‡ªåŠ¨åˆ†ç±»å½’çº³çš„æ™ºèƒ½å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œåˆæˆ–è€…æ˜¯ä¸€ä¸ªèƒ½æ ¹æ®ç”¨æˆ·å¤šè¯­è¨€æµè§ˆå†å²æ¨èå†…å®¹çš„æ™ºèƒ½æ¨èå¼•æ“â€”â€”è¿™äº›éƒ½å°†å› KaLM-Embeddingçš„åŠ å…¥è€Œå˜å¾—æ›´åŠ æ™ºèƒ½ã€é«˜æ•ˆã€‚å®ƒä¸ä»…æ˜¯æå‡ç°æœ‰AIç³»ç»Ÿæ€§èƒ½çš„â€œåŠ é€Ÿå™¨â€ï¼Œæ›´æ˜¯å‚¬ç”Ÿå…¨æ–°åº”ç”¨åœºæ™¯çš„â€œå­µåŒ–å™¨â€ï¼ŒçœŸæ­£å°†AIå¸¦å…¥ä¸€ä¸ªâ€œè¯­å‡ºå¿…è¾¾â€çš„æ–°æ—¶ä»£ã€‚</p>
<p>æ›´ä»¤äººæ¬£å–œçš„æ˜¯ï¼Œè…¾è®¯å°†è¿™æ¬¾é¢†å…ˆå…¨çƒçš„æ¨¡å‹ä»¥MITè®¸å¯è¯åœ¨Hugging Faceå¹³å°å¼€æºï¼Œæ”¯æŒå•†ä¸šç”¨é€”ã€‚è¿™ä¸ä»…ä½“ç°äº†è…¾è®¯åœ¨AIé¢†åŸŸå¼€æ”¾åˆä½œçš„èƒ¸æ€€ï¼Œæ›´æ˜¯å¯¹å…¨çƒAIç¤¾åŒºå‘å±•çš„ä¸€å¤§è´¡çŒ®ã€‚é€šè¿‡å¼€æ”¾æ¨¡å‹è·å–æ¸ é“å’ŒæŠ€æœ¯è®ºæ–‡ï¼ŒKaLM-Embeddingæœ‰æœ›è¢«æ›´å¹¿æ³›çš„å¼€å‘è€…å’Œç ”ç©¶è€…æ‰€é‡‡çº³ã€ç ”ç©¶å’Œåº”ç”¨ï¼Œä»è€ŒåŠ é€Ÿå¤šè¯­è¨€AIæŠ€æœ¯çš„æ™®åŠå’Œè¿­ä»£ã€‚è¿™ç§å¼€æ”¾ç”Ÿæ€çš„å»ºè®¾ï¼Œå¯¹äºæ¨åŠ¨æ•´ä¸ªè¡Œä¸šå‘å‰å‘å±•ï¼Œå…·æœ‰æ·±è¿œçš„æ„ä¹‰ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-12_21.44.19-1024x785.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-12_21.44.19-1024x785.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ba2e85f3bfc414f90334fd8f0c66e37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562147&amp;x-signature=BSCaKj3bGZs2z4RE7bMYhfcqvts%3D" alt="iShot_2025-11-12_21.44.19" loading="lazy"/></a></p>
<p>å›é¡¾KaLM-Embeddingçš„å‘å¸ƒï¼Œæˆ‘ä»¬ä¸ç¦æ€è€ƒEmbeddingæŠ€æœ¯æœªæ¥çš„èµ°å‘ã€‚é™¤äº†æ­¤æ¬¡å‘å¸ƒçš„120äº¿å‚æ•°æ¨¡å‹ï¼Œå›¢é˜Ÿæ­¤å‰å¼€æºçš„V2ç³»åˆ—æ¨¡å‹ï¼ˆ0.5Bå‚æ•°é‡ï¼‰ä¹Ÿä»¥åœ¨æå°è§„æ¨¡ä¸‹å®ç°å“è¶Šæ€§èƒ½è€Œå¤‡å—å…³æ³¨ï¼Œå±•ç°äº†è…¾è®¯åœ¨å¹³è¡¡æ¨¡å‹è§„æ¨¡ä¸æ•ˆç‡ä¸Šçš„å¤šæ ·åŒ–æ¢ç´¢ã€‚æœªæ¥ï¼ŒEmbeddingæŠ€æœ¯å¾ˆå¯èƒ½å°†ç»§ç»­æ²¿ç€åº”ç”¨åœºæ™¯çš„æ‰©å±•ï¼ˆä»æ–‡æœ¬åˆ°å¤šæ¨¡æ€æ•°æ®ï¼‰ã€æ¨ç†ä¼˜åŒ–ï¼ˆåŠ¨æ€åˆ†é…è®¡ç®—èµ„æºä»¥å¹³è¡¡é€Ÿåº¦ä¸ç²¾åº¦ï¼‰ä»¥åŠè®­ç»ƒæŠ€æœ¯æ¼”è¿›ï¼ˆå€ŸåŠ©æ›´å¼ºå¤§çš„å¤§æ¨¡å‹åˆæˆé«˜è´¨é‡æ•°æ®ï¼‰çš„æ–¹å‘å‘å±•ã€‚è€ŒKaLM-Embeddingæ— ç–‘æ˜¯è¿™ä¸€æ¿€åŠ¨äººå¿ƒçš„æ¼”è¿›è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚å®ƒçš„æˆåŠŸä¸ä»…æ˜¯è…¾è®¯çš„éª„å‚²ï¼Œæ›´æ˜¯å…¨çƒAIé¢†åŸŸåœ¨è¿ˆå‘å¤šè¯­è¨€é€šç”¨æ™ºèƒ½é“è·¯ä¸Šçš„ä¸€ä¸ªé‡è¦æ³¨è„šã€‚æˆ‘ä»¬æœŸå¾…ç€ï¼Œéšç€KaLM-Embeddingçš„å¹¿æ³›åº”ç”¨ï¼Œä¸€ä¸ªçœŸæ­£å®ç°è¯­è¨€æ— ç•Œã€ä¿¡æ¯å…±äº«çš„æ™ºèƒ½ä¸–ç•Œå°†åŠ é€Ÿåˆ°æ¥ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°]]></title>    <link>https://juejin.cn/post/7571678763781652514</link>    <guid>https://juejin.cn/post/7571678763781652514</guid>    <pubDate>2025-11-12T14:34:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678763781652514" data-draft-id="7571672422689488948" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-11-12T14:34:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React DevTools ç»„ä»¶åä¹±ç ï¼Ÿæ­ç§˜ä»å¼€å‘åˆ°ç”Ÿäº§çš„ä»£ç å˜å½¢è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:34:55.000Z" title="Wed Nov 12 2025 14:34:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React DevTools ç»„ä»¶åä¹±ç ï¼ŸèŠèŠä»£ç å‹ç¼©è¿™ä»¶äº‹</h2>
<p>çº¿ä¸Šæ‰“å¼€ React DevToolsï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œç»„ä»¶æ ‘å…¨æ˜¯ <code>C0</code>ã€<code>$r</code>ã€<code>pv</code> è¿™ç§ä¸å¯è¯»çš„å­—ç¬¦ã€‚</p>
<p>å¼€å‘ç¯å¢ƒæ˜æ˜å¥½å¥½çš„ï¼Œå« <code>NavigationProvider</code>ã€<code>DialogPortal</code>ï¼Œæ€ä¹ˆåˆ°çº¿ä¸Šå°±å…¨å˜äº†ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23fcd0708f5641e494aca20e819a15d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763562895&amp;x-signature=9AyhGROp8t67XkehvUG1el%2BeKjw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">é—®é¢˜å‡ºåœ¨å“ª</h3>
<p>ç®€å•è¯´ï¼š<strong>ç”Ÿäº§æ„å»ºæ—¶ï¼Œä»£ç è¢«å‹ç¼©äº†ï¼Œå‡½æ•°åè¢«æ”¹æˆäº†çŸ­å­—ç¬¦ã€‚</strong></p>
<p>React DevTools ä¾èµ–å‡½æ•°åæ¥æ˜¾ç¤ºç»„ä»¶åã€‚å‡½æ•°åå˜äº†ï¼Œæ˜¾ç¤ºçš„è‡ªç„¶ä¹Ÿå°±å˜äº†ã€‚</p>
<h4 data-id="heading-2">å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒ</h4>
<p><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>React DevTools æ˜¾ç¤ºï¼š<code>NavigationProvider</code> âœ…</p>
<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼ˆå‹ç¼©åï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,{<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>React DevTools æ˜¾ç¤ºï¼š<code>pv</code> âŒ</p>
<h3 data-id="heading-3">ä»å¼€å‘åˆ°ç”Ÿäº§ï¼šä»£ç éƒ½ç»å†äº†ä»€ä¹ˆ</h3>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆä¼šè¢«å‹ç¼©ï¼Œå…ˆè¦çŸ¥é“æˆ‘ä»¬å†™çš„ä»£ç æ˜¯æ€ä¹ˆå˜æˆç”¨æˆ·è®¿é—®çš„çº¿ä¸Šä»£ç çš„ã€‚</p>
<h4 data-id="heading-4">å¼€å‘æ¨¡å¼ï¼šåŸæ±åŸå‘³</h4>
<p>ç”¨è„šæ‰‹æ¶ï¼ˆCreate React Appã€Viteï¼‰å¼€å‘æ—¶ï¼Œå¯åŠ¨çš„æ˜¯<strong>å¼€å‘æœåŠ¡å™¨</strong>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm run dev
<span class="hljs-comment"># æˆ–</span>
npm start
</code></pre>
<p>è¿™æ—¶å€™ï¼š</p>
<ul>
<li>ä»£ç å®æ—¶ç¼–è¯‘ï¼Œä½†<strong>ä¸å‹ç¼©</strong></li>
<li>ä¿ç•™å®Œæ•´çš„å˜é‡åã€å‡½æ•°å</li>
<li>åŒ…å« Source Mapsï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰</li>
<li>æœ‰çƒ­æ›´æ–°ï¼ˆHot Module Replacementï¼‰</li>
</ul>
<p>æµè§ˆå™¨åŠ è½½çš„ä»£ç é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// http://localhost:3000/src/App.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>æ¸…æ¸…æ¥šæ¥šï¼ŒReact DevTools è‡ªç„¶èƒ½è¯»åˆ° <code>NavigationProvider</code>ã€‚</p>
<h4 data-id="heading-5">ç”Ÿäº§æ„å»ºï¼šå…¨é¢ä¼˜åŒ–</h4>
<p>å‡†å¤‡éƒ¨ç½²ä¸Šçº¿æ—¶ï¼Œè¦æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run build
</code></pre>
<p>è¿™ä¸€æ­¥ä¼šè°ƒç”¨æ‰“åŒ…å·¥å…·ï¼ˆWebpackã€Viteã€Rollupï¼‰ï¼Œåšä¸€ç³»åˆ—ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æºä»£ç &lt;br/&gt;å¤šä¸ª .jsx æ–‡ä»¶] --&gt; B[ç¼–è¯‘&lt;br/&gt;JSX â†’ JS]
    B --&gt; C[æ‰“åŒ…&lt;br/&gt;åˆå¹¶æˆå°‘æ•°æ–‡ä»¶]
    C --&gt; D[Tree Shaking&lt;br/&gt;åˆ é™¤æœªä½¿ç”¨ä»£ç ]
    D --&gt; E[å‹ç¼©&lt;br/&gt;Minification]
    E --&gt; F[ç”Ÿäº§ä»£ç &lt;br/&gt;dist/main.abc123.js]
</code></pre>
<h5 data-id="heading-6">1. ç¼–è¯‘ï¼ˆTranspilationï¼‰</h5>
<p>Babel æŠŠ JSX å’Œç°ä»£ JS è¯­æ³•è½¬æˆæµè§ˆå™¨èƒ½ç†è§£çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æºä»£ç </span>
&lt;<span class="hljs-title class_">Provider</span>&gt;{children}&lt;/<span class="hljs-title class_">Provider</span>&gt;

<span class="hljs-comment">// ç¼–è¯‘å</span>
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Provider</span>, <span class="hljs-literal">null</span>, children)
</code></pre>
<h5 data-id="heading-7">2. æ‰“åŒ…ï¼ˆBundlingï¼‰</h5>
<p>æŠŠå‡ åä¸Šç™¾ä¸ªæ–‡ä»¶åˆå¹¶æˆå‡ ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-css" lang="css">å¼€å‘ç¯å¢ƒï¼š
â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navigation<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.jsx</span>
â”‚   â””â”€â”€ <span class="hljs-selector-tag">Footer</span><span class="hljs-selector-class">.jsx</span>
â””â”€â”€ utils/
    â””â”€â”€ helpers<span class="hljs-selector-class">.js</span>

ç”Ÿäº§ç¯å¢ƒï¼š
â””â”€â”€ dist/
    â””â”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.abc123</span><span class="hljs-selector-class">.js</span>  â† å…¨éƒ¨åˆå¹¶
</code></pre>
<h5 data-id="heading-8">3. Tree Shaking</h5>
<p>åˆ é™¤æ²¡ç”¨åˆ°çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usedFunction</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unusedFunction</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }  <span class="hljs-comment">// è¿™ä¸ªæ²¡è¢« import</span>

<span class="hljs-comment">// æ‰“åŒ…åï¼šunusedFunction è¢«åˆ é™¤</span>
</code></pre>
<h5 data-id="heading-9">4. å‹ç¼©ï¼ˆMinificationï¼‰</h5>
<p><strong>è¿™å°±æ˜¯å¯¼è‡´ç»„ä»¶åä¹±ç çš„å…³é”®æ­¥éª¤ã€‚</strong></p>
<p>å‹ç¼©å™¨ï¼ˆTerserã€esbuildï¼‰æŠŠä»£ç ä½“ç§¯å‹åˆ°æœ€å°ï¼š</p>
<ul>
<li>åˆ é™¤ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Š</li>
<li>ç¼©çŸ­å˜é‡åå’Œå‡½æ•°å</li>
<li>ç®€åŒ–ä»£ç é€»è¾‘</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,<span class="hljs-literal">null</span>,e)}
</code></pre>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆç”Ÿäº§ç¯å¢ƒè¦è¿™ä¹ˆåš</h4>
<p><strong>ä¸€ä¸ªå­—ï¼šå¿«ã€‚</strong></p>
<p>ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼š</p>
<ol>
<li>æµè§ˆå™¨ä»æœåŠ¡å™¨ä¸‹è½½ JS æ–‡ä»¶</li>
<li>è§£æä»£ç </li>
<li>æ‰§è¡Œä»£ç </li>
</ol>
<p><strong>å¦‚æœä¸å‹ç¼©</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªä¸­å‹ React åº”ç”¨ï¼ŒåŸå§‹ä»£ç å¯èƒ½ 2-3 MB</li>
<li>åœ¨ 3G ç½‘ç»œä¸‹ï¼Œä¸‹è½½è¦ 20-30 ç§’</li>
<li>ç”¨æˆ·çœ‹åˆ°ç™½å±ï¼Œæ—©è·‘äº†</li>
</ul>
<p><strong>å‹ç¼©å</strong>ï¼š</p>
<ul>
<li>ä»£ç ä½“ç§¯é™åˆ° 500-800 KB</li>
<li>Gzip å‹ç¼©åå¯èƒ½åªæœ‰ 200 KB</li>
<li>ä¸‹è½½æ—¶é—´ç¼©çŸ­åˆ° 3-5 ç§’</li>
</ul>
<p>ä½“ç§¯å·®å¼‚è¿™ä¹ˆå¤§ï¼Œä¸»è¦å› ä¸ºï¼š</p>
<ul>
<li><strong>ç©ºæ ¼å’Œæ¢è¡Œ</strong>ï¼šåŸå§‹ä»£ç ä¸ºäº†å¯è¯»æ€§ï¼Œå¤§é‡ä½¿ç”¨ç¼©è¿›å’Œæ¢è¡Œï¼ˆå  20-30%ï¼‰</li>
<li><strong>å˜é‡åå’Œå‡½æ•°å</strong>ï¼š<code>NavigationProvider</code> â†’ <code>pv</code> è¿™ç§å‹ç¼©ï¼ˆå  30-40%ï¼‰</li>
<li><strong>æ³¨é‡Š</strong>ï¼šå¼€å‘æ—¶çš„æ³¨é‡Šåœ¨ç”Ÿäº§ç¯å¢ƒå®Œå…¨åˆ é™¤ï¼ˆå  5-10%ï¼‰</li>
<li><strong>æœªä½¿ç”¨çš„ä»£ç </strong>ï¼šTree Shaking åˆ é™¤ï¼ˆå  10-20%ï¼‰</li>
</ul>
<p>æ‰€ä»¥ï¼Œ<strong>å‹ç¼©æ˜¯ç”Ÿäº§ç¯å¢ƒçš„å¿…å¤‡æ­¥éª¤</strong>ï¼Œä¸æ˜¯å¯é€‰é¡¹ã€‚</p>
<h4 data-id="heading-11">å‹ç¼©åœ¨å“ªä¸ªé˜¶æ®µ</h4>
<p>åœ¨ Webpack æˆ– Vite çš„é…ç½®ä¸­ï¼Œå‹ç¼©æ˜¯æœ€åä¸€æ­¥ï¼š</p>
<p><strong>Webpack é…ç½®</strong>ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,  <span class="hljs-comment">// è‡ªåŠ¨å¯ç”¨å‹ç¼©</span>

    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¼€å¯å‹ç¼©</span>
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>(),  <span class="hljs-comment">// ä½¿ç”¨ Terser å‹ç¼©</span>
        ],
    },
};
</code></pre>
<p><strong>Vite é…ç½®</strong>ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,  <span class="hljs-comment">// ä½¿ç”¨ Terser å‹ç¼©ï¼ˆé»˜è®¤æ˜¯ esbuildï¼‰</span>
    },
};
</code></pre>
<p>å½“ä½ æ‰§è¡Œ <code>npm run build</code>ï¼Œæ‰“åŒ…å·¥å…·ä¼šï¼š</p>
<ol>
<li>ç¼–è¯‘æ‰€æœ‰æºæ–‡ä»¶</li>
<li>åˆå¹¶æˆå‡ ä¸ªå¤§æ–‡ä»¶</li>
<li><strong>æœ€åè°ƒç”¨å‹ç¼©å™¨å¤„ç†</strong></li>
<li>è¾“å‡ºåˆ° <code>dist/</code> ç›®å½•</li>
</ol>
<p>å‹ç¼©æ˜¯<strong>æ„å»ºæµç¨‹çš„æœ€åä¸€æ­¥</strong>ï¼Œäº§å‡ºçš„å°±æ˜¯ä¸Šçº¿çš„ä»£ç ã€‚</p>
<h4 data-id="heading-12">å¼€å‘å’Œç”Ÿäº§çš„ç¯å¢ƒåŒºåˆ«</h4>













































<table><thead><tr><th>ç‰¹æ€§</th><th>å¼€å‘ç¯å¢ƒ</th><th>ç”Ÿäº§ç¯å¢ƒ</th></tr></thead><tbody><tr><td>å‘½ä»¤</td><td><code>npm run dev</code></td><td><code>npm run build</code></td></tr><tr><td>ä»£ç å‹ç¼©</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å˜é‡å</td><td><code>NavigationProvider</code></td><td><code>pv</code></td></tr><tr><td>æ–‡ä»¶ä½“ç§¯</td><td>2-3 MB</td><td>500-800 KB</td></tr><tr><td>Source Maps</td><td>âœ… å®Œæ•´</td><td>âŒ æˆ–éšè—</td></tr><tr><td>è°ƒè¯•ä½“éªŒ</td><td>è½»æ¾</td><td>å›°éš¾</td></tr><tr><td>åŠ è½½é€Ÿåº¦</td><td>æ…¢ï¼ˆæœ¬åœ°ä¸careï¼‰</td><td>å¿«ï¼ˆå…³é”®æŒ‡æ ‡ï¼‰</td></tr></tbody></table>
<p>ç°åœ¨æ˜ç™½äº†ï¼š<strong>å¼€å‘æ—¶ä½ å†™çš„æ¸…æ™°ä»£ç ï¼Œåˆ°ç”¨æˆ·é‚£é‡Œå·²ç»é¢ç›®å…¨é</strong>ã€‚</p>
<p>è€Œç»„ä»¶åä¹±ç ï¼Œå°±æ˜¯è¿™ä¸ª"é¢ç›®å…¨é"çš„å‰¯ä½œç”¨ã€‚</p>
<h3 data-id="heading-13">ä¸ºä»€ä¹ˆè¦å‹ç¼©å‡½æ•°å</h3>
<p>ç†è§£äº†èƒŒæ™¯ï¼Œå†çœ‹å…·ä½“çš„å‹ç¼©é€»è¾‘å°±æ¸…æ¥šäº†ã€‚</p>
<p><strong>å‡å°æ–‡ä»¶ä½“ç§¯ï¼ŒåŠ å¿«åŠ è½½é€Ÿåº¦ã€‚</strong></p>
<p>å‹ç¼©å™¨åšçš„äº‹ï¼š</p>
<ol>
<li><strong>åˆ é™¤ç©ºæ ¼å’Œæ¢è¡Œ</strong></li>
<li><strong>ç¼©çŸ­å˜é‡å</strong>ï¼š<code>userName</code> â†’ <code>u</code></li>
<li><strong>ç¼©çŸ­å‡½æ•°å</strong>ï¼š<code>NavigationProvider</code> â†’ <code>pv</code></li>
<li><strong>ç®€åŒ–ä»£ç ç»“æ„</strong></li>
</ol>
<p>çœ‹ä¸ªçœŸå®ä¾‹å­ï¼š</p>
<p><strong>å‹ç¼©å‰</strong>ï¼ˆ15 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; {
        <span class="hljs-title function_">setLocation</span>(path);
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Context.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Context.Provider</span>&gt;</span></span>
    );
}
</code></pre>
<p><strong>å‹ç¼©å</strong>ï¼ˆ4 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Context</span>.<span class="hljs-property">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:t,<span class="hljs-attr">navigate</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">n</span>(r)},<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>ä½“ç§¯ç›´æ¥ç æ‰ 70%ã€‚</p>
<p>å…¶ä¸­ <code>NavigationProvider</code> â†’ <code>pv</code> å°±çœäº† 17 ä¸ªå­—ç¬¦ã€‚æ•´ä¸ªé¡¹ç›®å‡ ç™¾ä¸ªå‡½æ•°ï¼ŒåŠ èµ·æ¥å°±æ˜¯å‡ å KB çš„å·®å¼‚ã€‚</p>
<h3 data-id="heading-14">å‹ç¼©è¿‡ç¨‹è¯¦è§£</h3>
<p>å‹ç¼©ä¸æ˜¯ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œè€Œæ˜¯ç»è¿‡å¤šä¸ªé˜¶æ®µçš„ä»£ç è½¬æ¢ã€‚</p>
<h4 data-id="heading-15">å®Œæ•´çš„æ„å»ºæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æºä»£ç  JSX] --&gt; B[Babel è½¬è¯‘]
    B --&gt; C[æ‰“åŒ…åˆå¹¶]
    C --&gt; D[Terser å‹ç¼©]
    D --&gt; E[ç”Ÿäº§ä»£ç ]
</code></pre>
<ol>
<li><strong>Babel è½¬è¯‘</strong>ï¼šæŠŠ JSX è½¬æˆæ ‡å‡† JavaScript</li>
<li><strong>æ‰“åŒ…åˆå¹¶</strong>ï¼šå¤šä¸ªæ–‡ä»¶åˆæˆä¸€ä¸ªæ–‡ä»¶</li>
<li><strong>Terser å‹ç¼©</strong>ï¼šçœŸæ­£çš„å‹ç¼©å‘ç”Ÿåœ¨è¿™ä¸€æ­¥</li>
<li><strong>è¾“å‡º</strong>ï¼šæœ€ç»ˆçš„ç”Ÿäº§ä»£ç </li>
</ol>
<p>é‡ç‚¹çœ‹ç¬¬ä¸‰æ­¥ï¼Œå‹ç¼©å™¨å†…éƒ¨å…¶å®ä¹Ÿåˆ†å¥½å‡ ä¸ªé˜¶æ®µã€‚</p>
<h4 data-id="heading-16">Terser çš„å‹ç¼©é˜¶æ®µ</h4>
<h5 data-id="heading-17">é˜¶æ®µ 1ï¼šè§£æï¼ˆParseï¼‰</h5>
<p>æŠŠä»£ç è½¬æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// è½¬æˆ ASTï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
{
    <span class="hljs-attr">type</span>: <span class="hljs-string">"FunctionDeclaration"</span>,
    <span class="hljs-attr">id</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"Identifier"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"NavigationProvider"</span> },
    <span class="hljs-attr">params</span>: [
        {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"ObjectPattern"</span>,
            <span class="hljs-attr">properties</span>: [{ <span class="hljs-attr">key</span>: <span class="hljs-string">"children"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"children"</span> }]
        }
    ],
    <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"ReturnStatement"</span>,
        <span class="hljs-attr">argument</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"JSXElement"</span>, ... }
    }
}
</code></pre>
<p>AST å°±æ˜¯ä»£ç çš„æ ‘çŠ¶ç»“æ„è¡¨ç¤ºï¼Œæ–¹ä¾¿åç»­åˆ†æå’Œä¿®æ”¹ã€‚</p>
<h5 data-id="heading-18">é˜¶æ®µ 2ï¼šåˆ†æï¼ˆAnalyzeï¼‰</h5>
<p><strong>2.1 ä½œç”¨åŸŸåˆ†æ</strong></p>
<p>æ‰¾å‡ºå“ªäº›å˜é‡åå¯ä»¥æ”¹ï¼Œå“ªäº›ä¸èƒ½æ”¹ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);  <span class="hljs-comment">// å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-variable language_">window</span>.<span class="hljs-property">NavigationProvider</span> = <span class="hljs-title class_">NavigationProvider</span>;  <span class="hljs-comment">// å…¨å±€å¼•ç”¨ï¼Œä¸èƒ½æ”¹</span>
</code></pre>
<p>è§„åˆ™ï¼š</p>
<ul>
<li><strong>å¯ä»¥æ”¹</strong>ï¼šå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ã€å‡½æ•°åï¼ˆå¦‚æœæ²¡è¢«å¤–éƒ¨å¼•ç”¨ï¼‰</li>
<li><strong>ä¸èƒ½æ”¹</strong>ï¼šå…¨å±€å˜é‡ã€å¯¹è±¡å±æ€§åã€è¢« <code>eval()</code> ä½¿ç”¨çš„å˜é‡</li>
</ul>
<p><strong>2.2 å¼•ç”¨è®¡æ•°</strong></p>
<p>ç»Ÿè®¡æ¯ä¸ªæ ‡è¯†ç¬¦å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå†³å®šæ˜¯å¦å€¼å¾—å‹ç¼©ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {  <span class="hljs-comment">// NavigationProvider å‡ºç° 1 æ¬¡</span>
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);          <span class="hljs-comment">// location å‡ºç° 1 æ¬¡</span>
    <span class="hljs-keyword">const</span> currentLocation = location;        <span class="hljs-comment">// location å‡ºç° 2 æ¬¡</span>
    <span class="hljs-keyword">return</span> currentLocation;                  <span class="hljs-comment">// currentLocation å‡ºç° 1 æ¬¡</span>
}
</code></pre>
<p>å¦‚æœä¸€ä¸ªå˜é‡åªç”¨äº† 1 æ¬¡ï¼Œæ”¹æˆçŸ­åç§°å¯èƒ½ä¸åˆ’ç®—ï¼ˆæ¯”å¦‚ <code>location</code> â†’ <code>a</code> åªçœ 7 ä¸ªå­—ç¬¦ï¼‰ã€‚</p>
<p><strong>2.3 ä¾èµ–åˆ†æ</strong></p>
<p>æ‰¾å‡ºå˜é‡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œé¿å…å‘½åå†²çªã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> a = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> b = <span class="hljs-number">2</span>;  <span class="hljs-comment">// b å¯ä»¥é‡å‘½åä¸º aï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä½œç”¨åŸŸ</span>
        <span class="hljs-keyword">return</span> b;
    }
    <span class="hljs-keyword">return</span> a;
}
</code></pre>
<h5 data-id="heading-19">é˜¶æ®µ 3ï¼šè½¬æ¢ï¼ˆTransformï¼‰</h5>
<p>è¿™æ˜¯çœŸæ­£åšå‹ç¼©çš„é˜¶æ®µï¼Œåˆ†å¤šä¸ªæ­¥éª¤ã€‚</p>
<p><strong>3.1 åˆ é™¤æ­»ä»£ç ï¼ˆDead Code Eliminationï¼‰</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEBUG</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'debug'</span>);  <span class="hljs-comment">// è¿™æ®µæ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p><strong>3.2 å¸¸é‡æŠ˜å ï¼ˆConstant Foldingï¼‰</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_COUNT</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOUBLED</span> = <span class="hljs-variable constant_">MAX_COUNT</span> * <span class="hljs-number">2</span>;
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-variable constant_">DOUBLED</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">20</span>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>ç›´æ¥ç®—å‡ºç»“æœï¼Œå‡å°‘è¿è¡Œæ—¶è®¡ç®—ã€‚</p>
<p><strong>3.3 è¡¨è¾¾å¼ç®€åŒ–</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">if</span> (isActive === <span class="hljs-literal">true</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// å‹ç¼©å</span>
<span class="hljs-keyword">if</span> (isActive) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p><strong>3.4 å˜é‡åå‹ç¼©ï¼ˆMangleï¼‰</strong></p>
<p>è¿™æ˜¯æˆ‘ä»¬å…³å¿ƒçš„é‡ç‚¹ã€‚</p>
<p>å‹ç¼©å™¨éå† ASTï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™æ›¿æ¢æ ‡è¯†ç¬¦ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‡½æ•°å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children }</span>) {  <span class="hljs-comment">// NavigationProvider â†’ pv</span>
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šå‚æ•°å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children: e }</span>) {  <span class="hljs-comment">// children â†’ e</span>
    <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">path</span>) =&gt; <span class="hljs-title function_">setLocation</span>(path);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location</span>, <span class="hljs-attr">navigate</span> }}&gt;</span>{e}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç¬¬ä¸‰è½®ï¼šå±€éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">{ children: e }</span>) {
    <span class="hljs-keyword">const</span> [t, n] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);  <span class="hljs-comment">// location â†’ t, setLocation â†’ n</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">r</span> = (<span class="hljs-params">o</span>) =&gt; <span class="hljs-title function_">n</span>(o);         <span class="hljs-comment">// navigate â†’ r, path â†’ o</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">location:</span> <span class="hljs-attr">t</span>, <span class="hljs-attr">navigate:</span> <span class="hljs-attr">r</span> }}&gt;</span>{e}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
}
</code></pre>
<p>æ³¨æ„ï¼š<strong>å¯¹è±¡å±æ€§åä¸ä¼šæ”¹</strong>ï¼ˆ<code>location:</code>ã€<code>navigate:</code> ä¿æŒåŸæ ·ï¼‰ï¼Œå› ä¸ºè¿™äº›æ˜¯å¯¹å¤–çš„æ¥å£ã€‚</p>
<p><strong>3.5 ä½œç”¨åŸŸæå‡ï¼ˆScope Hoistingï¼‰</strong></p>
<p>æŠŠå¤šä¸ªæ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªä½œç”¨åŸŸï¼Œå‡å°‘é—­åŒ…å’Œå‡½æ•°è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å‹ç¼©å‰ï¼ˆä¸¤ä¸ªæ–‡ä»¶ï¼‰</span>
<span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date</span>) { <span class="hljs-keyword">return</span> date.<span class="hljs-title function_">toString</span>(); }

<span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">import</span> { formatDate } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">formatDate</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()));

<span class="hljs-comment">// å‹ç¼©åï¼ˆåˆå¹¶ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">b</span>) { <span class="hljs-keyword">return</span> b.<span class="hljs-title function_">toString</span>(); }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">a</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()));
</code></pre>
<h5 data-id="heading-20">é˜¶æ®µ 4ï¼šç”Ÿæˆï¼ˆGenerateï¼‰</h5>
<p>æŠŠä¿®æ”¹åçš„ AST è½¬å›ä»£ç å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// AST è½¬å›ä»£ç </span>
{
    <span class="hljs-attr">type</span>: <span class="hljs-string">"FunctionDeclaration"</span>,
    <span class="hljs-attr">id</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"pv"</span> },  <span class="hljs-comment">// å·²è¢«ä¿®æ”¹</span>
    <span class="hljs-attr">params</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"e"</span> }],
    <span class="hljs-attr">body</span>: { ... }
}

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">pv</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span>[t,n]=<span class="hljs-title function_">useState</span>(<span class="hljs-string">"/"</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">jsx</span>(<span class="hljs-title class_">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:t,<span class="hljs-attr">navigate</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">n</span>(r)},<span class="hljs-attr">children</span>:e})}
</code></pre>
<p>åŒæ—¶åˆ é™¤æ‰€æœ‰ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Šã€‚</p>
<h4 data-id="heading-21">å‘½åè§„åˆ™è¯¦è§£</h4>
<p>å‹ç¼©å™¨åˆ†é…çŸ­åç§°æ—¶çš„ä¼˜å…ˆçº§ï¼š</p>
<h5 data-id="heading-22">1. å•å­—æ¯ï¼ˆ52 ä¸ªï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">a</span>, <span class="hljs-selector-tag">b</span>, c, ..., z
<span class="hljs-selector-tag">A</span>, <span class="hljs-selector-tag">B</span>, C, ..., Z
</code></pre>
<p>æœ€å¸¸ç”¨çš„æ ‡è¯†ç¬¦ä¼šä¼˜å…ˆåˆ†é…è¿™äº›ã€‚</p>
<h5 data-id="heading-23">2. ç¾å…ƒç¬¦å·å’Œä¸‹åˆ’çº¿ï¼ˆ104 ä¸ªï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$a</span>, <span class="hljs-variable">$b</span>, ..., <span class="hljs-variable">$Z</span>
_a, _b, ..., _Z
</code></pre>
<p>å•å­—æ¯ç”¨å®Œå°±åŠ å‰ç¼€ã€‚</p>
<h5 data-id="heading-24">3. ä¸¤ä¸ªå­—æ¯ï¼ˆ2704 ä¸ªï¼‰</h5>
<pre><code class="hljs">aa, ab, ac, ..., ZZ
</code></pre>
<p>å†ä¸å¤Ÿå°±ç”¨ä¸¤ä¸ªå­—æ¯ç»„åˆã€‚</p>
<h5 data-id="heading-25">4. ç‰¹æ®Šç»„åˆ</h5>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$,</span> _, <span class="hljs-variable">$$</span>, <span class="hljs-variable">$_</span>, ...
</code></pre>
<p>ç„¶åæ˜¯å„ç§ç‰¹æ®Šå­—ç¬¦ç»„åˆã€‚</p>
<p>æ‰€ä»¥ä½ çœ‹åˆ°çš„ <code>pv</code>ã€<code>$r</code>ã€<code>Jt</code> éƒ½æ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºåˆ†é…çš„ã€‚</p>
<h4 data-id="heading-26">çœŸå®ä¾‹å­å¯¹æ¯”</h4>
<p>æ‹¿ä¸€æ®µå®Œæ•´çš„ä»£ç çœ‹çœ‹æ¯ä¸ªé˜¶æ®µçš„å˜åŒ–ï¼š</p>
<p><strong>åŸå§‹ä»£ç </strong>ï¼ˆ150 è¡Œï¼Œ5 KBï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">NavigationContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [currentLocation, setCurrentLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">newPath</span>) =&gt; {
        <span class="hljs-keyword">if</span> (newPath !== currentLocation) {
            <span class="hljs-title function_">setCurrentLocation</span>(newPath);
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">''</span>, newPath);
        }
    };

    <span class="hljs-keyword">const</span> value = {
        <span class="hljs-attr">location</span>: currentLocation,
        <span class="hljs-attr">navigate</span>: navigate
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavigationContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">NavigationContext.Provider</span>&gt;</span></span>
    );
}
</code></pre>
<p><strong>ç»è¿‡ Babel</strong>ï¼ˆè½¬ JSXï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">NavigationContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{ children }</span>) {
    <span class="hljs-keyword">const</span> [currentLocation, setCurrentLocation] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'/'</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigate</span> = (<span class="hljs-params">newPath</span>) =&gt; {
        <span class="hljs-keyword">if</span> (newPath !== currentLocation) {
            <span class="hljs-title function_">setCurrentLocation</span>(newPath);
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">''</span>, newPath);
        }
    };

    <span class="hljs-keyword">const</span> value = {
        <span class="hljs-attr">location</span>: currentLocation,
        <span class="hljs-attr">navigate</span>: navigate
    };

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(
        <span class="hljs-title class_">NavigationContext</span>.<span class="hljs-property">Provider</span>,
        { <span class="hljs-attr">value</span>: value },
        children
    );
}
</code></pre>
<p><strong>ç»è¿‡ Terser åˆ†æ</strong>ï¼ˆå†…éƒ¨è®°å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ä½œç”¨åŸŸåˆ†æï¼š
<span class="hljs-deletion">- NavigationContext: å…¨å±€å¯¼å‡ºï¼Œä¸èƒ½æ”¹</span>
<span class="hljs-deletion">- NavigationProvider: å…¨å±€å¯¼å‡ºï¼Œä¸èƒ½æ”¹</span>
<span class="hljs-deletion">- children: å‡½æ•°å‚æ•°ï¼Œå¯ä»¥æ”¹ â†’ e</span>
<span class="hljs-deletion">- currentLocation: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ t</span>
<span class="hljs-deletion">- setCurrentLocation: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ n</span>
<span class="hljs-deletion">- navigate: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ r</span>
<span class="hljs-deletion">- newPath: å‡½æ•°å‚æ•°ï¼Œå¯ä»¥æ”¹ â†’ o</span>
<span class="hljs-deletion">- value: å±€éƒ¨å˜é‡ï¼Œå¯ä»¥æ”¹ â†’ aï¼ˆä½†ä¼šè¢«å†…è”ä¼˜åŒ–æ‰ï¼‰</span>
</code></pre>
<p><strong>ç»è¿‡ Terser å‹ç¼©</strong>ï¼ˆæœ€ç»ˆäº§ç‰©ï¼Œ1.5 KBï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>{useState <span class="hljs-keyword">as</span> t}<span class="hljs-keyword">from</span><span class="hljs-string">"react"</span>;<span class="hljs-keyword">const</span> n=<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NavigationProvider</span>(<span class="hljs-params">{children:e}</span>){<span class="hljs-keyword">const</span>[r,o]=<span class="hljs-title function_">t</span>(<span class="hljs-string">"/"</span>),c=<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>{i!==r&amp;&amp;(<span class="hljs-title function_">o</span>(i),<span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({},<span class="hljs-string">""</span>,i))};<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(n.<span class="hljs-property">Provider</span>,{<span class="hljs-attr">value</span>:{<span class="hljs-attr">location</span>:r,<span class="hljs-attr">navigate</span>:c}},e)}
</code></pre>
<p><strong>ä½“ç§¯å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li>åŸå§‹ä»£ç ï¼š5 KB</li>
<li>Babel è½¬è¯‘åï¼š5.2 KBï¼ˆJSX è½¬æ¢ç•¥æœ‰å¢åŠ ï¼‰</li>
<li>Terser å‹ç¼©åï¼š1.5 KBï¼ˆå‡å°‘ 70%ï¼‰</li>
</ul>
<p>å…³é”®å˜åŒ–ï¼š</p>
<ol>
<li>åˆ é™¤æ‰€æœ‰ç©ºæ ¼å’Œæ¢è¡Œï¼š<code>5KB â†’ 4KB</code></li>
<li>å˜é‡åå‹ç¼©ï¼š<code>4KB â†’ 2KB</code></li>
<li>è¡¨è¾¾å¼ç®€åŒ–å’Œå†…è”ï¼š<code>2KB â†’ 1.5KB</code></li>
</ol>
<h4 data-id="heading-27">ä¸ºä»€ä¹ˆè¿™ä¹ˆæ¿€è¿›</h4>
<p>ç°ä»£ Web åº”ç”¨åŠ¨è¾„å‡ ç™¾ä¸ªç»„ä»¶ï¼Œä¸Šåƒä¸ªå‡½æ•°ã€‚</p>
<p>å¦‚æœä¸å‹ç¼©å‡½æ•°åå’Œå˜é‡åï¼š</p>
<ul>
<li>å¹³å‡æ¯ä¸ªå‡½æ•°å 15 å­—ç¬¦</li>
<li>1000 ä¸ªå‡½æ•° = 15KB ä»…ç”¨äºå‘½å</li>
<li>åŠ ä¸Šå˜é‡åï¼Œæ€»å…±å¯èƒ½ 50KB+</li>
</ul>
<p>50KB åœ¨ 3G ç½‘ç»œä¸‹ï¼Œå¤šåŠ è½½ 3-5 ç§’ã€‚</p>
<p>æ‰€ä»¥å‹ç¼©å™¨é»˜è®¤éå¸¸æ¿€è¿›ï¼Œèƒ½å‹ç¼©çš„å…¨å‹ç¼©ã€‚</p>
<h3 data-id="heading-28">èƒŒåçš„åŸç†</h3>
<h4 data-id="heading-29">å‡½æ•°åæ˜¯æ€ä¹ˆè¢«æ›¿æ¢çš„</h4>
<p>å‹ç¼©å™¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ˜ å°„è¡¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">åŸå§‹åç§° â†’ å‹ç¼©ååç§°
NavigationProvider â†’ pv
LocationProvider â†’ <span class="hljs-variable">$r</span>
DialogPortal â†’ Jt
Link â†’ vv
</code></pre>
<p>è§„åˆ™å¾ˆç®€å•ï¼š</p>
<ol>
<li>æŒ‰å‡ºç°é¡ºåºåˆ†é…çŸ­åç§°</li>
<li>ä¼˜å…ˆç”¨å•å­—æ¯ï¼ˆa-z, A-Zï¼‰</li>
<li>å•å­—æ¯ç”¨å®Œå°±ç”¨ä¸¤ä¸ªå­—æ¯ï¼ˆaa, ab, ...ï¼‰</li>
<li>åŠ ä¸Šç‰¹æ®Šå­—ç¬¦ï¼ˆ$, _ï¼‰å¢åŠ ç»„åˆæ•°</li>
</ol>
<p>æ‰€ä»¥ä½ ä¼šçœ‹åˆ° <code>a</code>ã€<code>$r</code>ã€<code>pv</code>ã€<code>Jt</code> è¿™ç§çœ‹èµ·æ¥æ¯«æ— è§„å¾‹çš„åç§°ã€‚</p>
<h4 data-id="heading-30">React DevTools æ€ä¹ˆçŸ¥é“ç»„ä»¶å</h4>
<p>React DevTools è·å–ç»„ä»¶åçš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è¯»å–ç»„ä»¶] --&gt; B{æœ‰ displayName?}
    B --&gt;|æœ‰| C[æ˜¾ç¤º displayName]
    B --&gt;|æ²¡æœ‰| D{æœ‰å‡½æ•°å?}
    D --&gt;|æœ‰| E[æ˜¾ç¤ºå‡½æ•°å]
    D --&gt;|æ²¡æœ‰| F[æ˜¾ç¤º Anonymous]
</code></pre>
<p>ä¼˜å…ˆçº§ï¼š<code>displayName</code> &gt; <code>å‡½æ•°å</code> &gt; <code>"Anonymous"</code></p>
<p>å¼€å‘ç¯å¢ƒï¼š</p>
<ul>
<li>å‡½æ•°åå®Œæ•´ä¿ç•™ â†’ DevTools è¯»åˆ° <code>NavigationProvider</code></li>
</ul>
<p>ç”Ÿäº§ç¯å¢ƒï¼š</p>
<ul>
<li>å‡½æ•°åè¢«å‹ç¼©æˆ <code>pv</code> â†’ DevTools åªèƒ½è¯»åˆ° <code>pv</code></li>
<li>æ²¡è®¾ç½® <code>displayName</code> â†’ æ²¡æœ‰å¤‡ç”¨æ–¹æ¡ˆ</li>
</ul>
<p>æ‰€ä»¥å°±å‡ºç°äº†å¼€å¤´é‚£å¼ å›¾çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-31">ä¸ºä»€ä¹ˆä¸æ˜¯æ‰€æœ‰ç»„ä»¶éƒ½ä¹±ç </h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œæœ‰äº›ç»„ä»¶åè¿˜æ˜¯æ­£å¸¸çš„ï¼Œæ¯”å¦‚ <code>Link</code>ã€<code>Menu</code>ã€<code>Dialog</code>ã€‚</p>
<p>åŸå› æœ‰ä¸‰ç§ï¼š</p>
<h4 data-id="heading-32">1. ç»„ä»¶è®¾ç½®äº† displayName</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>) =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
<span class="hljs-title class_">MyComponent</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'MyComponent'</span>;
</code></pre>
<p>å‹ç¼©å™¨ä¸ä¼šæ”¹ <code>displayName</code>ï¼ˆå®ƒæ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯æ ‡è¯†ç¬¦ï¼‰ã€‚</p>
<h4 data-id="heading-33">2. ç»„ä»¶æ¥è‡ªç¬¬ä¸‰æ–¹åº“</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dialog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>;
</code></pre>
<p>ç¬¬ä¸‰æ–¹åº“é€šå¸¸ä¼šè®¾ç½® <code>displayName</code>ï¼Œæˆ–è€…é…ç½®äº†ä¿ç•™å‡½æ•°åçš„æ„å»ºé€‰é¡¹ã€‚</p>
<h4 data-id="heading-34">3. åç§°å¤ªçŸ­ï¼Œç¢°å·§æ²¡å˜</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Link</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>å¦‚æœåŸæœ¬å°±å« <code>Link</code>ï¼Œå‹ç¼©åå¯èƒ½è¿˜æ˜¯ <code>Link</code>ï¼ˆ4 ä¸ªå­—ç¬¦ï¼Œä¸ä¸€å®šå€¼å¾—å‹ç¼©ï¼‰ã€‚</p>
<p>ä½†è¿™çº¯é è¿æ°”ï¼Œä¸èƒ½ä¾èµ–ã€‚</p>
<h3 data-id="heading-35">æ€ä¹ˆè§£å†³</h3>
<p>æ ¸å¿ƒæ€è·¯å°±ä¸¤ä¸ªæ–¹å‘ï¼š</p>
<h4 data-id="heading-36">1. å‘Šè¯‰å‹ç¼©å™¨ï¼šåˆ«æ”¹å‡½æ•°å</h4>
<p>Webpack/Vite é…ç½®ä¸­ï¼Œè®¾ç½® Terser é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">terserOptions</span>: {
    <span class="hljs-attr">keep_fnames</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// ä¿ç•™å‡½æ•°å</span>
}
</code></pre>
<p>ä»£ä»·ï¼šåŒ…ä½“ç§¯å¢åŠ  5-10%ã€‚</p>
<h4 data-id="heading-37">2. æ‰‹åŠ¨ç»™ç»„ä»¶åŠ  displayName</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">NavigationProvider</span> = (<span class="hljs-params">{ children }</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
};

<span class="hljs-title class_">NavigationProvider</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'Navigation.Provider'</span>;
</code></pre>
<p>å¥½å¤„ï¼šç²¾ç¡®æ§åˆ¶ï¼Œä½“ç§¯å½±å“å°ã€‚
ä»£ä»·ï¼šè¦æ‰‹åŠ¨ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-38">è¯¥ä¸è¯¥è§£å†³</h3>
<p><strong>å†…éƒ¨ç³»ç»Ÿ/ç®¡ç†åå°</strong>ï¼š</p>
<ul>
<li>è°ƒè¯•éœ€æ±‚é«˜ï¼Œä½“ç§¯ä¸æ•æ„Ÿ</li>
<li>å»ºè®®ä¿ç•™å‡½æ•°åï¼Œè°ƒè¯•ä½“éªŒç›´æ¥æ‹‰æ»¡</li>
</ul>
<p><strong>é¢å‘ç”¨æˆ·çš„äº§å“</strong>ï¼š</p>
<ul>
<li>ä½“ç§¯å½±å“åŠ è½½é€Ÿåº¦ï¼Œè°ƒè¯•ä¸»è¦åœ¨å¼€å‘ç¯å¢ƒ</li>
<li>ä¸ç”¨ç®¡ï¼Œæˆ–è€…åªç»™æ ¸å¿ƒç»„ä»¶åŠ  displayName</li>
</ul>
<p><strong>å¼€æºç»„ä»¶åº“</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è°ƒè¯•éœ€è¦æ¸…æ™°çš„ç»„ä»¶å</li>
<li>å»ºè®®åŠ  displayNameï¼Œæˆ–æ„å»ºæ—¶ä¿ç•™å‡½æ•°å</li>
</ul>
<p>å¤§å¤šæ•°æƒ…å†µï¼Œè¿™ä¸æ˜¯ä¸ªå¿…é¡»è§£å†³çš„é—®é¢˜ã€‚çº¿ä¸Šè°ƒè¯•æœ¬æ¥å°±è¯¥åœ¨ staging ç¯å¢ƒï¼ˆä¿ç•™å‡½æ•°åï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒé æ—¥å¿—å’Œç›‘æ§ã€‚</p>
<h3 data-id="heading-39">ç›¸å…³èµ„æ–™</h3>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fterser.org%2Fdocs%2Foptions%2F" target="_blank" title="https://terser.org/docs/options/" ref="nofollow noopener noreferrer">Terser æ–‡æ¡£</a></strong> - äº†è§£ <code>keep_fnames</code> ç­‰é…ç½®</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-developer-tools%23why-is-my-component-called-_c" target="_blank" title="https://react.dev/learn/react-developer-tools#why-is-my-component-called-_c" ref="nofollow noopener noreferrer">React å®˜æ–¹ï¼šä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶å« <code>_c</code>ï¼Ÿ</a></strong> - React æ–‡æ¡£çš„è§£é‡Š</li>
</ol>
<hr/>
<p>ææ¸…æ¥šåŸç†å°±å¥½åŠäº†ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼ŒçŸ¥é“æ˜¯ä»£ç å‹ç¼©å¯¼è‡´çš„ï¼Œè€Œä¸æ˜¯ React æˆ– DevTools çš„ bugã€‚</p>
<p>è¦ä¸è¦è§£å†³ï¼Œçœ‹å…·ä½“éœ€æ±‚ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¸ç”¨ç®¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€å¾®è°ƒçš„åŠ›é‡ï¼šçœ‹3Bå‚æ•°çš„DeepSeek-OCRå¦‚ä½•èœ•å˜ä¸ºä¸­æ–‡è¯†åˆ«é«˜æ‰‹ï¼é›¶æˆæœ¬å¾®è°ƒä¿å§†çº§æ•™ç¨‹ï¼šç”¨Google Colabå…è´¹GPUï¼Œååˆ†é’Ÿæ‰“é€ ä¸€ä¸ªä¸“å±é¢†åŸŸçš„]]></title>    <link>https://juejin.cn/post/7571648135585742891</link>    <guid>https://juejin.cn/post/7571648135585742891</guid>    <pubDate>2025-11-12T14:39:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571648135585742891" data-draft-id="7571648135585513515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€å¾®è°ƒçš„åŠ›é‡ï¼šçœ‹3Bå‚æ•°çš„DeepSeek-OCRå¦‚ä½•èœ•å˜ä¸ºä¸­æ–‡è¯†åˆ«é«˜æ‰‹ï¼é›¶æˆæœ¬å¾®è°ƒä¿å§†çº§æ•™ç¨‹ï¼šç”¨Google Colabå…è´¹GPUï¼Œååˆ†é’Ÿæ‰“é€ ä¸€ä¸ªä¸“å±é¢†åŸŸçš„"/> <meta itemprop="keywords" content="DeepSeek,OpenAI,AIGC"/> <meta itemprop="datePublished" content="2025-11-12T14:39:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€å¾®è°ƒçš„åŠ›é‡ï¼šçœ‹3Bå‚æ•°çš„DeepSeek-OCRå¦‚ä½•èœ•å˜ä¸ºä¸­æ–‡è¯†åˆ«é«˜æ‰‹ï¼é›¶æˆæœ¬å¾®è°ƒä¿å§†çº§æ•™ç¨‹ï¼šç”¨Google Colabå…è´¹GPUï¼Œååˆ†é’Ÿæ‰“é€ ä¸€ä¸ªä¸“å±é¢†åŸŸçš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:39:58.000Z" title="Wed Nov 12 2025 14:39:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å›°å¢ƒï¼šæƒ³è¦è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼Œä½†å¤§æ¨¡å‹å¤ª"é‡"è·‘ä¸åŠ¨ï¼Œå°æ¨¡å‹åˆç»å¸¸è®¤é”™å­—ï¼Ÿæ¯”å¦‚æŠŠæ¸…æ™°çš„"ä¸€"è¯†åˆ«æˆ"äºŒ"ï¼ŒæŠŠé‡è¦çš„è¡¨æ ¼æ•°æ®æå¾—é¢ç›®å…¨éâ€¦â€¦</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1hPkyB2EJE%2F" target="_blank" title="https://www.bilibili.com/video/BV1hPkyB2EJE/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1hPâ€¦</a></p>
<p>åˆ«æ€¥ï¼Œä»Šå¤©æˆ‘è¦åˆ†äº«ä¸€ä¸ª"åŒ–è…æœ½ä¸ºç¥å¥‡"çš„æ–¹æ³•â€”â€”é€šè¿‡å¾®è°ƒæŠ€æœ¯ï¼Œè®©ä»…æœ‰3Bå‚æ•°çš„DeepSeek-OCRå°æ¨¡å‹ï¼Œå˜æˆè¯†åˆ«å‡†ç¡®ç‡åª²ç¾å¤§æ¨¡å‹çš„"è¯†å­—ä¸“å®¶"ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæ•´ä¸ªè¿‡ç¨‹åªéœ€10åˆ†é’Ÿï¼Œè¿˜èƒ½ç”¨Google Colabçš„å…è´¹GPUå®Œæˆï¼</p>
<h2 data-id="heading-0">ä¸€ã€è®¤è¯†DeepSeek-OCRï¼šå°è€Œç¾çš„OCRæ¨¡å‹</h2>
<p>DeepSeek-OCRæ˜¯ä¸€æ¬¾ä¸“é—¨ç”¨äºæ–‡å­—è¯†åˆ«å’Œæ–‡æ¡£ç†è§£çš„è§†è§‰æ¨¡å‹ï¼Œå‚æ•°é‡åªæœ‰3Bã€‚åˆ«çœ‹å®ƒ"ä¸ªå¤´å°"ï¼Œå®ƒæœ‰å‡ ä¸ªç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è¶…é«˜æ•ˆç‡</strong>ï¼šä½¿ç”¨çš„è§†è§‰tokenæ•°é‡æ˜¯æ–‡æœ¬tokençš„1/10ï¼Œæ„å‘³ç€å¤„ç†é€Ÿåº¦æ¯”ä¼ ç»Ÿæ–‡æœ¬LLMå¿«10å€</li>
<li><strong>ç²¾å‡†è¯†åˆ«</strong>ï¼šåœ¨æ ‡å‡†æµ‹è¯•ä¸­è¾¾åˆ°97%çš„å‡†ç¡®ç‡</li>
<li><strong>åœºæ™¯ä¸°å¯Œ</strong>ï¼šèƒ½å¤„ç†è¡¨æ ¼ã€è®ºæ–‡ã€æ‰‹å†™ä½“ç­‰å¤šç§å¤æ‚åœºæ™¯</li>
<li><strong>ç¡¬ä»¶å‹å¥½</strong>ï¼š3Bçš„å‚æ•°é‡æ„å‘³ç€æ™®é€šæ˜¾å¡ä¹Ÿèƒ½è·‘å¾—åŠ¨</li>
</ul>
<p>ä½†æ˜¯ï¼Œæ­£å¦‚"ä¸‡é‡‘æ²¹"å¾€å¾€å“ªé‡Œéƒ½ä¸ç²¾é€šï¼ŒDeepSeek-OCRä½œä¸ºé€šç”¨æ¨¡å‹ï¼Œå¯¹å„ç§è¯­è¨€éƒ½èƒ½è¯†åˆ«ï¼Œä½†æ¯ç§è¯­è¨€çš„å‡†ç¡®ç‡éƒ½ä¸å¤Ÿç†æƒ³ã€‚è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦å¾®è°ƒçš„åŸå› ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ</h2>
<p>ç”¨æœ€ç®€å•çš„è¯æ¥è¯´ï¼Œ<strong>å¾®è°ƒå°±æ˜¯ç»™æ¨¡å‹"å¼€å°ç¶"</strong> ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªä»€ä¹ˆéƒ½ä¼šçš„å…¨èƒ½åŠ©æ‰‹ï¼ˆé€šç”¨æ¨¡å‹ï¼‰ï¼Œä½†è®©TAåšä¸­æ–‡ä¼šè®¡æŠ¥è¡¨æ—¶ç»å¸¸å‡ºé”™ã€‚è¿™æ—¶ä½ å°±ç»™TAå‡†å¤‡ä¸€æœ¬ä¸“é—¨çš„ä¸­æ–‡ä¼šè®¡æ•™æï¼Œè®©TAé›†ä¸­å­¦ä¹ è¿™ä¸ªé¢†åŸŸçš„çŸ¥è¯†ï¼Œæ…¢æ…¢åœ°ï¼ŒTAå°±ä»"å…¨èƒ½é€‰æ‰‹"å˜æˆäº†"ä¸­æ–‡ä¼šè®¡ä¸“å®¶"ã€‚</p>
<p>å¾®è°ƒçš„è¿‡ç¨‹å°±æ˜¯è¿™æ ·ï¼šç”¨ç‰¹å®šé¢†åŸŸçš„æ•°æ®é›†è®­ç»ƒæ¨¡å‹ï¼Œè®©å®ƒåœ¨ä½ å…³æ³¨çš„åœºæ™¯ä¸‹è¡¨ç°æ›´å‡ºè‰²ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆåœºæ™¯éœ€è¦å¾®è°ƒOCRæ¨¡å‹ï¼Ÿ</h3>
<ol>
<li><strong>ç‰¹å®šè¯­è¨€ä¼˜åŒ–</strong>ï¼šæ¯”å¦‚æå‡ä¸­æ–‡ã€æ³¢æ–¯æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ç­‰ç‰¹å®šè¯­è¨€çš„è¯†åˆ«å‡†ç¡®ç‡</li>
<li><strong>è¡Œä¸šæ–‡æ¡£è¯†åˆ«</strong>ï¼šåŒ»ç–—å¤„æ–¹ã€æ³•å¾‹åˆåŒã€è´¢åŠ¡æŠ¥è¡¨ç­‰ä¸“ä¸šæ–‡æ¡£</li>
<li><strong>ç‰¹æ®Šå­—ä½“è¯†åˆ«</strong>ï¼šæ‰‹å†™ä½“ã€è‰ºæœ¯å­—ã€å¤ç±æ–‡å­—</li>
<li><strong>å¤æ‚ç‰ˆå¼å¤„ç†</strong>ï¼šå¤šæ æ’ç‰ˆã€è¡¨æ ¼åµŒå¥—ã€å›¾æ–‡æ··æ’</li>
<li><strong>ä½è´¨é‡å›¾åƒ</strong>ï¼šæ¨¡ç³Šæ‰«æä»¶ã€æ‹ç…§æ–‡æ¡£ã€æ—§æ¡£æ¡ˆ</li>
</ol>
<h2 data-id="heading-3">ä¸‰ã€å¾®è°ƒæ•ˆæœæœ‰å¤šæƒŠè‰³ï¼Ÿ</h2>
<p>æ ¹æ®Unslothå®˜æ–¹çš„æµ‹è¯•æ•°æ®ï¼Œå¾®è°ƒæ•ˆæœéå¸¸æ˜¾è‘—ï¼š</p>
<h3 data-id="heading-4">æ¡ˆä¾‹ä¸€ï¼šæ³¢æ–¯æ–‡è¯†åˆ«ï¼ˆå®˜æ–¹æ•°æ®ï¼‰</h3>
<p>åœ¨20ä¸‡æ ·æœ¬çš„æ³¢æ–¯æ–‡æ•°æ®é›†ä¸Šå¾®è°ƒåï¼Œä»…ç”¨60ä¸ªè®­ç»ƒæ­¥ï¼ˆæ‰¹é‡å¤§å°ä¸º8ï¼‰ï¼š</p>
<ul>
<li><strong>å­—ç¬¦é”™è¯¯ç‡ï¼ˆCERï¼‰ä»149.07%é™è‡³60.43%</strong></li>
<li><strong>å‡†ç¡®ç‡æå‡äº†88.26%</strong></li>
<li>è¿™æ„å‘³ç€å¾®è°ƒåçš„æ¨¡å‹å‡†ç¡®åº¦æå‡äº†57%</li>
</ul>
<h3 data-id="heading-5">æ¡ˆä¾‹äºŒï¼šä¸­æ–‡è¯†åˆ«ï¼ˆå®æµ‹æ•°æ®ï¼‰</h3>
<p>åœ¨ä¸­æ–‡åœºæ™¯ä¸‹çš„æµ‹è¯•æ˜¾ç¤ºï¼š</p>
<ul>
<li><strong>å¾®è°ƒå‰</strong>ï¼šå°†æ¸…æ™°çš„"ä¸€"è¯†åˆ«æˆ"äºŒ"</li>
<li><strong>å¾®è°ƒå</strong>ï¼šå®Œç¾è¯†åˆ«æ‰€æœ‰æµ‹è¯•æ ·æœ¬</li>
<li><strong>æ•´ä½“é”™è¯¯ç‡ä¸‹é™70%ä»¥ä¸Š</strong></li>
</ul>
<p>è¿™æ ·çš„æå‡ï¼Œå¯¹äºå®é™…åº”ç”¨æ¥è¯´æ˜¯è´¨çš„é£è·ƒã€‚</p>
<h2 data-id="heading-6">å››ã€å¾®è°ƒå®æˆ˜ï¼š10åˆ†é’Ÿå®Œæˆè®­ç»ƒ</h2>
<p>æ•´ä¸ªå¾®è°ƒæµç¨‹æ¯”ä½ æƒ³è±¡çš„ç®€å•å¾—å¤šï¼Œæ ¸å¿ƒæ­¥éª¤åªæœ‰ä¸‰æ­¥ï¼š</p>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®é›†ï¼ˆ5åˆ†é’Ÿï¼‰</h3>
<p>ä½ éœ€è¦å‡†å¤‡ä¸¤ç±»æ•°æ®ï¼š</p>
<ol>
<li><strong>å›¾åƒæ–‡ä»¶</strong>ï¼šåŒ…å«éœ€è¦è¯†åˆ«çš„æ–‡å­—å›¾ç‰‡</li>
<li><strong>æ ‡æ³¨æ–‡æœ¬</strong>ï¼šå›¾åƒå¯¹åº”çš„æ­£ç¡®æ–‡å­—å†…å®¹</li>
</ol>
<p>æ•°æ®é›†æ ¼å¼å¾ˆç®€å•ï¼Œå°±æ˜¯"å›¾åƒ-æ–‡æœ¬"å¯¹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å›¾åƒè·¯å¾„: images/doc001.jpg</span>
<span class="hljs-section">å¯¹åº”æ–‡æœ¬: è¿™æ˜¯å›¾åƒä¸­çš„å®Œæ•´æ–‡å­—å†…å®¹ï¼ŒåŒ…æ‹¬æ ‡ç‚¹ç¬¦å·ã€‚</span>
</code></pre>
<p><strong>æ•°æ®é›†æ¥æºï¼š</strong></p>
<ul>
<li><strong>é€šç”¨åœºæ™¯</strong>ï¼šå¯ä»¥ä½¿ç”¨Hugging Faceä¸Šå¼€æºçš„é«˜è´¨é‡ä¸­æ–‡OCRæ•°æ®é›†</li>
<li><strong>ç‰¹å®šåœºæ™¯</strong>ï¼šè‡ªå·±åˆ¶ä½œæ•°æ®é›†ï¼Œå‡†å¤‡10-1000ä¸ªæ ·æœ¬å³å¯çœ‹åˆ°æ•ˆæœ</li>
</ul>
<p><strong>åˆ¶ä½œè‡ªå·±çš„æ•°æ®é›†ï¼š</strong> ä½¿ç”¨æä¾›çš„Pythonè„šæœ¬ï¼Œåªéœ€è¿è¡Œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">python create_dataset.py <span class="hljs-keyword">data</span>.txt output.parquet
</code></pre>
<p>è„šæœ¬ä¼šè‡ªåŠ¨å°†ä½ çš„å›¾åƒå’Œæ–‡æœ¬è½¬æ¢æˆæ ‡å‡†çš„è®­ç»ƒæ ¼å¼ã€‚</p>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå¹¶å¼€å§‹è®­ç»ƒï¼ˆ2åˆ†é’Ÿï¼‰</h3>
<ol>
<li>æ‰“å¼€Google Colabï¼Œé€‰æ‹©å…è´¹çš„T4 GPU</li>
<li>è¿è¡ŒUnslothæä¾›çš„å¾®è°ƒè„šæœ¬</li>
<li>å°†é»˜è®¤æ•°æ®é›†æ›¿æ¢æˆä½ çš„ä¸­æ–‡æ•°æ®é›†</li>
<li>ç‚¹å‡»è¿è¡Œï¼Œå¼€å§‹è®­ç»ƒ</li>
</ol>
<p><strong>æ ¸å¿ƒå‚æ•°è®¾ç½®ï¼š</strong></p>
<ul>
<li>è®­ç»ƒæ ·æœ¬ï¼š1000-2000ä¸ªè¶³å¤Ÿï¼ˆæ›´å¤šæ ·æœ¬æ•ˆæœæ›´å¥½ï¼‰</li>
<li>è®­ç»ƒæ—¶é—´ï¼šT4 GPUä¸Šçº¦6-7åˆ†é’Ÿ</li>
<li>æ˜¾å­˜å ç”¨ï¼š14GBä»¥å†…ï¼Œå®Œå…¨å…è´¹</li>
</ul>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ•ˆæœï¼ˆ3åˆ†é’Ÿï¼‰</h3>
<p>è®­ç»ƒå®Œæˆåï¼Œç«‹å³å¯ä»¥æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åŠ è½½å¾®è°ƒåçš„æ¨¡å‹</span>
model, <span class="hljs-attr">tokenizer</span> = FastVisionModel.from_pretrained(<span class="hljs-string">"./fine_tuned_model"</span>)

<span class="hljs-comment"># æµ‹è¯•è¯†åˆ«</span>
<span class="hljs-attr">result</span> = model.infer(tokenizer, prompt=<span class="hljs-string">"&lt;image&gt;\nFree OCR."</span>, image_file=<span class="hljs-string">"test.jpg"</span>)
print(result)
</code></pre>
<p>å¯¹æ¯”å¾®è°ƒå‰åçš„è¯†åˆ«ç»“æœï¼Œä½ ä¼šçœ‹åˆ°æ˜¾è‘—çš„æ”¹è¿›ã€‚</p>
<h2 data-id="heading-10">äº”ã€æŠ€æœ¯ç»†èŠ‚ï¼šLoRAé«˜æ•ˆå¾®è°ƒ</h2>
<p>å¾®è°ƒä½¿ç”¨çš„æ˜¯**LoRAï¼ˆä½ç§©é€‚åº”ï¼‰**æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ç§å‚æ•°é«˜æ•ˆçš„å¾®è°ƒæ–¹æ³•ï¼š</p>
<ul>
<li><strong>åªè®­ç»ƒå°‘é‡å‚æ•°</strong>ï¼šä¸éœ€è¦è°ƒæ•´æ•´ä¸ªæ¨¡å‹ï¼Œåªè®­ç»ƒæ–°å¢çš„å°è§„æ¨¡é€‚é…å™¨</li>
<li><strong>æ˜¾å­˜å ç”¨ä½</strong>ï¼šT4å…è´¹GPUå°±èƒ½è½»æ¾å®Œæˆ</li>
<li><strong>è®­ç»ƒé€Ÿåº¦å¿«</strong>ï¼šUnslothä¼˜åŒ–åï¼Œé€Ÿåº¦æå‡1.4å€ï¼Œæ˜¾å­˜ä½¿ç”¨å‡å°‘40%</li>
<li><strong>æ•ˆæœä¸æ‰“æŠ˜</strong>ï¼šå‡†ç¡®ç‡ä¸å…¨é‡å¾®è°ƒç›¸å½“</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½ç”¨å…è´¹èµ„æºå®Œæˆä¸“ä¸šçº§å¾®è°ƒçš„åŸå› ã€‚</p>
<h2 data-id="heading-11">å…­ã€å®é™…åº”ç”¨åœºæ™¯ä¸¾ä¾‹</h2>
<h3 data-id="heading-12">åœºæ™¯1ï¼šæ‰«ææ¡£æ¡ˆæ•°å­—åŒ–</h3>
<p>æŸæ¡£æ¡ˆé¦†æœ‰å¤§é‡80å¹´ä»£çš„æ¨¡ç³Šæ‰«ææ–‡ä»¶ï¼Œé€šç”¨OCRæ¨¡å‹é”™è¯¯ç‡é«˜è¾¾30%ã€‚ä½¿ç”¨500ä¸ªæ ·æœ¬å¾®è°ƒåï¼Œé”™è¯¯ç‡é™è‡³5%ä»¥ä¸‹ï¼Œå¤§å¤§åŠ é€Ÿäº†æ•°å­—åŒ–è¿›ç¨‹ã€‚</p>
<h3 data-id="heading-13">åœºæ™¯2ï¼šæ‰‹å†™ä½“è¯†åˆ«</h3>
<p>åŒ»é™¢éœ€è¦è¯†åˆ«åŒ»ç”Ÿçš„æ‰‹å†™å¤„æ–¹ã€‚ä½¿ç”¨1000ä¸ªæ ‡æ³¨æ ·æœ¬å¾®è°ƒåï¼Œè¯†åˆ«å‡†ç¡®ç‡ä»60%æå‡åˆ°92%ï¼Œæ˜¾è‘—å‡å°‘äº†äººå·¥å¤æ ¸å·¥ä½œé‡ã€‚</p>
<h3 data-id="heading-14">åœºæ™¯3ï¼šå¤šè¯­è¨€æ–‡æ¡£å¤„ç†</h3>
<p>è·¨å›½å…¬å¸éœ€è¦å¤„ç†åŒ…å«ä¸­è‹±æ··æ’çš„åˆåŒæ–‡æ¡£ã€‚é€šè¿‡æ··åˆæ•°æ®é›†å¾®è°ƒï¼Œæ¨¡å‹åœ¨ä¸­è‹±æ··æ’åœºæ™¯ä¸‹çš„å‡†ç¡®ç‡è¾¾åˆ°98%ã€‚</p>
<h2 data-id="heading-15">ä¸ƒã€æˆæœ¬åˆ†æï¼šçœŸçš„é›¶æˆæœ¬</h2>
<p>è®©æˆ‘ä»¬ç®—ä¸€ç¬”è´¦ï¼š</p>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>è´­ä¹°å•†ä¸šOCR APIï¼š0.01å…ƒ/å¼ èµ·</li>
<li>å¤„ç†10ä¸‡å¼ å›¾ç‰‡ï¼š1000å…ƒèµ·</li>
<li>æœˆåº¦è´¹ç”¨ï¼šæŒç»­æ”¯å‡º</li>
</ul>
<p><strong>å¾®è°ƒæ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>Google Colabå…è´¹GPUï¼š0å…ƒ</li>
<li>è®­ç»ƒæ—¶é—´ï¼š10åˆ†é’Ÿ</li>
<li>éƒ¨ç½²æˆæœ¬ï¼šç§æœ‰åŒ–éƒ¨ç½²ï¼Œä¸€æ¬¡æŠ•å…¥é•¿æœŸä½¿ç”¨</li>
<li>æ€»æˆæœ¬ï¼šå‡ ä¹ä¸ºé›¶</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå¾®è°ƒåçš„æ¨¡å‹å®Œå…¨å±äºä½ ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>ç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨æœ‰ä¿éšœ</li>
<li>æ— é™æ¬¡ä½¿ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒAPIè°ƒç”¨è´¹ç”¨</li>
<li>æŒç»­ä¼˜åŒ–ï¼Œéšæ—¶ç”¨æ–°æ•°æ®å†æ¬¡å¾®è°ƒ</li>
</ul>
<h2 data-id="heading-16">å…«ã€å¼€å§‹ä½ çš„å¾®è°ƒä¹‹æ—…</h2>
<p>æ‰€æœ‰èµ„æºéƒ½å·²å‡†å¤‡å¥½ï¼š</p>
<ol>
<li><strong>Unslothå®˜æ–¹æ•™ç¨‹</strong>ï¼šæä¾›å®Œæ•´çš„Colabç¬”è®°æœ¬å’Œä»£ç </li>
<li><strong>æ•°æ®é›†åˆ¶ä½œè„šæœ¬</strong>ï¼šå«è¯¦ç»†ä¸­æ–‡æ³¨é‡Š</li>
<li><strong>å¼€æºä¸­æ–‡æ•°æ®é›†</strong>ï¼šå¯ç›´æ¥ä½¿ç”¨çš„é«˜è´¨é‡è®­ç»ƒæ•°æ®</li>
<li><strong>ç¤¾åŒºæ”¯æŒ</strong>ï¼šé‡åˆ°é—®é¢˜éšæ—¶æŸ¥é˜…æ–‡æ¡£å’Œåšå®¢</li>
</ol>
<p>å¾®è°ƒä¸å†æ˜¯é«˜æ·±è«æµ‹çš„æŠ€æœ¯ï¼Œå®ƒå·²ç»å˜å¾—åƒå®‰è£…è½¯ä»¶ä¸€æ ·ç®€å•ã€‚åªè¦ä½ æœ‰éœ€æ±‚ï¼Œæœ‰æ•°æ®ï¼Œå°±èƒ½åŠ¨æ‰‹å®è·µã€‚</p>
<h2 data-id="heading-17">å†™åœ¨æœ€å</h2>
<p>åœ¨AIå¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸ä»…è¦ä¼š"ç”¨"æ¨¡å‹ï¼Œæ›´è¦å­¦ä¼š"è°ƒ"æ¨¡å‹ã€‚å¾®è°ƒæŠ€æœ¯è®©æˆ‘ä»¬èƒ½å¤Ÿç”¨è¾ƒå°çš„æˆæœ¬ï¼Œè·å¾—é’ˆå¯¹æ€§æå¼ºçš„AIèƒ½åŠ›ã€‚</p>
<p>DeepSeek-OCRçš„å¾®è°ƒå®æˆ˜ï¼Œåªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æŒæ¡äº†è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥å°†å®ƒåº”ç”¨åˆ°ï¼š</p>
<ul>
<li>å…¶ä»–OCRæ¨¡å‹çš„ä¼˜åŒ–</li>
<li>å¤šæ¨¡æ€å¤§æ¨¡å‹çš„å®šåˆ¶</li>
<li>ç‰¹å®šé¢†åŸŸçš„æ™ºèƒ½åº”ç”¨å¼€å‘</li>
</ul>
<p>æŠ€æœ¯çš„é—¨æ§›åœ¨é™ä½ï¼Œåˆ›æ–°çš„ç©ºé—´åœ¨æ‰©å¤§ã€‚ç°åœ¨ï¼Œè½®åˆ°ä½ åŠ¨æ‰‹å®è·µäº†ï¼</p>
<hr/>
<p><strong>ğŸ“š èµ„æºé“¾æ¥ï¼š</strong></p>
<ul>
<li>Unslothå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.unsloth.ai" target="_blank" title="https://docs.unsloth.ai" ref="nofollow noopener noreferrer">docs.unsloth.ai</a></li>
<li>å…è´¹Colabç¬”è®°æœ¬ï¼šæ–‡ä¸­æä¾›çš„é“¾æ¥</li>
<li>æ•°æ®é›†åˆ¶ä½œè„šæœ¬ï¼šè§†é¢‘æè¿°æ è·å–</li>
</ul>
<p><strong>ğŸ’¡ å°æç¤ºï¼š</strong></p>
<ul>
<li>å»ºè®®ä»100-500ä¸ªæ ·æœ¬å¼€å§‹å°è¯•</li>
<li>è®­ç»ƒæ—¶æ³¨æ„ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé¿å…æ„å¤–ä¸­æ–­</li>
<li>å¾®è°ƒåè®°å¾—åœ¨å®é™…åœºæ™¯ä¸­æµ‹è¯•æ•ˆæœ</li>
</ul>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€è½¬å‘ï¼Œè®©æ›´å¤šäººäº†è§£AIå¾®è°ƒçš„é­…åŠ›ï¼æœ‰ä»»ä½•é—®é¢˜ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºäº¤æµã€‚</p>
<hr/>
<p><strong>#AIæŠ€æœ¯ #OCRè¯†åˆ« #æ¨¡å‹å¾®è°ƒ #DeepSeek #æœºå™¨å­¦ä¹  #æ·±åº¦å­¦ä¹ å®æˆ˜</strong></p>
<h3 data-id="heading-18">å¾®è°ƒè„šæœ¬</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcolab.research.google.com%2Fgithub%2Funslothai%2Fnotebooks%2Fblob%2Fmain%2Fnb%2FDeepseek_OCR_(3B).ipynb" target="_blank" title="https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Deepseek_OCR_(3B).ipynb" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fcolab.research.google.com%2Fgithub%2Funslothai%2Fnotebooks%2Fblob%2Fmain%2Fnb%2FDeepseek_OCR_(3B).ipynb" target="_blank" title="https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Deepseek_OCR_(3B).ipynb" ref="nofollow noopener noreferrer">colab.research.google.com/github/unslâ€¦</a></p>
<h3 data-id="heading-19">ä¸­æ–‡æ•°æ®é›†</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2Fpriyank-m%2Fchinese_text_recognition" target="_blank" title="https://huggingface.co/datasets/priyank-m/chinese_text_recognition" ref="nofollow noopener noreferrer">huggingface.co/datasets/prâ€¦</a></p>
<h3 data-id="heading-20">å›¾åƒæ–‡æœ¬å¯¹åº”<a href="https://link.juejin.cn?target=http%3A%2F%2Fcontent.md%2F" target="_blank" title="http://content.md/" ref="nofollow noopener noreferrer">content.md</a></h3>
<pre><code class="hljs language-bash" lang="bash">/Users/charlesqin/Desktop/img/1.jpg å‰§æƒ…è·Œå®•èµ·ä¼ï¼Œäºº
/Users/charlesqin/Desktop/img/2.jpg å¥½çš„ï¼Œç‰¹æ•ˆå˜›ï¼Œä¹Ÿç®—æ˜¯è‰¯å¿ƒäº†ï¼Œæ¼”
/Users/charlesqin/Desktop/img/3.jpg ã€‚ã€‚ã€‚ï¼Œå‰§æƒ…é€»è¾‘æœ‰ç‚¹ä¸é€šå•Šå•Šã€‚
/Users/charlesqin/Desktop/img/4.jpg ä»¥çœ‹ä¸äº†å¤ªçƒ§è„‘çš„æ‚¬ç–‘ç‰‡
/Users/charlesqin/Desktop/img/5.jpg ã€‚;è¿™é¢—è¡Œæ˜Ÿä¸Šå­˜åœ¨
/Users/charlesqin/Desktop/img/6.jpg ç£åœºã€‚ä¸åŠ å¤–ç£åœºæ—¶ï¼ŒåŸå­åœ¨ä¸¤ä¸ª
/Users/charlesqin/Desktop/img/7.jpg è¿‡å¤–æ”¾çš„å¬æ­Œç¡®å®æ¯”è¾ƒä¸é”™ç¬¬ä¸€
/Users/charlesqin/Desktop/img/8.jpg å¿«çš„,ä¹¦ä¹Ÿå¾ˆæ•´æ´,ä½†æ˜¯æˆ‘å‘ç°åœ¨
/Users/charlesqin/Desktop/img/9.jpg ä¸ºç©ºé—´ä¸Šçš„æ’åˆ—ï¼Œæœ‰åˆ©äºç§‘å­¦ç ”ç©¶
/Users/charlesqin/Desktop/img/10.jpg è°ä¹Ÿä¸è®¨åŒè°
</code></pre>
<h3 data-id="heading-21">æ•°æ®é›†åˆ›å»º</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
å®‰è£…ï¼š pip install datasets Pillow scikit-learn tqdm                      
ä» content.md åˆ›å»º Parquet æ ¼å¼çš„ OCR æ•°æ®é›†

ä½¿ç”¨æ–¹æ³•:
    python create_parquet_dataset.py content.md

æˆ–è€…è‡ªå®šä¹‰è¾“å‡ºè·¯å¾„:
    python create_parquet_dataset.py content.md --output my_dataset
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image <span class="hljs-keyword">as</span> PILImage
<span class="hljs-keyword">from</span> datasets <span class="hljs-keyword">import</span> Dataset, DatasetDict, Image
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm

<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_content_md</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-string">"""è§£æ content.md æ–‡ä»¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“– è¯»å–æ–‡ä»¶: <span class="hljs-subst">{file_path}</span>"</span>)

    data = []
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> line_num, line <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(f, <span class="hljs-number">1</span>):
            line = line.strip()

            <span class="hljs-comment"># è·³è¿‡ç©ºè¡Œå’Œæ³¨é‡Š</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> line <span class="hljs-keyword">or</span> line.startswith(<span class="hljs-string">'#'</span>):
                <span class="hljs-keyword">continue</span>

            <span class="hljs-comment"># åˆ†å‰²å›¾åƒè·¯å¾„å’Œæ–‡æœ¬</span>
            parts = line.split(<span class="hljs-literal">None</span>, <span class="hljs-number">1</span>)

            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) == <span class="hljs-number">2</span>:
                image_path, text = parts
                data.append((image_path, text))
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  è¡Œ <span class="hljs-subst">{line_num}</span>: æ ¼å¼ä¸æ­£ç¡®ï¼Œå·²è·³è¿‡"</span>)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(data)}</span> æ¡è®°å½•"</span>)
    <span class="hljs-keyword">return</span> data

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_dataset</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""åˆ›å»ºæ•°æ®é›†"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“¦ åŠ è½½å›¾åƒ..."</span>)

    images = []
    texts = []
    skipped = <span class="hljs-number">0</span>

    <span class="hljs-keyword">for</span> img_path, text <span class="hljs-keyword">in</span> tqdm(data):
        <span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(img_path):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  å›¾åƒä¸å­˜åœ¨: <span class="hljs-subst">{img_path}</span>"</span>)
            skipped += <span class="hljs-number">1</span>
            <span class="hljs-keyword">continue</span>

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># åŠ è½½å›¾åƒ</span>
            img = PILImage.<span class="hljs-built_in">open</span>(img_path).convert(<span class="hljs-string">'RGB'</span>)

            <span class="hljs-comment"># åŸºæœ¬éªŒè¯</span>
            <span class="hljs-keyword">if</span> img.size[<span class="hljs-number">0</span>] &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">or</span> img.size[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">10</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  å›¾åƒå¤ªå°: <span class="hljs-subst">{img_path}</span>"</span>)
                skipped += <span class="hljs-number">1</span>
                <span class="hljs-keyword">continue</span>

            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> text <span class="hljs-keyword">or</span> text.strip() == <span class="hljs-string">''</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  æ–‡æœ¬ä¸ºç©º: <span class="hljs-subst">{img_path}</span>"</span>)
                skipped += <span class="hljs-number">1</span>
                <span class="hljs-keyword">continue</span>

            images.append(img)
            texts.append(text)

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  åŠ è½½å¤±è´¥ <span class="hljs-subst">{img_path}</span>: <span class="hljs-subst">{e}</span>"</span>)
            skipped += <span class="hljs-number">1</span>
            <span class="hljs-keyword">continue</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸåŠ è½½: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(images)}</span> ä¸ªæ ·æœ¬"</span>)
    <span class="hljs-keyword">if</span> skipped &gt; <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âš ï¸  è·³è¿‡: <span class="hljs-subst">{skipped}</span> ä¸ªæ ·æœ¬"</span>)

    <span class="hljs-comment"># åˆ›å»ºæ•°æ®é›†</span>
    dataset = Dataset.from_dict({
        <span class="hljs-string">'image'</span>: images,
        <span class="hljs-string">'text'</span>: texts
    })

    dataset = dataset.cast_column(<span class="hljs-string">'image'</span>, Image())

    <span class="hljs-keyword">return</span> dataset

<span class="hljs-keyword">def</span> <span class="hljs-title function_">split_dataset</span>(<span class="hljs-params">dataset</span>):
    <span class="hljs-string">"""åˆ†å‰²æ•°æ®é›†ä¸ºè®­ç»ƒ/éªŒè¯/æµ‹è¯•é›†"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ”€ åˆ†å‰²æ•°æ®é›†..."</span>)

    indices = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(dataset)))

    <span class="hljs-comment"># 80% è®­ç»ƒï¼Œ10% éªŒè¯ï¼Œ10% æµ‹è¯•</span>
    train_indices, temp_indices = train_test_split(
        indices, train_size=<span class="hljs-number">0.8</span>, random_state=<span class="hljs-number">42</span>
    )

    val_indices, test_indices = train_test_split(
        temp_indices, train_size=<span class="hljs-number">0.5</span>, random_state=<span class="hljs-number">42</span>
    )

    train_dataset = dataset.select(train_indices)
    val_dataset = dataset.select(val_indices)
    test_dataset = dataset.select(test_indices)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è®­ç»ƒé›†: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_dataset)}</span> æ ·æœ¬"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  éªŒè¯é›†: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(val_dataset)}</span> æ ·æœ¬"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æµ‹è¯•é›†: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(test_dataset)}</span> æ ·æœ¬"</span>)

    <span class="hljs-keyword">return</span> DatasetDict({
        <span class="hljs-string">'train'</span>: train_dataset,
        <span class="hljs-string">'val'</span>: val_dataset,
        <span class="hljs-string">'test'</span>: test_dataset
    })

<span class="hljs-keyword">def</span> <span class="hljs-title function_">save_parquet</span>(<span class="hljs-params">dataset_dict, output_prefix</span>):
    <span class="hljs-string">"""ä¿å­˜ä¸º Parquet æ ¼å¼"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ’¾ ä¿å­˜ä¸º Parquet æ ¼å¼..."</span>)

    <span class="hljs-keyword">for</span> split_name, split_data <span class="hljs-keyword">in</span> dataset_dict.items():
        output_file = <span class="hljs-string">f"<span class="hljs-subst">{output_prefix}</span>_<span class="hljs-subst">{split_name}</span>.parquet"</span>
        split_data.to_parquet(output_file)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  âœ… <span class="hljs-subst">{split_name}</span>: <span class="hljs-subst">{output_file}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">print_statistics</span>(<span class="hljs-params">dataset_dict</span>):
    <span class="hljs-string">"""æ‰“å°ç»Ÿè®¡ä¿¡æ¯"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Š æ•°æ®é›†ç»Ÿè®¡"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)

    <span class="hljs-keyword">for</span> split_name, split_data <span class="hljs-keyword">in</span> dataset_dict.items():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{split_name}</span>:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ ·æœ¬æ•°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(split_data)}</span>"</span>)

        <span class="hljs-comment"># æ–‡æœ¬é•¿åº¦</span>
        text_lengths = [<span class="hljs-built_in">len</span>(ex[<span class="hljs-string">'text'</span>]) <span class="hljs-keyword">for</span> ex <span class="hljs-keyword">in</span> split_data]
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ–‡æœ¬é•¿åº¦: <span class="hljs-subst">{<span class="hljs-built_in">min</span>(text_lengths)}</span>-<span class="hljs-subst">{<span class="hljs-built_in">max</span>(text_lengths)}</span> "</span>
              <span class="hljs-string">f"(å¹³å‡: <span class="hljs-subst">{<span class="hljs-built_in">sum</span>(text_lengths) / <span class="hljs-built_in">len</span>(text_lengths):<span class="hljs-number">.1</span>f}</span>)"</span>)

        <span class="hljs-comment"># æ˜¾ç¤ºæ ·ä¾‹</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(split_data) &gt; <span class="hljs-number">0</span>:
            sample_text = split_data[<span class="hljs-number">0</span>][<span class="hljs-string">'text'</span>]
            display_text = sample_text[:<span class="hljs-number">40</span>] + <span class="hljs-string">"..."</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sample_text) &gt; <span class="hljs-number">40</span> <span class="hljs-keyword">else</span> sample_text
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ ·ä¾‹: <span class="hljs-subst">{display_text}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># å‚æ•°è§£æ</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &lt; <span class="hljs-number">2</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½¿ç”¨æ–¹æ³•: python create_parquet_dataset.py content.md [--output è¾“å‡ºå‰ç¼€]"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç¤ºä¾‹:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  python create_parquet_dataset.py content.md"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  python create_parquet_dataset.py content.md --output my_dataset"</span>)
        sys.exit(<span class="hljs-number">1</span>)

    input_file = sys.argv[<span class="hljs-number">1</span>]

    <span class="hljs-comment"># è¾“å‡ºè·¯å¾„</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt;= <span class="hljs-number">4</span> <span class="hljs-keyword">and</span> sys.argv[<span class="hljs-number">2</span>] == <span class="hljs-string">'--output'</span>:
        output_prefix = sys.argv[<span class="hljs-number">3</span>]
    <span class="hljs-keyword">else</span>:
        output_prefix = <span class="hljs-string">"my_ocr_dataset"</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ åˆ›å»º Parquet æ ¼å¼ OCR æ•°æ®é›†"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥æ–‡ä»¶: <span class="hljs-subst">{input_file}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å‡ºå‰ç¼€: <span class="hljs-subst">{output_prefix}</span>"</span>)

    <span class="hljs-comment"># æ£€æŸ¥è¾“å…¥æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(input_file):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâŒ é”™è¯¯: æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">{input_file}</span>"</span>)
        sys.exit(<span class="hljs-number">1</span>)

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. è§£ææ–‡ä»¶</span>
        data = parse_content_md(input_file)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) == <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâŒ é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆæ•°æ®"</span>)
            sys.exit(<span class="hljs-number">1</span>)

        <span class="hljs-comment"># 2. åˆ›å»ºæ•°æ®é›†</span>
        dataset = create_dataset(data)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(dataset) == <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâŒ é”™è¯¯: æ²¡æœ‰æˆåŠŸåŠ è½½ä»»ä½•æ ·æœ¬"</span>)
            sys.exit(<span class="hljs-number">1</span>)

        <span class="hljs-comment"># 3. åˆ†å‰²æ•°æ®é›†</span>
        dataset_dict = split_dataset(dataset)

        <span class="hljs-comment"># 4. æ‰“å°ç»Ÿè®¡</span>
        print_statistics(dataset_dict)

        <span class="hljs-comment"># 5. ä¿å­˜ä¸º Parquet</span>
        save_parquet(dataset_dict, output_prefix)

        <span class="hljs-comment"># å®Œæˆ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… å®Œæˆï¼"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)

        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“¦ ç”Ÿæˆçš„æ–‡ä»¶:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{output_prefix}</span>_train.parquet"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{output_prefix}</span>_val.parquet"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{output_prefix}</span>_test.parquet"</span>)

        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“– å¦‚ä½•ä½¿ç”¨:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  from datasets import load_dataset"</span>)
        <span class="hljs-built_in">print</span>()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  # åŠ è½½è®­ç»ƒé›†"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  train_dataset = load_dataset('parquet', data_files='<span class="hljs-subst">{output_prefix}</span>_train.parquet')"</span>)
        <span class="hljs-built_in">print</span>()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  # æˆ–åŠ è½½æ‰€æœ‰åˆ†å‰²"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  dataset = load_dataset('parquet', data_files={{"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"      'train': '<span class="hljs-subst">{output_prefix}</span>_train.parquet',"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"      'val': '<span class="hljs-subst">{output_prefix}</span>_val.parquet',"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"      'test': '<span class="hljs-subst">{output_prefix}</span>_test.parquet'"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  }})"</span>)
        <span class="hljs-built_in">print</span>()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  # ç”¨äºå¾®è°ƒ"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  train_data = dataset['train']"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâŒ é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">import</span> traceback
        traceback.print_exc()
        sys.exit(<span class="hljs-number">1</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªåŸºäº .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7571704212850884659</link>    <guid>https://juejin.cn/post/7571704212850884659</guid>    <pubDate>2025-11-12T14:49:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571704212850884659" data-draft-id="7571695634942263323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªåŸºäº  .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2025-11-12T14:49:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªåŸºäº  .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T14:49:51.000Z" title="Wed Nov 12 2025 14:49:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªåŸºäº .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶ï¼šNetCoreKevinã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<p>NetCoreKevin æ˜¯ä¸€ä¸ªåŸºäº .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶ï¼Œå…¶æ¨¡å—åŒ–è®¾è®¡ä½¿å¾—æ¯ä¸ªåŠŸèƒ½éƒ½å¯ä»¥ç‹¬ç«‹å¼•ç”¨ï¼Œéå¸¸é€‚åˆå¤§å‹ä¼ä¸šçº§åº”ç”¨çš„å¼€å‘ã€‚æ¡†æ¶æ”¯æŒIdentityServer4å•ç‚¹ç™»å½•ã€å¤šç¼“å­˜ã€è‡ªåŠ¨ä»»åŠ¡ã€åˆ†å¸ƒå¼ã€ä¸€åº“å¤šç§Ÿæˆ·ã€æ—¥å¿—ã€æˆæƒå’Œé‰´æƒã€CAPé›†æˆäº‹ä»¶ã€SignalRã€é¢†åŸŸäº‹ä»¶ã€ESLã€MCPåè®®æœåŠ¡ã€IOCæ¨¡å—åŒ–æ³¨å…¥ã€Corsã€Quartzè‡ªåŠ¨ä»»åŠ¡ã€å¤šçŸ­ä¿¡é›†æˆã€AIæ™ºèƒ½ä½“ã€AI é›†æˆ SemanticKernelã€MCP æœåŠ¡ã€OCRéªŒè¯ç è¯†åˆ«ã€APIå¤šç‰ˆæœ¬å…¼å®¹ã€å•å…ƒé›†æˆæµ‹è¯•ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fe43W9dqTWnmwI2STQREolw" target="_blank" title="https://mp.weixin.qq.com/s/e43W9dqTWnmwI2STQREolw" ref="nofollow noopener noreferrer">DotNetGuide çªç ´äº† 9.5K + Starï¼Œä¸€ä»½å…¨é¢çš„C#/.NET/.NET Coreå­¦ä¹ ã€å·¥ä½œã€é¢è¯•æŒ‡å—çŸ¥è¯†åº“ï¼</a></li>
</ul>
<h2 data-id="heading-2">DDD é¢†åŸŸé©±åŠ¨è®¾è®¡ä»‹ç»</h2>
<p>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Designï¼Œç®€ç§°DDDï¼‰æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ–¹æ³•å’Œç†å¿µï¼Œç”±Eric Evansåœ¨2004å¹´æå‡ºã€‚å®ƒé€šè¿‡æ·±å…¥ç†è§£ä¸šåŠ¡é¢†åŸŸï¼Œå°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è½¬åŒ–ä¸ºå¯ç»´æŠ¤ã€å¯æ‰©å±•çš„è½¯ä»¶ç³»ç»Ÿã€‚DDDçš„æ ¸å¿ƒåœ¨äºå»ºç«‹ä¸€ä¸ªä¸°å¯Œçš„é¢†åŸŸæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹èƒ½å¤Ÿåæ˜ ä¸šåŠ¡å®ä½“ã€ä¸šåŠ¡è§„åˆ™å’Œä¸šåŠ¡æµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c4213e54a124c009eb038a6e4e8789b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763563791&amp;x-signature=eh3vULYEzw8mH9%2F731qgy7MTSEE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">é¡¹ç›®åŠŸèƒ½</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d61e793add914067ba18ff2e29aa766c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763563791&amp;x-signature=bMpvR%2FJSuR0A9uUFupNmtX8Npdo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">é¡¹ç›®æºä»£ç </h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18f42e59c1c140b4944741c181f9b8f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763563791&amp;x-signature=vT7ZzKUG5a%2FEfl7jXQDFNwb05Es%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7779221efd54fd4b727824c5180d4a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763563791&amp;x-signature=jcxF2FCOFRM7SST9KPXgOk7kpL0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">åŸºç¡€ WebAPI</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1825a6e962cf45ae8d8d07e418e3c340~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763563791&amp;x-signature=F4ct6VPx96sMJAqf3Cd0aTTobdg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunkai-li%2FNetCoreKevin" target="_blank" title="https://github.com/junkai-li/NetCoreKevin" ref="nofollow noopener noreferrer">github.com/junkai-li/Nâ€¦</a></li>
</ul>
<h2 data-id="heading-7">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«spanåµŒå¥—åœ°ç‹±:CSS Highlights APIé‡æ–°å®šä¹‰è¯­æ³•é«˜äº®]]></title>    <link>https://juejin.cn/post/7571655979256414248</link>    <guid>https://juejin.cn/post/7571655979256414248</guid>    <pubDate>2025-11-12T13:23:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655979256414248" data-draft-id="7571655979256397864" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«spanåµŒå¥—åœ°ç‹±:CSS Highlights APIé‡æ–°å®šä¹‰è¯­æ³•é«˜äº®"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2025-11-12T13:23:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«spanåµŒå¥—åœ°ç‹±:CSS Highlights APIé‡æ–°å®šä¹‰è¯­æ³•é«˜äº®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T13:23:32.000Z" title="Wed Nov 12 2025 13:23:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS Highlights APIï¼šä¸ç”¨ DOM æ“ä½œä¹Ÿèƒ½å®ç°è¯­æ³•é«˜äº®</h2>
<p>åšä»£ç ç¼–è¾‘å™¨æˆ–è€…æŠ€æœ¯åšå®¢çš„æ—¶å€™ï¼Œè¯­æ³•é«˜äº®æ˜¯ä¸ªç»•ä¸å¼€çš„éœ€æ±‚ã€‚ä¼ ç»Ÿæ–¹æ¡ˆæ˜¯ç»™æ¯ä¸ªå…³é”®å­—ã€å­—ç¬¦ä¸²ã€æ³¨é‡ŠåŒ…ä¸€å±‚ <code>&lt;span&gt;</code> æ ‡ç­¾ï¼Œç„¶ååŠ ä¸Šä¸åŒçš„ classã€‚</p>
<p>é—®é¢˜æ˜¯ï¼Œå‡ åè¡Œä»£ç ä¸‹æ¥ï¼ŒDOM æ ‘å°±è¢«å¡æ»¡äº†å‡ ç™¾ä¸ª span èŠ‚ç‚¹ã€‚æµè§ˆå™¨æ¸²æŸ“èµ·æ¥æ…¢ï¼Œå†…å­˜å ç”¨ä¹Ÿé«˜ï¼Œè¿˜å®¹æ˜“å‡ºæ€§èƒ½é—®é¢˜ã€‚</p>
<p>æœ€è¿‘ç ”ç©¶äº† CSS Highlights APIï¼Œå‘ç°è¿™ç©æ„å„¿æŒºæœ‰æ„æ€çš„ï¼šä¸æ“ä½œ DOMï¼Œç›´æ¥ç”¨ Range æ ‡è®°æ–‡æœ¬ä½ç½®ï¼Œæ€§èƒ½æå‡æ˜æ˜¾ã€‚æ¥çœ‹çœ‹åˆ°åº•æ€ä¹ˆå›äº‹ã€‚</p>
<p>æ–‡ç« åº•éƒ¨æœ‰ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ä¸‹æ¥è¿è¡Œæµ‹è¯•å¯¹æ¯”ä¸åŒæ–¹æ¡ˆçš„åŒºåˆ«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/726abd9e9d0641cdbe6b930fccf66528~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763558611&amp;x-signature=XbBTAXX4cIgIz5gXyMCo8BIqQf8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜</h3>
<p>å…ˆçœ‹çœ‹æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹æ¡ˆï¼šä¸ºæ¯ä¸ª token åŒ…è£¹ span</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">highlightCode</span>(<span class="hljs-params">code</span>) {
    <span class="hljs-keyword">const</span> tokens = <span class="hljs-title function_">tokenize</span>(code);
    <span class="hljs-keyword">let</span> html = <span class="hljs-string">''</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
        html += <span class="hljs-string">`&lt;span class="token-<span class="hljs-subst">${token.type}</span>"&gt;<span class="hljs-subst">${token.value}</span>&lt;/span&gt;`</span>;
    }

    element.<span class="hljs-property">innerHTML</span> = html;
}
</code></pre>
<p>è¿™æ ·åšï¼Œä¸€æ®µ 50 è¡Œçš„ä»£ç ï¼Œè½»æ¾äº§ç”Ÿ 200-300 ä¸ª DOM èŠ‚ç‚¹ã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œæ¯ä¸ªå…³é”®å­—ã€æ¯ä¸ªå­—ç¬¦ä¸²ã€æ¯ä¸ªæ•°å­—éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œèƒ½ä¸å¤šå—ã€‚</p>
<p>DOM èŠ‚ç‚¹å¤šäº†å¸¦æ¥å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>æ¸²æŸ“æ…¢</strong>ï¼šæµè§ˆå™¨è¦æ„å»ºæ•´ä¸ª DOM æ ‘ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æ ·å¼å’Œå¸ƒå±€</li>
<li><strong>å†…å­˜å ç”¨é«˜</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦å å†…å­˜ï¼Œå‡ ç™¾ä¸ªèŠ‚ç‚¹å°±æ˜¯å‡ ç™¾ä»½æ•°æ®</li>
<li><strong>æ›´æ–°éº»çƒ¦</strong>ï¼šä»£ç ä¸€æ”¹ï¼Œæ•´ä¸ª innerHTML é‡æ–°ç”Ÿæˆï¼Œæ‰€æœ‰èŠ‚ç‚¹é‡å»º</li>
</ol>
<p>ç‰¹åˆ«æ˜¯åœ¨ä»£ç ç¼–è¾‘å™¨åœºæ™¯ä¸‹ï¼Œç”¨æˆ·æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå°±è¦é‡æ–°ç”Ÿæˆä¸€éæ‰€æœ‰èŠ‚ç‚¹ï¼Œå¡é¡¿åœ¨æ‰€éš¾å…ã€‚</p>
<h3 data-id="heading-2">CSS Highlights API çš„æ€è·¯</h3>
<p>CSS Highlights API æ¢äº†ä¸ªæ€è·¯ï¼š<strong>ä¸ä¿®æ”¹ DOM ç»“æ„ï¼Œåªæ ‡è®°æ–‡æœ¬ä½ç½®</strong>ã€‚</p>
<p>æ ¸å¿ƒåŸç†è¯´ç©¿äº†æŒºç®€å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[çº¯æ–‡æœ¬ TextNode] --&gt; B[è¯æ³•åˆ†æ Tokenize]
    B --&gt; C[åˆ›å»º Range å¯¹è±¡]
    C --&gt; D[æŒ‰ç±»å‹åˆ†ç»„]
    D --&gt; E[æ³¨å†Œåˆ° CSS.highlights]
    E --&gt; F[æµè§ˆå™¨ç›´æ¥æ¸²æŸ“é«˜äº®]
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸åˆ›å»ºæ–°çš„ DOM èŠ‚ç‚¹ï¼Œæ–‡æœ¬å§‹ç»ˆæ˜¯ä¸€ä¸ªå®Œæ•´çš„ text nodeã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼š</p>
<ol>
<li><strong>ä¿æŒçº¯æ–‡æœ¬</strong>ï¼šä»£ç æ”¾åœ¨ä¸€ä¸ª text node é‡Œï¼Œä¸æ‹†åˆ†</li>
<li><strong>ç”¨ Range æ ‡è®°</strong>ï¼šRange å¯¹è±¡åªæ˜¯æ ‡è®°"ç¬¬ 10 ä¸ªå­—ç¬¦åˆ°ç¬¬ 18 ä¸ªå­—ç¬¦"è¿™æ ·çš„ä½ç½®ä¿¡æ¯</li>
<li><strong>CSS è´Ÿè´£æ¸²æŸ“</strong>ï¼šç”¨ <code>::highlight()</code> ä¼ªå…ƒç´ å®šä¹‰æ ·å¼ï¼Œæµè§ˆå™¨ç›´æ¥æ¸²æŸ“</li>
</ol>
<h3 data-id="heading-3">å®ç°ç»†èŠ‚</h3>
<h4 data-id="heading-4">1. å®šä¹‰é«˜äº®æ ·å¼</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®šä¹‰ä¸åŒ token ç±»å‹çš„æ ·å¼ */</span>
::<span class="hljs-built_in">highlight</span>(keyword) {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#569cd6</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
}

::<span class="hljs-built_in">highlight</span>(string) {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ce9178</span>;
}

::<span class="hljs-built_in">highlight</span>(comment) {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#6a9955</span>;
    <span class="hljs-attribute">font-style</span>: italic;
}
</code></pre>
<p>è¿™é‡Œç”¨ <code>::highlight()</code> ä¼ªå…ƒç´ ï¼Œæ‹¬å·é‡Œçš„åç§°å¯¹åº”åé¢æ³¨å†Œæ—¶çš„ keyã€‚</p>
<h4 data-id="heading-5">2. è¯æ³•åˆ†æ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">tokenize</span>(<span class="hljs-params">code</span>) {
    <span class="hljs-keyword">const</span> tokens = [];

    <span class="hljs-comment">// å®šä¹‰åŒ¹é…è§„åˆ™ï¼ˆé¡ºåºå¾ˆé‡è¦ï¼‰</span>
    <span class="hljs-keyword">const</span> patterns = [
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'comment'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\/\/[^\n]*/g</span> },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/(["'`])(?:(?=(\\?))\2.)*?\1/g</span> },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'keyword'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b(function|const|let|var|if|else|return)\b/g</span> },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b\d+\.?\d*\b/g</span> },
        <span class="hljs-comment">// ... å…¶ä»–è§„åˆ™</span>
    ];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { type, regex } <span class="hljs-keyword">of</span> patterns) {
        <span class="hljs-keyword">let</span> match;
        <span class="hljs-keyword">while</span> ((match = regex.<span class="hljs-title function_">exec</span>(code)) !== <span class="hljs-literal">null</span>) {
            tokens.<span class="hljs-title function_">push</span>({
                type,
                <span class="hljs-attr">start</span>: match.<span class="hljs-property">index</span>,
                <span class="hljs-attr">end</span>: match.<span class="hljs-property">index</span> + match[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>,
                <span class="hljs-attr">value</span>: match[<span class="hljs-number">0</span>]
            });
        }
    }

    <span class="hljs-keyword">return</span> tokens;
}
</code></pre>
<p>è¿™é‡Œè¦æ³¨æ„ï¼š</p>
<ul>
<li><strong>comment å’Œ string æ”¾æœ€å‰é¢</strong>ï¼šç¡®ä¿æ³¨é‡Šå’Œå­—ç¬¦ä¸²å†…éƒ¨çš„å†…å®¹ä¸ä¼šè¢«å…¶ä»–è§„åˆ™åŒ¹é…</li>
<li><strong>å»é‡å¤„ç†</strong>ï¼šå¤šä¸ªè§„åˆ™å¯èƒ½åŒ¹é…åŒä¸€æ®µæ–‡æœ¬ï¼Œè¦å»æ‰é‡å çš„ token</li>
</ul>
<h4 data-id="heading-6">3. åˆ›å»º Range å¹¶æ³¨å†Œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlights</span>(<span class="hljs-params">element, code</span>) {
    <span class="hljs-comment">// æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é™çº§åˆ°ä¼ ç»Ÿæ–¹æ¡ˆ</span>
    }

    <span class="hljs-comment">// è®¾ç½®çº¯æ–‡æœ¬ï¼ˆåªæœ‰ä¸€ä¸ª text nodeï¼‰</span>
    element.<span class="hljs-property">textContent</span> = code;
    <span class="hljs-keyword">const</span> textNode = element.<span class="hljs-property">firstChild</span>;

    <span class="hljs-keyword">const</span> tokens = <span class="hljs-title function_">tokenize</span>(code);

    <span class="hljs-comment">// æŒ‰ç±»å‹åˆ†ç»„</span>
    <span class="hljs-keyword">const</span> tokensByType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
        <span class="hljs-keyword">if</span> (!tokensByType.<span class="hljs-title function_">has</span>(token.<span class="hljs-property">type</span>)) {
            tokensByType.<span class="hljs-title function_">set</span>(token.<span class="hljs-property">type</span>, []);
        }

        <span class="hljs-comment">// åˆ›å»º Range æ ‡è®°ä½ç½®</span>
        <span class="hljs-keyword">const</span> range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
        range.<span class="hljs-title function_">setStart</span>(textNode, token.<span class="hljs-property">start</span>);
        range.<span class="hljs-title function_">setEnd</span>(textNode, token.<span class="hljs-property">end</span>);
        tokensByType.<span class="hljs-title function_">get</span>(token.<span class="hljs-property">type</span>).<span class="hljs-title function_">push</span>(range);
    }

    <span class="hljs-comment">// æ³¨å†Œåˆ° CSS.highlights</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [type, ranges] <span class="hljs-keyword">of</span> tokensByType) {
        <span class="hljs-keyword">const</span> highlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(...ranges);
        <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(type, highlight);
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>Range åªæ˜¯æ ‡è®°</strong>ï¼šä¸ä¿®æ”¹ DOMï¼Œåªæ˜¯å‘Šè¯‰æµè§ˆå™¨"è¿™æ®µæ–‡æœ¬éœ€è¦é«˜äº®"</li>
<li><strong>æŒ‰ç±»å‹æ³¨å†Œ</strong>ï¼šåŒä¸€ç±»å‹çš„ tokenï¼ˆæ¯”å¦‚æ‰€æœ‰å…³é”®å­—ï¼‰å…±äº«ä¸€ä¸ª Highlight å¯¹è±¡</li>
<li><strong>CSS è‡ªåŠ¨åŒ¹é…</strong>ï¼šæ³¨å†Œçš„åç§°ï¼ˆå¦‚ <code>keyword</code>ï¼‰ä¼šåŒ¹é… CSS ä¸­çš„ <code>::highlight(keyword)</code></li>
</ul>
<h3 data-id="heading-7">æ€§èƒ½å¯¹æ¯”</h3>
<p>å®æµ‹æ•°æ®ï¼ˆ50 è¡Œä»£ç ï¼Œçº¦ 150 ä¸ª tokenï¼‰ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>CSS Highlights API</th><th>ä¼ ç»Ÿ DOM æ–¹æ¡ˆ</th><th>æå‡</th></tr></thead><tbody><tr><td>DOM èŠ‚ç‚¹æ•°</td><td>1 ä¸ª</td><td>300+ ä¸ª</td><td>99.7%</td></tr><tr><td>é¦–æ¬¡æ¸²æŸ“æ—¶é—´</td><td>0.8ms</td><td>2.5ms</td><td>68%</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä½</td><td>é«˜</td><td>~70%</td></tr><tr><td>é‡æ–°æ¸²æŸ“</td><td>å¿«</td><td>æ…¢</td><td>~60%</td></tr></tbody></table>
<p>ä¼˜åŠ¿æ˜æ˜¾ï¼š</p>
<ol>
<li><strong>èŠ‚ç‚¹æ•°å¤§å¹…å‡å°‘</strong>ï¼šä»å‡ ç™¾ä¸ªèŠ‚ç‚¹é™åˆ° 1 ä¸ª</li>
<li><strong>æ¸²æŸ“æ›´å¿«</strong>ï¼šæµè§ˆå™¨ä¸ç”¨æ„å»ºå¤æ‚çš„ DOM æ ‘</li>
<li><strong>å†…å­˜å ç”¨ä½</strong>ï¼šRange å¯¹è±¡æ¯” DOM èŠ‚ç‚¹è½»é‡å¾—å¤š</li>
<li><strong>æ›´æ–°é«˜æ•ˆ</strong>ï¼šä¿®æ”¹ä»£ç åªéœ€é‡æ–°åˆ›å»º Rangeï¼Œä¸ç”¨é‡å»º DOM</li>
</ol>
<h3 data-id="heading-8">éœ€è¦æ³¨æ„çš„ç‚¹</h3>
<h4 data-id="heading-9">1. æµè§ˆå™¨å…¼å®¹æ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>) {
    <span class="hljs-comment">// é™çº§åˆ°ä¼ ç»Ÿæ–¹æ¡ˆ</span>
    <span class="hljs-title function_">applyTraditionalHighlight</span>(element, code);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p>å½“å‰æ”¯æŒæƒ…å†µï¼š</p>
<ul>
<li>Chrome/Edge 105+</li>
<li>Firefox 140+</li>
<li>Safari 17.2+</li>
</ul>
<p>ä¸æ”¯æŒçš„æµè§ˆå™¨éœ€è¦ fallback æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-10">2. è¯æ³•åˆ†æçš„é¡ºåº</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> patterns = [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'comment'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\/\/[^\n]*/g</span> },    <span class="hljs-comment">// å¿…é¡»åœ¨æœ€å‰é¢</span>
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/(["'`])(?:(?=(\\?))\2.)*?\1/g</span> },  <span class="hljs-comment">// ä¹Ÿè¦ä¼˜å…ˆ</span>
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'keyword'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b(function|const)\b/g</span> },
    <span class="hljs-comment">// ... åç»­è§„åˆ™</span>
];
</code></pre>
<p>ä¸ºä»€ä¹ˆ comment å’Œ string è¦æ”¾å‰é¢ï¼Ÿ</p>
<p>å› ä¸ºæ³¨é‡Šé‡Œå¯èƒ½åŒ…å«å…³é”®å­—ï¼Œå­—ç¬¦ä¸²é‡Œå¯èƒ½åŒ…å«æ•°å­—ã€‚å¦‚æœå…³é”®å­—è§„åˆ™å…ˆåŒ¹é…ï¼Œæ³¨é‡Šå’Œå­—ç¬¦ä¸²å†…éƒ¨å°±ä¼šè¢«é”™è¯¯é«˜äº®ã€‚</p>
<h4 data-id="heading-11">3. å»é‡é€»è¾‘</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‰ä½ç½®æ’åº</span>
tokens.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">start</span> - b.<span class="hljs-property">start</span>);

<span class="hljs-comment">// å»é™¤é‡å çš„ token</span>
<span class="hljs-keyword">const</span> filteredTokens = [];
<span class="hljs-keyword">let</span> lastEnd = <span class="hljs-number">0</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
    <span class="hljs-keyword">if</span> (token.<span class="hljs-property">start</span> &gt;= lastEnd) {
        filteredTokens.<span class="hljs-title function_">push</span>(token);
        lastEnd = token.<span class="hljs-property">end</span>;
    }
}
</code></pre>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿ï¼š</p>
<ul>
<li>æ³¨é‡Šä¸­çš„å†’å·ä¸ä¼šè¢« operator è§„åˆ™é‡å¤åŒ¹é…</li>
<li>å­—ç¬¦ä¸²ä¸­çš„å…³é”®å­—ä¸ä¼šè¢«å•ç‹¬é«˜äº®</li>
</ul>
<h4 data-id="heading-12">4. Range ä¸ä¼šè‡ªåŠ¨æ›´æ–°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»£ç æ”¹å˜åï¼Œéœ€è¦é‡æ–°åˆ›å»º Range</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateCode</span>(<span class="hljs-params">newCode</span>) {
    <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">clear</span>();  <span class="hljs-comment">// æ¸…é™¤æ—§çš„</span>
    <span class="hljs-title function_">applyHighlights</span>(element, newCode);  <span class="hljs-comment">// é‡æ–°åº”ç”¨</span>
}
</code></pre>
<p>Range å¯¹è±¡åªæ˜¯å¿«ç…§ï¼Œä¸ä¼šè·Ÿéšæ–‡æœ¬å˜åŒ–è‡ªåŠ¨æ›´æ–°ã€‚ä»£ç ç¼–è¾‘å™¨åœºæ™¯éœ€è¦ç›‘å¬è¾“å…¥äº‹ä»¶ï¼ŒåŠæ—¶é‡æ–°ç”Ÿæˆã€‚</p>
<h3 data-id="heading-13">é€‚ç”¨åœºæ™¯</h3>
<p><strong>é€‚åˆç”¨ CSS Highlights API çš„åœºæ™¯</strong>ï¼š</p>
<ol>
<li><strong>ä»£ç å±•ç¤º</strong>ï¼šæŠ€æœ¯åšå®¢ã€æ–‡æ¡£ç«™ã€ä»£ç åˆ†äº«å¹³å°</li>
<li><strong>åªè¯»ç¼–è¾‘å™¨</strong>ï¼šæŸ¥çœ‹å™¨ã€diff å·¥å…·ã€ä»£ç å®¡æŸ¥å·¥å…·</li>
<li><strong>æ€§èƒ½æ•æ„Ÿ</strong>ï¼šå¤§æ–‡ä»¶é¢„è§ˆã€ç§»åŠ¨ç«¯å±•ç¤º</li>
</ol>
<p><strong>ä¸å¤ªé€‚åˆçš„åœºæ™¯</strong>ï¼š</p>
<ol>
<li><strong>å¤æ‚ç¼–è¾‘å™¨</strong>ï¼šéœ€è¦å…‰æ ‡å®šä½ã€é€‰åŒºç®¡ç†ã€è¡Œå·å¯¹é½ç­‰åŠŸèƒ½</li>
<li><strong>è€æµè§ˆå™¨æ”¯æŒ</strong>ï¼šIEã€è€ç‰ˆ Safari ä¸æ”¯æŒï¼Œéœ€è¦å®Œå–„çš„ fallback</li>
<li><strong>æè‡´æ€§èƒ½è¦æ±‚</strong>ï¼šè™šæ‹Ÿæ»šåŠ¨ã€å¢é‡æ¸²æŸ“çš„åœºæ™¯å¯èƒ½éœ€è¦æ›´å®šåˆ¶åŒ–çš„æ–¹æ¡ˆ</li>
</ol>
<h3 data-id="heading-14">å’Œ Prism.jsã€Highlight.js çš„åŒºåˆ«</h3>
<p>å¸¸è§çš„é«˜äº®åº“éƒ½æ˜¯åŸºäº DOM çš„ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>CSS Highlights API</th><th>Prism.js / Highlight.js</th></tr></thead><tbody><tr><td>DOM èŠ‚ç‚¹æ•°</td><td>1 ä¸ª</td><td>å‡ ç™¾ä¸ª</td></tr><tr><td>æ¸²æŸ“æ€§èƒ½</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>è¯­è¨€æ”¯æŒ</td><td>éœ€è‡ªå·±å®ç°</td><td>å†…ç½®å‡ åç§è¯­è¨€</td></tr><tr><td>ä¸»é¢˜ç³»ç»Ÿ</td><td>CSS è‡ªå®šä¹‰</td><td>é¢„è®¾ä¸»é¢˜</td></tr><tr><td>æ’ä»¶ç”Ÿæ€</td><td>æ— </td><td>ä¸°å¯Œ</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä½</td><td>ä¸­</td></tr></tbody></table>
<p>ç®€å•æ€»ç»“ï¼š</p>
<ul>
<li><strong>è¯­è¨€æ”¯æŒå°‘ã€è¦æ±‚æ€§èƒ½</strong>ï¼šç”¨ CSS Highlights API</li>
<li><strong>éœ€è¦å¼€ç®±å³ç”¨ã€å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šç”¨ Prism.js / Highlight.js</li>
<li><strong>æè‡´æ€§èƒ½ + å®šåˆ¶åŒ–</strong>ï¼šè‡ªå·±åŸºäº CSS Highlights API å°è£…</li>
</ul>
<h3 data-id="heading-15">ç›¸å…³æ–‡æ¡£</h3>
<h4 data-id="heading-16">å®˜æ–¹æ ‡å‡†æ–‡æ¡£</h4>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FCSS_Custom_Highlight_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Custom_Highlight_API" ref="nofollow noopener noreferrer">CSS Custom Highlight API - MDN</a></strong> - API ä½¿ç”¨æŒ‡å—</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdrafts.csswg.org%2Fcss-highlight-api%2F" target="_blank" title="https://drafts.csswg.org/css-highlight-api/" ref="nofollow noopener noreferrer">Highlight API Specification</a></strong> - W3C è§„èŒƒè‰æ¡ˆ</li>
</ol>
<h4 data-id="heading-17">æŠ€æœ¯æ–‡ç« </h4>
<ol start="3">
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fpavi2410.com%2Fblog%2Fhigh-performance-syntax-highlighting-with-css-highlights-api%2F" target="_blank" title="https://pavi2410.com/blog/high-performance-syntax-highlighting-with-css-highlights-api/" ref="nofollow noopener noreferrer">High Performance Syntax Highlighting</a></strong> - æ€§èƒ½å¯¹æ¯”å’Œå®ç°ç»†èŠ‚</li>
</ol>
<h4 data-id="heading-18">æµè§ˆå™¨å…¼å®¹æ€§</h4>
<ol start="4">
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcaniuse.com%2F%3Fsearch%3Dhighlight" target="_blank" title="https://caniuse.com/?search=highlight" ref="nofollow noopener noreferrer">Can I Use - CSS Custom Highlight</a></strong> - æµè§ˆå™¨æ”¯æŒæƒ…å†µ</li>
</ol>
<hr/>
<h3 data-id="heading-19">å®Œæ•´ Demo</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯¹æ¯”æ¼”ç¤ºï¼Œå·¦ä¾§å±•ç¤º CSS Highlights API æ–¹æ¡ˆï¼Œå³ä¾§å±•ç¤ºä¼ ç»Ÿ DOM æ–¹æ¡ˆï¼Œå¯ä»¥ç›´æ¥çœ‹åˆ°æ€§èƒ½å·®å¼‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS Highlights API - è¯­æ³•é«˜äº®æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
        }

        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, <span class="hljs-string">'PingFang SC'</span>, <span class="hljs-string">'Hiragino Sans GB'</span>, <span class="hljs-string">'Microsoft YaHei'</span>, sans-serif;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
        }

        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
        }

        <span class="hljs-selector-tag">h1</span> {
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
            <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
        }

        <span class="hljs-selector-class">.info</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
        }

        <span class="hljs-selector-class">.info</span> <span class="hljs-selector-tag">h2</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#667eea</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
        }

        <span class="hljs-selector-class">.info</span> <span class="hljs-selector-tag">p</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#4a5568</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
        }

        <span class="hljs-selector-class">.demo-grid</span> {
            <span class="hljs-attribute">display</span>: grid;
            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">2rem</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
        }

        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
            <span class="hljs-selector-class">.demo-grid</span> {
                <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
            }
        }

        <span class="hljs-selector-class">.demo-section</span> {
            <span class="hljs-attribute">background</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
            <span class="hljs-attribute">overflow</span>: hidden;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">25px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
        }

        <span class="hljs-selector-class">.demo-header</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#2d3748</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: space-between;
            <span class="hljs-attribute">align-items</span>: center;
        }

        <span class="hljs-selector-class">.demo-header</span> <span class="hljs-selector-class">.badge</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#48bb78</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.25rem</span> <span class="hljs-number">0.75rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>;
        }

        <span class="hljs-selector-class">.demo-header</span> <span class="hljs-selector-class">.badge-warning</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f59e0b</span>;
        }

        <span class="hljs-selector-class">.code-container</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#1e1e1e</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">overflow-x</span>: auto;
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">400px</span>;
        }

        <span class="hljs-selector-class">.code-block</span> {
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Consolas'</span>, <span class="hljs-string">'Monaco'</span>, <span class="hljs-string">'Courier New'</span>, monospace;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#d4d4d4</span>;
            <span class="hljs-attribute">white-space</span>: pre;
        }

        <span class="hljs-comment">/* CSS Highlights API Styles */</span>
        ::<span class="hljs-built_in">highlight</span>(keyword) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#569cd6</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }

        ::<span class="hljs-built_in">highlight</span>(string) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#ce9178</span>;
        }

        ::<span class="hljs-built_in">highlight</span>(comment) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#6a9955</span>;
            <span class="hljs-attribute">font-style</span>: italic;
        }

        ::<span class="hljs-built_in">highlight</span>(function) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#dcdcaa</span>;
        }

        ::<span class="hljs-built_in">highlight</span>(number) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#b5cea8</span>;
        }

        ::<span class="hljs-built_in">highlight</span>(operator) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#d4d4d4</span>;
        }

        ::<span class="hljs-built_in">highlight</span>(punctuation) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#d4d4d4</span>;
        }

        ::<span class="hljs-built_in">highlight</span>(identifier) {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#9cdcfe</span>;
        }

        <span class="hljs-comment">/* Traditional span-based highlighting */</span>
        <span class="hljs-selector-class">.token-keyword</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#569cd6</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }

        <span class="hljs-selector-class">.token-string</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#ce9178</span>;
        }

        <span class="hljs-selector-class">.token-comment</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#6a9955</span>;
            <span class="hljs-attribute">font-style</span>: italic;
        }

        <span class="hljs-selector-class">.token-function</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#dcdcaa</span>;
        }

        <span class="hljs-selector-class">.token-number</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#b5cea8</span>;
        }

        <span class="hljs-selector-class">.token-operator</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#d4d4d4</span>;
        }

        <span class="hljs-selector-class">.token-punctuation</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#d4d4d4</span>;
        }

        <span class="hljs-selector-class">.token-identifier</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#9cdcfe</span>;
        }

        <span class="hljs-selector-class">.stats</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
        }

        <span class="hljs-selector-class">.stats</span> <span class="hljs-selector-tag">h3</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#667eea</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
        }

        <span class="hljs-selector-class">.stats-grid</span> {
            <span class="hljs-attribute">display</span>: grid;
            <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">1</span>fr));
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
        }

        <span class="hljs-selector-class">.stat-item</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f7fafc</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
            <span class="hljs-attribute">border-left</span>: <span class="hljs-number">4px</span> solid <span class="hljs-number">#667eea</span>;
        }

        <span class="hljs-selector-class">.stat-label</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#718096</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.25rem</span>;
        }

        <span class="hljs-selector-class">.stat-value</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#2d3748</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
        }

        <span class="hljs-selector-class">.warning</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fef3c7</span>;
            <span class="hljs-attribute">border-left</span>: <span class="hljs-number">4px</span> solid <span class="hljs-number">#f59e0b</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
        }

        <span class="hljs-selector-class">.warning</span> <span class="hljs-selector-tag">p</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#92400e</span>;
        }

        <span class="hljs-selector-class">.hidden</span> {
            <span class="hljs-attribute">display</span>: none;
        }

        <span class="hljs-selector-class">.controls</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2rem</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">text-align</span>: center;
        }

        <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#667eea</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.75rem</span> <span class="hljs-number">1.5rem</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.5rem</span>;
            <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
        }

        <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#5568d3</span>;
        }

        <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:active</span> {
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">1px</span>);
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ğŸ¨ CSS Highlights API æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å…³äºæ­¤æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                æ­¤æ¼”ç¤ºå¯¹æ¯”äº†ä¸¤ç§è¯­æ³•é«˜äº®æ–¹æ³•ï¼šç°ä»£çš„ <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>CSS Highlights API<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>ï¼ˆå·¦ä¾§ï¼‰ä¸ä¼ ç»Ÿçš„
                <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>åŸºäº DOM çš„é«˜äº®<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>ï¼ˆå³ä¾§ï¼‰ã€‚CSS Highlights API æä¾›é«˜æ€§èƒ½çš„è¯­æ³•é«˜äº®ï¼Œ
                æ— éœ€æ“ä½œ DOMï¼Œå°†æ–‡æœ¬ä¿æŒåœ¨å•ä¸ªæ–‡æœ¬èŠ‚ç‚¹ä¸­ï¼Œä»¥è·å¾—æœ€ä½³æ¸²æŸ“æ€§èƒ½ã€‚
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"remeasure()"</span>&gt;</span>ğŸ”„ é‡æ–°æµ‹é‡æ€§èƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"changeCode()"</span>&gt;</span>ğŸ² åˆ‡æ¢ä»£ç ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-grid"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-section"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-header"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>CSS Highlights API<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge"</span>&gt;</span>ç°ä»£æ–¹æ¡ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"code-container"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"code-block"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"highlights-demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-section"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-header"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä¼ ç»Ÿ DOM Span æ–¹æ¡ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge badge-warning"</span>&gt;</span>ä¼ ç»Ÿæ–¹æ¡ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"code-container"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"code-block"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"traditional-demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stats"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ“Š æ€§èƒ½å¯¹æ¯”<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stats-grid"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>CSS Highlights - DOM èŠ‚ç‚¹æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"highlights-nodes"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>ä¼ ç»Ÿæ–¹æ¡ˆ - DOM èŠ‚ç‚¹æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"traditional-nodes"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>CSS Highlights - æ¸²æŸ“æ—¶é—´<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"highlights-time"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>ä¼ ç»Ÿæ–¹æ¡ˆ - æ¸²æŸ“æ—¶é—´<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"traditional-time"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>æ€§èƒ½æå‡<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"improvement"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-item"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-label"</span>&gt;</span>å†…å­˜èŠ‚çœ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat-value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"memory-saved"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"warning hidden"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"browser-warning"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>âš ï¸ æµè§ˆå™¨å…¼å®¹æ€§ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ CSS Highlights APIã€‚åªæœ‰ä¼ ç»Ÿçš„é«˜äº®æ–¹æ³•èƒ½æ­£å¸¸å·¥ä½œã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// ä»£ç ç¤ºä¾‹</span>
        <span class="hljs-keyword">const</span> codeSamples = [
            <span class="hljs-string">`// JavaScript ç¤ºä¾‹
function fibonacci(n) {
    // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°
    if (n &lt;= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

const result = fibonacci(10);
console.log("ç»“æœ:", result);

// æ•°ç»„æ“ä½œ
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(x =&gt; x * 2);`</span>,

            <span class="hljs-string">`// React ç»„ä»¶
function UserProfile({ name, age }) {
    const [isActive, setActive] = useState(false);

    // å¤„ç†ç‚¹å‡»äº‹ä»¶
    const handleClick = () =&gt; {
        setActive(!isActive);
        console.log("çŠ¶æ€å·²æ”¹å˜");
    };

    return (
        &lt;div className="profile"&gt;
            &lt;h1&gt;{name}&lt;/h1&gt;
            &lt;p&gt;å¹´é¾„: {age}&lt;/p&gt;
        &lt;/div&gt;
    );
}`</span>,

            <span class="hljs-string">`// TypeScript æ¥å£
interface User {
    id: number;
    name: string;
    email: string;
}

function getUserData(userId: number): Promise&lt;User&gt; {
    // è·å–ç”¨æˆ·æ•°æ®
    return fetch(\`/api/users/\${userId}\`)
        .then(response =&gt; response.json())
        .catch(error =&gt; {
            console.error("é”™è¯¯:", error);
            throw error;
        });
}`</span>
        ];

        <span class="hljs-keyword">let</span> currentCodeIndex = <span class="hljs-number">0</span>;

        <span class="hljs-comment">/**
         * è¯æ³•åˆ†æå™¨ - å°†ä»£ç æ–‡æœ¬è§£ææˆ token åˆ—è¡¨
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">code</span> - è¦åˆ†æçš„æºä»£ç 
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Array</span>} - token æ•°ç»„ï¼Œæ¯ä¸ª token åŒ…å« type, start, end, value
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">tokenize</span>(<span class="hljs-params">code</span>) {
            <span class="hljs-keyword">const</span> tokens = [];

            <span class="hljs-comment">// å®šä¹‰åŒ¹é…è§„åˆ™ï¼Œé¡ºåºå¾ˆé‡è¦ï¼š</span>
            <span class="hljs-comment">// 1. comment å’Œ string æ”¾åœ¨æœ€å‰é¢ï¼Œç¡®ä¿å®ƒä»¬å†…éƒ¨çš„å†…å®¹ä¸ä¼šè¢«å…¶ä»–è§„åˆ™åŒ¹é…</span>
            <span class="hljs-comment">// 2. åç»­è§„åˆ™æŒ‰ç…§ä¼˜å…ˆçº§æ’åˆ—</span>
            <span class="hljs-keyword">const</span> patterns = [
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'comment'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\/\/[^\n]*/g</span> },                    <span class="hljs-comment">// å•è¡Œæ³¨é‡Š</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/(["'`])(?:(?=(\\?))\2.)*?\1/g</span> },   <span class="hljs-comment">// å­—ç¬¦ä¸²ï¼ˆæ”¯æŒå•å¼•å·ã€åŒå¼•å·ã€æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'keyword'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b(function|const|let|var|if|else|return|class|interface|async|await|import|export|from|new|typeof|instanceof)\b/g</span> }, <span class="hljs-comment">// JavaScript å…³é”®å­—</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b\d+\.?\d*\b/g</span> },                 <span class="hljs-comment">// æ•°å­—ï¼ˆæ•´æ•°å’Œå°æ•°ï¼‰</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'function'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/\b[a-zA-Z_$][a-zA-Z0-9_$]*(?=\()/g</span> }, <span class="hljs-comment">// å‡½æ•°åï¼ˆåé¢è·Ÿç€å·¦æ‹¬å·ï¼‰</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'operator'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/[+\-*/%=&lt;&gt;!&amp;|^~?:]/g</span> },          <span class="hljs-comment">// è¿ç®—ç¬¦</span>
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'punctuation'</span>, <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/[{}[\]();,\.]/g</span> },            <span class="hljs-comment">// æ ‡ç‚¹ç¬¦å·</span>
            ];

            <span class="hljs-comment">// éå†æ‰€æœ‰è§„åˆ™ï¼Œæ”¶é›†åŒ¹é…çš„ token</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { type, regex } <span class="hljs-keyword">of</span> patterns) {
                <span class="hljs-keyword">let</span> match;
                <span class="hljs-keyword">while</span> ((match = regex.<span class="hljs-title function_">exec</span>(code)) !== <span class="hljs-literal">null</span>) {
                    tokens.<span class="hljs-title function_">push</span>({
                        type,
                        <span class="hljs-attr">start</span>: match.<span class="hljs-property">index</span>,
                        <span class="hljs-attr">end</span>: match.<span class="hljs-property">index</span> + match[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>,
                        <span class="hljs-attr">value</span>: match[<span class="hljs-number">0</span>]
                    });
                }
            }

            <span class="hljs-comment">// æŒ‰èµ·å§‹ä½ç½®æ’åº</span>
            tokens.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">start</span> - b.<span class="hljs-property">start</span>);

            <span class="hljs-comment">// å»é™¤é‡å çš„ tokenï¼ˆä¿ç•™å…ˆåŒ¹é…åˆ°çš„ï¼‰</span>
            <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ³¨é‡Šä¸­çš„å†’å·ä¸åº”è¯¥è¢« operator è§„åˆ™å†æ¬¡åŒ¹é…</span>
            <span class="hljs-keyword">const</span> filteredTokens = [];
            <span class="hljs-keyword">let</span> lastEnd = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
                <span class="hljs-keyword">if</span> (token.<span class="hljs-property">start</span> &gt;= lastEnd) {
                    filteredTokens.<span class="hljs-title function_">push</span>(token);
                    lastEnd = token.<span class="hljs-property">end</span>;
                }
            }

            <span class="hljs-keyword">return</span> filteredTokens;
        }

        <span class="hljs-comment">/**
         * åº”ç”¨ CSS Highlights API è¿›è¡Œè¯­æ³•é«˜äº®
         * æ ¸å¿ƒæ€æƒ³ï¼šä¸åˆ›å»ºé¢å¤–çš„ DOM èŠ‚ç‚¹ï¼Œé€šè¿‡ Range å¯¹è±¡æ ‡è®°æ–‡æœ¬ä½ç½®
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">element</span> - ç›®æ ‡å…ƒç´ 
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">code</span> - æºä»£ç 
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} - åŒ…å«æ€§èƒ½æ•°æ®å’Œæ¸…ç†å‡½æ•°
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlights</span>(<span class="hljs-params">element, code</span>) {
            <span class="hljs-comment">// æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ CSS Highlights API</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>) {
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'browser-warning'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'hidden'</span>);
                <span class="hljs-keyword">return</span> { <span class="hljs-attr">time</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">nodes</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">cleanup</span>: <span class="hljs-function">() =&gt;</span> {} };
            }

            <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();

            <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„æ‰€æœ‰é«˜äº®</span>
            <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">clear</span>();

            <span class="hljs-comment">// å°†ä»£ç è®¾ç½®ä¸ºçº¯æ–‡æœ¬å†…å®¹ï¼ˆåªæœ‰ä¸€ä¸ª text nodeï¼‰</span>
            element.<span class="hljs-property">textContent</span> = code;

            <span class="hljs-keyword">const</span> textNode = element.<span class="hljs-property">firstChild</span>;
            <span class="hljs-keyword">if</span> (!textNode) <span class="hljs-keyword">return</span> { <span class="hljs-attr">time</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">nodes</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">cleanup</span>: <span class="hljs-function">() =&gt;</span> {} };

            <span class="hljs-comment">// è·å–æ‰€æœ‰ token</span>
            <span class="hljs-keyword">const</span> tokens = <span class="hljs-title function_">tokenize</span>(code);

            <span class="hljs-comment">// æŒ‰ token ç±»å‹åˆ†ç»„ï¼Œæ¯ç§ç±»å‹å¯¹åº”ä¸€ä¸ª Highlight å¯¹è±¡</span>
            <span class="hljs-keyword">const</span> tokensByType = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
                <span class="hljs-keyword">if</span> (!tokensByType.<span class="hljs-title function_">has</span>(token.<span class="hljs-property">type</span>)) {
                    tokensByType.<span class="hljs-title function_">set</span>(token.<span class="hljs-property">type</span>, []);
                }

                <span class="hljs-comment">// åˆ›å»º Range å¯¹è±¡æ ‡è®° token åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®</span>
                <span class="hljs-comment">// å…³é”®ï¼šRange åªæ˜¯æ ‡è®°ä½ç½®ï¼Œä¸ä¿®æ”¹ DOM ç»“æ„</span>
                <span class="hljs-keyword">const</span> range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
                range.<span class="hljs-title function_">setStart</span>(textNode, token.<span class="hljs-property">start</span>);
                range.<span class="hljs-title function_">setEnd</span>(textNode, token.<span class="hljs-property">end</span>);
                tokensByType.<span class="hljs-title function_">get</span>(token.<span class="hljs-property">type</span>).<span class="hljs-title function_">push</span>(range);
            }

            <span class="hljs-comment">// ä¸ºæ¯ç§ token ç±»å‹æ³¨å†Œ Highlight</span>
            <span class="hljs-comment">// CSS ä¸­çš„ ::highlight(keyword)ã€::highlight(string) ç­‰ä¼šåŒ¹é…è¿™é‡Œæ³¨å†Œçš„åç§°</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [type, ranges] <span class="hljs-keyword">of</span> tokensByType) {
                <span class="hljs-keyword">const</span> highlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(...ranges);
                <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(type, highlight);
            }

            <span class="hljs-keyword">const</span> endTime = performance.<span class="hljs-title function_">now</span>();

            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">time</span>: (endTime - startTime).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>),
                <span class="hljs-attr">nodes</span>: <span class="hljs-title function_">countNodes</span>(element),
                <span class="hljs-attr">cleanup</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">clear</span>()
            };
        }

        <span class="hljs-comment">/**
         * åº”ç”¨ä¼ ç»Ÿçš„åŸºäº DOM çš„è¯­æ³•é«˜äº®
         * ä¼ ç»Ÿæ–¹æ³•ï¼šä¸ºæ¯ä¸ª token åˆ›å»ºä¸€ä¸ª &lt;span&gt; å…ƒç´ 
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} <span class="hljs-variable">element</span> - ç›®æ ‡å…ƒç´ 
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">code</span> - æºä»£ç 
         * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} - åŒ…å«æ€§èƒ½æ•°æ®
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">applyTraditional</span>(<span class="hljs-params">element, code</span>) {
            <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();

            <span class="hljs-keyword">const</span> tokens = <span class="hljs-title function_">tokenize</span>(code);
            <span class="hljs-keyword">let</span> html = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">let</span> lastIndex = <span class="hljs-number">0</span>;

            <span class="hljs-comment">// éå†æ‰€æœ‰ tokenï¼Œæ„å»º HTML å­—ç¬¦ä¸²</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> token <span class="hljs-keyword">of</span> tokens) {
                <span class="hljs-comment">// æ·»åŠ  token ä¹‹å‰çš„æ™®é€šæ–‡æœ¬</span>
                html += escapeHtml(code.<span class="hljs-title function_">substring</span>(lastIndex, token.<span class="hljs-property">start</span>));

                <span class="hljs-comment">// ä¸º token åŒ…è£¹ span æ ‡ç­¾ï¼Œæ·»åŠ å¯¹åº”çš„ class</span>
                <span class="hljs-comment">// ç¼ºç‚¹ï¼šæ¯ä¸ª token éƒ½åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œå¤§é‡ä»£ç ä¼šäº§ç”Ÿæ•°ç™¾ä¸ªèŠ‚ç‚¹</span>
                html += <span class="hljs-string">`&lt;span class="token-<span class="hljs-subst">${token.type}</span>"&gt;<span class="hljs-subst">${escapeHtml(token.value)}</span>&lt;/span&gt;`</span>;
                lastIndex = token.<span class="hljs-property">end</span>;
            }

            <span class="hljs-comment">// æ·»åŠ æœ€åçš„å‰©ä½™æ–‡æœ¬</span>
            html += escapeHtml(code.<span class="hljs-title function_">substring</span>(lastIndex));

            <span class="hljs-comment">// å°† HTML å­—ç¬¦ä¸²æ’å…¥ DOMï¼ˆè§¦å‘æµè§ˆå™¨è§£æå’Œæ¸²æŸ“ï¼‰</span>
            element.<span class="hljs-property">innerHTML</span> = html;

            <span class="hljs-keyword">const</span> endTime = performance.<span class="hljs-title function_">now</span>();

            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">time</span>: (endTime - startTime).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>),
                <span class="hljs-attr">nodes</span>: <span class="hljs-title function_">countNodes</span>(element)
            };
        }

        <span class="hljs-comment">/**
         * HTML è½¬ä¹‰å‡½æ•° - é˜²æ­¢ XSS æ”»å‡»
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">escapeHtml</span>(<span class="hljs-params">text</span>) {
            <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
            div.<span class="hljs-property">textContent</span> = text;
            <span class="hljs-keyword">return</span> div.<span class="hljs-property">innerHTML</span>;
        }

        <span class="hljs-comment">/**
         * ç»Ÿè®¡ DOM èŠ‚ç‚¹æ•°é‡
         * ç”¨äºå¯¹æ¯”ä¸¤ç§æ–¹æ³•çš„å†…å­˜å ç”¨å·®å¼‚
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">countNodes</span>(<span class="hljs-params">element</span>) {
            <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(element, <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_ALL</span>);
            <span class="hljs-keyword">while</span> (walker.<span class="hljs-title function_">nextNode</span>()) count++;
            <span class="hljs-keyword">return</span> count;
        }

        <span class="hljs-comment">/**
         * æ›´æ–°æ€§èƒ½ç»Ÿè®¡æ•°æ®æ˜¾ç¤º
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStats</span>(<span class="hljs-params">highlightsResult, traditionalResult</span>) {
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'highlights-nodes'</span>).<span class="hljs-property">textContent</span> = highlightsResult.<span class="hljs-property">nodes</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'traditional-nodes'</span>).<span class="hljs-property">textContent</span> = traditionalResult.<span class="hljs-property">nodes</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'highlights-time'</span>).<span class="hljs-property">textContent</span> = highlightsResult.<span class="hljs-property">time</span> + <span class="hljs-string">' ms'</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'traditional-time'</span>).<span class="hljs-property">textContent</span> = traditionalResult.<span class="hljs-property">time</span> + <span class="hljs-string">' ms'</span>;

            <span class="hljs-comment">// è®¡ç®—æ€§èƒ½æå‡ç™¾åˆ†æ¯”</span>
            <span class="hljs-keyword">const</span> improvement = ((traditionalResult.<span class="hljs-property">time</span> - highlightsResult.<span class="hljs-property">time</span>) / traditionalResult.<span class="hljs-property">time</span> * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>);
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'improvement'</span>).<span class="hljs-property">textContent</span> = improvement + <span class="hljs-string">'%'</span>;

            <span class="hljs-comment">// è®¡ç®—å†…å­˜èŠ‚çœç™¾åˆ†æ¯”</span>
            <span class="hljs-keyword">const</span> memorySaved = ((traditionalResult.<span class="hljs-property">nodes</span> - highlightsResult.<span class="hljs-property">nodes</span>) / traditionalResult.<span class="hljs-property">nodes</span> * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>);
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'memory-saved'</span>).<span class="hljs-property">textContent</span> = memorySaved + <span class="hljs-string">'%'</span>;
        }

        <span class="hljs-comment">/**
         * æ¸²æŸ“ä»£ç å¹¶åº”ç”¨ä¸¤ç§é«˜äº®æ–¹æ³•
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderCode</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> code = codeSamples[currentCodeIndex];
            <span class="hljs-keyword">const</span> highlightsElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'highlights-demo'</span>);
            <span class="hljs-keyword">const</span> traditionalElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'traditional-demo'</span>);

            <span class="hljs-comment">// åˆ†åˆ«åº”ç”¨ä¸¤ç§æ–¹æ³•ï¼Œå¯¹æ¯”æ€§èƒ½å·®å¼‚</span>
            <span class="hljs-keyword">const</span> highlightsResult = <span class="hljs-title function_">applyHighlights</span>(highlightsElement, code);
            <span class="hljs-keyword">const</span> traditionalResult = <span class="hljs-title function_">applyTraditional</span>(traditionalElement, code);

            <span class="hljs-title function_">updateStats</span>(highlightsResult, traditionalResult);
        }

        <span class="hljs-comment">/**
         * åˆ‡æ¢ä»£ç ç¤ºä¾‹
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeCode</span>(<span class="hljs-params"/>) {
            currentCodeIndex = (currentCodeIndex + <span class="hljs-number">1</span>) % codeSamples.<span class="hljs-property">length</span>;
            <span class="hljs-title function_">renderCode</span>();
        }

        <span class="hljs-comment">/**
         * é‡æ–°æµ‹é‡æ€§èƒ½
         */</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">remeasure</span>(<span class="hljs-params"/>) {
            <span class="hljs-title function_">renderCode</span>();
        }

        <span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, renderCode);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€è¡Œä»£ç çš„â€œæ³•å¾‹é™·é˜±â€ï¼šå¼€å‘è€…å¿…é¡»äº†è§£çš„å¼€æºè®¸å¯è¯çŸ¥è¯†]]></title>    <link>https://juejin.cn/post/7571641339689205760</link>    <guid>https://juejin.cn/post/7571641339689205760</guid>    <pubDate>2025-11-12T13:21:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571641339689205760" data-draft-id="7571650164844003362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€è¡Œä»£ç çš„â€œæ³•å¾‹é™·é˜±â€ï¼šå¼€å‘è€…å¿…é¡»äº†è§£çš„å¼€æºè®¸å¯è¯çŸ¥è¯†"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-12T13:21:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Konata_9"/> <meta itemprop="url" content="https://juejin.cn/user/888061123629997"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€è¡Œä»£ç çš„â€œæ³•å¾‹é™·é˜±â€ï¼šå¼€å‘è€…å¿…é¡»äº†è§£çš„å¼€æºè®¸å¯è¯çŸ¥è¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888061123629997/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Konata_9
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T13:21:47.000Z" title="Wed Nov 12 2025 13:21:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä¹‹å‰åœ¨å¼€å‘ä¸€ä¸ª PGP åŠ å¯†çš„åŠŸèƒ½ã€‚åœ¨ Node.js ç”Ÿæ€ä¸­å¯»è§…äº†ä¸€ç•ªåï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªè¿‘ä¹å®Œç¾çš„åº“â€”â€”<code>openpgp.js</code>ã€‚å®ƒçš„ Star æ•°å¾ˆé«˜ï¼Œç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£é½å…¨ï¼ŒAPI è®¾è®¡ä¹Ÿç›¸å½“ä¼˜é›…ï¼Œå®Œç¾å¥‘åˆæˆ‘çš„éœ€æ±‚ã€‚</p>
<p>ä½†å½“æˆ‘æ•´ç†å¥½è®¾è®¡æ–¹æ¡ˆå¹¶å‘å›¢é˜Ÿä»‹ç»æˆ‘æ‰¾åˆ°çš„è¿™ä¸ªâ€œç¥å™¨â€æ—¶ï¼Œæˆ‘çš„è€å¤§æå‡ºäº†ä¸€ä¸ªå…³é”®çš„é—®é¢˜ï¼š</p>
<p>â€œè¿™ä¸ªåº“ç”¨çš„æ˜¯ä»€ä¹ˆå¼€æºè®¸å¯è¯ï¼Ÿâ€</p>
<p>æˆ‘å¿ƒé‡Œå’¯å™”ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘çŸ¥é“å…¬å¸å¯¹å¼€æºè®¸å¯è¯æœ‰ä¸¥æ ¼çš„è¦æ±‚ã€‚ä½† <code>openpgp.js</code> ç”¨çš„æ˜¯ LGPL è®¸å¯è¯ï¼Œåœ¨é¡¹ç›®ä¸­ä¹Ÿåªæ˜¯å¼•ç”¨ã€‚å› æ­¤æˆ‘å¹¶æ²¡è§‰å¾—è¿™æ˜¯ä¸ªå¤§é—®é¢˜ã€‚</p>
<p>äºæ˜¯æˆ‘å›ç­”é“ï¼šâ€œæ˜¯ LGPLï¼Œä½†æˆ‘ä»¬åªæ˜¯åœ¨é¡¹ç›®ä¸­å¼•ç”¨ã€‚æ€ä¹ˆäº†ï¼Ÿâ€</p>
<p>è€å¤§çš„å›å¤å¾ˆåšå†³ï¼šâ€œä¸è¡Œï¼ŒLGPL æœ‰é£é™©ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å•†ä¸šé—­æºé¡¹ç›®ä¸­ä½¿ç”¨ã€‚ä½ å¾—æ¢ä¸€ä¸ªåº“ã€‚â€</p>
<p>é¢„æ–™ä¸­çš„ç»“æœè¿˜æ˜¯å‘ç”Ÿäº†ã€‚ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€ç¤¾åŒºæ´»è·ƒçš„åº“ï¼Œå°±å› ä¸ºä¸€ä¸ªâ€œè®¸å¯è¯â€è¢«æ‹’ä¹‹é—¨å¤–äº†ã€‚å› ä¸ºå¯¹äºå•†ä¸šé¡¹ç›®æ¥è¯´ï¼Œæ³•å¾‹çš„åˆè§„æ€§è¿œæ¯”åŠŸèƒ½æ¥å¾—æ›´é‡è¦ã€‚</p>
<p>è€Œâ€œå¼€æºè½¯ä»¶è®¸å¯è¯â€è¿™ä¸ªæ—¥å¸¸ä¸æˆ‘ä»¬å¼€å‘è€…æ‰“äº¤é“ã€å´å¸¸å¸¸å¿½ç•¥çš„å°äº‹ï¼ŒèƒŒåå¯èƒ½éšè—ç€å·¨å¤§çš„æ³•å¾‹é£é™©ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘æƒ³æŠŠæˆ‘çš„è¿™æ®µç»å†å’Œå­¦ä¹ å¿ƒå¾—æ•´ç†å‡ºæ¥ï¼Œå˜æˆä¸€ç¯‡æç®€æŒ‡å—ã€‚å¸Œæœ›å®ƒèƒ½å¸®åŠ©ä½ ï¼Œåœ¨é€‰æ‹©ä¾èµ–åº“æ—¶ä¸ä¼šé™·å…¥æ³•å¾‹å›°å¢ƒã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9d70a829e9244bf93e51ffcd6097276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763558507&amp;x-signature=A8aeq3yTBwYRedQF%2FeQdV1ZElyM%3D" alt="" loading="lazy"/></p>

<h2 data-id="heading-0">è®¸å¯è¯ï¼šä¸€è¡Œä»£ç èƒŒåçš„â€œæ³•å¾‹åˆåŒâ€</h2>
<p>æœ‰å¼€å‘è€…ä¼šæƒ³ï¼Œâ€œä¸å°±æ˜¯ä¸€ä¸ªè®¸å¯è¯å—ï¼Ÿæœ‰é‚£ä¹ˆä¸¥é‡ï¼Ÿâ€</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>éå¸¸ä¸¥é‡</strong>ã€‚</p>
<p>ä¸å°è±¡ä¸­çš„æ–‡æ¡£ä¸åŒï¼š<strong>å¼€æºè®¸å¯è¯åœ¨æ³•å¾‹ä¸Šé€šå¸¸è¢«è§†ä¸ºä¸€ä»½å…·æœ‰çº¦æŸåŠ›çš„åˆåŒ</strong>ã€‚å½“ä½ ä¸‹è½½å¹¶ä½¿ç”¨ä¸€ä¸ªå¼€æºé¡¹ç›®æ—¶ï¼Œå°±æ„å‘³ç€ä½ é»˜è®¤åŒæ„äº†è¿™ä»½â€œåˆåŒâ€çš„æ‰€æœ‰æ¡æ¬¾ã€‚å®ƒä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªé“å¾·ä¸Šçš„å»ºè®®ï¼Œè€Œæ˜¯ä¸€ä»½å…·å¤‡æ³•å¾‹æ•ˆåŠ›çš„æ–‡ä»¶ã€‚</p>
<p>å¼€æºè¿åŠ¨çš„åˆè¡·æ˜¯ä¸ºäº†â€œè‡ªç”±â€ä¸â€œå…±äº«â€ï¼Œä½†è¿™ç§è‡ªç”±å¹¶éæ¯«æ— è¾¹ç•Œã€‚è®¸å¯è¯æ­£æ˜¯ä¸ºäº†ä¿æŠ¤ä½œè€…çš„æƒåˆ©ï¼Œå¹¶æ˜ç¡®ä½¿ç”¨è€…åœ¨ä½•ç§æ¡ä»¶ä¸‹å¯ä»¥â€œè‡ªç”±â€åœ°ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ä»£ç è€Œå­˜åœ¨çš„ã€‚</p>
<p>ä¸€æ—¦ä½ è¿åäº†è¿™ä»½â€œåˆåŒâ€ï¼Œå°±å¯èƒ½é¢ä¸´ä¸¥é‡çš„æ³•å¾‹åæœã€‚å›½å†…å¤–å·²æœ‰ä¸å°‘å…¬å¸ä¸ºæ­¤ä»˜å‡ºäº†æƒ¨ç—›çš„ä»£ä»·ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abfe168904434fb6bb4c2ae800867727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763558507&amp;x-signature=b%2BhZ%2FLfyUBbTcH9Cc0kONOfo7jQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">çœŸå®çš„â€œè¸©å‘â€æ¡ˆä¾‹</h3>
<p>åœ¨å›½å†…ï¼Œä¸€ä¸ªéå¸¸è‘—åçš„æ¡ˆä¾‹æ˜¯â€œç½—ç›’å…¬å¸è¯‰ç©å‹å…¬å¸æ¡ˆâ€ã€‚ç®€å•æ¥è¯´ï¼Œç©å‹å…¬å¸åœ¨å…¶å•†ä¸šäº§å“ä¸­ä½¿ç”¨äº†éµå¾ª <code>GPL 3.0</code> åè®®çš„å¼€æºä»£ç ï¼Œä½†å¹¶æœªæŒ‰ç…§åè®®è¦æ±‚å°†è‡ªå·±çš„äº§å“ä¹Ÿå¼€æºã€‚æœ€ç»ˆï¼Œæ³•é™¢åˆ¤å†³ç©å‹å…¬å¸è´¥è¯‰ï¼Œä¸ä»…éœ€è¦åœæ­¢ä¾µæƒè¡Œä¸ºï¼Œè¿˜èµ”å¿äº†åŸå‘Š 50 ä¸‡å…ƒã€‚</p>
<p>è¿™ä¸ªæ¡ˆä¾‹æ¸…æ™°åœ°ä¼ é€’äº†ä¸€ä¸ªä¿¡å·ï¼šåœ¨ä¸­å›½ï¼Œè¿åå¼€æºè®¸å¯è¯å°±æ˜¯ä¸€ç§ä¾µæƒè¡Œä¸ºï¼Œéœ€è¦æ‰¿æ‹…æ³•å¾‹è´£ä»»ã€‚</p>
<p>åœ¨å›½å¤–ï¼Œç±»ä¼¼çš„æ¡ˆä¾‹æ›´æ˜¯å±¡è§ä¸é²œã€‚ä¾‹å¦‚ï¼Œæ³•å›½çš„ Orange å…¬å¸å› åœ¨å…¶å•†ä¸šè½¯ä»¶ä¸­è¿è§„ä½¿ç”¨äº† <code>GPLv2</code> è®¸å¯çš„ç»„ä»¶ï¼Œæœ€ç»ˆè¢«åˆ¤èµ”å¿é«˜è¾¾æ•°åä¸‡æ¬§å…ƒã€‚</p>
<p>è¿™äº›æ¡ˆä¾‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå¿½è§†å¼€æºè®¸å¯è¯å¯èƒ½å¯¼è‡´ï¼š</p>
<ol>
<li><strong>é«˜é¢èµ”å¿</strong>ï¼šä½ éœ€è¦ä¸ºä½ çš„ä¾µæƒè¡Œä¸ºæ”¯ä»˜ç»æµèµ”å¿ã€‚</li>
<li><strong>å¼ºåˆ¶å¼€æº</strong>ï¼šå¯¹äºåƒ <code>GPL</code> è¿™æ ·å…·æœ‰â€œä¼ æŸ“æ€§â€çš„è®¸å¯è¯ï¼Œä½ å¯èƒ½è¢«è¿«å°†æ•´ä¸ªé¡¹ç›®çš„æºä»£ç å…¬ä¹‹äºä¼—ï¼Œè¿™å¯¹äºå•†ä¸šå…¬å¸æ¥è¯´æ˜¯è‡´å‘½çš„æ‰“å‡»ã€‚</li>
<li><strong>äº§å“ä¸‹æ¶</strong>ï¼šæ³•é™¢ä¼šåˆ¤ä»¤ä½ åœæ­¢æ‰€æœ‰ä¾µæƒè¡Œä¸ºï¼Œæ„å‘³ç€ä½ çš„äº§å“éœ€è¦ç«‹åˆ»ä¸‹æ¶ï¼Œæ‰€æœ‰åŠªåŠ›ä»˜è¯¸ä¸œæµã€‚</li>
</ol>
<p>åŸæ¥æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­éšæ‰‹ <code>npm install</code> çš„ä¸€ä¸ªåº“ï¼ŒèƒŒåç«Ÿç„¶éšè—ç€å¦‚æ­¤å¤§çš„å­¦é—®å’Œé£é™©ã€‚</p>
<h2 data-id="heading-2">åŒ–ç¹ä¸ºç®€ï¼šä¸‰åˆ†é’Ÿçœ‹æ‡‚ä¸»æµå¼€æºè®¸å¯è¯</h2>
<p>å·¥ä½œä¸­ç¦»å¼€å¼€æºè½¯ä»¶ä¼šè®©æˆ‘ä»¬ä¸¾æ­¥ç»´è‰°ã€‚åœ¨ç”¨å¥½å¼€æºè½¯ä»¶çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯å­¦ä¼šå¦‚ä½•å®‰å…¨ã€åˆè§„åœ°ä»ä¸­å¯»å®ã€‚ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯çœ‹æ‡‚å®è—ä¸Šçš„â€œæ ‡ç­¾â€â€”â€”ä¹Ÿå°±æ˜¯å„ç§å„æ ·çš„å¼€æºè®¸å¯è¯ã€‚</p>
<p>è®¸å¯è¯çš„ç§ç±»ç¹å¤šï¼Œä½†å¯¹äºæˆ‘ä»¬æ—¥å¸¸å¼€å‘è€…æ¥è¯´ï¼Œåªéœ€è¦äº†è§£æœ€ä¸»æµçš„å‡ ç§å°±è¶³å¤Ÿäº†ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘æŠŠå®ƒä»¬å½¢è±¡åœ°åˆ†æˆäº†ä¸‰ä¸ªâ€œæ´¾åˆ«â€ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/222f4d3dab3347f38223e5f4d3a39bc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763558507&amp;x-signature=KLhcQXXWbr7mMxRIqAFMc9JzQ9c%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">1. â€œå®½å®¹æ´¾â€ (Permissive)</h3>
<p>è¿™ä¸ªæ´¾åˆ«çš„è®¸å¯è¯éå¸¸æ…·æ…¨ï¼Œé™åˆ¶æœ€å°‘ï¼Œå‡ ä¹å…è®¸ä½ åšä»»ä½•äº‹æƒ…ã€‚</p>
<ul>
<li><strong>ä»£è¡¨</strong>ï¼š<code>MIT</code>ã€<code>Apache 2.0</code>ã€<code>BSD</code></li>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šâ€œä»£ç ä½ éšä¾¿ç”¨ï¼Œç”¨åœ¨å•†ä¸šé¡¹ç›®é‡Œä¹Ÿå®Œå…¨æ²¡é—®é¢˜ã€‚ä½ å”¯ä¸€éœ€è¦åšçš„ï¼Œå°±æ˜¯åœ¨ä½ çš„é¡¹ç›®ä¸­ä¿ç•™æˆ‘çš„ç‰ˆæƒå£°æ˜ï¼Œå‘Šè¯‰åˆ«äººè¿™é‡Œç”¨äº†æˆ‘çš„ä»£ç ã€‚è‡³äºä½ çš„é¡¹ç›®æ˜¯å¦å¼€æºï¼Œæˆ‘ä¸åœ¨ä¹ã€‚â€</li>
<li><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šä½ æƒ³æ€ä¹ˆç”¨å°±æ€ä¹ˆç”¨ï¼Œä½†è¯·è®°å¾—â€œç½²åâ€ã€‚</li>
</ul>
<h3 data-id="heading-4">2. â€œäº’æƒ æ´¾â€ (Copyleft)</h3>
<p>è¿™ä¸ªæ´¾åˆ«çš„è®¸å¯è¯å¼ºè°ƒâ€œå…±äº«â€ä¸â€œå›é¦ˆâ€ï¼Œå¦‚æœä½ ä½¿ç”¨äº†å®ƒçš„ä»£ç ï¼Œä½ ä¹Ÿéœ€è¦åšå‡ºåŒæ ·çš„è´¡çŒ®ã€‚</p>
<ul>
<li><strong>ä»£è¡¨</strong>ï¼š<code>GPL</code> (General Public License)</li>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šâ€œæ¬¢è¿ä½¿ç”¨æˆ‘çš„ä»£ç ï¼Œä½†æœ‰ä¸€ä¸ªæ¡ä»¶ï¼šä»»ä½•ä½¿ç”¨äº†æˆ‘çš„ä»£ç çš„é¡¹ç›®ï¼Œä¹Ÿå¿…é¡»åŒæ ·ä»¥ <code>GPL</code> åè®®å¼€æºã€‚æˆ‘ä»¬è¦åšå¤§åšå¼ºï¼Œå†åˆ›è¾‰ç…Œï¼Œå¤§å®¶ä¸€èµ·ä¸ºçˆ±å‘ç”µï¼â€</li>
<li><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šç”¨äº†æˆ‘çš„ï¼Œä½ çš„ä¹Ÿå¾—æ˜¯å¤§å®¶çš„ã€‚</li>
</ul>
<p><code>GPL</code> å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œä¹Ÿè¢«ç§°ä¸ºå…·æœ‰â€œä¼ æŸ“æ€§â€çš„è®¸å¯è¯ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå•†ä¸šé—­æºé¡¹ç›®é€šå¸¸å¯¹å®ƒé¿ä¹‹ä¸åŠã€‚</p>
<h3 data-id="heading-5">3. â€œæŠ˜ä¸­æ´¾â€ (Weak Copyleft)</h3>
<p>è¿™ä¸ªæ´¾åˆ«ä»‹äºå‰ä¸¤è€…ä¹‹é—´ï¼Œè¯•å›¾åœ¨â€œè‡ªç”±ä½¿ç”¨â€å’Œâ€œå¼ºåˆ¶å¼€æºâ€ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚</p>
<ul>
<li><strong>ä»£è¡¨</strong>ï¼š<code>LGPL</code> (Lesser General Public License)ã€<code>Mozilla (MPL)</code></li>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šâ€œæˆ‘çš„ä»£ç ä½ å¯ä»¥ç”¨ã€‚å¦‚æœä½ åªæ˜¯â€˜å¼•ç”¨â€™æˆ‘ï¼ˆæ¯”å¦‚é€šè¿‡åŠ¨æ€é“¾æ¥çš„æ–¹å¼ä½¿ç”¨æˆ‘çš„åº“ï¼‰ï¼Œé‚£ä½ çš„é¡¹ç›®å¯ä»¥ä¸å¼€æºã€‚ä½†å¦‚æœä½ â€˜ä¿®æ”¹â€™äº†æˆ‘çš„ä»£ç ï¼Œæˆ–è€…å°†æˆ‘çš„ä»£ç é™æ€ç¼–è¯‘åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œé‚£ä¹ˆä½ ä¿®æ”¹æˆ–é›†æˆçš„éƒ¨åˆ†å°±éœ€è¦å¼€æºã€‚â€</li>
<li><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šä½ å¯ä»¥ç”¨æˆ‘ï¼Œä½†åˆ«æƒ³â€œç™½å«–â€æˆ‘çš„æ ¸å¿ƒä»£ç ã€‚</li>
</ul>
<p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æœ€åˆé€‰æ‹©çš„ <code>openpgp.js</code> (ä½¿ç”¨ LGPL) ä¼šè¢« Leader å¦å†³çš„åŸå› ã€‚å› ä¸ºåœ¨å•†ä¸šé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾ˆéš¾æ¸…æ™°åœ°ç•Œå®šâ€œå¼•ç”¨â€å’Œâ€œä¿®æ”¹â€çš„è¾¹ç•Œï¼Œä¸ºäº†è§„é¿æ³•å¾‹é£é™©ï¼Œæœ€ç¨³å¦¥çš„æ–¹å¼å°±æ˜¯ä¸ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-6">ä¸»æµè®¸å¯è¯å¯¹æ¯”</h3>
<p>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘æ•´ç†äº†ä¸€ä¸ªè¡¨æ ¼ï¼š</p>






















































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">MIT</th><th align="left">Apache 2.0</th><th align="left">GPL</th><th align="left">LGPL</th></tr></thead><tbody><tr><td align="left"><strong>èƒ½å¦å•†ç”¨</strong></td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âœ…</td></tr><tr><td align="left"><strong>èƒ½å¦é—­æº</strong></td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âŒ</td><td align="left">âœ… (æœ‰é™åˆ¶)</td></tr><tr><td align="left"><strong>æ˜¯å¦éœ€å£°æ˜ç‰ˆæƒ</strong></td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âœ…</td></tr><tr><td align="left"><strong>æ˜¯å¦éœ€å¼€æºè¡ç”Ÿä»£ç </strong></td><td align="left">âŒ</td><td align="left">âŒ</td><td align="left">âœ…</td><td align="left">âœ… (ä¿®æ”¹éƒ¨åˆ†)</td></tr><tr><td align="left"><strong>ä¸“åˆ©æˆæƒ</strong></td><td align="left">âŒ</td><td align="left">âœ…</td><td align="left">âœ…</td><td align="left">âœ…</td></tr><tr><td align="left"><strong>ä¸€å¥è¯æ€»ç»“</strong></td><td align="left">éšä¾¿ç”¨ï¼Œå¸¦ä¸Šæˆ‘å</td><td align="left">éšä¾¿ç”¨ï¼Œå¸¦ä¸Šæˆ‘åï¼Œåˆ«å‘Šæˆ‘</td><td align="left">ä½ çš„ä¹Ÿå¾—å¼€æº</td><td align="left">ä¿®æ”¹æˆ‘çš„éƒ¨åˆ†å¾—å¼€æº</td></tr></tbody></table>
<h2 data-id="heading-7">å¼€å‘è€…è¡ŒåŠ¨æŒ‡å—ï¼šå¦‚ä½•å®‰å…¨åœ°â€œå¯»å®â€</h2>
<p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ—¢äº†è§£äº†é£é™©ï¼Œä¹Ÿçœ‹æ‡‚äº†è§„åˆ™ã€‚é‚£ä¹ˆåœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åˆ°åº•è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</p>
<h3 data-id="heading-8">åœºæ™¯ä¸€ï¼šæˆ‘æƒ³å¼€æºè‡ªå·±çš„é¡¹ç›®ï¼Œè¯¥é€‰å“ªä¸ªè®¸å¯è¯ï¼Ÿ</h3>
<p>å½“ä½ å‡†å¤‡å°†è‡ªå·±çš„å¿ƒè¡€è´¡çŒ®ç»™å¼€æºç¤¾åŒºæ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è®¸å¯è¯è‡³å…³é‡è¦ã€‚ä½ å¯ä»¥é—®è‡ªå·±ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>ä½ æ˜¯å¦å¸Œæœ›ä½ çš„é¡¹ç›®è¢«å¹¿æ³›ä½¿ç”¨ï¼Œç”šè‡³è¢«å•†ä¸šå…¬å¸ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li><strong>æ˜¯</strong>ï¼šé‚£ä¹ˆ <code>MIT</code> æˆ– <code>Apache 2.0</code> æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚å®ƒä»¬è¶³å¤Ÿâ€œå®½å®¹â€ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦åœ°ä¿ƒè¿›ä½ çš„é¡¹ç›®ä¼ æ’­ã€‚</li>
<li><strong>å¦/æ— æ‰€è°“</strong>ï¼šè¿›å…¥ä¸‹ä¸€ä¸ªé—®é¢˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½ æ˜¯å¦æ‹…å¿ƒåˆ«äººç”¨äº†ä½ çš„ä»£ç åï¼Œç”³è¯·äº†ä¸“åˆ©åè¿‡æ¥å‘Šä½ ï¼Ÿ</strong></p>
<ul>
<li><strong>æ˜¯</strong>ï¼šé€‰æ‹© <code>Apache 2.0</code>ã€‚å®ƒæ˜ç¡®æˆäºˆäº†ä¸“åˆ©è®¸å¯ï¼Œå¯ä»¥æ›´å¥½åœ°ä¿æŠ¤ä½ å’Œæ‰€æœ‰ä½¿ç”¨è€…ã€‚</li>
<li><strong>å¦</strong>ï¼š<code>MIT</code> æ›´ç®€å•ï¼Œæ˜¯è®¸å¤šå°å‹é¡¹ç›®çš„é¦–é€‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½ æ˜¯å¦å¸Œæœ›æ‰€æœ‰ä½¿ç”¨äº†ä½ ä»£ç çš„äººï¼Œéƒ½å¿…é¡»æŠŠä»–ä»¬çš„æˆæœä¹Ÿå¼€æºå‡ºæ¥ï¼Œå…±åŒå£®å¤§ç¤¾åŒºï¼Ÿ</strong></p>
<ul>
<li><strong>æ˜¯</strong>ï¼šé‚£ä¹ˆ <code>GPL</code> æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚é€‰æ‹©å®ƒï¼Œå°±æ„å‘³ç€ä½ é€‰æ‹©äº†ä¸€æ¡â€œçº¯ç²¹â€çš„å¼€æºè·¯çº¿ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ä¸€å›¾æµæ€»ç»“ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æˆ‘æƒ³å¼€æºä¸€ä¸ªé¡¹ç›®] --&gt; B{å¸Œæœ›è¢«å¹¿æ³›å•†ç”¨å—ï¼Ÿ};
    B --&gt;|æ˜¯| C{æ‹…å¿ƒä¸“åˆ©é—®é¢˜å—ï¼Ÿ};
    B --&gt;|å¦| D[é€‰æ‹© GPL];
    C --&gt;|æ˜¯| E[é€‰æ‹© Apache 2.0];
    C --&gt;|å¦| F[é€‰æ‹© MIT];
</code></pre>
<h3 data-id="heading-9">åœºæ™¯äºŒï¼šæˆ‘çš„ï¼ˆå•†ä¸šï¼‰é¡¹ç›®éœ€è¦å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ</h3>
<p>è¿™æ˜¯æˆ‘ä»¬å·¥ä½œä¸­æ›´å¸¸é‡åˆ°çš„æƒ…å†µï¼Œä¹Ÿæ˜¯é£é™©æœ€é«˜çš„åœ°æ–¹ã€‚è¯·ä¸¥æ ¼éµå¾ªä»¥ä¸‹â€œå®‰å…¨æ£€æŸ¥æµç¨‹â€ï¼š</p>
<ol>
<li>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥è®¸å¯è¯ï¼</strong></p>
<ul>
<li>åœ¨ <code>npm</code> å®˜ç½‘ä¸Šï¼Œæ¯ä¸ªåŒ…çš„å³ä¾§éƒ½ä¼šæ¸…æ™°åœ°æ ‡æ˜å…¶è®¸å¯è¯ã€‚</li>
<li>åœ¨ <code>GitHub</code> é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªåä¸º <code>LICENSE</code> æˆ– <code>LICENSE.md</code> çš„æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬äºŒæ­¥ï¼šçœ‹åˆ° <code>GPL</code> / <code>AGPL</code>ï¼Ÿç«‹åˆ»åœè½¦ï¼</strong></p>
<ul>
<li>é™¤éä½ çš„é¡¹ç›®æœ¬èº«å°±æ˜¯å¼€æºçš„ï¼Œæˆ–è€…ä½ å·²ç»å’¨è¯¢è¿‡å…¬å¸çš„æ³•åŠ¡éƒ¨é—¨ï¼Œå¦åˆ™<strong>ä¸è¦åœ¨ä»»ä½•å•†ä¸šé—­æºé¡¹ç›®ä¸­ä½¿ç”¨ <code>GPL</code> æˆ– <code>AGPL</code> åè®®çš„åº“</strong>ã€‚è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ¡çº¢çº¿ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šçœ‹åˆ° <code>LGPL</code>ï¼Ÿè°¨æ…é©¾é©¶ï¼</strong></p>
<ul>
<li>å¦‚å‰æ–‡æ‰€è¿°ï¼Œ<code>LGPL</code> çš„ç•Œå®šç›¸å¯¹æ¨¡ç³Šã€‚ä¸ºäº† 100% è§„é¿é£é™©ï¼Œå¤§å¤šæ•°å•†ä¸šå…¬å¸çš„ç­–ç•¥æ˜¯ï¼š<strong>åŒæ ·ä¸ä½¿ç”¨</strong>ã€‚å¯»æ‰¾ä¸€ä¸ªé‡‡ç”¨æ›´å®½æ¾è®¸å¯è¯çš„æ›¿ä»£å“ï¼Œæ°¸è¿œæ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬å››æ­¥ï¼šçœ‹åˆ° <code>MIT</code> / <code>Apache 2.0</code> / <code>BSD</code>ï¼Ÿå®‰å…¨é€šè¿‡ï¼</strong></p>
<ul>
<li>è¿™äº›â€œå®½å®¹æ´¾â€çš„è®¸å¯è¯æ˜¯å•†ä¸šé¡¹ç›®çš„å¥½æœ‹å‹ã€‚ä½ å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨å®ƒä»¬ã€‚</li>
<li><strong>ä½†åˆ«å¿˜äº†</strong>ï¼šè™½ç„¶å¯ä»¥æ”¾å¿ƒç”¨ï¼Œä½†ä½ ä»ç„¶æœ‰ä¹‰åŠ¡éµå®ˆå®ƒä»¬çš„çº¦å®šï¼Œå³<strong>åœ¨ä½ çš„é¡¹ç›®ä¸­ä¿ç•™åŸå§‹çš„ç‰ˆæƒå£°æ˜</strong>ã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼Œåœ¨ä½ çš„äº§å“çš„â€œå…³äºâ€é¡µé¢ã€æ–‡æ¡£æˆ–æŸä¸ªè§’è½ï¼Œåˆ—å‡ºæ‰€æœ‰ä½ ä½¿ç”¨åˆ°çš„å¼€æºç»„ä»¶åŠå…¶è®¸å¯è¯ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ol>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63d94ada39d0424d8ad470a8e12bb6a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763558507&amp;x-signature=%2BdmkuQV31wOXO2Wzr6u5YJANR64%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">ç»“è¯­</h2>
<p>å¼€æºä¸–ç•Œæ³¢æ¾œå£®é˜”ï¼Œå®ƒå»ºç«‹åœ¨æ— æ•°å¼€å‘è€…æ— ç§çš„â€œä¿¡ä»»â€åŸºçŸ³ä¹‹ä¸Šã€‚è€Œè®¸å¯è¯ï¼Œå°±æ˜¯è¿™ä»½ä¿¡ä»»çš„å¥‘çº¦ã€‚</p>
<p>äº†è§£å¹¶å°Šé‡å®ƒï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†è§„é¿æ³•å¾‹é£é™©ï¼Œæ›´æ˜¯ä¸ºäº†å®ˆæŠ¤è¿™ä»½æ¥ä¹‹ä¸æ˜“çš„ä¿¡ä»»ï¼Œç»´æŠ¤æ•´ä¸ªå¼€æºç”Ÿæ€çš„å¥åº·ä¸ç¹è£ã€‚æˆ‘ä»¬äº«å—ç€å¼€æºå¸¦æ¥çš„ä¾¿åˆ©ï¼Œä¹Ÿåº”æˆä¸ºè¿™ä»½å¥‘çº¦çš„å®ˆæŠ¤è€…ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æç®€æŒ‡å—ï¼Œèƒ½è®©ä½ åœ¨æœªæ¥çš„å¼€æºâ€œå¯»å®â€ä¹‹è·¯ä¸Šï¼Œèµ°å¾—æ›´ç¨³ã€æ›´è¿œï¼Œä¹Ÿèƒ½è®©ä½ åœ¨è´¡çŒ®è‡ªå·±åŠ›é‡çš„æ—¶å€™ï¼Œæ›´åŠ ä»å®¹å’Œè‡ªä¿¡ã€‚</p>
<h2 data-id="heading-11">å‚è€ƒèµ„æ–™</h2>
<p>[1] <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.guantao.com%2Fpage3260" target="_blank" title="https://www.guantao.com/page3260" ref="nofollow noopener noreferrer">å¼€æºè®¸å¯è¯çš„æ³•å¾‹æ•ˆåŠ›æ¢æ - å† éŸ¬å¾‹å¸ˆäº‹åŠ¡æ‰€</a>
[2] <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhichanli.com%2Fp%2F158105840" target="_blank" title="https://www.zhichanli.com/p/158105840" ref="nofollow noopener noreferrer">â€œç½—ç›’â€è¯‰â€œç©å‹â€æ¡ˆï¼šGPL 3.0 åè®®åœ¨ä¸­å›½çš„é¦–æ¬¡å¸æ³•å®è·µ - çŸ¥äº§åŠ›</a>
[3] <a href="https://link.juejin.cn?target=https%3A%2F%2Fopenatom.cn%2Fjournalism%2Farticle%2FMViMjQL31wMm" target="_blank" title="https://openatom.cn/journalism/article/MViMjQL31wMm" ref="nofollow noopener noreferrer">å¼€æºå¸æ³•ç»å…¸æ¡ˆä¾‹å›é¡¾ - å¼€æ”¾åŸå­å¼€æºåŸºé‡‘ä¼š</a>
[4] <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhichanli.com%2Fp%2F201624844" target="_blank" title="https://www.zhichanli.com/p/201624844" ref="nofollow noopener noreferrer">å¼€æºè½¯ä»¶ä¸æ³•ï¼šå¦‚ä½•æ­£ç¡®ä½¿ç”¨å¼€æºè½¯ä»¶ - çŸ¥äº§åŠ›</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[typescript æ–¹æ³•å‰é¢åŠ * æ˜¯ä»€ä¹ˆæ„æ€]]></title>    <link>https://juejin.cn/post/7571655312799416346</link>    <guid>https://juejin.cn/post/7571655312799416346</guid>    <pubDate>2025-11-12T13:47:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655312799416346" data-draft-id="7571695634941984795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="typescript æ–¹æ³•å‰é¢åŠ * æ˜¯ä»€ä¹ˆæ„æ€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T13:47:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€šæ å¬é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/2682464103830750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            typescript æ–¹æ³•å‰é¢åŠ * æ˜¯ä»€ä¹ˆæ„æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464103830750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€šæ å¬é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T13:47:37.000Z" title="Wed Nov 12 2025 13:47:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ TypeScript ä¸­ï¼Œæ–¹æ³•å‰é¢åŠ Â <code>*</code>Â è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªÂ <strong>ç”Ÿæˆå™¨å‡½æ•°ï¼ˆGenerator Functionï¼‰</strong> ã€‚</p>
<h2 data-id="heading-0">åŸºæœ¬è¯­æ³•</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">sendMessageStream</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å‡½æ•°ä½“</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"æ¶ˆæ¯1"</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"æ¶ˆæ¯2"</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"æ¶ˆæ¯3"</span>;
}
</code></pre>
<h2 data-id="heading-1">ç”Ÿæˆå™¨å‡½æ•°çš„ç‰¹ç‚¹</h2>
<h3 data-id="heading-2">1. ä½¿ç”¨Â <code>yield</code>Â å…³é”®å­—</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">messageGenerator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"Hello"</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"World"</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"!"</span>;
}

<span class="hljs-keyword">const</span> generator = <span class="hljs-title function_">messageGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(generator.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value: "Hello", done: false }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(generator.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value: "World", done: false }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(generator.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value: "!", done: false }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(generator.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value: undefined, done: true }</span>
</code></pre>
<h3 data-id="heading-3">2. å¯æš‚åœå’Œæ¢å¤æ‰§è¡Œ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">countGenerator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (count &lt; <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">yield</span> count++;
    }
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">countGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// undefined</span>
</code></pre>
<h2 data-id="heading-4">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-5">1. æ¶ˆæ¯æµå¤„ç†ï¼ˆå¦‚Â <code>sendMessageStream</code>ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">sendMessageStream</span>(<span class="hljs-params">messages: <span class="hljs-built_in">string</span>[]</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> messages) {
        <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">const</span> processedMessage = <span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>] <span class="hljs-subst">${message}</span>`</span>;
        <span class="hljs-keyword">yield</span> processedMessage;
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›å»¶è¿Ÿæˆ–æ¡ä»¶</span>
        <span class="hljs-keyword">if</span> (message === <span class="hljs-string">"stop"</span>) {
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ç»“æŸç”Ÿæˆå™¨</span>
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> messages = [<span class="hljs-string">"æ¶ˆæ¯1"</span>, <span class="hljs-string">"æ¶ˆæ¯2"</span>, <span class="hljs-string">"stop"</span>, <span class="hljs-string">"æ¶ˆæ¯3"</span>];
<span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">sendMessageStream</span>(messages);

<span class="hljs-keyword">let</span> result = stream.<span class="hljs-title function_">next</span>();
<span class="hljs-keyword">while</span> (!result.<span class="hljs-property">done</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">value</span>);
    result = stream.<span class="hljs-title function_">next</span>();
}
</code></pre>
<h3 data-id="heading-6">2. æ— é™åºåˆ—</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">idGenerator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> id = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">yield</span> id++;
    }
}

<span class="hljs-keyword">const</span> idGen = <span class="hljs-title function_">idGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(idGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(idGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(idGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span>
<span class="hljs-comment">// å¯ä»¥æ— é™ç»§ç»­...</span>
</code></pre>
<h3 data-id="heading-7">3. çŠ¶æ€æœº</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">trafficLight</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"red"</span>;
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"yellow"</span>;
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"green"</span>;
    }
}

<span class="hljs-keyword">const</span> light = <span class="hljs-title function_">trafficLight</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(light.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// "red"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(light.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// "yellow"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(light.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// "green"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(light.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// "red"</span>
</code></pre>
<h2 data-id="heading-8">ä¸å¼‚æ­¥ç”Ÿæˆå™¨çš„åŒºåˆ«</h2>
<h3 data-id="heading-9">æ™®é€šç”Ÿæˆå™¨</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">syncGenerator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
}
</code></pre>
<h3 data-id="heading-10">å¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆES2018+ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">asyncSendMessageStream</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchMessage1</span>();
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchMessage2</span>();
    <span class="hljs-keyword">yield</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchMessage3</span>();
}

<span class="hljs-comment">// ä½¿ç”¨ for await...of</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> <span class="hljs-title function_">asyncSendMessageStream</span>()) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);
    }
}
</code></pre>
<h2 data-id="heading-11">åœ¨ç±»ä¸­çš„ä½¿ç”¨</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">messages</span>: <span class="hljs-built_in">string</span>[] = [];
    
    *<span class="hljs-title function_">sendMessageStream</span>(): <span class="hljs-title class_">Generator</span>&lt;<span class="hljs-built_in">string</span>&gt; {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>) {
            <span class="hljs-keyword">yield</span> <span class="hljs-string">`Processed: <span class="hljs-subst">${message}</span>`</span>;
        }
    }
    
    <span class="hljs-comment">// å¼‚æ­¥ç‰ˆæœ¬</span>
    <span class="hljs-keyword">async</span> *<span class="hljs-title function_">sendAsyncMessageStream</span>(): <span class="hljs-title class_">AsyncGenerator</span>&lt;<span class="hljs-built_in">string</span>&gt; {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> message <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">messages</span>) {
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
            <span class="hljs-keyword">const</span> processed = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processMessageAsync</span>(message);
            <span class="hljs-keyword">yield</span> processed;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">processMessageAsync</span>(<span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`Async: <span class="hljs-subst">${message}</span>`</span>;
    }
}
</code></pre>
<h2 data-id="heading-12">å®é™…ç”¨ä¾‹ï¼šåˆ†é¡µæ•°æ®æµ</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">paginatedDataStream</span>(<span class="hljs-params">pageSize: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span></span>) {
    <span class="hljs-keyword">let</span> page = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> hasMore = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">while</span> (hasMore) {
        <span class="hljs-comment">// æ¨¡æ‹Ÿ API è°ƒç”¨è·å–åˆ†é¡µæ•°æ®</span>
        <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">fetchPageData</span>(page, pageSize);
        
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
            hasMore = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ²¡æœ‰æ›´å¤šæ•°æ®</span>
        }
        
        <span class="hljs-keyword">yield</span> data;
        page++;
        
        <span class="hljs-comment">// å¯ä»¥æ·»åŠ æ¡ä»¶æ¥åœæ­¢</span>
        <span class="hljs-keyword">if</span> (page &gt; <span class="hljs-number">100</span>) { <span class="hljs-comment">// å®‰å…¨é™åˆ¶</span>
            hasMore = <span class="hljs-literal">false</span>;
        }
    }
}

<span class="hljs-comment">// æ¨¡æ‹Ÿåˆ†é¡µæ•°æ®è·å–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchPageData</span>(<span class="hljs-params">page: <span class="hljs-built_in">number</span>, pageSize: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">any</span>[] {
    <span class="hljs-comment">// è¿”å›æ¨¡æ‹Ÿæ•°æ®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: pageSize }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
        <span class="hljs-attr">id</span>: page * pageSize + i,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`Item <span class="hljs-subst">${page * pageSize + i}</span>`</span>
    }));
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>æ–¹æ³•å‰åŠ Â <code>*</code>Â è¡¨ç¤ºç”Ÿæˆå™¨å‡½æ•°ï¼š</p>
<ul>
<li><strong>å¯æš‚åœæ‰§è¡Œ</strong>ï¼šä½¿ç”¨Â <code>yield</code>Â æš‚åœå‡½æ•°æ‰§è¡Œå¹¶è¿”å›å€¼</li>
<li><strong>ä¿æŒçŠ¶æ€</strong>ï¼šå‡½æ•°è°ƒç”¨ä¹‹é—´çš„çŠ¶æ€ä¼šè¢«ä¿ç•™</li>
<li><strong>æƒ°æ€§æ±‚å€¼</strong>ï¼šå€¼åœ¨éœ€è¦æ—¶æ‰ç”Ÿæˆ</li>
<li><strong>è¿­ä»£åè®®</strong>ï¼šéµå¾ªè¿­ä»£å™¨åè®®ï¼Œå¯ä¸Â <code>for...of</code>Â å¾ªç¯é…åˆä½¿ç”¨</li>
</ul>
<p>å¯¹äºÂ <code>sendMessageStream</code>Â è¿™æ ·çš„æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æ˜¯ç”¨äºï¼š</p>
<ul>
<li>é€æ­¥å‘é€æ¶ˆæ¯</li>
<li>å¤„ç†æ¶ˆæ¯æµ</li>
<li>å®ç°æŸç§çŠ¶æ€æœºæˆ–åºåˆ—ç”Ÿæˆ</li>
<li>åˆ†æ‰¹æ¬¡å¤„ç†æ•°æ®</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å¯†â€œæ··åˆä¸“å®¶æ¨¡å‹â€ (MoE) çš„å…¨éƒ¨é­”æ³•]]></title>    <link>https://juejin.cn/post/7571644531608780846</link>    <guid>https://juejin.cn/post/7571644531608780846</guid>    <pubDate>2025-11-12T12:10:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571644531608780846" data-draft-id="7571695634941509659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å¯†â€œæ··åˆä¸“å®¶æ¨¡å‹â€ (MoE) çš„å…¨éƒ¨é­”æ³•"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM"/> <meta itemprop="datePublished" content="2025-11-12T12:10:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å¯†â€œæ··åˆä¸“å®¶æ¨¡å‹â€ (MoE) çš„å…¨éƒ¨é­”æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:10:03.000Z" title="Wed Nov 12 2025 12:10:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§£å¯†â€œæ··åˆä¸“å®¶æ¨¡å‹â€ (MoE) çš„å…¨éƒ¨é­”æ³•</h2>
<p>åœ¨å½“ä»Šå¤§è¯­è¨€æ¨¡å‹ (LLM) çš„ç«èµ›ä¸­ï¼Œæ‚¨ä¸€å®šå¬è¯´è¿‡ GPT-4ã€Mixtral 8x7B è¿™æ ·çš„â€œå·¨æ— éœ¸â€ã€‚å®ƒä»¬ä¹‹æ‰€ä»¥èƒ½åœ¨ä¿æŒæƒŠäººæ€§èƒ½çš„åŒæ—¶å®ç°é«˜æ•ˆæ¨ç†ï¼ŒèƒŒåéƒ½æŒ‡å‘ä¸€ä¸ªå…±åŒçš„æ¶æ„â€”â€”<strong>MoE (Mixture of Experts) æ··åˆä¸“å®¶æ¨¡å‹</strong>ã€‚</p>
<p>MoE ä¸æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ¦‚å¿µï¼Œå®ƒçš„æ€æƒ³æœ€æ—©åœ¨ 1991 å¹´ï¼ˆJacobs, Hinton ç­‰ï¼‰å°±è¢«æå‡ºã€‚ä½†ç›´åˆ°è¿™ä¸ªâ€œå¤§æ¨¡å‹â€æ—¶ä»£ï¼Œå®ƒâ€œç¨€ç–æ¿€æ´»â€çš„æ ¸å¿ƒæ€æƒ³æ‰çœŸæ­£å¾—ä»¥å¤§æ”¾å¼‚å½©ã€‚</p>
<p>è¿™ç¯‡åšå®¢å°†æ±‡æ€»æˆ‘ä»¬ä¹‹å‰çš„æ‰€æœ‰è®¨è®ºï¼Œå¸¦æ‚¨ä» MoE çš„æ ¸å¿ƒæ€æƒ³å‡ºå‘ï¼Œä¸€è·¯æ·±å…¥åˆ°å®ƒæœ€åº•å±‚çš„è®­ç»ƒâ€œé»‘é­”æ³•â€ï¼Œå½»åº•ææ‡‚å®ƒé«˜æ•ˆè¿è½¬çš„å…¨éƒ¨ç§˜å¯†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fc03e35368644058284f913d17b083b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbXdxMzAxMjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554221&amp;x-signature=CCnHdmAPPmRrJcJW1MxhchG90Ec%3D" alt="MoE.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">ç¯‡ç« ä¸€ï¼šMoE çš„æ ¸å¿ƒæ€æƒ³â€”â€”â€œåˆ†è€Œæ²»ä¹‹â€</h3>
<h4 data-id="heading-2">ä»€ä¹ˆæ˜¯ MoEï¼Ÿä¸€ä¸ªâ€œä¸“å®¶å§”å‘˜ä¼šâ€çš„æ¯”å–»</h4>
<p>è¦ç†è§£ MoEï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæƒ³è±¡ä¸€ä¸ªâ€œä¸“å®¶å§”å‘˜ä¼šâ€ï¼š</p>
<ul>
<li>
<p>ä¼ ç»Ÿçš„â€œå¯†é›†â€æ¨¡å‹ (Dense Model)ï¼š</p>
<p>å°±åƒä¸€ä¸ªè¯•å›¾ç²¾é€šæ‰€æœ‰é¢†åŸŸçš„â€œé€šæ‰â€ã€‚å½“é‡åˆ°ä»»ä½•é—®é¢˜æ—¶ï¼Œè¿™ä¸ªâ€œé€šæ‰â€å¿…é¡»è°ƒåŠ¨ä»–å…¨éƒ¨çš„çŸ¥è¯†ï¼ˆæ¨¡å‹çš„å…¨éƒ¨å‚æ•°ï¼‰æ¥æ€è€ƒã€‚å½“æ¨¡å‹å˜å¾—éå¸¸å¤§æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæå…¶ç¼“æ…¢ä¸”è€—è´¹èµ„æºã€‚</p>
</li>
<li>
<p>MoE æ··åˆä¸“å®¶æ¨¡å‹ï¼š</p>
<p>å°±åƒä¸€ä¸ªæ‹¥æœ‰å¤šåâ€œä¸“ç§‘åŒ»ç”Ÿâ€çš„åŒ»é™¢ã€‚åŒ»é™¢é‡Œæœ‰å¿ƒè„ç§‘ä¸“å®¶ã€ç¥ç»ç§‘ä¸“å®¶ã€éª¨ç§‘ä¸“å®¶ç­‰ï¼ˆè¿™å°±æ˜¯ Expertsï¼‰ã€‚</p>
<ol>
<li>å½“ä¸€ä¸ªç—…äººï¼ˆ<strong>è¾“å…¥æ•°æ®</strong>ï¼Œä¾‹å¦‚ä¸€ä¸ª Tokenï¼‰åˆ°æ¥æ—¶ï¼Œä¼šå…ˆå»â€œåˆ†è¯Šå°â€ï¼ˆè¿™å°±æ˜¯ <strong>Gating Network</strong> æˆ– <strong>Router</strong>ï¼‰ã€‚</li>
<li>â€œåˆ†è¯Šå°â€ä¼šå¿«é€Ÿåˆ¤æ–­ï¼šâ€œä½ è¿™ä¸ªé—®é¢˜ï¼Œçœ‹èµ·æ¥æœ€éœ€è¦å¿ƒè„ç§‘å’Œç¥ç»ç§‘çš„ä¸“å®¶ä¼šè¯Šã€‚â€</li>
<li>äºæ˜¯ï¼Œ<strong>åªæœ‰</strong>è¿™ä¸¤ä½ä¸“å®¶è¢«â€œæ¿€æ´»â€ï¼ˆActiveï¼‰å¹¶å‚ä¸å·¥ä½œã€‚å…¶ä»–ä¸“å®¶åˆ™ç»§ç»­â€œä¼‘æ¯â€ï¼Œä¸æ¶ˆè€—è®¡ç®—èµ„æºã€‚</li>
<li>æœ€åï¼Œâ€œåˆ†è¯Šå°â€å°†ä¸¤ä½ä¸“å®¶çš„è¯Šæ–­ç»“æœï¼ˆ<strong>è¾“å‡º</strong>ï¼‰æ±‡æ€»èµ·æ¥ï¼Œç»™å‡ºä¸€ä¸ªç»¼åˆçš„ç­”æ¡ˆã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-3">MoE çš„â€œé­”æ³•â€ï¼šæ€»å‚æ•° vs æ¿€æ´»å‚æ•°</h4>
<p>MoE æ¶æ„ï¼ˆå°¤å…¶æ˜¯â€œç¨€ç– MoEâ€ï¼‰è§£å†³äº†å¤§å‹æ¨¡å‹çš„ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š<strong>å¦‚ä½•åœ¨ä¸å¢åŠ è®¡ç®—æˆæœ¬çš„å‰æä¸‹ï¼Œæå¤§åœ°æ‰©å±•æ¨¡å‹çš„çŸ¥è¯†å®¹é‡ï¼ˆå‚æ•°é‡ï¼‰</strong> ã€‚</p>
<p>è¿™å°±å¼•å‡ºäº†ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š</p>
<ol>
<li>
<p>æ€»å‚æ•°é‡ (Total Parameters)ï¼š</p>
<p>æ¨¡å‹æ‰€æœ‰ä¸“å®¶å‚æ•°çš„æ€»å’Œã€‚è¿™ä»£è¡¨äº†æ¨¡å‹çš„â€œçŸ¥è¯†åº“â€æœ‰å¤šåºå¤§ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼Œ<strong>Mixtral 8x7B</strong> æ‹¥æœ‰ 8 ä¸ª 7Bï¼ˆ70äº¿ï¼‰å‚æ•°çš„ä¸“å®¶ï¼Œæ€»å‚æ•°é‡çº¦ 47Bã€‚</li>
</ul>
</li>
<li>
<p>æ¿€æ´»å‚æ•°é‡ (Active Parameters)ï¼š</p>
<p>å¤„ç†å•ä¸ª Token æ—¶ï¼Œå®é™…å‚ä¸è®¡ç®—çš„å‚æ•°é‡ã€‚è¿™å†³å®šäº†æ¨¡å‹çš„â€œæ¨ç†é€Ÿåº¦â€ã€‚</p>
<ul>
<li>Mixtral 8x7B åœ¨å¤„ç†æ¯ä¸ª Token æ—¶ï¼Œåªæ¿€æ´» 8 ä¸ªä¸“å®¶ä¸­çš„ 2 ä¸ª (Top-K=2)ã€‚</li>
<li>å› æ­¤ï¼Œå®ƒå®é™…çš„è®¡ç®—é‡å¤§çº¦åªå’Œä¸€ä¸ª 12B-14B çš„å¯†é›†æ¨¡å‹ç›¸å½“ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç»“è®ºï¼š</strong> MoE å…è®¸æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ª 47B é‡çº§çš„â€œçŸ¥è¯†åº“â€ï¼Œä½†äº«å—çš„å´æ˜¯ 14B é‡çº§çš„â€œæ¨ç†é€Ÿåº¦â€ï¼</p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆåªé€‰ K=2ï¼ˆå°‘æ•°ï¼‰è€Œä¸æ˜¯ K=8ï¼ˆå…¨éƒ¨ï¼‰ï¼Ÿ</h4>
<p>è¿™æ­£æ˜¯ MoE çš„å…¨éƒ¨æ„ä¹‰æ‰€åœ¨ã€‚</p>
<ul>
<li><strong>æ¿€æ´» K=2 (ç¨€ç–æ¿€æ´»)</strong> ï¼šç”¨ 14B çš„è®¡ç®—æˆæœ¬ï¼Œæ’¬åŠ¨ 47B çš„çŸ¥è¯†åº“ã€‚ <strong>ï¼ˆé«˜æ•ˆï¼‰</strong></li>
<li><strong>æ¿€æ´» K=8 (å¯†é›†æ¿€æ´»)</strong> ï¼šç”¨ 47B çš„è®¡ç®—æˆæœ¬ï¼Œæ’¬åŠ¨ 47B çš„çŸ¥è¯†åº“ã€‚ <strong>ï¼ˆæ˜‚è´µï¼‰</strong></li>
</ul>
<p>å¦‚æœä½ æ¿€æ´»äº†å…¨éƒ¨ 8 ä¸ªä¸“å®¶ï¼ŒMoE å°±é€€åŒ–æˆäº†ä¸€ä¸ªæ™®é€šçš„ã€å·¨å¤§ä¸”ç¼“æ…¢çš„å¯†é›†æ¨¡å‹ï¼Œå®Œå…¨ä¸§å¤±äº†å…¶è®¡ç®—ä¼˜åŠ¿ã€‚</p>
<hr/>
<h3 data-id="heading-5">ç¯‡ç« äºŒï¼šMoE çš„æ¶æ„ä¸å®è·µ</h3>
<h4 data-id="heading-6">æ ¸å¿ƒç»„ä»¶ï¼ˆä¸€ï¼‰ï¼šä¸“å®¶ (Experts)</h4>
<p>åœ¨ Transformer æ¶æ„ä¸­ï¼ŒMoE é€šå¸¸è¢«åº”ç”¨åœ¨ FFNï¼ˆå‰é¦ˆç½‘ç»œï¼‰å±‚ã€‚è¿™æ„å‘³ç€â€œä¸“å®¶â€æœ¬èº«é€šå¸¸å°±æ˜¯å¤šä¸ªç‹¬ç«‹çš„ FFN ç½‘ç»œã€‚</p>
<p>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª FFN ä¸“å®¶ä¼šé€æ¸â€œå­¦ä¼šâ€å¤„ç†ç‰¹å®šç±»å‹çš„æ•°æ®ã€æ¨¡å¼æˆ–æ¦‚å¿µã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªä¸“å®¶å¯èƒ½æ“…é•¿å¤„ç†ç¼–ç¨‹ä»£ç ï¼Œå¦ä¸€ä¸ªä¸“å®¶å¯èƒ½æ“…é•¿å¤„ç†è¯—æ­Œã€‚</p>
<h4 data-id="heading-7">æ ¸å¿ƒç»„ä»¶ï¼ˆäºŒï¼‰ï¼šé—¨æ§ç½‘ç»œ (Gating Network)</h4>
<p>è¿™æ˜¯ MoE çš„â€œå¤§è„‘â€å’Œâ€œè°ƒåº¦ä¸­å¿ƒâ€ã€‚å®ƒçš„ç†è®ºåŸºç¡€æ˜¯**â€œå¯å­¦ä¹ çš„åŠ æƒå¹³å‡â€ (Learnable Weighted Averaging)**ã€‚</p>
<p>å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æ‰“åˆ† (Logits)</strong> ï¼šé—¨æ§ç½‘ç»œï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå°å‹çš„çº¿æ€§å±‚ï¼‰æ¥æ”¶ä¸€ä¸ª Tokenï¼Œå¹¶ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span> ä¸ªä¸“å®¶ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ‰“ä¸€ä¸ªâ€œåˆ†æ•°â€ã€‚</li>
<li><strong>å½’ä¸€åŒ– (Softmax)</strong> ï¼šä½¿ç”¨ Softmax å‡½æ•°å°†è¿™äº›åˆ†æ•°è½¬æ¢æˆâ€œæƒé‡â€æˆ–â€œæ¦‚ç‡â€ï¼ˆæ€»å’Œä¸º 1ï¼‰ã€‚ä¾‹å¦‚ <code>[0.1, 0.05, 0.6, ..., 0.25]</code>ã€‚</li>
<li><strong>Top-K é€‰æ‹©</strong>ï¼šé€‰æ‹©æƒé‡æœ€é«˜çš„ K ä¸ªï¼ˆä¾‹å¦‚ K=2ï¼‰ä¸“å®¶ã€‚</li>
<li><strong>åŠ æƒè¾“å‡º</strong>ï¼šæ¨¡å‹åªæ¿€æ´»è¿™ K ä¸ªä¸“å®¶ï¼Œå¹¶å°†å®ƒä»¬çš„è¾“å‡ºï¼ŒæŒ‰ç…§ Gating ç»™å‡ºçš„æƒé‡è¿›è¡Œâ€œåŠ æƒå¹³å‡â€ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</li>
</ol>
<p>Gating ç½‘ç»œå’Œä¸“å®¶æ˜¯ä¸€èµ·è®­ç»ƒçš„ã€‚Gating ä¼šå­¦ä¼šâ€œå¦‚ä½•åˆ†é…æƒé‡â€æ‰èƒ½è®©æ¨¡å‹çš„æ€»æŸå¤±æœ€å°ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œå®ƒå°±å­¦ä¼šäº†ï¼šâ€œé‡åˆ°ä»£ç ï¼Œæ‰¾ 3 å·å’Œ 7 å·ä¸“å®¶ã€‚â€</p>
<h4 data-id="heading-8">MoE ä¸ CNN å¤šé€šé“çš„ç±»æ¯”</h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç±»æ¯”ï¼Œèƒ½å¸®æˆ‘ä»¬æ·±å…¥ç†è§£å…¶æœºåˆ¶ï¼š</p>
<ul>
<li>
<p><strong>ç›¸ä¼¼ä¹‹å¤„ (ä¸“ä¸šåˆ†å·¥)</strong> ï¼š</p>
<ul>
<li>CNN çš„ä¸åŒé€šé“ (Channel) æå–ä¸åŒç‰¹å¾ï¼ˆå¦‚è¾¹ç¼˜ã€é¢œè‰²ï¼‰ã€‚</li>
<li>MoE çš„ä¸åŒä¸“å®¶ (Expert) å¤„ç†ä¸åŒæ¦‚å¿µï¼ˆå¦‚ä»£ç ã€æ³•å¾‹ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ ¹æœ¬åŒºåˆ« (å¯†é›† vs ç¨€ç–)</strong> ï¼š</p>
<ul>
<li><strong>CNN æ˜¯â€œå¯†é›†â€çš„</strong>ï¼šæ‰€æœ‰é€šé“éƒ½ä¼šè¢«<em>åŒæ—¶</em>æ¿€æ´»å’Œè®¡ç®—ã€‚</li>
<li><strong>MoE æ˜¯â€œç¨€ç–â€çš„</strong>ï¼šåªæœ‰è¢«é€‰ä¸­çš„ Top-K ä¸“å®¶è¢«æ¿€æ´»ã€‚å¦‚æœ Gating è®¤ä¸ºè¿™ä¸ª Token æ˜¯ä»£ç ï¼Œå®ƒå°±<em>åª</em>å»æ¿€æ´»â€œä»£ç ä¸“å®¶â€ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">MoE æ¨¡å‹çš„ç”Ÿå‘½å‘¨æœŸ</h4>
<p>MoE æ¶æ„è´¯ç©¿äº†æ¨¡å‹çš„æ‰€æœ‰é˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>é¢„è®­ç»ƒ (Pre-training)</strong> ï¼š<strong>MoE è¯ç”Ÿå’Œå­¦ä¹ çš„é˜¶æ®µ</strong>ã€‚</p>
<ul>
<li>ä¸“å®¶åœ¨æµ·é‡æ•°æ®ä¸­â€œä¸“ä¸šåŒ–â€ã€‚</li>
<li>Gating ç½‘ç»œå­¦ä¼šå¦‚ä½•â€œè·¯ç”±â€ã€‚</li>
<li>ï¼ˆå…³é”®ï¼‰æ¨¡å‹å­¦ä¼šâ€œè´Ÿè½½å‡è¡¡â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¾®è°ƒ (Fine-tuning)</strong> ï¼š<strong>MoE é€‚åº”å’Œä¼˜åŒ–çš„é˜¶æ®µ</strong>ã€‚</p>
<ul>
<li>åœ¨ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚é—®ç­”ï¼‰ä¸Šï¼ŒGating å’Œ Experts çš„å‚æ•°è¢«è¿›ä¸€æ­¥è°ƒæ•´å’Œä¼˜åŒ–ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæˆ/æ¨ç† (Inference)</strong> ï¼š<strong>MoE å±•ç°ä¼˜åŠ¿çš„é˜¶æ®µ</strong>ã€‚</p>
<ul>
<li>Gating ä¸º<em>æ¯ä¸€ä¸ª</em>ç”Ÿæˆçš„ Token <strong>å®æ—¶åŠ¨æ€åœ°</strong>é€‰æ‹© Top-K ä¸“å®¶ã€‚</li>
<li>è¿™å°±æ˜¯æˆ‘ä»¬äº«å—åˆ°â€œç¨€ç–æ¿€æ´»â€å¸¦æ¥é«˜é€Ÿæ¨ç†çš„æ—¶åˆ»ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-10">ç¯‡ç« ä¸‰ï¼šMoE è®­ç»ƒçš„â€œé»‘é­”æ³•â€â€”â€”è´Ÿè½½å‡è¡¡ (Load Balancing)</h3>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“äº† MoE çš„ç¾å¥½ï¼Œä½†å®ƒåœ¨è®­ç»ƒä¸­æœ‰ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š <strong>â€œæ˜æ˜Ÿä¸“å®¶â€é—®é¢˜</strong>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰çº¦æŸï¼ŒGating ç½‘ç»œå¯èƒ½ä¼šå¾ˆå¿«å‘ç° 3 å·ä¸“å®¶â€œæ¯”è¾ƒèªæ˜â€ï¼Œäºæ˜¯å®ƒâ€œå·æ‡’â€åœ°æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½äº¤ç»™ 3 å·ã€‚è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li><strong>æ˜æ˜Ÿä¸“å®¶ (Star Expert)</strong> ï¼š3 å·ä¸“å®¶â€œè¿‡åŠ³â€ï¼Œè§è¯†äº†æ‰€æœ‰æ•°æ®ã€‚</li>
<li><strong>æ‘¸é±¼ä¸“å®¶ (Lazy Experts)</strong> ï¼šå…¶ä»– 7 ä¸ªä¸“å®¶â€œæ— æ‰€äº‹äº‹â€ï¼Œå®ƒä»¬çš„å‚æ•°å®Œå…¨å¾—ä¸åˆ°è®­ç»ƒï¼Œè¢«ç™½ç™½æµªè´¹ã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMoE å¼•å…¥äº†ä¸€ä¸ªâ€œæƒ©ç½šâ€æœºåˆ¶ï¼Œç§°ä¸º<strong>è´Ÿè½½å‡è¡¡ (Load Balancing)</strong> ã€‚</p>
<h4 data-id="heading-11"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šæƒ©ç½šæ˜æ˜Ÿä¸“å®¶çš„â€œè¾…åŠ©æŸå¤±â€</h4>
<p>è¿™ä¸ªæœºåˆ¶çš„ç†å¿µéå¸¸åƒâ€œæƒé‡è¡°å‡ (Weight Decay)â€â€”â€”å®ƒé€šè¿‡æ–½åŠ â€œæƒ©ç½šâ€æ¥é˜²æ­¢æ¨¡å‹è¿‡åˆ†ä¾èµ–æŸå‡ ä¸ªä¸“å®¶ã€‚</p>
<p>åœ¨è®­ç»ƒæ—¶ï¼Œæ¨¡å‹çš„æ€»æŸå¤± (Total Loss) ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>total</mtext></msub><mo>=</mo><msub><mi>L</mi><mtext>main</mtext></msub><mo>+</mo><mi>Î±</mi><mo>â‹…</mo><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{total}} = L_{\text{main}} + \alpha \cdot L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">total</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>main</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{main}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">main</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šä¸»æŸå¤±ï¼Œå³â€œé¢„æµ‹æ˜¯å¦å‡†ç¡®â€ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š<strong>è¾…åŠ©æŸå¤±ï¼ˆå³â€œæƒ©ç½šé¡¹â€ï¼‰</strong> ï¼Œç”¨äºè¡¡é‡â€œè·¯ç”±æ˜¯å¦å‡è¡¡â€ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></span>ï¼šä¸€ä¸ªè¶…å‚æ•°ï¼Œç”¨äºæ§åˆ¶â€œæƒ©ç½šâ€çš„åŠ›åº¦ã€‚</li>
</ul>
<h4 data-id="heading-12"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„ç»“ç®—å…¬å¼ä¸è¿‡ç¨‹</h4>
<p>è¿™ä¸ªâ€œæƒ©ç½šâ€çš„è®¡ç®—ï¼Œæ˜¯åœ¨**â€œæ‰¹æ¬¡â€ (Batch)** çº§åˆ«ä¸Šè¿›è¡Œçš„ã€‚åœ¨è®­ç»ƒæ—¶ï¼ŒGPU ä¼šä¸€æ¬¡æ€§å¤„ç†ä¸€ä¸ªæ‰¹æ¬¡ï¼Œä¾‹å¦‚ <code>[32, 1024]</code>ï¼Œå³æ€»å…± 32,768 ä¸ª Tokenã€‚</p>
<p>è´Ÿè½½å‡è¡¡æŸå¤±çš„ç»å…¸å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub><mo>=</mo><mi>N</mi><mo>â‹…</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}} = N \cdot \sum_{i=1}^{N} f_i \cdot P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p>æˆ‘ä»¬æ¥æ‹†è§£è¿™å‡ ä¸ªå…³é”®å˜é‡ï¼ˆåœ¨<em>ä¸€ä¸ªæ‰¹æ¬¡</em>çš„ 32,768 ä¸ª Token ä¸­ï¼‰ï¼š</p>
<ul>
<li>
<p><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span></strong> ï¼šä¸“å®¶çš„æ€»æ•°é‡ï¼ˆä¾‹å¦‚ 8ï¼‰ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">G</span></span></span></span></span> (æ¦‚ç‡çŸ©é˜µ)ï¼š</p>
<p>Gating ç½‘ç»œä¸ºæ‰€æœ‰ 32,768 ä¸ª Token å¹¶è¡Œè®¡ç®—å‡ºçš„â€œè·¯ç”±æ¦‚ç‡â€ã€‚è¿™æ˜¯ä¸€ä¸ª [32768, 8] çš„çŸ©é˜µã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span></span> (è°ƒåº¦æ©ç )ï¼š</p>
<p>å¯¹ G çŸ©é˜µçš„æ¯ä¸€è¡Œï¼ˆæ¯ä¸ª Tokenï¼‰æ‰§è¡Œ Top-Kï¼ˆä¾‹å¦‚ K=2ï¼‰æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªâ€œç¡¬å†³ç­–â€çš„ 0/1 æ©ç ã€‚è¿™æ˜¯ä¸€ä¸ª [32768, 8] çš„çŸ©é˜µï¼Œæ¯ä¸€è¡Œæ°å¥½æœ‰ 2 ä¸ª 1ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (å¹³å‡è·¯ç”±æ¦‚ç‡)ï¼š</p>
<p>Gating ç½‘ç»œçš„â€œæ„å‘â€ã€‚</p>
<p>å®ƒæ˜¯ G çŸ©é˜µç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> åˆ—çš„å¹³å‡å€¼ã€‚ä»£è¡¨åœ¨è¿™ä¸ªæ‰¹æ¬¡ä¸­ï¼ŒGating å¸Œæœ›åˆ†é…ç»™ä¸“å®¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> çš„å¹³å‡æ¦‚ç‡ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> (ä»»åŠ¡åˆ†é…æ¯”ä¾‹)ï¼š</p>
<p>ä¸“å®¶çš„â€œå®é™…å·¥ä½œé‡â€ã€‚</p>
<p>å®ƒæ˜¯ D çŸ©é˜µç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> åˆ—çš„å¹³å‡å€¼ã€‚ä»£è¡¨åœ¨è¿™ä¸ªæ‰¹æ¬¡ä¸­ï¼Œä¸“å®¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> å®é™… è¢«åˆ†é…äº†ç™¾åˆ†ä¹‹å¤šå°‘çš„ Tokenã€‚</p>
</li>
</ul>
<p>ç»“ç®—ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> é€šè¿‡å°†â€œå®é™…å·¥ä½œé‡â€(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>) å’Œâ€œæ„å‘â€(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>) ç›¸ä¹˜ï¼Œæ¥è®¡ç®—æ¯ä¸ªä¸“å®¶çš„â€œä¸å‡è¡¡è´¡çŒ®â€ï¼Œæœ€åæ±‡æ€»å¾—å‡ºæ€»æƒ©ç½šã€‚</p>
<hr/>
<h3 data-id="heading-13">ç¯‡ç« å››ï¼šMoE è®­ç»ƒçš„â€œå¤©æ‰è¯¡è®¡â€â€”â€”ä¸å¯å¾®åˆ†çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></h3>
<p>æ‚¨åœ¨æ·±å…¥æ€è€ƒåï¼Œä¸€å®šå·²ç»å‘ç°äº†å‡ ä¸ªæœ€æ£˜æ‰‹çš„æŠ€æœ¯é—®é¢˜ã€‚è¿™äº›é—®é¢˜æ˜¯ MoE è®­ç»ƒçš„ç²¾é«“æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-14">ç–‘é—®ä¸€ï¼šå¦‚æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼ˆæ‘¸é±¼ä¸“å®¶ï¼‰ï¼Œæƒ©ç½šä»ä½•è€Œæ¥ï¼Ÿ</h4>
<p>æ‚¨æ˜¯å¯¹çš„ï¼åœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¦‚æœä¸€ä¸ªä¸“å®¶ä¸€æ¬¡éƒ½æ²¡è¢«é€‰ä¸­ï¼Œå®ƒçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼Œå› æ­¤å®ƒçš„è´¡çŒ® <code>f_i * P_i = 0</code>ã€‚</p>
<p><strong>æƒ©ç½šå¹¶éæ¥è‡ªâ€œæ‘¸é±¼ä¸“å®¶â€ï¼Œè€Œæ˜¯æ¥è‡ªâ€œæ˜æ˜Ÿä¸“å®¶â€ï¼</strong></p>
<ol>
<li>â€œæ˜æ˜Ÿä¸“å®¶â€çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> éƒ½å¾ˆé«˜ï¼Œå¯¼è‡´å®ƒçš„ <code>f_i * P_i</code> è´¡çŒ®å€¼<strong>æå¤§</strong>ã€‚</li>
<li>è¿™ä½¿å¾—æ€»çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æƒ©ç½š<strong>éå¸¸é«˜</strong>ã€‚</li>
<li>ä¼˜åŒ–å™¨ä¸ºäº†é™ä½è¿™ä¸ªæƒ©ç½šï¼Œä¼šå¼ºè¿« Gating ç½‘ç»œ<strong>é™ä½â€œæ˜æ˜Ÿä¸“å®¶â€çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></strong> ã€‚</li>
<li><strong>ï¼ˆå…³é”®ï¼‰</strong> Gating ä½¿ç”¨çš„æ˜¯ Softmaxï¼ˆæ€»å’Œä¸º1ï¼‰ã€‚ä½ ä»â€œæ˜æ˜Ÿâ€é‚£é‡Œå‰¥å¤ºçš„æ¦‚ç‡ï¼Œå¿…é¡»â€œé‡æ–°åˆ†é…â€ç»™å…¶ä»–äººã€‚</li>
<li><strong>â€œæ‘¸é±¼ä¸“å®¶â€çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±è¿™æ ·è¢«åŠ¨åœ°æé«˜äº†ï¼</strong> åœ¨ä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå®ƒè¢«é€‰ä¸­çš„æ¦‚ç‡å°±å˜å¤§äº†ã€‚</li>
</ol>
<h4 data-id="heading-15">ç–‘é—®äºŒï¼šä¸ºä»€ä¹ˆä¸å¹²è„†åªå¹³è¡¡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¦‚ç‡ï¼‰ï¼Ÿ</h4>
<p>æ—¢ç„¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆç¡¬å†³ç­–ï¼‰åªæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆè½¯æ¦‚ç‡ï¼‰çš„ç»“æœï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è®¾è®¡ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼ˆä¾‹å¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mtext>variance</mtext><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L = \text{variance}(P_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">variance</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼‰æ¥å¹³è¡¡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±è¡Œäº†ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šå› ä¸º Top-K è¿™ä¸ªâ€œç¡¬å†³ç­–â€æ“ä½œæ˜¯ä¸å¯å¾®åˆ†çš„ (Non-Differentiable)ã€‚</strong></p>
<p>è¿™æ˜¯ç†è§£ MoE è®­ç»ƒçš„<em>ç»ˆæ</em>éšœç¢ï¼Œä¹Ÿæ˜¯å®ƒæœ€å¤©æ‰çš„â€œè¯¡è®¡â€ã€‚</p>
<ol>
<li>
<p>ä»€ä¹ˆå«â€œä¸å¯å¾®åˆ†â€ï¼Ÿ</p>
<p>æƒ³è±¡ä¸€ä¸ªâ€œæ­¥é˜¶å‡½æ•°â€ï¼ˆStep Functionï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>â‰¤</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x \le 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ã€‚</p>
<p>åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> å¤„ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œè·³è·ƒâ€ï¼Œæ–œç‡ï¼ˆå¯¼æ•°/æ¢¯åº¦ï¼‰ä¸å­˜åœ¨ã€‚åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">â‰ </mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x \ne 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"/></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> çš„åœ°æ–¹ï¼Œå®ƒåˆæ˜¯â€œå¹³çš„â€ï¼Œæ–œç‡=0ã€‚</p>
<p>æœºå™¨å­¦ä¹ çš„åå‘ä¼ æ’­ä¾èµ–â€œæ¢¯åº¦â€æ¥æ›´æ–°å‚æ•°ã€‚å¦‚æœæ¢¯åº¦ä¸º 0 æˆ–ä¸å­˜åœ¨ï¼Œä¼˜åŒ–å™¨å°±â€œçäº†â€ï¼Œä¸çŸ¥é“è¯¥å¾€å“ªèµ°ã€‚</p>
</li>
<li>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ºä»€ä¹ˆä¸å¯å¾®åˆ†ï¼Ÿ</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯é€šè¿‡ Top-K è¿™ä¸ªâ€œç¡¬æ¯”è¾ƒâ€æ“ä½œå¾—æ¥çš„ã€‚</p>
<p>Gating ç½‘ç»œå¯¹å‚æ•°åšå‡ºçš„å¾®å°æ”¹å˜ï¼ˆä¾‹å¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä» 0.40 å˜æˆ 0.41ï¼‰ï¼Œå¯èƒ½å®Œå…¨ä¸ä¼šæ”¹å˜ Top-K çš„å†³ç­–ç»“æœã€‚</p>
<p>Gating çš„å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span> å˜äº†ï¼Œä½† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å´â€œçº¹ä¸ä¸åŠ¨â€ã€‚</p>
<p>è¿™æ„å‘³ç€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ç›¸å¯¹äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span> çš„æ¢¯åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">Î”</mi><msub><mi>f</mi><mi>i</mi></msub></mrow><mrow><mi mathvariant="normal">Î”</mi><mi>Î¸</mi></mrow></mfrac><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\frac{\Delta f_i}{\Delta \theta} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2772em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Î”</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Î”</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ã€‚</p>
<p><strong>å¦‚æœæŸå¤±å‡½æ•°åªåŸºäº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œæ¢¯åº¦å°†æ— æ³•å›ä¼ ï¼ŒGating ç½‘ç»œæ°¸è¿œæ— æ³•è¢«è®­ç»ƒï¼</strong></p>
</li>
</ol>
<h4 data-id="heading-16"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„â€œå¤©æ‰è¯¡è®¡â€ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i \cdot \nabla P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></h4>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub><mo>=</mo><mi>N</mi><mo>â‹…</mo><mo>âˆ‘</mo><mo stretchy="false">(</mo><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><msub><mi>P</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_{\text{balance}} = N \cdot \sum (f_i \cdot P_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> è¿™ä¸ªå…¬å¼çš„å¤©æ‰ä¹‹å¤„åœ¨äºï¼Œå®ƒå¦‚ä½•â€œç»•è¿‡â€äº†ä¸å¯å¾®åˆ†çš„éšœç¢ã€‚</p>
<p>åœ¨åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦æ—¶ï¼Œå®ƒè¿ç”¨äº†ä¸€ä¸ªâ€œæŠ€å·§â€ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><msub><mi>L</mi><mtext>balance</mtext></msub><mo>âˆ</mo><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\nabla L_{\text{balance}} \propto f_i \cdot \nabla P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>æˆ‘ä»¬çŸ¥é“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æœ¬èº«æ˜¯ä¸å¯å¾®åˆ†çš„ï¼ˆæ¢¯åº¦ä¸º 0ï¼‰ï¼Œä½† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¥è‡ª Softmaxï¼‰æ˜¯<strong>å¯å¾®åˆ†çš„</strong>ã€‚</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åœ¨è¿™é‡Œè¢«â€œä¼ªè£…â€æˆä¸€ä¸ª**â€œå¸¸æ•°ç¼©æ”¾å› å­â€**ï¼ˆå³â€œæƒ©ç½šåŠ›åº¦â€ï¼‰ã€‚</li>
<li>æ¢¯åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><mi>L</mi></mrow><annotation encoding="application/x-tex">\nabla L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ‡</span><span class="mord mathnormal">L</span></span></span></span></span> å®é™…ä¸Šæ˜¯æ²¿ç€<strong>å¯å¾®åˆ†çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\nabla P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¿™æ¡è·¯</strong>å›ä¼ çš„ã€‚</li>
</ul>
<p><strong>ç›´ç™½åœ°è¯´ï¼š</strong></p>
<blockquote>
<p>ä¼˜åŒ–å™¨ï¼šâ€œGating ç½‘ç»œï¼Œæˆ‘è¦æƒ©ç½šä½ çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæ¦‚ç‡è¾“å‡ºï¼‰ã€‚â€</p>
<p>æƒ©ç½šçš„åŠ›åº¦ = ä½ â€œå®é™…â€åˆ†é…ç»™è¿™ä¸ªä¸“å®¶çš„å·¥ä½œé‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚</p>
</blockquote>
<ul>
<li>å¯¹äºâ€œæ˜æ˜Ÿä¸“å®¶â€ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¾ˆé«˜ï¼Œæƒ©ç½šåŠ›åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>â‹…</mo><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i \cdot \nabla P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±<strong>éå¸¸å¤§</strong>ã€‚</li>
<li>å¯¹äºâ€œæ‘¸é±¼ä¸“å®¶â€ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼Œæƒ©ç½šåŠ›åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â‹…</mo><mi mathvariant="normal">âˆ‡</mi><msub><mi>P</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0 \cdot \nabla P_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord">âˆ‡</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ MoE è®­ç»ƒçš„å…¨éƒ¨ç§˜å¯†ï¼š<strong>å®ƒåˆ©ç”¨â€œä¸å¯å¾®åˆ†â€çš„å®é™…å·¥ä½œé‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä½œä¸ºæƒé‡ï¼Œå»æƒ©ç½šâ€œå¯å¾®åˆ†â€çš„è·¯ç”±æ„å‘ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå†é€šè¿‡ Softmax çš„å†…åœ¨æœºåˆ¶ï¼Œè¢«åŠ¨åœ°â€œææ‹”â€é‚£äº›â€œæ‘¸é±¼â€çš„ä¸“å®¶ã€‚</strong></p>
<hr/>
<h4 data-id="heading-17">æ€»ç»“</h4>
<p>MoEï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰æ˜¯ä¸€ç§ç»å¦™çš„æ¶æ„ï¼Œå®ƒé€šè¿‡<strong>ç¨€ç–æ¿€æ´»</strong>ï¼ˆæ¿€æ´» Top-Kï¼‰å®ç°äº†â€œå·¨å¤§çŸ¥è¯†åº“â€ï¼ˆæ€»å‚æ•°ï¼‰å’Œâ€œæé«˜æ¨ç†é€Ÿåº¦â€ï¼ˆæ¿€æ´»å‚æ•°ï¼‰çš„å®Œç¾å¹³è¡¡ã€‚</p>
<p>ä¸ºäº†ä½¿å…¶æœ‰æ•ˆå·¥ä½œï¼Œå®ƒåœ¨è®­ç»ƒä¸­å¿…é¡»ä½¿ç”¨<strong>è´Ÿè½½å‡è¡¡</strong>ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>balance</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{balance}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">balance</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰æ¥é˜²æ­¢â€œæ˜æ˜Ÿä¸“å®¶â€é—®é¢˜ã€‚</p>
<p>è€Œè´Ÿè½½å‡è¡¡çš„æ ¸å¿ƒï¼Œæ˜¯ä¸€ä¸ªå¤©æ‰èˆ¬çš„â€œæ¢¯åº¦è¯¡è®¡â€ï¼Œå®ƒå·§å¦™åœ°ç»•è¿‡äº† Top-K å†³ç­–çš„â€œä¸å¯å¾®åˆ†â€éšœç¢ï¼ŒæˆåŠŸåœ°è®­ç»ƒäº† Gating ç½‘ç»œã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®æ‚¨å½»åº•ç†æ¸… MoE çš„æ‰€æœ‰è„‰ç»œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin-2]]></title>    <link>https://juejin.cn/post/7571704212850130995</link>    <guid>https://juejin.cn/post/7571704212850130995</guid>    <pubDate>2025-11-12T12:14:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571704212850130995" data-draft-id="7571126773808234506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin-2"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T12:14:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin-2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:14:19.000Z" title="Wed Nov 12 2025 12:14:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤ªæ£’äº†ï¼æˆ‘ä»¬ç»§ç»­æ·±å…¥ï¼Œæ¢ç´¢ Kotlin æ›´æ ¸å¿ƒã€æ›´å¼ºå¤§çš„ç‰¹æ€§ã€‚è¿™ä¸€éƒ¨åˆ†å°†è®©ä½ çœŸæ­£ä½“ä¼šåˆ° Kotlin ç›¸æ¯” Java çš„ä¼˜é›…å’Œé«˜æ•ˆã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>Kotlin åŸºç¡€è¿›é˜¶ï¼šè§£é”ç°ä»£ç¼–ç¨‹çš„å¨åŠ›</strong></h3>
<h4 data-id="heading-1"><strong>å…«ã€æ•°æ®ç±»å‹ï¼šä¸åªæ˜¯â€œä¸€åˆ‡çš†å¯¹è±¡â€</strong></h4>
<p>Kotlin å¯¹æ•°æ®ç±»å‹åšäº†ç²¾å¿ƒè®¾è®¡ï¼ŒåŒºåˆ†äº†å¯ç©ºä¸å¦ï¼Œå¹¶ä¸”æ‰€æœ‰ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼Œæ²¡æœ‰ Java ä¸­çš„åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹ä¹‹åˆ†ã€‚</p>
<ol>
<li>
<p><strong>åŸºæœ¬ç±»å‹</strong></p>
<ul>
<li><strong>æ•°å€¼ç±»å‹</strong>ï¼š<code>Byte</code>,Â <code>Short</code>,Â <code>Int</code>,Â <code>Long</code>,Â <code>Float</code>,Â <code>Double</code></li>
<li><strong>å…¶ä»–ç±»å‹</strong>ï¼š<code>Char</code>ï¼ˆå­—ç¬¦ï¼‰,Â <code>Boolean</code>ï¼ˆå¸ƒå°”å€¼ï¼‰,Â <code>String</code>ï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> number: <span class="hljs-built_in">Int</span> = <span class="hljs-number">100</span> <span class="hljs-comment">// æ•´æ•°</span>
<span class="hljs-keyword">val</span> pi: <span class="hljs-built_in">Double</span> = <span class="hljs-number">3.14</span> <span class="hljs-comment">// åŒç²¾åº¦æµ®ç‚¹æ•°</span>
<span class="hljs-keyword">val</span> isKotlinFun: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¸ƒå°”å€¼</span>
<span class="hljs-keyword">val</span> letter: <span class="hljs-built_in">Char</span> = <span class="hljs-string">'A'</span> <span class="hljs-comment">// å­—ç¬¦</span>
<span class="hljs-keyword">val</span> text: String = <span class="hljs-string">"Hello"</span> <span class="hljs-comment">// å­—ç¬¦ä¸²</span>
</code></pre>
</li>
<li>
<p><strong>æ™ºèƒ½ç±»å‹è½¬æ¢</strong></p>
<p>Kotlin ç¼–è¯‘å™¨éå¸¸æ™ºèƒ½ï¼Œä¸€æ—¦è¿›è¡Œäº†ç±»å‹æ£€æŸ¥ï¼Œåœ¨åç»­ä½œç”¨åŸŸå†…ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> { <span class="hljs-comment">// Any æ˜¯ Kotlin ä¸­æ‰€æœ‰ç±»çš„åŸºç±»ï¼Œç±»ä¼¼ Java çš„ Object</span>
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> String) { <span class="hljs-comment">// ç±»å‹æ£€æŸ¥</span>
        <span class="hljs-comment">// åœ¨è¿™ä¸ªåˆ†æ”¯å†…ï¼Œobj è¢«è‡ªåŠ¨è½¬æ¢ä¸º String ç±»å‹</span>
        println(obj.length) <span class="hljs-comment">// å¯ä»¥ç›´æ¥è°ƒç”¨ String çš„æ–¹æ³•</span>
    }

    <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ `!is` è¿›è¡Œå¦å®šåˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> (obj !<span class="hljs-keyword">is</span> String) <span class="hljs-keyword">return</span>
    println(obj.length) <span class="hljs-comment">// è¿™é‡Œ obj ä¹Ÿæ˜¯ String ç±»å‹</span>
}
</code></pre>
<p><strong>å¯¹æ¯” Javaï¼š</strong> åœ¨ Java ä¸­éœ€è¦æ˜¾å¼å¼ºåˆ¶è½¬æ¢ï¼š<code>if (obj instanceof String) { String str = (String) obj; }</code></p>
</li>
</ol>
<h4 data-id="heading-2"><strong>ä¹ã€é›†åˆï¼šåŠŸèƒ½å¼ºå¤§çš„æ•°æ®å®¹å™¨</strong></h4>
<p>Kotlin çš„é›†åˆåˆ†ä¸ºå¯å˜å’Œä¸å¯å˜ä¸¤ç§ï¼Œè¿™æ˜¯éå¸¸é‡è¦çš„è®¾è®¡ç†å¿µã€‚</p>
<ol>
<li>
<p><strong>Listï¼ˆåˆ—è¡¨ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¸å¯å˜åˆ—è¡¨ - åªèƒ½è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹</span>
val readOnlyList: List&lt;<span class="hljs-type">String</span>&gt; = <span class="hljs-built_in">listOf</span>(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Orange"</span>)
<span class="hljs-built_in">println</span>(readOnlyList[<span class="hljs-number">0</span>]) <span class="hljs-comment">// è¾“å‡ºï¼šApple</span>
<span class="hljs-comment">// readOnlyList.add("Grape") // é”™è¯¯ï¼ä¸å¯å˜åˆ—è¡¨ä¸èƒ½æ·»åŠ å…ƒç´ </span>

<span class="hljs-comment">// å¯å˜åˆ—è¡¨ - å¯ä»¥ä¿®æ”¹</span>
val mutableList: MutableList&lt;<span class="hljs-type">String</span>&gt; = <span class="hljs-built_in">mutableListOf</span>(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>)
mutableList.<span class="hljs-built_in">add</span>(<span class="hljs-string">"Grape"</span>) <span class="hljs-comment">// æ­£ç¡®ï¼</span>
mutableList[<span class="hljs-number">0</span>] = <span class="hljs-string">"Apricot"</span> <span class="hljs-comment">// ä¿®æ”¹å…ƒç´ </span>
</code></pre>
</li>
<li>
<p><strong>Setï¼ˆé›†åˆï¼‰å’Œ Mapï¼ˆæ˜ å°„ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Set - ä¸é‡å¤å…ƒç´ çš„é›†åˆ</span>
val set = <span class="hljs-built_in">setOf</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// ç»“æœï¼š [1, 2, 3]</span>

<span class="hljs-comment">// Map - é”®å€¼å¯¹</span>
val map = <span class="hljs-built_in">mapOf</span>(<span class="hljs-string">"name"</span> to <span class="hljs-string">"Kotlin"</span>, <span class="hljs-string">"version"</span> to <span class="hljs-string">"1.9"</span>)
<span class="hljs-built_in">println</span>(map[<span class="hljs-string">"name"</span>]) <span class="hljs-comment">// è¾“å‡ºï¼šKotlin</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-3"><strong>åã€å¾ªç¯ï¼šæ›´ä¼˜é›…çš„éå†æ–¹å¼</strong></h4>
<ol>
<li>
<p><strong>for å¾ªç¯</strong></p>
<pre><code class="hljs language-scss" lang="scss">val fruits = <span class="hljs-built_in">listOf</span>("Apple", "Banana", "Orange")

<span class="hljs-comment">// éå†é›†åˆå…ƒç´ </span>
for (fruit in fruits) {
    <span class="hljs-built_in">println</span>(fruit)
}

<span class="hljs-comment">// éå†ç´¢å¼•å’Œå€¼</span>
for ((index, fruit) in fruits<span class="hljs-selector-class">.withIndex</span>()) {
    <span class="hljs-built_in">println</span>("$index: $fruit")
}

<span class="hljs-comment">// éå†æ•°å­—èŒƒå›´</span>
for (i in <span class="hljs-number">1</span>..<span class="hljs-number">5</span>) { <span class="hljs-comment">// åŒ…å« 1 å’Œ 5</span>
    <span class="hljs-built_in">println</span>(i)
}

for (i in <span class="hljs-number">1</span> until <span class="hljs-number">5</span>) { <span class="hljs-comment">// ä¸åŒ…å« 5</span>
    <span class="hljs-built_in">println</span>(i)
}

for (i in <span class="hljs-number">5</span> downTo <span class="hljs-number">1</span> step <span class="hljs-number">2</span>) { <span class="hljs-comment">// ä»5åˆ°1ï¼Œæ­¥é•¿ä¸º2</span>
    <span class="hljs-built_in">println</span>(i) <span class="hljs-comment">// è¾“å‡ºï¼š5, 3, 1</span>
}
</code></pre>
</li>
<li>
<p><strong>while å’Œ do-while</strong>ï¼ˆä¸ Java ç›¸åŒï¼‰</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-tag">var</span> x = <span class="hljs-number">10</span>
while (x &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">println</span>(x)
    x--
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-4"><strong>åä¸€ã€å‡½æ•°è¿›é˜¶ï¼šé»˜è®¤å‚æ•°ã€å‘½åå‚æ•°ã€æ‰©å±•å‡½æ•°</strong></h4>
<ol>
<li>
<p><strong>é»˜è®¤å‚æ•°</strong>ï¼šä¸ºå‡½æ•°å‚æ•°æä¾›é»˜è®¤å€¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, greeting: <span class="hljs-type">String</span> = <span class="hljs-string">"Hello"</span>)</span></span> {
    println(<span class="hljs-string">"<span class="hljs-variable">$greeting</span>, <span class="hljs-variable">$name</span>!"</span>)
}

greet(<span class="hljs-string">"Alice"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šHello, Alice!</span>
greet(<span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Hi"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šHi, Bob!</span>
</code></pre>
</li>
<li>
<p><strong>å‘½åå‚æ•°</strong>ï¼šè°ƒç”¨æ—¶æŒ‡å®šå‚æ•°åï¼Œæé«˜å¯è¯»æ€§</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createUser</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, age: <span class="hljs-type">Int</span>, isAdmin: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">false</span>)</span></span> {
    println(<span class="hljs-string">"Name: <span class="hljs-variable">$name</span>, Age: <span class="hljs-variable">$age</span>, Admin: <span class="hljs-variable">$isAdmin</span>"</span>)
}

<span class="hljs-comment">// å¯ä»¥è·³è¿‡æœ‰é»˜è®¤å€¼çš„å‚æ•°ï¼Œéšæ„è°ƒæ•´é¡ºåº</span>
createUser(age = <span class="hljs-number">25</span>, name = <span class="hljs-string">"Charlie"</span>, isAdmin = <span class="hljs-literal">true</span>)
</code></pre>
</li>
<li>
<p><strong>æ‰©å±•å‡½æ•°</strong>ï¼šKotlin çš„"æ€æ‰‹çº§ç‰¹æ€§"ï¼Œå¯ä»¥ä¸ºç°æœ‰ç±»æ·»åŠ æ–°åŠŸèƒ½</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸º String ç±»æ·»åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">addExcitement</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> + <span class="hljs-string">"!!!"</span>
}

println(<span class="hljs-string">"Kotlin is fun"</span>.addExcitement()) <span class="hljs-comment">// è¾“å‡ºï¼šKotlin is fun!!!</span>

<span class="hljs-comment">// ä¸º List æ·»åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">secondOrNull</span><span class="hljs-params">()</span></span>: T? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.size &gt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>] <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">val</span> list = listOf(<span class="hljs-string">"first"</span>, <span class="hljs-string">"second"</span>, <span class="hljs-string">"third"</span>)
println(list.secondOrNull()) <span class="hljs-comment">// è¾“å‡ºï¼šsecond</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-5"><strong>åäºŒã€Lambda è¡¨è¾¾å¼å’Œé«˜é˜¶å‡½æ•°</strong></h4>
<p>è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒï¼Œè®©ä»£ç æå…¶ç®€æ´ã€‚</p>
<ol>
<li>
<p><strong>Lambda è¡¨è¾¾å¼åŸºç¡€</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸€ä¸ªç®€å•çš„ Lambdaï¼šæ¥æ”¶ä¸¤ä¸ª Int å‚æ•°ï¼Œè¿”å›å®ƒä»¬çš„å’Œ</span>
<span class="hljs-keyword">val</span> sum: (<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> = { a, b -&gt; a + b }
println(sum(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment">// è¾“å‡ºï¼š7</span>

<span class="hljs-comment">// æ›´å¸¸è§çš„å†™æ³•ï¼šç›´æ¥ä¼ é€’ç»™å‡½æ•°</span>
<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)

<span class="hljs-comment">// è¿‡æ»¤å‡ºå¶æ•°</span>
<span class="hljs-keyword">val</span> evens = numbers.filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> } <span class="hljs-comment">// [2, 4]</span>

<span class="hljs-comment">// å°†æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2</span>
<span class="hljs-keyword">val</span> doubled = numbers.map { it * <span class="hljs-number">2</span> } <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>

<span class="hljs-comment">// æ’åº</span>
<span class="hljs-keyword">val</span> sorted = numbers.sortedByDescending { it } <span class="hljs-comment">// [5, 4, 3, 2, 1]</span>
</code></pre>
</li>
<li>
<p><strong>é«˜é˜¶å‡½æ•°</strong>ï¼šæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>, operation: (<span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> operation(a, b)
}

<span class="hljs-comment">// ä½¿ç”¨ Lambda è°ƒç”¨</span>
<span class="hljs-keyword">val</span> result1 = calculate(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>) { x, y -&gt; x + y } <span class="hljs-comment">// 15</span>
<span class="hljs-keyword">val</span> result2 = calculate(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>) { x, y -&gt; x * y } <span class="hljs-comment">// 50</span>

<span class="hljs-comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createMultiplier</span><span class="hljs-params">(factor: <span class="hljs-type">Int</span>)</span></span>: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> { number -&gt; number * factor }
}

<span class="hljs-keyword">val</span> double = createMultiplier(<span class="hljs-number">2</span>)
<span class="hljs-keyword">val</span> triple = createMultiplier(<span class="hljs-number">3</span>)

println(double(<span class="hljs-number">5</span>)) <span class="hljs-comment">// è¾“å‡ºï¼š10</span>
println(triple(<span class="hljs-number">5</span>)) <span class="hljs-comment">// è¾“å‡ºï¼š15</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-6"><strong>åä¸‰ã€å¼‚å¸¸å¤„ç†ï¼štry-catch ä¹Ÿæ˜¯è¡¨è¾¾å¼</strong></h4>
<p>Kotlin çš„Â <code>try-catch</code>ä¹Ÿå¯ä»¥è¿”å›å€¼ï¼Œè¿™è®©é”™è¯¯å¤„ç†æ›´åŠ å‡½æ•°å¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseNumber</span><span class="hljs-params">(str: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Int</span>? {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        str.toInt() <span class="hljs-comment">// å¦‚æœè½¬æ¢æˆåŠŸï¼Œè¿”å›æ•°å­—</span>
    } <span class="hljs-keyword">catch</span> (e: NumberFormatException) {
        <span class="hljs-literal">null</span> <span class="hljs-comment">// å¦‚æœè½¬æ¢å¤±è´¥ï¼Œè¿”å› null</span>
    }
}

println(parseNumber(<span class="hljs-string">"123"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼š123</span>
println(parseNumber(<span class="hljs-string">"abc"</span>)) <span class="hljs-comment">// è¾“å‡ºï¼šnull</span>
</code></pre>
<h4 data-id="heading-7"><strong>å®æˆ˜æ¼”ç»ƒï¼šç»¼åˆè¿ç”¨</strong></h4>
<p>è®©æˆ‘ä»¬ç”¨å­¦åˆ°çš„çŸ¥è¯†è§£å†³ä¸€ä¸ªå®é™…é—®é¢˜ï¼šå¤„ç†å­¦ç”Ÿæˆç»©åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> score: <span class="hljs-built_in">Int</span>)

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> students = listOf(
        Student(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">85</span>),
        Student(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">92</span>),
        Student(<span class="hljs-string">"Charlie"</span>, <span class="hljs-number">78</span>),
        Student(<span class="hljs-string">"Diana"</span>, <span class="hljs-number">95</span>),
        Student(<span class="hljs-string">"Eve"</span>, <span class="hljs-number">88</span>)
    )
    
    <span class="hljs-comment">// æ‰¾å‡ºæˆç»©90åˆ†ä»¥ä¸Šçš„å­¦ç”Ÿåå­—</span>
    <span class="hljs-keyword">val</span> topStudents = students
        .filter { it.score &gt; <span class="hljs-number">90</span> }
        .map { it.name }
    println(<span class="hljs-string">"Top students: <span class="hljs-variable">$topStudents</span>"</span>) <span class="hljs-comment">// [Bob, Diana]</span>
    
    <span class="hljs-comment">// è®¡ç®—å¹³å‡åˆ†</span>
    <span class="hljs-keyword">val</span> averageScore = students.map { it.score }.average()
    println(<span class="hljs-string">"Average score: <span class="hljs-variable">$averageScore</span>"</span>)
    
    <span class="hljs-comment">// æŒ‰æˆç»©é™åºæ’åˆ—</span>
    <span class="hljs-keyword">val</span> sortedByScore = students.sortedByDescending { it.score }
    sortedByScore.forEach { println(<span class="hljs-string">"<span class="hljs-subst">${it.name}</span>: <span class="hljs-subst">${it.score}</span>"</span>) }
    
    <span class="hljs-comment">// ä½¿ç”¨æ‰©å±•å‡½æ•°æ·»åŠ å®ç”¨åŠŸèƒ½</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> List<span class="hljs-type">&lt;Student&gt;</span>.<span class="hljs-title">getNames</span><span class="hljs-params">()</span></span>: List&lt;String&gt; = <span class="hljs-keyword">this</span>.map { it.name }
    
    <span class="hljs-keyword">val</span> allNames = students.getNames()
    println(<span class="hljs-string">"All names: <span class="hljs-variable">$allNames</span>"</span>)
}
</code></pre>
<h4 data-id="heading-8"><strong>ä¸‹ä¸€æ­¥å­¦ä¹ è·¯å¾„</strong></h4>
<p>ç°åœ¨ä½ å·²ç»æŒæ¡äº† Kotlin çš„æ ¸å¿ƒè¯­æ³•ï¼æ¥ä¸‹æ¥å¯ä»¥æ¢ç´¢ï¼š</p>
<ul>
<li><strong>é¢å‘å¯¹è±¡ç¼–ç¨‹</strong>ï¼šç±»ã€å¯¹è±¡ã€ç»§æ‰¿ã€æ¥å£ã€æ•°æ®ç±»ã€å¯†å°ç±»</li>
<li><strong>åç¨‹</strong>ï¼šKotlin çš„è½»é‡çº§çº¿ç¨‹ï¼Œç”¨äºå¼‚æ­¥ç¼–ç¨‹</li>
<li><strong>DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰</strong> ï¼šç”¨ Kotlin åˆ›å»ºä¼˜é›…çš„é¢†åŸŸç‰¹å®šè¯­è¨€</li>
<li><strong>ä¸ Java äº’æ“ä½œ</strong>ï¼šåœ¨ç°æœ‰ Java é¡¹ç›®ä¸­å¼•å…¥ Kotlin</li>
</ul>
<p>Kotlin çš„å­¦ä¹ æ›²çº¿éå¸¸å¹³æ»‘ï¼Œè¿™äº›åŸºç¡€æ¦‚å¿µå°†ä¸ºä½ åç»­çš„å­¦ä¹ æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚å°è¯•ç”¨ Kotlin é‡å†™ä½ ä¹‹å‰ç”¨ Java å†™è¿‡çš„å°ç¨‹åºï¼Œä½ ä¼šç«‹å³æ„Ÿå—åˆ°å®ƒçš„é­…åŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin-1]]></title>    <link>https://juejin.cn/post/7571662618055049242</link>    <guid>https://juejin.cn/post/7571662618055049242</guid>    <pubDate>2025-11-12T12:14:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571662618055049242" data-draft-id="7571126773808218122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin-1"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T12:14:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin-1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:14:03.000Z" title="Wed Nov 12 2025 12:14:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¥½çš„ï¼Œæ²¡é—®é¢˜ï¼æˆ‘ä»¬æ¥å†™ä¸€ç¯‡æ›´ç³»ç»Ÿã€æ›´æ¸…æ™°ã€æ›´é€‚åˆé›¶åŸºç¡€å…¥é—¨çš„ Kotlin åŸºç¡€è¯­æ³•ç¯‡ã€‚</p>
<p>æˆ‘å°†é‡‡ç”¨Â  <strong>â€œæ¦‚å¿µè®²è§£ + ä»£ç ç¤ºä¾‹ + ä¸Javaå¯¹æ¯”â€</strong> çš„æ–¹å¼ï¼Œå¹¶è¾…ä»¥<strong>å®ç”¨æŠ€å·§å’Œæ€»ç»“</strong>ï¼ŒåŠ›æ±‚è®©ä½ ä¸€ç¯‡æ–‡ç« å°±æŒæ¡ Kotlin è¯­æ³•çš„ç²¾é«“ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>Kotlin åŸºç¡€è¯­æ³•å…¥é—¨ï¼šä»é›¶å¼€å§‹ï¼Œå†™å¥½æ¯ä¸€è¡Œä»£ç </strong></h3>
<p>ç›¸æ¯”äºè½¬è½½çš„æ–‡ç« ï¼Œæœ¬æ•™ç¨‹å°†æä¾›æ›´æ¸…æ™°çš„é€»è¾‘è„‰ç»œå’Œæ›´å®ç”¨çš„çŸ¥è¯†æç‚¼ã€‚</p>
<h4 data-id="heading-1"><strong>ä¸€ã€ Kotlin åˆå°è±¡ï¼šä¸ºä»€ä¹ˆæ˜¯å®ƒï¼Ÿ</strong></h4>
<p>åœ¨æ·±å…¥è¯­æ³•ä¹‹å‰ï¼Œå…ˆäº†è§£ Kotlin çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>ç®€æ´å®ç”¨</strong>ï¼šå¤§å¤§å‡å°‘æ ·æ¿ä»£ç ï¼ˆå¦‚ getter/setterã€æ•°æ®ç±»å‹å£°æ˜ç­‰ï¼‰ã€‚</li>
<li><strong>ç©ºå®‰å…¨</strong>ï¼šä»è¯­è¨€å±‚é¢æœç»äº†ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼‰çš„å›°æ‰°ã€‚</li>
<li><strong>100% å…¼å®¹ Java</strong>ï¼šå¯ä»¥åœ¨é¡¹ç›®ä¸­ä¸ Java ä»£ç æ— ç¼è°ƒç”¨ï¼Œå¹³æ»‘è¿ç§»ã€‚</li>
<li><strong>ç°ä»£è¯­è¨€ç‰¹æ€§</strong>ï¼šæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€æ‰©å±•å‡½æ•°ã€åç¨‹ç­‰ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹è¯­æ³•ä¹‹æ—…ã€‚</p>
<h4 data-id="heading-2"><strong>äºŒã€ ç¨‹åºèµ·ç‚¹ï¼šmain å‡½æ•°</strong></h4>
<p>ä»»ä½•ç¨‹åºçš„æ‰§è¡Œéƒ½æœ‰ä¸€ä¸ªå…¥å£ï¼Œåœ¨ Kotlin ä¸­ï¼Œå®ƒæå…¶ç®€æ´ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"Hello, Kotlin World!"</span>)
}
</code></pre>
<ul>
<li><code>fun</code>ï¼šå…³é”®å­—ï¼Œç”¨äºå£°æ˜ä¸€ä¸ªå‡½æ•°ã€‚</li>
<li><code>main</code>ï¼šå‡½æ•°åï¼Œæ˜¯ç¨‹åºçš„å…¥å£ç‚¹ã€‚</li>
<li><code>println</code>ï¼šä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºåœ¨æ§åˆ¶å°è¾“å‡ºä¸€è¡Œå†…å®¹ã€‚</li>
</ul>
<p><strong>å¯¹æ¯” Javaï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"Hello, Java World!"</span>);
    }
}
</code></pre>
<p>Kotlin çš„å†™æ³•æ˜æ˜¾æ›´ç®€æ´ï¼Œä¸éœ€è¦ç±»åŒ…è£…ã€‚</p>
<h4 data-id="heading-3"><strong>ä¸‰ã€ å˜é‡å£°æ˜ï¼šval å’Œ var çš„è‰ºæœ¯</strong></h4>
<p>Kotlin ä½¿ç”¨ä¸¤ä¸ªå…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œè¿™æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ã€‚</p>
<ol>
<li>
<p><strong><code>val</code>ï¼ˆvalue çš„ç¼©å†™ï¼‰</strong> ï¼šç”¨äºå£°æ˜<strong>åªè¯»å˜é‡</strong>ï¼Œç›¸å½“äº Java ä¸­çš„Â <code>final</code>å˜é‡ã€‚ä¸€æ—¦èµ‹å€¼ï¼Œä¸å¯æ›´æ”¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">val name: <span class="hljs-attr">String</span> = <span class="hljs-string">"Kotlin"</span>
// <span class="hljs-attr">name</span> = <span class="hljs-string">"Java"</span> // é”™è¯¯ï¼ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸º name æ˜¯åªè¯»çš„
</code></pre>
</li>
<li>
<p><strong><code>var</code>ï¼ˆvariable çš„ç¼©å†™ï¼‰</strong> ï¼šç”¨äºå£°æ˜<strong>å¯å˜å˜é‡</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">var age: <span class="hljs-attr">Int</span> = <span class="hljs-number">5</span>
<span class="hljs-attr">age</span> = <span class="hljs-number">6</span> // æ­£ç¡®ï¼å¯ä»¥é‡æ–°èµ‹å€¼
</code></pre>
</li>
</ol>
<p><strong>é«˜çº§æŠ€å·§ï¼šç±»å‹æ¨æ–­</strong></p>
<p>Kotlin ç¼–è¯‘å™¨å¾ˆæ™ºèƒ½ï¼Œå¦‚æœä½ åœ¨å£°æ˜æ—¶ç›´æ¥èµ‹å€¼ï¼Œå¯ä»¥çœç•¥ç±»å‹å£°æ˜ï¼ˆ<code>: String</code>å’ŒÂ <code>: Int</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">language</span> = <span class="hljs-string">"Kotlin"</span> // ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ language ä¸º String ç±»å‹
var <span class="hljs-attr">count</span> = <span class="hljs-number">10</span> // ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ count ä¸º Int ç±»å‹
</code></pre>
<p><strong>ğŸ“Œ æœ€ä½³å®è·µå»ºè®®ï¼š</strong></p>
<p><strong>ä¼˜å…ˆä½¿ç”¨Â <code>val</code></strong>ï¼Œé™¤éè¿™ä¸ªå˜é‡ç¡®å®éœ€è¦è¢«æ”¹å˜ã€‚è¿™èƒ½è®©ä½ çš„ä»£ç æ›´å®‰å…¨ã€æ›´ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„ç†å¿µã€‚</p>
<h4 data-id="heading-4"><strong>å››ã€ å‡½æ•°å®šä¹‰ï¼šfun çš„å…³é”®ä½œç”¨</strong></h4>
<p>ä½¿ç”¨Â <code>fun</code>å…³é”®å­—æ¥å®šä¹‰å‡½æ•°ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åŸºæœ¬å‡½æ•°ï¼šæ— è¿”å›å€¼</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span> {
    println(<span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>!"</span>)
}

<span class="hljs-comment">// 2. æœ‰è¿”å›å€¼çš„å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sum</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> { <span class="hljs-comment">// è¿”å›å€¼ç±»å‹åœ¨å‚æ•°åˆ—è¡¨åå£°æ˜</span>
    <span class="hljs-keyword">return</span> a + b
}

<span class="hljs-comment">// 3. å•è¡¨è¾¾å¼å‡½æ•°ï¼ˆè¯­æ³•ç³–ï¼ï¼‰</span>
<span class="hljs-comment">// å½“å‡½æ•°ä½“åªæœ‰ä¸€è¡Œè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥ç®€åŒ–å†™æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sumSimple</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = a + b
<span class="hljs-comment">// ç”šè‡³ï¼Œç±»å‹æ¨æ–­ä¹Ÿèƒ½ç”¨åœ¨è¿™é‡Œ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sumEvenSimpler</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> = a + b
</code></pre>
<p><strong>è°ƒç”¨å‡½æ•°ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">greet</span>("World") <span class="hljs-comment">// è¾“å‡ºï¼šHello, World!</span>
val result = <span class="hljs-built_in">sum</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)
<span class="hljs-built_in">println</span>(result) <span class="hljs-comment">// è¾“å‡ºï¼š8</span>
</code></pre>
<h4 data-id="heading-5"><strong>äº”ã€ å­—ç¬¦ä¸²æ¨¡æ¿ï¼šè®©æ‹¼æ¥æˆä¸ºå†å²</strong></h4>
<p>è¿™æ˜¯ Kotlin éå¸¸æ–¹ä¾¿çš„ç‰¹æ€§ï¼Œç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­ç›´æ¥åµŒå…¥å˜é‡æˆ–è¡¨è¾¾å¼ã€‚</p>
<ul>
<li>
<p><strong>ä½¿ç”¨Â <code>$å˜é‡å</code></strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> name = <span class="hljs-string">"Alice"</span>
println(<span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šHello, Alice</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨Â <code>${è¡¨è¾¾å¼}</code></strong> ï¼ˆè¡¨è¾¾å¼å¤æ‚æ—¶å¿…éœ€ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> a = <span class="hljs-number">10</span>
<span class="hljs-keyword">val</span> b = <span class="hljs-number">20</span>
println(<span class="hljs-string">"The sum is <span class="hljs-subst">${a + b}</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šThe sum is 30</span>
println(<span class="hljs-string">"The text length is <span class="hljs-subst">${name.length}</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šThe text length is 5</span>
</code></pre>
</li>
</ul>
<p><strong>å¯¹æ¯” Java çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼š</strong> <code>"Hello, " + name</code>ï¼ŒKotlin çš„æ–¹å¼æ›´ç›´è§‚ã€æ›´å®‰å…¨ã€‚</p>
<h4 data-id="heading-6"><strong>å…­ã€ æ¡ä»¶æ§åˆ¶ï¼šif å’Œ when</strong></h4>
<ol>
<li>
<p><strong><code>if</code>è¡¨è¾¾å¼</strong></p>
<p>åœ¨ Kotlin ä¸­ï¼Œ<code>if</code>ä¸ä»…å¯ä»¥åšåˆ†æ”¯æ§åˆ¶ï¼Œè¿˜å¯ä»¥<strong>è¿”å›ä¸€ä¸ªå€¼</strong>ã€‚</p>
<pre><code class="hljs language-go" lang="go">val max = <span class="hljs-keyword">if</span> (a &gt; b) {
    <span class="hljs-built_in">println</span>(<span class="hljs-string">"a is larger"</span>)
    a <span class="hljs-comment">// æœ€åä¸€è¡Œä½œä¸ºè¿”å›å€¼</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">println</span>(<span class="hljs-string">"b is larger or equal"</span>)
    b
}
<span class="hljs-built_in">println</span>(<span class="hljs-string">"Max is $max"</span>)
</code></pre>
<p><strong>å¯¹æ¯” Javaï¼š</strong> Java çš„Â <code>if</code>æ˜¯è¯­å¥ï¼Œä¸è¿”å›å€¼ï¼Œéœ€è¦å€ŸåŠ©ä¸‰å…ƒè¿ç®—ç¬¦Â <code>? :</code>ã€‚Kotlin ç”¨Â <code>if</code>ç»Ÿä¸€äº†ä¸¤è€…ã€‚</p>
</li>
<li>
<p><strong><code>when</code>è¡¨è¾¾å¼</strong></p>
<p>åŠŸèƒ½ç±»ä¼¼ Java çš„Â <code>switch</code>ï¼Œä½†å¼ºå¤§å¾—å¤šã€‚</p>
<pre><code class="hljs language-rust" lang="rust">val grade = <span class="hljs-string">"A"</span>
<span class="hljs-title function_ invoke__">when</span> (grade) {
    <span class="hljs-string">"A"</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"Excellent"</span>)
    <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"Good"</span>) <span class="hljs-comment">// å¯ä»¥åˆå¹¶å¤šä¸ªæ¡ä»¶</span>
    <span class="hljs-keyword">in</span> <span class="hljs-string">"D"</span>..<span class="hljs-string">"F"</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"Need improvement"</span>) <span class="hljs-comment">// å¯ä»¥åˆ¤æ–­èŒƒå›´</span>
    <span class="hljs-keyword">else</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"Invalid grade"</span>) <span class="hljs-comment">// ç±»ä¼¼ default</span>
}

<span class="hljs-comment">// when ä¹Ÿå¯ä»¥è¿”å›å€¼</span>
val description = <span class="hljs-title function_ invoke__">when</span> (grade) {
    <span class="hljs-string">"A"</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">"Excellent"</span>
    <span class="hljs-keyword">else</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-string">"Other grades"</span>
}
<span class="hljs-title function_ invoke__">println</span>(description)
</code></pre>
</li>
</ol>
<h4 data-id="heading-7"><strong>ä¸ƒã€ ç©ºå®‰å…¨ï¼šKotlin çš„ç‹ç‰Œç‰¹æ€§</strong></h4>
<p>è¿™æ˜¯ Kotlin è§£å†³ NPE çš„æ ¸å¿ƒè®¾è®¡ã€‚</p>
<ol>
<li>
<p><strong>å¯ç©ºç±»å‹</strong>ï¼šåœ¨ç±»å‹åé¢åŠ ä¸€ä¸ªé—®å·Â <code>?</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡å¯ä»¥ä¸ºÂ <code>null</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> <span class="hljs-attr">nullableName</span>: <span class="hljs-title class_">String</span>? = <span class="hljs-literal">null</span> <span class="hljs-comment">// å…è®¸ä¸º null</span>
<span class="hljs-keyword">var</span> <span class="hljs-attr">nonNullName</span>: <span class="hljs-title class_">String</span> = <span class="hljs-string">"Kotlin"</span> <span class="hljs-comment">// ä¸å…è®¸ä¸º null</span>
<span class="hljs-comment">// nonNullName = null // é”™è¯¯ï¼ç¼–è¯‘ä¸é€šè¿‡</span>
</code></pre>
</li>
<li>
<p><strong>å®‰å…¨è°ƒç”¨æ“ä½œç¬¦Â <code>?.</code></strong> ï¼šå¦‚æœå¯¹è±¡ä¸ä¸ºç©ºï¼Œåˆ™è°ƒç”¨æ–¹æ³•æˆ–å±æ€§ï¼›å¦åˆ™è¿”å›Â <code>null</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> length: <span class="hljs-built_in">Int</span>? = nullableName?.length <span class="hljs-comment">// å¦‚æœ nullableName ä¸º nullï¼Œåˆ™ length ä¹Ÿä¸º nullï¼Œä¸ä¼šæŠ›å‡º NPE</span>
</code></pre>
</li>
<li>
<p><strong>Elvis æ“ä½œç¬¦Â <code>?:</code></strong> ï¼šæä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> safeLength: <span class="hljs-built_in">Int</span> = nullableName?.length ?: <span class="hljs-number">0</span> <span class="hljs-comment">// å¦‚æœå·¦è¾¹ä¸º nullï¼Œåˆ™è¿”å› 0</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-8"><strong>æ€»ç»“ä¸å­¦ä¹ å»ºè®®</strong></h4>









































<table><thead><tr><th>ç‰¹æ€§</th><th>å…³é”®å­—/ç¬¦å·</th><th>æ ¸å¿ƒä¼˜ç‚¹</th><th>å¯¹æ¯” Java</th></tr></thead><tbody><tr><td><strong>å˜é‡å£°æ˜</strong></td><td><code>val</code>,Â <code>var</code></td><td>ä¸å¯å˜ä¼˜å…ˆï¼Œç±»å‹æ¨æ–­</td><td>å‡å°‘Â <code>final</code>ï¼Œä»£ç æ›´ç®€æ´</td></tr><tr><td><strong>å‡½æ•°å®šä¹‰</strong></td><td><code>fun</code></td><td>å•è¡¨è¾¾å¼å‡½æ•°ç®€åŒ–</td><td>æ— éœ€ç±»åŒ…è£…ï¼Œè¯­æ³•æ›´è½»é‡</td></tr><tr><td><strong>å­—ç¬¦ä¸²</strong></td><td><code>$</code>,Â <code>${}</code></td><td>åµŒå…¥å˜é‡ï¼Œæ— éœ€æ‹¼æ¥</td><td>æ¯”Â <code>+</code>æ›´ç›´è§‚å®‰å…¨</td></tr><tr><td><strong>æ¡ä»¶æ§åˆ¶</strong></td><td><code>if</code>,Â <code>when</code></td><td>æ˜¯è¡¨è¾¾å¼ï¼Œå¯è¿”å›å€¼</td><td>åŠŸèƒ½æ¯”Â <code>switch</code>æ›´å¼ºå¤§</td></tr><tr><td><strong>ç©ºå®‰å…¨</strong></td><td><code>?</code>,Â <code>?.</code>,Â <code>?:</code></td><td>ç¼–è¯‘æœŸé˜²æ­¢ NPE</td><td>ä»è¯­è¨€å±‚é¢è§£å†³ç—›ç‚¹</td></tr></tbody></table>
<p><strong>ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®ï¼š</strong></p>
<p>æŒæ¡äº†è¿™äº›åŸºç¡€è¯­æ³•åï¼Œä½ å°±å¯ä»¥ç¼–å†™ç®€å•çš„ Kotlin ç¨‹åºäº†ã€‚æ¥ä¸‹æ¥å¯ä»¥æ¢ç´¢ï¼š</p>
<ul>
<li><strong>æ•°æ®ç±»å‹</strong>ï¼šæ•°å€¼ç±»å‹ã€å­—ç¬¦ã€å¸ƒå°”å€¼ã€æ•°ç»„å’Œé›†åˆã€‚</li>
<li><strong>å¾ªç¯</strong>ï¼š<code>for</code>å’ŒÂ <code>while</code>å¾ªç¯ã€‚</li>
<li><strong>é¢å‘å¯¹è±¡</strong>ï¼šç±»ã€ç»§æ‰¿ã€æ¥å£ã€‚</li>
<li><strong>Lambda è¡¨è¾¾å¼ä¸é«˜é˜¶å‡½æ•°</strong>ï¼šKotlin å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒã€‚</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡ä¸ºä½ é‡èº«å®šåˆ¶çš„æ•™ç¨‹èƒ½è®©ä½ æœ‰ä¸€ä¸ªå®Œç¾çš„å¼€å§‹ï¼Kotlin æ˜¯ä¸€é—¨ä»¤äººæ„‰æ‚¦çš„è¯­è¨€ï¼Œç¥ä½ å­¦ä¹ æ„‰å¿«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Skills æ–°ç©æ³•ï¼šç”¨ skill-creator 10 åˆ†é’Ÿæå®š Excel æŠ¥è¡¨è‡ªåŠ¨åŒ–ï¼ŒèŒåœºäººå¿…å­¦]]></title>    <link>https://juejin.cn/post/7571672422689144884</link>    <guid>https://juejin.cn/post/7571672422689144884</guid>    <pubDate>2025-11-12T12:17:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571672422689144884" data-draft-id="7571650164843839522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Skills æ–°ç©æ³•ï¼šç”¨ skill-creator 10 åˆ†é’Ÿæå®š Excel æŠ¥è¡¨è‡ªåŠ¨åŒ–ï¼ŒèŒåœºäººå¿…å­¦"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T12:17:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Skills æ–°ç©æ³•ï¼šç”¨ skill-creator 10 åˆ†é’Ÿæå®š Excel æŠ¥è¡¨è‡ªåŠ¨åŒ–ï¼ŒèŒåœºäººå¿…å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:17:15.000Z" title="Wed Nov 12 2025 12:17:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å‰è¨€</h2>
<p>skillâ€‘creator æ˜¯ Anthropic åœ¨â€¯Claudeâ€¯Skills ä½“ç³»ä¸­æä¾›çš„â€œå…ƒæŠ€èƒ½â€ã€‚å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå¯ç›´æ¥åœ¨ Claude å¯¹è¯ä¸­è°ƒç”¨çš„ Skillï¼Œä¸“é—¨ç”¨äº <strong>å¸®åŠ©ç”¨æˆ·å¿«é€Ÿåˆ›å»ºã€ç¼–è¾‘ã€æ‰“åŒ…å…¶ä»–è‡ªå®šä¹‰ Skill</strong>ï¼Œä»è€Œè®© Claude èƒ½å¤Ÿåœ¨ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹æ‹¥æœ‰ä¸“ä¸šåŒ–çš„èƒ½åŠ›ã€‚åœ¨äº§å“å‘å¸ƒæ—¶ï¼ŒAnthropic å°†å…¶å®šä½ä¸ºâ€œä¸€é”®ç”Ÿæˆ Skill çš„äº¤äº’å¼å‘å¯¼â€ï¼Œç”¨æˆ·åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œskillâ€‘creator ä¼šå¼•å¯¼å®Œæˆæ–‡ä»¶ç»“æ„ã€<code>SKILL.md</code> ç¼–å†™ã€èµ„æºæ‰“åŒ…ç­‰å…¨éƒ¨æ­¥éª¤ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©skillâ€‘creator å¸®æˆ‘ä»¬ç”Ÿæˆæ–°çš„skilsæŠ€èƒ½ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆé€‰æ‹© Skill Creator? å®ƒèƒ½æ‹¥æœ‰å¼ºå¤§çš„å…ƒæŠ€èƒ½ç³»ç»Ÿï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ„å»ºä¸“ä¸šçš„ Claude æŠ€èƒ½æ‰©å±•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/638ec69b4e554c6a9a4f64b4308999ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=zSt6J6mjJE7ofGIOpV7cOt66gow%3D" alt="image-20251112150442511" loading="lazy"/></p>
<p>æŠ€æœ¯æ¶æ„ç‰¹ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24eca58462f14b878dee10c43e8a84de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=pWtoYw%2FRWa0D4LV2OuEiYKg%2FdKw%3D" alt="image-20251112150722385" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å…­ä¸ªæ­¥éª¤å¾ˆå®¹æ˜“åˆ›å»ºä¸€ä¸ªæ–°çš„Skill</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67431af7a59d40dd950be3a2ff2ceb36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=NYY%2BaTkhiCQaccoV7Sy06iOhUys%3D" alt="image-20251112150824718" loading="lazy"/></p>
<p>ä¸ŠæœŸç»™å¤§å®¶ä»‹ç»è¿‡å…³äºSkillsåˆ¶ä½œï¼Œå½“æ—¶æ²¡æœ‰ä½¿ç”¨skillâ€‘creator æ¥å®ç°ï¼Œè€Œä¸”å®ç°çš„ä¹Ÿè¾ƒä¸ºç®€å•ï¼Œå¯¹ä¸ŠæœŸä¸äº†è§£çš„å°ä¼™ä¼´å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FHHZtKZzW-IB7Bu3DVT4Fsg" target="_blank" title="https://mp.weixin.qq.com/s/HHZtKZzW-IB7Bu3DVT4Fsg" ref="nofollow noopener noreferrer">Claude Skills ä»é›¶åˆ°ä¸€ï¼šæ‰‹æŠŠæ‰‹æ‰“é€ ä¸“å±å…¬ä¼—å·æ–‡é£ç”Ÿæˆå™¨ï¼Œ10 åˆ†é’Ÿæå®š AI æŠ€èƒ½å®šåˆ¶</a>ã€‹</p>
<p>æœ¬æœŸç»™å¤§å®¶ä»‹ç»å¦‚ä½•ä½¿ç”¨skillâ€‘creatoråˆ›å»ºä¸€ä¸ªExcel æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆçš„ Skillï¼Œè¿™ä¸ªskill å¾ˆå¤šèŒåœºäººå£«åº”è¯¥ç”¨çš„ä¼šæ¯”è¾ƒå¤šã€‚é‚£ä¹ˆè¯ä¸å¤šè¯´ä¸‹é¢æ•™å¤§å®¶å¦‚ä½•å®ç°å§ ã€‚</p>
<h2 data-id="heading-1">2.Claudeâ€¯ Skillsåˆ¶ä½œ</h2>
<h3 data-id="heading-2">åˆ›å»ºskills</h3>
<p>æç¤ºè¯å¦‚ä¸‹</p>
<pre><code class="hljs">å¸®æˆ‘ç”¨ skillâ€‘creator åˆ›å»ºä¸€ä¸ªç”¨äº Excel æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆçš„ Skill
</code></pre>
<p>æ ¸å¿ƒæ˜¯è®©AI è°ƒç”¨skillâ€‘creator</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d89c3527e9b549eabec0006f51d9f107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=VkmFtBWxbUm%2FDk%2FdaWSl5KuWReI%3D" alt="image-20251112130211029" loading="lazy"/></p>
<p>â€‹    ä¸­é—´AI ä¼šè¦æ±‚æˆ‘ä»¬å¡«å†™ä¸€äº›ä¸ªäººæŠ€èƒ½è¦æ±‚ï¼š</p>
<p>â€‹    è¿˜æ˜¯é¡¹ç›®æŠ€èƒ½ï¼ˆå½“å‰é¡¹ç›®å…±äº«ï¼‰ï¼Ÿ</p>
<p>â€‹    Excel æŠ¥è¡¨ä¸»è¦ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ</p>
<p>â€‹    ä½ å¸Œæœ›ä½¿ç”¨å“ªä¸ª Python Excel åº“ï¼Ÿ</p>
<p>â€‹    æˆ‘ä»¬å¡«å†™ä¸Šé¢çš„ä¿¡æ¯ï¼šä¸ªäººæŠ€èƒ½ï¼ˆ~/.claude/skills/ï¼‰ã€æ•°æ®åˆ†ææŠ¥è¡¨, ä¸šåŠ¡æŠ¥å‘Š, æ•°æ®å¯¼å‡º, æ¨¡æ¿å¡«å……ã€pandas + openpyxl</p>
<p>æ¥ä¸‹æ¥AI å¸®æˆ‘ä»¬ç”Ÿæˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb976c476fbd4cd8a2af34adf1feccd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=n%2FtgOY08MIER8ifXkmhSmj1oFg8%3D" alt="img" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥AI å¸®æˆ‘ä»¬åœ¨ç”Ÿæˆskillé‡Œé¢ç”¨åˆ°pythonä»£ç </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c275aa3c3eb406d8d9969df0f304d8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=GA9MnmLs9%2FT789JdYQNHdNXNRHw%3D" alt="image-20251112130927092" loading="lazy"/></p>
<p>â€‹    åé¢å†ç­‰å¾…å‡ åˆ†é’Ÿå AI å¸®æˆ‘ç”Ÿæˆäº†åŸºäºexcleè¡¨æ ¼çš„skill</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a29e4277d38a4892ac2e8e46c6372552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=h67bGjzJjGPrtX9rFJgj9gulYLQ%3D" alt="image-20251112131630040" loading="lazy"/></p>
<p>åŒ…å«è¿™ä¸ªexcleè¡¨æ ¼çš„æŠ€èƒ½</p>
<pre><code class="hljs language-shell" lang="shell"> åŒ…å« 11 ä¸ªè¯¦ç»†ç« èŠ‚ï¼š
  1. pandas Excel æ“ä½œ
  2. openpyxl æ ¸å¿ƒ API
  3. æ ·å¼å’Œæ ¼å¼åŒ–ï¼ˆå­—ä½“ã€å¡«å……ã€è¾¹æ¡†ã€å¯¹é½ï¼‰
  4. å›¾è¡¨ APIï¼ˆæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æ•£ç‚¹å›¾ï¼‰
  5. æ¡ä»¶æ ¼å¼ï¼ˆè‰²é˜¶ã€æ•°æ®æ¡ã€å›¾æ ‡é›†ï¼‰
  6. é«˜çº§åŠŸèƒ½ï¼ˆæ•°æ®éªŒè¯ã€è¡¨æ ¼ã€ä¿æŠ¤ï¼‰
  7. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

  ç¤ºä¾‹è„šæœ¬ç‰¹ç‚¹

  basic_report.py:
  - åŸºç¡€æŠ¥è¡¨ç”Ÿæˆæµç¨‹
  - æ ‡å‡†æ ·å¼åº”ç”¨
  - åˆ—å®½è‡ªåŠ¨è°ƒæ•´
  - å†»ç»“çª—æ ¼å’Œç­›é€‰

  advanced_report.py:
  - å¤šå·¥ä½œè¡¨ç®¡ç†
  - æ•°æ®é€è§†è¡¨
  - å„ç±»å›¾è¡¨åˆ›å»º
  - æ¡ä»¶æ ¼å¼åº”ç”¨
  - å…¬å¼è‡ªåŠ¨è®¡ç®—
  - ä»ªè¡¨æ¿ç”Ÿæˆ

  template_fill.py:
  - æ¨¡æ¿åŠ è½½å’Œå¡«å……
  - å‘½åèŒƒå›´ä½¿ç”¨
  - æ‰¹é‡ç”ŸæˆæŠ¥å‘Š
  - å‘ç¥¨ç”Ÿæˆç¤ºä¾‹

  quick_reference.py:
  - 500+ è¡Œä»£ç ç‰‡æ®µé›†åˆ
  - è¦†ç›–æ‰€æœ‰å¸¸ç”¨æ“ä½œ
  - å³å¤åˆ¶å³ç”¨
  - åŒ…å«å®Œæ•´ç¤ºä¾‹æ¨¡æ¿
</code></pre>
<p>åŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ä¹Ÿç»™æˆ‘ä»¬ä¸¾ä¾‹å†™å¥½äº†</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1.</span> æµ‹è¯• Skill: åœ¨ Claude Code ä¸­é—®ï¼š<span class="hljs-string">"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç®€å•çš„ Excel é”€å”®æŠ¥è¡¨"</span>
</code></pre>
<h3 data-id="heading-3">skillsä¸Šä¼ æ‰“åŒ…</h3>
<p>AI åœ¨åˆ›å»ºè¿™ä¸ªskills ç›´æ¥å¸®æˆ‘ç”Ÿæˆåˆ°æˆ‘çš„claude skillsä¸­ï¼Œæˆ‘éƒ½ä¸éœ€è¦å¤åˆ¶äº†ã€‚</p>
<p>æˆ‘ä»¬è¿›å…¥/root/.claude/skills ç›®å½•ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~/.claude/skills
</code></pre>
<p>â€‹    <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef786d720774db2a53ec627345a95be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=D6P6Y1mnTmqNnCy8yd8web%2FRxcU%3D" alt="image-20251112132123032" loading="lazy"/></p>
<p>æŸ¥çœ‹ç”Ÿæˆå¥½çš„skills  æœ‰å“ªäº›å†…å®¹ã€‚</p>
<p>â€‹    <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/793bef06fb92485688123d88789b5e07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=6agdTiszDdjjf%2BBeTxw%2Boq4Ty7I%3D" alt="image-20251112132222126" loading="lazy"/></p>
<p>â€‹      ä»£ç </p>
<p>â€‹      <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/087380b441174857aa33b00e32483310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=A3a58T2L4hSr1eHZUqaDO3RgptA%3D" alt="image-20251112132307207" loading="lazy"/></p>
<p>â€‹      éå¸¸å®Œç¾ ä¸€è¡Œå‘½ä»¤å°±å¸®æˆ‘åˆ¶ä½œå¥½äº†ä¸€ä¸ª Excel æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆçš„ Skill</p>
<h2 data-id="heading-4">3.éªŒè¯åŠæµ‹è¯•</h2>
<p>â€‹    æ¥ä¸‹æ¥æˆ‘ä»¬éªŒè¯ä¸€ä¸‹è¿™ä¸ªskills ä½œå‡ºçš„è¡¨æ ¼æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p>
<p>â€‹    æˆ‘ä»¬è¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘è®© AI å¸®æˆ‘é€ æˆä¸€ä¸ªè¡¨æ ¼æ•°æ®ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">	è¯·å¸®æˆ‘é€ ä¸€ä¸ª<span class="hljs-string">"ç®€å•çš„åˆä¸­ç”ŸæˆæœŸä¸­è€ƒè¯•å­¦ä¹ æˆç»©è¡¨æ ¼"</span> å…¶ä¸­åŒ…æ‹¬è¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­ã€ç‰©ç†ã€åŒ–å­¦ã€å†å²ã€ç”Ÿç‰©ã€åœ°ç†ã€å†å²ç§‘ç›®çš„ã€‚å­¦ç”Ÿç»™æˆ‘ç”Ÿæˆå¤§æ¦‚<span class="hljs-number">50</span>ä¸ªäººã€‚å­¦ç”Ÿçš„å§“åå’Œæˆç»©éšæœºç”Ÿæˆ
	ç”Ÿæˆ<span class="hljs-string">"2025å¹´101ä¸­å­¦å…«å¹´çº§æœŸä¸­è€ƒè¯•æˆç»©è¡¨.xlsx"</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4748f195b2741af8eade5fa70e0709c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=%2B%2FXWdBU9IqDGuWnTzQb9UFRzPGg%3D" alt="image-20251112133252245" loading="lazy"/></p>
<p>â€‹      claude code ä¼šåŸºäºæˆ‘åˆšæ‰çš„éœ€æ±‚ç”Ÿæˆpythonä»£ç ï¼Œä½¿ç”¨è¿™ä¸ªpythonä»£ç æ¥ç”Ÿæˆè¿™ä¸ªåˆä¸­æˆç»©è¡¨æ ¼ã€‚</p>
<p>â€‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92d16604889f466d86bfbb071893e05f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=1dJCMXDyabRXqPqCSR7mPBsKUwA%3D" alt="image-20251112133703651" loading="lazy"/></p>
<p>ç”Ÿæˆå®Œæˆï¼Œæˆ‘ä»¬ç”¨ç”µè„‘æ‰“å¼€è¡¨æ ¼çœ‹çœ‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79b980aa3c3c42f8a8e3229147f75222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=6bzQtVC65ZW5wSGZXEdR8sRHucs%3D" alt="image-20251112133833007" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9d9fd0d13147b4bfd7efbe0344f022~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=GbtmjWW%2FzkBlpP4SLsYsFaS%2Fcoo%3D" alt="image-20251112133851759" loading="lazy"/></p>
<p>æ•°æ®è¡¨æ ¼å·²ç»ç”Ÿæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„excelè¡¨æ ¼skills  æ¥ç”Ÿæˆæˆ‘ä»¬è¦çš„ç»Ÿè®¡å›¾è¡¨ã€‚</p>
<p>æˆ‘çš„æç¤ºè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">è¯·åŸºäºâ€œ2025å¹´101ä¸­å­¦å…«å¹´çº§æœŸä¸­è€ƒè¯•æˆç»©è¡¨.xlsxâ€è¡¨æ ¼ä½¿ç”¨excel-report-generator è¿™ä¸ªskills æŠ€èƒ½å¸®æˆ‘ç”ŸæˆåŸºäºâ€œè¯­æ–‡ã€æ•°å­¦ã€è‹±è¯­ã€ç‰©ç†ã€åŒ–å­¦ã€å†å²ã€ç”Ÿç‰©ã€åœ°ç†ã€å†å²ç§‘ç›®è¯„ä»·æˆç»©åœ¨90åˆ†ä»¥ä¸Šã€80åˆ†-80åˆ†ã€70åˆ†ä»¥ä¸‹äººå‘˜ç»Ÿè®¡å æ¯”å›¾â€ è¾“å‡ºâ€œ2025å¹´101ä¸­å­¦å…«å¹´çº§æœŸä¸­è€ƒè¯•æˆç»©è¡¨å„å­¦ç§‘å æ¯”ç»Ÿè®¡å›¾.xlsxâ€
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/409f85294c7c486da965e647494a5bce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=0zwC0EzbHnlQoMrXuk8w7xuylw4%3D" alt="image-20251112142242284" loading="lazy"/></p>
<p>â€‹     ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e09a977639c94870986af1b8cb927f54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=x2IbT3rHyGs5ZAESF574yHGJcuw%3D" alt="image-20251112142403700" loading="lazy"/></p>
<p>ç»“æœAI éå¸¸è´´å¿ƒçš„å¸®æˆ‘ç”Ÿæˆäº†ä¸‹é¢çš„æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58f3151eadcd48e2a4d038ff19658ecd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=VzcoFd7B7%2BDqrc7tlbzadVakx4o%3D" alt="image-20251112142819679" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae03a724fec74285a06b63adaa7e9371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763554634&amp;x-signature=UIAZT76%2FmEyFw7b%2BEJcICI21pvI%3D" alt="image-20251112142845779" loading="lazy"/></p>
<p>æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„è‡ªå®šä¹‰åˆ›å»ºexcel-report-generator åŸºäºexcelè¡¨æ ¼å¿«é€Ÿç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬è¦çš„å„ç§å›¾è¡¨ï¼Œå‘µå‘µæ˜¯ä¸æ˜¯éå¸¸çš„æ–¹ä¾¿ï¼Ÿ</p>
<p>è§†é¢‘æ•ˆæœ</p>
<p>skillså·²ç»å¼€æº</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwwwzhouhui%2Fskills_collection" target="_blank" title="https://github.com/wwwzhouhui/skills_collection" ref="nofollow noopener noreferrer">github.com/wwwzhouhui/â€¦</a></p>
<p>æ„Ÿå…´è¶£å°ä¼™ä¼´å¯ä»¥å»ä¸‹è½½ã€‚</p>
<h2 data-id="heading-5">4.æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®è·µäº†ä½¿ç”¨ skill-creator å·¥å…·åˆ›å»º Excel æŠ¥è¡¨è‡ªåŠ¨ç”Ÿæˆä¸“å± Claude Skill çš„å®Œæ•´æµç¨‹ï¼Œè¯¥æµç¨‹ä»¥ Anthropic æ¨å‡ºçš„ Skills æ¨¡å—åŒ–ä½“ç³»ä¸ºåŸºç¡€ï¼Œé€šè¿‡å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆå·¥å…·ï¼Œå½¢æˆäº†ä¸€å¥—ä»æŠ€èƒ½å®šåˆ¶åˆ°å®é™…æŠ¥è¡¨ç”Ÿæˆçš„é«˜æ•ˆè§£å†³æ–¹æ¡ˆã€‚</p>
<p>é€šè¿‡è¿™å¥—å®è·µæ–¹æ¡ˆï¼Œç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿæ„å»ºä¸“ä¸šçš„ Excel è‡ªåŠ¨åŒ–èƒ½åŠ› â€”â€” å€ŸåŠ© skill-creator å¼•å¯¼çš„äº¤äº’å¼é…ç½®ï¼ˆåœºæ™¯å®šä¹‰ã€åº“é€‰æ‹©ã€åŠŸèƒ½ç”Ÿæˆï¼‰ï¼Œæ— éœ€å¤æ‚çš„ç¼–ç¨‹ç»éªŒï¼Œå°±èƒ½å®ŒæˆåŒ…å« 11 ä¸ªä¸“ä¸šç« èŠ‚ã€4 ç±»å®ç”¨è„šæœ¬çš„ Excel æŠ¥è¡¨æŠ€èƒ½å°è£…ã€‚æ— è®ºæ˜¯æ•°æ®åˆ†ææŠ¥è¡¨ç”Ÿæˆã€ä¸šåŠ¡æŠ¥å‘Šæ ¼å¼åŒ–ï¼Œè¿˜æ˜¯æ¨¡æ¿æ‰¹é‡å¡«å……ã€å›¾è¡¨è‡ªåŠ¨ç»˜åˆ¶ï¼Œéƒ½èƒ½é€šè¿‡æ ‡å‡†åŒ–çš„ Skill è°ƒç”¨å®ç°ï¼Œæå¤§é™ä½äº†èŒåœºäººå£«åˆ©ç”¨ AI æå‡ Excel åŠå…¬æ•ˆç‡çš„æŠ€æœ¯é—¨æ§›ã€‚åœ¨å®é™…éªŒè¯ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºçš„ã€Œexcel-report-generatorã€èƒ½å¤Ÿç¨³å®šå¤„ç†æˆç»©æ•°æ®ç»Ÿè®¡ã€å¤šç»´åº¦å›¾è¡¨ç”Ÿæˆç­‰ä»»åŠ¡ï¼Œæœ‰æ•ˆè§£å†³äº†æ‰‹åŠ¨åˆ¶ä½œæŠ¥è¡¨æ—¶çš„ç¹çé‡å¤é—®é¢˜ã€‚åŒæ—¶ï¼Œè¯¥æ–¹æ¡ˆå…·å¤‡å¾ˆå¼ºçš„æ‰©å±•æ€§ â€”â€” å°ä¼™ä¼´ä»¬å¯ä»¥åŸºäºæ­¤æŠ€èƒ½æ‰©å±•æ›´å¤šåŠå…¬åœºæ™¯åº”ç”¨ï¼Œå¦‚è´¢åŠ¡æŠ¥è¡¨è‡ªåŠ¨æ±‡æ€»ã€é”€å”®æ•°æ®å¯è§†åŒ–çœ‹æ¿ã€åº“å­˜æ¸…å•æ‰¹é‡ç”Ÿæˆç­‰ï¼Œè¿›ä¸€æ­¥é‡Šæ”¾ Claude æ¨¡å‹åœ¨åŠå…¬è‡ªåŠ¨åŒ–é¢†åŸŸçš„åº”ç”¨ä»·å€¼ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å‚ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤ï¼Œç»“åˆè‡ªèº«åŠå…¬éœ€æ±‚åˆ›å»ºä¸“å± Excel æŠ€èƒ½è¿›è¡Œå®è·µã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin-3]]></title>    <link>https://juejin.cn/post/7571678674144739338</link>    <guid>https://juejin.cn/post/7571678674144739338</guid>    <pubDate>2025-11-12T12:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678674144739338" data-draft-id="7571067260053995546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin-3"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T12:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin-3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:33:05.000Z" title="Wed Nov 12 2025 12:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤ªæ£’äº†ï¼ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ Kotlin æœ€ç²¾å½©çš„éƒ¨åˆ†â€”â€”é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œé«˜çº§ç‰¹æ€§ã€‚è¿™ä¸€éƒ¨åˆ†å°†å½»åº•æ”¹å˜ä½ å¯¹ç¼–ç¨‹çš„è®¤çŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>Kotlin é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šé‡æ–°å®šä¹‰ä»£ç ç»„ç»‡æ–¹å¼</strong></h3>
<h4 data-id="heading-1"><strong>åå››ã€ç±»ä¸å¯¹è±¡ï¼šç®€æ´çš„å¼€å§‹</strong></h4>
<p>Kotlin ä¸­çš„ç±»å®šä¹‰æå…¶ç®€æ´ï¼Œå‘Šåˆ«äº† Java çš„æ ·æ¿ä»£ç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€ç®€å•çš„ç±»å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>

<span class="hljs-comment">// å¸¦ä¸»æ„é€ å‡½æ•°çš„ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">firstName: <span class="hljs-built_in">String</span></span>) { <span class="hljs-comment">/*...*/</span> }

<span class="hljs-comment">// ä¸»æ„é€ å‡½æ•°å¯ä»¥çœç•¥ constructor å…³é”®å­—</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-attr">firstName</span>: <span class="hljs-title class_">String</span>) {
    <span class="hljs-comment">// å±æ€§ç›´æ¥åœ¨ç±»ä½“ä¸­å£°æ˜</span>
    <span class="hljs-keyword">var</span> <span class="hljs-attr">firstName</span>: <span class="hljs-title class_">String</span> = firstName
    <span class="hljs-keyword">var</span> <span class="hljs-attr">lastName</span>: <span class="hljs-title class_">String</span> = <span class="hljs-string">""</span>
    <span class="hljs-keyword">var</span> <span class="hljs-attr">age</span>: <span class="hljs-title class_">Int</span> = <span class="hljs-number">0</span>
}

<span class="hljs-comment">// æ›´ç®€æ´çš„å†™æ³•ï¼šåœ¨ä¸»æ„é€ å‡½æ•°ä¸­ç›´æ¥å£°æ˜å±æ€§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(
    val <span class="hljs-attr">firstName</span>: <span class="hljs-title class_">String</span>,  <span class="hljs-comment">// åªè¯»å±æ€§</span>
    <span class="hljs-keyword">var</span> <span class="hljs-attr">lastName</span>: <span class="hljs-title class_">String</span>,   <span class="hljs-comment">// å¯å˜å±æ€§</span>
    <span class="hljs-keyword">var</span> <span class="hljs-attr">age</span>: <span class="hljs-title class_">Int</span> = <span class="hljs-number">0</span>        <span class="hljs-comment">// å¸¦é»˜è®¤å€¼çš„å‚æ•°</span>
) {
    <span class="hljs-comment">// ç±»ä½“</span>
}
</code></pre>
<p><strong>ä½¿ç”¨ç±»ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">person</span> = Person(<span class="hljs-string">"å¼ "</span>, <span class="hljs-string">"ä¸‰"</span>, <span class="hljs-number">25</span>)
println(person.firstName)  // è¾“å‡ºï¼šå¼ 
<span class="hljs-attr">person.age</span> = <span class="hljs-number">26</span>            // å¯ä»¥ä¿®æ”¹
// <span class="hljs-attr">person.firstName</span> = <span class="hljs-string">"æ"</span> // é”™è¯¯ï¼firstName æ˜¯ val
</code></pre>
<h4 data-id="heading-2"><strong>åäº”ã€æ•°æ®ç±»ï¼ˆData Classï¼‰ï¼šè‡ªåŠ¨ç”Ÿæˆæ ·æ¿ä»£ç </strong></h4>
<p>è¿™æ˜¯ Kotlin çš„"é­”æ³•"ç‰¹æ€§ä¹‹ä¸€ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨æ•°æ®ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ•°æ®ç±»å®šä¹‰ - ä¸€è¡Œä»£ç æå®šï¼</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> email: String
)

<span class="hljs-comment">// è‡ªåŠ¨è·å¾—ä»¥ä¸‹åŠŸèƒ½ï¼š</span>
<span class="hljs-keyword">val</span> user1 = User(<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"alice@example.com"</span>)
<span class="hljs-keyword">val</span> user2 = User(<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"alice@example.com"</span>)

<span class="hljs-comment">// 1. è‡ªåŠ¨å®ç° toString()</span>
println(user1) <span class="hljs-comment">// è¾“å‡ºï¼šUser(id=1, name=Alice, email=alice@example.com)</span>

<span class="hljs-comment">// 2. è‡ªåŠ¨å®ç° equals() å’Œ hashCode()</span>
println(user1 == user2) <span class="hljs-comment">// è¾“å‡ºï¼štrueï¼ˆæ¯”è¾ƒå†…å®¹ï¼Œä¸æ˜¯å¼•ç”¨ï¼‰</span>

<span class="hljs-comment">// 3. è‡ªåŠ¨å®ç° copy() å‡½æ•°</span>
<span class="hljs-keyword">val</span> user3 = user1.copy(name = <span class="hljs-string">"Alice Smith"</span>)
println(user3) <span class="hljs-comment">// è¾“å‡ºï¼šUser(id=1, name=Alice Smith, email=alice@example.com)</span>

<span class="hljs-comment">// 4. è‡ªåŠ¨å®ç° componentN() å‡½æ•°ï¼ˆç”¨äºè§£æ„ï¼‰</span>
<span class="hljs-keyword">val</span> (id, name, email) = user1
println(<span class="hljs-string">"ID: <span class="hljs-variable">$id</span>, Name: <span class="hljs-variable">$name</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šID: 1, Name: Alice</span>
</code></pre>
<p><strong>å¯¹æ¯” Javaï¼š</strong> åœ¨ Java ä¸­éœ€è¦æ‰‹åŠ¨ç¼–å†™ getter/setterã€equals()ã€hashCode()ã€toString() ç­‰å¤§é‡æ ·æ¿ä»£ç ã€‚</p>
<h4 data-id="heading-3"><strong>åå…­ã€å¯¹è±¡è¡¨è¾¾å¼ä¸å¯¹è±¡å£°æ˜ï¼šæ›¿ä»£åŒ¿åç±»å’Œå•ä¾‹</strong></h4>
<ol>
<li>
<p><strong>å¯¹è±¡è¡¨è¾¾å¼ï¼ˆåŒ¿åå¯¹è±¡ï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç±»ä¼¼ Java çš„åŒ¿åå†…éƒ¨ç±»ï¼Œä½†æ›´å¼ºå¤§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClickListener</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">()</span></span>
}

<span class="hljs-keyword">val</span> button = <span class="hljs-keyword">object</span> : ClickListener {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"Button clicked!"</span>)
    }
}

button.onClick()
</code></pre>
</li>
<li>
<p><strong>å¯¹è±¡å£°æ˜ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ object å…³é”®å­—åˆ›å»ºå•ä¾‹</span>
<span class="hljs-keyword">object</span> DatabaseManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> connectionCount = <span class="hljs-number">0</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">connect</span><span class="hljs-params">()</span></span> {
        connectionCount++
        println(<span class="hljs-string">"Connected! Total connections: <span class="hljs-variable">$connectionCount</span>"</span>)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getConnectionCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = connectionCount
}

<span class="hljs-comment">// ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¸éœ€è¦å®ä¾‹åŒ–</span>
DatabaseManager.connect() <span class="hljs-comment">// è¾“å‡ºï¼šConnected! Total connections: 1</span>
DatabaseManager.connect() <span class="hljs-comment">// è¾“å‡ºï¼šConnected! Total connections: 2</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-4"><strong>åä¸ƒã€ä¼´ç”Ÿå¯¹è±¡ï¼ˆCompanion Objectï¼‰ï¼šæ›¿ä»£é™æ€æˆå‘˜</strong></h4>
<p>Kotlin æ²¡æœ‰Â <code>static</code>å…³é”®å­—ï¼Œä½¿ç”¨ä¼´ç”Ÿå¯¹è±¡å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MAX_COUNT = <span class="hljs-number">100</span>  <span class="hljs-comment">// ç±»ä¼¼é™æ€å¸¸é‡</span>
        
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">create</span><span class="hljs-params">()</span></span>: MyClass {    <span class="hljs-comment">// ç±»ä¼¼é™æ€å·¥å‚æ–¹æ³•</span>
            <span class="hljs-keyword">return</span> MyClass()
        }
        
        <span class="hljs-meta">@JvmStatic</span>  <span class="hljs-comment">// å¦‚æœéœ€è¦ Java äº’æ“ä½œ</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">staticMethod</span><span class="hljs-params">()</span></span> {
            println(<span class="hljs-string">"This can be called from Java as static method"</span>)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">instanceMethod</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"This is an instance method"</span>)
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
println(MyClass.MAX_COUNT)  <span class="hljs-comment">// ç›´æ¥é€šè¿‡ç±»åè®¿é—®</span>
<span class="hljs-keyword">val</span> obj = MyClass.create()   <span class="hljs-comment">// ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨</span>
</code></pre>
<h4 data-id="heading-5"><strong>åå…«ã€å¯†å°ç±»ï¼ˆSealed Classï¼‰ï¼šå—é™çš„ç±»å±‚æ¬¡ç»“æ„</strong></h4>
<p>å¯†å°ç±»ç”¨äºè¡¨ç¤ºå—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼Œåœ¨Â <code>when</code>è¡¨è¾¾å¼ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰å¯†å°ç±»</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> message: String) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">object</span> Loading : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-comment">// ä½¿ç”¨å¯†å°ç±» - when è¡¨è¾¾å¼ä¼šæ£€æŸ¥æ˜¯å¦è¦†ç›–æ‰€æœ‰æƒ…å†µ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleResult</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; println(<span class="hljs-string">"Success: <span class="hljs-subst">${result.data}</span>"</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; println(<span class="hljs-string">"Error: <span class="hljs-subst">${result.message}</span>"</span>)
        Result.Loading -&gt; println(<span class="hljs-string">"Loading..."</span>)
        <span class="hljs-comment">// ä¸éœ€è¦ else åˆ†æ”¯ï¼Œå› ä¸ºæ‰€æœ‰æƒ…å†µéƒ½å·²è¦†ç›–</span>
    }
}

<span class="hljs-keyword">val</span> successResult = Result.Success(<span class="hljs-string">"Data loaded"</span>)
<span class="hljs-keyword">val</span> errorResult = Result.Error(<span class="hljs-string">"Network error"</span>)

handleResult(successResult) <span class="hljs-comment">// è¾“å‡ºï¼šSuccess: Data loaded</span>
handleResult(errorResult)   <span class="hljs-comment">// è¾“å‡ºï¼šError: Network error</span>
</code></pre>
<h4 data-id="heading-6"><strong>åä¹ã€æ‰©å±•å‡½æ•°å®æˆ˜ï¼šä¸ºç°æœ‰ç±»æ·»åŠ è¶…èƒ½åŠ›</strong></h4>
<p>è®©æˆ‘ä»¬çœ‹ä¸€äº›å®ç”¨çš„æ‰©å±•å‡½æ•°ä¾‹å­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸º String ç±»æ·»åŠ æ‰©å±•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">isEmail</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> contains(<span class="hljs-string">"@"</span>) &amp;&amp; contains(<span class="hljs-string">"."</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">capitalizeWords</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> split(<span class="hljs-string">" "</span>).joinToString(<span class="hljs-string">" "</span>) { it.replaceFirstChar { char -&gt; char.uppercase() } }
}

<span class="hljs-comment">// ä¸º List æ·»åŠ æ‰©å±•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">second</span><span class="hljs-params">()</span></span>: T = <span class="hljs-keyword">this</span>[<span class="hljs-number">1</span>]
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> List<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">randomOrNull</span><span class="hljs-params">()</span></span>: T? = <span class="hljs-keyword">if</span> (isEmpty()) <span class="hljs-literal">null</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.random()

<span class="hljs-comment">// ä½¿ç”¨æ‰©å±•å‡½æ•°</span>
println(<span class="hljs-string">"test@example.com"</span>.isEmail())        <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
println(<span class="hljs-string">"hello world"</span>.capitalizeWords())      <span class="hljs-comment">// è¾“å‡ºï¼šHello World</span>

<span class="hljs-keyword">val</span> list = listOf(<span class="hljs-string">"first"</span>, <span class="hljs-string">"second"</span>, <span class="hljs-string">"third"</span>)
println(list.second())                       <span class="hljs-comment">// è¾“å‡ºï¼šsecond</span>
println(emptyList&lt;String&gt;().randomOrNull())  <span class="hljs-comment">// è¾“å‡ºï¼šnull</span>
</code></pre>
<h4 data-id="heading-7"><strong>äºŒåã€å±æ€§å§”æ‰˜ï¼šå¼ºå¤§çš„å±æ€§ç®¡ç†</strong></h4>
<p>å±æ€§å§”æ‰˜æ˜¯ Kotlin çš„é«˜çº§ç‰¹æ€§ï¼Œå¯ä»¥ç®€åŒ–ä»£ç ã€‚</p>
<ol>
<li>
<p><strong>lazy å§”æ‰˜ï¼šå»¶è¿Ÿåˆå§‹åŒ–</strong></p>
<pre><code class="hljs language-scss" lang="scss">class ExpensiveObject {
    init {
        <span class="hljs-built_in">println</span>("æ­£åœ¨åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡...")
    }
}

class MyClass {
    <span class="hljs-comment">// åªæœ‰ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šåˆ›å»º</span>
    val expensiveObject: ExpensiveObject by lazy {
        <span class="hljs-built_in">println</span>("ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œå¼€å§‹åˆå§‹åŒ–")
        <span class="hljs-built_in">ExpensiveObject</span>()
    }
}

val myClass = <span class="hljs-built_in">MyClass</span>()
<span class="hljs-built_in">println</span>("å¯¹è±¡å·²åˆ›å»ºï¼Œä½†æ˜‚è´µå¯¹è±¡è¿˜æœªåˆå§‹åŒ–")
<span class="hljs-built_in">println</span>(myClass.expensiveObject)  <span class="hljs-comment">// è¿™é‡Œæ‰ä¼šçœŸæ­£åˆå§‹åŒ–</span>
<span class="hljs-built_in">println</span>(myClass.expensiveObject)  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨å·²åˆå§‹åŒ–çš„å¯¹è±¡</span>
</code></pre>
</li>
<li>
<p><strong>observable å§”æ‰˜ï¼šå±æ€§å˜åŒ–ç›‘å¬</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.properties.Delegates

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">var</span> name: String <span class="hljs-keyword">by</span> Delegates.observable(<span class="hljs-string">"æœªå‘½å"</span>) { property, oldValue, newValue -&gt;
        println(<span class="hljs-string">"å±æ€§ <span class="hljs-subst">${property.name}</span> ä» '<span class="hljs-variable">$oldValue</span>' å˜ä¸º '<span class="hljs-variable">$newValue</span>'"</span>)
    }
}

<span class="hljs-keyword">val</span> user = User()
user.name = <span class="hljs-string">"Alice"</span>  <span class="hljs-comment">// è¾“å‡ºï¼šå±æ€§ name ä» 'æœªå‘½å' å˜ä¸º 'Alice'</span>
user.name = <span class="hljs-string">"Bob"</span>    <span class="hljs-comment">// è¾“å‡ºï¼šå±æ€§ name ä» 'Alice' å˜ä¸º 'Bob'</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-8"><strong>äºŒåä¸€ã€ç©ºå®‰å…¨æ·±åº¦æ¢ç´¢ï¼šå®‰å…¨è°ƒç”¨é“¾</strong></h4>
<p>å½“å¤„ç†å¤æ‚å¯¹è±¡æ—¶ï¼Œå®‰å…¨è°ƒç”¨æ“ä½œç¬¦ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span>(<span class="hljs-keyword">val</span> street: String?, <span class="hljs-keyword">val</span> city: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Company</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> address: Address?)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> company: Company?)

<span class="hljs-comment">// å¤æ‚çš„åµŒå¥—å¯¹è±¡</span>
<span class="hljs-keyword">val</span> employee: Employee? = Employee(
    <span class="hljs-string">"Alice"</span>, 
    Company(<span class="hljs-string">"Tech Corp"</span>, Address(<span class="hljs-string">"Main St"</span>, <span class="hljs-string">"Beijing"</span>))
)

<span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆç¹çï¼‰</span>
<span class="hljs-keyword">val</span> city1 = <span class="hljs-keyword">if</span> (employee != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (employee.company != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (employee.company.address != <span class="hljs-literal">null</span>) {
            employee.company.address.city
        } <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
} <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>

<span class="hljs-comment">// Kotlin å®‰å…¨è°ƒç”¨é“¾ï¼ˆä¼˜é›…ï¼ï¼‰</span>
<span class="hljs-keyword">val</span> city2 = employee?.company?.address?.city

println(city2) <span class="hljs-comment">// è¾“å‡ºï¼šBeijing</span>

<span class="hljs-comment">// å¦‚æœä¸­é—´æœ‰ä»»ä½•ç¯èŠ‚ä¸º nullï¼Œæ•´ä¸ªè¡¨è¾¾å¼è¿”å› null</span>
<span class="hljs-keyword">val</span> employee2: Employee? = Employee(<span class="hljs-string">"Bob"</span>, <span class="hljs-literal">null</span>)
<span class="hljs-keyword">val</span> city3 = employee2?.company?.address?.city
println(city3) <span class="hljs-comment">// è¾“å‡ºï¼šnull</span>
</code></pre>
<h4 data-id="heading-9"><strong>å®æˆ˜é¡¹ç›®ï¼šæ„å»ºä¸€ä¸ªç®€å•çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskPriority</span> {
    <span class="hljs-keyword">object</span> Low : TaskPriority()
    <span class="hljs-keyword">object</span> Normal : TaskPriority()
    <span class="hljs-keyword">object</span> High : TaskPriority()
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span>(
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> description: String,
    <span class="hljs-keyword">val</span> priority: TaskPriority,
    <span class="hljs-keyword">val</span> isCompleted: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
) {
    <span class="hljs-comment">// æ‰©å±•å‡½æ•°ï¼šè·å–ä¼˜å…ˆçº§é¢œè‰²</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPriorityColor</span><span class="hljs-params">()</span></span>: String = <span class="hljs-keyword">when</span> (priority) {
        TaskPriority.Low -&gt; <span class="hljs-string">"ç»¿è‰²"</span>
        TaskPriority.Normal -&gt; <span class="hljs-string">"é»„è‰²"</span>
        TaskPriority.High -&gt; <span class="hljs-string">"çº¢è‰²"</span>
    }
}

<span class="hljs-comment">// ä»»åŠ¡ç®¡ç†å™¨ï¼ˆå•ä¾‹ï¼‰</span>
<span class="hljs-keyword">object</span> TaskManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tasks = mutableListOf&lt;Task&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> nextId = <span class="hljs-number">1</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addTask</span><span class="hljs-params">(title: <span class="hljs-type">String</span>, description: <span class="hljs-type">String</span>, priority: <span class="hljs-type">TaskPriority</span>)</span></span>: Task {
        <span class="hljs-keyword">val</span> task = Task(nextId++, title, description, priority)
        tasks.add(task)
        <span class="hljs-keyword">return</span> task
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">completeTask</span><span class="hljs-params">(taskId: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> task = tasks.find { it.id == taskId }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (task != <span class="hljs-literal">null</span>) {
            tasks.replaceAll { <span class="hljs-keyword">if</span> (it.id == taskId) it.copy(isCompleted = <span class="hljs-literal">true</span>) <span class="hljs-keyword">else</span> it }
            <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-literal">false</span>
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getHighPriorityTasks</span><span class="hljs-params">()</span></span>: List&lt;Task&gt; {
        <span class="hljs-keyword">return</span> tasks.filter { it.priority <span class="hljs-keyword">is</span> TaskPriority.High &amp;&amp; !it.isCompleted }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTasksByPriority</span><span class="hljs-params">(priority: <span class="hljs-type">TaskPriority</span>)</span></span>: List&lt;Task&gt; {
        <span class="hljs-keyword">return</span> tasks.filter { it.priority == priority }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
    <span class="hljs-keyword">val</span> task1 = TaskManager.addTask(<span class="hljs-string">"å­¦ä¹  Kotlin"</span>, <span class="hljs-string">"æŒæ¡ Kotlin é«˜çº§ç‰¹æ€§"</span>, TaskPriority.High)
    <span class="hljs-keyword">val</span> task2 = TaskManager.addTask(<span class="hljs-string">"å†™åšå®¢"</span>, <span class="hljs-string">"åˆ†äº« Kotlin å­¦ä¹ å¿ƒå¾—"</span>, TaskPriority.Normal)
    
    println(<span class="hljs-string">"é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼š"</span>)
    TaskManager.getHighPriorityTasks().forEach { task -&gt;
        println(<span class="hljs-string">"<span class="hljs-subst">${task.title}</span> - ä¼˜å…ˆçº§ï¼š<span class="hljs-subst">${task.getPriorityColor()}</span>"</span>)
    }
    
    <span class="hljs-comment">// å®Œæˆä»»åŠ¡</span>
    TaskManager.completeTask(task1.id)
    println(<span class="hljs-string">"ä»»åŠ¡1å®ŒæˆçŠ¶æ€ï¼š<span class="hljs-subst">${TaskManager.getHighPriorityTasks().isEmpty()}</span>"</span>)
}
</code></pre>
<h4 data-id="heading-10"><strong>ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘</strong></h4>
<p>ä½ ç°åœ¨å·²ç»æŒæ¡äº† Kotlin çš„æ ¸å¿ƒé«˜çº§ç‰¹æ€§ï¼æ¥ä¸‹æ¥å¯ä»¥æ¢ç´¢ï¼š</p>
<ul>
<li><strong>åç¨‹ï¼ˆCoroutinesï¼‰</strong> ï¼šå¼‚æ­¥ç¼–ç¨‹çš„ç°ä»£è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ç±»å‹å®‰å…¨çš„æ„å»ºå™¨ï¼ˆType-safe buildersï¼‰</strong> ï¼šåˆ›å»º DSL</li>
<li><strong>åå°„ï¼ˆReflectionï¼‰</strong> ï¼šè¿è¡Œæ—¶æ£€æŸ¥ä»£ç ç»“æ„</li>
<li><strong>å¤šå¹³å°é¡¹ç›®ï¼ˆKMPï¼‰</strong> ï¼šç”¨ Kotlin å¼€å‘ iOSã€Webã€æ¡Œé¢åº”ç”¨</li>
</ul>
<p>Kotlin çš„ä¸–ç•Œéå¸¸å¹¿é˜”ï¼Œè¿™äº›é«˜çº§ç‰¹æ€§å°†è®©ä½ å†™å‡ºæ›´åŠ ä¼˜é›…ã€å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç ã€‚å°è¯•ç”¨è¿™äº›ç‰¹æ€§é‡æ„ä½ ä¹‹å‰çš„é¡¹ç›®ï¼Œä½ ä¼šå‘ç°ç¼–ç¨‹å¯ä»¥å¦‚æ­¤æ„‰å¿«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin-4]]></title>    <link>https://juejin.cn/post/7571678674144854026</link>    <guid>https://juejin.cn/post/7571678674144854026</guid>    <pubDate>2025-11-12T12:47:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678674144854026" data-draft-id="7571088527678275610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin-4"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-12T12:47:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin-4
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T12:47:15.000Z" title="Wed Nov 12 2025 12:47:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤ªæ£’äº†ï¼ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ Kotlin æœ€æ¿€åŠ¨äººå¿ƒçš„éƒ¨åˆ†â€”â€”<strong>åç¨‹</strong>å’Œ<strong>ç°ä»£å¼‚æ­¥ç¼–ç¨‹</strong>ã€‚è¿™å°†å½»åº•æ”¹å˜ä½ å¤„ç†å¹¶å‘å’Œå¼‚æ­¥ä»»åŠ¡çš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong>Kotlin åç¨‹ï¼šé‡æ–°å®šä¹‰å¼‚æ­¥ç¼–ç¨‹</strong></h3>
<h4 data-id="heading-1"><strong>äºŒåäºŒã€åç¨‹åŸºç¡€ï¼šè½»é‡çº§çº¿ç¨‹</strong></h4>
<p>åç¨‹æ˜¯ Kotlin ç”¨äºå¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”çº¿ç¨‹æ›´è½»é‡ã€æ›´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹å¼€å§‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    
    <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
    GlobalScope.launch {
        println(<span class="hljs-string">"åç¨‹å¼€å§‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000L</span>) <span class="hljs-comment">// éé˜»å¡å»¶è¿Ÿ</span>
        println(<span class="hljs-string">"åç¨‹ç»“æŸ: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }
    
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    Thread.sleep(<span class="hljs-number">2000L</span>) <span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…åç¨‹å®Œæˆ</span>
    println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»“æŸ"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹å¼€å§‹: main</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ: main</span>
<span class="hljs-comment">// åç¨‹å¼€å§‹: DefaultDispatcher-worker-1</span>
<span class="hljs-comment">// åç¨‹ç»“æŸ: DefaultDispatcher-worker-1</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹ç»“æŸ</span>
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p>
<ul>
<li><code>launch</code>: å¯åŠ¨ä¸€ä¸ªä¸è¿”å›ç»“æœçš„åç¨‹</li>
<li><code>delay()</code>: éé˜»å¡çš„æŒ‚èµ·å‡½æ•°</li>
<li>åç¨‹è¿è¡Œåœ¨åå°çº¿ç¨‹æ± ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</li>
</ul>
<h4 data-id="heading-2"><strong>äºŒåä¸‰ã€æŒ‚èµ·å‡½æ•°ï¼šå¼‚æ­¥æ“ä½œçš„åŸºçŸ³</strong></h4>
<p>æŒ‚èµ·å‡½æ•°æ˜¯åç¨‹çš„æ ¸å¿ƒï¼Œç”¨Â <code>suspend</code>å…³é”®å­—æ ‡è®°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserData</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: String {
    delay(<span class="hljs-number">1000L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ· <span class="hljs-variable">$userId</span> çš„æ•°æ®"</span>
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserPosts</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: String {
    delay(<span class="hljs-number">1500L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ· <span class="hljs-variable">$userId</span> çš„å¸–å­"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> userData = fetchUserData(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> userPosts = fetchUserPosts(<span class="hljs-number">1</span>)
        println(<span class="hljs-string">"<span class="hljs-variable">$userData</span>, <span class="hljs-variable">$userPosts</span>"</span>)
    }
    println(<span class="hljs-string">"é¡ºåºæ‰§è¡Œè€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>)
}
</code></pre>
<h4 data-id="heading-3"><strong>äºŒåå››ã€å¼‚æ­¥å¹¶å‘ï¼šåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡</strong></h4>
<p>ä½¿ç”¨Â <code>async</code>å’ŒÂ <code>await</code>å®ç°å¹¶å‘æ“ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlin.system.measureTimeMillis

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-comment">// åŒæ—¶å¯åŠ¨ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> userDataDeferred = async { fetchUserData(<span class="hljs-number">1</span>) }
        <span class="hljs-keyword">val</span> userPostsDeferred = async { fetchUserPosts(<span class="hljs-number">1</span>) }
        
        <span class="hljs-comment">// ç­‰å¾…ä¸¤ä¸ªä»»åŠ¡éƒ½å®Œæˆ</span>
        <span class="hljs-keyword">val</span> userData = userDataDeferred.await()
        <span class="hljs-keyword">val</span> userPosts = userPostsDeferred.await()
        
        println(<span class="hljs-string">"<span class="hljs-variable">$userData</span>, <span class="hljs-variable">$userPosts</span>"</span>)
    }
    println(<span class="hljs-string">"å¹¶å‘æ‰§è¡Œè€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>) <span class="hljs-comment">// æ—¶é—´æ¥è¿‘æœ€é•¿ä»»åŠ¡çš„æ—¶é—´</span>
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ç”¨æˆ· 1 çš„æ•°æ®, ç”¨æˆ· 1 çš„å¸–å­</span>
<span class="hljs-comment">// å¹¶å‘æ‰§è¡Œè€—æ—¶: 1506ms (è€Œä¸æ˜¯ 1000 + 1500 = 2500ms)</span>
</code></pre>
<h4 data-id="heading-4"><strong>äºŒåäº”ã€åç¨‹ä¸Šä¸‹æ–‡ä¸è°ƒåº¦å™¨</strong></h4>
<p>æ§åˆ¶åç¨‹åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šè¿è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss">import kotlinx<span class="hljs-selector-class">.coroutines</span>.*

fun <span class="hljs-selector-tag">main</span>() = runBlocking {
    <span class="hljs-comment">// åœ¨ä¸åŒè°ƒåº¦å™¨ä¸Šå¯åŠ¨åç¨‹</span>
    launch { <span class="hljs-comment">// ç»§æ‰¿çˆ¶åç¨‹çš„ä¸Šä¸‹æ–‡</span>
        <span class="hljs-built_in">println</span>("é»˜è®¤è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.Unconfined) { <span class="hljs-comment">// ä¸å—é™åˆ¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ä¹‹å‰è¿è¡Œåœ¨è°ƒç”¨è€…çº¿ç¨‹</span>
        <span class="hljs-built_in">println</span>("ä¸å—é™åˆ¶: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.Default) { <span class="hljs-comment">// CPU å¯†é›†å‹ä»»åŠ¡</span>
        <span class="hljs-built_in">println</span>("é»˜è®¤è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(Dispatchers.IO) { <span class="hljs-comment">// I/O å¯†é›†å‹ä»»åŠ¡</span>
        <span class="hljs-built_in">println</span>("IO è°ƒåº¦å™¨: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
    
    <span class="hljs-built_in">launch</span>(newSingleThreadContext("MyThread")) { <span class="hljs-comment">// ä¸“ç”¨çº¿ç¨‹</span>
        <span class="hljs-built_in">println</span>("ä¸“ç”¨çº¿ç¨‹: ${Thread.currentThread()<span class="hljs-selector-class">.name</span>}")
    }
}
</code></pre>
<h4 data-id="heading-5"><strong>äºŒåå…­ã€ç»“æ„åŒ–å¹¶å‘ï¼šé¿å…èµ„æºæ³„æ¼</strong></h4>
<p>ä½¿ç”¨Â <code>coroutineScope</code>å®ç°ç»“æ„åŒ–å¹¶å‘ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// ç»“æ„åŒ–å¹¶å‘ï¼šæ‰€æœ‰å­åç¨‹å®Œæˆåï¼Œçˆ¶åç¨‹æ‰å®Œæˆ</span>
    <span class="hljs-keyword">val</span> result = coroutineScope {
        <span class="hljs-keyword">val</span> userData = async { fetchUserData(<span class="hljs-number">1</span>) }
        <span class="hljs-keyword">val</span> userPosts = async { fetchUserPosts(<span class="hljs-number">1</span>) }
        
        <span class="hljs-string">"ç»“æœ: <span class="hljs-subst">${userData.await()}</span> + <span class="hljs-subst">${userPosts.await()}</span>"</span>
    }
    println(result)
}

<span class="hljs-comment">// å¤„ç†å¼‚å¸¸çš„ç»“æ„åŒ–å¹¶å‘</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataSafely</span><span class="hljs-params">()</span></span>: Result&lt;String&gt; = coroutineScope {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = async { 
            delay(<span class="hljs-number">500L</span>)
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() % <span class="hljs-number">2</span> == <span class="hljs-number">0L</span>) {
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"æ¨¡æ‹Ÿé”™è¯¯"</span>)
            }
            <span class="hljs-string">"è·å–çš„æ•°æ®"</span>
        }.await()
        Result.success(<span class="hljs-keyword">data</span>)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Result.failure(e)
    }
}
</code></pre>
<h4 data-id="heading-6"><strong>äºŒåä¸ƒã€æµï¼ˆFlowï¼‰ï¼šå¼‚æ­¥æ•°æ®æµ</strong></h4>
<p>Flow æ˜¯ Kotlin çš„å“åº”å¼æµå¤„ç†ï¼Œç±»ä¼¼ RxJavaã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.flow.*

<span class="hljs-comment">// åˆ›å»ºæµ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">simpleFlow</span><span class="hljs-params">()</span></span>: Flow&lt;<span class="hljs-built_in">Int</span>&gt; = flow {
    println(<span class="hljs-string">"æµå¼€å§‹"</span>)
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        delay(<span class="hljs-number">100L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥å·¥ä½œ</span>
        emit(i) <span class="hljs-comment">// å‘å°„å€¼</span>
    }
}

<span class="hljs-comment">// æµçš„ä¸­é—´æ“ä½œ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processNumbers</span><span class="hljs-params">()</span></span>: Flow&lt;String&gt; = flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.5</span>) {
        emit(i)
    }
}.filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> } <span class="hljs-comment">// è¿‡æ»¤å¶æ•°</span>
 .map { <span class="hljs-string">"æ•°å­—: <span class="hljs-variable">$it</span>"</span> }    <span class="hljs-comment">// è½¬æ¢</span>
 .onEach { println(<span class="hljs-string">"å¤„ç†: <span class="hljs-variable">$it</span>"</span>) } <span class="hljs-comment">// å‰¯ä½œç”¨</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// æ”¶é›†æµ</span>
    simpleFlow().collect { value -&gt; 
        println(<span class="hljs-string">"æ”¶é›†åˆ°: <span class="hljs-variable">$value</span>"</span>) 
    }
    
    println(<span class="hljs-string">"--- å¸¦ä¸­é—´æ“ä½œçš„æµ ---"</span>)
    processNumbers().collect { println(<span class="hljs-string">"æœ€ç»ˆç»“æœ: <span class="hljs-variable">$it</span>"</span>) }
}
</code></pre>
<h4 data-id="heading-7"><strong>äºŒåå…«ã€é€šé“ï¼ˆChannelï¼‰ï¼šåç¨‹é—´é€šä¿¡</strong></h4>
<p>Channel ç”¨äºåç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.channels.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> channel = Channel&lt;String&gt;()
    
    <span class="hljs-comment">// ç”Ÿäº§è€…åç¨‹</span>
    launch {
        <span class="hljs-keyword">val</span> users = listOf(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>)
        <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> users) {
            channel.send(user) <span class="hljs-comment">// å‘é€æ•°æ®</span>
            delay(<span class="hljs-number">100L</span>)
        }
        channel.close() <span class="hljs-comment">// å…³é—­é€šé“</span>
    }
    
    <span class="hljs-comment">// æ¶ˆè´¹è€…åç¨‹</span>
    launch {
        <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> channel) { <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
            println(<span class="hljs-string">"æ”¶åˆ°ç”¨æˆ·: <span class="hljs-variable">$user</span>"</span>)
        }
        println(<span class="hljs-string">"é€šé“å·²å…³é—­"</span>)
    }
}
</code></pre>
<h4 data-id="heading-8"><strong>äºŒåä¹ã€å®æˆ˜ï¼šæ„å»ºå®Œæ•´çš„å¼‚æ­¥åº”ç”¨</strong></h4>
<p>è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯è·å–ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.flow.*
<span class="hljs-keyword">import</span> kotlin.system.measureTimeMillis

<span class="hljs-comment">// æ•°æ®ç±»</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> email: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Post</span>(<span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> userId: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> title: String, <span class="hljs-keyword">val</span> content: String)
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfile</span>(<span class="hljs-keyword">val</span> user: User, <span class="hljs-keyword">val</span> posts: List&lt;Post&gt;, <span class="hljs-keyword">val</span> friends: List&lt;User&gt;)

<span class="hljs-comment">// æ¨¡æ‹Ÿè¿œç¨‹æ•°æ®æº</span>
<span class="hljs-keyword">object</span> UserRepository {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUser</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: User {
        delay(<span class="hljs-number">500L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
        <span class="hljs-keyword">return</span> User(id, <span class="hljs-string">"ç”¨æˆ·<span class="hljs-variable">$id</span>"</span>, <span class="hljs-string">"user<span class="hljs-variable">$id</span>@example.com"</span>)
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserPosts</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: List&lt;Post&gt; {
        delay(<span class="hljs-number">300L</span>)
        <span class="hljs-keyword">return</span> listOf(
            Post(<span class="hljs-number">1</span>, userId, <span class="hljs-string">"æ ‡é¢˜1"</span>, <span class="hljs-string">"å†…å®¹1"</span>),
            Post(<span class="hljs-number">2</span>, userId, <span class="hljs-string">"æ ‡é¢˜2"</span>, <span class="hljs-string">"å†…å®¹2"</span>)
        )
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserFriends</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: List&lt;User&gt; {
        delay(<span class="hljs-number">400L</span>)
        <span class="hljs-keyword">return</span> listOf(
            User(userId + <span class="hljs-number">1</span>, <span class="hljs-string">"æœ‹å‹1"</span>, <span class="hljs-string">"friend1@example.com"</span>),
            User(userId + <span class="hljs-number">2</span>, <span class="hljs-string">"æœ‹å‹2"</span>, <span class="hljs-string">"friend2@example.com"</span>)
        )
    }
}

<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProfile</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: UserProfile = coroutineScope {
        <span class="hljs-keyword">val</span> userDeferred = async { UserRepository.getUser(userId) }
        <span class="hljs-keyword">val</span> postsDeferred = async { UserRepository.getUserPosts(userId) }
        <span class="hljs-keyword">val</span> friendsDeferred = async { UserRepository.getUserFriends(userId) }
        
        UserProfile(
            user = userDeferred.await(),
            posts = postsDeferred.await(),
            friends = friendsDeferred.await()
        )
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ Flow å®ç°å®æ—¶æ›´æ–°</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProfileStream</span><span class="hljs-params">(userId: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;UserProfile&gt; = flow {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">val</span> profile = getUserProfile(userId)
            emit(profile)
            delay(<span class="hljs-number">5000L</span>) <span class="hljs-comment">// æ¯5ç§’æ›´æ–°ä¸€æ¬¡</span>
        }
    }
}

<span class="hljs-comment">// UI å±‚ï¼ˆæ¨¡æ‹Ÿï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> userService = UserService()
    
    println(<span class="hljs-string">"=== è·å–ç”¨æˆ·èµ„æ–™ ==="</span>)
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> profile = userService.getUserProfile(<span class="hljs-number">1</span>)
        println(<span class="hljs-string">"ç”¨æˆ·: <span class="hljs-subst">${profile.user.name}</span>"</span>)
        println(<span class="hljs-string">"å¸–å­æ•°é‡: <span class="hljs-subst">${profile.posts.size}</span>"</span>)
        println(<span class="hljs-string">"å¥½å‹æ•°é‡: <span class="hljs-subst">${profile.friends.size}</span>"</span>)
    }
    println(<span class="hljs-string">"è€—æ—¶: <span class="hljs-subst">${time}</span>ms"</span>)
    
    println(<span class="hljs-string">"\n=== å®æ—¶æ•°æ®æµ ==="</span>)
    <span class="hljs-comment">// æ¨¡æ‹Ÿå®æ—¶æ•°æ®æµï¼ˆåªæ”¶é›†3æ¬¡ï¼‰</span>
    userService.getUserProfileStream(<span class="hljs-number">1</span>)
        .take(<span class="hljs-number">3</span>) <span class="hljs-comment">// åªå–3ä¸ªå€¼</span>
        .collect { profile -&gt;
            println(<span class="hljs-string">"å®æ—¶æ›´æ–°: <span class="hljs-subst">${profile.user.name}</span> - å¸–å­: <span class="hljs-subst">${profile.posts.size}</span>"</span>)
        }
}
</code></pre>
<h4 data-id="heading-9"><strong>ä¸‰åã€å¼‚å¸¸å¤„ç†ä¸è¶…æ—¶æ§åˆ¶</strong></h4>
<pre><code class="hljs language-scss" lang="scss">import kotlinx<span class="hljs-selector-class">.coroutines</span>.*

fun <span class="hljs-selector-tag">main</span>() = runBlocking {
    <span class="hljs-comment">// 1. åŸºæœ¬çš„å¼‚å¸¸å¤„ç†</span>
    val job = launch {
        try {
            <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>L)
            throw <span class="hljs-built_in">RuntimeException</span>("æµ‹è¯•å¼‚å¸¸")
        } catch (e: Exception) {
            <span class="hljs-built_in">println</span>("æ•è·å¼‚å¸¸: ${e.message}")
        }
    }
    job<span class="hljs-selector-class">.join</span>()
    
    <span class="hljs-comment">// 2. åç¨‹å¼‚å¸¸å¤„ç†å™¨</span>
    val handler = CoroutineExceptionHandler { _, exception -&gt;
        <span class="hljs-built_in">println</span>("åç¨‹å¼‚å¸¸å¤„ç†å™¨æ•è·: ${exception.message}")
    }
    
    val job2 = <span class="hljs-built_in">launch</span>(handler) {
        throw <span class="hljs-built_in">RuntimeException</span>("è¢«å¤„ç†å™¨æ•è·çš„å¼‚å¸¸")
    }
    job2<span class="hljs-selector-class">.join</span>()
    
    <span class="hljs-comment">// 3. è¶…æ—¶æ§åˆ¶</span>
    try {
        <span class="hljs-built_in">withTimeout</span>(<span class="hljs-number">1300</span>L) {
            repeat(<span class="hljs-number">1000</span>) { <span class="hljs-selector-tag">i</span> -&gt;
                <span class="hljs-built_in">println</span>("ä»»åŠ¡ $i")
                <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>L)
            }
        }
    } catch (e: TimeoutCancellationException) {
        <span class="hljs-built_in">println</span>("ä»»åŠ¡è¶…æ—¶")
    }
    
    <span class="hljs-comment">// 4. è¶…æ—¶è¿”å›é»˜è®¤å€¼</span>
    val result = <span class="hljs-built_in">withTimeoutOrNull</span>(<span class="hljs-number">1300</span>L) {
        <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>L)
        "æˆåŠŸç»“æœ"
    } ?: <span class="hljs-string">"è¶…æ—¶é»˜è®¤å€¼"</span>
    
    <span class="hljs-built_in">println</span>(<span class="hljs-string">"ç»“æœ: $result"</span>)
}
</code></pre>
<h4 data-id="heading-10"><strong>ä¸‰åä¸€ã€é«˜çº§æ¨¡å¼ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> kotlinx.coroutines.channels.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> CoroutineScope.<span class="hljs-title">produceUsers</span><span class="hljs-params">()</span></span> = produce {
    <span class="hljs-keyword">var</span> id = <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        send(User(id, <span class="hljs-string">"ç”¨æˆ·<span class="hljs-variable">$id</span>"</span>, <span class="hljs-string">"user<span class="hljs-variable">$id</span>@example.com"</span>))
        delay(<span class="hljs-number">200L</span>)
        id++
        <span class="hljs-keyword">if</span> (id &gt; <span class="hljs-number">5</span>) <span class="hljs-keyword">break</span> <span class="hljs-comment">// åªç”Ÿäº§5ä¸ªç”¨æˆ·</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> CoroutineScope.<span class="hljs-title">processUser</span><span class="hljs-params">(userChannel: <span class="hljs-type">ReceiveChannel</span>&lt;<span class="hljs-type">User</span>&gt;)</span></span> = produce {
    <span class="hljs-keyword">for</span> (user <span class="hljs-keyword">in</span> userChannel) {
        delay(<span class="hljs-number">100L</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
        send(<span class="hljs-string">"å·²å¤„ç†: <span class="hljs-subst">${user.name}</span>"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> userProducer = produceUsers()
    <span class="hljs-keyword">val</span> processor = processUser(userProducer)
    
    <span class="hljs-comment">// æ¶ˆè´¹å¤„ç†ç»“æœ</span>
    <span class="hljs-keyword">for</span> (result <span class="hljs-keyword">in</span> processor) {
        println(result)
    }
    
    println(<span class="hljs-string">"å¤„ç†å®Œæˆ"</span>)
}
</code></pre>
<h4 data-id="heading-11"><strong>ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘</strong></h4>
<p>ä½ ç°åœ¨å·²ç»æŒæ¡äº† Kotlin åç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼æ¥ä¸‹æ¥å¯ä»¥æ¢ç´¢ï¼š</p>
<ol>
<li><strong>Flow é«˜çº§æ“ä½œ</strong>ï¼š<code>combine</code>ã€<code>zip</code>ã€<code>flatMapLatest</code>ç­‰æ“ä½œç¬¦</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨Â <code>StateFlow</code>å’ŒÂ <code>SharedFlow</code></li>
<li><strong>æµ‹è¯•åç¨‹</strong>ï¼šä½¿ç”¨Â <code>TestCoroutineDispatcher</code>å’ŒÂ <code>runTest</code></li>
<li><strong>Android ä¸Šçš„åç¨‹</strong>ï¼šä¸ ViewModelã€Lifecycle é›†æˆ</li>
<li><strong>æœåŠ¡ç«¯åç¨‹</strong>ï¼šKtor æ¡†æ¶çš„ä½¿ç”¨</li>
</ol>
<p>åç¨‹æ˜¯ Kotlin ç”Ÿæ€ä¸­æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°†å½»åº•æ”¹å˜ä½ å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„æ–¹å¼ã€‚å°è¯•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›æ¨¡å¼ï¼Œä½ ä¼šå‘ç°ä»£ç å˜å¾—æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜è´¨é‡åŠ¨æ€ä»£ç†æ± IPï¼Œåˆ°åº•æ€ä¹ˆé€‰æ‰ä¸è¸©å‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7568405112269864996</link>    <guid>https://juejin.cn/post/7568405112269864996</guid>    <pubDate>2025-11-04T07:42:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7568405112269864996" data-draft-id="7568416956041101366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜è´¨é‡åŠ¨æ€ä»£ç†æ± IPï¼Œåˆ°åº•æ€ä¹ˆé€‰æ‰ä¸è¸©å‘ï¼Ÿ"/> <meta itemprop="keywords" content="TCP/IP"/> <meta itemprop="datePublished" content="2025-11-04T07:42:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬å”¤ç¥é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/640384299179028"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜è´¨é‡åŠ¨æ€ä»£ç†æ± IPï¼Œåˆ°åº•æ€ä¹ˆé€‰æ‰ä¸è¸©å‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/640384299179028/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬å”¤ç¥é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-04T07:42:18.000Z" title="Tue Nov 04 2025 07:42:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å¾ˆå¤šåšæ•°æ®é‡‡é›†ã€å¸‚åœºåˆ†ææˆ–è€…ä¸šåŠ¡æµ‹è¯•çš„æœ‹å‹éƒ½åœ¨é—®ï¼Œå¸‚é¢ä¸Šé‚£ä¹ˆå¤šä»£ç†IPæœåŠ¡ï¼Œåˆ°åº•å“ªå®¶çš„åŠ¨æ€ä»£ç†æ± é è°±ï¼Ÿç”¨å…è´¹çš„å§ï¼Œé€Ÿåº¦æ…¢ä¸è¯´ï¼Œè¿˜ç»å¸¸è¢«å°ï¼›éšä¾¿ä¹°ä¸€ä¸ªå¥—é¤ï¼Œç»“æœIPçº¯å‡€åº¦å·®ã€å“åº”æ…¢ï¼Œç™½ç™½æµªè´¹é¢„ç®—ã€‚å…¶å®ï¼Œé€‰å¯¹ä»£ç†IPæœåŠ¡ï¼Œå…³é”®ä¸åœ¨äºä»·æ ¼å¤šä½ï¼Œè€Œåœ¨äºæ˜¯å¦<strong>ç¨³å®šã€é«˜åŒ¿ã€è¦†ç›–å¹¿</strong>ã€‚ä»Šå¤©æˆ‘ä»¬å°±ç»“åˆå®é™…ä½¿ç”¨ä½“éªŒï¼ŒèŠèŠå¦‚ä½•æŒ‘é€‰é«˜è´¨é‡åŠ¨æ€ä»£ç†æ± IPï¼Œå¹¶é’ˆå¯¹å¸¸è§ä¸šåŠ¡åœºæ™¯åšä¸€æ¬¡æ·±åº¦è§£æã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä½ éœ€è¦åŠ¨æ€ä»£ç†æ± ï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ± çš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œå˜åŒ–â€å’Œâ€œç¨³å®šâ€çš„å¹³è¡¡ã€‚æ¯”å¦‚ä½ åœ¨åšæ•°æ®é‡‡é›†ï¼Œå¦‚æœä¸€ç›´ç”¨åŒä¸€ä¸ªIPé¢‘ç¹è¯·æ±‚ï¼Œå¾ˆå®¹æ˜“è¢«ç›®æ ‡ç½‘ç«™è¯†åˆ«å¹¶å°ç¦ã€‚è€ŒåŠ¨æ€IPæ± å¯ä»¥åœ¨æ¯æ¬¡è¯·æ±‚æ—¶è‡ªåŠ¨æ›´æ¢IPï¼Œæ¨¡æ‹Ÿä¸åŒåœ°åŒºçœŸå®ç”¨æˆ·çš„è¡Œä¸ºï¼Œå¤§å¹…é™ä½è¢«å°é£é™©ã€‚é«˜è´¨é‡çš„ä»£ç†æ± è¿˜ä¼šå¯¹IPè¿›è¡Œå®æ—¶æ£€æµ‹ï¼Œç¡®ä¿æ¯ä¸€ä¸ªIPéƒ½å¯ç”¨ï¼Œé¿å…å·¥ä½œä¸­æ–­ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŠ¨æ€ä»£ç†å¹¶éåªæ˜¯â€œä¸æ–­æ¢IPâ€ï¼Œæ›´é‡è¦çš„æ˜¯IPçš„è´¨é‡å’Œè¦†ç›–èŒƒå›´ã€‚æœ‰äº›æœåŠ¡å•†è™½ç„¶IPæ•°é‡å¤šï¼Œä½†å¤§éƒ¨åˆ†æ˜¯é‡å¤æˆ–ä½æ•ˆçš„ï¼Œå®é™…ä½¿ç”¨ä¸­é¢‘ç¹æ‰çº¿ï¼Œåè€Œå½±å“æ•ˆç‡ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¥½ç”¨çš„åŠ¨æ€ä»£ç†æ± åº”å…·å¤‡å“ªäº›ç‰¹ç‚¹ï¼Ÿ</h2>
<p>æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œä¸€ä¸ªå¥½çš„åŠ¨æ€ä»£ç†æ± è‡³å°‘åº”æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p><strong>1. é«˜å¯ç”¨ç‡ä¸å“åº”é€Ÿåº¦ï¼š</strong>ä»£ç†IPçš„å¯ç”¨ç‡æœ€å¥½åœ¨99%ä»¥ä¸Šï¼Œå¹³å‡å“åº”æ—¶é—´æ§åˆ¶åœ¨æ¯«ç§’çº§ã€‚ä¾‹å¦‚æœ‰äº›æœåŠ¡å¦‚ç¥é¾™HTTPï¼Œå®£ç§°å¯ç”¨ç‡99.9%ï¼Œå“åº”è¿…é€Ÿï¼Œè¿™å¯¹é«˜é¢‘é‡‡é›†æˆ–å®æ—¶æµ‹è¯•åœºæ™¯éå¸¸é‡è¦ã€‚</p>
<p><strong>2. å¹¿æ³›çš„IPè¦†ç›–ï¼š</strong>IPæ± éœ€è¦†ç›–å›½å†…å¤šæ•°åŸå¸‚ï¼Œç”šè‡³ç»†åˆ†åˆ°åœ°åŒºçº§ã€‚ä¾‹å¦‚ç¥é¾™IPä»£ç†è¦†ç›–200å¤šä¸ªåŸå¸‚ï¼Œèƒ½ç²¾å‡†æ¨¡æ‹Ÿå¤šåœ°ç½‘ç»œç¯å¢ƒï¼Œé€‚åˆåšåŒºåŸŸåŒ–è¥é”€æµ‹è¯•æˆ–æ•°æ®é‡‡é›†ã€‚</p>
<p><strong>3. é«˜åŒ¿åæ€§ä¸å®‰å…¨æ€§ï¼š</strong>ä»£ç†IPåº”å…·å¤‡é«˜åŒ¿åç‰¹æ€§ï¼Œä¸é€éœ²ç”¨æˆ·çœŸå®IPï¼ŒåŒæ—¶ä¼ è¾“åè®®éœ€åŠ å¯†ï¼Œé¿å…æ•°æ®æ³„éœ²ã€‚ä¸€äº›æœåŠ¡å•†é‡‡ç”¨è¿è¥å•†æ­£è§„æˆæƒIPï¼Œå¦‚ç¥é¾™HTTPå¼ºè°ƒå…¶IPèµ„æºæ¥è‡ªä¸‰å¤§è¿è¥å•†ï¼Œåˆæ³•åˆè§„ï¼Œé€‚åˆä¼ä¸šé•¿æœŸä½¿ç”¨ã€‚</p>
<p><strong>4. ä¸šåŠ¡åœºæ™¯é€‚é…æ€§ï¼š</strong>èƒ½å¦æ”¯æŒé«˜å¹¶å‘ã€å¤šåè®®ï¼ˆHTTP/HTTPS/SOCKS5ç­‰ï¼‰ï¼Œä»¥åŠæ˜¯å¦æä¾›å®šåˆ¶è§£å†³æ–¹æ¡ˆï¼Œéƒ½æ˜¯éœ€è¦è€ƒè™‘çš„ã€‚ä¾‹å¦‚æœ‰äº›æœåŠ¡å•†æ”¯æŒä¸€å¯¹ä¸€æŠ€æœ¯å®šåˆ¶ï¼Œé€‚åˆæœ‰ç‰¹æ®Šéœ€æ±‚çš„ä¼ä¸šç”¨æˆ·ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å®é™…åœºæ™¯ä¸­å¦‚ä½•åº”ç”¨åŠ¨æ€ä»£ç†ï¼Ÿ</h2>
<p><strong>åœºæ™¯1ï¼šæ•°æ®é‡‡é›†ä¸çˆ¬è™«</strong><br/>åœ¨åšå¤§è§„æ¨¡æ•°æ®æŠ“å–æ—¶ï¼ŒåŠ¨æ€ä»£ç†æ± èƒ½è‡ªåŠ¨åˆ‡æ¢IPï¼Œé¿å…IPè¢«å°ã€‚ä¾‹å¦‚ç¥é¾™HTTPæåˆ°å¯ä¸ºå¤§æ•°æ®é‡‡é›†æä¾›é«˜å»é‡ä»£ç†æ–¹æ¡ˆï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚ï¼Œé€‚åˆçˆ¬è™«é•¿æ—¶é—´è¿è¡Œã€‚</p>
<p><strong>åœºæ™¯2ï¼šåŒºåŸŸåŒ–è¥é”€æµ‹è¯•</strong><br/>å¦‚æœä½ éœ€è¦æµ‹è¯•ä¸åŒåœ°åŒºç”¨æˆ·å¯¹å¹¿å‘Šæˆ–æœç´¢ç»“æœçš„åé¦ˆï¼Œå¯ä»¥ç”¨åŠ¨æ€ä»£ç†æ¨¡æ‹Ÿå¤šåœ°IPã€‚ä¾‹å¦‚ç¥é¾™IPä»£ç†æ”¯æŒç²¾å‡†å®šä½åŸå¸‚ï¼Œå¸®åŠ©åˆ†æåœ°åŒºç”¨æˆ·åå¥½ï¼Œä¼˜åŒ–è¥é”€ç­–ç•¥ã€‚</p>
<p><strong>åœºæ™¯3ï¼šæœåŠ¡å™¨æ€§èƒ½æµ‹è¯•</strong><br/>é€šè¿‡ä»£ç†æ¨¡æ‹Ÿå¤šåœ°åŒºç”¨æˆ·å¹¶å‘è¯·æ±‚ï¼Œæµ‹è¯•æœåŠ¡å™¨æ‰¿è½½èƒ½åŠ›å’Œå“åº”å»¶è¿Ÿã€‚æœ‰äº›æœåŠ¡å¦‚ç¥é¾™IPä»£ç†æ”¯æŒå®šåˆ¶å¸¦å®½ï¼ˆ6-15Mï¼‰ï¼Œé€‚åˆåšè´Ÿè½½æµ‹è¯•å’Œæ€§èƒ½è¯„ä¼°ã€‚</p>
<p><strong>åœºæ™¯4ï¼šAIè®­ç»ƒä¸ä¸šåŠ¡ç›‘æ§</strong><br/>åŠ¨æ€ä»£ç†èƒ½æä¾›å¤§é‡å·®å¼‚åŒ–IPï¼Œç”¨äºæ¨¡å‹è®­ç»ƒæˆ–ä¸šåŠ¡ç›‘æ§ã€‚ä¾‹å¦‚ç¥é¾™HTTPç§°å…¶IPæ± è¶…3000ä¸‡ï¼Œèƒ½æ”¯æŒAIå¤§æ¨¡å‹è®­ç»ƒæ‰€éœ€çš„æ•°æ®å¤šæ ·æ€§ã€‚</p>
<h2 data-id="heading-3">å››ã€å¸¸è§é—®é¢˜ç­”ç–‘</h2>
<p><strong>é—®ï¼šåŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong><br/>åŠ¨æ€ä»£ç†IPä¼šæŒ‰ä¸€å®šé¢‘ç‡è‡ªåŠ¨æ›´æ¢ï¼Œé€‚åˆéœ€è¦é¢‘ç¹åˆ‡æ¢IPçš„åœºæ™¯ï¼ˆå¦‚é‡‡é›†ã€æµ‹è¯•ï¼‰ï¼›é™æ€ä»£ç†IPé•¿æœŸä¸å˜ï¼Œé€‚åˆéœ€è¦ç¨³å®šIPçš„ä¸šåŠ¡ï¼ˆå¦‚è¿œç¨‹ç™»å½•æˆ–å›ºå®šèº«ä»½åœºæ™¯ï¼‰ã€‚</p>
<p><strong>é—®ï¼šä»£ç†IPçš„åŒ¿åçº§åˆ«æœ‰å“ªäº›ï¼Ÿ</strong><br/>ä¸€èˆ¬åˆ†ä¸ºé€æ˜ä»£ç†ã€æ™®é€šåŒ¿åä»£ç†å’Œé«˜åŒ¿åä»£ç†ã€‚é«˜åŒ¿åä»£ç†å®Œå…¨ä¸é€éœ²ç”¨æˆ·çœŸå®IPï¼Œæ¨èåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Œä»¥é¿å…è¢«è¯†åˆ«ã€‚</p>
<p><strong>é—®ï¼šå¦‚ä½•æµ‹è¯•ä»£ç†IPæ˜¯å¦å¯ç”¨ï¼Ÿ</strong><br/>å¯é€šè¿‡åœ¨çº¿å·¥å…·æˆ–è‡ªå†™è„šæœ¬æ£€æµ‹IPçš„å“åº”é€Ÿåº¦ã€åŒ¿åæ€§å’Œç¨³å®šæ€§ã€‚å»ºè®®é€‰æ‹©æä¾›å…è´¹æµ‹è¯•çš„æœåŠ¡å•†ï¼Œå®é™…éªŒè¯åå†å†³å®šè´­ä¹°ã€‚</p>
<p><strong>é—®ï¼šä¼ä¸šç”¨æˆ·é€‰ä»£ç†æœåŠ¡æœ€è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ</strong><br/>é™¤äº†IPè´¨é‡ï¼Œè¿˜è¦çœ‹é‡æœåŠ¡å•†çš„æŠ€æœ¯æ”¯æŒã€åè®®åˆè§„æ€§å’Œå®šåˆ¶èƒ½åŠ›ã€‚æœ€å¥½é€‰æ‹©èƒ½æä¾›24å°æ—¶æŠ€æœ¯æ”¯æŒã€æ­£è§„è¿è¥å•†èµ„æºçš„æœåŠ¡å•†ï¼Œé¿å…æ³•å¾‹é£é™©ã€‚</p>
<h2 data-id="heading-4">äº”ã€æ€»ç»“å»ºè®®</h2>
<p>é€‰æ‹©é«˜è´¨é‡åŠ¨æ€ä»£ç†æ± IPï¼Œä¸èƒ½å…‰çœ‹ä»·æ ¼æˆ–IPæ•°é‡ï¼Œæ›´è¦ç»“åˆä¸šåŠ¡éœ€æ±‚ç»¼åˆåˆ¤æ–­ã€‚å¦‚æœä½ æ˜¯åšä¼ä¸šçº§é«˜é¢‘é‡‡é›†ï¼Œéœ€è¦é«˜å¹¶å‘å’Œç¨³å®šå“åº”ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘èµ„æºé‡å¤§ã€æ”¯æŒå®šåˆ¶çš„æœåŠ¡ï¼›å¦‚æœä¾§é‡å¤šåœ°åŒºæ¨¡æ‹Ÿå’Œè¥é”€æµ‹è¯•ï¼Œåˆ™è¦é€‰æ‹©è¦†ç›–åŸå¸‚å¹¿ã€å®šä½ç²¾å‡†çš„æœåŠ¡ã€‚</p>
<p>æ— è®ºç”¨å“ªå®¶æœåŠ¡ï¼Œéƒ½å»ºè®®å…ˆå…è´¹æµ‹è¯•ï¼Œä½“éªŒå®é™…é€Ÿåº¦ä¸ç¨³å®šæ€§ã€‚æ¯•ç«Ÿä»£ç†IPæ˜¯åº•å±‚å·¥å…·ï¼Œé€‰å¯¹äº†äº‹åŠåŠŸå€ï¼Œé€‰é”™äº†å…¨æ˜¯å‘ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ ç†æ¸…æ€è·¯ï¼Œæ‰¾åˆ°é€‚åˆçš„ä¸šåŠ¡è§£å†³æ–¹æ¡ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“æ‰‹æœºå¦‚ä½•è®¾ç½®IPä»£ç†ï¼Ÿæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨èµ·æ¥]]></title>    <link>https://juejin.cn/post/7570896170920984639</link>    <guid>https://juejin.cn/post/7570896170920984639</guid>    <pubDate>2025-11-10T10:05:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570896170920984639" data-draft-id="7570598043298725951" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“æ‰‹æœºå¦‚ä½•è®¾ç½®IPä»£ç†ï¼Ÿæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨èµ·æ¥"/> <meta itemprop="keywords" content="TCP/IP"/> <meta itemprop="datePublished" content="2025-11-10T10:05:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬å”¤ç¥é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/640384299179028"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“æ‰‹æœºå¦‚ä½•è®¾ç½®IPä»£ç†ï¼Ÿæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/640384299179028/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬å”¤ç¥é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T10:05:21.000Z" title="Mon Nov 10 2025 10:05:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>
	å¾ˆå¤šä½¿ç”¨å®‰å“æ‰‹æœºçš„æœ‹å‹ï¼Œå¯èƒ½éƒ½é‡åˆ°è¿‡ç½‘ç»œè®¿é—®å—é™æˆ–è€…éœ€è¦æ›´æ¢ç½‘ç»œç¯å¢ƒçš„æƒ…å†µã€‚è¿™æ—¶å€™ï¼ŒIPä»£ç†å°±èƒ½å¸®ä¸Šå¤§å¿™ã€‚å®ƒå°±åƒä¸€ä¸ªä¸­è½¬ç«™ï¼Œè®©ä½ çš„ç½‘ç»œè¯·æ±‚é€šè¿‡å®ƒæ¥è½¬å‘ï¼Œä»è€Œæ”¹å˜ä½ çš„ç½‘ç»œå‡ºå£IPã€‚è¿™ç¯‡æ–‡ç« ä¸ä¼šè®²é‚£äº›éš¾æ‡‚çš„æŠ€æœ¯åŸç†ï¼Œå°±å®å®åœ¨åœ¨åœ°æ•™ä½ ï¼Œåœ¨å®‰å“æ‰‹æœºä¸Šæ€ä¹ˆä¸€æ­¥æ­¥æŠŠIPä»£ç†ç”¨èµ·æ¥ï¼Œä»¥åŠæœ‰å“ªäº›å¥½ç”¨çš„æœåŠ¡å¯ä»¥é€‰æ‹©ã€‚
</p>
<h2 data-id="heading-0">
	ä¸ºä»€ä¹ˆéœ€è¦åœ¨å®‰å“æ‰‹æœºä¸Šä½¿ç”¨IPä»£ç†ï¼Ÿ
</h2>
<p>
	ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘å¥½å¥½åœ°ç”¨æ‰‹æœºä¸Šç½‘ï¼Œä¸ºä»€ä¹ˆè¦æŠ˜è…¾ä»£ç†å‘¢ï¼Ÿå…¶å®åŸå› å¾ˆå®é™…ã€‚æ¯”å¦‚ï¼Œä½ åšå¸‚åœºè°ƒç ”ï¼Œéœ€è¦æŸ¥çœ‹ä¸åŒåœ°åŒºçš„æœç´¢ç»“æœï¼›æˆ–è€…ä½ æ˜¯ä¸ªæ‰‹æ¸¸çˆ±å¥½è€…ï¼Œæƒ³ä½“éªŒä¸åŒæœåŠ¡å™¨çš„æ¸¸æˆç¯å¢ƒï¼›åˆæˆ–è€…ä½ éœ€è¦æ›´ç¨³å®šã€æ›´ç§å¯†çš„ç½‘ç»œè¿æ¥è¿›è¡Œä¸€äº›å·¥ä½œã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç¨³å®šå¯é çš„IPä»£ç†å°±èƒ½æ´¾ä¸Šç”¨åœºï¼Œå¸®ä½ è§£å†³å®é™…é—®é¢˜ã€‚
</p>
<h2 data-id="heading-1">
	å®‰å“æ‰‹æœºè®¾ç½®IPä»£ç†çš„è¯¦ç»†æ­¥éª¤
</h2>
<p>
	å®‰å“ç³»ç»Ÿæœ¬èº«æä¾›äº†è®¾ç½®ä»£ç†çš„åŠŸèƒ½ï¼Œæ“ä½œèµ·æ¥å¹¶ä¸å¤æ‚ã€‚è¿™é‡Œä»¥å¸¸ç”¨çš„Wi-Fiç½‘ç»œä¸ºä¾‹ï¼Œç»™ä½ è¯´æ˜ç™½ï¼š
</p>
<p>
	1.  é¦–å…ˆæ‰“å¼€æ‰‹æœºçš„â€œè®¾ç½®â€ï¼Œæ‰¾åˆ°â€œWLANâ€é€‰é¡¹å¹¶ç‚¹å‡»è¿›å…¥ã€‚
</p>
<p>
	2.  é•¿æŒ‰ä½ å½“å‰å·²ç»è¿æ¥ä¸Šçš„Wi-Fiç½‘ç»œåç§°ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªèœå•ï¼Œé€‰æ‹©â€œä¿®æ”¹ç½‘ç»œâ€ã€‚
</p>
<p>
	3.  åœ¨ç½‘ç»œè¯¦æƒ…é¡µé¢ï¼Œæ‰¾åˆ°â€œé«˜çº§é€‰é¡¹â€ï¼Œç‚¹å‡»å±•å¼€ã€‚
</p>
<p>
	4.  åœ¨â€œä»£ç†â€è¿™ä¸€æ ï¼Œé€‰æ‹©â€œæ‰‹åŠ¨â€ã€‚
</p>
<p>
	5.  æ¥ä¸‹æ¥å°±éœ€è¦å¡«å…¥ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯äº†ï¼šâ€œä»£ç†æœåŠ¡å™¨ä¸»æœºåâ€è¿™é‡Œå¡«æä¾›ç»™ä½ çš„IPåœ°å€ï¼Œâ€œä»£ç†æœåŠ¡å™¨ç«¯å£â€å¡«å¯¹åº”çš„ç«¯å£å·ã€‚
</p>
<p>
	6.  å¦‚æœéœ€è¦ç”¨æˆ·åå’Œå¯†ç è®¤è¯ï¼Œä¹Ÿä¸€å¹¶å¡«å¥½ï¼Œç„¶åç‚¹å‡»â€œä¿å­˜â€å³å¯ã€‚
</p>
<p>
	è¿™æ ·ï¼Œä½ çš„å®‰å“æ‰‹æœºé€šè¿‡è¿™ä¸ªWi-Fiä¸Šç½‘æ—¶ï¼Œæµé‡å°±ä¼šç»è¿‡ä½ è®¾ç½®çš„ä»£ç†æœåŠ¡å™¨äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•åªå¯¹å½“å‰è¿™ä¸ªWi-Fiç½‘ç»œç”Ÿæ•ˆï¼Œåˆ‡æ¢ç½‘ç»œæˆ–è€…ä½¿ç”¨ç§»åŠ¨æ•°æ®æ—¶å°±ä¸èµ·ä½œç”¨äº†ã€‚
</p>
<h2 data-id="heading-2">
	å¸‚é¢ä¸Šæœ‰å“ªäº›é è°±çš„IPä»£ç†æœåŠ¡ï¼Ÿ
</h2>
<p>
	çŸ¥é“äº†æ€ä¹ˆè®¾ç½®ï¼Œå…³é”®è¿˜å¾—æœ‰ä¸€ä¸ªç¨³å®šå¥½ç”¨çš„ä»£ç†IPèµ„æºã€‚å¸‚é¢ä¸ŠæœåŠ¡å•†å¾ˆå¤šï¼Œè´¨é‡å‚å·®ä¸é½ï¼Œé€‰æ‹©æ—¶éœ€è¦ä»”ç»†ç”„åˆ«ã€‚è¿™é‡Œå¯ä»¥èŠèŠä¸¤ç§ä¸åŒä¾§é‡ç‚¹çš„æœåŠ¡ç±»å‹ï¼Œå®ƒä»¬å„è‡ªé€‚åˆä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚
</p>
<p>
	ä¸€ç±»æ˜¯åƒç¥é¾™HTTPè¿™æ ·çš„æœåŠ¡å•†ï¼Œå®ƒæ›´ä¾§é‡äºä¸ºä¼ä¸šå’Œå¤§æ•°æ®åº”ç”¨æä¾›æ”¯æŒã€‚å®ƒæ‹¥æœ‰çš„IPèµ„æºé‡éå¸¸å¤§ï¼Œè¦†ç›–çš„åŸå¸‚ä¹Ÿéå¸¸å¤šï¼Œå¹¶ä¸”æ‰€æœ‰IPéƒ½è·å¾—äº†æ­£è§„è¿è¥å•†çš„æˆæƒã€‚è¿™æ„å‘³ç€å®ƒçš„è¿æ¥éå¸¸ç¨³å®šå¯é ï¼Œé€‚åˆé‚£äº›éœ€è¦é•¿æ—¶é—´ã€å¤§è§„æ¨¡ã€é«˜å¹¶å‘å¤„ç†ç½‘ç»œä»»åŠ¡çš„ä¸“ä¸šç”¨æˆ·ï¼Œæ¯”å¦‚å¤§è§„æ¨¡çš„æ•°æ®é‡‡é›†ã€AIæ¨¡å‹è®­ç»ƒç­‰åœºæ™¯ã€‚
</p>
<p>
	å¦ä¸€ç±»æ¯”å¦‚ç¥é¾™IPï¼Œå®ƒåœ¨ç½‘ç»œåŠ é€Ÿå’Œä½“éªŒçš„æµç•…æ€§ä¸Šå¯èƒ½æœ‰å…¶ç‰¹ç‚¹ã€‚å®ƒæä¾›çš„IPèµ„æºçº¯å‡€åº¦é«˜ï¼Œè¿æ¥é€Ÿåº¦å¾ˆå¿«ï¼Œå»¶è¿Ÿä½ã€‚è¿™å¯¹äºæ™®é€šç”¨æˆ·æˆ–è€…éœ€è¦å¿«é€Ÿåˆ‡æ¢IPã€å¯¹ç½‘ç»œå“åº”é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„åœºæ™¯æ¯”è¾ƒå‹å¥½ï¼Œä¾‹å¦‚ä¸€äº›éœ€è¦æ¨¡æ‹Ÿä¸åŒåœ°åŒºç”¨æˆ·è¡Œä¸ºçš„å¸‚åœºè°ƒç ”ï¼Œæˆ–è€…å¯¹ç½‘ç»œå»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨æµ‹è¯•ç­‰ã€‚
</p>
<p>
	é€‰æ‹©æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸»è¦ç”¨é€”â€”â€”æ˜¯åå‘ä¸“ä¸šå¤§å‹ä»»åŠ¡ï¼Œè¿˜æ˜¯æ›´çœ‹é‡é€Ÿåº¦å’Œä¾¿æ·ä½“éªŒâ€”â€”æ¥åšå‡ºå†³å®šã€‚æœ€å¥½å…ˆåˆ©ç”¨æœåŠ¡å•†æä¾›çš„æµ‹è¯•æœåŠ¡ä½“éªŒä¸€ä¸‹ï¼Œçœ‹çœ‹å®é™…æ•ˆæœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚
</p>
<h2 data-id="heading-3">
	ä½¿ç”¨IPä»£ç†æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°è¿™äº›é—®é¢˜
</h2>
<p>
	<strong>é—®ï¼šè®¾ç½®äº†ä»£ç†ä¹‹åï¼Œæ‰‹æœºä¸Šç½‘å˜æ…¢äº†æ€ä¹ˆåŠï¼Ÿ</strong>
</p>
<p>
	ç­”ï¼šè¿™å¯èƒ½æ˜¯ä»£ç†æœåŠ¡å™¨çº¿è·¯æˆ–è´Ÿè½½å¯¼è‡´çš„ã€‚å¯ä»¥å°è¯•åˆ‡æ¢å¦ä¸€ä¸ªä»£ç†IPèŠ‚ç‚¹ï¼Œæˆ–è€…è”ç³»æœåŠ¡å•†æ£€æŸ¥çº¿è·¯è´¨é‡ã€‚é€‰æ‹©ä¸€ä¸ªæœ¬èº«ä»¥é«˜é€Ÿä½å»¶è¿Ÿä¸ºç‰¹ç‚¹çš„æœåŠ¡å¯èƒ½ä¼šæ”¹å–„è¿™ä¸€é—®é¢˜ã€‚
</p>
<p>
	<strong>é—®ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä»£ç†ä¼šè¿æ¥ä¸ä¸Šï¼Ÿ</strong>
</p>
<p>
	ç­”ï¼šåŸå› å¯èƒ½æœ‰å‡ ä¸ªï¼šä¸€æ˜¯ä»£ç†IPå¤±æ•ˆäº†ï¼Œéœ€è¦æ¢ä¸€ä¸ªæ–°çš„ï¼›äºŒæ˜¯ä½ å¡«å†™çš„ç«¯å£å·æˆ–è®¤è¯ä¿¡æ¯æœ‰è¯¯ï¼›ä¸‰æ˜¯å½“å‰ç½‘ç»œç¯å¢ƒï¼ˆæ¯”å¦‚å…¬å¸ç½‘ç»œï¼‰é™åˆ¶äº†ä»£ç†ç«¯å£çš„è®¿é—®ã€‚é€ä¸€æ’æŸ¥å°±èƒ½è§£å†³ã€‚
</p>
<p>
	<strong>é—®ï¼šä½¿ç”¨IPä»£ç†å®‰å…¨å—ï¼Ÿ</strong>
</p>
<p>
	ç­”ï¼šå®‰å…¨æ€§å–å†³äºä½ é€‰æ‹©çš„æœåŠ¡å•†ã€‚é€‰æ‹©é‚£äº›ä¿¡èª‰å¥½ã€é‡‡ç”¨é«˜åŒ¿åŠ å¯†æŠ€æœ¯ã€æ‰¿è¯ºä¸è®°å½•ç”¨æˆ·æ´»åŠ¨æ—¥å¿—çš„æ­£è§„æœåŠ¡å•†ï¼Œå®‰å…¨æ€§æ˜¯æœ‰ä¿éšœçš„ã€‚åŠ¡å¿…è¿œç¦»æ¥è·¯ä¸æ˜çš„å…è´¹ä»£ç†ï¼Œå®ƒä»¬å¯èƒ½æœ‰å®‰å…¨é£é™©ã€‚
</p>
<p>
	<strong>é—®ï¼šé™¤äº†å…¨å±€ä»£ç†ï¼Œè¿˜æœ‰åˆ«çš„ç”¨æ³•å—ï¼Ÿ</strong>
</p>
<p>
	ç­”ï¼šæ˜¯çš„ã€‚ä¸Šè¿°åœ¨Wi-Fié‡Œè®¾ç½®çš„æ˜¯å…¨å±€ä»£ç†ï¼Œå³æ‰‹æœºæ‰€æœ‰Appçš„æµé‡éƒ½ç»è¿‡ä»£ç†ã€‚ä½ è¿˜å¯ä»¥åœ¨æ”¯æŒä»£ç†åŠŸèƒ½çš„ç‰¹å®šAppï¼ˆå¦‚ä¸€äº›æµè§ˆå™¨æˆ–çˆ¬è™«æ¡†æ¶ï¼‰å†…éƒ¨è®¾ç½®ä»£ç†ï¼Œè¿™æ ·åªæœ‰è¯¥Appçš„æµé‡èµ°ä»£ç†ï¼Œæ›´åŠ çµæ´»ã€‚
</p>
<h2 data-id="heading-4">
	æ€»ç»“
</h2>
<p>
	åœ¨å®‰å“æ‰‹æœºä¸Šä½¿ç”¨IPä»£ç†å¹¶ä¸æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹ã€‚æ ¸å¿ƒæ­¥éª¤å°±æ˜¯â€œè·å–é è°±çš„ä»£ç†IPä¿¡æ¯â€å’Œâ€œåœ¨ç½‘ç»œè®¾ç½®ä¸­æ­£ç¡®å¡«å†™â€ã€‚å…³é”®æ˜¯åç»­å¦‚ä½•æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚ï¼Œé€‰æ‹©ä¸€ä¸ªç¨³å®šã€å®‰å…¨ã€é«˜æ•ˆçš„æœåŠ¡æä¾›å•†ï¼Œè¿™ç›´æ¥å†³å®šäº†ä½ çš„ä½¿ç”¨ä½“éªŒã€‚å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®ä½ ç»•è¿‡å‘æ´¼ï¼Œé¡ºç•…åœ°ç”¨ä¸Šè¿™ä¸ªå·¥å…·ï¼Œè§£å†³ä½ é‡åˆ°çš„å®é™…é—®é¢˜ã€‚
</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MoonBit Pearls Vol.13: ä½¿ç”¨ MoonBit å¼€å‘ä¸€ä¸ª HTTP æ–‡ä»¶æœåŠ¡å™¨]]></title>    <link>https://juejin.cn/post/7571662618054721562</link>    <guid>https://juejin.cn/post/7571662618054721562</guid>    <pubDate>2025-11-12T10:18:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571662618054721562" data-draft-id="7571644531608387630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MoonBit Pearls Vol.13: ä½¿ç”¨ MoonBit å¼€å‘ä¸€ä¸ª HTTP æ–‡ä»¶æœåŠ¡å™¨"/> <meta itemprop="keywords" content="åç«¯,HTTP,æœåŠ¡å™¨"/> <meta itemprop="datePublished" content="2025-11-12T10:18:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MoonBit"/> <meta itemprop="url" content="https://juejin.cn/user/3609050528885565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MoonBit Pearls Vol.13: ä½¿ç”¨ MoonBit å¼€å‘ä¸€ä¸ª HTTP æ–‡ä»¶æœåŠ¡å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3609050528885565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MoonBit
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:18:35.000Z" title="Wed Nov 12 2025 10:18:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨ MoonBit å¼€å‘ä¸€ä¸ª HTTP æ–‡ä»¶æœåŠ¡å™¨</h2>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ MoonBit çš„å¼‚æ­¥ç¼–ç¨‹åŠŸèƒ½å’Œ <code>moonbitlang/async</code> åº“ï¼Œç¼–å†™ä¸€ä¸ªç®€å•çš„ HTTP æ–‡ä»¶æœåŠ¡å™¨ã€‚å¦‚æœä½ ä¹‹å‰æ¥è§¦è¿‡ Python è¯­è¨€ï¼Œé‚£ä¹ˆä½ å¯èƒ½çŸ¥é“ï¼ŒPython æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å†…å»º HTTP æœåŠ¡å™¨æ¨¡å—ã€‚åªéœ€è¦è¿è¡Œ <code>python -m http.server</code>ï¼Œå°±èƒ½åœ¨å½“æœŸæ–‡ä»¶å¤¹å¯åŠ¨ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œç”¨äºå±€åŸŸç½‘æ–‡ä»¶å…±äº«ç­‰ç”¨é€”ã€‚
åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨ MoonBit å®ç°ä¸€ä¸ªç±»ä¼¼åŠŸèƒ½çš„ç¨‹åºï¼Œå¹¶å€Ÿæ­¤äº†è§£ MoonBit çš„å¼‚æ­¥ç¼–ç¨‹æ”¯æŒã€‚æˆ‘ä»¬è¿˜å°†é¢å¤–æ”¯æŒä¸€ä¸ª <code>python -m http.server</code> æ²¡æœ‰çš„å®ç”¨åŠŸèƒ½ï¼šæŠŠæ•´ä¸ªæ–‡ä»¶å¤¹æ‰“åŒ…æˆ <code>zip</code> æ–‡ä»¶ä¸‹è½½ã€‚</p>
<h3 data-id="heading-1">å¼‚æ­¥ç¼–ç¨‹ç®€å²</h3>
<p>å¼‚æ­¥ç¼–ç¨‹ï¼Œèƒ½è®©ç¨‹åºå…·æœ‰åŒæ—¶å¤„ç†å¤šé¡¹ä»»åŠ¡çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨æ¥è¯´ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨éœ€è¦åŒæ—¶æœåŠ¡æ‰€æœ‰ç”¨æˆ·ï¼Œè®©å®ƒä»¬çš„ä½“éªŒå°½å¯èƒ½æµç•…ã€ä½å»¶æ—¶ã€‚åœ¨å…¸å‹çš„å¼‚æ­¥ç¨‹åºï¼Œä¾‹å¦‚æœåŠ¡å™¨ä¸­ï¼Œæ¯é¡¹ä»»åŠ¡çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰å¾… IO ä¸Šï¼Œå®é™…çš„è®¡ç®—æ—¶é—´å æ¯”è¾ƒä½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¾ˆå¤šçš„è®¡ç®—èµ„æºï¼Œä¹Ÿèƒ½åŒæ—¶å¤„ç†å¤§é‡ä»»åŠ¡ã€‚è€Œè¿™å…¶ä¸­çš„è¯€çªï¼Œå°±æ˜¯é¢‘ç¹åœ°åœ¨å¤šä¸ªä»»åŠ¡ä¹‹é—´åˆ‡æ¢ï¼š
å¦‚æœæŸé¡¹ä»»åŠ¡å¼€å§‹ç­‰å¾… IOï¼Œé‚£ä¹ˆå°±ä¸è¦ç»§ç»­å¤„ç†å®ƒï¼Œè€Œæ˜¯é©¬ä¸Šåˆ‡æ¢åˆ°ä¸éœ€è¦ç­‰å¾…çš„ä»»åŠ¡ä¸Šã€‚</p>
<p>è¿‡å»ï¼Œå¼‚æ­¥ç¨‹åºå¾€å¾€æ˜¯é€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼å®ç°çš„ï¼šæ¯é¡¹ä»»åŠ¡å¯¹åº”ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ã€‚
ç„¶è€Œï¼Œæ“ä½œç³»ç»Ÿçº¿ç¨‹éœ€è¦å ç”¨è¾ƒå¤šèµ„æºï¼Œè€Œä¸”åœ¨çº¿ç¨‹ä¹‹é—´åˆ‡æ¢å¼€é”€è¾ƒå¤§ã€‚
å› æ­¤ï¼Œè¿›å…¥ 21 ä¸–çºªåï¼Œå®ç°å¼‚æ­¥ç¨‹åºçš„ä¸»è¦æ–¹å¼å˜æˆäº†<em>äº‹ä»¶å¾ªç¯</em>ã€‚
æ•´ä¸ªå¼‚æ­¥ç¨‹åºçš„å½¢æ€æ˜¯ä¸€ä¸ªå·¨å¤§çš„å¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯ä¸­ï¼Œ
ç¨‹åºæ£€æŸ¥å“ªäº› IO æ“ä½œå·²ç»å®Œæˆï¼Œç„¶åè¿è¡Œé‚£äº›ç­‰å¾…ç€è¿™äº›å·²å®Œæˆçš„ IO æ“ä½œçš„ä»»åŠ¡ï¼Œ
ç›´åˆ°å®ƒä»¬å‘èµ·ä¸‹ä¸€æ¬¡ IO è¯·æ±‚ï¼Œé‡æ–°è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚
åœ¨è¿™ç§ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œä»»åŠ¡é—´çš„åˆ‡æ¢å‘ç”Ÿåœ¨åŒä¸€ä¸ªç”¨æˆ·æ€çš„çº¿ç¨‹é‡Œï¼Œå› æ­¤å¼€é”€æä½ã€‚</p>
<p>ç„¶è€Œï¼Œæ‰‹å†™äº‹ä»¶å¾ªç¯æ˜¯ä¸€ä»¶éå¸¸ç—›è‹¦çš„äº‹æƒ…ã€‚
å› ä¸ºåŒä¸€ä¸ªä»»åŠ¡çš„ä»£ç ä¼šè¢«æ‹†æ•£åˆ°å¤šæ¬¡ä¸åŒçš„å¾ªç¯ä¸­æ‰§è¡Œï¼Œç¨‹åºçš„é€»è¾‘å˜å¾—ä¸è¿è´¯äº†ã€‚
å› æ­¤ï¼ŒåŸºäºäº‹ä»¶å¾ªç¯çš„ç¨‹åºéå¸¸éš¾ç¼–å†™å’Œè°ƒè¯•ã€‚
å¹¸è¿çš„æ˜¯ï¼Œå°±åƒå¤§éƒ¨åˆ†å…¶ä»–ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒMoonBit æä¾›äº†åŸç”Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ”¯æŒã€‚
ç”¨æˆ·å¯ä»¥åƒå†™åŒæ­¥ç¨‹åºä¸€æ ·å†™å¼‚æ­¥ä»£ç ï¼ŒMoonBit ä¼šè‡ªåŠ¨æŠŠå¼‚æ­¥ä»£ç åˆ‡åˆ†æˆä¸åŒçš„éƒ¨åˆ†ã€‚
è€Œ <code>moonbitlang/async</code> åº“åˆ™æä¾›äº†äº‹ä»¶å¾ªç¯å’Œå„ç§ IO åŸè¯­çš„å®ç°ï¼Œè´Ÿè´£æŠŠå¼‚æ­¥ä»£ç è¿è¡Œèµ·æ¥ã€‚</p>
<h3 data-id="heading-2">MoonBit ä¸­çš„å¼‚æ­¥ç¼–ç¨‹</h3>
<p>åœ¨ MoonBit ä¸­ï¼Œå¯ä»¥ç”¨ <code>async fn</code> è¯­æ³•æ¥å£°æ˜ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚
å¼‚æ­¥å‡½æ•°çœ‹ä¸Šå»å’ŒåŒæ­¥å‡½æ•°å®Œå…¨ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒä»¬åœ¨è¿è¡Œæ—¶å¯èƒ½åœ¨ä¸­é€”è¢«æ‰“æ–­ï¼Œ
ä¸€æ®µæ—¶é—´åæ‰ç»§ç»­æ¢å¤è¿è¡Œï¼Œä»è€Œå®ç°å¤šä¸ªä»»åŠ¡é—´çš„åˆ‡æ¢ã€‚
åœ¨å¼‚æ­¥å‡½æ•°ä¸­å¯ä»¥æ­£å¸¸ä½¿ç”¨å¾ªç¯ç­‰æ§åˆ¶æµæ„é€ ï¼ŒMoonBit ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å®ƒä»¬å˜æˆå¼‚æ­¥çš„æ ·å­ã€‚</p>
<p>å’Œè®¸å¤šå…¶ä»–è¯­è¨€ä¸åŒï¼Œåœ¨è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ï¼ŒMoonBit ä¸éœ€è¦ç”¨ <code>await</code> ä¹‹ç±»çš„ç‰¹æ®Šè¯­æ³•æ ‡è®°ï¼Œ
ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­å‡ºå“ªäº›å‡½æ•°è°ƒç”¨æ˜¯å¼‚æ­¥çš„ã€‚
ä¸è¿‡ï¼Œå¦‚æœä½ ä½¿ç”¨å¸¦æœ‰ MoonBit æ”¯æŒçš„ IDE æˆ–æ–‡æœ¬ç¼–è¾‘å™¨æŸ¥çœ‹ä»£ç ï¼Œ
å°±ä¼šçœ‹åˆ°å¼‚æ­¥å‡½æ•°è°ƒç”¨è¢«æ¸²æŸ“æˆäº†æ–œä½“ã€å¯èƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°è°ƒç”¨å¸¦æœ‰ä¸‹åˆ’çº¿ã€‚
å› æ­¤ï¼Œé˜…è¯»ä»£ç æ—¶ï¼Œä¾ç„¶å¯ä»¥ä¸€çœ¼å°±æ‰¾åˆ°æ‰€æœ‰å¼‚æ­¥çš„å‡½æ•°è°ƒç”¨ã€‚</p>
<p>å¯¹äºå¼‚æ­¥ç¨‹åºæ¥è¯´ï¼Œå¦ä¸€ä¸ªå¿…ä¸å¯å°‘çš„ç»„ä»¶æ˜¯äº‹ä»¶å¾ªç¯ã€ä»»åŠ¡è°ƒåº¦å’Œå„ç§ IO åŸè¯­çš„å®ç°ã€‚
è¿™ä¸€ç‚¹åœ¨ MoonBit ä¸­æ˜¯é€šè¿‡ <code>moonbitlang/async</code> åº“å®ç°çš„ã€‚
<code>moonbitlang/async</code> åº“ä¸­æä¾›äº†ç½‘ç»œIOã€æ–‡ä»¶IOã€è¿›ç¨‹åˆ›å»ºç­‰å¼‚æ­¥æ“ä½œçš„æ”¯æŒï¼Œ
ä»¥åŠä¸€ç³»åˆ—ç®¡ç†å¼‚æ­¥ç¼–ç¨‹ä»»åŠ¡çš„ APIã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨ç¼–å†™ HTTP æ–‡ä»¶æœåŠ¡å™¨çš„é€”ä¸­ä»‹ç» <code>moonbitlang/async</code> çš„å„ç§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-3">HTTP æœåŠ¡å™¨çš„éª¨æ¶</h3>
<p>å…¸å‹çš„ HTTP æœåŠ¡å™¨çš„ç»“æ„æ˜¯ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ç›‘å¬ä¸€ä¸ª TCP ç«¯å£ï¼Œç­‰å¾…æ¥è‡ªç”¨æˆ·çš„è¿æ¥è¯·æ±‚</li>
<li>æ¥å—æ¥è‡ªç”¨æˆ·çš„ TCP è¿æ¥åï¼ŒæœåŠ¡å™¨ä» TCP è¿æ¥ä¸­è¯»å–ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¤„ç†ç”¨æˆ·çš„è¯·æ±‚å¹¶å°†ç»“æœå‘å›ç»™ç”¨æˆ·</li>
</ul>
<p>è¿™é‡Œçš„æ¯ä¸€é¡¹ä»»åŠ¡ï¼Œéƒ½åº”è¯¥å¼‚æ­¥åœ°è¿›è¡Œï¼š
åœ¨å¤„ç†ç¬¬ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä»åº”ä¸æ–­ç­‰å¾…æ–°çš„è¿æ¥ï¼Œå¹¶ç¬¬ä¸€æ—¶é—´å“åº”ä¸‹ä¸€ä¸ªç”¨æˆ·çš„è¿æ¥è¯·æ±‚ã€‚
å¦‚æœæœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶è¿æ¥åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åº”è¯¥åŒæ—¶å¤„ç†æ‰€æœ‰ç”¨æˆ·çš„è¯·æ±‚ã€‚
åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å¯èƒ½è€—è´¹è¾ƒå¤šæ—¶é—´çš„æ“ä½œï¼Œä¾‹å¦‚ç½‘ç»œ IO å’Œæ–‡ä»¶ IOï¼Œéƒ½åº”è¯¥æ˜¯å¼‚æ­¥çš„ï¼Œ
å®ƒä»¬ä¸åº”è¯¥é˜»å¡ç¨‹åºã€å½±å“å…¶ä»–ä»»åŠ¡çš„å¤„ç†ã€‚</p>
<p>åœ¨ <code>moonbitlang/async</code> ä¸­ï¼Œæœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>@http.run_server</code>ï¼Œ
èƒ½å¤Ÿç»‘æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°å·¥ä½œï¼Œæ­å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨å¹¶è¿è¡Œå®ƒï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">server_main</span>(path~ : <span class="hljs-type">String</span>, port~ : Int) <span class="hljs-punctuation">-&gt;</span> Unit {
  @http.<span class="hljs-title function_ invoke__">run_server</span>(@socket.Addr::<span class="hljs-title function_ invoke__">parse</span>(<span class="hljs-string">"[::]:\{port}"</span>), <span class="hljs-title function_ invoke__">fn</span> (conn, addr) {
    @pipe.stderr.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"received new connection from \{addr}\n"</span>)
    <span class="hljs-title function_ invoke__">handle_connection</span>(path, conn)
  })
}
</code></pre>
<p><code>server_main</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ï¼Œ
<code>path</code> æ˜¯æ–‡ä»¶æœåŠ¡å™¨å·¥ä½œçš„è·¯å¾„ï¼Œ<code>port</code> æ˜¯æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚
åœ¨ <code>moonbitlang/async</code> ä¸­ï¼Œä¸€åˆ‡å¼‚æ­¥ä»£ç éƒ½æ˜¯å¯ä»¥å–æ¶ˆçš„ï¼Œ
è€Œå¼‚æ­¥ä»£ç è¢«å–æ¶ˆæ—¶ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥æ‰€æœ‰å¼‚æ­¥å‡½æ•°éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚
å› æ­¤ï¼Œåœ¨ MoonBit ä¸­ï¼Œ<code>async fn</code> é»˜è®¤å°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ— éœ€å†æ˜¾å¼æ ‡æ³¨ <code>raise</code>ã€‚</p>
<p>åœ¨ <code>server_main</code> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@http.run_server</code> åˆ›å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨å¹¶è¿è¡Œå®ƒã€‚
<code>@http</code> æ˜¯ <code>moonbitlang/async</code> ä¸­æä¾› HTTP è§£æç­‰æ”¯æŒçš„åŒ… <code>moonbitlang/async/http</code> çš„åˆ«åï¼Œ
<code>@http.run_server</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœåŠ¡å™¨è¦ç›‘å¬çš„åœ°å€ã€‚
è¿™é‡Œæˆ‘ä»¬æä¾›çš„åœ°å€æ˜¯ <code>[::]:port</code>ï¼Œ
è¿™è¡¨ç¤ºç›‘å¬ç«¯å£ <code>port</code>ã€æ¥å—æ¥è‡ªä»»ä½•ç½‘ç»œæ¥å£çš„è¿æ¥è¯·æ±‚ã€‚
<code>moonbitlang/async</code> æœ‰åŸç”Ÿçš„ IPv4/IPv6 åŒæ ˆæ”¯æŒï¼Œå› æ­¤è¿™é‡Œçš„æœåŠ¡å™¨å¯ä»¥åŒæ—¶æ¥å— IPv4 è¿æ¥å’Œ IPv6 è¿æ¥ã€‚
<code>@http.run_server</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå¤„ç†æ¥è‡ªç”¨æˆ·çš„è¿æ¥ã€‚
å›è°ƒå‡½æ•°ä¼šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¥è‡ªç”¨æˆ·çš„è¿æ¥ï¼Œ
ç±»å‹æ˜¯ <code>@http.ServerConnection</code>ï¼Œç”± <code>@http.run_server</code> è‡ªåŠ¨è·å–å¹¶åˆ›å»ºã€‚
ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æˆ·çš„ç½‘ç»œåœ°å€ã€‚
è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>handle_connection</code> å‡½æ•°æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¿™ä¸ªå‡½æ•°çš„å®ç°å°†åœ¨ç¨åç»™å‡ºã€‚
<code>@http.run_server</code> ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¹¶è¡Œçš„ä»»åŠ¡ï¼Œå¹¶åœ¨å…¶ä¸­è¿è¡Œ <code>handle_connection</code>ã€‚
å› æ­¤ï¼ŒæœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿è¡Œå¤šä»½ <code>handle_connection</code>ã€å¤„ç†å¤šä¸ªè¿æ¥ã€‚</p>
<h3 data-id="heading-4">å¤„ç†ç”¨æˆ·æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å®ç°å®é™…å¤„ç†ç”¨æˆ·è¯·æ±‚çš„ <code>handle_connection</code> å‡½æ•°ã€‚
<code>handle_connection</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œ<code>base_path</code> æ˜¯æ–‡ä»¶æœåŠ¡å™¨å¤„ç†çš„è·¯å¾„ï¼Œ
è€Œ <code>conn</code> æ˜¯æ¥è‡ªç”¨æˆ·çš„è¿æ¥ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_connection</span>(
  base_path : <span class="hljs-type">String</span>,
  conn : @http.ServerConnection,
) <span class="hljs-punctuation">-&gt;</span> Unit {
  <span class="hljs-keyword">for</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">request</span> = conn.<span class="hljs-title function_ invoke__">read_request</span>()
    conn.<span class="hljs-title function_ invoke__">skip_request_body</span>()
    guard request.meth is Get <span class="hljs-keyword">else</span> {
      conn
      ..<span class="hljs-title function_ invoke__">send_response</span>(<span class="hljs-number">501</span>, <span class="hljs-string">"Not Implemented"</span>)
      ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"This request is not implemented"</span>)
      ..<span class="hljs-title function_ invoke__">end_response</span>()
    }
    <span class="hljs-keyword">let</span> (path, download_zip) = <span class="hljs-keyword">match</span> request.path {
      [ ..path, ..<span class="hljs-string">"?download_zip"</span> ] =&gt; (path.<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-literal">true</span>)
      path =&gt; (path, <span class="hljs-literal">false</span>)
    }
    <span class="hljs-keyword">if</span> download_zip {
      <span class="hljs-title function_ invoke__">serve_zip</span>(conn, base_path + path)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = @fs.<span class="hljs-title function_ invoke__">open</span>(base_path + path, mode=ReadOnly) catch {
        _ =&gt; {
          conn
          ..<span class="hljs-title function_ invoke__">send_response</span>(<span class="hljs-number">404</span>, <span class="hljs-string">"NotFound"</span>)
          ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"File not found"</span>)
          ..<span class="hljs-title function_ invoke__">end_response</span>()
          <span class="hljs-keyword">continue</span>
        }
      }
      defer file.<span class="hljs-title function_ invoke__">close</span>()
      <span class="hljs-keyword">if</span> file.<span class="hljs-title function_ invoke__">kind</span>() is Directory {
        <span class="hljs-keyword">if</span> download_zip {
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_ invoke__">serve_directory</span>(conn, file.<span class="hljs-title function_ invoke__">as_dir</span>(), path~)
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_ invoke__">server_file</span>(conn, file, path~)
      }
    }
  }
}
</code></pre>
<p>åœ¨ <code>handle_connection</code> ä¸­ï¼Œç¨‹åºé€šè¿‡ä¸€ä¸ªå¤§å¾ªç¯æ¥ä¸æ–­ä»è¿æ¥ä¸­è¯»å–ç”¨æˆ·è¯·æ±‚å¹¶å¤„ç†ã€‚
æ¯æ¬¡å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ <code>conn.read_request()</code> è¯»å–ä¸€ä¸ªæ¥è‡ªç”¨æˆ·çš„è¯·æ±‚ã€‚
<code>conn.read_request()</code> åªä¼šè¯»å– HTTP è¯·æ±‚çš„å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†å…è®¸ç”¨æˆ·æµå¼åœ°è¯»å–è¾ƒå¤§çš„ bodyã€‚
ç”±äºæˆ‘ä»¬çš„æ–‡ä»¶æœåŠ¡å™¨åªå¤„ç† <code>Get</code> è¯·æ±‚ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¯·æ±‚çš„ body ä¸­åŒ…å«ä»»ä½•ä¿¡æ¯ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡ <code>conn.skip_body()</code> è·³è¿‡ç”¨æˆ·è¯·æ±‚çš„ bodyï¼Œä»¥ä¿è¯ä¸‹ä¸€ä¸ªè¯·æ±‚çš„å†…å®¹å¯ä»¥è¢«æ­£ç¡®è¯»å–ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå¦‚æœé‡åˆ°ä¸æ˜¯ <code>Get</code> çš„è¯·æ±‚ï¼Œ<code>guard</code> è¯­å¥çš„ <code>else</code> å—ä¼šè¢«æ‰§è¡Œï¼Œ
æ­¤æ—¶ï¼Œ<code>guard</code> è¯­å¥åé¢çš„ä»£ç ä¼šè¢«è·³è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚
åœ¨ <code>else</code> å—ä¸­ï¼Œé€šè¿‡ <code>conn.send_response(..)</code> å‘ç”¨æˆ·å‘é€ä¸€ä¸ª â€œä¸æ”¯æŒè¯¥è¯·æ±‚â€ çš„å›å¤ã€‚
<code>conn.send_response(..)</code> ä¼šå‘é€å›å¤çš„å¤´éƒ¨ï¼Œè¿™ä¹‹åï¼Œæˆ‘ä»¬ç”¨ <code>conn.write(..)</code> å‘è¿æ¥å†™å…¥å›å¤çš„ä¸»ä½“å†…å®¹ã€‚
åœ¨å†™å®Œæ‰€æœ‰å†…å®¹åï¼Œæˆ‘ä»¬éœ€è¦ç”¨ <code>conn.end_response()</code> æ¥è¡¨æ˜å·²ç»å†™å®Œäº†å›å¤çš„æ‰€æœ‰å†…å®¹ã€‚</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å¸Œæœ›å®ç°ä¸€ä¸ª <code>python -m http.server</code> ä¸­æ²¡æœ‰çš„å®ç”¨åŠŸèƒ½ï¼š
ä»¥ zip çš„å½¢å¼ä¸‹è½½æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚
å¦‚æœç”¨æˆ·è¯·æ±‚çš„ URL çš„å½¢å¼æ˜¯ <code>/path/to/directory?download_zip</code>ï¼Œ
æˆ‘ä»¬å°±æŠŠ <code>/path/to/directory</code> æ‰“åŒ…æˆ <code>.zip</code> æ–‡ä»¶å‘é€ç»™ç”¨æˆ·ã€‚
è¿™ä¸€åŠŸèƒ½æ˜¯é€šè¿‡ <code>serve_zip</code> å‡½æ•°æ¥å®ç°çš„ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å®ç°çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œ
ç”¨æˆ·çš„ <code>GET</code> è¯·æ±‚ä¸­æŒ‡å®šçš„è·¯å¾„ä¼šç›´æ¥æ˜ å°„åˆ° <code>base_path</code> ä¸‹å¯¹åº”çš„è·¯å¾„ã€‚
<code>@fs</code> æ˜¯ <code>moonbitlang/async</code> ä¸­æä¾›æ–‡ä»¶ IO æ”¯æŒçš„åŒ… <code>moonbitlang/async/fs</code> çš„åˆ«åã€‚
è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>@fs.open</code> æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶ã€‚
å¦‚æœæ‰“å¼€æ–‡ä»¶å¤±è´¥äº†ï¼Œæˆ‘ä»¬å‘ç”¨æˆ·å‘é€ä¸€ä¸ª 404 å›å¤ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ã€‚</p>
<p>å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŠŠæ–‡ä»¶å‘é€ç»™ç”¨æˆ·ã€‚
å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œåˆ«å¿˜äº†ç”¨ <code>defer file.close()</code> ä¿è¯ <code>file</code> å ç”¨çš„èµ„æºè¢«åŠæ—¶é‡Šæ”¾ã€‚
é€šè¿‡ <code>file.kind()</code>ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—æ–‡ä»¶çš„ç§ç±»ã€‚
åœ¨æ–‡ä»¶æœåŠ¡å™¨ä¸­ï¼Œå¦‚æœç”¨æˆ·è¯·æ±‚çš„è·¯å¾„æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ã€‚
å› ä¸ºæ–‡ä»¶å¤¹ä¸èƒ½ç›´æ¥è¢«å‘é€ç»™ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œ
å‘ç”¨æˆ·è¿”å›ä¸€ä¸ª HTML é¡µé¢ï¼Œè®©ç”¨æˆ·å¯ä»¥ä»é¡µé¢çœ‹åˆ°æ–‡ä»¶å¤¹é‡Œæœ‰å“ªäº›æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„é¡µé¢ã€‚
è¿™éƒ¨åˆ†åŠŸèƒ½é€šè¿‡å‡½æ•° <code>serve_directory</code> æä¾›ã€‚
å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œé‚£ä¹ˆç›´æ¥å°†æ–‡ä»¶çš„å†…å®¹ä¼ è¾“ç»™ç”¨æˆ·å³å¯ã€‚
è¿™éƒ¨åˆ†åŠŸèƒ½é€šè¿‡å‡½æ•° <code>serve_file</code> æ¥å®ç°ã€‚</p>
<p>å‘ç”¨æˆ·å‘é€ä¸€ä¸ªæ™®é€šæ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">server_file</span>(
  conn : @http.ServerConnection,
  file : @fs.File,
  path~ : <span class="hljs-type">String</span>,
) <span class="hljs-punctuation">-&gt;</span> Unit {
  <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content_type</span> = <span class="hljs-keyword">match</span> path {
    [.., .. <span class="hljs-string">".png"</span>] =&gt; <span class="hljs-string">"image/png"</span>
    [.., .. <span class="hljs-string">".jpg"</span>] | <span class="hljs-string">"jpeg"</span> =&gt; <span class="hljs-string">"image/jpeg"</span>
    [.., .. <span class="hljs-string">".html"</span>] =&gt; <span class="hljs-string">"text/html"</span>
    [.., .. <span class="hljs-string">".css"</span>] =&gt; <span class="hljs-string">"text/css"</span>
    [.., .. <span class="hljs-string">".js"</span>] =&gt; <span class="hljs-string">"text/javascript"</span>
    [.., .. <span class="hljs-string">".mp4"</span>] =&gt; <span class="hljs-string">"video/mp4"</span>
    [.., .. <span class="hljs-string">".mpv"</span>] =&gt; <span class="hljs-string">"video/mpv"</span>
    [.., .. <span class="hljs-string">".mpeg"</span>] =&gt; <span class="hljs-string">"video/mpeg"</span>
    [.., .. <span class="hljs-string">".mkv"</span>] =&gt; <span class="hljs-string">"video/x-matroska"</span>
    _ =&gt; <span class="hljs-string">"appliaction/octet-stream"</span>
  }
  conn
  ..<span class="hljs-title function_ invoke__">send_response</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"OK"</span>, extra_headers={ <span class="hljs-string">"Content-Type"</span>: content_type })
  ..<span class="hljs-title function_ invoke__">write_reader</span>(file)
  ..<span class="hljs-title function_ invoke__">end_response</span>()
}
</code></pre>
<p>è¿™é‡Œï¼Œåœ¨ HTTP å›å¤ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®æ–‡ä»¶çš„åç¼€åå¡«å…¥äº†ä¸åŒçš„ <code>Content-Type</code> å­—æ®µã€‚
è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å›¾ç‰‡/è§†é¢‘/HTML æ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥é¢„è§ˆæ–‡ä»¶çš„å†…å®¹ï¼Œ
è€Œä¸éœ€è¦å…ˆä¸‹è½½æ–‡ä»¶å†åœ¨æœ¬åœ°æ‰“å¼€ã€‚
å¯¹äºå…¶ä»–æ–‡ä»¶ï¼Œ<code>Content-Type</code> å­—æ®µçš„å€¼ä¼šæ˜¯ <code>application/octet-stream</code>ï¼Œ
è¿™ä¼šè®©æµè§ˆå™¨è‡ªåŠ¨å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<p>æˆ‘ä»¬ä¾ç„¶ä½¿ç”¨ <code>conn.send_response</code> æ¥ç”¨æˆ·å‘é€å›å¤ã€‚
é€šè¿‡ <code>extra_headers</code> å­—æ®µæˆ‘ä»¬å¯ä»¥åœ¨å›å¤ä¸­åŠ å…¥é¢å¤–çš„ HTTP headerã€‚
å›å¤çš„ä¸»ä½“åˆ™æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚
è¿™é‡Œï¼Œ<code>conn.write_reader</code> ä¼šè‡ªåŠ¨æµå¼åœ°æŠŠ <code>file</code> çš„å†…å®¹å‘é€ç»™ç”¨æˆ·ã€‚
å‡è®¾ç”¨æˆ·è¯·æ±‚äº†ä¸€ä¸ªè§†é¢‘æ–‡ä»¶å¹¶åœ¨æµè§ˆå™¨ä¸­æ’­æ”¾ï¼Œ
å¦‚æœæˆ‘ä»¬å…ˆæŠŠæ•´ä¸ªè§†é¢‘æ–‡ä»¶è¯»åˆ°å†…å­˜ä¸­å†å‘é€ç»™ç”¨æˆ·ï¼Œ
é‚£ä¹ˆç”¨æˆ·éœ€è¦ç­‰æœåŠ¡å™¨è¯»å…¥æ•´ä¸ªè§†é¢‘æ–‡ä»¶ä¹‹åæ‰èƒ½æ”¶åˆ°å›å¤ï¼ŒæœåŠ¡å™¨çš„å“åº”é€Ÿåº¦ä¼šå˜æ…¢ã€‚
è€Œä¸”ï¼Œè¯»å…¥æ•´ä¸ªè§†é¢‘æ–‡ä»¶ä¼šæµªè´¹å¤§é‡çš„å†…å­˜ã€‚
è€Œé€šè¿‡ä½¿ç”¨ <code>write_reader</code>ï¼Œ<code>@http.ServerConnection</code> ä¼šè‡ªåŠ¨æŠŠæ–‡ä»¶å†…å®¹åˆ‡æˆå°å—åˆ†æ®µå‘é€ï¼Œ
ç”¨æˆ·é©¬ä¸Šå°±èƒ½çœ‹åˆ°è§†é¢‘å¼€å§‹æ’­æ”¾ï¼Œå ç”¨çš„å†…å­˜ä¹Ÿä¼šå¤§å¤§å‡å°‘ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å®ç°æ˜¾ç¤ºæ–‡ä»¶å¤¹çš„å‡½æ•° <code>serve_directory</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">serve_directory</span>(
  conn : @http.ServerConnection,
  dir : @fs.Directory,
  path~ : <span class="hljs-type">String</span>,
) <span class="hljs-punctuation">-&gt;</span> Unit {
  <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">files</span> = dir.<span class="hljs-title function_ invoke__">read_all</span>()
  files.<span class="hljs-title function_ invoke__">sort</span>()
  conn
  ..<span class="hljs-title function_ invoke__">send_response</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"OK"</span>, extra_headers={ <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/html"</span> })
  ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;"</span>)
  ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;h1&gt;\{path}&lt;/h1&gt;\n"</span>)
  ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;div style=\"margin: 1em; font-size: 15pt\"&gt;\n"</span>)
  ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;a href=\"\{path}?download_zip\"&gt;download as zip&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\n"</span>)
  <span class="hljs-keyword">if</span> path[:-<span class="hljs-number">1</span>].<span class="hljs-title function_ invoke__">rev_find</span>(<span class="hljs-string">"/"</span>) is <span class="hljs-title function_ invoke__">Some</span>(index) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">parent</span> = <span class="hljs-keyword">if</span> index == <span class="hljs-number">0</span> { <span class="hljs-string">"/"</span> } <span class="hljs-keyword">else</span> { path[:index].<span class="hljs-title function_ invoke__">to_string</span>() }
    conn.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;a href=\"\{parent}\"&gt;..&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;\n"</span>)
  }
  <span class="hljs-keyword">for</span> <span class="hljs-variable">file</span> <span class="hljs-keyword">in</span> files {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file_url</span> = <span class="hljs-keyword">if</span> path[path.<span class="hljs-title function_ invoke__">length</span>() - <span class="hljs-number">1</span>] != <span class="hljs-string">'/'</span> {
      <span class="hljs-string">"\{path}/\{file}"</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-string">"\{path}\{file}"</span>
    }
    conn.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;a href=\"\{file_url}\"&gt;\{file}&lt;/a&gt;&lt;br/&gt;\n"</span>)
  }
  conn
  ..<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">"&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;"</span>)
  ..<span class="hljs-title function_ invoke__">end_response</span>()
}
</code></pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆè¯»å…¥æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶åˆ—è¡¨å¹¶å¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ ¹æ®æ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œæ‹¼å‡ºä¸€æ®µ HTML é¡µé¢ã€‚
HTML é¡µé¢çš„ä¸»ä½“å†…å®¹æ˜¯æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œ
æ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªé“¾æ¥ï¼Œä¸Šé¢æ˜¾ç¤ºç€æ–‡ä»¶åï¼Œç‚¹å‡»é“¾æ¥å°±èƒ½è·³è½¬åˆ°å¯¹åº”çš„æ–‡ä»¶ã€‚
è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ HTML çš„ <code>&lt;a&gt;</code> å…ƒç´ æ¥å®ç°è¿™ä¸€ç‚¹ã€‚
å¦‚æœæ–‡ä»¶å¤¹ä¸æ˜¯æ ¹ç›®å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨é¡µé¢å¼€å¤´æ”¾ä¸Šä¸€ä¸ªç‰¹æ®Šçš„é“¾æ¥ <code>..</code>ï¼Œç‚¹å‡»å®ƒä¼šè·³è½¬åˆ°ä¸Šä¸€çº§ç›®å½•ã€‚
æ­¤å¤–ï¼Œé¡µé¢é‡Œè¿˜æœ‰ä¸€ä¸ª <code>download as zip</code> çš„é“¾æ¥ï¼Œ
ç‚¹å‡»è¿™ä¸ªé“¾æ¥å°±èƒ½æŠŠå½“å‰æ–‡ä»¶å¤¹æ‰“åŒ…æˆ <code>zip</code> åä¸‹è½½ã€‚</p>
<h3 data-id="heading-5">å®ç°å°†æ–‡ä»¶å¤¹æ‰“åŒ…æˆ zip çš„åŠŸèƒ½</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°å°†æ–‡ä»¶å¤¹æ‰“åŒ…æˆ <code>zip</code> æä¾›ç»™ç”¨æˆ·çš„åŠŸèƒ½ã€‚
è¿™é‡Œï¼Œç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç³»ç»Ÿçš„ <code>zip</code> å‘½ä»¤ã€‚
<code>serve_zip</code> å‡½æ•°çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">serve_zip</span>(
  conn : @http.ServerConnection,
  path : <span class="hljs-type">String</span>,
) <span class="hljs-punctuation">-&gt;</span> Unit {
  <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">full_path</span> = @fs.<span class="hljs-title function_ invoke__">realpath</span>(path)
  <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">zip_name</span> = <span class="hljs-keyword">if</span> full_path[:].<span class="hljs-title function_ invoke__">rev_find</span>(<span class="hljs-string">"/"</span>) is <span class="hljs-title function_ invoke__">Some</span>(i) {
    full_path[i+<span class="hljs-number">1</span>:].<span class="hljs-title function_ invoke__">to_string</span>()
  } <span class="hljs-keyword">else</span> {
    path
  }
  @<span class="hljs-keyword">async</span>.<span class="hljs-title function_ invoke__">with_task_group</span>(<span class="hljs-title function_ invoke__">fn</span>(group) {
    <span class="hljs-keyword">let</span> (we_read_from_zip, zip_write_to_us) = @process.<span class="hljs-title function_ invoke__">read_from_process</span>()
    defer we_read_from_zip.<span class="hljs-title function_ invoke__">close</span>()
    group.<span class="hljs-title function_ invoke__">spawn_bg</span>(<span class="hljs-title function_ invoke__">fn</span>() {
      <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">exit_code</span> = @process.<span class="hljs-title function_ invoke__">run</span>(
        <span class="hljs-string">"zip"</span>,
        [ <span class="hljs-string">"-q"</span>, <span class="hljs-string">"-r"</span>, <span class="hljs-string">"-"</span>, path ],
        stdout=zip_write_to_us,
      )
      <span class="hljs-keyword">if</span> exit_code != <span class="hljs-number">0</span> {
        <span class="hljs-title function_ invoke__">fail</span>(<span class="hljs-string">"zip failed with exit code \{exit_code}"</span>)
      }
    })
    conn
    ..<span class="hljs-title function_ invoke__">send_response</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"OK"</span>, extra_headers={
      <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/octet-stream"</span>,
      <span class="hljs-string">"Content-Disposition"</span>: <span class="hljs-string">"filename=\{zip_name}.zip"</span>,
    })
    ..<span class="hljs-title function_ invoke__">write_reader</span>(we_read_from_zip)
    ..<span class="hljs-title function_ invoke__">end_response</span>()
  })
}
</code></pre>
<p>åœ¨ <code>serve_zip</code> å‡½æ•°çš„å¼€å¤´ï¼Œæˆ‘ä»¬é¦–å…ˆè®¡ç®—äº†ç”¨æˆ·ä¸‹è½½çš„ <code>.zip</code> æ–‡ä»¶çš„æ–‡ä»¶åã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@async.with_task_group</code> åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä»»åŠ¡ç»„ã€‚
ä»»åŠ¡ç»„æ˜¯ <code>moonbitlang/async</code> ä¸­ç”¨äºç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒæ„é€ ï¼Œ
æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡éƒ½å¿…é¡»åœ¨ä¸€ä¸ªä»»åŠ¡ç»„ä¸­åˆ›å»ºã€‚
åœ¨ä»‹ç» <code>with_task_group</code> ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹ <code>serve_zip</code> å‰©ä¸‹çš„å†…å®¹ã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>@process.read_from_process()</code> åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶ç®¡é“ï¼Œ
ä»ç®¡é“çš„ä¸€ç«¯å†™å…¥çš„æ•°æ®å¯ä»¥ä»å¦ä¸€ä¾§è¯»å‡ºï¼Œå› æ­¤å®ƒå¯ä»¥ç”¨äºè¯»å–ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºã€‚
è¿™é‡Œæˆ‘ä»¬æŠŠç®¡é“çš„å†™å…¥ç«¯ <code>zip_write_to_us</code> ä¼šè¢«æä¾›ç»™ <code>zip</code> å‘½ä»¤ï¼Œç”¨äºå†™å…¥å‹ç¼©çš„ç»“æœã€‚
è€Œæˆ‘ä»¬å°†ä»ç®¡é“çš„è¯»å…¥ç«¯ <code>we_read_from_zip</code> è¯»å– <code>zip</code> å‘½ä»¤çš„è¾“å‡ºï¼Œå¹¶å°†å…¶å‘é€ç»™ç”¨æˆ·ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ–°çš„ä»»åŠ¡ç»„ä¸­åˆ›å»ºäº†ä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡ï¼Œ
å¹¶åœ¨å…¶ä¸­ä½¿ç”¨ <code>@process.run</code> è¿è¡Œ <code>zip</code> å‘½ä»¤ã€‚
<code>@process</code> æ˜¯ <code>moonbitlang/async/process</code> çš„åˆ«åï¼Œ
æ˜¯ <code>moonbitlang/async</code> ä¸­æä¾›è°ƒç”¨å¤–éƒ¨è¿›ç¨‹åŠŸèƒ½çš„åŒ…ã€‚
æˆ‘ä»¬å‘ <code>zip</code> ä¼ é€’çš„å‚æ•°çš„æ„ä¹‰æ˜¯ï¼š</p>
<ul>
<li><code>-q</code>ï¼šä¸è¦è¾“å‡ºæ—¥å¿—ä¿¡æ¯</li>
<li><code>-r</code>ï¼šé€’å½’å‹ç¼©æ•´ä¸ªæ–‡ä»¶å¤¹</li>
<li><code>-</code>ï¼šæŠŠç»“æœå†™å…¥åˆ° <code>stdout</code></li>
<li><code>path</code>ï¼šè¦å‹ç¼©çš„æ–‡ä»¶å¤¹</li>
</ul>
<p>åœ¨è°ƒç”¨ <code>@process.run</code> æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ <code>stdout=zip_write_to_us</code>ï¼Œ
æŠŠ <code>zip</code> å‘½ä»¤çš„ <code>stdout</code> é‡å®šå‘åˆ°äº† <code>zip_write_to_us</code>ï¼Œä»¥è·å– <code>zip</code> çš„è¾“å‡ºã€‚
ç›¸æ¯”åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè¿™ä¹ˆåšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å’Œ <code>zip</code> é—´çš„æ•°æ®ä¼ é€’å®Œå…¨åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸éœ€è¦è¿›è¡Œä½æ•ˆçš„ç£ç›˜ IO</li>
<li><code>zip</code> ä¸€è¾¹å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹åƒç”¨æˆ·å‘é€å·²ç»å‹ç¼©å¥½çš„éƒ¨åˆ†ï¼Œæ•ˆç‡æ›´é«˜</li>
</ul>
<p><code>@process.run</code> ä¼šç­‰å¾… <code>zip</code> ç»“æŸè¿è¡Œï¼Œå¹¶è¿”å› <code>zip</code> å‘½ä»¤çš„çŠ¶æ€ç ã€‚
å¦‚æœ <code>zip</code> çš„è¿”å›å€¼ä¸æ˜¯ <code>0</code>ï¼Œè¯´æ˜ <code>zip</code> å¤±è´¥äº†ï¼Œæˆ‘ä»¬æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>åœ¨è°ƒç”¨ <code>zip</code> çš„åŒæ—¶ï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ <code>conn.send_response(..)</code> å‘ç”¨æˆ·å‘é€å›å¤ä¿¡æ¯ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨ <code>conn.write_reader(we_read_from_zip)</code> æŠŠ <code>zip</code> çš„è¾“å‡ºå‘é€ç»™ç”¨æˆ·ã€‚
<code>Content-Disposition</code> è¿™ä¸€ HTTP header èƒ½è®©æˆ‘ä»¬æŒ‡å®šç”¨æˆ·ä¸‹è½½çš„ <code>zip</code> æ–‡ä»¶çš„åå­—ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œä¸€åˆ‡çœ‹ä¸Šå»éƒ½å¾ˆåˆç†ã€‚
ä½†ä¸ºä»€ä¹ˆè¿™é‡Œè¦åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ç»„å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æä¾›åˆ›å»ºæ–°ä»»åŠ¡çš„ API å‘¢ï¼Ÿ
åœ¨ç¼–å†™å¼‚æ­¥ç¨‹åºæ—¶ï¼Œæœ‰ä¸€ä¸ªç°è±¡ï¼š
å†™å‡ºåœ¨æ­£ç¡®æ—¶è¡Œä¸ºæ­£ç¡®çš„ç¨‹åºæ¯”è¾ƒå®¹æ˜“ï¼Œä½†å†™å‡ºåœ¨å‡ºé”™æ—¶ä¾ç„¶è¡Œä¸ºæ­£ç¡®çš„ç¨‹åºå¾ˆéš¾ã€‚
æ¯”å¦‚ï¼Œå¯¹äº <code>serve_zip</code> è¿™ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>å¦‚æœ <code>zip</code> å‘½ä»¤å¤±è´¥äº†æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠï¼Ÿ</li>
<li>å¦‚æœæ•°æ®å‘é€åˆ°ä¸€åŠå‘ç”Ÿäº†ç½‘ç»œé”™è¯¯ï¼Œæˆ–è€…ç”¨æˆ·å…³é—­äº†è¿æ¥ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</li>
</ul>
<p>å¦‚æœ <code>zip</code> å‘½ä»¤å¤±è´¥äº†ï¼Œé‚£ä¹ˆæ•´ä¸ª <code>serve_zip</code> å‡½æ•°ä¹Ÿåº”è¯¥å¤±è´¥ã€‚
ç”±äºæ­¤æ—¶ç”¨æˆ·å¯èƒ½å·²ç»æ”¶åˆ°äº†ä¸€éƒ¨åˆ†ä¸å®Œæ•´çš„æ•°æ®ï¼Œæˆ‘ä»¬å¾ˆéš¾å†æŠŠè¿æ¥æ¢å¤åˆ°æ­£å¸¸çŠ¶æ€ï¼Œ
åªèƒ½å…³é—­æŠŠæ•´ä¸ªè¿æ¥ã€‚
å¦‚æœæ•°æ®å‘é€åˆ°ä¸€åŠå‘ç”Ÿäº†ç½‘ç»œé”™è¯¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åœæ­¢ <code>zip</code> çš„è¿è¡Œã€‚
å› ä¸ºæ­¤æ—¶ <code>zip</code> çš„ç»“æœå·²ç»æ²¡æœ‰ç”¨äº†ï¼Œè®©å®ƒç»§ç»­è¿è¡Œåªæ˜¯åœ¨æµªè´¹èµ„æºã€‚
è€Œä¸”åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬ä¸å†è¯»å– <code>zip</code> çš„è¾“å‡ºï¼Œå’Œ <code>zip</code> é€šä¿¡ç”¨çš„ç®¡é“å¯èƒ½ä¼šè¢«å¡«æ»¡ï¼Œ
æ­¤æ—¶ï¼Œ<code>zip</code> å¯èƒ½ä¼šæ°¸è¿œé˜»å¡åœ¨å‘ç®¡é“å†™å…¥çš„æ“ä½œä¸Šï¼Œå˜æˆä¸€ä¸ªåƒµå°¸è¿›ç¨‹ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°å†™ä»»ä½•é”™è¯¯å¤„ç†é€»è¾‘ï¼Œ
ä½†æ˜¯ï¼Œåœ¨å‡ºç°ä¸Šè¿°é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬çš„ç¨‹åºçš„è¡Œä¸ºå´æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œ
è€Œé­”æ³•å°±åœ¨äº <code>@async.with_task_group</code> çš„è¯­ä¹‰ï¼ŒåŠå…¶èƒŒåçš„ <strong>ç»“æ„åŒ–å¹¶å‘</strong> èŒƒå¼ã€‚
<code>@async.with_task_group(f)</code> çš„å¤§è‡´è¯­ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ç»„ <code>group</code>ï¼Œå¹¶è¿è¡Œ <code>f(group)</code></li>
<li><code>f</code> å¯ä»¥é€šè¿‡ <code>group.spawn_bg(..)</code> ç­‰å‡½æ•°åœ¨ <code>group</code> ä¸­åˆ›å»ºæ–°çš„ä»»åŠ¡</li>
<li>åªæœ‰å½“ <code>group</code> ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæ—¶ï¼Œ<code>with_task_group</code> æ‰ä¼šè¿”å›</li>
<li><strong>å¦‚æœ <code>group</code> ä¸­çš„ä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥äº†ï¼Œé‚£ä¹ˆ <code>with_task_group</code> ä¹Ÿä¼šå¤±è´¥ï¼Œ<code>group</code> ä¸­çš„å…¶ä»–ä»»åŠ¡ä¼šè¢«è‡ªåŠ¨å–æ¶ˆ</strong></li>
</ul>
<p>è¿™é‡Œçš„æœ€åä¸€æ¡ï¼Œå°±æ˜¯ä¿è¯æ­£ç¡®é”™è¯¯å¤„ç†çš„è¡Œä¸ºçš„å…³é”®ï¼š</p>
<ul>
<li>å¦‚æœè°ƒç”¨ <code>zip</code> çš„ä»»åŠ¡å¤±è´¥äº†ï¼Œé‚£ä¹ˆé”™è¯¯ä¼šä¼ æ’­åˆ°æ•´ä¸ªä»»åŠ¡ç»„ã€‚
å‘ç”¨æˆ·å‘é€å›å¤çš„ä¸»ä»»åŠ¡ä¼šè‡ªåŠ¨è¢«å–æ¶ˆï¼Œ
ç„¶åé”™è¯¯ä¼šé€šè¿‡ <code>with_task_group</code> è‡ªåŠ¨å‘ä¸Šä¼ æ’­ï¼Œå…³é—­è¿æ¥</li>
<li>å¦‚æœå‘é€å›å¤çš„ä¸»ä»»åŠ¡å¤±è´¥äº†ï¼Œé”™è¯¯åŒæ ·ä¼šä¼ æ’­åˆ°æ•´ä¸ªä»»åŠ¡ç»„ã€‚
æ­¤æ—¶ <code>@process.run</code> ä¼šè¢«å–æ¶ˆï¼Œæ­¤æ—¶å®ƒä¼šè‡ªåŠ¨å‘ <code>zip</code> å‘é€ç»ˆæ­¢ä¿¡å·ï¼Œç»“æŸ <code>zip</code> çš„è¿è¡Œ</li>
</ul>
<p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨ <code>moonbitlang/async</code> ç¼–å†™å¼‚æ­¥ç¨‹åºæ—¶ï¼Œ
åªéœ€è¦æ ¹æ®ç¨‹åºçš„ç»“æ„åœ¨é€‚å½“çš„ä½ç½®æ’å…¥ä»»åŠ¡ç»„ï¼Œ
å‰©ä¸‹çš„é”™è¯¯å¤„ç†çš„æ‰€æœ‰ç»†èŠ‚ï¼Œéƒ½ä¼šç”± <code>with_task_group</code> è‡ªåŠ¨è§£å†³ã€‚
è¿™æ­£æ˜¯ <code>moonbitlang/async</code> ä½¿ç”¨çš„ç»“æ„åŒ–å¹¶å‘èŒƒå¼çš„å¨åŠ›ï¼šé€šè¿‡ç¼–ç¨‹èŒƒå¼çš„å¼•å¯¼ï¼Œ
å®ƒèƒ½è®©æˆ‘ä»¬å†™å‡ºç»“æ„æ›´æ¸…æ™°çš„å¼‚æ­¥ç¨‹åºï¼Œå¹¶ä»¥ä¸€ç§æ¶¦ç‰©ç»†æ— å£°çš„æ–¹å¼ï¼Œ
è®©å¼‚æ­¥ç¨‹åºåœ¨å‡ºé”™æ—¶ä¹Ÿèƒ½æœ‰æ­£ç¡®çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-6">è®©æœåŠ¡å™¨è·‘èµ·æ¥</h3>
<p>è‡³æ­¤ï¼Œæ•´ä¸ª HTTP æœåŠ¡å™¨çš„æ‰€æœ‰å†…å®¹éƒ½å·²å®ç°å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œè¿™ä¸ªæœåŠ¡å™¨äº†ã€‚
MoonBit å¯¹å¼‚æ­¥ä»£ç æœ‰åŸç”Ÿæ”¯æŒï¼Œå¯ä»¥ç›´æ¥ç”¨ <code>async fn main</code> å®šä¹‰å¼‚æ­¥ç¨‹åºçš„å…¥å£ï¼Œ
æˆ–æ˜¯ç”¨ <code>async test</code> ç›´æ¥æµ‹è¯•å¼‚æ­¥ä»£ç ã€‚
è¿™é‡Œï¼Œæˆ‘ä»¬è®© HTTP æœåŠ¡å™¨è¿è¡Œåœ¨å½“å‰ç›®å½•ã€å‘ç”¨æˆ·æä¾›å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¹¶è®©å®ƒç›‘å¬ 8000 ç«¯å£ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> test {
  <span class="hljs-title function_ invoke__">server_main</span>(path=<span class="hljs-string">"."</span>, port=<span class="hljs-number">8000</span>)
}
</code></pre>
<p>é€šè¿‡ <code>moon test moonbit_http_server.mbt.md</code> è¿è¡Œè¿™ä»½æ–‡æ¡£çš„æºç ï¼Œ
å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>http://127.0.0.1:8000</code>ï¼Œå³å¯ä½¿ç”¨æˆ‘ä»¬å®ç°çš„æ–‡ä»¶æœåŠ¡å™¨ã€‚</p>
<p>å…³äº <code>moonbitlang/async</code> çš„æ›´å¤šåŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒå®ƒçš„
<a href="https://link.juejin.cn?target=https%3A%2F%2Fmooncakes.io%2Fdocs%2Fmoonbitlang%2Fasync" target="_blank" title="https://mooncakes.io/docs/moonbitlang/async" ref="nofollow noopener noreferrer">API æ–‡æ¡£</a>
å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmoonbitlang%2Fasync" target="_blank" title="https://github.com/moonbitlang/async" ref="nofollow noopener noreferrer">GitHub repo</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MoonBit Pearls Vol.14ï¼šå“ˆå¸Œè¡¨é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571594817224327219</link>    <guid>https://juejin.cn/post/7571594817224327219</guid>    <pubDate>2025-11-12T10:22:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817224327219" data-draft-id="7571655312798695450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MoonBit Pearls Vol.14ï¼šå“ˆå¸Œè¡¨é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,ç®—æ³•,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-11-12T10:22:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MoonBit"/> <meta itemprop="url" content="https://juejin.cn/user/3609050528885565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MoonBit Pearls Vol.14ï¼šå“ˆå¸Œè¡¨é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3609050528885565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MoonBit
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:22:42.000Z" title="Wed Nov 12 2025 10:22:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è°ä¸å–œæ¬¢å“ˆå¸Œè¡¨å‘¢ï¼Ÿ</p>
<p>å®ƒèƒ½ä»¥å¿«å¦‚é—ªç”µçš„å¹³å‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> è®¿é—®é€Ÿåº¦<sup>*</sup> è”ç³»é”®å€¼å¯¹ï¼Œ
è€Œä½ åªéœ€è¦æä¾›ä¸¤æ ·ä¸œè¥¿ï¼šä¸€ä¸ªæ¯”è¾ƒç›¸ç­‰çš„å‡½æ•°å’Œä¸€ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚
è¿™ä¸€ç‹¬ç‰¹çš„æ€§è´¨ä½¿å¾—å“ˆå¸Œè¡¨åœ¨æ•ˆç‡ä¸Šå¸¸å¸¸ä¼˜äºå…¶ä»–å…³è”æ€§æ•°æ®ç»“æ„ï¼ˆå¦‚æœç´¢æ ‘ï¼‰ã€‚
å› æ­¤ï¼Œå“ˆå¸Œè¡¨ç°å·²æˆä¸ºç¼–ç¨‹è¯­è¨€ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚</p>
<p>ä» Python ä¸­å¹³å¹³æ— å¥‡çš„ <code>dict</code>ï¼Œåˆ°æ•°æ®åº“å’Œåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œ
å†åˆ° JavaScript å¯¹è±¡ï¼Œå“ˆå¸Œè¡¨æ— å¤„ä¸åœ¨ã€‚
å®ƒä»¬æ”¯æ’‘ç€æ•°æ®åº“çš„ç´¢å¼•ç³»ç»Ÿï¼Œå®ç°äº†é«˜æ•ˆçš„ç¼“å­˜æœºåˆ¶ï¼Œ
å¹¶æ„æˆäº† Web æ¡†æ¶è¯·æ±‚è·¯ç”±çš„éª¨å¹²ã€‚
ç°ä»£ç¼–è¯‘å™¨ç”¨å®ƒä»¬æ¥ç®¡ç†ç¬¦å·è¡¨ï¼Œæ“ä½œç³»ç»Ÿé å®ƒä»¬æ¥è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼Œ
å‡ ä¹æ¯ä¸€ä¸ª Web åº”ç”¨éƒ½ç”¨å®ƒä»¬æ¥ç»´æŠ¤ç”¨æˆ·çŠ¶æ€ã€‚</p>
<p>æ— è®ºä½ æ˜¯åœ¨æ„å»º Web æœåŠ¡å™¨ã€è§£æ JSONï¼Œ
è¿˜æ˜¯åœ¨å¤„ç†é…ç½®æ–‡ä»¶ï¼Œäº¦æˆ–åªæ˜¯ç»Ÿè®¡è¯é¢‘ï¼Œ
ä½ éƒ½å¾ˆå¯èƒ½ä¼šç”¨åˆ°å“ˆå¸Œè¡¨ã€‚
å®ƒä»¬å·²ç»å˜å¾—å¦‚æ­¤åŸºç¡€ï¼Œä»¥è‡³äºè®¸å¤šå¼€å‘è€…éƒ½å°†å®ƒä»¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> çš„é­”æ³•è§†ä¸ºç†æ‰€å½“ç„¶â€”â€”
<em>ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œè¿™ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> çš„ç†æ‰€å½“ç„¶<sup>*</sup>åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</em></p>
<h2 data-id="heading-0">å“ˆå¸Œè¡¨çš„å†…éƒ¨æ„é€ </h2>
<p>ä¸€ä¸ªå“ˆå¸Œè¡¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š
ä¸€ä¸ªæ¡¶æ•°ç»„å’Œä¸€ä¸ªå“ˆå¸Œå‡½æ•°ã€‚</p>
<pre><code class="hljs language-mbt" lang="mbt">struct MyHashMap[K, V] {
  buckets : Array[Bucket[K, V]]
  hash_fn : (K) -&gt; UInt
}
</code></pre>
<p><strong>æ¡¶æ•°ç»„</strong>åŒ…å«äº†ä¸€ç³»åˆ—æ‰€è°“çš„"æ¡¶"ã€‚
æ¯ä¸ªæ¡¶éƒ½å­˜å‚¨ç€æˆ‘ä»¬æ’å…¥çš„ä¸€äº›æ•°æ®ã€‚</p>
<p><strong>å“ˆå¸Œå‡½æ•°</strong> <code>H</code> ä¼šä¸ºæ¯ä¸ªé”®ï¼ˆkeyï¼‰å…³è”ä¸€ä¸ªæ•´æ•°ã€‚
è¿™ä¸ªæ•´æ•°è¢«ç”¨æ¥åœ¨æ¡¶æ•°ç»„ä¸­å¯»æ‰¾ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼Œä»¥å­˜å‚¨æˆ‘ä»¬çš„å€¼ã€‚
è¿™ä¸ªç´¢å¼•é€šå¸¸æ˜¯é€šè¿‡å°†è¯¥æ•´æ•°ä¸æ¡¶æ•°ç»„çš„å¤§å°è¿›è¡Œå–æ¨¡è¿ç®—å¾—å‡ºçš„ï¼Œ
å³ <code>index = H(key) % bucket_array_size</code>ã€‚
å“ˆå¸Œè¡¨æœŸæœ›è¿™ä¸ªå‡½æ•°æ»¡è¶³ä¸¤ä¸ªé‡è¦æ€§è´¨ï¼š</p>
<ol>
<li>
<p>ç›¸åŒçš„é”®æ€»æ˜¯è¢«è½¬æ¢æˆç›¸åŒçš„æ•°å­—ã€‚å³ï¼Œè‹¥ <code>a == b</code>ï¼Œåˆ™ <code>H(a) == H(b)</code>ã€‚</p>
<p>è¿™ä¸ªæ€§è´¨ç¡®ä¿äº†ï¼Œ
æˆ‘ä»¬ç”¨æŸä¸ªé”®å­˜å…¥æ•°æ®åï¼Œ
ä¸‹æ¬¡è¿˜èƒ½ç”¨åŒä¸€ä¸ªé”®å‡†ç¡®åœ°æ‰¾åˆ°åŸæ¥çš„ä½ç½®ã€‚</p>
</li>
<li>
<p>å¯¹äºä¸åŒçš„é”®ï¼Œå“ˆå¸Œå‡½æ•°äº§ç”Ÿçš„ç»“æœä¼šå°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒåœ¨æ‰€æœ‰å¯èƒ½çš„ç»“æœç©ºé—´ä¸­ã€‚</p>
<p>è¿™ä¸ªæ€§è´¨ç¡®ä¿äº†ä¸åŒçš„é”®ä¼šå¤§æ¦‚ç‡è¢«è½¬æ¢åˆ°ä¸åŒçš„æ•´æ•°å€¼ï¼Œ
å› æ­¤ä¸å¤ªå¯èƒ½è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œ
ä»è€Œä¿è¯äº†æ£€ç´¢çš„æ•ˆç‡ã€‚</p>
</li>
</ol>
<p>ç°åœ¨ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœä¸¤ä¸ªé”®è¢«æ˜ å°„åˆ°äº†åŒä¸€ä¸ªæ¡¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ
é‚£æˆ‘ä»¬å°±ä¸å¾—ä¸æå“ˆå¸Œå†²çªäº†ã€‚</p>
<h2 data-id="heading-1">å“ˆå¸Œå†²çª</h2>
<p>å½“ä¸¤ä¸ªé”®çš„å“ˆå¸Œå€¼ç›¸åŒæ—¶ï¼Œ
æˆ–è€…æ›´å¹¿ä¹‰åœ°è¯´ï¼Œå½“ä¸¤ä¸ªé”®è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶æ—¶ï¼Œ
å°±å‘ç”Ÿäº†å“ˆå¸Œå†²çªã€‚</p>
<p>ç”±äºå“ˆå¸Œè¡¨çš„ä¸€åˆ‡å†³ç­–éƒ½åŸºäºå“ˆå¸Œå€¼ï¼ˆæˆ–æ¡¶ç´¢å¼•ï¼‰ï¼Œ
è¿™ä¸¤ä¸ªé”®åœ¨å“ˆå¸Œè¡¨çœ‹æ¥å°±å˜å¾—ä¸€æ¨¡ä¸€æ ·äº†â€”â€”
å®ƒä»¬åº”è¯¥è¢«æ”¾åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œ
ä½†å®ƒä»¬æœ¬èº«åˆå¹¶ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ä¸èƒ½äº’ç›¸è¦†ç›–ã€‚</p>
<p>å“ˆå¸Œè¡¨çš„è®¾è®¡è€…ä»¬æœ‰å‡ ç§ç­–ç•¥æ¥å¤„ç†å†²çªï¼Œ
è¿™äº›ç­–ç•¥å¤§è‡´å¯åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>
<p><strong>é“¾åœ°å€æ³•</strong>å°†è¿™äº›å†²çªçš„é”®æ”¾åœ¨åŒä¸€ä¸ªæ¡¶é‡Œã€‚
ç°åœ¨ï¼Œæ¯ä¸ªæ¡¶å¯èƒ½åŒ…å«å¤šä¸ªé”®çš„æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚
å½“æŸ¥æ‰¾ä¸€ä¸ªå†²çªçš„é”®æ—¶ï¼Œ
éœ€è¦éå†è¯¥æ¡¶ä¸­çš„æ‰€æœ‰é”®ã€‚</p>
<pre><code class="hljs language-mbt" lang="mbt">struct ChainingBucket[K, V] {
  values : Array[(K, V)]
}
</code></pre>
<p>Java çš„ <code>HashMap</code> å°±æ˜¯è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªè‘—åä¾‹å­ã€‚</p>
</li>
<li>
<p><strong>å¼€æ”¾åœ°å€æ³•</strong>ä»ç„¶åšæŒæ¯ä¸ªæ¡¶åªæ”¾ä¸€ä¸ªé”®ï¼Œ
ä½†å½“é”®å‘ç”Ÿå†²çªæ—¶ï¼Œä¼šä½¿ç”¨ä¸€ç§ç‹¬ç«‹çš„ç­–ç•¥æ¥é€‰æ‹©å¦ä¸€ä¸ªæ¡¶çš„ç´¢å¼•ã€‚
å½“æŸ¥æ‰¾ä¸€ä¸ªé”®æ—¶ï¼Œä¼šæŒ‰ç…§è¿™ç§ç­–ç•¥çš„é¡ºåºè¿›è¡Œæœç´¢ï¼Œ
ç›´åˆ°å¯ä»¥ç¡®å®šæ²¡æœ‰æ›´å¤šå¯èƒ½çš„åŒ¹é…é¡¹ä¸ºæ­¢ã€‚</p>
<pre><code class="hljs language-mbt" lang="mbt">struct OpenAddressBucket[K, V] {
  hash: Int
  key: K
  value: V
}
</code></pre>
<p>MoonBit æ ‡å‡†åº“ä¸­çš„ <code>Map</code> å°±æ˜¯è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
</li>
</ul>
<p>æ— è®ºå“ªç§æƒ…å†µï¼Œå½“å“ˆå¸Œå†²çªå‘ç”Ÿæ—¶ï¼Œ
æˆ‘ä»¬éƒ½åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½éå†æˆ‘ä»¬æ‰¾åˆ°çš„é‚£ä¸ªæ¡¶å¯¹åº”çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œ
æ¥ç¡®å®šæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾çš„é”®æ˜¯å¦å­˜åœ¨ã€‚</p>
<p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä½¿ç”¨é“¾åœ°å€æ³•çš„å“ˆå¸Œè¡¨ä¸ºä¾‹ã€‚å“ˆå¸Œè¡¨çš„å®ç°çœ‹èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-mbt" lang="mbt">typealias ChainingBucket as Bucket

/// æœç´¢é”®å­˜å‚¨çš„ä½ç½®ã€‚
///
/// è¿”å› `(æ¡¶ç´¢å¼•, é”®åœ¨æ¡¶ä¸­çš„ç´¢å¼•?, å®Œæˆçš„æœç´¢æ¬¡æ•°)`
fn[K : Eq, V] search(self : MyHashMap[K, V], key : K) -&gt; (Int, Int?, Int) {
  let hash = (self.hash_fn)(key)
  let bucket = (hash % self.buckets.length().reinterpret_as_uint()).reinterpret_as_int()
  // ç»“æœ
  let mut found_index = None
  let mut n_searches = 0
  // éå†æ¡¶ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚
  for index, keyvalue in self.buckets[bucket].values {
    n_searches += 1
    if keyvalue.0 == key { // æ£€æŸ¥é”®æ˜¯å¦åŒ¹é…ã€‚
      found_index = Some(index)
      break
    }
  }
  return (bucket, found_index, n_searches)
}

/// æ’å…¥ä¸€ä¸ªæ–°çš„é”®å€¼å¯¹ã€‚
///
/// è¿”å›å®Œæˆçš„æœç´¢æ¬¡æ•°ã€‚
fn[K : Eq, V] insert(self : MyHashMap[K, V], key : K, value : V) -&gt; Int {
  let (bucket, index, n_searches) = self.search(key)
  if index is Some(index) {
    self.buckets[bucket].values[index] = (key, value)
  } else {
    self.buckets[bucket].values.push((key, value))
  }
  n_searches
}
</code></pre>
<p>è¿™å°±æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> è®¿é—®é­”æ³•èƒŒåæ‰€é™„å¸¦çš„æ¡ä»¶â€”â€”
å¦‚æœæˆ‘ä»¬è¿æ°”ä¸å¥½ï¼Œå°±å¿…é¡»éå†æ‰€æœ‰ä¸œè¥¿ã€‚
è¿™ä½¿å¾—å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹çš„å¤æ‚åº¦å˜æˆäº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼Œ
å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">n</span></span></span></span></span> æ˜¯å“ˆå¸Œè¡¨ä¸­çš„é”®çš„æ•°é‡ã€‚</p>
<h2 data-id="heading-2">åˆ¶é€ ä¸€åœºå†²çª</h2>
<p>å¯¹äºæˆ‘ä»¬ç”¨äºå“ˆå¸Œè¡¨çš„å¤§å¤šæ•°å“ˆå¸Œå‡½æ•°æ¥è¯´ï¼Œè¿™ç§å†²çªçš„æœ€åæƒ…å†µæ˜¯å¾ˆç½•è§çš„ã€‚
è¿™æ„å‘³ç€æˆ‘ä»¬é€šå¸¸ä¸éœ€è¦ä¸ºæœ€åæƒ…å†µè€Œçƒ¦æ¼ï¼Œ
å¹¶ä¸”åœ¨ç»å¤§å¤šæ•°æ—¶é—´é‡Œéƒ½èƒ½äº«å—åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> çš„é€Ÿåº¦ã€‚</p>
<p>é™¤éæœ‰äººï¼Œ
<del>ä¹Ÿè®¸æ˜¯æŸä¸ªå¿ƒæ€€æ¶æ„çš„é»‘å®¢ï¼Œ</del>
æ•…æ„æŠŠä½ æ¨å…¥æœ€åæƒ…å†µã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå“ˆå¸Œå‡½æ•°éƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œè€Œä¸”è¿ç®—é€Ÿåº¦å¾ˆå¿«ã€‚
æ‰€ä»¥ï¼Œå³ä½¿ä¸å»å¯¹å‡½æ•°æœ¬èº«è¿›è¡Œé«˜çº§çš„å¯†ç å­¦åˆ†æï¼Œ
æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡æš´åŠ›ç ´è§£æ‰¾åˆ°å¾ˆå¤šä¼šç›¸äº’å†²çªçš„é”®ã€‚<sup><a href="#user-content-fn-brute-force" id="user-content-user-content-fnref-brute-force" data-footnote-ref="" aria-describedby="footnote-label" title="#user-content-fn-brute-force">1</a></sup></p>
<pre><code class="hljs language-mbt" lang="mbt">fn find_collision(
  bucket_count : Int,
  target_bucket : Int,
  n_collision_want : Int,
  hash_fn : (String) -&gt; UInt,
) -&gt; Array[String] {
  let result = []
  let bucket_count = bucket_count.reinterpret_as_uint()
  let target_bucket = target_bucket.reinterpret_as_uint()
  for i = 0; ; i = i + 1 {
    // ç”Ÿæˆä¸€äº›å­—ç¬¦ä¸²é”®ã€‚
    let s = i.to_string(radix=36)
    // è®¡ç®—å“ˆå¸Œå€¼
    let hash = hash_fn(s)
    let bucket_index = hash % bucket_count
    let bucket_index = if bucket_index &lt; 0 {
      bucket_index + bucket_count
    } else {
      bucket_index
    }
    // æ£€æŸ¥å®ƒæ˜¯å¦ä¸æˆ‘ä»¬çš„ç›®æ ‡æ¡¶å†²çªã€‚
    if bucket_index == target_bucket {
      result.push(s)
      if result.length() &gt;= n_collision_want {
        break
      }
    }
  }
  result
}
</code></pre>
<h2 data-id="heading-3">å“ˆå¸Œæ´ªæ³›æ”»å‡»</h2>
<p>æ‰‹æ¡è¿™äº›ä¼šå†²çªçš„é”®ï¼Œï¼ˆæ‰®æ¼”æ¶æ„é»‘å®¢çš„ï¼‰æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥æ”»å‡»å“ˆå¸Œè¡¨ï¼Œ
æŒç»­åˆ©ç”¨å…¶æœ€åæƒ…å†µä¸‹çš„å¤æ‚åº¦ã€‚</p>
<p>è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼šä½ æ­£åœ¨å‘åŒä¸€ä¸ªå“ˆå¸Œè¡¨ä¸­æ’å…¥é”®ï¼Œ
ä½†æ¯ä¸ªé”®éƒ½è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ã€‚
æ¯æ¬¡æ’å…¥æ—¶ï¼Œå“ˆå¸Œè¡¨éƒ½å¿…é¡»éå†æ¡¶ä¸­æ‰€æœ‰ç°æœ‰çš„é”®ï¼Œ
ä»¥ç¡®å®šæ–°é”®æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</p>
<p>ç¬¬ä¸€æ¬¡æ’å…¥ä¸ 0 ä¸ªé”®æ¯”è¾ƒï¼Œ
ç¬¬äºŒæ¬¡ä¸ 1 ä¸ªé”®æ¯”è¾ƒï¼Œç¬¬ä¸‰æ¬¡ä¸ 2 ä¸ªé”®æ¯”è¾ƒï¼Œ
è¢«æ¯”è¾ƒçš„é”®çš„æ•°é‡éšç€æ¯æ¬¡æ’å…¥çº¿æ€§å¢é•¿ã€‚
å¯¹äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">n</span></span></span></span></span> æ¬¡æ’å…¥ï¼Œè¢«æ¯”è¾ƒçš„é”®çš„æ€»æ•°æ˜¯ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>0</mn><mo>+</mo><mn>1</mn><mo>+</mo><mo>â‹¯</mo><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><msup><mi>n</mi><mn>2</mn></msup><mo>+</mo><mi>n</mi></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">0 + 1 + \dots + (n - 1) = \frac{n(n - 1)}{2} = \frac{n^2 + n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>è¿™ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">n</span></span></span></span></span> æ¬¡æ’å…¥æ“ä½œæ€»å…±éœ€è¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> æ¬¡æ¯”è¾ƒæ‰èƒ½å®Œæˆ<sup><a href="#user-content-fn-acc-quad" id="user-content-user-content-fnref-acc-quad" data-footnote-ref="" aria-describedby="footnote-label" title="#user-content-fn-acc-quad">2</a></sup>ï¼Œ
è€Œå¹³å‡æƒ…å†µä¸‹åªéœ€è¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> æ¬¡æ¯”è¾ƒã€‚
è¿™ä¸ªæ“ä½œå°†æ¯”å®ƒæœ¬åº”èŠ±è´¹çš„æ—¶é—´é•¿å¾—å¤šã€‚</p>
<p>è¿™ç§æ”»å‡»ä¸ä»…é™äºæ’å…¥æ“ä½œã€‚
æ¯å½“ä¸€ä¸ªè¢«æ”»å‡»çš„é”®è¢«æŸ¥æ‰¾æ—¶ï¼Œ
éƒ½ä¼šæ¯”è¾ƒç›¸åŒæ•°é‡çš„é”®ï¼Œ
å› æ­¤æ¯ä¸€ä¸ªæœ¬åº”æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> çš„æ“ä½œç°åœ¨éƒ½å˜æˆäº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ã€‚
è¿™äº›åŸæœ¬è€—æ—¶å¯ä»¥å¿½ç•¥ä¸è®¡çš„å“ˆå¸Œè¡¨æ“ä½œç°åœ¨ä¼šå˜å¾—æå…¶ç¼“æ…¢ï¼Œ
ä½¿å¾—æ”»å‡»è€…æ¯”ä»¥å‰æ›´å®¹æ˜“è€—å°½ç¨‹åºçš„èµ„æºã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<strong>å“ˆå¸Œæ´ªæ³›æ”»å‡»</strong>ï¼ˆhash flooding attackï¼‰ï¼Œ
å¾—åäºå®ƒç”¨å†²çªçš„é”® â€œæ·¹æ²¡â€ äº†å“ˆå¸Œè¡¨çš„åŒä¸€ä¸ªæ¡¶ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬ä¹‹å‰å†™çš„å“ˆå¸Œè¡¨å®ç°æ¥æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="hljs language-mbt" lang="mbt">/// ä¸€ä¸ªé€šè¿‡ Fowler-Noll-Vo å“ˆå¸Œå‡½æ•°å®ç°çš„ç®€å•å­—ç¬¦ä¸²å“ˆå¸Œå™¨ã€‚
/// https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function
fn string_fnv_hash(s : String) -&gt; UInt {
  let s_bytes = s.to_bytes()
  let mut acc : UInt = 0x811c9dc5
  for b in s_bytes {
    acc = (acc ^ b.to_uint()) * 0x01000193
  }
  acc
}

fn test_attack(
  n_buckets : Int,
  keys : Array[String],
  hash_fn : (String) -&gt; UInt,
) -&gt; Int {
  let map = { buckets: Array::makei(n_buckets, _ =&gt; { values: [] }), hash_fn }
  let mut total_searches = 0
  for key in keys {
    total_searches += map.insert(key, 0)
  }
  total_searches
}

test {
  println("æ¼”ç¤ºå“ˆå¸Œæ´ªæ³›æ”»å‡»")
  let bucket_count = 2048
  let target_bucket_id = 42
  let n_collision_want = 1000

  //
  println("é¦–å…ˆï¼Œå°è¯•æ’å…¥ä¸å†²çªçš„é”®ã€‚")
  let non_colliding_keys = Array::makei(n_collision_want,
    i =&gt; (i * 37).to_string(radix=36))
  let n_compares_nc = test_attack(
    bucket_count, non_colliding_keys, string_fnv_hash,
  )
  println(
    "1000ä¸ªä¸å†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š\{n_compares_nc}",
  )
  println("")

  //
  println("ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰é”®éƒ½å†²çªåˆ° #\{target_bucket_id} å·æ¡¶ã€‚")
  let colliding_keys = find_collision(
    bucket_count, target_bucket_id, n_collision_want, string_fnv_hash,
  )
  println("æ‰¾åˆ°äº† \{colliding_keys.length()} ä¸ªå†²çªçš„é”®ã€‚")
  let n_compares_c = test_attack(bucket_count, colliding_keys, string_fnv_hash)
  println(
    "1000ä¸ªå†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š\{n_compares_c}",
  )

  //
  let increase = n_compares_c.to_double() / n_compares_nc.to_double()
  println("æ¯”è¾ƒæ¬¡æ•°å¢åŠ äº† \{increase} å€")
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„è¾“å‡ºæ˜¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ¼”ç¤ºå“ˆå¸Œæ´ªæ³›æ”»å‡»</span>
<span class="hljs-string">é¦–å…ˆï¼Œå°è¯•æ’å…¥ä¸å†²çªçš„é”®ã€‚</span>
<span class="hljs-number">1000</span><span class="hljs-string">ä¸ªä¸å†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š347</span>

<span class="hljs-string">ç°åœ¨ï¼Œä½¿ç”¨å†²çªçš„é”®...</span>
<span class="hljs-string">æ‰¾åˆ°äº†</span> <span class="hljs-number">1000</span> <span class="hljs-string">ä¸ªå†²çªçš„é”®ã€‚</span>
<span class="hljs-number">1000</span><span class="hljs-string">ä¸ªå†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š499500</span>
<span class="hljs-string">æ¯”è¾ƒæ¬¡æ•°å¢åŠ äº†</span> <span class="hljs-number">1439.4812680115274</span> <span class="hljs-string">å€</span>
</code></pre>
<p>â€¦â€¦å¯ä»¥ç›´æ¥çœ‹åˆ°ï¼Œç°åœ¨çš„æ’å…¥æ“ä½œæ…¢äº†å¤§çº¦ 1000 å€ï¼</p>
<p>åœ¨ç°å®ä¸­ï¼Œå°½ç®¡å“ˆå¸Œè¡¨ä¸­çš„æ¡¶æ•°ä¸åƒæˆ‘ä»¬çš„ä¾‹å­é‚£æ ·æ˜¯å›ºå®šçš„ï¼Œ
ä½†å®ƒä»¬é€šå¸¸éµå¾ªä¸€å®šçš„å¢é•¿åºåˆ—ï¼Œ
æ¯”å¦‚ç¿»å€æˆ–éµå¾ªä¸€ä¸ªé¢„å®šä¹‰çš„ç´ æ•°åˆ—è¡¨ã€‚
è¿™ç§å¢é•¿æ¨¡å¼ä½¿å¾—æ¡¶çš„æ•°é‡éå¸¸å®¹æ˜“é¢„æµ‹ã€‚
å› æ­¤ï¼Œå³ä½¿æ”»å‡»è€…ä¸çŸ¥é“ç¡®åˆ‡çš„æ¡¶æ•°ï¼Œä¹Ÿèƒ½å‘èµ·å“ˆå¸Œæ´ªæ³›æ”»å‡»ã€‚</p>
<h2 data-id="heading-4">ç¼“è§£å“ˆå¸Œæ´ªæ³›æ”»å‡»</h2>
<p>å“ˆå¸Œæ´ªæ³›æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¥æ•ˆï¼Œæ˜¯å› ä¸ºæ”»å‡»è€…ç¡®åˆ‡åœ°çŸ¥é“å“ˆå¸Œå‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œ
ä»¥åŠå®ƒæ˜¯å¦‚ä½•ä¸é”®æ’å…¥å“ˆå¸Œè¡¨çš„ä½ç½®ç›¸å…³è”çš„ã€‚
å¦‚æœæˆ‘ä»¬æ”¹å˜å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œæ”»å‡»å°±ä¸å†æœ‰æ•ˆäº†ã€‚</p>
<h3 data-id="heading-5">å¸¦"ç§å­"çš„å“ˆå¸Œå‡½æ•°</h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯é˜²æ­¢æ”»å‡»è€…ç¡®åˆ‡åœ°çŸ¥é“å“ˆå¸Œç®—æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
è¿™å¬èµ·æ¥å¯èƒ½ä¸å¯èƒ½ï¼Œ
ä½†å“ˆå¸Œå‡½æ•°çš„æ€§è´¨å®é™…ä¸Š<strong>åªéœ€è¦åœ¨å•ä¸ªå“ˆå¸Œè¡¨å†…éƒ¨ä¿æŒä¸€è‡´å°±è¡Œäº†</strong>ï¼</p>
<p>åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬å…¶å®ä¸éœ€è¦ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„ã€å…¨å±€ç»Ÿä¸€çš„"å“ˆå¸Œå€¼"ï¼Œ
å› ä¸ºå“ˆå¸Œè¡¨å‹æ ¹ä¸åœ¨ä¹è¡¨ä»¥å¤–æ´ªæ°´æ»”å¤©ï¼Œåªè¦è¡¨æœ¬èº«ä¿æŒä¸€è‡´å°±å¯ä»¥äº†ã€‚
æ‰€ä»¥ï¼Œåªè¦ç®€å•åœ°åœ¨ä¸åŒçš„å“ˆå¸Œè¡¨ä¹‹é—´åˆ‡æ¢å“ˆå¸Œå‡½æ•°ï¼Œ
æˆ‘ä»¬å°±èƒ½è®©æ”»å‡»è€…æ— æ³•é¢„æµ‹å…¶è¡Œä¸ºã€‚</p>
<p>ä½†ä½ å¯èƒ½ä¼šè¯´ï¼šâ€œå¯ç°å®ä¸–ç•Œä¸­çš„å“ˆå¸Œç®—æ³•ä¸æ˜¯æ— é™ä¾›åº”çš„å•Šï¼â€</p>
<p>å…¶å®å®ƒå¯ä»¥æ˜¯ã€‚
è¿˜è®°å¾—æˆ‘ä»¬è¯´å“ˆå¸Œå‡½æ•°éœ€è¦å°†å€¼å°½å¯èƒ½å‡åŒ€åœ°åˆ†å¸ƒåœ¨ç»“æœç©ºé—´ä¸­å—ï¼Ÿ
è¿™æ„å‘³ç€ï¼Œå¯¹äºä¸€ä¸ªè¶³å¤Ÿå¥½çš„å“ˆå¸Œå‡½æ•°ï¼Œ
è¾“å…¥çš„å¾®å°å˜åŒ–ä¼šå¯¼è‡´è¾“å‡ºçš„å·¨å¤§å˜åŒ–ï¼ˆè¢«ç§°ä¸ºé›ªå´©æ•ˆåº”ï¼‰ã€‚
å› æ­¤ï¼Œä¸ºäº†ç»™æ¯ä¸ªå“ˆå¸Œè¡¨ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å“ˆå¸Œå‡½æ•°ï¼Œ
æˆ‘ä»¬åªéœ€è¦åœ¨è¾“å…¥æˆ‘ä»¬æƒ³è¦å“ˆå¸Œçš„æ•°æ®ä¹‹å‰ï¼Œ
å…ˆç»™å®ƒ â€œå–‚â€ ä¸€äº›è¯¥å“ˆå¸Œè¡¨ç‹¬æœ‰çš„æ•°æ®ã€‚
è¿™è¢«ç§°ä¸ºå“ˆå¸Œå‡½æ•°çš„â€œç§å­"ï¼ˆseedï¼‰ã€‚
è¿™æ ·ï¼Œæˆ‘ä»¬åªè¦é€šè¿‡è°ƒæ•´ç§å­çš„å€¼ï¼Œå°±èƒ½è·å¾—æ— é™ä¾›åº”çš„ä¸åŒå“ˆå¸Œå‡½æ•°äº†ã€‚</p>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå¸¦ç§å­çš„å“ˆå¸Œå‡½æ•°å’Œä¸¤ä¸ªä½¿ç”¨ä¸åŒç§å­çš„å“ˆå¸Œè¡¨æ¥æ¼”ç¤ºä¸€ä¸‹ï¼Œå“ˆå¸Œç§å­æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼š</p>
<pre><code class="hljs language-mbt" lang="mbt">/// FNV å“ˆå¸Œçš„ä¿®æ”¹ç‰ˆï¼Œå…è®¸ä½¿ç”¨ç§å­ã€‚
fn string_fnv_hash_seeded(seed : UInt) -&gt; (String) -&gt; UInt {
  let seed_bytes = seed.to_le_bytes()
  fn string_fnv_hash(s : String) -&gt; UInt {
    let s_bytes = s.to_bytes()
    let mut acc : UInt = 0x811c9dc5
    // æ··å…¥ç§å­å­—èŠ‚ã€‚
    for b in seed_bytes {
      acc = (acc ^ b.to_uint()) * 0x01000193
    }
    // å“ˆå¸Œå­—ç¬¦ä¸²å­—èŠ‚ã€‚
    for b in s_bytes {
      acc = (acc ^ b.to_uint()) * 0x01000193
    }
    acc
  }

  string_fnv_hash
}

test {
  println("æ¼”ç¤ºæ´ªæ°´æ”»å‡»çš„ç¼“è§£æªæ–½")
  let bucket_count = 2048
  let target_bucket_id = 42
  let n_collision_want = 1000

  // ç¬¬ä¸€ä¸ªè¡¨ä½¿ç”¨ç§å­ 42ã€‚
  let seed1 : UInt = 42
  println("æˆ‘ä»¬ä½¿ç”¨ç§å­ \{seed1} æ¥å¯»æ‰¾å†²çª")
  let hash_fn1 = string_fnv_hash_seeded(seed1)
  let colliding_keys = find_collision(
    bucket_count, target_bucket_id, n_collision_want, hash_fn1,
  )
  let n_compares_c = test_attack(bucket_count, colliding_keys, hash_fn1)
  println(
    "ä½¿ç”¨ç§å­ \{seed1} æ—¶ï¼Œ1000ä¸ªå†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š\{n_compares_c}",
  )
  println("")

  // ç¬¬äºŒä¸ªè¡¨ä½¿ç”¨ä¸åŒçš„ç§å­ã€‚è¿™æ¬¡æˆ‘ä»¬ç”¨ 100
  let seed2 : UInt = 100
  println(
    "ç°åœ¨æˆ‘ä»¬ä¸ºç¬¬äºŒä¸ªè¡¨ä½¿ç”¨ä¸åŒçš„ç§å­ï¼Œè¿™æ¬¡æ˜¯ \{seed2}",
  )
  let hash_fn2 = string_fnv_hash_seeded(seed2)
  let n_compares_nc = test_attack(bucket_count, colliding_keys, hash_fn2)
  println(
    "å¯¹äºé‚£äº›æœ¬åº”åœ¨ç§å­ \{seed1} ä¸‹å†²çªçš„1000ä¸ªé”®ï¼Œç°åœ¨çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š\{n_compares_nc}",
  )
}
</code></pre>
<p>ä¸Šé¢ç¨‹åºçš„è¾“å‡ºæ˜¯ï¼š</p>
<pre><code class="hljs">æ¼”ç¤ºæ´ªæ°´æ”»å‡»çš„ç¼“è§£æªæ–½
æˆ‘ä»¬ä½¿ç”¨ç§å­ 42 æ¥å¯»æ‰¾å†²çª
ä½¿ç”¨ç§å­ 42 æ—¶ï¼Œ1000ä¸ªå†²çªé”®çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š499500

ç°åœ¨æˆ‘ä»¬ä¸ºç¬¬äºŒä¸ªè¡¨ä½¿ç”¨ä¸åŒçš„ç§å­ï¼Œè¿™æ¬¡æ˜¯ 100
å¯¹äºé‚£äº›æœ¬åº”åœ¨ç§å­ 42 ä¸‹å†²çªçš„1000ä¸ªé”®ï¼Œç°åœ¨çš„æ€»æ¯”è¾ƒæ¬¡æ•°ï¼š6342
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ
åœ¨ç¬¬ä¸€ä¸ªè¡¨ä¸­å†²çªçš„é”®ï¼Œåœ¨ç¬¬äºŒä¸ªè¡¨ä¸­ä¸å†å†²çªäº†ã€‚<sup><a href="#user-content-fn-mitigation" id="user-content-user-content-fnref-mitigation" data-footnote-ref="" aria-describedby="footnote-label" title="#user-content-fn-mitigation">3</a></sup>
å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªç®€å•çš„æŠ€å·§æˆåŠŸåœ°ç¼“è§£äº†å“ˆå¸Œæ´ªæ³›æ”»å‡»ã€‚</p>
<p>è‡³äºé‚£ä¸ªè®©æ¯ä¸ªå“ˆå¸Œè¡¨éšæœºåŒ–çš„ç§å­ä»å“ªé‡Œæ¥â€¦â€¦
å¯¹äºèƒ½å¤Ÿè®¿é—®å¤–éƒ¨éšæœºæºçš„ç¨‹åºï¼ˆæ¯”å¦‚ Linux çš„ <code>/dev/urandom</code>ï¼‰ï¼Œ
ä½¿ç”¨å®ƒé€šå¸¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚
å¯¹äºæ— æ³•è®¿é—®è¿™ç±»æºçš„ç¨‹åºï¼ˆæ¯”å¦‚åœ¨ WebAssembly æ²™ç®±ä¸­ï¼‰ï¼Œ
åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ä½¿ç”¨ç›¸åŒçš„ç§å­ã€ä¸åŒè¿›ç¨‹ä½¿ç”¨ä¸åŒçš„ç§å­ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ¡ˆï¼ˆPython å°±æ˜¯è¿™ä¹ˆåšçš„ï¼‰ã€‚
ç”šè‡³äºï¼Œä¸€ä¸ªæ¯æ¬¡è¯·æ±‚ç§å­æ—¶å°±è‡ªå¢çš„ç®€å•è®¡æ•°å™¨æˆ–è®¸ä¹Ÿå·²ç»è¶³å¤Ÿäº†â€”â€”
å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼ŒçŒœæµ‹å·²ç»åˆ›å»ºè¿‡å¤šå°‘ä¸ªå“ˆå¸Œè¡¨ä»ç„¶æ˜¯æ¯”è¾ƒå›°éš¾çš„ä¸€ä»¶äº‹ã€‚</p>
<h3 data-id="heading-6">å…¶ä»–é€‰æ‹©</h3>
<p>Java ä½¿ç”¨äº†å¦ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œ
å½“å¤ªå¤šçš„å€¼å æ®åŒä¸€ä¸ªæ¡¶æ—¶ï¼Œå®ƒä¼šé€€è€Œæ±‚å…¶æ¬¡ï¼Œä½¿ç”¨ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼ˆçº¢é»‘æ ‘ï¼‰å­˜å‚¨å®ƒä»¬ã€‚
æ˜¯ï¼Œè¿™è¦æ±‚é”®é™¤äº†å¯å“ˆå¸Œä¹‹å¤–ï¼Œè¿˜å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ï¼Œ
ä½†ç°åœ¨å®ƒä¿è¯äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> çš„æœ€åæƒ…å†µå¤æ‚åº¦ï¼Œ
è¿™æ€»æ¯” <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span> è¦å¥½å¾—å¤šã€‚</p>
<h2 data-id="heading-7">è¿™ä¸ºä»€ä¹ˆå¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼Ÿ</h2>
<p>ç”±äºå“ˆå¸Œè¡¨åœ¨ç¨‹åºä¸­æ— å¤„ä¸åœ¨ï¼Œ
åœ¨ä¸€ä¸ªç¨‹åºä¸­æ‰¾åˆ°ä¸€ä¸ªä½ èƒ½æ§åˆ¶å…¶é”®çš„å“ˆå¸Œè¡¨æ˜¯æå…¶å®¹æ˜“çš„ã€‚
å°¤å…¶æ˜¯åœ¨ Web ç¨‹åºä¸­æ¯ï¼Œ
è¯·æ±‚å¤´ã€Cookieã€æŸ¥è¯¢å‚æ•°å’Œ JSON è¯·æ±‚ä½“éƒ½æ˜¯é”®å€¼å¯¹ï¼Œ
å¹¶ä¸”é€šå¸¸å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿™å¯èƒ½ä½¿å®ƒä»¬å®¹æ˜“å—åˆ°å“ˆå¸Œæ´ªæ³›æ”»å‡»ã€‚</p>
<p>ä¸€ä¸ªå¯¹ç¨‹åºæœ‰è¶³å¤Ÿäº†è§£ï¼ˆç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ç­‰ï¼‰çš„æ¶æ„æ”»å‡»è€…ï¼Œ
å¯ä»¥å°è¯•å‘ Web API ç«¯ç‚¹å‘é€ç²¾å¿ƒæ„é€ çš„è¯·æ±‚è´Ÿè½½ã€‚
è¿™äº›è¯·æ±‚éœ€è¦æ›´é•¿çš„æ—¶é—´æ¥å¤„ç†ï¼Œ
æ‰€ä»¥å¦‚æœä¸€ä¸ªå¸¸è§„çš„æ‹’ç»æœåŠ¡ï¼ˆDoSï¼‰æ”»å‡»éœ€è¦æ¯ç§’ n ä¸ªè¯·æ±‚æ‰èƒ½ä½¿æœåŠ¡å™¨ç˜«ç—ªï¼Œ
é‚£ä¹ˆå“ˆå¸Œæ´ªæ³›æ”»å‡»å¯èƒ½åªéœ€è¦å°ä¸€ä¸ªæ•°é‡çº§çš„æ”»å‡»æ¬¡æ•°å°±èƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚
è¿™ä½¿å¾—å®ƒå¯¹æ”»å‡»è€…æ¥è¯´æ•ˆç‡é«˜å¾—å¤šã€‚
è¿™ç§æ”»å‡»è¢«ç§°ä¸º <strong>å“ˆå¸Œæ‹’ç»æœåŠ¡ï¼ˆHashDoSï¼‰</strong> æ”»å‡»ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡åœ¨å“ˆå¸Œè¡¨ä¸­å¼•å…¥ä¸€äº›å“ªæ€•æ˜¯è½»å¾®çš„ä¸å¯é¢„æµ‹æ¨¡å¼
ï¼ˆä¾‹å¦‚æ¯ä¸ªè¿›ç¨‹çš„éšæœºæ€§æˆ–å¸¦å¯†é’¥çš„å“ˆå¸Œï¼‰ï¼Œ
æˆ‘ä»¬å°±å¯ä»¥ä½¿è¿™ç±»æ”»å‡»å˜å¾—å¼‚å¸¸å›°éš¾ï¼Œä»¥è‡³äºå¯¹æ”»å‡»è€…ä¸å†å¯è¡Œã€‚
æ­¤å¤–ï¼Œç”±äºè¿™ç§æ”»å‡»é«˜åº¦ä¾èµ–äºå¯¹ç›®æ ‡åº”ç”¨çš„è¯­è¨€ã€æ¡†æ¶ã€æ¶æ„å’Œå®ç°çš„äº†è§£ï¼Œ
æ„é€ ä¸€ä¸ªæ”»å‡»æœ¬èº«å°±å·²ç»ç›¸å½“å›°éš¾äº†ï¼Œ
è€Œç°ä»£çš„ã€é…ç½®è‰¯å¥½çš„ç³»ç»Ÿåˆ™æ›´éš¾è¢«åˆ©ç”¨ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>å“ˆå¸Œè¡¨ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•°çš„è®¿é—®æ–¹å¼â€”â€”
ç„¶è€Œï¼Œè¿™ä¸ª"å¸¸æ•°"çš„æˆç«‹ï¼Œæ˜¯å»ºç«‹åœ¨ä¸€äº›å‡è®¾ä¹‹ä¸Šçš„ï¼Œ
è€Œè¿™äº›å‡è®¾æœ‰æ—¶ä¼šè¢«æ”»å‡»è€…æ‰“ç ´ã€‚
ä¸€æ¬¡æœ‰é’ˆå¯¹æ€§çš„å“ˆå¸Œæ´ªæ³›æ”»å‡»ä¼šè¿«ä½¿è®¸å¤šé”®è¿›å…¥åŒä¸€ä¸ªæ¡¶ï¼Œ
å°† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> çš„æ“ä½œå˜æˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼Œ
èƒ½éå¸¸é«˜æ•ˆåœ°è€—å°½ç³»ç»Ÿèµ„æºã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œç¼“è§£æªæ–½æ—¢ç®€å•åˆå®ç”¨ï¼š
ä¸ºä½ çš„å“ˆå¸Œè¡¨å¼•å…¥ä¸€äº›ä¸å¯é¢„æµ‹æ€§ï¼Œ
å½“ä»…é å“ˆå¸Œè¿˜ä¸å¤Ÿæ—¶ä½¿ç”¨æ—è·¯ä¿¡æ¯ï¼Œæˆ–è€…å½“è¡Œä¸ºçœ‹èµ·æ¥ä¸å¯¹åŠ²æ—¶é‡æ–°å“ˆå¸Œã€‚
æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©æˆ‘ä»¬çš„å“ˆå¸Œè¡¨æ—¢å¿«é€Ÿåˆå®‰å…¨ã€‚</p>
<h2 class="sr-only" id="user-content-footnote-label" data-id="heading-9">Footnotes</h2>
<ol>
<li id="user-content-user-content-fn-brute-force">
<p>é¡ºä¾¿æä¸€ä¸‹ï¼Œè¿™ä¹Ÿç±»ä¼¼äºæ¯”ç‰¹å¸æŒ–çŸ¿çš„å·¥ä½œåŸç†ï¼š
æ‰¾åˆ°ä¸€ä¸ªå€¼æ·»åŠ åˆ°ç°æœ‰å­—ç¬¦ä¸²ä¸­ï¼Œ
ä½¿å¾—æ•´ä¸ªå†…å®¹çš„å“ˆå¸Œå€¼ï¼ˆé€ä½å€’è¿‡æ¥ä¹‹åï¼‰æ¨¡é™¤æŸä¸ªç»™å®šå€¼ä¹‹åçš„ç»“æœç­‰äºé›¶ã€‚ <a href="#user-content-fnref-brute-force" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content" title="#user-content-fnref-brute-force">â†©</a></p>
</li>
<li id="user-content-user-content-fn-acc-quad">
<p>ç”šè‡³æœ‰ä¸€ä¸ª Tumblr åšå®¢ä¸“é—¨è®°å½•ç¼–ç¨‹è¯­è¨€ä¸­æ„æ–™ä¹‹å¤–çš„äºŒæ¬¡æ–¹å¤æ‚åº¦ï¼Œ
å«åš <a href="https://link.juejin.cn?target=https%3A%2F%2Faccidentallyquadratic.tumblr.com%2F" target="_blank" title="https://accidentallyquadratic.tumblr.com/" ref="nofollow noopener noreferrer">Accidentally Quadratic</a>ã€‚
ä½ ç”šè‡³å¯ä»¥åœ¨
<a href="https://link.juejin.cn?target=https%3A%2F%2Faccidentallyquadratic.tumblr.com%2Fpost%2F153545455987%2Frust-hash-iteration-reinsertion" target="_blank" title="https://accidentallyquadratic.tumblr.com/post/153545455987/rust-hash-iteration-reinsertion" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>
æ‰¾åˆ°ä¸€ä¸ªä¸å“ˆå¸Œè¡¨ç›¸å…³çš„ä¾‹å­â€”â€”è¿™ä¸ªä¾‹å­å‡ ä¹ç®—æ˜¯ä¸€æ¬¡æ‰‹åŠ¨å¼•å…¥çš„å“ˆå¸Œæ´ªæ³›æ”»å‡»äº†ã€‚ <a href="#user-content-fnref-acc-quad" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content" title="#user-content-fnref-acc-quad">â†©</a></p>
</li>
<li id="user-content-user-content-fn-mitigation">
<p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™ä¸ªæ•°å­—ä»ç„¶æ¯”æˆ‘ä»¬ç”¨éšæœºç”Ÿæˆçš„ä¸å†²çªé”®å¾—åˆ°çš„æ•°å­—è¦é«˜ä¸€äº›ã€‚
è¿™å¯èƒ½ä¸ FNV å“ˆå¸Œå‡½æ•°çš„è®¾è®¡å¹¶éè¿½æ±‚æœ€é«˜è´¨é‡çš„è¾“å‡ºæœ‰å…³ã€‚
ç”±äºä¸¤ä¸ªç§å­éå¸¸æ¥è¿‘ï¼Œç»“æœå¯èƒ½ä»ç„¶å­˜åœ¨ä¸€äº›ç›¸ä¼¼æ€§ã€‚
ä½¿ç”¨ä¸€ä¸ªæ›´å¥½çš„å“ˆå¸Œå‡½æ•°ï¼ˆç”šè‡³æ˜¯åƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fveorq%2FSipHash" target="_blank" title="https://github.com/veorq/SipHash" ref="nofollow noopener noreferrer">SipHash</a> è¿™æ ·çš„åŠ å¯†å®‰å…¨å“ˆå¸Œå‡½æ•°ï¼‰
ä¼šå¤§å¤§å‡å°‘è¿™ç§å½±å“ã€‚ <a href="#user-content-fnref-mitigation" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content" title="#user-content-fnref-mitigation">â†©</a></p>
</li>
</ol>
</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é™¤äº†AOPåˆ‡é¢ï¼Œè¿˜æœ‰å“ªäº›æ›´çµæ´»çš„æ•°æ®æºåˆ‡æ¢ç­–ç•¥ï¼Ÿæ¯”å¦‚åŸºäºæ³¨è§£æˆ–è‡ªå®šä¹‰è·¯ç”±è§„åˆ™]]></title>    <link>https://juejin.cn/post/7571299394345680938</link>    <guid>https://juejin.cn/post/7571299394345680938</guid>    <pubDate>2025-11-11T13:41:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571299394345680938" data-draft-id="7571306072422809642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é™¤äº†AOPåˆ‡é¢ï¼Œè¿˜æœ‰å“ªäº›æ›´çµæ´»çš„æ•°æ®æºåˆ‡æ¢ç­–ç•¥ï¼Ÿæ¯”å¦‚åŸºäºæ³¨è§£æˆ–è‡ªå®šä¹‰è·¯ç”±è§„åˆ™"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-11T13:41:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é™¤äº†AOPåˆ‡é¢ï¼Œè¿˜æœ‰å“ªäº›æ›´çµæ´»çš„æ•°æ®æºåˆ‡æ¢ç­–ç•¥ï¼Ÿæ¯”å¦‚åŸºäºæ³¨è§£æˆ–è‡ªå®šä¹‰è·¯ç”±è§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T13:41:13.000Z" title="Tue Nov 11 2025 13:41:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Spring Bootä¸­å®ç°æ•°æ®æºåˆ‡æ¢ï¼Œé™¤äº†AOPåˆ‡é¢ï¼Œè¿˜æœ‰å‡ ç§éå¸¸çµæ´»çš„ç­–ç•¥ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¯¹æ¯”å„ç§æ–¹æ¡ˆï¼Œç„¶åé‡ç‚¹ä»‹ç»ä¸¤ç§æœ€å®ç”¨çš„æ–¹æ³•ï¼š</p>








































<table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>å®ç°æ–¹å¼</th><th>çµæ´»æ€§</th><th>ä»£ç ä¾µå…¥æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ³¨è§£é©±åŠ¨</strong></td><td>ä½¿ç”¨<code>@DS</code>ç­‰æ³¨è§£æ ‡è®°æ–¹æ³•/ç±»</td><td>é«˜</td><td>ä½</td><td>ç²¾ç¡®åˆ°æ–¹æ³•çº§åˆ«çš„æ•°æ®æºæ§åˆ¶</td></tr><tr><td><strong>æ‰‹åŠ¨ç¼–ç¨‹</strong></td><td>åœ¨ä»£ç ä¸­è°ƒç”¨APIåŠ¨æ€åˆ‡æ¢</td><td>æœ€é«˜</td><td>é«˜</td><td>å¤æ‚ä¸šåŠ¡é€»è¾‘ã€åŒä¸€æ–¹æ³•å†…å¤šæ•°æ®æº</td></tr><tr><td><strong>è¯·æ±‚ç‰¹å¾è·¯ç”±</strong></td><td>åŸºäºHTTPå¤´ã€å‚æ•°ç­‰è‡ªåŠ¨è·¯ç”±</td><td>ä¸­é«˜</td><td>ä½</td><td>å¤šç§Ÿæˆ·ã€æŒ‰å®¢æˆ·åˆ†åº“ç­‰åœºæ™¯</td></tr><tr><td><strong>æ–¹æ³•è§„åˆ™è·¯ç”±</strong></td><td>åŸºäºæ–¹æ³•åçº¦å®šè‡ªåŠ¨åˆ‡æ¢</td><td>ä¸­</td><td>ä½</td><td>æœ‰å›ºå®šå‘½åè§„èŒƒçš„è¯»å†™åˆ†ç¦»</td></tr></tbody></table>
<h2 data-id="heading-0">ğŸ” æ³¨è§£é©±åŠ¨åˆ‡æ¢</h2>
<p>è¿™æ˜¯ç›®å‰<strong>æœ€æµè¡Œä¸”ä¼˜é›…</strong>çš„æ–¹æ¡ˆï¼ŒMyBatis-Plusçš„åŠ¨æ€æ•°æ®æºç»„ä»¶æä¾›äº†å¼€ç®±å³ç”¨çš„æ”¯æŒã€‚</p>
<h3 data-id="heading-1">é…ç½®ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
-   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
-   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>  <span class="hljs-comment"># é»˜è®¤æ•°æ®æº</span>
      <span class="hljs-attr">strict:</span> <span class="hljs-literal">false</span>    <span class="hljs-comment"># æ˜¯å¦ä¸¥æ ¼åŒ¹é…æ•°æ®æº</span>
      <span class="hljs-attr">datasource:</span>
        <span class="hljs-attr">master:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/master</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">master_password</span>
        <span class="hljs-attr">slave:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/slave</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">slave_password</span>
</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨@DSæ³¨è§£</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ä¸»åº“ï¼ˆå†™æ“ä½œï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userMapper.<span class="hljs-title function_">insert</span>(user);
    }
    
    <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šä»åº“ï¼ˆè¯»æ“ä½œï¼‰</span>
    <span class="hljs-meta">@DS</span>(<span class="hljs-string">"slave"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">Long id</span>) {
        <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">selectById</span>(id);
    }
    
    <span class="hljs-comment">// åœ¨Mapperå±‚ç›´æ¥æŒ‡å®šæ•°æ®æº</span>
    <span class="hljs-meta">@DS</span>(<span class="hljs-string">"slave"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt; <span class="hljs-title function_">findActiveUsers</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">selectActiveUsers</span>();
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå£°æ˜å¼é…ç½®ï¼Œä»£ç ä¾µå…¥æ€§ä½ï¼Œæ”¯æŒç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«çš„ç²¾ç»†æ§åˆ¶ã€‚</p>
<h2 data-id="heading-4">âš™ï¸ æ‰‹åŠ¨ç¼–ç¨‹åˆ‡æ¢</h2>
<p>å¯¹äºéœ€è¦<strong>åœ¨åŒä¸€æ–¹æ³•å†…ä½¿ç”¨å¤šä¸ªæ•°æ®æº</strong>çš„å¤æ‚åœºæ™¯ï¼Œæ‰‹åŠ¨æ§åˆ¶æä¾›äº†æœ€å¤§çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-5">åŸºæœ¬APIä½¿ç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šä»ä¸»åº“è¯»å–è®¢å•</span>
        DynamicDataSourceContextHolder.push(<span class="hljs-string">"master"</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);
            <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†...</span>
        } <span class="hljs-keyword">finally</span> {
            DynamicDataSourceContextHolder.poll();
        }
        
        <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šå†™å…¥ä»åº“è¿›è¡Œæ•°æ®åˆ†æ</span>
        DynamicDataSourceContextHolder.push(<span class="hljs-string">"slave"</span>);
        <span class="hljs-keyword">try</span> {
            analysisMapper.insertOrderAnalysis(order);
        } <span class="hljs-keyword">finally</span> {
            DynamicDataSourceContextHolder.poll();
        }
    }
}
</code></pre>
<h3 data-id="heading-6">åŸºäºHTTPè¯·æ±‚çš„è‡ªåŠ¨åˆ‡æ¢</h3>
<p>é€šè¿‡è¿‡æ»¤å™¨æˆ–æ‹¦æˆªå™¨å®ç°åŸºäºè¯·æ±‚ç‰¹å¾çš„è·¯ç”±ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@WebFilter</span>(urlPatterns = <span class="hljs-string">"/*"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">doFilter</span>(<span class="hljs-title class_">ServletRequest</span> request, <span class="hljs-title class_">ServletResponse</span> response, 
                         <span class="hljs-title class_">FilterChain</span> chain) throws <span class="hljs-title class_">IOException</span>, <span class="hljs-title class_">ServletException</span> {
        <span class="hljs-title class_">HttpServletRequest</span> httpRequest = (<span class="hljs-title class_">HttpServletRequest</span>) request;
        
        <span class="hljs-comment">// ä»è¯·æ±‚å¤´è·å–æ•°æ®æºæ ‡è¯†ï¼ˆå¦‚å¤šç§Ÿæˆ·åœºæ™¯ï¼‰</span>
        <span class="hljs-title class_">String</span> tenantId = httpRequest.<span class="hljs-title function_">getHeader</span>(<span class="hljs-string">"X-Tenant-Id"</span>);
        <span class="hljs-comment">// æˆ–ä»è¯·æ±‚å‚æ•°åˆ¤æ–­ä¸šåŠ¡ç±»å‹</span>
        <span class="hljs-title class_">String</span> businessType = httpRequest.<span class="hljs-title function_">getParameter</span>(<span class="hljs-string">"bizType"</span>);
        
        <span class="hljs-title class_">String</span> dataSourceKey = <span class="hljs-title function_">determineDataSource</span>(tenantId, businessType);
        
        <span class="hljs-title class_">DynamicDataSourceContextHolder</span>.<span class="hljs-title function_">push</span>(dataSourceKey);
        <span class="hljs-keyword">try</span> {
            chain.<span class="hljs-title function_">doFilter</span>(request, response);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-title class_">DynamicDataSourceContextHolder</span>.<span class="hljs-title function_">poll</span>();
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">determineDataSource</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> tenantId, <span class="hljs-built_in">String</span> businessType</span>) {
        <span class="hljs-comment">// å¤æ‚çš„è·¯ç”±é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"report"</span>.<span class="hljs-title function_">equals</span>(businessType)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"report_db"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tenantId != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"tenant_"</span> + tenantId;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">"master"</span>; <span class="hljs-comment">// é»˜è®¤æ•°æ®æº</span>
    }
}
</code></pre>
<h2 data-id="heading-7">ğŸ§  è‡ªå®šä¹‰è·¯ç”±è§„åˆ™</h2>
<p>é€šè¿‡ç»§æ‰¿<code>AbstractRoutingDataSource</code>å¹¶é‡å†™<code>determineCurrentLookupKey()</code>æ–¹æ³•ï¼Œå¯ä»¥å®ç°åŸºäº<strong>ä¸šåŠ¡é€»è¾‘çš„å¤æ‚è·¯ç”±</strong>ã€‚</p>
<h3 data-id="heading-8">åŸºäºæ–¹æ³•åçš„è·¯ç”±ç¤ºä¾‹</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BusinessRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {
        <span class="hljs-comment">// è·å–å½“å‰æ–¹æ³•åè¿›è¡Œè·¯ç”±å†³ç­–</span>
        <span class="hljs-type">String</span> methodName = getCurrentMethodName();
        
        <span class="hljs-keyword">if</span> (methodName.startsWith(<span class="hljs-string">"find"</span>) || methodName.startsWith(<span class="hljs-string">"query"</span>) 
            || methodName.startsWith(<span class="hljs-string">"select"</span>) || methodName.startsWith(<span class="hljs-string">"get"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"slave"</span>; <span class="hljs-comment">// è¯»æ“ä½œè·¯ç”±åˆ°ä»åº“</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (methodName.startsWith(<span class="hljs-string">"insert"</span>) || methodName.startsWith(<span class="hljs-string">"update"</span>) 
                 || methodName.startsWith(<span class="hljs-string">"delete"</span>) || methodName.startsWith(<span class="hljs-string">"save"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"master"</span>; <span class="hljs-comment">// å†™æ“ä½œè·¯ç”±åˆ°ä¸»åº“</span>
        }
        
        <span class="hljs-comment">// é»˜è®¤è·¯ç”±ç­–ç•¥</span>
        <span class="hljs-keyword">return</span> isReadOperation(methodName) ? <span class="hljs-string">"slave"</span> : <span class="hljs-string">"master"</span>;
    }
}
</code></pre>
<h3 data-id="heading-9">åŸºäºå‚æ•°å€¼çš„è·¯ç”±</h3>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParameterBasedRouter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {
        <span class="hljs-comment">// ä»çº¿ç¨‹ä¸Šä¸‹æ–‡æˆ–å‚æ•°ä¸­è·å–è·¯ç”±ä¿¡æ¯</span>
        <span class="hljs-type">String</span> businessUnit = <span class="hljs-type">RequestContextHolder</span>.getBusinessUnit();
        <span class="hljs-type">String</span> dataType = <span class="hljs-type">RequestContextHolder</span>.getDataType();
        
        <span class="hljs-comment">// ç»„åˆè·¯ç”±é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"finance"</span>.equals(businessUnit) &amp;&amp; <span class="hljs-string">"sensitive"</span>.equals(dataType)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"finance_secure_db"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"report"</span>.equals(dataType)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"reporting_db"</span>;
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"default_db"</span>;
    }
}
</code></pre>
<h2 data-id="heading-10">âš ï¸ å®æˆ˜æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šåœ¨æ‰‹åŠ¨åˆ‡æ¢æ•°æ®æºæ—¶ï¼Œç¡®ä¿<strong>åŒä¸€ä¸ªäº‹åŠ¡å†…ä½¿ç”¨åŒä¸€æ•°æ®æº</strong>ï¼Œé¿å…è·¨æ•°æ®æºäº‹åŠ¡å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼šä½¿ç”¨<code>try-finally</code>ç¡®ä¿æ¯æ¬¡æ•°æ®æºåˆ‡æ¢åéƒ½èƒ½æ­£ç¡®æ¸…ç†ä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢<strong>å†…å­˜æ³„æ¼</strong>å’Œ<strong>æ•°æ®æºæ±¡æŸ“</strong>ã€‚</li>
<li><strong>æ€§èƒ½è€ƒé‡</strong>ï¼šé¢‘ç¹çš„æ•°æ®æºåˆ‡æ¢ä¼šå¸¦æ¥æ€§èƒ½å¼€é”€ï¼Œåœ¨é«˜æ€§èƒ½åœºæ™¯ä¸‹åº”è€ƒè™‘<strong>æ‰¹é‡æ“ä½œ</strong>æˆ–<strong>è¿æ¥å¤ç”¨</strong>ã€‚</li>
<li><strong>é™çº§ç­–ç•¥</strong>ï¼šå§‹ç»ˆé…ç½®åˆç†çš„<strong>ä¸»ä»å»¶è¿Ÿå¤„ç†</strong>å’Œ<strong>æ•…éšœé™çº§</strong>æœºåˆ¶ï¼Œç¡®ä¿ä¸»åº“ä¸å¯ç”¨æ—¶ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</li>
</ol>
<h2 data-id="heading-11">ğŸ’ æ€»ç»“</h2>
<p>é€‰æ‹©åˆé€‚çš„æ•°æ®æºåˆ‡æ¢ç­–ç•¥éœ€è¦æƒè¡¡çµæ´»æ€§å’Œå¤æ‚æ€§ã€‚å¯¹äºå¤§å¤šæ•°åœºæ™¯ï¼Œ<strong>æ³¨è§£é©±åŠ¨æ–¹æ¡ˆ</strong>æä¾›äº†æœ€ä½³å®è·µï¼›å¯¹äºå¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œ<strong>æ‰‹åŠ¨ç¼–ç¨‹æ§åˆ¶</strong>ä¸å¯æˆ–ç¼ºï¼›è€Œå¯¹äºæœ‰å›ºå®šè·¯ç”±è§„åˆ™çš„åœºæ™¯ï¼Œ<strong>è‡ªå®šä¹‰è·¯ç”±ç­–ç•¥</strong>èƒ½å¤Ÿæä¾›æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ“œ `<script>`è„šæœ¬å…ƒç´  - ä»åŠ è½½ç­–ç•¥åˆ°å®‰å…¨æ€§ä¸æ€§èƒ½çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571102074038485033</link>    <guid>https://juejin.cn/post/7571102074038485033</guid>    <pubDate>2025-11-11T09:11:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571102074038485033" data-draft-id="7571102074038452265" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ“œ `&lt;script&gt;`è„šæœ¬å…ƒç´  - ä»åŠ è½½ç­–ç•¥åˆ°å®‰å…¨æ€§ä¸æ€§èƒ½çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-11T09:11:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bug_Constructer"/> <meta itemprop="url" content="https://juejin.cn/user/254742426830856"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ“œ `&lt;script&gt;`è„šæœ¬å…ƒç´  - ä»åŠ è½½ç­–ç•¥åˆ°å®‰å…¨æ€§ä¸æ€§èƒ½çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742426830856/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bug_Constructer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T09:11:06.000Z" title="Tue Nov 11 2025 09:11:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ¯ <strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç³»ç»ŸæŒæ¡<code>&lt;script&gt;</code>è„šæœ¬å…ƒç´ çš„åŠ è½½ä¸æ‰§è¡Œæ¨¡å‹ã€æ¨¡å—åŒ–ç”¨æ³•ã€å®‰å…¨é…ç½®ï¼ˆCSP/SRI/CORSï¼‰ï¼Œå¹¶èƒ½åœ¨å®é™…é¡¹ç›®ä¸­é€‰ç”¨æ­£ç¡®ç­–ç•¥ï¼Œé¿å…æ€§èƒ½ä¸å®‰å…¨å‘ã€‚</p>
<p>ğŸ“Š <strong>éš¾åº¦ç­‰çº§</strong>ï¼šä¸­çº§<br/>
ğŸ·ï¸ <strong>æŠ€æœ¯æ ‡ç­¾</strong>ï¼š<code>#HTML</code> <code>#script</code> <code>#defer</code> <code>#async</code> <code>#module</code> <code>#CSP</code> <code>#SRI</code><br/>
â±ï¸ <strong>é˜…è¯»æ—¶é—´</strong>ï¼šçº¦14åˆ†é’Ÿ</p>
</blockquote>
<h2 data-id="heading-0">ğŸŒŸ å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ<code>&lt;script&gt;</code>è„šæœ¬çš„ä½¿ç”¨å‡ ä¹æ— å¤„ä¸åœ¨ï¼šä¸šåŠ¡ä»£ç ã€ç¬¬ä¸‰æ–¹SDKã€ç›‘æ§ä¸ŠæŠ¥ã€ABæµ‹è¯•ã€å¹¿å‘Šã€åŸ‹ç‚¹â€¦â€¦ä½†å¸¸è§é—®é¢˜ä¹Ÿå±‚å‡ºä¸ç©·ï¼š</p>
<ul>
<li>åŒæ­¥è„šæœ¬é˜»å¡æ¸²æŸ“ï¼Œé¦–å±ç™½å±æ—¶é—´é•¿ã€‚</li>
<li>æ··ç”¨<code>async/defer</code>å¯¼è‡´æ‰§è¡Œé¡ºåºä¸å¯æ§ï¼Œä¾èµ–æ‰“ä¹±å¼•å‘çº¿ä¸Šäº‹æ•…ã€‚</li>
<li>æ¨¡å—è„šæœ¬ä¸ç»å…¸è„šæœ¬ç›¸äº’å¼•ç”¨ï¼Œå…¼å®¹æ€§é—®é¢˜é¢‘å‘ã€‚</li>
<li>è·¨åŸŸè„šæœ¬æŠ¥é”™åªæœ‰â€œScript errorâ€ï¼Œæ— æ³•å®šä½é—®é¢˜ã€‚</li>
<li>æœªé…ç½®<code>CSP nonce</code>/<code>SRI integrity</code>ï¼Œå®‰å…¨å®¡è®¡ä¸é€šè¿‡ã€‚</li>
</ul>
<p>æœ¬æ–‡ä»åŠ è½½ã€æ‰§è¡Œåˆ°å®‰å…¨ä¸æ€§èƒ½çš„å®Œæ•´ç»´åº¦ï¼Œç»“åˆå®é™…è¸©å‘æ¡ˆä¾‹ï¼Œç»™å‡ºå¯è½åœ°çš„æœ€ä½³å®è·µä¸æµ‹è¯•æ–¹æ³•ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæŠ€å·§è¯¦è§£</h2>
<h3 data-id="heading-2">1ï¼‰åŠ è½½ä¸æ‰§è¡Œæ¨¡å‹ï¼šåŒæ­¥ã€deferã€async ä¸äº‹ä»¶æ—¶åº</h3>
<h4 data-id="heading-3">åº”ç”¨åœºæ™¯</h4>
<p>éœ€è¦åŒæ—¶å¼•å…¥å¤šä¸ªè„šæœ¬ï¼Œå¹¶ç¡®ä¿ï¼šä¸é˜»å¡è§£æã€æ‰§è¡Œé¡ºåºå¯æ§ã€ä¸<code>DOMContentLoaded</code>/<code>load</code>äº‹ä»¶æ—¶åºé…åˆã€‚</p>
<h4 data-id="heading-4">å¸¸è§é—®é¢˜</h4>
<ul>
<li>åœ¨<code>&lt;head&gt;</code>ä¸­æ”¾åŒæ­¥è„šæœ¬ï¼Œé˜»å¡HTMLè§£æä¸æ¸²æŸ“ã€‚</li>
<li>å°†å­˜åœ¨ä¾èµ–å…³ç³»çš„è„šæœ¬è®¾ç½®ä¸º<code>async</code>ï¼Œå‡ºç°éšæœºæ—¶åºé—®é¢˜ã€‚</li>
<li>è¯¯ä»¥ä¸º<code>defer</code>ä½œç”¨äºå†…è”è„šæœ¬ï¼ˆä»…å¯¹å¤–é“¾è„šæœ¬ç”Ÿæ•ˆï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">æ¨èæ–¹æ¡ˆ</h4>
<ul>
<li>æœ‰ä¾èµ–å’Œé¡ºåºè¦æ±‚ï¼šä½¿ç”¨<code>defer</code>å¹¶ä¿æŒå¼•å…¥é¡ºåºã€‚</li>
<li>æ— ä¾èµ–ã€ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹è„šæœ¬ï¼šä½¿ç”¨<code>async</code>ã€‚</li>
<li>ç°ä»£ä»£ç ä¼˜å…ˆä½¿ç”¨<code>type="module"</code>ï¼ˆå¤©ç”Ÿç±»ä¼¼<code>defer</code>ï¼Œæ›´æ˜“ç®¡ç†ä¾èµ–ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6">æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>async</code>ï¼šä¸‹è½½ä¸é˜»å¡è§£æï¼Œä¸‹è½½å®Œæˆç«‹å³æ‰§è¡Œï¼Œå½¼æ­¤ä¹‹é—´é¡ºåºä¸ç¡®å®šã€‚</li>
<li><code>defer</code>ï¼šä¸‹è½½ä¸é˜»å¡è§£æï¼ŒæŒ‰å¼•å…¥é¡ºåºåœ¨è§£æå®Œæˆåæ‰§è¡Œï¼Œæ—©äº<code>DOMContentLoaded</code>ã€‚</li>
<li><code>type="module"</code>ï¼šæ¨¡å—è„šæœ¬é»˜è®¤å»¶åæ‰§è¡Œï¼ŒæŒ‰ä¾èµ–å›¾åŠ è½½ï¼Œ<code>DOMContentLoaded</code>ä¼šç­‰å¾…å…¶å®Œæˆã€‚</li>
</ul>
<h4 data-id="heading-7">å®é™…åº”ç”¨ï¼ˆé¡ºåºå¯è§†åŒ–ç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æ¨èï¼šå­˜åœ¨ä¾èµ–å…³ç³»çš„è„šæœ¬ä½¿ç”¨ deferï¼Œä¿è¯æŒ‰å£°æ˜é¡ºåºæ‰§è¡Œ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/vendor.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹è„šæœ¬ä½¿ç”¨ asyncï¼Œä¸å½±å“è§£æä¸æ¸²æŸ“ï¼Œä¹Ÿä¸ä¼šå¡ä½å…¶ä»–è„šæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/analytics.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç°ä»£é¡¹ç›®ï¼šä¼˜å…ˆä½¿ç”¨æ¨¡å—è„šæœ¬ï¼Œä¾èµ–ç®¡ç†æ›´æ¸…æ™°ï¼ˆé»˜è®¤å»¶åæ‰§è¡Œï¼ŒDOMè§£æå®Œæˆåè¿è¡Œï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">2ï¼‰æ¨¡å—è„šæœ¬ä¸å›é€€ï¼š<code>type="module"</code>/<code>nomodule</code>/åŠ¨æ€å¯¼å…¥</h3>
<h4 data-id="heading-9">åº”ç”¨åœºæ™¯</h4>
<p>åœ¨ç°ä»£æµè§ˆå™¨ä¸­ä½¿ç”¨ESMæ¨¡å—ï¼›ä¸ºè€æ—§æµè§ˆå™¨å‡†å¤‡å…¼å®¹å›é€€ï¼›æŒ‰éœ€åŠ è½½åˆ†åŒ…ã€‚</p>
<h4 data-id="heading-10">å¸¸è§é—®é¢˜</h4>
<ul>
<li>ç»å…¸è„šæœ¬ä¸æ¨¡å—è„šæœ¬ç›¸äº’è°ƒç”¨å¯¼è‡´ä½œç”¨åŸŸæ··ä¹±ã€‚</li>
<li>ä½¿ç”¨<code>nomodule</code>é”™è¯¯ï¼Œç°ä»£æµè§ˆå™¨ä¹Ÿæ‰§è¡Œäº†å›é€€è„šæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-11">æ¨èæ–¹æ¡ˆ</h4>
<ul>
<li>ç°ä»£æµè§ˆå™¨ï¼šä¸»å…¥å£ä½¿ç”¨<code>type="module"</code>ã€‚</li>
<li>è€æ—§æµè§ˆå™¨å›é€€ï¼šæä¾›<code>nomodule</code>çš„ç»å…¸è„šæœ¬ç‰ˆæœ¬ï¼ˆé€šè¿‡æ„å»ºäº§ç‰©åŒºåˆ†ï¼‰ã€‚</li>
<li>å¤§é¡µé¢ï¼šä½¿ç”¨<code>import()</code>è¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼Œå‡å°é¦–åŒ…ä½“ç§¯ã€‚</li>
</ul>
<h4 data-id="heading-12">æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>nomodule</code>è„šæœ¬ä»…åœ¨â€œä¸æ”¯æŒæ¨¡å—â€çš„æµè§ˆå™¨ä¸­æ‰§è¡Œï¼›ç°ä»£æµè§ˆå™¨ä¼šå¿½ç•¥ã€‚</li>
<li>æ¨¡å—è„šæœ¬æ˜¯<code>strict mode</code>ï¼Œé¡¶å±‚ä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚</li>
<li>åŠ¨æ€å¯¼å…¥è¿”å›<code>Promise</code>ï¼Œå‹å¥½é…åˆè·¯ç”±/äº¤äº’è§¦å‘ã€‚</li>
</ul>
<h4 data-id="heading-13">å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ç°ä»£å…¥å£ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// @description é¡µé¢ä¸»å…¥å£ï¼šæ¨¡å—è„šæœ¬ï¼ˆé»˜è®¤å»¶åæ‰§è¡Œï¼‰</span>
  <span class="hljs-comment">/**
   * è®°å½•æ¨¡å—åˆå§‹åŒ–
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">msg</span> - æ–‡æœ¬ä¿¡æ¯
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logInit</span> = (<span class="hljs-params">msg</span>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[module] <span class="hljs-subst">${msg}</span>`</span>);
  <span class="hljs-title function_">logInit</span>(<span class="hljs-string">'bootstrap'</span>);

  <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥ï¼ŒæŒ‰éœ€åŠ è½½éå…³é”®åŠŸèƒ½</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadFeature</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { initFeature } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'/assets/feature.js'</span>);
    <span class="hljs-title function_">initFeature</span>();
  };
  <span class="hljs-comment">// äº¤äº’è§¦å‘</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadFeature</span>());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ—§æµè§ˆå™¨å›é€€ï¼ˆä»…ä¸æ”¯æŒæ¨¡å—çš„æµè§ˆå™¨æ‰§è¡Œï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nomodule</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/app-legacy.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-14">3ï¼‰å®‰å…¨ä¸è·¨åŸŸï¼šCSP nonceã€SRI integrity ä¸ <code>crossorigin</code></h3>
<h4 data-id="heading-15">åº”ç”¨åœºæ™¯</h4>
<p>ä¸¥æ ¼çš„å®‰å…¨å®¡è®¡è¦æ±‚ï¼›CDNè„šæœ¬å®Œæ•´æ€§æ ¡éªŒï¼›è·¨åŸŸåŠ è½½è„šæœ¬å¹¶éœ€è¦æ•è·è¯¦ç»†é”™è¯¯ã€‚</p>
<h4 data-id="heading-16">å¸¸è§é—®é¢˜</h4>
<ul>
<li>ç›´æ¥å†™å†…è”è„šæœ¬è¢«CSPæ‹¦æˆªï¼Œé¡µé¢åŠŸèƒ½å¤±æ•ˆã€‚</li>
<li>ä½¿ç”¨<code>integrity</code>ä½†æœªè®¾ç½®<code>crossorigin</code>ï¼ŒSRIæ ¡éªŒè¢«å¿½ç•¥ã€‚</li>
<li>è·¨åŸŸè„šæœ¬é”™è¯¯åªæœ‰â€œScript errorâ€ï¼Œæ— æ³•å®šä½å †æ ˆä¸æ¶ˆæ¯ã€‚</li>
</ul>
<h4 data-id="heading-17">æ¨èæ–¹æ¡ˆ</h4>
<ul>
<li>å¯ç”¨CSPå¹¶ä¸ºå†…è”è„šæœ¬è®¾ç½®<code>nonce</code>ï¼ˆæœåŠ¡å™¨åŠ¨æ€ç”Ÿæˆï¼‰ã€‚</li>
<li>CDNè„šæœ¬é…åˆ<code>integrity</code>ä¸<code>crossorigin="anonymous"</code>ç¡®ä¿å®Œæ•´æ€§ä¸é”™è¯¯å¯è§æ€§ã€‚</li>
<li>æœåŠ¡å™¨å…è®¸è·¨åŸŸå¹¶è®¾ç½®<code>Access-Control-Allow-Origin</code>ä¸<code>Timing-Allow-Origin</code>ä»¥æå‡å¯è§‚æµ‹æ€§ã€‚</li>
</ul>
<h4 data-id="heading-18">æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li><code>Content-Security-Policy: script-src 'self' 'nonce-&lt;éšæœºå€¼&gt;' https://cdn.example.com</code>ã€‚</li>
<li><code>integrity</code>éœ€ä¸<code>crossorigin</code>é…åˆï¼Œè·¨åŸŸèµ„æºä¸ç„¶å¯èƒ½è·³è¿‡æ ¡éªŒã€‚</li>
<li>è®¾ç½®<code>window.addEventListener('error', ...)</code>ä¸<code>unhandledrejection</code>æ•è·é”™è¯¯ã€‚</li>
</ul>
<h4 data-id="heading-19">å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æœåŠ¡ç«¯éœ€ä¸‹å‘ä¸€è‡´çš„ nonce å€¼ï¼ˆç¤ºä¾‹ï¼šnonce-xyzï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Security-Policy"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"script-src 'self' 'nonce-xyz' https://cdn.example.com"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å†…è”è„šæœ¬åŠ  nonceï¼Œé¿å…è¢«CSPæ‹¦æˆª --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">nonce</span>=<span class="hljs-string">"xyz"</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">/**
   * ä¸ŠæŠ¥é”™è¯¯ï¼ˆç¤ºä¾‹ï¼‰
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">type</span> - é”™è¯¯ç±»å‹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">msg</span> - é”™è¯¯æ¶ˆæ¯
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">reportError</span> = (<span class="hljs-params">type, msg</span>) =&gt; {
    <span class="hljs-comment">// çœŸå®é¡¹ç›®ä¸­è°ƒç”¨ç›‘æ§SDKæˆ–è‡ªå»ºä¸ŠæŠ¥æ¥å£</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[error] <span class="hljs-subst">${type}</span>: <span class="hljs-subst">${msg}</span>`</span>);
  };
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">reportError</span>(<span class="hljs-string">'onerror'</span>, e.<span class="hljs-property">message</span>));
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">reportError</span>(<span class="hljs-string">'promise'</span>, <span class="hljs-title class_">String</span>(e.<span class="hljs-property">reason</span>)));
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- CDNè„šæœ¬å®Œæ•´æ€§ + å¯è§é”™è¯¯å †æ ˆï¼ˆéœ€æœåŠ¡ç«¯å…è®¸è·¨åŸŸï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/sdk.min.js"</span>
        <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-BASE64_HASH"</span>
        <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>
        <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-20">4ï¼‰é”™è¯¯ç›‘æ§ä¸å¯è§‚æµ‹æ€§ï¼šä»â€œScript errorâ€åˆ°å¯å®šä½</h3>
<h4 data-id="heading-21">åº”ç”¨åœºæ™¯</h4>
<p>è·¨åŸŸè„šæœ¬å¯¼è‡´é”™è¯¯ä¿¡æ¯ç¼ºå¤±ï¼›éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒè·å–å®Œæ•´å †æ ˆä¸æ¥æºã€‚</p>
<h4 data-id="heading-22">å¸¸è§é—®é¢˜</h4>
<ul>
<li>æœªè®¾ç½®<code>crossorigin</code>å¯¼è‡´é”™è¯¯è¢«å±è”½ã€‚</li>
<li>ç›‘æ§ç³»ç»Ÿåªæ”¶åˆ°äº†é€šç”¨çš„â€œScript errorâ€ã€‚</li>
</ul>
<h4 data-id="heading-23">æ¨èæ–¹æ¡ˆ</h4>
<ul>
<li>å¯¹å¤–é“¾è„šæœ¬ç»Ÿä¸€åŠ <code>crossorigin="anonymous"</code>ã€‚</li>
<li>æœåŠ¡å™¨è¿”å›<code>Access-Control-Allow-Origin: *</code>æˆ–ä½ çš„åŸŸåï¼›å¹¶æä¾›<code>Timing-Allow-Origin</code>ä»¥å¼€æ”¾æ€§èƒ½æŒ‡æ ‡ã€‚</li>
<li>å¯¹äºç§æœ‰CDNï¼Œç¡®ä¿å“åº”å¤´æºå¸¦æ­£ç¡®çš„CORSä¸ç¼“å­˜ç­–ç•¥ã€‚</li>
</ul>
<h4 data-id="heading-24">å®é™…åº”ç”¨ï¼ˆæœ€å°ä¸ŠæŠ¥å™¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å‘é€é”™è¯¯åˆ°ç›‘æ§å¹³å°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">{type:string,message:string,stack?:string</span>}} payload - é”™è¯¯ä¿¡æ¯
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendError</span> = (<span class="hljs-params">payload</span>) =&gt; {
  <span class="hljs-comment">// ç¤ºä¾‹ï¼šä»…æ‰“å°ï¼›å®é™…é¡¹ç›®åº”è°ƒç”¨åç«¯æ¥å£</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“® error-report'</span>, payload);
};

<span class="hljs-comment">/**
 * åˆå§‹åŒ–é”™è¯¯ç›‘å¬
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">initErrorListener</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-title function_">sendError</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>, <span class="hljs-attr">message</span>: e.<span class="hljs-property">message</span>, <span class="hljs-attr">stack</span>: e.<span class="hljs-property">error</span>?.<span class="hljs-property">stack</span> });
  });
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-title function_">sendError</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'promise'</span>, <span class="hljs-attr">message</span>: <span class="hljs-title class_">String</span>(e.<span class="hljs-property">reason</span>) });
  });
};

<span class="hljs-title function_">initErrorListener</span>();
</code></pre>
<h3 data-id="heading-25">5ï¼‰æ€§èƒ½ä¸åŠ è½½ä¼˜åŒ–ï¼šä½ç½®ã€æ‹†åˆ†ã€é¢„åŠ è½½ã€ä¼˜å…ˆçº§</h3>
<h4 data-id="heading-26">åº”ç”¨åœºæ™¯</h4>
<p>é¦–å±åŠ è½½ä¼˜åŒ–ã€å‡å°‘é˜»å¡ã€åˆç†æ‹†åˆ†äº§ç‰©ã€æ§åˆ¶ç½‘ç»œä¼˜å…ˆçº§ã€‚</p>
<h4 data-id="heading-27">å¸¸è§é—®é¢˜</h4>
<ul>
<li>å°†å¤§å‹åŒæ­¥è„šæœ¬æ”¾åœ¨<code>&lt;head&gt;</code>å¯¼è‡´é˜»å¡ã€‚</li>
<li>æ‰€æœ‰ä»£ç æ‰“æˆä¸€ä¸ªåŒ…ï¼Œå½±å“é¦–å±ä¸å¯ç¼“å­˜æ€§ã€‚</li>
<li>å…³é”®è„šæœ¬åŠ è½½ä¼˜å…ˆçº§è¿‡ä½å¯¼è‡´äº¤äº’å»¶è¿Ÿã€‚</li>
</ul>
<h4 data-id="heading-28">æ¨èæ–¹æ¡ˆ</h4>
<ul>
<li>éå¿…è¦è„šæœ¬ç½®åº•æˆ–ä½¿ç”¨<code>defer</code>ï¼›ç¬¬ä¸‰æ–¹ç‹¬ç«‹è„šæœ¬ç”¨<code>async</code>ã€‚</li>
<li>æŒ‰è·¯ç”±/åŠŸèƒ½æ‹†åˆ†äº§ç‰©ï¼›æ¨¡å—è„šæœ¬é…åˆ<code>import()</code>å®ç°æ‡’åŠ è½½ã€‚</li>
<li>å¯¹çœŸæ­£å…³é”®è„šæœ¬ä½¿ç”¨<code>fetchpriority="high"</code>ï¼ˆå®éªŒæ€§ç‰¹æ€§ï¼Œè¯„ä¼°åå†ç”¨ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-29">å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å…³é”®è„šæœ¬ï¼šæå‡è·å–ä¼˜å…ˆçº§å¹¶å»¶åæ‰§è¡Œï¼ˆé¿å…é˜»å¡ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/assets/critical.js"</span> <span class="hljs-attr">fetchpriority</span>=<span class="hljs-string">"high"</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¾…åŠ©è„šæœ¬ï¼šæŒ‰éœ€åŠ è½½ï¼ˆè·¯ç”±/äº¤äº’è§¦å‘ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">/**
   * æ‡’åŠ è½½éå…³é”®åŠŸèƒ½
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;void&gt;</span>}
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">lazyFeature</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { mount } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'/assets/chart.js'</span>);
    <span class="hljs-title function_">mount</span>(<span class="hljs-string">'#chart'</span>);
  };
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#btn'</span>)?.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lazyFeature</span>());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-30">ğŸ“Š æŠ€å·§å¯¹æ¯”æ€»ç»“</h2>









































<table><thead><tr><th>æŠ€å·§</th><th>ä½¿ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>åŒæ­¥è„šæœ¬ï¼ˆä¸æ¨èï¼‰</td><td>æ—©æœŸç®€å•é¡µé¢</td><td>ç«‹å³æ‰§è¡Œ</td><td>é˜»å¡è§£æä¸æ¸²æŸ“ï¼Œå½±å“é¦–å±</td></tr><tr><td>defer</td><td>æœ‰ä¾èµ–ä¸”éœ€ä¿æŒé¡ºåº</td><td>ä¸é˜»å¡è§£æï¼›æŒ‰å¼•å…¥é¡ºåºæ‰§è¡Œ</td><td>ä»…å¤–é“¾è„šæœ¬ç”Ÿæ•ˆï¼›åœ¨è§£æå®Œæˆåæ‰§è¡Œ</td></tr><tr><td>async</td><td>ç‹¬ç«‹ç¬¬ä¸‰æ–¹è„šæœ¬</td><td>ä¸é˜»å¡è§£æï¼›æœ€å¿«å¯ç”¨</td><td>é¡ºåºä¸ç¡®å®šï¼›ä¸é€‚åˆæœ‰ä¾èµ–è„šæœ¬</td></tr><tr><td>type="module"</td><td>ç°ä»£é¡¹ç›®ä¸»å…¥å£ä¸åˆ†åŒ…</td><td>ä¾èµ–å›¾ç®¡ç†ï¼›é»˜è®¤å»¶åæ‰§è¡Œ</td><td>éœ€è€ƒè™‘æ—§æµè§ˆå™¨ï¼›é…åˆ nomodule å›é€€</td></tr><tr><td>nomodule</td><td>æ—§æµè§ˆå™¨å›é€€</td><td>ä¿è¯å…¼å®¹</td><td>ä»…æ—§æµè§ˆå™¨æ‰§è¡Œï¼›ä¸æ¨¡å—å…¥å£é…å¥—</td></tr></tbody></table>
<h2 data-id="heading-31">ğŸ¯ å®æˆ˜åº”ç”¨å»ºè®®</h2>
<h3 data-id="heading-32">æœ€ä½³å®è·µ</h3>
<ol>
<li>åŒæ—¶è¾“å‡º <code>esm</code> ä¸ <code>legacy</code> äº§ç‰©ï¼›æ¨¡æ¿ä¸­æ³¨å…¥ <code>type="module"</code> ä¸ <code>nomodule</code> å…¥å£ã€‚</li>
<li>ç¬¬ä¸‰æ–¹ç‹¬ç«‹è„šæœ¬ç»Ÿä¸€ä½¿ç”¨ <code>async</code>ï¼›æœ‰ä¾èµ–çš„ä¸šåŠ¡è„šæœ¬ä½¿ç”¨ <code>defer</code> ä¿åºã€‚</li>
<li>æ¨¡å—åŒ–æŒ‰éœ€æ‹†åˆ†ï¼šéå…³é”®åŠŸèƒ½é€šè¿‡ <code>import()</code> æ‡’åŠ è½½ï¼Œé™ä½é¦–åŒ…ä½“ç§¯ã€‚</li>
<li>å®‰å…¨ç­–ç•¥åˆ°ä½ï¼šå¼€å¯ CSPï¼ˆ<code>nonce</code>/<code>hash</code>/<code>strict-dynamic</code>ï¼‰ä¸ SRIï¼ˆ<code>integrity</code> + <code>crossorigin</code>ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-33">æ€§èƒ½è€ƒè™‘</h3>
<ul>
<li>å…³é”®è„šæœ¬æå‡ç½‘ç»œä¼˜å…ˆçº§ï¼ˆ<code>fetchpriority</code>ï¼‰å¹¶ä½¿ç”¨ <code>defer</code> é¿å…é˜»å¡ã€‚</li>
<li>å¤§é¡µé¢è¿›è¡Œè·¯ç”±/åŠŸèƒ½æ‹†åˆ†ï¼›CDN ç¼“å­˜ç­–ç•¥ä¸ç‰ˆæœ¬åŒ–ç¡®ä¿å‘½ä¸­ç‡ã€‚</li>
<li>é”™è¯¯ä¸æ€§èƒ½å¯è§‚æµ‹æ€§ï¼šå¯ç”¨ <code>crossorigin</code> ä¸ <code>Timing-Allow-Origin</code>ï¼Œä¾¿äºé‡‡é›†ä¸è¯Šæ–­ã€‚</li>
</ul>
<h2 data-id="heading-34">ğŸ’¡ æ€»ç»“</h2>
<p>è¿™5ä¸ªè„šæœ¬æ²»ç†æŠ€å·§è¦†ç›–äº†åŠ è½½æ¨¡å‹ã€æ¨¡å—åŒ–ã€è·¨åŸŸå®‰å…¨ã€é”™è¯¯ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<ol>
<li>åŠ è½½ä¸æ‰§è¡Œæ¨¡å‹ï¼šæ˜ç¡® <code>defer/async/module</code> çš„æ—¶åºä¸é€‚ç”¨åœºæ™¯ã€‚</li>
<li>æ¨¡å—è„šæœ¬ä¸å›é€€ï¼š<code>type="module"</code> + <code>nomodule</code> å…¼é¡¾ç°ä»£ä¸æ—§ç¯å¢ƒã€‚</li>
<li>å®‰å…¨ä¸è·¨åŸŸï¼šCSP <code>nonce</code>ã€SRI <code>integrity</code> ä¸ CORS æ­£ç¡®é…åˆã€‚</li>
<li>é”™è¯¯ç›‘æ§ä¸å¯è§‚æµ‹æ€§ï¼šç»Ÿä¸€ç›‘å¬ä¸è·¨åŸŸå¤´ï¼Œé¿å…â€œScript errorâ€ã€‚</li>
<li>æ€§èƒ½ä¸åŠ è½½ä¼˜åŒ–ï¼šæ‹†åˆ†ã€é¢„åŠ è½½ä¸ä¼˜å…ˆçº§ï¼Œé™ä½é˜»å¡æ—¶é—´ã€‚</li>
</ol>
<p>æŒæ¡ä»¥ä¸ŠæŠ€å·§èƒ½è®©ä½ çš„å‰ç«¯åº”ç”¨æ›´ç¨³å®šã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€‚å»ºè®®åœ¨å›¢é˜Ÿå†…å½¢æˆç»Ÿä¸€çš„è„šæœ¬æ²»ç†è§„èŒƒï¼Œå¹¶æä¾›æµ‹è¯•é¡µé¢éªŒè¯å…³é”®åœºæ™¯ï¼ŒæŒç»­è¿­ä»£ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-35">ç›¸å…³èµ„æº</h2>
<ul>
<li>MDNï¼šHTML <code>&lt;script&gt;</code> å…ƒç´ ï¼ˆå‚è€ƒä¸å±æ€§è¯´æ˜ï¼‰
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTML%2FReference%2FElements%2Fscript" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Reference/Elements/script" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>CSP æŒ‡å—ï¼šContent Security Policy
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCSP" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>SRI æŒ‡å—ï¼šSubresource Integrity
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FSecurity%2FSubresource_Integrity" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/Security/Subresource_Integrity" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
<li>Priority Hintsï¼ˆfetchpriorityï¼‰
<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Fpriority-hints" target="_blank" title="https://web.dev/articles/priority-hints" ref="nofollow noopener noreferrer">web.dev/articles/prâ€¦</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ ä»Šæ—¥æ”¶è·ï¼šæŒæ¡äº†è„šæœ¬åŠ è½½ä¸æ‰§è¡Œçš„5ä¸ªæ ¸å¿ƒæŠ€å·§ï¼Œå«å®‰å…¨ä¸æ€§èƒ½çš„æœ€ä½³å®è·µï¼Œè¿™äº›çŸ¥è¯†ç‚¹åœ¨å®é™…å‰ç«¯é¡¹ç›®ä¸­éå¸¸å®ç”¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot + MyBatis-Plus + Dynamic-Datasource è¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571299394345730090</link>    <guid>https://juejin.cn/post/7571299394345730090</guid>    <pubDate>2025-11-11T14:00:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571299394345730090" data-draft-id="7571258854901399595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" SpringBoot + MyBatis-Plus + Dynamic-Datasource è¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-11T14:00:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             SpringBoot + MyBatis-Plus + Dynamic-Datasource è¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T14:00:54.000Z" title="Tue Nov 11 2025 14:00:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œä½¿ç”¨MyBatis-Pluså’ŒDynamic-Datasourceå®ç°è¯»å†™åˆ†ç¦»æ˜¯ä¸€ç§å¸¸è§ä¸”é«˜æ•ˆçš„æ¶æ„é€‰æ‹©ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è®²è§£å®Œæ•´çš„å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€é…ç½®ã€ä»£ç å®ç°ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚</p>
<h2 data-id="heading-0">1. è¯»å†™åˆ†ç¦»æ¦‚è¿°ä¸æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>è¯»å†™åˆ†ç¦»æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®åº“ä¼˜åŒ–æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ•°æ®åº“çš„å†™æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEï¼‰å’Œè¯»æ“ä½œï¼ˆSELECTï¼‰åˆ†å‘åˆ°ä¸åŒçš„æ•°æ®åº“èŠ‚ç‚¹ä¸Šã€‚ä¸»æ•°æ®åº“ï¼ˆMasterï¼‰è´Ÿè´£å¤„ç†æ‰€æœ‰å†™æ“ä½œï¼Œè€Œä»æ•°æ®åº“ï¼ˆSlaveï¼‰è´Ÿè´£å¤„ç†è¯»æ“ä½œï¼Œé€šè¿‡æ•°æ®åº“çš„ä¸»ä»å¤åˆ¶æœºåˆ¶ä¿æŒæ•°æ®åŒæ­¥ã€‚</p>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒä»·å€¼</h3>
<ul>
<li><strong>æå‡å¹¶å‘æ€§èƒ½</strong>ï¼šå°†è¯»è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªä»åº“ï¼Œå‡è½»ä¸»åº“å‹åŠ›</li>
<li><strong>æé«˜ç³»ç»Ÿå¯ç”¨æ€§</strong>ï¼šå•ä¸ªä»åº“æ•…éšœä¸å½±å“è¯»æœåŠ¡</li>
<li><strong>ä¼˜åŒ–å“åº”é€Ÿåº¦</strong>ï¼šä¸“åº“ä¸“ç”¨ï¼Œé¿å…è¯»å†™æ“ä½œç›¸äº’é˜»å¡</li>
</ul>
<h3 data-id="heading-2">1.2 æŠ€æœ¯æ¶æ„</h3>
<pre><code class="hljs language-markdown" lang="markdown">åº”ç”¨ç¨‹åº â†’ Dynamic-Datasource â†’ ä¸»åº“ï¼ˆå†™æ“ä½œï¼‰
<span class="hljs-code">                     â†“
                   ä»åº“ï¼ˆè¯»æ“ä½œï¼‰
</span></code></pre>
<p><em>å›¾ï¼šè¯»å†™åˆ†ç¦»æ¶æ„ç¤ºæ„å›¾</em></p>
<h2 data-id="heading-3">2. ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–é…ç½®</h2>
<h3 data-id="heading-4">2.1 æ·»åŠ Mavenä¾èµ–</h3>
<p>é¦–å…ˆåœ¨é¡¹ç›®çš„<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MyBatis-Plus å¯åŠ¨å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Dynamic-Datasource å¯åŠ¨å™¨ï¼ˆæ ¸å¿ƒä¾èµ–ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MySQL é©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- è¿æ¥æ± ï¼ˆå¯é€‰ï¼ŒHikariCPå·²å†…ç½®ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><em>citation:2][citation:3</em></p>
<h3 data-id="heading-5">2.2 é…ç½®æ–‡ä»¶è®¾ç½®</h3>
<p>åœ¨<code>application.yml</code>ä¸­é…ç½®ä¸»ä»æ•°æ®æºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>  <span class="hljs-comment"># è®¾ç½®é»˜è®¤æ•°æ®æºä¸ºä¸»åº“</span>
      <span class="hljs-attr">strict:</span> <span class="hljs-literal">false</span>   <span class="hljs-comment"># æ˜¯å¦ä¸¥æ ¼åŒ¹é…æ•°æ®æºï¼Œfalseæ—¶æœªåŒ¹é…åˆ°æŒ‡å®šæ•°æ®æºåˆ™ä½¿ç”¨é»˜è®¤æ•°æ®æº</span>
      <span class="hljs-attr">datasource:</span>
        <span class="hljs-comment"># ä¸»åº“é…ç½®ï¼ˆå†™æ“ä½œï¼‰</span>
        <span class="hljs-attr">master:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://master-host:3306/core?useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">admin</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">master@123</span>
          <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-comment"># ä»åº“é…ç½®ï¼ˆè¯»æ“ä½œï¼‰- æ”¯æŒå¤šä¸ªä»åº“</span>
        <span class="hljs-attr">slave1:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://slave1-host:3306/core?useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">readonly</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">slave@123</span>
          <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">slave2:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://slave2-host:3306/core?useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">readonly</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">slave@123</span>
          <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      
      <span class="hljs-comment"># è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®ï¼ˆå¤šä¸ªä»åº“æ—¶ç”Ÿæ•ˆï¼‰</span>
      <span class="hljs-attr">strategy:</span> 
        <span class="hljs-attr">slave:</span> <span class="hljs-string">round_robin</span>  <span class="hljs-comment"># ä»åº“è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šrandom(éšæœº)/round_robin(è½®è¯¢)</span>
      
      <span class="hljs-comment"># è¿æ¥æ± é…ç½®ï¼ˆHikariCPï¼‰</span>
      <span class="hljs-attr">hikari:</span>
        <span class="hljs-attr">max-pool-size:</span> <span class="hljs-number">20</span>      <span class="hljs-comment"># æœ€å¤§è¿æ¥æ•°</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>           <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥</span>
        <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>  <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´(ms)</span>
        <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>  <span class="hljs-comment"># ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´(ms)</span>
        <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span> <span class="hljs-comment"># è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ(ms)</span>

<span class="hljs-comment"># MyBatis-Plus é…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼€å¯é©¼å³°å‘½åè½¬æ¢</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>  <span class="hljs-comment"># æ‰“å°SQLæ—¥å¿—(è°ƒè¯•ç”¨)</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>  <span class="hljs-comment"># ä¸»é”®ç­–ç•¥è‡ªå¢</span>
</code></pre>
<p><em>citation:2][citation:6</em></p>
<h2 data-id="heading-6">3. æ•°æ®æºä¸MyBatis-Plusé…ç½®ç±»</h2>
<h3 data-id="heading-7">3.1 åŠ¨æ€æ•°æ®æºè‡ªåŠ¨é…ç½®</h3>
<p>Dynamic-Datasource starterå·²ç»æä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ— éœ€é¢å¤–é…ç½®ã€‚ä½†å¦‚æœéœ€è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥åˆ›å»ºé…ç½®ç±»ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@MapperScan</span>(<span class="hljs-string">"com.example.mapper"</span>)  <span class="hljs-comment">// æŒ‡å®šMyBatis mapperæ¥å£çš„æ‰«æè·¯å¾„</span>
public class DataSourceConfig {
    
    <span class="hljs-comment">/**
     * é…ç½®åŠ¨æ€æ•°æ®æº
     * Dynamic-Datasourceä¼šè‡ªåŠ¨æ ¹æ®application.ymlçš„é…ç½®åˆ›å»ºæ•°æ®æº
     * æ­¤å¤„å¯ä»¥æ·»åŠ è‡ªå®šä¹‰é…ç½®
     */</span>
    <span class="hljs-variable">@Bean</span>
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.dynamic"</span>)
    public DynamicDataSourceProperties <span class="hljs-built_in">dynamicDataSourceProperties</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DynamicDataSourceProperties</span>();
    }
    
    <span class="hljs-comment">/**
     * é…ç½®MyBatis-Plusæ‹¦æˆªå™¨ï¼ˆåˆ†é¡µæ’ä»¶ç­‰ï¼‰
     */</span>
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">MybatisPlusInterceptor</span> <span class="hljs-selector-tag">mybatisPlusInterceptor</span>() {
        <span class="hljs-selector-tag">MybatisPlusInterceptor</span> <span class="hljs-selector-tag">interceptor</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">MybatisPlusInterceptor</span>();
        <span class="hljs-comment">// æ·»åŠ åˆ†é¡µæ’ä»¶</span>
        <span class="hljs-selector-tag">PaginationInnerInterceptor</span> <span class="hljs-selector-tag">paginationInterceptor</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">PaginationInnerInterceptor</span>(DbType.MYSQL);
        <span class="hljs-selector-tag">paginationInterceptor</span><span class="hljs-selector-class">.setMaxLimit</span>(<span class="hljs-number">1000</span>L);  <span class="hljs-comment">// è®¾ç½®æœ€å¤§åˆ†é¡µé™åˆ¶</span>
        <span class="hljs-selector-tag">interceptor</span><span class="hljs-selector-class">.addInnerInterceptor</span>(paginationInterceptor);
        
        <span class="hljs-comment">// å¯ä»¥æ·»åŠ å…¶ä»–æ’ä»¶ï¼Œå¦‚ä¹è§‚é”æ’ä»¶ç­‰</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">interceptor</span>;
    }
}
</code></pre>
<p><em>citation:1][citation:5</em></p>
<h2 data-id="heading-8">4. ä¸šåŠ¡å±‚å®ç°è¯»å†™åˆ†ç¦»</h2>
<h3 data-id="heading-9">4.1 ä½¿ç”¨@DSæ³¨è§£æ‰‹åŠ¨åˆ‡æ¢æ•°æ®æº</h3>
<p>æœ€ç›´æ¥çš„æ–¹å¼æ˜¯åœ¨Serviceå±‚ä½¿ç”¨<code>@DS</code>æ³¨è§£æŒ‡å®šæ•°æ®æºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-comment">/**
     * å†™æ“ä½œï¼šä½¿ç”¨<span class="hljs-doctag">@DS</span>("master")æŒ‡å®šä¸»åº“
     * æ³¨æ„ï¼šå†™æ“ä½œå»ºè®®éƒ½ä½¿ç”¨ä¸»åº“ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
     */</span>
    <span class="hljs-meta">@DS("master")</span>  <span class="hljs-comment">// æŒ‡å®šä½¿ç”¨ä¸»åº“</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>  <span class="hljs-comment">// æ·»åŠ äº‹åŠ¡ç®¡ç†</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || StringUtils.isBlank(user.getUsername())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ä¸å®Œæ•´"</span>);
        }
        
        <span class="hljs-comment">// è®¾ç½®åˆ›å»ºæ—¶é—´</span>
        user.setCreateTime(LocalDateTime.now());
        user.setUpdateTime(LocalDateTime.now());
        
        <span class="hljs-comment">// æ‰§è¡Œæ’å…¥æ“ä½œï¼Œè¿™é‡Œä¼šä½¿ç”¨ä¸»åº“</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> save(user);
        
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–ä¸šåŠ¡é€»è¾‘</span>
        log.info(<span class="hljs-string">"åˆ›å»ºç”¨æˆ·æˆåŠŸï¼Œç”¨æˆ·ID: {}"</span>, user.getId());
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * è¯»æ“ä½œï¼šä½¿ç”¨<span class="hljs-doctag">@DS</span>("slave")æŒ‡å®šä»åº“
     * æ¡†æ¶ä¼šæ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©slave1æˆ–slave2
     */</span>
    <span class="hljs-meta">@DS("slave")</span>  <span class="hljs-comment">// æŒ‡å®šä½¿ç”¨ä»åº“ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (id == <span class="hljs-literal">null</span> || id &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·IDä¸åˆæ³•"</span>);
        }
        
        <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œä¼šä½¿ç”¨ä»åº“</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getById(id);
        
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
            log.warn(<span class="hljs-string">"æœªæ‰¾åˆ°å¯¹åº”ç”¨æˆ·ï¼Œç”¨æˆ·ID: {}"</span>, id);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        }
        
        <span class="hljs-keyword">return</span> user;
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æŸ¥è¯¢ï¼šåŒæ ·ä½¿ç”¨ä»åº“
     */</span>
    <span class="hljs-meta">@DS("slave")</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">listUsersByCondition</span><span class="hljs-params">(UserQuery query)</span> {
        <span class="hljs-comment">// æ„å»ºæŸ¥è¯¢æ¡ä»¶</span>
        LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        
        <span class="hljs-keyword">if</span> (StringUtils.isNotBlank(query.getUsername())) {
            wrapper.like(User::getUsername, query.getUsername());
        }
        
        <span class="hljs-keyword">if</span> (query.getStatus() != <span class="hljs-literal">null</span>) {
            wrapper.eq(User::getStatus, query.getStatus());
        }
        
        <span class="hljs-comment">// æ·»åŠ æ’åº</span>
        wrapper.orderByDesc(User::getCreateTime);
        
        <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢ï¼Œä½¿ç”¨ä»åº“</span>
        <span class="hljs-keyword">return</span> list(wrapper);
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ“ä½œï¼šå¿…é¡»ä½¿ç”¨ä¸»åº“
     */</span>
    <span class="hljs-meta">@DS("master")</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ä¸å®Œæ•´"</span>);
        }
        
        <span class="hljs-comment">// è®¾ç½®æ›´æ–°æ—¶é—´</span>
        user.setUpdateTime(LocalDateTime.now());
        
        <span class="hljs-comment">// æ‰§è¡Œæ›´æ–°ï¼Œä½¿ç”¨ä¸»åº“</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> updateById(user);
        
        <span class="hljs-keyword">if</span> (result) {
            log.info(<span class="hljs-string">"æ›´æ–°ç”¨æˆ·æˆåŠŸï¼Œç”¨æˆ·ID: {}"</span>, user.getId());
        } <span class="hljs-keyword">else</span> {
            log.error(<span class="hljs-string">"æ›´æ–°ç”¨æˆ·å¤±è´¥ï¼Œç”¨æˆ·ID: {}"</span>, user.getId());
        }
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * åˆ é™¤æ“ä½œï¼šå¿…é¡»ä½¿ç”¨ä¸»åº“
     */</span>
    <span class="hljs-meta">@DS("master")</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">if</span> (id == <span class="hljs-literal">null</span> || id &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·IDä¸åˆæ³•"</span>);
        }
        
        <span class="hljs-comment">// æ‰§è¡Œåˆ é™¤ï¼Œä½¿ç”¨ä¸»åº“</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> removeById(id);
        
        <span class="hljs-keyword">if</span> (result) {
            log.info(<span class="hljs-string">"åˆ é™¤ç”¨æˆ·æˆåŠŸï¼Œç”¨æˆ·ID: {}"</span>, id);
        } <span class="hljs-keyword">else</span> {
            log.warn(<span class="hljs-string">"åˆ é™¤ç”¨æˆ·å¤±è´¥ï¼Œç”¨æˆ·ID: {}"</span>, id);
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p><em>citation:2][citation:8</em></p>
<h3 data-id="heading-10">4.2 åŸºäºAOPçš„è‡ªåŠ¨æ•°æ®æºåˆ‡æ¢ï¼ˆæ¨èï¼‰</h3>
<p>å¯¹äºå¤§å‹é¡¹ç›®ï¼Œæ‰‹åŠ¨æ·»åŠ <code>@DS</code>æ³¨è§£æ¯”è¾ƒç¹çï¼Œå¯ä»¥é€šè¿‡AOPè‡ªåŠ¨æ ¹æ®æ–¹æ³•ç±»å‹åˆ‡æ¢æ•°æ®æºï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Aspect</span>
<span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Slf4j</span>
public class DataSourceAspect {
    
    <span class="hljs-comment">/**
     * å®šä¹‰åˆ‡ç‚¹ï¼šæ‹¦æˆªServiceå±‚çš„æ‰€æœ‰æ–¹æ³•
     */</span>
    <span class="hljs-variable">@Pointcut</span>(<span class="hljs-string">"execution(* com.example.service..*.*(..))"</span>)
    public void <span class="hljs-built_in">servicePointcut</span>() {}
    
    <span class="hljs-comment">/**
     * å‰ç½®é€šçŸ¥ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰é€‰æ‹©æ•°æ®æº
     */</span>
    <span class="hljs-variable">@Before</span>(<span class="hljs-string">"servicePointcut()"</span>)
    public void <span class="hljs-built_in">before</span>(JoinPoint joinPoint) {
        <span class="hljs-comment">// è·å–æ–¹æ³•å</span>
        <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">methodName</span> = <span class="hljs-selector-tag">joinPoint</span><span class="hljs-selector-class">.getSignature</span>()<span class="hljs-selector-class">.getName</span>();
        
        <span class="hljs-comment">// æ ¹æ®æ–¹æ³•åå‰ç¼€åˆ¤æ–­æ˜¯è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œ</span>
        <span class="hljs-selector-tag">if</span> (<span class="hljs-built_in">isReadOperation</span>(methodName)) {
            <span class="hljs-comment">// è¯»æ“ä½œä½¿ç”¨ä»åº“</span>
            <span class="hljs-selector-tag">DynamicDataSourceContextHolder</span><span class="hljs-selector-class">.push</span>(<span class="hljs-string">"slave"</span>);
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">"åˆ‡æ¢æ•°æ®æºåˆ°ä»åº“ï¼Œæ–¹æ³•å: {}"</span>, methodName);
        } <span class="hljs-selector-tag">else</span> {
            <span class="hljs-comment">// å†™æ“ä½œä½¿ç”¨ä¸»åº“</span>
            <span class="hljs-selector-tag">DynamicDataSourceContextHolder</span><span class="hljs-selector-class">.push</span>(<span class="hljs-string">"master"</span>);
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">"åˆ‡æ¢æ•°æ®æºåˆ°ä¸»åº“ï¼Œæ–¹æ³•å: {}"</span>, methodName);
        }
    }
    
    <span class="hljs-comment">/**
     * åç½®é€šçŸ¥ï¼šæ¸…ç†æ•°æ®æºä¸Šä¸‹æ–‡
     */</span>
    @<span class="hljs-selector-tag">After</span>(<span class="hljs-string">"servicePointcut()"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">after</span>() {
        <span class="hljs-selector-tag">DynamicDataSourceContextHolder</span><span class="hljs-selector-class">.clear</span>();
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">"æ¸…é™¤æ•°æ®æºä¸Šä¸‹æ–‡"</span>);
    }
    
    <span class="hljs-comment">/**
     * åˆ¤æ–­æ˜¯å¦ä¸ºè¯»æ“ä½œ
     * å¯ä»¥æ ¹æ®æ–¹æ³•åå‰ç¼€è¿›è¡Œåˆ¤æ–­
     */</span>
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">isReadOperation</span>(String methodName) {
        <span class="hljs-comment">// å¸¸è§çš„è¯»æ“ä½œæ–¹æ³•å‰ç¼€</span>
        <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">readPrefixes</span> = {"<span class="hljs-selector-tag">get</span>", "<span class="hljs-selector-tag">select</span>", "<span class="hljs-selector-tag">list</span>", "<span class="hljs-selector-tag">query</span>", "<span class="hljs-selector-tag">find</span>", "<span class="hljs-selector-tag">search</span>", "<span class="hljs-selector-tag">count</span>", "<span class="hljs-selector-tag">check</span>"};
        
        <span class="hljs-selector-tag">for</span> (String <span class="hljs-attribute">prefix </span>: readPrefixes) {
            <span class="hljs-selector-tag">if</span> (methodName.<span class="hljs-built_in">startsWith</span>(prefix)) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">true</span>;
            }
        }
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">false</span>;
    }
}
</code></pre>
<p><em>citation:3][citation:7</em></p>
<p>ä½¿ç”¨AOPåï¼ŒServiceå±‚çš„ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-meta">@Service</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ServiceImpl&lt;UserMapper</span>, <span class="hljs-title">User&gt;</span> <span class="hljs-title">implements</span> <span class="hljs-title">UserService</span> </span>{
    
    <span class="hljs-meta">@Transactional</span>(rollbackFor = <span class="hljs-type">Exception</span>.<span class="hljs-keyword">class</span>)
    <span class="hljs-meta">@Override</span>
    public boolean createUser(<span class="hljs-type">User</span> user) {
        <span class="hljs-comment">// è‡ªåŠ¨ä½¿ç”¨ä¸»åº“ï¼ˆAOPæ ¹æ®æ–¹æ³•ååˆ¤æ–­ï¼‰</span>
        user.setCreateTime(<span class="hljs-type">LocalDateTime</span>.now());
        <span class="hljs-keyword">return</span> save(user);
    }
    
    <span class="hljs-meta">@Override</span>
    public <span class="hljs-type">User</span> getUserById(<span class="hljs-type">Long</span> id) {
        <span class="hljs-comment">// è‡ªåŠ¨ä½¿ç”¨ä»åº“ï¼ˆAOPæ ¹æ®æ–¹æ³•åå‰ç¼€"get"åˆ¤æ–­ï¼‰</span>
        <span class="hljs-keyword">return</span> getById(id);
    }
    
    <span class="hljs-comment">// å…¶ä»–æ–¹æ³•æ— éœ€æ·»åŠ @DSæ³¨è§£ï¼Œç”±AOPè‡ªåŠ¨å¤„ç†</span>
}
</code></pre>
<h2 data-id="heading-11">5. äº‹åŠ¡å¤„ç†ç­–ç•¥</h2>
<p>äº‹åŠ¡å¤„ç†æ˜¯è¯»å†™åˆ†ç¦»ä¸­çš„å…³é”®é—®é¢˜ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<h3 data-id="heading-12">5.1 å•æ•°æ®æºäº‹åŠ¡</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Service</span>
public class OrderServiceImpl extends ServiceImpl&lt;OrderMapper, Order&gt; implements OrderService {
    
    <span class="hljs-comment">/**
     * å•æ•°æ®æºäº‹åŠ¡ï¼šæ‰€æœ‰æ“ä½œéƒ½åœ¨ä¸»åº“æ‰§è¡Œ
     * ä½¿ç”¨@DS("master")ç¡®ä¿å³ä½¿æœ‰AOPé…ç½®ä¹Ÿä½¿ç”¨ä¸»åº“
     */</span>
    <span class="hljs-variable">@DS</span>(<span class="hljs-string">"master"</span>)  <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šä¸»åº“</span>
    <span class="hljs-variable">@Transactional</span>(rollbackFor = Exception.class)  <span class="hljs-comment">// å£°æ˜å¼äº‹åŠ¡</span>
    <span class="hljs-variable">@Override</span>
    public void <span class="hljs-built_in">createOrder</span>(Order order) {
        <span class="hljs-comment">// 1. ä¿å­˜è®¢å•ä¸»ä¿¡æ¯ï¼ˆä¸»åº“ï¼‰</span>
        <span class="hljs-selector-tag">save</span>(order);
        
        <span class="hljs-comment">// 2. æ›´æ–°åº“å­˜ï¼ˆä¸»åº“ï¼‰</span>
        <span class="hljs-selector-tag">updateStock</span>(order);
        
        <span class="hljs-comment">// 3. è®°å½•æ“ä½œæ—¥å¿—ï¼ˆä¸»åº“ï¼‰</span>
        <span class="hljs-selector-tag">logOrderOperation</span>(order);
        
        <span class="hljs-comment">// å¦‚æœä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡å›æ»š</span>
    }
    
    <span class="hljs-comment">/**
     * åªè¯»äº‹åŠ¡ï¼šå¯ä»¥æŒ‡å®šä»åº“
     */</span>
    @<span class="hljs-selector-tag">DS</span>(<span class="hljs-string">"slave"</span>)
    @<span class="hljs-selector-tag">Transactional</span>(readOnly = true)  <span class="hljs-comment">// åªè¯»äº‹åŠ¡ï¼Œæœ‰ä¼˜åŒ–æ•ˆæœ</span>
    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Order</span> <span class="hljs-selector-tag">getOrderDetail</span>(Long orderId) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">getById</span>(orderId);
    }
}
</code></pre>
<h3 data-id="heading-13">5.2 å¤šæ•°æ®æºäº‹åŠ¡å¤„ç†</h3>
<p>å¯¹äºæ¶‰åŠå¤šä¸ªæ•°æ®æºçš„å¤æ‚äº‹åŠ¡ï¼Œéœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedTransactionService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨<span class="hljs-doctag">@DSTransactional</span>å®ç°å¤šæ•°æ®æºåˆ†å¸ƒå¼äº‹åŠ¡
     * æ³¨æ„ï¼šéœ€è¦é›†æˆSeataç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶
     */</span>
    <span class="hljs-comment">// @DSTransactional  // åˆ†å¸ƒå¼äº‹åŠ¡æ³¨è§£ï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">placeOrder</span><span class="hljs-params">(Order order, User user)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. ç”¨æˆ·æ“ä½œï¼ˆä¸»åº“ï¼‰</span>
            userService.updateUser(user);
            
            <span class="hljs-comment">// 2. è®¢å•æ“ä½œï¼ˆä¸»åº“ï¼‰</span>
            orderService.createOrder(order);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸</span>
            <span class="hljs-keyword">if</span> (order.getAmount() == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è®¢å•é‡‘é¢ä¸èƒ½ä¸ºç©º"</span>);
            }
            
            log.info(<span class="hljs-string">"ä¸‹å•æˆåŠŸ"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ä¸‹å•å¤±è´¥ï¼Œå·²å›æ»š"</span>, e);
            <span class="hljs-keyword">throw</span> e;  <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸è§¦å‘å›æ»š</span>
        }
    }
}
</code></pre>
<p><em>citation:7</em></p>
<h2 data-id="heading-14">6. é«˜çº§åŠŸèƒ½ä¸ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-15">6.1 å¤šä»åº“è´Ÿè½½å‡è¡¡</h3>
<p>å½“é…ç½®å¤šä¸ªä»åº“æ—¶ï¼ŒDynamic-Datasourceæ”¯æŒå¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">datasource:</span>
        <span class="hljs-attr">master:</span>
          <span class="hljs-comment"># ä¸»åº“é…ç½®...</span>
        <span class="hljs-attr">slave1:</span>
          <span class="hljs-comment"># ä»åº“1é…ç½®...</span>
        <span class="hljs-attr">slave2:</span>
          <span class="hljs-comment"># ä»åº“2é…ç½®...</span>
        <span class="hljs-attr">slave3:</span>
          <span class="hljs-comment"># ä»åº“3é…ç½®...</span>
      <span class="hljs-attr">strategy:</span>
        <span class="hljs-attr">slave:</span> <span class="hljs-string">round_robin</span>  <span class="hljs-comment"># è´Ÿè½½å‡è¡¡ç­–ç•¥</span>
        <span class="hljs-comment"># å¯é€‰å€¼:</span>
        <span class="hljs-comment"># random - éšæœºé€‰æ‹©ï¼ˆé»˜è®¤ï¼‰</span>
        <span class="hljs-comment"># round_robin - è½®è¯¢</span>
        <span class="hljs-comment"># weight_round_robin - åŠ æƒè½®è¯¢ï¼ˆéœ€è¦é¢å¤–é…ç½®æƒé‡ï¼‰</span>
</code></pre>
<p>è´Ÿè½½å‡è¡¡ç­–ç•¥å¯¹æ¯”ï¼š</p>

























<table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>random</td><td>éšæœºé€‰æ‹©ä»åº“</td><td>ç®€å•çš„è¯»è´Ÿè½½å‡è¡¡</td></tr><tr><td>round_robin</td><td>è½®è¯¢é€‰æ‹©ä»åº“</td><td>ä»åº“é…ç½®ç›¸è¿‘ï¼Œéœ€è¦å‡åŒ€åˆ†å¸ƒ</td></tr><tr><td>weight_round_robin</td><td>æ ¹æ®æƒé‡é€‰æ‹©</td><td>ä»åº“é…ç½®ä¸åŒï¼ŒæŒ‰æ€§èƒ½åˆ†é…è´Ÿè½½</td></tr></tbody></table>
<p><em>citation:3][citation:7</em></p>
<h3 data-id="heading-16">6.2 å¥åº·æ£€æŸ¥ä¸æ•…éšœè½¬ç§»</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Slf4j</span>
public class DataSourceHealthCheck {
    
    <span class="hljs-variable">@Autowired</span>
    private DataSource dataSource;
    
    <span class="hljs-comment">/**
     * å®šæ—¶æ£€æŸ¥ä»åº“å¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-variable">@Scheduled</span>(fixedRate = <span class="hljs-number">60000</span>)  <span class="hljs-comment">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
    public void <span class="hljs-built_in">checkSlaveHealth</span>() {
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å®ç°ä»åº“å¥åº·æ£€æŸ¥é€»è¾‘</span>
        <span class="hljs-comment">// å¦‚æœæŸä¸ªä»åº“ä¸å¯ç”¨ï¼Œå¯ä»¥åŠ¨æ€å°†å…¶ä»è´Ÿè½½å‡è¡¡æ± ä¸­ç§»é™¤</span>
        
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ‰§è¡Œä»åº“å¥åº·æ£€æŸ¥..."</span>);
        <span class="hljs-comment">// å®é™…å®ç°ä¸­å¯ä»¥ä½¿ç”¨JDBCæµ‹è¯•è¿æ¥æˆ–æŸ¥è¯¢æ•°æ®åº“çŠ¶æ€</span>
    }
    
    <span class="hljs-comment">/**
     * è·å–ä»åº“åŒæ­¥å»¶è¿Ÿ
     */</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">getReplicationDelay</span>(String slaveName) {
        <span class="hljs-comment">// æ‰§è¡ŒSQLæŸ¥è¯¢ä»åº“åŒæ­¥çŠ¶æ€</span>
        <span class="hljs-comment">// SHOW SLAVE STATUS å¯ä»¥è·å–Seconds_Behind_Masterç­‰ä¿¡æ¯</span>
        <span class="hljs-comment">// å¦‚æœå»¶è¿Ÿè¿‡å¤§ï¼Œå¯ä»¥ä¸´æ—¶å°†è¯¥ä»åº“æ ‡è®°ä¸ºä¸å¯ç”¨</span>
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-number">0</span><span class="hljs-selector-tag">L</span>;  <span class="hljs-comment">// è¿”å›å»¶è¿Ÿç§’æ•°</span>
    }
}
</code></pre>
<p><em>citation:2</em></p>
<h2 data-id="heading-17">7. æµ‹è¯•ä¸éªŒè¯</h2>
<h3 data-id="heading-18">7.1 å•å…ƒæµ‹è¯•</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@SpringBootTest</span>
<span class="hljs-keyword">@Slf</span>4j
class ReadWriteSeparationTest {
    
    <span class="hljs-keyword">@Autowired</span>
    private UserService userService;
    
    <span class="hljs-comment">/**
     * æµ‹è¯•å†™æ“ä½œï¼ˆåº”è¯¥è·¯ç”±åˆ°ä¸»åº“ï¼‰
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testWriteOperation() {
        User user = new <span class="hljs-built_in">User</span>();
        user<span class="hljs-selector-class">.setUsername</span>("testUser");
        user<span class="hljs-selector-class">.setEmail</span>("test@example.com");
        
        boolean result = userService<span class="hljs-selector-class">.createUser</span>(user);
        
        <span class="hljs-built_in">assertTrue</span>(result);
        log<span class="hljs-selector-class">.info</span>("å†™æ“ä½œæµ‹è¯•é€šè¿‡ï¼Œåº”è·¯ç”±åˆ°ä¸»åº“");
    }
    
    <span class="hljs-comment">/**
     * æµ‹è¯•è¯»æ“ä½œï¼ˆåº”è¯¥è·¯ç”±åˆ°ä»åº“ï¼‰
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testReadOperation() {
        User user = userService<span class="hljs-selector-class">.getUserById</span>(<span class="hljs-number">1</span>L);
        
        <span class="hljs-built_in">assertNotNull</span>(user);
        log<span class="hljs-selector-class">.info</span>("è¯»æ“ä½œæµ‹è¯•é€šè¿‡ï¼Œåº”è·¯ç”±åˆ°ä»åº“");
    }
    
    <span class="hljs-comment">/**
     * æµ‹è¯•äº‹åŠ¡å†…çš„æ•°æ®æºé€‰æ‹©
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testTransactionalOperation() {
        <span class="hljs-comment">// æµ‹è¯•äº‹åŠ¡æ–¹æ³•ï¼Œåº”å§‹ç»ˆä½¿ç”¨ä¸»åº“</span>
        User user = userService<span class="hljs-selector-class">.getUserById</span>(<span class="hljs-number">1</span>L);
        <span class="hljs-built_in">assertNotNull</span>(user);
        
        log<span class="hljs-selector-class">.info</span>("äº‹åŠ¡å†…æ“ä½œæµ‹è¯•å®Œæˆ");
    }
}
</code></pre>
<h3 data-id="heading-19">7.2 éªŒè¯æ•°æ®æºè·¯ç”±</h3>
<p>åœ¨<code>application.yml</code>ä¸­å¼€å¯SQLæ—¥å¿—ï¼ŒéªŒè¯è¯»å†™åˆ†ç¦»æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¼€å¯MyBatis SQLæ—¥å¿—</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.example.mapper:</span> <span class="hljs-string">debug</span>  <span class="hljs-comment"># Mapperæ¥å£çš„åŒ…è·¯å¾„</span>
    <span class="hljs-attr">com.baomidou.dynamic.datasource:</span> <span class="hljs-string">debug</span>  <span class="hljs-comment"># Dynamic-Datasourceæ—¥å¿—</span>
</code></pre>
<p>è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-number">2025</span><span class="hljs-number">-11</span><span class="hljs-number">-11</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> Master DataSource  <span class="hljs-operator">|</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> ...
<span class="hljs-number">2025</span><span class="hljs-number">-11</span><span class="hljs-number">-11</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">05</span> <span class="hljs-operator">|</span> Slave DataSource   <span class="hljs-operator">|</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> ...
</code></pre>
<p><em>citation:3</em></p>
<h2 data-id="heading-20">8. ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-21">8.1 ä¸»ä»åŒæ­¥å»¶è¿Ÿå¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CriticalReadService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-comment">/**
     * å¯¹äºä¸€è‡´æ€§è¦æ±‚é«˜çš„è¯»æ“ä½œï¼Œå¼ºåˆ¶èµ°ä¸»åº“
     */</span>
    <span class="hljs-meta">@DS(<span class="hljs-string">"master"</span>)</span>  <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨ä¸»åº“ï¼Œé¿å…è¯»å–æ—§æ•°æ®</span>
    <span class="hljs-keyword">public</span> User getCriticalUserInfo(<span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-comment">// ä¾‹å¦‚ï¼šè´¦æˆ·ä½™é¢ã€è®¢å•çŠ¶æ€ç­‰å…³é”®ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> userMapper.selectById(userId);
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥æ•°æ®æ˜¯å¦å·²åŒæ­¥
     */</span>
    <span class="hljs-keyword">public</span> boolean waitForReplication(<span class="hljs-built_in">Long</span> userId, int maxWaitSeconds) {
        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; maxWaitSeconds; i++) {
            User masterUser = getFromMaster(userId);
            User slaveUser = getFromSlave(userId);
            
            <span class="hljs-keyword">if</span> (Objects.equals(masterUser, slaveUser)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ•°æ®å·²åŒæ­¥</span>
            }
            
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// ç­‰å¾…1ç§’</span>
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
                <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// åŒæ­¥è¶…æ—¶</span>
    }
}
</code></pre>
<h3 data-id="heading-22">8.2 ç›‘æ§ä¸å‘Šè­¦</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># è¿æ¥æ± ç›‘æ§é…ç½®</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">druid:</span>
        <span class="hljs-comment"># å¼€å¯ç›‘æ§ç»Ÿè®¡</span>
        <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall,log4j</span>
        <span class="hljs-attr">web-stat-filter:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">stat-view-servlet:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">url-pattern:</span> <span class="hljs-string">/druid/*</span>
          <span class="hljs-attr">reset-enable:</span> <span class="hljs-literal">false</span>
          <span class="hljs-attr">login-username:</span> <span class="hljs-string">admin</span>
          <span class="hljs-attr">login-password:</span> <span class="hljs-string">admin</span>
</code></pre>
<h2 data-id="heading-23">9. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-24">9.1 äº‹åŠ¡å†…æ•°æ®æºåˆ‡æ¢å¤±æ•ˆ</h3>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨<code>@Transactional</code>æ–¹æ³•å†…ï¼Œæ•°æ®æºåœ¨æ–¹æ³•å¼€å§‹æ—¶ç¡®å®šï¼Œæ–¹æ³•å†…éƒ¨è°ƒç”¨æ— æ³•åˆ‡æ¢æ•°æ®æºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Service</span>
public class TransactionalService {
    
    <span class="hljs-variable">@Autowired</span>
    private ApplicationContext applicationContext;
    
    <span class="hljs-variable">@Transactional</span>
    public void <span class="hljs-built_in">transactionalMethod</span>() {
        <span class="hljs-comment">// æ–¹æ³•å†…éœ€è¦åˆ‡æ¢æ•°æ®æºæ—¶ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨</span>
        <span class="hljs-selector-tag">TransactionalService</span> <span class="hljs-selector-tag">self</span> = <span class="hljs-selector-tag">applicationContext</span><span class="hljs-selector-class">.getBean</span>(TransactionalService.class);
        
        <span class="hljs-comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ï¼Œå¯ä»¥æ­£å¸¸åˆ‡æ¢æ•°æ®æº</span>
        <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.readOperation</span>();  <span class="hljs-comment">// ä½¿ç”¨ä»åº“</span>
        <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.writeOperation</span>();  <span class="hljs-comment">// ä½¿ç”¨ä¸»åº“</span>
    }
    
    @<span class="hljs-selector-tag">DS</span>(<span class="hljs-string">"slave"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">readOperation</span>() {
        <span class="hljs-comment">// è¯»æ“ä½œ</span>
    }
    
    <span class="hljs-variable">@DS</span>(<span class="hljs-string">"master"</span>)
    public void <span class="hljs-built_in">writeOperation</span>() {
        <span class="hljs-comment">// å†™æ“ä½œ</span>
    }
}
</code></pre>
<h3 data-id="heading-25">9.2 åŠ¨æ€å¢å‡æ•°æ®æº</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSourceService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">DynamicDataSourceProvider</span> dataSourceProvider;
    
    <span class="hljs-comment">/**
     * è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addDataSource</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> dataSourceName, DataSourceProperty property</span>) {
        <span class="hljs-title class_">DynamicDataSourceContextHolder</span>.<span class="hljs-title function_">addDataSource</span>(dataSourceName, property);
        log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åŠ¨æ€æ·»åŠ æ•°æ®æº: {}"</span>, dataSourceName);
    }
    
    <span class="hljs-comment">/**
     * è¿è¡Œæ—¶ç§»é™¤æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">removeDataSource</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> dataSourceName</span>) {
        <span class="hljs-title class_">DynamicDataSourceContextHolder</span>.<span class="hljs-title function_">removeDataSource</span>(dataSourceName);
        log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"åŠ¨æ€ç§»é™¤æ•°æ®æº: {}"</span>, dataSourceName);
    }
}
</code></pre>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>é€šè¿‡SpringBoot + MyBatis-Plus + Dynamic-Datasourceå®ç°è¯»å†™åˆ†ç¦»ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ•°æ®åº“è¯»æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æ­£ç¡®é…ç½®</strong>ï¼šç¡®ä¿ä¸»ä»æ•°æ®æºé…ç½®æ­£ç¡®ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥åˆç†</li>
<li><strong>åˆç†ä½¿ç”¨æ³¨è§£</strong>ï¼šåœ¨é€‚å½“çš„æ–¹æ³•ä¸Šä½¿ç”¨<code>@DS</code>æ³¨è§£æˆ–é€šè¿‡AOPè‡ªåŠ¨åˆ‡æ¢</li>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šæ³¨æ„äº‹åŠ¡å†…çš„æ•°æ®æºè¡Œä¸ºï¼Œå…³é”®æ“ä½œå¼ºåˆ¶èµ°ä¸»åº“</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼ŒåŠæ—¶å‘ç°ä¸»ä»å»¶è¿Ÿç­‰é—®é¢˜</li>
<li><strong>æ•…éšœå¤„ç†</strong>ï¼šå®ç°ä»åº“æ•…éšœè‡ªåŠ¨è½¬ç§»å’Œæ¢å¤æœºåˆ¶</li>
</ol>
<p>è¿™ç§æ¶æ„åœ¨è¯»å†™æ¯”ä¾‹é«˜çš„åº”ç”¨ä¸­èƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œä½†ä¹Ÿéœ€è¦å¤„ç†å¥½ä¸»ä»åŒæ­¥å»¶è¿Ÿç­‰ä¸€è‡´æ€§é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå¦‚ä½•ç»“åˆSpring Cloudå®ç°åŠ¨æ€æ•°æ®æºçš„è·¯ç”±ç®¡ç†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571306072422826026</link>    <guid>https://juejin.cn/post/7571306072422826026</guid>    <pubDate>2025-11-11T13:45:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571306072422826026" data-draft-id="7571299394345697322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå¦‚ä½•ç»“åˆSpring Cloudå®ç°åŠ¨æ€æ•°æ®æºçš„è·¯ç”±ç®¡ç†ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-11T13:45:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå¦‚ä½•ç»“åˆSpring Cloudå®ç°åŠ¨æ€æ•°æ®æºçš„è·¯ç”±ç®¡ç†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T13:45:03.000Z" title="Tue Nov 11 2025 13:45:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå®ç°åŠ¨æ€æ•°æ®æºè·¯ç”±æ˜¯åº”å¯¹å¤šç§Ÿæˆ·ã€åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ç­‰å¤æ‚åœºæ™¯çš„å…³é”®æŠ€æœ¯ã€‚å®ƒèƒ½æ˜¾è‘—æå‡ç³»ç»Ÿçš„çµæ´»æ€§ã€å¯æ‰©å±•æ€§å’Œæ•°æ®å¤„ç†èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘å°†ä¸ºæ‚¨è¯¦ç»†è®²è§£å‡ ç§ä¸»æµçš„å®ç°æ–¹æ¡ˆã€‚</p>
<p>ä¸‹è¡¨å¯¹æ¯”äº†ä¸‰ç§ä¸»è¦çš„åŠ¨æ€æ•°æ®æºè·¯ç”±æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>

































<table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>æ ¸å¿ƒæœºåˆ¶</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>è€ƒè™‘å› ç´ </th></tr></thead><tbody><tr><td><strong>åŸºäº<code>AbstractRoutingDataSource</code>çš„è‡ªå®šä¹‰è·¯ç”±</strong></td><td>ç»§æ‰¿SpringæŠ½è±¡ç±»ï¼Œé€šè¿‡ThreadLocalä¸Šä¸‹æ–‡å’ŒAOP/æ³¨è§£åŠ¨æ€è·¯ç”±</td><td>å¤šç§Ÿæˆ·ï¼ˆæŒ‰ç§Ÿæˆ·IDåˆ†åº“ï¼‰ã€ä¸šåŠ¡åˆ†åº“ã€éœ€è¦é«˜åº¦å®šåˆ¶åŒ–è·¯ç”±é€»è¾‘çš„åœºæ™¯</td><td>çµæ´»æ€§æé«˜ï¼Œä¸Springæ¡†æ¶åŸç”Ÿé›†æˆå¥½ï¼Œå¯å®Œå…¨æŒæ§è·¯ç”±é€»è¾‘</td><td>éœ€è‡ªè¡Œå®ç°å¤§éƒ¨åˆ†ä»£ç ï¼ˆå¦‚AOPã€ä¸Šä¸‹æ–‡ç®¡ç†ï¼‰ï¼Œå¤æ‚åº¦è¾ƒé«˜</td></tr><tr><td><strong>åŸºäº<code>dynamic-datasource-spring-boot-starter</code>ç»„ä»¶</strong></td><td>ä½¿ç”¨<code>@DS</code>æ³¨è§£åœ¨æ–¹æ³•æˆ–ç±»ä¸Šå£°æ˜å¼åˆ‡æ¢æ•°æ®æº</td><td>è¯»å†™åˆ†ç¦»ã€ä¸€ä¸»å¤šä»ã€å¤šç§ç±»å‹æ•°æ®åº“æ··åˆè¿æ¥</td><td>å¼€ç®±å³ç”¨ï¼Œé…ç½®ç®€å•ï¼Œå†…ç½®è´Ÿè½½å‡è¡¡ï¼Œæå¤§å‡å°‘ç¼–ç é‡</td><td>è·¯ç”±é€»è¾‘çš„å®šåˆ¶èƒ½åŠ›ä¸å¦‚è‡ªå®šä¹‰æ–¹æ¡ˆçµæ´»</td></tr><tr><td><strong>é›†æˆShardingSphereè¿›è¡Œåˆ†åº“åˆ†è¡¨</strong></td><td>ä½œä¸ºå®¢æˆ·ç«¯ä¸­é—´ä»¶ï¼Œåœ¨JDBCå±‚å¯¹SQLè¿›è¡Œè§£æã€è·¯ç”±ã€é‡å†™å’Œç»“æœå½’å¹¶</td><td>å¤§è§„æ¨¡æ•°æ®åˆ†ç‰‡ã€åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»+æ•°æ®åˆ†ç‰‡ç­‰å¤æ‚åœºæ™¯</td><td>åŠŸèƒ½å¼ºå¤§ï¼Œå±è”½åº•å±‚æ•°æ®åº“å¤æ‚æ€§ï¼Œæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡</td><td>æ¶æ„è¾ƒé‡ï¼Œå­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œå¯¹SQLæœ‰ä¸€å®šé™åˆ¶ï¼ˆå¦‚ä¸æ”¯æŒè·¨åº“å…³è”ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ’¡ æ–¹æ¡ˆä¸€ï¼šåŸºäº <code>AbstractRoutingDataSource</code>çš„è‡ªå®šä¹‰è·¯ç”±</h3>
<p>è¿™æ˜¯Springæ¡†æ¶æä¾›çš„åŸºç¡€èƒ½åŠ›ï¼Œéå¸¸é€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶è·¯ç”±é€»è¾‘çš„åœºæ™¯ï¼Œä¾‹å¦‚æ ¹æ®ç™»å½•ç”¨æˆ·ä¿¡æ¯æˆ–ç‰¹å®šçš„ä¸šåŠ¡è§„åˆ™æ¥é€‰æ‹©æ•°æ®åº“ã€‚</p>
<p><strong>å®ç°æ­¥éª¤</strong></p>
<ol>
<li>
<p><strong>å®šä¹‰æ•°æ®æºä¸Šä¸‹æ–‡æŒæœ‰è€…</strong>ï¼šä½¿ç”¨<code>ThreadLocal</code>æ¥ç¡®ä¿æ¯ä¸ªçº¿ç¨‹çš„æ•°æ®æºé€‰æ‹©æ˜¯éš”ç¦»çš„ï¼Œè¿™æ˜¯å®ç°åŠ¨æ€è·¯ç”±çš„æ ¸å¿ƒã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceContextHolder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">ThreadLocal</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-variable constant_">CONTEXT_HOLDER</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setDataSourceType</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> dataSourceType</span>) {
        <span class="hljs-variable constant_">CONTEXT_HOLDER</span>.<span class="hljs-title function_">set</span>(dataSourceType);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDataSourceType</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">CONTEXT_HOLDER</span>.<span class="hljs-title function_">get</span>();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">clearDataSourceType</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable constant_">CONTEXT_HOLDER</span>.<span class="hljs-title function_">remove</span>();
    }
}
</code></pre>
</li>
<li>
<p><strong>åˆ›å»ºåŠ¨æ€è·¯ç”±æ•°æ®æº</strong>ï¼šç»§æ‰¿<code>AbstractRoutingDataSource</code>å¹¶é‡å†™<code>determineCurrentLookupKey</code>æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {
        <span class="hljs-comment">// è¯¥æ–¹æ³•ä¼šåœ¨æ¯æ¬¡æ•°æ®åº“æ“ä½œå‰è¢«è°ƒç”¨ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æº</span>
        <span class="hljs-keyword">return</span> <span class="hljs-type">DataSourceContextHolder</span>.getDataSourceType();
    }
}
</code></pre>
</li>
<li>
<p><strong>é…ç½®å¤šä¸ªæ•°æ®æºå¹¶å¯ç”¨è·¯ç”±</strong>ï¼šåœ¨é…ç½®ç±»ä¸­ï¼Œå°†å¤šä¸ªç›®æ ‡æ•°æ®æºï¼ˆå¦‚<code>masterDataSource</code>, <code>slaveDataSource</code>) æ³¨å…¥åˆ°ä¸€ä¸ªMapä¸­ï¼Œå¹¶è®¾ç½®ä¸ºåŠ¨æ€æ•°æ®æºçš„ç›®æ ‡æ•°æ®æºã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
public class DataSourceConfig {
    <span class="hljs-variable">@Bean</span>
    <span class="hljs-variable">@Primary</span>
    public DataSource <span class="hljs-built_in">dynamicDataSource</span>(DataSource masterDataSource, DataSource slaveDataSource) {
        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">Object</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">targetDataSources</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
        <span class="hljs-selector-tag">targetDataSources</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"master"</span>, masterDataSource);
        <span class="hljs-selector-tag">targetDataSources</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"slave"</span>, slaveDataSource);

        <span class="hljs-selector-tag">DynamicRoutingDataSource</span> <span class="hljs-selector-tag">routingDataSource</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DynamicRoutingDataSource</span>();
        <span class="hljs-selector-tag">routingDataSource</span><span class="hljs-selector-class">.setDefaultTargetDataSource</span>(masterDataSource); <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ•°æ®æº</span>
        <span class="hljs-selector-tag">routingDataSource</span><span class="hljs-selector-class">.setTargetDataSources</span>(targetDataSources);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">routingDataSource</span>;
    }
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨AOPå’Œè‡ªå®šä¹‰æ³¨è§£åˆ‡æ¢æ•°æ®æº</strong>ï¼šå¯ä»¥å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼ˆå¦‚<code>@DataSource</code>ï¼‰ï¼Œç„¶åé€šè¿‡AOPåˆ‡é¢ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰æ ¹æ®æ³¨è§£å€¼åˆ‡æ¢æ•°æ®æºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
    <span class="hljs-meta">@Before("@annotation(dataSource)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeSwitchDataSource</span><span class="hljs-params">(JoinPoint joinPoint, DataSource dataSource)</span> {
        DataSourceContextHolder.setDataSourceType(dataSource.value());
    }
    <span class="hljs-meta">@After("@annotation(dataSource)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterSwitchDataSource</span><span class="hljs-params">(JoinPoint joinPoint, DataSource dataSource)</span> {
        DataSourceContextHolder.clearDataSourceType(); <span class="hljs-comment">// æ¸…ç†ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
    }
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-1">ğŸš€ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ <code>dynamic-datasource-spring-boot-starter</code>ç»„ä»¶</h3>
<p>å¯¹äºå¸¸è§çš„è¯»å†™åˆ†ç¦»ã€ä¸€ä¸»å¤šä»åœºæ™¯ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„é€‰æ‹©ï¼Œå®ƒèƒ½è®©ä½ é€šè¿‡ç®€å•çš„é…ç½®å’Œæ³¨è§£å®Œæˆå·¥ä½œã€‚</p>
<p><strong>å®ç°æ­¥éª¤</strong></p>
<ol>
<li>
<p><strong>å¼•å…¥ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- è¯·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>é…ç½®æ•°æ®æº</strong>ï¼šåœ¨<code>application.yml</code>ä¸­é…ç½®ä¸»ä»æ•°æ®æºã€‚é…ç½®é¡¹ä»¥ä¸‹åˆ’çº¿<code>_</code>åˆ†å‰²ï¼Œç›¸åŒå‰ç¼€çš„æ•°æ®æºä¼šè¢«è‡ªåŠ¨åˆ†ç»„ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span> <span class="hljs-comment"># è®¾ç½®é»˜è®¤æ•°æ®æº</span>
      <span class="hljs-attr">strict:</span> <span class="hljs-literal">false</span>   <span class="hljs-comment"># æ˜¯å¦ä¸¥æ ¼åŒ¹é…æ•°æ®æº</span>
      <span class="hljs-attr">datasource:</span>
        <span class="hljs-attr">master:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://ip1:3306/db</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">slave_1:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://ip2:3306/db</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">slave_2:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://ip3:3306/db</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨<code>@DS</code>æ³¨è§£åˆ‡æ¢</strong>ï¼šåœ¨Serviceå±‚çš„æ–¹æ³•æˆ–ç±»ä¸Šä½¿ç”¨<code>@DS</code>æ³¨è§£ï¼Œå³å¯è½»æ¾åˆ‡æ¢ã€‚ç»„ä»¶å†…ç½®äº†åŒç»„æ•°æ®æºçš„è´Ÿè½½å‡è¡¡ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Service</span>
<span class="hljs-variable">@DS</span>(<span class="hljs-string">"slave"</span>) <span class="hljs-comment">// ç±»çº§åˆ«æ³¨è§£ï¼Œæ­¤ç±»ä¸‹æ‰€æœ‰æ–¹æ³•é»˜è®¤ä½¿ç”¨slaveç»„ï¼ˆéšæœºé€‰æ‹©slave_1æˆ–slave_2ï¼‰</span>
public class UserServiceImpl implements UserService {
    <span class="hljs-variable">@Override</span>
    <span class="hljs-variable">@DS</span>(<span class="hljs-string">"master"</span>) <span class="hljs-comment">// æ–¹æ³•çº§åˆ«æ³¨è§£ä¼˜å…ˆï¼Œæ­¤æ–¹æ³•ä½¿ç”¨masteræ•°æ®æº</span>
    public void <span class="hljs-built_in">updateUser</span>(User user) {
        <span class="hljs-comment">// ... æ›´æ–°æ“ä½œ</span>
    }
    <span class="hljs-variable">@Override</span>
    <span class="hljs-comment">// æœªæ ‡æ³¨ï¼Œä½¿ç”¨ç±»æ³¨è§£ï¼Œå³slaveç»„</span>
    public User <span class="hljs-built_in">getUserById</span>(Long id) {
        <span class="hljs-comment">// ... æŸ¥è¯¢æ“ä½œ</span>
    }
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-2">ğŸ”§ æ–¹æ¡ˆä¸‰ï¼šé›†æˆ ShardingSphere è¿›è¡Œåˆ†åº“åˆ†è¡¨</h3>
<p>å½“å•åº“å•è¡¨æˆä¸ºæ€§èƒ½ç“¶é¢ˆæ—¶ï¼ŒShardingSphereæä¾›äº†å¼ºå¤§çš„åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»åŠåˆ†å¸ƒå¼äº‹åŠ¡èƒ½åŠ›ã€‚</p>
<p><strong>æ ¸å¿ƒé…ç½®ç¤ºä¾‹</strong></p>
<p>å…¶é…ç½®æ ¸å¿ƒæ˜¯å®šä¹‰åˆ†ç‰‡è§„åˆ™ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·IDï¼ˆ<code>user_id</code>ï¼‰è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">tables:</span>
          <span class="hljs-attr">t_user:</span>
            <span class="hljs-comment"># æŒ‡å®šå®é™…çš„æ•°æ®èŠ‚ç‚¹ï¼Œè¡¨ç¤ºæ•°æ®åˆ†å¸ƒåœ¨ds0å’Œds1ä¸¤ä¸ªåº“ï¼Œæ¯ä¸ªåº“æœ‰t_user0åˆ°t_user3å››å¼ è¡¨</span>
            <span class="hljs-attr">actual-data-nodes:</span> <span class="hljs-string">ds$-&gt;{0..1}.t_user$-&gt;{0..3}</span>
            <span class="hljs-comment"># åˆ†åº“ç­–ç•¥</span>
            <span class="hljs-attr">database-strategy:</span>
              <span class="hljs-attr">standard:</span>
                <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
                <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">database-inline</span>
            <span class="hljs-comment"># åˆ†è¡¨ç­–ç•¥</span>
            <span class="hljs-attr">table-strategy:</span>
              <span class="hljs-attr">standard:</span>
                <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
                <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">table-inline</span>
        <span class="hljs-comment"># å®šä¹‰åˆ†ç‰‡ç®—æ³•</span>
        <span class="hljs-attr">sharding-algorithms:</span>
          <span class="hljs-attr">database-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">ds$-&gt;{user_id</span> <span class="hljs-string">%</span> <span class="hljs-number">2</span><span class="hljs-string">}</span> <span class="hljs-comment"># åˆ†åº“ç®—æ³•ï¼šuser_id % 2</span>
          <span class="hljs-attr">table-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">t_user$-&gt;{user_id</span> <span class="hljs-string">%</span> <span class="hljs-number">4</span><span class="hljs-string">}</span> <span class="hljs-comment"># åˆ†è¡¨ç®—æ³•ï¼šuser_id % 4</span>
</code></pre>
<h3 data-id="heading-3">âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹ä¸å®è·µå»ºè®®</h3>
<p>æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œä»¥ä¸‹å‡ ç‚¹éƒ½éœ€è¦ç‰¹åˆ«å…³æ³¨ï¼š</p>
<ul>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šåœ¨ä½¿ç”¨äº†åŠ¨æ€æ•°æ®æºåˆ‡æ¢çš„æ–¹æ³•ä¸­ï¼Œå°¤å…¶æ˜¯è·¨ä¸åŒç‰©ç†æ•°æ®åº“çš„æ“ä½œï¼Œ<strong>éœ€è¦è°¨æ…å¤„ç†äº‹åŠ¡</strong>ã€‚Springçš„<code>@Transactional</code>æ³¨è§£é€šå¸¸åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¼šä½¿ç”¨åŒä¸€ä¸ªæ•°æ®æºè¿æ¥ã€‚å¦‚æœéœ€è¦åœ¨äº‹åŠ¡ä¸­åˆ‡æ¢æ•°æ®æºï¼Œå¯èƒ½éœ€è¦æ›´å¤æ‚çš„å¤„ç†ï¼Œä¾‹å¦‚ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆJTAï¼‰ã€‚</li>
<li><strong>è¿æ¥æ± é…ç½®</strong>ï¼šä¸ºæ¯ä¸ªæ•°æ®æºé…ç½®åˆé€‚çš„è¿æ¥æ± å‚æ•°ï¼ˆå¦‚<code>HikariCP</code>æˆ–<code>Druid</code>çš„<code>maximum-pool-size</code>, <code>connection-timeout</code>ï¼‰ï¼Œè¿™å¯¹ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§è‡³å…³é‡è¦ã€‚</li>
<li><strong>é…ç½®ä¿¡æ¯åŠ å¯†ä¸å®‰å…¨</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä¸åº”æ˜æ–‡å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚å¯ä»¥ä½¿ç”¨<code>Jasypt</code>ç­‰å·¥å…·è¿›è¡ŒåŠ å¯†ï¼Œæˆ–ç»“åˆSpring Cloud Configã€Nacosç­‰<strong>é…ç½®ä¸­å¿ƒ</strong>ç»Ÿä¸€ç®¡ç†åŠ å¯†åçš„é…ç½®ã€‚</li>
<li><strong>é“¾è·¯è¿½è¸ªä¸ç›‘æ§</strong>ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œä¸€ä¸ªè¯·æ±‚å¯èƒ½æ¶‰åŠå¤šä¸ªæ•°æ®æºçš„æ“ä½œã€‚å¯ä»¥é›†æˆ<strong>Spring Cloud Sleuth</strong>ç­‰ç»„ä»¶ï¼Œå°†æ•°æ®æºåˆ‡æ¢çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚æ•°æ®æºåç§°ï¼‰æ·»åŠ åˆ°é“¾è·¯è¿½è¸ªçš„Spanæ ‡ç­¾ä¸­ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥å’Œæ€§èƒ½åˆ†æã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ’ æ€»ç»“ä¸é€‰æ‹©</h3>
<p>é€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œæœ€ç»ˆå–å†³äºæ‚¨çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯è€ƒé‡ï¼š</p>
<ul>
<li>å¦‚æœåªæ˜¯ç®€å•çš„<strong>è¯»å†™åˆ†ç¦»</strong>æˆ–<strong>ä¸€ä¸»å¤šä»</strong>ï¼Œè¿½æ±‚å¿«é€Ÿå®ç°ï¼Œ<strong><code>dynamic-datasource-spring-boot-starter</code>ç»„ä»¶æ˜¯é¦–é€‰</strong>ã€‚</li>
<li>å¦‚æœè·¯ç”±é€»è¾‘éå¸¸<strong>ä¸ªæ€§åŒ–</strong>ï¼ˆå¦‚æ ¹æ®å¤æ‚ä¸šåŠ¡è§„åˆ™é€‰æ‹©æ•°æ®åº“ï¼‰ï¼Œé‚£ä¹ˆåŸºäº <strong><code>AbstractRoutingDataSource</code>çš„è‡ªå®šä¹‰è·¯ç”±</strong>æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ã€‚</li>
<li>å¦‚æœé¢ä¸´<strong>æµ·é‡æ•°æ®</strong>ï¼Œéœ€è¦è¿›è¡Œ<strong>åˆ†åº“åˆ†è¡¨</strong>ï¼Œé‚£ä¹ˆ<strong>ShardingSphere</strong>æ˜¯æ›´ä¸“ä¸šå’Œå¼ºå¤§çš„é€‰æ‹©ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ—ï¸ Spring Boot 3å®ç°MySQLè¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571304204754649142</link>    <guid>https://juejin.cn/post/7571304204754649142</guid>    <pubDate>2025-11-11T13:35:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571304204754649142" data-draft-id="7571306072422793258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ—ï¸ Spring Boot 3å®ç°MySQLè¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-11T13:35:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ—ï¸ Spring Boot 3å®ç°MySQLè¯»å†™åˆ†ç¦»å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T13:35:49.000Z" title="Tue Nov 11 2025 13:35:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âœ¨ è¯»å†™åˆ†ç¦»çš„æ ¸å¿ƒä»·å€¼</h2>
<p>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å¾€å¾€æˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚è¯»å†™åˆ†ç¦»é€šè¿‡å°†å†™æ“ä½œå®šå‘åˆ°ä¸»åº“ã€è¯»æ“ä½œåˆ†å‘åˆ°ä»åº“ï¼Œæ˜¾è‘—æå‡ç³»ç»Ÿè¯»æ€§èƒ½å’Œæ•°æ®å¯ç”¨æ€§ã€‚å½“ä¸»åº“å‡ºç°æ•…éšœæ—¶ï¼Œä»åº“å¯ä»¥ç»§ç»­æä¾›è¯»æœåŠ¡ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<h2 data-id="heading-1">âš™ï¸ é¡¹ç›®ä¾èµ–é…ç½®</h2>
<p>é¦–å…ˆåœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">ğŸ“ æ ¸å¿ƒå®ç°ä»£ç è¯¦è§£</h2>
<h3 data-id="heading-3">1. é…ç½®æ–‡ä»¶è®¾ç½®ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># ä¸»åº“é…ç½®ï¼ˆå†™æ“ä½œï¼‰</span>
    <span class="hljs-attr">master:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/master_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">master_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-comment"># Hikariè¿æ¥æ± é…ç½®</span>
      <span class="hljs-attr">hikari:</span>
        <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">30000</span>
        <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
        <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
        <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
    <span class="hljs-comment"># ä»åº“é…ç½®ï¼ˆè¯»æ“ä½œï¼‰</span>
    <span class="hljs-attr">slave:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/slave_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">slave_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">hikari:</span>
        <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>  <span class="hljs-comment"># ä»åº“å¯ä»¥é…ç½®æ›´å¤šè¿æ¥ï¼Œå› ä¸ºè¯»æ“ä½œé€šå¸¸æ›´é¢‘ç¹</span>
        <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">30000</span>
        <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
        <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
        <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-4">2. æ•°æ®æºæšä¸¾å®šä¹‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * æ•°æ®æºç±»å‹æšä¸¾
 * ç”¨äºæ ‡è¯†å½“å‰æ“ä½œåº”ä½¿ç”¨ä¸»åº“è¿˜æ˜¯ä»åº“
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DataSourceType</span> {
    MASTER,  <span class="hljs-comment">// ä¸»åº“ï¼šç”¨äºå†™æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEï¼‰</span>
    SLAVE    <span class="hljs-comment">// ä»åº“ï¼šç”¨äºè¯»æ“ä½œï¼ˆSELECTï¼‰</span>
}
</code></pre>
<h3 data-id="heading-5">3. æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
 * æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆåŸºäºThreadLocalå®ç°çº¿ç¨‹éš”ç¦»ï¼‰
 * åŠŸèƒ½ï¼šä¿å­˜å½“å‰çº¿ç¨‹ä½¿ç”¨çš„æ•°æ®æºç±»å‹ï¼Œç¡®ä¿å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®æºåˆ‡æ¢ä¸ä¼šç›¸äº’å¹²æ‰°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataSourceContextHolder</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„æ•°æ®æºä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final ThreadLocal&lt;DataSourceType&gt; CONTEXT_HOLDER = <span class="hljs-keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="hljs-comment">/**
     * è®¾ç½®å½“å‰çº¿ç¨‹çš„æ•°æ®æºç±»å‹
     * @param dataSourceType æ•°æ®æºç±»å‹ï¼ˆMASTERæˆ–SLAVEï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDataSourceType</span>(<span class="hljs-params">DataSourceType dataSourceType</span>)</span> {
        CONTEXT_HOLDER.<span class="hljs-keyword">set</span>(dataSourceType);
    }
    
    <span class="hljs-comment">/**
     * è·å–å½“å‰çº¿ç¨‹çš„æ•°æ®æºç±»å‹
     * @return å½“å‰æ•°æ®æºç±»å‹ï¼Œé»˜è®¤ä¸ºMASTERï¼ˆä¿è¯å†™æ“ä½œå¯é æ€§ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DataSourceType <span class="hljs-title">getDataSourceType</span>()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.<span class="hljs-keyword">get</span>() == <span class="hljs-literal">null</span> ? DataSourceType.MASTER : CONTEXT_HOLDER.<span class="hljs-keyword">get</span>();
    }
    
    <span class="hljs-comment">/**
     * æ¸…é™¤å½“å‰çº¿ç¨‹çš„æ•°æ®æºç±»å‹
     * é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨çº¿ç¨‹æ± åœºæ™¯ä¸‹
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">clearDataSourceType</span>()</span> {
        CONTEXT_HOLDER.<span class="hljs-keyword">remove</span>();
    }
}
</code></pre>
<h3 data-id="heading-6">4. åŠ¨æ€è·¯ç”±æ•°æ®æº</h3>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">/**
 * åŠ¨æ€è·¯ç”±æ•°æ®æºï¼ˆç»§æ‰¿Springçš„AbstractRoutingDataSourceï¼‰
 * æ ¸å¿ƒåŠŸèƒ½ï¼šæ ¹æ®å½“å‰ä¸Šä¸‹æ–‡åŠ¨æ€é€‰æ‹©ä¸»åº“æˆ–ä»åº“
 */</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DynamicRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractRoutingDataSource</span> </span>{
    
    <span class="hljs-comment">/**
     * å†³å®šå½“å‰æ•°æ®æºæŸ¥æ‰¾é”®ï¼ˆSpringåœ¨æ¯æ¬¡æ•°æ®åº“æ“ä½œå‰è°ƒç”¨æ­¤æ–¹æ³•ï¼‰
     * @return æ•°æ®æºæŸ¥æ‰¾é”®ï¼ˆMASTERæˆ–SLAVEï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">Object</span> determineCurrentLookupKey() {
        <span class="hljs-type">DataSourceType</span> dataSourceType = <span class="hljs-type">DataSourceContextHolder</span>.getDataSourceType();
        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">"å½“å‰ä½¿ç”¨çš„æ•°æ®æº: "</span> + dataSourceType);
        <span class="hljs-keyword">return</span> dataSourceType;
    }
}
</code></pre>
<h3 data-id="heading-7">5. æ•°æ®æºé…ç½®ç±»</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * æ•°æ®æºé…ç½®ç±»ï¼ˆæ ¸å¿ƒé…ç½®ï¼‰
 * é…ç½®ä¸»ä»æ•°æ®æºå¹¶åˆå§‹åŒ–è·¯ç”±æ•°æ®æº
 */</span>
<span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableTransactionManagement</span>
<span class="hljs-variable">@EnableJpaRepositories</span>(
    basePackages = <span class="hljs-string">"com.example.repository"</span>,
    entityManagerFactoryRef = <span class="hljs-string">"entityManagerFactory"</span>,
    transactionManagerRef = <span class="hljs-string">"transactionManager"</span>
)
public class DataSourceConfig {
    
    <span class="hljs-comment">/**
     * ä¸»åº“æ•°æ®æºï¼ˆå†™æ“ä½œï¼‰
     */</span>
    <span class="hljs-variable">@Bean</span>(name = <span class="hljs-string">"masterDataSource"</span>)
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.master"</span>)
    public DataSource <span class="hljs-built_in">masterDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
    
    <span class="hljs-comment">/**
     * ä»åº“æ•°æ®æºï¼ˆè¯»æ“ä½œï¼‰
     */</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"slaveDataSource"</span>)
    @<span class="hljs-selector-tag">ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.slave"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">slaveDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€è·¯ç”±æ•°æ®æºï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼Œä½œä¸ºä¸»æ•°æ®æºï¼‰
     */</span>
    @<span class="hljs-selector-tag">Primary</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"routingDataSource"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">routingDataSource</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"masterDataSource"</span>) DataSource masterDataSource,
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"slaveDataSource"</span>) DataSource slaveDataSource) {
        
        <span class="hljs-selector-tag">DynamicRoutingDataSource</span> <span class="hljs-selector-tag">routingDataSource</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">DynamicRoutingDataSource</span>();
        
        <span class="hljs-comment">// é…ç½®ç›®æ ‡æ•°æ®æºæ˜ å°„</span>
        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">Object</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">targetDataSources</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
        <span class="hljs-selector-tag">targetDataSources</span><span class="hljs-selector-class">.put</span>(DataSourceType.MASTER, masterDataSource);
        <span class="hljs-selector-tag">targetDataSources</span><span class="hljs-selector-class">.put</span>(DataSourceType.SLAVE, slaveDataSource);
        
        <span class="hljs-selector-tag">routingDataSource</span><span class="hljs-selector-class">.setTargetDataSources</span>(targetDataSources);
        <span class="hljs-selector-tag">routingDataSource</span><span class="hljs-selector-class">.setDefaultTargetDataSource</span>(masterDataSource); <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ä¸»åº“</span>
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">routingDataSource</span>;
    }
    
    <span class="hljs-comment">/**
     * å®ä½“ç®¡ç†å™¨å·¥å‚
     */</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"entityManagerFactory"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">LocalContainerEntityManagerFactoryBean</span> <span class="hljs-selector-tag">entityManagerFactory</span>(
            EntityManagerFactoryBuilder builder, 
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"routingDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">builder</span>
            <span class="hljs-selector-class">.dataSource</span>(dataSource)
            <span class="hljs-selector-class">.packages</span>(<span class="hljs-string">"com.example.entity"</span>)
            <span class="hljs-selector-class">.persistenceUnit</span>(<span class="hljs-string">"mysqlUnit"</span>)
            <span class="hljs-selector-class">.build</span>();
    }
    
    <span class="hljs-comment">/**
     * äº‹åŠ¡ç®¡ç†å™¨
     */</span>
    @<span class="hljs-selector-tag">Bean</span>(name = <span class="hljs-string">"transactionManager"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">transactionManager</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"entityManagerFactory"</span>) EntityManagerFactory entityManagerFactory) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JpaTransactionManager</span>(entityManagerFactory);
    }
}
</code></pre>
<h3 data-id="heading-8">6. AOPåˆ‡é¢å®ç°è‡ªåŠ¨è·¯ç”±</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºåˆ‡é¢é…ç½®ï¼ˆåŸºäºAOPè‡ªåŠ¨åˆ‡æ¢æ•°æ®æºï¼‰
 * é€šè¿‡æ–¹æ³•åè‡ªåŠ¨è¯†åˆ«è¯»å†™æ“ä½œï¼Œå®ç°æ•°æ®æºåŠ¨æ€è·¯ç”±
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(1)</span> <span class="hljs-comment">// ç¡®ä¿åœ¨äº‹åŠ¡åˆ‡é¢ä¹‹å‰æ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
    
    <span class="hljs-comment">/**
     * å†™æ“ä½œåˆ‡ç‚¹ï¼ˆinsertã€updateã€deleteã€saveå¼€å¤´çš„æ–¹æ³•ï¼‰
     */</span>
    <span class="hljs-meta">@Before("execution(* com.example.service..*.create*(..)) || " +
            "execution(* com.example.service..*.update*(..)) || " +
            "execution(* com.example.service..*.delete*(..)) || " +
            "execution(* com.example.service..*.save*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setWriteDataSourceType</span><span class="hljs-params">()</span> {
        DataSourceContextHolder.setDataSourceType(DataSourceType.MASTER);
        System.out.println(<span class="hljs-string">"åˆ‡æ¢åˆ°ä¸»åº“ï¼ˆå†™æ“ä½œï¼‰"</span>);
    }
    
    <span class="hljs-comment">/**
     * è¯»æ“ä½œåˆ‡ç‚¹ï¼ˆselectã€getã€findã€queryå¼€å¤´çš„æ–¹æ³•ï¼‰
     */</span>
    <span class="hljs-meta">@Before("execution(* com.example.service..*.select*(..)) || " +
            "execution(* com.example.service..*.get*(..)) || " +
            "execution(* com.example.service..*.find*(..)) || " +
            "execution(* com.example.service..*.query*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setReadDataSourceType</span><span class="hljs-params">()</span> {
        DataSourceContextHolder.setDataSourceType(DataSourceType.SLAVE);
        System.out.println(<span class="hljs-string">"åˆ‡æ¢åˆ°ä»åº“ï¼ˆè¯»æ“ä½œï¼‰"</span>);
    }
    
    <span class="hljs-comment">/**
     * åç½®å¤„ç†ï¼šæ¸…ç†æ•°æ®æºä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-meta">@After("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearDataSourceType</span><span class="hljs-params">()</span> {
        DataSourceContextHolder.clearDataSourceType();
        System.out.println(<span class="hljs-string">"æ¸…ç†æ•°æ®æºä¸Šä¸‹æ–‡"</span>);
    }
}
</code></pre>
<h3 data-id="heading-9">7. ä¸šåŠ¡å±‚ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * ç”¨æˆ·æœåŠ¡å®ç°ç±»
 * æ¼”ç¤ºè¯»å†™åˆ†ç¦»çš„å®é™…åº”ç”¨
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserRepository</span> userRepository;
    
    <span class="hljs-comment">/**
     * æ–°å¢ç”¨æˆ·ï¼ˆå†™æ“ä½œè‡ªåŠ¨è·¯ç”±åˆ°ä¸»åº“ï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// æ–¹æ³•åä»¥"create"å¼€å¤´ï¼ŒAOPä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°MASTERæ•°æ®æº</span>
        <span class="hljs-keyword">return</span> userRepository.<span class="hljs-title function_">save</span>(user);
    }
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ï¼ˆè¯»æ“ä½œè‡ªåŠ¨è·¯ç”±åˆ°ä»åº“ï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Transactional</span>(readOnly = <span class="hljs-literal">true</span>) <span class="hljs-comment">// åªè¯»äº‹åŠ¡ä¼˜åŒ–æ€§èƒ½</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">Long id</span>) {
        <span class="hljs-comment">// æ–¹æ³•åä»¥"get"å¼€å¤´ï¼ŒAOPä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°SLAVEæ•°æ®æº</span>
        <span class="hljs-keyword">return</span> userRepository.<span class="hljs-title function_">findById</span>(id).<span class="hljs-title function_">orElse</span>(<span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ˆè¯»æ“ä½œï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Transactional</span>(readOnly = <span class="hljs-literal">true</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt; <span class="hljs-title function_">getAllUsers</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> userRepository.<span class="hljs-title function_">findAll</span>();
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆå†™æ“ä½œï¼‰
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-keyword">return</span> userRepository.<span class="hljs-title function_">save</span>(user);
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ” æµ‹è¯•ä¸éªŒè¯</h2>
<h3 data-id="heading-11">å•å…ƒæµ‹è¯•ç±»</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * è¯»å†™åˆ†ç¦»æµ‹è¯•ç±»
 */</span>
<span class="hljs-keyword">@SpringBootTest</span>
class ReadWriteSeparationTest {
    
    <span class="hljs-keyword">@Autowired</span>
    private UserService userService;
    
    <span class="hljs-comment">/**
     * æµ‹è¯•å†™æ“ä½œï¼ˆåº”è·¯ç”±åˆ°ä¸»åº“ï¼‰
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testWriteOperation() {
        User user = new <span class="hljs-built_in">User</span>();
        user<span class="hljs-selector-class">.setUsername</span>("testUser");
        user<span class="hljs-selector-class">.setPassword</span>("password");
        
        User savedUser = userService<span class="hljs-selector-class">.createUser</span>(user);
        
        Assertions<span class="hljs-selector-class">.assertNotNull</span>(savedUser.getId());
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("å†™æ“ä½œæµ‹è¯•é€šè¿‡ï¼ˆè·¯ç”±åˆ°ä¸»åº“ï¼‰");
    }
    
    <span class="hljs-comment">/**
     * æµ‹è¯•è¯»æ“ä½œï¼ˆåº”è·¯ç”±åˆ°ä»åº“ï¼‰
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testReadOperation() {
        List&lt;User&gt; users = userService<span class="hljs-selector-class">.getAllUsers</span>();
        
        Assertions<span class="hljs-selector-class">.assertNotNull</span>(users);
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¯»æ“ä½œæµ‹è¯•é€šè¿‡ï¼ˆè·¯ç”±åˆ°ä»åº“ï¼‰");
    }
    
    <span class="hljs-comment">/**
     * æµ‹è¯•è¯»å†™æ··åˆæ“ä½œ
     */</span>
    <span class="hljs-keyword">@Test</span>
    void testReadWriteMix() {
        <span class="hljs-comment">// å†™æ“ä½œ</span>
        User user = new <span class="hljs-built_in">User</span>();
        user<span class="hljs-selector-class">.setUsername</span>("mixUser");
        userService<span class="hljs-selector-class">.createUser</span>(user);
        
        <span class="hljs-comment">// è¯»æ“ä½œ</span>
        User foundUser = userService<span class="hljs-selector-class">.getUserById</span>(<span class="hljs-number">1</span>L);
        
        Assertions<span class="hljs-selector-class">.assertNotNull</span>(foundUser);
        System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¯»å†™æ··åˆæ“ä½œæµ‹è¯•é€šè¿‡");
    }
}
</code></pre>
<h2 data-id="heading-12">âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-13">1. ä¸»ä»åŒæ­¥å»¶è¿Ÿå¤„ç†</h3>
<p>åœ¨è¯»å†™åˆ†ç¦»æ¶æ„ä¸­ï¼Œä¸»ä»åŒæ­¥å­˜åœ¨å»¶è¿Ÿå¯èƒ½æ€§ã€‚åˆšå†™å…¥ä¸»åº“çš„æ•°æ®å¯èƒ½ä¸ä¼šç«‹å³åœ¨ä»åº“ä¸­å¯ç”¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * å¼ºåˆ¶è¯»ä¸»åº“çš„åœºæ™¯
 */</span>
<span class="hljs-keyword">@Service</span>
public class CriticalService {
    
    <span class="hljs-keyword">@Autowired</span>
    private UserRepository userRepository;
    
    <span class="hljs-comment">/**
     * é‡è¦ä¸šåŠ¡ï¼šå†™å…¥åç«‹å³è¯»å–ï¼Œå¼ºåˆ¶èµ°ä¸»åº“
     */</span>
    public User <span class="hljs-built_in">createAndGetUser</span>(User user) {
        <span class="hljs-comment">// å†™å…¥ä¸»åº“</span>
        User savedUser = userRepository<span class="hljs-selector-class">.save</span>(user);
        
        <span class="hljs-comment">// å¼ºåˆ¶ä»ä¸»åº“è¯»å–ï¼ˆé¿å…åŒæ­¥å»¶è¿Ÿï¼‰</span>
        DataSourceContextHolder<span class="hljs-selector-class">.setDataSourceType</span>(DataSourceType.MASTER);
        try {
            return userRepository<span class="hljs-selector-class">.findById</span>(savedUser.getId())<span class="hljs-selector-class">.orElse</span>(null);
        } finally {
            DataSourceContextHolder<span class="hljs-selector-class">.clearDataSourceType</span>();
        }
    }
}
</code></pre>
<h3 data-id="heading-14">2. äº‹åŠ¡ä¸­çš„æ•°æ®å¤„ç†</h3>
<p>åœ¨äº‹åŠ¡ä¸­ï¼Œæ‰€æœ‰æ“ä½œåº”ä½¿ç”¨åŒä¸€æ•°æ®æºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionalService</span> {
    
    <span class="hljs-comment">/**
     * äº‹åŠ¡å†…å¼ºåˆ¶ä½¿ç”¨ä¸»åº“
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">complexBusinessOperation</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æ–¹æ³•å¼€å§‹æ—¶æ˜¾å¼è®¾ç½®ä¸»åº“ï¼Œç¡®ä¿äº‹åŠ¡å†…ä¸€è‡´æ€§</span>
        <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">setDataSourceType</span>(<span class="hljs-title class_">DataSourceType</span>.<span class="hljs-property">MASTER</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸€ç³»åˆ—æ•°æ®åº“æ“ä½œ...</span>
            <span class="hljs-comment">// æ‰€æœ‰è¿™äº›æ“ä½œéƒ½åœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œä½¿ç”¨åŒä¸€æ•°æ®æº</span>
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// äº‹åŠ¡ç»“æŸåæ¸…ç†</span>
            <span class="hljs-title class_">DataSourceContextHolder</span>.<span class="hljs-title function_">clearDataSourceType</span>();
        }
    }
}
</code></pre>
<h2 data-id="heading-15">ğŸ“Š æ–¹æ¡ˆä¼˜ç¼ºç‚¹åˆ†æ</h2>

























<table><thead><tr><th>ä¼˜åŠ¿</th><th>æŒ‘æˆ˜</th><th>åº”å¯¹ç­–ç•¥</th></tr></thead><tbody><tr><td>æå‡è¯»æ€§èƒ½ï¼šå°†è¯»è¯·æ±‚åˆ†å‘åˆ°ä»åº“</td><td>ä¸»ä»åŒæ­¥å»¶è¿Ÿ</td><td>å…³é”®ä¸šåŠ¡å¼ºåˆ¶è¯»ä¸»åº“</td></tr><tr><td>æé«˜å¯ç”¨æ€§ï¼šä¸»åº“æ•…éšœæ—¶ä»åº“å¯è¯»</td><td>äº‹åŠ¡å†…æ•°æ®æºä¸€è‡´æ€§</td><td>äº‹åŠ¡ä¸­å¼ºåˆ¶ä½¿ç”¨ä¸»åº“</td></tr><tr><td>å‡è½»ä¸»åº“å‹åŠ›</td><td>å¤æ‚SQLè·¯ç”±</td><td>æ˜ç¡®çš„è¯»å†™æ“ä½œåˆ†ç¦»</td></tr></tbody></table>
<h2 data-id="heading-16">ğŸ’ æ€»ç»“</h2>
<p>é€šè¿‡ä»¥ä¸Šå®Œæ•´çš„Spring Boot 3å®ç°æ–¹æ¡ˆï¼Œä½ å¯ä»¥æˆåŠŸé…ç½®MySQLè¯»å†™åˆ†ç¦»ã€‚å…³é”®åœ¨äºç†è§£åŠ¨æ€æ•°æ®æºè·¯ç”±åŸç†ï¼Œåˆç†å¤„ç†ä¸»ä»åŒæ­¥å»¶è¿Ÿå’Œäº‹åŠ¡ä¸€è‡´æ€§ç­‰æŒ‘æˆ˜ã€‚è¿™ç§æ¶æ„èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ï¼Œç‰¹åˆ«é€‚åˆè¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•å·¥ä½œçš„?]]></title>    <link>https://juejin.cn/post/7571594817224310835</link>    <guid>https://juejin.cn/post/7571594817224310835</guid>    <pubDate>2025-11-12T10:18:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817224310835" data-draft-id="7571637614203486235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•å·¥ä½œçš„?"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T10:18:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="404æ˜Ÿçƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/193147068224126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•å·¥ä½œçš„?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/193147068224126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    404æ˜Ÿçƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:18:06.000Z" title="Wed Nov 12 2025 10:18:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">1. å¼€åœºç™½ï¼šçœ‹ä¸è§çš„æˆ¿é—´ç®¡å®¶</h4>
<p>å†™ JS çš„ä½ æˆ‘ï¼Œå‡ ä¹ä»ä¸æ‰‹åŠ¨ <code>malloc</code>/<code>free</code>ï¼Œä½†è¿™ä¸ä»£è¡¨å†…å­˜ç®¡ç†â€œä¸å­˜åœ¨â€ã€‚<br/>
JavaScript å¼•æ“å°±åƒä¸€ä½<strong>æˆ¿é—´ç®¡å®¶</strong>ï¼š</p>
<ul>
<li>ä½ ä¹°ä¸œè¥¿ï¼ˆåˆ›å»ºå˜é‡ï¼‰â†’ ç®¡å®¶å¸®ä½ æ‰¾ç©ºä½ï¼›</li>
<li>ä½ ç”¨å®Œæ‰”ä¸€è¾¹ï¼ˆè§£é™¤å¼•ç”¨ï¼‰â†’ ç®¡å®¶æ‰«è¿›åƒåœ¾æ¡¶ï¼›</li>
<li>ä½ è‹¥ä¸€ç›´å ç€èŒ…å‘ä¸æ‹‰å±ï¼ˆå†…å­˜æ³„æ¼ï¼‰â†’ ç®¡å®¶ä¹Ÿæ— å¯å¥ˆä½•ã€‚</li>
</ul>
<p>ç†è§£ç®¡å®¶çš„å·¥ä½œæ–¹å¼ï¼Œæ‰èƒ½è®©åº”ç”¨<strong>ä¸çˆ†å†…å­˜ã€ä¸å¡é¡¿ã€ä¸ OOM</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-1">2. ä¸¤å¼ å›¾çœ‹æ‡‚â€œä¸œè¥¿â€æ”¾å“ªå„¿</h4>























<table><thead><tr><th>å­˜å‚¨åŒºåŸŸ</th><th>æ”¾ä»€ä¹ˆ</th><th>ç‰¹ç‚¹</th><th>ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td><strong>Stack</strong> æ ˆ</td><td>åŸå§‹å€¼ï¼ˆ<code>number</code>ã€<code>boolean</code>ã€<code>undefined</code>ã€<code>null</code>ã€<code>string</code>ã€<code>symbol</code>ã€<code>bigint</code>ï¼‰</td><td>å›ºå®šå¤§å°ã€åè¿›å…ˆå‡ºã€è¶…å¿«</td><td>å‡½æ•° return å³è‡ªåŠ¨å¼¹æ ˆ</td></tr><tr><td><strong>Heap</strong> å †</td><td>å¼•ç”¨å€¼ï¼ˆ<code>Object</code>ã€<code>Array</code>ã€<code>Function</code>ã€<code>Date</code>ã€<code>RegExp</code>â€¦ï¼‰</td><td>åŠ¨æ€å¤§å°ã€å¯æŒ‰å¼•ç”¨å…±äº«ã€ç¨æ…¢</td><td>é åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ç¨åæ¸…ç†</td></tr></tbody></table>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> age  = <span class="hljs-number">18</span>;        <span class="hljs-comment">// æ ˆ</span>
<span class="hljs-keyword">let</span> user = {age};     <span class="hljs-comment">// æ ˆé‡Œåªå­˜æŒ‡é’ˆï¼Œå®é™…å¯¹è±¡åœ¨å †</span>
</code></pre>
<hr/>
<h4 data-id="heading-2">3. åƒåœ¾å›æ”¶ä¸‰éƒ¨æ›²</h4>
<p>ç°ä»£å¼•æ“é»˜è®¤é‡‡ç”¨**â€œæ ‡è®°-æ¸…é™¤â€ï¼ˆMark-and-Sweepï¼‰<strong>ç®—æ³•ï¼Œé…åˆ</strong>â€œåˆ†ä»£å›æ”¶â€**ä¼˜åŒ–ã€‚</p>
<h5 data-id="heading-3">3.1 æ ‡è®°é˜¶æ®µï¼ˆMarkï¼‰</h5>
<p>ä»ä¸€ç»„**æ ¹ï¼ˆRootsï¼‰**å‡ºå‘ï¼š</p>
<ul>
<li>å½“å‰è°ƒç”¨æ ˆé‡Œçš„å±€éƒ¨å˜é‡ï¼›</li>
<li>å…¨å±€å¯¹è±¡ï¼ˆ<code>window</code>ã€<code>globalThis</code>ï¼‰ï¼›</li>
<li>è¢« Chrome DevTools æ–­ç‚¹ Hold ä½çš„å˜é‡â€¦</li>
</ul>
<p>æŠŠæ‰€æœ‰èƒ½è®¿é—®åˆ°çš„å¯¹è±¡æ‰“ä¸Š <strong>â€œåœ¨ç”¨â€</strong> æ ‡ç­¾ï¼Œå…¶ä½™éƒ½æ˜¯ <strong>â€œåƒåœ¾â€</strong>ã€‚</p>
<h5 data-id="heading-4">3.2 æ¸…é™¤é˜¶æ®µï¼ˆSweepï¼‰</h5>
<p>çº¿æ€§æ‰«å †ï¼ŒæŠŠæ²¡æ ‡ç­¾çš„å¯¹è±¡ç›´æ¥é‡Šæ”¾ï¼›<br/>
å†…å­˜ç©ºéš™ç”±<strong>ç©ºé—²é“¾è¡¨</strong>æˆ–<strong>æŒ‰é¡µå‹ç¼©</strong>æ•´ç†ï¼Œé¿å…ç¢ç‰‡åŒ–ã€‚</p>
<h5 data-id="heading-5">3.3 åˆ†ä»£ä¼˜åŒ–ï¼ˆGenerational GCï¼‰</h5>
<p>V8 æŠŠå †å†ç»†åˆ†ä¸ºï¼š</p>
<ul>
<li><strong>æ–°ç”Ÿä»£</strong>ï¼ˆ1~8 Mï¼‰ï¼šçŸ­å‘½å¯¹è±¡ï¼Œé‡‡ç”¨ <strong>Scavenge</strong>ï¼ˆå¤åˆ¶å›æ”¶ï¼‰ï¼Œé¢‘ç‡é«˜ã€åœé¡¿çŸ­ï¼›</li>
<li><strong>è€ç”Ÿä»£</strong>ï¼šå¤šæ¬¡å¹¸å­˜çš„å¤§å¯¹è±¡ã€é•¿å¯¿å‘½å¯¹è±¡ï¼Œé‡‡ç”¨ <strong>Mark-Sweep + Mark-Compact</strong>ï¼Œé¢‘ç‡ä½ã€åœé¡¿é•¿ã€‚</li>
</ul>
<blockquote>
<p>å®æµ‹ï¼š95% çš„å¯¹è±¡ 20ms å†…å°±æ­»ï¼Œåˆ†ä»£å GC ååé‡æå‡ 5~10 å€ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">4. å››ç§å¸¸è§å†…å­˜æ³„æ¼ä¸æ’æŸ¥æ¸…å•</h4>






























<table><thead><tr><th>æ³„æ¼åœºæ™¯</th><th>ä»£ç å‘³é“</th><th>ä¿®å¤è¦ç‚¹</th></tr></thead><tbody><tr><td>1. æ„å¤–å…¨å±€å˜é‡</td><td><code>function f(){ leaky="oops" }</code></td><td><code>'use strict'</code> + ESLint <code>no-undef</code></td></tr><tr><td>2. å¿˜è®°æ¸…ç†å®šæ—¶å™¨</td><td><code>setInterval(()=&gt;{â€¦},1000)</code></td><td><code>const t=setInterval(...);</code> å¸è½½æ—¶ <code>clearInterval(t)</code></td></tr><tr><td>3. é—­åŒ…æ•â€œå¤§â€ä¸æ”¾</td><td><code>return ()=&gt;console.log('hi')</code> å´æ•è·äº† <code>new Array(1e6)</code></td><td>åªæŠŠå¿…è¦å˜é‡é—­è¿›å»ï¼Œæˆ–æ‰‹åŠ¨ <code>largeData=null</code></td></tr><tr><td>4. æ¸¸ç¦» DOM + ç›‘å¬å™¨</td><td><code>removeChild(node)</code> åä»ä¿ç•™ <code>node</code> å¼•ç”¨</td><td><code>node.remove(); node=null;</code> åŒæ—¶ <code>off()</code> ç›‘å¬å™¨</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-7">5. å¼€å‘è€…å¿…å¤‡ï¼šChrome DevTools ä¸‰æ¿æ–§</h4>
<ol>
<li><strong>Performance Monitor</strong><br/>
å®æ—¶æŠ˜çº¿å›¾ï¼šJS heap sizeã€DOM èŠ‚ç‚¹ã€äº‹ä»¶ç›‘å¬å™¨æ•°é‡ã€‚</li>
<li><strong>Heap Snapshot</strong><br/>
å¯¹æ¯”ä¸¤æ¬¡å¿«ç…§ï¼ŒæŒ‰ <strong>â€œRetained Sizeâ€</strong> æ’åºï¼Œè½»æ¾æ‰¾å‡ºâ€œå¤§èƒƒç‹â€ã€‚</li>
<li><strong>Allocation Timeline</strong><br/>
å½•åˆ¶ 30 ç§’ç”¨æˆ·æ“ä½œï¼Œè“è‰²ç«–çº¿è¡¨ç¤ºæ–°ç”Ÿä»£åˆ†é…ï¼Œå³°å€¼å³æ½œåœ¨æ³„æ¼ç‚¹ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-8">6. è¿›é˜¶ï¼šWeakMap / WeakRef è®© GC æ›´èªæ˜</h4>
<ul>
<li><code>WeakMap</code> åªä¿å­˜<strong>å¼±å¼•ç”¨</strong>ï¼Œé”®å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œæ˜ å°„æ¡ç›®è‡ªåŠ¨æ¶ˆå¤±ï¼›</li>
<li><code>WeakRef</code> å…è®¸ä½ <strong>è§‚å¯Ÿ</strong>å¯¹è±¡æ˜¯å¦å·²è¢« GCï¼Œè€Œä¸é˜»æ­¢å…¶è¢«å›æ”¶ï¼›</li>
<li>é€‚åˆç¼“å­˜ã€DOM å…ƒæ•°æ®æ˜ å°„ï¼Œ<strong>ä¸å¢åŠ é¢å¤–å¯è¾¾è·¯å¾„</strong>ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-9">7. ä¸€å¥è¯æ€»ç»“</h4>
<p>JavaScript å¸®ä½ æ‰«åœ°ï¼Œä½†<strong>åˆ«æŠŠåƒåœ¾è—åˆ°åºŠåº•</strong>â€”â€”<br/>
ç†è§£æ ˆ/å †ã€æ ‡è®°-æ¸…é™¤ã€åˆ†ä»£æ¨¡å‹ï¼Œå–„ç”¨ DevToolsï¼Œè¿œç¦»å››ç§æ³„æ¼ï¼Œ<br/>
ä½ çš„é¡µé¢æ‰èƒ½<strong>å¸¸é©» 60 FPSã€ä¸çˆ† 256 M ä½ç«¯æœº</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-10">8. å»¶ä¼¸é˜…è¯»</h4>
<ul>
<li>V8 å®˜æ–¹åšå®¢ï¼š<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fv8.dev%2Fblog%2Ftrash-talk" target="_blank" title="https://v8.dev/blog/trash-talk" ref="nofollow noopener noreferrer">Trash Talk: The Orinoco Garbage Collector</a></em></li>
<li>MDNï¼š<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FMemory_Management" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management" ref="nofollow noopener noreferrer">Memory Management</a></em></li>
<li>ä¹¦ç±ï¼š<em>ã€Šæ·±å…¥æµ…å‡º V8ã€‹</em> â€”â€” å­—èŠ‚è·³åŠ¨å·¥ç¨‹å¸ˆå‡ºå“ï¼ŒGC ç« èŠ‚å›¾è§£è¯¦å°½ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2ã€Geminié‡Œ äº¤äº’æ¨¡å¼å’Œéäº¤äº’æ¨¡å¼åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7571594817224359987</link>    <guid>https://juejin.cn/post/7571594817224359987</guid>    <pubDate>2025-11-12T10:31:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817224359987" data-draft-id="7571594817224343603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2ã€Geminié‡Œ äº¤äº’æ¨¡å¼å’Œéäº¤äº’æ¨¡å¼åŒºåˆ«"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T10:31:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€šæ å¬é£é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/2682464103830750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2ã€Geminié‡Œ äº¤äº’æ¨¡å¼å’Œéäº¤äº’æ¨¡å¼åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464103830750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€šæ å¬é£é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:31:51.000Z" title="Wed Nov 12 2025 10:31:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸¤ç§æ¨¡å¼çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼š<strong>å¯¹è¯æ˜¯å¦å…·æœ‰è®°å¿†å’Œä¸Šä¸‹æ–‡å…³è”æ€§</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-0">1. éäº¤äº’æ¨¡å¼</h3>
<p>éäº¤äº’æ¨¡å¼ï¼Œä¹Ÿç§°ä¸º<strong>å•è½®å¯¹è¯</strong>æˆ–<strong>æ— çŠ¶æ€å¯¹è¯</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¯ä¸€æ¬¡çš„è¯·æ±‚éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚</p>
<h4 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>æ— è®°å¿†æ€§</strong>ï¼šæ¨¡å‹ä¸ä¼šè®°ä½ä½ ä¹‹å‰è¯´è¿‡ä»€ä¹ˆã€‚æ¯ä¸€æ¬¡æé—®ï¼Œå¯¹äºæ¨¡å‹æ¥è¯´éƒ½æ˜¯å…¨æ–°çš„å¯¹è¯ã€‚</li>
<li><strong>è‡ªåŒ…å«æ€§</strong>ï¼šä½ éœ€è¦åœ¨å•æ¬¡è¯·æ±‚ä¸­æä¾›å®Œæˆä»»åŠ¡æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚</li>
<li><strong>ç¡®å®šæ€§è¾“å‡º</strong>ï¼šå¯¹äºç›¸åŒçš„è¾“å…¥ï¼ˆæç¤ºè¯ï¼‰ï¼Œåœ¨æ¨¡å‹å‚æ•°ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºåŸºæœ¬æ˜¯ç¡®å®šçš„ã€‚</li>
</ul>
<h4 data-id="heading-2">å·¥ä½œåŸç†ï¼š</h4>
<p>ä½ å‘é€ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯çš„æç¤ºè¯ï¼Œæ¨¡å‹æ ¹æ®è¿™ä¸ªå®Œæ•´çš„ä¸Šä¸‹æ–‡ç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚ä¹‹åï¼Œè¿™æ¬¡â€œä¼šè¯â€å°±ç»“æŸäº†ã€‚ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œæ¨¡å‹ä¸ä¼šè®°å¾—ä¹‹å‰çš„ä»»ä½•å†…å®¹ã€‚</p>
<h4 data-id="heading-3">å…¸å‹åº”ç”¨åœºæ™¯ï¼š</h4>
<ol>
<li><strong>æ–‡æœ¬æ‘˜è¦</strong>ï¼šä½ ç»™å®ƒä¸€ç¯‡æ–‡ç« ï¼Œå®ƒè¿”å›æ‘˜è¦ã€‚å®ƒä¸éœ€è¦çŸ¥é“ä¹‹å‰æ‘˜è¦è¿‡ä»€ä¹ˆã€‚</li>
<li><strong>ç¿»è¯‘</strong>ï¼šä½ ç»™å®ƒä¸€æ®µéœ€è¦ç¿»è¯‘çš„æ–‡å­—å’Œç›®æ ‡è¯­è¨€ï¼Œå®ƒç›´æ¥è¿”å›ç¿»è¯‘ç»“æœã€‚</li>
<li><strong>ä¸€æ¬¡æ€§é—®ç­”</strong>ï¼šä¾‹å¦‚â€œè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯å…‰åˆä½œç”¨ï¼Ÿâ€è¿™ç§ä¸éœ€è¦è¿½é—®ä¸Šä¸‹æ–‡çš„é—®é¢˜ã€‚</li>
<li><strong>ä»£ç ç”Ÿæˆ/è§£é‡Š</strong>ï¼šä½ ç»™å‡ºä¸€æ®µä»£ç æˆ–ä¸€ä¸ªéœ€æ±‚ï¼Œå®ƒç”Ÿæˆæˆ–è§£é‡Šä»£ç ã€‚</li>
<li><strong>åˆ†ç±»å’Œæƒ…æ„Ÿåˆ†æ</strong>ï¼šå¯¹ä¸€æ®µç‹¬ç«‹çš„æ–‡æœ¬è¿›è¡Œåˆ†ç±»æˆ–åˆ¤æ–­å…¶æƒ…æ„Ÿå€¾å‘ã€‚</li>
</ol>
<h4 data-id="heading-4">ç¤ºä¾‹ï¼š</h4>
<blockquote>
<p><strong>ä½ çš„è¾“å…¥ï¼ˆæç¤ºè¯ï¼‰</strong> ï¼š â€œè¯·å°†ä»¥ä¸‹è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼Œå¹¶æ€»ç»“å…¶æ ¸å¿ƒè§‚ç‚¹ï¼š <strong>åŸæ–‡</strong>ï¼šThe rapid advancement of artificial intelligence presents both unprecedented opportunities and significant challenges for society. It is crucial to develop ethical guidelines and robust governance frameworks to ensure that AI benefits all of humanity.â€<br/>
<strong>Gemini çš„è¾“å‡º</strong>ï¼š <strong>ç¿»è¯‘</strong>ï¼šäººå·¥æ™ºèƒ½çš„å¿«é€Ÿå‘å±•ä¸ºç¤¾ä¼šå¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æœºé‡å’Œé‡å¤§æŒ‘æˆ˜ã€‚åˆ¶å®šé“å¾·å‡†åˆ™å’Œå¥å…¨çš„æ²»ç†æ¡†æ¶ä»¥ç¡®ä¿äººå·¥æ™ºèƒ½æƒ åŠå…¨äººç±»è‡³å…³é‡è¦ã€‚ <strong>æ ¸å¿ƒè§‚ç‚¹</strong>ï¼šAIå‘å±•æœºé‡ä¸æŒ‘æˆ˜å¹¶å­˜ï¼Œå¿…é¡»é€šè¿‡ä¼¦ç†å’Œæ²»ç†ä½¿å…¶é€ ç¦äººç±»ã€‚â€</p>
</blockquote>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‰€æœ‰æŒ‡ä»¤å’Œå†…å®¹éƒ½åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å®Œæˆï¼Œæ— éœ€å†å²è®°å½•ã€‚</p>
<hr/>
<h3 data-id="heading-5">2. äº¤äº’æ¨¡å¼</h3>
<p>äº¤äº’æ¨¡å¼ï¼Œä¹Ÿç§°ä¸º<strong>å¤šè½®å¯¹è¯</strong>æˆ–<strong>æœ‰çŠ¶æ€å¯¹è¯</strong>ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹èƒ½å¤Ÿè®°ä½åŒä¸€ä¼šè¯ä¸­ä¹‹å‰å¯¹è¯çš„å†…å®¹ï¼Œå¹¶åŸºäºæ•´ä¸ªå¯¹è¯å†å²æ¥ç”Ÿæˆå›åº”ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h4>
<ul>
<li><strong>æœ‰è®°å¿†æ€§</strong>ï¼šæ¨¡å‹ä¼šç»´æŠ¤ä¸€ä¸ªâ€œå¯¹è¯å†å²â€æˆ–â€œä¸Šä¸‹æ–‡çª—å£â€ï¼Œè®°ä½ä½ ä»¬ä¹‹å‰èŠè¿‡çš„æ‰€æœ‰å†…å®¹ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡å…³è”</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨æŒ‡ä»£è¯ï¼ˆå¦‚â€œå®ƒâ€ã€â€œä»–â€ã€â€œä¸Šé¢æåˆ°çš„â€ï¼‰ï¼Œè¿›è¡Œè¿½é—®ã€æ·±å…¥æ¢è®¨æˆ–æ”¹å˜è¯é¢˜æ–¹å‘ã€‚</li>
<li><strong>è¿è´¯æ€§</strong>ï¼šå¯¹è¯æ˜¯æµç•…ä¸”è¿è´¯çš„ï¼Œæ›´åƒæ˜¯åœ¨ä¸ä¸€ä¸ªçœŸäººäº¤æµã€‚</li>
</ul>
<h4 data-id="heading-7">å·¥ä½œåŸç†ï¼š</h4>
<p>å½“ä½ å¼€å¯ä¸€ä¸ªèŠå¤©ä¼šè¯æ—¶ï¼Œç³»ç»Ÿä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªâ€œä¼šè¯IDâ€æˆ–ç±»ä¼¼çš„æ ‡è¯†ç¬¦ã€‚ä½ æ¯æ¬¡å‘é€çš„æ–°æ¶ˆæ¯ï¼Œéƒ½ä¼šä¸è¿™ä¸ªä¼šè¯ä¹‹å‰çš„æ‰€æœ‰æ¶ˆæ¯ï¼ˆåœ¨ä¸Šä¸‹æ–‡çª—å£é•¿åº¦é™åˆ¶å†…ï¼‰ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªå®Œæ•´çš„ä¸Šä¸‹æ–‡å‘é€ç»™æ¨¡å‹ã€‚æ¨¡å‹æ­£æ˜¯åŸºäºè¿™ä¸ªä¸æ–­å¢é•¿çš„ä¸Šä¸‹æ–‡æ¥ç†è§£ä½ çš„æ„å›¾å¹¶ç”Ÿæˆå›å¤ã€‚</p>
<h4 data-id="heading-8">å…¸å‹åº”ç”¨åœºæ™¯ï¼š</h4>
<ol>
<li><strong>èŠå¤©æœºå™¨äºº</strong>ï¼šä¸AIè¿›è¡Œå¼€æ”¾é¢†åŸŸçš„é—²èŠã€‚</li>
<li><strong>å¤æ‚é—®é¢˜æ±‚è§£</strong>ï¼šé€šè¿‡å¤šè½®é—®ç­”ï¼Œé€æ­¥æ¾„æ¸…é—®é¢˜ã€éªŒè¯å‡è®¾ã€æ·±å…¥æ¢è®¨ä¸€ä¸ªå¤æ‚ä¸»é¢˜ã€‚</li>
<li><strong>åˆ›æ„åä½œ</strong>ï¼šä¸AIä¸€èµ·è¿›è¡Œå¤´è„‘é£æš´ã€ç¼–å†™æ•…äº‹ã€è¿­ä»£ä¿®æ”¹æ–‡ç« æˆ–ä»£ç ã€‚</li>
<li><strong>è§’è‰²æ‰®æ¼”</strong>ï¼šè®©AIæ‰®æ¼”æŸä¸ªè§’è‰²ï¼ˆå¦‚é¢è¯•å®˜ã€å†å²äººç‰©ã€å®¢æœç­‰ï¼‰ä¸ä½ å¯¹è¯ã€‚</li>
<li><strong>æ•™å­¦ä¸è¾…å¯¼</strong>ï¼šå­¦ç”Ÿå¯ä»¥ä¸æ–­è¿½é—®ï¼Œè€å¸ˆï¼ˆAIï¼‰ä¼šæ ¹æ®å­¦ç”Ÿçš„ç†è§£ç¨‹åº¦è°ƒæ•´è§£é‡Šã€‚</li>
</ol>
<h4 data-id="heading-9">ç¤ºä¾‹ï¼š</h4>
<blockquote>
<p><strong>ç¬¬ä¸€è½®</strong> <strong>ä½ </strong>ï¼šä»‹ç»ä¸€ä¸‹æç™½ã€‚ <strong>Gemini</strong>ï¼šæç™½ï¼ˆ701å¹´ï¼762å¹´ï¼‰ï¼Œå­—å¤ªç™½ï¼Œå·é’è²å±…å£«ï¼Œæ˜¯å”ä»£è‘—åçš„æµªæ¼«ä¸»ä¹‰è¯—äºº...<br/>
<strong>ç¬¬äºŒè½®</strong> <strong>ä½ </strong>ï¼šä»–æœ€æœ‰åçš„è¯—æ˜¯å“ªä¸€é¦–ï¼Ÿ ï¼ˆè¿™é‡Œçš„â€œä»–â€æŒ‡ä»£ä¸Šä¸€è½®æåˆ°çš„æç™½ï¼‰ <strong>Gemini</strong>ï¼š generally considered to be ã€Šé™å¤œæ€ã€‹...<br/>
<strong>ç¬¬ä¸‰è½®</strong> <strong>ä½ </strong>ï¼šæŠŠè¿™é¦–è¯—ç¿»è¯‘æˆè‹±æ–‡ã€‚ ï¼ˆè¿™é‡Œçš„â€œè¿™é¦–è¯—â€æŒ‡ä»£ä¸Šä¸€è½®æåˆ°çš„ã€Šé™å¤œæ€ã€‹ï¼‰ <strong>Gemini</strong>ï¼š Bed before bright moonlight, / I took it as frost on the ground. / I raise my head to view the bright moon, / Then lower it, missing my hometown.</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œå¯¹è¯æ˜¯å±‚å±‚é€’è¿›çš„ï¼Œæ¨¡å‹å®Œç¾åœ°ç†è§£äº†ä¸Šä¸‹æ–‡ä¸­çš„æŒ‡ä»£å…³ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-10">å¯¹æ¯”æ€»ç»“</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>éäº¤äº’æ¨¡å¼ï¼ˆå•è½®ï¼‰</th><th>äº¤äº’æ¨¡å¼ï¼ˆå¤šè½®ï¼‰</th></tr></thead><tbody><tr><td><strong>è®°å¿†æ€§</strong></td><td><strong>æ— </strong>ï¼Œæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹</td><td><strong>æœ‰</strong>ï¼Œè®°ä½ä¼šè¯å†å²</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡</strong></td><td>å•æ¬¡è¯·æ±‚è‡ªåŒ…å«</td><td>ä¾èµ–å¤šè½®å¯¹è¯å†å²</td></tr><tr><td><strong>ä½¿ç”¨æ–¹å¼</strong></td><td>ä¸€æ¬¡æ€§ä»»åŠ¡</td><td>è¿ç»­å¯¹è¯</td></tr><tr><td><strong>APIè°ƒç”¨</strong></td><td>æ¯æ¬¡éƒ½æ˜¯ç‹¬ç«‹çš„<code>generateContent</code></td><td>éœ€è¦ç»´æŠ¤å¹¶ä¼ é€’<code>ChatSession</code>æˆ–<code>history</code></td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>æ¯æ¬¡å¤„ç†å®Œæ•´æç¤ºè¯ï¼Œç›¸å¯¹å¯æ§</td><td>éšç€å¯¹è¯è¿›è¡Œï¼Œä¸Šä¸‹æ–‡è¶Šæ¥è¶Šé•¿ï¼Œæ¶ˆè€—çš„è®¡ç®—èµ„æºä¹Ÿè¶Šå¤š</td></tr><tr><td><strong>é€‚ç”¨ä»»åŠ¡</strong></td><td>æ‘˜è¦ã€ç¿»è¯‘ã€ä¸€æ¬¡æ€§é—®ç­”</td><td>èŠå¤©ã€è¾…å¯¼ã€å¤æ‚é—®é¢˜æ¢è®¨</td></tr></tbody></table>
<h3 data-id="heading-11">æŠ€æœ¯å®ç°ä¸Šçš„å…³é”®ç‚¹</h3>
<ol>
<li><strong>ä¸Šä¸‹æ–‡çª—å£</strong>ï¼šè¿™æ˜¯äº¤äº’æ¨¡å¼çš„æ ¸å¿ƒé™åˆ¶ã€‚æ¨¡å‹èƒ½è®°ä½çš„å¯¹è¯å†å²é•¿åº¦æ˜¯æœ‰é™çš„ï¼ˆä¾‹å¦‚ï¼ŒGemini 1.5 Proæ‹¥æœ‰ç™¾ä¸‡çº§çš„tokenä¸Šä¸‹æ–‡çª—å£ï¼‰ã€‚å½“å¯¹è¯è½®æ•°å¤ªå¤šï¼Œè¶…è¿‡äº†è¿™ä¸ªçª—å£ï¼Œæœ€æ—©çš„å†å²è®°å½•å°±ä¼šè¢«â€œé—å¿˜â€ã€‚</li>
<li><strong>åœ¨APIä¸­çš„ä½“ç°</strong>ï¼š</li>
<li>
<ul>
<li><strong>éäº¤äº’</strong>ï¼šé€šå¸¸è°ƒç”¨å¦‚<code>model.generate_content(prompt)</code>ã€‚</li>
<li><strong>äº¤äº’</strong>ï¼šéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªèŠå¤©ä¼šè¯ï¼Œå¦‚<code>chat = model.start_chat(history=[])</code>ï¼Œç„¶åé€šè¿‡<code>chat.send_message("ä½ çš„æ–°æ¶ˆæ¯")</code>æ¥å‘é€æ¶ˆæ¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å†å²è®°å½•é™„åŠ åˆ°è¯·æ±‚ä¸­ã€‚</li>
</ul>
</li>
<li><strong>æˆæœ¬ä¸å»¶è¿Ÿ</strong>ï¼šäº¤äº’æ¨¡å¼ä¸­ï¼Œéšç€ä¸Šä¸‹æ–‡å˜é•¿ï¼Œå¤„ç†ä¸€æ¬¡è¯·æ±‚æ‰€éœ€çš„è®¡ç®—é‡å’Œæ—¶é—´å¯èƒ½ä¼šå¢åŠ ï¼Œåœ¨æŒ‰Tokenæ”¶è´¹çš„APIä¸­ï¼Œæˆæœ¬ä¹Ÿå¯èƒ½æ›´é«˜ã€‚</li>
</ol>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>é€‰æ‹©å“ªç§æ¨¡å¼å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š</p>
<ul>
<li>å¦‚æœä½ çš„ä»»åŠ¡åƒâ€œä¸‹è¾¾ä¸€ä¸ªæŒ‡ä»¤å¹¶è·å–ç»“æœâ€ï¼Œæ¯”å¦‚æŠŠAç¿»è¯‘æˆBï¼Œæˆ–è€…æ€»ç»“Cï¼Œé‚£ä¹ˆ<strong>éäº¤äº’æ¨¡å¼</strong>æ›´ç®€å•ã€é«˜æ•ˆã€‚</li>
<li>å¦‚æœä½ çš„ä»»åŠ¡åƒâ€œè¿›è¡Œä¸€æ¬¡è®¨è®ºæˆ–æ¢ç´¢â€ï¼Œéœ€è¦æ¥å›æ²Ÿé€šã€é€æ­¥æ·±å…¥ï¼Œé‚£ä¹ˆ<strong>äº¤äº’æ¨¡å¼</strong>æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚</li>
</ul>
<p>ç†è§£è¿™ä¸¤ç§æ¨¡å¼çš„å·®å¼‚ï¼Œæ˜¯æœ‰æ•ˆè®¾è®¡å’Œå¼€å‘åŸºäºå¤§è¯­è¨€æ¨¡å‹åº”ç”¨çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js ä¸åªæ˜¯å‰ç«¯æ¡†æ¶ï¼æˆ‘ä»¬ç”¨å®ƒæ­äº†ä¸ªå‘å¸ƒä¸­æ¢ï¼Œè®©è·¨å›¢é˜Ÿåä½œæ•ˆç‡ç¿»å€]]></title>    <link>https://juejin.cn/post/7571678674144280586</link>    <guid>https://juejin.cn/post/7571678674144280586</guid>    <pubDate>2025-11-12T10:38:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571678674144280586" data-draft-id="7571695634941280283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js ä¸åªæ˜¯å‰ç«¯æ¡†æ¶ï¼æˆ‘ä»¬ç”¨å®ƒæ­äº†ä¸ªå‘å¸ƒä¸­æ¢ï¼Œè®©è·¨å›¢é˜Ÿåä½œæ•ˆç‡ç¿»å€"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-11-12T10:38:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´çªæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2538113306470631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js ä¸åªæ˜¯å‰ç«¯æ¡†æ¶ï¼æˆ‘ä»¬ç”¨å®ƒæ­äº†ä¸ªå‘å¸ƒä¸­æ¢ï¼Œè®©è·¨å›¢é˜Ÿåä½œæ•ˆç‡ç¿»å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2538113306470631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´çªæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:38:30.000Z" title="Wed Nov 12 2025 10:38:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ceb7c2cb87a4f05b51f601acb7d0973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=YQ8%2FKqjpcOLTACBEet4gqXNgMmo%3D" alt="å¤´å›¾" loading="lazy"/></p>
<blockquote>
<p>ä¼ä¸šå‘å¸ƒæµç¨‹å‰²è£‚ã€ååŒå¤æ‚ï¼Ÿæˆ‘ä»¬ç”¨ Next.js å…¨æ ˆ+BFFï¼ˆBackend For Frontendï¼Œå‰ç«¯åç«¯ä¸­é—´å±‚ï¼Œç”¨äºèšåˆä¸‰æ–¹ç³»ç»Ÿæ¥å£ï¼Œé€‚é…å‰ç«¯éœ€æ±‚ï¼‰ï¼Œä¸²è” GitLabã€Tapdã€é’‰é’‰å’Œ MongoDBï¼ŒæŠŠå‘å¸ƒæµç¨‹è‡ªåŠ¨åŒ–ã€ä¸€ç«™å¼å¯è§‚æµ‹è½åœ°ã€‚æœ¬æ–‡åˆ†äº«æ¶æ„å®æˆ˜ä¸å…³é”®ä»£ç ï¼ŒåŠ©åŠ›ä¸­å¤§å‹å‰ç«¯å›¢é˜Ÿæ­å»ºè‡ªå·±çš„â€œå‘å¸ƒä¸­æ¢â€ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä½ å°†æ”¶è·</h2>
<ul>
<li>ä¼ä¸šçº§å‘å¸ƒè‡ªåŠ¨åŒ–çš„ä¸€çº¿æ¶æ„ä¸æµç¨‹</li>
<li>Next.js å…¨æ ˆ+BFFæœ€ä½³å®è·µ</li>
<li>ä¸‰æ–¹å¹³å°é›†æˆï¼ˆGitLab/Tapd/é’‰é’‰ï¼‰ä¸è¸©å‘ç»éªŒ</li>
<li>å…³é”®æ¨¡å‹ã€æƒé™ä¸­é—´ä»¶ã€è‡ªåŠ¨åŒ–è„šæœ¬ä»£ç </li>
<li>å‘å¸ƒæµç¨‹å¯è§‚æµ‹ä¸è´¨é‡ä¿éšœçš„å®æ‹æŒ‡æ ‡</li>
</ul>
<h2 data-id="heading-1">èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>ä¼ä¸šå†…éƒ¨éœ€æ±‚ã€å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒæµç¨‹åˆ†æ•£ï¼š</p>
<ul>
<li>Tapd ç®¡éœ€æ±‚ï¼ŒGitLab è´Ÿè´£ä»£ç å’ŒCIï¼Œé’‰é’‰å®¡æ‰¹æ²Ÿé€šï¼Œç¯å¢ƒåˆ†æ•£</li>
<li>ä¿¡æ¯å­¤å²›ã€äººå·¥å¯¹é½ï¼Œé“¾è·¯ä¸å¯è¿½æº¯ï¼Œæƒé™æ··ä¹±</li>
<li>å‘å¸ƒæ•ˆç‡å’Œè´¨é‡éš¾ä¿éšœ</li>
</ul>
<p><strong>ç›®æ ‡ï¼š</strong></p>
<ul>
<li>èšåˆéœ€æ±‚/ä»£ç /MR/æµæ°´çº¿/å‘å¸ƒ/é€šçŸ¥ï¼Œä¸€ç«™å¼è§†å›¾</li>
<li>è‡ªåŠ¨åŒ–ä¸‰æ–¹è”åŠ¨ï¼Œå‡å°‘äººå·¥é“¾è·¯</li>
<li>å…¨ç¨‹æ—¥å¿—å®¡è®¡ï¼Œæ‰€æœ‰æ“ä½œå¯è¿½æº¯</li>
<li>ç»Ÿä¸€é‰´æƒã€è§’è‰²æƒé™ç®¡ç†ï¼Œå®‰å…¨å¯æ§</li>
</ul>
<h2 data-id="heading-2">æŠ€æœ¯é€‰å‹äº®ç‚¹</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆé€‰æ‹© Next.js å…¨æ ˆ + BFFï¼Ÿ</h3>
<p>ç›¸æ¯”ä¼ ç»Ÿ"å‰ç«¯ + åç«¯ API"æ¶æ„ï¼Œé€‰æ‹© Next.js å…¨æ ˆæ˜¯å› ä¸ºï¼š</p>
<ul>
<li><strong>å‡å°‘è·¨åŸŸé—®é¢˜</strong>ï¼šå‘å¸ƒå¹³å°éœ€é¢‘ç¹è·¨ç³»ç»Ÿäº¤äº’ï¼ˆGitLab/Tapdï¼‰ï¼ŒNext.js çš„ API Route å¯ç›´æ¥ä½œä¸º <strong>BFFï¼ˆBackend For Frontendï¼Œå‰ç«¯åç«¯ä¸­é—´å±‚ï¼Œç”¨äºèšåˆä¸‰æ–¹ç³»ç»Ÿæ¥å£ï¼Œé€‚é…å‰ç«¯éœ€æ±‚ï¼‰</strong> å±‚ï¼Œå‰åç«¯åŒåŸŸéƒ¨ç½²ï¼Œé¿å… CORS é…ç½®</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šåŒæ„æ¸²æŸ“ï¼ˆSSR/SSGï¼‰æå‡é¡µé¢é¦–å±å“åº”é€Ÿåº¦ 30%+ï¼Œç‰¹åˆ«æ˜¯å‘å¸ƒçŠ¶æ€é¡µé¢éœ€è¦å®æ—¶æ•°æ®å±•ç¤º</li>
<li><strong>ç»Ÿä¸€æŠ€æœ¯æ ˆ</strong>ï¼šTypeScript å…¨æ ˆè¦†ç›–ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œé™ä½ç»´æŠ¤æˆæœ¬</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šä¸‰æ–¹ API å¯†é’¥ä»…å­˜æœåŠ¡ç«¯ï¼Œé¿å…å‰ç«¯æš´éœ²</li>
</ul>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆé€‰æ‹© MongoDBï¼Ÿ</h3>
<p>ç›¸æ¯” MySQL ç­‰å…³ç³»å‹æ•°æ®åº“ï¼š</p>
<ul>
<li><strong>çµæ´» Schema</strong>ï¼šå‘å¸ƒæ—¥å¿—ç»“æ„å¤šå˜ï¼ˆä¸åŒç³»ç»Ÿå­—æ®µä¸åŒï¼‰ï¼ŒMongoDB çš„æ–‡æ¡£æ¨¡å‹å‡å°‘ 70% çš„è¡¨ç»“æ„å˜æ›´æˆæœ¬</li>
<li><strong>æŸ¥è¯¢æ€§èƒ½</strong>ï¼šå¤åˆç´¢å¼•ï¼ˆå¦‚ <code>{projectId: 1, createAt: -1}</code>ï¼‰ä¿éšœé«˜é¢‘æŸ¥è¯¢ï¼ˆå‘å¸ƒè®°å½•æŸ¥è¯¢ã€æ“ä½œæ—¥å¿—æ£€ç´¢ï¼‰åœ¨åƒä¸‡çº§æ•°æ®ä¸‹ä»ä¿æŒæ¯«ç§’çº§å“åº”</li>
<li><strong>æ‰©å±•æ€§å¥½</strong>ï¼šæ—¥å¿—å½’æ¡£åœºæ™¯ï¼Œå†·çƒ­æ•°æ®åˆ†ç¦»ï¼ŒMongoDB åˆ†ç‰‡æ›´æ˜“å®ç°</li>
</ul>
<h3 data-id="heading-5">æœåŠ¡å±‚æ•´åˆç­–ç•¥</h3>
<p>ä¸‰æ–¹ SDK ç»Ÿä¸€é™æµã€é‡è¯•ã€ç†”æ–­ï¼Œä¸šåŠ¡è§£è€¦ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€é”™è¯¯æ¨¡å‹</strong>ï¼šæ‰€æœ‰æœåŠ¡å±‚æŠ›å‡ºæ ‡å‡†é”™è¯¯ï¼ŒAPI å±‚ç»Ÿä¸€è½¬æ¢ä¸ºå‰ç«¯å¯ç†è§£çš„å“åº”æ ¼å¼</li>
<li><strong>é›†ä¸­æ²»ç†</strong>ï¼šé™æµå™¨ï¼ˆp-limitï¼‰ã€é‡è¯•ç­–ç•¥ï¼ˆæŒ‡æ•°é€€é¿ï¼‰ã€ç†”æ–­å™¨ï¼ˆå¤±è´¥ç‡é˜ˆå€¼ï¼‰ç»Ÿä¸€é…ç½®ï¼Œé¿å…é‡å¤ä»£ç </li>
</ul>
<h3 data-id="heading-6">é’‰é’‰/IM é€šçŸ¥</h3>
<p>æ—¶æ•ˆå¼ºã€é—­ç¯å¥½ï¼Œé‡è¦äº‹ä»¶åŒé€šé“ï¼ˆé’‰é’‰ + é‚®ä»¶ï¼‰ï¼Œç¡®ä¿å…³é”®å‘å¸ƒäº‹ä»¶åŠæ—¶è§¦è¾¾è´£ä»»äºº</p>
<h2 data-id="heading-7">æ¶æ„æ€»è§ˆ</h2>
<p>å‰ç«¯é¡µé¢ã€APIè·¯ç”±ã€æœåŠ¡å±‚ã€æ•°æ®å±‚å’Œè¿ç»´è„šæœ¬åä½œï¼Œä¸²è”ä¸‰æ–¹ç³»ç»Ÿï¼Œè‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ã€‚</p>
<h3 data-id="heading-8">å¹³å°ä¸»æµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7d607495f3848a992810eb04e7e4436~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=5G7k5b59XPHOUojkYOVJUBzYGwQ%3D" alt="å¹³å°ä¸»æµç¨‹" loading="lazy"/></p>
<p><strong>æµç¨‹è¯´æ˜</strong>ï¼šä» Tapd éœ€æ±‚åˆ›å»º â†’ GitLab åˆ†æ”¯å¼€å‘ â†’ MR åˆå¹¶ â†’ CI/CD æµæ°´çº¿ â†’ å‘å¸ƒè®¡åˆ’åˆ›å»º â†’ äº§çº¿å‘å¸ƒ â†’ é’‰é’‰é€šçŸ¥ï¼Œå½¢æˆå®Œæ•´é—­ç¯ã€‚æ¯ä¸ªç¯èŠ‚çš„æ“ä½œæ—¥å¿—è‡ªåŠ¨è½åº“ï¼Œæ”¯æŒå…¨ç¨‹å›æº¯ã€‚</p>
<h3 data-id="heading-9">æŠ€æœ¯æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9de797507a84d43af95f7b019e8058c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=3Gwva5d8PUTY2hZ9Uo8tsmGppHQ%3D" alt="æŠ€æœ¯æ¶æ„å›¾" loading="lazy"/></p>
<p><strong>æ¶æ„è¦ç‚¹</strong>ï¼š</p>
<p><strong>å‰ç«¯ + API Routeï¼ˆBFFï¼‰</strong>ï¼šNext.js å…¨æ ˆåŒä»“éƒ¨ç½²ï¼ŒAPI Route ä½œä¸ºä¸‰æ–¹ç³»ç»Ÿç»Ÿä¸€ç½‘å…³ï¼Œå¯†é’¥ä»…å­˜æœåŠ¡ç«¯ï¼Œç»Ÿä¸€å“åº”æ ¼å¼ <code>{code, message, data}</code>ã€‚</p>
<p><strong>æœåŠ¡å±‚</strong>ï¼šé™æµï¼ˆGitLab 5r/sï¼ŒTapd 3r/sï¼‰ã€ç†”æ–­ï¼ˆè¿ç»­ 5 æ¬¡è¶…æ—¶åˆ‡æ¢ Redis ç¼“å­˜ï¼‰ã€æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆ1sâ†’2sâ†’4sï¼‰ï¼Œæ—¥å¿—åŸ‹ç‚¹å…¨é“¾è·¯è¿½è¸ªã€‚<strong>ä¸‰æ–¹æœåŠ¡é›†æˆç¤ºä¾‹</strong>ï¼šä»¥ GitLab ä¸ºä¾‹ï¼Œå‰ç«¯é¡µé¢ â†’ API Routeï¼ˆæƒé™æ ¡éªŒï¼‰â†’ GitLab Serviceï¼ˆMRæŸ¥è¯¢/æµæ°´çº¿æ‹‰å–/åˆå¹¶ï¼‰â†’ MongoDBï¼ˆæ“ä½œæ—¥å¿—è‡ªåŠ¨è½åº“ï¼‰ï¼Œç¡®ä¿æ‰€æœ‰æµç¨‹å¯è¿½æº¯ã€‚åŒæ ·ç­–ç•¥é€‚ç”¨äº Tapd å’Œé’‰é’‰ã€‚</p>
<p><strong>MongoDB</strong>ï¼šå¤åˆç´¢å¼•ä¿éšœæŸ¥è¯¢ &lt; 50msï¼Œäº‹åŠ¡ç¡®ä¿å…³é”®æ“ä½œåŸå­æ€§ï¼Œå†·çƒ­åˆ†ç¦»ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚</p>
<p><strong>åŸºç¡€è®¾æ–½</strong>ï¼šDocker + PM2 å®¹å™¨åŒ–ï¼ŒNginx é™æ€ç¼“å­˜ + è´Ÿè½½å‡è¡¡ã€‚</p>
<p><strong>æ•°æ®æµå‘</strong>ï¼šå‰ç«¯ â†’ BFFï¼ˆæƒé™ï¼‰â†’ æœåŠ¡å±‚ï¼ˆé™æµ/ç†”æ–­ï¼‰â†’ ä¸‰æ–¹ç³»ç»Ÿ â†’ MongoDBï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œå¼‚å¸¸æ—¶é™çº§è‡³ç¼“å­˜ã€‚</p>
<p>ç¡®ä¿ 99.9% SLAã€é«˜å®‰å…¨æ€§ã€å…¨é“¾è·¯å¯è§‚æµ‹ã€‚</p>
<hr/>
<h3 data-id="heading-10">ä¸šåŠ¡ä¸æ•°æ®å»ºæ¨¡</h3>
<p>æ ¸å¿ƒå¯¹è±¡å¦‚ä¸‹ï¼š</p>

































<table><thead><tr><th>æ¨¡å‹</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td>å‘å¸ƒè®¡åˆ’</td><td>æ‰¹æ¬¡/éœ€æ±‚/ç¯å¢ƒ/çŠ¶æ€ï¼ˆå‘å¸ƒè®¡åˆ’ï¼šä¸€æ¬¡å‘å¸ƒä»»åŠ¡çš„å®Œæ•´å®šä¹‰ï¼›å‘å¸ƒæ‰¹æ¬¡ï¼šåŒä¸€è®¡åˆ’ä¸‹çš„å¤šä¸ªå‘å¸ƒæ‰¹æ¬¡ï¼‰</td></tr><tr><td>å‘å¸ƒè¯´æ˜</td><td>å˜æ›´è¯´æ˜/å›æ»šçº¿ç´¢</td></tr><tr><td>é¡¹ç›®/ç¯å¢ƒ</td><td>ä»“åº“/åˆ†æ”¯/ç¯å¢ƒç­–ç•¥</td></tr><tr><td>éœ€æ±‚/åˆå¹¶</td><td>Tapdå¯¹æ¥/åˆå¹¶ç­–ç•¥</td></tr><tr><td>äººå‘˜/è§’è‰²</td><td>ä¼ä¸šç»„ç»‡/æƒé™ç®¡ç†</td></tr><tr><td>æ“ä½œ/åˆå¹¶æ—¥å¿—</td><td>å®¡è®¡/å›æº¯</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcdfd95287f342208ae1b6ec72a3b232~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=12cFO8RM0cEfdeRHzOVPIuLWtJM%3D" alt="å‘å¸ƒçŠ¶æ€æµè½¬å›¾" loading="lazy"/></p>
<p><strong>çŠ¶æ€æµè½¬è¯´æ˜</strong>ï¼šå‘å¸ƒè®¡åˆ’çŠ¶æ€æµè½¬ï¼šå¾…å‘å¸ƒ â†’ å‘å¸ƒä¸­ â†’ å·²å‘å¸ƒã€‚æ¯ä¸ªçŠ¶æ€å˜æ›´éƒ½ä¼šè§¦å‘æ“ä½œæ—¥å¿—è®°å½•ï¼Œå¹¶æ¨é€é’‰é’‰é€šçŸ¥ç»™ç›¸å…³è´£ä»»äººã€‚</p>
<h2 data-id="heading-11">ä¸šåŠ¡æ¨¡å—æ‹†è§£</h2>
<h3 data-id="heading-12">å‘å¸ƒè®¡åˆ’ç®¡ç†</h3>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>å‘å¸ƒè®¡åˆ’</strong>ï¼šä¸€æ¬¡å‘å¸ƒä»»åŠ¡çš„å®Œæ•´å®šä¹‰ï¼ŒåŒ…å«ç›®æ ‡ç¯å¢ƒã€å‘å¸ƒæ—¶é—´ã€å…³è”éœ€æ±‚ç­‰</li>
<li><strong>å‘å¸ƒæ‰¹æ¬¡</strong>ï¼šåŒä¸€å‘å¸ƒè®¡åˆ’ä¸‹çš„å¤šä¸ªå‘å¸ƒæ‰¹æ¬¡ï¼Œç”¨äºèšåˆå¤šä¸ªéœ€æ±‚å¹¶ç”Ÿæˆå‘å¸ƒæ–‡æ¡£</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>åˆ›å»º/ç»´æŠ¤å‘å¸ƒè®¡åˆ’ä¸å‘å¸ƒæ‰¹æ¬¡ã€è®¾ç½®å‘å¸ƒæ—¶é—´</li>
<li>å¯¹æ¥CI/CDï¼ˆCIï¼šæŒç»­é›†æˆï¼Œä»£ç åˆå¹¶åè‡ªåŠ¨æ„å»º/æµ‹è¯•ï¼›CDï¼šæŒç»­äº¤ä»˜/éƒ¨ç½²ï¼Œè‡ªåŠ¨åŒ–å‘å¸ƒåˆ°ç¯å¢ƒï¼‰ï¼Œè§¦å‘/å›æ»šï¼Œé’‰é’‰è‡ªåŠ¨é€šçŸ¥</li>
<li>éœ€æ±‚èšåˆæˆæ‰¹æ¬¡ã€ç”Ÿæˆå‘å¸ƒæ–‡æ¡£ã€ä¾èµ–æ ¡éªŒã€é—¨ç¦ç­–ç•¥</li>
<li>åˆ†æ”¯/æµæ°´çº¿/Code Ownersï¼ˆæŒ‰ç›®å½•/æ–‡ä»¶æŒ‡å®šå®¡æ ¸æ‰€æœ‰è€…ï¼ŒMR éœ€å…¶å®¡æ ¸ï¼‰ç­–ç•¥</li>
<li>å‘å¸ƒå˜æ›´é›†ã€æ‰§è¡Œäººã€å›æ»šè®°å½•</li>
</ul>
<p><strong>åœºæ™¯åŒ–æ¡ˆä¾‹ï¼šå‘å¸ƒæ‰¹æ¬¡å®¡æ‰¹å‘ç‰ˆé—­ç¯</strong></p>
<ul>
<li>ç»„æ‰¹ï¼šå°†éœ€æ±‚ A/B/C åŠ å…¥åŒä¸€å‘å¸ƒæ‰¹æ¬¡ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå‘å¸ƒæ–‡æ¡£ï¼ˆå˜æ›´é¡¹ã€å½±å“èŒƒå›´ã€å›æ»šé¢„æ¡ˆï¼‰</li>
<li>å®¡æ‰¹ï¼šè´£ä»»äººï¼ˆä¸šåŠ¡/æŠ€æœ¯è´Ÿè´£äººæˆ– Code Ownersï¼‰çº¿ä¸Šå®¡æ‰¹ï¼Œé€šè¿‡åè‡ªåŠ¨è§¦å‘ç”Ÿäº§å‘å¸ƒæµæ°´çº¿ï¼ˆæˆ–ç”Ÿæˆ Tagï¼‰</li>
<li>å‘å¸ƒï¼šCI/CD æ‰§è¡Œç”Ÿäº§å‘å¸ƒï¼Œäº§å‡ºç‰ˆæœ¬å·ä¸é“¾æ¥ï¼›è‹¥ç›‘æ§å¼‚å¸¸ï¼Œè‡ªåŠ¨é˜»æ–­å¹¶å›æ»šï¼Œä¸ŠæŠ¥é’‰é’‰å‘Šè­¦</li>
<li>å½’æ¡£ï¼šå‘å¸ƒç»“æœã€å‘å¸ƒæ–‡æ¡£ã€å®¡æ‰¹è®°å½•ä¸æ‰§è¡Œäººè½åº“ï¼Œä¾¿äºå®¡è®¡ä¸è¿½æº¯</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c28f0c61a7646ecaff7b50f017983b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=asDdoh8bikx6W%2BebOsRnflTcwYM%3D" alt="å‘å¸ƒç®¡ç†" loading="lazy"/></p>
<h3 data-id="heading-13">éœ€æ±‚ç®¡ç†</h3>
<ul>
<li>Tapdæ•…äº‹åŒæ­¥ã€MRç»‘å®šä¸ä¸€è‡´æ€§æ ¡éªŒ</li>
<li>éœ€æ±‚é”ï¼Œåˆå¹¶å†²çªé˜²æ§</li>
<li>åˆ†æ”¯/æµæ°´çº¿/codeownerç­–ç•¥</li>
</ul>
<p><strong>åœºæ™¯åŒ–æ¡ˆä¾‹ï¼šéœ€æ±‚é”å¦‚ä½•é¿å…å†²çªï¼Ÿ</strong></p>
<p>å½“å¼€å‘ A åœ¨ Tapd æ ‡è®°éœ€æ±‚"å¼€å‘ä¸­"æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨é”å®šå¯¹åº” Git åˆ†æ”¯ï¼Œå¼€å‘ B è¯•å›¾æäº¤ MR æ—¶ä¼šæ”¶åˆ°"éœ€æ±‚å·²è¢«é”å®šï¼Œè¯·è”ç³» A ç¡®è®¤"çš„é’‰é’‰æé†’ã€‚è¿™æ ·é¿å…äº†å¤šäººåŒæ—¶ä¿®æ”¹åŒä¸€éœ€æ±‚å¯¼è‡´çš„ä»£ç å†²çªã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d714d3396a940dbb3fc55acb3727dde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=IwkHrlePuIJ72q8f6q%2BWj05tTRQ%3D" alt="éœ€æ±‚ç®¡ç†" loading="lazy"/></p>
<h3 data-id="heading-14">äººå‘˜ä¸è§’è‰²</h3>
<ul>
<li>è§’è‰²åŠŸèƒ½æ˜ å°„ã€é¡µé¢æƒé™ç»‘å®š</li>
<li>é’‰é’‰unionIdå¯¹ä¼ä¸šç»„ç»‡ï¼Œè‡ªåŠ¨å®¡æ‰¹æ´¾å‘</li>
</ul>
<p><strong>åœºæ™¯åŒ–æ¡ˆä¾‹ï¼šå®¡æ‰¹æ´¾å‘ä¸è¶Šæƒæ‹¦æˆªé—­ç¯</strong></p>
<ul>
<li>ç ”å‘æäº¤å‘å¸ƒæ‰¹æ¬¡åï¼Œå¹³å°æŒ‰è§’è‰²çŸ©é˜µè‡ªåŠ¨åˆ†é…å®¡æ‰¹äººï¼ˆäº§å“/æŠ€æœ¯è´Ÿè´£äººï¼‰ï¼Œå¹¶æ¨é€é’‰é’‰å¾…åŠï¼›</li>
<li>å®¡æ‰¹é€šè¿‡ â†’ è‡ªåŠ¨è§¦å‘ç”Ÿäº§æµæ°´çº¿ï¼›æ‹’ç»/è¶…æ—¶ â†’ æ‰¹æ¬¡çŠ¶æ€æ›´æ–°å¹¶æ¨é€åŸå› ï¼›</li>
<li>æ— æƒé™ç”¨æˆ·å°è¯•è§¦å‘å‘å¸ƒ â†’ ä¸­é—´ä»¶è·¯ç”±é—¨ç¦ + API äºŒæ¬¡æ ¡éªŒå³æ—¶æ‹¦æˆªï¼Œè®°å½•æ“ä½œæ—¥å¿—å¹¶é€šçŸ¥ç®¡ç†å‘˜ï¼›</li>
<li>å®¡æ‰¹/æ‰§è¡Œå…¨é“¾è·¯ç•™ç—•ï¼Œå¯æŒ‰äºº/é¡¹ç›®/æ—¶é—´æ£€ç´¢ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/600e87d185dc4445a5f729812472a4d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=Uk8fJTS%2F%2F6%2FpFQIveScYZiriQXc%3D" alt="äººå‘˜ç®¡ç†" loading="lazy"/></p>
<h2 data-id="heading-15">æƒé™é‰´æƒä¸ä¸­é—´ä»¶</h2>
<ul>
<li>æ‰€æœ‰å—ä¿æŠ¤è·¯ç”±è‡ªåŠ¨æ ¡éªŒTokenï¼Œé’‰é’‰æ‰«ç æ”¯æŒï¼›APIå±‚äºŒæ¬¡éªŒæƒï¼Œæ•æ„Ÿæ“ä½œéœ€äºŒæ¬¡ç¡®è®¤ã€‚</li>
</ul>
<p><strong>åœºæ™¯åŒ–æ¡ˆä¾‹ï¼šToken è¿‡æœŸä¸æ•æ„Ÿæ“ä½œé˜²æŠ¤</strong></p>
<ul>
<li>ç”¨æˆ·è®¿é—®å—ä¿æŠ¤è·¯ç”±ï¼Œmiddleware æ ¡éªŒå¤±è´¥åé‡å®šå‘è‡³ç™»å½•é¡µï¼Œå¹¶ä¿ç•™ redirectï¼›</li>
<li>ç™»å½•å›è°ƒï¼ˆå¸¦ dingCodeï¼‰è§£æèº«ä»½ï¼Œæ³¨å…¥ä¼šè¯å¹¶è·³å› redirectï¼›</li>
<li>è§¦å‘å‘å¸ƒç­‰æ¥å£æ—¶ï¼ŒAPI å±‚äºŒæ¬¡æ ¡éªŒ Token/è§’è‰²ï¼›æ— æƒé™åˆ™è¿”å› 403ï¼Œè®°å½•æ“ä½œæ—¥å¿—ï¼›</li>
<li>å¯¹â€œåˆ‡ç”Ÿäº§/å›æ»šâ€ç­‰é«˜å±æ“ä½œï¼Œå¼ºåˆ¶äºŒæ¬¡ç¡®è®¤ä¸å®¡æ‰¹é“¾ï¼Œå¹¶æ¨é€é’‰é’‰é€šçŸ¥ã€‚</li>
</ul>
<p><strong>ä¸­é—´ä»¶å…³é”®ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">req: NextRequest</span>) {
  <span class="hljs-keyword">const</span> { pathname, searchParams, search } = req.<span class="hljs-property">nextUrl</span>;
  <span class="hljs-keyword">const</span> host = req.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'host'</span>);

  <span class="hljs-comment">// é’‰é’‰æ‰«ç ç™»å½•å›è°ƒå¤„ç†</span>
  <span class="hljs-keyword">const</span> dingCode = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'code'</span>);
  <span class="hljs-keyword">if</span> (dingCode) {
    <span class="hljs-keyword">const</span> baseUrl = <span class="hljs-title function_">buildBaseUrl</span>(host);
    <span class="hljs-keyword">const</span> redirectUrl = <span class="hljs-string">`<span class="hljs-subst">${baseUrl}</span>/dashboard`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(
      <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">`/dingUserInfo?dingCode=<span class="hljs-subst">${dingCode}</span>&amp;redirect=<span class="hljs-subst">${redirectUrl}</span>`</span>, req.<span class="hljs-property">url</span>)
    );
  }

  <span class="hljs-comment">// å…¬å¼€è·¯å¾„ç›´æ¥æ”¾è¡Œ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isPublicPath</span>(pathname)) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  }

  <span class="hljs-comment">// å—ä¿æŠ¤è·¯å¾„éœ€è¦éªŒè¯Token</span>
  <span class="hljs-keyword">const</span> verifiedToken = <span class="hljs-keyword">await</span> <span class="hljs-title function_">verifyAuth</span>(req).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">if</span> (!verifiedToken) {
    <span class="hljs-keyword">const</span> baseUrl = <span class="hljs-title function_">buildBaseUrl</span>(host);
    <span class="hljs-keyword">const</span> redirectUrl = <span class="hljs-string">`<span class="hljs-subst">${baseUrl}</span><span class="hljs-subst">${pathname}</span><span class="hljs-subst">${search}</span>`</span>;
    <span class="hljs-keyword">const</span> loginUrl = <span class="hljs-string">`<span class="hljs-subst">${LOGIN_URL}</span>?redirect=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(redirectUrl)}</span>`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(loginUrl));
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
}
</code></pre>
<h2 data-id="heading-16">è‡ªåŠ¨åŒ–è„šæœ¬ä¸è¿ç»´</h2>





























<table><thead><tr><th>è„šæœ¬å</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>build_data.mjs</td><td>æ„å»ºäº§ç‰©ã€æ•°æ®ç”Ÿæˆ</td></tr><tr><td>start.js</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>schedule.js</td><td>å®šæ—¶ä»»åŠ¡ã€æ•°æ®åŒæ­¥</td></tr><tr><td>onlineNotice.js</td><td>é’‰é’‰ç¾¤æœºå™¨äººé€šçŸ¥</td></tr><tr><td>nginx.mjs</td><td>Nginxåå‘ä»£ç†é…ç½®</td></tr></tbody></table>
<p><strong>è¿ç»´å»ºè®®ï¼š</strong></p>
<ul>
<li>æ„å»ºäº§ç‰©/è¿è¡Œé•œåƒåˆ†ç¦»</li>
<li>Nginxç¼“å­˜é™æ€èµ„æº</li>
<li>éå¹‚ç­‰å±é™©æ“ä½œéœ€ç°åº¦å’ŒäºŒæ¬¡ç¡®è®¤</li>
</ul>
<h2 data-id="heading-17">å‰ç«¯é¡µé¢ç»“æ„</h2>
<ul>
<li>Next.jsè‡ªåŠ¨è·¯ç”±ï¼ŒAnt Design+è‡ªç ”ç»„ä»¶</li>
<li>é¡µé¢â†’ä¸šåŠ¡ç»„ä»¶â†’åŸå­ç»„ä»¶ï¼Œç¨³å®šAPI</li>
<li>MinimalçŠ¶æ€è®¾è®¡ï¼Œæ•°æ®æ¥å£æ‹‰å–ä¸ºä¸»</li>
</ul>

<pre><code class="hljs">Dashboard
â”œâ”€ å‘å¸ƒç®¡ç†
â”œâ”€ éœ€æ±‚ç®¡ç†
â”œâ”€ äººå‘˜ç®¡ç†
â”œâ”€ è§’è‰²ç®¡ç†
â”œâ”€ è„‘å›¾ç®¡ç†
â””â”€ æ“ä½œæ—¥å¿—
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/524ded82ebe74966b67bddfc5b561f46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=gIfqEUjNPIjkxb4cPXLjQQQdyM4%3D" alt="å‰ç«¯é¡µé¢ç»“æ„ç¤ºä¾‹" loading="lazy"/></p>
<h2 data-id="heading-18">è½åœ°æµç¨‹ Step-by-Step</h2>
<ol>
<li>æ˜ç¡®ç³»ç»ŸèŒƒå›´å’Œæœ€å°é—­ç¯ï¼ˆMRâ†’CIâ†’å‘å¸ƒâ†’é€šçŸ¥â†’å®¡è®¡ï¼‰</li>
<li>Next.jsåˆå§‹åŒ–ã€API RouteåšBFFã€æœåŠ¡å±‚å¯å¤ç”¨</li>
<li>è·¯ç”±ä¸­é—´ä»¶åšæƒé™å®ˆå«ï¼ŒAPIå¼ºåˆ¶Token/è§’è‰²æ ¡éªŒ</li>
<li>æ¥å…¥GitLabã€Tapdã€é’‰é’‰ä¸‰æ–¹æœåŠ¡</li>
<li>å‘å¸ƒç®¡ç†å…ˆä¸Šçº¿ï¼Œè¡¥å……æ•…äº‹ã€äººå‘˜ã€è§’è‰²ï¼Œæ“ä½œæ—¥å¿—å¯è§†åŒ–</li>
<li>å“åº”ç»Ÿä¸€ã€æ—¥å¿—åŸ‹ç‚¹ï¼ŒæŒ‡æ ‡åŒ–ï¼ˆå‡†å¤‡æ—¶é•¿ã€å›æº¯æ—¶æ•ˆã€å¤±è´¥ç‡ï¼‰</li>
<li>äº‹ä»¶åŒ–è§£è€¦ä¸‰æ–¹ç³»ç»Ÿï¼Œé€æ­¥å¾®å‰ç«¯/GraphQLèšåˆ</li>
</ol>
<h2 data-id="heading-19">å¯è§‚æµ‹ä¸è´¨é‡ä¿éšœ</h2>
<ul>
<li><strong>APIå’ŒæœåŠ¡å“åº”ç»“æ„åŒ–ï¼Œå¼‚å¸¸å¯è¿½æº¯</strong>ï¼šç»Ÿä¸€å“åº”æ ¼å¼ <code>{code, message, data}</code>ï¼Œå¼‚å¸¸æ—¶è‡ªåŠ¨è®°å½•å †æ ˆã€è¯·æ±‚å‚æ•°ã€å“åº”æ—¶é—´</li>
<li><strong>æ—¥å¿—åŸ‹ç‚¹ï¼Œæ“ä½œæ—¥å¿—è¡¨ï¼Œå…³é”®é“¾è·¯è‡ªåŠ¨è®°å½•</strong>ï¼šæ‰€æœ‰ä¸‰æ–¹ API è°ƒç”¨ï¼ˆGitLab/Tapd/é’‰é’‰ï¼‰è‡ªåŠ¨è®°å½•å…¥å‚ã€å‡ºå‚ã€æ—¶å»¶ã€é”™è¯¯ç </li>
<li><strong>åˆå¹¶/å‘å¸ƒè®°å½•å¯è§†åŒ–ï¼Œé—®é¢˜å®šä½åˆ†é’Ÿçº§</strong>ï¼šæ“ä½œæ—¶é—´çº¿ç»„ä»¶å±•ç¤ºå®Œæ•´é“¾è·¯ï¼ˆéœ€æ±‚åˆ›å»º â†’ MR åˆå¹¶ â†’ å‘å¸ƒè§¦å‘ â†’ é’‰é’‰é€šçŸ¥ï¼‰ï¼Œæ”¯æŒæŒ‰æ—¶é—´ã€äººå‘˜ã€é¡¹ç›®è¿‡æ»¤</li>
<li><strong>é’‰é’‰è‡ªåŠ¨æ¨é€ï¼Œå›æ»šè®°å½•é—­ç¯</strong>ï¼šå‘å¸ƒæˆåŠŸ/å¤±è´¥/å›æ»šæ—¶è‡ªåŠ¨æ¨é€é’‰é’‰ç¾¤æ¶ˆæ¯ï¼ŒåŒ…å«å˜æ›´é›†ã€æ‰§è¡Œäººã€å›æ»šçº¿ç´¢</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/913d5dc1d1c64dea80a6035450dfe709~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=cqtI0CYLY1nusVuCiZsfiuIHjfU%3D" alt="æ“ä½œæ—¶é—´çº¿" loading="lazy"/></p>
<p><strong>æ—¶é—´çº¿è¯´æ˜</strong>ï¼šæ“ä½œæ—¶é—´çº¿å¯è§†åŒ–å±•ç¤ºå‘å¸ƒå…¨é“¾è·¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ“ä½œäººã€æ—¶é—´æˆ³ã€æ“ä½œç±»å‹ã€å…³è”å¯¹è±¡ï¼ˆå¦‚ MR IDã€å‘å¸ƒæ‰¹æ¬¡å·ï¼‰ï¼Œç‚¹å‡»å¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚æ”¯æŒæŒ‰é¡¹ç›®ã€äººå‘˜ã€æ—¶é—´èŒƒå›´è¿‡æ»¤ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<h2 data-id="heading-20">è¸©å‘æ¸…å•&amp;æœ€ä½³å®è·µ</h2>















































<table><thead><tr><th>é—®é¢˜</th><th>æ¡ˆä¾‹åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>æ•ˆæœæ•°æ®</th></tr></thead><tbody><tr><td>ä¸‰æ–¹APIé™æµ/æ³¢åŠ¨</td><td>GitLab API çªå‘é™æµï¼ˆQPS=10ï¼‰å¯¼è‡´å‘å¸ƒè®¡åˆ’æ‰¹é‡å¤±è´¥</td><td>ä½¿ç”¨ <code>p-limit</code> æ§åˆ¶å¹¶å‘ï¼ˆé™ 5 ä¸ªè¯·æ±‚/ç§’ï¼‰+ æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆ3 æ¬¡é‡è¯•ï¼Œé—´éš” 1sâ†’2sâ†’4sï¼‰+ ç†”æ–­å™¨ï¼ˆå¤±è´¥ç‡ &gt; 50% æ—¶åˆ‡æ¢ç¼“å­˜ï¼‰</td><td>å¤±è´¥ç‡ä» 15% é™è‡³ 0.3%</td></tr><tr><td>é•¿è€—æ—¶ä»»åŠ¡ä¸API Route</td><td>æ‰¹é‡åŒæ­¥ 100+ é¡¹ç›®åˆ†æ”¯ä¿¡æ¯ï¼ŒAPI Route è¶…æ—¶ï¼ˆ60ç§’ï¼‰</td><td>ä»»åŠ¡æ‹†åˆ†ä¸º 10 ä¸ªæ‰¹æ¬¡ï¼Œå‰ç«¯è½®è¯¢çŠ¶æ€ï¼ˆæ¯ 2 ç§’ï¼‰ï¼Œåå°ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ</td><td>è¶…æ—¶ç‡ä» 40% é™è‡³ 0%</td></tr><tr><td>MongoDBæŸ¥è¯¢é€€åŒ–</td><td>æ“ä½œæ—¥å¿—è¡¨åƒä¸‡çº§æ•°æ®ï¼ŒæŒ‰é¡¹ç›®+æ—¶é—´èŒƒå›´æŸ¥è¯¢è€—æ—¶ 5 ç§’+</td><td>å»ºç«‹å¤åˆç´¢å¼• <code>{projectId: 1, createAt: -1}</code>ï¼Œæ§åˆ¶å•æ–‡æ¡£ä½“ç§¯ &lt; 16MB</td><td>æŸ¥è¯¢è€—æ—¶é™è‡³ 50ms ä»¥å†…</td></tr><tr><td>èº«ä»½æ˜ å°„ä¸ä¸€è‡´</td><td>ä¼ä¸šç»„ç»‡ã€GitLab ç”¨æˆ·ã€é’‰é’‰ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ä¸ç»Ÿä¸€ï¼Œå¯¼è‡´æƒé™æ ¡éªŒå¤±è´¥</td><td>å»ºç«‹ç”¨æˆ·æ˜ å°„è¡¨ï¼ˆ<code>{orgId, gitlabId, dingtalkUnionId}</code>ï¼‰ï¼Œå…³é”®æ“ä½œï¼ˆå¦‚å‘å¸ƒã€å›æ»šï¼‰å¼ºåˆ¶æ ¡éªŒä¸‰æ–¹èº«ä»½ä¸€è‡´æ€§</td><td>æƒé™æ ¡éªŒå¤±è´¥ç‡ä» 8% é™è‡³ 0.1%</td></tr><tr><td>æƒé™ä»…ä¾èµ–å‰ç«¯</td><td>å‰ç«¯ç»•è¿‡æƒé™æ£€æŸ¥ç›´æ¥è°ƒç”¨ APIï¼Œå¯¼è‡´è¶Šæƒæ“ä½œ</td><td>API å±‚å¼ºåˆ¶ Token/è§’è‰²æ ¡éªŒï¼Œæ•æ„Ÿæ“ä½œï¼ˆå‘å¸ƒã€å›æ»šï¼‰äºŒæ¬¡ç¡®è®¤ + å®¡æ‰¹é“¾</td><td>è¶Šæƒæ“ä½œæ‹¦æˆªç‡ 100%</td></tr><tr><td>æ—¥å¿—ç¼ºå£/æ’æŸ¥éš¾</td><td>å‘å¸ƒå¤±è´¥æ—¶æ— æ³•å›æº¯å…·ä½“æ“ä½œæ­¥éª¤ï¼Œæ’æŸ¥è€—æ—¶ 2 å°æ—¶+</td><td>ç»Ÿä¸€æ—¥å¿—è§„èŒƒï¼ˆæ“ä½œç±»å‹ã€æ“ä½œäººã€æ—¶é—´æˆ³ã€å…³è”å¯¹è±¡ï¼‰ï¼Œæ“ä½œæ—¶é—´çº¿å¯è§†åŒ– + æ£€ç´¢é¢æ¿ï¼ˆæ”¯æŒæŒ‰äºº/é¡¹ç›®/æ—¶é—´è¿‡æ»¤ï¼‰</td><td>æ’æŸ¥æ—¶é—´ä» 2 å°æ—¶ç¼©çŸ­è‡³ 15 åˆ†é’Ÿ</td></tr></tbody></table>
<blockquote>
<p><strong>å¼ºçƒˆå»ºè®®</strong>ï¼šä¸‰æ–¹æœåŠ¡å±‚å…¨éƒ¨åŠ é™æµã€é‡è¯•ã€ç†”æ–­ï¼Œå…³é”®æ“ä½œäºŒæ¬¡ç¡®è®¤å’Œæ—¥å¿—è½åº“ï¼è¿™æ˜¯ä¿éšœå¹³å°ç¨³å®šæ€§çš„åŸºçŸ³ã€‚</p>
</blockquote>
<h2 data-id="heading-21">å…³é”®ä»£ç ç‰‡æ®µ</h2>
<h3 data-id="heading-22">1. é€šç”¨MongoDBæ¨¡å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">getList</span>(<span class="hljs-params">query?: T, sortFields?: Sort, pageIndex = <span class="hljs-number">1</span>, pageSize = <span class="hljs-number">20</span></span>) {
  <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  <span class="hljs-keyword">let</span> ret = db.<span class="hljs-title function_">find</span>(query || {});
  <span class="hljs-keyword">if</span> (pageIndex &amp;&amp; pageSize) {
    <span class="hljs-keyword">if</span> (sortFields) ret = ret.<span class="hljs-title function_">sort</span>(sortFields);
    ret = ret.<span class="hljs-title function_">skip</span>(pageSize * (pageIndex - <span class="hljs-number">1</span>)).<span class="hljs-title function_">limit</span>(pageSize);
  }
  <span class="hljs-keyword">return</span> ret.<span class="hljs-title function_">toArray</span>();
}
</code></pre>
<h3 data-id="heading-23">2. GitLabæœåŠ¡å±‚åˆ›å»ºMR</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">syncPostNewMR</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { token, project_name, <span class="hljs-attr">id</span>: projectId, source_branch, target_branch } = params;

  <span class="hljs-comment">// è·å–é¡¹ç›®ä¸»åˆ†æ”¯ï¼ˆå¦‚æœæœªæŒ‡å®štarget_branchï¼‰</span>
  <span class="hljs-keyword">const</span> project = <span class="hljs-keyword">await</span> <span class="hljs-title function_">syncProjectsSearch</span>({ <span class="hljs-attr">id</span>: projectId });
  <span class="hljs-keyword">const</span> defaultBranch = target_branch || project[<span class="hljs-number">0</span>].<span class="hljs-property">default_branch</span>;

  <span class="hljs-comment">// è°ƒç”¨GitLab APIåˆ›å»ºMR</span>
  <span class="hljs-keyword">const</span> gitlabApi = <span class="hljs-string">`https://gitlab.example.com/api/v4/projects/<span class="hljs-subst">${projectId}</span>/merge_requests`</span>;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(
    gitlabApi,
    {
      source_branch,
      <span class="hljs-attr">target_branch</span>: defaultBranch,
      <span class="hljs-attr">title</span>: params.<span class="hljs-property">title</span> || <span class="hljs-string">`Merge <span class="hljs-subst">${source_branch}</span> to <span class="hljs-subst">${defaultBranch}</span>`</span>,
    },
    {
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Private-Token'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GITLAB_PRIVATE_TOKEN</span> },
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>, <span class="hljs-comment">// 10ç§’è¶…æ—¶</span>
    }
  );

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> !== <span class="hljs-number">201</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`åˆ›å»ºMRå¤±è´¥ï¼š<span class="hljs-subst">${response.data.message || <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>}</span>`</span>);
  }

  <span class="hljs-comment">// æ“ä½œæ—¥å¿—è‡ªåŠ¨è½åº“</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">info</span>: <span class="hljs-built_in">any</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">analysisToken</span>(token);
    <span class="hljs-title function_">addLogs</span>(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, info.<span class="hljs-property">personName</span>, [project_name], info.<span class="hljs-property">personId</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ—¥å¿—è®°å½•å¤±è´¥'</span>, err);
  }

  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
};
</code></pre>
<h3 data-id="heading-24">3. JWTç­¾å‘ä¸æ ¡éªŒ</h3>
<blockquote>
<p>å®‰å…¨æç¤ºï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œsecretkey å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡ï¼ˆå¦‚ process.env.JWT_SECRETï¼‰æ³¨å…¥ï¼Œé¿å…ç¡¬ç¼–ç ï¼›å¹¶æ˜¾å¼æŒ‡å®šç®—æ³•ï¼ˆå¦‚ algorithm: 'HS256'ï¼‰ã€‚</p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> jwt <span class="hljs-keyword">from</span> <span class="hljs-string">'jsonwebtoken'</span>;

<span class="hljs-comment">// âš ï¸ ç”Ÿäº§å®‰å…¨ï¼šå¯†é’¥ä»…é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œé¿å…ç¡¬ç¼–ç ï¼›æœªé…ç½®ç›´æ¥æŠ¥é”™</span>
<span class="hljs-keyword">if</span> (!process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>) { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'JWT_SECRET is required'</span>); }
<span class="hljs-keyword">const</span> secretkey = process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;

<span class="hljs-comment">/**
 * ç­¾å‘ JWT Token
 * - ä½¿ç”¨ HS256 å¯¹ç§°ç­¾åç®—æ³•
 * - è®¾ç½® 1 å°æ—¶è¿‡æœŸæ—¶é—´ï¼ˆexpiresIn=3600sï¼‰
 * - å»ºè®®æ”¹è¿›ï¼šæ ¡éªŒå¯†é’¥é•¿åº¦â‰¥32å­—èŠ‚ï¼›æ·»åŠ  issuer/audience/subject å£°æ˜é˜²æ­¢é”™åŸŸä¸²ç”¨
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">sign</span> = (<span class="hljs-params">data = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> jwt.<span class="hljs-title function_">sign</span>(data, secretkey, {
    <span class="hljs-attr">expiresIn</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span>,
    <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'HS256'</span>, <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šç®—æ³•ï¼Œé¿å…ç®—æ³•æ··æ·†æ”»å‡»</span>
  });
};

<span class="hljs-comment">/**
 * æ ¡éªŒ JWT Token
 * - å¯ç”¨ algorithms=['HS256'] ç®—æ³•ç™½åå•
 * - å»ºè®®æ”¹è¿›ï¼š
 *   1. try/catch åŒºåˆ† TokenExpiredError/NotBeforeError/Invalidï¼Œåˆ†æµ 401/ç­‰å¾…/é‡ç™»
 *   2. æ·»åŠ  clockTolerance: 30 å¤„ç†æœºå™¨æ—¶é—´åç§»
 *   3. æ ¡éªŒ issuer/audience/subject å£°æ˜
 *   4. ä¼ è¾“å±‚ç”¨ HttpOnly+Secure+SameSite=strict Cookie æºå¸¦ Token
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">verify</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> jwt.<span class="hljs-title function_">verify</span>(token, secretkey, {
    <span class="hljs-attr">algorithms</span>: [<span class="hljs-string">'HS256'</span>],
  });
};
</code></pre>
<h2 data-id="heading-25">æ•ˆæœå®æ‹ä¸æŒ‡æ ‡</h2>
<h3 data-id="heading-26">ğŸ“ˆ æ•ˆç‡æå‡</h3>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td><strong>å‘å¸ƒåä½œè€—æ—¶</strong></td><td>8hï¼ˆè·¨ç³»ç»Ÿæ²Ÿé€š + æ‰‹å·¥å¯¹é½ + ç­‰å¾…å®¡æ‰¹ï¼‰</td><td>5.6hï¼ˆè‡ªåŠ¨è”åŠ¨ + ä¸€ç«™å¼è§†å›¾ + å³æ—¶é€šçŸ¥ï¼‰</td><td><strong>30%</strong> â†‘</td></tr><tr><td><strong>é—®é¢˜å®šä½æ—¶é—´</strong></td><td>2hï¼ˆå¤šç³»ç»Ÿæ‰‹åŠ¨æŸ¥è¯¢æ‹¼å‡‘ï¼‰</td><td>15minï¼ˆæ—¶é—´çº¿å¯è§†åŒ–ä¸€é”®å›æº¯ï¼‰</td><td><strong>8å€</strong> â†‘</td></tr><tr><td><strong>ä¿¡æ¯åŒæ­¥æ—¶æ•ˆ</strong></td><td>2h</td><td>0.5h</td><td><strong>75%</strong> â†‘</td></tr></tbody></table>
<h3 data-id="heading-27">ğŸ›¡ï¸ è´¨é‡ä¸ç¨³å®šæ€§</h3>
<ul>
<li><strong>å‘å¸ƒé˜»å¡ç‡ä¸‹é™ 98%</strong>ï¼šé™æµ/ç†”æ–­æœºåˆ¶ä¸Šçº¿åï¼Œä¸‰æ–¹ API æ•…éšœå¯¼è‡´çš„å‘å¸ƒä¸­æ–­ä» 15% é™è‡³ 0.3%</li>
<li><strong>100% æ“ä½œå¯è¿½æº¯</strong>ï¼šæ‰€æœ‰å‘å¸ƒæ“ä½œï¼ˆåˆ›å»º/è§¦å‘/å›æ»šï¼‰è‡ªåŠ¨è®°å½•ï¼Œå®¡è®¡é“¾è·¯å®Œæ•´æ— æ–­ç‚¹</li>
<li><strong>å…³é”®èŠ‚ç‚¹å¡ç‚¹å‰ç½®</strong>ï¼šéœ€æ±‚é”å®š + åˆ†æ”¯æ ¡éªŒ + Code Owners å®¡æ‰¹ï¼Œå‡å°‘ 42% çš„çº¿ä¸Šå›æ»š</li>
</ul>
<h3 data-id="heading-28">ğŸ” è¿ç»´å¯è§‚æµ‹æ€§</h3>
<ul>
<li><strong>æ’éšœæ•ˆç‡æå‡ 60%</strong>ï¼šç»“æ„åŒ–æ—¥å¿— + æ“ä½œæ—¶é—´çº¿è®©é—®é¢˜æ ¹å› å®šä½ä» 30min ç¼©çŸ­è‡³ 12min</li>
<li><strong>å…¨é“¾è·¯å¯è§†åŒ–</strong>ï¼šGitLab Pipeline + Tapd éœ€æ±‚ + é’‰é’‰é€šçŸ¥èšåˆå±•ç¤ºï¼Œæ•…éšœæº¯æºä¸€é”®ç›´è¾¾</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7f5dff276d24924af8b701d486a969d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=EtqurMCEyaEmCqrxzl3vdvOAmDo%3D" alt="å‘å¸ƒæ•ˆç‡æŒ‡æ ‡" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/760488ad1894483986b1279d5bef98d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=6iF8yGt2eMQG4nBBrFpPdj5AGvs%3D" alt="é’‰é’‰æœºå™¨äººé€šçŸ¥ç¤ºä¾‹" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e818bca76902476897634944e31f7eb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548710&amp;x-signature=%2Fmi2g1%2BP1VdVMMyu4gf22SHrJ10%3D" alt="é’‰é’‰æœºå™¨äººé€šçŸ¥ç¤ºä¾‹" loading="lazy"/></p>
<h2 data-id="heading-29">é€‚ç”¨åœºæ™¯æ¨è</h2>
<ul>
<li>ä¸­å¤§å‹æœ‰è‡ªç ”éœ€æ±‚çš„å‰ç«¯å›¢é˜Ÿ</li>
<li>éœ€è¦èšåˆå¤šç³»ç»Ÿï¼ˆGitLab/Tapd/é’‰é’‰ï¼‰çš„ä¼ä¸šå¹³å°</li>
<li>å¯¹å‘å¸ƒè‡ªåŠ¨åŒ–ã€å®¡è®¡ã€åä½œæœ‰å¼ºéœ€æ±‚çš„å›¢é˜Ÿ</li>
</ul>
<h2 data-id="heading-30">ä¸‹ä¸€æ­¥è®¡åˆ’</h2>
<ul>
<li>å¼•å…¥äº‹ä»¶æ€»çº¿å’ŒGraphQLèšåˆ</li>
<li>æŒ‡æ ‡åŒ–å¹³å°æ•ˆç›Šï¼Œè¾…åŠ©ç»„ç»‡åº¦é‡å’ŒæŒç»­æ”¹è¿›</li>
<li>æ‰“é€šJenkinsç­‰CI/CDå·¥å…·ï¼Œå®ç°å‰åç«¯è‡ªåŠ¨è”åŠ¨</li>
<li>æŒç»­ä¼˜åŒ–è„šæœ¬åŒ–è¿ç»´å’Œå®‰å…¨ç­–ç•¥</li>
</ul>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>Next.jså…¨æ ˆ+BFFç»“åˆæœåŠ¡å±‚ä¸‰æ–¹é›†æˆï¼Œä»¥å‘å¸ƒä¸»çº¿ä¸²è”å„ä¸šåŠ¡ï¼Œä¿éšœè‡ªåŠ¨åŒ–ã€å®¡è®¡ã€æƒé™å’Œå¯è§‚æµ‹æ€§ï¼Œæ˜¯ä¼ä¸šçº§å‘å¸ƒå¹³å°é«˜æ•ˆåä½œä¸æ²»ç†çš„æœ€ä½³å®è·µã€‚</p>
<blockquote>
<p>å¸Œæœ›æœ¬æ–‡å¯¹ä½ çš„ä¼ä¸šå‰ç«¯å¹³å°è½åœ°æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ã€è¯„è®ºäº¤æµä½ çš„å®è·µå’Œé—®é¢˜ï¼</p>
</blockquote>
<p>ä½œè€…ï¼šæ´çª-é‡é˜³</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ›¿æ¢ ClickHouseï¼ŒæŸ¥è¯¢å¹¶å‘æå‡ 7 å€ï¼é«˜é€”æ•™è‚²åŸºäºé˜¿é‡Œäº‘ SelectDB æ„å»ºç§’çº§å®æ—¶æŠ¥è¡¨]]></title>    <link>https://juejin.cn/post/7571655312798810138</link>    <guid>https://juejin.cn/post/7571655312798810138</guid>    <pubDate>2025-11-12T10:46:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655312798810138" data-draft-id="7571655312798777370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ›¿æ¢ ClickHouseï¼ŒæŸ¥è¯¢å¹¶å‘æå‡ 7 å€ï¼é«˜é€”æ•™è‚²åŸºäºé˜¿é‡Œäº‘ SelectDB æ„å»ºç§’çº§å®æ—¶æŠ¥è¡¨"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache"/> <meta itemprop="datePublished" content="2025-11-12T10:46:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ›¿æ¢ ClickHouseï¼ŒæŸ¥è¯¢å¹¶å‘æå‡ 7 å€ï¼é«˜é€”æ•™è‚²åŸºäºé˜¿é‡Œäº‘ SelectDB æ„å»ºç§’çº§å®æ—¶æŠ¥è¡¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:46:14.000Z" title="Wed Nov 12 2025 10:46:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>é«˜é€”æ•™è‚²å¼•å…¥é˜¿é‡Œäº‘ SelectDB æ›¿æ¢ ClickHouseã€MySQL ä½œä¸ºæ ¸å¿ƒåˆ†æå¼•æ“ï¼Œç»Ÿä¸€æ”¯æ’‘ç»­ç­ä¸è¡Œè¯¾å®æ—¶åˆ†æç­‰æ ¸å¿ƒä¸šåŠ¡ã€‚é€šè¿‡é˜¿é‡Œäº‘ SelectDB MPP æ¶æ„ä¸å‘é‡åŒ–æŸ¥è¯¢å¼•æ“ï¼Œç»“åˆ SelectDB å€’æ’ç´¢å¼•ã€Bloom Filter ç­‰ä¸°å¯Œç´¢å¼•æœºåˆ¶ï¼Œå®ç°äº¿çº§æ•°æ®é‡ç§’çº§å¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œåœ¨ 700+ é«˜å¹¶å‘æŸ¥è¯¢å‹åŠ›ä¸‹ P99 å»¶è¿Ÿä½äº 200msï¼Œç¨³å®šæ»¡è¶³æ ¸å¿ƒæŠ¥è¡¨ 2s å†…å“åº”ï¼Œæœ‰åŠ›æ”¯æ’‘é«˜é€”æ•™è‚²ä¸šåŠ¡å‘â€œæ•°æ®é©±åŠ¨è¿è¥â€è½¬å‹ã€‚</p>
<h2 data-id="heading-1">ä¸šåŠ¡èƒŒæ™¯ä¸éœ€æ±‚</h2>
<p>é«˜é€”æ•™è‚²ç§‘æŠ€é›†å›¢ï¼ˆNYSEï¼šGOTUï¼Œä»¥ä¸‹ç®€ç§°é«˜é€”æ•™è‚²ï¼‰æ˜¯ä¸€å®¶å…¼å…·æ•™è‚²åŸºå› å’Œç§‘æŠ€é©±åŠ¨åŠ›çš„ç§‘æŠ€æ•™è‚²å…¬å¸ã€‚ç›®å‰ï¼Œé«˜é€”é›†å›¢çš„ä¸šåŠ¡æ¶µç›–äº†<strong>é¢å‘ä¸­å°å­¦ç”Ÿã€å¤§å­¦ç”Ÿä¸æˆäººã€å‡ºå›½ç•™å­¦äººç¾¤å’¨è¯¢å’Œå­¦ä¹ çš„äº§å“å’ŒæœåŠ¡ï¼Œä»¥åŠä»¥å†…å®¹å’Œæ–‡åŒ–ä¸ºå†…æ ¸çš„ç›´æ’­ç”µå•†ç­‰ä¸šåŠ¡</strong>ã€‚</p>
<p>**æœ¬æ–‡ä¸»è¦ä»‹ç»ç»­ç­åœºæ™¯å®æ—¶å¤§å±åŠè¡Œè¯¾åœºæ™¯ä¸­å·¥ä½œå°çš„æŠ¥è¡¨åˆ†æã€‚**åœ¨ç»­ç­åœºæ™¯ï¼Œé«˜é€”æ•™è‚²é€šè¿‡ç»­ç­å¤§å±å®æ—¶æ•´åˆå…¨å›½åŒºåŸŸåŠè¯¾ç¨‹å“ç±»çš„ç»­ç­æ•°æ®ï¼Œä¸ºç®¡ç†å±‚ä¸ä¸€çº¿äººå‘˜æä¾›å®æ—¶ã€åŠ¨æ€çš„ç»­ç­æ•°æ®æ´å¯Ÿï¼Œä»¥é©±åŠ¨èµ„æºç²¾å‡†è°ƒé…ä¸æ½œåŠ›è¯¾ç¨‹è¯†åˆ«ã€‚åœ¨è¡Œè¯¾åœºæ™¯ï¼Œé«˜é€”æ•™è‚²éœ€å°†æ•°æ®åˆ†æå¤§å±åµŒå…¥è‡³æ•™å¸ˆã€è¿è¥ã€ç®¡ç†è€…ç­‰å¤šè§’è‰²å·¥ä½œå°ï¼Œä¸ºæ¯ä¸ªè§’è‰²å®æ—¶æä¾›é«˜åº¦å®šåˆ¶åŒ–çš„è¡Œè¯¾æ•°æ®è§†å›¾ï¼Œæ”¯æ’‘æ•™å­¦è´¨é‡å’Œå…¨æµç¨‹ä¼˜åŒ–ã€‚ä¸ºæ»¡è¶³åŒåœºæ™¯éœ€æ±‚ï¼Œæ•°æ®åˆ†æå¹³å°å…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>é«˜å¹¶å‘è®¿é—®èƒ½åŠ›</strong>ï¼šåœ¨ç»­ç­æœŸé—´ï¼Œæ”¯æ’‘å…¨éƒ¨ä¸€çº¿å‘˜å·¥éšæ—¶éšåœ°ã€å¹¶å‘è®¿é—®å®æ—¶ç»­ç­å¤§å±ï¼Œç¡®ä¿ä¿¡æ¯å…¨å‘˜åŒæ­¥ï¼Œæ‰“ç ´åœ°åŸŸé™åˆ¶ã€‚åœ¨è¡Œè¯¾æœŸé—´ï¼Œ ä¿éšœæ‰€æœ‰è§’è‰²åœ¨æ—¥å¸¸å·¥ä½œä¸­èƒ½å¤Ÿæµç•…è®¿é—®æ•°æ®å·¥ä½œå°ï¼Œç¡®ä¿ä¸šåŠ¡æ— ç¼è¿›è¡Œã€‚</li>
<li><strong>å¤šè¡¨ Join å…³è”æŸ¥è¯¢èƒ½åŠ›</strong>ï¼š æ”¯æŒè·¨ä¸šåŠ¡æ•°æ®è¡¨ Join å…³è”æŸ¥è¯¢ï¼Œå¿«é€Ÿç”Ÿæˆé€‚é…ä¸åŒè§’è‰²çš„ä¸“å±æŠ¥è¡¨è§†å›¾ã€‚</li>
<li><strong>å®æ—¶æ•°æ®æ›´æ–°èƒ½åŠ›</strong>ï¼šç”±äº TP åº“ä¸­æ•°æ®æŒç»­æ›´æ–°ï¼Œå› æ­¤è¦æ±‚åˆ†æç³»ç»Ÿå…·å¤‡å®æ—¶æ•°æ®æ›´æ–°èƒ½åŠ›ã€‚å®ç°å¤§å±ä¸å·¥ä½œå°æ•°æ®çš„ç§’çº§åˆ·æ–°ï¼Œç¡®ä¿å¤§å±å±•ç¤ºçš„ç»­ç­æ•°æ®ä¸å·¥ä½œå°å±•ç¤ºçš„è¡Œè¯¾æ•°æ®å³æ—¶åæ˜ æœ€æ–°ä¸šåŠ¡åŠ¨æ€ï¼Œä¸ºå¿«é€Ÿå†³ç­–æä¾›æ•°æ®åŸºç¡€ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸šåŠ¡æŒ‘æˆ˜</h2>
<p>åœ¨æ”¯æ’‘å…³é”®ä¸šåŠ¡åœºæ™¯çš„æ•°æ®åˆ†æèƒ½åŠ›ä¸Šï¼Œé«˜é€”æ•™è‚²è¿‡å»é€‰æ‹©äº† ClickHouse å’Œ MySQL ç»„åˆã€‚åœ¨ç»­ç­åœºæ™¯ä¸­ï¼Œç”±äºè¯¥åœºæ™¯å¯¹æŸ¥è¯¢å“åº”å»¶è¿Ÿä»¥åŠæ•°æ®å®æ—¶æ€§è¦æ±‚é«˜ï¼Œé«˜é€”æ•™è‚²é€‰æ‹©äº† ClickHouseï¼Œä¸šåŠ¡ä¸Šä»ç„¶é¢ä¸´ä¸¤ä¸ªæŒ‘æˆ˜ã€‚</p>
<ul>
<li><strong>æŸ¥è¯¢å¹¶å‘èƒ½åŠ›ä½ï¼ŒæœåŠ¡èƒ½åŠ›å—é™</strong>ï¼šClickHouse é«˜å¹¶å‘å¤„ç†èƒ½åŠ›æœ‰é™ï¼ˆä»…æ”¯æŒçº¦ 100 QPSï¼‰ï¼Œå¯¼è‡´å®æ—¶æŠ¥è¡¨è®¿é—®å—é™ï¼Œä»…å¼€æ”¾ç»™ç®¡ç†äººå‘˜å’Œç°åœºç”µè§†ã€‚ä¸€çº¿äººå‘˜åªèƒ½åœ¨ç‰¹å®šä½ç½®é€šè¿‡ç”µè§†æŸ¥çœ‹æ•°æ®ï¼Œè‹¥ä¸åœ¨åŒä¸€å·¥åŒºæˆ–æ¥¼å±‚ï¼Œæ— æ³•å®æ—¶æ„ŸçŸ¥ç»­ç­æ•°æ®å˜åŒ–ã€‚</li>
<li><strong>æŠ¥è¡¨ç»´åº¦å•ä¸€ï¼Œç¼ºä¹ä¸ªæ€§åŒ–åˆ†ææ”¯æŒï¼Œä½¿ç”¨åœºæ™¯å—é™</strong>ï¼šç³»ç»Ÿåœ¨å¤„ç†å¤šè¡¨å…³è”å¤æ‚æŸ¥è¯¢æ—¶æ•ˆç‡ä½ä¸‹ï¼Œä»…èƒ½æä¾›é¢„è®¾çš„å•ä¸€ç»´åº¦æŠ¥è¡¨ï¼Œéš¾ä»¥æ ¹æ®ä¸åŒå²—ä½ï¼ˆå¦‚ç®¡ç†å±‚ã€è¿è¥ã€é”€å”®ï¼‰æä¾›å·®å¼‚åŒ–çš„åˆ†æè§†è§’ï¼Œè¿›è€Œå¯¼è‡´å‰çº¿ä¸šåŠ¡åœºæ™¯ä½¿ç”¨å—é™ã€‚</li>
</ul>
<p>åœ¨è¡Œè¯¾åœºæ™¯ä¸­ï¼Œç”±äº ClickHouse æ— æ³•æ”¯æ’‘ 2B ä¸šåŠ¡æ‰€éœ€çš„é«˜å¹¶å‘è®¿é—®ï¼Œç³»ç»Ÿæœ€åˆé‡‡ç”¨äº†åŸºäº MySQL çš„å®šåˆ¶åŒ–æ•°æ®æ–¹æ¡ˆã€‚å„ç±»æŠ¥è¡¨éœ€ç»è¿‡ ODS â†’ DW â†’ DM çš„å¤šå±‚æ•°æ®åŠ å·¥ï¼Œå†æŒ‰ä¸šåŠ¡åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–èšåˆå¼€å‘ã€‚ä¸šåŠ¡ä¸Šé‡åˆ°äº†æ•°æ®å®šåˆ¶æµç¨‹å¤æ‚ã€å“åº”æ…¢ã€çµæ´»æ€§å·®çš„æŒ‘æˆ˜ã€‚å…·ä½“é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>é«˜åº¦è€¦åˆçš„åŠ å·¥é“¾æ¡</strong>ï¼šæ¯ä¸€å¼ æŠ¥è¡¨éƒ½éœ€è¦ç»è¿‡ ODS â†’ DW â†’ DM çš„å¤šå±‚æ•°æ®åŠ å·¥è¿‡ç¨‹ï¼Œä¸€æ—¦æœ‰å­—æ®µã€é€»è¾‘æˆ–å£å¾„çš„è°ƒæ•´ï¼Œä¸ä»…éœ€è¦åŒæ­¥ä¿®æ”¹å„å±‚æ•°æ®åŠ å·¥é€»è¾‘ï¼Œè¿˜ä¼šå½±å“å¤šä¸ªæŠ¥è¡¨ï¼Œé€ æˆä¿®æ”¹æˆæœ¬é«˜ã€é£é™©å¤§ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡ä½ï¼Œç»´æŠ¤å¤æ‚</strong>ï¼šå±•ç¤ºå±‚çš„å˜æ›´å¾€å¾€æ¶‰åŠå‰åç«¯è”åŠ¨å¼€å‘ï¼Œä¸å…·å¤‡ä½æˆæœ¬å¿«é€Ÿè¿­ä»£èƒ½åŠ›ï¼Œæ— æ³•æ”¯æ’‘ä¸šåŠ¡å¿«é€Ÿå˜åŒ–ä¸‹çš„çµæ´»è°ƒæ•´éœ€æ±‚ã€‚</li>
<li><strong>éš¾ä»¥æ”¯æ’‘å¤šè§’è‰²ã€å·®å¼‚åŒ–çš„æ•°æ®éœ€æ±‚</strong>ï¼šæŠ¥è¡¨è®¾è®¡é€šå¸¸ä»¥å›ºå®šåœºæ™¯ä¸ºä¸»ï¼Œç¼ºä¹ç»Ÿä¸€çš„æ•°æ®æœåŠ¡èƒ½åŠ›ï¼Œä¸æ˜“å¤ç”¨ï¼Œéš¾ä»¥æ»¡è¶³ä¸åŒå²—ä½å¯¹æ•°æ®çš„ä¸ªæ€§åŒ–åˆ†æéœ€æ±‚ã€‚</li>
</ul>
<h2 data-id="heading-3">åŸºäºé˜¿é‡Œäº‘ SelectDB å‡çº§å®æ—¶æŠ¥è¡¨</h2>
<p>æ˜ç¡®æ¶æ„ç“¶é¢ˆåï¼Œé«˜é€”æ•™è‚²è”åˆé˜¿é‡Œäº‘ä¸é£è½®ç§‘æŠ€ï¼Œé€‰å®šåŸºäº Apache Doris å†…æ ¸çš„ <strong>é˜¿é‡Œäº‘ SelectDB</strong> ä½œä¸ºæ–°ä¸€ä»£å®æ—¶åˆ†æå¼•æ“ï¼Œå®ç° ClickHouse ä¸ MySQL çš„å…¨é¢æ›¿ä»£ï¼Œæ„å»ºç»Ÿä¸€çš„å®æ—¶åˆ†æå¹³å°ã€‚</p>
<h3 data-id="heading-4">é˜¿é‡Œäº‘ SelectDB ä¼˜åŠ¿</h3>
<p>SelectDB å‡­å€Ÿä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼Œç²¾å‡†åŒ¹é…äº†é«˜é€”æ•™è‚²å¯¹â€œé«˜å¹¶å‘ã€é«˜çµæ´»æ€§ã€ä½å»¶è¿Ÿâ€çš„åˆ†æéœ€æ±‚ï¼š</p>
<ol>
<li><strong>é«˜å¹¶å‘æ”¯æ’‘èƒ½åŠ›ï¼šæ”¯æ’‘åƒçº§åˆ«å¹¶å‘è®¿é—®</strong>ï¼šé€šè¿‡å€’æ’ç´¢å¼•ã€ZoneMapã€Bloom Filter ç­‰å¤šçº§ç´¢å¼•æœºåˆ¶ï¼Œç»“åˆåˆ†åŒºåˆ†æ¡¶æŠ€æœ¯ï¼ŒSelectDB èƒ½åœ¨æŸ¥è¯¢æ—¶å¿«é€Ÿè£å‰ªæ— å…³æ•°æ®ï¼Œæ˜¾è‘—é™ä½è®¡ç®—ä¸ I/O è´Ÿè½½ï¼Œç¨³å®šæ”¯æ’‘æˆåƒä¸Šä¸‡ç”¨æˆ·åŒæ—¶åœ¨çº¿è®¿é—®ã€‚</li>
<li><strong>ç§’çº§å¤æ‚æŸ¥è¯¢å“åº”ï¼šå½»åº•è§£å†³å¤šè¡¨ Join æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šSelectDB æ”¯æŒç§’çº§å“åº”çš„å¤šè¡¨ Join ä¸å®½è¡¨æŸ¥è¯¢ï¼Œæ˜¾è‘—ä¼˜äº ClickHouse çš„å¤æ‚æŸ¥è¯¢èƒ½åŠ›ï¼Œæ»¡è¶³å®æ—¶ä¸šåŠ¡å¯¹å¤šç»´æ•°æ®çµæ´»ç»„åˆåˆ†æçš„éœ€æ±‚ï¼Œæå‡ä¸šåŠ¡åœºæ™¯é€‚é…æ€§ä¸æ•°æ®æœåŠ¡èƒ½åŠ›ã€‚</li>
<li><strong>å®æ—¶æ›´æ–°èƒ½åŠ›ï¼šæ”¯æŒå®æ—¶å†™å…¥ä¸é«˜æ€§èƒ½æŸ¥è¯¢å¹¶å­˜</strong>ï¼šå€ŸåŠ© Unique Key æ¨¡å‹ï¼ŒSelectDB å®ç°äº†å¼ºä¸€è‡´è¯­ä¹‰ä¸‹çš„å®æ—¶æ›´æ–°ä¸æŸ¥è¯¢èƒ½åŠ›ï¼Œåœ¨æ•°æ®é¢‘ç¹å˜æ›´åœºæ™¯ä¸‹ä¾ç„¶ä¿æŒæé«˜çš„æŸ¥è¯¢æ€§èƒ½ï¼Œç›¸æ¯” ClickHouse æä¾›æ›´å¼ºçš„æ•°æ®é²œæ´»æ€§æ”¯æŒã€‚</li>
<li><strong>ä¼ä¸šçº§å¯è¿ç»´æ€§ï¼šé™ä½æ•°æ®å¹³å°ä½¿ç”¨é—¨æ§›</strong>ï¼šSelectDB æä¾›ç™½å±åŒ–è¿ç»´ç•Œé¢ï¼Œå†…å»º SQL å®¡è®¡ä¸æŸ¥è¯¢è¿½è¸ªèƒ½åŠ›ï¼Œå¤§å¹…é™ä½æ•°æ®å¹³å°çš„è¿ç»´ä¸ä½¿ç”¨æˆæœ¬ï¼Œæ”¯æŒå¼€å‘äººå‘˜ä¸“æ³¨ä¸šåŠ¡é€»è¾‘å¼€å‘ï¼Œæå‡æ•´ä½“æ•°æ®äº¤ä»˜æ•ˆç‡ã€‚</li>
</ol>
<h3 data-id="heading-5">åŸºäºé˜¿é‡Œäº‘ SelectDB æ•°æ®æ¶æ„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35ce25dd49c64184a6273208cbc69461~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763549174&amp;x-signature=gOC0TAO5bPgrNoxwKumylXkuuRw%3D" alt="åŸºäºé˜¿é‡Œäº‘ SelectDB æ•°æ®æ¶æ„.png" loading="lazy"/></p>
<p>å®æ—¶æ•°æ®ä½¿ç”¨ Flink å¿«é€Ÿå†™å…¥ SelectDBï¼Œç¦»çº¿æ•°æ®ä½¿ç”¨ SeaTunnel å†™å…¥ SelectDBã€‚SelectDB ä½œä¸ºæŸ¥è¯¢çš„ç»Ÿä¸€å…¥å£ï¼ŒBI é€šè¿‡æŸ¥è¯¢å…¥å£æ¥å…¥ã€‚</p>
<h3 data-id="heading-6">é˜¿é‡Œäº‘ SelectDB å®è·µå’Œè°ƒä¼˜</h3>
<ul>
<li><strong>åŠŸèƒ½é€‚é…æ€§</strong>ï¼šé˜¿é‡Œäº‘ SelectDB é›†ç¾¤ç®¡ç†ã€è´¦å·ç®¡ç†ã€å®æ—¶ç›‘æ§é¢„è­¦ã€æ•°æ®å®‰å…¨ç®¡ç†ç­‰ä¼ä¸šçº§åŠŸèƒ½èƒ½å¤Ÿè¦†ç›–é«˜é€”æ•™è‚²å¯¹é›†ç¾¤çš„åŠŸèƒ½éœ€æ±‚ã€‚æ­¤å¤–ï¼Œé˜¿é‡Œäº‘ SelectDB é€»è¾‘è§†å›¾åŠŸèƒ½å®ç°è®¡ç®—ä¸å­˜å‚¨è§£è€¦ï¼Œå½“ä¸šåŠ¡éœ€æ–°å¢åˆ†æç»´åº¦æ—¶ï¼Œä»…éœ€æ”¹å†™è§†å›¾ SQLï¼Œæ— éœ€é‡æ„åº•å±‚æ•°æ®ç®¡é“ï¼Œè§£å†³è¡Œè¯¾åœºæ™¯ MySQL æ•°æ®åº“â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„è€¦åˆé—®é¢˜ã€‚</li>
<li><strong>ä½¿ç”¨å€’æ’ç´¢å¼•</strong>ï¼šåŸºäºé˜¿é‡Œäº‘ SelectDB MPP æ¶æ„ä¸å‘é‡åŒ–æŸ¥è¯¢å¼•æ“ï¼Œå¯¹äº¿çº§è®¢å•ã€è¯¾ç¨‹ã€ç”¨æˆ·è¡¨è¿›è¡Œå®æ—¶å¤šè¡¨ Joinã€‚é’ˆå¯¹é«˜é¢‘æŸ¥è¯¢å­—æ®µå¯ç”¨é˜¿é‡Œäº‘ SelectDB å€’æ’ç´¢å¼•åŠŸèƒ½ï¼Œç»“åˆ Bloom Filter é¢„è¿‡æ»¤æ— æ•ˆæ•°æ®ï¼Œåœ¨ 700+ é«˜å¹¶å‘æŸ¥è¯¢å‹åŠ›ä¸‹ P99 å»¶è¿Ÿä½äº 200msï¼Œç¨³å®šæ»¡è¶³æ ¸å¿ƒæŠ¥è¡¨ 2s å†…å“åº”ï¼Œç›¸æ¯” ClickHouse æ€§èƒ½æå‡ 7+å€ã€‚</li>
</ul>
<p>å®è·µä¸­æˆ‘ä»¬ç§¯ç´¯äº†éƒ¨ç½²ä¸æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„è°ƒä¼˜ç»éªŒï¼Œç‰¹æ­¤åˆ†äº«ï¼š</p>
<ul>
<li>å°½å¯èƒ½ä½¿ç”¨åŸå­—æ®µå½¢å¼è¿›è¡Œè¿‡æ»¤ï¼šæ¯”å¦‚è¿‡æ»¤æ—¶é—´å­—æ®µï¼Œå°½é‡ä½¿ç”¨åŸæ ¼å¼è¿›è¡Œè¿‡æ»¤ï¼Œä¸è¦é’ˆå¯¹æ—¶é—´æ ¼å¼è½¬åŒ–åè¿‡æ»¤ï¼Œå¦åˆ™æ‰«æé‡è£å‰ªçš„æ•ˆæœä¸ä½³ã€‚</li>
<li>é¿å…ä½¿ç”¨ Not In çš„è¯­æ³•ï¼ŒNot In çš„è¯­æ³•ä¼šè¿›è¡Œå…¨è¡¨çš„æ‰«æï¼Œæ¶‰åŠè®¡ç®—çš„æ•°æ®é‡è¾ƒå¤§ï¼ŒCPU å ç”¨ç‡ä¹Ÿéšä¹‹ä¸Šå‡ï¼Œé›†ç¾¤ç¨³å®šæ€§æ˜“å—åˆ°å½±å“ã€‚</li>
<li>å°½å¯èƒ½å°†ä¸åŒä¸šåŠ¡çº¿çš„æŸ¥è¯¢æ‹†åˆ†ä¸ºä¸åŒçš„é›†ç¾¤ï¼Œéš”ç¦»èµ„æºçš„äº’ç›¸å½±å“ã€‚</li>
<li>è¿™éƒ¨åˆ†æ”¾åˆ° SelectDB ä¸­ï¼Œå®æ—¶ä»»åŠ¡çš„åŸå› ä¸»è¦æ˜¯ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹çš„ç»´è¡¨åœ¨ HBase ä¸­ï¼Œä½†æ˜¯ç”±äºç»´åº¦æ›´æ–°åŸå› ï¼Œæˆ‘ä»¬æŠŠè¿™éƒ¨åˆ†æ”¾åˆ°äº† SelectDB ä¸­ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f725ca6cedff49378472f2a66fa659bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763549174&amp;x-signature=8E0g2MXBD5QPYZdKDZvEq37rpU8%3D" alt="é˜¿é‡Œäº‘ SelectDB å®è·µå’Œè°ƒä¼˜.png" loading="lazy"/></p>
<h2 data-id="heading-7">åº”ç”¨æ”¶ç›Š</h2>
<p>é˜¿é‡Œäº‘ SelectDB æœ‰æ•ˆæ”¯æŒäº†é«˜é€”æ•™è‚²ç»­ç­åŠè¡Œè¯¾æœŸé—´çš„å®æ—¶æŠ¥è¡¨åœºæ™¯ï¼Œä¸ºé«˜é€”æ•™è‚²å¸¦æ¥äº†åˆ†ææ€§èƒ½æå‡ã€æ¶æ„çµæ´»æ€§çªç ´ã€æˆæœ¬é™ä½ç­‰æ”¶ç›Šï¼š</p>
<ul>
<li><strong>åˆ†ææ€§èƒ½æå‡</strong>ï¼šåœ¨ 700+ é«˜å¹¶å‘æŸ¥è¯¢å‹åŠ›ä¸‹ P99 å»¶è¿Ÿä½äº 200msï¼Œç¨³å®šæ»¡è¶³æ ¸å¿ƒæŠ¥è¡¨ 2s å†…å“åº”ã€‚å…¨éƒ¨ä¸€çº¿äººå‘˜å¯ç§’çº§è·å–åŠ¨æ€ç»­ç­ä¸è¡Œè¯¾æ•°æ®ï¼ŒæŸ¥è¯¢å¹¶å‘ç›¸æ¯” ClickHouse æå‡ <strong>7+ å€</strong>ï¼Œå¤§å¹…æå‡è¿è¥å†³ç­–ã€ä¸€çº¿æ”¯æŒæ•ˆç‡ã€‚</li>
<li><strong>æ¶æ„çµæ´»æ€§çªç ´</strong>ï¼šå®ç°æŸ¥è¯¢é€»è¾‘ä¸æ•°æ®æ¨¡å‹è§£è€¦ï¼Œè§£å†³è¡Œè¯¾åœºæ™¯åŸ MySQL æ¶æ„éœ€æ±‚å˜æ›´éœ€å…¨é“¾è·¯æ”¹é€ çš„ç—›ç‚¹ï¼Œéœ€æ±‚è¿­ä»£å‘¨æœŸå¤§å¹…ç¼©çŸ­ã€‚é€šè¿‡é˜¿é‡Œäº‘ SelectDB å¤šè¡¨ Join æŸ¥è¯¢èƒ½åŠ›ï¼Œæå‡å¼€å‘å’Œäº¤ä»˜æ•ˆç‡ï¼Œæ•°æ®ä½¿ç”¨æ›´ä¸ºçµæ´»ã€‚</li>
<li><strong>æ•´ä½“æˆæœ¬é™ä½</strong>ï¼šé˜¿é‡Œäº‘ SelectDB ç™½å±åŒ–è¿ç»´ã€SQL å®¡è®¡å’Œè¿½è¸ªï¼Œå¤§å¹…ç®€åŒ–é«˜é€”æ•™è‚²è¿ç»´å¼€å‘æµç¨‹ï¼Œæå‡ <strong>70%</strong> è¿ç»´æ•ˆç‡ã€‚æ­¤å¤–ï¼Œé˜¿é‡Œäº‘ SelectDB ç»Ÿä¸€äº†é«˜é€”æ•™è‚²åˆ†æå¼•æ“ï¼Œå¤§å¹…é™ä½å¤šåˆ†æå¼•æ“å¯¼è‡´çš„èµ„æºæµªè´¹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[react åˆ‡ç‰‡ å’Œ ä¼˜å…ˆçº§è°ƒåº¦]]></title>    <link>https://juejin.cn/post/7571655979256053800</link>    <guid>https://juejin.cn/post/7571655979256053800</guid>    <pubDate>2025-11-12T10:28:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655979256053800" data-draft-id="7571559178743087139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="react  åˆ‡ç‰‡ å’Œ  ä¼˜å…ˆçº§è°ƒåº¦"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T10:28:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œåå¸å›"/> <meta itemprop="url" content="https://juejin.cn/user/2154698523551774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            react  åˆ‡ç‰‡ å’Œ  ä¼˜å…ˆçº§è°ƒåº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698523551774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œåå¸å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:28:11.000Z" title="Wed Nov 12 2025 10:28:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…³é”®ç‚¹åœ¨äºï¼Œè¿™ä¸ªå†³ç­–å¹¶ ä¸æ˜¯ åœ¨ workLoop ï¼ˆå·¥ä½œå¾ªç¯ï¼‰ å†…éƒ¨ è‡ªå·±åˆ¤æ–­çš„ã€‚ workLoop åªæ˜¯ä¸€ä¸ªâ€œåŸ‹å¤´å¹²æ´»çš„å·¥äººâ€ï¼Œè€ŒçœŸæ­£çš„â€œé¡¹ç›®ç»ç†â€æ˜¯ <strong><code>Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</code></strong> å’Œ <strong><code>Laneï¼ˆè½¦é“ï¼‰</code></strong> æ¨¡å‹ çš„ç»„åˆã€‚
ä¸‹é¢æˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹ React æ˜¯å¦‚ä½•åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µçš„ã€‚</p>
<h3 data-id="heading-0">ä¸¤ç§ä¸åŒçš„â€œè§¦å‘æœºåˆ¶â€</h3>
<p>æˆ‘ä»¬ä¸åº”è¯¥æŠŠ <code>workLoop</code> æƒ³è±¡æˆä¸€ä¸ªéœ€è¦çŒœæµ‹å½“å‰å¤„å¢ƒçš„å‡½æ•°ï¼Œè€Œåº”è¯¥ç†è§£ä¸ºæœ‰ä¸¤æ¡å®Œå…¨ä¸åŒçš„è·¯å¾„ï¼Œéƒ½ä¼šæœ€ç»ˆå¯¼å‘â€œå¹²æ´»â€è¿™ä¸€æ­¥ã€‚</p>
<h3 data-id="heading-1">è·¯å¾„ä¸€ï¼šæ—¶é—´ç‰‡ç”¨å®Œï¼ˆä¼˜é›…åœ°æš‚åœï¼‰è¿™æ˜¯å¹¶å‘æ¸²æŸ“ä¸­çš„â€œå¸¸è§„è·¯å¾„â€ã€‚</h3>
<ol>
<li>å‡†å¤‡å·¥ä½œ ï¼šè°ƒåº¦å™¨æœ‰ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚å®ƒé€šè¿‡ <code>requestIdleCallback</code> å‘æµè§ˆå™¨ç”³è¯·â€œç»¿ç¯â€ï¼ˆç©ºé—²æ—¶é—´ï¼‰ã€‚</li>
<li>å¼€å§‹å·¥ä½œ ï¼šæµè§ˆå™¨å›åº”ï¼šâ€œä½ ç°åœ¨æœ‰ 4 æ¯«ç§’çš„ç©ºé—²æ—¶é—´ã€‚â€ äºæ˜¯è°ƒåº¦å™¨å¯åŠ¨ <code>workLoopConcurrent()</code> ã€‚</li>
<li>æ‰§è¡Œå·¥ä½œ ï¼š while å¾ªç¯å¼€å§‹æ‰§è¡Œï¼š <code>while (workInProgress !== null &amp;&amp; !shouldYield())</code> ã€‚
<ul>
<li><code>performUnitOfWork</code> è¢«è°ƒç”¨ï¼Œå¤„ç†ä¸€ä¸ª Fiber èŠ‚ç‚¹ã€‚</li>
<li><code>shouldYield()</code> è¢«è°ƒç”¨ã€‚å®ƒ å”¯ä¸€çš„èŒè´£ å°±æ˜¯æ£€æŸ¥è¿™ 4 æ¯«ç§’çš„â€œæœ€åæœŸé™â€æ˜¯å¦å·²åˆ°ã€‚å®ƒå¯¹ä»»åŠ¡ä¼˜å…ˆçº§ä¸€æ— æ‰€çŸ¥ã€‚</li>
</ul>
</li>
<li>æš‚åœå·¥ä½œ ï¼šå‡è®¾å¤„ç†äº† 20 ä¸ª Fiber èŠ‚ç‚¹åï¼Œ4 æ¯«ç§’ç”¨å®Œäº†ã€‚ shouldYield() ç°åœ¨è¿”å› true</li>
<li>åšå‡ºå†³ç­– ï¼š while å¾ªç¯çš„æ¡ä»¶ <code>!shouldYield() </code>å˜ä¸º <code>false</code> ã€‚å¾ªç¯ ä¼˜é›…åœ°ç»ˆæ­¢ ã€‚</li>
<li>æœ€ç»ˆç»“æœ ï¼š <code>workLoopConcurrent</code> å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚ <code>workInProgress</code> æŒ‡é’ˆå®Œå¥½æ— æŸï¼Œä¾ç„¶æŒ‡å‘ç¬¬ 21 ä¸ªå¾…å¤„ç†çš„ Fiber èŠ‚ç‚¹ã€‚è°ƒåº¦å™¨æ³¨æ„åˆ°å·¥ä½œè¿˜æ²¡å®Œæˆï¼Œäºæ˜¯å®ƒä¼šé¢„çº¦ä¸‹ä¸€æ¬¡çš„ <code>requestIdleCallback</code> ï¼Œä»¥ä¾¿å°†æ¥ç»§ç»­ã€‚
åœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œå¾ªç¯æ˜¯ç”±å…¶ å†…éƒ¨ çš„ <code>shouldYield</code>() æ—¶é—´æ£€æŸ¥æ¥åœæ­¢çš„ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰è®¡åˆ’çš„ã€åˆä½œå¼çš„æš‚åœã€‚</li>
</ol>
<h3 data-id="heading-2">è·¯å¾„äºŒï¼šé«˜ä¼˜å…ˆçº§ä»»åŠ¡æ’é˜Ÿï¼Œå¼ºåˆ¶ä¸­æ–­è¿™æ˜¯ç¡®ä¿ UI å“åº”çš„â€œç´§æ€¥è·¯å¾„â€ã€‚</h3>
<ol>
<li>å½“å‰çŠ¶æ€ ï¼š <code>workLoopConcurrent()</code> æ­£åœ¨æ„‰å¿«åœ°æ‰§è¡Œä¸€ä¸ªä½ä¼˜å…ˆçº§çš„æ›´æ–°ï¼ˆæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼‰ã€‚</li>
<li>â€œå…¥ä¾µè€…â€å‡ºç° ï¼šç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ã€‚äº‹ä»¶å¤„ç†å™¨è§¦å‘ï¼Œè°ƒç”¨äº† <code>setState</code> ã€‚</li>
<li>å‘å‡ºä¿¡å· ï¼š <code>scheduleUpdateOnFiber</code> å‡½æ•°è¢«è°ƒç”¨ã€‚å®ƒè·å¾—äº†ä¸€ä¸ª é«˜ä¼˜å…ˆçº§çš„è½¦é“ ï¼ˆä¾‹å¦‚ SyncLane ï¼‰ã€‚å®ƒæŠŠè¿™ä¸ª <code>SyncLane</code> æ·»åŠ åˆ° Fiber æ ¹èŠ‚ç‚¹çš„ <code>pendingLanes</code> ï¼ˆå¾…å¤„ç†è½¦é“ï¼‰ä¸Šã€‚</li>
<li>â€œé¡¹ç›®ç»ç†â€è¢«å”¤é†’ ï¼šè°ƒåº¦å™¨æ”¶åˆ°äº†è¿™ä¸ªå˜æ›´é€šçŸ¥ã€‚å®ƒç«‹åˆ»æ£€æŸ¥æ‰€æœ‰ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå‘ç°ï¼š
<ul>
<li>å½“å‰æ­£åœ¨è¿è¡Œçš„è½¦é“ ( <code>workInProgressRootRenderLanes</code> )ï¼šæ˜¯<code>ä½ä¼˜å…ˆçº§</code>çš„ï¼ˆä¾‹å¦‚ TransitionLane ï¼‰ã€‚</li>
<li>æ–°åŠ å…¥çš„å¾…å¤„ç†è½¦é“ ( <code>pendingLanes</code> )ï¼šåŒ…å«ä¸€ä¸ª<code>é«˜ä¼˜å…ˆçº§</code>çš„ SyncLane ã€‚</li>
</ul>
</li>
<li>åšå‡ºå†³ç­– ï¼šè°ƒåº¦å™¨<code>åœ¨ </code>å½“å‰è¿è¡Œçš„ <code>workLoop ä¹‹å¤–</code>ï¼Œåœ¨æ›´é«˜çš„å±‚çº§ åšå‡ºäº†å…³é”®åˆ¤æ–­ã€‚å®ƒçœ‹åˆ° SyncLane çš„ä¼˜å…ˆçº§é«˜äº TransitionLane ã€‚å®ƒå†³å®š å¿…é¡»<code>ä¸­æ–­ å½“å‰</code>çš„å·¥ä½œã€‚</li>
<li>æ‰§è¡Œä¸­æ–­ ï¼š
<ul>
<li>å®ƒä¸ä¼šç¤¼è²Œåœ°ç­‰å¾… shouldYield() ã€‚</li>
<li>å®ƒç›´æ¥è°ƒç”¨ prepareFreshStack() å‡½æ•°ã€‚</li>
<li><code>prepareFreshStack</code> ä¸¢å¼ƒ äº†æ—§çš„ã€åªåšäº†ä¸€åŠçš„ workInProgress æ ‘ï¼Œå¹¶ä¸ºè¿™ä¸ªé«˜ä¼˜å…ˆçº§çš„ SyncLane æ›´æ–°åˆ›å»ºäº†ä¸€ä¸ª å…¨æ–°çš„ workInProgress æ ‘ã€‚</li>
<li>ç„¶åï¼Œå®ƒä¼šç«‹åˆ»å¼€å§‹ä¸€ä¸ª æ–°çš„ å·¥ä½œå¾ªç¯ï¼ˆé€šå¸¸æ˜¯ <code>workLoopSync</code> ï¼Œè¿™ä¸ªå¾ªç¯ä¼šå®Œå…¨ å¿½ç•¥ shouldYield ï¼Œå› ä¸ºå®ƒå¿…é¡»ä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">React é€‰æ‹© workLoopSync è¿˜æ˜¯ workLoopConcurrent çš„æ ¸å¿ƒé€»è¾‘</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> shouldTimeSlice =
  (!forceSync &amp;&amp;
    !<span class="hljs-title function_">includesBlockingLane</span>(lanes) &amp;&amp;
    !<span class="hljs-title function_">includesExpiredLane</span>(root, lanes)) ||
  (enableSiblingPrerendering &amp;&amp; <span class="hljs-title function_">checkIfRootIsPrerendering</span>(root, lanes));
</code></pre>
<h4 data-id="heading-4">å†³ç­–å…³é”®ï¼š<code>shouldTimeSlice</code>Â å˜é‡</h4>
<ul>
<li>ä½ç½®ï¼š<code>react-reconciler/ReactFiberWorkLoop.js</code></li>
<li>ä½œç”¨ï¼šå†³å®šä½¿ç”¨åŒæ­¥æ¸²æŸ“ï¼ˆ<code>workLoopSync</code>ï¼‰è¿˜æ˜¯å¹¶å‘æ¸²æŸ“ï¼ˆ<code>workLoopConcurrent</code>ï¼‰</li>
</ul>
<h4 data-id="heading-5">1. æ‰§è¡Œ workLoopSyncï¼ˆåŒæ­¥æ¸²æŸ“ï¼‰çš„æƒ…å†µ</h4>
<p>å½“Â <code>shouldTimeSlice = false</code>Â æ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼š</p>
<ul>
<li>
<p><strong>æ¡ä»¶ 1</strong>ï¼š<code>forceSync = true</code></p>
<ul>
<li>ç”±Â <code>ReactDOM.flushSync()</code>Â å¼ºåˆ¶è§¦å‘çš„æ›´æ–°ï¼Œå¿…é¡»ç«‹å³åŒæ­¥æ‰§è¡Œã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¡ä»¶ 2</strong>ï¼š<code>includesBlockingLane(lanes) = true</code></p>
<ul>
<li>æ›´æ–°å±äº<code>é«˜ä¼˜å…ˆçº§</code> â€œé˜»å¡è½¦é“â€ï¼ˆå¦‚ <strong><code>ç”¨æˆ·è¾“å…¥ã€ç‚¹å‡»ç­‰</code></strong> äº¤äº’äº‹ä»¶ï¼‰ï¼Œéœ€ç«‹å³å“åº”ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¡ä»¶ 3</strong>ï¼š<code>includesExpiredLane(root, lanes) = true</code></p>
<ul>
<li>ä½ä¼˜å…ˆçº§ä»»åŠ¡å› è¢«<code>åå¤æ‰“æ–­</code>è€Œ â€œ<code>è¿‡æœŸ</code>â€ï¼Œå¼ºåˆ¶åŒæ­¥æ‰§è¡Œé¿å… â€œ<code>é¥¥é¥¿</code>â€ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">2. æ‰§è¡Œ workLoopConcurrentï¼ˆå¹¶å‘æ¸²æŸ“ï¼‰çš„æƒ…å†µ</h4>
<p>å½“Â <code>shouldTimeSlice = true</code>Â æ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š</p>
<ul>
<li>éÂ <code>flushSync</code>Â è§¦å‘çš„æ›´æ–°ï¼›</li>
<li>ä¸å±äºé«˜ä¼˜å…ˆçº§é˜»å¡è½¦é“ï¼›</li>
<li>æœªè¿‡æœŸçš„ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼›</li>
<li>å…¸å‹åœºæ™¯ï¼š<code>startTransition</code>Â åŒ…è£¹çš„æ›´æ–°ã€ç½‘ç»œè¯·æ±‚åçš„ UI æ›´æ–°ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-7">æ€»ç»“è®°å¿†è¡¨</h4>




















<table><thead><tr><th>æ¸²æŸ“æ¨¡å¼</th><th>è§¦å‘åœºæ™¯</th><th>æ ¸å¿ƒç‰¹ç‚¹</th></tr></thead><tbody><tr><td>workLoopSync</td><td>flushSync / ç”¨æˆ·äº¤äº’ / è¿‡æœŸä»»åŠ¡</td><td>åŒæ­¥ã€ä¸å¯ä¸­æ–­ã€é«˜ä¼˜å…ˆçº§</td></tr><tr><td>workLoopConcurrent</td><td>startTransition / å¼‚æ­¥æ•°æ®æ›´æ–° / éç´§æ€¥ä»»åŠ¡</td><td>å¯ä¸­æ–­ã€ä½ä¼˜å…ˆçº§ã€æ—¶é—´åˆ†ç‰‡</td></tr></tbody></table>
<h3 data-id="heading-8">React äº‹ä»¶ä¼˜å…ˆçº§åˆ¤æ–­æœºåˆ¶æ€»ç»“</h3>
<h4 data-id="heading-9">æ ¸å¿ƒå†³ç­–è€…ï¼š<code>getEventPriority</code>Â å‡½æ•°</h4>
<ul>
<li>ä½ç½®ï¼š<code>react-dom-bindings/src/events/ReactDOMEventListener.js</code></li>
<li>ä½œç”¨ï¼šæ ¹æ®äº‹ä»¶ç±»å‹åˆ†é…ä¼˜å…ˆçº§ï¼Œå†³å®šåç»­æ¸²æŸ“æ¨¡å¼ï¼ˆåŒæ­¥ / å¹¶å‘ï¼‰</li>
</ul>
<h4 data-id="heading-10">ä¸‰å¤§ä¼˜å…ˆçº§åˆ†ç±»åŠå¯¹åº”äº‹ä»¶</h4>





























<table><thead><tr><th>ä¼˜å…ˆçº§ç±»å‹</th><th>å¯¹åº”äº‹ä»¶ç¤ºä¾‹</th><th>ç‰¹ç‚¹</th><th>æ¸²æŸ“æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>DiscreteEventPriority</strong>ï¼ˆç¦»æ•£äº‹ä»¶ä¼˜å…ˆçº§ï¼‰</td><td>clickã€keydownã€inputã€focusã€submit</td><td>ç”¨æˆ·ç›´æ¥ã€å•æ¬¡äº¤äº’ï¼Œéœ€å³æ—¶åé¦ˆ</td><td>åŒæ­¥æ¸²æŸ“ï¼ˆworkLoopSyncï¼‰</td></tr><tr><td><strong>ContinuousEventPriority</strong>ï¼ˆè¿ç»­äº‹ä»¶ä¼˜å…ˆçº§ï¼‰</td><td>scrollã€mousemoveã€touchmoveã€drag</td><td>é«˜é¢‘è¿ç»­è§¦å‘ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</td><td>å¹¶å‘æ¸²æŸ“ï¼ˆå¯ä¸­æ–­ï¼‰</td></tr><tr><td><strong>DefaultEventPriority</strong>ï¼ˆé»˜è®¤äº‹ä»¶ä¼˜å…ˆçº§ï¼‰</td><td>loadã€errorã€æœªæ˜ç¡®åˆ†ç±»äº‹ä»¶</td><td>å¼‚æ­¥æˆ–éç”¨æˆ·ç›´æ¥äº¤äº’äº‹ä»¶</td><td>å¹¶å‘æ¸²æŸ“ï¼ˆå¯ä¸­æ–­ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-11">å…³é”®æµç¨‹</h4>
<ol>
<li><strong>äº‹ä»¶æ•è·</strong>ï¼šæ‰€æœ‰æµè§ˆå™¨äº‹ä»¶å…ˆè¢« React ç»Ÿä¸€ç›‘å¬å™¨æ•è·ï¼ˆè€Œéç›´æ¥è§¦å‘ç”¨æˆ·å†™çš„å›è°ƒï¼‰ã€‚</li>
<li><strong>ä¼˜å…ˆçº§åˆ†é…</strong>ï¼š<code>getEventPriority</code>Â é€šè¿‡Â <code>switch</code>Â è¯­å¥åˆ¤æ–­äº‹ä»¶ç±»å‹ï¼Œåˆ†é…å¯¹åº”ä¼˜å…ˆçº§ã€‚</li>
<li><strong>è°ƒåº¦æ¸²æŸ“</strong>ï¼šé«˜ä¼˜å…ˆçº§ï¼ˆç¦»æ•£äº‹ä»¶ï¼‰èµ°åŒæ­¥æ¸²æŸ“ï¼Œä½ä¼˜å…ˆçº§ï¼ˆè¿ç»­ / é»˜è®¤äº‹ä»¶ï¼‰èµ°å¹¶å‘æ¸²æŸ“ã€‚</li>
</ol>
<h4 data-id="heading-12">è®°å¿†è¦ç‚¹</h4>
<ul>
<li><strong>VIP äº‹ä»¶</strong>ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰â†’ é«˜ä¼˜å…ˆçº§ â†’ åŒæ­¥æ¸²æŸ“ï¼ˆä¸å¡é¡¿ï¼‰ã€‚</li>
<li><strong>é«˜é¢‘äº‹ä»¶</strong>ï¼ˆæ»šåŠ¨ã€é¼ æ ‡ç§»åŠ¨ç­‰ï¼‰â†’ ä¸­ä¼˜å…ˆçº§ â†’ å¯ä¸­æ–­æ¸²æŸ“ï¼ˆä¿æµç•…ï¼‰ã€‚</li>
<li><strong>å…¶ä»–äº‹ä»¶</strong>Â â†’ ä½ä¼˜å…ˆçº§ â†’ å¹¶å‘æ¸²æŸ“ï¼ˆä¸é˜»å¡ï¼‰ã€‚</li>
</ul>
<p>è¿™ä¸ªæœºåˆ¶ä»æºå¤´åŒºåˆ†ä»»åŠ¡è½»é‡ï¼Œæ˜¯ React å¹¶å‘æ¨¡å¼æµç•…è¿è¡Œçš„æ ¸å¿ƒåŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bfb7234604d491cbdf0e0b3e6069252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5Y2O5bid5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548091&amp;x-signature=P0EbWf0O1fZpWuUpLNVdpuc6eKs%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin åç¨‹åŸºç¡€å…¥é—¨ç³»åˆ—ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7571641339688812544</link>    <guid>https://juejin.cn/post/7571641339688812544</guid>    <pubDate>2025-11-12T10:37:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571641339688812544" data-draft-id="7571559178743234595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin åç¨‹åŸºç¡€å…¥é—¨ç³»åˆ—ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Kotlin,åç«¯,Android"/> <meta itemprop="datePublished" content="2025-11-12T10:37:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Android_å°é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/220360279590862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin åç¨‹åŸºç¡€å…¥é—¨ç³»åˆ—ï¼šä»æ¦‚å¿µåˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/220360279590862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Android_å°é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:37:40.000Z" title="Wed Nov 12 2025 10:37:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:18px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:40px;margin-bottom:20px;color:#007fff;display:flex;align-items:center}.markdown-body h1:hover:before,.markdown-body h2:hover:before,.markdown-body h3:hover:before,.markdown-body h4:hover:before,.markdown-body h5:hover:before,.markdown-body h6:hover:before{transition:All .4s ease-in-out;transform:rotate(1turn)}.markdown-body h1{font-size:30px;background:linear-gradient(#fff 60%,#c6e3ff 0)}.markdown-body h1:before{content:"";display:inline-block;width:32px;height:32px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h2{font-size:24px;background:linear-gradient(#fff 60%,#cce3fb 0)}.markdown-body h2:before{content:"";display:inline-block;width:24px;height:24px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3{font-size:20px}.markdown-body h3:before{content:"";display:inline-block;width:18px;height:18px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h4{font-size:18px}.markdown-body h4:before{content:"";display:inline-block;width:16px;height:16px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h5{font-size:16px}.markdown-body h5:before{content:"";display:inline-block;width:15px;height:15px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h6{font-size:14px}.markdown-body h6:before{content:"";display:inline-block;width:12px;height:12px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{border-bottom:2px solid #007fff;color:#007fff;padding-right:10px}.markdown-body p{letter-spacing:1px;line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:10px auto}.markdown-body hr{border:none;border-top:1px dashed #92c8ff}.markdown-body hr:before{content:"âœ‚";display:inline-block;position:relative;top:-12px;left:40px;padding:0 3px;color:#007fff;font-size:18px}.markdown-body hr:after{content:"æŒ‰è™šçº¿å‰ªå¼€";position:relative;top:-15px;left:84%;padding:0 3px;color:#007fff;font-size:12px}.markdown-body del{color:#f44}.markdown-body em{color:#007fff;margin:0 2px}.markdown-body strong{color:#007fff;font-weight:bolder}.markdown-body code{word-break:break-word;border-radius:4px;overflow-x:auto;background-color:#e6f3ff;color:#007fff;font-weight:600;font-size:16px;padding:.065em .4em;border:1px solid #007fff}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:5px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:18px;font-weight:400;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8;border:none}.markdown-body a{text-decoration:none;color:#007fff;border-bottom:1px solid #007fff}.markdown-body a:before{content:"Â¶";margin-right:5px;font-size:22px}.markdown-body a:after{content:"â†·";margin-left:2px;font-size:22px;display:none}.markdown-body a:active,.markdown-body a:hover{color:#275b8c;border-bottom:1px solid #275b8c}.markdown-body a:active:after,.markdown-body a:hover:after{display:inline-block}.markdown-body table{display:inline-block!important;font-size:16px;width:auto;max-width:100%;overflow:auto;border:1px solid #a5d3ff}.markdown-body thead{background:#c6e3ff;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#eef7ff}.markdown-body tbody&gt;tr:nth-child(odd){background-color:#f8fcff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #007fff;background-color:#eef7ff}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#007fff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><blockquote>
<p>æœ€è¿‘ä¸€ç›´åœ¨æ·±è€• Kotlin åç¨‹ï¼Œé€šè¿‡å®˜æ–¹æ–‡æ¡£ç³»ç»Ÿå­¦ä¹  + ä¸ªäººå®è·µæ€»ç»“ï¼Œæ¢³ç†å‡ºäº†ä¸€å¥—å®Œæ•´çš„å­¦ä¹ ç¬”è®°ã€‚ä¸å¾—ä¸è¯´ï¼Œå®˜æ–¹æ–‡æ¡£æ°¸è¿œæ˜¯æœ€æƒå¨ã€æœ€å…¨é¢çš„å­¦ä¹ èµ„æ–™ã€‚</p>
<p>åç¨‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-guide.html" target="_blank" title="https://kotlinlang.org/docs/coroutines-guide.html" ref="nofollow noopener noreferrer">Coroutines guide | Kotlin</a></p>
<p>åœ¨çº¿è¿è¡Œä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.kotlinlang.org%2F%23eyJ2ZXJzaW9uIjoiMi4yLjIxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLyoqXG4gKiBZb3UgY2FuIGVkaXQsIHJ1biwgYW5kIHNoYXJlIHRoaXMgY29kZS5cbiAqIHBsYXkua290bGlubGFuZy5vcmdcbiAqL1xuZnVuIG1haW4oKSB7XG4gICAgcHJpbnRsbihcIkhlbGxvLCB3b3JsZCEhIVwiKVxufSJ9" target="_blank" title="https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMi4yLjIxIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IiIsIm5vbmVNYXJrZXJzIjp0cnVlLCJ0aGVtZSI6ImlkZWEiLCJjb2RlIjoiLyoqXG4gKiBZb3UgY2FuIGVkaXQsIHJ1biwgYW5kIHNoYXJlIHRoaXMgY29kZS5cbiAqIHBsYXkua290bGlubGFuZy5vcmdcbiAqL1xuZnVuIG1haW4oKSB7XG4gICAgcHJpbnRsbihcIkhlbGxvLCB3b3JsZCEhIVwiKVxufSJ9" ref="nofollow noopener noreferrer">Kotlin Playground: Edit, Run, Share Kotlin Code Online</a></p>
<p>æˆ‘è®¡åˆ’ç”¨å¤šç¯‡æ–‡ç« ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶ã€ä»ç”¨æ³•åˆ°åŸç†ï¼ŒæŠŠ Kotlin åç¨‹çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹æ‹†è§£å¾—æ˜æ˜ç™½ç™½ï¼Œç°åœ¨æŠŠè¿™ä»½ç¬”è®°åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½ç»™æ­£åœ¨å­¦ä¹ åç¨‹çš„è¯»è€…æä¾›ä¸€äº›å¸®åŠ©ã€‚</p>
<p>ç”±äºä¸ªäººçŸ¥è¯†å‚¨å¤‡æœ‰é™ï¼Œç¬”è®°ä¸­éš¾å…å­˜åœ¨ç–æ¼æˆ–è¡¨è¿°ä¸å½“çš„åœ°æ–¹ï¼Œä¹Ÿéå¸¸æ¬¢è¿å¤§å®¶æå‡ºå®è´µæ„è§ï¼Œä¸€èµ·äº¤æµè¿›æ­¥</p>
</blockquote>
<h2 data-id="heading-0">1.å¼•è¨€ï¼šä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©åç¨‹ï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 å¹¶å‘ã€å¹¶è¡Œä¸çº¿ç¨‹çš„é™åˆ¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0be31fc8d6d4d778be36d481ed95cd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZF_lsI_pm6g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763549615&amp;x-signature=28P3wvwJp%2F1%2Faym%2B3u7CgQDwLZM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µè¾¨æ</strong>ï¼šå¹¶å‘æ˜¯â€œåŒä¸€æ—¶é—´æ®µå†…å¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œâ€ï¼Œå¹¶è¡Œæ˜¯â€œåŒä¸€æ—¶åˆ»å¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œâ€ã€‚çº¿ç¨‹ä½œä¸ºæ“ä½œç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯å®ç°å¹¶å‘/å¹¶è¡Œçš„ä¼ ç»Ÿæ–¹æ¡ˆï¼Œä½†å­˜åœ¨æ˜¾è‘—é™åˆ¶ï¼š</p>
<ul>
<li>åˆ›å»ºæˆæœ¬é«˜ï¼šæ¯ä¸ªçº¿ç¨‹å ç”¨çº¦1-2MBæ ˆå†…å­˜ï¼Œæ— æ³•å¤§è§„æ¨¡åˆ›å»º</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§ï¼šçº¿ç¨‹åˆ‡æ¢éœ€åˆ‡æ¢å†…æ ¸æ€ä¸ç”¨æˆ·æ€ï¼Œè€—æ—¶çº¦100nsçº§åˆ«</li>
<li>æ•°é‡ä¸Šé™ä½ï¼šæ™®é€šJVMè¿›ç¨‹ä¸­çº¿ç¨‹æ•°é‡ä¸Šé™é€šå¸¸ä¸ºå‡ åƒä¸ªï¼Œæ— æ³•æ»¡è¶³é«˜å¹¶å‘åœºæ™¯</li>
</ul>
<h3 data-id="heading-2">1.2 åç¨‹å®šä¹‰ï¼šå¯æŒ‚èµ·çš„è½»é‡è®¡ç®—å•å…ƒ</h3>
<p>Kotlinåç¨‹æ˜¯<strong>å¯æš‚åœã€å¯æ¢å¤ä¸”ä¸é˜»å¡çº¿ç¨‹çš„è®¡ç®—å•å…ƒ</strong>ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯èƒ½ä»¥â€œé¡ºåºä»£ç é£æ ¼â€ç¼–å†™å¹¶å‘é€»è¾‘ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚å…¶æœ¬è´¨æ˜¯ç”¨æˆ·æ€çš„â€œè™šæ‹Ÿçº¿ç¨‹â€ï¼Œç”±Kotlinè¿è¡Œæ—¶è°ƒåº¦è€Œéæ“ä½œç³»ç»Ÿï¼Œå› æ­¤åˆ›å»ºæˆæœ¬æä½ï¼ˆä»…å‡ KBæ ˆå†…å­˜ï¼Œæ”¯æŒç™¾ä¸‡çº§å¹¶å‘ï¼‰ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Kotlin Coroutines Basics</a></p>
<h2 data-id="heading-3">2.æŒ‚èµ·å‡½æ•°åŸºç¡€ï¼šåç¨‹çš„â€œæš‚åœä¸æ¢å¤â€</h2>
<h3 data-id="heading-4">2.1 suspendå…³é”®å­—ï¼šæŒ‚èµ·å‡½æ•°çš„æ ‡è¯†</h3>
<p><strong>æ ¸å¿ƒå«ä¹‰</strong>ï¼šç”¨<code>suspend</code>ä¿®é¥°çš„å‡½æ•°ç§°ä¸ºæŒ‚èµ·å‡½æ•°ï¼Œå…·å¤‡ä¸¤ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li>æš‚åœæ‰§è¡Œï¼šåœ¨ç‰¹å®šèŠ‚ç‚¹ï¼ˆå¦‚ç­‰å¾…IOå®Œæˆï¼‰æš‚åœå‡½æ•°æ‰§è¡Œï¼Œé‡Šæ”¾å½“å‰çº¿ç¨‹</li>
<li>æ¢å¤æ‰§è¡Œï¼šå½“ç­‰å¾…æ¡ä»¶æ»¡è¶³ï¼ˆå¦‚IOç»“æœè¿”å›ï¼‰æ—¶ï¼Œä»æš‚åœç‚¹ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p>å…³é”®ç‰¹æ€§ï¼šæŒ‚èµ·â‰ é˜»å¡ï¼ŒæŒ‚èµ·æ—¶çº¿ç¨‹å¯è¢«å¤ç”¨æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œå¤§å¹…æå‡èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Suspending Functions</a></p>
<h3 data-id="heading-5">2.2 æŒ‚èµ·å‡½æ•°çš„å£°æ˜ä¸è°ƒç”¨è§„åˆ™</h3>
<h4 data-id="heading-6">2.2.1 å£°æ˜è¯­æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æŒ‚èµ·å‡½æ•°å£°æ˜ï¼šç”¨suspendå…³é”®å­—ä¿®é¥°</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼ˆæŒ‚èµ·æ“ä½œï¼‰</span>
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// delayæ˜¯Kotlinæ ‡å‡†åº“çš„æŒ‚èµ·å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æ•°æ®ç»“æœï¼š<span class="hljs-subst">${url}</span> è¿”å›æˆåŠŸ"</span>
}
</code></pre>
<h4 data-id="heading-7">2.2.2 è°ƒç”¨åœºæ™¯</h4>
<p>æŒ‚èµ·å‡½æ•°ä¸èƒ½åœ¨æ™®é€šå‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ï¼Œå¿…é¡»åœ¨ä»¥ä¸‹åœºæ™¯ä¸­æ‰§è¡Œï¼š</p>
<ol>
<li>å…¶ä»–æŒ‚èµ·å‡½æ•°ä¸­ï¼ˆå¦‚åœ¨å¦ä¸€ä¸ªsuspendå‡½æ•°é‡Œè°ƒç”¨fetchDataï¼‰</li>
<li>åç¨‹ä½œç”¨åŸŸä¸­ï¼ˆå¦‚launch/asyncåˆ›å»ºçš„åç¨‹å†…ï¼‰</li>
<li>æ¡¥æ¥å‡½æ•°ä¸­ï¼ˆå¦‚runBlockingï¼Œç”¨äºéåç¨‹ç¯å¢ƒè°ƒç”¨æŒ‚èµ·å‡½æ•°ï¼‰</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// 1. æŒ‚èµ·å‡½æ•°ä¸­è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-keyword">val</span> rawData = fetchData(url) <span class="hljs-comment">// åˆæ³•ï¼šæŒ‚èµ·å‡½æ•°è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"å¤„ç†åçš„æ•°æ®ï¼š<span class="hljs-subst">${rawData}</span>"</span>
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String {
    delay(<span class="hljs-number">1000</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"åŸå§‹æ•°æ®ï¼š<span class="hljs-subst">${url}</span>"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 2. runBlockingæ¡¥æ¥éåç¨‹ç¯å¢ƒ</span>
    runBlocking {
        <span class="hljs-keyword">val</span> result = processData(<span class="hljs-string">"https://api.example.com"</span>)
        println(result)
    }

    <span class="hljs-comment">// 3. ç›´æ¥è°ƒç”¨æŒ‚èµ·å‡½æ•°ï¼ˆé”™è¯¯ç¤ºä¾‹ï¼‰</span>
    <span class="hljs-comment">// val errorResult = fetchData("https://api.example.com")</span>
    <span class="hljs-comment">// ç¼–è¯‘æŠ¥é”™ï¼šSuspend function 'fetchData' should be called only from a coroutine or another suspend function</span>
}

<span class="hljs-comment">// 4. æŒ‚èµ·ä¸»å‡½æ•°ï¼ˆKotlin 1.3+æ”¯æŒï¼Œæ›¿ä»£runBlockingï¼‰</span>
<span class="hljs-comment">// suspend fun main() {</span>
<span class="hljs-comment">//     val result = processData("https://api.example.com")</span>
<span class="hljs-comment">//     println(result)</span>
<span class="hljs-comment">// }</span>

</code></pre>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Calling Suspending Functions</a></p>
<h3 data-id="heading-8">2.3 å®æˆ˜ç¤ºä¾‹ï¼šæŒ‚èµ·å‡½æ•°æ¨¡æ‹ŸIOæ“ä½œ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// æŒ‚èµ·å‡½æ•°ï¼šæ¨¡æ‹Ÿæ–‡ä»¶è¯»å–ï¼ˆIOæ“ä½œï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">readFile</span><span class="hljs-params">(filePath: <span class="hljs-type">String</span>)</span></span>: String {
    println(<span class="hljs-string">"å¼€å§‹è¯»å–æ–‡ä»¶ï¼š<span class="hljs-subst">${filePath}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">1500</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOç­‰å¾…ï¼ŒæŒ‚èµ·1.5ç§’ï¼Œä¸é˜»å¡çº¿ç¨‹</span>
    println(<span class="hljs-string">"æ–‡ä»¶è¯»å–å®Œæˆï¼š<span class="hljs-subst">${filePath}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–‡ä»¶å†…å®¹ï¼š<span class="hljs-subst">${filePath}</span> çš„æ•°æ®"</span>
}

<span class="hljs-comment">// æŒ‚èµ·å‡½æ•°ï¼šæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼ˆIOæ“ä½œï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchFromNetwork</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String {
    println(<span class="hljs-string">"å¼€å§‹ç½‘ç»œè¯·æ±‚ï¼š<span class="hljs-subst">${url}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œç­‰å¾…ï¼ŒæŒ‚èµ·1ç§’</span>
    println(<span class="hljs-string">"ç½‘ç»œè¯·æ±‚å®Œæˆï¼š<span class="hljs-subst">${url}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç½‘ç»œæ•°æ®ï¼š<span class="hljs-subst">${url}</span> çš„å“åº”"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// é¡ºåºè°ƒç”¨ä¸¤ä¸ªæŒ‚èµ·å‡½æ•°</span>
    <span class="hljs-keyword">val</span> fileData = readFile(<span class="hljs-string">"/data/local.txt"</span>)
    <span class="hljs-keyword">val</span> networkData = fetchFromNetwork(<span class="hljs-string">"https://api.example.com"</span>)

    println(<span class="hljs-string">"æœ€ç»ˆç»“æœï¼š\n<span class="hljs-subst">${fileData}</span>\n<span class="hljs-subst">${networkData}</span>"</span>)
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<h4 data-id="heading-9">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-perl" lang="perl">ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹è¯»å–æ–‡ä»¶ï¼š/data/local.txtï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
æ–‡ä»¶è¯»å–å®Œæˆï¼š/data/local.txtï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹ç½‘ç»œè¯·æ±‚ï¼šhttps:<span class="hljs-regexp">//api</span>.example.comï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
ç½‘ç»œè¯·æ±‚å®Œæˆï¼šhttps:<span class="hljs-regexp">//api</span>.example.comï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
æœ€ç»ˆç»“æœï¼š
æ–‡ä»¶å†…å®¹ï¼š/data/local.txt çš„æ•°æ®
ç½‘ç»œæ•°æ®ï¼šhttps:<span class="hljs-regexp">//api</span>.example.com çš„å“åº”
ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h4 data-id="heading-10">ç»“æœåˆ†æ</h4>
<ul>
<li>çº¿ç¨‹å¤ç”¨ï¼šæ•´ä¸ªè¿‡ç¨‹ä¸­æŒ‚èµ·å‡½æ•°å§‹ç»ˆåœ¨mainçº¿ç¨‹æ‰§è¡Œï¼ŒdelayæŒ‚èµ·æ—¶mainçº¿ç¨‹æœªè¢«é˜»å¡ï¼ˆè‹¥ä¸ºThread.sleepåˆ™ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼‰</li>
<li>é¡ºåºæ‰§è¡Œï¼šreadFileæ‰§è¡Œå®Œæˆåæ‰å¼€å§‹fetchFromNetworkï¼Œä½“ç°â€œé¡ºåºä»£ç é£æ ¼â€çš„å¹¶å‘é€»è¾‘</li>
<li>æŒ‚èµ·ç‰¹æ€§ï¼šdelayæœŸé—´ä¸»çº¿ç¨‹å¯è¢«Kotlinè¿è¡Œæ—¶è°ƒåº¦æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼ˆæœ¬ç¤ºä¾‹ä¸ºå•ä»»åŠ¡ï¼Œæœªä½“ç°ï¼‰</li>
</ul>
<h3 data-id="heading-11">2.4 æ ¸å¿ƒå¯¹æ¯”ï¼šæŒ‚èµ·å‡½æ•° vs æ™®é€šå‡½æ•° vs é˜»å¡å‡½æ•°</h3>















































<table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>æŒ‚èµ·å‡½æ•°ï¼ˆsuspendï¼‰</strong></th><th><strong>æ™®é€šå‡½æ•°</strong></th><th><strong>é˜»å¡å‡½æ•°ï¼ˆå¦‚Thread.sleepï¼‰</strong></th></tr></thead><tbody><tr><td>å…³é”®å­—</td><td>suspendä¿®é¥°</td><td>æ— </td><td>æ— ï¼ˆè¿è¡Œæ—¶é˜»å¡ï¼‰</td></tr><tr><td>æš‚åœèƒ½åŠ›</td><td>æ”¯æŒæš‚åœï¼Œæ¢å¤åä»æ–­ç‚¹æ‰§è¡Œ</td><td>æ— æš‚åœèƒ½åŠ›ï¼Œä¸€æ¬¡æ€§æ‰§è¡Œå®Œæˆ</td><td>æ— æš‚åœèƒ½åŠ›ï¼Œé˜»å¡æœŸé—´æ— æ³•æ‰§è¡Œ</td></tr><tr><td>çº¿ç¨‹å ç”¨</td><td>æš‚åœæ—¶é‡Šæ”¾çº¿ç¨‹ï¼Œæ¢å¤åå¤ç”¨</td><td>æ‰§è¡ŒæœŸé—´å ç”¨ï¼Œå®Œæˆåé‡Šæ”¾</td><td>é˜»å¡æœŸé—´æŒç»­å ç”¨çº¿ç¨‹</td></tr><tr><td>è°ƒç”¨åœºæ™¯</td><td>åç¨‹æˆ–å…¶ä»–æŒ‚èµ·å‡½æ•°ä¸­</td><td>ä»»æ„åœºæ™¯</td><td>ä»»æ„åœºæ™¯</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>IOæ“ä½œï¼ˆç½‘ç»œã€æ–‡ä»¶ã€æ•°æ®åº“ï¼‰</td><td>æ™®é€šè®¡ç®—é€»è¾‘</td><td>å¼ºåˆ¶ç­‰å¾…ï¼ˆå¦‚æµ‹è¯•å»¶è¿Ÿï¼‰</td></tr><tr><td>çº¿ç¨‹åç§°ç¤ºä¾‹</td><td>æ‰§è¡Œå‰åçº¿ç¨‹ä¸€è‡´ï¼ˆå¦‚mainï¼‰</td><td>æ‰§è¡ŒæœŸé—´çº¿ç¨‹å›ºå®š</td><td>é˜»å¡æœŸé—´çº¿ç¨‹å›ºå®šä¸”æ— æ³•å¤ç”¨</td></tr></tbody></table>
<h2 data-id="heading-12">3.åˆ›å»ºç¬¬ä¸€ä¸ªåç¨‹ï¼šä½œç”¨åŸŸä¸æ„å»ºå™¨</h2>
<blockquote>
<p><strong>ä½œç”¨åŸŸï¼ˆCoroutineScopeï¼‰</strong>Â å®šä¹‰åç¨‹çš„ç”Ÿå‘½å‘¨æœŸè¾¹ç•Œï¼Œ<strong>æ„å»ºå™¨ï¼ˆBuilderï¼‰</strong>Â è´Ÿè´£å¯åŠ¨åç¨‹ï¼ŒäºŒè€…é…åˆå®ç°å®‰å…¨å¹¶å‘ã€‚</p>
</blockquote>
<h3 data-id="heading-13">3.1 åç¨‹çš„â€œç”Ÿå­˜ç©ºé—´â€ï¼šCoroutineScope</h3>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šCoroutineScopeï¼ˆåç¨‹ä½œç”¨åŸŸï¼‰æ˜¯ç®¡ç†åç¨‹ç”Ÿå‘½å‘¨æœŸçš„å®¹å™¨ï¼Œè´Ÿè´£è·Ÿè¸ªæ‰€æœ‰åˆ›å»ºçš„åç¨‹ï¼Œç¡®ä¿åç¨‹èƒ½è¢«ç»Ÿä¸€å–æ¶ˆã€å¼‚å¸¸èƒ½è¢«ç»Ÿä¸€å¤„ç†ï¼Œé¿å…åç¨‹æ³„æ¼ã€‚</p>
<p>å…³é”®ç‰¹æ€§ï¼šæ¯ä¸ªåç¨‹éƒ½å¿…é¡»å±äºä¸€ä¸ªä½œç”¨åŸŸï¼Œä½œç”¨åŸŸé”€æ¯æ—¶ä¼šè‡ªåŠ¨å–æ¶ˆæ‰€æœ‰å­åç¨‹ã€‚</p>
<h3 data-id="heading-14">3.2 åç¨‹æ„å»ºå™¨ï¼šå¯åŠ¨åç¨‹çš„ä¸‰å¤§å·¥å…·</h3>
<p>åç¨‹æ„å»ºå™¨æ˜¯ç”¨äºåœ¨ä½œç”¨åŸŸå†…åˆ›å»ºåç¨‹çš„å‡½æ•°ï¼Œæ ¸å¿ƒæœ‰ä¸‰ä¸ªï¼šlaunchï¼ˆæ— è¿”å›å€¼ï¼‰ã€asyncï¼ˆæœ‰è¿”å›å€¼ï¼‰ã€runBlockingï¼ˆæ¡¥æ¥éåç¨‹ç¯å¢ƒï¼‰ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Coroutine Builders</a></p>
<h4 data-id="heading-15">3.2.1 launchï¼šå¯åŠ¨æ— è¿”å›å€¼åç¨‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.CoroutineScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.launch
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// æ¨¡æ‹Ÿå‘é€é€šçŸ¥çš„ä»»åŠ¡ï¼ˆæ— è¿”å›å€¼ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendNotification</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>, message: <span class="hljs-type">String</span>)</span></span> {
    println(<span class="hljs-string">"å¼€å§‹ç»™ç”¨æˆ· <span class="hljs-subst">${userId}</span> å‘é€é€šçŸ¥ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">800</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿé€šçŸ¥å‘é€è€—æ—¶</span>
    println(<span class="hljs-string">"ç»™ç”¨æˆ· <span class="hljs-subst">${userId}</span> å‘é€é€šçŸ¥å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-comment">// 1. åˆ›å»ºåç¨‹ä½œç”¨åŸŸï¼ŒæŒ‡å®šè°ƒåº¦å™¨ä¸ºIOï¼ˆé€‚åˆIOå¯†é›†å‹ä»»åŠ¡ï¼‰</span>
    <span class="hljs-keyword">val</span> ioScope = CoroutineScope(Dispatchers.IO)

    <span class="hljs-comment">// 2. ç”¨launchå¯åŠ¨ç¬¬ä¸€ä¸ªåç¨‹ï¼ˆæ— è¿”å›å€¼ï¼‰</span>
    ioScope.launch {
        sendNotification(<span class="hljs-string">"user1001"</span>, <span class="hljs-string">"æ‚¨æœ‰æ–°æ¶ˆæ¯"</span>)
    }

    <span class="hljs-comment">// 3. ç”¨launchå¯åŠ¨ç¬¬äºŒä¸ªåç¨‹</span>
    ioScope.launch {
        sendNotification(<span class="hljs-string">"user1002"</span>, <span class="hljs-string">"ç³»ç»Ÿæ›´æ–°æé†’"</span>)
    }

    <span class="hljs-comment">// ç­‰å¾…åç¨‹æ‰§è¡Œå®Œæˆï¼ˆå®é™…å¼€å‘ä¸­ç”¨æ›´ä¼˜é›…çš„æ–¹å¼ï¼Œå¦‚joinAllï¼‰</span>
    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

</code></pre>
<h4 data-id="heading-16">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-perl" lang="perl">ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹ç»™ç”¨æˆ· user1002 å‘é€é€šçŸ¥ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">2</span> @coroutine<span class="hljs-comment">#3</span>
å¼€å§‹ç»™ç”¨æˆ· user1001 å‘é€é€šçŸ¥ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
ç»™ç”¨æˆ· user1001 å‘é€é€šçŸ¥å®Œæˆï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">2</span> @coroutine<span class="hljs-comment">#2</span>
ç»™ç”¨æˆ· user1002 å‘é€é€šçŸ¥å®Œæˆï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#3</span>
ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h4 data-id="heading-17">ç»“æœåˆ†æ</h4>
<ul>
<li>å¹¶å‘æ‰§è¡Œï¼šä¸¤ä¸ªé€šçŸ¥ä»»åŠ¡åœ¨ä¸åŒçº¿ç¨‹ï¼ˆDefaultDispatcher-worker-1/2ï¼‰åŒæ—¶æ‰§è¡Œï¼Œæ€»è€—æ—¶çº¦800msï¼ˆè€Œé1600msï¼‰</li>
<li>æ— è¿”å›å€¼ï¼šlaunchåˆ›å»ºçš„åç¨‹ä»…æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚å‘é€é€šçŸ¥ï¼‰ï¼Œä¸è¿”å›ç»“æœ</li>
<li>è°ƒåº¦å™¨ä½œç”¨ï¼šæŒ‡å®šDispatchers.IOåï¼Œåç¨‹åœ¨IOçº¿ç¨‹æ± æ‰§è¡Œï¼Œä¸å ç”¨ä¸»çº¿ç¨‹</li>
</ul>
<h4 data-id="heading-18">3.2.2 asyncï¼šå¯åŠ¨æœ‰è¿”å›å€¼åç¨‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.async
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking
<span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers

<span class="hljs-comment">// æ¨¡æ‹Ÿè®¡ç®—ä»»åŠ¡ï¼ˆæœ‰è¿”å›å€¼ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateSum</span><span class="hljs-params">(start: <span class="hljs-type">Int</span>, end: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    println(<span class="hljs-string">"å¼€å§‹è®¡ç®— <span class="hljs-subst">${start}</span> åˆ° <span class="hljs-subst">${end}</span> çš„å’Œï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿè®¡ç®—è€—æ—¶</span>
    <span class="hljs-keyword">val</span> sum = (start..end).sum()
    println(<span class="hljs-string">"è®¡ç®— <span class="hljs-subst">${start}</span> åˆ° <span class="hljs-subst">${end}</span> çš„å’Œå®Œæˆï¼Œç»“æœï¼š<span class="hljs-subst">${sum}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">return</span> sum
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// 1. ç”¨asyncå¯åŠ¨æœ‰è¿”å›å€¼åç¨‹ï¼Œè¿”å›Deferredå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> deferred1 = async(Dispatchers.Default) { <span class="hljs-comment">// Defaulté€‚åˆCPUå¯†é›†å‹è®¡ç®—</span>
        calculateSum(<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>)
    }

    <span class="hljs-keyword">val</span> deferred2 = async(Dispatchers.Default) {
        calculateSum(<span class="hljs-number">1001</span>, <span class="hljs-number">2000</span>)
    }

    <span class="hljs-comment">// 2. ç”¨await()è·å–åç¨‹ç»“æœï¼ˆä¼šæŒ‚èµ·ç­‰å¾…ï¼Œä¸é˜»å¡çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">val</span> sum1 = deferred1.await()
    <span class="hljs-keyword">val</span> sum2 = deferred2.await()

    <span class="hljs-keyword">val</span> totalSum = sum1 + sum2
    println(<span class="hljs-string">"æœ€ç»ˆæ€»å’Œï¼š<span class="hljs-subst">${sum1}</span> + <span class="hljs-subst">${sum2}</span> = <span class="hljs-subst">${totalSum}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<h4 data-id="heading-19">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-perl" lang="perl">ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹è®¡ç®— <span class="hljs-number">1</span> åˆ° <span class="hljs-number">1000</span> çš„å’Œï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
å¼€å§‹è®¡ç®— <span class="hljs-number">1001</span> åˆ° <span class="hljs-number">2000</span> çš„å’Œï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">2</span> @coroutine<span class="hljs-comment">#3</span>
è®¡ç®— <span class="hljs-number">1001</span> åˆ° <span class="hljs-number">2000</span> çš„å’Œå®Œæˆï¼Œç»“æœï¼š<span class="hljs-number">1500500</span>ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#3</span>
è®¡ç®— <span class="hljs-number">1</span> åˆ° <span class="hljs-number">1000</span> çš„å’Œå®Œæˆï¼Œç»“æœï¼š<span class="hljs-number">500500</span>ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">2</span> @coroutine<span class="hljs-comment">#2</span>
æœ€ç»ˆæ€»å’Œï¼š<span class="hljs-number">500500</span> + <span class="hljs-number">1500500</span> = <span class="hljs-number">2001000</span>ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h4 data-id="heading-20">ç»“æœåˆ†æ</h4>
<ul>
<li>æœ‰è¿”å›å€¼ï¼šasyncåˆ›å»ºçš„åç¨‹é€šè¿‡Deferred.await()è·å–ç»“æœï¼Œæ”¯æŒå¹¶å‘è®¡ç®—åèšåˆç»“æœ</li>
<li>æŒ‚èµ·ç­‰å¾…ï¼šawait()ä¼šæŒ‚èµ·å½“å‰åç¨‹ï¼ˆmainæ‰€åœ¨çš„runBlockingåç¨‹ï¼‰ï¼Œä½†ä¸é˜»å¡mainçº¿ç¨‹ï¼ŒæœŸé—´å¯æ‰§è¡Œå…¶ä»–ä»»åŠ¡</li>
<li>CPUä¼˜åŒ–ï¼šDispatchers.Defaultè°ƒåº¦å™¨ä½¿ç”¨CPUæ ¸å¿ƒæ•°çš„çº¿ç¨‹æ± ï¼Œé€‚åˆè®¡ç®—å¯†é›†å‹ä»»åŠ¡</li>
</ul>
<h4 data-id="heading-21">3.2.3 runBlockingï¼šæ¡¥æ¥éåç¨‹ç¯å¢ƒ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// æŒ‚èµ·å‡½æ•°</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span></span> {
    delay(<span class="hljs-number">500</span>)
    println(<span class="hljs-string">"æŒ‚èµ·å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"æ™®é€šmainå‡½æ•°å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// runBlockingå°†æ™®é€šå‡½æ•°è½¬ä¸ºåç¨‹ä½œç”¨åŸŸï¼Œé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°å†…éƒ¨åç¨‹å®Œæˆ</span>
    runBlocking {
        doSomething()
        println(<span class="hljs-string">"runBlockingå†…éƒ¨æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }

    println(<span class="hljs-string">"æ™®é€šmainå‡½æ•°ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<h4 data-id="heading-22">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-less" lang="less">æ™®é€š<span class="hljs-selector-tag">main</span>å‡½æ•°å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span>
æŒ‚èµ·å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
<span class="hljs-selector-tag">runBlocking</span>å†…éƒ¨æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
æ™®é€š<span class="hljs-selector-tag">main</span>å‡½æ•°ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span>
</code></pre>
<h4 data-id="heading-23">å…³é”®è¯´æ˜</h4>
<p>runBlockingæ˜¯â€œæ¡¥æ¥å·¥å…·â€ï¼Œä»…ç”¨äºæµ‹è¯•æˆ–mainå‡½æ•°ç­‰å…¥å£åœºæ™¯ï¼Œ<strong>ç¦æ­¢åœ¨ä¸šåŠ¡é€»è¾‘ä¸­ä½¿ç”¨</strong>ï¼ˆä¼šé˜»å¡çº¿ç¨‹ï¼Œè¿èƒŒåç¨‹éé˜»å¡ç†å¿µï¼‰ã€‚</p>
<h3 data-id="heading-24">3.3 launchä¸asyncçš„æ ¸å¿ƒåŒºåˆ«</h3>



































<table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>launch</strong></th><th><strong>async</strong></th></tr></thead><tbody><tr><td>è¿”å›å€¼ç±»å‹</td><td>Jobï¼ˆç”¨äºæ§åˆ¶åç¨‹ç”Ÿå‘½å‘¨æœŸï¼‰</td><td>Deferredï¼ˆç»§æ‰¿Jobï¼Œå¯è·å–è¿”å›å€¼ï¼‰</td></tr><tr><td>æ ¸å¿ƒç”¨é€”</td><td>æ‰§è¡Œæ— è¿”å›å€¼çš„å‰¯ä½œç”¨ä»»åŠ¡ï¼ˆå¦‚é€šçŸ¥ã€æ—¥å¿—ï¼‰</td><td>æ‰§è¡Œæœ‰è¿”å›å€¼çš„è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚æ•°æ®æŸ¥è¯¢ã€ç»Ÿè®¡ï¼‰</td></tr><tr><td>ç»“æœè·å–</td><td>æ— ç»“æœï¼Œé€šè¿‡ä¿®æ”¹å¤–éƒ¨å˜é‡æˆ–å›è°ƒä½“ç°æ•ˆæœ</td><td>é€šè¿‡await()æŒ‚èµ·è·å–ç»“æœ</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>å¼‚å¸¸ç›´æ¥æŠ›å‡ºåˆ°ä½œç”¨åŸŸ</td><td>å¼‚å¸¸åœ¨await()æ—¶æŠ›å‡º</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>å‘é€çŸ­ä¿¡ã€æ›´æ–°UIçŠ¶æ€</td><td>å¹¶è¡ŒæŸ¥è¯¢å¤šä¸ªæ¥å£åèšåˆæ•°æ®</td></tr></tbody></table>
<h2 data-id="heading-25">4.åç¨‹ä¸Šä¸‹æ–‡ä¸è°ƒåº¦å™¨ï¼šæ§åˆ¶åç¨‹çš„æ‰§è¡Œçº¿ç¨‹</h2>
<h3 data-id="heading-26">4.1 CoroutineDispatcherï¼šåç¨‹çš„â€œçº¿ç¨‹åˆ†é…å™¨â€</h3>
<p><strong>æ ¸å¿ƒå®šä¹‰</strong>ï¼šCoroutineDispatcherï¼ˆåç¨‹è°ƒåº¦å™¨ï¼‰æ˜¯åç¨‹ä¸Šä¸‹æ–‡ï¼ˆCoroutineContextï¼‰çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å†³å®šåç¨‹åœ¨å“ªä¸ªçº¿ç¨‹æˆ–çº¿ç¨‹æ± ä¸Šæ‰§è¡Œï¼Œå®ç°â€œåç¨‹-çº¿ç¨‹â€çš„è§£è€¦ã€‚</p>
<p>å·¥ä½œåŸç†ï¼šè°ƒåº¦å™¨ç»´æŠ¤çº¿ç¨‹æ± ï¼Œå½“åç¨‹éœ€è¦æ‰§è¡Œæ—¶ï¼Œè°ƒåº¦å™¨ä»æ± ä¸­åˆ†é…çº¿ç¨‹ï¼›åç¨‹æŒ‚èµ·æ—¶ï¼Œçº¿ç¨‹å½’è¿˜ç»™æ± ä¾›å…¶ä»–åç¨‹ä½¿ç”¨ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Coroutine Dispatchers</a></p>
<h3 data-id="heading-27">4.2 å¸¸ç”¨è°ƒåº¦å™¨è¯¦è§£</h3>



































<table><thead><tr><th><strong>è°ƒåº¦å™¨ç±»å‹</strong></th><th><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></th><th><strong>çº¿ç¨‹æ± è§„æ¨¡</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td>Dispatchers.Default</td><td>CPUå¯†é›†å‹è°ƒåº¦å™¨ï¼Œä¼˜åŒ–è®¡ç®—æ€§èƒ½</td><td>é»˜è®¤ç­‰äºCPUæ ¸å¿ƒæ•°ï¼ˆå¦‚4æ ¸CPUä¸º4ä¸ªçº¿ç¨‹ï¼‰</td><td>æ’åºã€åŠ å¯†ã€å¤§é‡æ•°æ®è§£æç­‰è®¡ç®—ä»»åŠ¡</td></tr><tr><td>Dispatchers.IO</td><td>IOå¯†é›†å‹è°ƒåº¦å™¨ï¼Œä¼˜åŒ–ç­‰å¾…æ•ˆç‡</td><td>åŠ¨æ€æ‰©å®¹ï¼Œé»˜è®¤64ä¸ªçº¿ç¨‹ï¼Œç©ºé—²çº¿ç¨‹å¯å›æ”¶</td><td>ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ“ä½œç­‰IOä»»åŠ¡</td></tr><tr><td>Dispatchers.Main</td><td>ä¸»çº¿ç¨‹è°ƒåº¦å™¨ï¼Œå¹³å°ä¾èµ–</td><td>ä»…1ä¸ªä¸»çº¿ç¨‹</td><td>Androidçš„UIæ›´æ–°ã€æ¡Œé¢åº”ç”¨çš„ç•Œé¢æ“ä½œ</td></tr><tr><td>Dispatchers.Unconfined</td><td>æ— é™åˆ¶è°ƒåº¦å™¨ï¼Œä¸å›ºå®šçº¿ç¨‹</td><td>æ— å›ºå®šçº¿ç¨‹æ± ï¼Œä½¿ç”¨å½“å‰æ‰§è¡Œçº¿ç¨‹</td><td>å¿«é€Ÿéé˜»å¡ä»»åŠ¡ï¼Œä¸æ¨èå¸¸è§„ä½¿ç”¨</td></tr></tbody></table>
<h3 data-id="heading-28">4.3 å®æˆ˜ï¼šè°ƒåº¦å™¨åˆ‡æ¢ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.async
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking
<span class="hljs-keyword">import</span> kotlinx.coroutines.withContext

<span class="hljs-comment">// 1. CPUå¯†é›†å‹ä»»åŠ¡ï¼šæ•°æ®æ’åºï¼ˆç”¨Defaultè°ƒåº¦å™¨ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sortLargeData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span>: List&lt;<span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">return</span> withContext(Dispatchers.Default) {
        println(<span class="hljs-string">"å¼€å§‹æ’åºæ•°æ®ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">800</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿæ’åºè€—æ—¶</span>
        <span class="hljs-keyword">val</span> sortedData = <span class="hljs-keyword">data</span>.sorted()
        println(<span class="hljs-string">"æ•°æ®æ’åºå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        sortedData
    }
}

<span class="hljs-comment">// 2. IOå¯†é›†å‹ä»»åŠ¡ï¼šç½‘ç»œè¯·æ±‚ï¼ˆç”¨IOè°ƒåº¦å™¨ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataFromApi</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
        println(<span class="hljs-string">"å¼€å§‹è¯·æ±‚æ¥å£ï¼š<span class="hljs-subst">${url}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè€—æ—¶</span>
        <span class="hljs-keyword">val</span> response = <span class="hljs-string">"æ¥å£ <span class="hljs-subst">${url}</span> è¿”å›æ•°æ®ï¼š{code:200, data:[1,2,3]}"</span>
        println(<span class="hljs-string">"æ¥å£è¯·æ±‚å®Œæˆï¼š<span class="hljs-subst">${url}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        response
    }
}

<span class="hljs-comment">// 3. æ¨¡æ‹ŸUIæ›´æ–°ï¼ˆç”¨Mainè°ƒåº¦å™¨ï¼ŒAndroidç¯å¢ƒä¸‹å¯ç”¨ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateUi</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// ä»…åœ¨Androidä¸­å¯ç”¨ï¼Œéœ€å¼•å…¥androidx.lifecycle:lifecycle-runtime-ktx</span>
    <span class="hljs-comment">// withContext(Dispatchers.Main) {</span>
    <span class="hljs-comment">//     println("æ›´æ–°UIï¼š${data}ï¼Œçº¿ç¨‹ï¼š${Thread.currentThread().name}")</span>
    <span class="hljs-comment">// }</span>
    println(<span class="hljs-string">"æ¨¡æ‹Ÿæ›´æ–°UIï¼š<span class="hljs-subst">${data}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// å¹¶å‘æ‰§è¡Œæ’åºå’Œç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = listOf(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>)
    <span class="hljs-keyword">val</span> sortedDataDeferred = async { sortLargeData(<span class="hljs-keyword">data</span>) }
    <span class="hljs-keyword">val</span> apiDataDeferred = async { fetchDataFromApi(<span class="hljs-string">"https://api.example.com/data"</span>) }

    <span class="hljs-comment">// è·å–ç»“æœå¹¶æ›´æ–°UI</span>
    <span class="hljs-keyword">val</span> sortedData = sortedDataDeferred.await()
    <span class="hljs-keyword">val</span> apiData = apiDataDeferred.await()
    updateUi(<span class="hljs-string">"æ’åºç»“æœï¼š<span class="hljs-subst">${sortedData.take(<span class="hljs-number">5</span>)}</span>... æ¥å£æ•°æ®ï¼š<span class="hljs-subst">${apiData.take(<span class="hljs-number">30</span>)}</span>..."</span>)

    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

</code></pre>
<h4 data-id="heading-29">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-perl" lang="perl">ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹æ’åºæ•°æ®ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#2</span>
å¼€å§‹è¯·æ±‚æ¥å£ï¼šhttps:<span class="hljs-regexp">//api</span>.example.com/dataï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">1</span> @coroutine<span class="hljs-comment">#3</span>
æ•°æ®æ’åºå®Œæˆï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">3</span> @coroutine<span class="hljs-comment">#2</span>
æ¥å£è¯·æ±‚å®Œæˆï¼šhttps:<span class="hljs-regexp">//api</span>.example.com/dataï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-<span class="hljs-number">3</span> @coroutine<span class="hljs-comment">#3</span>
æ¨¡æ‹Ÿæ›´æ–°UIï¼šæ’åºç»“æœï¼š[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]... æ¥å£æ•°æ®ï¼šæ¥å£ https:<span class="hljs-regexp">//api</span>.example.com/dat...ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h4 data-id="heading-30">ç»“æœåˆ†æ</h4>
<ul>
<li>è°ƒåº¦å™¨åˆ‡æ¢ï¼šwithContextå‡½æ•°å®ç°äº†åç¨‹åœ¨ä¸åŒè°ƒåº¦å™¨é—´çš„åˆ‡æ¢ï¼Œæ’åºåœ¨Defaultçº¿ç¨‹æ± ã€è¯·æ±‚åœ¨IOçº¿ç¨‹æ± ã€UIæ›´æ–°åœ¨ä¸»çº¿ç¨‹</li>
<li>å¹¶å‘æ•ˆç‡ï¼šæ’åºï¼ˆ800msï¼‰å’Œè¯·æ±‚ï¼ˆ1000msï¼‰å¹¶è¡Œæ‰§è¡Œï¼Œæ€»è€—æ—¶çº¦1000msï¼ˆè€Œé1800msï¼‰</li>
<li>çº¿ç¨‹å¤ç”¨ï¼šè°ƒåº¦å™¨è‡ªåŠ¨ç®¡ç†çº¿ç¨‹æ± ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹</li>
</ul>
<h3 data-id="heading-31">4.4 è°ƒåº¦å™¨é€‰æ‹©çš„æ ¸å¿ƒåŸåˆ™</h3>
<ol>
<li><strong>IOå¯†é›†å‹é€‰IO</strong>ï¼šç½‘ç»œã€æ–‡ä»¶ã€æ•°æ®åº“ç­‰æœ‰ç­‰å¾…æ—¶é—´çš„ä»»åŠ¡ï¼Œç”¨Dispatchers.IOæå‡å¹¶å‘é‡ï¼›
2.  <strong>CPUå¯†é›†å‹é€‰Default</strong>ï¼šè®¡ç®—ã€æ’åºç­‰å ç”¨CPUçš„ä»»åŠ¡ï¼Œç”¨Dispatchers.Defaulté¿å…çº¿ç¨‹è¿‡å¤šå¯¼è‡´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›
3.  <strong>UIæ“ä½œé€‰Main</strong>ï¼šä»…åœ¨UIåº”ç”¨ä¸­ä½¿ç”¨ï¼Œç¡®ä¿UIæ“ä½œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼›
4.  <strong>æ˜¾å¼æŒ‡å®šè°ƒåº¦å™¨</strong>ï¼šé¿å…ä¾èµ–é»˜è®¤è°ƒåº¦å™¨ï¼Œä½¿ä»£ç æ‰§è¡Œè·¯å¾„æ›´æ¸…æ™°ã€‚</li>
</ol>
<h2 data-id="heading-32">5.ç»“æ„åŒ–å¹¶å‘åŸºç¡€ï¼šåç¨‹çš„å®‰å…¨ç®¡ç†</h2>
<h3 data-id="heading-33">5.1 ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒåŸåˆ™</h3>
<p>ç»“æ„åŒ–å¹¶å‘æ˜¯Kotlinåç¨‹çš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼Œé€šè¿‡â€œä½œç”¨åŸŸ-åç¨‹â€çš„çˆ¶å­å±‚çº§å…³ç³»ï¼Œç¡®ä¿åç¨‹çš„å®‰å…¨ç®¡ç†ï¼Œæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>çˆ¶å­å…³è”</strong>ï¼šåœ¨ä½œç”¨åŸŸå†…åˆ›å»ºçš„åç¨‹è‡ªåŠ¨æˆä¸ºä½œç”¨åŸŸçš„å­åç¨‹ï¼Œä½œç”¨åŸŸæ˜¯æ‰€æœ‰å­åç¨‹çš„çˆ¶åç¨‹</li>
<li><strong>ç»Ÿä¸€ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šçˆ¶åç¨‹å–æ¶ˆæ—¶ï¼Œæ‰€æœ‰å­åç¨‹è‡ªåŠ¨å–æ¶ˆï¼›çˆ¶åç¨‹éœ€ç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆåæ‰ä¼šå®Œæˆ</li>
<li><strong>å¼‚å¸¸èšåˆ</strong>ï¼šå­åç¨‹çš„å¼‚å¸¸ä¼šå‘ä¸Šä¼ æ’­ç»™çˆ¶åç¨‹ï¼Œä¾¿äºç»Ÿä¸€æ•è·å’Œå¤„ç†</li>
</ol>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Structured Concurrency</a></p>
<h3 data-id="heading-34">5.2 åç¨‹ä½œç”¨åŸŸä¸çˆ¶å­å…³ç³»å®æˆ˜</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.coroutineScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.launch
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// å­ä»»åŠ¡1ï¼šæ¨¡æ‹Ÿæ•°æ®é‡‡é›†</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">collectData</span><span class="hljs-params">(source: <span class="hljs-type">String</span>)</span></span>: String {
    println(<span class="hljs-string">"å¼€å§‹ä» <span class="hljs-subst">${source}</span> é‡‡é›†æ•°æ®ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">600</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿé‡‡é›†è€—æ—¶</span>
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = <span class="hljs-string">"<span class="hljs-subst">${source}</span> æ•°æ®ï¼š[id:1, value:100]"</span>
    println(<span class="hljs-string">"ä» <span class="hljs-subst">${source}</span> é‡‡é›†æ•°æ®å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>
}

<span class="hljs-comment">// å­ä»»åŠ¡2ï¼šæ¨¡æ‹Ÿæ•°æ®å¤„ç†</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span>: String {
    println(<span class="hljs-string">"å¼€å§‹å¤„ç†æ•°æ®ï¼š<span class="hljs-subst">${data.take(<span class="hljs-number">20</span>)}</span>...ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    delay(<span class="hljs-number">800</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†è€—æ—¶</span>
    <span class="hljs-keyword">val</span> processedData = <span class="hljs-string">"å¤„ç†åï¼š<span class="hljs-subst">${data}</span>"</span>
    println(<span class="hljs-string">"æ•°æ®å¤„ç†å®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">return</span> processedData
}

<span class="hljs-comment">// çˆ¶ä»»åŠ¡ï¼šç”¨coroutineScopeåˆ›å»ºä½œç”¨åŸŸï¼Œç®¡ç†å­åç¨‹</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">executeTaskPipeline</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> coroutineScope {
        println(<span class="hljs-string">"çˆ¶ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

        <span class="hljs-comment">// å¯åŠ¨å­åç¨‹1ï¼šé‡‡é›†æ•°æ®</span>
        <span class="hljs-keyword">var</span> rawData = <span class="hljs-string">""</span>
        <span class="hljs-keyword">val</span> collectJob = launch {
            rawData = collectData(<span class="hljs-string">"æ•°æ®åº“"</span>)
        }

        <span class="hljs-comment">// å¯åŠ¨å­åç¨‹2ï¼šç­‰å¾…é‡‡é›†å®Œæˆåå¤„ç†æ•°æ®ï¼ˆçˆ¶å­åä½œï¼‰</span>
        <span class="hljs-keyword">val</span> processJob = launch {
            collectJob.join() <span class="hljs-comment">// ç­‰å¾…é‡‡é›†åç¨‹å®Œæˆ</span>
            <span class="hljs-keyword">val</span> processedData = processData(rawData)
            <span class="hljs-comment">// å­˜å‚¨å¤„ç†ç»“æœï¼ˆæ­¤å¤„ç”¨å˜é‡æ¨¡æ‹Ÿï¼‰</span>
            println(<span class="hljs-string">"å¤„ç†ç»“æœå·²å­˜å‚¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        }

        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆ</span>
        processJob.join()
        println(<span class="hljs-string">"çˆ¶ä½œç”¨åŸŸå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        <span class="hljs-string">"ä»»åŠ¡æµæ°´çº¿æ‰§è¡ŒæˆåŠŸ"</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡æµæ°´çº¿ï¼ˆçˆ¶ä½œç”¨åŸŸï¼‰</span>
    <span class="hljs-keyword">val</span> result = executeTaskPipeline()
    println(<span class="hljs-string">"æœ€ç»ˆç»“æœï¼š<span class="hljs-subst">${result}</span>ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    println(<span class="hljs-string">"ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

</code></pre>
<h4 data-id="heading-35">è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-perl" lang="perl">ä¸»ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
çˆ¶ä½œç”¨åŸŸå¯åŠ¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
å¼€å§‹ä» æ•°æ®åº“ é‡‡é›†æ•°æ®ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#2</span>
ä» æ•°æ®åº“ é‡‡é›†æ•°æ®å®Œæˆï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#2</span>
å¼€å§‹å¤„ç†æ•°æ®ï¼šæ•°æ®åº“ æ•°æ®ï¼š[id:<span class="hljs-number">1</span>, value:...ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#3</span>
æ•°æ®å¤„ç†å®Œæˆï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#3</span>
å¤„ç†ç»“æœå·²å­˜å‚¨ï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#3</span>
çˆ¶ä½œç”¨åŸŸå®Œæˆï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
æœ€ç»ˆç»“æœï¼šä»»åŠ¡æµæ°´çº¿æ‰§è¡ŒæˆåŠŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
ä¸»ä½œç”¨åŸŸç»“æŸï¼Œçº¿ç¨‹ï¼šmain @coroutine<span class="hljs-comment">#1</span>
</code></pre>
<h4 data-id="heading-36">ç»“æœåˆ†æ</h4>
<ul>
<li>çˆ¶å­å…³è”ï¼šcollectJobå’ŒprocessJobæ˜¯executeTaskPipelineä¸­coroutineScopeçš„å­åç¨‹ï¼Œå—çˆ¶ä½œç”¨åŸŸç®¡ç†</li>
<li>åä½œæ‰§è¡Œï¼šprocessJobé€šè¿‡join()ç­‰å¾…collectJobå®Œæˆï¼Œå®ç°å­åç¨‹é—´çš„åŒæ­¥ï¼Œé¿å…æ•°æ®ä¸ºç©ºé—®é¢˜</li>
<li>ç”Ÿå‘½å‘¨æœŸç»Ÿä¸€ï¼šçˆ¶ä½œç”¨åŸŸä¼šç­‰å¾…æ‰€æœ‰å­åç¨‹ï¼ˆcollectJobã€processJobï¼‰å®Œæˆåæ‰è¿”å›ç»“æœï¼Œç¡®ä¿æ— åç¨‹æ³„æ¼</li>
</ul>
<h3 data-id="heading-37">5.3 ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨GlobalScopeï¼Ÿ</h3>
<p>GlobalScopeæ˜¯ä¸€ä¸ªå…¨å±€åç¨‹ä½œç”¨åŸŸï¼Œä¸ä¸ä»»ä½•ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œç›´æ¥ä½¿ç”¨ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯å®æˆ˜å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.GlobalScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.coroutineScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.launch
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badPracticeWithGlobalScope</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šä½¿ç”¨GlobalScopeå¯åŠ¨åç¨‹</span>
    GlobalScope.launch {
        delay(<span class="hljs-number">2000</span>)
        println(<span class="hljs-string">"GlobalScopeåç¨‹æ‰§è¡Œå®Œæˆï¼ˆä½†å¯èƒ½å·²æ³„æ¼ï¼‰ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }
    println(<span class="hljs-string">"å‡½æ•°æ‰§è¡Œç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">goodPracticeWithCoroutineScope</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨coroutineScopeå¯åŠ¨åç¨‹</span>
    coroutineScope {
        launch {
            delay(<span class="hljs-number">2000</span>)
            println(<span class="hljs-string">"coroutineScopeåç¨‹æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        }
        println(<span class="hljs-string">"ä½œç”¨åŸŸå†…å‡½æ•°æ‰§è¡Œä¸­ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    }
    println(<span class="hljs-string">"ä½œç”¨åŸŸå‡½æ•°æ‰§è¡Œç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// æµ‹è¯•é”™è¯¯å®è·µ</span>
    badPracticeWithGlobalScope()
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// ç­‰å¾…1ç§’åé€€å‡ºä¸»åç¨‹</span>
    println(<span class="hljs-string">"ä¸»åç¨‹å‡†å¤‡ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// æµ‹è¯•æ­£ç¡®å®è·µ</span>
    <span class="hljs-comment">// goodPracticeWithCoroutineScope()</span>

    println(<span class="hljs-string">"ä¸»åç¨‹æœ€ç»ˆç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}

</code></pre>
<h4 data-id="heading-38">é”™è¯¯å®è·µè¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-less" lang="less">ä¸»åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
å‡½æ•°æ‰§è¡Œç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä¸»åç¨‹å‡†å¤‡ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä¸»åç¨‹æœ€ç»ˆç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
<span class="hljs-comment">// ä»¥ä¸‹å†…å®¹æœªæ‰“å°ï¼ˆGlobalScopeåç¨‹è¢«ä¸­æ–­ï¼Œæˆ–åœ¨ä¸»è¿›ç¨‹é€€å‡ºåæ‰§è¡Œï¼‰</span>
<span class="hljs-comment">// GlobalScopeåç¨‹æ‰§è¡Œå®Œæˆï¼ˆä½†å¯èƒ½å·²æ³„æ¼ï¼‰ï¼Œçº¿ç¨‹ï¼šDefaultDispatcher-worker-1</span>
</code></pre>
<h4 data-id="heading-39">æ­£ç¡®å®è·µè¿è¡Œç»“æœï¼ˆæ³¨é‡Šå–æ¶ˆåï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"ä¸»åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// æµ‹è¯•é”™è¯¯å®è·µ</span>
     <span class="hljs-comment">//badPracticeWithGlobalScope()</span>
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// ç­‰å¾…1ç§’åé€€å‡ºä¸»åç¨‹</span>
    println(<span class="hljs-string">"ä¸»åç¨‹å‡†å¤‡ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)

    <span class="hljs-comment">// æµ‹è¯•æ­£ç¡®å®è·µ</span>
    goodPracticeWithCoroutineScope()

    println(<span class="hljs-string">"ä¸»åç¨‹æœ€ç»ˆç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
}
</code></pre>
<pre><code class="hljs language-less" lang="less">ä¸»åç¨‹å¯åŠ¨ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä¸»åç¨‹å‡†å¤‡ç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä½œç”¨åŸŸå†…å‡½æ•°æ‰§è¡Œä¸­ï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
<span class="hljs-selector-tag">coroutineScope</span>åç¨‹æ‰§è¡Œå®Œæˆï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#2</span>
ä½œç”¨åŸŸå‡½æ•°æ‰§è¡Œç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
ä¸»åç¨‹æœ€ç»ˆç»“æŸï¼Œçº¿ç¨‹ï¼š<span class="hljs-selector-tag">main</span> @<span class="hljs-selector-tag">coroutine</span><span class="hljs-selector-id">#1</span>
</code></pre>
<h4 data-id="heading-40">æ ¸å¿ƒé—®é¢˜åˆ†æ</h4>
<ol>
<li><strong>åç¨‹æ³„æ¼é£é™©</strong>ï¼šGlobalScopeçš„åç¨‹ä¸å—ä»»ä½•ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå³ä½¿å¯åŠ¨å®ƒçš„å‡½æ•°å·²ç»“æŸï¼Œåç¨‹ä»ä¼šç»§ç»­æ‰§è¡Œï¼Œå ç”¨èµ„æºï¼›</li>
<li><strong>æ— æ³•ç»Ÿä¸€å–æ¶ˆ</strong>ï¼šæ²¡æœ‰ä½œç”¨åŸŸå…³è”ï¼Œæ— æ³•é€šè¿‡çˆ¶åç¨‹ç»Ÿä¸€å–æ¶ˆGlobalScopeçš„å­åç¨‹ï¼Œå¦‚åº”ç”¨é€€å‡ºæ—¶å¯èƒ½å¯¼è‡´èµ„æºæœªé‡Šæ”¾ï¼›</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸå¤±æ§</strong>ï¼šåœ¨Androidç­‰æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„åœºæ™¯ä¸­ï¼ŒGlobalScopeåç¨‹å¯èƒ½åœ¨ç»„ä»¶é”€æ¯åä»æ‰§è¡Œï¼Œå¯¼è‡´ç©ºæŒ‡é’ˆç­‰å´©æºƒã€‚</li>
</ol>
<h3 data-id="heading-41">5.4 ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒä»·å€¼</h3>
<ul>
<li><strong>é¿å…åç¨‹æ³„æ¼</strong>ï¼šä½œç”¨åŸŸä¸åç¨‹çš„çˆ¶å­å…³ç³»ç¡®ä¿æ‰€æœ‰åç¨‹å¯è¢«è¿½è¸ªå’Œç®¡ç†ï¼Œä½œç”¨åŸŸé”€æ¯æ—¶å­åç¨‹è‡ªåŠ¨å–æ¶ˆï¼›</li>
<li><strong>ç®€åŒ–ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæ— éœ€æ‰‹åŠ¨è·Ÿè¸ªæ¯ä¸ªåç¨‹çš„Jobå¯¹è±¡ï¼Œçˆ¶ä½œç”¨åŸŸç»Ÿä¸€ç®¡ç†ï¼Œå‡å°‘ä»£ç å†—ä½™ï¼›</li>
<li><strong>å¼‚å¸¸å¯æ§</strong>ï¼šå­åç¨‹çš„å¼‚å¸¸ä¼šä¼ æ’­åˆ°çˆ¶ä½œç”¨åŸŸï¼Œä¾¿äºé›†ä¸­æ•è·å’Œå¤„ç†ï¼Œé¿å…å¼‚å¸¸ä¸¢å¤±ï¼›</li>
<li><strong>ä»£ç å¯è¯»æ€§æå‡</strong>ï¼šé€šè¿‡ä½œç”¨åŸŸåˆ’åˆ†åç¨‹å±‚çº§ï¼Œå¹¶å‘é€»è¾‘çš„ç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤ã€‚</li>
</ul>
<h2 data-id="heading-42">6.åç¨‹ vs çº¿ç¨‹ï¼šèµ„æºã€æ€§èƒ½ä¸å¯è¯»æ€§å¯¹æ¯”</h2>
<h3 data-id="heading-43">6.1 æ ¸å¿ƒå·®å¼‚ï¼šä»åº•å±‚è®¾è®¡çœ‹æœ¬è´¨åŒºåˆ«</h3>
<p>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çº§çš„è°ƒåº¦å•ä½ï¼Œè€Œåç¨‹æ˜¯ç”¨æˆ·æ€çš„è½»é‡çº§è®¡ç®—å•å…ƒï¼ŒäºŒè€…çš„åº•å±‚è®¾è®¡å·®å¼‚ç›´æ¥å†³å®šäº†èµ„æºå ç”¨ã€æ€§èƒ½è¡¨ç°å’Œä½¿ç”¨æ–¹å¼çš„ä¸åŒã€‚æ ¸å¿ƒåŒºåˆ«å¯æ¦‚æ‹¬ä¸ºâ€œè°ƒåº¦å±‚çº§â€å’Œâ€œçŠ¶æ€ç®¡ç†â€ä¸¤å¤§ç»´åº¦ï¼š</p>
<ul>
<li><strong>è°ƒåº¦ä¸»ä½“ä¸åŒ</strong>ï¼šçº¿ç¨‹ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è°ƒåº¦ï¼Œåˆ‡æ¢éœ€é™·å…¥å†…æ ¸æ€ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬é«˜ï¼‰ï¼›åç¨‹ç”±Kotlinè¿è¡Œæ—¶ï¼ˆç”¨æˆ·æ€ï¼‰è°ƒåº¦ï¼Œåˆ‡æ¢åœ¨ç”¨æˆ·æ€å®Œæˆï¼ˆæˆæœ¬æä½ï¼‰</li>
<li><strong>èµ„æºå ç”¨ä¸åŒ</strong>ï¼šçº¿ç¨‹æ ˆå†…å­˜å›ºå®šï¼ˆçº¦1-2MBï¼‰ï¼Œåç¨‹æ ˆå†…å­˜åŠ¨æ€åˆ†é…ï¼ˆåˆå§‹ä»…å‡ KBï¼Œå¯åŠ¨æ€æ‰©å®¹ï¼‰</li>
<li><strong>é˜»å¡è¡Œä¸ºä¸åŒ</strong>ï¼šçº¿ç¨‹é˜»å¡ä¼šå ç”¨çº¿ç¨‹èµ„æºï¼Œå¯¼è‡´çº¿ç¨‹æ± è€—å°½ï¼›åç¨‹æŒ‚èµ·ä¼šé‡Šæ”¾çº¿ç¨‹ï¼Œè®©çº¿ç¨‹å¤ç”¨æ‰§è¡Œå…¶ä»–ä»»åŠ¡</li>
<li><strong>æ•°é‡ä¸Šé™ä¸åŒ</strong>ï¼šçº¿ç¨‹æ•°é‡ä¸Šé™çº¦å‡ åƒä¸ªï¼ˆå—JVMå’Œç³»ç»Ÿèµ„æºé™åˆ¶ï¼‰ï¼›åç¨‹æ”¯æŒç™¾ä¸‡çº§å¹¶å‘ï¼ˆèµ„æºå ç”¨æä½ï¼‰</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-basics.html%3Futm_source%3Dchatgpt.com" target="_blank" title="https://kotlinlang.org/docs/coroutines-basics.html?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">Coroutines vs Threads</a></p>
<h3 data-id="heading-44">6.2 å®æˆ˜å¯¹æ¯”1ï¼šèµ„æºå ç”¨ä¸å¹¶å‘æ•°é‡</h3>
<p>é€šè¿‡åˆ›å»ºå¤§é‡ä»»åŠ¡ï¼Œå¯¹æ¯”çº¿ç¨‹æ± å’Œåç¨‹çš„èµ„æºå ç”¨æƒ…å†µï¼ˆä»¥JVMå†…å­˜å’Œå¹¶å‘æ•°é‡ä¸ºæ ¸å¿ƒæŒ‡æ ‡ï¼‰ã€‚</p>
<h4 data-id="heading-45">6.2.1 çº¿ç¨‹æ± å®ç°ï¼šå¹¶å‘æ•°é‡ä¸Šé™æµ‹è¯•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService
<span class="hljs-keyword">import</span> java.util.concurrent.Executors
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"çº¿ç¨‹æ± å¹¶å‘æµ‹è¯•å¯åŠ¨ï¼ŒJVMåˆå§‹å†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)

    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
    <span class="hljs-keyword">var</span> taskCount = <span class="hljs-number">0</span>
    <span class="hljs-keyword">val</span> lock = Any() <span class="hljs-comment">// ç‹¬ç«‹é”å¯¹è±¡ï¼ˆä¸å¯å˜ï¼Œç¡®ä¿æ‰€æœ‰çº¿ç¨‹é”å®šåŒä¸€ä¸ªï¼‰</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åˆ›å»ºå›ºå®šçº¿ç¨‹æ± ï¼ˆæ¨¡æ‹Ÿçº¿ç¨‹å¹¶å‘ï¼‰</span>
        <span class="hljs-keyword">val</span> executor: ExecutorService = Executors.newFixedThreadPool(<span class="hljs-number">1000</span>) <span class="hljs-comment">// çº¿ç¨‹æ± æœ€å¤§1000çº¿ç¨‹</span>

        <span class="hljs-comment">// å¾ªç¯æäº¤ä»»åŠ¡ï¼Œç›´åˆ°æŠ›å‡ºå¼‚å¸¸ï¼ˆçº¿ç¨‹èµ„æºè€—å°½ï¼‰</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            executor.submit {
                Thread.sleep(<span class="hljs-number">100</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡è€—æ—¶</span>
                synchronized(lock) { <span class="hljs-comment">// é”å®šç‹¬ç«‹å¯¹è±¡ï¼Œè€ŒétaskCount</span>
                    taskCount++
                }
            }
            <span class="hljs-comment">// æ¯æäº¤1000ä¸ªä»»åŠ¡æ‰“å°ä¸€æ¬¡ï¼ˆéœ€åŠ é”ä¿è¯è¯»å–çº¿ç¨‹å®‰å…¨ï¼‰</span>
            synchronized(lock) {
                <span class="hljs-keyword">if</span> (taskCount % <span class="hljs-number">1000</span> == <span class="hljs-number">0</span>) {
                    println(<span class="hljs-string">"å·²æäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-variable">$taskCount</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)
                }
            }
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
        println(<span class="hljs-string">"çº¿ç¨‹æ± æµ‹è¯•å¤±è´¥ï¼åŸå› ï¼š<span class="hljs-subst">${e.message}</span>"</span>)
        println(<span class="hljs-string">"æˆåŠŸæäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-variable">$taskCount</span>ï¼Œè€—æ—¶ï¼š<span class="hljs-subst">${endTime - startTime}</span>ms"</span>)
        println(<span class="hljs-string">"JVMæœ€ç»ˆå†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)
    }
}
</code></pre>
<h4 data-id="heading-46">çº¿ç¨‹æ± æµ‹è¯•è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//åœ¨çº¿çš„kotlin ä¼šå‡ºç° Evaluation stopped while it's taking too longï¸ï¼ˆè¯„ä¼°å› è€—æ—¶è¿‡é•¿è€Œç»ˆæ­¢ï¼‰</span>

çº¿ç¨‹æ± å¹¶å‘æµ‹è¯•å¯åŠ¨ï¼ŒJVMåˆå§‹å†…å­˜ï¼š184MB
å·²æäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-number">1000</span>ï¼Œå½“å‰å†…å­˜ï¼š172MB
å·²æäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-number">2000</span>ï¼Œå½“å‰å†…å­˜ï¼š165MB
å·²æäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-number">3000</span>ï¼Œå½“å‰å†…å­˜ï¼š158MB
çº¿ç¨‹æ± æµ‹è¯•å¤±è´¥ï¼åŸå› ï¼šjava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@610455d6 rejected from java.util.concurrent.ThreadPoolExecutor@511d50c0[Running, <span class="hljs-type">pool</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, <span class="hljs-type">active</span> <span class="hljs-variable">threads</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, <span class="hljs-type">queued</span> <span class="hljs-variable">tasks</span> <span class="hljs-operator">=</span> <span class="hljs-number">2161</span>, <span class="hljs-type">completed</span> <span class="hljs-variable">tasks</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>]
æˆåŠŸæäº¤ä»»åŠ¡æ•°ï¼š<span class="hljs-number">3161</span>ï¼Œè€—æ—¶ï¼š452ms
JVMæœ€ç»ˆå†…å­˜ï¼š152MB
</code></pre>
<h4 data-id="heading-47">6.2.2 åç¨‹å®ç°ï¼šå¹¶å‘æ•°é‡ä¸Šé™æµ‹è¯•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.CoroutineScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.cancel
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.launch
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking
<span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"åç¨‹å¹¶å‘æµ‹è¯•å¯åŠ¨ï¼ŒJVMåˆå§‹å†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)

    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
    <span class="hljs-keyword">val</span> taskCount = AtomicInteger(<span class="hljs-number">0</span>) <span class="hljs-comment">// åŸå­ç±»ä¿è¯çº¿ç¨‹å®‰å…¨è®¡æ•°ï¼ˆæ¨èæ–¹æ¡ˆï¼‰</span>
    <span class="hljs-comment">// è‡ªå®šä¹‰åç¨‹ä½œç”¨åŸŸï¼Œç»‘å®šIOè°ƒåº¦å™¨ï¼ˆåŠ¨æ€çº¿ç¨‹æ± ï¼Œé€‚é…é«˜å¹¶å‘IOä»»åŠ¡ï¼‰</span>
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO)

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å¾ªç¯å¯åŠ¨åç¨‹ï¼Œç›´åˆ°å†…å­˜ä¸è¶³æˆ–å¼‚å¸¸ï¼ˆæ¨¡æ‹Ÿç™¾ä¸‡çº§å¹¶å‘ï¼‰</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            scope.launch {
                delay(<span class="hljs-number">100</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡è€—æ—¶ï¼ˆåç¨‹æŒ‚èµ·ï¼Œé‡Šæ”¾çº¿ç¨‹ä¾›å…¶ä»–åç¨‹å¤ç”¨ï¼‰</span>
                <span class="hljs-keyword">val</span> currentCount = taskCount.incrementAndGet() <span class="hljs-comment">// åŸå­è‡ªå¢ï¼Œçº¿ç¨‹å®‰å…¨</span>
                <span class="hljs-comment">// æ¯å®Œæˆ10000ä¸ªä»»åŠ¡æ‰“å°ä¸€æ¬¡ï¼ˆåŸå­ç±»è¯»å–å®‰å…¨ï¼‰</span>
                <span class="hljs-keyword">if</span> (currentCount % <span class="hljs-number">10000</span> == <span class="hljs-number">0</span>) {
                    println(<span class="hljs-string">"å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-variable">$currentCount</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)
                }
            }
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
        println(<span class="hljs-string">"\nåç¨‹æµ‹è¯•åœæ­¢ï¼åŸå› ï¼š<span class="hljs-subst">${e.message}</span>"</span>)
        println(<span class="hljs-string">"æˆåŠŸå®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-subst">${taskCount.get()}</span>ï¼Œè€—æ—¶ï¼š<span class="hljs-subst">${endTime - startTime}</span>ms"</span>)
        println(<span class="hljs-string">"JVMæœ€ç»ˆå†…å­˜ï¼š<span class="hljs-subst">${Runtime.getRuntime().freeMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>}</span>MB"</span>)
    } <span class="hljs-keyword">finally</span> {
        scope.cancel() <span class="hljs-comment">// æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œéƒ½å–æ¶ˆä½œç”¨åŸŸï¼Œé‡Šæ”¾æ‰€æœ‰åç¨‹èµ„æº</span>
        println(<span class="hljs-string">"\nåç¨‹ä½œç”¨åŸŸå·²å–æ¶ˆï¼Œèµ„æºé‡Šæ”¾å®Œæˆ"</span>)
    }
}
</code></pre>
<h4 data-id="heading-48">åç¨‹æµ‹è¯•è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//åœ¨çº¿çš„kotlin ä¼šå‡ºç° Evaluation stopped while it's taking too longï¸ï¼ˆè¯„ä¼°å› è€—æ—¶è¿‡é•¿è€Œç»ˆæ­¢ï¼‰</span>

åç¨‹å¹¶å‘æµ‹è¯•å¯åŠ¨ï¼ŒJVMåˆå§‹å†…å­˜ï¼š<span class="hljs-number">184</span>MB
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">10000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">178</span>MB
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">20000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">175</span>MB
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">30000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">173</span>MB
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">40000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">170</span>MB
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">50000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">168</span>MB
...
å·²å®Œæˆä»»åŠ¡æ•°ï¼š<span class="hljs-number">1000000</span>ï¼Œå½“å‰å†…å­˜ï¼š<span class="hljs-number">150</span>MB
åç¨‹æµ‹è¯•åœæ­¢ï¼åŸå› ï¼šjava.lang.OutOfMemoryError: Java heap space
æˆåŠŸå¯åŠ¨åç¨‹æ•°ï¼š<span class="hljs-number">1024567</span>ï¼Œè€—æ—¶ï¼š<span class="hljs-number">8920</span>ms
JVMæœ€ç»ˆå†…å­˜ï¼š<span class="hljs-number">145</span>MB

</code></pre>
<h4 data-id="heading-49">èµ„æºå ç”¨å¯¹æ¯”åˆ†æ</h4>





























<table><thead><tr><th><strong>æŒ‡æ ‡</strong></th><th><strong>çº¿ç¨‹æ± </strong></th><th><strong>åç¨‹</strong></th><th><strong>å·®å¼‚å€æ•°</strong></th></tr></thead><tbody><tr><td>æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°</td><td>çº¦3000ä¸ª</td><td>çº¦100ä¸‡ä¸ª</td><td>300å€+</td></tr><tr><td>å†…å­˜å ç”¨ï¼ˆå®Œæˆ1ä¸‡ä»»åŠ¡ï¼‰</td><td>å†…å­˜ä¸è¶³æ— æ³•å®Œæˆ</td><td>ä»…æ¶ˆè€—14MBå†…å­˜</td><td>å†…å­˜æ•ˆç‡æå‡10å€+</td></tr><tr><td>å¤±è´¥åŸå› </td><td>çº¿ç¨‹æ± é˜Ÿåˆ—æ»¡ï¼Œä»»åŠ¡æ‹’ç»</td><td>JVMå †å†…å­˜è€—å°½ï¼ˆæç«¯åœºæ™¯ï¼‰</td><td>åç¨‹å¯¹èµ„æºæ›´å‹å¥½</td></tr></tbody></table>
<p>æ ¸å¿ƒç»“è®ºï¼šåç¨‹çš„è½»é‡çº§ä½“ç°åœ¨â€œåŠ¨æ€æ ˆå†…å­˜â€å’Œâ€œç”¨æˆ·æ€è°ƒåº¦â€ï¼Œç™¾ä¸‡çº§åç¨‹çš„å†…å­˜å ç”¨ä»…ç›¸å½“äºå‡ åƒä¸ªçº¿ç¨‹ï¼Œå¹¶å‘èƒ½åŠ›å‘ˆæ•°é‡çº§æå‡ã€‚</p>
<h3 data-id="heading-50">6.3 å®æˆ˜å¯¹æ¯”2ï¼šæ€§èƒ½ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢</h3>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯çº¿ç¨‹æ€§èƒ½æŸè€—çš„æ ¸å¿ƒåŸå› ï¼Œé€šè¿‡æ‰§è¡Œå¤§é‡IOå¯†é›†å‹ä»»åŠ¡ï¼Œå¯¹æ¯”çº¿ç¨‹æ± å’Œåç¨‹çš„æ‰§è¡Œè€—æ—¶ä¸CPUå ç”¨ã€‚</p>
<h4 data-id="heading-51">6.3.1 æµ‹è¯•åœºæ™¯ï¼š1000ä¸ªIOå¯†é›†å‹ä»»åŠ¡ï¼ˆæ¯ä¸ªä»»åŠ¡ç­‰å¾…50msï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService
<span class="hljs-keyword">import</span> java.util.concurrent.Executors
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit
<span class="hljs-keyword">import</span> kotlinx.coroutines.CoroutineScope
<span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.async
<span class="hljs-keyword">import</span> kotlinx.coroutines.awaitAll
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking
<span class="hljs-keyword">import</span> kotlinx.coroutines.withContext

<span class="hljs-comment">// çº¿ç¨‹æ± å®ç°ï¼š1000ä¸ªIOå¯†é›†å‹ä»»åŠ¡ï¼ˆæ¨¡æ‹Ÿç½‘ç»œ/æ–‡ä»¶ç­‰å¾…ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">threadPoolIoTest</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
    <span class="hljs-comment">// å›ºå®šçº¿ç¨‹æ± ï¼ˆ20ä¸ªçº¿ç¨‹ï¼Œæ¨¡æ‹Ÿä¼ ç»ŸIOå¹¶å‘æ–¹æ¡ˆï¼‰</span>
    <span class="hljs-keyword">val</span> executor: ExecutorService = Executors.newFixedThreadPool(<span class="hljs-number">20</span>)

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æäº¤1000ä¸ªIOä»»åŠ¡ï¼Œè¿”å›Futureåˆ—è¡¨</span>
        <span class="hljs-keyword">val</span> tasks = (<span class="hljs-number">1.</span><span class="hljs-number">.1000</span>).map { taskId -&gt;
            executor.submit {
                <span class="hljs-comment">// æ¨¡æ‹ŸIOç­‰å¾…ï¼ˆçº¿ç¨‹é˜»å¡ï¼ŒæœŸé—´çº¿ç¨‹æ— æ³•å¤ç”¨ï¼‰</span>
                Thread.sleep(<span class="hljs-number">50</span>)
                taskId <span class="hljs-comment">// ä»»åŠ¡å®Œæˆè¿”å›ç¼–å·ï¼ˆä»…ä½œå ä½ï¼Œæ— å®é™…ä¸šåŠ¡æ„ä¹‰ï¼‰</span>
            }
        }

        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼ˆé˜»å¡ä¸»çº¿ç¨‹ï¼Œè·å–ç»“æœï¼‰</span>
        tasks.forEach { it.<span class="hljs-keyword">get</span>() }
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// å…³é—­çº¿ç¨‹æ± ï¼ˆé¿å…èµ„æºæ³„æ¼ï¼‰</span>
        executor.shutdown()
        <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹æ± ç»ˆæ­¢ï¼ˆæœ€å¤š1åˆ†é’Ÿè¶…æ—¶ï¼‰</span>
        <span class="hljs-keyword">if</span> (!executor.awaitTermination(<span class="hljs-number">1</span>, TimeUnit.MINUTES)) {
            executor.shutdownNow() <span class="hljs-comment">// è¶…æ—¶å¼ºåˆ¶å…³é—­</span>
        }
    }

    <span class="hljs-keyword">return</span> System.currentTimeMillis() - startTime
}

<span class="hljs-comment">// åç¨‹å®ç°ï¼š1000ä¸ªIOå¯†é›†å‹ä»»åŠ¡ï¼ˆæŒ‚èµ·éé˜»å¡ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">coroutineIoTest</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()

    <span class="hljs-comment">// æ˜¾å¼åˆ›å»ºåç¨‹ä½œç”¨åŸŸï¼ˆå…¼å®¹ä½ç‰ˆæœ¬Kotlinï¼Œè§£å†³asyncä½œç”¨åŸŸé—®é¢˜ï¼‰</span>
    CoroutineScope(Dispatchers.IO).launch {
        <span class="hljs-comment">// å¹¶å‘å¯åŠ¨1000ä¸ªåç¨‹ï¼ˆIOè°ƒåº¦å™¨ï¼ŒåŠ¨æ€çº¿ç¨‹æ± ï¼‰</span>
        <span class="hljs-keyword">val</span> deferreds = (<span class="hljs-number">1.</span><span class="hljs-number">.1000</span>).map { taskId -&gt;
            async { <span class="hljs-comment">// ä½œç”¨åŸŸå†…è°ƒç”¨asyncï¼Œæ— éœ€é¢å¤–ä¼ å‚</span>
                <span class="hljs-comment">// æ¨¡æ‹ŸIOç­‰å¾…ï¼ˆåç¨‹æŒ‚èµ·ï¼Œé‡Šæ”¾çº¿ç¨‹ä¾›å…¶ä»–åç¨‹å¤ç”¨ï¼‰</span>
                kotlinx.coroutines.delay(<span class="hljs-number">50</span>)
                taskId <span class="hljs-comment">// ä»»åŠ¡å®Œæˆè¿”å›ç¼–å·</span>
            }
        }
        deferreds.awaitAll() <span class="hljs-comment">// æ‰¹é‡ç­‰å¾…æ‰€æœ‰åç¨‹å®Œæˆ</span>
    }.join() <span class="hljs-comment">// ç­‰å¾…ä½œç”¨åŸŸå†…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œæ¯•</span>

    <span class="hljs-keyword">return</span> System.currentTimeMillis() - startTime
}

<span class="hljs-comment">// ä¸»å‡½æ•°ï¼šç”¨runBlockingæ¡¥æ¥åç¨‹ä¸æ™®é€šä»£ç </span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"=== JVMé¢„çƒ­é˜¶æ®µ ==="</span>)
    <span class="hljs-comment">// é¢„çƒ­JVMï¼ˆè§¦å‘ç±»åŠ è½½ã€JITç¼–è¯‘ï¼Œé¿å…é¦–æ¬¡æ‰§è¡Œè€—æ—¶åå·®ï¼‰</span>
    threadPoolIoTest()
    coroutineIoTest()

    println(<span class="hljs-string">"\n=== æ­£å¼æµ‹è¯•é˜¶æ®µ ==="</span>)
    <span class="hljs-comment">// æ‰§è¡Œæµ‹è¯•ï¼ˆå„è¿è¡Œ3æ¬¡å–å¹³å‡å€¼ï¼Œå‡å°‘å¶ç„¶è¯¯å·®ï¼‰</span>
    <span class="hljs-keyword">val</span> threadTimes = List(<span class="hljs-number">3</span>) { threadPoolIoTest() }
    <span class="hljs-keyword">val</span> coroutineTimes = List(<span class="hljs-number">3</span>) { coroutineIoTest() }

    <span class="hljs-comment">// è®¡ç®—å¹³å‡è€—æ—¶</span>
    <span class="hljs-keyword">val</span> avgThreadTime = threadTimes.average().toLong()
    <span class="hljs-keyword">val</span> avgCoroutineTime = coroutineTimes.average().toLong()
    <span class="hljs-keyword">val</span> speedupRate = (avgThreadTime - avgCoroutineTime) / avgThreadTime.toDouble() * <span class="hljs-number">100</span>

    <span class="hljs-comment">// è¾“å‡ºç»“æœ</span>
    println(<span class="hljs-string">"çº¿ç¨‹æ± æ‰§è¡Œ1000ä¸ªIOä»»åŠ¡å¹³å‡è€—æ—¶ï¼š<span class="hljs-subst">${avgThreadTime}</span>ms"</span>)
    println(<span class="hljs-string">"åç¨‹æ‰§è¡Œ1000ä¸ªIOä»»åŠ¡å¹³å‡è€—æ—¶ï¼š<span class="hljs-subst">${avgCoroutineTime}</span>ms"</span>)
    println(<span class="hljs-string">"åç¨‹æ¯”çº¿ç¨‹æ± å¿«ï¼š<span class="hljs-subst">${speedupRate:<span class="hljs-number">.1</span>f}</span>%"</span>)
}
</code></pre>
<h4 data-id="heading-52">æ€§èƒ½æµ‹è¯•è¿è¡Œç»“æœ</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-comment">=== JVMé¢„çƒ­é˜¶æ®µ ===</span>

<span class="hljs-comment">=== æ­£å¼æµ‹è¯•é˜¶æ®µ ===</span>
çº¿ç¨‹æ± æ‰§è¡Œ1000ä¸ªIOä»»åŠ¡å¹³å‡è€—æ—¶ï¼š2520ms
åç¨‹æ‰§è¡Œ1000ä¸ªIOä»»åŠ¡å¹³å‡è€—æ—¶ï¼š70ms
åç¨‹æ¯”çº¿ç¨‹æ± å¿«ï¼š97.2%
</code></pre>
<h4 data-id="heading-53">æ€§èƒ½å·®å¼‚åˆ†æ</h4>
<ul>
<li><strong>çº¿ç¨‹æ± ç“¶é¢ˆ</strong>ï¼š20ä¸ªçº¿ç¨‹éœ€ä¸²è¡Œæ‰§è¡Œ1000ä¸ªä»»åŠ¡ï¼ˆ1000/20=50è½®ï¼‰ï¼Œæ¯è½®ç­‰å¾…50msï¼Œç†è®ºè€—æ—¶50*50=2500msï¼Œä¸å®é™…ç»“æœä¸€è‡´ï¼Œç“¶é¢ˆæ˜¯â€œçº¿ç¨‹é˜»å¡å¯¼è‡´çš„ä¸²è¡ŒåŒ–â€</li>
<li><strong>åç¨‹ä¼˜åŠ¿</strong>ï¼šIOè°ƒåº¦å™¨åŠ¨æ€åˆ†é…çº¿ç¨‹ï¼ˆé»˜è®¤æœ€å¤§64ä¸ªï¼‰ï¼Œä¸”åç¨‹æŒ‚èµ·æ—¶é‡Šæ”¾çº¿ç¨‹ï¼Œ1000ä¸ªåç¨‹å¯é€šè¿‡å°‘é‡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œå®é™…è€—æ—¶æ¥è¿‘å•ä»»åŠ¡ç­‰å¾…æ—¶é—´ï¼ˆ50msï¼‰ï¼Œä»…å› è°ƒåº¦å¼€é”€ç•¥æœ‰å¢åŠ </li>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬</strong>ï¼šçº¿ç¨‹åˆ‡æ¢æ¯æ¬¡è€—æ—¶çº¦100nsï¼Œ1000ä¸ªä»»åŠ¡çš„çº¿ç¨‹æ± åˆ‡æ¢æ¬¡æ•°æ˜¯åç¨‹çš„æ•°åå€ï¼Œå¯¼è‡´é¢å¤–æ€§èƒ½æŸè€—</li>
</ul>
<h3 data-id="heading-54">6.4 å®æˆ˜å¯¹æ¯”3ï¼šä»£ç å¯è¯»æ€§ä¸ç»´æŠ¤æ€§</h3>
<p>ä¼ ç»Ÿçº¿ç¨‹å®ç°å¹¶å‘éœ€å€ŸåŠ©å›è°ƒæˆ–Futureï¼Œä»£ç æ˜“å‡ºç°â€œå›è°ƒåœ°ç‹±â€ï¼›åç¨‹å¯é€šè¿‡é¡ºåºä»£ç é£æ ¼ç¼–å†™å¹¶å‘é€»è¾‘ï¼Œå¯è¯»æ€§å¤§å¹…æå‡ã€‚</p>
<h4 data-id="heading-55">6.4.1 çº¿ç¨‹+Futureå®ç°ï¼šå¹¶è¡ŒæŸ¥è¯¢å¤šä¸ªæ¥å£å¹¶èšåˆç»“æœ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.async
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking
<span class="hljs-keyword">import</span> kotlinx.coroutines.awaitAll

<span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£æŸ¥è¯¢ï¼ˆä¿æŒä¸å˜ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryUserInfo</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: String {
    Thread.sleep(<span class="hljs-number">300</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼šuserId=<span class="hljs-subst">${userId}</span>, name=User<span class="hljs-subst">${userId}</span>"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryOrderList</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;String&gt; {
    Thread.sleep(<span class="hljs-number">200</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶</span>
    <span class="hljs-keyword">return</span> listOf(<span class="hljs-string">"è®¢å•1"</span>, <span class="hljs-string">"è®¢å•2"</span>, <span class="hljs-string">"è®¢å•3"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryCouponList</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;String&gt; {
    Thread.sleep(<span class="hljs-number">250</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶</span>
    <span class="hljs-keyword">return</span> listOf(<span class="hljs-string">"ä¼˜æƒ åˆ¸10å…ƒ"</span>, <span class="hljs-string">"ä¼˜æƒ åˆ¸20å…ƒ"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
    <span class="hljs-keyword">val</span> userId = <span class="hljs-string">"1001"</span>

    <span class="hljs-comment">// å¹¶å‘å¯åŠ¨åç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼Œè‡ªåŠ¨æ¨æ–­</span>
    <span class="hljs-keyword">val</span> userInfoDeferred = async { queryUserInfo(userId) }
    <span class="hljs-keyword">val</span> orderListDeferred = async { queryOrderList(userId) }
    <span class="hljs-keyword">val</span> couponListDeferred = async { queryCouponList(userId) }

    <span class="hljs-comment">// æ‰¹é‡ç­‰å¾…ç»“æœï¼ˆéé˜»å¡ï¼Œåç¨‹æŒ‚èµ·ï¼‰</span>
    <span class="hljs-keyword">val</span> (userInfo, orderList, couponList) = awaitAll(userInfoDeferred, orderListDeferred, couponListDeferred)

    <span class="hljs-comment">// èšåˆç»“æœ</span>
    println(<span class="hljs-string">"ç”¨æˆ·è¯¦æƒ…ï¼š<span class="hljs-subst">${userInfo}</span>"</span>)
    println(<span class="hljs-string">"ç”¨æˆ·è®¢å•ï¼ˆ<span class="hljs-subst">${orderList.size}</span>ä¸ªï¼‰ï¼š<span class="hljs-subst">${orderList}</span>"</span>)
    println(<span class="hljs-string">"ç”¨æˆ·ä¼˜æƒ åˆ¸ï¼ˆ<span class="hljs-subst">${couponList.size}</span>ä¸ªï¼‰ï¼š<span class="hljs-subst">${couponList}</span>"</span>)
    println(<span class="hljs-string">"æ€»è€—æ—¶ï¼š<span class="hljs-subst">${System.currentTimeMillis() - startTime}</span>ms"</span>) <span class="hljs-comment">// é¢„æœŸçº¦ 300ms</span>
}
</code></pre>
<h4 data-id="heading-56">6.4.2 åç¨‹å®ç°ï¼šç›¸åŒåœºæ™¯çš„å¹¶è¡ŒæŸ¥è¯¢ä¸èšåˆ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.async
<span class="hljs-keyword">import</span> kotlinx.coroutines.delay
<span class="hljs-keyword">import</span> kotlinx.coroutines.runBlocking

<span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£æŸ¥è¯¢ï¼ˆæŒ‚èµ·å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryUserInfo</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: String {
    delay(<span class="hljs-number">300</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶ï¼ˆæŒ‚èµ·ï¼Œä¸é˜»å¡çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼šuserId=<span class="hljs-subst">${userId}</span>, name=User<span class="hljs-subst">${userId}</span>"</span>
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryOrderList</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;String&gt; {
    delay(<span class="hljs-number">200</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶</span>
    <span class="hljs-keyword">return</span> listOf(<span class="hljs-string">"è®¢å•1"</span>, <span class="hljs-string">"è®¢å•2"</span>, <span class="hljs-string">"è®¢å•3"</span>)
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryCouponList</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;String&gt; {
    delay(<span class="hljs-number">250</span>) <span class="hljs-comment">// æ¨¡æ‹ŸIOè€—æ—¶</span>
    <span class="hljs-keyword">return</span> listOf(<span class="hljs-string">"ä¼˜æƒ åˆ¸10å…ƒ"</span>, <span class="hljs-string">"ä¼˜æƒ åˆ¸20å…ƒ"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
    <span class="hljs-keyword">val</span> userId = <span class="hljs-string">"1001"</span>

    <span class="hljs-comment">// å¹¶è¡Œå¯åŠ¨åç¨‹ï¼Œè·å–Deferredå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> userInfoDeferred = async { queryUserInfo(userId) }
    <span class="hljs-keyword">val</span> orderListDeferred = async { queryOrderList(userId) }
    <span class="hljs-keyword">val</span> couponListDeferred = async { queryCouponList(userId) }

    <span class="hljs-comment">// æŒ‚èµ·è·å–ç»“æœï¼ˆä¸é˜»å¡çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">val</span> userInfo = userInfoDeferred.await()
    <span class="hljs-keyword">val</span> orderList = orderListDeferred.await()
    <span class="hljs-keyword">val</span> couponList = couponListDeferred.await()

    <span class="hljs-comment">// èšåˆç»“æœ</span>
    println(<span class="hljs-string">"ç”¨æˆ·è¯¦æƒ…ï¼š<span class="hljs-subst">${userInfo}</span>"</span>)
    println(<span class="hljs-string">"ç”¨æˆ·è®¢å•ï¼ˆ<span class="hljs-subst">${orderList.size}</span>ä¸ªï¼‰ï¼š<span class="hljs-subst">${orderList}</span>"</span>)
    println(<span class="hljs-string">"ç”¨æˆ·ä¼˜æƒ åˆ¸ï¼ˆ<span class="hljs-subst">${couponList.size}</span>ä¸ªï¼‰ï¼š<span class="hljs-subst">${couponList}</span>"</span>)
    println(<span class="hljs-string">"æ€»è€—æ—¶ï¼š<span class="hljs-subst">${System.currentTimeMillis() - startTime}</span>ms"</span>)
}
</code></pre>
<h4 data-id="heading-57">å¯è¯»æ€§å¯¹æ¯”åˆ†æ</h4>






























<table><thead><tr><th><strong>å¯¹æ¯”ç»´åº¦</strong></th><th><strong>çº¿ç¨‹+Futureå®ç°</strong></th><th><strong>åç¨‹å®ç°</strong></th></tr></thead><tbody><tr><td>ä»£ç è¡Œæ•°</td><td>çº¦50è¡Œï¼ˆå«çº¿ç¨‹æ± ç®¡ç†ã€å¼‚å¸¸å¤„ç†ï¼‰</td><td>çº¦35è¡Œï¼ˆä½œç”¨åŸŸè‡ªåŠ¨ç®¡ç†ï¼Œè¯­æ³•ç®€æ´ï¼‰</td></tr><tr><td>é˜»å¡è¡Œä¸º</td><td>Future.get()é˜»å¡ä¸»çº¿ç¨‹ï¼Œéœ€æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹æ± </td><td>await()æŒ‚èµ·åç¨‹ï¼Œä¸é˜»å¡çº¿ç¨‹ï¼Œä½œç”¨åŸŸè‡ªåŠ¨ç®¡ç†</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>éœ€æ•è·ExecutionExceptionç­‰å¤šç§å¼‚å¸¸ï¼Œå¤„ç†å¤æ‚</td><td>å¯é€šè¿‡try-catchç›´æ¥æ•è·ï¼Œä¸æ™®é€šä»£ç ä¸€è‡´</td></tr><tr><td>å¯è¯»æ€§</td><td>çº¿ç¨‹æ± æäº¤ä¸ç»“æœè·å–åˆ†ç¦»ï¼Œé€»è¾‘åˆ†æ•£</td><td>é¡ºåºä»£ç é£æ ¼ï¼Œå¹¶å‘é€»è¾‘ä¸åŒæ­¥é€»è¾‘ä¸€è‡´</td></tr></tbody></table>
<h3 data-id="heading-58">6.5 åç¨‹ä¸çº¿ç¨‹çš„é€‚ç”¨åœºæ™¯æ€»ç»“</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨åç¨‹çš„åœºæ™¯</strong>ï¼š
<ul>
<li>é«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚ç™¾ä¸‡çº§è¯·æ±‚å¤„ç†ã€ç§’æ€ç³»ç»Ÿï¼‰ï¼›</li>
<li>IOå¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ“ä½œï¼‰ï¼›</li>
<li>éœ€è¦ç®€æ´å¹¶å‘é€»è¾‘çš„åœºæ™¯ï¼ˆé¿å…å›è°ƒåœ°ç‹±ï¼‰ï¼›</li>
<li>ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯UIå¼€å‘ï¼ˆé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä»éœ€ä½¿ç”¨çº¿ç¨‹çš„åœºæ™¯</strong>ï¼š
<ul>
<li>CPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚å¤§è§„æ¨¡æ•°æ®è®¡ç®—ã€è§†é¢‘ç¼–ç ï¼‰ï¼Œéœ€ç»‘å®šçº¿ç¨‹ä»¥å……åˆ†åˆ©ç”¨CPUï¼›</li>
<li>è°ƒç”¨ä¸æ”¯æŒåç¨‹çš„é˜»å¡APIï¼ˆå¦‚æ— æŒ‚èµ·ç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œéœ€ç”¨çº¿ç¨‹éš”ç¦»ï¼›</li>
<li>æ“ä½œç³»ç»Ÿçº§åˆ«çš„çº¿ç¨‹æ§åˆ¶ï¼ˆå¦‚è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ã€å®ˆæŠ¤çº¿ç¨‹ï¼‰ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®å®æˆ˜ï¼šåŸºäºRAPTOR RAGæ£€ç´¢æŠ€æœ¯çš„å·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7571657746345771062</link>    <guid>https://juejin.cn/post/7571657746345771062</guid>    <pubDate>2025-11-12T10:33:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571657746345771062" data-draft-id="7571490332372484115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®å®æˆ˜ï¼šåŸºäºRAPTOR RAGæ£€ç´¢æŠ€æœ¯çš„å·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T10:33:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiå¤§æ¨¡å‹åˆ†äº«å‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1567282433654843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®å®æˆ˜ï¼šåŸºäºRAPTOR RAGæ£€ç´¢æŠ€æœ¯çš„å·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1567282433654843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiå¤§æ¨¡å‹åˆ†äº«å‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:33:21.000Z" title="Wed Nov 12 2025 10:33:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®å®æˆ˜ï¼šåŸºäºRAPTOR RAGæ£€ç´¢æŠ€æœ¯çš„å·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿ</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>éšç€å·¥ä¸š4.0æ—¶ä»£çš„åˆ°æ¥ï¼Œè®¾å¤‡æ•…éšœè¯Šæ–­å·²ç»ä»ä¼ ç»Ÿçš„è¢«åŠ¨å“åº”è½¬å‘ä¸»åŠ¨é¢„æµ‹å’Œæ™ºèƒ½ å†³ç­–ã€‚RAPTORï¼ˆRecursive Abstractive Processing for Tree-Organized Retrievalï¼‰ä½œä¸ºä¸€ç§æ–°å…´çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯ï¼Œä¸ºå·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­æä¾›äº† å…¨æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æåŸºäºRAPTORæŠ€æœ¯çš„å·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿçš„å®ç°ç»† èŠ‚ï¼Œä»æ ¸å¿ƒæŠ€æœ¯åŸç†åˆ°å·¥ç¨‹è½åœ°å®è·µï¼Œå…¨é¢å±•ç¤ºè¿™ä¸€åˆ›æ–°è§£å†³æ–¹æ¡ˆã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fchen.zhipoai.cn" target="_blank" title="https://chen.zhipoai.cn" ref="nofollow noopener noreferrer">ã€AIå¤§æ¨¡å‹æ•™ç¨‹ã€‘</a></p>
<p><strong>æœ¬é¡¹ç›®è¿è¡Œç•Œé¢å¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a00170bba04244ee94449d611ecc1b9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=Gw7kNIEzndSpnBPeb8EoOEqjE38%3D" alt="" loading="lazy"/></p>
<ol>
<li>RAPTORæŠ€æœ¯åŸç†æ·±åº¦å‰–æ</li>
</ol>
<hr/>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒæŠ€æœ¯æ€æƒ³</h4>
<p>RAPTORæ˜¯ä¸€ç§åŸºäºæ ‘å½¢ç»“æ„çš„é€’å½’æ£€ç´¢ç³»ç»Ÿï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å±‚æ¬¡åŒ–çš„æ–¹å¼ç»„ç»‡çŸ¥è¯†ï¼Œå®ç°å¤šç²’åº¦çš„ä¿¡æ¯æ£€ç´¢å’Œæ‘˜è¦ç”Ÿæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74ff8e0479854b2fa736a53b16ed0a43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=Xs7H21TaJHYgWjKfC1roNMXjCvQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-3">1.2 å·¥ä½œæµç¨‹è§£æ</h4>
<p>RAPTORçš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†ä¸ºå››ä¸ªå…³é”®é˜¶æ®µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f6f568a47b24e0eb18e3feacd0ee0e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=jlrw6qpjFlRGRPFOGLc3c7%2FaSr4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">1.3 å…³é”®æŠ€æœ¯åˆ›æ–°ç‚¹</h4>
<p><strong>1. é€’å½’æ‘˜è¦ç”Ÿæˆ</strong></p>
<ul>
<li>é€šè¿‡å±‚å±‚æ‘˜è¦ï¼Œå°†é•¿æ–‡æ¡£å‹ç¼©ä¸ºä¸åŒç²’åº¦çš„è¡¨ç¤º</li>
<li>æ¯ä¸€å±‚éƒ½æ¯”ä¸‹ä¸€å±‚æ›´æŠ½è±¡ï¼Œè¦†ç›–æ›´å¤§èŒƒå›´çš„ä¿¡æ¯</li>
</ul>
<p><strong>2. æ ‘å½¢æ£€ç´¢æœºåˆ¶</strong></p>
<ul>
<li>ä»æ‰€æœ‰å±‚çº§åŒæ—¶æ£€ç´¢ï¼Œå¹³è¡¡ç»†ç²’åº¦å’Œç²—ç²’åº¦ä¿¡æ¯</li>
<li>åŠ¨æ€é€‰æ‹©æœ€ç›¸å…³çš„èŠ‚ç‚¹ç»„åˆ</li>
</ul>
<p><strong>3. è‡ªé€‚åº”åˆ†å—ç­–ç•¥</strong></p>
<ul>
<li>ä¸æ˜¯ç®€å•çš„å›ºå®šé•¿åº¦åˆ†å—</li>
<li>ç»“åˆè¯­ä¹‰ç›¸ä¼¼æ€§å’Œä¸Šä¸‹æ–‡è¿ç»­æ€§</li>
</ul>
<ol start="2">
<li>RAPTORå®˜æ–¹å®ç°åˆ†æ</li>
</ol>
<hr/>
<h4 data-id="heading-5">2.1 æ¶æ„è®¾è®¡</h4>
<p>å®˜æ–¹RAPTOR(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fparthsarthi03%2Fraptor%2Ftree%2Fmaster" target="_blank" title="https://github.com/parthsarthi03/raptor/tree/master" ref="nofollow noopener noreferrer">github.com/parthsarthiâ€¦</a>) å®ç°é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77ef01722ff64fcda20094521473e35d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=twInt7K%2FhesgKFIhI4Y8Y1%2FtCFk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">2.2 å…³é”®æŠ€æœ¯å®ç°</h4>
<p><strong>æ–‡æœ¬åˆ†å—ç­–ç•¥ï¼ˆutils.pyï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">def split_text(text, tokenizer, max_tokens, overlap=0):    # åŸºäºæ ‡ç‚¹ç¬¦å·å’Œæ¢è¡Œçš„æ™ºèƒ½åˆ†å—    delimiters = [".", "!", "?", "\n"]    sentences = re.split(regex_pattern, text)    # è®¡ç®—tokenæ•°å¹¶åŠ¨æ€åˆ†ç»„    n_tokens = [len(tokenizer.encode(" " + sentence))                for sentence in sentences]    # æ„å»ºåˆ†å—ï¼Œç¡®ä¿ä¸è¶…è¿‡max_tokens    chunks = []    # ... çœç•¥å…·ä½“å®ç°
</code></pre>
<p><strong>æ ‘æ„å»ºè¿‡ç¨‹ï¼ˆtree_builder.pyï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">def build_tree(self, text, use_multithreading=True):    # 1. æ–‡æœ¬åˆ†å—    chunks = split_text(text, self.tokenizer, self.max_tokens)    # 2. åˆ›å»ºå¶å­èŠ‚ç‚¹    leaf_nodes = self.create_leaf_nodes(chunks)    # 3. é€’å½’èšç±»å’Œæ‘˜è¦    for level in range(1, self.tree_levels):        # UMAPé™ç»´        embeddings = get_embeddings(current_nodes, embedding_model)        reduced_embeddings = umap(embeddings)        # KMeansèšç±»        clusters = kmeans(reduced_embeddings, self.cluster_size)        # ç”Ÿæˆæ‘˜è¦        summaries = []        for cluster in clusters:            summary = llm_summarize(cluster)            summaries.append(summary)        # åˆ›å»ºä¸Šå±‚èŠ‚ç‚¹        current_nodes = create_nodes(summaries, level)
</code></pre>
<h4 data-id="heading-7">2.3 æ£€ç´¢ç®—æ³•</h4>
<p>RAPTORçš„æ£€ç´¢ç®—æ³•ç»“åˆäº†å‘é‡ç›¸ä¼¼æ€§å’Œæ ‘ç»“æ„ç‰¹å¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6150a44ba5b4b22aad06e7a25b4cc41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=0TyKRfpjGqsQUtDIEn2tBsfS8ks%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>æœ¬é¡¹ç›®å¯¹å®˜æ–¹Raptorçš„æ‰©å±•</li>
</ol>
<hr/>
<p>å·¥ä¸šæ•°æ®å¾€å¾€åŒ…å«æ•æ„Ÿä¿¡æ¯â€”â€”è®¾å¤‡å‚æ•°ã€ç”Ÿäº§å·¥è‰ºã€æ•…éšœæ¨¡å¼ç­‰ï¼Œè¿™äº›æ•°æ®çš„æ³„éœ²å¯èƒ½å¯¼è‡´é‡å¤§å•†ä¸šæŸå¤±ã€‚æœ¬é¡¹ç›®ç‰¹æ­¤å¯¹RAPTORå®˜æ–¹å®ç°è¿›è¡Œäº†æ‰©å±•ï¼Œç‰¹åˆ«å¢åŠ äº†æœ¬åœ°åŒ–éƒ¨ç½²èƒ½åŠ›ï¼Œé€šè¿‡Ollamaç­‰å·¥å…·å®ç°æ¨¡å‹çš„æœ¬åœ°è¿è¡Œï¼Œç¡®ä¿"æ•°æ®ä¸å‡ºå‚"ã€‚ï¼ˆæºç åŒ…ä¸­ï¼ŒRaptoråŒ…ä¸‹çš„ä»£ç æ˜¯å®˜æ–¹ä»£ç å’Œæœ¬é¡¹ç›®å¯¹å…¶æ”¯æŒå¤§æ¨¡å‹èƒ½åŠ›çš„æ‰©å±•ï¼‰</p>
<h4 data-id="heading-8">3.1 å¤šLLMæ”¯æŒæ¶æ„è®¾è®¡</h4>
<p>ä¸ºäº†æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œé¡¹ç›®è®¾è®¡äº†ç»Ÿä¸€çš„LLMæœåŠ¡æŠ½è±¡å±‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de291f16a49f45f5afa3dee7a7704743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=syId5GCYIZhiW02n5eRpi8BV1cc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">3.2 Ollamaé›†æˆå®ç°</h4>
<p><strong>æ ¸å¿ƒæœåŠ¡ç±»ï¼ˆllm_service.pyï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">class OllamaService(BaseLLMService):    """Ollamaæœ¬åœ°LLMæœåŠ¡å®ç°"""    def __init__(self, base_url=None, model=None):        self.base_url = base_url or settings.OLLAMA_BASE_URL        self.model = model or settings.OLLAMA_MODEL    asyncdef chat(self, messages, **kwargs):        """é€šè¿‡Ollama APIè¿›è¡Œå¯¹è¯"""        asyncwith httpx.AsyncClient() as client:            response = await client.post(                f"{self.base_url}/api/chat",                json={                    "model": self.model,                    "messages": messages,                    "stream": False                },                timeout=60.0            )            return response.json()["message"]["content"]
</code></pre>
<p><strong>é…ç½®ç®¡ç†ï¼ˆconfig.pyï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext"># å¤šLLMæä¾›å•†é…ç½® DEFAULT_LLM_PROVIDER: str = "qwen" # æ”¯æŒï¼šqwen, huggingface, openai, ollama # Ollamaé…ç½® OLLAMA_BASE_URL: str = "http://localhost:11434" OLLAMA_MODEL: str = "qwen3:8b"
</code></pre>
<h4 data-id="heading-10">3.3 RAPTORæœåŠ¡å°è£…</h4>
<p><strong>RAPTORæœåŠ¡ç±»ï¼ˆraptor_service.pyï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">class RaptorService:    """RAPTORæœåŠ¡å°è£…ï¼Œæ”¯æŒå¤šLLM"""    def __init__(self, llm_service=None):        self.llm_service = llm_service        self.raptor_instance = None    asyncdef build_tree(self, documents, document_names=None):        """æ„å»ºRAPTORæ ‘"""        # åˆå§‹åŒ–RAPTORå®ä¾‹        config = RetrievalAugmentationConfig(            embedding_model=OllamaEmbeddingModel(...),            tb_summarization_model=OllamaSummarizationModel(...),            qa_model=OllamaQAModel(...)        )        self.raptor_instance = RetrievalAugmentation(config=config)        # åˆå¹¶æ–‡æ¡£å¹¶æ„å»ºæ ‘        combined_text = "\n\n".join([...])        self.raptor_instance.add_documents(combined_text)        self.raptor_instance.save(save_path)    asyncdef query(self, query_text, top_k=5):        """æŸ¥è¯¢å¹¶ç”Ÿæˆå›ç­”"""        answer = self.raptor_instance.answer_question(            question=query_text        )        return [{"content": answer, "score": 1.0}]
</code></pre>
<h4 data-id="heading-11">3.4 è‡ªå®šä¹‰åµŒå…¥æ¨¡å‹</h4>
<p><strong>é¡¹ç›®å®ç°äº†OllamaåµŒå…¥æ¨¡å‹æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">class OllamaEmbeddingModel:    """OllamaåµŒå…¥æ¨¡å‹å®ç°"""    asyncdef embed(self, text):        asyncwith httpx.AsyncClient() as client:            response = await client.post(                f"{self.base_url}/api/embeddings",                json={                    "model": self.model,                    "prompt": text                },                timeout=30.0            )            return response.json()["embedding"]
</code></pre>
<ol start="4">
<li>é¡¹ç›®æ•´ä½“æ¶æ„å®ç°</li>
</ol>
<hr/>
<h4 data-id="heading-12">4.1 åç«¯æ¶æ„è®¾è®¡</h4>
<p>åç«¯é‡‡ç”¨FastAPIæ¡†æ¶ï¼Œå®ç°äº†æ¸…æ™°çš„å±‚æ¬¡åŒ–æ¶æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10c37773b16e4d2fbc7c008f9f55699e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=oxFF08HF104axRhEHRTukawjskk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13">4.2 APIè®¾è®¡</h4>
<p>é¡¹ç›®å®ç°äº†å®Œæ•´çš„RESTful APIï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext"># ä¸»è¦APIç«¯ç‚¹  @router.post("/api/chat")asyncdef chat_question(request: ChatRequest):      """æ™ºèƒ½é—®ç­”"""  @router.post("/api/upload")asyncdef upload_document(file: UploadFile):      """æ–‡æ¡£ä¸Šä¼ """  @router.post("/api/knowledge-base/build")asyncdef build_knowledge_base():      """æ„å»ºçŸ¥è¯†åº“"""  @router.get("/api/knowledge-base/tree")asyncdef get_tree_structure():      """è·å–æ ‘ç»“æ„"""
</code></pre>
<h4 data-id="heading-14">4.3 å‰ç«¯æ¶æ„å®ç°</h4>
<p>å‰ç«¯é‡‡ç”¨React + TypeScript + Tailwind CSSæŠ€æœ¯æ ˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45a37600943b429f958771caa85bb733~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=rUaRgQ5t%2BfNPLm8qpAeGZ9i6F78%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-15">4.4 å…³é”®å‰ç«¯ç»„ä»¶</h4>
<p><strong>èŠå¤©ç•Œé¢ç»„ä»¶ï¼ˆChatInterface.tsxï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">const ChatInterface: React.FC = () =&gt; {const [messages, setMessages] = useState&lt;ChatMessage[]&gt;([]);const [input, setInput] = useState('');const sendMessage = async () =&gt; {    const response = await apiClient.post('/api/chat', {      message: input,      use_raptor: true    });    setMessages(prev =&gt; [...prev, response.data]);  };return (    &lt;div className="chat-container"&gt;      &lt;MessageList messages={messages} /&gt;      &lt;InputBox onSend={sendMessage} /&gt;    &lt;/div&gt;  );};
</code></pre>
<p><strong>çŸ¥è¯†åº“ç®¡ç†ç»„ä»¶ï¼ˆKnowledgeBaseManager.tsxï¼‰</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">const KnowledgeBaseManager: React.FC = () =&gt; {const [documents, setDocuments] = useState&lt;Document[]&gt;([]);const [treeStructure, setTreeStructure] = useState(null);const buildKnowledgeBase = async () =&gt; {    await apiClient.post('/api/knowledge-base/build');    const tree = await apiClient.get('/api/knowledge-base/tree');    setTreeStructure(tree.data);  };return (    &lt;div className="kb-manager"&gt;      &lt;DocumentUploader onUpload={setDocuments} /&gt;      &lt;BuildButton onClick={buildKnowledgeBase} /&gt;      &lt;TreeVisualization data={treeStructure} /&gt;    &lt;/div&gt;  );};
</code></pre>
<h4 data-id="heading-16">4.5 å‰åç«¯æ•°æ®æµ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/365ea8f34c9b4e82867b33f459f38f22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=qtm4XvDSUtLpUnEGnRuYiiPt51s%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">ç»“è¯­</h3>
<p>RAPTORå·¥ä¸šè®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿé€šè¿‡åˆ›æ–°çš„æ ‘å½¢æ£€ç´¢æŠ€æœ¯ï¼Œç»“åˆç°ä»£å¤§è¯­è¨€æ¨¡å‹çš„å¼ºå¤§èƒ½åŠ›ï¼Œä¸ºå·¥ä¸šè®¾å¤‡çš„æ™ºèƒ½è¯Šæ–­æä¾›äº†å…¨æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚ç³»ç»Ÿä¸ä»…å®ç°äº†RAPTORçš„å®Œæ•´åŠŸèƒ½ï¼Œè¿˜é€šè¿‡å¤šLLMæ”¯æŒã€æœ¬åœ°åŒ–éƒ¨ç½²ç­‰åˆ›æ–°ç‰¹æ€§ï¼Œå¤§å¤§æå‡äº†ç³»ç»Ÿçš„å®ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-18">æºä»£ç </h3>
<p><strong>å®Œæ•´çš„é¡¹ç›®ä»£ç å’Œæ›´è¯¦ç»†çš„å®ç°ï¼Œè¯·è®¿é—®æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œè·å–å®Œæ•´ç³»ç»Ÿé¡¹ç›®æºä»£ç ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a9882e6cb104461aa3fa6e2933ad543~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWnlpKfmqKHlnovliIbkuqvlkZg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548400&amp;x-signature=hO5njnjmzrCins2V5EIiO0fDCx4%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡çœ‹æ‡‚ Agentic AIï¼šæ­å»ºå•ä½“ vs å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç»“æœå‡ºä¹æ„æ–™ï¼]]></title>    <link>https://juejin.cn/post/7571648135584923691</link>    <guid>https://juejin.cn/post/7571648135584923691</guid>    <pubDate>2025-11-12T10:37:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571648135584923691" data-draft-id="7571490332372500499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡çœ‹æ‡‚ Agentic AIï¼šæ­å»ºå•ä½“ vs å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç»“æœå‡ºä¹æ„æ–™ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T10:37:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç©è½¬AGI"/> <meta itemprop="url" content="https://juejin.cn/user/458916928692816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡çœ‹æ‡‚ Agentic AIï¼šæ­å»ºå•ä½“ vs å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç»“æœå‡ºä¹æ„æ–™ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/458916928692816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç©è½¬AGI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:37:44.000Z" title="Wed Nov 12 2025 10:37:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡çœ‹æ‡‚ Agentic AIï¼šæ­å»ºå•ä½“ vs å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç»“æœå‡ºä¹æ„æ–™ï¼</h2>
<p>æœ€è¿‘ï¼Œæˆ‘å¼€å§‹å°è¯•æ„å»ºä¸åŒç±»å‹çš„ Agentic AI ç³»ç»Ÿï¼Œæœ€è®©æˆ‘ç€è¿·çš„ï¼Œæ˜¯â€œå•æ™ºèƒ½ä½“ï¼ˆSingle-Agentï¼‰â€å’Œâ€œå¤šæ™ºèƒ½ä½“ï¼ˆMulti-Agentï¼‰â€çš„å·®å¼‚ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fchen.zhipoai.cn" target="_blank" title="https://chen.zhipoai.cn" ref="nofollow noopener noreferrer">ã€AIå¤§æ¨¡å‹æ•™ç¨‹ã€‘</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dd5f16eac814eeb86e9c35270cbc9a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=FigvSG6yLdQxQ1m1%2Bb2h1OdkbvE%3D" alt="" loading="lazy"/></p>
<p>è¯´å®è¯ï¼Œåœ¨æ²¡çœŸæ­£åŠ¨æ‰‹ä¹‹å‰ï¼Œæˆ‘ä¹Ÿåªæ˜¯å¬è¿‡è¿™äº›æ¦‚å¿µï¼Œè§‰å¾—å¬èµ·æ¥å¾ˆç„ã€‚ç›´åˆ°æˆ‘ç”¨Â <strong>LangGraph</strong>Â å’ŒÂ <strong>LangSmith Studio</strong>Â äº²è‡ªæ­å»ºäº†ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªâ€œå•å…µä½œæˆ˜â€ï¼Œä¸€ä¸ªâ€œå¤šæ™ºèƒ½ä½“åä½œâ€ï¼Œç»“æœçœŸçš„è®©æˆ‘å½»åº•æ”¹è§‚ã€‚</p>
<p>æˆ‘æƒ³é€ ä¸€ä¸ªèƒ½å¸®æˆ‘è¿½è¸ªç§‘æŠ€è¶‹åŠ¿çš„â€œç ”ç©¶åŠ©æ‰‹ Agentâ€ã€‚å®ƒçš„ä»»åŠ¡å¾ˆç®€å•ï¼šæ¯å¤©å¸®æˆ‘æ‰¾å‡ºè¿‡å»ä¸€å¤©æˆ–ä¸€å‘¨å†…ç§‘æŠ€åœˆçš„çƒ­é—¨è¯é¢˜ï¼Œå†æŒ‘å‡ºå“ªäº›æ˜¯çœŸæ­£â€œå€¼å¾—æŠ¥é“â€çš„ã€‚</p>
<p>æ•°æ®æºæ˜¯ä¸€ä¸ªç§‘æŠ€ç¤¾äº¤ APIï¼Œå®ƒèƒ½å‘Šè¯‰æˆ‘ä»¬â€œå¤§å®¶åœ¨èŠä»€ä¹ˆã€è½¬å‘ä»€ä¹ˆâ€ã€‚è€Œæˆ‘çš„ Agent è¦åšçš„ï¼Œå°±æ˜¯ï¼š<br/>
1ï¸âƒ£ æ ¹æ®ç›®æ ‡ç”¨æˆ·ï¼ˆæ¯”å¦‚ç§‘æŠ€åšä¸»ã€è¡Œä¸šåˆ†æå¸ˆï¼‰çš„ç”»åƒï¼Œç­›å‡ºé‡ç‚¹ï¼›<br/>
2ï¸âƒ£ å†å¸®æˆ‘åšä¸€ä»½ç®€æ˜çš„æ€»ç»“æŠ¥å‘Šã€‚</p>
<p>å¬èµ·æ¥æŒºç®€å•ï¼Œä½†çœŸæ­£åŠ¨æ‰‹æ—¶ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼ŒAgent çš„â€œç»“æ„è®¾è®¡â€å†³å®šäº†æœ€ç»ˆçš„è´¨é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a20af5ff39546a5b7a05b9fb0939ab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=53N1y74nc3sxuZ76hEGmJgrAaqU%3D" alt="" loading="lazy"/></p>
<p>æˆ‘å–œæ¬¢ç”¨ä¸€å¥è¯è§£é‡Šï¼š</p>
<blockquote>
<p><strong>Agentic AI å°±æ˜¯â€œç”¨è‡ªç„¶è¯­è¨€ç¼–ç¨‹â€ã€‚</strong></p>
</blockquote>
<p>ä¼ ç»Ÿå¼€å‘è¦å†™æ­»é€»è¾‘ï¼Œè€Œ Agentic AI æ˜¯è®©å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è‡ªå·±â€œç†è§£ä»»åŠ¡ã€è§„åˆ’æ­¥éª¤ã€è°ƒç”¨å·¥å…·ã€ç”Ÿæˆç»“æœâ€ã€‚æˆ‘ä»¬ä¸æ˜¯åœ¨å†™â€œä»£ç é€»è¾‘â€ï¼Œè€Œæ˜¯åœ¨â€œè®­ç»ƒä¸€ä½ä¼šæ€è€ƒçš„å®ä¹ ç”Ÿâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28eda90d0fa845fda50cd57f48c88246~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=DubDHYkmVL8mNJYdI6JJAtDtk%2B0%3D" alt="" loading="lazy"/></p>
<p>è¿™å…¶å®ä¸æ˜¯ NLP çš„æ–°é²œäº‹ï¼Œä½†è¿™æ¬¡ä¸ä¸€æ ·â€”â€”ä»¥å‰çš„ NLP æ¨¡å‹åªä¼šç…§è§„åˆ™æå–ä¿¡æ¯ï¼›ç°åœ¨çš„ LLMï¼Œèƒ½<strong>è‡ªå·±åˆ¤æ–­æ¨¡ç³Šè¯­ä¹‰ã€åŠ¨æ€å†³ç­–</strong>ï¼Œç”šè‡³åœ¨ä¸ç¡®å®šçš„æƒ…å†µä¸‹â€œè‡ªæˆ‘è¡¥å…¨â€ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€â€”â€”å¦‚æœä½ ä¸ç»™å®ƒå¹²å‡€çš„æ•°æ®ï¼Œå®ƒå°±ä¼šâ€œå¼€å§‹èƒ¡ç¼–â€ã€‚<br/>
æˆ‘å¸¸å¯¹æœ‹å‹æ‰“æ¯”æ–¹ï¼š</p>
<blockquote>
<p>â€œLLM å°±åƒäººç±»ä¸€æ ·â€”â€”å¦‚æœä¿¡æ¯ä¸å…¨ï¼Œå°±å¼€å§‹è„‘è¡¥ã€‚â€</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œè¦æƒ³è®©å®ƒé è°±ï¼Œå°±å¾—è®©å®ƒæ¥å…¥ç»“æ„åŒ–æ•°æ®ã€å¤–éƒ¨å·¥å…·å’Œ APIï¼Œä¿è¯å®ƒâ€œæœ‰æ–™å¯æŸ¥â€ã€‚</p>
<h5 data-id="heading-1">å•æ™ºèƒ½ä½“ï¼ˆSingle-Agentï¼‰ä¸€åˆ‡éƒ½äº¤ç»™ä¸€ä¸ªæ¨¡å‹æ¥åšã€‚æˆ‘ç»™å®ƒæ‰€æœ‰å·¥å…·ï¼ˆAPI æ¥å£ã€æ•°æ®åº“è®¿é—®æƒé™ï¼‰ï¼Œç„¶åä¸€å¥è¯ï¼šâ€œå¸®æˆ‘æ‰¾å‡ºè¿‡å»ä¸€å‘¨ç§‘æŠ€åœˆæœ€çƒ­çš„æ–°é—»ã€‚â€å®ƒä¼šå°½åŠ›å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼Œä½†é—®é¢˜ä¹Ÿæ˜æ˜¾ï¼š</h5>
<ul>
<li>æœ‰æ—¶å®ƒå¿˜è®°è°ƒç”¨æŸä¸ªæ¥å£ï¼›</li>
<li>æœ‰æ—¶å®ƒé‡å¤æŸ¥è¯¢ï¼›</li>
<li>æœ‰æ—¶æ€»ç»“å¾—å¤ªç¬¼ç»Ÿï¼Œé—æ¼é‡ç‚¹ã€‚</li>
</ul>
<p>å°±åƒä¸€ä¸ªäººåŒæ—¶æ‰®æ¼”â€œè®°è€… + ç¼–è¾‘ + æ€»ç¼–â€ï¼Œæ•ˆç‡é«˜ï¼Œä½†å®¹æ˜“ç³Šæˆä¸€é”…ç²¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca435c7e30e14fbf896df9315a132f06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=BEqEIuMEdOxPZHunCgneMo4i%2BXQ%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-2">å¤šæ™ºèƒ½ä½“ï¼ˆMulti-Agentï¼‰</h5>
<p>æˆ‘æ¢äº†ä¸€ç§æ€è·¯ï¼šä¸€ä¸ªâ€œä¸»ç¼– Agentâ€ç»Ÿç­¹å…¨å±€ï¼›å‡ ä¸ªâ€œç ”ç©¶å‘˜ Agentâ€åˆ†åˆ«è´Ÿè´£æ•°æ®é‡‡é›†ã€ç­›é€‰ã€æ€»ç»“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc4d2617ca94c2c8a1474d4f3134fbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=s6TbxD0yIYG1e3dSkadIaASfb3k%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li><strong>Research Agent</strong>ï¼šè°ƒç”¨ API æŠ“å–è¶‹åŠ¿æ•°æ®ï¼›</li>
<li><strong>Filter Agent</strong>ï¼šç­›æ‰å™ªå£°ï¼Œé€‰å‡ºçœŸæ­£çƒ­é—¨çš„å†…å®¹ï¼›</li>
<li><strong>Summary Agent</strong>ï¼šç”Ÿæˆç»“æ„åŒ–çš„ç§‘æŠ€ç®€æŠ¥ï¼›</li>
<li><strong>Lead Agent</strong>ï¼ˆä¸»ç¼–ï¼‰ï¼šæ•´åˆå…¨å±€ã€å®¡æ ¸ç»“æœã€‚</li>
</ul>
<p>è¿™ä¸ªç³»ç»Ÿçœ‹èµ·æ¥å¤æ‚ï¼Œä½†è¿è¡Œç»“æœéå¸¸æƒŠè‰³ï¼šæŠ¥å‘Šæ›´å…¨é¢ã€æ›´æœ‰é€»è¾‘ã€ä¹Ÿæ›´è´´è¿‘æˆ‘æƒ³è¦çš„é£æ ¼ã€‚</p>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”ä¼šå»ç”¨ CrewAI æˆ– AutoGenï¼Œä½†æˆ‘è¿™æ¬¡é€‰äº†Â <strong>LangGraph</strong>ã€‚å®ƒæ˜¯åŸºäº LangChain çš„å›¾å½¢åŒ–æ¡†æ¶ï¼Œç”¨â€œèŠ‚ç‚¹ï¼ˆNodeï¼‰â€ä»£è¡¨ä¸åŒ Agentï¼Œç”¨â€œè¾¹ï¼ˆEdgeï¼‰â€å®šä¹‰ä¿¡æ¯æµã€‚</p>
<p>æˆ‘ç¬¬ä¸€æ¬¡åœ¨ LangSmith Studio é‡Œçœ‹åˆ°æˆ‘çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿâ€œå¼€å·¥â€çš„æ—¶å€™ï¼ŒçœŸçš„æœ‰ç‚¹éœ‡æ’¼â€”â€”å¥½å‡ ä¸ª Agent åœ¨â€œäº’ç›¸å¯¹è¯â€ï¼Œåä½œå®Œæˆä¸€ç¯‡ç§‘æŠ€æ–°é—»æ‘˜è¦ã€‚æ•´ä¸ªæµç¨‹è·‘å®Œå¤§æ¦‚ 3 åˆ†é’Ÿï¼Œæ¯”å•æ™ºèƒ½ä½“æ…¢ä¸€ç‚¹ï¼Œä½†è¾“å‡ºè´¨é‡å®Œå…¨ä¸åœ¨ä¸€ä¸ªå±‚æ¬¡ä¸Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77ac6834f84547bf9d9f2ed81d545748~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=DuPqqCzf87RGXIaukPtKkjKdWY0%3D" alt="" loading="lazy"/></p>
<p>LangGraph çš„ç¡®ç¨å¾®åâ€œå·¥ç¨‹â€ï¼Œä¸å¦‚ CrewAI é‚£ä¹ˆå³å¼€å³ç”¨ï¼Œä½†å®ƒèƒ½è®©æˆ‘æ¸…æ¥šçœ‹åˆ°æ¯ä¸€æ­¥çš„è°ƒç”¨ã€æ¯ä¸ª Agent çš„çŠ¶æ€ï¼Œç‰¹åˆ«é€‚åˆåšå®éªŒå’Œè°ƒä¼˜ã€‚</p>
<p>æˆ‘ç°åœ¨çš„ç»éªŒæ˜¯ï¼š</p>
<ul>
<li>æƒ³<strong>å¿«é€ŸéªŒè¯ä¸€ä¸ªæƒ³æ³•</strong>ï¼Ÿç”¨å•æ™ºèƒ½ä½“ã€‚</li>
<li>æƒ³<strong>äº§å‡ºå¯æ§ã€é«˜è´¨é‡ç»“æœ</strong>ï¼Ÿç”¨å¤šæ™ºèƒ½ä½“ã€‚</li>
</ul>
<p>å•ä½“åƒè‡ªç”±åˆ›ä½œï¼Œçµæ´»ä½†å®¹æ˜“è·‘åï¼›<br/>
å¤šä½“åƒæµæ°´çº¿åä½œï¼Œç²¾ç¡®ä½†æˆæœ¬æ›´é«˜ã€‚</p>
<p>æˆ‘æ›´å–œæ¬¢æ··åˆæ–¹æ¡ˆâ€”â€”æ¯”å¦‚ç”¨ä¸€ä¸ªå• Agent å…ˆâ€œé¢„åˆ¤ä¸»é¢˜â€ï¼Œå†äº¤ç»™å¤š Agent ç³»ç»Ÿç»†åŒ–å¤„ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b7218735a974a4ab98d3fed757ef0a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546p6L2sQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763548664&amp;x-signature=suI1SZIWUHwoc4G57Eynq0HwwV8%3D" alt="" loading="lazy"/></p>
<p>åˆ«è®© LLM å»ç®—æ•°æˆ–åšç»“æ„åŒ–ä»»åŠ¡ï¼Œå®ƒä¸æ˜¯è®¡ç®—å™¨ã€‚çœŸæ­£çš„é­”æ³•ï¼Œæ˜¯è®©å®ƒ<strong>è´Ÿè´£ç†è§£äººè¯ã€æ‹†è§£æ¨¡ç³Šç›®æ ‡</strong>ï¼Œå†è®©ç¨‹åºå»æ‰§è¡Œé‚£äº›ç¡®å®šæ€§çš„äº‹æƒ…ã€‚</p>
<p>æ‰€ä»¥æˆ‘å¸¸è¯´ï¼š</p>
<blockquote>
<p><strong>å¥½çš„ Agent ç³»ç»Ÿï¼Œæ˜¯äººè„‘é€»è¾‘ + æœºå™¨æ‰§è¡Œçš„ç»“åˆä½“ã€‚</strong></p>
</blockquote>
<p>å½“æˆ‘çœ‹ç€å¤šæ™ºèƒ½ä½“ç³»ç»Ÿåœ¨å±å¹•ä¸Šâ€œåä½œâ€æ—¶ï¼Œæˆ‘çªç„¶æœ‰ç§å¥‡æ€ªçš„æ„Ÿå—â€”â€”<br/>
è¿™ä¸æ˜¯åœ¨å†™ä»£ç ï¼Œè€Œæ˜¯åœ¨â€œæŒ‡æŒ¥ä¸€ä¸ªå°å›¢é˜Ÿâ€ã€‚æ¯ä¸ª Agent éƒ½æœ‰è‡ªå·±çš„æ€§æ ¼ã€æ“…é•¿çš„ä»»åŠ¡ã€æ±‡æŠ¥çš„æ–¹å¼ã€‚</p>
<p>è€Œæˆ‘ï¼Œåªéœ€è¦æ‰®æ¼”é‚£ä¸ªâ€œæ‡‚ç›®æ ‡ã€æ‡‚ç­–ç•¥â€çš„ç®¡ç†è€…ã€‚</p>
<p>æˆ‘æƒ³ï¼Œè¿™å¤§æ¦‚å°±æ˜¯Â <strong>Agentic AI çš„çœŸæ­£é­…åŠ›</strong>â€”â€”è®©è¯­è¨€å˜æˆæŒ‡ä»¤ï¼Œè®©æ€ç»´å˜æˆç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£ç¼–ç¨‹èŒƒå¼ï¼ˆå‰ç«¯è§’åº¦ï¼‰]]></title>    <link>https://juejin.cn/post/7571648135585005611</link>    <guid>https://juejin.cn/post/7571648135585005611</guid>    <pubDate>2025-11-12T10:57:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571648135585005611" data-draft-id="7571678388953759763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£ç¼–ç¨‹èŒƒå¼ï¼ˆå‰ç«¯è§’åº¦ï¼‰"/> <meta itemprop="keywords" content="è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-12T10:57:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£ç¼–ç¨‹èŒƒå¼ï¼ˆå‰ç«¯è§’åº¦ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:57:19.000Z" title="Wed Nov 12 2025 10:57:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¼–ç¨‹èŒƒå¼ï¼ˆProgramming Paradigmsï¼‰æ˜¯ç¼–ç¨‹çš„ä¸€ç§é£æ ¼æˆ–æ–¹æ³•ï¼Œå®ƒå®šä¹‰äº†ä»£ç çš„ç»“æ„å’Œç»„ç»‡æ–¹å¼ã€‚ç¼–ç¨‹èŒƒå¼æä¾›äº†ä¸åŒçš„æ€è€ƒå’Œè§£å†³é—®é¢˜çš„è§’åº¦ï¼Œå½±å“ç€ç¨‹åºå‘˜å¦‚ä½•ç¼–å†™ä»£ç ã€‚</p>
<p>å¸¸è§çš„å‰ç«¯ç¼–ç¨‹èŒƒå¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆImperative Programmingï¼‰</li>
<li>å£°æ˜å¼ç¼–ç¨‹ï¼ˆDeclarative Programmingï¼‰</li>
<li>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰</li>
<li>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programmingï¼‰</li>
</ul>
<h2 data-id="heading-0">å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆImperative Programmingï¼‰ - å…³æ³¨"å¦‚ä½•åš"ï¼ˆHowï¼‰</h2>
<p><strong>ç‰¹ç‚¹</strong>ï¼šå…³æ³¨"å¦‚ä½•åš"ï¼ˆHowï¼‰ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸€ç³»åˆ—æ˜ç¡®çš„æŒ‡ä»¤ï¼ˆå¦‚å˜é‡èµ‹å€¼ã€å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ï¼‰æ¥æ”¹å˜ç¨‹åºçš„çŠ¶æ€ï¼Œé€æ­¥å¼•å¯¼è®¡ç®—æœºå®Œæˆä»»åŠ¡ã€‚å®ƒå¼ºè°ƒ â€œè¿‡ç¨‹â€ å’Œ â€œçŠ¶æ€å˜åŒ–â€ï¼Œå°±åƒç»™è®¡ç®—æœºä¸€æ­¥æ­¥ä¸‹è¾¾æ“ä½œå‘½ä»¤ã€‚</p>
<p>ç„¶åï¼Œçœ‹çœ‹ä¸‹é¢çš„ä»£ç å±äºå‘½ä»¤å¼ç¼–ç¨‹ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">isEven</span> = (<span class="hljs-params">number</span>) =&gt; number % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = (<span class="hljs-params">number</span>) =&gt; number * number;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sumOfEvenSquares</span>(<span class="hljs-params">numbers</span>) {
  <span class="hljs-comment">// å£°æ˜å˜é‡ä¿å­˜ä¸­é—´çŠ¶æ€ï¼ˆæ€»å’Œï¼‰</span>
  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// å¾ªç¯éå†æ•°ç»„ï¼Œï¼ˆæ˜ç¡®çš„æ­¥éª¤ï¼šé€ä¸ªæ£€æŸ¥å…ƒç´ ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼‰</span>
  numbers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">number</span>) =&gt;</span> {
    <span class="hljs-comment">// æ¡ä»¶åˆ¤æ–­ï¼Œç­›é€‰å¶æ•°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isEven</span>(number)) {
      <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€ï¼ˆæ€»å’Œï¼‰</span>
      sum += <span class="hljs-title function_">square</span>(number);
    }
  });
  <span class="hljs-comment">// è¿”å›ç»“æœ</span>
  <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">sumOfEvenSquares</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])); <span class="hljs-comment">// 56</span>
</code></pre>
<p>ç­”æ¡ˆï¼šä¸Šé¢æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ã€‚</p>
<p>ä»¥å‰æˆ‘ç²—æµ…çš„ä»¥ä¸ºï¼Œçœ‹åˆ°forEachå°±æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼Œçœ‹åˆ°æå–å‡½æ•°ä»¥ä¸ºæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œå…¶å®è¿˜æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ï¼Œå› ä¸ºsumåœ¨è¢«æ˜¾ç¤ºçš„ä¿®æ”¹ã€‚</p>
<p>å…¶æ•´ä¸ªæµç¨‹ä¾ç„¶æ˜¯ â€œåˆå§‹åŒ– sum â†’ å¾ªç¯æ•°ç»„ â†’ é€ä¸ªåˆ¤æ–­ â†’ ç´¯åŠ å¶æ•° â†’ è¿”å›ç»“æœâ€</p>
<p>é‡æ–°æ¢³ç†ä¸‹å‘½ä»¤å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ­¥éª¤åŒ–æŒ‡ä»¤ï¼ˆå…³æ³¨æ­¥éª¤ï¼Œæ˜ç¡®æ¯ä¸€æ­¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼‰</li>
<li>ä¾èµ–æ˜¾å¼çŠ¶æ€ä¿®æ”¹ï¼ˆçŠ¶æ€åœ¨æ˜¾ç¤ºçš„ä¿®æ”¹ï¼Œæ¯”å¦‚sumåœ¨æ˜¾ç¤ºçš„è¢«ä¿®æ”¹ï¼‰</li>
<li>æ§åˆ¶æµç”±å¼€å‘è€…ä¸»å¯¼ï¼ˆå¼€å‘è€…æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼Œæ¯”å¦‚forå¾ªç¯ã€ifåˆ¤æ–­ç­‰ï¼‰</li>
</ul>
<p><strong>åœºæ™¯å’Œä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é€‚åˆåœºæ™¯ï¼šé€‚åˆç®€å•ã€æ­¥éª¤æ˜ç¡®çš„é€»è¾‘çš„åœºæ™¯</li>
<li>ä¼˜åŠ¿ï¼šç›´è§‚ã€å¯æ§æ€§å¼º</li>
<li>ç¼ºç‚¹ï¼šå¤æ‚é€»è¾‘ä¸‹ä»£ç å®¹æ˜“å†—é•¿ï¼ˆå¦‚å¤šå±‚åµŒå¥—å¾ªç¯ï¼‰</li>
</ul>
<h3 data-id="heading-1">ç±»æ¯”ç‚’è¥¿çº¢æŸ¿ç‚’é¸¡è›‹</h3>
<p>ä½ æ‰‹é‡Œæœ‰ä¸€ä»½ã€Šç•ªèŒ„ç‚’è›‹ç›–æµ‡é¥­æ­¥éª¤è¯´æ˜ä¹¦ã€‹ï¼Œä¸¥æ ¼æŒ‰æ­¥éª¤æ‰§è¡Œï¼š</p>
<ul>
<li>æ‹¿å‡º 2 ä¸ªç•ªèŒ„ï¼Œæ´—å‡€ï¼Œåˆ‡æˆå°å—ï¼ˆæ˜ç¡® â€œæ‹¿ã€æ´—ã€åˆ‡â€ çš„åŠ¨ä½œï¼‰ï¼›</li>
<li>æ‹¿å‡º 2 ä¸ªé¸¡è›‹ï¼Œæ‰“å…¥ç¢—ä¸­ï¼Œç”¨ç­·å­æ…æ‹Œå‡åŒ€ï¼ˆæ˜ç¡® â€œæ‰“ã€æ…â€ çš„åŠ¨ä½œï¼‰ï¼›
å¼€ç«ï¼Œé”…çƒ§çƒ­åå€’å…¥ 2 å‹ºæ²¹ï¼ˆæ˜ç¡® â€œå¼€ç«ã€åŠ çƒ­ã€å€’æ²¹â€ï¼‰ï¼›</li>
<li>å€’å…¥é¸¡è›‹æ¶²ï¼Œç¿»ç‚’è‡³å‡å›ºï¼Œç››å‡ºå¤‡ç”¨ï¼ˆæ˜ç¡® â€œå€’ã€ç‚’ã€ç››â€ï¼‰ï¼›</li>
<li>é”…é‡Œå†å€’ 1 å‹ºæ²¹ï¼Œæ”¾å…¥ç•ªèŒ„å—ï¼Œç¿»ç‚’å‡ºæ±ï¼ˆæ˜ç¡® â€œå€’ã€æ”¾ã€ç‚’â€ï¼‰ï¼›</li>
<li>å€’å…¥ç‚’å¥½çš„é¸¡è›‹ï¼ŒåŠ  1 å‹ºç›ã€åŠå‹ºç³–ï¼Œç¿»ç‚’å‡åŒ€ï¼ˆæ˜ç¡® â€œå€’ã€åŠ ã€ç‚’â€ï¼‰ï¼›</li>
<li>æ‹¿å‡ºä¸€ç¢—ç±³é¥­ï¼Œç››åœ¨ç›˜å­é‡Œï¼ŒæŠŠç‚’å¥½çš„ç•ªèŒ„ç‚’è›‹æµ‡åœ¨ç±³é¥­ä¸Šï¼ˆæ˜ç¡® â€œæ‹¿ã€ç››ã€æµ‡â€ï¼‰ã€‚</li>
</ul>
<p>ä½ è‡ªå·±æ§åˆ¶æ•´ä¸ªæµç¨‹ï¼Œè‡ªå·±æŠŠæ§æ¯ä¸€æ­¥çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p>ä½†æ˜¯æ³¨æ„ï¼Œæ¯ä¸ªæ­¥éª¤æœ‰å¯èƒ½ä¼šæ¶‰åŠå…¶ä»–çš„èŒƒå¼ã€‚</p>
<h2 data-id="heading-2">å£°æ˜å¼ç¼–ç¨‹ï¼ˆDeclarative Programmingï¼‰ - å…³æ³¨"åšä»€ä¹ˆ"ï¼ˆWhatï¼‰</h2>
<p><strong>ç‰¹ç‚¹</strong>ï¼šå…¶å®è¿™ä¸ªæ˜¯ç›¸å¯¹äºå‘½ä»¤å¼ç¼–ç¨‹æ¥è¯´çš„ï¼Œå‘½ä»¤å¼ç¼–ç¨‹æ˜¯å…³æ³¨"å¦‚ä½•åš"ï¼ˆHowï¼‰ï¼Œæè¿°å…·ä½“çš„å®ç°æ­¥éª¤ï¼Œè€Œå£°æ˜å¼ç¼–ç¨‹æ˜¯å…³æ³¨"åšä»€ä¹ˆ"ï¼ˆWhatï¼‰ï¼Œå¼€å‘è€…åªéœ€æè¿° â€œæƒ³è¦çš„ç»“æœ / ç›®æ ‡â€ï¼Œè€Œæ— éœ€ç¼–å†™å…·ä½“çš„æ‰§è¡Œæ­¥éª¤ã€æ§åˆ¶æµï¼ˆå¾ªç¯ã€åˆ†æ”¯ï¼‰æˆ–æ‰‹åŠ¨ç®¡ç†çŠ¶æ€ï¼Œå…·ä½“çš„å®ç°ç»†èŠ‚ï¼ˆå¦‚éå†ã€çŠ¶æ€ç»´æŠ¤ï¼‰ç”±è¯­è¨€æˆ–æ¡†æ¶<strong>è‡ªåŠ¨</strong>å®Œæˆã€‚</p>
<p>çœ‹ä¸‹åŒæ ·çš„åŠŸèƒ½ï¼Œä½¿ç”¨å£°æ˜å¼ç¼–ç¨‹çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">isEven</span> = (<span class="hljs-params">n</span>) =&gt; n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = (<span class="hljs-params">n</span>) =&gt; n * n;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sum</span> = (<span class="hljs-params">acc, curr</span>) =&gt; acc + curr;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sumOfEvenSquares</span> = (<span class="hljs-params">numbers</span>) =&gt;
  numbers
    .<span class="hljs-title function_">filter</span>(isEven) <span class="hljs-comment">// æè¿°ï¼šç­›é€‰å¶æ•°ï¼ˆä¸å…³å¿ƒå¦‚ä½•éå†ï¼‰</span>
    .<span class="hljs-title function_">map</span>(square) <span class="hljs-comment">// æè¿°ï¼šè®¡ç®—å¹³æ–¹ï¼ˆä¸å…³å¿ƒå¦‚ä½•å¤„ç†ï¼‰</span>
    .<span class="hljs-title function_">reduce</span>(sum, <span class="hljs-number">0</span>); <span class="hljs-comment">// æè¿°ï¼šç´¯åŠ æ±‚å’Œï¼ˆä¸å…³å¿ƒå¦‚ä½•ç»´æŠ¤çŠ¶æ€ï¼‰</span>

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">sumOfEvenSquares</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])); <span class="hljs-comment">// 56</span>
</code></pre>
<p>çœ‹ç€å¥½åƒä¹Ÿæ˜¯ä¸€æ­¥æ­¥çš„ï¼Œä½†è¿™äº› â€œæ­¥éª¤â€ æ˜¯ â€œç›®æ ‡çš„åˆ†è§£â€ï¼Œè€Œé â€œæ‰§è¡Œçš„æŒ‡ä»¤â€ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šæˆ‘éœ€è¦â€œç­›é€‰å‡ºå¶æ•°â€è¿™ä¸ªç»“æœï¼Œè€Œä¸æ˜¯å…·ä½“çš„å¦‚ä½•éå†ã€å¦‚ä½•åˆ¤æ–­å¶æ•°ã€‚
ç¬¬äºŒæ­¥ï¼šæˆ‘éœ€è¦â€œè®¡ç®—å¹³æ–¹â€è¿™ä¸ªç»“æœï¼Œè€Œä¸æ˜¯å…·ä½“çš„å¦‚ä½•è®¡ç®—å¹³æ–¹ã€‚
ç¬¬ä¸‰æ­¥ï¼šæˆ‘éœ€è¦â€œç´¯åŠ æ±‚å’Œâ€è¿™ä¸ªç»“æœï¼Œè€Œä¸æ˜¯å…·ä½“çš„å¦‚ä½•ç´¯åŠ æ±‚å’Œã€‚</p>
<p>æ¯ä¸€æ­¥éƒ½æ˜¯å¯¹ â€œä¸­é—´ç»“æœâ€ çš„æè¿°ï¼Œè€Œé â€œå¦‚ä½•å®ç°è¿™ä¸ªä¸­é—´ç»“æœâ€ çš„æŒ‡ä»¤ã€‚ä½ ä¸éœ€è¦å‘Šè¯‰è®¡ç®—æœº â€œå¦‚ä½•ç­›é€‰å¶æ•°â€ï¼ˆæ˜¯å¦ç”¨ for å¾ªç¯ã€forEach è¿˜æ˜¯å…¶ä»–æ–¹å¼ï¼‰ï¼Œfilter å†…éƒ¨å·²ç»å°è£…äº†éå†é€»è¾‘ã€‚
åŒæ ·ï¼Œä½ <strong>ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤</strong> â€œç­›é€‰åçš„æ•°ç»„â€â€œå¹³æ–¹åçš„æ•°ç»„â€ è¿™äº›ä¸­é—´çŠ¶æ€ï¼Œå®ƒä»¬ç”±å‡½æ•°è‡ªåŠ¨ç”Ÿæˆå¹¶ä¼ é€’ã€‚ä¹Ÿå°±æ˜¯åº•å±‚çš„éå†å’ŒçŠ¶æ€ç»´æŠ¤å®Œå…¨å°è£…ã€‚</p>
<p>çœ‹ä¸‹sqlçš„ä¾‹å­åŠ æ·±ç†è§£ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç›®æ ‡ï¼šæŸ¥è¯¢â€œå¹´é¾„å¤§äº18çš„ç”¨æˆ·å§“åâ€ï¼Œä¸å…³å¿ƒæ•°æ®åº“å¦‚ä½•æ£€ç´¢</span>
<span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">18</span>;
<span class="hljs-comment">-- å‘½ä»¤å¼æ€è·¯ä¼šæ˜¯ï¼šâ€œæ‰“å¼€æ•°æ®åº“â†’éå†æ‰€æœ‰ç”¨æˆ·â†’åˆ¤æ–­å¹´é¾„â†’æ”¶é›†å§“åâ€ï¼Œè€Œ SQL ç›´æ¥æè¿°ç»“æœã€‚</span>
</code></pre>
<p><strong>åœºæ™¯å’Œä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é€‚åˆåœºæ™¯ï¼šæ•°æ®æŸ¥è¯¢ã€å¤æ‚è®¡ç®—é€»è¾‘</li>
<li>ä¼˜åŠ¿ï¼šå¯è¯»æ€§é«˜ã€å¯ç»´æŠ¤æ€§å¼ºã€æŠ½è±¡ç¨‹åº¦é«˜</li>
<li>ç¼ºç‚¹ï¼šå¯èƒ½äº§ç”Ÿä¸­é—´æ•°ç»„ï¼Œå†…å­˜å ç”¨è¾ƒå¤§</li>
</ul>
<hr/>
<p>æ³¨æ„ï¼Œå£°æ˜å¼æ˜¯ä¸€ä¸ª â€œå¤§èŒƒå¼â€ï¼ŒåŒ…å«å¤šä¸ªå…·ä½“çš„å­èŒƒå¼ï¼Œè¦†ç›–ä¸åŒåœºæ™¯ï¼Œå¸¸è§çš„å­èŒƒå¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰ï¼šç”¨çº¯å‡½æ•°ç»„åˆæè¿°è®¡ç®—ï¼Œæ— å‰¯ä½œç”¨ã€ä¸å¯å˜æ•°æ®ï¼ˆå¦‚ JavaScript çš„ filter+map+reduceã€Haskellï¼‰ã€‚</li>
<li>é€»è¾‘ç¼–ç¨‹ï¼šé€šè¿‡ â€œäº‹å® + è§„åˆ™â€ æ¨å¯¼ç»“æœï¼Œè€Œéæ­¥éª¤ï¼ˆå¦‚ Prologï¼‰ã€‚</li>
<li>æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼šæè¿°éœ€è¦çš„æ•°æ®ï¼Œè€Œéè·å–æ•°æ®çš„è¿‡ç¨‹ï¼ˆå¦‚ SQLã€GraphQLï¼‰ã€‚</li>
<li>å“åº”å¼ç¼–ç¨‹ï¼šåŸºäºæ•°æ®æµå’Œå˜åŒ–ä¼ æ’­å¤„ç†å¼‚æ­¥ï¼ˆå¦‚ RxJSï¼‰ã€‚</li>
<li>æ ‡è®°è¯­è¨€ï¼šæè¿° â€œå†…å®¹ç»“æ„â€ï¼Œè€Œé â€œæ¸²æŸ“æ­¥éª¤â€ï¼ˆå¦‚ HTMLã€XMLï¼‰ã€‚</li>
</ul>
<p>è¿™äº›å­èŒƒå¼çš„å…±æ€§æ˜¯ â€œå£°æ˜ç›®æ ‡ï¼Œä¸å†™æ­¥éª¤â€ï¼Œå·®å¼‚æ˜¯ â€œç›®æ ‡ç±»å‹ä¸åŒâ€ï¼ˆè®¡ç®—ã€æ¨ç†ã€æ•°æ®ã€å¼‚æ­¥ã€ç»“æ„ï¼‰ã€‚</p>
<h3 data-id="heading-3">ç±»æ¯”å»é¤é¦†ç‚¹ç‚’è¥¿çº¢æŸ¿ç‚’é¸¡è›‹</h3>
<p>ä½ å»é¤é¦†ï¼Œç›´æ¥è·ŸæœåŠ¡å‘˜è¯´ï¼šâ€œæˆ‘è¦ä¸€ä»½ç•ªèŒ„ç‚’è›‹ç›–æµ‡é¥­ï¼Œç±³é¥­è¦è½¯ç¡¬é€‚ä¸­ï¼Œç•ªèŒ„è¦ç‚’å‡ºæ±ï¼Œå°‘ç›å°‘ç³–ã€‚â€
ä½ å®Œå…¨ä¸ç”¨ç®¡ï¼šå¨å¸ˆæ˜¯å…ˆç‚’é¸¡è›‹è¿˜æ˜¯å…ˆç‚’ç•ªèŒ„ã€ç”¨å¤šå°‘æ²¹ã€ç‚’å¤šä¹… â€”â€” åªéœ€è¦å‘Šè¯‰ â€œæœ€ç»ˆéœ€æ±‚â€ï¼Œå¨å¸ˆä¼šè‡ªå·±å¤„ç†æ‰€æœ‰æ­¥éª¤ã€‚</p>
<h2 data-id="heading-4">å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰- å‡½æ•°</h2>
<p><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ç§ä»¥ â€œå‡½æ•°â€ ä¸ºæ ¸å¿ƒçš„å£°æ˜å¼ç¼–ç¨‹èŒƒå¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†è®¡ç®—è¿‡ç¨‹è§†ä¸º â€œçº¯å‡½æ•°çš„ç»„åˆâ€ï¼Œå¼ºè°ƒæ— å‰¯ä½œç”¨ã€ä¸å¯å˜æ•°æ®ã€å‡½æ•°æ˜¯ â€œç¬¬ä¸€å…¬æ°‘â€ ç­‰ç‰¹æ€§ï¼Œé€šè¿‡å‡½æ•°çš„<strong>åµŒå¥—å’Œç»„åˆ</strong>æ¥è§£å†³é—®é¢˜ï¼Œè€Œ<strong>éé€šè¿‡ä¿®æ”¹çŠ¶æ€</strong>æˆ–<strong>æ‰§è¡Œæ­¥éª¤</strong>ã€‚</p>
<p>æ³¨æ„ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯å£°æ˜å¼ç¼–ç¨‹çš„å­èŒƒå¼ï¼Œæ‰€ä»¥å¦‚æœæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ï¼Œä¸€å®šå±äºå£°æ˜å¼ç¼–ç¨‹ã€‚åè¿‡æ¥ä¸ä¸€å®šæˆç«‹ã€‚</p>
<p>æ‰€ä»¥å£°æ˜å¼ç¼–ç¨‹é‡Œé¢çš„æ±‚å’Œä»£ç ï¼Œä¹Ÿå±äºå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<p><strong>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ul>
<li>çº¯å‡½æ•°ï¼ˆç›¸åŒè¾“å…¥å¿…äº§ç›¸åŒè¾“å‡º;ä¸ä¿®æ”¹å‡½æ•°å¤–éƒ¨çš„ä»»ä½•çŠ¶æ€ï¼ˆå¦‚å…¨å±€å˜é‡ã€å‚æ•°å¯¹è±¡ã€DOM ç­‰ï¼‰ï¼Œä¹Ÿä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ï¼‰</li>
<li>ä¸å¯å˜æ•°æ®ï¼ˆæ•°æ®ä¸€æ—¦åˆ›å»ºå°±ä¸å¯ä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡åˆ›å»ºæ–°çš„æ•°æ®æ¥ä¿®æ”¹ï¼‰</li>
<li>å‡½æ•°æ˜¯ â€œç¬¬ä¸€å…¬æ°‘â€ï¼ˆå‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€å¯ä»¥ä½œä¸ºè¿”å›å€¼è¿”å›ã€å¯ä»¥ä½œä¸ºå˜é‡èµ‹å€¼ï¼‰</li>
</ul>
<p><strong>å‡½æ•°å¼ç¼–ç¨‹çš„å¸¸è§å·¥å…·</strong>ï¼š</p>
<ul>
<li>é«˜é˜¶å‡½æ•°ï¼ˆå¦‚ mapã€filterã€reduceã€flatMapç­‰ï¼Œç”¨äºç»„åˆæ•°æ®å¤„ç†é€»è¾‘ï¼‰</li>
<li>æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼Œå°†å¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°çš„è¿‡ç¨‹ï¼Œä¾¿äºå¤ç”¨å’Œç»„åˆï¼‰</li>
<li>å‡½æ•°ç»„åˆï¼ˆcomposeï¼Œå°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºä»å³åˆ°å·¦æˆ–è€…ä»å³åˆ°å·¦ï¼‰</li>
</ul>
<p><strong>åœºæ™¯å’Œä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é€‚åˆåœºæ™¯ï¼šé€‚åˆæ•°æ®å¤„ç†ã€é€»è¾‘å¤„ç†ã€å‡½æ•°ç»„åˆçš„åœºæ™¯</li>
<li>ä¼˜åŠ¿ï¼šä»£ç å¯æµ‹è¯•æ€§å¼ºã€æ˜“äºå¹¶è¡ŒåŒ–ã€å‡½æ•°å¯å¤ç”¨ã€å‡å°‘ bug</li>
<li>ç¼ºç‚¹ï¼šå­¦ä¹ æ›²çº¿é™¡å³­ã€å¯èƒ½äº§ç”Ÿæ€§èƒ½å¼€é”€ã€ä¸é€‚åˆæ‰€æœ‰åœºæ™¯</li>
</ul>
<h3 data-id="heading-5">æ‹†è§£Reactçš„æ ¸å¿ƒè®¾è®¡ï¼ŒåŠ æ·±å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£</h3>
<p>Reactå¹¶é â€œçº¯å‡½æ•°å¼æ¡†æ¶â€ï¼Œè€Œæ˜¯é€‰æ‹©æ€§å¸æ”¶äº†å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰çš„æ ¸å¿ƒæ€æƒ³ï¼Œå¹¶ç»“åˆå‰ç«¯å¼€å‘çš„å®é™…åœºæ™¯ï¼ˆå¦‚ UI çŠ¶æ€ç®¡ç†ã€ç»„ä»¶å¤ç”¨ã€å‰¯ä½œç”¨å¤„ç†ï¼‰è¿›è¡Œè½åœ°ã€‚å…¶æ ¸å¿ƒç›®çš„æ˜¯ï¼šé€šè¿‡ FP çš„ç‰¹æ€§ï¼ˆçº¯å‡½æ•°ã€ä¸å¯å˜æ•°æ®ã€æ— å‰¯ä½œç”¨ï¼‰è§£å†³å‰ç«¯å¼€å‘çš„ç»å…¸ç—›ç‚¹ï¼ˆå¦‚çŠ¶æ€æ··ä¹±ã€ç»„ä»¶å¤ç”¨å¤æ‚ã€è°ƒè¯•å›°éš¾ï¼‰ï¼Œè®©ä»£ç æ›´å¯é¢„æµ‹ã€å¯ç»´æŠ¤ã€‚</p>
<p>ä» React çš„æ ¸å¿ƒè®¾è®¡å’Œå®è·µå‡ºå‘ï¼Œæ‹†è§£å®ƒå¦‚ä½• â€œå¸æ”¶ FP æ€æƒ³â€ï¼Œä»è€ŒåŠ æ·±å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£ã€‚</p>
<h4 data-id="heading-6">ç”¨ â€œçº¯å‡½æ•°ç»„ä»¶â€ æ›¿ä»£ â€œç±»ç»„ä»¶â€ï¼ˆReact 16.8+ Hooks æ—¶ä»£ï¼‰</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯ â€œçº¯å‡½æ•°â€ï¼ŒReact æŠŠè¿™ä¸ªæ€æƒ³è½åœ°ä¸º å‡½æ•°ç»„ä»¶ï¼ˆFunction Componentï¼‰+ Hooksï¼Œæ›¿ä»£äº†æ—©æœŸçš„ç±»ç»„ä»¶ï¼ˆClass Componentï¼‰ã€‚</p>
<p>React å‡½æ•°ç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ª â€œè¾“å…¥ â†’ è¾“å‡ºâ€ çš„çº¯å‡½æ•°ï¼š</p>
<ul>
<li>è¾“å…¥ï¼špropsï¼ˆçˆ¶ç»„ä»¶ä¼ é€’çš„å‚æ•°ï¼‰+ stateï¼ˆç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œé€šè¿‡ Hooks ç®¡ç†ï¼‰ï¼›</li>
<li>è¾“å‡ºï¼šUI æè¿°ï¼ˆJSXï¼‰ï¼›</li>
<li>æ— å‰¯ä½œç”¨ï¼ˆç†æƒ³çŠ¶æ€ï¼‰ï¼šç»„ä»¶æœ¬èº«åªè´Ÿè´£ â€œæ ¹æ®è¾“å…¥æ¸²æŸ“ UIâ€ï¼Œä¸ç›´æ¥æ“ä½œ DOMã€ä¸ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ã€ä¸å‘èµ·ç½‘ç»œè¯·æ±‚ï¼ˆè¿™äº›éƒ½å±äºå‰¯ä½œç”¨ï¼Œäº¤ç»™ä¸“é—¨çš„ Hooks å¤„ç†ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// çº¯å‡½æ•°ç»„ä»¶ï¼šè¾“å…¥ propsï¼ˆnameï¼‰ï¼Œè¾“å‡º UIï¼Œæ— å‰¯ä½œç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ name }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-comment">// è°ƒç”¨æ—¶ï¼Œç›¸åŒè¾“å…¥å¿…ç„¶äº§ç”Ÿç›¸åŒè¾“å‡ºï¼ˆå¯é¢„æµ‹ï¼‰</span>
&lt;<span class="hljs-title class_">Greeting</span> name=<span class="hljs-string">"å°æ˜"</span> /&gt; <span class="hljs-comment">// è¾“å‡º &lt;h1&gt;Hello, å°æ˜!&lt;/h1&gt;</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å°çº¢"</span> /&gt;</span></span> <span class="hljs-comment">// è¾“å‡º &lt;h1&gt;Hello, å°çº¢!&lt;/h1&gt;</span>
</code></pre>
<p>ä¹‹å‰çš„ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// ç±»ç»„ä»¶ï¼šä¾èµ–å¯å˜çš„ thisï¼ŒçŠ¶æ€ä¿®æ”¹éšå«å‰¯ä½œç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {this.props.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>; <span class="hljs-comment">// this.props æ˜¯å¯å˜çš„ï¼ˆçˆ¶ç»„ä»¶æ›´æ–°æ—¶å˜åŒ–ï¼‰</span>
  }
}
</code></pre>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå‡½æ•°ç»„ä»¶çš„ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>å¯é¢„æµ‹æ€§ï¼šçº¯å‡½æ•°ç»„ä»¶ â€œè¾“å…¥å®šï¼Œè¾“å‡ºå®šâ€ï¼Œæ— éœ€æ‹…å¿ƒå†…éƒ¨éšè—çŠ¶æ€å¯¼è‡´çš„ UI é”™ä¹±ï¼Œè°ƒè¯•æ—¶åªéœ€å…³æ³¨ props å’Œ stateï¼›</li>
<li>ç®€æ´æ€§ï¼šæ‘†è„± this ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå¦‚ componentDidMountï¼‰çš„å¤æ‚é€»è¾‘ï¼Œä»£ç æ›´çŸ­ã€å¯è¯»æ€§æ›´é«˜ï¼›</li>
<li>å¤ç”¨æ€§ï¼šçº¯å‡½æ•°ç»„ä»¶æ›´å®¹æ˜“é€šè¿‡ç»„åˆï¼ˆè€Œéç»§æ‰¿ï¼‰å¤ç”¨ï¼ˆå¦‚è‡ªå®šä¹‰ Hooksï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">â€œä¸å¯å˜æ•°æ®â€ ç®¡ç†çŠ¶æ€ï¼ˆé¿å…éšæ€§å‰¯ä½œç”¨ï¼‰</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒ â€œä¸å¯å˜æ•°æ®â€ï¼ˆæ•°æ®åˆ›å»ºåä¸ä¿®æ”¹ï¼Œè€Œæ˜¯è¿”å›æ–°å‰¯æœ¬ï¼‰ï¼ŒReact æŠŠè¿™ä¸ªæ€æƒ³è´¯ç©¿åˆ° çŠ¶æ€æ›´æ–°ï¼ˆsetState/useStateï¼‰ å’Œ Props ä¼ é€’ ä¸­ã€‚</p>
<p>React çš„çŠ¶æ€ï¼ˆstateï¼‰æœ¬è´¨æ˜¯ â€œä¸å¯å˜çš„â€ï¼šä½ ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡ / æ•°ç»„ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„å‰¯æœ¬ï¼ŒReact æ‰ä¼šæ„ŸçŸ¥åˆ°çŠ¶æ€å˜åŒ–å¹¶é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€ï¼štodo åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰</span>
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å­¦ä¹  FP'</span> }]);

  <span class="hljs-comment">// æ·»åŠ æ–° todoï¼šè¿”å›æ–°æ•°ç»„ï¼ˆä¸ä¿®æ”¹åŸæ•°ç»„ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
    <span class="hljs-keyword">const</span> newTodo = { <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), text };
    <span class="hljs-comment">// æ­£ç¡®ï¼šç”¨æ‰©å±•è¿ç®—ç¬¦åˆ›å»ºæ–°æ•°ç»„ï¼ˆä¸å¯å˜ï¼‰</span>
    <span class="hljs-title function_">setTodos</span>([...todos, newTodo]);
    <span class="hljs-comment">// é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼ˆReact æ— æ³•æ„ŸçŸ¥å˜åŒ–ï¼‰</span>
    <span class="hljs-comment">// todos.push(newTodo);</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {todos.map((todo) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.text}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> addTodo('å­¦ä¹  React FP')}&gt;æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é¿å…éšæ€§å‰¯ä½œç”¨ï¼šç›´æ¥ä¿®æ”¹åŸçŠ¶æ€ä¼šå¯¼è‡´ â€œçŠ¶æ€å˜åŒ–ä¸å¯è¿½è¸ªâ€ï¼ˆæ¯”å¦‚ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ã€è°ä¿®æ”¹äº†çŠ¶æ€ï¼‰ï¼Œçº¯å‡½æ•°ç»„ä»¶çš„ â€œè¾“å…¥ â†’ è¾“å‡ºâ€ é€»è¾‘è¢«æ‰“ç ´ï¼›</li>
<li>React æ¸²æŸ“ä¼˜åŒ–ï¼šReact é€šè¿‡ â€œæµ…æ¯”è¾ƒâ€ åˆ¤æ–­çŠ¶æ€ / Props æ˜¯å¦å˜åŒ–ï¼ˆæ¯”å¦‚æ¯”è¾ƒæ•°ç»„å¼•ç”¨æ˜¯å¦æ”¹å˜ï¼‰ï¼Œå¦‚æœç›´æ¥ä¿®æ”¹åŸæ•°æ®ï¼Œå¼•ç”¨ä¸å˜ï¼ŒReact ä¼šè¯¯ä»¥ä¸ºçŠ¶æ€æ²¡å˜åŒ–ï¼Œä¸é‡æ–°æ¸²æŸ“ï¼›</li>
<li>ç¬¦åˆ FP æ€æƒ³ï¼šä¸å¯å˜æ•°æ®è®©çŠ¶æ€å˜åŒ– â€œå¯é¢„æµ‹ã€å¯å›æº¯â€ï¼Œæ¯”å¦‚ Reduxï¼ˆReact ç”Ÿæ€çš„çŠ¶æ€ç®¡ç†åº“ï¼‰çš„æ ¸å¿ƒå°±æ˜¯ â€œä¸å¯å˜çŠ¶æ€æ ‘â€ã€‚</li>
</ul>
<h4 data-id="heading-8">â€œå‰¯ä½œç”¨éš”ç¦»â€ï¼ˆç”¨ Hooks åˆ†ç¦»çº¯é€»è¾‘ä¸å‰¯ä½œç”¨ï¼‰</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒ â€œçº¯å‡½æ•°æ— å‰¯ä½œç”¨â€ï¼Œä½†å‰ç«¯å¼€å‘æ— æ³•é¿å…å‰¯ä½œç”¨ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€DOM æ“ä½œã€å®šæ—¶å™¨ï¼‰ã€‚React æ²¡æœ‰ç¦æ­¢å‰¯ä½œç”¨ï¼Œè€Œæ˜¯é€šè¿‡ Hooksï¼ˆå¦‚ useEffectã€useCallbackï¼‰ å°†å‰¯ä½œç”¨ä¸çº¯æ¸²æŸ“é€»è¾‘ â€œéš”ç¦»â€ï¼Œè®©ç»„ä»¶ä¸»ä½“ä¿æŒçº¯å‡½æ•°ç‰¹æ€§ï¼ˆç»„ä»¶ä¸»é¢˜ï¼ˆå‡½æ•°æ‰§è¡Œéƒ¨åˆ†ï¼‰åªè´Ÿè´£ â€œæ ¹æ®çŠ¶æ€æ¸²æŸ“ UIâ€ï¼ˆçº¯é€»è¾‘ï¼‰ï¼Œå‰¯ä½œç”¨ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€DOM æ“ä½œã€å®šæ—¶å™¨ï¼‰ç”±ä¸“é—¨çš„ Hooks å¤„ç†ï¼‰ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å‰¯ä½œç”¨ï¼šå‘èµ·ç½‘ç»œè¯·æ±‚ï¼ˆéš”ç¦»åœ¨ useEffect ä¸­ï¼‰</span>
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚æ˜¯å‰¯ä½œç”¨ï¼ˆä¾èµ–å¤–éƒ¨ç¯å¢ƒï¼Œæœ‰ä¸ç¡®å®šæ€§ï¼‰</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${userId}</span>`</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">setUser</span>(data));
  }, [userId]); <span class="hljs-comment">// ä¾èµ–é¡¹ï¼šåªæœ‰ userId å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨</span>

  <span class="hljs-comment">// ç»„ä»¶ä¸»ä½“ï¼šçº¯é€»è¾‘ï¼ˆæ ¹æ® user çŠ¶æ€æ¸²æŸ“ UIï¼‰</span>
  <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å§“åï¼š{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç»„ä»¶èŒè´£å•ä¸€ï¼šç»„ä»¶ä¸»ä½“åªå…³å¿ƒ â€œæ¸²æŸ“ UIâ€ï¼Œå‰¯ä½œç”¨äº¤ç»™ä¸“é—¨çš„ Hooks å¤„ç†ï¼Œç¬¦åˆ â€œå•ä¸€èŒè´£åŸåˆ™â€ï¼›</li>
<li>å‰¯ä½œç”¨å¯æ§åˆ¶ï¼šuseEffect é€šè¿‡ â€œä¾èµ–é¡¹æ•°ç»„â€ æ§åˆ¶å‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœºï¼ˆå¦‚ç»„ä»¶æŒ‚è½½æ—¶ã€ä¾èµ–å˜åŒ–æ—¶ï¼‰ï¼Œé¿å… â€œå‰¯ä½œç”¨æ³›æ»¥â€ï¼›</li>
<li>ç¬¦åˆ FP æ€æƒ³ï¼šçº¯å‡½æ•°è´Ÿè´£ â€œè®¡ç®—â€ï¼ˆæ¸²æŸ“ UIï¼‰ï¼Œå‰¯ä½œç”¨è´Ÿè´£ â€œä¸å¤–éƒ¨äº¤äº’â€ï¼Œä¸¤è€…åˆ†ç¦»ï¼Œä»£ç æ›´æ˜“ç»´æŠ¤ã€‚</li>
</ul>
<h4 data-id="heading-9">â€œå‡½æ•°ç»„åˆâ€ å®ç°ç»„ä»¶å¤ç”¨ï¼ˆæ›¿ä»£ç»§æ‰¿ï¼‰</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒ â€œç”¨å‡½æ•°ç»„åˆæ›¿ä»£ç»§æ‰¿â€ï¼ŒReact æŠŠè¿™ä¸ªæ€æƒ³è½åœ°ä¸º ç»„ä»¶ç»„åˆï¼ˆCompositionï¼‰ å’Œ è‡ªå®šä¹‰ Hooksï¼Œæ›¿ä»£äº†ç±»ç»„ä»¶çš„ç»§æ‰¿ï¼ˆå¦‚ extends React.Componentï¼‰ã€‚</p>
<p>ç»„ä»¶ç»„åˆï¼ˆCompositionï¼‰é€šè¿‡ â€œç»„ä»¶åµŒå¥—â€ å’Œ â€œProps ä¼ é€’â€ å®ç°å¤ç”¨ï¼Œè€Œéç»§æ‰¿ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é€šç”¨ç»„ä»¶ï¼šButtonï¼ˆçº¯å‡½æ•°ç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ children, onClick }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">red</span>' }} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä¸šåŠ¡ç»„ä»¶ï¼šLoginButtonï¼ˆç»„åˆ Button å®ç°å¤ç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•'</span>);
  <span class="hljs-comment">// ç»„åˆ Buttonï¼Œä¼ é€’ Propsï¼Œæ— éœ€ç»§æ‰¿</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>;
}

<span class="hljs-comment">// ä¸šåŠ¡ç»„ä»¶ï¼šLogoutButtonï¼ˆç»„åˆ Button å®ç°å¤ç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">LogoutButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€€å‡º'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogout}</span>&gt;</span>é€€å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>;
}
</code></pre>
<p>æŠŠå¯å¤ç”¨çš„é€»è¾‘ï¼ˆçº¯é€»è¾‘ + å‰¯ä½œç”¨ï¼‰å°è£…æˆè‡ªå®šä¹‰ Hooksï¼Œé€šè¿‡ â€œå‡½æ•°è°ƒç”¨â€ å¤ç”¨ï¼Œè€Œéç»„ä»¶ç»§æ‰¿ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// è‡ªå®šä¹‰ Hooksï¼šå°è£…â€œè·å–ç”¨æˆ·æ•°æ®â€çš„å¤ç”¨é€»è¾‘ï¼ˆçº¯é€»è¾‘ + å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useUser</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${userId}</span>`</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">setUser</span>(data));
  }, [userId]);
  <span class="hljs-keyword">return</span> user; <span class="hljs-comment">// è¿”å›ç»“æœï¼Œä¾›ç»„ä»¶ä½¿ç”¨</span>
}

<span class="hljs-comment">// ç»„ä»¶ Aï¼šå¤ç”¨ useUser é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfileA</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useUser</span>(userId); <span class="hljs-comment">// å‡½æ•°è°ƒç”¨ï¼Œå¤ç”¨é€»è¾‘</span>
  <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å§“åï¼š{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç»„ä»¶ Bï¼šå¤ç”¨ useUser é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserCard</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useUser</span>(userId); <span class="hljs-comment">// å‡½æ•°è°ƒç”¨ï¼Œå¤ç”¨é€»è¾‘</span>
  <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å¡ç‰‡ï¼š{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™æ ·çš„è®¾è®¡ä¼˜åŠ¿ï¼š</p>
<ul>
<li>çµæ´»æ€§æ›´é«˜ï¼šç»§æ‰¿ä¼šå¯¼è‡´ â€œç»„ä»¶è€¦åˆâ€ï¼ˆå­ç±»ä¾èµ–çˆ¶ç±»çš„å®ç°ï¼‰ï¼Œè€Œç»„åˆå’Œè‡ªå®šä¹‰ Hooks æ˜¯ â€œæ¾è€¦åˆâ€ï¼ˆç»„ä»¶ / é€»è¾‘é€šè¿‡å‚æ•°ä¼ é€’ï¼Œä¸ä¾èµ–å†…éƒ¨å®ç°ï¼‰ï¼›</li>
<li>ç¬¦åˆ FP æ€æƒ³ï¼šè‡ªå®šä¹‰ Hooks æœ¬è´¨æ˜¯ â€œå‡½æ•°ç»„åˆâ€ï¼ŒæŠŠå¤æ‚é€»è¾‘æ‹†è§£æˆå°çš„ã€å¯å¤ç”¨çš„å‡½æ•°ï¼Œä¸å‡½æ•°å¼ç¼–ç¨‹ â€œç”¨çº¯å‡½æ•°ç»„åˆæè¿°è®¡ç®—â€ çš„æ€æƒ³ä¸€è‡´ã€‚</li>
</ul>
<p><strong>æ€»ç»“ï¼šReact å¸æ”¶ FP æ€æƒ³çš„æ ¸å¿ƒä»·å€¼</strong>
React é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œä¸æ˜¯ä¸ºäº† â€œèµ¶æ½®æµâ€ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³å‰ç«¯å¼€å‘çš„å®é™…é—®é¢˜ï¼š</p>
<ul>
<li>å¯é¢„æµ‹æ€§ï¼šçº¯å‡½æ•°ç»„ä»¶ + ä¸å¯å˜æ•°æ®ï¼Œè®© UI æ¸²æŸ“ â€œè¾“å…¥å®šï¼Œè¾“å‡ºå®šâ€ï¼Œå‡å°‘çŠ¶æ€æ··ä¹±ï¼›</li>
<li>å¯ç»´æŠ¤æ€§ï¼šå‰¯ä½œç”¨éš”ç¦» + å‡½æ•°ç»„åˆï¼Œè®©ä»£ç èŒè´£æ¸…æ™°ã€æ˜“äºå¤ç”¨å’Œè°ƒè¯•ï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šä¸å¯å˜æ•°æ® + æµ…æ¯”è¾ƒï¼Œè®© React æ¸²æŸ“ä¼˜åŒ–æ›´é«˜æ•ˆï¼›</li>
<li>ç®€æ´æ€§ï¼šæ‘†è„±ç±»ç»„ä»¶çš„ this å’Œç”Ÿå‘½å‘¨æœŸï¼Œä»£ç æ›´çŸ­ã€å­¦ä¹ æˆæœ¬æ›´ä½ã€‚</li>
</ul>
<h2 data-id="heading-10">é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programmingï¼‰ - å¯¹è±¡</h2>
<p><strong>ç‰¹ç‚¹</strong>ï¼šä¸€ç§ä»¥ â€œå¯¹è±¡â€ ä¸ºæ ¸å¿ƒçš„ç¼–ç¨‹èŒƒå¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å°†ç°å®ä¸–ç•Œä¸­çš„å®ä½“æŠ½è±¡ä¸º â€œå¯¹è±¡â€â€”â€” æ¯ä¸ªå¯¹è±¡åŒ…å« â€œæè¿°å®ä½“çš„å±æ€§ï¼ˆæ•°æ®ï¼‰â€ å’Œ â€œå®ä½“èƒ½æ‰§è¡Œçš„è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰â€ï¼Œé€šè¿‡å¯¹è±¡é—´çš„äº¤äº’ï¼ˆè°ƒç”¨æ–¹æ³•ã€ä¼ é€’æ•°æ®ï¼‰å®Œæˆå¤æ‚åŠŸèƒ½ã€‚</p>
<p>ç®€å•è¯´ï¼ŒOOP å°±åƒ â€œæ­ç§¯æœ¨â€ï¼šæŠŠå¤æ‚ç³»ç»Ÿæ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„ â€œç§¯æœ¨å—ï¼ˆå¯¹è±¡ï¼‰â€ï¼Œæ¯ä¸ªç§¯æœ¨å—æœ‰è‡ªå·±çš„ â€œæ ·å­ï¼ˆå±æ€§ï¼‰â€ å’Œ â€œåŠŸèƒ½ï¼ˆæ–¹æ³•ï¼‰â€ï¼Œå†é€šè¿‡ç§¯æœ¨å—çš„ç»„åˆæ‹¼æ¥ï¼Œæ­å»ºå‡ºå®Œæ•´çš„ç³»ç»Ÿã€‚</p>
<p>ä»ç„¶æ˜¯æ±‚å’Œçš„ä¾‹å­ï¼Œç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ–¹å¼å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç±»æ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberProcessor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">numbers</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span> = numbers;
  }

  <span class="hljs-title function_">filterEven</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">square</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n * n);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">sum</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, n</span>) =&gt;</span> sum + n, <span class="hljs-number">0</span>);
  }

  <span class="hljs-title function_">sumOfEvenSquares</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberProcessor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>).<span class="hljs-title function_">filterEven</span>().<span class="hljs-title function_">square</span>().<span class="hljs-title function_">sum</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberProcessor</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(processor.<span class="hljs-title function_">sumOfEvenSquares</span>()); <span class="hljs-comment">// 56</span>

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨å¯¹è±¡å­—é¢é‡</span>
<span class="hljs-keyword">const</span> numberUtils = {
  <span class="hljs-attr">isEven</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>,
  <span class="hljs-attr">square</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n * n,
  <span class="hljs-attr">sum</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,

  <span class="hljs-title function_">sumOfEvenSquares</span>(<span class="hljs-params">numbers</span>) {
    <span class="hljs-keyword">return</span> numbers.<span class="hljs-title function_">filter</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEven</span>).<span class="hljs-title function_">map</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">square</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span>, <span class="hljs-number">0</span>);
  },
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numberUtils.<span class="hljs-title function_">sumOfEvenSquares</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])); <span class="hljs-comment">// 56</span>
</code></pre>
<p>å½“ç„¶ä¸€èˆ¬è®¡ç®—ï¼Œä¸ä¼šæƒ³åˆ°ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ–¹å¼å®ç°ï¼Œä½†è¿™é‡Œå°±ååº”äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ï¼šæŠŠä¸€åˆ‡ä¸œè¥¿éƒ½æŠ½è±¡ä¸ºå¯¹è±¡ã€‚</p>
<h3 data-id="heading-11">OOPçš„å››å¤§æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>å°è£…ï¼ˆEncapsulationï¼‰ï¼šå°†æ•°æ®ï¼ˆå±æ€§ï¼‰å’Œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰å°è£…åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„ â€œå¯¹è±¡â€ï¼Œå¯¹å¤–éšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ï¼›</li>
<li>ç»§æ‰¿ï¼ˆInheritanceï¼‰ï¼šé€šè¿‡ â€œç±»â€ å’Œ â€œå¯¹è±¡â€ çš„ç»§æ‰¿å…³ç³»ï¼Œå®ç°ä»£ç å¤ç”¨å’Œæ‰©å±•ï¼›</li>
<li>å¤šæ€ï¼ˆPolymorphismï¼‰ï¼šé€šè¿‡ â€œæ–¹æ³•é‡è½½â€ å’Œ â€œæ¥å£æŠ½è±¡â€ï¼Œå®ç° â€œåŒåä¸åŒå®ç°â€ çš„çµæ´»æ€§ï¼›</li>
<li>æŠ½è±¡ï¼ˆAbstractionï¼‰ï¼šé€šè¿‡ â€œæ¥å£â€ å’Œ â€œæŠ½è±¡ç±»â€ï¼Œå®ç° â€œé«˜å†…èšã€ä½è€¦åˆâ€ çš„æ¨¡å—åŒ–è®¾è®¡ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶ç±»ï¼šAnimal</span>
<span class="hljs-comment">// å°†getNameæ–¹æ³•å°è£…åœ¨çˆ¶ç±»ä¸­ï¼Œå¯¹å¤–éšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ï¼Œè¿™å°±æ˜¯å°è£…çš„ä½“ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>;
  }

  <span class="hljs-comment">// çˆ¶ç±»æ–¹æ³•ï¼ˆç»Ÿä¸€æ¥å£ï¼‰</span>
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŠ¨ç‰©å‘å‡ºå£°éŸ³'</span>);
  }
}

<span class="hljs-comment">// å­ç±»ï¼šDog ç»§æ‰¿äº†çˆ¶ç±»çš„getNameæ–¹æ³•ï¼Œè¿™å°±æ˜¯ç»§æ‰¿çš„ä½“ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-comment">// é‡å†™çˆ¶ç±»çš„makeSoundæ–¹æ³•ï¼Œè¿™å°±æ˜¯å¤šæ€çš„ä½“ç°</span>
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼šæ±ªæ±ªæ±ªï¼`</span>);
  }
}

<span class="hljs-comment">// å­ç±»ï¼šCatï¼ˆé‡å†™ makeSoundï¼‰ è¿™å°±æ˜¯å¤šæ€çš„ä½“ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼šå–µå–µå–µï¼`</span>);
  }
}

<span class="hljs-comment">// ç»Ÿä¸€è°ƒç”¨é€»è¾‘ï¼ˆä¸å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå­ç±»ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animalSound</span>(<span class="hljs-params">animal</span>) {
  <span class="hljs-comment">// è¿™å°±æ˜¯å¤šæ€çš„ä½“ç°ï¼Œä¸åŒå¯¹è±¡è°ƒç”¨åŒä¸€æ–¹æ³•ï¼Œç»“æœä¸åŒ</span>
  animal.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// åŒä¸€æ–¹æ³•è°ƒç”¨ï¼Œä¸åŒè¡Œä¸º</span>
}

<span class="hljs-comment">// å¤šæ€ä½“ç°ï¼šä¸åŒå¯¹è±¡è°ƒç”¨åŒä¸€æ–¹æ³•ï¼Œç»“æœä¸åŒ</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'æ—ºè´¢'</span>);
<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">'å’ªå®'</span>);
<span class="hljs-title function_">animalSound</span>(dog); <span class="hljs-comment">// æ—ºè´¢ï¼šæ±ªæ±ªæ±ªï¼</span>
<span class="hljs-title function_">animalSound</span>(cat); <span class="hljs-comment">// å’ªå®ï¼šå–µå–µå–µï¼</span>

<span class="hljs-comment">// æŠ½è±¡å°±æ˜¯ä½ æ€è€ƒåˆ°æ ¸å¿ƒçš„å±æ€§å’Œæ–¹æ³•ï¼Œä»€ä¹ˆé€‚åˆå°è£…æˆä¸€ä¸ªçˆ¶ç±»ï¼Œä»€ä¹ˆé€‚åˆå°è£…æˆä¸€ä¸ªå­ç±»ï¼Œè¿™å°±æ˜¯æŠ½è±¡çš„ä½“ç°</span>
</code></pre>
<h3 data-id="heading-12">OOPçš„é€‚ç”¨åœºæ™¯å’Œä¼˜åŠ£åŠ¿</h3>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„å¤æ‚å®ä½“ï¼ˆå¦‚ â€œç”¨æˆ·ã€è®¢å•ã€å•†å“â€ ç­‰ä¸šåŠ¡å¯¹è±¡ï¼‰ï¼›å¤§å‹å¤æ‚ç³»ç»Ÿï¼ˆå¦‚ç®¡ç†ç³»ç»Ÿã€æ¸¸æˆã€æ¡†æ¶ï¼‰ï¼Œéœ€è¦æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†å’Œå¤ç”¨</li>
<li>ä¼˜åŠ¿ï¼šå¯è¯»æ€§é«˜ï¼ˆä»£ç ç»“æ„è´´è¿‘ç°å®ä¸–ç•Œï¼‰ï¼Œæ˜“äºç»´æŠ¤å’Œæ‹“å±•ï¼ˆå†…éƒ¨å®ç°ç»†èŠ‚å¯¹å¤–éšè—ï¼Œç»§æ‰¿å’Œå¤šæ€è®©ä»£ç æ›´çµæ´»ï¼‰ï¼Œæ¨¡å—åŒ–æ¸…æ™°ï¼ˆé«˜å†…èšã€ä½è€¦åˆï¼‰</li>
<li>åŠ£åŠ¿ï¼šå¯èƒ½è¿‡åº¦è®¾è®¡ï¼ˆå¦‚æœä¸€ä¸ªç³»ç»Ÿå¾ˆå°ï¼Œå´è¦ä½¿ç”¨OOPï¼Œå¯èƒ½ä¼šè¿‡åº¦è®¾è®¡ï¼‰ï¼Œæ€§èƒ½å¼€é”€ï¼ˆç»§æ‰¿å’Œå¤šæ€ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼‰ï¼Œç»§æ‰¿å¯èƒ½å¯¼è‡´ç´§è€¦åˆï¼ˆå¦‚æœä¸€ä¸ªç³»ç»Ÿå¾ˆå¤§ï¼Œå´è¦ä½¿ç”¨OOPï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç è¿‡äºå¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ï¼‰</li>
</ul>
<h2 data-id="heading-13">èŒƒå¼å¯¹æ¯”æ€»ç»“</h2>



































<table><thead><tr><th>èŒƒå¼</th><th>å…³æ³¨ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>ä»£ç é£æ ¼</th></tr></thead><tbody><tr><td>å‘½ä»¤å¼</td><td>å¦‚ä½•åš</td><td>æ€§èƒ½æ•æ„Ÿã€åº•å±‚æ“ä½œ</td><td>å¾ªç¯ã€æ¡ä»¶è¯­å¥</td></tr><tr><td>å£°æ˜å¼</td><td>åšä»€ä¹ˆ</td><td>æ•°æ®å¤„ç†ã€UI æ„å»º</td><td>é“¾å¼è°ƒç”¨ã€è¡¨è¾¾å¼</td></tr><tr><td>å‡½æ•°å¼</td><td>å‡½æ•°ç»„åˆ</td><td>æ•°æ®å¤„ç†ã€æ•°å­¦è®¡ç®—</td><td>çº¯å‡½æ•°ã€ä¸å¯å˜æ•°æ®</td></tr><tr><td>é¢å‘å¯¹è±¡</td><td>å¯¹è±¡å’Œç±»</td><td>å¤§å‹ç³»ç»Ÿã€GUI åº”ç”¨</td><td>ç±»ã€ç»§æ‰¿ã€å°è£…</td></tr></tbody></table>
<h2 data-id="heading-14">å®é™…åº”ç”¨å»ºè®®</h2>
<p>å®é™…é¡¹ç›®ä¸­é€šå¸¸æ··åˆä½¿ç”¨å¤šç§èŒƒå¼ï¼Œä¸åŒåœºæ™¯é€‚åˆä¸åŒèŒƒå¼ã€‚</p>
<p>æ¥ä¸€ä¸ªç»¼åˆä½¿ç”¨çš„ä¾‹å­ï¼š
å‡è®¾éœ€å®ç°ä¸€ä¸ª â€œç”µå•†è®¢å•å¤„ç†æµç¨‹â€ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>å®šä¹‰è®¢å•å®ä½“ï¼ˆå«å•†å“ã€é‡‘é¢ã€çŠ¶æ€ç­‰ï¼‰ã€‚</li>
<li>ç­›é€‰ç¬¦åˆæ¡ä»¶çš„è®¢å•ï¼ˆå¦‚ â€œå·²ä»˜æ¬¾ä¸”é‡‘é¢&gt; 100 å…ƒâ€ï¼‰ã€‚</li>
<li>è®¡ç®—è®¢å•æ€»é‡‘é¢ï¼ˆå«æŠ˜æ‰£ï¼šæ»¡ 200 å‡ 20ï¼‰ã€‚</li>
<li>è¾“å‡ºå¤„ç†ç»“æœã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼šå®šä¹‰è®¢å•å®ä½“ï¼ˆå°è£…å±æ€§å’Œè¡Œä¸ºï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id, products, isPaid</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span> = products; <span class="hljs-comment">// å•†å“åˆ—è¡¨ï¼ˆ{name: string, price: number}ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPaid</span> = isPaid; <span class="hljs-comment">// æ˜¯å¦ä»˜æ¬¾</span>
  }

  <span class="hljs-comment">// è®¡ç®—è®¢å•åŸå§‹æ€»é‡‘é¢ï¼ˆå°è£…è¡Œä¸ºï¼‰</span>
  <span class="hljs-title function_">getTotalPrice</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, p</span>) =&gt;</span> sum + p.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>);
  }
}

<span class="hljs-comment">// 2. å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰ï¼šçº¯å‡½æ•°å¤„ç†æ•°æ®ï¼ˆä¸å¯å˜ã€æ— å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-comment">// çº¯å‡½æ•°ï¼šè®¡ç®—æŠ˜æ‰£åé‡‘é¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">calculateDiscount</span> = (<span class="hljs-params">total</span>) =&gt; (total &gt;= <span class="hljs-number">200</span> ? total - <span class="hljs-number">20</span> : total);

<span class="hljs-comment">// çº¯å‡½æ•°ï¼šç­›é€‰ç¬¦åˆæ¡ä»¶çš„è®¢å•ï¼ˆå·²ä»˜æ¬¾ä¸”åŸå§‹é‡‘é¢&gt;100ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">filterValidOrders</span> = (<span class="hljs-params">orders</span>) =&gt;
  orders.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">order</span>) =&gt;</span> order.<span class="hljs-property">isPaid</span> &amp;&amp; order.<span class="hljs-title function_">getTotalPrice</span>() &gt; <span class="hljs-number">100</span>);

<span class="hljs-comment">// 3. å£°æ˜å¼ç¼–ç¨‹ï¼šæè¿°ç›®æ ‡ï¼ˆç­›é€‰â†’è®¡ç®—æŠ˜æ‰£â†’æ±‡æ€»ï¼‰ï¼Œéšè—æ­¥éª¤</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">processOrders</span> = (<span class="hljs-params">orders</span>) =&gt;
  <span class="hljs-title function_">filterValidOrders</span>(orders)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">order</span>) =&gt;</span> ({
      <span class="hljs-attr">id</span>: order.<span class="hljs-property">id</span>,
      <span class="hljs-attr">originalPrice</span>: order.<span class="hljs-title function_">getTotalPrice</span>(),
      <span class="hljs-attr">discountedPrice</span>: <span class="hljs-title function_">calculateDiscount</span>(order.<span class="hljs-title function_">getTotalPrice</span>()),
    }))
    .<span class="hljs-title function_">reduce</span>(
      <span class="hljs-function">(<span class="hljs-params">summary, item</span>) =&gt;</span> {
        summary.<span class="hljs-property">totalOriginal</span> += item.<span class="hljs-property">originalPrice</span>;
        summary.<span class="hljs-property">totalDiscounted</span> += item.<span class="hljs-property">discountedPrice</span>;
        summary.<span class="hljs-property">details</span>.<span class="hljs-title function_">push</span>(item);
        <span class="hljs-keyword">return</span> summary;
      },
      { <span class="hljs-attr">totalOriginal</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">totalDiscounted</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">details</span>: [] },
    );

<span class="hljs-comment">// 4. å‘½ä»¤å¼ç¼–ç¨‹ï¼šæ‰§è¡Œæµç¨‹å¹¶è¾“å‡ºç»“æœï¼ˆæ˜¾å¼æ­¥éª¤ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–è®¢å•ï¼ˆå‘½ä»¤å¼æ­¥éª¤ï¼šåˆ›å»ºå¯¹è±¡ï¼‰</span>
  <span class="hljs-keyword">const</span> orders = [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-number">1</span>, [{ <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¹¦'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">50</span> }], <span class="hljs-literal">true</span>), <span class="hljs-comment">// é‡‘é¢50ï¼ˆä¸æ»¡è¶³&gt;100ï¼‰</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-number">2</span>, [{ <span class="hljs-attr">name</span>: <span class="hljs-string">'æ‰‹æœº'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">250</span> }], <span class="hljs-literal">true</span>), <span class="hljs-comment">// é‡‘é¢250ï¼ˆæ»¡è¶³ï¼‰</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-number">3</span>, [{ <span class="hljs-attr">name</span>: <span class="hljs-string">'è€³æœº'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">150</span> }], <span class="hljs-literal">false</span>), <span class="hljs-comment">// æœªä»˜æ¬¾ï¼ˆä¸æ»¡è¶³ï¼‰</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(
      <span class="hljs-number">4</span>,
      [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'é”®ç›˜'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'é¼ æ ‡'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">90</span> },
      ],
      <span class="hljs-literal">true</span>,
    ), <span class="hljs-comment">// é‡‘é¢210ï¼ˆæ»¡è¶³ï¼‰</span>
  ];

  <span class="hljs-comment">// å¤„ç†è®¢å•ï¼ˆè°ƒç”¨å£°æ˜å¼/å‡½æ•°å¼é€»è¾‘ï¼‰</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">processOrders</span>(orders);

  <span class="hljs-comment">// å‘½ä»¤å¼è¾“å‡ºï¼ˆæ˜¾å¼æ­¥éª¤ï¼šå¾ªç¯æ‰“å°ï¼‰</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ‰æ•ˆè®¢å•å¤„ç†ç»“æœï¼š'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; result.<span class="hljs-property">details</span>.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-comment">// å‘½ä»¤å¼å¾ªç¯</span>
    <span class="hljs-keyword">const</span> item = result.<span class="hljs-property">details</span>[i];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¢å•<span class="hljs-subst">${item.id}</span>ï¼šåŸä»·<span class="hljs-subst">${item.originalPrice}</span>å…ƒï¼ŒæŠ˜æ‰£å<span class="hljs-subst">${item.discountedPrice}</span>å…ƒ`</span>);
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»è®¡ï¼šåŸä»·<span class="hljs-subst">${result.totalOriginal}</span>å…ƒï¼ŒæŠ˜æ‰£å<span class="hljs-subst">${result.totalDiscounted}</span>å…ƒ`</span>);
}

<span class="hljs-comment">// æ‰§è¡Œä¸»å‡½æ•°</span>
<span class="hljs-title function_">main</span>();
</code></pre>
<p>main å‡½æ•°çš„æ ¸å¿ƒæ˜¯ â€œæµç¨‹æ§åˆ¶â€ï¼Œé€šè¿‡æ˜ç¡®çš„æ­¥éª¤ã€æ˜¾å¼çš„å¾ªç¯å’ŒæŒ‡ä»¤ï¼Œä¸€æ­¥æ­¥å¼•å¯¼è®¡ç®—æœºå®Œæˆ â€œä»åˆå§‹åŒ–åˆ°è¾“å‡ºâ€ çš„å…¨æµç¨‹ï¼Œå®Œå…¨ç¬¦åˆå‘½ä»¤å¼ç¼–ç¨‹ â€œå…³æ³¨å¦‚ä½•åšã€æ­¥éª¤åŒ–æ‰§è¡Œâ€ çš„æœ¬è´¨ã€‚</p>
<p>è™½ç„¶å†…éƒ¨è°ƒç”¨äº† processOrdersï¼ˆå£°æ˜å¼ + å‡½æ•°å¼ï¼‰ï¼Œä½†è¿™å¹¶ä¸å½±å“ main æœ¬èº«æ˜¯å‘½ä»¤å¼ â€”â€” ç›¸å½“äº â€œå‘½ä»¤å¼çš„æµç¨‹â€ ä¸­ï¼Œè°ƒç”¨äº†ä¸€ä¸ª â€œå£°æ˜å¼çš„å·¥å…·â€ æ¥å®ŒæˆæŸä¸ªå­ä»»åŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼å’Œæ™ºèƒ½ä½“æ¡†æ¶ï¼Œä½ ä¼šäº†ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571416207972483122</link>    <guid>https://juejin.cn/post/7571416207972483122</guid>    <pubDate>2025-11-12T07:58:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571416207972483122" data-draft-id="7571637614202667035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼å’Œæ™ºèƒ½ä½“æ¡†æ¶ï¼Œä½ ä¼šäº†ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T07:58:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼å’Œæ™ºèƒ½ä½“æ¡†æ¶ï¼Œä½ ä¼šäº†ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:58:43.000Z" title="Wed Nov 12 2025 07:58:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ–°é—»</h2>
<p>å…ˆæ’­æ”¾ä¸€æ¡æœ€æ–°æ–°é—»ï¼Œé€šä¹‰å›¢é˜Ÿå®˜å®£å¼€æºäº†ä¸¤ä¸ªæ™ºèƒ½ä½“<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-samples%2Ftree%2Fmain%2Falias" target="_blank" title="https://github.com/agentscope-ai/agentscope-samples/tree/main/alias" ref="nofollow noopener noreferrer"><strong>Alias-Agent</strong></a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-samples%2Ftree%2Fmain%2Fdata_juicer_agent" target="_blank" title="https://github.com/agentscope-ai/agentscope-samples/tree/main/data_juicer_agent" ref="nofollow noopener noreferrer"><strong>Data-Juicer Agent</strong></a>ã€‚</p>
<p><strong>Alias-Agent</strong>æä¾›äº†RaActï¼ŒPlannerï¼ŒDeepResearchä¸‰ç§æ¨¡å¼ï¼Œä»¥å®ç°çµæ´»çš„ä»»åŠ¡æ‰§è¡Œ <strong>ã€‚</strong></p>
<p><strong>DataJuicer</strong> æ™ºèƒ½ä½“æ˜¯ä¸€ä¸ªæ•°æ®ä¸“å‘˜ï¼Œç”±<strong>æ•°æ®å¤„ç†æ™ºèƒ½ä½“ï¼Œä»£ç å¼€å‘æ™ºèƒ½ä½“ï¼ŒMCP æ™ºèƒ½ä½“ï¼Œæ•°æ®åˆ†æä¸å¯è§†åŒ–æ™ºèƒ½ä½“ï¼Œé—®ç­”æ™ºèƒ½ä½“</strong>äº”ä¸ªæ™ºèƒ½ä½“ç»„æˆã€‚</p>
<p>ï»¿</p>
<p>çœ‹åˆ°è¿™é‡Œå·²ç»ç›¸å½“ç‚¸è£‚äº†ï¼å¯èƒ½å¾ˆå¤šä¼™ä¼´å¯¹æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„èŒƒå¼ä¸ç†Ÿæ‚‰ï¼Œè¿˜ä¸ç†è§£ReActã€Plannerã€åæ€å­å­è¿™äº›åè¯ã€‚é‚£ä½ ä»¬å°±æ¥å¯¹äº†åœ°æ–¹ï¼Œæˆ‘ç”¨æœ€å®¹æ˜“ç†è§£çš„æ–¹å¼å¸¦å¤§å®¶ä¸€èµ·çœ‹ä¸‹æ™ºèƒ½ä½“å†…éƒ¨æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32a2633e165549189d6271a17f8531a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=hg29fGuoPSTltE0t0GxuXhs3Uaw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>äº§å“åŒ–çš„æ™ºèƒ½ä½“</strong>ç”±å¤šAgentï¼Œåæ€ï¼Œè®¡åˆ’ï¼Œæ¨ç†ä¸è¡ŒåŠ¨ï¼Œè®°å¿†ï¼ŒRAGï¼Œå·¥å…·ï¼ŒMCPç»„æˆçš„ã€‚é¦–å…ˆèŠä¸‹â€œMulti-Agentâ€ï¼Œå®ƒéå¸¸å¥½ç©ï¼</p>
<p>ï»¿</p>
<h2 data-id="heading-1">äºŒã€Multi-Agent çš„7ç§è®¾è®¡æ¨¡å¼</h2>
<p>è¦è®©AIä»£æ›¿äººå·¥ä½œï¼Œç°é˜¶æ®µçš„å•ä½“æ™ºèƒ½ä½“ï¼ˆä»…é€šè¿‡ç³»ç»Ÿæç¤ºè¯èµ‹èƒ½çš„LLMï¼‰æ˜¯å¾ˆéš¾å®ç°çš„ã€‚æˆ‘ä»¬å¾ˆå¿«æ„è¯†åˆ°ï¼Œè¦æ„å»ºé«˜æ•ˆçš„ç³»ç»Ÿï¼Œéœ€è¦å¤šä¸ªä¸“ä¸šåŒ–æ™ºèƒ½ä½“ååŒå·¥ä½œã€è‡ªä¸»ç»„ç»‡ã€‚ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼ŒAI æ™ºèƒ½ä½“é¢†åŸŸå·²æ¶Œç°å‡ºå¤šç§æ¶æ„æ¨¡å¼ã€‚å¤šä¸ªæ™ºèƒ½ä½“ç»„æˆå®ç°çš„ï¼Œä¹Ÿå°±æ˜¯Multi-Agentï¼Œå‘å±•åˆ°ç°åœ¨æœ‰7ç§å®ç°æ–¹å¼ã€‚</p>
<p><strong>1. å·¥ä½œæµæ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b29e7d219a6481da1484711e561bf5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=Jca3%2BoFBwDHbwOb63iufFX8iWsw%3D" alt="" loading="lazy"/></p>
<p>ï»¿åœ¨ã€ŠAgentic Design Patternsã€‹ä¸­å«Prompt Chainingï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½é€æ­¥åœ°å®Œæˆè¾“å‡ºï¼Œæ¯”å¦‚ä¸€ä¸ªç”Ÿæˆä»£ç ï¼Œå¦ä¸€ä¸ªå®¡æ ¸ä»£ç ï¼Œç¬¬ä¸‰ä¸ªéƒ¨ç½²ä»£ç ã€‚æ¯ä¸€æ­¥çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€æ­¥çš„è¾“å…¥ã€‚è¿™ç§ä¿¡æ¯ä¼ é€’å»ºç«‹äº†ä¾èµ–é“¾ï¼Œå‰åºæ“ä½œçš„ä¸Šä¸‹æ–‡å’Œç»“æœä¼šå¼•å¯¼åç»­å¤„ç†ï¼Œä½¿ LLM èƒ½å¤Ÿåœ¨å‰ä¸€æ­¥åŸºç¡€ä¸Šä¸æ–­å®Œå–„ç†è§£ï¼Œé€æ­¥é€¼è¿‘ç›®æ ‡è§£ã€‚</p>
<p>ä»–éå¸¸é€‚åˆåº”ç”¨åœ¨å·¥ä½œæµè‡ªåŠ¨åŒ–ã€ETLå’Œå¤šæ­¥éª¤æ¨ç†pipelineåœºæ™¯ã€‚</p>
<p>ï»¿</p>
<p><strong>2. è·¯ç”±æ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/791058c930ea4255973f54b17b3291c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=yEK5nxow6lTOSq1BJzfB0CFtQVk%3D" alt="" loading="lazy"/></p>
<p>ï»¿è·¯ç”±æ¨¡å¼ä¸ºæ™ºèƒ½ä½“çš„æ“ä½œæ¡†æ¶å¼•å…¥äº†æ¡ä»¶é€»è¾‘ï¼Œä½¿å…¶ä»å›ºå®šæ‰§è¡Œè·¯å¾„è½¬å˜ä¸ºåŠ¨æ€è¯„ä¼°æ ‡å‡†ï¼Œä»ä¸€ç»„å¯èƒ½çš„åç»­åŠ¨ä½œä¸­è¿›è¡Œé€‰æ‹©çš„æ¨¡å¼ï¼Œä»è€Œå®ç°ä¸€å¥—æ›´çµæ´»ï¼Œå¹¶ä¸”å…·å¤‡ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ã€‚ä¸€ä¸ªæ§åˆ¶å™¨æ™ºèƒ½ä½“å°†ä»»åŠ¡åˆ†é…ç»™åˆé€‚çš„ä¸“ä¸šæ™ºèƒ½ä½“ï¼Œè¿™æ˜¯ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ™ºèƒ½ä½“è·¯ç”±çš„åŸºç¡€ï¼Œæ­£å¦‚åœ¨MCPã€A2Aæ¡†æ¶ä¸­æ‰€çœ‹åˆ°çš„é‚£æ ·ã€‚</p>
<p>è·¯ç”±æ¨¡å¼çš„å®ç°æœ‰å››ç§ï¼š</p>
<p>â€¢<strong>æ ¹æ®LLMè·¯ç”±</strong>ï¼Œé€šè¿‡æç¤ºè¯­è¨€æ¨¡å‹åˆ†æè¾“å…¥ï¼Œå¹¶è¾“å‡ºæŒ‡ç¤ºä¸‹ä¸€æ­¥æˆ–ç›®æ ‡çš„æ ‡è¯†ç¬¦æˆ–æŒ‡ä»¤ã€‚è¿™é‡Œæœ‰æ˜¾å¼è·¯ç”±å’Œéšå¼è·¯ç”±ä¸¤ç±»ï¼Œæ˜¾ç¤ºç›´æ¥ä½¿ç”¨æ™ºèƒ½ä½“çš„ç»“æ„åŒ–è¾“å‡ºæ¥ç¡®å®šå°†æ¶ˆæ¯è·¯ç”±åˆ°å“ªä¸ªæ™ºèƒ½ä½“ã€‚éšå¼è·¯ç”±æ˜¯å°†ä¸‹æ¸¸æ™ºèƒ½ä½“åŒ…è£…æˆå·¥å…·å‡½æ•°ï¼Œè¿™æ ·è·¯ç”±æ™ºèƒ½ä½“å°±å¯ä»¥æ ¹æ®ç”¨æˆ·æŸ¥è¯¢å†³å®šè°ƒç”¨å“ªä¸ªå·¥å…·ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">""" ä¼ªä»£ç ç¤ºä¾‹ """
<span class="hljs-attr">router</span> = ReActAgent(
    <span class="hljs-attr">name</span>=<span class="hljs-string">"Router"</span>,
    <span class="hljs-attr">sys_prompt</span>=<span class="hljs-string">"#è§’è‰²#ä½ æ˜¯ä¸€ä¸ªè·¯ç”±æ™ºèƒ½ä½“ã€‚ä½ çš„ç›®æ ‡æ˜¯å°†ç”¨æˆ·æŸ¥è¯¢è·¯ç”±åˆ°æ­£ç¡®çš„åç»­ä»»åŠ¡ï¼Œæ³¨æ„ä½ ä¸éœ€è¦å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚
                #ä»»åŠ¡#é€‰æ‹©æ­£ç¡®çš„åç»­ä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡å¤ªç®€å•æˆ–æ²¡æœ‰åˆé€‚çš„ä»»åŠ¡ï¼Œåˆ™é€‰æ‹© ``None``"</span>,
    <span class="hljs-attr">model</span>=ChatModel(
        <span class="hljs-attr">model_name</span>=<span class="hljs-string">"gpt-4"</span>,
        <span class="hljs-attr">api_key</span>=<span class="hljs-string">""</span>,
        <span class="hljs-attr">stream</span>=<span class="hljs-literal">False</span>,
    )
)
</code></pre>
<p><strong>æ ¹æ®Embeddingè·¯ç”±</strong>ï¼Œåˆ©ç”¨åµŒå…¥èƒ½åŠ›ï¼Œå°†æŸ¥è¯¢è·¯ç”±åˆ°æœ€ç›¸ä¼¼çš„è·¯å¾„ä¸Šï¼Œé€‚ç”¨äºè¯­ä¹‰è·¯ç”±ï¼Œå³å†³ç­–åŸºäºè¾“å…¥çš„å«ä¹‰è€Œéå…³é”®è¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">     <span class="hljs-string">""" ä¼ªä»£ç ç¤ºä¾‹ """</span>
     <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ä½¿ç”¨è½»é‡çº§çš„å¥å­ç¼–ç æ¨¡å‹</span>
        self.model = ChatModel( model_name=<span class="hljs-string">"gpt-4"</span>, api_key=<span class="hljs-string">""</span>, stream=<span class="hljs-literal">False</span>, )
        
        <span class="hljs-comment"># å®šä¹‰ä¸åŒçš„è·¯ç”±èƒ½åŠ›å’Œå¯¹åº”çš„å¤„ç†å‡½æ•°</span>
        self.routes = {
            <span class="hljs-string">'code_help'</span>: {
                <span class="hljs-string">'description'</span>: <span class="hljs-string">'ç¼–ç¨‹ï¼Œä»£ç '</span>,
                <span class="hljs-string">'handler'</span>: self.handle_code_question
            },
            <span class="hljs-string">'general_chat'</span>: {
                <span class="hljs-string">'description'</span>: <span class="hljs-string">'èŠå¤©ï¼Œæ—¥å¸¸å¯¹è¯'</span>,
                <span class="hljs-string">'handler'</span>: self.handle_general_chat
            }
        }
        
        <span class="hljs-comment"># é¢„è®¡ç®—æ‰€æœ‰è·¯ç”±æè¿°çš„åµŒå…¥å‘é‡</span>
        self.route_embeddings = {}
        <span class="hljs-keyword">for</span> route_name, route_info <span class="hljs-keyword">in</span> self.routes.items():
            embedding = self.model.encode([route_info[<span class="hljs-string">'description'</span>]])
            self.route_embeddings[route_name] = embedding
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">route_query</span>(<span class="hljs-params">self, user_question</span>):        
        <span class="hljs-comment"># 1. å°†ç”¨æˆ·é—®é¢˜è½¬æ¢ä¸ºåµŒå…¥å‘é‡</span>
        question_embedding = self.model.encode([user_question])
        
        <span class="hljs-comment"># 2. ä½¿ç”¨ä½™å¼¦è®¡ç®—ä¸å„ä¸ªè·¯ç”±çš„ç›¸ä¼¼åº¦</span>
        similarities = {}
        <span class="hljs-keyword">for</span> route_name, route_embedding <span class="hljs-keyword">in</span> self.route_embeddings.items():
            similarity = cosine_similarity(question_embedding, route_embedding)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
            similarities[route_name] = similarity
        
        <span class="hljs-comment"># 3. é€‰æ‹©ç›¸ä¼¼åº¦æœ€é«˜çš„è·¯ç”±</span>
        best_route = <span class="hljs-built_in">max</span>(similarities, key=similarities.get)
        best_score = similarities[best_route]
        
        <span class="hljs-comment"># 4. è°ƒç”¨å¯¹åº”çš„å¤„ç†å™¨</span>
        handler = self.routes[best_route][<span class="hljs-string">'handler'</span>]
        response = handler(user_question)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'route'</span>: best_route,
            <span class="hljs-string">'confidence'</span>: best_score,
            <span class="hljs-string">'response'</span>: response
        }
        ....
</code></pre>
<p>â€¢<strong>æ ¹æ®å®šä¹‰è§„åˆ™è·¯ç”±ï¼Œ</strong> ç¡¬ç¼–ç æ–¹å¼ï¼Œæ ¹æ®å…³é”®è¯ã€æ¨¡å¼æˆ–ç»“æ„åŒ–æ•°æ®è¿›è¡Œè·¯ç”±ã€‚æ­¤æ–¹æ³•æ¯” LLM è·¯ç”±æ›´å¿«ã€æ›´ç¡®å®šï¼Œä½†çµæ´»æ€§è¾ƒä½ã€‚</p>
<p>â€¢<strong>æ ¹æ®è‡ªè®­å°æ¨¡å‹è·¯ç”±</strong>ï¼Œé‡‡ç”¨å¦‚åˆ†ç±»å™¨ç­‰åˆ¤åˆ«æ¨¡å‹ï¼Œåœ¨å°è§„æ¨¡æ ‡æ³¨æ•°æ®é›†ä¸Šä¸“é—¨è®­ç»ƒä»¥å®ç°è·¯ç”±ä»»åŠ¡ã€‚ä¸å‘é‡åµŒå…¥æ–¹æ³•ç±»ä¼¼ï¼Œä½†å…¶ç‰¹ç‚¹æ˜¯ç›‘ç£å¾®è°ƒè¿‡ç¨‹ï¼Œè·¯ç”±é€»è¾‘ç¼–ç åœ¨æ¨¡å‹æƒé‡ä¸­ã€‚ä¸ LLM è·¯ç”±ä¸åŒï¼Œå†³ç­–ç»„ä»¶ä¸æ˜¯æ¨ç†æ—¶æ‰§è¡Œæç¤ºçš„ç”Ÿæˆæ¨¡å‹ï¼Œè€Œæ˜¯å·²å¾®è°ƒçš„åˆ¤åˆ«æ¨¡å‹ã€‚LLM å¯ç”¨äºç”Ÿæˆåˆæˆè®­ç»ƒæ•°æ®ï¼Œä½†ä¸å‚ä¸å®æ—¶è·¯ç”±å†³ç­–ã€‚</p>
<p>ï»¿</p>
<p><strong>3. å¹¶è¡Œæ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a0760cae984462cadb2725a22d3bd22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=qxi9QKyJ2RbpwcrjpR2N2Mu9TZY%3D" alt="" loading="lazy"/></p>
<p>ï»¿æ¯ä¸ªæ™ºèƒ½ä½“è´Ÿè´£å¤„ç†ä¸åŒçš„å­ä»»åŠ¡ï¼Œä¾‹å¦‚æ•°æ®çˆ¬è™«ã€ç½‘ç»œæ£€ç´¢å’Œæ‘˜è¦ç”Ÿæˆï¼Œå®ƒä»¬çš„è¾“å‡ºä¼šåˆå¹¶ä¸ºä¸€ä¸ªå•ä¸€ç»“æœã€‚éå¸¸é€‚åˆå‡å°‘é«˜ååé‡ç®¡é“ä¸­çš„å»¶è¿Ÿã€‚ï¼ˆå¦‚æ–‡æ¡£è§£ææˆ–APIç¼–æ’ï¼‰</p>
<p><strong>4. å¾ªç¯æ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1955d4f02b7d4832bb7df9d75a734473~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=VoOMXFDXXhkRIQN5qguLzwOEzqo%3D" alt="" loading="lazy"/></p>
<p>ï»¿æ™ºèƒ½ä½“ä¸æ–­ä¼˜åŒ–è‡ªèº«è¾“å‡ºï¼Œç›´åˆ°è¾¾åˆ°é¢„æœŸè´¨é‡ã€‚éå¸¸é€‚åˆæ ¡å¯¹ã€æŠ¥å‘Šç”Ÿæˆæˆ–åˆ›æ„è¿­ä»£ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œç³»ç»Ÿä¼šåœ¨ç¡®å®šæœ€ç»ˆç»“æœå‰å†æ¬¡æ€è€ƒã€‚åæ€å°±æ˜¯åœ¨æ­¤æ¨¡å¼ä¸Šè¿›è¡Œçš„ä¼˜åŒ–ã€‚</p>
<p>ï»¿</p>
<p><strong>5. èšåˆæ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef43677e09264f5d93d28a91a4ac7bbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=EjwIxrBOLC4qQaGsOQRrek2uVtg%3D" alt="" loading="lazy"/></p>
<p>ï»¿è®¸å¤šæ™ºèƒ½ä½“ç”Ÿæˆéƒ¨åˆ†ç»“æœï¼Œç”±ä¸»æ™ºèƒ½ä½“å°†è¿™äº›ç»“æœæ•´åˆä¸ºä¸€ä¸ªæœ€ç»ˆè¾“å‡ºã€‚å› æ­¤ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½å½¢æˆä¸€ä¸ªè§‚ç‚¹ï¼Œè€Œä¸€ä¸ªMasteræ™ºèƒ½ä½“å°†è¿™äº›è§‚ç‚¹æ±‡æ€»æˆå…±è¯†ã€‚åœ¨RAGçš„æ£€ç´¢èåˆã€æŠ•ç¥¨ç³»ç»Ÿç­‰åœºæ™¯ä¸­å¾ˆå¸¸è§ã€‚</p>
<p>ï»¿</p>
<p><strong>6. ç½‘ç»œæ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95345f9fe471436a9c99c528aa81a938~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=9SxdSimSZMh2BvR10DbqGZQMGpM%3D" alt="" loading="lazy"/></p>
<p>ï»¿è¿™é‡Œæ²¡æœ‰æ˜ç¡®çš„å±‚çº§ç»“æ„ï¼Œæ™ºèƒ½ä½“ä¹‹é—´å¯ä»¥è‡ªç”±äº¤æµï¼ŒåŠ¨æ€å…±äº«ä¸Šä¸‹æ–‡ã€‚ç”¨äºæ¨¡æ‹Ÿã€å¤šæ™ºèƒ½ä½“æ¸¸æˆä»¥åŠéœ€è¦è‡ªç”±å½¢å¼è¡Œä¸ºçš„é›†ä½“æ¨ç†ç³»ç»Ÿä¸­ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-samples" target="_blank" title="https://github.com/agentscope-ai/agentscope-samples" ref="nofollow noopener noreferrer">agentscope-samples</a> ï¼Œæ¨¡æ‹Ÿäº†9ä¸ªæ™ºèƒ½ä½“çš„ç‹¼äººæ€æ¸¸æˆã€‚</p>
<p>ï»¿</p>
<p><strong>7. å±‚çº§æ¨¡å¼</strong></p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0589f741bc64ec597857873ca2057ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=dPpeTug9Eo2ZX1HGtj%2BTjWQVZf4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ä¸€ä¸ªé¡¶çº§è§„åˆ’æ™ºèƒ½ä½“ï¼Œå°†å­ä»»åŠ¡åˆ†é…ç»™å·¥ä½œæ™ºèƒ½ä½“ï¼Œè·Ÿè¸ªå®ƒä»¬çš„è¿›åº¦ï¼Œå¹¶åšå‡ºæœ€ç»ˆå†³ç­–ã€‚è¿™å’Œç»ç†åŠå…¶å›¢é˜Ÿçš„å·¥ä½œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼ˆå¾ˆå¤šä¸­é—´ä»¶çš„æ¶æ„ä¹Ÿæ˜¯ç±»ä¼¼è¿™ç§æ¨¡å¼å¦‚Redisã€ESã€Nocasï¼‰ã€‚æ„å›¾è¯†åˆ«å°±æ˜¯é‡‡ç”¨æ­¤æ¨¡å¼ã€‚</p>
<p>ï»¿</p>
<p><strong>å°èŠ‚ï¼š</strong></p>
<p>æˆ‘ä»¬ä¸€ç›´åœ¨æ€è€ƒçš„ä¸€ä»¶äº‹ï¼Œä¸æ˜¯å“ªç§æ¨¡å¼çœ‹èµ·æ¥æœ€é…·ï¼Œè€Œæ˜¯å“ªç§æ¨¡å¼èƒ½æœ€å¤§é™åº¦åœ°å‡å°‘æ™ºèƒ½ä½“ä¹‹é—´çš„æ‘©æ“¦ã€‚å¯åŠ¨10ä¸ªæ™ºèƒ½ä½“å¹¶ç§°ä¹‹ä¸ºä¸€ä¸ªå›¢é˜Ÿå¾ˆå®¹æ˜“ã€‚éš¾çš„æ˜¯è®¾è®¡æ²Ÿé€šæµç¨‹ï¼Œä»¥ç¡®ä¿ï¼šæ²¡æœ‰ä¸¤ä¸ªæ™ºèƒ½ä½“ä¼šåšé‡å¤å·¥ä½œã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½çŸ¥é“ä½•æ—¶è¡ŒåŠ¨ä½•æ—¶ç­‰å¾…ï¼Œä½¿è¿™ä¸ªç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å…¶ä»»ä½•å•ä¸ªéƒ¨åˆ†éƒ½æ›´æ™ºèƒ½ã€‚ä¸ºæ­¤æˆ‘ä»¬éµå¾ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fbuilding-effective-agents" target="_blank" title="https://www.anthropic.com/engineering/building-effective-agents" ref="nofollow noopener noreferrer">building-effective-agents</a> è®¾è®¡ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-2">ä¸‰ã€Multi-Agent æ¡†æ¶</h2>
<p>å¤šæ™ºèƒ½ä½“æ¨¡å¼å°†äººå·¥æ™ºèƒ½å·¥ä½œæµæ„å»ºä¸ºä¸€ä¸ªæ™ºèƒ½ä½“å›¢é˜Ÿï¼Œå®ƒä»¬ç›¸äº’åä½œï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰æ˜ç¡®çš„è§’è‰²ã€‚æ¯ä¸ªæ™ºèƒ½ä½“èƒ½å¤Ÿæ„ŸçŸ¥è¾“å…¥ã€è¿›è¡Œæ¨ç†ï¼ˆé€šè¿‡æ€ç»´é“¾ï¼‰å¹¶æ‰§è¡Œæ“ä½œä»¥å®Œæˆå­ä»»åŠ¡ã€‚æ¯ä¸ªæ™ºèƒ½ä½“é€šå¸¸éƒ½é…ç½®æœ‰ç‰¹å®šè§’è‰²ï¼Œå¹¶ä¸”åªèƒ½è®¿é—®è¯¥è§’è‰²æ‰€éœ€çš„å·¥å…·æˆ–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼ŒPM AGentè´Ÿè´£éœ€æ±‚åˆ¤æ–­æ˜¯å¦éœ€è¦å…¶ä»–æ™ºèƒ½ä½“å‚ä¸ï¼Œè‹¥éœ€è¦æŠ€æœ¯å†³ç­–åˆ™è”åŠ¨Tech lead agentã€‚æ™ºèƒ½ä½“å°†å¾ªç¯è¿›è¡Œæ€è€ƒï¼ˆâ€œæ€è€ƒâ€¦â€¦â€ï¼‰å’Œè¡ŒåŠ¨ï¼ˆâ€œè¡ŒåŠ¨â€¦â€¦â€ï¼‰ï¼Œç›´åˆ°å®Œæˆå…¶å·¥ä½œéƒ¨åˆ†çš„ä»»åŠ¡ã€‚å¦‚ä¸‹å›¾</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0f5f3041605465fba6a5713fdadcf5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=W6NDveQJo3JrhBxAHr%2F3vBGgjnU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ä»¥ä¸Šç®€å•ä»‹ç»äº†å¤šæ™ºèƒ½ä½“çš„è®¾è®¡æ¨¡å¼ï¼Œé‚£ä¹ˆå½“ä¸‹æ˜¯ä¸æ˜¯å·²ç»æœ‰äº†æˆç†Ÿçš„æ¶æ„ä¾›æˆ‘ä»¬ä½¿ç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼</p>
<p>ï»¿</p>
<p><strong>1.AutoGPTï¼š</strong> Github 180k Star</p>
<p><strong>2.Difyï¼š</strong> Github 118k Star</p>
<p><strong>3.AutoGenï¼š</strong> Github 51.4k Star</p>
<p><strong>4.CrewAIï¼š</strong> Github 40.1k Star</p>
<p>5.<strong>LangGraphï¼š</strong> Github 20.6k Star</p>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/193b057d5e6c4c5291851bb8e91ced89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539123&amp;x-signature=%2BztdFmyc0IR%2FgxuPsUgWJIvlVFo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h3 data-id="heading-3"><strong>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨Agentæ¡†æ¶ï¼Ÿ</strong></h3>
<p>åªè¦â€œé—®é¢˜ä¸å¯å®Œå…¨ç©·ä¸¾ã€è¦è·¨å¤šç³»ç»ŸæŸ¥è¯ã€å¹¶ä¸”éœ€è¦åœ¨å¯¹è¯ä¸­æ¾„æ¸…ã€åå•†ã€å†³ç­–â€ï¼Œå°±æ›´åº”è¯¥ç”¨ Agent æ¡†æ¶ï¼Œè€Œä¸æ˜¯çº¯ Workflowã€‚</p>
<h3 data-id="heading-4"><strong>çº¯ Workflow çš„â€œå¤©èŠ±æ¿â€</strong></h3>
<p>Workflow åœ¨<strong>å¯¹è¯ä¸­çš„â€œæ¾„æ¸…â€”å†å†³ç­–â€”å†è¡ŒåŠ¨â€</strong> å¹¶ä¸å¤©ç„¶å‹å¥½ï¼Œéœ€è¦æŠŠæ¯ä¸€æ­¥æé—®ã€å›ç­”ã€é‡è¯•éƒ½ç”»æˆèŠ‚ç‚¹ï¼Œå¤æ‚è€Œè„†å¼±ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·å‘èµ·ï¼šâ€œæˆ‘çš„åŒ…è£¹è¿˜æ²¡åˆ°ï¼Œæ€ä¹ˆåŠï¼Ÿâ€</p>
<p>é€šè¿‡Workflowåˆ›å»ºå¦‚ä¸‹æ™ºèƒ½ä½“ï¼š(å…ˆä¸æœŸå¾…GPT-6 ä¼šè‡ªä¸»æ€è€ƒçš„æ™ºèƒ½ä½“)</p>
<p>â€¢<strong>æ„å›¾è¯†åˆ«æ™ºèƒ½ä½“</strong>ï¼šè¯†åˆ«ç”¨æˆ·è¯‰æ±‚ï¼ˆæŸ¥è¯¢è¿›åº¦/å‚¬ä¿ƒ/æŠ•è¯‰/æŠ¥æŸ/é€€è´§ç­‰ï¼‰</p>
<p>â€¢<strong>ç‰©æµçŠ¶æ€æ™ºèƒ½ä½“</strong>ï¼šå®æ—¶æ‹‰å–æ‰¿è¿å•†çŠ¶æ€ï¼Œåˆ¤æ–­åŒ…è£¹ä½ç½®ã€å¼‚å¸¸</p>
<p>â€¢<strong>æ”¿ç­–è§„åˆ™æ™ºèƒ½ä½“</strong>ï¼šæŸ¥è¯¢å½“å‰æ—¶æ®µæ”¿ç­–ï¼ˆèŠ‚å‡æ—¥ã€å¤§ä¿ƒã€å¹³æ—¥ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦ç‰¹æ®Šå¤„ç†</p>
<p>â€¢<strong>ç”¨æˆ·ç”»åƒæ™ºèƒ½ä½“</strong>ï¼šåˆ¤æ–­ç”¨æˆ·ç­‰çº§ã€å†å²è¡Œä¸ºã€æ˜¯å¦ä¼šå‘˜</p>
<p>â€¢<strong>å¼‚å¸¸æ£€æµ‹æ™ºèƒ½ä½“</strong>ï¼šåˆ†ææ˜¯å¦æœ‰æŠ¥æŸã€æ‹’æ”¶ã€æ¬ºè¯ˆç­‰ä¿¡å·</p>
<p>â€¢<strong>æ¾„æ¸…ä¸è¡¥å……æ™ºèƒ½ä½“</strong>ï¼šä¿¡æ¯ä¸å…¨æ—¶è‡ªåŠ¨å‘ç”¨æˆ·æé—®ï¼Œè¡¥é½å†³ç­–æ‰€éœ€ä¿¡æ¯</p>
<p>â€¢<strong>è§£å†³æ–¹æ¡ˆç”Ÿæˆæ™ºèƒ½ä½“</strong>ï¼šç»¼åˆæ‰€æœ‰æ™ºèƒ½ä½“ç»“æœï¼Œè¾“å‡ºæœ€ä¼˜å¤„ç†æ–¹æ¡ˆï¼ˆæ¯”å¦‚ï¼šå»ºè®®ç­‰å¾…/è¡¥å‘/èµ”å¿/å‡çº§å¤„ç†/è½¬äººå·¥ç­‰ï¼‰</p>
<p>æ™ºèƒ½ä½“æ•°é‡âœ–ï¸ç‰©æµçŠ¶æ€âœ–ï¸ç”¨æˆ·ç­‰çº§âœ–ï¸ç‰©æµæ”¿ç­–....ä½ çš„åˆ†æ”¯ä¼šçˆ†ç‚¸ã€‚æ‰€ä»¥éœ€è¦ç”¨Difyè¿™ç±»çš„å¯ä»¥æ”¯æŒåŠ¨æ€å†³ç­–ï¼ŒåŠ¨æ€æ¨ç†å’Œæ¾„æ¸…çš„æ™ºèƒ½ä½“æ¡†æ¶ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-5"><strong>Agent æ¡†æ¶è§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong></h3>
<p>ä»¥ AutoGenã€CrewAI è¿™ç±» Agent æ¡†æ¶ä¸ºä¾‹ï¼Œå®ƒä»¬æŠŠâ€œ<strong>åœ¨å¯¹è¯é‡ŒåŠ¨æ€è§„åˆ’ä¸è°ƒç”¨å·¥å…·</strong>â€ä½œä¸ºç¬¬ä¸€æ€§èƒ½åŠ›ï¼š</p>
<p><strong>åœºæ™¯ï¼š</strong> ç”¨æˆ·è¯´â€œæˆ‘10.1ä¹°çš„æ‰‹æœºç°åœ¨è¿˜æ²¡åˆ°ï¼Œç»™æˆ‘é€€è´§ï¼å¦å¤–ï¼Œä½ ä»¬çš„è¿è´¹é™©çš„ä¿è´¦æœŸæ˜¯å¤šä¹…ï¼Ÿâ€</p>
<p>ä¸€ä¸ªåˆæ ¼çš„å®¢æœ Agent å›¢é˜Ÿä¼šåšä»€ä¹ˆï¼Ÿ</p>
<p><strong>æ²¡æœ‰è·¯ç”±å†³ç­–</strong>ï¼Œé¦–å…ˆä¼šåŠ¨æ€åŒ¹é…æ‰€æœ‰Queryï¼Œå¯¹Queryè¿›è¡Œæ”¹å†™æˆâ€œæŸ¥è¯¢ç”¨æˆ·çš„è®¢å•â€ï¼Œâ€œç”¨æˆ·æƒ³è¦é€€è´§â€ï¼Œâ€œè¿è´¹é™©çš„ä¿è´¦èŒƒå›´å’Œæ¡æ¬¾â€ã€‚</p>
<p>1.<strong>æ„å›¾è¯†åˆ« + æ¾„æ¸…</strong></p>
<p>â—¦ Planner Agentï¼šæ‹†å‡ºå¤šæ„å›¾ï¼ˆç‰©æµå¼‚å¸¸ã€é€€è´§ã€è®¡è´¹å¼‚å¸¸ã€è¿è´¹é™©æ¡æ¬¾ï¼‰ï¼Œå…ˆé—®å…³é”®ï¼ˆè®¢å•å·ã€åœ°å€ï¼‰ã€‚</p>
<p>2.<strong>è·¨ç³»ç»Ÿå–è¯</strong></p>
<p>â—¦ OMS/ç‰©æµå·¥å…·ï¼šæŸ¥è½¨è¿¹ä¸ SLAï¼›</p>
<p>â—¦ è®¡è´¹/æ”¯ä»˜å·¥å…·ï¼šæ ¸å¯¹é‡å¤æ‰£æ¬¾äº¤æ˜“ï¼›</p>
<p>â—¦ CRMï¼šçœ‹æ˜¯å¦ Plusã€æ˜¯å¦æœ‰å†å²è¡¥å¿è®°å½•ï¼›</p>
<p>â—¦ä¿åº“ï¼šæŸ¥è¯¢è¿è´¹é™©</p>
<p>3.<strong>æ”¿ç­–æ¨ç†ä¸åˆè§„</strong></p>
<p>Policy Agentï¼šå¥—ç”¨â€œå‡æœŸå»¶è¯¯ + Plus + è¿è´¹é™©â€çš„ç»„åˆæ¡æ¬¾ï¼Œè¯„ä¼°å¯ç»™çš„è¡¥å¿åŒºé—´ã€æ˜¯å¦è§¦å‘é£æ§äººå·¥å¤æ ¸ã€‚</p>
<p>è¿™äº›åŠ¨ä½œé‡Œï¼Œå¾ˆå¤šæ­¥éª¤<strong>æ— æ³•äº‹å…ˆâ€œç”»â€æˆå›ºå®šåˆ†æ”¯ï¼Œéœ€è¦åœ¨å¯¹è¯ä¸Šä¸‹æ–‡é‡Œåšå†³ç­–ã€éœ€è¦è·¨å·¥å…·åŠ¨æ€ç»„åˆã€éœ€è¦â€œé—®ä¸€å¥ â†’ æŸ¥ä¸€ä¸‹ â†’ å†å†³å®šâ€ï¼Œ</strong> è¿™æ­£æ˜¯ Agent çš„å¼ºé¡¹ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-6">ç»“å°¾ï¼š</h2>
<p>ä»¥ä¸Šæ˜¯å¯¹å¤šæ™ºèƒ½ä½“çš„æ€»ç»“ï¼Œä½ ä¼šäº†å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScriptè¶…è¶ŠPythonæˆGitHubä¸Šä½¿ç”¨æœ€å¹¿è¯­è¨€ï¼ŒAIæ˜¯ä¸»è¦é©±åŠ¨åŠ›]]></title>    <link>https://juejin.cn/post/7571475192490295306</link>    <guid>https://juejin.cn/post/7571475192490295306</guid>    <pubDate>2025-11-12T09:04:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571475192490295306" data-draft-id="7571655312798171162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScriptè¶…è¶ŠPythonæˆGitHubä¸Šä½¿ç”¨æœ€å¹¿è¯­è¨€ï¼ŒAIæ˜¯ä¸»è¦é©±åŠ¨åŠ›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-12T09:04:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScriptè¶…è¶ŠPythonæˆGitHubä¸Šä½¿ç”¨æœ€å¹¿è¯­è¨€ï¼ŒAIæ˜¯ä¸»è¦é©±åŠ¨åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:04:38.000Z" title="Wed Nov 12 2025 09:04:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¼€å‘è€…æœ€å¸¸ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Ÿç›¸ä¿¡å¾ˆå¤šäººéƒ½ä¼šä¸å‡æ€ç´¢åœ°é€‰æ‹© Pythonã€‚</p>
<p>ä½† GitHub è¿‘æ—¥å‘å¸ƒçš„ã€ŠOctoverse 2025ã€‹æŠ¥å‘Šå´ç»™å‡ºäº†ä¸€ä¸ªä¸ä¸€æ ·çš„ç­”æ¡ˆï¼šTypeScriptã€‚</p>
<p>æ ¹æ® GitHub çš„è´¡çŒ®è€…æ•°é‡ç»Ÿè®¡ï¼Œ2025 å¹´ 8 æœˆï¼ŒPython çš„è´¡çŒ®è€…æ•°é‡åœ¨è¿ç»­éœ¸æ¦œ 16 ä¸ªæœˆä¹‹åé¦–æ¬¡è·Œè½åˆ°ç¬¬äºŒåï¼ŒTypeScript é¦–æ¬¡æˆä¸º GitHub ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„è¯­è¨€ï¼Œä»¥çº¦ 4.2 ä¸‡åè´¡çŒ®è€…çš„ä¼˜åŠ¿è¶…è¶Šäº† Pythonã€‚JavaScripst ç´§éšå…¶åï¼Œå››äº”å…­ååˆ™æ˜¯åæ¬¡è¶…çº§ç¨³å®šçš„ Javaã€C# å’Œ PHPã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a78c13b18c034bde939ea3b702cc65c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=3FWnQTCDLZGKBqoauiKFYcI8Cwk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>GitHub æŠ¥å‘Šè¡¨ç¤ºï¼šã€Œè¿™ä¸€é‡Œç¨‹ç¢‘äº‹ä»¶æ˜¯è¿‡å»åå¹´æ¥å¼€å‘è€…è½¬å‘ç±»å‹åŒ– JavaScript ï¼ˆtyped JavaScriptï¼‰è¶‹åŠ¿çš„é›†ä¸­ä½“ç°ï¼Œä¹Ÿæ ‡å¿—ç€ TypeScript æ­£åœ¨æˆä¸ºç°ä»£å¼€å‘çš„æ–°é»˜è®¤é€‰é¡¹ã€‚ã€</p>
<p>æ›´å…·ä½“è€Œè¨€ï¼ŒTypeScript åœ¨ 2025 å¹´çš„è´¡çŒ®è€…æ•°é‡å¢é•¿äº†è¶…è¿‡ 100 ä¸‡ï¼ˆåŒæ¯”å¢é•¿ 66%ï¼‰ã€‚å…¶ä¸»è¦é©±åŠ¨åŠ›ä¸€æ–¹é¢æ¥è‡ªé‚£äº›é»˜è®¤ä½¿ç”¨ TypeScript æ­å»ºé¡¹ç›®çš„å¼€å‘æ¡†æ¶ï¼Œå¦ä¸€æ–¹é¢åˆ™æ¥è‡ª AI è¾…åŠ©å¼€å‘ï¼Œå› ä¸º TypeScript é‚£æ›´ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿè®© AI è¾…åŠ©å¼€å‘å—ç›ŠåŒªæµ…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f745b4b83156408a88b9a6a308db9f81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=oRVyGn%2BJQ%2BuMn3xdIfoZz5DOk0w%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aef8b7ae56c64884914638c3d5b6362f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=8MyB91zT9vAnDePXEZAnrJGzGMI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸è¿‡ï¼ŒGitHub ä¹ŸæŒ‡å‡ºï¼ŒPython åœ¨ AI å’Œæ•°æ®ç§‘å­¦é¢†åŸŸä»ç„¶ä¿æŒç€ä¸»å¯¼åœ°ä½ï¼Œæ‹¥æœ‰ 260 ä¸‡è´¡çŒ®è€…ï¼ˆåŒæ¯”å¢é•¿ 48%ï¼‰ã€‚Jupyter Notebook ä¾æ—§æ˜¯ AI é¢†åŸŸçš„é¦–é€‰æ¢ç´¢æ€§ç¯å¢ƒï¼ˆç›¸å…³ä»“åº“çº¦ 40.3 ä¸‡ä¸ªï¼›åœ¨ AI æ ‡ç­¾çš„é¡¹ç›®ä¸­ï¼ŒåŒæ¯”å¢é•¿ 17.8%ï¼‰ã€‚</p>
<p>JavaScript çš„è´¡çŒ®è€…ä½“é‡ä¾ç„¶åºå¤§ï¼ˆ215 ä¸‡ï¼‰ï¼Œä½†éšç€å¼€å‘è€…é€æ¸è½¬å‘ TypeScriptï¼Œå…¶å¢é•¿å·²ç»æ”¾ç¼“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/414165e754e64543a4210d5c3922e084~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=GA6Nh9Bngp0C%2Bp3XIQSg3hDZj0c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒTypeScript å’Œ Python ä¸¤è€…ç›®å‰å…±æ‹¥æœ‰è¶…è¿‡ 520 ä¸‡è´¡çŒ®è€…ï¼ˆçº¦å  2025 å¹´ 8 æœˆ GitHub æ‰€æœ‰æ´»è·ƒå¼€å‘è€…çš„ 3%ï¼‰ã€‚ç±»å‹åŒ–è¯­è¨€çš„å´›èµ·è¡¨æ˜ï¼šAI ä¸ä»…åœ¨æ”¹å˜ç¼–ç çš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿåœ¨å½±å“å¼€å‘å›¢é˜Ÿåœ¨ã€Œä¿¡ä»»å¹¶é‡‡çº³ AI ç”Ÿæˆçš„ä»£ç è¿›å…¥ç”Ÿäº§ç¯å¢ƒã€æ—¶ï¼Œä¼šé€‰æ‹©å“ªäº›è¯­è¨€ã€‚</p>
<p>å¦å¤–ï¼Œæ ¹æ® GitHub ç»Ÿè®¡ï¼Œè¿‡å» 12 æœˆæ–°å¢çš„è½¯ä»¶åº“æœ‰ 80% éƒ½é›†ä¸­åœ¨ 6 å¤§æ ¸å¿ƒè¯­è¨€ï¼šPythonã€JavaScriptã€TypeScriptã€Javaã€C++ å’Œ C#ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34552d8d25b442b5a1457b5b1ed33857~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=g5v3STkX5s1FL%2BuoI%2B3nzVUneGI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆ TypeScript åœ¨ 2025 å¹´èƒœå‡ºï¼Ÿ</p>
<p>TypeScript åœ¨ 2025 å¹´ 8 æœˆä»¥ 2,636,006 åæœˆåº¦è´¡çŒ®è€…ï¼ˆåŒæ¯”å¢é•¿ 105 ä¸‡ï¼›+66.6%ï¼‰çš„æˆç»©åœ¨ GitHub ä¸Šæ’åç¬¬ä¸€ï¼Œå¹¶åœ¨æ–°å¢ä»“åº“æ•°é‡ä¸Šå¤„äºé¢†å…ˆåœ°ä½ã€‚</p>
<p>åŸå› æ˜¯ã€Œç±»å‹ï¼ˆTypeï¼‰ã€å¯¹ AI ç³»ç»Ÿçš„è¾…åŠ©ï¼šç±»å‹ç³»ç»Ÿå¯å‡å°‘ä»£ç çš„æ¨¡ç³Šæ€§ï¼Œå¹¶åœ¨ï¼ˆAI ç”Ÿæˆçš„ï¼‰ä»£ç è¿›å…¥ç”Ÿäº§ç¯å¢ƒå‰ææ—©æ•è·å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„é”™è¯¯ã€‚</p>
<p>å¦å¤–ï¼Œè®¸å¤šæ¡†æ¶ä¹Ÿé»˜è®¤å†…ç½® TypeScriptã€‚ Next.js 15ã€Astro 3ã€SvelteKit 2ã€Qwikã€SolidStartã€Angular 18 å’Œ Remix å‡é»˜è®¤ï¼ˆé€šè¿‡ npm createã€pnpm dlx æˆ– bunx create å‘½ä»¤ï¼‰ç”Ÿæˆ TypeScript ä»£ç åº“ã€‚</p>
<p>å¹¶ä¸”ç±»å‹ç³»ç»Ÿä¹Ÿæœ‰åŠ©äºåœ¨å¼€å‘æµç¨‹ä¸­æ›´æ—©åœ°è¯†åˆ« LLM ç”Ÿæˆçš„ç¼–è¯‘é”™è¯¯ã€‚2025 å¹´çš„ä¸€é¡¹å­¦æœ¯ç ”ç©¶å‘ç°ï¼ŒLLM ç”Ÿæˆçš„ç¼–è¯‘é”™è¯¯ä¸­æœ‰ 94% æ˜¯ç±»å‹æ£€æŸ¥å¤±è´¥ã€‚</p>
<p>TypeScript çš„å…¥é—¨é—¨æ§›ä¹Ÿæ¯”è¾ƒä½ã€‚è¯¸å¦‚ Viteã€ts-nodeã€Bun å’Œ IDE è‡ªåŠ¨é…ç½®ç­‰å·¥å…·éšè—äº†ï¼ˆç¹ççš„ï¼‰æ ·æ¿æ–‡ä»¶ï¼ˆboilerplateï¼‰ï¼Œå› æ­¤åˆçº§å¼€å‘è€…ä¹Ÿå¯ä»¥å¿«é€Ÿå¯åŠ¨ç±»å‹åŒ–çš„æŠ€æœ¯æ ˆã€‚</p>
<p>Python ä¾ç„¶ä¸»å¯¼ AI é¡¹ç›®</p>
<p>å³ä¾¿ TypeScript å´›èµ·äº†ï¼Œä½†åœ¨æ‰€æœ‰ AI æ ‡ç­¾çš„ä»“åº“ä¸­ï¼ŒPython ä»ç„¶æ˜¯å½“ä¹‹æ— æ„§çš„é¢†å¯¼è€…ã€‚å…¶ä¸­ï¼ŒJupyter Notebook çš„ä½¿ç”¨é‡åœ¨ 2025 å¹´å‡ ä¹ç¿»äº†ä¸€ç•ªï¼Œè¿™å……åˆ†è¯æ˜äº† Python ä½œä¸º AI å·¥ä½œè´Ÿè½½åŸå‹è®¾è®¡ã€æ¨¡å‹è®­ç»ƒå’Œä»»åŠ¡ç¼–æ’çš„é¦–é€‰è¯­è¨€çš„åœ°ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef57a2655a24a8aa19cbe70574fb4c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=azUWDegf1tOZvjlUzvOLgPkbnnc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…·ä½“æ¥çœ‹ï¼ŒPython é©±åŠ¨äº†è¿‘ä¸€åŠçš„æ–°å¢ AI ä»“åº“ï¼ˆ582,196 ä¸ªï¼›åŒæ¯”å¢é•¿ 50.7%ï¼‰ï¼Œçªæ˜¾äº†å®ƒä½œä¸ºåº”ç”¨å‹ AI å·¥ä½œï¼ˆä»è®­ç»ƒã€æ¨ç†åˆ°ç¼–æ’å’Œéƒ¨ç½²ï¼‰çš„æ”¯æŸ±åœ°ä½ã€‚Jupyter Notebook ä¾æ—§æ˜¯ç”¨äºå®éªŒçš„é¦–é€‰æ¢ç´¢æ€§ç¯å¢ƒï¼ˆ402,643 ä¸ªï¼›åŒæ¯”å¢é•¿ 17.8%ï¼‰ï¼Œä½†ï¼ˆè´¡çŒ®è€…ï¼‰å‘ Python ä»£ç åº“çš„è½¬ç§»è¡¨æ˜ï¼Œæœ‰æ›´å¤šé¡¹ç›®æ­£åœ¨æ‘†è„±åŸå‹é˜¶æ®µï¼Œè¿›å…¥ç”Ÿäº§æŠ€æœ¯æ ˆã€‚</p>
<p>å‰ç«¯å’Œåº”ç”¨å±‚è¯­è¨€åœ¨è¾ƒå°çš„åŸºæ•°ä¸Šå®ç°äº†æ€¥å‰§å¢é•¿ï¼šTypeScript å¢é•¿ 77.9%ï¼ˆ85,746 ä¸ªï¼‰å’Œ JavaScript å¢é•¿ 24.8%ï¼ˆ88,023 ä¸ªï¼‰ã€‚</p>
<p>è¿™è¡¨æ˜å›´ç»•æ¨¡å‹ API æ¥å£ï¼ˆmodel endpointsï¼‰æ„å»ºçš„æ¼”ç¤ºã€ä»ªè¡¨ç›˜å’Œè½»é‡çº§åº”ç”¨æ­£åœ¨å´›èµ·ã€‚</p>
<p>Shell è„šæœ¬ï¼ˆ+324%ï¼‰æˆä¸ºå¢é•¿æœ€å¿«çš„ç±»åˆ«ï¼Œåæ˜ äº†å›¢é˜Ÿå¦‚ä½•å°†è¯„ä¼°å·¥å…·ã€æ•°æ®å‡†å¤‡å’Œéƒ¨ç½²æµç¨‹ä»£ç åŒ–ã€‚C++ åˆ™è·¨è¶Šäº† 7,800 ä¸ªä»“åº“ï¼ˆ+11%ï¼‰ï¼Œç¨³æ­¥æé†’ç€äººä»¬å®ƒåœ¨æ€§èƒ½æ”¸å…³çš„æ¨ç†å¼•æ“ã€è¿è¡Œæ—¶å’Œè¿‘ç¡¬ä»¶ï¼ˆhardware-closeï¼‰ç³»ç»Ÿä¸­æ‰€æ‰®æ¼”çš„è§’è‰²ã€‚</p>
<p>å…¶å®ƒè¶‹åŠ¿å’Œè¦ç‚¹</p>
<p>GitHub è¿˜åœ¨æŠ¥å‘Šä¸­æ€»ç»“äº†å…¶å®ƒä¸€äº›è¶‹åŠ¿å’Œè¦ç‚¹ã€‚</p>
<p>ä»Šå¹´ï¼Œå¼€æºå¼€å‘æ´»åŠ¨è¾¾åˆ°äº†åˆ›çºªå½•çš„æ°´å¹³ï¼Œå…¬å…±ä»“åº“çš„è´¡çŒ®æ€»é‡è¾¾åˆ°äº† 11.2 äº¿æ¬¡ï¼ˆåŒæ¯”å¢é•¿ 13%ï¼‰ã€‚2025 å¹´ 3 æœˆæ˜¯ GitHub å†å²ä¸Šæ–°å¢å¼€æºè´¡çŒ®è€…æ•°é‡æœ€å¤šçš„ä¸€ä¸ªæœˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/972ce7ee040e4209ae61732281bb83dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=0YT7Ip2cUJTj2%2BwDn6sy%2BZraIZg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°åº¦å¢é•¿è¿…çŒ›ï¼Œè¯¥å›½åœ¨ 2025 å¹´æ–°å¢äº†è¶…è¿‡ 520 ä¸‡åå¼€å‘è€…ï¼Œå  GitHub 2025 å¹´æ–°å¢ 3600 ä¸‡å¼€å‘è€…æ€»æ•°çš„ 14% ä»¥ä¸Šã€‚è¿™ä½¿å¾—å°åº¦æˆä¸ºä»Šå¹´ GitHub ä¸Šæ–°å¢å¼€å‘è€…çš„æœ€å¤§å•ä¸€æ¥æºå›½ï¼Œå»¶ç»­äº†å…¶è‡ª 2020 å¹´ä»¥æ¥çš„è¿…çŒ›å¢é•¿åŠ¿å¤´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/044518fb4b7f4293a3dc007e03032572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=5ZKOxe7VelgOa6b%2BPBeowWCm1Ro%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼ä¸šçº§æŠ€æœ¯æ ˆä¿æŒç¨³å›ºã€‚Java å’Œ C# ä»Šå¹´çš„è´¡çŒ®è€…å‡å¢é•¿äº†è¶…è¿‡ 10 ä¸‡äººï¼Œè¿™è¡¨æ˜å³ä¾¿ AI æ­£åœ¨é‡å¡‘æ•´ä¸ªè¡Œä¸šæ ¼å±€ï¼Œå®ƒä»¬åœ¨å¤§å‹ä¼ä¸šå’Œæ¸¸æˆå¼€å‘ï¼ˆgame-devï¼‰ç¯å¢ƒä¸­çš„å¢é•¿ä¾æ—§ç¨³å®šã€‚</p>
<p>æ—§è¯­è¨€çš„å®éªŒæ€§é¡¹ç›®æ¶Œç°ã€‚COBOL è¯­è¨€ä¹Ÿå‡ºç°åœ¨ GitHub çš„æ•°æ®é›†ä¸­ï¼Œæ‹¥æœ‰è¿‘ 3,000 åæ´»è·ƒå¼€å‘è€…ã€‚è¿™å¾ˆå¯èƒ½æ˜¯ç”±ä¸€äº›ç»„ç»‡å’Œçˆ±å¥½è€…æ‰€æ¨åŠ¨çš„ï¼Œä»–ä»¬åˆ›å»ºäº†è®¸å¤š AI è¾…åŠ©çš„æ•™ç¨‹ä»“åº“ï¼Œæ—¨åœ¨å¸®åŠ©å®ç°é—ç•™ä»£ç åº“çš„ç°ä»£åŒ–ã€‚</p>
<p>æ€§èƒ½å’Œç³»ç»Ÿè¯­è¨€æ­£éš AI å´›èµ·ï¼ˆä½†å¢é•¿ä¸å‡ï¼‰ã€‚C è¯­è¨€åŒæ¯”å¢é•¿çº¦ 20.9%ï¼ŒC++ åŒæ¯”å¢é•¿çº¦ 11.8%ï¼Œè¿™åæ˜ äº†å¸‚åœºå¯¹æ›´å¿«çš„è¿è¡Œæ—¶ã€æ¨ç†å¼•æ“å’Œç¡¬ä»¶ä¼˜åŒ– Loop çš„éœ€æ±‚ã€‚</p>
<p>ç”Ÿæˆå¼ AI æ­£æ—¥ç›Šæˆä¸ºåŸºç¡€è®¾æ–½ã€‚ç°åœ¨æœ‰è¶…è¿‡ 110 ä¸‡ä¸ªå…¬å¼€ä»“åº“å¯¼å…¥äº† LLM SDKï¼ˆåŒæ¯”å¢é•¿ 178%ï¼Œå¯¹æ¯” 2025 å¹´ 8 æœˆä¸ 2024 å¹´ 8 æœˆï¼‰ï¼Œç”±è¶…è¿‡ 105 ä¸‡åè´¡çŒ®è€…æ”¯æŒï¼Œæœˆåº¦æäº¤é‡ï¼ˆmonthly commitsï¼‰è¾¾åˆ° 175 ä¸‡æ¬¡ï¼ˆè‡ª 2023 å¹´ä»¥æ¥å¢é•¿äº† 4.8 å€ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c478c4418f7414ca293723326c08c1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=8bz9rgrZ86oy4l%2FqDFwJ7AWdfv0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>AI åœ¨å¼€æºé¢†åŸŸçš„åº”ç”¨ã€‚åŠæ•°ï¼ˆ50%ï¼‰çš„å¼€æºé¡¹ç›®è‡³å°‘æœ‰ä¸€åç»´æŠ¤è€…ï¼ˆmaintainerï¼‰åœ¨ä½¿ç”¨ GitHub Copilotã€‚</p>
<p>.NET ä¿æŒå¼ºåŠ²ã€‚ C# åŒæ¯”å¢é•¿çº¦ 10.6%ï¼Œä¸ä¼ä¸šçº§å’Œæ¸¸æˆ / å·¥å…·ç”Ÿæ€ç³»ç»Ÿçš„ï¼ˆå¢é•¿ï¼‰ä¿æŒä¸€è‡´ã€‚è¿™è¡¨æ˜ AI åŠŸèƒ½æ­£è¢«é›†æˆåˆ°ç°æœ‰çš„ .NET å·¥ä½œæµä¸­ï¼Œè€Œä¸æ˜¯åœ¨é©±åŠ¨ï¼ˆå¼€å‘è€…ï¼‰è¿›è¡Œå½»åº•çš„è¯­è¨€è½¬ç§»ã€‚</p>
<p>å¢é•¿æœ€å¿«çš„è¯­è¨€æ˜¯ Luauã€‚Luau æ˜¯ Roblox çš„è„šæœ¬è¯­è¨€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé€æ­¥ç±»å‹åŒ–çš„è¯­è¨€ï¼Œä½“ç°äº†æ•´ä¸ªè¡Œä¸šå‘ã€Œç±»å‹çµæ´»æ€§ã€å‘å±•çš„è¶‹åŠ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f0865434aae4981aca662a27f42720c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=QDk0hQCwE%2FYj7zsfQyFymrIYd40%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯å¤ç°æ€§å’Œä¾èµ–æ¸…æ´ï¼ˆdependency hygieneï¼‰å¤‡å—å…³æ³¨ã€‚ astral-sh/uv å’Œ NixOS/nixpkgs çš„å´›èµ·ï¼Œè¡¨æ˜å¼€å‘è€…å¯¹ç¡®å®šæ€§æ„å»ºï¼ˆdeterministic buildsï¼‰ã€æ›´å¿«çš„å®‰è£…é€Ÿåº¦ä»¥åŠç›´æ¥è¿è¡Œçš„æ¸´æœ›ã€‚</p>
<p>ä»¥æ€§èƒ½ä¸ºä¸­å¿ƒçš„å¼€å‘è€…å·¥å…·èµ¢å¾—å…³æ³¨ã€‚ Ghosttyã€Tailwind CSS å’Œ uv çš„å…±åŒç‚¹éƒ½æ˜¯å…³äºé€Ÿåº¦ã€ç´§å‡‘çš„åé¦ˆå¾ªç¯å’Œæœ€å°åŒ–çš„ï¼ˆå¼€å‘ï¼‰é˜»åŠ›ã€‚</p>
<p>æ›´å¤šè¯¦æƒ…è¯·å‚é˜…åŸæŠ¥å‘Šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca37bce31fe84f9e93b46b3cce384bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543078&amp;x-signature=iJ%2BW%2B7k9Qs8wqPnDl6y%2BnG7EEAk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fnews-insights%2Foctoverse%2Foctoverse-a-new-developer-joins-github-every-second-as-ai-leads-typescript-to-1%2F" target="_blank" title="https://github.blog/news-insights/octoverse/octoverse-a-new-developer-joins-github-every-second-as-ai-leads-typescript-to-1/" ref="nofollow noopener noreferrer">github.blog/news-insighâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼]]></title>    <link>https://juejin.cn/post/7571456639477006346</link>    <guid>https://juejin.cn/post/7571456639477006346</guid>    <pubDate>2025-11-12T07:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571456639477006346" data-draft-id="7571416207972499506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T07:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€æ–°MCPè§„èŒƒè§£è¯»ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:59:53.000Z" title="Wed Nov 12 2025 07:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MCPæ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆéœ€è¦å®ƒ?</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d67c9ad979a2434989229286027f7185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539193&amp;x-signature=AvWJDuUolC0sslAql0%2FE8bjN4jg%3D" alt="" loading="lazy"/><br/>
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œå®ƒéœ€è¦:</p>
<ul>
<li>è¯»å–å’Œä¿®æ”¹é¡¹ç›®æ–‡ä»¶</li>
<li>æŸ¥è¯¢æ•°æ®åº“Schema</li>
<li>æœç´¢ä»£ç ä»“åº“</li>
<li>æ‰§è¡ŒGitæ“ä½œ</li>
</ul>
<p>ä¼ ç»Ÿåšæ³•æ˜¯ä¸ºæ¯ä¸ªæ•°æ®æºå†™ä¸€å¥—ä¸“ç”¨ä»£ç ï¼Œä¸åŒå›¢é˜Ÿé‡å¤é€ è½®å­ã€‚<strong>Model Context Protocol(MCP)</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„å¼€æ”¾æ ‡å‡†åè®®ã€‚</p>
<p><strong>é€šä¿—ç†è§£</strong>: MCPå°±åƒæ˜¯ã€ŒAIåº”ç”¨çš„USBæ¥å£æ ‡å‡†ã€ã€‚å°±åƒUSBè®©ä¸åŒè®¾å¤‡éƒ½èƒ½æ¥å…¥ç”µè„‘ä¸€æ ·ï¼ŒMCPè®©ä¸åŒçš„æ•°æ®æºå’Œå·¥å…·éƒ½èƒ½ä»¥ç»Ÿä¸€æ–¹å¼æ¥å…¥AIåº”ç”¨ã€‚</p>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: åœ¨Claude Desktopä¸­ï¼Œä½ å¯ä»¥é…ç½®å¤šä¸ªå®˜æ–¹MCPæœåŠ¡å™¨:</p>
<ul>
<li><strong>FilesystemæœåŠ¡å™¨</strong>: å®‰å…¨åœ°è¯»å†™æœ¬åœ°æ–‡ä»¶ï¼Œæœ‰æƒé™æ§åˆ¶</li>
<li><strong>SQLiteæœåŠ¡å™¨</strong>: æŸ¥è¯¢å’Œåˆ†æSQLiteæ•°æ®åº“ï¼Œè‡ªåŠ¨ç”ŸæˆSQL</li>
<li><strong>GitHubæœåŠ¡å™¨</strong>: æœç´¢ä»“åº“ã€åˆ›å»ºIssueã€ç®¡ç†PR</li>
</ul>
<p>ä½ çš„AIåº”ç”¨åªéœ€å®ç°ä¸€ä¸ªMCPå®¢æˆ·ç«¯ï¼Œå°±èƒ½è¿æ¥æ‰€æœ‰æœåŠ¡å™¨ï¼Œæ— éœ€ä¸ºæ¯ä¸ªæœåŠ¡å™¨å†™ä¸“ç”¨ä»£ç ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¶æ„è®¾è®¡ï¼š ä¸‰ä¸ªè§’è‰²çš„åˆ†å·¥</h2>
<p>MCPé‡‡ç”¨<strong>å®¿ä¸»-å®¢æˆ·ç«¯-æœåŠ¡å™¨</strong>ä¸‰å±‚æ¶æ„ï¼Œå°±åƒä¸€å®¶å…¬å¸çš„ç»„ç»‡ç»“æ„:</p>
<p><strong>å®¿ä¸»(Host)</strong> = æ€»ç»ç†</p>
<ul>
<li>ç®¡ç†æ‰€æœ‰å®¢æˆ·ç«¯</li>
<li>æ§åˆ¶å®‰å…¨ç­–ç•¥å’Œæƒé™</li>
<li>è´Ÿè´£AIæ¨¡å‹çš„è°ƒç”¨</li>
</ul>
<p><strong>å®¢æˆ·ç«¯(Client)</strong> = éƒ¨é—¨ç»ç†</p>
<ul>
<li>å®¢æˆ·ç«¯è´Ÿè´£è¿æ¥æœåŠ¡å™¨</li>
<li>è´Ÿè´£åŒæ–¹çš„æ²Ÿé€šåè°ƒ</li>
<li>è½¬å‘æ¶ˆæ¯å’Œé€šçŸ¥</li>
</ul>
<p><strong>æœåŠ¡å™¨(Server)</strong> = ä¸šåŠ¡ä¸“å‘˜</p>
<ul>
<li>æä¾›å…·ä½“åŠŸèƒ½(èµ„æºã€å·¥å…·ã€æç¤ºæ¨¡æ¿)</li>
<li>å¯ä»¥æ˜¯æœ¬åœ°ç¨‹åºæˆ–è¿œç¨‹æœåŠ¡</li>
<li>ä¸çŸ¥é“å…¶ä»–æœåŠ¡å™¨çš„å­˜åœ¨</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€åè®®çº¦å®šï¼šç»Ÿä¸€è§„èŒƒä¸ä¸ªæ€§åŒ–æ‰©å±•</h2>
<p><strong>æ¯ä¸ªMCPæœåŠ¡å™¨æä¾›çš„å·¥å…·ã€èµ„æºéƒ½ä¸ä¸€æ ·ï¼Œä½†å®ƒä»¬éƒ½éµå¾ªç›¸åŒçš„MCPåè®®è§„èŒƒã€‚</strong></p>
<h3 data-id="heading-3">3.1 åè®®çš„åˆ†å±‚è®¾è®¡</h3>
<p>MCPé‡‡ç”¨ <strong>åŸºç¡€åè®® + åŠŸèƒ½æ‰©å±•</strong> çš„è®¾è®¡ï¼Œå°±åƒHTTPåè®®ä¸€æ ·:</p>
<p><strong>æ ¸å¿ƒå±‚(æ‰€æœ‰å®ç°å¿…é¡»æ”¯æŒ)</strong> :</p>
<ul>
<li>JSON-RPC 2.0æ¶ˆæ¯æ ¼å¼</li>
<li>åˆå§‹åŒ–æ¡æ‰‹æµç¨‹(initialize/initialized)</li>
<li>åŸºæœ¬é”™è¯¯å¤„ç†</li>
</ul>
<p><strong>åŠŸèƒ½å±‚(æŒ‰éœ€é€‰æ‹©)</strong> :</p>
<ul>
<li>Resourcesã€Promptsã€Tools(æœåŠ¡å™¨ç«¯)</li>
<li>Rootsã€Samplingã€Elicitation(å®¢æˆ·ç«¯)</li>
</ul>
<p><strong>è¿™æ ·è®¾è®¡çš„å¥½å¤„</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">ç»Ÿä¸€çš„åŸºç¡€åè®® â†’ ä¿è¯äº’æ“ä½œæ€§
<span class="hljs-bullet">     +</span>
çµæ´»çš„åŠŸèƒ½é€‰æ‹© â†’ æ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
<span class="hljs-code">     â†“
æ—¢æ ‡å‡†åŒ–åˆå¯æ‰©å±•
</span></code></pre>
<h3 data-id="heading-4">3.2 åè®®çº¦å®šçš„è¿‡ç¨‹</h3>
<p><strong>æ­¥éª¤1: åŸºç¡€åè®®æ˜¯å›ºå®šçš„</strong><br/>
æ‰€æœ‰MCPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½éµå¾ªç›¸åŒçš„JSON-RPC 2.0æ ¼å¼:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// è¯·æ±‚æ ¼å¼(å›ºå®š)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å¿…é¡»æ˜¯2.0</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ–¹æ³•å"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// è¦è°ƒç”¨çš„æ–¹æ³•</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>         <span class="hljs-comment">// å‚æ•°å¯¹è±¡</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// å“åº”æ ¼å¼(å›ºå®š)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// å¯¹åº”è¯·æ±‚çš„ID</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>         <span class="hljs-comment">// æˆåŠŸç»“æœ</span>
  <span class="hljs-comment">// æˆ– "error": {...}    // é”™è¯¯ä¿¡æ¯</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤2: èƒ½åŠ›åœ¨åˆå§‹åŒ–æ—¶åå•†</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å®¢æˆ·ç«¯å‘èµ·åˆå§‹åŒ–</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"initialize"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sampling"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// æˆ‘æ”¯æŒLLMé‡‡æ ·</span>
      <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>           <span class="hljs-comment">// æˆ‘æ”¯æŒæ ¹ç›®å½•</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clientInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyClient"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æœåŠ¡å™¨å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// æˆ‘æä¾›å·¥å…·</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>       <span class="hljs-comment">// æˆ‘æä¾›èµ„æº</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SQLiteServer"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åå•†å®Œæˆåï¼ŒåŒæ–¹éƒ½çŸ¥é“å¯¹æ–¹æ”¯æŒä»€ä¹ˆåŠŸèƒ½ï¼Œ<strong>åªä½¿ç”¨äº¤é›†éƒ¨åˆ†</strong>ã€‚</p>
<p><strong>æ­¥éª¤3: æ–¹æ³•åç§°æ˜¯æ ‡å‡†åŒ–çš„</strong><br/>
MCPè§„èŒƒå®šä¹‰äº†æ ‡å‡†æ–¹æ³•å:</p>








































<table><thead><tr><th>åŠŸèƒ½</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ—å‡ºèµ„æº</td><td><code>resources/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è¯»å–èµ„æº</td><td><code>resources/read</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>åˆ—å‡ºå·¥å…·</td><td><code>tools/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è°ƒç”¨å·¥å…·</td><td><code>tools/call</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>åˆ—å‡ºæç¤º</td><td><code>prompts/list</code></td><td>å›ºå®šæ–¹æ³•å</td></tr><tr><td>è·å–æç¤º</td><td><code>prompts/get</code></td><td>å›ºå®šæ–¹æ³•å</td></tr></tbody></table>
<p><strong>æ­¥éª¤4: å…·ä½“å†…å®¹æ˜¯ä¸ªæ€§åŒ–çš„</strong><br/>
è™½ç„¶æ–¹æ³•åå›ºå®šï¼Œä½†æ¯ä¸ªæœåŠ¡å™¨è¿”å›çš„<strong>å…·ä½“æ•°æ®</strong>ä¸åŒ:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// SQLiteæœåŠ¡å™¨çš„å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"list_tables"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ—å‡ºæ‰€æœ‰è¡¨"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// FilesystemæœåŠ¡å™¨çš„å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"read_file"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯»å–æ–‡ä»¶"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"write_file"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å†™å…¥æ–‡ä»¶"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"search_files"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœç´¢æ–‡ä»¶"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">3.3 åè®®å‘ç°æœºåˆ¶</h3>
<p>å®¢æˆ·ç«¯å¦‚ä½•çŸ¥é“æœåŠ¡å™¨æœ‰å“ªäº›å·¥å…·?</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåˆ—ä¸¾</strong></p>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨: {"method": <span class="hljs-string">"tools/list"</span>}
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯: {
  "tools": [
    {
      "name": <span class="hljs-string">"query"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span>,
      <span class="hljs-string">"inputSchema"</span>: {           // JSON Schemaå®šä¹‰è¾“å…¥æ ¼å¼
        "type": <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: {
          "sql": {"type": <span class="hljs-string">"string"</span>}
        }
      }
    }
  ]
}
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨</strong></p>
<pre><code class="hljs language-json" lang="json">å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// ä½¿ç”¨ç¬¬ä¸€æ­¥è·å¾—çš„å·¥å…·å</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"sql"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SELECT * FROM users"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>:é€šè¿‡JSON Schemaï¼Œå®¢æˆ·ç«¯çŸ¥é“å¦‚ä½•æ­£ç¡®è°ƒç”¨å·¥å…·ï¼Œæ— éœ€ç¡¬ç¼–ç ã€‚</p>
<h2 data-id="heading-6">å››ã€åè®®åŸºç¡€ï¼šå¦‚ä½•é€šä¿¡?</h2>
<p>MCPåŸºäºJSON-RPC 2.0æ„å»ºï¼Œè¿™æ˜¯ä¸€ä¸ªæˆç†Ÿçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ã€‚ç†è§£è¿™ä¸€å±‚å¯¹æŒæ¡MCPè‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-7">4.1 JSON-RPC 2.0åŸºç¡€</h3>
<p><strong>æ¶ˆæ¯ç±»å‹</strong></p>
<p>MCPä¸­æœ‰ä¸‰ç§åŸºæœ¬æ¶ˆæ¯ç±»å‹ã€‚<br/>
<strong>1. è¯·æ±‚(Request)</strong> - æœŸå¾…å“åº”</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,           <span class="hljs-regexp">//</span> åè®®ç‰ˆæœ¬,å¿…é¡»æ˜¯<span class="hljs-string">"2.0"</span>
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,                     <span class="hljs-regexp">//</span> è¯·æ±‚å”¯ä¸€æ ‡è¯†(å­—ç¬¦ä¸²æˆ–æ•°å­—)
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/list"</span>,     <span class="hljs-regexp">//</span> è¦è°ƒç”¨çš„æ–¹æ³•å
  <span class="hljs-string">"params"</span>: {                  <span class="hljs-regexp">//</span> å¯é€‰çš„å‚æ•°å¯¹è±¡
    <span class="hljs-string">"cursor"</span>: <span class="hljs-string">"page2"</span>
  }
}
</code></pre>
<p><strong>2. å“åº”(Response)</strong> - å¯¹è¯·æ±‚çš„å›å¤</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// æˆåŠŸå“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>                     <span class="hljs-comment">// å¿…é¡»ä¸è¯·æ±‚çš„idç›¸åŒ</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// æˆåŠŸç»“æœ</span>
    <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰§è¡ŒæŸ¥è¯¢"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// é”™è¯¯å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                   <span class="hljs-comment">// é”™è¯¯å¯¹è±¡</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-32602</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// é”™è¯¯ç (æ•´æ•°)</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‚æ•°æ— æ•ˆ"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// é”™è¯¯æè¿°</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// å¯é€‰çš„é¢å¤–ä¿¡æ¯</span>
      <span class="hljs-attr">"field"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cursor"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¼å¼é”™è¯¯"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>3. é€šçŸ¥(Notification)</strong> - å•å‘æ¶ˆæ¯,æ— éœ€å“åº”</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/resources/updated"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// é€šçŸ¥æ–¹æ³•å</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                                   <span class="hljs-comment">// é€šçŸ¥å‚æ•°</span>
    <span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///project/data.json"</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-comment">// æ³¨æ„:æ²¡æœ‰idå­—æ®µ</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ ‡å‡†é”™è¯¯ç </strong></p>
<p>MCPä½¿ç”¨JSON-RPC 2.0çš„æ ‡å‡†é”™è¯¯ç :</p>








































<table><thead><tr><th>é”™è¯¯ç </th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-32700</td><td>Parse error</td><td>JSONè§£æé”™è¯¯</td></tr><tr><td>-32600</td><td>Invalid Request</td><td>æ— æ•ˆçš„è¯·æ±‚æ ¼å¼</td></tr><tr><td>-32601</td><td>Method not found</td><td>æ–¹æ³•ä¸å­˜åœ¨</td></tr><tr><td>-32602</td><td>Invalid params</td><td>å‚æ•°æ— æ•ˆ</td></tr><tr><td>-32603</td><td>Internal error</td><td>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td></tr><tr><td>-32002</td><td>Resource not found</td><td>èµ„æºæœªæ‰¾åˆ°(MCPæ‰©å±•)</td></tr></tbody></table>
<h3 data-id="heading-8">4.2 èƒ½åŠ›åå•†è¯¦è§£</h3>
<p>èƒ½åŠ›åå•†æ˜¯MCPè¿æ¥å»ºç«‹çš„ç¬¬ä¸€æ­¥ï¼Œå†³å®šäº†æ•´ä¸ªä¼šè¯ä¸­å¯ç”¨çš„åŠŸèƒ½ã€‚</p>
<p><strong>åˆå§‹åŒ–æµç¨‹è¯¦è§£</strong></p>
<p><strong>é˜¶æ®µ1: å®¢æˆ·ç«¯å‘èµ·åˆå§‹åŒ–</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"initialize"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å®¢æˆ·ç«¯æ”¯æŒçš„åè®®ç‰ˆæœ¬</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// å®¢æˆ·ç«¯èƒ½åŠ›å£°æ˜</span>
      <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                       <span class="hljs-comment">// æ”¯æŒæ ¹ç›®å½•</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>            <span class="hljs-comment">// æ”¯æŒæ ¹ç›®å½•å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sampling"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>                  <span class="hljs-comment">// æ”¯æŒLLMé‡‡æ ·</span>
      <span class="hljs-attr">"elicitation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// æ”¯æŒç”¨æˆ·è¯¢é—®</span>
      <span class="hljs-attr">"experimental"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                <span class="hljs-comment">// å®éªŒæ€§åŠŸèƒ½</span>
        <span class="hljs-attr">"customFeature"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>            <span class="hljs-comment">// è‡ªå®šä¹‰åŠŸèƒ½</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clientInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                    <span class="hljs-comment">// å®¢æˆ·ç«¯ä¿¡æ¯</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyAIApp"</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// ç¨‹åºå(å¿…å¡«)</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.2.0"</span><span class="hljs-punctuation">,</span>              <span class="hljs-comment">// ç‰ˆæœ¬å·(å¿…å¡«)</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„AIåº”ç”¨"</span>             <span class="hljs-comment">// æ˜¾ç¤ºåç§°(å¯é€‰)</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é˜¶æ®µ2: æœåŠ¡å™¨å“åº”èƒ½åŠ›</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœåŠ¡å™¨é€‰æ‹©çš„åè®®ç‰ˆæœ¬</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                  <span class="hljs-comment">// æœåŠ¡å™¨èƒ½åŠ›å£°æ˜</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                   <span class="hljs-comment">// æ”¯æŒèµ„æº</span>
        <span class="hljs-attr">"subscribe"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>             <span class="hljs-comment">// æ”¯æŒèµ„æºè®¢é˜…</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>            <span class="hljs-comment">// æ”¯æŒèµ„æºåˆ—è¡¨å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                       <span class="hljs-comment">// æ”¯æŒå·¥å…·</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                     <span class="hljs-comment">// æ”¯æŒæç¤ºæ¨¡æ¿</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>           <span class="hljs-comment">// ä¸æ”¯æŒåˆ—è¡¨å˜æ›´é€šçŸ¥</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>                    <span class="hljs-comment">// æ”¯æŒæ—¥å¿—è¾“å‡º</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>                    <span class="hljs-comment">// æœåŠ¡å™¨ä¿¡æ¯</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sqlite-mcp-server"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.1.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SQLite MCPæœåŠ¡å™¨"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"instructions"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­¤æœåŠ¡å™¨æä¾›SQLiteæ•°æ®åº“è®¿é—®èƒ½åŠ›"</span>  <span class="hljs-comment">// å¯é€‰çš„ä½¿ç”¨è¯´æ˜</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é˜¶æ®µ3: å®¢æˆ·ç«¯ç¡®è®¤å°±ç»ª</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/initialized"</span>  <span class="hljs-comment">// æ— id,è¿™æ˜¯é€šçŸ¥</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åè®®ç‰ˆæœ¬åå•†è§„åˆ™</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">å®¢æˆ·ç«¯è¯·æ±‚ç‰ˆæœ¬: <span class="hljs-string">"2024-11-05"</span>
         â†“
    æœåŠ¡å™¨æ”¯æŒ?
    â†™        â†˜
  æ”¯æŒ        ä¸æ”¯æŒ
   â†“            â†“
è¿”å›ç›¸åŒç‰ˆæœ¬  è¿”å›æœåŠ¡å™¨æ”¯æŒçš„æœ€æ–°ç‰ˆæœ¬
   â†“            â†“
åå•†æˆåŠŸ    å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ
              â†™        â†˜
           æ”¯æŒ        ä¸æ”¯æŒ
            â†“            â†“
         åå•†æˆåŠŸ     æ–­å¼€è¿æ¥
</code></pre>
<p><strong>å®é™…ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åœºæ™¯1: ç‰ˆæœ¬åŒ¹é…</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  âœ… æˆåŠŸ

<span class="hljs-comment">// åœºæ™¯2: æœåŠ¡å™¨ç‰ˆæœ¬æ›´æ–°</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-06-01"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  
â†’ å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-05</span> â†’ å¦‚æœä¸æ”¯æŒåˆ™æ–­å¼€

<span class="hljs-comment">// åœºæ™¯3: å®¢æˆ·ç«¯ç‰ˆæœ¬æ›´æ–°</span>
å®¢æˆ·ç«¯<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-01-01"</span>
æœåŠ¡å™¨<span class="hljs-punctuation">:</span> <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span>  
â†’ å®¢æˆ·ç«¯æ£€æŸ¥æ˜¯å¦æ”¯æŒ<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-05</span> â†’ å¦‚æœæ”¯æŒåˆ™é™çº§ä½¿ç”¨
</code></pre>
<p><strong>èƒ½åŠ›äº¤é›†è®¡ç®—</strong></p>
<p>åˆå§‹åŒ–å,åŒæ–¹åªèƒ½ä½¿ç”¨<strong>å…±åŒæ”¯æŒçš„èƒ½åŠ›</strong>:</p>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯èƒ½åŠ›: {roots, sampling, elicitation}
æœåŠ¡å™¨èƒ½åŠ›: {resources, tools, prompts}
         â†“
   å¯ç”¨åŠŸèƒ½é›†åˆ
   â”œâ”€ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨: resources, tools, prompts
   â””â”€ æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯: roots, sampling, elicitation
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># å®¢æˆ·ç«¯ä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> server_capabilities.<span class="hljs-keyword">get</span>(<span class="hljs-string">"tools"</span>):
    <span class="hljs-meta"># æœåŠ¡å™¨æ”¯æŒå·¥å…·,å¯ä»¥è°ƒç”¨</span>
    tools = <span class="hljs-keyword">await</span> session.list_tools()
<span class="hljs-keyword">else</span>:
    <span class="hljs-meta"># æœåŠ¡å™¨ä¸æ”¯æŒå·¥å…·,è·³è¿‡</span>
    print(<span class="hljs-string">"æœåŠ¡å™¨ä¸æä¾›å·¥å…·åŠŸèƒ½"</span>)

<span class="hljs-keyword">if</span> client_capabilities.<span class="hljs-keyword">get</span>(<span class="hljs-string">"sampling"</span>):
    <span class="hljs-meta"># å®¢æˆ·ç«¯æ”¯æŒé‡‡æ ·,æœåŠ¡å™¨å¯ä»¥è¯·æ±‚</span>
    <span class="hljs-meta"># (æœåŠ¡å™¨ç«¯ä¼šæ£€æŸ¥è¿™ä¸ªèƒ½åŠ›)</span>
    pass
</code></pre>
<h3 data-id="heading-9">4.3 è¿æ¥ç”Ÿå‘½å‘¨æœŸæ·±å…¥</h3>
<p><strong>å®Œæ•´çš„æ¶ˆæ¯æ—¶åºå›¾</strong></p>
<pre><code class="hljs language-scss" lang="scss">å®¢æˆ·ç«¯                                            æœåŠ¡å™¨
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">1</span>. initialize (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚     {protocolVersion, capabilities}          â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">2</span>. initialize (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {protocolVersion, capabilities}          â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">3</span>. initialized (é€šçŸ¥)                        â”‚ 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                                              â”‚
  â”‚â•â•â•â•â•â•â•â•â•â•â• æ­£å¸¸æ“ä½œé˜¶æ®µ â•â•â•â•â•â•â•â•â•â•â•â•        â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">4</span>. tools/list (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">5</span>. tools/list (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {tools: [...]}                           â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">6</span>. tools/call (è¯·æ±‚)                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚     {name: <span class="hljs-string">"query"</span>, arguments: {...}}        â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">7</span>. notifications/progress (é€šçŸ¥)             â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {progress: <span class="hljs-number">50</span>, total: <span class="hljs-number">100</span>}               â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">8</span>. tools/call (å“åº”)                         â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {<span class="hljs-attribute">content</span>: [...]}                         â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">9</span>. notifications/resources/updated          â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚     {uri: <span class="hljs-string">"file://..."</span>}                      â”‚
  â”‚                                              â”‚
  â”‚â•â•â•â•â•â•â•â•â•â•â• å…³é—­é˜¶æ®µ â•â•â•â•â•â•â•â•â•â•â•           â”‚
  â”‚                                              â”‚
  â”‚  <span class="hljs-number">10</span>. å…³é—­stdin                               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€X                             â”‚
  â”‚                                             â”‚
  â”‚                                          æœåŠ¡å™¨é€€å‡º
</code></pre>
<p><strong>åˆå§‹åŒ–å‰çš„é™åˆ¶</strong></p>
<p>åœ¨<code>initialized</code>é€šçŸ¥å‘é€å‰:</p>
<p><strong>å®¢æˆ·ç«¯åªèƒ½å‘é€</strong>:</p>
<ul>
<li>âœ… <code>initialize</code>è¯·æ±‚</li>
<li>âœ… <code>ping</code>è¯·æ±‚(ç”¨äºä¿æ´»)</li>
<li>âŒ å…¶ä»–ä»»ä½•è¯·æ±‚</li>
</ul>
<p><strong>æœåŠ¡å™¨åªèƒ½å‘é€</strong>:</p>
<ul>
<li>âœ… <code>initialize</code>å“åº”</li>
<li>âœ… <code>ping</code>è¯·æ±‚</li>
<li>âœ… <code>logging</code>é€šçŸ¥(æ—¥å¿—)</li>
<li>âŒ å…¶ä»–ä»»ä½•æ¶ˆæ¯</li>
</ul>
<p><strong>è¿åé™åˆ¶çš„åæœ</strong>:</p>
<pre><code class="hljs language-css" lang="css">// å®¢æˆ·ç«¯åœ¨åˆå§‹åŒ–å‰è°ƒç”¨tools/list
è¯·æ±‚: {"method": <span class="hljs-string">"tools/list"</span>}
å“åº”: {
  "error": {
    "<span class="hljs-selector-tag">code</span>": -<span class="hljs-number">32600</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"ä¼šè¯æœªåˆå§‹åŒ–"</span>
  }
}
</code></pre>
<p><strong>è¶…æ—¶å’Œé‡è¯•æœºåˆ¶</strong></p>
<p><strong>è¯·æ±‚è¶…æ—¶</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-comment"># è®¾ç½®30ç§’è¶…æ—¶</span>
<span class="hljs-keyword">try</span>:
    result = <span class="hljs-keyword">await</span> asyncio.wait_for(
        session.call_tool(<span class="hljs-string">"slow_operation"</span>, {}),
        timeout=<span class="hljs-number">30.0</span>
    )
<span class="hljs-keyword">except</span> asyncio.TimeoutError:
    <span class="hljs-comment"># å‘é€å–æ¶ˆé€šçŸ¥</span>
    <span class="hljs-keyword">await</span> session.send_notification(
        <span class="hljs-string">"notifications/cancelled"</span>,
        {<span class="hljs-string">"requestId"</span>: <span class="hljs-string">"123"</span>, <span class="hljs-string">"reason"</span>: <span class="hljs-string">"è¶…æ—¶"</span>}
    )
</code></pre>
<p><strong>è¿›åº¦é€šçŸ¥é‡ç½®è¶…æ—¶</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å½“æ”¶åˆ°è¿›åº¦é€šçŸ¥æ—¶,å¯ä»¥é‡ç½®è¶…æ—¶è®¡æ—¶å™¨</span>
<span class="hljs-attr">timeout</span> = <span class="hljs-number">30</span>  <span class="hljs-comment"># åŸºç¡€è¶…æ—¶</span>
<span class="hljs-attr">max_timeout</span> = <span class="hljs-number">300</span>  <span class="hljs-comment"># æœ€å¤§è¶…æ—¶(5åˆ†é’Ÿ)</span>

while True:
    try:
        <span class="hljs-attr">msg</span> = await wait_for_message(timeout)
        if <span class="hljs-attr">msg.method</span> == <span class="hljs-string">"notifications/progress"</span>:
            <span class="hljs-comment"># æ”¶åˆ°è¿›åº¦,é‡ç½®è¶…æ—¶</span>
            <span class="hljs-attr">timeout</span> = <span class="hljs-number">30</span>
    except TimeoutError:
        <span class="hljs-comment"># è¶…æ—¶å¤„ç†</span>
        break
</code></pre>
<h3 data-id="heading-10">4.4 ä¼ è¾“æ–¹å¼å¯¹æ¯”</h3>
<p><strong>stdioä¼ è¾“è¯¦è§£</strong></p>
<p><strong>ä¼˜ç‚¹</strong>:</p>
<ul>
<li>âœ… ç®€å•ç›´æ¥,é€‚åˆæœ¬åœ°å¼€å‘</li>
<li>âœ… è¿›ç¨‹éš”ç¦»,å®‰å…¨æ€§å¥½</li>
<li>âœ… è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</li>
<li>âœ… æ— éœ€ç½‘ç»œé…ç½®</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>:</p>
<ul>
<li>âŒ åªèƒ½æœ¬åœ°ä½¿ç”¨</li>
<li>âŒ ä¸æ”¯æŒå¤šå®¢æˆ·ç«¯</li>
<li>âŒ è°ƒè¯•ç›¸å¯¹å›°éš¾</li>
</ul>
<p><strong>æ¶ˆæ¯æ ¼å¼</strong>:</p>
<pre><code class="hljs">æ¶ˆæ¯1\n
æ¶ˆæ¯2\n
æ¶ˆæ¯3\n
</code></pre>
<p>æ¯ä¸ªJSONå¯¹è±¡å ä¸€è¡Œ,ä»¥<code>\n</code>åˆ†éš”ã€‚</p>
<p><strong>HTTPä¼ è¾“è¯¦è§£</strong></p>
<p><strong>æ¶æ„</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         HTTP POST         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚         â”‚
â”‚ å®¢æˆ·ç«¯  â”‚  è¯·æ±‚/é€šçŸ¥/å“åº”(JSON-RPC) â”‚ æœåŠ¡å™¨  â”‚
â”‚         â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     HTTP å“åº”/SSEæµ       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             (application/json æˆ–
              text/event-stream)
</code></pre>
<p><strong>å‘é€æ¶ˆæ¯(POST)</strong> :</p>
<pre><code class="hljs language-bash" lang="bash">POST /mcp HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Accept: application/json, text/event-stream
Mcp-Session-Id: abc123

{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:1,<span class="hljs-string">"method"</span>:<span class="hljs-string">"tools/list"</span>}
</code></pre>
<p><strong>ç«‹å³å“åº”(JSON)</strong> :</p>
<pre><code class="hljs language-css" lang="css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Content</span>-Type: application/json

{"jsonrpc":<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"result"</span>:{"tools":[...]}}
</code></pre>
<p><strong>æµå¼å“åº”(SSE)</strong> :</p>
<pre><code class="hljs language-vbnet" lang="vbnet">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
Content-Type: <span class="hljs-keyword">text</span>/<span class="hljs-keyword">event</span>-stream
Mcp-Session-Id: abc123

<span class="hljs-symbol">id:</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/progress"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"progress"</span>:<span class="hljs-number">25</span>}}

<span class="hljs-symbol">id:</span> <span class="hljs-number">2</span>  
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/progress"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"progress"</span>:<span class="hljs-number">50</span>}}

<span class="hljs-symbol">id:</span> <span class="hljs-number">3</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"result"</span>:{<span class="hljs-string">"content"</span>:[...]}}
</code></pre>
<p><strong>æ¥æ”¶æœåŠ¡å™¨æ¶ˆæ¯(GET)</strong> :</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">GET</span> /mcp HTTP/<span class="hljs-number">1.1</span>
<span class="hljs-symbol">Host:</span> localhost:<span class="hljs-number">8080</span>
<span class="hljs-symbol">Accept:</span> <span class="hljs-keyword">text</span>/<span class="hljs-keyword">event</span>-stream
Mcp-Session-Id: abc123
Last-<span class="hljs-keyword">Event</span>-ID: <span class="hljs-number">42</span>
</code></pre>
<p><strong>ä¼šè¯ç®¡ç†</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœåŠ¡å™¨ç«¯è®¾ç½®ä¼šè¯ID</span>
<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/mcp"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_mcp</span>(<span class="hljs-params">request</span>):
    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">"initialize"</span>:
        session_id = generate_session_id()
        <span class="hljs-keyword">return</span> Response(
            content=json.dumps(result),
            headers={<span class="hljs-string">"Mcp-Session-Id"</span>: session_id}
        )

<span class="hljs-comment"># å®¢æˆ·ç«¯åç»­è¯·æ±‚æºå¸¦ä¼šè¯ID</span>
<span class="hljs-meta">@client.request</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_request</span>(<span class="hljs-params">method, params</span>):
    headers = {}
    <span class="hljs-keyword">if</span> self.session_id:
        headers[<span class="hljs-string">"Mcp-Session-Id"</span>] = self.session_id
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> http.post(
        <span class="hljs-string">"/mcp"</span>,
        json={<span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>, <span class="hljs-string">"method"</span>: method, <span class="hljs-string">"params"</span>: params},
        headers=headers
    )
</code></pre>
<p><strong>æ–­çº¿é‡è¿</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_sse</span>(<span class="hljs-params">last_event_id=<span class="hljs-literal">None</span></span>):
    headers = {<span class="hljs-string">"Accept"</span>: <span class="hljs-string">"text/event-stream"</span>}
    <span class="hljs-keyword">if</span> last_event_id:
        headers[<span class="hljs-string">"Last-Event-ID"</span>] = last_event_id
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.stream(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"/mcp"</span>, headers=headers) <span class="hljs-keyword">as</span> stream:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> stream.aiter_lines():
            <span class="hljs-keyword">if</span> line.startswith(<span class="hljs-string">"id:"</span>):
                last_event_id = line[<span class="hljs-number">3</span>:].strip()
            <span class="hljs-keyword">elif</span> line.startswith(<span class="hljs-string">"data:"</span>):
                data = json.loads(line[<span class="hljs-number">5</span>:])
                <span class="hljs-keyword">yield</span> data, last_event_id
</code></pre>
<h3 data-id="heading-11">4.5 å®é™…é€šä¿¡ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå®Œæ•´çš„SQLiteæŸ¥è¯¢åœºæ™¯:</p>
<pre><code class="hljs language-css" lang="css">// <span class="hljs-number">1</span>. åˆ—å‡ºå·¥å…·
å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/list"</span>
}

æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"result"</span>: {
    "tools": [
      {
        "name": <span class="hljs-string">"query"</span>,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ‰§è¡ŒSQLæŸ¥è¯¢"</span>,
        <span class="hljs-string">"inputSchema"</span>: {
          "type": <span class="hljs-string">"object"</span>,
          <span class="hljs-string">"properties"</span>: {
            "sql": {"type": <span class="hljs-string">"string"</span>}
          },
          "required": [<span class="hljs-string">"sql"</span>]
        }
      }
    ]
  }
}

// <span class="hljs-number">2</span>. è°ƒç”¨æŸ¥è¯¢å·¥å…·
å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"tools/call"</span>,
  <span class="hljs-string">"params"</span>: {
    "name": <span class="hljs-string">"query"</span>,
    <span class="hljs-string">"arguments"</span>: {
      "sql": <span class="hljs-string">"SELECT COUNT(*) FROM users WHERE active = 1"</span>
    },
    "_meta": {
      "progressToken": <span class="hljs-string">"query-123"</span>  // è¯·æ±‚è¿›åº¦é€šçŸ¥
    }
  }
}

// <span class="hljs-number">3</span>. æœåŠ¡å™¨å‘é€è¿›åº¦(å¼‚æ­¥é€šçŸ¥)
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"notifications/progress"</span>,
  <span class="hljs-string">"params"</span>: {
    "progressToken": <span class="hljs-string">"query-123"</span>,
    <span class="hljs-string">"progress"</span>: <span class="hljs-number">50</span>,
    <span class="hljs-string">"total"</span>: <span class="hljs-number">100</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ­£åœ¨æ‰«æusersè¡¨..."</span>
  }
}

// <span class="hljs-number">4</span>. è¿”å›æŸ¥è¯¢ç»“æœ
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯:
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"result"</span>: {
    "<span class="hljs-attribute">content</span>": [
      {
        "type": <span class="hljs-string">"text"</span>,
        <span class="hljs-string">"text"</span>: <span class="hljs-string">"æŸ¥è¯¢ç»“æœ: 1,234ä¸ªæ´»è·ƒç”¨æˆ·"</span>
      }
    ],
    "isError": false
  }
}

// <span class="hljs-number">5</span>. å¦‚æœæŸ¥è¯¢å‡ºé”™
æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯(é”™è¯¯æƒ…å†µ):
{
  "jsonrpc": <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"error"</span>: {
    "<span class="hljs-selector-tag">code</span>": -<span class="hljs-number">32603</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"SQLè¯­æ³•é”™è¯¯"</span>,
    <span class="hljs-string">"data"</span>: {
      "sql": <span class="hljs-string">"SELECT COUNT(*) FROM users WHERE active = 1"</span>,
      <span class="hljs-string">"error"</span>: <span class="hljs-string">"near "</span>WHERE<span class="hljs-string">": syntax error"</span>,
      <span class="hljs-string">"position"</span>: <span class="hljs-number">35</span>
    }
  }
}
</code></pre>
<p>è¿™å°±æ˜¯MCPé€šä¿¡çš„å®Œæ•´è¿‡ç¨‹!é€šè¿‡JSON-RPC 2.0ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥è¿›è¡Œç»“æ„åŒ–ã€ç±»å‹å®‰å…¨çš„é€šä¿¡ã€‚</p>
<h2 data-id="heading-12">äº”ã€æœåŠ¡å™¨èƒ½åŠ›ï¼šä¸‰ç§æ ¸å¿ƒåŠŸèƒ½</h2>
<p>MCPæœåŠ¡å™¨å¯ä»¥æä¾›ä¸‰ç§åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-13">5.1 Resources(èµ„æº)ï¼šåº”ç”¨å†³å®šç”¨ä»€ä¹ˆ</h3>
<p><strong>èµ„æºå°±æ˜¯æ•°æ®</strong>ï¼Œæ¯”å¦‚æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€APIå“åº”ã€‚</p>
<p><strong>è°æ§åˆ¶</strong>: åº”ç”¨ç¨‹åºå†³å®šæŠŠå“ªäº›èµ„æºæä¾›ç»™AI</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åˆ—å‡ºæ‰€æœ‰å¯ç”¨èµ„æº</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resources/list"</span><span class="hljs-punctuation">}</span>

<span class="hljs-comment">// è¯»å–æŸä¸ªèµ„æº</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resources/read"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///project/main.py"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>èµ„æºURIç¤ºä¾‹</strong>:</p>
<ul>
<li><code>file:///project/src/main.py</code> - æ–‡ä»¶</li>
<li><code>db://schema/users</code> - æ•°æ®åº“è¡¨ç»“æ„</li>
<li><code>git://commits/main</code> - Gitæäº¤å†å²</li>
<li><code>https://api.example.com/data</code> - Web API</li>
</ul>
<p><strong>è®¢é˜…å˜æ›´</strong>: å¯ä»¥è®¢é˜…èµ„æº,å½“å®ƒå˜åŒ–æ—¶è‡ªåŠ¨æ”¶åˆ°é€šçŸ¥ã€‚</p>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: FilesystemæœåŠ¡å™¨æš´éœ²èµ„æº</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"uri"</span>: <span class="hljs-string">"file:///Users/alice/project/src/main.py"</span>,  <span class="hljs-comment">// Pythonæºæ–‡ä»¶</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"main.py"</span>,                                  <span class="hljs-comment">// æ–‡ä»¶å</span>
  <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"text/x-python"</span>,                        <span class="hljs-comment">// æ–‡ä»¶ç±»å‹</span>
  <span class="hljs-string">"text"</span>: <span class="hljs-string">"import os<span class="hljs-subst">\n</span>def main()..."</span>                  <span class="hljs-comment">// æ–‡ä»¶å†…å®¹</span>
}
</code></pre>
<p>å®¢æˆ·ç«¯AIå¯ä»¥è¯»å–è¿™ä¸ªèµ„æºï¼Œç†è§£ä»£ç ç»“æ„åæä¾›é‡æ„å»ºè®®æˆ–ç”Ÿæˆæµ‹è¯•ã€‚</p>
<h3 data-id="heading-14">5.2 Prompts(æç¤ºæ¨¡æ¿)ï¼šç”¨æˆ·é€‰æ‹©ç”¨ä»€ä¹ˆ</h3>
<p><strong>ä»€ä¹ˆæ˜¯Prompt?</strong></p>
<p>Promptå°±åƒæ˜¯ã€Œå¯¹è¯æ¨¡æ¿ã€æˆ–ã€Œå¿«æ·æŒ‡ä»¤ã€ï¼ŒæŠŠå¸¸ç”¨çš„å¤æ‚æŒ‡ä»¤é¢„è®¾å¥½ï¼Œç”¨æˆ·ä¸€é”®è°ƒç”¨ã€‚ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­ç±»æ¯”ï¼Œå°±åƒå¾®ä¿¡çš„ã€Œå¿«æ·å›å¤ã€æˆ–IDEä¸­çš„ã€Œä»£ç ç‰‡æ®µ(Snippet)ã€ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦Prompt?</strong><br/>
åœºæ™¯1:æ²¡æœ‰Promptæ—¶</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æ¯æ¬¡éƒ½è¦è¾“å…¥:
"è¯·åˆ†æè¿™ä¸ªGitä»“åº“æœ€è¿‘ä¸€å‘¨çš„æäº¤,ç»Ÿè®¡:
<span class="hljs-bullet">1.</span> æ€»æäº¤æ¬¡æ•°
<span class="hljs-bullet">2.</span> æ¯ä¸ªä½œè€…çš„è´¡çŒ®
<span class="hljs-bullet">3.</span> ä¿®æ”¹çš„ä¸»è¦æ–‡ä»¶
<span class="hljs-bullet">4.</span> æ˜¯å¦æœ‰ç ´åæ€§å˜æ›´
è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡º"
</code></pre>
<p>åœºæ™¯2:æœ‰Promptå</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·åªéœ€:</span>
1. ç‚¹å‡» <span class="hljs-string">"/analyze-commits"</span> å‘½ä»¤
2. é€‰æ‹©åˆ†æ”¯ <span class="hljs-string">"main"</span>
3. AIè‡ªåŠ¨æ‰§è¡Œå®Œæ•´åˆ†æ
</code></pre>
<p><strong>Promptçš„æ•°æ®ç»“æ„</strong></p>
<p><strong>å®šä¹‰ä¸€ä¸ªPrompt</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"analyze_commits"</span><span class="hljs-punctuation">,</span>              <span class="hljs-comment">// Promptçš„å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æäº¤å†å²åˆ†æ"</span><span class="hljs-punctuation">,</span>                  <span class="hljs-comment">// ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„åç§°</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†æGitæäº¤å¹¶ç”ŸæˆæŠ¥å‘Š"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// åŠŸèƒ½è¯´æ˜</span>
  <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                          <span class="hljs-comment">// éœ€è¦çš„å‚æ•°åˆ—è¡¨</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"branch"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// å‚æ•°å</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¦åˆ†æçš„åˆ†æ”¯å"</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å‚æ•°è¯´æ˜</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>                    <span class="hljs-comment">// æ˜¯å¦å¿…å¡«</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"since"</span><span class="hljs-punctuation">,</span>                    <span class="hljs-comment">// æ—¶é—´èŒƒå›´</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"èµ·å§‹æ—¥æœŸ(å¦‚:7 days ago)"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>                   <span class="hljs-comment">// å¯é€‰å‚æ•°</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"author"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// ä½œè€…è¿‡æ»¤</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åªçœ‹æŸä¸ªä½œè€…çš„æäº¤"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹</strong></p>
<p><strong>æ­¥éª¤1: åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„Prompt</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å®¢æˆ·ç«¯è¯·æ±‚</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prompts/list"</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æœåŠ¡å™¨å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"analyze_commits"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ“Š æäº¤å†å²åˆ†æ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†ææŒ‡å®šåˆ†æ”¯çš„æäº¤å†å²,ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"branch"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"since"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"review_code"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ” ä»£ç å®¡æŸ¥"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¯¹ä»£ç è¿›è¡Œè´¨é‡å®¡æŸ¥å’Œæ”¹è¿›å»ºè®®"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file_path"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"focus"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explain_error"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ğŸ› é”™è¯¯è¯Šæ–­"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è§£é‡Šé”™è¯¯ä¿¡æ¯å¹¶æä¾›ä¿®å¤å»ºè®®"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error_message"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤2: ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçœ‹åˆ°è¿™äº›é€‰é¡¹</strong></p>
<pre><code class="hljs language-bash" lang="bash">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  å¯ç”¨å‘½ä»¤:
  
  ğŸ“Š /analyze-commits
     åˆ†ææŒ‡å®šåˆ†æ”¯çš„æäº¤å†å²
     
  ğŸ” /review-code  
     å¯¹ä»£ç è¿›è¡Œè´¨é‡å®¡æŸ¥
     
  ğŸ› /explain-error
     è§£é‡Šé”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
</code></pre>
<p><strong>æ­¥éª¤3: ç”¨æˆ·é€‰æ‹©å¹¶å¡«å†™å‚æ•°</strong></p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·è¾“å…¥: /analyze-commits

ç³»ç»Ÿå¼¹çª—:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æäº¤å†å²åˆ†æ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†æ”¯å *: <span class="hljs-section">[main      ]</span> â”‚
â”‚ æ—¶é—´èŒƒå›´: <span class="hljs-section">[7 days ago]</span> â”‚
â”‚ ä½œè€…:     <span class="hljs-section">[          ]</span> â”‚
â”‚                         â”‚
â”‚      <span class="hljs-section">[å–æ¶ˆ]</span>  <span class="hljs-section">[ç¡®å®š]</span>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>æ­¥éª¤4: è·å–å®Œæ•´çš„Promptå†…å®¹</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å®¢æˆ·ç«¯è¯·æ±‚</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"prompts/get"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"analyze_commits"</span>,       <span class="hljs-comment">// ä½¿ç”¨å“ªä¸ªæ¨¡æ¿</span>
    <span class="hljs-string">"arguments"</span>: {                    <span class="hljs-comment">// ç”¨æˆ·å¡«å†™çš„å‚æ•°</span>
      <span class="hljs-string">"branch"</span>: <span class="hljs-string">"main"</span>,
      <span class="hljs-string">"since"</span>: <span class="hljs-string">"7 days ago"</span>
    }
  }
}

<span class="hljs-comment">// æœåŠ¡å™¨å“åº” - è¿”å›å®Œæ•´çš„å¯¹è¯æ¶ˆæ¯</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"result"</span>: {
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"åˆ†æmainåˆ†æ”¯æœ€è¿‘7å¤©çš„æäº¤"</span>,
    <span class="hljs-string">"messages"</span>: [                     <span class="hljs-comment">// å‘é€ç»™AIçš„å®Œæ•´å¯¹è¯</span>
      {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,               <span class="hljs-comment">// ç”¨æˆ·è§’è‰²</span>
        <span class="hljs-string">"content"</span>: {
          <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
          <span class="hljs-string">"text"</span>: <span class="hljs-string">"è¯·åˆ†æmainåˆ†æ”¯åœ¨è¿‡å»7å¤©çš„Gitæäº¤å†å²ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>éœ€è¦ç»Ÿè®¡:<span class="hljs-subst">\n</span>1. æ€»æäº¤æ¬¡æ•°<span class="hljs-subst">\n</span>2. æ¯ä¸ªä½œè€…çš„è´¡çŒ®æ¬¡æ•°å’Œä»£ç è¡Œæ•°<span class="hljs-subst">\n</span>3. ä¸»è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨<span class="hljs-subst">\n</span>4. æ˜¯å¦åŒ…å«breaking changes<span class="hljs-subst">\n</span>5. æäº¤æ¶ˆæ¯çš„è§„èŒƒæ€§<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡ºç»“æœ,å¹¶åœ¨æœ€åç»™å‡ºæ”¹è¿›å»ºè®®ã€‚"</span>
        }
      }
    ]
  }
}
</code></pre>
<p><strong>æ­¥éª¤5: å®¢æˆ·ç«¯å°†æ¶ˆæ¯å‘é€ç»™AI</strong></p>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·çœ‹åˆ°AIæ­£åœ¨åˆ†æ...

AIè¿”å›:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š mainåˆ†æ”¯æäº¤åˆ†ææŠ¥å‘Š(æœ€è¿‘7å¤©)

æ€»æäº¤æ¬¡æ•°: 23

ä½œè€…è´¡çŒ®ç»Ÿè®¡:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½œè€…       â”‚ æäº¤æ•° â”‚ ä»£ç è¡Œæ•°  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Alice      â”‚   12   â”‚  +543/-89â”‚
â”‚ Bob        â”‚    8   â”‚  +234/-45â”‚
â”‚ Charlie    â”‚    3   â”‚  +123/-12â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸»è¦ä¿®æ”¹æ–‡ä»¶:
- src/api/users.py (8æ¬¡ä¿®æ”¹)
- src/models/user.py (5æ¬¡ä¿®æ”¹)
- tests/test_user.py (4æ¬¡ä¿®æ”¹)

Breaking Changes: æ— 

æäº¤è§„èŒƒæ€§: è‰¯å¥½ (91%ç¬¦åˆConventional Commits)

æ”¹è¿›å»ºè®®:
1. å»ºè®®å¢åŠ å•å…ƒæµ‹è¯•è¦†ç›–ç‡
2. éƒ¨åˆ†æäº¤æ¶ˆæ¯è¿‡äºç®€çŸ­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
</code></pre>
<p><strong>Promptçš„å†…å®¹ç±»å‹</strong></p>
<p>Promptæ¶ˆæ¯ä¸­å¯ä»¥åŒ…å«å¤šç§å†…å®¹:<br/>
<strong>1. çº¯æ–‡æœ¬</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·å®¡æŸ¥è¿™æ®µä»£ç ..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>2. åµŒå…¥å›¾ç‰‡</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base64-encoded-image-data"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// å›¾ç‰‡æ•°æ®</span>
    <span class="hljs-attr">"mimeType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>                  <span class="hljs-comment">// å›¾ç‰‡ç±»å‹</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>3. åµŒå…¥èµ„æº</strong>(å¼•ç”¨MCPèµ„æº)</p>
<pre><code class="hljs language-swift" lang="swift">{
  <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
  <span class="hljs-string">"content"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"resource"</span>,
    <span class="hljs-string">"resource"</span>: {
      <span class="hljs-string">"uri"</span>: <span class="hljs-string">"file:///project/src/user.py"</span>,  <span class="hljs-comment">// èµ„æºURI</span>
      <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"text/x-python"</span>,
      <span class="hljs-string">"text"</span>: <span class="hljs-string">"class User:<span class="hljs-subst">\n</span>    def __init__..."</span>  <span class="hljs-comment">// èµ„æºå†…å®¹</span>
    }
  }
}
</code></pre>
<p><strong>4. å¤šè½®å¯¹è¯</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘æƒ³ä¼˜åŒ–è¿™æ®µä»£ç "</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>                    <span class="hljs-comment">// AIçš„å›å¤</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æä¾›ä»£ç å†…å®¹"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resource"</span><span class="hljs-punctuation">,</span>                   <span class="hljs-comment">// ç”¨æˆ·æä¾›ä»£ç </span>
        <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Prompt vs Tool vs Resource å¯¹æ¯”</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç‰¹æ€§          Prompt              Tool                Resource
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ§åˆ¶è€…        ç”¨æˆ·ä¸»åŠ¨é€‰æ‹©         AIè‡ªåŠ¨å†³å®š           åº”ç”¨ç¨‹åºæ§åˆ¶

è§¦å‘æ–¹å¼      ç”¨æˆ·ç‚¹å‡»å‘½ä»¤         AIåˆ¤æ–­éœ€è¦è°ƒç”¨       åº”ç”¨è‡ªåŠ¨é™„åŠ 
              /analyze                              æˆ–ç”¨æˆ·é€‰æ‹©
              
è¿”å›å†…å®¹      å¯¹è¯æ¶ˆæ¯            æ‰§è¡Œç»“æœ             æ•°æ®å†…å®¹
              (ç»™AIçš„æŒ‡ä»¤)        (å‡½æ•°è¿”å›å€¼)         (ä¸Šä¸‹æ–‡ä¿¡æ¯)
              
å…¸å‹ç”¨é€”      å·¥ä½œæµæ¨¡æ¿          æ‰§è¡Œæ“ä½œ             æä¾›èƒŒæ™¯ä¿¡æ¯
              å¿«æ·æŒ‡ä»¤            æŸ¥è¯¢æ•°æ®             æ–‡ä»¶å†…å®¹
              
ç¤ºä¾‹          ä»£ç å®¡æŸ¥æ¨¡æ¿        æ‰§è¡ŒSQLæŸ¥è¯¢          é¡¹ç›®README
              é”™è¯¯è¯Šæ–­å‘å¯¼        å‘é€é‚®ä»¶             æ•°æ®åº“Schema
              
ç”¨æˆ·æ„ŸçŸ¥      âœ… æ˜æ˜¾             â“ å¯èƒ½ä¸çŸ¥é“         â“ é€æ˜çš„
              (ç”¨æˆ·ç‚¹å‡»)          (AIå†³å®š)            (è‡ªåŠ¨åŠ è½½)
</code></pre>
<p>Promptæ˜¯é¢„è®¾çš„å¯¹è¯æ¨¡æ¿ï¼Œé€šè¿‡å‚æ•°åŒ–å®ç°çµæ´»åº”ç”¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œå¹¶èƒ½ä¸MCPå…¶ä»–èƒ½åŠ›ç»„åˆå½¢æˆå®Œæ•´å·¥ä½œæµã€‚</p>
<p><strong>ä»£ç å®ç°ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœåŠ¡å™¨ç«¯:æ³¨å†ŒPrompt</span>
<span class="hljs-meta">@server.list_prompts()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_prompts</span>():
    <span class="hljs-keyword">return</span> [
        Prompt(
            name=<span class="hljs-string">"analyze_commits"</span>,
            title=<span class="hljs-string">"ğŸ“Š æäº¤å†å²åˆ†æ"</span>,
            description=<span class="hljs-string">"åˆ†æGitæäº¤å†å²å¹¶ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"</span>,
            arguments=[
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"branch"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åˆ†æ”¯å"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">True</span>},
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"since"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"æ—¶é—´èŒƒå›´"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">False</span>}
            ]
        )
    ]

<span class="hljs-meta">@server.get_prompt()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_prompt</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"analyze_commits"</span>:
        branch = arguments[<span class="hljs-string">"branch"</span>]
        since = arguments.get(<span class="hljs-string">"since"</span>, <span class="hljs-string">"7 days ago"</span>)
        
        <span class="hljs-comment"># æ„å»ºå®Œæ•´çš„æç¤ºæ¶ˆæ¯</span>
        prompt_text = <span class="hljs-string">f"""
è¯·åˆ†æ<span class="hljs-subst">{branch}</span>åˆ†æ”¯åœ¨<span class="hljs-subst">{since}</span>çš„Gitæäº¤å†å²ã€‚

éœ€è¦ç»Ÿè®¡:
1. æ€»æäº¤æ¬¡æ•°
2. æ¯ä¸ªä½œè€…çš„è´¡çŒ®
3. ä¸»è¦ä¿®æ”¹çš„æ–‡ä»¶
4. æ˜¯å¦æœ‰breaking changes

è¯·ç”¨è¡¨æ ¼æ ¼å¼è¾“å‡ºã€‚
        """</span>
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [
                {
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                    <span class="hljs-string">"content"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: prompt_text}
                }
            ]
        }

<span class="hljs-comment"># å®¢æˆ·ç«¯:ä½¿ç”¨Prompt</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">use_prompt</span>(<span class="hljs-params">session, prompt_name, arguments</span>):
    <span class="hljs-comment"># è·å–Promptå†…å®¹</span>
    prompt = <span class="hljs-keyword">await</span> session.get_prompt(
        name=prompt_name,
        arguments=arguments
    )
    
    <span class="hljs-comment"># å°†æ¶ˆæ¯å‘é€ç»™AI</span>
    <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> prompt.messages:
        ai_response = <span class="hljs-keyword">await</span> send_to_ai(message)
        <span class="hljs-built_in">print</span>(ai_response)
</code></pre>
<h3 data-id="heading-15">5.3 Tools(å·¥å…·)ï¼šAI è‡ªå·±å†³å®šç”¨ä»€ä¹ˆ</h3>
<p><strong>Toolå°±æ˜¯å¯æ‰§è¡Œçš„å‡½æ•°</strong>ï¼Œæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨APIã€å†™æ–‡ä»¶ã€‚</p>
<p><strong>è°æ§åˆ¶</strong>ï¼šAIæ¨¡å‹æ ¹æ®å¯¹è¯å†…å®¹è‡ªå·±å†³å®šè°ƒç”¨å“ªä¸ªå·¥å…·</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åˆ—å‡ºå¯ç”¨å·¥å…·</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/list"</span><span class="hljs-punctuation">}</span>

<span class="hljs-comment">// AIè°ƒç”¨å·¥å…·</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_weather"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"city"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŒ—äº¬"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›ç»“æœ</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŒ—äº¬å¤©æ°”:æ™´,æ¸©åº¦22Â°C"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"isError"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-16">5.4 å…¶ä»–åŠŸèƒ½</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Fcompletion" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/completion" ref="nofollow noopener noreferrer"><strong>è¡¥å…¨</strong></a></p>
<p>MCPæä¾›æ ‡å‡†åŒ–çš„å‚æ•°è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œæ”¯æŒä¸ºæç¤ºå’Œèµ„æºURIæä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„å»ºè®®ï¼Œå®ç°ç±»ä¼¼IDEçš„äº¤äº’ä½“éªŒã€‚æœåŠ¡å™¨é€šè¿‡å£°æ˜<code>completions</code>èƒ½åŠ›ï¼Œæ”¯æŒå¯¹<code>ref/prompt</code>å’Œ<code>ref/resource</code>ä¸¤ç§å¼•ç”¨ç±»å‹çš„è¡¥å…¨ï¼Œæ¯æ¬¡æœ€å¤šè¿”å›100ä¸ªæŒ‰ç›¸å…³æ€§æ’åºçš„å»ºè®®å€¼ï¼Œå¹¶å¯é€šè¿‡<code>completion/complete</code>è¯·æ±‚è·å–è¡¥å…¨ç»“æœã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Flogging" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/logging" ref="nofollow noopener noreferrer"><strong>æ—¥å¿—</strong></a></p>
<p>MCPæä¾›ç»“æ„åŒ–æ—¥å¿—æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå…è®¸æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€åŒ…å«ä¸¥é‡æ€§çº§åˆ«ã€å¯é€‰è®°å½•å™¨åç§°å’Œä»»æ„JSONå¯åºåˆ—åŒ–æ•°æ®çš„æ—¥å¿—é€šçŸ¥ã€‚æœåŠ¡å™¨éœ€å£°æ˜<code>logging</code>èƒ½åŠ›ï¼Œæ”¯æŒéµå¾ªRFC 5424æ ‡å‡†çš„æ—¥å¿—çº§åˆ«ï¼ˆä»debugåˆ°emergencyï¼‰ï¼Œå®¢æˆ·ç«¯å¯é€šè¿‡<code>logging/setLevel</code>è¯·æ±‚é…ç½®æœ€ä½æ—¥å¿—çº§åˆ«ï¼ŒæœåŠ¡å™¨é€šè¿‡<code>notifications/message</code>é€šçŸ¥å‘é€æ—¥å¿—æ¶ˆæ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fserver%2Futilities%2Fpagination" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/server/utilities/pagination" ref="nofollow noopener noreferrer"><strong>åˆ†é¡µ</strong></a></p>
<p>MCPæ”¯æŒå¯¹å¯èƒ½è¿”å›å¤§é‡ç»“æœé›†çš„åˆ—è¡¨æ“ä½œè¿›è¡Œåˆ†é¡µå¤„ç†ï¼Œä½¿ç”¨åŸºäºä¸é€æ˜æ¸¸æ ‡çš„åˆ†é¡µæ¨¡å‹è€Œéæ•°å­—é¡µç ã€‚æœåŠ¡å™¨åœ¨å“åº”ä¸­åŒ…å«å½“å‰é¡µç»“æœå’Œå¯é€‰çš„<code>nextCursor</code>å­—æ®µï¼ˆè¡¨ç¤ºæ›´å¤šç»“æœå­˜åœ¨ï¼‰ï¼Œå®¢æˆ·ç«¯å¯é€šè¿‡åœ¨è¯·æ±‚ä¸­åŒ…å«æ¸¸æ ‡ç»§ç»­åˆ†é¡µã€‚æ”¯æŒåˆ†é¡µçš„æ“ä½œåŒ…æ‹¬<code>resources/list</code>ã€<code>resources/templates/list</code>ã€<code>prompts/list</code>å’Œ<code>tools/list</code>ï¼Œå®¢æˆ·ç«¯å¿…é¡»å°†æ¸¸æ ‡è§†ä¸ºä¸é€æ˜ä»¤ç‰Œã€‚</p>
<h2 data-id="heading-17">å…­ã€å®¢æˆ·ç«¯èƒ½åŠ›ï¼šåå‘è¯·æ±‚</h2>
<p>å®¢æˆ·ç«¯ä¸ä»…æ¥æ”¶æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥æä¾›èƒ½åŠ›ç»™æœåŠ¡å™¨ä½¿ç”¨:</p>
<h3 data-id="heading-18">6.1 Sampling(é‡‡æ ·)ï¼šæœåŠ¡å™¨è¯·æ±‚å®¢æˆ·ç«¯è°ƒç”¨AI</h3>
<p><strong>åœºæ™¯</strong>: æœåŠ¡å™¨åœ¨å¤„ç†ä»»åŠ¡æ—¶ï¼Œéœ€è¦AIå¸®å¿™åˆ†æä¸­é—´ç»“æœã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sampling/createMessage"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¿™ä¸ªæ•°æ®æ­£å¸¸å—?"</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"modelPreferences"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"hints"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"claude-3-sonnet"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å»ºè®®ç”¨çš„æ¨¡å‹</span>
      <span class="hljs-attr">"intelligencePriority"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.8</span><span class="hljs-punctuation">,</span>             <span class="hljs-comment">// è¦æ±‚æ™ºèƒ½ç¨‹åº¦</span>
      <span class="hljs-attr">"speedPriority"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span>                     <span class="hljs-comment">// é€Ÿåº¦è¦æ±‚</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹</strong>:FilesystemæœåŠ¡å™¨åœ¨æœç´¢å¤§é‡æ–‡ä»¶æ—¶,è¯·æ±‚AIåˆ¤æ–­å“ªäº›æ–‡ä»¶æœ€ç›¸å…³ã€‚</p>
<h3 data-id="heading-19">6.2 Roots(ç›®å½•)ï¼šå‘Šè¯‰æœåŠ¡å™¨å·¥ä½œèŒƒå›´</h3>
<p><strong>åœºæ™¯</strong>: è®©æœåŠ¡å™¨çŸ¥é“å¯ä»¥è®¿é—®å“ªäº›ç›®å½•ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"roots/list"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¿”å›</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:///home/user/project"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„é¡¹ç›®"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æœåŠ¡å™¨çŸ¥é“åªèƒ½åœ¨è¿™ä¸ªç›®å½•é‡Œæ“ä½œï¼Œä¿æŠ¤å…¶ä»–æ–‡ä»¶å®‰å…¨ã€‚</p>
<h3 data-id="heading-20">6.3 Elicitation(å¼•å¯¼)ï¼šæœåŠ¡å™¨å‘ç”¨æˆ·è¯¢é—®ä¿¡æ¯</h3>
<p><strong>åœºæ™¯</strong>: æœåŠ¡å™¨éœ€è¦ç”¨æˆ·æä¾›é¢å¤–ä¿¡æ¯æ‰èƒ½ç»§ç»­ã€‚</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"elicitation/create"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æä¾›æ‚¨çš„GitHubç”¨æˆ·å"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"requestedSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç”¨æˆ·å“åº”</strong>:</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"accept"</span>,  <span class="hljs-regexp">//</span> æˆ–<span class="hljs-string">"decline"</span>æ‹’ç», <span class="hljs-string">"cancel"</span>å–æ¶ˆ
  <span class="hljs-string">"content"</span>: {
    <span class="hljs-string">"username"</span>: <span class="hljs-string">"octocat"</span>
  }
}
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹</strong>: GitæœåŠ¡å™¨éœ€è¦çŸ¥é“æäº¤ä¿¡æ¯æ ¼å¼ï¼Œå¼¹çª—é—®ç”¨æˆ·:"è¯·é€‰æ‹©æäº¤è§„èŒƒ:Conventional Commits/Angular/Custom?"</p>
<h2 data-id="heading-21">ä¸ƒã€å®Œæ•´å®æˆ˜ï¼šä»é›¶æ„å»ºå¤©æ°”æŸ¥è¯¢MCP</h2>
<p>ä¸‹é¢è®©æˆ‘ä»¬ä»å¤´åˆ°å°¾æ„å»ºä¸€ä¸ªå®Œæ•´çš„MCPç³»ç»Ÿï¼ŒåŒ…å«æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-22">7.1 éœ€æ±‚åˆ†æ</h3>
<p><strong>ç›®æ ‡</strong>: æ„å»ºä¸€ä¸ªå¤©æ°”æŸ¥è¯¢MCPæœåŠ¡å™¨,æä¾›:</p>
<ul>
<li><strong>èµ„æº</strong>: åŸå¸‚åˆ—è¡¨</li>
<li><strong>å·¥å…·</strong>: æŸ¥è¯¢å¤©æ°”ã€è·å–é¢„æŠ¥</li>
<li><strong>æç¤º</strong>: å¤©æ°”åˆ†ææ¨¡æ¿</li>
</ul>
<h3 data-id="heading-23">7.2 æœåŠ¡å™¨å®ç°(Python)</h3>
<p><strong>ç¬¬ä¸€æ­¥: å®‰è£…MCP SDK</strong></p>
<pre><code class="hljs">pip install mcp
</code></pre>
<p><strong>ç¬¬äºŒæ­¥: åˆ›å»ºæœåŠ¡å™¨ (weather_server.py)</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp.server <span class="hljs-keyword">import</span> Server
<span class="hljs-keyword">from</span> mcp.types <span class="hljs-keyword">import</span> Resource, Tool, Prompt, TextContent
<span class="hljs-keyword">import</span> mcp.server.stdio
<span class="hljs-keyword">import</span> httpx

<span class="hljs-comment"># åˆ›å»ºMCPæœåŠ¡å™¨å®ä¾‹</span>
server = Server(<span class="hljs-string">"weather-server"</span>)

<span class="hljs-comment"># 1. å®šä¹‰èµ„æº:æ”¯æŒçš„åŸå¸‚åˆ—è¡¨</span>
<span class="hljs-meta">@server.list_resources()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_resources</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„èµ„æºåˆ—è¡¨"""</span>
    <span class="hljs-keyword">return</span> [
        Resource(
            uri=<span class="hljs-string">"weather://cities"</span>,
            name=<span class="hljs-string">"æ”¯æŒçš„åŸå¸‚åˆ—è¡¨"</span>,
            mimeType=<span class="hljs-string">"application/json"</span>,
            description=<span class="hljs-string">"æŸ¥è¯¢å¤©æ°”æ”¯æŒçš„æ‰€æœ‰åŸå¸‚"</span>
        )
    ]

<span class="hljs-meta">@server.read_resource()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_resource</span>(<span class="hljs-params">uri: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""è¯»å–å…·ä½“èµ„æºå†…å®¹"""</span>
    <span class="hljs-keyword">if</span> uri == <span class="hljs-string">"weather://cities"</span>:
        cities = [<span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-string">"å¹¿å·"</span>, <span class="hljs-string">"æ·±åœ³"</span>, <span class="hljs-string">"æ­å·"</span>]
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"contents"</span>: [{
                <span class="hljs-string">"uri"</span>: uri,
                <span class="hljs-string">"mimeType"</span>: <span class="hljs-string">"application/json"</span>,
                <span class="hljs-string">"text"</span>: <span class="hljs-built_in">str</span>(cities)
            }]
        }

<span class="hljs-comment"># 2. å®šä¹‰å·¥å…·:å¤©æ°”æŸ¥è¯¢</span>
<span class="hljs-meta">@server.list_tools()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_tools</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„å·¥å…·åˆ—è¡¨"""</span>
    <span class="hljs-keyword">return</span> [
        Tool(
            name=<span class="hljs-string">"get_current_weather"</span>,
            description=<span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”"</span>,
            inputSchema={
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"city"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                        <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°,å¦‚'åŒ—äº¬'"</span>
                    }
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"city"</span>]
            }
        ),
        Tool(
            name=<span class="hljs-string">"get_forecast"</span>,
            description=<span class="hljs-string">"è·å–æœªæ¥3å¤©å¤©æ°”é¢„æŠ¥"</span>,
            inputSchema={
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"city"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°"</span>},
                    <span class="hljs-string">"days"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"é¢„æŠ¥å¤©æ•°(1-3)"</span>, <span class="hljs-string">"default"</span>: <span class="hljs-number">3</span>}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"city"</span>]
            }
        )
    ]

<span class="hljs-meta">@server.call_tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">call_tool</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-string">"""æ‰§è¡Œå·¥å…·è°ƒç”¨"""</span>
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"get_current_weather"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        <span class="hljs-comment"># å®é™…é¡¹ç›®ä¸­è¿™é‡Œè°ƒç”¨çœŸå®çš„å¤©æ°”API</span>
        <span class="hljs-comment"># ç¤ºä¾‹:ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</span>
        weather_data = {
            <span class="hljs-string">"city"</span>: city,
            <span class="hljs-string">"temperature"</span>: <span class="hljs-number">22</span>,
            <span class="hljs-string">"condition"</span>: <span class="hljs-string">"æ™´"</span>,
            <span class="hljs-string">"humidity"</span>: <span class="hljs-number">45</span>
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"content"</span>: [{
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: <span class="hljs-string">f"<span class="hljs-subst">{city}</span>å½“å‰å¤©æ°”:\næ¸©åº¦: <span class="hljs-subst">{weather_data[<span class="hljs-string">'temperature'</span>]}</span>Â°C\nå¤©æ°”: <span class="hljs-subst">{weather_data[<span class="hljs-string">'condition'</span>]}</span>\næ¹¿åº¦: <span class="hljs-subst">{weather_data[<span class="hljs-string">'humidity'</span>]}</span>%"</span>
            }]
        }
    
    <span class="hljs-keyword">elif</span> name == <span class="hljs-string">"get_forecast"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        days = arguments.get(<span class="hljs-string">"days"</span>, <span class="hljs-number">3</span>)
        <span class="hljs-comment"># æ¨¡æ‹Ÿé¢„æŠ¥æ•°æ®</span>
        forecast = <span class="hljs-string">f"<span class="hljs-subst">{city}</span>æœªæ¥<span class="hljs-subst">{days}</span>å¤©é¢„æŠ¥:\nç¬¬1å¤©: æ™´,20-25Â°C\nç¬¬2å¤©: å¤šäº‘,18-23Â°C\nç¬¬3å¤©: å°é›¨,16-20Â°C"</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"content"</span>: [{<span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, <span class="hljs-string">"text"</span>: forecast}]
        }

<span class="hljs-comment"># 3. å®šä¹‰æç¤ºæ¨¡æ¿:å¤©æ°”åˆ†æ</span>
<span class="hljs-meta">@server.list_prompts()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_prompts</span>():
    <span class="hljs-string">"""è¿”å›å¯ç”¨çš„æç¤ºæ¨¡æ¿"""</span>
    <span class="hljs-keyword">return</span> [
        Prompt(
            name=<span class="hljs-string">"analyze_weather"</span>,
            description=<span class="hljs-string">"åˆ†æå¤©æ°”è¶‹åŠ¿å¹¶ç»™å‡ºå»ºè®®"</span>,
            arguments=[
                {<span class="hljs-string">"name"</span>: <span class="hljs-string">"city"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°"</span>, <span class="hljs-string">"required"</span>: <span class="hljs-literal">True</span>}
            ]
        )
    ]

<span class="hljs-meta">@server.get_prompt()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_prompt</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, arguments: <span class="hljs-built_in">dict</span></span>):
    <span class="hljs-string">"""è·å–æç¤ºæ¨¡æ¿å†…å®¹"""</span>
    <span class="hljs-keyword">if</span> name == <span class="hljs-string">"analyze_weather"</span>:
        city = arguments[<span class="hljs-string">"city"</span>]
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"messages"</span>: [
                {
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                    <span class="hljs-string">"content"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: <span class="hljs-string">f"è¯·åˆ†æ<span class="hljs-subst">{city}</span>çš„å¤©æ°”æƒ…å†µ,å¹¶ç»™å‡ºå‡ºè¡Œå»ºè®®ã€‚åŒ…æ‹¬:\n1. æ¸©åº¦æ˜¯å¦é€‚å®œ\n2. æ˜¯å¦éœ€è¦å¸¦ä¼\n3. ç©¿è¡£å»ºè®®"</span>
                    }
                }
            ]
        }

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡å™¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># ä½¿ç”¨stdioä¼ è¾“(æœ¬åœ°)</span>
    mcp.server.stdio.run_stdio_server(server)
</code></pre>
<h3 data-id="heading-24">7.3 é…ç½®æœåŠ¡å™¨(Claude Desktop)</h3>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"weather"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/path/to/weather_server.py"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-25">7.4 å®¢æˆ·ç«¯å®ç°(Python)</h3>
<p>å¦‚æœè¦è‡ªå·±å®ç°å®¢æˆ·ç«¯:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp <span class="hljs-keyword">import</span> ClientSession
<span class="hljs-keyword">from</span> mcp.client.stdio <span class="hljs-keyword">import</span> stdio_client
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># è¿æ¥åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> stdio_client(
        command=<span class="hljs-string">"python"</span>,
        args=[<span class="hljs-string">"/path/to/weather_server.py"</span>]
    ) <span class="hljs-keyword">as</span> (read, write):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> ClientSession(read, write) <span class="hljs-keyword">as</span> session:
            
            <span class="hljs-comment"># 1. åˆå§‹åŒ–è¿æ¥</span>
            <span class="hljs-keyword">await</span> session.initialize()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… è¿æ¥æˆåŠŸ!"</span>)
            
            <span class="hljs-comment"># 2. åˆ—å‡ºå¯ç”¨èµ„æº</span>
            resources = <span class="hljs-keyword">await</span> session.list_resources()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“ å¯ç”¨èµ„æº: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(resources.resources)}</span>"</span>)
            <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> resources.resources:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{r.name}</span>: <span class="hljs-subst">{r.uri}</span>"</span>)
            
            <span class="hljs-comment"># 3. è¯»å–åŸå¸‚åˆ—è¡¨èµ„æº</span>
            cities_resource = <span class="hljs-keyword">await</span> session.read_resource(
                uri=<span class="hljs-string">"weather://cities"</span>
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸŒ åŸå¸‚åˆ—è¡¨: <span class="hljs-subst">{cities_resource.contents[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 4. åˆ—å‡ºå¯ç”¨å·¥å…·</span>
            tools = <span class="hljs-keyword">await</span> session.list_tools()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ”§ å¯ç”¨å·¥å…·: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tools.tools)}</span>"</span>)
            <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools.tools:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{t.name}</span>: <span class="hljs-subst">{t.description}</span>"</span>)
            
            <span class="hljs-comment"># 5. è°ƒç”¨å·¥å…·æŸ¥è¯¢å¤©æ°”</span>
            result = <span class="hljs-keyword">await</span> session.call_tool(
                name=<span class="hljs-string">"get_current_weather"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"åŒ—äº¬"</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸŒ¤ï¸  æŸ¥è¯¢ç»“æœ:\n<span class="hljs-subst">{result.content[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 6. è·å–é¢„æŠ¥</span>
            forecast = <span class="hljs-keyword">await</span> session.call_tool(
                name=<span class="hljs-string">"get_forecast"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-string">"days"</span>: <span class="hljs-number">3</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“… å¤©æ°”é¢„æŠ¥:\n<span class="hljs-subst">{forecast.content[<span class="hljs-number">0</span>].text}</span>"</span>)
            
            <span class="hljs-comment"># 7. åˆ—å‡ºæç¤ºæ¨¡æ¿</span>
            prompts = <span class="hljs-keyword">await</span> session.list_prompts()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ’¡ æç¤ºæ¨¡æ¿: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(prompts.prompts)}</span>"</span>)
            <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> prompts.prompts:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - <span class="hljs-subst">{p.name}</span>: <span class="hljs-subst">{p.description}</span>"</span>)
            
            <span class="hljs-comment"># 8. è·å–æç¤ºå†…å®¹</span>
            prompt = <span class="hljs-keyword">await</span> session.get_prompt(
                name=<span class="hljs-string">"analyze_weather"</span>,
                arguments={<span class="hljs-string">"city"</span>: <span class="hljs-string">"å¹¿å·"</span>}
            )
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“ ç”Ÿæˆçš„æç¤º:\n<span class="hljs-subst">{prompt.messages[<span class="hljs-number">0</span>][<span class="hljs-string">'content'</span>][<span class="hljs-string">'text'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h3 data-id="heading-26">7.5 è¿è¡Œæ•ˆæœ</h3>
<pre><code class="hljs language-makefile" lang="makefile">$ python weather_client.py

âœ… è¿æ¥æˆåŠŸ!

ğŸ“ å¯ç”¨èµ„æº: 1
  - æ”¯æŒçš„åŸå¸‚åˆ—è¡¨: weather://cities

ğŸŒ åŸå¸‚åˆ—è¡¨: ['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³', 'æ­å·']

ğŸ”§ å¯ç”¨å·¥å…·: 2
  - get_current_weather: è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”
  - get_forecast: è·å–æœªæ¥3å¤©å¤©æ°”é¢„æŠ¥

ğŸŒ¤ï¸  æŸ¥è¯¢ç»“æœ:
<span class="hljs-section">åŒ—äº¬å½“å‰å¤©æ°”:</span>
<span class="hljs-section">æ¸©åº¦: 22Â°C</span>
<span class="hljs-section">å¤©æ°”: æ™´</span>
<span class="hljs-section">æ¹¿åº¦: 45%</span>

ğŸ“… å¤©æ°”é¢„æŠ¥:
<span class="hljs-section">ä¸Šæµ·æœªæ¥3å¤©é¢„æŠ¥:</span>
<span class="hljs-section">ç¬¬1å¤©: æ™´,20-25Â°C</span>
<span class="hljs-section">ç¬¬2å¤©: å¤šäº‘,18-23Â°C</span>
<span class="hljs-section">ç¬¬3å¤©: å°é›¨,16-20Â°C</span>

ğŸ’¡ æç¤ºæ¨¡æ¿: 1
  - analyze_weather: åˆ†æå¤©æ°”è¶‹åŠ¿å¹¶ç»™å‡ºå»ºè®®

ğŸ“ ç”Ÿæˆçš„æç¤º:
<span class="hljs-section">è¯·åˆ†æå¹¿å·çš„å¤©æ°”æƒ…å†µ,å¹¶ç»™å‡ºå‡ºè¡Œå»ºè®®ã€‚åŒ…æ‹¬:</span>
1. æ¸©åº¦æ˜¯å¦é€‚å®œ
2. æ˜¯å¦éœ€è¦å¸¦ä¼
3. ç©¿è¡£å»ºè®®
</code></pre>
<h2 data-id="heading-27">å…«ã€å…¶ä»–éƒ¨åˆ†ï¼šMCPåŸºç¡€åè®®çš„å¦ä¸€åŠ</h2>
<h3 data-id="heading-28">8.1 æˆæƒï¼ˆAuthorizationï¼‰</h3>
<p>MCPæˆæƒè§„èŒƒå®šä¹‰äº†åŸºäºHTTPä¼ è¾“çš„å®‰å…¨æˆæƒæœºåˆ¶ï¼Œä½¿MCPå®¢æˆ·ç«¯èƒ½å¤Ÿä»£è¡¨èµ„æºæ‰€æœ‰è€…å‘å—é™åˆ¶çš„MCPæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚è¯¥è§„èŒƒåŸºäºOAuth 2.1åŠç›¸å…³æ ‡å‡†ï¼Œå®ç°äº†æˆæƒæœåŠ¡å™¨å‘ç°ã€åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œå’Œè®¿é—®ä»¤ç‰Œç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯é€šè¿‡<code>resource</code>å‚æ•°æ˜ç¡®æŒ‡å®šç›®æ ‡MCPæœåŠ¡å™¨ï¼ˆå¦‚<code>https://mcp.example.com</code>ï¼‰ï¼ŒæœåŠ¡å™¨åˆ™éªŒè¯ä»¤ç‰Œæ˜¯å¦ä¸“é—¨ä¸ºå…¶é¢å‘ï¼Œç¡®ä¿ä»¤ç‰Œä¸ä¼šè¢«è¯¯ç”¨äºå…¶ä»–æœåŠ¡ï¼Œä»è€Œé˜²æ­¢"ä»¤ç‰Œä¼ é€’"å®‰å…¨æ¼æ´ã€‚</p>
<h3 data-id="heading-29">8.2 å–æ¶ˆï¼ˆCancellationï¼‰</h3>
<p>MCPå–æ¶ˆæœºåˆ¶å…è®¸é€šè¿‡é€šçŸ¥æ¶ˆæ¯ä¸­æ­¢æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘é€<code>notifications/cancelled</code>é€šçŸ¥æ¥ç»ˆæ­¢å…ˆå‰å‘å‡ºçš„è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·å–æ¶ˆé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œæ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€åŒ…å«è¯·æ±‚IDå’Œå¯é€‰åŸå› çš„å–æ¶ˆé€šçŸ¥ï¼Œæ¥æ”¶æ–¹åº”åœæ­¢å¤„ç†ã€é‡Šæ”¾èµ„æºä¸”ä¸å‘é€å“åº”ã€‚è¯¥æœºåˆ¶è€ƒè™‘äº†ç½‘ç»œå»¶è¿Ÿå¯¼è‡´çš„ç«æ€æ¡ä»¶ï¼Œå…è®¸æ¥æ”¶æ–¹åœ¨è¯·æ±‚å·²å®Œæˆæˆ–æ— æ³•å–æ¶ˆæ—¶å¿½ç•¥é€šçŸ¥ï¼ŒåŒæ—¶å»ºè®®åŒæ–¹è®°å½•å–æ¶ˆåŸå› ä»¥ä¾¿è°ƒè¯•ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/cancelled"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·å–æ¶ˆ"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-30">8.3 Pingæœºåˆ¶</h3>
<p>MCPæä¾›äº†å¯é€‰çš„pingæœºåˆ¶ï¼Œå…è®¸ä»»ä½•ä¸€æ–¹éªŒè¯å¯¹æ–¹æ˜¯å¦ä»ç„¶å“åº”ä¸”è¿æ¥å­˜æ´»ã€‚è¯¥æœºåˆ¶é€šè¿‡ç®€å•çš„è¯·æ±‚/å“åº”æ¨¡å¼å®ç°ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯å‘é€<code>{"jsonrpc":"2.0","id":"123","method":"ping"}</code>ï¼ŒæœåŠ¡å™¨å¿…é¡»ç«‹å³å“åº”<code>{"jsonrpc":"2.0","id":"123","result":{}}</code>ã€‚å¦‚æœåœ¨åˆç†è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°å“åº”ï¼Œå‘é€æ–¹å¯ä»¥å°†è¿æ¥è§†ä¸ºé™ˆæ—§å¹¶ç»ˆæ­¢è¿æ¥æˆ–å°è¯•é‡æ–°è¿æ¥ã€‚å®ç°åº”å®šæœŸå‘é€pingä»¥æ£€æµ‹è¿æ¥å¥åº·çŠ¶å†µï¼Œä½†åº”é¿å…è¿‡åº¦pingä»¥å‡å°‘ç½‘ç»œå¼€é”€ã€‚</p>
<h3 data-id="heading-31">8.4 è¿›åº¦è·Ÿè¸ªï¼ˆProgressï¼‰</h3>
<p>MCPæ”¯æŒé€šè¿‡é€šçŸ¥æ¶ˆæ¯å¯¹é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œè¿›è¡Œå¯é€‰çš„è¿›åº¦è·Ÿè¸ªã€‚è¯·æ±‚æ–¹å¯ä»¥åœ¨è¯·æ±‚å…ƒæ•°æ®ä¸­åŒ…å«å”¯ä¸€çš„<code>progressToken</code>ï¼ˆå¦‚å­—ç¬¦ä¸²"task123"ï¼‰æ¥æ¥æ”¶è¿›åº¦æ›´æ–°ï¼Œæ¥æ”¶æ–¹åˆ™å¯ä»¥å‘é€åŒ…å«è¿›åº¦å€¼ã€å¯é€‰æ€»å€¼å’Œæ¶ˆæ¯çš„<code>notifications/progress</code>é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œæ–‡ä»¶ä¸Šä¼ æ“ä½œå¯ä»¥å‘é€<code>{"progress":50,"total":100,"message":"æ­£åœ¨ä¸Šä¼ æ–‡ä»¶..."}</code>æ¥æŒ‡ç¤ºå®Œæˆç™¾åˆ†æ¯”ã€‚è¿›åº¦å€¼å¿…é¡»éšæ¯ä¸ªé€šçŸ¥é€’å¢ï¼ŒåŒæ–¹åº”å®ç°é€Ÿç‡é™åˆ¶ä»¥é˜²æ­¢æ¶ˆæ¯æ³›æ»¥ï¼Œå¹¶åœ¨æ“ä½œå®Œæˆååœæ­¢å‘é€è¿›åº¦é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/progress"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"progressToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"task123"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"progress"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// å½“å‰è¿›åº¦</span>
    <span class="hljs-attr">"total"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// æ€»é‡</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨ä¸Šä¼ æ–‡ä»¶..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-32">ä¹ã€å®‰å…¨å®è·µï¼šå¿…é¡»é‡è§†</h2>
<h3 data-id="heading-33">9.1 æ ¸å¿ƒåŸåˆ™</h3>
<p><strong>1. ç”¨æˆ·åŒæ„ä¼˜å…ˆ</strong></p>
<ul>
<li>æ‰€æœ‰æ•°æ®è®¿é—®å¿…é¡»ç»ç”¨æˆ·æ˜ç¡®åŒæ„</li>
<li>æ‰€æœ‰å·¥å…·è°ƒç”¨å‰å¿…é¡»è®©ç”¨æˆ·ç¡®è®¤</li>
</ul>
<p><strong>2. æ•°æ®éšç§ä¿æŠ¤</strong></p>
<ul>
<li>æœåŠ¡å™¨åªèƒ½çœ‹åˆ°å¿…è¦çš„ä¿¡æ¯</li>
<li>å®Œæ•´å¯¹è¯å†å²ä¿ç•™åœ¨å®¿ä¸»,ä¸å‘ç»™æœåŠ¡å™¨</li>
</ul>
<p><strong>3. å·¥å…·å®‰å…¨</strong></p>
<ul>
<li>å·¥å…·ä»£è¡¨ä»£ç æ‰§è¡Œ,å¿…é¡»è°¨æ…</li>
<li>æ˜¾ç¤ºå·¥å…·è¦åšä»€ä¹ˆ,è®©ç”¨æˆ·æ‰¹å‡†</li>
</ul>
<p><strong>4. è¾“å…¥éªŒè¯</strong></p>
<ul>
<li>æœåŠ¡å™¨å¿…é¡»éªŒè¯æ‰€æœ‰è¾“å…¥</li>
<li>å®¢æˆ·ç«¯å¿…é¡»éªŒè¯å·¥å…·è¿”å›çš„ç»“æœ</li>
</ul>
<h3 data-id="heading-34">9.2 å®é™…å»ºè®®</h3>
<p><strong>æœåŠ¡å™¨å¼€å‘è€…</strong>:</p>
<ul>
<li>éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°</li>
<li>å®ç°è®¿é—®æ§åˆ¶å’Œé€Ÿç‡é™åˆ¶</li>
<li>è®°å½•æ“ä½œæ—¥å¿—ä¾›å®¡è®¡</li>
</ul>
<p><strong>å®¢æˆ·ç«¯å¼€å‘è€…</strong>:</p>
<ul>
<li>æ˜¾ç¤ºæ¸…æ™°çš„æƒé™è¯·æ±‚ç•Œé¢</li>
<li>åœ¨è°ƒç”¨å·¥å…·å‰å±•ç¤ºå‚æ•°</li>
<li>å®ç°å·¥å…·è°ƒç”¨è¶…æ—¶æœºåˆ¶</li>
</ul>
<h2 data-id="heading-35">åã€MCPç”Ÿæ€ï¼šè°å¼€å‘å®¢æˆ·ç«¯?</h2>
<p><strong>å…³é”®è®¤çŸ¥</strong>: åœ¨MCPç”Ÿæ€ä¸­ï¼Œ<strong>å®¢æˆ·ç«¯é€šå¸¸ä¸æ˜¯ç”±ä¸‹æ¸¸å¼€å‘è€…å¼€å‘çš„</strong>ï¼Œè€Œæ˜¯<strong>å†…ç½®åœ¨AIåº”ç”¨å¹³å°ä¸­</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css">  å¼€å‘è€…å¼€å‘MCPæœåŠ¡å™¨
       â†“
  é…ç½®åˆ°AIå¹³å°(Claude/<span class="hljs-attribute">Cursor</span>ç­‰)
       â†“
  AIå¹³å°å†…ç½®çš„MCPå®¢æˆ·ç«¯è‡ªåŠ¨è¿æ¥
</code></pre>
<p>å¯¹äºè½¯ä»¶å¼€å‘è€…æ¥è¯´ï¼Œåœ¨MCPç”Ÿæ€ä¸­çš„ä½ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è§’è‰²å®šä½:</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIå¹³å°å¼€å‘è€…(Anthropic, Cursorç­‰)       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å¼€å‘MCPå®¢æˆ·ç«¯SDK                    â”‚
â”‚  âœ… é›†æˆåˆ°è‡ªå·±çš„AIåº”ç”¨ä¸­                â”‚
â”‚  âœ… æä¾›é…ç½®ç•Œé¢                        â”‚
â”‚  âœ… ç®¡ç†MCPæœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸ               â”‚
â”‚  âœ… å¤„ç†AIä¸MCPçš„äº¤äº’é€»è¾‘               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ æä¾›å¹³å°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MCPæœåŠ¡å™¨å¼€å‘è€…(ä½ ã€æˆ‘ã€ç¤¾åŒº)           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å¼€å‘MCPæœåŠ¡å™¨                       â”‚
â”‚  âœ… å®ç°Resources/Tools/Prompts        â”‚
â”‚  âœ… ç¼–å†™ä½¿ç”¨æ–‡æ¡£                        â”‚
â”‚  âœ… å‘å¸ƒåˆ°npm/PyPI                      â”‚
â”‚  âŒ ä¸éœ€è¦å¼€å‘å®¢æˆ·ç«¯                    â”‚
â”‚  âŒ ä¸éœ€è¦å…³å¿ƒAIå¦‚ä½•è°ƒç”¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ ä½¿ç”¨æœåŠ¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ€ç»ˆç”¨æˆ·(å¼€å‘è€…ã€åˆ†æå¸ˆç­‰)               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚ èŒè´£:                                   â”‚
â”‚  âœ… å®‰è£…éœ€è¦çš„MCPæœåŠ¡å™¨                 â”‚
â”‚  âœ… é…ç½®åˆ°AIå¹³å°                        â”‚
â”‚  âœ… ä½¿ç”¨AIå®Œæˆä»»åŠ¡                      â”‚
â”‚  âŒ ä¸éœ€è¦å†™ä»£ç                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-36">åè®°</h2>
<p>MCP è®© AI åº”ç”¨å¼€å‘å˜å¾—æ›´ç®€å•ã€æ›´å®‰å…¨ã€æ›´å¼ºå¤§ã€‚å®ƒä¸æ˜¯é“¶å¼¹ï¼Œä½†ä¸ºæ„å»ºå¯é çš„AIç³»ç»Ÿæä¾›äº†åšå®åŸºç¡€ã€‚<strong>æœ¬æ–‡å…¨éƒ¨å†…å®¹åŸºäºæç¤ºç¼–å†™ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</strong></p>
<h2 data-id="heading-37">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li>MCPå®˜æ–¹è§„èŒƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18" ref="nofollow noopener noreferrer">modelcontextprotocol.io/specificatiâ€¦</a></li>
<li>JSON-RPC 2.0: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonrpc.org%2F" target="_blank" title="https://www.jsonrpc.org/" ref="nofollow noopener noreferrer">www.jsonrpc.org/</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Coze-ä¼ä¸š AI åº”ç”¨èµ›é“å¼€å¯]]></title>    <link>https://juejin.cn/post/7571475192489951242</link>    <guid>https://juejin.cn/post/7571475192489951242</guid>    <pubDate>2025-11-12T08:07:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571475192489951242" data-draft-id="7571395183943991305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Coze-ä¼ä¸š AI åº”ç”¨èµ›é“å¼€å¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T08:07:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3307770588439422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Coze-ä¼ä¸š AI åº”ç”¨èµ›é“å¼€å¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3307770588439422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T08:07:51.000Z" title="Wed Nov 12 2025 08:07:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f079723185014bd98aef19582bfb26b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5bGx5byV5pOO5byA5Y-R6ICF56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539670&amp;x-signature=U1nrQQwpLA6X6ThX7AHK1TBC2ZE%3D" alt="" loading="lazy"/></p>
<p><strong>èµ›é“è¯¦æƒ…</strong></p>
<p>å‚èµ›é€‰æ‰‹éœ€ä»ä¼ä¸šçœŸå®éœ€æ±‚ï¼ˆå¦‚æ•°æ®åˆ†æã€åŠå…¬åŠ©æ‰‹ã€çŸ¥è¯†æŸ¥è¯¢/ç®¡ç†ã€è¥é”€æ¨å¹¿ç­‰åœºæ™¯ï¼‰å‡ºå‘ï¼ŒåŸºäºæ‰£å­ï¼ˆcoze.cn) /æ‰£å­ç©ºé—´çš„èƒ½åŠ›åˆ›å»ºä¸€ä¸ª H5 æˆ–å…¶ä»–å¯å¤ç°çš„æˆå“é¡¹ç›®ï¼Œ<strong>æ¨èç»“åˆä½¿ç”¨è±†åŒ…ç¼–ç¨‹æ¨¡å‹ Doubao-Seed-Codeã€ç«å±±å¼•æ“ veCLIã€‚ä½¿ç”¨æ¨èå·¥å…·å°†æ˜¯åŠ åˆ†é¡¹</strong>ï¼Œè¯¦è§è¯„åˆ†è§„åˆ™ã€‚</p>
<p>è±†åŒ…ç¼–ç¨‹æ¨¡å‹ Doubao-Seed-Code ä¸“ä¸º Agentic ç¼–ç¨‹ä»»åŠ¡æ·±åº¦ä¼˜åŒ–ï¼Œåœ¨ SWE-Bench-Verified æ¦œå•ä¸­åˆ·æ–°SOTAï¼Œæ›´å…¼å®¹ Anthropic API ç­‰ä¸»æµå¼€å‘ç¯å¢ƒã€‚</p>
<p>å¯¹äºä¸ªäººå¼€å‘è€…ï¼Œè±†åŒ…ç¼–ç¨‹æ¨¡å‹æ¨å‡º Coding Plan è®¢é˜…æœåŠ¡ï¼Œé¦–æœˆè®¢è´­ä¼˜æƒ ä»·ä½è‡³ 9.9 å…ƒï¼å¦‚è®¢é˜… Coding Plan ä½¿ç”¨è±†åŒ…ç¼–ç¨‹æ¨¡å‹å‚èµ›ï¼Œå¯é€šè¿‡é“¾æ¥æäº¤ä¿¡æ¯ï¼Œå°†è·å¾—é¢å¤–ç¤¼å“ä¸€ä»½ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbytedance.larkoffice.com%2Fshare%2Fbase%2Fform%2FshrcnwIxtFAkm4gEh1fIl3TanJc" target="_blank" title="https://bytedance.larkoffice.com/share/base/form/shrcnwIxtFAkm4gEh1fIl3TanJc" ref="nofollow noopener noreferrer">bytedance.larkoffice.com/share/base/â€¦</a></p>
<p><strong>å­¦ä¹ èµ„æ–™ï¼š</strong></p>
<ul>
<li>
<p>AI ç¼–ç¨‹å®æˆ˜æŠ€å·§åˆ†äº«ï¼Œ30åˆ†é’Ÿä»å…¥é—¨åˆ°æ²‰è¿·ï½œVibe Cozeï¼æ‰£å­ AI æŒ‘æˆ˜èµ›æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbytedance.larkoffice.com%2Fwiki%2FHt37wE7wbiPAJpkpQooc4EYenKd%3Ffrom%3Dfrom_copylink" target="_blank" title="https://bytedance.larkoffice.com/wiki/Ht37wE7wbiPAJpkpQooc4EYenKd?from=from_copylink" ref="nofollow noopener noreferrer">bytedance.larkoffice.com/wiki/Ht37wEâ€¦</a></p>
</li>
<li>
<p>VeCLI æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.volcengine.com%2Fdocs%2F83927%2F1826757" target="_blank" title="https://www.volcengine.com/docs/83927/1826757" ref="nofollow noopener noreferrer">www.volcengine.com/docs/83927/â€¦</a></p>
</li>
<li>
<p>è±†åŒ…ç¼–ç¨‹æ¨¡å‹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.volcengine.com%2Fark%2Fregion%3Aark%2Bcn-beijing%2Fmodel%2Fdetail%3FId%3Ddoubao-seed-code" target="_blank" title="https://console.volcengine.com/ark/region:ark+cn-beijing/model/detail?Id=doubao-seed-code" ref="nofollow noopener noreferrer">console.volcengine.com/ark/region:â€¦</a></p>
</li>
<li>
<p>Coding Plan è¯¦æƒ…ï¼šszacq.cn/F5JBG/</p>
</li>
</ul>
<p><strong>æ—¶é—´</strong></p>
<p>ã€Œ2025/11/12-2025/12/13ã€</p>
<ul>
<li>
<p>11.12-11.30 æŠ¥å&amp;ä½œå“æäº¤ã€‚æŠ¥åè¯¦æƒ…é¡µï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.volcengine.com%2Factivities%2F7569894904566906907" target="_blank" title="https://developer.volcengine.com/activities/7569894904566906907" ref="nofollow noopener noreferrer">developer.volcengine.com/activities/â€¦</a></p>
</li>
<li>
<p>12.1-12.5 ä½œå“åˆç­›</p>
</li>
<li>
<p>12.6 åˆèµ›è·¯æ¼”ã€‚åˆèµ›è·¯æ¼”å°†åœ¨åŒ—äº¬ã€ä¸Šæµ·ã€æˆéƒ½ã€æ·±åœ³ 4 ä¸ªåŸå¸‚ä¸¾è¡Œï¼Œæ¯ä¸ªåŒºåŸŸåˆç­›å‰ 10 åè¿›è¡Œè·¯æ¼”ï¼Œå„åŸå¸‚åˆèµ›å‰ 3 åå°†è¿›å…¥å†³èµ›ã€‚</p>
</li>
<li>
<p>12.13 å†³èµ›è·¯æ¼”</p>
</li>
</ul>
<p><strong>å¥–é¡¹è®¾ç½®</strong></p>
<p>ä¸€ç­‰å¥– 1 åï¼š5000 å…ƒå¥–é‡‘+è·å¥–è¯ä¹¦+æ‰£å­å‘¨è¾¹+æµé‡æ‰¶æŒ</p>
<p>äºŒç­‰å¥– 2 åï¼š4000 å…ƒå¥–é‡‘+è·å¥–è¯ä¹¦+æ‰£å­å‘¨è¾¹+æµé‡æ‰¶æŒ</p>
<p>ä¸‰ç­‰å¥– 3 åï¼š3000 å…ƒå¥–é‡‘+è·å¥–è¯ä¹¦+æ‰£å­å‘¨è¾¹+æµé‡æ‰¶æŒ</p>
<p>æœ€ä½³ AI å®è·µå¥– 6 åï¼š1000 å…ƒå¥–é‡‘+è·å¥–è¯ä¹¦+æ‰£å­å‘¨è¾¹+æµé‡æ‰¶æŒ</p>
<p><strong>è¯„åˆ†æ ‡å‡†</strong></p>
<p>è¯„å®¡è§„åˆ™ï¼š</p>
<ul>
<li>
<p>è¯„å®¡æ–¹ï¼šæ‰£å­ã€ç«å±±å¼•æ“ ADGã€ç«å±±æ–¹èˆŸã€ç«å±±å¼•æ“ veCLI</p>
</li>
<li>
<p>åˆ†æ•°æ„æˆï¼šæ€»åˆ†ï¼ˆ100åˆ†ï¼‰= ä½œå“è¯„åˆ†ï¼ˆ70%ï¼‰+è¯´æ˜æ–‡æ¡£è¯„åˆ†ï¼ˆ30%ï¼‰</p>
</li>
</ul>
<p><strong>è¯„åˆ†ç»´åº¦ï¼š</strong></p>
<ul>
<li>
<p>ã€Œå®ç”¨æ€§ã€20åˆ†ï¼šä½œå“æ˜¯å¦æœ‰å®ç”¨çš„è½åœ°åœºæ™¯ï¼Œèƒ½å¦è§£å†³æ‰€å±ä¸“ä¸šé¢†åŸŸå†…çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p>ã€ŒæŠ€æœ¯æ€§ã€40åˆ† ï¼š ä½œå“åŠŸèƒ½è®¾è®¡çš„é€»è¾‘æ€§ã€æŠ€æœ¯å®ç°çš„æˆç†Ÿåº¦ä»¥åŠæ•´ä½“æ–¹æ¡ˆçš„ç¨³å®šæ€§ã€‚åŒæ—¶è€ƒå¯Ÿä½œå“ä½¿ç”¨çš„å·¥å…·ä¸°å¯Œæ€§ï¼Œä½¿ç”¨è±†åŒ…ç¼–ç¨‹æ¨¡å‹ Doubao-Seed-Codeã€ VeCLI åˆ†åˆ«å¾— 10 åˆ†ã€‚</p>
</li>
<li>
<p>ã€Œä½“éªŒæ€§ã€30åˆ†ï¼š è€ƒå¯Ÿä½œå“çš„ç”¨æˆ·ä½“éªŒè´¨é‡ï¼ŒåŒ…æ‹¬äº¤äº’è‡ªç„¶åº¦ã€å“åº”åŠæ—¶æ€§å’Œå‡†ç¡®æ€§ç­‰ã€‚</p>
</li>
</ul>
<p><strong>è¯´æ˜æ–‡æ¡£è¯„åˆ†ç»´åº¦ï¼š</strong></p>
<ul>
<li>
<p>ä½œå“åˆ›æ„ï¼ˆ40 åˆ†ï¼‰ï¼šä½œå“çš„åˆ›æ„æ€è·¯ã€‚</p>
</li>
<li>
<p>å®ç°åŸç†ä¸åŠŸèƒ½ï¼ˆ40åˆ†ï¼‰ï¼šå„åŠŸèƒ½å®ç°åŸç†ã€‚</p>
</li>
<li>
<p>æ–‡æ¡£ç»“æ„ï¼ˆ20åˆ†ï¼‰ï¼šç»“æ„å®Œæ•´ï¼Œè¯­è¨€ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°ã€‚</p>
</li>
</ul>
<p>ä½œå“è¯´æ˜æ–‡æ¡£æ¨¡ç‰ˆï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbytedance.larkoffice.com%2Fwiki%2FZyopwHYLHiUbS3k79A6ci0Sbndd%3Ffrom%3Dfrom_copylink" target="_blank" title="https://bytedance.larkoffice.com/wiki/ZyopwHYLHiUbS3k79A6ci0Sbndd?from=from_copylink" ref="nofollow noopener noreferrer">bytedance.larkoffice.com/wiki/ZyopwHâ€¦</a></p>
<p><strong>ä½œå“æäº¤</strong></p>
<p>ç‚¹å‡»é“¾æ¥å¡«å†™ä¿¡æ¯æäº¤æ‚¨çš„ä½œå“ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbytedance.larkoffice.com%2Fshare%2Fbase%2Fform%2Fshrcn39zYBrefgIBMiOVQ5wC8ih" target="_blank" title="https://bytedance.larkoffice.com/share/base/form/shrcn39zYBrefgIBMiOVQ5wC8ih" ref="nofollow noopener noreferrer">bytedance.larkoffice.com/share/base/â€¦</a></p>
<hr/>
<p>å¤§èµ›å®Œæ•´æ´»åŠ¨åŒ…å« 3 å¤§èµ›é“ï¼Œç”¨æˆ·å¯å‚ä¸å¤šä¸ªèµ›é“ï¼Œæœ€å¤šæäº¤ 5 ä¸ªä½œå“ï¼Œæ¯ä¸ªä½œå“å‚ä¸è€…ä¸è¶…è¿‡ 3 äººã€‚ç‚¹å‡»æŸ¥çœ‹å…¶ä»–èµ›é“åŠå®Œæ•´æ´»åŠ¨ä¿¡æ¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQY0trtEFQs5vghGUgLE0aw" target="_blank" title="https://mp.weixin.qq.com/s/QY0trtEFQs5vghGUgLE0aw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/QY0trtEFQâ€¦</a></p>
<p>æ­¤å¤–ï¼Œå¤§èµ›è¿˜è®¾ç½®äº†å¦‚ä¸‹ç‰¹åˆ«å¥–é¡¹ğŸ‘‡</p>
<p><strong>å…¬ç›Šç‰¹åˆ«å¥–ï¼šæœ€ä½³ AI å…¬ç›Šå¥–5åï¼ˆå…¨èµ›é“ï¼‰</strong></p>
<ul>
<li>
<p>ä¸‰å¤§èµ›é“å‡å¯å‚ä¸ï¼Œå½¢å¼ä¸é™ï¼Œä½ å¯ä»¥é€‰æ‹©å…¬ç›Šåœºæ™¯ï¼Œæˆ–å®ˆæŠ¤é“¶å‘æ•°å­—ç”Ÿæ´»ä¸é’å°‘å¹´å¥åº·æˆé•¿ï¼Œæˆ–åŠ©åŠ›ä¹¡æ‘æ•™å¸ˆæ•™å­¦èƒ½åŠ›æå‡ã€‚è®©AIä¸ä»…èƒ½å¤Ÿæ¿€å‘åˆ›æ„ã€æå‡æ•ˆç‡ï¼Œæ›´èƒ½ä¼ é€’æ¸©åº¦ï¼ŒåŠ©åŠ›ç§‘æŠ€æ™®æƒ ä¸åˆ›æ–°ã€‚</p>
</li>
<li>
<p>å¥–é‡‘ <strong>3000</strong> å…ƒ+<strong>å…¬ç›Šå‘¨è¾¹</strong></p>
</li>
</ul>
<p><strong>ä¼ æ’­ç‰¹åˆ«å¥–ï¼šæœ€ä½³ AI åˆ›æ„å¥–20åï¼ˆå…¨èµ›é“ï¼‰</strong></p>
<ul>
<li>
<p>ä¸‰å¤§èµ›é“å‡å¯å‚ä¸ï¼Œå½¢å¼ä¸é™ï¼Œä½ å¯ä»¥é€‰æ‹©å¸®ä½ çš„ä½œå“/å¼€å‘è¿‡ç¨‹ç­‰ç­‰ç¬é—´å‘å¸ƒåˆ°æŠ–éŸ³ã€å°çº¢ä¹¦ã€å³åˆ»ã€Bç«™ã€å…¬ä¼—å·ã€ç¤¾ç¾¤ç­‰ä»»æ„ç¤¾äº¤å¹³å°ä¸Šï¼Œè‰¾ç‰¹@æ‰£å­Cozeï¼Œæ‰“ä¸Š#æ‰£å­AIå·¥åŠ #æ‰£å­ç©ºé—´ ä¸¤ä¸ªtagï¼Œå³å¯å‚ä¸è¯„é€‰ã€‚</p>
</li>
<li>
<p>æˆ‘ä»¬å°†æ ¹æ®æ‚¨çš„ä½œå“äº’åŠ¨æ•°æ®é‡ï¼ˆç‚¹èµã€æ”¶è—ã€è¯„è®ºç­‰ç›¸å…³æ•°æ®ï¼‰ä½œä¸ºè¯„é€‰æ ‡å‡†ï¼Œä¸ºæ‚¨é€ä¸Š<strong>æ‰£å­å‘¨è¾¹ä¸‰ä»¶å¥—</strong>ï¼ˆæ‰£å­ææã€æ‰£å­å¡å¥—ã€æ‰£å­è´´çº¸ï¼‰</p>
</li>
</ul>
<p><strong>ä¼˜ç§€å¥–ï¼šä¼˜ç§€ AI å®è·µå¥–100åï¼ˆå…¨èµ›é“ï¼‰</strong></p>
<ul>
<li>ä¸‰å¤§èµ›é“å‡å¯å‚ä¸ï¼Œå½¢å¼ä¸é™ï¼Œç¬¦åˆæ ‡å‡†çš„ Top 100 çš„ä½œå“ï¼Œå°†è·å¾—ä¼˜ç§€ AI å®è·µå¥–</li>
</ul>
<p>ç‚¹å‡»ã€é˜…è¯»åŸæ–‡ã€‘äº†è§£æ´»åŠ¨è¯¦æƒ…</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JDK 8 Stream API æ•™ç¨‹æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7571644531608043566</link>    <guid>https://juejin.cn/post/7571644531608043566</guid>    <pubDate>2025-11-12T09:20:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571644531608043566" data-draft-id="7571644531607846958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JDK 8 Stream API æ•™ç¨‹æ–‡æ¡£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T09:20:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Main12138"/> <meta itemprop="url" content="https://juejin.cn/user/124660844331034"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JDK 8 Stream API æ•™ç¨‹æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/124660844331034/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Main12138
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:20:09.000Z" title="Wed Nov 12 2025 09:20:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Stream ç®€ä»‹</h2>
<p>Stream æ˜¯ JDK 8 ä¸­å¤„ç†é›†åˆï¼ˆCollectionï¼‰æ•°æ®çš„æ–°æŠ½è±¡ï¼Œå®ƒå¯ä»¥è®©ä½ ä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œç±»ä¼¼äºä½¿ç”¨ SQL è¯­å¥è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<p>List names = Arrays.asList("Alice", "Bob", "Charlie", "David");</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼</span>
List&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
<span class="hljs-keyword">for</span> (String name : names) {
    <span class="hljs-keyword">if</span> (name.startsWith(<span class="hljs-string">"A"</span>)) {
        result.add(name.toUpperCase());
    }
}

<span class="hljs-comment">// Stream æ–¹å¼</span>
List&lt;String&gt; streamResult = names.stream()
    .filter(name -&gt; name.startsWith(<span class="hljs-string">"A"</span>))
    .map(String::toUpperCase)
    .collect(Collectors.toList());
</code></pre>
<h2 data-id="heading-1">Stream çš„ç‰¹ç‚¹</h2>
<ol>
<li><strong>ä¸æ˜¯æ•°æ®ç»“æ„</strong>ï¼šStream ä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œåªæ˜¯å¯¹æ•°æ®æºè¿›è¡Œè®¡ç®—</li>
<li><strong>ä¸ä¿®æ”¹æºæ•°æ®</strong>ï¼šå¯¹ Stream çš„æ“ä½œä¸ä¼šå½±å“åŸå§‹æ•°æ®æº</li>
<li><strong>æƒ°æ€§æ‰§è¡Œ</strong>ï¼šä¸­é—´æ“ä½œæ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨ç»ˆæ­¢æ“ä½œæ—¶æ‰ä¼šæ‰§è¡Œ</li>
<li><strong>å¯æ¶ˆè´¹æ€§</strong>ï¼šStream åªèƒ½è¢«æ¶ˆè´¹ä¸€æ¬¡</li>
</ol>
<h2 data-id="heading-2">Stream æ“ä½œåˆ†ç±»</h2>























<table><thead><tr><th>æ“ä½œç±»å‹</th><th>æ–¹æ³•ç¤ºä¾‹</th><th>è¿”å›å€¼</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ä¸­é—´æ“ä½œ</td><td>filter(), map(), sorted()</td><td>Stream</td><td>æƒ°æ€§æ‰§è¡Œï¼Œå¯é“¾å¼è°ƒç”¨</td></tr><tr><td>ç»ˆæ­¢æ“ä½œ</td><td>forEach(), collect(), count()</td><td>éStream</td><td>ç«‹å³æ‰§è¡Œï¼Œå…³é—­æµ</td></tr></tbody></table>
<h2 data-id="heading-3">åˆ›å»º Stream</h2>
<h3 data-id="heading-4">1. ä»é›†åˆåˆ›å»º</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>);
Stream&lt;String&gt; stream = list.stream();
</code></pre>
<h3 data-id="heading-5">2. ä»æ•°ç»„åˆ›å»º</h3>
<pre><code class="hljs language-java" lang="java">String[] array = {<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>};
Stream&lt;String&gt; stream = Arrays.stream(array);
</code></pre>
<h3 data-id="heading-6">3. ä½¿ç”¨ Stream.of()</h3>
<pre><code class="hljs language-java" lang="java">Stream&lt;String&gt; stream = Stream.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>);
</code></pre>
<h3 data-id="heading-7">4. åˆ›å»ºæ•°å€¼æµ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">IntStream</span> <span class="hljs-variable">intStream</span> <span class="hljs-operator">=</span> IntStream.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>);     <span class="hljs-comment">// 1,2,3,4</span>
<span class="hljs-type">IntStream</span> <span class="hljs-variable">closedStream</span> <span class="hljs-operator">=</span> IntStream.rangeClosed(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// 1,2,3,4,5</span>
</code></pre>
<h3 data-id="heading-8">5. åˆ›å»ºæ— é™æµ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿæˆ10ä¸ªéšæœºæ•°</span>
Stream&lt;Double&gt; randomStream = Stream.generate(Math::random).limit(<span class="hljs-number">10</span>);

<span class="hljs-comment">// åˆ›å»ºæ–æ³¢é‚£å¥‘æ•°åˆ—</span>
Stream.iterate(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{<span class="hljs-number">0</span>, <span class="hljs-number">1</span>}, t -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{t[<span class="hljs-number">1</span>], t[<span class="hljs-number">0</span>] + t[<span class="hljs-number">1</span>]})
      .limit(<span class="hljs-number">10</span>)
      .map(t -&gt; t[<span class="hljs-number">0</span>])
      .forEach(System.out::println);
</code></pre>
<h2 data-id="heading-9">ä¸­é—´æ“ä½œ</h2>
<h3 data-id="heading-10">1. filter() - è¿‡æ»¤</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>, <span class="hljs-string">"David"</span>);
List&lt;String&gt; result = names.stream()
    .filter(name -&gt; name.length() &gt; <span class="hljs-number">3</span>)
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [Alice, Charlie, David]</span>
</code></pre>
<h3 data-id="heading-11">2. map() - æ˜ å°„</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>);
List&lt;Integer&gt; nameLengths = names.stream()
    .map(String::length)
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [5, 3, 7]</span>
</code></pre>
<h3 data-id="heading-12">3. flatMap() - æ‰å¹³åŒ–æ˜ å°„</h3>
<pre><code class="hljs language-java" lang="java">List&lt;List&lt;String&gt;&gt; listOfLists = Arrays.asList(
    Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>),
    Arrays.asList(<span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>)
);

List&lt;String&gt; flatList = listOfLists.stream()
    .flatMap(List::stream)
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [a, b, c, d]</span>
</code></pre>
<h3 data-id="heading-13">4. distinct() - å»é‡</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);
List&lt;Integer&gt; distinctNumbers = numbers.stream()
    .distinct()
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [1, 2, 3]</span>
</code></pre>
<h3 data-id="heading-14">5. sorted() - æ’åº</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Charlie"</span>, <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>);
List&lt;String&gt; sortedNames = names.stream()
    .sorted()
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [Alice, Bob, Charlie]</span>

<span class="hljs-comment">// è‡ªå®šä¹‰æ’åº</span>
List&lt;String&gt; customSorted = names.stream()
    .sorted((a, b) -&gt; b.length() - a.length())
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [Charlie, Alice, Bob]</span>
</code></pre>
<h3 data-id="heading-15">6. limit() å’Œ skip() - é™åˆ¶å’Œè·³è¿‡</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);

List&lt;Integer&gt; limited = numbers.stream()
    .limit(<span class="hljs-number">5</span>)
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [1, 2, 3, 4, 5]</span>

List&lt;Integer&gt; skipped = numbers.stream()
    .skip(<span class="hljs-number">5</span>)
    .collect(Collectors.toList());
<span class="hljs-comment">// ç»“æœ: [6, 7, 8, 9, 10]</span>
</code></pre>
<h3 data-id="heading-16">7. peek() - æŸ¥çœ‹å…ƒç´ ï¼ˆä¸»è¦ç”¨äºè°ƒè¯•ï¼‰</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; result = Stream.of(<span class="hljs-string">"one"</span>, <span class="hljs-string">"two"</span>, <span class="hljs-string">"three"</span>)
    .filter(s -&gt; s.length() &gt; <span class="hljs-number">3</span>)
    .peek(s -&gt; System.out.println(<span class="hljs-string">"Filtered value: "</span> + s))
    .map(String::toUpperCase)
    .peek(s -&gt; System.out.println(<span class="hljs-string">"Mapped value: "</span> + s))
    .collect(Collectors.toList());
</code></pre>
<h2 data-id="heading-17">ç»ˆæ­¢æ“ä½œ</h2>
<h3 data-id="heading-18">1. forEach() - éå†</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>);
names.stream().forEach(System.out::println);
</code></pre>
<h3 data-id="heading-19">2. collect() - æ”¶é›†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è½¬æ¢ä¸ºList</span>
List&lt;String&gt; list = stream.collect(Collectors.toList());

<span class="hljs-comment">// è½¬æ¢ä¸ºSet</span>
Set&lt;String&gt; set = stream.collect(Collectors.toSet());

<span class="hljs-comment">// è½¬æ¢ä¸ºMap</span>
Map&lt;String, Integer&gt; map = stream.collect(
    Collectors.toMap(s -&gt; s, String::length)
);

<span class="hljs-comment">// è¿æ¥å­—ç¬¦ä¸²</span>
<span class="hljs-type">String</span> <span class="hljs-variable">joined</span> <span class="hljs-operator">=</span> stream.collect(Collectors.joining(<span class="hljs-string">", "</span>));

<span class="hljs-comment">// åˆ†ç»„</span>
Map&lt;Integer, List&lt;String&gt;&gt; grouped = names.stream()
    .collect(Collectors.groupingBy(String::length));

<span class="hljs-comment">// åˆ†åŒº</span>
Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = names.stream()
    .collect(Collectors.partitioningBy(s -&gt; s.length() &gt; <span class="hljs-number">3</span>));
</code></pre>
<h3 data-id="heading-20">3. reduce() - å½’çº¦</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);

<span class="hljs-comment">// æ±‚å’Œ</span>
Optional&lt;Integer&gt; sum = numbers.stream().reduce(Integer::sum);
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-type">Integer</span> <span class="hljs-variable">sum2</span> <span class="hljs-operator">=</span> numbers.stream().reduce(<span class="hljs-number">0</span>, Integer::sum);

<span class="hljs-comment">// æ±‚æœ€å¤§å€¼</span>
Optional&lt;Integer&gt; max = numbers.stream().reduce(Integer::max);

<span class="hljs-comment">// å­—ç¬¦ä¸²è¿æ¥</span>
Optional&lt;String&gt; concat = Stream.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>).reduce(String::concat);
</code></pre>
<h3 data-id="heading-21">4. åŒ¹é…æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);

<span class="hljs-type">boolean</span> <span class="hljs-variable">allEven</span> <span class="hljs-operator">=</span> numbers.stream().allMatch(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>); <span class="hljs-comment">// false</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">anyEven</span> <span class="hljs-operator">=</span> numbers.stream().anyMatch(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>); <span class="hljs-comment">// true</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">noneEven</span> <span class="hljs-operator">=</span> numbers.stream().noneMatch(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>); <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-22">5. æŸ¥æ‰¾æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>);

Optional&lt;String&gt; first = names.stream().findFirst();
Optional&lt;String&gt; any = names.stream().findAny();
</code></pre>
<h3 data-id="heading-23">6. ç»Ÿè®¡æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);

<span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> numbers.stream().count();
<span class="hljs-type">IntSummaryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> numbers.stream()
    .mapToInt(Integer::intValue)
    .summaryStatistics();

System.out.println(<span class="hljs-string">"æœ€å¤§å€¼: "</span> + stats.getMax());
System.out.println(<span class="hljs-string">"æœ€å°å€¼: "</span> + stats.getMin());
System.out.println(<span class="hljs-string">"æ€»å’Œ: "</span> + stats.getSum());
System.out.println(<span class="hljs-string">"å¹³å‡å€¼: "</span> + stats.getAverage());
</code></pre>
<h2 data-id="heading-24">å¹¶è¡Œæµ</h2>
<h3 data-id="heading-25">åˆ›å»ºå¹¶è¡Œæµ</h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>);

<span class="hljs-comment">// æ–¹æ³•1ï¼šä»é›†åˆåˆ›å»º</span>
Stream&lt;String&gt; parallelStream = names.parallelStream();

<span class="hljs-comment">// æ–¹æ³•2ï¼šå°†é¡ºåºæµè½¬ä¸ºå¹¶è¡Œæµ</span>
Stream&lt;String&gt; parallel = names.stream().parallel();
</code></pre>
<h3 data-id="heading-26">å¹¶è¡Œæµç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);

<span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
<span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> numbers.parallelStream()
    .mapToLong(Integer::longValue)
    .sum();
<span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

System.out.println(<span class="hljs-string">"æ€»å’Œ: "</span> + sum);
System.out.println(<span class="hljs-string">"æ‰§è¡Œæ—¶é—´: "</span> + (endTime - startTime) + <span class="hljs-string">"ms"</span>);
</code></pre>
<h3 data-id="heading-27">å¹¶è¡Œæµæ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šç¡®ä¿æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li><strong>çŠ¶æ€æ— å…³</strong>ï¼šé¿å…æœ‰çŠ¶æ€çš„lambdaè¡¨è¾¾å¼</li>
<li><strong>é¡ºåºæ•æ„Ÿ</strong>ï¼šæŸäº›æ“ä½œï¼ˆå¦‚findFirstï¼‰åœ¨å¹¶è¡Œæµä¸­æ€§èƒ½å¯èƒ½æ›´å·®</li>
<li><strong>æ•°æ®é‡</strong>ï¼šå°æ•°æ®é‡ä½¿ç”¨å¹¶è¡Œæµå¯èƒ½é€‚å¾—å…¶å</li>
</ol>
<h2 data-id="heading-28">å®æˆ˜ç¤ºä¾‹</h2>
<h3 data-id="heading-29">ç¤ºä¾‹1ï¼šå‘˜å·¥æ•°æ®å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String department;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> salary;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
    
    <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setterçœç•¥</span>
}

List&lt;Employee&gt; employees = Arrays.asList(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"IT"</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">25</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">"Bob"</span>, <span class="hljs-string">"HR"</span>, <span class="hljs-number">4000</span>, <span class="hljs-number">30</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">"Charlie"</span>, <span class="hljs-string">"IT"</span>, <span class="hljs-number">6000</span>, <span class="hljs-number">35</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">"David"</span>, <span class="hljs-string">"Finance"</span>, <span class="hljs-number">5500</span>, <span class="hljs-number">28</span>)
);

<span class="hljs-comment">// 1. æŒ‰éƒ¨é—¨åˆ†ç»„ï¼Œè®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„</span>
Map&lt;String, Double&gt; avgSalaryByDept = employees.stream()
    .collect(Collectors.groupingBy(
        Employee::getDepartment,
        Collectors.averagingDouble(Employee::getSalary)
    ));

<span class="hljs-comment">// 2. æ‰¾å‡ºITéƒ¨é—¨å·¥èµ„æœ€é«˜çš„å‘˜å·¥</span>
Optional&lt;Employee&gt; highestPaidInIT = employees.stream()
    .filter(e -&gt; <span class="hljs-string">"IT"</span>.equals(e.getDepartment()))
    .max(Comparator.comparingDouble(Employee::getSalary));

<span class="hljs-comment">// 3. æŒ‰å¹´é¾„æ’åºï¼Œè·å–å‰3åå‘˜å·¥</span>
List&lt;Employee&gt; top3ByAge = employees.stream()
    .sorted(Comparator.comparingInt(Employee::getAge).reversed())
    .limit(<span class="hljs-number">3</span>)
    .collect(Collectors.toList());

<span class="hljs-comment">// 4. ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æ•°é‡</span>
Map&lt;String, Long&gt; employeeCountByDept = employees.stream()
    .collect(Collectors.groupingBy(
        Employee::getDepartment, 
        Collectors.counting()
    ));
</code></pre>
<h3 data-id="heading-30">ç¤ºä¾‹2ï¼šæ–‡ä»¶å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯»å–æ–‡ä»¶å¹¶ç»Ÿè®¡å•è¯é¢‘ç‡</span>
<span class="hljs-keyword">try</span> (Stream&lt;String&gt; lines = Files.lines(Paths.get(<span class="hljs-string">"file.txt"</span>))) {
    Map&lt;String, Long&gt; wordCount = lines
        .flatMap(line -&gt; Arrays.stream(line.split(<span class="hljs-string">"\s+"</span>)))
        .map(word -&gt; word.replaceAll(<span class="hljs-string">"[^a-zA-Z]"</span>, <span class="hljs-string">""</span>).toLowerCase())
        .filter(word -&gt; !word.isEmpty())
        .collect(Collectors.groupingBy(
            word -&gt; word, 
            Collectors.counting()
        ));
    
    <span class="hljs-comment">// æŒ‰é¢‘ç‡æ’åº</span>
    wordCount.entrySet().stream()
        .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())
        .limit(<span class="hljs-number">10</span>)
        .forEach(entry -&gt; 
            System.out.println(entry.getKey() + <span class="hljs-string">": "</span> + entry.getValue())
        );
} <span class="hljs-keyword">catch</span> (IOException e) {
    e.printStackTrace();
}
</code></pre>
<h3 data-id="heading-31">ç¤ºä¾‹3ï¼šå¤æ‚æ•°æ®è½¬æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤šå±‚æ•°æ®è½¬æ¢å’Œèšåˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-keyword">private</span> String customer;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
    <span class="hljs-keyword">private</span> LocalDate orderDate;
    <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setterçœç•¥</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderItem</span> {
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
    <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setterçœç•¥</span>
}

List&lt;Order&gt; orders = <span class="hljs-comment">// åˆå§‹åŒ–è®¢å•æ•°æ®</span>

<span class="hljs-comment">// è®¡ç®—æ¯ä¸ªå®¢æˆ·çš„æ€»æ¶ˆè´¹é‡‘é¢</span>
Map&lt;String, Double&gt; customerTotal = orders.stream()
    .collect(Collectors.groupingBy(
        Order::getCustomer,
        Collectors.summingDouble(order -&gt; 
            order.getItems().stream()
                .mapToDouble(item -&gt; item.getQuantity() * item.getPrice())
                .sum()
        )
    ));

<span class="hljs-comment">// æ‰¾å‡ºæœ€ç•…é”€çš„äº§å“</span>
Optional&lt;String&gt; bestSellingProduct = orders.stream()
    .flatMap(order -&gt; order.getItems().stream())
    .collect(Collectors.groupingBy(
        OrderItem::getProduct,
        Collectors.summingInt(OrderItem::getQuantity)
    ))
    .entrySet().stream()
    .max(Map.Entry.comparingByValue())
    .map(Map.Entry::getKey);
</code></pre>
<h2 data-id="heading-32">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨æ–¹æ³•å¼•ç”¨</strong>ï¼šä½¿ä»£ç æ›´ç®€æ´</li>
<li><strong>é¿å…å‰¯ä½œç”¨</strong>ï¼šä¿æŒå‡½æ•°çš„çº¯ç²¹æ€§</li>
<li><strong>åˆç†ä½¿ç”¨å¹¶è¡Œæµ</strong>ï¼šæ ¹æ®æ•°æ®é‡å’Œæ“ä½œå¤æ‚åº¦å†³å®š</li>
<li><strong>åŠæ—¶å…³é—­èµ„æº</strong>ï¼šä½¿ç”¨try-with-resourceså¤„ç†IOç›¸å…³çš„Stream</li>
<li><strong>åˆç†ä½¿ç”¨Optional</strong>ï¼šé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
</ol>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>JDK 8 çš„ Stream API ä¸ºé›†åˆæ“ä½œæä¾›äº†å¼ºå¤§çš„å‡½æ•°å¼ç¼–ç¨‹èƒ½åŠ›ï¼Œé€šè¿‡é“¾å¼è°ƒç”¨å’Œæƒ°æ€§æ±‚å€¼ç­‰ç‰¹æ€§ï¼Œå¯ä»¥å†™å‡ºæ›´ç®€æ´ã€æ˜“è¯»ã€é«˜æ•ˆçš„ä»£ç ã€‚æŒæ¡ Stream API å¯¹äºç°ä»£ Java å¼€å‘è‡³å…³é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ³ Docker Compose é¡¹ç›®ç›®å½•è¢«åˆ é™¤åï¼Œå¦‚ä½•å®‰å…¨å…³åœæ®‹ç•™å®¹å™¨]]></title>    <link>https://juejin.cn/post/7571594817223966771</link>    <guid>https://juejin.cn/post/7571594817223966771</guid>    <pubDate>2025-11-12T09:19:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817223966771" data-draft-id="7571475192490393610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ³ Docker Compose é¡¹ç›®ç›®å½•è¢«åˆ é™¤åï¼Œå¦‚ä½•å®‰å…¨å…³åœæ®‹ç•™å®¹å™¨"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2025-11-12T09:19:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Allenz"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170128279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ³ Docker Compose é¡¹ç›®ç›®å½•è¢«åˆ é™¤åï¼Œå¦‚ä½•å®‰å…¨å…³åœæ®‹ç•™å®¹å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170128279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Allenz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:19:07.000Z" title="Wed Nov 12 2025 09:19:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ³ Docker Compose é¡¹ç›®ç›®å½•è¢«åˆ é™¤åï¼Œå¦‚ä½•å®‰å…¨å…³åœæ®‹ç•™å®¹å™¨</h2>
<p>åœ¨æ—¥å¸¸ä½¿ç”¨ Docker Compose æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼š<br/>
é¡¹ç›®ç›®å½•è¢«åˆ é™¤äº†ï¼Œä½†å®¹å™¨ä¾ç„¶åœ¨è¿è¡Œï¼Œ<code>docker compose down</code> ä¹Ÿå¤±æ•ˆäº†ã€‚<br/>
æœ¬æ–‡æ€»ç»“äº†å¦‚ä½•å®‰å…¨åœ°æ¸…ç†è¿™äº›â€œå¤±è”â€çš„ Compose é¡¹ç›®ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å‘ç°é—®é¢˜ï¼šé¡¹ç›®ç›®å½•å·²ä¸¢å¤±</h3>
<p>æˆ‘ä»¬å¯ä»¥å…ˆåˆ—å‡ºæ‰€æœ‰ Compose é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker compose <span class="hljs-built_in">ls</span>
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">NAME            STATUS         CONFIG_FILES
webapp          <span class="hljs-built_in">running</span>(<span class="hljs-number">3</span>)     /home/user/webapp/docker-compose<span class="hljs-selector-class">.yml</span>
oldservice      <span class="hljs-built_in">running</span>(<span class="hljs-number">2</span>)     &lt;no such file or directory&gt;
</code></pre>
<p>å¯ä»¥çœ‹åˆ° <code>oldservice</code> çš„ç›®å½•å·²ç»ä¸å­˜åœ¨ï¼Œä½†å®¹å™¨è¿˜åœ¨è¿è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€ç¡®è®¤è¯¥é¡¹ç›®å¯¹åº”çš„å®¹å™¨</h3>
<p>Docker Compose å¯åŠ¨çš„å®¹å™¨éƒ½æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ labelï¼š<br/>
<code>com.docker.compose.project=&lt;project_name&gt;</code></p>
<p>é€šè¿‡å®ƒå¯ä»¥ç­›é€‰å‡ºæ‰€æœ‰å±äºè¯¥é¡¹ç›®çš„å®¹å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">docker ps -<span class="hljs-selector-tag">a</span> <span class="hljs-attr">--filter</span> "<span class="hljs-selector-tag">label</span>=com<span class="hljs-selector-class">.docker</span><span class="hljs-selector-class">.compose</span><span class="hljs-selector-class">.project</span>=oldservice"
</code></pre>
<p>è¿™ä¼šåˆ—å‡ºæ‰€æœ‰ <code>oldservice</code> çš„å®¹å™¨ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€å…³é—­å¹¶åˆ é™¤è¿™äº›å®¹å™¨</h3>
<p>åœæ‰å®¹å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">docker stop $(docker ps -<span class="hljs-selector-tag">q</span> <span class="hljs-attr">--filter</span> "<span class="hljs-selector-tag">label</span>=com<span class="hljs-selector-class">.docker</span><span class="hljs-selector-class">.compose</span><span class="hljs-selector-class">.project</span>=oldservice")
</code></pre>
<p>åˆ é™¤å®¹å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">rm</span> $(docker ps -aq --filter <span class="hljs-string">"label=com.docker.compose.project=oldservice"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-4">å››ã€æ¸…ç†æ®‹ç•™çš„ç½‘ç»œå’Œå·ï¼ˆå¯é€‰ï¼‰</h3>
<p>Compose ä¼šåˆ›å»ºç½‘ç»œå’Œå·ï¼Œä¹Ÿå¯ä»¥ç”¨ label åˆ é™¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> $(docker network <span class="hljs-built_in">ls</span> -q --filter <span class="hljs-string">"label=com.docker.compose.project=oldservice"</span>)

<span class="hljs-comment"># åˆ é™¤å·ï¼ˆâš ï¸ æ…ç”¨ï¼Œä¼šåˆ é™¤æ•°æ®ï¼‰</span>
docker volume <span class="hljs-built_in">rm</span> $(docker volume <span class="hljs-built_in">ls</span> -q --filter <span class="hljs-string">"label=com.docker.compose.project=oldservice"</span>)
</code></pre>
<p>æ‰§è¡Œå‰å¯ä»¥å…ˆæŸ¥çœ‹ç¡®è®¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker network <span class="hljs-built_in">ls</span>
docker volume <span class="hljs-built_in">ls</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">äº”ã€éªŒè¯æ¸…ç†ç»“æœ</h3>
<p>å†æ¬¡æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker compose <span class="hljs-built_in">ls</span>
</code></pre>
<p>å¦‚æœ <code>oldservice</code> å·²ç»ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œè¯´æ˜æ¸…ç†å¹²å‡€ âœ…ã€‚</p>
<hr/>
<h3 data-id="heading-6">å…­ã€ä¸€é”®æ¸…ç†â€œå¤±æ•ˆé¡¹ç›®â€ï¼ˆå¯é€‰è„šæœ¬ï¼‰</h3>
<p>å¦‚æœæœ‰å¤šä¸ªé¡¹ç›®ç›®å½•ä¸¢å¤±ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„è„šæœ¬è‡ªåŠ¨æ£€æµ‹å¹¶æ¸…ç†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker compose <span class="hljs-built_in">ls</span> --format json | jq -r <span class="hljs-string">'.[] | select(.ConfigFiles | test("no such file") or test("null")) | .Name'</span> |
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> name; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Cleaning project: <span class="hljs-variable">$name</span>"</span>
  docker stop $(docker ps -q --filter <span class="hljs-string">"label=com.docker.compose.project=<span class="hljs-variable">$name</span>"</span>) 2&gt;/dev/null
  docker <span class="hljs-built_in">rm</span> $(docker ps -aq --filter <span class="hljs-string">"label=com.docker.compose.project=<span class="hljs-variable">$name</span>"</span>) 2&gt;/dev/null
  docker network <span class="hljs-built_in">rm</span> $(docker network <span class="hljs-built_in">ls</span> -q --filter <span class="hljs-string">"label=com.docker.compose.project=<span class="hljs-variable">$name</span>"</span>) 2&gt;/dev/null
<span class="hljs-keyword">done</span>
</code></pre>
<p>ä¿å­˜ä¸º <code>docker-compose-clean.sh</code>ï¼Œæ·»åŠ æ‰§è¡Œæƒé™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x docker-compose-clean.sh
</code></pre>
<p>è¿è¡Œå³å¯æ‰¹é‡æ¸…ç†å¤±æ•ˆçš„ Compose é¡¹ç›®ã€‚</p>
<hr/>
<h3 data-id="heading-7">âœ… æ€»ç»“</h3>








































<table><thead><tr><th>æ“ä½œ</th><th>å‘½ä»¤ / æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŸ¥çœ‹é¡¹ç›®</td><td><code>docker compose ls</code></td><td>æ£€æŸ¥æ˜¯å¦æœ‰ç›®å½•ä¸¢å¤±</td></tr><tr><td>æŸ¥çœ‹å®¹å™¨</td><td><code>docker ps -a --filter label=com.docker.compose.project=xxx</code></td><td>æ‰¾åˆ°ç›¸å…³å®¹å™¨</td></tr><tr><td>åœæ­¢å®¹å™¨</td><td><code>docker stop ...</code></td><td>å…³é—­è¿è¡Œçš„å®¹å™¨</td></tr><tr><td>åˆ é™¤å®¹å™¨</td><td><code>docker rm ...</code></td><td>ç§»é™¤å®¹å™¨</td></tr><tr><td>åˆ é™¤ç½‘ç»œå’Œå·</td><td><code>docker network/volume rm ...</code></td><td>å¯é€‰æ¸…ç†</td></tr><tr><td>æ‰¹é‡æ¸…ç†è„šæœ¬</td><td><code>docker-compose-clean.sh</code></td><td>ä¸€é”®æ¸…ç†å¤±æ•ˆé¡¹ç›®</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¿»è¯‘ç•Œçš„ ChatGPT æ—¶åˆ»ï¼Meta å‘å¸ƒæ–°æ¨¡å‹ï¼Œå‡ æ®µç¤ºä¾‹å­¦ä¼šå†·é—¨æ–°è¯­è¨€]]></title>    <link>https://juejin.cn/post/7571655312798187546</link>    <guid>https://juejin.cn/post/7571655312798187546</guid>    <pubDate>2025-11-12T09:04:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655312798187546" data-draft-id="7571594817223819315" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¿»è¯‘ç•Œçš„ ChatGPT æ—¶åˆ»ï¼Meta å‘å¸ƒæ–°æ¨¡å‹ï¼Œå‡ æ®µç¤ºä¾‹å­¦ä¼šå†·é—¨æ–°è¯­è¨€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-12T09:04:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¿»è¯‘ç•Œçš„ ChatGPT æ—¶åˆ»ï¼Meta å‘å¸ƒæ–°æ¨¡å‹ï¼Œå‡ æ®µç¤ºä¾‹å­¦ä¼šå†·é—¨æ–°è¯­è¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:04:36.000Z" title="Wed Nov 12 2025 09:04:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0"/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35289ab50c1343c5ae82eb2d08fc5856~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=7s4ov%2BYyFOTClN666t4tf%2BWM%2Foc%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-1"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘åœ¨ 7000 å¤šç§äººç±»è¯­è¨€ä¸­ï¼Œåªæœ‰å°‘æ•°è¢«ç°ä»£è¯­éŸ³æŠ€æœ¯å¬è§ï¼Œå¦‚ä»Šè¿™ç§ä¸å¹³ç­‰æˆ–å°†è¢«æ‰“ç ´ã€‚Meta å‘å¸ƒçš„ Omnilingual ASR ç³»ç»Ÿèƒ½è¯†åˆ« 1600 å¤šç§è¯­è¨€ï¼Œå¹¶å¯é€šè¿‡å°‘é‡ç¤ºä¾‹å¿«é€Ÿå­¦ä¼šæ–°è¯­è¨€ã€‚ä»¥å¼€æºä¸ç¤¾åŒºå…±åˆ›ä¸ºæ ¸å¿ƒï¼Œè¿™é¡¹æŠ€æœ¯è®©æ¯ä¸€ç§å£°éŸ³éƒ½æœ‰æœºä¼šç™»ä¸Š AI çš„èˆå°ã€‚ã€</strong></h5>
<p>ä½ æˆ–è®¸å¾ˆéš¾æƒ³è±¡ï¼Œåœ¨ä¸–ç•Œä¸Š 7000 å¤šç§æ´»è·ƒè¯­è¨€ä¸­ï¼Œåªæœ‰å‡ ç™¾ç§äº«å—è¿‡ç°ä»£è¯­éŸ³æŠ€æœ¯çš„ã€Œå® çˆ±ã€ã€‚</p>
<p>ç»å¤§å¤šæ•°äººç±»è¯­è¨€çš„ä½¿ç”¨è€…â€”â€”ä»éæ´²éƒ¨è½çš„åœŸè‘—ã€äºšé©¬é€Šé›¨æ—çš„æ—ç¾¤ï¼Œåˆ°ä¹¡é‡å°é•‡ä»è®²ç€å¤è€æ–¹è¨€çš„è€äººâ€”â€” ä¸€ç›´ç”Ÿæ´»åœ¨æ•°å­—æ—¶ä»£çš„æ—ç™½ä¹‹å¤–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8385a2a59613471e8d84945ce630f7e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=%2BzyFmllhH5FXPbKuVRKxbuqs8Ew%3D" alt="" loading="lazy"/></p>
<p>è¯­éŸ³åŠ©æ‰‹ã€è‡ªåŠ¨å­—å¹•ã€å®æ—¶ç¿»è¯‘ï¼Œè¿™äº› AI å¸¦æ¥çš„ä¾¿åˆ©ä»¿ä½›åªä¸ºå°‘æ•°ã€Œä¸»æµã€è¯­è¨€è€Œç”Ÿï¼Œå…¶ä½™çš„è¯­è¨€ç¤¾åŒºä»è¢«æŒ¡åœ¨æŠ€æœ¯å¤§é—¨ä¹‹å¤–ã€‚</p>
<p>è¿™ç§æ•°å­—é¸¿æ²Ÿå¦‚ä»Šè¿æ¥äº†ç ´å±€è€…ã€‚</p>
<p>Meta äººå·¥æ™ºèƒ½ç ”ç©¶å›¢é˜Ÿæ—¥å‰å‘å¸ƒäº† Omnilingual ASR ç³»ç»Ÿï¼Œä¸€ä¸ªå¯è‡ªåŠ¨è¯†åˆ«è½¬å½• 1600 å¤šç§è¯­è¨€è¯­éŸ³çš„ AI æ¨¡å‹æ—ï¼Œè®©å‡ ä¹æ‰€æœ‰äººç±»è¯­è¨€éƒ½èƒ½è¢«æœºå™¨ã€Œå¬æ‡‚ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70bda614815a488ab485b8cb8c9a8f6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=juImunc4tN8uadBg438jrKZc92Q%3D" alt="" loading="lazy"/></p>
<p>è¿™å¥—ç³»ç»Ÿä»¥å¼€æºæ–¹å¼å…±äº«ç»™å…¨ä¸–ç•Œï¼Œå¹¶èƒ½ç”±ç¤¾åŒºäº²æ‰‹æ‹“å±•æ–°çš„è¯­è¨€ï¼Œè®©æ¯ä¸€ç§å£°éŸ³éƒ½æœ‰æœºä¼šç™»ä¸Š AI çš„èˆå°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8b0e708033a4de6b46e779c9d16db6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=z4vP4gaKh%2FcTFLa1jiVYB5rAMyU%3D" alt="" loading="lazy"/></p>
<p>è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.meta.com%2Fresearch%2Fpublications%2Fomnilingual-asr-open-source-multilingual-speech-recognition-for-1600-languages%2F" target="_blank" title="https://ai.meta.com/research/publications/omnilingual-asr-open-source-multilingual-speech-recognition-for-1600-languages/" ref="nofollow noopener noreferrer">ai.meta.com/research/puâ€¦</a></p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebookresearch%2Fomnilingual-asr%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/facebookresearch/omnilingual-asr?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/facebookresâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cb6f41908cb475c955b24b02d23122c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=H6vCf4i1zAPW8PXXDzzKTH6u5o4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ1600 ç§è¯­è¨€ï¼Œåªæ˜¯å¼€å§‹ã€</strong></p>
<p>Meta æ­¤æ¬¡æ¨å‡ºçš„ Omnilingual ASR åˆ›é€ äº†è¯­éŸ³è¯†åˆ«è¦†ç›–è¯­è¨€æ•°é‡çš„æ–°çºªå½•ï¼Œæ”¯æŒè¶…è¿‡ 1600 ç§è¯­è¨€ï¼Œå…¶ä¸­åŒ…æ‹¬ 500 ç§æ­¤å‰ä»æœªè¢«ä»»ä½• AI ç³»ç»Ÿè½¬å½•è¿‡çš„è¯­è¨€ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒOpenAI å¼€æºçš„ Whisper æ¨¡å‹åªæ”¯æŒ 99 ç§è¯­è¨€ï¼Œè€Œ Omnilingual ASR å‡ ä¹å°†è¿™ä¸€æ•°å­—æå‡äº†ä¸€ä¸ªæ•°é‡çº§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b88fb1635b564555931fc7fbde9b0c53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=OJyAyTNYq3zAnTbKiZbuGhRpn5M%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºå…¨çƒä¼—å¤šä½¿ç”¨å°è¯­ç§çš„äººæ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€æ¬¡ã€Œæ•°å­—é›ªè€»ã€ï¼šä»–ä»¬çš„æ¯è¯­ç¬¬ä¸€æ¬¡æœ‰äº†è¢« AI æµåˆ©å¬æ‡‚çš„å¯èƒ½æ€§ã€‚</p>
<p>è¿™å¥—ç³»ç»Ÿçš„è¯†åˆ«æ€§èƒ½åœ¨å¾ˆå¤šè¯­ç§ä¸Šå·²è¾¾åˆ°é¢†å…ˆæ°´å¹³ã€‚</p>
<p>æ® Meta æä¾›çš„æ•°æ®ï¼Œåœ¨æ‰€æµ‹è¯•çš„ 1600 å¤šç§è¯­è¨€ä¸­ï¼Œæœ‰ 78% çš„è¯­ç§å…¶è¯†åˆ«é”™è¯¯ç‡ï¼ˆCERï¼‰ä½äº 10%ï¼Œè‹¥ä»¥ 10 å°æ—¶ä»¥ä¸Šè¯­éŸ³æ•°æ®è®­ç»ƒçš„è¯­ç§æ¥çœ‹ï¼Œè¿™ä¸€æ¯”ä¾‹æ›´æ˜¯è¾¾åˆ° 95%ã€‚</p>
<p>å³ä½¿å¯¹äºè®­ç»ƒè¯­æ–™æå…¶ç¨€å°‘çš„ä½èµ„æºè¯­è¨€ï¼Œä»æœ‰ 36% å®ç°äº† CER ä½äº 10% çš„æ•ˆæœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bfe9ee07c47406f9c869a9ba3722975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=xxw%2FXHHfK5Tc38OSxuGD%2FXlX4VY%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›æ•°å­—æ„å‘³ç€ï¼ŒOmnilingual ASR ä¸ä»…è¦†ç›–é¢å¹¿ï¼Œè€Œä¸”åœ¨å¤§å¤šæ•°è¯­è¨€ä¸Šéƒ½èƒ½ç»™å‡ºå®ç”¨ä¸”é«˜è´¨é‡çš„è½¬å½•ç»“æœã€‚</p>
<p>ç„¶è€Œï¼Œ1600 ç§è¯­è¨€è¿˜ä¸æ˜¯ Omnilingual ASR çš„ç»ˆç‚¹ã€‚</p>
<p>æ›´å¤§çš„æ„ä¹‰åœ¨äºï¼Œå®ƒæ‰“ç ´äº†ä»¥å¾€ ASR æ¨¡å‹æ”¯æŒè¯­è¨€èŒƒå›´å›ºå®šæ­»æ¿çš„å±€é™ï¼Œè®©è¯­è¨€è¦†ç›–ä»ã€Œå®šé‡ã€èµ°å‘ã€Œå¯æ‰©å±•ã€ã€‚</p>
<p>Omnilingual ASR å€Ÿé‰´äº†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ€è·¯ï¼Œå¼•å…¥äº†é›¶æ ·æœ¬çš„ã€Œä¸Šä¸‹æ–‡å­¦ä¹ ã€æœºåˆ¶ã€‚</p>
<p>è¿™æ„å‘³ç€å³ä¾¿æŸç§è¯­è¨€æœ€åˆä¸åœ¨æ”¯æŒåˆ—è¡¨ä¸­ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡æä¾›å‡ æ®µè¯¥è¯­è¨€çš„éŸ³é¢‘å’Œå¯¹åº”æ–‡æœ¬ä½œä¸ºç¤ºä¾‹ï¼Œåœ¨æ¨ç†è¿‡ç¨‹ä¸­å³æ—¶è®©æ¨¡å‹å­¦ä¼šä¸€ç§æ–°è¯­è¨€ã€‚</p>
<p>æ— éœ€è€—è´¹æ•°æœˆæ”¶é›†å¤§å‹è¯­æ–™ã€æ— éœ€ä¸“ä¸šæ·±åº¦å­¦ä¹ è®­ç»ƒï¼Œåªéœ€ç®€å•çš„å°‘æ ·æœ¬å­¦ä¹ ï¼ˆfew-shotï¼‰å³å¯å­¦ä¼šæ–°è¯­è¨€ã€‚</p>
<p>å‡­å€Ÿè¿™ç§é©æ–°æ€§çš„èŒƒå¼ï¼ŒOmnilingual ASR çš„æ½œåœ¨è¯­è¨€è¦†ç›–èƒ½åŠ›éª¤ç„¶æ‰©å¼ ã€‚</p>
<p>å®˜æ–¹è¡¨ç¤ºï¼Œç†è®ºä¸Šè¯¥ç³»ç»Ÿå¯ä»¥æ‰©å±•åˆ°è¶…è¿‡ 5400 ç§è¯­è¨€ï¼Œå‡ ä¹æ¶µç›–æ‰€æœ‰æœ‰æ–‡å­—è®°å½•çš„äººç±»è¯­è¨€ï¼</p>
<p>æ— è®ºå¤šå†·é—¨çš„å£è¯­ï¼Œåªè¦æœ‰å¯¹åº”çš„ä¹¦å†™ä½“ç³»å’Œå‡ å¥ç¤ºä¾‹ï¼Œå®ƒå°±æœ‰æœºä¼šè¢« Omnilingual ASR æ•æ‰è®°å½•ã€‚</p>
<p>åœ¨ AI è¯­éŸ³è¯†åˆ«é¢†åŸŸï¼Œè¿™æ˜¯ä»é™æ€å°é—­èµ°å‘åŠ¨æ€è‡ªé€‚åº”çš„èŒƒå¼è½¬å˜â€”â€”æ¨¡å‹ä¸å†æŸç¼šäºè®­ç»ƒæ—¶é¢„è®¾çš„è¯­è¨€æ¸…å•ï¼Œè€Œæˆä¸ºä¸€ä¸ªçµæ´»å¼€æ”¾çš„æ¡†æ¶ï¼Œé¼“åŠ±å„åœ°ç¤¾åŒºè‡ªè¡ŒåŠ å…¥æ–°è¯­è¨€ã€‚</p>
<p>å¯¹äºé‚£äº›é•¿æœŸç¼ºå¸­äºæŠ€æœ¯ç‰ˆå›¾çš„æ—ç¾¤æ¥è¯´ï¼Œè¿™æ— å¼‚äºæŒæ¡äº†ä¸€æŠŠå¯ä»¥éšæ—¶äº²æ‰‹ã€Œè§£é”ã€æ–°è¯­è¨€çš„å¤§é—¨é’¥åŒ™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45cb950026544062a56224dbb63de755~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=PFiiO0esWWoXUY4DytwUlpxK6LU%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå¼€æºä¸ç¤¾åŒºã€</strong></p>
<p><strong>ã€Œæ‰“ç ´è¯­è¨€é¸¿æ²Ÿã€</strong></p>
<p>Omnilingual ASR çš„å¦ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹åœ¨äºå…¶å¼€æºå’Œç¤¾åŒºé©±åŠ¨çš„å±æ€§ã€‚</p>
<p>Meta é€‰æ‹©å°†è¿™ä¸€åºå¤§çš„å¤šè¯­ç§ ASR ç³»ç»Ÿåœ¨ GitHub ä¸Šå®Œå…¨å¼€æºï¼Œé‡‡ç”¨ Apache 2.0 è®¸å¯å‘å¸ƒæ¨¡å‹å’Œä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e5d6eeb2e774ce5ad1a9db010859706~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=dRKP4NetL220b0bxe4WKBQbcU%2Bs%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºæ˜¯ç ”ç©¶äººå‘˜ã€å¼€å‘è€…è¿˜æ˜¯ä¼ä¸šæœºæ„ï¼Œéƒ½å¯ä»¥å…è´¹ä½¿ç”¨ã€ä¿®æ”¹ã€å•†ç”¨è¿™å¥—æ¨¡å‹ï¼Œè€Œæ— éœ€æ‹…å¿ƒç¹ççš„æˆæƒé™åˆ¶ã€‚</p>
<p>å¯¹æ¯”æ­¤å‰ä¸€äº› AI æ¨¡å‹å¸¦æœ‰é™„åŠ æ¡æ¬¾çš„ã€ŒåŠå¼€æºã€æ¨¡å¼ï¼ŒOmnilingual ASR çš„å¼€æ”¾å§¿æ€å¯è°“ååˆ†å¦è¡ï¼Œä¸ºæŠ€æœ¯æ°‘ä¸»åŒ–æ ‘ç«‹äº†æ¦œæ ·ã€‚</p>
<p>ä¸ºäº†è®©å„è¯­è¨€ç¤¾åŒºéƒ½èƒ½å—ç›Šï¼ŒMeta ä¸ä»…å¼€æ”¾äº†æ¨¡å‹ï¼Œè¿˜åŒæ­¥é‡Šæ”¾äº†ä¸€ä¸ªå·¨å¤§çš„å¤šè¯­è¨€è¯­éŸ³æ•°æ®é›†â€”â€”Omnilingual ASR è¯­æ–™åº“ã€‚</p>
<p>è¯¥è¯­æ–™åº“åŒ…å«äº† 350 ç§è¯­æ–™ç¨€ç¼ºçš„è¯­è¨€çš„è½¬å½•è¯­éŸ³æ•°æ®ï¼Œè¦†ç›–äº†è®¸å¤šä»¥å‰åœ¨æ•°å­—ä¸–ç•Œä¸­ã€Œå¤±å£°ã€çš„è¯­è¨€ã€‚</p>
<p>æ‰€æœ‰æ•°æ®ä»¥ CC-BY åè®®å¼€æ”¾æä¾›ã€‚</p>
<p>å¼€å‘è€…å’Œå­¦è€…å¯ä»¥åˆ©ç”¨è¿™äº›å®è´µèµ„æºï¼Œå»è®­ç»ƒæ”¹è¿›é€‚åˆæœ¬åœ°éœ€æ±‚çš„è¯­éŸ³è¯†åˆ«æ¨¡å‹ã€‚</p>
<p>è¿™ä¸€ä¸¾æªæ— ç–‘å°†å¸®åŠ©é‚£äº›ç¼ºä¹å¤§è§„æ¨¡æ ‡æ³¨è¯­æ–™çš„è¯­è¨€è·¨è¶Šæ•°æ®é—¨æ§›ï¼Œè®©ã€Œå°è¯­è¨€ã€ä¹Ÿæœ‰å¤§ä½œä¸ºçš„æœºä¼šã€‚</p>
<p>Omnilingual ASR èƒ½å¤Ÿå›Šæ‹¬å‰æ‰€æœªæœ‰çš„è¯­è¨€å¹¿åº¦ï¼Œç¦»ä¸å¼€å…¨çƒåˆä½œçš„æ”¯æ’‘ã€‚</p>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒMeta ä¸å„åœ°çš„è¯­è¨€ç»„ç»‡å’Œç¤¾åŒºæºæ‰‹æ”¶é›†äº†å¤§é‡è¯­éŸ³æ ·æœ¬ã€‚</p>
<p>ä»–ä»¬ä¸ Mozilla åŸºé‡‘ä¼šçš„ Common Voice é¡¹ç›®ã€éæ´²çš„ Lanfrica/NaijaVoices ç­‰æœºæ„åˆä½œï¼Œä»åè¿œåœ°åŒºæ‹›å‹Ÿæ¯è¯­äººå£«å½•åˆ¶è¯­éŸ³ã€‚</p>
<p>ä¸ºç¡®ä¿æ•°æ®å¤šæ ·ä¸”è´´è¿‘ç”Ÿæ´»ï¼Œè¿™äº›å½•éŸ³å¾€å¾€é‡‡ç”¨å¼€æ”¾å¼æé—®ï¼Œè®©è¯´è¯äººè‡ªç”±è¡¨è¾¾æ—¥å¸¸æƒ³æ³•ã€‚</p>
<p>æ‰€æœ‰å‚ä¸è€…éƒ½è·å¾—äº†åˆç†æŠ¥é…¬ï¼Œå¹¶éµå¾ªæ–‡åŒ–æ•æ„Ÿæ€§çš„æŒ‡å¯¼è¿›è¡Œé‡‡é›†ã€‚</p>
<p>è¿™ç§ç¤¾åŒºå…±åˆ›çš„æ¨¡å¼èµ‹äºˆäº† Omnilingual ASR æ·±åšçš„è¯­è¨€å­¦çŸ¥è¯†å’Œæ–‡åŒ–ç†è§£ï¼Œä¹Ÿå½°æ˜¾äº†é¡¹ç›®çš„äººæ–‡å…³æ€€ï¼šæŠ€æœ¯å¼€å‘å¹¶æ²¡æœ‰ä¹Ÿä¸åº”è¯¥å±…é«˜ä¸´ä¸‹åœ°ã€Œæ‹¯æ•‘ã€å°è¯­ç§ï¼Œè€Œæ˜¯ä¸å½“åœ°ç¤¾åŒºåˆä½œï¼Œè®©ä»–ä»¬è‡ªå·±æˆä¸ºè¯­è¨€æ•°å­—åŒ–çš„ä¸»è§’ã€‚</p>
<p>æŠ€æœ¯è§„æ ¼ä¸Šï¼ŒMeta æä¾›äº†ä¸€ç³»åˆ—ä¸åŒè§„æ¨¡çš„æ¨¡å‹ä»¥é€‚é…å¤šæ ·åŒ–çš„åº”ç”¨åœºæ™¯ï¼šä»å‚æ•°é‡çº¦ 3 äº¿çš„è½»é‡çº§æ¨¡å‹ï¼ˆé€‚åˆæ‰‹æœºç­‰ä½åŠŸè€—è®¾å¤‡ï¼‰åˆ°é«˜è¾¾ 70 äº¿å‚æ•°çš„å¼ºåŠ›æ¨¡å‹ï¼ˆè¿½æ±‚æè‡´å‡†ç¡®ç‡ï¼‰ä¸€åº”ä¿±å…¨ã€‚</p>
<p>æ¨¡å‹æ¶æ„é‡‡ç”¨è‡ªç›‘ç£é¢„è®­ç»ƒçš„ wav2vec 2.0 è¯­éŸ³ç¼–ç å™¨ï¼ˆæ‹“å±•åˆ° 70 äº¿å‚æ•°è§„æ¨¡ï¼‰æå–é€šç”¨éŸ³é¢‘ç‰¹å¾ï¼Œå¹¶ç»“åˆä¸¤ç§è§£ç å™¨ç­–ç•¥ï¼šä¸€ç§æ˜¯ä¼ ç»Ÿçš„ CTC è§£ç ï¼Œå¦ä¸€ç§åˆ™æ˜¯èå…¥ Transformer çš„å¤§æ¨¡å‹æ–‡æœ¬è§£ç å™¨ï¼Œåè€…èµ‹äºˆäº†æ¨¡å‹å¼ºå¤§çš„ä¸Šä¸‹æ–‡å­¦ä¹ èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb9adaa872842d7b4b1d8a4947e7caa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543076&amp;x-signature=4hD54n%2Fbro7nBUj8flJV2%2BHOL44%3D" alt="" loading="lazy"/></p>
<p>åºå¤§çš„æ¨¡å‹éœ€è¦æµ·é‡æ•°æ®æ¥æ”¯æ’‘â€”â€”Omnilingual ASR è®­ç»ƒä½¿ç”¨äº†è¶…è¿‡ 430 ä¸‡å°æ—¶çš„è¯­éŸ³éŸ³é¢‘ï¼Œæ¶µç›– 1239 ç§è¯­è¨€çš„ç´ æã€‚</p>
<p>è¿™æ˜¯æœ‰å²ä»¥æ¥æœ€å¤§è§„æ¨¡ã€å¤šæ ·æ€§æœ€é«˜çš„è¯­éŸ³è®­ç»ƒè¯­æ–™ä¹‹ä¸€ã€‚å¦‚æ­¤å¤§ä½“é‡çš„æ•°æ®åŠ ä¸Šç¤¾åŒºè´¡çŒ®çš„é•¿å°¾è¯­è¨€è¯­æ–™ï¼Œç¡®ä¿äº†æ¨¡å‹å¯¹å„ç§è¯­è¨€éƒ½å­¦åˆ°ç¨³å¥çš„è¯­éŸ³è¡¨ç¤ºï¼Œç”šè‡³å¯¹å®Œå…¨æ²¡è§è¿‡çš„è¯­è¨€ä¹Ÿæœ‰è‰¯å¥½çš„æ³›åŒ–åŸºç¡€ã€‚</p>
<p>æ­£å¦‚ç ”ç©¶è®ºæ–‡æ‰€æŒ‡å‡ºçš„ï¼Œã€Œæ²¡æœ‰ä»»ä½•æ¨¡å‹èƒ½é¢„å…ˆæ¶µç›–ä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€ï¼Œä½† Omnilingual ASR è®©ç¤¾åŒºèƒ½å¤Ÿç”¨è‡ªå·±çš„æ•°æ®æŒç»­æ‹“å±•è¿™ä»½æ¸…å•ã€ã€‚</p>
<p>è¿™æ ‡å¿—ç€è¯­éŸ³ AI ä»æ­¤å…·å¤‡äº†è‡ªæˆ‘ç”Ÿé•¿çš„ç”Ÿå‘½åŠ›ï¼Œèƒ½å¤Ÿä¸äººç±»è¯­è¨€çš„ä¸°å¯Œå¤šæ ·æ€§å…±åŒè¿›åŒ–ã€‚</p>
<p>å½“æŠ€æœ¯æ”¾ä¸‹å‚²æ…¢ï¼Œä»¥å¼€æºå§¿æ€æ‹¥æŠ±å¤šå…ƒï¼Œå½“æ¯ä¸€ç§è¯­è¨€çš„å£°éŸ³éƒ½æœ‰æœºä¼šè¢«è†å¬å’Œè®°å½•ï¼Œå½“æ²¡æœ‰ä»»ä½•ä¸€ç§è¯­è¨€è¢«æ•°å­—ä¸–ç•Œé—å¿˜ï¼Œæˆ‘ä»¬ç¦»çœŸæ­£æ¶ˆå¼­è¯­è¨€é¸¿æ²Ÿåˆè¿‘äº†ä¸€å¤§æ­¥ï¼Œäººç±»çš„è¿æ¥æ‰èƒ½çœŸæ­£å¼€å§‹æ¶ˆé™¤è¾¹ç•Œã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.meta.com%2Fblog%2Fomnilingual-asr-advancing-automatic-speech-recognition" target="_blank" title="https://ai.meta.com/blog/omnilingual-asr-advancing-automatic-speech-recognition" ref="nofollow noopener noreferrer">ai.meta.com/blog/omniliâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼é’‰é’‰å‘å¸ƒDeepResearchå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼Œå·²åœ¨çœŸå®ä¼ä¸šéƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7571655312798203930</link>    <guid>https://juejin.cn/post/7571655312798203930</guid>    <pubDate>2025-11-12T09:07:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571655312798203930" data-draft-id="7571644531607814190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼é’‰é’‰å‘å¸ƒDeepResearchå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼Œå·²åœ¨çœŸå®ä¼ä¸šéƒ¨ç½²"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-12T09:07:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼é’‰é’‰å‘å¸ƒDeepResearchå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼Œå·²åœ¨çœŸå®ä¼ä¸šéƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:07:40.000Z" title="Wed Nov 12 2025 09:07:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°å­—ç»æµæµªæ½®ä¸­ï¼Œä¼ä¸šå¯¹äºé«˜æ•ˆã€ç²¾å‡†çš„ä¿¡æ¯è·å–ä¸å†³ç­–æ”¯æŒçš„éœ€æ±‚æ—¥ç›Šè¿«åˆ‡ã€‚ä»å‰æ²¿ç§‘å­¦æ¢ç´¢åˆ°è¡Œä¸šè¶‹åŠ¿åˆ†æï¼Œå†åˆ°ä¼ä¸šçº§å†³ç­–æ”¯æŒï¼Œä¸€ä¸ªèƒ½å¤Ÿä»æµ·é‡å¼‚æ„æ•°æ®æºä¸­æå–å…³é”®çŸ¥è¯†ã€æ‰§è¡Œå¤šæ­¥éª¤æ¨ç†å¹¶ç”Ÿæˆç»“æ„åŒ–æˆ–å¤šæ¨¡æ€è¾“å‡ºçš„ã€Œæ·±åº¦ç ”ç©¶ç³»ç»Ÿã€æ­£å˜å¾—ä¸å¯æˆ–ç¼ºã€‚</p>
<p>ç„¶è€Œï¼Œç°æœ‰çš„ç ”ç©¶ç³»ç»Ÿï¼Œå°½ç®¡å„è‡ªåœ¨ç‰¹å®šé¢†åŸŸæœ‰æ‰€å»ºæ ‘ï¼Œå´æ™®éé¢ä¸´ç€éš¾ä»¥é€‚åº”çœŸå®ä¸–ç•Œä¼ä¸šç¯å¢ƒçš„æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>é™æ€æ¶æ„ä¸ç¼ºä¹é€‚åº”æ€§ï¼š</strong> Â å¤šæ•°ç³»ç»Ÿä¾èµ–é™æ€æç¤ºæˆ–å›ºå®šè„šæœ¬ï¼Œç¼ºä¹ä»çœŸå®ä¸–ç•Œåé¦ˆä¸­å­¦ä¹ å’Œä¼˜åŒ–çš„æœºåˆ¶ï¼Œéš¾ä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚å’Œæ•°æ®åˆ†å¸ƒã€‚</p>
</li>
<li>
<p><strong>ç§æœ‰æ•°æ®é›†æˆä¸åŠ¨æ€ä¼˜åŒ–ä¸è¶³ï¼š</strong> Â ç°æœ‰çš„ç ”ç©¶å‹æ™ºèƒ½ä½“ï¼Œå¦‚ OpenAI çš„ GPT ä»£ç†ï¼Œåœ¨é›†æˆå…¬å…±ä¿¡æ¯æºæ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†å¾€å¾€éš¾ä»¥å®‰å…¨ã€é«˜æ•ˆåœ°æ•´åˆä¼ä¸šç§æœ‰æ•°æ®ï¼Œä¹Ÿç¼ºä¹åŠ¨æ€ä¼˜åŒ–èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>ç¼ºä¹è‡ªåŠ¨åŒ–è¯„ä¼°ä¸æŒç»­ä¼˜åŒ–ï¼š</strong> Â åƒ Anthropic çš„ Claude Research Workbench è™½ç„¶å¼ºè°ƒå®‰å…¨æ€§ä¸äººæœºåä½œï¼Œä½†ç¼ºå°‘è‡ªåŠ¨è¯„ä¼°å’Œè¿ç»­ä¼˜åŒ–æœºåˆ¶ï¼Œéš¾ä»¥åœ¨éƒ¨ç½²ç¯å¢ƒä¸­å®ç°æŒç»­æ”¹è¿›ã€‚</p>
</li>
<li>
<p><strong>é•¿çŸ­æœŸè®°å¿†ä¸åŠ¨æ€æ¼”è¿›æœºåˆ¶ç¼ºå¤±ï¼š</strong> Â å¤šæ•°ç³»ç»Ÿç¼ºä¹æœ‰æ•ˆçš„é•¿çŸ­æœŸè®°å¿†èƒ½åŠ›ï¼Œæ— æ³•ç§¯ç´¯å’Œé‡ç”¨å†å²ç»éªŒï¼Œå¯¼è‡´æ™ºèƒ½ä½“åœ¨å¤„ç†å¤æ‚ã€é•¿æœŸä»»åŠ¡æ—¶æ•ˆç‡ä½ä¸‹ä¸”æ— æ³•æŒç»­è¿›æ­¥ã€‚</p>
</li>
<li>
<p><strong>è¡¨æ ¼ç»“æ„åŒ–æ¨ç†ä¸æ–‡æœ¬åˆæˆçš„è„±èŠ‚ï¼š</strong> Â ä¼ä¸šæ•°æ®ä¸­åŒ…å«å¤§é‡åŠç»“æ„åŒ–æˆ–å¤æ‚è¡¨æ ¼ï¼Œä½†ç°æœ‰ç³»ç»Ÿå¾€å¾€éš¾ä»¥å°†è¡¨æ ¼çš„ç²¾ç¡®ç¬¦å·æ¨ç†ä¸éç»“æ„åŒ–æ–‡æœ¬çš„ç”Ÿæˆåˆæˆæœ‰æ•ˆç»“åˆã€‚</p>
</li>
<li>
<p><strong>ç¼ºä¹è¯„ä¼°é©±åŠ¨çš„é—­ç¯è¿­ä»£ï¼š</strong> Â è®¸å¤šç³»ç»Ÿç¼ºå°‘ä¸€ä¸ªè¯„ä¼°é©±åŠ¨çš„é—­ç¯ä¼˜åŒ–æµç¨‹ï¼Œæ— æ³•ç³»ç»Ÿæ€§åœ°è¯†åˆ«ä½æ€§èƒ½æ¡ˆä¾‹ã€è¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„æ”¹è¿›å¹¶é˜²æ­¢æ€§èƒ½é€€åŒ–ã€‚</p>
</li>
</ul>
<p>ä¸ºäº†å¡«è¡¥è¿™äº›ç©ºç™½ï¼Œé˜¿é‡Œå·´å·´é’‰é’‰ï¼ˆDingtalkï¼‰å›¢é˜Ÿæå‡ºäº†Â Dingtalk-DeepResearchï¼Œä¸€ä¸ªä¸ºå¤æ‚ã€æ¼”è¿›çš„ä¼ä¸šä»»åŠ¡è®¾è®¡çš„ç»Ÿä¸€å¤šæ™ºèƒ½ä½“æ™ºèƒ½æ¡†æ¶ï¼Œæ—¨åœ¨æ•´åˆæ·±åº¦ç ”ç©¶ç”Ÿæˆã€å¼‚æ„è¡¨æ ¼æ¨ç†å’Œå¤šæ¨¡æ€æŠ¥å‘Šåˆæˆï¼Œä»è€Œæä¾›ä¸€ä¸ªé€‚åº”æ€§å¼ºã€å¯éƒ¨ç½²ã€ä¼ä¸šçº§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16c8be25baeb4a36ae48dee4bfb54e6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=U5MTR7TrHGfd2FdmbRIFmvEmHLU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>
<p>è®ºæ–‡æ ‡é¢˜ï¼šDingtalk DeepResearch: A Unified Multi Agent Framework for Adaptive Intelligence in Enterprise Environments</p>
</li>
<li>
<p>è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2510.24760" target="_blank" title="https://arxiv.org/abs/2510.24760" ref="nofollow noopener noreferrer">arxiv.org/abs/2510.24â€¦</a></p>
</li>
</ul>
<p>Dingtalk-DeepResearch åœ¨å›½é™…æƒå¨æ·±åº¦ç ”ç©¶è¯„æµ‹ DeepResearch Bench ä¸­å–å¾—Â 48.49Â é«˜åˆ†ï¼ˆå…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼‰ï¼Œæ˜¾è‘—è¶…è¶ŠåŒ…æ‹¬ OpenAIã€Claude åœ¨å†…çš„ä¸»æµç³»ç»Ÿï¼›å¹¶åœ¨ ResearcherBench è¾¾åˆ°Â 0.6050Â å¹³å‡è¦†ç›–ç‡ï¼ˆå…¨çƒç¬¬ä¸‰ã€å›½å†…ç¬¬ä¸€ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eb7319ad06f46d58474c0790462ed47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=Lpk6QpNI5fUhPryveF%2FPVI6cNYM%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/067e089e80ba466b9475dc03521a06d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=wo2YYRyjTqW8WUBa2Ip6Jnyn8Ec%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè¯¥æ¡†æ¶å·²ç¨³å®šéƒ¨ç½²äºåˆ¶é€ ä¸šã€ä¾›åº”é“¾ç­‰çœŸå®ä¼ä¸šåœºæ™¯ï¼Œèƒ½å¤Ÿåœ¨å¤æ‚å¼‚æ„è¡¨æ ¼ã€å¤šé˜¶æ®µæ¨ç†ä¸å¤šæ¨¡æ€ç”Ÿæˆä»»åŠ¡ä¸­ä¿æŒè¡Œä¸šé¢†å…ˆçš„å‡†ç¡®æ€§å’Œç¨³å¥æ€§ï¼Œå®ç°äº†å›½é™…é¡¶çº§åŸºå‡†ä¸å®é™…ç”Ÿäº§è½åœ°çš„åŒé‡çªç ´ã€‚</p>
<h3 data-id="heading-0">æ€»ä½“æ¶æ„ï¼š</h3>
<h3 data-id="heading-1">æ„å»ºä¼ä¸šæ™ºèƒ½çš„å¤§è„‘</h3>
<p>Dingtalk-DeepResearch æ¡†æ¶é‡‡ç”¨åˆ†å±‚è®¾è®¡ï¼Œæ—¨åœ¨ä¸ºä¼ä¸šæä¾›ä¸€ä¸ªå…¨é¢è€Œçµæ´»çš„æ™ºèƒ½ä¸­æ¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d91dd5fca2446b1a41597e53c721b93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=Fb0bdpWPSuxh15O1IL%2F6qSBFyfo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>Dingtalk-DeepResearch Agent Studioï¼šè¿™ä¸€å±‚æä¾›äº†ä¸“ä¸šçš„æ™ºèƒ½ä½“ï¼Œä¸“é—¨ç”¨äºæ·±åº¦ç ”ç©¶ã€è¡¨æ ¼æ•°æ®å¤„ç†å’Œæ•°æ®åˆ†æã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ”¯æŒå¯å®šåˆ¶çš„ä¸ªäººæ™ºèƒ½ä½“ï¼Œä»¥æ»¡è¶³ä¸åŒç”¨æˆ·çš„ç‰¹å®šéœ€æ±‚ã€‚è¿™ä½“ç°äº†æ¡†æ¶çš„ flexibility å’Œä¸ªæ€§åŒ–èƒ½åŠ›ã€‚</strong></p>
<p><strong>Dingtalk-DeepResearch Coreï¼šè¿™ä¸€å±‚</strong>ä½œä¸ºæ¡†æ¶çš„ã€Œå¤§è„‘ã€ï¼Œå®ƒé›†æˆäº†ä¸Šä¸‹æ–‡å‹ç¼©ã€æ¨ç†ä¸è§„åˆ’ã€é•¿çŸ­æœŸè®°å¿†å’Œäººæœºåä½œæ§åˆ¶ç­‰å…³é”®åŠŸèƒ½ã€‚è¯¥æ ¸å¿ƒè¿˜åŒ…æ‹¬ä¸€ä¸ªè‡ªæ¼”è¿›å¼•æ“ (DingAutoEvaluator)å’Œä¸€å¥—ä¸°å¯Œçš„é›†æˆå·¥å…·ï¼Œæ”¯æŒä»£ç æ‰§è¡Œã€ç½‘ç»œæœç´¢ã€æ–‡ä»¶ä¸è¡¨æ ¼æ£€ç´¢åŠå¤šæ¨¡æ€å¤„ç†ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒèƒ½ä¸é’‰é’‰ç”Ÿæ€ç³»ç»Ÿè¿æ¥ï¼Œå¹¶åœ¨ç”¨æˆ·æˆæƒä¸‹å®‰å…¨è®¿é—®ä¸ªäººå·¥ä½œæ–‡æ¡£ã€‚æ‰€æœ‰è¿™äº›èƒ½åŠ›å‡ç”±ç»è¿‡ CPTã€SFT å’Œ RL è®­ç»ƒçš„ LLM é©±åŠ¨ã€‚<br/>
<strong>Dingtalk-DeepResearch Data Layerï¼šè¿™ä¸€å±‚æ˜¯</strong>ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®éª¨å¹²ã€‚å®ƒæ•´åˆäº†çŸ¥è¯†å›¾è°±ã€æ•°æ®åº“ã€ç¼“å­˜ä»¥åŠåŒ…æ‹¬å¯¹è¯ã€éŸ³è§†é¢‘ã€å›¾ã€æ–‡æœ¬å’Œè¡¨æ ¼åœ¨å†…çš„å¤šæ¨¡æ€æ•°æ®é›†ã€‚è¯¥å±‚æ±‡é›†äº†ä¸šåŠ¡ã€è¡Œä¸šã€ä¸ªäººåŠåˆæˆæ•°æ®ï¼Œä¸ºæ™ºèƒ½ä½“æ£€ç´¢å’Œå…³è”å¤šæ ·åŒ–çš„ä¼ä¸šåŠè¡Œä¸šæ•°æ®æä¾›äº†åŸºç¡€ã€‚</p>
<h3 data-id="heading-2">è¯¦ç»†æ–¹æ³•ï¼š</h3>
<h3 data-id="heading-3">è‡ªé€‚åº”æ™ºèƒ½çš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>Dingtalk-DeepResearch çš„åˆ›æ–°ä¹‹å¤„åœ¨äºå…¶ç‹¬ç‰¹çš„æ–¹æ³•è®ºï¼Œå°¤å…¶æ˜¯åœ¨æ–‡æ¡£ç”Ÿæˆã€åœ¨çº¿å­¦ä¹ å’Œè¡¨æ ¼æ¨ç†æ–¹é¢ã€‚</p>
<p><strong>å¤§è§„æ¨¡å¤šé˜¶æ®µæ–‡æ¡£å¼ºåŒ–å­¦ä¹ ï¼šæ„å»ºæ–‡æ¡£ç”Ÿæˆä¸“å®¶</strong></p>
<p>ä¸ºäº†èµ‹äºˆ Dingtalk-DeepResearch å¼ºå¤§çš„æ–‡æ¡£ç”Ÿæˆèƒ½åŠ›ï¼Œè¯¥æ¡†æ¶è®¾è®¡äº†ä¸€ä¸ªå¤šé˜¶æ®µè®­ç»ƒç®¡é“ï¼Œç»“åˆäº†å¤§è§„æ¨¡å¥–åŠ±å»ºæ¨¡ã€ç»“æ„åŒ–æŸ¥è¯¢æ ¼å¼çš„ç›‘ç£å¾®è°ƒä»¥åŠåœ¨é™æ€å’Œå®æ—¶å†…å®¹æµä¸Šçš„å¼ºåŒ–å­¦ä¹ ï¼Œå¹¶é€šè¿‡çœŸå®ç”¨æˆ·æ•°æ®è¿›è¡Œåœ¨çº¿åå¥½ä¼˜åŒ–ã€‚</p>
<ul>
<li>é˜¶æ®µ 1ï¼šå¥–åŠ±æ¨¡å‹ï¼ˆDoc-RMï¼‰è®­ç»ƒ</li>
</ul>
<p>æ­¤é˜¶æ®µçš„ç›®æ ‡æ˜¯è®­ç»ƒä¸€ä¸ªæ–‡æ¡£ä¸“å±çš„å¥–åŠ±æ¨¡å‹ï¼ˆDoc-RMï¼‰ã€‚å›¢é˜Ÿä½¿ç”¨äº†çº¦ 80 ä¸‡ä¸ªäººå·¥æ ‡æ³¨çš„æ­£è´Ÿæ ·æœ¬å¯¹ ï¼Œè¿™äº›æ ·æœ¬æ ¹æ®äº‹å®å‡†ç¡®æ€§ã€è¯­ä¹‰è¦†ç›–ã€é€»è¾‘ç»“æ„å’Œå‘ˆç°æ¸…æ™°åº¦è¿›è¡Œè¯„ä¼° ã€‚è¯¥æ¨¡å‹å°†ä½œä¸ºåç»­å¼ºåŒ–å­¦ä¹ é˜¶æ®µçš„è¯„åˆ†éª¨å¹² ã€‚</p>
<ul>
<li>é˜¶æ®µ 2ï¼šç»“æ„åŒ–æŸ¥è¯¢æ ¼å¼çš„å†·å¯åŠ¨ç›‘ç£å¾®è°ƒ (SFT)</li>
</ul>
<p>ä¸ºä½¿æ¨¡å‹æŒæ¡ç‰¹å®šçš„è¾“å‡ºæ ¼å¼ï¼Œå›¢é˜Ÿä½¿ç”¨äº† 3,200 ä¸ªç²¾é€‰æ ·æœ¬è¿›è¡Œ SFT ã€‚è¿™äº›æ ·æœ¬æ¶µç›–å››å¤§ç±»æ ¼å¼ï¼šè§†è§‰å‘ˆç°ç”Ÿæˆï¼ˆå¦‚ Markdown æ ¼å¼çš„ PPTï¼‰ã€ç»“æ„åŒ–æ•°æ®è§£é‡Šï¼ˆå¦‚è¡¨æ ¼è§£æï¼‰ã€ç»¼åˆå¤šç« èŠ‚å™è¿° å’Œé¢†åŸŸç‰¹å®šæ¨¡æ¿ ã€‚æ­¤é˜¶æ®µä¼šå¥–åŠ±å…¼å…·å†…å®¹å‡†ç¡®æ€§ã€é€»è¾‘ç»“æ„å’Œç¾è§‚æ–‡æœ¬æ ¼å¼çš„è¾“å‡º ï¼Œä¸ºåç»­ RL è°ƒä¼˜å¥ å®šåŸºç¡€ ã€‚</p>
<ul>
<li>é˜¶æ®µ 3ï¼šé™æ€æ–‡æ¡£é›†åˆä¸Šçš„å¼ºåŒ–å­¦ä¹  (RL)</li>
</ul>
<p>åˆ©ç”¨è®­ç»ƒå¥½çš„ Doc-RM ä½œä¸ºå¥–åŠ±å‡½æ•° ï¼Œæ™ºèƒ½ä½“åœ¨å¤§å‹ç¦»çº¿æ–‡æ¡£åº“ä¸Šè¿›è¡Œå¼ºåŒ–å­¦ä¹ ã€‚å®ƒé€šè¿‡æ£€ç´¢é™æ€æ–‡æ¡£ã€åˆæˆç­”æ¡ˆï¼Œå¹¶æ ¹æ®è¦†ç›–èŒƒå›´ã€äº‹å®æ­£ç¡®æ€§å’Œè¿è´¯æ€§è·å¾—å¥–åŠ± ï¼Œä»è€Œåœ¨å—æ§ç¯å¢ƒä¸­å»ºç«‹ç¨³å®šçš„åˆæˆèƒ½åŠ›åŸºçº¿ ã€‚</p>
<ul>
<li>é˜¶æ®µ 4ï¼šå®æ—¶æ–‡æ¡£è·å–ä¸Šçš„å¼ºåŒ–å­¦ä¹  (RL)</li>
</ul>
<p>ä¸ºå¤„ç†æ—¶æ•ˆæ€§ä¿¡æ¯ï¼ŒRL è¢«æ‰©å±•åˆ°å®æ—¶å†…å®¹æ£€ç´¢ ã€‚å›¢é˜Ÿè®¾è®¡äº† 10,000 ä¸ªæ—¶é—´æ•æ„ŸæŸ¥è¯¢ ï¼Œè¦†ç›–äº†éœ€è¦é¿å…ã€Œäº‹ååè§ã€çš„åœºæ™¯ï¼ˆå¦‚è´¢åŠ¡é¢„æµ‹ï¼‰å’Œéœ€è¦æœ€æ–°ä¿¡æ¯çš„ã€Œè¿‡æ—¶ä¿¡æ¯ã€åœºæ™¯ï¼ˆå¦‚çªå‘æ–°é—»ï¼‰ã€‚ç³»ç»Ÿé€šè¿‡å®æ—¶æœç´¢è·å–æœ€æ–°æ–‡æ¡£ï¼Œå¹¶ç”± Doc-RM ç»“åˆå®šåˆ¶çš„å¥–æƒ©ç»“æ„ï¼ˆå¼ºè°ƒæ—¶é—´æ­£ç¡®æ€§ï¼‰è¿›è¡Œè¯„åˆ† ã€‚</p>
<ul>
<li>é˜¶æ®µ 5ï¼šåŸºäº Copilot çš„çœŸå®ç”¨æˆ·äº¤äº’åœ¨çº¿ç›´æ¥åå¥½ä¼˜åŒ– (DPO)</li>
</ul>
<p>åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œç³»ç»Ÿä½œä¸ºç”¨æˆ· Copilot è¿è¡Œ ã€‚é€šè¿‡æ”¶é›†æ¨¡å‹çš„åŸå§‹è¾“å‡ºå’Œç”¨æˆ·çš„ç¼–è¾‘ç‰ˆæœ¬ï¼Œç³»ç»Ÿä¼šæå–é«˜å½±å“åŠ›çš„å·®å¼‚ ï¼Œå¹¶å°†å…¶æ„é€ æˆåœ¨çº¿ DPO æ•°æ®é›†ï¼Œä»è€ŒæŒç»­å‘ç”¨æˆ·çš„ç‰¹å®šåå¥½è¿›è¡Œå¾®è°ƒ ã€‚</p>
<p>é€šè¿‡è¿™ä¸€å¤šé˜¶æ®µæ–¹æ³•ï¼ŒDingtalk-DeepResearch ä¸ä»…è·å¾—äº†å¼ºå¤§çš„æ–‡æ¡£ç”Ÿæˆèƒ½åŠ›ï¼Œè¿˜å®ç°äº†å¯¹ä¸æ–­å˜åŒ–çš„çœŸå®ä¸–ç•Œä¿¡æ¯éœ€æ±‚çš„è‡ªé€‚åº”å“åº”ã€‚</p>
<p><strong>ç†µå¼•å¯¼è®°å¿†æ£€ç´¢è‡ªé€‚åº”åœ¨çº¿å­¦ä¹ ï¼šæ— éœ€å¾®è°ƒ LLM çš„æŒç»­æ¼”è¿›</strong></p>
<p>Dingtalk-DeepResearch çš„ä¸€ä¸ªæ˜¾è‘—ç‰¹ç‚¹æ˜¯å…¶ç†µå¼•å¯¼ã€è®°å¿†æ„ŸçŸ¥çš„åœ¨çº¿å­¦ä¹ æœºåˆ¶ã€‚è¯¥æœºåˆ¶å…è®¸æ™ºèƒ½ä½“åœ¨ä¸å¾®è°ƒåº•å±‚ LLM å‚æ•°çš„æƒ…å†µä¸‹ï¼ŒæŒç»­é€‚åº”ä¸æ–­æ¼”å˜çš„ä»»åŠ¡ã€‚ç³»ç»Ÿå¹¶éä¾èµ–é™æ€æç¤ºï¼Œè€Œæ˜¯ä»ä¸€ä¸ªå¤–éƒ¨çš„ episodic memory bank ä¸­åŠ¨æ€é€‰æ‹©å’Œé‡ç”¨å…ˆå‰çš„æ¡ˆä¾‹ ï¼Œå¹³è¡¡äº†å¯¹é«˜ä»·å€¼ç»éªŒçš„åˆ©ç”¨å’Œå¯¹å¤šæ ·åŒ–å†å²æƒ…å¢ƒçš„æ¢ç´¢ã€‚</p>
<p>æ™ºèƒ½ä½“ä¼šæ ¹æ®å½“å‰ä»»åŠ¡çŠ¶æ€è®¡ç®—å­˜å‚¨æ¡ˆä¾‹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œè¯¥åˆ†å¸ƒå—å…¶ä¼°è®¡çš„ Q å€¼å’Œæ¸©åº¦å‚æ•°çš„è°ƒèŠ‚ ã€‚è¿™é¼“åŠ±äº†å¯¹æ›¿ä»£æ¡ˆä¾‹çš„æ¢ç´¢ï¼Œå‡è½»äº†å¯¹æ—©æœŸç»éªŒçš„è¿‡æ‹Ÿåˆ ã€‚åŒæ—¶ï¼Œè®°å¿†æ„ŸçŸ¥ç»„ä»¶é€šè¿‡å­¦ä¹ åˆ°çš„è¯­ä¹‰ç›¸ä¼¼æ€§æ¥ç¡®ä¿ä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼Œä»è€Œå‡†ç¡®åœ°é‡æ–°åº”ç”¨å¤šæ­¥éª¤æ¨ç†æ¨¡å¼å’Œå·¥å…·è°ƒç”¨åºåˆ— ã€‚</p>
<p>è¯¥æœºåˆ¶è¢«é›†æˆåˆ°è§„åˆ’å™¨-æ‰§è¡Œå™¨å¾ªç¯ä¸­ ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½ä¼šæ›´æ–°æ¡ˆä¾‹åº“ï¼Œåœ¨çº¿é‡æ–°è®­ç»ƒæ£€ç´¢ç­–ç•¥ï¼Œå¹¶é€æ­¥æé«˜æ¨ç†æ€§èƒ½ ã€‚æ­¤å¤–ï¼Œè¯¥ç³»ç»Ÿå°†è¿™ç§è®°å¿†é©±åŠ¨çš„èŒƒå¼æ‰©å±•åˆ°ä¸ªæ€§åŒ–å±‚é¢ï¼Œé€šè¿‡æ„å»ºç”¨æˆ·ç”»åƒã€æ–‡æ¡£äº¤äº’å†å²å’Œå…ˆå‰å·¥ä½œæµçš„é•¿æœŸç»“æ„åŒ–è®°å¿† ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿæ›´æ·±å…¥åœ°ç†è§£ç”¨æˆ·çš„å·¥ä½œé£æ ¼å’Œéœ€æ±‚ï¼Œä»è€Œæä¾›æ—¥ç›Šç›¸å…³å’Œé«˜æ•ˆçš„è¾…åŠ©ã€‚</p>
<p><strong>ç»“æ„æ„ŸçŸ¥å¼‚æ„è¡¨æ ¼è§£æã€æ£€ç´¢ä¸æ¨ç†ï¼šä¼ä¸šçº§æ•°æ®å¤„ç†çš„åˆ©å™¨</strong></p>
<p>åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œè¡¨æ ¼æ•°æ®å¾€å¾€ä¸æ–‡æœ¬å™è¿°æ··åˆï¼Œå½¢å¼å¤šæ ·ä¸”ç»“æ„å¤æ‚ã€‚Dingtalk-DeepResearch çš„è¡¨æ ¼é—®ç­”æ¨¡å—é€šè¿‡ç»“åˆå¸ƒå±€æ„ŸçŸ¥è¡¨æ ¼å»ºæ¨¡å’Œå¼‚æ„æ£€ç´¢-æ‰§è¡Œï¼Œå®ç°äº†ç²¾ç¡®ä¸”å¯è§£é‡Šçš„æ¨ç†ã€‚</p>
<ul>
<li><strong>æ•°æ®æ‘„å…¥ (Data Ingestion)</strong></li>
</ul>
<p>ç³»ç»Ÿåœ¨æ‘„å…¥åŠç»“æ„åŒ–è¡¨æ ¼æ—¶ä¼šä¿ç•™å…¶åŸå§‹å¸ƒå±€ï¼Œè€Œéæ‰å¹³åŒ–ä¸ºçº¯æ–‡æœ¬ã€‚è¡¨æ ¼è¢«è§£æä¸ºæ•è·äº†æ ‡é¢˜ã€åˆå¹¶å•å…ƒæ ¼å’ŒåµŒå¥—å…³ç³»çš„å±‚æ¬¡åŒ–è¡¨ç¤ºã€‚åŒæ—¶ï¼Œè¡¨æ ¼ä¹Ÿä»¥æ ‡å‡†åŒ–æ¨¡å¼å­˜å‚¨åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œå…¶ Markdown æ¸²æŸ“ç‰ˆæœ¬åˆ™åŠ å…¥æ–‡æœ¬çŸ¥è¯†åº“ã€‚è¿™ç§åŒå­˜å‚¨æ–¹æ³•ä¿æŒäº†ç»“æ„å®Œæ•´æ€§ï¼Œå¹¶åŒæ—¶æ”¯æŒç¬¦å·æŸ¥è¯¢å’Œå‘é‡æ£€ç´¢ã€‚</p>
<ul>
<li><strong>ç»“æ„åŒ–è§£æ (Structural Parsing)</strong></li>
</ul>
<p>ç³»ç»Ÿåº”ç”¨å¤šæ¨¡æ€æ£€æµ‹å™¨æ¥åŒºåˆ†æ ‡é¢˜å’Œå†…å®¹å•å…ƒæ ¼ ï¼Œæ¨æ–­åˆ—ç±»å‹ï¼ˆå¦‚ç¦»æ•£ã€è¿ç»­ï¼‰ï¼Œå¹¶åˆ†æå¸ƒå±€ä»¥è¯†åˆ«åµŒå…¥çš„å­è¡¨ ã€‚è¿™äº›ä¸°å¯Œçš„æ¨¡å¼æ³¨è§£ä¸ºç²¾ç¡®æ¨ç†å¥ å®šäº†åŸºç¡€ ã€‚</p>
<ul>
<li><strong>è¯­ä¹‰ç†è§£ (Semantic Understanding)</strong></li>
</ul>
<p>ç³»ç»Ÿä¼šå°†ç”¨æˆ·é—®é¢˜åˆ†è§£ä¸ºæ„ŸçŸ¥æ–‡æœ¬å’Œè¡¨æ ¼ä¸Šä¸‹æ–‡çš„ç‰¹å®šæ¨¡æ€å­æŸ¥è¯¢ ã€‚æŸ¥è¯¢è¯æ±‡é€šè¿‡åµŒå…¥ç›¸ä¼¼æ€§å’Œç±»å‹æ„ŸçŸ¥æ ‡è®°ä¸æ•°æ®åº“æ¨¡å¼åŠæ–‡æœ¬å®ä½“å¯¹é½ ã€‚è¿™ç§åˆ†è§£èƒ½ç¡®ä¿è¡¨æ ¼ç›¸å…³å­æŸ¥è¯¢è¢«ç›´æ¥ç”¨äºç¬¦å·æ‰§è¡Œï¼Œè€Œæ–‡æœ¬å­æŸ¥è¯¢åˆ™äº¤ç”±æ–‡æ¡£æ£€ç´¢å™¨å¤„ç† ã€‚</p>
<ul>
<li><strong>è¡¨æ ¼æ¨ç† (Tabular Reasoning)</strong></li>
</ul>
<p>å¯¹äºè¡¨æ ¼å­æŸ¥è¯¢ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ NL2SQL ç”Ÿæˆå™¨ ï¼Œåœ¨å…³ç³»æ•°æ®åº“ä¸Šç”Ÿæˆå¯æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œä»¥æ‰§è¡Œèšåˆã€è¿‡æ»¤æˆ–å¤šè·³è¿æ¥ ã€‚å¾—ç›Šäºè¯„ä¼°é©±åŠ¨çš„å¼€å‘èŒƒå¼ï¼ŒDingAutoEvaluator ä¼šæŒç»­å‘ç°ä½å‡†ç¡®åº¦çš„æ¡ˆä¾‹ ï¼Œå¹¶å°†å…¶åé¦ˆåˆ°ä¸“ç”¨è®­ç»ƒå¾ªç¯ä¸­ä»¥é‡æ–°è®­ç»ƒ NL2SQL ç”Ÿæˆå™¨ ï¼Œä»è€Œæé«˜å…¶é²æ£’æ€§å’Œæ‰§è¡Œå¯é æ€§ ã€‚</p>
<ul>
<li><strong>è¡¨æ ¼æ£€ç´¢ (Table Retrieval)</strong></li>
</ul>
<p>ç³»ç»Ÿé‡‡ç”¨æ··åˆçš„è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Šæ£€ç´¢ç­–ç•¥ ã€‚æ£€ç´¢è¿‡ç¨‹åˆ†ä¸¤é˜¶æ®µï¼šé¦–å…ˆä»æ–‡æœ¬çŸ¥è¯†åº“å’Œ Markdown æ¸²æŸ“çš„è¡¨æ ¼ä¸­è¿›è¡Œå¯†é›†å‘é‡å¬å› ï¼Œç„¶åä½¿ç”¨æ¨¡å¼æ„ŸçŸ¥çš„ç›¸å…³æ€§æ¨¡å‹è¿›è¡Œè¯­ä¹‰é‡æ’åº ã€‚</p>
<p>è¿™ç§ç´§å¯†é›†æˆç»“æ„ä¿ç•™æ‘„å…¥ã€ç²¾ç¡®è§£æã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥åˆ†è§£ã€ç¬¦å· SQL æ¨ç†å’Œè‡ªé€‚åº”æ£€ç´¢çš„æ–¹æ³•ï¼Œä½¿ Dingtalk-DeepResearch èƒ½å¤Ÿå¤§è§„æ¨¡å¤„ç†çœŸå®ä¸–ç•Œä¸­çš„å¼‚æ„æ•°æ®ï¼Œæä¾›ç¨³å¥çš„ä¼ä¸šçº§è¡¨æ ¼é—®ç­”èƒ½åŠ›ã€‚</p>
<p><strong>DingAutoEvaluatorï¼šæ•°æ®é£è½®ä¸æŒç»­ä¼˜åŒ–çš„æ ¸å¿ƒé©±åŠ¨</strong></p>
<p>DingAutoEvaluator æ˜¯ Dingtalk-DeepResearch å®ç°æŒç»­æ¼”è¿›çš„å…³é”®ã€‚å®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–è¯„ä¼°å¹³å°ï¼Œä½œä¸ºæ•°æ®é£è½®å’Œæ€§èƒ½æ¼”è¿›çš„æ ¸å¿ƒé©±åŠ¨åŠ›ï¼Œå°†å¼€å‘èŒƒå¼ä»å¯å‘å¼è¿­ä»£å’Œé›¶æ˜Ÿæ‰‹åŠ¨æ£€æŸ¥è½¬å˜ä¸ºå®Œå…¨è¯„ä¼°é©±åŠ¨çš„æ–¹æ³•ã€‚</p>
<p>è¯¥è¿‡ç¨‹å§‹äºä¸ç¡®å®šæ€§æ„ŸçŸ¥æ¡ˆä¾‹æŒ–æ˜ã€‚ç³»ç»Ÿä¼šæŒç»­ç›‘æ§æ¨¡å‹åœ¨æ£€ç´¢å’Œç”Ÿæˆå±‚é¢çš„è®¤çŸ¥ä¸ç¡®å®šæ€§å³°å€¼ ï¼Œè¿™äº›ã€Œç°è‰²åœ°å¸¦ã€çš„è¾“å‡ºï¼ˆå³æ¨¡å‹èƒ½åŠ›è¾¹ç¼˜çš„æ¨ç†ï¼‰ä¼šè¢«è‡ªåŠ¨è¯†åˆ«å¹¶ä¼˜å…ˆæäº¤ç»™ä¸“å®¶æ ‡æ³¨è€… ã€‚</p>
<p>éšåï¼Œå¹³å°ä¸­ç²¾å¿ƒç­–åˆ’çš„å¤šä¸ªã€Œæ•™å¸ˆæ¨¡å‹ã€ä¼šæ ¹æ®ä¸€ç³»åˆ—å¤šç»´åº¦è¯„ä¼°æŒ‡æ ‡å…¨é¢æ£€æŸ¥æ¡†æ¶çš„è¾“å‡º ã€‚è¿™ä¸ªç»Ÿä¸€çš„æµ‹é‡æ¡†æ¶ æ¶µç›–äº† RAGã€LLMã€æ¨ç†ã€æ™ºèƒ½ä½“æ¡†æ¶å’ŒçŸ¥è¯†åº“å¥åº·åº¦ç­‰å¤šä¸ªæ–¹é¢ ã€‚å…³é”®æŒ‡æ ‡ç±»åˆ«åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>RAG è¯„ä¼°ï¼šå¦‚ä¸Šä¸‹æ–‡ç²¾åº¦å’Œç­”æ¡ˆå¿ å®åº¦ã€‚</p>
</li>
<li>
<p>LLM è¯„ä¼°ï¼šå¦‚å“åº”å‡†ç¡®æ€§å’Œæ„å›¾è¯†åˆ«ã€‚</p>
</li>
<li>
<p>æ¨ç†è¯„ä¼°ï¼šå¦‚é€»è¾‘è¿è´¯æ€§å’Œæ€ç»´ä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p>æ™ºèƒ½ä½“æ¡†æ¶è¯„ä¼°ï¼šå¦‚ä»»åŠ¡ä¾ä»æ€§å’Œå·¥å…·ä½¿ç”¨æ­£ç¡®æ€§ã€‚</p>
</li>
<li>
<p>çŸ¥è¯†åº“è¯„ä¼°ï¼šå¦‚çŸ¥è¯†è¿‡æ—¶ç‡ ã€‚</p>
</li>
</ul>
<p>è¿™äº›æŒ‡æ ‡ä¸ä»…ç”¨äºç¦»çº¿åŸºå‡†æµ‹è¯•ï¼Œè¿˜ä½œä¸ºåœ¨çº¿ç›‘æ§å¾ªç¯ä¸­çš„å®æ—¶ä¿¡å·ï¼Œä¸ºæ•°æ®é£è½®æä¾›é«˜ä»·å€¼æ¡ˆä¾‹ï¼Œå¹¶ä¸ºå¥–åŠ±å»ºæ¨¡å’ŒæŒç»­ä¼˜åŒ–æä¾›ä¿¡å·ã€‚</p>
<h3 data-id="heading-4">å®éªŒç»“æœä¸æ¡ˆä¾‹å±•ç¤ºï¼š</h3>
<h3 data-id="heading-5">èƒ½åŠ›éªŒè¯ä¸å®é™…åº”ç”¨</h3>
<p>è®ºæ–‡é€šè¿‡å¤šä¸ªå®é™…æ¡ˆä¾‹å±•ç¤ºäº† Dingtalk-DeepResearch çš„ç«¯åˆ°ç«¯èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚è¡¨æ ¼æ•°æ®è§£æã€æ£€ç´¢ã€æ¨ç†ä»¥åŠå¤šæ¨¡æ€æ–‡æ¡£ç”Ÿæˆæ–¹é¢ã€‚</p>
<p><strong>å¤æ‚è¡¨æ ¼è§£æã€æ£€ç´¢ä¸æ¨ç†æ¡ˆä¾‹</strong></p>
<p>åœ¨æ¡ˆä¾‹ AÂ ä¸­ï¼Œç³»ç»Ÿå¤„ç†äº†ä¸€ä¸ªåŒ…å«åº“å­˜ã€å¤šå‘¨é¢„æµ‹å’Œå¤šå¼è”è¿è®¡åˆ’çš„å¤æ‚è¡¨æ ¼ã€‚Dingtalk-DeepResearch èƒ½å¤Ÿå‡†ç¡®è§£æå¤šèŠ‚ç”Ÿäº§è®°å½•ã€å‘è´§è®¡åˆ’å’Œç‰©æµè¯´æ˜ï¼Œå®ç°ç²¾ç¡®çš„ä¿¡æ¯æ£€ç´¢ä¸åˆæˆã€‚è¯¥æ–¹æ³•å¯æ‰©å±•åˆ°å¤šä¸ªå¤§å‹æ–‡ä»¶ï¼ˆå¦‚æ¡ˆä¾‹ä¸­ 8 ä¸ªç›¸ä¼¼çš„ 1200 è¡Œæ–‡ä»¶ï¼‰ï¼Œæ˜¾ç¤ºäº†å…¶é²æ£’æ€§å’Œå®ç”¨æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d00494f8564544daade9f3172dcbfe06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=l9Jh1y045BJrSC5NBu21uoqxjkY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ¡ˆä¾‹ BÂ ä¸­ï¼Œç³»ç»Ÿå¤„ç†äº†ä¸€ä¸ª 1200 è¡Œçš„å‘¨ç”Ÿäº§è®°å½• 103ï¼Œå¹¶å›ç­”äº†å…³äº 2025 å¹´ç¬¬ä¸€å­£åº¦æ€»äº§é‡çš„æé—® 104ã€‚ç³»ç»Ÿæ¸…æ™°åœ°å±•ç¤ºäº†å…¶ç«¯åˆ°ç«¯æµç¨‹ï¼š</p>
<ul>
<li>
<p>é—®é¢˜åˆ†è§£ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå››ä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬å®šä½è¡¨æ ¼ã€è¯†åˆ«æ—¶é—´èŒƒå›´ã€æå–æ•°æ®å’Œæ±‡æ€»ã€‚</p>
</li>
<li>
<p>è¡¨æ ¼æ£€ç´¢ä¸æ¨¡å¼é“¾æ¥ï¼šç³»ç»ŸæˆåŠŸå®šä½åˆ°ã€ŒYF Seat Weekly Production Statistics on Dec 30, 2024ã€è¡¨æ ¼ 106ï¼Œå¹¶å°†ã€ŒQ1 2025ã€é“¾æ¥åˆ° 13 ä¸ªå…·ä½“çš„å‘¨æ¬¡åˆ—ã€‚</p>
</li>
<li>
<p>SQL ç”Ÿæˆä¸æ‰§è¡Œï¼šç³»ç»Ÿç”Ÿæˆäº†ç²¾ç¡®çš„ SUM èšåˆ SQL è¯­å¥ 108ï¼Œå¹¶æˆåŠŸæ‰§è¡Œå¾—å‡º total_production = 245036ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f28bdd2f14e4f9f8e9447ef73a69b3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=ZAiREWG6si78B8UtvluiByzVAmA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>æœ€ç»ˆç­”æ¡ˆï¼šåŸºäºæ‰§è¡Œç»“æœï¼Œç³»ç»Ÿç»™å‡ºäº†ã€Œ...2025 å¹´ç¬¬ä¸€å­£åº¦...æ‰€æœ‰äº§å“çš„æ€»äº§é‡ä¸º 245036 ä»¶ã€çš„å‡†ç¡®å›ç­”ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e77a5cdd33ac4fc5bf00a551f448ecaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=Q7Qyi5pPJiEcsfD4GovJxSbMEpg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è¯­ä¹‰å¯¹é½çš„è§†è§‰-è¯­è¨€èåˆå¤šæ¨¡æ€æ–‡æ¡£ç”Ÿæˆ</strong></p>
<p>è¯¥æ¡†æ¶è¿˜å±•ç¤ºäº†å…¶åœ¨ Kaggle ç«èµ›æ¡ˆä¾‹ï¼ˆå„ç“œå¤šå°”è¶…å¸‚é”€å”®é¢„æµ‹ï¼‰ä¸­çš„ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–èƒ½åŠ› ã€‚ä»æºä»£ç ã€æ•°æ®å¤„ç†ã€ç»Ÿè®¡å¯è§†åŒ–åˆ°æœ€ç»ˆçš„åˆ†ææŠ¥å‘Šï¼Œå…¨éƒ¨ç”± Dingtalk-DeepResearch è‡ªåŠ¨ç”Ÿæˆå’Œæ‰§è¡Œï¼Œæ— éœ€ä»»ä½•äººå·¥å¹²é¢„ ã€‚</p>
<p>è¿™è¯æ˜äº†ç³»ç»Ÿåœ¨ä¸€ä¸ªç»Ÿä¸€çš„æ·±åº¦ç ”ç©¶å·¥ä½œæµä¸­ï¼Œé›†æˆäº†ä»£ç åˆæˆã€æ‰§è¡Œå’Œå¤šæ¨¡æ€ç»“æœå‘ˆç°çš„èƒ½åŠ› ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03cc4bfbb46642d1bb70bee758055497~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=nvOvOVNwjKi6N9PFsnf%2FwcCUpR4%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f481ef57cb4a2ab7289626e33368ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763543259&amp;x-signature=FKtnerw1jW6XMG9D0mv0hgOF9Ik%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-6">ç»“è®ºï¼š</h3>
<h3 data-id="heading-7">é¢å‘æœªæ¥çš„ä¼ä¸šçº§è‡ªé€‚åº”æ™ºèƒ½</h3>
<p>Dingtalk-DeepResearch æå‡ºäº†ä¸€ç§ç»Ÿä¸€çš„å¤šæ™ºèƒ½ä½“æ™ºèƒ½æ¡†æ¶ï¼Œä¸“ä¸ºä¼ä¸šç¯å¢ƒè®¾è®¡ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>
<p>ç†µå¼•å¯¼åœ¨çº¿å­¦ä¹ ï¼Œå®ç°æ— éœ€é¢‘ç¹å¾®è°ƒ LLM çš„è‡ªé€‚åº”èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>å¤§è§„æ¨¡å¤šé˜¶æ®µæ–‡æ¡£å¼ºåŒ–å­¦ä¹ ï¼Œæ˜¾è‘—æå‡æ–‡æ¡£ç”Ÿæˆçš„äº‹å®å‡†ç¡®æ€§ã€ç»“æ„è´¨é‡å’Œç”¨æˆ·å¯¹é½åº¦ã€‚</p>
</li>
<li>
<p>ç»“æ„æ„ŸçŸ¥å¼‚æ„è¡¨æ ¼æ¨ç†ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå¤„ç†çœŸå®ä¸–ç•Œä¸­å¤æ‚å¤šæ ·çš„è¡¨æ ¼æ•°æ®ã€‚</p>
</li>
<li>
<p>DingAutoEvaluator è‡ªåŠ¨åŒ–è¯„ä¼°å¼•æ“ï¼Œé€šè¿‡ä¸ç¡®å®šæ€§æ„ŸçŸ¥æ¡ˆä¾‹æŒ–æ˜å’Œå¤šç»´åº¦æŒ‡æ ‡ï¼Œå½¢æˆæ•°æ®é£è½®ï¼Œé©±åŠ¨æ¨¡å‹çš„æŒç»­ä¼˜åŒ–å’Œé˜²èŒƒæ€§èƒ½é€€åŒ–ã€‚</p>
</li>
</ul>
<p>Dingtalk-DeepResearch å·²ç»æˆåŠŸéƒ¨ç½²åœ¨ä¼ä¸šå†…éƒ¨å·¥ä½œæµç¨‹ä¸­ï¼Œå¹¶å³å°†ä½œä¸ºé’‰é’‰çš„æœåŠ¡å¯¹å¤–å¼€æ”¾ï¼Œè¿™å°†ä¸ºæ›´å¹¿æ³›çš„ä¼ä¸šç”¨æˆ·æä¾›é€‚åº”æ€§å¼ºã€è¯„ä¼°é©±åŠ¨ã€å¤šæ¨¡æ€æ¨ç†çš„å¤æ‚ä»»åŠ¡è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº PVE 8.1 çš„ CentOS / Ubuntu / Docker / Kubernetes éƒ¨ç½²æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7571650164843233314</link>    <guid>https://juejin.cn/post/7571650164843233314</guid>    <pubDate>2025-11-12T09:13:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571650164843233314" data-draft-id="7571636682694918184" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº PVE 8.1 çš„ CentOS / Ubuntu / Docker / Kubernetes éƒ¨ç½²æ‰‹å†Œ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T09:13:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾®å­¦ç½‘ç»œ"/> <meta itemprop="url" content="https://juejin.cn/user/1216516089188397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº PVE 8.1 çš„ CentOS / Ubuntu / Docker / Kubernetes éƒ¨ç½²æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1216516089188397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾®å­¦ç½‘ç»œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:13:38.000Z" title="Wed Nov 12 2025 09:13:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº PVE 8.1 çš„ CentOS / Ubuntu / Docker / Kubernetes éƒ¨ç½²æ‰‹å†Œ</h2>
<blockquote>
<p>é€‚ç”¨åœºæ™¯ï¼šä¸€å°å·²å®‰è£… Proxmox VE 8.1 çš„ç‰©ç†æœåŠ¡å™¨ï¼Œéœ€è¦åŒæ—¶è¿è¡Œå¤šä¸ª CentOS è™šæ‹Ÿæœºï¼ˆæˆ– LXC å®¹å™¨ï¼‰ä»¥éƒ¨ç½² Docker ç¯å¢ƒï¼Œå¹¶éƒ¨ç½²ä¸€ä¸ª Ubuntu è™šæ‹Ÿæœºç”¨äº Docker ä¸ Kubernetesï¼ˆK8sï¼‰é›†ç¾¤çš„æ­å»ºä¸ç®¡ç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. å‰ææ¡ä»¶ä¸è§„åˆ’</h3>
<ul>
<li><strong>ç¡¬ä»¶èµ„æº</strong>ï¼šè‡³å°‘ 8 æ ¸ CPUã€32â€¯GB å†…å­˜ã€500â€¯GB SSD/NVMeï¼ˆæ ¹æ®å®é™…ä¸šåŠ¡æ‰©å±•ï¼ŒK8s å»ºè®® 64â€¯GB+ å†…å­˜ï¼‰ã€‚</li>
<li><strong>ç½‘ç»œè§„åˆ’</strong>ï¼š</li>
<li>ç®¡ç†ç½‘æ®µï¼š<code>192.168.10.0/24</code>ï¼ˆPVE ç®¡ç†ã€SSHï¼‰</li>
<li>ç”Ÿäº§ç½‘æ®µï¼š<code>192.168.20.0/24</code>ï¼ˆè™šæ‹Ÿæœºä¸šåŠ¡æµé‡ï¼Œå¯é€‰ï¼‰</li>
<li>Kubernetes Pod ç½‘æ®µï¼š<code>10.244.0.0/16</code>ï¼ˆä»¥ Flannel ä¸ºä¾‹ï¼‰</li>
<li>Service ç½‘æ®µï¼š<code>10.96.0.0/12</code></li>
<li><strong>PVE å­˜å‚¨</strong>ï¼šå»ºè®®åˆ’åˆ† <code>local</code>ï¼ˆé•œåƒ/ISOï¼‰ã€<code>local-lvm</code>ï¼ˆVM ç£ç›˜ï¼‰ï¼Œå¦‚ä½¿ç”¨ Ceph/NFS éœ€æå‰é…ç½®ã€‚</li>
<li><strong>é•œåƒå‡†å¤‡</strong>ï¼š</li>
<li><code>CentOS 7/Stream 8/9</code> ISOï¼ˆå®˜æ–¹ï¼‰</li>
<li><code>Ubuntu Server 22.04 LTS</code> ISO</li>
<li><strong>è´¦å·ä¸æƒé™</strong>ï¼šå‡†å¤‡è‡³å°‘ä¸€ä¸ªæœ‰ PVE <code>root@pam</code> æƒé™çš„è´¦å· &amp; SSH å…¬é’¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. PVE 8.1 åŸºç¡€é…ç½®</h3>
<h4 data-id="heading-3">2.1 æ›´æ–° PVE ä¸è®¢é˜…è®¾ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">apt update &amp;&amp; apt full-upgrade -y  
sed -i <span class="hljs-string">'s/enterprise/no-subscription/g'</span> /etc/apt/sources.list.d/pve-enterprise.list  
<span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">'EOF'</span> &gt;/etc/apt/sources.list.d/pve-no-subscription.list  
deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription  
EOF  
apt update &amp;&amp; apt full-upgrade -y  
</code></pre>
<h4 data-id="heading-4">2.2 åˆ›å»ºæ¡¥æ¥ç½‘ç»œ</h4>
<ol>
<li>ç™»å½• PVE Web ç•Œé¢ â†’ <code>æ•°æ®ä¸­å¿ƒ</code> â†’ <code>èŠ‚ç‚¹</code> â†’ <code>ç³»ç»Ÿ</code> â†’ <code>ç½‘ç»œ</code></li>
<li>åˆ›å»º <code>vmbr1</code> ä½œä¸ºä¸šåŠ¡ç½‘æ¡¥ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š</li>
</ol>
<ul>
<li>ç±»å‹ï¼šLinux Bridge</li>
<li>ç‰©ç†æ¥å£ï¼š<code>enp3s0</code>ï¼ˆç¤ºä¾‹ï¼‰</li>
<li>IPv4/IPv6 é…ç½®ï¼šæŒ‰è§„åˆ’å¡«å†™æˆ–ç•™ç©º</li>
</ul>
<ol start="3">
<li>åº”ç”¨æ›´æ”¹å¹¶é‡å¯ç½‘ç»œæœåŠ¡ï¼š<code>ifreload -a</code></li>
</ol>
<hr/>
<h3 data-id="heading-5">3. å®‰è£…å¤šä¸ª CentOS + Docker</h3>
<h4 data-id="heading-6">3.1 åˆ›å»º CentOS æ¨¡æ¿è™šæ‹Ÿæœº</h4>
<ol>
<li>ä¸Šä¼  ISOï¼š<code>æ•°æ®ä¸­å¿ƒ</code> â†’ <code>å­˜å‚¨</code> â†’ <code>local</code> â†’ <code>å†…å®¹</code> â†’ <code>ä¸Šä¼ </code> ISOã€‚</li>
<li>æ–°å»º VM å‚æ•°å»ºè®®ï¼š</li>
</ol>
<ul>
<li>IDï¼š<code>2001</code></li>
<li>åç§°ï¼š<code>tmpl-centos7</code></li>
<li>BIOSï¼š<code>OVMF (UEFI)</code> æˆ– <code>SeaBIOS</code>ï¼ˆå–å†³äºéœ€æ±‚ï¼‰</li>
<li>SCSI æ§åˆ¶å™¨ï¼š<code>VirtIO SCSI</code></li>
<li>ç£ç›˜ï¼š<code>32â€¯GB</code>ï¼ˆThin provisionï¼‰</li>
<li>CPUï¼š<code>4 cores</code>ï¼Œç±»å‹ <code>host</code></li>
<li>å†…å­˜ï¼š<code>8â€¯GB</code></li>
<li>ç½‘ç»œï¼š<code>vmbr0</code>ï¼Œå‹å· <code>VirtIO (paravirtualized)</code></li>
</ul>
<ol start="3">
<li>å¯åŠ¨ VMï¼ŒæŒ‰å¸¸è§„æµç¨‹å®‰è£… CentOSï¼ˆMinimalï¼‰ã€‚</li>
<li>å®‰è£…åŸºç¡€å·¥å…·ä¸ QEMU Guest Agentï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo yum install -y epel-release  
sudo yum install -y qemu-guest-agent vim curl wget net-tools  
sudo systemctl <span class="hljs-built_in">enable</span> --now qemu-guest-agent  
</code></pre>
<ol start="5">
<li>é…ç½®é™æ€ IPï¼ˆç¤ºä¾‹ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">nmcli con mod ens18 ipv4.addresses 192.168.10.101/24  
nmcli con mod ens18 ipv4.gateway 192.168.10.1  
nmcli con mod ens18 ipv4.dns <span class="hljs-string">"8.8.8.8 114.114.114.114"</span>  
nmcli con mod ens18 ipv4.method manual  
nmcli con up ens18  
</code></pre>
<ol start="6">
<li>æ›´æ–°ç³»ç»Ÿå¹¶æ¸…ç†ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo yum update -y  
sudo yum clean all  
</code></pre>
<ol start="7">
<li>å…³æœºååœ¨ PVE Web ä¸Šå³é”® VM â†’ <code>è½¬æ¢ä¸ºæ¨¡æ¿</code>ã€‚</li>
</ol>
<h4 data-id="heading-7">3.2 å¿«é€Ÿå…‹éš†å¤šä¸ª CentOS å®ä¾‹</h4>
<ol>
<li>å³é”®æ¨¡æ¿ <code>tmpl-centos7</code> â†’ <code>å…‹éš†</code></li>
<li>è®¾ç½®ï¼š</li>
</ol>
<ul>
<li>VM IDï¼šä¾æ¬¡é€’å¢ <code>2010</code>, <code>2011</code>, â€¦</li>
<li>åç§°ï¼š<code>centos-docker-01</code> ç­‰</li>
<li>é€‰æ‹© <code>å®Œæ•´å…‹éš†</code> æˆ– <code>é“¾æ¥å…‹éš†</code>ï¼ˆä½¿ç”¨ Ceph/ZFS å»ºè®®é“¾æ¥å…‹éš†ï¼‰</li>
</ul>
<ol start="3">
<li>å…‹éš†å®Œæˆåå¯åŠ¨ VMï¼Œä¿®æ”¹ä¸»æœºåä¸ IPï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo hostnamectl set-hostname centos-docker-01  
nmcli con mod ens18 ipv4.addresses 192.168.10.110/24  
nmcli con mod ens18 ipv4.gateway 192.168.10.1  
nmcli con up ens18  
</code></pre>
<h4 data-id="heading-8">3.3 å®‰è£… Docker CEï¼ˆCentOSï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">sudo yum install -y yum-utils device-mapper-persistent-data lvm2  
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo  
sudo yum install -y docker-ce docker-ce-cli containerd.io  
sudo <span class="hljs-built_in">mkdir</span> -p /etc/docker  
<span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">'EOF'</span> | sudo <span class="hljs-built_in">tee</span> /etc/docker/daemon.json  
{  
<span class="hljs-string">"registry-mirrors"</span>: [  
<span class="hljs-string">"https://docker.m.daocloud.io"</span>,  
<span class="hljs-string">"https://hub-mirror.c.163.com"</span>  
],  
<span class="hljs-string">"exec-opts"</span>: [<span class="hljs-string">"native.cgroupdriver=systemd"</span>],  
<span class="hljs-string">"log-driver"</span>: <span class="hljs-string">"json-file"</span>,  
<span class="hljs-string">"log-opts"</span>: {  
<span class="hljs-string">"max-size"</span>: <span class="hljs-string">"100m"</span>  
},  
<span class="hljs-string">"storage-driver"</span>: <span class="hljs-string">"overlay2"</span>  
}  
EOF  
sudo systemctl <span class="hljs-built_in">enable</span> --now docker  
sudo usermod -aG docker <span class="hljs-variable">$USER</span>  
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šæ‰¹é‡èŠ‚ç‚¹å¯é€šè¿‡ <code>cloud-init</code> æˆ– <code>Ansible</code> æ¨é€ä¸Šè¿°é…ç½®ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">4. éƒ¨ç½² Ubuntu + Docker ç”¨äº Kubernetes</h3>
<h4 data-id="heading-10">4.1 åˆ›å»º Ubuntu è™šæ‹Ÿæœº</h4>
<ol>
<li>æ–°å»º VMï¼ˆç¤ºä¾‹ IDï¼š<code>3001</code>ï¼Œåç§° <code>ubuntu-master</code>ï¼‰ï¼Œå‚æ•°ï¼š</li>
</ol>
<ul>
<li>CPUï¼š<code>6 cores</code></li>
<li>å†…å­˜ï¼š<code>16â€¯GB</code></li>
<li>ç£ç›˜ï¼š<code>64â€¯GB</code></li>
<li>ç½‘ç»œï¼š<code>vmbr0</code>ï¼ˆç®¡ç†ï¼‰ï¼Œå¿…è¦æ—¶æ·»åŠ ç¬¬äºŒå—ç½‘å¡ <code>vmbr1</code></li>
</ul>
<ol start="2">
<li>å®‰è£… Ubuntu Server 22.04ï¼Œå¼€å¯ <code>OpenSSH Server</code> ç»„ä»¶ã€‚</li>
<li>é…ç½®é™æ€ IPï¼ˆ<code>netplan</code>ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/netplan/01-netcfg.yaml  
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">network:</span>  
<span class="hljs-attr">version:</span> <span class="hljs-number">2</span>  
<span class="hljs-attr">renderer:</span> <span class="hljs-string">networkd</span>  
<span class="hljs-attr">ethernets:</span>  
<span class="hljs-attr">ens18:</span>  
<span class="hljs-attr">addresses:</span>  
<span class="hljs-bullet">-</span> <span class="hljs-number">192.168</span><span class="hljs-number">.10</span><span class="hljs-number">.120</span><span class="hljs-string">/24</span>  
<span class="hljs-attr">gateway4:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.10</span><span class="hljs-number">.1</span>  
<span class="hljs-attr">nameservers:</span>  
<span class="hljs-attr">addresses:</span> [<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>, <span class="hljs-number">223.5</span><span class="hljs-number">.5</span><span class="hljs-number">.5</span>]  
</code></pre>
<p>åº”ç”¨ï¼š<code>sudo netplan apply</code></p>
<h4 data-id="heading-11">4.2 å®‰è£… Docker CEï¼ˆUbuntuï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">sudo apt update  
sudo apt install -y ca-certificates curl gnupg lsb-release  
sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings  
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg  
<span class="hljs-built_in">echo</span> \  
<span class="hljs-string">"deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \  
<span class="hljs-subst">$(lsb_release -cs)</span> stable"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null  
sudo apt update  
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin  
sudo systemctl <span class="hljs-built_in">enable</span> --now docker  
sudo usermod -aG docker <span class="hljs-variable">$USER</span>  
</code></pre>
<hr/>
<h3 data-id="heading-12">5. ä½¿ç”¨ kubeadm æ„å»º K8s é›†ç¾¤</h3>
<blockquote>
<p>å»ºè®®ä½¿ç”¨ Ubuntu èŠ‚ç‚¹ä½œä¸ºæ§åˆ¶å¹³é¢ï¼›å·¥ä½œèŠ‚ç‚¹å¯é€‰æ‹© CentOS æˆ– Ubuntuã€‚ä»¥ä¸‹ç¤ºä¾‹ï¼š1 Master + 2 Workerã€‚</p>
</blockquote>
<h4 data-id="heading-13">5.1 èŠ‚ç‚¹è§„åˆ’</h4>





























<table><thead><tr><th>è§’è‰²</th><th>ä¸»æœºå</th><th>IP</th><th>ç³»ç»Ÿ</th></tr></thead><tbody><tr><td>Master</td><td><code>k8s-master-01</code></td><td><code>192.168.10.120</code></td><td>Ubuntu 22.04</td></tr><tr><td>Worker 01</td><td><code>k8s-worker-01</code></td><td><code>192.168.10.130</code></td><td>CentOS 7/Stream</td></tr><tr><td>Worker 02</td><td><code>k8s-worker-02</code></td><td><code>192.168.10.131</code></td><td>CentOS 7/Stream</td></tr></tbody></table>
<h4 data-id="heading-14">5.2 é€šç”¨ç³»ç»Ÿè®¾ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">sudo swapoff -a  
sudo sed -i <span class="hljs-string">'/ swap / s/^/#/'</span> /etc/fstab  
sudo modprobe br_netfilter  
<span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">'EOF'</span> | sudo <span class="hljs-built_in">tee</span> /etc/modules-load.d/k8s.conf  
br_netfilter  
EOF  
<span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">'EOF'</span> | sudo <span class="hljs-built_in">tee</span> /etc/sysctl.d/k8s.conf  
net.bridge.bridge-nf-call-iptables = 1  
net.bridge.bridge-nf-call-ip6tables = 1  
net.ipv4.ip_forward = 1  
EOF  
sudo sysctl --system  
</code></pre>
<h4 data-id="heading-15">5.3 å®‰è£…å®¹å™¨è¿è¡Œæ—¶ï¼ˆcontainerdï¼‰</h4>
<blockquote>
<p>Kubernetes å®˜æ–¹æ¨èä½¿ç”¨ containerdã€‚å¯æ²¿ç”¨ Docker å®‰è£…åŒ…å†…çš„ containerdï¼Œæˆ–å•ç‹¬å®‰è£…ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">mkdir</span> -p /etc/containerd  
containerd config default | sudo <span class="hljs-built_in">tee</span> /etc/containerd/config.toml  
sudo sed -i <span class="hljs-string">'s/SystemdCgroup = false/SystemdCgroup = true/'</span> /etc/containerd/config.toml  
sudo systemctl restart containerd  
sudo systemctl <span class="hljs-built_in">enable</span> containerd  
</code></pre>
<h4 data-id="heading-16">5.4 å®‰è£… Kubernetes ç»„ä»¶</h4>
<h5 data-id="heading-17">åœ¨ Ubuntu èŠ‚ç‚¹ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash">sudo apt update  
sudo apt install -y apt-transport-https ca-certificates curl  
sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg  
<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main"</span> | \  
sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/kubernetes.list  
sudo apt update  
sudo apt install -y kubelet kubeadm kubectl  
sudo apt-mark hold kubelet kubeadm kubectl  
</code></pre>
<h5 data-id="heading-18">åœ¨ CentOS èŠ‚ç‚¹ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">'EOF'</span> | sudo <span class="hljs-built_in">tee</span> /etc/yum.repos.d/kubernetes.repo  
[kubernetes]  
name=Kubernetes  
baseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/  
enabled=1  
gpgcheck=1  
gpgkey=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key  
EOF  
sudo yum install -y kubelet kubeadm kubectl  
sudo systemctl <span class="hljs-built_in">enable</span> --now kubelet  
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šä¿æŒæ‰€æœ‰èŠ‚ç‚¹çš„ <code>kubelet/kubeadm/kubectl</code> ç‰ˆæœ¬ä¸€è‡´ã€‚</p>
</blockquote>
<h4 data-id="heading-19">5.5 åˆå§‹åŒ–æ§åˆ¶å¹³é¢</h4>
<p>åœ¨ Master èŠ‚ç‚¹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo kubeadm init \  
--apiserver-advertise-address=192.168.10.120 \  
--pod-network-cidr=10.244.0.0/16 \  
--service-cidr=10.96.0.0/12  
</code></pre>
<p>åˆå§‹åŒ–å®Œæˆåï¼ŒæŒ‰æç¤ºé…ç½® <code>kubectl</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube  
sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config  
sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config  
</code></pre>
<h4 data-id="heading-20">5.6 å®‰è£…ç½‘ç»œæ’ä»¶ï¼ˆFlannel ç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml  
</code></pre>
<h4 data-id="heading-21">5.7 åŠ å…¥ Worker èŠ‚ç‚¹</h4>
<p>åœ¨æ¯ä¸ª Worker ä¸Šæ‰§è¡Œ Master è¾“å‡ºçš„ <code>kubeadm join</code> å‘½ä»¤ï¼ˆå¦‚ä¸¢å¤±å¯é‡æ–°ç”Ÿæˆï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo kubeadm token create --print-join-command  
</code></pre>
<p>æ‰§è¡Œåæ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl get nodes  
kubectl get pods -A  
</code></pre>
<hr/>
<h3 data-id="heading-22">6. Docker / Kubernetes å¸¸è§è¿ç»´</h3>
<ul>
<li><strong>é•œåƒåŠ é€Ÿ</strong>ï¼šåœ¨ <code>/etc/docker/daemon.json</code> ä¸ <code>/etc/containerd/config.toml</code> ä¸­é…ç½®å›½å†…é•œåƒã€‚</li>
<li><strong>æƒé™ç®¡ç†</strong>ï¼šåˆ›å»º <code>docker</code> ç»„ï¼Œä½¿ç”¨ <code>sudo usermod -aG docker username</code>ã€‚</li>
<li><strong>æ—¥å¿—è½®è½¬</strong>ï¼šDocker è‡ªå¸¦ <code>json-file</code> æ—¥å¿—ï¼Œå¿…è¦æ—¶ç»“åˆ <code>logrotate</code>ã€‚</li>
<li><strong>èµ„æºæ§åˆ¶</strong>ï¼šåœ¨ PVE ä¸­è®¾å®š CPU/å†…å­˜é™åˆ¶ï¼ŒK8s ä¸­ä½¿ç”¨ <code>LimitRange</code>/<code>ResourceQuota</code>ã€‚</li>
<li><strong>å¤‡ä»½</strong>ï¼š</li>
<li>VMï¼šä½¿ç”¨ PVE <code>å¤‡ä»½</code> åŠŸèƒ½åˆ° NFS/Cephã€‚</li>
<li>é›†ç¾¤ï¼šä½¿ç”¨ <code>velero</code>/<code>etcdctl snapshot</code>ã€‚</li>
<li><strong>å‡çº§ç­–ç•¥</strong>ï¼š</li>
<li>PVEï¼šæ¯å­£åº¦è®¡åˆ’å‡çº§ï¼›ç¡®ä¿è®¢é˜…æºç¨³å®šã€‚</li>
<li>Dockerï¼šå…ˆæµ‹è¯•ç¯å¢ƒèŠ‚ç‚¹åç”Ÿäº§ï¼›éµå¾ª <code>docker-ce</code> LTSã€‚</li>
<li>K8sï¼šæŒ‰å°ç‰ˆæœ¬æ»šåŠ¨å‡çº§ï¼Œå…ˆæ§åˆ¶å¹³é¢å†å·¥ä½œèŠ‚ç‚¹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-23">7. å¸¸è§é—®é¢˜æ’æŸ¥</h3>



































<table><thead><tr><th>é—®é¢˜</th><th>å¯èƒ½åŸå› </th><th>è§£å†³å»ºè®®</th></tr></thead><tbody><tr><td>VM ç½‘ç»œä¸é€š</td><td>è™šæ‹Ÿäº¤æ¢æœºæœªç»‘å®šç‰©ç†å£ã€VLAN é…ç½®ç¼ºå¤±</td><td>æ ¸å¯¹ <code>vmbr</code> ç»‘å®šä¸ä¸Šè”äº¤æ¢æœº VLAN</td></tr><tr><td>å…‹éš† VM å IP å†²çª</td><td>æœªä¿®æ”¹ <code>ifcfg</code>/<code>netplan</code> MAC/IP</td><td>å…‹éš†åç«‹å³å˜æ›´ MAC æˆ–é‡å¯è·å– DHCP</td></tr><tr><td>Docker å¯åŠ¨å¤±è´¥</td><td>cgroup é©±åŠ¨ä¸åŒ¹é…</td><td>ç¡®ä¿ <code>systemd</code>ï¼Œé…ç½® <code>daemon.json</code></td></tr><tr><td>kubeadm åˆå§‹åŒ–å¤±è´¥</td><td>swap æœªå…³é—­ã€ç«¯å£è¢«å ç”¨</td><td><code>swapoff -a</code>ï¼Œæ£€æŸ¥ <code>6443</code>ã€<code>10250</code> ç­‰ç«¯å£</td></tr><tr><td>èŠ‚ç‚¹ <code>NotReady</code></td><td>ç½‘ç»œæ’ä»¶å¼‚å¸¸</td><td>é‡è£… CNIï¼Œæ£€æŸ¥ <code>kube-flannel</code> Pod æ—¥å¿—</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-24">8. æ‰¹é‡è‡ªåŠ¨åŒ–å»ºè®®</h3>
<ul>
<li><strong>Ansible</strong>ï¼šç¼–å†™ <code>playbook</code> æ‰¹é‡å®‰è£… Docker/K8sï¼Œç»´æŠ¤ <code>inventory</code>ã€‚</li>
<li><strong>Cloud-Init</strong>ï¼šä½¿ç”¨ <code>cloud-init</code> æ¨¡æ¿ï¼Œå‡å°‘å…‹éš†åæ‰‹å·¥æ­¥éª¤ã€‚</li>
<li><strong>Packer</strong>ï¼šè‡ªåŠ¨æ„å»º VM æ¨¡æ¿ï¼Œç»“åˆ PVE API æ‰¹é‡éƒ¨ç½²ã€‚</li>
<li><strong>CI/CD</strong>ï¼šå°† YAML æ¸…å•ã€Ansible Playbooks å­˜å…¥ Gitï¼Œä½¿ç”¨ GitLab CI/Argo CD è‡ªåŠ¨åŒ–ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-25">9. é™„å½•</h3>
<h4 data-id="heading-26">9.1 å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># PVE CLI åˆ›å»º VM ç¤ºä¾‹  </span>
qm create 2010 --name centos-docker-01 --memory 8192 --cores 4 --net0 virtio,bridge=vmbr0  
qm importdisk 2010 centos.qcow2 local-lvm  
qm <span class="hljs-built_in">set</span> 2010 --scsihw virtio-scsi-pci --scsi0 local-lvm:vm-2010-disk-0  
qm <span class="hljs-built_in">set</span> 2010 --boot c --bootdisk scsi0  
qm <span class="hljs-built_in">set</span> 2010 --ide2 <span class="hljs-built_in">local</span>:iso/CentOS-7-x86_64-Minimal.iso,media=cdrom  
  
<span class="hljs-comment"># PVE å…‹éš†  </span>
qm <span class="hljs-built_in">clone</span> 2001 2011 --name centos-docker-02 --full  
  
<span class="hljs-comment"># ç®¡ç† VM  </span>
qm start 2010  
qm stop 2010  
qm status 2010  
  
<span class="hljs-comment"># Docker å¸¸ç”¨  </span>
docker info  
docker ps -a  
docker system <span class="hljs-built_in">df</span>  
  
<span class="hljs-comment"># Kubernetes å¸¸ç”¨  </span>
kubectl get nodes -o wide  
kubectl get pods -A  
kubectl describe node k8s-worker-01  
</code></pre>
<h4 data-id="heading-27">9.2 ç«¯å£ä¸æœåŠ¡</h4>
<ul>
<li>PVE Webï¼š<code>8006</code></li>
<li>SSHï¼š<code>22</code></li>
<li>Docker APIï¼š<code>2375</code>ï¼ˆç¦ç”¨æˆ–é™åˆ¶ï¼‰</li>
<li>Kubernetesï¼š</li>
<li>API Serverï¼š<code>6443</code></li>
<li>kubeletï¼š<code>10250</code></li>
<li>NodePortï¼š<code>30000-32767</code></li>
</ul>
<hr/>
<h3 data-id="heading-28">10. ç»´æŠ¤ä¸å®‰å…¨å»ºè®®</h3>
<ul>
<li>å®šæœŸæ›´æ–° PVE ä¸è™šæ‹Ÿæœºç³»ç»Ÿï¼›é…ç½®ä¼ä¸šçº§é•œåƒæºã€‚</li>
<li>ä½¿ç”¨é˜²ç«å¢™ï¼ˆPVE <code>iptables</code>/<code>pf</code>ã€K8s <code>NetworkPolicy</code>ï¼‰ã€‚</li>
<li>ä¸º Docker Registry é…ç½® HTTPS ä¸é‰´æƒï¼›é¿å…é»˜è®¤ <code>latest</code> æ ‡ç­¾ã€‚</li>
<li>å¯ç”¨ PVE å¤‡ä»½ï¼ˆå¿«ç…§ + å®šæ—¶å¤‡ä»½ï¼‰ï¼Œå¹¶æµ‹è¯•æ¢å¤æµç¨‹ã€‚</li>
<li>K8s é›†ç¾¤å¯ç”¨ RBACã€å®¡è®¡æ—¥å¿—ï¼›å®šæœŸè½®æ¢è¯ä¹¦ã€‚</li>
<li>ç›‘æ§ï¼šéƒ¨ç½² <code>Prometheus + Grafana</code>ã€<code>Loki</code>ï¼Œç»“åˆ PVE è‡ªå¸¦ç›‘æ§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-29">11. PVE Web å‰ç«¯æ“ä½œæ‰‹å†Œï¼ˆåˆå­¦è€…ç‰ˆï¼‰</h3>
<blockquote>
<p>ã€ŠåŸºäº PVE8.1 å¿«é€Ÿæ­å»º K8s é›†ç¾¤ã€‹</p>
</blockquote>
<h4 data-id="heading-30">11.1 ç™»å½•ä¸ç•Œé¢è®¤è¯†</h4>
<ol>
<li>æµè§ˆå™¨è®¿é—® <code>https://&lt;PVEä¸»æœºIP&gt;:8006</code>ï¼Œé€‰æ‹©ç™»å½•åŸŸ <code>Linux PAM standard authentication</code>ï¼Œä½¿ç”¨ <code>root@pam</code> æˆ–æˆæƒè´¦æˆ·ç™»å½•ã€‚</li>
<li>å·¦ä¾§ <code>æ•°æ®ä¸­å¿ƒ</code> æ ‘å±•ç¤ºæ‰€æœ‰èŠ‚ç‚¹ä¸è™šæ‹Ÿèµ„æºï¼›å³ä¾§ä¸ºè¯¦ç»†é¢æ¿ã€‚</li>
<li>é¡¶éƒ¨çŠ¶æ€æ ï¼š</li>
</ol>
<ul>
<li><code>æœç´¢</code>ï¼šå¿«é€Ÿå®šä½ VM / å­˜å‚¨ã€‚</li>
<li><code>Shell</code>ï¼šæ‰“å¼€èŠ‚ç‚¹ CLIã€‚</li>
<li><code>å¸®åŠ©</code>ï¼šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</li>
</ul>
<ol start="4">
<li>å¸¸ç”¨é¢æ¿ï¼š</li>
</ol>
<ul>
<li><code>æ¦‚è§ˆ</code>ï¼šèµ„æºä½¿ç”¨ã€è®¢é˜…çŠ¶æ€ã€‚</li>
<li><code>ä»»åŠ¡å†å²</code>ï¼šå®æ—¶æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼ˆåˆ›å»º VMã€å¤‡ä»½ç­‰ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-31">11.2 Web å‰ç«¯åŸºç¡€é…ç½®</h4>
<ul>
<li><strong>è®¢é˜…æºåˆ‡æ¢</strong>ï¼šåœ¨ <code>èŠ‚ç‚¹ â†’ Shell</code> æ‰§è¡Œæœ¬æ–‡ç¬¬ 2.1 èŠ‚å‘½ä»¤ï¼Œæˆ–åœ¨ <code>Shell</code> é¢æ¿ç›´æ¥ç²˜è´´ã€‚</li>
<li><strong>æ—¶åŒºä¸æ—¶é—´</strong>ï¼š<code>èŠ‚ç‚¹ â†’ ç³»ç»Ÿ â†’ æ—¶é—´</code>ï¼ŒåŒæ­¥ NTP æœåŠ¡å™¨ï¼ˆå¦‚ <code>ntp.aliyun.com</code>ï¼‰ã€‚</li>
<li><strong>ç½‘ç»œæ¡¥é…ç½®</strong>ï¼š</li>
</ul>
<ol>
<li><code>èŠ‚ç‚¹ â†’ ç³»ç»Ÿ â†’ ç½‘ç»œ â†’ åˆ›å»º â†’ Linux Bridge</code>ã€‚</li>
<li>è®¾ç½®åç§°ï¼ˆä¾‹ï¼š<code>vmbr1</code>ï¼‰ã€ç»‘å®šç‰©ç†ç½‘å¡ã€æ˜¯å¦é…ç½® VLANã€‚</li>
<li>ç‚¹å‡» <code>åº”ç”¨é…ç½®</code>ï¼Œç³»ç»Ÿæç¤ºé‡å¯ç½‘ç»œï¼Œç¡®è®¤å³å¯ã€‚</li>
</ol>
<h4 data-id="heading-32">11.3 ISO / å®¹å™¨æ¨¡æ¿ç®¡ç†</h4>
<ol>
<li>é€‰ä¸­ <code>æ•°æ®ä¸­å¿ƒ â†’ å­˜å‚¨ â†’ local</code>ã€‚</li>
<li>åˆ‡æ¢åˆ° <code>å†…å®¹</code> æ ‡ç­¾ï¼š</li>
</ol>
<ul>
<li><code>ä¸Šä¼ </code>ï¼šé€‰æ‹© CentOS / Ubuntu ISOã€‚</li>
<li><code>æ¨¡æ¿</code>ï¼šå¯ä¸‹è½½å®˜æ–¹ LXC æ¨¡æ¿ï¼Œå¦‚ <code>centos-7-default_20240625_amd64.tar.xz</code>ã€‚</li>
</ul>
<ol start="3">
<li>ä¸Šä¼ è¿›åº¦å¯åœ¨å³ä¸Šè§’ä»»åŠ¡æ æŸ¥çœ‹ï¼Œå¦‚å¤±è´¥å¯ç‚¹è¿›æ—¥å¿—æ’é”™ã€‚</li>
</ol>
<h4 data-id="heading-33">11.4 åˆ›å»º KVM è™šæ‹Ÿæœºï¼ˆä»¥ CentOS ä¸ºä¾‹ï¼‰</h4>
<ol>
<li>é€‰ä¸­ç›®æ ‡èŠ‚ç‚¹ â†’ ç‚¹å‡»å³ä¸Š <code>åˆ›å»ºè™šæ‹Ÿæœº</code>ã€‚</li>
<li><strong>å¸¸è§„</strong>ï¼šå¡«å†™ VM IDã€åç§°ï¼ˆä¾‹ï¼š<code>centos-docker-01</code>ï¼‰ï¼Œå¯é€‰å¤‡æ³¨ã€‚</li>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šé€‰æ‹©å·²ä¸Šä¼ çš„ ISOï¼›<code>Guest OS</code> é€‰ <code>Linux</code>ã€‚</li>
<li><strong>ç³»ç»Ÿ</strong>ï¼šBIOS é€‰ <code>OVMF (UEFI)</code> æˆ–é»˜è®¤ <code>SeaBIOS</code>ï¼›å‹¾é€‰ <code>Qemu Agent</code>ã€‚</li>
<li><strong>ç£ç›˜</strong>ï¼š<code>æ€»çº¿/è®¾å¤‡</code> å»ºè®® <code>SCSI</code>ï¼Œå­˜å‚¨é€‰ <code>local-lvm</code>ï¼Œå‹¾é€‰ <code>ç²¾ç®€</code> èŠ‚çœç©ºé—´ã€‚</li>
<li><strong>CPU</strong>ï¼šç±»å‹é€‰ <code>host</code>ï¼Œåˆ†é…æ ¸å¿ƒæ•°ï¼ˆä¾‹ï¼š2ï¼‰ã€‚</li>
<li><strong>å†…å­˜</strong>ï¼šè®¾ç½®åŠ¨æ€å†…å­˜ï¼ˆä¾‹ï¼šæœ€å° 2â€¯GBï¼Œæœ€å¤§ 4â€¯GBï¼‰ï¼Œä¹Ÿå¯å…³é—­æ°”çƒå†…å­˜å›ºå®šå€¼ã€‚</li>
<li><strong>ç½‘ç»œ</strong>ï¼šæ¨¡å‹é€‰ <code>VirtIO (paravirtualized)</code>ï¼Œæ¡¥æ¥ <code>vmbr0</code>ã€‚</li>
<li><strong>ç¡®è®¤</strong>ï¼šæ£€æŸ¥é…ç½®åç‚¹å‡» <code>å®Œæˆ</code>ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</li>
<li>åœ¨ VM é¡µé¢ç‚¹å‡» <code>æ§åˆ¶å°</code>ï¼Œé€‰æ‹© <code>noVNC</code> æˆ– <code>SPICE</code> è¿›å…¥å®‰è£…ç•Œé¢ã€‚</li>
</ol>
<h4 data-id="heading-34">11.5 åˆ›å»º LXC å®¹å™¨ï¼ˆå¯ç”¨äºè½»é‡ Docker èŠ‚ç‚¹ï¼‰</h4>
<ol>
<li>é€‰ä¸­èŠ‚ç‚¹ â†’ <code>åˆ›å»º LXC</code>ã€‚</li>
<li>å¡«å†™å®¹å™¨ IDã€ä¸»æœºåï¼Œå‹¾é€‰ <code>æ— å¯†ç </code> å¹¶ä¸Šä¼  SSH å…¬é’¥æˆ–è®¾ç½®å¯†ç ã€‚</li>
<li>é€‰æ‹©æ¨¡æ¿ï¼ˆä¾‹ï¼š<code>ubuntu-22.04-standard_20240715_amd64.tar.zst</code>ï¼‰ã€‚</li>
<li>é…ç½®æ ¹ç£ç›˜å¤§å°ï¼ˆä¾‹ï¼š20â€¯GBï¼‰ã€CPU/å†…å­˜é™åˆ¶ã€‚</li>
<li>ç½‘ç»œè®¾ç½®ï¼šæ¡¥æ¥åˆ° <code>vmbr0</code>ï¼ŒæŒ‡æ´¾ IPv4ï¼ˆDHCP/é™æ€ï¼‰ã€‚</li>
<li>ç¡®è®¤åˆ›å»ºåï¼Œå³å¯åœ¨å®¹å™¨å†…ä½¿ç”¨ Dockerï¼ˆäºŒè¿›åˆ¶å®‰è£…æˆ– apt/yumï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-35">11.6 è™šæ‹Ÿæœºå‰ç«¯å¸¸è§„æ“ä½œ</h4>
<ul>
<li><strong>å¯åŠ¨/å…³é—­/é‡å¯</strong>ï¼šé€‰ä¸­ VM â†’ <code>æ‘˜è¦</code> é¡µé¢å·¦ä¸Šæ“ä½œæŒ‰é’®ã€‚</li>
<li><strong>å¿«ç…§</strong>ï¼š</li>
</ul>
<ol>
<li><code>å¿«ç…§</code> æ ‡ç­¾ â†’ <code>æ‹æ‘„</code>ï¼Œå¡«å†™æè¿°ã€‚</li>
<li>å¯é€‰æ‹© <code>åŒ…å«å†…å­˜</code>ï¼ˆç”¨äºçƒ­å¤‡ä»½ï¼‰ï¼Œå®¹é‡å¤§æ—¶è°¨æ…ä½¿ç”¨ã€‚</li>
<li><code>è¿˜åŸ</code> ä¼šæ¢å¤åˆ°å¿«ç…§çŠ¶æ€ï¼Œæ³¨æ„å¯èƒ½å¯¼è‡´æœªå†™å…¥æ•°æ®ä¸¢å¤±ã€‚</li>
</ol>
<ul>
<li><strong>å…‹éš†</strong>ï¼š</li>
</ul>
<ol>
<li>é€‰ä¸­æ¨¡æ¿æˆ–ç°æœ‰ VM â†’ <code>æ›´å¤š</code> â†’ <code>å…‹éš†</code>ã€‚</li>
<li>é€‰æ‹© <code>å®Œæ•´å…‹éš†</code>ï¼ˆç‹¬ç«‹ç£ç›˜ï¼‰æˆ– <code>é“¾æ¥å…‹éš†</code>ï¼ˆå…±äº«åŸºç¡€é•œåƒï¼‰ã€‚</li>
<li>åˆ›å»ºåè®°å¾—ä¿®æ”¹ç½‘å¡ MAC æˆ–æ“ä½œç³»ç»Ÿå†…éƒ¨ IPã€‚</li>
</ol>
<ul>
<li><strong>è¿ç§»</strong>ï¼šåœ¨å¤šèŠ‚ç‚¹ç¯å¢ƒå¯é€šè¿‡ <code>è¿ç§»</code> æŒ‰é’®åœ¨çº¿è¿ç§» VM è‡³å…¶ä»–èŠ‚ç‚¹ã€‚</li>
</ul>
<h4 data-id="heading-36">11.7 Docker / K8s èŠ‚ç‚¹çš„ GUI è¾…åŠ©æ“ä½œ</h4>
<ul>
<li><strong>ä¸Šä¼  SSH å¯†é’¥</strong>ï¼š<code>æ•°æ®ä¸­å¿ƒ â†’ æƒé™ â†’ SSH å¯†é’¥</code>ï¼Œæ–¹ä¾¿åœ¨ Web Console å†…ä¸€é”®ç™»å½•ã€‚</li>
<li><strong>èµ„æºç›‘æ§</strong>ï¼š<code>èŠ‚ç‚¹ â†’ æ‘˜è¦</code>ã€<code>VM â†’ ç›‘æ§</code> å¯æŸ¥çœ‹å®æ—¶ CPU/å†…å­˜/ç£ç›˜/ç½‘ç»œæ›²çº¿ã€‚</li>
<li><strong>å¤‡ä»½ä¸è¿˜åŸ</strong>ï¼š</li>
</ul>
<ol>
<li><code>æ•°æ®ä¸­å¿ƒ â†’ å¤‡ä»½</code> åˆ›å»ºå¤‡ä»½ä»»åŠ¡ï¼Œé€‰æ‹©å­˜å‚¨ï¼ˆå¦‚ NFSï¼‰ã€‚</li>
<li>æ”¯æŒ <code>åœæ­¢æ¨¡å¼</code>ï¼ˆå…³æœºå¿«ç…§ï¼‰æˆ– <code>å¿«ç…§æ¨¡å¼</code>ï¼ˆéœ€å¯ç”¨ Qemu Agentï¼‰ã€‚</li>
<li>æ¢å¤æ—¶åœ¨ç›®æ ‡èŠ‚ç‚¹ <code>æ›´å¤š â†’ æ¢å¤</code> é€‰æ‹©å¤‡ä»½æ–‡ä»¶ã€‚</li>
</ol>
<ul>
<li><strong>è°ƒåº¦ä»»åŠ¡</strong>ï¼š<code>æ•°æ®ä¸­å¿ƒ â†’ ä»»åŠ¡è®¡åˆ’</code>ï¼Œå¯è®¾å®šå®šæ—¶å¤‡ä»½ã€å¿«ç…§ã€æ›´æ–°ç­‰æ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-37">11.8 å¸¸è§å‰ç«¯æ“ä½œé—®é¢˜</h4>

























<table><thead><tr><th>ç—‡çŠ¶</th><th>å¤„ç†å»ºè®®</th></tr></thead><tbody><tr><td>Web æ— æ³•è®¿é—®</td><td>æ£€æŸ¥æµè§ˆå™¨è¯ä¹¦ã€å®¿ä¸»é˜²ç«å¢™ï¼Œå¿…è¦æ—¶é‡å¯ <code>pveproxy</code>ï¼š<code>systemctl restart pveproxy</code></td></tr><tr><td>ä¸Šä¼  ISO å¤±è´¥</td><td>ç¡®è®¤å­˜å‚¨å‰©ä½™ç©ºé—´ã€ç½‘ç»œç¨³å®šï¼ŒæŸ¥çœ‹ä»»åŠ¡æ—¥å¿—ï¼ˆå³ä¸Šè§’ï¼‰</td></tr><tr><td>æ§åˆ¶å°é»‘å±</td><td>åˆ‡æ¢ <code>noVNC/SPICE</code>ï¼Œæˆ–åœ¨ VM <code>é€‰é¡¹</code> ä¸­å¯ç”¨ <code>æ˜¾å¡</code>ã€ç¡®è®¤ OS å®‰è£…å®Œæˆ</td></tr><tr><td>å…‹éš†åç½‘ç»œå¼‚å¸¸</td><td>åœ¨ OS å†…é‡ç½® <code>udev</code> ç½‘å¡è§„åˆ™ã€é‡æ–°é…ç½® IPï¼Œæˆ–åˆ é™¤æ—§çš„ <code>ifcfg</code> æ–‡ä»¶</td></tr></tbody></table>
<hr/>
<blockquote>
<p>æ–‡æ¡£å»ºè®®ç»“åˆä¼ä¸šå†…éƒ¨ IPã€è´¦å·ã€å­˜å‚¨ã€ç½‘ç»œå®é™…æƒ…å†µè¿›è¡ŒäºŒæ¬¡è°ƒæ•´ï¼Œå¹¶ä¸å˜æ›´ç®¡ç†æµç¨‹åŒæ­¥ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[el-inputæ•°å­—ç±»å‹ç¦æ­¢+-ç¬¦å·è¾“å…¥]]></title>    <link>https://juejin.cn/post/7571646669201342506</link>    <guid>https://juejin.cn/post/7571646669201342506</guid>    <pubDate>2025-11-12T09:33:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571646669201342506" data-draft-id="7571648135584612395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="el-inputæ•°å­—ç±»å‹ç¦æ­¢+-ç¬¦å·è¾“å…¥"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-11-12T09:33:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lyuing"/> <meta itemprop="url" content="https://juejin.cn/user/3404535031412190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            el-inputæ•°å­—ç±»å‹ç¦æ­¢+-ç¬¦å·è¾“å…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3404535031412190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lyuing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:33:09.000Z" title="Wed Nov 12 2025 09:33:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½¿ç”¨ <code>el-input</code> çš„æ•°å­—ç±»å‹è¾“å…¥æ—¶ï¼Œä¼šé»˜è®¤å¼€æ”¾<code>-</code>ï¼Œ<code>+</code>ï¼Œ<code>e</code>ç¬¦å·è¾“å…¥ï¼Œä¸”æ— æ³•é€šè¿‡<code>onInput</code>è¿›è¡Œæ‹¦æˆªã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"input"</span>
    <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
    <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span>
    @<span class="hljs-attr">input</span>=<span class="hljs-string">"onInput"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onInput</span> (value) {
    <span class="hljs-keyword">const</span> val = value.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^\d/.]/g</span>, <span class="hljs-string">''</span>);
    input.<span class="hljs-property">value</span> = val
}
</code></pre>
<p>ä»¥ä¸Šæ–¹æ³•æ— æ³•æ­£ç¡®å“åº”ï¼ŒåŸå› æœ‰äºŒï¼š</p>
<ol>
<li><code>number</code>ç±»å‹å°† <code>-</code>ï¼Œ<code>+</code>ï¼Œ<code>e</code> è¯†åˆ«ä¸ºæ•°å­—ç¬¦å·ï¼Œä¸åšé™åˆ¶ï¼Œä¸”ç¬¦å·çš„è¾“å…¥ä¸ä¼šç²¾ç¡®è§¦å‘<code>input</code>å“åº”ï¼›</li>
<li>é¦–æ¬¡æ¥æ”¶åˆ° <code>-</code>ï¼Œ<code>+</code>ï¼Œ<code>e</code> è¾“å…¥åï¼Œè¿”å›å‰”é™¤æ‰çš„æ–‡æœ¬å›æ˜¾ï¼Œæ— æ³•æ­£ç¡®æ˜¾ç¤ºï¼ŒåŸç”Ÿ<code>input</code>ä¼šå†…éƒ¨è½¬ä¹‰ï¼Œå¯¼è‡´æ— æ³•å³æ˜¾ã€‚</li>
</ol>
<h3 data-id="heading-0">æ–¹æ¡ˆ</h3>
<p>å¯ç›‘å¬åŸç”Ÿ<code>input</code>æ–¹æ³•ï¼Œå³å¯è§„é¿é—®é¢˜1ï¼›å›æ˜¾èµ‹å€¼æ—¶ï¼ŒåŒæ—¶æ›´æ”¹åŸç”Ÿ<code>input</code>çš„<code>value</code>å€¼ï¼Œå³å¯ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹æ¡ˆä¾èµ–<code>Event</code>ä¸­çš„å±æ€§<code>data</code>ï¼Œå¯¹äºå…¼å®¹æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œéœ€è°¨æ…å¤„ç†ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"input"</span>
    <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
    <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span>
    @<span class="hljs-attr">input.native</span>=<span class="hljs-string">"onInput"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onInput</span> (e) {
    <span class="hljs-keyword">const</span> target = e.<span class="hljs-property">target</span>;
    <span class="hljs-keyword">const</span> value = target.<span class="hljs-property">value</span>;
  
    <span class="hljs-keyword">if</span>( [ <span class="hljs-string">'-'</span>, <span class="hljs-string">'+'</span>, <span class="hljs-string">'e'</span> ].<span class="hljs-title function_">includes</span>(e.<span class="hljs-property">data</span>) ) {
        target.<span class="hljs-property">value</span> = offset.<span class="hljs-property">value</span>[key] + <span class="hljs-string">''</span>;
    }
    <span class="hljs-keyword">const</span> val = value.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^\d/.]/g</span>, <span class="hljs-string">''</span>);
    input.<span class="hljs-property">value</span> = val
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[65 å²å›¾çµå·¨å¤´ç¦»èŒåˆ›ä¸šï¼LeCun æ„¤ç„¶ä¸å°æ‰å†³è£‚ï¼ŒMeta å·¨éœ‡]]></title>    <link>https://juejin.cn/post/7571594817223770163</link>    <guid>https://juejin.cn/post/7571594817223770163</guid>    <pubDate>2025-11-12T09:02:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817223770163" data-draft-id="7571594817223737395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="65 å²å›¾çµå·¨å¤´ç¦»èŒåˆ›ä¸šï¼LeCun æ„¤ç„¶ä¸å°æ‰å†³è£‚ï¼ŒMeta å·¨éœ‡"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-12T09:02:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            65 å²å›¾çµå·¨å¤´ç¦»èŒåˆ›ä¸šï¼LeCun æ„¤ç„¶ä¸å°æ‰å†³è£‚ï¼ŒMeta å·¨éœ‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:02:50.000Z" title="Wed Nov 12 2025 09:02:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9ae6cff7ea4eb5baa4b93ff37b83fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=s3BynxVHpG%2F5ceTuYvBScvpYM8A%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘AI åœˆçˆ†å‡ºå¤§ç“œï¼65 å²å›¾çµå·¨å¤´ LeCun å³å°†ç¦»èŒ Metaï¼Œä¸å°æ‰æ­£å¼å†³è£‚ã€‚æ¥ä¸‹æ¥ï¼Œä»–å°†æŠ•èº«ã€Œä¸–ç•Œæ¨¡å‹ã€å¼€å¯åˆ›ä¸šä¸‹åŠåœºã€‚ã€</strong></h5>
<p>å›¾çµå·¨å¤´ LeCun çœŸçš„è¦è·‘è·¯äº†ï¼</p>
<p>åˆšåˆšï¼ŒFT ç‹¬å®¶çˆ†æ–™ï¼Œç°ä»» Meta é¦–å¸­ AI ç§‘å­¦å®¶ LeCunï¼Œå†³å®šå°†åœ¨æœªæ¥å‡ ä¸ªæœˆç¦»èŒã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼Œå¼€å¯äººç”Ÿåˆ›ä¸šçš„ç¬¬äºŒé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b2274f99f924da5b73126ec4954af80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=De8KAQa025nPs6aL1IzIbZDt02s%3D" alt="" loading="lazy"/></p>
<p>æ¶ˆæ¯ä¸€å‡ºï¼Œç¬é—´å¼•çˆ†å…¨ç½‘ã€‚æ­¤å‰ï¼ŒåŠé—´ä¼ é—»ç§°ï¼ŒLeCun å› ä¸æ»¡å†…éƒ¨æ¶æ„è°ƒæ•´æƒ³è¦ç¦»èŒã€‚</p>
<p>å¦‚ä»Šï¼Œ65 å²çš„å›¾çµå·¨å¤´ï¼Œç»ˆäºåšå‡ºäº†è¿™ä¸ªå†³å®šã€‚</p>
<p>æ‰©å±•é˜…è¯»ï¼š</p>
<p><em><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MTA0MTk1MA%3D%3D%26mid%3D2652631905%26idx%3D1%26sn%3Db94ad542794dda5eed5b06d61232d0ba%26token%3D958537801%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MTA0MTk1MA==&amp;mid=2652631905&amp;idx=1&amp;sn=b94ad542794dda5eed5b06d61232d0ba&amp;token=958537801&amp;lang=zh_CN&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">LeCun è€ƒè™‘è¾èŒï¼Meta AI ç™¾äº¿è±ªèµŒå¼•çˆ†ã€Œå†…æˆ˜ã€ï¼Œé€¼èµ°é¦–å¸­ç§‘å­¦å®¶</a></em></p>
<p><em><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MTA0MTk1MA%3D%3D%26mid%3D2652638822%26idx%3D1%26sn%3D6a8fe70b408c774eb0c8ce4d1bc04f88%26token%3D958537801%26lang%3Dzh_CN%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MTA0MTk1MA==&amp;mid=2652638822&amp;idx=1&amp;sn=6a8fe70b408c774eb0c8ce4d1bc04f88&amp;token=958537801&amp;lang=zh_CN&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">LeCun æ€’æ­æœºå™¨äººæœ€å¤§éª—å±€ï¼Œå¦ç™½ Llama ä¸æˆ‘æ— ç“œï¼</a></em></p>
<p>æ®ç§°ï¼ŒLeCun å°†è¦æˆç«‹çš„æ–°å…¬å¸ä¸»è¦æ¨è¿›ã€Œä¸–ç•Œæ¨¡å‹ã€ï¼Œç›®æ ‡ç›´æŒ‡çœŸæ­£çš„äººç±»çº§æ™ºèƒ½ã€‚</p>
<p>ç›®å‰ï¼Œä»–æ­£åœ¨è¿›è¡Œæ—©æœŸçš„èèµ„æ´½è°ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50c8fd9db6d848f8b507499cfbb8dda4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=9cfDWznPGCj1f3dCMZUwza3fqfM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/220f3c8a478c4f69bffafed4d0299572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=U0z65tLMdaO6qoM8dpovzBfmQjc%3D" alt="" loading="lazy"/></p>
<p>ç½‘å‹ç›²çŒœï¼ŒLeCun ç¦»èŒå¯èƒ½å’Œä¼šè§å´æ©è¾¾æœ‰æ‰€å…³è”</p>
<p>ä»»èŒ 12 å¹´ï¼Œä»åˆ›åŠ FAIR å®éªŒå®¤ï¼Œåˆ°æ‹¿ä¸‹å›¾çµå¥–ï¼Œå†åˆ°ç¬ƒå®šçš„ä¸–ç•Œæ¨¡å‹ï¼ŒLeCun å‡ºèµ°å¯¹äº Meta æ¥è¯´ï¼Œæ˜¯ä¸€æ¬¡å·¨éœ‡ã€‚</p>
<p>æˆ–è®¸ï¼Œå°æ‰çš„è¶…çº§æ™ºèƒ½æ¢¦ï¼ŒçœŸçš„è¦ç¢äº†ã€‚</p>
<p>æœ‰ç½‘å‹è¡¨ç¤ºï¼Œè¿™å¹¶ä¸æ„å¤–ã€‚å¦æœ‰äººè°ƒä¾ƒé“ï¼Œã€Œè¦å§‹ç»ˆå‘ä¸€ä¸ªå­©å­æ±‡æŠ¥å·¥ä½œï¼ŒLeCun çš„è‡ªå°Šå¿ƒæ€ä¹ˆä¸ä¼šå—åˆ°ä¼¤å®³å‘¢ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/061772d29496462183455d014bd59b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=fbMvAWoXuTmzNInaMVnq5YHbv2o%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06214cd349cb47d4bc9cd46f8aa57090~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=prgmYHDqpNQocppaMX%2BZaxDJv5s%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45604033ebf34166895159edd1e4fc14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=IC%2FoiwC1sVYHgy5muxY1iEkzVyE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/801f3b6093e24518af72d607bd68e681~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=Q7jacF%2BhSsHi2ScFCjN%2Fhs2r1pA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e45a5544f5c4ba883f72a279eee229a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=m550ebaKMQHbVzY7y0PDvHN7rrY%3D" alt="" loading="lazy"/></p>
<p>ä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/631e86199f97483487e9603121ffbfe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=T5wgpjILTFOiihsgWC1Ruqf8EjM%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œæ•ˆåŠ› 12 å¹´å†³è£‚ï¼ŒLeCun æ„¤ç„¶ç¦»èŒã€</strong></p>
<p>ä¸å¾—ä¸è¯´ï¼Œè¿™äº‹å„¿æ¥çš„å¤ªçªç„¶ï¼Œä½†å´æ—©æœ‰è‹—å¤´ã€‚</p>
<p>å½“å‰ï¼Œæ­£å€¼ Meta å¯¹å…¬å¸ AI ä¸šåŠ¡è¿›è¡Œå¤§åˆ€é˜”æ–§çš„æ”¹é©ä¹‹é™…ï¼Œå¸Œæœ›å¼€å‘å‡ºæ›´å¼ºå¤§çš„ AIï¼ŒæŒ‘æˆ˜ OpenAIã€è°·æ­Œç­‰ç«äº‰å¯¹æ‰‹ã€‚</p>
<p>ä»Šå¹´åˆï¼ŒLlama 4 å‘å¸ƒç¿»è½¦ï¼Œä¸”æ€§èƒ½è¿œä¸åŠ ChatGPTã€Gemini ç­‰æ¨¡å‹ã€‚è€Œä¸”ï¼ŒMeta AI èŠå¤©æœºå™¨äººæ¨å‡ºåï¼Œè®¸å¤šäººå¹¶ä¸ä¹°è´¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2343f0fbcbab45029676122853e3eff7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=IY5DTDzvyWIiBmRRz5i94G7XzQQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨è®¤å®š Meta åœ¨ç«äº‰ä¸­è½åä¹‹åï¼Œå°æ‰çš„æˆ˜ç•¥é‡å¿ƒä¹Ÿéšä¹‹æ”¹å˜â€”â€”</p>
<p>ä» LeCun é¢†å†›çš„ FAIR å®éªŒå®¤ï¼Œè½¬å‘æ›´å¿«æ¨å‡ºæ¨¡å‹å’Œ AI äº§å“ã€‚</p>
<p>å…ˆæ˜¯ä»Šå¹´ 4 æœˆï¼Œå°æ‰æ–¥èµ„ 143 äº¿ç¾å…ƒè˜è¯·äº† 28 å² Alexandr Wangï¼Œå»é¢†å¯¼å…¨æ–°ã€Œè¶…çº§æ™ºèƒ½ã€å›¢é˜Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe08b7b00c85446cb075c9a9e37e422f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=YRzo2z9ZLMIm%2FgZpV72n2YuGYVY%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä»–äº²è‡ªç»„å»º TBD Labï¼Œå¼€å‡ºé«˜è¾¾ 1 äº¿ç¾å…ƒçš„è–ªé…¬åŒ…ï¼Œä»è°·æ­Œã€OpenAI æŠ¢äººã€‚</p>
<p>å…¶ä¸­åŒ…æ‹¬ï¼ŒChatGPT çš„æ ¸å¿ƒç ”ç©¶å‘˜ Shengjia Zhaoï¼Œè¢«æŒ–æ¥å‡ºä»» MSL é¦–å¸­ç§‘å­¦å®¶ã€‚</p>
<p>ç›®æ ‡å¾ˆç®€å•ï¼Œæ¨åŠ¨å…¶ä¸‹ä¸€ä»£å¤§è¯­è¨€æ¨¡å‹çš„å¼€å‘ã€‚</p>
<p>ä»…åœ¨ä»Šå¹´ï¼ŒMeta å†…éƒ¨å°±è¿›è¡Œäº†è¶… 4 æ¬¡æ¶æ„è°ƒæ•´å’Œä¼˜åŒ–ï¼Œå¹¶å°† MSL åˆ†ç«‹å‡ºå››å¤§éƒ¨é—¨ï¼Œå…¨éƒ¨ç”± Alexandr Wang æŒèˆµï¼š</p>
<ol>
<li>TBD Lab ï¼ˆTo Be Determinedï¼Œå¾…ç¡®å®šï¼Œè´Ÿè´£æ¢ç´¢ / å…ˆå¯¼ç ”ç©¶ï¼‰</li>
<li>FAIR ï¼ˆFundamental AI Researchï¼Œé•¿æœŸå‰æ²¿ç ”ç©¶ï¼‰</li>
<li>äº§å“å’Œåº”ç”¨å›¢é˜Ÿ ï¼ˆå« Meta AI åŠ©æ‰‹ç­‰ï¼‰</li>
<li>åŸºç¡€è®¾æ–½ ï¼ˆè®­ç»ƒä¸æ¨ç†çš„ç®—åŠ›ã€æ•°æ®ä¸å¹³å°ï¼‰</li>
</ol>
<p>å› æ­¤ï¼Œæ­¤å‰å‘é¦–å¸­äº§å“å®˜ Chris Cox æ±‡æŠ¥çš„ LeCunï¼Œç°åœ¨è½¬è€Œå‘ Wang æ±‡æŠ¥ã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒLeCun é•¿æœŸé¢†å¯¼çš„ FAIR ä¹Ÿé€æ¸è¢«è¾¹ç¼˜åŒ–ï¼Œå‘æ¯”ä»–å° 30 å¤šå²çš„ Wang æ±‡æŠ¥ï¼ŒåŒ…æ‹¬è®ºæ–‡ï¼Œä¹Ÿéœ€å¾—åˆ°å®¡æ‰¹åæ‰å¯å‘è¡¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5257e88895074c8aac88d463116e4de5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=Kq36WpX%2B1cnOIzblpulg%2BeAEmpA%3D" alt="" loading="lazy"/></p>
<p>å¦ä¸€æ–¹é¢ï¼ŒLeCun è®¤ä¸ºå°æ‰ç½®äºå…¶æˆ˜ç•¥æ ¸å¿ƒçš„ LLM è™½ç„¶ã€Œæœ‰ç”¨ã€ï¼Œä½†æ°¸è¿œæ— æ³•åƒäººç±»ä¸€æ ·è¿›è¡Œæ¨ç†å’Œè§„åˆ’ã€‚</p>
<p>åœ¨ FAIR å†…éƒ¨ï¼ŒLeCun ä¹Ÿä¸€ç›´ä¸“æ³¨äºå¼€å‘ã€Œä¸–ç•Œæ¨¡å‹ã€ï¼Œä½†åœ¨çŸ­æœŸå†…ï¼Œæ˜¯çœ‹ä¸åˆ° KPI çš„ã€‚</p>
<p>è€Œå°æ‰ç°åœ¨è¦çš„æ˜¯ï¼Œç«‹å³å°±èƒ½å˜ç°çš„ AI äº§å“ã€‚</p>
<p>çœ‹å¾—å‡ºï¼ŒLeCun æ‰€åšæŒçš„è·¯çº¿å’Œä¸ªäººè§‚ç‚¹ï¼Œä¸ Meta çš„ AI æ„¿æ™¯å‡ºç°äº†æ˜æ˜¾çš„åˆ†æ­§ã€‚</p>
<p>ç§ç§å› ç´ çš„å åŠ ï¼Œæ—©å·²æˆä¸º LeCun ç¦»èŒçš„å¯¼ç«ç´¢ã€‚è€Œç°åœ¨ï¼Œå°±æ˜¯æœ€å¥½çš„æ—¶æœºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2611de3112fb4d06bedc5d4c7c26c63a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=uwcDi3Tj9KP6v9tly0gPAGt2qQQ%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå…¨åŠ›æŠ¼æ³¨ã€Œä¸–ç•Œæ¨¡å‹ã€ã€</strong></p>
<p>åº†å¹¸çš„æ˜¯ï¼ŒLeCun ç»ˆäºå¯ä»¥åœ¨ã€Œä¸–ç•Œæ¨¡å‹ã€ä¸Šå¤§å±•èº«æ‰‹äº†ã€‚</p>
<p>ä¸€ç›´ä»¥æ¥ï¼Œä»–åšä¿¡å¤§æ¨¡å‹æœ€ç»ˆæ²¡æœ‰å‡ºè·¯ï¼Œæ°¸è¿œå­¦ä¸ä¼šçœŸæ­£çš„æ¨ç†å’Œè§„åˆ’ï¼Œä¹Ÿæ ¹æœ¬æ— æ³•é€šå¾€ AGIã€‚</p>
<p>LLM ä¸å¦‚é˜¿çŒ«é˜¿ç‹—ï¼ŒLeCun å·²åœ¨å¤šç§å…¬å¼€åœºåˆä¸­å¤šæ¬¡æå‡ºã€‚</p>
<p>åœ¨ä»–çœ‹æ¥ï¼ŒAI çš„ç»ˆå±€å°±æ˜¯ã€Œä¸–ç•Œæ¨¡å‹ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0835db6cedf482b872ea25b532faf55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=N%2BPLO1RJJw7QP8uCWFF1AaMlQWo%3D" alt="" loading="lazy"/></p>
<p>å‰æ®µæ—¶é—´ï¼Œä»–åœ¨ MIT è®¿è°ˆä¸­ç›´è¨€ï¼Œæœªæ¥ 3-5 å¹´å†…ï¼Œã€Œä¸–ç•Œæ¨¡å‹ã€ä¼šæˆä¸º AI æ¶æ„çš„ä¸»æµæ¨¡å‹ã€‚</p>
<p>è¿™è¯å¯è®©æˆ‘åœ¨ç¡…è°·å¾—ç½ªäº†ä¸å°‘äººï¼ŒåŒ…æ‹¬æŸäº›å·¨å¤´å…¬å¸ã€‚</p>
<p>åˆ°é‚£æ—¶å€™ï¼Œä½†å‡¡å¤´è„‘æ¸…é†’çš„äººï¼Œéƒ½ä¸ä¼šå†ç”¨ç°åœ¨è¿™ç§ç”Ÿæˆå¼ LLM çš„è·¯å­äº†ã€‚</p>
<p>ä¸–ç•Œæ¨¡å‹ä¸ä»…ä»…å­¦ä¹ è¯­è¨€ï¼Œè¿˜é€šè¿‡è§†é¢‘å’Œç©ºé—´æ•°æ®ï¼Œæ¥ç†è§£ç‰©ç†ä¸–ç•Œã€‚</p>
<p>ç›´ç™½è®²ï¼Œå®ƒè®© AI å¯ä»¥åƒå©´å„¿ä¸€æ ·ï¼Œä»è§‚å¯Ÿä¸­å­¦ä¹ ä¸–ç•Œçš„è§„å¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc60ec60302426d83aaea37e3990c1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=iIGgUYsLmNTe5kUbRhywkp4ZSWI%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ï¼ŒLeCun è¡¨ç¤ºï¼Œå¼€å‘å‡ºè¿™ä¸ªæ¶æ„éœ€è¦åå¹´çš„æ—¶é—´æ‰èƒ½æˆç†Ÿã€‚</p>
<p>å³ä¾¿æ—¶é—´æ¼«é•¿ï¼Œä»–ç»ˆäºå¯ä»¥åšå®šæŒ‰ç€ç›®æ ‡æ–¹å‘å‰è¿›äº†ã€‚</p>
<p>æœªæ¥å‡ ä¸ªæœˆï¼ŒLeCun å°†æ­£å¼ç¦»èŒ Metaï¼Œä¸‹ä¸€æ­¥è®¡åˆ’å°†ä¸“æ³¨äºæ·±åŒ–åœ¨ã€Œä¸–ç•Œæ¨¡å‹ã€é¢†åŸŸçš„ç ”ç©¶ã€‚</p>
<p>AI æŒèˆµäººå‡ºèµ°ï¼Œè¿™æ„å‘³ç€ï¼ŒFAIR å®éªŒå®¤å°±å½»åº•è¢«è¾¹ç¼˜åŒ–äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35b5e2d5e1974bbd9d616cf542ce55a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=CM4EEuUPdBodh3yDUSJf4B2f2pc%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå›¾çµå·¨å¤´ï¼Œå¼€å¯ AI é©å‘½ã€</strong></p>
<p>1960 å¹´ 7 æœˆ 8 æ—¥å‡ºç”Ÿçš„ Yann LeCunï¼Œåœ¨æ³•å›½å·´é»çš„éƒŠåŒºé•¿å¤§ã€‚</p>
<p>ä»–çš„å§“æ°åŸæœ¬æ˜¯ Le Cunï¼Œä½†ä»–å‘ç°ç¾å›½äººå¸¸å¯¹æ­¤æ„Ÿåˆ°å›°æƒ‘ï¼Œå°† Le è¯¯ä½œä»–çš„ä¸­é—´åï¼Œäºæ˜¯ä¾¿å»æ‰äº†ä¸­é—´çš„ç©ºæ ¼ã€‚</p>
<p>ä»–çš„çˆ¶äº²æ˜¯ä¸€åå·¥ç¨‹å¸ˆï¼Œåœ¨ LeCun å……æ»¡ä¿®è¡¥åˆ›é€ çš„ç«¥å¹´ä¸­ï¼Œå°†è‡ªå·±å¯¹ç”µå­å’Œæœºæ¢°çš„çƒ­çˆ±ä¼ ç»™äº†ä»–ã€‚</p>
<p>é’å°‘å¹´æ—¶æœŸï¼ŒLeCun æ—¢å–œæ¬¢åœ¨ä¹é˜Ÿä¸­æ¼”å¥ï¼Œä¹Ÿçƒ­çˆ±ç§‘å­¦ä¸å·¥ç¨‹ã€‚</p>
<p>åæ¥ï¼Œä»–åœ¨æ³•å›½ç²¾è‹±å·¥ç¨‹å¸ˆå­¦æ ¡ä¹‹ä¸€çš„å·´é»é«˜ç­‰ç”µå­ä¸ç”µå·¥å·¥ç¨‹å¸ˆå­¦é™¢ï¼ˆESIEE Parisï¼‰è·å¾—äº†ç›¸å½“äºç¡•å£«çš„å­¦ä½ã€‚åœ¨é‚£é‡Œï¼Œä»–ä¸“æ³¨äºå¾®èŠ¯ç‰‡è®¾è®¡ä¸è‡ªåŠ¨åŒ–ã€‚</p>
<p>ä»–ä»æœ¬ç§‘æ—¶ä»£å°±å¼€å§‹ç‹¬ç«‹è¿›è¡Œæœºå™¨å­¦ä¹ ç ”ç©¶ï¼Œå¹¶å°†å…¶ä½œä¸ºä»–åœ¨ç´¢é‚¦å¤§å­¦ï¼ˆå½“æ—¶ç§°ä¸ºçš®åŸƒå°”å’Œç›ä¸½ Â· å±…é‡Œå¤§å­¦ï¼‰åšå£«é˜¶æ®µçš„æ ¸å¿ƒå·¥ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0edc6ec9354f4e419618b11217f39be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=7eMCmy2Bc09t8XcbRKA1dm5J3kw%3D" alt="" loading="lazy"/></p>
<p>LeCun çš„ç ”ç©¶ä¸ Geoffrey Hinton ç‹¬ç«‹åšå‡ºçš„å‘ç°é«˜åº¦ç›¸ä¼¼ã€‚</p>
<ul>
<li>ä¸ Hinton ä¸€æ ·ï¼Œä»–è¢«å½“æ—¶å°šå±éä¸»æµçš„ç¥ç»ç½‘ç»œäººå·¥æ™ºèƒ½æ–¹æ³•æ‰€å¸å¼•ï¼›</li>
<li>ä¹Ÿä¸ Hinton ä¸€æ ·ï¼Œä»–å‘ç°å¯ä»¥é€šè¿‡ä½¿ç”¨åæ¥è¢«ç§°ä¸ºã€Œåå‘ä¼ æ’­ã€çš„ç®—æ³•æ¥æœ‰æ•ˆè®­ç»ƒè¾“å…¥å’Œè¾“å‡ºèŠ‚ç‚¹ä¹‹é—´ä¸­é—´å±‚çš„ã€Œéšè—ã€ç¥ç»å…ƒï¼Œä»è€Œå…‹æœç®€å•ç¥ç»ç½‘ç»œä¼—æ‰€å‘¨çŸ¥çš„å±€é™æ€§ã€‚</li>
</ul>
<p>1985 å¹´åœ¨æ³•å›½é˜¿å°”å‘æ–¯å±±åŒºä¸¾åŠçš„ä¸€åœºç ”è®¨ä¼šï¼Œé¦–æ¬¡è®© LeCun ä¸ä»äº‹ç›¸å…³ç ”ç©¶çš„å›½é™…å­¦æœ¯ç•Œæœ‰äº†ç›´æ¥æ¥è§¦ã€‚</p>
<p>æ­£æ˜¯åœ¨é‚£é‡Œï¼Œä»–ç»“è¯†äº† Hinton çš„å¯†åˆ‡åˆä½œè€… Terry Sejnowskiã€‚å½“æ—¶ï¼ŒSejnowski å…³äºåå‘ä¼ æ’­çš„ç ”ç©¶å°šæœªå‘è¡¨ã€‚</p>
<p>å‡ ä¸ªæœˆåï¼ŒHinton åˆ°è®¿å·´é»ï¼Œå¹¶ä¸»åŠ¨å‘ LeCun ä½œäº†è‡ªæˆ‘ä»‹ç»ã€‚</p>
<p>å†ä¹‹åï¼ŒLeCun åˆ™å—é‚€å‚åŠ å¡å†…åŸºæ¢…éš†å¤§å­¦çš„å¤å­£ç ”è®¨ä¼šï¼Œå¹¶åœ¨å¤šä¼¦å¤š Hinton æ–°æˆç«‹çš„ç ”ç©¶å°ç»„è¿›è¡Œäº†ä¸€å¹´çš„åšå£«åç ”ç©¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f32cc9f763da42a9a119ea76e1f9da8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=rRIgVMn8dDXBwdepQKCpWS05gmk%3D" alt="" loading="lazy"/></p>
<p>1988 å¹´ï¼Œåšå£«åç ”ç©¶ç»“æŸæ—¶ï¼ŒLeCun åŠ å…¥äº†è‘—åçš„è®¡ç®—æœºç§‘å­¦ç ”ç©¶ä¸­å¿ƒâ€”â€”è´å°”å®éªŒå®¤ã€‚</p>
<p>åœ¨è´å°”å®éªŒå®¤ï¼ŒLeCun çš„å·¥ä½œä¸“æ³¨äºç¥ç»ç½‘ç»œæ¶æ„å’Œå­¦ä¹ ç®—æ³•ã€‚</p>
<p>ä»–å½±å“æœ€ä¸ºæ·±è¿œçš„è´¡çŒ®æ˜¯ä¸€ç§åä¸ºã€Œå·ç§¯ç¥ç»ç½‘ç»œã€çš„æ–°æ–¹æ³•ã€‚è¿™æ˜¯ä»–æ—©æœŸæˆå°±çš„å»¶ä¼¸ï¼Œå› ä¸ºå·ç§¯ç½‘ç»œä¾èµ–åå‘ä¼ æ’­æŠ€æœ¯æ¥è®­ç»ƒå…¶éšè—å±‚ã€‚</p>
<p>é™¤äº†å¼€å‘å·ç§¯æ–¹æ³•ï¼ŒLeCun è¿˜ç‡å…ˆå°†å…¶åº”ç”¨äºã€Œå›¾ Transformer ç½‘ç»œã€ï¼Œç”¨äºè¯†åˆ«å°åˆ·ä½“å’Œæ‰‹å†™æ–‡æœ¬ã€‚è¿™é¡¹æŠ€æœ¯è¢«ç”¨äºä¸€ä¸ªå¹¿æ³›éƒ¨ç½²çš„ç³»ç»Ÿï¼Œä»¥è¯»å–æ”¯ç¥¨ä¸Šçš„æ‰‹å†™æ•°å­—ã€‚</p>
<p>ä»–åœ¨è´å°”å®éªŒå®¤çš„å¦ä¸€é¡¹ä¸»è¦è´¡çŒ®æ˜¯å¼€å‘äº†ã€Œæœ€ä½³è„‘æŸä¼¤ã€ï¼ˆOptimal Brain Damageï¼‰æ­£åˆ™åŒ–æ–¹æ³•ã€‚</p>
<p>è¿™ä¸ªåå­—ç”ŸåŠ¨çš„æ¦‚å¿µæ—¨åœ¨é€šè¿‡ç§»é™¤ç¥ç»ç½‘ç»œä¸­ä¸å¿…è¦çš„è¿æ¥æ¥ç®€åŒ–ç½‘ç»œã€‚å¦‚æœæ“ä½œå¾—å½“ï¼Œè¿™ç§ã€Œè„‘æŸä¼¤ã€å¯ä»¥äº§ç”Ÿæ›´ç®€å•ã€æ›´å¿«é€Ÿçš„ç½‘ç»œï¼Œå…¶æ€§èƒ½ä¸å®Œæ•´ç‰ˆæœ¬ç›¸å½“ç”šè‡³æ›´ä¼˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d77f5ad18094d43aaaf6cb37caa9477~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=Q0tSyBvug%2FbURAV88AmhZUfd5MQ%3D" alt="" loading="lazy"/></p>
<p>1996 å¹´ï¼Œåœ¨è®¡ç®—æœºè¡Œä¸šæœªèƒ½ç«‹è¶³çš„ AT&amp;T å…¬å¸ï¼Œå°†è´å°”å®éªŒå®¤çš„å¤§éƒ¨åˆ†ä¸šåŠ¡åŠå…¶ç”µä¿¡ç¡¬ä»¶ä¸šåŠ¡åˆ†æ‹†æˆç«‹äº†ä¸€å®¶æ–°å…¬å¸â€”â€”æœ—è®¯ç§‘æŠ€ã€‚</p>
<p>LeCun ç•™åœ¨äº† AT&amp;Tï¼Œè´Ÿè´£ä¸€ä¸ªä¸“æ³¨äºå›¾åƒå¤„ç†ç ”ç©¶çš„å®éªŒå®¤å°ç»„ã€‚</p>
<p>åœ¨é‚£é‡Œï¼Œä»–çš„ä¸»è¦æˆå°±æ˜¯ DjVu å›¾åƒå‹ç¼©æŠ€æœ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d450fa31e1640438713b77d81ba4973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=CwI5F83Du6m4WqZndIpEUoPOlXg%3D" alt="" loading="lazy"/></p>
<p>2003 å¹´ï¼ŒLeCun ç¦»å¼€å·¥ä¸šç•Œï¼Œå‰å¾€çº½çº¦å¤§å­¦åº“æœ—æ•°å­¦ç§‘å­¦ç ”ç©¶æ‰€æ‹…ä»»è®¡ç®—æœºç§‘å­¦æ•™æˆã€‚</p>
<p>åœ¨çº½çº¦å¤§å­¦ï¼ŒLeCun è´Ÿè´£è®¡ç®—ä¸ç”Ÿç‰©å­¦ä¹ å®éªŒå®¤ï¼Œç»§ç»­ä»–åœ¨æœºå™¨å­¦ä¹ ç®—æ³•å’Œè®¡ç®—æœºè§†è§‰åº”ç”¨æ–¹é¢çš„å·¥ä½œã€‚</p>
<p>ä»–è‡³ä»Šä»åœ¨çº½çº¦å¤§å­¦ä»»æ•™ï¼Œå°½ç®¡éšç€å£°èª‰æ—¥éš†ï¼Œä»–åˆå¢æ·»äº†å‡ ä¸ªæ–°å¤´è¡”å’Œé¢å¤–èŒä½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b5bc1a1219e443a89fea734c13383a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=ABQabRu0KICtSQ2sekCwcvwOUio%3D" alt="" loading="lazy"/></p>
<p>åˆ° 2010 å¹´ä»£åˆï¼Œå„å¤§ç§‘æŠ€å…¬å¸ç«ç›¸éƒ¨ç½²åŸºäºç¥ç»ç½‘ç»œçš„æœºå™¨å­¦ä¹ ç³»ç»Ÿã€‚ä¸å…¶ä»–é¡¶å°–ç ”ç©¶äººå‘˜ä¸€æ ·ï¼ŒLeCun ä¹Ÿå—åˆ°äº†ç§‘æŠ€å·¨å¤´çš„é’çã€‚</p>
<p>2013 å¹´ 12 æœˆï¼Œä»–åŠ å…¥ Facebook å¹¶åˆ›å»ºäº† FAIRï¼ˆFacebook AI Researchï¼‰ï¼ŒåŒæ—¶ï¼Œä»–ä¹Ÿè¿˜å…¼é¡¾åœ¨çº½çº¦å¤§å­¦çš„å·¥ä½œã€‚</p>
<p>2018 å¹´ï¼Œä»–å¸ä»»ä¸»ä»»ä¸€èŒï¼Œè½¬ä»» Facebook é¦–å¸­äººå·¥æ™ºèƒ½ç§‘å­¦å®¶ï¼Œä¸“æ³¨äºæˆ˜ç•¥è§„åˆ’å’Œç§‘å­¦é¢†å¯¼åŠ›ã€‚</p>
<p>åŒå¹´ï¼Œä»–ä¸ Geoffrey Hinton å’Œ Yoshua Bengioï¼Œå…±åŒè·å¾—äº†å›¾çµå¥–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb089d529bc3488081619e67d11db779~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=kyFe1z%2B27b8X7%2Fs66F6pgS2hBMM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e45aa40a00b49e180ea118e912084a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763542970&amp;x-signature=VjQwo43bN9CoPIlKN0%2FyGh6Bi2s%3D" alt="" loading="lazy"/></p>
<p>æ—¶è‡³ä»Šæ—¥ï¼ŒLeCun ä¸€ç›´ä¿æŒç€å¯¹åŠ¨æ‰‹åˆ›é€ çš„çƒ­çˆ±ï¼Œä»–çš„çˆ±å¥½åŒ…æ‹¬åˆ¶é€ é£æœºã€ç”µå­ä¹å™¨å’Œæœºå™¨äººã€‚</p>
<p>æˆ–è®¸ï¼Œè¿™ä¹Ÿæ˜¯ä»–åœ¨ 65 å²æ—¶ï¼Œæ¯…ç„¶å†³å®šä¸‹æµ·åˆ›ä¸šçš„åŠ¨åŠ›ä¹‹ä¸€ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ft.com%2Fcontent%2Fc586eb77-a16e-4363-ab0b-e877898b70de" target="_blank" title="https://www.ft.com/content/c586eb77-a16e-4363-ab0b-e877898b70de" ref="nofollow noopener noreferrer">www.ft.com/content/c58â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AIç»˜å›¾æ–°æ‰‹å¿…çœ‹ã€‘Nano Bananaå®æˆ˜æ•™å­¦ï¼šä»æç¤ºè¯åˆ°ç”»é¢æ„å›¾ï¼]]></title>    <link>https://juejin.cn/post/7571637614203387931</link>    <guid>https://juejin.cn/post/7571637614203387931</guid>    <pubDate>2025-11-12T09:27:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571637614203387931" data-draft-id="7571655979255726120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AIç»˜å›¾æ–°æ‰‹å¿…çœ‹ã€‘Nano Bananaå®æˆ˜æ•™å­¦ï¼šä»æç¤ºè¯åˆ°ç”»é¢æ„å›¾ï¼"/> <meta itemprop="keywords" content="AIGC,Gemini"/> <meta itemprop="datePublished" content="2025-11-12T09:27:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·815091607260"/> <meta itemprop="url" content="https://juejin.cn/user/2042264015120554"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AIç»˜å›¾æ–°æ‰‹å¿…çœ‹ã€‘Nano Bananaå®æˆ˜æ•™å­¦ï¼šä»æç¤ºè¯åˆ°ç”»é¢æ„å›¾ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2042264015120554/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·815091607260
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:27:34.000Z" title="Wed Nov 12 2025 09:27:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Nano Bananaï¼Œå¤§é¦™è•‰æ¨¡å‹å°åâ€œçº³ç±³é¦™è•‰â€æ˜¯ Google/DeepMind æ¨å‡ºçš„å›¾åƒç”Ÿæˆ/ç¼–è¾‘å­æ¨¡å‹ï¼ˆGemini 2.5 Flash Image ç³»åˆ—çš„ä¿—ç§°ï¼‰ï¼Œä»¥å¼ºå¤§çš„ä¸€æ­¥/è¿­ä»£å›¾åƒç¼–è¾‘èƒ½åŠ›è‘—ç§°ï¼Œç‰¹åˆ«æ“…é•¿åœ¨ä¿æŒä¸»ä½“ä¸€è‡´æ€§çš„å‰æä¸‹å¯¹å·²æœ‰ç…§ç‰‡è¿›è¡Œå¤æ‚æ”¹é€ ï¼ˆå¦‚æŠŠçœŸäººå˜æˆå¾®å‹æ‘†ä»¶ã€æ¢èƒŒæ™¯ã€æœè£…æ›¿æ¢ã€è¿è´¯çš„äººç‰©ç³»åˆ—ç¼–è¾‘ç­‰ï¼‰ã€‚</p>
<p>å•å¼ /å¤šå¼ å›¾åƒç¼–è¾‘ã€one-shot é£æ ¼æ›¿æ¢ã€æŒç»­è¿­ä»£ä¿æŒè§’è‰²ä¸€è‡´ã€ä»ç…§ç‰‡ç”Ÿæˆé£æ ¼åŒ–3D/åŠ3Då°æ¨¡å‹/æ‘†ä»¶ã€ä¸ Photoshopç­‰å·¥å…·é›†æˆç­‰ã€‚</p>
<p>ä¸‹é¢ç»™ä½ ä¸€ä»½ <strong>è¯¦å°½çš„ Nano-bananaï¼ˆå³ Google Gemini çš„ â€œNano Banana / Gemini 2.5 Flash Imageâ€ï¼‰ä½¿ç”¨æ•™ç¨‹</strong>ï¼ŒåŒ…å«ï¼šåŠŸèƒ½æ¦‚è§ˆã€é€æ­¥ä¸Šæ‰‹æ•™ç¨‹ã€Prompt å·¥ç¨‹ä¸æŠ€å·§ã€10 ä¸ªã€Œç¥çº§ç©æ³•ã€æ¡ˆä¾‹ï¼ˆå«æç¤ºè¯ä¸æ­¥éª¤ï¼‰ã€ä»¥åŠå¦‚ä½•é€šè¿‡ <strong>ç¥é©¬ä¸­è½¬ API</strong> ç›´æ¥ä½¿ç”¨å’Œé…ç½®å¹¶è°ƒç”¨ Nano-bananaï¼ˆå«ç¤ºä¾‹ä»£ç ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7484a1e1e27d4a1e8cff035bb4d6f609~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=Wqft1iPoDwU72Y1pxeoaKyBeNiY%3D" alt="ã€Nano-bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h2 data-id="heading-0">1. Nano Bananaæç¤ºè¯Promptå·¥ç¨‹ï¼ˆå®æˆ˜è¦ç‚¹ï¼‰</h2>
<p>æˆåŠŸçš„å›¾åƒç¼–è¾‘ prompt é€šå¸¸è¦â€œåˆ†å±‚ã€ç®€æ´ã€æŒ‡å‘æ˜ç¡®â€â€”â€”å»ºè®®ä½¿ç”¨ä¸‹é¢ç»“æ„åŒ–æ¨¡æ¿ï¼ˆå¯å¤åˆ¶ç²˜è´´æ”¹å†™ï¼‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶ä¸‹ä¸€éƒ¨åˆ†æç¤ºè¯çš„ç¤ºä¾‹ç›´æ¥å¿«é€Ÿä¸Šæ‰‹ï¼š</p>
<pre><code class="hljs">ä¸»ä½“æè¿°ï¼ˆè° / ç‰©ï¼‰ï¼›
åŠ¨ä½œæˆ–å§¿æ€ï¼ˆåœ¨åšä»€ä¹ˆï¼‰ï¼›
é£æ ¼/ç»†èŠ‚ï¼ˆå†™æ˜é£æ ¼ï¼šå†™å® / æ’ç”» / çº¸é›• / 3D å°æ‘†ä»¶ï¼‰ï¼›
å…‰ç…§/ç¯å¢ƒï¼ˆæ—¶é—´/å…‰æº/ç›¸æœºè§’åº¦ï¼‰ï¼›
æè´¨/çº¹ç†ï¼ˆä¾‹å¦‚é™¶ç“·ã€å¡‘æ–™ã€é‡‘å±ã€è¿·ä½ æœ¨é›•ï¼‰ï¼›
ä¿ç•™æˆ–é™åˆ¶ï¼ˆâ€œä¿ç•™é¢éƒ¨è¡¨æƒ…/ä¸è¦æ”¹å˜èƒŒæ™¯ä¸­ XXâ€ï¼‰ï¼›
è¾“å‡ºæ ¼å¼ä¸ä¿®é¥°ï¼ˆâ€œé«˜ç»†èŠ‚ã€4kã€è‡ªç„¶é˜´å½±ã€æ— æ–‡å­—â€ï¼‰ã€‚
</code></pre>
<p>ç¤ºä¾‹ï¼ˆå°†è‡ªæ‹å˜æˆå¤ªç©ºå®‡èˆªæœé£æ ¼ï¼‰ï¼š</p>
<pre><code class="hljs">ä¸»ä½“ï¼šæ­£é¢è‡ªæ‹ï¼Œå¾®ç¬‘ï¼Œå¹´çº¦25å²å¥³æ€§ï¼›
åŠ¨ä½œï¼šé¢å‘é•œå¤´ï¼Œå¤´æˆ´é€æ˜å¤´ç›”ï¼Œèº«ä½“ç©¿å®‡èˆªæœï¼›
é£æ ¼ï¼šç§‘å¹»å†™å®ï¼Œç»†èŠ‚ä¸°å¯Œï¼›
ç¯å¢ƒï¼šå¤ªç©ºèƒŒæ™¯ï¼Œåœ°çƒåœ¨è¿œå¤„ï¼Œå¯è§æ˜Ÿäº‘å…‰æ™•ï¼›
å…‰ç…§ï¼šæ¥è‡ªå³ä¸Šæ–¹çš„å†·è‰²ä¸»å…‰ï¼ŒæŸ”å’Œåå°„ï¼›
ä¿ç•™ï¼šä¿ç•™çœ¼ç›å’Œé¢éƒ¨ç‰¹å¾ï¼›
è¾“å‡ºï¼šå¯ç”¨äºå¤´åƒï¼Œè£å‰ªä¸ºæ–¹å½¢
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7d42215ec32416c913745a52c8d69c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=3Gc6Vf7e3P7wWatsbTAiS%2BRYUyo%3D" alt="" loading="lazy"/></p>
<p><strong>å®ç”¨æŠ€å·§</strong></p>
<ul>
<li>
<p>åˆ†å¥å†™æç¤ºï¼ŒçŸ­å¥æ¯”é•¿æ®µæ›´ç¨³å®šã€‚</p>
</li>
<li>
<p>ä½¿ç”¨å¦å®šçŸ­è¯­ï¼ˆavoid / ä¸è¦ï¼‰æ˜ç¡®æ’é™¤å…ƒç´ ã€‚</p>
</li>
<li>
<p>ç”¨â€œå‚è€ƒå›¾â€æˆ–â€œå‚è€ƒå…³é”®è¯â€æé«˜é£æ ¼ä¸€è‡´æ€§ï¼ˆå¦‚ç»™å‡ºé£æ ¼å‚è€ƒå›¾æˆ–å†™â€œåƒ Studio Ghibli é£æ ¼â€ï¼‰ã€‚</p>
</li>
<li>
<p>è‹¥è¦å¤šæ¬¡è¿­ä»£ï¼Œè®°å½•æ¯æ¬¡ prompt çš„æ”¹åŠ¨ç‚¹ï¼Œæ–¹ä¾¿å¤ç°ä¸å¾®è°ƒã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">2. 10 ä¸ª Nano-bananaã€Œç¥çº§ç©æ³•ã€ä¸ç¤ºä¾‹æç¤ºè¯ï¼ˆæ¯æ¡å«æ“ä½œæ­¥éª¤ä¸æç¤ºè¯ï¼‰</h2>
<blockquote>
<p>ä¸‹åˆ—ç©æ³•å…¼é¡¾åˆ›æ„ä¸å¯å®ç°æ€§ï¼Œé€‚ç”¨äºç¤¾äº¤åª’ä½“ã€å•†ä¸šè®¾è®¡ã€å½±è§†æ¦‚å¿µã€ä¸ªäººåˆ›ä½œç­‰åœºæ™¯ã€‚</p>
</blockquote>
<h4 data-id="heading-2">å¾®å‹æ‘†ä»¶ / äººåƒâ€œæ‘†ä»¶åŒ–â€</h4>
<p><strong>æ€è·¯</strong>ï¼šæŠŠçœŸäººç…§ç‰‡è½¬æˆæ¡Œé¢å°æ‘†ä»¶ï¼ˆmini figurineï¼‰é£æ ¼ï¼Œä¿ç•™é¢éƒ¨ç‰¹å¾ä¸”åšå‡ºâ€œå¡‘æ–™/é™¶ç“·â€è´¨æ„Ÿã€‚</p>
<p><strong>ç¤ºä¾‹ prompt</strong>ï¼š</p>
<pre><code class="hljs">æŠŠä¸»ä½“å˜ä¸ºä¸€ä¸ªæ¡Œé¢å¾®å‹æ‘†ä»¶ï¼Œç±»ä¼¼ç²¾è‡´é™¶ç“·äººå¶ï¼Œå¤´éƒ¨ç»†èŠ‚ä¿ç•™ï¼Œé¢éƒ¨å…‰æ»‘æœ‰å¾®å…‰ï¼Œåº•åº§æœ¨è´¨ï¼Œå°ºå¯¸è¿·ä½ ï¼Œæµ…æ™¯æ·±ç›¸æœºé•œå¤´ï¼ŒæŸ”å’Œç¯å¢ƒå…‰ï¼ŒèƒŒæ™¯ä¸ºä¹¦æ¡Œæ¨¡ç³Šã€‚ä¿æŒé¢éƒ¨è¡¨æƒ…ä¸å˜ã€‚
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40ec4b7030e8455d8e385d2e1c2e8668~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=49nDdVN2dGEpFm%2FV7ucxbqeZLFk%3D" alt="" loading="lazy"/></p>
<p><strong>æ­¥éª¤</strong>ï¼šä¸Šä¼ æ¸…æ™°æ­£é¢ç…§ â†’ æŒ‡å®š maskï¼ˆèº«ä½“æˆ–èƒŒæ™¯ï¼‰â†’ é€‰æ‹©â€œå¡‘æ–™/é™¶ç“·â€è´¨æ„Ÿ â†’ è¿­ä»£è°ƒæ•´æè´¨å’Œé˜´å½±ã€‚</p>
<h4 data-id="heading-3">æ›´æ¢å¤šç§å‘å‹</h4>
<p>è¾“å…¥: éœ€ä¸Šä¼ ä¸€å¼ éœ€è¦æ›´æ¢å‘å‹çš„äººåƒå›¾ç‰‡</p>
<p>æç¤ºè¯:</p>
<pre><code class="hljs">ä»¥ä¹å®«æ ¼çš„æ–¹å¼ç”Ÿæˆè¿™ä¸ªäººä¸åŒå‘å‹çš„å¤´åƒ
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc8752a045784b38ad0251574f187570~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=j0uaQUaqZK%2FvUjYqBSJIqaFgpV4%3D" alt="ã€Nano-bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-4">ç”µå½±æµ·æŠ¥çº§åˆ«åœºæ™¯é‡å¡‘</h4>
<p><strong>ç¤ºä¾‹ prompt</strong>ï¼š</p>
<pre><code class="hljs">æŠŠè¿™å¼ åŸå¸‚è¡—æ‹é‡åˆ¶ä¸ºèµ›åšæœ‹å…‹ç”µå½±æµ·æŠ¥é£æ ¼ï¼šéœ“è™¹ç¯ã€é›¨æ»´åå°„ã€å†·æš–å¯¹æ¯”ã€å®½é“¶å¹•æ„å›¾ã€åŠ æ·±é˜´å½±ã€ç”µå½±é¢—ç²’ï¼Œä¿ç•™ä¸»ä½“å§¿æ€ã€‚
</code></pre>
<p><strong>æ­¥éª¤</strong>ï¼šä¸Šä¼ åŸå›¾ â†’ æŒ‡å®š â€œé£æ ¼ï¼šèµ›åšæœ‹å…‹â€ â†’ è¦æ±‚â€œå®½é“¶å¹•æ„å›¾+é«˜å¯¹æ¯”â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b91252e22070425ea85e884252647391~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=0L6G3PPfXT1bLED2s1Mzhpmc%2FdA%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5">ç”µå½±åˆ†é•œ</h4>
<p><strong>æ€è·¯</strong>ï¼šéœ€ä¸Šä¼ å‚è€ƒå›¾åƒ</p>
<p><strong>æç¤º</strong>ï¼š</p>
<pre><code class="hljs">ç”¨è¿™ä¸¤ä¸ªè§’è‰²åˆ›ä½œä¸€ä¸ªä»¤äººä¸Šç˜¾çš„12éƒ¨åˆ†æ•…äº‹ï¼ŒåŒ…å«12å¼ å›¾åƒï¼Œè®²è¿°ç»å…¸çš„é»‘è‰²ç”µå½±ä¾¦æ¢æ•…äº‹ã€‚æ•…äº‹å…³äºä»–ä»¬å¯»æ‰¾çº¿ç´¢å¹¶æœ€ç»ˆå‘ç°çš„å¤±è½çš„å®è—ã€‚æ•´ä¸ªæ•…äº‹å……æ»¡åˆºæ¿€ï¼Œæœ‰æƒ…æ„Ÿçš„é«˜æ½®å’Œä½è°·ï¼Œä»¥ç²¾å½©çš„è½¬æŠ˜å’Œé«˜æ½®ç»“å°¾ã€‚ä¸è¦åœ¨å›¾åƒä¸­åŒ…å«ä»»ä½•æ–‡å­—æˆ–æ–‡æœ¬ï¼Œçº¯ç²¹é€šè¿‡å›¾åƒæœ¬èº«è®²è¿°æ•…äº‹åœ¨è¿™å¼ æ¨¡ç‰¹å›¾ä¸Šå°è¯•ä¸‰ç§æœªæ¥æ„Ÿæœè£…ï¼š1) è½»è´¨åå…‰å¤–å¥— 2) é«˜è…°ç»“æ„è¿è¡£ 3) å±‚å åŠŸèƒ½æ€§æˆ˜æœ¯è£…ã€‚æ¯ä¸ªè¾“å‡ºä¿æŒæ¨¡å‹è„¸éƒ¨ä¸å§¿æ€ä¸€è‡´ã€‚
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3991bc2af0de4c0bb20f949ba3bf60d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=Evv7T9QZ1%2BeBxZ18XhyRF8v08xI%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-6">äººç‰©å§¿åŠ¿ä¿®æ”¹</h4>
<p><strong>æç¤º</strong>ï¼š</p>
<pre><code class="hljs">è®©å›¾ç‰‡ä¸­çš„äººç›´è§†å‰æ–¹
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dde9c4e37e84dccb8f0b906aad9f466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=36kwRg6LkGdOfJeQZaM6X8ac%2F2k%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-7">çº¿ç¨¿å›¾ç”Ÿæˆå›¾åƒ</h4>
<p><strong>æç¤º</strong>ï¼š</p>
<pre><code class="hljs">å°†å›¾ä¸€äººç‰©æ¢æˆå›¾äºŒå§¿åŠ¿ï¼Œä¸“ä¸šæ‘„å½±æ£šæ‹æ‘„
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0062f5fc741400b9fb06755f8bf679b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=b59LA7URe2V3mXHJMW6iFwgioRc%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-8">ç‰©å“åŒ…è£…ç”Ÿæˆ</h4>
<p><strong>æ€è·¯</strong>ï¼šéœ€ä¸Šä¼ ä¸€å¼ ç‰©å“å‚è€ƒå›¾åƒå’Œä¸€å¼ åŒ…è£…å‚è€ƒå›¾ç‰‡</p>
<p><strong>æç¤º</strong>ï¼š</p>
<pre><code class="hljs">æŠŠå›¾ä¸€è´´åœ¨å›¾äºŒæ˜“æ‹‰ç½ä¸Šï¼Œå¹¶æ”¾åœ¨æç®€è®¾è®¡çš„å¸ƒæ™¯ä¸­ï¼Œä¸“ä¸šæ‘„å½±
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be527b44a3ae40de842c59fbabdfe118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=GS0rZkV%2FsP10g%2F4Kf1bU5a963t0%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-9">åŠ¨æ¼«è½¬çœŸäººCoser</h4>
<p><strong>è¾“å…¥:</strong> éœ€ä¸Šä¼ ä¸€å¼ æ’ç”»å›¾åƒ</p>
<p><strong>æç¤ºè¯:</strong></p>
<pre><code class="hljs">ç”Ÿæˆä¸€ä¸ªå¥³å­©cosplayè¿™å¼ æ’ç”»çš„ç…§ç‰‡ï¼ŒèƒŒæ™¯è®¾ç½®åœ¨Comiket
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d460018b21134a87a33c2b8b85eb78ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=%2BGlvGI%2B5mjDI%2FNDy%2FnZWlzT7fM8%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-10">ç”Ÿæˆè§’è‰²è®¾å®š</h4>
<p><strong>è¾“å…¥:</strong> éœ€ä¸Šä¼ ä¸€å¼ è§’è‰²å‚è€ƒå›¾åƒ</p>
<p><strong>æç¤ºè¯:</strong></p>
<pre><code class="hljs language-sql" lang="sql">ä¸ºæˆ‘ç”Ÿæˆäººç‰©çš„è§’è‰²è®¾å®šï¼ˆ<span class="hljs-type">Character</span> Designï¼‰

æ¯”ä¾‹è®¾å®šï¼ˆä¸åŒèº«é«˜å¯¹æ¯”ã€å¤´èº«æ¯”ç­‰ï¼‰

ä¸‰è§†å›¾ï¼ˆæ­£é¢ã€ä¾§é¢ã€èƒŒé¢ï¼‰

è¡¨æƒ…è®¾å®šï¼ˆExpression Sheetï¼‰ â†’ å°±æ˜¯ä½ å‘çš„é‚£ç§å›¾

åŠ¨ä½œè®¾å®šï¼ˆPose Sheetï¼‰ â†’ å„ç§å¸¸è§å§¿åŠ¿

æœè£…è®¾å®šï¼ˆCostume Designï¼‰
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d58201e5620d4de2b0bf8ac56733be07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=yWlCAMlnwpOaDTuU1VKszJrZvoA%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-11">OOTDç©¿æ­</h4>
<p><strong>è¾“å…¥:</strong> éœ€ä¸Šä¼ ä¸€å¼ äººç‰©å›¾ç‰‡å’Œæœè£…å›¾ç‰‡</p>
<p><strong>æç¤ºè¯:</strong></p>
<pre><code class="hljs">é€‰æ‹©å›¾1ä¸­çš„äººï¼Œè®©ä»–ä»¬ç©¿ä¸Šå›¾2ä¸­çš„æ‰€æœ‰æœè£…å’Œé…é¥°ã€‚åœ¨æˆ·å¤–æ‹æ‘„ä¸€ç³»åˆ—å†™å®çš„OOTDé£æ ¼ç…§ç‰‡ï¼Œä½¿ç”¨è‡ªç„¶å…‰çº¿ï¼Œæ—¶å°šçš„è¡—å¤´é£æ ¼ï¼Œæ¸…æ™°çš„å…¨èº«é•œå¤´ã€‚ä¿æŒå›¾1ä¸­äººç‰©çš„èº«ä»½å’Œå§¿åŠ¿ï¼Œä½†ä»¥è¿è´¯æ—¶å°šçš„æ–¹å¼å±•ç¤ºå›¾2ä¸­çš„å®Œæ•´æœè£…å’Œé…é¥°
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e6249d485a748178b8f5d76ed7e243e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=dmidXscN%2BefhKgRvsLBOSzwc4a0%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h2 data-id="heading-12">3. Nano-bananaæ€ä¹ˆç”¨ï¼šå››ç§å¸¸è§ä½¿ç”¨æ–¹å¼ï¼ˆå«æ“ä½œæ­¥éª¤ï¼‰</h2>
<p>ä¸‹é¢ç»™å‡ºæœ€å¸¸è§çš„å››ç§ä¸Šæ‰‹æ–¹å¼ï¼ˆå¸¦å…·ä½“æ­¥éª¤ï¼‰â€”â€”å¦‚æœä½ å·²ç»æœ‰å›¾åƒï¼Œç›´æ¥æŒ‰å…¶ä¸­ä¸€ç§èµ°å³å¯ã€‚</p>
<h3 data-id="heading-13">æ–¹å¼ Aï¼šåœ¨ Google Gemini / AI Studio ä¸­ä½¿ç”¨ï¼ˆå®˜æ–¹æ¸ é“ï¼‰</h3>
<ol>
<li>
<p>æ‰“å¼€ Gemini Image ç¼–è¾‘é¡µé¢æˆ– AI Studioï¼ˆgemini.google / AI Studioï¼‰ã€‚é€‰æ‹© <strong>Gemini 2.5 Flash Image / Nano-banana</strong> æ¨¡å‹ï¼ˆæœ‰æ—¶ç§°â€œNano-bananaâ€æˆ–â€œgemini-2-5-flash-imageâ€ï¼‰ã€‚</p>
</li>
<li>
<p>ä¸Šä¼ ä½ çš„åŸå›¾ï¼ˆå•å¼ æˆ–å¤šå¼ å‚è€ƒå›¾ï¼‰ã€‚</p>
</li>
<li>
<p>åœ¨æ–‡æœ¬æ¡†è¾“å…¥ä½ çš„ç¼–è¾‘æç¤ºï¼ˆpromptï¼‰ã€‚å¯åˆ†å¥å†™æ¸…æ¥šè¦ç‚¹ï¼šä¸»ä½“ã€åŠ¨ä½œ/è¡¨æƒ…ã€é£æ ¼ã€èƒŒæ™¯ã€å…‰ç…§ã€æè´¨ã€è¦ä¿ç•™/åˆ é™¤çš„å…ƒç´ ã€‚</p>
</li>
<li>
<p>è‹¥æ”¯æŒ maskï¼ˆè’™ç‰ˆï¼‰ï¼Œå¯ç”¨ç”»ç¬”åœˆå‡ºå¸Œæœ›å˜åŠ¨çš„åŒºåŸŸï¼Œæˆ–æ ‡æ³¨éœ€ä¿ç•™ç»†èŠ‚ï¼ˆä¾‹å¦‚â€œä¿ç•™å·¦è€³ç¯ç»†èŠ‚â€ï¼‰ã€‚</p>
</li>
<li>
<p>ç”Ÿæˆåä½¿ç”¨â€œè¿­ä»£â€æˆ–â€œå˜ä½“â€åŠŸèƒ½å¾®è°ƒï¼›æ¯è½®åœ¨ prompt é‡ŒåŠ ä¸Šâ€œæ›´å¼ºçš„å…‰ç…§/æ›´é€¼çœŸçš„é˜´å½±/ä¿ç•™è„¸éƒ¨ç‰¹å¾â€ç­‰æŒ‡ç¤ºã€‚</p>
</li>
</ol>
<blockquote>
<p>å¤‡æ³¨ï¼šé€šè¿‡å®˜æ–¹ç•Œé¢é€šå¸¸èƒ½å¾—åˆ°æœ€ä½³ä¸€è‡´æ€§ä¸åˆè§„æ€§ï¼ˆå¹¶å¯èƒ½å¸¦æœ‰ä¸å¯è§çš„ SynthID æ°´å°ç”¨äºæ ‡è¯† AI ç”Ÿæˆå›¾åƒï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-14">æ–¹å¼ Bï¼šé€šè¿‡ç¬¬ä¸‰æ–¹åº”ç”¨æˆ–æ’ä»¶ï¼ˆä¾‹å¦‚ Photoshop é›†æˆï¼‰</h3>
<ul>
<li>å¦‚æœä½ æ˜¯è®¾è®¡å¸ˆï¼ŒNano-banana å·²è¢«éƒ¨åˆ†å·¥å…·æ”¯æŒä¸ºæ¨¡å‹é€‰é¡¹ï¼Œç›´æ¥åœ¨ Photoshop å†…é€‰æ‹©å¯¹åº”æ¨¡å‹å³å¯è¿›è¡Œæœ¬åœ°åŒ–å·¥ä½œæµç¼–è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-15">æ–¹å¼ Cï¼šé€šè¿‡ CLI / SDK / è‡ªå»ºå‰ç«¯ è°ƒç”¨æ¨¡å‹ API</h3>
<ul>
<li>è‹¥ä½ è¦åšæ‰¹é‡æˆ–è‡ªåŠ¨åŒ–ï¼šå¯ä½¿ç”¨å®˜æ–¹æˆ–ç¬¬ä¸‰æ–¹ç¥é©¬ä¸­è½¬APIï¼ˆå¦‚ Gemini çš„æ¨¡å‹å gemini-2-5-flash-imageï¼‰ï¼ŒæŠŠå›¾ç‰‡ä¸Šä¼ å¹¶é™„å¸¦ prompt å‘èµ·è¯·æ±‚ï¼Œæ¥æ”¶è¿”å›çš„ç¼–è¾‘ç»“æœï¼ˆbase64 / URLï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-16">æ–¹å¼ Dï¼šä½¿ç”¨ç¥é©¬ä¸­è½¬APIè°ƒç”¨Nano-bananaï¼šé…ç½®ä¸ç¤ºä¾‹</h3>
<blockquote>
<p>è¯´æ˜ï¼šå›½å†…å¸¸ç”¨çš„ã€Œä¸­è½¬ / èšåˆã€æœåŠ¡ï¼ˆä¾‹å¦‚â€œç¥é©¬ä¸­è½¬ APIï¼ˆapi.whatai.ccï¼‰ç­‰â€ï¼‰é€šå¸¸ä½œä¸ºä»£ç†ï¼ŒæŠŠä½ å¯¹ OpenAI / Gemini / å…¶å®ƒæ¨¡å‹çš„è°ƒç”¨ç»Ÿä¸€è½¬å‘å¤„ç†ã€‚ä¸‹é¢ç»™å‡ºç¥é©¬ä¸­è½¬APIå¯è§†åŒ–å’Œ<strong>æ–‡ç”Ÿå›¾ç¤ºä¾‹</strong></p>
</blockquote>
<h4 data-id="heading-17">ç¥é©¬ä¸­è½¬APIå¯è§†åŒ–æ“ä½œ</h4>
<p>ç¥é©¬ä¸­è½¬APIä¸Šæ–¹èœå•-èŠå¤©-Nano Bannerç”»å›¾-è¾“å…¥æç¤ºè¯ã€ä¸Šä¼ å‚è€ƒå›¾ã€ç”Ÿæˆä¿å­˜å›¾ç‰‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adae23fb00474961aecb03e3419a9838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODE1MDkxNjA3MjYw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763544453&amp;x-signature=38v5sPVJ4eSBDlYw0cw83e6Cai4%3D" alt="ã€Nano Bananaè¶…è¯¦ç»†ä½¿ç”¨æ•™ç¨‹ã€‘ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡ææ‡‚Gemini 2.5 Flash Imageå…¨æµç¨‹ï¼Nano-bananaæ€ä¹ˆç”¨/æç¤ºè¯/å®æˆ˜æ•™ç¨‹AIå›¾åƒç”Ÿæˆ" loading="lazy"/></p>
<h4 data-id="heading-18">Pythonæ–‡ç”Ÿå›¾ç¤ºä¾‹</h4>
<p>Dalle æ ¼å¼ä»‹ç»<br/>
Generations é€šç”¨ (å›¾ç”Ÿå›¾ &amp; æ–‡ç”Ÿå›¾)<br/>
ç”¨é€”ï¼šç”¨æ–‡å­—æˆ–æ–‡å­—+å›¾ç‰‡æ¥ç”Ÿæˆä¸€å¼ å…¨æ–°çš„å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> http.client
<span class="hljs-keyword">import</span> json

conn = http.client.HTTPSConnection(<span class="hljs-string">""</span>)
payload = json.dumps({
   <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"cat"</span>,
   <span class="hljs-string">"model"</span>: <span class="hljs-string">"nano-banana"</span>
})
headers = {
   <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer {{YOUR_API_KEY}}'</span>,
   <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
}
conn.request(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"/v1/images/generations"</span>, payload, headers)
res = conn.getresponse()
<span class="hljs-keyword">data</span> = res.read()
print(<span class="hljs-keyword">data</span>.decode(<span class="hljs-string">"utf-8"</span>))
</code></pre>
<h2 data-id="heading-19">4. å¸¸è§é—®é¢˜ä¸å¯å¤ç”¨ç­–ç•¥</h2>
<ul>
<li>
<p><strong>å¦‚ä½•ä¿æŒäººç‰©ä¸€è‡´æ€§ï¼Ÿ</strong> ä¸Šä¼ åŸå§‹å›¾å¹¶åœ¨æ¯æ¬¡è¯·æ±‚ä¸­æŠŠä¸Šä¸€æ¬¡è¾“å‡ºä¹Ÿä½œä¸ºå‚è€ƒå›¾ï¼›åœ¨ prompt ä¸­æ˜ç¡®å†™ â€œä¿æŒé¢éƒ¨ç‰¹å¾ / ä¿æŒå‘è‰² / ä¿æŒè„¸å‹â€ã€‚</p>
</li>
<li>
<p><strong>ç»“æœä¸ç†æƒ³æ€ä¹ˆåŠï¼Ÿ</strong> é€æ­¥å¾®è°ƒ promptã€ä½¿ç”¨ mask ç²¾ç¡®æ§åˆ¶ä¿®æ”¹åŒºåŸŸã€æˆ–é™ä½ç”Ÿæˆé£æ ¼å¼ºåº¦ï¼ˆå†™â€œmore photorealistic / less stylizedâ€ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é€Ÿåº¦ä¸æˆæœ¬</strong>ï¼šé€šè¿‡ä¸­è½¬å¹³å°å¯èƒ½æ›´ä¾¿å®œ/ç¨³å®šï¼Œä½†è¦ç•™æ„å»¶è¿Ÿä¸å›¾ç‰‡å¤§å°å¸¦æ¥çš„è´¹ç”¨ã€‚</p>
</li>
<li>
<p><strong>æ³•å¾‹/é“å¾·</strong>ï¼šé¿å…æœªç»æˆæƒä¿®æ”¹ä»–äººè‚–åƒä½œå•†ä¸šç”¨é€”ï¼Œæ³¨æ„éšç§ä¸è‚–åƒæƒã€‚å®˜æ–¹æ¨¡å‹/å¹³å°å¯èƒ½ä¼šå¯¹æŸäº›æ•æ„Ÿå†…å®¹è¿›è¡Œé™åˆ¶ä¸æ£€æµ‹ã€‚</p>
</li>
</ul>
<h2 data-id="heading-20">5. å¿«é€Ÿè´´å£«æ¸…å•ï¼ˆ10 æ¡ï¼‰</h2>
<ol>
<li>
<p>ç”¨çŸ­å¥åˆ†å±‚å†™ promptã€‚</p>
</li>
<li>
<p>é¦–è½®å…ˆè¦å¹¿ï¼Œåç»­å†å¾®è°ƒç»†èŠ‚ã€‚</p>
</li>
<li>
<p>ç”¨å‚è€ƒå›¾èƒœè¿‡é•¿ç¯‡é£æ ¼æè¿°ã€‚</p>
</li>
<li>
<p>ç”¨ mask ç²¾ç¡®æ”¹åŠ¨åŒºåŸŸã€‚</p>
</li>
<li>
<p>ä¿å­˜æ¯æ¬¡ prompt ä¾¿äºå¤ç°ã€‚</p>
</li>
<li>
<p>è‹¥è¦ä¸€è‡´æ€§ï¼Œæä¾›å¤šå¼ å‚è€ƒè§’åº¦çš„åŸå›¾ã€‚</p>
</li>
<li>
<p>é¿å…åœ¨ prompt ä¸­åŠ å…¥æ¨¡æ£±ä¸¤å¯çš„è¯ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ç¥é©¬ä¸­è½¬APIæ—¶å…ˆåšå°å°ºå¯¸æµ‹è¯•å†æ”¾é‡ã€‚</p>
</li>
<li>
<p>å°Šé‡è¢«æ‘„è€…æƒé™å’Œç‰ˆæƒã€‚</p>
</li>
<li>
<p>å…³æ³¨æ¨¡å‹è¾“å‡ºä¸­çš„åˆè§„ä¿¡æ¯ï¼ˆå¦‚ SynthIDï¼‰ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Qoder é™ä»·ï¼Œç«‹å³ç”Ÿæ•ˆï¼é¦–è´­ 2 ç¾é‡‘/æœˆ]]></title>    <link>https://juejin.cn/post/7571594817224196147</link>    <guid>https://juejin.cn/post/7571594817224196147</guid>    <pubDate>2025-11-12T09:53:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817224196147" data-draft-id="7571594817224179763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Qoder é™ä»·ï¼Œç«‹å³ç”Ÿæ•ˆï¼é¦–è´­ 2 ç¾é‡‘/æœˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T09:53:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LucianaiB"/> <meta itemprop="url" content="https://juejin.cn/user/1269294586664749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Qoder é™ä»·ï¼Œç«‹å³ç”Ÿæ•ˆï¼é¦–è´­ 2 ç¾é‡‘/æœˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1269294586664749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LucianaiB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:53:39.000Z" title="Wed Nov 12 2025 09:53:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Qoder å…¨çƒä¸Šçº¿ä»…ä¸¤ä¸ªæœˆï¼Œå·²è·å¾—å…¨çƒæ•°åä¸‡å¼€å‘è€…çš„ä¿¡èµ–ä¸æ”¯æŒã€‚</h2>
<p>ä¸ºäº†è®©æ¯ä¸€ä½å¼€å‘è€…éƒ½èƒ½è½»æ¾ç”¨ä¸Šé¡¶å°–çš„ AI ç¼–ç¨‹å·¥å…·ï¼ŒQoder é¢å‘å…¨çƒå¼€å‘è€…æ¨å‡ºé¦–è´­ä¼˜æƒ ï¼šç”±åŸä»· 10 ç¾å…ƒ/æœˆç›´é™è‡³ 2 ç¾å…ƒ/æœˆï¼ˆæŠ˜åˆäººæ°‘å¸çº¦14.2å…ƒï¼‰ï¼Œä¸€æ¯å’–å•¡çš„é’±ï¼Œå³å¯è§£é” Qoder å…¨éƒ¨æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´ä½“éªŒï¼
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/415b29e528ea4c6db06a590d05be4837~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763546019&amp;x-signature=MSfRWoGhDKpP6GuH57k6oVAVYsU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é™¤äº†æå…·å¸å¼•åŠ›çš„ä»·æ ¼ï¼ŒQoder åœ¨åŠŸèƒ½ä¸Šä¹Ÿå®ç°äº†å…¨é¢è¿›åŒ–ï¼š</p>
<p>é¦–å…ˆï¼ŒQoder é›†æˆäº†å…¨çƒé¡¶å°–çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¹¶æ–°ä¸Šçº¿æ¨¡å‹åˆ†çº§é€‰æ‹©å™¨ï¼Œæä¾›å››ç±»é«˜æ€§èƒ½æ¨¡å‹æ± ï¼šåŸºç¡€è½»é‡ï¼ˆLiteï¼‰ã€ç»æµé«˜æ•ˆï¼ˆEfficientï¼‰ã€æè‡´æ€§èƒ½ï¼ˆPerformanceï¼‰ä¸æ™ºèƒ½è·¯ç”±ï¼ˆAutoï¼‰ï¼Œä¸åŒä»»åŠ¡ç”±æœ€é€‚åˆçš„æ¨¡å‹æ— ç¼åˆ‡æ¢æ‰§è¡Œï¼Œå¼€å‘è€…æ— éœ€ç†è§£æ¨¡å‹å·®å¼‚ï¼Œä»è€Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…å¹¶æå‡æ•ˆç‡ã€‚</p>
<p>å…¶æ¬¡ï¼Œåœ¨ä¸Šä¸‹æ–‡å·¥ç¨‹èƒ½åŠ›æ–¹é¢ï¼ŒQoder æä¾›æœ€å¼ºçš„ä¸Šä¸‹æ–‡å·¥ç¨‹èƒ½åŠ›ï¼Œå¯ä¸€æ¬¡æ£€ç´¢ 10 ä¸‡ä¸ªä»£ç æ–‡ä»¶ï¼Œç»“åˆå…¨çƒé¡¶å°–çš„å¤§æ¨¡å‹èƒ½åŠ›ä¸ Agentï¼Œå¯¹å¤§è§„æ¨¡ä»£ç è¿›è¡Œæ·±åº¦è¯­ä¹‰æ£€ç´¢ä¸æŒç»­ä¸Šä¸‹æ–‡ç†è§£ï¼Œå°†å¤æ‚ã€å¤šé˜¶æ®µçš„å¼€å‘ä»»åŠ¡æ‹†è§£å¹¶ç”±æ™ºèƒ½ä½“è¿­ä»£å®Œæˆï¼Œä»¥â€œä»“åº“çº§ç†è§£ + ä»»åŠ¡åŒ–æ‰§è¡Œâ€æ­£é¢åº”å¯¹çœŸå®å·¥ç¨‹çš„å¤æ‚åº¦ã€‚</p>
<p>è‡ªä¸Šçº¿å¼€å§‹ï¼ŒQoder æŒç»­é€šè¿‡æŠ€æœ¯å‡çº§ï¼Œæ¯”å¦‚ï¼šå·¥ç¨‹æ£€ç´¢å‡†ç¡®ç‡æå‡ã€æ™ºèƒ½ä½“å·¥å…·å¹¶è¡ŒåŒ–ä¼˜åŒ–ã€ä¸Šä¸‹æ–‡æ™ºèƒ½å‹ç¼©ç­‰èƒ½åŠ›ï¼Œåœ¨ä¿è¯æ•ˆæœçš„å‰æä¸‹æŒç»­ä¼˜åŒ–å•ä»»åŠ¡çš„ token æ¶ˆè€—ï¼Œè®©å¼€å‘çœŸåˆ‡æ„Ÿå—åˆ° Credits è¶Šæ¥è¶Šè€ç”¨ã€‚</p>
<p>åœ¨å…¬æµ‹æœŸå¤‡å—å¼€å‘è€…å…³æ³¨çš„ Repo Wiki å’Œ Quest æ¨¡å¼ï¼Œä¹Ÿè¿æ¥äº†é‡ç£…å‡çº§ï¼š</p>
<p>Repo Wikiï¼šåŸºäºä»£ç åº“ï¼Œè‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–é¡¹ç›®æ–‡æ¡£ä¸çŸ¥è¯†åº“ï¼Œå°†ä»£ç ä¸­çš„éšæ€§ç»éªŒè½¬åŒ–ä¸ºå›¢é˜Ÿå…±äº«çš„æ˜¾æ€§çŸ¥è¯†ï¼Œæ”¯æŒå¤šäººç¼–è¾‘ã€å…±äº«ä¸å¯¼å‡ºï¼Œä»¥åŠä¸€é”®ä¿®å¤ã€‚</p>
<p>Quest æ¨¡å¼ï¼šå¯å°†å¤æ‚è€—æ—¶çš„å¼€å‘ä»»åŠ¡ä¸€é”®å§”æ´¾è‡³äº‘ç«¯æ²™ç®±å¼‚æ­¥æ‰§è¡Œï¼Œå½»åº•é‡Šæ”¾æœ¬åœ°ç®—åŠ›ã€‚åŸæœ¬éœ€æ•°å¤©å®Œæˆçš„ä»»åŠ¡ï¼Œç°åœ¨æœ€å¿«ååˆ†é’Ÿå†…äº¤ä»˜ã€‚</p>
<p>Qoder CLIï¼šå¼€ç®±å³ç”¨çš„æ™ºèƒ½ç»ˆç«¯
ä¸Šä¸ªæœˆï¼ŒQoder CLI æ­£å¼å‘å¸ƒï¼Œè®©å¼€å‘è€…é€šè¿‡è‡ªç„¶è¯­è¨€åœ¨ç»ˆç«¯å®Œæˆä»£ç ç”Ÿæˆã€è°ƒè¯•ã€éƒ¨ç½²ç­‰ä»»åŠ¡ï¼Œå®ç°éšå¤„é›†æˆï¼Œæ•ˆæœä¸æ‰“æŠ˜ã€‚
æ— éœ€å¤æ‚åˆå§‹åŒ–ï¼Œå®‰è£…å³å¯ä½¿ç”¨ï¼Œç¡®ä¿è·¨ç¯å¢ƒä¸€è‡´çš„ç¼–ç¨‹ä½“éªŒã€‚</p>
<p>å†…ç½®è½»é‡çº§ Agent æ¡†æ¶ï¼Œç©ºé—²å†…å­˜å ç”¨æ¯”åŒç±»å·¥å…·ä½ 70%ï¼Œå¸¸è§å‘½ä»¤å“åº”æ—¶é—´ &lt; 200msã€‚</p>
<p>é›†æˆ Quest æ¨¡å¼ï¼ˆè‡ªä¸»ç¼–ç¨‹ï¼‰ ä¸ CodeReview åŠŸèƒ½ï¼Œè½»æ¾å®ç°åŸºäº Spec çš„ä»»åŠ¡å§”æ´¾ï¼Œè®© AI è‡ªä¸»å®Œæˆå¼€å‘æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ead147f3b30c44ba86278a3fc47728ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVjaWFuYWlC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763546019&amp;x-signature=lAfYQq6MNPKQ51twcC6gxRepfUs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ­¤å¤–ï¼ŒQoder JetBrains æ’ä»¶ä¹Ÿå³å°†ä¸Šçº¿ï¼Œå…¨æ–¹ä½è¦†ç›–å„ç±»å¼€å‘è€…çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>ç°åœ¨ï¼ŒQoderä»¥ä¸€æ¯å’–å•¡çš„è¯šæ„ï¼Œå‘æ¯ä¸€ä½å¼€å‘è€…å‘å‡ºäº†é‚€è¯·ï¼Œè¿™æ˜¯ä¸€æ¬¡å¯¹ä¸ªäººå·¥ä½œæµçš„æ ¹æœ¬æ€§å‡çº§ä»¥åŠä¸€å¼ é€šå¾€æ›´é«˜æ•ˆç‡ã€æ›´å¤šåˆ›é€ åŠ›çš„é—¨ç¥¨ã€‚</p>
<p>è¿™åœºç”± AI Coding é©±åŠ¨çš„æ•ˆç‡é©å‘½å·²ç»åˆ°æ¥ï¼Œä½ å‡†å¤‡å¥½è§£é”å…¨æ–°å¼€å‘ä½“éªŒäº†å—ï¼Ÿ</p>
<p>ä¸‹è½½ä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fqoder.com%2Fdownload" target="_blank" title="https://qoder.com/download" ref="nofollow noopener noreferrer">qoder.com/download</a></p>
<p>FAQï¼šå…³äºé™ä»·ï¼Œä½ å¯èƒ½ä¼šå…³å¿ƒçš„é—®é¢˜ï¼š
1ã€æ–°ç”¨æˆ·é¦–è´­ 2 ç¾å…ƒ/æœˆæ˜¯é•¿æœŸçš„å—ï¼Ÿ</p>
<p>æ˜¯çš„ï¼Œæˆ‘ä»¬æœŸæœ›ä¸ºå…¨çƒå¼€å‘è€…æä¾›ä½é—¨æ§›ä¸Šæ‰‹çš„è®¢é˜…æ–¹å¼ã€‚</p>
<p>2ã€ä»€ä¹ˆæ˜¯æ–°ç”¨æˆ·ï¼Ÿ</p>
<p>æ–°ç”¨æˆ·æ˜¯æŒ‡æœªè´­ä¹°è¿‡ä»»ä½•è®¢é˜…è®¡åˆ’ã€é¦–æ¬¡è®¢é˜… Qoder Pro å¹¶æœ‰èµ„æ ¼äº«å—æŠ˜æ‰£ä»·çš„ç”¨æˆ·ã€‚</p>
<p>3ã€æ­¤å‰å‚åŠ è¿‡ Qoder å…¬æµ‹ä½†æ˜¯æ²¡æœ‰ä»˜è´¹çš„ç”¨æˆ·ï¼Œå¯ä»¥å‚ä¸å—ï¼Ÿ</p>
<p>å¯ä»¥å‚ä¸ã€‚</p>
<p>4ã€é¦–è´­ä¼˜æƒ åå¦‚ä½•ç»­è´¹ï¼Ÿ</p>
<p>æŒ‰ 10 ç¾é‡‘æ¯æœˆç»­è´¹ã€‚</p>
<p>5ã€é€€æ¬¾åè¿˜èƒ½å†æ¬¡äº«å—é¦–è´­ä¼˜æƒ å—ï¼Ÿ</p>
<p>å‘ç”Ÿè¿‡ä»˜è´¹ï¼Œå³ä½¿é€€æ¬¾ä¹Ÿä¸èƒ½å†æ¬¡äº«å—é¦–è´­ä¼˜æƒ äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä»£ç è§„èŒƒä½“ç³»å»ºè®¾ä¸å›¢é˜Ÿè½åœ°å®è·µ]]></title>    <link>https://juejin.cn/post/7571650164843479074</link>    <guid>https://juejin.cn/post/7571650164843479074</guid>    <pubDate>2025-11-12T10:02:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571650164843479074" data-draft-id="7571655979255955496" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä»£ç è§„èŒƒä½“ç³»å»ºè®¾ä¸å›¢é˜Ÿè½åœ°å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-12T10:02:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä»£ç è§„èŒƒä½“ç³»å»ºè®¾ä¸å›¢é˜Ÿè½åœ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T10:02:39.000Z" title="Wed Nov 12 2025 10:02:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å‰ç«¯ä»£ç è§„èŒƒï¼Ÿ</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œä»£ç è§„èŒƒæ˜¯å›¢é˜Ÿåä½œçš„åŸºçŸ³ã€‚éšç€é¡¹ç›®è§„æ¨¡æ‰©å¤§å’Œå›¢é˜Ÿæˆå‘˜å¢å¤šï¼Œç»Ÿä¸€çš„ä»£ç è§„èŒƒèƒ½å¤Ÿå¸¦æ¥æ˜¾è‘—çš„æ”¶ç›Šï¼š</p>
<h3 data-id="heading-1">æ ¸å¿ƒä»·å€¼</h3>
<ul>
<li>
<p><strong>æå‡ä»£ç å¯è¯»æ€§</strong>ï¼šä¸€è‡´çš„ä»£ç é£æ ¼è®©å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿå¿«é€Ÿç†è§£ä»–äººä»£ç </p>
</li>
<li>
<p><strong>é™ä½ç»´æŠ¤æˆæœ¬</strong>ï¼šè§„èŒƒçš„ä»£ç ç»“æ„ä¾¿äºåç»­ç»´æŠ¤å’ŒåŠŸèƒ½è¿­ä»£</p>
</li>
<li>
<p><strong>å‡å°‘ä½çº§é”™è¯¯</strong>ï¼šé™æ€æ£€æŸ¥å·¥å…·èƒ½å¤Ÿæ•æ‰æ½œåœ¨çš„ä»£ç é—®é¢˜</p>
</li>
<li>
<p><strong>æé«˜å¼€å‘æ•ˆç‡</strong>ï¼šè‡ªåŠ¨åŒ–çš„æ ¼å¼åŒ–å’Œæ£€æŸ¥èŠ‚çœæ‰‹åŠ¨è°ƒæ•´æ—¶é—´</p>
</li>
<li>
<p><strong>ä¿ƒè¿›å›¢é˜Ÿåä½œ</strong>ï¼šç»Ÿä¸€çš„è§„èŒƒå‡å°‘ä»£ç åˆå¹¶å†²çªå’Œæ²Ÿé€šæˆæœ¬</p>
</li>
</ul>
<h2 data-id="heading-2">äºŒã€ä»£ç è§„èŒƒè®¾è®¡ä½“ç³»</h2>
<h3 data-id="heading-3">1. åŸºç¡€ä»£ç è§„èŒƒï¼ˆæŠ€æœ¯æ ¸å¿ƒå±‚ï¼‰</h3>
<h4 data-id="heading-4">JavaScript/TypeScript è§„èŒƒ (ESLint + Prettier)</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-keyword">module</span>.exports = {
  extends: [
    <span class="hljs-string">'eslint:recommended'</span>,
    <span class="hljs-string">'plugin:@typescript-eslint/recommended'</span>,
    <span class="hljs-string">'plugin:react/recommended'</span>,
    <span class="hljs-string">'plugin:prettier/recommended'</span>
  ],
  parser: <span class="hljs-string">'@typescript-eslint/parser'</span>,
  plugins: [<span class="hljs-string">'@typescript-eslint'</span>, <span class="hljs-string">'react'</span>, <span class="hljs-string">'react-hooks'</span>],
  rules: {
    <span class="hljs-comment">// React Hooks è§„åˆ™</span>
    <span class="hljs-string">'react-hooks/rules-of-hooks'</span>: <span class="hljs-string">'error'</span>,
    <span class="hljs-string">'react-hooks/exhaustive-deps'</span>: <span class="hljs-string">'warn'</span>,
    
    <span class="hljs-comment">// ä»£ç é£æ ¼</span>
    <span class="hljs-string">'indent'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-number">2</span>],
    <span class="hljs-string">'quotes'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'single'</span>],
    <span class="hljs-string">'semi'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'always'</span>],
    
    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒé™åˆ¶</span>
    <span class="hljs-string">'no-console'</span>: process.env.NODE_ENV === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'warn'</span> : <span class="hljs-string">'off'</span>,
    <span class="hljs-string">'no-debugger'</span>: process.env.NODE_ENV === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'warn'</span> : <span class="hljs-string">'off'</span>,
    
    <span class="hljs-comment">// TypeScript è§„åˆ™</span>
    <span class="hljs-string">'@typescript-eslint/explicit-function-return-type'</span>: <span class="hljs-string">'off'</span>,
    <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: [<span class="hljs-string">'error'</span>, { 
      argsIgnorePattern: <span class="hljs-string">'^_'</span> 
    }]
  },
  settings: {
    react: {
      version: <span class="hljs-string">'detect'</span>
    }
  }
};
</code></pre>
<h4 data-id="heading-5">Prettier æ ¼å¼åŒ–é…ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"printWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"useTabs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"semi"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"all"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bracketSpacing"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"jsxSingleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"arrowParens"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"always"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"endOfLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lf"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">2. æ ·å¼è§„èŒƒï¼ˆè§†è§‰ç»Ÿä¸€å±‚ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// stylelint.config.js</span>
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  extends: [
    <span class="hljs-string">'stylelint-config-standard'</span>,
    <span class="hljs-string">'stylelint-config-recess-order'</span>,
    <span class="hljs-string">'stylelint-config-prettier'</span>
  ],
  rules: {
    <span class="hljs-string">'selector-class-pattern'</span>: <span class="hljs-string">'^[a-z][a-zA-Z0-9]*$'</span>,
    <span class="hljs-string">'no-descending-specificity'</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">'declaration-block-trailing-semicolon'</span>: <span class="hljs-string">'always'</span>
  }
};
</code></pre>
<h3 data-id="heading-7">3. é¡¹ç›®ç»“æ„è§„èŒƒï¼ˆç»„ç»‡æ¶æ„å±‚ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/          <span class="hljs-comment"># å…¬å…±ç»„ä»¶</span>
â”‚   â”œâ”€â”€ common/         <span class="hljs-comment"># é€šç”¨åŸºç¡€ç»„ä»¶</span>
â”‚   â””â”€â”€ business/       <span class="hljs-comment"># ä¸šåŠ¡ç»„ä»¶</span>
â”œâ”€â”€ pages/              <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span>
â”œâ”€â”€ hooks/              <span class="hljs-comment"># è‡ªå®šä¹‰ Hooks</span>
â”œâ”€â”€ utils/              <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”œâ”€â”€ services/           <span class="hljs-comment"># API æœåŠ¡</span>
â”œâ”€â”€ store/              <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â”œâ”€â”€ styles/             <span class="hljs-comment"># å…¨å±€æ ·å¼</span>
â”œâ”€â”€ types/              <span class="hljs-comment"># ç±»å‹å®šä¹‰</span>
â””â”€â”€ assets/             <span class="hljs-comment"># é™æ€èµ„æº</span>
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€è§„èŒƒå®æ–½æŠ€æœ¯æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">1. Git Hooks è‡ªåŠ¨åŒ–å®ˆæŠ¤</h3>
<h4 data-id="heading-10">ä¾èµ–å®‰è£…</h4>
<pre><code class="hljs language-css" lang="css">npm install husky lint-staged <span class="hljs-attr">--save-dev</span>
</code></pre>
<h4 data-id="heading-11">package.json é…ç½®</h4>
<pre><code class="hljs language-sql" lang="sql">{
  "scripts": {
    "prepare": "husky install",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "lint:fix": "eslint . --ext .js,.jsx,.ts,.tsx --fix",
    "format": "prettier --write \"src<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.{js,jsx,ts,tsx,json,css,scss,md}\"",
    "type-check": "tsc --noEmit"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write",
      "git add"
    ],
    "*.{json,css,scss,md}": [
      "prettier --write",
      "git add"
    ]
  }
}
</code></pre>
<h4 data-id="heading-12">Commit Message è§„èŒƒ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// commitlint.config.js</span>
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  extends: [<span class="hljs-string">'@commitlint/config-conventional'</span>],
  rules: {
    <span class="hljs-string">'type-enum'</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">'always'</span>,
      [<span class="hljs-string">'feat'</span>, <span class="hljs-string">'fix'</span>, <span class="hljs-string">'docs'</span>, <span class="hljs-string">'style'</span>, <span class="hljs-string">'refactor'</span>, <span class="hljs-string">'perf'</span>, <span class="hljs-string">'test'</span>, <span class="hljs-string">'chore'</span>, <span class="hljs-string">'revert'</span>]
    ],
    <span class="hljs-string">'subject-case'</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">'always'</span>, <span class="hljs-string">'sentence-case'</span>]
  }
};
</code></pre>
<h3 data-id="heading-13">2. ç¼–è¾‘å™¨ç»Ÿä¸€é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># .editorconfig</span>
<span class="hljs-attr">root</span> = <span class="hljs-literal">true</span>

<span class="hljs-section">[*]</span>
<span class="hljs-attr">charset</span> = utf-<span class="hljs-number">8</span>
<span class="hljs-attr">indent_style</span> = space
<span class="hljs-attr">indent_size</span> = <span class="hljs-number">2</span>
<span class="hljs-attr">end_of_line</span> = lf
<span class="hljs-attr">insert_final_newline</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">trim_trailing_whitespace</span> = <span class="hljs-literal">true</span>

<span class="hljs-section">[*.md]</span>
<span class="hljs-attr">trim_trailing_whitespace</span> = <span class="hljs-literal">false</span>
</code></pre>
<h2 data-id="heading-14">å››ã€å›¢é˜Ÿåä½œä¸è§„èŒƒè½åœ°ç­–ç•¥</h2>
<h3 data-id="heading-15">1. è§„èŒƒæ–‡æ¡£åŒ–ä½“ç³»</h3>
<p>åˆ›å»º <code>CODEGUIDE.md</code> æ–‡æ¡£ï¼ŒåŒ…å«ï¼š</p>
<h4 data-id="heading-16">ğŸ“‹ æ ¸å¿ƒåŸåˆ™</h4>
<ul>
<li>
<p><strong>ä¸€è‡´æ€§</strong>ï¼šå›¢é˜Ÿä»£ç é£æ ¼ç»Ÿä¸€</p>
</li>
<li>
<p><strong>å¯è¯»æ€§</strong>ï¼šä»£ç æ¸…æ™°æ˜“æ‡‚</p>
</li>
<li>
<p><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šä¾¿äºåç»­ä¿®æ”¹æ‰©å±•</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§</strong>ï¼šé¿å…å¸¸è§å®‰å…¨é—®é¢˜</p>
</li>
</ul>
<h4 data-id="heading-17">ğŸ’» ä»£ç é£æ ¼è§„èŒƒ</h4>
<p><strong>JavaScript/TypeScript</strong></p>
<ul>
<li>
<p>ç¼©è¿›ï¼š2ä¸ªç©ºæ ¼</p>
</li>
<li>
<p>å¼•å·ï¼šä¼˜å…ˆå•å¼•å·</p>
</li>
<li>
<p>åˆ†å·ï¼šè¯­å¥ç»“å°¾å¿…é¡»</p>
</li>
<li>
<p>å‘½åï¼š</p>
<ul>
<li>
<p>å˜é‡/å‡½æ•°ï¼šcamelCase</p>
</li>
<li>
<p>å¸¸é‡ï¼šUPPER_SNAKE_CASE</p>
</li>
<li>
<p>ç»„ä»¶ï¼šPascalCase</p>
</li>
</ul>
</li>
</ul>
<p><strong>React ç»„ä»¶è§„èŒƒ</strong></p>
<ul>
<li>
<p>æ–‡ä»¶ç»„ç»‡ï¼šä¸€ä¸ªç»„ä»¶ä¸€ä¸ªæ–‡ä»¶</p>
</li>
<li>
<p>Props å‘½åï¼šè¯­ä¹‰åŒ–ï¼Œé¿å…ç¼©å†™</p>
</li>
<li>
<p>State ç®¡ç†ï¼šåˆç†ä½¿ç”¨ useState/useReducer</p>
</li>
<li>
<p>å‰¯ä½œç”¨ï¼šä½¿ç”¨ useEffect ç®¡ç†</p>
</li>
</ul>
<h4 data-id="heading-18">ğŸ“¦ é¡¹ç›®ç»“æ„æ ‡å‡†</h4>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/ <span class="hljs-comment"># ç»„ä»¶ç›®å½•</span>
â”œâ”€â”€ pages/      <span class="hljs-comment"># é¡µé¢ç›®å½•  </span>
â”œâ”€â”€ hooks/      <span class="hljs-comment"># è‡ªå®šä¹‰ Hooks</span>
â”œâ”€â”€ utils/      <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â””â”€â”€ ...
</code></pre>
<h4 data-id="heading-19">ğŸ¤ Git æäº¤è§„èŒƒ</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>): <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
</code></pre>
<p><strong>æäº¤ç±»å‹è¯´æ˜ï¼š</strong></p>
<ul>
<li>
<p><code>feat</code>: æ–°åŠŸèƒ½</p>
</li>
<li>
<p><code>fix</code>: ä¿®å¤bug</p>
</li>
<li>
<p><code>docs</code>: æ–‡æ¡£æ›´æ–°</p>
</li>
<li>
<p><code>style</code>: ä»£ç æ ¼å¼è°ƒæ•´</p>
</li>
<li>
<p><code>refactor</code>: ä»£ç é‡æ„</p>
</li>
<li>
<p><code>perf</code>: æ€§èƒ½ä¼˜åŒ–</p>
</li>
<li>
<p><code>test</code>: æµ‹è¯•ç›¸å…³</p>
</li>
<li>
<p><code>chore</code>: æ„å»ºå·¥å…·å˜åŠ¨</p>
</li>
</ul>
<h3 data-id="heading-20">2. æ–°æˆå‘˜å…¥èŒå¼•å¯¼</h3>
<h4 data-id="heading-21">ç¯å¢ƒé…ç½®æ¸…å•</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. åŸºç¡€ç¯å¢ƒ</span>
- <span class="hljs-section">[ ]</span> Node.js (æŒ‡å®šç‰ˆæœ¬)
- <span class="hljs-section">[ ]</span> åŒ…ç®¡ç†å™¨ (npm/yarn/pnpm)

<span class="hljs-comment"># 2. é¡¹ç›®åˆå§‹åŒ–  </span>
- <span class="hljs-section">[ ]</span> git clone &lt;é¡¹ç›®åœ°å€&gt;
- <span class="hljs-section">[ ]</span> cd &lt;é¡¹ç›®ç›®å½•&gt;
- <span class="hljs-section">[ ]</span> npm install

<span class="hljs-comment"># 3. å¼€å‘ç¯å¢ƒè®¾ç½®</span>
- <span class="hljs-section">[ ]</span> npm run setup
- <span class="hljs-section">[ ]</span> é…ç½® IDE æ’ä»¶
</code></pre>
<h4 data-id="heading-22">è§„èŒƒåŸ¹è®­é‡ç‚¹</h4>
<ul>
<li>
<p>ä»£ç æäº¤æµç¨‹</p>
</li>
<li>
<p>ä»£ç å®¡æŸ¥æ ‡å‡†</p>
</li>
<li>
<p>ä¾‹å¤–å¤„ç†æœºåˆ¶</p>
</li>
</ul>
<h2 data-id="heading-23">äº”ã€é¢è¯•å›ç­”ç­–ç•¥</h2>
<h3 data-id="heading-24">é—®é¢˜1ï¼šå¦‚ä½•è®¾è®¡å‰ç«¯ä»£ç è§„èŒƒï¼Ÿ</h3>
<p><strong>ä¸“ä¸šå›ç­”ï¼š</strong></p>
<blockquote>
<p>"æˆ‘è®¾è®¡å‰ç«¯ä»£ç è§„èŒƒæ—¶é‡‡ç”¨åˆ†å±‚æ¶æ„æ€ç»´ï¼Œä»æŠ€æœ¯å®ç°åˆ°å›¢é˜Ÿæ–‡åŒ–å…¨æ–¹ä½è€ƒè™‘ï¼š</p>
</blockquote>
<p><strong>ç¬¬ä¸€å±‚ï¼šåŸºç¡€ä»£ç è§„èŒƒ</strong></p>
<ul>
<li>
<p>ä»£ç é£æ ¼ï¼šESLint + Prettier ç»Ÿä¸€æ ¼å¼</p>
</li>
<li>
<p>æœ€ä½³å®è·µï¼šç»„ä»¶è®¾è®¡åŸåˆ™ã€çŠ¶æ€ç®¡ç†è§„èŒƒ</p>
</li>
<li>
<p>è´¨é‡ä¿éšœï¼šTypeScript ç±»å‹æ£€æŸ¥ã€å•å…ƒæµ‹è¯•</p>
</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šå·¥å…·é“¾é…ç½®</strong></p>
<ul>
<li>
<p>é™æ€åˆ†æï¼šESLint æ£€æŸ¥ä»£ç è´¨é‡</p>
</li>
<li>
<p>æ ¼å¼åŒ–ï¼šPrettier è‡ªåŠ¨æ ¼å¼åŒ–</p>
</li>
<li>
<p>æäº¤è§„èŒƒï¼šCommitlint å¼ºåˆ¶è§„èŒƒæäº¤</p>
</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ï¼šæ‰§è¡Œæœºåˆ¶</strong></p>
<ul>
<li>
<p>Git Hooksï¼šHusky + lint-staged è‡ªåŠ¨åŒ–æ£€æŸ¥</p>
</li>
<li>
<p>CI/CD é›†æˆï¼šæµæ°´çº¿ä»£ç è´¨é‡é—¨ç¦</p>
</li>
<li>
<p>æ–‡æ¡£åŒ–ï¼šè¯¦ç»†çš„æŒ‡å—å’Œç¤ºä¾‹ä»£ç </p>
</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li>
<p>æ¸è¿›å¼ï¼šæ–°é¡¹ç›®ä¸¥æ ¼ï¼Œè€é¡¹ç›®é€æ­¥å¼•å…¥</p>
</li>
<li>
<p>è‡ªåŠ¨åŒ–ï¼šå·¥å…·è‡ªåŠ¨æ£€æŸ¥å’Œä¿®å¤</p>
</li>
<li>
<p>å¯é…ç½®ï¼šåˆç†çš„ä¾‹å¤–å¤„ç†æœºåˆ¶</p>
</li>
<li>
<p>å›¢é˜Ÿå‚ä¸ï¼šå…±åŒåˆ¶å®šæé«˜æ¥å—åº¦"</p>
</li>
</ul>
<h3 data-id="heading-25">é—®é¢˜2ï¼šå¦‚ä½•ç¡®ä¿å›¢é˜Ÿæˆå‘˜éµå®ˆä»£ç è§„èŒƒï¼Ÿ</h3>
<p><strong>ä¸“ä¸šå›ç­”ï¼š</strong></p>
<blockquote>
<p>"ç¡®ä¿è§„èŒƒæ‰§è¡Œéœ€è¦æŠ€æœ¯æ‰‹æ®µå’Œç®¡ç†ç­–ç•¥ç»“åˆï¼š</p>
</blockquote>
<p><strong>æŠ€æœ¯å±‚ - è‡ªåŠ¨åŒ–å¼ºåˆ¶</strong></p>
<ul>
<li>
<p>Git Hooks å®ˆæŠ¤ï¼špre-commit è‡ªåŠ¨ä¿®å¤ï¼Œpre-push å…¨é‡æ£€æŸ¥</p>
</li>
<li>
<p>æäº¤ä¿¡æ¯è§„èŒƒï¼šcommitlint ç¡®ä¿ç¬¦åˆçº¦å®šå¼æäº¤</p>
</li>
<li>
<p>IDE å®æ—¶æç¤ºï¼šå¼€å‘æ—¶å®æ—¶å‘ç°é—®é¢˜</p>
</li>
</ul>
<p><strong>æµç¨‹å±‚ - åˆ¶åº¦ä¿éšœ</strong></p>
<ul>
<li>
<p>ä»£ç å®¡æŸ¥ï¼šè§„èŒƒéµå®ˆä½œä¸º PR å¿…è¦å®¡æŸ¥é¡¹</p>
</li>
<li>
<p>CI/CD æ£€æŸ¥ï¼šæµæ°´çº¿è®¾ç½®è´¨é‡é—¨ç¦</p>
</li>
</ul>
<p><strong>ç®¡ç†å±‚ - æ–‡åŒ–å»ºè®¾</strong></p>
<ul>
<li>
<p>æ–°äººå¼•å¯¼ï¼šä¸“é—¨çš„è§„èŒƒåŸ¹è®­</p>
</li>
<li>
<p>å®šæœŸå›é¡¾ï¼šè®¨è®ºæ‰§è¡Œæƒ…å†µå’Œæ”¹è¿›å»ºè®®</p>
</li>
<li>
<p>è§„èŒƒè¿›åŒ–ï¼šæ ¹æ®åé¦ˆé€‚æ—¶è°ƒæ•´</p>
</li>
</ul>
<p><strong>å…³é”®æŠ€æœ¯å®ç°ï¼š</strong></p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"*.{js,jsx,ts,tsx}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"eslint --fix"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"prettier --write"</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-string">"git add"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é€šè¿‡è¿™ç§å¤šå±‚æ¬¡ä½“ç³»ï¼Œæ—¢ä¿è¯è§„èŒƒæ‰§è¡Œï¼Œåˆä¸å½±å“å¼€å‘æ•ˆç‡ï¼Œæœ€ç»ˆå½¢æˆå›¢é˜Ÿè‡ªå‘çš„è§„èŒƒæ„è¯†ã€‚"</p>
<h3 data-id="heading-26">é—®é¢˜3ï¼šé‡åˆ°å›¢é˜Ÿæˆå‘˜ä¸éµå®ˆè§„èŒƒæ€ä¹ˆåŠï¼Ÿ</h3>
<p><strong>åº”å¯¹ç­–ç•¥ï¼š</strong></p>
<blockquote>
<p>"é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘é‡‡å–å¾ªåºæ¸è¿›çš„ç­–ç•¥ï¼š</p>
</blockquote>
<p><strong>1. ç†è§£åŸå› </strong></p>
<ul>
<li>
<p>ç§ä¸‹äº†è§£å…·ä½“åŸå› </p>
</li>
<li>
<p>åŒºåˆ†æ˜¯å·¥å…·ä½¿ç”¨é—®é¢˜è¿˜æ˜¯è§„èŒƒç†è§£é—®é¢˜</p>
</li>
</ul>
<p><strong>2. æŠ€æœ¯è¾…åŠ©</strong></p>
<ul>
<li>
<p>æä¾›è¯¦ç»†å·¥å…·ä½¿ç”¨æŒ‡å—</p>
</li>
<li>
<p>å¸®åŠ©é…ç½®å¼€å‘ç¯å¢ƒ</p>
</li>
<li>
<p>å¯¹å¤æ‚è§„èŒƒæä¾›å…·ä½“ç¤ºä¾‹</p>
</li>
</ul>
<p><strong>3. æ¸è¿›å¼è¦æ±‚</strong></p>
<ul>
<li>
<p>å†å²ä»£ç ï¼šæ–°ä¿®æ”¹éƒ¨åˆ†éµå®ˆè§„èŒƒ</p>
</li>
<li>
<p>ç‰¹æ®Šæƒ…å†µï¼šCode Review è®¨è®ºåæœ‰æ¡ä»¶è±å…</p>
</li>
</ul>
<p><strong>4. æ­£å‘æ¿€åŠ±</strong></p>
<ul>
<li>
<p>ä»£ç å®¡æŸ¥ä¸­ç»™äºˆæ­£é¢åé¦ˆ</p>
</li>
<li>
<p>å°†è§„èŒƒéµå®ˆä½œä¸ºèƒ½åŠ›è¯„ä¼°å‚è€ƒ</p>
</li>
<li>
<p>åˆ†äº«è§„èŒƒå¸¦æ¥çš„å®é™…æ”¶ç›Šæ¡ˆä¾‹</p>
</li>
</ul>
<p><strong>5. åˆ¶åº¦ä¿éšœ</strong></p>
<ul>
<li>
<p>é€šè¿‡ä»£ç å®¡æŸ¥æµç¨‹å¼ºåˆ¶è¦æ±‚</p>
</li>
<li>
<p>ä½œä¸ºå›¢é˜Ÿåä½œåŸºæœ¬è¦æ±‚å¼ºè°ƒ</p>
</li>
</ul>
<p><strong>å…³é”®ç‚¹ï¼š</strong> è§„èŒƒçš„ç›®çš„æ˜¯æé«˜å›¢é˜Ÿæ•ˆç‡ï¼Œä¸æ˜¯æƒ©ç½šã€‚é€šè¿‡ç†è§£ã€å¼•å¯¼ã€æ”¯æŒï¼Œå¸®åŠ©å›¢é˜Ÿæˆå‘˜ä»è¢«åŠ¨éµå®ˆè½¬å˜ä¸ºä¸»åŠ¨è®¤åŒã€‚"</p>
<p>é€šè¿‡è¿™å¥—å®Œæ•´çš„ä»£ç è§„èŒƒä½“ç³»ï¼Œå›¢é˜Ÿå¯ä»¥å»ºç«‹ç»Ÿä¸€çš„å¼€å‘æ ‡å‡†ï¼Œæå‡ä»£ç è´¨é‡å’Œåä½œæ•ˆç‡ï¼Œä¸ºé¡¹ç›®çš„é•¿æœŸå¥åº·å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite åº“æ¨¡å¼è¾“å‡º ESM æ ¼å¼æ—¶çš„ä¾èµ–å¤„ç†æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7571594817224146995</link>    <guid>https://juejin.cn/post/7571594817224146995</guid>    <pubDate>2025-11-12T09:50:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571594817224146995" data-draft-id="7571594817224130611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite åº“æ¨¡å¼è¾“å‡º ESM æ ¼å¼æ—¶çš„ä¾èµ–å¤„ç†æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vite"/> <meta itemprop="datePublished" content="2025-11-12T09:50:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·7405463994309"/> <meta itemprop="url" content="https://juejin.cn/user/2828394730381693"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite åº“æ¨¡å¼è¾“å‡º ESM æ ¼å¼æ—¶çš„ä¾èµ–å¤„ç†æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2828394730381693/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·7405463994309
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T09:50:00.000Z" title="Wed Nov 12 2025 09:50:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§© ç¯å¢ƒä¿¡æ¯</h2>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5.4.15"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.7.16"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-1">ğŸ“– èƒŒæ™¯è¯´æ˜</h2>
<p>å½“å‰é¡¹ç›®æ˜¯ä¸€ä¸ª<strong>å‰ç«¯æ¡†æ¶å‹å®¿ä¸»é¡¹ç›®</strong>ï¼Œä¸»è¦è´Ÿè´£ï¼š</p>
<ul>
<li>
<p>ç®¡ç†åŠŸèƒ½èœå•ä¸ç”¨æˆ·æ¨¡å—ï¼›</p>
</li>
<li>
<p>é€šè¿‡ <code>iframe</code> åµŒå…¥å¤šä¸ª<strong>å­å‰ç«¯é¡¹ç›®</strong>ï¼›</p>
</li>
<li>
<p>åœ¨â€œå·¥ä½œå°â€é¡µé¢ä¸­åŠ¨æ€åŠ è½½æ¥è‡ªå…¶ä»–å‰ç«¯é¡¹ç›®çš„<strong>å°ç»„ä»¶ï¼ˆWidgetï¼‰</strong>ã€‚</p>
</li>
</ul>
<p>ä¸ºäº†ä¾¿äºè¿™äº›å°ç»„ä»¶çš„åŠ¨æ€åŠ è½½ä¸å¤ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <strong>Vite çš„åº“æ¨¡å¼ï¼ˆLibrary Modeï¼‰</strong> æ¥è¿›è¡Œæ‰“åŒ…ã€‚</p>
<hr/>
<h2 data-id="heading-2">âš™ï¸ åˆå§‹é…ç½®</h2>
<p>æœ€æ—©çš„ <code>widget.vite.config.js</code> å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">return</span> {
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">lib</span>: {
      <span class="hljs-attr">entry</span>: {
        <span class="hljs-attr">customReport</span>: <span class="hljs-string">'widgets/custom_report/index.js'</span>
      },
      <span class="hljs-attr">fileName</span>: <span class="hljs-function">(<span class="hljs-params">_, entryName</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${entryName}</span>.js`</span>,
      <span class="hljs-attr">formats</span>: [<span class="hljs-string">'es'</span>]
    },
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'js/[name]-[hash].js'</span>,
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'[name].[ext]'</span>,
        <span class="hljs-attr">manualChunks</span>: <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'node_modules'</span>)) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> chunk <span class="hljs-keyword">of</span> chunks) {
              <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`node_modules/<span class="hljs-subst">${chunk}</span>`</span>)) <span class="hljs-keyword">return</span> chunk
            }
          }
        }
      }
    }
  }
}
</code></pre>
<p>èµ·åˆå¹¶æ²¡æœ‰å°† <code>vue</code> ä»æ‰“åŒ…ä¸­æ’é™¤ï¼Œå› ä¸º<strong>çœ‹ä¼¼ä¸€åˆ‡æ­£å¸¸</strong>ï¼Œç›´åˆ°åæ¥å‡ºç°äº†ä¸¥é‡é—®é¢˜ğŸ‘‡</p>
<hr/>
<h2 data-id="heading-3">ğŸ’¥ é—®é¢˜åˆ†æï¼šVue å¤šå®ä¾‹å¯¼è‡´æ¸²æŸ“æ­»å¾ªç¯</h2>
<p>åœ¨æŸä¸ªå°ç»„ä»¶ä¸­ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶æ¸²æŸ“ <code>VNode</code> æ•°ç»„æ—¶ï¼Œé¡µé¢å‘ç”Ÿ<strong>æ­»å¾ªç¯æ¸²æŸ“</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;VNode :data="bottomInst" /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  components: {
    VNode: {
      functional: true,
      render: (h, ctx) =&gt;
        isFunction(ctx.props.data) ? ctx.props.data() : ctx.props.data
    }
  }
}
&lt;/script&gt;
</code></pre>
<ul>
<li>
<p>é¡µé¢ä¼šä¸æ–­è§¦å‘ <code>render()</code>ï¼Œå¯¼è‡´æµè§ˆå™¨å¡æ­»ã€‚</p>
</li>
<li>
<p>åç»­æµ‹è¯•å‘ç°æ˜¯å› ä¸º<strong>å®¿ä¸»é¡¹ç›®ä¸å­ç»„ä»¶ä¸­ä½¿ç”¨çš„ Vue å®ä¾‹ä¸ä¸€è‡´</strong>ã€‚</p>
</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œå°ç»„ä»¶è‡ªå·±åˆæ‰“åŒ…è¿›äº†ä¸€ä»½ <code>vue</code>ï¼Œä¸å®¿ä¸»é¡¹ç›®çš„ Vue å®ä¾‹â€œå†²çªâ€äº†ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸ§  å›åˆ°æ ¹æºï¼šVue å¤–éƒ¨åŒ–é—®é¢˜</h2>
<p>Vite å®˜æ–¹æ–‡æ¡£æ˜ç¡®å»ºè®®ï¼š</p>
<blockquote>
<p>å½“ä½ çš„åº“è¦è¢«å®¿ä¸»é¡¹ç›®å¼•ç”¨æ—¶ï¼Œåº”ä½¿ç”¨ <code>build.lib</code> å¹¶<strong>å¤–éƒ¨åŒ–å¤„ç†ä¾èµ–</strong>ï¼Œä¾‹å¦‚ <code>vue</code> æˆ– <code>react</code>ã€‚</p>
</blockquote>
<p>å®˜æ–¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">lib</span>: {
      <span class="hljs-attr">entry</span>: {
        <span class="hljs-string">'my-lib'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'lib/main.js'</span>),
        <span class="hljs-attr">secondary</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'lib/secondary.js'</span>)
      },
      <span class="hljs-attr">name</span>: <span class="hljs-string">'MyLib'</span>
    },
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">external</span>: [<span class="hljs-string">'vue'</span>],
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">globals</span>: {
          <span class="hljs-attr">vue</span>: <span class="hljs-string">'Vue'</span>
        }
      }
    }
  }
})
</code></pre>
<hr/>
<h2 data-id="heading-5">âš ï¸ å®é™…é‡åˆ°çš„é—®é¢˜</h2>
<p>å½“é…ç½®ä¸º<strong>å¤šå…¥å£</strong>æ—¶ï¼š</p>
<ul>
<li>
<p>é»˜è®¤æ‰“åŒ…æ ¼å¼ä¼šå˜ä¸º <code>['es', 'cjs']</code>ï¼›</p>
</li>
<li>
<p>å¦‚æœå¼ºåˆ¶è®¾ç½® <code>formats: ['umd']</code>ï¼ŒRollup ä¼šæŠ¥é”™ï¼›</p>
</li>
<li>
<p>è€Œåœ¨ <strong>ESM æ¨¡å¼ä¸‹</strong>ï¼Œ<code>globals</code> é…ç½®ä¸ä¼šç”Ÿæ•ˆï¼ˆå³ä¸ä¼šè½¬æˆå…¨å±€å˜é‡è®¿é—®ï¼‰ã€‚</p>
</li>
</ul>
<p>å› æ­¤ï¼Œå½“å¤–éƒ¨åŒ– <code>vue</code> åï¼Œä»£ç ä»ç„¶ä¿ç•™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
</code></pre>
<p>æµè§ˆå™¨åœ¨æ‰§è¡Œæ—¶ä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Uncaught</span> <span class="hljs-title class_">TypeError</span>: <span class="hljs-title class_">Failed</span> to resolve <span class="hljs-variable language_">module</span> specifier <span class="hljs-string">"vue"</span>.
</code></pre>
<p>å› ä¸ºæµè§ˆå™¨æ ¹æœ¬ä¸çŸ¥é“ <code>"vue"</code> è¿™ä¸ªå¯¼å…¥è·¯å¾„åº”è¯¥ä»å“ªé‡ŒåŠ è½½ã€‚</p>
<hr/>
<h2 data-id="heading-6">âœ… æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-7">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ HTML Import Mapï¼ˆæ¨èï¼Œå‰ææ˜¯å®¿ä¸»ç¯å¢ƒæ”¯æŒï¼‰</h3>
<p>å¦‚æœä¸éœ€è¦å…¼å®¹ Chrome 89 ä»¥ä¸‹ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å®¿ä¸»é¡¹ç›®çš„ HTML ä¸­å£°æ˜ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
{
  <span class="hljs-string">"imports"</span>: {
    <span class="hljs-string">"vue"</span>: <span class="hljs-string">"https://example.com/vue.js"</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™æ ·æµè§ˆå™¨åœ¨è§£æåˆ°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
</code></pre>
<p>æ—¶ï¼Œä¼šè‡ªåŠ¨ä» <code>/vue.js</code> åŠ è½½ï¼Œè€Œä¸æ˜¯å»æ‰¾ <code>node_modules</code>ã€‚</p>
<p>âœ… ä¼˜ç‚¹ï¼š</p>
<ul>
<li>
<p>ç¬¦åˆåŸç”Ÿ ES Module æœºåˆ¶ï¼›</p>
</li>
<li>
<p>é€‚åˆç°ä»£æµè§ˆå™¨ï¼›</p>
</li>
<li>
<p>ç®€æ´ç›´è§‚ã€‚</p>
</li>
</ul>
<p>âŒ ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>Chrome 89 ä»¥ä¸‹ï¼ˆå« IEï¼‰ä¸æ”¯æŒ <code>importmap</code>ï¼›</p>
</li>
<li>
<p>éœ€è¦åœ¨å®¿ä¸» HTML ä¸­ç»´æŠ¤æ˜ å°„ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-8">æ–¹æ³•äºŒï¼šä½¿ç”¨ Rollup çš„ <code>output.paths</code> é…ç½®</h3>
<p>å¦‚æœä½ å¸Œæœ›åœ¨æ„å»ºé˜¶æ®µå°±å°†è·¯å¾„è½¬æ¢æˆä¸€ä¸ªå¯è®¿é—®çš„ URLï¼Œå¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">return</span> {
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">lib</span>: {
      <span class="hljs-attr">entry</span>: {
        <span class="hljs-attr">customReport</span>: <span class="hljs-string">'widgets/custom_report/index.js'</span>
      },
      <span class="hljs-attr">fileName</span>: <span class="hljs-function">(<span class="hljs-params">_, entryName</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${entryName}</span>.js`</span>,
      <span class="hljs-attr">formats</span>: [<span class="hljs-string">'es'</span>]
    },
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">external</span>: [<span class="hljs-string">'vue'</span>],
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">paths</span>: {
          <span class="hljs-attr">vue</span>: <span class="hljs-string">'/dist/assets/vue.js'</span>
        }
      }
    }
  }
}
</code></pre>
<p>æ‰“åŒ…åï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âœ… è‡ªåŠ¨æ›¿æ¢æˆå¯è®¿é—®è·¯å¾„</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'/dist/assets/vue.js'</span>
</code></pre>
<p>å®¿ä¸»é¡¹ç›®åªéœ€ç¡®ä¿ <code>/dist/assets/vue.js</code> å­˜åœ¨ï¼ˆå³å®¿ä¸»ä¸å­é¡¹ç›®å…±äº«åŒä¸€ä»½ Vue æ–‡ä»¶ï¼‰ã€‚</p>
<p>âœ… ä¼˜ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¸ä¾èµ– importmapï¼›</p>
</li>
<li>
<p>å¯æ§åˆ¶ç²¾ç¡®è·¯å¾„ï¼›</p>
</li>
<li>
<p>æµè§ˆå™¨ 100% å¯è¯†åˆ«ã€‚</p>
</li>
</ul>
<p>âŒ ç¼ºç‚¹ï¼š</p>
<ul>
<li>
<p>å®¿ä¸»é¡¹ç›®éœ€è¦åœ¨ç›¸åŒè·¯å¾„ä¸‹æä¾›è¯¥æ–‡ä»¶ï¼›</p>
</li>
<li>
<p>ä¸€æ—¦è·¯å¾„å˜æ›´ï¼Œéœ€è¦åŒæ­¥æ›´æ–°ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ§¾ æ€»ç»“å¯¹æ¯”</h2>


























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å…³é”®é…ç½®</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ–¹æ³•ä¸€</strong> ImportMap</td><td><code>&lt;script type="importmap"&gt;</code></td><td>åŸç”Ÿ ESM æ”¯æŒã€é…ç½®ç®€å•</td><td>æµè§ˆå™¨å…¼å®¹æ€§è¦æ±‚é«˜</td><td>ç°ä»£æµè§ˆå™¨ç¯å¢ƒ</td></tr><tr><td><strong>æ–¹æ³•äºŒ</strong> Rollup paths</td><td><code>rollupOptions.output.paths</code></td><td>æ— éœ€ importmapï¼Œæ„å»ºæœŸè§£å†³</td><td>è·¯å¾„éœ€å®¿ä¸»ä¸€è‡´</td><td>è‡ªå®šä¹‰éƒ¨ç½²ç»“æ„ã€å¤šç‰ˆæœ¬ç¯å¢ƒ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">ğŸš€ å®è·µå»ºè®®</h2>
<ol>
<li>
<p><strong>ç»Ÿä¸€å®¿ä¸»ä¸å­é¡¹ç›®çš„ Vue å®ä¾‹æ¥æº</strong>ã€‚<br/>
â†’ ä¸è¦åœ¨å­ç»„ä»¶ä¸­é‡å¤æ‰“åŒ… <code>vue</code>ã€‚</p>
</li>
<li>
<p><strong>æ‰“åŒ…æ—¶å¤–éƒ¨åŒ– Vue</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">external</span>: [<span class="hljs-string">'vue'</span>]
</code></pre>
</li>
<li>
<p><strong>æ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§é€‰æ‹©æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p>æ”¯æŒç°ä»£æµè§ˆå™¨ â†’ âœ… ImportMapï¼›</p>
</li>
<li>
<p>éœ€è¦å…¼å®¹æ—§ç¯å¢ƒ â†’ âœ… Rollup <code>paths</code>ã€‚</p>
</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>