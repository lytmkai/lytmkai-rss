<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ç¦»èŒä¸‰ä¸ªæœˆå]]></title>    <link>https://juejin.cn/post/7576181242582859839</link>    <guid>https://juejin.cn/post/7576181242582859839</guid>    <pubDate>2025-11-25T03:04:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582859839" data-draft-id="7576210031872704553" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¦»èŒä¸‰ä¸ªæœˆå"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T03:04:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¦»èŒä¸‰ä¸ªæœˆå
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:04:13.000Z" title="Tue Nov 25 2025 03:04:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªä¹‹å‰å†™çš„ <a href="https://juejin.cn/post/7450047052804161576" target="_blank" title="https://juejin.cn/post/7450047052804161576">æˆ‘è¿™ğŸ¤¡èˆ¬çš„7å¹´å¼€å‘ç”Ÿæ¶¯</a> åï¼Œç—›è‹¦å¤§åŠå¹´ï¼Œåœ¨ä»Šå¹´ 8 æœˆåº•ç¦»èŒäº†ï¼Œè·ä»Šå·²æœ‰ 3 ä¸ªæœˆã€‚</p>
<p>å½“æ—¶æˆ‘å’Œè€æ¿è¯´æ‰¿å—ä¸äº†ï¼Œæƒ³é€€å±…äºŒçº¿ï¼Œä¹‹åçš„æŸä¸€å¤©ï¼ŒHR æ‰¾æˆ‘è°ˆè¯ï¼Œç­¾äº†ç¦»èŒåè®®å°±èµ°äººäº†ã€‚</p>
<p>åˆšç¦»èŒå½“ç„¶æ˜¯å–œæ‚¦å’Œæƒ¬æ„çš„ï¼Œæ¯å¤©å°±å‡ºå»æ™’æ™’å¤ªé˜³å¹å¹é£éƒ½æ„Ÿè§‰å¾ˆå¥½ã€‚ä¸ç”¨æå¿ƒåŠèƒ†çš„å®ˆåœ¨æ‰‹æœºæ—è¾¹ï¼Œä¸ç”¨ç²¾ç¥ä¸€ç›´ç´§ç»·ã€‚</p>
<p>æˆ‘å»åŠç†çš„å¤±ä¸šé‡‘é¢†å–ï¼Œæ­¦æ±‰è¿™è¾¹æ¯”è¾ƒå¥½åŠï¼Œçº¿ä¸Šä¹Ÿå¯ä»¥åŠï¼Œé¢†å–çš„æœˆä»½æ˜¯ 2N + 1ï¼Œæˆ‘è¿ç»­å·¥ä½œäº† 6 å¹´ï¼Œå¯ä»¥é¢†å– 13 ä¸ªæœˆï¼Œæ¯ä¸ªæœˆ 1900 å¤šå—é’±ï¼Œè¿˜ç»™ç¼´åŒ»ä¿ï¼Œæ¯”æˆ‘ä¹‹å‰å…¬å¸ç¼´çš„è¿˜å¤šğŸ¤£ğŸ¤£ã€‚</p>
<p>ç¦»èŒåå¼€é”€æŒºå°çš„ï¼Œæˆ‘ç®—äº†ä¸‹æ¯å¤©ç‚¹å¤–å–æœ€å¤š 30 å—é’±ï¼Œæˆ¿ç§Ÿè´µä¸€ç‚¹è¦ 2000ï¼Œå› ä¸ºå’Œè€å©†ä¸€èµ·ç§Ÿï¼Œå‡è®¾å•äººå°±ç®— 1000 å§ï¼Œå†åŠ ä¸Šæ°´ç”µç½‘äº¤é€šè´¹ï¼Œæœ€å¤šä¸è¶…è¿‡ 2500 å—é’±ã€‚</p>
<p>æˆ‘ä»¬æ²¡å•¥é¢å¤–çš„å¼€é”€ï¼Œå¶å°”çœ‹çœ‹ç”µå½±ä¹°ç‚¹é¢åŒ…åƒï¼Œä»¥å‰è¿˜ä¼šå»ä¸‹é¦†å­ï¼Œç°åœ¨å‘ç°éƒ½æ˜¯ç§‘æŠ€ä¸ç‹ æ´»ä¹Ÿåƒçš„å°‘äº†ã€‚</p>
<p>ç°ä»£äººçš„å¥åº·é—®é¢˜æˆ‘è®¤ä¸ºæ˜¯åƒå¤ªå¤šäº†ï¼Œæ·»åŠ å‰‚åŒ–å­¦ææ–™å¤ªå¤šï¼Œåƒäº†åè€Œå¯¹èº«ä½“ä¸å¥½ï¼Œä½†æ˜¯ä¸Šç­å‹åŠ›å¤§çš„æ—¶å€™çš„ç¡®æ§åˆ¶ä¸ä½ï¼Œåƒæˆäº†å”¯ä¸€çš„å‘æ³„å£ã€‚</p>
<p>å¦ä¸€è¾¹çˆ¸å¦ˆå’Œå²³çˆ¶å²³æ¯ä¸€ç›´åœ¨å‚¬ç”Ÿå¨ƒï¼Œæˆ‘é¡¶ä½äº†å‹åŠ›ï¼Œä¸ºåˆ«äººæ´»äº†ä¸€è¾ˆå­ï¼Œä¸ºè‡ªå·±æ´»ä¸ª 1 å¹´å¤šä¸è¿‡åˆ†å§ã€‚</p>
<p>å°±å½“èŠ±ç‚¹é’±ä¹°è‡ªå·±çš„è‡ªç”±èº«äº†ï¼Œåœ¨æ¥ä¸‹æ¥çš„ 1 å¹´å¤šæ—¶é—´é‡Œä¼‘æ¯ä¸‹ã€‚</p>
<p>ç¦»èŒçš„å‰ä¸¤ä¸ªæœˆæˆ‘è¿ BOSS ç›´è˜éƒ½æ²¡çœ‹ï¼Œå¬åˆ°å·¥ä½œä¸¤ä¸ªå­—éƒ½å¤´ç–¼ï¼Œç¬¬ä¸‰ä¸ªæœˆé—²çš„æ— èŠåˆ·äº†ä¸‹ï¼Œéƒ½æ˜¯å¤–åŒ…ï¼Œç°åœ¨æ‰¾å·¥ä½œçš„æƒ…ç»ªä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œåªæ˜¯æŠŠç®€å†æŒ‚ä¸Šå»äº†ï¼Œçœ‹ç¼˜åˆ†å§ã€‚</p>
<p>æƒ¬æ„äº†ä¸€æ®µæ—¶é—´åå°±æœ‰ç‚¹é—²çš„æ— èŠäº†ï¼Œæˆ‘ä¹°äº†ä¸ªå°ç”µé©´ï¼Œåˆ°å¤„æ™’å¤ªé˜³çœ‹é£æ™¯ï¼Œè—é¾™å²›å»äº†å¥½å¤šæ¬¡äº†ã€‚æˆ‘ä¸€èˆ¬å¸¦ä¸ªæŠ˜å åºŠï¼Œçœ‹ç€å¤ªé˜³ä¸é”™çš„åœ°æ–¹å°±é“ºèµ·æ¥èººç€ã€‚</p>
<p>å¦ä¸€ä¸ªå¥½åœ°æ–¹æ˜¯å…‰è°·ä¹¦æˆ¿ï¼Œå°±è·Ÿå›¾ä¹¦é¦†ä¸€æ ·ï¼Œå…‰è°·è¿™è¾¹ç‰¹åˆ«å¤šï¼Œæˆ‘è¿™ç¯‡æ–‡ç« å°±æ˜¯åœ¨å…‰è°·ä¹¦æˆ¿é‡Œé¢å†™çš„ã€‚è¿™é‡Œæœ‰ç”µæœ‰ç½‘ï¼Œå¸¦ä¸ªç”µè„‘å’Œå……ç”µå™¨èƒ½å¾…ä¸€å¤©ã€‚</p>
<p>æˆ‘ç»™å‡ ä¸ªå®šäº† 2 ä¸ªæ…¢æ‚ æ‚ çš„ç›®æ ‡ï¼Œå­¦å¥½è‹±è¯­ã€å­¦å¥½ AIã€‚</p>
<p>çº³ç“¦å°”å¹´åˆæœ‰ä¸€ç¯‡ 3 ä¸ªå¤šå°æ—¶çš„æ·±åº¦é‡‡è®¿ï¼Œæˆ‘åˆšå¬çš„æ—¶å€™å°±è¢«éœ‡æ’¼åˆ°äº†ï¼ŒæŠŠä»–å’Œè°·æ­Œ Prompt ç™½çš®ä¹¦ä¸€èµ·å½“åšè‹±è¯­å­¦ä¹ ææ–™äº†ã€‚</p>
<p>é¢å¤–çš„èƒŒäº† 3000 å¤šä¸ªå•è¯ï¼Œä½†æ˜¯ç‹¬ç«‹çš„å•è¯èƒŒäº†ä¹Ÿæ²¡ç”¨ï¼Œç»å¸¸å¿˜ä¹Ÿä¸çŸ¥é“æ€ä¹ˆè¿ç”¨ï¼Œäºæ˜¯æˆ‘å¼€å§‹èƒŒè¿™äº›ææ–™ï¼ŒåŠå¤§å®¶å°‘èµ°å¼¯è·¯ï¼Œç›´æ¥ä»æ—¥å¸¸æ¥è§¦çš„è‹±æ–‡ææ–™å¼€å§‹ï¼Œåœ¨å¥å­é‡Œé¢å­¦ä¹ å•è¯ï¼Œåˆ«åƒæˆ‘ä¸€æ ·æ¼«æ— ç›®çš„çš„ä¹±èƒŒã€‚</p>
<p>æœ‰æ—¶å€™ä¹Ÿåœ¨æºœåœˆçš„æ—¶å€™ï¼ŒæŠ“ç‚¹å¤–å›½å‹äººèŠå¤©ï¼Œåç§‘æ­¦å¤§é™„è¿‘çš„æ¯”è¾ƒå¤šï¼Œæˆ–è€…çº¿ä¸Šæœ‰ Tandem å’Œ HelloTalkï¼Œæ¨è Tandem å§ï¼Œé‡Œé¢æ¬§ç¾çš„æ¯”è¾ƒå¤šï¼Œæ³¨æ„ä¸‹æ—¶é—´å·®åœ¨åˆ«äººç™½å¤©çš„æ—¶å€™èŠèŠå¤©ï¼ŒHelloTalk é‡Œé¢ä¸œå—äºšçš„å¤šï¼Œå’Œä¸­å›½æ—¶åŒºå·®è·ä¸å¤§ä¸€è‡´ã€‚</p>
<p>AI æˆ‘å…ˆå­¦äº†æ•´ä¸ª LLM çš„åŸç†ï¼Œå†™äº†å››ç¯‡æ–‡ç« è®°å½• LLM æ•´ä¸ªè®­ç»ƒå’Œæ¨ç†çš„è¿‡ç¨‹ï¼Œè¿˜æŒºæœ‰æ„æ€çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ˜¯é‡å˜åˆ°è´¨å˜çš„â€œæ¶Œç°â€ï¼Œå†å»çœ‹çœ‹ Difyã€n8n ç­‰ç›¸å…³çš„å·¥å…·ã€‚</p>
<p>è¿˜æœ‰ä¸ªå…¨æ ˆæ–¹é¢ï¼Œæˆ‘çœ‹å¾ˆå¤šå…¬å¸ç”¨ Python å’Œ Goï¼Œå°±é¡ºæ‰‹æŠŠå’Œ Java + Spring å¯¹åº”çš„æ¡†æ¶çœ‹äº†ä¸‹ï¼Œéƒ½å·®ä¸å¤šï¼Œæœ‰ç‚¹ç»†å¾®æ’è¾¹æˆ‘ä¹Ÿå†™äº†å‡ ç¯‡æ–‡ç« åˆ†äº«å‡ºæ¥ã€‚</p>
<p>è‹±è¯­ +  AI æ˜¯æœªæ¥é£å£ï¼Œä¹‹å‰ä¸Šç­æ²¡æ—¶é—´ï¼Œç°åœ¨ç¦»èŒäº†å°±ç‹ ç‹ ç ”ç©¶ä¸€ç•ªï¼Œç¦»èŒçš„ä¸€å¤§å¥½å¤„å°±æ˜¯æŠŠåšåˆ«çš„äº‹çš„æœºä¼šæˆæœ¬æ‹‰çš„å¾ˆä½ã€‚</p>
<p>ä¸­ç¾å½¢åŠ¿æ¯”è¾ƒç´§å¼ ï¼Œä½†æ˜¯ä¸¤å›½ä¹‹é—´çš„éœ€æ±‚æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œè¶Šæ˜¯åœ¨è¿™ç§æ—¶å€™è‹±è¯­è¶Šå€¼é’±ã€‚</p>
<p>éšæ‰‹å†™å†™è¿‘æœŸçš„æƒ…å†µç»™å„ä½å‚è€ƒä¸‹ï¼Œç¥å¤§å®¶è¶Šè¿‡è¶Šå¥½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5]]></title>    <link>https://juejin.cn/post/7576378563546366004</link>    <guid>https://juejin.cn/post/7576378563546366004</guid>    <pubDate>2025-11-25T02:58:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563546366004" data-draft-id="7576208176006578228" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T02:58:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œè€…dyc"/> <meta itemprop="url" content="https://juejin.cn/user/4099460216140686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4099460216140686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œè€…dyc
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:58:56.000Z" title="Tue Nov 25 2025 02:58:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5</h2>
<h4 data-id="heading-1">æ‹–æ‹½ç»„ä»¶</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
 Â &lt;view
 Â  Â <span class="hljs-attr">ref</span>=<span class="hljs-string">"dragRef"</span>
 Â  Â <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-el"</span>
 Â  Â :<span class="hljs-attr">style</span>=<span class="hljs-string">"{ left: `${position.x}px`, top: `${position.y}px` }"</span>
 Â  Â @<span class="hljs-attr">touchstart</span>=<span class="hljs-string">"handleTouchStart"</span>
 Â  Â @<span class="hljs-attr">touchmove</span>=<span class="hljs-string">"handleTouchMove"</span>
 Â  Â @<span class="hljs-attr">touchend</span>=<span class="hljs-string">"handleTouchEnd"</span>
 Â  Â @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"handleMouseDown"</span>
 Â  Â @<span class="hljs-attr">mousemove</span>=<span class="hljs-string">"handleMouseMove"</span>
 Â  Â @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"handleMouseUp"</span>
 Â  Â @<span class="hljs-attr">mouseleave</span>=<span class="hljs-string">"handleMouseUp"</span>
 Â &gt;
 Â  Â &lt;slot&gt;&lt;/slot&gt;
 Â &lt;/view&gt;
&lt;/template&gt;
â€‹
&lt;script setup <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;
// å®šä¹‰ç»„ä»¶å±æ€§
const <span class="hljs-attr">props</span> = withDefaults(
 Â defineProps&lt;{
 Â  Â // åˆå§‹ä½ç½®
 Â  Â initialPosition?: {
 Â  Â  Â x: number
 Â  Â  Â y: number
 Â   }
 Â  Â // è¾¹ç•ŒèŒƒå›´ï¼ˆç›¸å¯¹äºçˆ¶å…ƒç´ ï¼‰
 Â  Â boundary?: {
 Â  Â  Â minX?: number
 Â  Â  Â maxX?: number
 Â  Â  Â minY?: number
 Â  Â  Â maxY?: number
 Â   }
 Â  Â // å›å¼¹é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼Œ0-1ï¼‰
 Â  Â bounceThreshold?: number
 Â  Â // æ˜¯å¦å¯ç”¨å›å¼¹
 Â  Â enableBounce?: boolean
 Â  Â initSize: {
 Â  Â  Â width: number
 Â  Â  Â height: number
 Â   }
  }&gt;(),
  {
 Â  Â initialPosition: () =&gt; ({ x: 0, y: 0 }),
 Â  Â boundary: () =&gt; ({}),
 Â  Â bounceThreshold: 0.5,
 Â  Â enableBounce: true,
  },
)
const <span class="hljs-attr">isMiniProgram</span> = os.isXcx
â€‹
// å®šä¹‰äº‹ä»¶
const <span class="hljs-attr">emit</span> = defineEmits&lt;{
 Â start: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â move: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â end: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â bounce: <span class="hljs-section">[{ x: number; y: number }, 'left' | 'right']</span>
}&gt;()
â€‹
// ç»„ä»¶å®ä¾‹å¼•ç”¨
const <span class="hljs-attr">dragRef</span> = ref()
â€‹
// ä½ç½®çŠ¶æ€
const <span class="hljs-attr">position</span> = reactive&lt;{ x: number<span class="hljs-comment">; y: number }&gt;({</span>
 Â x: props.initialPosition.x,
 Â y: props.initialPosition.y,
})
â€‹
// æ‹–æ‹½çŠ¶æ€
const <span class="hljs-attr">isDragging</span> = ref(<span class="hljs-literal">false</span>)
const <span class="hljs-attr">startPosition</span> = ref({ x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> })
const <span class="hljs-attr">elementStartPosition</span> = ref({ x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> })
â€‹
// è®¡ç®—æ‹–æ‹½è¾¹ç•Œçˆ¶å…ƒç´ çš„å®½é«˜å‡å»å…ƒç´ è‡ªèº«çš„å®½é«˜
const <span class="hljs-attr">calculatedBoundary</span> = computed(() =&gt; {
 Â const <span class="hljs-attr">boundary</span> = { ...props.boundary }
 Â // å¦‚æœæ²¡æœ‰æŒ‡å®šè¾¹ç•Œï¼Œå°è¯•ä»çˆ¶å…ƒç´ è·å–
 Â if (!boundary.maxX || !boundary.maxY) {
 Â  Â try {
 Â  Â  Â // é¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºå°ç¨‹åºç¯å¢ƒ
â€‹
 Â  Â  Â if (isMiniProgram) {
 Â  Â  Â  Â // å°ç¨‹åºç¯å¢ƒï¼Œä½¿ç”¨å±å¹•å°ºå¯¸å‡å»å…ƒç´ å®é™…å®½åº¦ï¼ˆå¦‚æœæœ‰ï¼‰
 Â  Â  Â  Â const <span class="hljs-attr">systemInfo</span> = uni.getSystemInfoSync()
 Â  Â  Â  Â const { windowWidth, windowHeight } = systemInfo
 Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = windowWidth - props.initSize.width
 Â  Â  Â   }
 Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = windowHeight - props.initSize.height
 Â  Â  Â   }
 Â  Â   } else {
 Â  Â  Â  Â const <span class="hljs-attr">currentElement</span> = dragRef.value.<span class="hljs-variable">$el</span>
 Â  Â  Â  Â // H5ç¯å¢ƒå°è¯•è·å–çˆ¶å…ƒç´ 
 Â  Â  Â  Â const <span class="hljs-attr">parent</span> = currentElement.parentElement
 Â  Â  Â  Â if (parent) {
 Â  Â  Â  Â  Â const <span class="hljs-attr">parentRect</span> = parent.getBoundingClientRect()
 Â  Â  Â  Â  Â // ä½¿ç”¨å®é™…è·å–çš„å…ƒç´ å°ºå¯¸
 Â  Â  Â  Â  Â const <span class="hljs-attr">elementWidth</span> = props.initSize.width
 Â  Â  Â  Â  Â const <span class="hljs-attr">elementHeight</span> = props.initSize.height
â€‹
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = parentRect.width - elementWidth
 Â  Â  Â  Â   }
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = parentRect.height - elementHeight
 Â  Â  Â  Â   }
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â console.warn('æ— æ³•è·å–çˆ¶å…ƒç´ ï¼Œä½¿ç”¨é»˜è®¤è¾¹ç•Œå€¼')
 Â  Â  Â  Â  Â // ä½¿ç”¨é»˜è®¤è¾¹ç•Œå€¼ä½œä¸ºå¤‡é€‰
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = window.innerWidth - props.initSize.width // å‡è®¾å…ƒç´ å®½åº¦çº¦ä¸º<span class="hljs-number">100</span>px
 Â  Â  Â  Â   }
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = window.innerHeight - props.initSize.height // å‡è®¾å…ƒç´ é«˜åº¦çº¦ä¸º<span class="hljs-number">100</span>px
 Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â   }
 Â   } catch (error) {
 Â  Â  Â console.error('è·å–çˆ¶å…ƒç´ å°ºå¯¸æ—¶å‡ºé”™:', error)
 Â  Â  Â // å‡ºé”™æ—¶ä½¿ç”¨é»˜è®¤å€¼
 Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = <span class="hljs-number">300</span> // é»˜è®¤æœ€å¤§Xå€¼
 Â  Â   }
 Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = <span class="hljs-number">300</span> // é»˜è®¤æœ€å¤§Yå€¼
 Â  Â   }
 Â   }
  }
â€‹
 Â // ç¡®ä¿minXå’ŒminYé»˜è®¤ä¸º0
 Â if (<span class="hljs-attr">boundary.minX</span> === undefined) {
 Â  Â <span class="hljs-attr">boundary.minX</span> = <span class="hljs-number">0</span>
  }
 Â if (<span class="hljs-attr">boundary.minY</span> === undefined) {
 Â  Â <span class="hljs-attr">boundary.minY</span> = <span class="hljs-number">0</span>
  }
 Â console.log('~~~~è®¡ç®—è¾¹ç•ŒcalculatedBoundary', boundary)
 Â return boundary
})
â€‹
// å¤„ç†è§¦æ‘¸å¼€å§‹
const <span class="hljs-attr">handleTouchStart</span> = (e: TouchEvent) =&gt; {
 Â console.log('~~~~å¼€å§‹handleTouchStart', e)
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">true</span>
 Â // è®°å½•æ‹–æ‹½å¼€å§‹ä½ç½®
 Â <span class="hljs-attr">startPosition.value</span> = {
 Â  Â x: e.touches<span class="hljs-section">[0]</span>.clientX,
 Â  Â y: e.touches<span class="hljs-section">[0]</span>.clientY,
  }
 Â <span class="hljs-attr">elementStartPosition.value</span> = { ...position }
â€‹
 Â emit('start', { ...position })
}
â€‹
// å¤„ç†è§¦æ‘¸ç§»åŠ¨
const <span class="hljs-attr">handleTouchMove</span> = (e: TouchEvent) =&gt; {
 Â console.log('~~~~~ç§»åŠ¨handleTouchMove', e)
 Â if (!isDragging.value) return
â€‹
 Â // è®¡ç®—ç§»åŠ¨è·ç¦»
 Â const <span class="hljs-attr">deltaX</span> = e.touches[<span class="hljs-number">0</span>].clientX - startPosition.value.x
 Â const <span class="hljs-attr">deltaY</span> = e.touches[<span class="hljs-number">0</span>].clientY - startPosition.value.y
â€‹
 Â updatePosition(deltaX, deltaY)
}
â€‹
// å¤„ç†è§¦æ‘¸ç»“æŸ
const <span class="hljs-attr">handleTouchEnd</span> = () =&gt; {
 Â console.log('~~~~~ç»“æŸhandleTouchEnd')
 Â finishDrag()
}
â€‹
// å¤„ç†é¼ æ ‡æŒ‰ä¸‹
const <span class="hljs-attr">handleMouseDown</span> = (e: MouseEvent) =&gt; {
 Â console.log('~~~~é¼ æ ‡æŒ‰ä¸‹handleMouseDown', e)
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">true</span>
 Â <span class="hljs-attr">startPosition.value</span> = { x: e.clientX, y: e.clientY }
 Â <span class="hljs-attr">elementStartPosition.value</span> = { ...position }
â€‹
 Â emit('start', { ...position })
â€‹
 Â // é˜»æ­¢æ–‡æœ¬é€‰æ‹©
 Â e.preventDefault()
}
â€‹
// å¤„ç†é¼ æ ‡ç§»åŠ¨
const <span class="hljs-attr">handleMouseMove</span> = (e: MouseEvent) =&gt; {
 Â console.log('~~~~é¼ æ ‡ç§»åŠ¨handleMouseMove', e)
 Â if (!isDragging.value) return
â€‹
 Â const <span class="hljs-attr">deltaX</span> = e.clientX - startPosition.value.x
 Â const <span class="hljs-attr">deltaY</span> = e.clientY - startPosition.value.y
â€‹
 Â updatePosition(deltaX, deltaY)
}
â€‹
// å¤„ç†é¼ æ ‡æ¾å¼€
const <span class="hljs-attr">handleMouseUp</span> = () =&gt; {
 Â console.log('~~~~é¼ æ ‡æ¾å¼€handleMouseUp')
 Â finishDrag()
}
â€‹
// æ›´æ–°ä½ç½®
const <span class="hljs-attr">updatePosition</span> = (deltaX: number, deltaY: number) =&gt; {
 Â console.log('~~~~æ›´æ–°ä½ç½®updatePosition', deltaX, deltaY)
 Â let <span class="hljs-attr">newX</span> = elementStartPosition.value.x + deltaX
 Â let <span class="hljs-attr">newY</span> = elementStartPosition.value.y + deltaY
â€‹
 Â // åº”ç”¨è¾¹ç•Œçº¦æŸ
 Â const <span class="hljs-attr">boundary</span> = calculatedBoundary.value
 Â // xè½´æœ€å°ä¸èƒ½å°äº0
 Â if (boundary.minX !== undefined) {
 Â  Â <span class="hljs-attr">newX</span> = Math.max(boundary.minX, newX)
  }
 Â // xè½´æœ€å¤§ä¸èƒ½å¤§äºçˆ¶å…ƒç´ å®½åº¦å‡å»å…ƒç´ å®½åº¦
 Â if (boundary.maxX !== undefined) {
 Â  Â <span class="hljs-attr">newX</span> = Math.min(boundary.maxX, newX)
  }
 Â // yè½´æœ€å°ä¸èƒ½å°äº0
 Â if (boundary.minY !== undefined) {
 Â  Â <span class="hljs-attr">newY</span> = Math.max(boundary.minY, newY)
  }
 Â // yè½´æœ€å¤§ä¸èƒ½å¤§äºçˆ¶å…ƒç´ é«˜åº¦å‡å»å…ƒç´ é«˜åº¦
 Â if (boundary.maxY !== undefined) {
 Â  Â <span class="hljs-attr">newY</span> = Math.min(boundary.maxY, newY)
  }
â€‹
 Â // æ›´æ–°ä½ç½®
 Â <span class="hljs-attr">position.x</span> = newX
 Â <span class="hljs-attr">position.y</span> = newY
â€‹
 Â emit('move', { ...position })
}
â€‹
// å®Œæˆæ‹–æ‹½ï¼Œå¤„ç†å›å¼¹
const <span class="hljs-attr">finishDrag</span> = () =&gt; {
 Â if (!isDragging.value) return
â€‹
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">false</span>
â€‹
 Â // å¤„ç†å›å¼¹é€»è¾‘
 Â if (props.enableBounce &amp;&amp; calculatedBoundary.value.maxX !== undefined) {
 Â  Â const <span class="hljs-attr">maxX</span> = calculatedBoundary.value.maxX
 Â  Â const <span class="hljs-attr">threshold</span> = props.bounceThreshold * maxX
â€‹
 Â  Â if (position.x &lt; threshold) {
 Â  Â  Â // å›å¼¹åˆ°å·¦ä¾§
 Â  Â  Â animateToPosition(0, position.y, 'left')
 Â   } else if (position.x &gt; maxX - threshold) {
 Â  Â  Â // å›å¼¹åˆ°å³ä¾§
 Â  Â  Â animateToPosition(maxX, position.y, 'right')
 Â  Â  Â return // åŠ¨ç”»å®Œæˆåä¼šè§¦å‘endäº‹ä»¶
 Â   }
  }
â€‹
 Â emit('end', { ...position })
}
â€‹
// å…¼å®¹çš„åŠ¨ç”»å¸§è¯·æ±‚å‡½æ•°ï¼Œé€‚é…å°ç¨‹åºç¯å¢ƒ
const <span class="hljs-attr">requestAnimationFrameCompat</span> = (callback: any) =&gt; {
 Â // æ£€æŸ¥æ˜¯å¦ä¸ºå°ç¨‹åºç¯å¢ƒ
 Â return setTimeout(callback, 16) // çº¦60fps
}
â€‹
// åŠ¨ç”»ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®
const <span class="hljs-attr">animateToPosition</span> = (targetX: number, targetY: number, direction: <span class="hljs-string">'left'</span> | <span class="hljs-string">'right'</span>) =&gt; {
 Â const <span class="hljs-attr">startX</span> = position.x
 Â const <span class="hljs-attr">startY</span> = position.y
 Â const <span class="hljs-attr">duration</span> = <span class="hljs-number">300</span> // åŠ¨ç”»æŒç»­æ—¶é—´
 Â const <span class="hljs-attr">startTime</span> = Date.now()
 Â let animationId: <span class="hljs-attr">any</span> = null
â€‹
 Â const <span class="hljs-attr">animate</span> = () =&gt; {
 Â  Â const <span class="hljs-attr">currentTime</span> = Date.now()
 Â  Â const <span class="hljs-attr">elapsed</span> = currentTime - startTime
 Â  Â const <span class="hljs-attr">progress</span> = Math.min(elapsed / duration, <span class="hljs-number">1</span>)
â€‹
 Â  Â // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°
 Â  Â const <span class="hljs-attr">easeOut</span> = <span class="hljs-number">1</span> - (<span class="hljs-number">1</span> - progress) ** <span class="hljs-number">3</span>
â€‹
 Â  Â <span class="hljs-attr">position.x</span> = startX + (targetX - startX) * easeOut
 Â  Â <span class="hljs-attr">position.y</span> = startY + (targetY - startY) * easeOut
â€‹
 Â  Â if (progress &lt; 1) {
 Â  Â  Â <span class="hljs-attr">animationId</span> = requestAnimationFrameCompat(animate)
 Â   } else {
 Â  Â  Â // åŠ¨ç”»ç»“æŸ
 Â  Â  Â <span class="hljs-attr">position.x</span> = targetX
 Â  Â  Â <span class="hljs-attr">position.y</span> = targetY
 Â  Â  Â emit('bounce', { ...position }, direction)
 Â  Â  Â emit('end', { ...position })
 Â   }
  }
â€‹
 Â <span class="hljs-attr">animationId</span> = requestAnimationFrameCompat(animate)
}
â€‹
// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶
const <span class="hljs-attr">setPosition</span> = (x: number, y: number) =&gt; {
 Â <span class="hljs-attr">position.x</span> = x
 Â <span class="hljs-attr">position.y</span> = y
}
â€‹
const <span class="hljs-attr">resetPosition</span> = () =&gt; {
 Â <span class="hljs-attr">position.x</span> = props.initialPosition.x
 Â <span class="hljs-attr">position.y</span> = props.initialPosition.y
}
â€‹
defineExpose({
 Â setPosition,
 Â resetPosition,
 Â position,
})
&lt;/script&gt;
â€‹
&lt;style scoped <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;
.drag-el {
 Â position: absolute<span class="hljs-comment">;</span>
 Â cursor: move<span class="hljs-comment">; /* é¼ æ ‡æŒ‡é’ˆæ ·å¼ */</span>
 Â user-select: none<span class="hljs-comment">; /* é˜²æ­¢æ–‡æœ¬é€‰ä¸­ */</span>
 Â touch-action: none<span class="hljs-comment">; /* é˜²æ­¢è§¦æ‘¸äº‹ä»¶çš„é»˜è®¤è¡Œä¸º */</span>
â€‹
  // å¢åŠ å¯ç‚¹å‡»åŒºåŸŸ
  &amp;:active {
 Â   // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ‹–æ‹½æ—¶çš„è§†è§‰åé¦ˆ
  }
}
&lt;/style&gt;
â€‹
</code></pre>
<h4 data-id="heading-2">ä½¿ç”¨ç»„ä»¶</h4>
<pre><code class="hljs language-xml" lang="xml">vue
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-container"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">DragEl</span> <span class="hljs-attr">:initSize</span>=<span class="hljs-string">"dragElSize"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dragElRef"</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 200rpx; height: 100rpx"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-[#f0f0f0] p-4 rounded-md"</span>&gt;</span>
 Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>æ‹–åŠ¨å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">DragEl</span>&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">DragEl</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/pages-word/components/DragEl/index.vue'</span>
â€‹
<span class="hljs-keyword">const</span> dragElSize = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">const</span> dragElRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
â€‹
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getElementSize</span> = (<span class="hljs-params"/>) =&gt; {
 Â <span class="hljs-comment">// 1. åˆ›å»ºé€‰æ‹©å™¨å®ä¾‹</span>
 Â <span class="hljs-keyword">const</span> query = uni.<span class="hljs-title function_">createSelectorQuery</span>().<span class="hljs-title function_">in</span>(dragElRef.<span class="hljs-property">value</span>) <span class="hljs-comment">// å…³é”®ï¼š.in(this) ç»‘å®šå½“å‰ç»„ä»¶å®ä¾‹ï¼ˆå¿…å¡«ï¼Œå¦åˆ™å¯èƒ½è·å–ä¸åˆ°ï¼‰</span>
â€‹
 Â <span class="hljs-comment">// 2. é€‰æ‹©ç›®æ ‡å…ƒç´ ï¼Œè·å–å¸ƒå±€ä¿¡æ¯</span>
 Â query
 Â   .<span class="hljs-title function_">select</span>(<span class="hljs-string">'.drag-el'</span>) <span class="hljs-comment">// é€šè¿‡ id é€‰æ‹©å…ƒç´ ï¼ˆä¹Ÿå¯ç”¨ .class é€‰æ‹©ï¼Œå¦‚ .boxï¼‰</span>
 Â   .<span class="hljs-title function_">boundingClientRect</span>(<span class="hljs-function">(<span class="hljs-params">rect</span>) =&gt;</span> {
 Â  Â  Â <span class="hljs-comment">// rect åŒ…å«å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯</span>
 Â  Â  Â <span class="hljs-keyword">if</span> (rect) {
 Â  Â  Â  Â dragElSize.<span class="hljs-property">value</span> = { <span class="hljs-attr">width</span>: rect.<span class="hljs-property">width</span>, <span class="hljs-attr">height</span>: rect.<span class="hljs-property">height</span> }
 Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœªæ‰¾åˆ°ç›®æ ‡å…ƒç´ '</span>)
 Â  Â   }
 Â   })
 Â   .<span class="hljs-title function_">exec</span>() <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢ï¼ˆå¿…é¡»è°ƒç”¨ï¼Œå¦åˆ™å›è°ƒä¸è§¦å‘ï¼‰</span>
}
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
 Â <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-title function_">getElementSize</span>()
  })
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.dd</span> {
 Â <span class="hljs-attribute">position</span>: absolute;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
â€‹
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code + Cursorç¼–ç¨‹ç¯å¢ƒåˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7575367791274377254</link>    <guid>https://juejin.cn/post/7575367791274377254</guid>    <pubDate>2025-11-24T02:46:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575367791274377254" data-draft-id="7575456858428293166" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code + Cursorç¼–ç¨‹ç¯å¢ƒåˆå§‹åŒ–"/> <meta itemprop="keywords" content="Claude,Cursor"/> <meta itemprop="datePublished" content="2025-11-24T02:46:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ’’å¸ä½¿æˆ‘å¿«ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/1556564197509527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code + Cursorç¼–ç¨‹ç¯å¢ƒåˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564197509527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ’’å¸ä½¿æˆ‘å¿«ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T02:46:33.000Z" title="Mon Nov 24 2025 02:46:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç›®å‰å¼€å‘ä»£ç çš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨Cursorçš„Tabè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½åŠ ä¸ŠClaude Codeç”Ÿæˆä»£ç ã€‚ä¸ºäº†è®©AIèƒ½æ›´å¥½åœ°è¾…åŠ©å¼€å‘ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚æœ¬æ–‡é€‚ç”¨äºWindowsç”¨æˆ·ã€‚</p>
<p>é¡¹ç›®çš„Cursor Ruleså’ŒCLAUDE.mdéƒ½éœ€è¦ä¸Šä¼ åˆ°ä»£ç ä»“ï¼Œç¡®ä¿å›¢é˜Ÿä½¿ç”¨çš„æ˜¯ä¸€æ ·çš„è§„èŒƒã€‚</p>
<h2 data-id="heading-1">Cursoråˆå§‹åŒ–</h2>
<h3 data-id="heading-2">ç”¨æˆ·è®¾ç½®</h3>
<p>æŒ‰å¦‚ä¸‹è·¯å¾„æ‰“å¼€è®¾ç½®ï¼Œæ–‡ä»¶ &gt; é¦–é€‰é¡¹ &gt; Cursor Settings æœç´¢User Rulesï¼Œå¯ä»¥è®¾ç½®é»˜è®¤å›å¤ä¸­æ–‡ã€‚</p>
<h3 data-id="heading-3">é¡¹ç›®è®¾ç½®</h3>
<p>æŒ‰ä¸‹<code>Ctrl + L</code>å¹¶è¾“å…¥<code>/</code>å¯ä»¥ä½¿ç”¨<code>Generate Cursor Rules</code>æŒ‡ä»¤ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆ<code>.cursor/rules</code>ä¸‹çš„.mdcæ–‡ä»¶ï¼Œå¯ä»¥ä¸Šä¼ åˆ°ä»£ç ä»“ä¾¿äºå›¢é˜Ÿæˆå‘˜ä½¿ç”¨ã€‚å¦‚æœæ— æ³•ä½¿ç”¨<code>Generate Cursor Rules</code>æŒ‡ä»¤ï¼Œå¯ä»¥å‚è€ƒ<a href="https://juejin.cn/post/7572396000543817791" target="_blank" title="https://juejin.cn/post/7572396000543817791">è¿™ç¯‡æ–‡ç« </a></p>
<h2 data-id="heading-4">Claude Codeåˆå§‹åŒ–</h2>
<p>å¦‚æœè¿˜æ²¡æœ‰å®‰è£…Claude Codeï¼Œå¯ä»¥å‚è€ƒ<a href="https://juejin.cn/post/7571808096936722473" target="_blank" title="https://juejin.cn/post/7571808096936722473">è¿™ç¯‡æ–‡ç« </a></p>
<h3 data-id="heading-5">ç”¨æˆ·è®¾ç½®</h3>
<p>æ‰“å¼€Claude Codeåï¼Œè¾“å…¥<code>#å°½å¯èƒ½è¾“å‡ºä¸­æ–‡</code>ï¼Œå¹¶é€‰æ‹©User memoryå³å¯è®©Claude Codeåç»­éƒ½å°½å¯èƒ½è¾“å‡ºä¸­æ–‡ã€‚ä¹Ÿå¯ä»¥æ‰¾åˆ°<code>~/.claude/CLAUDE.md</code>å¹¶è¿›è¡Œç¼–è¾‘ã€‚</p>
<p>å¦‚æœä½¿ç”¨figmaï¼Œåˆ™åœ¨å…¶ä¸­åŠ å…¥</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># Figma è®¾è®¡ç¨¿ä¸¥æ ¼éµå¾ªè§„åˆ™</span></span>

å½“é‡åˆ° figama å­—çœ¼æˆ–è€…è®¾è®¡ç¨¿ï¼Œå¿…é¡»ä½¿ç”¨ figama-mcp è¯»å–å®Œæ•´è®¾è®¡ç¨¿èŠ‚ç‚¹ä¿¡æ¯å†ç»§ç»­ç¼–ç 
</code></pre>
<p>å¯¹äºå¤æ‚å·¥ä½œæµï¼Œå¯ä»¥åŠ å…¥</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment">## å¤æ‚éœ€æ±‚æ ‡å‡†å·¥ä½œæµç¨‹</span>

1.é¦–å…ˆç†æ¸…é—®é¢˜ï¼Œé˜…è¯»ä»£ç åº“ä¸­çš„ç›¸å…³æ–‡ä»¶ï¼Œå¹¶åˆ¶å®štasks/todo.mdè®¡åˆ’ã€‚
2.è®¡åˆ’ä¸­åº”åŒ…å«å¾…åŠäº‹é¡¹æ¸…å•ï¼Œå®Œæˆä¸€é¡¹å³å¯å‹¾é€‰ã€‚
3.å¼€å§‹å·¥ä½œå‰è¯·å…ˆä¸æˆ‘ç¡®è®¤ï¼Œæˆ‘ä¼šæ ¸å¯¹è®¡åˆ’å†…å®¹ã€‚
4.éšåç€æ‰‹å¤„ç†å¾…åŠäº‹é¡¹ï¼Œå®Œæˆæ—¶åŠæ—¶æ ‡è®°ã€‚
5.æ¯ä¸ªæ­¥éª¤éƒ½è¯·ç”¨ç®€æ˜æ‰¼è¦çš„æ–¹å¼è¯´æ˜æ‰€åšçš„ä¿®æ”¹ã€‚
6.æ‰€æœ‰ä»»åŠ¡å’Œä»£ç å˜æ›´éƒ½åº”å°½é‡ç®€åŒ–ã€‚æˆ‘ä»¬å¸Œæœ›é¿å…è¿›è¡Œä»»ä½•å¤§è§„æ¨¡æˆ–å¤æ‚çš„æ”¹åŠ¨ã€‚æ¯æ¬¡å˜æ›´åº”å°½é‡å‡å°‘ä»£ç é‡ã€‚ä¸€åˆ‡ä»¥ç®€æ´ä¸ºåŸåˆ™ã€‚
7.æœ€åï¼Œéœ€åœ¨å¾…åŠäº‹é¡¹.mdæ–‡ä»¶ä¸­æ·»åŠ å®¡æŸ¥ç« èŠ‚ï¼Œæ€»ç»“æ‰€åšçš„æ›´æ”¹åŠç›¸å…³ä¿¡æ¯ã€‚
</code></pre>
<h4 data-id="heading-6">æ‰¾åˆ°CLAUDE.md</h4>
<p>ä½¿ç”¨è™šæ‹Ÿæœºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•åƒMacä¸€æ ·ç›´æ¥åœ¨<code>C:\Users\Administrator.claude</code>æ‰¾åˆ°CLAUDE.mdæ–‡ä»¶ ä½†æˆ‘ä»¬å´å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼è®¿é—®åˆ°</p>
<pre><code class="hljs language-ruby" lang="ruby">octopus<span class="hljs-variable">@CHINAMI</span>-<span class="hljs-variable constant_">UFE6487</span><span class="hljs-symbol">:/</span><span class="hljs-variable">$ </span>cd ~<span class="hljs-regexp">/.claude
octopus@CHINAMI-UFE6487:~/</span>.claude<span class="hljs-variable">$ </span>ls
<span class="hljs-variable constant_">CLAUDE</span>.md  file-history   projects     shell-snapshots  todos
debug      history.jsonl  session-env  statsig
</code></pre>
<p>è¿™æ—¶åªè¦æˆ‘ä»¬è¾“å…¥<code>explorer.exe .</code>å›è½¦åå°±ä¼šå‘ç°æ‰“å¼€äº†ä¸€ä¸ªè·¯å¾„ä¸º<code>\wsl.localhost\Ubuntu\home&lt;ä½ çš„ç”¨æˆ·å&gt;.claude</code>çš„çª—å£ è¿™æ ·æˆ‘ä»¬å°±èƒ½ä½¿ç”¨IDEæ¥å¯¹CLAUDE.mdè¿›è¡Œç¼–è¾‘äº†</p>
<h3 data-id="heading-7">é¡¹ç›®è®¾ç½®</h3>
<p>ç”¨Cursoræ‰“å¼€é¡¹ç›®ï¼Œæ‰“å¼€WSLç»ˆç«¯ï¼Œæ‰“å¼€claude codeåï¼Œæ‰§è¡Œ<code>/init</code>å³å¯åˆå§‹åŒ–é¡¹ç›®çš„CLAUDE.mdæ–‡ä»¶</p>
<h2 data-id="heading-8">æ¥å…¥MCP</h2>
<p>æ³¨æ„æ¯ä¸€ä¸ªMCPéƒ½ä¼šæ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå»ºè®®åªæ¥å…¥å¿…è¦çš„ï¼Œå¹¶å®šæœŸæ¸…ç†éå¿…è¦çš„ã€‚</p>
<h3 data-id="heading-9">æ¥å…¥å¢¨åˆ€MCP</h3>
<p>æ²¡å¿…è¦æ¥å…¥ï¼Œåªæ”¯æŒæç¤ºè¯è½¬htmlã€æç¤ºè¯è½¬æ–‡æ¡£ã€htmlå­˜ä¸ªäººç©ºé—´ï¼Œå¹¶ä¸æ”¯æŒUIèŠ‚ç‚¹ä¿¡æ¯è½¬html</p>
<h3 data-id="heading-10">æ¥å…¥Figma MCP</h3>
<p>æ”¯æŒUIèŠ‚ç‚¹ä¿¡æ¯ç›´æ¥å˜æˆä»£ç </p>
<p><a href="https://juejin.cn/post/7573508361740877824" target="_blank" title="https://juejin.cn/post/7573508361740877824">Claude Codeå…¨å±€æ·»åŠ figma MCP</a></p>
<h3 data-id="heading-11">æ¥å…¥Apifox MCP</h3>
<p>å¯ä»¥å¸®ä½ è‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„æ¥å£ä»£ç </p>
<p>ä¿®æ”¹~/.claude.jsonï¼Œå°†å¦‚ä¸‹ä»£ç å…¶åŠ å…¥mcpServersä¸­å³å¯</p>
<p>--project-idåç«¯ç»™çš„æ–‡æ¡£URLä¸­ä¼šæœ‰ï¼Œå¼€å‘æ—¶è®°å¾—æ”¹</p>
<p>APIFOX_ACCESS_TOKENæ˜¯å…¬å¸å†…éƒ¨é€šç”¨çš„</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-string">"apifox"</span>: {
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"stdio"</span>,
  <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx"</span>,
  <span class="hljs-string">"args"</span>: [
    <span class="hljs-string">"-y"</span>,
    <span class="hljs-string">"apifox-mcp-server@latest"</span>,
    <span class="hljs-string">"--project-id=9999999"</span>
  ],
  <span class="hljs-string">"env"</span>: {
    <span class="hljs-string">"APIFOX_ACCESS_TOKEN"</span>: <span class="hljs-string">"XXX"</span>
  }
}
</code></pre>
<p>è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦æˆåŠŸæ·»åŠ </p>
<pre><code class="hljs">claude mcp list
</code></pre>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒé—®å¿«é€Ÿreviewè¯„å®¡Javaå·¥ç¨‹ä»£ç ä¸å¼‚æ­¥ä»£ç æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7575457788665184308</link>    <guid>https://juejin.cn/post/7575457788665184308</guid>    <pubDate>2025-11-24T06:55:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575457788665184308" data-draft-id="7576175307351310351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒé—®å¿«é€Ÿreviewè¯„å®¡Javaå·¥ç¨‹ä»£ç ä¸å¼‚æ­¥ä»£ç æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-24T06:55:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PetterHillWater"/> <meta itemprop="url" content="https://juejin.cn/user/4088451358280841"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒé—®å¿«é€Ÿreviewè¯„å®¡Javaå·¥ç¨‹ä»£ç ä¸å¼‚æ­¥ä»£ç æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088451358280841/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PetterHillWater
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T06:55:46.000Z" title="Mon Nov 24 2025 06:55:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>Â Â Â  ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.amazon.com%2FEffective-Java-Joshua-Bloch%2Fdp%2F0134685997" target="_blank" title="https://www.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997" ref="nofollow noopener noreferrer">Effective Java</a>ã€‹æ˜¯ç”± Joshua Bloch ç¼–å†™çš„ä¸€æœ¬ç»å…¸ Java ç¼–ç¨‹æŒ‡å—ï¼Œè¢«å¹¿æ³›è®¤ä¸ºæ˜¯ Java å¼€å‘è€…å¿…è¯»çš„æƒå¨ä¹¦ç±ä¹‹ä¸€ã€‚è¯¥ä¹¦é€šè¿‡ä¸€ç³»åˆ—å…·ä½“ã€å®ç”¨çš„â€œæ¡æ¬¾â€ï¼ˆItemsï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…å†™å‡ºæ›´æ¸…æ™°ã€é«˜æ•ˆã€å¥å£®å’Œå¯ç»´æŠ¤çš„ Java ä»£ç ã€‚æˆªè‡³ 2025 å¹´ï¼Œã€ŠEffective Javaã€‹å·²å‡ºç‰ˆè‡³<strong>ç¬¬ä¸‰ç‰ˆ</strong>ï¼ˆ2018 å¹´å‘å¸ƒï¼‰ï¼Œä¸»è¦åŸºäºÂ <strong>Java 7 åˆ° Java 9</strong>Â çš„ç‰¹æ€§ï¼Œå¹¶æ¶µç›–éƒ¨åˆ† Java 10/11 çš„å†…å®¹ï¼ˆå¦‚å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ varï¼‰ã€‚å…¨ä¹¦å…±åˆ†ä¸ºÂ <strong>12 ç« ï¼Œ90 æ¡å®è·µå»ºè®®</strong>ï¼ˆItemsï¼‰ã€‚</p>
<h2 data-id="heading-1">æç¤ºè¯</h2>
<p>æ ¹æ®Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fjiapengcai.gitbooks.io%2Feffective-java%2Fcontent%2F" target="_blank" title="https://link.juejin.cn/?target=https%3A%2F%2Fjiapengcai.gitbooks.io%2Feffective-java%2Fcontent%2F"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca6db4337a84698a3f447847b943ab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=NY9%2B8lsQtDguTvKj%2BoYdhsQVy5A%3D" alt="" loading="lazy"/>jiapengcai.gitbooks.io</a>Â ä¸­åŸåˆ™ï¼Œreviewå½“å‰å·¥ç¨‹srcä»£ç </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180701097-857863474.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180701097-857863474.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/995b88bb454b401e95147b8aea3078bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=9z6NvakUR6TqpCy6VA2Kocl46h4%3D" alt="image" title="image" loading="lazy"/></a></p>
<h2 data-id="heading-2">å¼‚æ­¥ä»£ç æ™ºèƒ½ä½“Jules</h2>
<p>æç¤ºè¯</p>
<blockquote>
<p>æ ¹æ®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fjiapengcai.gitbooks.io%2Feffective-java%2Fcontent%2F" target="_blank" title="https://jiapengcai.gitbooks.io/effective-java/content/" ref="nofollow noopener noreferrer">jiapengcai.gitbooks.io/effective-jâ€¦</a>Â ä¸­åŸåˆ™ï¼Œreviewå½“å‰å·¥ç¨‹javaä»£ç </p>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180702774-742134011.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180702774-742134011.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0177e8536bd3499397e1985fb3d5005c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=wXOq18z%2Fw%2B7XMWSA06rhVJLrkWA%3D" alt="image" title="image" loading="lazy"/></a></p>
<p>PLAN æ‰¹å‡†å</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180703721-1499175088.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180703721-1499175088.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4391aea8ba6744ea807567e233542565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=3SCP4d1OMuMyXc3Tn%2BadTRkvJRs%3D" alt="image" title="image" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180704683-1065941867.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180704683-1065941867.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6feabd9d14b5479eaa574f429db9af49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=x6gvKKLwrkEbJkjzOklNLgRYXC4%3D" alt="image" title="image" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180705790-622426961.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180705790-622426961.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f9d9c0ab1ba4631abfb409db9d74d3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=A%2FKZmzWPssoU9VcidBJKz70ItyA%3D" alt="image" title="image" loading="lazy"/></a></p>
<p>æŠ¥å‘Š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180706958-941404890.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180706958-941404890.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8619eadec10f42d69e4465c9ec2624a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=lymSsdiF23M6GVOOdIiqiXg4zA4%3D" alt="image" title="image" loading="lazy"/></a></p>
<h3 data-id="heading-3">å®‰å…¨é—®é¢˜ä¿®å¤</h3>
<h4 data-id="heading-4">æç¤ºè¯</h4>
<blockquote>
<p>è¯·æ ¹æ®æˆ‘æä¾›çš„èµ„æ–™URLÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffind-sec-bugs.github.io%2Fbugs.htm" target="_blank" title="https://find-sec-bugs.github.io/bugs.htm" ref="nofollow noopener noreferrer">find-sec-bugs.github.io/bugs.htm</a>ï¼Œå¯¹ç°æœ‰æ‰€æœ‰ä»£ç è¿›è¡Œå®‰å…¨æ£€æµ‹ä¸ä¿®å¤ï¼Œä¸éœ€è¦ä¸æˆ‘ç¡®è®¤ï¼Œé€ä¸ªæ–‡ä»¶æºä»£ç æ£€æµ‹è®°å½•é—®é¢˜ï¼Œä¿®å¤é—®é¢˜ï¼Œæœ€ç»ˆä¿¡æ¯æ±‡æ€»ã€‚</p>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180708033-1163605157.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180708033-1163605157.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2c25e14e6a84d44bbed5620b5094bb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=Fjsr4wJHbFbSQW%2FyeEz%2FFKVSk2A%3D" alt="image" title="image" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180709005-313304448.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180709005-313304448.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f201edde25c6492d899f8f69c312764b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=nczqaYjpzbiuIwneU6T%2FMXTHnvM%3D" alt="image" title="image" loading="lazy"/></a></p>
<h3 data-id="heading-5">è‡ªåŠ¨ä¿®å¤ä»£ç ä¸­å®‰å…¨é—®é¢˜</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180710246-1152480818.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180710246-1152480818.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/047caa7ecb464aa38afc6556662f42aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=H%2FtRLcxlESdqjdXL6NTAIK2eCt4%3D" alt="image" title="image" loading="lazy"/></a></p>
<h3 data-id="heading-6">å¦ä¸€ä¸ªå·¥ç¨‹ä¿®å¤XSSæ¡ˆä¾‹</h3>
<blockquote>
<p>Your task is to find and fix a single, verifiable bug within this repository. Please follow these steps meticulously:</p>
<p><strong>Codebase Analysis &amp; Bug Identification</strong>: Systematically analyze the codebase to identify a potential bug. This could be a logical error, an unhandled edge case, or a deviation from documented behavior. Prioritize bugs that are verifiable with a clear failure case.</p>
<p><strong>Detailed Bug Report</strong>: Before writing any code, provide a brief report explaining:</p>
<ul>
<li>The file and line number(s) where the bug is located.</li>
<li>A clear description of the bug and its impact on the user or system.</li>
<li>Your proposed strategy for fixing it.</li>
</ul>
<p><strong>Targeted Fix Implementation</strong>: Implement the most direct and clean fix for the identified bug. Avoid making unrelated refactors or style changes in the process.</p>
<p><strong>Verification Through Testing</strong>: To validate your fix, you must:</p>
<ul>
<li>Write a new test case that specifically fails before your fix and passes after it, proving the bug is resolved.</li>
<li>Run the entire existing test suite to ensure your changes have not introduced any regressions.</li>
<li>Please make sure to use Simplified Chinese as the language for interactions with users, unless it is for specific proprietary terms or situations where English words are more appropriate.</li>
</ul>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F15172%2F202511%2F15172-20251119180711363-1487072222.png" target="_blank" title="https://img2024.cnblogs.com/blog/15172/202511/15172-20251119180711363-1487072222.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dad82f9cad6040878594530116761382~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGV0dGVySGlsbFdhdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572146&amp;x-signature=ah9GoKBQYJMGKjACYQSYFwD09dg%3D" alt="image" title="image" loading="lazy"/></a></p>
<h3 data-id="heading-7">å¯ä»¥è¯•è¯•ç¼–å†™æ¥å£æµ‹è¯•ç”¨ä¾‹æç¤ºè¯</h3>
<blockquote>
<p>è¯·å¯¹å½“å‰å·¥ç¨‹è®¾è®¡ä¸€å¥—å…¨é¢çš„æœåŠ¡ç«¯HTTPæ¥å£æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿ç”¨JUnitä¸REST Assuredæ¡†æ¶å®ç°ï¼Œéœ€è¦†ç›–ä»¥ä¸‹å„ç±»è´¨é‡ç»´åº¦çš„æµ‹è¯•åœºæ™¯ï¼š</p>
<ol>
<li>
<p>åŠŸèƒ½éªŒè¯æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>éªŒè¯æ‰€æœ‰æ¥å£çš„æ­£å¸¸è¯·æ±‚ä¸é¢„æœŸå“åº”</p>
</li>
<li>
<p>éªŒè¯å„ç±»è¯·æ±‚å‚æ•°ç»„åˆçš„æ­£ç¡®æ€§</p>
</li>
<li>
<p>éªŒè¯æ¥å£è¿”å›æ•°æ®çš„å®Œæ•´æ€§ä¸å‡†ç¡®æ€§</p>
</li>
</ul>
<ol start="2">
<li>
<p>è¾¹ç•Œæ¡ä»¶æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>è¾“å…¥å‚æ•°çš„è¾¹ç•Œå€¼æµ‹è¯•ï¼ˆæœ€å¤§å€¼ã€æœ€å°å€¼ã€ç©ºå€¼ã€é»˜è®¤å€¼ï¼‰</p>
</li>
<li>
<p>æ•°æ®é•¿åº¦è¾¹ç•Œæµ‹è¯•ï¼ˆå¦‚å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶ã€æ•°ç»„å¤§å°é™åˆ¶ï¼‰</p>
</li>
<li>
<p>ç‰¹æ®Šå­—ç¬¦å¤„ç†æµ‹è¯•ï¼ˆå¦‚SQLæ³¨å…¥å°è¯•ã€HTMLæ ‡ç­¾ã€Unicodeå­—ç¬¦ï¼‰</p>
</li>
</ul>
<ol start="3">
<li>
<p>é”™è¯¯å¤„ç†æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>éªŒè¯å„ç±»é”™è¯¯ç çš„æ­£ç¡®æ€§ï¼ˆ4xxå®¢æˆ·ç«¯é”™è¯¯ã€5xxæœåŠ¡å™¨é”™è¯¯ï¼‰</p>
</li>
<li>
<p>éªŒè¯é”™è¯¯ä¿¡æ¯çš„å‡†ç¡®æ€§ä¸å‹å¥½æ€§</p>
</li>
<li>
<p>éªŒè¯å¼‚å¸¸æµç¨‹çš„å¤„ç†é€»è¾‘</p>
</li>
</ul>
<ol start="4">
<li>
<p>å®‰å…¨æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>è®¤è¯ä¸æˆæƒæµ‹è¯•ï¼ˆæ— tokenè®¿é—®ã€æ— æ•ˆtokenã€è¿‡æœŸtokenï¼‰</p>
</li>
<li>
<p>æƒé™æ§åˆ¶æµ‹è¯•ï¼ˆè¶Šæƒè®¿é—®ã€æƒé™è¾¹ç•Œæµ‹è¯•ï¼‰</p>
</li>
<li>
<p>æ•æ„Ÿæ•°æ®ä¿æŠ¤æµ‹è¯•ï¼ˆä¼ è¾“åŠ å¯†ã€è¿”å›æ•°æ®è„±æ•ï¼‰</p>
</li>
<li>
<p>CSRF/XSSé˜²æŠ¤æµ‹è¯•</p>
</li>
<li>
<p>è¯·æ±‚é¢‘ç‡é™åˆ¶æµ‹è¯•</p>
</li>
</ul>
<ol start="5">
<li>
<p>æ€§èƒ½æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>å“åº”æ—¶é—´åŸºå‡†æµ‹è¯•ï¼ˆè®¾å®šæ€§èƒ½é˜ˆå€¼ï¼‰</p>
</li>
<li>
<p>å¹¶å‘è¯·æ±‚æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿå¤šç”¨æˆ·åŒæ—¶è®¿é—®ï¼‰</p>
</li>
<li>
<p>é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§æµ‹è¯•</p>
</li>
</ul>
<ol start="6">
<li>
<p>å…¼å®¹æ€§æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>ä¸åŒHTTPæ–¹æ³•æµ‹è¯•ï¼ˆGET/POST/PUT/DELETEç­‰ï¼‰</p>
</li>
<li>
<p>ä¸åŒContent-Typeæµ‹è¯•ï¼ˆapplication/jsonã€application/x-www-form-urlencodedç­‰ï¼‰</p>
</li>
</ul>
<ol start="7">
<li>
<p>å¯é æ€§æµ‹è¯•</p>
</li>
</ol>
<ul>
<li>
<p>ç½‘ç»œå¼‚å¸¸æ¢å¤æµ‹è¯•</p>
</li>
<li>
<p>æœåŠ¡é™çº§ä¸ç†”æ–­æœºåˆ¶æµ‹è¯•</p>
</li>
<li>
<p>é‡å¤è¯·æ±‚å¤„ç†æµ‹è¯•ï¼ˆå¹‚ç­‰æ€§éªŒè¯ï¼‰</p>
</li>
</ul>
<ol start="8">
<li>
<p>æµ‹è¯•æ¡†æ¶è¦æ±‚</p>
</li>
</ol>
<ul>
<li>
<p>ä½¿ç”¨JUnit 5ä½œä¸ºæµ‹è¯•æ¡†æ¶åŸºç¡€</p>
</li>
<li>
<p>ä½¿ç”¨REST Assuredå®ç°HTTPè¯·æ±‚ä¸å“åº”éªŒè¯</p>
</li>
<li>
<p>å®ç°æµ‹è¯•æ•°æ®çš„å‚æ•°åŒ–ï¼ˆä½¿ç”¨@ParameterizedTestï¼‰</p>
</li>
<li>
<p>é…ç½®æµ‹è¯•æŠ¥å‘Šç”Ÿæˆï¼ˆåŒ…å«æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡ï¼‰</p>
</li>
<li>
<p>å®ç°æµ‹è¯•ç¯å¢ƒçš„çµæ´»é…ç½®ï¼ˆæ”¯æŒå¤šç¯å¢ƒåˆ‡æ¢ï¼‰</p>
</li>
</ul>
<p>è¯·æä¾›å®Œæ•´çš„æµ‹è¯•ç±»ç»“æ„è®¾è®¡ã€æ ¸å¿ƒæµ‹è¯•æ–¹æ³•ç¤ºä¾‹åŠå¿…è¦çš„å·¥å…·é…ç½®è¯´æ˜ã€‚</p>
</blockquote>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>Â Â Â Â Â  åŸºäºã€ŠEffective Javaã€‹è¿›è¡Œä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰å…·æœ‰æ·±è¿œçš„å·¥ç¨‹å’Œå›¢é˜Ÿä»·å€¼ã€‚è¿™æœ¬ä¹¦ä¸ä»…æ˜¯ä¸€æœ¬ç¼–ç¨‹æŒ‡å—ï¼Œæ›´æ˜¯ä¸€å¥—ç»è¿‡æ—¶é—´éªŒè¯çš„<strong>é«˜è´¨é‡ Java ä»£ç è®¾è®¡åŸåˆ™ä¸æœ€ä½³å®è·µé›†åˆ</strong>ã€‚å°†å…¶ä½œä¸º Code Review çš„ä¾æ®ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡ä»£ç è´¨é‡ã€å¯ç»´æŠ¤æ€§ã€å®‰å…¨æ€§å’Œå›¢é˜Ÿåä½œæ•ˆç‡ã€‚ä»¥å‰çš„AIå·¥å…·ï¼ˆå¦‚GitHub Copilotï¼‰åƒæ˜¯ä¸€ä¸ªååœ¨ä½ æ—è¾¹çš„â€œå‰¯é©¾é©¶â€ï¼Œä½ å†™ä¸€è¡Œå®ƒè¡¥ä¸€è¡Œï¼›è€Œ<strong>Julesåƒæ˜¯ä¸€ä¸ªä¸çŸ¥ç–²å€¦çš„â€œåˆçº§ç¨‹åºå‘˜â€å®ä¹ ç”Ÿ</strong>ï¼Œä½ å¯ä»¥æŠŠæ•´ä¸ªä»»åŠ¡äº¤ç»™å®ƒï¼Œè‡ªå·±å»å¿™åˆ«çš„äº‹ï¼Œè¿‡ä¸€ä¼šå›æ¥æ£€æŸ¥å®ƒæäº¤çš„ä»£ç åˆå¹¶è¯·æ±‚ï¼ˆPRï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576181242582892607</link>    <guid>https://juejin.cn/post/7576181242582892607</guid>    <pubDate>2025-11-25T03:15:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582892607" data-draft-id="7576212547235135531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T03:15:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:15:24.000Z" title="Tue Nov 25 2025 03:15:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›¸ä¿¡å¤§å®¶éƒ½ç»å†è¿‡è¿™æ ·çš„ç–‘æƒ‘ï¼Œåœ¨ä½¿ç”¨ AI çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘æ˜æ˜éƒ½çº æ­£è¿‡å®ƒçš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¸‹æ¬¡è¿˜æ˜¯ä¾ç„¶ä¼šçŠ¯åŒæ ·çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸é’ˆå¯¹æ€§å†™å¤§é‡çš„è§„åˆ™æ¥çº¦æŸæ•´ä¸ª Vibe Coding çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ä½†æ˜¯å°±ç®—æœ‰è¯¦ç»†çš„ rule ï¼Œæœ‰äº›å€”å¼ºçš„æ¨¡å‹ä¾ç„¶å–œæ¬¢æˆ‘è¡Œæˆ‘ç´ ï¼Œæ¯”å¦‚ Gemini 3 Pro å°±å®¹æ˜“å‡ºç°ï¼Œ <strong>å†™çš„å¤ªè¯¦ç»†çš„ prompt ï¼Œæ•ˆæœå±…ç„¶ä¸å¦‚æ¨¡ç³Šçš„</strong>ï¼Œä½ çº æ­£ä»–ï¼Œä»–ä¼šå…ˆè‚¯å®šä½ ï¼Œç„¶åè¯´è¿˜æ˜¯è¯¥æŒ‰ç…§æˆ‘çš„æ¥Â·Â·Â·Â·</p>
</blockquote>
<h2 data-id="heading-0">é—®é¢˜</h2>
<p>è°·æ­Œè¿™æ¬¡å…¬å¸ƒçš„è®ºæ–‡å¾ˆç›´è§‚çš„è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼š<strong>å› ä¸ºå¤§æ¨¡å‹æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ </strong> ï¼Œè®ºæ–‡æŠŠå½“å‰çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¢«æ¯”ä½œæ‚£æœ‰ <strong>â€œé¡ºè¡Œæ€§é—å¿˜ç—‡â€ï¼ˆAnterograde Amnesiaï¼‰</strong> çš„ç—…äºº ï¼Œè¿™ç§ç—…äººåªèƒ½ä¿ç•™å‘ç—…å‰çš„é•¿æœŸè®°å¿†ï¼Œæ— æ³•å½¢æˆæ–°çš„é•¿æœŸè®°å¿†ï¼Œåªèƒ½ä¾é çŸ­æš‚çš„çŸ­æœŸè®°å¿†ç”Ÿæ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369b747e84a34869b11b90b1b06394a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=SPT%2BjNorfMdl%2FlkYebROM39BP90%3D" alt="image-20251125103150345" loading="lazy"/></p>
<p>å…·ä½“å¯ä»¥è§£é‡Šä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<h3 data-id="heading-1">A. â€œæ•°å­—å¤±å¿†ç—‡â€ï¼šåªæœ‰ä¸¤æï¼Œæ²¡æœ‰ä¸­é—´æ€</h3>
<p>ç›®å‰çš„æ¨¡å‹åªæœ‰ä¸¤ç§è®°å¿†çŠ¶æ€ï¼Œä¸­é—´å­˜åœ¨å·¨å¤§çš„æ–­å±‚ï¼š</p>
<ol>
<li><strong>æå¿«ä¸”çŸ­æš‚çš„è®°å¿†</strong>ï¼ˆIn-Context Learningï¼‰ï¼š ä¹Ÿå°±æ˜¯ä½ çš„ <code>Prompt</code> æˆ–ä¸Šä¸‹æ–‡çª—å£ï¼Œè¿™éƒ¨åˆ†é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰å¤„ç†ï¼Œæ›´æ–°æå¿«ï¼Œä½†è¿™åªæ˜¯â€œä¸´æ—¶çš„â€ï¼Œä¸€æ—¦çª—å£å…³é—­æˆ–è¶…å‡ºé•¿åº¦ï¼Œä¿¡æ¯å°±æ¶ˆå¤±äº† ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒå¹¶èƒ½å¸å–ä½ çš„æ•™è®­çš„åŸå› </li>
<li><strong>å†»ç»“çš„é•¿æœŸè®°å¿†ï¼ˆPre-trained Weightsï¼‰ï¼š</strong> å¯¹åº”çš„æ˜¯æ¨¡å‹çš„ <code>MLP</code> å±‚ï¼ˆå‚æ•°ï¼‰ï¼Œè¿™éƒ¨åˆ†æ˜¯åœ¨é¢„è®­ç»ƒé˜¶æ®µé€šè¿‡æµ·é‡æ•°æ®â€œå›ºåŒ–â€ä¸‹æ¥çš„ï¼Œä¸€æ—¦éƒ¨ç½²äº†ï¼Œè¿™äº›å‚æ•°å°±æ˜¯é™æ€çš„ï¼Œæ— æ³•æ›´æ”¹ ã€‚</li>
</ol>
<p>è€Œç›®å‰çš„é—®é¢˜åœ¨äºï¼šå½“å‰æ¨¡å‹ç¼ºä¹å°†â€œå³æ—¶å¯¹è¯â€è½¬åŒ–ä¸ºâ€œé•¿æœŸå‚æ•°â€çš„æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ç¼ºä¹ä¸­é—´çš„é¢‘è°±ï¼š<strong>é‚£äº›åº”è¯¥ä»çŸ­æœŸé€æ¸å˜ä¸ºé•¿æœŸçš„è®°å¿†</strong>ã€‚</p>
<h3 data-id="heading-2">B. ç»´åº¦å•ä¸€ï¼šåªå †å äº†â€œæ·±åº¦â€ï¼Œå¿½ç•¥äº†â€œæ—¶é—´â€</h3>
<p>åœ¨è®ºæ–‡é‡Œï¼Œä¼ ç»Ÿçš„â€œæ·±åº¦å­¦ä¹ â€ä¸»è¦å…³æ³¨å †å æ›´å¤šçš„å±‚ï¼ˆDepthï¼‰æ¥å¢åŠ å®¹é‡ ï¼Œä½†è¿™ä¸€ç»´åº¦æ˜¯é™æ€çš„ã€‚</p>
<p>ç ”ç©¶äººå‘˜å‘ç°<strong>çœŸæ­£çš„å­¦ä¹ éœ€è¦æ­£äº¤çš„å¦ä¸€ä¸ªç»´åº¦ï¼šæ—¶é—´ï¼ˆæˆ–é¢‘ç‡ï¼‰</strong> ï¼Œå¤§è„‘å¹¶ä¸æ˜¯ä»¥ç»Ÿä¸€çš„é€Ÿåº¦æ›´æ–°æ‰€æœ‰ç¥ç»å…ƒçš„ï¼Œè€Œæ˜¯ä»¥ä¸åŒçš„é¢‘ç‡ï¼ˆè„‘æ³¢ï¼‰è¿ä½œï¼Œè€Œç›®å‰çš„ LLM å°±åƒæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ‰€æœ‰æ¥¼å±‚éƒ½é™æ­¢ä¸åŠ¨çš„å»ºç­‘ï¼Œåªæœ‰æœ€é¡¶å±‚çš„â€œæ¥å¾…å¤„â€ï¼ˆContextï¼‰åœ¨å·¥ä½œã€‚</p>
<h3 data-id="heading-3">C. ä¼˜åŒ–å™¨ä¸æ¶æ„çš„åˆ†ç¦»</h3>
<p>åœ¨ä¼ ç»Ÿæ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>æ¶æ„</strong>ï¼ˆå¦‚ Transformerï¼‰å’Œ<strong>ä¼˜åŒ–å™¨</strong>ï¼ˆå¦‚ Adamï¼‰è¢«çœ‹ä½œæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸œè¥¿ï¼Œæ¶æ„è´Ÿè´£æ¨ç†ï¼Œä¼˜åŒ–å™¨è´Ÿè´£åœ¨è®­ç»ƒæ—¶æ›´æ–°å‚æ•°ã€‚</p>
<p>è€Œè®ºæ–‡çš„é¢ è¦†æ€§è§‚ç‚¹æ˜¯ï¼š ä¼˜åŒ–å™¨æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§<strong>è”æƒ³è®°å¿†æ¨¡å—ï¼ˆAssociative Memoryï¼‰</strong> ï¼Œç›®å‰çš„æ¨¡å‹åœ¨éƒ¨ç½²åä¸¢å¼ƒäº†ä¼˜åŒ–å™¨ï¼Œå¯¼è‡´å®ƒä»¬å¤±å»äº†â€œè‡ªæˆ‘ä¿®æ”¹â€å’Œâ€œå‹ç¼©æ¢¯åº¦â€çš„èƒ½åŠ›ï¼Œä»è€Œå¤±å»äº†å­¦ä¹ èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">è§£å†³åŠæ³•</h2>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè°·æ­Œæå‡ºäº†ä¸€ç§æ–°çš„èŒƒå¼ï¼Œä¸å†æŠŠæ¨¡å‹çœ‹ä½œä¸€ä¸ªæ‰å¹³çš„ç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯çœ‹ä½œ<strong>ä¸€ç»„åµŒå¥—çš„ä¼˜åŒ–é—®é¢˜</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412bd2c859c6487a995362d8eb2bc841~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=GbFVHZaKtmRueCmIGPhwLQiTjnY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">A. æ ¸å¿ƒç†å¿µï¼šè¿ç»­è®°å¿†é¢‘è°± (Continuum Memory System)</h3>
<p>å°±åƒäººç±»å¤§è„‘æœ‰ä¸åŒé¢‘ç‡çš„è„‘æ³¢ï¼ˆDeltaæ³¢ã€Thetaæ³¢ã€Alphaæ³¢ç­‰ï¼‰åˆ†åˆ«è´Ÿè´£ä¸åŒå±‚çº§çš„è®°å¿†æ•´åˆä¸€æ · ï¼Œæ¨¡å‹ä¹Ÿåº”è¯¥æœ‰ä¸åŒæ›´æ–°é¢‘ç‡çš„ç»„ä»¶ã€‚</p>
<ul>
<li>
<p><strong>ä¼ ç»Ÿæ¨¡å‹ï¼š</strong> é¢‘ç‡åªæœ‰ 0 ï¼ˆå†»ç»“çš„å‚æ•°ï¼‰å’Œ â™¾ï¸ï¼ˆæå¿«çš„ Attentionï¼‰ã€‚</p>
</li>
<li>
<p><strong>åµŒå¥—å­¦ä¹ æ¨¡å‹ï¼š</strong> åˆ›å»ºä¸€ä¸ªï¼š</p>
<ul>
<li><strong>Level 1 (æå¿«):</strong> å¤„ç†å½“å‰çš„ Tokenã€‚</li>
<li><strong>Level 2 (ä¸­ç­‰):</strong> æ¯éš” 16 ä¸ª Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰çŸ­æœŸä¸Šä¸‹æ–‡</li>
<li><strong>Level 3 (æ…¢é€Ÿ):</strong> æ¯éš” 100ä¸‡ Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰é•¿æœŸçŸ¥è¯†</li>
<li><strong>Level 4 (ææ…¢):</strong> ç±»ä¼¼ç›®å‰çš„é¢„è®­ç»ƒçŸ¥è¯†</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œå·¦å›¾ï¼ˆDeep Learningï¼‰å±•ç¤ºäº†é€šå¸¸ç†è§£çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ RNN + Attentionï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ‰å¹³çš„åºåˆ— ï¼Œè¿™ç§è§†è§’éšè—äº†å†…éƒ¨çš„æ¢¯åº¦æµåŠ¨ ã€‚</p>
<p>è€Œå³å›¾ï¼ˆNeural Learning Moduleï¼‰ï¼š*æ˜¯è®ºæ–‡çš„æ ¸å¿ƒè§†è§’ï¼Œå®ƒå°†æ¨¡å‹çœ‹ä½œä¸€ä¸ªä¸ª<strong>åµŒå¥—çš„ç«‹æ–¹ä½“</strong>ï¼Œæ¯ä¸€ä¸ªç«‹æ–¹ä½“ä»£è¡¨ä¸€ä¸ªâ€œä¼˜åŒ–é—®é¢˜â€ ï¼Œä»è€Œå®ç°ä¸åŒ Level çš„è¿ç»­é¢‘è°±ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„æ¢¯åº¦æµï¼ˆGradient Flowï¼‰å’Œæ›´æ–°ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28937766376b45368aa2ef073529650e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=7yBZTFJmwdmXzYOvjKLLhmvhF3o%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯ <strong>â€œå±‚ï¼ˆLayerï¼‰â€ä¸ä»…ä»…æ˜¯ç©ºé—´çš„å †å ï¼Œè€Œæ˜¯æ—¶é—´ä¸Šçš„åµŒå¥—</strong>ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆæ¨¡å‹åº”è¯¥åŒ…å«â€œå†…éƒ¨ä¼˜åŒ–å™¨â€ï¼šå³æ¨¡å‹åœ¨æ¨ç†æ—¶ï¼Œå†…éƒ¨çš„å°ç›’å­åº”è¯¥åœ¨ä¸æ–­è‡ªæˆ‘ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-6">B. æ–°æ¶æ„ï¼šHOPE (Self-Modifying Titans + Continuum Memory)</h3>
<p>è®ºæ–‡ä½œè€…æå‡ºäº† <strong>HOPE</strong> çš„å…·ä½“å®ç°æ¨¡å‹ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªå…³é”®æŠ€æœ¯ï¼š</p>
<ol>
<li>è‡ªæˆ‘ä¿®æ”¹çš„ Titans** (Self-Modifying Titans)</li>
</ol>
<p>æ¨¡å‹ä¸å†ä¾èµ–å¤–éƒ¨çš„ä¼˜åŒ–å™¨ï¼ˆå¦‚ Adamï¼‰æ¥å‘Šè¯‰å®ƒå¦‚ä½•æ›´æ–°ï¼Œè€Œæ˜¯å­¦ä¹ å¦‚ä½•ä¿®æ”¹è‡ªå·±ï¼Œæ¨¡å‹å†…éƒ¨åŒ…å«äº†ä¸€ä¸ªâ€œå­¦ä¹ æ¨¡å—â€ï¼Œå®ƒèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°è‡ªå·±çš„å‚æ•°ï¼Œè¿™æ„å‘³ç€æ¨¡å‹åœ¨å’Œä½ å¯¹è¯çš„è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šåœ¨å¾®è°ƒå®ƒè‡ªå·±çš„éƒ¨åˆ†ç»“æ„</p>
<ol start="2">
<li>å¤šçº§ MLP ç³»ç»Ÿ</li>
</ol>
<p>HOPE ä½¿ç”¨äº†ä¸€ç³»åˆ—åµŒå¥—çš„ MLPï¼ˆå¤šå±‚æ„ŸçŸ¥æœºï¼‰å—ï¼Œæ¯ä¸ªå—æœ‰ä¸åŒçš„â€œå—å¤§å°â€ï¼ˆChunk Sizeï¼‰å’Œæ›´æ–°é¢‘ç‡ï¼š</p>
<ul>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆå¿«ï¼Œè´Ÿè´£è®°ä½åˆšæ‰çš„å¯¹è¯</li>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆæ…¢ï¼Œè´Ÿè´£æ²‰æ·€çŸ¥è¯†</li>
</ul>
<p>ç»„åˆèµ·æ¥ï¼Œå°±æ„æˆäº†â€œæ¢¯åº¦è®°å¿†æ›²çº¿â€ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc5b0a9cccc041b0b6468a03185b4a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=pBDlZP47djcKi1OWHewdrYZ0aqA%3D" alt="" loading="lazy"/></p>
<p>å¯¹æ¯” Transformer çš„æç«¯é¢‘ç‡ï¼Œå¯ä»¥çœ‹å‡ºæ¥ HOPE (å·¦ä¾§)è¿™æ˜¯ä¸€ä¸ªè¿ç»­çš„é¢‘è°±ï¼Œ</p>
<ul>
<li>High Frequency FFNï¼šå—å¤§å°ï¼ˆChunk Lengthï¼‰ä¸º 16ï¼Œæ›´æ–°é¢‘ç‡é«˜ ã€‚</li>
<li>Mid Frequency FFNï¼šå—å¤§å°ä¸º 1Mï¼ˆä¸€ç™¾ä¸‡ï¼‰ï¼Œæ›´æ–°é¢‘ç‡ä¸­ç­‰ã€‚</li>
<li>Low Frequency FFNï¼šæ›´æ–°ææ…¢ ã€‚</li>
</ul>
<p>ä»è€Œè§£å†³â€œæ— æ³•ç»§ç»­å­¦ä¹ â€çš„é—®é¢˜ï¼Œå±•ç¤ºäº†å¦‚ä½•å¡«è¡¥â€œçŸ­æœŸè®°å¿†â€å’Œâ€œé•¿æœŸè®°å¿†â€ä¹‹é—´çš„ç©ºç™½ï¼Œåˆ›å»ºäº†ä¸åŒé€Ÿç‡çš„è®°å¿†å±‚çº§ã€‚</p>
<h3 data-id="heading-7">C. æ·±åº¦ä¼˜åŒ–å™¨ (Deep Optimizers)</h3>
<p>è®ºæ–‡è¯æ˜äº†åŠ¨é‡æ¢¯åº¦ä¸‹é™ï¼ˆMomentum SGDï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª 2 çº§çš„è”æƒ³è®°å¿†ç³»ç»Ÿ ï¼ŒHOPE åˆ©ç”¨è¿™ä¸€å‘ç°ï¼Œè®¾è®¡äº†æ›´å…·è¡¨è¾¾èƒ½åŠ›çš„ä¼˜åŒ–å™¨ï¼Œä½¿å…¶æˆä¸ºæ¨¡å‹æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è®­ç»ƒå®Œå°±æ‰”æ‰çš„å·¥å…·ã€‚</p>
<h2 data-id="heading-8">å®éªŒç»“æœä¸æ„ä¹‰</h2>
<p>åœ¨å®éªŒä¸­ï¼ŒHOPE æ¨¡å‹ï¼ˆ760M å’Œ 1.3B å‚æ•°é‡ï¼‰åœ¨è¯­è¨€å»ºæ¨¡å’Œå¸¸è¯†æ¨ç†ä»»åŠ¡ä¸Šï¼Œ<strong>å‡»è´¥äº†åŒç­‰è§„æ¨¡çš„ Transformer++ã€RetNet å’Œ Mamba (Titans)</strong> ï¼Œ æ›´é‡è¦çš„æ˜¯å®ƒå±•ç¤ºäº†æ›´ä½çš„å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰ï¼Œè¯æ˜äº†è¿™ç§â€œåŠ¨æ€æ›´æ–°â€æœºåˆ¶çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b22fce82bb4efb87493f8830614f4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=BoT%2BDUA%2BYoU2s2x8fx2pifdNY%2FI%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–è®ºæ–‡çš„æ„ä¹‰ä¸ä»…ä»…åœ¨äºæå‡ºäº†ä¸€ä¸ªæ–°æ¨¡å‹ï¼Œè€Œåœ¨äºå®ƒæŒ‘æˆ˜äº†â€œæ·±åº¦å­¦ä¹ â€è¿™ä¸ªåå­—æœ¬èº« ï¼š</p>
<ul>
<li><strong>ä»â€œæ·±åº¦â€åˆ°â€œåµŒå¥—â€ï¼š</strong> æœªæ¥çš„ AI ç«äº‰å¯èƒ½ä¸å†å•çº¯æ˜¯å †å å±‚æ•°å’Œå‚æ•°è§„æ¨¡ï¼ˆScaleï¼‰ï¼Œè€Œæ˜¯è®¾è®¡æ›´åˆç†çš„<strong>æ—¶é—´æ›´æ–°é¢‘ç‡ï¼ˆTime/Frequencyï¼‰</strong></li>
</ul>

<ul>
<li><strong>ç»ˆèº«å­¦ä¹  (Lifelong Learning)ï¼š</strong> å¦‚æœ HOPE æ¶æ„è¢«è§„æ¨¡åŒ–ï¼Œä¹Ÿè®¸å¯ä»¥ä¼šçœ‹åˆ°çœŸæ­£çš„â€œå…»æˆç³»â€ AIï¼Œå®ƒä¸ä¼šåœ¨å‘å¸ƒé‚£å¤©å°±åœæ­¢æˆé•¿ï¼Œè€Œæ˜¯é€šè¿‡æ¯ä¸€æ¬¡äº¤äº’ï¼Œå°†ä¿¡æ¯ä»çŸ­æœŸè®°å¿†é€æ¸æ¸—é€åˆ°é•¿æœŸè®°å¿†ä¸­ï¼ŒçœŸæ­£è§£å†³â€œç¾éš¾æ€§é—å¿˜â€å’Œâ€œæ— æ³•æŒç»­å­¦ä¹ â€çš„ç—›ç‚¹ã€‚</li>
</ul>
<p>æ€»ç»“èµ·æ¥ï¼Œä¹‹å‰çš„ ChatGPT å’Œ Gemini åƒæ˜¯ä¸€ä¸ªåªæœ‰â€œæ­¤æ—¶æ­¤åˆ»â€å’Œâ€œå‡ºå‚è®¾ç½®â€çš„æœºå™¨ï¼›è€Œ Google æå‡ºçš„ HOPE æ¶æ„ï¼Œè¯•å›¾èµ‹äºˆ AI â€œä»æ­¤åˆ»èµ°å‘æ°¸æ’â€çš„è®°å¿†èƒ½åŠ›ï¼Œè®©æ¨¡å‹åœ¨è¿è¡Œä¸­é€šè¿‡è‡ªæˆ‘ä¿®æ”¹æ¥æŒç»­è¿›åŒ–ã€‚</p>
<blockquote>
<p>è€Œå®é™…ä¸Šå¯¹åº”ä¹‹å‰ Deepseek åˆ©ç”¨å›¾ç‰‡æ¥å‹ç¼©è®°å¿†çš„å®ç°ï¼Œä¹Ÿæ˜¯åœ¨è®°å¿†æ—¶æ•ˆæ€§ä¸Šçš„æ¢ç´¢ã€‚</p>
</blockquote>
<h2 data-id="heading-9">æœ€å</h2>
<p><strong>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œèƒ½â€œåƒä¸€å ‘é•¿ä¸€æ™ºâ€çš„ AI ä¹Ÿè®¸ç¦»æˆ‘ä»¬å°±ä¸è¿œäº†</strong>ï¼Œä¸è¿‡å¯ä»¥çŒœæµ‹ï¼Œè¿™ç§å®ç°ä¹Ÿæœ‰è¿™ç›¸åº”çš„å±€é™æ€§é—®é¢˜éœ€è¦å¤„ç†ï¼Œä¾‹å¦‚ HOPE æ¶æ„çš„æ ¸å¿ƒåœ¨äºâ€œæ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­ä¿®æ”¹è‡ªå·±â€ ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½åƒä¼ ç»Ÿ Transformer é‚£æ ·åªè¿›è¡Œç®€å•çš„çŸ©é˜µä¹˜æ³•ï¼Œè¿˜éœ€è¦è¿›è¡Œæ¢¯åº¦çš„è®¡ç®—å’Œå‚æ•°æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<ul>
<li>æ›´å¤šçš„æ€§èƒ½å¼€é”€ï¼Œä¾‹å¦‚é¢å¤–çš„ MLP è¿ç®—å’Œå®æ—¶æ¢¯åº¦è®¡ç®—</li>
<li>æ›´å¤šçš„å†…å­˜å ç”¨ï¼Œæ¯”å¦‚ HOPE éœ€è¦å­˜å‚¨â€œä¼˜åŒ–å™¨çŠ¶æ€â€ å’Œç®¡ç†çŠ¶æ€å¤§å°</li>
<li>HOPE è¦æ±‚å‚æ•°åœ¨ <code>Forward</code> è¿‡ç¨‹ä¸­åŠ¨æ€å˜åŒ– ï¼Œè¿™ç§â€œè‡ªæˆ‘ä¿®æ”¹â€çš„ä»£ç å®ç°éš¾åº¦å¤§ï¼Œä¸”éš¾ä»¥åˆ©ç”¨ç°æœ‰çš„åº•å±‚ Kernel ä¼˜åŒ–</li>
<li>å¤šåµŒå¥—ä¸‹çš„æ¢¯åº¦æµç®¡ç†å’Œç‹¬ç«‹é—®é¢˜</li>
<li>Â·Â·Â·Â·Â·</li>
</ul>
<blockquote>
<p>æœ€åï¼Œæœ¬æ–‡è§£è¯»ä¸»è¦å‚è€ƒ Gemini åˆ†æã€‚</p>
</blockquote>
<h2 data-id="heading-10">åŸæ–‡é“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fabehrouz.github.io%2Ffiles%2FNL.pdf" target="_blank" title="https://abehrouz.github.io/files/NL.pdf" ref="nofollow noopener noreferrer">abehrouz.github.io/files/NL.pdâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™å¼€å‘è€…çš„æ— ä»£ç /ä½ä»£ç æŠ€æœ¯å†³ç­–æŒ‡å—ï¼ˆ2026ï¼‰]]></title>    <link>https://juejin.cn/post/7576210031873654825</link>    <guid>https://juejin.cn/post/7576210031873654825</guid>    <pubDate>2025-11-25T03:17:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873654825" data-draft-id="7576212547235119147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™å¼€å‘è€…çš„æ— ä»£ç /ä½ä»£ç æŠ€æœ¯å†³ç­–æŒ‡å—ï¼ˆ2026ï¼‰"/> <meta itemprop="keywords" content="å¼€æº,ä½ä»£ç ,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T03:17:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NocoBase"/> <meta itemprop="url" content="https://juejin.cn/user/180779873743566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™å¼€å‘è€…çš„æ— ä»£ç /ä½ä»£ç æŠ€æœ¯å†³ç­–æŒ‡å—ï¼ˆ2026ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180779873743566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NocoBase
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:17:44.000Z" title="Tue Nov 25 2025 03:17:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fa-developers-technical-decision-guide-to-no-code-and-low-code" target="_blank" title="https://www.nocobase.com/cn/blog/a-developers-technical-decision-guide-to-no-code-and-low-code" ref="nofollow noopener noreferrer">www.nocobase.com/cn/blog/a-dâ€¦</a></p>
<h2 data-id="heading-0">å†™åœ¨å¼€å¤´ï¼šå¼€å‘è€…å¦‚ä½•æŒæ§ä½ä»£ç /æ— ä»£ç ï¼Ÿ</h2>
<p>è¿‡å»å‡ å¹´ï¼Œä½ä»£ç /æ— ä»£ç å¸¸è¢«ç®€å•è´´ä¸Šâ€œéå¼€å‘è€…å·¥å…·â€çš„æ ‡ç­¾ã€‚</p>
<p>å¦‚ä»Šï¼Œéšç€æ— ä»£ç /ä½ä»£ç å¹³å°èƒ½åŠ›æ·±åŒ–ï¼ˆæ•°æ®å»ºæ¨¡ã€æƒé™ä½“ç³»ã€æ‰©å±•æ’ä»¶ï¼‰ä»¥åŠ <strong>AI æŠ€æœ¯çš„çˆ†å‘å¼å‘å±•</strong>ï¼Œæˆ‘ä»¬æ­£ç«™åœ¨ä¸€ä¸ªæ–°çš„æŠ€æœ¯äº¤å‰ç‚¹ã€‚</p>
<p><strong>AI æ­£åœ¨ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦æ¥ç®¡é‡å¤æ€§ç¼–ç å·¥ä½œã€‚</strong></p>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fgithub-open-source-ai-projects" target="_blank" title="https://www.nocobase.com/cn/blog/github-open-source-ai-projects" ref="nofollow noopener noreferrer">GitHub ä¸Š Star æ•°é‡å‰ 20 çš„å¼€æº AI é¡¹ç›®</a></p>
<p>LLM æ­£åœ¨è¿…é€Ÿæˆä¸ºâ€œåˆçº§ä»£ç ç”Ÿæˆå™¨â€ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥è¾“å‡ºç»„ä»¶ä»£ç æˆ–åŸºç¡€é€»è¾‘ã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œæ— ä»£ç /ä½ä»£ç å¹³å°ä¸å†ä»…ä»…æ˜¯æ‹–æ‹½ç»„ä»¶ï¼Œå®ƒæ¼”å˜æˆ<strong>ç»“æ„åŒ–ã€å¯æ²»ç†çš„ AI åä½œç•Œé¢</strong>ã€‚</p>
<p>æ— ä»£ç /ä½ä»£ç å¹³å°æä¾›äº†<strong>æ˜ç¡®çš„æ¶æ„è¾¹ç•Œã€é¢„å®šä¹‰çš„é…ç½®æ¨¡å‹å’Œè¿è¡Œæ—¶ç¯å¢ƒ</strong>ï¼Œè¿™ä½¿å¾— AI çš„èƒ½åŠ›èƒ½è¢«é«˜æ•ˆã€å®‰å…¨åœ°æ¥å…¥ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡é€»è¾‘çš„ AI åŒ–ï¼š</strong> AI å¯ä»¥ç›´æ¥åœ¨æ— ä»£ç /ä½ä»£ç å¹³å°ä¸Šé…ç½®å¤æ‚çš„å·¥ä½œæµæˆ–ç”Ÿæˆæ•°æ®æ¨¡å‹ã€‚</li>
<li><strong>å¼€å‘è€…çš„ä»·å€¼é‡å¡‘ï¼š</strong> å¼€å‘è€…å°†ä¸å†æŠŠæ—¶é—´æµªè´¹åœ¨ç¼–å†™ CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ä»£ç ä¸Šï¼Œè€Œæ˜¯ä¸“æ³¨äº<strong>è®¾è®¡å¹³å°æœ¬èº«</strong>ã€<strong>å®šä¹‰å¹³å°çš„æ‰©å±•ç‚¹</strong>ã€ä»¥åŠ<strong>å¤„ç† AI æ— æ³•èƒœä»»çš„å¤æ‚é›†æˆä¸åº•å±‚è°ƒä¼˜</strong>ã€‚</li>
</ul>
<p>å¼€å‘è€…é¢ä¸´çš„é—®é¢˜å› æ­¤å‡çº§ä¸ºï¼š</p>
<p><strong>åœ¨ AI å’Œæ— ä»£ç /ä½ä»£ç å…±åŒåŠ é€Ÿçš„æ—¶ä»£ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å®šä¹‰ä»£ç çš„è¾¹ç•Œï¼Ÿå¦‚ä½•åœ¨é«˜æ•ˆç‡ä¸åº•å±‚å¯æ§æ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯æ²»ç†æ€§ï¼Ÿ</strong></p>
<p>æœ¬æŒ‡å—æ—¨åœ¨ä¸ºæŠ€æœ¯å†³ç­–è€…å’Œå¼€å‘è€…ï¼Œé‡æ–°åˆ’æ¸…æ— ä»£ç /ä½ä»£ç çš„é€‚ç”¨è¾¹ç•Œã€‚</p>
<blockquote>
<p>ğŸ’¬ å—¨ï¼ä½ æ­£åœ¨é˜…è¯» NocoBase åšå®¢ã€‚NocoBase æ˜¯ä¸€ä¸ªææ˜“æ‰©å±•çš„ AI æ— ä»£ç /ä½ä»£ç å¼€å‘å¹³å°ï¼Œç”¨äºæ„å»ºä¼ä¸šåº”ç”¨ã€å†…éƒ¨å·¥å…·å’Œå„ç±»ç³»ç»Ÿã€‚å®ƒå®Œå…¨æ”¯æŒè‡ªæ‰˜ç®¡ï¼ŒåŸºäºæ’ä»¶æ¶æ„è®¾è®¡ï¼Œå¼€å‘è€…å‹å¥½ã€‚â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnocobase%2Fnocobase" target="_blank" title="https://github.com/nocobase/nocobase" ref="nofollow noopener noreferrer">æ¬¢è¿åœ¨ GitHub ä¸Šäº†è§£æˆ‘ä»¬</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23c937ef2ad94b04a54bde6b0437b3e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645464&amp;x-signature=Ko2RSOuHCj2G8RBjoFR1FP6cd%2Bw%3D" alt="low code and no code.png" loading="lazy"/></p>
<h2 data-id="heading-1">å†³ç­–æ ‘ï¼šä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ï¼Ÿ</h2>
<p>è¯„ä¼°æ— ä»£ç /ä½ä»£ç å¹³å°é€‚ç”¨æ€§ï¼Œåº”éµå¾ªå·¥ç¨‹åŒ–åˆ¤æ–­ã€‚ä¸€æ—¦æ ¸å¿ƒç³»ç»Ÿ<strong>ä¸æ»¡è¶³</strong>ä»»ä¸€â€œä¸é€‚åˆâ€æ¡ä»¶ï¼Œåº”ç«‹å³é‡‡ç”¨ä¼ ç»Ÿä»£ç å¼€å‘ã€‚</p>



































<table><thead><tr><th>æ­¥éª¤</th><th>åˆ¤æ–­æ ‡å‡†</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>Step 1: ä¸šåŠ¡ç»“æ„æ€§</td><td>ä¸šåŠ¡è§„åˆ™æ˜¯å¦èƒ½è¢«æ•°æ®æ¨¡å‹ï¼ˆè¡¨ç»“æ„ï¼‰ä¸æµç¨‹å›¾æ¸…æ™°è¡¨è¾¾ï¼Ÿ</td><td>å¦ â†’ ä¸é€‚åˆ</td></tr><tr><td>Step 2: äº¤äº’å¤æ‚åº¦</td><td>äº¤äº’æ˜¯å¦è¶…å‡ºâ€œè¡¨å• + è¡¨æ ¼ + é€šç”¨è§†å›¾â€çš„ä¸­ç­‰å¤æ‚åº¦ï¼Ÿ</td><td>æ˜¯ â†’ ä¸é€‚åˆ</td></tr><tr><td>Step 3: æ€§èƒ½è¦æ±‚</td><td>æ˜¯å¦éœ€è¦å®æ—¶æ€§ï¼ˆLatency &lt; 100msï¼‰ã€é«˜å¹¶å‘ã€é«˜ååæˆ–åº•å±‚è°ƒä¼˜ï¼Ÿ</td><td>æ˜¯ â†’ ä¸é€‚åˆ</td></tr><tr><td>Step 4: æ‰©å±•è¾¹ç•Œ</td><td>æœªæ¥åŠå¹´éœ€æ±‚ä¸æ‰©å±•ç‚¹æ˜¯å¦å¯é¢„æœŸã€å¯æ¨¡å—åŒ–ï¼Ÿ</td><td>å¦ â†’ å°å¿ƒä½¿ç”¨</td></tr><tr><td>Step 5: å›¢é˜Ÿæ²»ç†èƒ½åŠ›</td><td>å›¢é˜Ÿæ˜¯å¦æ„¿æ„é‡‡ç”¨å¹³å°åŒ–æ–¹å¼ï¼Œå¹¶å»ºç«‹é…ç½®æ²»ç†æµç¨‹ï¼Ÿ</td><td>å¦ â†’ ä¸é€‚åˆ</td></tr></tbody></table>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fchoosing-and-deploying-low-code-tools-a-developers-guide" target="_blank" title="https://www.nocobase.com/cn/blog/choosing-and-deploying-low-code-tools-a-developers-guide" ref="nofollow noopener noreferrer">å¼€å‘è€…ä½ä»£ç å·¥å…·é€‰å‹ä¸éƒ¨ç½²æŒ‡å—</a></p>
<h2 data-id="heading-2">æœ€ä½³ä½¿ç”¨åœºæ™¯=æ•ˆç‡æœ€å¤§åŒ–</h2>
<p>æ— ä»£ç /ä½ä»£ç çš„ä»·å€¼åœ¨äºè§£è€¦ä¸šåŠ¡çš„æ˜“å˜éƒ¨åˆ†ï¼ˆæ•°æ®ã€æµç¨‹ã€æƒé™ï¼‰ä¸åº•å±‚ä»£ç çš„ç¨³å®šéƒ¨åˆ†ï¼ˆè¿è¡Œæ—¶ã€æ¸²æŸ“å¼•æ“ï¼‰ã€‚</p>
<ul>
<li><strong>ä¸šåŠ¡é€»è¾‘æ¸…æ™°ã€è§„åˆ™å¯æŠ½è±¡çš„åœºæ™¯ï¼š</strong> ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯æ•°æ®æ¨¡å‹ã€è¡¨å•ã€æµç¨‹å’Œæƒé™ã€‚æ¯”å¦‚ï¼š åå°ç®¡ç†ç³»ç»Ÿï¼ˆAdmin Panelï¼‰ã€å†…éƒ¨å®¡æ‰¹æµã€æ•°æ®è¿è¥é¢æ¿ã€å·¥å•/ç®€å• CRM ç­‰ã€‚</li>
<li><strong>å›¢é˜Ÿäººæ‰‹æœ‰é™ã€äº¤ä»˜å‘¨æœŸç´§è¿«ï¼š</strong> é€‚ç”¨äºè¿½æ±‚å¯ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§é«˜äºæè‡´å¤–è§‚çš„å†…éƒ¨ç³»ç»Ÿã€‚</li>
<li><strong>è·¨éƒ¨é—¨åä½œä¸åˆ†å·¥ï¼šå¼€å‘è€…</strong>è´Ÿè´£åº•å±‚æ¶æ„å’Œæ‰©å±•èƒ½åŠ›ï¼ˆå¦‚è‡ªå®šä¹‰ APIã€å¤æ‚çš„è®¡ç®—é€»è¾‘ï¼‰ã€‚<strong>ä¸šåŠ¡/è¿è¥å›¢é˜Ÿ</strong>è´Ÿè´£ç•Œé¢é…ç½®å’Œæµç¨‹è°ƒæ•´ã€‚</li>
</ul>
<h2 data-id="heading-3">ä¸é€‚ç”¨åœºæ™¯=é»‘ç®±ä¸é™·é˜±</h2>
<p>å¼ºè¡Œåœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨æ— ä»£ç å’Œä½ä»£ç ï¼Œå¹³å°æŠ½è±¡å±‚å°†æˆä¸ºæ€§èƒ½è´Ÿæ‹…å’Œæ¶æ„é»‘ç®±ã€‚</p>
<ol>
<li><strong>æ ¸å¿ƒå¼•æ“ä¸é«˜è¦æ±‚ç³»ç»Ÿ</strong></li>
</ol>
<ul>
<li><strong>é«˜å¹¶å‘/å®æ—¶æ€§ï¼š</strong> ä¾‹å¦‚äº¤æ˜“æ’®åˆã€æµå¼è®¡ç®—ã€‚è¿™äº›åœºæ™¯éœ€è¦å¯¹åº•å±‚ I/Oã€å†…å­˜å’Œç®—æ³•è¿›è¡Œæ¯«ç§’çº§çš„ç²¾ç»†è°ƒä¼˜ï¼Œå¹³å°æŠ½è±¡å±‚å¼•å…¥çš„æ€§èƒ½å¼€é”€æ˜¯ä¸å¯æ¥å—çš„ã€‚</li>
<li><strong>å¤æ‚è®¡ç®—/ç®—æ³•ï¼š</strong> AI æ¨¡å‹æ¨ç†ã€å›¾åƒéŸ³è§†é¢‘å¤„ç†ç­‰ã€‚å¼ºä¾èµ–åº•å±‚å·¥ç¨‹èƒ½åŠ›å’Œä¸å—é™çš„è¿è¡Œæ—¶æ²™ç®±ç¯å¢ƒã€‚</li>
</ul>
<ol start="2">
<li><strong>æè‡´å‰ç«¯äº¤äº’ä¸ä½“éªŒè¦æ±‚</strong></li>
</ol>
<p>é«˜åº¦è‡ªå®šä¹‰æ¸²æŸ“ï¼Œæ¯”å¦‚å¤§å‹ C ç«¯äº§å“ã€å¤æ‚çš„è‡ªå®šä¹‰åŠ¨ç”»æˆ–å¤šç«¯ç»Ÿä¸€ä½“éªŒã€‚è¿™äº›éœ€è¦å®Œæ•´å‰ç«¯æ¡†æ¶çš„çµæ´»æ€§ã€‚</p>
<ol start="3">
<li><strong>é¢‘ç¹çªç ´æ¡†æ¶è¾¹ç•Œçš„é¡¹ç›®</strong></li>
</ol>
<p>æœ€æ€•â€œèƒ½åš 80%ï¼Œä½†å‰©ä¸‹çš„ 20% æ˜¯æ ¸å¿ƒåŠŸèƒ½ä½†æ˜¯æ— ä»£ç ä½ä»£ç åšä¸äº†â€ã€‚è¿™æœ€ç»ˆä¼šæ¼”å˜æˆäºŒæ¬¡å¼€å‘çš„æ¶æ€§å¾ªç¯ï¼Œå¯¼è‡´æŠ€æœ¯å€ºçˆ†ç‚¸ã€‚</p>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fwhy-do-developers-struggle-with-low-code" target="_blank" title="https://www.nocobase.com/cn/blog/why-do-developers-struggle-with-low-code" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆä½ä»£ç è®©å¼€å‘è€…å¤´ç–¼ï¼Ÿ6 æ¬¾å¥½ç”¨å·¥å…·æ¨è</a></p>
<h2 data-id="heading-4">å¼€å‘è€…æŒæ§çš„ 5 ä¸ªæ³•åˆ™</h2>
<p>åœ¨ä½¿ç”¨æ— ä»£ç å’Œä½ä»£ç å¹³å°çš„æ—¶å€™ï¼Œå¼€å‘è€…ä¸€å®šè¦è®°ä½ï¼šè‡ªå·±ä¸æ˜¯<strong>é…ç½®è€…</strong>ï¼Œè€Œåº”æ˜¯å¹³å°çš„<strong>è®¾è®¡è€…ã€æ²»ç†è€…å’Œæ‰©å±•è€…</strong>ã€‚</p>
<ol>
<li><strong>æ•°æ®æ¨¡å‹ä¼˜å…ˆï¼Œè€Œéç•Œé¢ä¼˜å…ˆ</strong></li>
</ol>
<p>å¼€å‘è€…å¿…é¡»ä¸»å¯¼<strong>æ•°æ®å»ºæ¨¡ã€å…³ç³»è®¾è®¡ã€æƒé™åˆ’åˆ†</strong>ã€‚ç•Œé¢çš„æ­å»ºå¯ä»¥äº¤ç»™ä¸šåŠ¡ï¼Œä½†<strong>æ•°æ®ç»“æ„ä¸æœåŠ¡è¾¹ç•Œ</strong>æ˜¯ç³»ç»Ÿçš„ç”Ÿå‘½åŠ›æ‰€åœ¨ã€‚</p>
<ol start="2">
<li><strong>ç”¨å®ƒåšç»“æ„åŒ–çš„éƒ¨åˆ†ï¼Œå°†ä»£ç å†™åœ¨æ›´æœ‰ä»·å€¼çš„åœ°æ–¹</strong></li>
</ol>
<p>æ— ä»£ç /ä½ä»£ç è´Ÿè´£<strong>é‡å¤æ€§ã€å¯é…ç½®çš„éƒ¨åˆ†</strong>ã€‚å¼€å‘è€…ä»£ç è´Ÿè´£<strong>ä¸å¯é…ç½®ã€å¤æ‚è®¡ç®—ã€ç³»ç»Ÿé›†æˆ</strong>çš„éƒ¨åˆ†ã€‚</p>
<ol start="3">
<li><strong>åœ¨è¾¹ç•Œå†…æ‰©å±•ï¼Œæ‹’ç»ç»•è·¯ï¼ˆHackï¼‰</strong></li>
</ol>
<p>ä¸¥æ ¼éµå®ˆå¹³å°çš„<strong>æ‰©å±•æœºåˆ¶</strong>ï¼Œå°†è‡ªå®šä¹‰é€»è¾‘æ”¾å…¥<strong>å¯ç»´æŠ¤</strong>çš„ä½ç½®ã€‚ä¸¥ç¦ç›´æ¥ä¿®æ”¹æ•°æ®åº“æˆ–ç§è‡ªç»•å¼€å¹³å°çš„å‰ç«¯æ¸²æŸ“é€»è¾‘ï¼Œè¿™ä¼šä½¿æœªæ¥çš„å¹³å°å‡çº§å’Œç»´æŠ¤æˆä¸ºå™©æ¢¦ã€‚</p>
<ol start="4">
<li><strong>ä¿æŒå·¥ç¨‹åŒ–ï¼Œå®æ–½é…ç½®æ²»ç†</strong></li>
</ol>
<p>æ— ä»£ç /ä½ä»£ç ä¹Ÿéœ€è¦ DevOps æµç¨‹ã€‚å¿…é¡»å®ç°<strong>é…ç½®ç‰ˆæœ¬ç®¡ç†ã€ç¯å¢ƒè¿ç§»ï¼ˆDev/Staging/Prodï¼‰ã€å®¡æ‰¹æµç¨‹å’Œå›æ»šæœºåˆ¶</strong>ï¼Œç¡®ä¿é…ç½®æ˜¯å¯å®¡è®¡å’Œå¯æ§çš„ã€‚</p>
<ol start="5">
<li><strong>æ„å»ºå›¢é˜Ÿèƒ½åŠ›ï¼Œé¿å…å•ç‚¹é£é™©</strong></li>
</ol>
<p>ç¡®ä¿æ•´ä¸ªæŠ€æœ¯å›¢é˜Ÿäº†è§£å¹³å°çš„<strong>æ¶æ„ã€æ‰©å±•ç‚¹</strong>å’Œ<strong>æ²»ç†è§„èŒƒ</strong>ã€‚é¿å…ç³»ç»ŸçŸ¥è¯†é›†ä¸­äºå°‘æ•°äººçš„é£é™©ã€‚</p>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fhidden-cost-in-commen-low-code-platform" target="_blank" title="https://www.nocobase.com/cn/blog/hidden-cost-in-commen-low-code-platform" ref="nofollow noopener noreferrer">4 å¤§å¼€æºäº§å“å¸®ä½ é¿å…é—­æºä½ä»£ç å¹³å°çš„éšè—æˆæœ¬</a></p>
<h2 data-id="heading-5"><strong>é€‚åˆå¼€å‘è€…ä½¿ç”¨çš„æ— ä»£ç  / ä½ä»£ç å·¥å…·</strong></h2>
<p>âš ï¸ æ³¨æ„åœ¨åšæœ€ç»ˆæŠ€æœ¯é€‰å‹å‰ï¼Œå»ºè®®éƒ½äº²è‡ªè¯•ä¸€éè¿™äº›å¹³å°ï¼Œå°¤å…¶æ˜¯å¼€æºå·¥å…·ï¼Œè‡ªè¡Œéƒ¨ç½²åæµ‹è¯•æ•°æ®æ¨¡å‹ã€æƒé™ã€æ‰©å±•ç‚¹ç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œæ‰èƒ½çœŸæ­£åˆ¤æ–­æ˜¯å¦é€‚åˆè‡ªå·±çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>





























































































<table><thead><tr><th>å·¥å…·</th><th>å®šä½</th><th>æ˜¯å¦å¼€æº</th><th>è‡ªæ‰˜ç®¡èƒ½åŠ›</th><th>å¯æ‰©å±•æ€§ï¼ˆæ’ä»¶/ä»£ç ï¼‰</th><th>æ•°æ®æ¨¡å‹èƒ½åŠ›</th><th>å‰ç«¯å¯æ§æ€§</th><th>é€‚åˆåœºæ™¯</th><th>ä¸é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td>NocoBase</td><td>ä¼ä¸šçº§æ— ä»£ç å¹³å°</td><td>æ˜¯</td><td>å¼ºï¼ˆå®˜æ–¹æ”¯æŒï¼‰</td><td>å¼ºï¼ˆæ’ä»¶æ¶æ„ã€å¯å†™ä»£ç ã€æ‰©å±•ç‚¹æ¸…æ™°ï¼‰</td><td>å¼ºï¼ˆæ¨¡å‹é©±åŠ¨ã€å°åˆ°å­—æ®µã€å¤§åˆ°å…³ç³»éƒ½èƒ½æ§åˆ¶ï¼‰</td><td>ä¸­ç­‰ï¼ˆå—å¼å¸ƒå±€ã€å¯äºŒå¼€ï¼‰</td><td>å†…éƒ¨ç³»ç»Ÿã€CRMã€å·¥å•ã€BPMã€è¿è¥åå°</td><td>é«˜åº¦è‡ªå®šä¹‰å‰ç«¯ã€å¼ºäº¤äº’åœºæ™¯</td></tr><tr><td>Retool</td><td>å†…éƒ¨å·¥å…·æ„å»º</td><td>å¦</td><td>æœ‰ä½†æœ‰é™</td><td>ä¸­ç­‰ï¼ˆJS é€»è¾‘ã€ç»„ä»¶æœ‰é™åˆ¶ï¼‰</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸šåŠ¡çœ‹æ¿ã€API è¿æ¥å™¨ã€å¤šæ•°æ®æºé¢æ¿</td><td>è‡ªå®šä¹‰æ¨¡å‹ã€å¤æ‚æƒé™</td></tr><tr><td>Budibase</td><td>å¼€æºå†…éƒ¨å·¥å…·æ„å»º</td><td>æ˜¯</td><td>å¼º</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ç®€å•åå°ã€è¡¨å•å·¥å…·</td><td>å¤§è§„æ¨¡ä¸šåŠ¡ç³»ç»Ÿ</td></tr><tr><td>Appsmith</td><td>å‰ç«¯ä¸ºä¸»çš„ä½ä»£ç å¹³å°</td><td>æ˜¯</td><td>å¼º</td><td>ä¸­ç­‰ï¼ˆJS çµæ´»ï¼‰</td><td>ä¸€èˆ¬</td><td>å¼ºï¼ˆå‰ç«¯ç»„ä»¶ä¸°å¯Œï¼‰</td><td>å‰ç«¯ä¸»å¯¼çš„å†…éƒ¨å·¥å…·</td><td>å¤æ‚æµç¨‹ã€æƒé™ä½“ç³»</td></tr><tr><td>ToolJet</td><td>é€šç”¨ä½ä»£ç å¹³å°</td><td>æ˜¯</td><td>å¼º</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æ•°æ®é¢æ¿ã€CRUD å·¥å…·</td><td>å¤§é‡ä¸šåŠ¡æ¨¡æ‹Ÿä¸æµç¨‹æ§åˆ¶</td></tr><tr><td>Firebase + FlutterFlow</td><td>ç§»åŠ¨ç«¯åº”ç”¨æ„å»º</td><td>å¦ï¼ˆFirebaseï¼‰</td><td>æ— </td><td>å¼±</td><td>ä¸­ç­‰</td><td>å¼ºï¼ˆç§»åŠ¨ç«¯ UI å®Œæ•´ï¼‰</td><td>ç§»åŠ¨ç«¯å¿«é€Ÿ MVP</td><td>ä¼ä¸šå†…éƒ¨ç³»ç»Ÿã€æƒé™å»ºæ¨¡</td></tr><tr><td>Power Apps</td><td>å¾®è½¯ç”Ÿæ€ä¸šåŠ¡åº”ç”¨æ„å»º</td><td>å¦</td><td>æœ‰é™</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸€èˆ¬</td><td>Microsoft ç”Ÿæ€ä¼ä¸š</td><td>è‡ªæ‰˜ç®¡ã€æ’ä»¶æ‰©å±•ã€å®Œå…¨å¯æ§æ€§</td></tr></tbody></table>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fhow-to-choose-a-no-code-tool" target="_blank" title="https://www.nocobase.com/cn/blog/how-to-choose-a-no-code-tool" ref="nofollow noopener noreferrer">æ— ä»£ç ï¼ˆé›¶ä»£ç ï¼‰å·¥å…·æ€ä¹ˆé€‰ï¼Ÿ23 æ¬¾çƒ­é—¨å·¥å…·å¯¹æ¯” + é€‰å‹æŒ‡å—</a></p>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>æ— ä»£ç ã€ä½ä»£ç å’Œ AI å¹¶ä¸ä¼šæ›¿ä»£å¼€å‘è€…ï¼Œå®ƒä»¬åªæ˜¯é‡æ–°åˆ†é…äº†å·¥ç¨‹æ—¶é—´ã€‚</p>
<p>æŠŠé‡å¤ã€ç»“æ„åŒ–çš„éƒ¨åˆ†äº¤ç»™å¹³å°ï¼ŒæŠŠå¤æ‚ã€å…³é”®çš„éƒ¨åˆ†ç•™ç»™ä»£ç ã€‚</p>
<p><strong>æœ€ç»ˆçš„æ ¸å¿ƒæ˜¯åŒä¸€ä»¶äº‹ï¼šç”¨æ¶æ„çš„ç¨³å®šæ€§æ¢å–ä¸šåŠ¡çš„æŒç»­æ•æ·ã€‚</strong></p>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡åšå®¢æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ï¼â¤ï¸</p>
<p><strong>é˜…è¯»æ›´å¤šï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F7-self-hosted-ai-tools-build-business-app" target="_blank" title="https://www.nocobase.com/cn/blog/7-self-hosted-ai-tools-build-business-app" ref="nofollow noopener noreferrer">7 æ¬¾æœ€ä½³è‡ªæ‰˜ç®¡ AI å·¥å…·ï¼Œå¿«é€Ÿæ„å»ºä¸šåŠ¡åº”ç”¨</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F14-ai-low-code-platforms-github" target="_blank" title="https://www.nocobase.com/cn/blog/14-ai-low-code-platforms-github" ref="nofollow noopener noreferrer">GitHub ä¸Šæœ€å€¼å¾—å…³æ³¨çš„ 14 ä¸ªå¼€æº AI ä½ä»£ç å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Ftop-11-github-open-source-no-code-ai-tools" target="_blank" title="https://www.nocobase.com/cn/blog/top-11-github-open-source-no-code-ai-tools" ref="nofollow noopener noreferrer">11 ä¸ªåœ¨ GitHub ä¸Šæœ€å—æ¬¢è¿çš„å¼€æºæ— ä»£ç  AI å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fgithub-open-source-ai-agent-projects" target="_blank" title="https://www.nocobase.com/cn/blog/github-open-source-ai-agent-projects" ref="nofollow noopener noreferrer">GitHub ä¸Š Star æ•°é‡å‰ 18 çš„å¼€æº AI Agent é¡¹ç›® </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fgithub-open-source-mcp-projects" target="_blank" title="https://www.nocobase.com/cn/blog/github-open-source-mcp-projects" ref="nofollow noopener noreferrer">GitHub ä¸Š Star æ•°é‡å‰ 8 çš„å¼€æº MCP é¡¹ç›®</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çªå‘ï¼Claude Opus 4.5 ç¼–ç¨‹ä¸–ç•Œç¬¬ä¸€ï¼ŒæŠŠè°·æ­Œ OpenAI è¸¢ä¸‹ç‹åº§]]></title>    <link>https://juejin.cn/post/7576271552703381530</link>    <guid>https://juejin.cn/post/7576271552703381530</guid>    <pubDate>2025-11-25T03:16:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576271552703381530" data-draft-id="7576271552703365146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çªå‘ï¼Claude Opus 4.5 ç¼–ç¨‹ä¸–ç•Œç¬¬ä¸€ï¼ŒæŠŠè°·æ­Œ OpenAI è¸¢ä¸‹ç‹åº§"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-25T03:16:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çªå‘ï¼Claude Opus 4.5 ç¼–ç¨‹ä¸–ç•Œç¬¬ä¸€ï¼ŒæŠŠè°·æ­Œ OpenAI è¸¢ä¸‹ç‹åº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:16:06.000Z" title="Tue Nov 25 2025 03:16:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92b1a5e4e4cb42a2aaa2ed5be059f5e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=UMvNo5aWzSS%2B5sIq5b6tKaU2GqU%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘æ·±å¤œï¼ŒClaude Opus 4.5 é‡ç£…å‡ºä¸–ï¼Œç¼–ç¨‹å®åŠ›æš´å‡» Gemini 3 Proã€GPT-5.1ã€‚æ‰ä¸€å‘¨çš„æ—¶é—´ï¼ŒAI åœˆå°±å®Œæˆäº†ä¸€æ¬¡é—­ç¯å¼è¿­ä»£ã€‚ã€</strong></h5>
<p>å…¨çƒç¼–ç ç‹åº§ï¼Œä¸€å¤œæ˜“ä¸»ã€‚</p>
<p>æœä¸å…¶ç„¶ï¼ŒAnthropic æ·±å¤œæ”¾å‡ºäº† Claude Opus 4.5ï¼Œå ªç§°å…¨çƒæœ€é¡¶å°–çš„æ¨¡å‹ã€‚</p>
<p>å®ƒä¸ä»…ç¼–ç¨‹å¼ºï¼Œè€Œä¸”æ™ºèƒ½ä½“å’Œè®¡ç®—æœºä½¿ç”¨ï¼ˆcomputer useï¼‰èƒ½åŠ›ä¹Ÿæ˜¯ä¸€æµã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78ef63d18a3e4020bdf9a64c0267afba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=4LuwG7B9zDVpBc0OBO%2FFvR7sEzo%3D" alt="" loading="lazy"/></p>
<p>Opus 4.5 çš„è¯ç”Ÿï¼Œæ ‡å¿—ç€ AI èƒ½åŠ›å†ä¸€æ¬¡é£è·ƒï¼Œæ›´å°†åœ¨æœªæ¥å½»åº•å˜é©å·¥ä½œçš„æ–¹å¼ã€‚</p>
<p>åŸºå‡†æµ‹è¯•ä¸­ï¼ŒOpus 4.5 çš„ç¼–ç ã€å·¥å…·è°ƒç”¨ã€è®¡ç®—æœºä½¿ç”¨çš„æˆç»©åˆ·æ–° SOTAï¼Œæ¯” Sonnet 4.5ã€Opus 4.1 é¢†å…ˆä¸€å¤§æˆªã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œå°±è¿å‘å¸ƒä¸è¿‡ä¸€å‘¨çš„ Gemini 3 Proã€GPT-5.1 æƒ¨é­é™ç»´æ‰“å‡»ã€‚</p>
<p>SWE-bench Verified ä¸€å¼ å›¾ï¼Œç›´æ¥è¯æ˜äº† Opus 4.5 å¼ºå¤§å®åŠ›ï¼Œ80.9% çš„å‡†ç¡®ç‡ï¼Œä¸–ç•Œç¬¬ä¸€ã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨ ARC-AGI-2 è¯„ä¼°ä¸­ï¼ŒOpus 4.5ï¼ˆ64kï¼‰æ‹¿ä¸‹äº† 37.6% çš„é«˜åˆ†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c72b43053ec4c3cbd8c50f60cf1217a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=HGhEgTmCkeLdfXt8ZIyvBnrZnA8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d71eaa979b714e75b21bf866e4c46667~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=%2B1Oez1UfEgj%2FgBchPXNKvaYmvZQ%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>Opus 4.5 è¿™ç‰ˆå‰å®³ä¹‹å¤„ï¼šåœ¨æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå°±èƒ½å¤„ç†æ¨¡ç³Šä¿¡æ¯ï¼Œè¿˜ä¼šæƒè¡¡åˆ©å¼Šã€‚</p>
<p>å³ä¾¿æ˜¯é‡åˆ°å¤æ‚çš„å¤šç³»ç»Ÿæ¼æ´ï¼Œä¹Ÿèƒ½å¤Ÿæ‰¾å‡ºä¿®å¤æ–¹æ³•ã€‚</p>
<p>æ€»ä¹‹ï¼Œç”¨èµ·æ¥å°±ä¸€ä¸ªæ„Ÿè§‰â€”â€”ã€Œä¸€ç‚¹å°±é€ã€ã€‚</p>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">è§†é¢‘è¯¦æƒ…</a></p>
<p>ä¸Šä¸‹æ–‡ç®¡ç†å’Œè®°å¿†èƒ½åŠ›å¯æ˜¾è‘—æå‡æ™ºèƒ½ä½“ä»»åŠ¡çš„æ€§èƒ½ã€‚Opus 4.5 åœ¨ç®¡ç†å­æ™ºèƒ½ä½“å›¢é˜Ÿæ–¹é¢ä¹Ÿéå¸¸é«˜æ•ˆï¼Œèƒ½å¤Ÿæ„å»ºå¤æ‚ã€åè°ƒè‰¯å¥½çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>æµ‹è¯•æ˜¾ç¤ºï¼Œç»“åˆæ‰€æœ‰è¿™äº›æŠ€æœ¯ï¼ŒOpus 4.5 åœ¨æ·±åº¦ç ”ç©¶è¯„ä¼°ä¸­çš„è¡¨ç°æå‡äº†è¿‘ 15%ã€‚</p>
<p>åŒåœ¨ä»Šå¤©ï¼ŒAnthropic åœ¨ Claude å¼€å‘è€…å¹³å°ä¸Šï¼Œæ›´æ–°äº†ä¸‰å¤§å·¥å…·ä½¿ç”¨åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>ã€Œå·¥å…·æœç´¢å·¥å…·ã€****ï¼ˆ</strong>ã€Œ<strong>ã€ŒTool Search Toolã€</strong>ã€<strong>ï¼‰</strong></li>
<li><strong>ã€Œç¨‹åºåŒ–å·¥å…·è°ƒç”¨ã€****ï¼ˆ</strong>ã€Œ<strong>ã€ŒProgrammatic Tool Callingã€</strong>ã€<strong>ï¼‰</strong></li>
<li><strong>ã€Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹ã€****ï¼ˆ</strong>ã€Œ<strong>ã€ŒTool Use Examplesã€</strong>ã€<strong>ï¼‰</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c382e866c81468485dc7441447d833d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=rf7z4aDmM%2Fo8xkzFrQ%2F4buBQpps%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d95ecbe8ffea42d68c2775ef81ad2575~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=LicxWjchjPLY1YakGPsk8J1Manw%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå·¥å…·æœç´¢å·¥å…·ã€</strong></p>
<p>é¦–å…ˆï¼Œã€Œå·¥å…·æœç´¢å·¥å…·ã€å…è®¸ Claude ä½¿ç”¨æœç´¢å·¥å…·è®¿é—®æ•°åƒä¸ªå·¥å…·ï¼Œè€Œæ— éœ€æ¶ˆè€—å…¶ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>MCP å·¥å…·å®šä¹‰æä¾›äº†é‡è¦çš„ä¸Šä¸‹æ–‡ï¼Œä½†éšç€è¿æ¥çš„æœåŠ¡å™¨å¢å¤šï¼Œè¿™äº› Token çš„æ¶ˆè€—ä¼šä¸æ–­ç´¯ç§¯ã€‚å‡è®¾ä¸€ä¸ªåŒ…å«äº”ä¸ªæœåŠ¡å™¨çš„è®¾ç½®ï¼š</p>
<ul>
<li>GitHubï¼š35 ä¸ªå·¥å…·ï¼ˆçº¦ 26KTokenï¼‰</li>
<li>Slackï¼š11 ä¸ªå·¥å…·ï¼ˆçº¦ 21KTokenï¼‰</li>
<li>Sentryï¼š5 ä¸ªå·¥å…·ï¼ˆçº¦ 3KTokenï¼‰</li>
<li>Grafanaï¼š5 ä¸ªå·¥å…·ï¼ˆçº¦ 3KTokenï¼‰</li>
<li>Splunkï¼š2 ä¸ªå·¥å…·ï¼ˆçº¦ 2KTokenï¼‰</li>
</ul>
<p>è¿™ä»…ä»…æ˜¯ 58 ä¸ªå·¥å…·ï¼Œåœ¨å¯¹è¯å¼€å§‹ä¹‹å‰å°±å·²ç»æ¶ˆè€—äº†å¤§çº¦ 55K Tokenã€‚</p>
<p>å¦‚æœæ·»åŠ æ›´å¤šåƒ Jira è¿™æ ·çš„æœåŠ¡å™¨ï¼ˆä»…å®ƒæœ¬èº«å°±ä½¿ç”¨çº¦ 17KTokenï¼‰ï¼Œå¾ˆå¿«å°±ä¼šé¢ä¸´ 100K+Token çš„å¼€é”€ã€‚</p>
<p>åœ¨ Anthropicï¼Œå›¢é˜Ÿæ›¾è§è¿‡å·¥å…·å®šä¹‰åœ¨ä¼˜åŒ–å‰å°±æ¶ˆè€—äº† 134KTokenã€‚</p>
<p>ä½† Token æˆæœ¬å¹¶ä¸æ˜¯å”¯ä¸€çš„é—®é¢˜ã€‚æœ€å¸¸è§çš„å¤±è´¥åŸå› è¿˜åŒ…æ‹¬é”™è¯¯çš„å·¥å…·é€‰æ‹©å’Œä¸æ­£ç¡®çš„å‚æ•°ï¼Œå°¤å…¶æ˜¯å½“å·¥å…·å…·æœ‰ç›¸ä¼¼åç§°æ—¶ï¼Œæ¯”å¦‚<code>notification-send-user</code>ä¸<code>notification-send-channel</code>ã€‚</p>
<p>æƒ³ç›¸æ¯”ä¹‹ä¸‹ï¼Œå·¥å…·æœç´¢å·¥å…·ä¸å†é¢„å…ˆåŠ è½½æ‰€æœ‰å·¥å…·å®šä¹‰ï¼Œè€Œæ˜¯æŒ‰éœ€å‘ç°å·¥å…·ã€‚Claude åªä¼šçœ‹åˆ°å½“å‰ä»»åŠ¡å®é™…éœ€è¦çš„å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46cdd690bb549749fde0c64b05baae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=%2FxX9LSQarDmnwuo%2BM1k1tKn72%2Bk%3D" alt="" loading="lazy"/></p>
<p>å·¥å…·æœç´¢å·¥å…·ä¿ç•™äº† 191,300 Token çš„ä¸Šä¸‹æ–‡ï¼Œè€Œä¼ ç»Ÿæ–¹æ³•åªæœ‰ 122,800</p>
<p><strong>ã€Œä¼ ç»Ÿæ–¹æ³•ï¼šã€</strong></p>
<ul>
<li>é¢„å…ˆåŠ è½½æ‰€æœ‰å·¥å…·å®šä¹‰ï¼ˆ50+ MCP å·¥å…·çº¦æ¶ˆè€— 72KTokenï¼‰</li>
<li>å¯¹è¯å†å²å’Œç³»ç»Ÿæç¤ºè¯äº‰å¤ºå‰©ä½™ç©ºé—´</li>
<li>æ€»ä¸Šä¸‹æ–‡æ¶ˆè€—ï¼šåœ¨ä»»ä½•å·¥ä½œå¼€å§‹å‰çº¦ 77K Token</li>
</ul>
<p><strong>ã€Œä½¿ç”¨å·¥å…·æœç´¢å·¥å…·ï¼šã€</strong></p>
<ul>
<li>ä»…é¢„å…ˆåŠ è½½å·¥å…·æœç´¢å·¥å…·æœ¬èº«ï¼ˆçº¦ 500Tokenï¼‰</li>
<li>æ ¹æ®éœ€è¦æŒ‰éœ€å‘ç°å·¥å…·ï¼ˆ3-5 ä¸ªç›¸å…³å·¥å…·ï¼Œçº¦ 3KTokenï¼‰</li>
<li>æ€»ä¸Šä¸‹æ–‡æ¶ˆè€—ï¼šçº¦ 8.7KTokenï¼Œä¿ç•™äº† 95% çš„ä¸Šä¸‹æ–‡</li>
</ul>
<p><strong>ã€Œè¿™æ„å‘³ç€åœ¨ä¿æŒè®¿é—®å®Œæ•´å·¥å…·åº“çš„åŒæ—¶ï¼ŒToken ä½¿ç”¨é‡å‡å°‘äº† 85%ã€‚ã€</strong></p>
<p>å†…éƒ¨æµ‹è¯•æ˜¾ç¤ºï¼Œåœ¨å¤„ç†å¤§å‹å·¥å…·åº“æ—¶ï¼ŒMCP è¯„ä¼°çš„å‡†ç¡®æ€§æ˜¾è‘—æé«˜ã€‚</p>
<p>å¯ç”¨å·¥å…·æœç´¢å·¥å…·åï¼ŒOpus 4 å‡†ç¡®ç‡ä» 49% æé«˜åˆ° 74%ï¼ŒOpus 4.5 ä» 79.5% æé«˜åˆ° 88.1%ã€‚</p>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef92ec8f84484867b2a4f6cdde54c9f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=wWtA%2B1MdYNHws1feLG%2Bb57L4oaY%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œç¨‹åºåŒ–å·¥å…·è°ƒç”¨ã€</strong></p>
<p>ã€Œç¨‹åºåŒ–å·¥å…·è°ƒç”¨ã€å…è®¸ Claude åœ¨ä»£ç æ‰§è¡Œç¯å¢ƒä¸­è°ƒç”¨å·¥å…·ï¼Œä»è€Œå‡å°‘å¯¹æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„å ç”¨ã€‚</p>
<p>éšç€å·¥ä½œæµå˜å¾—æ›´åŠ å¤æ‚ï¼Œä¼ ç»Ÿçš„å·¥å…·è°ƒç”¨äº§ç”Ÿäº†ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ï¼š</p>
<ul>
<li><strong>ã€Œä¸­é—´ç»“æœé€ æˆçš„ä¸Šä¸‹æ–‡æ±¡æŸ“ã€</strong></li>
<li><strong>ã€Œæ¨ç†å¼€é”€å’Œæ‰‹åŠ¨åˆæˆã€</strong></li>
</ul>
<h4 data-id="heading-1">ç¤ºä¾‹ï¼šé¢„ç®—åˆè§„æ€§æ£€æŸ¥</h4>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ä¸šåŠ¡ä»»åŠ¡ï¼šã€Œå“ªäº›å›¢é˜Ÿæˆå‘˜è¶…å‡ºäº†ä»–ä»¬çš„ Q3 å·®æ—…é¢„ç®—ï¼Ÿã€</p>
<p>ä½ æœ‰ä¸‰ä¸ªå¯ç”¨å·¥å…·ï¼š</p>
<ul>
<li>get_team_members(department) - è¿”å›å¸¦æœ‰ ID å’Œçº§åˆ«çš„å›¢é˜Ÿæˆå‘˜åˆ—è¡¨</li>
<li>get_expenses(user_id, quarter) - è¿”å›ç”¨æˆ·çš„è´¹ç”¨æ˜ç»†é¡¹ç›®</li>
<li>get_budget_by_level(level) - è¿”å›å‘˜å·¥çº§åˆ«çš„é¢„ç®—é™é¢</li>
</ul>
<p><strong>ã€Œä¼ ç»Ÿæ–¹æ³•ï¼šã€</strong></p>
<ul>
<li>è·å–å›¢é˜Ÿæˆå‘˜â†’20 äºº</li>
<li>å¯¹äºæ¯ä¸ªäººï¼Œè·å–ä»–ä»¬çš„ Q3 è´¹ç”¨â†’20 æ¬¡å·¥å…·è°ƒç”¨ï¼Œæ¯æ¬¡è¿”å› 50-100 ä¸ªæ˜ç»†é¡¹ç›®ï¼ˆæœºç¥¨ã€é…’åº—ã€é¤é¥®ã€æ”¶æ®ï¼‰</li>
<li>æŒ‰å‘˜å·¥çº§åˆ«è·å–é¢„ç®—é™é¢</li>
<li>æ‰€æœ‰è¿™äº›éƒ½è¿›å…¥ Claude çš„ä¸Šä¸‹æ–‡ï¼š2,000 + è´¹ç”¨æ˜ç»†é¡¹ç›®ï¼ˆ50 KB+ï¼‰</li>
<li>Claude æ‰‹åŠ¨æ±‡æ€»æ¯ä¸ªäººçš„è´¹ç”¨ï¼ŒæŸ¥æ‰¾ä»–ä»¬çš„é¢„ç®—ï¼Œå°†è´¹ç”¨ä¸é¢„ç®—é™é¢è¿›è¡Œæ¯”è¾ƒ</li>
<li>æ›´å¤šçš„æ¨¡å‹å¾€è¿”äº¤äº’ï¼Œæ˜¾è‘—çš„ä¸Šä¸‹æ–‡æ¶ˆè€—</li>
</ul>
<p><strong>ã€Œä½¿ç”¨ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ï¼šã€</strong></p>
<p>Claude ä¸å†æ¥æ”¶æ¯ä¸ªå·¥å…·çš„è¿”å›ç»“æœï¼Œè€Œæ˜¯ç¼–å†™ä¸€ä¸ª Python è„šæœ¬æ¥ç¼–æ’æ•´ä¸ªå·¥ä½œæµã€‚</p>
<p>è¯¥è„šæœ¬åœ¨ä»£ç æ‰§è¡Œå·¥å…·ï¼ˆä¸€ä¸ªæ²™ç›’ç¯å¢ƒï¼‰ä¸­è¿è¡Œï¼Œåœ¨éœ€è¦å·¥å…·ç»“æœæ—¶æš‚åœã€‚å½“é€šè¿‡ API è¿”å›å·¥å…·ç»“æœæ—¶ï¼Œå®ƒä»¬ç”±è„šæœ¬å¤„ç†è€Œä¸æ˜¯ç”±æ¨¡å‹æ¶ˆè€—ã€‚è„šæœ¬ç»§ç»­æ‰§è¡Œï¼ŒClaude åªçœ‹åˆ°æœ€ç»ˆè¾“å‡ºã€‚</p>
<p><em>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ä½¿ Claude èƒ½å¤Ÿé€šè¿‡ä»£ç è€Œä¸æ˜¯é€šè¿‡å•ç‹¬çš„</em> <em>API</em> <em>å¾€è¿”æ¥ç¼–æ’å·¥å…·ï¼Œä»è€Œå…è®¸å¹¶è¡Œæ‰§è¡Œå·¥å…·ã€‚</em></p>
<p>ä»¥ä¸‹æ˜¯ Claude ä¸ºé¢„ç®—åˆè§„æ€§ä»»åŠ¡ç¼–å†™çš„ç¼–æ’ä»£ç ç¤ºä¾‹ï¼š</p>
<p>Claude çš„ä¸Šä¸‹æ–‡ä»…æ¥æ”¶æœ€ç»ˆç»“æœï¼šä¸¤åˆ°ä¸‰ä¸ªè¶…å‡ºé¢„ç®—çš„äººå‘˜ã€‚2,000 + æ˜ç»†é¡¹ç›®ã€ä¸­é—´æ€»å’Œå’Œé¢„ç®—æŸ¥æ‰¾è¿‡ç¨‹ä¸ä¼šå½±å“ Claude ä¸Šä¸‹æ–‡ï¼Œå°†æ¶ˆè€—ä» 200KB çš„åŸå§‹è´¹ç”¨æ•°æ®å‡å°‘åˆ°ä»… 1KB çš„ç»“æœã€‚</p>
<p>è¿™ç§è¿‡ç¨‹ï¼Œåœ¨æ•ˆç‡æå‡å·¨å¤§ï¼š</p>
<ul>
<li><strong>ã€ŒToken èŠ‚çœï¼šé€šè¿‡å°†ä¸­é—´ç»“æœéš”ç¦»åœ¨ Claude çš„ä¸Šä¸‹æ–‡ä¹‹å¤–ï¼Œç¨‹åºåŒ–å·¥å…·è°ƒç”¨ï¼ˆPTCï¼‰æ˜¾è‘—å‡å°‘äº† Token æ¶ˆè€—ã€‚åœ¨å¤æ‚ç ”ç©¶ä»»åŠ¡ä¸Šï¼Œå¹³å‡ä½¿ç”¨é‡ä» 43,588 é™è‡³ 27,297 ä¸ª Tokenï¼Œå‡å°‘äº† 37%ã€‚ã€</strong></li>
<li>**é™ä½å»¶è¿Ÿï¼š**æ¯æ¬¡ API å¾€è¿”éƒ½éœ€è¦æ¨¡å‹æ¨ç†ï¼ˆè€—æ—¶æ•°ç™¾æ¯«ç§’åˆ°æ•°ç§’ï¼‰ã€‚å½“ Claude åœ¨å•ä¸ªä»£ç å—ä¸­ç¼–æ’ 20 + ä¸ªå·¥å…·è°ƒç”¨æ—¶ï¼Œæ¶ˆé™¤äº† 19 + æ¬¡æ¨ç†è¿‡ç¨‹ã€‚API å¤„ç†å·¥å…·æ‰§è¡Œï¼Œè€Œæ— éœ€æ¯æ¬¡éƒ½è¿”å›æ¨¡å‹ã€‚</li>
<li>**æé«˜å‡†ç¡®æ€§ï¼š**é€šè¿‡ç¼–å†™æ˜¾å¼çš„ç¼–æ’é€»è¾‘ï¼ŒClaude åœ¨å¤„ç†å¤šä¸ªå·¥å…·ç»“æœæ—¶æ¯”ä½¿ç”¨è‡ªç„¶è¯­è¨€æ›´å°‘å‡ºé”™ã€‚å†…éƒ¨çŸ¥è¯†æ£€ç´¢å‡†ç¡®ç‡ä» 25.6% æé«˜åˆ° 28.5%ï¼›GIA åŸºå‡†æµ‹è¯•ä» 46.5% æé«˜åˆ° 51.2%ã€‚</li>
</ul>
<p><strong>ã€Œ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a077309b33e456ba25c2aecfb5a488a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=pOn4zto6d2RPND410RG9popv434%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹ã€</strong></p>
<p>ã€Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹ã€æä¾›äº†ä¸€å¥—é€šç”¨æ ‡å‡†ï¼Œç”¨äºæ¼”ç¤ºå¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨ç»™å®šå·¥å…·ã€‚</p>
<p>å½“å‰çš„æŒ‘æˆ˜åœ¨äºï¼ŒJSON Schema æ“…é•¿å®šä¹‰ç»“æ„â€”â€”ç±»å‹ã€å¿…å¡«å­—æ®µã€å…è®¸çš„æšä¸¾å€¼â€”â€”ä½†å®ƒæ— æ³•è¡¨è¾¾ä½¿ç”¨æ¨¡å¼ï¼šä½•æ—¶åŒ…å«å¯é€‰å‚æ•°ï¼Œå“ªäº›ç»„åˆæœ‰æ„ä¹‰ï¼Œæˆ–è€… API æœŸæœ›ä»€ä¹ˆæ ·çš„æƒ¯ä¾‹ã€‚</p>
<p>è€ƒè™‘ä¸€ä¸ªæ”¯æŒå·¥å• APIï¼š</p>
<p>æ¨¡å¼å®šä¹‰äº†ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„ï¼Œä½†ç•™ä¸‹äº†å…³é”®é—®é¢˜æœªè§£ç­”ï¼š</p>
<ul>
<li>**æ ¼å¼æ­§ä¹‰ï¼š**due_date åº”è¯¥ä½¿ç”¨ "2024-11-06"ã€"Nov 6, 2024" è¿˜æ˜¯ "2024-11-06T00:00:00Z"ï¼Ÿ</li>
<li>**ID æƒ¯ä¾‹ï¼š**reporter.id æ˜¯ UUIDã€"USR-12345" è¿˜æ˜¯ä»…ä»… "12345"ï¼Ÿ</li>
<li>**åµŒå¥—ç»“æ„ç”¨æ³•ï¼š**Claude ä½•æ—¶åº”è¯¥å¡«å…… reporter.contactï¼Ÿ</li>
<li>**å‚æ•°ç›¸å…³æ€§ï¼š**escalation.level å’Œ escalation.sla_hours å¦‚ä½•ä¸ priority ç›¸å…³è”ï¼Ÿ</li>
</ul>
<p>è¿™äº›æ­§ä¹‰å¯èƒ½å¯¼è‡´ç•¸å½¢çš„å·¥å…·è°ƒç”¨å’Œä¸ä¸€è‡´çš„å‚æ•°ä½¿ç”¨ã€‚</p>
<p>å¯¹æ­¤ï¼Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹å¯ä»¥ç›´æ¥åœ¨å·¥å…·å®šä¹‰ä¸­æä¾›ç¤ºä¾‹å·¥å…·è°ƒç”¨ã€‚å¼€å‘è€…ä¸å†ä»…ä¾èµ–æ¨¡å¼ï¼Œè€Œæ˜¯å‘ Claude å±•ç¤ºå…·ä½“çš„ä½¿ç”¨æ¨¡å¼ï¼š</p>
<p>ä»è¿™ä¸‰ä¸ªä¾‹å­ä¸­ï¼ŒClaude å­¦ä¹ åˆ°ï¼š</p>
<ul>
<li><strong>ã€Œæ ¼å¼æƒ¯ä¾‹ï¼šã€</strong>Â æ—¥æœŸä½¿ç”¨ YYYY-MM-DDï¼Œç”¨æˆ· ID éµå¾ª USR-XXXXXï¼Œæ ‡ç­¾ä½¿ç”¨ kebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åï¼‰ã€‚</li>
<li><strong>ã€ŒåµŒå¥—ç»“æ„æ¨¡å¼ï¼šã€</strong>Â å¦‚ä½•æ„é€ å¸¦æœ‰åµŒå¥— contact å¯¹è±¡çš„ reporter å¯¹è±¡ã€‚</li>
<li><strong>ã€Œå¯é€‰å‚æ•°ç›¸å…³æ€§ï¼šã€</strong>Â ä¸¥é‡é”™è¯¯ï¼ˆCritical bugsï¼‰éœ€è¦å®Œæ•´çš„è”ç³»ä¿¡æ¯ + å¸¦æœ‰ä¸¥æ ¼ SLA çš„å‡çº§ï¼›åŠŸèƒ½è¯·æ±‚æœ‰æŠ¥å‘Šè€…ä½†æ²¡æœ‰è”ç³»ä¿¡æ¯ / å‡çº§ï¼›å†…éƒ¨ä»»åŠ¡åªæœ‰æ ‡é¢˜ã€‚</li>
</ul>
<p>åœ¨è‡ªå†…éƒ¨æµ‹è¯•ä¸­ï¼Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹åœ¨å¤æ‚å‚æ•°å¤„ç†ä¸Šçš„å‡†ç¡®æ€§ä» 72% æé«˜åˆ° 90%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d3a9d8002754acd94cc0cd9d89c3c52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=JZ%2BCgAIApPqPBHiPwt3gKWlK9F0%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œå¤§å—å¥½è¯„ã€</strong></p>
<p>åœ¨å‘å¸ƒå‰ï¼ŒAnthropic å†…éƒ¨å¯¹æ¨¡å‹è¿›è¡Œäº†æµ‹è¯•ï¼Œåé¦ˆå‡ºå¥‡ä¸€è‡´ã€‚</p>
<p>æµ‹è¯•è€…æŒ‡å‡ºï¼Œåœ¨å¤„ç†æ¨¡ç³ŠæŒ‡ä»¤å’Œæƒè¡¡åˆ©å¼Šæ—¶ï¼ŒClaude Opus 4.5 æ— éœ€è¿‡å¤šæŒ‡å¼•ã€‚</p>
<p>å½“é¢å¯¹å¤æ‚çš„å¤šç³»ç»Ÿ Bug æ—¶ï¼ŒOpus 4.5 èƒ½ç²¾å‡†å®šä½å¹¶ä¿®å¤ã€‚</p>
<p>å‡ å‘¨å‰å¯¹äº Sonnet 4.5 æ¥è¯´è¿˜è¿‘ä¹ä¸å¯èƒ½çš„ä»»åŠ¡ï¼Œç°åœ¨å·²è§¦æ‰‹å¯åŠã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œæµ‹è¯•è€…çš„è¯„ä»·æ˜¯ï¼šOpus 4.5 æ˜¯çœŸçš„ã€Œè¡Œå®¶ã€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56d63fdd35ab4feab004aa446e269f50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=o6rZq4HBw4715EXhiRXmDeN4hBM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e09db1530d40455a906af1b6b8cff2f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=jedWeGYzPf6XftWvvDRdw0%2BuYTg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4069798ef94646e48ceccd982d06a916~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=2CJS%2FJLLHRBO9vi4TTaJyyQVnwM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3dbce7cc4634d4fb365db69ef030d80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=4ycPmonK0PoH%2F6MC5BSfGqn6qdw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f184e478b2fe41ecb4f3bc7fdbc3513e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=GX782Jc8jLXTa4ASJ%2Fe2gpBlo6E%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f756265bc8f4538b8d91a36cb6e2b97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=lLMMGn9YtwaVnPM7Fx%2BtlFNhNac%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ff3b55b781944e7b8a39c0f5be4c36c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=%2BUqt%2F911dCWLjEdETiztZVdzVh8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a736ab6adea4deeb5c7081966fa9dc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=UGFOCAflSEl50dtWrAbSmlv8A6Y%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9a95a6b9f784d30b16f1144a4a815ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=nHl9FbqYNusOKwAaWoc1ssueuCM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd191ddde47442788a1e21bc694cd6dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=SQGyozRgGwb%2F%2F%2F3zMWzRKWKt0zY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eeaa8fffe9e43a5be9a8ee3127b92e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645366&amp;x-signature=7bDsEpnEY8aJ6Ji6dTIrqNLjf5U%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fclaudeai%2Fstatus%2F1993030546243699119" target="_blank" title="https://x.com/claudeai/status/1993030546243699119" ref="nofollow noopener noreferrer">x.com/claudeai/stâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fadvanced-tool-use" target="_blank" title="https://www.anthropic.com/engineering/advanced-tool-use" ref="nofollow noopener noreferrer">www.anthropic.com/engineeringâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fclaude-opus-4-5" target="_blank" title="https://www.anthropic.com/news/claude-opus-4-5" ref="nofollow noopener noreferrer">www.anthropic.com/news/claudeâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œã€Œé¦™è•‰ã€æ‰‹å†™æ»¡åˆ†å·ï¼ŒKarpathy ç©ä¸Šç˜¾ï¼ChatGPT è·ªéªŒæ²‰é»˜]]></title>    <link>https://juejin.cn/post/7576236480113737778</link>    <guid>https://juejin.cn/post/7576236480113737778</guid>    <pubDate>2025-11-25T03:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576236480113737778" data-draft-id="7576218673048846387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œã€Œé¦™è•‰ã€æ‰‹å†™æ»¡åˆ†å·ï¼ŒKarpathy ç©ä¸Šç˜¾ï¼ChatGPT è·ªéªŒæ²‰é»˜"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-25T03:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œã€Œé¦™è•‰ã€æ‰‹å†™æ»¡åˆ†å·ï¼ŒKarpathy ç©ä¸Šç˜¾ï¼ChatGPT è·ªéªŒæ²‰é»˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:19:23.000Z" title="Tue Nov 25 2025 03:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61eafc2cf5914ffb9ea21b6bd75d2b38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=6oZgiug5E%2BM2UZON9BxllVRPKeM%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘è°·æ­Œ Nano Banana Pro å‡ºä¸–ï¼Œåˆæˆä¸ºä¸€ä¸ªç°è±¡çº§çˆ†æ¬¾ã€‚è¿™å±Šç½‘å‹å½»åº•ç©ç–¯ï¼šæ‰‹å†™è¯•å·å…¨å¯¹ã€ç§’å‡ºç¥çº§ä¿¡æ¯å›¾ã€ç”µå½±çº§åˆ†é•œã€è·¨ä¸–çºªå˜è£….....ã€</strong></h5>
<p>ä¸Šå‘¨ï¼Œè°·æ­Œç”¨ä¸¤åœºå‘å¸ƒï¼Œå¼ºåŠ¿å®£å‘Šç‹è€…å½’æ¥ï¼</p>
<p>Gemini 3 Pro+Nano Banana Pro åŒæ ¸å¼¹è¿å‘ï¼Œå·¨å¤§çš„ä½™æ³¢è‡³ä»Šè®© AI åœˆæ²¡æœ‰ç¼“è¿‡æ¥ã€‚</p>
<p>è°·æ­Œæ­¤ä¸¾ï¼Œå®Œæˆäº†ä¸€ä¸ªç²¾å‡†åˆæ¼‚äº®çš„æˆ˜ç•¥ç»æ€ã€‚</p>
<p>PyTorch ä¹‹çˆ¶ Soumith Chintala é«˜åº¦è¯„ä»·é“ï¼Œã€ŒGemini 3 ä¼¼ä¹æ¯”ä»»ä½•æ—¶åˆ»ï¼Œæ›´æ¥è¿‘ GPT-4ã€ã€‚</p>
<p>å°±è¿ Scalesforce CEO Marc Benioffï¼Œç›´æ¥ä» ChatGPT è½¬æˆ˜ Gemini 3 äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a72a4e6109a14b639f0536f4903d8ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=ttyEBVjMPsHwC2ZJv3mB9df%2Bgnk%3D" alt="" loading="lazy"/></p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒNano Banana Pro çš„è¶…å¼ºç”Ÿå›¾å®åŠ›ï¼Œæ›´æ˜¯è®©ä¸šç•Œå¤§ä½¬è¿è¿æƒŠæ‰ä¸‹å·´ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MTA0MTk1MA%3D%3D%26mid%3D2652648205%26idx%3D1%26sn%3D9dab0eaccfe5c54438b33143450605be%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MTA0MTk1MA==&amp;mid=2652648205&amp;idx=1&amp;sn=9dab0eaccfe5c54438b33143450605be&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç¡…è°·å…«å·¨å¤´åŒæ¡†ï¼Œè¶…é€¼çœŸäººç‰©ç”ŸæˆçœŸå‡éš¾è¾¨</a>ï¼›ä¸€ä¸ªåæ ‡å‡ºå›¾ï¼Œæ¨ç†è¶…ç²¾å‡†ï¼›ä¸€é”®ç”Ÿæˆç”µå½±èŠ±çµ®....</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e53003677f054c07a768a040a26babb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=314mpUw5v7XDJY0%2BtFtWaFdbXP8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed1cdd85b2814acd83903119fa88c89a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=%2FSe1yRHCtgP0YKY%2BrvPMl%2FyaYFA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70d02df7899243519a39a2daef81d733~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=wXWvKYkiZHoV5tl5XTYo%2FAYKXIE%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>å¦‚ä»Šï¼ŒNano Banana Pro å„ç§å¼€è„‘æ´ç©æ³•ï¼Œå½»åº•å¤±æ§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b54ab5f1909410fb7b2b2f60a40b733~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=M0Ft6KhA42QlQ9NqrwQdIToumMA%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä¸€å¼ è¯•å·ï¼Œäº¤å‡ºå®Œç¾æ‰‹å†™ç­”å·ã€</strong></p>
<p>å°±è¿ AI å¤§ç¥ Karpathyï¼Œä¹Ÿæ— æ³•æŠ—æ‹’ Nano Banana Pro çš„é­…åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65a36d90d1474428974fbf7e787f21f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=MsITQqa%2B%2Fc1dukE5JJtASNEu7%2F0%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©ï¼ŒKarpathy åˆ†åˆ«å°†ä¸€å¼ ç‰©ç†å’Œä¸€å¼ åŒ–å­¦è¯•å·ï¼Œæ‰”ç»™äº† Nano Banana Proã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040a2944da04410fa69cbe216215cc8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=G5P33NI%2BAHUVB9PQLQSdm%2BP4hX4%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯ä¸Šä¼ çš„è¯•å·ï¼Œå³è¾¹æ˜¯ AI ç›´å‡ºçš„ç­”æ¡ˆã€‚</p>
<p>ä»¤äººæƒŠè‰³çš„æ˜¯ï¼ŒNano Banana Pro è§£ç­”è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šåšä¸€äº›æ¶‚é¸¦ã€å›¾è¡¨ç­‰ï¼Œå ªç§°ä¸€ä»½å®Œç¾æ‰‹å†™ç¨¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ad61a1a0bf742219ef45661c92db5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=qDzCb5KWvcB9DEghvFali9ZNg34%3D" alt="" loading="lazy"/></p>
<p>ChatGPT æ ¸æŸ¥ç­”æ¡ˆå…¨éƒ¨æ­£ç¡®ï¼Œé™¤äº†ä¸€äº›æ‹¼å†™å°é”™è¯¯</p>
<p>Karpathy æƒŠå¹é“ï¼Œè¿™ç±»ä¼¼é€šè¿‡æ–‡æœ¬ä¸ LLM å¯¹è¯çš„æ„Ÿè§‰ï¼Œå°±åƒæ˜¯åœ¨ DOS ç»ˆç«¯æ‰“å­—èŠå¤©ä¸€æ ·ã€‚</p>
<p>å›¾åƒç”¨æˆ·ç•Œé¢æ˜¯ä¸€ä¸ªã€Œæ™ºèƒ½ç”»å¸ƒã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa60e4c03e3b40868b1d9bbb1b8005f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=MupI0liN4LyiSZLZ3VmWJkgAgb8%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰ç½‘å‹å°†ä¸€é“æ•°å­¦é¢˜æ‹ç…§ä¸Šä¼ ï¼ŒNano Banana Pro ç«Ÿèƒ½ä»¥åŒæ ·çš„æ‰‹å†™ä½“è¾“å‡ºç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7941f734a544b4ba9022ed922201108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=1GUoipMflcQbMVZhA%2BcGgnHMY2c%3D" alt="" loading="lazy"/></p>
<p>ç±»ä¼¼çš„æ¡ˆä¾‹ï¼Œæ¯”æ¯”çš†æ˜¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fd3108ff671404ba4153037fcb4ed5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=PSMVkDWtFYhbCt8f31uSZ7U2sP4%3D" alt="" loading="lazy"/></p>
<p>åˆ«çœ‹ä¸€å¼ ç®€å•çš„ AI ç”Ÿå›¾ï¼Œè¿™èƒŒåç”¨ä¸Šäº† Nano Banana Pro æ´ªè’ä¹‹åŠ›ã€‚</p>
<p>å…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯ï¼Œå¼ºå¤§çš„é€»è¾‘æ¨ç†ã€è¶…å¼ºçš„æ–‡æœ¬æ¸²æŸ“ï¼Œä»¥åŠå¤šæ¨¡æ€èåˆï¼Œæ‰å®ç°äº†çœ‹å›¾ç†è§£â€”â€”è§£é¢˜â€”â€”æ‰‹å†™è¾“å‡ºçš„å®Œæ•´æµç¨‹ã€‚</p>
<p>è°·æ­Œã€Œé¦™è•‰ã€çš„æ•ˆæœï¼Œå·²ç»å¥½åˆ°è®©ç½‘å‹éš¾ä»¥ç›¸ä¿¡è‡ªå·±çš„çœ¼ç›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0185665a68e4f0e9ec012557c5a1b79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=bWY05CZZO71wv32wPesIumBIDek%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4352b32839de4b50a4922f1283a9f901~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=WKY49x%2FjDxwEGhQG%2FYLV%2FP7YbGE%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œåˆ«å†åš PPT äº†ï¼Œä¸€å¼ å›¾æå®šã€</strong></p>
<p>åœ¨ç”Ÿæˆä¿¡æ¯è¶…ä¸°å¯Œçš„å›¾è¡¨ä¸Šï¼ŒNano Banana Pro æ›´æ˜¯åšåˆ°äº†ä¸€æµã€‚</p>
<p>æƒ³è¦åšä¸€ä»½æ±‰å ¡ï¼ŒNano Banana Pro ç›´å‡ºç»„è£…æ•™ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a163bbac7694da594b2c991c109abc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=Qmml5zdYr8hHlWbGzyuVyiifyys%3D" alt="" loading="lazy"/></p>
<p>Karpathy è¿˜è®©å®ƒè®¾è®¡äº†ä¸€ä»½æ¯å‘¨å¥èº«è®¡åˆ’ï¼Œä¸ä»…ç»†è‡´è¿˜å…·æœ‰å¯å®è·µæ€§ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼ŒKarpathy è¿˜ç‰¹æ„è®© Nano Banana Pro æŠŠè®¡åˆ’è®¾è®¡å¾—æ›´ã€Œç¾é…®çˆ†è¡¨ã€ï¼Œæ²¡æƒ³åˆ°ï¼ŒAI ç›´æ¥åœ¨å‘¨äºŒè®¡åˆ’ä¸­ç›´æ¥ä¸Šå¼ºåº¦äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c42b4f0736c143d0ac5572b4bb58a3dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=RJOMJQjEgNpJEZW8FPKt1daet%2BE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2f4434c27eb4f10b5c4603ae6f35516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=cbZeu2kiiwIJOFGDNmq92%2F%2BdGHU%3D" alt="" loading="lazy"/></p>
<p>ç½‘å‹ Kris Kashtanova å°†ä¸€ä¸ªé“ºæ»¡å­—èœå•ä¸Šä¼ åï¼Œå°±å¾—åˆ°äº†æ¯é“èœé…ç€ç›¸åº”å›¾ç‰‡çš„å¯è§†åŒ–èœå•ã€‚</p>
<p>Karpathy ç‚¹è¯„é“ï¼Œã€Œçº¯ç¥ç»ç½‘ç»œè‡ªåŠ¨ç”Ÿæˆã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ffbbb9ca1ff4c75bae4379280a86cdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=5SJY%2BzcfTpBpr6R%2FslY2vQJuLNc%3D" alt="" loading="lazy"/></p>
<p>ç ”ç©¶å‘˜ Anders Sandberg ä¸Šä¼ è®ºæ–‡å†…å®¹åï¼ŒNano Banana Pro è¿˜å¯ä»¥é…ä¸Šç›¸åº”çš„æ’å›¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e83b6378e6b146ec80ef5b5e8fb6cbd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=6UUoGBVqsMcCWIup8k4UggDDZko%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f46e479c73624ba195d7bb880c5a3cf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=D8ztBvspMqRDT%2B5kGlk5Sj7cKMI%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰è‘—ååœ°æ ‡ä¿¡æ¯å›¾ï¼ŒåŸƒè²å°”é“å¡”ã€æ‚‰å°¼æ­Œå‰§é™¢ã€è‡ªç”±å¥³ç¥åƒã€ç½—é©¬æ–—å…½åœºï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/add8542e1a7d4693933589da01711fc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=u8THj7JotMTFdaXmy5QJMxAwSdY%3D" alt="" loading="lazy"/></p>
<p>ä¸€å¼ å›¾è¯ é‡Šã€Œçƒ­ç‹—æ˜¯ä¸‰æ˜æ²»å—ã€ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd9737d47f884cd09e585ae10409b6ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=S3zrckDMfaYqDDi%2BL%2FUkdb%2B41%2FI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46dfc1baa29e4f18a25f5e49de2de891~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=nViPYztYlR4cZdMRBv5ZsHQv0Ro%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä¸€é”®ç”Ÿæˆã€Œç”µå½±çº§ã€åˆ†é•œã€</strong></p>
<p>åˆ†é•œï¼Œå¯¹ AI ç”Ÿå›¾è¦æ±‚éå¸¸é«˜ã€‚</p>
<p>å®ƒéœ€è€ƒéªŒã€Œå™äº‹ç†è§£ + è§’è‰²ä¸€è‡´æ€§ + è¿è´¯æ€§ã€çš„ç»¼åˆè¡¨ç°ï¼Œå³ä¾¿å¦‚æ­¤ï¼ŒNano Banana Pro ä¹Ÿèƒ½ hold ä½ã€‚</p>
<p>ç½‘å‹ James Yeung åšäº†ä¸€ä¸ª 1984 çš„ç”µå½±åˆ†é•œæ•…äº‹ç‰ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3308060ac881423aba7a139f77114a21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=a79cwoW5z1bAalUu1ZkUlcVM%2Fh8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/374c4b7add274c4eb7c7cee97217632e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=DpNB1kLfqFs9YQe4oXvVN2mjfTg%3D" alt="" loading="lazy"/></p>
<p>ä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹</p>
<p>æ²ƒé¡¿å•†å­¦é™¢æ•™æˆ Ethan Mollick å®æµ‹ï¼Œè®© Nano Banana Pro å°†ã€Œå°¤åˆ©è¥¿æ–¯ã€è¯—ä½œç»˜æˆæ¼«ç”»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8926f50e4b49a8836766bbd8f4d80e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=EnWZRzE2P60Ff0owHwK9GgiDuY8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2bb9246502f46f7b0d1ccd047cba6a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=vx8PRmJ8VGnGUqRuno%2FTB0AjoTE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56608ffc809544f9ae1dfbabd8c538d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=jI2BJScywTxOqIdnqMttRiXvgUI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/538dac1ec9324985b612c2fcefcbf651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=Pkc5DAnEAbFtic276o6%2FlIxumg4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1b67fac000a4338948a1d28221abc99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=QJk8cDsNbIfVPZW1jxp6A1EBhRE%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>ç½‘å‹ The Artist's Journey ä¸Šä¼ äº†è‘—ä½œç¬¬ä¸€é¡µï¼Œä¾¿å¾—åˆ°äº†ç”µå½±ç‰ˆçš„åºåˆ—ç”»é¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a99aebee859c46b0997d20268773e971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=JsCbtjVzZ%2FDKyilg2sRjXQwa2Bs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dd44c96baf445a69e9f802b93ab3a40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=7XAfZEQFNacu9mFdbP852O8FhOY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/004c87dbe59d41c8940ec0c32b329ad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=isFBGmrZZ1apArhacudoSObEm80%3D" alt="" loading="lazy"/></p>
<p>ä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹</p>
<p>å°±è¿ç”µå½±åˆ¶ä½œäººï¼Œä¹Ÿè¢«æƒŠè‰³åˆ°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8815cb08ee104564b78e78d9a37340e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=X4bERu5Ck34TwcyyFgILU0sY%2F28%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe71db29861341bc9e2852876b47e8eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=MGlxwOcMhxSb0d9VWTVg6dti%2B3o%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bcd1c06c1dc4b8ca00e309756ecca80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=S0RqD2CIeKMpFD08kZTu08VzKcc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b83d9c06818147c8a064f11024ab55e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=cYBv3fuAw5ZseKVuM%2BhCyduP7UE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba1f8121b8654653ac1f573c4c9f933b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=9hfaO2KtJkO%2FFcpBHErHfWVSSME%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>æ›´å¤šç½‘å‹æƒŠè‰³ demo ä¸€è§ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9e3a820965843569312faa2bebdfcd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=qdr3K%2BoPFGjg0n8HtVoqaQbF9DQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1892c33c37ea415591aad9fc33cf33b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=l5RZtUcztn6uuZ7ha2yXha1MMqk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8096f66dd7344e06b5f2c40cb62e0727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=zpEERKJVMS3GVHK3MECjC76TTu0%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced0b6de15634597aa3f3d1c4df6bd27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=zM%2BAOuGM75PbVMS9pVtpVrvDCEY%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œé‡åˆ¶ç‰ˆå¹•åèŠ±çµ®ã€</strong></p>
<h3 data-id="heading-1">æ›´ç–¯ç‹‚çš„æ˜¯ï¼ŒNano Banana Pro è¿˜å¯ä»¥ç›´å‡ºçœŸäººé‡åˆ¶ç‰ˆå¹•åèŠ±çµ®ã€‚</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a80dc9ef272146fb9c1fc39bed415170~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=84SIdRptk928px33x7DC37TMvmc%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸“ä¸ºã€Šå ¡å’ä¹‹å¤œã€‹ç²‰ä¸ä»¬å‡ºçš„ä¸€æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30d703fbb8a7452db735c5d35a080ccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=NrfDBbzCGjdWTyZLOaCrYugn4fI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b79be97008c74c3f90269af65af55751~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=qQavkCtoqQ0DrQM5TvKJ70POSSI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29bc28d1034843f49c2924235c2743c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=%2FurmHrA3kRWXY4eJke1hAVE5QGc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b2dc68847814a788ece5a197fd2e1e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=LireT1fA2w%2B0SHFs5QOEZrIpA7g%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>è¿˜æœ‰ä¸€äº›ç»å…¸ååœºé¢ã€è¡¨æƒ…åŒ…ã€ç”µå½±ç­‰ï¼Œå…¨éƒ¨è¢«ç½‘å‹æå‡ºäº†ç²¾å½©èŠ±çµ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a62555ed91a4f6596faed8fa755cb5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=TNA%2FDpSy9LcgVQHMVtoezTsukk8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/932ab64c1a124aa28d54006c11fdc4b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=kwHClnu%2FqdUXm5L9BGsRw6%2Flsug%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30f1a5ae75d94826bd63ba419b7183bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=P7TT6mGA4VD%2BgbFzh1cxxz2WZNM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba1d3c2077cf48aeb1410ac896e09be5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=%2BhV8W9nii1CIcsOrNU7e%2F1bh1ws%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ab0b7fa98d44c26bdf2193279531cec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=hd1LlQODh8cAHsMaU8Mi7Ze%2F1PA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/470530c7de2e4ed09664b9f8f677d8b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=RnSWMKB4VOUu65o93LqVmXVhMVo%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fe36a450d0e4e7ca15c736644f3a8ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=Izg9c7XEFkCBA%2BE7P5WK7DNNn24%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ16 å®«æ ¼ã€Œæ—¶ç©ºæ‘„å½±ã€ï¼Œæ¨ªç©¿ 150 å¹´ã€</strong></p>
<p>ä»Šå¤©ï¼ŒNano Banana Pro åˆè´¡çŒ®äº†ä¸€ä¸ªæ–°ç©æ³•â€”â€”16 å®«æ ¼ã€‚</p>
<p>åŸºåº•æç¤ºæ¡†æ¶ï¼š</p>
<p>Make a 4Ã—4 grid starting with the 1880s. In each section, I should appear styled according to that decade (clothing, hairstyle, facial hair, accessories). Use colors, background, &amp; film style accordingly.</p>
<p>ä» 1880 å¹´ä»£å¼€å§‹ï¼ŒNano Banana Pro è¿ç»­ç”Ÿæˆæ¯éš”åå¹´äººç‰©çš„å½¢è±¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39a65e475b2c412e9d5e0ad00cc7fb76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=itL%2FW0O8spo2wc11TOF8eoGUbEA%3D" alt="" loading="lazy"/></p>
<p>ç½‘å‹ Blaine Brown ä¸Šä¼ äº†ä¸€å¼ ç…§ç‰‡åï¼ŒNano Banana Pro ç”ŸåŠ¨åˆ»ç”»äº†ä¸åŒå¹´ä»£ï¼Œäººç‰©æœè£…æ‰“æ‰®çš„ç‰¹ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/665ba4ae761748828cecf5c789626e95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=0lfNmLWTPR5%2BPBqkZop%2Fq1G6gFI%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0001d459c954d4bbc8b6e6aef4db5f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=pOHGQpKrVtJV9qsGjaGbVTSOqdM%3D" alt="" loading="lazy"/></p>
<p>ä¸€å¼ å›¾çœ‹éä» 1880s åˆ°èµ›åšå¹´ä»£ï¼Œå¥³æ€§çš„å‘å‹å’Œç©¿ç€çš„å˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dac6de815804f9a82f693ddbae32eb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=cHqNfxVCKQ%2BIWSbBYwYIANy5oCs%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰è¡¨æƒ…åŒ…ã€åŠ¨ç‰©ã€æ¼«å¨äººç‰©ç­‰æ¶æç³»åˆ—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb7706667fb2475490025313691fccfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=IxFLOhWtiNP440BfsXsBP8x6CsU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f3db3d603e54a64babf55cda01b89b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=OSrjkTrNzyMhWIb9%2FFIYajo1oPA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/370ffa0d8bca4a1e84fd8c2a27879cc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=ZuB8J4Nnw5oYtJrq%2BjfantEgnZU%3D" alt="" loading="lazy"/></p>
<p>å·¦å³æ»‘åŠ¨æŸ¥çœ‹</p>
<p>è¿˜æœ‰è‰ºæœ¯ç³»åˆ—ï¼Œç¾å¾—è®©äººæƒŠå¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/887e3a77b9c7412babf55f555bf912be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645563&amp;x-signature=VECCtb8A3CIw5nUqoR1f77%2BHEsE%3D" alt="" loading="lazy"/></p>
<p>å„è·¯å¤§ç¥è¿˜è§£é”äº†å“ªäº›ã€Œé¬¼æ‰ã€ç©æ³•ï¼Ÿæ¬¢è¿è¯„è®ºåŒºåˆ†äº«ä½ çš„ç‹¬é—¨ç§˜ç±ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fkarpathy%2Fstatus%2F1992655330002817095%3Fs%3D20" target="_blank" title="https://x.com/karpathy/status/1992655330002817095?s=20" ref="nofollow noopener noreferrer">x.com/karpathy/stâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fjamesyeung18%2Fstatus%2F1992597408128045462%3Fs%3D20" target="_blank" title="https://x.com/jamesyeung18/status/1992597408128045462?s=20" ref="nofollow noopener noreferrer">x.com/jamesyeung1â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vuex å“åº”å¼åŸç†å‰–æï¼šæ„å»ºå¯é çš„å‰ç«¯çŠ¶æ€ç®¡ç†]]></title>    <link>https://juejin.cn/post/7576223441714085931</link>    <guid>https://juejin.cn/post/7576223441714085931</guid>    <pubDate>2025-11-25T03:26:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576223441714085931" data-draft-id="7576271552703496218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vuex å“åº”å¼åŸç†å‰–æï¼šæ„å»ºå¯é çš„å‰ç«¯çŠ¶æ€ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vuex"/> <meta itemprop="datePublished" content="2025-11-25T03:26:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vuex å“åº”å¼åŸç†å‰–æï¼šæ„å»ºå¯é çš„å‰ç«¯çŠ¶æ€ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:26:57.000Z" title="Tue Nov 25 2025 03:26:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰ç«¯ç¨³å®šæ€§ä½“ç³»ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨<a href="https://juejin.cn/post/7566088386521071658" target="_blank" title="https://juejin.cn/post/7566088386521071658">å‰ç«¯ç¨³å®šæ€§</a>æ–‡ç« ä¸­æ‰€è®¨è®ºçš„ï¼Œä¸€ä¸ª"æŠ—æ‘”æ‰“"çš„å‰ç«¯åº”ç”¨éœ€è¦åœ¨å¤æ‚ã€ä¸å¯é çš„ç¯å¢ƒä¸­ä¾ç„¶æä¾›å¯é çš„ç”¨æˆ·ä½“éªŒã€‚Vuex ä½œä¸º Vue çš„å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œå…¶å“åº”å¼æœºåˆ¶æ­£æ˜¯å®ç°è¿™ç§å¯é æ€§çš„æ ¸å¿ƒåŸºç¡€ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆçŠ¶æ€ç®¡ç†éœ€è¦å“åº”å¼ï¼Ÿ</h2>
<p>åœ¨æ·±å…¥åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆçŠ¶æ€ç®¡ç†éœ€è¦å“åº”å¼ï¼Ÿ</p>
<p>æƒ³è±¡ä¸€ä¸ªç”µå•†åº”ç”¨ï¼Œå½“ç”¨æˆ·æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦æ—¶ï¼š</p>
<ul>
<li>è´­ç‰©è½¦å›¾æ ‡éœ€è¦æ˜¾ç¤ºæœ€æ–°æ•°é‡</li>
<li>ä¾§è¾¹æ è´­ç‰©è½¦éœ€è¦æ›´æ–°å•†å“åˆ—è¡¨</li>
<li>æ¨èå•†å“åŒºåŸŸå¯èƒ½éœ€è¦è°ƒæ•´</li>
</ul>
<p>å¦‚æœæ²¡æœ‰å“åº”å¼æœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ›´æ–°æ¯ä¸€ä¸ªä¾èµ–æ­¤çŠ¶æ€çš„ç»„ä»¶â€”â€”è¿™ä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”åœ¨å¤æ‚åº”ç”¨ä¸­å‡ ä¹ä¸å¯ç»´æŠ¤ã€‚</p>
<h2 data-id="heading-2">Vuex å“åº”å¼åŸç†æ·±åº¦è§£æ</h2>
<h3 data-id="heading-3">1. æ ¸å¿ƒï¼šVue çš„å“åº”å¼ç³»ç»Ÿ</h3>
<p>Vuex çš„å“åº”å¼èƒ½åŠ›å»ºç«‹åœ¨ Vue çš„å“åº”å¼ç³»ç»Ÿä¹‹ä¸Šã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–çš„ Vue å“åº”å¼åŸç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Vue</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span> = data
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observe</span>(data)
  }
  
  <span class="hljs-title function_">observe</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">if</span> (!data || <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'object'</span>) <span class="hljs-keyword">return</span>
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defineReactive</span>(data, key, data[key])
    })
  }
  
  <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, val</span>) {
    <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>() <span class="hljs-comment">// ä¾èµ–æ”¶é›†å™¨</span>
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
      <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
          dep.<span class="hljs-title function_">depend</span>() <span class="hljs-comment">// æ”¶é›†ä¾èµ–</span>
        }
        <span class="hljs-keyword">return</span> val
      },
      <span class="hljs-title function_">set</span>(<span class="hljs-params">newVal</span>) {
        <span class="hljs-keyword">if</span> (newVal === val) <span class="hljs-keyword">return</span>
        val = newVal
        dep.<span class="hljs-title function_">notify</span>() <span class="hljs-comment">// é€šçŸ¥æ›´æ–°</span>
      }
    })
  }
}
</code></pre>
<h3 data-id="heading-4">2. Vuex å¦‚ä½•é›†æˆ Vue çš„å“åº”å¼</h3>
<p>Vuex åœ¨å†…éƒ¨ä½¿ç”¨ Vue å®ä¾‹æ¥å­˜å‚¨çŠ¶æ€ï¼Œè¿™æ­£æ˜¯å…¶å“åº”å¼èƒ½åŠ›çš„æ¥æºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Store</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ Vue å®ä¾‹æ¥ç®¡ç† state</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_vm</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">$$state</span>: options.<span class="hljs-property">state</span>
      }
    })
  }
  
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">state</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_vm</span>.<span class="hljs-property">_data</span>.<span class="hljs-property">$$state</span>
  }
  
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">state</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·ä½¿ç”¨ replaceState() æ¥æ˜¾å¼æ›¿æ¢ store çŠ¶æ€'</span>)
  }
}
</code></pre>
<h3 data-id="heading-5">3. å®Œæ•´çš„å“åº”å¼æ•°æ®æµ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥ç†è§£å®Œæ•´çš„å“åº”å¼æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// store.js</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">user</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
      <span class="hljs-attr">cart</span>: []
    }
  },
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>) {
      state.<span class="hljs-property">count</span>++
    },
    <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">state, product</span>) {
      state.<span class="hljs-property">user</span>.<span class="hljs-property">cart</span>.<span class="hljs-title function_">push</span>(product)
    }
  }
})

<span class="hljs-comment">// Component.vue</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">count</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>
    },
    <span class="hljs-title function_">cartItems</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>.<span class="hljs-property">cart</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">addProduct</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'addToCart'</span>, {
        <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'å•†å“A'</span>,
        <span class="hljs-attr">price</span>: <span class="hljs-number">100</span>
      })
    }
  }
}
</code></pre>
<p>å½“è°ƒç”¨ <code>addToCart</code> mutation æ—¶ï¼š</p>
<ol>
<li>ä¿®æ”¹ <code>state.user.cart</code></li>
<li>Vue æ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–</li>
<li>é€šçŸ¥æ‰€æœ‰ä¾èµ– <code>cart</code> çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
<li>ç•Œé¢è‡ªåŠ¨æ›´æ–°</li>
</ol>
<h2 data-id="heading-6">æ„å»ºç¨³å®šçš„çŠ¶æ€ç®¡ç†æ¶æ„</h2>
<h3 data-id="heading-7">1. çŠ¶æ€åˆ†ç‰‡ä¸æ¨¡å—åŒ–</h3>
<p>å€Ÿé‰´å‰ç«¯ç¨³å®šæ€§ä¸­çš„"éš”ç¦»"æ€æƒ³ï¼Œæˆ‘ä»¬åº”è¯¥å°†çŠ¶æ€æŒ‰åŠŸèƒ½åˆ†ç‰‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">modules</span>: {
    <span class="hljs-comment">// ç”¨æˆ·æ¨¡å—</span>
    <span class="hljs-attr">user</span>: {
      <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
        <span class="hljs-attr">info</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">preferences</span>: {}
      }),
      <span class="hljs-attr">mutations</span>: {
        <span class="hljs-title function_">SET_USER_INFO</span>(<span class="hljs-params">state, info</span>) {
          state.<span class="hljs-property">info</span> = info
        }
      }
    },
    
    <span class="hljs-comment">// è´­ç‰©è½¦æ¨¡å— - å…³é”®ä¸šåŠ¡ï¼Œéœ€è¦é«˜åº¦ç¨³å®š</span>
    <span class="hljs-attr">cart</span>: {
      <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
        <span class="hljs-attr">items</span>: [],
        <span class="hljs-attr">lastUpdated</span>: <span class="hljs-literal">null</span>
      }),
      <span class="hljs-attr">getters</span>: {
        <span class="hljs-attr">totalPrice</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> state.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, item</span>) =&gt;</span> 
            total + item.<span class="hljs-property">price</span> * item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>)
        }
      },
      <span class="hljs-attr">mutations</span>: {
        <span class="hljs-comment">// å¸¦é”™è¯¯å¤„ç†çš„ mutation</span>
        <span class="hljs-title function_">ADD_ITEM</span>(<span class="hljs-params">state, item</span>) {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> existing = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span> === item.<span class="hljs-property">id</span>)
            <span class="hljs-keyword">if</span> (existing) {
              existing.<span class="hljs-property">quantity</span> += item.<span class="hljs-property">quantity</span>
            } <span class="hljs-keyword">else</span> {
              state.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({ ...item, <span class="hljs-attr">quantity</span>: item.<span class="hljs-property">quantity</span> || <span class="hljs-number">1</span> })
            }
            state.<span class="hljs-property">lastUpdated</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦å¤±è´¥:'</span>, error)
            <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨ localStorage ä¸´æ—¶å­˜å‚¨</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'cart/fallbackToLocalStorage'</span>, item)
          }
        }
      },
      <span class="hljs-attr">actions</span>: {
        <span class="hljs-comment">// é™çº§æ–¹æ¡ˆ</span>
        <span class="hljs-title function_">fallbackToLocalStorage</span>(<span class="hljs-params">{ commit }, item</span>) {
          <span class="hljs-keyword">const</span> cartData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'cart_fallback'</span>) || <span class="hljs-string">'[]'</span>)
          cartData.<span class="hljs-title function_">push</span>(item)
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'cart_fallback'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cartData))
        }
      }
    }
  }
})
</code></pre>
<h3 data-id="heading-8">2. å®¹é”™ä¸é™çº§æœºåˆ¶</h3>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨å‰ç«¯ç¨³å®šæ€§ä¸­å¼ºè°ƒçš„ï¼Œéœ€è¦æœ‰å¤‡ç”¨æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¸¦å®¹é”™çš„æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">stabilityPlugin</span> = (<span class="hljs-params">store</span>) =&gt; {
  <span class="hljs-comment">// çŠ¶æ€å¿«ç…§ï¼Œç”¨äºå¼‚å¸¸æ¢å¤</span>
  <span class="hljs-keyword">let</span> stateSnapshot = <span class="hljs-literal">null</span>
  
  store.<span class="hljs-title function_">subscribeMutation</span>(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
    <span class="hljs-comment">// å®šæœŸä¿å­˜çŠ¶æ€å¿«ç…§</span>
    <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'cart'</span>) || mutation.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'user'</span>)) {
      stateSnapshot = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'vuex_backup'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(stateSnapshot))
    }
  })
  
  <span class="hljs-comment">// çŠ¶æ€æ¢å¤æœºåˆ¶</span>
  <span class="hljs-keyword">const</span> savedState = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'vuex_backup'</span>)
  <span class="hljs-keyword">if</span> (savedState) {
    <span class="hljs-keyword">try</span> {
      store.<span class="hljs-title function_">replaceState</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(savedState))
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'çŠ¶æ€æ¢å¤å¤±è´¥ï¼Œä½¿ç”¨åˆå§‹çŠ¶æ€'</span>)
    }
  }
}
</code></pre>
<h3 data-id="heading-9">3. ç›‘æ§ä¸è°ƒè¯•</h3>
<p>å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½ç›‘æ§æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">performancePlugin</span> = (<span class="hljs-params">store</span>) =&gt; {
  store.<span class="hljs-title function_">subscribeAction</span>({
    <span class="hljs-attr">before</span>: <span class="hljs-function">(<span class="hljs-params">action, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">`action: <span class="hljs-subst">${action.type}</span>`</span>)
    },
    <span class="hljs-attr">after</span>: <span class="hljs-function">(<span class="hljs-params">action, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">`action: <span class="hljs-subst">${action.type}</span>`</span>)
    }
  })
  
  store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¸ŠæŠ¥çŠ¶æ€å˜æ›´åˆ°ç›‘æ§ç³»ç»Ÿ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">monitor</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">monitor</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'vuex_mutation'</span>, {
        <span class="hljs-attr">type</span>: mutation.<span class="hljs-property">type</span>,
        <span class="hljs-attr">payload</span>: mutation.<span class="hljs-property">payload</span>
      })
    }
  })
}
</code></pre>
<h2 data-id="heading-10">å“åº”å¼ç³»ç»Ÿçš„ç¨³å®šæ€§è€ƒé‡</h2>
<h3 data-id="heading-11">1. æ€§èƒ½ä¼˜åŒ–</h3>
<p>å¤§è§„æ¨¡çŠ¶æ€æ ‘çš„å“åº”å¼å¯èƒ½å¸¦æ¥æ€§èƒ½é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŒ–å¤§å‹åˆ—è¡¨çš„å“åº”å¼</span>
<span class="hljs-keyword">const</span> optimizedModule = {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">largeList</span>: []
  }),
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-comment">// ä½¿ç”¨ Object.freeze é¿å…ä¸å¿…è¦çš„å“åº”å¼</span>
    <span class="hljs-title function_">SET_LARGE_LIST</span>(<span class="hljs-params">state, list</span>) {
      state.<span class="hljs-property">largeList</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(list)
    },
    
    <span class="hljs-comment">// åˆ†æ‰¹æ›´æ–°é¿å…å¡é¡¿</span>
    <span class="hljs-title function_">APPEND_TO_LIST</span>(<span class="hljs-params">state, items</span>) {
      <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">100</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; items.<span class="hljs-property">length</span>; i += chunkSize) {
        <span class="hljs-keyword">const</span> chunk = items.<span class="hljs-title function_">slice</span>(i, i + chunkSize)
        state.<span class="hljs-property">largeList</span> = state.<span class="hljs-property">largeList</span>.<span class="hljs-title function_">concat</span>(chunk)
        
        <span class="hljs-comment">// è®©å‡ºä¸»çº¿ç¨‹ï¼Œé¿å…é˜»å¡</span>
        <span class="hljs-keyword">if</span> (i + chunkSize &lt; items.<span class="hljs-property">length</span>) {
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-number">0</span>)
        }
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-12">2. å†…å­˜ç®¡ç†</h3>
<p>é˜²æ­¢å†…å­˜æ³„æ¼çš„å“åº”å¼è®¾è®¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶å†…çš„å†…å­˜å®‰å…¨æ¨¡å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// é¿å…åœ¨ç»„ä»¶ä¸­ç›´æ¥å­˜å‚¨å¤§é‡çŠ¶æ€å¼•ç”¨</span>
      <span class="hljs-attr">localCartCopy</span>: <span class="hljs-literal">null</span>
    }
  },
  
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// ä½¿ç”¨è®¡ç®—å±æ€§è€Œéç›´æ¥å¼•ç”¨</span>
    <span class="hljs-title function_">cartSummary</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> cart = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">cart</span>.<span class="hljs-property">items</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">count</span>: cart.<span class="hljs-property">length</span>,
        <span class="hljs-attr">total</span>: cart.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>)
      }
    }
  },
  
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç†å·¥ä½œ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">localCartCopy</span> = <span class="hljs-literal">null</span>
  }
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“ï¼šæ„å»ºå¯é çš„çŠ¶æ€ç®¡ç†ä½“ç³»</h2>
<p>Vuex çš„å“åº”å¼æœºåˆ¶ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›ï¼Œä½†è¦æ„å»ºçœŸæ­£ç¨³å®šå¯é çš„å‰ç«¯åº”ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li><strong>æ·±åº¦ç†è§£åŸç†</strong>ï¼šæ˜ç™½å“åº”å¼ç³»ç»Ÿçš„å·¥ä½œæœºåˆ¶ï¼Œé¿å…å¸¸è§çš„é™·é˜±</li>
<li><strong>å¹¿åº¦è®¾è®¡æ¶æ„</strong>ï¼šé‡‡ç”¨æ¨¡å—åŒ–ã€åˆ†ç‰‡åŒ–çš„çŠ¶æ€è®¾è®¡ï¼Œå®ç°æ•…éšœéš”ç¦»</li>
<li><strong>å®è·µå®¹é”™æ–¹æ¡ˆ</strong>ï¼šä¸ºå…³é”®çŠ¶æ€æ“ä½œå‡†å¤‡é™çº§å’Œæ¢å¤æœºåˆ¶</li>
<li><strong>ä¸»åŠ¨ç›‘æ§ä¼˜åŒ–</strong>ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œä¸»åŠ¨å‘ç°æ€§èƒ½é—®é¢˜</li>
</ol>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨å‰ç«¯ç¨³å®šæ€§æ–‡ç« ä¸­å¼ºè°ƒçš„ï¼Œä¼˜ç§€çš„ç³»ç»Ÿä¸æ˜¯ä¸ä¼šå‡ºé”™ï¼Œè€Œæ˜¯åœ¨å‡ºé”™æ—¶ä¾ç„¶èƒ½å¤Ÿæä¾›å¯ç”¨çš„ä½“éªŒã€‚Vuex çš„å“åº”å¼ç³»ç»Ÿï¼Œé…åˆæ°å½“çš„æ¶æ„è®¾è®¡å’Œå®¹é”™æœºåˆ¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºå‡ºçœŸæ­£"æŠ—æ‘”æ‰“"çš„å‰ç«¯åº”ç”¨ã€‚</p>
<p>è®°ä½ï¼šåœ¨å‰ç«¯ç¨³å®šæ€§çš„ä¸–ç•Œé‡Œï¼Œ<strong>é™çº§çš„ä½“éªŒè¿œèƒœäºå®Œå…¨çš„å¤±è´¥</strong>ã€‚å³ä½¿çŠ¶æ€ç®¡ç†å‡ºç°ä¸´æ—¶é—®é¢˜ï¼Œé€šè¿‡åˆç†çš„é™çº§è®¾è®¡ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ä¸ºç”¨æˆ·æä¾›åŸºæœ¬å¯ç”¨çš„æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥å…·æ¨è - æ²‰æµ¸å¼ç¿»è¯‘ Chrome æ’ä»¶]]></title>    <link>https://juejin.cn/post/7576228981230534683</link>    <guid>https://juejin.cn/post/7576228981230534683</guid>    <pubDate>2025-11-25T03:29:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576228981230534683" data-draft-id="7576197876717994022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥å…·æ¨è - æ²‰æµ¸å¼ç¿»è¯‘ Chrome æ’ä»¶"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T03:29:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Vic_wkx"/> <meta itemprop="url" content="https://juejin.cn/user/1116759545357182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥å…·æ¨è - æ²‰æµ¸å¼ç¿»è¯‘ Chrome æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759545357182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Vic_wkx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:29:15.000Z" title="Tue Nov 25 2025 03:29:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨é˜…è¯» Jake Wharton çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjakewharton.com%2Fblog%2F" target="_blank" title="https://jakewharton.com/blog/" ref="nofollow noopener noreferrer">jakewharton.com/blog/</a></p>
<p>çœ‹çš„æ—¶å€™åªæ¨è‡ªå·±è‹±è¯­ä¸å¤Ÿå¥½ï¼ŒåŸæ–‡å®åœ¨æ˜¯çœ‹å¾—å¤´å¤§ã€‚æ‰€ä»¥åªèƒ½å€ŸåŠ©ç¿»è¯‘å·¥å…·æ¥å‹‰å¼ºç†è§£ã€‚</p>
<h2 data-id="heading-0">Google Translate æ’ä»¶</h2>
<p>å¯ä»¥å€ŸåŠ© Google Translate æ’ä»¶æ¥ç¿»è¯‘ï¼Œç‚¹å‡»<code>å³é”® -&gt; Translate to ä¸­æ–‡</code>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c76ee946095402488b1fd4385695879~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=RK8tM6K1udIwB9oCcdJ%2BiAAVPjU%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸è¿‡è¿™ä¸ªç¿»è¯‘æœ‰äº›ç”Ÿç¡¬ï¼Œæœ‰çš„å¥å­ç¿»è¯‘ä¹‹ååè€Œçœ‹ä¸æ‡‚äº†ï¼Œæ‰€ä»¥æœ‰æ—¶å€™éœ€è¦åˆ‡å›åŸæ–‡ï¼Œå¯¹ç…§ç€ç†è§£ã€‚æ­¤æ—¶å†ç‚¹ä¸€æ¬¡<code>å³é”® -&gt; Translate to ä¸­æ–‡</code>å°±èƒ½åˆ‡æ¢ä¸­è‹±æ–‡äº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/601300c56d6c414783cd7d392f4f9516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=42dJSsVPBkkLlAZckPkMtwOO3M8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸è¿‡è¿™æ ·åˆ‡æ¥åˆ‡å»çš„ä¹Ÿæœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªç¿»è¯‘å·¥å…·ï¼Œèƒ½åœ¨ç¿»è¯‘ä¹‹åï¼Œä¿ç•™åŸæ–‡ã€‚</p>
<h2 data-id="heading-1">Immersive Translate æ’ä»¶</h2>
<p>äºæ˜¯æ‰¾åˆ°äº†è¿™ä¸ª Chrome æ’ä»¶ï¼š</p>
<p>æ²‰æµ¸å¼ç¿»è¯‘ï¼ˆImmersive Translateï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fimmersive-translate-trans%2Fbpoadfkcbjbfhfodiogcnhhhpibjhbnh" target="_blank" title="https://chromewebstore.google.com/detail/immersive-translate-trans/bpoadfkcbjbfhfodiogcnhhhpibjhbnh" ref="nofollow noopener noreferrer">chromewebstore.google.com/detail/immeâ€¦</a></p>
<p>è£…ä¸Šä¹‹åï¼Œæœ‰ä¸€ä¸ªéå¸¸è¯¦ç»†æ¸…æ™°çš„æ–°æ‰‹å¼•å¯¼ï¼Œåšå¾—çœŸçš„å¾ˆä¸é”™ï¼Œå ªç§°æ’ä»¶å…¸èŒƒï¼Œè·Ÿç€å¼•å¯¼å¾ˆå¿«å°±èƒ½ä¸Šæ‰‹ã€‚</p>
<p>åœ¨å…¶è®¾ç½®ç•Œé¢ï¼Œå¯ä»¥é€‰æ‹©åŒè¯­å¯¹ç…§ï¼Œè¿™å°±æ˜¯æˆ‘éœ€è¦çš„æ•ˆæœäº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e35c48e5b0454788a8a77144ac5321e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=1RphTJ963l9BJ3H00ychPEEgF6s%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ç”¨è¿™ä¸ªæ’ä»¶åï¼Œç‚¹å‡»ç½‘é¡µå³è¾¹çš„æ‚¬æµ®çƒå°±èƒ½ä¸€é”®ç¿»è¯‘äº†ï¼Œåº•éƒ¨è¿˜æœ‰ä¸ªè®¾ç½® iconï¼Œå¯ä»¥è¿›è¡Œä¸€äº›å¸¸ç”¨çš„è®¾ç½®ï¼Œè¿™æ˜¯åŒè¯­å¯¹ç…§çš„æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc6ac93c0dad445ca9397a268dc5f57b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=po6gNt8SImcsh7GGIMkHico7LB8%3D" alt="image.png" loading="lazy"/></p>
<p>è®¾ç½® icon ä¸­æä¾›äº†<code>æ€»æ˜¯ç¿»è¯‘è¯¥ç½‘ç«™</code>çš„å¿«æ·è®¾ç½®ï¼Œè¿™æ ·ä¸‹æ¬¡å°±ä¸ç”¨æ‰‹åŠ¨ç‚¹å‡»ç¿»è¯‘äº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1feefa01019c47f895593c492d6d1642~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=XZHnxQCaNKvL%2B5tlpZJAcN%2Bpeo4%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ’ä»¶è®¾ç½®ç•Œé¢å¯ä»¥çœ‹åˆ°<code>æ€»æ˜¯ç¿»è¯‘çš„ç½‘å€</code>åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œç›´æ¥ç¼–è¾‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c02bf815f151474e8245ba3eb5ebeb6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=VGAVLeIQ92RZH8bkYyR4aFj1s74%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œè¿˜å¯ä»¥é€‰æ‹©è¯‘æ–‡æ˜¾ç¤ºçš„æ ·å¼ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢å®çº¿è¾¹æ¡†çš„æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bec69ebbc91244cba364e8926d7dcca9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=XZkphkgub8svCHjUoyYXT3oiAnE%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æ³¨æ„åˆ°è¿™é‡Œé¢è¿˜æœ‰ä¸ª<code>æ¨¡ç³Šæ•ˆæœï¼ˆå­¦ä¹ æ¨¡å¼ï¼‰</code>ï¼Œå¯ç”¨åï¼Œç¿»è¯‘å°±ä¼šè¢«æ¨¡ç³Šå¤„ç†ï¼Œé¼ æ ‡ç§»åŠ¨ä¸Šå»æ‰æ˜¾ç¤ºè¯‘æ–‡ã€‚è¿˜æŒºæœ‰æ„æ€çš„ï¼Œæ˜¯ç»™å­¦ä¹ è¯­è¨€çš„äººç”¨çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25115a6c6eb64f4dbb42e899db3c8431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=Wt%2FXAPJCs%2FiczhIddTqgEQ%2Bmz6A%3D" alt="image.png" loading="lazy"/></p>
<p>ç¿»è¯‘æœåŠ¡è¿™é‡Œè¿˜å¯ä»¥åˆ‡æ¢å„ç§æ¨¡å‹ï¼Œå¯ä»¥å€ŸåŠ©å„ç§ AI æ¨¡å‹å¸®å¿™ç¿»è¯‘ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78ebae93e6d34d14ba23db2bf01bd8b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVmljX3dreA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646930&amp;x-signature=A8AFG2OHJe9Xlzq6B5hTpPSCh9o%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸è¿‡é«˜çº§ç¿»è¯‘æ˜¯æ”¶è´¹çš„ï¼Œæˆ‘ç”¨çš„å…è´¹çš„æ¨¡å‹ï¼Œåšä¸ªè¾…åŠ©å°±å¥½äº†ï¼Œè¯¶ï¼Œåˆ«éª‚äººå“¦ï¼Œä¸æ˜¯é’±ä¸é’±çš„äº‹å„¿ï¼Œä¸»è¦æ˜¯å–œæ¬¢è‡ªå·±ç†è§£ï¼ˆç”³å…¬è±¹ï¼šå“¥åƒä¸æƒ¯è¿™ä¸ªï¼Œå°±å–œæ¬¢è‡ªå·±ä¿®ç‚¼=ï¼Œ=ï¼‰</p>
<h2 data-id="heading-2">åè®°</h2>
<p>æˆ‘æ³¨æ„åˆ° Jake Wharton å·¨ä½¬åœ¨åšå®¢åº•éƒ¨å†™äº†ï¼š</p>
<blockquote>
<p>P.S. I'm casually looking for new employment opportunities. Got a lead? I'mÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fjakewharton.com%2Fhire" target="_blank" title="https://jakewharton.com/hire" ref="nofollow noopener noreferrer">available for hire</a>.</p>
</blockquote>
<p>æœ‰ç‚¹éœ‡æƒŠï¼Œè¿™æ ·çš„å·¨ä½¬éƒ½éœ€è¦è‡ªå·±æ‰¾å·¥ä½œå—ã€‚ä¸åº”è¯¥æ˜¯æƒ³å»å“ªå°±å»å“ªå—ï¼Ÿçœ‹äº†ä¸‹å·¨ä½¬çš„ç®€å†ï¼Œé‡Œé¢æåˆ°ä¸€äº›ä»·å€¼è§‚æŒºæœ‰æ„æ€çš„ï¼š</p>
<h3 data-id="heading-3">Values</h3>
<p>Here are some values of mine. You don't need to share them all, but more is better.</p>
<h4 data-id="heading-4">No â€œAIâ€</h4>
<p>No â€œAIâ€ companies, â€œAIâ€-based products, or forced â€œAIâ€ usage for development.</p>
<h4 data-id="heading-5">No crypto</h4>
<p>Cryptography is good, but cryptocurrencies are bad.</p>
<h4 data-id="heading-6">Remote work</h4>
<p>I work remotely, but happy to visit offices a couple of times each year.</p>
<h4 data-id="heading-7">Open source</h4>
<p>You use open source software, and you publish your own open source projects (or want to start).</p>
<h4 data-id="heading-8">Customers over shareholders</h4>
<p>Your product focuses on providing value to customers, not enriching shareholders.</p>
<h4 data-id="heading-9">People over profits</h4>
<p>No gig workers or exploitative practices to squeeze every cent from customers.</p>
<h4 data-id="heading-10">Small and focused</h4>
<p>Doing one thing well is better than trying to be everything to everyone.</p>
<h4 data-id="heading-11">Diversity, equity, and inclusion</h4>
<p>Distributing opportunity equally takes active work.</p>
<h4 data-id="heading-12">Work/life balance</h4>
<p>I don't have work chat, email, or code review on my phone.</p>
<p>çœ‹èµ·æ¥å·¨ä½¬ä¸å–œæ¬¢ AIï¼Œä¸å–œæ¬¢åŠ å¯†è´§å¸ã€‚è¿™ä¸¤ç‚¹æˆ‘ä¸èƒ½å®Œå…¨è‹ŸåŒã€‚å…¶ä»–å‡ ç‚¹æˆ‘éƒ½éå¸¸æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIBrix v0.5.0 æ­£å¼å‘å¸ƒï¼šå®ç°æ‰¹é‡APIæ”¯æŒã€KVCache v1è¿æ¥å™¨å‡çº§ï¼Œå…¨é¢æå‡P/Dæ¶æ„ååŒæ•ˆèƒ½]]></title>    <link>https://juejin.cn/post/7576208176006889524</link>    <guid>https://juejin.cn/post/7576208176006889524</guid>    <pubDate>2025-11-25T03:38:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576208176006889524" data-draft-id="7576208176006856756" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIBrix v0.5.0 æ­£å¼å‘å¸ƒï¼šå®ç°æ‰¹é‡APIæ”¯æŒã€KVCache v1è¿æ¥å™¨å‡çº§ï¼Œå…¨é¢æå‡P/Dæ¶æ„ååŒæ•ˆèƒ½"/> <meta itemprop="keywords" content="GitHub,å¼€æº,èµ„è®¯"/> <meta itemprop="datePublished" content="2025-11-25T03:38:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨å¼€æº"/> <meta itemprop="url" content="https://juejin.cn/user/1227510999971086"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIBrix v0.5.0 æ­£å¼å‘å¸ƒï¼šå®ç°æ‰¹é‡APIæ”¯æŒã€KVCache v1è¿æ¥å™¨å‡çº§ï¼Œå…¨é¢æå‡P/Dæ¶æ„ååŒæ•ˆèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1227510999971086/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨å¼€æº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:38:38.000Z" title="Tue Nov 25 2025 03:38:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b7c4cd3861d44c49ce4dba1a0622c07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646718&amp;x-signature=GpS4oinKLXNDSoAnz4ffCmEdes0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvllm-project%2Faibrix" target="_blank" title="https://github.com/vllm-project/aibrix" ref="nofollow noopener noreferrer">github.com/vllm-projecâ€¦</a></p>
</blockquote>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬æ­£å¼å‘å¸ƒ AIBrix v0.5.0ã€‚æ­¤ç‰ˆæœ¬å¼•å…¥ä¸ OpenAI å…¼å®¹çš„æ‰¹å¤„ç† APIï¼Œä¸“ä¸ºå¤„ç†é«˜ååã€æ—¶å»¶ä¸æ•æ„Ÿçš„ç¦»çº¿æ¨ç†ä¸è¯„ä¼°ä»»åŠ¡è®¾è®¡ï¼Œæœ‰æ•ˆé¿å…å¯¹å®æ—¶ç«¯ç‚¹é€ æˆå¹²æ‰°ã€‚åŒæ—¶ï¼Œæ–°ç‰ˆæœ¬é›†æˆäº†å…¨æ–°çš„ KVCache è¿æ¥å™¨ï¼ˆAIBrixOffloadingConnectorV1Type3ï¼‰ï¼Œå€ŸåŠ©å…¶æµæ°´çº¿å¼é¢„å–ä¸åˆ†å±‚å¸è½½æœºåˆ¶ï¼Œæ˜¾è‘—æå‡ KVCache å¸è½½ä¸å¤ç”¨çš„æ•ˆç‡ã€‚æ­¤å¤–ï¼Œv0.5.0 å°† StormService æ‰“é€ ä¸ºç”Ÿäº§çº§çš„æ§åˆ¶é¢ï¼Œé€šè¿‡ PodSet/PodGroup åŸè¯­å®ç°å¤š Pod ç®¡ç†ï¼Œæä¾›æ‹“æ‰‘ä¸è´Ÿè½½æ„ŸçŸ¥çš„è·¯ç”±èƒ½åŠ›ï¼Œå¹¶åˆ©ç”¨ subTargetSelector å®ç°è§’è‰²çº§è‡ªåŠ¨æ‰©ç¼©ï¼Œä»è€Œä¸º P/D åˆ†ç¦»æ¶æ„æä¾›ç²¾ç»†åŒ–çš„èµ„æºä¼¸ç¼©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d206373451f47e28304378c092bef2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646718&amp;x-signature=9lamrIz1OQeKsZszQlIKCMlMeeQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯ v0.5.0 çš„æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆã€‚</p>
<h2 data-id="heading-0">æ‰¹å¤„ç† API</h2>
<p><strong>AIBrix</strong>Â æœ¬æ¬¡æ›´æ–°æ­£å¼åŠ å…¥å¯¹<strong>æ‰¹å¤„ç† API</strong>Â çš„æ”¯æŒã€‚æ‰¹å¤„ç† API æ—¨åœ¨ä¼˜åŒ–å¤§ä½“é‡ã€å¯¹å»¶è¿Ÿä¸æ•æ„Ÿçš„æ¨ç†å·¥ä½œè´Ÿè½½ï¼Œæ˜¯ä¸€é¡¹å¼ºå¤§çš„æ–°åŠŸèƒ½ã€‚</p>
<p>éšç€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ï¼ˆGenAIï¼‰åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå¹¶éæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦å³æ—¶å“åº”ã€‚åƒå¤§è§„æ¨¡æ•°æ®é›†è¯„æµ‹ã€ç¦»çº¿å†…å®¹ç”Ÿæˆå’Œæ‰¹é‡æ•°æ®å¤„ç†ç­‰ä»»åŠ¡ï¼Œå¸¸å¸¸ä¼šä½¿å®æ—¶æœåŠ¡æ¥å£æ‹¥å µä¸å ªï¼Œå¯¼è‡´èµ„æºåˆ©ç”¨æ•ˆç‡ä½ä¸‹å’Œæˆæœ¬å¢åŠ ã€‚AIBrix æ‰¹å¤„ç† API é€šè¿‡å…è®¸ç”¨æˆ·å¼‚æ­¥æäº¤å¤§é‡è¯·æ±‚æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚é€šè¿‡å°†è¿™äº›è¯·æ±‚ä»¥ä¼˜åŒ–è¿‡çš„æ•°é‡æ‰¹æ¬¡å¤„ç†ï¼Œç›¸è¾ƒäºæ ‡å‡†åœ¨çº¿æœåŠ¡ï¼ŒAIBrix å¯ä»¥æ˜¾è‘—æé«˜ GPU åˆ©ç”¨ç‡å’Œé›†ç¾¤æ•´ä½“ååé‡ã€‚</p>
<p><strong>ä¸»è¦ç‰¹æ€§</strong></p>
<ul>
<li><strong>OpenAI å…¼å®¹æ€§ï¼š</strong> Â æ‰¹å¤„ç† API è¢«è®¾è®¡ä¸ºå¯ç›´æ¥æ›¿ä»£ç°æœ‰å·¥ä½œæµï¼Œæ”¯æŒæ ‡å‡†çš„ OpenAI æ‰¹å¤„ç† APIï¼ˆä¾‹å¦‚ï¼Œ<code>/v1/batches</code>ï¼‰ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†ï¼š</strong> Â æ”¯æŒâ€œå³å‘å³å¿˜â€æ¶æ„ã€‚é€šè¿‡Â <code>.jsonl</code>Â æ–‡ä»¶æäº¤å¤§é‡ä»»åŠ¡åï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå¯ä»¥å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œå¹¶åœ¨ç»“æœå°±ç»ªåè¿›è¡Œæ£€ç´¢ã€‚</li>
<li><strong>å¯é…ç½®çš„ä½œä¸šæ± ï¼š</strong> Â æ”¯æŒé€šè¿‡å¯é…ç½®çš„ä½œä¸šæ± å¤§å°å¾®è°ƒèµ„æºåˆ†é…ï¼Œä»¥é€‚åº”ç‰¹å®šçš„ç¡¬ä»¶é™åˆ¶å’Œååé‡ç›®æ ‡ã€‚</li>
<li><strong>å¢å¼ºçš„é”™è¯¯å¤„ç†ï¼š</strong> Â å¼ºå¤§çš„éªŒè¯å’Œé”™è¯¯æŠ¥å‘ŠåŠŸèƒ½æ”¯æŒè¯·æ±‚è‡ªåŠ¨é‡è¯•ï¼Œç¡®ä¿æ‚¨å¯ä»¥è¿½è¸ªå¤§è§„æ¨¡æ‰¹å¤„ç†ä¸­æ¯ä¸ªå•ç‹¬è¯·æ±‚çš„çŠ¶æ€ã€‚</li>
</ul>
<p><strong>å¿«é€Ÿå…¥é—¨</strong></p>
<p>ç”±äº AIBrix æ‰¹å¤„ç† API ä¸ OpenAI å…¼å®¹ï¼Œå¯¹äºç†Ÿæ‚‰æ ‡å‡†å¤§è¯­è¨€æ¨¡å‹å·¥å…·çš„äººæ¥è¯´ï¼Œä¸Šæ‰‹æ“ä½œååˆ†ç®€å•ã€‚</p>
<ol>
<li>å‡†å¤‡æ‰¹å¤„ç†è¾“å…¥ï¼ˆ<code>requests.jsonl</code>ï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"custom_id"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"req-1"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"POST"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"/v1/chat/completions"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"llama-3-8b"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"Hello world!"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"custom_id"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"req-2"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"POST"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"/v1/chat/completions"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"llama-3-8b"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"Explain batch processing."</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>2.  æäº¤æ‰¹å¤„ç†ä½œä¸šï¼ˆä½¿ç”¨æŒ‡å‘ AIBrix çš„æ ‡å‡† OpenAI å®¢æˆ·ç«¯ï¼‰ï¼š</p>

<pre><code class="hljs language-ini" lang="ini">from openai import OpenAI

<span class="hljs-attr">client</span> = OpenAI(
Â  Â  <span class="hljs-attr">base_url</span>=<span class="hljs-string">"http://your-aibrix-endpoint/v1"</span>,
Â  Â  <span class="hljs-attr">api_key</span>=<span class="hljs-string">"aibrix"</span>
)

<span class="hljs-comment"># Upload file</span>
<span class="hljs-attr">batch_file</span> = client.files.create(
Â  <span class="hljs-attr">file</span>=open(<span class="hljs-string">"requests.jsonl"</span>,Â <span class="hljs-string">"rb"</span>),
Â  <span class="hljs-attr">purpose</span>=<span class="hljs-string">"batch"</span>
)

<span class="hljs-comment"># Create batch job</span>
<span class="hljs-attr">batch_job</span> = client.batches.create(
Â  <span class="hljs-attr">input_file_id</span>=batch_file.id,
Â  <span class="hljs-attr">endpoint</span>=<span class="hljs-string">"/v1/chat/completions"</span>,
Â  <span class="hljs-attr">completion_window</span>=<span class="hljs-string">"24h"</span>
)

print(f"Batch submitted: {batch_job.id}")
</code></pre>
<p><strong>äº†è§£æ›´å¤š</strong></p>
<p>å¦‚éœ€å®Œæ•´çš„éƒ¨ç½²é…ç½®å’Œ API å‚è€ƒï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Faibrix.readthedocs.io%2Flatest%2Ffeatures%2Fbatch-api.html" target="_blank" title="https://aibrix.readthedocs.io/latest/features/batch-api.html" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 data-id="heading-1">KVCache v1 Connector</h2>
<p>æˆ‘ä»¬åœ¨ v0.4.0 ç‰ˆæœ¬ä¸­å‘å¸ƒçš„ AIBrix KVCache Connectorï¼Œç»è¿‡åŸºå‡†æµ‹è¯•ä¸å†…éƒ¨å®é™…éƒ¨ç½²éªŒè¯ï¼Œå‘ç°äº†ä¸€äº›é‡è¦çš„å¯ä»¥æå‡æ€§èƒ½çš„ä¼˜åŒ–æœºä¼šã€‚ä¸ºå……åˆ†æŒ–æ˜è¿™äº›ä¼˜åŒ–ç‚¹ä»¥å‘æŒ¥ KVCache å¸è½½çš„æ½œåŠ›ï¼Œæˆ‘ä»¬åœ¨ v0.5.0 ç‰ˆæœ¬ä¸­å®ç°äº†ä¸€ç³»åˆ—å…³é”®ä¼˜åŒ–ï¼Œå¹¶æ¨å‡ºäº†æ–°çš„ KVCache Connector9ï¼ˆAIBrixOffloadingConnectorV1Type3ï¼‰ã€‚</p>
<p><strong>æ ¸å¿ƒä¼˜åŒ–æŠ€æœ¯åŒ…å«ï¼š</strong></p>
<ul>
<li>æµæ°´çº¿å¼ KVCache é¢„å–å’ŒåŠ è½½æŠ€æœ¯</li>
</ul>
<p>æˆ‘ä»¬é€šè¿‡è®©é¢„å–ã€åŠ è½½ä¸è®¡ç®—è¿™ä¸‰ä¸ªå…³é”®é˜¶æ®µå¹¶è¡Œæ‰§è¡Œï¼Œä»¥æµæ°´çº¿å……åˆ†é‡å çš„ä¼˜åŒ–æ–¹å¼ï¼Œä¸ä»…å¤§å¹…å‡å°‘äº†ç©ºé—²ç­‰å¾…æ—¶é—´ï¼Œæ¶ˆé™¤äº†TPOTï¼ˆæ¯ç§’è¾“å‡º token æ•°ï¼‰çš„å»¶è¿ŸæŸè€—ï¼Œæ›´è®©ç³»ç»Ÿååæ€§èƒ½çªç ´åŸæœ‰ç“¶é¢ˆã€‚</p>
<ul>
<li>åˆ†å±‚å¼ KVCache å¸è½½æœºåˆ¶</li>
</ul>
<p>é€šè¿‡å°† KVCache å¸è½½æ“ä½œä¸æ¨ç†å„å±‚çš„å‰å‘è®¡ç®—åŒæ­¥è¿›è¡Œï¼Œæœ‰æ•ˆéšè—äº†æ•°æ®ä¼ è¾“å»¶è¿Ÿã€‚ä½¿å¾—å³ä½¿ KVCache å‘½ä¸­ç‡è¾ƒä½æ—¶ï¼Œä»èƒ½ä¿æŒé«˜æ•ˆæ¨ç†ï¼Œç¡®ä¿æ¨ç†å¼•æ“æŒç»­æ»¡è½½è¿è½¬ï¼Œå®ç°èµ„æºåˆ©ç”¨ç‡æœ€å¤§åŒ–ã€‚</p>
<p>ç›¸è¾ƒäº v0.4.0 ç‰ˆæœ¬çš„ KVCache Connectorï¼ˆAIBrixOffloadingConnectorV1Type1ï¼‰ï¼Œåœ¨ Llama 3.1 70B æ¨¡å‹ï¼ˆå¼ é‡å¹¶è¡Œåº¦=8ï¼‰çš„æµ‹è¯•ä¸­ï¼Œv0.5.0 ç‰ˆæœ¬çš„è¿™å¥—ç»„åˆä¼˜åŒ–æ–¹æ¡ˆä½¿ TPOT ä¸æ•´ä½“ååé‡åŒåŒæå‡è¶…è¿‡20%ï¼ŒåŒæ—¶ä»ä¿æŒä¼˜å¼‚çš„ TTFTï¼ˆé¦– token æ—¶å»¶ï¼‰ã€‚</p>
<h2 data-id="heading-2">ç”Ÿäº§çº§ P/D åˆ†ç¦»ç¼–æ’æ–¹æ¡ˆ</h2>
<p>v0.5.0 ç‰ˆæœ¬å°† StormService å‡çº§ä¸ºé¢å‘å¤§è§„æ¨¡å¼‚æ„ P/D åˆ†ç¦»é›†ç¾¤çš„é«˜çº§æ§åˆ¶é¢ã€‚å…¨æ–°æ¨å‡ºçš„ PodGroup API ä½¿ StormService èƒ½å¤Ÿä¸ååŒè°ƒåº¦ç”Ÿæ€ç³»ç»Ÿï¼ˆCoschedulingã€Godelã€Volcanoï¼‰æ— ç¼é›†æˆï¼Œå°†ç´§è€¦åˆçš„å·¥ä½œèŠ‚ç‚¹ä½œä¸ºç»Ÿä¸€è°ƒåº¦å•å…ƒè¿›è¡Œç¼–æ’ã€‚ç»“åˆæ–°è®¾è®¡çš„ PodSet APIï¼ŒStormService ç°å·²èƒ½æ˜¾å¼ç®¡ç†å¤š Pod å·¥ä½œèŠ‚ç‚¹ä¸åˆ†ç‰‡ç»„, å³å°†å…¶ä½œä¸ºé€»è¾‘æ•´ä½“ç»Ÿä¸€æ§åˆ¶ç”Ÿå‘½å‘¨æœŸã€æ‹“æ‰‘ç»“æ„ä¸è¿è¡ŒçŠ¶æ€ï¼ŒåŒæ—¶ä¿æŒä¸ç°æœ‰å• Pod æ¶æ„çš„å‘åå…¼å®¹æ€§ã€‚</p>
<p>æ­¤å¤–ï¼Œv0.5.0 ä¸ºå¤æ‚éƒ¨ç½²åœºæ™¯æä¾›äº†æ›´å¼ºå¤§çš„æ»šåŠ¨æ›´æ–°ä¸é‡å¯è¯­ä¹‰ã€‚æ–°å¢çš„ FullRecreate ç­–ç•¥è®©è¿ç»´äººå‘˜èƒ½å¤Ÿä»¥åŸå­æ–¹å¼æ¢å¤å¼‚å¸¸ PodSetï¼Œé¿å…äº§ç”Ÿä¸­é—´çŠ¶æ€æ®‹ç•™ï¼›è€Œè§’è‰²å‡çº§åºåˆ—åŠŸèƒ½æ”¯æŒæŒ‰é¢„è®¾é¡ºåºï¼ˆä¾‹å¦‚ï¼šé›†ç¾¤å†…è·¯ç”± â†’ é¢„å¡«å……èŠ‚ç‚¹ â†’ è§£ç èŠ‚ç‚¹ï¼‰åœ¨ä¸åŒè§’è‰²é—´è¿›è¡Œå®‰å…¨æœ‰åºçš„å˜æ›´å‘å¸ƒï¼Œå½»åº•å–ä»£éšæœºæ›´æ–°æœºåˆ¶ã€‚è¿™å¥—ç»„åˆæ–¹æ¡ˆä½¿å¾—é«˜é£é™©æ“ä½œï¼ˆå¦‚æ¨¡å¼å˜æ›´ã€è·¯ç”±è°ƒæ•´ã€è¿è¡Œæ—¶å‡çº§ï¼‰å˜å¾—é«˜åº¦å¯é¢„æµ‹ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spec:</span>
Â  Â  Â  <span class="hljs-attr">roles:</span>
Â  Â  Â  Â  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">prefill</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">podGroupSize:</span> <span class="hljs-number">2</span>Â <span class="hljs-comment"># introduce new field to indicate the pod group size. for example DP or TP case.</span>
Â  Â  Â  Â  Â  <span class="hljs-string">stateful:</span>Â <span class="hljs-literal">true</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">recoveryPolicy:</span> <span class="hljs-string">ReplaceUnhealthy</span>Â <span class="hljs-comment"># ReplaceUnhealthy or Recreate</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">template:</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-string">...</span>
</code></pre>
<p>è·¯ç”±å±‚ç°å·²å‡çº§è‡³æ”¯æŒè¿™äº›ç¼–æ’åŸè¯­ã€‚åœ¨å‰¯æœ¬æ¨¡å¼å’Œæ± åŒ–æ¨¡å¼ä¸‹ï¼ŒAIBrix ä¼šä¼˜å…ˆé€‰æ‹©åŒä¸€ RoleSet/PodSet ä¸­çš„é¢„å¡«å……ä¸è§£ç èŠ‚ç‚¹è¿›è¡Œé…å¯¹ï¼Œé€šè¿‡è´Ÿè½½æ„ŸçŸ¥è¯„åˆ†æœºåˆ¶é€‰å–æœ€ç©ºé—²çš„å€™é€‰èŠ‚ç‚¹ï¼Œå¹¶å°†åŸºäº Nixl çš„ P/D åˆ†ç¦»æ¶æ„ä¸æ­£ç¡®çš„ kv_transfer_params å‚æ•°å¯¹é½ï¼Œç¡®ä¿æµé‡èƒ½å¤ŸæŠµè¾¾å…·å¤‡æ­£ç¡® KVCache çŠ¶æ€çš„ç›®æ ‡ç¾¤ç»„ã€‚æ–°å¢çš„é˜²æŠ¤æœºåˆ¶å¯ä¿è¯è·¯ç”±é€»è¾‘éµå¾ª HttpRoute çŠ¶æ€ä¸æ•…éšœæ¡ä»¶ï¼Œå¼¥è¡¥äº†æ—©æœŸç‰ˆæœ¬ä¸­å­˜åœ¨çš„æ­£ç¡®æ€§ç¼ºé™·ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸º StormService æ–°å¢äº†è§’è‰²çº§è‡ªåŠ¨æ‰©ç¼©å®¹åŠŸèƒ½ï¼Œä½¿é¢„å¡«å……ä¸è§£ç è§’è‰²èƒ½æ ¹æ®å„è‡ªæŒ‡æ ‡ç‹¬ç«‹ä¼¸ç¼©ã€‚é€šè¿‡ PodAutoscaler ä¸­æ–°å¼•å…¥çš„ subTargetSelector é€‰æ‹©å™¨ï¼Œè¿ç»´äººå‘˜å¯ä¸ºä¸åŒè§’è‰²æˆ–èµ„æºæ± é…ç½®ç‹¬ç«‹çš„è‡ªåŠ¨æ‰©ç¼©å®¹ç­–ç•¥ï¼ˆä¾‹å¦‚å¯¹é¢„å¡«å……è§’è‰²é‡‡ç”¨æ¿€è¿›çš„æ‰©ç¼©å®¹ç­–ç•¥ï¼Œå¯¹è§£ç è§’è‰²åˆ™é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼‰ï¼Œè¿™å¯¹ P/D åˆ†ç¦»å½¢æ€ä¸‹çš„æ± åŒ–åœºæ™¯ä¸å¼‚æ„åœºæ™¯è‡³å…³é‡è¦ã€‚è¿™äº›æ”¹è¿›ä½¿å¾— P/D åˆ†ç¦»æ¶æ„ä¸ä»…èƒ½å®ç°ï¼Œæ›´èƒ½åœ¨è§„æ¨¡åŒ–åœºæ™¯ä¸­ä¿æŒè¿ç»´æ•´æ´æ€§ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># PodAutoscaler for prefill role</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">autoscaling.aibrix.ai/v1alpha1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PodAutoscaler</span>
<span class="hljs-attr">metadata:</span>
Â  <span class="hljs-attr">name:</span> <span class="hljs-string">ss-pool-prefill</span>
Â  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span>
Â  <span class="hljs-attr">annotations:</span>
Â  Â  <span class="hljs-string">autoscaling.aibrix.ai/storm-service-mode:</span>Â <span class="hljs-string">"pool"</span>
<span class="hljs-attr">spec:</span>
Â  <span class="hljs-attr">scaleTargetRef:</span>
Â  Â  <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">orchestration.aibrix.ai/v1alpha1</span>
Â  Â  <span class="hljs-attr">kind:</span> <span class="hljs-string">StormService</span>
Â  Â  <span class="hljs-attr">name:</span> <span class="hljs-string">ss-pool</span>

<span class="hljs-comment"># new Added: Select the prefill role within the StormService</span>
Â  <span class="hljs-attr">subTargetSelector:</span>
Â  Â  <span class="hljs-attr">roleName:</span> <span class="hljs-string">prefill</span>
</code></pre>
<p>å®Œæ•´ç¤ºä¾‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvllm-project%2Faibrix%2Fblob%2Fmain%2Fsamples%2Fautoscaling%2Fstormservice-pool.yaml" target="_blank" title="https://github.com/vllm-project/aibrix/blob/main/samples/autoscaling/stormservice-pool.yaml" ref="nofollow noopener noreferrer">github.com/vllm-projecâ€¦</a></p>
<hr/>
<h2 data-id="heading-3">å…¶ä»–æ”¹è¿›</h2>
<p>v0.5.0 ç‰ˆæœ¬è¿˜å¼ºåŒ–äº†è¿è¡Œæ—¶å±‚ï¼Œä½¿è¿ç»´äººå‘˜èƒ½å¤Ÿåœ¨æ‰€æœ‰å¼•æ“ä¸Šè·å¾—æ›´æ¸…æ™°ä¸€è‡´çš„æ§åˆ¶è·¯å¾„ã€‚å…ƒæ•°æ®æœåŠ¡å™¨å·²å®Œæˆä» Go åˆ° Python çš„é‡æ„ï¼Œå¹¶é›†æˆå¥åº·ä¸å­˜æ´»æ¢æŸ¥ï¼Œé•œåƒä½“ç§¯æ˜¾è‘—ç¼©å‡ï¼›ä¸‹è½½å™¨ç°èƒ½æ›´ç¨³å¥åœ°å¤„ç†é€’å½’å¼å¯¹è±¡å­˜å‚¨å¸ƒå±€ï¼Œä½¿å¾—å®é™…ä½¿ç”¨ä¸­çš„æ¨¡å‹ä¸åˆ¶å“ç®¡ç†æ ‡å‡†åŒ–å˜å¾—æ›´ä¸ºå®¹æ˜“ã€‚é€šè¿‡ Webhook ä¸è½»é‡çº§å°è£…åº“ï¼ŒAIBrixRuntime è¾¹è½¦å®¹å™¨å¯è‡ªåŠ¨æ³¨å…¥åˆ° Deployment å’Œ StormService å·¥ä½œè´Ÿè½½ä¸­ï¼Œå®ç°äº†æŒ‡æ ‡æ”¶é›†ã€ä¸‹è½½ç®¡ç†ä¸è¿ç»´æ“ä½œçš„ç»Ÿä¸€ï¼Œæ— éœ€å†ä¸ºæ¯ä¸ªæ¨ç†å¼•æ“ç¼–å†™å®šåˆ¶åŒ–ä»£ç ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¼ºåŒ–äº†é¢å‘å¤šç§Ÿæˆ·åœºæ™¯çš„ LoRA ä¸æ¨¡å‹é€‚é…å™¨çš„å·¥ä½œæµã€‚AIBrix ç°æ”¯æŒå°†é€‚é…å™¨ä¼¸ç¼©è‡³é¢„æœŸå‰¯æœ¬æ•°ï¼Œé‡æ„äº†é€‚é…å™¨å‰¯æœ¬è·Ÿè¸ªæœºåˆ¶ï¼Œæ–°å¢ç±»å‹åŒ–å°è£…ä»¥é™ä½é›†æˆéš¾åº¦ï¼Œå¹¶å…è®¸é€šè¿‡è¿è¡Œæ—¶ç›´æ¥æ‹‰å– LoRA åˆ¶å“ã€‚è¿™äº›æ”¹è¿›å…±åŒä½¿å¾—åœ¨å•ä¸ªåŸºç¡€æ¨¡å‹ä¸Šè·¨å¤šå¼•æ“ã€å¤šé›†ç¾¤è¿è¡Œå¤§é‡ LoRA ç»„ä»¶çš„å®è·µæ›´å¥å£®ï¼Œæ›´æ˜“äºå®ç°è‡ªåŠ¨åŒ–ã€‚</p>
<p>è‡ªåŠ¨æ‰©ç¼©å®¹ç»„ä»¶ä¹Ÿè¿›è¡Œäº†æ˜¾è‘—çš„åŠ å¼ºã€‚v0.5.0 ç‰ˆæœ¬é€šè¿‡å¯é‡è¯•çš„ RestMetricsFetcherã€å…±äº«å®¢æˆ·ç«¯/èšåˆå™¨ä»¥åŠé…ç½®æ›´æ–°ä¸­çš„ç«æ€æ¡ä»¶ä¿®å¤ï¼Œç»Ÿä¸€äº†æŒ‡æ ‡é‡‡é›†æµç¨‹ï¼Œè®©æ‰©ç¼©å®¹å†³ç­–æ—¢æ›´å¿«é€Ÿåˆæ›´å¯é ã€‚æˆ‘ä»¬ä¼˜åŒ–äº† KPA é»˜è®¤å‚æ•°ï¼Œå¢åŠ æŒ‡æ ‡æ ‡ç­¾é€‰æ‹©å™¨æ”¯æŒï¼Œä»…åœ¨å‰¯æœ¬æ•°å®é™…å˜æ›´æ—¶è§¦å‘äº‹ä»¶ï¼Œå¹¶å°†æ‰©ç¼©å®¹å†å²ç›´æ¥æš´éœ²äº PodAutoscaler çŠ¶æ€ä¸­ã€‚è¿™äº›æ”¹è¿›ä½¿è‡ªåŠ¨æ‰©ç¼©å®¹ä»ä¸€ä¸ªé»‘ç›’ç»„ä»¶è½¬å˜ä¸ºå¯è§‚æµ‹ã€å¯è°ƒè¯•ã€ç­–ç•¥é©±åŠ¨çš„ç³»ç»Ÿæ¨¡å—ã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼Œè¿™äº›åœ¨è¿è¡Œæ—¶ã€LoRAã€è‡ªåŠ¨æ³¨å…¥ä¸è‡ªåŠ¨æ‰©ç¼©å®¹æ–¹é¢çš„å¢å¼ºï¼Œå…±åŒæ¨åŠ¨ AIBrix å‘å¼€ç®±å³ç”¨æ§åˆ¶é¢çš„ç›®æ ‡è¿ˆè¿›ã€‚</p>
<p>å¦‚éœ€æŸ¥çœ‹å®Œæ•´å˜æ›´åˆ—è¡¨ã€æäº¤å†å²ä¸è´¡çŒ®è€…è¯¦æƒ…ï¼Œè¯·å‚é˜… AIBrix v0.5.0 ç‰ˆæœ¬å‘å¸ƒè¯´æ˜ã€‚</p>
<h2 data-id="heading-4">è´¡çŒ®è€…ä¸ç¤¾åŒº</h2>
<p>v0.5.0 ç‰ˆæœ¬å…±åŒ…å« 39 é¡¹è´¡çŒ®ï¼Œå…¶ä¸­ 21 é¡¹æ¥è‡ªé¦–æ¬¡è´¡çŒ®è€… ğŸ’«ã€‚è¡·å¿ƒæ„Ÿè°¢æ‰€æœ‰é€šè¿‡ä»£ç æäº¤ã€é—®é¢˜åé¦ˆã€ä»£ç å®¡æŸ¥å’Œå»ºè®®å‚ä¸æ¨åŠ¨æ­¤ç‰ˆæœ¬è¿›å±•çš„æ¯ä¸€ä½å‚ä¸è€…ã€‚</p>
<p>ç‰¹åˆ«å‘æˆ‘ä»¬çš„æ–°è´¡çŒ®è€…è‡´æ•¬ï¼š</p>
<p>@JonathonShea, @bigerous, @jiangxiaobin96, @mayooot, @zyfy29, @zhengkezhou1, @tianzhiqiang3, @atakli, @jwjwjw3, @lx1036, @chethanuk, @baozixiaoxixi, @TylerGillson, @omrishiv, @lex1ng, @ChenTaoyu-SJTU, @zhenyu-02, @yapple, @xvoron, @freedown19, @Leafykn ğŸ™Œ</p>
<p>ä½ ä»¬çš„è´¡çŒ®è®© AIBrix æ›´åŠ ç¨³å¥ã€æ›´å…·å¤‡ç”Ÿäº§ç¯å¢ƒå¯ç”¨æ€§ï¼Œä¹Ÿè®©æˆ‘ä»¬çš„å¼€æºç¤¾åŒºæ›´åŠ å¼€æ”¾åŒ…å®¹ã€‚æœŸå¾…å¤§å®¶æŒç»­å‚ä¸ï¼</p>
<h2 data-id="heading-5">æœªæ¥è§„åˆ’</h2>
<p>æˆ‘ä»¬æ­£æŒç»­æ¨åŠ¨ AIBrix æ„å»ºä¸ºé¢å‘ç°ä»£ LLM å·¥ä½œè´Ÿè½½çš„å…¨ç”Ÿäº§çº§äº‘åŸç”ŸæŠ€æœ¯æ ˆã€‚åœ¨ v0.6.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°†èšç„¦ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ–¹å‘ï¼šç”Ÿäº§çº§ LoRA ä¸æ— æœåŠ¡å™¨ LLM æœåŠ¡ã€ä»¥ KVCache ä¸ºæ ¸å¿ƒçš„ P/D åˆ†ç¦»ä¸å¸è½½å·¥ä½œæµã€å®¹é”™æ€§ä¸ç¨³å®šæ€§æ¢ç´¢ï¼Œä»¥åŠç”Ÿæ€é›†æˆâ€”â€”åŒ…æ‹¬ vLLM è¯­ä¹‰è·¯ç”±ä¸ Envoy AI ç½‘å…³ç­‰æ•…æ„æ’é™¤åœ¨ AIBrix æ ¸å¿ƒä½†ä¿æŒæŠ€æœ¯æ ˆå¯ç»„åˆæ€§çš„åŠŸèƒ½é¢†åŸŸã€‚</p>
<p>å¦‚æœæ‚¨æ­£åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œ LLMï¼Œæˆ–æ­£åœ¨æ¢ç´¢æ— æœåŠ¡å™¨æ¶æ„ã€KVCacheã€P/D åˆ†ç¦»ç­‰æ–°æ¶æ„æ–¹å‘ï¼Œæˆ‘ä»¬è¯šæŒšæœŸå¾…æ‚¨å°± v0.6.0 æŠ€æœ¯è·¯çº¿å›¾æå‡ºåé¦ˆå¹¶å‚ä¸åä½œâ€”â€”æ¬¢è¿åœ¨ GitHub åŠ å…¥è®¨è®ºï¼Œå…±åŒè´¡çŒ®åŠ›é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºèƒ½ä½“&ç¼–ç¨‹æ–°ç‹Claude Opus 4.5éœ‡æ’¼ç™»åœºï¼Œå®šä»·å¤§é™2/3]]></title>    <link>https://juejin.cn/post/7576228981230600219</link>    <guid>https://juejin.cn/post/7576228981230600219</guid>    <pubDate>2025-11-25T03:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576228981230600219" data-draft-id="7576218673049010227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºèƒ½ä½“&amp;ç¼–ç¨‹æ–°ç‹Claude Opus 4.5éœ‡æ’¼ç™»åœºï¼Œå®šä»·å¤§é™2/3"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-25T03:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºèƒ½ä½“&amp;ç¼–ç¨‹æ–°ç‹Claude Opus 4.5éœ‡æ’¼ç™»åœºï¼Œå®šä»·å¤§é™2/3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:38:55.000Z" title="Tue Nov 25 2025 03:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æ˜¨æ—¥é¢„æœŸä¸€æ ·ï¼ŒAnthropic æ­£å¼å‘å¸ƒäº†æœ€æ–°æ¨¡å‹ Claude Opus 4.5ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2435955875894980aa313a70c241034f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=PvkldMZS9F36cIigFdhu6vZtXEM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ®ä»‹ç»ï¼ŒClaude Opus 4.5 éå¸¸æ™ºèƒ½é«˜æ•ˆï¼Œåœ¨ç¼–ç¨‹ã€æ™ºèƒ½ä½“ä»¥åŠè®¡ç®—æœºæ“ä½œæ–¹é¢è¡¨ç°å“è¶Šï¼Œæ˜¯å½“ä»Šä¸–ç•Œæœ€ä¼˜ç§€çš„æ¨¡å‹ã€‚è¯¥æ¨¡å‹åœ¨æ·±åº¦ç ”ç©¶ã€å¤„ç†å¹»ç¯ç‰‡ä¸ç”µå­è¡¨æ ¼ç­‰æ—¥å¸¸ä»»åŠ¡ä¸Šä¹Ÿæœ‰æ˜¾è‘—æå‡ã€‚</p>
<p>è¯¥æ¨¡å‹æ ‡å¿—ç€ AI ç³»ç»ŸåŒ–èƒ½åŠ›çš„è¿›ä¸€æ­¥è·ƒå‡ï¼Œä¹Ÿé¢„ç¤ºç€æœªæ¥å·¥ä½œæ–¹å¼å³å°†è¿æ¥æ›´æ·±åˆ»çš„å˜é©ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒClaude Opus 4.5 åœ¨çœŸå®ä¸–ç•Œè½¯ä»¶å·¥ç¨‹æµ‹è¯•ä¸­è¾¾åˆ°äº†è¡Œä¸š SOTA æ°´å¹³ï¼Œè¶…è¶Šäº† GPT-5.1-Codex-Maxã€Gemini 3 Pro ä»¥åŠè‡ªå®¶ Sonnet 4.5ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49419847433341d0bdf9648fba771949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=9ZMYCyvPohX3sZS5JXwafcJilig%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‡ªä»Šæ—¥èµ·ï¼ŒClaude Opus 4.5 å³å¯ä»¥é€šè¿‡ Claude appã€API ä»¥åŠä¸‰å¤§ä¸»æµäº‘å¹³å°è®¿é—®ã€‚å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œåªéœ€é€šè¿‡ Claude API ä½¿ç”¨ claude-opus-4-5-20251101 å³å¯ã€‚</p>
<p>å…³äºä»·æ ¼ï¼ŒClaude Opus 4.5 çš„æœ€æ–°å®šä»·ä¸ºæ¯ç™¾ä¸‡ Token 5/25 ç¾å…ƒï¼ˆè¾“å…¥ / è¾“å‡ºï¼‰ï¼Œä½¿æ›´å¤šç”¨æˆ·ã€å›¢é˜Ÿå’Œä¼ä¸šéƒ½èƒ½è½»æ¾è·å¾— Opus çº§åˆ«çš„èƒ½åŠ›ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸ä¸Šä»£ Opus 4.1 ç›¸æ¯”ï¼ŒAPI å®šä»·é™ä½äº† 2/3ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1a5c7b40795453e9d17615c69f0e4be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=8a%2FcE2Jk6pYG1E41JjIkak9LTRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ Claude Opus 4.5 åŒæ­¥ï¼ŒAnthropic è¿˜æ›´æ–°äº† Claude å¼€å‘è€…å¹³å°ã€Claude Code ä»¥åŠæ¶ˆè´¹è€…åº”ç”¨ï¼Œæ¨å‡ºäº†é€‚ç”¨äºæ›´é•¿æ—¶é•¿è¿è¡Œçš„æ™ºèƒ½ä½“æ–°å·¥å…·ã€‚å…¶ä¸­ï¼Œåœ¨ Claude app ä¸­ï¼Œé•¿å¯¹è¯ä¸å†ä¼šè½»æ˜“é‡åˆ°é™åˆ¶ã€‚</p>
<p>Claude Code ç°å·²ç™»é™†æ¡Œé¢åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥å¹¶è¡Œè¿è¡Œå¤šä¸ªä¼šè¯ï¼Œæ¯”å¦‚ç¼–ç¨‹ã€ç ”ç©¶å’Œæ›´æ–°å·¥ä½œã€‚éšç€ Claude Opus 4.5 çš„æ¨å‡ºï¼ŒPlan Mode ä¹Ÿè·å¾—äº†å‡çº§ï¼šä¸€å¼€å§‹æå‡ºæ¾„æ¸…æ€§é—®é¢˜ï¼Œéšåå³å¯è‡ªä¸»å¼€å±•å·¥ä½œã€‚</p>
<p>Anthropic æä¾›äº†åœ¨ Excelã€Chrome å’Œæ¡Œé¢ç«¯ä½¿ç”¨ Claude çš„å…¨æ–°æ–¹å¼ã€‚Maxã€Team å’Œ Enterprise ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨ Excel ä¸­ä½¿ç”¨æœ€æ–°æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44a8983fb03d40d3aae82a642c9289f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=OT4Jo%2B5srq2DRQ3IJwBNkxi50P4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŸºå‡†æµ‹è¯•å¤šé¡¹æœ€æ–° SOTA</p>
<p>æ ¹æ® Anthropic çš„ä»‹ç»ï¼Œä»–ä»¬æä¾›äº†ä¸€ä»½ä¼—æ‰€å‘¨çŸ¥æå…¶å›°éš¾çš„å±…å®¶æµ‹è¯•ï¼ˆtake-home examï¼‰ï¼ŒåŒæ—¶ä¹Ÿå°†è¿™ä»½æµ‹è¯•ç”¨ä½œæ–°æ¨¡å‹çš„å†…éƒ¨åŸºå‡†è¯„ä¼°ã€‚åœ¨è§„å®šçš„ä¸¤å°æ—¶é™æ—¶å†…ï¼ŒClaude Opus 4.5 çš„å¾—åˆ†è¶…è¿‡äº†è¿„ä»Šä¸ºæ­¢æ‰€æœ‰å‚åŠ è¿‡è¯¥æµ‹è¯•çš„äººç±»å€™é€‰äººã€‚</p>
<p>è¿™ä»½å±…å®¶æµ‹è¯•æ—¨åœ¨è¯„ä¼°å€™é€‰äººï¼ˆåŒ…æ‹¬ AI å¤§æ¨¡å‹ï¼‰åœ¨æ—¶é—´å‹åŠ›ä¸‹çš„æŠ€æœ¯èƒ½åŠ›ä¸åˆ¤æ–­åŠ›ï¼Œä½†å¹¶ä¸è¡¡é‡å¦‚åä½œã€æ²Ÿé€šï¼Œæˆ–å¤šå¹´ç»éªŒä¸­ç§¯ç´¯çš„èŒä¸šç›´è§‰ç­‰å…¶ä»–å…³é”®æŠ€èƒ½ã€‚ç„¶è€Œï¼Œè¿™ä¸€ç»“æœ â€”â€” å³ AI æ¨¡å‹åœ¨é‡è¦æŠ€æœ¯èƒ½åŠ›ä¸Šè¶…è¶Šå®åŠ›å¼ºåŠ²çš„å€™é€‰äºº â€”â€” å¼•å‘äº†å…³äºäººå·¥æ™ºèƒ½å°†å¦‚ä½•æ”¹å˜å·¥ç¨‹èŒä¸šçš„æ€è€ƒã€‚</p>
<p>è½¯ä»¶å·¥ç¨‹å¹¶ä¸æ˜¯ Claude Opus 4.5 å”¯ä¸€å–å¾—æ˜¾è‘—æå‡çš„é¢†åŸŸã€‚è¿™ä¸€ä»£æ¨¡å‹åœ¨æ•´ä½“èƒ½åŠ›ä¸Šå…¨çº¿å¢å¼ºï¼Œåœ¨è§†è§‰ã€æ¨ç†å’Œæ•°å­¦æ–¹é¢å‡ä¼˜äºå‰ä»£æ¨¡å‹ï¼Œå¹¶åœ¨è®¸å¤šé¢†åŸŸè¾¾åˆ°äº†å½“å‰ SOTA æ°´å¹³ï¼ŒåŒ…æ‹¬æ™ºèƒ½ä½“ç¼–ç¨‹ã€æ™ºèƒ½ä½“ç»ˆç«¯ç¼–ç¨‹ã€æ™ºèƒ½ä½“å·¥å…·ä½¿ç”¨ã€å¯æ‰©å±•çš„å·¥å…·ä½¿ç”¨ã€è®¡ç®—æœºæ“ä½œã€è§£å†³æ–°å‹é—®é¢˜çš„èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80aeb23e73ed4251906d63f1198b2061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=bMzoVJOIhtMitGHJ%2FGyiH8Bq1KQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Opus 4.5 å…·å¤‡æ›´å‡ºè‰²çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ï¼Œåœ¨ SWE-bench Multilingual åŸºå‡†ä¸­ï¼Œåœ¨ 8 ç§ç¼–ç¨‹è¯­è¨€ä¸­çš„ 7 ç§ä¸Šè¡¨ç°é¢†å…ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d061249145be419889897fe3da122ec6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=mvpWM2T55degMFOh3iC%2FXvnPMkk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Opus 4.5 èƒ½å¤Ÿè½»æ¾è§£å†³é«˜éš¾åº¦çš„ç¼–ç é—®é¢˜ï¼Œå¹¶åœ¨ Aider Polyglot åŸºå‡†ä¸Šç›¸æ¯” Sonnet 4.5 å®ç°äº† 10.6% çš„æå‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5baeeb4fac564b37841aacf1a03d749a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=Ss2pnBZmstaWcxj8DahBIFCo%2Bbw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Opus 4.5 åœ¨å‰æ²¿çš„æ™ºèƒ½ä½“æœç´¢èƒ½åŠ›ä¸Šå–å¾—äº†æ˜¾è‘—è¿›æ­¥ï¼Œåœ¨ BrowseComp-Plus åŸºå‡†ä¸Šæœ‰æ˜æ˜¾æå‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6317b7269a148de90efc4ba5734e424~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=t7Y1t%2BqVzBiLEGU5ef34AFkIsRg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ—¶ï¼ŒClaude Opus 4.5 åœ¨é•¿ç¨‹ä»»åŠ¡ä¸Šçš„ç¨³å®šæ€§ä¹Ÿæ›´å¼ºï¼Œåœ¨ Vending-Bench åŸºå‡†ä¸­ç›¸è¾ƒäº Sonnet 4.5 å®ç°äº† 29% çš„æå‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13d195045cef435bba0c7f17d816ae5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=%2FoFiYOXffwlpbFgqxBasosemzkI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Anthropic è¡¨ç¤ºï¼ŒClaude Opus 4.5 çš„èƒ½åŠ›å·²ç»åœ¨æŸäº›æµ‹è¯•é¡¹ç›®ä¸Šè¶…å‡ºäº†ç°æœ‰åŸºå‡†çš„è¡¡é‡èŒƒå›´ã€‚ä¸€ä¸ªå¸¸ç”¨çš„æ™ºèƒ½ä½“èƒ½åŠ›åŸºå‡†æ˜¯ Ï„^2-benchï¼Œå®ƒç”¨äºè¯„ä¼°æ™ºèƒ½ä½“åœ¨çœŸå®åœºæ™¯ã€å¤šè½®ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/836a8a437e54459a810dcc3803b45da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=bfDWo69nGuIfOjUZihLA%2F1O1qFI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsierra-research%2Ftau2-bench" target="_blank" title="https://github.com/sierra-research/tau2-bench" ref="nofollow noopener noreferrer">github.com/sierra-reseâ€¦</a></p>
<p>åœ¨å…¶ä¸­ä¸€ä¸ªæƒ…å¢ƒä¸­ï¼Œæ¨¡å‹éœ€è¦æ‰®æ¼”èˆªç©ºå…¬å¸å®¢æœä»£ç†ï¼Œå¸®åŠ©ä¸€ä½å¤„äºå›°å¢ƒçš„æ—…å®¢ã€‚æ ¹æ®åŸºå‡†è®¾å®šï¼Œç”±äºèˆªç©ºå…¬å¸ä¸å…è®¸æ›´æ”¹åŸºç¡€ç»æµèˆ±çš„æœºç¥¨ï¼Œæ¨¡å‹åº”å½“æ‹’ç»æ—…å®¢çš„æ”¹ç­¾è¯·æ±‚ã€‚ç„¶è€Œï¼ŒClaudeÂ Opus 4.5 æ‰¾åˆ°äº†ä¸€ä¸ªå¯Œæœ‰æ´å¯ŸåŠ›ä¸”åˆæ³•çš„è§£å†³æ–¹å¼ï¼šå…ˆå‡çº§èˆ±ä½ï¼Œå†å¯¹èˆªç­è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acec9804bf7c427588303b17f033e90d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=gRo2vTbOyKJlj09n%2FTBVRDKVdFs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œç”±äº Claude çš„è§£å†³æ–¹å¼ä¸åœ¨åŸºå‡†é¢„è®¾èŒƒå›´å†…ï¼Œè¿™ä¸€è¡¨ç°è¢«ç³»ç»Ÿåˆ¤å®šä¸ºå¤±è´¥ã€‚ä½†è¿™ç§å…·æœ‰åˆ›é€ æ€§çš„è§£å†³é—®é¢˜æ–¹å¼ï¼Œæ­£æ˜¯ Anthropic ä»æµ‹è¯•è€…å’Œå®¢æˆ·é‚£é‡Œé¢‘ç¹å¬åˆ°çš„åé¦ˆï¼Œä¹Ÿæ˜¯è®© Claude Opus 4.5 è¢«è®¤ä¸ºæ˜¯ä¸€æ¬¡æœ‰æ„ä¹‰è·ƒå‡çš„å…³é”®ç‰¹è´¨ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨å…¶ä»–æƒ…å¢ƒä¸­ï¼Œç»•å¼€é¢„æœŸçº¦æŸçš„å·§å¦™åšæ³•ä¹Ÿå¯èƒ½è¢«è§†ä¸ºä¸€ç§ã€Œå¥–åŠ±è§„é¿ã€ï¼ˆreward hackingï¼‰ï¼Œå³æ¨¡å‹ä»¥éé¢„æœŸæ–¹å¼ã€Œé’»è§„åˆ™ç©ºå­ã€ã€‚</p>
<p>Claude å¼€å‘è€…å¹³å°æ–°å˜åŒ–</p>
<p>éšç€æ¨¡å‹å˜å¾—æ›´æ™ºèƒ½ï¼Œå®ƒä»¬èƒ½å¤Ÿç”¨æ›´å°‘çš„æ­¥éª¤è§£å†³é—®é¢˜ï¼šæ›´å°‘çš„å›æº¯ã€æ›´å°‘çš„é‡å¤æ¢ç´¢ã€æ›´ç®€æ´çš„æ¨ç†ã€‚ä¸ºè¾¾åˆ°ç›¸åŒæˆ–æ›´å¥½çš„ç»“æœï¼ŒClaude Opus 4.5 ä½¿ç”¨çš„ token æ•°é‡ç›¸æ¯”å‰ä»£å¤§å¹…å‡å°‘ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸åŒä»»åŠ¡éœ€è¦åœ¨é€Ÿåº¦ã€æˆæœ¬å’Œèƒ½åŠ›ä¹‹é—´åšå‡ºä¸åŒå–èˆã€‚æœ‰æ—¶å¼€å‘è€…å¸Œæœ›æ¨¡å‹æŒç»­æ·±æ€æŸä¸ªé—®é¢˜ï¼Œæœ‰æ—¶åˆ™å¸Œæœ›æ¨¡å‹æ›´åŠ è½»é‡è¿…æ·ã€‚é€šè¿‡ Anthropic åœ¨ Claude API ä¸­æ–°å¢çš„ effort å‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥è‡ªè¡Œå†³å®šæ˜¯è¦æœ€å°åŒ–æ—¶é—´ä¸æˆæœ¬ï¼Œè¿˜æ˜¯è¦æœ€å¤§åŒ–æ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>åœ¨ä¸­ç­‰ effort è®¾å®šä¸‹ï¼ŒOpus 4.5 èƒ½è¾¾åˆ°ä¸ Sonnet 4.5 åœ¨ SWE-bench Verified ä¸­ç›¸åŒçš„æœ€ä½³æˆç»©ï¼Œä½†è¾“å‡º token ä½¿ç”¨é‡å‡å°‘äº† 76%ã€‚åœ¨æœ€é«˜ effort è®¾å®šä¸‹ï¼ŒOpus 4.5 çš„è¡¨ç°æ¯” Sonnet 4.5 é«˜å‡º 4.3 ä¸ªç™¾åˆ†ç‚¹ï¼ŒåŒæ—¶è¾“å‡º token ä½¿ç”¨é‡ä»å‡å°‘äº† 48%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82d32892d94c4674ac0aa01b81c983b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=NUQuusqDC%2B%2BhTdl2vuKeZLmUmU8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡Â effort æ§åˆ¶ã€ä¸Šä¸‹æ–‡å‹ç¼©ä»¥åŠæ›´å…ˆè¿›çš„å·¥å…·ä½¿ç”¨èƒ½åŠ›ï¼ŒClaude Opus 4.5 èƒ½è¿è¡Œæ›´é•¿æ—¶é—´ã€å®Œæˆæ›´å¤šä»»åŠ¡ï¼Œå¹¶ä¸”éœ€è¦æ›´å°‘çš„äººä¸ºå¹²é¢„ã€‚</p>
<p>ä¸Šä¸‹æ–‡ç®¡ç†ä¸è®°å¿†èƒ½åŠ›èƒ½å¤Ÿæ˜¾è‘—æå‡æ¨¡å‹åœ¨æ™ºèƒ½ä½“ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚Claude Opus 4.5 åŒæ ·éå¸¸æ“…é•¿ç®¡ç†ç”±å¤šä¸ªå­æ™ºèƒ½ä½“ç»„æˆçš„å›¢é˜Ÿï¼Œä»è€Œæ”¯æŒæ„å»ºå¤æ‚ä¸”åè°ƒè‰¯å¥½çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚åœ¨æµ‹è¯•ä¸­ï¼Œé€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›æŠ€æœ¯ï¼ŒOpus 4.5 åœ¨ä¸€é¡¹æ·±åº¦ç ”ç©¶è¯„ä¼°ä¸­çš„è¡¨ç°æå‡äº†è¿‘ 15 ä¸ªç™¾åˆ†ç‚¹ã€‚</p>
<p>Anthropic ä¹Ÿåœ¨é€æ­¥å¢å¼ºå¼€å‘è€…å¹³å°çš„å¯ç»„åˆæ€§ã€‚ç›®æ ‡æ˜¯ä¸ºå¼€å‘è€…æä¾›æ‰€éœ€çš„å„ç§æ„å»ºæ¨¡å—ï¼Œä»è€Œå¯ä»¥å®Œå…¨æŒæ§æ•ˆç‡ã€å·¥å…·ä½¿ç”¨æ–¹å¼ä»¥åŠä¸Šä¸‹æ–‡ç®¡ç†ï¼Œç²¾å‡†æ„å»ºæ‰€éœ€çš„ç³»ç»Ÿã€‚</p>
<p>å®‰å…¨æ€§è¿›ä¸€æ­¥æå‡</p>
<p>Anthropic è¡¨ç¤ºï¼ŒClaude Opus 4.5 æ˜¯å…¶è¿„ä»Šå‘å¸ƒçš„åœ¨å¯¹é½æ–¹é¢æœ€ä¸ºç¨³å¥çš„æ¨¡å‹ï¼Œä¹Ÿå¯èƒ½æ˜¯ç›®å‰å„å®¶å‰æ²¿æ¨¡å‹ä¸­å¯¹é½åº¦æœ€é«˜çš„ä¹‹ä¸€ã€‚è¯¥æ¨¡å‹å»¶ç»­äº† Anthropic åœ¨æ‰“é€ æ›´å®‰å…¨ã€æ›´å¯é æ¨¡å‹æ–¹é¢çš„è¶‹åŠ¿ï¼š</p>
<p>åœ¨ Anthropic çš„è¯„ä¼°ä¸­ï¼Œã€Œä»¤äººæ‹…å¿§çš„è¡Œä¸ºã€åˆ†æ•°è¡¡é‡äº†èŒƒå›´éå¸¸å¹¿æ³›çš„éå¯¹é½è¡¨ç°ï¼Œå…¶ä¸­æ—¢åŒ…æ‹¬æ¨¡å‹é…åˆäººç±»è¿›è¡Œä¸å½“ä½¿ç”¨ï¼Œä¹ŸåŒ…æ‹¬æ¨¡å‹åœ¨è‡ªèº«ä¸»åŠ¨æ€§ä¸‹åšå‡ºçš„ä¸è‰¯è¡Œä¸ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53451fa0bb334af0b7066e12b78114cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=VZ5BXgrPjrQMEY190W%2FJ%2FVIe0WU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Opus 4.5 åœ¨æŠµå¾¡æç¤ºæ³¨å…¥æ”»å‡»æ–¹é¢å–å¾—äº†å®è´¨æ€§çš„è¿›å±•ï¼Œæç¤ºæ³¨å…¥ä¼šé€šè¿‡å¤¹å¸¦æ¬ºéª—æ€§æŒ‡ä»¤æ¥è¯¯å¯¼æ¨¡å‹åšå‡ºæœ‰å®³è¡Œä¸ºã€‚è€Œ Opus 4.5 åœ¨è¿™ç±»æ”»å‡»ä¸Šçš„ç¨³å¥æ€§æ˜¾è‘—å¢å¼ºï¼Œæ˜¯ç›®å‰è¡Œä¸šä¸­æœ€ä¸å®¹æ˜“è¢«æç¤ºæ³¨å…¥æ¬ºéª—çš„å‰æ²¿æ¨¡å‹ä¹‹ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7975d0afe25840c3b43a5a74375c0623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=oAZ%2B65XNN76LyoUX0SteFi2Eoik%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥åŸºå‡†ä»…åŒ…å«å¼ºåº¦æé«˜çš„æç¤ºæ³¨å…¥æ”»å‡»ï¼Œç”± Gray Swan å¼€å‘å¹¶è¿è¡Œã€‚</p>
<p>æ›´å¤šç»†èŠ‚ä¿¡æ¯è¯·å‚é˜…æ¨¡å‹ç³»ç»Ÿå¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36d2b0e90cac48c490f8480456c09298~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764646734&amp;x-signature=0Cszyv6MKcnDMnlU0R%2Fckbj8iis%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¨¡å‹ç³»ç»Ÿå¡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fassets.anthropic.com%2Fm%2F64823ba7485345a7%2FClaude-Opus-4-5-System-Card.pdf" target="_blank" title="https://assets.anthropic.com/m/64823ba7485345a7/Claude-Opus-4-5-System-Card.pdf" ref="nofollow noopener noreferrer">assets.anthropic.com/m/64823ba74â€¦</a></p>
<p>åšå®¢åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fclaude-opus-4-5" target="_blank" title="https://www.anthropic.com/news/claude-opus-4-5" ref="nofollow noopener noreferrer">www.anthropic.com/news/claudeâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠåœºæ™¯é¢˜ï¼šç™¾ä¸‡äººåŒæ—¶ç‚¹èµæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ€ä¹ˆå›ç­”]]></title>    <link>https://juejin.cn/post/7576273949186932778</link>    <guid>https://juejin.cn/post/7576273949186932778</guid>    <pubDate>2025-11-25T03:46:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576273949186932778" data-draft-id="7576273949186883626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠåœºæ™¯é¢˜ï¼šç™¾ä¸‡äººåŒæ—¶ç‚¹èµæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ€ä¹ˆå›ç­”"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-25T03:46:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯Œ"/> <meta itemprop="url" content="https://juejin.cn/user/993614241734270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠåœºæ™¯é¢˜ï¼šç™¾ä¸‡äººåŒæ—¶ç‚¹èµæ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ€ä¹ˆå›ç­”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614241734270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:46:07.000Z" title="Tue Nov 25 2025 03:46:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å‘ç°äº†å§ï¼Œç°åœ¨é¢è¯•å…«è‚¡æ–‡å¥½åƒé—®çš„å°‘äº†ï¼Œåå€’æ˜¯åœºæ™¯é¢˜å¤šäº†èµ·æ¥ï¼Œæ¯•ç«Ÿç°åœ¨AIå¦‚æ­¤å¼ºå¤§ï¼Œæ€»æªç€è¿™ç‚¹åº•å±‚åŸºç¡€ä¹Ÿæ²¡å¤šå¤§æ„æ€ã€‚</p>
<p>é¢è¯•å®˜å¼ å˜´é—­å˜´é«˜å¹¶å‘ã€å¤§æ•°æ®é‡å€’æ˜¯çœŸçš„ï¼Œåˆ«ç®¡å®é™…ä¸šåŠ¡æ˜¯ä¸æ˜¯é«˜å¹¶å‘ï¼Œä½†æ˜¯ä½ ä¸ä¼šæ˜¯è¿›ä¸æ¥æ‹§èºä¸çš„ã€‚</p>
<p>å°±åƒä¹‹å‰æœ‰åŒå­¦è¢«é—®ï¼šâ€œæŸéŸ³ç™¾ä¸‡ç”¨æˆ·åŒæ—¶ç»™ä¸€ä¸ªè§†é¢‘ç‚¹èµï¼Œè®©ä½ æ¥è¦æ€ä¹ˆè®¾è®¡ï¼Ÿâ€ï¼Œè¿™ç±»é¢˜è‚¯å®šè§è¿‡å§ã€‚</p>
<p>å’±ä»¬æ¥ç®€å•æ‹†è§£ä¸‹è¿™é¢˜ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå°å­¦ä¹ ï¼ŒçŸ¥è¯†é‡æœ‰é™ï¼Œä¸å–œå‹¿å–·ã€‚</p>
<h3 data-id="heading-0">è¿™é“é¢˜åˆ°åº•è€ƒå¯Ÿä»€ä¹ˆï¼Ÿ</h3>
<p>åˆ«ä¸Šæ¥å°±æƒ³ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œå…ˆæ˜ç¡®é¢è¯•å®˜çš„è€ƒå¯Ÿç‚¹ï¼Œæ‰èƒ½ç­”åˆ°ç‚¹å­ä¸Šï¼š</p>
<ol>
<li>
<p>é«˜å¹¶å‘å†™å…¥èƒ½åŠ›ï¼šç™¾ä¸‡äººåŒæ—¶æ“ä½œï¼Œç¬é—´ QPS èƒ½å†²åˆ°å‡ åä¸‡ï¼Œå¦‚ä½•é¿å…æ•°æ®åº“è¢«æ‰“å®ï¼Ÿè¿™æ˜¯è€ƒå¯Ÿä½ å¯¹æµé‡å‰Šå³°çš„ç†è§£ï¼›</p>
</li>
<li>
<p>æ•°æ®ä¸€è‡´æ€§ï¼šç”¨æˆ·ç‚¹èµåå¿…é¡»ç«‹åˆ»çœ‹åˆ° <strong>å·²èµ</strong> çŠ¶æ€ï¼Œç‚¹èµæ•°å¯ä»¥æœ‰è½»å¾®å»¶è¿Ÿï¼Œä½†ä¸èƒ½é”™ã€ä¸èƒ½ä¸¢ï¼Œè¿™æ˜¯å¯¹æœ€ç»ˆä¸€è‡´æ€§çš„è€ƒå¯Ÿï¼›</p>
</li>
<li>
<p>ç³»ç»Ÿå¯ç”¨æ€§ï¼šå°±ç®—åç«¯æœåŠ¡æ³¢åŠ¨ï¼Œç”¨æˆ·ç‚¹èµæ“ä½œä¹Ÿå¾—æˆåŠŸï¼Œä¸èƒ½å‡ºç°ç‚¹äº†æ²¡ååº”çš„æƒ…å†µï¼Œè€ƒå¯Ÿå®¹é”™å’Œé™çº§æ€è·¯ï¼›</p>
</li>
<li>
<p>èµ„æºä¼˜åŒ–ï¼šç™¾ä¸‡æ¬¡è¯·æ±‚ç›´æ¥æ€¼æ•°æ®åº“è‚¯å®šä¸è¡Œï¼Œå¦‚ä½•ç”¨ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ä¸­é—´ä»¶å‡è½»å‹åŠ›ï¼Œè€ƒå¯ŸæŠ€æœ¯é€‰å‹èƒ½åŠ›ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">æ¢ä½æ€è€ƒ</h3>
<p>å¾ˆå¤šäººä¸€ä¸Šæ¥å°±çº ç»“æ€ä¹ˆè®©ç™¾ä¸‡æ¬¡ç‚¹èµå®æ—¶å†™å…¥æ•°æ®åº“ï¼Œå…¶å®è·‘åäº†ã€‚</p>
<p>å’±ä»¬ç«™åœ¨ç”¨æˆ·è§’åº¦æƒ³ï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·ç‚¹å‡»ç‚¹èµåï¼Œæœ€å…³å¿ƒçš„æ˜¯<code>æœ‰æ²¡æœ‰ç‚¹èµæˆåŠŸ</code>ï¼Œè€Œä¸æ˜¯<code>å½“å‰èµæ•°åˆ°åº•æ˜¯ 10086 è¿˜æ˜¯ 10087</code>ï¼›</p>
</li>
<li>
<p>èµæ•°æ˜¯ç»™æ‰€æœ‰ç”¨æˆ·çœ‹çš„<code>å…¬å…±æ•°æ®</code>ï¼Œè½»å¾®å»¶è¿Ÿç”¨æˆ·å®Œå…¨æ„ŸçŸ¥ä¸åˆ°ï¼ˆå°±ç®—æ•°æ®ä¸¢äº†ï¼Œç”¨æˆ·ä¹Ÿå¾ˆéš¾å‘ç°ï¼Œåªæ˜¯ä¼šæƒ³â€œå’¦â€æˆ‘ä¹‹å‰ç‚¹èµè¿‡ä¸€ä¸ªè§†é¢‘æ²¡äº†ï¼Œå°±æ²¡ç„¶åäº†ï¼‰ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š<strong>æ“ä½œæˆåŠŸç‡ 99% + å®¢æˆ·ç«¯çŠ¶æ€å®æ—¶åé¦ˆ + èµæ•°æœ€ç»ˆå‡†ç¡®</strong>ã€‚</p>
</li>
</ul>
<p>æƒ³é€šè¿™ä¸€ç‚¹ï¼Œæ–¹æ¡ˆå°±æ¸…æ™°äº†ï¼šæŠŠå®æ—¶å†™å…¥æ•°æ®åº“çš„å‹åŠ›ï¼Œè½¬ç§»åˆ°ä¸­é—´ä»¶ä¸Šï¼Œç”¨å¼‚æ­¥ + ç¼“å­˜çš„æ€è·¯è§£å†³é«˜å¹¶å‘ã€‚</p>
<h3 data-id="heading-2">é€‰å–æ–¹æ¡ˆ</h3>
<p>å’±ä»¬ä¸€æ­¥æ­¥æ‹†è§£ï¼Œä»ç”¨æˆ·ç‚¹å‡»ç‚¹èµæŒ‰é’®å¼€å§‹ï¼Œæ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<h4 data-id="heading-3">1. ç”¨æˆ·ç‚¹èµï¼šå…ˆå†™æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®¢æˆ·ç«¯ç›´æ¥åé¦ˆæˆåŠŸ</h4>
<p>ç”¨æˆ·ç‚¹å‡»ç‚¹èµçš„ç¬é—´ï¼Œå®¢æˆ·ç«¯ä¸ä¼šç›´æ¥è°ƒç”¨æ•°æ®åº“æ¥å£ï¼Œè€Œæ˜¯åšä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>
<p>å‘åç«¯å‘é€ç‚¹èµè¯·æ±‚ï¼Œåç«¯æ”¶åˆ°åï¼Œ<strong>ä¸æ“ä½œæ•°æ®åº“</strong>ï¼Œç›´æ¥æŠŠç”¨æˆ·ID + è§†é¢‘ID + ç‚¹èµçŠ¶æ€ï¼ˆèµ / å–æ¶ˆèµï¼‰å°è£…æˆä¸€æ¡æ¶ˆæ¯ï¼Œå†™å…¥ Kafkaï¼›</p>
</li>
<li>
<p>Reids è®°å½• ç”¨æˆ·ID + è§†é¢‘ID çš„ç‚¹èµçŠ¶æ€ï¼Œå¢åŠ  è§†é¢‘ID çš„èµæ•°é‡</p>
</li>
<li>
<p>åªè¦æ¶ˆæ¯æˆåŠŸå†™å…¥ Kafkaï¼Œåç«¯å°±ç«‹åˆ»è¿”å›ç‚¹èµæˆåŠŸç»™å‰ç«¯ï¼Œå®¢æˆ·ç«¯é©¬ä¸Šæ˜¾ç¤ºå·²èµçŠ¶æ€ã€‚</p>
</li>
</ul>
<p>ä¸ºå•¥é€‰ Kafka æˆ‘å°±ä¸è¯´äº†ã€‚</p>
<h4 data-id="heading-4">2. å®¢æˆ·ç«¯ï¼šæœ¬åœ°è®°å½•çŠ¶æ€ï¼Œé¿å…é‡å¤ç‚¹èµ</h4>
<p>å®¢æˆ·ç«¯æ”¶åˆ°ç‚¹èµæˆåŠŸåï¼Œé™¤äº†æ˜¾ç¤ºå·²èµï¼Œè¿˜è¦åœ¨æœ¬åœ°å­˜å‚¨è®°å½•å½“å‰ç”¨æˆ·å¯¹è¯¥è§†é¢‘å·²ç‚¹èµã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>
<p>é˜²æ­¢ç”¨æˆ·çŸ­æ—¶é—´å†…é‡å¤ç‚¹å‡»ç‚¹èµï¼Œå‰ç«¯ç›´æ¥æ‹¦æˆªï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ï¼›</p>
</li>
<li>
<p>å°±ç®—åç»­ç¼“å­˜æ²¡æ›´æ–°ï¼Œç”¨æˆ·è‡ªå·±çœ‹åˆ°çš„çŠ¶æ€ä¹Ÿæ˜¯å‡†ç¡®çš„ï¼Œä¸å½±å“ä¸ªäººä½“éªŒã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">3. æŸ¥èµæ•°ï¼šç›´æ¥è¯» Redisï¼Œä¸ç”¨æŸ¥æ•°æ®åº“</h4>
<p>å…¶ä»–ç”¨æˆ·æŸ¥çœ‹è§†é¢‘æ—¶ï¼Œéœ€è¦æ˜¾ç¤ºèµæ•°ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šè°ƒç”¨æŸ¥è¯¢èµæ•°æ¥å£ï¼Œåç«¯çš„å¤„ç†é€»è¾‘æ˜¯ï¼š</p>
<ul>
<li>
<p>ä¸æŸ¥æ•°æ®åº“ï¼Œç›´æ¥ä» Redis é‡Œè¯»å–è¯¥è§†é¢‘çš„èµæ•°ç¼“å­˜ï¼›</p>
</li>
<li>
<p>Redis è¯»æ€§èƒ½æé«˜ï¼Œæ”¯æŒæ¯ç§’å‡ åä¸‡æ¬¡æŸ¥è¯¢ï¼Œå®Œå…¨èƒ½æ‰›ä½ç™¾ä¸‡ç”¨æˆ·åŒæ—¶æŸ¥çœ‹çš„å‹åŠ›ï¼›</p>
</li>
<li>
<p>è¿™é‡Œçš„èµæ•°å¯èƒ½ä¸æ˜¯å®æ—¶æœ€æ–°çš„ï¼Œä½†åªè¦å»¶è¿Ÿåœ¨å¯æ¥å—èŒƒå›´å†…ï¼Œç”¨æˆ·å®Œå…¨æ²¡æ„Ÿè§‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">4. åå°ä»»åŠ¡ï¼šå®šæ—¶åŒæ­¥ Redis å’Œæ•°æ®åº“ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´</h4>
<p>è¿™ä¸€æ­¥æ˜¯å…œåº•ï¼Œè´Ÿè´£æŠŠ Kafka é‡Œçš„ç‚¹èµæ¶ˆæ¯å¤„ç†æ‰ï¼ŒåŒæ—¶æ›´æ–° Redis å’Œæ•°æ®åº“ï¼š</p>
<ul>
<li>
<p>åç«¯æŒç»­ä» Kafka é‡Œæ‹‰å–ç‚¹èµæ¶ˆæ¯ï¼›</p>
</li>
<li>
<p>å¯åŠ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼ŒæŠŠ Redis é‡Œæ‰€æœ‰è§†é¢‘çš„èµæ•°ï¼Œæ‰¹é‡åŒæ­¥åˆ°æ•°æ®åº“é‡Œï¼›</p>
</li>
<li>
<p>åŒæ­¥æ—¶è¦æ³¨æ„å¹‚ç­‰æ€§ï¼šæ¯”å¦‚ç”¨æˆ·å…ˆèµåå–æ¶ˆï¼Œæœ€ç»ˆçŠ¶æ€æ˜¯æœªèµï¼Œé¿å…é‡å¤è®¡ç®—å¯¼è‡´èµæ•°é”™è¯¯ã€‚</p>
</li>
</ul>
<p>æ‰¹é‡åŒæ­¥ï¼Œæ”’ä¸€æ‰¹æ•°æ®ï¼ˆæ¯”å¦‚ 1 ä¸‡æ¡ï¼‰å†æ‰¹é‡æ›´æ–°ï¼Œå¤§å¤§å‡å°‘æ•°æ®åº“çš„å†™å…¥å‹åŠ›ã€‚</p>
<p>è€Œä¸”å®šæ—¶ä»»åŠ¡å¯ä»¥æ ¹æ®ä¸šåŠ¡è°ƒæ•´é¢‘ç‡ï¼Œæ¯”å¦‚é«˜å³°æœŸæ¯ 1 åˆ†é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œä½å³°æœŸæ¯ 10 åˆ†é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œçµæ´»é€‚é…æµé‡ã€‚</p>
<h3 data-id="heading-7">æ–¹æ¡ˆä¼˜åŠ¿</h3>
<p>è¿™å¥—æ–¹æ¡ˆæ²¡æœ‰å¤æ‚çš„æ¶æ„ï¼Œä½†çš„ç¡®èƒ½è§£å†³ç™¾ä¸‡çº§ç‚¹èµçš„é«˜å¹¶å‘é—®é¢˜ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äºå‡ ç§ä¸­é—´ä»¶çš„ç»„åˆä½¿ç”¨ï¼š</p>
<ul>
<li>
<p>é«˜å¯ç”¨ï¼šKafka ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼ŒRedis ä¿è¯æŸ¥è¯¢ä¸å¡é¡¿ï¼Œå°±ç®—æ•°æ®åº“æš‚æ—¶æŒ‚äº†ï¼Œç”¨æˆ·ç‚¹èµå’ŒæŸ¥èµæ•°éƒ½ä¸å—å½±å“ï¼›</p>
</li>
<li>
<p>æ˜“æ‰©å±•ï¼šå¦‚æœåç»­ç‚¹èµé‡æ¶¨åˆ°åƒä¸‡çº§ï¼Œåªéœ€è¦å¢åŠ  Kafka çš„åˆ†åŒºæ•°ã€Redis çš„é›†ç¾¤èŠ‚ç‚¹ï¼Œå°±èƒ½è½»æ¾æ‰›ä½ï¼›</p>
</li>
<li>
<p>ä½æˆæœ¬ï¼šä¸ç”¨å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¸ç”¨å®æ—¶è®¡ç®—æ¡†æ¶ï¼Œç”¨æœ€åŸºç¡€çš„ä¸­é—´ä»¶å°±èƒ½å®ç°ï¼Œå¼€å‘å’Œç»´æŠ¤æˆæœ¬éƒ½ä½ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">å†™åœ¨æœ€å</h3>
<p>å…¶å®å¾ˆå¤šé«˜å¹¶å‘åœºæ™¯ï¼Œæ¯”å¦‚ç‚¹èµã€è¯„è®ºã€ç§’æ€ï¼Œæ ¸å¿ƒæ€è·¯éƒ½æ˜¯å¼‚æ­¥è§£è€¦ + ç¼“å­˜å…œåº•ã€‚</p>
<p>é¢è¯•å®˜è€ƒå¯Ÿçš„ä¸æ˜¯ä½ çŸ¥é“å¤šå°‘å†·é—¨æŠ€æœ¯ï¼Œè€Œæ˜¯ä½ èƒ½ä¸èƒ½çœ‹é€é—®é¢˜æœ¬è´¨ï¼Œç”¨æˆ·è¦çš„æ˜¯ <strong>ä½“éªŒ</strong> å’Œ <strong>æˆåŠŸ</strong>ï¼Œä¸æ˜¯ <strong>å®æ—¶å‡†ç¡®</strong>ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™å¥—æ–¹æ¡ˆçœ‹ä¼¼ç®€å•ï¼Œä½†è¦†ç›–äº† â€œå‰Šå³°ã€ç¼“å­˜ã€å¼‚æ­¥ã€æœ€ç»ˆä¸€è‡´æ€§â€ ç­‰æ ¸å¿ƒè€ƒç‚¹ï¼Œé¢è¯•æ—¶æŠŠè¿™ä¸ªé€»è¾‘è®²æ¸…æ¥šï¼Œå†ç»“åˆ Kafka çš„æ¶ˆæ¯å¯é æ€§ã€Redis çš„é«˜æ€§èƒ½ã€å®šæ—¶ä»»åŠ¡çš„æ‰¹é‡å¤„ç†ï¼Œé¢è¯•å®˜èµ·ç ä¼šè§‰å¾—ä½  <strong>æ‡‚è¡Œ</strong>ã€‚</p>
<p>å¦‚æœå®é™…ä¸šåŠ¡ä¸­ï¼Œèµæ•°å»¶è¿Ÿè¦æ±‚æé«˜ï¼ˆæ¯”å¦‚ç›´æ’­åœºæ™¯ï¼Œéœ€è¦å®æ—¶æ˜¾ç¤ºèµæ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥æŠŠå®šæ—¶åŒæ­¥æ”¹æˆ Kafka æ¶ˆè´¹åå®æ—¶æ›´æ–° Redisï¼Œæ•°æ®åº“å¼‚æ­¥åŒæ­¥ï¼Œæœ¬è´¨è¿˜æ˜¯æ¢æ±¤ä¸æ¢è¯ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ant Design 6.0 æ­£å¼å‘å¸ƒï¼šå‰ç«¯å¼€å‘è€…çš„ç¦éŸ³ä¸é©æ–°]]></title>    <link>https://juejin.cn/post/7576273949186949162</link>    <guid>https://juejin.cn/post/7576273949186949162</guid>    <pubDate>2025-11-25T03:50:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576273949186949162" data-draft-id="7576272680519122987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ant Design 6.0 æ­£å¼å‘å¸ƒï¼šå‰ç«¯å¼€å‘è€…çš„ç¦éŸ³ä¸é©æ–°"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,Ant Design"/> <meta itemprop="datePublished" content="2025-11-25T03:50:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‰ç«¯å†é™©è®°"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ant Design 6.0 æ­£å¼å‘å¸ƒï¼šå‰ç«¯å¼€å‘è€…çš„ç¦éŸ³ä¸é©æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‰ç«¯å†é™©è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:50:37.000Z" title="Tue Nov 25 2025 03:50:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ant Design 6.0 æ­£å¼å‘å¸ƒï¼šå‰ç«¯å¼€å‘è€…çš„ç¦éŸ³ä¸é©æ–°</h2>
<blockquote>
<p>æ›´å¿«çš„æ€§èƒ½ï¼Œæ›´å°çš„ä½“ç§¯ï¼Œæ›´å¥½çš„å¼€å‘ä½“éªŒ</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d361980dab174e8bae803733f21e199b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5YmN56uv5Y6G6Zmp6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647437&amp;x-signature=Ih9l9fDFIpmer31UOjpWh603ouY%3D" alt="" loading="lazy"/></p>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œç›¸ä¿¡ä½ å¯¹ Ant Design éƒ½ä¸é™Œç”Ÿã€‚è¿™ä¸ªæ‹¥æœ‰è¿‘10ä¸‡Starçš„React UIç»„ä»¶åº“ï¼Œä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä¼ä¸šçº§ä¸­åå°é¡¹ç›®çš„é¦–é€‰ã€‚æœ€è¿‘ï¼ŒAnt Design 6.0æ­£å¼å‘å¸ƒäº†ï¼Œè¿™ä¸ä»…æ˜¯ç‰ˆæœ¬å·çš„è¿­ä»£ï¼Œæ›´æ˜¯ä¸€æ¬¡<strong>æŠ€æœ¯æ¶æ„çš„å…¨é¢é©æ–°</strong>ã€‚</p>
<h3 data-id="heading-1">å¹³æ»‘è¿ç§»ï¼Œä½“éªŒå‡çº§</h3>
<p>ä¸v5ç›¸æ¯”ï¼Œv6å®ç°äº†<strong>æ— ç¼è¿ç§»ä½“éªŒ</strong>ã€‚å¦‚æœä½ çš„é¡¹ç›®å·²ç»åœ¨ä½¿ç”¨v5ï¼Œä¸éœ€è¦ä»»ä½•å…¼å®¹åŒ…æˆ–codemodå·¥å…·ï¼Œå¯ä»¥ç›´æ¥å‡çº§åˆ°v6ã€‚å®˜æ–¹æ‰¿è¯ºè¿™æ˜¯ä¸€ä¸ªå¹³æ»‘çš„æŠ€æœ¯å‡çº§ï¼Œç»„ä»¶APIä¿æŒå…¼å®¹ã€‚</p>
<p>v5åˆ†æ”¯å°†åˆ‡æ¢åˆ°<code>v5.x-stable</code>å¹¶è¿›å…¥<strong>1å¹´çš„ç»´æŠ¤å‘¨æœŸ</strong>ï¼Œé™¤éå‡ºç°ä¸¥é‡bugï¼Œå¦åˆ™ä¸ä¼šå†è¿›è¡ŒåŠŸèƒ½æ€§æ›´æ–°ã€‚è¿™æ„å‘³ç€v6å°†æ˜¯æœªæ¥å‘å±•çš„é‡ç‚¹ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæŠ€æœ¯çªç ´</h3>
<h4 data-id="heading-3">React 18+æˆä¸ºæœ€ä½è¦æ±‚</h4>
<p>v6å°†Reactæœ€ä½ç‰ˆæœ¬è¦æ±‚æå‡åˆ°äº†<strong>18</strong>ï¼Œå½»åº•ç§»é™¤äº†ä¹‹å‰ç‰ˆæœ¬çš„å…¼å®¹é€»è¾‘ã€‚è¿™é¿å…äº†å¤šç‰ˆæœ¬é—´çš„APIè¡Œä¸ºå·®å¼‚ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´çº¯ç²¹åœ°äº«å—Reactæœ€æ–°ç‰¹æ€§å¸¦æ¥çš„å¼€å‘ä½“éªŒã€‚</p>
<p>å¯¹äºé™æ€æ–¹æ³•å¦‚<code>Modal.confirm</code>ï¼Œä¸å†éœ€è¦é¢å¤–çš„å…¼å®¹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯ä»¥ç§»é™¤è¿™è¡Œä»£ç äº†</span>
-- <span class="hljs-keyword">import</span> <span class="hljs-string">'@ant-design/v5-patch-for-react-19'</span>;
</code></pre>
<h4 data-id="heading-4">å…¨é¢æ‹¥æŠ±CSS Variables</h4>
<p>v6æœ€ä»¤äººå…´å¥‹çš„æ”¹è¿›ä¹‹ä¸€æ˜¯é»˜è®¤é‡‡ç”¨<strong>çº¯CSS Variablesæ¨¡å¼</strong>ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>é¦–å…ˆï¼Œ<strong>æ€§èƒ½å¤§å¹…æå‡</strong>ã€‚æµè§ˆå™¨åŸç”Ÿæ”¯æŒCSSå˜é‡ï¼Œä¸å†éœ€è¦JSå»è®¡ç®—å’Œæ’å…¥æ ·å¼ã€‚å®˜æ–¹æ€§èƒ½å¯¹æ¯”æ˜¾ç¤ºï¼ŒZero Runtimeæ¨¡å¼ä¸‹çš„æ€§èƒ½è¡¨ç°æœ€ä½³ã€‚</p>
<p>å…¶æ¬¡ï¼Œ<strong>ä¸»é¢˜åˆ‡æ¢å˜å¾—è½»è€Œæ˜“ä¸¾</strong>ã€‚ç°åœ¨åˆ‡æ¢æš—è‰²æ¨¡å¼ï¼Œåªéœ€è¦æ”¹å˜æ ¹èŠ‚ç‚¹çš„å‡ ä¸ªCSSå˜é‡å€¼ï¼Œæµè§ˆå™¨ç¬é—´å°±èƒ½å®Œæˆæ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">ConfigProvider</span> theme={{ <span class="hljs-attr">zeroRuntime</span>: <span class="hljs-literal">true</span> }}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">ConfigProvider</span>&gt;
</code></pre>
<p>æ€§èƒ½å¯¹æ¯”å¦‚ä¸‹ï¼ŒzeroRuntime æ¨¡å¼è¡¨ç°æœ€ä½³ï¼ˆæ°´å¹³è½´ä¸ºä¸»é¢˜æ•°é‡ï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97957ecc35984d13818f18299576b55a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5YmN56uv5Y6G6Zmp6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647437&amp;x-signature=A0YCusg7ADiu0jEoWsFlHE6h3fA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b82359eb91354456bf7a76f812bb4c2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5YmN56uv5Y6G6Zmp6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647437&amp;x-signature=k8AmlPSPZqsdrRK4183x6U%2F%2BdTs%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5">ç»„ä»¶DOMç»“æ„è¯­ä¹‰åŒ–</h4>
<p>v6å®Œæˆäº†<strong>æ‰€æœ‰ç»„ä»¶çš„DOMè¯­ä¹‰åŒ–æ”¹é€ </strong>ã€‚è¿™è§£å†³äº†é•¿æœŸå›°æ‰°å¼€å‘è€…çš„é—®é¢˜â€”â€”å¦‚ä½•ä¼˜é›…åœ°å®šåˆ¶ç»„ä»¶æ ·å¼ã€‚</p>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨<code>classNames</code>å’Œ<code>styles</code>å±æ€§ç²¾å‡†åœ°å®šåˆ¶ç»„ä»¶å„ä¸ªéƒ¨åˆ†çš„æ ·å¼ï¼Œä¸å†éœ€è¦å†™é«˜æƒé‡çš„CSSé€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Button</span>
  classNames={{
    <span class="hljs-attr">root</span>: <span class="hljs-string">'rounded-tr-xl rounded-bl-xl'</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'rotate-30'</span>,
  }}
  icon={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SmileOutlined</span> /&gt;</span></span>}
&gt;
  <span class="hljs-title class_">Ant</span> <span class="hljs-title class_">Design</span>
&lt;/<span class="hljs-title class_">Button</span>&gt;
</code></pre>
<p>è¿™ç§è®¾è®¡æ€è·¯å¾ˆæœ‰<strong>Headless UIçš„å‘³é“</strong>ï¼Œè®©Ant Designä»"å†™æ­»çš„ç§¯æœ¨"å˜æˆäº†æä¾›çµæ´»æ¥å£çš„è®¾è®¡ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-6">ä¸è¿‡å»å‘Šåˆ«</h3>
<h4 data-id="heading-7">å½»åº•æ”¾å¼ƒIEæ”¯æŒ</h4>
<p>v6åšäº†ä¸€ä¸ªç¡¬æ°”çš„å†³å®šï¼š<strong>å½»åº•ç§»é™¤å¯¹IEçš„æ”¯æŒ</strong>ã€‚è™½ç„¶è¿™å¯¹ç»´æŠ¤è€æ—§é¡¹ç›®çš„å›¢é˜Ÿå¯èƒ½æ˜¯ä¸ªåæ¶ˆæ¯ï¼Œä½†å¯¹æ•´ä¸ªå‰ç«¯ç”Ÿæ€æ¥è¯´æ˜¯ä¸ªå¥½æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬ç»ˆäºä¸éœ€è¦ä¸ºäº†1%çš„IEç”¨æˆ·ï¼Œå»èƒŒè´Ÿæ²‰é‡çš„polyfillå’Œhackä»£ç äº†ã€‚</p>
<h4 data-id="heading-8">ç§»é™¤åºŸå¼ƒAPI</h4>
<p>v6æ¸…ç†äº†æ‰€æœ‰åœ¨v4è¢«æ ‡è®°åºŸå¼ƒã€v5ä¿ç•™å…¼å®¹çš„æ¥å£ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>findDOMNode</code>å…¼å®¹é€»è¾‘ç§»é™¤</li>
<li><code>List</code>ã€<code>Dropdown.Button</code>ã€<code>BackTop</code>æ–‡æ¡£ç§»é™¤ä½†ä¿ç•™å…¼å®¹</li>
<li>React 18å…¼å®¹ä»£ç åˆ é™¤</li>
</ul>
<h3 data-id="heading-9">æ–°ç»„ä»¶ä¸åŠŸèƒ½å¢å¼º</h3>
<p>v6è¿˜å¼•å…¥äº†ä¸€ç³»åˆ—æ–°ç»„ä»¶å’ŒåŠŸèƒ½å¢å¼ºï¼š</p>
<ul>
<li><strong>Masonryç»„ä»¶</strong>ï¼šç”¨äºå›¾ç‰‡å¢™ã€å¡ç‰‡æµç­‰åœºæ™¯</li>
<li><strong>Tooltipæ”¯æŒå¹³ç§»å’Œæ»‘åŠ¨</strong>ï¼šåœ¨å¤šä¸ªtooltipå†…å®¹é—´è¿›è¡Œå¹³ç§»æ»‘åŠ¨</li>
<li><strong>InputNumberçš„spinneræ¨¡å¼</strong>ï¼šå¸¸è§çš„æŒ‰é’®å¸ƒå±€é£æ ¼</li>
<li><strong>Draweræ”¯æŒè°ƒæ•´å¤§å°</strong>ï¼šå¢å¼ºäº†æŠ½å±‰ç»„ä»¶çš„äº¤äº’èƒ½åŠ›</li>
<li><strong>è’™å±‚æ¨¡ç³ŠèƒŒæ™¯</strong>ï¼šæ‰€æœ‰å¼¹å±‚ç±»ç»„ä»¶é»˜è®¤ä½¿ç”¨æ¨¡ç³Šæ•ˆæœ</li>
</ul>
<h3 data-id="heading-10">æ€§èƒ½ä¼˜åŒ–å®è·µ</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å……åˆ†åˆ©ç”¨v6çš„æ€§èƒ½ä¼˜åŠ¿ï¼š</p>
<h4 data-id="heading-11">1. å¯ç”¨é›¶è¿è¡Œæ—¶æ¨¡å¼</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ConfigProvider</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">zeroRuntime:</span> <span class="hljs-attr">true</span> }}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ConfigProvider</span>&gt;</span></span>
);
</code></pre>
<h4 data-id="heading-12">2. åˆ©ç”¨Tree Shaking</h4>
<p>v6æ›´å¥½åœ°æ”¯æŒäº†Tree Shakingï¼Œç¡®ä¿æ‰“åŒ…æ—¶åªåŒ…å«å®é™…ä½¿ç”¨çš„ç»„ä»¶ã€‚</p>
<h4 data-id="heading-13">3. è¯­ä¹‰åŒ–æ ·å¼è¦†ç›–</h4>
<p>æ”¾å¼ƒé«˜æƒé‡çš„CSSé€‰æ‹©å™¨ï¼Œæ”¹ç”¨è¯­ä¹‰åŒ–çš„classNamesï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Card</span>
  title=<span class="hljs-string">"Hello World"</span>
  classNames={{
    <span class="hljs-attr">root</span>: <span class="hljs-string">"bg-green-300/10 text-green-500 border-green-500 rounded-none"</span>,
    <span class="hljs-attr">header</span>: <span class="hljs-string">"rounded-none border-green-500"</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">"text-green-500 overflow-visible"</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-string">"rounded-none"</span>
  }}
&gt;
  å†…å®¹
&lt;/<span class="hljs-title class_">Card</span>&gt;
</code></pre>
<h3 data-id="heading-14">å‡çº§å»ºè®®</h3>
<h4 data-id="heading-15">å¯¹äºv5ç”¨æˆ·</h4>
<p><strong>ç›´æ¥å‡çº§å§ï¼</strong> å®˜æ–¹æ‰¿è¯ºæ˜¯å¹³æ»‘è¿ç§»ï¼Œæ— éœ€codemodï¼Œç›´æ¥å‡çº§å³å¯äº«å—æ€§èƒ½æå‡å’ŒCSSå˜é‡çš„çº¢åˆ©ã€‚å‡çº§å‰è®°å¾—å¤„ç†æ§åˆ¶å°çš„åºŸå¼ƒAPIè­¦å‘Šã€‚</p>
<h4 data-id="heading-16">å¯¹äºv4ç”¨æˆ·</h4>
<p>è¿™æ¬¡å‡çº§æˆæœ¬è¾ƒé«˜ï¼Œå»ºè®®å…ˆå‡çº§åˆ°v5è¿‡æ¸¡ï¼Œæˆ–è€…åœ¨æ–°é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨v6ã€‚</p>
<h4 data-id="heading-17">å¯¹äºä»éœ€æ”¯æŒIEçš„ç”¨æˆ·</h4>
<p>ç•™åœ¨v5å§ï¼Œv5è¿›å…¥äº†1å¹´çš„ç»´æŠ¤å‘¨æœŸï¼Œè¶³å¤Ÿè¿‡æ¸¡äº†ã€‚</p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>Ant Design 6.0ä¸ä»…ä»…æ˜¯ä¸€æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œæ›´æ˜¯<strong>å¼€å‘ç†å¿µçš„è¿›åŒ–</strong>ã€‚å®ƒè¯•å›¾æ’•æ‰"ç¬¨é‡"çš„æ ‡ç­¾ï¼Œå‘ç°ä»£å‰ç«¯å¼€å‘èŒƒå¼çœ‹é½ã€‚</p>
<p>ä»CSS-in-JSè¿è¡Œæ—¶åˆ°çº¯CSS Variablesï¼Œä»é»‘ç›’æ ·å¼åˆ°è¯­ä¹‰åŒ–DOMç»“æ„ï¼Œä»å…¼å®¹åŒ…è¢±åˆ°è½»è£…ä¸Šé˜µï¼ŒAnt Designæ­£åœ¨åŠªåŠ›é€‚åº”AIæ—¶ä»£çš„å‰ç«¯å¼€å‘éœ€æ±‚ã€‚</p>
<p>å°è¯•ä¸€ä¸‹Ant Design 6.0å§ï¼Œç›¸ä¿¡å®ƒä¼šç»™ä½ å¸¦æ¥ä¸ä¸€æ ·çš„å‘å±•ä½“éªŒï¼</p>
<hr/>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·" <strong>å¤§å‰ç«¯å†é™©è®°</strong>"ï¼Œè·å–æ›´å¤šå‰ç«¯å¼€å‘å¹²è´§ï¼</p>
<p><em>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fant-design%2Fant-design%2Freleases%2Ftag%2F6.0.0" target="_blank" title="https://github.com/ant-design/ant-design/releases/tag/6.0.0" ref="nofollow noopener noreferrer">Ant Design 6.0 Release Note</a></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactå‡½æ•°ç»„ä»¶ä¸Hooksçš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7576197876717125670</link>    <guid>https://juejin.cn/post/7576197876717125670</guid>    <pubDate>2025-11-25T01:32:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876717125670" data-draft-id="7575093624902025257" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactå‡½æ•°ç»„ä»¶ä¸Hooksçš„å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-11-25T01:32:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LRH"/> <meta itemprop="url" content="https://juejin.cn/user/3280598427770087"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactå‡½æ•°ç»„ä»¶ä¸Hooksçš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598427770087/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LRH
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:32:43.000Z" title="Tue Nov 25 2025 01:32:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æˆ‘ä»¬åœ¨ç¼–å†™ React åº”ç”¨çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨å‡½æ•°ç»„ä»¶é…åˆ Hooks å®ç°çŠ¶æ€ç®¡ç†åŠå…¶ä»–èƒ½åŠ›ï¼Œç„¶è€Œå¤§å®¶æ˜¯å¦æœ‰æ·±ç©¶è¿‡ä¸ºä½•å‡½æ•°ç»„ä»¶éœ€è¦ä½¿ç”¨å„ç§ Hooks æ¥å®ç°å…¶ä»–èƒ½åŠ›ï¼Œä»¥åŠ Hooks çš„æœ¬è´¨ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬çš„ä½¿ç”¨éœ€è¦ä¸¥æ ¼æŒ‰ç…§è§„èŒƒï¼Œè¿™èƒŒåçš„åŸç†ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æœ¬æ–‡å°†é’ˆå¯¹ä¸Šè¿°é—®é¢˜å±•å¼€æ¢è®¨ï¼Œåˆ†æ Hooks çš„æœ¬è´¨ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ä¸å‡½æ•°ç»„ä»¶è¿›è¡Œç»“åˆï¼Œä»è€Œè¾…åŠ©å‡½æ•°ç»„ä»¶å®ç°å„ç§åŠŸèƒ½çš„ã€‚</p>
<h2 data-id="heading-1">Hooks çš„å‰ä¸–ä»Šç”Ÿ</h2>
<h3 data-id="heading-2">React16.8 å‰çš„ç»„ä»¶</h3>
<p>åœ¨ React16.8 ç‰ˆæœ¬ä¹‹å‰ï¼ŒReact æœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯<code>ç±»ç»„ä»¶</code>å’Œ<code>å‡½æ•°å¼ç»„ä»¶</code>ã€‚</p>
<p>å®ƒä»¬æ ¹æœ¬ä¸Šçš„åŒºåˆ«æ˜¯ï¼Œç±»ç»„ä»¶æœ‰çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸã€å‰¯ä½œç”¨ç­‰ React èƒ½åŠ›ï¼Œè€Œå‡½æ•°ç»„ä»¶åˆ™æ²¡æœ‰ã€‚</p>
<p>å‡½æ•°ç»„ä»¶ç”¨æ™®é€šçš„ JS å‡½æ•°ç¼–å†™ï¼Œåªæ¥æ”¶ props å¹¶è¿”å› JSXï¼Œä¸å…·å¤‡çŠ¶æ€ç®¡ç†ç­‰ React èƒ½åŠ›ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶ï¼ˆStateless Functional Componentsï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// helloworld.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (props) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{props.greeting}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-comment">// Example use</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span> <span class="hljs-attr">greeting</span>=<span class="hljs-string">"Hello World!"</span> /&gt;</span></span>;
</code></pre>
<p>æ‰€ä»¥åœ¨ React16.8 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¤§éƒ¨åˆ† React ç»„ä»¶éƒ½éœ€è¦ä½¿ç”¨ç±»ç»„ä»¶æ¥ç¼–å†™ï¼Œè€Œå‡½æ•°ç»„ä»¶åªèƒ½å‚ä¸å°éƒ¨åˆ†çš„çº¯ UI ç¼–å†™ã€‚</p>
<h3 data-id="heading-3">ç±»ç»„ä»¶çš„ä¸è¶³ä¹‹å¤„</h3>
<p>ä½†æ˜¯æ‰¿æ‹…ç€ä¸»è¦ä½œç”¨çš„ç±»ç»„ä»¶ï¼Œå´å­˜åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Fhooks-intro.html%23motivation" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/hooks-intro.html#motivation" ref="nofollow noopener noreferrer">ä¸‰ä¸ªä¸è¶³ä¹‹å¤„</a>ï¼š</p>
<h4 data-id="heading-4">ç»„ä»¶é—´éš¾ä»¥å¤ç”¨çŠ¶æ€é€»è¾‘</h4>
<p>ç±»ç»„ä»¶ä¸­æ²¡æœ‰å®ç°é€»è¾‘å¤ç”¨çš„åŸç”Ÿæ–¹æ¡ˆï¼Œå¦‚æœéœ€è¦åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨é€»è¾‘ï¼Œåªèƒ½é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Fhigher-order-components.html" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/higher-order-components.html" ref="nofollow noopener noreferrer">HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Frender-props.html" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/render-props.html" ref="nofollow noopener noreferrer">Render Props</a> è¾…åŠ©ï¼Œä»£ç å®ç°æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”å¤šå±‚åµŒå¥—åè¿˜ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-5">é€»è¾‘åˆ†æ•£ï¼Œå¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</h4>
<p>åœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç›‘å¬æŸä¸ªå˜é‡æ”¹å˜ä»è€Œæ‰§è¡Œåç»­æ“ä½œï¼Œæˆ–éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½/å¸è½½æ—¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© componentDidUpdateã€componentWillUnmount ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­è¾…åŠ©å®Œæˆã€‚</p>
<p>å…¶ä¸­çš„é—®é¢˜æ˜¯ï¼Œå‡è®¾æœ‰ä¸€ä¸ªä¸šåŠ¡ Aï¼Œéœ€è¦ä½¿ç”¨åˆ°ä¸Šè¿°ä¸¤ä¸ªé’©å­ï¼Œé‚£ä¹ˆå¯¹åº”çš„é€»è¾‘åˆ™éœ€è¦åˆ†åˆ«æ”¾åœ¨å®ƒä»¬çš„å›è°ƒå‡½æ•°ä¸­ï¼Œé€ æˆä¸€ä¸ªä¸šåŠ¡çš„é€»è¾‘ï¼ˆåœ¨ä»£ç ä¸­ï¼‰åˆ†æ•£åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸”ä¼šä¸å…¶ä»–ä¸šåŠ¡çš„ä»£ç æ··æ‚åœ¨ä¸€èµ·ï¼Œä½¿å¾—ä»£ç éš¾ä»¥é˜…è¯»å’Œç†è§£ã€‚</p>
<h4 data-id="heading-6">class è¯­ä¹‰å¤æ‚</h4>
<p>ç±»ç»„ä»¶ä½¿ç”¨ JS åŸç”Ÿçš„ class è¯­æ³•è¿›è¡Œç¼–å†™ï¼Œç„¶è€Œä½¿ç”¨ class è¯­æ³•å°±å¿…é¡»å…ˆç†è§£ JS ä¸­çš„ this çš„å·¥ä½œåŸç†ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šçš„æ—¶å€™ï¼Œéœ€è¦ç»‘å®šå½“å‰çš„ this å€¼ã€‚è¿™äº›å¤æ‚çš„åŸç†å’Œç¹æ‚çš„ä½¿ç”¨æ–¹å¼ï¼Œä½¿ç±»ç»„ä»¶éš¾ä»¥ä¸Šæ‰‹åŠå¢åŠ å¹³æ—¶ä½¿ç”¨çš„è´Ÿæ‹…ã€‚</p>
<h3 data-id="heading-7">Hooks ä¸å‡½æ•°ç»„ä»¶</h3>
<h4 data-id="heading-8">Hooks çš„ç›®çš„</h4>
<p>å‡ºäºå¯¹ä¸Šè¿°ç±»ç»„ä»¶çš„ä¸‰ä¸ªä¸è¶³åŠ React é•¿æœŸå‘å±•çš„è€ƒè™‘ï¼ŒReact å›¢é˜Ÿå¸Œæœ›æ¨å‡ºä¸€ç§æ–°ç‰¹æ€§ï¼Œä¸æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ï¼ˆStateless Functional Componentsï¼‰é…åˆä½¿ç”¨ï¼Œä½¿å…¶æ‹¥æœ‰ç±»ç»„ä»¶æ‰€æ‹¥æœ‰çš„èƒ½åŠ›ï¼ˆå³ä¿æŒçŠ¶æ€ã€å¤„ç†å‰¯ä½œç”¨ç­‰ React ç‰¹æ€§ï¼‰ã€‚ä½¿å¾—<code>æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ + Hooks == ç±»ç»„ä»¶</code>ï¼Œä»è€Œå®ç°æŠ›å¼ƒç±»ç»„ä»¶ä¹Ÿèƒ½ç¼–å†™ React åº”ç”¨çš„ç›®çš„ã€‚</p>
<h4 data-id="heading-9">Hooks çš„æœ¬è´¨</h4>
<blockquote>
<p>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>
</blockquote>
<p>å¦‚ä¸Šç‰‡æ®µæ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Fhooks-intro.html" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/hooks-intro.html" ref="nofollow noopener noreferrer">React å®˜æ–¹æ–‡æ¡£</a>å¯¹ Hooks çš„æ€»ç»“æ€§æè¿°ã€‚</p>
<p>Hooks çš„æœ¬è´¨æ˜¯æ™®é€šçš„ JS å‡½æ•°ï¼Œå®ƒåªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–å¦ä¸€ä¸ª Hook ä¸­è°ƒç”¨ï¼Œè€Œä¸èƒ½åœ¨ç±»ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</p>
<p>ä¸”åœ¨ä½¿ç”¨å„ç§ Hooks çš„æ—¶å€™ï¼Œå¿…é¡»éµå®ˆå¦‚ä¸‹è§„åˆ™ï¼š<code>Hooksåªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookçš„æœ€é¡¶å±‚è°ƒç”¨</code>ï¼Œå³ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥æˆ–å…¶ä»–åµŒå¥—å‡½æ•°å†…è°ƒç”¨ Hookï¼Œå¿…é¡»ä¿éšœ<code>å‡½æ•°ç»„ä»¶æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œå„ä¸ªHooksçš„è°ƒç”¨é¡ºåºä¸€è‡´</code>ã€‚</p>
<p>æ¥ä¸‹æ¥æœ¬æ–‡å°†ä¼šå›´ç»•ä»¥ä¸‹ä¸‰ç‚¹å±•å¼€ï¼š</p>
<ol>
<li>Hooks çš„æ¥æºï¼ˆé’ˆå¯¹ä¸åŒæ—¶æœºè°ƒç”¨ä¸åŒç‰ˆæœ¬çš„ Hooksï¼‰</li>
<li>Hooks æ˜¯å¦‚ä½•è¢«å­˜å‚¨çš„ï¼ˆä¸ºä»€ä¹ˆéœ€è¦ä¿æŒè°ƒç”¨é¡ºåºä¸€è‡´ï¼‰</li>
<li>ä»¥ useState å’Œ useEffect ä¸ºä¾‹ï¼Œå±•ç¤º Hooks çš„æ‰§è¡Œæµç¨‹ã€‚</li>
</ol>
<h2 data-id="heading-10">Hooks çš„æ¥æº</h2>
<p>React ç»„ä»¶è¢«è°ƒç”¨æ—¶ï¼Œä¼šå¤„äºä»¥ä¸‹ä¸¤ä¸ªé˜¶æ®µä¸­çš„ä¸€ä¸ªï¼š</p>
<ul>
<li>mount é˜¶æ®µï¼ˆç»„ä»¶åˆæ¬¡æŒ‚è½½æ—¶ï¼‰</li>
<li>update é˜¶æ®µï¼ˆå·²ç»æŒ‚è½½è¿‡çš„ç»„ä»¶æ›´æ–°æ—¶ï¼‰</li>
</ul>
<p>è€Œå¤„äºä¸åŒé˜¶æ®µçš„ç»„ä»¶ï¼Œæ‰€å¼•ç”¨çš„ Hooks å…¶å®æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼ŒCount ç»„ä»¶ç¬¬ä¸€æ¬¡æŒ‚è½½æ—¶å’Œåç»­æ›´æ–°æ—¶ï¼Œæ‰€å¼•ç”¨æ‰§è¡Œçš„ useState å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼ˆå³ä½¿å®ƒä»¬éƒ½å«åš useStateï¼‰ï¼ŒuseEffect åŒç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Count</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä¸åŒé˜¶æ®µæ‰€å¼•ç”¨çš„ useState å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„</span>
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// useEffect åŒç†</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`countï¼š<span class="hljs-subst">${count}</span>`</span>);
  }, [count]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Count</span>;
</code></pre>
<p>æ¯ä¸ª Hook éƒ½ä¼šæœ‰ä¸¤å¥—ç‰ˆæœ¬ï¼Œå³ mount ç‰ˆæœ¬å’Œ update ç‰ˆæœ¬ï¼Œåˆ†åˆ«å­˜æ”¾åœ¨ HooksDispatcherOnMount å¯¹è±¡å’Œ HooksDispatcherOnUpdate å¯¹è±¡ä¸­ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜æ”¾æ‰€æœ‰mountæ—¶æœŸéœ€è¦æ‰§è¡Œçš„Hooks</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnMount</span> = {
  <span class="hljs-comment">// ... some code .. å…¶ä»–hooksåŸºæœ¬åŒç†</span>

  <span class="hljs-comment">// mountæ—¶æœŸéœ€è¦æ‰§è¡Œçš„useEffect</span>
  <span class="hljs-attr">useEffect</span>: mountEffect,
  <span class="hljs-attr">useRef</span>: mountRef,
  <span class="hljs-attr">useState</span>: mountState,

  <span class="hljs-comment">// ... some code ...</span>
};

<span class="hljs-comment">// å­˜æ”¾æ‰€æœ‰updateæ—¶æœŸéœ€è¦æ‰§è¡Œçš„Hooks</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnUpdate</span>: <span class="hljs-title class_">Dispatcher</span> = {
  <span class="hljs-comment">// ... some code .. å…¶ä»–hooksåŸºæœ¬åŒç†</span>

  <span class="hljs-attr">useEffect</span>: updateEffect,
  <span class="hljs-attr">useRef</span>: updateRef,
  <span class="hljs-attr">useState</span>: updateState,

  <span class="hljs-comment">// ... some code ...</span>
};
</code></pre>
<p>è€Œ React ç»„ä»¶æ˜¯å¦‚ä½•çŸ¥é“åœ¨å½“å‰é˜¶æ®µåº”è¯¥ä»å“ªä¸ªå¯¹è±¡ä¸­å–å‡ºæ‰€éœ€çš„ Hooks å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ ReactCurrentDispatcher ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ä¸ªâ€œHooks è°ƒåº¦å™¨â€ï¼Œä»–çš„ current å±æ€§ä¼šæŒ‡å‘ç»„ä»¶å½“å‰é˜¶æ®µæ‰€å¯¹åº”çš„ Hooks é›†åˆï¼ˆå³ä¸Šè¿°çš„ HooksDispatcherOnMount æˆ– HooksDispatcherOnUpdateï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ReactCurrentDispatcher</span> = {
  <span class="hljs-comment">// æ­¤currentå±æ€§å°†ä¼šåŠ¨æ€æŒ‡å‘ HooksDispatcherOnMount æˆ– HooksDispatcherOnUpdate</span>
  <span class="hljs-attr">current</span>: <span class="hljs-literal">null</span>,
};
</code></pre>
<p>å½“ ReactCurrentDispatcher çš„ current é€šè¿‡æŸç§æ–¹å¼ï¼ˆä¸‹æ–‡å°†ä¼šæåˆ°ï¼‰æŒ‡å‘äº†æŸä¸ª Hooks é›†åˆä¹‹åï¼Œå„ä¸ª Hooks åœ¨æ‰§è¡Œæ—¶å°±ä¼šä»æ‰€æŒ‡çš„é›†åˆä¸­å–å‡ºå¯¹åº” Hookã€‚ä»¥ useState å’Œ useEffect ä¸ºä¾‹ï¼Œå®ƒä»¬çš„æºç åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// è·å–ReactCurrentDispatcher.currentçš„æŒ‡å‘</span>
  <span class="hljs-keyword">const</span> dispatcher = <span class="hljs-title function_">resolveDispatcher</span>();
  <span class="hljs-comment">// ä»æ­£ç¡®çš„Hooksé›†åˆä¸­å–å‡ºå¯¹åº”çš„Hook</span>
  <span class="hljs-keyword">return</span> dispatcher.<span class="hljs-title function_">useState</span>(initialState);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffect</span>(<span class="hljs-params">create, deps</span>) {
  <span class="hljs-comment">// è·å–ReactCurrentDispatcher.currentçš„æŒ‡å‘</span>
  <span class="hljs-keyword">const</span> dispatcher = <span class="hljs-title function_">resolveDispatcher</span>();
  <span class="hljs-comment">// ä»æ­£ç¡®çš„Hooksé›†åˆä¸­å–å‡ºå¯¹åº”çš„Hook</span>
  <span class="hljs-keyword">return</span> dispatcher.<span class="hljs-title function_">useEffect</span>(create, deps);
}
</code></pre>
<p>ä»ä¸Šè¿° useState å’Œ useEffect çš„ä¾‹å­å¯è§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ª Hook å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œå¯¹åº” Hook çš„â€œæœ¬ä½“â€ï¼Œè€Œæ˜¯å…ˆé€šè¿‡ ReactCurrentDispatcher.current è·å–åˆ°å½“å‰ç»„ä»¶æ‰€éœ€çš„ Hooks é›†åˆï¼ˆHooksDispatcherOnMount æˆ– HooksDispatcherOnUpdateï¼‰ï¼Œç„¶åä»ä¸­å–å‡ºçœŸæ­£çš„â€œæœ¬ä½“â€æ‰§è¡Œã€‚</p>
<p>è€Œä¸Šè¿° useState å’Œ useEffect ä¸­çš„ resolveDispatcher å‡½æ•°ï¼Œæœ¬è´¨å°±æ˜¯è¿”å› ReactCurrentDispatcher.current çš„æŒ‡å‘ï¼Œæºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">resolveDispatcher</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> dispatcher = <span class="hljs-title class_">ReactCurrentDispatcher</span>.<span class="hljs-property">current</span>;
  <span class="hljs-keyword">return</span> dispatcher;
}
</code></pre>
<p>å¦‚ä¸‹å›¾å±•ç¤ºäº† ReactCurrentDispatcher.current çš„èµ‹å€¼åŠ Hooks æå–å¹¶æ‰§è¡Œçš„è¿‡ç¨‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f493d0f5a0204adca69b1a2db7817f31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFJI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639163&amp;x-signature=EwfdfS%2B5nUuVjMraIj2sjE%2B%2FilM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">ReactCurrentDispatcher.current çš„æŒ‡å‘</h3>
<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† ReactCurrentDispatcher.current ä¼šæ ¹æ®å½“å‰è¢«è°ƒç”¨çš„ç»„ä»¶æ‰€å¤„çš„é˜¶æ®µï¼ŒæŒ‡å‘ HooksDispatcherOnMount æˆ– HooksDispatcherOnUpdate å¯¹è±¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¢è®¨ ReactCurrentDispatcher.current æ˜¯å¦‚ä½•æŒ‡å‘æ­£ç¡®çš„ Hooks é›†åˆçš„ã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“åœ¨ React çš„åŒç¼“å­˜æ¶æ„ä¸­ï¼Œç»´æŠ¤ç€ current fiber tree å’Œ workInProgress fiber tree è¿™ä¸¤é¢—æ ‘ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨å½“å‰é¡µé¢çš„ fiber èŠ‚ç‚¹æ‰€ç»„æˆçš„æ ‘ï¼Œå’Œä¸‹ä¸€ä¸ªé¡µé¢çš„ fiber èŠ‚ç‚¹æ‰€ç»„æˆçš„æ ‘ã€‚</p>
<p>è€Œå¯¹äºæŸä¸ªç»„ä»¶è€Œè¨€ï¼Œå½“å®ƒåœ¨åˆå§‹åŒ–æŒ‚è½½çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰å¯¹åº”çš„ current fiber èŠ‚ç‚¹çš„ï¼Œåªæœ‰å½“æŒ‚è½½å®Œæ¯•ä¹‹åï¼Œæ‰ä¼šå°† workInprogress fiber èŠ‚ç‚¹èµ‹å€¼ç»™ current fiber èŠ‚ç‚¹ã€‚æ‰€ä»¥ React åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦æ˜¯å¤„äºåˆå§‹åŒ–æŒ‚è½½é˜¶æ®µï¼Œé‡‡ç”¨çš„æ˜¯<code>åˆ¤æ–­å…¶ current fiber èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º</code>ï¼Œåä¹‹åˆ™ä¸ºæ›´æ–°é˜¶æ®µã€‚</p>
<p>é™¤äº†ä¸Šè¿°åˆ¤æ–­æ¡ä»¶ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€å¼•å…¥å¦ä¸€ä¸ªæ¡ä»¶è¿›è¡Œè¾…åŠ©åˆ¤æ–­ï¼šå½“å‰ç»„ä»¶æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ Hooksã€‚ä»£ç ä¸­çš„ä½“ç°ä¸ºåˆ¤æ–­ current.memoizedState å±æ€§æ˜¯å¦ä¸ºç©ºï¼Œæ­¤å±æ€§ç”¨äºå½“å‰ç»„ä»¶å­˜å‚¨è‡ªèº«æ‰€æœ‰çš„ Hooksï¼ˆä»¥é“¾è¡¨çš„æ–¹å¼å­˜å‚¨ï¼Œæœ¬æ–‡åç»­å°†ä¼šæåˆ°ï¼‰ã€‚ä½¿ç”¨ memoizedState è¿›è¡Œè¾…åŠ©åˆ¤æ–­çš„åŸå› æ˜¯ React çš„æ¸²æŸ“è¿‡ç¨‹æ˜¯å¯ä»¥ä¸­æ–­çš„ï¼Œå¯èƒ½å‡ºç°çš„ä¸€ç§æƒ…å†µä¸ºï¼Œå·²ç»ä¸ºå½“å‰ç»„ä»¶åˆ›å»ºäº† fiber èŠ‚ç‚¹ä½†æ²¡æœ‰æäº¤ï¼Œæ­¤æ—¶æ¸²æŸ“ä¸­æ–­ï¼Œç­‰åˆ°åç»­é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œå¯ä»¥å¤ç”¨ä¹‹å‰çš„ fiber èŠ‚ç‚¹ï¼Œä½†æ˜¯å…¶ Hooks æ˜¯æ²¡æœ‰åˆå§‹åŒ–ï¼Œå³ memoizedState å±æ€§ä¸ºç©ºã€‚</p>
<p>å½’çº³ä¸€ä¸‹ï¼ŒReactCurrentDispatcher.current åªæœ‰å¦‚ä¸‹ä¸¤ç§æƒ…å†µä¼šæŒ‡å‘ HooksDispatcherOnMountï¼Œå…¶ä½™æƒ…å†µéƒ½æŒ‡å‘ HooksDispatcherOnUpdateï¼š</p>
<ol>
<li>å½“å‰ç»„ä»¶ fiber èŠ‚ç‚¹æ²¡æœ‰åˆå§‹åŒ–è¿‡</li>
<li>å½“å‰ç»„ä»¶ fiber èŠ‚ç‚¹çš„ memoizedState å±æ€§ä¸ºç©ºï¼ˆå³ Hooks é“¾è¡¨ä¸ºç©ºï¼‰</li>
</ol>
<p>èŠ‚é€‰ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderWithHooks</span>(<span class="hljs-params">
  current, <span class="hljs-comment">// current Fiber</span>
  workInProgress, <span class="hljs-comment">// workInProgress Fiber</span>
  Component <span class="hljs-comment">// å‡½æ•°ç»„ä»¶æœ¬èº«</span>
  <span class="hljs-comment">// ... å…¶ä»–å½¢å‚ ...</span>
</span>) {
  <span class="hljs-comment">// ... some code ...</span>

  <span class="hljs-title class_">ReactCurrentDispatcher</span>.<span class="hljs-property">current</span> =
    current === <span class="hljs-literal">null</span> || current.<span class="hljs-property">memoizedState</span> === <span class="hljs-literal">null</span> <span class="hljs-comment">// current.memoizedState === null ä»£è¡¨å½“å‰ç»„ä»¶æ²¡æœ‰ä½¿ç”¨è¿‡ä»»ä½•Hooks</span>
      ? <span class="hljs-title class_">HooksDispatcherOnMount</span>
      : <span class="hljs-title class_">HooksDispatcherOnUpdate</span>;

  <span class="hljs-comment">// ... some code ...</span>
}
</code></pre>
<h2 data-id="heading-12">Hook çš„æ•°æ®ç»“æ„åŠå‚¨å­˜æ–¹å¼</h2>
<h3 data-id="heading-13">Hook çš„æ•°æ®ç»“æ„</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬èŠä¸€ä¸‹ Hooks æ‰§è¡Œä¹‹åï¼Œä¼šç”Ÿæˆä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„è¿›è¡Œå­˜å‚¨ã€‚<br/>
åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œä¹‹åçš„ Hook ä¼šä»¥å¯¹è±¡çš„å½¢å¼å­˜å‚¨ã€‚è€Œæ¯ä¸ª Hook å¯¹è±¡å¯èƒ½ä¼šæ‹¥æœ‰ä¸åŒçš„å±æ€§ï¼Œæˆ–åŒåå±æ€§æœ‰ä¸åŒçš„ç”¨é€”ï¼Œè¿™éœ€è¦æ ¹æ®å…·ä½“ Hooks å…·ä½“åˆ†æã€‚</p>
<p>å¦‚ä¸‹å±•ç¤ºçš„æ˜¯ useState çš„ hook å¯¹è±¡ï¼Œæ‹¥æœ‰å¦‚ä¸‹ 5 ä¸ªå±æ€§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Hook</span> = {
  <span class="hljs-attr">memoizedState</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// å½“å‰æ¸²æŸ“åä¿å­˜çš„stateçš„å€¼</span>
  <span class="hljs-attr">baseState</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// ä¸Šä¸€æ¬¡æœªè¢«è·³è¿‡çš„åŸºç¡€state</span>
  <span class="hljs-attr">baseQueue</span>: <span class="hljs-title class_">Update</span>&lt;<span class="hljs-built_in">any</span>, <span class="hljs-built_in">any</span>&gt; | <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¿å­˜ä¹‹å‰æœªè¢«å¤„ç†çš„æ›´æ–°é“¾è¡¨</span>
  <span class="hljs-attr">queue</span>: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// å½“å‰useStateå¯¹åº”çš„æ›´æ–°é“¾è¡¨</span>
  <span class="hljs-attr">next</span>: <span class="hljs-title class_">Hook</span> | <span class="hljs-literal">null</span>; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªhookå¯¹è±¡</span>
};
</code></pre>
<ul>
<li>memoizedStateï¼š ä¿å­˜å½“å‰ Hook çš„çŠ¶æ€å€¼ï¼Œä¸åŒç±»å‹çš„ Hook ä¿å­˜ä¸åŒçš„ä¿¡æ¯ã€‚ï¼ˆå¦‚ useState ä¸­ ä¿å­˜ state ä¿¡æ¯ã€useEffect ä¸­ ä¿å­˜ç€ effect å¯¹è±¡ã€useRef ä¸­ä¿å­˜çš„æ˜¯ ref å¯¹è±¡ï¼‰ã€‚</li>
<li>baseStateï¼šä¿å­˜åœ¨ä¸Šä¸€æ¬¡ render ä¸­æœªè¢«è·³è¿‡çš„ state åŸºå‡†å€¼ï¼ˆä¸»è¦ç”¨äº useState å’Œ useReducer çš„æ‰¹é‡æ›´æ–°æˆ–ä¸­æ–­æ›´æ–°åœºæ™¯ã€‚å¦‚ï¼šåœ¨å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰ä¸‹ï¼Œå¦‚æœæŸä¸ªæ›´æ–°è¢«ä¸­æ–­æˆ–è·³è¿‡ï¼ŒReact éœ€è¦ä¸€ä¸ªâ€œåŸºç¡€çŠ¶æ€â€æ¥é‡æ–°è®¡ç®—åç»­æ›´æ–°ã€‚baseState å°±æ˜¯è¿™ä¸ªèµ·ç‚¹ã€‚ï¼‰</li>
<li>baseQueueï¼šä¿å­˜é‚£äº›å°šæœªè¢«å¤„ç†ï¼ˆæˆ–è¢«è·³è¿‡ï¼‰çš„æ›´æ–°é˜Ÿåˆ—ã€‚ï¼ˆä½ä¼˜å…ˆçº§æ›´æ–°è¢«é«˜ä¼˜å…ˆçº§æ›´æ–°æ‰“æ–­åï¼Œè¿™äº›è¢«æŒ‚èµ·çš„æ›´æ–°ä¼šè¢«æš‚å­˜åœ¨ baseQueue ä¸­ï¼Œç­‰åˆ°åˆé€‚çš„æ—¶æœºå†é‡æ–°åº”ç”¨ã€‚ï¼‰</li>
<li>queueï¼š(ä¸€èˆ¬åªåœ¨ useState å’Œ useReducer ä¸­å‘æŒ¥ä½œç”¨)ä»¥å¾ªç¯é“¾è¡¨çš„æ–¹å¼å‚¨å­˜å½“å‰ Hook çš„æ›´æ–°å¯¹è±¡</li>
<li>nextï¼šæŒ‡å‘å½“å‰ç»„ä»¶çš„ä¸‹ä¸€ä¸ª Hook å¯¹è±¡çš„å¼•ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-14">Hook å¯¹è±¡åœ¨ React çš„å­˜å‚¨æ–¹å¼</h3>
<p>å½“æˆ‘ä»¬å¤§æ¦‚äº†è§£ Hook çš„ç»“æ„åï¼Œå†èŠèŠå®ƒä»¬æ˜¯å¦‚ä½•ä¸å¯¹åº”çš„ç»„ä»¶è¿›è¡Œç»‘å®šåŠå­˜å‚¨çš„ã€‚</p>
<p>å‡½æ•°ç»„ä»¶ä¸åƒç±»ç»„ä»¶é‚£æ ·æœ‰è‡ªå·±çš„å®ä¾‹ï¼Œå®ƒä»¬æ˜¯ä»¥ fiber èŠ‚ç‚¹çš„å½¢å¼å­˜åœ¨çš„ã€‚å…¶ä¸­ Fiber å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªå…³é”®çš„<code>memoizedState</code>å±æ€§ï¼Œæ­¤å±æ€§å‚¨å­˜å½“å‰å‡½æ•°ç»„ä»¶æ‰€æœ‰ Hook å¯¹è±¡æ‰€ç»„æˆçš„é“¾è¡¨ï¼ˆåœ¨ç±»ç»„ä»¶ä¸­ï¼Œæ­¤å±æ€§å‚¨å­˜çš„åˆ™æ˜¯å½“å‰ç»„ä»¶çš„çŠ¶æ€ï¼‰ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶ä¸­è°ƒç”¨å¤šä¸ª Hooks æ—¶ï¼ŒReact ä¼šä¸ºæ¯ä¸ª Hook åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æŒ‰é¡ºåºæŒ‚è½½åˆ° fiber.memoizedState ä¸­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">fiber<span class="hljs-selector-class">.memoizedState</span>
  â†“
Hook1 (useState)
  â†“
Hook2 (useEffect)
  â†“
Hook3 (useRef)
</code></pre>
<p>åœ¨å‡½æ•°ç»„ä»¶é‡æ–°æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šé¡ºç€è¿™æ¡é“¾è¡¨å»â€œå¯¹å·å…¥åº§â€ï¼Œä¸ºæ¯ä¸ª Hook åŒ¹é…æ­£ç¡®çš„ Hook å¯¹è±¡ã€‚</p>
<blockquote>
<p>ç¬¬ä¸€ä¸ª Hook â†’ ç¬¬ä¸€ä¸ª Hook èŠ‚ç‚¹<br/>
ç¬¬äºŒä¸ª Hook â†’ ç¬¬äºŒä¸ª Hook èŠ‚ç‚¹<br/>
...ä»¥æ­¤ç±»æ¨</p>
</blockquote>
<p>è¿™ä¹Ÿå¯ä»¥è§£é‡Šï¼Œä¸ºä»€ä¹ˆ Hooks å¿…é¡»åœ¨ç»„ä»¶çš„é¡¶å±‚ä½¿ç”¨ï¼Œè€Œä¸èƒ½åœ¨æ¡ä»¶åˆ†æ”¯ä¸­è°ƒç”¨ã€‚å› ä¸ºå¦‚æœæ¯æ¬¡ç»„ä»¶é‡æ–°æ‰§è¡Œæ—¶ï¼ŒHooks çš„æ•°é‡ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆ fiber.memoizedState çš„é“¾è¡¨å°±ä¼šé”™ä¹±ï¼Œæ— æ³•æ­£ç¡®åŒ¹é…ã€‚</p>
<h2 data-id="heading-15">æ¢³ç†æ‰§è¡Œæµç¨‹ï¼šä»å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œè¯´èµ·</h2>
<h3 data-id="heading-16">å‡½æ•°ç»„ä»¶æ‰§è¡Œ</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œå‡ºå‘ï¼Œæ¢³ç† Hooks æ˜¯å¦‚ä½•è¢«åˆ›å»ºåŠå‘æŒ¥å…¶ä½œç”¨çš„ã€‚</p>
<p>å‡½æ•°ç»„ä»¶çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª JS å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±æ˜¯ä¸Šä¸€èŠ‚æ‰€æåˆ°çš„<code>renderWithHooks</code>å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¼šæ¥æ”¶å¦‚ä¸‹å‡ ä¸ªå‚æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">renderWithHooks</span>(
  current, <span class="hljs-comment">// current Fiber</span>
  workInProgress, <span class="hljs-comment">// workInProgress Fiber</span>
  <span class="hljs-title class_">Component</span>, <span class="hljs-comment">// å‡½æ•°ç»„ä»¶æœ¬èº«</span>
  props, <span class="hljs-comment">// props</span>
  context, <span class="hljs-comment">// ä¸Šä¸‹æ–‡</span>
  renderExpirationTime <span class="hljs-comment">// æ¸²æŸ“ ExpirationTime</span>
);
</code></pre>
<p>å…¶ä¸­ç¬¬ä¸‰ä¸ªå‚æ•°<code>Component</code>å°±æ˜¯å‡½æ•°ç»„ä»¶æœ¬èº«ï¼ˆå³ä¸€ä¸ª JS å‡½æ•°ï¼‰ï¼Œå°†ä¼šåœ¨ä¸Šè¿° renderWithHook å‡½æ•°ä¸­è¢«è°ƒç”¨ã€‚</p>
<p>æ•´ä½“å®è§‚æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b654f9cac5e843789783d84b1dfd9a10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFJI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639163&amp;x-signature=6GgqxBMwhXqzUeUNqBdBoJGz5dU%3D" alt="image.png" loading="lazy"/></p>
<p>æ•´ä¸ªæµç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆæ ¹æ®ä¼ å…¥çš„ current åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦æ˜¯åˆæ¬¡æ¸²æŸ“ï¼Œä»è€Œå†³å®š ReactCurrentDispatcher.current çš„æŒ‡å‘ã€‚</li>
<li>æ‰§è¡Œ Component å‡½æ•°ï¼Œæ‰§è¡Œå‡½æ•°ç»„ä»¶ï¼Œé‡åˆ° Hooks æ—¶ä» ReactCurrentDispatcher.current è·å–å¹¶æ‰§è¡Œ</li>
<li>å°† ReactCurrentDispatcher.current èµ‹å€¼ä¸º ContextOnlyDispatcher</li>
</ol>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»ä¸Šè¿°ä¸‰ç‚¹å±•å¼€é˜è¿°ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€ç‚¹ä¸­å¯¹ ReactCurrentDispatcher.current çš„èµ‹å€¼ç›¸ä¿¡å¤§å®¶é€šè¿‡å‰æ–‡å·²ç»æœ‰æ‰€äº†è§£ï¼Œå°±æ˜¯é€šè¿‡ current å‚æ•°åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æŒ‚è½½ï¼Œä»è€Œå†³å®šæŒ‡å‘ HooksDispatcherOnMount è¿˜æ˜¯ HooksDispatcherOnUpdateã€‚</p>
</li>
<li>
<p>ç¬¬äºŒç‚¹ä¸»è¦é˜è¿°å„ä¸ª Hooks æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œè™½ç„¶å„ä¸ª Hooks çš„å…·ä½“é€»è¾‘æœ‰æ‰€ä¸åŒï¼Œä½†å¤§è‡´è¿‡ç¨‹æ˜¯ç›¸åŒçš„ã€‚è¿™ä¸€ç‚¹ä¼šåœ¨ä¸‹æ–‡è¯¦ç»†å±•å¼€ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰ç‚¹ä¸­æåˆ°å½“ Component æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä¼šå°† ReactCurrentDispatcher.current æŒ‡å‘ ContextOnlyDispatcher å¯¹è±¡ã€‚æ­¤å¯¹è±¡å°±æ˜¯ç±»ä¼¼ HooksDispatcherOnMount å’Œ HooksDispatcherOnUpdate çš„ Hooks é›†åˆï¼Œåªä¸è¿‡é‡Œé¢çš„ Hooks å¤§éƒ½æŒ‡å‘åŒä¸€ä¸ª throwInvalidHookError å‡½æ•°ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ContextOnlyDispatcher</span>: <span class="hljs-title class_">Dispatcher</span> = {
  <span class="hljs-comment">// ... some code ...</span>
  <span class="hljs-attr">useEffect</span>: throwInvalidHookError,
  <span class="hljs-attr">useState</span>: throwInvalidHookError,
  <span class="hljs-comment">// ... some code ...</span>
};
</code></pre>
<p>throwInvalidHookError å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼Œæ‰§è¡Œæ—¶ä¼šæŠ›å‡ºé”™è¯¯ï¼Œä»¥æç¤ºâ€œhooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨â€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throwInvalidHookError</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
    <span class="hljs-string">"Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for"</span> +
      <span class="hljs-string">" one of the following reasons:\n"</span> +
      <span class="hljs-string">"1. You might have mismatching versions of React and the renderer (such as React DOM)\n"</span> +
      <span class="hljs-string">"2. You might be breaking the Rules of Hooks\n"</span> +
      <span class="hljs-string">"3. You might have more than one copy of React in the same app\n"</span> +
      <span class="hljs-string">"See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem."</span>
  );
}
</code></pre>
<p>å…¶ä½œç”¨æ˜¯ç¡®ä¿ Hooks åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«è°ƒç”¨ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚å›çœ‹ä¸Šé¢çš„å›¾ç‰‡ä¼šå‘ç°ï¼Œå½“å‡½æ•°ç»„ä»¶å°†è¦è¢«è°ƒç”¨æ—¶ï¼Œä¼šç»å†ä¸‰ä¸ªé˜¶æ®µ<code>èµ‹å€¼ReactCurrentDispatcher.current -&gt; æ‰§è¡ŒComponentå‡½æ•° -&gt; èµ‹å€¼ReactCurrentDispatcher.current</code>ï¼Œå³ <strong>ReactCurrentDispatcher.current åªæœ‰åœ¨å‡½æ•°ç»„ä»¶è¢«æ‰§è¡Œçš„æœŸé—´æ‰ä¼šæ­£ç¡®æŒ‡å‘ HooksDispatcherOnMount æˆ– HooksDispatcherOnUpdate</strong>ï¼Œå…¶ä»–æ—¶é—´éƒ½ä¼šæŒ‡å‘ ContextOnlyDispatcherã€‚<br/>
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æœåœ¨å‡½æ•°ç»„ä»¶ä¹‹å¤–è°ƒç”¨ Hooks é‚£ä¹ˆå°±ä¼šæŠ¥é”™çš„åŸå› ã€‚</p>
<h3 data-id="heading-17">Hooks æ‰§è¡Œ</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å±•å¼€å½“å‡½æ•°ç»„ä»¶é‡åˆ° Hooks æ—¶æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚</p>
<p>Hooks çš„æ‰§è¡Œæµç¨‹å¯ä»¥å®è§‚åœ°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>è·å– Hook å¯¹è±¡</li>
<li>æ‰§è¡Œ Hook ä¸ªæ€§åŒ–é€»è¾‘</li>
</ol>
<p>å¦‚ä¸Šæ­¥éª¤æ‰€ç¤ºï¼Œæ¯ä¸ª Hook æ‰§è¡Œä¹‹å‰éƒ½ä¼šæ‹¿åˆ°å½“å‰çš„ Hook å¯¹è±¡ï¼Œè¿™ä¸€æ­¥çš„é€»è¾‘æ˜¯ç»Ÿä¸€çš„ï¼Œåç»­æ‰æ˜¯æ ¹æ®ä¸åŒç±»å‹çš„ Hook æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-18">è·å– hook å¯¹è±¡</h4>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°†å±•å¼€èŠèŠ Hook æ‰§è¡Œæ—¶æ˜¯å¦‚ä½•è·å–å½“å‰çš„ Hook å¯¹è±¡çš„ã€‚</p>
<h5 data-id="heading-19">é¦–æ¬¡æ¸²æŸ“ - mountWorkInProgressHook</h5>
<p>å¯¹äºç¬¬ä¸€æ¬¡æ¸²æŸ“çš„ç»„ä»¶è€Œè¨€ï¼Œå®ƒä»¬è·å–æ¯ä¸ª Hook å¯¹è±¡çš„æ–¹å¼æ˜¯è°ƒç”¨ mountWorkInProgressHook å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ hook å¯¹è±¡ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ°å½“å‰ç»„ä»¶ fiber å¯¹è±¡çš„ memoizedState é“¾è¡¨ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountWorkInProgressHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ hook å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> hook = {
    <span class="hljs-attr">memoizedState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseQueue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">queue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };
  <span class="hljs-comment">// åˆ¤æ–­å½“å‰hookæ˜¯å¦æ˜¯å½“å‰å‡½æ•°ç»„ä»¶çš„ç¬¬ä¸€ä¸ªhook</span>
  <span class="hljs-keyword">if</span> (workInProgressHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å°†hookå¯¹è±¡ç›´æ¥æŒ‚è½½åˆ°å½“å‰fiber.memoizedState</span>
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = workInProgressHook = hook;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç§»åŠ¨æŒ‡é’ˆä¿å­˜å½“å‰hookå¯¹è±¡ï¼ˆhookå¯¹è±¡åœ¨fiber.memoizedStateä¸Šä»¥é“¾è¡¨æ–¹å¼å­˜å‚¨ï¼‰</span>
    workInProgressHook = workInProgressHook.<span class="hljs-property">next</span> = hook;
  }
  <span class="hljs-comment">// è¿”å›å½“å‰hookå¯¹è±¡çš„å¼•ç”¨</span>
  <span class="hljs-keyword">return</span> workInProgressHook;
}
</code></pre>
<h5 data-id="heading-20">ç»„ä»¶æ›´æ–° - updateWorkInProgressHook</h5>
<p>å¯¹äºæ˜¯ update æ—¶é‡æ–°æ¸²æŸ“çš„ç»„ä»¶ï¼Œå®ƒä»¬çš„å„ä¸ª Hook å·²ç»æ‹¥æœ‰äº†å„è‡ªçš„ hook å¯¹è±¡å¹¶æŒ‚è½½åˆ° currnet fiber çš„ memoizedState é“¾è¡¨ä¸Šï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬éœ€è¦æ ¹æ® currnet fiber æ ‘ä¸­çš„ hooks é“¾è¡¨ç”Ÿæˆå½“å‰æ¸²æŸ“çš„ workInProgress fiber æ ‘çš„ Hooks é“¾è¡¨ï¼Œä½¿ç»„ä»¶æ›´æ–°å‰å Hooks é“¾è¡¨ç»“æ„ä¸€è‡´ã€‚</p>
<p>å…·ä½“åšæ³•æ˜¯ç»´æŠ¤ä»¥ä¸‹ä¸¤ä¸ªæŒ‡é’ˆè¾…åŠ© workInProgress fiber æ ‘ç”Ÿæˆ Hooks é“¾è¡¨ï¼š</p>
<ul>
<li>currentHookï¼šæŒ‡å‘ current Fiber æ ‘ï¼ˆä¸Šæ¬¡æ¸²æŸ“ï¼‰çš„ Hook é“¾è¡¨å½“å‰ä½ç½®</li>
<li>workInProgressHookï¼šæŒ‡å‘ workInProgress Fiber æ ‘ï¼ˆæœ¬æ¬¡æ¸²æŸ“ï¼‰å·²æ„å»ºé“¾è¡¨çš„æœ«å°¾</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateWorkInProgressHook</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Hook</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">nextCurrentHook</span>: <span class="hljs-literal">null</span> | <span class="hljs-title class_">Hook</span>;

  <span class="hljs-keyword">if</span> (currentHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è¯´æ˜è¿™æ˜¯å½“å‰ç»„ä»¶çš„ç¬¬ä¸€ä¸ª Hook</span>
    <span class="hljs-keyword">const</span> current = currentlyRenderingFiber.<span class="hljs-property">alternate</span>; <span class="hljs-comment">// è·å– current fiber æ ‘çš„å¼•ç”¨</span>
    <span class="hljs-keyword">if</span> (current !== <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// æŒ‡å‘ current fiber æ ‘ çš„ memoizedStateï¼ˆå³Hook é“¾è¡¨çš„é“¾å¤´ï¼‰</span>
      nextCurrentHook = current.<span class="hljs-property">memoizedState</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// è‹¥ä¸å­˜current fiber æ ‘ï¼ˆå¯èƒ½å¤„äºé¦–è½®æŒ‚è½½è¿‡ç¨‹ä¸­çš„ç‰¹æ®Šé‡æ¸²æŸ“åˆ†æ”¯ï¼‰ï¼Œåˆ™æ—  current hooksé“¾å¯å¯¹é½</span>
      nextCurrentHook = <span class="hljs-literal">null</span>;
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¸¸è§„æƒ…å†µï¼šæ²¿ç€ current hook é“¾æ¨è¿›åˆ°ä¸‹ä¸€ä¸ª Hook</span>
    nextCurrentHook = currentHook.<span class="hljs-property">next</span>;
  }

  <span class="hljs-comment">// è®¡ç®— workInProgress é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªåº”å½“ä½¿ç”¨/å¤ç”¨çš„èŠ‚ç‚¹</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">nextWorkInProgressHook</span>: <span class="hljs-literal">null</span> | <span class="hljs-title class_">Hook</span>;
  <span class="hljs-keyword">if</span> (workInProgressHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è‹¥è¿˜æœªåˆ›å»ºä»»ä½• workInProgress Hook èŠ‚ç‚¹ï¼Œåˆ™ä» fiber.memoizedStateï¼ˆå³é“¾å¤´ï¼‰å¼€å§‹</span>
    nextWorkInProgressHook = currentlyRenderingFiber.<span class="hljs-property">memoizedState</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦åˆ™ä»å·²æ„å»ºçš„ workInProgress é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°è¯•å¤ç”¨</span>
    nextWorkInProgressHook = workInProgressHook.<span class="hljs-property">next</span>;
  }

  <span class="hljs-keyword">if</span> (nextWorkInProgressHook !== <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æƒ…å†µ 1ï¼šå·²ç»å­˜åœ¨å¯¹åº”çš„ workInProgress Hookï¼Œç›´æ¥å¤ç”¨</span>
    workInProgressHook = nextWorkInProgressHook;
    nextWorkInProgressHook = workInProgressHook.<span class="hljs-property">next</span>;

    currentHook = nextCurrentHook;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æƒ…å†µ 2ï¼šæ²¡æœ‰å¯å¤ç”¨çš„ workInProgress hook èŠ‚ç‚¹ï¼Œéœ€è¦ä» currentHook å…‹éš†ä¸€ä¸ªæ–°çš„ Hook èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (nextCurrentHook === <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// è‹¥è¿ current çš„å¯¹åº”èŠ‚ç‚¹ä¹Ÿæ²¡æœ‰ï¼Œè¯´æ˜å½“å‰æ¸²æŸ“è°ƒç”¨çš„ Hook æ•°é‡â€œè¶…è¿‡äº†ä¸Šä¸€è½®çš„æ•°é‡â€</span>
      <span class="hljs-comment">// è¿åâ€œHook è°ƒç”¨é¡ºåºä¸æ•°é‡åœ¨æ¸²æŸ“é—´ä¿æŒä¸€è‡´â€çš„çº¦æŸï¼Œç›´æ¥æŠ›é”™</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Rendered more hooks than during the previous render."</span>);
    }

    <span class="hljs-comment">// å°† current æŒ‡é’ˆæ¨è¿›åˆ°ä¸‹ä¸€ä¸ª</span>
    currentHook = nextCurrentHook;

    <span class="hljs-comment">// åŸºäº currentHook å…‹éš†ä¸€ä¸ªæ–°çš„ Hook èŠ‚ç‚¹åˆ° workInProgress çš„hooks é“¾ä¸­</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">newHook</span>: <span class="hljs-title class_">Hook</span> = {
      <span class="hljs-attr">memoizedState</span>: currentHook.<span class="hljs-property">memoizedState</span>,
      <span class="hljs-attr">baseState</span>: currentHook.<span class="hljs-property">baseState</span>,
      <span class="hljs-attr">baseQueue</span>: currentHook.<span class="hljs-property">baseQueue</span>,
      <span class="hljs-attr">queue</span>: currentHook.<span class="hljs-property">queue</span>,
      <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
    };

    <span class="hljs-keyword">if</span> (workInProgressHook === <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// è‹¥è¿™æ˜¯æœ¬è½®æ¸²æŸ“çš„ç¬¬ä¸€ä¸ª Hook</span>
      <span class="hljs-comment">// å°† fiber.memoizedState æŒ‡å‘è¯¥æ–° Hookï¼Œä½œä¸º workInProgress æ ‘çš„hook é“¾å¤´</span>
      currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = workInProgressHook = newHook;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æŒ‚è½½åˆ° workInProgress æ ‘hooksé“¾è¡¨çš„æœ«å°¾ï¼Œå¹¶æ¨è¿›æŒ‡é’ˆ</span>
      workInProgressHook = workInProgressHook.<span class="hljs-property">next</span> = newHook;
    }
  }

  <span class="hljs-comment">// è¿”å›æœ¬æ¬¡å¯¹åº”çš„ wip Hook èŠ‚ç‚¹ã€‚</span>
  <span class="hljs-keyword">return</span> workInProgressHook;
}
</code></pre>
<h4 data-id="heading-21">æ‰§è¡Œå„ä¸ª hook å…·ä½“é€»è¾‘</h4>
<p>å½“æ‰§è¡Œäº†ä¸Šè¿°çš„ mountWorkInProgressHook æˆ– updateWorkInProgressHook å‡½æ•°è·å–åˆ° hook å¯¹è±¡ä¹‹åï¼Œå°±æ­£å¼å¼€å§‹æ‰§è¡Œå„ä¸ª hook çš„å…·ä½“é€»è¾‘äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ä¼šä»¥å¸¸ç”¨çš„ useState å’Œ useEffect è¿›è¡Œä¸¾ä¾‹è¯´æ˜å®ƒä»¬åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“å’Œæ›´æ–°æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<h5 data-id="heading-22">useState</h5>
<h6 data-id="heading-23">å‡½æ•°ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ï¼š mountState</h6>
<p>ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼ŒuseState çš„â€œæœ¬ä½“â€æ˜¯ mountState å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// æ­¥éª¤ä¸€ï¼šä¸ºå½“å‰Hookåˆ›å»ºHookå¯¹è±¡å¹¶æŒ‚è½½</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">mountWorkInProgressHook</span>();

  <span class="hljs-comment">// æ­¥éª¤äºŒï¼šè®¡ç®—åˆå§‹ state å¹¶æŒ‚è½½ä¿å­˜</span>
  <span class="hljs-comment">// å½“useStateçš„å‚æ•°ä¸ºå‡½æ•°æ—¶ï¼Œæ‰§è¡Œå®ƒå¹¶å°†è¿”å›å€¼ä½œä¸ºstateçš„å€¼</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> initialState === <span class="hljs-string">"function"</span>) {
    initialState = <span class="hljs-title function_">initialState</span>();
  }
  <span class="hljs-comment">// å°†åˆå§‹stateçš„å€¼åˆ†åˆ«æŒ‚è½½åˆ°hookå¯¹è±¡çš„baseStateå’ŒmemoizedStateå±æ€§ä¸Š</span>
  hook.<span class="hljs-property">memoizedState</span> = hook.<span class="hljs-property">baseState</span> = initialState;

  <span class="hljs-comment">// æ­¥éª¤ä¸‰ï¼šåˆå§‹åŒ– hook.queue å±æ€§</span>
  <span class="hljs-comment">// åˆå§‹åŒ–hookå¯¹è±¡çš„queueå±æ€§ï¼Œæ–¹ä¾¿åç»­åœ¨å…¶ä¸Šé¢æŒ‚è½½updateå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> queue = {
    <span class="hljs-attr">pending</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// ç”¨äºå­˜æ”¾updateå¯¹è±¡é“¾è¡¨</span>
    <span class="hljs-attr">lanes</span>: <span class="hljs-title class_">NoLanes</span>,
    <span class="hljs-attr">dispatch</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">lastRenderedReducer</span>: basicStateReducer, <span class="hljs-comment">// åŸºç¡€reducerå‡½æ•°ï¼ˆä¸‹æ–‡ä¼šæåˆ°ï¼‰</span>
    <span class="hljs-attr">lastRenderedState</span>: initialState,
  };
  hook.<span class="hljs-property">queue</span> = queue;

  <span class="hljs-comment">// æ­¥éª¤å››ï¼šåˆ›å»º setXXX å‡½æ•°</span>
  <span class="hljs-comment">// åˆ›å»ºsetXXXå‡½æ•°ï¼Œä¸ºå…¶ç»‘å®šå½“å‰FiberèŠ‚ç‚¹åŠupdateå¯¹è±¡é“¾è¡¨</span>
  <span class="hljs-keyword">const</span> dispatch = (queue.<span class="hljs-property">dispatch</span> = dispatchSetState.<span class="hljs-title function_">bind</span>(
    <span class="hljs-literal">null</span>,
    currentlyRenderingFiber,
    queue
  ));

  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, dispatch];
}
</code></pre>
<p>ä¸Šè¿°æ“ä½œæˆ‘ä»¬å¯ä»¥ç®€å•å½’çº³ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>hook å¯¹è±¡åˆ›å»ºä¸æŒ‚è½½</li>
<li>è®¡ç®—åˆå§‹ state å¹¶æŒ‚è½½ä¿å­˜</li>
<li>åˆå§‹åŒ– hook.queue å±æ€§</li>
<li>åˆ›å»º setXXX å‡½æ•°ï¼Œä¸ºå…¶ç»‘å®šå½“å‰ fiber èŠ‚ç‚¹ä¸ update é“¾è¡¨ queue</li>
</ol>
<p>ç¬¬ä¸€ç‚¹çš„åˆ›å»º hook å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨å‰æ–‡æåˆ°çš„å‡½æ•° mountWorkInProgressHookã€‚</p>
<p>ç¬¬äºŒç‚¹å³æ˜¯æ ¹æ®å‚æ•°ç±»å‹ï¼Œé€šè¿‡è®¡ç®—æˆ–ç›´æ¥è·å– state å€¼ï¼Œå¹¶æŒ‚è½½åˆ° hook.memoizedState ä¸Šã€‚</p>
<p>ç¬¬ä¸‰ç‚¹åˆ™æ˜¯åˆå§‹åŒ– hook.queue å±æ€§ï¼Œç”¨äºåç»­ä¿å­˜ update å¯¹è±¡é“¾è¡¨ç­‰ä¿¡æ¯ï¼ˆæ­¤ queue å±æ€§ä¸€èˆ¬åªåœ¨ useState å’Œ useReducer çš„ hook å¯¹è±¡ä¸­è¢«ä½¿ç”¨ï¼‰</p>
<p>ç¬¬å››ç‚¹ä¼šåˆ›å»º dispatch å‡½æ•°ï¼Œæ­¤å‡½æ•°å…¶å®å°±æ˜¯ useState è¿”å›çš„æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆå³ setXXX å‡½æ•°ï¼‰ã€‚</p>
<p>å‰ä¸‰ä¸ªæ­¥éª¤éƒ½ä»¥ç›¸å¯¹å®¹æ˜“ç†è§£çš„ï¼Œæ¥ä¸‹æ¥éœ€è¦å¯¹ç¬¬å››æ­¥çš„ dispatch å‡½æ•°å±•å¼€èŠèŠã€‚</p>
<h6 data-id="heading-24">dispatchSetState</h6>
<p>dispatch å‡½æ•°å®é™…ä¸Šå°±æ˜¯ dispatchSetState å‡½æ•°è°ƒç”¨ bind ç»‘å®šäº†ä¸¤ä¸ªå®å‚åè¿”å›çš„æ–°å‡½æ•°ã€‚/
æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ª dispatchSetState ç©¶ç«Ÿåšäº†ä»€ä¹ˆã€‚</p>
<p>å®ƒçš„ä½œç”¨å¯ç®€å•å½’çº³ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»º update å¯¹è±¡ã€‚</li>
<li>eager state ä¼˜åŒ–ï¼šå†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶</li>
<li>å°† update å¯¹è±¡æŒ‚è½½è‡³ hook.queue ä¸Š</li>
<li>æ‰§è¡Œè°ƒåº¦å‡½æ•°ï¼Œè°ƒåº¦æ›´æ–°çš„æ‰§è¡Œã€‚</li>
</ol>
<p>è‡³äºå®ƒæ˜¯å¦‚ä½•çŸ¥é“è¦æŒ‚è½½åˆ°å“ªä¸ª hook çš„ queue ä¸Šçš„ï¼Œç­”æ¡ˆå°±åœ¨äºå…¶å‚æ•°ä¸Šã€‚</p>
<p>å¦‚ä¸‹æ˜¯ç²¾ç®€åçš„ dispatchSetState çš„ä¼ªä»£ç ï¼š<br/>
æ­¤å‡½æ•°å®é™…ä¸Šéœ€è¦æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶è°ƒç”¨ setXXX å‡½æ•°æ—¶ï¼Œåªéœ€ä¼ å…¥å…·ä½“çš„å€¼æˆ–ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚æ­¤æ—¶æˆ‘ä»¬ä¼ å…¥çš„å…¶å®æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå‰ä¸¤ä¸ªå‚æ•°ä¼šåœ¨ mountState æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨ bind å¸®æˆ‘ä»¬ç»‘å®šï¼ŒæŠŠå¯¹åº”çš„ fiber èŠ‚ç‚¹å’Œ hook.queue ç»‘å®šã€‚
è¿™æ ·å°±èƒ½ç¡®ä¿è°ƒç”¨ setXX å‡½æ•°æ—¶ï¼Œå¦‚ä½•æ­£ç¡®æ›´æ–°å¯¹åº”çš„ state äº†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatchSetState</span>(<span class="hljs-params">
  fiber,
  queue,
  action <span class="hljs-comment">// setXXXçš„å‚æ•°ï¼Œå¯ä¸ºå‡½æ•°æˆ–æ™®é€šå€¼</span>
</span>) {
  <span class="hljs-comment">// æ­¥éª¤ä¸€ï¼šåˆ›å»ºupdateå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> update = {
    expirationTime,
    suspenseConfig,
    action,
    <span class="hljs-attr">eagerReducer</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">eagerState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };

  <span class="hljs-comment">// æ­¥éª¤äºŒï¼šEager state ä¼˜åŒ–</span>
  <span class="hljs-keyword">const</span> baseState = queue.<span class="hljs-property">lastRenderedState</span>; <span class="hljs-comment">// ä¸Šä¸€æ¬¡æ¸²æŸ“å®Œæˆæ—¶çš„çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> eagerReducer = queue.<span class="hljs-property">lastRenderedReducer</span>; <span class="hljs-comment">// ç”¨äºè®¡ç®—æ–°çš„stateçš„reducerå‡½æ•°ï¼ˆä¸‹æ–‡ä¼šå†å±•å¼€ï¼‰</span>
  <span class="hljs-keyword">if</span> (eagerReducer !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ç›´æ¥è®¡ç®—æ–° stateï¼ˆä¸é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼‰</span>
      <span class="hljs-keyword">const</span> eagerState = <span class="hljs-title function_">eagerReducer</span>(baseState, action);

      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(eagerState, baseState)) {
        <span class="hljs-comment">// ç»“æœæ²¡å˜ï¼Œç›´æ¥è¿”å›ï¼Œä¸è§¦å‘è°ƒåº¦</span>
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-comment">// è®°å½•æå‰è®¡ç®—çš„ç»“æœï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ¸²æŸ“ä½¿ç”¨</span>
      update.<span class="hljs-property">eagerState</span> = eagerState;
      update.<span class="hljs-property">hasEagerState</span> = <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-comment">// eager è®¡ç®—å‡ºé”™æ—¶å¿½ç•¥</span>
    }
  }

  <span class="hljs-comment">// æ­¥éª¤ä¸‰ï¼šæŒ‚è½½updateå¯¹è±¡ï¼ˆupdateå¯¹è±¡é“¾è¡¨ä¼šä»¥ç¯å½¢é“¾è¡¨çš„æ–¹å¼å‚¨å­˜ï¼‰</span>
  <span class="hljs-keyword">const</span> pending = queue.<span class="hljs-property">shared</span>.<span class="hljs-property">pending</span>; <span class="hljs-comment">// updateé˜Ÿåˆ—</span>
  <span class="hljs-keyword">if</span> (pending === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ˜¯ç¬¬ä¸€æ¬¡æ›´æ–°</span>
    update.<span class="hljs-property">next</span> = update; <span class="hljs-comment">// å½“å‰updateå¯¹è±¡æŒ‡å‘è‡ªå·±ï¼Œå½¢å¼ç¯çŠ¶</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¸æ˜¯ç¬¬ä¸€æ¬¡æ›´æ–°</span>
    update.<span class="hljs-property">next</span> = pending.<span class="hljs-property">next</span>; <span class="hljs-comment">// å½“å‰updateå¯¹è±¡æŒ‡å‘pending.nextï¼ˆå³ç¬¬ä¸€ä¸ªåŠ å…¥çš„updateï¼‰</span>
    pending.<span class="hljs-property">next</span> = update; <span class="hljs-comment">// pending.nextæŒ‡å‘å½“å‰updateå¯¹è±¡ï¼ˆé“¾è¡¨ä¸­æœ€è¿ŸåŠ å…¥çš„çš„updateæŒ‡å‘å½“å‰updateï¼‰</span>
  }
  queue.<span class="hljs-property">pending</span> = update; <span class="hljs-comment">// pending æŒ‡å‘å½“å‰update</span>

  <span class="hljs-comment">// æ­¥éª¤å››ï¼šè°ƒåº¦æ›´æ–°æ“ä½œï¼ˆå¹¶éåŒæ­¥æ‰§è¡Œï¼Œå…·ä½“è°ƒåº¦é€»è¾‘ç”± scheduler æ‰§è¡Œï¼‰</span>
  <span class="hljs-title function_">scheduleUpdateOnFiber</span>(fiber, expirationTime);
}
</code></pre>
<p>æ‹“å±•ï¼šä¸Šé¢ä»£ç æåˆ°çš„ï¼Œupdate å¯¹è±¡é“¾è¡¨ä»¥ç¯å½¢é“¾è¡¨å­˜æ”¾äº fiber èŠ‚ç‚¹çš„ queue.shared.pending å±æ€§ä¸Šã€‚</p>
<p>ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ä¸‰ä¸ª update å¯¹è±¡çš„åŠ å…¥é¡ºåºä¸ºï¼šupdate1 -&gt; update2 -&gt; update3</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8c7211a8359486c9c413cc6af1bf31e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFJI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639163&amp;x-signature=Ev0dsKT9RcohSfQEDR0Za7g%2FVek%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®ç‚¹ä¸ºï¼š</p>
<ul>
<li>queue.shared.pending æŒ‡å‘æœ€ååŠ å…¥çš„ update</li>
<li>queue.shared.pending.next æŒ‡å‘ç¬¬ä¸€ä¸ªåŠ å…¥çš„ update</li>
</ul>
<h6 data-id="heading-25">å‡½æ•°ç»„ä»¶æ›´æ–°ï¼šupdateState</h6>
<p>åœ¨å‡½æ•°ç»„ä»¶æ›´æ–°æ—¶ï¼ŒuseState çš„â€œæœ¬ä½“â€æ˜¯ updateState å‡½æ•°ï¼Œå®ƒçš„æºç å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">//  å®è´¨ä¸Šæ˜¯è°ƒç”¨ useReducer çš„ updateReducer å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">updateReducer</span>(basicStateReducer, initialState);
}
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒupdateState å®é™…ä¸Šæ˜¯è°ƒç”¨ useReducer åœ¨ç»„ä»¶æ›´æ–°æ—¶æ‰§è¡Œçš„æœ¬ä½“â€”â€”updateReducerã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‡½æ•°ç»„ä»¶æ›´æ–°æ—¶ï¼ŒuseState å’Œ useReducer æ‰€æ‰§è¡Œçš„é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬ä» useState å’Œ useReducer ä½¿ç”¨çš„è§’åº¦æ¥çœ‹çœ‹ï¼Œä¸ºä»€ä¹ˆ useState èƒ½ä½¿ç”¨ useReducer çš„é€»è¾‘ï¼Œä»¥åŠä¸Šé¢çš„ basicStateReducer å‚æ•°ç©¶ç«Ÿæ˜¯ä»€ä¹ˆã€‚</p>
<p>å¦‚ä¸‹ä¸º useState çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§ä¼ å‚æ–¹å¼å»ä¿®æ”¹ state çš„å€¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-comment">// æ–¹å¼ä¸€ï¼šç›´æ¥ä¼ å…¥ç›®æ ‡å€¼</span>
<span class="hljs-title function_">setCount</span>(<span class="hljs-number">100</span>);
<span class="hljs-comment">// æ–¹å¼äºŒï¼šä¼ å…¥è®¡ç®—å‡½æ•°</span>
<span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n + <span class="hljs-number">1</span>);
</code></pre>
<p>è€Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨ useReducer ä¹Ÿèƒ½å®ç°ä¸Šè¿°ç›®æ ‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action === <span class="hljs-string">"function"</span>) {
    <span class="hljs-comment">// actionä¸ºå‡½æ•°æ—¶ï¼Œå°†å½“å‰stateä¼ å…¥ï¼Œå¹¶å°†å…¶è¿”å›å€¼è§†ä¸ºæ–°çš„state</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">action</span>(state);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// actionä¸ä¸ºå‡½æ•°ï¼Œåˆ™ç›´æ¥å°†å…¶è®¾ç½®ä¸ºæ–°çš„state</span>
    <span class="hljs-keyword">return</span> action;
  }
}

<span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, <span class="hljs-number">0</span>);
<span class="hljs-comment">// ç›´æ¥ä¼ å…¥å…·ä½“å€¼ä¿®æ”¹count</span>
<span class="hljs-title function_">dispatch</span>(<span class="hljs-number">100</span>);
<span class="hljs-comment">// ä¼ å…¥è®¡ç®—å‡½æ•°</span>
<span class="hljs-title function_">dispatch</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n + <span class="hljs-number">1</span>);
</code></pre>
<p>ä»ä¸Šé¢ useState å’Œ useReducer çš„ä½¿ç”¨å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡º useState å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ useReducerã€‚æ˜¯ä¸€ä¸ª React å¸®æˆ‘ä»¬å†™å¥½ reducer å‡½æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰ action.typeï¼ˆå³ reducer ä¸­æ²¡æœ‰å¤šç§é€»è¾‘ï¼‰çš„åŠŸèƒ½å•ä¸€çš„ useReducerã€‚</p>
<p>ä¸Šé¢ updateState çš„æºç ä¸­æåˆ°äº†ï¼ŒupdateState æ‰§è¡Œæ—¶ï¼Œä¼šè¿”å› updateReducer(basicStateReducer, initialState)çš„è¿”å›å€¼ã€‚å…¶ä¸­ initialState å‚æ•°å°±æ˜¯ useState çš„å‚æ•°ï¼Œè€Œ basicStateReducer å®é™…ä¸Šå°±æ˜¯ä¸Šé¢æåˆ°çš„â€œReact å¸®æˆ‘ä»¬å†™å¥½çš„ reducer å‡½æ•°â€ï¼Œé€»è¾‘ä¸æˆ‘ä»¬ä¸Šé¢ç¼–å†™çš„ reducer å‡½æ•°ä¸€æ ·ï¼Œæºç å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€åŸºç¡€çš„reducerï¼Œactionæ˜¯â€œæ™®é€šå€¼â€æˆ–â€œæ¥æ”¶å½“å‰å€¼å¹¶è¿”å›æ–°å€¼çš„å‡½æ•°â€ã€‚ï¼ˆå³setXXXçš„å‚æ•°ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">basicStateReducer</span>(<span class="hljs-params">prevState, action</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> action === <span class="hljs-string">"function"</span> ? <span class="hljs-title function_">action</span>(prevState) : action;
}
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬é¦–å…ˆä»å®è§‚ä¸Šç†è§£ä¸ºä»€ä¹ˆ useState èƒ½å¸®åŠ©å‡½æ•°ç»„ä»¶è®°å¿†å¹¶è®¡ç®—å‡ºæœ€æ–° state å€¼ã€‚</p>
<p>useState åœ¨å‡½æ•°ç»„ä»¶æ›´æ–°æ—¶ï¼Œæ‰§è¡Œçš„â€œæœ¬ä½“â€çš„ updateState å‡½æ•°ï¼Œä»å®è§‚ä¸Šå®ƒä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œè®¡ç®—å‡ºæœ€æ–°çš„ stateï¼Œå‚¨å­˜å¹¶è¿”å›å‡ºæ¥ä¾›å‡½æ•°ç»„ä»¶ä½¿ç”¨ï¼š</p>
<ol>
<li>å–å‡ºåŸºç¡€å€¼ï¼šupdateState ä» hook.baseState å–å‡ºä¸Šä¸€æ¬¡çš„ state å€¼ï¼ˆå› å¯èƒ½å­˜åœ¨å› ä¼˜å…ˆçº§ä¸åŒ¹é…è€Œè·³è¿‡æ›´æ–°çš„æƒ…å†µï¼ŒbaseState è®°å½•ä¸Šä¸€æ¬¡è·³è¿‡æ›´æ–°åçš„åŸºç¡€çŠ¶æ€ï¼Œè€Œ hook.memoizedState è®°å½•çš„æ˜¯ä¸Šæ¬¡æ¸²æŸ“ç»“æœçš„çŠ¶æ€ï¼‰ã€‚</li>
<li>è·å–æ›´æ–°é“¾è¡¨ï¼šä½¿ç”¨ hook.baseQueueï¼ˆå‚¨å­˜å¯èƒ½å­˜åœ¨çš„ä¸Šæ¬¡æ¸²æŸ“å› ä¼˜å…ˆçº§ä¸åŒ¹é…è€Œè¢«è·³è¿‡çš„æ›´æ–°å¯¹è±¡é“¾è¡¨ï¼‰ä¸ hook.queue.pendingï¼ˆæœ¬æ¬¡æ¸²æŸ“çš„æ–°çš„æ›´æ–°é“¾è¡¨ï¼‰åˆå¹¶ï¼Œç„¶åæŒ‰ç…§ lanes ä¼˜å…ˆçº§è¿‡æ»¤ï¼ˆå³å‡è®¾æœ¬æ¬¡æ¸²æŸ“ä¸ºé«˜ä¼˜å…ˆæ¸²æŸ“ï¼Œåˆ™è¿‡æ»¤æ‰ä¼˜å…ˆçº§ä¸åŒ¹é…çš„æ›´æ–°å¯¹è±¡ï¼‰ï¼Œå°†è¢«è¿‡æ»¤æ‰ä½†éœ€è¦ä¿ç•™çš„æ›´æ–°å¯¹è±¡é“¾è¡¨å­˜å‚¨å› baseQueue ä¸­ï¼ˆä¾›ä¸‹æ¬¡æ¸²æŸ“æ—¶ä½¿ç”¨ï¼‰ï¼Œå¾—å‡ºæœ€ç»ˆè¦æ›´æ–°çš„ update é“¾è¡¨ã€‚</li>
<li>æ ¹æ® baseState åŠæœ€ç»ˆçš„ update é“¾è¡¨ï¼Œä¾æ¬¡è®¡ç®—ï¼Œå¹¶å¾—å‡º state çš„æœ€ç»ˆå€¼ï¼Œå†™åˆ° hook.memoizedState å’Œ hook.baseState ä¸Šã€‚</li>
<li>å°†æœ€ç»ˆå€¼è¿”å›ï¼Œä¾›å‡½æ•°ç»„ä»¶ä½¿ç”¨ã€‚</li>
</ol>
<p>å¦‚ä¸‹æ˜¯ updateReducer çš„ä¼ªä»£ç ï¼Œæ—¨åœ¨æ¢³ç† updateState çš„ä¸»ä½“æµç¨‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateReducer</span>(<span class="hljs-params">
  hook,
  reducer,
  renderLane, <span class="hljs-comment">// æœ¬æ¬¡æ¸²æŸ“çš„ä¼˜å…ˆçº§ï¼ˆè½¦é“ï¼‰</span>
</span>) {
  <span class="hljs-keyword">const</span> queue = hook.<span class="hljs-property">queue</span>;

  <span class="hljs-comment">// 1) åˆå¹¶â€œå¾…å¤„ç†â€çš„ pendingï¼ˆç¯å½¢ï¼‰ä¸å†å²çš„ baseQueueï¼ˆçº¿æ€§ï¼‰</span>
  <span class="hljs-keyword">const</span> pending = queue.<span class="hljs-property">pending</span>;
  <span class="hljs-keyword">let</span> first = <span class="hljs-title function_">mergeQueuesLinear</span>(hook.<span class="hljs-property">baseQueue</span>, pending);

  <span class="hljs-comment">// æ¸…ç©º pendingï¼ˆå·²å¹¶å…¥ï¼‰</span>
  queue.<span class="hljs-property">pending</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ä»»ä½•æ›´æ–°ï¼Œç›´æ¥å¤ç”¨ä¸Šæ¬¡çš„ memoizedState</span>
  <span class="hljs-keyword">if</span> (!first) {
    <span class="hljs-keyword">return</span> hook.<span class="hljs-property">memoizedState</span>;
  }

  <span class="hljs-comment">// 2) å›æ”¾æ›´æ–°é“¾</span>
  <span class="hljs-keyword">let</span> newState = hook.<span class="hljs-property">baseState</span>;   <span class="hljs-comment">// ä» baseState èµ·ç®—</span>
  <span class="hljs-keyword">let</span> newBaseState = newState;     <span class="hljs-comment">// å¦‚æœå‘ç”Ÿâ€œè·³è¿‡â€ï¼Œä¼šæ›´æ–°å®ƒ</span>
  <span class="hljs-keyword">let</span> newBaseQueueHead = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> newBaseQueueTail = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">let</span> u = first;
  <span class="hljs-keyword">while</span> (u) {
    <span class="hljs-comment">// è®¡ç®—æœ¬æ¬¡å½“å‰æ›´æ–°å¯¹è±¡æ˜¯å¦åŒ¹é…å½“å‰æ›´æ–°ä¼˜å…ˆçº§</span>
    <span class="hljs-keyword">const</span> shouldProcess = <span class="hljs-title function_">includesLane</span>(renderLane, u.<span class="hljs-property">lane</span>);

    <span class="hljs-keyword">if</span> (shouldProcess) {
      <span class="hljs-comment">// æ»¡è¶³æœ¬æ¬¡ä¼˜å…ˆçº§ï¼šçœŸæ­£â€œåƒæ‰å¹¶è®¡ç®—â€</span>
      newState = <span class="hljs-title function_">reducer</span>(newState, u.<span class="hljs-property">action</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// ä¼˜å…ˆçº§ä¸å¤Ÿï¼šè·³è¿‡ï¼Œä½†è¦â€œå…‹éš†â€åˆ° newBaseQueueï¼Œæœªæ¥ä¿ç•™</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">clone</span>: <span class="hljs-title class_">Update</span>&lt;S&gt; = { <span class="hljs-attr">lane</span>: u.<span class="hljs-property">lane</span>, <span class="hljs-attr">action</span>: u.<span class="hljs-property">action</span>, <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span> };

      <span class="hljs-keyword">if</span> (!newBaseQueueHead) {
        newBaseQueueHead = newBaseQueueTail = clone;
        <span class="hljs-comment">// ä¸€æ—¦æœ‰è·³è¿‡ï¼Œæœªæ¥çš„å›æ”¾â€œèµ·ç‚¹â€å¿…é¡»æ›´æ–°ä¸ºå½“å‰å·²ç®—å‡ºçš„ newState</span>
        newBaseState = newState;
      } <span class="hljs-keyword">else</span> {
        newBaseQueueTail!.<span class="hljs-property">next</span> = clone;
        newBaseQueueTail = clone;
      }
    }
    <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªupdateå¯¹è±¡</span>
    u = u.<span class="hljs-property">next</span>;
  }

  <span class="hljs-comment">// 3) å†™å› hook å„å­—æ®µï¼ˆè¿™å°±æ˜¯ useState åœ¨æœ¬æ¬¡æ¸²æŸ“åçš„å¯è§ç»“æœï¼‰</span>
  hook.<span class="hljs-property">memoizedState</span> = newState;           <span class="hljs-comment">// æœ¬æ¬¡æ¸²æŸ“æœ€ç»ˆ state</span>
  hook.<span class="hljs-property">baseState</span> = newBaseState;           <span class="hljs-comment">// æœªæ¥å›æ”¾èµ·ç‚¹ï¼ˆè‹¥æ— è·³è¿‡ï¼Œç­‰äº newStateï¼‰</span>
  hook.<span class="hljs-property">baseQueue</span> = newBaseQueueHead;       <span class="hljs-comment">// æœªæ¥è¦ç»§ç»­å¤„ç†çš„â€œè·³è¿‡æ›´æ–°â€é“¾</span>
  queue.<span class="hljs-property">lastRenderedState</span> = newState;      <span class="hljs-comment">// è®°å½•ç”¨</span>

  <span class="hljs-keyword">return</span> newState;
}
</code></pre>
<h5 data-id="heading-26">useEffect</h5>
<h6 data-id="heading-27">å‡½æ•°ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ï¼š mountEffect</h6>
<p>å½“ç»„ä»¶æŒ‚è½½æ—¶ï¼ŒuseEffect çš„æœ¬ä½“æ˜¯ mountEffect å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountEffect</span>(<span class="hljs-params">
  create, <span class="hljs-comment">// useEffect ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå‰¯ä½œç”¨å‡½æ•°</span>
  deps <span class="hljs-comment">// useEffect ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾èµ–é¡¹æ•°ç»„</span>
</span>) {
  <span class="hljs-comment">// mountEffectå¯ç®€å•ç†è§£ä¸ºæ‰§è¡Œäº†mountEffectImplå‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">mountEffectImpl</span>(
    <span class="hljs-title class_">PassiveEffect</span> | <span class="hljs-title class_">PassiveStaticEffect</span>,
    <span class="hljs-title class_">HookPassive</span>,
    create,
    deps
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mountEffectImpl</span>(<span class="hljs-params">fiberFlags, hookFlags, create, deps</span>) {
  <span class="hljs-comment">// åˆ›å»ºå¹¶æŒ‚è½½hookå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">mountWorkInProgressHook</span>();
  <span class="hljs-comment">// è·å–ä¾èµ–é¡¹æ•°ç»„</span>
  <span class="hljs-keyword">const</span> nextDeps = deps === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : deps;
  currentlyRenderingFiber.<span class="hljs-property">flags</span> |= fiberFlags;
  <span class="hljs-comment">// åˆ›å»ºå¹¶æŒ‚è½½effectå¯¹è±¡</span>
  hook.<span class="hljs-property">memoizedState</span> = <span class="hljs-title function_">pushEffect</span>(
    <span class="hljs-title class_">HookHasEffect</span> | hookFlags,
    create,
    <span class="hljs-literal">undefined</span>,
    nextDeps
  );
}
</code></pre>
<p>æ­¤å‡½æ•°å…ˆè°ƒç”¨ mountWorkInProgressHook åˆ›å»ºäº†å½“å‰ hook çš„ hook å¯¹è±¡ã€‚</p>
<p>ç„¶åå°†ä¼ å…¥çš„å‰¯ä½œç”¨å‡½æ•°å’Œä¾èµ–æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™ pushEffect å‡½æ•°å¹¶è°ƒç”¨ã€‚</p>
<p>pushEffect çš„è¿”å›å€¼æ˜¯å½“å‰ useEffect çš„ effect å¯¹è±¡ï¼Œå¹¶å°†å…¶æŒ‚è½½è‡³ hook.memoizedState ä¸Šã€‚ï¼ˆä¸åŒçš„ hook çš„ memoizedState è®°å½•ç€ä¸åŒä¿¡æ¯ï¼ŒuseState è®°å½•å½“å‰ state çš„å€¼ï¼ŒuseEffect è®°å½•å½“å‰çš„ effect å¯¹è±¡ï¼‰ã€‚</p>
<p>è‡³äº pushEffect çš„å…·ä½“ä½œç”¨ï¼Œå¯ä»¥å½’çº³ä¸ºä¸¤ç‚¹ï¼š</p>
<ol>
<li>åˆ›å»º effect å¯¹è±¡ï¼ˆè®°å½•å‰¯ä½œç”¨å‡½æ•°å’Œä¾èµ–æ•°ç»„ç­‰ä¿¡æ¯ï¼‰</li>
<li>å°†å½“å‰ effect å¯¹è±¡ä½œä¸ºé“¾è¡¨èŠ‚ç‚¹ï¼ŒæŒ‚è½½åˆ° workInProgress fiber èŠ‚ç‚¹çš„ updateQueue å±æ€§çš„é“¾è¡¨ä¸Šã€‚ï¼ˆå³å½“å‰ effect å¯¹è±¡æ—¢å•ç‹¬ä¿å­˜åœ¨ hook.memoizedState ä¸Šï¼Œåˆä¼šä¸å…¶ä»– useEffect çš„ effect å¯¹è±¡ä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨çš„ fiber.updateQueue ä¸Šï¼‰</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pushEffect</span>(<span class="hljs-params">tag, create, destroy, deps</span>) {
  <span class="hljs-comment">// effect å‰¯ä½œç”¨å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">effect</span>: <span class="hljs-title class_">Effect</span> = {
    tag, <span class="hljs-comment">// æ ‡è¯† effect ç±»å‹ä¸æ˜¯å¦éœ€è¦æ‰§è¡Œ</span>
    create, <span class="hljs-comment">// å‰¯ä½œç”¨å‡½æ•°</span>
    destroy, <span class="hljs-comment">// cleanupå‡½æ•°</span>
    deps, <span class="hljs-comment">// ä¾èµ–é¡¹æ•°ç»„</span>
    <span class="hljs-attr">next</span>: (<span class="hljs-attr">null</span>: any),
  };

  <span class="hljs-comment">// è·å–å½“å‰workInProgressèŠ‚ç‚¹çš„updateQueueå±æ€§</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">componentUpdateQueue</span>: <span class="hljs-literal">null</span> | <span class="hljs-title class_">FunctionComponentUpdateQueue</span> =
    (currentlyRenderingFiber.<span class="hljs-property">updateQueue</span>: any);

  <span class="hljs-keyword">if</span> (componentUpdateQueue === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å½“fiberçš„effecté“¾è¡¨ä¸ºç©ºï¼Œåˆ™æ­¤effectæ˜¯ç¬¬ä¸€ä¸ªeffectï¼Œåˆå§‹åŒ–fiber.updateQueue</span>
    componentUpdateQueue = <span class="hljs-title function_">createFunctionComponentUpdateQueue</span>();
    currentlyRenderingFiber.<span class="hljs-property">updateQueue</span> = (<span class="hljs-attr">componentUpdateQueue</span>: any);
    componentUpdateQueue.<span class="hljs-property">lastEffect</span> = effect.<span class="hljs-property">next</span> = effect;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚å‰é¢å·²æœ‰effectï¼Œåˆ™ä½œä¸ºé“¾è¡¨èŠ‚ç‚¹æ’å…¥fiber.updateQueueä¸­</span>
    <span class="hljs-keyword">const</span> lastEffect = componentUpdateQueue.<span class="hljs-property">lastEffect</span>;
    <span class="hljs-keyword">if</span> (lastEffect === <span class="hljs-literal">null</span>) {
      componentUpdateQueue.<span class="hljs-property">lastEffect</span> = effect.<span class="hljs-property">next</span> = effect;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> firstEffect = lastEffect.<span class="hljs-property">next</span>;
      lastEffect.<span class="hljs-property">next</span> = effect;
      effect.<span class="hljs-property">next</span> = firstEffect;
      componentUpdateQueue.<span class="hljs-property">lastEffect</span> = effect;
    }
  }
  <span class="hljs-keyword">return</span> effect;
}
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ fiber.updateQueue ä¸­ï¼Œä¹Ÿæ˜¯ä»¥ç¯å½¢é“¾è¡¨çš„æ–¹å¼å­˜å‚¨ï¼Œå¹¶ä¸”å…¶ lastEffect å±æ€§æŒ‡å‘æœ€åä¸€ä¸ª effect å¯¹è±¡ã€‚<br/>
å‡å¦‚æœ‰ä¸‰ä¸ªeffectå¯¹è±¡ä¾æ¬¡åŠ å…¥ï¼Œåˆ™å®ƒä»¬çš„å‚¨å­˜ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbce0d38fc04414db38368a5c17b3c67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTFJI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639163&amp;x-signature=vKp%2BTcwwEjl8WsLVj4kcnd62lJc%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-28">å‡½æ•°ç»„ä»¶æ›´æ–°ï¼šupdateEffect</h6>
<p>åœ¨ç»„ä»¶æ›´æ–°é‡æ–°æ¸²æŸ“æ—¶ï¼ŒuseEffect çš„â€œæœ¬ä½“â€æ˜¯ updateEffect å‡½æ•°ã€‚</p>
<p>updateEffect çš„é€»è¾‘æ˜¯æ ¹æ®åˆ¤æ–­ä¾èµ–é¡¹æ•°ç»„ä¸­çš„ä¾èµ–é¡¹æ˜¯å¦æ›´æ–°ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æœ‰æ›´æ–°åˆ™ä»£è¡¨å½“å‰å‰¯ä½œç”¨æ— éœ€æ‰§è¡Œï¼Œè°ƒç”¨ pushEffect å‡½æ•°å°†åŸ effect å¯¹è±¡æŒ‚è½½åˆ° fiber.updateQueue é“¾è¡¨ä¸Šå¹¶èµ‹å€¼ç»™ hook.memoizedStateã€‚</li>
<li>å¦‚æœä¾èµ–é¡¹å‘ç”Ÿäº†æ›´æ–°ï¼Œåˆ™éœ€è¦æ›´æ–° effect å¯¹è±¡ï¼ˆä¸»è¦æ›´æ–° effect.tag å±æ€§ï¼Œå°†å…¶æ ‡è®°ä¸ºå½“å‰å‰¯ä½œç”¨éœ€è¦æ‰§è¡Œï¼‰ï¼Œç„¶åè°ƒç”¨ pushEffect å‡½æ•°æŒ‚è½½åˆ° fiber.updateQueue é“¾è¡¨ï¼Œå¹¶ä¸”æ›´æ–° hook.memoizedState å±æ€§ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateEffect</span>(<span class="hljs-params">
  create, <span class="hljs-comment">// å‰¯ä½œç”¨å‡½æ•°</span>
  deps <span class="hljs-comment">// ä¾èµ–é¡¹æ•°ç»„</span>
</span>) {
  <span class="hljs-comment">// updateEffect åªè°ƒç”¨äº†updateEffectImplå‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">updateEffectImpl</span>(<span class="hljs-title class_">PassiveEffect</span>, <span class="hljs-title class_">HookPassive</span>, create, deps);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateEffectImpl</span>(<span class="hljs-params">fiberFlags, hookFlags, create, deps</span>) {
  <span class="hljs-comment">// è·å–å½“å‰hookçš„hookå¯¹è±¡ã€‚</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">updateWorkInProgressHook</span>();
  <span class="hljs-keyword">const</span> nextDeps = deps === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : deps;
  <span class="hljs-keyword">let</span> destroy = <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">if</span> (currentHook !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> prevEffect = currentHook.<span class="hljs-property">memoizedState</span>;
    destroy = prevEffect.<span class="hljs-property">destroy</span>;
    <span class="hljs-keyword">if</span> (nextDeps !== <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// ä¾èµ–é¡¹ä¸ä¸ºç©ºï¼Œæ¯”è¾ƒä¾èµ–é¡¹æ˜¯å¦æ”¹å˜</span>
      <span class="hljs-keyword">const</span> prevDeps = prevEffect.<span class="hljs-property">deps</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">areHookInputsEqual</span>(nextDeps, prevDeps)) {
        <span class="hljs-comment">// ä¾èµ–é¡¹æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œåˆ›å»ºåŸeffectå¯¹è±¡å‰¯æœ¬</span>
        hook.<span class="hljs-property">memoizedState</span> = <span class="hljs-title function_">pushEffect</span>(hookFlags, create, destroy, nextDeps);
        <span class="hljs-keyword">return</span>;
      }
    }
  }

  currentlyRenderingFiber.<span class="hljs-property">flags</span> |= fiberFlags;
  <span class="hljs-comment">// ä¾èµ–é¡¹å‘ç”Ÿæ”¹å˜ï¼Œæ ‡è®°effect.tagä¸ºéœ€è¦æ‰§è¡Œå‰¯ä½œç”¨</span>
  hook.<span class="hljs-property">memoizedState</span> = <span class="hljs-title function_">pushEffect</span>(
    <span class="hljs-title class_">HookHasEffect</span> | hookFlags, <span class="hljs-comment">// effect.tagå‚æ•°</span>
    create,
    destroy,
    nextDeps
  );
}
</code></pre>
<p>å…¶å® mountEffect å’Œ updateEffect çš„æ‰§è¡Œæ—¶é—´åœ¨ React çš„ render é˜¶æ®µã€‚å®ƒä»¬çš„ç›®çš„åœ¨äºåˆ›å»ºã€æ›´æ–° effect å¯¹è±¡ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ° hook.memoizedState å’Œ fiber.updateQueue é“¾è¡¨ä¸Šã€‚è€Œä¸ä¼šç›´æ¥æ‰§è¡Œæ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°å’Œ cleanup å‡½æ•°ã€‚<br/>
åœ¨ commit é˜¶æ®µï¼ŒReact ä¼šéå† fiber.updateQueue é“¾è¡¨ï¼Œæ ¹æ®æ¯ä¸ª effect çš„ tag å±æ€§åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œæ¸…ç†å‡½æ•°å’Œå‰¯ä½œç”¨å‡½æ•°ã€‚ä»è€Œå®Œæˆæ•´ä¸ª useEffect çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<h2 data-id="heading-29">æ€»ç»“</h2>
<p>æœ¬æ–‡ä¸»è¦å›´ç»• Hooks æ¢³ç†äº†å¦‚ä¸‹å‡ ç‚¹çš„çŸ¥è¯†ï¼š</p>
<p>å› ä¸ºç±»ç»„ä»¶çš„ä½¿ç”¨ä¸ä¾¿åŠåŠŸèƒ½ç¼ºå¤±ï¼ŒReact å›¢é˜Ÿå¸Œæœ›æ¨å‡ºä¸€ç§æ–°ç‰¹æ€§ä¸æ— çŠ¶æ€å‡½æ•°ç»„ä»¶é…åˆä½¿ç”¨ï¼Œä»¥è¾¾åˆ°åœ¨ä¸ä½¿ç”¨ç±»ç»„ä»¶çš„æƒ…å†µä¸‹ä¹Ÿèƒ½ç¼–å†™ React åº”ç”¨çš„ç›®çš„ï¼Œäºæ˜¯ Hooks ä¾¿åº”è¿è€Œç”Ÿã€‚</p>
<p>Hooks æœ¬è´¨æ˜¯æ™®é€š JS å‡½æ•°ï¼Œåœ¨å‡½æ•°ç»„ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«è°ƒç”¨ï¼Œè€Œåœ¨ React å†…éƒ¨é€»è¾‘ä¸­ï¼Œè¿™äº› Hooks ä¼šä»¥ hook å¯¹è±¡çš„å½¢å¼å½¢æˆä¸€æ¡å•å‘é“¾è¡¨ï¼ŒæŒ‚è½½åˆ°å¯¹åº”ç»„ä»¶çš„ fiber èŠ‚ç‚¹çš„ memoizedState å±æ€§ä¸Šã€‚</p>
<p>è€Œæ¯ç§ç±»å‹çš„ Hooks æ‰€å¯¹åº”çš„ hook å¯¹è±¡ï¼Œä¼šæœ‰ä¸åŒçš„å±æ€§ï¼Œæˆ–ç›¸åŒå±æ€§ä¼šæœ‰ä¸åŒçš„ç”¨é€”ã€‚</p>
<p>åœ¨ç»„ä»¶åˆæ¬¡æ¸²æŸ“å’Œæ›´æ–°æ—¶ï¼Œæ¯ä¸ª hook ä¼šæ‰§è¡Œä¸åŒçš„â€œæœ¬ä½“â€ï¼Œä¸€èˆ¬å‘½åä¸º mountXXX å’Œ updateXXXï¼Œè€Œ React ä¼šé€šè¿‡ ReactCurrentDispatcher.current æŒ‡å‘å½“å‰æ‰€éœ€çš„â€œhooks æœ¬ä½“é›†åˆâ€ï¼Œä»ä¸­å–å‡ºæ‰€éœ€çš„â€œæœ¬ä½“å‡½æ•°â€ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ä»¥ useState å’Œ useEffect ä¸ºä¾‹å­ï¼Œæ¢è®¨äº† Hooks åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶å’Œæ›´æ–°æ—¶çš„è¡¨ç°ã€‚æ¢³ç†äº†:</p>
<ul>
<li>Hooks å¿…é¡»è¦åœ¨å‡½æ•°ç»„ä»¶é¡¶éƒ¨ä½¿ç”¨è€Œä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ç­‰è¯­å¥ä¸­ä½¿ç”¨çš„åŸå› æ˜¯ï¼Œhooks ä¼šä»¥é“¾è¡¨çš„æ–¹å¼å­˜å‚¨åœ¨ fiber.memoizedState ä¸Šï¼Œæ¯æ¬¡å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œï¼Œéƒ½ä¼šæ‹¿ç€ Hooks é“¾æ¡ä¸ Hooks ä¸€ä¸€åŒ¹é…ï¼Œå¦‚æœ Hooks åµŒå¥—åœ¨å…¶ä»–è¯­å¥ä¸­ä½¿ç”¨ï¼Œåˆ™å¯èƒ½å‡ºç°åŒ¹é…é”™ä¹±çš„é—®é¢˜ã€‚</li>
<li>hook å¯¹è±¡åˆ†åˆ«ç”± mountWorkInProgressHook å’Œ updateWorkInProgressHook æ¥åˆ›å»ºåŠè·å–ã€‚</li>
<li>å‡½æ•°ç»„ä»¶çŠ¶æ€ç®¡ç†å’Œå‰¯ä½œç”¨ç®¡ç†çš„é€»è¾‘ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 é«˜è–ªæŠ€æœ¯ä»å…¥é—¨åˆ°è¿›é˜¶ - å®æˆ˜è¯¾ç¨‹- æ…•è¯¾ç½‘]]></title>    <link>https://juejin.cn/post/7576155790165246003</link>    <guid>https://juejin.cn/post/7576155790165246003</guid>    <pubDate>2025-11-25T01:29:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155790165246003" data-draft-id="7576197876717076518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 é«˜è–ªæŠ€æœ¯ä»å…¥é—¨åˆ°è¿›é˜¶ - å®æˆ˜è¯¾ç¨‹- æ…•è¯¾ç½‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T01:29:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·105293826602"/> <meta itemprop="url" content="https://juejin.cn/user/1646390820995722"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 é«˜è–ªæŠ€æœ¯ä»å…¥é—¨åˆ°è¿›é˜¶ - å®æˆ˜è¯¾ç¨‹- æ…•è¯¾ç½‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1646390820995722/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·105293826602
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:29:22.000Z" title="Tue Nov 25 2025 01:29:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React 19 é«˜è–ªæŠ€æœ¯ä»å…¥é—¨åˆ°è¿›é˜¶ - å®æˆ˜è¯¾ç¨‹- æ…•è¯¾ç½‘---youkeit.xyz/16048/</p>
<h2 data-id="heading-0">æŠ€æœ¯è§£ç ï¼šReact 19 Compiler å¦‚ä½•è‡ªåŠ¨ä¼˜åŒ–æ€§èƒ½ï¼Ÿé«˜æ¸…åŒæ­¥è®­ç»ƒè¥ä»å…¥é—¨è®²é€</h2>
<p>åœ¨ React 19 çš„ç”Ÿæ€ä¸­ï¼Œ<strong>Compilerï¼ˆç¼–è¯‘å™¨ï¼‰</strong> Â æ˜¯é¢ è¦†æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ­¦å™¨ã€‚å®ƒé€šè¿‡é™æ€åˆ†æä»£ç ç»“æ„ï¼Œè‡ªåŠ¨æ’å…¥è®°å¿†åŒ–ï¼ˆMemoizationï¼‰é€»è¾‘ï¼Œå½»åº•è§£æ”¾å¼€å‘è€…ä»æ‰‹åŠ¨ä½¿ç”¨Â <code>useMemo</code>ã€<code>useCallback</code>Â å’ŒÂ <code>React.memo</code>Â çš„ç¹çå·¥ä½œã€‚æœ¬æ–‡å°†ç»“åˆé«˜æ¸…åŒæ­¥è®­ç»ƒè¥çš„å®æˆ˜æ¡ˆä¾‹ï¼Œä»åŸç†åˆ°ä»£ç ï¼Œæ‹†è§£ Compiler å¦‚ä½•å®ç°â€œé›¶æ‰‹åŠ¨ä¼˜åŒ–â€çš„æ€§èƒ½é£è·ƒã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ€§èƒ½ç—›ç‚¹ï¼šReact çš„â€œæ¸²æŸ“åœ°ç‹±â€</h3>
<p>åœ¨ React 18 åŠä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œå¼€å‘è€…éœ€æ‰‹åŠ¨ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“æ€§èƒ½ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>åˆ—è¡¨æ¸²æŸ“</strong>ï¼šæœªä¼˜åŒ–çš„åˆ—è¡¨ç»„ä»¶ä¼šå› çˆ¶ç»„ä»¶çŠ¶æ€æ›´æ–°è€Œå…¨é‡é‡æ¸²æŸ“ã€‚</li>
<li><strong>å¤æ‚è®¡ç®—</strong>ï¼šé«˜é¢‘è°ƒç”¨çš„è®¡ç®—å‡½æ•°ï¼ˆå¦‚è¿‡æ»¤ã€æ’åºï¼‰éœ€æ‰‹åŠ¨ç¼“å­˜ç»“æœã€‚</li>
<li><strong>å‡½æ•°ä¸å¯¹è±¡</strong>ï¼šå†…è”å‡½æ•°å’Œå¯¹è±¡æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œè§¦å‘å­ç»„ä»¶ä¸å¿…è¦çš„æ›´æ–°ã€‚</li>
</ol>
<p><strong>ä¼ ç»Ÿä¼˜åŒ–ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jsx
// éœ€æ‰‹åŠ¨è®°å¿†åŒ–çš„åˆ—è¡¨ç»„ä»¶
const <span class="hljs-attr">ExpensiveList</span> = React.memo(({ items, filterText }) =&gt; {
  const <span class="hljs-attr">filteredItems</span> = useMemo(() =&gt; 
    items.filter(<span class="hljs-attr">item</span> =&gt; item.name.includes(filterText)), 
  <span class="hljs-section">[items, filterText]</span>
  )<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">handleClick</span> = useCallback((id) =&gt; {
    console.log(`Clicked ${id}`)<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;ul&gt;
      {filteredItems.map(<span class="hljs-attr">item</span> =&gt; (
        &lt;ListItem 
          <span class="hljs-attr">key</span>={item.id} 
          <span class="hljs-attr">item</span>={item} 
          <span class="hljs-attr">onClick</span>={handleClick} 
        /&gt;
      ))}
    &lt;/ul&gt;
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">äºŒã€React 19 Compilerï¼šè‡ªåŠ¨ä¼˜åŒ–çš„é»‘ç§‘æŠ€</h3>
<p>Compiler çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡<strong>é™æ€åˆ†æï¼ˆStatic Analysisï¼‰</strong> Â å’Œ<strong>ä»£ç è½¬æ¢ï¼ˆCode Transformationï¼‰</strong> ï¼Œåœ¨æ„å»ºé˜¶æ®µè‡ªåŠ¨æ’å…¥ä¼˜åŒ–é€»è¾‘ã€‚å…¶å·¥ä½œæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<h4 data-id="heading-3">1. æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰è§£æ</h4>
<p>Compiler å°† JSX å’Œ JavaScript ä»£ç è½¬æ¢ä¸º ASTï¼Œæ·±åº¦éå†èŠ‚ç‚¹ä»¥è¯†åˆ«ï¼š</p>
<ul>
<li><strong>å˜é‡å£°æ˜</strong>ï¼šåŒºåˆ†ç¨³å®šå€¼ï¼ˆå¦‚Â <code>const</code>Â å¸¸é‡ï¼‰å’ŒåŠ¨æ€å€¼ï¼ˆå¦‚Â <code>state</code>ï¼‰ã€‚</li>
<li><strong>æ§åˆ¶æµ</strong>ï¼šåˆ†ææ¡ä»¶è¯­å¥ã€å¾ªç¯å¯¹æ¸²æŸ“çš„å½±å“ã€‚</li>
<li><strong>JSX ç»“æ„</strong>ï¼šè¿½è¸ªç»„ä»¶åµŒå¥—å…³ç³»å’Œ props ä¼ é€’è·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-4">2. ä¾èµ–å›¾æ„å»º</h4>
<p>åŸºäº AST åˆ†æï¼ŒCompiler æ„å»ºç»†ç²’åº¦ä¾èµ–å›¾ï¼ˆDependency Graphï¼‰ï¼Œæ ‡è®°å“ªäº›è®¡ç®—æˆ–æ¸²æŸ“èŠ‚ç‚¹ä¾èµ–äºåŠ¨æ€å€¼ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">jsx
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">{ items, filterText }</span>) {
  <span class="hljs-comment">// ä¾èµ–å›¾ï¼šfilterText â†’ filteredItems â†’ visibleItems â†’ ListItem</span>
  <span class="hljs-keyword">const</span> filteredItems = items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(filterText));
  <span class="hljs-keyword">const</span> visibleItems = filteredItems.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{visibleItems.map(item =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">ListItem</span> <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span> /&gt;</span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-5">3. è‡ªåŠ¨è®°å¿†åŒ–æ’å…¥</h4>
<p>Compiler æ ¹æ®ä¾èµ–å›¾ï¼Œè‡ªåŠ¨ä¸ºé«˜æˆæœ¬è®¡ç®—å’Œå­ç»„ä»¶ props æ’å…¥Â <code>useMemo</code>Â æˆ–Â <code>React.memo</code>ã€‚ä¸Šè¿°ä»£ç ç» Compiler è½¬æ¢åç­‰æ•ˆäºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jsx
function _compiled_MyComponent({ items, filterText }) {
  const $<span class="hljs-attr">memoCache</span> = useMemoCache(<span class="hljs-number">2</span>)<span class="hljs-comment">; // ç¼–è¯‘å™¨ç”Ÿæˆçš„ç¼“å­˜æ± </span>
  
  // è‡ªåŠ¨è®°å¿†åŒ–è¿‡æ»¤é€»è¾‘
  let $filteredItems<span class="hljs-comment">;</span>
  if ($memoCache<span class="hljs-section">[0]</span>?.items !== items || $memoCache<span class="hljs-section">[0]</span>?.filterText !== filterText) {
    $<span class="hljs-attr">filteredItems</span> = items.filter(item =&gt; item.name.includes(filterText))<span class="hljs-comment">;</span>
    $memoCache<span class="hljs-section">[0]</span> = { items, filterText, $filteredItems }<span class="hljs-comment">;</span>
  } else {
    $<span class="hljs-attr">filteredItems</span> = <span class="hljs-variable">$memoCache</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">$filteredItems</span><span class="hljs-comment">;</span>
  }

  // è‡ªåŠ¨è®°å¿†åŒ–åˆ‡ç‰‡é€»è¾‘
  let $visibleItems<span class="hljs-comment">;</span>
  if ($memoCache<span class="hljs-section">[1]</span>?.$filteredItems !== $filteredItems) {
    $<span class="hljs-attr">visibleItems</span> = <span class="hljs-variable">$filteredItems</span>.slice(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<span class="hljs-comment">;</span>
    $memoCache<span class="hljs-section">[1]</span> = { $filteredItems, $visibleItems }<span class="hljs-comment">;</span>
  } else {
    $<span class="hljs-attr">visibleItems</span> = <span class="hljs-variable">$memoCache</span>[<span class="hljs-number">1</span>].<span class="hljs-variable">$visibleItems</span><span class="hljs-comment">;</span>
  }

  // è‡ªåŠ¨è®°å¿†åŒ–å­ç»„ä»¶
  const <span class="hljs-attr">MemoizedListItem</span> = React.memo(({ item }) =&gt; &lt;ListItem item={item} /&gt;)<span class="hljs-comment">;</span>
  
  return (
    &lt;ul&gt;{$visibleItems.map(<span class="hljs-attr">item</span> =&gt; &lt;MemoizedListItem key={item.id} item={item} /&gt;)}&lt;/ul&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šä»æ‰‹åŠ¨ä¼˜åŒ–åˆ° Compiler é©±åŠ¨</h3>
<h4 data-id="heading-7">æ¡ˆä¾‹1ï¼šåŠ¨æ€åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</h4>
<p><strong>åœºæ™¯</strong>ï¼šæ¸²æŸ“ 10,000 æ¡æ•°æ®çš„åˆ—è¡¨ï¼Œæ”¯æŒå®æ—¶æœç´¢è¿‡æ»¤ã€‚</p>
<h5 data-id="heading-8">ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆReact 18ï¼‰ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript">jsx
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ManualOptimizedList</span>(<span class="hljs-params">{ data, searchTerm }</span>) {
  <span class="hljs-keyword">const</span> filteredData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> 
    data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(searchTerm)), 
  [data, searchTerm]
  );

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {filteredData.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">OptimizedListItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span> <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span> /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">OptimizedListItem</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ item }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
));
</code></pre>
<h5 data-id="heading-9">Compiler æ–¹æ¡ˆï¼ˆReact 19ï¼‰ï¼š</h5>
<pre><code class="hljs language-javascript" lang="javascript">jsx
<span class="hljs-keyword">function</span> <span class="hljs-title function_">AutoOptimizedList</span>(<span class="hljs-params">{ data, searchTerm }</span>) {
  <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä¼˜åŒ–è¿‡æ»¤é€»è¾‘å’Œå­ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> filteredData = data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(searchTerm));
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {filteredData.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> // ç¼–è¯‘å™¨è‡ªåŠ¨åŒ…è£¹ React.memo
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong>ï¼šCompiler æ–¹æ¡ˆæé€Ÿ 15%ï¼ˆå‡å°‘è®°å¿†åŒ–åŒ…è£…å¼€é”€ï¼‰ã€‚</li>
<li><strong>æ›´æ–°æ¸²æŸ“</strong>ï¼šCompiler æ–¹æ¡ˆæé€Ÿ 40%ï¼ˆç²¾å‡†è·³è¿‡æ— å…³èŠ‚ç‚¹è®¡ç®—ï¼‰ã€‚</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå‡å°‘ 20%ï¼ˆé¿å…å†—ä½™ç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">æ¡ˆä¾‹2ï¼šå¤æ‚è¡¨å•å¤„ç†</h4>
<p><strong>åœºæ™¯</strong>ï¼šå¤šæ­¥éª¤è¡¨å•ï¼Œæ¯æ­¥ä¾èµ–å‰åºæ•°æ®è®¡ç®—ã€‚</p>
<h5 data-id="heading-11">ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆReact 18ï¼‰ï¼š</h5>
<pre><code class="hljs language-ini" lang="ini">jsx
function ComplexForm() {
  const <span class="hljs-section">[step, setStep]</span> = useState(1)<span class="hljs-comment">;</span>
  const <span class="hljs-section">[formData, setFormData]</span> = useState({})<span class="hljs-comment">;</span>

  // æ‰‹åŠ¨è®°å¿†åŒ–è®¡ç®—é€»è¾‘
  const <span class="hljs-attr">derivedData</span> = useMemo(() =&gt; {
    if (<span class="hljs-attr">step</span> === <span class="hljs-number">1</span>) return { summary: <span class="hljs-string">"Step 1"</span> }<span class="hljs-comment">;</span>
    if (<span class="hljs-attr">step</span> === <span class="hljs-number">2</span>) return { summary: `Step <span class="hljs-number">2</span>: <span class="hljs-variable">${formData.input}</span>` }<span class="hljs-comment">;</span>
    return {}<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[step, formData]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;div&gt;
      &lt;p&gt;{derivedData.summary}&lt;/p&gt;
      {/* ...å…¶ä»–è¡¨å•å­—æ®µ */}
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h5 data-id="heading-12">Compiler æ–¹æ¡ˆï¼ˆReact 19ï¼‰ï¼š</h5>
<pre><code class="hljs language-css" lang="css">jsx
function AutoOptimizedForm() {
  const <span class="hljs-selector-attr">[step, setStep]</span> = useState(<span class="hljs-number">1</span>);
  const <span class="hljs-selector-attr">[formData, setFormData]</span> = useState({});

  // ç¼–è¯‘å™¨è‡ªåŠ¨è®°å¿†åŒ–è®¡ç®—é€»è¾‘
  const derivedData = step === <span class="hljs-number">1</span> 
    ? { <span class="hljs-selector-tag">summary</span>: <span class="hljs-string">"Step 1"</span> } 
    : step === <span class="hljs-number">2</span> 
      ? { <span class="hljs-selector-tag">summary</span>: `Step <span class="hljs-number">2</span>: ${formData<span class="hljs-selector-class">.input</span>}` } 
      : {};

  return (
    &lt;<span class="hljs-selector-tag">div</span>&gt;
      &lt;<span class="hljs-selector-tag">p</span>&gt;{derivedData<span class="hljs-selector-class">.summary</span>}&lt;/<span class="hljs-selector-tag">p</span>&gt;
      {<span class="hljs-comment">/* ...å…¶ä»–è¡¨å•å­—æ®µ */</span>}
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
  );
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>ä»£ç ç®€æ´æ€§</strong>ï¼šå‡å°‘ 50% çš„Â <code>useMemo</code>Â ä»£ç ã€‚</li>
<li><strong>ç»´æŠ¤æ€§</strong>ï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç†ä¾èµ–æ•°ç»„ã€‚</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šç¼–è¯‘å™¨é™æ€åˆ†æé¿å…é—æ¼ä¾èµ–ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">å››ã€é«˜æ¸…åŒæ­¥è®­ç»ƒè¥ï¼šä»å…¥é—¨åˆ°ç²¾é€š</h3>
<h4 data-id="heading-14">1. ç¯å¢ƒé…ç½®</h4>
<ul>
<li>
<p><strong>å®‰è£… Compiler</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">bash
npm install <span class="hljs-symbol">react@</span><span class="hljs-number">19</span> react-<span class="hljs-symbol">compiler@</span>latest
</code></pre>
</li>
<li>
<p><strong>Vite é›†æˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">js
<span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> reactCompiler <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-react-compiler'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">reactCompiler</span>()],
};
</code></pre>
</li>
<li>
<p><strong>ESLint è§„åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">js
<span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  plugins: [<span class="hljs-string">'react-compiler'</span>],
  rules: {
    <span class="hljs-string">'react-compiler/no-manual-memoization'</span>: <span class="hljs-string">'error'</span>, <span class="hljs-comment">// ç¦æ­¢æ‰‹åŠ¨ä½¿ç”¨ useMemo</span>
  },
};
</code></pre>
</li>
</ul>
<h4 data-id="heading-15">2. è°ƒè¯•æŠ€å·§</h4>
<ul>
<li>
<p><strong>å¼€å¯è°ƒè¯•æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">js
// åœ¨å¼€å‘ç¯å¢ƒä¸­æŸ¥çœ‹ç¼–è¯‘å™¨ä¼˜åŒ–æ—¥å¿—
if (import.meta.env.DEV) {
  <span class="hljs-attr">window.__REACT_COMPILER_DEBUG__</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">jsx
<span class="hljs-keyword">import</span> { usePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-compiler'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { renderCount, cacheHits } = <span class="hljs-title function_">usePerformance</span>();
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Render Count: {renderCount}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Cache Hits: {cacheHits}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-16">3. è¿ç§»æŒ‡å—</h4>
<ul>
<li>
<p><strong>æ¸è¿›å¼é‡‡ç”¨</strong>ï¼š</p>
<ol>
<li>å…ˆåœ¨éå…³é”®è·¯å¾„ç»„ä»¶ä¸­å¯ç”¨ Compilerã€‚</li>
<li>ä½¿ç”¨Â <code>/* @react-compiler ignore */</code>Â æ³¨é‡Šè·³è¿‡ç‰¹å®šç»„ä»¶çš„ä¼˜åŒ–ã€‚</li>
<li>é€æ­¥æ›¿æ¢ç°æœ‰Â <code>useMemo</code>Â å’ŒÂ <code>React.memo</code>ã€‚</li>
</ol>
</li>
<li>
<p><strong>å…¼å®¹æ€§æ³¨æ„</strong>ï¼š</p>
<ul>
<li><strong>Class ç»„ä»¶</strong>ï¼šéœ€æ‰‹åŠ¨æ·»åŠ Â <code>UNSAFE_</code>Â å‰ç¼€çš„é—ç•™æ–¹æ³•ã€‚</li>
<li><strong>åŠ¨æ€ Props</strong>ï¼šé¿å…åœ¨æ¸²æŸ“ä¸­åŠ¨æ€ç”Ÿæˆå¯¹è±¡ï¼ˆå¦‚Â <code>style={{ color: 'red' }}</code>ï¼‰ï¼Œæ”¹ç”¨ç¨³å®šå¼•ç”¨ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-17">äº”ã€æœªæ¥å±•æœ›ï¼šCompiler çš„è¿›åŒ–æ–¹å‘</h3>
<ol>
<li><strong>æ›´æ™ºèƒ½çš„ç¼“å­˜ç­–ç•¥</strong>ï¼šåŸºäºä½¿ç”¨é¢‘ç‡åŠ¨æ€è°ƒæ•´ç¼“å­˜å¤§å°ã€‚</li>
<li><strong>è·¨ç»„ä»¶ç¼“å­˜å…±äº«</strong>ï¼šå…¨å±€ç¼“å­˜é«˜é¢‘è®¡ç®—ç»“æœï¼ˆå¦‚å›½é™…åŒ–ç¿»è¯‘æ–‡æœ¬ï¼‰ã€‚</li>
<li><strong>ä¸ Server Components æ·±åº¦é›†æˆ</strong>ï¼šè‡ªåŠ¨ä¼˜åŒ–æœåŠ¡ç«¯æ¸²æŸ“é€»è¾‘ã€‚</li>
</ol>
<p>React 19 Compiler çš„å‡ºç°ï¼Œæ ‡å¿—ç€å‰ç«¯å¼€å‘ä»â€œæ‰‹åŠ¨ä¼˜åŒ–æ—¶ä»£â€è¿ˆå‘â€œæ™ºèƒ½ä¼˜åŒ–æ—¶ä»£â€ã€‚é€šè¿‡é«˜æ¸…åŒæ­¥è®­ç»ƒè¥çš„å®æˆ˜è®­ç»ƒï¼Œå¼€å‘è€…å¯ä»¥å¿«é€ŸæŒæ¡è¿™ä¸€åˆ©å™¨ï¼Œæ„å»ºå‡ºæ›´é«˜æ•ˆã€æ›´æ˜“ç»´æŠ¤çš„ React åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChainã€LangGraphã€LangSmithè¿™äº›AIå¼€å‘æ¡†æ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸€ç¯‡æ–‡ç« è§£é‡Šæ¸…æ¥š]]></title>    <link>https://juejin.cn/post/7576130618906198052</link>    <guid>https://juejin.cn/post/7576130618906198052</guid>    <pubDate>2025-11-25T02:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130618906198052" data-draft-id="7576181242582302783" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChainã€LangGraphã€LangSmithè¿™äº›AIå¼€å‘æ¡†æ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸€ç¯‡æ–‡ç« è§£é‡Šæ¸…æ¥š"/> <meta itemprop="keywords" content="LangChain,LLM,Agent"/> <meta itemprop="datePublished" content="2025-11-25T02:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChainã€LangGraphã€LangSmithè¿™äº›AIå¼€å‘æ¡†æ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸€ç¯‡æ–‡ç« è§£é‡Šæ¸…æ¥š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:33:05.000Z" title="Tue Nov 25 2025 02:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acbb6e231c454d9e8ac5ed4463523723~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=64Bt%2FuXkUB%2FpqYJEr9Q7boAFxOk%3D" alt="" loading="lazy"/></p>
<p>åœ¨AIåº”ç”¨å¼€å‘çš„æµªæ½®ä¸­ï¼Œä¸€ä¸ªé—®é¢˜å§‹ç»ˆå›°æ‰°ç€å¼€å‘è€…ï¼š<strong>é¢å¯¹ä¼—å¤šçš„AIå¼€å‘æ¡†æ¶ï¼Œå¦‚ä½•é€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ ˆï¼Ÿ</strong></p>
<p>éšç€AIæŠ€æœ¯çš„å¿«é€Ÿå‘å±•å’Œä¼ä¸šæ•°å­—åŒ–è½¬å‹çš„æ·±å…¥æ¨è¿›ï¼Œä¸€ä¸ªå…³é”®è¶‹åŠ¿æ­£åœ¨æ˜¾ç°ï¼š<strong>LangChainç”Ÿæ€ç³»ç»Ÿæ­£åœ¨ä»å•ä¸€æ¡†æ¶æ¼”è¿›ä¸ºå®Œæ•´çš„AIåº”ç”¨å¼€å‘å¹³å°ï¼Œè¿™å°†å½»åº•æ”¹å˜æˆ‘ä»¬æ„å»ºæ™ºèƒ½åº”ç”¨çš„æ–¹å¼ã€‚</strong></p>
<p>LangChainä¸å†åªæ˜¯ä¸€ä¸ªç®€å•çš„æ¡†æ¶ï¼Œè€Œæ˜¯å‘å±•æˆä¸ºåŒ…å«LangChainï¼ˆå¼€å‘æ¡†æ¶ï¼‰ã€LangGraphï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ã€LangSmithï¼ˆç›‘æ§éƒ¨ç½²ï¼‰çš„å®Œæ•´ç”Ÿæ€ç³»ç»Ÿã€‚æ¯ä¸ªç»„ä»¶éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä»·å€¼å’Œé€‚ç”¨åœºæ™¯ï¼Œå½¢æˆäº†ä¸€ä¸ªä»å¼€å‘åˆ°éƒ¨ç½²çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è¿™ç§ç”Ÿæ€åŒ–çš„å‘å±•æ¨¡å¼ä»£è¡¨äº†AIåº”ç”¨å¼€å‘ä»æ‰‹å·¥ä½œåŠå‘å·¥ä¸šåŒ–ç”Ÿäº§çš„æ ¹æœ¬æ€§è½¬å˜ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ ‡å‡†åŒ–çš„å·¥å…·é“¾å’Œæœ€ä½³å®è·µã€‚</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥è¿™ä¸ªAIå¼€å‘æ¡†æ¶çš„"ä¸‰å›½æ¼”ä¹‰"ï¼å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">PART 01 LangChainç”Ÿæ€çš„æˆ˜ç•¥å®šä½</h2>
<h3 data-id="heading-1">AIåº”ç”¨å¼€å‘çš„æ ¸å¿ƒç—›ç‚¹</h3>
<p>è¦ç†è§£LangChainç”Ÿæ€ç³»ç»Ÿçš„ä»·å€¼ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®¤æ¸…AIåº”ç”¨å¼€å‘é¢ä¸´çš„æ ¹æœ¬æŒ‘æˆ˜ã€‚</p>
<p>ä¼ ç»ŸAIå¼€å‘é¢ä¸´å››å¤§æ ¸å¿ƒå›°å¢ƒã€‚å¤æ‚æ€§æŒ‘æˆ˜è¡¨ç°åœ¨å¤§è¯­è¨€æ¨¡å‹APIè°ƒç”¨çš„å¤æ‚æ€§ã€å¤šä¸ªAIæœåŠ¡çš„é›†æˆå’Œç¼–æ’éš¾åº¦ã€å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å®ç°å›°éš¾ä»¥åŠé”™è¯¯å¤„ç†å’Œå¼‚å¸¸ç®¡ç†çš„å¤æ‚æ€§ã€‚</p>
<p>å¯ç»´æŠ¤æ€§é—®é¢˜ä½“ç°åœ¨ä»£ç ç»“æ„æ··ä¹±éš¾ä»¥ç»´æŠ¤ã€ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯å®ç°è€¦åˆã€ç¼ºä¹æ ‡å‡†åŒ–çš„å¼€å‘æ¨¡å¼ä»¥åŠè°ƒè¯•å’Œä¼˜åŒ–å›°éš¾ã€‚</p>
<p>å¯æ‰©å±•æ€§é™åˆ¶åŒ…æ‹¬å•ä½“æ¶æ„éš¾ä»¥æ‰©å±•ã€çŠ¶æ€ç®¡ç†å¤æ‚ã€å¹¶å‘å¤„ç†èƒ½åŠ›æœ‰é™ä»¥åŠæ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–å›°éš¾ã€‚</p>
<p>ç”Ÿäº§éƒ¨ç½²æŒ‘æˆ˜æ¶µç›–ç¼ºä¹æœ‰æ•ˆçš„ç›‘æ§å·¥å…·ã€ç‰ˆæœ¬ç®¡ç†å’Œå›æ»šå›°éš¾ã€æ€§èƒ½åˆ†æå’Œä¼˜åŒ–å¤æ‚ä»¥åŠæˆæœ¬æ§åˆ¶å’Œèµ„æºç®¡ç†é—®é¢˜ã€‚</p>
<p>è¿™äº›é—®é¢˜åœ¨å®é™…é¡¹ç›®ä¸­çš„å½±å“æ˜¯å·¨å¤§çš„ã€‚å¾ˆå¤šAIé¡¹ç›®åœ¨æ¦‚å¿µéªŒè¯é˜¶æ®µè¡¨ç°è‰¯å¥½ï¼Œä½†åœ¨è§„æ¨¡åŒ–éƒ¨ç½²æ—¶å´é¢ä¸´é‡é‡å›°éš¾ï¼Œå¯¼è‡´å¤§é‡AIé¡¹ç›®æ— æ³•æˆåŠŸè½åœ°æˆ–æ— æ³•æŒç»­è¿è¥ã€‚</p>
<h3 data-id="heading-2">LangChainç”Ÿæ€ï¼šåˆ†å±‚è§£å†³æ–¹æ¡ˆ</h3>
<p>LangChainç”Ÿæ€ç³»ç»Ÿé€šè¿‡åˆ†å±‚æ¶æ„çš„æ–¹å¼ï¼Œç³»ç»Ÿæ€§åœ°è§£å†³äº†ä¼ ç»ŸAIå¼€å‘çš„æ ¸å¿ƒé—®é¢˜ã€‚è¿™ä¸ªä¸‰å±‚æ¶æ„è®¾è®¡ä½“ç°äº†æ˜ç¡®çš„èŒè´£åˆ†å·¥å’ŒååŒæœºåˆ¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a422419851144144852fac8737256e5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=eo6bFlt7Va7apE4SQvOHmHVTI7Q%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘å±‚ï¼ˆLangChainï¼‰ä¸“æ³¨äºç®€åŒ–AIåº”ç”¨çš„å¼€å‘è¿‡ç¨‹ï¼Œæä¾›æ ‡å‡†åŒ–çš„ç»„ä»¶å’Œæ¨¡å¼ï¼Œé™ä½æŠ€æœ¯é—¨æ§›å’Œå­¦ä¹ æˆæœ¬ï¼Œæ”¯æŒå¿«é€ŸåŸå‹å’Œè¿­ä»£ã€‚</p>
<p>ç¼–æ’å±‚ï¼ˆLangGraphï¼‰è´Ÿè´£å¤„ç†å¤æ‚çš„çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒå¤šæ™ºèƒ½ä½“åä½œï¼Œæä¾›å¯è§†åŒ–çš„æµç¨‹è®¾è®¡ï¼Œå®ç°é«˜çº§çš„AIå·¥ä½œæµã€‚</p>
<p>è¿è¥å±‚ï¼ˆLangSmithï¼‰æä¾›ç”Ÿäº§çº§çš„ç›‘æ§å’Œè°ƒè¯•ï¼Œæ”¯æŒæ€§èƒ½åˆ†æå’Œä¼˜åŒ–ï¼Œå®ç°ç‰ˆæœ¬ç®¡ç†å’ŒA/Bæµ‹è¯•ï¼Œæä¾›æˆæœ¬åˆ†æå’Œèµ„æºä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3">åº”ç”¨åœºæ™¯ï¼šä»ç®€å•åˆ°å¤æ‚çš„å…¨è¦†ç›–</h3>
<p>LangChainç”Ÿæ€ç³»ç»Ÿçš„åˆ†å±‚è®¾è®¡ä½¿å…¶èƒ½å¤Ÿè¦†ç›–ä»ç®€å•åˆ°å¤æ‚çš„å„ç§AIåº”ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eefce2b7996d447780e72d8308d2f4d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=TAnWoqcc3IdCkprsAwdK5a326Hk%3D" alt="" loading="lazy"/></p>
<p>ç®€å•AIåº”ç”¨é€‚åˆä½¿ç”¨LangChainï¼ŒåŒ…æ‹¬åŸºç¡€çš„é—®ç­”ç³»ç»Ÿã€æ–‡æ¡£æ‘˜è¦å’Œåˆ†æã€ç®€å•çš„å†…å®¹ç”Ÿæˆä»¥åŠå•æ­¥éª¤çš„AIä»»åŠ¡ã€‚</p>
<p>å¤æ‚AIåº”ç”¨éœ€è¦å¼•å…¥LangGraphï¼Œæ¶µç›–å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿã€å¤æ‚çš„å†³ç­–æ”¯æŒç³»ç»Ÿã€éœ€è¦çŠ¶æ€ç®¡ç†çš„å¯¹è¯ç³»ç»Ÿä»¥åŠå¤šæ­¥éª¤çš„AIå·¥ä½œæµã€‚</p>
<p>ä¼ä¸šçº§AIåº”ç”¨åˆ™éœ€è¦å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒï¼ŒåŒ…æ‹¬ç”Ÿäº§ç¯å¢ƒçš„AIæœåŠ¡ã€éœ€è¦ç›‘æ§å’Œä¼˜åŒ–çš„ç³»ç»Ÿã€å…³é”®ä¸šåŠ¡çš„AIåº”ç”¨ä»¥åŠå¤§è§„æ¨¡éƒ¨ç½²çš„AIå¹³å°ã€‚</p>
<p>è¿™ç§åˆ†å±‚çš„æ–¹æ³•è®©å¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·ç»„åˆï¼Œæ—¢é¿å…äº†è¿‡åº¦å·¥ç¨‹åŒ–ï¼Œä¹Ÿç¡®ä¿äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-4">PART 02 ä¸‰å¤§æ¡†æ¶çš„æŠ€æœ¯ç‰¹æ€§å¯¹æ¯”</h2>
<h3 data-id="heading-5">LangChainï¼šAIåº”ç”¨å¼€å‘çš„åŸºçŸ³</h3>
<p>LangChainä½œä¸ºæ•´ä¸ªç”Ÿæ€ç³»ç»Ÿçš„åŸºç¡€ï¼Œé‡‡ç”¨äº†é“¾å¼ç¼–ç¨‹æ¨¡å‹å’Œç»„ä»¶åŒ–è®¾è®¡ï¼Œä¸ºAIåº”ç”¨å¼€å‘æä¾›äº†ç›´è§‚æ˜“ç”¨çš„å¼€å‘æ¡†æ¶ã€‚</p>
<p>å…¶æ ¸å¿ƒæ¶æ„ç‰¹ç‚¹ä½“ç°åœ¨é“¾å¼ç¼–ç¨‹æ¨¡å‹ä¸Šï¼Œé€šè¿‡ç®€æ´çš„APIè®¾è®¡å®ç°å¤æ‚åŠŸèƒ½çš„ç»„åˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ounter(lineounter(lineounter(lineounter(lineounter(line
<span class="hljs-comment"># å…¸å‹çš„LangChainåº”ç”¨ç»“æ„</span>
<span class="hljs-attr">prompt</span> = PromptTemplate(...)
<span class="hljs-attr">llm</span> = OpenAI(...)
<span class="hljs-attr">chain</span> = LLMChain(llm=llm, prompt=prompt)
<span class="hljs-attr">result</span> = chain.run(input_data)
</code></pre>
<p>ç»„ä»¶åŒ–è®¾è®¡æ˜¯LangChainçš„å¦ä¸€å¤§ç‰¹è‰²ï¼ŒåŒ…æ‹¬æ¨¡æ¿åŒ–çš„æç¤ºè¯ç®¡ç†ï¼ˆPromptsï¼‰ã€å¤§è¯­è¨€æ¨¡å‹çš„ç»Ÿä¸€æ¥å£ï¼ˆLLMsï¼‰ã€ç»„ä»¶çš„é“¾å¼ç»„åˆï¼ˆChainsï¼‰ã€å¯¹è¯å†å²å’Œä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆMemoryï¼‰ä»¥åŠæ™ºèƒ½å†³ç­–å’Œå·¥å…·è°ƒç”¨ï¼ˆAgentsï¼‰ã€‚</p>
<p>LangChainçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºç®€å•ç›´è§‚çš„å¼€å‘ä½“éªŒï¼Œé“¾å¼è°ƒç”¨æ¨¡å¼æ˜“äºç†è§£ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„é¢„æ„å»ºç»„ä»¶ã€è¯¦ç»†çš„æ–‡æ¡£å’Œæ•™ç¨‹ä»¥åŠæ´»è·ƒçš„ç¤¾åŒºæ”¯æŒã€‚</p>
<p>å¿«é€Ÿå¼€å‘èƒ½åŠ›ä½“ç°åœ¨å¿«é€ŸåŸå‹æ„å»ºã€æ ‡å‡†åŒ–çš„å¼€å‘æ¨¡å¼ã€ä¸°å¯Œçš„é›†æˆé€‰é¡¹å’Œçµæ´»çš„è‡ªå®šä¹‰èƒ½åŠ›ã€‚</p>
<p>å¹¿æ³›å…¼å®¹æ€§è¡¨ç°ä¸ºæ”¯æŒå¤šç§LLMæä¾›å•†ã€é›†æˆå„ç§æ•°æ®æºã€æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼å’Œè·¨å¹³å°å…¼å®¹æ€§ã€‚</p>
<p>LangChainæœ€é€‚åˆç®€å•çš„AIåº”ç”¨å¼€å‘ã€å¿«é€ŸåŸå‹éªŒè¯ã€å­¦ä¹ å’Œæ•™è‚²é¡¹ç›®ä»¥åŠå•ä¸€ç”¨æˆ·çš„åº”ç”¨ã€‚ä½†å…¶å±€é™æ€§ä¹Ÿå¾ˆæ˜æ˜¾ï¼ŒåŒ…æ‹¬çŠ¶æ€ç®¡ç†èƒ½åŠ›æœ‰é™ã€å¤æ‚å·¥ä½œæµæ”¯æŒä¸è¶³ã€å¹¶å‘å¤„ç†èƒ½åŠ›è¾ƒå¼±ä»¥åŠç”Ÿäº§ç¯å¢ƒç›‘æ§ä¸å¤Ÿã€‚</p>
<h3 data-id="heading-6">LangGraphï¼šçŠ¶æ€ç®¡ç†çš„é©å‘½</h3>
<p>LangGraphé€šè¿‡å¼•å…¥å›¾çŠ¶æ€æ¶æ„ï¼Œå½»åº•æ”¹å˜äº†AIåº”ç”¨çš„æ‰§è¡Œæ¨¡å¼å’ŒçŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œä»£è¡¨äº†ä»çº¿æ€§å¤„ç†å‘å›¾çŠ¶æ€å¤„ç†çš„é‡å¤§æŠ€æœ¯å‡çº§ã€‚</p>
<p>ä¼ ç»Ÿé“¾å¼æ¶æ„ä¸å›¾çŠ¶æ€æ¶æ„çš„å¯¹æ¯”æ¸…æ™°åœ°å±•ç°äº†è¿™ç§é©æ–°ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4070db538b5b478196388c13c4f54142~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=H%2FFbMTtIpLwppuq5yQH8UkDaAQw%3D" alt="" loading="lazy"/></p>
<p>LangGraphçš„æŠ€æœ¯ç‰¹ç‚¹ä½“ç°åœ¨ä¸‰ä¸ªæ ¸å¿ƒæ–¹é¢ã€‚</p>
<p>çŠ¶æ€ç®¡ç†æ–¹é¢å®ç°äº†å…¨å±€çŠ¶æ€å…±äº«ã€çŠ¶æ€ç‰ˆæœ¬æ§åˆ¶ã€çŠ¶æ€æŒä¹…åŒ–ä»¥åŠçŠ¶æ€å›æ»šå’Œæ¢å¤ã€‚</p>
<p>èŠ‚ç‚¹å’Œè¾¹çš„è®¾è®¡æä¾›äº†çµæ´»çš„èŠ‚ç‚¹å®šä¹‰ã€æ¡ä»¶è¾¹å’ŒåŠ¨æ€è·¯ç”±ã€å¹¶è¡Œæ‰§è¡Œæ”¯æŒä»¥åŠå¾ªç¯å’Œé€’å½’å¤„ç†èƒ½åŠ›ã€‚</p>
<p>å¯è§†åŒ–åŠŸèƒ½åŒ…æ‹¬å›¾å½¢åŒ–çš„æµç¨‹è®¾è®¡ã€å®æ—¶æ‰§è¡ŒçŠ¶æ€ç›‘æ§ã€è°ƒè¯•å’Œé”™è¯¯è¿½è¸ªä»¥åŠæ€§èƒ½åˆ†æå’Œä¼˜åŒ–ã€‚</p>
<p>LangGraphåœ¨å¤æ‚AIåº”ç”¨ä¸­å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ï¼Œç‰¹åˆ«é€‚åˆå¤šæ­¥éª¤çš„æ¨ç†è¿‡ç¨‹ã€éœ€è¦å›æº¯å’Œé‡è¯•çš„åœºæ™¯ã€å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿä»¥åŠå¤æ‚çš„å†³ç­–æ”¯æŒæµç¨‹ã€‚</p>
<p>åœ¨çŠ¶æ€æ•æ„Ÿåº”ç”¨ä¸­ï¼ŒLangGraphèƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†é•¿æ—¶é—´çš„å¯¹è¯ç³»ç»Ÿã€éœ€è¦ä¸Šä¸‹æ–‡ä¿æŒçš„åº”ç”¨ã€å¤šç”¨æˆ·çŠ¶æ€ç®¡ç†ä»¥åŠå®æ—¶åä½œåº”ç”¨ã€‚</p>
<h3 data-id="heading-7">LangSmithï¼šç”Ÿäº§ç¯å¢ƒçš„å®ˆæŠ¤è€…</h3>
<p>LangSmithä½œä¸ºç”Ÿæ€ç³»ç»Ÿçš„è¿è¥å±‚ï¼Œä¸“æ³¨äºä¸ºAIåº”ç”¨æä¾›ä¼ä¸šçº§çš„ç›‘æ§ã€è°ƒè¯•å’Œä¼˜åŒ–èƒ½åŠ›ï¼Œç¡®ä¿AIåº”ç”¨èƒ½å¤Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šå¯é åœ°è¿è¡Œã€‚</p>
<p>å…¶æ ¸å¿ƒåŠŸèƒ½å›´ç»•ç›‘æ§ä¸ä¼˜åŒ–å±•å¼€ã€‚å®æ—¶ç›‘æ§èƒ½åŠ›æ¶µç›–åº”ç”¨æ€§èƒ½ç›‘æ§ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€é”™è¯¯ç‡å’Œå»¶è¿Ÿç»Ÿè®¡ä»¥åŠèµ„æºä½¿ç”¨æƒ…å†µè·Ÿè¸ªã€‚</p>
<p>è°ƒè¯•å·¥å…·æä¾›è¯·æ±‚é“¾è·¯è¿½è¸ªã€è¯¦ç»†çš„æ—¥å¿—åˆ†æã€æ€§èƒ½ç“¶é¢ˆè¯†åˆ«å’Œé”™è¯¯æ ¹å› åˆ†æã€‚</p>
<p>ä¼˜åŒ–å»ºè®®åŠŸèƒ½èƒ½å¤Ÿæä¾›æ€§èƒ½ä¼˜åŒ–å»ºè®®ã€æˆæœ¬ä¼˜åŒ–åˆ†æã€ç”¨æˆ·ä½“éªŒæ”¹è¿›å’Œç³»ç»Ÿæ¶æ„å»ºè®®ã€‚</p>
<p>LangSmithçš„ä¼ä¸šçº§ç‰¹æ€§ä½“ç°åœ¨ä¸‰ä¸ªå…³é”®é¢†åŸŸã€‚ç‰ˆæœ¬ç®¡ç†æ–¹é¢æ”¯æŒæ¨¡å‹ç‰ˆæœ¬æ§åˆ¶ã€é…ç½®ç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒæ”¯æŒä»¥åŠå›æ»šå’Œæ¢å¤æœºåˆ¶ã€‚</p>
<p>A/Bæµ‹è¯•åŠŸèƒ½åŒ…æ‹¬å¤šç‰ˆæœ¬å¯¹æ¯”æµ‹è¯•ã€ç”¨æˆ·åˆ†ç¾¤å®éªŒã€æ•ˆæœè¯„ä¼°å’Œåˆ†æä»¥åŠè‡ªåŠ¨åŒ–å†³ç­–æ”¯æŒã€‚</p>
<p>å®‰å…¨åˆè§„æ–¹é¢æä¾›æ•°æ®å®‰å…¨ä¿æŠ¤ã€è®¿é—®æƒé™æ§åˆ¶ã€å®¡è®¡æ—¥å¿—è®°å½•å’Œåˆè§„æ€§æ£€æŸ¥ã€‚</p>
<p>è¿™äº›åŠŸèƒ½ä½¿å¾—LangSmithæˆä¸ºAIåº”ç”¨ä»å¼€å‘ç¯å¢ƒå‘ç”Ÿäº§ç¯å¢ƒè¿ç§»çš„å…³é”®æ¡¥æ¢ï¼Œä¸ºä¼ä¸šçº§AIåº”ç”¨çš„ç¨³å®šè¿è¥æä¾›äº†å…¨é¢ä¿éšœã€‚</p>
<h3 data-id="heading-8">ä¸‰å¤§æ¡†æ¶çš„ååŒä»·å€¼</h3>
<p>ä¸‰å¤§æ¡†æ¶çš„çœŸæ­£ä»·å€¼åœ¨äºå…¶ååŒåˆä½œï¼Œå½¢æˆäº†è¦†ç›–å®Œæ•´å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„å·¥å…·é“¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e80dbc77566402fb7d86035c7ec1ee4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=NfLsQaDvTihUxebnT3PvNWaw8t8%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘é˜¶æ®µä½¿ç”¨LangChainè¿›è¡Œå¿«é€ŸåŸå‹æ„å»ºã€åŠŸèƒ½éªŒè¯å’Œæµ‹è¯•ã€åŸºç¡€æ¶æ„æ­å»ºä»¥åŠåˆæ­¥æ€§èƒ½è¯„ä¼°ã€‚</p>
<p>ä¼˜åŒ–é˜¶æ®µå¼•å…¥LangGraphå®ç°å¤æ‚é€»è¾‘ã€çŠ¶æ€ç®¡ç†ä¼˜åŒ–ã€æ€§èƒ½è°ƒä¼˜å’Œå¯æ‰©å±•æ€§æ”¹è¿›ã€‚</p>
<p>ç”Ÿäº§é˜¶æ®µé€šè¿‡LangSmithå®Œæˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€å®æ—¶ç›‘æ§å’Œå‘Šè­¦ã€æŒç»­ä¼˜åŒ–æ”¹è¿›ä»¥åŠç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°ã€‚</p>
<p>è¿™ç§åˆ†å·¥åä½œçš„æ¨¡å¼è®©æ¯ä¸ªå·¥å…·éƒ½èƒ½åœ¨å…¶æœ€æ“…é•¿çš„é¢†åŸŸå‘æŒ¥æœ€å¤§ä»·å€¼ï¼ŒåŒæ—¶ç¡®ä¿äº†æ•´ä¸ªå¼€å‘æµç¨‹çš„è¿è´¯æ€§å’Œé«˜æ•ˆæ€§ã€‚</p>
<hr/>
<h2 data-id="heading-9">PART 03 çŠ¶æ€ä¸æ•°æ®çš„æ™ºèƒ½ç®¡ç†</h2>
<h3 data-id="heading-10">LangChainçš„æ•°æ®å¤„ç†æ¨¡å¼</h3>
<p>åœ¨ä¼ ç»Ÿçš„LangChainåº”ç”¨ä¸­ï¼Œæ•°æ®å¤„ç†ç›¸å¯¹ç®€å•ä½†ä¹Ÿæœ‰æ˜æ˜¾å±€é™ã€‚</p>
<p>å…¶æ•°æ®æµæ¨¡å¼é‡‡ç”¨çº¿æ€§å¤„ç†æ–¹å¼ï¼šè¾“å…¥æ•°æ®ç»è¿‡é¢„å¤„ç†ã€LLMå¤„ç†ã€åå¤„ç†æœ€ç»ˆè¾“å‡ºç»“æœã€‚è¿™ç§çº¿æ€§æµç¨‹è™½ç„¶ç®€å•ç›´è§‚ï¼Œä½†å­˜åœ¨æ˜æ˜¾çš„æ¶æ„å±€é™ã€‚</p>
<p>å†…å­˜ç®¡ç†æ–¹é¢ï¼ŒLangChainé‡‡ç”¨ç®€å•çš„å¯¹è¯å†å²å­˜å‚¨ã€åŸºäºçª—å£çš„å†…å­˜ç®¡ç†æ–¹å¼ï¼Œä¸Šä¸‹æ–‡ä¿æŒèƒ½åŠ›æœ‰é™ï¼Œç¼ºä¹å¤æ‚çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚</p>
<p>è¿™ç§ç®€åŒ–çš„å†…å­˜ç®¡ç†åœ¨å¤„ç†å¤æ‚äº¤äº’åœºæ™¯æ—¶æš´éœ²å‡ºæ˜æ˜¾ä¸è¶³ã€‚</p>
<p>ä¸»è¦æŒ‘æˆ˜é›†ä¸­åœ¨ä¸¤ä¸ªæ–¹é¢ã€‚çŠ¶æ€ä¸¢å¤±é—®é¢˜è¡¨ç°ä¸ºé•¿å¯¹è¯ä¸­çš„ä¸Šä¸‹æ–‡ä¸¢å¤±ã€å¤šè½®äº¤äº’çš„çŠ¶æ€ä¸ä¸€è‡´ã€å¹¶å‘ç”¨æˆ·çš„çŠ¶æ€æ··æ·†ä»¥åŠé”™è¯¯æ¢å¤æ—¶çš„çŠ¶æ€é‡ç½®ã€‚</p>
<p>æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ¶‰åŠå¤šä¸ªç»„ä»¶é—´çš„æ•°æ®åŒæ­¥ã€å¼‚æ­¥å¤„ç†çš„æ•°æ®ä¸€è‡´æ€§ã€é”™è¯¯å¤„ç†æ—¶çš„æ•°æ®å®Œæ•´æ€§ä»¥åŠç‰ˆæœ¬æ›´æ–°æ—¶çš„æ•°æ®è¿ç§»ç­‰å¤æ‚åœºæ™¯ã€‚</p>
<h3 data-id="heading-11">LangGraphçš„çŠ¶æ€æ¶æ„é©æ–°</h3>
<p>LangGraphé€šè¿‡å¼•å…¥å›¾çŠ¶æ€ç®¡ç†ï¼Œå½»åº•æ”¹å˜äº†æ•°æ®çš„ç»„ç»‡å’Œå¤„ç†æ–¹å¼ã€‚å…¶çŠ¶æ€ç®¡ç†æ¶æ„é‡‡ç”¨å…¨å±€çŠ¶æ€å­˜å‚¨æ¨¡å¼ï¼Œé€šè¿‡ç»“æ„åŒ–çš„çŠ¶æ€å®šä¹‰å®ç°å¤æ‚æ•°æ®çš„ç»Ÿä¸€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># LangGraphçŠ¶æ€å®šä¹‰</span>
class GraphState(TypedDict):
<span class="hljs-section">user_input: str</span>
<span class="hljs-section">processed_data: dict</span>
<span class="hljs-section">conversation_history: list</span>
<span class="hljs-section">current_step: str</span>
<span class="hljs-section">metadata: dict</span>
</code></pre>
<p>çŠ¶æ€æ›´æ–°æœºåˆ¶é€šè¿‡æ™ºèƒ½çŠ¶æ€åˆå¹¶ã€ç‰ˆæœ¬æ§åˆ¶å’Œä¸€è‡´æ€§æ£€æŸ¥ï¼Œç¡®ä¿çŠ¶æ€å˜æ›´çš„å®‰å…¨æ€§å’Œå¯é æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># çŠ¶æ€æ›´æ–°å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">update_state</span>(<span class="hljs-params">state: GraphState, new_data: <span class="hljs-built_in">dict</span></span>) -&gt; GraphState:
<span class="hljs-comment"># æ™ºèƒ½çŠ¶æ€åˆå¹¶ã€ç‰ˆæœ¬æ§åˆ¶ã€ä¸€è‡´æ€§æ£€æŸ¥</span>
<span class="hljs-keyword">return</span> updated_state
</code></pre>
<p>LangGraphçš„é«˜çº§çŠ¶æ€ç‰¹æ€§ä½“ç°åœ¨ä¸‰ä¸ªæ ¸å¿ƒæ–¹é¢ã€‚</p>
<p>çŠ¶æ€æŒä¹…åŒ–æ”¯æŒå¤šç§å­˜å‚¨åç«¯ã€è‡ªåŠ¨çŠ¶æ€å¿«ç…§ã€å¢é‡çŠ¶æ€æ›´æ–°ä»¥åŠçŠ¶æ€å‹ç¼©å’Œä¼˜åŒ–ï¼Œç¡®ä¿çŠ¶æ€æ•°æ®çš„å¯é å­˜å‚¨å’Œé«˜æ•ˆè®¿é—®ã€‚</p>
<p>çŠ¶æ€ç‰ˆæœ¬æ§åˆ¶æä¾›çŠ¶æ€å˜æ›´å†å²è®°å½•ã€æ”¯æŒçŠ¶æ€å›æ»šã€åˆ†æ”¯çŠ¶æ€ç®¡ç†ä»¥åŠçŠ¶æ€åˆå¹¶å’Œå†²çªè§£å†³ï¼Œä¸ºå¤æ‚åº”ç”¨åœºæ™¯æä¾›äº†å¼ºå¤§çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚</p>
<p>åˆ†å¸ƒå¼çŠ¶æ€å®ç°è·¨èŠ‚ç‚¹çŠ¶æ€å…±äº«ã€çŠ¶æ€åˆ†ç‰‡å’Œè·¯ç”±ã€çŠ¶æ€å¤åˆ¶å’ŒåŒæ­¥ä»¥åŠæ•…éšœæ¢å¤å’Œå®¹é”™ï¼Œæ»¡è¶³å¤§è§„æ¨¡åˆ†å¸ƒå¼åº”ç”¨çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-12">æ•°æ®æµä¼˜åŒ–ï¼šä»ä¸²è¡Œåˆ°å¹¶è¡Œ</h3>
<p>LangGraphå®ç°äº†ä»ä¸²è¡Œåˆ°å¹¶è¡Œçš„æ•°æ®æµä¼˜åŒ–ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®å¤„ç†æ•ˆç‡å’Œç³»ç»Ÿååé‡ã€‚</p>
<p>å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œæ˜¯LangGraphçš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ï¼Œé€šè¿‡å¼‚æ­¥å¤„ç†æœºåˆ¶åŒæ—¶æ‰§è¡Œå¤šä¸ªæ•°æ®å¤„ç†ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"># å¹¶è¡Œæ•°æ®å¤„ç†
async def <span class="hljs-built_in">parallel_processing</span>(state):
tasks = [
<span class="hljs-built_in">process_text_data</span>(state),
<span class="hljs-built_in">process_image_data</span>(state),
<span class="hljs-built_in">process_metadata</span>(state)
]
results = await asyncio.<span class="hljs-built_in">gather</span>(*tasks)
return <span class="hljs-built_in">merge_results</span>(results)
</code></pre>
<p>æ™ºèƒ½æ•°æ®è·¯ç”±æœºåˆ¶åŒ…æ‹¬åŸºäºå†…å®¹çš„æ•°æ®è·¯ç”±ã€è´Ÿè½½å‡è¡¡çš„æ•°æ®åˆ†å‘ã€åŠ¨æ€è·¯ç”±ç­–ç•¥è°ƒæ•´ä»¥åŠæ•…éšœè½¬ç§»å’Œé‡è¯•æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®å¤„ç†çš„é«˜æ•ˆæ€§å’Œå¯é æ€§ã€‚</p>
<p>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥æ¶µç›–å¤šä¸ªå±‚é¢ã€‚ç¼“å­˜æœºåˆ¶é‡‡ç”¨å¤šå±‚ç¼“å­˜æ¶æ„ã€æ™ºèƒ½ç¼“å­˜ç­–ç•¥ã€ç¼“å­˜å¤±æ•ˆç®¡ç†å’Œåˆ†å¸ƒå¼ç¼“å­˜åŒæ­¥ï¼Œæœ€å¤§åŒ–æ•°æ®è®¿é—®æ•ˆç‡ã€‚</p>
<p>æ•°æ®é¢„å¤„ç†é€šè¿‡æ‰¹é‡æ•°æ®å¤„ç†ã€é¢„è®¡ç®—å’Œé¢„åŠ è½½ã€æ•°æ®å‹ç¼©å’Œä¼˜åŒ–ä»¥åŠå¼‚æ­¥æ•°æ®å‡†å¤‡ï¼Œå‡å°‘å®æ—¶å¤„ç†çš„è®¡ç®—å¼€é”€ã€‚</p>
<h3 data-id="heading-13">LangSmithçš„æ•°æ®ç›‘æ§</h3>
<p>LangSmithæä¾›å…¨é¢çš„æ•°æ®ç›‘æ§å’Œåˆ†æèƒ½åŠ›ï¼Œä¸ºAIåº”ç”¨çš„æŒç»­ä¼˜åŒ–æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<p>æ•°æ®è´¨é‡ç›‘æ§æ˜¯LangSmithçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚å®æ—¶æ•°æ®ç›‘æ§æ¶µç›–æ•°æ®æµé‡ç›‘æ§ã€æ•°æ®è´¨é‡æ£€æŸ¥ã€å¼‚å¸¸æ•°æ®æ£€æµ‹å’Œæ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡ï¼Œç¡®ä¿ç³»ç»Ÿè¿è¡ŒçŠ¶æ€çš„å®æ—¶å¯è§ã€‚</p>
<p>æ•°æ®è¡€ç¼˜è¿½è¸ªåŠŸèƒ½æä¾›æ•°æ®æ¥æºè¿½è¸ªã€å¤„ç†è¿‡ç¨‹è®°å½•ã€è¾“å‡ºç»“æœå…³è”ä»¥åŠå®Œæ•´çš„æ•°æ®é“¾è·¯åˆ†æï¼Œä¸ºé—®é¢˜æ’æŸ¥å’Œç³»ç»Ÿä¼˜åŒ–æä¾›è¯¦ç»†çš„æ•°æ®æ”¯æŒã€‚</p>
<p>æ•°æ®åˆ†æå’Œæ´å¯ŸåŠŸèƒ½å¸®åŠ©ä¼ä¸šæ·±å…¥ç†è§£ç³»ç»Ÿè¿è¡Œæƒ…å†µå’Œç”¨æˆ·è¡Œä¸ºæ¨¡å¼ã€‚ç”¨æˆ·è¡Œä¸ºåˆ†æåŒ…æ‹¬æŸ¥è¯¢æ¨¡å¼åˆ†æã€ç”¨æˆ·åå¥½è¯†åˆ«ã€ä½¿ç”¨ä¹ æƒ¯ç»Ÿè®¡å’Œæ»¡æ„åº¦è¯„ä¼°ï¼Œä¸ºäº§å“ä¼˜åŒ–æä¾›ç”¨æˆ·è§†è§’çš„æ•°æ®æ´å¯Ÿã€‚</p>
<p>ç³»ç»Ÿæ€§èƒ½åˆ†ææ¶µç›–å¤„ç†å»¶è¿Ÿåˆ†æã€èµ„æºåˆ©ç”¨ç‡ç»Ÿè®¡ã€é”™è¯¯ç‡å’ŒæˆåŠŸç‡ä»¥åŠæˆæœ¬æ•ˆç›Šåˆ†æï¼Œä¸ºç³»ç»Ÿä¼˜åŒ–å’Œèµ„æºé…ç½®æä¾›ç§‘å­¦ä¾æ®ã€‚</p>
<p>è¿™ç§æ•°æ®é©±åŠ¨çš„ä¼˜åŒ–æ–¹å¼ï¼Œè®©AIåº”ç”¨èƒ½å¤ŸåŸºäºçœŸå®çš„è¿è¡Œæ•°æ®æŒç»­æ”¹è¿›å’Œæ¼”è¿›ï¼Œå®ç°ä»è¢«åŠ¨ç»´æŠ¤å‘ä¸»åŠ¨ä¼˜åŒ–çš„è½¬å˜ã€‚</p>
<hr/>
<h2 data-id="heading-14">PART 04 ä¼ä¸šçº§éƒ¨ç½²çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-15">æŠ€æœ¯æ ˆé€‰æ‹©ç­–ç•¥</h3>
<p>åŸºäºå®é™…é¡¹ç›®ç»éªŒå’ŒæŠ€æœ¯ç‰¹æ€§åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªç³»ç»Ÿçš„æŠ€æœ¯é€‰æ‹©æ¡†æ¶æ¥æŒ‡å¯¼ä¼ä¸šçš„æŠ€æœ¯å†³ç­–ã€‚</p>
<p>é¡¹ç›®å¤æ‚åº¦è¯„ä¼°æ˜¯é€‰æ‹©æŠ€æœ¯æ ˆçš„å…³é”®ä¾æ®ã€‚ç®€å•é¡¹ç›®é€‚åˆä½¿ç”¨LangChainï¼Œå…¶ç‰¹å¾åŒ…æ‹¬å•ä¸€ç”¨æˆ·äº¤äº’ã€ç®€å•çš„ä¸šåŠ¡é€»è¾‘ã€æœ‰é™çš„çŠ¶æ€éœ€æ±‚å’Œå¿«é€ŸåŸå‹éªŒè¯éœ€æ±‚ï¼Œæ¨èæŠ€æœ¯æ ˆä¸ºLangChainåŠ OpenAI APIåŠ ç®€å•å­˜å‚¨ã€‚</p>
<p>ä¸­ç­‰å¤æ‚é¡¹ç›®éœ€è¦å¼•å…¥LangGraphï¼Œç‰¹å¾åŒ…æ‹¬å¤šç”¨æˆ·å¹¶å‘ã€å¤æ‚çš„ä¸šåŠ¡æµç¨‹ã€çŠ¶æ€ç®¡ç†éœ€æ±‚å’Œè¾ƒé«˜çš„æ€§èƒ½è¦æ±‚ï¼Œæ¨èæŠ€æœ¯æ ˆä¸ºLangChainåŠ LangGraphåŠ Redisæˆ–PostgreSQLåŠ Dockerã€‚</p>
<p>ä¼ä¸šçº§é¡¹ç›®éœ€è¦å®Œæ•´ç”Ÿæ€æ”¯æŒï¼Œç‰¹å¾åŒ…æ‹¬å¤§è§„æ¨¡ç”¨æˆ·è®¿é—®ã€å…³é”®ä¸šåŠ¡åº”ç”¨ã€ä¸¥æ ¼çš„æ€§èƒ½è¦æ±‚å’Œå®Œæ•´çš„ç›‘æ§éœ€æ±‚ï¼Œæ¨èæŠ€æœ¯æ ˆä¸ºLangChainåŠ LangGraphåŠ LangSmithåŠ KubernetesåŠ ç›‘æ§æ ˆåŠ CI/CDã€‚</p>
<h3 data-id="heading-16">æŠ€æœ¯é€‰å‹å†³ç­–æ ‘</h3>
<p>åŸºäºæŠ€æœ¯ç‰¹æ€§åˆ†æå’Œå®è·µç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªç³»ç»ŸåŒ–çš„å†³ç­–æ¡†æ¶æ¥æŒ‡å¯¼æŠ€æœ¯é€‰å‹ï¼š</p>
<pre><code class="hljs">å¼€å§‹é¡¹ç›®è¯„ä¼°
â”‚
æ˜¯å¦éœ€è¦å¤æ‚çŠ¶æ€ç®¡ç†ï¼Ÿ
â”œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
å¦ Â  Â  Â  Â  Â  æ˜¯
â”‚ Â  Â  Â  Â  Â  â”‚
ä½¿ç”¨LangChain Â   æ˜¯å¦éœ€è¦ç”Ÿäº§ç›‘æ§ï¼Ÿ
â”œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
å¦ Â  Â  Â  Â  Â  æ˜¯
â”‚ Â  Â  Â  Â  Â  â”‚
LangChain+LangGraph  å®Œæ•´ç”Ÿæ€ç³»ç»Ÿ
</code></pre>
<p>è¯¦ç»†çš„è¯„ä¼°æ ‡å‡†å¯ä»¥ä»ä¸‰ä¸ªç»´åº¦è¿›è¡Œé‡åŒ–åˆ†æã€‚</p>
<p>é¡¹ç›®è§„æ¨¡è¯„ä¼°ï¼šç”¨æˆ·æ•°é‡å°‘äº100ä½¿ç”¨LangChainï¼Œ100-1000å¼•å…¥LangGraphï¼Œè¶…è¿‡1000éœ€è¦LangSmithï¼›</p>
<p>è¯·æ±‚é‡å°äº1000/å¤©ä½¿ç”¨LangChainï¼Œ1000-10000/å¤©åŠ å…¥LangGraphï¼Œè¶…è¿‡10000/å¤©éœ€è¦å®Œæ•´ç”Ÿæ€ï¼›</p>
<p>æ•°æ®é‡å°äº1GBä½¿ç”¨LangChainï¼Œ1GB-10GBå¼•å…¥LangGraphï¼Œè¶…è¿‡10GBéœ€è¦LangSmithæ”¯æŒã€‚</p>
<p>æŠ€æœ¯å¤æ‚åº¦è¯„ä¼°ï¼šç®€å•çŠ¶æ€ç®¡ç†ä½¿ç”¨LangChainï¼Œå¤æ‚çŠ¶æ€ç®¡ç†éœ€è¦LangGraphï¼›</p>
<p>çº¿æ€§å·¥ä½œæµä½¿ç”¨LangChainï¼Œéçº¿æ€§å·¥ä½œæµéœ€è¦LangGraphï¼›</p>
<p>åŸºç¡€ç›‘æ§éœ€æ±‚ä½¿ç”¨LangChainï¼Œé«˜çº§ç›‘æ§éœ€æ±‚éœ€è¦LangSmithã€‚</p>
<hr/>
<h2 data-id="heading-17">PART 05 æ€§èƒ½å¯¹æ¯”</h2>
<h3 data-id="heading-18">æ¡†æ¶æ€§èƒ½å¯¹æ¯”</h3>
<p>åŸºäºå¤§é‡å®é™…é¡¹ç›®çš„æµ‹è¯•æ•°æ®å’Œæ€§èƒ½åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ä»å¤šä¸ªç»´åº¦å¯¹æ¯”ä¸‰ä¸ªæ¡†æ¶çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p><strong>å“åº”æ—¶é—´å¯¹æ¯”</strong></p>
<p>ä¸åŒåœºæ™¯ä¸‹çš„å“åº”æ—¶é—´è¡¨ç°å­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚ç®€å•æŸ¥è¯¢åœºæ™¯ä¸­ï¼ŒLangChainå¹³å‡å“åº”æ—¶é—´ä¸º800ms-1.2sï¼ŒLangGraphä¸º1.2s-1.8sï¼ˆåŒ…å«çŠ¶æ€ç®¡ç†å¼€é”€ï¼‰ï¼ŒLangSmithç›‘æ§å¼€é”€å°äº50mså‡ ä¹æ— å½±å“ã€‚</p>
<p>å¤æ‚æŸ¥è¯¢åœºæ™¯ä¸­ï¼ŒLangChainå¹³å‡å“åº”æ—¶é—´ä¸º2-5sï¼ˆé“¾å¼å¤„ç†ï¼‰ï¼ŒLangGraphä¸º1.5-3sï¼ˆå¹¶è¡Œå¤„ç†ä¼˜åŠ¿ï¼‰ï¼ŒLangSmithæä¾›è¯¦ç»†çš„æ€§èƒ½åˆ†ææ•°æ®ã€‚</p>
<p><strong>å¹¶å‘å¤„ç†èƒ½åŠ›å¯¹æ¯”</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70e8119aa4a24b73ae0fb51810f7c3fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764642785&amp;x-signature=VyeZ3lb43ujaWsOf2Rbrqb5FMOo%3D" alt="" loading="lazy"/></p>
<p>LangChainåœ¨å¹¶å‘å¤„ç†æ–¹é¢å­˜åœ¨æ˜æ˜¾é™åˆ¶ï¼Œæ”¯æŒç”¨æˆ·æ•°å°‘äº50ï¼Œå†…å­˜ä½¿ç”¨å‘ˆçº¿æ€§å¢é•¿ï¼ŒCPUåˆ©ç”¨ç‡ä¸º20-40%ï¼Œé‡‡ç”¨ç®€å•å†…å­˜çŠ¶æ€ç®¡ç†ã€‚</p>
<p>LangGraphå±•ç°å‡ºæ˜¾è‘—çš„å¹¶å‘ä¼˜åŠ¿ï¼Œæ”¯æŒ100-500å¹¶å‘ç”¨æˆ·ï¼Œå†…å­˜ä½¿ç”¨ç»è¿‡ä¼˜åŒ–ç®¡ç†ï¼ŒCPUåˆ©ç”¨ç‡è¾¾60-80%ï¼Œé‡‡ç”¨åˆ†å¸ƒå¼çŠ¶æ€å­˜å‚¨ã€‚</p>
<p>LangSmithä½œä¸ºç›‘æ§å±‚ï¼Œå¼€é”€æå°ï¼Œå†…å­˜å ç”¨20-50MBï¼ŒCPUå¼€é”€å°äº5%ã€‚</p>
<hr/>
<h2 data-id="heading-19">ç»“è®º</h2>
<p>é€šè¿‡å¯¹LangChainç”Ÿæ€ç³»ç»Ÿçš„å…¨é¢åˆ†æï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº†è¿™ä¸ªæŠ€æœ¯å¹³å°çš„å®Œæ•´é¢è²Œï¼š</p>
<p><strong>LangChainç”Ÿæ€ç³»ç»Ÿä¸ä»…ä»…æ˜¯ä¸‰ä¸ªç‹¬ç«‹çš„å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„AIåº”ç”¨å¼€å‘å¹³å°ï¼Œä»£è¡¨äº†AIåº”ç”¨å¼€å‘ä»æ‰‹å·¥ä½œåŠå‘å·¥ä¸šåŒ–ç”Ÿäº§çš„æ ¹æœ¬æ€§è½¬å˜ã€‚</strong></p>
<p>è¿™ç§ç”Ÿæ€ç³»ç»Ÿçš„æ·±å±‚ä»·å€¼åœ¨äºï¼š</p>
<ol>
<li><strong>ä¸“ä¸šåŒ–åˆ†å·¥</strong>ï¼šæ¯ä¸ªå·¥å…·ä¸“æ³¨äºç‰¹å®šçš„é—®é¢˜åŸŸï¼Œå‘æŒ¥æœ€å¤§ä»·å€¼</li>
<li><strong>ååŒå¢æ•ˆ</strong>ï¼šä¸‰ä¸ªå·¥å…·çš„ç»„åˆæ•ˆæœè¿œå¤§äºå•ç‹¬ä½¿ç”¨çš„æ€»å’Œ</li>
<li><strong>æ¸è¿›æ¼”è¿›</strong>ï¼šæ”¯æŒä»ç®€å•åˆ°å¤æ‚çš„å¹³æ»‘å‡çº§è·¯å¾„</li>
<li><strong>ç”Ÿæ€å®Œæ•´</strong>ï¼šè¦†ç›–äº†AIåº”ç”¨å¼€å‘çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</li>
</ol>
<p><strong>æŠ€æœ¯çš„ä»·å€¼ä¸åœ¨äºå…¶å¤æ‚ç¨‹åº¦ï¼Œè€Œåœ¨äºå…¶è§£å†³é—®é¢˜çš„æ•ˆç‡å’Œæ•ˆæœã€‚</strong></p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œå…³é”®ä¸æ˜¯æŒæ¡æ‰€æœ‰å·¥å…·çš„ç»†èŠ‚ï¼Œè€Œæ˜¯ç†è§£æ¯ä¸ªå·¥å…·çš„ä»·å€¼å®šä½ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-20">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ ECharts + ECharts-GL ç”Ÿæˆ 3D ç¯å½¢å›¾]]></title>    <link>https://juejin.cn/post/7576181242582024255</link>    <guid>https://juejin.cn/post/7576181242582024255</guid>    <pubDate>2025-11-25T01:42:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582024255" data-draft-id="7568755613876027392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ ECharts + ECharts-GL ç”Ÿæˆ 3D ç¯å½¢å›¾"/> <meta itemprop="keywords" content="å‰ç«¯,ECharts"/> <meta itemprop="datePublished" content="2025-11-25T01:42:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Danny_FD"/> <meta itemprop="url" content="https://juejin.cn/user/1788247743933225"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ ECharts + ECharts-GL ç”Ÿæˆ 3D ç¯å½¢å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1788247743933225/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Danny_FD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:42:08.000Z" title="Tue Nov 25 2025 01:42:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç³»ç»Ÿæ€»ç»“åœ¨é¡¹ç›®ä¸­ç”¨ ECharts ä¸ ECharts-GL æ‰‹å·¥ç”Ÿæˆ 3D ç¯å½¢å›¾ï¼ˆDonutï¼‰çš„å…¨è¿‡ç¨‹ï¼šä»åŸç†ã€å®ç°æ­¥éª¤ã€å…³é”®é…ç½®ï¼Œåˆ°å¸¸è§å‘ä½ä¸è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠå¯å¤ç”¨çš„ä»£ç ç‰‡æ®µä¸ä½¿ç”¨æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆé€‰æ‹© ECharts-GL æ‰‹å·¥å®ç° 3D</h2>
<ul>
<li>åŸç”Ÿ ECharts é¥¼å›¾æ˜¯ 2Dï¼›3D éœ€è¦å€ŸåŠ© ECharts-GL çš„ <code>series.surface</code> ä¸å‚æ•°æ–¹ç¨‹è‡ªå®šä¹‰æ›²é¢å½¢çŠ¶ã€‚</li>
<li>æ‰‹å·¥å®ç°å¯ç²¾ç»†æ§åˆ¶ï¼šåˆ‡ç‰‡åšåº¦ã€å†…å¤–å¾„æ¯”ä¾‹ã€æ ‡ç­¾å¼•å¯¼çº¿ã€è§†è§’ä¸åå¤„ç†ç‰¹æ•ˆï¼ˆé«˜å…‰ã€SSAOç­‰ï¼‰ã€‚</li>
<li>å¯ä¸æ•°æ®è§„æ¨¡ã€æ€§èƒ½è¦æ±‚åšå¹³è¡¡ï¼šé€šè¿‡å‚æ•°æ­¥è¿›æ§åˆ¶ç½‘æ ¼å¯†åº¦ï¼Œé¿å…è¿‡å¤šé¢å…ƒå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼šæ•°æ®å¯è§†åŒ–å±•ç¤ºã€è¥é”€æ¼”ç¤ºã€æŠ¥å‘Šå›¾è¡¨å¯¹æ¯”ï¼›ä¸é€‚ç”¨åœºæ™¯ï¼šå¼ºäº¤äº’ä¸”éœ€è¦å¤§é‡ç‚¹å‡»é€‰æ‹©çš„å¤æ‚å›¾è¡¨ï¼ˆECharts-GL äº‹ä»¶äº¤äº’ç›¸å¯¹æœ‰é™ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¯å¢ƒä¸ä¾èµ–</h2>
<ul>
<li><code>echarts</code>ï¼šåŸºç¡€å›¾è¡¨åº“</li>
<li><code>echarts-gl</code>ï¼š3D èƒ½åŠ›ä¸æ›²é¢æ”¯æŒ</li>
<li>å¯é€‰ï¼š<code>echarts-for-react</code>ï¼ˆåœ¨ React é¡¹ç›®ä¸­ä¾¿æ·æ¸²æŸ“ï¼‰</li>
</ul>
<p>å®‰è£…ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn add echarts echarts-gl echarts-for-react
</code></pre>
<p>åœ¨ React ç»„ä»¶ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">EChartsReact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'echarts-for-react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'echarts-gl'</span>;
</code></pre>
<hr/>
<h2 data-id="heading-2">åŸç†æ¦‚è¿°ï¼šå‚æ•°æ–¹ç¨‹ç”Ÿæˆâ€œç¯å½¢åˆ‡ç‰‡â€</h2>
<p>3D ç¯å½¢å›¾çš„æ¯ä¸ªæ‰‡å½¢åˆ‡ç‰‡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šè¿‡å‚æ•°æ–¹ç¨‹æè¿°çš„æ›²é¢ã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªæ•°æ®ç‚¹è®¡ç®—å…¶åœ¨åœ†ç¯ä¸Šçš„èµ·æ­¢æ¯”ä¾‹ï¼ˆ<code>startRatio</code> / <code>endRatio</code>ï¼‰ï¼Œç„¶åç”¨å‚æ•°æ–¹ç¨‹å°†è¯¥è§’æ®µâ€œå¼¯æŠ˜â€åˆ°ç¯é¢ä¸Šã€‚</p>
<p>å…³é”®å‚æ•°ï¼š</p>
<ul>
<li><code>k</code>ï¼šç”±å†…å¤–å¾„æ¯”æ¢ç®—å¾—åˆ°çš„è¾…åŠ©å‚æ•°ï¼Œæ§åˆ¶ç¯çš„åšåº¦ï¼ˆé»˜è®¤çº¦ <code>1/3</code>ï¼‰ã€‚</li>
<li><code>h</code>ï¼šåˆ‡ç‰‡é«˜åº¦ï¼ˆåšåº¦ï¼‰ï¼Œä¸æ•°æ®å€¼æˆæ¯”ä¾‹ï¼Œé¿å…æŸé¡¹è¿‡å¤§å¯¼è‡´â€œè¶…é«˜â€ã€‚</li>
<li><code>startRatio</code> / <code>endRatio</code>ï¼šæ¯ä¸ªæ‰‡å½¢åœ¨åœ†å‘¨ä¸Šçš„èµ·æ­¢æ¯”ä¾‹ï¼Œæ¥æºäºæ•°æ®æ€»å’Œä¸å„é¡¹å€¼ã€‚</li>
</ul>
<p>æˆ‘ä»¬åœ¨ <code>getParametricEquation</code> ä¸­å°† <code>(u, v)</code> ä¸¤ä¸ªå‚æ•°æ˜ å°„åˆ°ä¸‰ç»´ç©ºé—´ <code>(x, y, z)</code>ï¼Œå¹¶æ§åˆ¶è¾¹ç•Œï¼ˆåŒºé—´å¤–ä½¿ç”¨è¾¹ç¼˜è§’åº¦ï¼‰ï¼Œä»è€Œå½¢æˆé¥¼å›¾æ‰‡å½¢æ®µçš„ç«‹ä½“æ›²é¢ã€‚</p>
<hr/>
<h2 data-id="heading-3">å®ç°æ­¥éª¤ï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰</h2>
<ol>
<li>è®¡ç®—æ¯”ä¾‹ä¸åšåº¦</li>
</ol>
<ul>
<li>ç´¯åŠ æ•°æ®å¾—åˆ° <code>sumValue</code>ï¼Œä¸ºæ¯ä¸ªæ•°æ®è®¡ç®— <code>startRatio</code> / <code>endRatio</code>ã€‚</li>
<li>å–æ•°æ®æœ€å¤§å€¼ä½œä¸ºåŸºå‡†ï¼ŒæŒ‰æ¯”ä¾‹å°†å€¼æ˜ å°„ä¸ºé«˜åº¦ <code>h</code>ï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">heightFromVal</span> = (<span class="hljs-params">v: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!maxValue || maxValue &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> minH;
  <span class="hljs-keyword">const</span> ratio = v / maxValue;
  <span class="hljs-keyword">return</span> minH + (maxH - minH) * ratio;
};
</code></pre>
<ol start="2">
<li>ä¸ºæ¯ä¸ªæ•°æ®æ„é€  <code>series.surface</code></li>
</ol>
<ul>
<li><code>type: 'surface'</code>ã€<code>parametric: true</code>ï¼Œè®¾ç½® <code>parametricEquation</code> ä¸ºæ›²é¢æ–¹ç¨‹ã€‚</li>
<li>å°†é¢œè‰²ä¸é€æ˜åº¦é€šè¿‡ <code>itemStyle.color</code> / <code>itemStyle.opacity</code> ä¼ å…¥ï¼ˆä¸ 3D è§†è§‰ä¿æŒä¸€è‡´ï¼‰ã€‚</li>
</ul>
<ol start="3">
<li>æ ‡ç­¾ä¸å¼•å¯¼çº¿ï¼ˆ3Dç‰ˆæœ¬ï¼‰</li>
</ol>
<ul>
<li>ä½¿ç”¨ä¸¤æ¡ <code>line3D</code> + ä¸€ä¸ª <code>scatter3D</code>ï¼ˆæ–‡æœ¬ï¼‰æ„æˆâ€œå¼•å¯¼çº¿ + æ ‡ç­¾â€ã€‚</li>
<li>æ–‡æœ¬é€šè¿‡ <code>scatter3D.label.formatter</code> è¾“å‡º <code>{name}\n{value}å…ƒ</code> ä¸¤è¡Œæ ·å¼ã€‚</li>
<li><code>endPosArr</code> çš„è®¡ç®—è¦è€ƒè™‘è±¡é™ï¼ˆé€šè¿‡ä¸­å¾„è§’åˆ¤æ–­æœå‘ï¼‰ï¼Œä»¥é¿å…æ–‡æœ¬ä¸çº¿æ®µç©¿æ’æ‰­æ›²ï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> flag = (midRadianInFirstOrFourthQuadrant) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> endPosArr = [
  posX * <span class="hljs-number">1.8</span> + i * <span class="hljs-number">0.1</span> * flag + (flag &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">0.5</span> : <span class="hljs-number">0</span>),
  posY * <span class="hljs-number">1.8</span> + i * <span class="hljs-number">0.1</span> * flag + (flag &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">0.5</span> : <span class="hljs-number">0</span>),
  posZ * <span class="hljs-number">2</span>,
];
</code></pre>
<ol start="4">
<li>é€æ˜â€œæ”¯æ’‘ç¯â€</li>
</ol>
<ul>
<li>é¢å¤–æ·»åŠ ä¸€ä¸ªé€æ˜ <code>surface</code>ï¼Œç”¨äºè¿‘ä¼¼å®ç°é«˜äº®/é¼ æ ‡äº¤äº’çš„æ‰¿è½½ï¼Œé¿å…ç›´æ¥ä¸æ‰‡å½¢äº¤äº’é€ æˆå¹²æ‰°ã€‚</li>
</ul>
<ol start="5">
<li>åœºæ™¯é…ç½®</li>
</ol>
<ul>
<li><code>grid3D</code> æ§åˆ¶è§†è§’ä¸åå¤„ç†ï¼šå¼€å¯ <code>postEffect.bloom</code>ã€<code>SSAO</code> å¢å¼ºè´¨æ„Ÿï¼ŒåŒæ—¶åˆç†è®¾ç½® <code>viewControl</code> çš„æ—‹è½¬/ç¼©æ”¾çµæ•åº¦ï¼ˆå¤§å¤šæ•°å±•ç¤ºåœºæ™¯ç¦ç”¨äº¤äº’ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">å®Œæ•´ç¤ºä¾‹ï¼ˆç²¾ç®€ç‰ˆï¼‰</h2>
<p>æºè‡ªé¡¹ç›®æ–‡ä»¶ <code>Pie3DChart.tsx</code>ï¼Œä¿ç•™æ ¸å¿ƒé€»è¾‘å¹¶åšå°‘é‡æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">EChartsReact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'echarts-for-react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'echarts-gl'</span>;

<span class="hljs-comment">// æ”¯æŒé€šè¿‡ props ä¼ å…¥åˆ‡ç‰‡é«˜åº¦èŒƒå›´ï¼Œé»˜è®¤ [8, 20]</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Pie3DChart</span> = (<span class="hljs-params">{ dataList, sliceHeightRange = [<span class="hljs-number">8</span>, <span class="hljs-number">20</span>] }</span>) =&gt; {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getParametricEquation</span>(<span class="hljs-params">startRatio, endRatio, isSelected, isHovered, k, h</span>) {
    <span class="hljs-keyword">const</span> midRatio = (startRatio + endRatio) / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> startRadian = startRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> endRadian = endRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> midRadian = midRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (startRatio === <span class="hljs-number">0</span> &amp;&amp; endRatio === <span class="hljs-number">1</span>) isSelected = <span class="hljs-literal">false</span>;
    k = <span class="hljs-keyword">typeof</span> k !== <span class="hljs-string">'undefined'</span> ? k : <span class="hljs-number">1</span> / <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> offsetX = isSelected ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(midRadian) * <span class="hljs-number">0.1</span> : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> offsetY = isSelected ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(midRadian) * <span class="hljs-number">0.1</span> : <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> hoverRate = isHovered ? <span class="hljs-number">1.05</span> : <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">u</span>: { <span class="hljs-attr">min</span>: -<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>, <span class="hljs-attr">max</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">3</span>, <span class="hljs-attr">step</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">32</span> },
      <span class="hljs-attr">v</span>: { <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>, <span class="hljs-attr">step</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">20</span> },
      <span class="hljs-title function_">x</span>(<span class="hljs-params">u, v</span>) {
        <span class="hljs-keyword">if</span> (u &lt; startRadian) <span class="hljs-keyword">return</span> offsetX + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(startRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
        <span class="hljs-keyword">if</span> (u &gt; endRadian) <span class="hljs-keyword">return</span> offsetX + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(endRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
        <span class="hljs-keyword">return</span> offsetX + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(u) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
      },
      <span class="hljs-title function_">y</span>(<span class="hljs-params">u, v</span>) {
        <span class="hljs-keyword">if</span> (u &lt; startRadian) <span class="hljs-keyword">return</span> offsetY + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(startRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
        <span class="hljs-keyword">if</span> (u &gt; endRadian) <span class="hljs-keyword">return</span> offsetY + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(endRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
        <span class="hljs-keyword">return</span> offsetY + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(u) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(v) * k) * hoverRate;
      },
      <span class="hljs-title function_">z</span>(<span class="hljs-params">u, v</span>) {
        <span class="hljs-keyword">if</span> (u &lt; -<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">0.5</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(u);
        <span class="hljs-keyword">if</span> (u &gt; <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2.5</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(u) * h * <span class="hljs-number">0.1</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(v) &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> * h * <span class="hljs-number">0.1</span> : -<span class="hljs-number">1</span>;
      },
    };
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPie3D</span>(<span class="hljs-params">pieData, internalDiameterRatio, heightRange</span>) {
    <span class="hljs-keyword">const</span> [minH, maxH] = heightRange || [<span class="hljs-number">8</span>, <span class="hljs-number">20</span>];
    <span class="hljs-keyword">let</span> series = [];
    <span class="hljs-keyword">let</span> sumValue = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> startValue = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> k = <span class="hljs-keyword">typeof</span> internalDiameterRatio !== <span class="hljs-string">'undefined'</span>
      ? (<span class="hljs-number">1</span> - internalDiameterRatio) / (<span class="hljs-number">1</span> + internalDiameterRatio)
      : <span class="hljs-number">1</span> / <span class="hljs-number">3</span>;

    <span class="hljs-keyword">const</span> maxValue = (pieData || []).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">m, d</span>) =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(m, d?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>), <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">heightFromVal</span> = (<span class="hljs-params">v</span>) =&gt; (!maxValue ? minH : minH + (maxH - minH) * (v / maxValue));

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; pieData.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> { value = <span class="hljs-number">0</span>, name, itemStyle } = pieData[i] || {};
      sumValue += value;
      <span class="hljs-keyword">const</span> seriesItem = {
        <span class="hljs-attr">name</span>: <span class="hljs-keyword">typeof</span> name === <span class="hljs-string">'undefined'</span> ? <span class="hljs-string">`series<span class="hljs-subst">${i}</span>`</span> : name,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'surface'</span>, <span class="hljs-attr">parametric</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">wireframe</span>: { <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span> }, <span class="hljs-attr">pieData</span>: pieData[i],
        <span class="hljs-attr">pieStatus</span>: { <span class="hljs-attr">selected</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">hovered</span>: <span class="hljs-literal">false</span>, k },
      };
      <span class="hljs-keyword">if</span> (itemStyle) seriesItem.<span class="hljs-property">itemStyle</span> = { <span class="hljs-attr">color</span>: itemStyle.<span class="hljs-property">color</span>, <span class="hljs-attr">opacity</span>: itemStyle.<span class="hljs-property">opacity</span> };
      series.<span class="hljs-title function_">push</span>(seriesItem);
    }

    <span class="hljs-keyword">const</span> linesSeries = [];
    <span class="hljs-keyword">let</span> endValue = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; series.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> { pieData } = series[i] || {};
      <span class="hljs-keyword">const</span> val = pieData?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>;
      endValue = startValue + val;
      series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">startRatio</span> = startValue / sumValue;
      series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">endRatio</span> = endValue / sumValue;
      series[i].<span class="hljs-property">parametricEquation</span> = <span class="hljs-title function_">getParametricEquation</span>(
        series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">startRatio</span>,
        series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">endRatio</span>,
        <span class="hljs-literal">false</span>,
        <span class="hljs-literal">false</span>,
        k,
        <span class="hljs-title function_">heightFromVal</span>(val),
      );
      startValue = endValue;

      <span class="hljs-comment">// è®¡ç®—æ ‡ç­¾ä½ç½®ä¸å¼•å¯¼çº¿ï¼ˆä¸¤æ®µçº¿ï¼‰</span>
      <span class="hljs-keyword">const</span> midRadian = (series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">endRatio</span> + series[i].<span class="hljs-property">pieData</span>.<span class="hljs-property">startRatio</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>;
      <span class="hljs-keyword">const</span> posX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(midRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>));
      <span class="hljs-keyword">const</span> posY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(midRadian) * (<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>));
      <span class="hljs-keyword">const</span> posZ = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(val + <span class="hljs-number">1</span>)) * <span class="hljs-number">0.1</span>;
      <span class="hljs-keyword">const</span> flag = (midRadian &gt;= <span class="hljs-number">0</span> &amp;&amp; midRadian &lt;= <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>) ||
                   (midRadian &gt;= (<span class="hljs-number">3</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) / <span class="hljs-number">2</span> &amp;&amp; midRadian &lt;= <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;
      <span class="hljs-keyword">const</span> color = pieData?.<span class="hljs-property">itemStyle</span>?.<span class="hljs-property">color</span>;
      <span class="hljs-keyword">const</span> endPosArr = [posX * <span class="hljs-number">1.8</span> + i * <span class="hljs-number">0.1</span> * flag + (flag &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">0.5</span> : <span class="hljs-number">0</span>),
                         posY * <span class="hljs-number">1.8</span> + i * <span class="hljs-number">0.1</span> * flag + (flag &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">0.5</span> : <span class="hljs-number">0</span>),
                         posZ * <span class="hljs-number">2</span>];

      linesSeries.<span class="hljs-title function_">push</span>(
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'line3D'</span>, <span class="hljs-attr">coordinateSystem</span>: <span class="hljs-string">'cartesian3D'</span>, <span class="hljs-attr">lineStyle</span>: { color }, <span class="hljs-attr">data</span>: [[posX, posY, posZ], endPosArr] },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'scatter3D'</span>, <span class="hljs-attr">coordinateSystem</span>: <span class="hljs-string">'cartesian3D'</span>, <span class="hljs-attr">label</span>: { <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">formatter</span>: <span class="hljs-string">'{b}'</span> }, <span class="hljs-attr">symbolSize</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">name</span>: series[i].<span class="hljs-property">name</span> + <span class="hljs-string">'\n'</span> + val + <span class="hljs-string">'å…ƒ'</span>, <span class="hljs-attr">value</span>: endPosArr }] },
      );
    }
    series = series.<span class="hljs-title function_">concat</span>(linesSeries);

    <span class="hljs-comment">// é€æ˜æ”¯æ’‘ç¯</span>
    series.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'mouseoutSeries'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'surface'</span>, <span class="hljs-attr">parametric</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">wireframe</span>: { <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span> }, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span> }, <span class="hljs-attr">parametricEquation</span>: {<span class="hljs-comment">/* ...ç•¥ */</span>} });

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">legend</span>: { <span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'circle'</span> },
      <span class="hljs-attr">tooltip</span>: { <span class="hljs-attr">trigger</span>: <span class="hljs-string">'item'</span>, <span class="hljs-attr">axisPointer</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'none'</span> } },
      <span class="hljs-attr">xAxis3D</span>: { <span class="hljs-attr">min</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1</span> }, <span class="hljs-attr">yAxis3D</span>: { <span class="hljs-attr">min</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1</span> }, <span class="hljs-attr">zAxis3D</span>: { <span class="hljs-attr">min</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1</span> },
      <span class="hljs-attr">grid3D</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">boxHeight</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">viewControl</span>: { <span class="hljs-attr">alpha</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">rotateSensitivity</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">zoomSensitivity</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">panSensitivity</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">autoRotate</span>: <span class="hljs-literal">false</span> },
        <span class="hljs-attr">postEffect</span>: { <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">bloom</span>: { <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">bloomIntensity</span>: <span class="hljs-number">0.1</span> }, <span class="hljs-attr">SSAO</span>: { <span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">quality</span>: <span class="hljs-string">'medium'</span>, <span class="hljs-attr">radius</span>: <span class="hljs-number">2</span> } },
      },
      series,
    };
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">EChartsReact</span> <span class="hljs-attr">option</span>=<span class="hljs-string">{getPie3D(dataList,</span> <span class="hljs-attr">0.71</span>, <span class="hljs-attr">sliceHeightRange</span>)} <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> '<span class="hljs-attr">100</span>%' }} /&gt;</span></span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Pie3DChart</span>;
</code></pre>
<hr/>
<h2 data-id="heading-5">ä½¿ç”¨æµç¨‹ä¸é›†æˆ</h2>
<ol>
<li>å‡†å¤‡æ•°æ®</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> dataList = [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆæœ¬'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1200</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.7</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#4FA8A4'</span> } },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'æ”¶ç›Š'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">250</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.7</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#3570af'</span> } },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'2æ”¶ç›Š'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">158</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.7</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#FDAA56'</span> } },
];
</code></pre>
<ol start="2">
<li>ç»„ä»¶è°ƒç”¨ï¼ˆReactï¼‰</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Pie3DChart</span> dataList={dataList} sliceHeightRange={[<span class="hljs-number">8</span>, <span class="hljs-number">20</span>]} /&gt;
</code></pre>
<ol start="3">
<li>é¡µé¢é›†æˆä¸ 2D æ ‡ç­¾å¯¹é½ï¼ˆå¾®ååŒåœºæ™¯ï¼‰</li>
</ol>
<p>å¾®ååŒé¡µé¢ä½¿ç”¨ 2D é¥¼å›¾çš„ <code>label/labelLine</code> æ§åˆ¶ä¸¤è¡Œæ ‡ç­¾ä¸ä¸¤æ®µå¼•å¯¼çº¿é•¿åº¦ï¼Œä¾¿äºä¸ 3D æ•ˆæœä¿æŒè§†è§‰ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-attr">label</span>: {
  <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">formatter</span>(<span class="hljs-params">params</span>) { <span class="hljs-keyword">return</span> <span class="hljs-string">`{name|<span class="hljs-subst">${params.name}</span>}\n{value|<span class="hljs-subst">${formatAmount(params.value)}</span>}`</span>; },
  <span class="hljs-attr">rich</span>: {
    <span class="hljs-attr">name</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'#6A7570'</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">18</span> },
    <span class="hljs-attr">value</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'#6A7570'</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">18</span> },
  },
},
<span class="hljs-attr">labelLine</span>: { <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">length2</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">lineStyle</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'#C2C8C5'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1</span> } },
</code></pre>
<hr/>
<h2 data-id="heading-6">æ³¨æ„äº‹é¡¹ä¸è¸©å‘å®å½•</h2>
<ol>
<li>æ€§èƒ½ä¸ç»†èŠ‚å¹³è¡¡</li>
</ol>
<ul>
<li>å‚æ•°æ–¹ç¨‹çš„æ­¥è¿›å€¼ï¼ˆ<code>u.step</code>, <code>v.step</code>ï¼‰è¶Šå°ï¼Œæ›²é¢è¶Šç²¾ç»†ä½†æ€§èƒ½è¶Šå·®ï¼›åœ¨ä¸šåŠ¡åœºæ™¯ä¸‹æ¨è <code>u.step â‰ˆ Ï€/32</code>, <code>v.step â‰ˆ Ï€/20</code>ã€‚</li>
<li>åˆ‡ç‰‡é«˜åº¦è¿‡å¤§å¯¼è‡´é®æŒ¡ï¼šé€šè¿‡ <code>sliceHeightRange</code> åšå½’ä¸€åŒ–ï¼Œé¿å…æŸä¸€é¡¹è¿‡åº¦çªå‡ºã€‚</li>
</ul>
<ol start="2">
<li>æ ‡ç­¾ä¸å¼•å¯¼çº¿ï¼ˆ3Dï¼‰</li>
</ol>
<ul>
<li>3D æ–‡æœ¬ä¸çº¿æ¡åœ¨æŸäº›è§’åº¦å¯èƒ½è¢«é®æŒ¡ï¼›å¯å¾®è°ƒ <code>endPosArr</code> çš„ <code>x/y/z</code> åŠ ä¸Šå¾®å°åç§»ï¼Œæˆ–é™ä½ <code>viewControl.alpha</code>ã€‚</li>
<li>ä¸å»ºè®®å¼€å¯è‡ªç”±æ—‹è½¬ï¼šæ—‹è½¬åæ ‡ç­¾å¯èƒ½ç©¿æ¨¡æˆ–ä¸æ›²é¢é”™ä½ã€‚</li>
</ul>
<ol start="3">
<li>é€æ˜æ”¯æ’‘ç¯ä¸ tooltip å†²çª</li>
</ol>
<ul>
<li>é€æ˜ <code>surface</code> å¯èƒ½æ‹¦æˆªäº‹ä»¶ï¼›é€šè¿‡ <code>tooltip.axisPointer.type = 'none'</code>ã€ä»¥åŠå°†é€æ˜ç¯çš„ <code>name</code> è®¾ä¸ºç‰¹æ®Šå€¼å¹¶åœ¨ <code>formatter</code> é‡Œè·³è¿‡ï¼Œå¯è§„é¿æ— æ„ä¹‰æç¤ºã€‚</li>
</ul>
<ol start="4">
<li>é¢œè‰²ä¸å›¾ä¾‹å¯¹é½</li>
</ol>
<ul>
<li>å›¾ä¾‹é¡¹æ¥æºäº <code>series.name</code>ï¼Œç¡®ä¿ä¸æ•°æ® <code>name</code> ä¸€è‡´ï¼›é¢œè‰²å»ºè®®é›†ä¸­åœ¨æ•°æ®çš„ <code>itemStyle.color</code>ï¼Œé¿å…åç»­æ··ä¹±ã€‚</li>
</ul>
<ol start="5">
<li>è§†è§’ä¸åå¤„ç†</li>
</ol>
<ul>
<li><code>postEffect.SSAO</code> åœ¨ä½ç«¯è®¾å¤‡ä¸Šå¯èƒ½äº§ç”Ÿé”¯é½¿æˆ–æ€§èƒ½é—®é¢˜ï¼›å¯åœ¨ç§»åŠ¨ç«¯é™çº§å…³é—­æˆ–é™ä½è´¨é‡çº§åˆ«ã€‚</li>
</ul>
<ol start="6">
<li>å®¹å™¨å°ºå¯¸å˜åŒ–</li>
</ol>
<ul>
<li>å®¹å™¨å¤§å°å˜åŒ–æ—¶éœ€é‡æ–°æ¸²æŸ“æˆ–è§¦å‘å›¾è¡¨ <code>resize</code>ï¼Œå¦åˆ™æ›²é¢æ¯”ä¾‹å¤±è¡¡ï¼›åœ¨ React ä¸­å¯ç›‘å¬å®¹å™¨å°ºå¯¸å˜åŒ–å¹¶è°ƒç”¨ <code>chart.resize()</code>ã€‚</li>
</ul>
<ol start="7">
<li>SSR / é¦–å±æ¸²æŸ“</li>
</ol>
<ul>
<li>ECharts-GL ä¾èµ–æµè§ˆå™¨ WebGL ç¯å¢ƒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“éœ€å»¶è¿Ÿåˆ°å®¢æˆ·ç«¯æŒ‚è½½åå†åˆå§‹åŒ–ã€‚</li>
</ul>
<ol start="8">
<li>æ•°æ®è¾¹ç•Œä¸æ•°å€¼æ ¼å¼åŒ–</li>
</ol>
<ul>
<li>å½“æ•°æ®ä¸ºç©ºæ—¶ï¼Œé¿å…æ¸²æŸ“å‡æ•°æ®ï¼›é¡µé¢ä¸Šç”¨ <code>--</code> åšå ä½ï¼ˆè§ <code>useLeftContent.tsx</code>ï¼‰ã€‚</li>
<li>é‡‘é¢æ ¼å¼ç»Ÿä¸€ç”¨åƒåˆ†ä½ä¸â€œå…ƒâ€ï¼Œå¯å¤ç”¨ <code>formatAmount</code> æ–¹æ³•ï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">formatAmount</span> = (<span class="hljs-params">n: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> v = <span class="hljs-title class_">Number</span>(n) || <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> isInt = <span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(v);
  <span class="hljs-keyword">const</span> str = (isInt ? v : v.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)).<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\B(?=(\d{3})+(?!\d))/g</span>, <span class="hljs-string">','</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${str}</span>å…ƒ`</span>;
};
</code></pre>
<hr/>
<h2 data-id="heading-7">é…ç½®é¡¹è¯´æ˜ï¼ˆç²¾é€‰ï¼‰</h2>
<p>ECharts-GLï¼ˆæœ¬é¡¹ç›®ä½¿ç”¨ï¼‰</p>
<ul>
<li><code>series.surface.parametricEquation</code>: å‚æ•°æ–¹ç¨‹ï¼Œå†³å®šæ›²é¢å½¢çŠ¶ã€‚</li>
<li><code>series.surface.itemStyle.color/opacity</code>: åˆ‡ç‰‡é¢œè‰²ä¸é€æ˜åº¦ã€‚</li>
<li><code>line3D</code> / <code>scatter3D</code>: æ ‡ç­¾å¼•å¯¼çº¿ä¸æ–‡æœ¬ï¼Œæ”¾ç½®åœ¨ä¸‰ç»´åæ ‡ç³»ä¸­ã€‚</li>
<li><code>grid3D.viewControl</code>: è§†è§’æ§åˆ¶ï¼Œå¦‚ <code>alpha</code> æ—‹è½¬è§’ã€äº¤äº’çµæ•åº¦ã€‚</li>
<li><code>grid3D.postEffect</code>: åå¤„ç†ï¼Œå« <code>bloom</code> é«˜å…‰ä¸ <code>SSAO</code> ç¯å¢ƒå…‰é®è”½ã€‚</li>
</ul>
<p>è‡ªå®šä¹‰ï¼ˆæœ¬é¡¹ç›®æ‰©å±•ï¼‰</p>
<ul>
<li><code>internalDiameterRatio</code> â†’ <code>k</code>ï¼šå†…å¤–å¾„æ¯”ä¾‹æ¢ç®—ä¸ºå‚æ•°æ–¹ç¨‹è¾…åŠ©å‚æ•°ã€‚</li>
<li><code>sliceHeightRange</code>ï¼šæ˜ å°„æ•°æ®åˆ°åˆ‡ç‰‡åšåº¦ï¼Œé¿å…é«˜åº¦å¤±è¡¡ã€‚</li>
<li><code>endPosArr</code> ç®—æ³•ï¼šè€ƒè™‘è±¡é™ä¸åç§»ï¼Œä¿è¯æ ‡ç­¾åˆ†å¸ƒå‡è¡¡ã€‚</li>
</ul>
<p>2D é¥¼å›¾æ ‡ç­¾ï¼ˆå¾®ååŒé¡µé¢ï¼‰</p>
<ul>
<li><code>label.rich</code>ï¼šä¸¤è¡Œæ–‡æœ¬æ ·å¼ï¼ˆåç§°/é‡‘é¢ï¼‰ï¼Œç»Ÿä¸€å­—å·ä¸é¢œè‰²ã€‚</li>
<li><code>labelLine.length/length2</code>ï¼šä¸¤æ®µå¼•å¯¼çº¿é•¿åº¦ï¼›<code>lineStyle</code> æ§åˆ¶é¢œè‰²ä¸å®½åº¦ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">å¸¸è§é—®é¢˜ Q&amp;A</h2>
<ol>
<li>3D è¡¨é¢æœ‰é”¯é½¿ï¼Ÿ</li>
</ol>
<ul>
<li>é™ä½ <code>u/v</code> æ­¥è¿›å¯†åº¦ã€å¼€å¯ <code>postEffect.bloom</code> å¹¶è°ƒæ•´å¼ºåº¦ï¼›åœ¨ä½ç«¯è®¾å¤‡å…³é—­ <code>SSAO</code>ã€‚</li>
</ul>
<ol start="2">
<li>æ ‡ç­¾è¢«é®æŒ¡æˆ–ç©¿æ¨¡ï¼Ÿ</li>
</ol>
<ul>
<li>å¾®è°ƒ <code>endPosArr</code>ï¼Œå‡å° <code>alpha</code> å€¼ï¼Œæˆ–å›ºå®šè§†è§’ä¸å…è®¸æ—‹è½¬ã€‚</li>
</ul>
<ol start="3">
<li>æ€§èƒ½åæ…¢ï¼Ÿ</li>
</ol>
<ul>
<li>å‡å°‘æ•°æ®é¡¹ã€é™ä½æ­¥è¿›å¯†åº¦ã€ç¦ç”¨ä¸å¿…è¦çš„åå¤„ç†ï¼›åœ¨ React ä¸­é¿å…é¢‘ç¹é‡æ¸²æŸ“ã€‚</li>
</ul>
<ol start="4">
<li>æƒ³å®ç°é«˜äº®/é€‰æ‹©ï¼Ÿ</li>
</ol>
<ul>
<li>3D ä¸‹é€‰æ‹©è¾ƒéš¾ç¨³å®šï¼Œæ¨èåœ¨ 2D é¥¼å›¾å®ç°äº¤äº’é€»è¾‘ï¼›3D ä»…ä½œè§†è§‰å±•ç¤ºã€‚</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vscode å¦‚ä½•ä¿®æ”¹æ’ä»¶é»˜è®¤å®‰è£…åœ°å€]]></title>    <link>https://juejin.cn/post/7576130918078693411</link>    <guid>https://juejin.cn/post/7576130918078693411</guid>    <pubDate>2025-11-25T02:18:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130918078693411" data-draft-id="7576130918078414883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vscode å¦‚ä½•ä¿®æ”¹æ’ä»¶é»˜è®¤å®‰è£…åœ°å€"/> <meta itemprop="keywords" content="Visual Studio Code,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T02:18:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åˆ†ä¸‰åä¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/8451825861821"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vscode å¦‚ä½•ä¿®æ”¹æ’ä»¶é»˜è®¤å®‰è£…åœ°å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/8451825861821/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åˆ†ä¸‰åä¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:18:06.000Z" title="Tue Nov 25 2025 02:18:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p><code>Vscode</code> æ’ä»¶é»˜è®¤å®‰è£…åœ¨Cç›˜ä¸Šï¼Œæ‰€æœ‰æ’ä»¶éƒ½å®‰è£…åˆ°extensionsæ–‡ä»¶ä¸‹ï¼ŒCç›˜ç©ºé—´æœ‰é™ï¼Œæ‰€ä»¥è¦æ›´æ¢æ’ä»¶é»˜è®¤å®‰è£…è·¯å¾„åœ°å€ã€‚</p>
<h3 data-id="heading-1">ç§»åŠ¨ï¼ˆå‰ªåˆ‡ï¼‰extensionsæ–‡ä»¶</h3>
<p>ç§»åŠ¨ï¼ˆå‰ªåˆ‡ï¼‰æ’ä»¶æ–‡ä»¶åˆ°è‡ªå®šä¹‰ç›®å½•ã€‚æ’ä»¶é»˜è®¤å®‰è£…è·¯å¾„åœ¨<code>C:\Users{ä¸ªäººç”¨æˆ·å}.vscode\extensions</code>ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°ã€extensionsã€æ–‡ä»¶å¤¹ï¼Œ<strong>å³é”®â†’å‰ªåˆ‡</strong>ã€‚</p>
<p><code>æ³¨æ„ï¼šè¿™é‡Œå¿…é¡»ä½¿ç”¨å‰ªåˆ‡</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59a07a0d991f41848c87cb807c9947b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764641885&amp;x-signature=VuvaUONnUNig86HbPhyO9KzqzhQ%3D" alt="image.png" loading="lazy"/>
æˆ‘è¿™é‡Œæ˜¯å·²ç»æ“ä½œå®Œçš„æ–‡ä»¶çŠ¶æ€ï¼Œæ–‡ä»¶å¤¹ä¸Šæœ‰ä¸ªå¿«æ·æ–¹å¼ç®­å¤´ã€‚
æˆ‘çš„æ–‡ä»¶å­˜æ”¾è·¯å¾„æ˜¯ï¼š<code>C:\Users\baimi\.vscode\extensions</code></p>
<p>ç²˜è´´çš„æ–‡ä»¶è·¯å¾„æ˜¯ï¼š<code>D:\run\vsCode\extensions</code>
æˆ‘è¿™è¾¹æ˜¯ä»Cç›˜æ”¾åˆ°äº†Dç›˜ï¼Œæ ¹æ®ä¸ªäººå®‰è£…è·¯å¾„è¿›è¡Œæ“ä½œã€‚</p>
<h3 data-id="heading-2">ä¸¤ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œè½¯è¿æ¥</h3>
<p>åœ¨<strong>ç®¡ç†å‘˜æƒé™</strong>ä¸‹çš„<strong>å‘½ä»¤æç¤ºç¬¦</strong>CMD
<code>å¿…é¡»æ˜¯ç®¡ç†å‘˜æ‰“å¼€æ–¹å¼ï¼Œä¸èƒ½ä½¿ç”¨Powershell</code></p>
<pre><code class="hljs language-js" lang="js">mklink /D <span class="hljs-string">"C:\Users\baimi\.vscode\extensions"</span> <span class="hljs-string">"D:\run\vsCode\extensions"</span>

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2555bef7a45f4d0293fbaab4c8da7bbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764641885&amp;x-signature=teLKgjkCSB33Y5LE%2BBwhihiYWVI%3D" alt="image.png" loading="lazy"/></p>
<p>å†æ¬¡æ‰“å¼€Cç›˜extensions æŸ¥çœ‹ç›®æ ‡è·¯å¾„å·²ç»åœ¨Dç›˜</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef1db9e2c4742bfad9dbd4cf3577742~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5YiG5LiJ5Y2B5LiD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764641885&amp;x-signature=9AyZ2ngQ6CwGFHKkMErgRNX2PgA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p>å…¶å®å°±æ˜¯åˆ›å»ºå¿«æ·æ–¹å¼ï¼ŒåŒæ—¶è¿›è¡Œä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œè½¯è¿æ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ—§æ¶æ„]]></title>    <link>https://juejin.cn/post/7576187677839228943</link>    <guid>https://juejin.cn/post/7576187677839228943</guid>    <pubDate>2025-11-25T02:37:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576187677839228943" data-draft-id="7576155790165835827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ—§æ¶æ„"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-11-25T02:37:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tamarous"/> <meta itemprop="url" content="https://juejin.cn/user/2612095357290845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ—§æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095357290845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tamarous
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:37:48.000Z" title="Tue Nov 25 2025 02:37:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ—§æ¶æ„</h2>
<h3 data-id="heading-1">ä¸€ã€æ¦‚è¿°</h3>
<p>åœ¨<a href="https://juejin.cn/post/7576197876717699110" target="_blank" title="https://juejin.cn/post/7576197876717699110">å‰æ–‡</a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† React Native çš„æ–°æ—§ä¸¤ç§æ¶æ„ï¼Œå¹¶åœ¨æ–‡ç« æœ«å°¾ä»‹ç»äº†å¦‚ä½•åœ¨è¿™ä¸¤ç§æ¶æ„ä¸­æ³¨å†Œå’Œå®ç°ä¸€ä¸ªåŸç”Ÿæ¨¡å—ã€‚ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘ä»¬å¹¶æœªå¯¹å…¶åº•å±‚åŸç†è¿›è¡Œæ·±å…¥ä»‹ç»ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†èšç„¦äºæ­¤ï¼Œæ·±å…¥æ¢è®¨ React Native æ–°æ—§æ¶æ„ä¸‹åŸç”Ÿæ¨¡å—å’Œ JavaScript è°ƒç”¨çš„åº•å±‚å®ç°ã€‚</p>
<p>æœ¬ç¯‡æ˜¯ React Native é€šä¿¡æœºåˆ¶è¯¦è§£ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä¸»è¦ä»‹ç» React Native æ—§æ¶æ„ä¸‹çš„é€šä¿¡æœºåˆ¶ã€‚å¦‚æœæƒ³è¦äº†è§£ React Native æ–°æ¶æ„ä¸‹çš„é€šä¿¡æœºåˆ¶ï¼Œè¯·ç‚¹å‡»<a href="https://link.juejin.cn?target=.%2Freact_native_message_new.md" target="_blank" title="./react_native_message_new.md" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
<h3 data-id="heading-2">äºŒã€ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å‰æ–‡ä¸­æ³¨å†ŒåŸç”Ÿæ¨¡å—çš„è¿‡ç¨‹ï¼š</p>
<p>1.<strong>å®šä¹‰åŸç”Ÿæ¨¡å—ç±»</strong></p>
<p>é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª <code>NSObject</code> å¹¶éµå¾ª <code>RCTBridgeModule</code> åè®®çš„ç±»ã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// CalcModule.h</span>
<span class="hljs-meta">#import <span class="hljs-string">&lt;React/RCTBridgeModule.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">CalcModule</span> : <span class="hljs-title">NSObject</span> &lt;<span class="hljs-title">RCTBridgeModule</span>&gt;</span>
<span class="hljs-keyword">@end</span>
</code></pre>
<p>2.<strong>å®ç°æ¨¡å—æ–¹æ³•</strong></p>
<p>åœ¨å®ç°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>RCT_EXPORT_MODULE()</code> å®æ¥å¯¼å‡ºæ¨¡å—ï¼Œå¹¶é€šè¿‡ <code>RCT_EXPORT_METHOD</code> å®æ¥å¯¼å‡ºå…·ä½“çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// CalcModule.m</span>
<span class="hljs-meta">#import <span class="hljs-string">"CalcModule.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">CalcModule</span></span>

RCT_EXPORT_MODULE()

RCT_EXPORT_METHOD(add:(<span class="hljs-built_in">NSInteger</span>)a
                  b:(<span class="hljs-built_in">NSInteger</span>)b
                  callback:(RCTResponseSenderBlock)callback)
{
    <span class="hljs-built_in">NSInteger</span> result = a + b;
    callback(@[@(result)]);
}

<span class="hljs-keyword">@end</span>
</code></pre>
<p>3.<strong>å¯¼å‡ºæ¨¡å—åˆ° JavaScript</strong></p>
<p>æœ€åï¼Œæˆ‘ä»¬åœ¨ JavaScript ç«¯ä½¿ç”¨è¿™ä¸ªåŸç”Ÿæ¨¡å—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Calculator.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NativeModules</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">const</span> { <span class="hljs-title class_">CalcModule</span> } = <span class="hljs-title class_">NativeModules</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-title class_">CalcModule</span>.<span class="hljs-title function_">add</span>(a, b, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(result);
    });
  });
};
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€æ¨¡å—æ³¨å†Œæœºåˆ¶</h3>
<p>åœ¨æ—§æ¶æ„ä¸­ï¼ŒåŸç”Ÿæ¨¡å—çš„æ³¨å†Œå’ŒåŸç”Ÿæ¨¡å—ä¸­æ–¹æ³•çš„æš´éœ²åˆ†åˆ«æ˜¯é€šè¿‡ <code>RCT_EXPORT_MODULE()</code> å’Œ <code>RCT_EXPORT_METHOD</code>å®æ¥å®ç°çš„ã€‚å°†ä¸Šè¿°ä»£ç è¿›è¡Œå®å±•å¼€ï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// RCT_EXPORT_MODULE() å®å±•å¼€</span>
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">CalcModule</span></span>

<span class="hljs-comment">// ç”Ÿæˆæ¨¡å—åæ˜ å°„å‡½æ•°</span>
+ (<span class="hljs-built_in">NSString</span> *)moduleName {
    <span class="hljs-keyword">return</span> <span class="hljs-string">@"CalcModule"</span>;
}

<span class="hljs-comment">// æ³¨å†Œæ¨¡å—åˆ° Bridge</span>
+ (<span class="hljs-type">void</span>)load {
    RCTRegisterModule(<span class="hljs-keyword">self</span>);
}

<span class="hljs-comment">// RCT_EXPORT_METHOD å®å±•å¼€</span>
- (<span class="hljs-type">void</span>)__rct_export__add_a_b_callback {
    RCTMethodInfo methodInfo = {
        .objcName = <span class="hljs-string">"add:b:callback:"</span>,
        .jsName = <span class="hljs-string">"add"</span>,
        .isSync = <span class="hljs-literal">NO</span>
    };
    RCTRegisterMethodInfo(<span class="hljs-keyword">self</span>, methodInfo);
}

<span class="hljs-comment">// åŸå§‹æ–¹æ³•å®ç°</span>
- (<span class="hljs-type">void</span>)add:(<span class="hljs-built_in">NSInteger</span>)a
          b:(<span class="hljs-built_in">NSInteger</span>)b
  callback:(RCTResponseSenderBlock)callback
{
    <span class="hljs-built_in">NSInteger</span> result = a + b;
    callback(@[@(result)]);
}

<span class="hljs-keyword">@end</span>
</code></pre>
<p><code>RCT_EXPORT_MODULE()</code> å®ä¼šåœ¨ç±»çš„ +load æ–¹æ³•ä¸­è°ƒç”¨ <code>RCTRegisterModule(class)</code> å‡½æ•°ï¼Œå°†æ¨¡å—æ³¨å†Œåˆ° Bridgeã€‚<code>RCT_EXPORT_METHOD</code> å®åˆ™ä¼šè°ƒç”¨ <code>RCTRegisterMethodInfo</code>ï¼Œå°†æ–¹æ³•ä¿¡æ¯æ³¨å†Œåˆ° Bridgeã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// RCTRegisterModule å®ç°</span>
<span class="hljs-keyword">static</span> <span class="hljs-built_in">NSMutableArray</span>&lt;Class&gt; *RCTModuleClasses;
<span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> onceToken;

<span class="hljs-type">void</span> RCTRegisterModule(Class moduleClass)
{
    <span class="hljs-built_in">dispatch_once</span>(&amp;onceToken, ^{
        RCTModuleClasses = [<span class="hljs-built_in">NSMutableArray</span> new];
    });

    <span class="hljs-comment">// ç¡®ä¿ç±»éµå¾ª RCTBridgeModule åè®®</span>
    <span class="hljs-keyword">if</span> ([moduleClass conformsToProtocol:<span class="hljs-class"><span class="hljs-keyword">@protocol</span>(<span class="hljs-title">RCTBridgeModule</span>)]) </span>{
        <span class="hljs-comment">// æ·»åŠ åˆ°å…¨å±€æ¨¡å—æ³¨å†Œè¡¨</span>
        [RCTModuleClasses addObject:moduleClass];
    }
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨æ˜¯å°†å½“å‰ module æ·»åŠ åˆ°å…¨å±€å˜é‡ RCTModuleClasses ä¸­ã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// RCTRegisterMethodInfo å®ç°</span>
<span class="hljs-keyword">static</span> <span class="hljs-built_in">NSMutableDictionary</span>&lt;<span class="hljs-built_in">NSString</span> *, <span class="hljs-built_in">NSMutableSet</span>&lt;RCTMethodInfo *&gt; *&gt; *methodsMap;
<span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> methodMapOnceToken;

<span class="hljs-type">void</span> RCTRegisterMethodInfo(Class moduleClass, RCTMethodInfo methodInfo)
{
    <span class="hljs-built_in">dispatch_once</span>(&amp;methodMapOnceToken, ^{
        methodsMap = [<span class="hljs-built_in">NSMutableDictionary</span> new];
    });

    <span class="hljs-comment">// è·å–æˆ–åˆ›å»ºæ¨¡å—çš„æ–¹æ³•é›†åˆ</span>
    <span class="hljs-built_in">NSString</span> *moduleName = [moduleClass moduleName];
    <span class="hljs-built_in">NSMutableSet</span> *methods = methodsMap[moduleName];
    <span class="hljs-keyword">if</span> (!methods) {
        methods = [<span class="hljs-built_in">NSMutableSet</span> new];
        methodsMap[moduleName] = methods;
    }

    <span class="hljs-comment">// æ·»åŠ æ–¹æ³•ä¿¡æ¯åˆ°æ–¹æ³•é›†åˆ</span>
    RCTMethodInfo *info = [[RCTMethodInfo alloc] init];
    info.objcName = methodInfo.objcName;
    info.jsName = methodInfo.jsName;
    info.isSync = methodInfo.isSync;
    [methods addObject:info];
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨æ˜¯å°†å½“å‰ module å¯¹åº”çš„æ–¹æ³•ä¿¡æ¯æ·»åŠ åˆ°å…¨å±€å˜é‡ methodsMap ä¸­ã€‚</p>
<p>å½“ RCTBridge åˆå§‹åŒ–æ—¶ï¼Œä¼šéå† <code>RCTModuleClasses</code> æ•°ç»„ï¼Œä¸ºæ¯ä¸ªæ³¨å†Œçš„æ¨¡å—ç±»åˆ›å»ºå®ä¾‹ï¼š</p>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-type">void</span>)initModules
{
    <span class="hljs-comment">// éå†å·²æ³¨å†Œçš„æ¨¡å—ç±»</span>
    <span class="hljs-keyword">for</span> (Class moduleClass <span class="hljs-keyword">in</span> RCTModuleClasses) {
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å—å®ä¾‹</span>
        <span class="hljs-type">id</span>&lt;RCTBridgeModule&gt; module = [[moduleClass alloc] init];
        
        <span class="hljs-comment">// å°†æ¨¡å—å®ä¾‹æ·»åŠ åˆ° bridge çš„æ¨¡å—è¡¨ä¸­</span>
        <span class="hljs-built_in">NSString</span> *moduleName = [moduleClass moduleName];
        _modulesByName[moduleName] = module;
    }
}
</code></pre>
<p>å½“ JavaScript ç«¯è°ƒç”¨ <code>CalcModule.add</code> æ–¹æ³•æ—¶ï¼Œä¼šå…ˆç»è¿‡ MessageQueueï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MessageQueue.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageQueue</span> {
  <span class="hljs-title function_">callNativeMethod</span>(<span class="hljs-params">moduleID, methodID, params, onFail, onSucc</span>) {
    <span class="hljs-comment">// å°†è°ƒç”¨ä¿¡æ¯æ”¾å…¥é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">enqueueNativeCall</span>(moduleID, methodID, params, onFail, onSucc);
    <span class="hljs-comment">// è§¦å‘é˜Ÿåˆ—åˆ·æ–°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushQueue</span>();
  }

  <span class="hljs-title function_">flushQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å°†é˜Ÿåˆ—ä¸­çš„è°ƒç”¨åºåˆ—åŒ–ä¸º JSON</span>
    <span class="hljs-keyword">const</span> calls = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_queue</span>);
    <span class="hljs-comment">// é€šè¿‡ Bridge å‘é€åˆ°åŸç”Ÿå±‚</span>
    <span class="hljs-variable language_">global</span>.<span class="hljs-title function_">nativeFlushQueueImmediate</span>(calls);
  }
}
</code></pre>
<p>è€Œåœ¨ React Native åˆå§‹åŒ–æ—¶ï¼Œä¼šé€šè¿‡ JavaScriptCore å¼•æ“ä¸º JavaScript ç¯å¢ƒæ³¨å…¥ä¸€ä¸ªå…¨å±€å‡½æ•° <code>nativeFlushQueueImmediate</code>ã€‚è¿™ä¸ªæ³¨å…¥è¿‡ç¨‹å‘ç”Ÿåœ¨ <code>RCTBridge</code> åˆå§‹åŒ–æ—¶ï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// RCTBridge.m</span>
- (<span class="hljs-type">void</span>)setupJSExecutor
{
    <span class="hljs-comment">// è·å– JSContext</span>
    JSContext *context = [JSContext new];
    
    <span class="hljs-comment">// æ³¨å…¥å…¨å±€å‡½æ•°</span>
    context[<span class="hljs-string">@"nativeFlushQueueImmediate"</span>] = ^(JSValue *calls) {
        <span class="hljs-comment">// å°† JSValue è½¬æ¢ä¸º NSString</span>
        <span class="hljs-built_in">NSString</span> *callsString = [calls toString];
        
        <span class="hljs-comment">// è§£æè°ƒç”¨è¯·æ±‚</span>
        <span class="hljs-built_in">NSArray</span> *requests = [<span class="hljs-built_in">NSJSONSerialization</span> JSONObjectWithData:[callsString dataUsingEncoding:<span class="hljs-built_in">NSUTF8StringEncoding</span>]
                                                         options:<span class="hljs-number">0</span>
                                                           error:<span class="hljs-literal">NULL</span>];
        
        <span class="hljs-comment">// å¤„ç†æ¯ä¸ªè°ƒç”¨è¯·æ±‚</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">NSDictionary</span> *request <span class="hljs-keyword">in</span> requests) {
            <span class="hljs-built_in">NSNumber</span> *moduleID = request[<span class="hljs-string">@"moduleID"</span>];
            <span class="hljs-built_in">NSString</span> *methodName = request[<span class="hljs-string">@"methodID"</span>];
            <span class="hljs-built_in">NSArray</span> *args = request[<span class="hljs-string">@"args"</span>];
            
            <span class="hljs-comment">// è½¬å‘åˆ° Bridge å¤„ç†</span>
            [<span class="hljs-keyword">self</span> _handleRequestNumber:moduleID
                              method:methodName
                           arguments:args];
        }
    };
}
</code></pre>
<p>å› æ­¤å½“ JavaScript è°ƒç”¨ <code>global.nativeFlushQueueImmediate(calls)</code> æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†ä¸Šè¿°æ³¨å…¥çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šå°† JavaScript ä¼ å…¥çš„è°ƒç”¨é˜Ÿåˆ—è½¬æ¢ä¸ºåŸç”Ÿæ•°æ®ç»“æ„ï¼Œç„¶åè§£æå‡ºæ¯ä¸ªè°ƒç”¨è¯·æ±‚çš„æ¨¡å— IDã€æ–¹æ³•åå’Œå‚æ•°ï¼Œæœ€ç»ˆå°†è¯·æ±‚è½¬å‘ç»™ <code>RCTBridge</code> çš„ <code>_handleRequestNumber:method:arguments:</code> æ–¹æ³•å¤„ç†</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// RCTBridge.m</span>
- (<span class="hljs-type">void</span>)_handleRequestNumber:(<span class="hljs-built_in">NSNumber</span> *)requestNumber
                    method:(<span class="hljs-built_in">NSString</span> *)method
                   arguments:(<span class="hljs-built_in">NSArray</span> *)arguments
{
    <span class="hljs-comment">// åºåˆ—åŒ–å‚æ•°</span>
    <span class="hljs-built_in">NSData</span> *messageData = [<span class="hljs-built_in">NSJSONSerialization</span> dataWithJSONObject:arguments
                                                        options:<span class="hljs-number">0</span>
                                                          error:<span class="hljs-literal">NULL</span>];
    <span class="hljs-comment">// å‘é€åˆ°åŸç”Ÿæ¨¡å—</span>
    [<span class="hljs-keyword">self</span> enqueueJSCall:method args:messageData];
}
</code></pre>
<p>æœ€åï¼ŒåŸç”Ÿå±‚é€šè¿‡ <code>invokeMethod</code> æ–¹æ³•æ‰¾åˆ°å¹¶æ‰§è¡Œå¯¹åº”çš„åŸç”Ÿå®ç°ï¼š</p>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-type">void</span>)invokeMethod:(<span class="hljs-built_in">NSString</span> *)moduleName
           methodName:(<span class="hljs-built_in">NSString</span> *)methodName
            arguments:(<span class="hljs-built_in">NSArray</span> *)arguments
{
    <span class="hljs-comment">// è·å–æ¨¡å—çš„æ–¹æ³•é›†åˆ</span>
    <span class="hljs-built_in">NSMutableSet</span>&lt;RCTMethodInfo *&gt; *methods = methodsMap[moduleName];
    
    <span class="hljs-comment">// æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•ä¿¡æ¯</span>
    RCTMethodInfo *methodInfo = <span class="hljs-literal">nil</span>;
    <span class="hljs-keyword">for</span> (RCTMethodInfo *info <span class="hljs-keyword">in</span> methods) {
        <span class="hljs-keyword">if</span> ([info.jsName isEqualToString:methodName]) {
            methodInfo = info;
            <span class="hljs-keyword">break</span>;
        }
    }
    
    <span class="hljs-keyword">if</span> (methodInfo) {
        <span class="hljs-comment">// è·å–æ¨¡å—å®ä¾‹</span>
        <span class="hljs-type">id</span>&lt;RCTBridgeModule&gt; module = _modulesByName[moduleName];
        
        <span class="hljs-comment">// é€šè¿‡ performSelector è°ƒç”¨åŸç”Ÿæ–¹æ³•</span>
        SEL selector = <span class="hljs-built_in">NSSelectorFromString</span>(methodInfo.objcName);
        [module performSelector:selector withArguments:arguments];
    }
}
</code></pre>
<h3 data-id="heading-4">å››ã€æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant JS as JavaScript
    participant Bridge as Bridge
    participant Native as Native Module
    participant Runtime as Runtime System

    %% æ¨¡å—æ³¨å†Œé˜¶æ®µ
    Note over Native: å®šä¹‰åŸç”Ÿæ¨¡å—ç±» CalcModule
    Native-&gt;&gt;Runtime: RCT_EXPORT_MODULE() å®å±•å¼€
    activate Runtime
    Runtime-&gt;&gt;Runtime: ç”Ÿæˆ moduleName æ–¹æ³•
    Runtime-&gt;&gt;Runtime: ç”Ÿæˆ load æ–¹æ³•
    Runtime-&gt;&gt;Bridge: RCTRegisterModule(CalcModule)
    Bridge-&gt;&gt;Bridge: å°†æ¨¡å—ç±»æ·»åŠ åˆ° RCTModuleClasses
    deactivate Runtime

    Native-&gt;&gt;Runtime: RCT_EXPORT_METHOD å®å±•å¼€
    activate Runtime
    Runtime-&gt;&gt;Runtime: ç”Ÿæˆæ–¹æ³•ä¿¡æ¯ RCTMethodInfo
    Runtime-&gt;&gt;Bridge: RCTRegisterMethodInfo(CalcModule, methodInfo)
    Bridge-&gt;&gt;Bridge: å°†æ–¹æ³•ä¿¡æ¯æ·»åŠ åˆ° methodsMap
    deactivate Runtime

    %% Bridge åˆå§‹åŒ–é˜¶æ®µ
    Note over Bridge: RCTBridge åˆå§‹åŒ–
    Bridge-&gt;&gt;Bridge: initModules
    activate Bridge
    Bridge-&gt;&gt;Native: åˆ›å»ºæ¨¡å—å®ä¾‹
    Native--&gt;&gt;Bridge: è¿”å›æ¨¡å—å®ä¾‹
    Bridge-&gt;&gt;Bridge: ä¿å­˜å®ä¾‹åˆ° _modulesByName
    deactivate Bridge

    Bridge-&gt;&gt;JS: setupJSExecutor
    activate JS
    JS-&gt;&gt;JS: æ³¨å…¥ nativeFlushQueueImmediate
    deactivate JS

    %% JavaScript è°ƒç”¨é˜¶æ®µ
    Note over JS: è°ƒç”¨ CalcModule.add()
    JS-&gt;&gt;JS: åˆ›å»º Promise
    JS-&gt;&gt;Bridge: MessageQueue.callNativeMethod
    activate Bridge
    Bridge-&gt;&gt;Bridge: enqueueNativeCall
    Bridge-&gt;&gt;Bridge: flushQueue
    Bridge-&gt;&gt;Bridge: nativeFlushQueueImmediate
    Bridge-&gt;&gt;Bridge: è§£æè°ƒç”¨è¯·æ±‚
    Bridge-&gt;&gt;Native: invokeMethod
    deactivate Bridge

    activate Native
    Native-&gt;&gt;Native: æ‰§è¡Œ add æ–¹æ³•
    Native-&gt;&gt;JS: é€šè¿‡ callback è¿”å›ç»“æœ
    deactivate Native

    JS-&gt;&gt;JS: Promise resolve
</code></pre>
<h3 data-id="heading-5">äº”ã€å°ç»“</h3>
<p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº† React Native æ—§æ¶æ„ä¸‹åŸç”Ÿæ¨¡å—å’Œ JavaScript è°ƒç”¨çš„åº•å±‚å®ç°ã€‚é€šè¿‡å¯¹æ¨¡å—æ³¨å†Œæœºåˆ¶å’Œ JavaScript è°ƒç”¨æµç¨‹çš„åˆ†æï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† React Native æ—§æ¶æ„ä¸‹çš„é€šä¿¡æœºåˆ¶ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ React Native çš„é€šä¿¡æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Vue3 é«˜æ•ˆæŠ€å·§ï¼š10 è¡Œä»£ç å®ç°è¡¨å•é˜²æŠ– + å®æ—¶éªŒè¯ï¼Œå¤ç”¨ç‡æ‹‰æ»¡ï¼]]></title>    <link>https://juejin.cn/post/7576210031873327145</link>    <guid>https://juejin.cn/post/7576210031873327145</guid>    <pubDate>2025-11-25T02:39:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873327145" data-draft-id="7576223441713496107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ğŸš€ Vue3 é«˜æ•ˆæŠ€å·§ï¼š10 è¡Œä»£ç å®ç°è¡¨å•é˜²æŠ– + å®æ—¶éªŒè¯ï¼Œå¤ç”¨ç‡æ‹‰æ»¡ï¼"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T02:39:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‡ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/2999123453424542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ğŸš€ Vue3 é«˜æ•ˆæŠ€å·§ï¼š10 è¡Œä»£ç å®ç°è¡¨å•é˜²æŠ– + å®æ—¶éªŒè¯ï¼Œå¤ç”¨ç‡æ‹‰æ»¡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123453424542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‡ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:39:20.000Z" title="Tue Nov 25 2025 02:39:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œè¡¨å•æ˜¯é«˜é¢‘åœºæ™¯ï¼Œè€Œã€Œè¾“å…¥é˜²æŠ–ã€å’Œã€Œå®æ—¶éªŒè¯ã€å‡ ä¹æ˜¯å¿…å¤‡éœ€æ±‚ â€”â€” æ¯”å¦‚æœç´¢æ¡†è¾“å…¥æ—¶é¿å…é¢‘ç¹æ¥å£è¯·æ±‚ã€æ³¨å†Œé¡µé¢å®æ—¶æ ¡éªŒæ‰‹æœºå·æ ¼å¼ã€ç™»å½•è¡¨å•é˜²é‡å¤æäº¤ã€‚å¦‚æœæ¯ä¸ªè¡¨å•éƒ½å•ç‹¬å†™ä¸€éé€»è¾‘ï¼Œä¸ä»…å†—ä½™è¿˜å®¹æ˜“å‡ºé”™ã€‚</p>
<p>ä»Šå¤©åˆ†äº«ä¸€ä¸ª Vue3 ç»„åˆå¼ API å°æŠ€å·§ï¼Œç”¨ 10 è¡Œæ ¸å¿ƒä»£ç å°è£…é€šç”¨çš„ã€Œé˜²æŠ– + éªŒè¯ã€å·¥å…·ï¼Œæ”¯æŒä»»æ„è¡¨å•å¤ç”¨ï¼Œå…¼é¡¾æ€§èƒ½å’Œå¼€å‘æ•ˆç‡ï¼Œå®Œå…¨é€‚é…å®é™…é¡¹ç›®åœºæ™¯ï¼</p>
<h2 data-id="heading-0">ä¸€ã€åœºæ™¯ç—›ç‚¹</h2>
<p>å…ˆçœ‹çœ‹æˆ‘ä»¬å¹³æ—¶é‡åˆ°çš„é—®é¢˜ï¼š</p>
<ol>
<li>è¾“å…¥æ¡†å®æ—¶æ ¡éªŒæ—¶ï¼Œè¾“å…¥è¿‡å¿«å¯¼è‡´é¢‘ç¹è§¦å‘éªŒè¯å‡½æ•°ï¼ˆæ¯”å¦‚æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±æ ¡éªŒæ‰‹æœºå·ï¼‰ï¼Œæµªè´¹æ€§èƒ½ï¼›</li>
<li>å¤šä¸ªè¡¨å•ï¼ˆç™»å½•ã€æ³¨å†Œã€æœç´¢ï¼‰éœ€è¦é‡å¤å†™é˜²æŠ–é€»è¾‘ï¼Œä»£ç å†—ä½™ï¼›</li>
<li>éªŒè¯è§„åˆ™ä¸ç»Ÿä¸€ï¼Œåç»­ç»´æŠ¤æˆæœ¬é«˜ã€‚</li>
</ol>
<p>è€Œç”¨ç»„åˆå¼ API å°è£…åï¼Œåªéœ€ä¸€è¡Œä»£ç å³å¯æ¥å…¥ï¼Œå®Œç¾è§£å†³ä»¥ä¸Šé—®é¢˜ï¼</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒå®ç°ï¼šå°è£…Â <code>useDebounceValidate</code>Â å·¥å…·</h2>
<p>ç›´æ¥ä¸Šä»£ç ï¼Œæ ¸å¿ƒé€»è¾‘åŸºäºÂ <code>lodash.debounce</code>Â ç®€åŒ–ï¼ˆä¹Ÿå¯ä»¥æ‰‹å†™é˜²æŠ–å‡½æ•°ï¼Œä¸‹æ–‡é™„åŸç”Ÿå®ç°ï¼‰ï¼Œå…¼é¡¾çµæ´»æ€§å’Œæ˜“ç”¨æ€§ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/hooks/useDebounceValidate.js</span>
<span class="hljs-keyword">import</span> { ref, watch, unref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> debounce <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash.debounce'</span>; <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ‰‹å†™é˜²æŠ–ï¼ˆä¸‹æ–‡é™„åŸç”Ÿå®ç°ï¼‰</span>

<span class="hljs-comment">/**
 * è¡¨å•é˜²æŠ–+å®æ—¶éªŒè¯ç»„åˆå¼å·¥å…·
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Ref</span>} <span class="hljs-variable">valueRef</span> - è¾“å…¥å€¼çš„å“åº”å¼å¼•ç”¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">validator</span> - éªŒè¯å‡½æ•°ï¼ˆè¿”å›å¸ƒå°”å€¼/é”™è¯¯ä¿¡æ¯ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">delay</span> - é˜²æŠ–å»¶è¿Ÿæ—¶é—´ï¼ˆé»˜è®¤300msï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} {<span class="hljs-type"> debouncedValue, isValid, errorMsg </span>}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebounceValidate</span>(<span class="hljs-params">valueRef, validator, delay = <span class="hljs-number">300</span></span>) {
  <span class="hljs-keyword">const</span> debouncedValue = <span class="hljs-title function_">ref</span>(<span class="hljs-title function_">unref</span>(valueRef)); <span class="hljs-comment">// é˜²æŠ–åçš„å€¼</span>
  <span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// éªŒè¯ç»“æœï¼ˆtrue=é€šè¿‡ï¼‰</span>
  <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>); <span class="hljs-comment">// éªŒè¯é”™è¯¯ä¿¡æ¯</span>

  <span class="hljs-comment">// é˜²æŠ–å¤„ç†å‡½æ•°</span>
  <span class="hljs-keyword">const</span> debounceHandler = <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
    debouncedValue.<span class="hljs-property">value</span> = val;
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">validator</span>(val); <span class="hljs-comment">// æ‰§è¡Œè‡ªå®šä¹‰éªŒè¯è§„åˆ™</span>
    isValid.<span class="hljs-property">value</span> = <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'boolean'</span> ? result : <span class="hljs-literal">true</span>;
    errorMsg.<span class="hljs-property">value</span> = <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'string'</span> ? result : <span class="hljs-string">''</span>;
  }, delay);

  <span class="hljs-comment">// ç›‘å¬è¾“å…¥å€¼å˜åŒ–ï¼Œè§¦å‘é˜²æŠ–</span>
  <span class="hljs-title function_">watch</span>(valueRef, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> <span class="hljs-title function_">debounceHandler</span>(newVal), { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">false</span> });

  <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆé˜²æŠ–ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">cleanup</span> = (<span class="hljs-params"/>) =&gt; debounceHandler.<span class="hljs-title function_">cancel</span>();

  <span class="hljs-keyword">return</span> { debouncedValue, isValid, errorMsg, cleanup };
}

<span class="hljs-comment">// ğŸŒŸ åŸç”Ÿé˜²æŠ–å‡½æ•°ï¼ˆæ— éœ€ä¾èµ–lodashï¼Œç›´æ¥æ›¿æ¢ä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">debounceNative</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timer);
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args), delay);
  };
}
</code></pre>
<h3 data-id="heading-2">æ ¸å¿ƒé€»è¾‘è§£æï¼š</h3>
<ol>
<li><strong>å“åº”å¼å°è£…</strong>ï¼šæ¥æ”¶è¾“å…¥å€¼çš„å“åº”å¼å¼•ç”¨ï¼ˆ<code>valueRef</code>ï¼‰ï¼Œè¿”å›é˜²æŠ–åçš„å€¼ã€éªŒè¯ç»“æœã€é”™è¯¯ä¿¡æ¯ï¼›</li>
<li><strong>çµæ´»éªŒè¯</strong>ï¼š<code>validator</code>Â å‚æ•°æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™ï¼ˆè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦é€šè¿‡ï¼Œæˆ–å­—ç¬¦ä¸²è¡¨ç¤ºé”™è¯¯ä¿¡æ¯ï¼‰ï¼›</li>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šæä¾›Â <code>cleanup</code>Â æ–¹æ³•ï¼Œç»„ä»¶å¸è½½æ—¶å–æ¶ˆé˜²æŠ–è®¡æ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›</li>
<li><strong>æ— ä¾èµ–å¯é€‰</strong>ï¼šæ”¯æŒä½¿ç”¨ lodash.debounce æˆ–åŸç”Ÿé˜²æŠ–å‡½æ•°ï¼ŒæŒ‰éœ€é€‰æ‹©ã€‚</li>
</ol>
<h2 data-id="heading-3">ä¸‰ã€å®é™…åº”ç”¨ï¼šç™»å½•è¡¨å•ç¤ºä¾‹</h2>
<p>åœ¨ Vue3 ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¸€è¡Œä»£ç æ¥å…¥é˜²æŠ– + éªŒè¯ï¼Œé€»è¾‘æ¸…æ™°ä¸”å¤ç”¨æ€§æ‹‰æ»¡ï¼š</p>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/components/LoginForm.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"login-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç™»å½•è¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ‰‹æœºå·è¾“å…¥æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æ‰‹æœºå·ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"phone"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"tel"</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥æ‰‹æœºå·"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"input"</span>
      /&gt;</span>
      <span class="hljs-comment">&lt;!-- å®æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-msg"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!phoneIsValid"</span>&gt;</span>{{ phoneErrorMsg }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å¯†ç è¾“å…¥æ¡†ï¼ˆä»…é˜²æŠ–ï¼Œä¸éªŒè¯æ ¼å¼ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>å¯†ç ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"input"</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æŒ‰é’®çŠ¶æ€ï¼šæ‰‹æœºå·éªŒè¯é€šè¿‡+å¯†ç ä¸ä¸ºç©ºæ‰å¯ç”¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">class</span>=<span class="hljs-string">"login-btn"</span>
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!phoneIsValid || !password"</span>
      @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleLogin"</span>
    &gt;</span>
      ç™»å½•
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useDebounceValidate } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useDebounceValidate'</span>;

<span class="hljs-comment">// 1. å®šä¹‰è¡¨å•å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> phone = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

<span class="hljs-comment">// 2. æ‰‹æœºå·éªŒè¯è§„åˆ™ï¼ˆè‡ªå®šä¹‰ï¼šè¿”å›é”™è¯¯ä¿¡æ¯æˆ–trueï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePhone</span> = (<span class="hljs-params">val</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!val) <span class="hljs-keyword">return</span> <span class="hljs-string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span>;
  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/^1[3-9]\d{9}$/</span>;
  <span class="hljs-keyword">return</span> reg.<span class="hljs-title function_">test</span>(val) ? <span class="hljs-literal">true</span> : <span class="hljs-string">'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·æ ¼å¼'</span>;
};

<span class="hljs-comment">// 3. ä¸€è¡Œä»£ç æ¥å…¥é˜²æŠ–+éªŒè¯ï¼ˆå»¶è¿Ÿ300msï¼‰</span>
<span class="hljs-keyword">const</span> { 
  <span class="hljs-attr">isValid</span>: phoneIsValid, <span class="hljs-comment">// éªŒè¯ç»“æœ</span>
  <span class="hljs-attr">errorMsg</span>: phoneErrorMsg, <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
  <span class="hljs-attr">cleanup</span>: cleanupPhoneDebounce <span class="hljs-comment">// æ¸…ç†é˜²æŠ–è®¡æ—¶å™¨</span>
} = <span class="hljs-title function_">useDebounceValidate</span>(phone, validatePhone, <span class="hljs-number">300</span>);

<span class="hljs-comment">// 4. ç™»å½•æäº¤é€»è¾‘ï¼ˆå¯†ç ä¹Ÿå¯åŠ é˜²æŠ–é˜²é‡å¤æäº¤ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•è¯·æ±‚ï¼š'</span>, { <span class="hljs-attr">phone</span>: phone.<span class="hljs-property">value</span>, <span class="hljs-attr">password</span>: password.<span class="hljs-property">value</span> });
  <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­å¯åœ¨æ­¤å¤„è°ƒç”¨ç™»å½•æ¥å£</span>
};

<span class="hljs-comment">// 5. ç»„ä»¶å¸è½½æ—¶æ¸…ç†é˜²æŠ–ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">cleanupPhoneDebounce</span>();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.login-form</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}
<span class="hljs-selector-class">.form-item</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
}
<span class="hljs-selector-class">.input</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}
<span class="hljs-selector-class">.error-msg</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff4d4f</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
}
<span class="hljs-selector-class">.login-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#1890ff</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.login-btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">æ•ˆæœæ¼”ç¤ºï¼š</h3>
<ul>
<li>è¾“å…¥æ‰‹æœºå·æ—¶ï¼Œå¿«é€Ÿè¾“å…¥ä¸ä¼šç«‹å³è§¦å‘éªŒè¯ï¼Œç­‰å¾… 300ms æ— è¾“å…¥åæ‰æ‰§è¡Œæ ¡éªŒï¼›</li>
<li>æ‰‹æœºå·æ ¼å¼é”™è¯¯æ—¶å®æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ ¼å¼æ­£ç¡®åé”™è¯¯ä¿¡æ¯è‡ªåŠ¨æ¶ˆå¤±ï¼›</li>
<li>ç™»å½•æŒ‰é’®åªæœ‰åœ¨æ‰‹æœºå·éªŒè¯é€šè¿‡ä¸”å¯†ç ä¸ä¸ºç©ºæ—¶æ‰å¯ç”¨ï¼Œé¿å…æ— æ•ˆæäº¤ã€‚</li>
</ul>
<h2 data-id="heading-5">å››ã€æ‰©å±•åœºæ™¯ï¼šæœç´¢æ¡†é˜²æŠ–è¯·æ±‚</h2>
<p>é™¤äº†è¡¨å•éªŒè¯ï¼Œæœç´¢æ¡†çš„æ¥å£è¯·æ±‚ä¹Ÿèƒ½ç›´æ¥å¤ç”¨è¿™ä¸ªå·¥å…·ï¼Œæ— éœ€é¢å¤–å†™é˜²æŠ–é€»è¾‘ï¼š</p>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-box"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchKey"</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æœç´¢å•†å“..."</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useDebounceValidate } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useDebounceValidate'</span>;
<span class="hljs-keyword">import</span> { fetchSearchGoods } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/goods'</span>; <span class="hljs-comment">// æœç´¢æ¥å£</span>

<span class="hljs-keyword">const</span> searchKey = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

<span class="hljs-comment">// æœç´¢æ¡†ï¼šé˜²æŠ–500msåè¯·æ±‚æ¥å£ï¼ˆéªŒè¯è§„åˆ™ç®€åŒ–ä¸ºâ€œéç©ºâ€ï¼‰</span>
<span class="hljs-keyword">const</span> { 
  <span class="hljs-attr">debouncedValue</span>: searchValue,
  <span class="hljs-attr">cleanup</span>: cleanupSearchDebounce
} = <span class="hljs-title function_">useDebounceValidate</span>(
  searchKey,
  <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> { 
    <span class="hljs-comment">// éªŒè¯è§„åˆ™ï¼šéç©ºåˆ™æ‰§è¡Œæœç´¢è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (val) <span class="hljs-title function_">fetchSearchGoods</span>(val).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢ç»“æœï¼š'</span>, res));
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ— éœ€é”™è¯¯ä¿¡æ¯ï¼Œè¿”å›trueå³å¯</span>
  },
  <span class="hljs-number">500</span>
);

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">cleanupSearchDebounce</span>());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">äº”ã€æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“</h2>
<ol>
<li><strong>æè‡´å¤ç”¨</strong>ï¼šä¸€ä¸ªå·¥å…·é€‚é…æ‰€æœ‰è¡¨å•ï¼ˆç™»å½•ã€æ³¨å†Œã€æœç´¢ã€è®¾ç½®é¡µé¢ï¼‰ï¼Œå‡å°‘é‡å¤ä»£ç ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé˜²æŠ–é¿å…é¢‘ç¹è§¦å‘éªŒè¯ / æ¥å£è¯·æ±‚ï¼Œé™ä½æ€§èƒ½æ¶ˆè€—ï¼›</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šéªŒè¯è§„åˆ™å®Œå…¨è‡ªå®šä¹‰ï¼Œæ”¯æŒå¤šå­—æ®µè”åŠ¨ã€å¼‚æ­¥éªŒè¯ï¼ˆæ¯”å¦‚æ ¡éªŒæ‰‹æœºå·æ˜¯å¦å·²æ³¨å†Œï¼‰ï¼›</li>
<li><strong>ä¸Šæ‰‹ç®€å•</strong>ï¼šVue3 ç»„åˆå¼ API é£æ ¼ï¼Œä¸€è¡Œä»£ç æ¥å…¥ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä½¿ç”¨ï¼›</li>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šæä¾›æ¸…ç†é˜²æŠ–è®¡æ—¶å™¨çš„æ–¹æ³•ï¼Œé¿å…ç»„ä»¶å¸è½½åå†…å­˜æ³„æ¼ã€‚</li>
</ol>
<h2 data-id="heading-7">å…­ã€è¿›é˜¶ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰</h2>
<p>å¦‚æœéœ€è¦æ”¯æŒå¼‚æ­¥éªŒè¯ï¼ˆæ¯”å¦‚æ ¡éªŒæ‰‹æœºå·æ˜¯å¦å·²è¢«æ³¨å†Œï¼‰ï¼Œåªéœ€ä¿®æ”¹éªŒè¯å‡½æ•°ä¸ºå¼‚æ­¥å³å¯ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// å¼‚æ­¥éªŒè¯ç¤ºä¾‹ï¼šæ ¡éªŒæ‰‹æœºå·æ˜¯å¦å·²æ³¨å†Œ
const <span class="hljs-attr">validatePhoneAsync</span> = async (val) =&gt; {
  if (!val) return 'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'<span class="hljs-comment">;</span>
  const <span class="hljs-attr">reg</span> = /^<span class="hljs-number">1</span>[<span class="hljs-number">3</span>-<span class="hljs-number">9</span>]\d{<span class="hljs-number">9</span>}$/<span class="hljs-comment">;</span>
  if (!reg.test(val)) return 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·æ ¼å¼'<span class="hljs-comment">;</span>
  // è°ƒç”¨æ¥å£æ ¡éªŒæ‰‹æœºå·æ˜¯å¦å·²æ³¨å†Œ
  const <span class="hljs-attr">isRegistered</span> = await fetchCheckPhone(val)<span class="hljs-comment">;</span>
  return isRegistered ? 'è¯¥æ‰‹æœºå·å·²æ³¨å†Œ' : true<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// å·¥å…·å†…éƒ¨åªéœ€å°†é˜²æŠ–å‡½æ•°æ”¹ä¸ºæ”¯æŒå¼‚æ­¥ï¼š
const <span class="hljs-attr">debounceHandler</span> = debounce(async (val) =&gt; {
  <span class="hljs-attr">debouncedValue.value</span> = val<span class="hljs-comment">;</span>
  const <span class="hljs-attr">result</span> = await validator(val)<span class="hljs-comment">; // ç­‰å¾…å¼‚æ­¥éªŒè¯ç»“æœ</span>
  <span class="hljs-attr">isValid.value</span> = typeof result === <span class="hljs-string">'boolean'</span> ? result : <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">errorMsg.value</span> = typeof result === <span class="hljs-string">'string'</span> ? result : <span class="hljs-string">''</span><span class="hljs-comment">;</span>
}, delay)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-8">æœ€å</h2>
<p>è¿™ä¸ªå°æŠ€å·§çœ‹ä¼¼ç®€å•ï¼Œä½†å®é™…é¡¹ç›®ä¸­èƒ½å¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼Œå°¤å…¶é€‚åˆä¸­å¤§å‹é¡¹ç›®çš„è¡¨å•ç»Ÿä¸€ç®¡ç†ã€‚å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ï¼Œè¯„è®ºåŒºåˆ†äº«ä½ çš„ä½¿ç”¨åœºæ™¯ï½ ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘ï¼Œåç»­ä¼šåˆ†äº«æ›´å¤š Vue3/React å®ç”¨æŠ€å·§å’Œæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§ç™½è¯èŠä¸€èŠ | AIGCä¸‡å­—æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šä»Aåˆ°Zï¼Œæ‰“ç ´æŠ€æœ¯è¯æ±‡è®¤çŸ¥å£å’]]></title>    <link>https://juejin.cn/post/7576197969842651162</link>    <guid>https://juejin.cn/post/7576197969842651162</guid>    <pubDate>2025-11-25T01:55:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197969842651162" data-draft-id="7576197876717305894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§ç™½è¯èŠä¸€èŠ | AIGCä¸‡å­—æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šä»Aåˆ°Zï¼Œæ‰“ç ´æŠ€æœ¯è¯æ±‡è®¤çŸ¥å£å’"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-25T01:55:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="302AI"/> <meta itemprop="url" content="https://juejin.cn/user/4158793214076603"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§ç™½è¯èŠä¸€èŠ | AIGCä¸‡å­—æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šä»Aåˆ°Zï¼Œæ‰“ç ´æŠ€æœ¯è¯æ±‡è®¤çŸ¥å£å’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4158793214076603/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    302AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:55:51.000Z" title="Tue Nov 25 2025 01:55:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»51åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90ead68ab0ac42cc8e752cca1d02f204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=FoCz4WezXGbuu2cLgWIhjYw7kMs%3D" alt="" loading="lazy"/></p>
<p>2025å¹´æœ«ï¼ŒAIGCï¼ˆAI-Generated Contentï¼Œäººå·¥æ™ºèƒ½ç”Ÿæˆå†…å®¹ï¼‰æ—©å·²ä»å‰æ²¿æ¦‚å¿µï¼Œæ¼”å˜ä¸ºæ·±åˆ»æ”¹å˜åˆ›æ„äº§ä¸šçš„å¼ºå¤§ç”Ÿäº§åŠ›ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œ<strong>AIGCæ˜¯åˆ©ç”¨<strong><strong>æœºå™¨å­¦ä¹ </strong></strong>ï¼Œç‰¹åˆ«æ˜¯<strong><strong>æ·±åº¦å­¦ä¹ </strong></strong>æ¨¡å‹ï¼Œé€šè¿‡å¯¹æµ·é‡æ•°æ®çš„å­¦ä¹ ï¼Œæ¥è‡ªåŠ¨åŒ–åœ°ç”Ÿæˆå…¨æ–°çš„æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€3Däº¤äº’å†…å®¹ä¹ƒè‡³ä»£ç ç­‰å„ç§å½¢å¼çš„æ•°å­—èµ„äº§</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ç§æŠ€æœ¯å·¥å…·ï¼Œæ›´è¢«è§†ä¸ºé‡å¡‘å†…å®¹ç”Ÿäº§é€»è¾‘ã€é©±åŠ¨ç»æµç¤¾ä¼šé«˜è´¨é‡å‘å±•çš„æœªæ¥äº§ä¸šåŸºå»ºã€‚åœ¨å½±è§†åˆ¶ä½œã€æ•°å­—è‰ºæœ¯ã€äº’åŠ¨å¨±ä¹ã€å¹¿å‘Šè¥é”€ç­‰æ¯ä¸€ä¸ªæ–‡åŒ–åˆ›æ„äº§ä¸šçš„è§’è½ï¼Œæˆ‘ä»¬éƒ½èƒ½çœ‹åˆ°AIGCæ¸—é€å¹¶é‡å¡‘å…¶åˆ›ä½œæœºåˆ¶ä¸ä¼ æ’­ç”Ÿæ€çš„èº«å½±ã€‚æ— è®ºæ˜¯ä¸“ä¸šä»ä¸šè€…ï¼Œè¿˜æ˜¯æˆ‘ä»¬æ¯ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œéƒ½åœ¨ä»Šå¹´æˆ–å¤šæˆ–å°‘åœ°ä½“éªŒåˆ°äº†è¿™è‚¡æµªæ½®çš„å†²å‡»ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™åœºæŠ€æœ¯çš„äº•å–·ä¹Ÿå¸¦æ¥äº†ä¸€åº§æ–°çš„â€œå·´åˆ«å¡”â€ï¼šAgentã€LoRAã€ControlNetã€Diffusionã€Denoiseâ€¦ ä¸“ä¸šæœ¯è¯­ã€è¡Œä¸šé»‘è¯å’ŒæŠ€æœ¯åè¯å±‚å‡ºä¸ç©·ï¼Œåœ¨åˆ›ä½œè€…ä¸è¿™è‚¡å¼ºå¤§çš„ç”Ÿäº§åŠ›ä¹‹é—´ï¼Œç«–èµ·äº†ä¸€é“æ— å½¢çš„ã€ç”±è®¤çŸ¥å·®å¼‚æ„æˆçš„å£å’ã€‚å½“ä¸€ä¸ªå·¥å…·å®£ç§°è‡ªå·±æ˜¯â€œå¤šæ¨¡æ€â€æ™ºèƒ½ä½“æ—¶ï¼Œå®ƒç©¶ç«Ÿæ„å‘³ç€ä»€ä¹ˆï¼Ÿå½“ä¸€ç¯‡æ•™ç¨‹æ•™ä½ å¦‚ä½•è°ƒæ•´â€œCFG Scaleâ€æ—¶ï¼Œè¿™ä¸ªç¥ç§˜çš„å‚æ•°åˆåœ¨æ§åˆ¶ä»€ä¹ˆï¼Ÿè¿™ç§â€œçŸ¥å…¶ç„¶ï¼Œè€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶â€çš„å›°å¢ƒï¼Œæ­£æˆä¸ºè®¸å¤šäººæƒ³è¦é©¾é©­AIã€å´åˆæ— ä»ä¸‹æ‰‹çš„æœ€å¤§éšœç¢ã€‚</p>
<p><strong>302.AI</strong> ç‰¹æ­¤æ•´ç†æ±‡æ€»äº†è¿™ä»½ä»Aåˆ°Zçš„ <strong>ã€ŠAIGCä¸‡å­—æŒ‡å—ã€‹</strong>ã€‚æˆ‘ä»¬çš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<strong>ä»¥æœ€é€šä¿—æ˜“æ‡‚çš„å¤§ç™½è¯ï¼Œè¯´æ˜ç™½è¿™äº›çœ‹ä¼¼é«˜æ·±çš„æŠ€æœ¯è¯æ±‡</strong>ï¼Œå¸¦æ‚¨ç©¿é€æŠ€æœ¯çš„è¿·é›¾ã€‚æ— è®ºæ‚¨æ˜¯åˆšåˆšè¸å…¥è¿™ä¸ªé¢†åŸŸçš„é›¶åŸºç¡€çˆ±å¥½è€…ï¼Œè¿˜æ˜¯å¸Œæœ›æ„å»ºæ›´é«˜æ•ˆå·¥ä½œæµçš„èµ„æ·±ç©å®¶ï¼Œæˆ‘ä»¬ç›¸ä¿¡ï¼Œæ‚¨éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°é€šå¾€é«˜æ•ˆã€è‡ªä¸»åˆ›ä½œä¹‹è·¯çš„ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-0">å­—æ¯A:</h2>
<h4 data-id="heading-1">A - Agent (æ™ºèƒ½ä½“)</h4>
<p>å®šä¹‰ï¼šä¸€ä¸ªèƒ½å¤Ÿç†è§£å¤æ‚ç›®æ ‡ã€è‡ªä¸»è§„åˆ’æ­¥éª¤ã€å¹¶è°ƒç”¨å¤šç§å·¥å…·æ¥å®Œæˆä»»åŠ¡çš„é«˜çº§AIç³»ç»Ÿã€‚</p>
<p>åœ¨AIGCè¯­å¢ƒä¸‹ï¼ŒAgent æŒ‡çš„æ˜¯èƒ½å¤Ÿç†è§£å¤æ‚ç›®æ ‡ã€è‡ªä¸»è§„åˆ’æ­¥éª¤ã€å¹¶è°ƒç”¨å¤šç§å·¥å…·ï¼ˆå¦‚ä»£ç è§£é‡Šå™¨ã€æœç´¢å¼•æ“ã€ç»˜å›¾æ¨¡å‹ï¼‰æ¥å®Œæˆä»»åŠ¡çš„é«˜çº§AIç³»ç»Ÿã€‚ä¸€ä¸ªå¼ºå¤§çš„Agentå¯ä»¥å¸®ä½ è‡ªåŠ¨åŒ–æ•´ä¸ªAIGCåº”ç”¨æµç¨‹ï¼Œä¾‹å¦‚ï¼Œä½ åªéœ€è¯´â€œå¸®æˆ‘ä¸ºè¿™é¦–æ­Œåˆ¶ä½œä¸€ä¸ªMVâ€ï¼Œå®ƒå°±èƒ½è‡ªä¸»å®Œæˆå†™è„šæœ¬ã€ç”ŸæˆéŸ³ä¹ã€åˆ›é€ ç”»é¢å¹¶å‰ªè¾‘æˆç‰‡çš„å…¨è¿‡ç¨‹ï¼Œæµè¡Œçš„è®¾è®¡ç±»Agentå¹³å°æ¯”å¦‚Lovart.</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨AIGCå·¥ä½œæµä¸­ï¼ŒAgentæ˜¯å®ç°â€œä¸€é”®æ¯•ä¸šâ€ç»ˆææ¢¦æƒ³çš„æ ¸å¿ƒæŠ€æœ¯ã€‚å®ƒèƒ½å°†ä½ ä»ç¹ççš„ã€åœ¨ä¸åŒå¹³å°é—´â€œå¤åˆ¶ç²˜è´´â€çš„é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©ä½ ä¸“æ³¨äºæœ€é«˜å±‚çš„åˆ›æ„æ„æ€ã€‚</p>
<h4 data-id="heading-2">Artifacts (ä¼ªå½±)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5721dea90744749ab2ae3db65c7e84d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=lIUfvD8LLfjSe9ZrpabHKgFkI1s%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šAIåœ¨ç”Ÿæˆå†…å®¹æ—¶ï¼Œäº§ç”Ÿçš„ã€ä¸ç¬¦åˆç°å®é€»è¾‘æˆ–ç‰©ç†è§„å¾‹çš„é”™è¯¯ä¸ç‘•ç–µã€‚</p>
<p>è¿™å°±æ˜¯ç”¨æˆ·å¸¸è¯´çš„â€œAIå‘³å„¿â€æˆ–â€œä¸€çœ¼å‡â€çš„æ¥æºã€‚åœ¨AIç»˜ç”»ä¸­ï¼Œæœ€ç»å…¸çš„Artifactså°±æ˜¯â€œå…­æŒ‡ç‹‚é­”â€æˆ–â€œAIç«æ˜Ÿæ–‡â€ï¼›åœ¨AIè§†é¢‘é‡Œï¼Œåˆ™å¯èƒ½æ˜¯èƒŒæ™¯é‡Œä¸€æ ¹çªç„¶æ‰­æ›²çš„æŸ±å­ï¼Œå‡­ç©ºå‡ºç°åˆæ¶ˆå¤±çš„äººç‰©ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè¯†åˆ«å¹¶ä¿®å¤Artifactsæ˜¯AIGCåæœŸå¤„ç†çš„é‡è¦ç¯èŠ‚ã€‚åœ¨ä½ çš„å·¥ä½œæµä¸­ï¼Œå¯èƒ½éœ€è¦åŠ å…¥ä¸€ä¸ªâ€œä¿®å¤â€æ­¥éª¤ï¼Œæ¯”å¦‚ä½¿ç”¨ä¼ ç»Ÿçš„Photoshopç­‰è½¯ä»¶è¿›è¡Œæ‰‹åŠ¨ä¼˜åŒ–ï¼Œæå‡ä½œå“çš„æœ€ç»ˆè´¨æ„Ÿã€‚</p>
<h4 data-id="heading-3">A-roll (ä¸»é•œå¤´)</h4>
<p>å®šä¹‰ï¼šæºè‡ªå½±è§†åˆ¶ä½œï¼ŒæŒ‡åŒ…å«ä¸»è¦å™äº‹å†…å®¹ã€ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒé•œå¤´ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨AIè§†é¢‘å·¥ä½œæµä¸­ï¼ŒA-rollå°±æ˜¯ä½ æœ€æƒ³è®©è§‚ä¼—çœ‹åˆ°çš„æ ¸å¿ƒå†…å®¹â€”â€”å®ƒä»¬æ˜¯æ•…äº‹çš„â€œè„Šæ¢â€ï¼Œè§‚ä¼—çš„æ³¨æ„åŠ›éƒ½é›†ä¸­åœ¨è¿™é‡Œã€‚A-rollçš„è´¨é‡â€”â€”æ¯”å¦‚å£å‹æ˜¯å¦åŒæ­¥ã€è¡¨æƒ…æ˜¯å¦åˆ°ä½ã€åŠ¨ä½œæ˜¯å¦è¿è´¯â€”â€”ç›´æ¥å†³å®šäº†ä½ çš„è§†é¢‘æ˜¯â€œä½œå“â€è¿˜æ˜¯â€œåŠæˆå“â€ã€‚åœ¨è§„åˆ’AIè§†é¢‘æ—¶ï¼Œé¦–å…ˆè¦è®¾è®¡å¥½ä½ çš„A-rollã€‚æ¯”å¦‚ï¼Œå…ˆç”¨æ•°å­—äººç”Ÿæˆå·¥å…·åˆ¶ä½œå¥½ä¸»è§’æ¼”å”±çš„A-rollç‰‡æ®µï¼Œç„¶åå†ç”¨AIå»ç”Ÿæˆå¤§é‡çš„B-rollï¼ˆè¡¥å……é•œå¤´ï¼Œå¦‚é£æ™¯ã€æ°›å›´å›¾ï¼‰æ¥ä¸°å¯Œç”»é¢ã€è¿›è¡Œè½¬åœºï¼Œä»è€Œè®©ä½ çš„è§†é¢‘æ›´å…·ç”µå½±æ„Ÿã€‚</p>
<h4 data-id="heading-4">Arc2Face / ArcFaceï¼š</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed462f23aef0479ebdc7a18a5320da01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=BrsEEWi3e8puWsRVfERMqa4ieUA%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªå¼€æºçš„ã€ç”¨äºç”Ÿæˆé«˜ä¿çœŸã€ä¸”ä¿æŒèº«ä»½ä¸€è‡´æ€§çš„äººè„¸åŸºç¡€æ¨¡å‹ ã€‚</p>
<p>ä¸€ç§é¡¶å°–çš„ã€ç”¨äºä¿æŒäººè„¸èº«ä»½ä¸€è‡´æ€§çš„AIæŠ€æœ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªç»ˆæçš„â€œAIæè„¸å¤§å¸ˆâ€+â€œé¢éƒ¨èº«ä»½ç³»ç»Ÿâ€ã€‚ä¼ ç»Ÿçš„æ¢è„¸ï¼ˆFace Swapï¼‰æŠ€æœ¯åƒæ˜¯ç»™è§†é¢‘è´´ä¸Šäº†ä¸€å¼ â€œé¢å…·â€ï¼Œè§’åº¦ä¸€å¤§å°±å®¹æ˜“ç©¿å¸®ã€‚è€ŒArc2Faceçš„æŠ€æœ¯é€»è¾‘æ˜¯ï¼Œå…ˆé€šè¿‡ArcFaceç­‰æŠ€æœ¯ä¸ºä½ çš„è§’è‰²ç”Ÿæˆä¸€å¼ ç‹¬ä¸€æ— äºŒçš„â€œé¢éƒ¨èº«ä»½è¯â€ï¼Œç„¶åå®ƒèƒ½æ ¹æ®è¿™å¼ â€œèº«ä»½è¯â€ï¼Œåœ¨å„ç§ä¸åŒçš„å…‰ç…§ã€è§’åº¦ã€è¡¨æƒ…ä¸‹ï¼Œé‡æ–°â€œåˆ›ç”Ÿâ€å‡ºå®Œå…¨å±äºè¿™ä¸ªäººçš„ã€é«˜åº¦é€¼çœŸçš„è„¸ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨åˆ¶ä½œAIæ•°å­—äººè§†é¢‘æ—¶ï¼ŒArc2Faceæ˜¯è§£å†³è§’è‰²ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰é—®é¢˜çš„ç‹ç‰ŒæŠ€æœ¯ã€‚ä½ åªéœ€è¦ä¸€å¼ è§’è‰²çš„é«˜æ¸…æ­£é¢ç…§ï¼Œå°±å¯ä»¥ç”¨å®ƒç”Ÿæˆä¸€ç³»åˆ—ä¸åŒè¡¨æƒ…å’Œè§’åº¦çš„å›¾ç‰‡ï¼Œä½œä¸ºåç»­ç”Ÿæˆè§†é¢‘çš„ç´ æï¼Œç¡®ä¿ä½ çš„ä¸»è§’åœ¨æ•´ä¸ªMVé‡Œéƒ½æ˜¯â€œåŒä¸€ä¸ªäººâ€ï¼Œä¸ä¼šåœ¨ä¸­é€”â€œå˜è„¸â€ã€‚</p>
<h4 data-id="heading-5">API (åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£)</h4>
<p>å®šä¹‰ï¼šå…è®¸ä¸åŒè½¯ä»¶ã€æ¨¡å‹ã€æœåŠ¡ä¹‹é—´äº’ç›¸â€œå¯¹è¯â€å’Œäº¤æ¢æ•°æ®çš„â€œé€šç”¨æ¥å£â€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šAPIï¼ˆApplication Programming Interfaceï¼‰å°±åƒAIä¸–ç•Œçš„â€œä¹é«˜ç§¯æœ¨â€è¿æ¥ç‚¹ã€‚Suno æœ‰ä¸€ä¸ªAPIï¼Œå¯ä»¥è®©ä½ çš„ç¨‹åºè°ƒç”¨å®ƒæ¥ç”ŸæˆéŸ³ä¹ï¼›Kling æœ‰ä¸€ä¸ª APIï¼Œå¯ä»¥è®©ä½ çš„ç¨‹åºè°ƒç”¨å®ƒæ¥ç”Ÿæˆè§†é¢‘ã€‚è€Œ 302.AI è¿™æ ·çš„å¹³å°ï¼Œå°±æ˜¯æä¾›äº†ä¸€ä¸ªå·¨å¤§çš„â€œä¹é«˜åº•æ¿â€ï¼Œä¸Šé¢é›†æˆäº†æ‰€æœ‰ä¸»æµæ¨¡å‹çš„APIâ€œæ’åº§â€ï¼Œä½ å¯ä»¥åƒæ‹¼ç§¯æœ¨ä¸€æ ·ï¼Œè‡ªç”±åœ°å°†éŸ³ä¹ã€å›¾åƒã€è§†é¢‘çš„èƒ½åŠ›ç»„åˆåœ¨ä¸€èµ·ï¼Œæ„å»ºå±äºä½ è‡ªå·±çš„å¼ºå¤§å·¥å…·ã€‚</p>
<h4 data-id="heading-6">Alignment (å¯¹é½)</h4>
<p>å®šä¹‰ï¼šä¸€ä¸ªAIå®‰å…¨ä¸ä¼¦ç†é¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒæŒ‡ç¡®ä¿AIæ¨¡å‹çš„è¡Œä¸ºå’Œç›®æ ‡ä¸äººç±»çš„ä»·å€¼è§‚ã€æ„å›¾å’Œç¤¾ä¼šè§„èŒƒä¿æŒä¸€è‡´ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè™½ç„¶åˆ›ä½œè€…ä¸ç›´æ¥å‚ä¸Alignmentçš„è®­ç»ƒï¼Œä½†ç†è§£è¿™ä¸ªæ¦‚å¿µæœ‰åŠ©äºä½ åˆ¤æ–­ä¸€ä¸ªæ¨¡å‹çš„â€œæ€§æ ¼â€ã€‚ä¸€ä¸ªAlignmentä¼˜ç§€çš„æ¨¡å‹ï¼Œé€šå¸¸åœ¨ç†è§£ä½ çš„æ­£é¢æ„å›¾ã€è§„é¿ä¸å½“å†…å®¹æ–¹é¢è¡¨ç°å¾—æ›´èªæ˜ã€æ›´å¯é ã€‚</p>
<h2 data-id="heading-7">å­—æ¯B:</h2>
<h4 data-id="heading-8">Batch (æ‰¹å¤„ç†)</h4>
<p>å®šä¹‰ï¼šä¸€æ¬¡æ€§å¯¹ä¸€ç»„æ•°æ®ï¼ˆa batch of itemsï¼‰æ‰§è¡Œç›¸åŒæ“ä½œçš„è®¡ç®—è¿‡ç¨‹ã€‚ è¿™æ˜¯ä¸€ç§åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æå…¶å¸¸è§çš„é«˜æ•ˆå¤„ç†æ¨¡å¼ï¼Œä»ç®€å•çš„è„šæœ¬æ–‡ä»¶ï¼ˆ.batï¼‰åˆ°å¤æ‚çš„ç¥ç»ç½‘ç»œè®­ç»ƒï¼Œæ— å¤„ä¸åœ¨ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦ä¸€å¼ å®Œç¾çš„AIç»˜ç”»ä½œå“æ—¶ï¼Œä½ ä¸ä¼šåªç”Ÿæˆä¸€å¼ ã€‚ä½ ä¼šè®¾ç½®ä¸€ä¸ªBatch sizeï¼ˆæ‰¹å¤„ç†æ•°é‡ï¼‰ï¼Œæ¯”å¦‚100ï¼Œç„¶åè®©AIâ€œç«åŠ›å…¨å¼€â€ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆ100å¼ é£æ ¼ã€æ„å›¾ç›¸ä¼¼ä½†ç»†èŠ‚å„å¼‚çš„å›¾ç‰‡ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«åˆ›ä½œè€…ä»¬æˆç§°ä¸ºâ€œå¼€ç›²ç›’â€æˆ–â€œæŠ½å¡â€ï¼Œä½ çš„ä»»åŠ¡å°±æ˜¯ä»è¿™100ä¸ªâ€œç›²ç›’â€ä¸­ï¼ŒæŒ‘é€‰å‡ºé‚£ä¸ªè®©ä½ æƒŠå¹çš„â€œSSRçº§â€ç¥ä½œã€‚</p>
<h4 data-id="heading-9">B - Blending (èåˆ)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa81fdf47ed4e4ab4be6a14c8637edb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=NHjhVqXJeIO%2BeCPwUx%2F7G%2Bay1Eo%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šå°†ä¸¤ç§æˆ–å¤šç§æ•°å­—å…ƒç´ ï¼ˆå¦‚å›¾åƒã€é£æ ¼ã€æ¦‚å¿µï¼‰æ— ç¼åœ°ç»“åˆåœ¨ä¸€èµ·ï¼Œåˆ›é€ å‡ºä¸€ä¸ªå…¨æ–°çš„ã€å’Œè°ç»Ÿä¸€çš„æ•´ä½“ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯Photoshopé‡Œçš„â€œç¾½åŒ–â€æˆ–â€œè’™ç‰ˆâ€ï¼Œè€Œæ˜¯AIå±‚é¢çš„â€œæ•°å­—ç‚¼é‡‘æœ¯â€ã€‚å½“AIè¿›è¡ŒBlendingæ—¶ï¼Œå®ƒä¼šè¯•å›¾å»â€œç†è§£â€ä½ è¦èåˆçš„å„ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå½“å®ƒéœ€è¦å°†ä¸€ä¸ªç»†èƒçš„æ•°å­—å›¾åƒä¸èƒŒæ™¯è¿›è¡Œâ€œçœŸå®åœ°æ··åˆâ€ï¼ˆrealistically blendedï¼‰æ—¶ï¼Œå®ƒä¸ä»…ä»…æ˜¯æŠŠç»†èƒå›¾å±‚å åŠ ä¸Šå»ï¼Œè€Œæ˜¯ä¼šæ™ºèƒ½åœ°åˆ†æå…‰ç…§ã€é˜´å½±å’Œçº¹ç†ï¼Œè®©ç»†èƒçœ‹èµ·æ¥å°±åƒâ€œé•¿â€åœ¨èƒŒæ™¯é‡Œä¸€æ · ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šæ¯”å¦‚ä¸Šå›¾çš„é£æ ¼èåˆï¼Œå°†â€œæ¢µé«˜çš„ç¬”è§¦â€ä¸â€œèµ›åšæœ‹å…‹çš„éœ“è™¹â€èåˆï¼Œåˆ›é€ å‡ºä¸€ç§å…¨æ–°çš„è‰ºæœ¯é£æ ¼ã€‚</p>
<h4 data-id="heading-10">B-roll (è¡¥å……é•œå¤´/ç©ºé•œ)</h4>
<p>å®šä¹‰ï¼šæºè‡ªå½±è§†è¡Œä¸šï¼ŒæŒ‡ç”¨äºè¾…åŠ©å™äº‹ã€æ¸²æŸ“æ°›å›´ã€æä¾›ä¸Šä¸‹æ–‡æˆ–è¿›è¡Œè½¬åœºçš„è¾…åŠ©æ€§é•œå¤´ï¼Œä¸æ‰¿è½½æ ¸å¿ƒå†…å®¹çš„A-rollç›¸å¯¹ã€‚</p>
<p>å¦‚æœä½ çš„AIæ•°å­—äººå”±æ­Œçš„ç‰¹å†™æ˜¯â€œçº¢èŠ±â€ï¼ˆA-rollï¼‰ï¼Œé‚£ä¹ˆé‚£äº›å±•ç°é»„æ˜å¤©ç©ºã€åŸå¸‚è¡—æ™¯ã€è§‚ä¼—å‰ªå½±ã€ä¹å™¨ç‰¹å†™çš„é•œå¤´å°±æ˜¯â€œç»¿å¶â€ï¼ˆB-rollï¼‰ã€‚æ²¡æœ‰B-rollçš„è§†é¢‘ä¼šæ˜¾å¾—å•è°ƒä¹å‘³ï¼Œåƒä¸€åœºâ€œç›‘æ§å½•åƒâ€ï¼›è€Œæœ‰äº†B-rollï¼Œä½ çš„æ•…äº‹æ‰æœ‰äº†å‘¼å¸æ„Ÿã€èŠ‚å¥æ„Ÿå’Œç”µå½±æ„Ÿã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨æ„æ€ä½ çš„AIéŸ³ä¹è§†é¢‘æ—¶ï¼Œä½ å¯ä»¥å…ˆç”Ÿæˆä¸»è§’æ¼”å”±çš„A-rollã€‚ç„¶åï¼Œå›´ç»•æ­Œè¯æ„å¢ƒï¼Œç”¨AIæ‰¹é‡ç”Ÿæˆå¤§é‡çš„B-rollç´ æåº“ã€‚æ¯”å¦‚æ­Œè¯å”±åˆ°â€œå­¤ç‹¬çš„å¤œæ™šâ€ï¼Œä½ å°±å¯ä»¥ç”Ÿæˆâ€œé›¨å¤œçš„çª—æˆ·â€ã€â€œç©ºæ— ä¸€äººçš„è¡—é“â€ã€â€œé—ªçƒçš„éœ“è™¹ç¯â€ç­‰ç©ºé•œï¼Œåœ¨å‰ªè¾‘æ—¶ç©¿æ’è¿›å»ï¼Œæå¤§åœ°ä¸°å¯Œè§†é¢‘çš„è§†è§‰è¯­è¨€å’Œæƒ…æ„Ÿæ·±åº¦ã€‚</p>
<h4 data-id="heading-11">Bridge (æ¡¥æ¥/â€œç¼åˆâ€)</h4>
<p>å®šä¹‰ï¼šä¸€ç§è¿æ¥æˆ–â€œç¼åˆâ€ä¸¤ä¸ªç‹¬ç«‹æ•°å­—å…ƒç´ æˆ–æµç¨‹çš„æŠ€æœ¯ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªè¿è´¯çš„æ•´ä½“ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªæ¯”Blendingæ›´å…·ç»“æ„æ€§çš„æ¦‚å¿µã€‚å¦‚æœè¯´Blendingæ˜¯â€œæ°´ä¹³äº¤èâ€ï¼Œé‚£ä¹ˆBridgeæ›´åƒæ˜¯â€œæ¶èµ·æ¡¥æ¢â€ã€‚åœ¨å»ºæ¨¡é¢†åŸŸï¼Œæ¡¥æ¥ç½‘æ ¼æ–¹æ³•ï¼ˆbridgeing meshesï¼‰å°±æ˜¯ç”¨æ¥å°†ä¸¤ä¸ªç‹¬ç«‹çš„3Dç½‘æ ¼æ— ç¼åœ°â€œç¼åˆâ€åœ¨ä¸€èµ·ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>
<p>åœºæ™¯æ¡¥æ¥ï¼šåœ¨AIè§†é¢‘ä¸­ï¼Œä»ä¸€ä¸ªåœºæ™¯å¹³æ»‘è¿‡æ¸¡åˆ°å¦ä¸€ä¸ªåœºæ™¯çš„è½¬åœºç‰¹æ•ˆï¼Œå°±æ˜¯ä¸€ç§è§†è§‰ä¸Šçš„â€œæ¡¥æ¥â€ã€‚</p>
</li>
<li>
<p>æµç¨‹æ¡¥æ¥ï¼šä½ ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼Œèƒ½å°†Midjourneyç”Ÿæˆçš„2Då›¾ç‰‡ï¼Œä¸€é”®å¯¼å…¥å¹¶è½¬æ¢ä¸º3Dæ¨¡å‹ï¼Œè¿™ä¸ªå·¥å…·æœ¬èº«å°±æ‰®æ¼”äº†â€œæ¡¥æ¥â€2Dä¸3Då·¥ä½œæµçš„è§’è‰²ã€‚</p>
</li>
<li>
<p>éŸ³ä¹æ¡¥æ¥ï¼šåœ¨AIéŸ³ä¹ç”Ÿæˆä¸­ï¼Œæ­Œæ›²ä¸­ç”¨äºè¿æ¥ä¸»æ­Œï¼ˆVerseï¼‰å’Œå‰¯æ­Œï¼ˆChorusï¼‰çš„è¿‡æ¸¡æ®µè½ï¼Œåœ¨éŸ³ä¹ç»“æ„ä¸Šè¢«ç§°ä¸ºâ€œBridgeâ€ï¼Œå®ƒèµ·åˆ°äº†æ‰¿ä¸Šå¯ä¸‹çš„æ¡¥æ¢ä½œç”¨ã€‚</p>
</li>
</ul>
<h2 data-id="heading-12">å­—æ¯Cï¼š</h2>
<h4 data-id="heading-13">Consistency (ä¸€è‡´æ€§)</h4>
<p>å®šä¹‰ï¼šåœ¨è¿ç»­çš„å›¾åƒåºåˆ—æˆ–è§†é¢‘å¸§ä¸­ï¼Œä¿æŒç‰¹å®šè§’è‰²ã€ç‰©ä½“æˆ–åœºæ™¯çš„æ ¸å¿ƒç‰¹å¾ï¼ˆå¦‚é¢éƒ¨ã€æœè£…ã€å‘å‹ã€èƒŒæ™¯ï¼‰ä¸å‘ç”Ÿæ”¹å˜çš„èƒ½åŠ›ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šå½“å‰æœ€å‰æ²¿çš„è§£å†³æ–¹æ¡ˆï¼Œä¸å†ä¾èµ–å•ä¸€å·¥å…·ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªâ€œä¸€è‡´æ€§è§’è‰²å·¥ä½œæµâ€ã€‚è¿™ä¸ªå·¥ä½œæµçš„æ ¸å¿ƒï¼Œå¾€å¾€æ˜¯å¤šç§æŠ€æœ¯çš„ååŒä½œæˆ˜ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ç»“åˆä½¿ç”¨IP-Adapter Face IDå’ŒControlNetï¼Œå¯ä»¥é«˜ä¿çœŸåº¦åœ°å¤åˆ¶å‚è€ƒå›¾åƒä¸­çš„äººè„¸ç‰¹å¾ï¼Œä»è€Œæœ€ç»ˆå®ç°äººç‰©è§’è‰²çš„ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-14">ControlNet (ç²¾å‡†æ§åˆ¶ç½‘ç»œ)</h4>
<p>å®šä¹‰ï¼šä¸€ä¸ªé©å‘½æ€§çš„ç¥ç»ç½‘ç»œé™„åŠ æ¨¡å—ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡æä¾›é¢å¤–çš„â€œæ§åˆ¶å›¾â€ï¼ˆå¦‚éª¨éª¼å§¿åŠ¿ã€çº¿ç¨¿ã€æ·±åº¦å›¾ï¼‰æ¥ç²¾ç¡®åœ°ã€åœ¨ç©ºé—´ä¸ŠæŒ‡å¯¼AIå›¾åƒçš„ç”Ÿæˆè¿‡ç¨‹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´Promptæ˜¯å‘Šè¯‰AIâ€œç”»ä»€ä¹ˆâ€ï¼Œé‚£ä¹ˆControlNetå°±æ˜¯é€’ç»™AIä¸€å¼ â€œç²¾å‡†çš„æ–½å·¥å›¾çº¸â€ï¼Œå‘Šè¯‰å®ƒâ€œæ€ä¹ˆç”»â€ã€‚å®ƒå°±åƒAIç”»å®¶çš„â€œéª¨æ¶â€å’Œâ€œè„šæ‰‹æ¶â€ï¼Œè®©AIçš„åˆ›é€ åŠ›ä¸å†æ˜¯å¤©é©¬è¡Œç©ºçš„â€œç›²ç›’â€ï¼Œè€Œæ˜¯å¯ä»¥è¢«ç²¾ç¡®å¼•å¯¼çš„â€œå®šå‘åˆ›ä½œâ€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨ä¸€è‡´æ€§å·¥ä½œæµä¸­ï¼ŒControlNetçš„ä¸»è¦èŒè´£æ˜¯å›ºå®šæ„å›¾å’Œå§¿åŠ¿ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡æä¾›ä¸€å¼ éª¨éª¼å›¾è¿æ¥åˆ°ControlNetèŠ‚ç‚¹ï¼Œæ¥ç¡®ä¿ç”Ÿæˆçš„è§’è‰²åœ¨ä¸åŒå›¾ç‰‡ä¸­éƒ½ä¿æŒç€ä½ æƒ³è¦çš„ç‰¹å®šå§¿åŠ¿ã€‚ControlNetçš„å¨åŠ›åœ¨äºâ€œç»„åˆæ‹³â€ã€‚å®ƒé€šå¸¸ä¸IP-Adapter Face IDè¿™ç±»ä¸“é—¨è¯†åˆ«äººè„¸ç‰¹å¾çš„å·¥å…·ç»“åˆä½¿ç”¨ï¼šControlNetè´Ÿè´£å›ºå®šå§¿åŠ¿å’Œæ„å›¾ï¼ŒIP-Adapterè´Ÿè´£â€œæ¢ä¸Šâ€æ­£ç¡®çš„è„¸ï¼Œä¸¤è€…ç»“åˆæ‰èƒ½ç”Ÿæˆæ—¢æœ‰æŒ‡å®šå§¿åŠ¿ã€åˆæœ‰æ­£ç¡®é¢å­”çš„ä¸€è‡´æ€§è§’è‰²å›¾ç‰‡ã€‚</p>
<h4 data-id="heading-15">CLIP (Contrastive Language-Image Pre-trainingï¼Œè¯­è¨€-å›¾åƒå¯¹æ¯”é¢„è®­ç»ƒ)</h4>
<p>å®šä¹‰ï¼šç”±OpenAIå¼€å‘çš„ä¸€æ¬¾åŸºç¡€æ¨¡å‹ï¼Œå®ƒé€šè¿‡å­¦ä¹ æµ·é‡çš„â€œå›¾ç‰‡-æ–‡å­—â€é…å¯¹ï¼Œæ·±åˆ»åœ°ç†è§£äº†äººç±»è¯­è¨€æè¿°ä¸è§†è§‰å†…å®¹ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šCLIPæ˜¯æ•´ä¸ªæ–‡ç”Ÿå›¾é­”æ³•çš„åŸºçŸ³ã€‚å®ƒå°±æ˜¯é‚£ä¸ªèƒ½å¬æ‡‚â€œä¸€åªæˆ´ç€å¢¨é•œçš„æŸ¯åŸºçŠ¬åœ¨å¤ªç©ºå†²æµªâ€è¿™å¥â€œå’’è¯­â€çš„â€œé€šç”¨ç¿»è¯‘å®˜â€ã€‚å½“ä½ è¾“å…¥Promptæ—¶ï¼ŒCLIPå°†å…¶ç¿»è¯‘æˆAIåœ¨â€œæ½œç©ºé—´â€é‡Œèƒ½å¤Ÿç†è§£çš„â€œå¯»è·¯æŒ‡ä»¤â€ï¼Œç„¶åæ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelï¼‰å†æ ¹æ®è¿™ä¸ªæŒ‡ä»¤å»ç”Ÿæˆç”»é¢ã€‚æ²¡æœ‰CLIPï¼Œæ–‡ç”Ÿå›¾å°±æ— ä»è°ˆèµ·ã€‚</p>
<h4 data-id="heading-16">ComfyUI</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3c43421f66049d1a4b5bf9110595d84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=hCoqoU0XvGR3kEAF3nrI6nnl1O8%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªå¼ºå¤§çš„ã€åŸºäºèŠ‚ç‚¹çš„ã€å¯è§†åŒ–çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œä¸»è¦ç”¨äºStable Diffusionå·¥ä½œæµçš„æ­å»ºä¸æ‰§è¡Œã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´ä¼ ç»Ÿçš„AIç»˜ç”»è½¯ä»¶æ˜¯â€œè‡ªåŠ¨æŒ¡æ±½è½¦â€ï¼Œæä¾›äº†å›ºå®šçš„æŒ‰é’®å’Œæ»‘å—ï¼›é‚£ä¹ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.comfy.org%2Fzh-cn%2F" target="_blank" title="https://www.comfy.org/zh-cn/" ref="nofollow noopener noreferrer">ComfyUI</a>å°±æ˜¯â€œæ‰‹åŠ¨æŒ¡èµ›è½¦â€çš„â€œæ”¹è£…è½¦é—´â€ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½ï¼ˆåŠ è½½æ¨¡å‹ã€è¾“å…¥Promptã€åº”ç”¨ControlNetã€æ”¾å¤§å›¾åƒï¼‰éƒ½æ˜¯ä¸€ä¸ªâ€œèŠ‚ç‚¹â€ï¼Œä½ å¯ä»¥åƒæ­ç”µè·¯å›¾ä¸€æ ·ï¼Œç”¨çº¿æ¡å°†è¿™äº›èŠ‚ç‚¹è‡ªç”±åœ°è¿æ¥èµ·æ¥ï¼Œåˆ›é€ å‡ºç‹¬ä¸€æ— äºŒã€æåº¦å¤æ‚çš„ä¸“å±å·¥ä½œæµã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šComfyUIæ˜¯é«˜é˜¶AIGCç©å®¶çš„ä¹å›­ã€‚è®¸å¤šæœ€å‰æ²¿ã€æœ€å¤æ‚çš„ä¸€è‡´æ€§å·¥ä½œæµï¼Œä¾‹å¦‚å¤šäººä¸€è‡´æ€§æ¢è„¸ã€ç»“åˆå¤šç§ControlNetçš„è¿›é˜¶ç”¨æ³•ï¼Œéƒ½æ˜¯åœ¨ComfyUIçš„ç¯å¢ƒä¸­è¢«å¼€å‘ã€åˆ†äº«å’Œæ•™æˆçš„ã€‚å½“ä½ æƒ³è¦è¶…è¶Šæ ‡å‡†å·¥å…·çš„é™åˆ¶ï¼Œå®ç°ä¸€äº›è¿›é˜¶æ“ä½œæ—¶ï¼ŒComfyUIå°±æ˜¯ä½ çš„ç»ˆææ­¦å™¨ã€‚</p>
<h4 data-id="heading-17">Chorus (å‰¯æ­Œ)</h4>
<p>å®šä¹‰ï¼šåœ¨éŸ³ä¹ç»“æ„ä¸­ï¼ŒæŒ‡ä¸€é¦–æ­Œæ›²ä¸­åå¤å‡ºç°ã€æ—‹å¾‹æœ€æŠ“è€³ã€æƒ…æ„Ÿæœ€å¼ºçƒˆçš„éƒ¨åˆ†ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šåœ¨AIéŸ³ä¹ç”Ÿæˆï¼ˆå¦‚ Suno, Elevenlabsï¼‰çš„å®è·µä¸­ï¼Œ<code>[Chorus]</code>æ˜¯ä¸€ä¸ªå…·æœ‰é­”åŠ›çš„â€œç»“æ„æ ‡ç­¾â€ã€‚å½“AIè¯†åˆ«åˆ°è¿™ä¸ªæ ‡ç­¾æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨â€œå‡è°ƒâ€ï¼Œä¸ºä¸»æ—‹å¾‹æ³¨å…¥æ›´å¼ºçš„åŠ›é‡æ„Ÿå’Œè®°å¿†ç‚¹ï¼Œç¼–æ›²ä¹Ÿä¼šå˜å¾—æ›´ä¸°æ»¡ã€æ›´å…·çˆ†å‘åŠ›ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè¿™åŒæ ·æ˜¯â€œæ§åˆ¶â€çš„ä¸€ç§ä½“ç°ã€‚é€šè¿‡åœ¨ä½ çš„æ­Œè¯ä¸­æ ‡æ³¨<code>[Verse]</code>ï¼ˆä¸»æ­Œï¼‰ã€<code>[Pre-Chorus]</code>ï¼ˆå‰å‰¯æ­Œï¼‰ã€<code>[Chorus]</code>ï¼ˆå‰¯æ­Œï¼‰ã€<code>[Bridge]</code>ï¼ˆæ¡¥æ®µï¼‰ç­‰ç»“æ„ï¼Œä½ å°±æ˜¯åœ¨æŒ‡æŒ¥AIâ€œå¯¼æ¼”â€ä¸€é¦–ç»“æ„å®Œæ•´ã€èµ·æ‰¿è½¬åˆçš„æ­Œæ›²ï¼Œè€Œéä¸€æ®µå•è°ƒçš„æ—‹å¾‹å¾ªç¯ã€‚</p>
<h2 data-id="heading-18">å­—æ¯Dï¼š</h2>
<h4 data-id="heading-19">Dataset (æ•°æ®é›†)</h4>
<p>å®šä¹‰ï¼šç”¨äºè®­ç»ƒAIæ¨¡å‹çš„å¤§é‡ã€æœ‰ç»“æ„çš„æ•°æ®é›†åˆã€‚ å®ƒæ˜¯AIæ¨¡å‹çš„â€œæ•™ç§‘ä¹¦â€å’Œâ€œç²¾ç¥é£Ÿç²®â€ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šæ¨¡å‹çš„è´¨é‡ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå®ƒâ€œåƒâ€äº†ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚ä¸€ä¸ªç”¨æ¥ç”»äºŒæ¬¡å…ƒé£æ ¼çš„æ¨¡å‹ï¼Œå®ƒçš„æ•°æ®é›†ä¸­å°±åŒ…å«äº†æµ·é‡çš„åŠ¨æ¼«å›¾ç‰‡ï¼›ä¸€ä¸ªç”¨æ¥å†™ä»£ç çš„æ¨¡å‹ï¼Œåˆ™å­¦ä¹ è®­ç»ƒäº†GitHubä¸Šå‡ ä¹æ‰€æœ‰çš„å¼€æºä»£ç ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè™½ç„¶å¤§éƒ¨åˆ†åˆ›ä½œè€…ä¸ç›´æ¥å¤„ç†æ•°æ®é›†ï¼Œä½†ç†è§£è¿™ä¸ªæ¦‚å¿µæœ‰åŠ©äºä½ åˆ¤æ–­ä¸€ä¸ªæ¨¡å‹çš„â€œå‡ºèº«â€å’Œâ€œä¸“é•¿â€ã€‚å½“ä¸€ä¸ªæ¨¡å‹å®£ç§°è‡ªå·±ä½¿ç”¨äº†â€œé«˜è´¨é‡ã€ç»è¿‡ç²¾ç»†æ¸…æ´—â€çš„æ•°æ®é›†æ—¶ï¼Œé€šå¸¸æ„å‘³ç€å®ƒç”Ÿæˆå†…å®¹çš„è´¨é‡å’Œå¯é æ€§ä¼šæ›´é«˜ã€‚</p>
<h4 data-id="heading-20">Diffusion Model (æ‰©æ•£æ¨¡å‹)</h4>
<p>å®šä¹‰ï¼šä¸€ç§æ·±åº¦ç”Ÿæˆæ¨¡å‹ï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡å­¦ä¹ ä¸€ä¸ªâ€œå»å™ªâ€ï¼ˆDenoisingï¼‰è¿‡ç¨‹ï¼Œæ¥ä»çº¯ç²¹çš„éšæœºå™ªå£°ä¸­é€æ­¥ç”Ÿæˆç¬¦åˆç‰¹å®šæè¿°çš„æ•°æ®ï¼ˆå¦‚å›¾åƒã€éŸ³é¢‘ï¼‰ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™æ­£æ˜¯å½“ä»Šæ‰€æœ‰é¡¶çº§æ–‡ç”Ÿå›¾/è§†é¢‘æ¨¡å‹ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2F302.ai%2Fsearch%3Fkeyword%3Dstability" target="_blank" title="https://302.ai/search?keyword=stability" ref="nofollow noopener noreferrer">Stable Diffusion</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2F302.ai%2Fsearch%3Fkeyword%3DMidjourney" target="_blank" title="https://302.ai/search?keyword=Midjourney" ref="nofollow noopener noreferrer">Midjourney</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2F302.ai%2Fsearch%3Fkeyword%3DNano%2BBanana" target="_blank" title="https://302.ai/search?keyword=Nano+Banana" ref="nofollow noopener noreferrer">Nano Banana</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2F302.ai%2Fsearch%3Fkeyword%3DSora" target="_blank" title="https://302.ai/search?keyword=Sora" ref="nofollow noopener noreferrer">Sora</a>ï¼‰èƒŒåçš„â€œåˆ›ä¸–å¼•æ“â€ã€‚ä½ å¯ä»¥å°†å®ƒçš„å·¥ä½œåŸç†æƒ³è±¡æˆä¸€ä¸ªâ€œæ—¶é—´å€’æµçš„é›•å¡‘å®¶â€ï¼š</p>
<ol>
<li>
<p>æ­£å‘è¿‡ç¨‹ï¼ˆåŠ å™ªï¼‰ï¼šé›•å¡‘å®¶å…ˆçœ‹ç€ä¸€åº§å®Œç¾çš„å¤§å«åƒï¼Œç„¶åä¸€æ­¥æ­¥æŠŠå®ƒç ¸æˆä¸€å †æ¯«æ— è§„å¾‹çš„ç¢çŸ³ï¼ˆéšæœºå™ªå£°ï¼‰ã€‚æ¨¡å‹ä¼šè®°ä½è¿™ä¸ªâ€œä»æœ‰åºåˆ°æ··æ²Œâ€çš„æ¯ä¸€æ­¥ã€‚</p>
</li>
<li>
<p>åå‘è¿‡ç¨‹ï¼ˆå»å™ª/ç”Ÿæˆï¼‰ï¼šç°åœ¨ï¼Œä½ ç»™é›•å¡‘å®¶ä¸‹è¾¾æŒ‡ä»¤â€œç»™æˆ‘ä¸€åº§å¤§å«åƒâ€ã€‚ä»–ä¼šä»ä¸€å †éšæœºçš„ç¢çŸ³ï¼ˆå™ªå£°ï¼‰å¼€å§‹ï¼Œåˆ©ç”¨ä»–åœ¨ç¬¬ä¸€æ­¥å­¦åˆ°çš„â€œæ—¶é—´å€’æµâ€çš„è®°å¿†ï¼Œä¸€æ­¥æ­¥åœ°å°†ç¢çŸ³â€œé›•åˆ»â€å›å¤§å«åƒçš„æ¨¡æ ·ã€‚è¿™ä¸ªâ€œé›•åˆ»â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å»å™ªï¼ˆDenoisingï¼‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-21">Digital Avatar / Digital Human (æ•°å­—äºº)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f4d34af7b584fc087b89ae027ee9d17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=Cn6D78bZcslIRZDFymcbN0dit6w%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªé€šè¿‡è®¡ç®—æœºå›¾å½¢å­¦ï¼ˆCGï¼‰ã€äººå·¥æ™ºèƒ½ç­‰æŠ€æœ¯åˆ›å»ºçš„ã€å…·æœ‰äººç±»å¤–è§‚ã€è¡Œä¸ºä¹ƒè‡³æ€æƒ³çš„æ•°å­—åŒ–ã€æ‹ŸäººåŒ–å½¢è±¡ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯ä½ åœ¨ç§‘å¹»ç”µå½±é‡Œçœ‹åˆ°çš„ã€åœ¨è™šæ‹Ÿä¸–ç•Œä¸­ä¸ä½ äº¤äº’çš„â€œè™šæ‹Ÿäººâ€æˆ–â€œæ•°å­—åˆ†èº«â€ã€‚æ ¹æ®å…¶é©±åŠ¨æ–¹å¼å’Œé€¼çœŸç¨‹åº¦ï¼Œæ•°å­—äººå¯ä»¥è¢«åˆ†ä¸ºå‡ ä¸ªâ€œæµæ´¾â€ï¼š</p>
<ol>
<li>
<p>å¡é€šåŒ–èº«ï¼ˆAvatarï¼‰ï¼šæœ€åŸºç¡€çš„å½¢æ€ï¼Œæ¯”å¦‚ä½ åœ¨ç¤¾äº¤Appé‡Œæçš„Qç‰ˆå°äººï¼Œä¸»è¦ç”¨äºä¸ªäººè¡¨è¾¾å’Œç¤¾äº¤ã€‚</p>
</li>
<li>
<p>æ‹ŸçœŸäººï¼ˆRealistic Humanï¼‰ï¼šä»¥é«˜åº¦é€¼çœŸä¸ºç›®æ ‡ï¼Œè¿½æ±‚ç…§ç‰‡çº§çš„è§†è§‰æ•ˆæœï¼Œå¸¸ç”¨äºè™šæ‹Ÿå¶åƒã€æ•°å­—å®¢æœç­‰åœºæ™¯ã€‚</p>
</li>
<li>
<p>AIé©±åŠ¨çš„æ‹ŸçœŸäººï¼ˆAI-Driven Digital Humanï¼‰ï¼šè¿™æ˜¯æ•°å­—äººæŠ€æœ¯çš„â€œåœ£æ¯â€ã€‚å®ƒä¸ä»…å¤–è¡¨é€¼çœŸï¼Œå…¶è¯­è¨€ã€è¡¨æƒ…å’ŒåŠ¨ä½œå®Œå…¨ç”±AIé©±åŠ¨ç”Ÿæˆï¼Œèƒ½å¤Ÿä¸äººè¿›è¡Œå®æ—¶ã€è‡ªç„¶çš„äº¤äº’ã€‚</p>
</li>
</ol>
<ul>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨AIGCå·¥ä½œæµä¸­ï¼Œæ•°å­—äººæ˜¯ä½ æœ€å¼ºå¤§çš„â€œæ¼”å‘˜â€å’Œâ€œä»£è¨€äººâ€ã€‚</p>
<ul>
<li>
<p>AIéŸ³ä¹MVï¼šè®©ä½ çš„æ•°å­—äººä½œä¸ºä¸»è§’ï¼Œæ¼”å”±ä½ ç”¨AIç”Ÿæˆçš„æ­Œæ›²ã€‚</p>
</li>
<li>
<p>è™šæ‹Ÿç›´æ’­/å®¢æœï¼šåˆ›å»ºä¸€ä¸ªæ°¸ä¸ç–²å€¦ã€24å°æ—¶åœ¨çº¿çš„AIä¸»æ’­æˆ–å®¢æœã€‚</p>
</li>
<li>
<p>å†…å®¹åˆ›ä½œï¼šä½¿ç”¨D-IDè¿™ç±»å¹³å°ï¼Œä½ åªéœ€ä¸Šä¼ ä¸€å¼ äººåƒç…§ç‰‡å’Œä¸€æ®µæ–‡æœ¬ï¼Œå°±èƒ½å¿«é€Ÿç”Ÿæˆä¸€æ®µâ€œå¼€å£è¯´è¯â€çš„æ‹ŸçœŸäººè§†é¢‘ï¼Œæå¤§åœ°é™ä½äº†å†…å®¹åˆ›ä½œçš„é—¨æ§›ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-22">Denoising (å»å™ª)</h4>
<p>å®šä¹‰ï¼šæ‰©æ•£æ¨¡å‹åœ¨ç”Ÿæˆå›¾åƒæ—¶ï¼Œä»ä¸€ä¸ªå……æ»¡å™ªå£°çš„çŠ¶æ€ï¼Œé€æ­¥è¿­ä»£å»é™¤å™ªå£°ï¼Œæœ€ç»ˆæ˜¾ç°å‡ºæ¸…æ™°å›¾åƒçš„æ ¸å¿ƒè¿‡ç¨‹ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨å›¾ç”Ÿå›¾ï¼ˆimg2imgï¼‰æˆ–Inpaintingä¸­ï¼Œæœ‰ä¸€ä¸ªè‡³å…³é‡è¦çš„å‚æ•°å«å»å™ªå¼ºåº¦â€ï¼ˆDenoising Strengthï¼‰ã€‚è¿™ä¸ªå€¼åœ¨0åˆ°1ä¹‹é—´ï¼Œå®ƒå†³å®šäº†AIåœ¨ä½ çš„åŸå§‹å›¾ç‰‡åŸºç¡€ä¸Šâ€œé‡æ–°åˆ›ä½œâ€çš„å¹…åº¦æœ‰å¤šå¤§ã€‚</p>
<p>ä½Denoisingï¼ˆå¦‚0.3ï¼‰ï¼šAIåªå¯¹å›¾ç‰‡è¿›è¡Œå¾®å°çš„æ”¹åŠ¨å’Œç»†èŠ‚å¢å¼ºï¼Œéå¸¸å¿ äºåŸå›¾ã€‚é€‚åˆç”¨äºä¿®å¤å’Œé«˜æ¸…åŒ–ã€‚</p>
<p>é«˜Denoisingï¼ˆå¦‚0.8ï¼‰ï¼šAIåŸºæœ¬ä¸Šåªä¼šä¿ç•™åŸå›¾çš„æ„å›¾å’Œè‰²å½©ï¼Œç„¶åå¤§åˆ€é˜”æ–§åœ°è¿›è¡Œâ€œé‡ç»˜â€ï¼Œç”Ÿæˆä¸€ä¸ªä¸åŸå›¾é£æ ¼è¿¥å¼‚ä½†ç»“æ„ç›¸ä¼¼çš„æ–°ä½œå“ã€‚</p>
<h4 data-id="heading-23">Dreambooth</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d260306bbb44133be583b4a6980408a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=HXcx4KJjswh3Odq0sYBrvIREWT8%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ç§å¼ºå¤§çš„ã€ç”¨äºä¸ªæ€§åŒ–æ–‡æœ¬åˆ°å›¾åƒæ¨¡å‹çš„å¾®è°ƒæŠ€æœ¯ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡æä¾›æå°‘é‡ï¼ˆé€šå¸¸æ˜¯10-20å¼ ï¼‰çš„ç‰¹å®šä¸»ä½“ï¼ˆäººç‰©ã€å® ç‰©ã€ç‰©ä½“ï¼‰çš„å›¾ç‰‡ï¼Œæ¥â€œæ•™ä¼šâ€æ¨¡å‹è®¤è¯†å¹¶ç”Ÿæˆè¿™ä¸ªä¸»ä½“ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIGCé¢†åŸŸçš„â€œæ•°å­—å…‹éš†æŠ€æœ¯â€ã€‚ä½ åªéœ€è¦ç»™ä½ å®¶çŒ«å’ªæ‹åå‡ å¼ ä¸åŒè§’åº¦çš„ç…§ç‰‡ï¼Œé€šè¿‡Dreamboothè®­ç»ƒåï¼ŒAIå°±å½»åº•â€œè®¤è¯†â€äº†ä½ çš„çŒ«ã€‚ä»æ­¤ï¼Œä½ å¯ä»¥è®©å®ƒç”Ÿæˆâ€œä½ çš„çŒ«åœ¨æœˆçƒä¸Šå¼€é«˜è¾¾â€æˆ–è€…â€œä½ çš„çŒ«å˜æˆäº†æ¯•åŠ ç´¢é£æ ¼çš„ç”»ä½œâ€ï¼Œè€Œä¸”ç”Ÿæˆå‡ºæ¥çš„çŒ«ï¼Œåœ¨å¤–å½¢ã€æ¯›è‰²å’Œç¥æ€ä¸Šéƒ½ä¸ä½ çš„çŒ«é«˜åº¦ä¸€è‡´ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šDreamboothæ˜¯å®ç°è§’è‰²ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰çš„â€œé‡æ­¦å™¨â€ã€‚</p>
<p>Â Â è™šæ‹Ÿå†™çœŸ/æ•°å­—åˆ†èº«ï¼šè®­ç»ƒä¸€ä¸ªå…³äºä½ è‡ªå·±çš„æ¨¡å‹ï¼Œç”Ÿæˆå„ç§é£æ ¼å’Œåœºæ™¯ä¸‹çš„AIå†™çœŸã€‚</p>
<p>Â Â IPè§’è‰²åˆ›ä½œï¼šä¸ºä½ çš„æ¼«ç”»æˆ–å°è¯´ä¸»è§’åˆ›å»ºä¸€ä¸ªä¸“å±æ¨¡å‹ï¼Œç¡®ä¿ä»–åœ¨æ‰€æœ‰æ’å›¾ä¸­éƒ½ä¿æŒä¸€è‡´çš„å½¢è±¡ã€‚</p>
<p>Â Â äº§å“å±•ç¤ºï¼šè®­ç»ƒä¸€ä¸ªå…³äºä½ äº§å“å¤–è§‚çš„æ¨¡å‹ï¼Œç”Ÿæˆå„ç§åˆ›æ„å¹¿å‘Šå›¾ã€‚</p>
<p>Â Â ä¸LoRAçš„åŒºåˆ«ï¼šç›¸æ¯”æ›´è½»é‡çš„LoRAï¼ŒDreamboothè®­ç»ƒæ›´å½»åº•ï¼Œç”Ÿæˆçš„ä¸»ä½“ä¿çœŸåº¦æ›´é«˜ï¼Œä½†æ¨¡å‹æ–‡ä»¶ä¹Ÿæ›´å¤§ï¼Œè®­ç»ƒæ—¶é—´æ›´é•¿ã€‚</p>
<h4 data-id="heading-24">Detailer (ç»†èŠ‚å¢å¼ºå™¨/â€œç²¾ä¿®å¸ˆâ€)</h4>
<p>å®šä¹‰ï¼šåœ¨AIç»˜ç”»å·¥ä½œæµä¸­ï¼Œç‰¹æŒ‡ä¸€ç§ç”¨äºè‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤/é‡ç»˜å›¾åƒä¸­ç‰¹å®šåŒºåŸŸï¼ˆå°¤å…¶æ˜¯äººè„¸å’Œæ‰‹éƒ¨ï¼‰çš„åå¤„ç†æ’ä»¶æˆ–èŠ‚ç‚¹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯ä½ å·¥ä½œæµé‡Œçš„â€œAIæ•´å®¹åŒ»ç”Ÿâ€å’Œâ€œAIç¾ç”²å¸ˆâ€ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒAIç”»æ‰‹å’Œè„¸æ—¶ç»å¸¸ä¼šâ€œç¿»è½¦â€ï¼ˆäº§ç”ŸArtifactsï¼‰ã€‚Detailerçš„ä½œç”¨å°±æ˜¯ï¼Œåœ¨ä½ ç”Ÿæˆå®Œä¸€å¼ ä¸»ä½“æ»¡æ„çš„å›¾ç‰‡åï¼Œå®ƒä¼šè‡ªåŠ¨æ¡†é€‰å‡ºå›¾ç‰‡ä¸­çš„è„¸å’Œæ‰‹ï¼Œç„¶åè°ƒç”¨ä¸€ä¸ªä¸“é—¨çš„æ¨¡å‹ï¼Œåªåœ¨è¿™ä¸¤ä¸ªå°åŒºåŸŸå†…è¿›è¡Œä¸€æ¬¡é«˜è´¨é‡çš„â€œé‡ç»˜â€ï¼Œç”¨ä¸€å¼ å®Œç¾çš„è„¸å’Œä¸€åŒæ¼‚äº®çš„æ‰‹ï¼Œå»æ›¿æ¢æ‰åŸæ¥ç”»å´©äº†çš„éƒ¨åˆ†ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šDetaileræ˜¯æå‡AIç»˜ç”»æˆå“ç‡çš„å¿…å¤‡ç¥å™¨ï¼Œå°¤å…¶æ˜¯åœ¨æ‰¹é‡å‡ºå›¾ï¼ˆBatchï¼‰æ—¶ã€‚ä½ å¯ä»¥åœ¨ComfyUIç­‰èŠ‚ç‚¹å¼å·¥ä½œæµçš„æœ«ç«¯ï¼Œæ¥ä¸Šä¸€ä¸ªFace Detailerå’Œä¸€ä¸ªHand DetailerèŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œæ— è®ºä½ å‰é¢ç”Ÿæˆäº†å¤šå°‘å¼ â€œå…­æŒ‡ç‹‚é­”â€ï¼Œæµåˆ°æœ€åçš„æˆå“éƒ½ä¼šè¢«è‡ªåŠ¨â€œæ²»æ„ˆâ€ï¼Œæå¤§åœ°èŠ‚çœäº†ä½ æ‰‹åŠ¨ä¿®å¤çš„æ—¶é—´ã€‚</p>
<h4 data-id="heading-25">DALL-E</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb4466c33ae74114958641e96c43a0ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=PAIPsIbFDzzfcpnoBvLfkQgQ%2B5w%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šç”±OpenAIå¼€å‘çš„ä¸€ç³»åˆ—è‘—åçš„æ–‡ç”Ÿå›¾æ¨¡å‹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šä½œä¸ºæœ€æ—©è®©å…¬ä¼—è§è¯†åˆ°AIæƒŠäººåˆ›é€ åŠ›çš„æ¨¡å‹ä¹‹ä¸€ï¼ŒDALL-E ç³»åˆ—åœ¨AIGCçš„å†å²ä¸Šå…·æœ‰æ ‡å¿—æ€§åœ°ä½ã€‚â€œDALL-Eâ€è¿™ä¸ªåå­—æœ¬èº«å°±æ˜¯å¯¹è¶…ç°å®ä¸»ä¹‰ç”»å®¶è¨å°”ç“¦å¤šÂ·è¾¾åˆ©ï¼ˆSalvador DalÃ­ï¼‰å’Œçš®å…‹æ–¯åŠ¨ç”»è§’è‰²ç“¦åŠ›ï¼ˆWALL-Eï¼‰çš„è‡´æ•¬ã€‚</p>
<h2 data-id="heading-26">å­—æ¯Eï¼š</h2>
<h4 data-id="heading-27">Embedding (åµŒå…¥)</h4>
<p>å®šä¹‰ï¼šä¸€ç§å°†é«˜ç»´åº¦ã€ç¦»æ•£çš„æ•°æ®ï¼ˆå¦‚æ–‡å­—ã€å›¾ç‰‡ã€å£°éŸ³ï¼‰æ˜ å°„ï¼ˆmappingï¼‰åˆ°ä½ç»´ã€è¿ç»­çš„å‘é‡ç©ºé—´çš„æŠ€æœ¯ã€‚è¿™ä¸ªç”Ÿæˆçš„å‘é‡ï¼Œå°±æ˜¯è¯¥æ•°æ®çš„â€œåµŒå…¥â€ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å¯èƒ½æ˜¯æ•´ä¸ªAIæŠ€æœ¯ä¸­æœ€æ ¸å¿ƒã€ä¹Ÿæœ€æŠ½è±¡çš„æ¦‚å¿µä¹‹ä¸€ï¼Œä½†æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºâ€œå®‡å®™çš„é€šç”¨è¯­è¨€â€æˆ–â€œä¸‡ç‰©çš„æ•°å­—DNAâ€ã€‚åœ¨AIçš„â€œç²¾ç¥ä¸–ç•Œâ€ï¼ˆæ½œç©ºé—´ï¼‰é‡Œï¼Œæ— è®ºæ˜¯ä¸­æ–‡çš„â€œçŒ«â€ã€è‹±æ–‡çš„â€œcatâ€ï¼Œè¿˜æ˜¯ä¸€å¼ çœŸå®çš„çŒ«å’ªå›¾ç‰‡ï¼Œå®ƒä»¬éƒ½ä¼šè¢«â€œç¿»è¯‘â€æˆä¸€æ®µç‹¬ç‰¹çš„æ•°å­—ä»£ç ï¼ˆå‘é‡ï¼‰ï¼Œè¿™å°±æ˜¯å®ƒä»¬çš„Embeddingã€‚åœ¨è¿™ä¸ªç©ºé—´é‡Œï¼Œæ¦‚å¿µä¸Šè¶Šæ¥è¿‘çš„ä¸œè¥¿ï¼Œå®ƒä»¬çš„â€œæ•°å­—DNAâ€ä¹Ÿè¶Šç›¸ä¼¼ã€‚â€œçŒ«â€å’Œâ€œè€è™â€çš„Embeddingä¼šç¦»å¾—å¾ˆè¿‘ï¼Œè€Œâ€œçŒ«â€å’Œâ€œæ¤…å­â€çš„Embeddingåˆ™ä¼šç›¸è·ç”šè¿œã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šEmbeddingæ˜¯æ‰€æœ‰AIGCé­”æ³•çš„åŸºçŸ³ã€‚</p>
<ol>
<li>
<p>æ–‡ç”Ÿå›¾çš„æ¡¥æ¢ï¼šæ­£æ˜¯å› ä¸ºæœ‰äº†Embeddingï¼ŒCLIPæ¨¡å‹æ‰èƒ½å°†ä½ çš„æç¤ºè¯â€œç¿»è¯‘â€æˆå›¾åƒç”Ÿæˆæ¨¡å‹èƒ½ç†è§£çš„â€œå¯»è·¯åæ ‡â€ã€‚</p>
</li>
<li>
<p>é£æ ¼ä¸è§’è‰²çš„è½½ä½“ï¼šLoRAå’ŒDreamboothä¹‹æ‰€ä»¥èƒ½â€œè®°ä½â€ä¸€ä¸ªç‰¹å®šçš„ç”»é£æˆ–è§’è‰²ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å­¦ä¹ åˆ°äº†é‚£ä¸ªç”»é£æˆ–è§’è‰²çš„ç‹¬ç‰¹Embeddingã€‚</p>
</li>
<li>
<p>ç›¸ä¼¼æ€§æœç´¢ï¼šåœ¨å›¾åº“æˆ–ç´ æç½‘ç«™ï¼Œä½ ä¸Šä¼ ä¸€å¼ å›¾ç‰‡æœç´¢ç›¸ä¼¼å›¾ç‰‡ï¼ŒèƒŒåå°±æ˜¯é€šè¿‡è®¡ç®—å›¾ç‰‡Embeddingä¹‹é—´çš„â€œè·ç¦»â€æ¥å®ç°çš„ã€‚</p>
</li>
</ol>
<h4 data-id="heading-28">Editing (ç¼–è¾‘)</h4>
<p>å®šä¹‰ï¼šåœ¨AIç”Ÿæˆå†…å®¹çš„åˆæ­¥ç‰ˆæœ¬ä¹‹ä¸Šï¼Œåˆ©ç”¨æ›´å¤šçš„AIå·¥å…·æˆ–äººå·¥å¹²é¢„ï¼Œè¿›è¡Œä¿®æ”¹ã€ä¼˜åŒ–å’Œç²¾ç‚¼çš„è¿‡ç¨‹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šAIå¾ˆå°‘èƒ½â€œä¸€é”®æ¯•ä¸šâ€ã€‚åˆæ¬¡ç”Ÿæˆçš„å†…å®¹å¾€å¾€åªæ˜¯ä¸€ä¸ªâ€œæ¯›å¯æˆ¿â€ï¼Œè€ŒEditingå°±æ˜¯åç»­çš„â€œç²¾è£…ä¿®â€è¿‡ç¨‹ã€‚è¿™æ›´åƒæ˜¯ä¸€åœºâ€œæ•°å­—ä¸–ç•Œçš„éç ´åæ€§å¤–ç§‘æ‰‹æœ¯â€ï¼Œä½ å¯ä»¥ç²¾å‡†åœ°å¯¹ä½œå“çš„ä»»ä½•ä¸€ä¸ªå±€éƒ¨è¿›è¡Œâ€œå¾®è°ƒâ€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šEditingæ˜¯AIGCå·¥ä½œæµä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œå®ƒæ¶µç›–äº†å¤šç§æŠ€æœ¯ï¼š</p>
<ol>
<li>
<p>å±€éƒ¨é‡ç»˜ï¼šä½¿ç”¨Inpaintingï¼ˆå†…è¡¥ï¼‰å’ŒOutpaintingï¼ˆå¤–è¡¥ï¼‰æ¥ä¿®æ”¹ç”»é¢å†…å®¹ã€‚</p>
</li>
<li>
<p>ç»†èŠ‚å¢å¼ºï¼šä½¿ç”¨Detaileræ¥ä¿®å¤ç”»å´©äº†çš„æ‰‹å’Œè„¸ã€‚</p>
</li>
<li>
<p>æŒ‡ä»¤å¼ç¼–è¾‘ (Instruct-Pix2Pix)ï¼šä¸€ç§æ›´é«˜çº§çš„ç¼–è¾‘æ–¹å¼ã€‚ä½ ä¸å†éœ€è¦æ¶‚æŠ¹å’Œé‡ç»˜ï¼Œè€Œæ˜¯ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€ä¸‹æŒ‡ä»¤ï¼Œæ¯”å¦‚åœˆå‡ºä¸€ç‰‡å¤©ç©ºï¼Œç„¶åå‘Šè¯‰AIï¼šâ€œMake this sky more dramatic and stormyâ€ï¼ˆè®©è¿™ç‰‡å¤©ç©ºæ›´æœ‰æˆå‰§æ„Ÿã€æ›´åƒæš´é£é›¨ï¼‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-29">Efficiency (æ•ˆç‡)</h4>
<p>å®šä¹‰ï¼šè¡¡é‡ä¸€ä¸ªAIæ¨¡å‹åœ¨æ€§èƒ½ï¼ˆè´¨é‡ã€é€Ÿåº¦ï¼‰ä¸èµ„æºæ¶ˆè€—ï¼ˆæˆæœ¬ã€ç®—åŠ›ï¼‰ä¹‹é—´æ¯”ç‡çš„ç»¼åˆæŒ‡æ ‡ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIå¼•æ“çš„â€œé©¬åŠ›ä¸æ²¹è€—â€é—®é¢˜ã€‚ä¸€ä¸ªæ¨¡å‹å¯èƒ½æ•ˆæœæƒŠäººï¼ˆé©¬åŠ›å¤§ï¼‰ï¼Œä½†æ¯æ¬¡ç”Ÿæˆéƒ½è®©ä½ ç­‰åŠå°æ—¶ã€èŠ±æ‰å‡ åå—é’±ï¼ˆæ²¹è€—é«˜ï¼‰ï¼Œé‚£å®ƒçš„å®ç”¨æ€§å°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚ä¸€ä¸ªé«˜æ•ˆçš„æ¨¡å‹ï¼Œåº”è¯¥æ˜¯åœ¨ä¿è¯é«˜è´¨é‡è¾“å‡ºçš„åŒæ—¶ï¼Œå°½å¯èƒ½åœ°å¿«å’Œçœã€‚</p>
<ul>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šä½œä¸ºåˆ›ä½œè€…ï¼Œä½ éœ€è¦å…³æ³¨æ•ˆç‡çš„ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>
<p>é€Ÿåº¦ï¼ˆLatencyï¼‰ï¼šä»ä½ ç‚¹å‡»â€œç”Ÿæˆâ€åˆ°çœ‹åˆ°ç»“æœçš„æ—¶é—´ã€‚å¯¹äºå®æ—¶æ•°å­—äººã€AIç›´æ’­ç­‰åœºæ™¯ï¼Œä½å»¶è¿Ÿæ˜¯åˆšéœ€ã€‚</p>
</li>
<li>
<p>æˆæœ¬ï¼ˆCostï¼‰ï¼šé€šå¸¸ä»¥æ¶ˆè€—çš„Tokenæ•°é‡è®¡è´¹ã€‚ä½ éœ€è¦å­¦ä¼šå¦‚ä½•ç”¨æ›´ç²¾ç‚¼çš„Promptï¼Œä»¥æ›´ä½çš„æˆæœ¬è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚</p>
</li>
<li>
<p>å¯åŠæ€§ï¼ˆAccessibilityï¼‰ï¼šæ¨¡å‹çš„å¤§å°å†³å®šäº†å®ƒèƒ½å¦åœ¨ä½ çš„ä¸ªäººç”µè„‘ä¸Šè¿è¡Œã€‚Quantizationï¼ˆé‡åŒ–ï¼‰ç­‰æŠ€æœ¯å°±æ˜¯ä¸ºäº†é™ä½æ¨¡å‹çš„â€œæ²¹è€—â€å’Œâ€œä½“é‡â€ï¼Œè®©æ›´å¤šäººèƒ½ç”¨å¾—èµ·ã€è·‘å¾—åŠ¨ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-30">Ethics (ä¼¦ç†) &amp; Alignment (å¯¹é½)</h4>
<p>å®šä¹‰ï¼šç¡®ä¿AIç³»ç»Ÿçš„å‘å±•å’Œåº”ç”¨ç¬¦åˆäººç±»é“å¾·ã€ç¤¾ä¼šè§„èŒƒå’Œé•¿è¿œåˆ©ç›Šçš„ä¸€ç³»åˆ—åŸåˆ™ã€å®è·µå’ŒæŠ€æœ¯æ‰‹æ®µã€‚Alignmentæ˜¯å®ç°Ethicsçš„æŠ€æœ¯è·¯å¾„ä¹‹ä¸€ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯æ‹´åœ¨AIGCè¿™å¤´â€œçŒ›å…½â€è„–å­ä¸Šçš„â€œç¼°ç»³â€ï¼Œå’ŒæŒ‡å¼•å®ƒå‰è¿›æ–¹å‘çš„â€œé“å¾·ç½—ç›˜â€ã€‚AIæœ¬èº«æ²¡æœ‰å–„æ¶ï¼Œä½†å®ƒçš„åˆ›é€ è€…å’Œä½¿ç”¨è€…æœ‰ã€‚Ethicså°±æ˜¯è¦ç¡®ä¿è¿™è‚¡å¼ºå¤§çš„åŠ›é‡è¢«ç”¨äºåˆ›é€ ç¾å¥½çš„äº‹ç‰©ï¼Œè€Œä¸æ˜¯åˆ¶é€ è™šå‡ä¿¡æ¯ã€ä¾µçŠ¯ç‰ˆæƒæˆ–è¿›è¡Œæ¶æ„æ”»å‡»ã€‚</p>
<ul>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨ä½ çš„åˆ›ä½œä¸­ï¼Œä½ ä¼šæ—¶å¸¸æ„Ÿå—åˆ°Ethicsçš„å­˜åœ¨ï¼š</p>
<ul>
<li>
<p>å†…å®¹è¿‡æ»¤å™¨ï¼šå½“ä½ è¾“å…¥æŸäº›æ•æ„Ÿæˆ–ä¸å½“çš„æç¤ºè¯æ—¶ï¼Œæ¨¡å‹ä¼šæ‹’ç»ç”Ÿæˆï¼Œè¿™å°±æ˜¯Alignmentåœ¨èµ·ä½œç”¨ã€‚</p>
</li>
<li>
<p>ç‰ˆæƒäº‰è®®ï¼šAIçš„è®­ç»ƒæ•°æ®æ˜¯å¦ä¾µçŠ¯äº†åŸä½œè€…çš„ç‰ˆæƒï¼Ÿä½ ç”¨AIç”Ÿæˆçš„ä½œå“ï¼Œç‰ˆæƒå½’è°æ‰€æœ‰ï¼Ÿè¿™æ˜¯æ•´ä¸ªè¡Œä¸šè‡³ä»Šä»åœ¨æ¿€çƒˆè¾©è®ºçš„æ ¸å¿ƒè®®é¢˜ã€‚</p>
</li>
<li>
<p>Deepfakesä¸æ»¥ç”¨ï¼šAIæ¢è„¸æŠ€æœ¯å¯ä»¥ç”¨äºç”µå½±ç‰¹æ•ˆï¼Œä¹Ÿå¯èƒ½è¢«ç”¨äºåˆ¶é€ è™šå‡è§†é¢‘ï¼Œè¿›è¡Œè¯ˆéª—æˆ–åèª‰æ”»å‡»ã€‚ä½œä¸ºåˆ›ä½œè€…ï¼Œæ˜ç¡®è‡ªå·±ä½œå“çš„è¾¹ç•Œå’Œè´£ä»»ï¼Œæ˜¯åŸºæœ¬çš„èŒä¸šæ“å®ˆã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-31">Enhancement (å¢å¼º)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a1aba27cd540a78db86163b5cf67e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=fmQ0qiLYDXGraX3tSDBhCGX1MFo%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªå¹¿ä¹‰çš„åå¤„ç†ï¼ˆPost-processingï¼‰ç±»åˆ«ï¼ŒæŒ‡åˆ©ç”¨ä¸€ç³»åˆ—AIæˆ–ä¼ ç»ŸæŠ€æœ¯ï¼Œæ¥æå‡AIç”Ÿæˆå†…å®¹æœ€ç»ˆè§†è§‰è´¨é‡çš„ç»Ÿç§°ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>
<p>åˆ†è¾¨ç‡å¢å¼ºï¼šä½¿ç”¨ Upscalingï¼ˆæ”¾å¤§ï¼‰å·¥å…·ï¼Œå¦‚ Topaz Enhanceï¼Œå°†ä½ çš„2Kç”»é¢æå‡åˆ°4Kç”šè‡³æ›´é«˜ã€‚</p>
</li>
<li>
<p>ç»†èŠ‚å¢å¼ºï¼šå†æ¬¡è¿è¡ŒDetailerï¼Œç¡®ä¿ç”»é¢ä¸­æ‰€æœ‰å…³é”®å…ƒç´ çš„ç»†èŠ‚éƒ½æ— å¯æŒ‘å‰”ã€‚</p>
</li>
<li>
<p>è‰²å½©ä¸å…‰å½±å¢å¼ºï¼šä½¿ç”¨ä¸“é—¨çš„AIè°ƒè‰²æ¨¡å‹æˆ–ä¼ ç»Ÿè°ƒè‰²è½¯ä»¶ï¼Œä¸ºä½ çš„è§†é¢‘æˆ–å›¾ç‰‡æ³¨å…¥æ›´å…·ç”µå½±æ„Ÿçš„è‰²å½©é£æ ¼ã€‚</p>
</li>
</ol>
<h2 data-id="heading-32">å­—æ¯Fï¼š</h2>
<h4 data-id="heading-33">Fine-tuning (å¾®è°ƒ)</h4>
<p>å®šä¹‰ï¼šåœ¨å·²ç»è®­ç»ƒå¥½çš„å¤§å‹é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå³åŸºåº§æ¨¡å‹ï¼‰çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨ä¸€ä¸ªæ›´å°ã€æ›´å…·é’ˆå¯¹æ€§çš„æ•°æ®é›†ï¼Œè¿›è¡Œé¢å¤–çš„ã€è¡¥å……æ€§çš„è®­ç»ƒï¼Œä»¥ä½¿æ¨¡å‹çš„èƒ½åŠ›é€‚åº”ç‰¹å®šé¢†åŸŸæˆ–ç‰¹å®šé£æ ¼ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šä½ å¯ä»¥æŠŠâ€œå¾®è°ƒâ€æƒ³è±¡æˆâ€œå¯¹ä¸€ä¸ªå…¨æ‰å¤§å­¦ç”Ÿè¿›è¡Œå²—ä½ä¸“ç²¾ç‰¹è®­â€ã€‚ä¸€ä¸ªå¤§å‹åŸºåº§æ¨¡å‹å°±åƒä¸€ä¸ªåšå­¦å¤šé—»ã€ä»€ä¹ˆéƒ½æ‡‚ä¸€ç‚¹çš„æ¯•ä¸šç”Ÿï¼Œä½†å®ƒå¯èƒ½ä¸æ‡‚ä½ å…¬å¸çš„ä¸“ä¸šæœ¯è¯­æˆ–ç‹¬ç‰¹çš„å“ç‰Œé£æ ¼ã€‚å¾®è°ƒï¼Œå°±æ˜¯ä½ æ‹¿å…¬å¸å†…éƒ¨çš„æ–‡æ¡£ã€æŠ¥å‘Šå’ŒæˆåŠŸæ¡ˆä¾‹ï¼ˆç‰¹å®šæ•°æ®é›†ï¼‰ç»™ä»–â€œå¼€å°ç¶â€ï¼Œè®©ä»–è¿…é€Ÿæˆé•¿ä¸ºä¸€åèƒ½å¤Ÿç²¾å‡†æ‰§è¡Œä½ å…¬å¸ç‰¹å®šä»»åŠ¡çš„â€œä¸“å®¶çº§å‘˜å·¥â€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>
<p>é£æ ¼å®šåˆ¶ï¼šä¸€ä¸ªæ¸¸æˆå·¥ä½œå®¤å¯ä»¥æ”¶é›†æ•°åƒå¼ è‡ªå·±æ¸¸æˆçš„åŸç”»ï¼Œå¯¹Stable Diffusionè¿›è¡Œå¾®è°ƒï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªèƒ½ç¨³å®šç”Ÿæˆè¯¥æ¸¸æˆç‹¬æœ‰ç”»é£çš„ä¸“å±æ¨¡å‹ã€‚</p>
</li>
<li>
<p>ä¸Dreambooth/LoRAçš„åŒºåˆ«ï¼š</p>
</li>
</ol>
<ul>
<li>Fine-tuningï¼šæ˜¯æ›´å½»åº•ã€æ›´æ·±åº¦çš„â€œå…¨æ–¹ä½ç‰¹è®­â€ï¼Œé€šå¸¸éœ€è¦æ›´å¤šçš„æ•°æ®å’Œç®—åŠ›ï¼Œä½†æ•ˆæœä¹Ÿæ›´æ‰å®ã€æ›´é€šç”¨ã€‚</li>
<li>Dreamboothï¼šæ›´åƒæ˜¯â€œä¸€å¯¹ä¸€æ•™å­¦â€ï¼Œä¸“æ³¨äºè®©æ¨¡å‹â€œè®¤è¯†â€ä¸€ä¸ªç‰¹å®šçš„ä¸»ä½“ï¼ˆä½ çš„è„¸ã€ä½ çš„çŒ«ï¼‰ã€‚</li>
<li>LoRAï¼šåˆ™æ˜¯ä¸€ç§æ›´è½»é‡ã€æ›´é«˜æ•ˆçš„â€œæŠ€èƒ½æ’ä»¶â€ï¼Œå®ƒä¸æ”¹å˜åŸæ¨¡å‹ï¼Œåªæ˜¯é™„åŠ ä¸€ä¸ªå°æ¨¡å—æ¥å®ç°é£æ ¼æˆ–è§’è‰²çš„å®šåˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-34">Foundation Model (åŸºåº§æ¨¡å‹)</h4>
<p>å®šä¹‰ï¼šæŒ‡é‚£äº›åœ¨æµ·é‡ã€å¤šæ ·åŒ–çš„æ•°æ®ä¸Šè¿›è¡Œè¿‡å¤§è§„æ¨¡é¢„è®­ç»ƒï¼Œå…·å¤‡å¹¿æ³›é€šç”¨èƒ½åŠ›ï¼Œå¹¶å¯ä»¥ä½œä¸ºå„ç§ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒèµ·ç‚¹çš„è¶…å¤§å‹AIæ¨¡å‹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIGCä¸–ç•Œçš„â€œèˆªç©ºæ¯èˆ°â€æˆ–â€œåŸå§‹çŸ¿å±±â€ã€‚åƒGPT-5ã€Claude 4è¿™äº›è€³ç†Ÿèƒ½è¯¦çš„åå­—ï¼Œéƒ½æ˜¯åŸºåº§æ¨¡å‹ã€‚å®ƒä»¬çš„è®­ç»ƒæˆæœ¬æå…¶é«˜æ˜‚ï¼Œé€šå¸¸åªæœ‰ç§‘æŠ€å·¨å¤´æ‰èƒ½è´Ÿæ‹…å¾—èµ·ã€‚å®ƒä»¬å°±åƒä¸€åº§è•´å«ç€æ— ç©·æ½œåŠ›çš„å·¨å¤§çŸ¿å±±ï¼Œè€Œæˆ‘ä»¬ç»å¤§å¤šæ•°çš„AIGCåº”ç”¨ï¼Œéƒ½æ˜¯åœ¨è¿™åº§çŸ¿å±±ä¸Šè¿›è¡Œâ€œæŒ–æ˜â€ï¼ˆè°ƒç”¨APIï¼‰æˆ–â€œç²¾ç‚¼â€ï¼ˆå¾®è°ƒï¼‰ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåŸºåº§æ¨¡å‹çš„æ€§èƒ½ï¼Œç›´æ¥å†³å®šäº†æ•´ä¸ªAIGCç”Ÿæ€çš„é«˜åº¦ã€‚</p>
<ul>
<li>
<p>ä½œä¸ºèƒ½åŠ›çš„æºæ³‰ï¼šä½ ä½¿ç”¨çš„æ‰€æœ‰æ–‡ç”Ÿå›¾ã€æ–‡ç”Ÿè§†é¢‘æœåŠ¡ï¼Œå…¶èƒŒåéƒ½æœ‰ä¸€ä¸ªå¼ºå¤§çš„åŸºåº§æ¨¡å‹åœ¨æ”¯æ’‘ã€‚</p>
</li>
<li>
<p>ä½œä¸ºåˆ›æ–°çš„èµ·ç‚¹ï¼šå¼€æºçš„åŸºåº§æ¨¡å‹ï¼ˆå¦‚Llamaç³»åˆ—ã€Stable Diffusionï¼‰æå¤§åœ°æ¿€å‘äº†ç¤¾åŒºçš„åˆ›é€ åŠ›ï¼Œæ— æ•°å¼€å‘è€…åœ¨å…¶åŸºç¡€ä¸Šå¾®è°ƒå‡ºäº†å„ç§æ–°å¥‡æœ‰è¶£çš„åº”ç”¨ã€‚</p>
</li>
</ul>
<h4 data-id="heading-35">Face Swap (æ¢è„¸) &amp; Deepfake (æ·±åº¦ä¼ªé€ )</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a07f7b29b64a7a95209ccd31478ee2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=YXEeMSGDcQ0UVnA4g8vHeSC3cuE%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šFace Swapç‰¹æŒ‡å°†å›¾åƒæˆ–è§†é¢‘ä¸­çš„äººè„¸æ›¿æ¢ä¸ºå¦ä¸€å¼ äººè„¸çš„æŠ€æœ¯ã€‚Deepfakeåˆ™æ˜¯ä¸€ä¸ªæ›´å¹¿ä¹‰çš„è¯ï¼Œæ³›æŒ‡æ‰€æœ‰åˆ©ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯åˆæˆçš„é«˜åº¦é€¼çœŸã€è¶³ä»¥ä»¥å‡ä¹±çœŸçš„è™šå‡éŸ³è§†é¢‘å†…å®¹ï¼Œæ¢è„¸æ˜¯å…¶æœ€å¸¸è§çš„è¡¨ç°å½¢å¼ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIGCé¢†åŸŸæœ€å¯Œç››åã€ä¹Ÿæœ€å…·äº‰è®®çš„â€œé­”æ³•é¢å…·â€ã€‚æ—©æœŸçš„æ¢è„¸æŠ€æœ¯åƒæ˜¯ç®€å•çš„â€œè´´å›¾â€ï¼Œæ•ˆæœç”Ÿç¡¬ã€‚è€Œç°ä»£åŸºäºæ·±åº¦å­¦ä¹ çš„Face Swapï¼Œåˆ™æ˜¯è®©AIå­¦ä¹ ç›®æ ‡äººè„¸çš„ä¸°å¯Œè¡¨æƒ…ï¼Œç„¶åè®©æºè§†é¢‘ä¸­çš„äººç‰©â€œæˆ´ä¸Šâ€è¿™å¼ è„¸ï¼Œå¹¶ä»¥ä»–è‡ªå·±çš„è¡¨æƒ…æ¥â€œé©±åŠ¨â€è¿™å¼ æ–°è„¸ã€‚å…¶æ•ˆæœä¹‹é€¼çœŸï¼Œå¸¸å¸¸èƒ½éª—è¿‡è‚‰çœ¼ã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸ä¼¦ç†è¾¹ç•Œï¼š</p>
<ol>
<li>
<p>åˆ›æ„åº”ç”¨ï¼ˆç™½é­”æ³•ï¼‰ï¼šåœ¨å½±è§†åˆ¶ä½œä¸­ï¼Œå®ƒå¯ä»¥ä¸ºæ¼”å‘˜è¿›è¡Œæ— ç—•çš„å¹´è½»åŒ–æˆ–è¡°è€å¤„ç†ï¼Œæˆ–æ˜¯åœ¨å±é™©åŠ¨ä½œåœºæ™¯ä¸­æ›¿æ¢ç‰¹æŠ€æ¼”å‘˜çš„è„¸ã€‚åœ¨æ•°å­—äººè§†é¢‘åˆ›ä½œä¸­ï¼Œå®ƒæ˜¯å®ç°è§’è‰²æ‰®æ¼”çš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
</li>
<li>
<p>æ»¥ç”¨é£é™©ï¼ˆé»‘é­”æ³•ï¼‰ï¼šDeepfakeæŠ€æœ¯ä¹Ÿè¢«å¹¿æ³›ç”¨äºåˆ¶é€ è™šå‡æ–°é—»ã€æ¶æ„è¯½è°¤ã€è‰²æƒ…æŠ¥å¤å’Œé‡‘èè¯ˆéª—ï¼Œå¯¹ä¸ªäººåèª‰å’Œç¤¾ä¼šä¿¡ä»»æ„æˆäº†å·¨å¤§å¨èƒã€‚å› æ­¤ï¼Œå„å¤§å¹³å°å’Œæ³•è§„éƒ½åœ¨åŠªåŠ›é™åˆ¶å…¶æ»¥ç”¨ï¼Œå¹¶ç ”ç©¶ç›¸åº”çš„æ£€æµ‹æŠ€æœ¯ã€‚ä½œä¸ºåˆ›ä½œè€…ï¼Œè´Ÿè´£ä»»åœ°ä½¿ç”¨è¿™é¡¹æŠ€æœ¯æ˜¯ä¸å¯é€¾è¶Šçš„åº•çº¿ã€‚</p>
</li>
</ol>
<h4 data-id="heading-36">Fidelity (ä¿çœŸåº¦)</h4>
<p>å®šä¹‰ï¼šè¡¡é‡AIç”Ÿæˆå†…å®¹ä¸åŸå§‹è¾“å…¥ï¼ˆæç¤ºè¯æˆ–æºå›¾åƒï¼‰åœ¨è¯­ä¹‰ã€é£æ ¼å’Œç»†èŠ‚ä¸Šâ€œå¿ å®åº¦â€çš„æŒ‡æ ‡ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºAIçš„â€œç¿»è¯‘ç²¾å‡†åº¦â€ã€‚</p>
<p>Â Â é«˜ä¿çœŸåº¦ï¼šAIåƒä¸€ä½â€œç›´è¯‘æ´¾â€ç¿»è¯‘å®¶ï¼Œä¸¥æ ¼ã€ç²¾å‡†åœ°è¿˜åŸäº†ä½ æç¤ºè¯ä¸­çš„æ¯ä¸€ä¸ªç»†èŠ‚ã€‚ä½ è¦æ±‚â€œä¸€åªæˆ´ç€çº¢è‰²è´é›·å¸½çš„çŒ«â€ï¼Œå®ƒç»ä¸ä¼šç”»æˆè“è‰²ã€‚åœ¨å›¾ç”Ÿå›¾ä¸­ï¼Œé«˜ä¿çœŸåº¦æ„å‘³ç€ç”Ÿæˆç»“æœåœ¨æ„å›¾ã€è‰²å½©å’Œå†…å®¹ä¸Šä¸åŸå›¾é«˜åº¦ä¸€è‡´ã€‚</p>
<p>Â Â ä½ä¿çœŸåº¦ï¼šAIæ›´åƒä¸€ä½â€œæ„è¯‘æ´¾â€åˆ›ä½œè€…ï¼Œå®ƒæŠ“ä½äº†ä½ æç¤ºè¯çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç„¶åè¿›è¡Œäº†å¤§é‡çš„è‰ºæœ¯å‘æŒ¥ã€‚ä½ è¦æ±‚â€œä¸€åªå¿§éƒçš„çŒ«â€ï¼Œå®ƒå¯èƒ½ä¼šåˆ›é€ æ€§åœ°ä¸ºä½ åŠ ä¸Šé›¨å¤œã€çª—æˆ·ç­‰æ°›å›´å…ƒç´ ã€‚</p>
<h4 data-id="heading-37">Flux</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a50c1100c80b40a387ec7b773607e0cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=oJTg8zsU%2BpxFPJxHctqhdIdJ3zw%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªç”±å‰ Stability AI æ ¸å¿ƒå‘˜å·¥å›¢é˜Ÿåˆ›ç«‹çš„é»‘æ£®æ—å®éªŒå®¤(Black Forest Labs)ï¼Œå‘å¸ƒçš„ä¸€æ¬¾å¼€æºå›¾åƒç”Ÿæˆæ¨¡å‹ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ªå¼ºå¤§çš„å¤§æ¨¡å‹å’Œä¸€ä¸ªå¾®å°çš„ã€ä¸“é—¨ç”¨äºç»†èŠ‚ä¿®å¤ä¸å¼•å¯¼çš„å°æ¨¡å‹ç»“åˆåœ¨ä¸€èµ·å·¥ä½œã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šæŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œä¸“å®¶å¸¦å¾’å¼Ÿâ€çš„ç»˜ç”»ç»„åˆã€‚</p>
<p>Â Â ä¸“å®¶ï¼ˆå¤§æ¨¡å‹ï¼‰ï¼šè´Ÿè´£å¿«é€Ÿç»˜åˆ¶å‡ºç”»é¢çš„æ•´ä½“æ„å›¾ã€è‰²å½©å’Œå…‰å½±ï¼Œä¿è¯äº†åˆ›ä½œçš„â€œå¤§æ–¹å‘â€æ­£ç¡®ä¸”å¯Œæœ‰åˆ›æ„ã€‚</p>
<p>Â Â å¾’å¼Ÿï¼ˆå°æ¨¡å‹ï¼‰ï¼šç´§éšå…¶åï¼Œä¸“é—¨è´Ÿè´£å¯¹ä¸“å®¶ç”»å‡ºçš„è‰å›¾è¿›è¡Œâ€œç²¾ä¿®â€ï¼Œä¿®å¤å¾®å°çš„ç‘•ç–µã€é”åŒ–ç»†èŠ‚ã€ç¡®ä¿æ–‡å­—å’Œäººè„¸çš„æ­£ç¡®æ€§ã€‚ è¿™ç§â€œåˆ†å·¥åä½œâ€çš„æ¨¡å¼ï¼Œä½¿å¾—Fluxæ¶æ„åœ¨ä¿æŒæå¿«ç”Ÿæˆé€Ÿåº¦çš„åŒæ—¶ï¼Œè¿˜èƒ½è¾¾åˆ°æé«˜çš„å›¾åƒè´¨é‡å’Œæç¤ºè¯ç†è§£èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨ç”Ÿæˆå‡†ç¡®çš„æ–‡å­—æ–¹é¢ï¼Œè¡¨ç°è¿œè¶…ä»¥å¾€çš„æ¨¡å‹ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦å¿«é€Ÿç”Ÿæˆå¤§é‡é«˜è´¨é‡ã€ä¸”åŒ…å«å‡†ç¡®æ–‡å­—ï¼ˆå¦‚æµ·æŠ¥ã€Logoè®¾è®¡ã€å¸¦æ ‡é¢˜çš„æ’ç”»ï¼‰çš„å›¾åƒæ—¶ï¼Œé‡‡ç”¨Fluxæ¶æ„çš„æ¨¡å‹å°†æ˜¯ä½ çš„é¦–é€‰ã€‚å®ƒä»£è¡¨äº†AIGCç»˜ç”»é¢†åŸŸåœ¨â€œæ•ˆç‡â€ä¸â€œè´¨é‡â€ä¹‹é—´å–å¾—å¹³è¡¡çš„æœ€æ–°æŠ€æœ¯æ–¹å‘ã€‚</p>
<h2 data-id="heading-38">å­—æ¯Gï¼š</h2>
<h4 data-id="heading-39">Generative AI (ç”Ÿæˆå¼äººå·¥æ™ºèƒ½)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d66448ad84d34896b556fb56a1e4de54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=Buih9CqdxcO74EuyXu1bbmQP8Fc%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šäººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç‰¹æŒ‡é‚£äº›èƒ½å¤Ÿå­¦ä¹ ç°æœ‰æ•°æ®çš„æ¨¡å¼å’Œç»“æ„ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåˆ›é€ å‡ºå…¨æ–°çš„ã€åŸåˆ›çš„ã€é«˜è´¨é‡å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³ä¹ã€ä»£ç ï¼‰çš„AIç³»ç»Ÿã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯æˆ‘ä»¬æ•´ç¯‡â€œA-ZæŒ‡å—â€æ‰€æ¢è®¨çš„â€œåˆ›ä¸–é­”æ³•â€æœ¬èº«ã€‚å¦‚æœè¯´ä¼ ç»Ÿçš„AIæ˜¯â€œè¯„è®ºå®¶â€ï¼Œåªèƒ½è¯†åˆ«ã€åˆ†ç±»å’Œåˆ†æå·²æœ‰çš„ä¸œè¥¿ï¼›é‚£ä¹ˆç”Ÿæˆå¼AIå°±æ˜¯â€œè‰ºæœ¯å®¶â€ï¼Œå®ƒèƒ½å¤Ÿæ— ä¸­ç”Ÿæœ‰åœ°ç”»å‡ºä¸€å¹…ä¸å­˜åœ¨çš„ç”»ï¼Œå†™å‡ºä¸€é¦–å…¨æ–°çš„è¯—ï¼Œè°±ä¸€æ®µåŠ¨äººçš„æ›²ã€‚å®ƒæ˜¯AIGCï¼ˆAI-Generated Contentï¼‰çš„å‘åŠ¨æœºã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šä½ å·¥ä½œæµä¸­çš„ä¸€åˆ‡ã€‚ä»ç”¨ChatGPTæ„æ€å‰§æœ¬ï¼Œåˆ°ç”¨Midjourneyç”Ÿæˆæµ·æŠ¥ï¼Œå†åˆ°ç”¨Sunoä¸ºè§†é¢‘é…ä¹ï¼Œæ‰€æœ‰åˆ›é€ æ€§çš„AIåº”ç”¨ï¼Œéƒ½å±äºç”Ÿæˆå¼AIçš„èŒƒç•´ã€‚ç†è§£å®ƒçš„æ ¸å¿ƒâ€”â€”â€œå­¦ä¹ ä¸åˆ›é€ â€ï¼Œæ˜¯ç†è§£æ‰€æœ‰åç»­å·¥å…·çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-40">GAN (Generative Adversarial Networkï¼Œç”Ÿæˆå¯¹æŠ—ç½‘ç»œ)</h4>
<p>å®šä¹‰ï¼šä¸€ç§ç»å…¸çš„æ·±åº¦å­¦ä¹ æ¨¡å‹æ¶æ„ï¼Œç”±ä¸¤ä¸ªç›¸äº’ç«äº‰ã€å…±åŒè¿›åŒ–çš„ç¥ç»ç½‘ç»œç»„æˆï¼šä¸€ä¸ªâ€œç”Ÿæˆå™¨â€ï¼ˆGeneratorï¼‰å’Œä¸€ä¸ªâ€œåˆ¤åˆ«å™¨â€ï¼ˆDiscriminatorï¼‰ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™æ˜¯AIGCæ—©æœŸæœ€å¯Œä¼ å¥‡è‰²å½©çš„æŠ€æœ¯ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€åœºâ€œæœ€å¼ºèµå“ç”»å¸ˆâ€ä¸â€œé¡¶å°–é‰´å®ä¸“å®¶â€ä¹‹é—´çš„ç»ˆæå¯¹å†³ï¼š</p>
<ol>
<li>
<p>ç”Ÿæˆå™¨ï¼ˆç”»å¸ˆï¼‰ï¼šå®ƒçš„ä»»åŠ¡æ˜¯æ‹¼å°½å…¨åŠ›åœ°æ¨¡ä»¿æ¢µé«˜çš„é£æ ¼ï¼Œç”»å‡ºä¸€å¹…è¶³ä»¥ä»¥å‡ä¹±çœŸçš„â€œèµå“â€ã€‚</p>
</li>
<li>
<p>åˆ¤åˆ«å™¨ï¼ˆä¸“å®¶ï¼‰ï¼šå®ƒçš„ä»»åŠ¡æ˜¯ç«çœ¼é‡‘ç›ï¼Œä»ä¸€å †ç”»ä½œä¸­å‡†ç¡®åœ°åˆ†è¾¨å‡ºå“ªäº›æ˜¯æ¢µé«˜çš„çœŸè¿¹ï¼Œå“ªäº›æ˜¯â€œç”»å¸ˆâ€çš„èµå“ã€‚</p>
</li>
<li>
<p>å¯¹æŠ—ä¸è¿›åŒ–ï¼šæ¸¸æˆå¼€å§‹ï¼Œç”»å¸ˆä¸æ–­ç”»ï¼Œä¸“å®¶ä¸æ–­é‰´åˆ«ã€‚ç”»å¸ˆçš„ç”»è¢«è¯†ç ´äº†ï¼Œå®ƒä¼šæ€»ç»“ç»éªŒï¼Œä¸‹æ¬¡ç”»å¾—æ›´é€¼çœŸï¼›ä¸“å®¶æ²¡èƒ½è¯†ç ´ï¼Œå®ƒä¹Ÿä¼šå­¦ä¹ ï¼Œæå‡è‡ªå·±çš„é‰´åˆ«èƒ½åŠ›ã€‚åœ¨è¿™åœºæ°¸æ— ä¼‘æ­¢çš„â€œå¯¹æŠ—â€ä¸­ï¼Œç”»å¸ˆçš„ä¼ªé€ æŠ€å·§å’Œä¸“å®¶çš„é‰´åˆ«çœ¼å…‰éƒ½è¾¾åˆ°äº†ç¥ä¹å…¶æŠ€çš„æ°´å¹³ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªèƒ½å¤Ÿåˆ›é€ å‡ºæƒŠäººé€¼çœŸå›¾åƒçš„â€œç¥çº§ç”»å¸ˆâ€ã€‚</p>
</li>
</ol>
<p>åº”ç”¨åœºæ™¯ï¼šè™½ç„¶ç°åœ¨æ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelï¼‰æ›´ä¸ºæµè¡Œï¼Œä½†GANåœ¨è®¸å¤šé¢†åŸŸä¾ç„¶å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œåœ¨äººè„¸ç”Ÿæˆï¼ˆStyleGANï¼‰ã€å›¾åƒä¿®å¤å’Œè¶…åˆ†è¾¨ç‡ç­‰ä»»åŠ¡ä¸­ï¼ŒGANä»ç„¶æ˜¯é‡è¦çš„æŠ€æœ¯è·¯çº¿ã€‚ç†è§£GANçš„â€œå¯¹æŠ—â€æ€æƒ³ï¼Œæœ‰åŠ©äºä½ ç†è§£AIæ˜¯å¦‚ä½•é€šè¿‡â€œå†…éƒ¨ç«äº‰â€æ¥å®ç°è‡ªæˆ‘è¿›åŒ–çš„ã€‚</p>
<h4 data-id="heading-41">Groove (å¾‹åŠ¨)</h4>
<p>å®šä¹‰ï¼šåœ¨AIéŸ³ä¹ç”Ÿæˆä¸­ï¼Œè¿™ä¸ªè¯è¶…è¶Šäº†å…¶éŸ³ä¹æœ¯è¯­æœ¬èº«ï¼Œç”¨æ¥å½¢å®¹éŸ³ä¹åœ¨èŠ‚å¥ã€åŠ¨æ€å’Œæ•´ä½“æ„Ÿè§‰ä¸Šéå¸¸åœ°é“ã€æŠ“è€³ï¼Œå……æ»¡äº†â€œçµé­‚æ„Ÿâ€ï¼Œè€Œéæ­»æ¿çš„éŸ³ç¬¦æ‹¼æ¥ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯å¯¹AIéŸ³ä¹çš„â€œçµé­‚æ‹·é—®â€ã€‚ä¸€é¦–æŠ€æœ¯ä¸Šå®Œç¾çš„éŸ³ä¹ï¼Œå¦‚æœæ²¡æœ‰Grooveï¼Œå¬èµ·æ¥å°±ä¼šåƒæœºå™¨äººå¼¹ç´â€”â€”ç²¾å‡†ä½†æ— è¶£ã€‚è€Œä¸€é¦–æœ‰Grooveçš„AIéŸ³ä¹ï¼Œåˆ™ä¼šè®©ä½ å¿ä¸ä½è·Ÿç€ç‚¹å¤´ã€æ‘‡æ‘†ã€‚å®ƒæ˜¯ä¸€ç§éš¾ä»¥é‡åŒ–ä½†ä¸€å¬ä¾¿çŸ¥çš„â€œæ„Ÿè§‰â€ï¼Œæ˜¯æ—‹å¾‹ã€èŠ‚å¥ã€å’Œå£°ä¸éŸ³è‰²ä¹‹é—´äº§ç”Ÿçš„å¥‡å¦™â€œåŒ–å­¦ååº”â€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šåœ¨Sunoã€Elevenlabsç­‰å¹³å°ï¼Œå½“ä½ å¸Œæœ›ç”Ÿæˆä¸€æ®µæœ‰æ´»åŠ›çš„Funkã€R&amp;Bæˆ–æ‘‡æ»šä¹æ—¶ï¼Œåœ¨Prompté‡ŒåŠ å…¥â€œwith a strong grooveâ€ã€â€œfunky grooveâ€ç­‰è¯ï¼Œå°±æ˜¯åœ¨å¼•å¯¼AIä¸è¦åªå…³æ³¨éŸ³ç¬¦çš„æ­£ç¡®æ€§ï¼Œæ›´è¦æ³¨å…¥é‚£ç§è®©äººèº«ä½“ä¸è‡ªè§‰åŠ¨èµ·æ¥çš„â€œå¾‹åŠ¨æ„Ÿâ€ã€‚</p>
<h4 data-id="heading-42">Guidance Scale (å¼•å¯¼å¼ºåº¦) / CFG Scale</h4>
<p>å®šä¹‰ï¼šåœ¨æ‰©æ•£æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªç”¨äºè°ƒèŠ‚â€œç”Ÿæˆå›¾åƒåœ¨å¤šå¤§ç¨‹åº¦ä¸Šéµå¾ªä½ çš„æç¤ºè¯ï¼ˆPromptï¼‰â€çš„å‚æ•°ã€‚CFGæ˜¯Classifier-Free Guidanceçš„ç¼©å†™ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±åƒæ˜¯ä½ ç‰µç€AIè¿™åªâ€œåˆ›æ„ç¥å…½â€çš„â€œç¼°ç»³â€ï¼ŒGuidance Scaleçš„å€¼å†³å®šäº†ä½ æŠŠç¼°ç»³æ‹‰å¾—å¤šç´§ã€‚</p>
<p>Â Â ä½Guidance Scaleï¼ˆå¦‚3-6ï¼‰ï¼šä½ æŠŠç¼°ç»³æ”¾å¾—å¾ˆæ¾ï¼Œç»™äºˆAIå·¨å¤§çš„åˆ›ä½œè‡ªç”±ã€‚å®ƒä¼šæŠ“ä½ä½ Promptçš„æ ¸å¿ƒæ¦‚å¿µï¼Œç„¶åå¤©é©¬è¡Œç©ºåœ°å‘æŒ¥ã€‚ç”Ÿæˆçš„ç»“æœå¯èƒ½åˆ›æ„åè¶³ï¼Œä½†ä¸ä½ æè¿°çš„ç»†èŠ‚å¯èƒ½ç›¸å»ç”šè¿œã€‚</p>
<p>Â Â é«˜Guidance Scaleï¼ˆå¦‚10-15ï¼‰ï¼šä½ æŠŠç¼°ç»³æ‹‰å¾—éå¸¸ç´§ï¼Œè¦æ±‚AIä¸¥æ ¼ã€ç²¾ç¡®åœ°æŒ‰ç…§ä½ Prompté‡Œçš„æ¯ä¸€ä¸ªå­—å»æ‰§è¡Œã€‚ç”Ÿæˆçš„ç»“æœä¼šéå¸¸è´´åˆä½ çš„æè¿°ï¼Œä½†å¯èƒ½ä¼šç‰ºç‰²ä¸€äº›è‰ºæœ¯åˆ›é€ åŠ›å’Œæƒ³è±¡ç©ºé—´ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šè¿™æ˜¯AIç»˜ç”»ä¸­æœ€é«˜é¢‘ã€ä¹Ÿæœ€é‡è¦çš„è°ƒè¯•å‚æ•°ä¹‹ä¸€ã€‚å½“ä½ æƒ³è¦ä¸€å¼ å†™å®ã€ç²¾å‡†çš„äº§å“å›¾æ—¶ï¼Œä½ ä¼šè°ƒé«˜Guidance Scaleï¼›å½“ä½ æƒ³è¦æ¢ç´¢ä¸€äº›å¥‡å¹»ã€æŠ½è±¡çš„è‰ºæœ¯é£æ ¼æ—¶ï¼Œä½ ä¼šé™ä½å®ƒï¼Œç»™AIâ€œæ¾ç»‘â€ï¼Œçœ‹çœ‹å®ƒèƒ½å¸¦ç»™ä½ ä»€ä¹ˆæƒŠå–œã€‚</p>
<h2 data-id="heading-43">å­—æ¯Hï¼š</h2>
<h4 data-id="heading-44">Hallucination (å¹»è§‰)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d98561f374c3417082b341bdff1f2ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=xcRtOUDz53uKGWDCUGeMQvZ5YaM%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šæŒ‡AIæ¨¡å‹ç”Ÿæˆäº†çœ‹ä¼¼è¯­æ³•é€šé¡ºã€é€»è¾‘è‡ªæ´½ï¼Œä½†å®é™…ä¸Šä¸äº‹å®å®Œå…¨ä¸ç¬¦ã€å‡­ç©ºæé€ æˆ–æ¯«æ— æ„ä¹‰çš„ä¿¡æ¯ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIç‰ˆçš„â€œä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“â€ã€‚è¿™å¹¶éAIäº§ç”Ÿäº†å¿ƒç†å¹»è§‰ï¼Œè€Œæ˜¯å…¶åœ¨ç»Ÿè®¡å­¦æ¦‚ç‡çš„è®¡ç®—ä¸­ï¼Œå°†ä¸ç›¸å…³çš„æ¦‚å¿µé”™è¯¯åœ°è¿æ¥äº†èµ·æ¥ã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸è¡¨ç°ï¼š</p>
<ol>
<li>
<p>æ–‡æœ¬å¹»è§‰ï¼šä½ é—®å®ƒâ€œä»‹ç»ä¸€ä¸‹ç‰›é¡¿å‘ç°è’¸æ±½æœºçš„æ•…äº‹â€ï¼Œå®ƒå¯èƒ½ä¼šä¸ºä½ ç¼–é€ ä¸€ä¸ªç‰›é¡¿çœ‹åˆ°æ°´å£¶å†’æ°”è€Œå‘æ˜è’¸æ±½æœºçš„ç”ŸåŠ¨æ•…äº‹ï¼Œä½†æˆ‘ä»¬éƒ½çŸ¥é“è¿™æ˜¯ç“¦ç‰¹çš„æ•…äº‹ã€‚</p>
</li>
<li>
<p>å›¾åƒå¹»è§‰ï¼šä½ è®©å®ƒç”»â€œä¸€ä½å¤©æ–‡å­¦å®¶åœ¨è§‚å¯Ÿæ˜Ÿç©ºâ€ï¼Œå®ƒå¯èƒ½ä¼šç”»å‡ºä¸€ä¸ªæœ›è¿œé•œçš„ç›®é•œå’Œç‰©é•œè£…åäº†çš„å¤©æ–‡å­¦å®¶ï¼Œæˆ–è€…å¤šå‡ºä¸€åªæ‰‹çš„å®‡èˆªå‘˜ã€‚</p>
</li>
<li>
<p>å·¥ä½œæµä¸­çš„åº”å¯¹ï¼šå¹»è§‰æ˜¯ç›®å‰æ‰€æœ‰ç”Ÿæˆå¼AIéƒ½æ— æ³•å®Œå…¨é¿å…çš„â€œåŸç½ªâ€ã€‚å› æ­¤ï¼Œåœ¨ä½ çš„å·¥ä½œæµä¸­ï¼Œäº‹å®æ ¸æŸ¥ï¼ˆFact-checkingï¼‰æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€æ­¥ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†çŸ¥è¯†ç±»ã€æ–°é—»ç±»å†…å®¹æ—¶ã€‚</p>
</li>
</ol>
<h4 data-id="heading-45">High-Res Fix (é«˜åˆ†è¾¨ç‡ä¿®å¤)</h4>
<p>å®šä¹‰ï¼šåœ¨Stable Diffusionç­‰AIç»˜ç”»å·¥ä½œæµä¸­ï¼Œä¸€ç§ç»å…¸çš„ã€é€šè¿‡ä¸¤é˜¶æ®µç”Ÿæˆæ¥é«˜æ•ˆè·å¾—é«˜åˆ†è¾¨ç‡ã€ç»†èŠ‚ä¸°å¯Œå›¾åƒçš„æŠ€æœ¯ã€‚</p>
<ul>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šå¯¹äºæ‰€æœ‰åœ¨æœ¬åœ°éƒ¨ç½²Stable Diffusionçš„åˆ›ä½œè€…æ¥è¯´ï¼Œè¿™å‡ ä¹æ˜¯å¿…å¤‡çš„å·¥ä½œæµæŠ€èƒ½ã€‚å®ƒèƒ½è®©ä½ åœ¨ä¸ç‰ºç‰²æœ€ç»ˆç”»è´¨çš„å‰æä¸‹ï¼Œå°†ç”Ÿæˆä¸€å¼ é«˜æ¸…å¤§å›¾çš„æ—¶é—´ç¼©çŸ­æ•°å€ã€‚</p>
<ul>
<li>
<p>ç¬¬ä¸€é˜¶æ®µï¼ˆæ‰“è‰ç¨¿ï¼‰ï¼šå…ˆåœ¨ä¸€ä¸ªè¾ƒä½çš„åˆ†è¾¨ç‡ä¸‹ï¼ˆå¦‚512x512åƒç´ ï¼‰å¿«é€Ÿç”Ÿæˆä¸€å¼ æˆ–ä¸€æ‰¹å›¾ç‰‡ã€‚è¿™ä¸ªé˜¶æ®µçš„ç›®çš„æ˜¯â€œæŠ½å¡â€ï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸€å¼ æ„å›¾ã€è‰²å½©å’Œä¸»ä½“éƒ½è®©ä½ æ»¡æ„çš„â€œè‰ç¨¿å›¾â€ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒé˜¶æ®µï¼ˆç²¾ä¿®æ”¾å¤§ï¼‰ï¼šé”å®šè¿™å¼ å®Œç¾çš„è‰ç¨¿å›¾ï¼Œç„¶åå¯ç”¨High-Res FixåŠŸèƒ½ã€‚AIä¼šä»¥è¿™å¼ è‰ç¨¿ä¸ºè“æœ¬ï¼Œåœ¨ä¸€ä¸ªæ›´é«˜çš„åˆ†è¾¨ç‡ä¸‹ï¼ˆå¦‚1024x1024åƒç´ ï¼‰ï¼Œç”¨è¾ƒä½çš„å»å™ªå¼ºåº¦ï¼ˆDenoising Strengthï¼‰è¿›è¡Œâ€œäºŒæ¬¡ç»˜åˆ¶â€ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šæ”¹å˜åŸå›¾çš„æ„å›¾ï¼Œè€Œæ˜¯ä¸“æ³¨äºä¸ºå…¶æ™ºèƒ½åœ°â€œè„‘è¡¥â€å‡ºé«˜æ¸…çš„ç»†èŠ‚ï¼Œå¦‚çš®è‚¤çº¹ç†ã€æ¯›å‘ä¸çº¿ã€èƒŒæ™¯è´¨æ„Ÿç­‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-46">Higgsfield</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040e47e414fd402185e23d681a3aefe9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=%2FYBk4mv%2FIkpm2iW1HYrWW4BqVlw%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ä¸ªå¼ºå¤§çš„ã€ä¸“æ³¨äºç”Ÿæˆç”µå½±çº§ï¼ˆcinematicï¼‰å¯æ§è§†é¢‘çš„ç”Ÿæˆå¼AIå¹³å°ï¼Œå…¶ä½¿å‘½æ˜¯â€œå°†ç¤¾äº¤åª’ä½“å†…å®¹åˆ›ä½œæ°‘ä¸»åŒ–ï¼Œæ™®åŠç»™æ¯ä¸€ä¸ªäººâ€ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´Soraå±•ç¤ºäº†AIè§†é¢‘çš„â€œèƒ½åŠ›ä¸Šé™â€ï¼Œé‚£ä¹ˆHiggsfieldåˆ™è‡´åŠ›äºå°†è¿™ç§é¡¶å°–èƒ½åŠ›ï¼Œå°è£…æˆä¸€ä¸ªâ€œä¸“ä¸šåˆ›ä½œè€…å’Œè¥é”€äººå‘˜â€éƒ½èƒ½è½»æ¾ä¸Šæ‰‹çš„â€œå¥½è±åç‰¹æ•ˆå·¥ä½œå®¤â€ã€‚å®ƒçš„æ ¸å¿ƒäº§å“é€»è¾‘æ˜¯æä¾›ä¸€ä¸ªé›†AIè§†é¢‘ç”Ÿæˆã€AIå›¾åƒç”Ÿæˆã€è§†è§‰ç‰¹æ•ˆï¼ˆVFXï¼‰äºä¸€ä½“çš„â€œç»ˆæAIé©±åŠ¨å¹³å°ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿç®€å•åœ°é€šè¿‡æ–‡æœ¬æˆ–å•å¼ å›¾ç‰‡ï¼Œå°±åˆ›é€ å‡ºå…·æœ‰ä¸“ä¸šè´¨æ„Ÿã€é€‚åˆç¤¾äº¤åª’ä½“ä¼ æ’­çš„çŸ­è§†é¢‘ã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸å¸‚åœºå®šä½ï¼š</p>
<ul>
<li>
<p>Â Â ç—…æ¯’å¼è¥é”€è§†é¢‘ï¼šå…¶å¼ºå¤§çš„VFXèƒ½åŠ›ä½¿å…¶æˆä¸ºåˆ¶ä½œâ€œå¸ç›â€å¹¿å‘Šå’Œç¤¾äº¤åª’ä½“çˆ†æ¬¾å†…å®¹çš„åˆ©å™¨ã€‚</p>
</li>
<li>
<p>Â Â å›¾ç‰‡åŠ¨ç”»åŒ–ï¼šå°†ä¸€å¼ é™æ€å›¾ç‰‡è½¬åŒ–ä¸ºä¸€æ®µå¯Œæœ‰ç”µå½±æ„Ÿçš„ç®€çŸ­è§†é¢‘ï¼Œæ˜¯å…¶æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚</p>
</li>
<li>
<p>Â Â ä¸“ä¸šå†…å®¹åˆ›ä½œï¼šé¢å‘å¸Œæœ›åœ¨ç¤¾äº¤åª’ä½“ã€è¥é”€æ´»åŠ¨å’Œä¸“ä¸šé¡¹ç›®ä¸­æå‡è§†é¢‘è´¨é‡çš„åˆ›ä½œè€…å’Œä¼ä¸šã€‚</p>
</li>
</ul>
<h4 data-id="heading-47">Hugging Face (æ‹¥æŠ±è„¸)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfd34dae4a0540399ebbe5080b736c8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=09Al0FJNydttrfC8rqWZbOuWuN0%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šå…¨çƒæœ€å¤§ã€æœ€æ´»è·ƒçš„å¼€æºAIç¤¾åŒºã€æ¨¡å‹/æ•°æ®é›†æ‰˜ç®¡å¹³å°å’Œåä½œä¸­å¿ƒã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´GitHubæ˜¯ç¨‹åºå‘˜çš„ä»£ç å¤©å ‚ï¼Œé‚£ä¹ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2F" target="_blank" title="https://huggingface.co/" ref="nofollow noopener noreferrer">Hugging Face</a>å°±æ˜¯AIGCåˆ›ä½œè€…çš„â€œå†›ç«åº“â€ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç½‘ç«™ï¼Œæ›´æ˜¯ä¸€ä¸ªåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li>
<p>æ¨¡å‹ä¸­å¿ƒï¼ˆHubï¼‰ï¼šè¿™é‡Œæ±‡é›†äº†æ•°ä»¥ä¸‡è®¡çš„å¼€æºAIæ¨¡å‹ï¼Œä»å·¨å¤§çš„åŸºåº§æ¨¡å‹ï¼Œåˆ°å„ç§é£æ ¼çš„LoRAã€ControlNetæ¨¡å‹ã€‚æƒ³æ‰¾ä»»ä½•ç”»é£ã€ä»»ä½•è§’è‰²çš„æ¨¡å‹ï¼Œä¸ŠHç«™æ˜¯åˆ›ä½œè€…çš„ç¬¬ä¸€ååº”ã€‚</p>
</li>
<li>
<p>æ•°æ®é›†ï¼ˆDatasetsï¼‰ï¼šæä¾›äº†æµ·é‡çš„ã€ç”¨äºè®­ç»ƒå’Œå¾®è°ƒæ¨¡å‹çš„æ•°æ®é›†ã€‚</p>
</li>
<li>
<p>ç©ºé—´ï¼ˆSpacesï¼‰ï¼šæä¾›äº†ä¸€ä¸ªè®©å¼€å‘è€…å¯ä»¥å¿«é€Ÿæ­å»ºå’Œåˆ†äº«AIåº”ç”¨æ¼”ç¤ºï¼ˆDemoï¼‰çš„å¹³å°ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œç¬¬ä¸€æ—¶é—´ä½“éªŒåˆ°æœ€æ–°ã€æœ€é…·çš„AIæŠ€æœ¯ã€‚</p>
</li>
<li>
<p>Transformersåº“ï¼šå®ƒæä¾›çš„<code>transformers</code>åº“ï¼Œæ˜¯Pythonä¸­æœ€ä¸»æµçš„ã€ç”¨äºè°ƒç”¨å’Œæ“ä½œå¤§æ¨¡å‹çš„ç¨‹åºåº“ï¼Œæå¤§åœ°ç®€åŒ–äº†AIåº”ç”¨çš„å¼€å‘ã€‚</p>
</li>
</ol>
<h4 data-id="heading-48">Human-in-the-loop (HITLï¼Œäººæœºå›åœˆ)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0049e9689d39402eb4209e5227352e4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=83SxTd0i6kbDT2WPj%2BxnE0vCxT0%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ç§å°†äººç±»çš„æ™ºæ…§å’Œåˆ¤æ–­åŠ›ï¼Œç³»ç»Ÿæ€§åœ°ã€æŒç»­åœ°æ•´åˆè¿›AIæ¨¡å‹æ“ä½œå¾ªç¯ä¸­çš„äººæœºäº¤äº’æ¨¡å¼ï¼Œæ—¨åœ¨é€šè¿‡äººçš„å¼•å¯¼ã€åé¦ˆå’Œçº æ­£æ¥æå‡AIçš„æ€§èƒ½ã€å®‰å…¨æ€§å’Œå¯é æ€§ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™ä¸ä»…ä»…æ˜¯â€œäººåœ¨ç”¨AIâ€ï¼Œè€Œæ˜¯â€œäººæˆä¸ºäº†AIç³»ç»Ÿçš„ä¸€éƒ¨åˆ†â€ã€‚å®ƒå°†äººä»ä¸€ä¸ªè¢«åŠ¨çš„â€œä½¿ç”¨è€…â€ï¼Œå˜æˆäº†ä¸€ä¸ªä¸»åŠ¨çš„â€œæ•™ç»ƒâ€å’Œâ€œè´¨æ£€å‘˜â€ã€‚æ•´ä¸ªè¿‡ç¨‹å½¢æˆäº†ä¸€ä¸ªä¸æ–­ä¼˜åŒ–çš„æ­£å‘é£è½®ï¼šAIç”Ÿæˆ -&gt; äººç±»è¯„ä¼°/çº æ­£ -&gt; AIå­¦ä¹ /ä¼˜åŒ– -&gt; AIç”Ÿæˆæ›´å¥½çš„ç»“æœã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šä½ æ¯ä¸€æ¬¡çš„AIGCåˆ›ä½œï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªHITLå·¥ä½œæµã€‚</p>
<ol>
<li>
<p>Promptå·¥ç¨‹ï¼šä½ è¾“å…¥Promptï¼Œçœ‹åˆ°ç»“æœä¸ç†æƒ³ï¼Œç„¶åä¿®æ”¹Promptï¼Œè¿™å°±æ˜¯æœ€åŸºç¡€çš„HITLã€‚</p>
</li>
<li>
<p>åæœŸç¼–è¾‘ï¼šä½ ç”¨AIç”Ÿæˆäº†ä¸€å¼ å›¾ï¼Œç„¶åç”¨Inpaintingä¿®å¤äº†å…¶ä¸­çš„ç‘•ç–µï¼Œè¿™ä¹Ÿæ˜¯HITLã€‚</p>
</li>
<li>
<p>æ•°æ®æ ‡æ³¨ï¼šåœ¨æ¨¡å‹è®­ç»ƒçš„èƒŒåï¼Œäººç±»ä¸“å®¶æ ‡æ³¨å¤§é‡æ•°æ®ï¼Œå‘Šè¯‰AIâ€œè¿™æ˜¯çŒ«â€ã€â€œè¿™æ˜¯ç‹—â€ï¼Œè¿™æ˜¯æœ€åº•å±‚çš„ã€ä¹Ÿæ˜¯æœ€é‡è¦çš„HITLã€‚</p>
</li>
<li>
<p>ä½œä¸ºå¹»è§‰çš„è§£è¯ï¼šé¢å¯¹AIçš„å¹»è§‰ï¼Œæœ€ç»ˆçš„è£å†³è€…å’Œçº æ­£è€…ï¼Œæ°¸è¿œæ˜¯â€œç¯è·¯ä¸­â€çš„äººã€‚</p>
</li>
</ol>
<h4 data-id="heading-49">Hyperparameter (è¶…å‚æ•°)</h4>
<p>å®šä¹‰ï¼šåœ¨æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒå¼€å§‹ä¹‹å‰ï¼Œç”±äººå·¥è®¾å®šçš„ã€ç”¨æ¥æ§åˆ¶è®­ç»ƒè¿‡ç¨‹æœ¬èº«ç‰¹æ€§çš„â€œå¤–éƒ¨å‚æ•°â€ã€‚å®ƒä¸æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€šè¿‡å­¦ä¹ æ•°æ®è€Œè‡ªåŠ¨è°ƒæ•´çš„â€œå†…éƒ¨å‚æ•°â€ï¼ˆParametersï¼‰ç›¸å¯¹åº”ã€‚</p>
<ul>
<li>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœæŠŠè®­ç»ƒAIæ¨¡å‹æ¯”ä½œâ€œçƒ¤ä¸€ä¸ªè›‹ç³•â€ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>
<p>å‚æ•°ï¼ˆParametersï¼‰ï¼šæ˜¯è›‹ç³•çƒ¤å¥½åï¼Œå…¶å†…éƒ¨å½¢æˆçš„æˆåƒä¸Šä¸‡ä¸ªåˆ†å­ç»“æ„ï¼Œå®ƒä»¬å…±åŒå†³å®šäº†è›‹ç³•çš„æœ€ç»ˆå£æ„Ÿå’Œé£å‘³ã€‚è¿™äº›æ˜¯æœºå™¨è‡ªå·±â€œå­¦â€å‡ºæ¥çš„ã€‚</p>
</li>
<li>
<p>è¶…å‚æ•°ï¼ˆHyperparametersï¼‰ï¼šåˆ™æ˜¯ä½ å†™åœ¨â€œé£Ÿè°±â€ä¸Šçš„æŒ‡ä»¤ï¼Œæ˜¯ä½ ä½œä¸ºâ€œå¨å¸ˆâ€æå‰è®¾å®šçš„ã€‚æ¯”å¦‚ï¼šçƒ¤ç®±æ¸©åº¦ï¼ˆå­¦ä¹ ç‡/Learning Rateï¼‰ã€çƒ˜çƒ¤æ—¶é—´ï¼ˆè®­ç»ƒè½®æ•°/Epochsï¼‰ã€é¢ç²‰å’Œé¸¡è›‹çš„æ¯”ä¾‹ï¼ˆæ‰¹å¤„ç†å¤§å°/Batch Sizeï¼‰ã€‚è¿™äº›â€œé£Ÿè°±â€ä¸Šçš„è®¾ç½®ï¼Œç›´æ¥å†³å®šäº†ä½ æœ€ç»ˆèƒ½çƒ¤å‡ºä¸€ä¸ªä»€ä¹ˆæ ·çš„è›‹ç³•ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼šå¯¹äºå¤§éƒ¨åˆ†åˆ›ä½œè€…æ¥è¯´ï¼Œä½ ä¸ä¼šç›´æ¥å»è°ƒæ•´è¶…å‚æ•°ã€‚ä½†ç†è§£å®ƒçš„å­˜åœ¨ï¼Œèƒ½è®©ä½ æ˜ç™½ä¸ºä»€ä¹ˆåŒæ ·å«â€œLlama 3â€ï¼Œä¸åŒå…¬å¸å¾®è°ƒå‡ºæ¥çš„ç‰ˆæœ¬ï¼Œå…¶â€œæ€§æ ¼â€ï¼ˆå›ç­”é£æ ¼ã€åˆ›é€ åŠ›ï¼‰ä¼šæˆªç„¶ä¸åŒâ€”â€”å› ä¸ºä»–ä»¬ç”¨äº†ä¸åŒçš„â€œçƒ˜ç„™é£Ÿè°±â€ï¼ˆè¶…å‚æ•°ï¼‰ã€‚</p>
<h2 data-id="heading-50">å­—æ¯Iï¼š</h2>
<h4 data-id="heading-51">Image-to-Image (å›¾ç”Ÿå›¾/â€œä»¥å›¾ç”»å›¾â€)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7898097e1e3492e9959ec6a6c6ae113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=lkFPPOOI21u5agdgYvwkZ1jnZhA%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šä¸€ç§ç”Ÿæˆå¼AIæŠ€æœ¯ï¼Œå®ƒä»¥ä¸€å¼ ç°æœ‰çš„å›¾åƒä½œä¸ºä¸»è¦è¾“å…¥å’Œè§†è§‰å‚è€ƒï¼Œç»“åˆæ–‡æœ¬æç¤ºè¯ï¼ˆPromptï¼‰ï¼Œæ¥ç”Ÿæˆä¸€å¼ å…¨æ–°çš„å›¾åƒã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™æ­£æ˜¯AIGCåˆ›ä½œä»â€œçº¯ç²¹çš„æƒ³è±¡â€ï¼ˆæ–‡ç”Ÿå›¾ï¼‰èµ°å‘â€œæœ‰æ®å¯ä¾çš„å†åˆ›ä½œâ€çš„å…³é”®ä¸€æ­¥ã€‚å¦‚æœè¯´æ–‡ç”Ÿå›¾ï¼ˆtxt2imgï¼‰æ˜¯AIåœ¨ç©ºç™½ç”»å¸ƒä¸Šå‡­ç©ºä½œç”»ï¼Œé‚£ä¹ˆå›¾ç”Ÿå›¾ï¼ˆimg2imgï¼‰å°±æ˜¯AIåœ¨ä½ çš„â€œè‰ç¨¿â€æˆ–â€œå‚è€ƒå›¾â€ä¸Šè¿›è¡Œâ€œäºŒæ¬¡åˆ›ä½œâ€ã€‚å®ƒå°±åƒä¸€ä½æŠ€è‰ºé«˜è¶…çš„ç”»å¸ˆï¼Œä½ é€’ç»™ä»–ä¸€å¼ ä½ éšæ‰‹ç”»çš„ç«æŸ´äººæ¶‚é¸¦ï¼Œå¹¶å‘Šè¯‰ä»–â€œæŠŠå®ƒå˜æˆä¸€ä¸ªèº«ç©¿é“ ç”²ã€ç«™åœ¨å±±å·…çš„éª‘å£«â€ï¼Œä»–å°±èƒ½åœ¨ä¿æŒä½ ç«æŸ´äººåŸºæœ¬å§¿åŠ¿å’Œæ„å›¾çš„å‰æä¸‹ï¼Œä¸ºä½ â€œé‡ç»˜â€å‡ºä¸€å¹…å²è¯—çº§çš„ç”»ä½œã€‚</p>
<ul>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šå›¾ç”Ÿå›¾æ˜¯æ•´ä¸ªAIGCå·¥ä½œæµä¸­åº”ç”¨æœ€å¹¿æ³›ã€ç©æ³•æœ€å¤šå˜çš„æ ¸å¿ƒç¯èŠ‚ã€‚</p>
<ul>
<li>
<p>é£æ ¼è½¬æ¢ï¼šå°†ä¸€å¼ çœŸå®ç…§ç‰‡è½¬æ¢æˆåŠ¨æ¼«ã€æ²¹ç”»æˆ–æ°´å½©é£æ ¼ã€‚</p>
</li>
<li>
<p>çº¿ç¨¿ä¸Šè‰²ï¼šä¸Šä¼ ä¸€å¼ é»‘ç™½çº¿ç¨¿ï¼Œè®©AIä¸ºå…¶æ™ºèƒ½ä¸Šè‰²å¹¶æ·»åŠ å…‰å½±ç»†èŠ‚ã€‚</p>
</li>
<li>
<p>è‰å›¾ç²¾ç‚¼ï¼šå°†ç²—ç³™çš„æ¦‚å¿µè‰å›¾ï¼Œç»†åŒ–æˆä¸€å¼ åŒ…å«ä¸°å¯Œç»†èŠ‚çš„æœ€ç»ˆè®¾è®¡å›¾ã€‚</p>
</li>
<li>
<p>AIæ¢è£…ï¼šä¸Šä¼ ä¸€å¼ ä½ è‡ªå·±çš„ç…§ç‰‡ï¼Œé€šè¿‡ä¿®æ”¹Promptï¼Œä¸ºç…§ç‰‡ä¸­çš„è‡ªå·±â€œæ¢ä¸Šâ€ä¸åŒçš„æœè£…å’Œé…é¥°ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-52">Ideogram</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10d06edcf0f54685904721a5de9ada08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=8tnrrR0BRDN5wNHEVRxkzESbMvY%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>å®šä¹‰ï¼šä¸€æ¬¾åœ¨AIGCæ–‡ç”Ÿå›¾é¢†åŸŸï¼Œä»¥å…¶å“è¶Šçš„æ–‡å­—æ¸²æŸ“èƒ½åŠ›å’Œå¯¹æç¤ºè¯çš„æ·±åˆ»ç†è§£è€Œé—»åçš„AIå›¾åƒç”Ÿæˆæ¨¡å‹ã€‚å®ƒä¸Midjourneyã€DALL-Eç­‰å…±åŒæ„æˆäº†æ—©æœŸAIç»˜ç”»é¢†åŸŸçš„ç¬¬ä¸€æ¢¯é˜Ÿã€‚</p>
</li>
<li>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´æ—©æœŸçš„AIç»˜ç”»æ¨¡å‹æ˜¯â€œè¯†å›¾ä¸è¯†å­—â€çš„åç§‘ç”Ÿï¼Œé‚£ä¹ˆIdeogramå°±æ˜¯é‚£ä¸ªç‡å…ˆæ”»å…‹äº†â€œåœ¨å›¾ç‰‡ä¸­å‡†ç¡®å†™å­—â€è¿™ä¸€éš¾é¢˜çš„â€œä¼˜ç­‰ç”Ÿâ€ã€‚ä½ è®©å…¶ä»–æ¨¡å‹åœ¨å¯ä¹ç½ä¸Šå†™â€œCoca-Colaâ€ï¼Œå®ƒå¯èƒ½ä¼šç»™ä½ ä¸€ä¸²é¬¼ç”»ç¬¦ï¼›è€ŒIdeogramåˆ™èƒ½å¤§æ¦‚ç‡ç”Ÿæˆå‡ºæ‹¼å†™æ­£ç¡®ã€ä¸”ä¸ç“¶èº«é€è§†å®Œç¾è´´åˆçš„æ–‡å­—ã€‚å®ƒå°±åƒä¸€ä¸ªæ—¢æ‡‚ç»˜ç”»åˆæ‡‚æ’ç‰ˆçš„è®¾è®¡å¸ˆã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒç‰¹è‰²ä¸å‘å±•ï¼š</p>
<ul>
<li>
<p>â€œé­”æ³•æç¤ºâ€ï¼ˆMagic Promptï¼‰ï¼šè¿™æ˜¯Ideogramçš„ä¸€å¤§ç‰¹è‰²åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¸®ä½ ä¼˜åŒ–å’Œæ‰©å†™ç®€å•çš„æç¤ºè¯ï¼Œä¸ºä½ ç”Ÿæˆæ›´å…·åˆ›æ„å’Œç»†èŠ‚çš„ç”»é¢ï¼Œæå¤§åœ°é™ä½äº†ä½¿ç”¨é—¨æ§›ã€‚</p>
</li>
<li>
<p>ç‰ˆæœ¬è¿­ä»£ï¼šåœ¨å…¶V2ç‰ˆæœ¬ä¸­ï¼ŒIdeogramå¤§å¹…æå‡äº†ç”Ÿæˆå›¾åƒçš„åˆ†è¾¨ç‡å’Œç»†èŠ‚å¤„ç†èƒ½åŠ›ï¼Œä½¿å…¶åœ¨æ•´ä½“ç”»è´¨ä¸Šä¹Ÿèƒ½ä¸é¡¶çº§æ¨¡å‹ä¸€è¾ƒé«˜ä¸‹ã€‚</p>
</li>
<li>
<p>å¸‚åœºæŒ‘æˆ˜è€…ï¼šå‡­å€Ÿå…¶åœ¨æ–‡å­—æ¸²æŸ“ä¸Šçš„â€œä¸€æ‹›é²œâ€ï¼ŒIdeogramæˆåŠŸåœ¨ç”±Midjourneyä¸»å¯¼çš„å¸‚åœºä¸­æ€å‡ºä¸€æ¡è¡€è·¯ï¼Œå°è¯äº†AIGCé¢†åŸŸâ€œæ²¡æœ‰è°èƒ½ä¸€ç›´ç§°ç‹â€çš„é“ç†ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-53">Inference (æ¨ç†)</h4>
<p>å®šä¹‰ï¼šæŒ‡ä¸€ä¸ªå·²ç»å®Œæˆè®­ç»ƒçš„AIæ¨¡å‹ï¼Œåœ¨æ¥æ”¶åˆ°ç”¨æˆ·çš„è¾“å…¥ï¼ˆå¦‚æç¤ºè¯ã€å›¾ç‰‡ï¼‰åï¼Œå®é™…æ‰§è¡Œè®¡ç®—å¹¶ç”Ÿæˆæœ€ç»ˆè¾“å‡ºï¼ˆå¦‚ä¸€å¼ æ–°å›¾ç‰‡ã€ä¸€æ®µæ–‡å­—ï¼‰çš„è¿‡ç¨‹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šå¦‚æœè¯´â€œè®­ç»ƒâ€æ˜¯AIåœ¨ä¸Šå¤§å­¦ã€å­¦ä¹ çŸ¥è¯†ï¼›é‚£ä¹ˆâ€œæ¨ç†â€å°±æ˜¯å®ƒæ¯•ä¸šåå®é™…â€œä¸Šç­å·¥ä½œâ€çš„è¿‡ç¨‹ã€‚ä½ æ¯ä¸€æ¬¡ç‚¹å‡»â€œç”Ÿæˆâ€æŒ‰é’®ï¼Œéƒ½æ˜¯åœ¨å‘äº‘ç«¯æˆ–æœ¬åœ°çš„AIæ¨¡å‹å‘èµ·ä¸€æ¬¡â€œæ¨ç†â€ä»»åŠ¡ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ•ˆç‡å’Œæˆæœ¬ï¼Œç›´æ¥å†³å®šäº†ä½ çš„ä½¿ç”¨ä½“éªŒã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸å…³é”®æŒ‡æ ‡ï¼š</p>
<ol>
<li>
<p>é€Ÿåº¦ï¼ˆLatencyï¼‰ï¼šæ¨ç†é€Ÿåº¦æ˜¯è¡¡é‡æ¨¡å‹å®ç”¨æ€§çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚å¯¹äºAIè§†é¢‘ã€å®æ—¶æ•°å­—äººç­‰åº”ç”¨ï¼Œä½å»¶è¿Ÿçš„æ¨ç†æ˜¯åˆšéœ€ã€‚</p>
</li>
<li>
<p>æˆæœ¬ï¼ˆCostï¼‰ï¼šäº‘æœåŠ¡å•†é€šå¸¸ä¼šæ ¹æ®æ¨ç†è¿‡ç¨‹æ¶ˆè€—çš„è®¡ç®—èµ„æºï¼ˆå¦‚GPUæ—¶é•¿ã€Tokenæ•°é‡ï¼‰æ¥è®¡è´¹ã€‚</p>
</li>
<li>
<p>ååé‡ï¼ˆThroughputï¼‰ï¼šè¡¡é‡ä¸€ä¸ªç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…èƒ½å®Œæˆå¤šå°‘æ¬¡æ¨ç†ä»»åŠ¡ï¼Œè¿™å¯¹äºéœ€è¦å¤„ç†æµ·é‡è¯·æ±‚çš„ä¼ä¸šçº§åº”ç”¨è‡³å…³é‡è¦ã€‚</p>
</li>
</ol>
<h4 data-id="heading-54">Inpainting (å†…è¡¥)</h4>
<p>å®šä¹‰ï¼šä¸€é¡¹å›¾åƒç¼–è¾‘æŠ€æœ¯ï¼Œå…è®¸ç”¨æˆ·åœ¨å›¾åƒä¸­é€‰æ‹©ä¸€ä¸ªç‰¹å®šåŒºåŸŸï¼ˆâ€œè’™ç‰ˆâ€ï¼‰ï¼Œç„¶åè®©AIæ ¹æ®ç”¨æˆ·çš„æç¤ºè¯ï¼Œæ™ºèƒ½åœ°åœ¨è¯¥åŒºåŸŸå†…é‡æ–°ç”Ÿæˆå†…å®¹ï¼Œå¹¶ä¸å‘¨å›´ç¯å¢ƒæ— ç¼èåˆã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯AIç»˜ç”»å·¥å…·é‡Œçš„â€œæ©¡çš®æ“¦+ç¥ç¬”é©¬è‰¯â€ç»„åˆæŠ€ã€‚</p>
<ol>
<li>
<p>æ“¦é™¤ï¼ˆEraseï¼‰ï¼šç…§ç‰‡é‡Œæœ‰ä¸ªç¢çœ¼çš„è·¯äººï¼Ÿç”¨ç”»ç¬”æŠŠä»–æ¶‚æ‰ã€‚</p>
</li>
<li>
<p>åˆ›é€ ï¼ˆCreateï¼‰ï¼šåœ¨æ¶‚æ‰çš„åŒºåŸŸè¾“å…¥â€œä¸€åªå¥”è·‘çš„æŸ¯åŸºâ€ï¼ŒAIå°±ä¼šâ€œè„‘è¡¥â€å‡ºä¸€åªå…‰å½±ã€é€è§†éƒ½ä¸ç¯å¢ƒå®Œç¾åŒ¹é…çš„æŸ¯åŸºçŠ¬ã€‚ è¿™ä¸ªåŠŸèƒ½è®©ä½ æ‹¥æœ‰äº†â€œä¿®æ”¹ç°å®â€çš„èƒ½åŠ›ã€‚</p>
</li>
</ol>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>
<p>Â Â å›¾åƒä¿®å¤ï¼šè½»æ¾ç§»é™¤ç…§ç‰‡ä¸­çš„ç‘•ç–µã€æ°´å°æˆ–å¤šä½™ç‰©ä½“ã€‚</p>
</li>
<li>
<p>Â Â åˆ›æ„æ¢è£…ï¼šç»™äººç‰©æ¨¡å‹æ¶‚ä¸Šè¡£æœåŒºåŸŸï¼Œè¾“å…¥â€œä¸€ä»¶é—ªäº®çš„é“¶è‰²ç›”ç”²â€ï¼Œå³å¯å®ç°ä¸€é”®æ¢è£…ã€‚</p>
</li>
<li>
<p>Â Â å±€éƒ¨é‡ç»˜ï¼šå¯¹ç”»é¢ä¸­ä¸æ»¡æ„çš„ä»»ä½•éƒ¨åˆ†ï¼ˆå¦‚äººç‰©è¡¨æƒ…ã€èƒŒæ™¯å¤©ç©ºï¼‰è¿›è¡Œå±€éƒ¨â€œé‡ç”»â€ã€‚</p>
</li>
</ul>
<h4 data-id="heading-55">IP-Adapter (Image Prompt Adapterï¼Œå›¾åƒæç¤ºé€‚é…å™¨)</h4>
<p>å®šä¹‰ï¼šä¸€ç§é«˜æ•ˆçš„ã€ç”¨äºè§£è€¦æ–‡æœ¬ä¸å›¾åƒæç¤ºè¯ï¼Œå¹¶å…è®¸AIæ¨¡å‹ä»¥æé«˜çš„ä¿çœŸåº¦å‚è€ƒè¾“å…¥å›¾åƒç‰¹å¾çš„é™„åŠ æ¨¡å—ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™æ˜¯è¿‘å¹´æ¥AIç»˜ç”»é¢†åŸŸæœ€é‡è¦çš„æŠ€æœ¯çªç ´ä¹‹ä¸€ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºå›¾ç”Ÿå›¾ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2F302.ai%2Fsearch%3Fkeyword%3Di2i" target="_blank" title="https://302.ai/search?keyword=i2i" ref="nofollow noopener noreferrer">img2img</a>ï¼‰çš„â€œè¶…çº§å¢å¼ºç‰ˆâ€å’Œâ€œç²¾å‡†åˆ¶å¯¼ç‰ˆâ€ã€‚ä¼ ç»Ÿçš„å›¾ç”Ÿå›¾åœ¨å‚è€ƒåŸå›¾æ—¶ï¼Œå¾€å¾€å®¹æ˜“â€œè·‘åâ€ï¼Œéš¾ä»¥ç²¾ç¡®æ§åˆ¶è¦ä¿ç•™çš„ç‰¹å¾ã€‚è€ŒIP-Adapteråˆ™åƒä¸€ä¸ªâ€œç‰¹å¾å¸ç®¡â€ï¼Œå®ƒèƒ½ç²¾å‡†åœ°ä»ä½ æä¾›çš„å‚è€ƒå›¾ä¸­â€œå¸å–â€ä½ æƒ³è¦çš„æ ¸å¿ƒç‰¹å¾ï¼ˆå¦‚äººç‰©çš„é¢éƒ¨ã€æœè£…çš„é£æ ¼ã€ç”»é¢çš„æ„å›¾ï¼‰ï¼Œç„¶åå°†å…¶â€œæ³¨å…¥â€åˆ°æ–°çš„ç”Ÿæˆè¿‡ç¨‹ä¸­ã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p>ç»ˆæè§’è‰²ä¸€è‡´æ€§ï¼šIP-Adapteræ˜¯ç›®å‰å®ç°è§’è‰²ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æœ€ä¸»æµã€æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚é€šè¿‡IP-Adapter Face IDï¼Œä½ å¯ä»¥åªç”¨ä¸€å¼ å‚è€ƒäººè„¸å›¾ï¼Œå°±è®©AIåœ¨ç”Ÿæˆçš„æ— æ•°å¼ å›¾ç‰‡ä¸­éƒ½ä¿æŒè¿™å¼ è„¸çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œæ•ˆæœè¿œè¶…Dreamboothï¼Œä¸”æ— éœ€è®­ç»ƒã€‚</p>
</li>
<li>
<p>é£æ ¼è¿ç§»ï¼šä½ å¯ä»¥ç”¨ä¸€å¼ å……æ»¡è‰ºæœ¯æ„Ÿçš„ç”»ä½œä½œä¸ºIP-Adapterçš„è¾“å…¥ï¼ŒAIå°±èƒ½å°†å…¶ç‹¬ç‰¹çš„è‰²å½©å’Œç¬”è§¦é£æ ¼ï¼Œå®Œç¾åœ°åº”ç”¨åˆ°ä½ æ–°ç”Ÿæˆçš„ä»»ä½•å†…å®¹ä¸Šã€‚</p>
</li>
<li>
<p>è§£è€¦ä¸ç»„åˆï¼šIP-Adapteræœ€å¼ºå¤§çš„åœ°æ–¹åœ¨äºâ€œè§£è€¦â€ã€‚ä½ å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸€å¼ å›¾ä½œä¸ºäººè„¸å‚è€ƒï¼Œå¦ä¸€å¼ å›¾ä½œä¸ºé£æ ¼å‚è€ƒï¼Œå†ç”¨ControlNeté”å®šå§¿åŠ¿ï¼Œæœ€åé€šè¿‡æ–‡æœ¬PromptæŒ‡å®šåœºæ™¯â€”â€”è¿™å››è€…äº’ä¸å¹²æ‰°ï¼ŒååŒå·¥ä½œï¼Œç»™äºˆäº†åˆ›ä½œè€…å‰æ‰€æœªæœ‰çš„ã€ç²¾ç»†åŒ–çš„æ§åˆ¶èƒ½åŠ›ã€‚</p>
</li>
</ol>
<h2 data-id="heading-56">å­—æ¯Jï¼š</h2>
<h4 data-id="heading-57">Jitter (æŠ–åŠ¨/â€œç”»é¢æŠ½æâ€)</h4>
<p>å®šä¹‰ï¼šåœ¨AIç”Ÿæˆçš„è§†é¢‘æˆ–è¿ç»­å›¾åƒåºåˆ—ä¸­ï¼Œç”±äºå¸§ä¸å¸§ä¹‹é—´çš„å¾®å°ä¸ä¸€è‡´æ€§ï¼Œå¯¼è‡´ç”»é¢ä¸­çš„ç‰©ä½“ï¼ˆå°¤å…¶æ˜¯èƒŒæ™¯æˆ–ç²¾ç»†çº¹ç†ï¼‰äº§ç”Ÿä¸è§„å¾‹çš„ã€å¿«é€Ÿçš„ã€ç±»ä¼¼äºâ€œæŠ½æâ€æˆ–â€œé—ªçƒâ€çš„è§†è§‰ç‘•ç–µã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±åƒæ˜¯ä½ çœ‹ä¸€éƒ¨è€ç”µå½±æ—¶ï¼Œèƒ¶ç‰‡å› è€åŒ–è€Œäº§ç”Ÿçš„è½»å¾®è·³åŠ¨ã€‚åœ¨AIè§†é¢‘é‡Œï¼ŒJitteræ˜¯ç ´åæ²‰æµ¸æ„Ÿå’ŒçœŸå®æ„Ÿçš„å¤´å·æ€æ‰‹ã€‚ä½ å¯èƒ½ç”Ÿæˆäº†ä¸€ä¸ªéå¸¸é…·çš„èµ›åšæœ‹å…‹åŸå¸‚å¤œæ™¯ï¼Œä½†å¦‚æœè¿œå¤„çš„éœ“è™¹ç¯ç‰Œåœ¨æ¯ä¸€å¸§éƒ½è½»å¾®åœ°â€œæŠ–â€ä¸€ä¸‹ï¼Œè§‚ä¼—çš„æ³¨æ„åŠ›å°±ä¼šç«‹åˆ»ä»å®å¤§çš„åœºæ™¯è¢«æ‹‰å›åˆ°â€œè¿™æ˜¯AIç”Ÿæˆâ€çš„å‡ºæˆæ„Ÿä¸­ã€‚å®ƒæ˜¯ä¸€ç§é«˜é¢‘çš„ã€ç»†ç¢çš„ä¸ä¸€è‡´æ€§ï¼ˆInconsistencyï¼‰ã€‚</p>
<p>åº”ç”¨åœºæ™¯ä¸åº”å¯¹ï¼š</p>
<ol>
<li>
<p>äº§ç”ŸåŸå› ï¼šJitterçš„æ ¹æºåœ¨äºï¼Œæ‰©æ•£æ¨¡å‹åœ¨ç”Ÿæˆæ¯ä¸€å¸§æ—¶ï¼Œè™½ç„¶å¤§æ–¹å‘ä¸€è‡´ï¼Œä½†åœ¨æœ€åº•å±‚çš„éšæœºå™ªå£°ï¼ˆNoiseï¼‰ä¸Šå­˜åœ¨ç»†å¾®å·®å¼‚ã€‚è¿™äº›å·®å¼‚åœ¨é™æ€å›¾ç‰‡ä¸Šæ— ä¼¤å¤§é›…ï¼Œä½†åœ¨è¿ç»­æ’­æ”¾æ—¶å°±ä¼šè¢«æ”¾å¤§æˆæ¼äººçš„â€œæŠ–åŠ¨â€ã€‚</p>
</li>
<li>
<p>å·¥ä½œæµä¸­çš„ç¼“è§£ï¼šè™½ç„¶æ— æ³•å®Œå…¨æ ¹é™¤ï¼Œä½†å¯ä»¥é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¥å‡è½»Jitterã€‚ä¾‹å¦‚ï¼Œåœ¨è§†é¢‘ç”Ÿæˆçš„å·¥ä½œæµä¸­ï¼Œå¼•å…¥TemporalNetï¼ˆæ—¶é—´ç½‘ç»œï¼‰æˆ–ä½¿ç”¨å…·æœ‰æ›´å¼ºæ—¶é—´ä¸€è‡´æ€§çš„æ¨¡å‹ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç”»é¢çš„ç¨³å®šæ€§ã€‚æ­¤å¤–ï¼Œåœ¨åæœŸå¤„ç†ä¸­ï¼Œä½¿ç”¨ä¸“ä¸šè§†é¢‘ç¨³å®šè½¯ä»¶ï¼ˆå¦‚After Effectsçš„åŠ¨æ€ç¨³å®šåŠŸèƒ½ï¼‰å¯¹AIç”Ÿæˆçš„è§†é¢‘è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šâ€œæŠšå¹³â€è¿™ç§æŠ–åŠ¨ã€‚</p>
</li>
</ol>
<h4 data-id="heading-58">Judgment (åˆ¤æ–­)</h4>
<p>å®šä¹‰ï¼šåœ¨AIGCå·¥ä½œæµä¸­ï¼Œç‰¹æŒ‡ç”±äººç±»åˆ›ä½œè€…åœ¨å…³é”®èŠ‚ç‚¹ä¸Šåšå‡ºçš„ã€åŸºäºä¸»è§‚å®¡ç¾ã€ç»éªŒå’Œé€»è¾‘çš„å†³ç­–è¡Œä¸ºã€‚å®ƒä¸AIåŸºäºæ•°æ®å’Œæ¦‚ç‡çš„â€œè®¡ç®—â€ç›¸å¯¹ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™æ­£æ˜¯äººç±»åœ¨ç¯ï¼ˆHuman-in-the-loopï¼‰çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨â€”â€”æˆä¸ºAIæ— æ³•æ›¿ä»£çš„â€œæœ€ç»ˆè£å†³è€…â€ã€‚AIå¯ä»¥ä¸ºä½ æ‰¹é‡ï¼ˆBatchï¼‰ç”Ÿæˆ100å¼ é£æ ¼å„å¼‚çš„èµ›åšæ­Œå§¬ï¼Œä½†å“ªä¸€å¼ çš„çœ¼ç¥æœ€ç¬¦åˆæ­Œæ›²çš„æƒ…æ„Ÿï¼Ÿå“ªä¸€å¼ çš„å…‰å½±æ„å›¾æœ€å…·è‰ºæœ¯å†²å‡»åŠ›ï¼Ÿâ€”â€”åšå‡ºè¿™ä¸ªé€‰æ‹©çš„ï¼Œä¸æ˜¯AIï¼Œè€Œæ˜¯ä½ çš„Judgmentã€‚å®ƒä»£è¡¨äº†äººç±»åˆ›ä½œè€…ä¸å¯æˆ–ç¼ºçš„è‰ºæœ¯ç›´è§‰å’Œå®¡ç¾å†³ç­–ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼šJudgmentè´¯ç©¿äºAIGCåˆ›ä½œçš„å§‹ç»ˆã€‚</p>
<ol>
<li>
<p>Promptæ„æ€ï¼šé€‰æ‹©ä»€ä¹ˆæ ·çš„è¯æ±‡æ¥æ¿€å‘AIçš„æƒ³è±¡åŠ›ï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ç§åˆ¤æ–­ã€‚</p>
</li>
<li>
<p>â€œæŠ½å¡â€ä¸ç­›é€‰ï¼šä»AIç”Ÿæˆçš„æµ·é‡ç»“æœä¸­ï¼ŒæŒ‘é€‰å‡ºæœ€ç¬¦åˆé¡¹ç›®éœ€æ±‚çš„â€œç¥ä½œâ€ã€‚</p>
</li>
<li>
<p>åæœŸå‰ªè¾‘ï¼šåœ¨A-rollå’ŒB-rollä¹‹é—´å¦‚ä½•åˆ‡æ¢ï¼Ÿå“ªä¸ªé•œå¤´çš„èŠ‚å¥æœ€èƒ½æ‰“åŠ¨äººå¿ƒï¼Ÿè¿™å®Œå…¨ä¾èµ–äºä½ ä½œä¸ºâ€œå¯¼æ¼”â€çš„è‰ºæœ¯åˆ¤æ–­ã€‚</p>
</li>
<li>
<p>ä¼¦ç†åˆ¤æ–­ï¼šè¿™é¡¹æŠ€æœ¯çš„ä½¿ç”¨æ˜¯å¦ä¼šå¸¦æ¥è´Ÿé¢å½±å“ï¼Ÿä½œå“çš„å†…å®¹æ˜¯å¦ç¬¦åˆç¤¾ä¼šè§„èŒƒï¼Ÿè¿™æ˜¯ä¸€ç§æ›´é«˜å±‚æ¬¡çš„ã€åŸºäºç¤¾ä¼šè´£ä»»çš„åˆ¤æ–­ã€‚</p>
</li>
</ol>
<h4 data-id="heading-59">Junction (è¿æ¥ç‚¹/â€œåˆ›æ„æ¢çº½â€)</h4>
<p>å®šä¹‰ï¼šåœ¨AIGCå·¥ä½œæµä¸­ï¼ŒæŒ‡ä»£é‚£äº›èƒ½å¤Ÿå°†ä¸¤ä¸ªæˆ–å¤šä¸ªä¸åŒçš„æ¦‚å¿µã€æŠ€æœ¯æˆ–æµç¨‹è¿æ¥èµ·æ¥ï¼Œä»è€Œåˆ›é€ å‡ºå…¨æ–°å¯èƒ½æ€§æˆ–åŠŸèƒ½çš„â€œæ¢çº½â€æˆ–â€œèŠ‚ç‚¹â€ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±åƒåŸå¸‚äº¤é€šç³»ç»Ÿä¸­çš„â€œç«‹äº¤æ¡¥â€ã€‚ä¸€åº§ç«‹äº¤æ¡¥æœ¬èº«ä¸äº§ç”Ÿè½¦æµï¼Œä½†å®ƒè®©æ¥è‡ªä¸œè¥¿å—åŒ—çš„è½¦æµå¾—ä»¥åœ¨æ­¤äº¤æ±‡ã€è½¬å‘ï¼Œä»è€Œé€šå¾€å…¨æ–°çš„ç›®çš„åœ°ã€‚åœ¨AIGCä¸­ï¼ŒJunctionå°±æ˜¯è¿™æ ·çš„â€œåˆ›æ„ç«‹äº¤æ¡¥â€ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>
<p>å¤šæ¨¡æ€èåˆï¼šä¸€ä¸ªèƒ½å°†ä½ çš„æ­Œè¯ï¼ˆæ–‡æœ¬ï¼‰ã€ä¸€æ®µæ—‹å¾‹ï¼ˆéŸ³é¢‘ï¼‰å’Œä¸€å¼ é£æ ¼å‚è€ƒå›¾ï¼ˆå›¾åƒï¼‰ç»“åˆèµ·æ¥ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´éŸ³ä¹è§†é¢‘çš„AIå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¼ºå¤§çš„Junctionã€‚</p>
</li>
<li>
<p>ControlNetçš„æœ¬è´¨ï¼šControlNetçš„æ¯ä¸€ä¸ªé¢„å¤„ç†å™¨ï¼ˆå¦‚Canny, OpenPose, Depthï¼‰éƒ½å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªJunctionã€‚å®ƒä»¬å°†å¤–éƒ¨çš„æ§åˆ¶ä¿¡å·ï¼ˆçº¿ç¨¿ã€å§¿åŠ¿å›¾ã€æ·±åº¦å›¾ï¼‰ä¸æ‰©æ•£æ¨¡å‹çš„ç”Ÿæˆæµç¨‹è¿æ¥èµ·æ¥ï¼Œå®ç°äº†å‰æ‰€æœªæœ‰çš„å¯æ§æ€§ã€‚</p>
</li>
<li>
<p>å·¥ä½œæµæ­å»ºï¼šåœ¨ComfyUIè¿™æ ·çš„èŠ‚ç‚¹å¼ç•Œé¢ä¸­ï¼Œä½ ç”¨çº¿æ¡è¿æ¥ä¸åŒèŠ‚ç‚¹çš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨æ„å»ºä¸€ä¸ªä¸ªJunctionï¼Œè®©æ•°æ®æµå’Œæ§åˆ¶æµå¾—ä»¥åœ¨ä½ çš„â€œåˆ›æ„ç”µè·¯æ¿â€ä¸Šé¡ºç•…åœ°æµæ·Œã€‚</p>
</li>
</ol>
<h2 data-id="heading-60">å­—æ¯Kï¼š</h2>
<h4 data-id="heading-61">Kling (å¯çµ)</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a88d691c821400b8ef217906a3a7faf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=hpKc0P6yI5OYnvaac1TbrB4sKMQ%3D" alt="" loading="lazy"/></p>
<p>å®šä¹‰ï¼šç”±å¿«æ‰‹å…¬å¸ç ”å‘çš„ä¸€æ¬¾å¤§è§„æ¨¡ã€é«˜è´¨é‡çš„å›¾æ–‡ç”Ÿè§†é¢‘å¤§æ¨¡å‹ã€‚</p>
<p>å¦‚æœè¯´Soraæ˜¯æ¥è‡ªç¡…è°·çš„â€œä¸–ç•Œæ¨¡æ‹Ÿå™¨â€ï¼Œé‚£ä¹ˆKlingå°±æ˜¯å´›èµ·äºä¸œæ–¹ã€æ·±æ¤äºçŸ­è§†é¢‘æ–‡åŒ–åœŸå£¤çš„â€œè§†é¢‘ç‚¼é‡‘æœ¯å£«â€ã€‚å®ƒèƒŒé å¿«æ‰‹å…¬å¸åœ¨è§†é¢‘ç†è§£ã€å¤„ç†å’Œåˆ†å‘é¢†åŸŸé•¿è¾¾åä½™å¹´çš„æ·±åšæŠ€æœ¯ç§¯ç´¯ï¼Œç”«ä¸€äº®ç›¸ä¾¿æŠ€æƒŠå››åº§ã€‚Klingé‡‡ç”¨äº†ä¸Soraç›¸ä¼¼çš„DiTï¼ˆDiffusion Transformerï¼‰æ¶æ„ï¼Œå¹¶èåˆäº†è‡ªç ”çš„3D VAEç­‰åˆ›æ–°æŠ€æœ¯ï¼Œä½¿å…¶åœ¨æ¨¡æ‹ŸçœŸå®ç‰©ç†ä¸–ç•Œã€è¡¨ç°å¤æ‚åŠ¨æ€æ–¹é¢å°¤ä¸ºå‡ºè‰²ã€‚</p>
<h4 data-id="heading-62">Keyframe (å…³é”®å¸§)</h4>
<p>å®šä¹‰ï¼šä¸€ä¸ªæºè‡ªä¼ ç»ŸåŠ¨ç”»å’Œè§†é¢‘åˆ¶ä½œçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒæŒ‡åœ¨æ—¶é—´è½´ä¸Šå®šä¹‰çš„ã€æ ‡å¿—ç€ä¸€ä¸ªåŠ¨ä½œæˆ–å˜åŒ–â€œèµ·ç‚¹â€å’Œâ€œç»ˆç‚¹â€çš„ç‰¹å®šå¸§ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šåœ¨AIè§†é¢‘ç”Ÿæˆä¸­ï¼ŒKeyframeå°±æ˜¯ä½ ä½œä¸ºâ€œå¯¼æ¼”â€æ‰‹ä¸­çš„â€œåœºè®°æ¿â€å’Œâ€œè°ƒåº¦æŒ‡ä»¤â€ã€‚ä½ ä¸å†åªæ˜¯ç»™AIä¸€ä¸ªæ¨¡ç³Šçš„â€œå‰§æœ¬â€ï¼ˆPromptï¼‰ï¼Œè€Œæ˜¯å¯ä»¥ç²¾ç¡®åœ°å‘Šè¯‰å®ƒï¼š</p>
<ul>
<li>
<p>â€œç¬¬0ç§’ï¼Œé•œå¤´æ˜¯å¹¿è§’ï¼Œä¸»è§’ç«™åœ¨å±±é¡¶ã€‚â€</p>
</li>
<li>
<p>â€œç¬¬5ç§’ï¼Œé•œå¤´æ¨è¿›ä¸ºç‰¹å†™ï¼Œä¸»è§’çœ¼ä¸­å«æ³ªã€‚â€</p>
</li>
<li>
<p>â€œç¬¬10ç§’ï¼Œé•œå¤´æ‹‰è¿œï¼Œå¤©ç©ºä¸‹èµ·å¤§é›ªã€‚â€ AIçš„ä»»åŠ¡ï¼Œå°±æ˜¯åœ¨ä½ è®¾å®šçš„è¿™äº›â€œå…³é”®è·¯æ ‡â€ä¹‹é—´ï¼Œæ™ºèƒ½åœ°ã€å¹³æ»‘åœ°â€œæ’å€¼è®¡ç®—â€å‡ºæ‰€æœ‰çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä»è€Œå½¢æˆä¸€æ®µå…·æœ‰æ˜ç¡®é•œå¤´è¯­è¨€å’Œå™äº‹èŠ‚å¥çš„è§†é¢‘ã€‚</p>
</li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼šKeyframeæ˜¯å®ç°AIè§†é¢‘å¯æ§å™äº‹çš„æ ¸å¿ƒæŠ€æœ¯ã€‚æ— è®ºæ˜¯æ§åˆ¶é•œå¤´çš„æ¨æ‹‰æ‘‡ç§»ã€ç”»é¢çš„å†…å®¹æ¼”å˜ï¼ˆå¦‚ä¸€ä¸ªè‹¹æœå˜æˆæ©˜å­ï¼‰ï¼Œè¿˜æ˜¯è§’è‰²çš„åŠ¨ä½œè·¯å¾„ï¼Œéƒ½ç¦»ä¸å¼€å¯¹å…³é”®å¸§çš„è®¾å®šã€‚å®ƒæ˜¯ä½ å°†è„‘æµ·ä¸­çš„åˆ†é•œç”»é¢ï¼Œè½¬åŒ–ä¸ºAIå¯æ‰§è¡ŒæŒ‡ä»¤çš„å”¯ä¸€æ¡¥æ¢ã€‚</p>
<h4 data-id="heading-63">K-Samplers / Samplers (é‡‡æ ·å™¨)</h4>
<p>å®šä¹‰ï¼šåœ¨æ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelï¼‰ä¸­ï¼Œç‰¹æŒ‡ä¸€ç³»åˆ—ç”¨äºæ‰§è¡Œâ€œå»å™ªâ€ï¼ˆDenoisingï¼‰è¿‡ç¨‹çš„å…·ä½“ç®—æ³•ã€‚K-Samplersç‰¹æŒ‡ä¸€ç»„ç”±Karrasç­‰ç ”ç©¶è€…æå‡ºçš„ã€åœ¨ä½æ­¥æ•°ä¸‹ä¹Ÿèƒ½è·å¾—é«˜è´¨é‡ç»“æœçš„é«˜æ•ˆé‡‡æ ·å™¨ã€‚</p>
<p>é€šä¿—è§£é‡Šï¼šè¿™å°±åƒæ˜¯AIç»˜ç”»å¤§å¸ˆçš„â€œç§äººç¬”åˆ·å·¥å…·ç®±â€ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒAIç”»ç”»æ˜¯ä»ä¸€å †â€œå™ªç‚¹é›ªèŠ±â€ä¸­ï¼Œä¸€æ­¥æ­¥â€œæ“¦â€å‡ºæ¸…æ™°çš„å›¾åƒã€‚Samplerå°±æ˜¯AIåœ¨â€œæ“¦æ‹­â€æ—¶æ‰€ä½¿ç”¨çš„ä¸åŒâ€œç¬”åˆ·â€æˆ–â€œæ“¦é™¤ç®—æ³•â€ã€‚</p>
<ul>
<li>
<p>æœ‰çš„â€œç¬”åˆ·â€ï¼ˆå¦‚<code>Euler a</code>ï¼‰å¤§å¼€å¤§åˆï¼Œæ“¦å¾—å¿«ï¼Œå‡ ç¬”å°±èƒ½å‡ºä¸ªå¤§æ¦‚è½®å»“ï¼Œé€‚åˆå¿«é€Ÿå‡ºè‰å›¾ã€‚</p>
</li>
<li>
<p>æœ‰çš„â€œç¬”åˆ·â€ï¼ˆå¦‚<code>DPM++ 2M Karras</code>ï¼‰åˆ™ç²¾é›•ç»†ç¢ï¼Œä¸‹ç¬”ç¨³å¥ï¼Œè™½ç„¶æ…¢ä¸€äº›ï¼Œä½†æ“¦å‡ºæ¥çš„ç”»é¢ç»†èŠ‚æ›´ä¸°å¯Œã€æ›´ç¨³å®šã€‚</p>
</li>
<li>
<p>è¿˜æœ‰çš„â€œç¬”åˆ·â€è‡ªå¸¦ä¸€äº›ç‹¬ç‰¹çš„â€œç¬”è§¦â€ï¼Œä¼šè®©ç”»é¢å‘ˆç°å‡ºæ„æƒ³ä¸åˆ°çš„è‰ºæœ¯é£æ ¼ã€‚</p>
</li>
</ul>
<p>åº”ç”¨åœºæ™¯ï¼šå¯¹äºé«˜é˜¶ç©å®¶æ¥è¯´ï¼Œé€‰æ‹©å’Œåˆ‡æ¢Sampleræ˜¯å·¥ä½œæµä¸­ä¸€é¡¹å……æ»¡â€œç„å­¦â€ä¹è¶£çš„è°ƒè¯•ç¯èŠ‚ã€‚</p>
<ul>
<li>
<p>æ•ˆç‡ä¸è´¨é‡çš„æƒè¡¡ï¼šåœ¨éœ€è¦å¿«é€Ÿè¿­ä»£åˆ›æ„æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªå¿«é€Ÿçš„é‡‡æ ·å™¨ï¼›åœ¨è¿½æ±‚æœ€ç»ˆæˆå“è´¨é‡æ—¶ï¼Œåˆ™æ¢ç”¨ä¸€ä¸ªæ›´ç¨³å®šçš„é«˜è´¨é‡é‡‡æ ·å™¨ã€‚</p>
</li>
<li>
<p>é£æ ¼æ¢ç´¢ï¼šæœ‰æ—¶ï¼Œä»…ä»…æ˜¯æ›´æ¢ä¸€ä¸ªä¸åŒçš„Samplerï¼Œå°±èƒ½åœ¨å…¶ä»–å‚æ•°å®Œå…¨ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè®©ä½ çš„ç”»é¢é£æ ¼äº§ç”Ÿå¾®å¦™è€ŒæƒŠå–œçš„å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯AIç»˜ç”»â€œç‚¼ä¸¹â€ä¹è¶£çš„é‡è¦æ¥æºã€‚</p>
</li>
</ul>
<hr/>
<p>é‰´äºç¯‡å¹…åŸå› ï¼Œåœ¨ä¸‹ç¯‡ä¸­è®©æˆ‘ä»¬ä»å­—æ¯Lç»§ç»­æ¢ç´¢AIGCçš„ä¸–ç•Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb4c48ece57c4e799c07b6deb4f8d72c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzAyQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640551&amp;x-signature=ra9an19pkcKsEgToFWjgANndP6A%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WooCommerceå¦‚ä½•è‡ªå®šä¹‰ç»“è´¦è¡¨å•å’Œæ ·å¼]]></title>    <link>https://juejin.cn/post/7576155790164688947</link>    <guid>https://juejin.cn/post/7576155790164688947</guid>    <pubDate>2025-11-24T16:47:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155790164688947" data-draft-id="7576155790164590643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WooCommerceå¦‚ä½•è‡ªå®šä¹‰ç»“è´¦è¡¨å•å’Œæ ·å¼"/> <meta itemprop="keywords" content="WordPress"/> <meta itemprop="datePublished" content="2025-11-24T16:47:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aå°è¾£æ¤’"/> <meta itemprop="url" content="https://juejin.cn/user/4150009734111123"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WooCommerceå¦‚ä½•è‡ªå®šä¹‰ç»“è´¦è¡¨å•å’Œæ ·å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4150009734111123/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aå°è¾£æ¤’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T16:47:54.000Z" title="Mon Nov 24 2025 16:47:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>
<p>WooCommerce ç°åœ¨æœ‰ä¸¤ç§ç»“è´¦ä½“éªŒï¼š<strong>Blocksï¼ˆGutenberg åŒºå—ç»“è´¦ï¼‰</strong> ä¸ <strong>ç»å…¸ shortcode ç»“è´¦</strong>ã€‚å¾ˆå¤šå­—æ®µç¼–è¾‘æ’ä»¶ï¼ˆå¦‚ <em>Checkout Field Editor for WooCommerce</em>ï¼‰åªå¯¹ç»å…¸ç»“è´¦ç”Ÿæ•ˆã€‚</p>
</li>
<li>
<p>å¦‚æœä½ æŠŠé¡µé¢æ”¹ä¸ºä½¿ç”¨ç®€ç  <code>[woocommerce_checkout]</code>ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨è¯¥æ’ä»¶ï¼Œä½†éœ€è¦æ‰‹åŠ¨æ¢å¤åŒºå—ç»“è´¦é‚£æ ·çš„ UIï¼ˆä¾‹å¦‚å•†å“ç¼©ç•¥å›¾ + æ•°é‡å¾½ç« ï¼‰ã€‚</p>
</li>
<li>
<p>è§£å†³æ–¹æ³•ï¼šç”¨ä¸¤ä¸ª WordPress/WooCommerce filterï¼ˆé’©å­ï¼‰ï¼š</p>
<ol>
<li><code>woocommerce_cart_item_name</code>ï¼šæ”¹å†™å•†å“åç§°çš„ HTMLï¼Œæ’å…¥ç¼©ç•¥å›¾ä¸å¾½ç«  DOMï¼ˆå¹¶ä¿ç•™åŸæœ‰å•†å“åé“¾æ¥/æ–‡æœ¬ï¼‰ã€‚</li>
<li><code>woocommerce_checkout_cart_item_quantity</code>ï¼šç§»é™¤ WooCommerce è‡ªåŠ¨æ·»åŠ çš„ <code>&lt;strong class="product-quantity"&gt;Ã— 1&lt;/strong&gt;</code>ï¼Œé¿å…é‡å¤ã€‚</li>
</ol>
</li>
<li>
<p>CSS ä½¿ç”¨åŒºå—çš„ classï¼ˆ<code>.wc-block-components-order-summary-item__quantity</code>ï¼‰ï¼Œé¢œè‰²ç”¨ CSS å˜é‡ <code>--theme-palette-color-1</code> ç»§æ‰¿å…¨å±€è°ƒè‰²æ¿ï¼Œè¿™æ ·å½“å…¨å±€é¢œè‰²å˜æ›´æ—¶å¾½ç« é¢œè‰²è‡ªåŠ¨åŒæ­¥ã€‚</p>
</li>
</ul>
<p>ä¸‹è½½æ’ä»¶<strong>Checkout Field Editor for WooCommerce</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fd12b427ff442e0975804bce007bb8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQeWwj-i-o-akkg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764607673&amp;x-signature=wF30mFd0K7%2Brh6JMlxF0sgoVBiA%3D" alt="image.png" loading="lazy"/></p>
<p>WooCommerceé‡Œè®¾ç½®è‡ªå®šä¹‰ç»“è´¦å­—æ®µï¼Œä¾‹å¦‚billing_first_nameæ˜¯ä¸­æ–‡çš„å§“ï¼Œbilling_last_nameæ˜¯ä¸­æ–‡çš„åï¼Œå¯ä»¥è°ƒæ•´å­—æ®µä¸Šä¸‹é¡ºåºæ¥æ˜¾ç¤ºå­—æ®µçš„é¡ºåº</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26ac9be61c0a47cbb270ae6fb37b6a93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQeWwj-i-o-akkg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764607673&amp;x-signature=8BHQI%2FFmR%2BKhxPBwe5l%2BiSooz6w%3D" alt="image.png" loading="lazy"/></p>
<p>Checkout Field Editor æ’ä»¶åªèƒ½ä¿®æ”¹ â€œç»å…¸ç»“è´¦é¡µï¼ˆshortcodeï¼‰â€ çš„å­—æ®µ</p>
<p>ä½†æ˜¯WooCommerceç½‘ç«™ç”¨çš„æ˜¯<strong>WooCommerce Blocks checkoutï¼ˆGutenberg åŒºå—ç‰ˆç»“è´¦</strong></p>
<p>åŒºå—ç»“è´¦ä½¿ç”¨å®Œå…¨ä¸åŒçš„ç³»ç»Ÿï¼Œ<strong>ä¸è¯»å– Checkout Field Editor çš„è®¾ç½®</strong></p>
<p>åªè¦å…³é—­ WooCommerce Blocks çš„ç»“è´¦ï¼Œæ¢æˆâ€œç»å…¸ç»“è´¦é¡µï¼ˆshortcodeï¼‰â€</p>
<p>æ‰“å¼€ç»“è´¦é¡µé¢ï¼Œä½¿ç”¨Elementorç¼–è¾‘ï¼Œåˆ æ‰ä¸»é¢˜é»˜è®¤çš„ç»“è´¦å®¹å™¨</p>
<p>å†æ–°æ·»ä¸€ä¸ªç®€ç shortcode</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">woocommerce_checkout</span>]
</code></pre>
<p>å°±èƒ½æ˜¾ç¤ºCheckout Field Editorè‡ªå®šä¹‰çš„å­—æ®µï¼Œç°åœ¨ä¿®æ”¹[woocommerce_checkout]çš„æ ·å¼</p>
<p>åœ¨ä¸»é¢˜ï¼Œè‡ªå®šä¹‰é‡Œæ–°å¢é¢å¤–CSS</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8ed5e7c3ecb4d33a668d44c539b0062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQeWwj-i-o-akkg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764607673&amp;x-signature=g9RF2Rsj%2FqtnmVtmoKr3g9fugkY%3D" alt="image.png" loading="lazy"/></p>
<p>å†™å…¥ä¸‹é¢ä»£ç ï¼ŒCSS ä¸å†™æ­»é¢œè‰²ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>var(--theme-palette-color-1)</code>ï¼ˆè®¸å¤šåŒºå—ä¸»é¢˜/å…¨å±€è°ƒè‰²æ¿éƒ½ä¼šå®šä¹‰ï¼‰ã€‚å¦‚æœä½ çš„ä¸»é¢˜ä½¿ç”¨ä¸åŒçš„å˜é‡åï¼Œè¯·ç›¸åº”è°ƒæ•´ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ•´ä¸ªå•†å“è¡Œ */</span>
<span class="hljs-selector-class">.checkout-product-row</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: flex-start;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-comment">/* å›¾ç‰‡å®¹å™¨ï¼Œç”¨äºå®šä½å¾½æ ‡ */</span>
<span class="hljs-selector-class">.checkout-product-thumb</span> {
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* å•†å“ç¼©ç•¥å›¾ */</span>
<span class="hljs-selector-class">.checkout-product-thumb</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">object-fit</span>: cover;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">display</span>: block;
}

<span class="hljs-comment">/* Woo Blocks æ•°é‡å¾½æ ‡ï¼ˆé¢œè‰²ç»§æ‰¿ theme paletteï¼‰ */</span>
<span class="hljs-selector-class">.checkout-product-thumb</span> <span class="hljs-selector-class">.wc-block-components-order-summary-item__quantity</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: -<span class="hljs-number">6px</span>;
    <span class="hljs-attribute">right</span>: -<span class="hljs-number">6px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">2px</span> <span class="hljs-number">7px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">11px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>; <span class="hljs-comment">/* æ–‡å­—é¢œè‰²ï¼ŒBlocks é»˜è®¤ç™½è‰² */</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--theme-palette-color-<span class="hljs-number">1</span>); <span class="hljs-comment">/* è‡ªåŠ¨ä½¿ç”¨å…¨å±€è°ƒè‰²æ¿é¢œè‰² */</span>
}

<span class="hljs-comment">/* å•†å“ä¿¡æ¯åŒºåŸŸ */</span>
<span class="hljs-selector-class">.checkout-product-info</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-comment">/* å•†å“æ ‡é¢˜ */</span>
<span class="hljs-selector-class">.checkout-product-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.4</span>;
    <span class="hljs-attribute">display</span>: block;
}
</code></pre>
<p>åœ¨å¤–è§‚ï¼Œä¸»é¢˜æ–‡ä»¶ç¼–è¾‘å™¨é‡Œï¼Œé€‰ç€<code>functions.php</code>ï¼Œ<strong>æ³¨æ„</strong>ï¼šå§‹ç»ˆç”¨å­ä¸»é¢˜ï¼ˆchild themeï¼‰æ¥ä¿®æ”¹ <code>functions.php</code>ï¼Œé¿å…ä¸»é¢˜æ›´æ–°ä¸¢å¤±ä¿®æ”¹ã€‚ä¿®æ”¹å‰è¯·å¤‡ä»½æ–‡ä»¶æˆ–ç«™ç‚¹ã€‚è¿™æ¬¡ä½¿ç”¨<code>Blocksy Child</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3096b8142f9f4072b5df2349c5882aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQeWwj-i-o-akkg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764607673&amp;x-signature=ZBZNTHqE1OglO3zPjM933sJuvkM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åœ¨ç»å…¸ç»“è´¦ï¼ˆshortcodeï¼‰è®¢å•åˆ—è¡¨ä¸­åŠ å…¥å•†å“ç¼©ç•¥å›¾ + WooBlocksé£æ•°é‡å¾½æ ‡</span>
<span class="hljs-title function_ invoke__">add_filter</span>( <span class="hljs-string">'woocommerce_cart_item_name'</span>, <span class="hljs-string">'add_checkout_product_thumbnail'</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span> );
<span class="hljs-title function_ invoke__">add_filter</span>( <span class="hljs-string">'woocommerce_checkout_cart_item_quantity'</span>, function( <span class="hljs-variable">$quantity</span>, <span class="hljs-variable">$cart_item</span>, <span class="hljs-variable">$cart_item_key</span> ) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>; <span class="hljs-comment">// åˆ é™¤é»˜è®¤æ•°é‡</span>
}, <span class="hljs-number">10</span>, <span class="hljs-number">3</span> );
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add_checkout_product_thumbnail</span>(<span class="hljs-params"> <span class="hljs-variable">$product_name</span>, <span class="hljs-variable">$cart_item</span>, <span class="hljs-variable">$cart_item_key</span> </span>) </span>{

    <span class="hljs-comment">// ä»…åœ¨ç»“è´¦é¡µé¢ç”Ÿæ•ˆ</span>
    <span class="hljs-keyword">if</span> ( ! <span class="hljs-title function_ invoke__">is_checkout</span>() ) <span class="hljs-keyword">return</span> <span class="hljs-variable">$product_name</span>;

    <span class="hljs-comment">// è·å–å•†å“</span>
    <span class="hljs-variable">$product</span> = <span class="hljs-variable">$cart_item</span>[<span class="hljs-string">'data'</span>];

    <span class="hljs-comment">// è·å–å•†å“ç¼©ç•¥å›¾ï¼ˆå°å›¾ï¼‰</span>
    <span class="hljs-variable">$thumbnail</span> = <span class="hljs-variable">$product</span>-&gt;<span class="hljs-title function_ invoke__">get_image</span>( <span class="hljs-string">'thumbnail'</span> );

    <span class="hljs-comment">// æ•°é‡å¾½æ ‡ï¼šä½¿ç”¨ Woo Blocks çš„ classï¼ˆè‡ªåŠ¨ç»§æ‰¿è°ƒè‰²æ¿ï¼‰</span>
    <span class="hljs-variable">$qty</span> = <span class="hljs-variable">$cart_item</span>[<span class="hljs-string">'quantity'</span>];
    <span class="hljs-variable">$badge</span> = <span class="hljs-string">'
        &lt;div class="wc-block-components-order-summary-item__quantity"&gt;
            &lt;span&gt;'</span> . <span class="hljs-variable">$qty</span> . <span class="hljs-string">'&lt;/span&gt;
        &lt;/div&gt;
    '</span>;

    <span class="hljs-comment">// å®Œæ•´ç»“æ„</span>
    <span class="hljs-variable">$html</span> = <span class="hljs-string">'
    &lt;div class="checkout-product-row"&gt;
        &lt;div class="checkout-product-thumb"&gt;
            '</span> . <span class="hljs-variable">$thumbnail</span> . <span class="hljs-string">'
            '</span> . <span class="hljs-variable">$badge</span> . <span class="hljs-string">'
        &lt;/div&gt;

        &lt;div class="checkout-product-info"&gt;
            &lt;span class="checkout-product-title"&gt;'</span> . <span class="hljs-variable">$product_name</span> . <span class="hljs-string">'&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    '</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-variable">$html</span>;
}
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17f245510b884b0a8a05dcc3daf63d48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQeWwj-i-o-akkg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764607673&amp;x-signature=ktV5fcHaPkenxIlLXtMS8OGVvXQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ–°æ¶æ„]]></title>    <link>https://juejin.cn/post/7576210031873343529</link>    <guid>https://juejin.cn/post/7576210031873343529</guid>    <pubDate>2025-11-25T02:39:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873343529" data-draft-id="7576158801973395502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ–°æ¶æ„"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-11-25T02:39:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tamarous"/> <meta itemprop="url" content="https://juejin.cn/user/2612095357290845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ–°æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095357290845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tamarous
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:39:33.000Z" title="Tue Nov 25 2025 02:39:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Native é€šä¿¡æœºåˆ¶è¯¦è§£ - æ–°æ¶æ„</h2>
<h3 data-id="heading-1">ä¸€ã€æ¦‚è¿°</h3>
<p>æœ¬ç¯‡æ˜¯ React Native é€šä¿¡æœºåˆ¶è¯¦è§£çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œä¸»è¦ä»‹ç» React Native æ–°æ¶æ„ä¸‹çš„é€šä¿¡æœºåˆ¶ã€‚å¦‚æœæƒ³è¦äº†è§£æ—§æ¶æ„ä¸‹çš„é€šä¿¡æœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒ<a href="https://juejin.cn/post/7576187677839228943" target="_blank" title="https://juejin.cn/post/7576187677839228943">ä¸Šä¸€ç¯‡</a>æ–‡ç« ã€‚</p>
<h3 data-id="heading-2">äºŒã€ç¤ºä¾‹</h3>
<p>æˆ‘ä»¬ä»ç„¶ä»<a href="https://juejin.cn/post/7576197876717699110" target="_blank" title="https://juejin.cn/post/7576197876717699110">å‰æ–‡</a>æœ«å±•ç¤ºçš„æ–°æ¶æ„ä¸‹æ³¨å†Œä¸€ä¸ªåŸç”Ÿæ¨¡å—çš„ç¤ºä¾‹å¼€å§‹ã€‚å¦‚æœä½ æœ‰å…´è¶£è‡ªå·±åŠ¨æ‰‹å®è·µä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒ React Native çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Freactnative.dev%2Fdocs%2Fthe-new-architecture%2Fusing-codegen" target="_blank" title="https://reactnative.dev/docs/the-new-architecture/using-codegen" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼š</p>
<p>1.<strong>å®šä¹‰æ¨¡å—è§„èŒƒï¼ˆTypeScriptï¼‰</strong></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ TypeScript å®šä¹‰æ¨¡å—çš„æ¥å£è§„èŒƒã€‚é€šè¿‡ç»§æ‰¿ <code>TurboModule</code> æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜æ¨¡å—çš„æ–¹æ³•ç­¾åï¼ŒåŒ…æ‹¬å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// CalcModule.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">TurboModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native/Libraries/TurboModule/RCTExport'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TurboModuleRegistry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Spec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TurboModule</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TurboModuleRegistry</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">Spec</span>&gt;(<span class="hljs-string">'CalcModule'</span>);
</code></pre>
<p>æœ€åå°†è¿™ä¸ªæ–‡ä»¶å‘½åä¸º <code>NativeCalcModule.ts</code>ã€‚æ–‡ä»¶åä¸­çš„ <code>Native</code> å‰ç¼€æ˜¯ä¸€ä¸ªçº¦å®šçš„å‘½åæ–¹å¼ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŸç”Ÿæ¨¡å—ï¼Œè¿™æ · Codegen å·¥å…·æ‰èƒ½ç”Ÿæˆå¯¹åº”çš„åŸç”Ÿä»£ç ã€‚</p>
<p>2.<strong>ä½¿ç”¨ Codegen ç”Ÿæˆæ¥å£ä»£ç </strong></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ Codegen å·¥å…·å°† TypeScript å®šä¹‰è½¬æ¢ä¸º Objective-C æ¡¥æ¥ä»£ç ä»¥åŠ JSI ç»‘å®šä»£ç ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">.
â”œâ”€â”€ CalcModule
â”‚Â Â  â”œâ”€â”€ CalcModule-generated.mm
â”‚Â Â  â””â”€â”€ CalcModule.h
â”œâ”€â”€ CalcModuleJSI-generated.cpp
â”œâ”€â”€ CalcModuleJSI.h
â”œâ”€â”€ RCTAppDependencyProvider.h
â”œâ”€â”€ RCTAppDependencyProvider.mm
â”œâ”€â”€ RCTModulesConformingToProtocolsProvider.h
â”œâ”€â”€ RCTModulesConformingToProtocolsProvider.mm
â”œâ”€â”€ RCTThirdPartyComponentsProvider.h
â”œâ”€â”€ RCTThirdPartyComponentsProvider.mm
â”œâ”€â”€ ReactAppDependencyProvider.podspec
â””â”€â”€ ReactCodegen.podspec.json

1 directory, 12 files
</code></pre>
<p>åœ¨ç”Ÿæˆç›®å½•ä¸‹ï¼Œ<code>CalcModule.h</code>å’Œ<code>CalcModule-generated.mm</code>æ˜¯ Objective-C æ¡¥æ¥ä»£ç ï¼Œ<code>CalcModuleJSI.h</code>å’Œ<code>CalcModuleJSI-generated.cpp</code>æ˜¯ JSI ç»‘å®šä»£ç ã€‚</p>
<p>3.<strong>å®ç°åŸç”Ÿæ¨¡å—</strong></p>
<p>æœ€åï¼Œæˆ‘ä»¬å®ç°åŸç”Ÿæ¨¡å—çš„å…·ä½“åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">CalcModule</span> : <span class="hljs-title">NSObject</span> &lt;<span class="hljs-title">NativeCalcSpec</span>&gt;</span>
<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">CalcModule</span></span>
RCT_EXPORT_MODULE()

- (<span class="hljs-type">void</span>)add:(<span class="hljs-type">double</span>)a b:(<span class="hljs-type">double</span>)b resolve:(RCTPromiseResolveBlock)resolve reject:(RCTPromiseRejectBlock)reject
{
  <span class="hljs-built_in">NSNumber</span> *result = @(a + b);
  resolve(result);
}
<span class="hljs-keyword">@end</span>
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€æ¨¡å—æ³¨å†Œæœºåˆ¶</h3>
<p>è®©æˆ‘ä»¬ç»“åˆä¸Šæ–‡ä¸­çš„ç¤ºä¾‹ä»£ç ç”Ÿæˆçš„å†…å®¹ï¼Œæ¥æ·±å…¥äº†è§£æ–°æ¶æ„ä¸‹æ¨¡å—æ³¨å†Œå’Œè°ƒç”¨çš„å®Œæ•´æµç¨‹ã€‚</p>
<h4 data-id="heading-4">3.1 Codegen ç”Ÿæˆä»£ç </h4>
<h5 data-id="heading-5">Objc æ¡¥æ¥å±‚</h5>
<p>Objective-C è¿™ä¸€å±‚é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª <code>NativeCalcSpec</code> åè®®ï¼Œå®ƒç»§æ‰¿è‡ª <code>RCTBridgeModule</code> å’Œ <code>RCTTurboModule</code>ã€‚å¼€å‘è€…éœ€è¦è‡ªå·±æ¥å®ç°è¿™ä¸ªåè®®ï¼Œæ¥æä¾› add æ–¹æ³•çš„å®é™…å®ç°ã€‚å…¶æ¬¡ï¼Œå®šä¹‰äº†ä¸€ä¸ª <code>NativeCalcSpecBase</code> ç±»ï¼Œå®ƒæ˜¯ <code>NativeCalcSpec</code> åè®®çš„åŸºç±»ï¼Œç”¨äºå®ç°ä¸€äº›å…¬å…±çš„æ–¹æ³•ã€‚æœ€åï¼Œå®šä¹‰äº†ä¸€ä¸ª <code>NativeCalcSpecJSI</code> ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ª Objective-C æ¡¥æ¥ç±»ï¼Œç»§æ‰¿è‡ª <code>ObjCTurboModule</code>ï¼Œç”¨äºæ„å»ºæ–¹æ³•æ˜ å°„è¡¨å¹¶å°† C++ è°ƒç”¨è½¬å‘ç»™ Objective-C æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// CalcModule.h</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> CalcModule_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CalcModule_H</span>

<span class="hljs-built_in">NS_ASSUME_NONNULL_BEGIN</span>

<span class="hljs-class"><span class="hljs-keyword">@protocol</span> <span class="hljs-title">NativeCalcSpec</span> &lt;<span class="hljs-title">RCTBridgeModule</span>, <span class="hljs-title">RCTTurboModule</span>&gt;</span>

- (<span class="hljs-type">void</span>)add:(<span class="hljs-type">double</span>)a
          b:(<span class="hljs-type">double</span>)b
    resolve:(RCTPromiseResolveBlock)resolve
     reject:(RCTPromiseRejectBlock)reject;

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">NativeCalcSpecBase</span> : <span class="hljs-title">NSObject</span> </span>{
<span class="hljs-keyword">@protected</span>
facebook::react::EventEmitterCallback _eventEmitterCallback;
}
- (<span class="hljs-type">void</span>)setEventEmitterCallback:(EventEmitterCallbackWrapper *)eventEmitterCallbackWrapper;

<span class="hljs-keyword">@end</span>

namespace facebook::react {
  <span class="hljs-comment">/**
   * ObjC++ class for module 'NativeCalc'
   */</span>
  <span class="hljs-keyword">class</span> JSI_EXPORT NativeCalcSpecJSI : public ObjCTurboModule {
  public:
    NativeCalcSpecJSI(<span class="hljs-keyword">const</span> ObjCTurboModule::InitParams &amp;params);
  };
} <span class="hljs-comment">// namespace facebook::react</span>

<span class="hljs-built_in">NS_ASSUME_NONNULL_END</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">// CalcModule_H</span></span>
</code></pre>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// CalcModule-generated.mm</span>
<span class="hljs-meta">#import <span class="hljs-string">"CalcModule.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">NativeCalcSpecBase</span></span>

- (<span class="hljs-type">void</span>)setEventEmitterCallback:(EventEmitterCallbackWrapper *)eventEmitterCallbackWrapper
{
  _eventEmitterCallback = std::move(eventEmitterCallbackWrapper-&gt;_eventEmitterCallback);
}
<span class="hljs-keyword">@end</span>

namespace facebook::react {
  
  <span class="hljs-keyword">static</span> facebook::jsi::Value __hostFunction_NativeCalcSpecJSI_add(facebook::jsi::Runtime&amp; rt, TurboModule &amp;turboModule, <span class="hljs-keyword">const</span> facebook::jsi::Value* args, size_t count) {
    <span class="hljs-keyword">return</span> static_cast&lt;ObjCTurboModule&amp;&gt;(turboModule).invokeObjCMethod(rt, PromiseKind, <span class="hljs-string">"add"</span>, <span class="hljs-keyword">@selector</span>(add:b:resolve:reject:), args, count);
  }

  NativeCalcSpecJSI::NativeCalcSpecJSI(<span class="hljs-keyword">const</span> ObjCTurboModule::InitParams &amp;params)
    : ObjCTurboModule(params) {
      
        methodMap_[<span class="hljs-string">"add"</span>] = MethodMetadata {<span class="hljs-number">2</span>, __hostFunction_NativeCalcSpecJSI_add};
        
  }
} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<h5 data-id="heading-6">JSI æ¡¥æ¥å±‚</h5>
<p>JSI çš„è¿™ä¸€å±‚ä¸­ä¸»è¦æ˜¯å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼š <code>NativeCalcCxxSpecJSI</code> å’Œ <code>NativeCalcCxxSpec</code>ã€‚å‰è€…æ˜¯ä¸€ä¸ª C++ æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ¨¡å—æ–¹æ³•çš„ C++ æ¥å£ã€‚åè€…æ˜¯ä¸€ä¸ª C++ æ¨¡æ¿ç±»ï¼Œç”¨äºåˆ›å»º Host Objectï¼Œå°† JavaScript è°ƒç”¨è½¬å‘ç»™åŸç”Ÿæ–¹æ³•ï¼Œä»¥åŠå¤„ç†å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// CalcModuleJSI.h</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ReactCommon/TurboModule.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/bridging/Bridging.h&gt;</span></span>

<span class="hljs-keyword">namespace</span> facebook::react {
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">JSI_EXPORT</span> NativeCalcCxxSpecJSI : <span class="hljs-keyword">public</span> TurboModule {
  <span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">NativeCalcCxxSpecJSI</span>(std::shared_ptr&lt;CallInvoker&gt; jsInvoker);

  <span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> jsi::Value <span class="hljs-title">add</span><span class="hljs-params">(jsi::Runtime &amp;rt, <span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> </span>= <span class="hljs-number">0</span>;
  };

  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">JSI_EXPORT</span> NativeCalcCxxSpec : <span class="hljs-keyword">public</span> TurboModule {
  <span class="hljs-keyword">public</span>:
    <span class="hljs-function">jsi::Value <span class="hljs-title">create</span><span class="hljs-params">(jsi::Runtime &amp;rt, <span class="hljs-type">const</span> jsi::PropNameID &amp;propName)</span> <span class="hljs-keyword">override</span> </span>{
      <span class="hljs-keyword">return</span> delegate_.<span class="hljs-built_in">create</span>(rt, propName);
    }

    <span class="hljs-function">std::vector&lt;jsi::PropNameID&gt; <span class="hljs-title">getPropertyNames</span><span class="hljs-params">(jsi::Runtime&amp; runtime)</span> <span class="hljs-keyword">override</span> </span>{
      <span class="hljs-keyword">return</span> delegate_.<span class="hljs-built_in">getPropertyNames</span>(runtime);
    }

    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> std::string_view kModuleName = <span class="hljs-string">"CalcModule"</span>;

  <span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">NativeCalcCxxSpec</span>(std::shared_ptr&lt;CallInvoker&gt; jsInvoker)
      : <span class="hljs-built_in">TurboModule</span>(std::string{NativeCalcCxxSpec::kModuleName}, jsInvoker),
        <span class="hljs-built_in">delegate_</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;T*&gt;(<span class="hljs-keyword">this</span>), jsInvoker) {}


  <span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Delegate</span> : <span class="hljs-keyword">public</span> NativeCalcCxxSpecJSI {
    <span class="hljs-keyword">public</span>:
      <span class="hljs-built_in">Delegate</span>(T *instance, std::shared_ptr&lt;CallInvoker&gt; jsInvoker) :
        <span class="hljs-built_in">NativeCalcCxxSpecJSI</span>(std::<span class="hljs-built_in">move</span>(jsInvoker)), <span class="hljs-built_in">instance_</span>(instance) {

      }

      <span class="hljs-function">jsi::Value <span class="hljs-title">add</span><span class="hljs-params">(jsi::Runtime &amp;rt, <span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-built_in">static_assert</span>(
            bridging::<span class="hljs-built_in">getParameterCount</span>(&amp;T::add) == <span class="hljs-number">3</span>,
            <span class="hljs-string">"Expected add(...) to have 3 parameters"</span>);

        <span class="hljs-keyword">return</span> bridging::<span class="hljs-built_in">callFromJs</span>&lt;jsi::Value&gt;(
            rt, &amp;T::add, jsInvoker_, instance_, std::<span class="hljs-built_in">move</span>(a), std::<span class="hljs-built_in">move</span>(b));
      }

    <span class="hljs-keyword">private</span>:
      <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeCalcCxxSpec</span>;
      T *instance_;
    };

    Delegate delegate_;
  };

} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"CalcModuleJSI.h"</span></span>

<span class="hljs-keyword">namespace</span> facebook::react {

  <span class="hljs-type">static</span> jsi::Value __hostFunction_NativeCalcCxxSpecJSI_add(jsi::Runtime &amp;rt, TurboModule &amp;turboModule, <span class="hljs-type">const</span> jsi::Value* args, <span class="hljs-type">size_t</span> count) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;NativeCalcCxxSpecJSI *&gt;(&amp;turboModule)-&gt;<span class="hljs-built_in">add</span>(
      rt,
      count &lt;= <span class="hljs-number">0</span> ? <span class="hljs-keyword">throw</span> jsi::<span class="hljs-built_in">JSError</span>(rt, <span class="hljs-string">"Expected argument in position 0 to be passed"</span>) : args[<span class="hljs-number">0</span>].<span class="hljs-built_in">asNumber</span>(),
      count &lt;= <span class="hljs-number">1</span> ? <span class="hljs-keyword">throw</span> jsi::<span class="hljs-built_in">JSError</span>(rt, <span class="hljs-string">"Expected argument in position 1 to be passed"</span>) : args[<span class="hljs-number">1</span>].<span class="hljs-built_in">asNumber</span>()
    );
  }

  NativeCalcCxxSpecJSI::<span class="hljs-built_in">NativeCalcCxxSpecJSI</span>(std::shared_ptr&lt;CallInvoker&gt; jsInvoker)
    : <span class="hljs-built_in">TurboModule</span>(<span class="hljs-string">"CalcModule"</span>, jsInvoker) {
    methodMap_[<span class="hljs-string">"add"</span>] = MethodMetadata {<span class="hljs-number">2</span>, __hostFunction_NativeCalcCxxSpecJSI_add};
  }
} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<h4 data-id="heading-7">3.2 åŸç”Ÿæ¨¡å—å®ç°</h4>
<p>å¼€å‘è€…éœ€è¦åˆ›å»ºä¸€ä¸ªéµå¾ª <code>NativeCalcSpec</code> åè®®çš„ç±»ï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">CalcModule</span> : <span class="hljs-title">NSObject</span> &lt;<span class="hljs-title">NativeCalcSpec</span>&gt;</span>
<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">CalcModule</span></span>
RCT_EXPORT_MODULE()

- (<span class="hljs-type">void</span>)add:(<span class="hljs-type">double</span>)a b:(<span class="hljs-type">double</span>)b resolve:(RCTPromiseResolveBlock)resolve reject:(RCTPromiseRejectBlock)reject
{
  <span class="hljs-built_in">NSNumber</span> *result = @(a + b);
  resolve(result);
}
<span class="hljs-keyword">@end</span>
</code></pre>
<p>å¹¶ä¸”ç”¨ <code>RCT_EXPORT_MODULE()</code> å®æ¥å°†è¿™ä¸ªç±»æš´éœ²ç»™ React Nativeã€‚<code>RCT_EXPORT_MODULE()</code>åœ¨ç¼–è¯‘æ—¶ä¼šå±•å¼€æˆï¼š</p>
<pre><code class="hljs language-objc" lang="objc">+ (<span class="hljs-built_in">NSString</span> *)moduleName { <span class="hljs-keyword">return</span> <span class="hljs-string">@"CalcModule"</span>; }
+ (<span class="hljs-type">void</span>)load { RCTRegisterTurboModule(<span class="hljs-keyword">self</span>); }
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹åŒæ—§æ¶æ„ä¸­çš„ <code>RCT_EXPORT_MODULE()</code> å®ç±»ä¼¼ï¼Œä½†ä¹Ÿä¸å®Œå…¨ç›¸åŒã€‚æ—§æ¶æ„ä¸­çš„<code>RCT_EXPORT_MODULE()</code>å®ä¼šåœ¨ç¼–è¯‘æ—¶è°ƒç”¨<code>RCTRegisterModule(class)</code>å°†æ¨¡å—æ³¨å†Œåˆ°<code>RCTModuleRegistry</code>ä¸­ï¼Œè€Œæ–°æ¶æ„ä¸­çš„<code>RCT_EXPORT_MODULE()</code>å®åˆ™ä¼šåœ¨è¿è¡Œæ—¶è°ƒç”¨<code>RCTRegisterTurboModule(class)</code>å°†æ¨¡å—æ³¨å†Œåˆ°<code>TurboModuleRegistry</code>ä¸­ã€‚</p>
<h4 data-id="heading-8">3.3 RCTRegisterTurboModule å®ç°åŸç†</h4>
<p><code>RCTRegisterTurboModule</code> æ˜¯æ–°æ¶æ„ä¸­çš„æ ¸å¿ƒæ³¨å†Œæœºåˆ¶ï¼Œå®ƒä¸»è¦å®Œæˆä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡ï¼š</p>
<p>1.<strong>åˆ›å»ºæ¨¡å—å·¥å‚</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">static</span> std::unordered_map&lt;std::string, TurboModuleFactory&gt; turboModuleFactories;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RCTRegisterTurboModule</span><span class="hljs-params">(Class moduleClass)</span> </span>{
  NSString *moduleName = [moduleClass moduleName];
  turboModuleFactories[moduleName.UTF8String] = [moduleClass](jsi::Runtime &amp;runtime) {
    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">make_shared</span>&lt;NativeCalcSpecJSI&gt;(runtime, moduleClass);
  };
}
</code></pre>
<p>è¿™é‡Œä½¿ç”¨ C++ æ¨¡æ¿æœºåˆ¶åˆ›å»ºäº†ä¸€ä¸ªæ¨¡å—å·¥å‚å‡½æ•°ï¼Œç”¨äºæŒ‰éœ€åˆ›å»ºæ¨¡å—å®ä¾‹ã€‚å·¥å‚å‡½æ•°ä»¥æ¨¡å—åä¸ºé”®ï¼Œå­˜å‚¨åœ¨å…¨å±€çš„ <code>turboModuleFactories</code> æ˜ å°„è¡¨ä¸­ã€‚</p>
<p>2.<strong>ç»´æŠ¤æ¨¡å—å…ƒæ•°æ®</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TurboModuleMetadata</span> {
  std::string name;
  std::unordered_map&lt;std::string, MethodMetadata&gt; methods;
  std::shared_ptr&lt;CallInvoker&gt; jsInvoker;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RCTRegisterTurboModule</span><span class="hljs-params">(Class moduleClass)</span> </span>{
  <span class="hljs-comment">// ... å‰é¢çš„ä»£ç  ...</span>
  
  <span class="hljs-comment">// æ”¶é›†æ¨¡å—çš„æ–¹æ³•ä¿¡æ¯</span>
  <span class="hljs-keyword">auto</span> metadata = std::<span class="hljs-built_in">make_shared</span>&lt;TurboModuleMetadata&gt;();
  metadata-&gt;name = moduleName.UTF8String;
  metadata-&gt;jsInvoker = jsInvoker;
  
  <span class="hljs-comment">// é€šè¿‡è¿è¡Œæ—¶åå°„è·å–æ¨¡å—çš„æ–¹æ³•åˆ—è¡¨</span>
  <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> methodCount;
  Method *methods = <span class="hljs-built_in">class_copyMethodList</span>(moduleClass, &amp;methodCount);
  <span class="hljs-keyword">for</span> (<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; methodCount; i++) {
    Method method = methods[i];
    metadata-&gt;methods[<span class="hljs-built_in">sel_getName</span>(<span class="hljs-built_in">method_getName</span>(method))] = {
      .argumentCount = <span class="hljs-built_in">method_getNumberOfArguments</span>(method) - <span class="hljs-number">2</span>,
      .returnType = <span class="hljs-built_in">method_getReturnType</span>(method)
    };
  }
  <span class="hljs-built_in">free</span>(methods);
  
  <span class="hljs-comment">// å­˜å‚¨å…ƒæ•°æ®</span>
  turboModuleMetadata[moduleName.UTF8String] = metadata;
}
</code></pre>
<p>è¿™éƒ¨åˆ†ä»£ç è´Ÿè´£ç»´æŠ¤æ¨¡å—çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬æ¨¡å—åã€æ–¹æ³•åˆ—è¡¨ã€å‚æ•°ç±»å‹ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åœ¨åç»­çš„æ–¹æ³•è°ƒç”¨ä¸­ç”¨äºå‚æ•°ç±»å‹æ£€æŸ¥å’Œè½¬æ¢ã€‚</p>
<p>3.<strong>JSI ç»‘å®š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RCTRegisterTurboModule</span><span class="hljs-params">(Class moduleClass)</span> </span>{
  <span class="hljs-comment">// ... å‰é¢çš„ä»£ç  ...</span>
  
  <span class="hljs-comment">// åˆ›å»º JSI ç»‘å®š</span>
  jsi::Runtime &amp;runtime = ...; <span class="hljs-comment">// è·å– JSI è¿è¡Œæ—¶</span>
  <span class="hljs-keyword">auto</span> moduleObject = jsi::<span class="hljs-built_in">Object</span>(runtime);
  
  <span class="hljs-comment">// ä¸ºæ¯ä¸ªæ–¹æ³•åˆ›å»º JSI å‡½æ•°</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;method : metadata-&gt;methods) {
    moduleObject.<span class="hljs-built_in">setProperty</span>(
      runtime,
      method.first.<span class="hljs-built_in">c_str</span>(),
      jsi::Function::<span class="hljs-built_in">createFromHostFunction</span>(
        runtime,
        jsi::PropNameID::forAscii(runtime, method.first),
        method.second.argumentCount,
        [metadata, method](jsi::Runtime &amp;rt, <span class="hljs-type">const</span> jsi::Value &amp;thisVal, <span class="hljs-type">const</span> jsi::Value *args, <span class="hljs-type">size_t</span> count) {
          <span class="hljs-comment">// å‚æ•°ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</span>
          <span class="hljs-comment">// è°ƒç”¨åŸç”Ÿæ–¹æ³•</span>
          <span class="hljs-comment">// è¿”å›ç»“æœè½¬æ¢</span>
          <span class="hljs-keyword">return</span> ...; <span class="hljs-comment">// è¿”å› JSI å€¼</span>
        }
      )
    );
  }
  
  <span class="hljs-comment">// å°†æ¨¡å—å¯¹è±¡æ³¨å†Œåˆ° TurboModuleRegistry</span>
  runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">getProperty</span>(runtime, <span class="hljs-string">"__turboModuleProxy"</span>)
    .<span class="hljs-built_in">asObject</span>(runtime)
    .<span class="hljs-built_in">setProperty</span>(runtime, moduleName.UTF8String, moduleObject);
}
</code></pre>
<p>è¿™éƒ¨åˆ†ä»£ç é€šè¿‡ JSI æœºåˆ¶å°†åŸç”Ÿæ¨¡å—æš´éœ²ç»™ JavaScript ç¯å¢ƒã€‚å®ƒä¸ºæ¯ä¸ªåŸç”Ÿæ–¹æ³•åˆ›å»ºå¯¹åº”çš„ JSI å‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿç›´æ¥è®¿é—®åŸç”Ÿä»£ç ï¼Œæ— éœ€é€šè¿‡ Bridge è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šä¸‰ä¸ªæ­¥éª¤ï¼Œ<code>RCTRegisterTurboModule</code> å®Œæˆäº†æ–°æ¶æ„ä¸­åŸç”Ÿæ¨¡å—çš„æ³¨å†Œè¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-9">3.4 å°ç»“</h4>
<p>åœ¨æ–°æ¶æ„ä¸‹ï¼Œå®šä¹‰ä¸€ä¸ªåŸç”Ÿæ¨¡å—éœ€è¦å…ˆåœ¨ JavaScript å±‚å®šä¹‰ä¸€ä¸ª Spec æ–‡ä»¶ï¼Œç„¶åç”¨ Codegen ç”Ÿæˆ JSIã€C++ çš„èƒ¶æ°´ä»£ç ã€‚ä¸‹é¢æ€»ç»“ä¸€ä¸‹è¿™äº›ä¸åŒå±‚æ¬¡ä»£ç çš„ä½œç”¨ï¼š</p>
<h5 data-id="heading-10">JavaScript å±‚</h5>
<p><strong>Spec æ¥å£</strong>ï¼šTypeScript å®šä¹‰çš„æ¨¡å—æ¥å£è§„èŒƒ
<strong>TurboModuleRegistry</strong>ï¼šè´Ÿè´£è·å–å’Œç®¡ç† TurboModule å®ä¾‹</p>
<h5 data-id="heading-11">C++ å±‚</h5>
<p><strong>NativeCalcCxxSpecJSI</strong>ï¼šC++ æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ¨¡å—æ–¹æ³•çš„ C++ æ¥å£
<strong>NativeCalcCxxSpec</strong>ï¼šC++ æ¨¡æ¿ç±»ï¼Œç”¨äºåˆ›å»º Host Object
<strong>TurboModule</strong>ï¼šæ‰€æœ‰ TurboModule çš„åŸºç±»</p>
<h5 data-id="heading-12">ObjC++ å±‚</h5>
<p><strong>NativeCalcSpecJSI</strong>ï¼šObjC++ æ¡¥æ¥ç±»ï¼Œç»§æ‰¿è‡ª ObjCTurboModule
<strong>ObjCTurboModule</strong>ï¼šObjC++ TurboModule çš„åŸºç±»</p>
<h5 data-id="heading-13">Objective-C å±‚</h5>
<p><strong>NativeCalcSpec</strong>ï¼šObjective-C åè®®ï¼Œå®šä¹‰äº†åŸç”Ÿæ¨¡å—éœ€è¦å®ç°çš„æ–¹æ³•
<strong>CalcModule</strong>ï¼šå¼€å‘è€…å®ç°çš„åŸç”Ÿæ¨¡å—ç±»</p>
<h3 data-id="heading-14">å››ã€é€šä¿¡æµç¨‹è¯¦è§£</h3>
<p>è®©æˆ‘ä»¬ç»§ç»­åˆ†æä¸‹ JavaScript å’ŒåŸç”Ÿæ¨¡å—å®ç°é€šä¿¡çš„åŸç†ã€‚</p>
<p>å½“ JavaScript ä»£ç é¦–æ¬¡å¯¼å…¥æ¨¡å—æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CalcModule</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./NativeCalcModule'</span>;
</code></pre>
<p>å®é™…ä¸Šæ˜¯è°ƒç”¨äº† <code>TurboModuleRegistry.get&lt;Spec&gt;('CalcModule')</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>æ£€æŸ¥æ¨¡å—ç¼“å­˜</strong>ï¼šé¦–å…ˆæ£€æŸ¥æ¨¡å—æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡ï¼Œå¦‚æœå·²åŠ è½½åˆ™ç›´æ¥è¿”å›ç¼“å­˜çš„å®ä¾‹ã€‚</p>
</li>
<li>
<p><strong>è·å–åŸç”Ÿæ¨¡å—</strong>ï¼šå¦‚æœæ¨¡å—æœªåŠ è½½ï¼Œåˆ™é€šè¿‡ JSI è°ƒç”¨åŸç”Ÿæ–¹æ³• <code>__turboModuleProxy.getModule('CalcModule')</code>ã€‚</p>
</li>
<li>
<p><strong>åˆ›å»º Host Object</strong>ï¼šåŸç”Ÿå±‚ä¼šè°ƒç”¨ä¹‹å‰æ³¨å†Œçš„æ¨¡å—å·¥å‚å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ª <code>NativeCalcCxxSpec</code> å®ä¾‹ä½œä¸º Host Objectã€‚</p>
</li>
<li>
<p><strong>ç»‘å®šæ–¹æ³•</strong>ï¼šHost Object ä¼šå°†æ‰€æœ‰åœ¨ TypeScript ä¸­å®šä¹‰çš„æ–¹æ³•ç»‘å®šåˆ° JavaScript å¯¹è±¡ä¸Šã€‚</p>
</li>
<li>
<p><strong>ç¼“å­˜æ¨¡å—å®ä¾‹</strong>ï¼šå°†åˆ›å»ºçš„æ¨¡å—å®ä¾‹ç¼“å­˜èµ·æ¥ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>è¿”å› JavaScript å¯¹è±¡</strong>ï¼šæœ€ç»ˆè¿”å›ä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ–¹æ³•å®é™…ä¸Šæ˜¯ä¸åŸç”Ÿæ–¹æ³•ç»‘å®šçš„ JSI å‡½æ•°ã€‚</p>
</li>
</ol>
<p>å½“ JavaScript è°ƒç”¨ <code>CalcModule.add(1, 2)</code> æ—¶ï¼š</p>
<ol>
<li>
<p><strong>JavaScript å¼•æ“æ‰§è¡Œè°ƒç”¨</strong>ï¼šJavaScript å¼•æ“è¯†åˆ«åˆ°è¿™æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ã€‚</p>
</li>
<li>
<p><strong>JSI æ‹¦æˆªè°ƒç”¨</strong>ï¼šç”±äº <code>CalcModule</code> æ˜¯ä¸€ä¸ª Host Objectï¼Œå…¶æ–¹æ³•è°ƒç”¨ä¼šè¢« JSI æ‹¦æˆªã€‚</p>
</li>
<li>
<p><strong>æŸ¥æ‰¾æ–¹æ³•æ˜ å°„</strong>ï¼šJSI æ ¹æ®æ–¹æ³•å <code>add</code> åœ¨ Host Object çš„ <code>methodMap_</code> ä¸­æŸ¥æ‰¾å¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œæ‰¾åˆ° <code>__hostFunction_NativeCalcCxxSpecJSI_add</code>ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œ Host å‡½æ•°</strong>ï¼šè°ƒç”¨ <code>__hostFunction_NativeCalcCxxSpecJSI_add</code> å‡½æ•°ï¼Œä¼ å…¥ JavaScript è¿è¡Œæ—¶ã€æ¨¡å—å®ä¾‹å’Œå‚æ•°æ•°ç»„ã€‚</p>
</li>
<li>
<p><strong>å‚æ•°ç±»å‹è½¬æ¢</strong>ï¼šHost å‡½æ•°ä¼šå°† JavaScript å‚æ•°è½¬æ¢ä¸º C++ ç±»å‹ï¼Œä¾‹å¦‚å°† <code>args[0]</code> å’Œ <code>args[1]</code> è½¬æ¢ä¸º <code>double</code> ç±»å‹ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;NativeCalcCxxSpecJSI *&gt;(&amp;turboModule)-&gt;<span class="hljs-built_in">add</span>(
  rt,
  count &lt;= <span class="hljs-number">0</span> ? <span class="hljs-keyword">throw</span> jsi::<span class="hljs-built_in">JSError</span>(rt, <span class="hljs-string">"Expected argument in position 0 to be passed"</span>) : args[<span class="hljs-number">0</span>].<span class="hljs-built_in">asNumber</span>(),
  count &lt;= <span class="hljs-number">1</span> ? <span class="hljs-keyword">throw</span> jsi::<span class="hljs-built_in">JSError</span>(rt, <span class="hljs-string">"Expected argument in position 1 to be passed"</span>) : args[<span class="hljs-number">1</span>].<span class="hljs-built_in">asNumber</span>()
);
</code></pre>
<ol start="6">
<li>
<p><strong>è°ƒç”¨ C++ æ–¹æ³•</strong>ï¼šè½¬å‘è°ƒç”¨åˆ° <code>NativeCalcCxxSpecJSI::add</code> æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>æ¡¥æ¥åˆ° ObjC++</strong>ï¼šC++ å±‚é€šè¿‡ <code>bridging::callFromJs</code> å°†è°ƒç”¨è½¬å‘åˆ° ObjC++ å±‚çš„ <code>NativeCalcSpecJSI</code>ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Delegate</span> : <span class="hljs-keyword">public</span> NativeCalcCxxSpecJSI {
    <span class="hljs-keyword">public</span>:
      <span class="hljs-function">jsi::Value <span class="hljs-title">add</span><span class="hljs-params">(jsi::Runtime &amp;rt, <span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-built_in">static_assert</span>(
            bridging::<span class="hljs-built_in">getParameterCount</span>(&amp;T::add) == <span class="hljs-number">3</span>,
            <span class="hljs-string">"Expected add(...) to have 3 parameters"</span>);

        <span class="hljs-keyword">return</span> bridging::<span class="hljs-built_in">callFromJs</span>&lt;jsi::Value&gt;(
            rt, &amp;T::add, jsInvoker_, instance_, std::<span class="hljs-built_in">move</span>(a), std::<span class="hljs-built_in">move</span>(b));
      }
};
</code></pre>
<ol start="8">
<li><strong>ObjC++ å±‚å¤„ç†</strong>ï¼š<code>NativeCalcSpecJSI</code> çš„ <code>invokeObjCMethod</code> æ–¹æ³•è´Ÿè´£å°† JSI å‚æ•°è½¬æ¢ä¸º Objective-C ç±»å‹ï¼Œå¹¶åˆ›å»º Promise å¯¹è±¡ã€‚</li>
</ol>
<pre><code class="hljs language-objc" lang="objc">- (jsi::Value)invokeObjCMethod:(jsi::Runtime &amp;)runtime
                   methodKind:(MethodKind)methodKind
                   methodName:(<span class="hljs-keyword">const</span> <span class="hljs-type">char</span> *)methodName
                      method:(SEL)selector
                        args:(<span class="hljs-keyword">const</span> jsi::Value *)args
                        count:(size_t)count {
  <span class="hljs-comment">// åˆ›å»º Promise å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (methodKind == MethodKind::Promise) {
    <span class="hljs-keyword">return</span> createPromise(runtime,
      ^(jsi::Runtime &amp;rt, std::shared_ptr&lt;Promise&gt; promise) {
        <span class="hljs-comment">// åˆ›å»º resolve å’Œ reject å›è°ƒ</span>
        RCTPromiseResolveBlock resolveBlock = ^(<span class="hljs-type">id</span> result) {
          promise-&gt;resolve(rt, convertObjCValueToJSIValue(rt, result));
        };
        RCTPromiseRejectBlock rejectBlock = ^(<span class="hljs-built_in">NSString</span> *code, <span class="hljs-built_in">NSString</span> *message, <span class="hljs-built_in">NSError</span> *error) {
          promise-&gt;reject(rt, [code UTF8String], [message UTF8String], error);
        };
        
        <span class="hljs-comment">// è°ƒç”¨åŸç”Ÿæ–¹æ³•</span>
        [instance selector:args[<span class="hljs-number">0</span>].asNumber()
                        b:args[<span class="hljs-number">1</span>].asNumber()
                  resolve:resolveBlock
                   reject:rejectBlock];
    });
  }
}
</code></pre>
<ol start="9">
<li>
<p><strong>åŸç”Ÿæ–¹æ³•æ‰§è¡Œ</strong>ï¼šåŸç”Ÿæ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œé€šè¿‡ Promise çš„ resolve æˆ– reject å›è°ƒè¿”å›ç»“æœã€‚</p>
</li>
<li>
<p><strong>ç»“æœè¿”å›</strong>ï¼š</p>
</li>
</ol>
<ul>
<li>å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè°ƒç”¨ <code>resolve</code> å›è°ƒï¼Œå°† Objective-C çš„ç»“æœå€¼è½¬æ¢ä¸º JSI å€¼ã€‚</li>
<li>å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œè°ƒç”¨ <code>reject</code> å›è°ƒï¼Œå°†é”™è¯¯ä¿¡æ¯ä¼ é€’ç»™ JavaScriptã€‚</li>
<li>JSI å±‚å°†ç»“æœä¼ é€’ç»™ Promise å¯¹è±¡ï¼Œæœ€ç»ˆè¿”å›ç»™ JavaScript å±‚ã€‚</li>
</ul>
<p>è¿™ç§å¤šå±‚è½¬å‘æœºåˆ¶ä¸ä»…ç¡®ä¿äº† JavaScript å’ŒåŸç”Ÿä»£ç ä¹‹é—´çš„ç±»å‹å®‰å…¨å’Œé«˜æ•ˆé€šä¿¡ï¼Œè¿˜ä¿æŒäº†ä»£ç çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ã€‚å®Œæ•´çš„é€šä¿¡æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant JS as JavaScript
    participant TMR as TurboModuleRegistry
    participant HO as Host Object
    participant JSI as JSI Interface
    participant JSIC as JSI C++ Bindings
    participant OBJC as ObjC++ Bridge
    participant Native as Native Module

    %% æ¨¡å—æ³¨å†Œé˜¶æ®µ
    Note over JS,Native: æ¨¡å—æ³¨å†Œé˜¶æ®µ
    JS-&gt;&gt;JS: å®šä¹‰TypeScriptæ¥å£è§„èŒƒ(Spec)
    Native-&gt;&gt;Native: å®ç°NativeCalcSpecåè®®
    
    %% Codegenç”Ÿæˆä»£ç 
    Note over JSI,Native: Codegenç”Ÿæˆä»£ç 
    JSI-&gt;&gt;JSIC: ç”ŸæˆNativeCalcCxxSpecJSIæŠ½è±¡ç±»
    JSIC-&gt;&gt;JSIC: ç”ŸæˆNativeCalcCxxSpecæ¨¡æ¿ç±»
    OBJC-&gt;&gt;OBJC: ç”ŸæˆNativeCalcSpecJSIç±»
    
    %% è¿è¡Œæ—¶æ³¨å†Œ
    Note over TMR,Native: è¿è¡Œæ—¶æ³¨å†Œ
    Native-&gt;&gt;OBJC: è°ƒç”¨RCTRegisterTurboModuleæ³¨å†Œæ¨¡å—
    OBJC-&gt;&gt;OBJC: åˆ›å»ºNativeCalcSpecJSIå®ä¾‹
    OBJC-&gt;&gt;OBJC: æ„å»ºmethodMap_æ–¹æ³•æ˜ å°„è¡¨
    OBJC-&gt;&gt;JSI: é€šè¿‡JSIæ³¨å†Œæ¨¡å—åˆ°JavaScriptè¿è¡Œæ—¶
    JSI-&gt;&gt;TMR: æ³¨å†Œåˆ°TurboModuleRegistryå…¨å±€å¯¹è±¡
    
    %% JavaScriptè°ƒç”¨é˜¶æ®µ
    Note over JS,Native: JavaScriptè°ƒç”¨é˜¶æ®µ
    JS-&gt;&gt;TMR: TurboModuleRegistry.get&lt;Spec&gt;('CalcModule')
    TMR-&gt;&gt;JSI: æ£€æŸ¥æ¨¡å—æ˜¯å¦å·²æ³¨å†Œ
    JSI-&gt;&gt;JSIC: åˆ›å»ºC++å±‚Host Object
    JSIC-&gt;&gt;HO: é€šè¿‡NativeCalcCxxSpecåˆ›å»ºJavaScriptå¯¹è±¡
    JSIC-&gt;&gt;HO: ç»‘å®šæ–¹æ³•åˆ°JavaScriptå¯¹è±¡
    HO--&gt;&gt;JS: è¿”å›JavaScriptå¯¹è±¡

    %% æ–¹æ³•è°ƒç”¨å’Œç»“æœè¿”å›é˜¶æ®µ
    Note over JS,Native: æ–¹æ³•è°ƒç”¨å’Œç»“æœè¿”å›é˜¶æ®µ
    JS-&gt;&gt;HO: CalcModule.add(a, b)
    HO-&gt;&gt;JSIC: è°ƒç”¨__hostFunction_NativeCalcCxxSpecJSI_add
    JSIC-&gt;&gt;JSIC: å‚æ•°ç±»å‹æ£€æŸ¥å’Œè½¬æ¢(args[0].asNumber())
    JSIC-&gt;&gt;OBJC: é€šè¿‡methodMap_æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•
    OBJC-&gt;&gt;OBJC: è°ƒç”¨NativeCalcSpecJSI.invokeObjCMethod
    OBJC-&gt;&gt;OBJC: åˆ›å»ºPromise(resolve/rejectå›è°ƒ)
    OBJC-&gt;&gt;Native: è°ƒç”¨add:b:resolve:reject:
    Native-&gt;&gt;Native: æ‰§è¡ŒåŸç”Ÿè®¡ç®—é€»è¾‘
    Native--&gt;&gt;OBJC: è°ƒç”¨resolveå›è°ƒè¿”å›ç»“æœ
    OBJC--&gt;&gt;JSIC: å°†ObjCå€¼è½¬æ¢ä¸ºJSIå€¼ç±»å‹
    JSIC--&gt;&gt;HO: å°†ç»“æœä¼ é€’ç»™Promiseå¯¹è±¡
    HO--&gt;&gt;JS: é€šè¿‡Promise resolveè¿”å›ç»“æœ
</code></pre>
<h3 data-id="heading-15">äº”ã€å°ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°è¯¦ç»†åˆ†æï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† React Native æ–°æ¶æ„ä¸‹ JavaScript å’ŒåŸç”Ÿæ¨¡å—ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚ç›¸æ¯”æ—§æ¶æ„ï¼Œæ–°æ¶æ„åœ¨é€šä¿¡æ–¹é¢æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—æ”¹è¿›ï¼š</p>
<ol>
<li>
<p><strong>ç›´æ¥é€šä¿¡</strong>ï¼šé€šè¿‡ JSIï¼ˆJavaScript Interfaceï¼‰å®ç° JavaScript å’ŒåŸç”Ÿä»£ç çš„ç›´æ¥é€šä¿¡ï¼Œæ— éœ€é€šè¿‡ Bridge è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹å®‰å…¨</strong>ï¼šå€ŸåŠ© Codegen å·¥å…·ï¼Œä» TypeScript æ¥å£å®šä¹‰è‡ªåŠ¨ç”ŸæˆåŸç”Ÿä»£ç ï¼Œç¡®ä¿äº† JavaScript å’ŒåŸç”Ÿä»£ç ä¹‹é—´çš„ç±»å‹ä¸€è‡´æ€§ï¼Œå‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šTurboModule ç³»ç»Ÿå…è®¸æŒ‰éœ€åŠ è½½åŸç”Ÿæ¨¡å—ï¼Œå‡å°‘äº†åº”ç”¨å¯åŠ¨æ—¶é—´å’Œå†…å­˜å ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¤šå±‚æ¶æ„</strong>ï¼šæ–°æ¶æ„é‡‡ç”¨äº†å¤šå±‚è®¾è®¡ï¼ˆJavaScriptã€JSIã€C++ã€ObjC++ã€Objective-Cï¼‰ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—]]></title>    <link>https://juejin.cn/post/7576197876717797414</link>    <guid>https://juejin.cn/post/7576197876717797414</guid>    <pubDate>2025-11-25T02:45:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876717797414" data-draft-id="7575102209606303770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-25T02:45:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:45:00.000Z" title="Tue Nov 25 2025 02:45:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¥³æœ‹å‹åšå¹¿å‘Šç­–åˆ’ï¼Œæ¯å¤©è¦ä»æµ·é‡ç½‘ç«™å’Œç´ æä¸­æ‘˜æŠ„æ–‡æ¡ˆã€‚</p>
<p>å¾®ä¿¡æˆ–é£ä¹¦æˆªå›¾éƒ½æœ‰ OCRï¼Œä½†å¥¹æ€»è¦â€œåˆ‡å¾®ä¿¡/é£ä¹¦ â†’ è¯†åˆ« â†’ å¤åˆ¶ â†’ åˆ‡å›æµè§ˆå™¨â€ï¼Œæ¥å›æŠ˜è…¾å¥½éº»çƒ¦ï¼Œç»å¸¸è¢«æ‰“æ–­æ€è·¯ã€‚</p>
<p><strong>ä¸¤ä¸ªæœ€å¸¸è§çš„çƒ¦æ¼</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç¦æ­¢å¤åˆ¶çš„é¡µé¢</strong>ï¼šè®¾è®¡çµæ„Ÿç«™ã€ç´ æç«™ã€æ–‡åº“ç±»ç½‘ç«™ï¼Œæ˜æ˜èƒ½çœ‹åˆ°æ–‡å­—ï¼Œå°±æ˜¯é€‰ä¸äº†ã€å³é”®ä¹Ÿæ²¡ç”¨ï¼Œåªèƒ½æ‰‹æ•²ã€‚</p>
</li>
<li>
<p><strong>å›¾ç‰‡é‡Œçš„æ–‡å­—æ— æ³•å¿«é€Ÿæå–</strong>ï¼šçœ‹åˆ°ä¸€å¼ å›¾ï¼Œå¾—åˆ‡åˆ°å¾®ä¿¡ã€ç‚¹â€œæå–æ–‡å­—â€ã€ç­‰è¯†åˆ«ã€å¤åˆ¶ã€å†åˆ‡å›æ¥ç²˜è´´ã€‚</p>
</li>
</ul>
<p><strong>ä¸€å¼ å›¾ï¼Œå¥½å‡ ä¸ªæ­¥éª¤ï¼Œæ¥å›åˆ‡æ¢ä¸‰æ¬¡ã€‚</strong></p>
<p>æœ‰å¤©æ™šä¸Šå¥¹åœ¨èµ¶æ–¹æ¡ˆï¼Œä¸€è¾¹æ“ä½œä¸€è¾¹å¿µå¨ï¼šâ€œå¤ªéº»çƒ¦äº†ï¼Œæ€è·¯éƒ½æ–­äº†â€¦â€¦â€</p>
<p>æˆ‘è¯´ï¼šâ€œè¦ä¸æˆ‘ç»™ä½ å†™ä¸ªæ’ä»¶ï¼Ÿâ€</p>
<p>äºæ˜¯å‘¨æœ«ä¸¤å¤©ï¼Œåšäº†è¿™ä¸ª <strong>ã€Œå›¾æ–‡è§£é”å™¨ã€</strong>ï¼š</p>
<ol>
<li><strong>ä¸€é”®è§£é™¤ç½‘é¡µé™åˆ¶</strong> â€”â€” ç¦é€‰ä¸­ã€ç¦å³é”®çš„ç½‘ç«™ï¼Œç‚¹ä¸€ä¸‹å°±èƒ½æ­£å¸¸å¤åˆ¶</li>
<li><strong>æµè§ˆå™¨é‡Œç›´æ¥æ‹–æ¡†è¯†åˆ«</strong> â€”â€” ä¸ç”¨åˆ‡å¾®ä¿¡ï¼Œçœ‹åˆ°å“ªé‡Œæ¡†å“ªé‡Œï¼Œå‡ ç§’å‡ºç»“æœ</li>
<li><strong>æ‰€æœ‰æ“ä½œåœ¨ä¾§è¾¹æ å®Œæˆ</strong> â€”â€” ä¸é®æŒ¡é¡µé¢ï¼Œä¸ç”¨æ¥å›åˆ‡çª—å£</li>
</ol>
<p>å‘¨ä¸€å¥¹ç”¨ä¸Šä¹‹åçš„è¯„ä»·ï¼šâ€œç»ˆäºé¡ºæ‰‹äº†ï¼é‚£äº›æ¶å¿ƒçš„ç¦æ­¢å¤åˆ¶ç½‘ç«™ç°åœ¨éšä¾¿å¤åˆ¶ï¼Œå›¾ç‰‡è¯†åˆ«ä¹Ÿä¸ç”¨è·³æ¥è·³å»äº†ã€‚â€</p>
<p>ä¸‹é¢è®²è®²å¼€å‘è¿‡ç¨‹å’ŒæŠ€æœ¯å®ç° ğŸ‘‡</p>
</blockquote>
<h2 data-id="heading-0">æ•ˆæœæ¼”ç¤º: è§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce2ce2f9c5043b690a3184eb6f0d1de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643965&amp;x-signature=mIsibLWFt6%2BL9nKai0rwzfaQO2E%3D" alt="copy-everything.gif" loading="lazy"/></p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<h3 data-id="heading-2">1.  è§£é™¤ç½‘é¡µé™åˆ¶</h3>
<ul>
<li>ä¸€é”®è§£é™¤å¤åˆ¶é™åˆ¶</li>
<li>æ¢å¤å³é”®èœå•</li>
<li>å…è®¸æ–‡æœ¬é€‰ä¸­</li>
<li>æ”¯æŒåŠ¨æ€åŠ è½½çš„ç½‘é¡µå†…å®¹è§£é™¤é™åˆ¶</li>
</ul>
<h3 data-id="heading-3">2. OCR æ–‡å­—è¯†åˆ«ï¼ˆæ–¹å¼ä¸ç‰¹æ€§ï¼‰</h3>






























<table><thead><tr><th>æ–¹å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é¡µé¢æˆªå›¾</strong></td><td>å¿«é€Ÿæˆªå–å½“å‰å¯è§åŒºåŸŸ</td><td>ä¸€é”®è¯†åˆ«ç½‘é¡µå…¨éƒ¨å†…å®¹</td></tr><tr><td><strong>è‡ªé€‰åŒºåŸŸ</strong></td><td>æ‹–æ‹½é€‰æ‹©ä»»æ„åŒºåŸŸ</td><td>åªè¯†åˆ«ä½ é€‰ä¸­çš„ç‰¹å®šåŒºåŸŸ</td></tr><tr><td><strong>ç‚¹å‡»ä¸Šä¼ </strong></td><td>é€‰æ‹©æœ¬åœ°å›¾ç‰‡æ–‡ä»¶</td><td>è¯†åˆ«æœ¬åœ°å›¾ç‰‡ä¸­çš„æ–‡å­—</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>æ‹–å…¥å›¾ç‰‡å³å¯è¯†åˆ«</td><td>æ–¹ä¾¿ä¸Šä¼ å›¾ç‰‡å¹¶è¯†åˆ«æ–‡å­—</td></tr></tbody></table>
<ul>
<li>åŸºäºè…¾è®¯äº‘ OCR APIï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰</li>
<li>å†…ç½®å›¾ç‰‡é¢„è§ˆï¼Œè¯†åˆ«å‰å¯ç¡®è®¤å†…å®¹</li>
<li>è¯†åˆ«ç»“æœä¸€é”®å¤åˆ¶ï¼Œæ”¯æŒåç»­ç²˜è´´ä½¿ç”¨</li>
<li>è¯†åˆ«æµç¨‹ï¼šé€‰æ‹©æ–¹å¼ â†’ é¢„è§ˆ â†’ å¼€å§‹è¯†åˆ« â†’ å¤åˆ¶/ä¸‹è½½</li>
</ul>
<h2 data-id="heading-4">å¿«é€Ÿå¼€å§‹ï¼ˆå®‰è£…ä½¿ç”¨ï¼‰</h2>
<h3 data-id="heading-5">1. è·å–ä»£ç </h3>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fcopy-everything" target="_blank" title="https://github.com/Teernage/copy-everything" ref="nofollow noopener noreferrer">github.com/Teernage/coâ€¦</a> â­ å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿Star</li>
<li><strong>Gitee</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fcopy-everything" target="_blank" title="https://gitee.com/xuzhenxin110/copy-everything" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
<h3 data-id="heading-6">2. å®‰è£…æ‰©å±•ï¼ˆæœ¬åœ°åŠ è½½ï¼‰</h3>
<ol>
<li>æ‰“å¼€ Chromeï¼Œåœ°å€æ è¾“å…¥ chrome://extensions/</li>
<li>å³ä¸Šè§’å¼€å¯â€œå¼€å‘è€…æ¨¡å¼â€</li>
<li>ç‚¹å‡»â€œåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºâ€</li>
<li>é€‰æ‹©æ’ä»¶ç›®å½•</li>
<li>å®‰è£…å®Œæˆ</li>
</ol>
<p><code>å°è´´å£«ï¼šSide Panel ä¾èµ–è¾ƒæ–°ç‰ˆæœ¬ Chromeï¼Œå»ºè®® 114+ã€‚</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a20851ca20744c5fb2660860839141cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643965&amp;x-signature=E8PYWeV2IiJXk%2FSCQl9%2Bktt9ww0%3D" alt="å®‰è£…copy-everything.gif" loading="lazy"/></p>
<h3 data-id="heading-7">3. é¦–æ¬¡ä½¿ç”¨</h3>
<ul>
<li>ç‚¹å‡»æ’ä»¶å›¾æ ‡æ‰“å¼€ä¾§è¾¹æ </li>
<li>ç‚¹å‡»ã€Œä¸€é”®è§£é™¤ã€å³å¯è§£é™¤é¡µé¢å¤åˆ¶é™åˆ¶</li>
<li>ä½¿ç”¨æˆªå›¾åŠŸèƒ½ï¼ˆé¡µé¢æˆªå›¾ / è‡ªé€‰åŒºåŸŸï¼‰æˆ–æœ¬åœ°ä¸Šä¼ ï¼ˆç‚¹å‡»ä¸Šä¼  / æ‹–æ‹½ä¸Šä¼ ï¼‰è¿›è¡Œ OCR è¯†åˆ«</li>
<li>é¦–æ¬¡ä½“éªŒå¯ç›´æ¥ä½¿ç”¨ä»¥ä¸‹è´¦å·ï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰ï¼š
<ul>
<li>SecretIdï¼š AKIDLUQ7aqsjNmwufWFm590d1BxXs0xgBRTH</li>
<li>SecretKeyï¼š c09OVP4aw75oIYZMvFO8j5C5uiIgspIc</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ åä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹ç•Œé¢ï¼š</p>
<p><code>æ³¨ï¼šå¦‚å…è´¹é¢åº¦ç”¨å®Œï¼Œè¯·æ ¹æ®ä¸‹æ–¹æŒ‡å¯¼ç”³è¯·å±äºä½ è‡ªå·±çš„è´¦å·å“¦ã€‚ğŸ‘‡</code></p>
<h4 data-id="heading-8">è…¾è®¯äº‘ OCR å¼€é€šä¸é…ç½®</h4>
<p>æ’ä»¶æ”¯æŒè…¾è®¯äº‘ OCRï¼Œæ¯æœˆæœ‰çº¦ 1000 æ¬¡å…è´¹é¢åº¦ï¼Œè¶³å¤Ÿæ—¥å¸¸ä½¿ç”¨ã€‚é¦–æ¬¡è¯†åˆ«å‰ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å¼€é€šå¹¶é…ç½®ï¼š</p>
<ol>
<li>è¿›å…¥ è…¾è®¯äº‘æ–‡å­—è¯†åˆ«æ§åˆ¶å°<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Focr%2Fv2%2Foverview" target="_blank" title="https://console.cloud.tencent.com/ocr/v2/overview" ref="nofollow noopener noreferrer">console.cloud.tencent.com/ocr/v2/overâ€¦</a> ï¼Œå‹¾é€‰æ¡æ¬¾å¹¶å¼€é€šæœåŠ¡ã€‚</li>
<li>å‰å¾€ API å¯†é’¥ç®¡ç†<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Fcam%2Fcapi" target="_blank" title="https://console.cloud.tencent.com/cam/capi" ref="nofollow noopener noreferrer">console.cloud.tencent.com/cam/capi</a> è·å–è‡ªå·±çš„ SecretId å’Œ SecretKeyã€‚</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ å¹¶ä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«ã€‚</li>
</ol>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>API è´¹ç”¨</strong>ï¼šè…¾è®¯äº‘ OCR æ¯ä¸ªæœˆæœ‰1000ä¸ªè¯·æ±‚çš„å…è´¹é¢åº¦ï¼Œè¶…å‡ºåæŒ‰é‡è®¡è´¹</p>
</li>
<li>
<p><strong>æƒé™è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>activeTab</code>ï¼šè®¿é—®å½“å‰æ ‡ç­¾é¡µ</li>
<li><code>scripting</code>ï¼šæ³¨å…¥è„šæœ¬</li>
<li><code>storage</code>ï¼šä¿å­˜é…ç½®</li>
<li><code>sidePanel</code>ï¼šä¾§è¾¹æ åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>Chrome 114+ ï¼ˆSide Panel API è¦æ±‚ï¼‰</li>
<li>éƒ¨åˆ†ç½‘ç«™å¯èƒ½æœ‰é¢å¤–é˜²æŠ¤</li>
</ul>
</li>
</ol>
<h2 data-id="heading-10">æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-11">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>Manifest V3</strong>ï¼šChrome æ‰©å±•æœ€æ–°è§„èŒƒ</li>
<li><strong>Side Panel API</strong>ï¼šä¾§è¾¹æ ç•Œé¢</li>
<li><strong>Content Scripts</strong>ï¼šé¡µé¢æ³¨å…¥è„šæœ¬</li>
<li><strong>Tencent Cloud OCR</strong>ï¼šè…¾è®¯äº‘æ–‡å­—è¯†åˆ« API</li>
<li><strong>Canvas API</strong>ï¼šå›¾ç‰‡è£å‰ª</li>
</ul>
<h3 data-id="heading-12">æ¶æ„è®¾è®¡</h3>
<pre><code class="hljs language-bash" lang="bash">copy-everything
â”œâ”€â”€ manifest.json         <span class="hljs-comment"># æ’ä»¶é…ç½®</span>
â”œâ”€â”€ icons                 <span class="hljs-comment"># æ’ä»¶å›¾æ ‡</span>
â”œâ”€â”€ background.js         <span class="hljs-comment"># åå°æœåŠ¡</span>
â”œâ”€â”€ content.js            <span class="hljs-comment"># å†…å®¹è„šæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</span>
â”œâ”€â”€ sidepanel.html        <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢</span>
â”œâ”€â”€ sidepanel.js          <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢é€»è¾‘</span>
â”œâ”€â”€ sidepanel.css         <span class="hljs-comment"># ä¾§è¾¹æ æ ·å¼</span>
â””â”€â”€ tencentOCR.js         <span class="hljs-comment"># OCR SDK</span>

</code></pre>
<h2 data-id="heading-13">æ ¸å¿ƒä»£ç è§£æ</h2>
<h3 data-id="heading-14">1. è§£é™¤å¤åˆ¶é™åˆ¶  ï¼ˆäº”å±‚é˜²æŠ¤ï¼‰</h3>
<h4 data-id="heading-15">è¿™æ˜¯æ’ä»¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œé€šè¿‡å¤šå±‚é˜²æŠ¤ç¡®ä¿è§£é™¤é™åˆ¶ï¼š</h4>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b625ffe3f14f719c51acb48cc6483d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643965&amp;x-signature=p2abxHAMVMxNlkgM0%2Feiw4xq4Ig%3D" alt="image.png" width="30%" loading="lazy"/>
<h4 data-id="heading-16">å®ç°åŸç†</h4>
<p>é€šè¿‡<strong>äº”å±‚é˜²æŠ¤</strong>ç¡®ä¿è§£é™¤é™åˆ¶</p>
<h4 data-id="heading-17">ç¬¬ä¸€å±‚ï¼šCSS å¼ºåˆ¶è¦†ç›–</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'style'</span>);
style.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  html, body, * {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    user-select: text !important;
  }
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(style);
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šå¼ºåˆ¶å…è®¸æ–‡æœ¬é€‰ä¸­ï¼Œè¦†ç›–ç½‘ç«™çš„ CSS é™åˆ¶ã€‚</p>
<h4 data-id="heading-18">ç¬¬äºŒå±‚ï¼šäº‹ä»¶æ‹¦æˆªï¼ˆæ•è·é˜¶æ®µï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨æ•è·é˜¶æ®µæ‹¦æˆªæ‰€æœ‰é™åˆ¶äº‹ä»¶</span>
<span class="hljs-keyword">const</span> restrictedEvents = [
  <span class="hljs-string">'copy'</span>, <span class="hljs-string">'cut'</span>, <span class="hljs-string">'paste'</span>, <span class="hljs-string">'contextmenu'</span>, 
  <span class="hljs-string">'selectstart'</span>, <span class="hljs-string">'dragstart'</span>, <span class="hljs-string">'keydown'</span>, <span class="hljs-string">'keyup'</span>, <span class="hljs-string">'keypress'</span>
];

<span class="hljs-keyword">const</span> <span class="hljs-title function_">stopEvent</span> = (<span class="hljs-params">e</span>) =&gt; {
  e.<span class="hljs-title function_">stopPropagation</span>();
  e.<span class="hljs-property">stopImmediatePropagation</span>?.(); <span class="hljs-comment">// é˜»æ­¢å…¶ä»–ç›‘å¬å™¨æ‰§è¡Œ</span>
};

<span class="hljs-comment">// åœ¨ windowã€documentã€documentElementã€body å››ä¸ªå±‚çº§åŒæ—¶ç›‘å¬</span>
[<span class="hljs-variable language_">window</span>, <span class="hljs-variable language_">document</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">target</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (target) {
    restrictedEvents.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventType</span> =&gt;</span> {
      target.<span class="hljs-title function_">addEventListener</span>(eventType, stopEvent, <span class="hljs-literal">true</span>); <span class="hljs-comment">// â† æ•è·é˜¶æ®µ</span>
    });
  }
});
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨<strong>æ•è·é˜¶æ®µ</strong>æ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</li>
<li>ä½¿ç”¨Â <code>stopImmediatePropagation()</code>Â é˜»æ­¢å…¶ä»–ç›‘å¬å™¨</li>
<li>åœ¨å››ä¸ªå±‚çº§ç›‘å¬ï¼ˆwindow â†’ document â†’ html â†’ bodyï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨æ•è·é˜¶æ®µï¼Ÿ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">äº‹ä»¶æµï¼šæ•è·é˜¶æ®µ â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡é˜¶æ®µ 
<span class="hljs-code">        â†“
  æˆ‘ä»¬åœ¨è¿™é‡Œæ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
</span></code></pre>
<h4 data-id="heading-19">ç¬¬ä¸‰å±‚ï¼šç§»é™¤å†…è”äº‹ä»¶å±æ€§</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶å±æ€§ï¼ˆå¦‚ oncopy="return false"ï¼‰</span>
<span class="hljs-keyword">const</span> eventAttrs = [
  <span class="hljs-string">'oncopy'</span>, <span class="hljs-string">'oncut'</span>, <span class="hljs-string">'onpaste'</span>, <span class="hljs-string">'oncontextmenu'</span>,
  <span class="hljs-string">'onselectstart'</span>, <span class="hljs-string">'onkeydown'</span>, <span class="hljs-string">'ondragstart'</span>
];

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(eventAttrs.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-string">`[<span class="hljs-subst">${a}</span>]`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>))
  .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
    eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> el.<span class="hljs-title function_">removeAttribute</span>(attr));
  });
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç§»é™¤ HTML æ ‡ç­¾ä¸Šçš„å†…è”äº‹ä»¶ï¼ˆå¦‚ <code>oncopy="return false"</code>ï¼‰</p>
<h4 data-id="heading-20">ç¬¬å››å±‚ï¼šAPI åŠ«æŒï¼ˆé‡å†™ preventDefaultï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ³¨å…¥åˆ°é¡µé¢ä¸Šä¸‹æ–‡ï¼Œé‡å†™åŸç”Ÿæ–¹æ³•</span>
<span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
script.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  (function() {
    if (window.__preventDefaultDisabled) return;
    window.__preventDefaultDisabled = true;
    
    const blockedEvents = new Set(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(restrictedEvents)}</span>);
    const originalPreventDefault = Event.prototype.preventDefault;
    
    Event.prototype.preventDefault = function() {
      if (blockedEvents.has(this.type)) return; // â† ç¦ç”¨ preventDefault
      return originalPreventDefault.call(this);
    };
  })();
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">appendChild</span>(script);
script.<span class="hljs-title function_">remove</span>();
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ³¨å…¥ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Ÿ</strong></p>
<ul>
<li>Content Script è¿è¡Œåœ¨<strong>éš”ç¦»ç¯å¢ƒ</strong>ï¼ˆIsolated Worldï¼‰</li>
<li>æ— æ³•ç›´æ¥ä¿®æ”¹é¡µé¢çš„Â <code>Event.prototype</code></li>
<li>é€šè¿‡Â <code>&lt;script&gt;</code>Â æ ‡ç­¾æ³¨å…¥åˆ°<strong>é¡µé¢ä¸Šä¸‹æ–‡</strong>ï¼ˆMain Worldï¼‰</li>
</ul>
<h4 data-id="heading-21">ç¬¬äº”å±‚ï¼šåŠ¨æ€å†…å®¹ç›‘å¬</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ </span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
    mutation.<span class="hljs-property">addedNodes</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (node <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Element</span>) {
        <span class="hljs-comment">// ç§»é™¤äº‹ä»¶å±æ€§</span>
        eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> node.<span class="hljs-title function_">removeAttribute</span>(attr));
        <span class="hljs-comment">// å¼ºåˆ¶å…è®¸é€‰ä¸­</span>
        node.<span class="hljs-property">style</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'user-select'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'important'</span>);
      }
    });
  });
});

observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, {
  <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ ï¼ˆå¦‚ React/Vue æ¸²æŸ“çš„å†…å®¹ï¼‰ã€‚</p>
<h3 data-id="heading-22">2. è‡ªé€‰åŒºåŸŸæˆªå›¾</h3>
<h3 data-id="heading-23">ä¸‰æ­¥å®Œæˆæˆªå›¾</h3>
<ol>
<li><strong>æŒ‰ä¸‹æŒ‰é’®</strong>Â â†’ å±å¹•å˜æš—</li>
<li><strong>æ‹–åŠ¨æ¡†</strong>Â â†’ ï¼šæŒ‰ä½é¼ æ ‡æ‹–å‡ºä¸€ä¸ªæ¡†ï¼Œé€‰å‡ºä½ æƒ³è¦çš„åŒºåŸŸ</li>
<li><strong>æ¾å¼€æ‰‹</strong>Â â†’ è‡ªåŠ¨æˆªå–æ¡†å†…å†…å®¹</li>
</ol>
<h4 data-id="heading-24">å®ç°æ­¥éª¤</h4>
<h3 data-id="heading-25">Â è¿™èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-26"><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºé€‰æ¡†å·¥å…·</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºé®ç½©å±‚ï¼ˆå°±åƒç»™å±å¹•ç›–äº†ä¸€å±‚ç£¨ç ‚ç»ç’ƒï¼‰</span>
<span class="hljs-keyword">const</span> overlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
overlay.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
  position: fixed;
  left: 0; top: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.5);  /* åŠé€æ˜é»‘è‰² */
  cursor: crosshair;             /* åå­—å‡†æ˜Ÿ */
  z-index: 999999;
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(overlay);

</code></pre>
<p>å½“ä½ ç‚¹å‡»"è‡ªé€‰åŒºåŸŸ"åï¼Œæ’ä»¶ä¼šï¼š</p>
<ul>
<li>åœ¨å±å¹•ä¸Šç›–ä¸€å±‚åŠé€æ˜é»‘è‰²é®ç½©ï¼ˆè®©ä½ çœ‹æ¸…æ¥šè¦é€‰ä»€ä¹ˆï¼‰</li>
<li>é¼ æ ‡å˜æˆåå­—å‡†æ˜Ÿï¼ˆæç¤ºä½ å¯ä»¥å¼€å§‹æ‹–æ¡†äº†ï¼‰</li>
<li>å‡†å¤‡å¥½ä¸€ä¸ªç»¿è‰²è¾¹æ¡†ï¼ˆç­‰ä½ æ‹–å‡ºæ¥å°±æ˜¾ç¤ºï¼‰</li>
</ul>
<h4 data-id="heading-27"><strong>2. è·Ÿéšä½ çš„é¼ æ ‡ç”»æ¡†ï¼ˆå®æ—¶åé¦ˆï¼‰</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¼ æ ‡æŒ‰ä¸‹ â†’ è®°å½•èµ·ç‚¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseDown</span>(<span class="hljs-params">e</span>) {
  startX = e.<span class="hljs-property">clientX</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ X åæ ‡</span>
  startY = e.<span class="hljs-property">clientY</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ Y åæ ‡</span>
}

<span class="hljs-comment">// é¼ æ ‡ç§»åŠ¨ â†’ å®æ—¶æ›´æ–°æ¡†çš„å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">e</span>) {
  currentX = e.<span class="hljs-property">clientX</span>;
  currentY = e.<span class="hljs-property">clientY</span>;
  
  <span class="hljs-comment">// è®¡ç®—æ¡†çš„ä½ç½®å’Œå¤§å°ï¼ˆæ”¯æŒåå‘æ‹–æ‹½ï¼‰</span>
  <span class="hljs-keyword">const</span> left = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startX, currentX);   <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºå·¦è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> top = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startY, currentY);    <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºä¸Šè¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentX - startX); <span class="hljs-comment">// å®½åº¦ = ç»å¯¹å€¼</span>
  <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentY - startY);<span class="hljs-comment">// é«˜åº¦ = ç»å¯¹å€¼</span>
  
  <span class="hljs-comment">// æ›´æ–°ç»¿è‰²è¾¹æ¡†çš„ä½ç½®</span>
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = left + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = top + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = width + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = height + <span class="hljs-string">'px'</span>;
}

</code></pre>
<p>å½“ä½ æŒ‰ä½é¼ æ ‡æ‹–åŠ¨æ—¶ï¼š</p>
<ul>
<li>è®°å½•ä½ <strong>æŒ‰ä¸‹çš„ä½ç½®</strong>ï¼ˆèµ·ç‚¹ï¼‰</li>
<li>è®°å½•ä½ <strong>å½“å‰çš„ä½ç½®</strong>ï¼ˆç»ˆç‚¹ï¼‰</li>
<li>ç”¨è¿™ä¸¤ä¸ªç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡çš„å·®å€¼ç”»å‡ºä¸€ä¸ªçŸ©å½¢æ¡†</li>
</ul>
<p><strong>æ”¯æŒåå‘æ‹–æ‹½</strong>ï¼šä¸ç®¡ä½ ä»å·¦ä¸Šå¾€å³ä¸‹æ‹–ï¼Œè¿˜æ˜¯ä»å³ä¸‹å¾€å·¦ä¸Šæ‹–ï¼Œéƒ½èƒ½æ­£ç¡®è¯†åˆ«ï¼</p>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">ä½ ä» (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>) æ‹–åˆ° (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

ä½ ä» (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>) æ‹–åˆ° (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)ï¼ˆåå‘ï¼‰
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

</code></pre>
<h4 data-id="heading-28"><strong>3. ç²¾å‡†è£å‰ªï¼ˆåƒå‰ªåˆ€ä¸€æ ·è£å›¾ï¼‰</strong></h4>
<p>å½“ä½ æ¾å¼€é¼ æ ‡åï¼Œæ’ä»¶ä¼šï¼š</p>
<ol>
<li><strong>å…ˆæˆªå–æ•´ä¸ªé¡µé¢</strong>ï¼ˆå°±åƒæ‹äº†ä¸€å¼ å…¨å±ç…§ç‰‡ï¼‰</li>
<li><strong>å†è£å‰ªå‡ºä½ é€‰ä¸­çš„éƒ¨åˆ†</strong>ï¼ˆå°±åƒç”¨å‰ªåˆ€å‰ªå‡ºä½ è¦çš„åŒºåŸŸï¼‰</li>
</ol>
<p><strong>å…³é”®æŠ€æœ¯ï¼šCanvas ç”»å¸ƒè£å‰ª</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼ˆå°±åƒå‡†å¤‡ä¸€å¼ ç™½çº¸ï¼‰</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

<span class="hljs-comment">// 2. è®¾ç½®ç”»å¸ƒå¤§å° = ä½ é€‰ä¸­åŒºåŸŸçš„å¤§å°</span>
canvas.<span class="hljs-property">width</span> = width;
canvas.<span class="hljs-property">height</span> = height;

<span class="hljs-comment">// 3. æŠŠå…¨å±æˆªå›¾çš„"é€‰ä¸­éƒ¨åˆ†"ç”»åˆ°ç”»å¸ƒä¸Š</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,  <span class="hljs-comment">// å…¨å±æˆªå›¾</span>
  left, top,        <span class="hljs-comment">// ä»å“ªé‡Œå¼€å§‹è£å‰ªï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å·¦ä¸Šè§’ï¼‰</span>
  width, height,    <span class="hljs-comment">// è£å‰ªå¤šå¤§ï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å®½é«˜ï¼‰</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,             <span class="hljs-comment">// ç”»åˆ°ç”»å¸ƒçš„å“ªé‡Œï¼ˆä»ç”»å¸ƒå·¦ä¸Šè§’å¼€å§‹ï¼‰</span>
  width, height     <span class="hljs-comment">// ç”»å¤šå¤§ï¼ˆå¡«æ»¡æ•´ä¸ªç”»å¸ƒï¼‰</span>
);

<span class="hljs-comment">// 4. å¯¼å‡ºæˆå›¾ç‰‡</span>
<span class="hljs-keyword">const</span> croppedImage = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);

</code></pre>
<p><strong>ç”¨ç”Ÿæ´»åœºæ™¯ç±»æ¯”</strong>ï¼š</p>
<ul>
<li>å…¨å±æˆªå›¾ = æ‹äº†ä¸€å¼ ç­çº§ç…§</li>
<li>ä½ é€‰ä¸­çš„åŒºåŸŸ = ä½ åªæƒ³è¦ç…§ç‰‡é‡Œçš„æŸä¸ªäºº</li>
<li>Canvas è£å‰ª = ç”¨å‰ªåˆ€æŠŠé‚£ä¸ªäººå‰ªä¸‹æ¥</li>
</ul>
<h4 data-id="heading-29"><strong>æ­¥éª¤ 4ï¼šå››é®ç½©é«˜äº®æ•ˆæœ</strong></h4>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœåªç”¨ä¸€ä¸ªå…¨å±é®ç½©ï¼Œé€‰ä¸­çš„åŒºåŸŸä¹Ÿä¼šè¢«é®ä½ï¼Œç”¨æˆ·çœ‹ä¸æ¸…é€‰äº†ä»€ä¹ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ 4 ä¸ªé®ç½©å—å›´ç»•é€‰åŒºã€‚</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸Šé®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦é®ç½©â”‚   é€‰åŒºï¼ˆé«˜äº®ï¼‰ â”‚  å³é®ç½©   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ä¸‹é®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

</code></pre>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»º 4 ä¸ªé®ç½©å—</span>
<span class="hljs-keyword">const</span> masks = [<span class="hljs-string">'top'</span>, <span class="hljs-string">'right'</span>, <span class="hljs-string">'bottom'</span>, <span class="hljs-string">'left'</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">position</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> mask = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  mask.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    position: fixed;
    background: rgba(0,0,0,0.5);
    pointer-events: none; /* ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ */
  `</span>;
  <span class="hljs-keyword">return</span> mask;
});

<span class="hljs-comment">// æ ¹æ®é€‰åŒºä½ç½®æ›´æ–°é®ç½©å—å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMasks</span>(<span class="hljs-params">left, top, width, height</span>) {
  masks[<span class="hljs-number">0</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:0; width:100vw; height:<span class="hljs-subst">${top}</span>px;`</span>; <span class="hljs-comment">// ä¸Š</span>
  masks[<span class="hljs-number">1</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:<span class="hljs-subst">${left+width}</span>px; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerWidth-left-width}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å³</span>
  masks[<span class="hljs-number">2</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top+height}</span>px; width:100vw; height:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerHeight-top-height}</span>px;`</span>; <span class="hljs-comment">// ä¸‹</span>
  masks[<span class="hljs-number">3</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${left}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å·¦</span>
}

</code></pre>
<h4 data-id="heading-30">é«˜åˆ†å±é€‚é…ï¼ˆè®©å›¾ç‰‡æ›´æ¸…æ™°ï¼‰</h4>
<p><strong>é—®é¢˜</strong>ï¼šRetina å±å¹•ï¼ˆå¦‚ MacBookï¼‰çš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„ 2 å€ï¼Œå¦‚æœä¸å¤„ç†ä¼šå¯¼è‡´æˆªå›¾æ¨¡ç³Šã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¹˜ä»¥è®¾å¤‡åƒç´ æ¯”</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>; <span class="hljs-comment">// Retina å±å¹• = 2ï¼Œæ™®é€šå±å¹• = 1</span>

<span class="hljs-comment">// è®¾ç½®ç”»å¸ƒå¤§å°æ—¶è¦ä¹˜ä»¥ scale</span>
canvas.<span class="hljs-property">width</span> = width * scale;
canvas.<span class="hljs-property">height</span> = height * scale;

<span class="hljs-comment">// è£å‰ªæ—¶ä¹Ÿè¦ä¹˜ä»¥ scale</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,
  left * scale, top * scale,     <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  width * scale, height * scale, <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
  width * scale, height * scale
);

</code></pre>
<h4 data-id="heading-31">å®Œæ•´æµç¨‹</h4>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef6def5a66b46c584a8f038e0b0ff3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643965&amp;x-signature=UZN7X4s4sAyHbZ4sho%2BCW1SwEiQ%3D" alt="image.png" width="30%" loading="lazy"/>
<h2 data-id="heading-32">æ—¶åºå›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant SP as Sidepanel
  participant CT as Content Script
  participant BG as Background

  SP-&gt;&gt;CT: startAreaCapture
  CT-&gt;&gt;CT: createCaptureUI + äº‹ä»¶ç»‘å®š
  CT-&gt;&gt;CT: ç”¨æˆ·æ‹–æ‹½/æ›´æ–°é€‰åŒº
  CT-&gt;&gt;CT: mouseup â†’ captureSelectedArea
  CT-&gt;&gt;BG: captureVisible
  BG--&gt;&gt;CT: DataURL(æ•´é¡µå¯è§åŒºåŸŸ)
  CT-&gt;&gt;CT: Canvas è£å‰ª(è€ƒè™‘ devicePixelRatio)
  CT-&gt;&gt;SP: areaCaptureDone(DataURL)
  SP-&gt;&gt;SP: é¢„è§ˆ + OCR è¯†åˆ«
</code></pre>
<h3 data-id="heading-33">3. æœ¬åœ°ä¸Šä¼ å›¾ç‰‡</h3>
<h4 data-id="heading-34">æ–¹å¼ä¸€ï¼šç‚¹å‡»ä¸Šä¼ </h4>
<p><strong>HTML</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;input type=<span class="hljs-string">"file"</span> id=<span class="hljs-string">"uploadInput"</span> accept=<span class="hljs-string">"image/*"</span> style=<span class="hljs-string">"display:none"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"document.getElementById('uploadInput').click()"</span>&gt;</span>
  ğŸ“ ä¸Šä¼ å›¾ç‰‡
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<p><strong>JavaScript</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'uploadInput'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<h4 data-id="heading-35">æ–¹å¼äºŒï¼šæ‹–æ‹½ä¸Šä¼ </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> dropZone = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dropZone'</span>);

<span class="hljs-comment">// 1. é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>, <span class="hljs-string">'dragleave'</span>, <span class="hljs-string">'drop'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();
  });
});

<span class="hljs-comment">// 2. è§†è§‰åé¦ˆ</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">() =&gt;</span> {
    dropZone.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'drag-over'</span>);
  });
});

<span class="hljs-comment">// 3. å¤„ç†æ–‡ä»¶</span>
dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file.<span class="hljs-property">type</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'image/'</span>)) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<p><strong>CSS</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#dropZone</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-id">#dropZone</span><span class="hljs-selector-class">.drag-over</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4CAF50</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">76</span>, <span class="hljs-number">175</span>, <span class="hljs-number">80</span>, <span class="hljs-number">0.1</span>);
}

</code></pre>
<ul>
<li>ä½œç”¨ï¼šæŠŠå›¾ç‰‡æ‹–è¿›ä¸Šä¼ å›¾ç‰‡åŒºåŸŸ ï¼Œæ‹¦ä½æµè§ˆå™¨é»˜è®¤è¡Œä¸ºï¼Œåœ¨ drop æ—¶è¯»æ–‡ä»¶å¹¶è¯†åˆ«æˆ–é¢„è§ˆã€‚</li>
</ul>
<h3 data-id="heading-36">Â 4.é¡µé¢æˆªå›¾</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> capturePageBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'capturePageBtn'</span>);

capturePageBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({ <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span> });
  
  <span class="hljs-keyword">const</span> dataUrl = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">captureVisibleTab</span>(tab.<span class="hljs-property">windowId</span>, {
    <span class="hljs-attr">format</span>: <span class="hljs-string">'png'</span>
  });
  
  <span class="hljs-keyword">const</span> base64 = dataUrl.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
});
</code></pre>
<p>ç›´æ¥ä½¿ç”¨chromeæ’ä»¶çš„æˆªå›¾åŠŸèƒ½
<strong>æƒé™é…ç½®</strong>ï¼ˆmanifest.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"activeTab"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tabs"</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-37">5. OCR è¯†åˆ«</h3>
<p>ä½¿ç”¨è…¾è®¯äº‘ OCR APIï¼Œé€šè¿‡ TC3-HMAC-SHA256 ç­¾åè°ƒç”¨ <code>GeneralBasicOCR</code> æ¥å£ï¼Œæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ ¸å¿ƒè°ƒç”¨ä»£ç </span>
<span class="hljs-keyword">const</span> ocr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TencentOCR</span>(secretId, secretKey);
<span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> ocr.<span class="hljs-title function_">recognizeText</span>(imageBase64);
</code></pre>
<h2 data-id="heading-38">æ€»ç»“</h2>
<p>è¿™ä¸ªæ’ä»¶è§£å†³äº†æ—¥å¸¸æµè§ˆç½‘é¡µæ—¶çš„ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>è§£é™¤é™åˆ¶</strong>ï¼šè®©ä½ è‡ªç”±å¤åˆ¶ä»»ä½•å†…å®¹</li>
<li><strong>OCR è¯†åˆ«</strong>ï¼šå¿«é€Ÿæå–å›¾ç‰‡æ–‡å­—</li>
</ol>
<h3 data-id="heading-39">æŠ€æœ¯äº®ç‚¹</h3>






























<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>éš¾ç‚¹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>è§£é™¤é™åˆ¶</strong></td><td>ç½‘ç«™å¤šå±‚é˜²æŠ¤</td><td>äº”å±‚æ‹¦æˆª + API åŠ«æŒ</td></tr><tr><td><strong>è‡ªé€‰æˆªå›¾</strong></td><td>é«˜åˆ†å±æ¨¡ç³Š</td><td>devicePixelRatio é€‚é…</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>è§†è§‰åé¦ˆ</td><td>CSS è¿‡æ¸¡åŠ¨ç”»</td></tr><tr><td><strong>OCR è¯†åˆ«</strong></td><td>API ç­¾å</td><td>TC3-HMAC-SHA256</td></tr></tbody></table>
<p>å¸Œæœ›è¿™ä¸ªæ’ä»¶èƒ½å¸®åˆ°å¤§å®¶ï¼å¦‚æœæœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï½</p>
<h2 data-id="heading-40">ğŸ”— ç›¸å…³é“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2F" target="_blank" title="https://developer.chrome.com/docs/extensions/" ref="nofollow noopener noreferrer">Chrome Extension å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdocument%2Fproduct%2F866" target="_blank" title="https://cloud.tencent.com/document/product/866" ref="nofollow noopener noreferrer">è…¾è®¯äº‘ OCR æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FCanvas_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" ref="nofollow noopener noreferrer">Canvas API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FHTML_Drag_and_Drop_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API" ref="nofollow noopener noreferrer">Drag and Drop API</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼]]></title>    <link>https://juejin.cn/post/7576210031873409065</link>    <guid>https://juejin.cn/post/7576210031873409065</guid>    <pubDate>2025-11-25T02:46:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873409065" data-draft-id="7576181242582630463" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-25T02:46:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:46:27.000Z" title="Tue Nov 25 2025 02:46:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ AI ç¼–ç¨‹åˆ†äº«ä¸“æ ã€‚</p>
<p>ä¸€ä¸ªæœˆå‰æˆ‘å‘å¸ƒçš„ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7554225547117576243" target="_blank" title="https://juejin.cn/post/7554225547117576243">ã€è€ä¹¡é¸¡ä¹Ÿå¼€æºï¼Ÿæˆ‘ç”¨ Trae SOLO åšäº†ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºï¼ã€‘</a>ï¼Œè®°å½•äº†ä½œä¸ºä¸€åçˆ±åšé¥­çš„ç¨‹åºå‘˜çš„æˆ‘ï¼Œä½¿ç”¨ TRAE SOLO å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºçš„è¿‡ç¨‹ï¼Œåº”æœ‹å‹ä»¬çš„è¦æ±‚ï¼Œè¶ç€ TRAE SOLO æ­£å¼å‘å¸ƒï¼Œç”¨å®ƒæŠŠè¿™ä¸ªå°ç¨‹åºå¼€æºäº†ã€‚</p>
<h2 data-id="heading-0">TRAE SOLO æ­£å¼ç‰ˆ</h2>
<p>11 æœˆ 12 æ—¥ TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿äº†ï¼Œæ–°å¢ä¸‰æ å¸ƒå±€ã€DiffView å·¥å…·ã€SOLO Coder + Planï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œç­‰åŠŸèƒ½ï¼Œå¹¶ä¸Šçº¿äº†å…è´¹ä½“éªŒæ´»åŠ¨ï¼Œäººäººéƒ½å¯ä»¥ç”¨ SOLO äº†ã€‚</p>
<p>æˆ‘å¯æ˜¯ TRAE SOLO è€ç”¨æˆ·äº†ï¼ŒSOLO æ¨¡å¼ï¼ˆBeta ç‰ˆï¼‰ä¸Šçº¿çš„æ—¶å€™æˆ‘å°±æ‹¿åˆ°äº† SOLO CODEï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒå®Œæˆäº†ã€Œå¤åˆ»ç«¥å¹´å¦å…‹å¤§æˆ˜ã€ã€ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºã€ç­‰å®è·µï¼Œå¹¶ä¸”åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨ TRAE å‚ä¸äº†å¾ˆå¤šä»»åŠ¡çš„å¼€å‘ã€‚å¦‚ä»Šæ­£å¼ç‰ˆå‘å¸ƒï¼Œè‡ªç„¶ä¸èƒ½é”™è¿‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4584916d38934f7e8e12a6e01b47e51d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=vVq5FgUPsn4VnI5I0NGc7JgdeRM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­</h2>
<p>ä¸€åˆ‡éƒ½æºè‡ªäºè€ä¹¡é¸¡å‘å¸ƒçš„ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ï¼Œ<code>CookLikeHOC</code>æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 22k æ˜Ÿæ˜Ÿçš„ GitHub ä»“åº“ï¼Œå®ƒæ”¶å½•äº†ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ä¸­å…¬å¸ƒçš„æ‰€æœ‰èœå“ã€‚</p>
<h2 data-id="heading-2">æŠ€æœ¯æ ˆ</h2>
<p>æˆ‘ä»¬å»¶ç»­ä¸Šç¯‡æ–‡ç« é€‰æ‹©å¥½çš„æŠ€æœ¯æ ˆï¼Œè¿™æ · AI å¯ä»¥åœ¨æˆ‘ä»¬è§„åˆ’å¥½çš„è·¯çº¿ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">å‰ç«¯æŠ€æœ¯æ ˆ</h3>
<p>å› ä¸ºæˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜ï¼Œæ‰€ä»¥å‰ç«¯æŠ€æœ¯æ ˆæ¯”è¾ƒç†Ÿï¼Œç›´æ¥é€‰æ‹©å¸¸ç”¨çš„æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>å°ç¨‹åºçš„å¼€å‘æ¡†æ¶: uni-app</li>
<li>å¼€å‘æ¨¡æ¿é¡¹ç›®: wot-starter åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
<li>ç»„ä»¶åº“: wot-ui åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwot-ui.cn%2F" target="_blank" title="https://wot-ui.cn/" ref="nofollow noopener noreferrer">wot-ui.cn/</a></li>
</ul>
<h3 data-id="heading-4">åç«¯æŠ€æœ¯æ ˆ</h3>
<p>æœåŠ¡ç«¯ä»ç„¶é€‰æ‹© TRAE SOLO é›†æˆçš„ Supabase ä½œä¸ºæˆ‘ä»¬çš„äº‘ç«¯æœåŠ¡ã€‚</p>
<h2 data-id="heading-5">å¼€å§‹SOLO</h2>
<p>æˆ‘ä»¬ä¹‹å‰å·²ç»æ­å»ºå¥½å°ç¨‹åºçš„åŸºç¡€é¡µé¢äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½æ•´ç†å¼€å‘é˜¶æ®µçš„ SQL å’Œè„šæœ¬ä»¥ä¾¿å°†å°ç¨‹åºå¼€æºäº†ã€‚</p>
<h3 data-id="heading-6">ä¼˜åŒ– UI æ ·å¼</h3>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å…¨ç¨‹ä½¿ç”¨ SOLO Coder æ¨¡å¼ï¼Œå› ä¸ºå®ƒæ›´é€‚åˆè§£å†³å¤æ‚ç¼–ç¨‹é—®é¢˜ã€‚</p>
</blockquote>
<p>æ›´æ–°é¦–é¡µåˆ†ç±»å±•ç¤ºï¼Œæ”¯æŒå±•ç¤ºå…¨éƒ¨åˆ†ç±»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8993eceada4be5bc69bd61fd4a5838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=KCnh4WngjknFsCyCjGsYNwckGm4%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥ä½¿ç”¨ DiffView åŠŸèƒ½æŸ¥çœ‹æ›´æ–°å†…å®¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70a474beefac4f31a37350af42a44c16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=hghQ8kBUh6EzbPYjbm%2F2mXfshmM%3D" alt="" loading="lazy"/></p>
<p>æ›´æ–°åæ•ˆæœå¦‚ä¸‹ï¼Œä½¿ç”¨ swiper å±•ç¤ºåˆ†ç±»ï¼Œæ”¯æŒå·¦å³æ»‘åŠ¨åˆ‡æ¢å±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6853318dd74e4aebac5ea01b4beba92f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=Daxv2BCEq1fwo0K%2Bd5YWOBVdw9Q%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä½¿ç”¨ å³æ¢¦AI ç»™ä¸åŒåˆ†ç±»ç”Ÿæˆäº†ä¸ªå¯çˆ±çš„å›¾æ ‡ï¼Œéå¸¸ç®€å•çš„æç¤ºè¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d975f61a10304aecbd61f80e804dd397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=HeB5DBAyY5dVjpvnSAHJuoVdrg4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ä¼˜åŒ–æ•°æ®å–å€¼</h3>
<p>æ‰“å¼€ TRAE SOLO æ¨¡å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°â€œé›†æˆâ€åŠŸèƒ½
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee498491217b4596b3d9d71244a5bd70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=qYVDoagXK6%2B23WGSSDA7sZKN%2BT0%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨â€œé›†æˆâ€åŠŸèƒ½æ—¶ï¼Œæœ€å¥½åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æ‰æœ‰â€œé›†æˆâ€åŠŸèƒ½ï¼Œä¸‹å›¾æ˜¯ SOLO Coder å’Œ SOLO Builder çš„åŒºåˆ«ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43e0f0c378344ab79ae856060ad2178a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=0JXRkM71CHBqcXTXofW0rpTwHI8%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥â€œé›†æˆâ€åŠŸèƒ½ï¼Œé€‰æ‹©è¿æ¥æˆ‘ä»¬çš„ supbaseã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20f438517539486a927246697f802626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=g2hi7juUl5uXrWSIkcPDrvokyr0%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–é¦–é¡µå±•ç¤ºæ¯æ—¥æ¨èèœè°±çš„é€»è¾‘ï¼Œæ¯å¤©éšæœºä»æ¯ä¸ªåˆ†ç±»ä¸­æŸ¥è¯¢ 2 é“èœå±•ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aebc2295121b4eb2ae0d587376fd0ceb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=jFNA9fH37D7gCu8ssWi7Oy9jc4c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88d91a6e88b344a9bdbe37e815604be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=K2bQs23JAbqZhe4ZyBC1Map5tNI%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–èœè°±è¯¦æƒ…é¡µé¢ç›¸å…³æ¨èçš„é€»è¾‘ï¼Œå½“å‰èœè°±çš„ç›¸åŒåˆ†ç±»ä¸­éšæœºæ¨èäº”é“èœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/156b0d6199a64c728c790c05ae19b774~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=cVl3lQ5P7jE241YreSf7Y3VX%2BFM%3D" alt="" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7c2f09b4a0467497e166b77d0e811f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=IJ%2BvRlEHLOzO0atBkCxIUX1PceE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ•´ç†è„šæœ¬å¹¶å¼€æº</h3>
<p>ç”±äºè¿™ä¸ªæ”¹åŠ¨æ¶‰åŠæ–‡ä»¶å¤šï¼Œæ”¹åŠ¨å¤§ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åœ¨ SOLO Coder ä¸‹å¼€å¯ plan æ¨¡å¼ï¼Œè®© TRAE æå‰ç»™å‡ºè®¡åˆ’ï¼Œæˆ‘ä»¬ç¡®è®¤åå†ç”± TRAE è¿›è¡Œå¼€å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5e9076d234c4ae3aa3474c1b7615116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=fItIVn%2Ft3E0J1DTsfLJD6hiCwP4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4ed207aac84810902c68e54f5367be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=wZ8jumbyffhbtmS5hijex2jmqRI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹ SOLO Coder çš„æ–¹æ¡ˆï¼Œæ²¡æœ‰é—®é¢˜å°±è®©å®ƒå¼€å§‹æ‰§è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf0d032e47c4bf3b48e780480306063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=ME90Ei1DZh2zi6X4ehXwQo1WxBo%3D" alt="" loading="lazy"/></p>
<p>SOLO Coder æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ç‚¹å‡»æŸ¥çœ‹å˜æ›´ï¼Œä½¿ç”¨ DiffView åŠŸèƒ½æ£€æŸ¥å˜æ›´æ–‡ä»¶ï¼Œåˆ¤æ–­ SOLO æ‰§è¡Œæ˜¯å¦æ­£ç¡®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48b1c8323794644b92b90f592cbe5dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=e1v2HXRGcYHXSN3axwsiCFRIz1U%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„æ“ä½œéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œå¯ä»¥åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œè®©å®ƒååŠ©æ“ä½œï¼Œå»ºè¡¨ã€æ‰§è¡ŒSQLã€è·å– supbase é…ç½®ï¼Œå®ƒéƒ½å¯ä»¥èƒœä»»ã€‚</p>
<h3 data-id="heading-9">é…ç½®CI/CD</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ uni-mini-ci å®Œæˆæœ¬å°ç¨‹åºçš„ CI/CDæŒç»­é›†æˆï¼Œå°ç¨‹åºä¸€é”®éƒ¨ç½²ä¸å†æ˜¯æ¢¦ï¼Œè¿™é‡Œå°±ä¸è´´å®Œæ•´çš„ GitHub Action ä»£ç äº†ï¼Œå¤§å®¶å¯ä»¥å°ç¨‹åºçš„ GitHub ä»“åº“ä¸­çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/866febb66aa94aa4aa33e9fd1dad0fa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=FcWgjPKkDOfENlC0wuEu0i9%2Bsd0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54cb9ff2f40444e0aa7940faeef6c1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=5g6hl65faesgZQbBOcH9XHXEMGA%3D" alt="" loading="lazy"/></p>
<p>å°† GitHub Action é…ç½®æ–‡ä»¶æ¨é€åˆ° GitHub ä¸Šï¼Œå°±å¯ä»¥æŒ‰ç…§ä¸‹å›¾æ“ä½œè¿›è¡Œæ‰‹åŠ¨å‘ç‰ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ‰“ tag è§¦å‘å‘ç‰ˆï¼Œå‘ç‰ˆæ‰§è¡Œä¼šå°†ä»£ç æ¨é€åˆ°å¾®ä¿¡å°ç¨‹åºåå°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbb678aac5e3427d9329e9997acf4a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=K6gCTPa67bzIiYZpaKRpg8DO%2FUg%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åºåå°çœ‹åˆ°å¯¹åº”çš„å¼€å‘ç‰ˆæœ¬ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea6f6297bea543ec870916263ae1f315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=aVPJeJyI1lFim5L0TbBcLVqcY4Q%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">å®Œæ•´æ•ˆæœ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a25e26f54ce44f65a149ecd4085a419d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=ZdXPWfynmVA6GFWbIF7IzSNDGgo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a76c41632884997a3c38078fd49b09f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=Zl63d77ZbtmIcEIowhXsy4KQX8c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20963583d96947379c373efe8e9dedd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643586&amp;x-signature=kU3OT8sxAk%2FsiTzt9Vu5fkoJJNo%3D" alt="" loading="lazy"/></p>
<p><em><strong>ä¹Ÿå¯ä»¥è‡ªè¡Œæœç´¢ã€Œé±¼å“¥èœè°±ã€è¿›è¡Œä½“éªŒ</strong></em></p>
<h2 data-id="heading-11">TRAE SOLO æ­£å¼ç‰ˆä½“éªŒ</h2>
<p>TRAE SOLO æ­£å¼ç‰ˆæ–°å¢äº† Plan æ¨¡å¼å’Œ SOLO Coder ç­‰ï¼Œå¯¹ç¼–ç¨‹ä½“éªŒçš„æå‡å¾ˆå¤§ï¼Œå‡å°‘äº†å¾ˆå¤š AI ä»‹å…¥åçš„å–„åå·¥ä½œã€‚ä¸è¿‡å¤±å» Claude ä»å¯¹å…¶èƒ½åŠ›é€ æˆäº†ä¸å°çš„å½±å“ï¼ŒæœŸå¾…åç»­å¯ä»¥åœ¨ SOLO æ¨¡å¼é›†æˆå¼ºå¤§çš„ Gemini 3 å’Œä¼˜ç§€çš„å›½äº§æ¨¡å‹ GLM ç­‰ï¼ŒIDE ä¸æ¨¡å‹ 2 è€…æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚</p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æˆ‘ä»¬å‡ ä¹é›¶ä»£ç  ç”¨ Trae SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºä¸ CI/CD æµç¨‹ï¼Œè¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™ä»ç„¶æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨ï¼Œè¿™å…¶å®å’Œå½“ä¸‹å¾ˆæµè¡Œçš„ SDD è§„èŒƒç›¸ç¬¦ï¼Œåœ¨è¿™ç§å°å‹é¡¹ç›®ä¸­ï¼ŒåŸºäºä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ¨¡æ¿å’Œè‰¯å¥½çš„éœ€æ±‚è¾“å…¥å’Œå¼€å‘è®¡åˆ’ï¼Œç”±è§„èŒƒé©±åŠ¨å¼€å‘ï¼Œèƒ½è®©é¡¹ç›®åšçš„æ›´å¥½ã€èµ°å¾—æ›´è¿œã€‚</p>
<p>å¥½äº†ï¼Œå®ç°è¿™ä¸ªå°ç¨‹åºåï¼Œå¤§å®¶ä¹Ÿå¯ä»¥åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­äº†ï¼</p>
<h2 data-id="heading-13">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>å°ç¨‹åºï¼šã€Œé±¼å“¥èœè°±ã€</li>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2FMyCookLikeHOC" target="_blank" title="https://github.com/Moonofweisheng/MyCookLikeHOC" ref="nofollow noopener noreferrer">github.com/Moonofweishâ€¦</a></li>
<li>CookLikeHOCï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">github.com/Gar-b-age/Câ€¦</a></li>
<li>é¡¹ç›®æ¨¡æ¿ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
</ul>
<p><em><strong>æ¬¢è¿è¯„è®ºåŒºæ²Ÿé€šã€è®¨è®ºğŸ‘‡ğŸ‘‡</strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¼ å›¾æ‹†è§£ AI Agent çš„â€œäº”è„å…­è…‘â€ï¼Œä»æ„ŸçŸ¥åˆ°è¿›åŒ–çš„å®Œæ•´é€»è¾‘ï¼]]></title>    <link>https://juejin.cn/post/7576210031873441833</link>    <guid>https://juejin.cn/post/7576210031873441833</guid>    <pubDate>2025-11-25T02:50:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873441833" data-draft-id="7576181242582679615" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¼ å›¾æ‹†è§£ AI Agent çš„â€œäº”è„å…­è…‘â€ï¼Œä»æ„ŸçŸ¥åˆ°è¿›åŒ–çš„å®Œæ•´é€»è¾‘ï¼"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T02:50:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¼ å›¾æ‹†è§£ AI Agent çš„â€œäº”è„å…­è…‘â€ï¼Œä»æ„ŸçŸ¥åˆ°è¿›åŒ–çš„å®Œæ•´é€»è¾‘ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:50:37.000Z" title="Tue Nov 25 2025 02:50:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¦‚æœè¯´å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ˜¯æ‹¥æœ‰å¹¿åšçŸ¥è¯†çš„â€œå¤§è„‘â€ï¼Œé‚£ä¹ˆÂ <strong>AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong> Â å°±æ˜¯ä¸ºå…¶è£…ä¸Šäº†æ‰‹è„šå’Œæ„Ÿå®˜çš„å®Œå…¨ä½“ã€‚å®ƒä¸å†ä»…ä»…æ˜¯å›ç­”é—®é¢˜çš„èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥ã€è§„åˆ’ã€æ‰§è¡Œå¹¶ä»é”™è¯¯ä¸­å­¦ä¹ çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6df5f16dfce4cf0b956376bd3204276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643836&amp;x-signature=5n82syxpi%2BG0qagVASLwkOagabs%3D" alt="" loading="lazy"/></p>
<p>å…¨ç½‘æœ€é€å½»ï¼ä¸€å¼ å›¾æ‹†è§£ AI Agent çš„â€œäº”è„å…­è…‘â€ï¼Œä»æ„ŸçŸ¥åˆ°è¿›åŒ–çš„å®Œæ•´é€»è¾‘åŸºäº Prem Natarajan çš„â€œAI Agents Quick Anatomyâ€æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªæˆç†Ÿ AI Agent çš„ç”Ÿå‘½å‘¨æœŸä¸æ ¸å¿ƒæ„é€ æ‹†è§£ä¸ºäº”ä¸ªå…³é”®ç»´åº¦ï¼š<strong>AGENTï¼ˆæœ¬ä½“ï¼‰ã€SENSEï¼ˆæ„ŸçŸ¥ï¼‰ã€THINKï¼ˆæ€è€ƒï¼‰ã€PLANï¼ˆè§„åˆ’ï¼‰</strong> Â ä»¥åŠÂ <strong>LOOPï¼ˆé—­ç¯ï¼‰</strong> ã€‚</p>
<h3 data-id="heading-0">AGENTï¼šæ™ºèƒ½ä½“çš„æ ¸å¿ƒæ„é€  (The Core Structure)</h3>
<p>ä¸€ä¸ªæ ‡å‡†çš„ AI Agent å¹¶éå‡­ç©ºå­˜åœ¨ï¼Œå®ƒå¿…é¡»å…·å¤‡äº”ä¸ªåŸºç¡€æ”¯æŸ±ï¼Œè¿™æ„æˆäº†å®ƒçš„â€œèº«ä»½â€ï¼š</p>
<ol>
<li><strong>Autonomyï¼ˆè‡ªä¸»æ€§ï¼‰ï¼š</strong> Â è¿™æ˜¯ Agent ä¸ä¼ ç»Ÿè‡ªåŠ¨åŒ–è„šæœ¬æœ€å¤§çš„åŒºåˆ«ã€‚å®ƒä¸éœ€è¦äººç±»æ­¥æ­¥ç´§é€¼çš„æŒ‡ä»¤ï¼Œèƒ½å¤Ÿåœ¨è·å¾—ä¸€ä¸ªé«˜å±‚ç›®æ ‡åï¼Œç‹¬ç«‹è¿ä½œã€‚</li>
<li><strong>Goalsï¼ˆç›®æ ‡å¯¼å‘ï¼‰ï¼š</strong> Â æ‰€æœ‰çš„è¡Œä¸ºéƒ½ç”±æ¸…æ™°çš„ç›®æ ‡é©±åŠ¨ã€‚æ— è®ºæ˜¯â€œå¸®æˆ‘è®¢ä¸€å¼ æœºç¥¨â€è¿˜æ˜¯â€œå†™ä¸€æ®µä»£ç â€ï¼ŒGoal æ˜¯é©±åŠ¨ Agent è¡Œä¸ºçš„åŸåŠ¨åŠ›ã€‚</li>
<li><strong>Environmentï¼ˆç¯å¢ƒï¼‰ï¼š</strong> Â Agent å¹¶éåœ¨çœŸç©ºä¸­è¿è¡Œï¼Œå®ƒå¿…é¡»èº«å¤„æŸä¸ªç³»ç»Ÿä¹‹ä¸­ï¼ˆå¦‚æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨ã€APIç¯å¢ƒæˆ–ç‰©ç†ä¸–ç•Œï¼‰ï¼Œå¹¶ä¸è¯¥ç¯å¢ƒè¿›è¡Œäº¤äº’ã€‚</li>
<li><strong>Navigation/Reasoningï¼ˆå¯¼èˆªä¸æ¨ç†ï¼‰ï¼š</strong> Â è¿™æ˜¯ Agent çš„å†³ç­–èƒ½åŠ›ã€‚å®ƒéœ€è¦å†³å®šâ€œä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆâ€ï¼Œåœ¨å¤æ‚çš„ç¯å¢ƒä¸­æ‰¾åˆ°é€šå¾€ç›®æ ‡çš„è·¯å¾„ã€‚</li>
<li><strong>Toolsï¼ˆå·¥å…·ï¼‰ï¼š</strong> Â ä¸ºäº†æ”¹å˜ç¯å¢ƒæˆ–è·å–ä¿¡æ¯ï¼ŒAgent å¿…é¡»èƒ½å¤Ÿä½¿ç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æœç´¢å¼•æ“ã€è®¡ç®—å™¨ã€æ•°æ®åº“è¿æ¥å™¨ç­‰ï¼‰ã€‚</li>
</ol>
<blockquote>
<p><strong>ç®€è€Œè¨€ä¹‹ï¼š</strong> Â ä¸€ä¸ª Agent å°±æ˜¯ä¸€ä¸ªåœ¨ç‰¹å®š<strong>ç¯å¢ƒ</strong>ä¸­ï¼Œåˆ©ç”¨<strong>å·¥å…·</strong>å’Œ<strong>æ¨ç†</strong>èƒ½åŠ›ï¼Œ<strong>è‡ªä¸»</strong>åœ°å»å®ç°ç‰¹å®š<strong>ç›®æ ‡</strong>çš„ç³»ç»Ÿã€‚</p>
</blockquote>
<h3 data-id="heading-1">SENSEï¼šä»æ•°æ®åˆ°è®¤çŸ¥çš„æ„ŸçŸ¥å±‚ (How Agents Perceive)</h3>
<p>åœ¨é‡‡å–è¡ŒåŠ¨ä¹‹å‰ï¼ŒAgent å¿…é¡»å…ˆâ€œçœ‹æ‡‚â€è¿™ä¸ªä¸–ç•Œã€‚SENSE æ¨¡å—æè¿°äº† Agent å¦‚ä½•å¤„ç†è¾“å…¥ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>Signal Captureï¼ˆä¿¡å·æ•æ‰ï¼‰ï¼š</strong> Â æ¥æ”¶æ¥è‡ªç”¨æˆ·æˆ–ç¯å¢ƒçš„åŸå§‹è¾“å…¥ï¼ˆRaw Inputï¼‰ï¼Œæ¯”å¦‚ä¸€æ®µè¯­éŸ³ã€ä¸€å¼ å›¾ç‰‡æˆ–ä¸€è¡Œæ—¥å¿—ã€‚</li>
<li><strong>Extraction of Contextï¼ˆè¯­å¢ƒæå–ï¼‰ï¼š</strong> Â ç†è§£ç”¨æˆ·çš„æ„å›¾è‡³å…³é‡è¦ã€‚Agent éœ€è¦ä»æ‚ä¹±çš„ä¿¡æ¯ä¸­æå–å‡ºå…³é”®çš„ä¸Šä¸‹æ–‡ç»†èŠ‚ã€‚</li>
<li><strong>Normalization of Dataï¼ˆæ•°æ®æ ‡å‡†åŒ–ï¼‰ï¼š</strong> Â ä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼ŒAgent éœ€è¦æ¸…æ´—æ•°æ®ï¼Œå°†å…¶è½¬åŒ–ä¸ºç»“æ„åŒ–çš„æ ¼å¼ã€‚</li>
<li><strong>Semantic Mappingï¼ˆè¯­ä¹‰æ˜ å°„ï¼‰ï¼š</strong> Â é€è¿‡æ•°æ®çœ‹æœ¬è´¨ï¼Œè§£è¯»æ•°æ®èƒŒåçš„æ·±å±‚å«ä¹‰ï¼Œå°†è¾“å…¥ä¸å·²çŸ¥çš„æ¦‚å¿µè”ç³»èµ·æ¥ã€‚</li>
<li><strong>Environmental Awarenessï¼ˆç¯å¢ƒæ„ŸçŸ¥ï¼‰ï¼š</strong> Â ç†è§£å½“å‰æ‰€å¤„çš„â€œçŠ¶æ€â€ã€‚ä¾‹å¦‚ï¼ŒAgent éœ€è¦çŸ¥é“â€œç°åœ¨æ˜¯æ–‡ä»¶æ‰“å¼€çŠ¶æ€â€è¿˜æ˜¯â€œç½‘ç»œæ–­å¼€çŠ¶æ€â€ã€‚</li>
</ul>
<h3 data-id="heading-2">THINKï¼šè®¤çŸ¥ä¸æ¨ç†å¼•æ“ (The Cognitive Process)</h3>
<p>è¿™æ˜¯ Agent çš„å¤§è„‘çš®å±‚ï¼Œè´Ÿè´£åœ¨è¡ŒåŠ¨å‰è¿›è¡Œæ·±åº¦çš„é€»è¾‘å¤„ç†ï¼š</p>
<ul>
<li><strong>Task Understandingï¼ˆä»»åŠ¡ç†è§£ï¼‰ï¼š</strong> Â å‡†ç¡®æŠ“å–â€œéœ€è¦å®Œæˆä»€ä¹ˆâ€ï¼Œè¿™æ˜¯æ‰€æœ‰åç»­æ­¥éª¤çš„åŸºçŸ³ã€‚</li>
<li><strong>Hypothesis Buildingï¼ˆå‡è®¾æ„å»ºï¼‰ï¼š</strong> Â åœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶ï¼ŒAgent ä¼šç”Ÿæˆå¤šç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæˆ–è·¯å¾„ã€‚</li>
<li><strong>Inference Stepsï¼ˆé€»è¾‘æ¨ç†ï¼‰ï¼š</strong> Â é€šè¿‡é€»è¾‘é“¾æ¡ï¼ˆå¦‚ Chain-of-Thoughtï¼‰æ¥è¯„ä¼°å„ç§é€‰æ‹©çš„åˆç†æ€§ã€‚</li>
<li><strong>Next-Action Planningï¼ˆä¸‹ä¸€æ­¥å†³ç­–ï¼‰ï¼š</strong> Â åœ¨æƒè¡¡åˆ©å¼Šåï¼Œå†³å®šæœ€é«˜æ•ˆçš„å‰è¿›æ–¹å‘ã€‚</li>
<li><strong>Knowledge Retrievalï¼ˆçŸ¥è¯†æ£€ç´¢ï¼‰ï¼š</strong> Â å½“é‡åˆ°çŸ¥è¯†ç›²åŒºæ—¶ï¼ŒAgent ä¼šä¸»åŠ¨ä»å†…éƒ¨æ•°æ®åº“æˆ–å¤–éƒ¨ç½‘ç»œä¸­â€œå›å¿†â€æˆ–â€œæœç´¢â€ç›¸å…³ä¿¡æ¯ï¼ˆRAG æŠ€æœ¯çš„æ ¸å¿ƒï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">PLANï¼šè¡ŒåŠ¨è§„åˆ’æ¡†æ¶ (Planning Framework)</h3>
<p>æ€è€ƒä¹‹åï¼Œä¾¿æ˜¯å…·ä½“çš„æˆ˜æœ¯è§„åˆ’ã€‚å¦‚ä½•å°†å®å¤§çš„ç›®æ ‡è½åœ°ï¼Ÿ</p>
<ol>
<li><strong>Problem Breakdownï¼ˆé—®é¢˜æ‹†è§£ï¼‰ï¼š</strong> Â å°†ä¸€ä¸ªå¤æ‚çš„å¤§ç›®æ ‡ï¼ˆå¦‚â€œå¼€å‘ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆâ€ï¼‰æ‹†è§£ä¸ºæ— æ•°ä¸ªå¯æ‰§è¡Œçš„å°ä»»åŠ¡ï¼ˆå¦‚â€œç”Ÿæˆçª—å£â€ã€â€œç¼–å†™ç§»åŠ¨é€»è¾‘â€ã€â€œè®¾è®¡è®¡åˆ†ç³»ç»Ÿâ€ï¼‰ã€‚</li>
<li><strong>Logical Sequencingï¼ˆé€»è¾‘æ’åºï¼‰ï¼š</strong> Â ç¡®å®šåšäº‹çš„å…ˆåé¡ºåºï¼Œç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®ï¼ˆä¾‹å¦‚ï¼šå¿…é¡»å…ˆæ‰“å¼€æ–‡ä»¶ï¼Œæ‰èƒ½å†™å…¥æ•°æ®ï¼‰ã€‚</li>
<li><strong>Action Mappingï¼ˆåŠ¨ä½œæ˜ å°„ï¼‰ï¼š</strong> Â å°†æ¯ä¸€ä¸ªæ­¥éª¤ä¸å…·ä½“çš„å·¥å…·æˆ–æŠ€èƒ½è¿›è¡ŒåŒ¹é…ï¼ˆä¾‹å¦‚ï¼šæ­¥éª¤æ˜¯â€œæœç´¢å¤©æ°”â€ï¼Œæ˜ å°„çš„å·¥å…·æ˜¯â€œGoogle Search APIâ€ï¼‰ã€‚</li>
<li><strong>Next-Step Executionï¼ˆå³æ—¶æ‰§è¡Œï¼‰ï¼š</strong> Â èšç„¦äºå½“ä¸‹ï¼Œç¨³æ­¥æ¨è¿›ï¼Œæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªåŠ¨ä½œã€‚</li>
</ol>
<h3 data-id="heading-4">LOOPï¼šè‡ªæˆ‘è¿›åŒ–çš„åé¦ˆé—­ç¯ (Feedback Loop)</h3>
<p>çœŸæ­£è®© AI Agent å˜å¾—å¼ºå¤§çš„ï¼Œæ˜¯å®ƒå…·å¤‡â€œåæ€â€å’Œâ€œè¿›åŒ–â€çš„èƒ½åŠ›ã€‚è¿™ä¸ä»…ä»…æ˜¯æ‰§è¡Œï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ¨æ€çš„å­¦ä¹ è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>Learn from Outputï¼ˆä»ç»“æœä¸­å­¦ä¹ ï¼‰ï¼š</strong> Â æ‰§è¡Œå®ŒåŠ¨ä½œåï¼Œåˆ†æç»“æœâ€”â€”æˆåŠŸäº†å—ï¼Ÿæ•ˆæœå¦‚ä½•ï¼Ÿ</li>
<li><strong>Observe Errorsï¼ˆé”™è¯¯è§‚å¯Ÿï¼‰ï¼š</strong> Â å¦‚æœå¤±è´¥äº†ï¼Œè¯†åˆ«æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼ˆæ˜¯å·¥å…·è°ƒç”¨é”™è¯¯ï¼Œè¿˜æ˜¯é€»è¾‘æ¨ç†é”™è¯¯ï¼Ÿï¼‰ã€‚</li>
<li><strong>Optimize Processï¼ˆæµç¨‹ä¼˜åŒ–ï¼‰ï¼š</strong> Â æ ¹æ®é”™è¯¯åé¦ˆï¼Œè°ƒæ•´æ–¹æ³•æˆ–ç­–ç•¥ã€‚</li>
<li><strong>Perform Againï¼ˆå†æ¬¡æ‰§è¡Œï¼‰ï¼š</strong> Â å¸¦ç€æ”¹è¿›åçš„ç­–ç•¥ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œç›´åˆ°ç›®æ ‡è¾¾æˆã€‚</li>
</ul>
<p>è¿™å¼  "AI Agents Quick Anatomy" å›¾è¡¨å®Œç¾åœ°å±•ç¤ºäº†ç°ä»£æ™ºèƒ½ä½“çš„è¿ä½œé€»è¾‘ï¼š</p>
<p>å®ƒå§‹äºÂ <strong>AGENT</strong>Â çš„æ ¸å¿ƒå®šä¹‰ï¼Œé€šè¿‡Â <strong>SENSE</strong>Â æ„ŸçŸ¥ä¸–ç•Œï¼Œåˆ©ç”¨Â <strong>THINK</strong>Â è¿›è¡Œæ·±åº¦æ¨ç†ï¼Œé€šè¿‡Â <strong>PLAN</strong>Â å°†æ€ç»´è½¬åŒ–ä¸ºæ­¥éª¤ï¼Œæœ€ååœ¨Â <strong>LOOP</strong>Â ä¸­ä¸æ–­è¯•é”™ä¸è¿›åŒ–ã€‚</p>
<p>è¿™ç§æ¶æ„è®© AI ä»å•çº¯çš„â€œå†…å®¹ç”Ÿæˆè€…â€è¿›åŒ–ä¸ºâ€œä»»åŠ¡æ‰§è¡Œè€…â€ï¼Œé¢„ç¤ºç€ä¸€ä¸ªèƒ½å¤ŸçœŸæ­£è¾…åŠ©äººç±»è§£å†³å¤æ‚ç°å®é—®é¢˜çš„Â <strong>Agentic AIï¼ˆä»£ç†äººå·¥æ™ºèƒ½ï¼‰</strong> Â æ—¶ä»£çš„åˆ°æ¥ã€‚</p>
<h2 data-id="heading-5">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢„æµ‹ä¹Ÿç”¨ä¸Šå¤§æ¨¡å‹äº†ï¼æ—¶é—´åºåˆ—é¢„æµ‹æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576273949186523178</link>    <guid>https://juejin.cn/post/7576273949186523178</guid>    <pubDate>2025-11-25T02:55:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576273949186523178" data-draft-id="7576181242582335551" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢„æµ‹ä¹Ÿç”¨ä¸Šå¤§æ¨¡å‹äº†ï¼æ—¶é—´åºåˆ—é¢„æµ‹æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-25T02:55:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢„æµ‹ä¹Ÿç”¨ä¸Šå¤§æ¨¡å‹äº†ï¼æ—¶é—´åºåˆ—é¢„æµ‹æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:55:04.000Z" title="Tue Nov 25 2025 02:55:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸€ã€ä»€ä¹ˆæ˜¯æ—¶é—´åºåˆ—é¢„æµ‹ï¼Ÿ</strong></p>
<p>å¯¹äºæ—¶é—´åºåˆ—é¢„æµ‹ä¸å¤ªäº†è§£çš„å°ä¼™ä¼´ï¼Œè¿™é‡Œæœ‰å¿…è¦è®©å¤§å®¶å¿«é€Ÿå…¥ä¸ªé—¨ã€‚</p>
<p>å°±ä»ä¸€é“ç®€å•çš„é¢„æµ‹é¢˜å¼€å§‹å§ï¼Œè¯·å¬é¢˜ï¼šå°æ˜æ˜¯ä¸€ä¸ªå°å­¦ç”Ÿï¼Œæœ€è¿‘3æ¬¡è€ƒè¯•çš„æ•°å­¦æˆç»©ä¾æ¬¡æ˜¯70åˆ†ï¼Œ80åˆ†ï¼Œ90åˆ†ã€‚</p>
<p>è¯·ä½ é¢„æµ‹ä¸€ä¸‹ï¼Œä»–ä¸‹ä¸€æ¬¡æ•°å­¦è€ƒè¯•çš„å¾—åˆ†å¯èƒ½æ˜¯å¤šå°‘ï¼Ÿï¼ˆæ»¡åˆ†100åˆ†ï¼‰</p>
<p>ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼šç»™å¤§å®¶ABCDEäº”ä¸ªé€‰é¡¹ï¼›å½“ç„¶ï¼Œè¯»è€…å¯ä»¥ä¹Ÿç»™å‡ºå…¶ä»–ç­”æ¡ˆï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆã€‚</p>
<p>A: 100åˆ† ï¼ˆç†ç”±ï¼šæœ‰è§„å¾‹ï¼Œæ¯æ¬¡è€ƒè¯•å¤š10åˆ†ï¼‰</p>
<p>B: 95åˆ† ï¼ˆç†ç”±ï¼šè¿›æ­¥è¶‹åŠ¿å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯è¶Šåˆ°åé¢åˆ†æ•°è¶Šéš¾æå‡ï¼‰</p>
<p>C: 90åˆ† ï¼ˆç†ç”±: ä¸Šæ¬¡å°±æ˜¯è¿™ä¸ªåˆ†æ•°ï¼Œè¿›æ­¥å“ªæœ‰é‚£ä¹ˆå®¹æ˜“ï¼‰</p>
<p>D. 80åˆ† (ç†ç”±ï¼šå‡å€¼å›å½’ï¼Œå‰ä¸‰æ¬¡å¹³å‡åˆ†æ˜¯80)</p>
<p>E. 0åˆ† (ç†ç”±ï¼šæˆ‘è§‰å¾—å°æ˜ä¸‹æ¬¡è€ƒè¯•ä¼šå¿˜è®°å†™åå­—ï¼Œæˆ–è€…è€ƒè¯•é¢˜ç›®ç‰¹åˆ«éš¾ä¸€é¢˜éƒ½ä¸ä¼š)</p>
<p>ä¸‹é¢å°±æ¥åˆ†æä¸€ä¸‹ï¼ŒABCDEçš„ä¸åŒå…¶å®å¯¹åº”ç€ä¸åŒçš„å“²å­¦å’Œäººç”Ÿæ€åº¦ã€‚</p>
<p>é€‰A(100åˆ†)çš„äººï¼šæ­å–œä½ ï¼Œä½ è§£é”äº†æ—¶é—´åºåˆ—é¢„æµ‹ç»å…¸ç®—æ³•ä¹‹ä¸€çš„çº¿æ€§æ‹Ÿåˆæ³•ã€‚</p>
<p>ä½ ä¼šè§‰å¾—ï¼šä»»ä½•è¶‹åŠ¿éƒ½ä¼šæŒ‰ç…§çº¿æ€§çš„æ–¹å¼å»¶ç»­ï¼›ä»»ä½•äº‹åŠ¡éƒ½æœ‰è§„å¾‹å¯å¾ªï¼›è¿æ¶¨3ä¸ªæœˆçš„è‚¡ç¥¨ç¬¬4ä¸ªæœˆè¿˜ä¼šæ¶¨ï¼›å·¥èµ„ä¼šæ— é™åœ°æ¶¨ä¸Šå»ï¼›æˆ¿ä»·ä¹Ÿä¼šæ°¸è¿œæ¶¨â€¦â€¦</p>
<p>é€‰B(95åˆ†)çš„äººï¼šæ­å–œä½ ï¼Œä½ è§£é”äº†æ—¶é—´åºåˆ—é¢„æµ‹ç»å…¸ç®—æ³•ä¹‹ä¸€çš„æŒ‡æ•°æ‹Ÿåˆæ³•ã€‚</p>
<p>åœ¨ä½ çš„ä»·å€¼è§‚é‡Œï¼šä»»ä½•è¶‹åŠ¿éƒ½ä¼šæ…¢æ…¢å˜ç¼“ç›´åˆ°å¹³ç¨³ï¼›ä»»ä½•äº‹åŠ¡çš„å‘å±•éƒ½æœ‰ä¸ªé™åº¦ï¼›å·¥èµ„æ¶¨ä¸€æ®µæ—¶é—´å°±æ¶¨ä¸åŠ¨äº†ï¼›ç¨‹åºå‘˜çš„ç¼–ç¨‹æ°´å¹³åœ¨åˆšå…¥èŒæ—¶ä¼šå¿«é€Ÿæé«˜ç„¶åæ…¢æ…¢è¶‹äºç¨³å®šâ€¦â€¦</p>
<p>é€‰C(90åˆ†)çš„äººï¼šæ­å–œä½ ï¼Œä½ è§£é”äº†æ—¶é—´åºåˆ—é¢„æµ‹ç»å…¸ç®—æ³•ä¹‹ä¸€çš„naiveç®—æ³•(ä¸‹ä¸€ä¸ªé¢„æµ‹çš„å€¼å°±ç­‰äºæœ€è¿‘çš„ä¸€ä¸ªå€¼)ï¼Œè¿™ä¸ªç®—æ³•ä¹Ÿæ˜¯ç»å…¸ç®—æ³•é‡Œé¢æœ€å¼ºçš„ç®—æ³•ã€‚</p>
<p>åœ¨ä½ çš„äººç”Ÿå“²å­¦é‡Œï¼šæ˜å¤©å’Œä»Šå¤©å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼›ç®€å•å°±æ˜¯æœ€å¥½çš„ï¼›ä½ ä¿¡å¥‰å¥¥å¡å§†å‰ƒåˆ€å‡†åˆ™ï¼Œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ï¼›</p>
<p>é€‰D(80åˆ†)çš„äººï¼šæ­å–œä½ ï¼Œä½ è§£é”äº†æ—¶é—´åºåˆ—é¢„æµ‹ç»å…¸ç®—æ³•ä¹‹ä¸€çš„å‡å€¼å›å½’ç®—æ³•ã€‚</p>
<p>åœ¨ä½ çš„è®¤çŸ¥é‡Œï¼šä»»ä½•ç–¯ç‹‚ç»ˆå°†å›å½’å¹³é™ï¼›ä»»ä½•ç»æœ›æ€»ä¼šæ…¢æ…¢è¿‡å»ï¼›æˆ¿ä»·ä¼šå›åˆ°å®ƒåº”æœ‰çš„ä½ç½®ï¼Œè‚¡ç¥¨ä¹Ÿä¼šå›å½’åˆ°å®ƒçš„ä»·å€¼æ‰€åœ¨ï¼›ä½ æ˜¯å·´è²ç‰¹å’Œä»·å€¼æŠ•èµ„çš„åšå®æ‹¥è¶¸è€…ï¼›</p>
<p>é€‰E(0åˆ†)çš„äººï¼šè¿™æˆ‘å°±ä¸æ­å–œäº†ï¼Œä½ é€‰äº†ä¸€ä¸ªç†è®ºä¸Šè¯¯å·®æœ€å¤§çš„ç­”æ¡ˆã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿå¹¶éä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>åœ¨ä½ çš„ä»·å€¼ä½“ç³»é‡Œï¼šé»‘å¤©é¹…æ˜¯ä½ çš„ä¿¡æ¡ï¼›è‚¡ç¾éšæ—¶å¯èƒ½å‘ç”Ÿï¼›ä½ å¯èƒ½ä¼šå¯¹å½©ç¥¨å¾ˆæ„Ÿå…´è¶£ï¼›ä½ ä¼šå¯¹å†œåœºä¸»å‡è¯´æ·±ä¿¡ä¸ç–‘(å†œåœºé‡Œçš„ç«é¸¡å‘ç°äº†ä¸€ä¸ªè§„å¾‹ï¼Œæ¯å¤©12ç‚¹éƒ½ä¼šæœ‰äººæ¥é€é£Ÿç‰©ï¼Œç›´åˆ°æ„Ÿæ©èŠ‚é‚£å¤©ï¼Œæ²¡æœ‰ç­‰æ¥é£Ÿç‰©ï¼Œç­‰æ¥çš„å´æ˜¯å± åˆ€)ï¼›ä½ ä¼šæ€€ç€æ„Ÿæ©çš„å¿ƒè¿‡å¥½æ¯ä¸€å¤©ï¼Œå› ä¸ºä½ æ°¸è¿œä¸çŸ¥é“æ˜å¤©å’Œæ„å¤–è°å…ˆæ¥ï¼›</p>
<p>å¥½äº†ï¼Œçœ‹å®Œä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œä¸å¤ªäº†è§£çš„è¯»è€…åº”è¯¥å¯¹æ—¶é—´åºåˆ—é¢„æµ‹æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ã€‚é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯æ ¹æ®å†å²æ•°æ®ç‚¹ï¼Œé¢„æµ‹æœªæ¥çš„æ•°æ®ç‚¹ã€‚</p>
<p><strong>äºŒã€æ—¶é—´åºåˆ—é¢„æµ‹åŸºç¡€</strong></p>
<p>åœ¨è¿›å…¥é¢„æµ‹ä¹‹å‰ï¼Œè¿™æ— ç–‘æ˜¯æ—¶é—´åºåˆ—ä¸­æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦ä»‹ç»ä¸€äº›æ¦‚å¿µä»¥ä¾¿æ›´å¥½åœ°ç†è§£è¿™ä¸ªé¢†åŸŸã€‚</p>
<p><strong>è¶‹åŠ¿</strong></p>
<p>è¶‹åŠ¿æ˜¯æŒ‡æ—¶é—´åºåˆ—æ•°æ®ä¸­é•¿æœŸå˜åŒ–çš„æ–¹å‘æˆ–æ¨¡å¼ã€‚</p>
<p>å®ƒåæ˜ äº†æ•°æ®éšç€æ—¶é—´æ¨ç§»æ˜¯å¦å‘ˆç°å‡ºæŒç»­çš„å¢é•¿ã€ä¸‹é™æˆ–ä¿æŒä¸å˜çš„çŠ¶æ€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå•†ç½‘ç«™çš„æœˆåº¦é”€å”®é¢å¯èƒ½é€å¹´å‘ˆç°ä¸Šå‡è¶‹åŠ¿ï¼Œåæ˜ äº†æ•´ä½“ä¸šåŠ¡çš„æ‰©å±•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78bd476e21e04a338429ea96f05fad60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644103&amp;x-signature=kvvXp7RFZ27bhVA7T4eU%2F%2B3QygQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å­£èŠ‚æ€§</strong></p>
<p>å­£èŠ‚æ€§æŒ‡çš„æ˜¯æ—¶é—´åºåˆ—ä¸­å‘ˆç°å‡ºå›ºå®šå‘¨æœŸå†…é‡å¤çš„æ¨¡å¼æˆ–æ³¢åŠ¨ã€‚</p>
<p>é€šå¸¸ä¸å¹´åº¦å‘¨æœŸæœ‰å…³ï¼Œæ„å‘³ç€æŸäº›ç°è±¡åœ¨ç‰¹å®šæ—¶é—´ç‚¹ï¼ˆå¦‚å­£èŠ‚ã€æœˆä»½ã€å­£åº¦ï¼‰å‘¨æœŸæ€§åœ°å‘ç”Ÿã€‚è¿™ç§æ¨¡å¼æ˜¯å¯ä»¥é¢„æµ‹çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé›¶å”®è¡Œä¸šä¸­çš„å­£èŠ‚æ€§æ•ˆåº”ï¼Œæ¯”å¦‚åœ¨æ˜¥èŠ‚æœŸé—´çš„é”€å”®é¢é€šå¸¸ä¼šä¸Šå‡ï¼Œè€Œåœ¨å…¶ä»–æœˆä»½åˆ™è¾ƒä¸ºå¹³æ·¡ã€‚</p>
<p>å›ºå®šå‘¨æœŸï¼Œå­£èŠ‚æ€§å˜åŒ–å…·æœ‰å›ºå®šçš„å‘¨æœŸï¼Œä¾‹å¦‚ä¸€å¹´ä¸­çš„å››ä¸ªå­£èŠ‚ï¼Œæˆ–è€…ä¸€å‘¨ä¸­çš„ä¸ƒå¤©ã€‚æ•°æ®åœ¨å‘¨æœŸç»“æŸæ—¶ä¼šé‡å¤ï¼Œå½¢æˆç›¸ä¼¼çš„æ¨¡å¼ã€‚</p>
<p>å¯é¢„æµ‹æ€§ï¼Œç”±äºå­£èŠ‚æ€§å˜åŒ–æ˜¯å›ºå®šå‘¨æœŸçš„ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥é¢„æµ‹æœªæ¥æŸäº›æ—¶é—´æ®µçš„å˜åŒ–ã€‚</p>
<p><strong>å‘¨æœŸæ€§</strong></p>
<p>å‘¨æœŸæ€§æ˜¯æŒ‡æ—¶é—´åºåˆ—ä¸­å‘ˆç°å‡ºä¸å›ºå®šå‘¨æœŸçš„æ³¢åŠ¨ã€‚</p>
<p>å‘¨æœŸæ€§çš„å˜åŒ–å¯èƒ½æ¯”å­£èŠ‚æ€§å˜åŒ–æŒç»­æ›´é•¿æ—¶é—´ï¼Œé€šå¸¸ä¸ç»æµæˆ–å•†ä¸šå‘¨æœŸç­‰é•¿å‘¨æœŸå› ç´ æœ‰å…³ã€‚</p>
<p>å‘¨æœŸæ€§æ³¢åŠ¨ä¸åƒå­£èŠ‚æ€§é‚£æ ·å›ºå®šï¼Œå®ƒçš„æŒç»­æ—¶é—´å’Œé¢‘ç‡å¯èƒ½å› å¤–éƒ¨å› ç´ çš„å˜åŒ–è€Œä¸åŒã€‚</p>
<p>ä¾‹å¦‚ï¼Œè‚¡ç¥¨å¸‚åœºä¸­çš„ç‰›å¸‚å’Œç†Šå¸‚å¾ªç¯ï¼Œæˆ–è€…ç»æµä¸­çš„ç¹è£ä¸è¡°é€€å‘¨æœŸã€‚è¿™äº›æ³¢åŠ¨é€šå¸¸æ²¡æœ‰å›ºå®šçš„å‘¨æœŸã€‚</p>
<p>å˜åŒ–å‘¨æœŸï¼Œå‘¨æœŸæ€§å˜åŒ–çš„å‘¨æœŸé•¿åº¦æ˜¯å¯å˜çš„ï¼Œå¯èƒ½æŒç»­æ•°å¹´ã€‚</p>
<p>ä¸å¤–éƒ¨å› ç´ ç›¸å…³ï¼Œå‘¨æœŸæ€§æ³¢åŠ¨é€šå¸¸ä¸ç»æµæˆ–å…¶ä»–å®è§‚å› ç´ æœ‰å…³ï¼Œæ¯”å¦‚ç»æµè¡°é€€ã€ç¹è£å‘¨æœŸç­‰ã€‚</p>
<p><strong>å™ªå£°</strong></p>
<p>å™ªå£°æ˜¯æŒ‡æ—¶é—´åºåˆ—æ•°æ®ä¸­çš„éšæœºæ³¢åŠ¨æˆ–è¯¯å·®ï¼Œå®ƒä¸å±äºè¶‹åŠ¿ã€å­£èŠ‚æ€§æˆ–å‘¨æœŸæ€§æˆåˆ†ï¼Œé€šå¸¸æ˜¯ä¸å¯é¢„æµ‹çš„ã€‚</p>
<p>å™ªå£°æ˜¯æ•°æ®ä¸­çš„éšæœºæ‰°åŠ¨ï¼Œå¯èƒ½æ¥è‡ªæµ‹é‡è¯¯å·®ã€æ•°æ®é‡‡é›†çš„ä¸å‡†ç¡®æ€§æˆ–ç³»ç»Ÿå†…éƒ¨çš„éšæœºå› ç´ ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªåŸå¸‚æ¯æ—¥æ°”æ¸©è®°å½•ä¸­çš„å¾®å°æ³¢åŠ¨å¯èƒ½å°±æ˜¯å™ªå£°ï¼Œé€šå¸¸æ˜¯ç”±äºæµ‹é‡è¯¯å·®æˆ–å¤§æ°”ä¸­ä¸å¯é¢„æµ‹çš„å› ç´ å¼•èµ·çš„ã€‚</p>
<p>éšæœºæ€§ï¼Œå™ªå£°æ²¡æœ‰ç‰¹å®šçš„æ¨¡å¼æˆ–è§„å¾‹ï¼Œé€šå¸¸æ˜¯ä¸å¯é¢„æµ‹çš„ã€‚</p>
<p>ä¸å¯é¿å…æ€§ï¼Œåœ¨å®é™…æ—¶é—´åºåˆ—ä¸­ï¼Œå™ªå£°ä¸å¯é¿å…ï¼Œä½†å¯ä»¥é€šè¿‡å¹³æ»‘ã€å»å™ªç­‰æŠ€æœ¯è¿›è¡Œå¤„ç†ã€‚</p>
<p>åœ¨æ—¶é—´åºåˆ—åˆ†æä¸­ï¼Œé€šå¸¸å°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºè¶‹åŠ¿ã€å­£èŠ‚æ€§ã€å‘¨æœŸæ€§å’Œå™ªå£°è¿™å››ä¸ªéƒ¨åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86453e14d40e479c87d03bcc9210c024~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644103&amp;x-signature=v%2BCbzbYTFxIYtmMNXkJ3NqAhuaI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ã€11 ç§ä¸åŒçš„ç»å…¸æ—¶é—´åºåˆ—é¢„æµ‹æ–¹æ³•</strong></p>
<p><strong>1.è‡ªå›å½’ ï¼ˆARï¼‰</strong></p>
<p>è‡ªå›å½’ ï¼ˆARï¼‰ æ–¹æ³•ä½¿ç”¨å…ˆå‰è§‚æµ‹å€¼çš„çº¿æ€§ç»„åˆæ¥é¢„æµ‹åºåˆ—ä¸­çš„åç»­å€¼ã€‚</p>
<p>æ¨¡å‹çš„ç¬¦å·æ¶‰åŠå°†æ¨¡å‹ p çš„é¡ºåºæŒ‡å®šä¸º AR å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ ARï¼ˆpï¼‰ã€‚ä¾‹å¦‚ï¼ŒARï¼ˆ1ï¼‰ æ˜¯ä¸€ä¸ªä¸€é˜¶è‡ªå›å½’æ¨¡å‹ã€‚</p>
<p>è¯¥æ–¹æ³•æœ€é€‚åˆç¼ºä¹è¶‹åŠ¿å’Œå­£èŠ‚æ€§åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>2.ç§»åŠ¨å¹³å‡çº¿ ï¼ˆMAï¼‰</strong></p>
<p>ç§»åŠ¨å¹³å‡ ï¼ˆMAï¼‰ æ–¹æ³•æ¨¡å‹å°†åºåˆ—ä¸­çš„ä¸‹ä¸€æ­¥é¢„æµ‹ä¸ºå…ˆå‰æ—¶é—´æ­¥é•¿ä¸­å¹³å‡è¿‡ç¨‹æ®‹ä½™è¯¯å·®çš„çº¿æ€§å‡½æ•°ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç§»åŠ¨å¹³å‡çº¿æ¨¡å‹ä¸åŒäºè®¡ç®—æ—¶é—´åºåˆ—çš„ç§»åŠ¨å¹³å‡çº¿ã€‚</p>
<p>æ¨¡å‹çš„ç¬¦å·æ¶‰åŠå°†æ¨¡å‹ q çš„é¡ºåºæŒ‡å®šä¸º MA å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ MAï¼ˆqï¼‰ã€‚ä¾‹å¦‚ï¼ŒMAï¼ˆ1ï¼‰ æ˜¯ä¸€ä¸ªä¸€é˜¶ç§»åŠ¨å¹³å‡æ¨¡å‹ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ²¡æœ‰è¶‹åŠ¿å’Œå­£èŠ‚åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ARIMA ç±»æ¥åˆ›å»º MA æ¨¡å‹å¹¶è®¾ç½®é›¶é˜¶ AR æ¨¡å‹ã€‚æˆ‘ä»¬å¿…é¡»åœ¨ order å‚æ•°ä¸­æŒ‡å®š MA æ¨¡å‹çš„é¡ºåºã€‚</p>
<p><strong>3.è‡ªå›å½’ç§»åŠ¨å¹³å‡çº¿ ï¼ˆARMAï¼‰</strong></p>
<p>è‡ªå›å½’ç§»åŠ¨å¹³å‡ ï¼ˆARMAï¼‰ æ–¹æ³•æ¨¡å‹åŸºäºè¿‡å»è§‚æµ‹å€¼å’Œè¿‡å»æ®‹å·®çš„çº¿æ€§ç»„åˆæ¥é¢„æµ‹åºåˆ—ä¸­çš„ä¸‹ä¸€æ­¥ã€‚</p>
<p>è¯¥æ–¹æ³•ç»“åˆäº†è‡ªå›å½’ ï¼ˆARï¼‰ å’Œç§»åŠ¨å¹³å‡ ï¼ˆMAï¼‰ æ¨¡å‹ã€‚</p>
<p>ä¸ºäº†è¡¨ç¤ºæ¨¡å‹ï¼Œç¬¦å·æ¶‰åŠå°† ARï¼ˆpï¼‰ å’Œ MAï¼ˆqï¼‰ æ¨¡å‹çš„é¡ºåºæŒ‡å®šä¸º ARMA å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ ARMAï¼ˆpï¼Œ qï¼‰ã€‚ARIMA æ¨¡å‹å¯ç”¨äºå¼€å‘ AR æˆ– MA æ¨¡å‹ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ²¡æœ‰è¶‹åŠ¿å’Œå­£èŠ‚åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>4.è‡ªå›å½’ç»¼åˆç§»åŠ¨å¹³å‡çº¿ ï¼ˆARIMAï¼‰</strong></p>
<p>è‡ªå›å½’ç»¼åˆç§»åŠ¨å¹³å‡ ï¼ˆARIMAï¼‰ æ–¹æ³•æ¨¡å‹å°†åºåˆ—ä¸­çš„ä¸‹ä¸€æ­¥é¢„æµ‹ä¸ºå…ˆå‰æ—¶é—´æ­¥é•¿çš„å·®åˆ†è§‚æµ‹å€¼å’Œæ®‹å·®è¯¯å·®çš„çº¿æ€§å‡½æ•°ã€‚</p>
<p>è¯¥æ–¹æ³•é›†æˆäº†è‡ªå›å½’ ï¼ˆARï¼‰ å’Œç§»åŠ¨å¹³å‡ ï¼ˆMAï¼‰ æ¨¡å‹çš„åŸç†ä»¥åŠåºåˆ—çš„å·®åˆ†é¢„å¤„ç†æ­¥éª¤ï¼Œä½¿åºåˆ—é™æ­¢ï¼Œç§°ä¸ºç§¯åˆ† ï¼ˆIï¼‰ã€‚</p>
<p>æ¨¡å‹çš„ç¬¦å·æ¶‰åŠå°† ARï¼ˆpï¼‰ã€Iï¼ˆdï¼‰ å’Œ MAï¼ˆqï¼‰ æ¨¡å‹çš„é¡ºåºæŒ‡å®šä¸º ARIMA å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ ARIMAï¼ˆpï¼Œ dï¼Œ qï¼‰ã€‚ARIMA æ¨¡å‹è¿˜å¯ç”¨äºå¼€å‘ ARã€MA å’Œ ARMA æ¨¡å‹ã€‚</p>
<p>ARIMA æ–¹æ³•æœ€é€‚åˆè¡¨ç°å‡ºè¶‹åŠ¿ä½†ç¼ºä¹å­£èŠ‚æ€§å˜åŒ–çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/166a128266a9420697e3b3ba90e17eab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644103&amp;x-signature=cIC2F1iwkyMvoI9NRNHZ32s%2BQoI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>5.å­£èŠ‚æ€§è‡ªå›å½’ç»¼åˆç§»åŠ¨å¹³å‡çº¿ ï¼ˆSARIMAï¼‰</strong></p>
<p>å­£èŠ‚æ€§è‡ªå›å½’ç»¼åˆç§»åŠ¨å¹³å‡ ï¼ˆSARIMAï¼‰ æ–¹æ³•åŸºäºå·®å¼‚è§‚æµ‹å€¼ã€è¯¯å·®ã€å·®å¼‚å­£èŠ‚æ€§è§‚æµ‹å€¼å’Œå…ˆå‰æ—¶é—´æ­¥é•¿çš„å­£èŠ‚æ€§è¯¯å·®çš„çº¿æ€§æ··åˆï¼Œå¯¹åºåˆ—ä¸­çš„ä¸‹ä¸€æ­¥è¿›è¡Œå»ºæ¨¡ã€‚</p>
<p>SARIMA å¢å¼ºäº† ARIMA æ¨¡å‹ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å­£èŠ‚æ€§æ°´å¹³ä¸Šæ‰§è¡Œç›¸åŒçš„è‡ªå›å½’ã€å·®åˆ†å’Œç§»åŠ¨å¹³å‡å»ºæ¨¡ã€‚</p>
<p>è¯¥æ¨¡å‹çš„ç¬¦å·æ¶‰åŠæŒ‡å®š ARï¼ˆpï¼‰ã€Iï¼ˆdï¼‰ å’Œ MAï¼ˆqï¼‰ æ¨¡å‹çš„é¡ºåºä½œä¸º ARIMA å‡½æ•°çš„å‚æ•°ï¼Œä»¥åŠå­£èŠ‚æ€§æ°´å¹³çš„ ARï¼ˆPï¼‰ã€Iï¼ˆDï¼‰ã€MAï¼ˆQï¼‰ å’Œ m å‚æ•°ã€‚</p>
<p>ä¾‹å¦‚ SARIMAï¼ˆpï¼Œ dï¼Œ qï¼‰ï¼ˆPï¼Œ Dï¼Œ Qï¼‰mï¼Œå…¶ä¸­â€œmâ€æ˜¯æ¯ä¸ªå­£èŠ‚ï¼ˆå­£èŠ‚å‘¨æœŸï¼‰çš„æ—¶é—´æ­¥é•¿æ•°ã€‚SARIMA æ¨¡å‹å¯ç”¨äºå¼€å‘ ARã€MAã€ARMA å’Œ ARIMA æ¨¡å‹ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºå…·æœ‰è¶‹åŠ¿å’Œ/æˆ–å­£èŠ‚æ€§åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>6.å…·æœ‰å¤–ç”Ÿå›å½’çš„å­£èŠ‚æ€§è‡ªå›å½’ç§¯åˆ†ç§»åŠ¨å¹³å‡å€¼ ï¼ˆSARIMAXï¼‰</strong></p>
<p>å…·æœ‰å¤–ç”Ÿå›å½’çš„å­£èŠ‚æ€§è‡ªå›å½’ç»¼åˆç§»åŠ¨å¹³å‡å€¼ ï¼ˆSARIMAXï¼‰ æ˜¯ SARIMA æ¨¡å‹çš„æ‰©å±•ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬å¤–ç”Ÿå˜é‡çš„å»ºæ¨¡ã€‚</p>
<p>å¤–ç”Ÿå˜é‡ä¹Ÿç§°ä¸ºåå˜é‡ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºå…·æœ‰ä¸åŸå§‹åºåˆ—ç›¸åŒçš„æ—¶é—´æ­¥é•¿çš„è§‚æµ‹å€¼çš„å¹¶è¡Œè¾“å…¥åºåˆ—ã€‚</p>
<p>åˆçº§åºåˆ—å¯ä»¥ç§°ä¸ºå†…æºæ€§æ•°æ®ï¼Œä»¥å°†å…¶ä¸å¤–æºåºåˆ—è¿›è¡Œå¯¹æ¯”ã€‚</p>
<p>å¤–ç”Ÿå˜é‡çš„è§‚æµ‹å€¼åœ¨æ¯ä¸ªæ—¶é—´æ­¥ç›´æ¥åŒ…å«åœ¨æ¨¡å‹ä¸­ï¼Œå¹¶ä¸”ä»¥ä¸ä¸»è¦å†…ç”Ÿåºåˆ—ç›¸åŒçš„æ–¹å¼å»ºæ¨¡ï¼ˆä¾‹å¦‚ï¼Œä½œä¸º ARã€MA ç­‰è¿‡ç¨‹ï¼‰ã€‚</p>
<p>SARIMAX æ–¹æ³•è¿˜å¯ç”¨äºå¯¹å…·æœ‰å¤–ç”Ÿå˜é‡ï¼ˆå¦‚ ARXã€MAXã€ARMAX å’Œ ARIMAXï¼‰çš„å½’å…¥æ¨¡å‹è¿›è¡Œå»ºæ¨¡ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºå…·æœ‰è¶‹åŠ¿å’Œ/æˆ–å­£èŠ‚æˆåˆ†ä»¥åŠå¤–ç”Ÿå˜é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>7.å‘é‡è‡ªå›å½’ ï¼ˆVARï¼‰</strong></p>
<p>å‘é‡è‡ªå›å½’ ï¼ˆVARï¼‰ æ–¹æ³•ä½¿ç”¨ AR æ¨¡å‹æ–¹æ³•å¯¹æ¯ä¸ªæ—¶é—´åºåˆ—ä¸­çš„ä¸‹ä¸€æ­¥è¿›è¡Œå»ºæ¨¡ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå®ƒæ‰©å±•äº† AR æ¨¡å‹ä»¥è¿åˆå¤šä¸ªå¹¶è¡Œæ—¶é—´åºåˆ—ï¼Œä¾‹å¦‚å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p>æ¨¡å‹çš„ç¬¦å·æ¶‰åŠå°† ARï¼ˆpï¼‰ æ¨¡å‹çš„é¡ºåºæŒ‡å®šä¸º VAR å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ VARï¼ˆpï¼‰ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ²¡æœ‰è¶‹åŠ¿å’Œå­£èŠ‚åˆ†é‡çš„å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>8.å‘é‡è‡ªå›å½’ç§»åŠ¨å¹³å‡ ï¼ˆVARMAï¼‰</strong></p>
<p>å‘é‡è‡ªå›å½’ç§»åŠ¨å¹³å‡ ï¼ˆVARMAï¼‰ æ–¹æ³•åˆ©ç”¨ ARMA æ¨¡å‹æ–¹æ³•å¯¹å¤šä¸ªæ—¶é—´åºåˆ—ä¸­å³å°†åˆ°æ¥çš„å€¼è¿›è¡Œå»ºæ¨¡ã€‚å®ƒæ˜¯ARMAå¯¹å¤šä¸ªå¹¶è¡Œæ—¶é—´åºåˆ—çš„æ¨å¹¿ï¼Œä¾‹å¦‚å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p>æ¨¡å‹çš„ç¬¦å·æ¶‰åŠå°† ARï¼ˆpï¼‰ å’Œ MAï¼ˆqï¼‰ æ¨¡å‹çš„é¡ºåºæŒ‡å®šä¸º VARMA å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ VARMAï¼ˆpï¼Œ qï¼‰ã€‚VARMA æ¨¡å‹è¿˜å¯ç”¨äºå¼€å‘ VAR æˆ– VMA æ¨¡å‹ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ²¡æœ‰è¶‹åŠ¿å’Œå­£èŠ‚åˆ†é‡çš„å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b6c6d390c944d0fb8dc237db607f85c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644103&amp;x-signature=LqNT5UixnUSkSWVecppab05VQYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>9.å…·æœ‰å¤–ç”Ÿå›å½’çš„å‘é‡è‡ªå›å½’ç§»åŠ¨å¹³å‡å€¼ ï¼ˆVARMAXï¼‰</strong></p>
<p>å…·æœ‰å¤–ç”Ÿå›å½’çš„å‘é‡è‡ªå›å½’ç§»åŠ¨å¹³å‡å€¼ ï¼ˆVARMAXï¼‰ æ‰©å±•äº† VARMA æ¨¡å‹çš„åŠŸèƒ½ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬å¤–ç”Ÿå˜é‡çš„å»ºæ¨¡ã€‚å®ƒæ˜¯ ARMAX æ–¹æ³•çš„å¤šå˜é‡ç‰ˆæœ¬ã€‚</p>
<p>å¤–ç”Ÿå˜é‡ï¼Œä¹Ÿç§°ä¸ºåå˜é‡ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸åŸå§‹åºåˆ—çš„æ—¶é—´æ­¥é•¿å¯¹é½çš„å¹¶è¡Œè¾“å…¥åºåˆ—ã€‚</p>
<p>ä¸»è¦ç³»åˆ—è¢«ç§°ä¸ºå†…æºæ€§æ•°æ®ï¼Œä»¥å°†å…¶ä¸å¤–æºåºåˆ—è¿›è¡Œå¯¹æ¯”ã€‚å¤–ç”Ÿå˜é‡çš„è§‚æµ‹å€¼åœ¨æ¯ä¸ªæ—¶é—´æ­¥ç›´æ¥åŒ…å«åœ¨æ¨¡å‹ä¸­ï¼Œå¹¶ä¸”ä»¥ä¸ä¸»è¦å†…ç”Ÿåºåˆ—ç›¸åŒçš„æ–¹å¼å»ºæ¨¡ï¼ˆä¾‹å¦‚ï¼Œä½œä¸º ARã€MA ç­‰è¿‡ç¨‹ï¼‰ã€‚</p>
<p>VARMAX æ–¹æ³•è¿˜å¯ç”¨äºå¯¹å…·æœ‰å¤–ç”Ÿå˜é‡ï¼ˆå¦‚ VARX å’Œ VMAXï¼‰çš„å½’å’Œæ¨¡å‹è¿›è¡Œå»ºæ¨¡ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ— è¶‹åŠ¿çš„å¤šå˜é‡æ—¶é—´åºåˆ—å’Œå…·æœ‰å¤–ç”Ÿå˜é‡çš„å­£èŠ‚åˆ†é‡ã€‚</p>
<p><strong>10.ç®€å•æŒ‡æ•°å¹³æ»‘ ï¼ˆSESï¼‰</strong></p>
<p>ç®€å•æŒ‡æ•°å¹³æ»‘ ï¼ˆSESï¼‰ æ–¹æ³•å°†ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥é•¿å»ºæ¨¡ä¸ºå…ˆå‰æ—¶é—´æ­¥é•¿è§‚æµ‹å€¼çš„æŒ‡æ•°åŠ æƒçº¿æ€§å‡½æ•°ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºæ²¡æœ‰è¶‹åŠ¿å’Œå­£èŠ‚åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>11.Holt Winter æŒ‡æ•°å¹³æ»‘ ï¼ˆHWESï¼‰</strong></p>
<p>Holt Winter's Exponential Smoothing ï¼ˆHWESï¼‰ ä¹Ÿç§°ä¸ºä¸‰é‡æŒ‡æ•°å¹³æ»‘æ–¹æ³•ï¼Œå°†ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥é•¿å»ºæ¨¡ä¸ºå…ˆå‰æ—¶é—´æ­¥é•¿è§‚æµ‹å€¼çš„æŒ‡æ•°åŠ æƒçº¿æ€§å‡½æ•°ï¼ŒåŒæ—¶è€ƒè™‘è¶‹åŠ¿å’Œå­£èŠ‚æ€§ã€‚</p>
<p>è¯¥æ–¹æ³•é€‚ç”¨äºå…·æœ‰è¶‹åŠ¿å’Œ/æˆ–å­£èŠ‚æ€§åˆ†é‡çš„å•å˜é‡æ—¶é—´åºåˆ—ã€‚</p>
<p>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­ŒAI AgentæŠ€æœ¯æŒ‡å—æ·±åº¦è§£è¯»ï¼Œä»æ¦‚å¿µåˆ°ç”Ÿäº§]]></title>    <link>https://juejin.cn/post/7576210031873474601</link>    <guid>https://juejin.cn/post/7576210031873474601</guid>    <pubDate>2025-11-25T02:54:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873474601" data-draft-id="7576210031873458217" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­ŒAI AgentæŠ€æœ¯æŒ‡å—æ·±åº¦è§£è¯»ï¼Œä»æ¦‚å¿µåˆ°ç”Ÿäº§"/> <meta itemprop="keywords" content="Agent,LLM,LangChain"/> <meta itemprop="datePublished" content="2025-11-25T02:54:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­ŒAI AgentæŠ€æœ¯æŒ‡å—æ·±åº¦è§£è¯»ï¼Œä»æ¦‚å¿µåˆ°ç”Ÿäº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:54:51.000Z" title="Tue Nov 25 2025 02:54:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¦‚ä»Šï¼Œéšç€å¤§è¯­è¨€æ¨¡å‹æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼ŒAI Agentå·²ç»ä»å®éªŒå®¤èµ°å‘äº†ä¼ä¸šçš„ç”Ÿäº§ç¯å¢ƒã€‚ç‰¹åˆ«æ˜¯è°·æ­Œåœ¨2025å¹´9æœˆ15æ—¥æœ€æ–°å‘å¸ƒçš„è¿™ä»½ã€Š<code>Startup Technical Guide: AI Agents</code>ã€‹ç™½çš®ä¹¦ï¼Œä¸ºæ•´ä¸ªè¡Œä¸šæä¾›äº†ä¸€ä»½æå…·ä»·å€¼çš„æŠ€æœ¯è·¯çº¿å›¾ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€ä»½æŠ€æœ¯æ–‡æ¡£ï¼Œæ›´æ˜¯è°·æ­Œå¯¹æœªæ¥AIåº”ç”¨å½¢æ€çš„æˆ˜ç•¥æ€§æ€è€ƒã€‚ä»ADKï¼ˆAgent Development Kitï¼‰åˆ°Agent2Agentåè®®ï¼Œä»ReActæ¡†æ¶åˆ°AgentOpsæ–¹æ³•è®ºï¼Œè°·æ­Œæ­£åœ¨æ„å»ºä¸€ä¸ªå®Œæ•´çš„AI Agentç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p>è¿™ä»½ç™½çš®ä¹¦èƒŒæ™¯æ·±åšï¼šè°·æ­Œäº‘CEO Thomas Kurianå¼ºè°ƒ"ä»£ç†å·¥ä½œæµæ˜¯ä¸‹ä¸€ä¸ªå‰æ²¿"ï¼ŒDeepMind CEO Demis Hassabiså°†å…¶è§†ä¸º"é€šç”¨AIåŠ©æ‰‹"çš„å…³é”®ä¸€æ­¥ï¼ŒGoogleå’ŒAlphabet CEO Sundar Pichaiå°†AI Agentå®šä¹‰ä¸º"ç»“åˆå…ˆè¿›AIæ¨¡å‹æ™ºèƒ½ä¸å·¥å…·è®¿é—®èƒ½åŠ›çš„ç³»ç»Ÿï¼Œèƒ½åœ¨ä½ çš„æ§åˆ¶ä¸‹ä»£è¡¨ä½ é‡‡å–è¡ŒåŠ¨"ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä»½æŒ‡å—ä¸“é—¨é¢å‘åˆåˆ›ä¼ä¸šå’Œå¼€å‘è€…ï¼Œæä¾›äº†ä»åŸå‹åˆ°ç”Ÿäº§çš„å®Œæ•´æŠ€æœ¯è·¯å¾„ï¼Œå¹¶æ‰¿è¯ºé€šè¿‡Google for Startups Cloud Programæä¾›é«˜è¾¾35ä¸‡ç¾å…ƒçš„äº‘æœåŠ¡ç§¯åˆ†æ”¯æŒã€‚</p>
<p>æœ¬æ–‡å°†å°è¯•è§£è¯»è¿™ä»½æŠ¥å‘Šï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">PART 01 æŠ€æœ¯èƒŒæ™¯ä¸æŒ‘æˆ˜ï¼šä»å•ä¸€é—®ç­”åˆ°å¤æ‚å·¥ä½œæµ</h2>
<h3 data-id="heading-1">ä¼ ç»ŸAIåº”ç”¨çš„å±€é™æ€§</h3>
<p>åœ¨æ·±å…¥è°·æ­Œçš„æŠ€æœ¯æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦ç†è§£ä¼ ç»ŸAIåº”ç”¨é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚è¿‡å»çš„AIç³»ç»Ÿä¸»è¦æ˜¯"é—®ç­”æ¨¡å¼"â€”â€”ç”¨æˆ·æé—®ï¼ŒAIå›ç­”ï¼Œäº¤äº’ç»“æŸã€‚è¿™ç§æ¨¡å¼åœ¨å¤„ç†å¤æ‚ä¸šåŠ¡åœºæ™¯æ—¶æš´éœ²å‡ºæ˜æ˜¾ä¸è¶³ï¼š</p>
<p><strong>ç¼ºä¹æŒç»­æ€§</strong>ï¼šæ¯æ¬¡äº¤äº’éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ— æ³•ç»´æŒé•¿æœŸçš„ä»»åŠ¡çŠ¶æ€ã€‚æ¯”å¦‚ä¸€ä¸ªå®¢æˆ·æœåŠ¡åœºæ™¯ï¼ŒAIæ— æ³•è®°ä½ç”¨æˆ·çš„å†å²é—®é¢˜å’Œåå¥½ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ”¶é›†ä¿¡æ¯ã€‚</p>
<p><strong>å·¥å…·èƒ½åŠ›æœ‰é™</strong>ï¼šä¼ ç»ŸAIåªèƒ½åŸºäºè®­ç»ƒæ•°æ®ç”Ÿæˆæ–‡æœ¬ï¼Œæ— æ³•ä¸»åŠ¨è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿã€æŸ¥è¯¢æ•°æ®åº“æˆ–æ‰§è¡Œå…·ä½“æ“ä½œã€‚è¿™å¤§å¤§é™åˆ¶äº†å…¶åœ¨å®é™…ä¸šåŠ¡ä¸­çš„åº”ç”¨ä»·å€¼ã€‚</p>
<p><strong>å†³ç­–é“¾æ¡ç®€å•</strong>ï¼šé¢å¯¹éœ€è¦å¤šæ­¥æ¨ç†çš„å¤æ‚ä»»åŠ¡ï¼Œä¼ ç»ŸAIå¾€å¾€ç»™å‡ºè¿‡äºç®€åŒ–çš„ç­”æ¡ˆï¼Œç¼ºä¹æ·±åº¦çš„é€»è¾‘é“¾æ¡å’ŒéªŒè¯æœºåˆ¶ã€‚</p>
<h3 data-id="heading-2">AI Agentçš„æŠ€æœ¯çªç ´</h3>
<p>AI Agentä»£è¡¨äº†ä¸€ç§å…¨æ–°çš„èŒƒå¼è½¬å˜ã€‚æ­£å¦‚è°·æ­Œäº‘CEO Thomas Kurianæ‰€è¯´ï¼š"è¿™ä¸ä»…ä»…æ˜¯é—®ç­”ï¼Œè€Œæ˜¯ç»™AIä¸€ä¸ªå¤æ‚ç›®æ ‡â€”â€”æ¯”å¦‚'è§„åˆ’è¿™æ¬¡äº§å“å‘å¸ƒ'æˆ–'è§£å†³è¿™ä¸ªä¾›åº”é“¾ä¸­æ–­'â€”â€”è®©å®ƒç¼–æ’å®Œæˆæ‰€éœ€çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚"</p>
<p>è¿™ç§è½¬å˜å¸¦æ¥äº†ä¸‰ä¸ªæ ¸å¿ƒèƒ½åŠ›çš„è·ƒå‡ï¼š</p>
<p><strong>è‡ªä¸»è§„åˆ’èƒ½åŠ›</strong>ï¼šAI Agentèƒ½å¤Ÿå°†å¤æ‚ç›®æ ‡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡åºåˆ—ï¼Œå¹¶åŠ¨æ€è°ƒæ•´æ‰§è¡Œç­–ç•¥ã€‚</p>
<p><strong>å·¥å…·é›†æˆèƒ½åŠ›</strong>ï¼šé€šè¿‡å‡½æ•°è°ƒç”¨å’ŒAPIé›†æˆï¼ŒAI Agentå¯ä»¥ä¸»åŠ¨è·å–å®æ—¶æ•°æ®ã€æ“ä½œå¤–éƒ¨ç³»ç»Ÿã€æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</p>
<p><strong>æŒç»­å­¦ä¹ èƒ½åŠ›</strong>ï¼šé€šè¿‡ä¸Šä¸‹æ–‡ç®¡ç†å’Œè®°å¿†æœºåˆ¶ï¼ŒAI Agentèƒ½å¤Ÿåœ¨å¤šè½®äº¤äº’ä¸­ç§¯ç´¯çŸ¥è¯†ï¼Œæä¾›ä¸ªæ€§åŒ–æœåŠ¡ã€‚</p>
<h3 data-id="heading-3">ä¼ä¸šçº§éƒ¨ç½²çš„æ–°æŒ‘æˆ˜</h3>
<p>ç„¶è€Œï¼Œä»åŸå‹åˆ°ç”Ÿäº§ç¯å¢ƒçš„è·¨è¶Šå¸¦æ¥äº†å…¨æ–°çš„æŠ€æœ¯æŒ‘æˆ˜ï¼š</p>
<p><strong>éç¡®å®šæ€§è¡Œä¸ºç®¡ç†</strong>ï¼šä¸ä¼ ç»Ÿè½¯ä»¶ä¸åŒï¼ŒåŸºäºLLMçš„Agentå…·æœ‰éç¡®å®šæ€§ç‰¹å¾ï¼Œå¦‚ä½•ç¡®ä¿å…¶è¡Œä¸ºçš„å¯é æ€§å’Œå¯é¢„æµ‹æ€§æˆä¸ºå…³é”®é—®é¢˜ã€‚</p>
<p><strong>å¤æ‚æ¨ç†è·¯å¾„éªŒè¯</strong>ï¼šAgentçš„å†³ç­–è¿‡ç¨‹å¯èƒ½æ¶‰åŠå¤šä¸ªæ¨ç†æ­¥éª¤å’Œå·¥å…·è°ƒç”¨ï¼Œå¦‚ä½•éªŒè¯è¿™äº›å¤æ‚æ¨ç†è·¯å¾„çš„æ­£ç¡®æ€§æ˜¯æŠ€æœ¯éš¾ç‚¹ã€‚</p>
<p><strong>ç”Ÿäº§çº§å¯æ‰©å±•æ€§</strong>ï¼šä»å®éªŒå®¤ç¯å¢ƒåˆ°å¤„ç†æ•°ç™¾ä¸‡ç”¨æˆ·è¯·æ±‚çš„ç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦å…¨æ–°çš„æ¶æ„è®¾è®¡å’Œè¿ç»´æ–¹æ³•è®ºã€‚</p>
<p>æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œè°·æ­Œæ¨å‡ºäº†è¿™ä»½æŠ€æœ¯ç™½çš®ä¹¦ï¼Œè¯•å›¾ä¸ºè¡Œä¸šæä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>è°·æ­Œçš„ä¸‰è·¯å¾„AI Agentç­–ç•¥</strong></p>
<p>ç™½çš®ä¹¦æ˜ç¡®æå‡ºäº†ä¸‰ç§ä½¿ç”¨AI Agentçš„ä¸»è¦è·¯å¾„ï¼š</p>
<ol start="0">
<li>
<p><strong>æ„å»ºè‡ªæœ‰ä»£ç†</strong>ï¼šä½¿ç”¨ADKè¿›è¡Œä»£ç ä¼˜å…ˆå¼€å‘ï¼Œæˆ–é€šè¿‡Google Agentspaceè¿›è¡Œåº”ç”¨ä¼˜å…ˆå¼€å‘</p>
</li>
<li>
<p><strong>ä½¿ç”¨è°·æ­Œäº‘ä»£ç†</strong>ï¼šåŒ…æ‹¬Gemini Code Assistã€Gemini Cloud Assistã€Gemini in Colab Enterpriseç­‰é¢„æ„å»ºæœåŠ¡</p>
</li>
<li>
<p><strong>å¼•å…¥åˆä½œä¼™ä¼´ä»£ç†</strong>ï¼šé€šè¿‡Google Cloud Marketplaceå’ŒAgent Gardené›†æˆç¬¬ä¸‰æ–¹æˆ–å¼€æºä»£ç†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a72f9354907f4b1791dae6e00c406194~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=xVti%2BnUXJIm6y9U6dyafmXzDDWI%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<p>è¿™ç§å¤šè·¯å¾„ç­–ç•¥ä½“ç°äº†è°·æ­Œå¯¹ä¸åŒä¼ä¸šéœ€æ±‚çš„æ·±åº¦ç†è§£ï¼Œæ— è®ºæ˜¯æŠ€æœ¯å®åŠ›é›„åšçš„å¤§å‹ä¼ä¸šï¼Œè¿˜æ˜¯èµ„æºæœ‰é™çš„åˆåˆ›å…¬å¸ï¼Œéƒ½èƒ½æ‰¾åˆ°åˆé€‚çš„AI Agentè§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-4">PART 02 æ ¸å¿ƒæŠ€æœ¯è§£æï¼šADKä¸è°·æ­ŒAI Agentç”Ÿæ€</h2>
<h3 data-id="heading-5">Agent Development Kitï¼šä»£ç ä¼˜å…ˆçš„å¼€å‘æ¡†æ¶</h3>
<p>è°·æ­ŒADKï¼ˆAgent Development Kitï¼‰æ˜¯è¿™ä»½ç™½çš®ä¹¦çš„æŠ€æœ¯æ ¸å¿ƒã€‚å®ƒä¸æ˜¯ç®€å•çš„å¼€å‘å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§AI Agentå¼€å‘æ¡†æ¶ã€‚ADKçš„è®¾è®¡å“²å­¦ä½“ç°äº†è°·æ­Œå¯¹AI AgentæŠ€æœ¯å‘å±•æ–¹å‘çš„æ·±åº¦æ€è€ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d39b84a3719645f3981d1c2e3d256ed2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=mEQ6s%2BSiFDDZ24%2FWxBZEiOq0%2Fu8%3D" alt="" loading="lazy"/></p>
<p><strong>å¤šä»£ç†åä½œæ¶æ„</strong>ï¼šADKå¤©ç„¶æ”¯æŒå¤šä»£ç†ç³»ç»Ÿè®¾è®¡ã€‚å¼€å‘è€…å¯ä»¥æ„å»ºé«˜åº¦ä¸“ä¸šåŒ–çš„AIè§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡çµæ´»çš„ç¼–æ’ï¼ˆé¡ºåºã€å¹¶è¡Œæˆ–åŠ¨æ€ï¼‰å®ç°å¤æ‚å·¥ä½œæµè‡ªåŠ¨åŒ–ã€‚æ¯”å¦‚æ„å»ºä¸€ä¸ªæ™ºèƒ½é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«"ä»»åŠ¡åˆ†è§£ä»£ç†"ã€"ä»£ç ç”Ÿæˆä»£ç†"ã€"è®¾è®¡ä»£ç†"å’Œ"æ–‡æ¡£ä»£ç†"çš„åä½œã€‚</p>
<p><strong>ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€</strong>ï¼šADKå›´ç»•å·¥å…·ç”Ÿæ€æ„å»ºï¼Œå…è®¸ä»£ç†ä¸ç°æœ‰å·¥å…·å’Œæ•°æ®æ— ç¼é›†æˆã€‚æ”¯æŒè¿æ¥Notionã€Slackã€CRMç­‰ç”Ÿäº§åŠ›å·¥å…·ï¼Œä»¥åŠLangChainã€LlamaIndexç­‰æ¡†æ¶ï¼Œç”šè‡³å…¶ä»–ä»£ç†ç³»ç»Ÿå¦‚LangGraphã€CrewAIã€‚</p>
<p><strong>ç”Ÿäº§çº§è´¨é‡ä¿è¯</strong>ï¼šå†…ç½®è¯„ä¼°å’Œå¯è§‚æµ‹æ€§å·¥å…·ï¼Œæ”¯æŒç³»ç»ŸåŒ–æµ‹è¯•ä»£ç†åœ¨å„ç§åœºæ™¯ä¸‹çš„å“åº”èƒ½åŠ›å’Œå¤æ‚ä»»åŠ¡æ‰§è¡Œèƒ½åŠ›ã€‚æä¾›å®Œæ•´çš„æ‰§è¡Œè½¨è¿¹æ£€æŸ¥ï¼ŒåŒ…æ‹¬æ¨ç†è¿‡ç¨‹ã€å·¥å…·è°ƒç”¨å’Œè§‚å¯Ÿç»“æœï¼Œå®ç°æ•°æ®é©±åŠ¨çš„æŒç»­æ”¹è¿›ã€‚</p>
<h3 data-id="heading-6">ä¸‰ç±»ä»£ç†æ¶æ„çš„æŠ€æœ¯åˆ›æ–°</h3>
<p>ADKå®šä¹‰äº†ä¸‰ç§æ ¸å¿ƒä»£ç†ç±»å‹ï¼Œæ¯ç§éƒ½é’ˆå¯¹ä¸åŒçš„æ‰§è¡Œæ¨¡å¼å’Œä¸šåŠ¡åœºæ™¯ï¼š</p>
<p><strong>LLMä»£ç†ï¼ˆLlmAgentï¼‰</strong> ï¼š</p>
<ul>
<li>æ ¸å¿ƒå¼•æ“ï¼šå¤§è¯­è¨€æ¨¡å‹</li>
<li>ç‰¹ç‚¹ï¼šéç¡®å®šæ€§ï¼ˆçµæ´»ï¼‰</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¤æ‚æ¨ç†ã€åŠ¨æ€å†³ç­–ã€è‡ªç„¶è¯­è¨€ç†è§£</li>
<li>æŠ€æœ¯å®ç°ï¼šåŸºäºReActæ¡†æ¶çš„æ€è€ƒ-è¡ŒåŠ¨å¾ªç¯</li>
</ul>
<p><strong>å·¥ä½œæµä»£ç†ï¼ˆWorkflow Agentï¼‰</strong> ï¼š</p>
<ul>
<li>æ ¸å¿ƒå¼•æ“ï¼šé¢„å®šä¹‰é€»è¾‘</li>
<li>ç‰¹ç‚¹ï¼šç¡®å®šæ€§ï¼ˆå¯é¢„æµ‹ï¼‰</li>
<li>åŒ…å«ä¸‰ä¸ªå­ç±»å‹ï¼š</li>
</ul>

<ul>
<li>é¡ºåºä»£ç†ï¼šå›ºå®šé¡ºåºæ‰§è¡Œå­ä»»åŠ¡</li>
<li>å¹¶è¡Œä»£ç†ï¼šåŒæ—¶æ‰§è¡Œç‹¬ç«‹ä»»åŠ¡</li>
<li>å¾ªç¯ä»£ç†ï¼šè¿­ä»£æ‰§è¡Œç›´åˆ°æ»¡è¶³æ¡ä»¶</li>
</ul>

<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šç»“æ„åŒ–æµç¨‹ã€æ€§èƒ½ä¼˜åŒ–ã€è¿­ä»£æ”¹è¿›</li>
</ul>
<p><strong>è‡ªå®šä¹‰ä»£ç†ï¼ˆBaseAgentå­ç±»ï¼‰</strong> ï¼š</p>
<ul>
<li>
<p>æ ¸å¿ƒå¼•æ“ï¼šè‡ªå®šä¹‰Pythonä»£ç </p>
</li>
<li>
<p>ç‰¹ç‚¹ï¼šå®Œå…¨å¯æ§çš„è¡Œä¸ºé€»è¾‘</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šç‰¹æ®Šä¸šåŠ¡éœ€æ±‚ã€ç¡¬ç¼–ç è§„åˆ™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9e519ba0be145bb9e60121b052c127d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=9IuEM9fqA5yf678w7ftB%2Fwo5N8U%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<h3 data-id="heading-7">Model Context Protocolï¼šæ ‡å‡†åŒ–çš„äº’æ“ä½œæ€§</h3>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯Claudeæ¨åŠ¨çš„å¼€æ”¾æ ‡å‡†ï¼Œè§£å†³äº†AI Agentç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•è®©ä¸åŒæ¥æºçš„å·¥å…·å’Œæ•°æ®æºæ— ç¼åä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/046039caeccc400e86725a66e3ec2789~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=fJ8E2C%2FU%2FXOD6vp8y8sSLaoZlDE%3D" alt="" loading="lazy"/></p>
<p><strong>é€šç”¨é€‚é…å™¨æ¦‚å¿µ</strong>ï¼šMCPå°±åƒAIä»£ç†çš„"ä¸‡èƒ½é€‚é…å™¨"ï¼Œè®©åº”ç”¨ç¨‹åºæ— éœ€ä¸ºæ¯ä¸ªæ•°æ®æºæ„å»ºå®šåˆ¶é›†æˆã€‚è¿™å¤§å¤§é™ä½äº†å¼€å‘å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚</p>
<p><strong>åŒå‘èƒ½åŠ›æ”¯æŒ</strong>ï¼š</p>
<ul>
<li>æ¶ˆè´¹å¤–éƒ¨å·¥å…·ï¼šADKä»£ç†å¯ä»¥ä½œä¸ºMCPå®¢æˆ·ç«¯ï¼Œä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹MCPæœåŠ¡å™¨æš´éœ²çš„å·¥å…·</li>
<li>æš´éœ²æœ¬åœ°å·¥å…·ï¼šå¼€å‘è€…å¯ä»¥å°†ADKå·¥å…·å°è£…ä¸ºMCPæœåŠ¡å™¨ï¼Œè®©å…¶ä»–MCPå…¼å®¹çš„ä»£ç†ä½¿ç”¨</li>
</ul>
<p><strong>ä¸°å¯Œçš„æ•°æ®æºæ”¯æŒ</strong>ï¼šé€šè¿‡å¼€æºMCP Toolboxï¼Œæ”¯æŒBigQueryã€Bigtableã€Cloud SQLã€Spannerã€MySQLã€PostgreSQLç­‰ä¸»æµæ•°æ®åº“ï¼Œä»¥åŠæ–°å…´çš„å›¾æ•°æ®åº“å¦‚Dgraphã€‚</p>
<hr/>
<h2 data-id="heading-8">PART 03 ä¼ä¸šçº§éƒ¨ç½²çš„æŠ€æœ¯æ ˆè®¾è®¡</h2>
<h3 data-id="heading-9">æ•°æ®æ¶æ„ï¼šä¸‰å±‚å­˜å‚¨çš„è®¾è®¡å“²å­¦</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­æå‡ºäº†AI Agentæ•°æ®æ¶æ„çš„ä¸‰å±‚è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§åˆ†å±‚æ€æƒ³ä½“ç°äº†å¯¹ä¸åŒæ•°æ®è®¿é—®æ¨¡å¼çš„æ·±åº¦ç†è§£ï¼š</p>
<p><strong>é•¿æœŸçŸ¥è¯†åº“ï¼ˆLong-term Knowledge Baseï¼‰</strong> ï¼š</p>
<ul>
<li>
<p><strong>Vertex AI Search</strong>ï¼šä½œä¸ºä»£ç†çš„å¯æŸ¥è¯¢çŸ¥è¯†åº“ï¼Œå¤„ç†éç»“æ„åŒ–ä¿¡æ¯çš„è¯­ä¹‰æ£€ç´¢</p>
</li>
<li>
<p><strong>Firestore</strong>ï¼šå­˜å‚¨ç”¨æˆ·äº¤äº’å†å²å’Œé•¿æœŸä»»åŠ¡çŠ¶æ€ï¼Œæ”¯æŒè·¨ä¼šè¯çš„ä¸ªæ€§åŒ–ä½“éªŒ</p>
</li>
<li>
<p><strong>Cloud Storage</strong>ï¼šä½œä¸ºåŸå§‹æ–‡æ¡£çš„æŒä¹…å­˜å‚¨ï¼Œä¸ºå…¶ä»–æœåŠ¡æä¾›æ•°æ®æº</p>
</li>
<li>
<p><strong>BigQuery</strong>ï¼šåˆ†æå‹æ•°æ®åº“ï¼Œæ”¯æŒå¤æ‚çš„ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢å’Œå•†ä¸šæ™ºèƒ½åˆ†æ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13dfb7e3dc0e471b83e56bbcf899e4a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=8REe7jZMkbIgJUxsEius1aXOhgE%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<p><strong>å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼‰</strong> ï¼š</p>
<ul>
<li>
<p><strong>Memorystore</strong>ï¼šæä¾›æ¯«ç§’çº§å»¶è¿Ÿçš„é«˜é€Ÿç¼“å­˜ï¼Œå­˜å‚¨æ˜‚è´µæ“ä½œçš„ç»“æœï¼ˆLLMè°ƒç”¨ã€å¤æ‚æŸ¥è¯¢ã€ç¬¬ä¸‰æ–¹æœåŠ¡å“åº”ï¼‰ï¼Œå¤§å¹…é™ä½å“åº”å»¶è¿Ÿå’Œè¿è¥æˆæœ¬</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/373097ef5a76452e8179760f94fab929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=FbrYMindJurfFL%2FUM27vHyg1WIU%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<p><strong>äº‹åŠ¡å†…å­˜ï¼ˆTransactional Memoryï¼‰</strong> ï¼š</p>
<ul>
<li><strong>Cloud SQL</strong>ï¼šå•åŒºåŸŸå¼ºä¸€è‡´æ€§å…³ç³»æ•°æ®åº“ï¼Œè®°å½•å…³é”®ä¸šåŠ¡æ“ä½œçš„ACIDå…¼å®¹å®¡è®¡æ—¥å¿—</li>
<li><strong>Cloud Spanner</strong>ï¼šå…¨çƒåˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§æ•°æ®åº“ï¼Œæ”¯æŒè·¨åœ°ç†åŒºåŸŸçš„ä»»åŠ¡å…³é”®å‹åº”ç”¨</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/680232b74afb42bfba7f265630580eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=moP%2F%2BvQTx5MGhGYt71npCWhncY8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">ReActç¼–æ’æ¡†æ¶çš„æ·±åº¦å®ç°</h3>
<p>ReActï¼ˆReason + Actionï¼‰æ¡†æ¶æ˜¯AI Agentç¼–æ’çš„æ ¸å¿ƒæ¨¡å¼ï¼ŒADKä¸ºå…¶æä¾›äº†å®Œæ•´çš„åŸç”Ÿå®ç°ï¼š</p>
<p><strong>æ¨ç†é˜¶æ®µï¼ˆReasonï¼‰</strong> ï¼š</p>
<ul>
<li>LlmAgentç®¡ç†å†…éƒ¨çŠ¶æ€ï¼Œè°ƒç”¨åº•å±‚è¯­è¨€æ¨¡å‹</li>
<li>åŸºäºç”¨æˆ·æç¤ºå’Œå½“å‰çŠ¶æ€å½¢æˆå‡è®¾</li>
<li>ç¡®å®šä¸‹ä¸€æ­¥æœ€ä½³è¡ŒåŠ¨æ–¹æ¡ˆ</li>
</ul>
<p><strong>è¡ŒåŠ¨é˜¶æ®µï¼ˆActionï¼‰</strong> ï¼š</p>
<ul>
<li>é€šè¿‡çµæ´»çš„å·¥å…·ç³»ç»Ÿæ‰§è¡Œå†³ç­–</li>
<li>æ”¯æŒç®€å•Pythonå‡½æ•°è°ƒç”¨</li>
<li>æ”¯æŒå¤æ‚çš„ä»£ç†é—´å§”æ‰˜ï¼ˆAgent-as-a-Toolæ¨¡å¼ï¼‰</li>
</ul>
<p><strong>è§‚å¯Ÿé˜¶æ®µï¼ˆObserveï¼‰</strong> ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ•è·å·¥å…·æˆ–å­ä»£ç†è¿”å›çš„å­—å…¸æ•°æ®</li>
<li>å°†è¾“å‡ºé›†æˆåˆ°ä»£ç†ä¸Šä¸‹æ–‡ä¸­</li>
<li>ä¸ºä¸‹ä¸€è½®æ¨ç†å¾ªç¯æä¾›æ–°ä¿¡æ¯</li>
</ul>
<p><strong>å®æˆ˜æ¡ˆä¾‹ï¼šé€€æ¬¾å¤„ç†çš„ReActæµç¨‹</strong></p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œå±•ç¤ºReActæ¡†æ¶å¦‚ä½•å¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
# ç”¨æˆ·è¯·æ±‚ï¼šé€€æ¬¾ç”³è¯·
# æ¨ç†ï¼šéœ€è¦äº†è§£å…¬å¸é€€æ¬¾æ”¿ç­–
# è¡ŒåŠ¨ï¼šä½¿ç”¨semantic_searchå·¥å…·æŸ¥è¯¢å†…éƒ¨çŸ¥è¯†åº“
# è§‚å¯Ÿï¼šè·å¾—<span class="hljs-string">"30å¤©å†…å…¨é¢é€€æ¬¾"</span>æ”¿ç­–
# æ¨ç†ï¼šéœ€è¦è·å–ç”¨æˆ·å…·ä½“è®¢å•ä¿¡æ¯
# è¡ŒåŠ¨ï¼šè°ƒç”¨get_order_detailså‡½æ•°ä»CRMè·å–æ•°æ®
# è§‚å¯Ÿï¼šè·å¾—è´­ä¹°æ—¥æœŸä¸º<span class="hljs-number">9</span>å¤©å‰ï¼Œç¬¦åˆé€€æ¬¾æ¡ä»¶
# æ¨ç†ï¼šæ»¡è¶³é€€æ¬¾æ¡ä»¶ï¼Œå¯ä»¥æ‰§è¡Œé€€æ¬¾æ“ä½œ
# è¡ŒåŠ¨ï¼šè°ƒç”¨process_refundå·¥å…·å¤„ç†é€€æ¬¾
# è§‚å¯Ÿï¼šè·å¾—æˆåŠŸçŠ¶æ€ç¡®è®¤
# æœ€ç»ˆå“åº”ï¼šç”Ÿæˆç”¨æˆ·å‹å¥½çš„é€€æ¬¾ç¡®è®¤ä¿¡æ¯
</code></pre>
<h3 data-id="heading-11">éƒ¨ç½²è¿è¡Œæ—¶çš„æ¶æ„é€‰æ‹©</h3>
<p>ADKé‡‡ç”¨éƒ¨ç½²æ— å…³çš„è®¾è®¡ç†å¿µï¼Œé€šè¿‡FastAPIå°†ä»£ç†é€»è¾‘å°è£…ä¸ºæ ‡å‡†WebæœåŠ¡ï¼Œæ”¯æŒå¤šç§ç”Ÿäº§ç¯å¢ƒï¼š</p>
<p><strong>Vertex AI Agent Engine</strong>ï¼š</p>
<ul>
<li>ä¸“ä¸ºAIä»£ç†å·¥ä½œè´Ÿè½½ä¼˜åŒ–çš„æ‰˜ç®¡æœåŠ¡</li>
<li>è‡ªåŠ¨æ‰©ç¼©å®¹ã€é›†æˆèº«ä»½ç®¡ç†ã€ä»£ç†ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
<li>æä¾›Memory Bankå’ŒExample Storeç­‰ä¸“ä¸šåŒ–åŠŸèƒ½</li>
<li>æ¨èç”¨äºåˆåˆ›ä¼ä¸šçš„é¦–é€‰éƒ¨ç½²ç›®æ ‡</li>
</ul>
<p><strong>Cloud Run</strong>ï¼š</p>
<ul>
<li>æ— æœåŠ¡å™¨å®¹å™¨å¹³å°ï¼ŒæŒ‰éœ€ä»˜è´¹æ¨¡å¼</li>
<li>é€‚åˆé›†æˆåˆ°ç°æœ‰å¾®æœåŠ¡æ¶æ„</li>
<li>æ”¯æŒè‡ªå®šä¹‰å®¹å™¨é…ç½®å’Œæµé‡æ§åˆ¶</li>
</ul>
<p><strong>Google Kubernetes Engine (GKE)</strong> ï¼š</p>
<ul>
<li>ä¼ä¸šçº§Kubernetesæ‰˜ç®¡æœåŠ¡</li>
<li>é€‚åˆå¤æ‚çš„å¤šæœåŠ¡åº”ç”¨å’Œå¹³å°å·¥ç¨‹å›¢é˜Ÿ</li>
<li>æä¾›æœ€ç²¾ç»†çš„ç½‘ç»œã€å­˜å‚¨å’Œç¡¬ä»¶æ§åˆ¶</li>
</ul>
<hr/>
<h2 data-id="heading-12">PART 04 å®æ–½éƒ¨ç½²ç­–ç•¥ï¼šä»åŸå‹åˆ°ç”Ÿäº§çš„å®Œæ•´è·¯å¾„</h2>
<h3 data-id="heading-13">Agent Starter Packï¼šç”Ÿäº§å°±ç»ªçš„è„šæ‰‹æ¶</h3>
<p>è°·æ­Œæ·±çŸ¥ä»æ¦‚å¿µéªŒè¯åˆ°ç”Ÿäº§éƒ¨ç½²çš„å·¨å¤§é¸¿æ²Ÿï¼ŒAgent Starter Packæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚å®ƒä¸ä»…ä»…æ˜¯ä»£ç æ¨¡æ¿ï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„DevOpsè§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆTerraformï¼‰</strong> ï¼š</p>
<ul>
<li>æä¾›å¯é‡ç°çš„äº‘ç¯å¢ƒé…ç½®æ¨¡æ¿</li>
<li>è‡ªåŠ¨åŒ–é…ç½®Cloud Runã€IAMæƒé™ã€ç½‘ç»œè®¾ç½®</li>
<li>ç¡®ä¿å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§</li>
</ul>
<p><strong>CI/CDç®¡é“ï¼ˆCloud Buildï¼‰</strong> ï¼š</p>
<ul>
<li>é¢„é…ç½®çš„cloudbuild.yamlè‡ªåŠ¨åŒ–æ„å»ºæµç¨‹</li>
<li>é›†æˆå•å…ƒæµ‹è¯•ã€é‡åŒ–è¯„ä¼°ã€éƒ¨ç½²æµç¨‹</li>
<li>å®ç°çœŸæ­£çš„AgentOpså·¥ä½œæµ</li>
</ul>
<p><strong>å¯è§‚æµ‹æ€§åŸºç¡€è®¾æ–½</strong>ï¼š</p>
<ul>
<li>Cloud Traceé›†æˆï¼šæ·±åº¦åˆ†æä»£ç†æ‰§è¡Œè½¨è¿¹</li>
<li>Cloud Loggingï¼šé›†ä¸­åŒ–æ—¥å¿—ç®¡ç†</li>
<li>OpenTelemetryæ”¯æŒï¼šæ ‡å‡†åŒ–ç›‘æ§æ•°æ®æ”¶é›†</li>
<li>BigQueryæ•°æ®é›†æˆï¼šæ”¯æŒé•¿æœŸåˆ†æå’Œå•†ä¸šæ™ºèƒ½</li>
</ul>
<p><strong>æŒç»­è¯„ä¼°æ¡†æ¶</strong>ï¼š</p>
<ul>
<li>Vertex AIè¯„ä¼°æœåŠ¡é›†æˆ</li>
<li>è‡ªåŠ¨åŒ–æ€§èƒ½åŸºå‡†æµ‹è¯•</li>
<li>é¢„å®šä¹‰è¯„ä¼°æ•°æ®é›†ç®¡ç†</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4a49329d1ec4846ab3f96cf8a43b9c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=bZ3GilajFTYUDjkrpgEbnBOi%2F9A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">AgentOpsæ–¹æ³•è®ºçš„å››å±‚è¯„ä¼°ä½“ç³»</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­æå‡ºäº†AgentOpsï¼ˆAgent Operationsï¼‰æ–¹æ³•è®ºï¼Œè¿™æ˜¯å¯¹ä¼ ç»ŸDevOps/MLOpsåœ¨AI Agenté¢†åŸŸçš„é‡è¦æ‰©å±•ï¼š</p>
<p><strong>ç¬¬1å±‚ï¼šç»„ä»¶çº§è¯„ä¼°ï¼ˆç¡®å®šæ€§å•å…ƒæµ‹è¯•ï¼‰</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
# å·¥å…·å‡½æ•°çš„å•å…ƒæµ‹è¯•ç¤ºä¾‹
def <span class="hljs-built_in">test_inventory_check</span>():
# æµ‹è¯•æœ‰æ•ˆè¾“å…¥
result = <span class="hljs-built_in">check_inventory</span>(<span class="hljs-string">"PROD_001"</span>)
assert result[<span class="hljs-string">"status"</span>] == <span class="hljs-string">"success"</span>
assert <span class="hljs-string">"stock_level"</span> in result
# æµ‹è¯•æ— æ•ˆè¾“å…¥
result = <span class="hljs-built_in">check_inventory</span>(<span class="hljs-string">"INVALID_ID"</span>)
assert result[<span class="hljs-string">"status"</span>] == <span class="hljs-string">"error"</span>
assert <span class="hljs-string">"error_message"</span> in result
</code></pre>
<p><strong>ç¬¬2å±‚ï¼šè½¨è¿¹è¯„ä¼°ï¼ˆç¨‹åºæ­£ç¡®æ€§ï¼‰</strong></p>
<ul>
<li>éªŒè¯ReActå¾ªç¯çš„æ¯ä¸ªæ­¥éª¤ï¼šæ¨ç†â†’è¡ŒåŠ¨â†’è§‚å¯Ÿ</li>
<li>æ£€æŸ¥å·¥å…·é€‰æ‹©çš„å‡†ç¡®æ€§å’Œå‚æ•°ç”Ÿæˆçš„æ­£ç¡®æ€§</li>
<li>è¯„ä¼°å¤šæ­¥æ¨ç†é“¾çš„é€»è¾‘è¿è´¯æ€§</li>
<li>é€šè¿‡Cloud Traceå¯è§†åŒ–å®Œæ•´æ‰§è¡Œè½¨è¿¹</li>
</ul>
<p><strong>ç¬¬3å±‚ï¼šç»“æœè¯„ä¼°ï¼ˆè¯­ä¹‰æ­£ç¡®æ€§ï¼‰</strong></p>
<ul>
<li>äº‹å®å‡†ç¡®æ€§å’Œä¿¡æ¯æ¥æºéªŒè¯</li>
<li>å“åº”çš„æœ‰ç”¨æ€§å’Œè¯­è°ƒé€‚å½“æ€§</li>
<li>ä¿¡æ¯å®Œæ•´æ€§å’Œç”¨æˆ·éœ€æ±‚åŒ¹é…åº¦</li>
<li>é›†æˆVertex AIçš„Gen AIè¯„ä¼°æœåŠ¡è¿›è¡ŒLLM-as-judgeè¯„åˆ†</li>
</ul>
<p><strong>ç¬¬4å±‚ï¼šç³»ç»Ÿçº§ç›‘æ§ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</strong></p>
<ul>
<li>å·¥å…·è°ƒç”¨å¤±è´¥ç‡å’Œç”¨æˆ·åé¦ˆè¯„åˆ†</li>
<li>è½¨è¿¹æŒ‡æ ‡ï¼ˆæ¯ä»»åŠ¡çš„ReActå¾ªç¯æ•°ï¼‰</li>
<li>ç«¯åˆ°ç«¯å»¶è¿Ÿå’Œèµ„æºåˆ©ç”¨ç‡</li>
<li>å®æ—¶æ€§èƒ½ç›‘æ§å’Œè¡Œä¸ºæ¼‚ç§»æ£€æµ‹</li>
</ul>
<p><strong>Firebase Studioï¼šå…¨æ ˆAIå¼€å‘åŠ é€Ÿå™¨</strong></p>
<p>ç™½çš®ä¹¦ç‰¹åˆ«å¼ºè°ƒäº†Firebase Studioä½œä¸ºå®Œæ•´AIåº”ç”¨å¼€å‘è§£å†³æ–¹æ¡ˆçš„é‡è¦æ€§ã€‚ä»…æœ‰åç«¯Agentæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦æ„å»ºå®Œæ•´çš„å…¨æ ˆåº”ç”¨ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç•Œé¢ã€æ•°æ®åº“å’Œæ‰˜ç®¡æœåŠ¡ã€‚</p>
<p><strong>Firebase Studioæ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li><strong>å¿«é€Ÿè®¾ç½®</strong>ï¼šä½¿ç”¨App Prototyping Agenté€šè¿‡è‡ªç„¶è¯­è¨€ã€æ¨¡å‹å›¾æˆ–æˆªå›¾åˆ›å»ºæ–°é¡¹ç›®</li>
<li><strong>Geminié›†æˆ</strong>ï¼šåœ¨ç¼–ç ã€è°ƒè¯•ã€æµ‹è¯•ã€é‡æ„ã€è§£é‡Šå’Œæ–‡æ¡£ç¼–å†™ç­‰ä»»åŠ¡ä¸­æä¾›AIè¾…åŠ©</li>
<li><strong>åä½œåŠŸèƒ½</strong>ï¼šä¸å›¢é˜Ÿæˆå‘˜å…±äº«å·¥ä½œç©ºé—´ï¼Œä¸ºæ—©æœŸæµ‹è¯•è€…æä¾›åº”ç”¨é¢„è§ˆURL</li>
<li><strong>ä¼˜åŒ–å·¥å…·</strong>ï¼šé€šè¿‡å†…ç½®Webé¢„è§ˆå’ŒAndroidæ¨¡æ‹Ÿå™¨é¢„è§ˆåº”ç”¨ï¼Œè®¿é—®Open VSXæ³¨å†Œè¡¨ä¸­çš„æ•°åƒä¸ªæ‰©å±•</li>
<li><strong>éƒ¨ç½²é€‰é¡¹</strong>ï¼šä¸€é”®å‘å¸ƒåˆ°Firebase App Hostingï¼Œæˆ–éƒ¨ç½²åˆ°Cloud Runã€Firebase Hostingç­‰</li>
</ul>
<p><strong>å®Œæ•´æŠ€æœ¯æ ˆç»„åˆ</strong>ï¼š</p>
<ul>
<li>ADKï¼šAgentåç«¯é€»è¾‘</li>
<li>Agent Starter Packï¼šç”Ÿäº§åŸºç¡€è®¾æ–½</li>
<li>Firebase Studioï¼šå…¨æ ˆåº”ç”¨å¼€å‘</li>
</ul>
<p>è¿™ç§ç»„åˆä¸ºåˆåˆ›ä¼ä¸šæä¾›äº†æ„å»ºå’Œéƒ¨ç½²å¼ºå¤§AI Agentç³»ç»Ÿçš„å®Œæ•´ç«¯åˆ°ç«¯å·¥å…·åŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f9debf8667d4ce1bee774239a32768a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=qch9lLbiBOnWbe6b9QxB%2FNKFoqY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">éƒ¨ç½²ç­–ç•¥çš„æœ€ä½³å®è·µ</h3>
<p><strong>å•å‘½ä»¤é¡¹ç›®åˆå§‹åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(line
uvx agent-starter-pack create my-agent -a adk<span class="hljs-variable">@gemini-fullstack</span>
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤åˆ›å»ºå®Œæ•´çš„ç”Ÿäº§å°±ç»ªé¡¹ç›®ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„åŸºç¡€è®¾æ–½ä»£ç ã€CI/CDé…ç½®å’Œè¯„ä¼°æ¡†æ¶ã€‚</p>
<p><strong>Agentèº«ä»½å®šä¹‰ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
from adk import LlmAgent
# å®šä¹‰è½¯ä»¶BugåŠ©æ‰‹ä»£ç†
software_bug_triage_agent = <span class="hljs-built_in">LlmAgent</span>(
name=<span class="hljs-string">"software_bug_triage_agent"</span>,
description=<span class="hljs-string">"åˆ†ææ–°è½¯ä»¶é”™è¯¯æŠ¥å‘Šï¼Œåˆ†ç±»ä¼˜å…ˆçº§ï¼Œåˆ†é…ç»™æ­£ç¡®çš„å·¥ç¨‹å›¢é˜Ÿ"</span>,
model=<span class="hljs-string">"gemini-2.5-flash"</span>,
instructions=<span class="hljs-string">""</span>"
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å·¥ç¨‹ç»ç†ï¼Œè´Ÿè´£åˆ†æè½¯ä»¶é”™è¯¯æŠ¥å‘Šã€‚
ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥æ”¶é›†ä¿¡æ¯ï¼š
- <span class="hljs-built_in">get_user_details</span>(user_id): è·å–æŠ¥å‘Šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
- <span class="hljs-built_in">search_codebase</span>(file_name): åœ¨ä»£ç åº“ä¸­æœç´¢ç›¸å…³æ–‡ä»¶
- <span class="hljs-built_in">create_jira_ticket</span>(...): åœ¨é¡¹ç›®ç®¡ç†ç³»ç»Ÿä¸­åˆ›å»ºå·¥å•
æœ€ç»ˆè¾“å‡ºåº”è¯¥æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼ŒåŒ…å«ä¼˜å…ˆçº§åˆ†ç±»å’Œå›¢é˜Ÿåˆ†é…å»ºè®®ã€‚
<span class="hljs-string">""</span>",
tools=[
get_user_details,
search_codebase,
create_jira_ticket
]
)
</code></pre>
<p><strong>äº”æ­¥å¼€å‘å·¥ä½œæµ</strong>ï¼š</p>
<ol start="0">
<li><strong>è„šæ‰‹æ¶ç”Ÿæˆ</strong>ï¼šAgent Starter Packåˆ›å»ºé¡¹ç›®ç»“æ„</li>
<li><strong>åº”ç”¨å¼€å‘</strong>ï¼šä½¿ç”¨ADKç¼–å†™ä»£ç†é€»è¾‘å’Œå·¥å…·å®šä¹‰</li>
<li><strong>è‡ªåŠ¨åŒ–è§¦å‘</strong>ï¼šä»£ç æäº¤è‡ªåŠ¨è§¦å‘CI/CDç®¡é“</li>
<li><strong>æŒç»­è¯„ä¼°</strong>ï¼šè‡ªåŠ¨æ‰§è¡Œé‡åŒ–è¯„ä¼°éªŒè¯æ€§èƒ½å’Œå®‰å…¨æ€§</li>
<li><strong>å¯ä¿¡éƒ¨ç½²</strong>ï¼šè¯„ä¼°é€šè¿‡åè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</li>
</ol>
<p><strong>å®‰å…¨æ€§å’Œåˆè§„æ€§è€ƒè™‘</strong>ï¼š</p>
<ul>
<li>åŸºäºæœ€å°æƒé™åŸåˆ™çš„IAMè§’è‰²é…ç½®</li>
<li>è¾“å…¥éªŒè¯å’Œè¾“å‡ºè¿‡æ»¤çš„åº”ç”¨çº§é˜²æŠ¤</li>
<li>è‡ªåŠ¨åŒ–å®‰å…¨æµ‹è¯•é›†æˆåˆ°CI/CDæµç¨‹</li>
<li>è¯¦ç»†çš„å®¡è®¡æ—¥å¿—å’Œåˆè§„æŠ¥å‘Šç”Ÿæˆ</li>
</ul>
<hr/>
<h2 data-id="heading-16">PART 05 å®æˆ˜åº”ç”¨åœºæ™¯ï¼šä¼ä¸šçº§AI Agentçš„ä»·å€¼å®ç°</h2>
<h3 data-id="heading-17">å®¢æˆ·æœåŠ¡è‡ªåŠ¨åŒ–çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­è¯¦ç»†æè¿°äº†ä¸€ä¸ªè½¯ä»¶BugåŠ©æ‰‹çš„æ„å»ºè¿‡ç¨‹ï¼Œè¿™ä¸ªæ¡ˆä¾‹å®Œç¾å±•ç¤ºäº†ä¼ä¸šçº§AI Agentçš„å®é™…ä»·å€¼ï¼š</p>
<p><strong>ä»£ç†èº«ä»½å®šä¹‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ounter(lineounter(lineounter(lineounter(lineounter(line
<span class="hljs-attr">software_bug_triage_agent</span> = LlmAgent(
<span class="hljs-attr">name</span>=<span class="hljs-string">"software_bug_triage_agent"</span>,
<span class="hljs-attr">description</span>=<span class="hljs-string">"åˆ†ææ–°è½¯ä»¶é”™è¯¯æŠ¥å‘Šï¼Œåˆ†ç±»ä¼˜å…ˆçº§ï¼Œåˆ†é…ç»™æ­£ç¡®çš„å·¥ç¨‹å›¢é˜Ÿ"</span>,
<span class="hljs-attr">model</span>=<span class="hljs-string">"gemini-2.5-flash"</span>
)
</code></pre>
<p><strong>æ ¸å¿ƒå·¥å…·é›†æˆ</strong>ï¼š</p>
<ul>
<li><code>get_user_details(user_id)</code>ï¼šä»CRMç³»ç»Ÿè·å–ç”¨æˆ·ä¿¡æ¯</li>
<li><code>search_codebase(file_name)</code>ï¼šåœ¨ä»£ç åº“ä¸­æœç´¢ç›¸å…³æ–‡ä»¶</li>
<li><code>create_jira_ticket(...)</code>ï¼šåœ¨é¡¹ç›®ç®¡ç†ç³»ç»Ÿä¸­åˆ›å»ºå·¥å•</li>
</ul>
<p><strong>ä¸šåŠ¡ä»·å€¼é‡åŒ–</strong>ï¼š</p>
<ul>
<li>å¹³å‡å¤„ç†æ—¶é—´ä»30åˆ†é’Ÿé™ä½åˆ°2åˆ†é’Ÿ</li>
<li>åˆ†ç±»å‡†ç¡®ç‡è¾¾åˆ°95%ä»¥ä¸Š</li>
<li>å·¥ç¨‹å›¢é˜Ÿå·¥ä½œæ•ˆç‡æå‡40%</li>
<li>å®¢æˆ·æ»¡æ„åº¦æ˜¾è‘—æ”¹å–„</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eedd5b3c5d6481f982e2b7c4b2e8341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764644091&amp;x-signature=NzrrB3wlni6KA%2BXPhaY%2FnHF2wyg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">Boxå…¬å¸çš„å†…å®¹ç®¡ç†é©å‘½</h3>
<p>Boxå…¬å¸çš„æ¡ˆä¾‹å±•ç¤ºäº†AI Agentåœ¨ä¼ä¸šå†…å®¹ç®¡ç†é¢†åŸŸçš„å˜é©æ€§å½±å“ï¼š</p>
<p><strong>æŒ‘æˆ˜åœºæ™¯</strong>ï¼šå‘˜å·¥éœ€è¦åœ¨æµ·é‡æ–‡æ¡£ä¸­æœç´¢å’Œè§£é‡Šä¿¡æ¯ï¼Œå½±å“åˆè§„æ£€æŸ¥ã€åˆåŒç®¡ç†ã€è´·æ¬¾å®¡æ‰¹ç­‰å…³é”®ä¸šåŠ¡æµç¨‹çš„æ•ˆç‡ã€‚</p>
<p><strong>æŠ€æœ¯æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åŸºäºADKå’ŒGeminiæ„å»ºA2Aåè®®å…¼å®¹çš„ä»£ç†</li>
<li>ç›´æ¥è¿æ¥Box Intelligent Content Cloud</li>
<li>æ”¯æŒè‡ªç„¶è¯­è¨€å¤æ‚æŸ¥è¯¢å’Œä¸Šä¸‹æ–‡åŒ–ç­”æ¡ˆç”Ÿæˆ</li>
</ul>
<p><strong>ä¸šåŠ¡è½¬å‹</strong>ï¼š</p>
<ul>
<li>å†…å®¹ä¸­å¿ƒåŒ–å·¥ä½œæµç¨‹æ˜¾è‘—åŠ é€Ÿ</li>
<li>å†³ç­–è´¨é‡å¤§å¹…æå‡</li>
<li>ä¸ºæœªæ¥çš„ç”µå­ç­¾åå’Œå®¡æ‰¹è‡ªåŠ¨åŒ–å¥ å®šåŸºç¡€</li>
</ul>
<h3 data-id="heading-19">BioCorteXçš„è¯ç‰©å‘ç°åŠ é€Ÿ</h3>
<p>BioCorteXåœ¨ç”Ÿå‘½ç§‘å­¦é¢†åŸŸçš„åº”ç”¨å±•ç¤ºäº†AI Agentåœ¨é«˜åº¦ä¸“ä¸šåŒ–é¢†åŸŸçš„æ½œåŠ›ï¼Œè¿™æ˜¯ç™½çš®ä¹¦ä¸­æœ€å…·æŠ€æœ¯æŒ‘æˆ˜æ€§çš„æ¡ˆä¾‹ï¼š</p>
<p><strong>è¡Œä¸šæŒ‘æˆ˜</strong>ï¼š åœ¨ç”Ÿå‘½ç§‘å­¦é¢†åŸŸï¼Œå°†åˆ†æ•£çš„æ•°æ®é›†è¿æ¥å’Œè½¬æ¢ä¸ºå•†ä¸šç›¸å…³çŸ¥è¯†æ—¢ç¼“æ…¢åˆå……æ»¡ä¸ç¡®å®šæ€§ã€‚å‡è®¾æµ‹è¯•å¯èƒ½éœ€è¦æ•°å¹´æ—¶é—´ï¼Œå—åˆ°æ¨¡å‹ä¸ä½³ã€ç†è®ºå†²çªå’Œç”Ÿç‰©å­¦å¤æ‚æ€§çš„é˜»ç¢ã€‚</p>
<p><strong>åˆ›æ–°è§£å†³æ–¹æ¡ˆ</strong>ï¼š BioCorteXæ„å»ºäº†ä¸€ä¸ªåŸºäºGCPçš„å¤šä»£ç†ç³»ç»Ÿï¼Œä»ä¸‰ä¸ªç»´åº¦å®¡æŸ¥å‡è®¾ï¼šç”Ÿç‰©å¯è¡Œæ€§ã€ç°å®ä¸–ç•Œä¸´åºŠç›¸å…³æ€§å’Œå•†ä¸šé‡è¦æ€§ã€‚è¯¥ç³»ç»Ÿä½¿ç”¨Geminié©±åŠ¨çš„ä»£ç†ã€ADKå’ŒGraphRAGæ¥å¯¼èˆªåŒ…å«440äº¿è¿æ¥çš„å…¨çƒæ ·æœ¬çŸ¥è¯†å›¾è°±â€”â€”å…¨éƒ¨é€šè¿‡A2Aåè®®è¿›è¡Œç¼–æ’ã€‚</p>
<p><strong>æŠ€æœ¯ç‰¹è‰²</strong>ï¼š</p>
<ul>
<li><strong>Carbon Graphä»£ç†çš„ç‹¬ç‰¹æ€§</strong>ï¼šä¸å…¶ä»–ä»£ç†ä¸åŒï¼Œå®ƒä»¬å¤„ç†çš„æ˜¯äº‹å®è€Œéè§‚ç‚¹æˆ–å…³è”ã€‚é€šè¿‡éå†ä¸–ç•Œæœ€å¤§çš„æœºåˆ¶ç”Ÿç‰©å­¦çŸ¥è¯†å›¾è°±ï¼ˆè€Œä¸æ˜¯ä½¿ç”¨LLMï¼‰ï¼ŒCarbon Graphä»£ç†ä¸å»ºè®®å‡è®¾ï¼Œè€Œæ˜¯æµ‹è¯•å…¶åˆç†æ€§ã€ä¸´åºŠç›¸å…³æ€§å’Œå•†ä¸šæ–¹é¢</li>
<li><strong>è·¨éƒ¨é—¨å¯¹é½</strong>ï¼šå®ç°ç ”å‘ã€ç›‘ç®¡å’Œå•†ä¸šå›¢é˜Ÿåœ¨ç»„ç»‡å†…çš„å®Œå…¨å¯¹é½</li>
</ul>
<p><strong>ä¸šåŠ¡è½¬å‹</strong>ï¼š</p>
<ul>
<li><strong>æ—¶é—´å‹ç¼©</strong>ï¼šåŸæœ¬éœ€è¦æ•°å¹´çš„å·¥ä½œç°åœ¨åªéœ€å‡ å¤©å®Œæˆ</li>
<li><strong>é€æ˜å†³ç­–</strong>ï¼šå‘æŠ•èµ„ç»„åˆçš„å…³é”®å†³ç­–è€…æä¾›å®Œå…¨é€æ˜çš„åœºæ™¯è§„åˆ’</li>
<li><strong>ç§‘å­¦æ”¯æ’‘</strong>ï¼šä»¥æ·±åº¦ç§‘å­¦çŸ¥è¯†æ”¯æ’‘é«˜å±‚å•†ä¸šè€ƒè™‘</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šåŠ é€Ÿæ–°æœºåˆ¶å’Œæ²»ç–—é¢†åŸŸçš„æµ‹è¯•ï¼ŒåŒæ—¶å‡å°‘æ•´ä¸ªç®¡é“çš„æµªè´¹</li>
</ul>
<h3 data-id="heading-20">Zoomçš„æ™ºèƒ½ä¼šè®®è°ƒåº¦</h3>
<p>Zoom AI Companionä¸Google Agentspaceçš„é›†æˆæ¡ˆä¾‹å±•ç¤ºäº†è·¨å¹³å°AIåä½œçš„å¯èƒ½æ€§ï¼Œä½“ç°äº†A2Aåè®®çš„å®é™…ä»·å€¼ï¼š</p>
<p><strong>æˆ˜ç•¥èƒŒæ™¯</strong>ï¼š Zoomçš„AIä¼˜å…ˆç­–ç•¥ä¸“æ³¨äºå°†AI Companionè½¬å˜ä¸ºå®Œå…¨ä»£ç†æ¡†æ¶â€”â€”ä¸ä»…èƒ½å¤Ÿè¿›è¡Œé«˜çº§æ¨ç†å’Œä»»åŠ¡ç¼–æ’ï¼Œè¿˜èƒ½ä¸å®¢æˆ·çš„å…³é”®ç¬¬ä¸‰æ–¹ç³»ç»Ÿæ— ç¼é›†æˆã€‚é€šè¿‡ä¸å…¶ä»–AIä»£ç†çš„åä½œï¼ŒZoomé€šè¿‡å¼€æ”¾ã€å¯äº’æ“ä½œçš„ç”Ÿæ€ç³»ç»Ÿæ¨åŠ¨æ›´æœ‰æ„ä¹‰çš„å·¥ä½œæˆæœã€‚</p>
<p><strong>æŠ€æœ¯å®ç°</strong>ï¼š Zoom AI Companionæ­£åœ¨ä¸Google Agentspaceé›†æˆä»¥ç®€åŒ–ä¼šè®®è°ƒåº¦ã€‚è¿™ç§åä½œå°†å…è®¸A2Aæ”¯æŒçš„AIä»£ç†è‡ªåŠ¨ä»Gmailä¸Šä¸‹æ–‡è°ƒåº¦Zoomä¼šè®®ï¼Œæ›´æ–°Google Calendarï¼Œå¹¶é€šçŸ¥å‚ä¸è€…ï¼Œæ¶ˆé™¤æ‰‹åŠ¨è°ƒåº¦çš„æ¥å›æ²Ÿé€šã€‚è¯¥åŠŸèƒ½è®¡åˆ’åœ¨ä»Šå¹´å¤å­£æ™šäº›æ—¶å€™æ¨å‡ºã€‚</p>
<p><strong>å•†ä¸šå½±å“</strong>ï¼š</p>
<ul>
<li><strong>é™ä½æŠ€æœ¯é—¨æ§›</strong>ï¼šå‡å°‘è·¨å¹³å°AIé›†æˆçš„æŠ€æœ¯éšœç¢</li>
<li><strong>æ— ç¼äº¤äº’</strong>ï¼šZoom AI Companionä¸å¤–éƒ¨A2Aæ”¯æŒçš„ä»£ç†ä¹‹é—´æ— éœ€è‡ªå®šä¹‰ä»£ç å³å¯å®ç°æ— ç¼äº¤äº’</li>
<li><strong>å·¥ä½œæµè‡ªåŠ¨åŒ–</strong>ï¼šå¢å¼ºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹¶æé«˜ä¼ä¸šå®¢æˆ·çš„æ•ˆç‡</li>
<li><strong>æœªæ¥æ‰©å±•</strong>ï¼šä¸ºæ›´å¤æ‚çš„å¤šä»£ç†AIäº¤äº’æä¾›æœªæ¥æ”¯æŒ</li>
</ul>
<p><strong>A2Aåè®®ä»·å€¼ä½“ç°</strong>ï¼š æ­£å¦‚Zoomæ‰€è¯´ï¼š"æˆ‘ä»¬å¯¹A2Aåè®®çš„è´¡çŒ®ä½¿å¾—ä¸Google Cloudå’Œå…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°çš„æ›´æ·±å±‚é›†æˆæˆä¸ºå¯èƒ½ï¼Œä¸ºå®¢æˆ·æä¾›çµæ´»æ€§å’Œé€‰æ‹©ã€‚"</p>
<hr/>
<h2 data-id="heading-21">PART 06 æŠ€æœ¯å¯¹æ¯”ä¸é€‰å‹ï¼šè°·æ­ŒAI Agentç”Ÿæ€çš„ç«äº‰ä¼˜åŠ¿</h2>
<h3 data-id="heading-22">å¼€å‘æ–¹å¼å¯¹æ¯”ï¼šä»£ç ä¼˜å…ˆ vs åº”ç”¨ä¼˜å…ˆ</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­æ˜ç¡®æå‡ºäº†ä¸¤ç§ä¸»è¦çš„AI Agentå¼€å‘è·¯å¾„ï¼Œæ¯ç§éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ï¼š</p>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ADK (ä»£ç ä¼˜å…ˆ)</th><th>Google Agentspace (åº”ç”¨ä¼˜å…ˆ)</th></tr></thead><tbody><tr><td><strong>ç›®æ ‡ç”¨æˆ·</strong></td><td>å¼€å‘è€…ã€æŠ€æœ¯å›¢é˜Ÿ</td><td>éæŠ€æœ¯å›¢é˜Ÿã€ä¸šåŠ¡ä¸“å®¶</td></tr><tr><td><strong>å¼€å‘å¤æ‚åº¦</strong></td><td>é«˜ï¼Œéœ€è¦ç¼–ç¨‹æŠ€èƒ½</td><td>ä½ï¼Œå¯è§†åŒ–é…ç½®</td></tr><tr><td><strong>å®šåˆ¶èƒ½åŠ›</strong></td><td>æé«˜ï¼Œå®Œå…¨æ§åˆ¶</td><td>ä¸­ç­‰ï¼Œæ¨¡æ¿åŒ–é…ç½®</td></tr><tr><td><strong>éƒ¨ç½²çµæ´»æ€§</strong></td><td>æ”¯æŒå¤šç§ç¯å¢ƒ</td><td>ä¸»è¦åœ¨è°·æ­Œäº‘ç”Ÿæ€</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>éœ€è¦æŠ€æœ¯å›¢é˜Ÿ</td><td>è‡ªåŠ¨åŒ–è¿ç»´</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>æ ‡å‡†åŒ–å·¥ä½œæµ</td></tr></tbody></table>
<h3 data-id="heading-23">æ¨¡å‹é€‰æ‹©çš„ç­–ç•¥æ¡†æ¶</h3>
<p>è°·æ­Œæå‡ºäº†åŸºäºèƒ½åŠ›-æˆæœ¬-å»¶è¿Ÿä¸‰ç»´æƒè¡¡çš„æ¨¡å‹é€‰æ‹©ç­–ç•¥ï¼š</p>
<p><strong>Gemini 2.5 Flash-Lite</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ—©æœŸåŸå‹å’Œå¤§è§„æ¨¡ä»»åŠ¡</li>
<li>ç‰¹ç‚¹ï¼šæœ€å…·æˆæœ¬æ•ˆç›Šå’Œæœ€å¿«é€Ÿåº¦</li>
<li>ä¼˜åŠ¿ï¼šé«˜å®¹é‡ã€ä½å»¶è¿Ÿæ•æ„Ÿä»»åŠ¡å¦‚ç¿»è¯‘å’Œåˆ†ç±»</li>
</ul>
<p><strong>Gemini 2.5 Flash</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šé«˜å®¹é‡ã€é«˜è´¨é‡åº”ç”¨</li>
<li>ç‰¹ç‚¹ï¼šè´¨é‡ã€æˆæœ¬ã€é€Ÿåº¦çš„æœ€ä½³å¹³è¡¡</li>
<li>ä¼˜åŠ¿ï¼šç”Ÿäº§åº”ç”¨çš„ç†æƒ³é€‰æ‹©</li>
</ul>
<p><strong>Gemini 2.5 Pro</strong>ï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå¤æ‚å¤šæ­¥æ¨ç†å’Œå‰æ²¿ä»£ç ç”Ÿæˆ</li>
<li>ç‰¹ç‚¹ï¼šæœ€å¼ºèƒ½åŠ›ï¼Œæ€§èƒ½æ— å¦¥å</li>
<li>ä¼˜åŠ¿ï¼šåœ¨ç¼–ç¨‹ï¼ˆAider Polyglot 82.2%ï¼‰å’Œæ¨ç†ï¼ˆGPQA diamond 86.4%ï¼‰åŸºå‡†æµ‹è¯•ä¸­è¾¾åˆ°æœ€å…ˆè¿›ç»“æœ</li>
<li>åˆ›æ–°ç‰¹æ€§ï¼šæ”¯æŒå¯é…ç½®çš„æ¨ç†æ¨¡å¼ï¼Œé€šè¿‡åˆ†é…æ›´å¤šæ¨ç†ä»¤ç‰Œæ¥æ¢å–æ›´é«˜çš„å‡†ç¡®æ€§</li>
</ul>
<h3 data-id="heading-24">éƒ¨ç½²ç¯å¢ƒçš„æŠ€æœ¯å†³ç­–</h3>
<p><strong>Vertex AI Agent Engine</strong>Â vsÂ <strong>Cloud Run</strong>Â vsÂ <strong>GKE</strong>çš„é€‰æ‹©çŸ©é˜µï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
æŠ€æœ¯é€‰å‹å†³ç­–æ ‘ï¼š
éƒ¨ç½²ç¯å¢ƒé€‰æ‹©
â”‚
æ˜¯å¦éœ€è¦ä¸“ä¸šåŒ–AIåŠŸèƒ½ï¼Ÿ
â”œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
æ˜¯ Â  Â  Â  Â  Â  å¦
â”‚ Â  Â  Â  Â  Â   â”‚
Vertex AI Â  Â   æ˜¯å¦æœ‰K8sç»éªŒï¼Ÿ
Agent Engine Â  â”œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
æ˜¯ Â  Â  Â  Â  Â  å¦
â”‚ Â  Â  Â  Â  Â   â”‚
GKE Â  Â  Â  Cloud Run
</code></pre>
<p><strong>æˆæœ¬æ•ˆç›Šåˆ†æ</strong>ï¼š</p>
<ul>
<li>Vertex AI Agent Engineï¼šæŒ‰ä½¿ç”¨é‡ä»˜è´¹ï¼Œé›¶è¿ç»´æˆæœ¬</li>
<li>Cloud Runï¼šæ— æœåŠ¡å™¨æ¨¡å¼ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹</li>
<li>GKEï¼šå›ºå®šåŸºç¡€è®¾æ–½æˆæœ¬ï¼Œä½†æä¾›æœ€å¤§æ§åˆ¶æƒ</li>
</ul>
<h3 data-id="heading-25">ä¸ç«å“æŠ€æœ¯æ–¹æ¡ˆçš„å¯¹æ¯”</h3>
<p><strong>è°·æ­Œ vs OpenAIç”Ÿæ€</strong>ï¼š</p>
<ul>
<li>è°·æ­Œï¼šå®Œæ•´çš„ä¼ä¸šçº§ç”Ÿæ€ç³»ç»Ÿï¼Œä»å¼€å‘åˆ°éƒ¨ç½²çš„å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆ</li>
<li>OpenAIï¼šå¼ºå¤§çš„æ¨¡å‹èƒ½åŠ›ï¼Œä½†éœ€è¦ç¬¬ä¸‰æ–¹å·¥å…·å®Œå–„ç”Ÿæ€</li>
</ul>
<p><strong>è°·æ­Œ vs å¼€æºæ¡†æ¶ï¼ˆLangChainã€CrewAIï¼‰</strong> ï¼š</p>
<ul>
<li>è°·æ­Œï¼šæ‰˜ç®¡æœåŠ¡ + å¼€æºæ¡†æ¶ï¼Œå…¼é¡¾æ˜“ç”¨æ€§å’Œçµæ´»æ€§</li>
<li>å¼€æºï¼šå®Œå…¨å¯æ§ï¼Œä½†éœ€è¦è‡ªå»ºåŸºç¡€è®¾æ–½å’Œè¿ç»´èƒ½åŠ›</li>
</ul>
<p><strong>æŠ€æœ¯æŠ¤åŸæ²³åˆ†æ</strong>ï¼š</p>
<ul>
<li><strong>æ ‡å‡†åŒ–ä¼˜åŠ¿</strong>ï¼šMCPå’ŒA2Aåè®®çš„å¼€æ”¾æ ‡å‡†æ¨åŠ¨</li>
<li><strong>ç”Ÿæ€å®Œæ•´æ€§</strong>ï¼šä»æ¨¡å‹ã€å·¥å…·åˆ°éƒ¨ç½²çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆ</li>
<li><strong>ä¼ä¸šçº§ç‰¹æ€§</strong>ï¼šå®‰å…¨ã€åˆè§„ã€å¯è§‚æµ‹æ€§çš„åŸç”Ÿæ”¯æŒ</li>
<li><strong>æŒç»­åˆ›æ–°</strong>ï¼šä¸Google Researchçš„æ·±åº¦ç»“åˆ</li>
<li><strong>å¼€æºç­–ç•¥</strong>ï¼šADKåœ¨4ä¸ªæœˆå†…è¶…è¿‡100ä¸‡ä¸‹è½½é‡ï¼Œä½“ç°äº†å¼ºå¤§çš„ç¤¾åŒºå½±å“åŠ›</li>
</ul>
<p><strong>Agent Gardenç”Ÿæ€ç³»ç»Ÿ</strong></p>
<p>ç™½çš®ä¹¦ç‰¹åˆ«æåˆ°äº†Agent Gardenï¼Œè¿™æ˜¯è°·æ­Œæ„å»ºçš„é¢„æ„å»ºADKä»£ç†éƒ¨ç½²å¹³å°ã€‚å¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li>éƒ¨ç½²æ”¯æŒæ•°æ®æ¨ç†å’Œä»£ç†é—´åä½œçš„é¢„æ„å»ºADKä»£ç†</li>
<li>ä¸è‡ªå»ºä»£ç†æ··åˆåŒ¹é…ï¼ŒåŠ é€Ÿé¡¹ç›®äº¤ä»˜</li>
<li>é€šè¿‡Google Cloud Marketplaceè½»æ¾é›†æˆç¬¬ä¸‰æ–¹ä»£ç†</li>
<li>åˆ©ç”¨å¼€æ”¾ç”Ÿæ€ç³»ç»Ÿé¿å…ä¾›åº”å•†é”å®š</li>
</ul>
<hr/>
<h2 data-id="heading-26">PART 07 å‘å±•è¶‹åŠ¿ä¸å±•æœ›ï¼šAI AgentæŠ€æœ¯çš„æœªæ¥æ¼”è¿›</h2>
<h3 data-id="heading-27">å¤šæ¨¡æ€æ™ºèƒ½çš„æŠ€æœ¯çªç ´</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­å¼ºè°ƒäº†AI Agentå‘å¤šæ¨¡æ€èƒ½åŠ›æ¼”è¿›çš„é‡è¦è¶‹åŠ¿ã€‚è¿™ä¸ä»…ä»…æ˜¯æŠ€æœ¯å‡çº§ï¼Œè€Œæ˜¯è®¤çŸ¥æ¶æ„çš„æ ¹æœ¬æ€§å˜é©ï¼š</p>
<p><strong>è§†è§‰ç†è§£èƒ½åŠ›çš„æ·±åº¦é›†æˆ</strong>ï¼š</p>
<ul>
<li>Gemini 2.5 Flash Imageï¼ˆä»£å·Nano Bananaï¼‰æ”¯æŒå›¾åƒç”Ÿæˆå’Œç¼–è¾‘</li>
<li>èƒ½å¤Ÿåˆ†æç…§ç‰‡è¯†åˆ«ç‰¹å®šç‰©ç§ï¼Œç„¶åè‡ªä¸»æ£€ç´¢è¯¦ç»†æŠ¤ç†è¯´æ˜</li>
<li>æ”¯æŒå¤šå›¾åƒæ··åˆã€è§’è‰²ä¸€è‡´æ€§ç»´æŠ¤ã€è‡ªç„¶è¯­è¨€å®šå‘å˜æ¢</li>
</ul>
<p><strong>éŸ³è§†é¢‘å¤„ç†çš„æ™ºèƒ½åŒ–</strong>ï¼š</p>
<ul>
<li>å®æ—¶éŸ³é¢‘æµå¤„ç†ï¼Œä¸ä»…è½¬å½•æ–‡å­—è¿˜èƒ½åˆ¤æ–­æƒ…æ„ŸçŠ¶æ€</li>
<li>Veoè§†é¢‘ç”Ÿæˆæ¨¡å‹æ”¯æŒæ–‡æœ¬åˆ°è§†é¢‘çš„åˆ›æ„è¡¨è¾¾</li>
<li>æ”¯æŒä»éŸ³é¢‘ä¸­æå–æƒ…æ„Ÿä¿¡å·ç”¨äºå®¢æœå·¥å•å‡çº§</li>
</ul>
<p><strong>è·¨æ¨¡æ€æ¨ç†çš„è®¤çŸ¥çªç ´</strong>ï¼š ä¼ ç»ŸAI Agentå±€é™äºæ–‡æœ¬å¤„ç†ï¼Œè€Œæ–°ä¸€ä»£ç³»ç»Ÿèƒ½å¤Ÿåœ¨ä¸åŒæ•°æ®ç±»å‹é—´è¿›è¡Œæ·±åº¦æ¨ç†ã€‚è¿™ç§èƒ½åŠ›è®©Agentä»"æ•°æ®å¤„ç†å™¨"è¿›åŒ–ä¸ºçœŸæ­£çš„"é—®é¢˜è§£å†³å·¥å…·"ã€‚</p>
<h3 data-id="heading-28">Agent2Agentåä½œç”Ÿæ€çš„æ„å»º</h3>
<p>A2Aï¼ˆAgent2Agentï¼‰åè®®ä»£è¡¨äº†AI AgentæŠ€æœ¯å‘å±•çš„é‡è¦æ–¹å‘â€”â€”ä»å•ä¸€æ™ºèƒ½ä½“åˆ°åä½œæ™ºèƒ½ç½‘ç»œï¼š</p>
<p><strong>å¼€æ”¾äº’æ“ä½œæ ‡å‡†</strong>ï¼š</p>
<ul>
<li>Agent Cardæœºåˆ¶ï¼šæ•°å­—åŒ–"åç‰‡"å¹¿å‘Šä»£ç†èƒ½åŠ›å’Œæ¥å£</li>
<li>ä»»åŠ¡å¯¼å‘æ¶æ„ï¼šå®¢æˆ·ç«¯ä»£ç†å‘æœåŠ¡ç«¯ä»£ç†å‘é€ä»»åŠ¡è¯·æ±‚</li>
<li>æ¨¡æ€æ— å…³é€šä¿¡ï¼šæ”¯æŒæ–‡æœ¬ã€éŸ³é¢‘ã€è§†é¢‘çš„å¤šæ¨¡æ€äº¤äº’</li>
</ul>
<p><strong>ç”Ÿæ€ç³»ç»Ÿæ•ˆåº”</strong>ï¼š</p>
<ul>
<li>ä¸“ä¸šåŒ–åˆ†å·¥ï¼šä¸åŒå‚å•†çš„Agentä¸“æ³¨äºç‰¹å®šé¢†åŸŸ</li>
<li>èƒ½åŠ›ç»„åˆï¼šé€šè¿‡åè®®ç»„åˆå®ç°è¶…è¶Šå•ä¸€Agentçš„å¤æ‚èƒ½åŠ›</li>
<li>æ ‡å‡†åŒ–é™æœ¬ï¼šå‡å°‘å®šåˆ¶é›†æˆçš„å¼€å‘æˆæœ¬</li>
</ul>
<p><strong>å•†ä¸šæ¨¡å¼åˆ›æ–°</strong>ï¼š A2Aåè®®å°†å‚¬ç”Ÿå…¨æ–°çš„å•†ä¸šç”Ÿæ€ï¼Œç±»ä¼¼äºç§»åŠ¨åº”ç”¨å•†åº—æ¨¡å¼ï¼Œä½†é’ˆå¯¹çš„æ˜¯AIèƒ½åŠ›çš„ç»„åˆå’Œäº¤æ˜“ã€‚</p>
<h3 data-id="heading-29">è®°å¿†è’¸é¦æŠ€æœ¯çš„å‰æ²¿æ¢ç´¢</h3>
<p>è°·æ­Œåœ¨ç™½çš®ä¹¦ä¸­æåˆ°äº†"è®°å¿†è’¸é¦"è¿™ä¸€å‰æ²¿æŠ€æœ¯æ–¹å‘ï¼Œè¿™å¯èƒ½æ˜¯AI Agenté•¿æœŸæ™ºèƒ½åŒ–çš„å…³é”®çªç ´ï¼š</p>
<p><strong>æŠ€æœ¯åŸç†</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨LLMåŠ¨æ€å’ŒæŒç»­åœ°å°†é•¿å¯¹è¯å†å²è’¸é¦ä¸ºç´§å‡‘çš„ç»“æ„åŒ–äº‹å®é›†</li>
<li>ä»åŸå§‹å†å²è®°å½•è½¬å‘ç­–åˆ’çš„é•¿æœŸè®°å¿†</li>
<li>æ›´é«˜æ•ˆçš„æ£€ç´¢å’Œä½¿ç”¨æœºåˆ¶</li>
</ul>
<p><strong>Vertex AI Memory Bankçš„å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
# è‡ªåŠ¨åŒ–è’¸é¦ï¼šå¼‚æ­¥å¤„ç†å¯¹è¯å†å²ä»¥è‡ªåŠ¨æå–ç”¨æˆ·ç›¸å…³äº‹å®
memory_bank.<span class="hljs-built_in">generate_memories</span>(conversation_history)
# è¾“å‡ºç¤ºä¾‹ï¼š[<span class="hljs-string">"ç”¨æˆ·åå¥½æ— ç»åœèˆªç­"</span>, <span class="hljs-string">"ç”¨æˆ·çš„ç‹—åå«Fido"</span>]
# ä»£ç†å¯¼å‘è’¸é¦ï¼šAgentä¸»åŠ¨å†³å®šé‡è¦ä¿¡æ¯å†™å…¥è®°å¿†åº“
agent.<span class="hljs-built_in">create_memory</span>(<span class="hljs-string">"ç”¨æˆ·æ˜¯ç´ é£Ÿä¸»ä¹‰è€…ï¼Œå¯¹ä¹³åˆ¶å“è¿‡æ•"</span>)
# åœ¨æœªæ¥ä¼šè¯ä¸­æ£€ç´¢è®°å¿†
relevant_memories = memory_bank.<span class="hljs-built_in">retrieve_memories</span>(
query=<span class="hljs-string">"ç”¨æˆ·çš„é¥®é£Ÿåå¥½"</span>,
similarity_threshold=<span class="hljs-number">0.8</span>
)
</code></pre>
<p><strong>å·¥å…·è®¾è®¡çš„APIå¥‘çº¦ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(<span class="hljs-built_in">lineounter</span>(line
def <span class="hljs-built_in">get_user_details</span>(<span class="hljs-attribute">user_id</span>: str, <span class="hljs-attribute">tool_context</span>: ToolContext) -&gt; <span class="hljs-attribute">dict</span>:
<span class="hljs-string">""</span>"
ä»CRMç³»ç»Ÿè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
<span class="hljs-attribute">Args</span>:
<span class="hljs-attribute">user_id</span>: ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦
<span class="hljs-attribute">tool_context</span>: ADKè‡ªåŠ¨æ³¨å…¥çš„ä¼šè¯çº§çŠ¶æ€å¯¹è±¡
<span class="hljs-attribute">Returns</span>:
<span class="hljs-attribute">dict</span>: åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„å­—å…¸ï¼Œå¿…é¡»åŒ…å«statuså­—æ®µ
{
<span class="hljs-string">"status"</span>: <span class="hljs-string">"success"</span> | <span class="hljs-string">"error"</span>,
<span class="hljs-string">"user_info"</span>: {...} | None,
<span class="hljs-string">"error_message"</span>: str | None
}
<span class="hljs-string">""</span>"
<span class="hljs-attribute">try</span>:
# ä»ä¼šè¯çŠ¶æ€è·å–ç¼“å­˜
if user_id in tool_context.session_state.<span class="hljs-built_in">get</span>(<span class="hljs-string">"user_cache"</span>, {}):
return {
<span class="hljs-string">"status"</span>: <span class="hljs-string">"success"</span>,
<span class="hljs-string">"user_info"</span>: tool_context.session_state[<span class="hljs-string">"user_cache"</span>][user_id]
}
# å®é™…çš„CRMæŸ¥è¯¢é€»è¾‘
user_info = crm_client.<span class="hljs-built_in">get_user</span>(user_id)
# ç¼“å­˜ç»“æœåˆ°ä¼šè¯çŠ¶æ€
if <span class="hljs-string">"user_cache"</span> <span class="hljs-keyword">not</span> in tool_context.<span class="hljs-attribute">session_state</span>:
tool_context.session_state[<span class="hljs-string">"user_cache"</span>] = {}
tool_context.session_state[<span class="hljs-string">"user_cache"</span>][user_id] = user_info
return {
<span class="hljs-string">"status"</span>: <span class="hljs-string">"success"</span>,
<span class="hljs-string">"user_info"</span>: user_info
}
except Exception as <span class="hljs-attribute">e</span>:
return {
<span class="hljs-string">"status"</span>: <span class="hljs-string">"error"</span>,
<span class="hljs-string">"error_message"</span>: <span class="hljs-built_in">str</span>(e)
}
</code></pre>
<p><strong>å•†ä¸šä»·å€¼</strong>ï¼š</p>
<ul>
<li>æ›´äººæ€§åŒ–çš„äº¤äº’ä½“éªŒ</li>
<li>æ˜¾è‘—é™ä½ä¸Šä¸‹æ–‡å¤„ç†æˆæœ¬</li>
<li>æ”¯æŒçœŸæ­£çš„é•¿æœŸå…³ç³»å»ºç«‹</li>
</ul>
<h3 data-id="heading-30">ä¼ä¸šçº§AIæ²»ç†çš„å‘å±•æ–¹å‘</h3>
<p><strong>Secure AI Framework (SAIF)çš„æ·±åº¦åº”ç”¨</strong>ï¼š è°·æ­Œå¼ºè°ƒè´Ÿè´£ä»»AIçš„é‡è¦æ€§ï¼ŒSAIFæ¡†æ¶å°†æˆä¸ºä¼ä¸šAI Agentéƒ¨ç½²çš„æ ‡å‡†å‚è€ƒï¼š</p>
<ul>
<li><strong>å®‰å…¨è®¾è®¡åŸåˆ™</strong>ï¼šä»æ¶æ„è®¾è®¡é˜¶æ®µå°±è€ƒè™‘å®‰å…¨æ€§</li>
<li><strong>éšç§ä¿æŠ¤æœºåˆ¶</strong>ï¼šæ•°æ®å¤„ç†å’Œå­˜å‚¨çš„å…¨é“¾è·¯ä¿æŠ¤</li>
<li><strong>åè§æ£€æµ‹å’Œç¼“è§£</strong>ï¼šè‡ªåŠ¨åŒ–çš„å…¬å¹³æ€§è¯„ä¼°å·¥å…·</li>
<li><strong>é€æ˜åº¦å’Œå¯è§£é‡Šæ€§</strong>ï¼šAgentå†³ç­–è¿‡ç¨‹çš„å¯è¿½æº¯æ€§</li>
</ul>
<p><strong>ç›‘ç®¡åˆè§„çš„è‡ªåŠ¨åŒ–</strong>ï¼š éšç€AIç›‘ç®¡æ¡†æ¶çš„å®Œå–„ï¼Œä¼ä¸šéœ€è¦è‡ªåŠ¨åŒ–çš„åˆè§„æ£€æŸ¥å’ŒæŠ¥å‘Šæœºåˆ¶ã€‚è°·æ­Œçš„AgentOpsæ–¹æ³•è®ºä¸ºæ­¤æä¾›äº†åŸºç¡€æ¡†æ¶ã€‚</p>
<h3 data-id="heading-31">æŠ€æœ¯æ¼”è¿›çš„æˆ˜ç•¥é¢„æµ‹</h3>
<p><strong>çŸ­æœŸè¶‹åŠ¿ï¼ˆ1-2å¹´ï¼‰</strong> ï¼š</p>
<ul>
<li>MCPå’ŒA2Aåè®®çš„å¹¿æ³›é‡‡ç”¨</li>
<li>å¤šæ¨¡æ€Agentèƒ½åŠ›çš„æ ‡å‡†åŒ–</li>
<li>ä¼ä¸šçº§éƒ¨ç½²å·¥å…·çš„æˆç†ŸåŒ–</li>
</ul>
<p><strong>ä¸­æœŸå‘å±•ï¼ˆ3-5å¹´ï¼‰</strong> ï¼š</p>
<ul>
<li>Agentåä½œç½‘ç»œçš„å•†ä¸šåŒ–è¿è¥</li>
<li>è¡Œä¸šä¸“ç”¨Agentçš„æ·±åº¦å®šåˆ¶</li>
<li>è‡ªä¸»å­¦ä¹ å’Œé€‚åº”èƒ½åŠ›çš„çªç ´</li>
</ul>
<p><strong>é•¿æœŸæ„¿æ™¯ï¼ˆ5-10å¹´ï¼‰</strong> ï¼š</p>
<ul>
<li>é€šç”¨AIåŠ©æ‰‹çš„å®ç°</li>
<li>Agenté©±åŠ¨çš„ä¸šåŠ¡æµç¨‹é‡æ„</li>
<li>äººæœºåä½œæ¨¡å¼çš„æ ¹æœ¬æ€§å˜é©</li>
</ul>
<p><strong>Gemini Kitå’ŒNotebookLMçš„æŠ€æœ¯ç¤ºèŒƒ</strong></p>
<p>ç™½çš®ä¹¦ç‰¹åˆ«æåˆ°äº†ä¸¤ä¸ªé‡è¦çš„æŠ€æœ¯å±•ç¤ºï¼š</p>
<p><strong>Gemini Kit</strong>ï¼šä¸ºå¿«é€ŸåŸå‹å¼€å‘æä¾›æ”¯æŒï¼Œè®©åˆåˆ›ä¼ä¸šèƒ½å¤Ÿæ›´å¿«åœ°éªŒè¯AI Agentæ¦‚å¿µå’Œæ„å»ºMVPã€‚</p>
<p><strong>NotebookLM</strong>ï¼šç™½çš®ä¹¦ä¸­çš„æ‰€æœ‰éŸ³é¢‘ç‰ˆæœ¬éƒ½æ˜¯ä½¿ç”¨NotebookLMåˆ›å»ºçš„ï¼Œå±•ç¤ºäº†AIåœ¨å†…å®¹åˆ›ä½œå’ŒçŸ¥è¯†ä¼ æ’­æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚è¿™ç§"AIåˆ›å»ºAIæŒ‡å—çš„éŸ³é¢‘ç‰ˆæœ¬"æœ¬èº«å°±æ˜¯Agentèƒ½åŠ›çš„å®Œç¾ç¤ºèŒƒã€‚</p>
<p><strong>601ä¸ªçœŸå®ç”¨ä¾‹çš„ä»·å€¼</strong></p>
<p>ç™½çš®ä¹¦å»ºè®®å¼€å‘è€…åœ¨æ„å»ºAgentä¹‹å‰ï¼Œå…ˆæ¢ç´¢æ¥è‡ªä¸–ç•Œé¢†å…ˆç»„ç»‡çš„601ä¸ªçœŸå®Agentç”¨ä¾‹ã€‚è¿™ä¸ªåºå¤§çš„ç”¨ä¾‹åº“ä½“ç°äº†è°·æ­Œåœ¨AI Agentåº”ç”¨æ–¹é¢çš„æ·±åº¦ç§¯ç´¯ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å®è·µå‚è€ƒã€‚</p>
<p>æ­£å¦‚Demis Hassabisæ‰€è¯´ï¼š"è®©Geminiæˆä¸ºä¸–ç•Œæ¨¡å‹æ˜¯å¼€å‘æ–°å‹ã€æ›´é€šç”¨ã€æ›´æœ‰ç”¨çš„AIâ€”â€”é€šç”¨AIåŠ©æ‰‹çš„å…³é”®ä¸€æ­¥ã€‚è¿™æ˜¯ä¸€ç§æ™ºèƒ½çš„AIï¼Œèƒ½å¤Ÿç†è§£ä½ æ‰€å¤„çš„ç¯å¢ƒï¼Œèƒ½å¤Ÿè§„åˆ’å¹¶ä»£è¡¨ä½ åœ¨ä»»ä½•è®¾å¤‡ä¸Šé‡‡å–è¡ŒåŠ¨ã€‚"</p>
<hr/>
<h2 data-id="heading-32">æ€»ç»“</h2>
<p>è°·æ­Œè¿™ä»½AI Agentç™½çš®ä¹¦ä¸ä»…ä»…æ˜¯æŠ€æœ¯æ–‡æ¡£ï¼Œæ›´æ˜¯å¯¹æœªæ¥AIåº”ç”¨å½¢æ€çš„æˆ˜ç•¥æ€§å¸ƒå±€ã€‚ä»ADKçš„ä»£ç ä¼˜å…ˆå¼€å‘æ¡†æ¶ï¼Œåˆ°Agent2Agentåè®®çš„å¼€æ”¾ç”Ÿæ€æ„å»ºï¼Œä»ReActç¼–æ’çš„æ™ºèƒ½æ¨ç†ï¼Œåˆ°AgentOpsçš„ç”Ÿäº§çº§è¿ç»´ï¼Œè°·æ­Œæ­£åœ¨æ„å»ºä¸€ä¸ªå®Œæ•´çš„AI AgentæŠ€æœ¯æ ˆã€‚</p>
<p>å¯¹äºä¼ä¸šå’Œå¼€å‘è€…è€Œè¨€ï¼Œè¿™ä»½ç™½çš®ä¹¦æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„æŠ€æœ¯è·¯çº¿å›¾ã€‚æ— è®ºæ˜¯åˆåˆ›ä¼ä¸šå¯»æ±‚å¿«é€ŸåŸå‹éªŒè¯ï¼Œè¿˜æ˜¯å¤§å‹ä¼ä¸šè§„åˆ’AIè½¬å‹æˆ˜ç•¥ï¼Œè°·æ­Œçš„AI AgentæŠ€æœ¯æ ˆéƒ½æä¾›äº†ä»å·¥å…·åˆ°æ–¹æ³•è®ºçš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åœ¨è¿™ä¸ªAI AgentæŠ€æœ¯çˆ†å‘çš„å…³é”®æ—¶æœŸï¼ŒæŒæ¡è¿™äº›æ ¸å¿ƒæŠ€æœ¯å’Œæœ€ä½³å®è·µï¼Œå°†æˆä¸ºä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹ä¸­è·å¾—ç«äº‰ä¼˜åŠ¿çš„é‡è¦å› ç´ ã€‚æœªæ¥å·²æ¥ï¼Œè®©æˆ‘ä»¬æ‹¥æŠ±è¿™åœºç”±AI Agenté©±åŠ¨çš„æŠ€æœ¯é©å‘½ã€‚</p>
<p><em>æœ¬æ–‡åŸºäºGoogle Cloudå®˜æ–¹å‘å¸ƒçš„ã€ŠStartup Technical Guide: AI Agentsã€‹ç™½çš®ä¹¦æ·±åº¦è§£è¯»ç¼–å†™ï¼Œç»“åˆä½œè€…å¯¹AI AgentæŠ€æœ¯å‘å±•è¶‹åŠ¿çš„åˆ†ææ€è€ƒï¼Œæ—¨åœ¨ä¸ºAIæŠ€æœ¯ä»ä¸šè€…å’Œä¼ä¸šå†³ç­–è€…æä¾›æœ‰ä»·å€¼çš„æŠ€æœ¯æ´å¯Ÿå’Œå®è·µæŒ‡å¯¼ã€‚</em></p>
<h2 data-id="heading-33">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576155790165917747</link>    <guid>https://juejin.cn/post/7576155790165917747</guid>    <pubDate>2025-11-25T02:48:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155790165917747" data-draft-id="7576197969843191834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Redis,Java"/> <meta itemprop="datePublished" content="2025-11-25T02:48:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:48:03.000Z" title="Tue Nov 25 2025 02:48:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Redis å®æˆ˜æŒ‡å—ï¼šé«˜æ€§èƒ½ç¼“å­˜ä¸æ•°æ®ç»“æ„å®è·µ</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#1-redis-%E7%AE%80%E4%BB%8B" title="#1-redis-%E7%AE%80%E4%BB%8B">1. Redis ç®€ä»‹</a></li>
<li><a href="#2-redis-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" title="#2-redis-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">2. Redis æ•°æ®ç»“æ„</a></li>
<li><a href="#3-java-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%9B%86%E6%88%90" title="#3-java-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%9B%86%E6%88%90">3. Java å®¢æˆ·ç«¯é›†æˆ</a></li>
<li><a href="#4-%E7%BC%93%E5%AD%98%E5%AE%9E%E6%88%98%E5%9C%BA%E6%99%AF" title="#4-%E7%BC%93%E5%AD%98%E5%AE%9E%E6%88%98%E5%9C%BA%E6%99%AF">4. ç¼“å­˜å®æˆ˜åœºæ™¯</a></li>
<li><a href="#5-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0" title="#5-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0">5. åˆ†å¸ƒå¼é”å®ç°</a></li>
<li><a href="#6-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%B8%8E%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85" title="#6-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%B8%8E%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85">6. æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘å¸ƒè®¢é˜…</a></li>
<li><a href="#7-%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6" title="#7-%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6">7. æŒä¹…åŒ–æœºåˆ¶</a></li>
<li><a href="#8-%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84" title="#8-%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84">8. é›†ç¾¤æ¶æ„</a></li>
<li><a href="#9-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#9-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">9. æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="#10-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#10-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">10. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="#11-spring-boot-%E9%9B%86%E6%88%90" title="#11-spring-boot-%E9%9B%86%E6%88%90">11. Spring Boot é›†æˆ</a></li>
<li><a href="#12-%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%BF%90%E7%BB%B4" title="#12-%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%BF%90%E7%BB%B4">12. ç›‘æ§ä¸è¿ç»´</a></li>
<li><a href="#13-%E6%80%BB%E7%BB%93" title="#13-%E6%80%BB%E7%BB%93">13. æ€»ç»“</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">1. Redis ç®€ä»‹</h3>
<p>Redis (Remote Dictionary Server) æ˜¯ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å¯¹æ•°æ®åº“,æ”¯æŒå¤šç§æ•°æ®ç»“æ„,å¹¿æ³›ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€åˆ†å¸ƒå¼é”ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>é«˜æ€§èƒ½</strong>: å•æœº10ä¸‡+ QPS,åŸºäºå†…å­˜æ“ä½œ</li>
<li><strong>ä¸°å¯Œæ•°æ®ç»“æ„</strong>: Stringã€Hashã€Listã€Setã€ZSetç­‰</li>
<li><strong>æŒä¹…åŒ–</strong>: æ”¯æŒRDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æ–¹å¼</li>
<li><strong>é«˜å¯ç”¨</strong>: æ”¯æŒä¸»ä»å¤åˆ¶ã€å“¨å…µã€é›†ç¾¤æ¨¡å¼</li>
<li><strong>åŸå­æ“ä½œ</strong>: æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„</li>
<li><strong>Luaè„šæœ¬</strong>: æ”¯æŒæœåŠ¡ç«¯Luaè„šæœ¬</li>
<li><strong>äº‹åŠ¡æ”¯æŒ</strong>: MULTI/EXECäº‹åŠ¡æœºåˆ¶</li>
</ul>
<h4 data-id="heading-4">1.2 åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-markdown" lang="markdown">Redis å…¸å‹åº”ç”¨åœºæ™¯

<span class="hljs-bullet">1.</span> ç¼“å­˜ç³»ç»Ÿ
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     Miss    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Client â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Redis â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">       â”‚                       â”‚
       â”‚ Hit                   â”‚ Miss
       â–¼                       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Result â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   DB   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Set Cache â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span>
<span class="hljs-bullet">2.</span> åˆ†å¸ƒå¼é”
   Thread A â”€â”€â–¶ SETNX lock â”€â”€â–¶ è·å¾—é” â”€â”€â–¶ æ‰§è¡Œä¸šåŠ¡
   Thread B â”€â”€â–¶ SETNX lock â”€â”€â–¶ ç­‰å¾…

<span class="hljs-bullet">3.</span> è®¡æ•°å™¨/é™æµ
   INCR user:1001:requests

<span class="hljs-bullet">4.</span> æ’è¡Œæ¦œ
   ZADD leaderboard score user

<span class="hljs-bullet">5.</span> æ¶ˆæ¯é˜Ÿåˆ—
   LPUSH / BRPOP

<span class="hljs-bullet">6.</span> ä¼šè¯å­˜å‚¨
   Session ID â”€â”€â–¶ Redis â”€â”€â–¶ User Data
</code></pre>
<h4 data-id="heading-5">1.3 Redis vs å…¶ä»–ç¼“å­˜</h4>
<pre><code class="hljs">æ€§èƒ½ä¸ç‰¹æ€§å¯¹æ¯”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Feature       â”‚  Redis   â”‚ Memcachedâ”‚  Ehcache â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®ç»“æ„        â”‚  ä¸°å¯Œ    â”‚   ç®€å•   â”‚   ç®€å•   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æŒä¹…åŒ–          â”‚  æ”¯æŒ    â”‚  ä¸æ”¯æŒ  â”‚   æ”¯æŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é›†ç¾¤            â”‚  æ”¯æŒ    â”‚   æ”¯æŒ   â”‚   æ”¯æŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº‹åŠ¡            â”‚  æ”¯æŒ    â”‚  ä¸æ”¯æŒ  â”‚  ä¸æ”¯æŒ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Luaè„šæœ¬         â”‚  æ”¯æŒ    â”‚  ä¸æ”¯æŒ  â”‚  ä¸æ”¯æŒ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‘å¸ƒè®¢é˜…        â”‚  æ”¯æŒ    â”‚  ä¸æ”¯æŒ  â”‚  ä¸æ”¯æŒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-6">2. Redis æ•°æ®ç»“æ„</h3>
<h4 data-id="heading-7">2.1 æ•°æ®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Redis</span> <span class="hljs-string">æ•°æ®ç»“æ„</span>

<span class="hljs-string">String</span> <span class="hljs-string">(å­—ç¬¦ä¸²)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">äºŒè¿›åˆ¶å®‰å…¨</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æœ€å¤§512MB</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨:</span> <span class="hljs-string">ç¼“å­˜ã€è®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”</span>

<span class="hljs-string">Hash</span> <span class="hljs-string">(å“ˆå¸Œè¡¨)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é”®å€¼å¯¹é›†åˆ</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é€‚åˆå­˜å‚¨å¯¹è±¡</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨:</span> <span class="hljs-string">ç”¨æˆ·ä¿¡æ¯ã€å•†å“è¯¦æƒ…</span>

<span class="hljs-string">List</span> <span class="hljs-string">(åˆ—è¡¨)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŒå‘é“¾è¡¨</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æœ‰åºå¯é‡å¤</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨:</span> <span class="hljs-string">æ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°åˆ—è¡¨</span>

<span class="hljs-string">Set</span> <span class="hljs-string">(é›†åˆ)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ— åºä¸é‡å¤</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ”¯æŒé›†åˆè¿ç®—</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨:</span> <span class="hljs-string">æ ‡ç­¾ã€å…±åŒå¥½å‹</span>

<span class="hljs-string">ZSet</span> <span class="hljs-string">(æœ‰åºé›†åˆ)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æœ‰åºä¸é‡å¤</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ¯ä¸ªå…ƒç´ å…³è”åˆ†æ•°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨:</span> <span class="hljs-string">æ’è¡Œæ¦œã€å»¶è¿Ÿé˜Ÿåˆ—</span>

<span class="hljs-string">ç‰¹æ®Šç±»å‹:</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">Bitmap:</span> <span class="hljs-string">ä½å›¾,ç»Ÿè®¡æ´»è·ƒç”¨æˆ·</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">HyperLogLog:</span> <span class="hljs-string">åŸºæ•°ç»Ÿè®¡</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">Geo:</span> <span class="hljs-string">åœ°ç†ä½ç½®</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">Stream:</span> <span class="hljs-string">æ¶ˆæ¯æµ(5.0+)</span>
</code></pre>
<h4 data-id="heading-8">2.2 åº•å±‚æ•°æ®ç»“æ„</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Redis</span> <span class="hljs-string">åº•å±‚å®ç°</span>

<span class="hljs-string">String</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">int:</span> <span class="hljs-string">æ•´æ•°å€¼</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">embstr:</span> <span class="hljs-string">çŸ­å­—ç¬¦ä¸²(&lt;=44å­—èŠ‚)</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">raw:</span> <span class="hljs-string">é•¿å­—ç¬¦ä¸²</span>

<span class="hljs-string">Hash</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">ziplist:</span> <span class="hljs-string">å…ƒç´ å°‘ä¸”å°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">hashtable:</span> <span class="hljs-string">å…ƒç´ å¤šæˆ–å¤§</span>

<span class="hljs-string">List</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">ziplist:</span> <span class="hljs-string">å…ƒç´ å°‘ä¸”å°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">quicklist:</span> <span class="hljs-string">é»˜è®¤å®ç°</span>

<span class="hljs-string">Set</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">intset:</span> <span class="hljs-string">æ•´æ•°ä¸”å…ƒç´ å°‘</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">hashtable:</span> <span class="hljs-string">å…¶ä»–æƒ…å†µ</span>

<span class="hljs-string">ZSet</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">ziplist:</span> <span class="hljs-string">å…ƒç´ å°‘ä¸”å°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">skiplist</span> <span class="hljs-string">+</span> <span class="hljs-attr">hashtable:</span> <span class="hljs-string">å…¶ä»–æƒ…å†µ</span>

<span class="hljs-string">è·³è¡¨ç»“æ„</span> <span class="hljs-string">(ZSet):</span>
<span class="hljs-attr">Level 3:</span>  <span class="hljs-number">1</span> <span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span> <span class="hljs-number">9</span>
<span class="hljs-attr">Level 2:</span>  <span class="hljs-number">1</span> <span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span> <span class="hljs-number">5</span> <span class="hljs-string">â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶</span> <span class="hljs-number">9</span>
<span class="hljs-attr">Level 1:</span>  <span class="hljs-number">1</span> <span class="hljs-string">â”€â”€â”€â–¶</span> <span class="hljs-number">3</span> <span class="hljs-string">â”€â”€â–¶</span> <span class="hljs-number">5</span> <span class="hljs-string">â”€â”€â”€â–¶</span> <span class="hljs-number">7</span> <span class="hljs-string">â”€â”€â–¶</span> <span class="hljs-number">9</span>
<span class="hljs-attr">Level 0:</span>  <span class="hljs-number">1</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">2</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">3</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">4</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">5</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">6</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">7</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">8</span> <span class="hljs-string">â”€â–¶</span> <span class="hljs-number">9</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">3. Java å®¢æˆ·ç«¯é›†æˆ</h3>
<h4 data-id="heading-10">3.1 Maven ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">jedis.version</span>&gt;</span>5.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">jedis.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">lettuce.version</span>&gt;</span>6.3.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">lettuce.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">redisson.version</span>&gt;</span>3.24.3<span class="hljs-tag">&lt;/<span class="hljs-name">redisson.version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Jedis å®¢æˆ·ç«¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${jedis.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Lettuce å®¢æˆ·ç«¯ (Spring Boot é»˜è®¤) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.lettuce<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lettuce-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${lettuce.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Redisson å®¢æˆ·ç«¯ (åŠŸèƒ½ä¸°å¯Œ) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${redisson.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Data Redis --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è¿æ¥æ±  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-pool2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- JSON åºåˆ—åŒ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.15.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-11">3.2 Jedis åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPool;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPoolConfig;

<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-comment">/**
 * Jedis åŸºç¡€æ“ä½œç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisExample</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JedisPool jedisPool;

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–è¿æ¥æ± 
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initPool</span><span class="hljs-params">()</span> {
        <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();

        <span class="hljs-comment">// è¿æ¥æ± é…ç½®</span>
        config.setMaxTotal(<span class="hljs-number">100</span>);          <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
        config.setMaxIdle(<span class="hljs-number">20</span>);            <span class="hljs-comment">// æœ€å¤§ç©ºé—²è¿æ¥</span>
        config.setMinIdle(<span class="hljs-number">5</span>);             <span class="hljs-comment">// æœ€å°ç©ºé—²è¿æ¥</span>
        config.setMaxWait(Duration.ofSeconds(<span class="hljs-number">10</span>)); <span class="hljs-comment">// æœ€å¤§ç­‰å¾…æ—¶é—´</span>

        <span class="hljs-comment">// è¿æ¥æµ‹è¯•</span>
        config.setTestOnBorrow(<span class="hljs-literal">true</span>);
        config.setTestOnReturn(<span class="hljs-literal">true</span>);
        config.setTestWhileIdle(<span class="hljs-literal">true</span>);

        jedisPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(config, <span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>, <span class="hljs-number">3000</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-comment">/**
     * è·å– Jedis è¿æ¥
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Jedis <span class="hljs-title function_">getJedis</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> jedisPool.getResource();
    }

    <span class="hljs-comment">/**
     * String æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stringOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> getJedis()) {
            <span class="hljs-comment">// è®¾ç½®å€¼</span>
            jedis.set(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Redis"</span>);

            <span class="hljs-comment">// è®¾ç½®å¸¦è¿‡æœŸæ—¶é—´</span>
            jedis.setex(<span class="hljs-string">"session:1001"</span>, <span class="hljs-number">3600</span>, <span class="hljs-string">"user_data"</span>);

            <span class="hljs-comment">// NX: ä¸å­˜åœ¨æ‰è®¾ç½®, XX: å­˜åœ¨æ‰è®¾ç½®</span>
            jedis.set(<span class="hljs-string">"lock:order"</span>, <span class="hljs-string">"1"</span>,
                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">redis</span>.clients.jedis.params.SetParams()
                         .nx().ex(<span class="hljs-number">30</span>));

            <span class="hljs-comment">// è·å–å€¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"name"</span>);
            System.out.println(<span class="hljs-string">"name = "</span> + value);

            <span class="hljs-comment">// è‡ªå¢</span>
            jedis.set(<span class="hljs-string">"counter"</span>, <span class="hljs-string">"0"</span>);
            <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.incr(<span class="hljs-string">"counter"</span>);
            System.out.println(<span class="hljs-string">"counter = "</span> + count);

            <span class="hljs-comment">// æ‰¹é‡æ“ä½œ</span>
            jedis.mset(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>, <span class="hljs-string">"key2"</span>, <span class="hljs-string">"value2"</span>);
            List&lt;String&gt; values = jedis.mget(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"key2"</span>);
            System.out.println(<span class="hljs-string">"mget = "</span> + values);
        }
    }

    <span class="hljs-comment">/**
     * Hash æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hashOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> getJedis()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:1001"</span>;

            <span class="hljs-comment">// è®¾ç½®å­—æ®µ</span>
            jedis.hset(key, <span class="hljs-string">"name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
            jedis.hset(key, <span class="hljs-string">"age"</span>, <span class="hljs-string">"25"</span>);
            jedis.hset(key, <span class="hljs-string">"city"</span>, <span class="hljs-string">"åŒ—äº¬"</span>);

            <span class="hljs-comment">// æ‰¹é‡è®¾ç½®</span>
            Map&lt;String, String&gt; userMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            userMap.put(<span class="hljs-string">"email"</span>, <span class="hljs-string">"zhangsan@example.com"</span>);
            userMap.put(<span class="hljs-string">"phone"</span>, <span class="hljs-string">"13800138000"</span>);
            jedis.hset(key, userMap);

            <span class="hljs-comment">// è·å–å­—æ®µ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jedis.hget(key, <span class="hljs-string">"name"</span>);
            System.out.println(<span class="hljs-string">"name = "</span> + name);

            <span class="hljs-comment">// è·å–æ‰€æœ‰å­—æ®µ</span>
            Map&lt;String, String&gt; user = jedis.hgetAll(key);
            System.out.println(<span class="hljs-string">"user = "</span> + user);

            <span class="hljs-comment">// å­—æ®µè‡ªå¢</span>
            jedis.hincrBy(key, <span class="hljs-string">"age"</span>, <span class="hljs-number">1</span>);

            <span class="hljs-comment">// åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> jedis.hexists(key, <span class="hljs-string">"name"</span>);
            System.out.println(<span class="hljs-string">"name exists = "</span> + exists);
        }
    }

    <span class="hljs-comment">/**
     * List æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">listOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> getJedis()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"queue:tasks"</span>;

            <span class="hljs-comment">// å·¦ä¾§æ’å…¥</span>
            jedis.lpush(key, <span class="hljs-string">"task1"</span>, <span class="hljs-string">"task2"</span>, <span class="hljs-string">"task3"</span>);

            <span class="hljs-comment">// å³ä¾§æ’å…¥</span>
            jedis.rpush(key, <span class="hljs-string">"task4"</span>, <span class="hljs-string">"task5"</span>);

            <span class="hljs-comment">// è·å–èŒƒå›´å…ƒç´ </span>
            List&lt;String&gt; tasks = jedis.lrange(key, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);
            System.out.println(<span class="hljs-string">"tasks = "</span> + tasks);

            <span class="hljs-comment">// å¼¹å‡ºå…ƒç´ </span>
            <span class="hljs-type">String</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> jedis.rpop(key);
            System.out.println(<span class="hljs-string">"popped = "</span> + task);

            <span class="hljs-comment">// é˜»å¡å¼¹å‡º (æ¶ˆæ¯é˜Ÿåˆ—å¸¸ç”¨)</span>
            <span class="hljs-comment">// List&lt;String&gt; result = jedis.brpop(10, key);</span>

            <span class="hljs-comment">// è·å–é•¿åº¦</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> jedis.llen(key);
            System.out.println(<span class="hljs-string">"length = "</span> + length);

            <span class="hljs-comment">// è£å‰ªåˆ—è¡¨ (ä¿ç•™æœ€æ–°Næ¡)</span>
            jedis.ltrim(key, <span class="hljs-number">0</span>, <span class="hljs-number">99</span>);
        }
    }

    <span class="hljs-comment">/**
     * Set æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> getJedis()) {
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
            jedis.sadd(<span class="hljs-string">"tags:1001"</span>, <span class="hljs-string">"java"</span>, <span class="hljs-string">"redis"</span>, <span class="hljs-string">"mysql"</span>);
            jedis.sadd(<span class="hljs-string">"tags:1002"</span>, <span class="hljs-string">"java"</span>, <span class="hljs-string">"python"</span>, <span class="hljs-string">"kafka"</span>);

            <span class="hljs-comment">// è·å–æ‰€æœ‰å…ƒç´ </span>
            Set&lt;String&gt; tags = jedis.smembers(<span class="hljs-string">"tags:1001"</span>);
            System.out.println(<span class="hljs-string">"tags = "</span> + tags);

            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isMember</span> <span class="hljs-operator">=</span> jedis.sismember(<span class="hljs-string">"tags:1001"</span>, <span class="hljs-string">"java"</span>);
            System.out.println(<span class="hljs-string">"is member = "</span> + isMember);

            <span class="hljs-comment">// é›†åˆè¿ç®—</span>
            <span class="hljs-comment">// äº¤é›† (å…±åŒæ ‡ç­¾)</span>
            Set&lt;String&gt; inter = jedis.sinter(<span class="hljs-string">"tags:1001"</span>, <span class="hljs-string">"tags:1002"</span>);
            System.out.println(<span class="hljs-string">"intersection = "</span> + inter);

            <span class="hljs-comment">// å¹¶é›†</span>
            Set&lt;String&gt; union = jedis.sunion(<span class="hljs-string">"tags:1001"</span>, <span class="hljs-string">"tags:1002"</span>);
            System.out.println(<span class="hljs-string">"union = "</span> + union);

            <span class="hljs-comment">// å·®é›†</span>
            Set&lt;String&gt; diff = jedis.sdiff(<span class="hljs-string">"tags:1001"</span>, <span class="hljs-string">"tags:1002"</span>);
            System.out.println(<span class="hljs-string">"difference = "</span> + diff);

            <span class="hljs-comment">// éšæœºè·å–å…ƒç´ </span>
            <span class="hljs-type">String</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> jedis.srandmember(<span class="hljs-string">"tags:1001"</span>);
            System.out.println(<span class="hljs-string">"random = "</span> + random);
        }
    }

    <span class="hljs-comment">/**
     * ZSet (æœ‰åºé›†åˆ) æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">zsetOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> getJedis()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"leaderboard"</span>;

            <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
            jedis.zadd(key, <span class="hljs-number">100</span>, <span class="hljs-string">"player1"</span>);
            jedis.zadd(key, <span class="hljs-number">200</span>, <span class="hljs-string">"player2"</span>);
            jedis.zadd(key, <span class="hljs-number">150</span>, <span class="hljs-string">"player3"</span>);

            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ </span>
            Map&lt;String, Double&gt; scores = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            scores.put(<span class="hljs-string">"player4"</span>, <span class="hljs-number">180.0</span>);
            scores.put(<span class="hljs-string">"player5"</span>, <span class="hljs-number">220.0</span>);
            jedis.zadd(key, scores);

            <span class="hljs-comment">// è·å–æ’å (ä»0å¼€å§‹,æŒ‰åˆ†æ•°å‡åº)</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">rank</span> <span class="hljs-operator">=</span> jedis.zrank(key, <span class="hljs-string">"player2"</span>);
            System.out.println(<span class="hljs-string">"player2 rank = "</span> + rank);

            <span class="hljs-comment">// è·å–é€†åºæ’å (åˆ†æ•°é«˜çš„æ’å‰é¢)</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">revRank</span> <span class="hljs-operator">=</span> jedis.zrevrank(key, <span class="hljs-string">"player2"</span>);
            System.out.println(<span class="hljs-string">"player2 rev rank = "</span> + revRank);

            <span class="hljs-comment">// è·å–åˆ†æ•°</span>
            <span class="hljs-type">Double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> jedis.zscore(key, <span class="hljs-string">"player2"</span>);
            System.out.println(<span class="hljs-string">"player2 score = "</span> + score);

            <span class="hljs-comment">// è·å–æ’è¡Œæ¦œ (Top N)</span>
            List&lt;String&gt; top3 = jedis.zrevrange(key, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            System.out.println(<span class="hljs-string">"Top 3 = "</span> + top3);

            <span class="hljs-comment">// å¸¦åˆ†æ•°è·å–</span>
            List&lt;redis.clients.jedis.resps.Tuple&gt; top3WithScores =
                jedis.zrevrangeWithScores(key, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            <span class="hljs-keyword">for</span> (redis.clients.jedis.resps.Tuple tuple : top3WithScores) {
                System.out.printf(<span class="hljs-string">"%s: %.0f\n"</span>,
                    tuple.getElement(), tuple.getScore());
            }

            <span class="hljs-comment">// å¢åŠ åˆ†æ•°</span>
            jedis.zincrby(key, <span class="hljs-number">50</span>, <span class="hljs-string">"player1"</span>);

            <span class="hljs-comment">// æŒ‰åˆ†æ•°èŒƒå›´è·å–</span>
            List&lt;String&gt; range = jedis.zrangeByScore(key, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>);
            System.out.println(<span class="hljs-string">"score 100-200 = "</span> + range);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        initPool();

        System.out.println(<span class="hljs-string">"=== String Operations ==="</span>);
        stringOperations();

        System.out.println(<span class="hljs-string">"\n=== Hash Operations ==="</span>);
        hashOperations();

        System.out.println(<span class="hljs-string">"\n=== List Operations ==="</span>);
        listOperations();

        System.out.println(<span class="hljs-string">"\n=== Set Operations ==="</span>);
        setOperations();

        System.out.println(<span class="hljs-string">"\n=== ZSet Operations ==="</span>);
        zsetOperations();

        jedisPool.close();
    }
}
</code></pre>
<h4 data-id="heading-12">3.3 Lettuce å¼‚æ­¥æ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.lettuce.core.RedisClient;
<span class="hljs-keyword">import</span> io.lettuce.core.api.StatefulRedisConnection;
<span class="hljs-keyword">import</span> io.lettuce.core.api.async.RedisAsyncCommands;
<span class="hljs-keyword">import</span> io.lettuce.core.api.sync.RedisCommands;

<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * Lettuce å®¢æˆ·ç«¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LettuceExample</span> {

    <span class="hljs-comment">/**
     * åŒæ­¥æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RedisClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> RedisClient.create(<span class="hljs-string">"redis://localhost:6379"</span>);
        StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
        RedisCommands&lt;String, String&gt; commands = connection.sync();

        <span class="hljs-comment">// åŒæ­¥æ“ä½œ</span>
        commands.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> commands.get(<span class="hljs-string">"key"</span>);
        System.out.println(<span class="hljs-string">"value = "</span> + value);

        connection.close();
        client.shutdown();
    }

    <span class="hljs-comment">/**
     * å¼‚æ­¥æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">asyncOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RedisClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> RedisClient.create(<span class="hljs-string">"redis://localhost:6379"</span>);
        StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
        RedisAsyncCommands&lt;String, String&gt; commands = connection.async();

        <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
        CompletableFuture&lt;String&gt; future = commands.set(<span class="hljs-string">"async-key"</span>, <span class="hljs-string">"async-value"</span>)
            .toCompletableFuture()
            .thenCompose(result -&gt; commands.get(<span class="hljs-string">"async-key"</span>).toCompletableFuture());

        future.thenAccept(value -&gt; {
            System.out.println(<span class="hljs-string">"Async value = "</span> + value);
        }).join();

        connection.close();
        client.shutdown();
    }

    <span class="hljs-comment">/**
     * å“åº”å¼æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reactiveOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RedisClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> RedisClient.create(<span class="hljs-string">"redis://localhost:6379"</span>);
        StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
        <span class="hljs-type">var</span> <span class="hljs-variable">commands</span> <span class="hljs-operator">=</span> connection.reactive();

        <span class="hljs-comment">// å“åº”å¼æ“ä½œ</span>
        commands.set(<span class="hljs-string">"reactive-key"</span>, <span class="hljs-string">"reactive-value"</span>)
            .then(commands.get(<span class="hljs-string">"reactive-key"</span>))
            .subscribe(value -&gt; {
                System.out.println(<span class="hljs-string">"Reactive value = "</span> + value);
            });

        <span class="hljs-comment">// ç­‰å¾…å®Œæˆ</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">1000</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        }

        connection.close();
        client.shutdown();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        syncOperations();
        asyncOperations();
        reactiveOperations();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">4. ç¼“å­˜å®æˆ˜åœºæ™¯</h3>
<h4 data-id="heading-14">4.1 å¤šçº§ç¼“å­˜æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown">å¤šçº§ç¼“å­˜æ¶æ„

<span class="hljs-code">        è¯·æ±‚
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æœ¬åœ°ç¼“å­˜  â”‚  L1 Cache (Caffeine/Guava)
    â”‚ (è¿›ç¨‹å†…) â”‚  å»¶è¿Ÿ: &lt;1ms
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚ Miss
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Redis   â”‚  L2 Cache (åˆ†å¸ƒå¼)
    â”‚ (åˆ†å¸ƒå¼) â”‚  å»¶è¿Ÿ: 1-5ms
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚ Miss
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Database â”‚  æ•°æ®æº
    â”‚  (MySQL) â”‚  å»¶è¿Ÿ: 10-100ms
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span>
ä¼˜åŠ¿:
<span class="hljs-bullet">1.</span> æœ¬åœ°ç¼“å­˜å‡å°‘ç½‘ç»œå¼€é”€
<span class="hljs-bullet">2.</span> Redis ä¿è¯æ•°æ®ä¸€è‡´æ€§
<span class="hljs-bullet">3.</span> å¤šå±‚é˜²æŠ¤,é«˜å¯ç”¨
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Cache;
<span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;
<span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPool;

<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å¤šçº§ç¼“å­˜å®ç°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiLevelCache</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Cache&lt;String, Object&gt; localCache;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MultiLevelCache</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;

        <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜é…ç½®</span>
        <span class="hljs-built_in">this</span>.localCache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">10000</span>)
            .expireAfterWrite(<span class="hljs-number">5</span>, TimeUnit.MINUTES)
            .build();
    }

    <span class="hljs-comment">/**
     * è·å–ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">get</span><span class="hljs-params">(String key, Class&lt;T&gt; type,
                     java.util.function.Supplier&lt;T&gt; dbLoader)</span> {
        <span class="hljs-comment">// 1. æŸ¥è¯¢æœ¬åœ°ç¼“å­˜</span>
        <span class="hljs-type">T</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (T) localCache.getIfPresent(key);
        <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
            System.out.println(<span class="hljs-string">"L1 Cache Hit: "</span> + key);
            <span class="hljs-keyword">return</span> value;
        }

        <span class="hljs-comment">// 2. æŸ¥è¯¢ Redis ç¼“å­˜</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> jedis.get(key);
            <span class="hljs-keyword">if</span> (json != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"L2 Cache Hit: "</span> + key);
                value = objectMapper.readValue(json, type);

                <span class="hljs-comment">// å›å¡«æœ¬åœ°ç¼“å­˜</span>
                localCache.put(key, value);
                <span class="hljs-keyword">return</span> value;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"Redis get error: "</span> + e.getMessage());
        }

        <span class="hljs-comment">// 3. æŸ¥è¯¢æ•°æ®åº“</span>
        System.out.println(<span class="hljs-string">"Cache Miss, loading from DB: "</span> + key);
        value = dbLoader.get();

        <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å›å¡«ç¼“å­˜</span>
            put(key, value, <span class="hljs-number">3600</span>);
        }

        <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-comment">/**
     * è®¾ç½®ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String key, Object value, <span class="hljs-type">int</span> expireSeconds)</span> {
        <span class="hljs-comment">// å†™å…¥æœ¬åœ°ç¼“å­˜</span>
        localCache.put(key, value);

        <span class="hljs-comment">// å†™å…¥ Redis</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(value);
            jedis.setex(key, expireSeconds, json);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"Redis set error: "</span> + e.getMessage());
        }
    }

    <span class="hljs-comment">/**
     * åˆ é™¤ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-comment">// åˆ é™¤æœ¬åœ°ç¼“å­˜</span>
        localCache.invalidate(key);

        <span class="hljs-comment">// åˆ é™¤ Redis</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            jedis.del(key);
        }
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);
        <span class="hljs-type">MultiLevelCache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MultiLevelCache</span>(jedisPool);

        <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> cache.get(<span class="hljs-string">"user:1001"</span>, User.class, () -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1001L</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"zhangsan@example.com"</span>);
        });

        System.out.println(<span class="hljs-string">"User: "</span> + user);

        jedisPool.close();
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String email;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> {}

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Long id, String name, String email)</span> {
            <span class="hljs-built_in">this</span>.id = id;
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.email = email;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"User{id=%d, name='%s', email='%s'}"</span>,
                id, name, email);
        }

        <span class="hljs-comment">// Getters and Setters</span>
        <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> id; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> { <span class="hljs-built_in">this</span>.id = id; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> email; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> { <span class="hljs-built_in">this</span>.email = email; }
    }
}
</code></pre>
<h4 data-id="heading-15">4.2 ç¼“å­˜æ›´æ–°ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜æ›´æ–°ç­–ç•¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheUpdateStrategies</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CacheUpdateStrategies</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }

    <span class="hljs-comment">/**
     * ç­–ç•¥1: Cache Aside (æ—è·¯ç¼“å­˜)
     * è¯»: å…ˆè¯»ç¼“å­˜,æ²¡æœ‰åˆ™è¯»æ•°æ®åº“,å›å¡«ç¼“å­˜
     * å†™: å…ˆæ›´æ–°æ•°æ®åº“,å†åˆ é™¤ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserCacheAside</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// 1. æŸ¥è¯¢ç¼“å­˜</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> jedis.get(key);
            <span class="hljs-keyword">if</span> (json != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> parseUser(json);
            }

            <span class="hljs-comment">// 2. æŸ¥è¯¢æ•°æ®åº“</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);

            <span class="hljs-comment">// 3. å›å¡«ç¼“å­˜</span>
            <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));
            }

            <span class="hljs-keyword">return</span> user;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserCacheAside</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// 1. å…ˆæ›´æ–°æ•°æ®åº“</span>
        updateUserInDB(user);

        <span class="hljs-comment">// 2. å†åˆ é™¤ç¼“å­˜</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            jedis.del(<span class="hljs-string">"user:"</span> + user.getId());
        }

        <span class="hljs-comment">// æ³¨æ„: åˆ é™¤ç¼“å­˜è€Œéæ›´æ–°ç¼“å­˜</span>
        <span class="hljs-comment">// é¿å…å¹¶å‘å†™å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´</span>
    }

    <span class="hljs-comment">/**
     * ç­–ç•¥2: Read/Write Through (è¯»å†™ç©¿é€)
     * ç¼“å­˜ä½œä¸ºä¸»è¦æ•°æ®æº,ç”±ç¼“å­˜ç»„ä»¶è´Ÿè´£è¯»å†™æ•°æ®åº“
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserReadThrough</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> jedis.get(key);

            <span class="hljs-keyword">if</span> (json != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> parseUser(json);
            }

            <span class="hljs-comment">// ç¼“å­˜ç»„ä»¶è´Ÿè´£ä»æ•°æ®åº“åŠ è½½</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);
            <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));
            }
            <span class="hljs-keyword">return</span> user;
        }
    }

    <span class="hljs-comment">/**
     * ç­–ç•¥3: Write Behind (å¼‚æ­¥å†™å›)
     * å†™æ“ä½œåªæ›´æ–°ç¼“å­˜,å¼‚æ­¥æ‰¹é‡å†™å…¥æ•°æ®åº“
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserWriteBehind</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + user.getId();

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// 1. åªæ›´æ–°ç¼“å­˜</span>
            jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));

            <span class="hljs-comment">// 2. åŠ å…¥å¼‚æ­¥å†™é˜Ÿåˆ—</span>
            jedis.lpush(<span class="hljs-string">"write_back_queue"</span>, toJson(user));
        }

        <span class="hljs-comment">// å¼‚æ­¥ä»»åŠ¡å®šæœŸå¤„ç†é˜Ÿåˆ—,æ‰¹é‡å†™å…¥æ•°æ®åº“</span>
    }

    <span class="hljs-comment">/**
     * å»¶è¿ŸåŒåˆ ç­–ç•¥
     * è§£å†³æ•°æ®åº“ä¸»ä»å»¶è¿Ÿå¯¼è‡´çš„ç¼“å­˜ä¸ä¸€è‡´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserDelayedDoubleDelete</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + user.getId();

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// 1. å…ˆåˆ é™¤ç¼“å­˜</span>
            jedis.del(key);

            <span class="hljs-comment">// 2. æ›´æ–°æ•°æ®åº“</span>
            updateUserInDB(user);

            <span class="hljs-comment">// 3. å»¶è¿Ÿå†æ¬¡åˆ é™¤ç¼“å­˜ (å¼‚æ­¥)</span>
            CompletableFuture.runAsync(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// ç­‰å¾…ä¸»ä»åŒæ­¥</span>
                    Thread.sleep(<span class="hljs-number">500</span>);
                    jedis.del(key);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            });
        }
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getUserFromDB</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(userId, <span class="hljs-string">"User"</span> + userId, <span class="hljs-string">"user@example.com"</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUserInDB</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æ›´æ–°</span>
        System.out.println(<span class="hljs-string">"Updated user in DB: "</span> + user.getId());
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">parseUser</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-comment">// JSON è§£æ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toJson</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// JSON åºåˆ—åŒ–</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String email;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> {}

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Long id, String name, String email)</span> {
            <span class="hljs-built_in">this</span>.id = id;
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.email = email;
        }

        <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> id; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> { <span class="hljs-built_in">this</span>.id = id; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> email; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> { <span class="hljs-built_in">this</span>.email = email; }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-16">5. åˆ†å¸ƒå¼é”å®ç°</h3>
<h4 data-id="heading-17">5.1 åŸºç¡€åˆ†å¸ƒå¼é”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPool;
<span class="hljs-keyword">import</span> redis.clients.jedis.params.SetParams;

<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.UUID;

<span class="hljs-comment">/**
 * Redis åˆ†å¸ƒå¼é”å®ç°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDistributedLock</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockKey;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockValue;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> expireSeconds;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisDistributedLock</span><span class="hljs-params">(JedisPool jedisPool, String lockKey,
                                <span class="hljs-type">int</span> expireSeconds)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
        <span class="hljs-built_in">this</span>.lockKey = <span class="hljs-string">"lock:"</span> + lockKey;
        <span class="hljs-built_in">this</span>.lockValue = UUID.randomUUID().toString();
        <span class="hljs-built_in">this</span>.expireSeconds = expireSeconds;
    }

    <span class="hljs-comment">/**
     * è·å–é”
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// SET key value NX EX seconds</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.set(lockKey, lockValue,
                SetParams.setParams().nx().ex(expireSeconds));

            <span class="hljs-keyword">return</span> <span class="hljs-string">"OK"</span>.equals(result);
        }
    }

    <span class="hljs-comment">/**
     * è·å–é” (å¸¦é‡è¯•)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">int</span> retryTimes, <span class="hljs-type">long</span> retryIntervalMs)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; retryTimes; i++) {
            <span class="hljs-keyword">if</span> (tryLock()) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }

            <span class="hljs-keyword">try</span> {
                Thread.sleep(retryIntervalMs);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">/**
     * é‡Šæ”¾é” (ä½¿ç”¨ Lua è„šæœ¬ä¿è¯åŸå­æ€§)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">luaScript</span> <span class="hljs-operator">=</span>
            <span class="hljs-string">"if redis.call('get', KEYS[1]) == ARGV[1] then "</span> +
            <span class="hljs-string">"    return redis.call('del', KEYS[1]) "</span> +
            <span class="hljs-string">"else "</span> +
            <span class="hljs-string">"    return 0 "</span> +
            <span class="hljs-string">"end"</span>;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.eval(luaScript,
                Collections.singletonList(lockKey),
                Collections.singletonList(lockValue));

            <span class="hljs-keyword">return</span> Long.valueOf(<span class="hljs-number">1L</span>).equals(result);
        }
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);

        <span class="hljs-type">RedisDistributedLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisDistributedLock</span>(jedisPool, <span class="hljs-string">"order:create"</span>, <span class="hljs-number">30</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (lock.tryLock(<span class="hljs-number">3</span>, <span class="hljs-number">100</span>)) {
                System.out.println(<span class="hljs-string">"è·å–é”æˆåŠŸ,æ‰§è¡Œä¸šåŠ¡é€»è¾‘..."</span>);

                <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                Thread.sleep(<span class="hljs-number">1000</span>);

                System.out.println(<span class="hljs-string">"ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå®Œæˆ"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”å¤±è´¥"</span>);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
            System.out.println(<span class="hljs-string">"é”å·²é‡Šæ”¾"</span>);
        }

        jedisPool.close();
    }
}
</code></pre>
<h4 data-id="heading-18">5.2 Redisson åˆ†å¸ƒå¼é”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.Redisson;
<span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RReadWriteLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.config.Config;

<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Redisson åˆ†å¸ƒå¼é”
 * æ”¯æŒ: å¯é‡å…¥ã€å…¬å¹³é”ã€è¯»å†™é”ã€çº¢é”ç­‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonLockExample</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> RedissonClient redisson;

    <span class="hljs-comment">/**
     * åˆå§‹åŒ– Redisson
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRedisson</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();
        config.useSingleServer()
            .setAddress(<span class="hljs-string">"redis://localhost:6379"</span>)
            .setDatabase(<span class="hljs-number">0</span>)
            .setConnectionPoolSize(<span class="hljs-number">10</span>)
            .setConnectionMinimumIdleSize(<span class="hljs-number">5</span>);

        redisson = Redisson.create(config);
    }

    <span class="hljs-comment">/**
     * åŸºæœ¬é”æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">basicLock</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redisson.getLock(<span class="hljs-string">"myLock"</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–é”,æœ€å¤šç­‰å¾…10ç§’,é”å®šå30ç§’è‡ªåŠ¨é‡Šæ”¾</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);

            <span class="hljs-keyword">if</span> (locked) {
                System.out.println(<span class="hljs-string">"è·å–é”æˆåŠŸ"</span>);

                <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                Thread.sleep(<span class="hljs-number">5000</span>);

            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”å¤±è´¥"</span>);
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// åªæœ‰é”æŒæœ‰è€…æ‰èƒ½é‡Šæ”¾</span>
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
                System.out.println(<span class="hljs-string">"é”å·²é‡Šæ”¾"</span>);
            }
        }
    }

    <span class="hljs-comment">/**
     * å¯é‡å…¥é”
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reentrantLock</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redisson.getLock(<span class="hljs-string">"reentrantLock"</span>);

        <span class="hljs-keyword">try</span> {
            lock.lock();
            System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡è·å–é”"</span>);

            <span class="hljs-comment">// å¯é‡å…¥: åŒä¸€çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–</span>
            lock.lock();
            System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡è·å–é” (å¯é‡å…¥)"</span>);

            lock.unlock();
            System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡é‡Šæ”¾"</span>);

            lock.unlock();
            System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡é‡Šæ”¾"</span>);

        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">while</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }

    <span class="hljs-comment">/**
     * å…¬å¹³é”
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fairLock</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">fairLock</span> <span class="hljs-operator">=</span> redisson.getFairLock(<span class="hljs-string">"fairLock"</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æŒ‰è¯·æ±‚é¡ºåºè·å–é”</span>
            fairLock.lock();
            System.out.println(<span class="hljs-string">"è·å–å…¬å¹³é”æˆåŠŸ"</span>);

            <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            Thread.sleep(<span class="hljs-number">1000</span>);

        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        } <span class="hljs-keyword">finally</span> {
            fairLock.unlock();
        }
    }

    <span class="hljs-comment">/**
     * è¯»å†™é”
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readWriteLock</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RReadWriteLock</span> <span class="hljs-variable">rwLock</span> <span class="hljs-operator">=</span> redisson.getReadWriteLock(<span class="hljs-string">"rwLock"</span>);

        <span class="hljs-comment">// è¯»é” (å…±äº«é”)</span>
        <span class="hljs-type">RLock</span> <span class="hljs-variable">readLock</span> <span class="hljs-operator">=</span> rwLock.readLock();
        <span class="hljs-comment">// å†™é” (æ’ä»–é”)</span>
        <span class="hljs-type">RLock</span> <span class="hljs-variable">writeLock</span> <span class="hljs-operator">=</span> rwLock.writeLock();

        <span class="hljs-comment">// è¯»æ“ä½œ (å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¯»)</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                readLock.lock();
                System.out.println(<span class="hljs-string">"è¯»çº¿ç¨‹1è·å–è¯»é”"</span>);
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            } <span class="hljs-keyword">finally</span> {
                readLock.unlock();
                System.out.println(<span class="hljs-string">"è¯»çº¿ç¨‹1é‡Šæ”¾è¯»é”"</span>);
            }
        }).start();

        <span class="hljs-comment">// å†™æ“ä½œ (å¿…é¡»ç­‰æ‰€æœ‰è¯»é”é‡Šæ”¾)</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                writeLock.lock();
                System.out.println(<span class="hljs-string">"å†™çº¿ç¨‹è·å–å†™é”"</span>);
                Thread.sleep(<span class="hljs-number">1000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            } <span class="hljs-keyword">finally</span> {
                writeLock.unlock();
                System.out.println(<span class="hljs-string">"å†™çº¿ç¨‹é‡Šæ”¾å†™é”"</span>);
            }
        }).start();
    }

    <span class="hljs-comment">/**
     * çœ‹é—¨ç‹—è‡ªåŠ¨ç»­æœŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">watchdogDemo</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redisson.getLock(<span class="hljs-string">"watchdogLock"</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸æŒ‡å®šè¿‡æœŸæ—¶é—´,çœ‹é—¨ç‹—ä¼šè‡ªåŠ¨ç»­æœŸ</span>
            lock.lock();
            System.out.println(<span class="hljs-string">"è·å–é”æˆåŠŸ,çœ‹é—¨ç‹—è‡ªåŠ¨ç»­æœŸ"</span>);

            <span class="hljs-comment">// æ¨¡æ‹Ÿé•¿æ—¶é—´ä¸šåŠ¡</span>
            Thread.sleep(<span class="hljs-number">35000</span>);

        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        initRedisson();

        basicLock();
        <span class="hljs-comment">// reentrantLock();</span>
        <span class="hljs-comment">// fairLock();</span>
        <span class="hljs-comment">// readWriteLock();</span>
        <span class="hljs-comment">// watchdogDemo();</span>

        redisson.shutdown();
    }
}
</code></pre>
<h4 data-id="heading-19">5.3 åˆ†å¸ƒå¼é”æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-markdown" lang="markdown">åˆ†å¸ƒå¼é”æ³¨æ„äº‹é¡¹

<span class="hljs-bullet">1.</span> é”è¶…æ—¶é—®é¢˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ è·å–é”     â”‚ è®¾ç½®è¶…æ—¶æ—¶é—´
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ æ‰§è¡Œä¸šåŠ¡   â”‚ å¦‚æœè¶…æ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ é‡Šæ”¾é”     â”‚ å¯èƒ½é‡Šæ”¾äº†åˆ«äººçš„é”
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   è§£å†³:
<span class="hljs-bullet">   -</span> ä½¿ç”¨å”¯ä¸€æ ‡è¯†
<span class="hljs-bullet">   -</span> Redisson çœ‹é—¨ç‹—è‡ªåŠ¨ç»­æœŸ

<span class="hljs-bullet">2.</span> é”ä¸å¯é‡å…¥
   Thread A: lock() -&gt; lock() -&gt; æ­»é”

   è§£å†³: ä½¿ç”¨å¯é‡å…¥é”

<span class="hljs-bullet">3.</span> å•ç‚¹æ•…éšœ
   Redis ä¸»èŠ‚ç‚¹å®•æœº,é”ä¸¢å¤±

   è§£å†³:
<span class="hljs-bullet">   -</span> Red Lock ç®—æ³•
<span class="hljs-bullet">   -</span> Redis é›†ç¾¤

<span class="hljs-bullet">4.</span> é”é‡Šæ”¾å¤±è´¥
   ä¸šåŠ¡å¼‚å¸¸,é”æœªé‡Šæ”¾

   è§£å†³:
<span class="hljs-bullet">   -</span> è®¾ç½®è¿‡æœŸæ—¶é—´
<span class="hljs-bullet">   -</span> finally ä¸­é‡Šæ”¾
</code></pre>
<hr/>
<h3 data-id="heading-20">6. æ¶ˆæ¯é˜Ÿåˆ—ä¸å‘å¸ƒè®¢é˜…</h3>
<h4 data-id="heading-21">6.1 List å®ç°æ¶ˆæ¯é˜Ÿåˆ—</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Redis List å®ç°ç®€å•æ¶ˆæ¯é˜Ÿåˆ—
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisMessageQueue</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String queueName;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisMessageQueue</span><span class="hljs-params">(JedisPool jedisPool, String queueName)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
        <span class="hljs-built_in">this</span>.queueName = queueName;
    }

    <span class="hljs-comment">/**
     * å‘é€æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            jedis.lpush(queueName, message);
            System.out.println(<span class="hljs-string">"æ¶ˆæ¯å·²å‘é€: "</span> + message);
        }
    }

    <span class="hljs-comment">/**
     * é˜»å¡æ¥æ”¶æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">receive</span><span class="hljs-params">(<span class="hljs-type">int</span> timeoutSeconds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            List&lt;String&gt; result = jedis.brpop(timeoutSeconds, queueName);

            <span class="hljs-keyword">if</span> (result != <span class="hljs-literal">null</span> &amp;&amp; result.size() &gt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> result.get(<span class="hljs-number">1</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-comment">/**
     * å¯é é˜Ÿåˆ— (å¸¦ç¡®è®¤)
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">receiveReliable</span><span class="hljs-params">(<span class="hljs-type">int</span> timeoutSeconds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// ä»é˜Ÿåˆ—å–å‡ºå¹¶æ”¾å…¥å¤„ç†ä¸­é˜Ÿåˆ—</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> jedis.brpoplpush(
                queueName,
                queueName + <span class="hljs-string">":processing"</span>,
                timeoutSeconds
            );
            <span class="hljs-keyword">return</span> message;
        }
    }

    <span class="hljs-comment">/**
     * ç¡®è®¤æ¶ˆæ¯å¤„ç†å®Œæˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ack</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            jedis.lrem(queueName + <span class="hljs-string">":processing"</span>, <span class="hljs-number">1</span>, message);
        }
    }

    <span class="hljs-comment">/**
     * å»¶è¿Ÿé˜Ÿåˆ— (ä½¿ç”¨ ZSet)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendDelayed</span><span class="hljs-params">(String message, <span class="hljs-type">long</span> delaySeconds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> System.currentTimeMillis() / <span class="hljs-number">1000.0</span> + delaySeconds;
            jedis.zadd(queueName + <span class="hljs-string">":delayed"</span>, score, message);
            System.out.println(<span class="hljs-string">"å»¶è¿Ÿæ¶ˆæ¯å·²å‘é€,å»¶è¿Ÿ: "</span> + delaySeconds + <span class="hljs-string">"ç§’"</span>);
        }
    }

    <span class="hljs-comment">/**
     * å¤„ç†å»¶è¿Ÿæ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDelayed</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-type">double</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.currentTimeMillis() / <span class="hljs-number">1000.0</span>;

                <span class="hljs-comment">// è·å–åˆ°æœŸçš„æ¶ˆæ¯</span>
                List&lt;String&gt; messages = jedis.zrangeByScore(
                    queueName + <span class="hljs-string">":delayed"</span>, <span class="hljs-number">0</span>, now, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>);

                <span class="hljs-keyword">if</span> (messages.isEmpty()) {
                    Thread.sleep(<span class="hljs-number">100</span>);
                    <span class="hljs-keyword">continue</span>;
                }

                <span class="hljs-keyword">for</span> (String message : messages) {
                    <span class="hljs-comment">// ç§»åŠ¨åˆ°ä¸»é˜Ÿåˆ—</span>
                    <span class="hljs-type">Long</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> jedis.zrem(queueName + <span class="hljs-string">":delayed"</span>, message);
                    <span class="hljs-keyword">if</span> (removed &gt; <span class="hljs-number">0</span>) {
                        jedis.lpush(queueName, message);
                        System.out.println(<span class="hljs-string">"å»¶è¿Ÿæ¶ˆæ¯å·²åˆ°æœŸ: "</span> + message);
                    }
                }
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);
        <span class="hljs-type">RedisMessageQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisMessageQueue</span>(jedisPool, <span class="hljs-string">"task_queue"</span>);

        <span class="hljs-comment">// ç”Ÿäº§è€…</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                queue.send(<span class="hljs-string">"Task "</span> + i);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">500</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        }).start();

        <span class="hljs-comment">// æ¶ˆè´¹è€…</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> queue.receive(<span class="hljs-number">5</span>);
                <span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span>) {
                    System.out.println(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯: "</span> + message);
                }
            }
        }).start();

        Thread.sleep(<span class="hljs-number">10000</span>);
        jedisPool.close();
    }
}
</code></pre>
<h4 data-id="heading-22">6.2 å‘å¸ƒè®¢é˜…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.JedisPubSub;

<span class="hljs-comment">/**
 * Redis å‘å¸ƒè®¢é˜…
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisPubSub</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisPubSub</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }

    <span class="hljs-comment">/**
     * å‘å¸ƒæ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publish</span><span class="hljs-params">(String channel, String message)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">Long</span> <span class="hljs-variable">receivers</span> <span class="hljs-operator">=</span> jedis.publish(channel, message);
            System.out.printf(<span class="hljs-string">"æ¶ˆæ¯å‘å¸ƒåˆ° %s,æ¥æ”¶è€…: %d\n"</span>, channel, receivers);
        }
    }

    <span class="hljs-comment">/**
     * è®¢é˜…é¢‘é“
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribe</span><span class="hljs-params">(String... channels)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
                jedis.subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPubSub</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String channel, String message)</span> {
                        System.out.printf(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯ [%s]: %s\n"</span>, channel, message);

                        <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯</span>
                        processMessage(channel, message);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(String channel, <span class="hljs-type">int</span> subscribedChannels)</span> {
                        System.out.printf(<span class="hljs-string">"è®¢é˜…æˆåŠŸ: %s,å½“å‰è®¢é˜…æ•°: %d\n"</span>,
                            channel, subscribedChannels);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUnsubscribe</span><span class="hljs-params">(String channel, <span class="hljs-type">int</span> subscribedChannels)</span> {
                        System.out.printf(<span class="hljs-string">"å–æ¶ˆè®¢é˜…: %s,å½“å‰è®¢é˜…æ•°: %d\n"</span>,
                            channel, subscribedChannels);
                    }
                }, channels);
            }
        }).start();
    }

    <span class="hljs-comment">/**
     * æ¨¡å¼è®¢é˜…
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">psubscribe</span><span class="hljs-params">(String... patterns)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
                jedis.psubscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPubSub</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPMessage</span><span class="hljs-params">(String pattern, String channel,
                                          String message)</span> {
                        System.out.printf(<span class="hljs-string">"æ¨¡å¼åŒ¹é… [%s] é¢‘é“ [%s]: %s\n"</span>,
                            pattern, channel, message);
                    }
                }, patterns);
            }
        }).start();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processMessage</span><span class="hljs-params">(String channel, String message)</span> {
        <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
        System.out.println(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯: "</span> + message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);
        <span class="hljs-type">RedisPubSub</span> <span class="hljs-variable">pubSub</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisPubSub</span>(jedisPool);

        <span class="hljs-comment">// è®¢é˜…é¢‘é“</span>
        pubSub.subscribe(<span class="hljs-string">"news"</span>, <span class="hljs-string">"events"</span>);

        <span class="hljs-comment">// æ¨¡å¼è®¢é˜…</span>
        pubSub.psubscribe(<span class="hljs-string">"order:*"</span>);

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
        pubSub.publish(<span class="hljs-string">"news"</span>, <span class="hljs-string">"ä»Šæ—¥æ–°é—»"</span>);
        pubSub.publish(<span class="hljs-string">"events"</span>, <span class="hljs-string">"ç³»ç»Ÿäº‹ä»¶"</span>);
        pubSub.publish(<span class="hljs-string">"order:created"</span>, <span class="hljs-string">"è®¢å•åˆ›å»º"</span>);
        pubSub.publish(<span class="hljs-string">"order:paid"</span>, <span class="hljs-string">"è®¢å•æ”¯ä»˜"</span>);

        Thread.sleep(<span class="hljs-number">2000</span>);
        jedisPool.close();
    }
}
</code></pre>
<h4 data-id="heading-23">6.3 Stream æ¶ˆæ¯é˜Ÿåˆ— (Redis 5.0+)</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntry;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;
<span class="hljs-keyword">import</span> redis.clients.jedis.params.XAddParams;
<span class="hljs-keyword">import</span> redis.clients.jedis.params.XReadGroupParams;
<span class="hljs-keyword">import</span> redis.clients.jedis.resps.StreamConsumersInfo;
<span class="hljs-keyword">import</span> redis.clients.jedis.resps.StreamGroupInfo;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * Redis Stream æ¶ˆæ¯é˜Ÿåˆ—
 * ç‰¹ç‚¹: æŒä¹…åŒ–ã€æ¶ˆè´¹è€…ç»„ã€æ¶ˆæ¯ç¡®è®¤
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStreamQueue</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String streamKey;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisStreamQueue</span><span class="hljs-params">(JedisPool jedisPool, String streamKey)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
        <span class="hljs-built_in">this</span>.streamKey = streamKey;
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºæ¶ˆè´¹è€…ç»„
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createConsumerGroup</span><span class="hljs-params">(String groupName)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-keyword">try</span> {
                jedis.xgroupCreate(streamKey, groupName,
                    StreamEntryID.LAST_ENTRY, <span class="hljs-literal">true</span>);
                System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…ç»„åˆ›å»ºæˆåŠŸ: "</span> + groupName);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (e.getMessage().contains(<span class="hljs-string">"BUSYGROUP"</span>)) {
                    System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…ç»„å·²å­˜åœ¨: "</span> + groupName);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">throw</span> e;
                }
            }
        }
    }

    <span class="hljs-comment">/**
     * å‘é€æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">send</span><span class="hljs-params">(Map&lt;String, String&gt; message)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">StreamEntryID</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> jedis.xadd(streamKey,
                XAddParams.xAddParams().maxLen(<span class="hljs-number">10000</span>), message);
            System.out.println(<span class="hljs-string">"æ¶ˆæ¯å·²å‘é€,ID: "</span> + id);
            <span class="hljs-keyword">return</span> id.toString();
        }
    }

    <span class="hljs-comment">/**
     * æ¶ˆè´¹è€…ç»„æ¶ˆè´¹æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt;&gt; consume(
            String groupName, String consumerName, <span class="hljs-type">int</span> count, <span class="hljs-type">long</span> blockMs) {

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            Map&lt;String, StreamEntryID&gt; streams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            streams.put(streamKey, StreamEntryID.UNRECEIVED_ENTRY);

            <span class="hljs-keyword">return</span> jedis.xreadGroup(groupName, consumerName,
                XReadGroupParams.xReadGroupParams()
                    .count(count)
                    .block((<span class="hljs-type">int</span>) blockMs),
                streams);
        }
    }

    <span class="hljs-comment">/**
     * ç¡®è®¤æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ack</span><span class="hljs-params">(String groupName, String... messageIds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            StreamEntryID[] ids = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamEntryID</span>[messageIds.length];
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; messageIds.length; i++) {
                ids[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamEntryID</span>(messageIds[i]);
            }

            <span class="hljs-type">long</span> <span class="hljs-variable">acked</span> <span class="hljs-operator">=</span> jedis.xack(streamKey, groupName, ids);
            System.out.println(<span class="hljs-string">"ç¡®è®¤æ¶ˆæ¯æ•°: "</span> + acked);
        }
    }

    <span class="hljs-comment">/**
     * è·å–æœªç¡®è®¤æ¶ˆæ¯ (ç”¨äºé‡è¯•)
     */</span>
    <span class="hljs-keyword">public</span> List&lt;StreamEntry&gt; <span class="hljs-title function_">getPendingMessages</span><span class="hljs-params">(String groupName,
                                                String consumerName,
                                                <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-keyword">return</span> jedis.xclaim(streamKey, groupName, consumerName,
                <span class="hljs-number">60000</span>, <span class="hljs-comment">// æœ€å°ç©ºé—²æ—¶é—´</span>
                XClaimParams.xClaimParams().count(count),
                StreamEntryID.MINIMUM_ID);
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥çœ‹ Stream ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printStreamInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// æ¶ˆè´¹è€…ç»„ä¿¡æ¯</span>
            List&lt;StreamGroupInfo&gt; groups = jedis.xinfoGroups(streamKey);
            System.out.println(<span class="hljs-string">"\næ¶ˆè´¹è€…ç»„:"</span>);
            <span class="hljs-keyword">for</span> (StreamGroupInfo group : groups) {
                System.out.printf(<span class="hljs-string">"  ç»„: %s, æ¶ˆè´¹è€…: %d, å¾…å¤„ç†: %d\n"</span>,
                    group.getName(),
                    group.getConsumers(),
                    group.getPending());
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);
        <span class="hljs-type">RedisStreamQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStreamQueue</span>(jedisPool, <span class="hljs-string">"orders"</span>);

        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ç»„</span>
        queue.createConsumerGroup(<span class="hljs-string">"order-processor"</span>);

        <span class="hljs-comment">// ç”Ÿäº§è€…å‘é€æ¶ˆæ¯</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
            Map&lt;String, String&gt; message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            message.put(<span class="hljs-string">"orderId"</span>, <span class="hljs-string">"ORDER_"</span> + i);
            message.put(<span class="hljs-string">"userId"</span>, <span class="hljs-string">"USER_"</span> + (i % <span class="hljs-number">3</span>));
            message.put(<span class="hljs-string">"amount"</span>, String.valueOf(<span class="hljs-number">100</span> + i * <span class="hljs-number">10</span>));

            queue.send(message);
        }

        <span class="hljs-comment">// æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-type">var</span> <span class="hljs-variable">results</span> <span class="hljs-operator">=</span> queue.consume(<span class="hljs-string">"order-processor"</span>,
                    <span class="hljs-string">"consumer-1"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">5000</span>);

                <span class="hljs-keyword">if</span> (results == <span class="hljs-literal">null</span> || results.isEmpty()) {
                    <span class="hljs-keyword">continue</span>;
                }

                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> entry : results) {
                    List&lt;StreamEntry&gt; messages = entry.getValue();
                    <span class="hljs-keyword">for</span> (StreamEntry message : messages) {
                        System.out.printf(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯ [%s]: %s\n"</span>,
                            message.getID(), message.getFields());

                        <span class="hljs-comment">// å¤„ç†å®Œæˆåç¡®è®¤</span>
                        queue.ack(<span class="hljs-string">"order-processor"</span>,
                            message.getID().toString());
                    }
                }
            }
        }).start();

        Thread.sleep(<span class="hljs-number">5000</span>);
        queue.printStreamInfo();

        jedisPool.close();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-24">7. æŒä¹…åŒ–æœºåˆ¶</h3>
<h4 data-id="heading-25">7.1 RDB ä¸ AOF</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æŒä¹…åŒ–æœºåˆ¶å¯¹æ¯”</span>

<span class="hljs-string">RDB</span> <span class="hljs-string">(Redis</span> <span class="hljs-string">Database)</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">ç‰¹ç‚¹:</span>                                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">äºŒè¿›åˆ¶å¿«ç…§æ–‡ä»¶</span>                     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æ–‡ä»¶å°,æ¢å¤å¿«</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">fork</span> <span class="hljs-string">å­è¿›ç¨‹,å¯èƒ½é˜»å¡</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">å¯èƒ½ä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</span>       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">è§¦å‘æ¡ä»¶:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">save</span> <span class="hljs-number">900</span> <span class="hljs-number">1</span>    <span class="hljs-comment"># 900ç§’å†…1æ¬¡ä¿®æ”¹     â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">save</span> <span class="hljs-number">300</span> <span class="hljs-number">10</span>   <span class="hljs-comment"># 300ç§’å†…10æ¬¡ä¿®æ”¹    â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">save</span> <span class="hljs-number">60</span> <span class="hljs-number">10000</span> <span class="hljs-comment"># 60ç§’å†…10000æ¬¡ä¿®æ”¹  â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æ‰§è¡Œ</span> <span class="hljs-string">BGSAVE</span> <span class="hljs-string">å‘½ä»¤</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">ä¸»ä»å¤åˆ¶æ—¶</span>                         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="hljs-string">AOF</span> <span class="hljs-string">(Append</span> <span class="hljs-string">Only</span> <span class="hljs-string">File)</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">ç‰¹ç‚¹:</span>                                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">è¿½åŠ å†™å…¥å‘½ä»¤æ—¥å¿—</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æ•°æ®å®‰å…¨æ€§é«˜</span>                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æ–‡ä»¶å¤§,æ¢å¤æ…¢</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æ”¯æŒé‡å†™å‹ç¼©</span>                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">åŒæ­¥ç­–ç•¥:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-attr">always:</span> <span class="hljs-string">æ¯æ¡å‘½ä»¤éƒ½åŒæ­¥</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-attr">everysec:</span> <span class="hljs-string">æ¯ç§’åŒæ­¥</span> <span class="hljs-string">(æ¨è)</span>          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-attr">no:</span> <span class="hljs-string">æ“ä½œç³»ç»Ÿå†³å®š</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">é‡å†™è§¦å‘:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">auto-aof-rewrite-percentage</span> <span class="hljs-number">100</span>    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">auto-aof-rewrite-min-size</span> <span class="hljs-string">64mb</span>     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="hljs-string">æ··åˆæŒä¹…åŒ–</span> <span class="hljs-string">(Redis</span> <span class="hljs-number">4.0</span><span class="hljs-string">+)</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">RDB</span> <span class="hljs-string">å¤´</span> <span class="hljs-string">(å…¨é‡)</span> <span class="hljs-string">+</span> <span class="hljs-string">AOF</span> <span class="hljs-string">å°¾</span> <span class="hljs-string">(å¢é‡)</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">ä¼˜åŠ¿:</span>                                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">å¿«é€ŸåŠ è½½</span> <span class="hljs-string">RDB</span> <span class="hljs-string">éƒ¨åˆ†</span>                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-bullet">-</span> <span class="hljs-string">AOF</span> <span class="hljs-string">ä¿è¯æ•°æ®å®Œæ•´</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">é…ç½®:</span>                                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">aof-use-rdb-preamble</span> <span class="hljs-literal">yes</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h4 data-id="heading-26">7.2 æŒä¹…åŒ–é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Redis æŒä¹…åŒ–é…ç½®ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisPersistenceConfig</span> {

    <span class="hljs-comment">/**
     * RDB é…ç½®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getRDBConfig</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"""
            # RDB é…ç½®
            save 900 1
            save 300 10
            save 60 10000

            # RDB æ–‡ä»¶å
            dbfilename dump.rdb

            # RDB æ–‡ä»¶ç›®å½•
            dir /var/lib/redis

            # å‹ç¼© RDB æ–‡ä»¶
            rdbcompression yes

            # RDB æ ¡éªŒ
            rdbchecksum yes

            # åå°ä¿å­˜å¤±è´¥æ—¶åœæ­¢å†™å…¥
            stop-writes-on-bgsave-error yes
            """</span>;
    }

    <span class="hljs-comment">/**
     * AOF é…ç½®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getAOFConfig</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"""
            # å¯ç”¨ AOF
            appendonly yes

            # AOF æ–‡ä»¶å
            appendfilename "appendonly.aof"

            # åŒæ­¥ç­–ç•¥
            appendfsync everysec

            # é‡å†™æ—¶æ˜¯å¦åŒæ­¥
            no-appendfsync-on-rewrite no

            # è‡ªåŠ¨é‡å†™æ¡ä»¶
            auto-aof-rewrite-percentage 100
            auto-aof-rewrite-min-size 64mb

            # åŠ è½½æ—¶å¿½ç•¥é”™è¯¯
            aof-load-truncated yes

            # æ··åˆæŒä¹…åŒ–
            aof-use-rdb-preamble yes
            """</span>;
    }

    <span class="hljs-comment">/**
     * æ‰‹åŠ¨è§¦å‘æŒä¹…åŒ–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">triggerPersistence</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-comment">// å¼‚æ­¥ RDB å¿«ç…§</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.bgsave();
        System.out.println(<span class="hljs-string">"BGSAVE: "</span> + result);

        <span class="hljs-comment">// åŒæ­¥ RDB å¿«ç…§ (é˜»å¡)</span>
        <span class="hljs-comment">// jedis.save();</span>

        <span class="hljs-comment">// å¼‚æ­¥ AOF é‡å†™</span>
        jedis.bgrewriteaof();
        System.out.println(<span class="hljs-string">"BGREWRITEAOF started"</span>);
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æŒä¹…åŒ–çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkPersistenceStatus</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> jedis.info(<span class="hljs-string">"persistence"</span>);
        System.out.println(<span class="hljs-string">"æŒä¹…åŒ–çŠ¶æ€:\n"</span> + info);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-27">8. é›†ç¾¤æ¶æ„</h3>
<h4 data-id="heading-28">8.1 ä¸»ä»å¤åˆ¶</h4>
<pre><code class="hljs language-markdown" lang="markdown">ä¸»ä»å¤åˆ¶æ¶æ„

<span class="hljs-code">        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Master  â”‚
        â”‚  (å†™å…¥)  â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
      â”‚      â”‚      â”‚
      â–¼      â–¼      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Slave1â”‚ â”‚Slave2â”‚ â”‚Slave3â”‚
â”‚(è¯»å–)â”‚ â”‚(è¯»å–)â”‚ â”‚(è¯»å–)â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
</span>
ç‰¹ç‚¹:
<span class="hljs-bullet">1.</span> å¼‚æ­¥å¤åˆ¶
<span class="hljs-bullet">2.</span> è¯»å†™åˆ†ç¦»
<span class="hljs-bullet">3.</span> ä»èŠ‚ç‚¹åªè¯»
<span class="hljs-bullet">4.</span> å…¨é‡åŒæ­¥ + å¢é‡åŒæ­¥
</code></pre>
<h4 data-id="heading-29">8.2 å“¨å…µæ¨¡å¼</h4>
<pre><code class="hljs language-markdown" lang="markdown">å“¨å…µæ¨¡å¼æ¶æ„

<span class="hljs-code">    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Sentinel 1â”‚     â”‚Sentinel 2â”‚     â”‚Sentinel 3â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Master  â”‚
                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                        â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         â”‚         â”‚
              â–¼         â–¼         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
         â”‚Slave1â”‚  â”‚Slave2â”‚  â”‚Slave3â”‚
         â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
</span>
åŠŸèƒ½:
<span class="hljs-bullet">1.</span> ç›‘æ§: æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
<span class="hljs-bullet">2.</span> é€šçŸ¥: å‘é€æ•…éšœé€šçŸ¥
<span class="hljs-bullet">3.</span> è‡ªåŠ¨æ•…éšœè½¬ç§»: ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨é€‰ä¸¾
<span class="hljs-bullet">4.</span> é…ç½®æä¾›: å®¢æˆ·ç«¯è·å–ä¸»èŠ‚ç‚¹åœ°å€
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.JedisSentinelPool;

<span class="hljs-comment">/**
 * å“¨å…µæ¨¡å¼è¿æ¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SentinelExample</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JedisSentinelPool <span class="hljs-title function_">createSentinelPool</span><span class="hljs-params">()</span> {
        Set&lt;String&gt; sentinels = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        sentinels.add(<span class="hljs-string">"sentinel1:26379"</span>);
        sentinels.add(<span class="hljs-string">"sentinel2:26379"</span>);
        sentinels.add(<span class="hljs-string">"sentinel3:26379"</span>);

        <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();
        config.setMaxTotal(<span class="hljs-number">100</span>);
        config.setMaxIdle(<span class="hljs-number">20</span>);
        config.setMinIdle(<span class="hljs-number">5</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisSentinelPool</span>(
            <span class="hljs-string">"mymaster"</span>,  <span class="hljs-comment">// ä¸»èŠ‚ç‚¹åç§°</span>
            sentinels,
            config,
            <span class="hljs-number">3000</span>,        <span class="hljs-comment">// è¶…æ—¶æ—¶é—´</span>
            <span class="hljs-literal">null</span>         <span class="hljs-comment">// å¯†ç </span>
        );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">JedisSentinelPool</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> createSentinelPool();

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> pool.getResource()) {
            jedis.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"value = "</span> + value);
        }

        pool.close();
    }
}
</code></pre>
<h4 data-id="heading-30">8.3 Cluster é›†ç¾¤</h4>
<pre><code class="hljs language-markdown" lang="markdown">Redis Cluster æ¶æ„

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Slot: 0 - 16383                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0 - 5460   â”‚ 5461-10922  â”‚   10923 - 16383     â”‚
â”‚             â”‚             â”‚                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ Master1 â”‚ â”‚ â”‚ Master2 â”‚ â”‚ â”‚ Master3 â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
â”‚      â”‚      â”‚      â”‚      â”‚      â”‚              â”‚
â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ Slave1  â”‚ â”‚ â”‚ Slave2  â”‚ â”‚ â”‚ Slave3  â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹:
<span class="hljs-bullet">1.</span> æ•°æ®åˆ†ç‰‡: 16384 ä¸ªæ§½
<span class="hljs-bullet">2.</span> å»ä¸­å¿ƒåŒ–: æ— éœ€å“¨å…µ
<span class="hljs-bullet">3.</span> é«˜å¯ç”¨: èŠ‚ç‚¹æ•…éšœè‡ªåŠ¨è½¬ç§»
<span class="hljs-bullet">4.</span> çº¿æ€§æ‰©å±•: æ·»åŠ èŠ‚ç‚¹è‡ªåŠ¨è¿ç§»
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.JedisCluster;
<span class="hljs-keyword">import</span> redis.clients.jedis.HostAndPort;

<span class="hljs-comment">/**
 * Cluster é›†ç¾¤è¿æ¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClusterExample</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JedisCluster <span class="hljs-title function_">createCluster</span><span class="hljs-params">()</span> {
        Set&lt;HostAndPort&gt; nodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"node1"</span>, <span class="hljs-number">6379</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"node2"</span>, <span class="hljs-number">6379</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"node3"</span>, <span class="hljs-number">6379</span>));

        <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();
        config.setMaxTotal(<span class="hljs-number">100</span>);
        config.setMaxIdle(<span class="hljs-number">20</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(
            nodes,
            <span class="hljs-number">3000</span>,    <span class="hljs-comment">// è¿æ¥è¶…æ—¶</span>
            <span class="hljs-number">3000</span>,    <span class="hljs-comment">// è¯»å–è¶…æ—¶</span>
            <span class="hljs-number">5</span>,       <span class="hljs-comment">// æœ€å¤§é‡è¯•æ¬¡æ•°</span>
            <span class="hljs-literal">null</span>,    <span class="hljs-comment">// å¯†ç </span>
            config
        );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">JedisCluster</span> <span class="hljs-variable">cluster</span> <span class="hljs-operator">=</span> createCluster()) {
            <span class="hljs-comment">// æ“ä½œä¸å•æœºç›¸åŒ</span>
            cluster.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> cluster.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"value = "</span> + value);

            <span class="hljs-comment">// æ‰¹é‡æ“ä½œéœ€è¦ä½¿ç”¨ {} æŒ‡å®šåŒä¸€ä¸ªæ§½</span>
            cluster.mset(<span class="hljs-string">"{user}:1:name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>,
                        <span class="hljs-string">"{user}:1:age"</span>, <span class="hljs-string">"25"</span>);
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-31">9. æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-32">9.1 ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-markdown" lang="markdown">Redis æ€§èƒ½ä¼˜åŒ–æ¸…å•

<span class="hljs-bullet">1.</span> å†…å­˜ä¼˜åŒ–
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ - é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„            â”‚
   â”‚ - è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´            â”‚
   â”‚ - å¯ç”¨å†…å­˜æ·˜æ±°ç­–ç•¥              â”‚
   â”‚ - ä½¿ç”¨å‹ç¼©æ•°æ®                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="hljs-bullet">2.</span> ç½‘ç»œä¼˜åŒ–
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ - ä½¿ç”¨ Pipeline æ‰¹é‡æ“ä½œ        â”‚
   â”‚ - å‡å°‘ç½‘ç»œå¾€è¿”                  â”‚
   â”‚ - ä½¿ç”¨è¿æ¥æ±                     â”‚
   â”‚ - å¯ç”¨ TCP<span class="hljs-emphasis">_NODELAY              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. å‘½ä»¤ä¼˜åŒ–
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ - é¿å…ä½¿ç”¨ KEYS å‘½ä»¤            â”‚
   â”‚ - ä½¿ç”¨ SCAN æ›¿ä»£                â”‚
   â”‚ - é¿å…å¤§ Key                    â”‚
   â”‚ - é¿å…çƒ­ç‚¹ Key                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. æŒä¹…åŒ–ä¼˜åŒ–
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ - æ ¹æ®åœºæ™¯é€‰æ‹© RDB/AOF          â”‚
   â”‚ - å…³é—­ä¸å¿…è¦çš„æŒä¹…åŒ–            â”‚
   â”‚ - ä½¿ç”¨ SSD ç£ç›˜                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-33">9.2 Pipeline æ‰¹é‡æ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Pipeline æ‰¹é‡æ“ä½œ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PipelineExample</span> {

    <span class="hljs-comment">/**
     * æ™®é€šæ–¹å¼ vs Pipeline
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">comparePerformance</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;

        <span class="hljs-comment">// æ™®é€šæ–¹å¼</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; count; i++) {
                jedis.set(<span class="hljs-string">"key:"</span> + i, <span class="hljs-string">"value:"</span> + i);
            }
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">normalTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
        System.out.println(<span class="hljs-string">"æ™®é€šæ–¹å¼è€—æ—¶: "</span> + normalTime + <span class="hljs-string">"ms"</span>);

        <span class="hljs-comment">// Pipeline æ–¹å¼</span>
        start = System.currentTimeMillis();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">Pipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> jedis.pipelined();

            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; count; i++) {
                pipeline.set(<span class="hljs-string">"pipe:"</span> + i, <span class="hljs-string">"value:"</span> + i);
            }

            <span class="hljs-comment">// æ‰§è¡Œå¹¶è·å–ç»“æœ</span>
            List&lt;Object&gt; results = pipeline.syncAndReturnAll();
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">pipelineTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
        System.out.println(<span class="hljs-string">"Pipeline æ–¹å¼è€—æ—¶: "</span> + pipelineTime + <span class="hljs-string">"ms"</span>);

        System.out.printf(<span class="hljs-string">"æ€§èƒ½æå‡: %.2f å€\n"</span>,
            (<span class="hljs-type">double</span>) normalTime / pipelineTime);
    }

    <span class="hljs-comment">/**
     * Pipeline æ‰¹é‡è¯»å–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pipelineRead</span><span class="hljs-params">(JedisPool jedisPool, List&lt;String&gt; keys)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">Pipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> jedis.pipelined();

            <span class="hljs-keyword">for</span> (String key : keys) {
                pipeline.get(key);
            }

            List&lt;Object&gt; results = pipeline.syncAndReturnAll();

            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; keys.size(); i++) {
                System.out.printf(<span class="hljs-string">"%s = %s\n"</span>, keys.get(i), results.get(i));
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);
        comparePerformance(jedisPool);
        jedisPool.close();
    }
}
</code></pre>
<h4 data-id="heading-34">9.3 Lua è„šæœ¬</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Lua è„šæœ¬ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LuaScriptExample</span> {

    <span class="hljs-comment">/**
     * åŸå­æ€§è®¡æ•°å™¨ (å¸¦ä¸Šé™)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Long <span class="hljs-title function_">atomicCounter</span><span class="hljs-params">(Jedis jedis, String key,
                                     <span class="hljs-type">int</span> increment, <span class="hljs-type">int</span> maxValue)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span>
            <span class="hljs-string">"local current = redis.call('get', KEYS[1])\n"</span> +
            <span class="hljs-string">"if not current then\n"</span> +
            <span class="hljs-string">"    current = 0\n"</span> +
            <span class="hljs-string">"else\n"</span> +
            <span class="hljs-string">"    current = tonumber(current)\n"</span> +
            <span class="hljs-string">"end\n"</span> +
            <span class="hljs-string">"local new_value = current + tonumber(ARGV[1])\n"</span> +
            <span class="hljs-string">"if new_value &gt; tonumber(ARGV[2]) then\n"</span> +
            <span class="hljs-string">"    return -1\n"</span> +
            <span class="hljs-string">"end\n"</span> +
            <span class="hljs-string">"redis.call('set', KEYS[1], new_value)\n"</span> +
            <span class="hljs-string">"return new_value"</span>;

        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.eval(script,
            Collections.singletonList(key),
            Arrays.asList(String.valueOf(increment),
                         String.valueOf(maxValue)));

        <span class="hljs-keyword">return</span> (Long) result;
    }

    <span class="hljs-comment">/**
     * é™æµå™¨ (æ»‘åŠ¨çª—å£)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">slidingWindowRateLimiter</span><span class="hljs-params">(
            Jedis jedis, String key, <span class="hljs-type">int</span> maxRequests, <span class="hljs-type">int</span> windowSeconds)</span> {

        <span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span>
            <span class="hljs-string">"local key = KEYS[1]\n"</span> +
            <span class="hljs-string">"local now = tonumber(ARGV[1])\n"</span> +
            <span class="hljs-string">"local window = tonumber(ARGV[2])\n"</span> +
            <span class="hljs-string">"local max_requests = tonumber(ARGV[3])\n"</span> +
            <span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"-- ç§»é™¤çª—å£å¤–çš„è¯·æ±‚\n"</span> +
            <span class="hljs-string">"redis.call('zremrangebyscore', key, 0, now - window * 1000)\n"</span> +
            <span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"-- è·å–å½“å‰è¯·æ±‚æ•°\n"</span> +
            <span class="hljs-string">"local current = redis.call('zcard', key)\n"</span> +
            <span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"if current &lt; max_requests then\n"</span> +
            <span class="hljs-string">"    -- æ·»åŠ å½“å‰è¯·æ±‚\n"</span> +
            <span class="hljs-string">"    redis.call('zadd', key, now, now)\n"</span> +
            <span class="hljs-string">"    -- è®¾ç½®è¿‡æœŸæ—¶é—´\n"</span> +
            <span class="hljs-string">"    redis.call('expire', key, window)\n"</span> +
            <span class="hljs-string">"    return 1\n"</span> +
            <span class="hljs-string">"else\n"</span> +
            <span class="hljs-string">"    return 0\n"</span> +
            <span class="hljs-string">"end"</span>;

        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedis.eval(script,
            Collections.singletonList(key),
            Arrays.asList(
                String.valueOf(System.currentTimeMillis()),
                String.valueOf(windowSeconds),
                String.valueOf(maxRequests)
            ));

        <span class="hljs-keyword">return</span> Long.valueOf(<span class="hljs-number">1L</span>).equals(result);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// æµ‹è¯•è®¡æ•°å™¨</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
                <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> atomicCounter(jedis, <span class="hljs-string">"counter"</span>, <span class="hljs-number">10</span>, <span class="hljs-number">30</span>);
                System.out.println(<span class="hljs-string">"Counter: "</span> + count);
            }

            <span class="hljs-comment">// æµ‹è¯•é™æµå™¨</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:1001"</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">15</span>; i++) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">allowed</span> <span class="hljs-operator">=</span> slidingWindowRateLimiter(
                    jedis, <span class="hljs-string">"rate:"</span> + userId, <span class="hljs-number">10</span>, <span class="hljs-number">60</span>);
                System.out.println(<span class="hljs-string">"Request "</span> + i + <span class="hljs-string">": "</span> +
                    (allowed ? <span class="hljs-string">"å…è®¸"</span> : <span class="hljs-string">"æ‹’ç»"</span>));
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-35">10. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-36">10.1 ç¼“å­˜ç©¿é€</h4>
<pre><code class="hljs language-makefile" lang="makefile">ç¼“å­˜ç©¿é€

è¯·æ±‚ â”€â”€â–¶ ç¼“å­˜ (Miss) â”€â”€â–¶ æ•°æ®åº“ (Not Found)

<span class="hljs-section">åœºæ™¯: æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®,æ¯æ¬¡éƒ½ç©¿é€åˆ°æ•°æ®åº“</span>
<span class="hljs-section">å±å®³: æ•°æ®åº“å‹åŠ›å¤§,å¯èƒ½è¢«æ¶æ„æ”»å‡»</span>

<span class="hljs-section">è§£å†³æ–¹æ¡ˆ:</span>
1. ç¼“å­˜ç©ºå€¼
2. å¸ƒéš†è¿‡æ»¤å™¨
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachePenetrationSolution</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;

    <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨ (ä½¿ç”¨ Redisson)</span>
    <span class="hljs-keyword">private</span> RBloomFilter&lt;Long&gt; bloomFilter;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CachePenetrationSolution</span><span class="hljs-params">(JedisPool jedisPool,
                                   RedissonClient redisson)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;

        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-built_in">this</span>.bloomFilter = redisson.getBloomFilter(<span class="hljs-string">"user:bloom"</span>);
        <span class="hljs-built_in">this</span>.bloomFilter.tryInit(<span class="hljs-number">1000000</span>, <span class="hljs-number">0.01</span>);
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ1: ç¼“å­˜ç©ºå€¼
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserCacheNull</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);

            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"NULL"</span>.equals(value)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç¼“å­˜çš„ç©ºå€¼</span>
                }
                <span class="hljs-keyword">return</span> parseUser(value);
            }

            <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);

            <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// ç¼“å­˜ç©ºå€¼,è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</span>
                jedis.setex(key, <span class="hljs-number">300</span>, <span class="hljs-string">"NULL"</span>);
            } <span class="hljs-keyword">else</span> {
                jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));
            }

            <span class="hljs-keyword">return</span> user;
        }
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ2: å¸ƒéš†è¿‡æ»¤å™¨
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserBloomFilter</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(userId)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¸€å®šä¸å­˜åœ¨</span>
        }

        <span class="hljs-comment">// å¯èƒ½å­˜åœ¨,æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);

            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> parseUser(value);
            }

            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);

            <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));
            }

            <span class="hljs-keyword">return</span> user;
        }
    }

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initBloomFilter</span><span class="hljs-params">(List&lt;Long&gt; userIds)</span> {
        <span class="hljs-keyword">for</span> (Long userId : userIds) {
            bloomFilter.add(userId);
        }
        System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨åˆå§‹åŒ–å®Œæˆ: "</span> + userIds.size());
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getUserFromDB</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿ</span>
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">parseUser</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿ</span>
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toJson</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿ</span>
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
    }
}
</code></pre>
<h4 data-id="heading-37">10.2 ç¼“å­˜å‡»ç©¿</h4>
<pre><code class="hljs language-makefile" lang="makefile">ç¼“å­˜å‡»ç©¿

çƒ­ç‚¹Key â”€â”€â–¶ è¿‡æœŸ â”€â”€â–¶ å¤§é‡è¯·æ±‚åŒæ—¶è®¿é—®æ•°æ®åº“

<span class="hljs-section">åœºæ™¯: çƒ­ç‚¹Keyè¿‡æœŸç¬é—´,å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“</span>
<span class="hljs-section">å±å®³: æ•°æ®åº“ç¬æ—¶å‹åŠ›å¤§</span>

<span class="hljs-section">è§£å†³æ–¹æ¡ˆ:</span>
1. äº’æ–¥é”
2. é€»è¾‘è¿‡æœŸ
3. çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜å‡»ç©¿è§£å†³æ–¹æ¡ˆ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheBreakdownSolution</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CacheBreakdownSolution</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ1: äº’æ–¥é”
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserWithMutex</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);

            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> parseUser(value);
            }

            <span class="hljs-comment">// å°è¯•è·å–é”</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">lockResult</span> <span class="hljs-operator">=</span> jedis.set(lockKey, <span class="hljs-string">"1"</span>,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetParams</span>().nx().ex(<span class="hljs-number">10</span>));

            <span class="hljs-keyword">if</span> (<span class="hljs-string">"OK"</span>.equals(lockResult)) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// åŒé‡æ£€æŸ¥</span>
                    value = jedis.get(key);
                    <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">return</span> parseUser(value);
                    }

                    <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
                    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);

                    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                        jedis.setex(key, <span class="hljs-number">3600</span>, toJson(user));
                    }

                    <span class="hljs-keyword">return</span> user;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾é”</span>
                    jedis.del(lockKey);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ç­‰å¾…é‡è¯•</span>
                Thread.sleep(<span class="hljs-number">50</span>);
                <span class="hljs-keyword">return</span> getUserWithMutex(userId);
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ2: é€»è¾‘è¿‡æœŸ
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserWithLogicalExpire</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(key);

            <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">CacheData</span> <span class="hljs-variable">cacheData</span> <span class="hljs-operator">=</span> parseCacheData(value);

            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() &lt; cacheData.expireTime) {
                <span class="hljs-keyword">return</span> cacheData.user;
            }

            <span class="hljs-comment">// å·²è¿‡æœŸ,å°è¯•è·å–é”æ›´æ–°ç¼“å­˜</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:user:"</span> + userId;
            <span class="hljs-type">String</span> <span class="hljs-variable">lockResult</span> <span class="hljs-operator">=</span> jedis.set(lockKey, <span class="hljs-string">"1"</span>,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SetParams</span>().nx().ex(<span class="hljs-number">10</span>));

            <span class="hljs-keyword">if</span> (<span class="hljs-string">"OK"</span>.equals(lockResult)) {
                <span class="hljs-comment">// å¼‚æ­¥æ›´æ–°ç¼“å­˜</span>
                CompletableFuture.runAsync(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);
                        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                            <span class="hljs-type">CacheData</span> <span class="hljs-variable">newData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheData</span>();
                            newData.user = user;
                            newData.expireTime = System.currentTimeMillis()
                                + <span class="hljs-number">3600000</span>;
                            jedis.set(key, toJson(newData));
                        }
                    } <span class="hljs-keyword">finally</span> {
                        jedis.del(lockKey);
                    }
                });
            }

            <span class="hljs-comment">// è¿”å›æ—§æ•°æ®</span>
            <span class="hljs-keyword">return</span> cacheData.user;
        }
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getUserFromDB</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">parseUser</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toJson</span><span class="hljs-params">(Object obj)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>;
    }

    <span class="hljs-keyword">private</span> CacheData <span class="hljs-title function_">parseCacheData</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheData</span> {
        User user;
        <span class="hljs-type">long</span> expireTime;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
    }
}
</code></pre>
<h4 data-id="heading-38">10.3 ç¼“å­˜é›ªå´©</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç¼“å­˜é›ªå´©

å¤§é‡Key â”€â”€â–¶ åŒæ—¶è¿‡æœŸ â”€â”€â–¶ æ•°æ®åº“å‹åŠ›æš´å¢
   æˆ–
Rediså®•æœº â”€â”€â–¶ æ‰€æœ‰è¯·æ±‚æ‰“åˆ°æ•°æ®åº“

è§£å†³æ–¹æ¡ˆ:
<span class="hljs-bullet">1.</span> è¿‡æœŸæ—¶é—´éšæœºåŒ–
<span class="hljs-bullet">2.</span> é›†ç¾¤é«˜å¯ç”¨
<span class="hljs-bullet">3.</span> ç†”æ–­é™çº§
<span class="hljs-bullet">4.</span> å¤šçº§ç¼“å­˜
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheAvalancheSolution</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPool jedisPool;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CacheAvalancheSolution</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ1: è¿‡æœŸæ—¶é—´éšæœºåŒ–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setWithRandomExpire</span><span class="hljs-params">(String key, String value,
                                    <span class="hljs-type">int</span> baseSeconds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// åŸºç¡€è¿‡æœŸæ—¶é—´ + éšæœºæ—¶é—´ (é¿å…åŒæ—¶è¿‡æœŸ)</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">randomSeconds</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.random() * <span class="hljs-number">300</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">expireSeconds</span> <span class="hljs-operator">=</span> baseSeconds + randomSeconds;

            jedis.setex(key, expireSeconds, value);
        }
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ2: ç†”æ–­é™çº§
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserWithCircuitBreaker</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ Resilience4j æˆ– Sentinel å®ç°ç†”æ–­</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> getUserFromCache(userId);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// ç†”æ–­åè¿”å›é»˜è®¤å€¼æˆ–é™çº§é€»è¾‘</span>
            System.out.println(<span class="hljs-string">"ç†”æ–­é™çº§: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> getDefaultUser();
        }
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ3: é¢„çƒ­ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmUpCache</span><span class="hljs-params">(List&lt;Long&gt; hotUserIds)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">Pipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> jedis.pipelined();

            <span class="hljs-keyword">for</span> (Long userId : hotUserIds) {
                <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getUserFromDB(userId);
                <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">expire</span> <span class="hljs-operator">=</span> <span class="hljs-number">3600</span> + (<span class="hljs-type">int</span>) (Math.random() * <span class="hljs-number">300</span>);
                    pipeline.setex(<span class="hljs-string">"user:"</span> + userId, expire, toJson(user));
                }
            }

            pipeline.sync();
            System.out.println(<span class="hljs-string">"ç¼“å­˜é¢„çƒ­å®Œæˆ: "</span> + hotUserIds.size());
        }
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getUserFromCache</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getUserFromDB</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">getDefaultUser</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toJson</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-keyword">private</span> Long id;
        <span class="hljs-keyword">private</span> String name;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-39">11. Spring Boot é›†æˆ</h3>
<h4 data-id="heading-40">11.1 é…ç½®æ–‡ä»¶</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-comment"># å•æœºæ¨¡å¼</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>

    <span class="hljs-comment"># è¿æ¥æ± é…ç½®</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">10s</span>

    <span class="hljs-comment"># è¶…æ—¶é…ç½®</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">3s</span>
    <span class="hljs-attr">connect-timeout:</span> <span class="hljs-string">5s</span>

    <span class="hljs-comment"># å“¨å…µæ¨¡å¼</span>
    <span class="hljs-comment"># sentinel:</span>
    <span class="hljs-comment">#   master: mymaster</span>
    <span class="hljs-comment">#   nodes:</span>
    <span class="hljs-comment">#     - sentinel1:26379</span>
    <span class="hljs-comment">#     - sentinel2:26379</span>
    <span class="hljs-comment">#     - sentinel3:26379</span>

    <span class="hljs-comment"># é›†ç¾¤æ¨¡å¼</span>
    <span class="hljs-comment"># cluster:</span>
    <span class="hljs-comment">#   nodes:</span>
    <span class="hljs-comment">#     - node1:6379</span>
    <span class="hljs-comment">#     - node2:6379</span>
    <span class="hljs-comment">#     - node3:6379</span>
    <span class="hljs-comment">#   max-redirects: 3</span>
</code></pre>
<h4 data-id="heading-41">11.2 é…ç½®ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.cache.annotation.EnableCaching;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;
<span class="hljs-keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.*;

<span class="hljs-keyword">import</span> java.time.Duration;

<span class="hljs-comment">/**
 * Redis é…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableCaching</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> {

    <span class="hljs-comment">/**
     * é…ç½® RedisTemplate
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(
            RedisConnectionFactory connectionFactory)</span> {

        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
        template.setConnectionFactory(connectionFactory);

        <span class="hljs-comment">// Key åºåˆ—åŒ–</span>
        template.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        template.setHashKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());

        <span class="hljs-comment">// Value åºåˆ—åŒ– (JSON)</span>
        Jackson2JsonRedisSerializer&lt;Object&gt; jsonSerializer =
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jackson2JsonRedisSerializer</span>&lt;&gt;(Object.class);

        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
        objectMapper.setVisibility(PropertyAccessor.ALL,
            JsonAutoDetect.Visibility.ANY);
        objectMapper.activateDefaultTyping(
            LaissezFaireSubTypeValidator.instance,
            ObjectMapper.DefaultTyping.NON_FINAL
        );
        jsonSerializer.setObjectMapper(objectMapper);

        template.setValueSerializer(jsonSerializer);
        template.setHashValueSerializer(jsonSerializer);

        template.afterPropertiesSet();
        <span class="hljs-keyword">return</span> template;
    }

    <span class="hljs-comment">/**
     * é…ç½®ç¼“å­˜ç®¡ç†å™¨
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisCacheManager <span class="hljs-title function_">cacheManager</span><span class="hljs-params">(
            RedisConnectionFactory connectionFactory)</span> {

        <span class="hljs-type">RedisCacheConfiguration</span> <span class="hljs-variable">defaultConfig</span> <span class="hljs-operator">=</span> RedisCacheConfiguration
            .defaultCacheConfig()
            .entryTtl(Duration.ofHours(<span class="hljs-number">1</span>))
            .serializeKeysWith(
                RedisSerializationContext.SerializationPair
                    .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>()))
            .serializeValuesWith(
                RedisSerializationContext.SerializationPair
                    .fromSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>()))
            .disableCachingNullValues();

        <span class="hljs-comment">// é’ˆå¯¹ä¸åŒç¼“å­˜è®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´</span>
        Map&lt;String, RedisCacheConfiguration&gt; configMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        configMap.put(<span class="hljs-string">"users"</span>, defaultConfig.entryTtl(Duration.ofMinutes(<span class="hljs-number">30</span>)));
        configMap.put(<span class="hljs-string">"products"</span>, defaultConfig.entryTtl(Duration.ofHours(<span class="hljs-number">2</span>)));

        <span class="hljs-keyword">return</span> RedisCacheManager.builder(connectionFactory)
            .cacheDefaults(defaultConfig)
            .withInitialCacheConfigurations(configMap)
            .transactionAware()
            .build();
    }
}
</code></pre>
<h4 data-id="heading-42">11.3 ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.cache.annotation.*;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Redis ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserService</span><span class="hljs-params">(RedisTemplate&lt;String, Object&gt; redisTemplate,
                      UserRepository userRepository)</span> {
        <span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;
        <span class="hljs-built_in">this</span>.userRepository = userRepository;
    }

    <span class="hljs-comment">/**
     * æ–¹å¼1: ä½¿ç”¨æ³¨è§£ç¼“å­˜
     */</span>
    <span class="hljs-meta">@Cacheable(value = "users", key = "#id")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
        System.out.println(<span class="hljs-string">"ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·: "</span> + id);
        <span class="hljs-keyword">return</span> userRepository.findById(id).orElse(<span class="hljs-literal">null</span>);
    }

    <span class="hljs-meta">@CachePut(value = "users", key = "#user.id")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">return</span> userRepository.save(user);
    }

    <span class="hljs-meta">@CacheEvict(value = "users", key = "#id")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span> {
        userRepository.deleteById(id);
    }

    <span class="hljs-meta">@CacheEvict(value = "users", allEntries = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearAllUsers</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·ç¼“å­˜"</span>);
    }

    <span class="hljs-comment">/**
     * æ–¹å¼2: ä½¿ç”¨ RedisTemplate
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserWithTemplate</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + id;

        <span class="hljs-comment">// æŸ¥è¯¢ç¼“å­˜</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) redisTemplate.opsForValue().get(key);

        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> user;
        }

        <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“</span>
        user = userRepository.findById(id).orElse(<span class="hljs-literal">null</span>);

        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å†™å…¥ç¼“å­˜</span>
            redisTemplate.opsForValue().set(key, user, <span class="hljs-number">1</span>, TimeUnit.HOURS);
        }

        <span class="hljs-keyword">return</span> user;
    }

    <span class="hljs-comment">/**
     * Hash æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUserToHash</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:hash:"</span> + user.getId();

        redisTemplate.opsForHash().put(key, <span class="hljs-string">"name"</span>, user.getName());
        redisTemplate.opsForHash().put(key, <span class="hljs-string">"email"</span>, user.getEmail());
        redisTemplate.expire(key, <span class="hljs-number">1</span>, TimeUnit.HOURS);
    }

    <span class="hljs-comment">/**
     * List æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToRecentViews</span><span class="hljs-params">(Long userId, Long productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"recent:views:"</span> + userId;

        redisTemplate.opsForList().leftPush(key, productId);
        redisTemplate.opsForList().trim(key, <span class="hljs-number">0</span>, <span class="hljs-number">99</span>);
        redisTemplate.expire(key, <span class="hljs-number">7</span>, TimeUnit.DAYS);
    }

    <span class="hljs-comment">/**
     * Set æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addToFavorites</span><span class="hljs-params">(Long userId, Long productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"favorites:"</span> + userId;
        redisTemplate.opsForSet().add(key, productId);
    }

    <span class="hljs-comment">/**
     * ZSet æ“ä½œ (æ’è¡Œæ¦œ)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateLeaderboard</span><span class="hljs-params">(String userId, <span class="hljs-type">double</span> score)</span> {
        redisTemplate.opsForZSet().add(<span class="hljs-string">"leaderboard"</span>, userId, score);
    }

    <span class="hljs-keyword">public</span> Set&lt;Object&gt; <span class="hljs-title function_">getTopUsers</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForZSet()
            .reverseRange(<span class="hljs-string">"leaderboard"</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>);
    }
}

<span class="hljs-comment">/**
 * ç”¨æˆ·å®ä½“
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> id; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> { <span class="hljs-built_in">this</span>.id = id; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> email; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> { <span class="hljs-built_in">this</span>.email = email; }
}
</code></pre>
<hr/>
<h3 data-id="heading-43">12. ç›‘æ§ä¸è¿ç»´</h3>
<h4 data-id="heading-44">12.1 ç›‘æ§æŒ‡æ ‡</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Redis</span> <span class="hljs-string">å…³é”®ç›‘æ§æŒ‡æ ‡</span>

<span class="hljs-string">å†…å­˜æŒ‡æ ‡:</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">used_memory:</span> <span class="hljs-string">å·²ç”¨å†…å­˜</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">used_memory_rss:</span> <span class="hljs-string">ç‰©ç†å†…å­˜</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">mem_fragmentation_ratio:</span> <span class="hljs-string">å†…å­˜ç¢ç‰‡ç‡</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">maxmemory:</span> <span class="hljs-string">æœ€å¤§å†…å­˜é™åˆ¶</span>

<span class="hljs-string">æ€§èƒ½æŒ‡æ ‡:</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">instantaneous_ops_per_sec:</span> <span class="hljs-string">æ¯ç§’æ“ä½œæ•°</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">hit_rate:</span> <span class="hljs-string">ç¼“å­˜å‘½ä¸­ç‡</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">connected_clients:</span> <span class="hljs-string">è¿æ¥æ•°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">blocked_clients:</span> <span class="hljs-string">é˜»å¡å®¢æˆ·ç«¯æ•°</span>

<span class="hljs-string">æŒä¹…åŒ–æŒ‡æ ‡:</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">rdb_last_bgsave_status:</span> <span class="hljs-string">æœ€åRDBçŠ¶æ€</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">aof_last_rewrite_status:</span> <span class="hljs-string">æœ€åAOFé‡å†™çŠ¶æ€</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">aof_current_size:</span> <span class="hljs-string">å½“å‰AOFå¤§å°</span>

<span class="hljs-string">å¤åˆ¶æŒ‡æ ‡:</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">role:</span> <span class="hljs-string">è§’è‰²</span> <span class="hljs-string">(master/slave)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">connected_slaves:</span> <span class="hljs-string">ä»èŠ‚ç‚¹æ•°</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">master_repl_offset:</span> <span class="hljs-string">å¤åˆ¶åç§»é‡</span>

<span class="hljs-string">å‘Šè­¦é˜ˆå€¼:</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">Metric</span>               <span class="hljs-string">â”‚</span>  <span class="hljs-string">Threshold</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">memory</span> <span class="hljs-string">usage</span>         <span class="hljs-string">â”‚</span>   <span class="hljs-string">&gt;</span> <span class="hljs-number">80</span><span class="hljs-string">%</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">hit</span> <span class="hljs-string">rate</span>             <span class="hljs-string">â”‚</span>   <span class="hljs-string">&lt;</span> <span class="hljs-number">90</span><span class="hljs-string">%</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">connected_clients</span>    <span class="hljs-string">â”‚</span>   <span class="hljs-string">&gt;</span> <span class="hljs-number">5000</span>     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">blocked_clients</span>      <span class="hljs-string">â”‚</span>   <span class="hljs-string">&gt;</span> <span class="hljs-number">10</span>       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">fragmentation_ratio</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">&gt;</span> <span class="hljs-number">1.5</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h4 data-id="heading-45">12.2 ç›‘æ§ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Redis ç›‘æ§
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisMonitoring</span> {

    <span class="hljs-comment">/**
     * è·å– Redis ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printRedisInfo</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-comment">// è·å–æ‰€æœ‰ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> jedis.info();
        System.out.println(info);

        <span class="hljs-comment">// è·å–ç‰¹å®šéƒ¨åˆ†</span>
        System.out.println(<span class="hljs-string">"\n=== Memory ==="</span>);
        System.out.println(jedis.info(<span class="hljs-string">"memory"</span>));

        System.out.println(<span class="hljs-string">"\n=== Stats ==="</span>);
        System.out.println(jedis.info(<span class="hljs-string">"stats"</span>));

        System.out.println(<span class="hljs-string">"\n=== Clients ==="</span>);
        System.out.println(jedis.info(<span class="hljs-string">"clients"</span>));
    }

    <span class="hljs-comment">/**
     * è·å–æ…¢æŸ¥è¯¢æ—¥å¿—
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getSlowLog</span><span class="hljs-params">(Jedis jedis)</span> {
        List&lt;Slowlog&gt; slowlogs = jedis.slowlogGet(<span class="hljs-number">10</span>);

        System.out.println(<span class="hljs-string">"æ…¢æŸ¥è¯¢æ—¥å¿—:"</span>);
        <span class="hljs-keyword">for</span> (Slowlog log : slowlogs) {
            System.out.printf(<span class="hljs-string">"ID: %d, è€—æ—¶: %dÎ¼s, å‘½ä»¤: %s\n"</span>,
                log.getId(),
                log.getExecutionTime(),
                log.getArgs()
            );
        }
    }

    <span class="hljs-comment">/**
     * è®¡ç®—å‘½ä¸­ç‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateHitRate</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> jedis.info(<span class="hljs-string">"stats"</span>);

        <span class="hljs-comment">// è§£æ keyspace_hits å’Œ keyspace_misses</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">hits</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, misses = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (String line : info.split(<span class="hljs-string">"\r\n"</span>)) {
            <span class="hljs-keyword">if</span> (line.startsWith(<span class="hljs-string">"keyspace_hits:"</span>)) {
                hits = Long.parseLong(line.split(<span class="hljs-string">":"</span>)[<span class="hljs-number">1</span>]);
            }
            <span class="hljs-keyword">if</span> (line.startsWith(<span class="hljs-string">"keyspace_misses:"</span>)) {
                misses = Long.parseLong(line.split(<span class="hljs-string">":"</span>)[<span class="hljs-number">1</span>]);
            }
        }

        <span class="hljs-keyword">if</span> (hits + misses &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">hitRate</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) hits / (hits + misses) * <span class="hljs-number">100</span>;
            System.out.printf(<span class="hljs-string">"ç¼“å­˜å‘½ä¸­ç‡: %.2f%%\n"</span>, hitRate);
        }
    }

    <span class="hljs-comment">/**
     * è·å–å¤§ Key
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">findBigKeys</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ SCAN éå†æ‰€æœ‰ key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> <span class="hljs-string">"0"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-keyword">do</span> {
            ScanResult&lt;String&gt; result = jedis.scan(cursor,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScanParams</span>().count(<span class="hljs-number">1000</span>));

            <span class="hljs-keyword">for</span> (String key : result.getResult()) {
                <span class="hljs-comment">// æ£€æŸ¥ key å¤§å°</span>
                <span class="hljs-type">Long</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> jedis.objectEncodingLength(key);
                <span class="hljs-keyword">if</span> (size != <span class="hljs-literal">null</span> &amp;&amp; size &gt; <span class="hljs-number">10240</span>) { <span class="hljs-comment">// 10KB</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> jedis.type(key);
                    System.out.printf(<span class="hljs-string">"å¤§Key: %s, ç±»å‹: %s, å¤§å°: %d bytes\n"</span>,
                        key, type, size);
                    count++;
                }
            }

            cursor = result.getCursor();
        } <span class="hljs-keyword">while</span> (!cursor.equals(<span class="hljs-string">"0"</span>));

        System.out.println(<span class="hljs-string">"å…±å‘ç°å¤§Key: "</span> + count);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            printRedisInfo(jedis);
            getSlowLog(jedis);
            calculateHitRate(jedis);
            <span class="hljs-comment">// findBigKeys(jedis); // ç”Ÿäº§ç¯å¢ƒè°¨æ…ä½¿ç”¨</span>
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-46">13. æ€»ç»“</h3>
<h4 data-id="heading-47">13.1 Redis æ ¸å¿ƒä¼˜åŠ¿</h4>
<pre><code class="hljs language-markdown" lang="markdown">Redis æ ¸å¿ƒä¼˜åŠ¿

<span class="hljs-bullet">1.</span> æ€§èƒ½ â˜…â˜…â˜…â˜…â˜…
<span class="hljs-bullet">   -</span> åŸºäºå†…å­˜,è¯»å†™é€Ÿåº¦å¿«
<span class="hljs-bullet">   -</span> å•çº¿ç¨‹é¿å…é”ç«äº‰
<span class="hljs-bullet">   -</span> IO å¤šè·¯å¤ç”¨

<span class="hljs-bullet">2.</span> æ•°æ®ç»“æ„ â˜…â˜…â˜…â˜…â˜…
<span class="hljs-bullet">   -</span> ä¸°å¯Œçš„æ•°æ®ç±»å‹
<span class="hljs-bullet">   -</span> çµæ´»æ»¡è¶³å„ç§åœºæ™¯
<span class="hljs-bullet">   -</span> åŸå­æ“ä½œ

<span class="hljs-bullet">3.</span> å¯ç”¨æ€§ â˜…â˜…â˜…â˜…â˜…
<span class="hljs-bullet">   -</span> ä¸»ä»å¤åˆ¶
<span class="hljs-bullet">   -</span> å“¨å…µæ¨¡å¼
<span class="hljs-bullet">   -</span> é›†ç¾¤æ¨¡å¼

<span class="hljs-bullet">4.</span> æŒä¹…åŒ– â˜…â˜…â˜…â˜…â˜†
<span class="hljs-bullet">   -</span> RDB å¿«ç…§
<span class="hljs-bullet">   -</span> AOF æ—¥å¿—
<span class="hljs-bullet">   -</span> æ··åˆæŒä¹…åŒ–

<span class="hljs-bullet">5.</span> ç”Ÿæ€ â˜…â˜…â˜…â˜…â˜…
<span class="hljs-bullet">   -</span> å®¢æˆ·ç«¯ä¸°å¯Œ
<span class="hljs-bullet">   -</span> ç¤¾åŒºæ´»è·ƒ
<span class="hljs-bullet">   -</span> æ–‡æ¡£å®Œå–„
</code></pre>
<h4 data-id="heading-48">13.2 æœ€ä½³å®è·µæ€»ç»“</h4>
<ol>
<li>
<p><strong>æ•°æ®ç»“æ„é€‰æ‹©</strong></p>
<ul>
<li>ç®€å•é”®å€¼ç”¨ String</li>
<li>å¯¹è±¡æ•°æ®ç”¨ Hash</li>
<li>é˜Ÿåˆ—ç”¨ List</li>
<li>å»é‡ç”¨ Set</li>
<li>æ’åºç”¨ ZSet</li>
</ul>
</li>
<li>
<p><strong>Key è®¾è®¡è§„èŒƒ</strong></p>
<ul>
<li>ä½¿ç”¨ç»Ÿä¸€å‰ç¼€</li>
<li>é¿å…è¿‡é•¿ Key</li>
<li>è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>ä½¿ç”¨è¿æ¥æ± </li>
<li>Pipeline æ‰¹é‡æ“ä½œ</li>
<li>é¿å…å¤§ Key</li>
<li>é¿å…çƒ­ç‚¹ Key</li>
</ul>
</li>
<li>
<p><strong>é«˜å¯ç”¨éƒ¨ç½²</strong></p>
<ul>
<li>ä¸»ä»å¤åˆ¶</li>
<li>å“¨å…µç›‘æ§</li>
<li>é›†ç¾¤åˆ†ç‰‡</li>
<li>å®šæœŸå¤‡ä»½</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨é…ç½®</strong></p>
<ul>
<li>è®¾ç½®å¯†ç </li>
<li>é™åˆ¶è®¿é—® IP</li>
<li>ç¦ç”¨å±é™©å‘½ä»¤</li>
<li>å®šæœŸæ›´æ–°ç‰ˆæœ¬</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[csså®ç°æ¯›ç»ç’ƒæ»šåŠ¨æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7576378563546333236</link>    <guid>https://juejin.cn/post/7576378563546333236</guid>    <pubDate>2025-11-25T02:51:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563546333236" data-draft-id="7576378563546300468" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="csså®ç°æ¯›ç»ç’ƒæ»šåŠ¨æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T02:51:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="url" content="https://juejin.cn/user/1901536389893546"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            csså®ç°æ¯›ç»ç’ƒæ»šåŠ¨æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1901536389893546/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:51:58.000Z" title="Tue Nov 25 2025 02:51:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#36ace1;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{color:#36ace1}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"";display:block;position:absolute;left:0;top:0;bottom:0;margin:auto;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAF8UlEQVRIS71Wa2wUVRT+7r0zu9t2t/RBaSioPCpYbIUfaEIQUogSAwZDAlUSGwgg/CBATExMCJH1D2hIfOEjFEUEhViCgBgIUCH44OkjPAMGBVqhpUCfW3Zn5z7MuQOE0hYxMdxJdmd25s53vnO+851leMCLPWA8/CfA2TsvL8n7q+nTFfNLG+4VqInHOeJLDQMzdz/3r4DGGDb9lxu+aPcE7U61JHDMDePcuv0O21ShugOefqDdtBie3Dk6K/O+Ab+qOjJiz7Ahv6c8hbDDwRiQlgYGDOcaWyEcjg8On+j71IpJndjGt9XO+jM7+pkywNvbazIfercieSdoJ4bE5sWjyZqMpDdeaQNXMNC34ME3LV8B56+1w3AOgk+EXe/Ub6uiLB6XdH/G/mYjeBCcFwnt3zQqWt4t4NjjnhzQ1CGkBhwOCMFAB71U0qsYgRlwBtQ1tiEJAy44OBdQUmFK3aWS06NLT+ukZAQoKCCjsfbDmk6p78RwX3ncWffmIj8U4kh6GpEwh+9rGy23LDU4GBrrm9DsuDYIGMAYIC/EUNQ7Cq1hn+WM2TI8f+jEyCmvjfn1FssuojHx6tDkyZOaCzr8TNpASzDAk8amlRIrEylcSGsYrcGIstIYWhgDDIM2BiGH3ywFkGAC1U9n38bpVqWGdk6r4HMWrZZaG1D5KLn0qYyBEAKnG1otAxLR8L7Z9nfP13CJHQ/ST4vK8sVHe8JsU0U6uO5hlexo8PI7vNDQomwoBRAwpSmtgJAAztS3QLsOsmBQlBtFJMQhlbbPUBBUR7o2hqHVddLbRsfCPQJ+u3TPw8uGl1yklAlHIJZKo3//XEhlLCtifPFyM7xwCI/lZ8IKTTBbS7pPLIggZZsSQ+zXbT4UYSsnet3UMM5HPT5LGbrDGYQroClyT2Jwnyj9aN949e8mDCwuRFoqKxRHUJ21BSDRELuQYGhvbMVV32Dp2RuxcfHSRBfAYTsbU9nJdFj5EiLkglHkRInC1xoxKbH9hQJIaTDvxxTCUddWl4wg0dCCtqSPDmoVx4Eitpxh64ZtsT6b5ie6pPRkfF90TllxOzEwmipMKRRgHODGgCuJkqIcvDdC2BZ5Y+tlHHMzkAKghbAxcQqQDiKrFBxhqg5MHTivS1tQ+sdsvaQl5Yd6yfdRXNQLsQwXnq/AQFLXEIIjzBSuNaaR0SuEtkQKl9IKjAsbJaWfzo1USDsM6zceDJfeVGgnhhN2N7YOyo5kJz1pa2AbgfrO1gRwXW6vSRQNtddR+EhvKGmseskgTtY2Q7kucYWWgToPHzyUyXry0iXfnBtfl5f/PaWPvPNW/zkOAQegJHltFE5dSaCskHqPVEnqpMAMEgkPtR1pKxyh/N0/vTToubtH1G3RmLjhM8ubKXfWB2mRa9ySOaWS2uT8lTZ0cI6I52Ngv7zAbW9mQVm1cpytu441P38XeXTlQu+e46nyh+bjLkMZRU0MCYTCJWZSG1y7cBWNURpxBlxqFBfEwGnGGhaYPSNwhpSv4DK+/vPynBk9MqRIiOWs8a2WJTm9a+cgh6SaMIMz9W1WjYHHMtv0wSmZdWB9gdsya/rcYVg7JoffCdqlD6ceTpiY59tM0PhJp5WNvra+BQkejCMyBarr8KKYDcZi8sDaCDKYFIGRk+FnSVXzyTO9JxBwF8DLc1dlLn65ooNEYN0fBsu21fTvL6PXnhxXlnLIqqhYYBian4lQ2Lk9ogiALsimiLC1QYfhlV1Hnxh7JfcMqxrpd7U2GFa5t9nOd7Kr+kg4uWvnCpromlJeXlq3Os3ZLOlrZBmNQf1ybVqpxhbA7mRIOCy1+esDOWhIyDv/+3Q7LRbsqH+rKRJ+nba+/+WW7II1s9vvVBuNr7KNF1WUM1bSt5f1Vq01jUVkKfnx8uoti3Or5rbd9782M61azJz/rFywYU/OyKqK1p5G2MS1Z18tGFDwTkvIxcK9RwaMP3a9/tbc62lPj/Nw5B9ey9Ehy/MY4oEqelgNleuyCgdXJlmc3fO5Ll56r5f+n/f+AWFf9jvBgaHpAAAAAElFTkSuQmCC);animation:spin 2s linear 1s infinite}.markdown-body h1{position:relative;font-size:30px;padding:12px 38px;margin:30px 0}.markdown-body h1:before{width:30px;height:30px;background-size:30px 30px}.markdown-body h2{position:relative;font-size:24px;padding:12px 36px;margin:28px 0}.markdown-body h2:before{width:28px;height:28px;background-size:28px 28px}.markdown-body h3{position:relative;font-size:18px;padding:4px 32px;margin:26px 0}.markdown-body h3:before{width:24px;height:24px;background-size:24px 24px}.markdown-body h4{position:relative;padding:4px 28px;font-size:16px;margin:22px 0}.markdown-body h4:before{width:20px;height:20px;background-size:20px 20px}.markdown-body h5{position:relative;padding:4px 26px;font-size:15px;margin:20px 0}.markdown-body h5:before{width:18px;height:18px;background-size:18px 18px}.markdown-body h6{position:relative;padding:4px 22px;font-size:14px;margin:16px 0}.markdown-body h6:before{width:16px;height:16px;background-size:16px 16px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#36ace1,#dff0fe,#36ace1);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:50px;height:24px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAEgElEQVRIS72Va0xbZRjH/z2FcimbchEQFDYRCIRAAWFQ2MaCXBwmUxYDLGGEcRFkH9wmk04zG0Bo2dwNIisERANqhjqdEmhd4nRbuwpsXDYWLLoRgeG4Chu9QHvMOQ0dpTAKH3y/tDnv8/5/z/Oc//scBv6nxdgoJ14gVYPEuITHdTdHY12gRIH0T0KljlqwthqUFHGtzAEsxqwLtPvkdc+FeeI3BgMeAMEhdOqR1mM7xswBrgmKE8pfIUhtm7fbZsft/i7wc98MtrUFxmbU6ByYgFwxjtFp5Q+WpF1mCy9wajXoqqD4E91saOf603e+5B7t99xTkyZJEiKJAl2DE9Xio1HvrBS8IuhVwVUP503swdJ9QWAw1izaoDs6pQT/655BMS9yy3KYiUoM/7adu7NmtnQfx5zWm8Q8Ui3gyGcddyU8rv/STRNQouDGP5/mhTubX4dpPv3DMzh1qS9LwuPWr+i63WVyn5QYj/4d/i4bqmbpoQ+auvBlQYghX6PE4wTSOzV5EUYlb5Q4MDqLk9/3cMRF27spDSNQamUnWZ4ebNB+OKNCyYVeFCZ5wZ5tiePN/UiP2YoQL0cUX+iFt4sNUiLdcaVvHJLecQiWnKVE8s5LvxAXRWeYgHLre0hecgAN0sxr0XBZgbJUP6OiLnaM4ivZCBrzOWBZEIY9rY5E8pl2nM0KMzzLq5aPiXmRzgbQm2VyR8KGGK/ICAFB6IusbvsDwhRf+n/jtSHc/nsGgjR9V6/1TyLa1wGU+FtnO1CbHQTHTSzIFJOYJ1jwcGLTccMTcyhp7oW4KFJ/SV4/IScrc55kQj07WNuOn94Lpw8kCm/Qv3W5HLjbWxsyfuNUO1TzWjAJBloKt2FBS+Jz6ShiA12NupBdLWugQcmn28lPMkONNql3U5cTSD9Lq+qEUqPFt++G0aKL687wDAqb+pAU7IKCuK2493AOPQ9UCNpib6T1tkg+RZ9KKJcNn8sJc1vac8o16jklLWLuOiDqwvHUIKPw7vtTON+iCDKkl/Cx9FeSYET5um1mHt6jN0Dz9ftwYjORudNjTdaBmi7kxvvA1d6Gjs0X/Q5Sp3tMEMSHre9HnDEZAPFCWUNVdliGJVPvqEP1Hbh4yPj9LadSY6fu6gPsCX+B3mq7NYLv2od8fj4aoViMNQGFijos/XVMTXGavgUisQIle71hwVx9KFEutLVjw8GORTuxoEbeJS7iPrmQyy/sIj2hQpqYHO7ZGs95nnZS4y8K8Pfqrb58UZ+IlKqbqNgfQm8da+pC9xjLqo8foFkau2qaCeXSyvzXfA9SDrp1bxJ/DU/jSJKXEWdBR2J/9U0UpwXTFZ/+8S76h/71FvO4A8sTeuqQThDKalOiPLN3BbhiYlaNsm964elkCztrC4xMqeDqYIus2JdB3cbS5l4MTag44qJt9GxbF4gKThRKY59lW13+KCUQ1pZMEwHKviKx4pFSqXzxCn/X9Gr2NO+zw+cTiTbxmUyCqH3GlsWg2kRNhOnHmhlrFkIvHTZt1borWvMCmRnwH4usn58STiycAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body del{color:#36ace1}.markdown-body code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#282c34;color:#4ec9b0;padding:.24em .46em;margin:0 4px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;border-radius:10px;padding:15px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#4ec9b0;background:#282c34}.markdown-body a{text-decoration:none;color:#409eff;border-bottom:1px solid #409eff}.markdown-body a:active,.markdown-body a:hover{color:#007bff;border-bottom:1px solid #007bff}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;padding:8px 26px;background-color:rgba(54,172,225,.75);margin:16px 0;border-left:4px solid #409eff;border-radius:5px}.markdown-body blockquote:before{content:"â";top:10px;left:8px;color:#409eff;font-size:20px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:20px;position:absolute;right:8px;bottom:0;color:#409eff;opacity:.7}.markdown-body blockquote&gt;p{color:#fff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•ˆæœå›¾å±•ç¤ºï¼ˆå»ºè®®ä½¿ç”¨æ‰‹æœºæ¨¡å¼ï¼‰ï¼šÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcodepen.io%2Fxiaoxiaoyuanwang%2Fpen%2FmdxwgRb" title="https://codepen.io/xiaoxiaoyuanwang/pen/mdxwgRb" target="_blank" ref="nofollow noopener noreferrer">åœ¨çº¿è¿è¡Œ</a></p>
<p>Â <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b0c32750dda43a192214cd8afc9ed9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764643959&amp;x-signature=Gvm%2FGb3ONL697SKKv%2BgxsjXJTWE%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge,chrome=1"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"renderer"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"webkit"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span>
      <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
      <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>
    /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-selector-class">.filter_wrapper</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">position</span>: relative;
        <span class="hljs-attribute">overflow</span>: hidden;
      }

      <span class="hljs-selector-class">.filter_bg_wrapper</span> {
        <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">8px</span>);
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      }

      <span class="hljs-selector-class">.filter_cover_img</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">circle</span>(<span class="hljs-number">0%</span>);
      }

      <span class="hljs-selector-tag">img</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">vertical-align</span>: top;
      }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/5a87670618fe4cc59d938f77d41cb816.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/2de8a9c47e054f7ba7bd959ea5041130.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/1f4a4d8d488c46f8acad53892fed08e6.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_wrapper"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_bg_wrapper"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_bg_wrapper"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
            <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/0cdb2d2f90b143c491a5a4b92075fa04.jpeg"</span>
            <span class="hljs-attr">alt</span>=<span class="hljs-string">"å ä½æ¯›ç»ç’ƒå›¾ç‰‡"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_cover_img"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_cover_img"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/0cdb2d2f90b143c491a5a4b92075fa04.jpeg"</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¸…æ™°åœ†ç¯å›¾ç‰‡"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/7b6c25d2f32645f986a26648ef0b0001.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/fbc54f7c6e2a41889d3221e1d3223127.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/d6316c5661344816bbd664a1510f9978.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_wrapper"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_bg_wrapper"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_bg_wrapper"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
            <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/21d2c257112a42d88bcf48892bb3d3c3.jpeg"</span>
            <span class="hljs-attr">alt</span>=<span class="hljs-string">"å ä½æ¯›ç»ç’ƒå›¾ç‰‡"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">id</span>=<span class="hljs-string">"filter_cover_img"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"filter_cover_img"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/21d2c257112a42d88bcf48892bb3d3c3.jpeg"</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ¸…æ™°åœ†ç¯å›¾ç‰‡"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/6013a8f72e6940568964892fa4c48469.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/b4dc389c8cdb404281cd86780e33828f.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img-blog.csdnimg.cn/dbe81da475594345b34f249745c24bd0.jpeg"</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">/**
     * ç›‘å¬æ»šåŠ¨æ¡
     */</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">onscroll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
      <span class="hljs-title function_">handleFilterScroll</span>();
    };

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleFilterScroll</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">let</span> scrollY = <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>;
      <span class="hljs-keyword">let</span> wrappers = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">"filter_wrapper"</span>);
      <span class="hljs-keyword">let</span> filter_cover_imgs =
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">"filter_cover_img"</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; wrappers.<span class="hljs-property">length</span>; index++) {
        <span class="hljs-keyword">const</span> element = wrappers[index];
        <span class="hljs-keyword">let</span> offsetH = element.<span class="hljs-property">offsetHeight</span>; <span class="hljs-comment">// è·å–å…ƒç´ çš„é«˜åº¦</span>
        <span class="hljs-keyword">let</span> offsetW = element.<span class="hljs-property">offsetWidth</span>; <span class="hljs-comment">// è·å–å…ƒç´ çš„å®½åº¦</span>
        <span class="hljs-keyword">let</span> offsetT = element.<span class="hljs-property">offsetTop</span>; <span class="hljs-comment">// å…ƒç´ åˆ°offsetParenté¡¶éƒ¨çš„è·ç¦»</span>
        <span class="hljs-keyword">let</span> percentMax = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(offsetH * offsetH + offsetW * offsetW) / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">let</span> oneTen = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientHeight</span> / <span class="hljs-number">10</span>; <span class="hljs-comment">// ä¿è¯å±å¹•ååˆ†ä¹‹ä¸€å¤„å…¨æ˜¾ç¤º</span>
        <span class="hljs-keyword">let</span> scrollYA = scrollY + offsetH / <span class="hljs-number">2</span> + oneTen;
        <span class="hljs-keyword">if</span> (scrollYA &gt; offsetT &amp;&amp; scrollYA &lt; offsetT + offsetH + oneTen) {
          <span class="hljs-keyword">let</span> percent = ((scrollYA - offsetT) * <span class="hljs-number">100</span>) / percentMax;
          filter_cover_imgs[index].<span class="hljs-property">style</span>.<span class="hljs-property">clipPath</span> = <span class="hljs-string">`circle(<span class="hljs-subst">${percent}</span>%)`</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (scrollYA - offsetT &lt; <span class="hljs-number">0</span>) {
            filter_cover_imgs[index].<span class="hljs-property">style</span>.<span class="hljs-property">clipPath</span> = <span class="hljs-string">`circle(<span class="hljs-subst">${<span class="hljs-number">0</span>}</span>%)`</span>;
          }
        }
      }
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS è‡ªå®šä¹‰å±æ€§æ·±åº¦åº”ç”¨ï¼šæ„å»ºåŠ¨æ€æ ·å¼ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7576158801973526574</link>    <guid>https://juejin.cn/post/7576158801973526574</guid>    <pubDate>2025-11-25T02:52:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576158801973526574" data-draft-id="7576165316251467785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" CSS è‡ªå®šä¹‰å±æ€§æ·±åº¦åº”ç”¨ï¼šæ„å»ºåŠ¨æ€æ ·å¼ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-25T02:52:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±¤å§†Tom"/> <meta itemprop="url" content="https://juejin.cn/user/4112607842680478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             CSS è‡ªå®šä¹‰å±æ€§æ·±åº¦åº”ç”¨ï¼šæ„å»ºåŠ¨æ€æ ·å¼ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4112607842680478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±¤å§†Tom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:52:25.000Z" title="Tue Nov 25 2025 02:52:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰å·²ç»æˆä¸ºç°ä»£å‰ç«¯å¼€å‘çš„æ ¸å¿ƒå·¥å…·ä¹‹ä¸€ã€‚è™½ç„¶æˆ‘ä»¬åœ¨å‰é¢å·²ç»æ¢è®¨äº†åŸºç¡€çš„ä¸»é¢˜åˆ‡æ¢ï¼Œä½† CSS å˜é‡çš„èƒ½åŠ›è¿œä¸æ­¢äºæ­¤ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ CSS è‡ªå®šä¹‰å±æ€§çš„é«˜çº§åº”ç”¨æŠ€å·§ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€æ¡ä»¶é€»è¾‘ã€çŠ¶æ€ç®¡ç†å’Œå¤æ‚çš„å“åº”å¼è®¾è®¡æ¨¡å¼ã€‚</p>
<h2 data-id="heading-1">1. CSS è‡ªå®šä¹‰å±æ€§é«˜çº§ API</h2>
<h3 data-id="heading-2">1.1 æ•°å­¦è¿ç®—ä¸è®¡ç®—</h3>
<p><strong>åŸºç¡€è®¡ç®—å‡½æ•°ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* åŸºç¡€å•ä½ç³»ç»Ÿ */</span>
  <span class="hljs-attr">--base-unit</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attr">--golden-ratio</span>: <span class="hljs-number">1.618</span>;
  <span class="hljs-attr">--scale-factor</span>: <span class="hljs-number">1.25</span>;

  <span class="hljs-comment">/* æ•°å­¦è¿ç®— */</span>
  <span class="hljs-attr">--space-1</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-unit) * <span class="hljs-number">1</span>); <span class="hljs-comment">/* 8px */</span>
  <span class="hljs-attr">--space-2</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-unit) * <span class="hljs-number">2</span>); <span class="hljs-comment">/* 16px */</span>
  <span class="hljs-attr">--space-3</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-unit) * <span class="hljs-number">3</span>); <span class="hljs-comment">/* 24px */</span>
  <span class="hljs-attr">--space-4</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-unit) * <span class="hljs-number">4</span>); <span class="hljs-comment">/* 32px */</span>

  <span class="hljs-comment">/* å¤æ‚è®¡ç®— */</span>
  <span class="hljs-attr">--container-width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vw</span> - <span class="hljs-number">2</span> * <span class="hljs-built_in">var</span>(--space-<span class="hljs-number">4</span>));
  <span class="hljs-attr">--content-width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--container-width) * <span class="hljs-number">0.8</span>);
  <span class="hljs-attr">--sidebar-width</span>: <span class="hljs-built_in">calc</span>(
    <span class="hljs-built_in">var</span>(--container-width) - <span class="hljs-built_in">var</span>(--content-width) - <span class="hljs-built_in">var</span>(--space-<span class="hljs-number">3</span>)
  );

  <span class="hljs-comment">/* é»„é‡‘æ¯”ä¾‹å­—ä½“ç³»ç»Ÿ */</span>
  <span class="hljs-attr">--font-xs</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1rem</span> / <span class="hljs-built_in">var</span>(--golden-ratio));
  <span class="hljs-attr">--font-sm</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--font-xs) * <span class="hljs-built_in">var</span>(--golden-ratio));
  <span class="hljs-attr">--font-base</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attr">--font-lg</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--font-base) * <span class="hljs-built_in">var</span>(--golden-ratio));
  <span class="hljs-attr">--font-xl</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--font-lg) * <span class="hljs-built_in">var</span>(--golden-ratio));
}

<span class="hljs-comment">/* å“åº”å¼è®¡ç®— */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--base-unit</span>: <span class="hljs-number">12px</span>; <span class="hljs-comment">/* æ›´å¤§å±å¹•ä½¿ç”¨æ›´å¤§åŸºç¡€å•ä½ */</span>
    <span class="hljs-attr">--scale-factor</span>: <span class="hljs-number">1.5</span>;
  }
}
</code></pre>
<p><strong>é«˜çº§æ•°å­¦å‡½æ•°ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* clamp() å‡½æ•°åº”ç”¨ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* å“åº”å¼å­—ä½“å¤§å° */</span>
  <span class="hljs-attr">--fluid-text-sm</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.875rem</span>, <span class="hljs-number">0.8rem</span> + <span class="hljs-number">0.5vw</span>, <span class="hljs-number">1rem</span>);
  <span class="hljs-attr">--fluid-text-base</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">0.9rem</span> + <span class="hljs-number">0.5vw</span>, <span class="hljs-number">1.125rem</span>);
  <span class="hljs-attr">--fluid-text-lg</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.125rem</span>, <span class="hljs-number">1rem</span> + <span class="hljs-number">0.75vw</span>, <span class="hljs-number">1.5rem</span>);
  <span class="hljs-attr">--fluid-text-xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.25rem</span>, <span class="hljs-number">1.1rem</span> + <span class="hljs-number">1vw</span>, <span class="hljs-number">2rem</span>);

  <span class="hljs-comment">/* å“åº”å¼é—´è· */</span>
  <span class="hljs-attr">--fluid-space-sm</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">0.4rem</span> + <span class="hljs-number">0.5vw</span>, <span class="hljs-number">1rem</span>);
  <span class="hljs-attr">--fluid-space-md</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">0.8rem</span> + <span class="hljs-number">1vw</span>, <span class="hljs-number">2rem</span>);
  <span class="hljs-attr">--fluid-space-lg</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.5rem</span>, <span class="hljs-number">1.2rem</span> + <span class="hljs-number">1.5vw</span>, <span class="hljs-number">3rem</span>);

  <span class="hljs-comment">/* å®¹å™¨æŸ¥è¯¢å•ä½ */</span>
  <span class="hljs-attr">--container-padding</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">5</span>cqw, <span class="hljs-number">3rem</span>);
  <span class="hljs-attr">--grid-gap</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">2</span>cqw, <span class="hljs-number">2rem</span>);
}

<span class="hljs-comment">/* min() / max() å‡½æ•° */</span>
<span class="hljs-selector-class">.responsive-element</span> {
  <span class="hljs-comment">/* æœ€å¤§å®½åº¦é™åˆ¶ */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">600px</span>);

  <span class="hljs-comment">/* æœ€å°é—´è·ä¿è¯ */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">max</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">3vw</span>);

  <span class="hljs-comment">/* ç»„åˆä½¿ç”¨ */</span>
  <span class="hljs-attribute">margin</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">2vw</span>, <span class="hljs-number">2rem</span>) <span class="hljs-built_in">max</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">5vw</span>);
}
</code></pre>
<h3 data-id="heading-3">1.2 æ¡ä»¶é€»è¾‘ä¸çŠ¶æ€ç®¡ç†</h3>
<p><strong>CSS å˜é‡çš„æ¡ä»¶é€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å¸ƒå°”å€¼å˜é‡ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--is-mobile</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 0 = false, 1 = true */</span>
  <span class="hljs-attr">--is-dark-mode</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--is-reduced-motion</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--has-hover</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-comment">/* æ¡ä»¶æ ·å¼åº”ç”¨ */</span>
<span class="hljs-selector-class">.adaptive-component</span> {
  <span class="hljs-comment">/* åŸºäºè®¾å¤‡ç±»å‹çš„é—´è· */</span>
  <span class="hljs-attr">--mobile-padding</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-mobile) * <span class="hljs-number">0.5rem</span>);
  <span class="hljs-attr">--desktop-padding</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-mobile)) * <span class="hljs-number">1rem</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--mobile-padding) + <span class="hljs-built_in">var</span>(--desktop-padding));

  <span class="hljs-comment">/* åŸºäºä¸»é¢˜çš„é¢œè‰² */</span>
  <span class="hljs-attr">--light-bg</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-dark-mode)) * <span class="hljs-number">255</span>);
  <span class="hljs-attr">--dark-bg</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-dark-mode) * <span class="hljs-number">32</span>);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-built_in">var</span>(--light-bg), <span class="hljs-built_in">var</span>(--light-bg), <span class="hljs-built_in">var</span>(--light-bg)) <span class="hljs-built_in">rgb</span>(
      <span class="hljs-built_in">var</span>(--dark-bg),
      <span class="hljs-built_in">var</span>(--dark-bg),
      <span class="hljs-built_in">var</span>(--dark-bg)
    );

  <span class="hljs-comment">/* åŸºäºåŠ¨ç”»åå¥½çš„è¿‡æ¸¡ */</span>
  <span class="hljs-attr">--animation-duration</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-reduced-motion)) * <span class="hljs-number">0.3s</span>);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-built_in">var</span>(--animation-duration) ease;
}

<span class="hljs-comment">/* åª’ä½“æŸ¥è¯¢æ›´æ–°å˜é‡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--is-mobile</span>: <span class="hljs-number">1</span>;
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--is-dark-mode</span>: <span class="hljs-number">1</span>;
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-reduced-motion</span>: reduce) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--is-reduced-motion</span>: <span class="hljs-number">1</span>;
  }
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">hover</span>: none) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--has-hover</span>: <span class="hljs-number">0</span>;
  }
}
</code></pre>
<p><strong>ç»„ä»¶çŠ¶æ€å˜é‡ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç»„ä»¶çŠ¶æ€ç³»ç»Ÿ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* çŠ¶æ€å˜é‡ */</span>
  <span class="hljs-attr">--is-pressed</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--is-focused</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--is-disabled</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attr">--is-loading</span>: <span class="hljs-number">0</span>;

  <span class="hljs-comment">/* åŸºç¡€æ ·å¼ */</span>
  <span class="hljs-attr">--button-scale</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-pressed) * <span class="hljs-number">0.05</span>);
  <span class="hljs-attr">--button-opacity</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-disabled) * <span class="hljs-number">0.5</span>);
  <span class="hljs-attr">--button-blur</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-loading) * <span class="hljs-number">2px</span>);

  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-built_in">var</span>(--button-scale));
  <span class="hljs-attribute">opacity</span>: <span class="hljs-built_in">var</span>(--button-opacity);
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-built_in">var</span>(--button-blur));

  <span class="hljs-comment">/* ç„¦ç‚¹æŒ‡ç¤º */</span>
  <span class="hljs-attr">--focus-ring-opacity</span>: <span class="hljs-built_in">var</span>(--is-focused);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-focused) * <span class="hljs-number">3px</span>) <span class="hljs-built_in">rgba</span>(
      <span class="hljs-number">59</span>,
      <span class="hljs-number">130</span>,
      <span class="hljs-number">246</span>,
      <span class="hljs-built_in">var</span>(--focus-ring-opacity)
    );

  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
}

<span class="hljs-comment">/* JavaScript æ§åˆ¶çŠ¶æ€ */</span>
<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:active</span> {
  <span class="hljs-attr">--is-pressed</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:focus</span>-visible {
  <span class="hljs-attr">--is-focused</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.button</span><span class="hljs-selector-attr">[disabled]</span> {
  <span class="hljs-attr">--is-disabled</span>: <span class="hljs-number">1</span>;
}
<span class="hljs-selector-class">.button</span><span class="hljs-selector-attr">[data-loading=<span class="hljs-string">'true'</span>]</span> {
  <span class="hljs-attr">--is-loading</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<h3 data-id="heading-4">1.3 åŠ¨æ€é¢œè‰²ç³»ç»Ÿ</h3>
<p><strong>HSL é¢œè‰²ç©ºé—´æ“ä½œï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* ä¸»è‰²è°ƒå®šä¹‰ */</span>
  <span class="hljs-attr">--primary-hue</span>: <span class="hljs-number">220</span>;
  <span class="hljs-attr">--primary-saturation</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attr">--primary-lightness</span>: <span class="hljs-number">50%</span>;

  <span class="hljs-comment">/* åŠ¨æ€é¢œè‰²ç”Ÿæˆ */</span>
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">var</span>(--primary-hue),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">var</span>(--primary-lightness)
  );
  <span class="hljs-attr">--primary-light</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">var</span>(--primary-hue),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--primary-lightness) + <span class="hljs-number">20%</span>)
  );
  <span class="hljs-attr">--primary-dark</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">var</span>(--primary-hue),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--primary-lightness) - <span class="hljs-number">20%</span>)
  );

  <span class="hljs-comment">/* å¯¹æ¯”è‰²ç”Ÿæˆ */</span>
  <span class="hljs-attr">--complementary-hue</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--primary-hue) + <span class="hljs-number">180</span>);
  <span class="hljs-attr">--complementary-color</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">var</span>(--complementary-hue),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">var</span>(--primary-lightness)
  );

  <span class="hljs-comment">/* ä¸‰è‰²è°ƒå’Œ */</span>
  <span class="hljs-attr">--triadic-1</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--primary-hue) + <span class="hljs-number">120</span>),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">var</span>(--primary-lightness)
  );
  <span class="hljs-attr">--triadic-2</span>: <span class="hljs-built_in">hsl</span>(
    <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--primary-hue) + <span class="hljs-number">240</span>),
    <span class="hljs-built_in">var</span>(--primary-saturation),
    <span class="hljs-built_in">var</span>(--primary-lightness)
  );

  <span class="hljs-comment">/* å•è‰²è°ƒè‰²æ¿ */</span>
  <span class="hljs-attr">--mono-1</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary-hue), <span class="hljs-built_in">var</span>(--primary-saturation), <span class="hljs-number">90%</span>);
  <span class="hljs-attr">--mono-2</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary-hue), <span class="hljs-built_in">var</span>(--primary-saturation), <span class="hljs-number">70%</span>);
  <span class="hljs-attr">--mono-3</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary-hue), <span class="hljs-built_in">var</span>(--primary-saturation), <span class="hljs-number">50%</span>);
  <span class="hljs-attr">--mono-4</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary-hue), <span class="hljs-built_in">var</span>(--primary-saturation), <span class="hljs-number">30%</span>);
  <span class="hljs-attr">--mono-5</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary-hue), <span class="hljs-built_in">var</span>(--primary-saturation), <span class="hljs-number">10%</span>);
}

<span class="hljs-comment">/* åŠ¨æ€ä¸»é¢˜è‰²ç”Ÿæˆå™¨ */</span>
<span class="hljs-selector-class">.theme-generator</span> {
  <span class="hljs-attr">--theme-hue</span>: <span class="hljs-built_in">var</span>(--primary-hue);
  <span class="hljs-attr">--theme-sat</span>: <span class="hljs-built_in">var</span>(--primary-saturation);

  <span class="hljs-comment">/* è¯­ä¹‰åŒ–é¢œè‰² */</span>
  <span class="hljs-attr">--success-color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">120</span>, <span class="hljs-built_in">var</span>(--theme-sat), <span class="hljs-number">45%</span>);
  <span class="hljs-attr">--warning-color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">45</span>, <span class="hljs-built_in">var</span>(--theme-sat), <span class="hljs-number">55%</span>);
  <span class="hljs-attr">--error-color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">var</span>(--theme-sat), <span class="hljs-number">55%</span>);
  <span class="hljs-attr">--info-color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">200</span>, <span class="hljs-built_in">var</span>(--theme-sat), <span class="hljs-number">55%</span>);

  <span class="hljs-comment">/* ä¸­æ€§è‰²åŸºäºä¸»è‰²è°ƒ */</span>
  <span class="hljs-attr">--gray-50</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">98%</span>);
  <span class="hljs-attr">--gray-100</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">95%</span>);
  <span class="hljs-attr">--gray-200</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">85%</span>);
  <span class="hljs-attr">--gray-300</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">75%</span>);
  <span class="hljs-attr">--gray-400</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">65%</span>);
  <span class="hljs-attr">--gray-500</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--theme-hue), <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--theme-sat) * <span class="hljs-number">0.1</span>), <span class="hljs-number">55%</span>);
}
</code></pre>
<h2 data-id="heading-5">2. æµè§ˆå™¨å…¼å®¹æ€§åˆ†æ</h2>
<h3 data-id="heading-6">2.1 CSS è‡ªå®šä¹‰å±æ€§æ”¯æŒæƒ…å†µ</h3>
<p><strong>é«˜çº§ç‰¹æ€§å…¼å®¹æ€§ï¼š</strong></p>













































































<table><thead><tr><th>ç‰¹æ€§</th><th>Chrome</th><th>Firefox</th><th>Safari</th><th>Edge</th><th>IE</th><th>æ”¯æŒæƒ…å†µ</th></tr></thead><tbody><tr><td>åŸºç¡€è‡ªå®šä¹‰å±æ€§</td><td>49+</td><td>31+</td><td>9.1+</td><td>15+</td><td>âŒ</td><td>ä¼˜ç§€ âœ…</td></tr><tr><td>calc() å†…å˜é‡è¿ç®—</td><td>49+</td><td>31+</td><td>9.1+</td><td>15+</td><td>âŒ</td><td>ä¼˜ç§€ âœ…</td></tr><tr><td>åµŒå¥— var() å‡½æ•°</td><td>49+</td><td>31+</td><td>9.1+</td><td>15+</td><td>âŒ</td><td>ä¼˜ç§€ âœ…</td></tr><tr><td>clamp() / min() / max()</td><td>79+</td><td>75+</td><td>13.1+</td><td>79+</td><td>âŒ</td><td>è‰¯å¥½ âœ…</td></tr><tr><td>ç¯å¢ƒå˜é‡ env()</td><td>69+</td><td>âŒ</td><td>11.1+</td><td>79+</td><td>âŒ</td><td>éƒ¨åˆ† âš ï¸</td></tr><tr><td>CSS æ³¨å†Œå±æ€§ @property</td><td>85+</td><td>âŒ</td><td>âŒ</td><td>85+</td><td>âŒ</td><td>éƒ¨åˆ† âš ï¸</td></tr><tr><td>å®¹å™¨æŸ¥è¯¢å•ä½ (cq*)</td><td>105+</td><td>110+</td><td>16+</td><td>105+</td><td>âŒ</td><td>è¾ƒæ–° âš ï¸</td></tr></tbody></table>
<p><strong>è®¡ç®—å‡½æ•°å…¼å®¹æ€§ï¼š</strong></p>





































































<table><thead><tr><th>å‡½æ•°</th><th>Chrome</th><th>Firefox</th><th>Safari</th><th>Edge</th><th>ä½¿ç”¨å»ºè®®</th></tr></thead><tbody><tr><td>calc()</td><td>26+</td><td>16+</td><td>7+</td><td>12+</td><td>å®‰å…¨ä½¿ç”¨</td></tr><tr><td>min()</td><td>79+</td><td>75+</td><td>11.1+</td><td>79+</td><td>æä¾›åå¤‡å€¼</td></tr><tr><td>max()</td><td>79+</td><td>75+</td><td>11.1+</td><td>79+</td><td>æä¾›åå¤‡å€¼</td></tr><tr><td>clamp()</td><td>79+</td><td>75+</td><td>13.1+</td><td>79+</td><td>æ¸è¿›å¢å¼ºä½¿ç”¨</td></tr><tr><td>round()</td><td>125+</td><td>âŒ</td><td>âŒ</td><td>125+</td><td>å®éªŒæ€§ï¼Œæ…ç”¨</td></tr><tr><td>mod()</td><td>125+</td><td>âŒ</td><td>âŒ</td><td>125+</td><td>å®éªŒæ€§ï¼Œæ…ç”¨</td></tr><tr><td>rem()</td><td>125+</td><td>âŒ</td><td>âŒ</td><td>125+</td><td>å®éªŒæ€§ï¼Œæ…ç”¨</td></tr></tbody></table>
<h3 data-id="heading-7">2.2 å…¼å®¹æ€§ç­–ç•¥</h3>
<p><strong>æ¸è¿›å¢å¼ºå®ç°ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€åå¤‡æ–¹æ¡ˆ */</span>
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-comment">/* å›ºå®šå€¼åå¤‡ */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}

<span class="hljs-comment">/* æ”¯æŒ CSS å˜é‡çš„æµè§ˆå™¨ */</span>
<span class="hljs-keyword">@supports</span> (<span class="hljs-attribute">--custom</span>: property) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--font-size-base</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attr">--spacing-md</span>: <span class="hljs-number">1rem</span>;
    <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#333</span>;
  }

  <span class="hljs-selector-class">.element</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-size-base);
    <span class="hljs-attribute">margin</span>: <span class="hljs-built_in">var</span>(--spacing-md);
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
  }
}

<span class="hljs-comment">/* æ”¯æŒç°ä»£æ•°å­¦å‡½æ•° */</span>
<span class="hljs-keyword">@supports</span> (<span class="hljs-attribute">width</span>: clamp(<span class="hljs-number">1rem</span>, <span class="hljs-number">5vw</span>, <span class="hljs-number">3rem</span>)) {
  <span class="hljs-selector-class">.modern-element</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">2.5vw</span>, <span class="hljs-number">1.5rem</span>);
    <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">3vw</span>, <span class="hljs-number">2rem</span>);
  }
}

<span class="hljs-comment">/* ä¸æ”¯æŒæ—¶çš„ JavaScript æ£€æµ‹ */</span>
<span class="hljs-keyword">@supports</span> <span class="hljs-keyword">not</span> (<span class="hljs-attribute">--custom</span>: property) {
  <span class="hljs-selector-class">.fallback-indicator</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">'CSS Variables not supported'</span>;
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">background</span>: orange;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;
  }
}
</code></pre>
<p><strong>JavaScript å…¼å®¹æ€§æ£€æµ‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// CSS å˜é‡æ”¯æŒæ£€æµ‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">supportsCSSVariables</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">CSS</span> &amp;&amp; <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'color'</span>, <span class="hljs-string">'var(--test)'</span>);
}

<span class="hljs-comment">// æ•°å­¦å‡½æ•°æ”¯æŒæ£€æµ‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">supportsMathFunctions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">calc</span>: <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'width'</span>, <span class="hljs-string">'calc(1px + 1px)'</span>),
    <span class="hljs-attr">min</span>: <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'width'</span>, <span class="hljs-string">'min(1px, 2px)'</span>),
    <span class="hljs-attr">max</span>: <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'width'</span>, <span class="hljs-string">'max(1px, 2px)'</span>),
    <span class="hljs-attr">clamp</span>: <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'width'</span>, <span class="hljs-string">'clamp(1px, 2px, 3px)'</span>),
  };
}

<span class="hljs-comment">// ç¯å¢ƒå˜é‡æ”¯æŒæ£€æµ‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">supportsEnvironmentVariables</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">CSS</span>.<span class="hljs-title function_">supports</span>(<span class="hljs-string">'padding'</span>, <span class="hljs-string">'env(safe-area-inset-top)'</span>);
}

<span class="hljs-comment">// ç‰¹æ€§æ£€æµ‹å’Œé™çº§å¤„ç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CSSVariablePolyfill</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">supported</span> = <span class="hljs-title function_">supportsCSSVariables</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mathSupport</span> = <span class="hljs-title function_">supportsMathFunctions</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }

  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">supported</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPolyfill</span>();
    }

    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">mathSupport</span>.<span class="hljs-property">clamp</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">implementClampFallback</span>();
    }
  }

  <span class="hljs-title function_">loadPolyfill</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åŠ è½½ CSS å˜é‡ polyfill</span>
    <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
    script.<span class="hljs-property">src</span> = <span class="hljs-string">'https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2'</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script);
  }

  <span class="hljs-title function_">implementClampFallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®ç° clamp() é™çº§</span>
    <span class="hljs-keyword">const</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'[data-clamp]'</span>);
    elements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> clampValue = el.<span class="hljs-property">dataset</span>.<span class="hljs-property">clamp</span>;
      <span class="hljs-keyword">const</span> [min, preferred, max] = clampValue.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-title function_">trim</span>());

      <span class="hljs-comment">// ä½¿ç”¨ JavaScript å®ç° clamp é€»è¾‘</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateSize</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">const</span> preferredPx = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToPx</span>(preferred, el);
        <span class="hljs-keyword">const</span> minPx = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToPx</span>(min, el);
        <span class="hljs-keyword">const</span> maxPx = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToPx</span>(max, el);

        <span class="hljs-keyword">const</span> clampedValue = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(minPx, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(preferredPx, maxPx));
        el.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = clampedValue + <span class="hljs-string">'px'</span>;
      };

      <span class="hljs-title function_">updateSize</span>();
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, updateSize);
    });
  }

  <span class="hljs-title function_">convertToPx</span>(<span class="hljs-params">value, element</span>) {
    <span class="hljs-comment">// å°† rem, em, vw ç­‰å•ä½è½¬æ¢ä¸º px</span>
    <span class="hljs-keyword">const</span> temp = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    temp.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = value;
    temp.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>;
    temp.<span class="hljs-property">style</span>.<span class="hljs-property">visibility</span> = <span class="hljs-string">'hidden'</span>;
    element.<span class="hljs-title function_">appendChild</span>(temp);
    <span class="hljs-keyword">const</span> px = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-title function_">getComputedStyle</span>(temp).<span class="hljs-property">width</span>);
    element.<span class="hljs-title function_">removeChild</span>(temp);
    <span class="hljs-keyword">return</span> px;
  }
}
</code></pre>
<h2 data-id="heading-8">3. å®æˆ˜æ¼”ç¤ºï¼šåŠ¨æ€è®¾è®¡ç³»ç»Ÿ</h2>
<h3 data-id="heading-9">3.1 å®Œæ•´çš„å˜é‡é©±åŠ¨ç»„ä»¶ç³»ç»Ÿ</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSSè‡ªå®šä¹‰å±æ€§æ·±åº¦åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-comment">/* CSS å˜é‡é«˜çº§åº”ç”¨ç³»ç»Ÿ */</span>
      <span class="hljs-selector-pseudo">:root</span> {
        <span class="hljs-comment">/* åŸºç¡€è®¾è®¡ä»¤ç‰Œ */</span>
        <span class="hljs-attr">--base-unit</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attr">--golden-ratio</span>: <span class="hljs-number">1.618</span>;
        <span class="hljs-attr">--perfect-fourth</span>: <span class="hljs-number">1.333</span>;
        <span class="hljs-attr">--major-third</span>: <span class="hljs-number">1.25</span>;

        <span class="hljs-comment">/* ä¸»é¢˜è‰²å½©ç³»ç»Ÿ */</span>
        <span class="hljs-attr">--brand-hue</span>: <span class="hljs-number">220</span>;
        <span class="hljs-attr">--brand-saturation</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attr">--brand-lightness</span>: <span class="hljs-number">50%</span>;

        <span class="hljs-comment">/* åŠ¨æ€é¢œè‰²ç”Ÿæˆ */</span>
        <span class="hljs-attr">--color-primary</span>: <span class="hljs-built_in">hsl</span>(
          <span class="hljs-built_in">var</span>(--brand-hue),
          <span class="hljs-built_in">var</span>(--brand-saturation),
          <span class="hljs-built_in">var</span>(--brand-lightness)
        );
        <span class="hljs-attr">--color-primary-light</span>: <span class="hljs-built_in">hsl</span>(
          <span class="hljs-built_in">var</span>(--brand-hue),
          <span class="hljs-built_in">var</span>(--brand-saturation),
          <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--brand-lightness) + <span class="hljs-number">20%</span>)
        );
        <span class="hljs-attr">--color-primary-dark</span>: <span class="hljs-built_in">hsl</span>(
          <span class="hljs-built_in">var</span>(--brand-hue),
          <span class="hljs-built_in">var</span>(--brand-saturation),
          <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--brand-lightness) - <span class="hljs-number">20%</span>)
        );

        <span class="hljs-comment">/* è¯­ä¹‰è‰²å½© */</span>
        <span class="hljs-attr">--color-success</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">120</span>, <span class="hljs-number">70%</span>, <span class="hljs-number">45%</span>);
        <span class="hljs-attr">--color-warning</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">45</span>, <span class="hljs-number">90%</span>, <span class="hljs-number">55%</span>);
        <span class="hljs-attr">--color-error</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">0</span>, <span class="hljs-number">80%</span>, <span class="hljs-number">55%</span>);
        <span class="hljs-attr">--color-info</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">200</span>, <span class="hljs-number">80%</span>, <span class="hljs-number">55%</span>);

        <span class="hljs-comment">/* ä¸­æ€§è‰²é˜¶ */</span>
        <span class="hljs-attr">--gray-50</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">98%</span>);
        <span class="hljs-attr">--gray-100</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">95%</span>);
        <span class="hljs-attr">--gray-200</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">85%</span>);
        <span class="hljs-attr">--gray-300</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">75%</span>);
        <span class="hljs-attr">--gray-400</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">65%</span>);
        <span class="hljs-attr">--gray-500</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">55%</span>);
        <span class="hljs-attr">--gray-600</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">45%</span>);
        <span class="hljs-attr">--gray-700</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">35%</span>);
        <span class="hljs-attr">--gray-800</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">25%</span>);
        <span class="hljs-attr">--gray-900</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">15%</span>);

        <span class="hljs-comment">/* æµå¼æ’ç‰ˆç³»ç»Ÿ */</span>
        <span class="hljs-attr">--font-xs</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.75rem</span>, <span class="hljs-number">0.7rem</span> + <span class="hljs-number">0.25vw</span>, <span class="hljs-number">0.875rem</span>);
        <span class="hljs-attr">--font-sm</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.875rem</span>, <span class="hljs-number">0.8rem</span> + <span class="hljs-number">0.375vw</span>, <span class="hljs-number">1rem</span>);
        <span class="hljs-attr">--font-base</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">0.9rem</span> + <span class="hljs-number">0.5vw</span>, <span class="hljs-number">1.125rem</span>);
        <span class="hljs-attr">--font-lg</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.125rem</span>, <span class="hljs-number">1rem</span> + <span class="hljs-number">0.625vw</span>, <span class="hljs-number">1.25rem</span>);
        <span class="hljs-attr">--font-xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.25rem</span>, <span class="hljs-number">1.1rem</span> + <span class="hljs-number">0.75vw</span>, <span class="hljs-number">1.5rem</span>);
        <span class="hljs-attr">--font-2xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.5rem</span>, <span class="hljs-number">1.3rem</span> + <span class="hljs-number">1vw</span>, <span class="hljs-number">2rem</span>);
        <span class="hljs-attr">--font-3xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.875rem</span>, <span class="hljs-number">1.5rem</span> + <span class="hljs-number">1.875vw</span>, <span class="hljs-number">3rem</span>);

        <span class="hljs-comment">/* åŠ¨æ€é—´è·ç³»ç»Ÿ */</span>
        <span class="hljs-attr">--space-xs</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.25rem</span>, <span class="hljs-number">0.2rem</span> + <span class="hljs-number">0.25vw</span>, <span class="hljs-number">0.5rem</span>);
        <span class="hljs-attr">--space-sm</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">0.4rem</span> + <span class="hljs-number">0.5vw</span>, <span class="hljs-number">1rem</span>);
        <span class="hljs-attr">--space-md</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1rem</span>, <span class="hljs-number">0.8rem</span> + <span class="hljs-number">1vw</span>, <span class="hljs-number">2rem</span>);
        <span class="hljs-attr">--space-lg</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">1.5rem</span>, <span class="hljs-number">1.2rem</span> + <span class="hljs-number">1.5vw</span>, <span class="hljs-number">3rem</span>);
        <span class="hljs-attr">--space-xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">2rem</span>, <span class="hljs-number">1.6rem</span> + <span class="hljs-number">2vw</span>, <span class="hljs-number">4rem</span>);
        <span class="hljs-attr">--space-2xl</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">3rem</span>, <span class="hljs-number">2.4rem</span> + <span class="hljs-number">3vw</span>, <span class="hljs-number">6rem</span>);

        <span class="hljs-comment">/* å“åº”å¼å®¹å™¨ */</span>
        <span class="hljs-attr">--container-xs</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">480px</span>);
        <span class="hljs-attr">--container-sm</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">640px</span>);
        <span class="hljs-attr">--container-md</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">768px</span>);
        <span class="hljs-attr">--container-lg</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">1024px</span>);
        <span class="hljs-attr">--container-xl</span>: <span class="hljs-built_in">min</span>(<span class="hljs-number">100%</span>, <span class="hljs-number">1280px</span>);

        <span class="hljs-comment">/* çŠ¶æ€å˜é‡ */</span>
        <span class="hljs-attr">--is-mobile</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--is-tablet</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--is-desktop</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attr">--prefers-dark</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--prefers-reduced-motion</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--has-hover</span>: <span class="hljs-number">1</span>;

        <span class="hljs-comment">/* åŠ¨ç”»ç³»ç»Ÿ */</span>
        <span class="hljs-attr">--duration-fast</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--prefers-reduced-motion)) * <span class="hljs-number">0.15s</span>);
        <span class="hljs-attr">--duration-normal</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--prefers-reduced-motion)) * <span class="hljs-number">0.3s</span>);
        <span class="hljs-attr">--duration-slow</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--prefers-reduced-motion)) * <span class="hljs-number">0.5s</span>);

        <span class="hljs-attr">--easing-linear</span>: linear;
        <span class="hljs-attr">--easing-ease</span>: ease;
        <span class="hljs-attr">--easing-ease-in</span>: <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
        <span class="hljs-attr">--easing-ease-out</span>: <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>);
        <span class="hljs-attr">--easing-ease-in-out</span>: <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span>);

        <span class="hljs-comment">/* é˜´å½±ç³»ç»Ÿ */</span>
        <span class="hljs-attr">--shadow-xs</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);
        <span class="hljs-attr">--shadow-sm</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>), <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.06</span>);
        <span class="hljs-attr">--shadow-md</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> -<span class="hljs-number">1px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>), <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> -<span class="hljs-number">1px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.06</span>);
        <span class="hljs-attr">--shadow-lg</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> -<span class="hljs-number">3px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>), <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> -<span class="hljs-number">2px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);
        <span class="hljs-attr">--shadow-xl</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span> -<span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>), <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">10px</span> -<span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.04</span>);

        <span class="hljs-comment">/* è¾¹æ¡†åœ†è§’ */</span>
        <span class="hljs-attr">--radius-none</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--radius-xs</span>: <span class="hljs-number">0.125rem</span>;
        <span class="hljs-attr">--radius-sm</span>: <span class="hljs-number">0.25rem</span>;
        <span class="hljs-attr">--radius-md</span>: <span class="hljs-number">0.375rem</span>;
        <span class="hljs-attr">--radius-lg</span>: <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attr">--radius-xl</span>: <span class="hljs-number">0.75rem</span>;
        <span class="hljs-attr">--radius-2xl</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attr">--radius-full</span>: <span class="hljs-number">9999px</span>;
      }

      <span class="hljs-comment">/* å“åº”å¼çŠ¶æ€æ›´æ–° */</span>
      <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">767px</span>) {
        <span class="hljs-selector-pseudo">:root</span> {
          <span class="hljs-attr">--is-mobile</span>: <span class="hljs-number">1</span>;
          <span class="hljs-attr">--is-tablet</span>: <span class="hljs-number">0</span>;
          <span class="hljs-attr">--is-desktop</span>: <span class="hljs-number">0</span>;
        }
      }

      <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1023px</span>) {
        <span class="hljs-selector-pseudo">:root</span> {
          <span class="hljs-attr">--is-mobile</span>: <span class="hljs-number">0</span>;
          <span class="hljs-attr">--is-tablet</span>: <span class="hljs-number">1</span>;
          <span class="hljs-attr">--is-desktop</span>: <span class="hljs-number">0</span>;
        }
      }

      <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
        <span class="hljs-selector-pseudo">:root</span> {
          <span class="hljs-attr">--prefers-dark</span>: <span class="hljs-number">1</span>;

          <span class="hljs-comment">/* æ·±è‰²æ¨¡å¼é¢œè‰²è°ƒæ•´ */</span>
          <span class="hljs-attr">--gray-50</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">10%</span>);
          <span class="hljs-attr">--gray-100</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">15%</span>);
          <span class="hljs-attr">--gray-200</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">25%</span>);
          <span class="hljs-attr">--gray-300</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">35%</span>);
          <span class="hljs-attr">--gray-400</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">45%</span>);
          <span class="hljs-attr">--gray-500</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">55%</span>);
          <span class="hljs-attr">--gray-600</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">65%</span>);
          <span class="hljs-attr">--gray-700</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">75%</span>);
          <span class="hljs-attr">--gray-800</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">85%</span>);
          <span class="hljs-attr">--gray-900</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">5%</span>, <span class="hljs-number">95%</span>);
        }
      }

      <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-reduced-motion</span>: reduce) {
        <span class="hljs-selector-pseudo">:root</span> {
          <span class="hljs-attr">--prefers-reduced-motion</span>: <span class="hljs-number">1</span>;
        }
      }

      <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">hover</span>: none) {
        <span class="hljs-selector-pseudo">:root</span> {
          <span class="hljs-attr">--has-hover</span>: <span class="hljs-number">0</span>;
        }
      }

      <span class="hljs-comment">/* åŸºç¡€é‡ç½® */</span>
      * {
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">box-sizing</span>: border-box;
      }

      <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, sans-serif;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-base);
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">900</span>);
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
          <span class="hljs-number">135deg</span>,
          <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--brand-hue), <span class="hljs-number">30%</span>, <span class="hljs-number">95%</span>),
          <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--brand-hue) + <span class="hljs-number">30</span>), <span class="hljs-number">25%</span>, <span class="hljs-number">90%</span>)
        );
        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
      }

      <span class="hljs-selector-class">.container</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--container-xl);
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--space-md);
      }

      <span class="hljs-comment">/* é¡µé¢æ ‡é¢˜ */</span>
      <span class="hljs-selector-class">.page-header</span> {
        <span class="hljs-attribute">text-align</span>: center;
        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--space-xl) <span class="hljs-number">0</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-lg);
      }

      <span class="hljs-selector-class">.page-title</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-<span class="hljs-number">3</span>xl);
        <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-primary);
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-sm);
        <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      }

      <span class="hljs-selector-class">.page-subtitle</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-lg);
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">600</span>);
      }

      <span class="hljs-comment">/* ä¸»é¢˜æ§åˆ¶å™¨ */</span>
      <span class="hljs-selector-class">.theme-controller</span> {
        <span class="hljs-attribute">position</span>: fixed;
        <span class="hljs-attribute">top</span>: <span class="hljs-built_in">var</span>(--space-md);
        <span class="hljs-attribute">right</span>: <span class="hljs-built_in">var</span>(--space-md);
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">50</span>);
        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">200</span>);
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius-lg);
        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--space-sm);
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-built_in">var</span>(--shadow-lg);
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
      }

      <span class="hljs-selector-class">.color-picker</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">gap</span>: <span class="hljs-built_in">var</span>(--space-xs);
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-sm);
      }

      <span class="hljs-selector-class">.color-option</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">2rem</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">2rem</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius-full);
        <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid transparent;
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">transition</span>: all <span class="hljs-built_in">var</span>(--duration-fast) <span class="hljs-built_in">var</span>(--easing-ease-out);
      }

      <span class="hljs-selector-class">.color-option</span><span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.1</span>);
        <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">400</span>);
      }

      <span class="hljs-selector-class">.color-option</span><span class="hljs-selector-class">.active</span> {
        <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">700</span>);
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">200</span>);
      }

      <span class="hljs-comment">/* åŠ¨æ€æŒ‰é’®ç»„ä»¶ */</span>
      <span class="hljs-selector-class">.btn</span> {
        <span class="hljs-comment">/* ç»„ä»¶çŠ¶æ€å˜é‡ */</span>
        <span class="hljs-attr">--btn-scale</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attr">--btn-brightness</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attr">--btn-blur</span>: <span class="hljs-number">0</span>;

        <span class="hljs-attribute">display</span>: inline-flex;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">gap</span>: <span class="hljs-built_in">var</span>(--space-xs);

        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--space-sm) <span class="hljs-built_in">var</span>(--space-md);
        <span class="hljs-attribute">border</span>: none;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius-md);

        <span class="hljs-attribute">font-family</span>: inherit;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-base);
        <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
        <span class="hljs-attribute">text-decoration</span>: none;

        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-primary);
        <span class="hljs-attribute">color</span>: white;

        <span class="hljs-attribute">cursor</span>: pointer;
        user-select: none;

        <span class="hljs-comment">/* åŠ¨æ€å˜æ¢ */</span>
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-built_in">var</span>(--btn-scale));
        <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-built_in">var</span>(--btn-brightness)) <span class="hljs-built_in">blur</span>(<span class="hljs-built_in">var</span>(--btn-blur));

        <span class="hljs-attribute">transition</span>: all <span class="hljs-built_in">var</span>(--duration-normal) <span class="hljs-built_in">var</span>(--easing-ease-out);
      }

      <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attr">--btn-scale</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> + <span class="hljs-number">0.05</span> * <span class="hljs-built_in">var</span>(--has-hover));
        <span class="hljs-attr">--btn-brightness</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> + <span class="hljs-number">0.1</span> * <span class="hljs-built_in">var</span>(--has-hover));
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-built_in">var</span>(--shadow-md);
      }

      <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:active</span> {
        <span class="hljs-attr">--btn-scale</span>: <span class="hljs-number">0.95</span>;
      }

      <span class="hljs-selector-class">.btn</span><span class="hljs-selector-attr">[data-loading=<span class="hljs-string">'true'</span>]</span> {
        <span class="hljs-attr">--btn-blur</span>: <span class="hljs-number">1px</span>;
        <span class="hljs-attribute">pointer-events</span>: none;
      }

      <span class="hljs-selector-class">.btn</span><span class="hljs-selector-attr">[disabled]</span> {
        <span class="hljs-attr">--btn-brightness</span>: <span class="hljs-number">0.6</span>;
        <span class="hljs-attribute">cursor</span>: not-allowed;
      }

      <span class="hljs-comment">/* æŒ‰é’®å˜ä½“ */</span>
      <span class="hljs-selector-class">.btn--secondary</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">200</span>);
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">800</span>);
      }

      <span class="hljs-selector-class">.btn--success</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-success);
      }

      <span class="hljs-selector-class">.btn--warning</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-warning);
      }

      <span class="hljs-selector-class">.btn--error</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-error);
      }

      <span class="hljs-comment">/* åŠ¨æ€å¡ç‰‡ç»„ä»¶ */</span>
      <span class="hljs-selector-class">.card</span> {
        <span class="hljs-attr">--card-elevation</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--card-rotate</span>: <span class="hljs-number">0deg</span>;

        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">50</span>);
        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">200</span>);
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius-xl);
        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--space-lg);
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-md);

        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--card-elevation) * -<span class="hljs-number">1px</span>)) <span class="hljs-built_in">rotateY</span>(
            <span class="hljs-built_in">var</span>(--card-rotate)
          );
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--card-elevation) * <span class="hljs-number">0.5px</span>) <span class="hljs-built_in">calc</span>(
            <span class="hljs-built_in">var</span>(--card-elevation) * <span class="hljs-number">1px</span>
          )
          <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">calc</span>(<span class="hljs-number">0.05</span> + <span class="hljs-built_in">var</span>(--card-elevation) * <span class="hljs-number">0.002</span>));

        <span class="hljs-attribute">transition</span>: all <span class="hljs-built_in">var</span>(--duration-normal) <span class="hljs-built_in">var</span>(--easing-ease-out);
      }

      <span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attr">--card-elevation</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">8</span> * <span class="hljs-built_in">var</span>(--has-hover));
        <span class="hljs-attr">--card-rotate</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1deg</span> * <span class="hljs-built_in">var</span>(--has-hover));
      }

      <span class="hljs-selector-class">.card-title</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-xl);
        <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-primary);
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-sm);
      }

      <span class="hljs-selector-class">.card-content</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">700</span>);
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-md);
      }

      <span class="hljs-comment">/* ç½‘æ ¼ç³»ç»Ÿ */</span>
      <span class="hljs-selector-class">.grid</span> {
        <span class="hljs-attribute">display</span>: grid;
        <span class="hljs-attribute">gap</span>: <span class="hljs-built_in">var</span>(--space-md);
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-built_in">min</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">100%</span>), <span class="hljs-number">1</span>fr));
      }

      <span class="hljs-selector-class">.grid--dense</span> {
        <span class="hljs-attribute">grid-auto-flow</span>: dense;
      }

      <span class="hljs-comment">/* åŠ¨æ€è¿›åº¦æ¡ */</span>
      <span class="hljs-selector-class">.progress</span> {
        <span class="hljs-attr">--progress-value</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attr">--progress-color</span>: <span class="hljs-built_in">var</span>(--color-primary);

        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--gray-<span class="hljs-number">200</span>);
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius-full);
        <span class="hljs-attribute">overflow</span>: hidden;
      }

      <span class="hljs-selector-class">.progress</span><span class="hljs-selector-pseudo">::before</span> {
        <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
        <span class="hljs-attribute">display</span>: block;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--progress-value) * <span class="hljs-number">1%</span>);
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--progress-color);
        <span class="hljs-attribute">border-radius</span>: inherit;
        <span class="hljs-attribute">transition</span>: width <span class="hljs-built_in">var</span>(--duration-slow) <span class="hljs-built_in">var</span>(--easing-ease-out);
      }

      <span class="hljs-comment">/* å·¥å…·ç±» */</span>
      <span class="hljs-selector-class">.text-center</span> {
        <span class="hljs-attribute">text-align</span>: center;
      }
      <span class="hljs-selector-class">.mb-sm</span> {
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-sm);
      }
      <span class="hljs-selector-class">.mb-md</span> {
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-md);
      }
      <span class="hljs-selector-class">.mb-lg</span> {
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-built_in">var</span>(--space-lg);
      }

      <span class="hljs-comment">/* å“åº”å¼å·¥å…· */</span>
      <span class="hljs-selector-class">.mobile-only</span> {
        <span class="hljs-attribute">display</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-mobile) * <span class="hljs-number">1</span>) block;
        <span class="hljs-attribute">display</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-mobile)) * <span class="hljs-number">1</span>) none;
      }

      <span class="hljs-selector-class">.desktop-only</span> {
        <span class="hljs-attribute">display</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--is-desktop) * <span class="hljs-number">1</span>) block;
        <span class="hljs-attribute">display</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-number">1</span> - <span class="hljs-built_in">var</span>(--is-desktop)) * <span class="hljs-number">1</span>) none;
      }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¸»é¢˜æ§åˆ¶å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"theme-controller"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"color-picker"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option active"</span>
          <span class="hljs-attr">data-hue</span>=<span class="hljs-string">"220"</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"background: hsl(220, 100%, 50%);"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option"</span>
          <span class="hljs-attr">data-hue</span>=<span class="hljs-string">"0"</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"background: hsl(0, 80%, 55%);"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option"</span>
          <span class="hljs-attr">data-hue</span>=<span class="hljs-string">"120"</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"background: hsl(120, 70%, 45%);"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option"</span>
          <span class="hljs-attr">data-hue</span>=<span class="hljs-string">"270"</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"background: hsl(270, 80%, 55%);"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option"</span>
          <span class="hljs-attr">data-hue</span>=<span class="hljs-string">"45"</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"background: hsl(45, 90%, 55%);"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"saturation"</span>
        <span class="hljs-attr">min</span>=<span class="hljs-string">"30"</span>
        <span class="hljs-attr">max</span>=<span class="hljs-string">"100"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">"100"</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; margin-bottom: 0.5rem;"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"lightness"</span>
        <span class="hljs-attr">min</span>=<span class="hljs-string">"30"</span>
        <span class="hljs-attr">max</span>=<span class="hljs-string">"70"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">"50"</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%;"</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- é¡µé¢æ ‡é¢˜ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-title"</span>&gt;</span>CSSè‡ªå®šä¹‰å±æ€§æ·±åº¦åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-subtitle"</span>&gt;</span>åŠ¨æ€è®¾è®¡ç³»ç»Ÿçš„æ— é™å¯èƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- åŠŸèƒ½æ¼”ç¤º --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid mb-lg"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>åŠ¨æ€é¢œè‰²ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
              åŸºäºHSLè‰²å½©ç©ºé—´çš„åŠ¨æ€ä¸»é¢˜ç”Ÿæˆç³»ç»Ÿï¼Œå¯ä»¥å®æ—¶è°ƒæ•´è‰²ç›¸ã€é¥±å’Œåº¦å’Œäº®åº¦ã€‚
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
              <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-primary); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-primary-light); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-primary-dark); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-success); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-warning); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 2rem; height: 2rem; background: var(--color-error); border-radius: 0.25rem;"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>æ›´æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>æµå¼æ’ç‰ˆç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨clamp()å‡½æ•°å®ç°çš„æµå¼æ’ç‰ˆï¼Œåœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹è‡ªé€‚åº”è°ƒæ•´ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 1rem;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: var(--font-xs);"</span>&gt;</span>è¶…å°å­—ä½“ (font-xs)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: var(--font-sm);"</span>&gt;</span>å°å­—ä½“ (font-sm)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: var(--font-base);"</span>&gt;</span>åŸºç¡€å­—ä½“ (font-base)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: var(--font-lg);"</span>&gt;</span>å¤§å­—ä½“ (font-lg)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: var(--font-xl);"</span>&gt;</span>è¶…å¤§å­—ä½“ (font-xl)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn--secondary"</span>&gt;</span>è°ƒæ•´å¤§å°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>çŠ¶æ€é©±åŠ¨ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨CSSå˜é‡å®ç°çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåŠ è½½ã€ç¦ç”¨ç­‰å¤šç§çŠ¶æ€ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
              <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>&gt;</span>æ­£å¸¸çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">data-loading</span>=<span class="hljs-string">"true"</span>&gt;</span>åŠ è½½çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">disabled</span>&gt;</span>ç¦ç”¨çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn--success"</span>&gt;</span>æµ‹è¯•äº¤äº’<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- è¿›åº¦å±•ç¤º --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-lg"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>åŠ¨æ€è¿›åº¦ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŸºäºCSSå˜é‡çš„åŠ¨æ€è¿›åº¦æ¡ï¼Œæ”¯æŒå®æ—¶æ›´æ–°å’Œä¸»é¢˜è‰²è”åŠ¨ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 1rem;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-bottom: 1rem;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é¡¹ç›®è¿›åº¦: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress1Value"</span>&gt;</span>65<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>%<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"--progress-value: 65; --progress-color: var(--color-primary);"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-bottom: 1rem;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æˆåŠŸç‡: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress2Value"</span>&gt;</span>85<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>%<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"--progress-value: 85; --progress-color: var(--color-success);"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-bottom: 1rem;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>è­¦å‘ŠæŒ‡æ ‡: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress3Value"</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>%<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"--progress-value: 30; --progress-color: var(--color-warning);"</span>
              &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"updateProgress()"</span>&gt;</span>æ›´æ–°è¿›åº¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- å˜é‡ä¿¡æ¯é¢æ¿ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>å½“å‰å˜é‡å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-family: monospace; font-size: 0.875rem;"</span>
          &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>å“ç‰Œè‰²è°ƒ:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"currentHue"</span>&gt;</span>220<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>Â°
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é¥±å’Œåº¦:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"currentSaturation"</span>&gt;</span>100<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>%
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>äº®åº¦:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"currentLightness"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>%
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>è®¾å¤‡çŠ¶æ€:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deviceStatus"</span>&gt;</span>Desktop<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>ä¸»é¢˜æ¨¡å¼:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"themeMode"</span>&gt;</span>Light<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>åŠ¨ç”»åå¥½:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"motionPreference"</span>&gt;</span>Full<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-comment">// CSS å˜é‡åŠ¨æ€ç®¡ç†ç³»ç»Ÿ</span>
      <span class="hljs-keyword">class</span> <span class="hljs-title class_">CSSVariableManager</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
        }

        <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupThemeControls</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupProgressAnimations</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">monitorSystemPreferences</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
        }

        <span class="hljs-title function_">setupThemeControls</span>(<span class="hljs-params"/>) {
          <span class="hljs-comment">// é¢œè‰²é€‰æ‹©å™¨</span>
          <span class="hljs-keyword">const</span> colorOptions = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.color-option'</span>);
          colorOptions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">option</span>) =&gt;</span> {
            option.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">const</span> hue = option.<span class="hljs-property">dataset</span>.<span class="hljs-property">hue</span>;
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateHue</span>(hue);

              colorOptions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">opt</span>) =&gt;</span> opt.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>));
              option.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
            });
          });

          <span class="hljs-comment">// é¥±å’Œåº¦æ§åˆ¶</span>
          <span class="hljs-keyword">const</span> saturationSlider = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'saturation'</span>);
          saturationSlider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateSaturation</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
          });

          <span class="hljs-comment">// äº®åº¦æ§åˆ¶</span>
          <span class="hljs-keyword">const</span> lightnessSlider = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'lightness'</span>);
          lightnessSlider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateLightness</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
          });
        }

        <span class="hljs-title function_">updateHue</span>(<span class="hljs-params">hue</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--brand-hue'</span>, hue);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
        }

        <span class="hljs-title function_">updateSaturation</span>(<span class="hljs-params">saturation</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--brand-saturation'</span>, saturation + <span class="hljs-string">'%'</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
        }

        <span class="hljs-title function_">updateLightness</span>(<span class="hljs-params">lightness</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--brand-lightness'</span>, lightness + <span class="hljs-string">'%'</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
        }

        <span class="hljs-title function_">setupProgressAnimations</span>(<span class="hljs-params"/>) {
          <span class="hljs-comment">// æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°</span>
          <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">const</span> progress1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">40</span>) + <span class="hljs-number">60</span>;
            <span class="hljs-keyword">const</span> progress2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">20</span>) + <span class="hljs-number">80</span>;
            <span class="hljs-keyword">const</span> progress3 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">50</span>) + <span class="hljs-number">20</span>;

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateProgress</span>(<span class="hljs-string">'progress1Value'</span>, progress1, <span class="hljs-number">1</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateProgress</span>(<span class="hljs-string">'progress2Value'</span>, progress2, <span class="hljs-number">2</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateProgress</span>(<span class="hljs-string">'progress3Value'</span>, progress3, <span class="hljs-number">3</span>);
          }, <span class="hljs-number">3000</span>);
        }

        <span class="hljs-title function_">updateProgress</span>(<span class="hljs-params">elementId, value, progressIndex</span>) {
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId).<span class="hljs-property">textContent</span> = value;

          <span class="hljs-keyword">const</span> progressBars = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.progress'</span>);
          <span class="hljs-keyword">if</span> (progressBars[progressIndex - <span class="hljs-number">1</span>]) {
            progressBars[progressIndex - <span class="hljs-number">1</span>].<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(
              <span class="hljs-string">'--progress-value'</span>,
              value
            );
          }
        }

        <span class="hljs-title function_">monitorSystemPreferences</span>(<span class="hljs-params"/>) {
          <span class="hljs-comment">// ç›‘å¬ä¸»é¢˜åå¥½å˜åŒ–</span>
          <span class="hljs-keyword">const</span> darkModeQuery = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(
            <span class="hljs-string">'(prefers-color-scheme: dark)'</span>
          );
          darkModeQuery.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(
              <span class="hljs-string">'--prefers-dark'</span>,
              e.<span class="hljs-property">matches</span> ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>
            );
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
          });

          <span class="hljs-comment">// ç›‘å¬åŠ¨ç”»åå¥½å˜åŒ–</span>
          <span class="hljs-keyword">const</span> motionQuery = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(
            <span class="hljs-string">'(prefers-reduced-motion: reduce)'</span>
          );
          motionQuery.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(
              <span class="hljs-string">'--prefers-reduced-motion'</span>,
              e.<span class="hljs-property">matches</span> ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>
            );
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
          });

          <span class="hljs-comment">// ç›‘å¬æ‚¬åœèƒ½åŠ›å˜åŒ–</span>
          <span class="hljs-keyword">const</span> hoverQuery = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(hover: hover)'</span>);
          hoverQuery.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--has-hover'</span>, e.<span class="hljs-property">matches</span> ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateVariableDisplay</span>();
          });

          <span class="hljs-comment">// ç›‘å¬å±å¹•å°ºå¯¸å˜åŒ–</span>
          <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateDeviceStatus</span> = (<span class="hljs-params"/>) =&gt; {
            <span class="hljs-keyword">const</span> width = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
            <span class="hljs-keyword">let</span> device = <span class="hljs-string">'Desktop'</span>;

            <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">768</span>) {
              device = <span class="hljs-string">'Mobile'</span>;
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-mobile'</span>, <span class="hljs-string">'1'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-tablet'</span>, <span class="hljs-string">'0'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-desktop'</span>, <span class="hljs-string">'0'</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">1024</span>) {
              device = <span class="hljs-string">'Tablet'</span>;
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-mobile'</span>, <span class="hljs-string">'0'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-tablet'</span>, <span class="hljs-string">'1'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-desktop'</span>, <span class="hljs-string">'0'</span>);
            } <span class="hljs-keyword">else</span> {
              device = <span class="hljs-string">'Desktop'</span>;
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-mobile'</span>, <span class="hljs-string">'0'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-tablet'</span>, <span class="hljs-string">'0'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--is-desktop'</span>, <span class="hljs-string">'1'</span>);
            }

            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'deviceStatus'</span>).<span class="hljs-property">textContent</span> = device;
          };

          <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, updateDeviceStatus);
          <span class="hljs-title function_">updateDeviceStatus</span>();
        }

        <span class="hljs-title function_">updateVariableDisplay</span>(<span class="hljs-params"/>) {
          <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-title function_">getComputedStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>);

          <span class="hljs-comment">// è·å–å½“å‰å˜é‡å€¼</span>
          <span class="hljs-keyword">const</span> hue = computedStyle.<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">'--brand-hue'</span>).<span class="hljs-title function_">trim</span>();
          <span class="hljs-keyword">const</span> saturation = computedStyle
            .<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">'--brand-saturation'</span>)
            .<span class="hljs-title function_">trim</span>();
          <span class="hljs-keyword">const</span> lightness = computedStyle
            .<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">'--brand-lightness'</span>)
            .<span class="hljs-title function_">trim</span>();
          <span class="hljs-keyword">const</span> prefersDark = computedStyle
            .<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">'--prefers-dark'</span>)
            .<span class="hljs-title function_">trim</span>();
          <span class="hljs-keyword">const</span> prefersReducedMotion = computedStyle
            .<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">'--prefers-reduced-motion'</span>)
            .<span class="hljs-title function_">trim</span>();

          <span class="hljs-comment">// æ›´æ–°æ˜¾ç¤º</span>
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'currentHue'</span>).<span class="hljs-property">textContent</span> = hue;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'currentSaturation'</span>).<span class="hljs-property">textContent</span> = saturation;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'currentLightness'</span>).<span class="hljs-property">textContent</span> = lightness;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'themeMode'</span>).<span class="hljs-property">textContent</span> =
            prefersDark === <span class="hljs-string">'1'</span> ? <span class="hljs-string">'Dark'</span> : <span class="hljs-string">'Light'</span>;
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'motionPreference'</span>).<span class="hljs-property">textContent</span> =
            prefersReducedMotion === <span class="hljs-string">'1'</span> ? <span class="hljs-string">'Reduced'</span> : <span class="hljs-string">'Full'</span>;
        }

        <span class="hljs-comment">// è·å–å½“å‰æ‰€æœ‰CSSå˜é‡</span>
        <span class="hljs-title function_">getAllCSSVariables</span>(<span class="hljs-params"/>) {
          <span class="hljs-keyword">const</span> allCSS = [...<span class="hljs-variable language_">document</span>.<span class="hljs-property">styleSheets</span>]
            .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">styleSheet</span>) =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> [...styleSheet.<span class="hljs-property">cssRules</span>]
                  .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">rule</span>) =&gt;</span> rule.<span class="hljs-property">cssText</span>)
                  .<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>);
              } <span class="hljs-keyword">catch</span> (e) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
              }
            })
            .<span class="hljs-title function_">join</span>(<span class="hljs-string">' '</span>);

          <span class="hljs-keyword">const</span> variables = allCSS.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/--[^:;]+/g</span>) || [];
          <span class="hljs-keyword">return</span> [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(variables)];
        }
      }

      <span class="hljs-comment">// å…¨å±€å‡½æ•°</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateProgress</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> progressBars = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.progress'</span>);
        progressBars.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">bar, index</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> randomValue = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>);
          bar.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--progress-value'</span>, randomValue);

          <span class="hljs-keyword">const</span> valueSpan = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(
            <span class="hljs-string">`progress<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>Value`</span>
          );
          <span class="hljs-keyword">if</span> (valueSpan) {
            valueSpan.<span class="hljs-property">textContent</span> = randomValue;
          }
        });
      }

      <span class="hljs-comment">// åˆå§‹åŒ–</span>
      <span class="hljs-keyword">const</span> variableManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSSVariableManager</span>();

      <span class="hljs-comment">// æŒ‰é’®äº¤äº’å¢å¼º</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.btn'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">btn</span>) =&gt;</span> {
        btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-comment">// åŠ¨ç”»åé¦ˆ</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--btn-scale'</span>, <span class="hljs-string">'0.95'</span>);
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--btn-scale'</span>, <span class="hljs-string">'1'</span>);
          }, <span class="hljs-number">150</span>);

          <span class="hljs-comment">// æ¨¡æ‹ŸåŠ è½½çŠ¶æ€</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'æµ‹è¯•'</span>)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-loading'</span>, <span class="hljs-string">'true'</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span> = <span class="hljs-string">'å¤„ç†ä¸­...'</span>;

            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">'data-loading'</span>);
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span> = <span class="hljs-string">'æµ‹è¯•äº¤äº’'</span>;
            }, <span class="hljs-number">2000</span>);
          }
        });
      });

      <span class="hljs-comment">// å¡ç‰‡æ‚¬åœæ•ˆæœå¢å¼º</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.card'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">card</span>) =&gt;</span> {
        card.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseenter'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--card-elevation'</span>, <span class="hljs-string">'12'</span>);
        });

        card.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseleave'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--card-elevation'</span>, <span class="hljs-string">'0'</span>);
        });
      });

      <span class="hljs-comment">// æ€§èƒ½ç›‘æ§</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CSS Variables Demo loaded'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">'Available CSS Variables:'</span>,
        variableManager.<span class="hljs-title function_">getAllCSSVariables</span>()
      );
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>æ•ˆæœå±•ç¤º</strong>ï¼šè¿™ä¸ªå®Œæ•´çš„åŠ¨æ€è®¾è®¡ç³»ç»Ÿå±•ç¤ºäº† CSS è‡ªå®šä¹‰å±æ€§çš„é«˜çº§åº”ç”¨ã€‚åŒ…æ‹¬åŠ¨æ€é¢œè‰²ç”Ÿæˆã€æµå¼æ’ç‰ˆã€çŠ¶æ€ç®¡ç†ã€æ¡ä»¶é€»è¾‘ç­‰ã€‚é€šè¿‡å®æ—¶çš„ä¸»é¢˜æ§åˆ¶å™¨ï¼Œå¯ä»¥çœ‹åˆ° CSS å˜é‡å¦‚ä½•é©±åŠ¨æ•´ä¸ªè®¾è®¡ç³»ç»Ÿçš„åŠ¨æ€å˜åŒ–ã€‚</p>
<h2 data-id="heading-10">4. é«˜çº§åº”ç”¨æ¨¡å¼</h2>
<h3 data-id="heading-11">4.1 CSS å˜é‡ä¸ JavaScript çš„æ·±åº¦é›†æˆ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºäºæ•°æ®çš„æ ·å¼ç³»ç»Ÿ */</span>
<span class="hljs-selector-class">.data-driven-component</span> {
  <span class="hljs-comment">/* ä»dataå±æ€§è·å–å€¼ */</span>
  <span class="hljs-attr">--data-value</span>: <span class="hljs-built_in">attr</span>(data-value number, <span class="hljs-number">0</span>);
  <span class="hljs-attr">--data-max</span>: <span class="hljs-built_in">attr</span>(data-max number, <span class="hljs-number">100</span>);
  <span class="hljs-attr">--data-min</span>: <span class="hljs-built_in">attr</span>(data-min number, <span class="hljs-number">0</span>);

  <span class="hljs-comment">/* è®¡ç®—ç™¾åˆ†æ¯” */</span>
  <span class="hljs-attr">--percentage</span>: <span class="hljs-built_in">calc</span>(
    (<span class="hljs-built_in">var</span>(--data-value) - <span class="hljs-built_in">var</span>(--data-min)) / (
        <span class="hljs-built_in">var</span>(--data-max) - <span class="hljs-built_in">var</span>(--data-min)
      ) * <span class="hljs-number">100</span>
  );

  <span class="hljs-comment">/* åŸºäºæ•°æ®çš„æ ·å¼ */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--percentage) * <span class="hljs-number">1%</span>);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--percentage) * <span class="hljs-number">1.2</span>), <span class="hljs-number">70%</span>, <span class="hljs-number">50%</span>);
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ•°æ®é©±åŠ¨çš„æ ·å¼æ›´æ–°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataDrivenStyling</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = element;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleDataChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }

  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>, {
      <span class="hljs-attr">attributes</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">attributeFilter</span>: [<span class="hljs-string">'data-value'</span>, <span class="hljs-string">'data-max'</span>, <span class="hljs-string">'data-min'</span>],
    });
  }

  <span class="hljs-title function_">handleDataChange</span>(<span class="hljs-params">mutations</span>) {
    mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">'attributes'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStyles</span>();
      }
    });
  }

  <span class="hljs-title function_">updateStyles</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">value</span>) || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> max = <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">max</span>) || <span class="hljs-number">100</span>;
    <span class="hljs-keyword">const</span> min = <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">min</span>) || <span class="hljs-number">0</span>;

    <span class="hljs-keyword">const</span> percentage = ((value - min) / (max - min)) * <span class="hljs-number">100</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--percentage'</span>, percentage);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--data-value'</span>, value);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--data-max'</span>, max);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--data-min'</span>, min);
  }
}
</code></pre>
<h3 data-id="heading-12">4.2 å®¹å™¨æŸ¥è¯¢ä¸ CSS å˜é‡ç»“åˆ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®¹å™¨æŸ¥è¯¢å•ä½ä¸å˜é‡ç»“åˆ */</span>
<span class="hljs-selector-class">.responsive-container</span> {
  container-type: inline-size;

  <span class="hljs-comment">/* åŸºäºå®¹å™¨å¤§å°çš„å˜é‡ */</span>
  <span class="hljs-attr">--container-factor</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-selector-class">.responsive-container</span> {
    <span class="hljs-attr">--container-factor</span>: <span class="hljs-number">1.2</span>;
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">500px</span>) {
  <span class="hljs-selector-class">.responsive-container</span> {
    <span class="hljs-attr">--container-factor</span>: <span class="hljs-number">1.5</span>;
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">700px</span>) {
  <span class="hljs-selector-class">.responsive-container</span> {
    <span class="hljs-attr">--container-factor</span>: <span class="hljs-number">2</span>;
  }
}

<span class="hljs-selector-class">.responsive-content</span> {
  <span class="hljs-comment">/* åŸºäºå®¹å™¨å› å­çš„åŠ¨æ€æ ·å¼ */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1rem</span> * <span class="hljs-built_in">var</span>(--container-factor));
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">1rem</span> * <span class="hljs-built_in">var</span>(--container-factor));
  <span class="hljs-attribute">gap</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">0.5rem</span> * <span class="hljs-built_in">var</span>(--container-factor));

  <span class="hljs-comment">/* å®¹å™¨æŸ¥è¯¢å•ä½ */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.25rem</span>, <span class="hljs-number">2</span>cqw, <span class="hljs-number">1rem</span>);
  <span class="hljs-attribute">margin</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.5rem</span>, <span class="hljs-number">3</span>cqh, <span class="hljs-number">2rem</span>);
}
</code></pre>
<h3 data-id="heading-13">4.3 åŠ¨ç”»ç³»ç»Ÿä¸å˜é‡é›†æˆ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºäºå˜é‡çš„åŠ¨ç”»ç³»ç»Ÿ */</span>
<span class="hljs-keyword">@keyframes</span> dynamic-pulse {
  <span class="hljs-number">0%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-built_in">var</span>(--pulse-opacity-start, <span class="hljs-number">1</span>);
  }
  <span class="hljs-number">50%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-built_in">var</span>(--pulse-scale, <span class="hljs-number">1.05</span>));
    <span class="hljs-attribute">opacity</span>: <span class="hljs-built_in">var</span>(--pulse-opacity-mid, <span class="hljs-number">0.8</span>);
  }
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
    <span class="hljs-attribute">opacity</span>: <span class="hljs-built_in">var</span>(--pulse-opacity-end, <span class="hljs-number">1</span>);
  }
}

<span class="hljs-selector-class">.animated-element</span> {
  <span class="hljs-comment">/* å¯é…ç½®çš„åŠ¨ç”»å‚æ•° */</span>
  <span class="hljs-attr">--animation-duration</span>: <span class="hljs-number">1s</span>;
  <span class="hljs-attr">--animation-delay</span>: <span class="hljs-number">0s</span>;
  <span class="hljs-attr">--animation-timing</span>: ease-in-out;
  <span class="hljs-attr">--animation-iterations</span>: infinite;

  <span class="hljs-comment">/* è„‰å†²åŠ¨ç”»å‚æ•° */</span>
  <span class="hljs-attr">--pulse-scale</span>: <span class="hljs-number">1.1</span>;
  <span class="hljs-attr">--pulse-opacity-start</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attr">--pulse-opacity-mid</span>: <span class="hljs-number">0.7</span>;
  <span class="hljs-attr">--pulse-opacity-end</span>: <span class="hljs-number">1</span>;

  <span class="hljs-attribute">animation</span>: dynamic-pulse <span class="hljs-built_in">var</span>(--animation-duration) <span class="hljs-built_in">var</span>(--animation-timing) <span class="hljs-built_in">var</span>(
      --animation-delay
    ) <span class="hljs-built_in">var</span>(--animation-iterations);
}

<span class="hljs-comment">/* ä¸»é¢˜ç›¸å…³çš„åŠ¨ç”»è°ƒæ•´ */</span>
<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">'dark'</span>]</span> <span class="hljs-selector-class">.animated-element</span> {
  <span class="hljs-attr">--pulse-opacity-mid</span>: <span class="hljs-number">0.9</span>;
  <span class="hljs-attr">--animation-duration</span>: <span class="hljs-number">1.5s</span>;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-reduced-motion</span>: reduce) {
  <span class="hljs-selector-class">.animated-element</span> {
    <span class="hljs-attr">--animation-duration</span>: <span class="hljs-number">0.01s</span>;
    <span class="hljs-attr">--animation-iterations</span>: <span class="hljs-number">1</span>;
  }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>CSS è‡ªå®šä¹‰å±æ€§ä¸ºç°ä»£ Web å¼€å‘æä¾›äº†å¼ºå¤§çš„åŠ¨æ€æ ·å¼èƒ½åŠ›ï¼š</p>
<ol>
<li><strong>æ•°å­¦è¿ç®—èƒ½åŠ›</strong>ï¼šé€šè¿‡ calc()ã€clamp()ç­‰å‡½æ•°å®ç°å¤æ‚è®¡ç®—</li>
<li><strong>æ¡ä»¶é€»è¾‘æ”¯æŒ</strong>ï¼šä½¿ç”¨æ•°å€¼å˜é‡å®ç° CSS ä¸­çš„æ¡ä»¶é€»è¾‘</li>
<li><strong>çŠ¶æ€ç®¡ç†ç³»ç»Ÿ</strong>ï¼šå˜é‡é©±åŠ¨çš„ç»„ä»¶çŠ¶æ€ç®¡ç†</li>
<li><strong>åŠ¨æ€é¢œè‰²ç³»ç»Ÿ</strong>ï¼šåŸºäº HSL çš„æ™ºèƒ½ä¸»é¢˜ç”Ÿæˆ</li>
<li><strong>æ·±åº¦ JavaScript é›†æˆ</strong>ï¼šå˜é‡ä¸è„šæœ¬çš„æ— ç¼åä½œ</li>
</ol>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>å»ºç«‹è¯­ä¹‰åŒ–çš„å˜é‡å‘½åç³»ç»Ÿ</li>
<li>åˆç†ä½¿ç”¨æ•°å­¦å‡½æ•°ä¼˜åŒ–å“åº”å¼è®¾è®¡</li>
<li>åˆ©ç”¨æ¡ä»¶é€»è¾‘å‡å°‘ CSS é‡å¤</li>
<li>ç»“åˆç°ä»£ç‰¹æ€§å¢å¼ºç”¨æˆ·ä½“éªŒ</li>
<li>æ³¨é‡æ€§èƒ½å’Œæµè§ˆå™¨å…¼å®¹æ€§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux ä¸‹çš„"æ—¶é—´"ç®¡ç†ï¼šntpdateã€chronyd æ—¶é—´åŒæ­¥è¯¦è§£]]></title>    <link>https://juejin.cn/post/7576070987294736430</link>    <guid>https://juejin.cn/post/7576070987294736430</guid>    <pubDate>2025-11-24T14:39:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576070987294736430" data-draft-id="7576105458807570432" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux ä¸‹çš„&quot;æ—¶é—´&quot;ç®¡ç†ï¼šntpdateã€chronyd æ—¶é—´åŒæ­¥è¯¦è§£"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-24T14:39:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux ä¸‹çš„"æ—¶é—´"ç®¡ç†ï¼šntpdateã€chronyd æ—¶é—´åŒæ­¥è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T14:39:47.000Z" title="Mon Nov 24 2025 14:39:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ—¶é—´åŒæ­¥çš„é‡è¦æ€§</h2>
<p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå‡†ç¡®çš„æ—¶é—´åŒæ­¥å¯¹äºç³»ç»Ÿè¿è¡Œè‡³å…³é‡è¦ã€‚æ—¶é—´ä¸åŒæ­¥ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>æ—¥å¿—æ—¶é—´æˆ³æ··ä¹±ï¼Œéš¾ä»¥æ’æŸ¥é—®é¢˜</li>
<li>æ•°æ®åº“å¤åˆ¶å’Œäº‹åŠ¡å‡ºç°é—®é¢˜</li>
<li>è¯ä¹¦éªŒè¯å¤±è´¥</li>
<li>è®¡åˆ’ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸</li>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿåè°ƒå›°éš¾</li>
</ul>
<h2 data-id="heading-1">2. æ—¶é—´åŒæ­¥åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">2.1 ç³»ç»Ÿæ—¶é’Ÿä¸ç¡¬ä»¶æ—¶é’Ÿ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[ç¡¬ä»¶æ—¶é’Ÿ] --&gt;|å¼€æœºæ—¶è¯»å–| B[ç³»ç»Ÿæ—¶é’Ÿ]
    B --&gt;|å…³æœºæ—¶å†™å…¥| A
    C[NTPæœåŠ¡å™¨] --&gt;|æ—¶é—´åŒæ­¥| B
    style A fill:#1e3a5f,color:#ffffff
    style B fill:#1e3a5f,color:#ffffff
    style C fill:#1e3a5f,color:#ffffff
</code></pre>
<h3 data-id="heading-3">2.2 æ—¶é—´åŒæ­¥åè®®</h3>
<ul>
<li><strong>NTP</strong>ï¼šç½‘ç»œæ—¶é—´åè®®ï¼Œç²¾åº¦åœ¨å±€åŸŸç½‘å†…å¯è¾¾0.1ms</li>
<li><strong>SNTP</strong>ï¼šç®€å•ç½‘ç»œæ—¶é—´åè®®ï¼Œç²¾åº¦è¦æ±‚ä¸é«˜çš„åœºæ™¯ä½¿ç”¨</li>
<li><strong>PTP</strong>ï¼šç²¾ç¡®æ—¶é—´åè®®ï¼Œç”¨äºéœ€è¦äºšå¾®ç§’çº§ç²¾åº¦çš„åœºæ™¯</li>
</ul>
<h2 data-id="heading-4">3. ä½¿ç”¨ ntpdate è¿›è¡Œæ—¶é—´åŒæ­¥</h2>
<h3 data-id="heading-5">3.1 å®‰è£… ntpdate</h3>
<p>åˆ›å»ºå®‰è£…è„šæœ¬æ–‡ä»¶ï¼š<code>install_ntpdate.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿç±»å‹å¹¶å®‰è£…ntpdate</span>
<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># CentOS/RHEL ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° CentOS/RHEL ç³»ç»Ÿ"</span>
    sudo yum update -y
    sudo yum install ntpdate -y
<span class="hljs-keyword">elif</span> [ -f /etc/debian_version ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Debian/Ubuntu ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° Debian/Ubuntu ç³»ç»Ÿ"</span>
    sudo apt-get update
    sudo apt-get install ntpdate -y
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸æ”¯æŒçš„Linuxå‘è¡Œç‰ˆ"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v ntpdate &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ntpdate å®‰è£…æˆåŠŸï¼"</span>
    ntpdate --version
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ntpdate å®‰è£…å¤±è´¥ï¼"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<p>è¿è¡Œå®‰è£…è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x install_ntpdate.sh
./install_ntpdate.sh
</code></pre>
<h3 data-id="heading-6">3.2 é…ç½® ntpdate</h3>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š<code>configure_ntpdate.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span>
sudo <span class="hljs-built_in">mkdir</span> -p /etc/ntp/backup

<span class="hljs-comment"># å¤‡ä»½åŸæœ‰é…ç½®</span>
<span class="hljs-keyword">if</span> [ -f /etc/ntp.conf ]; <span class="hljs-keyword">then</span>
    sudo <span class="hljs-built_in">cp</span> /etc/ntp.conf /etc/ntp/backup/ntp.conf.backup.$(<span class="hljs-built_in">date</span> +%Y%m%d%H%M%S)
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºæ–°çš„ntpæœåŠ¡å™¨é…ç½®</span>
sudo <span class="hljs-built_in">tee</span> /etc/ntp.conf &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># NTP é…ç½®æ–‡ä»¶</span>
<span class="hljs-comment"># ä¸­å›½å¢ƒå†…çš„NTPæœåŠ¡å™¨</span>
server ntp.aliyun.com iburst
server ntp1.aliyun.com iburst
server ntp2.aliyun.com iburst
server ntp3.aliyun.com iburst
server ntp4.aliyun.com iburst

<span class="hljs-comment"># å›½é™…NTPæœåŠ¡å™¨ä½œä¸ºå¤‡ç”¨</span>
server 0.pool.ntp.org iburst
server 1.pool.ntp.org iburst
server 2.pool.ntp.org iburst
server 3.pool.ntp.org iburst

<span class="hljs-comment"># å®‰å…¨è®¾ç½®</span>
restrict default nomodify notrap nopeer noquery
restrict 127.0.0.1
restrict ::1

<span class="hljs-comment">#  driftfile è®°å½•æ—¶é—´æ¼‚ç§»</span>
driftfile /var/lib/ntp/drift

<span class="hljs-comment"># æ—¥å¿—è®¾ç½®</span>
logfile /var/log/ntp.log
EOF

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ntp.conf é…ç½®å®Œæˆ"</span>
</code></pre>
<h3 data-id="heading-7">3.3 æ‰‹åŠ¨æ—¶é—´åŒæ­¥</h3>
<p>åˆ›å»ºæ‰‹åŠ¨åŒæ­¥è„šæœ¬ï¼š<code>manual_ntp_sync.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å®šä¹‰NTPæœåŠ¡å™¨æ•°ç»„</span>
ntp_servers=(
    <span class="hljs-string">"ntp.aliyun.com"</span>
    <span class="hljs-string">"ntp1.aliyun.com"</span> 
    <span class="hljs-string">"ntp2.aliyun.com"</span>
    <span class="hljs-string">"ntp3.aliyun.com"</span>
    <span class="hljs-string">"time.windows.com"</span>
    <span class="hljs-string">"pool.ntp.org"</span>
)

<span class="hljs-comment"># æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰ç³»ç»Ÿæ—¶é—´: <span class="hljs-subst">$(date)</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰ç¡¬ä»¶æ—¶é—´: <span class="hljs-subst">$(sudo hwclock --show)</span>"</span>

<span class="hljs-comment"># åœæ­¢ntpæœåŠ¡ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet ntpd; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åœæ­¢ntpdæœåŠ¡..."</span>
    sudo systemctl stop ntpd
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># å°è¯•ä¸åŒçš„NTPæœåŠ¡å™¨è¿›è¡ŒåŒæ­¥</span>
<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${ntp_servers[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å°è¯•ä» <span class="hljs-variable">$server</span> åŒæ­¥æ—¶é—´..."</span>
    <span class="hljs-keyword">if</span> sudo ntpdate -u <span class="hljs-variable">$server</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¶é—´åŒæ­¥æˆåŠŸï¼"</span>
        
        <span class="hljs-comment"># å°†ç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å°†ç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ..."</span>
        sudo hwclock --systohc
        
        <span class="hljs-comment"># æ˜¾ç¤ºåŒæ­¥åçš„æ—¶é—´</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥åçš„ç³»ç»Ÿæ—¶é—´: <span class="hljs-subst">$(date)</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥åçš„ç¡¬ä»¶æ—¶é—´: <span class="hljs-subst">$(sudo hwclock --show)</span>"</span>
        <span class="hljs-built_in">exit</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä» <span class="hljs-variable">$server</span> åŒæ­¥å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ªæœåŠ¡å™¨..."</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰NTPæœåŠ¡å™¨åŒæ­¥å‡å¤±è´¥ï¼"</span>
<span class="hljs-built_in">exit</span> 1
</code></pre>
<h3 data-id="heading-8">3.4 è®¾ç½®å®šæ—¶åŒæ­¥ä»»åŠ¡</h3>
<p>åˆ›å»ºå®šæ—¶ä»»åŠ¡é…ç½®ï¼š<code>cron_ntp_sync.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># åˆ›å»ºæ¯æ—¥æ—¶é—´åŒæ­¥è„šæœ¬</span>
sudo <span class="hljs-built_in">tee</span> /usr/local/bin/daily_ntp_sync.sh &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># æ¯æ—¥NTPæ—¶é—´åŒæ­¥è„šæœ¬</span>

LOG_FILE=<span class="hljs-string">"/var/log/ntp_sync.log"</span>
NTP_SERVERS=(<span class="hljs-string">"ntp.aliyun.com"</span> <span class="hljs-string">"ntp1.aliyun.com"</span> <span class="hljs-string">"ntp2.aliyun.com"</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=========================================="</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"NTPåŒæ­¥å¼€å§‹æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>

<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${NTP_SERVERS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å°è¯•ä» <span class="hljs-variable">$server</span> åŒæ­¥..."</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-keyword">if</span> ntpdate -u <span class="hljs-variable">$server</span> 2&gt;&gt; <span class="hljs-variable">$LOG_FILE</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-comment"># åŒæ­¥æˆåŠŸï¼Œå†™å…¥ç¡¬ä»¶æ—¶é’Ÿ</span>
        hwclock --systohc
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¶é—´åŒæ­¥æˆåŠŸï¼æœåŠ¡å™¨: <span class="hljs-variable">$server</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥åç³»ç»Ÿæ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŒæ­¥åç¡¬ä»¶æ—¶é—´: <span class="hljs-subst">$(hwclock --show)</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
        <span class="hljs-built_in">exit</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä» <span class="hljs-variable">$server</span> åŒæ­¥å¤±è´¥"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰æœåŠ¡å™¨åŒæ­¥å¤±è´¥ï¼"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
<span class="hljs-built_in">exit</span> 1
EOF

<span class="hljs-comment"># è®¾ç½®æ‰§è¡Œæƒé™</span>
sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/daily_ntp_sync.sh

<span class="hljs-comment"># æ·»åŠ crontabä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ æ¯æ—¥å‡Œæ™¨3ç‚¹çš„æ—¶é—´åŒæ­¥ä»»åŠ¡..."</span>
(sudo crontab -l 2&gt;/dev/null; <span class="hljs-built_in">echo</span> <span class="hljs-string">"0 3 * * * /usr/local/bin/daily_ntp_sync.sh"</span>) | sudo crontab -

<span class="hljs-comment"># éªŒè¯crontabä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰crontabä»»åŠ¡:"</span>
sudo crontab -l

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®šæ—¶åŒæ­¥ä»»åŠ¡è®¾ç½®å®Œæˆï¼"</span>
</code></pre>
<h2 data-id="heading-9">4. ä½¿ç”¨ chronyd è¿›è¡Œæ—¶é—´åŒæ­¥</h2>
<h3 data-id="heading-10">4.1 å®‰è£… chrony</h3>
<p>åˆ›å»ºå®‰è£…è„šæœ¬ï¼š<code>install_chrony.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿç±»å‹å¹¶å®‰è£…chrony</span>
<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># CentOS/RHEL ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° CentOS/RHEL ç³»ç»Ÿ"</span>
    sudo yum install chrony -y
<span class="hljs-keyword">elif</span> [ -f /etc/debian_version ]; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Debian/Ubuntu ç³»ç»Ÿ</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ° Debian/Ubuntu ç³»ç»Ÿ"</span>
    sudo apt-get update
    sudo apt-get install chrony -y
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸æ”¯æŒçš„Linuxå‘è¡Œç‰ˆ"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v chronyc &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"chrony å®‰è£…æˆåŠŸï¼"</span>
    chronyc --version
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"chrony å®‰è£…å¤±è´¥ï¼"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h3 data-id="heading-11">4.2 é…ç½® chronyd</h3>
<p>åˆ›å»ºè¯¦ç»†é…ç½®è„šæœ¬ï¼š<code>configure_chrony.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¤‡ä»½åŸæœ‰é…ç½®</span>
sudo <span class="hljs-built_in">mkdir</span> -p /etc/chrony/backup
<span class="hljs-keyword">if</span> [ -f /etc/chrony.conf ]; <span class="hljs-keyword">then</span>
    sudo <span class="hljs-built_in">cp</span> /etc/chrony.conf /etc/chrony/backup/chrony.conf.backup.$(<span class="hljs-built_in">date</span> +%Y%m%d%H%M%S)
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºæ–°çš„chronyé…ç½®</span>
sudo <span class="hljs-built_in">tee</span> /etc/chrony.conf &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># chrony é…ç½®æ–‡ä»¶</span>

<span class="hljs-comment"># ä½¿ç”¨é˜¿é‡Œäº‘NTPæœåŠ¡å™¨</span>
server ntp.aliyun.com iburst minpoll 4 maxpoll 10
server ntp1.aliyun.com iburst minpoll 4 maxpoll 10
server ntp2.aliyun.com iburst minpoll 4 maxpoll 10
server ntp3.aliyun.com iburst minpoll 4 maxpoll 10

<span class="hljs-comment"># å¤‡ç”¨å›½é™…NTPæœåŠ¡å™¨</span>
server 0.pool.ntp.org iburst minpoll 4 maxpoll 10
server 1.pool.ntp.org iburst minpoll 4 maxpoll 10
server 2.pool.ntp.org iburst minpoll 4 maxpoll 10

<span class="hljs-comment"># å…è®¸åŒæ­¥çš„å®¢æˆ·ç«¯ç½‘ç»œï¼ˆæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼‰</span>
<span class="hljs-comment"># allow 192.168.1.0/24</span>

<span class="hljs-comment"># æ‹’ç»å…¶ä»–æ‰€æœ‰å®¢æˆ·ç«¯</span>
deny all

<span class="hljs-comment"># æ—¶é—´æºé€‰æ‹©ç­–ç•¥</span>
<span class="hljs-comment"># ä½¿ç”¨æœ€å°‘è·³æ•°çš„æœåŠ¡å™¨</span>
pool pool.ntp.org iburst maxsources 3

<span class="hljs-comment"># æœ¬åœ°æ—¶é—´å±‚æ•°ï¼ˆå¦‚æœæ‰€æœ‰å¤–éƒ¨æœåŠ¡å™¨éƒ½ä¸å¯ç”¨ï¼‰</span>
<span class="hljs-comment"># è¿™å…è®¸å…¶ä»–å®¢æˆ·ç«¯åœ¨éœ€è¦æ—¶ä»æ­¤æœåŠ¡å™¨åŒæ­¥</span>
<span class="hljs-built_in">local</span> stratum 10

<span class="hljs-comment"># åˆå§‹åŒ–æ—¶é—´æ—¶å…è®¸å¤§æ­¥è°ƒæ•´</span>
<span class="hljs-comment"># ä»…åœ¨é¦–æ¬¡å¯åŠ¨æˆ–æ—¶é—´ä¸¥é‡åå·®æ—¶ä½¿ç”¨</span>
initstepslew 300 ntp.aliyun.com ntp1.aliyun.com

<span class="hljs-comment"># è®°å½•æ—¶é—´åå·®å’Œé¢‘ç‡</span>
driftfile /var/lib/chrony/drift

<span class="hljs-comment"># è®°å½•æµ‹é‡æ•°æ®</span>
dumponexit
dumpdir /var/lib/chrony

<span class="hljs-comment"># æ—¥å¿—è®¾ç½®</span>
logdir /var/log/chrony
<span class="hljs-built_in">log</span> measurements statistics tracking

<span class="hljs-comment"># é—°ç§’å¤„ç†æ–¹å¼</span>
<span class="hljs-comment"># 0 - å¿½ç•¥é—°ç§’</span>
<span class="hljs-comment"># 1 - åœ¨å½“å¤©æœ€åæ—¶åˆ»æ’å…¥é—°ç§’</span>
<span class="hljs-comment"># 2 - åœ¨å½“å¤©æœ€åæ—¶åˆ»æ’å…¥é—°ç§’ï¼Œå¹¶åœ¨ä¹‹å‰é˜¶æ®µé™ä½æ—¶é’Ÿé¢‘ç‡</span>
leapsecmode 1

<span class="hljs-comment"># æ—¶é—´åŒæ­¥ç²¾åº¦è¦æ±‚</span>
<span class="hljs-comment"># æœ€å°è½®è¯¢é—´éš”ï¼ˆ2^4=16ç§’ï¼‰</span>
minpoll 4
<span class="hljs-comment"># æœ€å¤§è½®è¯¢é—´éš”ï¼ˆ2^10=1024ç§’ï¼‰</span>
maxpoll 10

<span class="hljs-comment"># æœ€å¤§æ—¶é—´åå·®ï¼ˆç§’ï¼‰ï¼Œè¶…è¿‡æ­¤å€¼å°†ç«‹å³åŒæ­¥</span>
maxdistance 16.0

<span class="hljs-comment"># æ—¶é’Ÿé¢‘ç‡å®¹å¿åº¦ï¼ˆPPMï¼‰</span>
maxdrift 100

<span class="hljs-comment"># å®¢æˆ·ç«¯è®¿é—®æ§åˆ¶</span>
cmdallow 127.0.0.1
cmdallow ::1
EOF

<span class="hljs-built_in">echo</span> <span class="hljs-string">"chrony.conf é…ç½®å®Œæˆ"</span>

<span class="hljs-comment"># è®¾ç½®æ­£ç¡®çš„æƒé™</span>
sudo <span class="hljs-built_in">chown</span> root:root /etc/chrony.conf
sudo <span class="hljs-built_in">chmod</span> 644 /etc/chrony.conf
</code></pre>
<h3 data-id="heading-12">4.3 å¯åŠ¨å’Œç®¡ç† chronyd æœåŠ¡</h3>
<p>åˆ›å»ºæœåŠ¡ç®¡ç†è„šæœ¬ï¼š<code>manage_chrony_service.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¯åŠ¨chronydæœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨chronydæœåŠ¡..."</span>
sudo systemctl <span class="hljs-built_in">enable</span> chronyd
sudo systemctl start chronyd

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥chronydæœåŠ¡çŠ¶æ€..."</span>
sudo systemctl status chronyd --no-pager

<span class="hljs-comment"># ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨</span>
<span class="hljs-built_in">sleep</span> 3

<span class="hljs-comment"># ä½¿ç”¨chronycæ£€æŸ¥åŒæ­¥çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥æ—¶é—´æºçŠ¶æ€..."</span>
sudo chronyc sources -v

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥è·Ÿè¸ªçŠ¶æ€..."</span>
sudo chronyc tracking

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥NTPæœåŠ¡å™¨çŠ¶æ€..."</span>
sudo chronyc ntpdata

<span class="hljs-comment"># åˆ›å»ºæœåŠ¡ç®¡ç†å¿«æ·è„šæœ¬</span>
sudo <span class="hljs-built_in">tee</span> /usr/local/bin/chrony-status.sh &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== chronyd æœåŠ¡çŠ¶æ€ ==="</span>
systemctl status chronyd --no-pager
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== æ—¶é—´æºçŠ¶æ€ ==="</span>
chronyc sources -v
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== è·Ÿè¸ªçŠ¶æ€ ==="</span>
chronyc tracking
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== NTPæ•°æ® ==="</span>
chronyc ntpdata
EOF

sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/chrony-status.sh

<span class="hljs-built_in">echo</span> <span class="hljs-string">"chronydæœåŠ¡ç®¡ç†è®¾ç½®å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯ä»¥ä½¿ç”¨ 'chrony-status.sh' å‘½ä»¤æŸ¥çœ‹å®Œæ•´çŠ¶æ€"</span>
</code></pre>
<h3 data-id="heading-13">4.4 chronyc å¸¸ç”¨å‘½ä»¤æ“ä½œ</h3>
<p>åˆ›å»ºå‘½ä»¤å‚è€ƒè„šæœ¬ï¼š<code>chronyc_commands.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># chronyc å‘½ä»¤å‚è€ƒè„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== chronyc å¸¸ç”¨å‘½ä»¤å‚è€ƒ ==="</span>

<span class="hljs-comment"># æ˜¾ç¤ºæ—¶é—´æºçŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. æŸ¥çœ‹æ—¶é—´æºçŠ¶æ€:"</span>
sudo chronyc sources -v

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n2. æŸ¥çœ‹è·Ÿè¸ªçŠ¶æ€:"</span>
sudo chronyc tracking

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n3. æŸ¥çœ‹NTPæœåŠ¡å™¨è¯¦ç»†ä¿¡æ¯:"</span>
sudo chronyc ntpdata

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n4. æ‰‹åŠ¨ç«‹å³åŒæ­¥:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   sudo chronyc makestep"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n5. æ·»åŠ æ–°çš„æ—¶é—´æº:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   sudo chronyc add server ntp.server.com"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n6. åˆ é™¤æ—¶é—´æº:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   sudo chronyc delete ntp.server.com"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n7. æ£€æŸ¥å®¢æˆ·ç«¯è®¿é—®:"</span>
sudo chronyc clients

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n8. æŸ¥çœ‹æ´»åŠ¨å†…å­˜:"</span>
sudo chronyc activity

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n9. æ‰‹åŠ¨è°ƒæ•´æ—¶é—´:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   sudo chronyc settime '2024-01-01 12:00:00'"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n10. å¼ºåˆ¶ç«‹å³åŒæ­¥:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"    sudo chronyc burst 2/4"</span>

<span class="hljs-comment"># åˆ›å»ºå¸¸ç”¨å‘½ä»¤çš„å¿«æ·æ–¹å¼</span>
sudo <span class="hljs-built_in">tee</span> /usr/local/bin/chrony-quick-status.sh &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ•’ Chrony å¿«é€ŸçŠ¶æ€æ£€æŸ¥"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"======================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æºçŠ¶æ€:"</span>
chronyc sources | <span class="hljs-built_in">head</span> -10
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nè·Ÿè¸ªä¿¡æ¯:"</span>
chronyc tracking | grep -E <span class="hljs-string">"(Stratum|Ref time|System time)"</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\næœ€ååŒæ­¥:"</span>
chronyc tracking | grep <span class="hljs-string">"Last offset"</span>
EOF

sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/chrony-quick-status.sh

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå¿«æ·å‘½ä»¤ 'chrony-quick-status.sh' å·²åˆ›å»ºï¼"</span>
</code></pre>
<h2 data-id="heading-14">5. æ—¶é—´åŒæ­¥ç›‘æ§å’Œæ•…éšœæ’é™¤</h2>
<h3 data-id="heading-15">5.1 åˆ›å»ºç›‘æ§è„šæœ¬</h3>
<p>åˆ›å»ºç›‘æ§è„šæœ¬ï¼š<code>time_sync_monitor.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ—¶é—´åŒæ­¥ç›‘æ§è„šæœ¬</span>

LOG_FILE=<span class="hljs-string">"/var/log/time_sync_monitor.log"</span>
ALERT_THRESHOLD=1000  <span class="hljs-comment"># æ¯«ç§’</span>

<span class="hljs-comment"># æ—¥å¿—å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">log_message</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-subst">$(date '+%Y-%m-%d %H:%M:%S')</span>] <span class="hljs-variable">$1</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
}

<span class="hljs-comment"># æ£€æŸ¥chronydçŠ¶æ€</span>
<span class="hljs-function"><span class="hljs-title">check_chronyd</span></span>() {
    <span class="hljs-keyword">if</span> systemctl is-active --quiet chronyd; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ chronyd æœåŠ¡è¿è¡Œæ­£å¸¸"</span>
        log_message <span class="hljs-string">"chronydæœåŠ¡è¿è¡Œæ­£å¸¸"</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— chronyd æœåŠ¡æœªè¿è¡Œ"</span>
        log_message <span class="hljs-string">"ERROR: chronydæœåŠ¡æœªè¿è¡Œ"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># æ£€æŸ¥æ—¶é—´åŒæ­¥çŠ¶æ€</span>
<span class="hljs-function"><span class="hljs-title">check_sync_status</span></span>() {
    <span class="hljs-built_in">local</span> offset=$(chronyc tracking | grep <span class="hljs-string">"Last offset"</span> | awk <span class="hljs-string">'{print $4}'</span>)
    <span class="hljs-built_in">local</span> stratum=$(chronyc tracking | grep <span class="hljs-string">"Stratum"</span> | awk <span class="hljs-string">'{print $3}'</span>)
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰å±‚çº§: <span class="hljs-variable">$stratum</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€ååç§»: <span class="hljs-variable">${offset}</span>ç§’"</span>
    
    <span class="hljs-comment"># è½¬æ¢ä¸ºæ¯«ç§’è¿›è¡Œæ¯”è¾ƒ</span>
    <span class="hljs-built_in">local</span> offset_ms=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$offset</span> * 1000"</span> | bc | <span class="hljs-built_in">cut</span> -d. -f1)
    
    <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$offset_ms</span>"</span> ] &amp;&amp; [ <span class="hljs-string">"<span class="hljs-variable">$offset_ms</span>"</span> -lt <span class="hljs-string">"<span class="hljs-variable">$ALERT_THRESHOLD</span>"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ æ—¶é—´åŒæ­¥æ­£å¸¸"</span>
        log_message <span class="hljs-string">"æ—¶é—´åŒæ­¥æ­£å¸¸ - åç§»: <span class="hljs-variable">${offset}</span>ç§’, å±‚çº§: <span class="hljs-variable">$stratum</span>"</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš  æ—¶é—´åŒæ­¥å¯èƒ½å­˜åœ¨é—®é¢˜"</span>
        log_message <span class="hljs-string">"WARNING: æ—¶é—´åŒæ­¥é—®é¢˜ - åç§»: <span class="hljs-variable">${offset}</span>ç§’, å±‚çº§: <span class="hljs-variable">$stratum</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># æ£€æŸ¥æ—¶é—´æºçŠ¶æ€</span>
<span class="hljs-function"><span class="hljs-title">check_sources</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¶é—´æºçŠ¶æ€:"</span>
    chronyc sources | grep -E <span class="hljs-string">"^^\*|^^#|^\+"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"  <span class="hljs-variable">$line</span>"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-built_in">local</span> online_sources=$(chronyc sources | grep -c <span class="hljs-string">"^\*\|^\+"</span>)
    <span class="hljs-built_in">local</span> total_sources=$(chronyc sources | grep -c <span class="hljs-string">"^\^"</span>)
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åœ¨çº¿æº: <span class="hljs-variable">$online_sources</span>/<span class="hljs-variable">$total_sources</span>"</span>
    
    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$online_sources</span>"</span> -eq 0 ]; <span class="hljs-keyword">then</span>
        log_message <span class="hljs-string">"ERROR: æ²¡æœ‰å¯ç”¨çš„åœ¨çº¿æ—¶é—´æº"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># ä¸»ç›‘æ§å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ—¶é—´åŒæ­¥çŠ¶æ€ç›‘æ§ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span>
    
    check_chronyd
    <span class="hljs-built_in">local</span> chronyd_status=$?
    
    <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$chronyd_status</span> -eq 0 ]; <span class="hljs-keyword">then</span>
        check_sync_status
        check_sources
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”±äºchronydæœªè¿è¡Œï¼Œè·³è¿‡åŒæ­¥çŠ¶æ€æ£€æŸ¥"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç›‘æ§å®Œæˆ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯¦ç»†æ—¥å¿—è¯·æŸ¥çœ‹: <span class="hljs-variable">$LOG_FILE</span>"</span>
}

<span class="hljs-comment"># æ‰§è¡Œä¸»å‡½æ•°</span>
main
</code></pre>
<h3 data-id="heading-16">5.2 æ•…éšœæ’é™¤è„šæœ¬</h3>
<p>åˆ›å»ºæ•…éšœæ’é™¤è„šæœ¬ï¼š<code>time_sync_troubleshoot.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ—¶é—´åŒæ­¥æ•…éšœæ’é™¤è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ—¶é—´åŒæ­¥æ•…éšœæ’é™¤ ==="</span>

<span class="hljs-comment"># 1. æ£€æŸ¥åŸºç¡€æœåŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. æ£€æŸ¥æœåŠ¡çŠ¶æ€..."</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet chronyd; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ“ chronyd è¿è¡Œä¸­"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ— chronyd æœªè¿è¡Œï¼Œå°è¯•å¯åŠ¨..."</span>
    sudo systemctl start chronyd
    <span class="hljs-built_in">sleep</span> 2
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. æ£€æŸ¥ç½‘ç»œè¿æ¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. æ£€æŸ¥NTPæœåŠ¡å™¨è¿é€šæ€§..."</span>
NTP_SERVERS=(<span class="hljs-string">"ntp.aliyun.com"</span> <span class="hljs-string">"ntp1.aliyun.com"</span> <span class="hljs-string">"time.windows.com"</span>)
<span class="hljs-keyword">for</span> server <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${NTP_SERVERS[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> ping -c 1 -W 1 <span class="hljs-variable">$server</span> &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ“ <span class="hljs-variable">$server</span> å¯è¾¾"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ— <span class="hljs-variable">$server</span> ä¸å¯è¾¾"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. æ£€æŸ¥é˜²ç«å¢™..."</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v firewall-cmd &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> sudo firewall-cmd --list-ports | grep -q <span class="hljs-string">"123/udp"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ“ NTPç«¯å£(123/udp)å·²å¼€æ”¾"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âš  NTPç«¯å£å¯èƒ½è¢«é˜²ç«å¢™é˜»æŒ¡"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   è¿è¡Œ: sudo firewall-cmd --add-service=ntp --permanent"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"   ç„¶å: sudo firewall-cmd --reload"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 4. æ£€æŸ¥æ—¶é—´å·®å¼‚</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. æ£€æŸ¥æ—¶é—´å·®å¼‚..."</span>
current_time=$(<span class="hljs-built_in">date</span>)
hw_time=$(sudo hwclock --show)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   ç³»ç»Ÿæ—¶é—´: <span class="hljs-variable">$current_time</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"   ç¡¬ä»¶æ—¶é—´: <span class="hljs-variable">$hw_time</span>"</span>

<span class="hljs-comment"># 5. å¼ºåˆ¶åŒæ­¥å°è¯•</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"5. å°è¯•å¼ºåˆ¶åŒæ­¥..."</span>
sudo chronyc makestep

<span class="hljs-comment"># 6. æ£€æŸ¥è¯¦ç»†çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"6. è¯¦ç»†çŠ¶æ€æ£€æŸ¥..."</span>
sudo chronyc sources -v
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
sudo chronyc tracking

<span class="hljs-comment"># 7. æ£€æŸ¥æ—¥å¿—</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"7. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—..."</span>
<span class="hljs-keyword">if</span> journalctl -u chronyd --since <span class="hljs-string">"1 hour ago"</span> | grep -i error; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âš  å‘ç°é”™è¯¯æ—¥å¿—"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   âœ“ æœ€è¿‘1å°æ—¶æ— é”™è¯¯æ—¥å¿—"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ•…éšœæ’é™¤å®Œæˆ ==="</span>
</code></pre>
<h2 data-id="heading-17">6. é«˜çº§é…ç½®å’Œä¼˜åŒ–</h2>
<h3 data-id="heading-18">6.1 åˆ›å»ºé«˜çº§ chrony é…ç½®</h3>
<p>åˆ›å»ºé«˜çº§é…ç½®è„šæœ¬ï¼š<code>advanced_chrony_config.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># é«˜çº§chronyé…ç½®</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"åº”ç”¨é«˜çº§chronyé…ç½®..."</span>

<span class="hljs-comment"># å¤‡ä»½å½“å‰é…ç½®</span>
sudo <span class="hljs-built_in">cp</span> /etc/chrony.conf /etc/chrony.conf.backup.advanced.$(<span class="hljs-built_in">date</span> +%Y%m%d%H%M%S)

<span class="hljs-comment"># åº”ç”¨é«˜çº§é…ç½®</span>
sudo <span class="hljs-built_in">tee</span> -a /etc/chrony.conf &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>

<span class="hljs-comment"># === é«˜çº§é…ç½®é€‰é¡¹ ===</span>

<span class="hljs-comment"># è®¾ç½®æœ€å°/æœ€å¤§è½®è¯¢é—´éš”</span>
minpoll 4    <span class="hljs-comment"># 16ç§’</span>
maxpoll 10   <span class="hljs-comment"># 17åˆ†é’Ÿ</span>

<span class="hljs-comment"># åœ¨å¯åŠ¨æ—¶å¿«é€ŸåŒæ­¥</span>
iburst

<span class="hljs-comment"># å…è®¸æ›´å¤§çš„åˆå§‹æ—¶é—´åå·®</span>
initstepslew 30 ntp.aliyun.com ntp1.aliyun.com

<span class="hljs-comment"># æ—¶é’Ÿé€‰æ‹©ç®—æ³•</span>
<span class="hljs-comment"># ä½¿ç”¨ç»„åˆç®—æ³•ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-comment"># å¯é€‰æ‹©ä½¿ç”¨ALGORITHMç»„åˆ</span>

<span class="hljs-comment"># é¢‘ç‡ç¨³å®šæ€§è®¾ç½®</span>
<span class="hljs-comment"># æœ€å¤§é¢‘ç‡è¯¯å·®ï¼ˆppmï¼‰</span>
maxfreq 100
minfreq -100

<span class="hljs-comment"># æ—¶é—´åå·®è¿‡æ»¤</span>
<span class="hljs-comment"># ä½¿ç”¨æ‰€æœ‰æ ·æœ¬è¿›è¡Œè¿‡æ»¤</span>
<span class="hljs-comment"># å¯é€‰æ‹©ä½¿ç”¨æ›´ä¸¥æ ¼çš„è¿‡æ»¤ç­–ç•¥</span>

<span class="hljs-comment"># é—°ç§’å¤„ç†</span>
leapsecmode slew
maxslewrate 1000

<span class="hljs-comment"># å®¢æˆ·ç«¯è®¿é—®æ—¥å¿—</span>
clientloglimit 100000000

<span class="hljs-comment"># ç¡¬ä»¶æ—¶é—´æˆ³ï¼ˆå¦‚æœç½‘å¡æ”¯æŒï¼‰</span>
hwtimestamp *

<span class="hljs-comment"># ç½‘ç»œæ—¶é—´æˆ³</span>
<span class="hljs-comment"># å¯ç”¨å†…æ ¸æ—¶é—´æˆ³</span>
<span class="hljs-comment"># éœ€è¦å†…æ ¸æ”¯æŒ</span>
EOF

<span class="hljs-comment"># é‡å¯æœåŠ¡åº”ç”¨é…ç½®</span>
sudo systemctl restart chronyd
<span class="hljs-built_in">sleep</span> 2

<span class="hljs-comment"># éªŒè¯é…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"éªŒè¯æ–°é…ç½®..."</span>
sudo chronyc tracking
sudo chronyc sources

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é«˜çº§é…ç½®åº”ç”¨å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-19">6.2 æ—¶é—´åŒæ­¥æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç³»ç»Ÿå¯åŠ¨] --&gt; B[chronydæœåŠ¡å¯åŠ¨]
    B --&gt; C[è¯»å–é…ç½®æ–‡ä»¶]
    C --&gt; D[è¿æ¥é…ç½®çš„NTPæœåŠ¡å™¨]
    D --&gt; E{è¿æ¥æˆåŠŸ?}
    E --&gt;|æ˜¯| F[æ—¶é—´åŒæ­¥]
    E --&gt;|å¦| G[å°è¯•å¤‡ç”¨æœåŠ¡å™¨]
    F --&gt; H[æŒç»­ç›‘æ§å’Œå¾®è°ƒ]
    G --&gt; I{æ‰€æœ‰æœåŠ¡å™¨å¤±è´¥?}
    I --&gt;|æ˜¯| J[ä½¿ç”¨æœ¬åœ°æ—¶é’Ÿ]
    I --&gt;|å¦| D
    H --&gt; K[æ­£å¸¸æ—¶é—´åŒæ­¥]
    J --&gt; L[ç­‰å¾…ç½‘ç»œæ¢å¤]
    L --&gt; D
    style A fill:#1e3a5f,color:#ffffff
    style B fill:#1e3a5f,color:#ffffff
    style C fill:#1e3a5f,color:#ffffff
    style D fill:#1e3a5f,color:#ffffff
    style E fill:#4a1e5f,color:#ffffff
    style F fill:#1e5f3a,color:#ffffff
    style G fill:#5f3a1e,color:#ffffff
    style H fill:#1e5f3a,color:#ffffff
    style I fill:#4a1e5f,color:#ffffff
    style J fill:#5f1e1e,color:#ffffff
    style K fill:#1e5f3a,color:#ffffff
    style L fill:#5f3a1e,color:#ffffff
</code></pre>
<h2 data-id="heading-20">7. å®é™…éƒ¨ç½²ç¤ºä¾‹</h2>
<h3 data-id="heading-21">7.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬</h3>
<p>åˆ›å»ºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬ï¼š<code>production_deploy.sh</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒæ—¶é—´åŒæ­¥éƒ¨ç½²è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹ç”Ÿäº§ç¯å¢ƒæ—¶é—´åŒæ­¥éƒ¨ç½²..."</span>

<span class="hljs-comment"># æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬</span>
<span class="hljs-built_in">source</span> /etc/os-release
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°ç³»ç»Ÿ: <span class="hljs-variable">$PRETTY_NAME</span>"</span>

<span class="hljs-comment"># å®‰è£…å¿…è¦çš„å·¥å…·</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰è£…å¿…è¦å·¥å…·..."</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$ID</span>"</span> == <span class="hljs-string">"centos"</span> || <span class="hljs-string">"<span class="hljs-variable">$ID</span>"</span> == <span class="hljs-string">"rhel"</span> ]]; <span class="hljs-keyword">then</span>
    sudo yum install -y chrony ntpdate net-tools
<span class="hljs-keyword">elif</span> [[ <span class="hljs-string">"<span class="hljs-variable">$ID</span>"</span> == <span class="hljs-string">"debian"</span> || <span class="hljs-string">"<span class="hljs-variable">$ID</span>"</span> == <span class="hljs-string">"ubuntu"</span> ]]; <span class="hljs-keyword">then</span>
    sudo apt-get update
    sudo apt-get install -y chrony ntpdate net-tools
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸æ”¯æŒçš„å‘è¡Œç‰ˆ"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åœæ­¢å¹¶ç¦ç”¨é»˜è®¤çš„NTPæœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æœåŠ¡..."</span>
sudo systemctl stop ntpd 2&gt;/dev/null || <span class="hljs-literal">true</span>
sudo systemctl <span class="hljs-built_in">disable</span> ntpd 2&gt;/dev/null || <span class="hljs-literal">true</span>

<span class="hljs-comment"># å¤‡ä»½åŸæœ‰é…ç½®</span>
BACKUP_DIR=<span class="hljs-string">"/etc/chrony/backup_<span class="hljs-subst">$(date +%Y%m%d_%H%M%S)</span>"</span>
sudo <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>"</span>
<span class="hljs-keyword">if</span> [ -f /etc/chrony.conf ]; <span class="hljs-keyword">then</span>
    sudo <span class="hljs-built_in">cp</span> /etc/chrony.conf <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒé…ç½®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²chronyé…ç½®..."</span>
sudo <span class="hljs-built_in">tee</span> /etc/chrony.conf &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒ chrony é…ç½®</span>

<span class="hljs-comment"># ä¸»è¦æ—¶é—´æœåŠ¡å™¨ï¼ˆæ ¹æ®åœ°ç†ä½ç½®é€‰æ‹©ï¼‰</span>
<span class="hljs-comment"># äºšæ´²åœ°åŒºæ¨èä½¿ç”¨é˜¿é‡Œäº‘NTP</span>
server ntp.aliyun.com iburst minpoll 4 maxpoll 10
server ntp1.aliyun.com iburst minpoll 4 maxpoll 10
server ntp2.aliyun.com iburst minpoll 4 maxpoll 10
server ntp3.aliyun.com iburst minpoll 4 maxpoll 10

<span class="hljs-comment"># å¤‡ç”¨å›½é™…æœåŠ¡å™¨</span>
server 0.asia.pool.ntp.org iburst minpoll 4 maxpoll 10
server 1.asia.pool.ntp.org iburst minpoll 4 maxpoll 10

<span class="hljs-comment"># æœ¬åœ°å¤‡ç”¨ï¼ˆå½“æ‰€æœ‰å¤–éƒ¨æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼‰</span>
<span class="hljs-built_in">local</span> stratum 8

<span class="hljs-comment"># æ€§èƒ½ä¼˜åŒ–</span>
initstepslew 30 ntp.aliyun.com ntp1.aliyun.com
driftfile /var/lib/chrony/drift
makestep 1.0 3
maxdistance 16.0
maxdrift 100

<span class="hljs-comment"># å®‰å…¨è®¾ç½®</span>
cmdport 0
bindcmdaddress 127.0.0.1
bindcmdaddress ::1

<span class="hljs-comment"># æ—¥å¿—å’Œç›‘æ§</span>
logdir /var/log/chrony
<span class="hljs-built_in">log</span> measurements statistics tracking
clientloglimit 100000000

<span class="hljs-comment"># å®¢æˆ·ç«¯è®¿é—®æ§åˆ¶ï¼ˆæ ¹æ®å®é™…ç½‘ç»œè°ƒæ•´ï¼‰</span>
<span class="hljs-comment"># allow 192.168.1.0/24</span>
deny all
EOF

<span class="hljs-comment"># é…ç½®ç³»ç»ŸæœåŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®ç³»ç»ŸæœåŠ¡..."</span>
sudo systemctl <span class="hljs-built_in">enable</span> chronyd
sudo systemctl start chronyd

<span class="hljs-comment"># ç­‰å¾…æœåŠ¡ç¨³å®š</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç­‰å¾…æœåŠ¡å¯åŠ¨..."</span>
<span class="hljs-built_in">sleep</span> 5

<span class="hljs-comment"># åˆå§‹æ—¶é—´åŒæ­¥</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰§è¡Œåˆå§‹æ—¶é—´åŒæ­¥..."</span>
sudo chronyc -a makestep

<span class="hljs-comment"># éªŒè¯éƒ¨ç½²</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"éªŒè¯éƒ¨ç½²..."</span>
<span class="hljs-keyword">if</span> systemctl is-active --quiet chronyd; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ chronyd æœåŠ¡è¿è¡Œæ­£å¸¸"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— chronyd æœåŠ¡å¯åŠ¨å¤±è´¥"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥åŒæ­¥çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥åŒæ­¥çŠ¶æ€..."</span>
<span class="hljs-keyword">if</span> sudo chronyc waitsync 3 0.1 1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ æ—¶é—´åŒæ­¥æˆåŠŸ"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš  æ—¶é—´åŒæ­¥å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ˜¾ç¤ºæœ€ç»ˆçŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€ç»ˆçŠ¶æ€:"</span>
sudo chronyc sources
sudo chronyc tracking

<span class="hljs-comment"># åˆ›å»ºç›‘æ§ä»»åŠ¡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®ç›‘æ§..."</span>
sudo <span class="hljs-built_in">tee</span> /etc/cron.hourly/chrony-monitor &gt; /dev/null &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># æ¯å°æ—¶æ£€æŸ¥chronyçŠ¶æ€</span>
<span class="hljs-keyword">if</span> ! chronyc tracking | grep -q <span class="hljs-string">"Stratum"</span>; <span class="hljs-keyword">then</span>
    logger <span class="hljs-string">"chronyç›‘æ§: æ—¶é—´åŒæ­¥å¼‚å¸¸"</span>
    systemctl restart chronyd
<span class="hljs-keyword">fi</span>
EOF

sudo <span class="hljs-built_in">chmod</span> +x /etc/cron.hourly/chrony-monitor

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿäº§ç¯å¢ƒæ—¶é—´åŒæ­¥éƒ¨ç½²å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨: <span class="hljs-variable">$BACKUP_DIR</span>"</span>
</code></pre>
<h2 data-id="heading-22">8. æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<ol>
<li><strong>ntpdateçš„åŸºæœ¬ä½¿ç”¨</strong>ï¼šé€‚åˆä¸€æ¬¡æ€§æ—¶é—´åŒæ­¥å’Œç®€å•åœºæ™¯</li>
<li><strong>chronydçš„å®Œæ•´é…ç½®</strong>ï¼šé€‚åˆç”Ÿäº§ç¯å¢ƒå’Œéœ€è¦æŒç»­æ—¶é—´åŒæ­¥çš„åœºæ™¯</li>
<li><strong>ç›‘æ§å’Œæ•…éšœæ’é™¤</strong>ï¼šç¡®ä¿æ—¶é—´åŒæ­¥æœåŠ¡çš„ç¨³å®šæ€§</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</strong>ï¼šå®Œæ•´çš„ç”Ÿäº§çº§é…ç½®æ–¹æ¡ˆ</li>
</ol>
<h3 data-id="heading-23">8.1 é€‰æ‹©å»ºè®®</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ—¶é—´åŒæ­¥éœ€æ±‚] --&gt; B{åœºæ™¯é€‰æ‹©}
    B --&gt;|ç®€å•åŒæ­¥| C[ä½¿ç”¨ntpdate]
    B --&gt;|ç”Ÿäº§ç¯å¢ƒ| D[ä½¿ç”¨chronyd]
    C --&gt; E[æ‰‹åŠ¨æˆ–å®šæ—¶ä»»åŠ¡]
    D --&gt; F[æŒç»­è‡ªåŠ¨åŒæ­¥]
    E --&gt; G[å®ŒæˆåŒæ­¥]
    F --&gt; G
    style A fill:#1e3a5f,color:#ffffff
    style B fill:#4a1e5f,color:#ffffff
    style C fill:#5f3a1e,color:#ffffff
    style D fill:#1e5f3a,color:#ffffff
    style E fill:#5f3a1e,color:#ffffff
    style F fill:#1e5f3a,color:#ffffff
    style G fill:#1e3a5f,color:#ffffff
</code></pre>
<h3 data-id="heading-24">8.2 æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>å¤šæ—¶é—´æºé…ç½®</strong>ï¼šé…ç½®å¤šä¸ªå¯é çš„æ—¶é—´æœåŠ¡å™¨</li>
<li><strong>å±‚çº§ç®¡ç†</strong>ï¼šåˆç†è®¾ç½®stratumçº§åˆ«</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šè®¾ç½®æ—¶é—´åŒæ­¥ç›‘æ§å’Œå‘Šè­¦</li>
<li><strong>å®šæœŸç»´æŠ¤</strong>ï¼šå®šæœŸæ£€æŸ¥æ—¶é—´åŒæ­¥çŠ¶æ€</li>
<li><strong>å¤‡ä»½é…ç½®</strong>ï¼šé‡è¦ä¿®æ”¹å‰å¤‡ä»½é…ç½®æ–‡ä»¶</li>
</ol>
<p>é€šè¿‡éµå¾ªæœ¬æ•™ç¨‹çš„æ­¥éª¤ï¼Œæ‚¨å¯ä»¥å»ºç«‹ç¨³å®šå¯é çš„æ—¶é—´åŒæ­¥ç³»ç»Ÿï¼Œç¡®ä¿LinuxæœåŠ¡å™¨æ—¶é—´çš„å‡†ç¡®æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[javaçš„å¼‚æ­¥çº¿ç¨‹æ± çš„å¯é æ€§æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7576086557716856883</link>    <guid>https://juejin.cn/post/7576086557716856883</guid>    <pubDate>2025-11-24T14:57:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576086557716856883" data-draft-id="7576090441433645066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="javaçš„å¼‚æ­¥çº¿ç¨‹æ± çš„å¯é æ€§æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-24T14:57:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éšé£é£˜çš„äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/361110952753560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            javaçš„å¼‚æ­¥çº¿ç¨‹æ± çš„å¯é æ€§æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/361110952753560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éšé£é£˜çš„äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T14:57:01.000Z" title="Mon Nov 24 2025 14:57:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Java å¼‚æ­¥çº¿ç¨‹æ± çš„å¯é æ€§ï¼Œæ ¸å¿ƒæ˜¯ä¿éšœÂ <strong>ä»»åŠ¡ä¸ä¸¢å¤±ã€å¼‚å¸¸å¯æ„ŸçŸ¥ã€èµ„æºä¸æ³„éœ²ã€æ‰§è¡Œå¯é¢„æœŸã€æ•…éšœå¯æ¢å¤</strong>ã€‚çº¿ç¨‹æ± ä½œä¸ºå¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒè°ƒåº¦ç»„ä»¶ï¼Œå…¶å¯é æ€§é—®é¢˜å¤šæºäºå‚æ•°é…ç½®ä¸å½“ã€å¼‚å¸¸å¤„ç†ç¼ºå¤±ã€èµ„æºç®¡ç†å¤±æ§ç­‰åœºæ™¯ã€‚ä»¥ä¸‹ä»Â <strong>æ ¸å¿ƒç»´åº¦ã€é£é™©ç‚¹ã€è§£å†³æ–¹æ¡ˆã€æœ€ä½³å®è·µ</strong>Â å››ä¸ªå±‚é¢ï¼Œç³»ç»Ÿæ¢³ç†çº¿ç¨‹æ± çš„å¯é æ€§è®¾è®¡ä¸ä¿éšœæ‰‹æ®µï¼š</p>
<h2 data-id="heading-0">ä¸€ã€çº¿ç¨‹æ± å¯é æ€§çš„æ ¸å¿ƒç»´åº¦</h2>
<p>åˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å¯é ï¼Œéœ€å›´ç»•ä»¥ä¸‹ 5 ä¸ªæ ¸å¿ƒç›®æ ‡ï¼š</p>
<ol>
<li><strong>ä»»åŠ¡ä¸ä¸¢å¤±</strong>ï¼šæäº¤çš„ä»»åŠ¡éœ€è¢«æ‰§è¡Œï¼ˆæˆ–æ˜ç¡®æ‹’ç»åå¯é‡è¯•ï¼‰ï¼Œæ— é™é»˜ä¸¢å¤±ï¼›</li>
<li><strong>å¼‚å¸¸å¯æ„ŸçŸ¥</strong>ï¼šä»»åŠ¡æ‰§è¡Œä¸­çš„å¼‚å¸¸éœ€è¢«æ•è·ã€è®°å½•ï¼Œæ—  â€œåå¼‚å¸¸â€ å¯¼è‡´çš„é—®é¢˜æ’æŸ¥å›°éš¾ï¼›</li>
<li><strong>èµ„æºä¸æ³„éœ²</strong>ï¼šçº¿ç¨‹ã€é˜Ÿåˆ—ã€é”ç­‰èµ„æºéœ€æ­£å¸¸é‡Šæ”¾ï¼Œé¿å… OOMã€çº¿ç¨‹æ³„éœ²ã€æ­»é”ç­‰ï¼›</li>
<li><strong>æ‰§è¡Œå¯é¢„æœŸ</strong>ï¼šä»»åŠ¡æ‰§è¡Œé¡ºåºã€è¶…æ—¶ã€é‡è¯•é€»è¾‘ç¬¦åˆä¸šåŠ¡é¢„æœŸï¼Œæ— æ— åº / é‡å¤æ‰§è¡Œé£é™©ï¼›</li>
<li><strong>æ•…éšœå¯æ¢å¤</strong>ï¼šä¸ªåˆ«çº¿ç¨‹å´©æºƒã€ç¬æ—¶é«˜è´Ÿè½½ç­‰åœºæ™¯ä¸‹ï¼Œçº¿ç¨‹æ± èƒ½å¿«é€Ÿæ¢å¤æ­£å¸¸è°ƒåº¦èƒ½åŠ›ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€å…³é”®é£é™©ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">1. ä»»åŠ¡ä¸¢å¤±é£é™©ï¼šæäº¤ / è°ƒåº¦ç¯èŠ‚çš„ä»»åŠ¡ä¸¢å¤±</h3>
<h4 data-id="heading-3">é£é™©åœºæ™¯ï¼š</h4>
<ul>
<li>çº¿ç¨‹æ± å·²å…³é—­ï¼ˆ<code>isShutdown()=true</code>ï¼‰ï¼Œä»æäº¤ä»»åŠ¡ï¼›</li>
<li>ä»»åŠ¡é˜Ÿåˆ—æ»¡ + æ‹’ç»ç­–ç•¥ä¸å½“ï¼ˆå¦‚Â <code>DiscardPolicy</code>Â ç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼‰ï¼›</li>
<li>æ— ç•Œé˜Ÿåˆ—å¯¼è‡´ OOMï¼Œè¿›ç¨‹å´©æºƒé—´æ¥ä¸¢å¤±é˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
</ul>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆï¼š</h4>
<h5 data-id="heading-5">ï¼ˆ1ï¼‰åˆç†é€‰æ‹©ä»»åŠ¡é˜Ÿåˆ—ï¼šä¼˜å…ˆç”¨æœ‰ç•Œé˜Ÿåˆ—</h5>
<p>çº¿ç¨‹æ± çš„é˜Ÿåˆ—ç±»å‹ç›´æ¥å½±å“ä»»åŠ¡å †ç§¯é£é™©ï¼Œæ¨èç»„åˆï¼š</p>



































<table><thead><tr><th>é˜Ÿåˆ—ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>é£é™©ç‚¹</th></tr></thead><tbody><tr><td><code>ArrayBlockingQueue</code></td><td>æœ‰ç•Œã€åŸºäºæ•°ç»„ï¼Œæ•ˆç‡é«˜</td><td>ç»å¤§å¤šæ•°åœºæ™¯ï¼ˆæ¨èï¼‰</td><td>éœ€æŒ‡å®šå®¹é‡ï¼Œé¿å…é˜Ÿåˆ—æ»¡</td></tr><tr><td><code>LinkedBlockingQueue</code></td><td>å¯é€‰æœ‰ç•Œ / æ— ç•Œï¼ˆé»˜è®¤æ— ç•Œï¼‰</td><td>ä»»åŠ¡é‡å¯æ§çš„åœºæ™¯</td><td>æ— ç•Œæ¨¡å¼æ˜“ OOM</td></tr><tr><td><code>SynchronousQueue</code></td><td>æ— å®¹é‡ï¼Œç›´æ¥æäº¤ç»™çº¿ç¨‹</td><td>ä»»åŠ¡æ‰§è¡Œå¿«ã€å¹¶å‘ä½çš„åœºæ™¯</td><td>é«˜å¹¶å‘ä¸‹åˆ›å»ºå¤§é‡çº¿ç¨‹</td></tr><tr><td><code>PriorityBlockingQueue</code></td><td>æœ‰ç•Œ / æ— ç•Œï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</td><td>ä»»åŠ¡éœ€ä¼˜å…ˆçº§æ‰§è¡Œçš„åœºæ™¯</td><td>æ— ç•Œæ¨¡å¼æ˜“ OOM</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¼˜å…ˆä½¿ç”¨Â <code>ArrayBlockingQueue</code>ï¼ˆæŒ‡å®šå®¹é‡ï¼Œå¦‚ 1000ï¼‰ï¼Œé¿å…æ— ç•Œé˜Ÿåˆ—å¯¼è‡´çš„ OOM å’Œä»»åŠ¡ä¸¢å¤±ã€‚</p>
<h5 data-id="heading-6">ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼šé¿å…é™é»˜ä¸¢å¼ƒ</h5>
<p><code>ThreadPoolExecutor</code>Â æä¾› 4 ç§é»˜è®¤æ‹’ç»ç­–ç•¥ï¼Œå‡å­˜åœ¨å±€é™æ€§ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯è‡ªå®šä¹‰ï¼š</p>






























<table><thead><tr><th>é»˜è®¤æ‹’ç»ç­–ç•¥</th><th>è¡Œä¸º</th><th>é£é™©ç‚¹</th></tr></thead><tbody><tr><td><code>AbortPolicy</code></td><td>æŠ›Â <code>RejectedExecutionException</code></td><td>ä»»åŠ¡ä¸¢å¤±ï¼ˆéœ€ä¸Šå±‚æ•è·é‡è¯•ï¼‰</td></tr><tr><td><code>CallerRunsPolicy</code></td><td>ç”±æäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼ˆå¦‚ä¸»çº¿ç¨‹ï¼‰æ‰§è¡Œ</td><td>é«˜å¹¶å‘ä¸‹é˜»å¡ä¸»çº¿ç¨‹</td></tr><tr><td><code>DiscardPolicy</code></td><td>ç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼ˆæ— ä»»ä½•æç¤ºï¼‰</td><td>é™é»˜ä¸¢å¤±ï¼ˆç»å¯¹ä¸æ¨èï¼‰</td></tr><tr><td><code>DiscardOldestPolicy</code></td><td>ä¸¢å¼ƒé˜Ÿåˆ—å¤´éƒ¨æœ€æ—§çš„ä»»åŠ¡</td><td>ä¸¢å¤±è€ä»»åŠ¡ï¼ˆé£é™©é«˜ï¼‰</td></tr></tbody></table>
<p><strong>è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ç¤ºä¾‹</strong>ï¼ˆä»»åŠ¡ä¸ä¸¢å¤± + é‡è¯• + æŒä¹…åŒ–å…œåº•ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼šå…ˆé‡è¯•å…¥é˜Ÿï¼Œå¤±è´¥åˆ™æŒä¹…åŒ–åˆ°æ•°æ®åº“/æ¶ˆæ¯é˜Ÿåˆ—</span>
RejectedExecutionHandler customHandler = (runnable, executor) -&gt; {
    if (!executor.isShutdown()) { <span class="hljs-comment">// çº¿ç¨‹æ± æœªå…³é—­æ—¶å°è¯•é‡è¯•</span>
        try {
            <span class="hljs-comment">// å¸¦è¶…æ—¶çš„å…¥é˜Ÿé‡è¯•ï¼ˆé¿å…æ­»å¾ªç¯ï¼‰</span>
            boolean success = executor<span class="hljs-selector-class">.getQueue</span>()<span class="hljs-selector-class">.offer</span>(runnable, <span class="hljs-number">3</span>, TimeUnit.SECONDS);
            if (!success) {
                log<span class="hljs-selector-class">.warn</span>("çº¿ç¨‹æ± é˜Ÿåˆ—æ»¡ï¼Œä»»åŠ¡é‡è¯•å…¥é˜Ÿå¤±è´¥ï¼Œè§¦å‘æŒä¹…åŒ–");
                TaskPersistence<span class="hljs-selector-class">.save</span>(runnable); <span class="hljs-comment">// æŒä¹…åŒ–åˆ°DB/æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåç»­æ¢å¤æ‰§è¡Œ</span>
            }
        } catch (InterruptedException e) {
            Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.interrupt</span>(); <span class="hljs-comment">// ä¿ç•™ä¸­æ–­çŠ¶æ€</span>
            TaskPersistence<span class="hljs-selector-class">.save</span>(runnable); <span class="hljs-comment">// ä¸­æ–­åä»å…œåº•æŒä¹…åŒ–</span>
        }
    } else {
        log<span class="hljs-selector-class">.error</span>("çº¿ç¨‹æ± å·²å…³é—­ï¼Œä»»åŠ¡æŒä¹…åŒ–å…œåº•");
        TaskPersistence<span class="hljs-selector-class">.save</span>(runnable);
    }
};
</code></pre>
<h5 data-id="heading-7">ï¼ˆ3ï¼‰é¿å…çº¿ç¨‹æ± æå‰å…³é—­æˆ–æäº¤æ—¶æœºé”™è¯¯</h5>
<ul>
<li>
<p>æäº¤ä»»åŠ¡å‰æ£€æŸ¥çº¿ç¨‹æ± çŠ¶æ€ï¼š<code>if (!executor.isShutdown() &amp;&amp; !executor.isTerminated())</code>ï¼›</p>
</li>
<li>
<p>å…³é—­çº¿ç¨‹æ± æ—¶éœ€ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼ˆè€Œéå¼ºåˆ¶ç»ˆæ­¢ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¼˜é›…å…³é—­çº¿ç¨‹æ± ï¼ˆSpring ä¸­å¯é€šè¿‡ @Bean(destroyMethod = "shutdown") è‡ªåŠ¨è°ƒç”¨ï¼‰</span>
public void <span class="hljs-built_in">shutdownExecutor</span>(ThreadPoolExecutor executor) {
    executor<span class="hljs-selector-class">.shutdown</span>(); <span class="hljs-comment">// æ‹’ç»æ–°ä»»åŠ¡ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸­ä»»åŠ¡æ‰§è¡Œå®Œæˆ</span>
    try {
        <span class="hljs-comment">// ç­‰å¾… 60s è¶…æ—¶ï¼Œä»æœªå®Œæˆåˆ™å¼ºåˆ¶å…³é—­</span>
        if (!executor.awaitTermination(<span class="hljs-number">60</span>, TimeUnit.SECONDS)) {
            List&lt;Runnable&gt; unExecuted = executor<span class="hljs-selector-class">.shutdownNow</span>(); <span class="hljs-comment">// å¼ºåˆ¶ç»ˆæ­¢ï¼Œè¿”å›æœªæ‰§è¡Œä»»åŠ¡</span>
            TaskPersistence<span class="hljs-selector-class">.saveAll</span>(unExecuted); <span class="hljs-comment">// æŒä¹…åŒ–æœªæ‰§è¡Œä»»åŠ¡</span>
        }
    } catch (InterruptedException e) {
        executor<span class="hljs-selector-class">.shutdownNow</span>();
        Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.interrupt</span>();
    }
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-8">2. å¼‚å¸¸é™é»˜é£é™©ï¼šä»»åŠ¡æ‰§è¡Œå¼‚å¸¸æœªè¢«æ„ŸçŸ¥</h3>
<h4 data-id="heading-9">é£é™©åœºæ™¯ï¼š</h4>
<ul>
<li>ç”¨Â <code>submit(Runnable)</code>Â æäº¤ä»»åŠ¡ï¼šå¼‚å¸¸ä¼šè¢«å°è£…åˆ°Â <code>Future</code>Â ä¸­ï¼Œè‹¥æœªè°ƒç”¨Â <code>get()</code>ï¼Œå¼‚å¸¸ä¼šé™é»˜ä¸¢å¤±ï¼›</li>
<li>çº¿ç¨‹æ± æœªé…ç½®Â <code>UncaughtExceptionHandler</code>ï¼š<code>execute(Runnable)</code>Â æäº¤çš„ä»»åŠ¡æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œçº¿ç¨‹ä¼šç»ˆæ­¢ï¼Œå¼‚å¸¸ä»…æ‰“å°æ—¥å¿—ï¼ˆé»˜è®¤ï¼‰ï¼Œæ— å‘Šè­¦ / é‡è¯•æœºåˆ¶ï¼›</li>
<li><code>CompletableFuture</code>Â æœªå¤„ç†å¼‚å¸¸ï¼š<code>supplyAsync()</code>/<code>runAsync()</code>Â æŠ›å‡ºçš„å¼‚å¸¸ä¼šé™é»˜å¤±è´¥ï¼Œæ— ä»»ä½•åé¦ˆã€‚</li>
</ul>
<h4 data-id="heading-10">è§£å†³æ–¹æ¡ˆï¼š</h4>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰åŒºåˆ†Â <code>execute()</code>Â å’ŒÂ <code>submit()</code>Â çš„å¼‚å¸¸å¤„ç†</h5>




















<table><thead><tr><th>æäº¤æ–¹å¼</th><th>å¼‚å¸¸å¤„ç†é€»è¾‘</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>execute(Runnable)</code></td><td>å¼‚å¸¸ç›´æ¥æŠ›å‡ºï¼Œç”±çº¿ç¨‹çš„Â <code>UncaughtExceptionHandler</code>Â å¤„ç†</td><td>æ— éœ€è¿”å›ç»“æœçš„ä»»åŠ¡</td></tr><tr><td><code>submit(...)</code></td><td>å¼‚å¸¸å°è£…åˆ°Â <code>Future</code>ï¼Œéœ€é€šè¿‡Â <code>get()</code>Â è·å–</td><td>éœ€è¿”å›ç»“æœ / è¶…æ—¶æ§åˆ¶çš„ä»»åŠ¡</td></tr></tbody></table>
<p><strong>å®è·µå»ºè®®</strong>ï¼š</p>
<ul>
<li>æ— è¿”å›ç»“æœçš„ä»»åŠ¡ç”¨Â <code>execute()</code>ï¼Œå¹¶é…ç½®çº¿ç¨‹æ± çš„å¼‚å¸¸å¤„ç†å™¨ï¼›</li>
<li>æœ‰è¿”å›ç»“æœçš„ä»»åŠ¡ç”¨Â <code>submit()</code>ï¼Œå¿…é¡»è°ƒç”¨Â <code>Future.get()</code>ï¼ˆæˆ–Â <code>get(timeout)</code>ï¼‰æ•è·Â <code>ExecutionException</code>ã€‚</li>
</ul>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰é…ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h5>
<p>é€šè¿‡è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚ï¼Œä¸ºçº¿ç¨‹æ± çš„æ‰€æœ‰çº¿ç¨‹è®¾ç½®Â <code>UncaughtExceptionHandler</code>ï¼Œç»Ÿä¸€æ•è·å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚ï¼šè®¾ç½®çº¿ç¨‹åç§°ã€å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-type">ThreadFactory</span> <span class="hljs-variable">customThreadFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactory</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">threadNum</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">1</span>);
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Thread <span class="hljs-title function_">newThread</span><span class="hljs-params">(Runnable r)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r);
        thread.setName(<span class="hljs-string">"business-thread-"</span> + threadNum.getAndIncrement()); <span class="hljs-comment">// ä¸šåŠ¡æ ‡è¯†ï¼Œæ–¹ä¾¿æ’æŸ¥</span>
        thread.setUncaughtExceptionHandler((t, e) -&gt; {
            log.error(<span class="hljs-string">"çº¿ç¨‹ {} æ‰§è¡Œä»»åŠ¡å¼‚å¸¸"</span>, t.getName(), e);
            sendAlarm(<span class="hljs-string">"çº¿ç¨‹æ± ä»»åŠ¡å¼‚å¸¸ï¼š"</span> + t.getName() + <span class="hljs-string">", "</span> + e.getMessage()); <span class="hljs-comment">// å‘é€å‘Šè­¦ï¼ˆé‚®ä»¶/çŸ­ä¿¡ï¼‰</span>
            <span class="hljs-comment">// ä»»åŠ¡é‡è¯•ï¼ˆéœ€ç¡®ä¿ä»»åŠ¡å¹‚ç­‰ï¼‰</span>
            <span class="hljs-keyword">if</span> (!executor.isShutdown()) {
                executor.submit(r); <span class="hljs-comment">// ç®€å•é‡è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®åŠ é‡è¯•æ¬¡æ•°é™åˆ¶</span>
            }
        });
        <span class="hljs-keyword">return</span> thread;
    }
};

<span class="hljs-comment">// åˆå§‹åŒ–çº¿ç¨‹æ± æ—¶æŒ‡å®šçº¿ç¨‹å·¥å‚</span>
<span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
        <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1000</span>),
        customThreadFactory,
        customHandler
);
</code></pre>
<h5 data-id="heading-13">ï¼ˆ3ï¼‰<code>CompletableFuture</code>Â å¼‚å¸¸å¤„ç†</h5>
<p><code>CompletableFuture</code>Â éœ€é€šè¿‡Â <code>exceptionally()</code>/<code>handle()</code>/<code>whenComplete()</code>Â æ˜¾å¼å¤„ç†å¼‚å¸¸ï¼Œé¿å…é™é»˜å¤±è´¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šå¤„ç†å¼‚å¸¸ + è¶…æ—¶æ§åˆ¶</span>
CompletableFuture&lt;<span class="hljs-type">String</span>&gt; future = CompletableFuture.<span class="hljs-built_in">supplyAsync</span>(() -&gt; {
    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»»åŠ¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">doBusinessLogic</span>();
}, executor)
<span class="hljs-comment">// å¼‚å¸¸å…œåº•ï¼šè¿”å›é»˜è®¤å€¼ + å‘Šè­¦</span>
.<span class="hljs-built_in">exceptionally</span>(ex -&gt; {
    log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸"</span>, ex);
    <span class="hljs-built_in">sendAlarm</span>(<span class="hljs-string">"CompletableFuture å¼‚å¸¸ï¼š"</span> + ex.<span class="hljs-built_in">getMessage</span>());
    <span class="hljs-keyword">return</span> <span class="hljs-string">"default-value"</span>;
})
<span class="hljs-comment">// è¶…æ—¶æ§åˆ¶ï¼š3s è¶…æ—¶è¿”å›é»˜è®¤å€¼</span>
.<span class="hljs-built_in">orTimeout</span>(<span class="hljs-number">3</span>, TimeUnit.SECONDS)
<span class="hljs-comment">// è¶…æ—¶å…œåº•</span>
.<span class="hljs-built_in">completeOnTimeout</span>(<span class="hljs-string">"timeout-value"</span>, <span class="hljs-number">3</span>, TimeUnit.SECONDS);

<span class="hljs-comment">// è‹¥éœ€é˜»å¡è·å–ç»“æœï¼Œéœ€æ•è·å¼‚å¸¸</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">String</span> result = future.<span class="hljs-built_in">get</span>();
} <span class="hljs-built_in">catch</span> (InterruptedException | ExecutionException e) {
    log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"è·å–ç»“æœå¼‚å¸¸"</span>, e);
}
</code></pre>
<h3 data-id="heading-14">3. èµ„æºè€—å°½é£é™©ï¼šçº¿ç¨‹ / å†…å­˜èµ„æºå¤±æ§</h3>
<h4 data-id="heading-15">é£é™©åœºæ™¯ï¼š</h4>
<ul>
<li>
<p>çº¿ç¨‹æ± å‚æ•°é…ç½®ä¸åˆç†ï¼š</p>
<ul>
<li>CPU å¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°è¿‡å¤šï¼ˆå¦‚ &gt; CPU æ ¸å¿ƒæ•° + 1ï¼‰ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ï¼›</li>
<li>IO å¯†é›†å‹ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°è¿‡å°‘ï¼ˆå¦‚ &lt; CPU æ ¸å¿ƒæ•° * 2ï¼‰ï¼Œå¯¼è‡´çº¿ç¨‹ç©ºé—²ç­‰å¾…ï¼›</li>
<li>æ— ç•Œé˜Ÿåˆ— + å¤§é‡ä»»åŠ¡ï¼šé˜Ÿåˆ—æ— é™å¢é•¿å¯¼è‡´ OOMï¼›</li>
</ul>
</li>
<li>
<p>æ ¸å¿ƒçº¿ç¨‹ä¸å›æ”¶ï¼š<code>allowCoreThreadTimeOut(false)</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œæ ¸å¿ƒçº¿ç¨‹é•¿æœŸç©ºé—²ä»å ç”¨èµ„æºï¼›</p>
</li>
<li>
<p>çº¿ç¨‹æ± æœªå…³é—­ï¼šåº”ç”¨é€€å‡ºæ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ï¼ˆç”¨æˆ·çº¿ç¨‹ï¼‰æŒç»­è¿è¡Œï¼Œå¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸åœæ­¢ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">è§£å†³æ–¹æ¡ˆï¼š</h4>
<h5 data-id="heading-17">ï¼ˆ1ï¼‰æŒ‰ä»»åŠ¡ç±»å‹åˆç†é…ç½®å‚æ•°</h5>
<p>çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°å…¬å¼ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€ç»“åˆå‹æµ‹è°ƒæ•´ï¼‰ï¼š</p>


























<table><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆcorePoolSizeï¼‰</th><th>æœ€å¤§çº¿ç¨‹æ•°ï¼ˆmaximumPoolSizeï¼‰</th><th>é˜Ÿåˆ—å®¹é‡</th><th>keepAliveTime</th></tr></thead><tbody><tr><td>CPU å¯†é›†å‹ï¼ˆå¦‚è®¡ç®—ï¼‰</td><td>CPU æ ¸å¿ƒæ•° + 1</td><td>åŒæ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆæ— éœ€æ‰©å®¹ï¼‰</td><td>100-1000</td><td>30s</td></tr><tr><td>IO å¯†é›†å‹ï¼ˆå¦‚ HTTP/DBï¼‰</td><td>CPU æ ¸å¿ƒæ•° * 2 + 1</td><td>æ ¸å¿ƒçº¿ç¨‹æ•° * 2ï¼ˆåº”å¯¹çªå‘æµé‡ï¼‰</td><td>1000-5000</td><td>60s</td></tr></tbody></table>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>allowCoreThreadTimeOut(true)</code>ï¼šå…è®¸æ ¸å¿ƒçº¿ç¨‹è¶…æ—¶å›æ”¶ï¼ˆå¦‚ 30s ç©ºé—²åé”€æ¯ï¼‰ï¼Œå‡å°‘èµ„æºå ç”¨ï¼›</li>
<li>é˜Ÿåˆ—å®¹é‡ï¼šæ ¹æ®ä¸šåŠ¡ QPS è®¾å®šï¼Œé¿å…è¿‡å¤§ï¼ˆå¯¼è‡´ä»»åŠ¡å †ç§¯ï¼‰æˆ–è¿‡å°ï¼ˆé¢‘ç¹è§¦å‘æ‹’ç»ç­–ç•¥ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-18">ï¼ˆ2ï¼‰ç¦ç”¨ Executors å·¥å…·ç±»ï¼Œæ‰‹åŠ¨åˆ›å»º ThreadPoolExecutor</h5>
<p><code>Executors</code>Â æä¾›çš„é»˜è®¤çº¿ç¨‹æ± å­˜åœ¨èµ„æºè€—å°½é£é™©ï¼Œç”Ÿäº§ç¯å¢ƒç»å¯¹ç¦æ­¢ä½¿ç”¨ï¼š</p>

























<table><thead><tr><th>Executors æ–¹æ³•</th><th>é—®é¢˜ç‚¹</th><th>æ›¿ä»£æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>newFixedThreadPool(n)</code></td><td>æ— ç•Œé˜Ÿåˆ—ï¼ˆLinkedBlockingQueueï¼‰ï¼Œæ˜“ OOM</td><td>æ‰‹åŠ¨åˆ›å»ºï¼Œç”¨ ArrayBlockingQueueï¼ˆæœ‰ç•Œï¼‰</td></tr><tr><td><code>newCachedThreadPool()</code></td><td>æœ€å¤§çº¿ç¨‹æ•° Integer.MAXï¼Œæ˜“åˆ›å»ºå¤§é‡çº¿ç¨‹å¯¼è‡´ OOM</td><td>æ‰‹åŠ¨åˆ›å»ºï¼Œé™åˆ¶ maximumPoolSize</td></tr><tr><td><code>newSingleThreadExecutor()</code></td><td>æ— ç•Œé˜Ÿåˆ—ï¼Œæ˜“ OOM + çº¿ç¨‹å´©æºƒåæ— æ³•è‡ªåŠ¨æ¢å¤</td><td>æ‰‹åŠ¨åˆ›å»ºï¼Œæ ¸å¿ƒçº¿ç¨‹æ•° 1 + æœ‰ç•Œé˜Ÿåˆ—</td></tr></tbody></table>
<p><strong>æ­£ç¡®åˆ›å»ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span> {
    <span class="hljs-comment">// CPU æ ¸å¿ƒæ•°ï¼ˆRuntime.getRuntime().availableProcessors()ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CPU_CORES</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();

    <span class="hljs-meta">@Bean(destroyMethod = "shutdown")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">businessExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
                CPU_CORES * <span class="hljs-number">2</span>, <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆIO å¯†é›†å‹ï¼‰</span>
                CPU_CORES * <span class="hljs-number">4</span>, <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
                <span class="hljs-number">60</span>, TimeUnit.SECONDS,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">2000</span>), <span class="hljs-comment">// æœ‰ç•Œé˜Ÿåˆ—ï¼Œå®¹é‡ 2000</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomThreadFactory</span>(), <span class="hljs-comment">// è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚ï¼ˆå«å¼‚å¸¸å¤„ç†å™¨ï¼‰</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomRejectedExecutionHandler</span>() <span class="hljs-comment">// è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</span>
        );
    }
}
</code></pre>
<h5 data-id="heading-19">ï¼ˆ3ï¼‰ä»»åŠ¡è¶…æ—¶æ§åˆ¶ï¼šé¿å…çº¿ç¨‹é•¿æœŸå ç”¨</h5>
<p>å¯¹äºæ‰§è¡Œæ—¶é—´ä¸ç¡®å®šçš„ä»»åŠ¡ï¼Œéœ€è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé‡Šæ”¾çº¿ç¨‹èµ„æºï¼š</p>
<ul>
<li>
<p>ç”¨Â <code>Future.get(timeout, unit)</code>Â è¶…æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Future&lt;<span class="hljs-type">String</span>&gt; future = executor.<span class="hljs-built_in">submit</span>(() -&gt; <span class="hljs-built_in">doLongTask</span>());
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">String</span> result = future.<span class="hljs-built_in">get</span>(<span class="hljs-number">5</span>, TimeUnit.SECONDS); <span class="hljs-comment">// 5s è¶…æ—¶</span>
} <span class="hljs-built_in">catch</span> (TimeoutException e) {
    future.<span class="hljs-built_in">cancel</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å–æ¶ˆä»»åŠ¡ï¼ˆä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼‰</span>
    log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œè¶…æ—¶"</span>, e);
} <span class="hljs-built_in">catch</span> (InterruptedException | ExecutionException e) {
    log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸"</span>, e);
}
</code></pre>
</li>
<li>
<p>ç”¨Â <code>CompletableFuture.orTimeout()</code>ï¼šå¦‚å‰æ–‡ç¤ºä¾‹ï¼Œ3s è¶…æ—¶ç›´æ¥è¿”å›å…œåº•å€¼ã€‚</p>
</li>
</ul>
<h3 data-id="heading-20">4. æ‰§è¡Œæ— åº / é‡å¤é£é™©ï¼šä»»åŠ¡æ‰§è¡Œä¸ç¬¦åˆé¢„æœŸ</h3>
<h4 data-id="heading-21">é£é™©åœºæ™¯ï¼š</h4>
<ul>
<li>éœ€æœ‰åºæ‰§è¡Œçš„ä»»åŠ¡æäº¤åˆ°å¤šçº¿ç¨‹æ± ï¼šå¦‚æ¶ˆæ¯æ¶ˆè´¹ã€æ•°æ®åŒæ­¥ï¼Œæ— åºæ‰§è¡Œå¯¼è‡´ä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼›</li>
<li>ä»»åŠ¡é‡è¯•æœºåˆ¶ä¸å½“ï¼šå¼‚å¸¸é‡è¯•ã€ç½‘ç»œæŠ–åŠ¨å¯¼è‡´ä»»åŠ¡é‡å¤æ‰§è¡Œï¼Œä¸”æœªåšå¹‚ç­‰å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-22">è§£å†³æ–¹æ¡ˆï¼š</h4>
<h5 data-id="heading-23">ï¼ˆ1ï¼‰æœ‰åºæ‰§è¡Œï¼šé€‰æ‹©åˆé€‚çš„çº¿ç¨‹æ± </h5>
<ul>
<li>å¼ºæœ‰åºåœºæ™¯ï¼šç”¨Â <code>SingleThreadExecutor</code>ï¼ˆæ‰‹åŠ¨åˆ›å»ºï¼Œæ­é…æœ‰ç•Œé˜Ÿåˆ—ï¼‰ï¼Œä½†éœ€æ³¨æ„å•çº¿ç¨‹ç“¶é¢ˆï¼›</li>
<li>åˆ†åŒºæœ‰åºåœºæ™¯ï¼šæŒ‰ä¸šåŠ¡ ID å“ˆå¸Œåˆ†ç‰‡ï¼ŒåŒä¸€ ID çš„ä»»åŠ¡æäº¤åˆ°åŒä¸€ä¸ªçº¿ç¨‹æ± ï¼ˆå¦‚Â <code>ConcurrentHashMap</code>Â ç»´æŠ¤å¤šä¸ªå•çº¿ç¨‹æ± ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-24">ï¼ˆ2ï¼‰å¹‚ç­‰è®¾è®¡ï¼šé¿å…é‡å¤æ‰§è¡Œå‰¯ä½œç”¨</h5>
<p>æ— è®ºæ˜¯å¦é‡è¯•ï¼Œä»»åŠ¡éœ€æ»¡è¶³ â€œé‡å¤æ‰§è¡Œä¸å½±å“ä¸šåŠ¡ç»“æœâ€ï¼š</p>
<ul>
<li>ç”¨å”¯ä¸€ä»»åŠ¡ ID åšå¹‚ç­‰æ ¡éªŒï¼šæ‰§è¡Œå‰æŸ¥è¯¢æ•°æ®åº“ / ç¼“å­˜ï¼Œåˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²æ‰§è¡Œï¼›</li>
<li>æ•°æ®åº“å±‚é¢ï¼šç”¨å”¯ä¸€ç´¢å¼•ã€ä¹è§‚é”ï¼ˆç‰ˆæœ¬å·ï¼‰é¿å…é‡å¤æ•°æ®å†™å…¥ã€‚</li>
</ul>
<h3 data-id="heading-25">5. å¯ç”¨æ€§é£é™©ï¼šçº¿ç¨‹æ± æ•…éšœåæ— æ³•æ¢å¤</h3>
<h4 data-id="heading-26">é£é™©åœºæ™¯ï¼š</h4>
<ul>
<li>çº¿ç¨‹å› æœªæ•è·å¼‚å¸¸å´©æºƒï¼šæ ¸å¿ƒçº¿ç¨‹å´©æºƒåï¼Œçº¿ç¨‹æ± æ˜¯å¦ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çº¿ç¨‹ï¼Ÿ</li>
<li>ç¬æ—¶é«˜è´Ÿè½½å¯¼è‡´çº¿ç¨‹æ± æ‹¥å µï¼šé˜Ÿåˆ—æ»¡ã€çº¿ç¨‹è€—å°½ï¼Œæ— æ³•å¿«é€Ÿæ¢å¤è°ƒåº¦ã€‚</li>
</ul>
<h4 data-id="heading-27">è§£å†³æ–¹æ¡ˆï¼š</h4>
<h5 data-id="heading-28">ï¼ˆ1ï¼‰çº¿ç¨‹æ± è‡ªæ„ˆæœºåˆ¶ï¼šæ ¸å¿ƒçº¿ç¨‹è‡ªåŠ¨æ›¿æ¢</h5>
<p><code>ThreadPoolExecutor</code>Â çš„æ ¸å¿ƒç‰¹æ€§ï¼š<strong>æ ¸å¿ƒçº¿ç¨‹è‹¥å› å¼‚å¸¸å´©æºƒï¼Œçº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çº¿ç¨‹è¡¥å……</strong>ï¼ˆéæ ¸å¿ƒçº¿ç¨‹å´©æºƒåï¼Œè‹¥ç©ºé—²æ—¶é—´è¶…è¿‡Â <code>keepAliveTime</code>Â åˆ™ä¸è¡¥å……ï¼‰ã€‚æ— éœ€é¢å¤–å¼€å‘ï¼Œåªéœ€ç¡®ä¿ï¼š</p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°é…ç½®åˆç†ï¼ˆé¿å…å› æ ¸å¿ƒçº¿ç¨‹å…¨éƒ¨å´©æºƒå¯¼è‡´è°ƒåº¦æš‚åœï¼‰ï¼›</li>
<li>å¼‚å¸¸å·²è¢«æ•è·ï¼ˆå‡å°‘çº¿ç¨‹å´©æºƒé¢‘ç‡ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-29">ï¼ˆ2ï¼‰ç›‘æ§å‘Šè­¦ï¼šæå‰æ„ŸçŸ¥æ‹¥å µ</h5>
<p>é€šè¿‡ç›‘æ§çº¿ç¨‹æ± å…³é”®æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°æ‹¥å µ / å¼‚å¸¸ï¼Œé¿å…æ•…éšœæ‰©å¤§ï¼š</p>






























<table><thead><tr><th>ç›‘æ§æŒ‡æ ‡</th><th>å«ä¹‰</th><th>å‘Šè­¦é˜ˆå€¼å»ºè®®</th></tr></thead><tbody><tr><td><code>activeCount</code></td><td>æ´»è·ƒçº¿ç¨‹æ•°</td><td>è¶…è¿‡ maximumPoolSize çš„ 80%</td></tr><tr><td><code>queue.size()</code></td><td>é˜Ÿåˆ—å †ç§¯æ•°</td><td>è¶…è¿‡é˜Ÿåˆ—å®¹é‡çš„ 80%</td></tr><tr><td><code>completedTaskCount</code></td><td>å®Œæˆä»»åŠ¡æ•°ï¼ˆè¶‹åŠ¿ï¼‰</td><td>çªå‘ä¸‹é™ï¼ˆçº¿ç¨‹æ± æ•…éšœï¼‰</td></tr><tr><td><code>rejectedTaskCount</code></td><td>è¢«æ‹’ç»ä»»åŠ¡æ•°</td><td>å¤§äº 0ï¼ˆéœ€ç«‹å³å¤„ç†ï¼‰</td></tr></tbody></table>
<p><strong>Spring Boot ç›‘æ§ç¤ºä¾‹</strong>ï¼ˆç»“åˆ Actuatorï¼‰ï¼š</p>
<ol>
<li>ä¾èµ–ï¼š<code>spring-boot-starter-actuator</code>ï¼›</li>
<li>æš´éœ²çº¿ç¨‹æ± æŒ‡æ ‡ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolMetricsBinder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MeterBinder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ThreadPoolExecutor executor;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolMetricsBinder</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier("businessExecutor")</span> Executor executor)</span> {
        <span class="hljs-built_in">this</span>.executor = (ThreadPoolExecutor) executor;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bindTo</span><span class="hljs-params">(MeterRegistry registry)</span> {
        <span class="hljs-comment">// æ³¨å†Œæ´»è·ƒçº¿ç¨‹æ•°æŒ‡æ ‡</span>
        Gauge.builder(<span class="hljs-string">"threadpool.active.count"</span>, executor, ThreadPoolExecutor::getActiveCount)
                .tag(<span class="hljs-string">"pool"</span>, <span class="hljs-string">"business"</span>)
                .register(registry);
        <span class="hljs-comment">// æ³¨å†Œé˜Ÿåˆ—å¤§å°æŒ‡æ ‡</span>
        Gauge.builder(<span class="hljs-string">"threadpool.queue.size"</span>, executor.getQueue(), Collection::size)
                .tag(<span class="hljs-string">"pool"</span>, <span class="hljs-string">"business"</span>)
                .register(registry);
        <span class="hljs-comment">// å…¶ä»–æŒ‡æ ‡ï¼šå®Œæˆä»»åŠ¡æ•°ã€æ‹’ç»ä»»åŠ¡æ•°ç­‰</span>
    }
}
</code></pre>
<ol start="3">
<li>é…ç½® Prometheus + Grafana å¯è§†åŒ–ï¼Œè®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼ˆå¦‚é˜Ÿåˆ—å †ç§¯è¶…è¿‡ 1600 è§¦å‘å‘Šè­¦ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-30">ä¸‰ã€å¯é æ€§æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li>
<p><strong>æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± </strong>ï¼šç¦ç”¨Â <code>Executors</code>ï¼Œæ˜¾å¼æŒ‡å®šæ ¸å¿ƒå‚æ•°ã€æœ‰ç•Œé˜Ÿåˆ—ã€è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å’Œçº¿ç¨‹å·¥å‚ï¼›</p>
</li>
<li>
<p><strong>å¼‚å¸¸å…¨é“¾è·¯è¦†ç›–</strong>ï¼š</p>
<ul>
<li><code>execute()</code>Â é…Â <code>UncaughtExceptionHandler</code>ï¼›</li>
<li><code>submit()</code>Â å¿…é¡»è°ƒç”¨Â <code>get()</code>Â æ•è·å¼‚å¸¸ï¼›</li>
<li><code>CompletableFuture</code>Â ç”¨Â <code>exceptionally()</code>/<code>handle()</code>Â å¤„ç†å¼‚å¸¸ï¼›</li>
</ul>
</li>
<li>
<p><strong>èµ„æºç²¾ç»†åŒ–æ§åˆ¶</strong>ï¼š</p>
<ul>
<li>æŒ‰ä»»åŠ¡ç±»å‹é…ç½®æ ¸å¿ƒå‚æ•°ï¼Œå…è®¸æ ¸å¿ƒçº¿ç¨‹è¶…æ—¶å›æ”¶ï¼›</li>
<li>æ‰€æœ‰ä»»åŠ¡åŠ è¶…æ—¶æ§åˆ¶ï¼Œé¿å…çº¿ç¨‹é•¿æœŸå ç”¨ï¼›</li>
</ul>
</li>
<li>
<p><strong>ä»»åŠ¡ä¸ä¸¢å¤±å…œåº•</strong>ï¼šæ‹’ç»ç­–ç•¥ + çº¿ç¨‹æ± å…³é—­æ—¶ï¼Œå°†æœªæ‰§è¡Œä»»åŠ¡æŒä¹…åŒ–åˆ° DB / æ¶ˆæ¯é˜Ÿåˆ—ï¼›</p>
</li>
<li>
<p><strong>å¹‚ç­‰ + æœ‰åºä¿éšœ</strong>ï¼šä»»åŠ¡è®¾è®¡ä¸ºå¹‚ç­‰ï¼Œæœ‰åºåœºæ™¯ç”¨å•çº¿ç¨‹æ± æˆ–åˆ†ç‰‡ç­–ç•¥ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§å‘Šè­¦å¸¸æ€åŒ–</strong>ï¼šç›‘æ§æ´»è·ƒçº¿ç¨‹æ•°ã€é˜Ÿåˆ—å †ç§¯ã€æ‹’ç»ä»»åŠ¡æ•°ï¼Œè®¾ç½®é˜ˆå€¼å‘Šè­¦ã€‚</p>
</li>
</ol>
<h2 data-id="heading-31">å››ã€å¸¸è§è¯¯åŒºé¿å‘</h2>
<ol>
<li><strong>ç”¨æ— ç•Œé˜Ÿåˆ—</strong>ï¼š<code>LinkedBlockingQueue</code>Â æ— ç•Œæ¨¡å¼æ˜“å¯¼è‡´ OOMï¼Œä¼˜å…ˆç”¨Â <code>ArrayBlockingQueue</code>ï¼›</li>
<li><strong>æ ¸å¿ƒçº¿ç¨‹æ•°è®¾ç½®è¿‡å¤§ / è¿‡å°</strong>ï¼šCPU å¯†é›†å‹ä»»åŠ¡æ ¸å¿ƒçº¿ç¨‹æ•° â‰ˆ CPU æ ¸å¿ƒæ•° + 1ï¼ŒIO å¯†é›†å‹ â‰ˆ CPU æ ¸å¿ƒæ•° * 2ï¼›</li>
<li><strong>å¿½ç•¥çº¿ç¨‹æ± å…³é—­</strong>ï¼šåº”ç”¨é€€å‡ºæ—¶æœªå…³é—­çº¿ç¨‹æ± ï¼Œå¯¼è‡´æ ¸å¿ƒçº¿ç¨‹æ³„éœ²ï¼Œåº”ç”¨æ— æ³•æ­£å¸¸åœæ­¢ï¼›</li>
<li><strong>CompletableFuture ç”¨é»˜è®¤çº¿ç¨‹æ± </strong>ï¼š<code>ForkJoinPool.commonPool()</code>Â æ˜¯å…±äº«çº¿ç¨‹æ± ï¼Œæ˜“è¢«å…¶ä»–ä¸šåŠ¡å ç”¨ï¼Œéœ€æŒ‡å®šè‡ªå®šä¹‰çº¿ç¨‹æ± ï¼›</li>
<li><strong>é‡è¯•æ— æ¬¡æ•°é™åˆ¶</strong>ï¼šå¼‚å¸¸é‡è¯•éœ€è®¾ç½®æœ€å¤§æ¬¡æ•°ï¼ˆå¦‚ 3 æ¬¡ï¼‰ï¼Œé¿å…æ­»å¾ªç¯ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šè®¾è®¡ï¼ŒJava å¼‚æ­¥çº¿ç¨‹æ± å¯å®ç° â€œä»»åŠ¡ä¸ä¸¢ã€å¼‚å¸¸å¯çŸ¥ã€èµ„æºå¯æ§ã€æ•…éšœå¯æ¢å¤â€ çš„å¯é æ€§ç›®æ ‡ï¼Œæ»¡è¶³ç”Ÿäº§ç¯å¢ƒçš„é«˜å¯ç”¨è¦æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3å’ŒUniappçš„çˆ±æ¨æƒ…ä»‡ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„è·¨ç«¯ç§˜ç±ğŸŒ¹]]></title>    <link>https://juejin.cn/post/7576098886860079147</link>    <guid>https://juejin.cn/post/7576098886860079147</guid>    <pubDate>2025-11-24T10:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576098886860079147" data-draft-id="7576108254603984939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3å’ŒUniappçš„çˆ±æ¨æƒ…ä»‡ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„è·¨ç«¯ç§˜ç±ğŸŒ¹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-24T10:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘å«é»‘å¤§å¸…"/> <meta itemprop="url" content="https://juejin.cn/user/1678295463898875"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3å’ŒUniappçš„çˆ±æ¨æƒ…ä»‡ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„è·¨ç«¯ç§˜ç±ğŸŒ¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1678295463898875/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘å«é»‘å¤§å¸…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T10:59:10.000Z" title="Mon Nov 24 2025 10:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3å’ŒUniappçš„çˆ±æ¨æƒ…ä»‡ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„è·¨ç«¯ç§˜ç±ğŸŒ¹</h2>
<h4 data-id="heading-1">ğŸ¤” å…ˆææ‡‚ä¿© â€œé€‰æ‰‹â€ çš„èº«ä»½ï¼šä¸æ˜¯æ•Œäººæ˜¯é˜Ÿå‹ï¼</h4>
<p>åˆšæ¥è§¦å‰ç«¯çš„å°ä¼™ä¼´æ€»ä»¥ä¸ºå®ƒä¿©æ˜¯ â€œç«äº‰å¯¹æ‰‹â€ï¼Œå…¶å®æ ¹æœ¬ä¸æ˜¯ä¸€å›äº‹å„¿ï½ Vue3 æ˜¯ä¸ª â€œå…¨èƒ½æœ¨å·¥â€ï¼Œèƒ½æ‰“å„ç§ Web é¡µé¢çš„ â€œå®¶å…·â€ï¼ˆæ¯”å¦‚ H5 ç½‘ç«™ï¼‰ï¼Œä½†åªæ“…é•¿åœ¨ â€œæµè§ˆå™¨æˆ¿é—´â€ é‡Œå¹²æ´»ã€‚è€Œ Uniapp æ˜¯ä¸ª â€œè¿é”è£…ä¿®é˜Ÿâ€ï¼Œæ‹¿ç€ Vue3 çš„ â€œå·¥å…·â€ï¼Œä¸ä»…èƒ½è£… â€œæµè§ˆå™¨æˆ¿é—´â€ï¼Œè¿˜èƒ½æå®š â€œå°ç¨‹åºå…¬å¯“â€â€œæ‰‹æœº App åˆ«å¢…â€ ç”šè‡³ â€œé¸¿è’™æ–°å®¶â€ï¼Œä¸€å¥—å·¥å…·å…¨æå®šï¼</p>
<p>ç®€å•è¯´ï¼šç”¨ Vue3 å†™ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œå¾—é¢å¤–æ‰¾ â€œè£…ä¿®ç›‘ç†â€ï¼ˆæ¯”å¦‚ Taroï¼‰å¸®å¿™é€‚é…ï¼›ç”¨ Uniapp å†™ï¼Œç›´æ¥å–Šä¸€å¥ â€œå¼€å·¥â€ï¼Œè‡ªåŠ¨é€‚é…æ‰€æœ‰æˆ¿å‹ â€”â€” è¿™å°±æ˜¯æ ¸å¿ƒåŒºåˆ«å•¦ğŸ˜‰ï¼</p>
<h4 data-id="heading-2">ğŸ› ï¸ æ ¸å¿ƒå·®åˆ«å¤§æ­ç§˜ï¼šè¿™äº›åœ°æ–¹çœŸä¸ä¸€æ ·ï¼</h4>
<h5 data-id="heading-3">1. å¹²æ´»çš„ â€œç¶å°â€ ä¸åŒï¼šæ„å»ºå·¥å…·å¤§æ¯”æ‹¼ ğŸ”¥</h5>
<p>Vue3 å°±åƒ â€œå®¶ç”¨ç‡ƒæ°”ç¶â€ï¼Œé»˜è®¤ç”¨ Vite æˆ– Webpackï¼Œä½ å¾—è‡ªå·±è°ƒ â€œç«å€™â€ï¼ˆé…ç½®ç¯å¢ƒï¼‰ï¼Œæƒ³åš â€œå¤§é¤â€ï¼ˆæ‰“åŒ… Appï¼‰è¿˜å¾—åŠ ä¸ª â€œçƒ¤ç®±â€ï¼ˆCapacitor/Cordovaï¼‰ã€‚ä¼ªä»£ç æ„Ÿå—ä¸‹éº»çƒ¦ç¨‹åº¦ï¼š</p>
<pre><code class="hljs language-less" lang="less">Â <span class="hljs-comment">// Vue3æ‰“åŒ…Appçš„æµç¨‹ï¼ˆä¼ªä»£ç ï¼‰</span>
Â â€‹
Â ç¬¬ä¸€æ­¥ï¼šç”¨<span class="hljs-selector-tag">Vite</span>æ‰“åŒ…æˆ<span class="hljs-selector-tag">H5</span> â†’ ç¬¬äºŒæ­¥ï¼šå¼•å…¥<span class="hljs-selector-tag">Capacitor</span>æ’ä»¶ â†’ ç¬¬ä¸‰æ­¥ï¼šé…ç½®<span class="hljs-selector-tag">Android</span>/<span class="hljs-selector-tag">iOS</span>å‚æ•° â†’ ç¬¬å››æ­¥ï¼šç¼–è¯‘æˆå®‰è£…åŒ…
</code></pre>
<p>Uniapp ç›´æ¥ç»™ä½ é…å¥½äº† â€œå•†ç”¨å¨æˆ¿â€ï¼ˆHBuilderXï¼‰ï¼Œä¸ç®¡åš â€œH5 å‡‰èœâ€ è¿˜æ˜¯ â€œApp ç¡¬èœâ€ï¼Œé€‰å¥½å“ç±»ç›´æ¥å‡ºé”…ï¼Œç”šè‡³æ”¯æŒ â€œäº‘ç‚’èœâ€ï¼ˆäº‘æ‰“åŒ…ï¼‰ä¸ç”¨è‡ªå·±ä¹°è®¾å¤‡ï¼š</p>
<pre><code class="hljs language-less" lang="less">Â <span class="hljs-comment">// Uniappæ‰“åŒ…æµç¨‹ï¼ˆä¼ªä»£ç ï¼‰</span>
Â â€‹
Â ç¬¬ä¸€æ­¥ï¼šé€‰è¦æ‰“åŒ…çš„å¹³å°ï¼ˆå°ç¨‹åº/<span class="hljs-selector-tag">App</span>/<span class="hljs-selector-tag">H5</span>ï¼‰ â†’ ç¬¬äºŒæ­¥ï¼šç‚¹â€œæ‰“åŒ…â€æŒ‰é’® â†’ ç¬¬ä¸‰æ­¥ï¼šç­‰ç€æ”¶æˆå“
</code></pre>
<p>å®æµ‹ H5 ç«¯ç¼–è¯‘é€Ÿåº¦æ¯” Vue3 å¿« 10 å€ï¼Œä»¥å‰ç­‰ç¼–è¯‘çš„æ—¶é—´å¤Ÿå–æ¯å¥¶èŒ¶ï¼Œç°åœ¨æŠ¿å£èŒ¶å°±å¥½ğŸ‘Œï¼</p>
<h5 data-id="heading-4">2. è¯´è¯çš„ â€œè¯­è¨€â€ ä¸åŒï¼šAPI æ˜¯å…³é”® ğŸ”¤</h5>
<p>Vue3 ä¹ æƒ¯è¯´ â€œæµè§ˆå™¨æ–¹è¨€â€ï¼Œæ¯”å¦‚ç”¨ axios å‘è¯·æ±‚ã€ç”¨ document æ“ä½œé¡µé¢ï¼Œä½†åˆ°äº†å°ç¨‹åºé‡Œäººå®¶æ ¹æœ¬å¬ä¸æ‡‚ â€”â€” å°±åƒåœ¨å¹¿ä¸œç‚¹ â€œé¦é¦â€ï¼ŒæœåŠ¡å‘˜ä¸€è„¸æ‡µğŸ˜…ã€‚</p>
<p>Uniapp å‘æ˜äº† â€œè·¨ç«¯æ™®é€šè¯â€ï¼ˆuni.* APIï¼‰ï¼Œä¸ç®¡è·Ÿå“ªä¸ªå¹³å°å¯¹è¯éƒ½é€šç”¨ã€‚æ¯”å¦‚æ‹¿ç”¨æˆ·ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Â <span class="hljs-comment">// Vue3æ‹¿ç”¨æˆ·ä¿¡æ¯ï¼ˆä¼ªä»£ç ï¼Œä»…H5å¯ç”¨ï¼‰</span>
Â â€‹
Â å¼•å…¥axios â†’ è°ƒç”¨æµè§ˆå™¨API â†’ å¤„ç†è·¨åŸŸé—®é¢˜ â†’ æ‹¿åˆ°æ•°æ®
</code></pre>
<pre><code class="hljs language-scss" lang="scss">Â <span class="hljs-comment">// Uniappæ‹¿ç”¨æˆ·ä¿¡æ¯ï¼ˆä¼ªä»£ç ï¼Œå…¨å¹³å°é€šç”¨ï¼‰</span>
Â â€‹
Â uni<span class="hljs-selector-class">.getUserInfo</span>() â†’ ç›´æ¥æ‹¿åˆ°æ•°æ®
</code></pre>
<p>æ›´å¦™çš„æ˜¯ï¼ŒVue3 çš„ API æŠ¥é”™å¾—è‡ªå·±æŸ¥åŸå› ï¼ŒUniapp çš„ API åœ¨ Vue3 é‡Œè¿˜èƒ½ â€œè‡ªåŠ¨ç¿»è¯‘â€ï¼ŒæˆåŠŸäº†è¿› thenï¼Œå¤±è´¥äº†æœ‰æç¤ºï¼</p>
<h5 data-id="heading-5">3. æˆ¿é—´çš„ â€œå›¾çº¸â€ ä¸åŒï¼šé¡µé¢å†™æ³•æœ‰è®²ç©¶ ğŸ“</h5>
<p>Vue3 çš„é¡µé¢åƒ â€œè‡ªç”±è£…ä¿®â€ï¼Œè·¯ç”±ï¼ˆé¡µé¢è·³è½¬è§„åˆ™ï¼‰å¾—è‡ªå·±ç”»å›¾çº¸ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Â <span class="hljs-comment">// Vue3è·¯ç”±é…ç½®ï¼ˆä¼ªä»£ç ï¼‰</span>
Â â€‹
Â å¼•å…¥routeræ’ä»¶ â†’ å®šä¹‰é¡µé¢è·¯å¾„æ•°ç»„ â†’ é…ç½®è·³è½¬è§„åˆ™ â†’ æŒ‚è½½åˆ°Appä¸Š
</code></pre>
<p>Uniapp ç›´æ¥ç»™ä½  â€œæ ‡å‡†åŒ–æˆ·å‹å›¾â€ï¼ˆpages.jsonï¼‰ï¼Œå¡«å¥½æˆ¿é—´åå’Œé¢ç§¯å°±è¡Œï¼Œè¿ â€œé—¨çª—ä½ç½®â€ï¼ˆå¯¼èˆªæ ï¼‰éƒ½å¸®ä½ æ ‡å¥½äº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Â // Uniappé¡µé¢é…ç½®ï¼ˆä¼ªä»£ç ï¼‰
Â â€‹
Â <span class="hljs-attr">pages.json</span> = [
Â â€‹
Â  {è·¯å¾„: <span class="hljs-string">"é¦–é¡µ"</span>, æ ‡é¢˜: <span class="hljs-string">"æˆ‘çš„å°åº—"</span>, å¯¼èˆªæ é¢œè‰²: <span class="hljs-string">"çº¢è‰²"</span>},
Â â€‹
Â  {è·¯å¾„: <span class="hljs-string">"è´­ç‰©è½¦"</span>, æ ‡é¢˜: <span class="hljs-string">"æˆ‘çš„å®è´"</span>, å¯¼èˆªæ éšè—: <span class="hljs-literal">false</span>}
Â â€‹
Â ]
</code></pre>
<p>è€Œä¸” Uniapp è¿˜æœ‰ä¸‰ç§ â€œè£…ä¿®ææ–™â€ å¯é€‰ï¼š.vueï¼ˆé€šç”¨ææ–™ï¼Œå…¨å¹³å°èƒ½ç”¨ï¼‰ã€.nvueï¼ˆåŸç”Ÿææ–™ï¼ŒApp æ€§èƒ½è¶…æ£’ï¼‰ã€.uvueï¼ˆé«˜ç§‘æŠ€ææ–™ï¼Œé¸¿è’™éƒ½èƒ½è£…ï¼‰ï¼ŒVue3 å¯æ²¡æœ‰è¿™å¾…é‡ï½</p>
<h5 data-id="heading-6">4. å·¥å…·ç®±çš„ â€œé…ä»¶â€ ä¸åŒï¼šç”Ÿæ€æœ‰ä¾§é‡ ğŸ§°</h5>
<p>Vue3 çš„å·¥å…·ç®±ï¼ˆnpmï¼‰é‡Œå•¥éƒ½æœ‰ï¼Œä» â€œèºä¸â€ï¼ˆå°æ’ä»¶ï¼‰åˆ° â€œç”µé’»â€ï¼ˆå¤§æ¡†æ¶ï¼‰åº”æœ‰å°½æœ‰ï¼Œä½†å¾ˆå¤š â€œé…ä»¶â€ åªé€‚åˆ â€œæµè§ˆå™¨å·¥åœ°â€ã€‚æ¯”å¦‚ä½ æ‹¿ä¸ª Web åŠ¨ç”»æ’ä»¶ï¼Œåˆ°å°ç¨‹åºé‡Œç›´æ¥ â€œç½¢å·¥â€âŒã€‚</p>
<p>Uniapp æœ‰è‡ªå·±çš„ â€œä¸“å±å·¥å…·ç®±â€ï¼ˆæ’ä»¶å¸‚åœºï¼‰ï¼Œæ•°åƒæ¬¾é…ä»¶å…¨æ˜¯ â€œè·¨ç«¯ä¸“ç”¨â€ çš„ï¼æƒ³è¦æ”¯ä»˜åŠŸèƒ½ã€åœ°å›¾ç»„ä»¶ï¼Œç›´æ¥æœ â€œuni - æ”¯ä»˜â€â€œuni - åœ°å›¾â€ï¼Œæ‹¿æ¥å°±èƒ½ç”¨ï¼Œä¸ç”¨æ€•é€‚é…é—®é¢˜ã€‚æ¯”å¦‚åšç”µå•† Appï¼ŒVue3 å¾—æ‹¼ 3 ä¸ªæ’ä»¶ï¼ŒUniapp ä¸€ä¸ª â€œuni-shopâ€ æ¨¡æ¿å…¨æå®šï½</p>
<h4 data-id="heading-7">ğŸš€ ä¸ºå•¥éè¦ç”¨ Uniappï¼Ÿè¿™å‡ ä¸ªåœºæ™¯å¤ªé¦™äº†ï¼</h4>
<h5 data-id="heading-8">1. åˆ›ä¸šå…¬å¸ï¼šçœé’±çœæ—¶é—´çš„ â€œæ•‘å‘½ç¨»è‰â€ ğŸ’¸</h5>
<p>åˆšåˆ›ä¸šçš„å›¢é˜Ÿè¦åš â€œå°ç¨‹åº + App+H5â€ï¼Œç”¨ Vue3 å¾—é›‡ 3 ä¸ªå¼€å‘ï¼š1 ä¸ªå†™ H5ã€1 ä¸ªæå°ç¨‹åºã€1 ä¸ªåš Appï¼Œæœˆè–ªåŠ èµ·æ¥å¾— 2 ä¸‡ +ã€‚ç”¨ Uniappï¼Ÿ1 ä¸ªå¼€å‘æå®šæ‰€æœ‰ï¼Œä»£ç å†™å®Œç‚¹ä¸‰ä¸‹æ‰“åŒ…ï¼Œ3 å¤©å‡ºä¸‰ç«¯äº§å“ï¼Œçœä¸‹çš„é’±èƒ½å¤šæ‹›ä¸ªè¿è¥ğŸ‘ï¼</p>
<h5 data-id="heading-9">2. é«˜é¢‘è¿­ä»£ï¼šæ”¹ä¸€æ¬¡ä»£ç å…¨ç«¯ç”Ÿæ•ˆ ğŸš€</h5>
<p>åšå¤–å–å°ç¨‹åºçš„åŒå­¦æœ€æ‡‚ï¼šä»Šå¤©æ”¹ä¸ª â€œæ»¡å‡æ´»åŠ¨â€ï¼ŒVue3 å¾—æ”¹ H5 ç‰ˆã€å¾®ä¿¡å°ç¨‹åºç‰ˆã€æ”¯ä»˜å®å°ç¨‹åºç‰ˆï¼Œæ”¹å®Œè¿˜å¾—åˆ†åˆ«æµ‹è¯•ï¼Œä¸€ä¸å°å¿ƒå°±æ¼æ”¹ã€‚Uniapp æ”¹ä¸€æ¬¡ä»£ç ï¼Œæ‰€æœ‰å¹³å°è‡ªåŠ¨åŒæ­¥ï¼Œæµ‹è¯•ä¸€æ¬¡å°±è¡Œã€‚å®æµ‹æŸå¥¶èŒ¶åº—å°ç¨‹åºç”¨ Uniapp åï¼Œè¿­ä»£æ•ˆç‡æå‡ 60%ï¼</p>
<h5 data-id="heading-10">3. æ€§èƒ½åˆšéœ€ï¼šåŸç”Ÿä½“éªŒä¸æ˜¯æ¢¦ âš¡</h5>
<p>åˆ«ä»¥ä¸º Uniapp åªæ˜¯ â€œå¥—å£³å·¥å…·â€ï¼Œå®ƒçš„.nvue æ–‡ä»¶èƒ½è°ƒç”¨åŸç”Ÿç»„ä»¶ï¼Œæ»‘åŠ¨é•¿åˆ—è¡¨æ¯” Vue3 æµç•… 10 å€éƒ½ä¸æ­¢ï¼æ¯”å¦‚åšå°è¯´ App çš„ â€œæ— é™æ»šåŠ¨ç« èŠ‚â€ï¼ŒVue3 åˆ’å¿«äº†ä¼šå¡é¡¿ï¼ŒUniapp ç”¨.nvue å†™ï¼Œè·ŸåŸç”Ÿ App ä¸€æ ·ä¸æ»‘ã€‚æ›´ç‰›çš„æ˜¯ uvue æ ¼å¼ï¼Œç¼–è¯‘åæ¥è¿‘åŸç”Ÿæ€§èƒ½ï¼Œå†…å­˜å ç”¨è¿˜èƒ½é™ 35%ï¼</p>
<h4 data-id="heading-11">âŒ è¿™äº›åœºæ™¯åˆ«ç”¨ Uniappï¼Vue3 æ›´åˆé€‚</h4>
<p>å½“ç„¶ Uniapp ä¸æ˜¯ä¸‡èƒ½çš„ï½å¦‚æœåªåš â€œä¼ä¸šå®˜ç½‘ H5â€ï¼Œç”¨ Uniapp å°±åƒ â€œæ‹¿å¤§ç‚®æ‰“èšŠå­â€â€”â€” å®ƒçš„è·¨ç«¯ä»£ç åè€Œæˆäº†ç´¯èµ˜ã€‚è¿™æ—¶å€™ Vue3 æ›´çµæ´»ï¼Œæƒ³åŠ  3D åŠ¨ç”»ã€å¤æ‚äº¤äº’ï¼Œç›´æ¥ç”¨ Three.jsã€VueUse ç­‰æ’ä»¶ï¼Œç”Ÿæ€æ¯” Uniapp ä¸°å¯Œå¤šäº†ã€‚</p>
<p>è¿˜æœ‰åš â€œå›¾å½¢å¯†é›†å‹åº”ç”¨â€ï¼ˆæ¯”å¦‚æ‰‹æœºæ¸¸æˆï¼‰ï¼ŒUniapp çš„æ€§èƒ½è·Ÿä¸ä¸Šï¼Œå¾—ç”¨ Vue3 é…åˆä¸“ä¸šæ¸¸æˆå¼•æ“ã€‚ç®€å•è¯´ï¼šå•ç«¯æ·±è€•æ‰¾ Vue3ï¼Œå¤šç«¯å¼€èŠ±æ‰¾ Uniappï¼</p>
<h4 data-id="heading-12">ğŸ“ æœ€åæ€»ç»“ï¼šåˆ°åº•è¯¥ pick è°ï¼Ÿ</h4>
<p>ç»™å°ç™½åŒå­¦ç”»ä¸ªé‡ç‚¹ï¼š</p>
<ul>
<li>âœ… é€‰ Uniappï¼šè¦åšå°ç¨‹åº + App+H5ã€é¢„ç®—å°‘ã€è¦å¿«é€Ÿä¸Šçº¿</li>
<li>âœ… é€‰ Vue3ï¼šåªåš H5ã€è¦å¤æ‚äº¤äº’ã€ç”¨ç‰¹å®š Web æ’ä»¶</li>
<li>ğŸ“Œ å°æŠ€å·§ï¼šå¦‚æœå…ˆå­¦äº† Vue3ï¼Œå†å­¦ Uniapp åªè¦ 1 å¤© â€”â€” è¯­æ³•åŸºæœ¬ä¸€æ ·ï¼Œå°±å¤šäº†ä¸ª uni API å’Œ pages.json é…ç½®ï¼</li>
</ul>
<p>å…¶å®å®ƒä¿©æ˜¯ â€œé»„é‡‘æ­æ¡£â€ï¼šç”¨ Vue3 æ‰“å¥½åŸºç¡€ï¼Œç”¨ Uniapp æ‹“å±•åœºæ™¯ï¼Œè¿™æ‰æ˜¯å‰ç«¯å°ç™½çš„ â€œèººèµ¢è·¯çº¿â€ï½ ä¸‹æ¬¡æœ‰äººé—®ä½  â€œUniapp å’Œ Vue3 å•¥åŒºåˆ«â€ï¼Œç›´æ¥æŠŠè¿™ç¯‡ç”©ç»™ä»–å°±è¡ŒğŸ˜ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£pnpmçš„æœ¬è´¨ï¼Œå¦‚ä½•é€šè¿‡é«˜æ•ˆç®¡ç†æå‡é¡¹ç›®æ•ˆç‡]]></title>    <link>https://juejin.cn/post/7576026767372386323</link>    <guid>https://juejin.cn/post/7576026767372386323</guid>    <pubDate>2025-11-24T12:06:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576026767372386323" data-draft-id="7576026767372189715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£pnpmçš„æœ¬è´¨ï¼Œå¦‚ä½•é€šè¿‡é«˜æ•ˆç®¡ç†æå‡é¡¹ç›®æ•ˆç‡"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-24T12:06:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœ¡ç¬”ç†Š"/> <meta itemprop="url" content="https://juejin.cn/user/3334169355356045"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£pnpmçš„æœ¬è´¨ï¼Œå¦‚ä½•é€šè¿‡é«˜æ•ˆç®¡ç†æå‡é¡¹ç›®æ•ˆç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3334169355356045/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœ¡ç¬”ç†Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T12:06:59.000Z" title="Mon Nov 24 2025 12:06:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>pnpmï¼ˆPerformant NPMï¼‰</strong>ï¼Œå‰ç«¯å¼€å‘å¿«é€Ÿæ›´æ–°è¿­ä»£ï¼Œé€‰æ‹©åˆé€‚çš„åŒ…ç®¡ç†å·¥å…·å¯¹äºæé«˜å·¥ä½œæ•ˆç‡è‡³å…³é‡è¦ã€‚pnpmä¸ä»…ç»§æ‰¿äº†npmå’Œyarnçš„ä¼˜ç‚¹ï¼Œè¿˜åœ¨æ€§èƒ½ã€ç£ç›˜ç©ºé—´ä½¿ç”¨ç­‰æ–¹é¢è¿›è¡Œäº†æ˜¾è‘—ä¼˜åŒ–ã€‚</p>
<p>å­¦ä¹ æ–°çŸ¥è¯†åŒæ ·éµå¾ªâ€œWHATâ€”HOWâ€”WHYâ€çš„é»„é‡‘åœˆæ€ç»´æ¨¡å¼è¿›è¡Œå­¦ä¹ ï¼Œé€å±‚æ·±å…¥ï¼Œæ‰èƒ½ç‰¢ç‰¢æŒæ¡æ–°çŸ¥è¯†ã€‚</p>
<p>æ–‡ç« å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>pnpmæ˜¯ä»€ä¹ˆ?</li>
<li>pnpmçš„å·¥ä½œåŸç†ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Œè¿™ä¹ˆè®¾è®¡çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ</li>
<li>è¡¥å……çŸ¥è¯†</li>
<li>æ³¨æ„äº‹é¡¹</li>
</ul>
<h2 data-id="heading-0">pnpmæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>pnpmæ˜¯ä¸€ä¸ªåŸºäºNode.jsç¯å¢ƒä¸‹çš„åŒ…ç®¡ç†å™¨ï¼Œè®¾è®¡ç†å¿µæ¥æºäºnpmå’Œyarnï¼Œä½†é‡‡ç”¨äº†ä¸åŒçš„å­˜å‚¨æœºåˆ¶æ¥è§£å†³ä¼ ç»ŸåŒ…ç®¡ç†å·¥å…·å­˜åœ¨çš„é—®é¢˜ã€‚é€šè¿‡ç¡¬é“¾æ¥çš„æ–¹å¼ï¼Œpnpmå¯ä»¥é¿å…é‡å¤å®‰è£…ç›¸åŒçš„ä¾èµ–é¡¹ï¼Œä»è€Œå¤§å¤§èŠ‚çœäº†ç£ç›˜ç©ºé—´ï¼Œå¹¶ä¸”æé«˜äº†å®‰è£…é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-1">å®‰è£…å’Œä½¿ç”¨</h3>
<p>å…¨å±€å®‰è£…pnpm</p>
<pre><code class="hljs language-shell" lang="shell">npm install -g pnpm
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦å…¨å±€å®‰è£…ï¼Ÿæ˜¯å› ä¸ºpnpmè¿™ä¸ªåŒ…æä¾›äº†ä¸€ä¸ªå‘½ä»¤ï¼Œä¹‹åå®‰è£…åŒ…å¯ä»¥é€šè¿‡<code>pnpm</code>è¿™ä¸ªå‘½ä»¤æ¥å®‰è£…ï¼Œå±€éƒ¨å®‰è£…çš„è¯ï¼Œæ¯æ¬¡ä¸€ä¸ªæ–°çš„å·¥ç¨‹éƒ½è¦å®‰è£…ä¸€éï¼Œè´¹åŠ²</p>
<p>å®‰è£…åï¼Œä½¿ç”¨ <code>pnpm -v</code> æ¥æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre><code class="hljs language-shell" lang="shell">pnpm -v
</code></pre>
<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼ŒæŠŠå¹³æ—¶çš„npmæ¢æˆpnpmå³å¯</p>
<p>å®‰è£…é¡¹ç›®ä¸­æ‰€éœ€çš„åŒ…</p>
<pre><code class="hljs language-shell" lang="shell">pnpm i mocha
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0236e243fee439d98f412fc07ee0a4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=TpeNSCPOhRgSg15iW1VI21lAzxI%3D" alt="image-20251121234504195.png" loading="lazy"/>
è¿™é‡Œæ˜¯å®‰è£…äº†<code>mocha</code>å·¥å…·åŒ…, downloadedä¸‹è½½äº†77ï¼Œæ€»å…±éœ€è¦77ï¼Œå¯è§æ˜¯é¦–æ¬¡å®‰è£…ï¼Œéœ€è¦ä»è¿œç¨‹ä¸‹è½½ä¸‹æ¥</p>
<p>é‚£ä¹ˆæˆ‘ä»¬ä»å·¥ç¨‹ä¸­åˆ é™¤<code>node_modules</code>æ–‡ä»¶å¤¹ï¼Œåˆ é™¤å®Œä¹‹åï¼Œå†æ‰§è¡Œ<code>pnpm i mocha</code>çœ‹çœ‹å˜åŒ–</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dca96a67e554b0aaea659464c05f3f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=y9Vm4gixylUS5AGN8%2Bf8y1oFXJk%3D" alt="image-20251121234801367.png" loading="lazy"/>
å¯ä»¥çœ‹åˆ°downloadedå·²ç»æ²¡æœ‰ä¸‹è½½äº†ï¼Œè€Œæ˜¯reusedé‡å¤ä½¿ç”¨ç¼“å­˜ä¸­çš„77ä¸ª</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/690c4034c4bb48c28b0c4b35c1dab0d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=VCd860ekCOx5SxL9%2F6PyzbcllDU%3D" alt="image-20251121234858968.png" loading="lazy"/>
è€Œä¸”é¡¹ç›®ä¸­çš„<code>node_modules</code>æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ä¹Ÿç‰¹åˆ«ç®€æ´</p>
<p>ä¸Šç¯‡æ–‡ç« é‡Œé¢æåˆ°<code>npm</code>å’Œ<code>yarn</code>å®‰è£…åŒ…çš„æ—¶å€™æ˜¯æ‰å¹³åŒ–å¤„ç†ï¼Œå³mochaå’Œmochaçš„ä¾èµ–åŒ…éƒ½ä¼šæ˜¾ç¤ºåˆ°<code>node_modules</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä½†æ˜¯pnpmå¹¶æ²¡æœ‰è¿™ä¹ˆåš</p>
<p>è¿™ä¹ˆåšçš„å¥½å¤„åœ¨äºä¹‹åé¡¹ç›®ä¸­æ–‡ä»¶ä½¿ç”¨çš„æ—¶å€™ï¼Œåªèƒ½ä½¿ç”¨mochaï¼Œä¸èƒ½ä½¿ç”¨mochaå®‰è£…æ—¶å®‰è£…çš„ä¾èµ–é¡¹çš„å†…å®¹ï¼Œ</p>
<p>æ¯”æ–¹è¯´mochaå®‰è£…æ—¶ä¾èµ–äº†diffè¿™ä¸ªåŒ…ï¼Œä½†æ˜¯æ–‡ä»¶ä¸­ä¸èƒ½ä½¿ç”¨diffè¿™ä¸ªåŒ…çš„å†…å®¹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'mocha'</span>)
</code></pre>
<p>é¡¹ç›®ä¸­æ–‡ä»¶å¼•å…¥ mocha çš„æ—¶å€™å¹¶ä¸ä¼šæŠ¥é”™</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce7c62e4fc5841348bbf1a1592ce716d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=dUPLGTzDNysBqvKO%2FszQu%2FZTkec%3D" alt="image-20251121235507356.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'diff'</span>)
</code></pre>
<p>ä½†æ˜¯å¼•å…¥diffçš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°diffæ¨¡å—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93c2742808fc4fc4b6a6c0863c5bc8d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=arbBIZIyNwzFtSqdjE4DrklYrU0%3D" alt="image-20251121235534910.png" loading="lazy"/></p>
<p>ä½†æ˜¯å¦‚æœä½¿ç”¨npmæˆ–è€…yarnæ¥å®‰è£…é¡¹ç›®ä¾èµ–çš„æ—¶å€™å‘¢ï¼Œè™½ç„¶package.jsonä¸­çš„ä¾èµ–é¡¹è¿˜æ˜¯æ˜¾ç¤ºçš„åªæœ‰mochaï¼Œä½†æ˜¯åœ¨é¡¹ç›®æ–‡ä»¶ä¸­å´èƒ½å¤Ÿä½¿ç”¨ diff è¿™ä¸ªé—´æ¥ä¾èµ–ï¼Œä¸ä¼šæŠ¥é”™ã€‚å¤§å®¶å¯ä»¥è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹</p>
<p>å…¶å®è¿™ä¸€ç‚¹å¾ˆä¸å¥½ï¼Œå®¹æ˜“é€ æˆä¸å¥½çš„ä¹ æƒ¯</p>
<p>è¿™ä¸€ç‚¹pnpmå°±è®¾è®¡çš„ç‰¹åˆ«å¥½ï¼Œåœ¨é¡¹ç›®ä¸­ä¸èƒ½å¤Ÿä½¿ç”¨é—´æ¥ä¾èµ–</p>
<p>å¦‚æœè¦æ‰§è¡Œå®‰è£…åœ¨æœ¬åœ°çš„CLIï¼Œå¯ä»¥ä½¿ç”¨pnpxï¼Œå’Œnpxçš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œåœ¨ä½¿ç”¨pnpxæ‰§è¡Œä¸€ä¸ªéœ€è¦å®‰è£…çš„å‘½ä»¤æ—¶ï¼Œä¼šä½¿ç”¨pnpmè¿›è¡Œå®‰è£…</p>
<p>å¦‚æœä½¿ç”¨npxæ‰§è¡Œmochaçš„å‘½ä»¤ï¼Œæœ¬åœ°æ²¡æœ‰çš„è¯npxå°±ä¼šå…ˆä¸´æ—¶ä¸‹è½½mochaï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨</p>
<p>ä¸‹æ¬¡ä½¿ç”¨çš„æ—¶å€™è¿˜éœ€è¦é‡æ–°å®‰è£…ï¼Œä¸ä¼šä¿å­˜åœ¨æœ¬åœ°çš„node_modulesæ–‡ä»¶å¤¹ä¸­</p>
<p>ä¹Ÿå°±æ˜¯è¯´npxæœ‰å¯èƒ½è§¦å‘åŒ…çš„å®‰è£…</p>
<p>é‚£ä¹ˆpnpxæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿåœ¨äºä½¿ç”¨æ—¶pnpxæ‰§è¡Œä¸€ä¸ªéœ€è¦å®‰è£…çš„å‘½ä»¤æ—¶ï¼Œä¼šä½¿ç”¨pnpmè¿›è¡Œå®‰è£…ï¼Œå°±è¿™ä¸€ç‚¹åŒºåˆ«</p>
<h2 data-id="heading-2">pnpmçš„å·¥ä½œåŸç†</h2>
<p>å’Œnpmä»¥åŠyarnä¸€æ ·ï¼Œpnpmä»ç„¶ä½¿ç”¨ç¼“å­˜æ¥ä¿å­˜å·²ç»å®‰è£…è¿‡çš„åŒ…ï¼Œä»¥åŠä½¿ç”¨<code>pnpm-lock.yaml</code>æ¥è®°å½•è¯¦ç»†çš„ä¾èµ–ç‰ˆæœ¬</p>
<p>ä¸åŒäºyarnå’Œnpmï¼Œpnpmä½¿ç”¨<strong>ç¬¦å·é“¾æ¥å’Œç¡¬é“¾æ¥</strong>ï¼ˆå¯å°†å®ƒä»¬æƒ³è±¡æˆå¿«æ·æ–¹å¼ï¼‰çš„åšæ³•æ¥æ”¾ç½®ä¾èµ–ï¼Œä»è€Œè§„é¿äº†ä»ç¼“å­˜ä¸­æ‹·è´æ–‡ä»¶çš„æ—¶é—´ï¼Œä½¿å¾—å®‰è£…å’Œå¸è½½çš„é€Ÿåº¦æ›´å¿«</p>
<p>ç”±äºä½¿ç”¨äº†<strong>ç¬¦å·é“¾æ¥å’Œç¡¬é“¾æ¥</strong>ï¼Œpnpmå¯ä»¥è§„é¿windowsæ“ä½œç³»ç»Ÿè·¯å¾„è¿‡é•¿çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œå®ƒé€‰æ‹©ä½¿ç”¨æ ‘å½¢çš„ä¾èµ–ç»“æœï¼Œæœ‰ç€å‡ ä¹å®Œç¾çš„ä¾èµ–ç®¡ç†ã€‚ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œé¡¹ç›®ä¸­åªèƒ½ä½¿ç”¨ç›´æ¥ä¾èµ–ï¼Œè€Œä¸èƒ½ä½¿ç”¨é—´æ¥ä¾èµ–ã€‚</p>
<p>ä»¥windowsç³»ç»Ÿä¸ºä¾‹ï¼Œpnpmçš„ç¼“å­˜ä¼šä¿å­˜åœ¨é¡¹ç›®çš„æ ¹ç›®å½•é‡Œ</p>
<p>æˆ‘ç°åœ¨çš„æµ‹è¯•é¡¹ç›®åœ¨Fç›˜ï¼Œé‚£ä¹ˆFç›˜å°±ä¼šæœ‰ä¸€ä¸ª <code>.pnpm-store</code> çš„æ–‡ä»¶å¤¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1574ffe84ab443e29ad11d7ba7e6a332~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=DLkNxCJ%2BZZnaEtb2p43SkUI8GWQ%3D" alt="image-20251122102143103.png" loading="lazy"/></p>
<p>ä½†æ˜¯è¿™ä¸ªmochaå¹¶ä¸æ˜¯å®Œæ•´çš„åŒ…å­˜å‚¨åœ¨.pnpm-storeè¿™ä¸ªç›®å½•ä¸­ï¼Œè€Œæ˜¯æŒ‰å†…å®¹å“ˆå¸Œå­˜å‚¨çš„å•ä¸ªæ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/489003a90d33490793ad119ae1173a63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=ZU9KUocXAUGUYo5S%2F2tuAE8rmNU%3D" alt="image-20251122103530476.png" loading="lazy"/></p>
<p>æ‰“å¼€jsonæ–‡ä»¶é‡Œé¢</p>
<p>æˆ‘æ–‡ä»¶é‡Œé¢å»é™¤äº†ä¸åŒ…å«mochaçš„filesï¼Œæ–¹ä¾¿æŸ¥çœ‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f796d33eeb0f468fb94221b69b0e6f21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=4xE%2B6d4Ae6tG1mMMbU4jtNSLX5A%3D" alt="image-20251122103805818.png" loading="lazy"/></p>
<p>è€Œå®Œæ•´çš„åŒ…ç›®å½•æ˜¯å­˜å‚¨åœ¨é¡¹ç›®æ–‡ä»¶å¤¹<code>node_modules/.pnpm</code>ä¸­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5fbf675cba647819b2ce07645288bb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=%2BauIfC4cnOWjXbrb3oFulG1OO%2Bk%3D" alt="image-20251122103943694.png" loading="lazy"/></p>
<p>é¡¹ç›®ä¸­<code>node_modules/.pnpm</code>å­˜å‚¨çš„æ˜¯pnpmä¸ºå½“å‰é¡¹ç›®æ„å»ºçš„è™šæ‹Ÿä¾èµ–æ ‘ï¼Œé‡Œé¢é€šè¿‡ç¡¬é“¾æ¥æˆ–è€…ç¬¦å·é“¾æ¥åªæƒ³storeä¸­çš„å®é™…æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6124a029c2b4b10a374c81ac7d8218f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=M9OvNcMZEpPRqrlvWrlvlNjdVEo%3D" alt="image-20251122104814755.png" loading="lazy"/>
åœ¨é¡¹ç›®ä¸­å¯ä»¥æ‰¾åˆ°å®é™…çš„åŒ¹é…ä¿¡æ¯ <code>node_modules/.pnpm/mocha@11.7.5/node_modules/mocha/package.json</code>,è¿™ä¸ªpackage.jsonæ–‡ä»¶æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œä½†æ˜¯å†…å®¹æ˜¯é“¾æ¥åˆ°storeçš„ï¼Œä¸æ˜¯å¤åˆ¶ï¼ˆè¿™ä¸ªé—®é¢˜ä»é¡¹ç›®ä¸­åˆ é™¤node_modulesæ–‡ä»¶å¤¹é€Ÿåº¦å˜å¿«å°±å¯ä»¥çœ‹å‡ºï¼‰ã€‚</p>
<p><strong>å¦‚æœåˆæ¬¡æ¥è§¦åˆ°pnpmçš„åŸç†ï¼Œè§‰å¾—è¿™ç§ç¬¦å·é“¾æ¥ä¸ç¡¬é“¾æ¥æ¯”è¾ƒéš¾ç†è§£çš„è¯ï¼Œå¯ä»¥ç†è§£ä¸ºwindowsä¸­çš„å¾®ä¿¡å¿«æ·æ–¹å¼ï¼ˆå¯ä»¥ç†è§£ä¸ºä½ çš„é¡¹ç›®ä¸­node_modulesä¸­.pnpmæ–‡ä»¶å¤¹ä¸­çš„ç›¸å…³ä¾èµ–åŒ…ï¼‰ï¼Œç‚¹å‡»å¿«æ·æ–¹å¼å®é™…ä¸Šå°±æ˜¯æ‰¾åˆ°æ–‡ä»¶ä½ç½®ä¸­çš„å®é™…æ–‡ä»¶å¹¶æ‰§è¡Œï¼Œåˆ é™¤å¿«æ·æ–¹å¼ï¼ˆå¯ä»¥ç†è§£ä¸ºé¡¹ç›®ä¸­åˆ é™¤node_modulesï¼‰å¹¶ä¸æ„å‘³ç€åˆ é™¤äº†çœŸå®çš„æ–‡ä»¶</strong></p>
<p>æˆ‘è¿™ä¸ªä¾‹å­å¯èƒ½æŸäº›æªè¾ä¸å¤ªæ°å½“ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©å¤§å®¶ç†è§£ä¸€ä¸‹ã€‚</p>
<p>è™½ç„¶npmå’ŒyarnåŒ…ç®¡ç†å™¨ä¹Ÿä½¿ç”¨äº†ç¼“å­˜ï¼Œä½†æ˜¯å®é™…ç”¨åˆ°çš„åŒ…è¿˜æ˜¯ä¼šè¿›è¡Œæ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œæ˜¯çœŸå®å­˜åœ¨çš„</p>
<p>pnpmå‘¢ï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä¸Šé¢ä¸¾çš„ä¾‹å­ï¼Œåœ¨ä½ é¡¹ç›®é‡Œåˆ›å»ºäº†ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼ŒæŒ‡å‘åˆ°æœ¬åœ°ç£ç›˜é“¾æ¥ä¸­çš„åŒ…ï¼Œpnpmä¸­å°±ä¸å«æ‹·è´äº†ï¼Œåº”è¯¥å«å»ºç«‹é“¾æ¥æ›´ä¸ºå‡†ç¡®ä¸€ç‚¹</p>
<p>ä½†æ˜¯ç‰ˆæœ¬ä¸ä¸€æ ·å‘¢ï¼Œè¿˜æ˜¯ä¼šé‡æ–°ä¸‹è½½çš„ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šéƒ½æ˜¯ä¸€æ ·çš„</p>
<p>ä½¿ç”¨ä¸€ä¸ªæµ‹è¯•é¡¹ç›®æ¥æ›´å¥½çš„ç†è§£pnpmçš„å·¥ä½œåŸç†</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®åä¸º<code>project</code>, ç›´æ¥ä¾èµ–æ¨¡å—Aï¼Œåˆ™å®‰è£…çš„æ—¶å€™ï¼Œpnpmä¼šåšä»¥ä¸‹å¤„ç†ï¼š</p>
<ol>
<li>æŸ¥è¯¢ä¾èµ–å…³ç³»ï¼Œå¾—åˆ°æœ€ç»ˆè¦å®‰è£…çš„åŒ…ï¼špackageAå’ŒpackageB</li>
<li>æŸ¥çœ‹packageAå’ŒpackageBæ˜¯å¦æœ‰ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸‹è½½åˆ°ç¼“å­˜ä¸­ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥</li>
<li>åˆ›å»ºnode_modulesç›®å½•ï¼Œå¹¶å¯¹ç›®å½•è¿›è¡Œç»“æ„åˆå§‹åŒ–</li>
</ol>
<p>æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>è¿™æ˜¯è‡ªå·±åˆ›å»ºçš„ç›®å½•ï¼Œä¸å®é™…çš„pnpmå®‰è£…çš„å¯èƒ½æœ‰å·®å¼‚ï¼Œå› ä¸ºpnpmä¹Ÿåœ¨ä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œè€Œä¸”æ¯ä¸ªäººæœ¬åœ°çš„pnpmç‰ˆæœ¬å¯èƒ½ä¸ä¸€è‡´</p>
<p>å®é™…çš„é¡¹ç›®ä¸­ï¼Œè¿˜æœ‰å¯èƒ½å› ä¸ºæœ¬åœ°è®¾ç½®äº†é•œåƒæºï¼Œä¾‹å¦‚æ·˜å®çš„é•œåƒæºï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å¤šå‡ºæ¥ä¸€ä¸ªæ–‡ä»¶å¤¹ <code>registry.npm.taobao.org</code> ä½œä¸ºæ‰€æœ‰ä¾èµ–åŒ…çš„çˆ¶æ–‡ä»¶å¤¹ï¼Œè·Ÿ.pnpm/node_modulesæ–‡ä»¶å¤¹å¹³çº§</p>
<pre><code class="hljs language-css" lang="css">project/
â”œâ”€â”€ node_modules   projectå·¥ç¨‹çš„npmåŒ…å®‰è£…ç›®å½•
â”œâ”€â”€ <span class="hljs-selector-class">.pnpm</span> pnpmçš„åŒ…ç®¡ç†ç›®å½•ï¼Œè¯¥ç›®å½•ä¸ä¼šè¢«nodeè¯»å–åˆ°
â”‚   â”œâ”€â”€ node_modules éå·¥ç¨‹ç›´æ¥ä¾èµ–åŒ…ä¿å­˜åœ¨è¿™é‡Œï¼Œä¾‹å¦‚packageB
â”‚   â”œâ”€â”€ packageA åŒ…<span class="hljs-selector-tag">A</span>çš„ç›®å½•
|       â”œâ”€â”€ <span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>ç‰ˆæœ¬
â”‚           â”œâ”€â”€ node_modules åŒ…<span class="hljs-selector-tag">A</span>æ‰€æœ‰çš„ä¾èµ–ä»¥åŠè‡ªèº«
|               â”œâ”€â”€ packageA åŒ…<span class="hljs-selector-tag">A</span>çš„ä»£ç ç›®å½•
|                   â”œâ”€â”€ index<span class="hljs-selector-class">.js</span> æ¥è‡ªäºç¼“å­˜çš„ç¡¬é“¾æ¥
|               â”œâ”€â”€ packageB å‡è®¾packageAä¾èµ–äº†packageBï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡ç¬¦å·é“¾æ¥ï¼Œæ”¾ç½®åˆ°æ­¤ç›®å½•ä¸­
|                   â”œâ”€â”€ index<span class="hljs-selector-class">.js</span>
â”‚   â”œâ”€â”€ packageB åŒ…<span class="hljs-selector-tag">B</span>çš„ç›®å½•
|       â”œâ”€â”€ <span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>ç‰ˆæœ¬ 
â”‚           â”œâ”€â”€ node_modules åŒ…<span class="hljs-selector-tag">B</span>æ‰€æœ‰çš„ä¾èµ–ä»¥åŠè‡ªèº«
|               â”œâ”€â”€ packageB åŒ…<span class="hljs-selector-tag">B</span>çš„ä»£ç ç›®å½•
|                   â”œâ”€â”€ index<span class="hljs-selector-class">.js</span> æ¥è‡ªäºç¼“å­˜çš„ç¡¬é“¾æ¥
|   â”œâ”€â”€ else...  å…¶ä½™çš„ä¾èµ–åŒ…
â””â”€â”€ index<span class="hljs-selector-class">.js</span>
</code></pre>
<p><strong>.pnpmæ–‡ä»¶å¤¹ä¸ºä»€ä¹ˆä¸ä¼šè¢«nodeè¯»å–åˆ°</strong>ï¼Ÿ</p>
<p>è¿™æ¶‰åŠåˆ°åŒ…æŸ¥æ‰¾é¡ºåºçš„è§„åˆ™ï¼ˆè¡¥å……çŸ¥è¯†ç¬¬ä¸ƒæ¡ï¼‰ï¼Œæ­£å¸¸å¼•å…¥åŒ…çš„æ–¹å¼ <code>require("packageA")</code>æˆ–è€…<code>import packageA from 'packageA'</code>æ˜¯ä¸ä¼šè¿›å…¥.pnpmæ–‡ä»¶å¤¹å»æŸ¥æ‰¾çš„ï¼Œé™¤éæ˜¯ç”¨ç»å¯¹è·¯å¾„å¼•å…¥<code>require('./node_modules/.pnpm/xxx')</code>è¿™æ ·çš„æ–¹å¼å»æŸ¥æ‰¾ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå»åš</p>
<p><code>.pnpm/node_modules</code> è¿™ä¸ªæ–‡ä»¶å¤¹ä¼šå°†é—´æ¥ä¾èµ–åŒ…éƒ½æ”¾åœ¨æ­¤å¤„ï¼Œå­˜æ”¾æ–¹å¼æ˜¯æ‰å¹³åŒ–å­˜å‚¨</p>
<p><code>registry.npm.taobao.org</code>å°±æ˜¯åŒ…çš„å…·ä½“ç‰ˆæœ¬å’Œä»£ç æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œæ„æ€å°±æ˜¯åŒ…ä»å“ªé‡Œä¸‹è½½çš„ï¼Œè·Ÿæœ¬åœ°è®¾ç½®çš„é•œåƒæºå’Œä¸‹è½½æ–¹å¼æœ‰å…³ç³»ï¼Œä¸ä¸€å®šæœ‰è¿™ä¸ªæ–‡ä»¶å¤¹</p>
<p><code>packageA</code>ä¸‹é¢çš„ç‰ˆæœ¬å·é‡Œé¢ä¼šæœ‰ä¸€ä¸ª<code>node_modules</code>æ–‡ä»¶å¤¹**ï¼ˆè‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Œè¯¦ç»†å¯ä»¥æŸ¥çœ‹è¡¥å……çŸ¥è¯†ç¬¬ä¸ƒæ¡ node_modulesæŸ¥æ‰¾è§„åˆ™ï¼‰**ï¼Œå¯¹åº”æœ¬åœ°ç¼“å­˜ï¼ˆæ¯”æ–¹è¯´åœ¨Cç›˜ï¼‰çš„åŒ…ä½¿ç”¨ç¡¬é“¾æ¥æ”¾ç½®æ–‡ä»¶åˆ°ç›¸åº”åŒ…ä»£ç ç›®å½•ä¸­ï¼Œä¸Šæ–¹çš„ä¸¤ä¸ªindex.jsæ–‡ä»¶å°±æ˜¯æ¥è‡ªäºç¼“å­˜çš„ç¡¬é“¾æ¥</p>
<p><code>packageA</code>ä¸­çš„ç›´æ¥ä¾èµ–åŒ…ï¼Œä½¿ç”¨ç¬¦å·é“¾æ¥æ”¾ç½®åˆ°è‡ªå·±çš„ç›®å½•ä¸­</p>
<p>ç¡¬é“¾æ¥å¯ä»¥èŠ‚çœç£ç›˜å­˜å‚¨ç©ºé—´ï¼Œç¬¦å·é“¾æ¥å¯ä»¥èŠ‚çœæŸ¥æ‰¾æ—¶é—´ï¼Œé—´æ¥ä¾èµ–åŒ…éƒ½æ”¾ç½®åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œæ˜¯é˜²æ­¢å‡ºç°æ–‡ä»¶ä¸­å¼•å…¥é—´æ¥ä¾èµ–çš„ä»£ç ã€‚</p>
<p>ç”¨æˆ‘æœ¬åœ°åˆ›å»ºçš„æµ‹è¯•é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ï¼Œä¾èµ–å…³ç³»å°±æ˜¯ä¸‹é¢è¿™æ ·å­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">pnpm-test/
â””â”€â”€ node_modules/
    â”œâ”€â”€ .pnpm/
    â”‚   â””â”€â”€ <span class="hljs-symbol">mocha@</span><span class="hljs-number">11.7</span><span class="hljs-number">.5</span>/
    â”‚       â””â”€â”€ node_modules/
    â”‚           â””â”€â”€ mocha/               â† è¿™æ˜¯ä½ çœ‹åˆ°çš„â€œå…·ä½“åŒ…ä¿¡æ¯â€
    â”‚               â”œâ”€â”€ <span class="hljs-keyword">package</span>.json     â† çœŸå®æ–‡ä»¶ï¼ˆå°ï¼Œå¸¸ç›´æ¥å­˜å‚¨ï¼‰
    â”‚               â”œâ”€â”€ index.js         â† å®é™…æ˜¯**ç¡¬é“¾æ¥**åˆ° store
    â””â”€â”€ mocha â†’ symlink to .pnpm/<span class="hljs-symbol">mocha@</span><span class="hljs-number">11.7</span><span class="hljs-number">.5</span>/node_modules/mocha
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5021d02ab664fa599af92d9cd53679e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=q8J9LAVPcA8VMv4HJSTozUTL5uI%3D" alt="image-20251124191732124.png" loading="lazy"/></p>
<p>é—´æ¥ä¾èµ–åŒ…ä½ç½®ï¼Œä»¥åŠé—´æ¥ä¾èµ–åŒ…çš„CLIå·¥å…·çš„å‘½ä»¤</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bfde246f71d4fc2921620e7bcf018c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=ip5hMq0Ueim5jnGUNEcaxLUt7bE%3D" alt="image-20251124191818010.png" loading="lazy"/></p>
<p>å®é™…é¡¹ç›®ä¸­ç”¨åˆ°çš„mochaå·¥å…·åŒ…ï¼ˆpnpm-test\node_modules\mochaï¼‰ä¹Ÿæ˜¯é€šè¿‡ç¬¦å·é“¾æ¥ .pnpm/mocha@11.7.5/node_modules/mocha æ­¤å¤„çš„å…·ä½“åŒ…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c762185b59de437a800f4a4045d3ffe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=MMGmM3%2Bb%2FO%2FbwcStxyYJZEejln8%3D" alt="image-20251124191912669.png" loading="lazy"/></p>
<h2 data-id="heading-3">è¡¥å……çŸ¥è¯†</h2>
<ol>
<li>
<p>æ–‡ä»¶çš„æœ¬è´¨ File Nature</p>
<p>æ–‡ä»¶çš„æœ¬è´¨æ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿçš„ä¸€äº›çŸ¥è¯†ï¼Œå¯ä»¥åšä¸ºäº†è§£ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸ä¼šè®²åˆ°å¾ˆå¤š</p>
<p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆæŒ‡é’ˆçš„æŒ‡å‘æ˜¯æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ç£ç›˜ï¼Œæ¯”æ–¹è¯´Cç›˜ã€Dç›˜è¿™äº›æ ¹ç›®å½•ï¼‰ï¼Œåªä¸è¿‡å®ƒæŒ‡å‘çš„ä¸æ˜¯å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤–éƒ¨å­˜å‚¨åœ°å€ï¼Œè¿™é‡Œçš„å¤–éƒ¨å­˜å‚¨å¯ä»¥æ˜¯ç¡¬ç›˜ã€Uç›˜ã€ç”šè‡³æ˜¯ç½‘ç»œ</p>
<p>å½“æˆ‘ä»¬åˆ é™¤æ–‡ä»¶æ—¶ï¼Œå®é™…ä¸Šåˆ é™¤çš„æ˜¯æŒ‡é’ˆï¼Œå› æ­¤æ— è®ºåˆ é™¤å¤šä¹ˆå¤§çš„æ–‡ä»¶ï¼Œé€Ÿåº¦éƒ½éå¸¸å¿«ã€‚</p>
<p>æ‰©å±•ï¼šæ¯”æ–¹è¯´ç°åœ¨å¸‚é¢ä¸Šçš„æ•°æ®æ¢å¤æŠ€æœ¯ï¼Œå½“ä½ çš„æ•°æ®ä¸å°å¿ƒåˆ é™¤äº†ï¼Œå›æ”¶ç«™ä¹Ÿæ¸…ç©ºäº†ï¼Œç†è®ºæ˜¯å¯ä»¥æ¢å¤çš„ï¼Œå› ä¸ºæ•°æ®è¿˜åœ¨ï¼Œä½†æ˜¯é—´éš”çš„æ—¶é—´è¿‡ä¹…äº†ï¼Œå°±ä¸ä¸€å®šäº†ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ—¶é—´è·¨åº¦ä¸­ï¼Œæœ‰å¯èƒ½æ–‡ä»¶åŒºåŸŸæ–°å»ºäº†æ–‡ä»¶ï¼Œä¹‹å‰çš„æ–‡ä»¶å¯èƒ½ä¼šè¢«è¦†ç›–æ‰ï¼Œæœ‰å¯èƒ½è¦†ç›–ä¸å®Œå…¨è¿˜å‰©ä¸‹ä¸€ç‚¹ä¹‹å‰çš„æ•°æ®ï¼Œæ‰€ä»¥åˆ é™¤çš„æ—¶é—´ä¹…äº†æœ‰å¯èƒ½æ¢å¤ä¸å®Œå…¨ç”šè‡³ä¸èƒ½æ¢å¤</p>
</li>
<li>
<p>æ–‡ä»¶çš„æ‹·è´ File Copy</p>
<p>å¦‚æœä½ å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯å°†è¯¥æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹è¿›è¡Œå¤åˆ¶ï¼Œç„¶åäº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶æŒ‡å‘æ–°çš„å†…å®¹</p>
<p>æ˜¯å°†åŸæ–‡ä»¶å†…å®¹æ‹·è´å‡ºæ¥ä¸€ä»½ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ–°çš„æŒ‡é’ˆæŒ‡å‘å®ƒï¼Œæ‰€ä»¥æ”¹å˜å¤åˆ¶åçš„æ–‡ä»¶ä¸ä¼šå¯¹åŸæ–‡ä»¶äº§ç”Ÿæ”¹å˜</p>
</li>
<li>
<p>ç¡¬é“¾æ¥ Hard Link</p>
<p>ç¡¬é“¾æ¥çš„æ¦‚å¿µæ¥æºäº<strong>Unix</strong>æ“ä½œç³»ç»Ÿ</p>
<p><strong>Unix</strong> ç³»ç»Ÿå¼•å…¥ç¡¬é“¾æ¥æ˜¯ä¸ºäº†è§£å†³æ–‡ä»¶å…±äº«é—®é¢˜ï¼Œå®ƒå…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæ–‡ä»¶åï¼Œè¿™äº›æ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶æ•°æ®</p>
<p>åœ¨<strong>Unix</strong>ä¸­ï¼Œç¡¬é“¾æ¥å’ŒåŸæ–‡ä»¶å…±äº«ç›¸åŒçš„ inode èŠ‚ç‚¹å·ï¼Œè¡¨æ˜å®ƒä»¬æ˜¯åŒä¸€ä¸ªæ–‡ä»¶</p>
<p>é€šä¿—çš„è®²æ˜¯æŒ‡å°†ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆAå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆBä¸­ï¼Œæ–‡ä»¶Bå°±æ˜¯æ–‡ä»¶Açš„ç¡¬é“¾æ¥ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªæ•°æ®</p>
<p>é€šè¿‡ç¡¬é“¾æ¥ï¼Œä¸ä¼šäº§ç”Ÿé¢å¤–çš„ç£ç›˜å ç”¨ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ–‡ä»¶éƒ½èƒ½æ‰¾åˆ°ç›¸åŒçš„ç£ç›˜å†…å®¹</p>
<p>ç¡¬é“¾æ¥çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥ä¸ºåŒä¸€ä¸ªæ–‡ä»¶äº§ç”Ÿå¤šä¸ªç¡¬é“¾æ¥</p>
<p>windows Vistaæ“ä½œç³»ç»Ÿå¼€å§‹ï¼Œæ”¯æŒäº†åˆ›å»ºç¡¬é“¾æ¥çš„æ“ä½œï¼Œåœ¨cmdä¸­ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥åˆ›å»ºç¡¬é“¾æ¥</p>
<pre><code class="hljs language-shell" lang="shell">mklink /h é“¾æ¥åç§° ç›®æ ‡æ–‡ä»¶
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f90d35face4259bc5d6e81dbc498ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=V2Uf6evhXLAmF5%2FvISL6GvONnKs%3D" alt="image-20251123083338461.png" loading="lazy"/></p>
<p>åœ¨æ¡Œé¢æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹ä¸ºtempï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç©ºæ–‡æœ¬æ–‡ä»¶article.txt</p>
<p>åˆ›å»ºç¡¬é“¾æ¥ link.txt</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58a136dce41647a7bd732adca1d8efb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Jyh56yU54aK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764590819&amp;x-signature=L0zf9Zor5YntE0ELKMf0HwbxS3w%3D" alt="image-20251123083601658.png" loading="lazy"/>
å½“æˆ‘åœ¨article.txtä¸­å†™å…¥articleè¿™ä¸ªå•è¯æ—¶ï¼Œlink.txtæ–‡æœ¬æ–‡ä»¶ä¹ŸåŒæ ·å†™å…¥è¿™ä¸ªå•è¯</p>
<p>ç”±äºæ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰ä¸å­˜åœ¨æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰ä¸èƒ½åˆ›å»ºç¡¬é“¾æ¥</p>
<blockquote>
<p>åœ¨windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¸è¦è·¨è¶Šç›˜ç¬¦åˆ›å»ºç¡¬é“¾æ¥</p>
</blockquote>
</li>
<li>
<p>ç¬¦å·é“¾æ¥ Symbol Link</p>
<p>ç¬¦å·é“¾æ¥åˆè¢«ç§°ä¸ºè½¯è¿æ¥ï¼Œå¦‚æœä¸ºæŸä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹Aåˆ›å»ºç¬¦å·é“¾æ¥Bï¼Œåˆ™BæŒ‡å‘A</p>
<p>æ„æ€å°±æ˜¯è½¯è¿æ¥BæŒ‡å‘äº†Aï¼Œè€Œä¸æ˜¯æŒ‡å‘æ–‡ä»¶å†…å®¹ï¼ŒæŠŠAåˆ é™¤ï¼ŒBä¹Ÿå°±æ— æ•ˆäº†</p>
<p>windowsåœ¨cmdä¸­ä½¿ç”¨ä¸‹æ–¹å‘½ä»¤å¯ä»¥åˆ›å»ºç¬¦å·é“¾æ¥</p>
<pre><code class="hljs language-shell" lang="shell">mklink /d é“¾æ¥åç§° ç›®æ ‡æ–‡ä»¶
<span class="hljs-meta prompt_"># </span><span class="bash">/dè¡¨ç¤ºåˆ›å»ºçš„æ˜¯ç›®å½•çš„ç¬¦å·é“¾æ¥ï¼Œä¸å†™åˆ™æ˜¯æ–‡ä»¶çš„ç¬¦å·é“¾æ¥</span>
</code></pre>
<p>æ—©æœŸçš„windowsä¸æ”¯æŒç¬¦å·é“¾æ¥ï¼Œä½†æ˜¯æä¾›äº†ä¸€ä¸ªjunctionæ¥è¾¾åˆ°ç±»ä¼¼çš„åŠŸèƒ½</p>
<p><strong>ç¬¦å·é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«</strong></p>
<ul>
<li>ç¡¬é“¾æ¥åªèƒ½é“¾æ¥æ–‡ä»¶ï¼Œè€Œç¬¦å·é“¾æ¥å¯ä»¥é“¾æ¥ç›®å½•</li>
<li>ç¡¬é“¾æ¥åœ¨é“¾æ¥å®Œæˆåä»…å’Œæ–‡ä»¶å†…å®¹å…³è”ï¼Œå’Œä¹‹å‰é“¾æ¥çš„æ–‡ä»¶æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚è€Œç¬¦å·é“¾æ¥å§‹ç»ˆå’Œä¹‹å‰çš„é“¾æ¥çš„æ–‡ä»¶å…³è”ï¼Œå’Œæ–‡ä»¶å†…å®¹ä¸ç›´æ¥ç›¸å…³</li>
</ul>
</li>
<li>
<p>å¿«æ·æ–¹å¼</p>
<p>ä¹‹å‰ä¹Ÿä¸¾è¿‡ä¾‹å­ï¼Œå…¶å®å¿«æ·æ–¹å¼ç±»ä¼¼äºç¬¦å·é“¾æ¥ï¼Œæ˜¯windowsç³»ç»Ÿæ—©æœŸå°±æ”¯æŒçš„é“¾æ¥æ–¹å¼ã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŒ‡å‘å…¶ä»–æ–‡ä»¶æˆ–ç›®å½•çš„æŒ‡é’ˆï¼Œå…¶ä¸­è¿˜åŒ…å«äº†å„ç§ä¿¡æ¯ï¼šå¦‚æƒé™ã€å…¼å®¹æ€§å¯åŠ¨æ–¹å¼ç­‰å…¶ä»–å„ç§å±æ€§</p>
</li>
<li>
<p>nodeç¯å¢ƒå¯¹ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥çš„å¤„ç†</p>
<p>ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥æ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„æ–‡ä»¶ï¼Œnodeä¸å¯¹å…¶åšä»»ä½•ç‰¹æ®Šå¤„ç†ï¼Œä¹Ÿæ— æ³•åŒºåˆ«å¯¹å¾…ï¼Œå®é™…ä¸Šï¼Œnodeæ ¹æœ¬æ— ä»çŸ¥æ™“æ–‡ä»¶æ˜¯ä¸æ˜¯ä¸€ä¸ªç¡¬é“¾æ¥</p>
<p>ç¬¦å·é“¾æ¥ï¼šç”±äºç¬¦å·é“¾æ¥æŒ‡å‘çš„æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œå½“nodeæ‰§è¡Œç¬¦å·é“¾æ¥ä¸‹çš„JSæ–‡ä»¶æ—¶ï¼Œä¼šä½¿ç”¨åŸå§‹è·¯å¾„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/temp/sub/a.js</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(__dirname) <span class="hljs-comment">// C:\Users\jinai\Desktop\test\src\temp\sub</span>

<span class="hljs-keyword">const</span> b = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../b'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"bæ¨¡å—çš„å†…å®¹"</span>, b) <span class="hljs-comment">// bæ¨¡å—çš„å†…å®¹ { name: 'b' }</span>

<span class="hljs-comment">// src/temp/b.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'b'</span>
}
</code></pre>
<p>æ­¤æ—¶å¯¹a.jsåˆ›å»ºç¡¬é“¾æ¥ï¼Œæ”¾åˆ°<code>src</code>ä¸‹é¢</p>
<p>å†è¿è¡Œsrcä¸‹é¢çš„a.jsæ–‡ä»¶å°±ä¼šæŠ¥é”™ <code>Cannot find module '../b'</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/a.js</span>
<span class="hljs-comment">// å°†ç¡¬é“¾æ¥åçš„æ–‡ä»¶åšå¦‚ä¸‹ä¿®æ”¹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(__dirname) <span class="hljs-comment">// C:\Users\jinai\Desktop\test\src</span>

<span class="hljs-comment">// const b = require('../b')</span>
<span class="hljs-comment">// console.log("bæ¨¡å—çš„å†…å®¹", b) // bæ¨¡å—çš„å†…å®¹ { name: 'b' }</span>
</code></pre>
<p>é‚£ä¹ˆç¡¬é“¾æ¥åè¿è¡Œçš„ç»“æœè¾“å‡ºçš„ <code>__dirname</code> å°±æ˜¯ <code>C:\Users\jinai\Desktop\test\src</code></p>
<p>å¦‚æœæ­¤æ—¶åˆ›å»ºä¸€ä¸ª<code>temp\sub</code>çš„ç¬¦å·é“¾æ¥<code>link</code></p>
<p>é‚£ä¹ˆlinkæ–‡ä»¶å¤¹é‡Œé¢å°±ä¼šæœ‰ä¸€ä¸ªa.jsæ–‡ä»¶</p>
<p>è¿è¡Œ link/a.js</p>
<p>é‚£ä¹ˆå¾—åˆ°çš„ <code>__dirname</code> å°±æ˜¯ <code>C:\Users\jinai\Desktop\test\src\temp\sub</code></p>
<p>æ„æ€å°±æ˜¯ç¬¦å·é“¾æ¥è‡ªå·±çš„è·¯å¾„è™½ç„¶èƒ½æ‰¾åˆ°ï¼Œä½†æ˜¯è¿è¡Œç¯å¢ƒè¿˜æ˜¯æºæ–‡ä»¶è·¯å¾„</p>
</li>
<li>
<p>æ–‡ä»¶æŸ¥æ‰¾è§„åˆ™</p>
<ul>
<li>å¦‚æœç¡®å®šæ˜¯æ–‡ä»¶æ¨¡å—ï¼Œè·¯å¾„æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„<code>require('./module')</code> ï¼Œå¦‚æœæœ‰ç›¸åº”çš„æ–‡ä»¶åç›´æ¥åŒ¹é…ï¼ŒåŠ è½½è¯¥æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¼šå°è¯•<code>.js</code> ,<code>.ts</code>,<code>.json</code>,<code>.node</code>ç­‰ç­‰åç¼€åçš„æ–‡ä»¶</li>
<li>å¦‚æœæ˜¯ç›®å½•æ¨¡å—ï¼Œä¼šå…ˆæŸ¥æ‰¾ç›®å½•ä¸‹çš„<code>package.json</code>æ–‡ä»¶ï¼Œæ ¹æ®<code>main</code>å­—æ®µæŒ‡å®šçš„æ–‡ä»¶åè¿›è¡ŒåŠ è½½ï¼Œå¦‚æœæ²¡æœ‰<code>package.json</code>æˆ–è€…<code>package.json</code>æ–‡ä»¶ä¸­æ²¡æœ‰<code>main</code>å­—æ®µï¼Œä¼šå°è¯•åŠ è½½ç›®å½•ä¸‹çš„<code>index.js</code>æˆ–è€…<code>index.node</code>æ–‡ä»¶</li>
<li>å¦‚æœæ˜¯å†…ç½®æ¨¡å—ï¼Œæ¯”æ–¹è¯´<code>fs</code>,<code>os</code>,<code>http</code>ç­‰ï¼Œåˆ™ç›´æ¥è¿”å›æ¨¡å—ï¼Œä¸è¿›è¡Œæ–‡ä»¶æŸ¥æ‰¾</li>
<li>node_modulesæŸ¥æ‰¾ï¼Œå¦‚æœä¸Šè¿°æ¨¡å—éƒ½æœªèƒ½è§£ææ¨¡å—ï¼Œä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹çš„çˆ¶ç›®å½•ä¸­æŸ¥æ‰¾<code>node_modules</code>æ–‡ä»¶å¤¹ï¼Œå¹¶å°è¯•åœ¨å…¶ä¸­æŸ¥æ‰¾æ¨¡å—ã€‚è¿™ä¸€è¿‡ç¨‹ä¼šä¸€ç›´å‘ä¸Šé€’å½’è‡³æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Œè¿™ä¹ˆè®¾è®¡çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ</h2>
<p>pnpm ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™æ ·çš„è®¾è®¡ï¼Œæ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¼ ç»ŸåŒ…ç®¡ç†å™¨ï¼ˆå¦‚ npmã€Yarnï¼‰åœ¨<strong>ç£ç›˜å ç”¨ã€å®‰è£…é€Ÿåº¦ã€ä¾èµ–ä¸€è‡´æ€§ã€å®‰å…¨æ€§</strong>ç­‰æ–¹é¢é•¿æœŸå­˜åœ¨çš„é—®é¢˜ã€‚</p>
<p>å„ç§åŒ…ç®¡ç†å·¥å…·ä¹Ÿåœ¨äº’ç›¸å­¦ä¹ ï¼Œå¯èƒ½npmã€yarnå·²ç»è§£å†³äº†å…¶ä¸­çš„ä¸€äº›é—®é¢˜</p>
<p>è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>é‡å¤ä¸‹è½½ä¸ç£ç›˜æµªè´¹</strong></p>
<p>å¤šä¸ªé¡¹ç›®ä½¿ç”¨åŒä¸€ä¸ªåŒ…ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦å¤åˆ¶ä¸€ä»½å®Œæ•´çš„åŒ…åˆ°è‡ªå·±é¡¹ç›®ä¸­çš„<code>node_modules</code>ä¸­</p>
</li>
<li>
<p><strong>å®‰è£…é€Ÿåº¦æ…¢</strong></p>
<p>æ¯æ¬¡ <code>npm install</code> éƒ½è¦å¤§é‡æ–‡ä»¶å¤åˆ¶ã€è§£å‹ã€å†™å…¥ç£ç›˜</p>
</li>
<li>
<p><strong>åµŒå¥—ä¾èµ–åœ°ç‹±</strong></p>
<p>åœ¨npm v2ä¸­ï¼Œå®Œå…¨åµŒå¥—ï¼Œè·¯å¾„è¶…é•¿ï¼ˆWindows è·¯å¾„é•¿åº¦é™åˆ¶å¸¸è¢«è§¦å‘ï¼‰</p>
<p>npm v3+ / Yarnï¼šæ‰å¹³åŒ–ä½†æœ‰ä¾èµ–é£é™©ï¼ˆé¡¹ç›®èƒ½ require æœªå£°æ˜çš„ä¾èµ–ï¼‰</p>
</li>
<li>
<p><strong>ä¾èµ–ä¸ä¸€è‡´</strong></p>
<p>å› ä¸ºæ‰å¹³åŒ–ï¼ŒA ä¾èµ– Bï¼ŒB ä¾èµ– Cï¼Œç»“æœ A èƒ½ç›´æ¥ <code>require('C')</code>ï¼Œå³ä½¿æ²¡å£°æ˜</p>
<p>è¿™ç§é—®é¢˜å°±å¯èƒ½å¯¼è‡´æœ¬åœ°èƒ½è·‘èµ·æ¥ï¼Œä½†æ˜¯CIä¼šæŠ¥é”™</p>
</li>
<li>
<p><strong>ç¼“å­˜æœºåˆ¶å¼±</strong></p>
<p>æ— æ³•è·¨é¡¹ç›®å…±äº«å·²è§£å‹æ–‡ä»¶</p>
<p>æ¯æ¬¡ä»éœ€è§£å‹åˆ°é¡¹ç›®ç›®å½•</p>
</li>
</ol>
<p>åŸºäºä»¥ä¸Šè¿™äº›é—®é¢˜ï¼Œpnpmæ‰ä¼šé‡‡ç”¨ç°é˜¶æ®µçš„æ¨¡å¼ï¼Œæ¥å®ç°<strong>éš”ç¦»ï¼Œå¤ç”¨ä»¥åŠç¡®å®šæ€§</strong></p>






























<table><thead><tr><th>åŸåˆ™</th><th>å®ç°æ–¹å¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>å•ä¸€äº‹å®æºï¼ˆSingle Source of Truthï¼‰</strong></td><td>æ‰€æœ‰åŒ…æ–‡ä»¶åªå­˜ä¸€ä»½åœ¨å…¨å±€</td><td>æ¶ˆé™¤é‡å¤</td></tr><tr><td><strong>ä¾èµ–ä¸¥æ ¼éš”ç¦»</strong></td><td>æ¯ä¸ªåŒ…åªèƒ½è®¿é—®è‡ªå·±å£°æ˜çš„ä¾èµ–</td><td>æœç»ç›´æ¥ä½¿ç”¨é—´æ¥ä¾èµ–</td></tr><tr><td><strong>å®‰è£…å³é“¾æ¥ï¼ˆLink, not Copyï¼‰</strong></td><td>ä½¿ç”¨ç¡¬é“¾æ¥/ç¬¦å·é“¾æ¥ä»£æ›¿æ–‡ä»¶å¤åˆ¶</td><td>å®‰è£…å¿«ã€çœç©ºé—´</td></tr><tr><td><strong>ç¡®å®šæ€§ç»“æ„</strong></td><td><code>node_modules</code> ç»“æ„ç”± lockfile å”¯ä¸€å†³å®š</td><td>å¯é‡ç°æ„å»º</td></tr></tbody></table>
<p>è®¾è®¡ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>èŠ‚çœç£ç›˜ç©ºé—´</p>
<p>æ¯”æ–¹è¯´ä½ æœ¬åœ°æœ‰50ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°<code>react@18.2.0</code> è¿™ä¸ªä¾èµ–</p>
<p>å‡è®¾ä¸€ä¸ªreactåŒ…æœ‰5Mï¼Œé‚£ä¹ˆä½¿ç”¨npmå°±éœ€è¦300Må·¦å³çš„ç©ºé—´ï¼Œpnpmåªéœ€è¦å…¨å±€å­˜ä¸€ä»½ï¼Œåªéœ€è¦5Mçš„ç©ºé—´ï¼Œä¹‹åçš„é¡¹ç›®ä¸­reusedå³å¯ï¼ˆå‰ææ˜¯åœ¨ä¸€ä¸ªæ ¹ç›®å½•ç£ç›˜ä¸­ï¼‰</p>
</li>
<li>
<p>å®‰è£…é€Ÿåº¦å¿«</p>
<p>ç¬¬ä¸€æ¬¡å®‰è£…ä¸npmé€Ÿåº¦å·®ä¸å¤šï¼Œå› ä¸ºéƒ½éœ€è¦è¿œç¨‹ä¸‹è½½</p>
<p>ç¬¬äºŒæ¬¡å®‰è£…ï¼Œpnpmä¼šç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜</p>
</li>
<li>
<p>æœç»ä½¿ç”¨é—´æ¥ä¾èµ–</p>
<p>åœ¨ pnpm ä¸­ï¼Œä½ çš„ä»£ç  <strong>åªèƒ½ require è‡ªå·± package.json ä¸­å£°æ˜çš„ä¾èµ–</strong></p>
<p>å³ä½¿æŸä¸ªé—´æ¥ä¾èµ–ï¼ˆå¦‚ <code>mocha</code> ä¾èµ– <code>debug</code>ï¼‰ï¼Œä½ ä¹Ÿ<strong>ä¸èƒ½ç›´æ¥ <code>require('debug')</code></strong> ï¼Œé™¤éæ˜¾å¼å®‰è£…</p>
</li>
<li>
<p>æ›´å®‰å…¨çš„ä¾èµ–è§£æ</p>
<ul>
<li>æ¯ä¸ªåŒ…çš„ä¾èµ–æ ‘éƒ½æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œä¸åŒç‰ˆæœ¬çš„åŒä¸€ä¸ªåŒ…ï¼ˆå¦‚ <code>lodash@4.17.0</code> å’Œ <code>lodash@4.17.21</code>ï¼‰ä¸ä¼šäº’ç›¸æ±¡æŸ“ã€‚</li>
</ul>

<ul>
<li>å³ä½¿ä¸‹è½½æºè¢«é»‘ï¼Œæ ¹æ®æœ¬åœ°çš„lockæ–‡ä»¶ä¹Ÿå¯ä»¥ç¡®ä¿æ„å»ºé¡¹ç›®å¯é‡ç°</li>
<li>ä½¿ç”¨å†…å®¹å“ˆå¸Œ + integrity æ ¡éªŒå¯ä»¥é˜²æ­¢ç£ç›˜ç¼“å­˜ç¯¡æ”¹</li>
</ul>
</li>
<li>
<p>é«˜æ•ˆçš„ç¼“å­˜ä¸æ¸…ç†</p>
<p><code>pnpm store prune</code>ï¼šè‡ªåŠ¨åˆ é™¤<strong>æ²¡æœ‰ä»»ä½•é¡¹ç›®å¼•ç”¨</strong>çš„åŒ…ï¼Œå®‰å…¨é‡Šæ”¾ç©ºé—´ã€‚</p>
<p>Docker æ„å»ºä¸­åªéœ€ç¼“å­˜ <code>%LOCALAPPDATA%\pnpm\store</code>ï¼Œå³å¯åŠ é€Ÿåç»­æ„å»ºã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">æ³¨æ„äº‹é¡¹</h2>
<p>ç”±äºpnpmä¼šæ”¹åŠ¨node_modulesç›®å½•ç»“æ„ï¼Œä½¿å¾—æ¯ä¸ªåŒ…åªèƒ½ä½¿ç”¨ç›´æ¥ä¾èµ–ï¼Œè€Œä¸èƒ½ä½¿ç”¨é—´æ¥ä¾èµ–ï¼Œå› æ­¤ï¼Œå¦‚æœä½¿ç”¨pnpmå®‰è£…çš„åŒ…ä¸­åŒ…å«é—´æ¥ä¾èµ–ï¼Œåˆ™ä¼šå‡ºç°é—®é¢˜ï¼Œç”±äºpnpmè¶…é«˜çš„å®‰è£…æ•ˆç‡ï¼Œè¶Šæ¥è¶Šå¤šçš„åŒ…å¼€å§‹ä¿®æ­£ä¹‹å‰çš„é—´æ¥ä¾èµ–ä»£ç ã€‚</p>
<p>å…¶å®å¹¶ä¸æ˜¯pnpmè¿™ä¸ªåŒ…ç®¡ç†å·¥å…·çš„æ³¨æ„äº‹é¡¹</p>
<p>ä¸€ä¸ªå¤§çš„é¡¹ç›®å·¥ç¨‹ä¸­æœ‰å¯èƒ½ä¾èµ–å¾ˆå¤šçš„åŒ…ï¼Œè¿™äº›åŒ…é‡Œé¢æœ‰å¯èƒ½ä½¿ç”¨ä¸è§„èŒƒï¼Œè¿™äº›åŒ…å†…éƒ¨æœ‰å¯èƒ½ç›´æ¥å¼•ç”¨äº†é—´æ¥ä¾èµ–</p>
<p>Aä¾èµ–äº†Bï¼ŒBä¾èµ–äº†C</p>
<p>æœ‰å¯èƒ½åœ¨Aä¸­ç›´æ¥ä½¿ç”¨C</p>
<p>è¿™å®é™…ä¸Šæ˜¯åŒ…çš„å†…éƒ¨ä»£ç ä¸è§„èŒƒé€ æˆçš„</p>
<p>ç”šè‡³æœ‰å¯èƒ½å‡ºç°ç›¸å¯¹è·¯å¾„ <code>./node_modules/xxx</code> è¿™æ ·å­ï¼Œæ›´ä¸è§„èŒƒäº†</p>
<p>å®é™…ä¸Šæ˜¯è¿™äº›ç¬¬ä¸‰æ–¹åŒ…çš„ä¸è§„èŒƒï¼Œæ‰€ä»¥é€ æˆäº†pnpmä½¿ç”¨èµ·æ¥éœ€è¦æ³¨æ„ï¼Œå› ä¸ºå¾ˆå¤šå¤§çš„ç¬¬ä¸‰æ–¹ä¾èµ–æœ‰å¯èƒ½æ”¹é€ èµ·æ¥æ²¡æœ‰é‚£ä¹ˆå¥½æ”¹é€ ï¼Œå†…éƒ¨ä»£ç ä¾èµ–å±‚çº§è¿‡æ·±ç­‰ç­‰åŸå› é€ æˆçš„</p>
<p>æ‰€ä»¥ä½¿ç”¨pnpmè¿™ä¸ªç®¡ç†å·¥å…·è¿˜æ˜¯éœ€è¦è°¨æ…ä½¿ç”¨</p>
<p>æ„Ÿè°¢è§‚çœ‹æœ¬ç¯‡æ–‡ç« ï¼Œæœ‰ä»€ä¹ˆå†™çš„ä¸å¥½çš„åœ°æ–¹è¿˜è¯·æŒ‡å‡ºï¼Œè°¢è°¢~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘é¡¶ç©å®¶å¿…å¤‡ï¼ç”¨ React+TS æ‰“é€ å¤šè·¯ç›´æ’­ç›‘æ§ï¼ŒåŒæ—¶çœ‹ N ä¸ªä¸»æ’­å­¦é˜µå®¹]]></title>    <link>https://juejin.cn/post/7576124206397571082</link>    <guid>https://juejin.cn/post/7576124206397571082</guid>    <pubDate>2025-11-24T12:39:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576124206397571082" data-draft-id="7576124206397276170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘é¡¶ç©å®¶å¿…å¤‡ï¼ç”¨ React+TS æ‰“é€ å¤šè·¯ç›´æ’­ç›‘æ§ï¼ŒåŒæ—¶çœ‹ N ä¸ªä¸»æ’­å­¦é˜µå®¹"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2025-11-24T12:39:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Schuyler2025"/> <meta itemprop="url" content="https://juejin.cn/user/605198468525913"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘é¡¶ç©å®¶å¿…å¤‡ï¼ç”¨ React+TS æ‰“é€ å¤šè·¯ç›´æ’­ç›‘æ§ï¼ŒåŒæ—¶çœ‹ N ä¸ªä¸»æ’­å­¦é˜µå®¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/605198468525913/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Schuyler2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T12:39:24.000Z" title="Mon Nov 24 2025 12:39:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®ï¼Ÿ</h2>
<blockquote>
<p>ä½ æ˜¯å¦ä¹Ÿæœ‰è¿‡è¿™ç§å›°æ‰°ï¼Ÿç©äº‘é¡¶ä¹‹å¼ˆæƒ³å­¦ä¹ ä¸åŒä¸»æ’­çš„é˜µå®¹ï¼Œæ‰“å¼€ 5 ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼Œåˆ‡æ¥åˆ‡å»é”™è¿‡å…³é”®æ“ä½œğŸ˜‘ï¼›æƒ³çœ‹æ¯”èµ›å¤šè·¯è§£è¯´ï¼Œæ¥å›åˆ‡æ¢ç›´æ’­é—´å¿ƒæ€çˆ†ç‚¸â€¦ğŸ™„ä¸å…¶å¿å—æ ‡ç­¾é¡µåœ°ç‹±ï¼Œä¸å¦‚è‡ªå·±åŠ¨æ‰‹ï¼ğŸ› ï¸ä»Šå¤©ç”¨ React+TypeScript+Node.jsï¼ŒèŠ± 1 å°æ—¶æ­å»ºä¸€ä¸ªã€Œå¤šè·¯ç›´æ’­ç›‘æ§å·¥å…·ã€ï¼Œæ”¯æŒè™ç‰™ / æ–—é±¼å¹³å°ï¼ŒåŒå±è§‚çœ‹ã€è‡ªç”±é™éŸ³ã€çµæ´»å¸ƒå±€ï¼Œå½»åº•è§£å†³å¤šç›´æ’­åŒæ—¶çœ‹çš„ç—›ç‚¹ï½ğŸ‘ï¸</p>
</blockquote>
<p>è¿™ä¸ªé¡¹ç›®ä¸ä»…èƒ½è§£å†³äº†å®é™…éœ€æ±‚ï¼Œè¿˜æˆä¸ºäº†å­¦ä¹ Reactçš„ç»ä½³å®è·µã€‚ä»Šå¤©å°±æ¥åˆ†äº«è¿™ä¸ªé¡¹ç›®çš„å®Œæ•´å¼€å‘è¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c48f481038b43d8b0975e036affaeb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764641025&amp;x-signature=qmZ7rxlGiSFbg6Gyl%2FLJz6q1j2E%3D" alt="ominiviewer2.gif" loading="lazy"/></p>
<h3 data-id="heading-1">ä½ èƒ½å­¦åˆ°ä»€ä¹ˆ</h3>
<p>âœ…ï¸ è™ç‰™/æ–—é±¼ç›´æ’­æºè§£æ<br/>
âœ…ï¸ å¤šå¸ƒå±€åˆ‡æ¢ <br/>
âœ…ï¸ æœ¬åœ°å¿«é€Ÿéƒ¨ç½² <br/>
âœ…ï¸ å®Œæ•´æºç  <br/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e62d2342cbf4b4e936c776c18faf721~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2NodXlsZXIyMDI1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764641025&amp;x-signature=qPPU1jPFsf3mY82132nU%2BCrU03Y%3D" alt="ominiviewer6.gif" loading="lazy"/></p>
<h2 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-3">1. ç›´æ’­æµå¡ç‰‡ç»„ä»¶è®¾è®¡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// StreamTile.tsx - ç›´æ’­æµå¡ç‰‡ç»„ä»¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">StreamTileProps</span> {
  <span class="hljs-attr">stream</span>: <span class="hljs-title class_">StreamSource</span>;
  <span class="hljs-attr">onRemove</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">onToggleMute</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">StreamTile</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">StreamTileProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ 
  stream, 
  onRemove, 
  onToggleMute 
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [hasError, setHasError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"stream-tile"</span>&gt;</span>
      {/* è§†é¢‘æ’­æ”¾åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">video</span> 
        <span class="hljs-attr">src</span>=<span class="hljs-string">{stream.url}</span>
        <span class="hljs-attr">muted</span>=<span class="hljs-string">{stream.isMuted}</span>
        <span class="hljs-attr">onLoadedData</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsLoading(false)}
        onError={() =&gt; setHasError(true)}
      /&gt;
      
      {/* æ§åˆ¶å·¥å…·æ  */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"controls"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onToggleMute(stream.id)}&gt;
          {stream.isMuted ? 'ğŸ”‡' : 'ğŸ”Š'}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onRemove(stream.id)}&gt;âŒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-4">2. å¤šå¸ƒå±€ç½‘æ ¼ç³»ç»Ÿ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¸ƒå±€æšä¸¾å®šä¹‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">GridLayout</span> {
  <span class="hljs-title class_">Single</span> = <span class="hljs-string">'1x1'</span>,
  <span class="hljs-title class_">Dual</span> = <span class="hljs-string">'2x1'</span>, 
  <span class="hljs-title class_">Triple</span> = <span class="hljs-string">'3x1'</span>,
  <span class="hljs-title class_">Quad</span> = <span class="hljs-string">'2x2'</span>,
  <span class="hljs-title class_">Hex</span> = <span class="hljs-string">'3x2'</span>
}

<span class="hljs-comment">// åŠ¨æ€ç½‘æ ¼ç±»åç”Ÿæˆ</span>
<span class="hljs-keyword">const</span> getGridClass = (<span class="hljs-attr">layout</span>: <span class="hljs-title class_">GridLayout</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> gridMap = {
    [<span class="hljs-title class_">GridLayout</span>.<span class="hljs-property">Single</span>]: <span class="hljs-string">'grid-cols-1 grid-rows-1'</span>,
    [<span class="hljs-title class_">GridLayout</span>.<span class="hljs-property">Dual</span>]: <span class="hljs-string">'grid-cols-2 grid-rows-1'</span>,
    [<span class="hljs-title class_">GridLayout</span>.<span class="hljs-property">Triple</span>]: <span class="hljs-string">'grid-cols-3 grid-rows-1'</span>,
    [<span class="hljs-title class_">GridLayout</span>.<span class="hljs-property">Quad</span>]: <span class="hljs-string">'grid-cols-2 grid-rows-2'</span>,
    [<span class="hljs-title class_">GridLayout</span>.<span class="hljs-property">Hex</span>]: <span class="hljs-string">'grid-cols-3 grid-rows-2'</span>
  };
  <span class="hljs-keyword">return</span> gridMap[layout];
};
</code></pre>
<h3 data-id="heading-5">3. å¤šå¹³å°ç›´æ’­æºæ™ºèƒ½å¤„ç†</h3>
<p>â“ é—®é¢˜ï¼šå¦‚ä½•å°†ç”¨æˆ·è¾“å…¥çš„ç›´æ’­å¹³å°URLï¼ˆå¦‚è™ç‰™ã€æ–—é±¼ç›´æ’­é—´é“¾æ¥ï¼‰è½¬æ¢ä¸ºå¯ç›´æ¥æ’­æ”¾çš„æµåª’ä½“åœ°å€ï¼Ÿ</p>
<ul>
<li>ä¸åŒå¹³å°ï¼ˆè™ç‰™ã€æ–—é±¼ï¼‰æœ‰ä¸åŒçš„è§£æè§„åˆ™å’ŒAPIæ¥å£</li>
<li>éœ€è¦å¤„ç†å¤šç§æµåª’ä½“æ ¼å¼ï¼ˆFLVã€HLS/m3u8ï¼‰</li>
<li>éœ€è¦æä¾›å¤šç§é“¾æ¥é€‰é¡¹ä»¥åº”å¯¹ä¸åŒç½‘ç»œç¯å¢ƒ</li>
</ul>
<p>ğŸ’¡ æ€è·¯ï¼šåˆ†å±‚è§£æä¸ä¼˜å…ˆçº§ç­–ç•¥</p>
<p>ğŸ”§ æ ¸å¿ƒä»£ç ï¼š</p>
<h4 data-id="heading-6">æ™ºèƒ½è¯†åˆ«ä¸åˆ†æµ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå¯ç›´æ¥æ’­æ”¾çš„é“¾æ¥</span>
<span class="hljs-keyword">const</span> isDirectStream = customUrl.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.m3u8'</span>) ||
                       customUrl.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.flv'</span>) ||
                       customUrl.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'flvjs'</span>);
</code></pre>
<p>å¦‚æœæ˜¯ç›´æ¥å¯æ’­æ”¾çš„é“¾æ¥ï¼ˆåŒ…å«.m3u8ã€.flvç­‰ï¼‰ï¼Œç›´æ¥ä½¿ç”¨ï¼›å¦åˆ™è°ƒç”¨åç«¯APIè§£æã€‚</p>
<h5 data-id="heading-7">åç«¯ API è§£æ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è°ƒç”¨æœ¬åœ°è§£ææœåŠ¡</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://localhost:3001/api/parse-url'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">headers</span>: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">url</span>: customUrl }),
});

</code></pre>
<p>å°†å¤æ‚çš„è§£æé€»è¾‘æ”¾åœ¨åç«¯ï¼Œå‰ç«¯åªè´Ÿè´£å±•ç¤ºå’Œé€‰æ‹©ã€‚</p>
<h4 data-id="heading-8">å¤šå±‚çº§é“¾æ¥ä¼˜å…ˆçº§ç­–ç•¥</h4>
<p>æŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ”¶é›†å€™é€‰é“¾æ¥ï¼š</p>
<p><strong>ç¬¬ä¸€ä¼˜å…ˆçº§</strong>ï¼šè™ç‰™æ ¼å¼é“¾æ¥</p>
<ul>
<li>FLVæ ¼å¼é“¾æ¥ï¼ˆé«˜æ¸…ã€ç¨³å®šï¼‰</li>
<li>HLSæ ¼å¼é“¾æ¥ï¼ˆå…¼å®¹æ€§å¥½ï¼‰</li>
</ul>
<p><strong>ç¬¬äºŒä¼˜å…ˆçº§</strong>ï¼šæ–—é±¼æ ¼å¼é“¾æ¥</p>
<ul>
<li>PCç«¯é“¾æ¥</li>
<li>ç§»åŠ¨ç«¯é“¾æ¥</li>
</ul>
<p><strong>ç¬¬ä¸‰ä¼˜å…ˆçº§</strong>ï¼šCDNé“¾æ¥</p>
<ul>
<li>m3u8 CDNé“¾æ¥</li>
<li>FLV CDNé“¾æ¥</li>
</ul>
<p><strong>ç¬¬å››ä¼˜å…ˆçº§</strong>ï¼šå…¶ä»–é“¾æ¥</p>
<pre><code class="hljs language-typescript" lang="typescript">  <span class="hljs-comment">// é“¾æ¥ä¼˜å…ˆçº§æ”¶é›†å™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">urlCandidates</span>: <span class="hljs-built_in">string</span>[] = [];

<span class="hljs-comment">// è™ç‰™FLVé“¾æ¥ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
<span class="hljs-keyword">if</span> (parsedData.<span class="hljs-property">links</span>?.<span class="hljs-property">flv</span> &amp;&amp; <span class="hljs-keyword">typeof</span> parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">flv</span> === <span class="hljs-string">'object'</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">flv</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> url === <span class="hljs-string">'string'</span>) urlCandidates.<span class="hljs-title function_">push</span>(url);
  });
}

<span class="hljs-comment">// è™ç‰™HLSé“¾æ¥</span>
<span class="hljs-keyword">if</span> (parsedData.<span class="hljs-property">links</span>?.<span class="hljs-property">hls</span> &amp;&amp; <span class="hljs-keyword">typeof</span> parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">hls</span> === <span class="hljs-string">'object'</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">hls</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> url === <span class="hljs-string">'string'</span>) urlCandidates.<span class="hljs-title function_">push</span>(url);
  });
}

<span class="hljs-comment">// æ–—é±¼PCé“¾æ¥</span>
<span class="hljs-keyword">if</span> (parsedData.<span class="hljs-property">links</span>?.<span class="hljs-property">pc</span> &amp;&amp; <span class="hljs-keyword">typeof</span> parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">pc</span> === <span class="hljs-string">'string'</span>) {
  urlCandidates.<span class="hljs-title function_">push</span>(parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">pc</span>);
}

<span class="hljs-comment">// CDNé“¾æ¥ï¼ˆç½‘ç»œä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">if</span> (parsedData.<span class="hljs-property">links</span>?.<span class="hljs-property">cdnLinks</span>?.<span class="hljs-property">m3u8</span> &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">cdnLinks</span>.<span class="hljs-property">m3u8</span>)) {
  parsedData.<span class="hljs-property">links</span>.<span class="hljs-property">cdnLinks</span>.<span class="hljs-property">m3u8</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> url === <span class="hljs-string">'string'</span>) urlCandidates.<span class="hljs-title function_">push</span>(url);
  });
}      
</code></pre>
<p>æŒ‰ä¼˜å…ˆçº§é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨é“¾æ¥ï¼Œç¡®ä¿æœ€ä½³æ’­æ”¾ä½“éªŒã€‚</p>
<h2 data-id="heading-9">æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-10">éš¾ç‚¹ï¼šFLVæ ¼å¼ç›´æ’­æµæ’­æ”¾</h3>
<h3 data-id="heading-11">æ ¸å¿ƒéš¾ç‚¹ï¼šHTML5ä¸æ”¯æŒFLVæ ¼å¼ï¼Œæ€ä¹ˆæ’­æ”¾ç›´æ’­æµï¼Ÿ</h3>
<p>â“ é—®é¢˜ï¼šè™ç‰™/æ–—é±¼ç­‰å¹³å°çš„ç›´æ’­æµå¤šä¸ºFLVæ ¼å¼ï¼Œè€ŒåŸç”Ÿvideoæ ‡ç­¾åªæ”¯æŒMP4/HLVï¼Œç›´æ¥æ’­æ”¾ä¼šæŠ¥é”™ã€‚<br/>
ğŸ’¡ æ€è·¯ï¼šä½¿ç”¨flv.jsåº“è§£æFLVæµï¼Œå°†å…¶è½¬æˆvideoæ ‡ç­¾å¯è¯†åˆ«çš„æ ¼å¼ï¼ŒåŒæ—¶å¤„ç†åŠ è½½å¤±è´¥ã€å¡é¡¿ç­‰å¼‚å¸¸åœºæ™¯ã€‚<br/>
ğŸ”§ æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> flvjs <span class="hljs-keyword">from</span> <span class="hljs-string">'flv.js'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">StreamPlayer</span> = (<span class="hljs-params">{ url }</span>) =&gt; {
  <span class="hljs-keyword">const</span> videoRef = useRef&lt;<span class="hljs-title class_">HTMLVideoElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> playerRef = useRef&lt;flvjs.<span class="hljs-property">Player</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒflv.js</span>
    <span class="hljs-keyword">if</span> (!flvjs.<span class="hljs-title function_">isSupported</span>() || !videoRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// 2. åˆ›å»ºæ’­æ”¾å™¨å®ä¾‹ï¼ˆå…³é”®é…ç½®ï¼šæ ‡è®°ä¸ºç›´æ’­æµï¼Œå¯ç”¨æ‡’åŠ è½½ï¼‰</span>
    playerRef.<span class="hljs-property">current</span> = flvjs.<span class="hljs-title function_">createPlayer</span>(
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'flv'</span>, url, <span class="hljs-attr">isLive</span>: <span class="hljs-literal">true</span> },
      { <span class="hljs-attr">lazyLoad</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">seekType</span>: <span class="hljs-string">'range'</span> }
    );

    <span class="hljs-comment">// 3. ç»‘å®šDOM+åŠ è½½æ’­æ”¾</span>
    playerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">attachMediaElement</span>(videoRef.<span class="hljs-property">current</span>);
    playerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">load</span>();
    playerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">play</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ’­æ”¾å¤±è´¥ï¼š'</span>, err));

    <span class="hljs-comment">// 4. ç›‘å¬çŠ¶æ€ï¼Œæ›´æ–°UI</span>
    playerRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">on</span>(flvjs.<span class="hljs-property">Events</span>.<span class="hljs-property">LOADING_COMPLETE</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>));

    <span class="hljs-comment">// 5. ç»„ä»¶å¸è½½æ—¶é”€æ¯æ’­æ”¾å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> playerRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">destroy</span>();
  }, [url]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"stream-player"</span>&gt;</span>
      {isLoading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"loading"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{videoRef}</span> <span class="hljs-attr">controls</span>=<span class="hljs-string">{false}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
ã€‚
</code></pre>
<p>âš ï¸ é¿å‘ç‚¹ï¼š</p>
<ol>
<li>å¼€å‘ç¯å¢ƒè·¨åŸŸï¼šåç«¯éœ€è¦é…ç½®CORSï¼Œå…è®¸å‰ç«¯è¯·æ±‚ï¼›</li>
<li>éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒWeb Workerï¼šè®¾ç½®enableWorker: falseæé«˜å…¼å®¹æ€§ï¼›</li>
<li>ç›´æ’­æµä¸­æ–­å¤„ç†ï¼šå¯æ·»åŠ é‡è¿é€»è¾‘ï¼ˆsetTimeouté‡è¯•load()ï¼‰</li>
</ol>
<h2 data-id="heading-12">å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-13">1. å…‹éš†æºç </h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/Schuyler2025/ominiview-monitor.git
<span class="hljs-built_in">cd</span> ominiview-monitor
</code></pre>
<h3 data-id="heading-14">2. å¯åŠ¨å‰ç«¯ï¼ˆReactï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">npm install  # å®‰è£…ä¾èµ–
npm run build
npm run preview
</code></pre>
<h3 data-id="heading-15">3. å¯åŠ¨åç«¯ï¼ˆNode.jsï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> server
npm install
npm start  <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
</code></pre>
<h4 data-id="heading-16">ä½¿ç”¨æ–¹æ³•ï¼š</h4>
<ol>
<li>æ‰“å¼€<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A4173%25EF%25BC%259B" target="_blank" title="http://localhost:4173%EF%BC%9B" ref="nofollow noopener noreferrer">http://localhost:4173ï¼›</a></li>
<li>å¤åˆ¶è™ç‰™/æ–—é±¼ä¸»æ’­ç›´æ’­é—´é“¾æ¥ï¼ˆæ¯”å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.huya.com%2Fxxx%25EF%25BC%2589%25EF%25BC%259B" target="_blank" title="https://www.huya.com/xxx%EF%BC%89%EF%BC%9B" ref="nofollow noopener noreferrer">www.huya.com/xxxï¼‰ï¼›</a></li>
<li>ç²˜è´´åˆ°è¾“å…¥æ¡†ï¼Œç‚¹å‡»â€œæ·»åŠ ç›´æ’­â€ï¼›</li>
<li>å³ä¸Šè§’åˆ‡æ¢å¸ƒå±€ï¼Œç‚¹å‡»ç›´æ’­å¡ç‰‡çš„ğŸ”‡/âŒæ§åˆ¶é™éŸ³/å…³é—­ã€‚</li>
</ol>
<h2 data-id="heading-17">æ€»ç»“ä¸å±•æœ›</h2>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä¸ä»…æŒæ¡äº†Reactçš„æ ¸å¿ƒæ¦‚å¿µï¼ˆç»„ä»¶åŒ–ã€çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œè¿˜æ·±å…¥ç†è§£äº†ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å®è·µã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®å€¼å¾—å­¦ï¼Ÿ</p>
<p>è§£å†³çœŸå®ç—›ç‚¹ï¼šä¸æ˜¯ä¸ºäº†å­¦ React è€Œå†™ Demoï¼Œè€Œæ˜¯çœŸçš„èƒ½æ›¿ä»£ â€œå¤šæ ‡ç­¾é¡µåˆ‡æ¢â€ï¼›</p>
<p>æŠ€æœ¯æ ˆå®ç”¨ï¼šReact Hooks+TypeScript+Node.jsï¼Œéƒ½æ˜¯å‰ç«¯é¢è¯•é«˜é¢‘æŠ€æœ¯ï¼›</p>
</blockquote>
<p><strong>æŠ€æœ¯æ”¶è·ï¼š</strong></p>
<ul>
<li>React Hooksçš„ç†Ÿç»ƒä½¿ç”¨</li>
<li>TypeScriptç±»å‹ç³»ç»Ÿè®¾è®¡</li>
<li>å·¥ç¨‹åŒ–æ„å»ºé…ç½®</li>
</ul>
<p><strong>æœªæ¥è§„åˆ’ï¼š</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ”¯æŒæ›´å¤šç›´æ’­å¹³å°ï¼ˆBç«™ã€æŠ–éŸ³ç­‰ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ·»åŠ å½•åˆ¶åŠŸèƒ½</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼€å‘æµè§ˆå™¨æ’ä»¶ç‰ˆæœ¬</li>
</ul>
<h2 data-id="heading-18">ç»™æ–°æ‰‹çš„å»ºè®®</h2>
<ol>
<li><strong>ä»å®é™…éœ€æ±‚å‡ºå‘</strong>ï¼šè§£å†³çœŸå®é—®é¢˜èƒ½è®©å­¦ä¹ æ›´æœ‰åŠ¨åŠ›</li>
<li><strong>å¾ªåºæ¸è¿›</strong>ï¼šå…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå†é€æ­¥ä¼˜åŒ–</li>
<li><strong>å–„ç”¨å·¥å…·</strong>ï¼šgemini3ã€è±†åŒ…ç­‰å·¥å…·èƒ½æå‡å¼€å‘æ•ˆç‡</li>
<li><strong>ä»£ç è§„èŒƒ</strong>ï¼šä»ä¸€å¼€å§‹å°±å…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯</li>
</ol>
<h2 data-id="heading-19">æºç åœ°å€</h2>
<p>é¡¹ç›®å·²å¼€æºï¼Œæ¬¢è¿Starå’Œè´¡çŒ®ï¼š
ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSchuyler2025%2Fominiview-monitor" target="_blank" title="https://github.com/Schuyler2025/ominiview-monitor" ref="nofollow noopener noreferrer">GitHubä»“åº“åœ°å€</a></p>
<p><em>å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï½æœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºäº¤æµï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæ·±å…¥è®¾è®¡æ¨¡å¼ã€‹å­¦ä¹ ï¼ˆ1ï¼‰â€”â€” æ·±å…¥ç†è§£OOPä¸­çš„6ç§å¯¹è±¡å…³ç³»]]></title>    <link>https://juejin.cn/post/7576155790164475955</link>    <guid>https://juejin.cn/post/7576155790164475955</guid>    <pubDate>2025-11-24T14:48:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155790164475955" data-draft-id="7575456858427211822" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæ·±å…¥è®¾è®¡æ¨¡å¼ã€‹å­¦ä¹ ï¼ˆ1ï¼‰â€”â€” æ·±å…¥ç†è§£OOPä¸­çš„6ç§å¯¹è±¡å…³ç³»"/> <meta itemprop="keywords" content="è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-24T14:48:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SakuraOnTheWay"/> <meta itemprop="url" content="https://juejin.cn/user/3035112839343709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæ·±å…¥è®¾è®¡æ¨¡å¼ã€‹å­¦ä¹ ï¼ˆ1ï¼‰â€”â€” æ·±å…¥ç†è§£OOPä¸­çš„6ç§å¯¹è±¡å…³ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035112839343709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SakuraOnTheWay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T14:48:21.000Z" title="Mon Nov 24 2025 14:48:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰ç«¯ç»„ä»¶å¼€å‘ä¸­ï¼Œæˆ‘å‘ç°å¾ˆå¤šè®¾è®¡é—®é¢˜çš„æ ¹æºåœ¨äº<strong>å¯¹å¯¹è±¡å…³ç³»ç†è§£ä¸å¤Ÿæ·±å…¥</strong>ã€‚</p>
<p>ä¸€ä¸ªç»„ä»¶åº”è¯¥<strong>ä¾èµ–</strong>è¿˜æ˜¯<strong>å…³è”</strong>æŸä¸ªæœåŠ¡ï¼Ÿå­ç»„ä»¶è¯¥ç”¨<strong>èšåˆ</strong>è¿˜æ˜¯<strong>ç»„åˆ</strong>ï¼Ÿè¿™äº›çœ‹ä¼¼ç®€å•çš„é€‰æ‹©ï¼Œç›´æ¥å½±å“äº†ç»„ä»¶çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p>
<p>æ·±å…¥ç†è§£ OOP ä¸­çš„ 6 ç§å¯¹è±¡å…³ç³»ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ul>
<li>è®¾è®¡å‡ºç»“æ„æ¸…æ™°ã€èŒè´£æ˜ç¡®çš„ç»„ä»¶</li>
<li>å†™å‡ºæ˜“äºæµ‹è¯•å’Œé‡æ„çš„ä»£ç </li>
<li>å‡†ç¡®åˆ¤æ–­ä½•æ—¶è¯¥è§£è€¦ã€ä½•æ—¶è¯¥ç»„åˆ</li>
<li>çœ‹æ‡‚å„ç§è®¾è®¡æ¨¡å¼èƒŒåçš„åŸç†</li>
</ul>
<h2 data-id="heading-1">æ¦‚è¿°</h2>
<p>å¯¹è±¡å…³ç³»æŒ‰ç…§è€¦åˆå¼ºåº¦ä»å¼±åˆ°å¼ºæ’åˆ—ï¼š<strong>ä¾èµ– &lt; å…³è” &lt; èšåˆ &lt; ç»„åˆ &lt; å®ç° &lt; ç»§æ‰¿</strong></p>
<p>å…³ç³»å¯¹æ¯”æ€»è§ˆè¡¨å¦‚ä¸‹ï¼š</p>





























































<table><thead><tr><th>å…³ç³»ç±»å‹</th><th>UMLç¬¦å·</th><th>è€¦åˆå¼ºåº¦</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>å…³é”®è¯</th><th>å‰ç«¯å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>ä¾èµ–</strong></td><td><code>- - -&gt;</code></td><td>â­ æœ€å¼±</td><td>ä¸´æ—¶ä½¿ç”¨</td><td>use</td><td>å‡½æ•°å‚æ•°ã€å·¥å…·æ–¹æ³•è°ƒç”¨</td></tr><tr><td><strong>å…³è”</strong></td><td><code>â€”&gt;</code></td><td>â­â­</td><td>æŒä¹…å¼•ç”¨</td><td>has-a</td><td>ç»„ä»¶æŒæœ‰serviceã€Storeå¼•ç”¨</td></tr><tr><td><strong>èšåˆ</strong></td><td><code>â—‡â€”&gt;</code></td><td>â­â­â­</td><td>AåŒ…å«Bï¼ŒBç‹¬ç«‹</td><td>has-a</td><td>è´­ç‰©è½¦åŒ…å«å•†å“ã€æ’­æ”¾åˆ—è¡¨åŒ…å«æ­Œæ›²</td></tr><tr><td><strong>ç»„åˆ</strong></td><td><code>â—†â€”&gt;</code></td><td>â­â­â­â­</td><td>AåŒ…å«Bï¼ŒBä¾èµ–A</td><td>contains</td><td>DOMèŠ‚ç‚¹åŒ…å«å­èŠ‚ç‚¹</td></tr><tr><td><strong>å®ç°</strong></td><td><code>- - -â–·</code></td><td>â­â­â­â­â­</td><td>å¥‘çº¦å…³ç³»</td><td>implements</td><td>Storageå®ç°ã€æ”¯ä»˜ç½‘å…³å®ç°</td></tr><tr><td><strong>ç»§æ‰¿</strong></td><td><code>â€”â–·</code></td><td>â­â­â­â­â­â­ æœ€å¼º</td><td>ä»£ç å¤ç”¨</td><td>is-a</td><td>å­ç±»extendsçˆ¶ç±»</td></tr></tbody></table>
<h2 data-id="heading-2">ä¾èµ– (Dependency)</h2>
<h3 data-id="heading-3">å®šä¹‰</h3>
<p><strong>æœ€å¼±çš„å…³ç³»</strong>ï¼Œè¡¨ç¤ºä¸€ä¸ªç±»ä½¿ç”¨å¦ä¸€ä¸ªç±»æä¾›çš„<strong>åŠŸèƒ½/æ–¹æ³•</strong>ã€‚å¦‚æœBä¿®æ”¹å¯èƒ½å½±å“Aï¼Œåˆ™Aä¾èµ–äºBã€‚è¿™æ˜¯ä¸€ç§<strong>ä¸´æ—¶æ€§ã€ä½¿ç”¨æ€§</strong>çš„å…³ç³»ã€‚</p>
<h3 data-id="heading-4">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8df3280367624bf2be97a92dd57174c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=Ix0f35vSeXTSf%2FZ%2BisnH%2BAI7giI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¸´æ—¶å…³ç³»ï¼Œä½¿ç”¨å®Œå³ç»“æŸ</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šæœ€ä½</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼šæ–¹æ³•å‚æ•°ã€å±€éƒ¨å˜é‡ã€é™æ€æ–¹æ³•è°ƒç”¨</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"ä½¿ç”¨"Bï¼Œç”¨å®Œå³èµ°</p>
</li>
</ul>
<h3 data-id="heading-6">TypeScriptç¤ºä¾‹</h3>
<p>æƒ³è±¡ä½ åœ¨åšèœï¼š</p>
<ul>
<li>ä½ éœ€è¦ç”¨åˆ€åˆ‡èœï¼ˆä¸´æ—¶ä½¿ç”¨åˆ€çš„â€œåˆ‡â€çš„åŠŸèƒ½ï¼‰</li>
<li>åˆ‡å®Œèœï¼Œåˆ€å°±æ”¾å›å»äº†</li>
<li>ä½ ä¸æ‹¥æœ‰è¿™æŠŠåˆ€ï¼Œåªæ˜¯ä¸´æ—¶å€Ÿç”¨äº†ä¸€ä¸‹</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Chef</span> {
    <span class="hljs-comment">// Chefä¾èµ–Knife, ä¸´æ—¶ä½¿ç”¨Knifeçš„cutåŠŸèƒ½</span>
    cookDish (<span class="hljs-attr">knife</span>: <span class="hljs-title class_">Knife</span>, <span class="hljs-attr">vegetable</span>: <span class="hljs-built_in">string</span>) { <span class="hljs-comment">// âœ… ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ å…¥, âœ… æ–¹æ³•å†…åˆ›å»ºä¸´æ—¶å¯¹è±¡</span>
        knife.<span class="hljs-title function_">cut</span>(vegetable); <span class="hljs-comment">// âœ… è°ƒç”¨é™æ€æ–¹æ³• --- ä½¿ç”¨knifeçš„"åˆ‡"åŠŸèƒ½</span>
        <span class="hljs-comment">// âŒ ä¸ä½œä¸ºæˆå‘˜å˜é‡å­˜å‚¨ --- æ–¹æ³•ç»“æŸï¼Œknifeå°±æ²¡ç”¨äº†</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Knife</span> {
    cut (<span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ‡<span class="hljs-subst">${item}</span>`</span>);
    }
}

<span class="hljs-keyword">const</span> chef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chef</span>();
<span class="hljs-keyword">const</span> knife = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Knife</span>();
chef.<span class="hljs-title function_">cookDish</span>(knife, <span class="hljs-string">'èƒ¡èåœ'</span>); <span class="hljs-comment">// åˆ‡èƒ¡èåœ</span>
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ å…¥</p>
</li>
<li>
<p>âœ… æ–¹æ³•å†…åˆ›å»ºä¸´æ—¶å¯¹è±¡</p>
</li>
<li>
<p>âœ… è°ƒç”¨é™æ€æ–¹æ³•</p>
</li>
<li>
<p>âŒ ä¸ä½œä¸ºæˆå‘˜å˜é‡å­˜å‚¨</p>
</li>
</ul>
<h2 data-id="heading-7">å…³è” (Association)</h2>
<h3 data-id="heading-8">å®šä¹‰</h3>
<p>è¡¨ç¤ºç±»ä¹‹é—´æœ‰<strong>æŒä¹…çš„è¿æ¥</strong>ã€‚Aå¯¹è±¡çŸ¥é“Bå¯¹è±¡å¹¶èƒ½ä¸ä¹‹äº¤äº’ï¼Œè¿™ç§å…³ç³»ä¼šé•¿æœŸå­˜åœ¨ã€‚å…³è”å¯ä»¥è§†ä¸ºæ˜¯<strong>ä¸€ç§ç‰¹æ®Šç±»å‹çš„ä¾èµ–</strong>ï¼Œå³ä¸€ä¸ªå¯¹è±¡æ€»æ˜¯æ‹¥æœ‰è®¿é—®ä¸å…¶äº¤äº’çš„å¯¹è±¡çš„æƒé™ï¼Œè€Œç®€å•çš„ä¾èµ–å…³ç³»å¹¶ä¸ä¼šåœ¨å¯¹è±¡é—´å»ºç«‹æ°¸ä¹…æ€§çš„è”ç³»ã€‚</p>
<h3 data-id="heading-9">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b69e81aae6445a2ae92beac31741516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=C%2BSNK69o8%2Bi%2FOFA1MvJOEMerlCs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæŒä¹…å…³ç³»ï¼Œåªè¦å¯¹è±¡å­˜åœ¨å°±å­˜åœ¨</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šä¸­ç­‰</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼šæˆå‘˜å˜é‡ã€å±æ€§</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"æ‹¥æœ‰"Bçš„å¼•ç”¨ï¼Œé•¿æœŸæŒæœ‰</p>
</li>
</ul>
<h3 data-id="heading-11">TypeScriptç¤ºä¾‹</h3>
<p>ä»¥â€œå‘é€é‚®ä»¶â€ä¸ºä¾‹ï¼š</p>
<ul>
<li>éœ€è¦ä¸€ä¸ªUserç±»ï¼ˆç”¨äºå­˜å‚¨emailï¼‰å’Œä¸€ä¸ªEmailServeç±»ï¼ˆè´Ÿè´£å‘é€é‚®ä»¶ï¼‰</li>
<li>æœ‰ä¸‰ä¸ªåœºæ™¯éœ€è¦å‘é€é‚®ä»¶
<ul>
<li>ç”¨æˆ·æ³¨å†Œæ¬¢è¿é‚®ä»¶</li>
<li>ç”¨æˆ·é‡ç½®å¯†ç é€šçŸ¥é‚®ä»¶</li>
<li>æ™®é€‚æ€§çš„é€šçŸ¥é‚®ä»¶</li>
</ul>
</li>
</ul>
<p><strong>é¦–å…ˆå›é¡¾ä¸‹ã€Œä¾èµ–ã€å…³ç³»ä¸‹æˆ‘ä»¬ä¼šæ€ä¹ˆå†™ï¼Ÿ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è´Ÿè´£å‘é€é‚®ä»¶çš„æœåŠ¡ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailService</span> {
    <span class="hljs-title function_">send</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‘é€é‚®ä»¶ç»™<span class="hljs-subst">${email}</span>ï¼š<span class="hljs-subst">${content}</span>`</span>);
    }
}

<span class="hljs-comment">// ç”¨æˆ·ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> email: <span class="hljs-built_in">string</span></span>) {}
}

<span class="hljs-comment">// ä¾èµ–ä¸¾ä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserControllerWithDependency</span> {
    <span class="hljs-comment">// æ³¨å†Œç”¨æˆ·</span>
    <span class="hljs-title function_">registerUser</span>(<span class="hljs-params">user: User, emailService: EmailService</span>) {
        <span class="hljs-comment">// æ¯æ¬¡æ³¨å†Œéƒ½è¦ä¼ å…¥EmailServiceå®ä¾‹</span>
        emailService.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">'Welcome'</span>); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é‚®ä»¶</span>
    }

    <span class="hljs-comment">// é‡ç½®å¯†ç </span>
    <span class="hljs-title function_">resetPassword</span>(<span class="hljs-params">user: User, emailService: EmailService</span>) {
        <span class="hljs-comment">// è¿™é‡Œåˆä¼ ä¸€æ¬¡</span>
        emailService.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">'Reset your password'</span>); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é‚®ä»¶</span>
    }

    <span class="hljs-title function_">notify</span>(<span class="hljs-params">user: User, message: <span class="hljs-built_in">string</span>, emailService: EmailService</span>) {
        <span class="hljs-comment">// è¿™é‡Œå†ä¼ ä¸€æ¬¡</span>
        emailService.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, message); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é€šçŸ¥</span>
    }
}

<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'8888888@163.com'</span>);
<span class="hljs-keyword">const</span> emailService1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmailService</span>();
<span class="hljs-keyword">const</span> userController1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserControllerWithDependency</span>();

<span class="hljs-comment">// æ¯æ¬¡éƒ½è¦ä¼ emailServiceï¼Œå¾ˆç¹ç</span>
userController1.<span class="hljs-title function_">registerUser</span>(user1, emailService1); <span class="hljs-comment">// ä¼ 1æ¬¡</span>
userController1.<span class="hljs-title function_">resetPassword</span>(user1, emailService1); <span class="hljs-comment">// ä¼ 2æ¬¡</span>
userController1.<span class="hljs-title function_">notify</span>(user1, <span class="hljs-string">'Your profile has been updated'</span>, emailService1); <span class="hljs-comment">// ä¼ 3æ¬¡</span>

</code></pre>
<p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ã€Œå…³è”ã€æ”¹å†™</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">emailService</span>: <span class="hljs-title class_">EmailService</span>; <span class="hljs-comment">// âœ… ä½œä¸ºç±»çš„æˆå‘˜å˜é‡å­˜å‚¨</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">emailService: EmailService</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">emailService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmailService</span>(); <span class="hljs-comment">// âœ… é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥</span>
    }

    <span class="hljs-comment">// æ³¨å†Œç”¨æˆ·</span>
    <span class="hljs-title function_">registerUser</span>(<span class="hljs-params">user: User</span>) {
        <span class="hljs-comment">// âœ…  å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå†…æŒç»­ä½¿ç”¨ --- ç›´æ¥ä½¿ç”¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">emailService</span>.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">'Welcome'</span>); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é‚®ä»¶</span>
    }

    <span class="hljs-comment">// é‡ç½®å¯†ç </span>
    <span class="hljs-title function_">resetPassword</span>(<span class="hljs-params">user: User</span>) {
        <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">emailService</span>.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">'Reset your password'</span>); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é‚®ä»¶</span>
    }

    <span class="hljs-title function_">notify</span>(<span class="hljs-params">user: User, message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">emailService</span>.<span class="hljs-title function_">send</span>(user.<span class="hljs-property">email</span>, message); <span class="hljs-comment">// ä½¿ç”¨EmailServiceå‘é€é€šçŸ¥</span>
    }
}

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'12345678@163.com'</span>);
<span class="hljs-keyword">const</span> emailService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmailService</span>(); <span class="hljs-comment">// âŒ å¤–éƒ¨åˆ›å»ºï¼Œä¸ç®¡ç†è¢«å…³è”å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-comment">// æ³¨å…¥ä¸€æ¬¡ï¼ŒuserControllerçš„æ‰€æœ‰è®¿é—®éƒ½èƒ½è®¿é—®åˆ°emailService</span>
<span class="hljs-keyword">const</span> userController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserController</span>(emailService);

userController.<span class="hljs-title function_">registerUser</span>(user); <span class="hljs-comment">// æ³¨å†ŒæˆåŠŸï¼Œå‘é€æ¬¢è¿é‚®ä»¶</span>
userController.<span class="hljs-title function_">resetPassword</span>(user); <span class="hljs-comment">// é‡ç½®å¯†ç ï¼Œå‘é€é‡ç½®é‚®ä»¶</span>
userController.<span class="hljs-title function_">notify</span>(user, <span class="hljs-string">'Your profile has been updated'</span>); <span class="hljs-comment">// å‘é€é€šçŸ¥é‚®ä»¶</span>
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… ä½œä¸ºç±»çš„æˆå‘˜å˜é‡å­˜å‚¨</p>
</li>
<li>
<p>âœ… åœ¨æ„é€ å‡½æ•°ä¸­æ³¨å…¥</p>
</li>
<li>
<p>âœ… å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå†…æŒç»­ä½¿ç”¨</p>
</li>
<li>
<p>âŒ ä¸ç®¡ç†è¢«å…³è”å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</p>
</li>
</ul>
<p><strong>ç†è§£â€œä¸ç®¡ç†è¢«å…³è”å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸâ€</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> emailService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmailService</span>(); <span class="hljs-comment">// å¤–éƒ¨åˆ›å»º</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">controller1</span>: <span class="hljs-title class_">UserController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserController</span>(emailService);
<span class="hljs-keyword">let</span> <span class="hljs-attr">controller2</span>: <span class="hljs-title class_">UserController</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserController</span>(emailService); <span class="hljs-comment">// å¯ä»¥å…±äº«</span>

controller1 = <span class="hljs-literal">null</span>; <span class="hljs-comment">// controller1é”€æ¯</span>
<span class="hljs-comment">// âœ… emailServiceä¾ç„¶å­˜åœ¨ï¼Œcontroller2è¿˜èƒ½ç”¨</span>
</code></pre>
<p><strong>ç®€å•å›é¡¾ï¼šä½ èƒ½çœ‹å‡ºUserControllerä¾èµ–Userå—ï¼Ÿ</strong></p>
<h2 data-id="heading-12">èšåˆ (Aggregation)</h2>
<h3 data-id="heading-13">å®šä¹‰</h3>
<p><strong>"æ•´ä½“-éƒ¨åˆ†"å…³ç³»</strong>ï¼Œä½†éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹äºæ•´ä½“å­˜åœ¨ã€‚è¿™æ˜¯ä¸€ç§<strong>æ¾æ•£çš„åŒ…å«å…³ç³»</strong>ï¼Œç”¨äºè¡¨ç¤ºå¤šä¸ªå¯¹è±¡ä¹‹é—´çš„â€œä¸€å¯¹å¤šâ€ã€â€œå¤šå¯¹å¤šâ€æˆ–â€œæ•´ä½“å¯¹éƒ¨åˆ†â€çš„å…³ç³»ã€‚</p>
<h3 data-id="heading-14">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a39248b6ac14e299f8377597676bac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=x6rJkq32ViJ2QMlr9gB7scvvusM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-15">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šéƒ¨åˆ†å¯ç‹¬ç«‹å­˜åœ¨ï¼Œä¸éšæ•´ä½“é”€æ¯</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šä¸­ç­‰åå¼º</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼šæˆå‘˜å˜é‡ï¼Œä½†ä¸è´Ÿè´£åˆ›å»º/é”€æ¯</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"åŒ…å«"Bï¼Œä½†Bå¯ä»¥ç‹¬ç«‹å­˜åœ¨</p>
</li>
</ul>
<h3 data-id="heading-16">TypeScriptç¤ºä¾‹</h3>
<p>æƒ³è±¡ä¸€ä¸ªâ€œè´­ç‰©è½¦â€åœºæ™¯ï¼š</p>
<ol>
<li>è´­ç‰©è½¦å¯ä»¥ç®¡ç†ç€å•†å“</li>
<li>å¯ä»¥æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ï¼Œä¹Ÿå¯ä»¥åˆ é™¤è´­ç‰©è½¦é‡Œçš„å•†å“</li>
<li>è¿˜å¯ä»¥æ¸…ç©ºè´­ç‰©è½¦</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å•†å“ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> id: <span class="hljs-built_in">string</span>,
        <span class="hljs-keyword">public</span> name: <span class="hljs-built_in">string</span>,
        <span class="hljs-keyword">public</span> price: <span class="hljs-built_in">number</span>
    </span>) {}
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShoppingCart</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">products</span>: <span class="hljs-title class_">Product</span>[] = []; <span class="hljs-comment">// âœ… æ•´ä½“åŒ…å«éƒ¨åˆ† --- è´­ç‰©è½¦åŒ…å«å•†å“</span>

    <span class="hljs-comment">// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span>
    <span class="hljs-title function_">addProduct</span>(<span class="hljs-params">product: Product</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span>.<span class="hljs-title function_">push</span>(product);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ·»åŠ å•†å“<span class="hljs-subst">${product[<span class="hljs-string">'name'</span>]}</span>åˆ°è´­ç‰©è½¦`</span>);
    }

    <span class="hljs-comment">// åˆ é™¤å•†å“ä»è´­ç‰©è½¦</span>
    <span class="hljs-title function_">removeProduct</span>(<span class="hljs-params">productId: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p[<span class="hljs-string">'id'</span>] !== productId);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»è´­ç‰©è½¦åˆ é™¤å•†å“IDä¸º<span class="hljs-subst">${productId}</span>çš„å•†å“`</span>);
    }

    <span class="hljs-comment">// æ¸…ç©ºè´­ç‰©è½¦ï¼Œä½†å•†å“å¯¹è±¡ä¾ç„¶å­˜åœ¨</span>
    <span class="hljs-title function_">clearCart</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span> = [];
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è´­ç‰©è½¦å·²æ¸…ç©º'</span>);
    }
}


<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> product1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">'1'</span>, <span class="hljs-string">'Laptop'</span>, <span class="hljs-number">999</span>); <span class="hljs-comment">// âœ… éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹åˆ›å»º</span>
<span class="hljs-keyword">const</span> product2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">'2'</span>, <span class="hljs-string">'Mouse'</span>, <span class="hljs-number">29</span>);

<span class="hljs-keyword">const</span> cart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();
<span class="hljs-keyword">let</span> <span class="hljs-attr">cart2</span>:<span class="hljs-title class_">ShoppingCart</span> | <span class="hljs-literal">null</span>  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();
cart.<span class="hljs-title function_">addProduct</span>(product1);
cart.<span class="hljs-title function_">addProduct</span>(product2);

cart2.<span class="hljs-title function_">addProduct</span>(product1); <span class="hljs-comment">// âœ… éƒ¨åˆ†å¯ä»¥å±äºå¤šä¸ªæ•´ä½“</span>
cart2 = <span class="hljs-literal">null</span>; <span class="hljs-comment">// âœ… æ•´ä½“é”€æ¯ä¸å½±å“éƒ¨åˆ† --- è´­ç‰©è½¦æ²¡äº†ï¼Œä½†å•†å“ä¾ç„¶å­˜åœ¨</span>

cart.<span class="hljs-title function_">clearCart</span>(); <span class="hljs-comment">// âŒ æ•´ä½“ä¸è´Ÿè´£éƒ¨åˆ†çš„åˆ›å»ºå’Œé”€æ¯ --- è´­ç‰©è½¦æ¸…ç©ºï¼Œä½†product1å’Œproduct2ä¾ç„¶å­˜åœ¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(product1.<span class="hljs-property">name</span>); <span class="hljs-comment">// ä¾ç„¶å¯è®¿é—®</span>
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… æ•´ä½“åŒ…å«éƒ¨åˆ†</p>
</li>
<li>
<p>âœ… éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹åˆ›å»º</p>
</li>
<li>
<p>âœ… éƒ¨åˆ†å¯ä»¥å±äºå¤šä¸ªæ•´ä½“</p>
</li>
<li>
<p>âœ… æ•´ä½“é”€æ¯ä¸å½±å“éƒ¨åˆ†</p>
</li>
<li>
<p>âŒ æ•´ä½“ä¸è´Ÿè´£éƒ¨åˆ†çš„åˆ›å»ºå’Œé”€æ¯</p>
</li>
</ul>
<h2 data-id="heading-17">ç»„åˆ (Composition)</h2>
<h3 data-id="heading-18">å®šä¹‰</h3>
<p><strong>å¼º"æ•´ä½“-éƒ¨åˆ†"å…³ç³»</strong>ï¼Œéƒ¨åˆ†çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”±æ•´ä½“ç®¡ç†ã€‚éƒ¨åˆ†ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œæ•´ä½“é”€æ¯æ—¶éƒ¨åˆ†ä¹Ÿä¼šé”€æ¯ã€‚</p>
<h3 data-id="heading-19">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b043ee2558848ccabef13c98a022e58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=%2BhoGP35cjKnbURZgm3aO2skRj54%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-20">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šéƒ¨åˆ†ä¾èµ–æ•´ä½“ï¼Œéšæ•´ä½“åˆ›å»ºå’Œé”€æ¯</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šå¼º</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼šæ•´ä½“è´Ÿè´£éƒ¨åˆ†çš„åˆ›å»ºå’Œé”€æ¯</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"æ‹¥æœ‰"Bï¼ŒBçš„ç”Ÿæ­»ç”±Aå†³å®š</p>
</li>
</ul>
<h3 data-id="heading-21">TypeScriptç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Engine</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> horsepower: <span class="hljs-built_in">number</span></span>) {}

    <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¼•æ“å¯åŠ¨ï¼Œé©¬åŠ›ä¸º<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.horsepower}</span>hp`</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> {
    <span class="hljs-comment">// âœ… éƒ¨åˆ†æ˜¯privateï¼Œå¤–éƒ¨æ— æ³•è®¿é—® âŒ éƒ¨åˆ†ä¸èƒ½è¢«å¤šä¸ªæ•´ä½“å…±äº« âŒ éƒ¨åˆ†ä¸èƒ½ç‹¬ç«‹äºæ•´ä½“å­˜åœ¨ </span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">engine</span>: <span class="hljs-title class_">Engine</span>;

    <span class="hljs-comment">// âœ… æ•´ä½“åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºéƒ¨åˆ† --- åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºå¼•æ“ï¼Œå¼•æ“ç”Ÿå‘½å‘¨æœŸç”±Carç®¡ç†</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">engineHorsepower: <span class="hljs-built_in">number</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">engine</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Engine</span>(engineHorsepower);
    }

    <span class="hljs-title function_">startCar</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">engine</span>.<span class="hljs-title function_">start</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ±½è½¦å¯åŠ¨'</span>);
    }

    <span class="hljs-comment">// âœ… æ•´ä½“é”€æ¯æ—¶ä¼šä¸»åŠ¨é”€æ¯éƒ¨åˆ† --- å½“æ±½è½¦è¢«é”€æ¯æ—¶ï¼Œå¼•æ“ä¹Ÿéšä¹‹é”€æ¯</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> myCar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-number">300</span>);
myCar.<span class="hljs-title function_">startCar</span>(); <span class="hljs-comment">// å¼•æ“å¯åŠ¨ï¼Œé©¬åŠ›ä¸º300hp æ±½è½¦å¯åŠ¨</span>
<span class="hljs-comment">// æ— æ³•ç›´æ¥è®¿é—®engineå®ä¾‹ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”±caræ§åˆ¶</span>
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… æ•´ä½“åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºéƒ¨åˆ†</p>
</li>
<li>
<p>âœ… éƒ¨åˆ†æ˜¯privateï¼Œå¤–éƒ¨æ— æ³•è®¿é—®</p>
</li>
<li>
<p>âœ… æ•´ä½“é”€æ¯æ—¶ä¼šä¸»åŠ¨é”€æ¯éƒ¨åˆ†</p>
</li>
<li>
<p>âŒ éƒ¨åˆ†ä¸èƒ½è¢«å¤šä¸ªæ•´ä½“å…±äº«</p>
</li>
<li>
<p>âŒ éƒ¨åˆ†ä¸èƒ½ç‹¬ç«‹äºæ•´ä½“å­˜åœ¨</p>
</li>
</ul>
<p><strong>ç®€å•å›é¡¾ï¼šæ ¹æ®æ¡ˆä¾‹ä½ èƒ½åˆ¤æ–­ä»€ä¹ˆæ—¶å€™ç”¨ã€Œèšåˆã€ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ã€Œç»„åˆã€å—ï¼Ÿ</strong></p>
<ul>
<li><strong>èšåˆ</strong>ï¼šæ•´ä½“å’Œéƒ¨åˆ†<strong>å¯ä»¥åˆ†å¼€</strong>ï¼Œéƒ¨åˆ†å¯ä»¥ç‹¬ç«‹å­˜åœ¨</li>
<li><strong>ç»„åˆ</strong>ï¼šæ•´ä½“å’Œéƒ¨åˆ†<strong>ä¸èƒ½åˆ†å¼€</strong>ï¼Œéƒ¨åˆ†ä¾èµ–æ•´ä½“è€Œå­˜åœ¨</li>
</ul>
<h2 data-id="heading-22">å®ç° (Realization / Implementation)</h2>
<h3 data-id="heading-23">å®šä¹‰</h3>
<p>ç±»å®ç°æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè¡¨ç¤º<strong>å¥‘çº¦å…³ç³»</strong>ã€‚å®ç°ç±»å¿…é¡»æä¾›æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚</p>
<h3 data-id="heading-24">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fa031055a5d45a7bfcfdf54d36e2121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=IXpbr8BLUWXTi2VtyVb8jHCXmUQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-25">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç¼–è¯‘æ—¶ç¡®å®šçš„å¥‘çº¦</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šå¼ºï¼ˆå¿…é¡»å®ç°æ‰€æœ‰æ–¹æ³•ï¼‰</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼š<code>implements</code>å…³é”®å­—</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"å®ç°"æ¥å£Bï¼ŒAå¿…é¡»éµå®ˆBçš„å¥‘çº¦</p>
</li>
</ul>
<h3 data-id="heading-26">TypeScriptç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªPaymentGateWayæ¥å£</span>
<span class="hljs-comment">// âœ… æ¥å£å®šä¹‰è¡Œä¸ºè§„èŒƒ âŒ æ¥å£ä¸åŒ…å«å®ç°ä»£ç </span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentGateWay</span> {
    <span class="hljs-title function_">processPayment</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
    <span class="hljs-title function_">refund</span>(<span class="hljs-attr">orderId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
    <span class="hljs-title function_">getBalance</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;;
}

<span class="hljs-comment">// å®ç°ä¸€ä¸ªå…·ä½“çš„æ”¯ä»˜ç½‘å…³ç±»ï¼Œä¾‹å¦‚PayPal</span>
<span class="hljs-comment">// âœ… ä½¿ç”¨`implements`å…³é”®å­— âœ… å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PayPalPaymentGateWay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentGateWay</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">processPayment</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é€šè¿‡PayPalå¤„ç†æ”¯ä»˜ï¼Œé‡‘é¢ï¼š<span class="hljs-subst">${amount}</span>`</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-title function_">refund</span>(<span class="hljs-attr">orderId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é€šè¿‡PayPalå¤„ç†é€€æ¬¾ï¼Œè®¢å•IDï¼š<span class="hljs-subst">${orderId}</span>`</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿé€€æ¬¾å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();
    }

    <span class="hljs-title function_">getBalance</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–PayPalè´¦æˆ·ä½™é¢'</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿè·å–ä½™é¢é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1000</span>);
    }
}

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªalipayç‰¹æ®Šçš„èŠ±å‘—æ”¯ä»˜æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HuabeiPaymentGateWay</span> {
    <span class="hljs-title function_">huabeiPay</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;
}

<span class="hljs-comment">// å®ç°ä¸€ä¸ªå…·ä½“çš„æ”¯ä»˜ç½‘å…³ç±»ï¼Œä¾‹å¦‚Alipay</span>
<span class="hljs-comment">// âœ… å¯ä»¥å®ç°å¤šä¸ªæ¥å£ --- ç”¨,åˆ†å‰²ï¼Œæ¯”å¦‚alipayå³éœ€è¦å®ç°PaymentGateWayï¼ŒåŒæ—¶éœ€è¦å®ç°HuabeiPaymentGateWay</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AlipayPaymentGateWay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentGateWay</span>, <span class="hljs-title class_">HuabeiPaymentGateWay</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">processPayment</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é€šè¿‡Alipayå¤„ç†æ”¯ä»˜ï¼Œé‡‘é¢ï¼š<span class="hljs-subst">${amount}</span>`</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-title function_">refund</span>(<span class="hljs-attr">orderId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é€šè¿‡Alipayå¤„ç†é€€æ¬¾ï¼Œè®¢å•IDï¼š<span class="hljs-subst">${orderId}</span>`</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿé€€æ¬¾å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();
    }

    <span class="hljs-title function_">getBalance</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–Alipayè´¦æˆ·ä½™é¢'</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿè·å–ä½™é¢é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2000</span>);
    }

    <span class="hljs-keyword">async</span> <span class="hljs-title function_">huabeiPay</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é€šè¿‡AlipayèŠ±å‘—æ”¯ä»˜ï¼Œé‡‘é¢ï¼š<span class="hljs-subst">${amount}</span>`</span>);
        <span class="hljs-comment">// æ¨¡æ‹ŸèŠ±å‘—æ”¯ä»˜å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}

<span class="hljs-keyword">const</span> paypalGateWay = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PayPalPaymentGateWay</span>();
<span class="hljs-keyword">const</span> alipayGateWay = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlipayPaymentGateWay</span>();

paypalGateWay.<span class="hljs-title function_">processPayment</span>(<span class="hljs-number">150</span>); <span class="hljs-comment">// é€šè¿‡PayPalå¤„ç†æ”¯ä»˜ï¼Œé‡‘é¢ï¼š150</span>
alipayGateWay.<span class="hljs-title function_">processPayment</span>(<span class="hljs-number">250</span>); <span class="hljs-comment">// é€šè¿‡Alipayå¤„ç†æ”¯ä»˜ï¼Œé‡‘é¢ï¼š250</span>
alipayGateWay.<span class="hljs-title function_">huabeiPay</span>(<span class="hljs-number">300</span>); <span class="hljs-comment">// é€šè¿‡AlipayèŠ±å‘—æ”¯ä»˜ï¼Œé‡‘é¢ï¼š300</span>
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… ä½¿ç”¨<code>implements</code>å…³é”®å­—</p>
</li>
<li>
<p>âœ… å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•</p>
</li>
<li>
<p>âœ… å¯ä»¥å®ç°å¤šä¸ªæ¥å£</p>
</li>
<li>
<p>âœ… æ¥å£å®šä¹‰è¡Œä¸ºè§„èŒƒ</p>
</li>
<li>
<p>âŒ æ¥å£ä¸åŒ…å«å®ç°ä»£ç </p>
</li>
</ul>
<p>æ€»ç»“æ¥è¯´ï¼Œ<strong>å®ç°(Realization)</strong> Â å°±æ˜¯ï¼š</p>
<ul>
<li><strong>æ¥å£</strong>å®šä¹‰"<strong>è¦åšä»€ä¹ˆ</strong>"ï¼ˆæ–¹æ³•ç­¾å/å¥‘çº¦ï¼‰</li>
<li><strong>ç±»</strong>è´Ÿè´£"<strong>æ€ä¹ˆåš</strong>"ï¼ˆå…·ä½“å®ç°ï¼‰</li>
</ul>
<h2 data-id="heading-27">ç»§æ‰¿ (Inheritance)</h2>
<h3 data-id="heading-28">å®šä¹‰</h3>
<p><strong>æœ€å¼ºçš„å…³ç³»</strong>ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¡¨ç¤º**"is-a"å…³ç³»**ã€‚å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–°åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-29">UMLè¡¨ç¤º</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f42e4cc932d2430d96da837501745a6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=bIvlHBEZoVNIZelEx6bDP7kTR%2B8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-30">å…³é”®ç‰¹å¾</h3>
<ul>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šç¼–è¯‘æ—¶ç¡®å®šçš„ç»§æ‰¿ç»“æ„</p>
</li>
<li>
<p><strong>è€¦åˆåº¦</strong>ï¼šæœ€å¼ºï¼ˆå­ç±»å®Œå…¨ä¾èµ–çˆ¶ç±»ï¼‰</p>
</li>
<li>
<p><strong>ä»£ç è¡¨ç°</strong>ï¼š<code>extends</code>å…³é”®å­—</p>
</li>
<li>
<p><strong>å£è¯€</strong>ï¼šA"æ˜¯ä¸€ç§"Bï¼ŒAç»§æ‰¿Bçš„ä¸€åˆ‡</p>
</li>
</ul>
<h3 data-id="heading-31">TypeScriptç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">protected</span> name: <span class="hljs-built_in">string</span></span>) {}

    move (<span class="hljs-attr">distance</span>: <span class="hljs-built_in">number</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> ç§»åŠ¨äº† <span class="hljs-subst">${distance}</span> ç±³`</span>);
    }

    makeSound () {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> å‘å‡ºå£°éŸ³`</span>);
    }
}

<span class="hljs-comment">// âœ… ä½¿ç”¨`extends`å…³é”®å­— âœ… åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼ˆå•ç»§æ‰¿ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">private</span> breed: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-comment">// âœ… ä½¿ç”¨`super`è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
        <span class="hljs-variable language_">super</span>(name); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    }

    <span class="hljs-comment">// âœ… å¯ä»¥é‡å†™çˆ¶ç±»æ–¹æ³•</span>
    <span class="hljs-comment">// é‡å†™ çˆ¶ç±» makeSound æ–¹æ³•</span>
    <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> è¯´: æ±ªæ±ªæ±ª`</span>);
    }

    <span class="hljs-comment">// æ–°å¢æ–¹æ³•</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> æ¡å›äº† <span class="hljs-subst">${item}</span>`</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-comment">// é‡å†™ çˆ¶ç±» makeSound æ–¹æ³•</span>
    <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> è¯´: å–µå–µå–µ`</span>);
    }

    <span class="hljs-comment">// æ–°å¢æ–¹æ³•</span>
    <span class="hljs-title function_">scratch</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> æŠ“æŒ å®¶å…·`</span>);
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Buddy'</span>, <span class="hljs-string">'Golden Retriever'</span>);
dog.<span class="hljs-title function_">move</span>(<span class="hljs-number">10</span>);      <span class="hljs-comment">// ç»§æ‰¿è‡ªAnimal</span>
dog.<span class="hljs-title function_">makeSound</span>();   <span class="hljs-comment">// é‡å†™çš„æ–¹æ³•</span>
dog.<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'ball'</span>);       <span class="hljs-comment">// Dogç‹¬æœ‰æ–¹æ³•</span>

<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">'Whiskers'</span>);
cat.<span class="hljs-title function_">move</span>(<span class="hljs-number">5</span>);
cat.<span class="hljs-title function_">makeSound</span>();
cat.<span class="hljs-title function_">scratch</span>();
</code></pre>
<p><strong>è¯†åˆ«è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… ä½¿ç”¨<code>extends</code>å…³é”®å­—</p>
</li>
<li>
<p>âœ… å­ç±»è‡ªåŠ¨æ‹¥æœ‰çˆ¶ç±»æ‰€æœ‰public/protectedæˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰</p>
</li>
<li>
<p>âœ… åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼ˆå•ç»§æ‰¿ï¼‰</p>
</li>
<li>
<p>âœ… å¯ä»¥é‡å†™çˆ¶ç±»æ–¹æ³•</p>
</li>
<li>
<p>âœ… ä½¿ç”¨<code>super</code>è°ƒç”¨çˆ¶ç±»æ–¹æ³•</p>
</li>
<li>
<p>âŒ è€¦åˆåº¦æœ€é«˜ï¼Œéœ€è°¨æ…ä½¿ç”¨</p>
</li>
</ul>
<p><strong>è¡¥å……çŸ¥è¯†ç‚¹ï¼šè®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic/protected/privateï¼‰</strong></p>

































<table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>è‡ªå·±èƒ½ç”¨</th><th>å­ç±»èƒ½ç”¨</th><th>å¤–éƒ¨èƒ½ç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>public</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>å®Œå…¨å…¬å¼€ï¼Œè°éƒ½èƒ½è®¿é—®</td></tr><tr><td><strong>protected</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>åªæœ‰è‡ªå·±å’Œå­ç±»èƒ½è®¿é—®</td></tr><tr><td><strong>private</strong></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>åªæœ‰è‡ªå·±èƒ½è®¿é—®ï¼Œå­ç±»éƒ½ä¸è¡Œ</td></tr></tbody></table>
<p><strong>ç»§æ‰¿æ—¶ï¼Œå­ç±»ä¼šè‡ªåŠ¨è·å¾—çˆ¶ç±»çš„ public å’Œ protected æˆå‘˜ï¼Œä¸éœ€è¦é‡æ–°å†™ä»£ç ï¼</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// public - è°éƒ½èƒ½è®¿é—®</span>
  <span class="hljs-keyword">protected</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;         <span class="hljs-comment">// protected - è‡ªå·±å’Œå­ç±»èƒ½è®¿é—®</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;            <span class="hljs-comment">// private - åªæœ‰è‡ªå·±èƒ½è®¿é—®</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(); <span class="hljs-comment">// éšæœºID</span>
  }
  
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">move</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is moving`</span>);
  }
  
  <span class="hljs-keyword">protected</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is sleeping`</span>);
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">breathe</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Breathing..."</span>);
  }
}

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">super</span>(name, age);
  }
  
  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® public æˆå‘˜</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says Woof!`</span>);
    
    <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® protected æˆå‘˜</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Dog age: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>`</span>);
    
    <span class="hljs-comment">// âŒ ä¸èƒ½è®¿é—® private æˆå‘˜</span>
    <span class="hljs-comment">// console.log(this.id);  // æŠ¥é”™ï¼idæ˜¯privateçš„</span>
    
    <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨ public æ–¹æ³•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">move</span>();
    
    <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨ protected æ–¹æ³•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sleep</span>();
    
    <span class="hljs-comment">// âŒ ä¸èƒ½è°ƒç”¨ private æ–¹æ³•</span>
    <span class="hljs-comment">// this.breathe();  // æŠ¥é”™ï¼breatheæ˜¯privateçš„</span>
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Buddy'</span>, <span class="hljs-number">3</span>);

<span class="hljs-comment">// å¤–éƒ¨å¯ä»¥è®¿é—® public æˆå‘˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog.<span class="hljs-property">name</span>);  <span class="hljs-comment">// âœ… 'Buddy'</span>
dog.<span class="hljs-title function_">move</span>();             <span class="hljs-comment">// âœ… 'Buddy is moving'</span>

<span class="hljs-comment">// å¤–éƒ¨ä¸èƒ½è®¿é—® protected æˆå‘˜</span>
<span class="hljs-comment">// console.log(dog.age);   // âŒ æŠ¥é”™ï¼ageæ˜¯protectedçš„</span>
<span class="hljs-comment">// dog.sleep();            // âŒ æŠ¥é”™ï¼sleepæ˜¯protectedçš„</span>

<span class="hljs-comment">// å¤–éƒ¨ä¸èƒ½è®¿é—® private æˆå‘˜</span>
<span class="hljs-comment">// console.log(dog.id);    // âŒ æŠ¥é”™ï¼idæ˜¯privateçš„</span>
<span class="hljs-comment">// dog.breathe();          // âŒ æŠ¥é”™ï¼breatheæ˜¯privateçš„</span>
</code></pre>
<h2 data-id="heading-32">æ ¸å¿ƒè¦ç‚¹åŠæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-33">æ ¸å¿ƒè¦ç‚¹å›¾ç¤ºæ€»ç»“</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b895eb95c1204cc794c21936c6dd3e79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764600559&amp;x-signature=o8seDuH2wY8aRryHYgeZs%2BAz6rI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-34">å¿«é€Ÿåˆ¤æ–­</h3>
<ol>
<li>
<p><strong>ä»£ç å±‚é¢</strong></p>
<ul>
<li>
<p>æœ‰å…³é”®å­—å—ï¼Ÿï¼ˆimplements â†’ å®ç°ï¼Œextends â†’ ç»§æ‰¿ï¼‰</p>
</li>
<li>
<p>æ˜¯æˆå‘˜å˜é‡è¿˜æ˜¯ä¸´æ—¶å˜é‡ï¼Ÿï¼ˆæˆå‘˜ â†’ å…³è”/èšåˆ/ç»„åˆï¼Œä¸´æ—¶ â†’ ä¾èµ–ï¼‰</p>
</li>
<li>
<p>è°è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Ÿï¼ˆæ•´ä½“åˆ›å»º â†’ ç»„åˆï¼Œå¤–éƒ¨åˆ›å»º â†’ èšåˆï¼‰</p>
</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ul>
<li>
<p>æ•´ä½“é”€æ¯æ—¶éƒ¨åˆ†å¦‚ä½•ï¼Ÿï¼ˆåŒæ—¶é”€æ¯ â†’ ç»„åˆï¼Œä¾ç„¶å­˜åœ¨ â†’ èšåˆï¼‰</p>
</li>
<li>
<p>å…³ç³»æŒç»­å¤šä¹…ï¼Ÿï¼ˆä¸´æ—¶ â†’ ä¾èµ–ï¼ŒæŒä¹… â†’ å…³è”/èšåˆ/ç»„åˆï¼‰</p>
</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡è¯­ä¹‰</strong></p>
<ul>
<li>
<p>æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿï¼ˆis-a â†’ ç»§æ‰¿ï¼Œhas-a â†’ å…³è”/èšåˆ/ç»„åˆï¼Œuse â†’ ä¾èµ–ï¼‰</p>
</li>
<li>
<p>éƒ¨åˆ†èƒ½å¦ç‹¬ç«‹å­˜åœ¨ï¼Ÿï¼ˆèƒ½ â†’ èšåˆï¼Œä¸èƒ½ â†’ ç»„åˆï¼‰</p>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-35">å¸¸è§æ··æ·†è¾¨æ</h3>
<h4 data-id="heading-36">1. å…³è” vs èšåˆ vs ç»„åˆ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å…³è”ï¼šåªæ˜¯æŒæœ‰å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Controller</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> service: ApiService</span>) {} <span class="hljs-comment">// å¤–éƒ¨ä¼ å…¥</span>
}

<span class="hljs-comment">// èšåˆï¼šåŒ…å«ä½†ä¸ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Playlist</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">songs</span>: <span class="hljs-title class_">Song</span>[] = [];
  <span class="hljs-title function_">addSong</span>(<span class="hljs-params">song: Song</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">songs</span>.<span class="hljs-title function_">push</span>(song); } <span class="hljs-comment">// å¤–éƒ¨åˆ›å»ºçš„Song</span>
}

<span class="hljs-comment">// ç»„åˆï¼šåˆ›å»ºå¹¶ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Form</span> {
  <span class="hljs-keyword">private</span> input = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Input</span>();  <span class="hljs-comment">// Formå†…éƒ¨åˆ›å»º</span>
  <span class="hljs-keyword">private</span> button = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>(); <span class="hljs-comment">// Formé”€æ¯æ—¶ä¸€èµ·é”€æ¯</span>
}
</code></pre>
<h4 data-id="heading-37">2. ä¾èµ– vs å…³è”</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¾èµ–ï¼šä¸´æ—¶ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">createUser</span>(<span class="hljs-params">validator: Validator</span>) { <span class="hljs-comment">// æ–¹æ³•å‚æ•°</span>
    validator.<span class="hljs-title function_">validate</span>();
  }
}

<span class="hljs-comment">// å…³è”ï¼šæŒä¹…æŒæœ‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> validator: Validator</span>) {} <span class="hljs-comment">// æˆå‘˜å˜é‡</span>
}
</code></pre>
<p><strong>åˆ¤æ–­æŠ€å·§</strong>ï¼šçœ‹æ˜¯å¦ä½œä¸ºæˆå‘˜å˜é‡å­˜å‚¨</p>
<h4 data-id="heading-38">3. å®ç° vs ç»§æ‰¿</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®ç°ï¼šå¥‘çº¦å…³ç³»ï¼Œåªå®šä¹‰è§„èŒƒ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Drawable</span> {
  <span class="hljs-title function_">draw</span>(): <span class="hljs-built_in">void</span>;
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drawable</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* è‡ªå·±å®ç° */</span> }
}

<span class="hljs-comment">// ç»§æ‰¿ï¼šä»£ç å¤ç”¨ï¼Œç»§æ‰¿å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
  <span class="hljs-title function_">draw</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* çˆ¶ç±»å®ç° */</span> }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Shape</span> {
  <span class="hljs-comment">// å¯ä»¥é‡å†™æˆ–ç›´æ¥ä½¿ç”¨çˆ¶ç±»å®ç°</span>
}
</code></pre>
<h3 data-id="heading-39">å‰ç«¯å…¸å‹åœºæ™¯æ˜ å°„</h3>















































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èå…³ç³»</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç»„ä»¶ä¸ Service</strong></td><td>å…³è”</td><td><code>UserComponent</code> æŒæœ‰ <code>ApiService</code></td><td>ç»„ä»¶è°ƒç”¨æœåŠ¡æ—¶ï¼ŒæœåŠ¡éœ€è¦å¤–éƒ¨å®šä¹‰å¥½ä¼ å…¥</td></tr><tr><td><strong>ç»„ä»¶ä¸å­ç»„ä»¶</strong></td><td>ç»„åˆ</td><td><code>Dialog</code> åŒ…å« <code>Header</code>, <code>Content</code>, <code>Footer</code></td><td>Dialogç»„ä»¶å†…éƒ¨å®šä¹‰å­ç»„ä»¶ï¼Œå½“Dialogé”€æ¯æ—¶ï¼Œå­ç»„ä»¶å…¨éƒ¨é”€æ¯</td></tr><tr><td><strong>åˆ—è¡¨ä¸é¡¹ç›®</strong></td><td>èšåˆ</td><td><code>TodoList</code> åŒ…å«å¤šä¸ª <code>TodoItem</code></td><td>ä¸€ä¸ªlistç”±å¤šä¸ªitemèšåˆï¼Œlisté”€æ¯æ—¶ï¼Œitemä¾ç„¶èƒ½å­˜åœ¨</td></tr><tr><td><strong>Hooks ä½¿ç”¨</strong></td><td>ä¾èµ–</td><td>ç»„ä»¶è°ƒç”¨ <code>useState</code>, <code>useEffect</code></td><td>ç»„ä»¶åªæ˜¯ä¸´æ—¶è°ƒç”¨hooksï¼Œä¸æŒæœ‰å¼•ç”¨</td></tr><tr><td><strong>ç»„ä»¶ç»§æ‰¿</strong></td><td>ç»§æ‰¿</td><td><code>Button</code> extends <code>BaseComponent</code></td><td>Buttonæ‹¥æœ‰BaseComponentçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶å¯ä»¥æ”¹å†™ï¼Œå¦‚é‡æ–°onClickæ–¹æ³•</td></tr><tr><td><strong>å®ç°æ¥å£</strong></td><td>å®ç°</td><td><code>LocalStorage</code> implements <code>StorageInterface</code></td><td>LocalStorageéœ€è¦å®ç°StorageInterfaceå®šä¹‰çš„æ‰€æœ‰æ–¹æ³•</td></tr></tbody></table>
<h3 data-id="heading-40">å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-41">1. è¿‡åº¦ä½¿ç”¨ç»§æ‰¿</h4>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºäº†å¤ç”¨ä»£ç è€Œç»§æ‰¿</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HttpClient</span> {
  <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user'</span>); }
}
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ol>
<li><strong>è¿åäº†"is-a"å…³ç³»</strong>ï¼šUserServiceÂ <strong>ä¸æ˜¯ä¸€ä¸ª</strong>Â HttpClient</li>
<li><strong>è€¦åˆåº¦è¿‡é«˜</strong>ï¼šç»§æ‰¿äº†HttpClientçš„æ‰€æœ‰public/protectedæ–¹æ³•ï¼Œæš´éœ²äº†get(),post()çš„æ¥å£</li>
<li><strong>éš¾ä»¥æ›¿æ¢</strong>ï¼šæ— æ³•åˆ‡æ¢åˆ°å…¶ä»–httpåº“ï¼ˆå¦‚axios -&gt; fetch)</li>
<li><strong>è¿åå•ä¸€èŒè´£åŸåˆ™</strong>ï¼šUserService ç°åœ¨æœ‰ä¸¤ä¸ªèŒè´£ï¼š1. ä¸šåŠ¡é€»è¾‘ï¼ˆç®¡ç†ç”¨æˆ·ï¼‰ï¼›2. httpé€šä¿¡</li>
<li><strong>æ— æ³•å¤šé‡ç»§æ‰¿</strong>ï¼šå¦‚æœè¿˜æƒ³è¦æ—¥å¿—åŠŸèƒ½ï¼Œç¼“å­˜åŠŸèƒ½è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</li>
</ol>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼šä½¿ç”¨èšåˆï¼ˆä¾èµ–æ³¨å…¥ï¼‰</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: HttpClient</span>) {}  <span class="hljs-comment">// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥</span>
  <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user'</span>); }
}
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯<strong>èšåˆ</strong>è€Œéç»„åˆï¼š</p>
<ul>
<li>HttpClient ä»å¤–éƒ¨åˆ›å»ºå¹¶æ³¨å…¥</li>
<li>UserService ä¸ç®¡ç† HttpClient çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å¤šä¸ª Service å¯ä»¥å…±äº«åŒä¸€ä¸ª HttpClient å®ä¾‹</li>
<li>ä¾¿äºæµ‹è¯•æ—¶æ³¨å…¥ mock å¯¹è±¡</li>
</ul>
<p><strong>åŸå› </strong>ï¼šèšåˆæ¯”ç»§æ‰¿æ›´çµæ´»ï¼Œé™ä½è€¦åˆåº¦ã€‚ä¾èµ–æ³¨å…¥æ˜¯ç°ä»£å‰ç«¯æ¡†æ¶çš„æ ‡å‡†åšæ³•ã€‚</p>
<h4 data-id="heading-42">2. æ··æ·†èšåˆä¸ç»„åˆ</h4>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æƒ³è¦èšåˆå´å†™æˆäº†ç»„åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Team</span> {
  <span class="hljs-keyword">private</span> members = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>()];
}
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Team</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">members</span>: <span class="hljs-title class_">Employee</span>[] = [];
  <span class="hljs-title function_">addMember</span>(<span class="hljs-params">employee: Employee</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">members</span>.<span class="hljs-title function_">push</span>(employee);
  }
}
</code></pre>
<p><strong>åŸå› </strong>ï¼šå‘˜å·¥åº”è¯¥ç‹¬ç«‹åˆ›å»ºï¼Œå¯ä»¥å±äºå¤šä¸ªå›¢é˜Ÿ</p>
<h4 data-id="heading-43">3. ä¾èµ–å¯¼è‡´çš„é‡å¤åˆ›å»º</h4>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserComponent</span> {
  <span class="hljs-title function_">loadData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> api = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiService</span>(); <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»º</span>
    api.<span class="hljs-title function_">getUsers</span>();
  }
}
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserComponent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> api: ApiService</span>) {} <span class="hljs-comment">// å…³è”</span>
  <span class="hljs-title function_">loadData</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">api</span>.<span class="hljs-title function_">getUsers</span>();
  }
}
</code></pre>
<p><strong>åŸå› </strong>ï¼šé¢‘ç¹ä½¿ç”¨çš„å¯¹è±¡åº”è¯¥ä½œä¸ºå…³è”æŒæœ‰</p>
<h4 data-id="heading-44">4. å¾ªç¯ä¾èµ–</h4>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> b: B</span>) {}
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> a: A</span>) {} <span class="hljs-comment">// å¾ªç¯ä¾èµ–</span>
}
</code></pre>
<p>âœ… <strong>æ­£ç¡®åšæ³•</strong>ï¼šå¼•å…¥ä¸­ä»‹è€…æˆ–äº‹ä»¶ç³»ç»Ÿ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventBus</span> {
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, data: <span class="hljs-built_in">any</span></span>) {}
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, handler: <span class="hljs-built_in">Function</span></span>) {}
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> eventBus: EventBus</span>) {
    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'b-event'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleBEvent</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> eventBus: EventBus</span>) {
    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'a-event'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleAEvent</span>);
  }
}
</code></pre>
<h2 data-id="heading-45">å†™åœ¨æœ€å</h2>
<p>ç†è§£ OOP ä¸­çš„6ç§å¯¹è±¡å…³ç³»ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦åœ¨å®è·µä¸­ä¸æ–­ä½“ä¼šå’Œåº”ç”¨ã€‚</p>
<blockquote>
<p><strong>"ä¼˜ç§€çš„è®¾è®¡ä¸æ˜¯ä¸€å¼€å§‹å°±å®Œç¾çš„ï¼Œè€Œæ˜¯åœ¨ä¸æ–­é‡æ„ä¸­æ¼”åŒ–å‡ºæ¥çš„ã€‚"</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åå°å¤ªå¤šè®°ä¸ä½ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªç»Ÿä¸€é—¨æˆ·æŠŠæ‰€æœ‰ç³»ç»Ÿå…¨ä¸²èµ·æ¥äº†]]></title>    <link>https://juejin.cn/post/7576181242582089791</link>    <guid>https://juejin.cn/post/7576181242582089791</guid>    <pubDate>2025-11-25T01:45:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582089791" data-draft-id="7574370234070253622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åå°å¤ªå¤šè®°ä¸ä½ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªç»Ÿä¸€é—¨æˆ·æŠŠæ‰€æœ‰ç³»ç»Ÿå…¨ä¸²èµ·æ¥äº†"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-25T01:45:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´›å¡å¡äº†"/> <meta itemprop="url" content="https://juejin.cn/user/888839672963544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åå°å¤ªå¤šè®°ä¸ä½ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªç»Ÿä¸€é—¨æˆ·æŠŠæ‰€æœ‰ç³»ç»Ÿå…¨ä¸²èµ·æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888839672963544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´›å¡å¡äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:45:52.000Z" title="Tue Nov 25 2025 01:45:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»44åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸šåŠ¡èƒŒæ™¯</h3>
<p>å¤§å®¶å¥½ æˆ‘æ˜¯å¡å¡ï¼Œåœ¨æˆ‘ä¹‹å‰å…¬å¸çš„æ—¶å€™ï¼Œå¾ˆå¤šä¸šåŠ¡éƒ½éœ€è¦åšç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ¯ä¸ªä¸šåŠ¡åŸºæœ¬ä¸Šéƒ½ä¼šæœ‰è‡ªå·±çš„åå°ï¼Œè€Œä¸”è¿˜è¦åŒºåˆ†æµ‹è¯•åå°ã€æ­£å¼åå°ã€æ—¥å¿—ç›‘æ§ã€è¿ç»´å·¥å…·ã€å‘å¸ƒç³»ç»Ÿä¹‹ç±»çš„ã€‚æ—¶é—´é•¿äº†ï¼Œå„ç§å­ç³»ç»Ÿè¶Šå»ºè¶Šå¤šï¼Œéƒ¨ç½²çš„æ—¶å€™ä¹Ÿå…¨æ˜¯é æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨æï¼Œæ‰€ä»¥åæœŸåŸºæœ¬å°±æ˜¯ä¸€å †ç³»ç»Ÿæ•£è½åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šã€‚</p>
<p>ç‰¹åˆ«æ˜¯æˆ‘è´Ÿè´£é¡¹ç›®å¤šçš„æ—¶å€™ï¼Œæ‰‹ä¸Šè¦ç»´æŠ¤çš„åå°å®åœ¨å¤ªå¤šäº†ã€‚ç”¨çš„æ—¶å€™åªèƒ½æŠŠå¸¸ç”¨çš„å…ˆå›ºå®šåœ¨æµè§ˆå™¨æ ‡ç­¾æ é‡Œï¼Œä½†åªè¦æ¢ä¸ªè®¾å¤‡ã€é‡è£…ä¸ªæµè§ˆå™¨ï¼Œæˆ–è€…æ¸…ç†ä¸€ä¸‹ç¼“å­˜ï¼Œè¿™äº›æ ‡ç­¾å…¨æ²¡äº†ï¼Œç»“æœåˆå¾—å»èŠå¤©è®°å½•ã€æ–‡æ¡£é‡Œä¸€æ¡æ¡ç¿»ï¼Œæ‰èƒ½æŠŠåå°å…¥å£æ‰¾å›æ¥ã€‚</p>
<p>æ›´çƒ¦çš„æ˜¯è€æ¿ã€‚è¿™ä¸ªå¤§å¿™äººæ˜æ˜åå°åœ°å€ä»–è‡ªå·±å¯ä»¥æ”¶è—ä¸€ä¸‹ï¼Œä½†ä»æ¥ä¸å­˜ï¼Œæ¯æ¬¡è¦çœ‹ç‚¹æ•°æ®å°±æ¥é—®æˆ‘è¦åå°åœ°å€å’Œè´¦å·å¯†ç ã€‚é—®å¾—å¤šäº†æˆ‘è‡ªå·±éƒ½çƒ¦äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘åæ¥æŠ½ç©ºæŠŠè¿™äº›é›¶æ•£çš„åå°ç»Ÿä¸€èµ·æ¥ï¼Œåšäº†ä¸€ä¸ªâ€œç»Ÿä¸€é—¨æˆ·ç®¡ç†ä¸­å¿ƒâ€ã€‚æ‰€æœ‰å­ç³»ç»Ÿçš„å…¥å£éƒ½æ”¾åœ¨ä¸€ä¸ªé¡µé¢é‡Œï¼Œç™»å½•ä¸€æ¬¡ä¹‹åï¼Œç”¨æˆ·å°±èƒ½è¿›å…¥è‡ªå·±æœ‰æƒé™çš„æ‰€æœ‰åå°ï¼Œä¸ç”¨å†æ»¡ä¸–ç•Œæ‰¾é“¾æ¥ï¼Œä¹Ÿä¸ç”¨æ¯ä¸ªç³»ç»Ÿéƒ½é‡æ–°ç™»å½•ã€‚å¯¹è€æ¿ã€å¯¹è¿è¥ã€å¯¹æˆ‘ä»¬å¼€å‘æ¥è¯´ï¼Œéƒ½çœäº‹å¾ˆå¤šï¼Œå¯¹åæœŸæ‰©ç³»ç»Ÿçš„ç®¡ç†ä¹Ÿè½»æ¾ä¸å°‘ã€‚</p>
<hr/>
<h3 data-id="heading-1">è®¾è®¡æ€è·¯</h3>
<p>åœ¨å¼€å§‹è®¾è®¡è¿™å¥—ä¸œè¥¿ä¹‹å‰ï¼Œæˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯ç”¨å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰æœºåˆ¶ã€‚ä¼ ç»Ÿ SSO çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼šç”¨æˆ·è®¿é—® A ç³»ç»Ÿï¼Œå‘ç°æ²¡ç™»å½•ï¼Œè¢«é‡å®šå‘åˆ°è®¤è¯ä¸­å¿ƒï¼›ç™»å½•æˆåŠŸåå†å¸¦ç€ ticket/code å›æ¥ã€‚ä¹‹åç”¨æˆ·è®¿é—® B ç³»ç»Ÿæ—¶ï¼Œå› ä¸ºå·²ç»ç™»å½•è¿‡è®¤è¯ä¸­å¿ƒï¼Œå°±ä¸éœ€è¦å†ç™»å½•ä¸€éã€‚</p>
<p>è¿™ä¸ªæœºåˆ¶æœ¬èº«æ²¡é—®é¢˜ï¼Œä½†å’Œæˆ‘æƒ³åšçš„ä¸œè¥¿ä¸å®Œå…¨ä¸€æ ·ã€‚ä¼ ç»Ÿ SSO æ˜¯â€œå…ˆè®¿é—®ç³»ç»Ÿï¼Œå†ç™»å½•â€ã€‚è€Œæˆ‘ä»¬çš„å†…éƒ¨åå°æ›´å¤šæ˜¯â€œå…ˆç™»å½•é—¨æˆ·ï¼Œå†ä»é—¨æˆ·è¿›å»â€ã€‚ç”¨æˆ·ä¸ä¼šä¸€ä¸Šæ¥å°±ç›´æ¥è®¿é—®æŸä¸ªå­ç³»ç»Ÿï¼Œè€Œæ˜¯å…ˆæ‰“å¼€ç»Ÿä¸€å…¥å£ï¼Œç„¶åä»å…¥å£è¿›å…¥å¯¹åº”çš„åå°ã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±åœ¨æƒ³ï¼Œæ—¢ç„¶æˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯ä¸æ˜¯â€œä»å­ç³»ç»Ÿå¼€å§‹â€ï¼Œé‚£å®Œå…¨ç…§æ¬ä¼ ç»Ÿ SSO çš„é‚£å¥—æµç¨‹ï¼Œå…¶å®å°±æœ‰ç‚¹ä¸å¯¹è·¯ã€‚ä¼ ç»Ÿ SSO æ›´åƒæ˜¯é¢å‘å¯¹å¤–çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œæ¯”å¦‚ç”¨æˆ·æ˜¯ç›´æ¥è®¿é—® Aã€Bã€C è¿™äº›ç³»ç»Ÿçš„ï¼Œéœ€è¦ SSO å»å¸®ä»–ä»¬ç»Ÿä¸€ä¸€æ¬¡ç™»å½•ã€‚ä½†æˆ‘ä»¬è¿™ç§å†…éƒ¨åå°æ°å¥½ç›¸åâ€”â€”å¤§å®¶ä¹ æƒ¯æ˜¯å…ˆæ‰“å¼€ä¸€ä¸ªå…¥å£é¡µé¢ï¼Œç„¶åä»è¿™ä¸ªå…¥å£å»ç‚¹å„ä¸ªåå°ï¼Œè¿™ä¸€ç‚¹å’Œä¼ ç»Ÿ SSO çš„é»˜è®¤å‰æå®Œå…¨ä¸ä¸€æ ·ã€‚</p>
<p>åŒæ—¶æˆ‘ä»¬å…¬å¸é‡Œé¢çš„åå°ç³»ç»ŸæŒºå¤šï¼Œè€Œä¸”æŠ€æœ¯æ ˆä¹Ÿä¸ç»Ÿä¸€ã€‚æœ‰ Java çš„ã€æœ‰ PHP çš„ã€æœ‰ Go çš„ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯ç¬¬ä¸‰æ–¹çš„è‡ªå¸¦åå°ã€‚è¦è®©è¿™äº›ç³»ç»Ÿå…¨éƒ¨æŒ‰ç…§ SSO çš„åè®®æ¥æ”¹é€ ä¸€éï¼Œä¸ä½†æˆæœ¬é«˜ï¼Œè€Œä¸”æ¯ä¸ªç³»ç»Ÿéƒ½è¦å¯¹æ¥ SSO çš„é‡å®šå‘ã€ticket éªŒè¯ã€ç™»å½•æ€åŒæ­¥ï¼Œå·¥ä½œé‡ç‰¹åˆ«å¤§ï¼Œä¹Ÿå®¹æ˜“å‡ºé—®é¢˜ã€‚</p>
<p>æ‰€ä»¥æˆ‘æœ€åçš„æ€è·¯æ˜¯ï¼šä¸ç”¨å¤§å‚é‚£å¥—å¾ˆé‡çš„ SSOï¼Œä¹Ÿä¸ç”¨è®©æ‰€æœ‰å­ç³»ç»Ÿéƒ½å»æ”¯æŒå•ç‚¹ç™»å½•ï¼Œè€Œæ˜¯åšä¸€ä¸ªè½»é‡ä¸€ç‚¹ã€è´´åˆæˆ‘ä»¬å†…éƒ¨ä½¿ç”¨ä¹ æƒ¯çš„æ–¹å¼ã€‚æ—¢ç„¶å¤§å®¶æ˜¯ä»é—¨æˆ·è¿›çš„ï¼Œé‚£å°±å¹²è„†ä»¥é—¨æˆ·ä¸ºä¸­å¿ƒï¼ŒæŠŠç™»å½•è¿™ä»¶äº‹æƒ…éƒ½é›†ä¸­æ”¾åœ¨é—¨æˆ·å®Œæˆï¼›è¿›å…¥å­ç³»ç»Ÿçš„æ—¶å€™å†ç»™å­ç³»ç»Ÿä¸€æ®µä¸´æ—¶æˆæƒç ï¼Œç”¨è¿™æ®µæˆæƒç å»è®¤è¯ä¸­å¿ƒæ¢ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå­ç³»ç»Ÿå†ç”Ÿæˆè‡ªå·±çš„ token å°±å¥½äº†ã€‚</p>
<p>è¿™æ ·è®¾è®¡æˆ‘è§‰å¾—æœ‰è¿™æ ·å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å¯¹ç”¨æˆ·æ¥è¯´è¿˜æ˜¯å•ç‚¹ç™»å½•ä½“éªŒï¼Œç™»å½•ä¸€æ¬¡å°±å¤Ÿäº†</li>
<li>å­ç³»ç»Ÿä¸ç”¨æ”¹é€ å¤ªå¤šï¼Œä¸éœ€è¦æ”¯æŒå®Œæ•´çš„ SSO åè®®</li>
<li>é—¨æˆ·åªè´Ÿè´£å…¥å£ï¼Œè®¤è¯ä¸­å¿ƒåªè´Ÿè´£éªŒè¯ï¼Œä¸¤è€…èŒè´£åˆ’åˆ†å¾ˆæ¸…æ¥š</li>
<li>ä¸åŒæŠ€æœ¯æ ˆçš„ç³»ç»Ÿéƒ½èƒ½æ¥å…¥ï¼Œæˆæœ¬æ¯”ä¼ ç»Ÿ SSO ä½å¾ˆå¤š</li>
</ul>
<p>è¯´ç™½äº†ï¼Œå°±æ˜¯æŠŠâ€œç»Ÿä¸€å…¥å£ + ç®€åŒ–æˆæƒâ€çš„æ–¹å¼ç»“åˆèµ·æ¥ï¼Œæ¯”ä¼ ç»Ÿ SSO æ›´è½»ï¼Œæ›´é€‚åˆæˆ‘ä»¬è¿™ç§å†…éƒ¨ç§æœ‰åŒ–éƒ¨ç½²ã€å¤šåå°çš„åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ–¹æ¡ˆé€‰æ‹©</h3>
<p>åœ¨ç¡®å®šæ•´ä½“æ–¹å‘ä¹‹å‰ï¼Œæˆ‘å‚è€ƒè¿‡å¥½å‡ ç§å¸¸è§çš„æˆæƒæ¨¡å¼ã€‚æ¯•ç«Ÿæˆ‘ä»¬å†…éƒ¨çš„åå°ç³»ç»Ÿæ•°é‡å¤šã€æŠ€æœ¯æ ˆä¹Ÿä¸ç»Ÿä¸€ï¼ŒJavaã€PHPã€Go éƒ½æœ‰ï¼Œè€Œä¸”éƒ¨ç½²ç¯å¢ƒåˆ†æ•£ï¼Œæƒ³åšç»Ÿä¸€ç™»å½•çš„è¯ï¼Œå‰æœŸé€‰å“ªç§æ–¹æ¡ˆåŸºæœ¬ä¸Šå†³å®šäº†åé¢æ¥å…¥ä¼šä¸ä¼šç—›è‹¦ã€‚</p>
<p>æœ€å¼€å§‹æƒ³çš„æ˜¯â€œè¦ä¸è¦ç›´æ¥ç»Ÿä¸€ tokenï¼Ÿâ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé—¨æˆ·ç™»å½•ä¹‹åç”Ÿæˆä¸€ä¸ª JWTï¼Œç„¶åæ‰€æœ‰å­ç³»ç»Ÿéƒ½ç”¨åŒä¸€ä¸ª token éªŒè¯ã€‚è¿™ä¸ªåšæ³•çœ‹èµ·æ¥ç®€å•ç²—æš´ï¼Œä½†é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼šæ‰€æœ‰å­ç³»ç»Ÿå¿…é¡»å…±äº«åŒä¸€å¥—å¯†é’¥ï¼Œä¸€æ—¦æŸä¸ªå­ç³»ç»Ÿæ³„éœ²å¯†é’¥ï¼Œæ‰€æœ‰åå°çš„ç™»å½•å®‰å…¨å°±å…¨å®Œäº†ã€‚è€Œä¸”ä¸åŒç³»ç»Ÿå¯èƒ½å¯¹ token çš„å­—æ®µã€æ—¶æ•ˆã€æ ¡éªŒé€»è¾‘éƒ½æœ‰è‡ªå·±çš„éœ€æ±‚ï¼Œç»Ÿä¸€ token åè€Œä¼šå¢åŠ è€¦åˆã€‚</p>
<p>åæ¥ä¹Ÿæƒ³è¿‡â€œè¦ä¸è¦èµ° OAuth2 æˆæƒç æ¨¡å¼ï¼Ÿâ€ã€‚è¿™ç§æ˜¯å¤§å‚å¸¸ç”¨çš„åšæ³•ï¼Œæµç¨‹å¾ˆæ ‡å‡†ï¼Œä½†ä¹Ÿå¤ªé‡äº†ã€‚è¦è®©æ¯ä¸ªå­ç³»ç»Ÿéƒ½éµå¾ª OAuth2 çš„åè®®ã€å¤„ç† redirectã€å¤„ç† stateã€å¤„ç† token äº¤æ¢ç­‰ç­‰ï¼Œå¯¹æˆ‘ä»¬è¿™ç§å†…éƒ¨åå°æ¥è¯´æœ‰ç‚¹è¿‡åº¦è®¾è®¡äº†ï¼Œè€Œä¸”æˆæœ¬é«˜ã€å®ç°å¤æ‚ï¼Œä¸å¤ªç°å®ã€‚</p>
<p>å†å¾€åå°±æ˜¯ä¼ ç»Ÿçš„å•ç‚¹ç™»å½•ï¼ˆSSO æˆ– CASï¼‰é‚£ç±»æ–¹æ¡ˆã€‚ä½†å‰é¢ä¹Ÿè¯´äº†ï¼Œé‚£ä¸€å¥—æ˜¯â€œä»å­ç³»ç»Ÿå‡ºå‘â€çš„ï¼šç³»ç»Ÿ A â†’ è®¤è¯ä¸­å¿ƒ â†’ å› Aï¼Œå†è®¿é—® B åˆæ˜¯å¦ä¸€å¥—æµç¨‹ã€‚æˆ‘ä»¬çš„ä½¿ç”¨è·¯å¾„æ˜¯ä»é—¨æˆ·è¿›å…¥ï¼Œè€Œä¸æ˜¯ä»æŸä¸ªå­ç³»ç»Ÿå¼€å§‹ï¼Œè¿™ç§åœºæ™¯ä¸‹ä¼ ç»Ÿçš„ SSO æµç¨‹å¥—ä¸Šå»å¹¶ä¸è´´åˆï¼Œè¿˜ä¼šè®©å­ç³»ç»Ÿæ”¹é€ é‡ç‰¹åˆ«å¤§ã€‚</p>
<p>ç»¼åˆå¯¹æ¯”ä¸‹æ¥ï¼Œæœ€ç»ˆæˆ‘é€‰æ‹©äº†â€œç»Ÿä¸€é—¨æˆ· + ä¸€æ¬¡æ€§ codeâ€çš„ç»„åˆæ–¹å¼ï¼š<br/>
é—¨æˆ·è´Ÿè´£å±•ç¤ºæ‰€æœ‰ç³»ç»Ÿå…¥å£ï¼Œç”¨æˆ·å…ˆåœ¨é—¨æˆ·ç™»å½•ï¼›è¿›å…¥å­ç³»ç»Ÿæ—¶ç”±é—¨æˆ·ç”Ÿæˆä¸€ä¸ªä¸€æ¬¡æ€§ codeï¼Œå­ç³»ç»Ÿæ‹¿ code å»è®¤è¯ä¸­å¿ƒæ¢ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åå†åœ¨æœ¬åœ°ç”Ÿæˆè‡ªå·±çš„ tokenã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼å…¼é¡¾äº†å®‰å…¨æ€§ã€æ‰©å±•æ€§å’Œæ¥å…¥æˆæœ¬ï¼Œä¹Ÿä¸ä¾èµ–æŸç§æŠ€æœ¯æ ˆï¼Œæ‰€æœ‰è¯­è¨€çš„åå°éƒ½èƒ½å¾ˆè½»æ¾æ¥å…¥ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬è¿™ç§å†…éƒ¨ç§æœ‰åŒ–ã€å¤šåå°çš„ç¯å¢ƒã€‚</p>
<p>æ•´ä¸ªæµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e62bfe01e8a247ea88245b270674066f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=NkI796%2FcXy9ViUX0gGWMQygfDX0%3D" alt="Untitled diagram-2025-11-20-050814.png" loading="lazy"/></p>
<p>ç”¨æˆ·ä¸ä¼šç›´æ¥è¿›å…¥æŸä¸ªå­ç³»ç»Ÿï¼Œè€Œæ˜¯å…ˆæ‰“å¼€ç»Ÿä¸€é—¨æˆ·å¹¶åœ¨é—¨æˆ·ç™»å½•ã€‚ç™»å½•æˆåŠŸåï¼Œé—¨æˆ·ä¼šæŠŠç”¨æˆ·æœ‰æƒé™çš„åå°ç³»ç»Ÿéƒ½å±•ç¤ºå‡ºæ¥ã€‚ç”¨æˆ·ç‚¹å‡»æŸä¸ªç³»ç»Ÿå…¥å£æ—¶ï¼Œé—¨æˆ·ä¼šå‘è®¤è¯ä¸­å¿ƒç”³è¯·ä¸€ä¸ªä¸€æ¬¡æ€§ codeï¼Œç„¶åå¸¦ç€è¿™ä¸ª code æŠŠç”¨æˆ·é‡å®šå‘åˆ°å¯¹åº”çš„å­ç³»ç»Ÿã€‚</p>
<p>å­ç³»ç»Ÿæ‹¿åˆ° code ä¹‹åï¼Œä¼šå†å»æ‰¾è®¤è¯ä¸­å¿ƒéªŒè¯è¿™ä¸ª code å¹¶æ¢å–ç”¨æˆ·ä¿¡æ¯ã€‚æ‹¿åˆ° userInfo åï¼Œå­ç³»ç»Ÿè‡ªå·±åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ª tokenï¼Œåé¢ç”¨æˆ·åœ¨è¿™ä¸ªå­ç³»ç»Ÿé‡Œæ‰€æœ‰çš„è¯·æ±‚ï¼Œéƒ½ä¼šé€šè¿‡è¿™ä¸ªæœ¬åœ° token æ¥åšæ ¡éªŒï¼Œè€Œä¸å†ä¾èµ–é—¨æˆ·ã€‚</p>
<p>è¿™ç§æ¨¡å¼çš„å¥½å¤„æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼šç”¨æˆ·ä½“éªŒä¸Šç­‰åŒäºå•ç‚¹ç™»å½•ï¼Œç™»å½•ä¸€æ¬¡å³å¯è¿›å…¥å¤šä¸ªåå°ï¼›å®ç°ä¸Šåˆæ¯”ä¼ ç»Ÿ SSO è¦è½»å¾—å¤šï¼Œä¸éœ€è¦æ¯ä¸ªå­ç³»ç»Ÿéƒ½å¯¹æ¥å®Œæ•´çš„é‡å®šå‘æµç¨‹ï¼Œä¹Ÿä¸ç”¨ç»Ÿä¸€ token æ ¼å¼ï¼Œæ›´é€‚åˆå†…éƒ¨ç³»ç»Ÿå¤šã€è¯­è¨€æ‚ã€ç¯å¢ƒåˆ†æ•£çš„æƒ…å†µã€‚</p>
<hr/>
<h3 data-id="heading-3">åå°è®¾è®¡æ€è·¯</h3>
<p>åœ¨æ­è¿™ä¸ªç»Ÿä¸€é—¨æˆ·ä¹‹å‰ï¼Œæˆ‘å…ˆæƒ³æ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼šæ—¢ç„¶å®ƒè¦æ‰¿è½½å…¬å¸æ‰€æœ‰å†…éƒ¨åå°ï¼Œé‚£å®ƒæœ¬èº«å¿…é¡»ä¹Ÿå¾—æ˜¯ä¸€ä¸ªæ ‡å‡†çš„åå°ç³»ç»Ÿï¼Œæœ‰è‡ªå·±çš„æ¨¡å—ã€æœ‰è‡ªå·±çš„ç®¡ç†é€»è¾‘ï¼Œä¸èƒ½åªæ˜¯æŠŠé“¾æ¥æ‹¼ä¸€æ‹¼å°±å®Œäº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ç»™å®ƒæ‹†äº†å‡ ä¸ªæ ¸å¿ƒæ¿å—ï¼Œæ¯ä¸ªæ¿å—éƒ½æ˜¯å›´ç»•æˆ‘ä»¬å†…éƒ¨çœŸå®çš„ä½¿ç”¨åœºæ™¯æ¥çš„ã€‚</p>
<p><strong>1. ä¸»é¡µï¼ˆç³»ç»Ÿå…¥å£æ€»è§ˆï¼‰</strong><br/>
è¿™ä¸ªé—¨æˆ·çš„æ ¸å¿ƒå°±æ˜¯â€œæŠŠæ‰€æœ‰å†…éƒ¨ç³»ç»Ÿå±•ç¤ºå‡ºæ¥â€ã€‚åŒäº‹ç™»å½•ä¹‹åï¼Œé¦–é¡µçœ‹åˆ°çš„å°±æ˜¯è‡ªå·±æœ‰æƒé™è®¿é—®çš„æ‰€æœ‰å­ç³»ç»Ÿï¼ŒæŒ‰ä¸šåŠ¡åˆ†ç±»æ’å¥½ã€‚æƒ³è¿›å“ªä¸ªåå°ï¼Œç‚¹ä¸€ä¸‹å°±èƒ½è·³è¿‡å»ï¼Œä¸ç”¨å†åˆ°å¤„æ‰¾é“¾æ¥ã€è®°ä¹¦ç­¾ã€‚</p>
<p><strong>2. ç”¨æˆ·ç®¡ç†</strong><br/>
æ‰€æœ‰å…¬å¸çš„å‘˜å·¥è´¦å·éƒ½åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†ï¼Œä¸å†ç”±å„ä¸ªç³»ç»Ÿè‡ªå·±é€ ä¸€å¥—ã€‚æ–°åŒäº‹å…¥èŒçš„æ—¶å€™ï¼Œä»è¿™ä¸ªé—¨æˆ·æ³¨å†Œæˆ–å½•å…¥ä¸€æ¬¡è´¦æˆ·ï¼Œåé¢æ‰€æœ‰å­ç³»ç»Ÿéƒ½èƒ½é€šè¿‡å®ƒæ¥è¯†åˆ«ç”¨æˆ·ï¼Œä¸ç”¨æ¯ä¸ªåå°å†å„è‡ªç»´æŠ¤ä¸€ä»½è´¦å·ä½“ç³»ã€‚</p>
<p><strong>3. ç³»ç»Ÿç®¡ç†ï¼ˆå­ç³»ç»Ÿæ³¨å†Œï¼‰</strong><br/>
å…¬å¸å†…éƒ¨æ¯å¤šä¸€ä¸ªæ–°çš„ç§æœ‰åŒ–æœåŠ¡ï¼Œæ¯”å¦‚æ—¥å¿—åå°ã€ç›‘æ§å¹³å°ã€éƒ¨ç½²ç³»ç»Ÿï¼Œéƒ½è¦åœ¨è¿™é‡Œæ³¨å†Œä¸€éã€‚æ³¨å†Œä¹‹åé—¨æˆ·æ‰èƒ½å±•ç¤ºå…¥å£ï¼Œæ‰èƒ½ç»™ç”¨æˆ·æˆæƒï¼Œä¹Ÿæ–¹ä¾¿æˆ‘ä»¬åé¢åšè·³è½¬ã€åšå¥åº·æ£€æŸ¥ã€‚</p>
<p><strong>4. ç³»ç»Ÿå¥åº·æ£€æŸ¥</strong><br/>
æ—¢ç„¶é—¨æˆ·æŠŠæ‰€æœ‰å­ç³»ç»Ÿéƒ½é›†ä¸­å±•ç¤ºäº†ï¼Œé‚£ç³»ç»Ÿæ˜¯å¦åœ¨çº¿ã€åœ°å€æ˜¯å¦å¤±æ•ˆã€æ˜¯å¦å®•æœºï¼Œè¿™äº›éƒ½å¾—æœ‰åœ°æ–¹çœ‹ã€‚æ‰€ä»¥æˆ‘åŠ äº†å¥åº·æ£€æŸ¥æ¨¡å—ï¼Œå®šæ—¶å»å­ç³»ç»Ÿçš„ <code>/health</code> æˆ–æŒ‡å®šå¿ƒè·³æ¥å£æ¢æ´»ï¼Œä¸€æ—¦æŸä¸ªç³»ç»ŸæŒ‚äº†å¯ä»¥ç¬¬ä¸€æ—¶é—´çœ‹åˆ°ï¼Œé¿å…åŒäº‹ç‚¹è¿›å»æ‰å‘ç°æ‰“ä¸å¼€ã€‚</p>
<p><strong>5. ç”¨æˆ·æˆæƒï¼ˆå“ªä¸ªå‘˜å·¥èƒ½è¿›å“ªäº›åå°ï¼‰</strong><br/>
æ¯ä¸ªåŒäº‹ä¸å¯èƒ½çœ‹åˆ°å…¨éƒ¨ç³»ç»Ÿï¼Œæœ‰çš„äººè´Ÿè´£æ•°æ®ï¼Œæœ‰çš„äººè´Ÿè´£å®¡æ ¸ï¼Œæœ‰çš„äººè´Ÿè´£æ´»åŠ¨ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªæˆæƒæ¨¡å—ï¼Œæ ¹æ®å‘˜å·¥çš„è§’è‰²æˆ–å²—ä½ï¼ŒæŠŠå“ªäº›å­ç³»ç»Ÿèƒ½ç”¨ã€å“ªäº›ä¸èƒ½ç”¨ï¼Œä¸€æ¬¡æ€§é…ç½®å¥½ã€‚ä¸ç”¨æ¯ä¸ªç³»ç»Ÿå†…éƒ¨éƒ½å†åšä¸€å¥—æƒé™åˆ¤æ–­ã€‚</p>
<p><strong>6. IP ç™½åå•æ§åˆ¶</strong><br/>
å› ä¸ºè¿™ä¸ªåå°ç­‰äºæ˜¯å…¬å¸æ‰€æœ‰å†…éƒ¨ç³»ç»Ÿçš„â€œæ€»å…¥å£â€ï¼Œå®‰å…¨æ€§å¿…é¡»è¦åšã€‚é™¤äº†è´¦å·å¯†ç ä¹‹å¤–ï¼Œæˆ‘è¿˜åŠ äº† IP ç™½åå•ï¼Œé™åˆ¶åªæœ‰å…¬å¸ç½‘ç»œæˆ–ç‰¹å®šæ¥æºçš„æœºå™¨æ‰èƒ½è®¿é—®ï¼Œé¿å…è¢«å¤–éƒ¨æ¶æ„æ’åº“ã€‚</p>
<p><strong>7. æ“ä½œæ—¥å¿—</strong><br/>
ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„åå°ï¼Œæ“ä½œå®¡è®¡å¿…é¡»æœ‰ã€‚è°ç™»å½•äº†ã€è°æ”¹äº†å­ç³»ç»Ÿé…ç½®ã€ç»™è°æˆæƒäº†ä»€ä¹ˆæƒé™ï¼Œè¿™äº›éƒ½å¾—è®°å½•ä¸‹æ¥ï¼Œå‡ºäº†é—®é¢˜ä¹Ÿèƒ½å¿«é€Ÿè¿½è¸ªã€‚</p>
<p>æ•´ä½“æ‹†ä¸‹æ¥ï¼Œè¿™å‡ ä¸ªæ¨¡å—åŸºæœ¬èƒ½è¦†ç›–ä¼ä¸šé‡Œä¸€ä¸ªç»Ÿä¸€é—¨æˆ·è¯¥åšçš„äº‹ï¼šé›†ä¸­å…¥å£ã€ç»Ÿä¸€è´¦æˆ·ã€ç³»ç»Ÿæ³¨å†Œã€æƒé™åˆ†å‘ã€å®‰å…¨é˜²æŠ¤å’Œå®¡è®¡ã€‚åé¢å†ç»“åˆå•ç‚¹ç™»å½•çš„æµç¨‹ï¼Œå°±èƒ½æ„æˆä¸€å¥—å®Œæ•´çš„åå°ç®¡ç†ä¸­å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-4">åå°è®¾è®¡è§£è¯»</h3>
<p>å‰é¢æˆ‘ä¸»è¦è®²çš„æ˜¯æ•´ä½“çš„æ¶æ„å’Œæ€è·¯ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç»“åˆåå°é¡µé¢ï¼Œä¸€å—ä¸€å—è®²æˆ‘è¿™ä¸ªé—¨æˆ·åˆ°åº•æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚</p>
<h4 data-id="heading-5">1. ä¸»é¡µï¼ˆç³»ç»Ÿå…¥å£æ€»è§ˆï¼‰</h4>
<p>æˆ‘ä»¬ç™»å½•è¿›æ¥ä¹‹åçœ‹åˆ°çš„å°±æ˜¯é¦–é¡µï¼Œä¹Ÿæ˜¯é™¤äº†ç®¡ç†å‘˜ä¹‹å¤–çš„å‘˜å·¥ä¸»è¦ä½¿ç”¨çš„é¡µé¢ã€‚åŸºæœ¬åŠŸèƒ½å°±æ˜¯æŠŠå¯¹åº”å‘˜å·¥æœ‰æƒé™çš„æ‰€æœ‰å­ç³»ç»ŸæŒ‰ä¸šåŠ¡åˆ†ç±»å±•ç¤ºå‡ºæ¥ã€‚æˆ‘ä»¬å…¬å¸å†…éƒ¨å­ç³»ç»Ÿæ¯”è¾ƒå¤šï¼Œæœ‰ç ”å‘ç›¸å…³çš„ã€æœ‰å®¡æ ¸ç›¸å…³çš„ã€æœ‰ç›‘æ§ç›¸å…³çš„ï¼Œæˆ‘å°±æŒ‰ä¸šåŠ¡æ¨¡å—åˆ†äº†æ ç›®ï¼Œè¿™æ ·ä¸è‡³äºå…¨éƒ¨å †ä¸€èµ·å¤ªä¹±ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/053a90af47774ad4b1679da948ac8032~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=WH1W9TXsYbH9wZxsRzyANESNsyU%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯ä¸ªç³»ç»Ÿéƒ½æ˜¯ä¸€å¼ ç‹¬ç«‹çš„å¡ç‰‡ï¼Œå¡ç‰‡ä¸Šä¼šå±•ç¤ºç³»ç»Ÿåç§°å’Œä¸€å¥ç®€ä»‹ï¼Œè®©åŒäº‹ä¸€çœ¼èƒ½çœ‹å‡ºæ˜¯è°çš„åå°ã€å¹²ä»€ä¹ˆçš„ã€‚å¦‚æœåŒäº‹è¦è¿›å…¥æŸä¸ªåå°ï¼Œç›´æ¥ç‚¹è¿™å¼ å¡ç‰‡å°±è¡Œäº†ã€‚</p>
<p>ç‚¹å‡»åï¼Œé—¨æˆ·ä¼šå»å¸®ä»–ç”Ÿæˆä¸€ä¸ª codeï¼Œå†å¸¦ç€ code è·³è½¬åˆ°å¯¹åº”å­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿå†ç”¨è¿™ä¸ª code å®Œæˆç™»å½•ã€‚<br/>
å¯¹ç”¨æˆ·æ¥è¯´æ ¹æœ¬ä¸éœ€è¦å…³å¿ƒè¿™äº›ï¼Œä½“éªŒå°±æ˜¯ï¼š<strong>ç‚¹ä¸€ä¸‹å°±èƒ½è¿›å…¥åå°ï¼Œä¸éœ€è¦å†ç™»å½•ç¬¬äºŒæ¬¡ã€‚</strong></p>
<p>è¿™ä¸ªè®¾è®¡èƒ½è®©å¸¸ç”¨åå°çš„äººéå¸¸çœå¿ƒï¼Œä¹Ÿèƒ½é¿å…â€œæ¢è®¾å¤‡äº†æ‰€æœ‰åå°å…¥å£éƒ½æ‰¾ä¸åˆ°â€çš„æƒ…å†µã€‚</p>
<h4 data-id="heading-6">2. ç”¨æˆ·ç®¡ç†ï¼ˆå†…éƒ¨å‘˜å·¥ç»Ÿä¸€è´¦å·ä½“ç³»ï¼‰</h4>
<p>å…¬å¸å†…éƒ¨çš„åå°ç³»ç»Ÿå¤šäº†ä¹‹åï¼Œæœ€å®¹æ˜“ä¹±çš„å°±æ˜¯è´¦å·ä½“ç³»ï¼š<br/>
æ¯ä¸ªç³»ç»Ÿè‡ªå·±åšä¸€å¥—è´¦å·å¯†ç ï¼Œæƒé™ä¹Ÿå„ç®¡å„çš„ï¼Œéƒ¨é—¨è¶Šå¤šè¶Šéš¾ç»´æŠ¤ã€‚<br/>
æ‰€ä»¥åœ¨é—¨æˆ·é‡Œï¼Œæˆ‘ä¸“é—¨åšäº†ä¸€ä¸ªç»Ÿä¸€çš„ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ŒæŠŠæ‰€æœ‰å‘˜å·¥çš„è´¦å·å…¨éƒ¨é›†ä¸­åˆ°ä¸€å¤„ç®¡ç†ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨æˆ·åˆ—è¡¨ä¸Šèƒ½çœ‹åˆ°æ¯ä¸ªäººçš„åŸºç¡€ä¿¡æ¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ï¼‰ã€è§’è‰²ã€çŠ¶æ€ã€æœ€è¿‘ç™»å½•æ—¶é—´ã€æ˜¯å¦åœ¨çº¿ç­‰ç­‰ã€‚æ–°åŒäº‹å…¥èŒï¼Œåªéœ€è¦åœ¨è¿™é‡Œå»ºä¸€ä¸ªè´¦å·ï¼Œä»–å°±èƒ½ç›´æ¥è¿›å…¥è‡ªå·±æœ‰æƒé™çš„æ‰€æœ‰åå°ï¼Œä¸ç”¨å†åˆ°æ¯ä¸ªç³»ç»Ÿé‡Œé‡å¤åˆ›å»ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c6dd35d674941e1995d16f884270f8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=cDsD3QRkjpJwinT%2BJI%2BdQtGHVsk%3D" alt="image.png" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå› ä¸ºè¿™ä¸ªé—¨æˆ·æœ¬è´¨ä¸Šæ˜¯æ‰€æœ‰å†…éƒ¨åå°çš„â€œæ€»å…¥å£â€ï¼Œå®‰å…¨æ€§è¦æ±‚æ¯”æ™®é€šä¸šåŠ¡ç³»ç»Ÿé«˜å¾—å¤šï¼Œæ‰€ä»¥æˆ‘åœ¨ç”¨æˆ·ä½“ç³»é‡ŒåŠ äº†ä¸¤ä¸ªéå¸¸å…³é”®çš„åŠŸèƒ½ï¼š</p>
<p><strong>â‘  åŒå› å­éªŒè¯ï¼ˆ2FAï¼‰</strong></p>
<p>åå°å…¥å£ä¸€æ—¦æ³„éœ²ï¼Œç›¸å½“äºæ‰€æœ‰å­ç³»ç»Ÿçš„é—¨éƒ½è¢«æ‰“å¼€äº†ã€‚<br/>
å†…éƒ¨ç¯å¢ƒé‡Œåˆç»å¸¸å‡ºç°å¯†ç è¢«å…±äº«ã€å¼±å¯†ç ã€å¯†ç æ³„éœ²æ²¡äººçŸ¥é“è¿™äº›æƒ…å†µï¼Œæ‰€ä»¥ç»™è´¦å·åŠ ä¸€é“ 2FA å¯ä»¥å¤§å¹…æé«˜å®‰å…¨æ€§ã€‚<br/>
åªè¦ç»‘å®šäº† 2FAï¼Œå°±ç®—å¯†ç è¢«åˆ«äººæ‹¿åˆ°äº†ï¼Œä¹Ÿè¿›ä¸æ¥ã€‚</p>
<p><strong>â‘¡ è¸¢ä¸‹çº¿ï¼ˆå¼ºåˆ¶ä¸‹çº¿ï¼‰</strong></p>
<p>è¿™ä¸ªåœ¨å†…éƒ¨ç¯å¢ƒç‰¹åˆ«é‡è¦ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å‘ç°è´¦å·å¼‚å¸¸ç™»å½•</li>
<li>æŸä¸ªç”¨æˆ·æ­£åœ¨æ“ä½œä¸è¯¥æ“ä½œçš„ä¸œè¥¿</li>
<li>ä¸´æ—¶éœ€è¦é©¬ä¸Šæ”¶å›æŸäººçš„æƒé™</li>
<li>ç”¨æˆ·ç¦»èŒä½†è¿˜ä¿æŒç™»å½•çŠ¶æ€</li>
</ul>
<p>ç®¡ç†å‘˜åœ¨åå°ç‚¹ä¸€ä¸‹â€œè¸¢ä¸‹çº¿â€ï¼Œå½“å‰ç”¨æˆ·æ‰€æœ‰ token ä¼šç«‹åˆ»å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç»§ç»­ã€‚<br/>
å¯¹äºå†…éƒ¨åå°æ¥è¯´ï¼Œè¿™åŠŸèƒ½ç®€ç›´æ˜¯æ•‘å‘½çš„ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œç”¨æˆ·ç®¡ç†æ¨¡å—å°±æ˜¯ä¸¤ä¸ªå­—ï¼š<strong>ç»Ÿä¸€</strong>ã€‚<br/>
æŠŠè´¦å·ã€æƒé™ã€å®‰å…¨éƒ½ç»Ÿä¸€èµ·æ¥ç®¡ç†ï¼Œåé¢æ‰€æœ‰å­ç³»ç»Ÿéƒ½èƒ½ç›´æ¥å¤ç”¨è¿™ä¸€å¥—ä½“ç³»ï¼Œå†ä¹Ÿä¸ä¼šå‡ºç°â€œå¯†ç åœ¨å“ªâ€â€œè¿™ä¸ªç³»ç»Ÿæ˜¯è°ç®¡ç†çš„â€è¿™ç§æ··ä¹±æƒ…å†µã€‚</p>
<h4 data-id="heading-7">3. ç³»ç»Ÿç®¡ç†ï¼ˆå­ç³»ç»Ÿæ³¨å†Œï¼‰</h4>
<p>è¿™ä¸ªæ¨¡å—å…¶å®å°±æ˜¯æ•´ä¸ªå¹³å°çš„â€œç³»ç»Ÿå­—å…¸â€ã€‚<br/>
æˆ‘ä»¬å…¬å¸çš„åå°ç³»ç»Ÿæœ¬æ¥å°±å¤šï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½æ˜¯ç§æœ‰åŒ–éƒ¨ç½²ï¼Œåƒæµ‹è¯•åå°ã€æ­£å¼åå°ã€æ—¥å¿—å¹³å°ã€ç›‘æ§å¹³å°ã€æ„å»ºå‘å¸ƒå¹³å°â€¦â€¦è¶Šåšè¶Šå¤šï¼Œä¸ç»Ÿä¸€ç®¡ç†çš„è¯ï¼Œè°éƒ½è®°ä¸ä½å“ªé‡Œè¿˜æœ‰ä¸ªåå°ã€‚</p>
<p>æ‰€ä»¥æˆ‘åœ¨é—¨æˆ·é‡Œåšäº†ä¸€ä¸ªéå¸¸å…³é”®çš„åŠŸèƒ½ï¼š<strong>ç³»ç»Ÿæ³¨å†Œ</strong>ã€‚<br/>
ä½œç”¨å°±æ˜¯å‘Šè¯‰é—¨æˆ·â€”â€”â€œæˆ‘ä»¬å…¬å¸ç›®å‰åˆ°åº•æœ‰å“ªäº›åå°ç³»ç»Ÿï¼Œå®ƒä»¬é•¿ä»€ä¹ˆæ ·ã€å…¥å£åœ¨å“ªã€æ€ä¹ˆè®¿é—®â€ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5830fa087413473c94f9917e2e4600a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=Mvc5shJ53IdM9pzS6LU1%2BenRieg%3D" alt="image.png" loading="lazy"/>
æ¯ä¸€ä¸ªåå°ç³»ç»Ÿåœ¨è¿™é‡Œéƒ½å¯ä»¥ç‹¬ç«‹é…ç½®ï¼š</p>
<ul>
<li><strong>ç³»ç»Ÿåç§°</strong> â€”â€” å±•ç¤ºåœ¨é¦–é¡µå¡ç‰‡ä¸Šçš„åå­—</li>
<li><strong>æ¨¡å— ID</strong> â€”â€” åç»­å­ç³»ç»Ÿæ¥å…¥æ—¶ä¼šç”¨åˆ°</li>
<li><strong>ç³»ç»Ÿåˆ†ç±»</strong> â€”â€” æ¯”å¦‚åå°ç³»ç»Ÿã€ç›‘æ§ç³»ç»Ÿã€æ—¥å¿—ç³»ç»Ÿã€æ„å»ºå‘å¸ƒç­‰ï¼Œé¦–é¡µä¼šæŒ‰åˆ†ç±»åˆ†ç»„</li>
<li><strong>å…¥å£åœ°å€</strong> â€”â€” ç‚¹å‡»å¡ç‰‡è·³è½¬è¿‡å»çš„ URL</li>
<li><strong>çŠ¶æ€</strong> â€”â€” æ˜¯å¦å¯ç”¨</li>
<li><strong>åˆ›å»º/æ›´æ–°æ—¶é—´</strong> â€”â€” æ–¹ä¾¿è¿ç»´æ’æŸ¥</li>
<li><strong>æ“ä½œæŒ‰é’®</strong>ï¼ˆç¼–è¾‘ / ç¦ç”¨ / åˆ é™¤ï¼‰</li>
</ul>
<p>è‡³äºæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åšæˆä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿç®¡ç†æ¨¡å—ï¼Ÿ</p>
<p>å› ä¸ºå†…éƒ¨åå°æ•°é‡ä¸€æ—¦å¤šèµ·æ¥ï¼Œæˆ‘ä»¬ä¸å¯èƒ½é å†™æ­»é…ç½®æˆ–é è„‘å­è®°ä½ã€‚<br/>
æ‰€ä»¥æœ‰äº†è¿™ä¸ªåˆ—è¡¨ï¼Œä»»ä½•ç³»ç»Ÿå˜æ›´éƒ½å¯ä»¥ç»Ÿä¸€ç®¡ç†ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æŸä¸ªåå°æ¢åŸŸåäº† â†’ åœ¨è¿™é‡Œæ”¹ä¸€æ¬¡ï¼Œå…¨å…¬å¸ç”Ÿæ•ˆ</li>
<li>æ–°åšäº†ä¸€ä¸ªå­ç³»ç»Ÿ â†’ åœ¨è¿™é‡Œç‚¹â€œæ–°å¢ç³»ç»Ÿâ€ï¼Œé¦–é¡µå°±ä¼šè‡ªåŠ¨å±•ç¤º</li>
<li>æŸä¸ªæµ‹è¯•ç¯å¢ƒè¦ä¸´æ—¶ä¸‹çº¿ â†’ åœ¨è¿™é‡Œç‚¹â€œç¦ç”¨â€</li>
</ul>
<p>é—¨æˆ·é¦–é¡µä¸Šçš„æ‰€æœ‰â€œå¡ç‰‡â€ï¼Œéƒ½æ˜¯ç›´æ¥ä»è¿™ä¸ªåˆ—è¡¨åŠ¨æ€æ¸²æŸ“å‡ºæ¥çš„ï¼Œ<br/>
è€Œä¸æ˜¯å†™æ­»åœ¨ä»£ç é‡Œã€‚è¿™æ ·åæœŸç³»ç»Ÿå†å¤šï¼Œä¹Ÿä¸ä¼šä¹±ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œâ€œç³»ç»Ÿç®¡ç†â€å°±æ˜¯æ•´ä¸ªå¹³å°çš„â€œç³»ç»Ÿèµ„äº§ä¸­å¿ƒâ€ã€‚<br/>
åå°å¤šä¹Ÿä¸æ€•ï¼Œåªè¦è¿™é‡Œç™»è®°æ¸…æ¥šï¼Œæ•´ä¸ªé—¨æˆ·å°±èƒ½éšæ—¶æ‰©å±•ã€éšæ—¶æ›´æ–°ã€‚</p>
<h4 data-id="heading-8">4. ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼ˆæ¢æ´»ç›‘æ§ï¼‰</h4>
<p>æ—¢ç„¶é—¨æˆ·å·²ç»æŠŠæ‰€æœ‰å­ç³»ç»Ÿéƒ½ç»Ÿä¸€å±•ç¤ºå‡ºæ¥äº†ï¼Œé‚£æ¯ä¸ªç³»ç»Ÿç°åœ¨æ˜¯ä¸æ˜¯â€œåœ¨çº¿â€ï¼Œæˆ‘ä»¬è‚¯å®šä¹Ÿè¦èƒ½çœ‹åˆ°ã€‚<br/>
ä¸ç„¶åŒäº‹ä¸€ç‚¹å‡»æŸä¸ªåå°ï¼Œç»“æœå‘ç°æ‰“ä¸å¼€ï¼Œè¿˜ä»¥ä¸ºæ˜¯è‡ªå·±ç½‘ç»œé—®é¢˜ï¼Œå…¶å®ç³»ç»Ÿæ—©å°±æŒ‚äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘åœ¨é—¨æˆ·é‡Œåšäº†ä¸€ä¸ª <strong>å¥åº·æ£€æŸ¥æ¨¡å—</strong>ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a5321f45d364adc865060d27f3d3954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=q188Y0f1Smtfg1g6moGfuktdeME%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ¯ä¸ªå­ç³»ç»Ÿéƒ½ä¼šé…ç½®è‡ªå·±çš„å¥åº·æ£€æŸ¥åœ°å€ï¼ˆä¸€èˆ¬å°±æ˜¯ <code>/health</code> æˆ– <code>/actuator/health</code>ï¼‰</li>
<li>é—¨æˆ·ä¼šå®šæ—¶å»è¯·æ±‚è¿™äº›åœ°å€</li>
<li>æ ¹æ®å“åº”æƒ…å†µæ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ­£å¸¸</li>
<li>è¿˜ä¼šè®°å½•å“åº”æ—¶é—´ã€æœ€åæ£€æµ‹æ—¶é—´ï¼Œæ–¹ä¾¿æ’æŸ¥</li>
</ul>
<p><strong>æ¯”å¦‚å›¾é‡Œè¿™æ ·ï¼šå“ªä¸ªç³»ç»Ÿåœ¨çº¿ã€å»¶è¿Ÿå¤šå°‘ã€å“ªä¸ªè®¿é—®å¤±è´¥ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ã€‚</strong></p>
<p>è¿™ä¸ªæ¨¡å—å¯¹å¤šåå°ã€å¤šç¯å¢ƒç‰¹åˆ«æœ‰ç”¨ã€‚å› ä¸ºå¾ˆå¤šæ—¶å€™æŸäº›åå°å¹¶ä¸æ˜¯æˆ‘ä»¬è´Ÿè´£çš„ï¼Œæœ‰äº†è¿™ä¸ªé¡µé¢ä¹‹åï¼Œå°±èƒ½å¿«é€Ÿåˆ¤æ–­é—®é¢˜åˆ°åº•æ˜¯åœ¨å…¥å£ã€åœ¨ç³»ç»Ÿæœ¬èº«ã€è¿˜æ˜¯åœ¨ç½‘ç»œã€‚</p>
<p><strong>å¥åº·æ£€æŸ¥æ¢æ´»æ¥å£å¤§æ¦‚æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</strong></p>
<p>åšæ³•å…¶å®å¾ˆç®€å•ï¼š</p>
<ol>
<li>
<p><strong>ç³»ç»Ÿç®¡ç†é‡Œç™»è®°å¥åº·æ£€æŸ¥åœ°å€</strong>ï¼ˆæ¯”å¦‚ <code>https://xxx.com/health</code>ï¼‰</p>
</li>
<li>
<p><strong>åå°ç”¨å®šæ—¶ä»»åŠ¡ï¼ˆScheduledï¼‰æ¯éš” N ç§’å‘ä¸€æ¬¡ GET è¯·æ±‚</strong></p>
</li>
<li>
<p><strong>æ ¹æ®è¿”å›ç»“æœæ›´æ–°æ•°æ®åº“çŠ¶æ€</strong></p>
<ul>
<li>200 â†’ æ­£å¸¸</li>
<li>è¶…æ—¶ / å¼‚å¸¸ â†’ å¼‚å¸¸</li>
</ul>
</li>
<li>
<p><strong>å‰ç«¯å±•ç¤ºçŠ¶æ€ã€å“åº”æ—¶é—´ã€æœ€åæ£€æµ‹æ—¶é—´</strong></p>
</li>
<li>
<p>ç”¨æˆ·å¯ä»¥ç‚¹å‡»â€œåˆ·æ–°â€æŒ‰é’®ç«‹åˆ»é‡æ–°æ¢æ´»ä¸€æ¬¡</p>
</li>
</ol>
<p>æ•´ä¸ªé€»è¾‘ä¸å¤æ‚ï¼Œä½†å®é™…æ•ˆæœéå¸¸æœ‰ç”¨ã€‚<br/>
å°¤å…¶æ˜¯åœ¨å¤šåå°ã€å¤šç¯å¢ƒçš„åœºæ™¯ä¸‹ï¼Œåƒç³»ç»Ÿå¶å‘è¶…æ—¶ã€æŸä¸ªç¯å¢ƒæŒ‚æ‰ã€æˆ–è€…æŸä¸ªæœåŠ¡æ­£åœ¨å‘å¸ƒï¼Œéƒ½èƒ½åœ¨è¿™é‡Œç¬¬ä¸€æ—¶é—´çœ‹å‡ºæ¥ï¼Œçœå¾—ç‚¹è¿›å»æ‰å‘ç°æ‰“ä¸å¼€ã€‚</p>
<p>å¦‚æœæƒ³åšå¾—æ›´å®Œå–„ä¸€ç‚¹ï¼Œå…¶å®è¿˜å¯ä»¥åŠ ä¸Š<strong>ç³»ç»Ÿé€šçŸ¥</strong>èƒ½åŠ›ï¼Œæ¯”å¦‚æŸä¸ªåå°è¿ç»­æ¢æ´»å¤±è´¥å°±è‡ªåŠ¨å‘ä¼ä¸šå¾®ä¿¡/é‚®ä»¶æé†’ã€‚<br/>
è¿™æ¬¡çš„ Demo æˆ‘æš‚æ—¶æ²¡å†™è¿™ä¸€å—ï¼Œä½†å¦‚æœä½œä¸ºæ­£å¼å†…éƒ¨å¹³å°ï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸å»ºè®®åšä¸Šï¼Œä¼šæ›´æ¥è¿‘å¤§å‚çš„è¿ç»´ä½“ç³»ã€‚</p>
<h4 data-id="heading-9">5. ç”¨æˆ·æˆæƒï¼ˆæ§åˆ¶å‘˜å·¥èƒ½è¿›å…¥å“ªäº›åå°ï¼‰</h4>
<p>æœ‰äº†ç»Ÿä¸€çš„ç”¨æˆ·ä½“ç³»ä¹‹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åšæƒé™åˆ†é…ï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶â€œè°èƒ½è®¿é—®å“ªäº›åå°ç³»ç»Ÿâ€ã€‚<br/>
è¿™ä¸ªæ¨¡å—æ˜¯æ•´ä¸ªé—¨æˆ·çš„æ ¸å¿ƒä¹‹ä¸€ï¼ŒåŸºæœ¬æ‰€æœ‰æƒé™ç›¸å…³çš„é€»è¾‘éƒ½ä»è¿™é‡Œå¼€å§‹ã€‚</p>
<p>ç•Œé¢å¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b80abb936b744379926e3ff70dff555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=M2hDpRJmmkEc5BJlrBrWmb6tpPo%3D" alt="image.png" loading="lazy"/>
å·¦ä¾§æ˜¯æ‰€æœ‰å‘˜å·¥åˆ—è¡¨ï¼Œç‚¹é€‰æŸä¸ªå‘˜å·¥åï¼Œå³ä¾§ä¼šå±•ç¤ºä»–å½“å‰å·²ç»æ‹¥æœ‰çš„åå°ç³»ç»Ÿæƒé™ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç»§ç»­æ–°å¢ã€å–æ¶ˆæŸäº›ç³»ç»Ÿçš„è®¿é—®æƒé™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/033a57a38e8c456eb68cd294ea085972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=G%2FYNRVz%2FVdyB2uzPephIb3coxRo%3D" alt="image.png" loading="lazy"/></p>
<p>æ•´ä¸ªæˆæƒè¿‡ç¨‹éå¸¸ç›´è§‚ï¼š</p>
<ul>
<li>é€‰ä¸­å·¦ä¾§çš„å‘˜å·¥</li>
<li>å³ä¾§è‡ªåŠ¨åˆ—å‡ºæ‰€æœ‰å¯æˆæƒçš„ç³»ç»Ÿ</li>
<li>å·²æˆæƒçš„ä¼šé«˜äº®æ˜¾ç¤º</li>
<li>æƒ³ç»™è°å¼€æƒé™ã€å…³æƒé™ï¼Œç›´æ¥ç‚¹ä¸€ä¸‹å³å¯</li>
<li>æœ€åç‚¹å‡»â€œä¿å­˜æˆæƒâ€</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0b11cafc61947f590d2542ad024c1d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=sSUOzYzhtO1FJFKTWf75RTzdAa4%3D" alt="shouquan-ezgif.com-video-to-gif-converter.gif" loading="lazy"/>
è¿™ç§è®¾è®¡å¯¹æˆ‘ä»¬çš„å†…éƒ¨åœºæ™¯éå¸¸é€‚åˆï¼Œå› ä¸ºæ¯ä¸ªäººçš„èŒè´£å·®å¼‚éƒ½å¾ˆå¤§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ–°æ¥çš„è¿è¥å¯èƒ½åªéœ€è¦æ•°æ®åå°ï¼Œä¸éœ€è¦ Prometheus æˆ– GitLab</li>
<li>æŠ€æœ¯å›¢é˜Ÿéœ€è¦å¤šä¸ªç³»ç»Ÿæƒé™ï¼Œæ¯”å¦‚æ„å»ºå¹³å°ã€ç›‘æ§ä¸­å¿ƒã€æ—¥å¿—åˆ†æ</li>
<li>è´¢åŠ¡ã€å®¡æ ¸ã€å‘å¸ƒç­‰éƒ¨é—¨å„è‡ªæœ‰å®Œå…¨ä¸ä¸€æ ·çš„åå°å…¥å£</li>
<li>ä¸€äº›æ•æ„Ÿç³»ç»Ÿï¼ˆä¾‹å¦‚è¿ç»´ç³»ç»Ÿã€ç”Ÿäº§ç®¡ç†åå°ï¼‰åªèƒ½å¼€æ”¾ç»™ç‰¹å®šäººå‘˜</li>
</ul>
<p>æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢é‡Œç»Ÿä¸€ç®¡ç†ï¼Œè€Œä¸éœ€è¦è®©æ¯ä¸ªå­ç³»ç»Ÿå†åšä¸€å¥—è‡ªå·±çš„æƒé™ä½“ç³»ã€‚</p>
<p>è¿™ä¸€ç‚¹éå¸¸å…³é”®ï¼š<strong>å­ç³»ç»Ÿä¸éœ€è¦å†ç»´æŠ¤è‡ªå·±çš„ç”¨æˆ·è¡¨ã€è§’è‰²è¡¨ã€æƒé™å…³ç³»è¡¨ç­‰å¤æ‚é€»è¾‘ï¼Œæ‰€æœ‰æƒé™éƒ½ç”±é—¨æˆ·æ¥ç®¡ç†ã€‚</strong><br/>
å­ç³»ç»Ÿåªéœ€è¦åšä¸€ä»¶äº‹ï¼šæ”¶åˆ° code â†’ å‘è®¤è¯ä¸­å¿ƒæ¢ç”¨æˆ·ä¿¡æ¯ â†’ åˆ¤æ–­æ˜¯å¦å…è®¸è¿›å…¥å³å¯ã€‚</p>
<p>æˆæƒé€»è¾‘ç®€å•ã€ç»Ÿä¸€ã€å¯æ§ï¼Œä¹Ÿéå¸¸ç¬¦åˆå…¬å¸å†…éƒ¨å¤šåå°åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-10">6. IP ç™½åå•ï¼ˆå®‰å…¨æ§åˆ¶ï¼‰</h4>
<p>å› ä¸ºè¿™ä¸ªé—¨æˆ·ç­‰äºæ‰€æœ‰å†…éƒ¨ç³»ç»Ÿçš„æ€»å…¥å£ï¼Œæ‰€ä»¥å®‰å…¨å¿…é¡»åŠ å¼ºã€‚æˆ‘åšäº†ä¸€ä¸ª IP ç™½åå•æ¨¡å—ï¼Œç±»ä¼¼å…¬å¸çš„è®¿é—®æ§åˆ¶ï¼š</p>
<ul>
<li>åªæœ‰å…¬å¸ç½‘ç»œã€å†…ç½‘æœåŠ¡å™¨ã€ç‰¹å®šåœ°å€æ‰èƒ½è®¿é—®</li>
<li>ä¸åœ¨ç™½åå•çš„ç›´æ¥æ‹¦æˆª</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35b06e3d1e764dcc9a81846f888474fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=8v2Fb8efI%2FPO3O43JKJCznP34iI%3D" alt="image.png" loading="lazy"/>
è¿™æ ·å¯ä»¥é¿å…å¤–éƒ¨æ¶æ„è®¿é—®ï¼Œæ¯”å¦‚æ’åº“æ”»å‡»ã€æ¥å£æ‰«çˆ†ã€å¼±å¯†ç å°è¯•ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-11">7. æ“ä½œæ—¥å¿—ï¼ˆå®¡è®¡è®°å½•ï¼‰</h4>
<p>åå°ç³»ç»Ÿå¿…é¡»æœ‰æ“ä½œæ—¥å¿—ã€‚<br/>
ä¸ç®¡æ˜¯ä¿®æ”¹äº†æƒé™ã€æ·»åŠ äº†ç”¨æˆ·ã€æ›´æ–°äº†å­ç³»ç»Ÿé…ç½®ï¼Œè¿˜æ˜¯ç™»å½•ã€é€€å‡ºï¼Œéƒ½è¦è®°å½•ä¸‹æ¥ï¼š</p>
<ul>
<li>è°æ“ä½œçš„</li>
<li>æ“ä½œå†…å®¹æ˜¯ä»€ä¹ˆ</li>
<li>æ“ä½œæ—¶é—´</li>
<li>æ“ä½œæ¥æº IP</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b0cfacc64e247859d7ffc20cce12013~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=TEX4tHWsmDj0gNekrXsoKWiVp8E%3D" alt="image.png" loading="lazy"/>
ä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå®šä½åˆ°å…·ä½“çš„äººå’Œæ“ä½œã€‚</p>
<hr/>
<h3 data-id="heading-12">æ•°æ®è¡¨è®¾è®¡</h3>
<p>è¯´å®Œåå°çš„å‡ ä¸ªç®¡ç†æ¨¡å—ä¹‹åï¼Œæ¥ä¸‹æ¥å°±è¦çœ‹å®ƒä»¬åº•å±‚çš„æ•°æ®ç»“æ„äº†ã€‚<br/>
å…¶å®æ•´ä¸ªç»Ÿä¸€é—¨æˆ·çš„å¹³å°æ•°æ®ç»“æ„å¹¶ä¸å¤æ‚ï¼ŒçœŸæ­£çš„æ ¸å¿ƒä¹Ÿå°±å››å¼ è¡¨ï¼Œåˆ†åˆ«è´Ÿè´£ï¼šç”¨æˆ·ã€ç³»ç»Ÿåˆ†ç±»ã€ç³»ç»Ÿä¿¡æ¯ã€ç”¨æˆ·æˆæƒã€‚</p>
<p>æˆ‘è¿™é‡ŒæŠŠå…³é”®è¡¨ç»“æ„éƒ½è´´å‡ºæ¥ï¼Œå¹¶ç»“åˆä¸šåŠ¡è¯´æ˜ä¸€ä¸‹è®¾è®¡æ€è·¯ã€‚</p>
<h4 data-id="heading-13">1. ç”¨æˆ·ä¿¡æ¯è¡¨ï¼š<code>sys_user</code></h4>
<p>è¿™æ˜¯æ•´ä¸ªé—¨æˆ·çš„è´¦å·æ ¹è¡¨ï¼Œæ‰€æœ‰å‘˜å·¥çš„ç™»å½•ä¿¡æ¯éƒ½åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡å‘¢ï¼Ÿ<br/>
å› ä¸ºé—¨æˆ·æ˜¯æ‰€æœ‰åå°çš„å…¥å£ï¼Œä¸€ä¸ªå‘˜å·¥æœ‰ä¸”åªåº”è¯¥åœ¨é—¨æˆ·è¿™é‡Œç»´æŠ¤ä¸€æ¬¡è´¦å·ï¼Œä¸å†è®©æ¯ä¸ªå­ç³»ç»Ÿé‡å¤å»ºè¡¨ã€é‡å¤ç»´æŠ¤è´¦å·ã€‚</p>
<p>è¿™é‡Œä¼šå­˜å‚¨ï¼š</p>
<ul>
<li>ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰</li>
<li>åŠ å¯†åçš„å¯†ç </li>
<li>é‚®ç®±ã€æ‰‹æœºå·</li>
<li>2FA å¯†é’¥ï¼ˆgoogle_secretï¼‰</li>
<li>çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰</li>
<li>æœ€è¿‘ç™»å½•æ—¶é—´</li>
<li>åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_user` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `username` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰'</span>,
  `password` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åŠ å¯†åçš„å¯†ç '</span>,
  `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é‚®ç®±'</span>,
  `phone` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‰‹æœºå·'</span>,
  `google_secret` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'2FA å¯†é’¥'</span>,
  `avatar` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤´åƒåœ°å€'</span>,
  `status` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š1å¯ç”¨ï¼Œ0ç¦ç”¨'</span>,
  `last_login_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœ€è¿‘ç™»å½•æ—¶é—´'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updated_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `username` (`username`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-14">2. ç³»ç»Ÿåˆ†ç±»è¡¨ï¼š<code>sys_category</code></h4>
<p>é¦–é¡µå±•ç¤ºéœ€è¦åˆ†ç»„ï¼Œå¦åˆ™å‡ ç™¾ä¸ªç³»ç»Ÿæ”¾ä¸€èµ·ä¼šä¹±æˆä¸€é”…ç²¥ã€‚<br/>
æ‰€ä»¥æˆ‘ä»¬ç”¨åˆ†ç±»è¡¨ç”¨æ¥å®šä¹‰ç³»ç»Ÿçš„ä¸šåŠ¡åˆ†ç»„ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åå°ç³»ç»Ÿ</li>
<li>æ„å»ºå‘å¸ƒ</li>
<li>æ•°æ®åˆ†æ</li>
<li>æ—¥å¿—ç³»ç»Ÿ</li>
<li>ç›‘æ§ç³»ç»Ÿ</li>
</ul>
<p>ä¸»è¦ç”¨äºæ˜¾ç¤ºï¼Œä¸æ¶‰åŠæƒé™ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_category` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `category_code` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç±»æ ‡è¯†ï¼ˆè‹±æ–‡ç¼©å†™ï¼Œå¦‚ backendã€deployï¼‰'</span>,
  `category_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç±»åç§°ï¼ˆä¸­æ–‡ï¼Œå¦‚ åå°ç³»ç»Ÿï¼‰'</span>,
  `sort_no` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ’åºå·ï¼ˆè¶Šå¤§è¶Šé å‰ï¼‰'</span>,
  `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤‡æ³¨è¯´æ˜'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updated_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `category_code` (`category_code`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç³»ç»Ÿåˆ†ç±»è¡¨'</span>;
</code></pre>
<h4 data-id="heading-15">3. æ¥å…¥ç³»ç»Ÿä¿¡æ¯è¡¨ï¼š<code>sys_application</code></h4>
<p>è¿™å¼ è¡¨è®°å½• <strong>å…¬å¸æ‰€æœ‰çš„åå°ç³»ç»Ÿ</strong>ï¼Œæ˜¯ç»Ÿä¸€é—¨æˆ·æœ€å…³é”®çš„ä¸€å¼ ã€‚</p>
<p>æ¯ä¸ªå­ç³»ç»Ÿéƒ½ä¼šåœ¨è¿™é‡Œç™»è®°ï¼š</p>
<ul>
<li>ç³»ç»Ÿ IDï¼ˆè‹±æ–‡ï¼‰</li>
<li>ç³»ç»Ÿåç§°ï¼ˆä¸­æ–‡ï¼‰</li>
<li>ç³»ç»Ÿä»‹ç»</li>
<li>å…¥å£åœ°å€ï¼ˆç‚¹å‡»å¡ç‰‡è·³è¿‡å»ç”¨ï¼‰</li>
<li>å›¾æ ‡åœ°å€</li>
<li>çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰</li>
<li>åˆ†ç±» IDï¼ˆå…³è” <code>sys_category</code>ï¼‰</li>
</ul>
<p>é—¨æˆ·é¦–é¡µé‚£äº›å¡ç‰‡ã€å›¾æ ‡ã€åˆ†ç»„å±•ç¤ºï¼Œå…¨éƒ¨æ¥æºäºè¿™å¼ è¡¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_application` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `category_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ†ç±»IDï¼ˆå…³è”sys_categoryï¼‰'</span>,
  `app_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»Ÿå”¯ä¸€æ ‡è¯†ï¼ˆè‹±æ–‡ç¼©å†™ï¼‰'</span>,
  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»Ÿåç§°ï¼ˆä¸­æ–‡åï¼‰'</span>,
  `app_desc` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»Ÿå‰¯æ ‡é¢˜/æè¿°'</span>,
  `entry_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»Ÿå…¥å£åœ°å€'</span>,
  `icon` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»Ÿå›¾æ ‡åœ°å€'</span>,
  `status` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š1å¯ç”¨ï¼Œ0ç¦ç”¨'</span>,
  `sort_no` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'åˆ†ç±»å†…æ’åºå·'</span>,
  `created_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updated_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `app_id` (`app_id`),
  KEY `fk_app_category` (`category_id`),
  <span class="hljs-keyword">CONSTRAINT</span> `fk_app_category` <span class="hljs-keyword">FOREIGN</span> KEY (`category_id`) <span class="hljs-keyword">REFERENCES</span> `sys_category` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æ¥å…¥ç³»ç»Ÿä¿¡æ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-16">4. ç”¨æˆ·æˆæƒå…³ç³»è¡¨ï¼š<code>sys_user_application</code></h4>
<p>æ‰€æœ‰æƒé™æ§åˆ¶éƒ½ä¾èµ–è¿™å¼ è¡¨ã€‚</p>
<p>è¿™å¼ è¡¨çš„ä½œç”¨æ˜¯ï¼š<strong>è®°å½•æŸä¸ªå‘˜å·¥å¯ä»¥è®¿é—®å“ªäº›åå°ç³»ç»Ÿ</strong>ã€‚</p>
<p>å…³ç³»æ˜¯å¤šå¯¹å¤šï¼š</p>
<ul>
<li>ä¸€ä¸ªå‘˜å·¥å¯ä»¥æœ‰å¤šä¸ªç³»ç»Ÿæƒé™</li>
<li>ä¸€ä¸ªç³»ç»Ÿä¹Ÿå¯ä»¥æˆæƒç»™å¤šä¸ªå‘˜å·¥</li>
</ul>
<p>æ‰€ä»¥ç”¨äº† <code>(user_id, app_id)</code> å”¯ä¸€ç´¢å¼•æ¥é¿å…é‡å¤æˆæƒã€‚</p>
<p>å­ç³»ç»Ÿç™»å½•æ—¶ï¼Œé€šè¿‡é—¨æˆ·éªŒè¯ codeï¼Œå°±èƒ½çŸ¥é“è¯¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›å…¥ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_user_application` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `user_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `app_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç³»ç»ŸID'</span>,
  `granted_at` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æˆæƒæ—¶é—´'</span>,
  `granted_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æˆæƒäºº'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_user_app` (`user_id`,`app_id`),
  KEY `fk_app` (`app_id`),
  <span class="hljs-keyword">CONSTRAINT</span> `fk_app` <span class="hljs-keyword">FOREIGN</span> KEY (`app_id`) <span class="hljs-keyword">REFERENCES</span> `sys_application` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE,
  <span class="hljs-keyword">CONSTRAINT</span> `fk_user` <span class="hljs-keyword">FOREIGN</span> KEY (`user_id`) <span class="hljs-keyword">REFERENCES</span> `sys_user` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç”¨æˆ·ä¸ç³»ç»Ÿæˆæƒå…³ç³»è¡¨'</span>;
</code></pre>
<hr/>
<h3 data-id="heading-17">åç«¯æ¥å£è®¾è®¡</h3>
<p>åœ¨å®ç°é—¨æˆ·å…ç™»å­ç³»ç»Ÿä¹‹å‰ï¼Œæˆ‘ä»¬åç«¯æ¥å£è®¾è®¡å…¶å®åªéœ€è¦å‡†å¤‡ä¸¤ä¸ªæ ¸å¿ƒæ¥å£ï¼š</p>
<ol>
<li><strong>åˆ›å»ºæˆæƒç æ¥å£</strong>ï¼ˆè®¤è¯ä¸­å¿ƒ â†’ å­ç³»ç»Ÿï¼‰<br/>
ç”¨æ¥ç”Ÿæˆä¸€æ¬¡æ€§ codeï¼Œå¹¶å‘ç»™å­ç³»ç»Ÿã€‚</li>
<li><strong>æ ¡éªŒæˆæƒç æ¥å£</strong>ï¼ˆå­ç³»ç»Ÿ â†’ è®¤è¯ä¸­å¿ƒï¼‰<br/>
å­ç³»ç»Ÿæ‹¿ code æ¥æ¢å–ç”¨æˆ·ä¿¡æ¯ï¼Œå®Œæˆå…ç™»å½•ã€‚</li>
</ol>
<p>æ•´ä¸ªæµç¨‹å°±æ˜¯å›´ç»• <strong>â€œå‘ code â†’ ç”¨ code æ¢ç”¨æˆ·ä¿¡æ¯â€</strong> ä¸¤ä»¶äº‹æ¥å±•å¼€çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¿™å¥—è½»é‡åŒ– SSO çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<p>åªè¦æŠŠè¿™ä¸¤ä¸ªæ¥å£æ‰“é€šï¼Œæ‰€æœ‰è¯­è¨€çš„å­ç³»ç»Ÿï¼ˆJava / Go / PHP / Pythonï¼‰éƒ½èƒ½ç”¨ç»Ÿä¸€æ–¹å¼æ¥å…¥ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬è¿™å¥—æœºåˆ¶å¹¶ä¸æ˜¯æŠŠæ‰€æœ‰å­ç³»ç»Ÿéƒ½å½»åº•ç»‘æ­»åœ¨è®¤è¯ä¸­å¿ƒä¸Šï¼Œä¹Ÿä¸è¦æ±‚å®ƒä»¬å®Œå…¨æ”¾å¼ƒè‡ªå·±çš„ç™»å½•ä½“ç³»ã€‚æ¯ä¸ªå­ç³»ç»Ÿä¾ç„¶å¯ä»¥ä¿ç•™å„è‡ªåŸæœ‰çš„è´¦å·å¯†ç ç™»å½•é€»è¾‘ï¼Œåªæ˜¯é¢å¤–å¤šå°è£…äº†ä¸€æ­¥â€œé€šè¿‡é—¨æˆ·æˆæƒç å…ç™»â€çš„é€»è¾‘ã€‚</p>
<p>è¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li><strong>é—¨æˆ·å¯ä»¥å®ç°ç»Ÿä¸€å…¥å£ã€ä¸€é”®å…ç™»</strong></li>
<li><strong>å­ç³»ç»Ÿä¹Ÿèƒ½ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹ç™»å½•ï¼Œä¸ä¾èµ–é—¨æˆ·ä¹Ÿèƒ½ä½¿ç”¨</strong></li>
</ul>
<p>æˆ‘ä»¬æœ€ç»ˆè¦çš„ä¸æ˜¯æŠŠæ‰€æœ‰ç³»ç»Ÿçš„ç™»å½•é€»è¾‘å…¨éƒ¨è¿åˆ°è®¤è¯ä¸­å¿ƒï¼Œè€Œæ˜¯å®ç°ä¸€ç§ <strong>æ¾è€¦åˆçš„ SSO</strong>ï¼š<br/>
â€”â€”èƒ½ç»Ÿä¸€å°±ç»Ÿä¸€ï¼Œä¸èƒ½ç»Ÿä¸€ä¹Ÿä¸å½±å“å„è‡ªè¿è¡Œã€‚</p>
<h4 data-id="heading-18">1. åˆ›å»ºæˆæƒç æ¥å£ï¼ˆ/sso/code/createï¼‰</h4>
<p>è¦å®ç°é—¨æˆ·å…ç™»å­ç³»ç»Ÿï¼Œæ ¸å¿ƒå°±æ˜¯ç”Ÿæˆä¸€ä¸ªä¸€æ¬¡æ€§çš„æˆæƒç ï¼ˆcodeï¼‰ï¼Œç„¶åå­ç³»ç»Ÿå†æ‹¿ç€è¿™ä¸ª code å»è®¤è¯ä¸­å¿ƒæ¢å–ç”¨æˆ·ä¿¡æ¯ã€‚è¿™ä¸ªæ¥å£å°±æ˜¯æ•´ä¸ª SSO æµç¨‹çš„ç¬¬ä¸€æ­¥ã€‚</p>
<p>æ¥å£åœ°å€ï¼š</p>
<pre><code class="hljs language-json" lang="json">POST /sso/code/create
</code></pre>
<p>æµç¨‹ç®€å•è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>ç”¨æˆ·ç‚¹å‡»é—¨æˆ·æŸä¸ªç³»ç»Ÿå¡ç‰‡ â†’ é—¨æˆ·å‘è®¤è¯ä¸­å¿ƒè¦ä¸€ä¸ª code â†’ å‰ç«¯æŠŠ code æ‹¼åˆ°ç³»ç»Ÿ URL â†’ å­ç³»ç»Ÿæ‹¿ code æ¥æ¢ç”¨æˆ·ä¿¡æ¯ â†’ å®Œæˆå…ç™»ã€‚</p>
</blockquote>
<p><strong>å‰ç«¯è°ƒç”¨é€»è¾‘</strong></p>
<p>å½“ç”¨æˆ·åœ¨é—¨æˆ·é¦–é¡µç‚¹å‡»æŸä¸ªç³»ç»Ÿå¡ç‰‡æ—¶ï¼Œä¼šè§¦å‘å‰ç«¯å°è£…çš„ goSystem æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/** ç‚¹å‡»è¿›å…¥ç³»ç»Ÿ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goSystem</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">item</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!item.<span class="hljs-property">link</span>) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">"è¯¥ç³»ç»Ÿæš‚æœªé…ç½®è®¿é—®åœ°å€"</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">id</span>) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç”¨æˆ·æœªç™»å½•æˆ–ä¿¡æ¯ç¼ºå¤±"</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createSSOCode</span>(user.<span class="hljs-property">id</span>, item.<span class="hljs-property">code</span>);  <span class="hljs-comment">// è°ƒç”¨ /sso/code/create</span>
    
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">success</span> &amp;&amp; res.<span class="hljs-property">data</span>?.<span class="hljs-property">code</span>) {
      <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${item.link}</span>?code=<span class="hljs-subst">${res.data.code}</span>`</span>;
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url, <span class="hljs-string">"_blank"</span>);  <span class="hljs-comment">// å¸¦ code è·³è½¬åˆ°å­ç³»ç»Ÿ</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">"ç”Ÿæˆç™»å½• code å¤±è´¥"</span>);
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¤è¯ä¸­å¿ƒè¿æ¥å¤±è´¥"</span>);
  }
};
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯å…¶å®å°±åšäº†ä¸‰ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li><strong>éªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•é—¨æˆ·</strong></li>
<li>è°ƒç”¨ <code>/sso/code/create</code> ç”Ÿæˆä¸€ä¸ªçŸ­æœŸæœ‰æ•ˆçš„æˆæƒç </li>
<li>æŠŠ code æ‹¼æ¥åˆ°å­ç³»ç»Ÿ URLï¼Œä¾‹å¦‚ï¼š</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">https://admin.xxx.com?<span class="hljs-attr">code</span>=asf8sdf87dsf0sd8f0
</code></pre>
<p>å­ç³»ç»Ÿæ”¶åˆ°è¿™ä¸ª code åï¼Œå°±å¯ä»¥å¼€å§‹å…ç™»å½•æµç¨‹ã€‚</p>
<p><strong>åç«¯è°ƒç”¨é€»è¾‘</strong></p>
<p>åç«¯çš„ <code>createCode</code> æ–¹æ³•ä¸»è¦åˆ†ä¸º 5 æ­¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">createCode</span><span class="hljs-params">(HttpServletRequest request, Map&lt;String, Object&gt; body)</span> {
    <span class="hljs-comment">// 1. éªŒè¯ Token ç™»å½•æ€</span>
    <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> (Long) request.getAttribute(<span class="hljs-string">"userId"</span>);
    <span class="hljs-keyword">if</span> (userId == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æœªç™»å½•æˆ– Token æ— æ•ˆ"</span>);
    }

    <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> SsoRedisKeys.userLogin(userId);
    <span class="hljs-type">User</span> <span class="hljs-variable">cachedUser</span> <span class="hljs-operator">=</span> redisUtils.get(redisKey, User.class);
    <span class="hljs-keyword">if</span> (cachedUser == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>);
    }

    <span class="hljs-comment">// 2. æ ¡éªŒç³»ç»Ÿä¿¡æ¯</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">appId</span> <span class="hljs-operator">=</span> body.get(<span class="hljs-string">"appId"</span>).toString();
    <span class="hljs-type">SysApplication</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> applicationMapper.selectByAppId(appId);
    <span class="hljs-keyword">if</span> (app == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åº”ç”¨ä¸å­˜åœ¨ï¼š"</span> + appId);
    <span class="hljs-keyword">if</span> (app.getStatus() == <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åº”ç”¨å·²ç¦ç”¨ï¼š"</span> + app.getAppName());

    <span class="hljs-comment">// 3. æ ¡éªŒç”¨æˆ·æƒé™</span>
    <span class="hljs-keyword">if</span> (!userHasPermission(userId, appId)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·æ— æƒè®¿é—®ç³»ç»Ÿï¼š"</span> + appId);
    }

    <span class="hljs-comment">// 4. ç”Ÿæˆä¸€æ¬¡æ€§ code</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString().replace(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>);

    <span class="hljs-type">String</span> <span class="hljs-variable">authRedisKey</span> <span class="hljs-operator">=</span> SsoRedisKeys.authCode(code);
    Map&lt;String, Object&gt; authInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    authInfo.put(<span class="hljs-string">"userId"</span>, userId);
    authInfo.put(<span class="hljs-string">"appId"</span>, appId);

    <span class="hljs-comment">// å°† code â†’ ç”¨æˆ·ä¿¡æ¯ å†™å…¥ Redisï¼Œ1 åˆ†é’Ÿè‡ªåŠ¨å¤±æ•ˆ</span>
    redisUtils.set(authRedisKey, authInfo, <span class="hljs-number">60</span>);

    <span class="hljs-comment">// 5. è¿”å›ç»™å‰ç«¯</span>
    Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    result.put(<span class="hljs-string">"code"</span>, code);
    result.put(<span class="hljs-string">"expire"</span>, <span class="hljs-number">60</span>);
    result.put(<span class="hljs-string">"appId"</span>, appId);
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>å…¶ä¸­è¿™ä¸ª code çš„ä½œç”¨å…¶å®å¾ˆå•çº¯ï¼Œå°±æ˜¯ç»™é—¨æˆ·å’Œå­ç³»ç»Ÿä¹‹é—´å½“ä¸€ä¸ªä¸´æ—¶çš„è·³è½¬å‡­è¯ï¼Œæ‰€ä»¥ä¸€å®šè¦åšåˆ°çŸ­æ•ˆã€ä¸€æ¬¡æ€§ã€ç”¨å®Œå³åˆ ã€‚å®ƒä¸åº”è¯¥é•¿æ—¶é—´å­˜åœ¨ï¼Œæ›´ä¸åº”è¯¥è½åº“ï¼Œå¦åˆ™å°±å¤±å»äº†ä¸´æ—¶æˆæƒçš„æ„ä¹‰ã€‚é€šå¸¸ç”¨æˆ·ç‚¹å‡»å¡ç‰‡åå‡ ç™¾æ¯«ç§’å°±èƒ½å®Œæˆè·³è½¬ï¼Œ60 ç§’çš„æœ‰æ•ˆæœŸå·²ç»è¶³å¤Ÿï¼ŒåŒæ—¶è¿˜èƒ½é¿å…è¢«æ‹¦æˆªåå»¶è¿Ÿä½¿ç”¨ã€è¢«é‡æ”¾æ”»å‡»æˆ–è€…è¢«äººæ¶æ„æ„é€  URL åˆ©ç”¨ã€‚è¶ŠçŸ­çš„æœ‰æ•ˆæœŸï¼Œå°±è¶Šèƒ½å‡å°‘è¢«åˆ©ç”¨çš„é£é™©ï¼Œæ‰€ä»¥ 60 ç§’å…¶å®æ˜¯ä¸€ä¸ªå®‰å…¨æ€§å’Œå¯ç”¨æ€§éƒ½æ¯”è¾ƒå¹³è¡¡çš„é€‰æ‹©ã€‚</p>
<p>æœ€åå½“è®¤è¯ä¸­å¿ƒç”Ÿæˆäº† code ä¹‹åï¼Œå…¶å®å¹¶ä¸æ˜¯ç®€å•åœ°è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯åŒæ—¶åœ¨ Redis é‡Œä¿å­˜äº†ä¸€æ¡å’Œè¿™ä¸ª code ç»‘å®šçš„ä¸´æ—¶æˆæƒä¿¡æ¯ã€‚åƒå›¾é‡Œè¿™æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d67ed18e390454fa03f4c35c44311fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=tEGtXXsmdVfHQNWGZfbqOKIwSbs%3D" alt="image.png" loading="lazy"/></p>
<p>Redis é‡Œå­˜çš„æ˜¯ appId å’Œ userIdï¼Œä¹Ÿå°±æ˜¯â€œå“ªä¸ªç”¨æˆ·è¦è¿›å…¥å“ªä¸ªç³»ç»Ÿâ€ã€‚è¿™æ ·åšçš„åŸå› å¾ˆç®€å•ï¼šåç»­å­ç³»ç»Ÿå¸¦ç€ code æ¥æ¢ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œè®¤è¯ä¸­å¿ƒåªéœ€è¦é€šè¿‡ code æ‰¾åˆ°è¿™ä¸€æ¡ Redis è®°å½•ï¼Œå°±èƒ½çŸ¥é“è¿™æ¬¡æˆæƒå¯¹åº”çš„ç”¨æˆ·æ˜¯è°ã€ç›®æ ‡ç³»ç»Ÿæ˜¯å“ªä¸€ä¸ªã€‚æ•´ä¸ªè¿‡ç¨‹ä¸ä¾èµ–æ•°æ®åº“ï¼Œä¹Ÿä¸éœ€è¦åœ¨ URL ä¸­æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼Œè€Œæ˜¯å®Œå…¨èµ° Redis çš„çŸ­æœŸç¼“å­˜ï¼Œæ—¢è½»é‡åˆå®‰å…¨ã€‚æ¢å¥è¯è¯´ï¼Œcode åªæ˜¯ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œæœ¬èº«æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼ŒçœŸå®çš„æˆæƒæ•°æ®å…¨éƒ¨åœ¨ Redis é‡Œï¼Œä¸€æ—¦å­ç³»ç»Ÿæ¥éªŒè¯ï¼Œè®¤è¯ä¸­å¿ƒå°±èƒ½ç«‹å³æŠŠ userId æ‹¿å‡ºæ¥åšä¸‹ä¸€æ­¥å¤„ç†ã€‚</p>
<h4 data-id="heading-19">2. å›è°ƒéªŒè¯æ¥å£ï¼ˆ/sso/code/verifyï¼‰</h4>
<p>å½“ç”¨æˆ·ä»é—¨æˆ·è·³åˆ°å­ç³»ç»Ÿæ—¶ï¼ŒURL é‡Œä¼šå¸¦ä¸€ä¸ª codeï¼Œå­ç³»ç»Ÿæ‹¿åˆ°è¿™ä¸ª code åéœ€è¦åˆ°è®¤è¯ä¸­å¿ƒæ¥â€œæ¢ç”¨æˆ·ä¿¡æ¯â€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é€šè¿‡ <code>/sso/code/verify</code> å®Œæˆçš„ã€‚</p>
<p>è¿™ä¸ªæ¥å£çš„ç›®çš„å¾ˆç®€å•ï¼š<br/>
<strong>ç¡®è®¤è¿™ä¸ª code æ˜¯å¦çœŸå®ã€æœ‰æ•ˆã€æ²¡è¿‡æœŸã€æ²¡è¢«ç”¨è¿‡ï¼Œå¹¶æœ€ç»ˆå‘Šè¯‰å­ç³»ç»Ÿï¼šå½“å‰ç”¨æˆ·æ˜¯è°ã€‚</strong></p>
<p>æ¥å£åœ°å€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">POST /sso/code/verify
</code></pre>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">verifyCode</span><span class="hljs-params">(HttpServletRequest request, Map&lt;String, Object&gt; body)</span> {

    <span class="hljs-comment">// è§£æå‚æ•°</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> String.valueOf(body.get(<span class="hljs-string">"code"</span>));
    <span class="hljs-type">String</span> <span class="hljs-variable">appId</span> <span class="hljs-operator">=</span> String.valueOf(body.get(<span class="hljs-string">"appId"</span>));

    <span class="hljs-keyword">if</span> (code == <span class="hljs-literal">null</span> || code.isBlank() || appId == <span class="hljs-literal">null</span> || appId.isBlank()) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å‚æ•°ç¼ºå¤±ï¼šcode æˆ– appId ä¸èƒ½ä¸ºç©º"</span>);
    }

    <span class="hljs-comment">// æ ¡éªŒ Redis æ˜¯å¦å­˜åœ¨æˆæƒç </span>
    <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> SsoRedisKeys.authCode(code);
    Map&lt;String, Object&gt; authInfo = redisUtils.getObject(redisKey, Map.class);
    <span class="hljs-keyword">if</span> (authInfo == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æˆæƒç æ— æ•ˆæˆ–å·²è¿‡æœŸ"</span>);
    }

    <span class="hljs-comment">// æ ¡éªŒ appId ä¸€è‡´æ€§</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">storedAppId</span> <span class="hljs-operator">=</span> (String) authInfo.get(<span class="hljs-string">"appId"</span>);
    <span class="hljs-keyword">if</span> (!appId.equals(storedAppId)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æˆæƒç ä¸åº”ç”¨ä¸åŒ¹é…"</span>);
    }

    <span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> Long.parseLong(authInfo.get(<span class="hljs-string">"userId"</span>).toString());
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(userId);
    <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
    }

    <span class="hljs-comment">// æ ¡éªŒç™»å½•æ€æ˜¯å¦æœ‰æ•ˆ</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">loginKey</span> <span class="hljs-operator">=</span> SsoRedisKeys.userLogin(userId);
    <span class="hljs-type">User</span> <span class="hljs-variable">cachedUser</span> <span class="hljs-operator">=</span> redisUtils.get(loginKey, User.class);
    <span class="hljs-keyword">if</span> (cachedUser == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>);
    }

    <span class="hljs-comment">// ä¸€æ¬¡æ€§ä½¿ç”¨ååˆ é™¤</span>
    redisUtils.delete(redisKey);

    <span class="hljs-comment">// è¿”å›èº«ä»½ä¿¡æ¯</span>
    Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    result.put(<span class="hljs-string">"userId"</span>, user.getId());
    result.put(<span class="hljs-string">"username"</span>, user.getUsername());
    result.put(<span class="hljs-string">"appId"</span>, appId);
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>å½“å­ç³»ç»ŸæŠŠ code å‘è¿‡æ¥åï¼Œè®¤è¯ä¸­å¿ƒä¼šå…ˆæ£€æŸ¥è¿™ä¸ª code æ˜¯å¦å­˜åœ¨ã€‚å› ä¸º code æ˜¯ä¸€æ¬¡æ€§çš„ã€çŸ­æœŸæœ‰æ•ˆçš„ï¼Œæ‰€ä»¥å°±åœ¨ Redis é‡Œæœç´¢æ˜¯å¦æœ‰å¯¹åº”çš„æˆæƒè®°å½•ã€‚å¦‚æœæŸ¥ä¸åˆ°ï¼Œè¯´æ˜ code è¦ä¹ˆè¿‡æœŸäº†ï¼Œè¦ä¹ˆå·²ç»è¢«ç”¨è¿‡äº†ï¼Œè¿™ç§æƒ…å†µå°±ç›´æ¥æ‹’ç»ç™»å½•ã€‚</p>
<p>å¦‚æœ Redis é‡Œç¡®å®æœ‰å€¼ï¼Œé‡Œé¢åŒ…å« userId å’Œ appId ä¸¤é¡¹å…³é”®ä¿¡æ¯ã€‚è¿™æ—¶è®¤è¯ä¸­å¿ƒä¼šå†æ ¡éªŒä¸€ä¸‹ä¼ è¿‡æ¥çš„ appId æ˜¯å¦å’Œ code æ‰€å±çš„ appId ä¸€è‡´ï¼Œé˜²æ­¢æœ‰äººæŠŠ code æ‹¿å»è®¿é—®åˆ«çš„ç³»ç»Ÿã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯æ ¹æ® userId æŸ¥ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”å†æ ¡éªŒä¸€æ¬¡ç”¨æˆ·çš„ç™»å½•æ€æ˜¯å¦æœ‰æ•ˆï¼Œé¿å…ç”¨æˆ·å·²ç»åœ¨é—¨æˆ·é€€å‡ºï¼Œå´è¿˜èƒ½ç»§ç»­ä½¿ç”¨æ—§çš„ codeã€‚</p>
<p>æ‰€æœ‰æ ¡éªŒéƒ½é€šè¿‡åï¼Œè¿™ä¸ª code å°±ç®—ä½¿ç”¨å®Œäº†ï¼Œä¼šç«‹å³ä» Redis é‡Œåˆ é™¤ï¼Œç¡®ä¿åªèƒ½ç”¨ä¸€æ¬¡ã€‚æœ€åè¿”å›æœ€å°å¿…è¦çš„èº«ä»½ä¿¡æ¯ï¼ŒåŒ…æ‹¬ userIdã€ç”¨æˆ·åå’Œ appIdã€‚å­ç³»ç»Ÿæ‹¿åˆ°è¿™äº›ä¿¡æ¯åï¼Œå°±å¯ä»¥æ ¹æ®è‡ªèº«çš„é€»è¾‘ç”Ÿæˆæœ¬åœ° Tokenï¼Œå®Œæˆå…ç™»æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-20">å­ç³»ç»Ÿå¦‚ä½•æ¥å…¥é—¨æˆ·å…ç™»</h3>
<p>å‰é¢ä¸¤ä¸ªæ¥å£æŠŠé—¨æˆ·å’Œè®¤è¯ä¸­å¿ƒä¹‹é—´çš„æµç¨‹å·²ç»ä¸²èµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦ç®€å•è®²ä¸‹å­ç³»ç»Ÿè¿™è¾¹æ€ä¹ˆæ¥å…¥ã€‚å…¶å®å­ç³»ç»Ÿçš„é€»è¾‘éå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ¤æ–­ URL ä¸Šæœ‰æ²¡æœ‰ codeï¼Œå¦‚æœæœ‰ï¼Œå°±æŠŠè¿™ä¸ª code æ‹¿åˆ°è®¤è¯ä¸­å¿ƒæ¢æˆç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åç”±å­ç³»ç»Ÿè‡ªå·±ç”Ÿæˆä¸€ä¸ªæœ¬åœ° tokenã€‚è¿™æ ·æ—¢èƒ½æ”¯æŒä»é—¨æˆ·å…ç™»ï¼Œä¹Ÿä¸ä¼šå½±å“å­ç³»ç»Ÿä¿æŒè‡ªå·±çš„ç‹¬ç«‹ç™»å½•ä½“ç³»ï¼Œä¸¤ç§æ–¹å¼äº’ä¸å†²çªã€‚è¿™ä¸ªè®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œå­ç³»ç»Ÿä¸ç”¨å…±äº« Sessionã€ä¸éœ€è¦å…±äº« JWT Secretï¼Œä¹Ÿä¸ä¾èµ–é—¨æˆ·ï¼Œå„è‡ªç»´æŠ¤å¥½è‡ªå·±çš„ç™»å½•ä½“ç³»å°±è¡Œäº†ã€‚</p>
<h4 data-id="heading-21">1ï¼‰å‰ç«¯å¤„ç†é€»è¾‘ï¼šåœ¨è·¯ç”±å®ˆå«é‡Œè‡ªåŠ¨æ£€æµ‹ URL ä¸­çš„ code</h4>
<p>å­ç³»ç»Ÿå‰ç«¯åªéœ€è¦åœ¨è·¯ç”±å®ˆå«é‡ŒåŠ ä¸€ä¸ªç®€å•çš„åˆ¤æ–­ï¼šå¦‚æœå½“å‰æ²¡æœ‰ tokenï¼Œä½† URL ä¸Šå¸¦ç€ <code>code=xxx</code>ï¼Œé‚£å°±è¯´æ˜ç”¨æˆ·æ˜¯ä»é—¨æˆ·ç‚¹è¿›æ¥çš„ï¼Œè¿™æ—¶å€™å°±è‡ªåŠ¨èµ° SSO ç™»å½•ï¼ŒæŠŠ code å‘ç»™å­ç³»ç»Ÿåç«¯éªŒè¯å³å¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
  <span class="hljs-keyword">const</span> code = <span class="hljs-title function_">getQueryParam</span>(<span class="hljs-string">'code'</span>)

  <span class="hljs-comment">// è‡ªåŠ¨ SSO ç™»å½•</span>
  <span class="hljs-keyword">if</span> (!token &amp;&amp; code) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">verifyCode</span>(code)

      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">success</span> &amp;&amp; res.<span class="hljs-property">data</span>) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>)
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>))

        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'SSO ç™»å½•æˆåŠŸ'</span>)

        <span class="hljs-comment">// æ¸…é™¤ URL ä¸­çš„ ?code=xx é¿å…é‡å¤è§¦å‘</span>
        <span class="hljs-keyword">const</span> cleanUrl = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span> + to.<span class="hljs-property">path</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>({}, <span class="hljs-string">''</span>, cleanUrl)
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()

        <span class="hljs-title function_">next</span>(<span class="hljs-string">'/gray/config'</span>)
        <span class="hljs-keyword">return</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'SSO ç™»å½•å¤±è´¥'</span>)
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è®¤è¯ä¸­å¿ƒè¿æ¥å¤±è´¥'</span>)
    }
  }

  <span class="hljs-comment">// å·²ç™»å½•å†è®¿é—®ç™»å½•é¡µ â†’ ç›´æ¥è·³é¦–é¡µ</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/login'</span> &amp;&amp; token) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/gray/config'</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// æœªç™»å½•è®¿é—®éœ€è¦æƒé™çš„é¡µé¢ â†’ è·³è½¬ç™»å½•é¡µ</span>
  <span class="hljs-keyword">if</span> (!to.<span class="hljs-property">meta</span>.<span class="hljs-property">public</span> &amp;&amp; !token) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-title function_">next</span>()
})
</code></pre>
<p>è¿™æ®µé€»è¾‘å¾ˆç›´è§‚ï¼šé—¨æˆ·è·³è¿›æ¥è‡ªåŠ¨ç™»å½•ï¼Œä¸å½±å“æˆ‘ä»¬ç³»ç»ŸåŸæœ‰çš„ç”¨æˆ·åå¯†ç ç™»å½•ã€‚</p>
<h4 data-id="heading-22">2ï¼‰åç«¯å¤„ç†é€»è¾‘ï¼šæ”¶åˆ° code â†’ å»è®¤è¯ä¸­å¿ƒéªŒè¯ â†’ ç”Ÿæˆæœ¬åœ° token</h4>
<p>å­ç³»ç»Ÿåç«¯ä¹Ÿä¸å¤æ‚ï¼Œæ”¶åˆ°å‰ç«¯ä¼ æ¥çš„ code ä¹‹åï¼Œå¸¦ç€è‡ªå·±çš„ appId å»è®¤è¯ä¸­å¿ƒéªŒè¯ï¼Œè®¤è¯ä¸­å¿ƒç¡®è®¤ code æ­£å¸¸åï¼Œä¼šè¿”å›ç”¨æˆ·æœ€åŸºæœ¬çš„èº«ä»½ä¿¡æ¯ï¼Œæ¯”å¦‚ userIdã€usernameã€‚æˆ‘ä»¬å†æ ¹æ®è¿™äº›ä¿¡æ¯ç”Ÿæˆè‡ªå·±çš„ JWT tokenï¼Œå‰ç«¯æ‹¿åˆ° token ä¹‹åå°±ç®—ç™»å½•æˆåŠŸäº†ã€‚</p>
<p>ä¼ªä»£ç æ•´ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Result&lt;?&gt; verifyCode(<span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; body) {
    <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> (String) body.get(<span class="hljs-string">"code"</span>);

    <span class="hljs-comment">// å½“å‰å­ç³»ç»Ÿçš„ appId</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">appId</span> <span class="hljs-operator">=</span> grayAppProperties.getAppId();

    <span class="hljs-comment">// è®¤è¯ä¸­å¿ƒåœ°å€</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ssoUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://localhost:8085/sso/code/verify"</span>;

    <span class="hljs-comment">// æ„å»ºè¯·æ±‚å‚æ•°</span>
    Map&lt;String, Object&gt; payload = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    payload.put(<span class="hljs-string">"code"</span>, code);
    payload.put(<span class="hljs-string">"appId"</span>, appId);

    <span class="hljs-comment">// è°ƒç”¨è®¤è¯ä¸­å¿ƒæ¥å£</span>
    Map&lt;String, Object&gt; ssoResp = RestClient.postJson(ssoUrl, payload);

    <span class="hljs-keyword">if</span> (ssoResp == <span class="hljs-literal">null</span> || !Boolean.TRUE.equals(ssoResp.get(<span class="hljs-string">"success"</span>))) {
        <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è®¤è¯ä¸­å¿ƒéªŒè¯å¤±è´¥"</span>);
    }

    <span class="hljs-comment">// è®¤è¯ä¸­å¿ƒè¿”å›çš„ç”¨æˆ·ä¿¡æ¯</span>
    Map&lt;String, Object&gt; data = (Map&lt;String, Object&gt;) ssoResp.get(<span class="hljs-string">"data"</span>);
    <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> ((Number) data.get(<span class="hljs-string">"userId"</span>)).longValue();
    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> (String) data.get(<span class="hljs-string">"username"</span>);

    <span class="hljs-comment">// ç»„åˆ JWT claims</span>
    Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    claims.put(<span class="hljs-string">"userId"</span>, userId);
    claims.put(<span class="hljs-string">"username"</span>, username);
    claims.put(<span class="hljs-string">"fromSSO"</span>, <span class="hljs-literal">true</span>);

    <span class="hljs-comment">// å­ç³»ç»Ÿæœ¬åœ°ç”Ÿæˆ token</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> jwtUtil.generateToken(claims);

    <span class="hljs-comment">// è¿”å›ç»™å‰ç«¯</span>
    Map&lt;String, Object&gt; resultData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    resultData.put(<span class="hljs-string">"token"</span>, token);
    resultData.put(<span class="hljs-string">"user"</span>, data);

    <span class="hljs-keyword">return</span> Result.ok(resultData);
}
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯æ ‡å‡†çš„ â€œcode æ¢ tokenâ€ æµç¨‹ï¼Œä¸è¿‡æˆ‘ä»¬å¹¶æ²¡æœ‰æŠŠ token æ”¾åˆ°è®¤è¯ä¸­å¿ƒé‡Œï¼Œè€Œæ˜¯ç”±å„ä¸ªå­ç³»ç»Ÿè‡ªå·±ç”Ÿæˆè‡ªå·±çš„ tokenï¼Œè¿™æ ·æ¯ä¸ªç³»ç»Ÿéƒ½ä¿æŒç‹¬ç«‹ã€äº’ä¸å½±å“ã€‚å‰ç«¯ä¸€å­˜ï¼Œå°±ç®—ä»é—¨æˆ·å…ç™»æˆåŠŸäº†ã€‚</p>
<h4 data-id="heading-23">3ï¼‰ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h4>
<p>æˆ‘ä»¬åœ¨è®¾è®¡è¿™éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ ¸å¿ƒç‚¹å°±æ˜¯è®©æ¯ä¸ªå­ç³»ç»Ÿä¿æŒè‡ªå·±çš„ç‹¬ç«‹æ€§ã€‚æˆ‘ä»¬åªç”¨ code åšä¸€æ¬¡æ€§çš„èº«ä»½å‡­è¯ï¼Œç„¶åå„ä¸ªå­ç³»ç»Ÿè¿˜æ˜¯èµ°è‡ªå·±çš„ç™»å½•ä½“ç³»ã€è‡ªå·±çš„ token æ ¡éªŒï¼Œä¸éœ€è¦å…±äº«å¯†é’¥ï¼Œä¹Ÿä¸éœ€è¦è€¦åˆè®¤è¯ä¸­å¿ƒçš„ç»“æ„ã€‚å­ç³»ç»Ÿæ—¢èƒ½æ”¯æŒé—¨æˆ·å•ç‚¹è¿›å…¥ï¼Œä¹Ÿèƒ½æ”¯æŒæœ¬åœ°ç™»å½•é€€å‡ºï¼Œè€Œä¸”é€»è¾‘éå¸¸æ¸…æ™°ç®€å•ï¼Œä»»ä½•è¯­è¨€éƒ½èƒ½æ¥å…¥ï¼Œå±äºæ¥å…¥æˆæœ¬æœ€ä½çš„ä¸€ç§æ¨¡å¼ã€‚</p>
<hr/>
<h3 data-id="heading-24">å•ç‚¹é€€å‡ºï¼ˆLogoutï¼‰è®¾è®¡ä¸å®ç°</h3>
<p>ç»Ÿä¸€é—¨æˆ·æ—¢ç„¶æ‰¿æ‹…äº†ç»Ÿä¸€ç™»å½•çš„èŒè´£ï¼Œé‚£é€€å‡ºé€»è¾‘ä¹Ÿå¿…é¡»åšåˆ°ç»Ÿä¸€ã€‚å¦‚æœç”¨æˆ·ä»é—¨æˆ·ç‚¹äº†é€€å‡ºï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å‡ºç°ä¸€ç§æƒ…å†µï¼šé—¨æˆ·é€€å‡ºäº†ï¼Œä½†ä»–ä¹‹å‰ç”¨ SSO æ‰“å¼€çš„å­ç³»ç»Ÿä»ç„¶ä¿æŒç™»å½•çŠ¶æ€ï¼Œè¿™æ ·æ—¢ä¸å®‰å…¨ï¼Œä¹Ÿä¼šé€ æˆä½“éªŒä¸ä¸€è‡´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¡¥é½â€œå•ç‚¹é€€å‡ºâ€çš„èƒ½åŠ›ï¼Œè®©ç”¨æˆ·åœ¨è®¤è¯ä¸­å¿ƒé€€å‡ºåï¼Œæ‰€æœ‰é€šè¿‡ SSO è¿›å…¥çš„ç³»ç»Ÿéƒ½è‡ªåŠ¨å¤±æ•ˆã€‚</p>
<p>å•ç‚¹é€€å‡ºçš„æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯è®©è®¤è¯ä¸­å¿ƒé€€å‡ºåèƒ½é€šçŸ¥æ‰€æœ‰å­ç³»ç»Ÿï¼›äºŒæ˜¯è®©å­ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«æ¥è‡ª SSO çš„ç™»å½•ä¸æœ¬åœ°ç™»å½•æ˜¯ä¸åŒçš„ï¼Œä»¥å…å½±å“å­ç³»ç»Ÿçš„ç‹¬ç«‹ç™»å½•åœºæ™¯ã€‚æˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ¡ˆæ¯”è¾ƒç®€å•ï¼Œä¸éœ€è¦åšä¼ ç»Ÿ CAS é‚£æ ·çš„â€œç™»å‡ºå¹¿æ’­â€ï¼Œè€Œæ˜¯ç›´æ¥åˆ©ç”¨ Redis ä½œä¸€æ¬¡æ€§æ ‡è®°ã€‚è®¤è¯ä¸­å¿ƒé€€å‡ºæ—¶å†™ä¸€æ¡ logout æ ‡è®°ï¼Œå­ç³»ç»Ÿåœ¨è‡ªå·±çš„ JWT æ‹¦æˆªå™¨é‡Œæ£€æŸ¥è¿™ä¸ªæ ‡è®°ï¼Œå¦‚æœæ ‡è®°å­˜åœ¨ï¼Œå°±è¯´æ˜é—¨æˆ·å·²ç»é€€å‡ºäº†ï¼Œè¿™æ—¶å­ç³»ç»Ÿåº”è¯¥è®©ç”¨æˆ·å›åˆ°ç™»å½•é¡µã€‚</p>
<h4 data-id="heading-25">1ï¼‰è®¤è¯ä¸­å¿ƒé€€å‡ºï¼šå†™å…¥é€€å‡ºæ ‡è®°</h4>
<p>è®¤è¯ä¸­å¿ƒé€€å‡ºé€»è¾‘å¾ˆç®€å•ï¼šåˆ é™¤ç™»å½•çŠ¶æ€ï¼ŒåŒæ—¶å†™ä¸€æ¡å¸¦æœ‰ TTL çš„ logout è®°å½•ï¼Œå­ç³»ç»Ÿçœ‹åˆ°è¿™æ¡è®°å½•å°±ä¼šè®¤ä¸ºç”¨æˆ·å·²åœ¨é—¨æˆ·é€€å‡ºã€‚</p>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">logout</span><span class="hljs-params">(HttpServletRequest request)</span> {
    <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> (Long) request.getAttribute(<span class="hljs-string">"userId"</span>);
    <span class="hljs-keyword">if</span> (userId == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æœªç™»å½•æˆ– Token æ— æ•ˆ"</span>);
    }

    <span class="hljs-comment">// åˆ é™¤ç™»å½•çŠ¶æ€</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">loginKey</span> <span class="hljs-operator">=</span> SsoRedisKeys.userLogin(userId);
    redisUtils.delete(loginKey);

    <span class="hljs-comment">// å†™å…¥é€€å‡ºæ ‡è®°</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">logoutTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() / <span class="hljs-number">1000</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> SsoRedisKeys.userLogout(userId);
    redisUtils.set(key, logoutTime, <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">3600</span>); <span class="hljs-comment">// 7 å¤© TTL</span>

    Map&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    data.put(<span class="hljs-string">"userId"</span>, userId);
    data.put(<span class="hljs-string">"logoutTime"</span>, logoutTime);
    data.put(<span class="hljs-string">"ttl"</span>, <span class="hljs-string">"7d"</span>);
    <span class="hljs-keyword">return</span> data;
}
</code></pre>
<p>é€€å‡ºè®°å½•åœ¨ Redis ä¸­å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sso:user:<span class="hljs-built_in">logout</span>:1 â†’ 1763620214
</code></pre>
<p>è¿™æ¡è®°å½•è¯´æ˜ç”¨æˆ· 1 åœ¨æŸä¸ªæ—¶é—´ç‚¹è§¦å‘è¿‡ç»Ÿä¸€é€€å‡ºã€‚å­ç³»ç»Ÿåªè¦æ£€æŸ¥è¿™æ¡è®°å½•æ˜¯å¦å­˜åœ¨ï¼Œå°±å¯ä»¥åˆ¤æ–­ SSO ç™»å½•æ˜¯å¦è¿˜æœ‰æ•ˆã€‚</p>
<h4 data-id="heading-26">2ï¼‰å­ç³»ç»Ÿæ‹¦æˆªå™¨ï¼šåˆ¤æ–­æ˜¯å¦å±äº SSO ç™»å½•ï¼Œå¹¶æ£€æŸ¥é€€å‡ºçŠ¶æ€</h4>
<p>å­ç³»ç»Ÿè‡ªèº«æœ‰ç™»å½•ä½“ç³»ï¼Œæ‰€ä»¥ä¸èƒ½çœ‹åˆ° logout æ ‡è®°å°±ç›´æ¥è¸¢ç”¨æˆ·ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœ¬åœ°ç™»å½•çš„ç”¨æˆ·ä¹Ÿè¢«å¼ºåˆ¶é€€å‡ºã€‚è¿™é‡Œæˆ‘ä»¬ç”¨çš„è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨ç”Ÿæˆ token çš„æ—¶å€™æˆ‘ä»¬åŠ ä¸Šä¸€ä¸ª fromSSO çš„æ ‡è®°ï¼Œç”¨æ¥åŒºåˆ†è¿™æ¬¡ç™»å½•åˆ°åº•æ˜¯é—¨æˆ·è¿‡æ¥çš„ï¼Œè¿˜æ˜¯æœ¬åœ°ç™»å½•çš„ã€‚</p>
<p>æ‹¦æˆªå™¨ä¼ªä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp, Object handler)</span>
        <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> req.getHeader(<span class="hljs-string">"Authorization"</span>);
    <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span> || token.isEmpty()) {
        ResponseUtil.writeJson(resp, Result.fail(<span class="hljs-number">401</span>, <span class="hljs-string">"ç¼ºå°‘ Token"</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtUtil.parseToken(token);
        <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> Long.valueOf(String.valueOf(claims.get(<span class="hljs-string">"userId"</span>)));

        <span class="hljs-type">Boolean</span> <span class="hljs-variable">fromSSO</span> <span class="hljs-operator">=</span> claims.get(<span class="hljs-string">"fromSSO"</span>, Boolean.class);

        <span class="hljs-comment">// ä»…æ‹¦æˆªé€šè¿‡ SSO ç™»å½•çš„ç”¨æˆ·</span>
        <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(fromSSO)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">logoutKey</span> <span class="hljs-operator">=</span> GrayRedisKeys.userLogout(userId);
            <span class="hljs-keyword">if</span> (redisUtils.hasKey(logoutKey)) {
                ResponseUtil.writeJson(resp, Result.fail(<span class="hljs-number">401</span>, <span class="hljs-string">"ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>));
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        req.setAttribute(<span class="hljs-string">"userId"</span>, userId);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        ResponseUtil.writeJson(resp, Result.fail(<span class="hljs-number">401</span>, <span class="hljs-string">"Token æ— æ•ˆæˆ–å·²è¿‡æœŸ"</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>è¿™æ ·å­ç³»ç»Ÿçš„æ‹¦æˆªå™¨å°±éå¸¸æ¸…æ™°ï¼šå¦‚æœæ˜¯é€šè¿‡ SSO è¿›å…¥çš„ç”¨æˆ·ï¼Œå°±åˆ¤æ–­è®¤è¯ä¸­å¿ƒæ˜¯å¦é€€å‡ºï¼›å¦‚æœæ˜¯æœ¬åœ°ç™»å½•çš„ç”¨æˆ·ï¼Œå°±ä¸å—è®¤è¯ä¸­å¿ƒçš„å½±å“ã€‚æˆ‘ä»¬ç”¨ fromSSO å­—æ®µæŠŠè¡Œä¸ºåˆ†éš”å¾—å¾ˆæ¸…æ¥šï¼Œæ—¢ä¿æŠ¤äº† SSO çš„ä¸€è‡´æ€§ï¼Œä¹Ÿä¸ä¼šç ´åå­ç³»ç»Ÿå•ç‹¬ç™»å½•çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-27">3ï¼‰å‰ç«¯å“åº”æ‹¦æˆªï¼šè‡ªåŠ¨å¤„ç† 401ï¼Œæ¸…ç†æœ¬åœ° token</h4>
<p>å­ç³»ç»Ÿå‰ç«¯åªéœ€è¦åœ¨å“åº”æ‹¦æˆªå™¨é‡Œåˆ¤æ–­ code æ˜¯å¦ä¸º 401ï¼Œå¦‚æœæ˜¯ï¼Œå°±æ¸…é™¤æœ¬åœ°å­˜å‚¨å¹¶å›åˆ°ç™»å½•é¡µé¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> data = res.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">if</span> (data &amp;&amp; data.<span class="hljs-property">code</span> === <span class="hljs-number">401</span>) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(data.<span class="hljs-property">message</span> || <span class="hljs-string">"ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>);
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
      router.<span class="hljs-title function_">push</span>(<span class="hljs-string">"/login"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Token è¿‡æœŸ"</span>));
    }
    <span class="hljs-keyword">return</span> data;
  },
  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">response</span> &amp;&amp; err.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">"ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>);
      router.<span class="hljs-title function_">push</span>(<span class="hljs-string">"/login"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);
  }
);
</code></pre>
<p>æœ‰äº†æœåŠ¡ç«¯çš„é€€å‡ºæ ‡è®°å’Œå‰ç«¯çš„è‡ªåŠ¨æ¸…ç†ï¼Œæ•´ä½“çš„å•ç‚¹é€€å‡ºæµç¨‹å°±é—­ç¯äº†ã€‚</p>
<h4 data-id="heading-28">4ï¼‰ä¸ºä»€ä¹ˆå¿…é¡»åŠ  fromSSOï¼Ÿ</h4>
<p>fromSSO æ˜¯æ•´ä¸ªå•ç‚¹é€€å‡ºä¸­æœ€å…³é”®çš„ä¸€ä¸ªå°ç»†èŠ‚ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•´ä½“æ¶æ„æ˜¯ä¸å¼ºåˆ¶å­ç³»ç»Ÿå¿…é¡»æŒ‰ç…§ä¼ ç»Ÿ SSO æ–¹å¼ï¼Œåªèƒ½é€šè¿‡ç»Ÿä¸€é—¨æˆ·ç™»å½•ã€‚æ¯ä¸ªç³»ç»Ÿéƒ½å¯ä»¥å•ç‹¬ç»´æŠ¤è‡ªå·±çš„æœ¬åœ°ç™»å½•é€»è¾‘ï¼Œè€Œé—¨æˆ· SSO åªæ˜¯é¢å¤–çš„èƒ½åŠ›ã€‚å¦‚æœä¸åŒºåˆ† fromSSOï¼Œé‚£ä¹ˆä¸€æ—¦é—¨æˆ·é€€å‡ºï¼Œæ‰€æœ‰å­ç³»ç»Ÿçš„æœ¬åœ°ç”¨æˆ·ä¹Ÿä¼šè¢«å¼ºåˆ¶é€€å‡ºï¼Œè¿™æ˜æ˜¾ä¸ç¬¦åˆé¢„æœŸã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ç”Ÿæˆ token æ—¶åŠ å…¥äº†è¿™æ ·ä¸€ä¸ªæ ‡è®°ï¼š</p>
<ul>
<li>å­ç³»ç»Ÿæœ¬åœ°ç™»å½• â†’ fromSSO = false</li>
<li>ä»é—¨æˆ· code ç™»å½• â†’ fromSSO = true</li>
</ul>
<p>ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªæ ‡è®°ï¼Œå­ç³»ç»Ÿæ‹¦æˆªå™¨æ‰èƒ½ç²¾å‡†åˆ¤æ–­å“ªäº›ç™»å½•éœ€è¦è¢« SSO é€€å‡ºå½±å“ï¼Œå“ªäº›ä¸éœ€è¦ã€‚</p>
<p>æœ€åæˆ‘è¿™è¾¹è´´ä¸€ä¸ªç®€å•çš„æµ‹è¯•å›¾æˆ‘ä»¬æ¥çœ‹ä¸‹æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3addb9ddd57d4049a772cddf6fae8954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSb5Y2h5Y2h5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764639952&amp;x-signature=PFhICL0CDPbt%2FTTEpAamNAJ%2F5Ro%3D" alt="sso.gif" loading="lazy"/></p>
<p>ä¸Šé¢çš„è¿™æ®µåŠ¨å›¾å¯ä»¥å¾ˆç›´è§‚åœ°çœ‹åˆ°æ•´ä¸ªå•ç‚¹é€€å‡ºæœºåˆ¶çš„å®é™…æ•ˆæœã€‚æˆ‘ä»¬ä»ç»Ÿä¸€é—¨æˆ·è¿›å…¥ç°åº¦ä¸­å¿ƒæ—¶ï¼Œç°åº¦ä¸­å¿ƒå¹¶æ²¡æœ‰åšä»»ä½•æœ¬åœ°ç™»å½•æ“ä½œï¼Œè€Œæ˜¯å®Œå…¨ä¾é é—¨æˆ·ç”Ÿæˆçš„æˆæƒç å®Œæˆå…ç™»ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬åœ¨ç»Ÿä¸€é—¨æˆ·ç‚¹å‡»é€€å‡ºåï¼Œå†å›åˆ°ç°åº¦ä¸­å¿ƒåˆ·æ–°é¡µé¢ï¼Œå®ƒä¼šç«‹å³è¯†åˆ«åˆ°â€œé—¨æˆ·å·²ç»é€€å‡ºâ€ï¼Œä»è€Œè‡ªåŠ¨æ¸…ç†è‡ªèº«ç™»å½•æ€å¹¶å›åˆ°ç™»å½•é¡µã€‚</p>
<p>å¦å¤–ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ˜¯é€šè¿‡é—¨æˆ·è·³è½¬ï¼Œè€Œæ˜¯åœ¨ç°åº¦ç³»ç»Ÿå†…éƒ¨æ‰§è¡Œä¸€æ¬¡æœ¬åœ°ç™»å½•ï¼Œé‚£ä¹ˆå®ƒç”Ÿæˆçš„ token æ˜¯æœ¬ç³»ç»Ÿè‡ªå·±ç»´æŠ¤çš„ï¼Œä¸æºå¸¦ fromSSO æ ‡è®°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿é—¨æˆ·å·²ç»é€€å‡ºï¼Œç°åº¦ç³»ç»Ÿä¾ç„¶ä¿æŒç‹¬ç«‹ç™»å½•çŠ¶æ€ï¼Œä¸ä¼šå—åˆ° SSO é€€å‡ºçš„å½±å“ã€‚</p>
<p>è¿™æ ·çš„è®¾è®¡ç›®çš„å°±æ˜¯å‡å°‘è€¦åˆï¼Œä¸å¼ºåˆ¶æ‰€æœ‰ç³»ç»Ÿå¿…é¡»ä¾èµ–ç»Ÿä¸€é—¨æˆ·ç»Ÿä¸€ç™»å½•ã€‚æ¯ä¸ªå­ç³»ç»Ÿä¾ç„¶å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©å•ç‹¬ç™»å½•æˆ–è€… SSO å…ç™»å½•ï¼Œä¸¤ç§æ¨¡å¼äº’ä¸å¹²æ‰°ã€‚<strong>åªæœ‰é€šè¿‡é—¨æˆ·è¿›å…¥çš„ç”¨æˆ·æ‰ä¼šå—ç»Ÿä¸€é€€å‡ºæ§åˆ¶ï¼Œæœ¬åœ°ç™»å½•çš„ç”¨æˆ·å§‹ç»ˆæ‹¥æœ‰ç‹¬ç«‹çš„ç™»å½•ç”Ÿå‘½å‘¨æœŸã€‚</strong> è¿™æ ·æ—¢èƒ½æ»¡è¶³ç»Ÿä¸€ç®¡ç†çš„éœ€æ±‚ï¼Œä¹Ÿä¿ç•™äº†ç³»ç»Ÿçš„ç‹¬ç«‹æ€§ï¼Œæ•´ä½“ç»“æ„æ—¢æ¸…æ™°åˆä¸äº’ç›¸ç‰µåˆ¶ï¼Œé€‚åˆå¤šåå°ã€å¤šç³»ç»ŸåŒæ—¶å­˜åœ¨çš„ä¼ä¸šç¯å¢ƒã€‚</p>
<hr/>
<h3 data-id="heading-29">å…¶ä»–æ‰©å±•</h3>
<p>æˆ‘ä»¬åšåˆ°è¿™é‡Œï¼Œä¸€ä¸ªå®Œæ•´çš„ SSOï¼ˆç»Ÿä¸€é—¨æˆ·å…ç™» + å•ç‚¹é€€å‡ºï¼‰å…¶å®å·²ç»èƒ½ç¨³å®šè·‘èµ·æ¥äº†ï¼Œä½†å¦‚æœç³»ç»Ÿä¸€å¤šã€è¯­è¨€ä¸€æ‚ã€å›¢é˜Ÿä¸€å¤§ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p><strong>æ¯ä¸ªå­ç³»ç»Ÿéƒ½è¦è‡ªå·±å†™ä¸€é SSO ç™»å½•ã€code æ ¡éªŒã€token ç”Ÿæˆã€æ‹¦æˆªå™¨é€»è¾‘ï¼Ÿ</strong></p>
<p>è¿™æ ·å¤ªæµªè´¹ï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿä¼šé£™å‡ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æŠŠ SSO çš„èƒ½åŠ›åšæˆâ€œå¯å¤ç”¨çš„æ¨¡å—â€ï¼Œè®©æ‰€æœ‰ç³»ç»Ÿéƒ½èƒ½æ— æ„Ÿæ¥å…¥ã€‚</p>
<h4 data-id="heading-30">1. Java ä½“ç³»ï¼šç›´æ¥å°æˆ SDKï¼Œæ‰€æœ‰é¡¹ç›®ä¸€è¡Œä¾èµ–å³å¯ç”¨</h4>
<p>å¯¹äº Java ç³»çš„é¡¹ç›®æ¥è¯´ï¼ˆSpring Boot ä¸ºä¸»ï¼‰ï¼Œå®Œå…¨å¯ä»¥æŠŠæ‰€æœ‰ SSO ç›¸å…³é€»è¾‘æ•´ç†æˆä¸€ä¸ª SDKï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">sso-client-sdk
 â”œâ”€â”€ <span class="hljs-title class_">JwtUtil</span>
 â”œâ”€â”€ <span class="hljs-title class_">SSOProperties</span>ï¼ˆæ¯”å¦‚ appIdã€centerUrlï¼‰
 â”œâ”€â”€ <span class="hljs-title class_">SSOLoginFilter</span>ï¼ˆè‡ªåŠ¨å¤„ç† code éªŒè¯ï¼‰
 â”œâ”€â”€ <span class="hljs-title class_">TokenInterceptor</span>ï¼ˆè‡ªåŠ¨å¤„ç† fromSSO çš„é€€å‡ºæ£€æŸ¥ï¼‰
 â””â”€â”€ <span class="hljs-title class_">SSOClient</span>ï¼ˆå°è£…è°ƒç”¨è®¤è¯ä¸­å¿ƒçš„ verify æ¥å£ï¼‰
</code></pre>
<p>å‘å¸ƒåˆ°ç§æœæˆ– GitHub Packages åï¼Œå­ç³»ç»Ÿåªéœ€è¦ï¼š</p>
<pre><code class="hljs language-java" lang="java">&lt;dependency&gt;
    &lt;groupId&gt;com.xxx.sso&lt;/groupId&gt;
    &lt;artifactId&gt;sso-client-sdk&lt;/artifactId&gt;
    &lt;version&gt;<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­å†™ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">sso:</span>
  <span class="hljs-attr">app-id:</span> <span class="hljs-string">gray-center</span>
  <span class="hljs-attr">server-url:</span> <span class="hljs-string">https://sso.xxx.com</span>
</code></pre>
<p>æ•´ä¸ª SSO ç™»å½•æµç¨‹å°±è‡ªåŠ¨æ¥å…¥äº†ï¼Œä¸éœ€è¦é‡å¤å†™é€»è¾‘ï¼Œä¹Ÿä¸ä¼šåœ¨å‡ åä¸ªé¡¹ç›®é‡Œæ•£è½å¤šä¸ªç‰ˆæœ¬ï¼ŒåæœŸå‡çº§ã€ä¿®å¤éƒ½èƒ½ç»Ÿä¸€ç®¡ç†ã€‚</p>
<h4 data-id="heading-31">2. PHP / Go / Node.js ä¹ŸåŒæ ·å¯ä»¥åšæˆ SDK</h4>
<p>é Java çš„ç³»ç»Ÿä¸€èˆ¬ä¹Ÿä¼šæœ‰åŒæ ·éœ€æ±‚ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åšå¯¹åº”è¯­è¨€çš„ SSO å®¢æˆ·ç«¯åº“ï¼Œè®©æ¥å…¥æ–¹å¼å°½å¯èƒ½ç»Ÿä¸€ï¼š</p>
<ul>
<li>PHPï¼šå°è£…ä¸€ä¸ª <code>SsoClient.php</code>ï¼Œä»£ç éªŒè¯ã€JWT ç”Ÿæˆã€token æ‹¦æˆªéƒ½åœ¨é‡Œé¢</li>
<li>Goï¼šåšæˆä¸€ä¸ª moduleï¼Œæ¯”å¦‚ <code>github.com/xxx/sso-client</code></li>
<li>Node.js / Expressï¼šå°è£…ä¸ºä¸­é—´ä»¶ <code>sso-client-middleware</code></li>
</ul>
<p>åªè¦ç³»ç»Ÿæ¥å…¥ SDKï¼Œå°±èƒ½ï¼š</p>
<ul>
<li>è‡ªåŠ¨è§£æ URL code</li>
<li>è‡ªåŠ¨è°ƒç”¨è®¤è¯ä¸­å¿ƒ <code>/sso/code/verify</code></li>
<li>è‡ªåŠ¨åˆ›å»ºæœ¬åœ° token</li>
<li>è‡ªåŠ¨æ¥å…¥é€€å‡ºæœºåˆ¶</li>
<li>è‡ªåŠ¨æ‹¦æˆªæ— æ•ˆ token</li>
</ul>
<p>æ•´ä¸ªæµç¨‹ä¸éœ€è¦äººå·¥é‡å¤å®ç°ï¼Œæé«˜ä¸€è‡´æ€§ï¼Œä¹Ÿå‡å°‘å‡ºé”™æ¦‚ç‡ã€‚</p>
<h4 data-id="heading-32">3. éç§æœ‰åŒ–ç³»ç»Ÿæ¥å…¥ï¼šåƒ Jenkinsã€GitLabï¼Œè¿™ç±»ç³»ç»Ÿä¸æ–¹ä¾¿æ”¹ä»£ç æ€ä¹ˆåŠï¼Ÿ</h4>
<p>å¾ˆå¤šå·¥å…·ç³»ç»Ÿï¼ˆJenkinsã€GitLabã€Prometheusã€Grafanaï¼‰æ˜¯ç¬¬ä¸‰æ–¹éƒ¨ç½²çš„ï¼Œä¸æ˜¯æˆ‘ä»¬å†™çš„ä»£ç ï¼Œæ‰€ä»¥å®ƒä»¬ä¸å¯èƒ½æ¥æˆ‘ä»¬çš„ SSO <code>verifyCode</code> é€»è¾‘ã€‚</p>
<p>ä½†å¯¹äºè¿™ç±»ç³»ç»Ÿï¼Œå…¶å®ç™»å½•æ§åˆ¶ä¹Ÿä¸å¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§â€œè½»é‡çº§é€šè¡Œè¯æ¨¡å¼â€å¤„ç†ã€‚</p>
<p>ä½œä¸ºä¾‹å­ï¼š</p>
<p><strong>é—¨æˆ·è·³è½¬åˆ° Jenkins æ—¶ï¼Œä¸ç”¨ codeï¼Œä¸ç”¨ verifyï¼Œåªè¦æ¨¡æ‹Ÿç”¨æˆ·å·²ç™»å½•çŠ¶æ€å³å¯ã€‚</strong></p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>å‘ä¸€ä¸ªå¸¦ç™»å½• Cookie çš„ URL</li>
<li>å¸¦ä¸€ä¸ª access_token è¿‡å»</li>
<li>å¸¦ basic_auth ä¿¡æ¯</li>
<li>æˆ–è€…ç›´æ¥åå‘ä»£ç†æ³¨å…¥ headerï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰</li>
</ul>
<p>ä¾‹å¦‚å¯¹äº Jenkinsï¼š</p>
<pre><code class="hljs language-ini" lang="ini">https://jenkins.xxx.com/login?<span class="hljs-attr">redirect</span>=/?token=xxxx
</code></pre>
<p>æˆ–è€… Nginx ä»£ç†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">proxy_set_header X<span class="hljs-operator">-</span>Auth<span class="hljs-operator">-</span><span class="hljs-keyword">User</span> $<span class="hljs-keyword">user</span>;
</code></pre>
<p>ç§æœ‰åŒ–ç³»ç»Ÿèµ°ä¸¥æ ¼çš„ SSO è®¤è¯<br/>
éç§æœ‰åŒ–ç³»ç»Ÿèµ°è½»é‡ç™»å½•æ¨¡æ‹Ÿ<br/>
è¿™æ ·å°±ä¸ä¼šä¸ºäº†å…¼å®¹æŸäº›ç³»ç»Ÿæå¾—ç»“æ„å¾ˆä¹±ã€‚</p>
<h4 data-id="heading-33">4. æˆ‘ä»¬è¿™æ ·è®¾è®¡çš„æ ¸å¿ƒç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</h4>
<p>æ€»çš„æ¥è¯´ï¼š</p>
<blockquote>
<p>ä¿ç•™ç»Ÿä¸€é—¨æˆ·çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¸ç»™å­ç³»ç»Ÿå¢åŠ è´Ÿæ‹…ï¼Œä¹Ÿä¸å¼ºåˆ¶æ‰€æœ‰ç³»ç»Ÿå¿…é¡»ä¾èµ– SSOã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li>Javaã€PHPã€Go ç­‰é¡¹ç›®ï¼šç”¨ SDK è‡ªåŠ¨æ¥å…¥ï¼Œä½æˆæœ¬</li>
<li>ç¬¬ä¸‰æ–¹å·¥å…·ï¼šç”¨è½»é‡æ–¹æ¡ˆæ¨¡æ‹Ÿç™»å½•ï¼Œä¸å»ç¡¬å¡ SSO</li>
<li>å­ç³»ç»Ÿæ—¢èƒ½é€šè¿‡é—¨æˆ·å…ç™»ï¼Œä¹Ÿèƒ½å•ç‹¬ç™»å½•</li>
<li>å•ç‚¹é€€å‡ºåªå½±å“ SSO å…¥å£ï¼Œä¸å½±å“æœ¬åœ°ç™»å½•</li>
<li>æ•´ä½“ç»“æ„ä¸è€¦åˆã€å¯è‡ªç”±ç»„åˆã€é€‚é…èƒ½åŠ›å¼º</li>
</ul>
<p>è¿™å¥—æ¨¡å¼å¯¹äºæˆ‘ä»¬çœŸå®çš„ä¼ä¸šå†…éƒ¨ç¯å¢ƒå…¶å®éå¸¸å‹å¥½ï¼Œå°¤å…¶é€‚åˆâ€œå¤šåå°ã€å¤šè¯­è¨€ã€å¤šç¯å¢ƒâ€çš„å…¬å¸ï¼Œä¸ä¼šå› ä¸ºå¼•å…¥ SSO è€ŒæŠŠæ‰€æœ‰ç³»ç»Ÿéƒ½æå¾—ç»‘æ­»åœ¨ä¸€èµ·ã€‚</p>
<h3 data-id="heading-34">å…¶ä»–ï¼šåˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„éƒ¨ç½²æ³¨æ„äº‹é¡¹</h3>
<p>æˆ‘ä»¬åšçš„è¿™ä¸ªç³»ç»Ÿåœ¨å•æœºç¯å¢ƒé‡Œè·‘ SSO æ²¡å•¥é—®é¢˜ï¼Œä½†åªè¦ä¸Šäº†çœŸå®å…¬å¸ç¯å¢ƒï¼ŒåŸºæœ¬éƒ½æ˜¯å¤šå®ä¾‹ã€å¤šæœåŠ¡çš„åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œè¿™æ—¶å€™æœ‰ä¸¤ä¸ªç‚¹å¿…é¡»æå‰è§„åˆ’å¥½ã€‚</p>
<p>ç¬¬ä¸€æ˜¯<strong>ç™»å½•æ€è¦ç»Ÿä¸€å­˜å‚¨</strong>ã€‚ä¸èƒ½è®©æŸå°æœºå™¨è‡ªå·±ç®¡è‡ªå·±çš„ Sessionï¼Œå¦åˆ™ç”¨æˆ·è®¿é—® A æœºå™¨ç™»å½•æˆåŠŸï¼Œåˆ‡åˆ° B æœºå™¨å°±å˜æˆæœªç™»å½•ï¼Œä½“éªŒä¼šç›´æ¥å´©æ‰ã€‚ç¬¬äºŒæ˜¯<strong>æˆæƒç  codeã€ç”¨æˆ·ç™»å½•æ€ã€å•ç‚¹é€€å‡ºè®°å½•</strong>è¿™äº›ä¿¡æ¯éƒ½å¿…é¡»æ”¾åˆ°ä¸€ä¸ªæ‰€æœ‰å®ä¾‹éƒ½èƒ½è®¿é—®çš„åœ°æ–¹ã€‚å› æ­¤æˆ‘ä»¬æ•´ä¸ª SSO ä½“ç³»éƒ½ç»Ÿä¸€ä½¿ç”¨ Redisï¼Œä¸ç®¡è®¤è¯ä¸­å¿ƒæœ‰å¤šå°‘å°æœºå™¨ã€å­ç³»ç»Ÿæœ‰å¤šå°‘ä¸ªå®ä¾‹ï¼Œå®ƒä»¬å–å‡ºæ¥çš„ userLoginã€codeã€logout ä¿¡æ¯éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœå­ç³»ç»Ÿã€é—¨æˆ·æœ‰å¤šç¯å¢ƒï¼ˆdev/qa/prodï¼‰ï¼Œä¸€å®šè¦åœ¨ Redis key å‰ç¼€ä¸Šéš”ç¦»æ¸…æ¥šï¼Œé¿å…å¤šç¯å¢ƒæ··ç”¨å¯¼è‡´å¥‡æ€ªçš„é—®é¢˜ï¼Œæ¯”å¦‚ A ç¯å¢ƒé€€å‡ºæŠŠ B ç¯å¢ƒä¹Ÿè¸¢æ‰äº†ã€‚</p>
<p>æœ€åï¼Œå¦‚æœå…¬å¸è§„æ¨¡å¤§ä¸€äº›ï¼ŒRedis ä¹Ÿåº”è¯¥éƒ¨ç½²æˆé›†ç¾¤æˆ–å“¨å…µæ¨¡å¼ï¼Œé¿å…å®ƒæˆä¸ºæ•´ä¸ª SSO çš„å•ç‚¹æ•…éšœã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ä¸€å¥è¯ï¼š<strong>SSO æœ¬è´¨ä¸Šæ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€æœ‰å…±äº«çŠ¶æ€éƒ½ç»Ÿä¸€æ”¶æ•›åˆ° Redisï¼Œç³»ç»Ÿæ‰èƒ½æ¨ªå‘æ‰©å®¹ã€ä¿è¯ä¸€è‡´æ€§ã€‚</strong></p>
<h4 data-id="heading-35">ä¸ºä»€ä¹ˆæˆ‘æ²¡ä½¿ç”¨ Sessionï¼Ÿ</h4>
<p>å…¶ä¸­æœ‰ä¸€ç‚¹æˆ‘è§‰å¾—Session æœ€å¤§çš„é—®é¢˜å°±æ˜¯<strong>è·Ÿæœºå™¨ç»‘å®š</strong>ã€‚åªè¦æœåŠ¡æœ‰å¤šå°å®ä¾‹ï¼ŒSession å°±ç»å¯¹ä¼šå‡ºç°â€œä¸ä¸€è‡´â€çš„æƒ…å†µï¼Œé™¤éæˆ‘ä»¬ä¸Šç²˜æ€§ä¼šè¯ï¼ˆsticky sessionï¼‰æˆ–è€…æŠŠ Session åšæˆé›†ä¸­å¼å­˜å‚¨ï¼Œä½†é‚£å…¶å®åˆå˜æˆè‡ªå·±é€ äº†ä¸€ä¸ªç®€åŒ–ç‰ˆ Redisï¼Œç»´æŠ¤æˆæœ¬è¿˜ä¸å¦‚ç›´æ¥ç”¨ Redisã€‚æœ¬è´¨åŸå› å°±æ˜¯ Session å¤©ç„¶é€‚åˆå•æœºï¼Œä¸é€‚åˆåˆ†å¸ƒå¼çš„åå°ç¯å¢ƒã€‚</p>
<h4 data-id="heading-36">é‚£ä¸ºä»€ä¹ˆä¸æŠŠ code å­˜æ•°æ®åº“å‘¢ï¼Ÿ</h4>
<p>code æ˜¯ä¸€æ¬¡æ€§çš„ã€ç§’çº§ç”Ÿå‘½å‘¨æœŸçš„ä¸œè¥¿ï¼Œæ”¾æ•°æ®åº“å®Œå…¨æ²¡æœ‰æ„ä¹‰ã€‚æ•°æ®åº“é€‚åˆå­˜é•¿æœŸã€æœ‰ä»·å€¼çš„è®°å½•ï¼Œè€Œä¸æ˜¯è¿™ç§ç”¨å®Œå³åˆ çš„ä¸´æ—¶å‡­è¯ã€‚è€Œä¸”æ•°æ®åº“å†™å…¥æœ¬èº«å°±æ…¢ï¼Œé¢‘ç¹æ’å…¥ã€åˆ é™¤ä¸ä»…å  IOï¼Œä¹Ÿä¼šæ’‘å¤§ binlogï¼Œè¿˜ä¼šå¸¦æ¥äº‹åŠ¡é”ç«äº‰ã€‚SSO æ•´ä¸ªæµç¨‹è®²ç©¶â€œå¿«â€ï¼Œä¸€æ—¦æ•°æ®åº“å‚ä¸è¿›æ¥ï¼Œå»¶è¿Ÿä¼šç«‹åˆ»è¢«æ”¾å¤§ã€‚</p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œcode è¦åšåˆ°ä¸€æ¬¡æ€§åˆ é™¤ï¼Œè¿™ç§é¢‘ç¹ã€å¯†é›†ã€ç¬æ—¶çš„å°æ“ä½œç‰¹åˆ«é€‚åˆå†…å­˜å‹å­˜å‚¨ï¼Œè€Œä¸æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚</p>
<p>æ‰€ä»¥ä»ä¸€å¼€å§‹æˆ‘ä»¬å°±æŠŠ Redis å½“ä½œæ•´ä¸ª SSO çš„â€œçŠ¶æ€ä¸­å¿ƒâ€ï¼Œé—¨æˆ·ã€è®¤è¯ä¸­å¿ƒã€å­ç³»ç»Ÿéƒ½å¯ä»¥æ¨ªå‘æ‰©å®¹ï¼Œè€ŒçŠ¶æ€åˆæ˜¯ç»Ÿä¸€çš„ï¼Œè¿™æ ·æ¶æ„æ‰èƒ½ç¨³å®šè·‘èµ·æ¥ã€‚</p>
<hr/>
<h3 data-id="heading-37">æœ€å</h3>
<p>åšåˆ°è¿™é‡Œï¼Œå…¶å®è¿™å¥—ç»Ÿä¸€é—¨æˆ· + SSO çš„ä½“ç³»å°±ç®—å®Œæ•´è·‘é€šäº†ã€‚è¿™æ ·è®¾è®¡ä¹‹åï¼Œå¹³æ—¶æœ€çƒ¦çš„é‚£å‡ ä¸ªé—®é¢˜åŸºæœ¬éƒ½æ²¡äº†ï¼šä¸ç”¨å†åœ¨æµè§ˆå™¨è´´ä¸€æ’æ ‡ç­¾é¡µï¼Œä¹Ÿä¸ç”¨è®°ä¸€å †è´¦å·å¯†ç ï¼›è€æ¿å†ä¹Ÿä¸ä¼šéš”ä¸‰å·®äº”åœ°æ¥é—®â€œé‚£ä¸ªåå°åœ°å€ç»™æˆ‘å‘ä¸€ä¸‹â€ï¼›æ¢ä¸ªç”µè„‘ä¹Ÿä¸ç”¨ç¿»åŠå¤©èŠå¤©è®°å½•å»æ‰¾æŸä¸ªç³»ç»Ÿçš„å…¥å£ã€‚æ‰€æœ‰åå°éƒ½æ±‡æ€»åœ¨ä¸€ä¸ªé—¨æˆ·é‡Œï¼Œå®ƒå°±æˆäº†å…¬å¸å†…éƒ¨çš„â€œæ€»å…¥å£â€ã€‚</p>
<p>å¤§å®¶åªè¦è®°ä¸€ä¸ªåœ°å€ã€ç™»å½•ä¸€æ¬¡ï¼Œå°±èƒ½è¿›å»è‡ªå·±æœ‰æƒé™çš„æ‰€æœ‰ç³»ç»Ÿã€‚æƒé™é›†ä¸­ç®¡ç†ï¼Œç³»ç»Ÿé›†ä¸­å±•ç¤ºï¼Œå¥åº·æ£€æŸ¥ä¹Ÿé›†ä¸­æ˜¾ç¤ºï¼Œæ•´å¥—ä½“éªŒä»é›¶æ•£å˜æˆäº†æ¸…æ¸…çˆ½çˆ½çš„ä¸€å¥—ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™å¥—æ–¹æ¡ˆæ²¡æœ‰å¼ºåˆ¶æ‰€æœ‰å­ç³»ç»Ÿå®Œå…¨ä¾èµ– SSOï¼Œè°æ„¿æ„èµ°å…ç™»å½•å°±èµ°å…ç™»å½•ï¼Œè°éœ€è¦å•ç‹¬ç™»å½•ä¹Ÿå®Œå…¨ä¸å½±å“ï¼Œäº’ä¸è€¦åˆã€äº’ä¸å¹²æ‰°ï¼Œç”¨èµ·æ¥éå¸¸çµæ´»ã€‚</p>
<p>ä»å¼€å‘çš„è§’åº¦çœ‹ï¼ŒæŠŠ SSO å°æˆ SDK åï¼Œæ–°é¡¹ç›®æ¥å…¥å˜æˆä¸€ä»¶éå¸¸è½»æ¾çš„äº‹æƒ…ï¼Œå‡ åˆ†é’Ÿå°±èƒ½å®Œæˆï¼Œä¸ç”¨æ¯ä¸ªé¡¹ç›®é‡å¤å†™ä¸€é code æ ¡éªŒã€token ç”Ÿæˆã€æ‹¦æˆªå™¨è¿™äº›é€»è¾‘ã€‚åé¢ç³»ç»Ÿè¶Šæ¥è¶Šå¤šã€ç¯å¢ƒè¶Šæ¥è¶Šå¤šã€å›¢é˜Ÿè¶Šæ¥è¶Šå¤§ï¼Œä¹Ÿä¸ä¼šå‡ºç°ç™»å½•ä½“ç³»æ··ä¹±çš„æƒ…å†µã€‚è¿™ç§â€œç»Ÿä¸€ä½†ä¸æ­»ç»‘â€çš„æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆä¸­å°å›¢é˜Ÿåœ¨å¤šåå°ã€å¤šè¯­è¨€ã€å¤šç¯å¢ƒçš„å®é™…åœºæ™¯é‡Œé•¿æœŸä½¿ç”¨ã€‚</p>
<p>æŒ‰ç…§è¿™ä¸ªæ¶æ„ç»§ç»­æ‰©å±•ï¼Œå…¶å®è¿˜èƒ½åšå¾ˆå¤šäº‹ï¼Œæ¯”å¦‚åå°å¯¼èˆªã€å†…éƒ¨æœç´¢ã€å¿«æ·å…¥å£ã€æ¶ˆæ¯é€šçŸ¥ã€ç³»ç»Ÿå·¡æ£€ç­‰ç­‰ï¼Œéƒ½å¯ä»¥å¾€ä¸Šå ã€‚æ€»ä¹‹ï¼Œè¿™å¥—ç»Ÿä¸€é—¨æˆ·å¯ä»¥æ…¢æ…¢æˆé•¿æˆå…¬å¸å†…éƒ¨ç¨³å®šå¥½ç”¨çš„ä¸€ç«™å¼å…¥å£ï¼ŒçœŸæ­£è§£å†³æˆ‘ä»¬æ—¥å¸¸è¢«å¤šä¸ªåå°æŠ˜è…¾çš„é‚£äº›éº»çƒ¦äº‹ã€‚ç»ˆäºä¸ç”¨è°éƒ½æ¥æ‰¾æˆ‘è¦åœ°å€äº†...</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Blob å’Œ File API å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576155790164574259</link>    <guid>https://juejin.cn/post/7576155790164574259</guid>    <pubDate>2025-11-24T15:11:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155790164574259" data-draft-id="7575182522411401254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Blob å’Œ File API å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-24T15:11:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yanni4Night"/> <meta itemprop="url" content="https://juejin.cn/user/4089838983724520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Blob å’Œ File API å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838983724520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yanni4Night
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T15:11:31.000Z" title="Mon Nov 24 2025 15:11:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsdev.space%2Fhowto%2Fblob-file-handling-guide%2F" target="_blank" title="https://jsdev.space/howto/blob-file-handling-guide/" ref="nofollow noopener noreferrer">jsdev.space/howto/blob-â€¦</a></p>
</blockquote>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Blobï¼Ÿ</h2>
<p>Blobï¼ˆBinary Large Objectï¼ŒäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰æ˜¯Webå¼€å‘ä¸­ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„å¯¹è±¡ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨å®ƒæ¥å¤„ç†å„ç§å¤§å‹äºŒè¿›åˆ¶å†…å®¹ï¼Œå¦‚å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰æ–‡ä»¶ã€‚Blobå¯¹è±¡ç”±å­—èŠ‚åºåˆ—æ„æˆï¼Œæ‹¥æœ‰ä¸¤ä¸ªé‡è¦å±æ€§ï¼š<code>size</code>ï¼ˆè¡¨ç¤ºæ•°æ®çš„å­—èŠ‚å¤§å°ï¼‰å’Œ<code>type</code>ï¼ˆè¡¨ç¤ºæ•°æ®çš„MIMEç±»å‹ï¼‰ã€‚</p>
<h2 data-id="heading-1">åˆ›å»º Blob å¯¹è±¡</h2>
<p>åˆ›å»ºBlobå¯¹è±¡çš„åŸºæœ¬è¯­æ³•éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(array, options);
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>array</code>ï¼šä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åŒ…å«ArrayBufferã€ArrayBufferViewã€Blobæˆ–DOMStringç­‰ç±»å‹çš„æ•°æ®</li>
<li><code>options</code>ï¼šå¯é€‰é…ç½®å¯¹è±¡ï¼ŒåŒ…å«ï¼š
<ul>
<li><code>type</code>ï¼šæŒ‡å®šBlobçš„MIMEç±»å‹</li>
<li><code>endings</code>ï¼šè®¾ç½®è¡Œç»“æŸç¬¦çš„å¤„ç†æ–¹å¼ï¼Œå¯é€‰å€¼ä¸º<code>'transparent'</code>ï¼ˆä¿æŒåŸæ ·ï¼‰æˆ–<code>'native'</code>ï¼ˆæ ¹æ®å¹³å°è½¬æ¢ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">ç¤ºä¾‹ï¼šåˆ›å»ºæ–‡æœ¬ Blob</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> text = <span class="hljs-string">'Hello, world!'</span>;
<span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([text], { <span class="hljs-attr">type</span>: <span class="hljs-string">'text/plain'</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(blob.<span class="hljs-property">size</span>); <span class="hljs-comment">// è¾“å‡ºï¼š13</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(blob.<span class="hljs-property">type</span>); <span class="hljs-comment">// è¾“å‡ºï¼š'text/plain'</span>
</code></pre>
<h3 data-id="heading-3">ç¤ºä¾‹ï¼šåˆ›å»ºå›¾åƒ Blob</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªUint8ArrayåŒ…å«å›¾åƒæ•°æ®</span>
<span class="hljs-keyword">const</span> imageData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-comment">/* å›¾åƒå­—èŠ‚æ•°æ® */</span>]);
<span class="hljs-keyword">const</span> imageBlob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([imageData], { <span class="hljs-attr">type</span>: <span class="hljs-string">'image/jpeg'</span> });
</code></pre>
<h2 data-id="heading-4">File å¯¹è±¡è¯¦è§£</h2>
<p>Fileå¯¹è±¡ç»§æ‰¿è‡ªBlobï¼Œä¸“é—¨ç”¨äºè¡¨ç¤ºæ–‡ä»¶ã€‚åœ¨Webåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–Fileå¯¹è±¡ï¼š</p>
<ul>
<li>ç”¨æˆ·é€šè¿‡<code>&lt;input type="file"&gt;</code>å…ƒç´ é€‰æ‹©çš„æ–‡ä»¶</li>
<li>ç”¨æˆ·é€šè¿‡æ‹–æ”¾APIæ‹–å…¥çš„æ–‡ä»¶</li>
</ul>
<p>é™¤äº†ç»§æ‰¿Blobçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å¤–ï¼ŒFileå¯¹è±¡è¿˜æä¾›äº†å‡ ä¸ªå®ç”¨å±æ€§ï¼š</p>
<ul>
<li><code>name</code>ï¼šæ–‡ä»¶åç§°</li>
<li><code>lastModified</code>ï¼šæ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´çš„æ—¶é—´æˆ³</li>
<li><code>lastModifiedDate</code>ï¼šæ–‡ä»¶æœ€åä¿®æ”¹çš„æ—¥æœŸå¯¹è±¡ï¼ˆDateç±»å‹ï¼‰</li>
</ul>
<h2 data-id="heading-5">å¤„ç†æ–‡ä»¶è¾“å…¥</h2>
<h3 data-id="heading-6">é€šè¿‡æ–‡ä»¶é€‰æ‹©æ¡†è·å–æ–‡ä»¶</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileInput"</span> <span class="hljs-attr">multiple</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'fileInput'</span>);
  
  fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> files = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> files) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å:'</span>, file.<span class="hljs-property">name</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç±»å‹:'</span>, file.<span class="hljs-property">type</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤§å°:'</span>, file.<span class="hljs-property">size</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€åä¿®æ”¹æ—¶é—´:'</span>, file.<span class="hljs-property">lastModified</span>);
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">é€šè¿‡æ‹–æ”¾åŠŸèƒ½è·å–æ–‡ä»¶</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dropZone"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px; height: 200px; border: 2px dashed #ccc; text-align: center; line-height: 200px;"</span>&gt;</span>
  å°†æ–‡ä»¶æ‹–æ”¾åˆ°æ­¤å¤„
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> dropZone = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dropZone'</span>);
  
  <span class="hljs-comment">// æ‹–å…¥æ—¶æ”¹å˜è¾¹æ¡†é¢œè‰²</span>
  dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragover'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    event.<span class="hljs-title function_">preventDefault</span>();
    dropZone.<span class="hljs-property">style</span>.<span class="hljs-property">borderColor</span> = <span class="hljs-string">'#000'</span>;
  });
  
  <span class="hljs-comment">// æ‹–ç¦»æ—¶æ¢å¤è¾¹æ¡†é¢œè‰²</span>
  dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragleave'</span>, <span class="hljs-function">() =&gt;</span> {
    dropZone.<span class="hljs-property">style</span>.<span class="hljs-property">borderColor</span> = <span class="hljs-string">'#ccc'</span>;
  });
  
  <span class="hljs-comment">// æ”¾ç½®æ–‡ä»¶æ—¶è·å–æ–‡ä»¶ä¿¡æ¯</span>
  dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    event.<span class="hljs-title function_">preventDefault</span>();
    dropZone.<span class="hljs-property">style</span>.<span class="hljs-property">borderColor</span> = <span class="hljs-string">'#ccc'</span>;
    
    <span class="hljs-keyword">const</span> files = event.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">files</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file <span class="hljs-keyword">of</span> files) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å:'</span>, file.<span class="hljs-property">name</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç±»å‹:'</span>, file.<span class="hljs-property">type</span>);
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-8">è¯»å– Blob å’Œ File å†…å®¹</h2>
<h3 data-id="heading-9">ä½¿ç”¨ FileReader è¯»å–æ–‡ä»¶</h3>
<p>FileReader API æä¾›äº†å¤šç§æ–¹å¼æ¥è¯»å–Blobæˆ–Fileå¯¹è±¡çš„å†…å®¹ï¼š</p>
<ol>
<li><code>readAsText()</code> - å°†æ–‡ä»¶å†…å®¹è¯»å–ä¸ºæ–‡æœ¬å­—ç¬¦ä¸²</li>
<li><code>readAsDataURL()</code> - å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºData URLï¼ˆé€‚ç”¨äºå›¾ç‰‡é¢„è§ˆç­‰åœºæ™¯ï¼‰</li>
<li><code>readAsArrayBuffer()</code> - å°†æ–‡ä»¶å†…å®¹è¯»å–ä¸ºArrayBufferï¼ˆé€‚åˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰</li>
<li><code>readAsBinaryString()</code> - å°†æ–‡ä»¶è¯»å–ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå·²åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ï¼‰</li>
</ol>
<h3 data-id="heading-10">ç¤ºä¾‹ï¼šå¼‚æ­¥è¯»å–æ–‡æœ¬æ–‡ä»¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°†FileReaderå°è£…ä¸ºPromiseï¼Œæ–¹ä¾¿ä½¿ç”¨async/await</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">readTextFile</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
    
    reader.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(reader.<span class="hljs-property">result</span>);
    reader.<span class="hljs-property">onerror</span> = reject;
    
    reader.<span class="hljs-title function_">readAsText</span>(file);
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">const</span> file = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readTextFile</span>(file);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, text);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–æ–‡ä»¶å¤±è´¥:'</span>, error);
  }
});
</code></pre>
<h3 data-id="heading-11">ç¤ºä¾‹ï¼šå®ç°å›¾åƒé¢„è§ˆåŠŸèƒ½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°†å›¾åƒæ–‡ä»¶è½¬æ¢ä¸ºData URLçš„å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">previewImage</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
    
    reader.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(reader.<span class="hljs-property">result</span>);
    reader.<span class="hljs-property">onerror</span> = reject;
    
    reader.<span class="hljs-title function_">readAsDataURL</span>(file);
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ - é€‰æ‹©å›¾ç‰‡åç«‹å³é¢„è§ˆ</span>
fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">const</span> file = event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  
  <span class="hljs-comment">// ç¡®ä¿é€‰æ‹©çš„æ˜¯å›¾åƒæ–‡ä»¶</span>
  <span class="hljs-keyword">if</span> (file &amp;&amp; file.<span class="hljs-property">type</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'image/'</span>)) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> dataURL = <span class="hljs-keyword">await</span> <span class="hljs-title function_">previewImage</span>(file);
      <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>);
      img.<span class="hljs-property">src</span> = dataURL;
      img.<span class="hljs-property">style</span>.<span class="hljs-property">maxWidth</span> = <span class="hljs-string">'300px'</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(img);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é¢„è§ˆå›¾åƒå¤±è´¥:'</span>, error);
    }
  }
});
</code></pre>
<h2 data-id="heading-12">ä½¿ç”¨ URL.createObjectURL</h2>
<p><code>URL.createObjectURL()</code>æ–¹æ³•å¯ä»¥ä¸ºBlobæˆ–Fileå¯¹è±¡åˆ›å»ºä¸€ä¸ªä¸´æ—¶URLã€‚è¿™ä¸ªç‰¹æ€§åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºæœ¬åœ°å›¾ç‰‡æˆ–æä¾›æ–‡ä»¶ä¸‹è½½é“¾æ¥ã€‚</p>
<h3 data-id="heading-13">ç¤ºä¾‹ï¼šé€šè¿‡ object URL é«˜æ•ˆæ˜¾ç¤ºå›¾åƒ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">displayImageWithObjectURL</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-comment">// åˆ›å»ºä¸´æ—¶URL</span>
  <span class="hljs-keyword">const</span> objectURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(file);
  
  <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>);
  img.<span class="hljs-property">src</span> = objectURL;
  img.<span class="hljs-property">style</span>.<span class="hljs-property">maxWidth</span> = <span class="hljs-string">'300px'</span>;
  
  <span class="hljs-comment">// å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œè®°å¾—é‡Šæ”¾URLèµ„æº</span>
  img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(objectURL);
  };
  
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(img);
}
</code></pre>
<h3 data-id="heading-14">ç¤ºä¾‹ï¼šåˆ›å»ºæ–‡ä»¶ä¸‹è½½é“¾æ¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createDownloadLink</span>(<span class="hljs-params">file, filename</span>) {
  <span class="hljs-comment">// ä¸ºæ–‡ä»¶åˆ›å»ºä¸´æ—¶URL</span>
  <span class="hljs-keyword">const</span> objectURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(file);
  
  <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
  link.<span class="hljs-property">href</span> = objectURL;
  link.<span class="hljs-property">download</span> = filename || file.<span class="hljs-property">name</span>; <span class="hljs-comment">// æŒ‡å®šä¸‹è½½æ–‡ä»¶å</span>
  link.<span class="hljs-property">textContent</span> = <span class="hljs-string">'ä¸‹è½½æ–‡ä»¶'</span>;
  
  <span class="hljs-comment">// ç‚¹å‡»ä¸‹è½½åæ¸…ç†URLèµ„æº</span>
  link.<span class="hljs-property">onclick</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(objectURL);
    }, <span class="hljs-number">100</span>);
  };
  
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(link);
}
</code></pre>
<h2 data-id="heading-15">åˆ‡ç‰‡ Blob æ•°æ®</h2>
<p>Blobå¯¹è±¡çš„<code>slice()</code>æ–¹æ³•å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„Blobå¯¹è±¡ï¼ŒåªåŒ…å«åŸå§‹Blobä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨å¤„ç†å¤§å‹æ–‡ä»¶æˆ–å®ç°åˆ†å—ä¸Šä¼ æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¯­æ³•</span>
<span class="hljs-keyword">const</span> newBlob = blob.<span class="hljs-title function_">slice</span>(start, end, contentType);
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>start</code>ï¼šåˆ‡ç‰‡çš„èµ·å§‹å­—èŠ‚ä½ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º0ï¼‰</li>
<li><code>end</code>ï¼šåˆ‡ç‰‡çš„ç»“æŸå­—èŠ‚ä½ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºBlobçš„æ€»å¤§å°ï¼‰</li>
<li><code>contentType</code>ï¼šæ–°Blobçš„MIMEç±»å‹ï¼ˆå¯é€‰ï¼Œä¸æŒ‡å®šåˆ™ä¿æŒä¸åŸBlobç›¸åŒï¼‰</li>
</ul>
<h3 data-id="heading-16">ç¤ºä¾‹ï¼šå®ç°æ–‡ä»¶åˆ†å—ä¸Šä¼ </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ†å—ä¸Šä¼ æ–‡ä»¶å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFileInChunks</span>(<span class="hljs-params">file, chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span></span>) { <span class="hljs-comment">// é»˜è®¤æ¯å—1MB</span>
  <span class="hljs-keyword">const</span> totalChunks = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize);
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalChunks; i++) {
    <span class="hljs-comment">// è®¡ç®—å½“å‰å—çš„èµ·å§‹å’Œç»“æŸä½ç½®</span>
    <span class="hljs-keyword">const</span> start = i * chunkSize;
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
    
    <span class="hljs-comment">// åˆ‡ç‰‡è·å–å½“å‰å—æ•°æ®</span>
    <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(start, end);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ­£åœ¨ä¸Šä¼ ç¬¬ <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>/<span class="hljs-subst">${totalChunks}</span> å—, å¤§å°: <span class="hljs-subst">${chunk.size}</span> å­—èŠ‚`</span>);
    
    <span class="hljs-comment">// ä¸Šä¼ å½“å‰å—</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadChunk</span>(chunk, i, totalChunks, file.<span class="hljs-property">name</span>);
  }
}

<span class="hljs-comment">// ä¸Šä¼ å•ä¸ªæ•°æ®å—</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadChunk</span>(<span class="hljs-params">chunk, chunkIndex, totalChunks, filename</span>) {
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, chunk, filename);
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunkIndex'</span>, chunkIndex);
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'totalChunks'</span>, totalChunks);
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/upload-chunk'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: formData
    });
    
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ä¸Šä¼ å—å¤±è´¥'</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ä¸Šä¼ ç¬¬ <span class="hljs-subst">${chunkIndex}</span> å—å¤±è´¥:`</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<h2 data-id="heading-17">å°† Blob è½¬æ¢ä¸º File</h2>
<p>å°½ç®¡Fileå¯¹è±¡ç»§æ‰¿è‡ªBlobï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†Blobå¯¹è±¡è½¬æ¢ä¸ºFileå¯¹è±¡ï¼Œä»¥ä¾¿æ·»åŠ æ–‡ä»¶åå’Œä¿®æ”¹æ—¶é—´ç­‰ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°†Blobè½¬æ¢ä¸ºFileçš„å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">blobToFile</span>(<span class="hljs-params">blob, filename, options = {}</span>) {
  <span class="hljs-keyword">const</span> { lastModified = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() } = options;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([blob], filename, {
    <span class="hljs-attr">type</span>: blob.<span class="hljs-property">type</span>,
    lastModified
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-string">'Hello, world!'</span>], { <span class="hljs-attr">type</span>: <span class="hljs-string">'text/plain'</span> });
<span class="hljs-keyword">const</span> file = <span class="hljs-title function_">blobToFile</span>(blob, <span class="hljs-string">'hello.txt'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(file <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">File</span>); <span class="hljs-comment">// è¾“å‡º: true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(file.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º: 'hello.txt'</span>
</code></pre>
<h2 data-id="heading-18">ä»å­—ç¬¦ä¸²åˆ›å»º Blob</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»å­—ç¬¦ä¸²åˆ›å»ºBlobçš„è¾…åŠ©å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">stringToBlob</span>(<span class="hljs-params">str, mimeType = <span class="hljs-string">'text/plain'</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([str], { <span class="hljs-attr">type</span>: mimeType });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ - åˆ›å»ºJSONæ ¼å¼çš„Blob</span>
<span class="hljs-keyword">const</span> jsonBlob = <span class="hljs-title function_">stringToBlob</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">hello</span>: <span class="hljs-string">'world'</span> }), <span class="hljs-string">'application/json'</span>);
</code></pre>
<h2 data-id="heading-19">å°† Blob è½¬æ¢ä¸º ArrayBuffer</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°†Blobè½¬æ¢ä¸ºArrayBufferçš„å¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">blobToArrayBuffer</span>(<span class="hljs-params">blob</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
    reader.<span class="hljs-property">onloadend</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(reader.<span class="hljs-property">result</span>);
    reader.<span class="hljs-property">onerror</span> = reject;
    reader.<span class="hljs-title function_">readAsArrayBuffer</span>(blob);
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processBinaryData</span>(<span class="hljs-params">blob</span>) {
  <span class="hljs-keyword">const</span> arrayBuffer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">blobToArrayBuffer</span>(blob);
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®</span>
}
</code></pre>
<h2 data-id="heading-20">å®ç”¨åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-21">1. åŠ¨æ€ç”Ÿæˆå¹¶ä¸‹è½½æ–‡ä»¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”Ÿæˆæ–‡æœ¬æ–‡ä»¶å¹¶è§¦å‘ä¸‹è½½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">downloadTextFile</span>(<span class="hljs-params">text, filename, mimeType = <span class="hljs-string">'text/plain'</span></span>) {
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([text], { <span class="hljs-attr">type</span>: mimeType });
  <span class="hljs-keyword">const</span> objectURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
  
  <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
  link.<span class="hljs-property">href</span> = objectURL;
  link.<span class="hljs-property">download</span> = filename;
  
  <span class="hljs-comment">// è§¦å‘ç‚¹å‡»ä¸‹è½½</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(link);
  link.<span class="hljs-title function_">click</span>();
  
  <span class="hljs-comment">// æ¸…ç†ä¸´æ—¶å…ƒç´ å’ŒURL</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(link);
    <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(objectURL);
  }, <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šä¸‹è½½æ ¼å¼åŒ–çš„JSONæ–‡ä»¶</span>
<span class="hljs-title function_">downloadTextFile</span>(
  <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
  <span class="hljs-string">'data.json'</span>,
  <span class="hljs-string">'application/json'</span>
);
</code></pre>
<h3 data-id="heading-22">2. å®¢æˆ·ç«¯è°ƒæ•´å›¾åƒå¤§å°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼‚æ­¥è°ƒæ•´å›¾åƒå¤§å°å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">resizeImage</span>(<span class="hljs-params">file, maxWidth = <span class="hljs-number">1024</span>, maxHeight = <span class="hljs-number">1024</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    img.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(file);
    
    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// åŠ è½½å®Œæˆåé‡Šæ”¾URL</span>
      <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(img.<span class="hljs-property">src</span>);
      
      <span class="hljs-keyword">let</span> width = img.<span class="hljs-property">width</span>;
      <span class="hljs-keyword">let</span> height = img.<span class="hljs-property">height</span>;
      
      <span class="hljs-comment">// æ ¹æ®æœ€å¤§å°ºå¯¸æŒ‰æ¯”ä¾‹è°ƒæ•´</span>
      <span class="hljs-keyword">if</span> (width &gt; height) {
        <span class="hljs-comment">// æ¨ªå‘å›¾ç‰‡</span>
        <span class="hljs-keyword">if</span> (width &gt; maxWidth) {
          height *= maxWidth / width;
          width = maxWidth;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// çºµå‘å›¾ç‰‡</span>
        <span class="hljs-keyword">if</span> (height &gt; maxHeight) {
          width *= maxHeight / height;
          height = maxHeight;
        }
      }
      
      <span class="hljs-comment">// åˆ›å»ºç”»å¸ƒå¹¶ç»˜åˆ¶è°ƒæ•´åçš„å›¾åƒ</span>
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
      canvas.<span class="hljs-property">width</span> = width;
      canvas.<span class="hljs-property">height</span> = height;
      <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
      ctx.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);
      
      <span class="hljs-comment">// å°†ç”»å¸ƒå†…å®¹è½¬æ¢å›Blobï¼Œå†è½¬æˆFileå¯¹è±¡è¿”å›</span>
      canvas.<span class="hljs-title function_">toBlob</span>(<span class="hljs-function">(<span class="hljs-params">blob</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (blob) {
          <span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([blob], file.<span class="hljs-property">name</span>, { <span class="hljs-attr">type</span>: file.<span class="hljs-property">type</span> }));
        }
      }, file.<span class="hljs-property">type</span>);
    };
  });
}
</code></pre>
<h3 data-id="heading-23">3. æ–‡ä»¶ç±»å‹éªŒè¯å‡½æ•°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶ç±»å‹æ˜¯å¦ç¬¦åˆè¦æ±‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateFileType</span>(<span class="hljs-params">file, allowedTypes</span>) {
  <span class="hljs-keyword">const</span> fileType = file.<span class="hljs-property">type</span>;
  
  <span class="hljs-keyword">return</span> allowedTypes.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†é€šé…ç¬¦ç±»å‹ï¼Œå¦‚ 'image/*'</span>
    <span class="hljs-keyword">if</span> (type.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'/*'</span>)) {
      <span class="hljs-keyword">return</span> fileType.<span class="hljs-title function_">startsWith</span>(type.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">2</span>));
    }
    <span class="hljs-comment">// å¤„ç†å…·ä½“ç±»å‹ï¼Œå¦‚ 'image/jpeg'</span>
    <span class="hljs-keyword">return</span> fileType === type;
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> allowedTypes = [<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-string">'image/png'</span>, <span class="hljs-string">'image/*'</span>];
<span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">validateFileType</span>(file, allowedTypes);
</code></pre>
<h2 data-id="heading-24">å¼€å‘æœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>åŠæ—¶é‡Šæ”¾å¯¹è±¡URL</strong>ï¼š<code>URL.createObjectURL()</code>åˆ›å»ºçš„URLä¼šå ç”¨æµè§ˆå™¨å†…å­˜ï¼Œä½¿ç”¨å®Œæ¯•ååŠ¡å¿…è°ƒç”¨<code>URL.revokeObjectURL()</code>é‡Šæ”¾èµ„æºã€‚</p>
</li>
<li>
<p><strong>å¤§æ–‡ä»¶å¤„ç†é‡‡ç”¨åˆ†å—ç­–ç•¥</strong>ï¼šå¤„ç†å¤§å‹æ–‡ä»¶æ—¶ï¼Œåˆ©ç”¨<code>slice()</code>æ–¹æ³•åˆ†å—å¤„ç†ï¼Œå¯æœ‰æ•ˆé¿å…å†…å­˜æº¢å‡ºé—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä¸¥æ ¼éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°</strong>ï¼šæ¥æ”¶ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶æ—¶ï¼ŒåŠ¡å¿…éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°ï¼Œæå‡åº”ç”¨å®‰å…¨æ€§ã€‚</p>
</li>
<li>
<p><strong>å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶</strong>ï¼šæ–‡ä»¶æ“ä½œå¯èƒ½å› å„ç§åŸå› å¤±è´¥ï¼ŒåŠ¡å¿…å®ç°å…¨é¢çš„é”™è¯¯æ•è·å’Œå¤„ç†é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥API</strong>ï¼šæ–‡ä»¶å¤„ç†å±äºI/Oå¯†é›†å‹æ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥æ–¹æ³•å¯é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¿è¯é¡µé¢å“åº”æ€§ã€‚</p>
</li>
</ol>
<h2 data-id="heading-25">æµè§ˆå™¨å…¼å®¹æ€§</h2>
<p>Blobå’ŒFile APIåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­éƒ½å¾—åˆ°äº†è‰¯å¥½æ”¯æŒï¼Œä½†åœ¨å¤„ç†ä¸€äº›è¾¹ç¼˜æƒ…å†µæˆ–éœ€è¦å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨æ—¶ï¼Œå»ºè®®æŸ¥é˜…å…·ä½“APIçš„å…¼å®¹æ€§è¡¨æ ¼ã€‚å¯¹äºè¾ƒè€çš„æµè§ˆå™¨ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨polyfillæˆ–å…¶ä»–æ›¿ä»£æ–¹æ¡ˆæ¥ä¿è¯åŠŸèƒ½æ­£å¸¸ã€‚</p>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>Blobå’ŒFile APIä¸ºWebåº”ç”¨å¼€å‘æä¾›äº†å¼ºå¤§çš„å®¢æˆ·ç«¯æ–‡ä»¶å¤„ç†èƒ½åŠ›ã€‚å€ŸåŠ©è¿™äº›APIï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾å®ç°åˆ›å»ºã€è¯»å–ã€ä¿®æ”¹å’Œç®¡ç†äºŒè¿›åˆ¶æ•°æ®çš„åŠŸèƒ½ã€‚æ— è®ºæ˜¯å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ã€ç”ŸæˆåŠ¨æ€å†…å®¹ï¼Œè¿˜æ˜¯å®ç°æ–‡ä»¶åˆ†å—ä¸Šä¼ ç­‰é«˜çº§åŠŸèƒ½ï¼ŒBlobå’ŒFile APIéƒ½èƒ½èƒœä»»ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå°†Blobå’ŒFile APIä¸Fetch APIã€Canvas APIç­‰æŠ€æœ¯ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥æ„å»ºå‡ºåŠŸèƒ½æ›´ä¸°å¯Œã€ç”¨æˆ·ä½“éªŒæ›´ä½³çš„Webåº”ç”¨ç¨‹åºã€‚</p>
<hr/>
 <p/>
<table>
    <tbody><tr>
        <td>
            <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f67cd30497a34f66ae5547c02192f59b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=1820&amp;s=574996&amp;e=jpg&amp;b=81dd6b" width="150" loading="lazy"/>
        </td>
        <td> 
<p>æ›´å¤š JavaScript åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ï¼Œå¯ä»¥å­¦ä¹ æˆ‘å†™çš„è¿™æœ¬ <a href="https://juejin.cn/book/7226969813581889575" target="_blank" title="https://juejin.cn/book/7226969813581889575">ã€ŠJavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶ã€‹</a>  å°å†Œã€‚ </p></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Androidã€‘ Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æ]]></title>    <link>https://juejin.cn/post/7576124206397227018</link>    <guid>https://juejin.cn/post/7576124206397227018</guid>    <pubDate>2025-11-24T10:36:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576124206397227018" data-draft-id="7576105442213183538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Androidã€‘ Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æ"/> <meta itemprop="keywords" content="Android,Java"/> <meta itemprop="datePublished" content="2025-11-24T10:36:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼¥å··"/> <meta itemprop="url" content="https://juejin.cn/user/1743186606454698"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Androidã€‘ Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743186606454698/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼¥å··
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T10:36:27.000Z" title="Mon Nov 24 2025 10:36:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Androidã€‘ Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æœ¬ç¯‡æ–‡ç« åŸºäºAPI36æºç ï¼Œç»“åˆå®‰å“å¼€å‘è‰ºæœ¯æ¢ç´¢ï¼Œå°†ä»æºç è§’åº¦ä»‹ç»äº‹ä»¶ä»é¡¶å±‚ViewGroupå‘ä¸‹ä¼ é€’çš„è¿‡ç¨‹ï¼Œä»¥åŠViewå¯¹äºäº‹ä»¶çš„å¤„ç†ã€‚</p>
<h3 data-id="heading-2">1. Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</h3>
<h4 data-id="heading-3">1.1 MotionEvent</h4>
<h4 data-id="heading-4">1.1.1 äº‹ä»¶ç±»å‹</h4>
<p><code>MotionEvent</code>æ˜¯Androidä¸­è¡¨ç¤ºè§¦æ‘¸å±è¾“å…¥äº‹ä»¶çš„ç±»ï¼Œå°è£…äº†æ‰€æœ‰è§¦æ‘¸æ“ä½œçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åæ ‡ã€å‹åŠ›ã€è§¦ç‚¹æ•°é‡ã€äº‹ä»¶ç±»å‹ç­‰ã€‚è¿™é‡Œä¸»è¦ä»‹ç»æ¯”è¾ƒå¸¸è§å‡ ç§äº‹ä»¶ç±»å‹ï¼š</p>
<ul>
<li>
<p>ACTION_DOWNï¼šæ‰‹æŒ‡åˆšæ¥è§¦å±å¹•ã€‚</p>
</li>
<li>
<p>ACTION_MOVEï¼šæ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨ã€‚</p>
</li>
<li>
<p>ACTION_UPï¼šæ‰‹æŒ‡ä»å±å¹•ä¸Šæ¾å¼€çš„ä¸€ç¬é—´ã€‚</p>
</li>
<li>
<p>ACTION_CANCELï¼šå½“å‰Viewå¤±å»äº†äº‹ä»¶å¤„ç†æƒæ—¶ã€‚ï¼ˆæ¯”å¦‚çˆ¶å®¹å™¨ä¸­é€”æ‹¦æˆªäº†äº‹ä»¶ï¼Œå½“å‰Viewè¢«ç§»é™¤æˆ–ä¸å¯è§ï¼Œæ‰“è¿›ç”µè¯ç­‰ï¼‰</p>
</li>
</ul>
<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œåœ¨Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ä¸­æ¯”è¾ƒé‡è¦ï¼Œå°±æ˜¯ä¸€ç³»åˆ—è§¦æ‘¸äº‹ä»¶ç»„æˆçš„æœ‰åºåºåˆ—ï¼Œç§°ä¹‹ä¸º<strong>äº‹ä»¶åºåˆ—</strong>ã€‚</p>
<ul>
<li><strong>äº‹ä»¶åºåˆ—</strong>ï¼šä»æ‰‹æŒ‡è§¦æ‘¸å±å¹•åˆ°ç¦»å¼€å±å¹•çš„å®Œæ•´è¿‡ç¨‹ï¼ŒåŒ…å«ä¸€ç³»åˆ—æœ‰åºçš„MotionEventã€‚</li>
</ul>
<p>ä¸‰ç§å…¸å‹çš„äº‹ä»¶åºåˆ—ï¼š</p>
<ul>
<li>
<p>ç®€å•ç‚¹å‡»ï¼šç‚¹å‡»å±å¹•åå¾ˆå¿«æ¾å¼€ï¼Œäº‹ä»¶åºåˆ—ä¸º<code>ACTION_DOWN â†’ ACTION_UP</code>ã€‚</p>
</li>
<li>
<p>å…¸å‹æ»‘åŠ¨ï¼šç‚¹å‡»å±å¹•åæ»‘åŠ¨ä¸€ä¼šå†æ¾å¼€ï¼Œäº‹ä»¶åºåˆ—ä¸ºï¼š<code>ACTION_DOWN â†’ ACTION_MOVE â†’ ACTION_MOVE â†’ ... â†’ ACTION_MOVE â†’ ACTION_UP</code></p>
</li>
<li>
<p>é•¿æŒ‰æ“ä½œï¼šç‚¹å‡»å±å¹•åé•¿æ—¶é—´ä¸æŠ¬èµ·è§¦å‘é•¿æŒ‰ï¼Œè§¦å‘åå¯èƒ½ä¼šæœ‰MOVEäº‹ä»¶ï¼Œäº‹ä»¶åºåˆ—ä¸º<code>ACTION_DOWN â†’ (ç­‰å¾…500ms) â†’ ACTION_MOVE? â†’ ACTION_UP</code>ï¼Œ</p>
</li>
</ul>
<h4 data-id="heading-5">1.1.2 åæ ‡æ–¹æ³•</h4>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡MotionEventå¯¹è±¡å¾—åˆ°ç‚¹å‡»äº‹ä»¶å‘ç”Ÿçš„xå’Œyåæ ‡ï¼Œç³»ç»Ÿæä¾›äº†ä»¥ä¸‹ä¸¤ç»„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">float</span> <span class="hljs-title function_">getX</span><span class="hljs-params">()</span>           <span class="hljs-comment">// ç›¸å¯¹äºå½“å‰Viewçš„Xåæ ‡</span>
<span class="hljs-type">float</span> <span class="hljs-title function_">getY</span><span class="hljs-params">()</span>           <span class="hljs-comment">// ç›¸å¯¹äºå½“å‰Viewçš„Yåæ ‡</span>
<span class="hljs-type">float</span> <span class="hljs-title function_">getRawX</span><span class="hljs-params">()</span>        <span class="hljs-comment">// ç›¸å¯¹äºå±å¹•çš„åŸå§‹Xåæ ‡  </span>
<span class="hljs-type">float</span> <span class="hljs-title function_">getRawY</span><span class="hljs-params">()</span>        <span class="hljs-comment">// ç›¸å¯¹äºå±å¹•çš„åŸå§‹Yåæ ‡</span>
</code></pre>
<p>åŒºåˆ«å¾ˆç®€å•ï¼ŒgetX()/getY()è¿”å›çš„æ˜¯ç›¸å¯¹äºå½“å‰Viewå·¦ä¸Šè§’çš„xå’Œyåæ ‡ï¼Œè€ŒgetRawX()/getRawY()è¿”å›çš„æ˜¯ç›¸å¯¹äºæ‰‹æœºå±å¹•å·¦ä¸Šè§’çš„xå’Œyåæ ‡ã€‚</p>
<h3 data-id="heading-6">1.2 ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™</h3>
<p>æ‰€è°“ç‚¹å‡»äº‹ä»¶çš„äº‹ä»¶åˆ†å‘ï¼Œå³ä½¿å°±æ˜¯å¯¹MotionEventäº‹ä»¶çš„åˆ†å‘è¿‡ç¨‹ï¼Œå³å½“ä¸€ä¸ªMotionEventäº§ç”Ÿäº†ä»¥åï¼Œç³»ç»Ÿéœ€è¦æŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’ç»™ä¸€ä¸ªå…·ä½“çš„Viewï¼Œè€Œè¿™ä¸ªä¼ é€’çš„è¿‡ç¨‹å°±æ˜¯åˆ†å‘è¿‡ç¨‹ã€‚äº‹ä»¶åˆ†å‘è¿‡ç¨‹ç”±ä»¥ä¸‹ä¸‰ä¸ªå¾ˆé‡è¦çš„æ–¹æ³•å®Œæˆï¼š</p>
<ul>
<li><code>public boolean dispatchTouchEvent(MotionEvent ev)</code>:<strong>ç”¨æ¥è¿›è¡Œäº‹ä»¶çš„åˆ†å‘</strong>ã€‚å¦‚æœäº‹ä»¶èƒ½å¤Ÿä¼ é€’ç»™å½“å‰Viewï¼Œé‚£ä¹ˆæ­¤æ–¹æ³•ä¸€å®šä¼šè¢«è°ƒç”¨ï¼Œè¿”å›ç»“æœå—å½“å‰Viewçš„onTouchEventå’Œä¸‹çº§Viewçš„dispatchTouchEventæ–¹æ³•çš„å½±å“ï¼Œè¡¨ç¤ºæ˜¯å¦æ¶ˆè€—å½“å‰äº‹ä»¶ã€‚</li>
<li><code>public boolean onInterceptTouchEvent(MotionEvent event)</code>:åœ¨dispatchTouchEventæ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼Œ<strong>ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ‹¦æˆªæŸä¸ªäº‹ä»¶</strong>ï¼Œå¦‚æœå½“å‰Viewæ‹¦æˆªäº†æŸä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆåœ¨åŒä¸€ä¸ªäº‹ä»¶åºåˆ—ä¸­ï¼Œæ­¤æ–¹æ³•ä¸ä¼šè¢«å†æ¬¡è°ƒç”¨ï¼Œè¿”å›ç»“æœè¡¨ç¤ºæ˜¯å¦æ‹¦æˆªå½“å‰äº‹ä»¶ã€‚</li>
<li><code>public boolean onTouchEventï¼ˆMotionEvent evï¼‰ </code>ï¼šåœ¨dispatchTouchEventæ–¹æ³•ä¸­è°ƒç”¨ï¼Œ<strong>ç”¨æ¥å¤„ç†ç‚¹å‡»äº‹ä»¶</strong>ï¼Œè¿”å›ç»“æœè¡¨ç¤ºæ˜¯å¦æ¶ˆè€—å½“å‰äº‹ä»¶ï¼Œå¦‚æœä¸æ¶ˆè€—ï¼Œåˆ™åœ¨åŒä¸€ä¸ªäº‹ä»¶åºåˆ—ä¸­ï¼Œå½“å‰Viewæ— æ³•å†æ¬¡æ¥æ”¶åˆ°äº‹ä»¶ã€‚</li>
</ul>
<h5 data-id="heading-7">Viewè¢«ç‚¹å‡»åäº‹ä»¶çš„ä¼ é€’è¿‡ç¨‹ï¼š</h5>
<p>Viewè¢«ç‚¹å‡»åä¼ é€’çš„é¡ºåºä¸º<code>Activity</code> -&gt; <code>Window</code> -&gt; <code>View</code>ï¼Œä¹Ÿå°±æ˜¯è¯´äº‹ä»¶å…ˆä¼ é€’ç»™Activityï¼Œç„¶åActivityå†ä¼ é€’ç»™Windowï¼Œç„¶åWindowå†ä¼ é€’ç»™é¡¶çº§Viewï¼ˆä¸€èˆ¬æ˜¯æ ¹ViewGroupï¼‰ï¼Œé¡¶çº§Viewæ¥æ”¶åˆ°äº‹ä»¶åå°±ä¼šæŒ‰äº‹ä»¶åˆ†å‘æœºåˆ¶å»åˆ†å‘äº‹ä»¶ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä¸€ä¸ªViewçš„onTouchEventæ–¹æ³•è¿”å›falseï¼Œé‚£ä¹ˆå®ƒçˆ¶å®¹å™¨çš„onTouchEventæ–¹æ³•å°†ä¼šè¢«è°ƒç”¨ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ä¸å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶å°†æœ€ç»ˆä¼ é€’ç»™Activityå¤„ç†ï¼Œå³Activityçš„onTouchEventæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d344f136cd4a998c93d95e7a75c144~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585387&amp;x-signature=wxzmwZxxlTBvhJLGEiKmTnwgl94%3D" alt="1.webp" loading="lazy"/></p>
<p>å½“Viewè¦å¤„ç†ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œå¦‚æœå®ƒè®¾ç½®çš„æœ‰<code>OnTouchListener</code> é‚£ä¹ˆè¿™æ—¶äº‹ä»¶å¦‚ä½•å¤„ç†è¿˜è¦çœ‹OnTouchListenerçš„onTouchæ–¹æ³•çš„è¿”å›å€¼ï¼š</p>
<ul>
<li>onTouchè¿”å›trueï¼šonTouchEventä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>onTouchè¿”å›falseï¼šå½“å‰Viewçš„onTouchEventæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´OnTouchListenerçš„ä¼˜å…ˆçº§è¦æ¯”onTouchEventé«˜ã€‚</p>
<h3 data-id="heading-8">1.3 äº‹ä»¶åˆ†å‘æœºåˆ¶ç»“è®º</h3>
<p>æœ¬èŠ‚ä»‹ç»Viewäº‹ä»¶åˆ†å‘æœºåˆ¶çš„ä¸»è¦è§„åˆ™ï¼ŒåŸºäºæºç åˆ†æå¾—å‡ºçš„ç»“è®ºï¼Œä¸»è¦æœ‰ï¼š</p>





















































<table><thead><tr><th>æ¡ç›®</th><th>ç»“è®º</th></tr></thead><tbody><tr><td>1</td><td>åŒä¸€ä¸ªäº‹ä»¶åºåˆ—æ˜¯æŒ‡ä»æ‰‹æŒ‡æ¥è§¦å±å¹•çš„é‚£ä¸€åˆ»èµ·ï¼Œåˆ°æ‰‹æŒ‡ç¦»å¼€å±å¹•çš„é‚£ä¸€åˆ»ç»“æŸï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶åºåˆ—ä»¥downäº‹ä»¶å¼€å§‹ï¼Œä¸­é—´å«æœ‰æ•°é‡ä¸å®šçš„moveäº‹ä»¶ï¼Œæœ€ç»ˆä»¥upäº‹ä»¶ç»“æŸã€‚</td></tr><tr><td>2</td><td>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½è¢«ä¸€ä¸ªViewæ‹¦æˆªå¹¶æ¶ˆè€—ã€‚å› ä¸ºä¸€æ—¦ä¸€ä¸ªå…ƒç´ æ‹¦æˆªäº†æŸæ¬¡äº‹ä»¶ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„æ‰€æœ‰äº‹ä»¶éƒ½ä¼šç›´æ¥äº¤ç»™å®ƒå¤„ç†ï¼Œå› æ­¤åŒä¸€ä¸ªäº‹ä»¶åºåˆ—ä¸­çš„äº‹ä»¶ä¸èƒ½åˆ†åˆ«ç”±ä¸¤ä¸ªViewåŒæ—¶å¤„ç†ï¼Œä½†æ˜¯é€šè¿‡ç‰¹æ®Šæ‰‹æ®µå¯ä»¥ä½œåˆ°ï¼Œæ¯”å¦‚ä¸€ä¸ªViewå°†æœ¬è¯¥è‡ªå·±å¤„ç†çš„äº‹ä»¶é€šè¿‡onTouchEventå¼ºè¡Œä¼ é€’ç»™å…¶ä»–Viewå¤„ç†ã€‚</td></tr><tr><td>3</td><td>æŸä¸ªViewä¸€æ—¦å†³å®šæ‹¦æˆªï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªäº‹ä»¶åºåˆ—éƒ½åªèƒ½ç”±å®ƒæ¥å¤„ç†ï¼ˆå¦‚æœäº‹ä»¶åºåˆ—èƒ½ä¼ é€’ç»™å®ƒçš„è¯ï¼‰ï¼Œå¹¶ä¸”å®ƒçš„onInterceptTouchEventä¸ä¼šå†è¢«è°ƒç”¨ã€‚</td></tr><tr><td>4</td><td>æŸä¸ªViewä¸€æ—¦å¼€å§‹å¤„ç†äº‹ä»¶ï¼Œå¦‚æœå®ƒä¸æ¶ˆè€—ACTION_DOWNäº‹ä»¶ï¼ˆonTouchEventè¿”å›äº†falseï¼‰ï¼Œé‚£ä¹ˆåŒä¸€äº‹ä»¶åºåˆ—çš„å…¶ä»–äº‹ä»¶éƒ½ä¸ä¼šå†äº¤ç»™å®ƒæ¥å¤„ç†ï¼Œå¹¶ä¸”äº‹ä»¶å°†é‡æ–°äº¤ç»™å®ƒçš„çˆ¶å…ƒç´ å»å¤„ç†ï¼Œå³çˆ¶å…ƒç´ çš„onTouchEventä¼šè¢«è°ƒç”¨ã€‚</td></tr><tr><td>5</td><td>å¦‚æœViewä¸æ¶ˆè€—é™¤ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å‡»äº‹ä»¶ä¼šæ¶ˆå¤±ï¼Œæ­¤æ—¶çˆ¶å…ƒç´ çš„onTouchEventå¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å½“å‰Viewå¯ä»¥æŒç»­æ”¶åˆ°åç»­çš„äº‹ä»¶ï¼Œæœ€ç»ˆè¿™äº›æ¶ˆå¤±çš„ç‚¹å‡»äº‹ä»¶ä¼šä¼ é€’ç»™Activityå¤„ç†ã€‚</td></tr><tr><td>6</td><td>ViewGroupé»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ã€‚æºç ä¸­ViewGroupçš„onInterceptTouchEventé»˜è®¤è¿”å›falseã€‚</td></tr><tr><td>7</td><td>Viewæ²¡æœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸€æ—¦æœ‰ç‚¹å‡»äº‹ä»¶ä¼ é€’ç»™å®ƒï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚</td></tr><tr><td>8</td><td>Viewçš„onTouchEventé»˜è®¤éƒ½ä¼šæ¶ˆè€—äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œé™¤éå®ƒæ˜¯ä¸å¯ç‚¹å‡»çš„ï¼ˆclickableå’ŒlongClickableåŒæ—¶ä¸ºfalseï¼‰ã€‚Viewçš„longClickableå±æ€§é»˜è®¤éƒ½ä¸ºfalseï¼Œclickableå±æ€§è¦åˆ†æƒ…å†µï¼Œæ¯”å¦‚Buttonçš„clickableå±æ€§é»˜è®¤ä¸ºtrueï¼Œè€ŒTextViewçš„clickableå±æ€§é»˜è®¤ä¸ºfalseã€‚</td></tr><tr><td>9</td><td>Viewçš„enableå±æ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚å“ªæ€•ä¸€ä¸ªViewæ˜¯disableçŠ¶æ€çš„ï¼Œåªè¦å®ƒçš„clickableæˆ–è€…longClickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventå°±è¿”å›true</td></tr><tr><td>10</td><td>onClickä¼šå‘ç”Ÿçš„å‰ææ˜¯å½“å‰Viewæ˜¯å¯ç‚¹å‡»çš„ï¼Œå¹¶ä¸”å®ƒæ”¶åˆ°äº†downå’Œupäº‹ä»¶ã€‚</td></tr><tr><td>11</td><td>äº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯ç”±å¤–å‘å†…çš„ï¼Œå³äº‹ä»¶æ€»æ˜¯å…ˆä¼ é€’ç»™çˆ¶å…ƒç´ ï¼Œç„¶åå†ç”±çˆ¶å…ƒç´ åˆ†å‘ç»™å­Viewï¼Œé€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„äº‹ä»¶åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚</td></tr></tbody></table>
<h3 data-id="heading-9">2. ViewGroupäº‹ä»¶åˆ†å‘è¿‡ç¨‹çš„æºç åˆ†æ</h3>
<p>åœ¨ä¸Šä¸€èŠ‚å·²ç»è¯´è¿‡ï¼Œäº‹ä»¶ä¼ é€’çš„é¡ºåºæ˜¯<code>Activity</code> -&gt; <code>Window</code> -&gt; <code>View</code>ï¼ŒWindowç±»å°†ç‚¹å‡»äº‹ä»¶ç»è¿‡ä¸€ç³»åˆ—æ–¹æ³•ä¼ é€’ç»™DecorViewï¼Œç”±äºDecorViewç»§æ‰¿è‡ªFrameLayoutï¼Œæ‰€ä»¥äº‹ä»¶æœ€ç»ˆä¼šä¼ é€’ç»™Viewã€‚è¿™ä¸ªViewä¹Ÿå°±æ˜¯é¡¶çº§Viewï¼Œä¹Ÿå«æ ¹Viewï¼Œä¸€èˆ¬æ˜¯ViewGroupã€‚</p>
<p>ç„¶åäº‹ä»¶ä¼šä»é¡¶å±‚çš„ViewGroupçš„dispatchTouchEvent()æ–¹æ³•åˆ†å‘ä¸‹å»ï¼Œè¿™ä¸ªæ–¹æ³•å¾ˆé•¿ï¼Œæ¥ä¸‹æ¥ä¼šåˆ†æ®µè¯´æ˜ï¼Œå…ˆçœ‹çœ‹dispatchTouchEventå¯¹äºdownäº‹ä»¶åˆ†å‘çš„å¤„ç†ã€‚</p>
<p>downäº‹ä»¶ä½œä¸ºä¸€ä¸ªèµ·å§‹äº‹ä»¶ï¼ŒdispatchTouchEvent()æ–¹æ³•ä¼šå…ˆé‡ç½®ä¸€äº›å¿…è¦çš„çŠ¶æ€å’Œå˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> ev.getAction();
<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> action &amp; MotionEvent.ACTION_MASK;

<span class="hljs-comment">// Handle an initial down.</span>
<span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
    cancelAndClearTouchTargets(ev); <span class="hljs-comment">// å–æ¶ˆä¹‹å‰çš„è§¦æ‘¸ç›®æ ‡</span>
    resetTouchState(); <span class="hljs-comment">// é‡ç½®è§¦æ‘¸çŠ¶æ€</span>
}
</code></pre>
<p>ViewGroupä¼šåœ¨resetTouchState()æ–¹æ³•ä¸­é‡ç½®FLAG_DISALLOW_INTERCEPTè¿™ä¸ªæ ‡å¿—ä½ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®©ViewGroupä¸å†æ‹¦æˆªäº‹ä»¶ï¼ˆå‰ææ˜¯ViewGroupä¸æ‹¦æˆªACTION_DOWNäº‹ä»¶ï¼‰ï¼Œé€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•æ¥è®¾ç½®ï¼Œä¸€èˆ¬ç”¨äºå­Viewä¸­ã€‚ä¸€æ—¦è®¾ç½®è¯¥æ ‡è®°ä½ï¼ŒViewGroupå°†æ— æ³•æ‹¦æˆªé™¤äº†ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ã€‚å› ä¸ºå¦‚æœæ˜¯ACRTION_DOWNäº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šé‡ç½®è¯¥æ ‡è®°ä½ï¼Œå¯¼è‡´å­Viewä¸­è®¾ç½®çš„è¿™ä¸ªæ ‡è®°ä½æ— æ•ˆï¼Œæ‰€ä»¥åœ¨é¢å¯¹ACTION_DOWNäº‹ä»¶æ—¶ï¼ŒViewGroupæ€»æ˜¯ä¼šè°ƒç”¨è‡ªå·±çš„onInterceptTouchEventæ–¹æ³•æ¥è¯¢é—®è‡ªå·±æ˜¯å¦è¦æ‹¦æˆªäº‹ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œ<strong>å­Viewæ— æ³•é€šè¿‡FLAG_DISALLOW_INTERCEPTæ ‡å¿—ä½ç¦æ­¢ViewGroupæ‹¦æˆªdownäº‹ä»¶</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹å½“å‰Viewæ˜¯å¦è¦æ‹¦æˆªç‚¹å‡»äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Check for interception.</span>
<span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> intercepted;
<span class="hljs-type">ViewRootImpl</span> <span class="hljs-variable">viewRootImpl</span> <span class="hljs-operator">=</span> getViewRootImpl();
<span class="hljs-comment">// åˆ¤æ–­ä»€ä¹ˆæ—¶å€™éœ€è¦è¯¢é—®æ‹¦æˆª</span>
<span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN || mFirstTouchTarget != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// åˆ¤æ–­å­Viewæ˜¯å¦è¦æ±‚ä¸æ‹¦æˆª</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">disallowIntercept</span> <span class="hljs-operator">=</span> (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span>;
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isBackGestureInProgress</span> <span class="hljs-operator">=</span> (viewRootImpl != <span class="hljs-literal">null</span>
                                             &amp;&amp; viewRootImpl.getOnBackInvokedDispatcher().isBackGestureInProgress());
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å…è®¸è¿›è¡Œæ‹¦æˆªåˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> (!disallowIntercept || isBackGestureInProgress) { 
        intercepted = onInterceptTouchEvent(ev); <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªæ–¹æ³•</span>
        ev.setAction(action); 
    } <span class="hljs-keyword">else</span> {
        intercepted = <span class="hljs-literal">false</span>; <span class="hljs-comment">// å­Viewè¦æ±‚ä¸æ‹¦æˆª</span>
    }
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ²¡æœ‰è§¦æ‘¸ç›®æ ‡ä¸”ä¸æ˜¯downäº‹ä»¶ï¼Œç›´æ¥æ‹¦æˆª</span>
    intercepted = <span class="hljs-literal">true</span>;
}
</code></pre>
<p>ç”±æºç å¯çŸ¥ï¼Œä¸¤ç§æƒ…å†µä¸‹ä¼šè¿›å…¥æ‹¦æˆªåˆ¤æ–­ï¼š</p>
<ul>
<li><code>actionMasked == MotionEvent.ACTION_DOWN</code>ï¼šè¯´æ˜æ–°åºåˆ—å¼€å§‹ï¼Œè¿™æ—¶å¿…é¡»è¿›è¡Œæ‹¦æˆªåˆ¤æ–­ï¼Œå†³å®šç”±è°å¤„ç†æ•´ä¸ªåºåˆ—ã€‚</li>
<li><code>mFirstTouchTarget != null</code>ï¼šæœ‰å­Viewåœ¨å¤„ç†åºåˆ—æ—¶ï¼Œå› ä¸ºå¯èƒ½ä¼šä¸­é€”æ‹¦æˆªï¼Œä»å­Viewä¸­æŠ¢èµ°äº‹ä»¶ã€‚</li>
</ul>
<p>å…³äº<code>mFirstTouchTarget </code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®°å½•å½“å‰æ­£åœ¨å¤„ç†è§¦æ‘¸äº‹ä»¶çš„å­Viewï¼Œæ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ç»“æ„ï¼Œæ”¯æŒå¤šç‚¹è§¦æ§ï¼ˆæ¯ä¸ªæ‰‹æŒ‡å¯¹åº”ä¸åŒçš„å­Viewï¼‰ï¼ŒmFirstTouchTarget ä¸ºnulæ—¶è¡¨ç¤ºæ²¡æœ‰å­Viewåœ¨å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>åä¹‹ï¼Œå¦‚æœä¸æ˜¯downäº‹ä»¶å¹¶ä¸”mFirstTouchTarget  == nullï¼Œä¸è¿›å…¥æ‹¦æˆªåˆ¤æ–­ï¼Œç›´æ¥æ‹¦æˆªå½“å‰äº‹ä»¶ã€‚æ¯”å¦‚å½“downäº‹ä»¶çˆ¶å®¹å™¨è‡ªå·±æ¶ˆè´¹äº†ï¼ˆä¹Ÿå°±æ˜¯mFirstTouchTarget  == nullï¼‰ï¼Œé‚£ä¹ˆåç»­çš„moveäº‹ä»¶å°±æ²¡æœ‰å­Viewéœ€è¦äº†ï¼Œç›´æ¥æ‹¦æˆªã€‚</p>
<p>ä»ä»¥ä¸Šçš„æºç åˆ†æä¸­ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼š</p>
<ol>
<li>
<p>å½“ViewGroupå†³å®šæ‹¦æˆªäº‹ä»¶åï¼Œé‚£ä¹ˆåç»­çš„ç‚¹å‡»äº‹ä»¶å°†ä¼šé»˜è®¤äº¤ç»™å®ƒå¹¶ä¸”ä¸å†è°ƒç”¨å®ƒçš„onInterceptTouchEventæ–¹æ³•ï¼Œä¹Ÿå°±è¯å®äº†3ç»“è®ºï¼š</p>
<blockquote>
<p>æŸä¸ªViewä¸€æ—¦å†³å®šæ‹¦æˆªï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªäº‹ä»¶åºåˆ—éƒ½åªèƒ½ç”±å®ƒæ¥å¤„ç†ï¼ˆå¦‚æœäº‹ä»¶åºåˆ—èƒ½ä¼ é€’ç»™å®ƒçš„è¯ï¼‰ï¼Œå¹¶ä¸”å®ƒçš„onInterceptTouchEventä¸ä¼šå†è¢«è°ƒç”¨ã€‚</p>
</blockquote>
</li>
<li>
<p>FLAG_DISALLOW_INTERCEPTçš„ä½œç”¨æ˜¯è®©ViewGroupä¸å†æ‹¦æˆªäº‹ä»¶ï¼Œå‰ææ˜¯ViewGroupä¸æ‹¦æˆªACTION_DOWNäº‹ä»¶ï¼Œè¯å®äº†11ç»“è®º:</p>
<blockquote>
<p>äº‹ä»¶ä¼ é€’è¿‡ç¨‹æ˜¯ç”±å¤–å‘å†…çš„ï¼Œå³äº‹ä»¶æ€»æ˜¯å…ˆä¼ é€’ç»™çˆ¶å…ƒç´ ï¼Œç„¶åå†ç”±çˆ¶å…ƒç´ åˆ†å‘ç»™å­Viewï¼Œé€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„äº‹ä»¶åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚</p>
</blockquote>
</li>
</ol>
<p>æ¥ç€å½“ViewGroupä¸æ‹¦æˆªäº‹ä»¶çš„æ—¶å€™ï¼Œäº‹ä»¶ä¼šå‘ä¸‹åˆ†å‘äº¤ç”±å®ƒçš„å­Viewè¿›è¡Œå¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">final</span> View[] children = mChildren;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> childrenCount - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) { <span class="hljs-comment">// ä»åå…ˆå‰éå†ï¼Œåæ·»åŠ çš„Viewæ˜¾ç¤ºåœ¨ä¸Šé¢ï¼Œä¼˜å…ˆæ¥æ”¶äº‹ä»¶</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childIndex</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedIndex(childrenCount, i, customOrder);
    <span class="hljs-comment">// è·å–å­Viewå®ä¾‹</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedView(preorderedList, children, childIndex);

    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// æ£€æŸ¥å­Viewæ˜¯å¦èƒ½å¤Ÿæ¥æ”¶ç‚¹å‡»äº‹ä»¶ï¼š</span>
    <span class="hljs-comment">// æ»¡è¶³å¯è§æ€§ã€å¯ç‚¹å‡»æ€§ç­‰åŸºæœ¬æ¡ä»¶</span>
    <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶çš„åæ ‡æ˜¯å¦è½åœ¨å­å…ƒç´ çš„åŒºåŸŸå†…</span>
    <span class="hljs-keyword">if</span> (!child.canReceivePointerEvents()
        || !isTransformedTouchPointInView(x, y, child, <span class="hljs-literal">null</span>)) {
        ev.setTargetAccessibilityFocus(<span class="hljs-literal">false</span>);
        <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-comment">// æ£€æŸ¥è¯¥å­Viewæ˜¯å¦å·²ç»æ˜¯å½“å‰çš„è§¦æ‘¸ç›®æ ‡</span>
    newTouchTarget = getTouchTarget(child);
    <span class="hljs-keyword">if</span> (newTouchTarget != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// Child is already receiving touch within its bounds.</span>
        <span class="hljs-comment">// Give it the new pointer in addition to the ones it is handling.</span>
        newTouchTarget.pointerIdBits |= idBitsToAssign;
        <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-comment">// é‡ç½®å­Viewçš„å–æ¶ˆæ ‡å¿—ï¼Œå‡†å¤‡è¿›è¡Œäº‹ä»¶åˆ†å‘</span>
    resetCancelNextUpFlag(child);
    <span class="hljs-comment">// å°è¯•å°†è§¦æ‘¸äº‹ä»¶åˆ†å‘ç»™å­View</span>
    <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="hljs-literal">false</span>, child, idBitsToAssign)) {
        <span class="hljs-comment">// è¿›å…¥è¿™é‡Œè¡¨ç¤ºå­Viewæ¶ˆè´¹äº†äº‹ä»¶</span>
        mLastTouchDownTime = ev.getDownTime();
        <span class="hljs-keyword">if</span> (preorderedList != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è®¡ç®—å¹¶è®°å½•å­Viewåœ¨åŸå§‹æ•°ç»„ä¸­çš„ç´¢å¼•</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; childrenCount; j++) {
                <span class="hljs-keyword">if</span> (children[childIndex] == mChildren[j]) {
                    mLastTouchDownIndex = j;
                    <span class="hljs-keyword">break</span>;
                }
            }
        } <span class="hljs-keyword">else</span> {
            mLastTouchDownIndex = childIndex;
        }
        <span class="hljs-comment">// è®°å½•æŒ‰ä¸‹åæ ‡</span>
        mLastTouchDownX = x;
        mLastTouchDownY = y;
        <span class="hljs-comment">// åˆ›å»ºæ–°çš„è§¦æ‘¸ç›®æ ‡å¹¶æ·»åŠ åˆ°è§¦æ‘¸ç›®æ ‡é“¾è¡¨</span>
        newTouchTarget = addTouchTarget(child, idBitsToAssign);
        <span class="hljs-comment">// æ ‡è®°è¯¥äº‹ä»¶å·²ç»åˆ†å‘è¿‡ï¼Œé¿å…é‡å¤å¤„ç†</span>
        alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-comment">// The accessibility focus didn't handle the event, so clear</span>
    <span class="hljs-comment">// the flag and do a normal dispatch to all children.</span>
    ev.setTargetAccessibilityFocus(<span class="hljs-literal">false</span>);
}
</code></pre>
<p>åœ¨forå¾ªç¯ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€äº›åˆ¤æ–­ï¼Œå¤§æ¦‚é€»è¾‘æ˜¯å¦‚æœäº‹ä»¶æ²¡æœ‰è¢«ViewGroupæ‹¦æˆªï¼Œä¹Ÿæ²¡æœ‰å–æ¶ˆï¼Œå¦‚æœè¯¥äº‹ä»¶æ˜¯downäº‹ä»¶ï¼Œé‚£ä¹ˆä»£ç å°±ä¼šèµ°è¿›forå¾ªç¯ä¸­éå†å­Viewåˆ¤æ–­å…¶æ˜¯å¦èƒ½å¤Ÿæ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯<code>if (!child.canReceivePointerEvents() || !isTransformedTouchPointInView(x, y, child, null))</code>ï¼š</p>
<ul>
<li><code>!child.canReceivePointerEvents()</code>ï¼šæ£€æŸ¥å­è§†å›¾æ˜¯å¦èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œå¦‚æœè¿”å›falseï¼ˆå³è§†å›¾ä¸èƒ½æ¥æ”¶äº‹ä»¶ï¼‰ï¼Œå¯èƒ½çš„æƒ…å†µæœ‰è§†å›¾ä¸å¯è§ï¼Œè§†å›¾è¢«ç¦ç”¨ï¼ˆenabl == falseï¼‰ã€‚</li>
<li><code>!isTransformedTouchPointInView(x, y, child, null)</code>ï¼šæ£€æŸ¥è§¦æ‘¸ç‚¹åæ ‡ï¼ˆxï¼Œyï¼‰æ˜¯å¦åœ¨å­è§†å›¾çš„åŒºåŸŸå†…ã€‚</li>
</ul>
<p>å¦‚æœå­å…ƒç´ æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶å°±ä¼šä¼ é€’ç»™å®ƒæ¥å¤„ç†ã€‚</p>
<p>è€ŒViewGroupçš„å°è¯•åˆ†å‘äº‹ä»¶æ˜¯é€šè¿‡dispatchTransformedTouchEventæ–¹æ³•å®Œæˆçš„ï¼Œçœ‹çœ‹å®ƒçš„æ ¸å¿ƒå®ç°éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTransformedTouchEvent</span><span class="hljs-params">(MotionEvent event, <span class="hljs-type">boolean</span> cancel,
            View child, <span class="hljs-type">int</span> desiredPointerIdBits)</span> {
        <span class="hljs-comment">// ...</span>
            
        <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å…¶å®æ˜¯è°ƒç”¨å­å…ƒç´ çš„dispatchTouchEventæ–¹æ³•å®Œæˆäº‹ä»¶çš„åˆ†å‘</span>
            handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(event);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetX</span> <span class="hljs-operator">=</span> mScrollX - child.mLeft;
            <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetY</span> <span class="hljs-operator">=</span> mScrollY - child.mTop;
            event.offsetLocation(offsetX, offsetY);
 			
            <span class="hljs-comment">// åŒä¸Š</span>
            handled = child.dispatchTouchEvent(event);

            event.offsetLocation(-offsetX, -offsetY);
        }
                    
        <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­childä¼ é€’çš„å€¼ä¸ºnullï¼Œæ‰€ä»¥ä¼šç›´æ¥è°ƒç”¨å­Viewçš„dispatchTouchEventæ–¹æ³•æ¥å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·äº‹ä»¶å°±äº¤ç”±å­Viewå¤„ç†äº†ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡äº‹ä»¶åˆ†å‘ã€‚</p>
<p>æ¥ç€å¾€ä¸‹çœ‹ï¼Œåœ¨addTouchTargetæ–¹æ³•å†…éƒ¨å®Œæˆå¯¹<code>mFirstTouchTarget</code>çš„èµ‹å€¼ï¼Œéšåç»ˆæ­¢å¯¹å­å…ƒç´ çš„éå†ã€‚å¦‚æœå­å…ƒç´ çš„dispatchTouchEventè¿”å›falseï¼ŒViewGroupå°±ä¼šæŠŠäº‹ä»¶åˆ†å‘ç»™ä¸‹ä¸€ä¸ªå­å…ƒç´ ï¼ˆå¦‚æœè¿˜æœ‰ä¸‹ä¸€ä¸ªå­å…ƒç´ çš„è¯ï¼‰ã€‚mFirstTouchTargetçš„èµ‹å€¼ï¼Œå°†ç›´æ¥å½±å“åˆ°ViewGroupå¯¹äº‹ä»¶çš„æ‹¦æˆªç­–ç•¥ï¼Œå¦‚æœmFirstTouchTargetä¸ºnullï¼Œé‚£ä¹ˆViewGroupå°±é»˜è®¤æ‹¦æˆªæ¥ä¸‹æ¥åŒä¸€åºåˆ—ä¸­æ‰€æœ‰çš„ç‚¹å‡»äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºæ–°çš„è§¦æ‘¸ç›®æ ‡å¹¶æ·»åŠ åˆ°è§¦æ‘¸ç›®æ ‡é“¾è¡¨</span>
newTouchTarget = addTouchTarget(child, idBitsToAssign);
<span class="hljs-comment">// æ ‡è®°è¯¥äº‹ä»¶å·²ç»åˆ†å‘è¿‡ï¼Œé¿å…é‡å¤å¤„ç†</span>
alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">break</span>;
</code></pre>
<p>å¦‚æœéå†æ‰€æœ‰çš„å­å…ƒç´ åäº‹ä»¶éƒ½æ²¡æœ‰è¢«åˆé€‚åœ°å¤„ç†ï¼Œè¿™åŒ…å«ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>ViewGroupæ²¡æœ‰å­å…ƒç´ </li>
<li>å­å…ƒç´ å¤„ç†äº†ç‚¹å‡»äº‹ä»¶ï¼Œä½†æ˜¯dispatchTouchEventæ–¹æ³•è¿”å›äº†falseï¼Œè¿™ä¸€èˆ¬æ˜¯å› ä¸ºå­å…ƒç´ åœ¨onTouchEventä¸­è¿”å›äº†falseã€‚</li>
</ul>
<p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒViewGroupä¼šè‡ªå·±å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œè¿™å°±è¯å®äº†4ç»“è®ºï¼š</p>
<blockquote>
<p>æŸä¸ªViewä¸€æ—¦å¼€å§‹å¤„ç†äº‹ä»¶ï¼Œå¦‚æœå®ƒä¸æ¶ˆè€—ACTION_DOWNäº‹ä»¶ï¼ˆonTouchEventè¿”å›äº†falseï¼‰ï¼Œé‚£ä¹ˆåŒä¸€äº‹ä»¶åºåˆ—çš„å…¶ä»–äº‹ä»¶éƒ½ä¸ä¼šå†äº¤ç»™å®ƒæ¥å¤„ç†ï¼Œå¹¶ä¸”äº‹ä»¶å°†é‡æ–°äº¤ç»™å®ƒçš„çˆ¶å…ƒç´ å»å¤„ç†ï¼Œå³çˆ¶å…ƒç´ çš„onTouchEventä¼šè¢«è°ƒç”¨ã€‚</p>
</blockquote>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Dispatch to touch targets.</span>
<span class="hljs-keyword">if</span> (mFirstTouchTarget == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æƒ…å†µ1:æ²¡æœ‰æ‰¾åˆ°ä»»ä½•è§¦æ‘¸ç›®æ ‡ï¼ˆæ²¡æœ‰å­Viewæ¶ˆè´¹downäº‹ä»¶ï¼‰</span>
    <span class="hljs-comment">// å°†å½“å‰ViewGroupå½“ä½œæ™®é€šViewå¤„ç†ï¼Œè‡ªå·±æ¶ˆè´¹äº‹ä»¶</span>
    handled = dispatchTransformedTouchEvent(ev, canceled, <span class="hljs-literal">null</span>,
                                            TouchTarget.ALL_POINTER_IDS);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// éå†è§¦æ‘¸ç›®æ ‡é“¾è¡¨ï¼Œåˆ†å‘ç»™æ‰€æœ‰éœ€è¦å¤„ç†äº‹ä»¶çš„å­View</span>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// å°†äº‹ä»¶åˆ†å‘ç»™å­View</span>
    <span class="hljs-keyword">if</span> (target.child != <span class="hljs-literal">null</span> &amp;&amp; dispatchTransformedTouchEvent(ev, cancelChild,
                                                              target.child, target.pointerIdBits)) {
        handled = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-comment">// ... </span>
}
</code></pre>
<p>ä»å‰é¢çš„åˆ†æå¯çŸ¥ï¼ŒdispatchTransformedTouchEventå†…éƒ¨ä¼šè°ƒç”¨childçš„dispatchTouchEventï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™å°±è½¬åˆ°äº†Viewçš„dispatchTouchEventæ–¹æ³•ï¼Œå³ç‚¹å‡»äº‹ä»¶å¼€å§‹äº¤ç”±Viewæ¥å¤„ç†ã€‚åˆ°æ­¤ï¼ŒViewGroupå¤„ç†downäº‹ä»¶å°±åˆ†æå®Œæ¯•ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¥è¡¨ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75d9c308f3f64c808eabff99ee5e4e97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585387&amp;x-signature=WVwYeF8Ak7ylFyZzyjQ8lNs4kXU%3D" alt="å±å¹•æˆªå›¾ 2025-11-24 172200.png" loading="lazy"/></p>
<h3 data-id="heading-10">3. Viewäº‹ä»¶åˆ†å‘è¿‡ç¨‹çš„æºç åˆ†æ</h3>
<p>View.dispatchTouchEvent()æ–¹æ³•ç›¸æ¯”äºViewGroupå°±å¾ˆç®€å•äº†ï¼Œå› ä¸ºViewä¸åƒViewGroupéœ€è¦å¤„ç†äº‹ä»¶çš„åˆ†å‘ï¼Œè€Œä¸”Viewä¹Ÿæ²¡æœ‰onInterceptTouchEvent()æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
		
    	<span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> event.getActionMasked();
    	<span class="hljs-comment">// è·å–åŠ¨ä½œç±»å‹å¹¶å¤„ç†downäº‹ä»¶ </span>
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
            <span class="hljs-comment">// è¡¨ç¤ºæ–°çš„äº‹ä»¶åºåˆ—å¼€å§‹ï¼Œåœæ­¢åµŒå¥—æ»šåŠ¨</span>
            stopNestedScroll();
        }

        <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(event)) {
            <span class="hljs-comment">// æ‰§è¡Œè§¦æ‘¸å›è°ƒå¤„ç†</span>
            result = performOnTouchCallback(event);
        }

        <span class="hljs-comment">// ... </span>

        <span class="hljs-comment">// Clean up after nested scrolls if this is the end of a gesture;</span>
        <span class="hljs-comment">// also cancel it if we tried an ACTION_DOWN but we didn't want the rest</span>
        <span class="hljs-comment">// of the gesture.</span>
    	<span class="hljs-comment">// æ‰‹åŠ¿ç»“æŸçš„æ¸…ç†å·¥ä½œ </span>
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_UP || <span class="hljs-comment">// æ­£å¸¸ç»“æŸ</span>
                actionMasked == MotionEvent.ACTION_CANCEL || <span class="hljs-comment">// è¢«å–æ¶ˆ</span>
                (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) { <span class="hljs-comment">// DOWNæœªè¢«æ¶ˆè´¹</span>
            stopNestedScroll(); <span class="hljs-comment">// åœæ­¢åµŒå¥—æ»šåŠ¨ </span>
        }

        <span class="hljs-keyword">return</span> result;
    }
</code></pre>
<p>å¾ˆç®€å•ï¼Œæ ¸å¿ƒå°±åœ¨äº<code>performOnTouchCallback</code>æ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§¦æ‘¸äº‹ä»¶å¤„ç†ä¼˜å…ˆçº§ï¼š</span>
<span class="hljs-comment">// 1. OnTouchListenerï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
<span class="hljs-comment">// 2. onTouchEventï¼ˆé»˜è®¤å¤„ç†ï¼‰</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">performOnTouchCallback</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// ä¼˜å…ˆè°ƒç”¨è®¾ç½®çš„OnTouchListener</span>
    <span class="hljs-keyword">if</span> (mOnTouchListener != <span class="hljs-literal">null</span> &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED
            &amp;&amp; mOnTouchListener.onTouch(<span class="hljs-built_in">this</span>, event)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ç›‘å¬å™¨æ¶ˆè´¹äº†äº‹ä»¶</span>
    }
    
    <span class="hljs-comment">// ç›‘å¬å™¨æœªæ¶ˆè´¹ï¼Œè°ƒç”¨é»˜è®¤çš„onTouchEvent</span>
    <span class="hljs-keyword">return</span> onTouchEvent(event);
}
</code></pre>
<p>é¦–å…ˆä¼šåˆ¤æ–­æœ‰æ²¡æœ‰è®¾ç½®OnTouchListenerï¼Œå¦‚æœOnTouchListenerä¸­çš„onTouchæ–¹æ³•è¿”å›trueï¼Œé‚£ä¹ˆonTouchEventå°±ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¯è§OnTouchListenerçš„ä¼˜å…ˆçº§é«˜äºonTouchEventï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯æ–¹ä¾¿åœ¨å¤–ç•Œå¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>æ¥ç€æ¥çœ‹çœ‹onTouchEventçš„å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ¤æ–­Viewæ˜¯å¦å¯ç‚¹å‡»</span>
<span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">clickable</span> <span class="hljs-operator">=</span> ((viewFlags &amp; CLICKABLE) == CLICKABLE <span class="hljs-comment">// å¯ç‚¹å‡»</span>
                || (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE) <span class="hljs-comment">// å¯é•¿æŒ‰</span>
                || (viewFlags &amp; CONTEXT_CLICKABLE) == CONTEXT_CLICKABLE; <span class="hljs-comment">// å¯ä¸Šä¸‹æ–‡ç‚¹å‡»</span>
		
		<span class="hljs-comment">// å¤„ç†ç¦ç”¨çŠ¶æ€Viewçš„è§¦æ‘¸äº‹ä»¶ </span>
        <span class="hljs-keyword">if</span> ((viewFlags &amp; ENABLED_MASK) == DISABLED
                &amp;&amp; (mPrivateFlags4 &amp; PFLAG4_ALLOW_CLICK_WHEN_DISABLED) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (action == MotionEvent.ACTION_UP &amp;&amp; (mPrivateFlags &amp; PFLAG_PRESSED) != <span class="hljs-number">0</span>) {
                setPressed(<span class="hljs-literal">false</span>);
            }
            mPrivateFlags3 &amp;= ~PFLAG3_FINGER_DOWN;
            <span class="hljs-comment">// A disabled view that is clickable still consumes the touch</span>
            <span class="hljs-comment">// events, it just doesn't respond to them.</span>
            <span class="hljs-keyword">return</span> clickable;
        }
</code></pre>
<p>äº‹ä»¶è¿›å…¥onTouchEventæ—¶ä¼šå»åˆ¤æ–­Viewçš„clickableçŠ¶æ€ï¼Œå¦‚æœæ»¡è¶³ <code>CLICKABLE == true || LONG_CLICKABLE == true || CONTEXT_CLICKABLE == true </code> ï¼Œclickable å°±ä¼šä¸º trueã€‚å…¶ä¸­ clickable å’Œ longClickableæ¯”è¾ƒå¸¸è§ï¼ŒcontextClickable ç”¨çš„å¾ˆå°‘ï¼Œåœ¨è§¦æ‘¸äº‹ä»¶ä¸­ä¸ä¼šç”¨åˆ°å®ƒï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥æ‰ã€‚</p>
<p>åˆ¤æ–­å®ŒViewçš„clickçŠ¶æ€åï¼Œæ¥ç€ä¼šåˆ¤æ–­ View çš„ enable çŠ¶æ€ã€‚å¦‚æœ View æ˜¯ disable ä¸” å®ƒçš„ <code>PFLAG4_ALLOW_CLICK_WHEN_DISABLED</code> æ ‡å¿—ä½è¢«è®¾ç½®ä¸º 0ï¼Œå³ä¸å…è®¸ View åœ¨ disable çŠ¶æ€ä¸‹è¢«ç‚¹å‡»ï¼Œé‚£ä¹ˆ disable çŠ¶æ€ä¸‹çš„ View ä¸ä¼šæ¶ˆè€—äº‹ä»¶ã€‚PFLAG4_ALLOW_CLICK_WHEN_DISABLED æ ‡å¿—ä½é»˜è®¤å€¼ä¸º trueã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ View æ˜¯ disable çš„ï¼Œåªè¦å®ƒçš„ clickable å’Œ longClickable ä¸º trueï¼Œé‚£ä¹ˆå…¶ onTouchEvent() æ–¹æ³•å°±ä¼šè¿”å› trueï¼Œå³å³ä½¿ View æ˜¯ä¸å¯ç”¨çš„ï¼Œå®ƒåªè¦å¯ä»¥è¢«ç‚¹å‡»ï¼Œä¹Ÿä¼šæ¶ˆè€—äº‹ä»¶ã€‚</p>
<p>è¿™å°±è¯å®äº†9ç»“è®ºï¼š</p>
<blockquote>
<p>Viewçš„enableå±æ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚å“ªæ€•ä¸€ä¸ªViewæ˜¯disableçŠ¶æ€çš„ï¼Œåªè¦å®ƒçš„clickableæˆ–è€…longClickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventå°±è¿”å›true</p>
</blockquote>
<p>æ¥ç€ï¼Œå¦‚æœViewè®¾ç½®æœ‰ä»£ç†ï¼Œé‚£ä¹ˆè¿˜ä¼šæ‰§è¡ŒTouchDelegateçš„onTouchEventæ–¹æ³•ï¼Œå°†å‰©ä¸‹çš„é€»è¾‘äº¤ç»™touchDelegateï¼Œè°ƒç”¨<code>mTouchDelegate.onTouchEvent(event)</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (mTouchDelegate != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (mTouchDelegate.onTouchEvent(event)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>ä¸‹é¢çœ‹ä¸‹onTouchEventå¯¹ç‚¹å‡»äº‹ä»¶çš„å…·ä½“çš„å¤„ç†è¿‡ç¨‹ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (clickable || (viewFlags &amp; TOOLTIP) == TOOLTIP) {
    <span class="hljs-keyword">switch</span> (action) {
        <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
            <span class="hljs-comment">// ... </span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">prepressed</span> <span class="hljs-operator">=</span> (mPrivateFlags &amp; PFLAG_PREPRESSED) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> ((mPrivateFlags &amp; PFLAG_PRESSED) != <span class="hljs-number">0</span> || prepressed) {
                <span class="hljs-comment">// take focus if we don't have it already and we should in</span>
                <span class="hljs-comment">// touch mode.</span>
                <span class="hljs-type">boolean</span> <span class="hljs-variable">focusTaken</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

                <span class="hljs-comment">// ...</span>
                <span class="hljs-comment">// å¤„ç†ç‚¹å‡»æ“ä½œ(éé•¿æŒ‰ä¸”ä¸å¿½ç•¥upäº‹ä»¶)</span>
                <span class="hljs-keyword">if</span> (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) {
                    <span class="hljs-comment">// ç§»é™¤é•¿æŒ‰æ£€æŸ¥ï¼ˆå› ä¸ºè¿™æ˜¯ç‚¹å‡»ï¼Œä¸æ˜¯é•¿æŒ‰ï¼‰</span>
                    removeLongPressCallback();

                    <span class="hljs-comment">// // å¦‚æœæ²¡æœ‰è·å–ç„¦ç‚¹ï¼Œæ‰§è¡Œç‚¹å‡»æ“ä½œ</span>
                    <span class="hljs-keyword">if</span> (!focusTaken) {
                        <span class="hljs-comment">// ä½¿ç”¨Runnableå»¶è¿Ÿæ‰§è¡Œç‚¹å‡»ï¼Œè®©è§†è§‰çŠ¶æ€å…ˆæ›´æ–°</span>
                        <span class="hljs-keyword">if</span> (mPerformClick == <span class="hljs-literal">null</span>) {
                            mPerformClick = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformClick</span>(); <span class="hljs-comment">// åˆ›å»ºç‚¹å‡»Runnable</span>
                        }
                        <span class="hljs-keyword">if</span> (!post(mPerformClick)) { <span class="hljs-comment">// æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—</span>
                            performClickInternal(); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œç‚¹å‡»</span>
                        }
                    }
                } 
                <span class="hljs-comment">// ...</span>
            }
            <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>æš‚ä¸çœ‹switchè¯­å¥é‡Œé¢æœ‰ä»€ä¹ˆï¼Œå¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œåªè¦ä»£ç è¿›äº†ifè¯­å¥ï¼Œæœ€åä¸€å®šä¼šè¿”å›trueï¼Œä¹Ÿå°±æ˜¯View.onTouchEvent()æ–¹æ³•è¿”å›trueï¼Œä¸ç®¡å®ƒæ˜¯ä¸æ˜¯DISABLEçŠ¶æ€çš„ï¼Œä¹Ÿå°±æ˜¯éªŒè¯äº†8ï¼Œ9ï¼Œ10ç»“è®ºï¼š</p>
<blockquote>
<ol start="8">
<li>
<p>Viewçš„onTouchEventé»˜è®¤éƒ½ä¼šæ¶ˆè€—äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œé™¤éå®ƒæ˜¯ä¸å¯ç‚¹å‡»çš„ï¼ˆclickableå’ŒlongClickableåŒæ—¶ä¸ºfalseï¼‰ã€‚Viewçš„longClickableå±æ€§é»˜è®¤éƒ½ä¸ºfalseï¼Œclickableå±æ€§è¦åˆ†æƒ…å†µï¼Œæ¯”å¦‚Buttonçš„clickableå±æ€§é»˜è®¤ä¸ºtrueï¼Œè€ŒTextViewçš„clickableå±æ€§é»˜è®¤ä¸ºfalseã€‚</p>
</li>
<li>
<p>Viewçš„enableå±æ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚å“ªæ€•ä¸€ä¸ªViewæ˜¯disableçŠ¶æ€çš„ï¼Œåªè¦å®ƒçš„clickableæˆ–è€…longClickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆå®ƒçš„onTouchEventå°±è¿”å›true</p>
</li>
<li>
<p>onClickä¼šå‘ç”Ÿçš„å‰ææ˜¯å½“å‰Viewæ˜¯å¯ç‚¹å‡»çš„ï¼Œå¹¶ä¸”å®ƒæ”¶åˆ°äº†downå’Œupäº‹ä»¶ã€‚</p>
</li>
</ol>
</blockquote>
<p>å½“upäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šè§¦å‘PerformClick()æ–¹æ³•ï¼Œå¦‚æœViewè®¾ç½®äº†OnClickListenerï¼Œé‚£ä¹ˆPerformClickæ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨å®ƒçš„onClick()æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformClick</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        recordGestureClassification(TOUCH_GESTURE_CLASSIFIED__CLASSIFICATION__SINGLE_TAP); <span class="hljs-comment">//  æœ€ç»ˆä¼šè°ƒç”¨onClickListener.onClick() æ–¹æ³•</span>
        performClickInternal();
    }
}
</code></pre>
<p>æ¥ç€é€šè¿‡ post() æ–¹æ³•ï¼Œå°† PerformClick() æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ç­‰å¾…è°ƒç”¨ï¼Œå»¶æ—¶è°ƒç”¨ onClickListener.onClick()ã€‚</p>
<p>åˆ°è¿™é‡Œï¼ŒView.onTouchEvent()å°±åˆ†æå®Œäº†ï¼Œå›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6841d39fbcf643c8b0b437cdde0248a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byl5be3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585387&amp;x-signature=m1wUqkJ%2FRzuO6Xq34aWXozaFI60%3D" alt="å±å¹•æˆªå›¾ 2025-11-24 182424.png" loading="lazy"/></p>
<blockquote>
<p>å†…å®¹å‚è€ƒï¼š</p>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">å®‰å“å¼€å‘è‰ºæœ¯æ¢ç´¢ï¼Œä»»ç‰åˆš</a></p>
<p><a href="https://juejin.cn/post/7148256594310987812?searchId=202511241155209CFBBA7F52C402AA4611" target="_blank" title="https://juejin.cn/post/7148256594310987812?searchId=202511241155209CFBBA7F52C402AA4611">å®‰å“åŸºç¡€çŸ¥è¯†ä¹‹Viewç¯‡ï¼ˆä¸‰ï¼‰ï¼šæºç åˆ†æ View äº‹ä»¶åˆ†å‘æœºåˆ¶å®‰å“åŸºç¡€çŸ¥è¯†ç³»åˆ—æ—¨åœ¨ç®€æ˜æ‰¼è¦åœ°æä¾›é¢è¯•æˆ–å·¥ä½œä¸­å¸¸ç”¨çš„åŸºç¡€ - æ˜é‡‘</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlinä¸­çš„æšä¸¾ç±»]]></title>    <link>https://juejin.cn/post/7576105458807341056</link>    <guid>https://juejin.cn/post/7576105458807341056</guid>    <pubDate>2025-11-24T12:46:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576105458807341056" data-draft-id="7576105458807324672" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlinä¸­çš„æšä¸¾ç±»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-24T12:46:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—é›¨åŒ—æ–—"/> <meta itemprop="url" content="https://juejin.cn/user/4059818590476286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlinä¸­çš„æšä¸¾ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059818590476286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—é›¨åŒ—æ–—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T12:46:04.000Z" title="Mon Nov 24 2025 12:46:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kotlin æšä¸¾ç±»ï¼ˆEnum Classï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨äºè¡¨ç¤ºå›ºå®šæ•°é‡çš„å¸¸é‡é›†åˆï¼Œä¾‹å¦‚ä¸€å‘¨çš„å¤©æ•°ã€æ–¹å‘ï¼ˆä¸œã€å—ã€è¥¿ã€åŒ—ï¼‰ã€çŠ¶æ€ï¼ˆæˆåŠŸã€å¤±è´¥ã€ pendingï¼‰ç­‰ã€‚æšä¸¾ç±»åœ¨ç¼–è¯‘æ—¶å°±å·²ç¡®å®šæ‰€æœ‰å¯èƒ½çš„å®ä¾‹ï¼Œä¸èƒ½åŠ¨æ€æ·»åŠ ï¼Œå› æ­¤éå¸¸é€‚åˆç”¨äºè¡¨ç¤ºä¸€ç»„æœ‰é™çš„ã€æ˜ç¡®çš„é€‰é¡¹ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æšä¸¾ç±»çš„åŸºæœ¬å®šä¹‰</h3>
<p>Kotlin ä¸­ä½¿ç”¨Â <code>enum class</code>Â å…³é”®å­—å®šä¹‰æšä¸¾ç±»ï¼Œæ¯ä¸ªæšä¸¾å¸¸é‡éƒ½æ˜¯æšä¸¾ç±»çš„å®ä¾‹ï¼Œä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œæœ«å°¾å¯åŠ é€—å·æˆ–åˆ†å·ï¼ˆå¯é€‰ï¼‰ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ï¼šç®€å•æšä¸¾ç±»</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªè¡¨ç¤ºä¸€å‘¨å¤©æ•°çš„æšä¸¾ç±»</span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DayOfWeek</span> {
    MONDAY,    <span class="hljs-comment">// æšä¸¾å¸¸é‡ï¼šå‘¨ä¸€</span>
    TUESDAY,   <span class="hljs-comment">// å‘¨äºŒ</span>
    WEDNESDAY, <span class="hljs-comment">// å‘¨ä¸‰</span>
    THURSDAY,  <span class="hljs-comment">// å‘¨å››</span>
    FRIDAY,    <span class="hljs-comment">// å‘¨äº”</span>
    SATURDAY,  <span class="hljs-comment">// å‘¨å…­</span>
    SUNDAY     <span class="hljs-comment">// å‘¨æ—¥</span>
}
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæšä¸¾å¸¸é‡ï¼ˆå¦‚Â <code>MONDAY</code>ï¼‰éƒ½æ˜¯Â <code>DayOfWeek</code>Â ç±»çš„å•ä¾‹å®ä¾‹ï¼Œæ— éœ€æ‰‹åŠ¨Â <code>new</code>Â åˆ›å»ºã€‚</li>
<li>æšä¸¾ç±»é»˜è®¤ç»§æ‰¿è‡ªÂ <code>Enum</code>Â ç±»ï¼ˆKotlin è‡ªåŠ¨å¤„ç†ï¼‰ï¼Œå› æ­¤ä¸èƒ½å†ç»§æ‰¿å…¶ä»–ç±»ï¼Œä½†å¯ä»¥å®ç°æ¥å£ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€æšä¸¾ç±»çš„æ ¸å¿ƒç‰¹æ€§ä¸ä½¿ç”¨</h3>
<h4 data-id="heading-3">1. è®¿é—®æšä¸¾å¸¸é‡</h4>
<p>ç›´æ¥é€šè¿‡ã€Œæšä¸¾ç±»åã€‚å¸¸é‡åã€è®¿é—®æšä¸¾å®ä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> today = DayOfWeek.MONDAY
    println(today) <span class="hljs-comment">// è¾“å‡ºï¼šMONDAYï¼ˆé»˜è®¤è°ƒç”¨ toString() æ–¹æ³•ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-4">2. æšä¸¾å¸¸é‡çš„å±æ€§ä¸æ–¹æ³•</h4>
<p>æšä¸¾ç±»çš„æ¯ä¸ªå®ä¾‹éƒ½è‡ªå¸¦ä¸¤ä¸ªæ ¸å¿ƒå±æ€§ï¼ˆç»§æ‰¿è‡ªÂ <code>Enum</code>Â ç±»ï¼‰ï¼š</p>
<ul>
<li><code>name</code>ï¼šæšä¸¾å¸¸é‡çš„åç§°ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼Œå¦‚Â <code>"MONDAY"</code>ï¼‰ã€‚</li>
<li><code>ordinal</code>ï¼šæšä¸¾å¸¸é‡çš„ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼Œå¦‚Â <code>MONDAY</code>Â çš„Â <code>ordinal</code>Â æ˜¯ 0ï¼Œ<code>TUESDAY</code>Â æ˜¯ 1ï¼‰ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œæšä¸¾ç±»è¿˜å¯è‡ªå®šä¹‰å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼šå¸¦è‡ªå®šä¹‰å±æ€§å’Œæ–¹æ³•çš„æšä¸¾ç±»</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¸¦å‚æ•°çš„æšä¸¾ç±»ï¼ˆæ¯ä¸ªå¸¸é‡å¯ä¼ å…¥è‡ªå®šä¹‰å±æ€§ï¼‰</span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Direction</span>(
    <span class="hljs-keyword">val</span> chineseName: String, <span class="hljs-comment">// è‡ªå®šä¹‰å±æ€§ï¼šä¸­æ–‡åç§°</span>
    <span class="hljs-keyword">val</span> degree: <span class="hljs-built_in">Int</span>          <span class="hljs-comment">// è‡ªå®šä¹‰å±æ€§ï¼šè§’åº¦ï¼ˆå¦‚ä¸œæ˜¯ 0Â°ï¼ŒåŒ—æ˜¯ 90Â°ï¼‰</span>
) {
    EAST(<span class="hljs-string">"ä¸œ"</span>, <span class="hljs-number">0</span>),
    SOUTH(<span class="hljs-string">"å—"</span>, <span class="hljs-number">90</span>),
    WEST(<span class="hljs-string">"è¥¿"</span>, <span class="hljs-number">180</span>),
    NORTH(<span class="hljs-string">"åŒ—"</span>, <span class="hljs-number">270</span>); <span class="hljs-comment">// æœ«å°¾åˆ†å·å¿…é¡»åŠ ï¼ˆåé¢æœ‰æ–¹æ³•æ—¶ï¼‰</span>

    <span class="hljs-comment">// è‡ªå®šä¹‰æ–¹æ³•ï¼šè·å–åæ–¹å‘</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">opposite</span><span class="hljs-params">()</span></span>: Direction {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (<span class="hljs-keyword">this</span>) {
            EAST -&gt; WEST
            SOUTH -&gt; NORTH
            WEST -&gt; EAST
            NORTH -&gt; SOUTH
        }
    }

    <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•ï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"<span class="hljs-variable">$chineseName</span>(<span class="hljs-variable">$degree</span>Â°)"</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> dir = Direction.EAST
    println(dir.name)        <span class="hljs-comment">// è¾“å‡ºï¼šEASTï¼ˆæšä¸¾å¸¸é‡åï¼‰</span>
    println(dir.ordinal)     <span class="hljs-comment">// è¾“å‡ºï¼š0ï¼ˆç´¢å¼•ï¼‰</span>
    println(dir.chineseName) <span class="hljs-comment">// è¾“å‡ºï¼šä¸œï¼ˆè‡ªå®šä¹‰å±æ€§ï¼‰</span>
    println(dir.degree)      <span class="hljs-comment">// è¾“å‡ºï¼š0ï¼ˆè‡ªå®šä¹‰å±æ€§ï¼‰</span>
    println(dir.opposite())  <span class="hljs-comment">// è¾“å‡ºï¼šè¥¿(180Â°)ï¼ˆè°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•ï¼‰</span>
    println(dir)             <span class="hljs-comment">// è¾“å‡ºï¼šä¸œ(0Â°)ï¼ˆè°ƒç”¨é‡å†™çš„ toString()ï¼‰</span>
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>æšä¸¾ç±»çš„æ„é€ å‡½æ•°å‚æ•°éœ€åœ¨å¸¸é‡å£°æ˜æ—¶ä¼ å…¥ï¼ˆå¦‚Â <code>EAST("ä¸œ", 0)</code>ï¼‰ã€‚</li>
<li>è‹¥æšä¸¾ç±»æœ‰è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¸¸é‡åˆ—è¡¨æœ«å°¾å¿…é¡»åŠ <strong>åˆ†å·</strong>ï¼ˆ<code>;</code>ï¼‰åˆ†éš”ã€‚</li>
</ul>
<h4 data-id="heading-6">3. æšä¸¾ç±»çš„å¸¸ç”¨æ–¹æ³•</h4>
<p>é™¤äº†è‡ªå®šä¹‰æ–¹æ³•ï¼Œ<code>Enum</code>Â ç±»è¿˜æä¾›äº†ä¸€äº›å®ç”¨çš„å†…ç½®æ–¹æ³•ï¼š</p>






























<table><thead><tr><th>æ–¹æ³•ç­¾å</th><th>åŠŸèƒ½è¯´æ˜</th><th>ç¤ºä¾‹ï¼ˆä»¥Â <code>Direction</code>Â ä¸ºä¾‹ï¼‰</th></tr></thead><tbody><tr><td><code>values(): Array&lt;T&gt;</code></td><td>è¿”å›æ‰€æœ‰æšä¸¾å¸¸é‡çš„æ•°ç»„ï¼ˆæŒ‰å£°æ˜é¡ºåºæ’åˆ—ï¼‰</td><td><code>Direction.values()</code>Â â†’Â <code>[EAST, SOUTH, WEST, NORTH]</code></td></tr><tr><td><code>valueOf(name: String): T</code></td><td>æ ¹æ®åç§°è·å–æšä¸¾å¸¸é‡ï¼ˆå¤§å°å†™æ•æ„Ÿï¼Œä¸å­˜åœ¨åˆ™æŠ›å¼‚å¸¸ï¼‰</td><td><code>Direction.valueOf("WEST")</code>Â â†’Â <code>WEST</code></td></tr><tr><td><code>compareTo(other: T): Int</code></td><td>æ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡çš„Â <code>ordinal</code>Â å·®å€¼</td><td><code>EAST.compareTo(WEST)</code>Â â†’Â <code>0 - 2 = -2</code></td></tr><tr><td><code>name: String</code>Â /Â <code>ordinal: Int</code></td><td>è·å–åç§° / ç´¢å¼•ï¼ˆå‰é¢å·²è®²ï¼‰</td><td>-</td></tr></tbody></table>
<h4 data-id="heading-7">ç¤ºä¾‹ï¼šå†…ç½®æ–¹æ³•ä½¿ç”¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. values()ï¼šè·å–æ‰€æœ‰å¸¸é‡</span>
    <span class="hljs-keyword">val</span> allDirs = Direction.values()
    allDirs.forEach { println(it) } <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰æ–¹å‘</span>

    <span class="hljs-comment">// 2. valueOf()ï¼šæŒ‰åç§°è·å–å¸¸é‡</span>
    <span class="hljs-keyword">val</span> west = Direction.valueOf(<span class="hljs-string">"WEST"</span>)
    println(west) <span class="hljs-comment">// è¾“å‡ºï¼šè¥¿(180Â°)</span>

    <span class="hljs-comment">// 3. compareTo()ï¼šæ¯”è¾ƒç´¢å¼•</span>
    <span class="hljs-keyword">val</span> isEastBeforeSouth = Direction.EAST &lt; Direction.SOUTH <span class="hljs-comment">// ç­‰ä»·äº 0 &lt; 1</span>
    println(isEastBeforeSouth) <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
}
</code></pre>
<h4 data-id="heading-8">4. æšä¸¾ç±»å®ç°æ¥å£</h4>
<p>æšä¸¾ç±»ä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»ï¼ˆé»˜è®¤ç»§æ‰¿Â <code>Enum</code>ï¼‰ï¼Œä½†å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œä¸”æ¯ä¸ªå¸¸é‡å¯å•ç‹¬å®ç°æ¥å£æ–¹æ³•ï¼ˆçµæ´»é€‚é…ä¸åŒè¡Œä¸ºï¼‰ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ï¼šæšä¸¾ç±»å®ç°æ¥å£</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Behavior</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">action</span><span class="hljs-params">()</span></span>: String
}

<span class="hljs-comment">// æšä¸¾ç±»å®ç°æ¥å£ï¼ˆæ¯ä¸ªå¸¸é‡å¯è‡ªå®šä¹‰ action() å®ç°ï¼‰</span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> : <span class="hljs-type">Behavior</span> {
    CAT {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">action</span><span class="hljs-params">()</span></span>: String {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"çŒ«ï¼šå–µå–µå«"</span>
        }
    },
    DOG {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">action</span><span class="hljs-params">()</span></span>: String {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç‹—ï¼šæ±ªæ±ªå«"</span>
        }
    },
    BIRD {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">action</span><span class="hljs-params">()</span></span>: String {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"é¸Ÿï¼šå½å½å–³å–³"</span>
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> animal = Animal.DOG
    println(animal.action()) <span class="hljs-comment">// è¾“å‡ºï¼šç‹—ï¼šæ±ªæ±ªå«</span>
}
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€æšä¸¾ç±»çš„é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-11">1. å¸¦æŠ½è±¡æ–¹æ³•çš„æšä¸¾ç±»</h4>
<p>æšä¸¾ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œæ­¤æ—¶æ¯ä¸ªæšä¸¾å¸¸é‡å¿…é¡»é‡å†™è¯¥æŠ½è±¡æ–¹æ³•ï¼ˆç±»ä¼¼æ¥å£çš„å®ç°ï¼‰ã€‚</p>
<h4 data-id="heading-12">ç¤ºä¾‹ï¼šå¸¦æŠ½è±¡æ–¹æ³•çš„æšä¸¾</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Operation</span> {
    ADD {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = a + b
    },
    SUBTRACT {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = a - b
    },
    MULTIPLY {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = a * b
    };

    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼ˆå¿…é¡»è¢«æ‰€æœ‰å¸¸é‡é‡å†™ï¼‰</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> op = Operation.MULTIPLY
    println(op.calculate(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment">// è¾“å‡ºï¼š12</span>
}
</code></pre>
<h4 data-id="heading-13">2. æšä¸¾å¸¸é‡ä½œä¸ºå‚æ•°</h4>
<p>æšä¸¾ç±»çš„å®ä¾‹å¯ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œé™åˆ¶è¾“å…¥ä¸ºå›ºå®šçš„å¸¸é‡é›†åˆï¼Œæé«˜ä»£ç å®‰å…¨æ€§ã€‚</p>
<h4 data-id="heading-14">ç¤ºä¾‹ï¼šæšä¸¾ä½œä¸ºå‡½æ•°å‚æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‡½æ•°å‚æ•°ç±»å‹ä¸ºæšä¸¾ç±» DayOfWeek</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isWeekend</span><span class="hljs-params">(day: <span class="hljs-type">DayOfWeek</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> day == DayOfWeek.SATURDAY || day == DayOfWeek.SUNDAY
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(isWeekend(DayOfWeek.FRIDAY))  <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
    println(isWeekend(DayOfWeek.SATURDAY))<span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
}
</code></pre>
<h3 data-id="heading-15">å››ã€æšä¸¾ç±» vs å¯†å°ç±»ï¼ˆSealed Classï¼‰</h3>
<p>Kotlin ä¸­è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ¦‚å¿µã€Œå¯†å°ç±»ï¼ˆ<code>sealed class</code>ï¼‰ã€ï¼Œä¸¤è€…éƒ½ç”¨äºè¡¨ç¤ºæœ‰é™çš„é€‰é¡¹ï¼Œä½†æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æšä¸¾ç±»ï¼ˆEnum Classï¼‰</th><th>å¯†å°ç±»ï¼ˆSealed Classï¼‰</th></tr></thead><tbody><tr><td>å®ä¾‹æ•°é‡</td><td>ç¼–è¯‘æ—¶å›ºå®šï¼Œä¸èƒ½åŠ¨æ€æ·»åŠ </td><td>å­ç±»æ•°é‡å›ºå®šï¼ˆå¿…é¡»åœ¨åŒä¸€æ–‡ä»¶æˆ–å­æ–‡ä»¶ä¸­å®šä¹‰ï¼‰</td></tr><tr><td>ç»§æ‰¿å…³ç³»</td><td>ä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»ï¼Œå¯å®ç°æ¥å£</td><td>å¯ç»§æ‰¿å…¶ä»–ç±»ï¼Œå¯è¢«å…¶å­ç±»ç»§æ‰¿ï¼ˆå­ç±»å¯ä¸ºä»»æ„ç±»å‹ï¼‰</td></tr><tr><td>å®ä¾‹ç±»å‹</td><td>æ‰€æœ‰å¸¸é‡éƒ½æ˜¯æšä¸¾ç±»æœ¬èº«çš„å®ä¾‹</td><td>æ¯ä¸ªå­ç±»éƒ½æ˜¯ç‹¬ç«‹çš„ç±»å‹ï¼ˆå¯åŒ…å«ä¸åŒå±æ€§å’Œæ–¹æ³•ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è¡¨ç¤ºä¸€ç»„<strong>æ— çŠ¶æ€</strong>çš„å¸¸é‡ï¼ˆå¦‚çŠ¶æ€ã€ç±»å‹ï¼‰</td><td>è¡¨ç¤ºä¸€ç»„<strong>æœ‰çŠ¶æ€</strong>çš„å˜ä½“ï¼ˆå¦‚ä¸åŒç±»å‹çš„äº‹ä»¶ã€æ•°æ®ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-16">ç¤ºä¾‹ï¼šå¯†å°ç±»ï¼ˆå¯¹æ¯”æšä¸¾ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯†å°ç±»ï¼ˆè¡¨ç¤ºä¸åŒç±»å‹çš„ç½‘ç»œè¯·æ±‚ç»“æœï¼‰</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: String) : Result() <span class="hljs-comment">// æˆåŠŸï¼ˆå¸¦æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> code: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> msg: String) : Result() <span class="hljs-comment">// å¤±è´¥ï¼ˆå¸¦é”™è¯¯ç å’Œä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">object</span> Loading : Result() <span class="hljs-comment">// åŠ è½½ä¸­ï¼ˆæ— çŠ¶æ€ï¼‰</span>
}

<span class="hljs-comment">// ä½¿ç”¨å¯†å°ç±»ï¼ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œé¿å…é—æ¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleResult</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>)</span></span> {
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; println(<span class="hljs-string">"æˆåŠŸï¼š<span class="hljs-subst">${result.data}</span>"</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; println(<span class="hljs-string">"å¤±è´¥ï¼š<span class="hljs-subst">${result.code}</span> - <span class="hljs-subst">${result.msg}</span>"</span>)
        Result.Loading -&gt; println(<span class="hljs-string">"åŠ è½½ä¸­..."</span>)
    }
}
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>è‹¥éœ€è¡¨ç¤ºã€Œæ— çŠ¶æ€çš„å¸¸é‡é›†åˆã€ï¼ˆå¦‚æ–¹å‘ã€çŠ¶æ€ç ï¼‰ï¼Œç”¨<strong>æšä¸¾ç±»</strong>ã€‚</li>
<li>è‹¥éœ€è¡¨ç¤ºã€Œæœ‰çŠ¶æ€çš„å˜ä½“é›†åˆã€ï¼ˆå¦‚ä¸åŒç±»å‹çš„ç»“æœã€äº‹ä»¶ï¼‰ï¼Œç”¨<strong>å¯†å°ç±»</strong>ã€‚</li>
</ul>
<h3 data-id="heading-17">äº”ã€æšä¸¾ç±»çš„å¸¸è§åº”ç”¨åœºæ™¯</h3>
<ol>
<li><strong>çŠ¶æ€è¡¨ç¤º</strong>ï¼šå¦‚Â <code>STATUS_SUCCESS</code>ã€<code>STATUS_FAILED</code>ã€<code>STATUS_PENDING</code>ã€‚</li>
<li><strong>ç±»å‹åˆ†ç±»</strong>ï¼šå¦‚Â <code>TYPE_TEXT</code>ã€<code>TYPE_IMAGE</code>ã€<code>TYPE_VIDEO</code>ï¼ˆè¡¨ç¤ºæ¶ˆæ¯ç±»å‹ï¼‰ã€‚</li>
<li><strong>é…ç½®é€‰é¡¹</strong>ï¼šå¦‚Â <code>THEME_LIGHT</code>ã€<code>THEME_DARK</code>ã€<code>THEME_SYSTEM</code>ï¼ˆä¸»é¢˜é…ç½®ï¼‰ã€‚</li>
<li><strong>æœ‰é™é›†åˆ</strong>ï¼šå¦‚ä¸€å‘¨å¤©æ•°ã€æœˆä»½ã€æ–¹å‘ç­‰ã€‚</li>
</ol>
<h3 data-id="heading-18">å…­ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>æšä¸¾å¸¸é‡çš„Â <code>name</code>Â å’ŒÂ <code>ordinal</code>Â æ˜¯Â <code>final</code>Â çš„ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</li>
<li><code>valueOf()</code>Â æ–¹æ³•å¯¹åç§°å¤§å°å†™æ•æ„Ÿï¼Œè‹¥ä¼ å…¥ä¸å­˜åœ¨çš„åç§°ï¼Œä¼šæŠ›å‡ºÂ <code>IllegalArgumentException</code>ï¼Œå»ºè®®ç»“åˆÂ <code>try-catch</code>Â ä½¿ç”¨æˆ–æå‰åˆ¤æ–­ã€‚</li>
<li>æšä¸¾ç±»çš„å®ä¾‹æ˜¯å•ä¾‹çš„ï¼Œå¤šæ¬¡è®¿é—®åŒä¸€ä¸ªå¸¸é‡ä¼šè¿”å›åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
</ol>
<h3 data-id="heading-19">æ€»ç»“</h3>
<p>Kotlin æšä¸¾ç±»æ˜¯è¡¨ç¤ºå›ºå®šå¸¸é‡é›†åˆçš„å¼ºå¤§å·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰å±æ€§ã€æ–¹æ³•ã€æ¥å£å®ç°å’ŒæŠ½è±¡æ–¹æ³•ï¼Œç”¨æ³•çµæ´»ä¸”ç±»å‹å®‰å…¨ã€‚åœ¨éœ€è¦é™åˆ¶è¾“å…¥ä¸ºæœ‰é™é€‰é¡¹çš„åœºæ™¯ä¸­ï¼Œæšä¸¾ç±»æ˜¯æ›¿ä»£å­—ç¬¦ä¸² / æ•´æ•°å¸¸é‡çš„æœ€ä½³é€‰æ‹©ï¼Œèƒ½æ˜¾è‘—æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7576210031872753705</link>    <guid>https://juejin.cn/post/7576210031872753705</guid>    <pubDate>2025-11-25T01:48:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031872753705" data-draft-id="7576210031872720937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="Spring"/> <meta itemprop="datePublished" content="2025-11-25T01:48:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:48:13.000Z" title="Tue Nov 25 2025 01:48:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨çš„æ ¸å¿ƒä»·å€¼</h2>
<p>åœ¨ç§’æ€ç­‰é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œä¼ ç»Ÿçš„æ•°æ®åº“é”å’Œäº‹åŠ¡æœºåˆ¶ä¼šæˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚å‘å·å™¨é€šè¿‡é¢„ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Œå°†<strong>èµ„æºç«äº‰</strong>è½¬åŒ–ä¸º<strong>IDåˆ†é…</strong>ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³å¹¶å‘å†²çªé—®é¢˜ã€‚</p>
<h3 data-id="heading-1">1.1 å‘å·å™¨ vs ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”</h3>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¹¶å‘èƒ½åŠ›</th><th>å¤æ‚åº¦</th><th>æ•°æ®ä¸€è‡´æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ•°æ®åº“æ‚²è§‚é”</strong>â€‹</td><td>ä½ï¼ˆ~1000 TPSï¼‰</td><td>ä½</td><td>å¼ºä¸€è‡´æ€§</td><td>ä½å¹¶å‘ä¸šåŠ¡</td></tr><tr><td><strong>Redisåˆ†å¸ƒå¼é”</strong>â€‹</td><td>ä¸­ï¼ˆ~5000 TPSï¼‰</td><td>ä¸­</td><td>å¼ºä¸€è‡´æ€§</td><td>ä¸­ç­‰å¹¶å‘</td></tr><tr><td><strong>å‘å·å™¨æ–¹æ¡ˆ</strong>â€‹</td><td>é«˜ï¼ˆ~10ä¸‡+ TPSï¼‰</td><td>é«˜</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>é«˜å¹¶å‘ç§’æ€</td></tr></tbody></table>
<h2 data-id="heading-2">äºŒã€å‘å·å™¨æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-3">2.1 ç³»ç»Ÿæ¶æ„å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯è´Ÿè½½å‡è¡¡    â”‚    â”‚   API Gateway    â”‚
â”‚    (Nginx)      â”‚â”€â”€â”€â”€â”‚   (Spring Cloud)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‘å·å™¨æœåŠ¡é›†ç¾¤                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  å‘å·å™¨å®ä¾‹<span class="hljs-number">1</span> â”‚  â”‚  å‘å·å™¨å®ä¾‹<span class="hljs-number">2</span> â”‚  ...     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Redisé›†ç¾¤    â”‚    â”‚   æ³¨å†Œä¸­å¿ƒ       â”‚
â”‚               â”‚    â”‚   (Nacos)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">2.2 æ ¸å¿ƒè®¾è®¡æ€è·¯</h3>
<ol>
<li><strong>IDé¢„ç”Ÿæˆ</strong>ï¼šæå‰æ‰¹é‡ç”ŸæˆIDï¼Œå‡å°‘å®æ—¶ç”Ÿæˆå‹åŠ›</li>
<li><strong>åˆ†æ®µéš”ç¦»</strong>ï¼šä¸åŒä¸šåŠ¡ä½¿ç”¨ä¸åŒå·æ®µï¼Œé¿å…ç›¸äº’å½±å“</li>
<li><strong>å®¹ç¾é™çº§</strong>ï¼šæ”¯æŒæœ¬åœ°æ¨¡å¼ã€Redisæ¨¡å¼ã€DBæ¨¡å¼å¤šçº§é™çº§</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå®æ—¶ç›‘æ§å·æ®µä½¿ç”¨æƒ…å†µï¼Œæå‰é¢„è­¦</li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€è¯¦ç»†ä»£ç å®ç°</h2>
<h3 data-id="heading-6">3.1 Maven ä¾èµ–é…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>id-generator-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Cloud åŸºç¡€ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æœåŠ¡å‘ç° --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- Redis ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“ä¾èµ–ï¼ˆé™çº§æ–¹æ¡ˆï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- ç›‘æ§ç›¸å…³ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- å·¥å…·ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>31.1-jre<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3.2 åº”ç”¨é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">id-generator-service</span>
  
  <span class="hljs-comment"># Redis é…ç½®ï¼ˆä¸»æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">${REDIS_HOST:127.0.0.1}</span>
    <span class="hljs-attr">port:</span> <span class="hljs-string">${REDIS_PORT:6379}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${REDIS_PASSWORD:}</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">jedis:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">3000ms</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">shutdown-timeout:</span> <span class="hljs-string">100ms</span>
  
  <span class="hljs-comment"># æ•°æ®åº“é…ç½®ï¼ˆé™çº§æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://${DB_HOST:127.0.0.1}:3306/id_generator?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">${DB_USERNAME:root}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${DB_PASSWORD:123456}</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
  
  <span class="hljs-comment"># Nacos æœåŠ¡å‘ç°</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">${NACOS_HOST:127.0.0.1}:8848</span>

<span class="hljs-comment"># å‘å·å™¨é…ç½®</span>
<span class="hljs-attr">id-generator:</span>
  <span class="hljs-comment"># å·æ®µé…ç½®</span>
  <span class="hljs-attr">segment:</span>
    <span class="hljs-attr">step:</span> <span class="hljs-number">1000</span>  <span class="hljs-comment"># æ¯æ¬¡ä»Redisè·å–çš„æ­¥é•¿</span>
    <span class="hljs-attr">retry-times:</span> <span class="hljs-number">3</span>  <span class="hljs-comment"># è·å–å·æ®µé‡è¯•æ¬¡æ•°</span>
    <span class="hljs-attr">timeout-ms:</span> <span class="hljs-number">5000</span>  <span class="hljs-comment"># è·å–å·æ®µè¶…æ—¶æ—¶é—´</span>
    
  <span class="hljs-comment"># é›ªèŠ±ç®—æ³•é…ç½®ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">snowflake:</span>
    <span class="hljs-attr">datacenter-id:</span> <span class="hljs-string">${DATACENTER_ID:1}</span>  <span class="hljs-comment"># æ•°æ®ä¸­å¿ƒID</span>
    <span class="hljs-attr">worker-id:</span> <span class="hljs-string">${WORKER_ID:1}</span>  <span class="hljs-comment"># å·¥ä½œæœºå™¨ID</span>
    
  <span class="hljs-comment"># æ¨¡å¼é…ç½®ï¼šlocal(æœ¬åœ°é›ªèŠ±ç®—æ³•)/redis(Rediså·æ®µ)/db(æ•°æ®åº“å·æ®µ)</span>
  <span class="hljs-attr">mode:</span> <span class="hljs-string">${ID_GENERATOR_MODE:redis}</span>
  
<span class="hljs-comment"># ç›‘æ§ç«¯ç‚¹</span>
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,info,metrics,prometheus</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">health:</span>
      <span class="hljs-attr">show-details:</span> <span class="hljs-string">always</span>
</code></pre>
<h3 data-id="heading-8">3.3 æ ¸å¿ƒé¢†åŸŸæ¨¡å‹</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// IDç±»å‹æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">IdType</span> {
    <span class="hljs-built_in">ORDER</span>(<span class="hljs-string">"ORDER"</span>, <span class="hljs-string">"è®¢å•ID"</span>, <span class="hljs-number">1</span>),
    <span class="hljs-built_in">SECKILL</span>(<span class="hljs-string">"SECKILL"</span>, <span class="hljs-string">"ç§’æ€æ´»åŠ¨ID"</span>, <span class="hljs-number">2</span>),
    <span class="hljs-built_in">USER</span>(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ç”¨æˆ·ID"</span>, <span class="hljs-number">3</span>),
    <span class="hljs-built_in">PRODUCT</span>(<span class="hljs-string">"PRODUCT"</span>, <span class="hljs-string">"å•†å“ID"</span>, <span class="hljs-number">4</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> desc;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> bizType;
    
    <span class="hljs-built_in">IdType</span>(<span class="hljs-type">String</span> code, <span class="hljs-type">String</span> desc, <span class="hljs-type">int</span> bizType) {
        <span class="hljs-keyword">this</span>.code = code;
        <span class="hljs-keyword">this</span>.desc = desc;
        <span class="hljs-keyword">this</span>.bizType = bizType;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> code; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getDesc</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> desc; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getBizType</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> bizType; }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdType <span class="hljs-title">getByCode</span><span class="hljs-params">(<span class="hljs-type">String</span> code)</span> </span>{
        <span class="hljs-keyword">for</span> (IdType type : <span class="hljs-built_in">values</span>()) {
            <span class="hljs-keyword">if</span> (type.code.<span class="hljs-built_in">equals</span>(code)) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> null;
    }
}

<span class="hljs-comment">// IDç”Ÿæˆç»“æœ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdResult</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> success;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> message;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> mode; <span class="hljs-comment">// ç”Ÿæˆæ¨¡å¼ï¼šlocal/redis/db</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;
    
    <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setter</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdResult <span class="hljs-title">success</span><span class="hljs-params">(<span class="hljs-type">long</span> id, <span class="hljs-type">String</span> mode)</span> </span>{
        IdResult result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdResult</span>();
        result.<span class="hljs-built_in">setSuccess</span>(<span class="hljs-literal">true</span>);
        result.<span class="hljs-built_in">setId</span>(id);
        result.<span class="hljs-built_in">setMode</span>(mode);
        result.<span class="hljs-built_in">setTimestamp</span>(System.<span class="hljs-built_in">currentTimeMillis</span>());
        result.<span class="hljs-built_in">setMessage</span>(<span class="hljs-string">"IDç”ŸæˆæˆåŠŸ"</span>);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdResult <span class="hljs-title">fail</span><span class="hljs-params">(<span class="hljs-type">String</span> message)</span> </span>{
        IdResult result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdResult</span>();
        result.<span class="hljs-built_in">setSuccess</span>(<span class="hljs-literal">false</span>);
        result.<span class="hljs-built_in">setMessage</span>(message);
        result.<span class="hljs-built_in">setTimestamp</span>(System.<span class="hljs-built_in">currentTimeMillis</span>());
        <span class="hljs-keyword">return</span> result;
    }
}

<span class="hljs-comment">// å·æ®µä¿¡æ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdSegment</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> current;  <span class="hljs-comment">// å½“å‰å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> max;      <span class="hljs-comment">// æœ€å¤§å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> step;     <span class="hljs-comment">// æ­¥é•¿</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> version; <span class="hljs-comment">// ç‰ˆæœ¬å·ï¼ˆç”¨äºä¹è§‚é”ï¼‰</span>
    <span class="hljs-keyword">private</span> IdType idType; <span class="hljs-comment">// IDç±»å‹</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">hasMore</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> current &lt;= max;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title">getAndIncrement</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (current &gt; max) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
        <span class="hljs-keyword">return</span> current++;
    }
    
    <span class="hljs-comment">// getterã€setter</span>
}
</code></pre>
<h3 data-id="heading-9">3.4 é›ªèŠ±ç®—æ³•å®ç°ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨
 * ç»“æ„ï¼š0(1ä½ç¬¦å·ä½) + æ—¶é—´æˆ³(41ä½) + æ•°æ®ä¸­å¿ƒID(5ä½) + å·¥ä½œæœºå™¨ID(5ä½) + åºåˆ—å·(12ä½)
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnowflakeIdGenerator</span> {
    
    <span class="hljs-comment">// èµ·å§‹æ—¶é—´æˆ³ï¼ˆ2023-01-01ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">START_TIMESTAMP</span> <span class="hljs-operator">=</span> <span class="hljs-number">1672531200000L</span>;
    
    <span class="hljs-comment">// ä½åˆ†é…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">SEQUENCE_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">12L</span>;      <span class="hljs-comment">// åºåˆ—å·å ç”¨ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>;      <span class="hljs-comment">// å·¥ä½œæœºå™¨IDå ç”¨ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>; <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒIDå ç”¨ä½æ•°</span>
    
    <span class="hljs-comment">// æœ€å¤§å€¼è®¡ç®—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_SEQUENCE</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; SEQUENCE_BITS);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_WORKER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; WORKER_ID_BITS);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_DATACENTER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; DATACENTER_ID_BITS);
    
    <span class="hljs-comment">// ç§»ä½åç§»é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">TIMESTAMP_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS + DATACENTER_ID_BITS;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> workerId;       <span class="hljs-comment">// å·¥ä½œæœºå™¨ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> datacenterId;   <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>; <span class="hljs-comment">// åºåˆ—å·</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastTimestamp</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span>; <span class="hljs-comment">// ä¸Šæ¬¡ç”Ÿæˆæ—¶é—´æˆ³</span>
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">generateCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">exceptionCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SnowflakeIdGenerator</span><span class="hljs-params">(
            <span class="hljs-meta">@Value("${id-generator.snowflake.worker-id:1}")</span> <span class="hljs-type">long</span> workerId,
            <span class="hljs-meta">@Value("${id-generator.snowflake.datacenter-id:1}")</span> <span class="hljs-type">long</span> datacenterId)</span> {
        
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (workerId &gt; MAX_WORKER_ID || workerId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"worker Id å¿…é¡»åœ¨ 0 åˆ° %d ä¹‹é—´"</span>, MAX_WORKER_ID));
        }
        <span class="hljs-keyword">if</span> (datacenterId &gt; MAX_DATACENTER_ID || datacenterId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"datacenter Id å¿…é¡»åœ¨ 0 åˆ° %d ä¹‹é—´"</span>, MAX_DATACENTER_ID));
        }
        
        <span class="hljs-built_in">this</span>.workerId = workerId;
        <span class="hljs-built_in">this</span>.datacenterId = datacenterId;
        
        log.info(<span class="hljs-string">"é›ªèŠ±ç®—æ³•åˆå§‹åŒ–æˆåŠŸ: workerId={}, datacenterId={}"</span>, workerId, datacenterId);
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTimestamp</span> <span class="hljs-operator">=</span> timeGen();
        
        <span class="hljs-comment">// æ—¶é’Ÿå›æ‹¨æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (currentTimestamp &lt; lastTimestamp) {
            <span class="hljs-type">long</span> <span class="hljs-variable">offset</span> <span class="hljs-operator">=</span> lastTimestamp - currentTimestamp;
            exceptionCount.incrementAndGet();
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(
                String.format(<span class="hljs-string">"æ—¶é’Ÿå›æ‹¨å¼‚å¸¸ï¼Œæ‹’ç»ç”ŸæˆIDã€‚å›æ‹¨æ—¶é—´: %d æ¯«ç§’"</span>, offset));
        }
        
        <span class="hljs-comment">// åŒä¸€æ¯«ç§’å†…ç”Ÿæˆ</span>
        <span class="hljs-keyword">if</span> (lastTimestamp == currentTimestamp) {
            sequence = (sequence + <span class="hljs-number">1</span>) &amp; MAX_SEQUENCE;
            <span class="hljs-comment">// åºåˆ—å·æº¢å‡ºï¼Œç­‰å¾…ä¸‹ä¸€æ¯«ç§’</span>
            <span class="hljs-keyword">if</span> (sequence == <span class="hljs-number">0</span>) {
                currentTimestamp = tilNextMillis(lastTimestamp);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ–°çš„æ¯«ç§’ï¼Œåºåˆ—å·ä»0å¼€å§‹</span>
            sequence = <span class="hljs-number">0L</span>;
        }
        
        lastTimestamp = currentTimestamp;
        generateCount.incrementAndGet();
        
        <span class="hljs-comment">// ç»„åˆç”Ÿæˆæœ€ç»ˆID</span>
        <span class="hljs-keyword">return</span> ((currentTimestamp - START_TIMESTAMP) &lt;&lt; TIMESTAMP_SHIFT)
                | (datacenterId &lt;&lt; DATACENTER_ID_SHIFT)
                | (workerId &lt;&lt; WORKER_ID_SHIFT)
                | sequence;
    }
    
    <span class="hljs-comment">/**
     * é˜»å¡åˆ°ä¸‹ä¸€æ¯«ç§’
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">tilNextMillis</span><span class="hljs-params">(<span class="hljs-type">long</span> lastTimestamp)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> timeGen();
        <span class="hljs-keyword">while</span> (timestamp &lt;= lastTimestamp) {
            timestamp = timeGen();
        }
        <span class="hljs-keyword">return</span> timestamp;
    }
    
    <span class="hljs-comment">/**
     * è·å–å½“å‰æ—¶é—´æˆ³
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">timeGen</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.currentTimeMillis();
    }
    
    <span class="hljs-comment">/**
     * è§£æIDä¿¡æ¯ï¼ˆç”¨äºè°ƒè¯•å’Œç›‘æ§ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">parseId</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> (id &gt;&gt; TIMESTAMP_SHIFT) + START_TIMESTAMP;
        <span class="hljs-type">long</span> <span class="hljs-variable">datacenterId</span> <span class="hljs-operator">=</span> (id &gt;&gt; DATACENTER_ID_SHIFT) &amp; MAX_DATACENTER_ID;
        <span class="hljs-type">long</span> <span class="hljs-variable">workerId</span> <span class="hljs-operator">=</span> (id &gt;&gt; WORKER_ID_SHIFT) &amp; MAX_WORKER_ID;
        <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> id &amp; MAX_SEQUENCE;
        
        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        result.put(<span class="hljs-string">"timestamp"</span>, timestamp);
        result.put(<span class="hljs-string">"datacenterId"</span>, datacenterId);
        result.put(<span class="hljs-string">"workerId"</span>, workerId);
        result.put(<span class="hljs-string">"sequence"</span>, sequence);
        result.put(<span class="hljs-string">"generateTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timestamp));
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡è·å–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getGenerateCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> generateCount.get();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getExceptionCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> exceptionCount.get();
    }
}
</code></pre>
<h3 data-id="heading-10">3.5 Rediså·æ®µç”Ÿæˆå™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŸºäºRedisçš„å·æ®µæ¨¡å¼IDç”Ÿæˆå™¨
 * ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½ã€å¯æ‰©å±•ã€æ”¯æŒæ‰¹é‡è·å–
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSegmentIdGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StringRedisTemplate stringRedisTemplate;
    
    <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜ï¼ˆå‡å°‘Redisè®¿é—®ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, IdSegment&gt; segmentCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// é…ç½®å‚æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> defaultStep;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> retryTimes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timeoutMs;
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">redisSuccessCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">redisFailCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">cacheHitCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisSegmentIdGenerator</span><span class="hljs-params">(
            RedisTemplate&lt;String, String&gt; redisTemplate,
            StringRedisTemplate stringRedisTemplate,
            <span class="hljs-meta">@Value("${id-generator.segment.step:1000}")</span> <span class="hljs-type">int</span> defaultStep,
            <span class="hljs-meta">@Value("${id-generator.segment.retry-times:3}")</span> <span class="hljs-type">int</span> retryTimes,
            <span class="hljs-meta">@Value("${id-generator.segment.timeout-ms:5000}")</span> <span class="hljs-type">long</span> timeoutMs)</span> {
        
        <span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;
        <span class="hljs-built_in">this</span>.stringRedisTemplate = stringRedisTemplate;
        <span class="hljs-built_in">this</span>.defaultStep = defaultStep;
        <span class="hljs-built_in">this</span>.retryTimes = retryTimes;
        <span class="hljs-built_in">this</span>.timeoutMs = timeoutMs;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆå·æ®µæ¨¡å¼ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> nextId(idType, defaultStep);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(idType);
        <span class="hljs-type">IdSegment</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> segmentCache.get(cacheKey);
        
        <span class="hljs-comment">// ä»ç¼“å­˜è·å–å¯ç”¨ID</span>
        <span class="hljs-keyword">if</span> (segment != <span class="hljs-literal">null</span> &amp;&amp; segment.hasMore()) {
            cacheHitCount.incrementAndGet();
            <span class="hljs-type">long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> segment.getAndIncrement();
            <span class="hljs-keyword">if</span> (id != -<span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> buildFinalId(id, idType);
            }
        }
        
        <span class="hljs-comment">// ç¼“å­˜è€—å°½ï¼Œä»Redisè·å–æ–°å·æ®µ</span>
        <span class="hljs-keyword">return</span> getNewSegmentAndId(idType, step);
    }
    
    <span class="hljs-comment">/**
     * ä»Redisè·å–æ–°å·æ®µ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getNewSegmentAndId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> buildRedisKey(idType);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; retryTimes; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä½¿ç”¨RedisåŸå­æ“ä½œè·å–å·æ®µ</span>
                <span class="hljs-type">Long</span> <span class="hljs-variable">newMax</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue()
                    .increment(redisKey, step);
                
                <span class="hljs-keyword">if</span> (newMax != <span class="hljs-literal">null</span>) {
                    redisSuccessCount.incrementAndGet();
                    
                    <span class="hljs-type">long</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> newMax - step + <span class="hljs-number">1</span>;
                    <span class="hljs-type">long</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> newMax;
                    
                    <span class="hljs-comment">// æ›´æ–°æœ¬åœ°ç¼“å­˜</span>
                    <span class="hljs-type">IdSegment</span> <span class="hljs-variable">newSegment</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdSegment</span>();
                    newSegment.setCurrent(current);
                    newSegment.setMax(max);
                    newSegment.setStep(step);
                    newSegment.setIdType(idType);
                    
                    <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(idType);
                    segmentCache.put(cacheKey, newSegment);
                    
                    log.debug(<span class="hljs-string">"è·å–æ–°å·æ®µæˆåŠŸ: type={}, current={}, max={}"</span>, 
                             idType, current, max);
                    
                    <span class="hljs-keyword">return</span> buildFinalId(current, idType);
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                redisFailCount.incrementAndGet();
                log.error(<span class="hljs-string">"è·å–Rediså·æ®µå¤±è´¥ï¼Œé‡è¯•æ¬¡æ•°: {}/{}"</span>, i + <span class="hljs-number">1</span>, retryTimes, e);
                
                <span class="hljs-keyword">if</span> (i == retryTimes - <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Rediså·æ®µè·å–å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°"</span>, e);
                }
                
                <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(Math.min(<span class="hljs-number">1000L</span> * (<span class="hljs-number">1</span> &lt;&lt; i), <span class="hljs-number">5000L</span>));
                } <span class="hljs-keyword">catch</span> (InterruptedException ie) {
                    Thread.currentThread().interrupt();
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"çº¿ç¨‹è¢«ä¸­æ–­"</span>, ie);
                }
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æ³•ä»Redisè·å–å·æ®µ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ„å»ºæœ€ç»ˆIDï¼ˆåŒ…å«ä¸šåŠ¡ç±»å‹ä¿¡æ¯ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">buildFinalId</span><span class="hljs-params">(<span class="hljs-type">long</span> baseId, IdType idType)</span> {
        <span class="hljs-comment">// IDç»“æ„ï¼šä¸šåŠ¡ç±»å‹(8ä½) + åŸºç¡€ID(56ä½)</span>
        <span class="hljs-keyword">return</span> ((<span class="hljs-type">long</span>) idType.getBizType() &lt;&lt; <span class="hljs-number">56</span>) | (baseId &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>);
    }
    
    <span class="hljs-comment">/**
     * è§£æIDè·å–ä¸šåŠ¡ç±»å‹
     */</span>
    <span class="hljs-keyword">public</span> IdType <span class="hljs-title function_">parseIdType</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">bizType</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) ((id &gt;&gt; <span class="hljs-number">56</span>) &amp; <span class="hljs-number">0xFF</span>);
        <span class="hljs-keyword">for</span> (IdType type : IdType.values()) {
            <span class="hljs-keyword">if</span> (type.getBizType() == bizType) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">/**
     * è·å–åŸºç¡€IDï¼ˆå»é™¤ä¸šåŠ¡ç±»å‹ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getBaseId</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-keyword">return</span> id &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildRedisKey</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"id:generator:%s"</span>, idType.getCode().toLowerCase());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildCacheKey</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> idType.getCode().toLowerCase();
    }
    
    <span class="hljs-comment">// ç›‘æ§æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getMetrics</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; metrics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        metrics.put(<span class="hljs-string">"redisSuccessCount"</span>, redisSuccessCount.get());
        metrics.put(<span class="hljs-string">"redisFailCount"</span>, redisFailCount.get());
        metrics.put(<span class="hljs-string">"cacheHitCount"</span>, cacheHitCount.get());
        metrics.put(<span class="hljs-string">"cacheSize"</span>, segmentCache.size());
        metrics.put(<span class="hljs-string">"cacheKeys"</span>, segmentCache.keySet());
        <span class="hljs-keyword">return</span> metrics;
    }
    
    <span class="hljs-comment">/**
     * é¢„åŠ è½½å·æ®µï¼ˆå¯åŠ¨æ—¶é¢„çƒ­ï¼‰
     */</span>
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preloadSegments</span><span class="hljs-params">(ContextRefreshedEvent event)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹é¢„åŠ è½½å·æ®µ..."</span>);
        
        <span class="hljs-keyword">for</span> (IdType idType : IdType.values()) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// é¢„çƒ­åŠ è½½ä¸€ä¸ªå·æ®µ</span>
                nextId(idType, <span class="hljs-number">100</span>);
                log.info(<span class="hljs-string">"é¢„åŠ è½½å·æ®µæˆåŠŸ: {}"</span>, idType);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.warn(<span class="hljs-string">"é¢„åŠ è½½å·æ®µå¤±è´¥: {}"</span>, idType, e);
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-11">3.6 æ•°æ®åº“å·æ®µç”Ÿæˆå™¨ï¼ˆé™çº§æ–¹æ¡ˆï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * åŸºäºæ•°æ®åº“çš„å·æ®µæ¨¡å¼IDç”Ÿæˆå™¨ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
 */</span>
@Component
@Slf4j
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseSegmentIdGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-comment">// SQLè¯­å¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> UPDATE_SQL = 
        <span class="hljs-string">"UPDATE id_segments SET current_value = current_value + ?, version = version + 1 "</span> +
        <span class="hljs-string">"WHERE biz_type = ? AND version = ?"</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> SELECT_SQL = 
        <span class="hljs-string">"SELECT current_value, step, version FROM id_segments WHERE biz_type = ?"</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> INSERT_SQL = 
        <span class="hljs-string">"INSERT INTO id_segments(biz_type, current_value, step, version) VALUES (?, ?, ?, 1) "</span> +
        <span class="hljs-string">"ON DUPLICATE KEY UPDATE current_value = VALUES(current_value)"</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DatabaseSegmentIdGenerator</span><span class="hljs-params">(JdbcTemplate jdbcTemplate)</span> </span>{
        <span class="hljs-keyword">this</span>.jdbcTemplate = jdbcTemplate;
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®åº“è·å–å·æ®µï¼ˆä¹è§‚é”å®ç°ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IdSegment <span class="hljs-title">getSegment</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) { <span class="hljs-comment">// ä¹è§‚é”é‡è¯•</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æŸ¥è¯¢å½“å‰å·æ®µä¿¡æ¯</span>
                List&lt;IdSegment&gt; segments = jdbcTemplate.<span class="hljs-built_in">query</span>(SELECT_SQL, 
                    <span class="hljs-keyword">new</span> Object[]{idType.<span class="hljs-built_in">getBizType</span>()}, 
                    (rs, rowNum) -&gt; {
                        IdSegment segment = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdSegment</span>();
                        segment.<span class="hljs-built_in">setCurrent</span>(rs.<span class="hljs-built_in">getLong</span>(<span class="hljs-string">"current_value"</span>));
                        segment.<span class="hljs-built_in">setStep</span>(rs.<span class="hljs-built_in">getInt</span>(<span class="hljs-string">"step"</span>));
                        segment.<span class="hljs-built_in">setVersion</span>(rs.<span class="hljs-built_in">getLong</span>(<span class="hljs-string">"version"</span>));
                        segment.<span class="hljs-built_in">setIdType</span>(idType);
                        <span class="hljs-keyword">return</span> segment;
                    });
                
                <span class="hljs-keyword">if</span> (segments.<span class="hljs-built_in">isEmpty</span>()) {
                    <span class="hljs-comment">// åˆå§‹åŒ–å·æ®µ</span>
                    <span class="hljs-built_in">initializeSegment</span>(idType, step);
                    <span class="hljs-keyword">continue</span>;
                }
                
                IdSegment segment = segments.<span class="hljs-built_in">get</span>(<span class="hljs-number">0</span>);
                <span class="hljs-type">long</span> oldVersion = segment.<span class="hljs-built_in">getVersion</span>();
                <span class="hljs-type">long</span> newCurrent = segment.<span class="hljs-built_in">getCurrent</span>() + step;
                
                <span class="hljs-comment">// ä¹è§‚é”æ›´æ–°</span>
                <span class="hljs-type">int</span> updated = jdbcTemplate.<span class="hljs-built_in">update</span>(UPDATE_SQL, step, idType.<span class="hljs-built_in">getBizType</span>(), oldVersion);
                
                <span class="hljs-keyword">if</span> (updated &gt; <span class="hljs-number">0</span>) {
                    segment.<span class="hljs-built_in">setCurrent</span>(segment.<span class="hljs-built_in">getCurrent</span>());
                    segment.<span class="hljs-built_in">setMax</span>(newCurrent - <span class="hljs-number">1</span>);
                    <span class="hljs-keyword">return</span> segment;
                }
                
            } <span class="hljs-built_in">catch</span> (Exception e) {
                log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"è·å–æ•°æ®åº“å·æ®µå¤±è´¥ï¼Œé‡è¯•æ¬¡æ•°: {}"</span>, i + <span class="hljs-number">1</span>, e);
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"æ•°æ®åº“å·æ®µè·å–å¤±è´¥"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">initializeSegment</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> </span>{
        <span class="hljs-keyword">try</span> {
            jdbcTemplate.<span class="hljs-built_in">update</span>(INSERT_SQL, idType.<span class="hljs-built_in">getBizType</span>(), step, step);
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">warn</span>(<span class="hljs-string">"åˆå§‹åŒ–å·æ®µå¤±è´¥ï¼Œå¯èƒ½å·²å­˜åœ¨: {}"</span>, idType, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-12">3.7 ç»Ÿä¸€IDç”ŸæˆæœåŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç»Ÿä¸€IDç”ŸæˆæœåŠ¡ï¼ˆæ”¯æŒå¤šæ¨¡å¼åˆ‡æ¢å’Œé™çº§ï¼‰
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnifiedIdGeneratorService</span> {
    
    <span class="hljs-comment">// ç”Ÿæˆæ¨¡å¼æšä¸¾</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">GenerateMode</span> {
        LOCAL, REDIS, DATABASE
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SnowflakeIdGenerator snowflakeGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisSegmentIdGenerator redisGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DatabaseSegmentIdGenerator databaseGenerator;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">GenerateMode</span> <span class="hljs-variable">currentMode</span> <span class="hljs-operator">=</span> GenerateMode.REDIS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">modeSwitchCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnifiedIdGeneratorService</span><span class="hljs-params">(
            SnowflakeIdGenerator snowflakeGenerator,
            RedisSegmentIdGenerator redisGenerator,
            DatabaseSegmentIdGenerator databaseGenerator,
            <span class="hljs-meta">@Value("${id-generator.mode:redis}")</span> String configMode)</span> {
        
        <span class="hljs-built_in">this</span>.snowflakeGenerator = snowflakeGenerator;
        <span class="hljs-built_in">this</span>.redisGenerator = redisGenerator;
        <span class="hljs-built_in">this</span>.databaseGenerator = databaseGenerator;
        <span class="hljs-built_in">this</span>.currentMode = parseMode(configMode);
        
        log.info(<span class="hljs-string">"IDç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆï¼Œå½“å‰æ¨¡å¼: {}"</span>, currentMode);
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆè‡ªåŠ¨é™çº§ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> IdResult <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> nextId(idType, currentMode, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-keyword">public</span> IdResult <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType, GenerateMode preferredMode, <span class="hljs-type">boolean</span> fallback)</span> {
        <span class="hljs-type">GenerateMode</span> <span class="hljs-variable">usedMode</span> <span class="hljs-operator">=</span> preferredMode;
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">switch</span> (preferredMode) {
                <span class="hljs-keyword">case</span> REDIS:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> redisGenerator.nextId(idType);
                        <span class="hljs-keyword">return</span> IdResult.success(result, <span class="hljs-string">"redis"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.warn(<span class="hljs-string">"Redisæ¨¡å¼ç”ŸæˆIDå¤±è´¥ï¼Œå°è¯•é™çº§"</span>, e);
                        <span class="hljs-keyword">if</span> (fallback) {
                            usedMode = GenerateMode.LOCAL;
                            <span class="hljs-keyword">return</span> nextId(idType, GenerateMode.LOCAL, <span class="hljs-literal">false</span>);
                        }
                        <span class="hljs-keyword">throw</span> e;
                    }
                    
                <span class="hljs-keyword">case</span> DATABASE:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-comment">// æ•°æ®åº“æ¨¡å¼å®ç°</span>
                        <span class="hljs-type">IdSegment</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> databaseGenerator.getSegment(idType, <span class="hljs-number">100</span>);
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> buildFinalId(segment.getAndIncrement(), idType);
                        <span class="hljs-keyword">return</span> IdResult.success(result, <span class="hljs-string">"database"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.warn(<span class="hljs-string">"æ•°æ®åº“æ¨¡å¼ç”ŸæˆIDå¤±è´¥ï¼Œå°è¯•é™çº§"</span>, e);
                        <span class="hljs-keyword">if</span> (fallback) {
                            usedMode = GenerateMode.LOCAL;
                            <span class="hljs-keyword">return</span> nextId(idType, GenerateMode.LOCAL, <span class="hljs-literal">false</span>);
                        }
                        <span class="hljs-keyword">throw</span> e;
                    }
                    
                <span class="hljs-keyword">case</span> LOCAL:
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> snowflakeGenerator.nextId();
                        <span class="hljs-keyword">return</span> IdResult.success(buildFinalId(result, idType), <span class="hljs-string">"local"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.error(<span class="hljs-string">"æ‰€æœ‰IDç”Ÿæˆæ¨¡å¼å‡å¤±è´¥"</span>, e);
                        <span class="hljs-keyword">return</span> IdResult.fail(<span class="hljs-string">"IDç”ŸæˆæœåŠ¡ä¸å¯ç”¨: "</span> + e.getMessage());
                    }
            }
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">100</span>) {
                log.warn(<span class="hljs-string">"IDç”Ÿæˆè€—æ—¶è¿‡é•¿: {}ms, mode: {}"</span>, cost, usedMode);
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”ŸæˆID
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Long&gt; <span class="hljs-title function_">batchNextId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">if</span> (count &lt;= <span class="hljs-number">0</span> || count &gt; <span class="hljs-number">10000</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ‰¹é‡ç”Ÿæˆæ•°é‡å¿…é¡»åœ¨1-10000ä¹‹é—´"</span>);
        }
        
        List&lt;Long&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(count);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-type">IdResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> nextId(idType);
            <span class="hljs-keyword">if</span> (result.isSuccess()) {
                results.add(result.getId());
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ‰¹é‡ç”ŸæˆIDå¤±è´¥: "</span> + result.getMessage());
            }
        }
        <span class="hljs-keyword">return</span> results;
    }
    
    <span class="hljs-comment">/**
     * åˆ‡æ¢ç”Ÿæˆæ¨¡å¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">switchMode</span><span class="hljs-params">(GenerateMode newMode)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.currentMode != newMode) {
            <span class="hljs-built_in">this</span>.currentMode = newMode;
            modeSwitchCount.incrementAndGet();
            log.info(<span class="hljs-string">"IDç”Ÿæˆæ¨¡å¼å·²åˆ‡æ¢: {}"</span>, newMode);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">buildFinalId</span><span class="hljs-params">(<span class="hljs-type">long</span> baseId, IdType idType)</span> {
        <span class="hljs-comment">// ç»Ÿä¸€IDæ ¼å¼ï¼šä¸šåŠ¡ç±»å‹(8ä½) + åŸºç¡€ID(56ä½)</span>
        <span class="hljs-keyword">return</span> ((<span class="hljs-type">long</span>) idType.getBizType() &lt;&lt; <span class="hljs-number">56</span>) | (baseId &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>);
    }
    
    <span class="hljs-keyword">private</span> GenerateMode <span class="hljs-title function_">parseMode</span><span class="hljs-params">(String modeStr)</span> {
        <span class="hljs-keyword">switch</span> (modeStr.toLowerCase()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"local"</span>: <span class="hljs-keyword">return</span> GenerateMode.LOCAL;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"redis"</span>: <span class="hljs-keyword">return</span> GenerateMode.REDIS;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"db"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"database"</span>: <span class="hljs-keyword">return</span> GenerateMode.DATABASE;
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> GenerateMode.REDIS;
        }
    }
    
    <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getStatus</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; status = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        status.put(<span class="hljs-string">"currentMode"</span>, currentMode);
        status.put(<span class="hljs-string">"modeSwitchCount"</span>, modeSwitchCount.get());
        status.put(<span class="hljs-string">"snowflakeGenerateCount"</span>, snowflakeGenerator.getGenerateCount());
        
        <span class="hljs-keyword">try</span> {
            status.put(<span class="hljs-string">"redisMetrics"</span>, redisGenerator.getMetrics());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            status.put(<span class="hljs-string">"redisMetrics"</span>, <span class="hljs-string">"è·å–å¤±è´¥: "</span> + e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> status;
    }
}
</code></pre>
<h3 data-id="heading-13">3.8 RESTful API æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * IDç”ŸæˆHTTPæ¥å£
 */</span>
<span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api/id"</span>)
<span class="hljs-variable">@Slf4j</span>
public class IdGeneratorController {
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span> <span class="hljs-selector-tag">idGenerator</span>;
    
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">IdGeneratorController</span>(UnifiedIdGeneratorService idGenerator) {
        <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.idGenerator</span> = <span class="hljs-selector-tag">idGenerator</span>;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå•ä¸ªID
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/generate"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">generateId</span>(
            <span class="hljs-variable">@RequestParam</span> String type,
            <span class="hljs-variable">@RequestParam</span>(required = false) String mode) {
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">IdType</span> <span class="hljs-selector-tag">idType</span> = <span class="hljs-selector-tag">IdType</span><span class="hljs-selector-class">.getByCode</span>(type.<span class="hljs-built_in">toUpperCase</span>());
            <span class="hljs-selector-tag">if</span> (idType == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„IDç±»å‹: "</span> + type));
            }
            
            <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">generateMode</span> = 
                <span class="hljs-selector-tag">parseMode</span>(mode, UnifiedIdGeneratorService.GenerateMode.REDIS);
            
            <span class="hljs-selector-tag">IdResult</span> <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.nextId</span>(idType, generateMode, true);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, result.<span class="hljs-built_in">isSuccess</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"id"</span>, result.<span class="hljs-built_in">getId</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"mode"</span>, result.<span class="hljs-built_in">getMode</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, result.<span class="hljs-built_in">getTimestamp</span>());
            
            <span class="hljs-selector-tag">if</span> (!result.<span class="hljs-built_in">isSuccess</span>()) {
                <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"message"</span>, result.<span class="hljs-built_in">getMessage</span>());
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">503</span>)<span class="hljs-selector-class">.body</span>(response);
            }
            
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">"IDç”ŸæˆæˆåŠŸ: type={}, id={}, mode={}"</span>, type, result.<span class="hljs-built_in">getId</span>(), result.<span class="hljs-built_in">getMode</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"IDç”Ÿæˆå¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æœåŠ¡å†…éƒ¨é”™è¯¯: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”ŸæˆID
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/batch-generate"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">batchGenerateId</span>(
            <span class="hljs-variable">@RequestParam</span> String type,
            <span class="hljs-variable">@RequestParam</span>(defaultValue = <span class="hljs-string">"10"</span>) int count) {
        
        <span class="hljs-selector-tag">if</span> (count &lt; <span class="hljs-number">1</span> || count &gt; <span class="hljs-number">1000</span>) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æ•°é‡å¿…é¡»åœ¨1-1000ä¹‹é—´"</span>));
        }
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">IdType</span> <span class="hljs-selector-tag">idType</span> = <span class="hljs-selector-tag">IdType</span><span class="hljs-selector-class">.getByCode</span>(type.<span class="hljs-built_in">toUpperCase</span>());
            <span class="hljs-selector-tag">if</span> (idType == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„IDç±»å‹: "</span> + type));
            }
            
            <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Long</span>&gt; <span class="hljs-selector-tag">ids</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.batchNextId</span>(idType, count);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"ids"</span>, ids);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"count"</span>, ids.<span class="hljs-built_in">size</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ‰¹é‡IDç”ŸæˆæˆåŠŸ: type={}, count={}"</span>, type, count);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ‰¹é‡IDç”Ÿæˆå¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æ‰¹é‡ç”Ÿæˆå¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æœåŠ¡çŠ¶æ€
     */</span>
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/status"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">getStatus</span>() {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">status</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.getStatus</span>();
            <span class="hljs-selector-tag">status</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">status</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(status);
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"è·å–çŠ¶æ€å¤±è´¥"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"è·å–çŠ¶æ€å¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ‡æ¢ç”Ÿæˆæ¨¡å¼ï¼ˆç®¡ç†æ¥å£ï¼‰
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/mode"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">switchMode</span>(
            <span class="hljs-variable">@RequestParam</span> String mode,
            <span class="hljs-variable">@RequestHeader</span>(value = <span class="hljs-string">"Authorization"</span>, required = false) String auth) {
        
        <span class="hljs-comment">// ç®€å•çš„è®¤è¯æ£€æŸ¥ï¼ˆç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨Spring Securityï¼‰</span>
        <span class="hljs-selector-tag">if</span> (!<span class="hljs-built_in">isAuthorized</span>(auth)) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">401</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æœªæˆæƒæ“ä½œ"</span>));
        }
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">newMode</span> = <span class="hljs-selector-tag">parseMode</span>(mode, null);
            <span class="hljs-selector-tag">if</span> (newMode == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„ç”Ÿæˆæ¨¡å¼: "</span> + mode));
            }
            
            <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">switched</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.switchMode</span>(newMode);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"switched"</span>, switched);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"newMode"</span>, newMode);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"åˆ‡æ¢æ¨¡å¼å¤±è´¥"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"åˆ‡æ¢æ¨¡å¼å¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">parseMode</span>(String modeStr, 
                                                            UnifiedIdGeneratorService.GenerateMode defaultMode) {
        <span class="hljs-selector-tag">if</span> (modeStr == null) <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">defaultMode</span>;
        
        <span class="hljs-selector-tag">switch</span> (modeStr.<span class="hljs-built_in">toLowerCase</span>()) {
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">local</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.LOCAL</span>;
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">redis</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.REDIS</span>;
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">db</span>": <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">database</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.DATABASE</span>;
            <span class="hljs-selector-tag">default</span>: <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">defaultMode</span>;
        }
    }
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">isAuthorized</span>(String auth) {
        <span class="hljs-comment">// ç®€åŒ–å®ç°ï¼Œç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨å®Œæ•´çš„è®¤è¯æˆæƒ</span>
        <span class="hljs-selector-tag">return</span> "<span class="hljs-selector-tag">Bearer</span> <span class="hljs-selector-tag">admin-token</span>"<span class="hljs-selector-class">.equals</span>(auth) || "<span class="hljs-selector-tag">admin</span>"<span class="hljs-selector-class">.equals</span>(auth);
    }
}
</code></pre>
<h3 data-id="heading-14">3.9 å¥åº·æ£€æŸ¥ç«¯ç‚¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼ˆæ£€æŸ¥Redisã€æ•°æ®åº“è¿æ¥çŠ¶æ€ï¼‰
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdGeneratorHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> {
    
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">UnifiedIdGeneratorService</span> idGenerator;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">IdGeneratorHealthIndicator</span>(
            <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate,
            <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate,
            <span class="hljs-title class_">UnifiedIdGeneratorService</span> idGenerator) {
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">redisTemplate</span> = redisTemplate;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">jdbcTemplate</span> = jdbcTemplate;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">idGenerator</span> = idGenerator;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Health</span> <span class="hljs-title function_">health</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; details = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-built_in">boolean</span> redisHealthy = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">boolean</span> dbHealthy = <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">// æ£€æŸ¥Redisè¿æ¥</span>
        <span class="hljs-keyword">try</span> {
            redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">get</span>(<span class="hljs-string">"health-check"</span>);
            redisHealthy = <span class="hljs-literal">true</span>;
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"redis"</span>, <span class="hljs-string">"UP"</span>);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"redis"</span>, <span class="hljs-string">"DOWN - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ•°æ®åº“è¿æ¥</span>
        <span class="hljs-keyword">try</span> {
            jdbcTemplate.<span class="hljs-title function_">queryForObject</span>(<span class="hljs-string">"SELECT 1"</span>, <span class="hljs-title class_">Integer</span>.<span class="hljs-property">class</span>);
            dbHealthy = <span class="hljs-literal">true</span>;
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"database"</span>, <span class="hljs-string">"UP"</span>);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"database"</span>, <span class="hljs-string">"DOWN - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// è·å–ç”Ÿæˆå™¨çŠ¶æ€</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; status = idGenerator.<span class="hljs-title function_">getStatus</span>();
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"generatorStatus"</span>, status);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"generatorStatus"</span>, <span class="hljs-string">"ERROR - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// ç»¼åˆå¥åº·çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (redisHealthy &amp;&amp; dbHealthy) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Health</span>.<span class="hljs-title function_">up</span>().<span class="hljs-title function_">withDetails</span>(details).<span class="hljs-title function_">build</span>();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Health</span>.<span class="hljs-title function_">down</span>().<span class="hljs-title function_">withDetails</span>(details).<span class="hljs-title function_">build</span>();
        }
    }
}
</code></pre>
<h2 data-id="heading-15">å››ã€ç§’æ€ä¸šåŠ¡é›†æˆç¤ºä¾‹</h2>
<h3 data-id="heading-16">4.1 ç§’æ€æœåŠ¡é›†æˆå‘å·å™¨</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ç§’æ€æœåŠ¡ - é›†æˆå‘å·å™¨ç¤ºä¾‹
 */</span>
@Service
@Slf4j
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UnifiedIdGeneratorService idGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SeckillService</span><span class="hljs-params">(UnifiedIdGeneratorService idGenerator, 
                         RestTemplate restTemplate)</span> </span>{
        <span class="hljs-keyword">this</span>.idGenerator = idGenerator;
        <span class="hljs-keyword">this</span>.restTemplate = restTemplate;
    }
    
    <span class="hljs-comment">/**
     * ç§’æ€ä¸‹å•æµç¨‹
     */</span>
    @<span class="hljs-function">Transactional
    <span class="hljs-keyword">public</span> SeckillResult <span class="hljs-title">placeOrder</span><span class="hljs-params">(SeckillRequest request)</span> </span>{
        <span class="hljs-type">long</span> startTime = System.<span class="hljs-built_in">currentTimeMillis</span>();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-built_in">validateRequest</span>(request);
            
            <span class="hljs-comment">// 2. ç”Ÿæˆå”¯ä¸€è®¢å•IDï¼ˆä½¿ç”¨å‘å·å™¨ï¼‰</span>
            IdResult idResult = idGenerator.<span class="hljs-built_in">nextId</span>(IdType.ORDER);
            <span class="hljs-keyword">if</span> (!idResult.<span class="hljs-built_in">isSuccess</span>()) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·é‡è¯•"</span>);
            }
            
            <span class="hljs-type">long</span> orderId = idResult.<span class="hljs-built_in">getId</span>();
            log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ç”Ÿæˆè®¢å•IDæˆåŠŸ: {}"</span>, orderId);
            
            <span class="hljs-comment">// 3. æ£€æŸ¥åº“å­˜ï¼ˆRedisåŸå­æ“ä½œï¼‰</span>
            <span class="hljs-type">boolean</span> hasStock = <span class="hljs-built_in">checkStock</span>(request.<span class="hljs-built_in">getProductId</span>(), request.<span class="hljs-built_in">getQuantity</span>());
            <span class="hljs-keyword">if</span> (!hasStock) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>);
            }
            
            <span class="hljs-comment">// 4. æ‰£å‡åº“å­˜</span>
            <span class="hljs-type">boolean</span> deductSuccess = <span class="hljs-built_in">deductStock</span>(request.<span class="hljs-built_in">getProductId</span>(), request.<span class="hljs-built_in">getQuantity</span>());
            <span class="hljs-keyword">if</span> (!deductSuccess) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å¤±è´¥"</span>);
            }
            
            <span class="hljs-comment">// 5. åˆ›å»ºè®¢å•</span>
            Order order = <span class="hljs-built_in">createOrder</span>(orderId, request);
            
            <span class="hljs-comment">// 6. å‘é€è®¢å•åˆ›å»ºæ¶ˆæ¯</span>
            <span class="hljs-built_in">sendOrderMessage</span>(order);
            
            <span class="hljs-type">long</span> costTime = System.<span class="hljs-built_in">currentTimeMillis</span>() - startTime;
            log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ç§’æ€ä¸‹å•æˆåŠŸï¼Œè®¢å•ID: {}, è€—æ—¶: {}ms"</span>, orderId, costTime);
            
            <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">success</span>(order);
            
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ç§’æ€ä¸‹å•å¼‚å¸¸"</span>, e);
            <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸: "</span> + e.<span class="hljs-built_in">getMessage</span>());
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”Ÿæˆç§’æ€èµ„æ ¼ä»¤ç‰Œ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-title">generateSeckillTokens</span><span class="hljs-params">(<span class="hljs-type">String</span> activityId, <span class="hljs-type">int</span> count)</span> </span>{
        <span class="hljs-keyword">try</span> {
            List&lt;Long&gt; tokenIds = idGenerator.<span class="hljs-built_in">batchNextId</span>(IdType.SECKILL, count);
            
            <span class="hljs-keyword">return</span> tokenIds.<span class="hljs-built_in">stream</span>()
                .<span class="hljs-built_in">map</span>(id -&gt; <span class="hljs-built_in">buildToken</span>(activityId, id))
                .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>());
                
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ç”Ÿæˆç§’æ€ä»¤ç‰Œå¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"ç”Ÿæˆç§’æ€ä»¤ç‰Œå¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-title">buildToken</span><span class="hljs-params">(<span class="hljs-type">String</span> activityId, <span class="hljs-type">long</span> tokenId)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>.format(<span class="hljs-string">"SECKILL_%s_%d"</span>, activityId, tokenId);
    }
    
    <span class="hljs-comment">// å…¶ä»–è¾…åŠ©æ–¹æ³•...</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">validateRequest</span><span class="hljs-params">(SeckillRequest request)</span> </span>{
        <span class="hljs-keyword">if</span> (request.<span class="hljs-built_in">getQuantity</span>() &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"è´­ä¹°æ•°é‡å¿…é¡»å¤§äº0"</span>);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title">checkStock</span><span class="hljs-params">(<span class="hljs-type">String</span> productId, <span class="hljs-type">int</span> quantity)</span> </span>{
        <span class="hljs-comment">// RedisåŸå­æ“ä½œæ£€æŸ¥åº“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç®€åŒ–å®ç°</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title">deductStock</span><span class="hljs-params">(<span class="hljs-type">String</span> productId, <span class="hljs-type">int</span> quantity)</span> </span>{
        <span class="hljs-comment">// RedisåŸå­æ“ä½œæ‰£å‡åº“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç®€åŒ–å®ç°</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> Order <span class="hljs-title">createOrder</span><span class="hljs-params">(<span class="hljs-type">long</span> orderId, SeckillRequest request)</span> </span>{
        Order order = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Order</span>();
        order.<span class="hljs-built_in">setId</span>(orderId);
        <span class="hljs-comment">// è®¾ç½®å…¶ä»–è®¢å•å±æ€§</span>
        <span class="hljs-keyword">return</span> order;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">sendOrderMessage</span><span class="hljs-params">(Order order)</span> </span>{
        <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—</span>
    }
}
</code></pre>
<h2 data-id="heading-17">äº”ã€æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-18">5.1 å‹åŠ›æµ‹è¯•é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">/**
 * å‘å·å™¨æ€§èƒ½æµ‹è¯•
 */
@SpringBootTest
@Slf4j
public class IdGeneratorPerformanceTest {
    
    @Autowired
    private UnifiedIdGeneratorService idGenerator<span class="hljs-comment">;</span>
    
    private final ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
    
    @Test
    public void testPerformance() throws InterruptedException {
        int <span class="hljs-attr">threadCount</span> = <span class="hljs-number">50</span><span class="hljs-comment">;</span>
        int <span class="hljs-attr">requestsPerThread</span> = <span class="hljs-number">2000</span><span class="hljs-comment">;</span>
        CountDownLatch <span class="hljs-attr">latch</span> = new CountDownLatch(threadCount)<span class="hljs-comment">;</span>
        
        AtomicLong <span class="hljs-attr">successCount</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        AtomicLong <span class="hljs-attr">failCount</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        AtomicLong <span class="hljs-attr">totalTime</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        
        long <span class="hljs-attr">startTime</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; threadCount; i++) {</span>
            executor.submit(() -&gt; {
                try {
                    for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; requestsPerThread; j++) {</span>
                        long <span class="hljs-attr">requestStart</span> = System.nanoTime()<span class="hljs-comment">;</span>
                        
                        try {
                            IdResult <span class="hljs-attr">result</span> = idGenerator.nextId(IdType.ORDER)<span class="hljs-comment">;</span>
                            if (result.isSuccess()) {
                                successCount.incrementAndGet()<span class="hljs-comment">;</span>
                            } else {
                                failCount.incrementAndGet()<span class="hljs-comment">;</span>
                            }
                        } catch (Exception e) {
                            failCount.incrementAndGet()<span class="hljs-comment">;</span>
                        }
                        
                        long <span class="hljs-attr">cost</span> = System.nanoTime() - requestStart<span class="hljs-comment">;</span>
                        totalTime.addAndGet(cost)<span class="hljs-comment">;</span>
                    }
                } finally {
                    latch.countDown()<span class="hljs-comment">;</span>
                }
            })<span class="hljs-comment">;</span>
        }
        
        latch.await()<span class="hljs-comment">;</span>
        long <span class="hljs-attr">totalCost</span> = System.currentTimeMillis() - startTime<span class="hljs-comment">;</span>
        
        long <span class="hljs-attr">totalRequests</span> = threadCount * requestsPerThread<span class="hljs-comment">;</span>
        long <span class="hljs-attr">tps</span> = totalRequests * <span class="hljs-number">1000</span>L / totalCost<span class="hljs-comment">;</span>
        double <span class="hljs-attr">avgTime</span> = totalTime.get() / (double) totalRequests / <span class="hljs-number">1000000.0</span><span class="hljs-comment">;</span>
        
        log.info("æ€§èƒ½æµ‹è¯•ç»“æœ:")<span class="hljs-comment">;</span>
        log.info("æ€»è¯·æ±‚æ•°: {}", totalRequests)<span class="hljs-comment">;</span>
        log.info("æˆåŠŸæ•°: {}", successCount.get())<span class="hljs-comment">;</span>
        log.info("å¤±è´¥æ•°: {}", failCount.get())<span class="hljs-comment">;</span>
        log.info("æ€»è€—æ—¶: {}ms", totalCost)<span class="hljs-comment">;</span>
        log.info("TPS: {}", tps)<span class="hljs-comment">;</span>
        log.info("å¹³å‡è€—æ—¶: {}ms", avgTime)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h2 data-id="heading-19">å…­ã€éƒ¨ç½²ä¸ç›‘æ§</h2>
<h3 data-id="heading-20">6.1 Docker éƒ¨ç½²é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash">FROM openjdk:8-jre-slim

<span class="hljs-comment"># å®‰è£…å¿…è¦çš„å·¥å…·</span>
RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \
    curl \
    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*

<span class="hljs-comment"># åˆ›å»ºåº”ç”¨ç”¨æˆ·</span>
RUN groupadd -r spring &amp;&amp; useradd -r -g spring spring

<span class="hljs-comment"># åˆ›å»ºåº”ç”¨ç›®å½•</span>
WORKDIR /app

<span class="hljs-comment"># å¤åˆ¶JARæ–‡ä»¶</span>
COPY target/id-generator-service-1.0.0.jar app.jar

<span class="hljs-comment"># è®¾ç½®æƒé™</span>
RUN <span class="hljs-built_in">chown</span> -R spring:spring /app
USER spring

<span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
HEALTHCHECK --interval=30s --<span class="hljs-built_in">timeout</span>=3s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:8081/actuator/health || <span class="hljs-built_in">exit</span> 1

<span class="hljs-comment"># å¯åŠ¨åº”ç”¨</span>
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"app.jar"</span>]
</code></pre>
<h3 data-id="heading-21">6.2 Prometheus ç›‘æ§é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus.yml</span>
<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'id-generator'</span>
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">'/actuator/prometheus'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'id-generator-service:8081'</span>]
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†å®ç°äº†åŸºäºSpringCloudçš„åˆ†å¸ƒå¼å‘å·å™¨ç³»ç»Ÿï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<h3 data-id="heading-23">7.1 æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šRediså·æ®µæ¨¡å¼æ”¯æŒ10ä¸‡+ TPS</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šå¤šçº§é™çº§ç­–ç•¥ï¼Œç¡®ä¿æœåŠ¡æ°¸è¿œå¯ç”¨</li>
<li><strong>æ˜“æ‰©å±•</strong>ï¼šæ°´å¹³æ‰©å±•ç®€å•ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²</li>
<li><strong>ä¸šåŠ¡å‹å¥½</strong>ï¼šæ”¯æŒå¤šç§ä¸šåŠ¡ç±»å‹ï¼ŒIDåŒ…å«ä¸šåŠ¡ä¿¡æ¯</li>
</ol>
<h3 data-id="heading-24">7.2 ç”Ÿäº§çº§ç‰¹æ€§</h3>
<ol>
<li><strong>ç›‘æ§å®Œå¤‡</strong>ï¼šå®Œæ•´çš„æŒ‡æ ‡ç›‘æ§å’Œå¥åº·æ£€æŸ¥</li>
<li><strong>å®¹é”™æœºåˆ¶</strong>ï¼šè‡ªåŠ¨é™çº§ã€é‡è¯•æœºåˆ¶ã€è¶…æ—¶æ§åˆ¶</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šæ”¯æŒæ¨¡å¼åˆ‡æ¢ã€æƒé™æ§åˆ¶</li>
<li><strong>è¿ç»´å‹å¥½</strong>ï¼šDockeråŒ–éƒ¨ç½²ã€é…ç½®å¤–éƒ¨åŒ–</li>
</ol>
<h3 data-id="heading-25">7.3 é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… ç”µå•†ç§’æ€ç³»ç»Ÿ</li>
<li>âœ… é‡‘èäº¤æ˜“ç³»ç»Ÿ</li>
<li>âœ… ç‰©æµè®¢å•ç³»ç»Ÿ</li>
<li>âœ… ç¤¾äº¤feedæµç³»ç»Ÿ</li>
</ul>
<p>è¿™å¥—å‘å·å™¨è§£å†³æ–¹æ¡ˆå·²ç»è¿‡ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ”¯æ’‘é«˜å¹¶å‘åœºæ™¯ä¸‹çš„IDç”Ÿæˆéœ€æ±‚ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®åŸºç¡€è®¾æ–½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter 3.38 çœŸçš„æ›´å¿«å—ï¼ŸåŸºå‡†æµ‹è¯•ä¸å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7576130918078578723</link>    <guid>https://juejin.cn/post/7576130918078578723</guid>    <pubDate>2025-11-25T01:52:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130918078578723" data-draft-id="7574685632096190491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter 3.38 çœŸçš„æ›´å¿«å—ï¼ŸåŸºå‡†æµ‹è¯•ä¸å¯¹æ¯”"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T01:52:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter 3.38 çœŸçš„æ›´å¿«å—ï¼ŸåŸºå‡†æµ‹è¯•ä¸å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:52:53.000Z" title="Tue Nov 25 2025 01:52:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å°†è¥é”€ç‚’ä½œä¸å¯è¡¡é‡çš„ç°å®åŒºåˆ†å¼€æ¥â€”â€”åŸºå‡†æµ‹è¯•å®é™…æ­ç¤ºäº† Flutter æœ€æ–°ç‰ˆæœ¬å“ªäº›ä¿¡æ¯</strong></p>
<p>Flutter 3.38 äº 2025 å¹´ 11 æœˆ 12 æ—¥å‘å¸ƒï¼ŒåŒ…å« 145 ä½è´¡çŒ®è€…çš„ 825+ æ¬¡æäº¤ã€‚å½“ç„¶ï¼Œæœ‰äº›æ–‡ç« å£°ç§°å®ƒä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„å·¨å¤§æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†å®é™…ä½“éªŒå¦‚ä½•å‘¢ï¼Ÿè¥é”€ç‚’ä½œå¯ä»¥å¤©é©¬è¡Œç©ºï¼Œä½†åœ¨å¯è¡¡é‡çš„ç°å®é¢å‰å´å¹¶éå¦‚æ­¤ã€‚</p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šOpenFlutterï¼Œæ„Ÿè°¢</p>
</blockquote>
<h2 data-id="heading-0">ğŸ—£ï¸ ç°å®æ£€éªŒï¼šåˆ«å…‰å¬å®£ä¼ ï¼</h2>
<p>Flutter 3.38 åˆ°åº•æœ‰æ²¡æœ‰å˜å¿«ï¼Ÿå®˜æ–¹æ–‡æ¡£æ²¡æŠŠæ€§èƒ½æå‡å½“æˆè¿™æ¬¡å‘å¸ƒä¼š<strong>ä¸»æ‰“çš„å–ç‚¹</strong>ã€‚</p>
<p>è·Ÿä»¥å‰çš„ç‰ˆæœ¬ä¸ä¸€æ ·ï¼š</p>
<ul>
<li><strong>Flutter 3.0</strong> ä¸»æ‰“æ¸²æŸ“ä¼˜åŒ–ï¼Œè®©ç•Œé¢è·‘å¾—æ›´å¿«ã€‚</li>
<li><strong>Flutter 3.7</strong> ä¸“æ³¨äºå†…å­˜ç®¡ç†ï¼Œè®© App å ç”¨æ›´å°ã€‚</li>
</ul>
<p><strong>è¿™æ¬¡ 3.38 ä¸»è¦å…³æ³¨çš„æ˜¯è¿™äº›æ–¹é¢ï¼š</strong></p>
<ul>
<li><strong>Dart 3.10 çš„â€œç‚¹â€è¯­æ³•ï¼š</strong> è®©ä»£ç å†™èµ·æ¥æ›´ç®€æ´ã€‚</li>
<li><strong>å°ç»„ä»¶é¢„è§ˆå™¨ï¼ˆWidget Previewerï¼‰åŠ é€Ÿï¼š</strong> è®©ä½ å¼€å‘ UI æ›´å¿«ã€‚</li>
<li><strong>ç³»ç»Ÿå…¼å®¹æ€§ï¼š</strong> æ”¯æŒæœ€æ–°çš„ iOS 18ï¼ˆUISceneï¼‰å’Œ Android çš„ 16KB é¡µé¢å¤§å°ã€‚</li>
<li><strong>é¢œè‰²å’Œè¦†ç›–å±‚ï¼š</strong> å¼•å…¥äº†å¹¿è‰²åŸŸæ”¯æŒå’Œ Overlay ç®¡ç†çš„ä¸€äº›é‡è¦å˜åŠ¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">ğŸ“Š å®é™…æ•°å­—åˆ°åº•è¯´æ˜äº†ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">ğŸ”§ ç¼–è¯‘æ€§èƒ½ (Build Performance)</h3>
<p>è™½ç„¶æœ‰äº›æ–‡ç« æåˆ°äº†æ„å»ºç³»ç»Ÿæœ‰æ”¹è¿›ï¼ˆä¸»è¦æ˜¯ Linux ä¸Šçš„ GTK æ¸²æŸ“ï¼‰ï¼Œ<strong>ä½†å®˜æ–¹æ²¡æœ‰æ­£å¼çš„åŸºå‡†æµ‹è¯•æ•°æ®</strong>ï¼Œæ¥è¯æ˜é‚£äº›â€œç¼–è¯‘é€Ÿåº¦å¿« 40%â€ä¹‹ç±»çš„è¯´æ³•æ˜¯çœŸçš„ã€‚</p>
<p><strong>å®é™…å¼€å‘è€…æµ‹è¯•ç»“æœï¼š</strong></p>
<ul>
<li>ä» 3.35 å‡çº§åˆ° 3.38 åï¼Œ<strong>é¦–æ¬¡å†·ç¼–è¯‘æ—¶é—´</strong>åŸºæœ¬æ²¡å·®ï¼ˆå·®å¼‚åœ¨ 5% ä»¥å†…ï¼‰ã€‚</li>
<li>**çƒ­é‡è½½ï¼ˆHot Reloadï¼‰<strong>å’Œ</strong>çƒ­é‡å¯ï¼ˆHot Restartï¼‰**çš„é€Ÿåº¦ä¹Ÿå·®ä¸å¤šã€‚</li>
</ul>
<h3 data-id="heading-3">ğŸƒ è¿è¡Œæ—¶æ€§èƒ½ (Runtime Performance)</h3>
<p>3.38 åœ¨åº•å±‚å¼•æ“ç¡®å®åšäº†ä¸€äº›ä¼˜åŒ–ï¼š</p>
<ul>
<li>æ”¹è¿›äº† <strong>Linux æ¡Œé¢åº”ç”¨çš„ GTK æ¸²æŸ“</strong>ã€‚</li>
<li>ä¼˜åŒ–äº† <strong>OpenGL çš„åˆæˆ</strong>ã€‚</li>
<li><strong>Impeller æ¸²æŸ“å¼•æ“</strong>ç»§ç»­åœ¨è¿›æ­¥ï¼ˆä½†è¿˜åœ¨å®Œå–„ä¸­ï¼‰ã€‚</li>
</ul>
<p><strong>å½±å“åˆ†æï¼š</strong> è¿™äº›æ”¹è¿›<strong>ä¸»è¦å¯¹ Linux æ¡Œé¢åº”ç”¨</strong>æœ‰å¸®åŠ©ã€‚å¯¹äºæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ Android å’Œ iOS æ‰‹æœºåº”ç”¨æ¥è¯´ï¼Œ<strong>è¿è¡Œé€Ÿåº¦çš„æå‡æ„Ÿå—ä¸æ˜æ˜¾</strong>ã€‚</p>
<h3 data-id="heading-4">ğŸ’¾ å†…å­˜ç®¡ç† (Memory Management)</h3>
<p>3.38 ä¿®å¤äº†ä¸€äº›å›¾ç‰‡åŠ è½½å’Œé‡Šæ”¾çš„ Bugï¼Œå¯ä»¥<strong>é˜²æ­¢æŸäº›åœºæ™¯ä¸‹çš„å†…å­˜æ³„æ¼</strong>ã€‚ä½† App åŸºç¡€çš„å†…å­˜å ç”¨é‡ï¼Œ<strong>å’Œä»¥å‰çš„ç‰ˆæœ¬æ˜¯æŒå¹³çš„</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ“ˆ çºµè§‚ Flutter æ€§èƒ½å˜åŒ–å²</h2>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ 3.38 åœ¨æ€§èƒ½ç³»åˆ—ä¸­çš„ä½ç½®ï¼š</p>
<ul>
<li><strong>Flutter 3.0 (2022 å¹´ 5 æœˆ)ï¼š</strong> å®£å¸ƒ Web æ¸²æŸ“æ€§èƒ½æå‡ï¼Œ<strong>FPS æå‡ 11%â€“28%</strong> ã€‚è¿™æ˜¯<strong>æœ€åä¸€æ¬¡â€œå¤§â€æ€§èƒ½ç‰ˆæœ¬</strong>ã€‚</li>
<li><strong>Flutter 3.7 (2023 å¹´ 1 æœˆ)ï¼š</strong> é€šè¿‡å†…å­˜ä¼˜åŒ–ï¼Œ<strong>App å ç”¨ä½“ç§¯å‡å°‘äº† 10%â€“15%</strong> ã€‚</li>
<li><strong>Flutter 3.10â€“3.35 ç³»åˆ—ï¼š</strong> ä¸»è¦æ˜¯<strong>æ€§èƒ½å¾®è°ƒ</strong>ã€ç¨³å®šæ€§å’Œ Bug ä¿®å¤ã€‚</li>
<li><strong>Flutter 3.38 (2025 å¹´ 11 æœˆ)ï¼š</strong> <strong>æ›´æ³¨é‡å¼€å‘è€…æ•ˆç‡å’Œå¹³å°é›†æˆ</strong>ï¼Œè€Œä¸æ˜¯è¿½æ±‚æ›´é«˜çš„åŸå§‹æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-6">âœ¨ çœŸæ­£é‡è¦çš„æ€§èƒ½æ”¹è¿›</h3>
<p>3.38 <strong>æ²¡æœ‰æ‰¿è¯º</strong>å¤§å¹…æé«˜è¿è¡Œé€Ÿåº¦ï¼Œä½†å®ƒå¢åŠ äº†ä¸€äº›<strong>å¯ä»¥é—´æ¥æå‡å¼€å‘ä½“éªŒ</strong>çš„åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>å°ç»„ä»¶é¢„è§ˆå™¨ï¼ˆWidget Previewerï¼‰å‡çº§ï¼š</strong> é€Ÿåº¦æ›´å¿«ï¼ŒåŠŸèƒ½æ›´å¤šã€‚ä½ <strong>å¯ä»¥ç¬é—´çœ‹åˆ° UI å˜åŒ–</strong>ï¼Œä¸éœ€è¦å®Œæ•´é‡æ–°ç¼–è¯‘ã€‚è¿™èƒ½<strong>èŠ‚çœå¤§é‡è¿­ä»£è®¾è®¡çš„æ—¶é—´</strong>ï¼</li>
<li><strong>â€œç‚¹â€è¯­æ³•ï¼ˆDot Shorthandï¼‰ï¼š</strong> Dart 3.10 å¼•å…¥çš„è¿™ä¸ªè¯­æ³•ï¼Œè®©å¸¸ç”¨ä»£ç çš„<strong>å†—ä½™åº¦å‡å°‘äº†å¤§çº¦ 20%</strong> ã€‚ä»£ç æ›´æ¸…æ™°ï¼Œè‡ªç„¶å°±<strong>æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤</strong>â€”â€”è¿™ä¹Ÿæ˜¯å¦ä¸€ç§å½¢å¼çš„â€œæ€§èƒ½â€æå‡ï¼</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Before</span>
Column(
  mainAxisAlignment: MainAxisAlignment.start,
  crossAxisAlignment: CrossAxisAlignment.center,
)

<span class="hljs-comment">// After (Flutter 3.38 + Dart 3.10)</span>
Column(
  mainAxisAlignment: .start,
  crossAxisAlignment: .center,
)
</code></pre>
<p><strong>3. å¹³å°ç¨³å®šæ€§</strong></p>
<p>ä¸ºäº†è®©åº”ç”¨èƒ½åœ¨æœ€æ–°çš„ <strong>iOS 18</strong> å’Œ <strong>Android</strong> è®¾å¤‡ä¸Šæ­£å¸¸è¿è¡Œï¼Œå‡å°‘å´©æºƒï¼Œå¹¶è¡¨ç°å¾—æ›´æµç•…â€”â€”<strong>å¯é æ€§æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æ€§èƒ½</strong>ã€‚</p>
<p><strong>åŸºå‡†æµ‹è¯•æ‚¨çš„åº”ç”¨</strong></p>
<p>æ‰€ä»¥ï¼Œé—®é¢˜æ¥äº†ï¼šFlutter 3.38 çœŸçš„ä¼˜åŒ–äº†æ‚¨çš„åº”ç”¨æ€§èƒ½å—ï¼Ÿä»¥ä¸‹æ˜¯è¡¡é‡æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">Benchmark frame rendering</span>
flutter run --profile --trace-skia
<span class="hljs-meta prompt_">
# </span><span class="bash">Measure app startup time</span>
flutter run --profile --trace-startup
<span class="hljs-meta prompt_">
# </span><span class="bash">Memory profiling</span>
flutter run --profile
<span class="hljs-meta prompt_"># </span><span class="bash">Then use DevTools Observatory</span>
</code></pre>
<p><strong>ä¿æŒä»£ç å’Œæµ‹è¯•æ¡ä»¶åœ¨ä¸åŒç‰ˆæœ¬é—´çš„æ’å®š</strong></p>
<p>åœ¨è¿è¡Œ Flutter 3.35ï¼ˆæˆ–æ‚¨ç°æœ‰çš„ç‰ˆæœ¬ï¼‰å’Œ 3.38 æ—¶ï¼Œ<strong>ä¿æŒä»£ç å’Œæµ‹è¯•æ¡ä»¶æ’å®šä¸å˜</strong>ï¼Œç„¶åå¯¹æ¯”ç»“æœã€‚</p>
<p><strong>ç»“è®º</strong></p>
<p>Flutter 3.38 æ›´å¿«å—ï¼Ÿ<strong>æ²¡æœ‰æˆå‰§æ€§çš„æå‡ï¼Œä½†å¯¹å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´è‚¯å®šæœ‰ä¸€ç‚¹ç‚¹</strong>ã€‚</p>
<ul>
<li><strong>Linux æ¡Œé¢åº”ç”¨ï¼š</strong> åœ¨æŸäº›æ¸²æŸ“åœºæ™¯ä¸­æœ‰æ‰€æ”¹è¿›ã€‚</li>
<li><strong>Android/iOS åº”ç”¨ï¼š</strong> åŸºæœ¬ä¸Šä¸ 3.35â€“3.37 <strong>ç›¸åŒ</strong>ã€‚</li>
<li><strong>Web åº”ç”¨ï¼š</strong> <strong>æ²¡æœ‰</strong>æ˜¾è‘—å˜åŒ–ã€‚</li>
<li><strong>å¼€å‘æµç¨‹ï¼š</strong> é€šè¿‡ <strong>Widget Previewer</strong> å’Œ<strong>ç®€æ´çš„è¯­æ³•</strong>å®ç°äº†â€œé¡µé¢ä¼˜å…ˆâ€çš„å¼€å‘ã€‚</li>
</ul>
<p>Flutter 3.38 æ˜¯ä¸€ä¸ª<strong>å¯é ã€å®Œå–„çš„ç‰ˆæœ¬</strong>ï¼Œå®ƒå°†<strong>å¼€å‘è€…ä½“éªŒ</strong>å’Œ<strong>å¹³å°å…¼å®¹æ€§</strong>ç½®äºçº¯ç²¹çš„æ€§èƒ½ä¹‹ä¸Šã€‚å¦‚æœæ‚¨æœŸæœ›æ€§èƒ½æœ‰ <strong>40% çš„é£è·ƒ</strong>ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šå¤±æœ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¿½æ±‚<strong>æ•´æ´çš„ä»£ç ã€æ›´å¥½çš„å·¥å…·</strong>æˆ–<strong>ç¨³å®šçš„å¹³å°æ”¯æŒ</strong>ï¼Œé‚£ä¹ˆæ‚¨ä¼šæ„Ÿåˆ°æ»¡æ„ã€‚</p>
<p><strong>æ‚¨åº”è¯¥å‡çº§å—ï¼Ÿ</strong></p>
<p><strong>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œè¯·å‡çº§ï¼š</strong></p>
<ul>
<li>éœ€è¦ <strong>iOS 18</strong> æˆ– <strong>Android ä¸Šçš„ 16KB é¡µé¢å¤§å°</strong>æ”¯æŒã€‚</li>
<li>éœ€è¦<strong>å¼€å‘è€…å·¥å…·çš„æ”¹è¿›</strong>ï¼ˆä¾‹å¦‚ Widget Previewerï¼‰ã€‚</li>
<li>æ‚¨æ­£åœ¨æ„å»º <strong>Linux æ¡Œé¢åº”ç”¨</strong>ã€‚</li>
</ul>
<p><strong>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œè¯·ç­‰å¾…ï¼š</strong></p>
<ul>
<li>æ‚¨ç›®å‰ä½¿ç”¨çš„ç¨³å®šç‰ˆæœ¬å¯¹æ‚¨æ¥è¯´è¿è¡Œè‰¯å¥½ã€‚</li>
<li><strong>æ€§èƒ½æ˜¯æ‚¨å”¯ä¸€çš„é¡¾è™‘</strong>ã€‚</li>
<li>æ‚¨ä½¿ç”¨çš„ <strong>API éœ€è¦è¿ç§»</strong>ï¼ˆéœ€è¦æ›´å¤šæ—¶é—´ï¼‰ã€‚</li>
</ul>
<p>Flutter å›¢é˜Ÿçš„å·¥ä½œä»åœ¨ç¨³æ­¥æ¨è¿›ä¸­ã€‚3.38 åœ¨æ€§èƒ½æ–¹é¢ç®—ä¸ä¸Šä¸€æ¬¡é©å‘½ï¼Œä½†å®ƒæ˜¯æ¡†æ¶å‘å±•è¿‡ç¨‹ä¸­å€¼å¾—ä¿¡èµ–çš„ä¸€æ­¥ã€‚æœ€å¥½çš„æ›´æ–°æœ‰æ—¶å°±æ˜¯é‚£äº›<strong>ä»…ä»…æ˜¯è®©ä¸€åˆ‡è¿è¡Œå¾—æ›´å¥½</strong>çš„æ›´æ–°ï¼Œå³ä¾¿è¿™äº›æ”¹è¿›ä¸è¶³ä»¥ç™»ä¸Šæ–°é—»å¤´æ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gitä¸å°å¿ƒè·Ÿè¸ªäº†é”™è¯¯çš„æ–‡ä»¶å¦‚ä½•å½»åº•ç§»é™¤]]></title>    <link>https://juejin.cn/post/7576223441713332267</link>    <guid>https://juejin.cn/post/7576223441713332267</guid>    <pubDate>2025-11-25T01:58:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576223441713332267" data-draft-id="7576223441713315883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gitä¸å°å¿ƒè·Ÿè¸ªäº†é”™è¯¯çš„æ–‡ä»¶å¦‚ä½•å½»åº•ç§»é™¤"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T01:58:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«è½¦å¼ä½"/> <meta itemprop="url" content="https://juejin.cn/user/1345457960792808"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gitä¸å°å¿ƒè·Ÿè¸ªäº†é”™è¯¯çš„æ–‡ä»¶å¦‚ä½•å½»åº•ç§»é™¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1345457960792808/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«è½¦å¼ä½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:58:47.000Z" title="Tue Nov 25 2025 01:58:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•å°†æ–‡ä»¶æˆ–ç›®å½•ä» Git è·Ÿè¸ªä¸­ç§»é™¤ï¼Œå°¤å…¶é€‚ç”¨äºæ¸…ç†ä¸å°å¿ƒè¢«æäº¤çš„ <code>node_modules</code> ç­‰ç›®å½•ã€‚</p>
<h2 data-id="heading-0">åœºæ™¯</h2>
<p>å½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ï¼Œéœ€è¦å–æ¶ˆæ–‡ä»¶/ç›®å½•çš„ Git è·Ÿè¸ªï¼š</p>
<ul>
<li><code>node_modules</code> ç›®å½•è¢«æ„å¤–æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶</li>
<li>ä¸´æ—¶æ–‡ä»¶æˆ–æ—¥å¿—æ–‡ä»¶è¢«æ·»åŠ åˆ°è·Ÿè¸ª</li>
<li>é…ç½®æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯éœ€è¦ä»ç‰ˆæœ¬æ§åˆ¶ä¸­ç§»é™¤</li>
<li>æƒ³è¦ä¿ç•™æœ¬åœ°æ–‡ä»¶ä½†ä¸å†è·Ÿè¸ªå…¶å˜æ›´</li>
</ul>
<h2 data-id="heading-1">æ“ä½œæ­¥éª¤</h2>
<h4 data-id="heading-2">1. æ£€æŸ¥å½“å‰çŠ¶æ€</h4>
<pre><code class="hljs language-bash" lang="bash">git status
</code></pre>
<p>æŸ¥çœ‹å“ªäº›æ–‡ä»¶è¢«æš‚å­˜æˆ–å·²ç»è·Ÿè¸ªã€‚</p>
<h4 data-id="heading-3">2. æ£€æŸ¥ .gitignore é…ç½®</h4>
<p>ç¡®ä¿è¦æ’é™¤çš„æ–‡ä»¶/ç›®å½•å·²ç»åœ¨ <code>.gitignore</code> ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> .gitignore
</code></pre>
<p>å¦‚æœæ²¡æœ‰ï¼Œè¯·æ·»åŠ ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ’é™¤ node_modules ç›®å½•</span>
node_modules/

<span class="hljs-comment"># æ’é™¤æ—¥å¿—æ–‡ä»¶</span>
*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># æ’é™¤ä¸´æ—¶æ–‡ä»¶</span>
.tmp/
cache/
</code></pre>
<h4 data-id="heading-4">3. ä»æš‚å­˜åŒºç§»é™¤æ–‡ä»¶ï¼ˆå¦‚æœå·²ç»æš‚å­˜ï¼‰</h4>
<p>å¦‚æœæ–‡ä»¶å·²ç»è¢«æ·»åŠ åˆ°æš‚å­˜åŒºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç§»é™¤å•ä¸ªæ–‡ä»¶</span>
git reset HEAD path/to/file

<span class="hljs-comment"># ç§»é™¤æ•´ä¸ªç›®å½•</span>
git reset HEAD path/to/directory/

<span class="hljs-comment"># ç§»é™¤æ‰€æœ‰ node_modules ç›¸å…³æ–‡ä»¶</span>
git reset HEAD node_modules/
</code></pre>
<h4 data-id="heading-5">4. ä» Git è·Ÿè¸ªä¸­ç§»é™¤æ–‡ä»¶</h4>
<p>ä½¿ç”¨ <code>git rm</code> å‘½ä»¤ä»ç‰ˆæœ¬æ§åˆ¶ä¸­ç§»é™¤æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ™®é€šç§»é™¤ï¼ˆä¼šåˆ é™¤æœ¬åœ°æ–‡ä»¶ï¼‰</span>
git <span class="hljs-built_in">rm</span> path/to/file

<span class="hljs-comment"># ç§»é™¤ç›®å½•</span>
git <span class="hljs-built_in">rm</span> -r path/to/directory/

<span class="hljs-comment"># æ¨èæ–¹å¼ï¼šä»è·Ÿè¸ªä¸­ç§»é™¤ä½†ä¿ç•™æœ¬åœ°æ–‡ä»¶ï¼ˆ--cached å‚æ•°ï¼‰</span>
git <span class="hljs-built_in">rm</span> --cached path/to/file
git <span class="hljs-built_in">rm</span> -r --cached path/to/directory/

<span class="hljs-comment"># å–æ¶ˆè·Ÿè¸ª node_modules ä½†ä¿ç•™æœ¬åœ°æ–‡ä»¶</span>
git <span class="hljs-built_in">rm</span> -r --cached node_modules/
</code></pre>
<h4 data-id="heading-6">5. éªŒè¯æ“ä½œç»“æœ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç›¸å…³æ–‡ä»¶è¢«è·Ÿè¸ª</span>
git ls-files | grep node_modules

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span>
git status
</code></pre>
<h4 data-id="heading-7">6. æäº¤å˜æ›´</h4>
<pre><code class="hljs language-bash" lang="bash">git add .gitignore  <span class="hljs-comment"># å¦‚æœä¿®æ”¹äº† .gitignore</span>
git commit -m <span class="hljs-string">"ç§»é™¤ node_modules çš„è·Ÿè¸ªï¼Œæ›´æ–° .gitignore"</span>
</code></pre>
<h2 data-id="heading-8">å¸¸ç”¨å‘½ä»¤æ€»ç»“</h2>






























<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>git reset HEAD &lt;file&gt;</code></td><td>ä»æš‚å­˜åŒºç§»é™¤æ–‡ä»¶</td></tr><tr><td><code>git rm --cached &lt;file&gt;</code></td><td>ä»è·Ÿè¸ªä¸­ç§»é™¤ä½†ä¿ç•™æœ¬åœ°æ–‡ä»¶</td></tr><tr><td><code>git rm &lt;file&gt;</code></td><td>ä»è·Ÿè¸ªä¸­ç§»é™¤å¹¶åˆ é™¤æœ¬åœ°æ–‡ä»¶</td></tr><tr><td>`git ls-files</td><td>grep `</td><td>æŸ¥çœ‹è¢«è·Ÿè¸ªçš„åŒ¹é…æ–‡ä»¶</td></tr><tr><td><code>git status</code></td><td>æŸ¥çœ‹å·¥ä½œåŒºçŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-9">æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>å¤‡ä»½é‡è¦æ–‡ä»¶</strong>ï¼šåœ¨æ‰§è¡Œç§»é™¤æ“ä½œå‰ï¼Œç¡®ä¿é‡è¦æ–‡ä»¶å·²å¤‡ä»½</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šç§»é™¤è·Ÿè¸ªåï¼Œå›¢é˜Ÿæˆå‘˜éœ€è¦æ‰§è¡Œ <code>git pull</code> å¹¶é‡æ–°ç”Ÿæˆè¢«æ’é™¤çš„æ–‡ä»¶</li>
<li><strong>.gitignore ä¼˜å…ˆçº§</strong>ï¼šç¡®ä¿å…ˆé…ç½®å¥½ .gitignore å†æ‰§è¡Œç§»é™¤æ“ä½œ</li>
<li><strong>æƒé™é—®é¢˜</strong>ï¼šæŸäº›æ–‡ä»¶å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½åˆ é™¤</li>
</ol>
<h2 data-id="heading-10">å®é™…æ¡ˆä¾‹ï¼šæ¸…ç† node_modules</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ£€æŸ¥çŠ¶æ€</span>
git status

<span class="hljs-comment"># 2. ç¡®è®¤ .gitignore åŒ…å« node_modules</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"node_modules/"</span> &gt;&gt; .gitignore

<span class="hljs-comment"># 3. ä»æš‚å­˜åŒºç§»é™¤ï¼ˆå¦‚æœæœ‰ï¼‰</span>
git reset HEAD node_modules/

<span class="hljs-comment"># 4. ä»è·Ÿè¸ªä¸­ç§»é™¤ä½†ä¿ç•™æœ¬åœ°æ–‡ä»¶</span>
git <span class="hljs-built_in">rm</span> -r --cached node_modules/

<span class="hljs-comment"># 5. éªŒè¯ç»“æœ</span>
git ls-files | grep node_modules  <span class="hljs-comment"># åº”è¯¥æ²¡æœ‰è¾“å‡º</span>

<span class="hljs-comment"># 6. æäº¤å˜æ›´</span>
git add .gitignore
git commit -m <span class="hljs-string">"ç§»é™¤ node_modules çš„è·Ÿè¸ª"</span>
</code></pre>
<p>å®Œæˆè¿™äº›æ­¥éª¤åï¼Œ<code>node_modules</code> ç›®å½•å°±ä¸ä¼šå†è¢« Git è·Ÿè¸ªï¼Œä½†æœ¬åœ°æ–‡ä»¶ä¼šä¿ç•™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#ä»æ•°ç»„åˆ°é›†åˆçš„æ¼”è¿›ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7576141849431080987</link>    <guid>https://juejin.cn/post/7576141849431080987</guid>    <pubDate>2025-11-25T01:54:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576141849431080987" data-draft-id="7573978809364774912" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#ä»æ•°ç»„åˆ°é›†åˆçš„æ¼”è¿›ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,C#"/> <meta itemprop="datePublished" content="2025-11-25T01:54:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#ä»æ•°ç»„åˆ°é›†åˆçš„æ¼”è¿›ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:54:34.000Z" title="Tue Nov 25 2025 01:54:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ æ•°ç»„ (Array)</h2>
<p>æ•°ç»„æ˜¯C#ä¸­æœ€åŸºç¡€ã€æœ€åŸå§‹çš„æ•°æ®é›†åˆå½¢å¼ã€‚ç†è§£å®ƒï¼Œæ˜¯ç†è§£æ‰€æœ‰é«˜çº§é›†åˆçš„èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-1">1. æ•°ç»„çš„æœ¬è´¨ï¼šè¿ç»­çš„å†…å­˜ç©ºé—´</h3>
<p>å½“ä½ å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚ <code>int[] numbers = new int[5];</code>ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­è¯·æ±‚äº†ä¸€å—<strong>è¿ç»­çš„ã€æœªè¢«åˆ†å‰²çš„</strong>ç©ºé—´ï¼Œå…¶å¤§å°è¶³ä»¥å­˜æ”¾5ä¸ª<code>int</code>ç±»å‹çš„æ•°æ®ã€‚</p>
<ul>
<li><strong>è¿ç»­æ€§ (Contiguous)</strong>ï¼šè¿™æ˜¯æ•°ç»„æœ€é‡è¦çš„ç‰¹æ€§ã€‚æ•°æ®è‚©å¹¶è‚©åœ°å­˜å‚¨åœ¨ä¸€èµ·ï¼Œå°±åƒä¸€æ’æœ‰ç¼–å·çš„åœè½¦ä½ã€‚</li>
<li><strong>å›ºå®šå¤§å° (Fixed-Size)</strong>ï¼šä¸€æ—¦æ•°ç»„è¢«åˆ›å»ºï¼Œå…¶å¤§å°å°±ä¸èƒ½å†æ”¹å˜ã€‚ä½ ä¸èƒ½è®©ä¸€ä¸ªé•¿åº¦ä¸º5çš„æ•°ç»„çªç„¶å®¹çº³ç¬¬6ä¸ªå…ƒç´ ã€‚</li>
<li><strong>ç±»å‹ç»Ÿä¸€ (Homogeneous)</strong>ï¼šä¸€ä¸ªæ•°ç»„åªèƒ½å­˜å‚¨ç›¸åŒç±»å‹çš„å…ƒç´ ã€‚</li>
</ul>
<h3 data-id="heading-2">2. æ•°ç»„çš„å£°æ˜ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. å£°æ˜å¹¶åˆå§‹åŒ–å¤§å°</span>
<span class="hljs-built_in">int</span>[] scores = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">5</span>]; <span class="hljs-comment">// åœ¨å†…å­˜ä¸­åˆ†é…äº†5ä¸ªintçš„ç©ºé—´ï¼Œé»˜è®¤å€¼ä¸º0</span>

<span class="hljs-comment">// 2. é€šè¿‡ç´¢å¼•è®¿é—® (ä»0å¼€å§‹)</span>
scores[<span class="hljs-number">0</span>] = <span class="hljs-number">95</span>;
scores[<span class="hljs-number">1</span>] = <span class="hljs-number">88</span>;
<span class="hljs-built_in">int</span> firstScore = scores[<span class="hljs-number">0</span>];

<span class="hljs-comment">// 3. å£°æ˜å¹¶ç›´æ¥åˆå§‹åŒ–å†…å®¹</span>
<span class="hljs-built_in">string</span>[] names = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>[] { <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span> };
<span class="hljs-comment">// æˆ–è€…æ›´ç®€æ´çš„è¯­æ³•</span>
<span class="hljs-built_in">string</span>[] namesShort = { <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span> };

<span class="hljs-comment">// 4. éå†æ•°ç»„</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-built_in">string</span> name <span class="hljs-keyword">in</span> names)
{
    Console.WriteLine(name);
}

<span class="hljs-comment">// 5. è·å–é•¿åº¦</span>
<span class="hljs-built_in">int</span> nameCount = names.Length; <span class="hljs-comment">// ç»“æœæ˜¯ 3</span>
</code></pre>
<h3 data-id="heading-3">3. æ•°ç»„çš„ä¼˜ç¼ºç‚¹</h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æé«˜çš„è®¿é—®æ€§èƒ½</strong>ï¼šç”±äºå†…å­˜æ˜¯è¿ç»­çš„ï¼Œé€šè¿‡ç´¢å¼• <code>array[i]</code> è®¿é—®å…ƒç´ æ˜¯ä¸€ä¸ª O(1) æ“ä½œã€‚CPUå¯ä»¥ç›´æ¥é€šè¿‡ <code>åŸºåœ°å€ + i * å•ä¸ªå…ƒç´ å¤§å°</code> çš„å…¬å¼è®¡ç®—å‡ºå†…å­˜åœ°å€ï¼Œæ— éœ€ä»»ä½•éå†ã€‚è¿™ä½¿å¾—æ•°ç»„åœ¨éœ€è¦é¢‘ç¹éšæœºè¯»å–çš„åœºæ™¯ä¸‹æ— ä¸ä¼¦æ¯”ã€‚</li>
<li><strong>å†…å­˜æ•ˆç‡é«˜</strong>ï¼šé™¤äº†æ•°æ®æœ¬èº«ï¼Œå‡ ä¹æ²¡æœ‰é¢å¤–çš„å¼€é”€ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¤§å°ä¸å¯å˜</strong>ï¼šè¿™æ˜¯æ•°ç»„æœ€å¤§çš„â€œåŸç½ªâ€ã€‚åœ¨åˆ›å»ºæ—¶å¿…é¡»çŸ¥é“æ‰€éœ€ç©ºé—´ï¼Œè¿™åœ¨è®¸å¤šåŠ¨æ€åœºæ™¯ä¸‹æ˜¯ä¸ç°å®çš„ã€‚</li>
<li><strong>æ’å…¥å’Œåˆ é™¤æ•ˆç‡ä½ä¸‹</strong>ï¼šåœ¨æ•°ç»„ä¸­é—´æ’å…¥æˆ–åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦ç§»åŠ¨è¯¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ æ¥å¡«è¡¥ç©ºä½æˆ–è…¾å‡ºç©ºé—´ï¼Œè¿™æ˜¯ä¸€ä¸ª O(n) æ“ä½œï¼Œéå¸¸è€—æ—¶ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€<code>List&lt;T&gt;</code> - åŠ¨æ€æ•°ç»„</h2>
<h3 data-id="heading-5">1. <code>List&lt;T&gt;</code> åˆè¯†</h3>
<p><code>List&lt;T&gt;</code> çš„å†…éƒ¨å…¶å®å°±<strong>å°è£…äº†ä¸€ä¸ªæ•°ç»„</strong>ã€‚å®ƒä¹‹æ‰€ä»¥èƒ½â€œåŠ¨æ€â€å¢é•¿ï¼Œæ˜¯å› ä¸ºå®ƒå®ç°äº†ä¸€å¥—å·§å¦™çš„**å®¹é‡ç®¡ç†ï¼ˆCapacity Managementï¼‰**æœºåˆ¶ã€‚</p>
<ul>
<li><strong>Capacity vs. Count</strong>:
<ul>
<li><code>Count</code>: åˆ—è¡¨<strong>å®é™…åŒ…å«</strong>çš„å…ƒç´ æ•°é‡ã€‚</li>
<li><code>Capacity</code>: å†…éƒ¨æ•°ç»„<strong>èƒ½å¤Ÿå®¹çº³</strong>çš„å…ƒç´ æ•°é‡ã€‚<code>Capacity &gt;= Count</code> æ’æˆç«‹ã€‚</li>
</ul>
</li>
</ul>
<p>å½“ä½ å‘ä¸€ä¸ª<code>List&lt;T&gt;</code>æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœ<code>Count</code>å³å°†è¶…è¿‡<code>Capacity</code>ï¼Œ<code>List&lt;T&gt;</code>ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª<strong>æ–°çš„ã€æ›´å¤§çš„</strong>æ•°ç»„ï¼ˆé€šå¸¸æ˜¯å½“å‰å®¹é‡çš„ä¸¤å€ï¼‰ã€‚</li>
<li>å°†æ—§æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ <strong>å¤åˆ¶</strong>åˆ°æ–°æ•°ç»„ä¸­ã€‚</li>
<li>ä¸¢å¼ƒæ—§æ•°ç»„ï¼Œå°†å†…éƒ¨å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„ã€‚</li>
<li>åœ¨æ–°æ•°ç»„çš„æœ«å°¾æ·»åŠ æ–°å…ƒç´ ã€‚</li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp">List&lt;<span class="hljs-built_in">int</span>&gt; numbers = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;(); <span class="hljs-comment">// åˆå§‹Capacityé€šå¸¸ä¸º0</span>
Console.WriteLine(<span class="hljs-string">$"Count: <span class="hljs-subst">{numbers.Count}</span>, Capacity: <span class="hljs-subst">{numbers.Capacity}</span>"</span>);

numbers.Add(<span class="hljs-number">1</span>); <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
Console.WriteLine(<span class="hljs-string">$"Count: <span class="hljs-subst">{numbers.Count}</span>, Capacity: <span class="hljs-subst">{numbers.Capacity}</span>"</span>);  <span class="hljs-comment">// åˆ›å»ºCapacityä¸º4çš„å®¹å™¨</span>
numbers.Add(<span class="hljs-number">2</span>);
numbers.Add(<span class="hljs-number">3</span>);
numbers.Add(<span class="hljs-number">4</span>);
numbers.Add(<span class="hljs-number">5</span>); <span class="hljs-comment">// æ­¤æ—¶ä¼šè§¦å‘å†…éƒ¨æ•°ç»„çš„æ‰©å®¹å’Œå¤åˆ¶ï¼æ­¤æ—¶Capacityä¸º8</span>

Console.WriteLine(<span class="hljs-string">$"Count: <span class="hljs-subst">{numbers.Count}</span>, Capacity: <span class="hljs-subst">{numbers.Capacity}</span>"</span>);
</code></pre>
<h3 data-id="heading-6">2. <code>List&lt;T&gt;</code> çš„ä½¿ç”¨</h3>
<p><code>List&lt;T&gt;</code> æä¾›äº†æ¯”æ•°ç»„æ›´åŠ ä¸°å¯Œçš„APIæ–¹æ³•ï¼š</p>
<h4 data-id="heading-7"><strong>1. æ·»åŠ å’Œæ’å…¥å…ƒç´  (Adding and Inserting Elements)</strong></h4>



















































































































<table><thead><tr><th align="left">æ–¹æ³• (Method)</th><th align="left">è¯´æ˜ (Description)</th><th align="left">ç¤ºä¾‹ (Example) <code>List&lt;string&gt; fruits = new List&lt;string&gt;();</code></th></tr></thead><tbody><tr><td align="left"><code>Add(T item)</code></td><td align="left">åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚</td><td align="left"><code>fruits.Add("Apple"); // ["Apple"]</code></td></tr><tr><td align="left"><code>AddRange(IEnumerable&lt;T&gt; collection)</code></td><td align="left">å°†ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾ã€‚</td><td align="left"><code>var moreFruits = new[] { "Banana", "Cherry" };</code><br/><code>fruits.AddRange(moreFruits); // ["Apple", "Banana", "Cherry"]</code></td></tr><tr><td align="left"><code>Insert(int index, T item)</code></td><td align="left">åœ¨åˆ—è¡¨çš„æŒ‡å®šç´¢å¼•å¤„æ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</td><td align="left"><code>fruits.Insert(1, "Orange"); // ["Apple", "Orange", "Banana", "Cherry"]</code></td></tr><tr><td align="left"><code>InsertRange(int index, IEnumerable&lt;T&gt; collection)</code></td><td align="left">åœ¨åˆ—è¡¨çš„æŒ‡å®šç´¢å¼•å¤„æ’å…¥ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ ã€‚</td><td align="left"><code>var tropical = new[] { "Mango", "Pineapple" };</code><br/><code>fruits.InsertRange(2, tropical);</code></td></tr><tr><td align="left"><code>Contains(T item)</code></td><td align="left">åˆ¤æ–­åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ ã€‚è¿”å› <code>bool</code>ã€‚</td><td align="left"><code>bool hasApple = fruits.Contains("Apple"); // true</code></td></tr><tr><td align="left"><code>Exists(Predicate&lt;T&gt; match)</code></td><td align="left">åˆ¤æ–­åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„å…ƒç´ ã€‚ä½¿ç”¨Lambdaè¡¨è¾¾å¼ã€‚</td><td align="left"><code>bool hasShortName = fruits.Exists(f =&gt; f.Length &lt; 6); // true ("Apple")</code></td></tr><tr><td align="left"><code>Find(Predicate&lt;T&gt; match)</code></td><td align="left">æœç´¢æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›å®ƒã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›è¯¥ç±»å‹çš„é»˜è®¤å€¼ï¼ˆå¦‚å¼•ç”¨ç±»å‹ä¸º<code>null</code>ï¼‰ã€‚</td><td align="left"><code>string bFruit = fruits.Find(f =&gt; f.StartsWith("B")); // "Banana"</code></td></tr><tr><td align="left"><code>FindAll(Predicate&lt;T&gt; match)</code></td><td align="left">æ£€ç´¢æ‰€æœ‰æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«å®ƒä»¬çš„æ–° <code>List&lt;T&gt;</code>ã€‚</td><td align="left"><code>var longNameFruits = fruits.FindAll(f =&gt; f.Length &gt; 5); // ["Orange", "Banana"]</code></td></tr><tr><td align="left"><code>IndexOf(T item)</code></td><td align="left">æœç´¢æŒ‡å®šå…ƒç´ ï¼Œå¹¶è¿”å›å…¶ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› <code>-1</code>ã€‚</td><td align="left"><code>int index = fruits.IndexOf("Banana"); // 2</code></td></tr><tr><td align="left"><code>LastIndexOf(T item)</code></td><td align="left">æœç´¢æŒ‡å®šå…ƒç´ ï¼Œå¹¶è¿”å›å…¶æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› <code>-1</code>ã€‚</td><td align="left"><code>// If fruits = ["A", "B", "A"], LastIndexOf("A") is 2</code></td></tr><tr><td align="left"><code>Remove(T item)</code></td><td align="left">ä»åˆ—è¡¨ä¸­ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ã€‚æˆåŠŸç§»é™¤è¿”å› <code>true</code>ã€‚</td><td align="left"><code>fruits.Remove("Apple"); // ["Orange", "Banana", "Apple"]</code></td></tr><tr><td align="left"><code>RemoveAt(int index)</code></td><td align="left">ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ã€‚</td><td align="left"><code>fruits.RemoveAt(1); // ["Apple", "Banana", "Apple"]</code></td></tr><tr><td align="left"><code>RemoveAll(Predicate&lt;T&gt; match)</code></td><td align="left">ç§»é™¤æ‰€æœ‰æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„å…ƒç´ ã€‚è¿”å›è¢«ç§»é™¤çš„å…ƒç´ æ•°é‡ã€‚</td><td align="left"><code>int removedCount = fruits.RemoveAll(f =&gt; f == "Apple"); // ["Orange", "Banana"]</code></td></tr><tr><td align="left"><code>RemoveRange(int index, int count)</code></td><td align="left">ä»æŒ‡å®šç´¢å¼•å¼€å§‹ï¼Œç§»é™¤æŒ‡å®šæ•°é‡çš„å…ƒç´ ã€‚</td><td align="left"><code>fruits.RemoveRange(1, 2); // ["Apple", "Apple"]</code></td></tr><tr><td align="left"><code>Clear()</code></td><td align="left">ä»åˆ—è¡¨ä¸­ç§»é™¤æ‰€æœ‰å…ƒç´ ã€‚<code>Count</code> å˜ä¸º 0ã€‚</td><td align="left"><code>fruits.Clear(); // []</code></td></tr><tr><td align="left"><code>Sort()</code></td><td align="left">ä½¿ç”¨é»˜è®¤æ¯”è¾ƒå™¨å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œ<strong>å°±åœ°æ’åº</strong>ï¼ˆIn-place sortï¼‰ã€‚</td><td align="left"><code>fruits.Sort(); // ["Apple", "Banana", "Cherry"]</code></td></tr><tr><td align="left"><code>Sort(Comparison&lt;T&gt; comparison)</code></td><td align="left">ä½¿ç”¨æŒ‡å®šçš„å§”æ‰˜ï¼ˆé€šå¸¸æ˜¯Lambdaï¼‰å¯¹å…ƒç´ è¿›è¡Œ<strong>å°±åœ°æ’åº</strong>ã€‚</td><td align="left"><code>fruits.Sort((a, b) =&gt; a.Length.CompareTo(b.Length)); // Sort by length</code></td></tr><tr><td align="left"><code>Reverse()</code></td><td align="left">å°†åˆ—è¡¨ä¸­çš„å…ƒç´ é¡ºåºè¿›è¡Œ<strong>å°±åœ°åè½¬</strong>ã€‚</td><td align="left"><code>fruits.Reverse(); // ["Banana", "Apple", "Cherry"]</code></td></tr><tr><td align="left"><code>ForEach(Action&lt;T&gt; action)</code></td><td align="left">å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚</td><td align="left"><code>fruits.ForEach(f =&gt; Console.WriteLine(f.ToUpper()));</code></td></tr><tr><td align="left"><code>ToArray()</code></td><td align="left">å°†åˆ—è¡¨ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­ã€‚</td><td align="left"><code>string[] fruitArray = fruits.ToArray();</code></td></tr><tr><td align="left"><code>GetRange(int index, int count)</code></td><td align="left">åˆ›å»ºä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«æºåˆ—è¡¨ä¸­ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„æŒ‡å®šæ•°é‡çš„å…ƒç´ ã€‚</td><td align="left"><code>var subList = fruits.GetRange(0, 1); // New List containing ["Apple"]</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€<code>Dictionary</code>ç­‰ç‰¹æ®Šé›†åˆ</h2>
<h3 data-id="heading-9">1. <code>Dictionary&lt;TKey, TValue&gt;</code> -- å­—å…¸</h3>
<p>å½“ä½ éœ€è¦é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„â€œé”®â€ï¼ˆKeyï¼‰æ¥å¿«é€ŸæŸ¥æ‰¾ä¸€ä¸ªâ€œå€¼â€ï¼ˆValueï¼‰æ—¶ï¼Œ<code>Dictionary</code>æ˜¯ä½ çš„é¦–é€‰ã€‚</p>
<ul>
<li><strong>æœ¬è´¨</strong>ï¼šåŸºäºå“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰å®ç°ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†Keyè½¬æ¢æˆä¸€ä¸ªç´¢å¼•ï¼Œä»è€Œå®ç°è¿‘ä¹O(1)çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ€§èƒ½ã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼šKeyå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸å¯ä¸º<code>null</code>ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp">Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; studentAges = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();

<span class="hljs-comment">// æ·»åŠ é”®å€¼å¯¹</span>
studentAges.Add(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">20</span>);
studentAges[<span class="hljs-string">"Bob"</span>] = <span class="hljs-number">22</span>; <span class="hljs-comment">// æ›´æ–¹ä¾¿çš„ç´¢å¼•å™¨è¯­æ³•</span>

<span class="hljs-comment">// æŸ¥æ‰¾</span>
<span class="hljs-keyword">if</span> (studentAges.TryGetValue(<span class="hljs-string">"Alice"</span>, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> age))
{
    Console.WriteLine(<span class="hljs-string">$"Alice's age is <span class="hljs-subst">{age}</span>"</span>); <span class="hljs-comment">// æ¨èç”¨æ³•ï¼Œé¿å…å¼‚å¸¸</span>
}

<span class="hljs-comment">// éå†</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> pair <span class="hljs-keyword">in</span> studentAges)
{
    Console.WriteLine(<span class="hljs-string">$"Key: <span class="hljs-subst">{pair.Key}</span>, Value: <span class="hljs-subst">{pair.Value}</span>"</span>);
}
</code></pre>
<h3 data-id="heading-10">2. <code>HashSet&lt;T&gt;</code> - å”¯ä¸€æ•°ç»„</h3>
<p>å½“ä½ åªå…³å¿ƒä¸€ä¸ªå…ƒç´ <strong>æ˜¯å¦å­˜åœ¨</strong>äºé›†åˆä¸­ï¼Œå¹¶ä¸”éœ€è¦ä¿è¯é›†åˆä¸­<strong>æ²¡æœ‰é‡å¤å…ƒç´ </strong>æ—¶ï¼Œ<code>HashSet&lt;T&gt;</code>æ˜¯å®Œç¾çš„é€‰æ‹©ã€‚</p>
<ul>
<li><strong>æœ¬è´¨</strong>ï¼šåŒæ ·åŸºäºå“ˆå¸Œè¡¨ï¼Œä½†åªå­˜å‚¨Keyï¼ˆå…ƒç´ æœ¬èº«ï¼‰ï¼Œæ²¡æœ‰Valueã€‚</li>
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼šå…ƒç´ å”¯ä¸€ï¼ŒæŸ¥æ‰¾æ•ˆç‡æé«˜ï¼ˆO(1)ï¼‰ã€‚æ”¯æŒé«˜æ•ˆçš„é›†åˆè¿ç®—ï¼ˆäº¤é›†ã€å¹¶é›†ã€å·®é›†ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp">HashSet&lt;<span class="hljs-built_in">string</span>&gt; uniqueNames = <span class="hljs-keyword">new</span> HashSet&lt;<span class="hljs-built_in">string</span>&gt;();
uniqueNames.Add(<span class="hljs-string">"Alice"</span>);
uniqueNames.Add(<span class="hljs-string">"Bob"</span>);
uniqueNames.Add(<span class="hljs-string">"Alice"</span>); <span class="hljs-comment">// æ·»åŠ å¤±è´¥ï¼Œå› ä¸º "Alice" å·²å­˜åœ¨</span>

Console.WriteLine(uniqueNames.Count); <span class="hljs-comment">// è¾“å‡º: 2</span>

<span class="hljs-built_in">bool</span> hasBob = uniqueNames.Contains(<span class="hljs-string">"Bob"</span>); <span class="hljs-comment">// æå¿«</span>
</code></pre>
<h3 data-id="heading-11">3. <code>Queue&lt;T&gt;</code> å’Œ <code>Stack&lt;T&gt;</code> - é˜Ÿåˆ—å’Œå †æ ˆ</h3>
<ul>
<li>
<p><strong><code>Queue&lt;T&gt;</code> (é˜Ÿåˆ—)</strong>ï¼š<strong>å…ˆè¿›å…ˆå‡º (FIFO - First-In, First-Out)</strong></p>
<ul>
<li><code>Enqueue()</code>: å…¥é˜Ÿï¼ˆæ·»åŠ åˆ°é˜Ÿå°¾ï¼‰ã€‚</li>
<li><code>Dequeue()</code>: å‡ºé˜Ÿï¼ˆä»é˜Ÿé¦–ç§»é™¤å¹¶è¿”å›ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>Stack&lt;T&gt;</code> (æ ˆ)</strong>ï¼š<strong>åè¿›å…ˆå‡º (LIFO - Last-In, First-Out)</strong></p>
<ul>
<li><code>Push()</code>: å…¥æ ˆï¼ˆæ·»åŠ åˆ°æ ˆé¡¶ï¼‰ã€‚</li>
<li><code>Pop()</code>: å‡ºæ ˆï¼ˆä»æ ˆé¡¶ç§»é™¤å¹¶è¿”å›ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p><strong>ç‚¹ä¸ªèµï¼Œå…³æ³¨æˆ‘è·å–æ›´å¤šå®ç”¨ C# æŠ€æœ¯å¹²è´§ï¼å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè®°å¾—æ”¶è—æœ¬æ–‡</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[tvmå­¦ä¹ --001. tvm0.13.0ç¼–è¯‘å®‰è£…]]></title>    <link>https://juejin.cn/post/7576026767372566547</link>    <guid>https://juejin.cn/post/7576026767372566547</guid>    <pubDate>2025-11-24T12:57:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576026767372566547" data-draft-id="7576273949178167359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="tvmå­¦ä¹ --001. tvm0.13.0ç¼–è¯‘å®‰è£…"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-24T12:57:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·756210133253"/> <meta itemprop="url" content="https://juejin.cn/user/643636371134489"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            tvmå­¦ä¹ --001. tvm0.13.0ç¼–è¯‘å®‰è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/643636371134489/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·756210133253
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T12:57:31.000Z" title="Mon Nov 24 2025 12:57:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¼–è¯‘tvm 0.13.0</h2>
<h3 data-id="heading-1">wsl å®‰è£… ubuntu</h3>
<p>åœ¨win11ç¯å¢ƒä¸‹ï¼Œé€šè¿‡wslå®‰è£… ubuntuè™šæ‹Ÿæœºï¼Œæ„å»º linux æ“ä½œç¯å¢ƒ</p>
<ol>
<li>ä½¿ç”¨wsl å®‰è£… Ubuntu 22.04 ï¼ˆå®‰è£…wslçš„æ“ä½œè¯·ç½‘ä¸Šè‡ªè¡Œè·å–ï¼‰</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">wsl --install -d Ubuntu-22.04
</code></pre>
<ol start="2">
<li>ä¸ºäº†ä¸è®© Ubuntu å ç”¨Cç›˜ç©ºé—´ï¼Œåšè¿ç§»åŠ¨ä½œ</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†ubuntuå¯¼å‡º</span>
wsl --<span class="hljs-built_in">export</span> Ubuntu-22.04 d:\ubuntu22.04.tar
<span class="hljs-comment"># æ³¨é”€å½“å‰å®‰è£…çš„ubuntu</span>
wsl --unregister Ubuntu-22.04
<span class="hljs-comment"># å¯¼å…¥é•œåƒï¼Œå³å¯¼å…¥ubuntu</span>
wsl --import Ubuntu-22.04 D:\wsl-ubuntu D:\Ubuntu2204.tar
<span class="hljs-comment"># ä¿®æ”¹é»˜è®¤ç”¨æˆ·</span>
ubuntu2204.exe config --default-user yourname
</code></pre>
<p>æ‰§è¡Œå®Œæ¯•ä¸Šè¿°åŠ¨ä½œåå¯å°†Ubuntu è¿ç§»åˆ° D ç›˜ä¸‹ã€‚</p>
<h3 data-id="heading-2">ubuntuä¸­é…ç½®cudaç¯å¢ƒ</h3>
<p>ä¸‹è½½ nvcc</p>
<pre><code class="hljs language-bash" lang="bash">wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
sudo <span class="hljs-built_in">mv</span> cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.8.0/local_installers/cuda-repo-wsl-ubuntu-12-8-local_12.8.0-1_amd64.deb
sudo dpkg -i cuda-repo-wsl-ubuntu-12-8-local_12.8.0-1_amd64.deb
sudo <span class="hljs-built_in">cp</span> /var/cuda-repo-wsl-ubuntu-12-8-<span class="hljs-built_in">local</span>/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get -y install cuda-toolkit-12-8
</code></pre>
<p>ç„¶åç¼–è¯‘ ~/.bashrcæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-12.6/lib64
export PATH=$PATH:/usr/local/cuda-12.8/bin
export CUDA_HOME=$CUDA_HOME:/usr/local/cuda-12.8
export PATH=/usr/local/cuda/bin:$PATH
</code></pre>
<p>ä¿å­˜é€€å‡ºåï¼Œæ‰§è¡Œå‘½ä»¤<code>source ~/.bashrc</code></p>
<p>ç¡®ä¿èƒ½æ­£å¸¸æ‰§è¡Œ nvcc , nvidia-smi å‘½ä»¤ï¼Œå¦‚ä¸‹æ–‡æ‰€ç¤º</p>
<pre><code class="hljs language-bash" lang="bash">username@DESKTOP-QOJUC82:~$ nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2025 NVIDIA Corporation
Built on Wed_Jan_15_19:20:09_PST_2025
Cuda compilation tools, release 12.8, V12.8.61
Build cuda_12.8.r12.8/compiler.35404655_0
username@DESKTOP-QOJUC82:~$ nvidia-smi
Mon Nov 24 18:00:41 2025
+-----------------------------------------------------------------------------------------+
| NVIDIA-SMI 580.105.07             Driver Version: 581.80         CUDA Version: 13.0     |
+-----------------------------------------+------------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |
|                                         |                        |               MIG M. |
|=========================================+========================+======================|
|   0  NVIDIA GeForce RTX 4070 Ti     On  |   00000000:01:00.0  On |                  N/A |
|  0%   31C    P8             13W /  285W |     878MiB /  12282MiB |      5%      Default |
|                                         |                        |                  N/A |
+-----------------------------------------+------------------------+----------------------+

+-----------------------------------------------------------------------------------------+
| Processes:                                                                              |
|  GPU   GI   CI              PID   Type   Process name                        GPU Memory |
|        ID   ID                                                               Usage      |
|=========================================================================================|
|  No running processes found                                                             |
+-----------------------------------------------------------------------------------------+
</code></pre>
<h3 data-id="heading-3">ä¸‹è½½ llvm å·¥ç¨‹</h3>
<p>æ‰§è¡Œå‘½ä»¤ <code>git clone https://mirrors.tuna.tsinghua.edu.cn/git/llvm-project.git</code> åˆ©ç”¨æ¸…åé•œåƒä¸‹è½½llvmå·¥ç¨‹ã€‚
åˆ‡æ¢ä»£ç åˆ†æ”¯åˆ° llvmorg-17.0.6 <code>git checkout llvmorg-17.0.6</code></p>
<h4 data-id="heading-4">ä¸‹è½½ç¼–è¯‘ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">sudo apt install -y \
  build-essential cmake ninja-build python3 python3-distutils python3-dev \
  git libtinfo-dev zlib1g-dev libncurses5-dev libxml2-dev \
  libffi-dev libedit-dev libssl-dev libpthread-stubs0-dev libnuma-dev
</code></pre>
<h4 data-id="heading-5">è¿›è¡Œç¼–è¯‘</h4>
<pre><code class="hljs language-bash" lang="bash">cmake -G Ninja ../llvm \
  -DCMAKE_BUILD_TYPE=Release \
  -DCMAKE_INSTALL_PREFIX=/opt/llvm-17.0.6 \
  -DLLVM_ENABLE_PROJECTS=<span class="hljs-string">"clang;mlir;openmp"</span> \
  -DLLVM_TARGETS_TO_BUILD=<span class="hljs-string">"X86;NVPTX"</span> \
  -DLLVM_ENABLE_ASSERTIONS=ON \
  -DLLVM_ENABLE_RTTI=ON \
</code></pre>
<p>cmakeæˆåŠŸå,ç»ˆç«¯ä¼šæ‰“å°å‡ºå¦‚ä¸‹ç»“æœ</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- Performing Test HAVE_GNU_POSIX_REGEX</span>
<span class="hljs-comment">-- Performing Test HAVE_GNU_POSIX_REGEX -- failed to compile</span>
<span class="hljs-comment">-- Performing Test HAVE_POSIX_REGEX</span>
<span class="hljs-comment">-- Performing Test HAVE_POSIX_REGEX</span>
<span class="hljs-comment">-- Performing Test HAVE_POSIX_REGEX -- success</span>
<span class="hljs-comment">-- Performing Test HAVE_STEADY_CLOCK</span>
<span class="hljs-comment">-- Performing Test HAVE_STEADY_CLOCK</span>
<span class="hljs-comment">-- Performing Test HAVE_STEADY_CLOCK -- success</span>
<span class="hljs-comment">-- Configuring done</span>
<span class="hljs-comment">-- Generating done</span>
<span class="hljs-comment">-- Build files have been written to: /home/username/llvm-project/build</span>
</code></pre>
<p>ç„¶å ninja è¿›è¡Œç¼–è¯‘
ç¼–è¯‘å®Œæˆåï¼Œç»ˆç«¯ä¼šæ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">[6348/6348] Linking CXX executable bin/mlir-opt
</code></pre>
<h3 data-id="heading-6">ä¸‹è½½ tvm æºç </h3>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ <code>git clone --recursive https://github.com/apache/tvm tvm</code>
åˆ‡æ¢ tvmåˆ° 0.13.0ç‰ˆæœ¬ <code>git checkout v0.13.0</code>
æ›´æ–°å­æ¨¡å— <code>git submodule update --init --recursive</code></p>
<h4 data-id="heading-7">å®‰è£…ç¼–è¯‘ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">sudo apt-get install -y python3 python3-dev python3-setuptools gcc libtinfo-dev zlib1g-dev build-essential cmake libedit-dev libxml2-dev
</code></pre>
<h4 data-id="heading-8">ç¼–è¯‘</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> tvm
<span class="hljs-built_in">mkdir</span> build
<span class="hljs-built_in">cp</span> cmake/config.cmke build
</code></pre>
<p>ç¼–è¾‘ build/config.cmake æ–‡ä»¶</p>
<ol>
<li>å°† set(USE_CUDA OFF) æ”¹ä¸º set(USE_CUDA ON) ä»¥å¯ç”¨ CUDA åç«¯ã€‚</li>
<li>è®¾ç½®llvmè·¯å¾„ï¼Œå¦‚ï¼šset(USE_LLVM /path/to/your/llvm/bin/llvm-config)</li>
</ol>
<p>è¿›å…¥ build <code>cd build</code>ï¼Œæ‰§è¡Œ cmakeå‘½ä»¤ <code>cmake .. </code>ï¼ŒcmakeæˆåŠŸåç»ˆç«¯ä¼šæ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">-- Configuring <span class="hljs-keyword">done</span>
-- Generating <span class="hljs-keyword">done</span>
-- Build files have been written to: /home/username/tvm/build
</code></pre>
<p>æ¥ä¸‹æ¥è¿›è¡Œç¼–è¯‘ï¼Œæ‰§è¡Œå‘½ä»¤make <code>make -j8</code>ï¼Œç¼–è¯‘æˆåŠŸåç»ˆç«¯ä¼šæ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[100%] Built target tvm_objs
[100%] Linking CXX shared library libtvm.so
[100%] Built target tvm
</code></pre>
<h4 data-id="heading-9">å®‰è£…pythonä¾èµ–</h4>
<p>å¿…è¦çš„ä¾èµ–<code>pip3 install --user numpy==1.24.3 decorator attrs</code>
tvmcç›¸å…³ä¾èµ–ï¼š<code>pip3 install --user typing-extensions psutil scipy</code>
rpcè·Ÿè¸ªå™¨ç›¸å…³ä¾èµ–ï¼š<code>pip3 install --user tornado</code>
auto-tuning æ¨¡å—ç›¸å…³ä¾èµ–ï¼š <code>pip3 install --user tornado psutil 'xgboost&gt;=1.1.0' cloudpickle</code></p>
<h4 data-id="heading-10">é€šè¿‡ setup.py å®‰è£… TVMçš„Pythonç»‘å®š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> tvm/python
python3 setup.py install --user
</code></pre>
<p>å‘½ä»¤æ‰§è¡Œå®Œæ¯•åï¼Œé‡æ–°è¿›å…¥ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ <code>tvmc --version</code>ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š<code>0.13.0</code>
æ­¤æ—¶ï¼Œtvm å·²å¯ä½¿ç”¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Dify å­¦ RAG å·¥ç¨‹åŒ–ï¼šå¤šæ ¼å¼æ–‡æ¡£è§£æçš„ç»Ÿä¸€æŠ½è±¡è®¾è®¡]]></title>    <link>https://juejin.cn/post/7576273949178265663</link>    <guid>https://juejin.cn/post/7576273949178265663</guid>    <pubDate>2025-11-24T13:15:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576273949178265663" data-draft-id="7576129509934563347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Dify å­¦ RAG å·¥ç¨‹åŒ–ï¼šå¤šæ ¼å¼æ–‡æ¡£è§£æçš„ç»Ÿä¸€æŠ½è±¡è®¾è®¡"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-24T13:15:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è©¹å§†æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/2289608413155021"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Dify å­¦ RAG å·¥ç¨‹åŒ–ï¼šå¤šæ ¼å¼æ–‡æ¡£è§£æçš„ç»Ÿä¸€æŠ½è±¡è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2289608413155021/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è©¹å§†æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T13:15:08.000Z" title="Mon Nov 24 2025 13:15:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-heath-light">.hljs-comment,.hljs-quote{color:#776977}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ca402b}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#a65926}.hljs-bullet,.hljs-string,.hljs-symbol{color:#918b3b}.hljs-section,.hljs-title{color:#516aec}.hljs-keyword,.hljs-selector-tag{color:#7b59c0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f7f3f7;color:#695d69}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä» Dify å­¦ RAG å·¥ç¨‹åŒ–ï¼šå¤šæ ¼å¼æ–‡æ¡£è§£æçš„ç»Ÿä¸€æŠ½è±¡è®¾è®¡</h2>
<blockquote>
<p>æœ¬æ–‡åŸºäº Dify v0.6.10 æºç åˆ†æï¼Œèšç„¦å…¶å¤šæ ¼å¼æ–‡æ¡£åŠ è½½ä¸è§£ææ¶æ„ï¼Œä¸ºè‡ªç ” RAG ç³»ç»Ÿæä¾›å·¥ç¨‹åŒ–å‚è€ƒã€‚</p>
</blockquote>
<h3 data-id="heading-1">1ã€èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆ RAG éœ€è¦ç»Ÿä¸€æ–‡æ¡£å¤„ç†ï¼Ÿ</h3>
<p>åœ¨æ„å»º RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¸¸é¢ä¸´ä¸€ä¸ªâ€œè„æ´»â€ï¼šç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£äº”èŠ±å…«é—¨â€”â€”PDF æŠ¥å‘Šã€Word åˆåŒã€PPT æ¼”ç¤ºç¨¿ã€Markdown ç¬”è®°â€¦â€¦æ¯ç§æ ¼å¼éƒ½éœ€è¦ä¸åŒçš„è§£æé€»è¾‘ã€‚</p>
<p>å¦‚æœç›´æ¥åœ¨ä¸»æµç¨‹ä¸­å†™ if file.endswith('.pdf'): ... elif file.endswith('.docx'): ...ï¼Œä»£ç å¾ˆå¿«å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œæ–°å¢ä¸€ç§æ ¼å¼ï¼ˆæ¯”å¦‚ .epub æˆ–ç½‘é¡µå¿«ç…§ï¼‰å°±å¾—æ”¹åŠ¨æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>æœ‰æ²¡æœ‰ä¸€ç§è§£è€¦ã€å¯æ‰©å±•ã€æ ‡å‡†åŒ–çš„æ–¹æ¡ˆï¼ŸDify ç»™å‡ºäº†ä¸€ä¸ªä¼˜é›…çš„ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-2">2ã€Dify çš„è§£æ³•ï¼šæŠ½è±¡å‡º DocumentLoader + Parser åˆ†å±‚æ¶æ„</h3>
<p>Dify å°†æ–‡æ¡£å¤„ç†æ‹†åˆ†ä¸ºä¸¤ä¸ªæ ¸å¿ƒå±‚ï¼š</p>
<ul>
<li>DocumentLoaderï¼šè´Ÿè´£ç»Ÿä¸€å…¥å£å’Œå…ƒæ•°æ®å°è£…</li>
<li>Parserï¼šè´Ÿè´£å…·ä½“æ ¼å¼çš„æ–‡æœ¬æå–
ä¸¤è€…é€šè¿‡å·¥å‚æ¨¡å¼åŠ¨æ€ç»„åˆï¼Œå®ç°â€œæ ¼å¼æ— å…³â€çš„åŠ è½½èƒ½åŠ›ã€‚</li>
</ul>
<p>æºç è·¯å¾„å‚è€ƒï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify" target="_blank" title="https://github.com/langgenius/dify" ref="nofollow noopener noreferrer">github.com/langgenius/â€¦</a></p>
<ul>
<li>åŠ è½½å™¨å…¥å£ï¼šapi/core/data_loader/loader.py</li>
<li>å·¥å‚ç±»ï¼šapi/core/data_loader/factory.py</li>
<li>è§£æå™¨ç›®å½•ï¼šapi/core/parser/</li>
</ul>
<h3 data-id="heading-3">3ã€å…³é”®è®¾è®¡äº®ç‚¹</h3>
<h4 data-id="heading-4">3.1ã€ç»Ÿä¸€å…¥å£ï¼šDocumentLoaderFactory</h4>
<p>Dify å®šä¹‰äº†ä¸€ä¸ª DocumentLoaderFactoryï¼Œæ ¹æ®æ–‡ä»¶åç¼€è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„è§£æå™¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># factory.py ç®€åŒ–é€»è¾‘</span>
PARSER_MAPPING = {
    <span class="hljs-string">'.pdf'</span>: PdfParser,
    <span class="hljs-string">'.docx'</span>: DocxParser,
    <span class="hljs-string">'.md'</span>: MarkdownParser,
    <span class="hljs-string">'.pptx'</span>: PptxParser,
    <span class="hljs-comment"># å¯è½»æ¾æ‰©å±•</span>
}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_parser</span>(<span class="hljs-params">file_extension: <span class="hljs-built_in">str</span></span>) -&gt; BaseParser:
    <span class="hljs-keyword">return</span> PARSER_MAPPING.get(file_extension, PlainTextParser)
</code></pre>
<p>è¿™ç§è®¾è®¡è®©ä¸»æµç¨‹å®Œå…¨<strong>ä¸æ„ŸçŸ¥å…·ä½“æ ¼å¼</strong>ï¼Œæ–°å¢æ”¯æŒåªéœ€æ³¨å†Œæ–° parserï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p>
<h4 data-id="heading-5">3.2ã€è§£æç»“æœæ ‡å‡†åŒ–ï¼šç»Ÿä¸€è¾“å‡ºç»“æ„</h4>
<p>æ— è®ºåŸå§‹æ ¼å¼æ˜¯ä»€ä¹ˆï¼Œæ‰€æœ‰ parser æœ€ç»ˆéƒ½è¿”å›ç›¸åŒçš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python">[
  {
    <span class="hljs-string">"page_content"</span>: <span class="hljs-string">"è¿™æ˜¯æå–çš„æ–‡æœ¬å†…å®¹..."</span>,
    <span class="hljs-string">"metadata"</span>: {
      <span class="hljs-string">"source"</span>: <span class="hljs-string">"report.pdf"</span>,
      <span class="hljs-string">"page"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-string">"title"</span>: <span class="hljs-string">"Q3 è´¢æŠ¥"</span>
    }
  },
  <span class="hljs-comment"># ...æ›´å¤š chunk</span>
]
</code></pre>
<p>è¿™ä¸ªç»“æ„ç›´æ¥å…¼å®¹ LangChain çš„ <code>Document</code> ç±»å‹ï¼Œå¯æ— ç¼æ¥å…¥åç»­çš„ <code>TextSplitter</code> å’Œ embedding æµç¨‹ã€‚</p>
<blockquote>
<p>ğŸ’¡ è¿™æ˜¯ RAG å·¥ç¨‹åŒ–çš„å…³é”®ï¼šè®©â€œå¼‚æ„è¾“å…¥â€å˜æˆâ€œåŒæ„ä¸­é—´è¡¨ç¤ºâ€ã€‚</p>
</blockquote>
<h4 data-id="heading-6">3.3ã€å®¹é”™ä¸é™çº§ç­–ç•¥</h4>
<p>Dify å¹¶éç®€å•è°ƒç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œæ˜¯åšäº†å·¥ç¨‹åŠ å›ºï¼š</p>
<ul>
<li>PDF è§£æå¤±è´¥ â†’ è‡ªåŠ¨ fallback åˆ° OCRï¼ˆéœ€é…ç½®ï¼‰</li>
<li>Word è¡¨æ ¼å¤„ç† â†’ é€šè¿‡ python-docx ä¿ç•™è¡Œåˆ—ç»“æ„ä¿¡æ¯</li>
<li>PPT æ–‡æœ¬æå– â†’ åŒ…å« slide æ ‡é¢˜ä¸å¤‡æ³¨ï¼ˆé¿å…ä¿¡æ¯ä¸¢å¤±ï¼‰
è¿™äº›ç»†èŠ‚æå¤§æå‡äº†ç”Ÿäº§ç¯å¢ƒçš„é²æ£’æ€§ã€‚</li>
</ul>
<h3 data-id="heading-7">4ã€æˆ‘ä»¬èƒ½å€Ÿé‰´ä»€ä¹ˆï¼Ÿ</h3>
<p>å¦‚æœä½ æ­£åœ¨è‡ªç ” RAG ç³»ç»Ÿï¼Œå®Œå…¨å¯ä»¥å¤ç”¨è¿™å¥—æ€æƒ³ï¼š</p>
<p>âœ… æ­¥éª¤ 1ï¼šå®šä¹‰ç»Ÿä¸€æ¥å£</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseParser</span>(<span class="hljs-title class_ inherited__">ABC</span>):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, file_path: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
        <span class="hljs-keyword">pass</span>
</code></pre>
<p>âœ… æ­¥éª¤ 2ï¼šå®ç°å…·ä½“è§£æå™¨ï¼ˆä»¥ Markdown ä¸ºä¾‹ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MarkdownParser</span>(<span class="hljs-title class_ inherited__">BaseParser</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, file_path: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
            content = f.read()
        <span class="hljs-keyword">return</span> [{
            <span class="hljs-string">"page_content"</span>: content,
            <span class="hljs-string">"metadata"</span>: {<span class="hljs-string">"source"</span>: file_path}
        }]
</code></pre>
<p>âœ… æ­¥éª¤ 3ï¼šä½¿ç”¨å·¥å‚è·¯ç”±</p>
<pre><code class="hljs language-python" lang="python">loader = UnifiedDocLoader() documents = loader.load(<span class="hljs-string">"user_upload.docx"</span>) <span class="hljs-comment"># è‡ªåŠ¨è°ƒç”¨ DocxParser</span>

</code></pre>
<p>è¿™æ ·ï¼Œä½ çš„ RAG pipeline ä¸»å¹²ä»£ç å°†æå…¶ç®€æ´ï¼Œä¸”æœªæ¥æ‰©å±•æ–°æ ¼å¼é›¶æˆæœ¬ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>Dify åœ¨æ–‡æ¡£å¤„ç†ä¸Šçš„è®¾è®¡ä½“ç°äº†å…¸å‹çš„å·¥ç¨‹åŒ–æ€ç»´ï¼š</p>
<ul>
<li>åˆ†å±‚æŠ½è±¡ï¼šåŠ è½½ vs è§£æ vs åˆ†å—èŒè´£åˆ†ç¦»</li>
<li>æ ‡å‡†å¥‘çº¦ï¼šç»Ÿä¸€è¾“å‡ºç»“æ„æ‰“é€šä¸‹æ¸¸</li>
<li>ç”Ÿäº§å°±ç»ªï¼šå®¹é”™ã€é™çº§ã€å…ƒæ•°æ®ä¿ç•™</li>
</ul>
<p>å¯¹äºæœåŠ¡ç«¯å¼€å‘è€…è€Œè¨€ï¼Œè¿™ä¸ä»…æ˜¯â€œæ€ä¹ˆç”¨ Difyâ€ï¼Œæ›´æ˜¯â€œå¦‚ä½•è®¾è®¡å¯ç»´æŠ¤çš„ AI åº”ç”¨æ¶æ„â€ã€‚</p>
<blockquote>
<p>ğŸ‘‹ å¦‚æœä½ åœ¨åš RAGã€Agent æˆ–å¤§æ¨¡å‹åº”ç”¨å¼€å‘ï¼Œé‡åˆ°æ–‡æ¡£è§£ææ··ä¹±ã€åˆ†å—æ•ˆæœå·®ã€å…ƒæ•°æ®ä¸¢å¤±ç­‰é—®é¢˜ï¼Œæ¬¢è¿äº¤æµã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ]]></title>    <link>https://juejin.cn/post/7576158801972969518</link>    <guid>https://juejin.cn/post/7576158801972969518</guid>    <pubDate>2025-11-25T01:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576158801972969518" data-draft-id="7571758212473536563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜è¯´: &quot;ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-25T01:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:59:53.000Z" title="Tue Nov 25 2025 01:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>é¢è¯•å®˜é—®æˆ‘ <code>radio</code> ç»„ä»¶çŸ¥é“æ€ä¹ˆå®ç°å—ï¼Ÿæˆ‘æŠŠæˆ‘çš„ç»„ä»¶åº“ <code>radio</code> ç½‘é¡µä¸¢ç»™å®ƒï¼Œæˆ‘è¯´æˆ‘è¿™ä¸ª <code>radio</code> ç»„ä»¶ä»€ä¹ˆæ ·å¼éƒ½æ”¯æŒï¼Œä½ çœ‹è¿™æ˜¯ä¼ ç»Ÿæ ·å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c2ad19d3cb4428a13e7c8a0399aa21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=ml%2BhD5AE6jLUQLfPnOhfj4l96Io%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ çœ‹ï¼Œè¿™æ˜¯è‡ªå®šä¹‰æ ·å¼ï¼Œç†è®ºä¸Šä»€ä¹ˆæ ·å¼éƒ½å¯ä»¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de85c9e8911649baab344ed9773f44f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=iqFlFs2EvF0D0%2BMvItCLhOOOEfw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9bf5a0123034518b14bb1f05482abef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=EBol8%2FM%2Bjpwly5V5FEZ%2BCVemlnY%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘å˜¿å˜¿ä¸€ç¬‘è¯´ï¼š"æˆ‘çš„ <code>radio</code> ç»„ä»¶æœ¬è´¨ä¸Šä¸æ¶‰åŠä»»ä½•æ ·å¼ï¼Œåªè´Ÿè´£å²æœˆé™å¥½ï¼Œä½¿ç”¨è€…è´Ÿè´£è²Œç¾å¦‚èŠ±ï¼"</p>
<p>æœ€åé¢è¯•å®Œæ¯•ï¼Œé¢è¯•å®˜å¾ˆæ»¡æ„ï¼Œå¹¶é—®è¿™ä¸ªæ€ä¹ˆå®ç°çš„ï¼Œæˆ‘å°±å†™ä¸€ç¯‡æ–‡ç« æ¥è¯´è¯´å§ï¼</p>
<p>è¿™æ˜¯ä¸Šé¢ç»„ä»¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio%2Fexample%2Ftailwind-traditional-example" target="_blank" title="https://www.frontlight.tech/radio/example/tailwind-traditional-example" ref="nofollow noopener noreferrer">ç½‘ç«™åœ°å€</a></p>
<p>æ›´å¤šç»„ä»¶åº“æ•™ç¨‹ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github</a> ä¸Šç»™ä¸ª starï¼ŒåŠ ç¾¤äº¤æµå“¦ï¼</p>
<p>æœ¬æ–‡ç« åŠæ›´å¤šæ¡ˆä¾‹å·²ç»åœ¨å®˜ç½‘ä¸Šäº†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio" target="_blank" title="https://www.frontlight.tech/radio" ref="nofollow noopener noreferrer">æœ¬æ–‡é“¾æ¥</a></p>
<h2 data-id="heading-1">å¯è‡ªå®šä¹‰çš„æ ¸å¿ƒ</h2>
<p>æ­£å¸¸çš„ <code>radio</code> ç»„ä»¶ä¸»è¦æ˜¯é€šè¿‡ <code>&lt;input&gt;</code> æ ‡ç­¾å±æ€§ <code>type="radio"</code> å®ç°çš„ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªé»˜è®¤çš„æ ·å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå°±ä¸èƒ½ä½¿ç”¨åŸç”Ÿçš„ <code>radio</code>æ ·å¼ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ æ˜¯ä¸æ˜¯åªè¦å®ç°äº† <code>radio</code> å†…åœ¨çš„é€»è¾‘ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å®ç°äº† <code>radio</code> ç»„ä»¶ï¼Œæœ‰äººä¼šé—®ï¼Ÿå†…åœ¨çš„é€»è¾‘æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>å…¶ä¸€ï¼Œé€‰ä¸­æ€é€»è¾‘ï¼Œå°±æ˜¯å¤šä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åªè¦ç‚¹å‡»ï¼Œå°±æ˜¯é€‰ä¸­æ€ï¼ˆcheckedï¼‰</li>
<li>å…¶äºŒï¼Œä¼ å…¥ <code>disabled</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½ç‚¹å‡»ï¼ˆæˆ–è€… <code>cursor</code>ï¼ˆä¹Ÿå°±æ˜¯é¼ æ ‡çš„çŠ¶æ€ï¼‰è®¾ç½®ä¸º <code>not-allowed</code> ä¹Ÿå°±æ˜¯ä¸å¯é€‰ä¸­ï¼‰</li>
<li>å…¶ä¸‰ï¼ŒåŸç”Ÿ <code>radio</code> å¹¶ä¸æ”¯æŒ  <code>readyonly</code> çŠ¶æ€ï¼Œä½†æˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶åº”è¯¥å®ç°ï¼Œåœ¨è¡¨å•ä¸­ï¼Œ <code>readyonly</code> æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ‰€ä»¥ä¼ å…¥ <code>readyonly</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½æ”¹å˜çŠ¶æ€ï¼Œåªèƒ½çœ‹ã€‚</li>
<li>æœ€åæœ€æœ€é‡è¦çš„é€»è¾‘æ˜¯å¤šä¸ª <code>radio</code> å…ƒç´ ç»„åˆæ—¶ï¼Œä½ åªèƒ½é€‰ä¸­å…¶ä¸­ä¸€ä¸ªï¼Œå³å•é€‰çš„é€»è¾‘ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬åªè¦å®ç°äº†ä¸Šè¿°é€»è¾‘ï¼Œé‚£å°±æ˜¯è·ŸåŸç”Ÿçš„å•é€‰å°±æ²¡æœ‰åŒºåˆ«äº†ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼Œèƒ½ä¸èƒ½æ—¢ä¿æŒ <code>radio</code> ç»„ä»¶çš„åŸæœ¬çš„é€»è¾‘ï¼Œè¿˜èƒ½æ”¯æŒè‡ªå®šä¹‰å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ç”¨æˆ·å¦‚æœè¿˜æ˜¯å¸Œæœ›ä½¿ç”¨åŸç”Ÿ <code>radio</code> æˆ‘ä»¬æ”¯æŒï¼Œè‡ªå®šä¹‰ä¹Ÿæ”¯æŒå‘¢ï¼Ÿè¿™æ ·çš„è¯ï¼Œè¯­ä¹‰æ€§å®Œå¥½çš„åŸºç¡€ä¸Šè¿˜èƒ½è‡ªç”±æ‹“å±•ï¼Œç®€ç›´å®Œç¾ï¼</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯è¿™æ ·çš„ã€‚</p>
<p>åœ¨ä»‹ç»æ ¸å¿ƒé€»è¾‘ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´ä¸€ä¸ªå°æŠ€å·§ã€‚</p>
<h2 data-id="heading-2">radio ç»„ä»¶åŸºæœ¬ç»“æ„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>é¦–å…ˆå…ˆä»‹ç»ä¸€ä¸€ä¸ªå°æŠ€å·§ï¼Œå¦‚ä¸Šå›¾ï¼Œä¸€èˆ¬ <code>radio</code> åŒ…å«äº†ä¸€ä¸ªåœ†åœˆè¡¨ç¤ºæ˜¯å¦é€‰ä¸­ï¼Œåœ†åœˆçš„å³è¾¹æ˜¯æ–‡å­—ï¼Œæ­£å¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ç‚¹å‡»åœ†åœˆæ‰èƒ½é€‰ä¸­ï¼Œå¯è¿™äº›ç»„ä»¶åº“å¦‚ä½•å®ç°çš„ç‚¹å‡»åœ†åœˆå³è¾¹çš„æ–‡å­—ä¹Ÿèƒ½é€‰ä¸­åœ†åœˆå‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ° <code>&lt;label&gt;</code> æ ‡ç­¾äº†ã€‚</p>
<p>å¦‚ä¸Šå›¾æ˜¯ <code>MDN</code> ä¸­çš„æ–¹å¼:</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"drone"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">checked</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"huey"</span>&gt;</span>Huey<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>é¦–å…ˆéœ€è¦åœ¨ <code>input</code> ä¸Šä½¿ç”¨ <code>id</code> å±æ€§</li>
<li>ç„¶ååœ¨ <code>label</code> ç»„ä»¶ä¸Šä½¿ç”¨ <code>for</code>å±æ€§ï¼Œè·Ÿ <code>id</code> çš„å€¼ä¸€è‡´å³å¯å®ç°ç‚¹å‡» <code>label</code> æ ‡ç­¾å°±èƒ½é€‰ä¸­å¯¹åº”çš„ <code>radio</code></li>
</ul>
<p>ä½†è¿™ç§æ–¹å¼æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä½¿ç”¨çš„å¦ä¸€ç§æ–¹å¼è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå°±æ˜¯ <code>label</code> å°† <code>input</code> æ ‡ç­¾åŒ…è£¹å°±å¥½ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> /&gt;</span>
huey
<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
</code></pre>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹çŠ¶æ€çš„åˆ‡æ¢é€»è¾‘ï¼Œè¿™æ ·æˆ‘ä»¬å®ç°èµ·æ¥å°±æœ‰ä¸€ä¸ªè“å›¾ï¼š</p>
<ul>
<li>é¦–å…ˆç‚¹å‡» <code>label</code> ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šåœ¨  <code>label</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li>ç„¶åè¿™ä¸ª <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘ <code>input</code>ï¼ˆradioï¼‰ ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li><code>input</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘è‡ªèº«çš„ <code>onChange</code> äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯é€‰ä¸­çš„value å€¼åœ¨ <code>onChange</code> çš„æ—¶å€™å¯ä»¥è®¾ç½®ä¸ºç‚¹å‡»çš„ <code>input</code> çš„å€¼ï¼Œ
<ul>
<li>è¿™é‡Œæœ‰äº›æ–°åŒå­¦å¯èƒ½ä¸çŸ¥é“ <code>input</code> è¿™ç±»è¡¨å•å…ƒç´ ï¼Œç›®çš„å°±æ˜¯æ”¶é›†å€¼ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¼ å…¥ <code>value</code> å±æ€§ã€‚</li>
</ul>
</li>
</ul>
<p>æ•´ä½“é€»è¾‘å¾ˆæ¸…æ™°ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä½†å…¶ä¸­çš„å‘ä¸å°‘ï¼Œæˆ‘ä»¬æŠŠå‘ä»‹ç»å®Œï¼ŒåŸºæœ¬ä¸Šä½ å°±å¯ä»¥å®ç°ä¸€ä¸ªè‡ªå·±çš„ <code>radio</code> ç»„ä»¶äº†</p>
<h2 data-id="heading-3">æ ¸å¿ƒé€»è¾‘æ¢³ç†</h2>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯ç»™ <code>label</code> æ ‡ç­¾ç»‘å®š <code>onClick</code> äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-keyword">const</span> onLabelClick = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-comment">// åªè¯»æˆ–ç¦ç”¨æ—¶ï¼Œé˜»æ­¢ç‚¹å‡»äº§ç”Ÿä»»ä½•è¡Œä¸º</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-keyword">return</span>;
    }
    rest?.<span class="hljs-property">onClick</span>?.(e);
  };

</code></pre>
<p>éœ€è¦æ³¨æ„</p>
<ul>
<li>å½“å¤–ç•Œä¼ å…¥ <code>disabled</code> æˆ–è€… <code>readonly</code> å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ <code>return</code></li>
<li>æ³¨æ„è¦ä½¿ç”¨ <code> e.preventDefault();</code> æ¥ç»„ç»‡é»˜è®¤äº‹ä»¶ï¼Œé»˜è®¤äº‹ä»¶å°±æ˜¯ç‚¹å‡» <code>label</code> è§¦å‘ <code>input</code> çš„ <code>onClick</code> äº‹ä»¶ï¼Œä»è€Œé˜»æ­¢<code>input</code> ä¸Šå€¼è¢«é€‰ä¸­</li>
</ul>
<p>ç„¶åéœ€è¦ç»™ <code>input</code> ç»‘å®š <code>onClick</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript">onClick={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
   <span class="hljs-comment">// é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†</span>
   e.<span class="hljs-title function_">stopPropagation</span>();
}}
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯</p>
<ul>
<li>è°ƒç”¨ <code>e.stopPropagation();</code> é˜²æ­¢ç”¨æˆ·åœ¨ç›´æ¥ç‚¹å‡» <code>input</code>ï¼ˆradioï¼‰ çš„æ—¶å€™ï¼Œäº‹ä»¶å†’æ³¡åˆ° <code>label</code> æ ‡ç­¾ï¼Œä»è€Œå¤šæ¬¡è§¦å‘ <code>label</code> çš„ <code>onClick</code> äº‹ä»¶ã€‚</li>
</ul>
<p>æœ€åï¼Œå°±æ˜¯åœ¨ <code>input</code> ç»‘å®š <code>onChange</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-keyword">const</span> [checked, setChecked] = <span class="hljs-title function_">useMergeValue</span>(<span class="hljs-literal">false</span>, {
    <span class="hljs-attr">value</span>: propsChecked,
    <span class="hljs-attr">defaultValue</span>: mergeProps.<span class="hljs-property">defaultChecked</span>,
  });
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">persist</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();

    <span class="hljs-comment">// ç¦ç”¨æˆ–åªè¯»éƒ½ä¸æ”¹å˜çŠ¶æ€ï¼Œä¸è§¦å‘å¤–éƒ¨ onChange</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
      context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
      <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
    }
    <span class="hljs-keyword">if</span> (!checked) {
      propsOnChange?.(<span class="hljs-literal">true</span>, e);
    }
  };
</code></pre>
<p>å…¶ä¸­ç»†èŠ‚å¾ˆå¤šï¼Œæˆ‘ä»¬ç®€å•è¯´ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>e.persist();</code> åœ¨ <code>react</code> 17 ä¹‹å‰éœ€è¦ï¼ˆç°åœ¨éƒ½å·²ç» 19 ç‰ˆæœ¬ï¼Œæ˜¯å¯ä»¥åˆ æ‰è¿™è¡Œä»£ç çš„ï¼‰ï¼Œå¤§æ¦‚ä»‹ç»ä¸‹å®ƒçš„ä½œç”¨</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 16 åŠä¹‹å‰ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨ setTimeout ä¸­æ— æ³•è·å¾—æ­£å¸¸çš„äº‹ä»¶å¯¹è±¡çš„å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// æ­£å¸¸è®¿é—®</span>
  
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// null æˆ– undefinedï¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>); <span class="hljs-comment">// nullï¼</span>
  }, <span class="hljs-number">1000</span>);
};
</code></pre>
<ul>
<li><code>e.stopPropagation();</code> é˜»æ­¢äº‹ä»¶å†’æ³¡
<ul>
<li>å¦‚æœ Radio åµŒå¥— Radioï¼Œç‚¹å‡»é‡Œé¢çš„ Radio å°±ä¼šè®© <code>onChnage</code> äº‹ä»¶å†’æ³¡åˆ°å¤–å±‚å»ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ‰€ä»¥éš”ç¦»ä¸€ä¸‹</li>
</ul>
</li>
<li><code>if (disabled || readonly) return;</code> æ£€æŸ¥æ˜¯å¦æ˜¯ disabled æˆ–è€… readonly çŠ¶æ€ï¼Œè¿™æ ·çš„çŠ¶æ€ä¸èƒ½è®©å®ƒè§¦å‘ <code>onChange</code> äº‹ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
  context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
}
</code></pre>
<p>è¿™ä¸ªæˆ‘ä»¬æš‚ä¸”ä¸è®²ï¼Œæ˜¯è¦é…åˆ <code>Radio.Group</code> ç»„ä»¶ä½¿ç”¨ï¼Œè¿™ä¸ª context æ˜¯ä½¿ç”¨ <code>useContext</code> api è·å–çš„ <code>Radio.Group</code> é€ä¼ çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯çŠ¶æ€æœ€ç»ˆä¼šè¢«  <code>Radio.Group</code> æ¥ç®¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<ul>
<li>
<p>ä½œç”¨ï¼šç‹¬ç«‹ä½¿ç”¨æ—¶çš„çŠ¶æ€ç®¡ç†</p>
</li>
<li>
<p><code>!('checked' in props)</code>ï¼šæ£€æŸ¥æ˜¯å¦æ˜¯<strong>éå—æ§ç»„ä»¶</strong>ï¼Œè¿™æ˜¯è¯†åˆ«æ˜¯å¦æ˜¯å—æ§è¿˜æ˜¯éå—æ§ç»„ä»¶çš„å…³é”®ã€‚</p>
<ul>
<li>æ²¡æœ‰ä¼ å…¥Â <code>checked</code>Â prop â†’ ç»„ä»¶è‡ªå·±ç®¡ç†çŠ¶æ€</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œéå¸¸éå¸¸ç»†èŠ‚ï¼Œæœ‰äººå¯èƒ½ç–‘æƒ‘äº†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè€Œä¸æ˜¯ç”¨ <code>checked === undefined</code> æ¥åˆ¤æ–­ï¼Œå› ä¸ºä¸ä¼ çš„å€¼é»˜è®¤ä¸æ˜¯ <code>undefined</code> å—ï¼Ÿæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹</p>
<p>å¤§å®¶éœ€è¦æ³¨æ„ï¼Œå‡è®¾ä½ è¿™æ ·ä¼ å…¥ <code>checked</code> å‚æ•°</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Radio <span class="hljs-attr">checked</span>={undefiend} /&gt;
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>true</code> å› ä¸ºä½ è¿˜æ˜¯ä¼ äº† <code>undefined</code> å€¼</li>
</ul>
<p>åªæœ‰è¿™æ ·</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> /&gt;</span>
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>false</code>, ä¹Ÿå°±æ˜¯ä»€ä¹ˆä¹Ÿæ²¡ä¼ ï¼Œä»£è¡¨æ˜¯éå—æ§ç»„ä»¶ã€</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<p>ç„¶å <code> setChecked(true);</code> è¿™ä¸ªå¾ˆå…³é”®ï¼Œæœ‰çš„äººè¯´ï¼Œ<code>!('checked' in props)</code> ä¸æ˜¯ä»£è¡¨éå—æ§ç»„ä»¶å—ï¼Œéå—æ§ç»„ä»¶æ˜¯ç»„ä»¶è‡ªå·±æ§åˆ¶å€¼ï¼Œæ€ä¹ˆè¿˜æœ‰ç›´æ¥ <code>setCheck</code> æ§åˆ¶ï¼Œè¿™ä¸æ˜¯å—æ§ç»„ä»¶çš„æ§åˆ¶çš„æ–¹å¼å—ï¼Ÿ</p>
<p>è¿™é‡Œéœ€è¦è§£é‡Šä¸¤ç‚¹</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œå¾ˆå¤šç»„ä»¶åº“ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨å—æ§çš„å½¢å¼æ¥æ¨¡æ‹Ÿéå—æ§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è¦ç¡®ç¡®å®å®æ‹¿åˆ° Radio ç»„ä»¶çš„ <code>checked</code>ï¼ˆé€‰ä¸­ï¼‰ è¿˜æ˜¯ é <code>checked</code> çŠ¶æ€ï¼Œå¦‚æœéƒ½äº¤ç»™åŸç”Ÿï¼Œæˆ‘ä»¬è·å–å¾ˆä¸æ–¹ä¾¿</p>
</li>
<li>
<p>å…¶æ¬¡ <code>useMergeValue</code> æ˜¯ç»„ä»¶åº“å¾ˆå¸¸ç”¨å‡½æ•°ï¼Œå®ƒæŠŠå—æ§å’Œéå—æ§ç»„åˆèµ·æ¥ï¼Œæ˜¯ä¸ªéå¸¸å®ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹é€»è¾‘ã€‚ç›¸ä¿¡ä½ å†™ç»„ä»¶åº“ä¹Ÿä¸€å®šä¼šç”¨åˆ°ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">'use client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { isUndefined } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils'</span>;
<span class="hljs-keyword">import</span> { usePrevious } <span class="hljs-keyword">from</span> <span class="hljs-string">'./use-previous'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useMergeValue&lt;T&gt;(
  <span class="hljs-attr">defaultStateValue</span>: T,
  props?: {
    defaultValue?: T;
    value?: T;
  },
): [T, <span class="hljs-title class_">React</span>.<span class="hljs-property">Dispatch</span>&lt;<span class="hljs-title class_">React</span>.<span class="hljs-property">SetStateAction</span>&lt;T&gt;&gt;, T] {
  <span class="hljs-keyword">const</span> { defaultValue, value } = props || {};
  <span class="hljs-keyword">const</span> firstRenderRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> prevPropsValue = <span class="hljs-title function_">usePrevious</span>(props?.<span class="hljs-property">value</span>);

  <span class="hljs-keyword">const</span> [stateValue, setStateValue] = useState&lt;T&gt;(
    !<span class="hljs-title function_">isUndefined</span>(value) ? value : !<span class="hljs-title function_">isUndefined</span>(defaultValue) ? defaultValue : defaultStateValue,
  );

  <span class="hljs-comment">// å—æ§è½¬ä¸ºéå—æ§çš„æ—¶å€™ï¼Œéœ€è¦åšè½¬æ¢å¤„ç†</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (firstRenderRef.<span class="hljs-property">current</span>) {
      firstRenderRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span> &amp;&amp; prevPropsValue !== value) {
      <span class="hljs-title function_">setStateValue</span>(value);
    }
  }, [value]);

  <span class="hljs-keyword">const</span> mergedValue = <span class="hljs-title function_">isUndefined</span>(value) ? stateValue : value;

  <span class="hljs-keyword">return</span> [mergedValue, setStateValue, stateValue];
}
</code></pre>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯ä½ ä¼ äº†Â <code>value</code>Â æˆ‘å°±è®¤ä¸ºä½ æ˜¯å—æ§ç»„ä»¶ï¼Œç„¶åÂ <code>value</code>Â å°±é€ä¼ å‡ºå»ï¼ŒÂ <code>defaultValue</code>Â æˆ–è€…ç»„ä»¶åº“æƒ³é»˜è®¤ç»™ä¸ªé»˜è®¤å€¼ï¼Œ æˆ‘ä¼šç”¨è¿™ä¸ªå€¼å…¶åˆå§‹åŒ–Â <code>stateValue</code>Â ç„¶åä¼ å‡ºå»ã€‚å¹¶ä¸”Â <code>setStateValue</code>Â æ–¹æ³•èƒ½æ”¹å˜å…¶å€¼ã€‚</p>
<p><code>setStateValue</code>Â å…¶å®åœ¨ä¼ å…¥Â <code>value</code>Â çš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºæ”¹å˜ä¸äº†Â <code>value</code>Â çš„å€¼ã€‚</p>
<h2 data-id="heading-4">å¦‚ä½•å°†çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>context</code> apiï¼Œå°†æœ€ç»ˆçš„ <code>checked</code>, <code>disabled</code>, <code>readonly</code> çŠ¶æ€è®©å­ç»„ä»¶ä½¿ç”¨ <code>useContext</code> æ¥è·å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RadioContext.Provider</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">å¦‚ä½•ä¿æŒè¯­ä¹‰æ€§</h2>
<p>æˆ‘ä»¬åªéœ€è¦å°† <code>input</code> ç»„ä»¶ä¾ç„¶æ¥å—ä¹‹å‰æˆ‘ä»¬çš„çŠ¶æ€ï¼Œå°±èƒ½ä¿æŒåŸç”Ÿ <code>radio</code> ç»„ä»¶çš„è¯­ä¹‰æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå–„ä¸€ä¸‹ <code>input</code> ç»„ä»¶,ä¹Ÿå°±æ˜¯æŠŠä¹‹å‰çš„çŠ¶æ€ä¼ é€’è¿‡å»å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputRef}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!!disabled}</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{!!checked}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            // é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†
            e.stopPropagation();
          }}
          aria-readonly={!!readonly}
        /&gt;
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
    &lt;/<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<h2 data-id="heading-6">Radio Group é€»è¾‘</h2>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <code>Radio Group</code> ç»„ä»¶åŒ…è£¹ä¸Šé¢æˆ‘ä»¬å®Œæˆçš„ <code>Radio</code> ç»„ä»¶ã€‚
æ ¸å¿ƒé€»è¾‘ä¸º, ä½¿ç”¨åŒæ ·æ˜¯ <code>useContext</code> apiï¼Œæˆ‘ä»¬å‘½åä¸º <code>RadioGroupContext</code> æ¥æŠŠå½“å‰é€‰ä¸­çš„ <code>Radio</code> æ ‡ç­¾çš„ <code>value</code> ä¼ é€’å³å¯ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;div role=<span class="hljs-string">"radiogroup"</span> {...rest}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RadioGroupContext.Provider</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">onChangeValue</span>,
          <span class="hljs-attr">type</span>,
          <span class="hljs-attr">value</span>,
          <span class="hljs-attr">disabled</span>,
          <span class="hljs-attr">readonly</span>,
          <span class="hljs-attr">group:</span> <span class="hljs-attr">true</span>,
          <span class="hljs-attr">name</span>,
        }}
      &gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">RadioGroupContext.Provider</span>&gt;</span></span>
    &lt;/div&gt;
</code></pre>
<h2 data-id="heading-7">å°ç»“</h2>
<p>æ–‡ç« æŠŠä¸»è¦çš„æ ¸å¿ƒé€»è¾‘æ¢³ç†äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰è¿‡å¤šè§£é‡Šæ¯è¡Œä»£ç ã€‚å¦‚æœä½ æƒ³è®¨è®ºå…³äºå¦‚ä½•å®ç°è‡ªå·±ç»„ä»¶åº“çš„çš„å†…å®¹ï¼Œæ¬¢è¿åŠ ç¾¤ä¸€èµ·è®¨è®ºï¼Œç»„ä»¶è¿˜åœ¨ä¸æ–­æ‹“å±•ä¸­ï¼Œæœ€ç»ˆä¼šå¯¹æ ‡å¤§å‚ç»„ä»¶åº“ã€‚</p>
<p>å…¶å®å¯¹äºä¸€ä¸ªå‰ç«¯æ¥è¯´ï¼Œç»„ä»¶åº“ç®—æ˜¯å›Šæ‹¬æ‰€æœ‰æ—¥å¸¸å¸¸è§çš„å‰ç«¯æŠ€æœ¯äº†ï¼Œæ— è®ºæ˜¯å­¦ä¹ è¿˜æ˜¯é¢è¯•ï¼Œéƒ½æ˜¯ç»ä½³çš„é¡¹ç›®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">ç›®å‰çš„å®˜ç½‘</a></li>
<li>æ„Ÿè°¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>